var Fx=Object.defineProperty;var Gx=(ft,lt,dt)=>lt in ft?Fx(ft,lt,{enumerable:!0,configurable:!0,writable:!0,value:dt}):ft[lt]=dt;var go=(ft,lt,dt)=>(Gx(ft,typeof lt!="symbol"?lt+"":lt,dt),dt);function _mergeNamespaces(ft,lt){for(var dt=0;dt<lt.length;dt++){const vt=lt[dt];if(typeof vt!="string"&&!Array.isArray(vt)){for(const Tt in vt)if(Tt!=="default"&&!(Tt in ft)){const Et=Object.getOwnPropertyDescriptor(vt,Tt);Et&&Object.defineProperty(ft,Tt,Et.get?Et:{enumerable:!0,get:()=>vt[Tt]})}}}return Object.freeze(Object.defineProperty(ft,Symbol.toStringTag,{value:"Module"}))}(function(){const lt=document.createElement("link").relList;if(lt&&lt.supports&&lt.supports("modulepreload"))return;for(const Tt of document.querySelectorAll('link[rel="modulepreload"]'))vt(Tt);new MutationObserver(Tt=>{for(const Et of Tt)if(Et.type==="childList")for(const Ct of Et.addedNodes)Ct.tagName==="LINK"&&Ct.rel==="modulepreload"&&vt(Ct)}).observe(document,{childList:!0,subtree:!0});function dt(Tt){const Et={};return Tt.integrity&&(Et.integrity=Tt.integrity),Tt.referrerPolicy&&(Et.referrerPolicy=Tt.referrerPolicy),Tt.crossOrigin==="use-credentials"?Et.credentials="include":Tt.crossOrigin==="anonymous"?Et.credentials="omit":Et.credentials="same-origin",Et}function vt(Tt){if(Tt.ep)return;Tt.ep=!0;const Et=dt(Tt);fetch(Tt.href,Et)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(ft){return ft&&ft.__esModule&&Object.prototype.hasOwnProperty.call(ft,"default")?ft.default:ft}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$9=Symbol.for("react.element"),n$9=Symbol.for("react.portal"),p$a=Symbol.for("react.fragment"),q$5=Symbol.for("react.strict_mode"),r$a=Symbol.for("react.profiler"),t$6=Symbol.for("react.provider"),u$9=Symbol.for("react.context"),v$8=Symbol.for("react.forward_ref"),w$7=Symbol.for("react.suspense"),x$6=Symbol.for("react.memo"),y$7=Symbol.for("react.lazy"),z$6=Symbol.iterator;function A$5(ft){return ft===null||typeof ft!="object"?null:(ft=z$6&&ft[z$6]||ft["@@iterator"],typeof ft=="function"?ft:null)}var B$3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$5=Object.assign,D$7={};function E$7(ft,lt,dt){this.props=ft,this.context=lt,this.refs=D$7,this.updater=dt||B$3}E$7.prototype.isReactComponent={};E$7.prototype.setState=function(ft,lt){if(typeof ft!="object"&&typeof ft!="function"&&ft!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ft,lt,"setState")};E$7.prototype.forceUpdate=function(ft){this.updater.enqueueForceUpdate(this,ft,"forceUpdate")};function F$2(){}F$2.prototype=E$7.prototype;function G$2(ft,lt,dt){this.props=ft,this.context=lt,this.refs=D$7,this.updater=dt||B$3}var H$6=G$2.prototype=new F$2;H$6.constructor=G$2;C$5(H$6,E$7.prototype);H$6.isPureReactComponent=!0;var I$5=Array.isArray,J$2=Object.prototype.hasOwnProperty,K$2={current:null},L$4={key:!0,ref:!0,__self:!0,__source:!0};function M$3(ft,lt,dt){var vt,Tt={},Et=null,Ct=null;if(lt!=null)for(vt in lt.ref!==void 0&&(Ct=lt.ref),lt.key!==void 0&&(Et=""+lt.key),lt)J$2.call(lt,vt)&&!L$4.hasOwnProperty(vt)&&(Tt[vt]=lt[vt]);var Rt=arguments.length-2;if(Rt===1)Tt.children=dt;else if(1<Rt){for(var kt=Array(Rt),Dt=0;Dt<Rt;Dt++)kt[Dt]=arguments[Dt+2];Tt.children=kt}if(ft&&ft.defaultProps)for(vt in Rt=ft.defaultProps,Rt)Tt[vt]===void 0&&(Tt[vt]=Rt[vt]);return{$$typeof:l$9,type:ft,key:Et,ref:Ct,props:Tt,_owner:K$2.current}}function N$4(ft,lt){return{$$typeof:l$9,type:ft.type,key:lt,ref:ft.ref,props:ft.props,_owner:ft._owner}}function O$5(ft){return typeof ft=="object"&&ft!==null&&ft.$$typeof===l$9}function escape$1(ft){var lt={"=":"=0",":":"=2"};return"$"+ft.replace(/[=:]/g,function(dt){return lt[dt]})}var P$5=/\/+/g;function Q$5(ft,lt){return typeof ft=="object"&&ft!==null&&ft.key!=null?escape$1(""+ft.key):lt.toString(36)}function R$4(ft,lt,dt,vt,Tt){var Et=typeof ft;(Et==="undefined"||Et==="boolean")&&(ft=null);var Ct=!1;if(ft===null)Ct=!0;else switch(Et){case"string":case"number":Ct=!0;break;case"object":switch(ft.$$typeof){case l$9:case n$9:Ct=!0}}if(Ct)return Ct=ft,Tt=Tt(Ct),ft=vt===""?"."+Q$5(Ct,0):vt,I$5(Tt)?(dt="",ft!=null&&(dt=ft.replace(P$5,"$&/")+"/"),R$4(Tt,lt,dt,"",function(Dt){return Dt})):Tt!=null&&(O$5(Tt)&&(Tt=N$4(Tt,dt+(!Tt.key||Ct&&Ct.key===Tt.key?"":(""+Tt.key).replace(P$5,"$&/")+"/")+ft)),lt.push(Tt)),1;if(Ct=0,vt=vt===""?".":vt+":",I$5(ft))for(var Rt=0;Rt<ft.length;Rt++){Et=ft[Rt];var kt=vt+Q$5(Et,Rt);Ct+=R$4(Et,lt,dt,kt,Tt)}else if(kt=A$5(ft),typeof kt=="function")for(ft=kt.call(ft),Rt=0;!(Et=ft.next()).done;)Et=Et.value,kt=vt+Q$5(Et,Rt++),Ct+=R$4(Et,lt,dt,kt,Tt);else if(Et==="object")throw lt=String(ft),Error("Objects are not valid as a React child (found: "+(lt==="[object Object]"?"object with keys {"+Object.keys(ft).join(", ")+"}":lt)+"). If you meant to render a collection of children, use an array instead.");return Ct}function S$4(ft,lt,dt){if(ft==null)return ft;var vt=[],Tt=0;return R$4(ft,vt,"","",function(Et){return lt.call(dt,Et,Tt++)}),vt}function T$4(ft){if(ft._status===-1){var lt=ft._result;lt=lt(),lt.then(function(dt){(ft._status===0||ft._status===-1)&&(ft._status=1,ft._result=dt)},function(dt){(ft._status===0||ft._status===-1)&&(ft._status=2,ft._result=dt)}),ft._status===-1&&(ft._status=0,ft._result=lt)}if(ft._status===1)return ft._result.default;throw ft._result}var U$3={current:null},V$4={transition:null},W$5={ReactCurrentDispatcher:U$3,ReactCurrentBatchConfig:V$4,ReactCurrentOwner:K$2};react_production_min.Children={map:S$4,forEach:function(ft,lt,dt){S$4(ft,function(){lt.apply(this,arguments)},dt)},count:function(ft){var lt=0;return S$4(ft,function(){lt++}),lt},toArray:function(ft){return S$4(ft,function(lt){return lt})||[]},only:function(ft){if(!O$5(ft))throw Error("React.Children.only expected to receive a single React element child.");return ft}};react_production_min.Component=E$7;react_production_min.Fragment=p$a;react_production_min.Profiler=r$a;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$5;react_production_min.Suspense=w$7;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$5;react_production_min.cloneElement=function(ft,lt,dt){if(ft==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ft+".");var vt=C$5({},ft.props),Tt=ft.key,Et=ft.ref,Ct=ft._owner;if(lt!=null){if(lt.ref!==void 0&&(Et=lt.ref,Ct=K$2.current),lt.key!==void 0&&(Tt=""+lt.key),ft.type&&ft.type.defaultProps)var Rt=ft.type.defaultProps;for(kt in lt)J$2.call(lt,kt)&&!L$4.hasOwnProperty(kt)&&(vt[kt]=lt[kt]===void 0&&Rt!==void 0?Rt[kt]:lt[kt])}var kt=arguments.length-2;if(kt===1)vt.children=dt;else if(1<kt){Rt=Array(kt);for(var Dt=0;Dt<kt;Dt++)Rt[Dt]=arguments[Dt+2];vt.children=Rt}return{$$typeof:l$9,type:ft.type,key:Tt,ref:Et,props:vt,_owner:Ct}};react_production_min.createContext=function(ft){return ft={$$typeof:u$9,_currentValue:ft,_currentValue2:ft,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ft.Provider={$$typeof:t$6,_context:ft},ft.Consumer=ft};react_production_min.createElement=M$3;react_production_min.createFactory=function(ft){var lt=M$3.bind(null,ft);return lt.type=ft,lt};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(ft){return{$$typeof:v$8,render:ft}};react_production_min.isValidElement=O$5;react_production_min.lazy=function(ft){return{$$typeof:y$7,_payload:{_status:-1,_result:ft},_init:T$4}};react_production_min.memo=function(ft,lt){return{$$typeof:x$6,type:ft,compare:lt===void 0?null:lt}};react_production_min.startTransition=function(ft){var lt=V$4.transition;V$4.transition={};try{ft()}finally{V$4.transition=lt}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(ft,lt){return U$3.current.useCallback(ft,lt)};react_production_min.useContext=function(ft){return U$3.current.useContext(ft)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(ft){return U$3.current.useDeferredValue(ft)};react_production_min.useEffect=function(ft,lt){return U$3.current.useEffect(ft,lt)};react_production_min.useId=function(){return U$3.current.useId()};react_production_min.useImperativeHandle=function(ft,lt,dt){return U$3.current.useImperativeHandle(ft,lt,dt)};react_production_min.useInsertionEffect=function(ft,lt){return U$3.current.useInsertionEffect(ft,lt)};react_production_min.useLayoutEffect=function(ft,lt){return U$3.current.useLayoutEffect(ft,lt)};react_production_min.useMemo=function(ft,lt){return U$3.current.useMemo(ft,lt)};react_production_min.useReducer=function(ft,lt,dt){return U$3.current.useReducer(ft,lt,dt)};react_production_min.useRef=function(ft){return U$3.current.useRef(ft)};react_production_min.useState=function(ft){return U$3.current.useState(ft)};react_production_min.useSyncExternalStore=function(ft,lt,dt){return U$3.current.useSyncExternalStore(ft,lt,dt)};react_production_min.useTransition=function(){return U$3.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$7=reactExports,k$5=Symbol.for("react.element"),l$8=Symbol.for("react.fragment"),m$7=Object.prototype.hasOwnProperty,n$8=f$7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$9={key:!0,ref:!0,__self:!0,__source:!0};function q$4(ft,lt,dt){var vt,Tt={},Et=null,Ct=null;dt!==void 0&&(Et=""+dt),lt.key!==void 0&&(Et=""+lt.key),lt.ref!==void 0&&(Ct=lt.ref);for(vt in lt)m$7.call(lt,vt)&&!p$9.hasOwnProperty(vt)&&(Tt[vt]=lt[vt]);if(ft&&ft.defaultProps)for(vt in lt=ft.defaultProps,lt)Tt[vt]===void 0&&(Tt[vt]=lt[vt]);return{$$typeof:k$5,type:ft,key:Et,ref:Ct,props:Tt,_owner:n$8.current}}reactJsxRuntime_production_min.Fragment=l$8;reactJsxRuntime_production_min.jsx=q$4;reactJsxRuntime_production_min.jsxs=q$4;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports;const Fragment=jsxRuntimeExports.Fragment,jsx=jsxRuntimeExports.jsx,jsxs=jsxRuntimeExports.jsxs;var client={},reactDom={exports:{}},reactDom_production_min={},scheduler$2={exports:{}},scheduler_production_min$2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(ft){function lt(Ln,Vn){var Wn=Ln.length;Ln.push(Vn);e:for(;0<Wn;){var sr=Wn-1>>>1,Mn=Ln[sr];if(0<Tt(Mn,Vn))Ln[sr]=Vn,Ln[Wn]=Mn,Wn=sr;else break e}}function dt(Ln){return Ln.length===0?null:Ln[0]}function vt(Ln){if(Ln.length===0)return null;var Vn=Ln[0],Wn=Ln.pop();if(Wn!==Vn){Ln[0]=Wn;e:for(var sr=0,Mn=Ln.length,ir=Mn>>>1;sr<ir;){var mr=2*(sr+1)-1,tr=Ln[mr],Dr=mr+1,Sr=Ln[Dr];if(0>Tt(tr,Wn))Dr<Mn&&0>Tt(Sr,tr)?(Ln[sr]=Sr,Ln[Dr]=Wn,sr=Dr):(Ln[sr]=tr,Ln[mr]=Wn,sr=mr);else if(Dr<Mn&&0>Tt(Sr,Wn))Ln[sr]=Sr,Ln[Dr]=Wn,sr=Dr;else break e}}return Vn}function Tt(Ln,Vn){var Wn=Ln.sortIndex-Vn.sortIndex;return Wn!==0?Wn:Ln.id-Vn.id}if(typeof performance=="object"&&typeof performance.now=="function"){var Et=performance;ft.unstable_now=function(){return Et.now()}}else{var Ct=Date,Rt=Ct.now();ft.unstable_now=function(){return Ct.now()-Rt}}var kt=[],Dt=[],Bt=1,Ft=null,Ut=3,Zt=!1,Kt=!1,ln=!1,hn=typeof setTimeout=="function"?setTimeout:null,dn=typeof clearTimeout=="function"?clearTimeout:null,pn=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function mn(Ln){for(var Vn=dt(Dt);Vn!==null;){if(Vn.callback===null)vt(Dt);else if(Vn.startTime<=Ln)vt(Dt),Vn.sortIndex=Vn.expirationTime,lt(kt,Vn);else break;Vn=dt(Dt)}}function On(Ln){if(ln=!1,mn(Ln),!Kt)if(dt(kt)!==null)Kt=!0,zn(bn);else{var Vn=dt(Dt);Vn!==null&&lr(On,Vn.startTime-Ln)}}function bn(Ln,Vn){Kt=!1,ln&&(ln=!1,dn(Tn),Tn=-1),Zt=!0;var Wn=Ut;try{for(mn(Vn),Ft=dt(kt);Ft!==null&&(!(Ft.expirationTime>Vn)||Ln&&!Dn());){var sr=Ft.callback;if(typeof sr=="function"){Ft.callback=null,Ut=Ft.priorityLevel;var Mn=sr(Ft.expirationTime<=Vn);Vn=ft.unstable_now(),typeof Mn=="function"?Ft.callback=Mn:Ft===dt(kt)&&vt(kt),mn(Vn)}else vt(kt);Ft=dt(kt)}if(Ft!==null)var ir=!0;else{var mr=dt(Dt);mr!==null&&lr(On,mr.startTime-Vn),ir=!1}return ir}finally{Ft=null,Ut=Wn,Zt=!1}}var En=!1,An=null,Tn=-1,In=5,Rn=-1;function Dn(){return!(ft.unstable_now()-Rn<In)}function Bn(){if(An!==null){var Ln=ft.unstable_now();Rn=Ln;var Vn=!0;try{Vn=An(!0,Ln)}finally{Vn?Hn():(En=!1,An=null)}}else En=!1}var Hn;if(typeof pn=="function")Hn=function(){pn(Bn)};else if(typeof MessageChannel<"u"){var jn=new MessageChannel,Kn=jn.port2;jn.port1.onmessage=Bn,Hn=function(){Kn.postMessage(null)}}else Hn=function(){hn(Bn,0)};function zn(Ln){An=Ln,En||(En=!0,Hn())}function lr(Ln,Vn){Tn=hn(function(){Ln(ft.unstable_now())},Vn)}ft.unstable_IdlePriority=5,ft.unstable_ImmediatePriority=1,ft.unstable_LowPriority=4,ft.unstable_NormalPriority=3,ft.unstable_Profiling=null,ft.unstable_UserBlockingPriority=2,ft.unstable_cancelCallback=function(Ln){Ln.callback=null},ft.unstable_continueExecution=function(){Kt||Zt||(Kt=!0,zn(bn))},ft.unstable_forceFrameRate=function(Ln){0>Ln||125<Ln?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):In=0<Ln?Math.floor(1e3/Ln):5},ft.unstable_getCurrentPriorityLevel=function(){return Ut},ft.unstable_getFirstCallbackNode=function(){return dt(kt)},ft.unstable_next=function(Ln){switch(Ut){case 1:case 2:case 3:var Vn=3;break;default:Vn=Ut}var Wn=Ut;Ut=Vn;try{return Ln()}finally{Ut=Wn}},ft.unstable_pauseExecution=function(){},ft.unstable_requestPaint=function(){},ft.unstable_runWithPriority=function(Ln,Vn){switch(Ln){case 1:case 2:case 3:case 4:case 5:break;default:Ln=3}var Wn=Ut;Ut=Ln;try{return Vn()}finally{Ut=Wn}},ft.unstable_scheduleCallback=function(Ln,Vn,Wn){var sr=ft.unstable_now();switch(typeof Wn=="object"&&Wn!==null?(Wn=Wn.delay,Wn=typeof Wn=="number"&&0<Wn?sr+Wn:sr):Wn=sr,Ln){case 1:var Mn=-1;break;case 2:Mn=250;break;case 5:Mn=1073741823;break;case 4:Mn=1e4;break;default:Mn=5e3}return Mn=Wn+Mn,Ln={id:Bt++,callback:Vn,priorityLevel:Ln,startTime:Wn,expirationTime:Mn,sortIndex:-1},Wn>sr?(Ln.sortIndex=Wn,lt(Dt,Ln),dt(kt)===null&&Ln===dt(Dt)&&(ln?(dn(Tn),Tn=-1):ln=!0,lr(On,Wn-sr))):(Ln.sortIndex=Mn,lt(kt,Ln),Kt||Zt||(Kt=!0,zn(bn))),Ln},ft.unstable_shouldYield=Dn,ft.unstable_wrapCallback=function(Ln){var Vn=Ut;return function(){var Wn=Ut;Ut=Vn;try{return Ln.apply(this,arguments)}finally{Ut=Wn}}}})(scheduler_production_min$2);scheduler$2.exports=scheduler_production_min$2;var schedulerExports$1=scheduler$2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports$1;function p$8(ft){for(var lt="https://reactjs.org/docs/error-decoder.html?invariant="+ft,dt=1;dt<arguments.length;dt++)lt+="&args[]="+encodeURIComponent(arguments[dt]);return"Minified React error #"+ft+"; visit "+lt+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(ft,lt){ha(ft,lt),ha(ft+"Capture",lt)}function ha(ft,lt){for(ea[ft]=lt,ft=0;ft<lt.length;ft++)da.add(lt[ft])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(ft){return ja.call(ma,ft)?!0:ja.call(la,ft)?!1:ka.test(ft)?ma[ft]=!0:(la[ft]=!0,!1)}function pa(ft,lt,dt,vt){if(dt!==null&&dt.type===0)return!1;switch(typeof lt){case"function":case"symbol":return!0;case"boolean":return vt?!1:dt!==null?!dt.acceptsBooleans:(ft=ft.toLowerCase().slice(0,5),ft!=="data-"&&ft!=="aria-");default:return!1}}function qa(ft,lt,dt,vt){if(lt===null||typeof lt>"u"||pa(ft,lt,dt,vt))return!0;if(vt)return!1;if(dt!==null)switch(dt.type){case 3:return!lt;case 4:return lt===!1;case 5:return isNaN(lt);case 6:return isNaN(lt)||1>lt}return!1}function v$7(ft,lt,dt,vt,Tt,Et,Ct){this.acceptsBooleans=lt===2||lt===3||lt===4,this.attributeName=vt,this.attributeNamespace=Tt,this.mustUseProperty=dt,this.propertyName=ft,this.type=lt,this.sanitizeURL=Et,this.removeEmptyString=Ct}var z$5={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(ft){z$5[ft]=new v$7(ft,0,!1,ft,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(ft){var lt=ft[0];z$5[lt]=new v$7(lt,1,!1,ft[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(ft){z$5[ft]=new v$7(ft,2,!1,ft.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(ft){z$5[ft]=new v$7(ft,2,!1,ft,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(ft){z$5[ft]=new v$7(ft,3,!1,ft.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(ft){z$5[ft]=new v$7(ft,3,!0,ft,null,!1,!1)});["capture","download"].forEach(function(ft){z$5[ft]=new v$7(ft,4,!1,ft,null,!1,!1)});["cols","rows","size","span"].forEach(function(ft){z$5[ft]=new v$7(ft,6,!1,ft,null,!1,!1)});["rowSpan","start"].forEach(function(ft){z$5[ft]=new v$7(ft,5,!1,ft.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(ft){return ft[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(ft){var lt=ft.replace(ra,sa);z$5[lt]=new v$7(lt,1,!1,ft,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(ft){var lt=ft.replace(ra,sa);z$5[lt]=new v$7(lt,1,!1,ft,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(ft){var lt=ft.replace(ra,sa);z$5[lt]=new v$7(lt,1,!1,ft,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(ft){z$5[ft]=new v$7(ft,1,!1,ft.toLowerCase(),null,!1,!1)});z$5.xlinkHref=new v$7("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(ft){z$5[ft]=new v$7(ft,1,!1,ft.toLowerCase(),null,!0,!0)});function ta(ft,lt,dt,vt){var Tt=z$5.hasOwnProperty(lt)?z$5[lt]:null;(Tt!==null?Tt.type!==0:vt||!(2<lt.length)||lt[0]!=="o"&&lt[0]!=="O"||lt[1]!=="n"&&lt[1]!=="N")&&(qa(lt,dt,Tt,vt)&&(dt=null),vt||Tt===null?oa(lt)&&(dt===null?ft.removeAttribute(lt):ft.setAttribute(lt,""+dt)):Tt.mustUseProperty?ft[Tt.propertyName]=dt===null?Tt.type===3?!1:"":dt:(lt=Tt.attributeName,vt=Tt.attributeNamespace,dt===null?ft.removeAttribute(lt):(Tt=Tt.type,dt=Tt===3||Tt===4&&dt===!0?"":""+dt,vt?ft.setAttributeNS(vt,lt,dt):ft.setAttribute(lt,dt))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(ft){return ft===null||typeof ft!="object"?null:(ft=Ja&&ft[Ja]||ft["@@iterator"],typeof ft=="function"?ft:null)}var A$4=Object.assign,La;function Ma(ft){if(La===void 0)try{throw Error()}catch(dt){var lt=dt.stack.trim().match(/\n( *(at )?)/);La=lt&&lt[1]||""}return`
`+La+ft}var Na=!1;function Oa(ft,lt){if(!ft||Na)return"";Na=!0;var dt=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(lt)if(lt=function(){throw Error()},Object.defineProperty(lt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(lt,[])}catch(Dt){var vt=Dt}Reflect.construct(ft,[],lt)}else{try{lt.call()}catch(Dt){vt=Dt}ft.call(lt.prototype)}else{try{throw Error()}catch(Dt){vt=Dt}ft()}}catch(Dt){if(Dt&&vt&&typeof Dt.stack=="string"){for(var Tt=Dt.stack.split(`
`),Et=vt.stack.split(`
`),Ct=Tt.length-1,Rt=Et.length-1;1<=Ct&&0<=Rt&&Tt[Ct]!==Et[Rt];)Rt--;for(;1<=Ct&&0<=Rt;Ct--,Rt--)if(Tt[Ct]!==Et[Rt]){if(Ct!==1||Rt!==1)do if(Ct--,Rt--,0>Rt||Tt[Ct]!==Et[Rt]){var kt=`
`+Tt[Ct].replace(" at new "," at ");return ft.displayName&&kt.includes("<anonymous>")&&(kt=kt.replace("<anonymous>",ft.displayName)),kt}while(1<=Ct&&0<=Rt);break}}}finally{Na=!1,Error.prepareStackTrace=dt}return(ft=ft?ft.displayName||ft.name:"")?Ma(ft):""}function Pa(ft){switch(ft.tag){case 5:return Ma(ft.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return ft=Oa(ft.type,!1),ft;case 11:return ft=Oa(ft.type.render,!1),ft;case 1:return ft=Oa(ft.type,!0),ft;default:return""}}function Qa(ft){if(ft==null)return null;if(typeof ft=="function")return ft.displayName||ft.name||null;if(typeof ft=="string")return ft;switch(ft){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof ft=="object")switch(ft.$$typeof){case Ca:return(ft.displayName||"Context")+".Consumer";case Ba:return(ft._context.displayName||"Context")+".Provider";case Da:var lt=ft.render;return ft=ft.displayName,ft||(ft=lt.displayName||lt.name||"",ft=ft!==""?"ForwardRef("+ft+")":"ForwardRef"),ft;case Ga:return lt=ft.displayName||null,lt!==null?lt:Qa(ft.type)||"Memo";case Ha:lt=ft._payload,ft=ft._init;try{return Qa(ft(lt))}catch{}}return null}function Ra(ft){var lt=ft.type;switch(ft.tag){case 24:return"Cache";case 9:return(lt.displayName||"Context")+".Consumer";case 10:return(lt._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return ft=lt.render,ft=ft.displayName||ft.name||"",lt.displayName||(ft!==""?"ForwardRef("+ft+")":"ForwardRef");case 7:return"Fragment";case 5:return lt;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(lt);case 8:return lt===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof lt=="function")return lt.displayName||lt.name||null;if(typeof lt=="string")return lt}return null}function Sa(ft){switch(typeof ft){case"boolean":case"number":case"string":case"undefined":return ft;case"object":return ft;default:return""}}function Ta(ft){var lt=ft.type;return(ft=ft.nodeName)&&ft.toLowerCase()==="input"&&(lt==="checkbox"||lt==="radio")}function Ua(ft){var lt=Ta(ft)?"checked":"value",dt=Object.getOwnPropertyDescriptor(ft.constructor.prototype,lt),vt=""+ft[lt];if(!ft.hasOwnProperty(lt)&&typeof dt<"u"&&typeof dt.get=="function"&&typeof dt.set=="function"){var Tt=dt.get,Et=dt.set;return Object.defineProperty(ft,lt,{configurable:!0,get:function(){return Tt.call(this)},set:function(Ct){vt=""+Ct,Et.call(this,Ct)}}),Object.defineProperty(ft,lt,{enumerable:dt.enumerable}),{getValue:function(){return vt},setValue:function(Ct){vt=""+Ct},stopTracking:function(){ft._valueTracker=null,delete ft[lt]}}}}function Va(ft){ft._valueTracker||(ft._valueTracker=Ua(ft))}function Wa(ft){if(!ft)return!1;var lt=ft._valueTracker;if(!lt)return!0;var dt=lt.getValue(),vt="";return ft&&(vt=Ta(ft)?ft.checked?"true":"false":ft.value),ft=vt,ft!==dt?(lt.setValue(ft),!0):!1}function Xa(ft){if(ft=ft||(typeof document<"u"?document:void 0),typeof ft>"u")return null;try{return ft.activeElement||ft.body}catch{return ft.body}}function Ya(ft,lt){var dt=lt.checked;return A$4({},lt,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:dt??ft._wrapperState.initialChecked})}function Za(ft,lt){var dt=lt.defaultValue==null?"":lt.defaultValue,vt=lt.checked!=null?lt.checked:lt.defaultChecked;dt=Sa(lt.value!=null?lt.value:dt),ft._wrapperState={initialChecked:vt,initialValue:dt,controlled:lt.type==="checkbox"||lt.type==="radio"?lt.checked!=null:lt.value!=null}}function ab(ft,lt){lt=lt.checked,lt!=null&&ta(ft,"checked",lt,!1)}function bb(ft,lt){ab(ft,lt);var dt=Sa(lt.value),vt=lt.type;if(dt!=null)vt==="number"?(dt===0&&ft.value===""||ft.value!=dt)&&(ft.value=""+dt):ft.value!==""+dt&&(ft.value=""+dt);else if(vt==="submit"||vt==="reset"){ft.removeAttribute("value");return}lt.hasOwnProperty("value")?cb(ft,lt.type,dt):lt.hasOwnProperty("defaultValue")&&cb(ft,lt.type,Sa(lt.defaultValue)),lt.checked==null&&lt.defaultChecked!=null&&(ft.defaultChecked=!!lt.defaultChecked)}function db(ft,lt,dt){if(lt.hasOwnProperty("value")||lt.hasOwnProperty("defaultValue")){var vt=lt.type;if(!(vt!=="submit"&&vt!=="reset"||lt.value!==void 0&&lt.value!==null))return;lt=""+ft._wrapperState.initialValue,dt||lt===ft.value||(ft.value=lt),ft.defaultValue=lt}dt=ft.name,dt!==""&&(ft.name=""),ft.defaultChecked=!!ft._wrapperState.initialChecked,dt!==""&&(ft.name=dt)}function cb(ft,lt,dt){(lt!=="number"||Xa(ft.ownerDocument)!==ft)&&(dt==null?ft.defaultValue=""+ft._wrapperState.initialValue:ft.defaultValue!==""+dt&&(ft.defaultValue=""+dt))}var eb=Array.isArray;function fb(ft,lt,dt,vt){if(ft=ft.options,lt){lt={};for(var Tt=0;Tt<dt.length;Tt++)lt["$"+dt[Tt]]=!0;for(dt=0;dt<ft.length;dt++)Tt=lt.hasOwnProperty("$"+ft[dt].value),ft[dt].selected!==Tt&&(ft[dt].selected=Tt),Tt&&vt&&(ft[dt].defaultSelected=!0)}else{for(dt=""+Sa(dt),lt=null,Tt=0;Tt<ft.length;Tt++){if(ft[Tt].value===dt){ft[Tt].selected=!0,vt&&(ft[Tt].defaultSelected=!0);return}lt!==null||ft[Tt].disabled||(lt=ft[Tt])}lt!==null&&(lt.selected=!0)}}function gb(ft,lt){if(lt.dangerouslySetInnerHTML!=null)throw Error(p$8(91));return A$4({},lt,{value:void 0,defaultValue:void 0,children:""+ft._wrapperState.initialValue})}function hb(ft,lt){var dt=lt.value;if(dt==null){if(dt=lt.children,lt=lt.defaultValue,dt!=null){if(lt!=null)throw Error(p$8(92));if(eb(dt)){if(1<dt.length)throw Error(p$8(93));dt=dt[0]}lt=dt}lt==null&&(lt=""),dt=lt}ft._wrapperState={initialValue:Sa(dt)}}function ib(ft,lt){var dt=Sa(lt.value),vt=Sa(lt.defaultValue);dt!=null&&(dt=""+dt,dt!==ft.value&&(ft.value=dt),lt.defaultValue==null&&ft.defaultValue!==dt&&(ft.defaultValue=dt)),vt!=null&&(ft.defaultValue=""+vt)}function jb(ft){var lt=ft.textContent;lt===ft._wrapperState.initialValue&&lt!==""&&lt!==null&&(ft.value=lt)}function kb(ft){switch(ft){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(ft,lt){return ft==null||ft==="http://www.w3.org/1999/xhtml"?kb(lt):ft==="http://www.w3.org/2000/svg"&&lt==="foreignObject"?"http://www.w3.org/1999/xhtml":ft}var mb,nb=function(ft){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(lt,dt,vt,Tt){MSApp.execUnsafeLocalFunction(function(){return ft(lt,dt,vt,Tt)})}:ft}(function(ft,lt){if(ft.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in ft)ft.innerHTML=lt;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+lt.valueOf().toString()+"</svg>",lt=mb.firstChild;ft.firstChild;)ft.removeChild(ft.firstChild);for(;lt.firstChild;)ft.appendChild(lt.firstChild)}});function ob(ft,lt){if(lt){var dt=ft.firstChild;if(dt&&dt===ft.lastChild&&dt.nodeType===3){dt.nodeValue=lt;return}}ft.textContent=lt}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(ft){qb.forEach(function(lt){lt=lt+ft.charAt(0).toUpperCase()+ft.substring(1),pb[lt]=pb[ft]})});function rb(ft,lt,dt){return lt==null||typeof lt=="boolean"||lt===""?"":dt||typeof lt!="number"||lt===0||pb.hasOwnProperty(ft)&&pb[ft]?(""+lt).trim():lt+"px"}function sb(ft,lt){ft=ft.style;for(var dt in lt)if(lt.hasOwnProperty(dt)){var vt=dt.indexOf("--")===0,Tt=rb(dt,lt[dt],vt);dt==="float"&&(dt="cssFloat"),vt?ft.setProperty(dt,Tt):ft[dt]=Tt}}var tb=A$4({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(ft,lt){if(lt){if(tb[ft]&&(lt.children!=null||lt.dangerouslySetInnerHTML!=null))throw Error(p$8(137,ft));if(lt.dangerouslySetInnerHTML!=null){if(lt.children!=null)throw Error(p$8(60));if(typeof lt.dangerouslySetInnerHTML!="object"||!("__html"in lt.dangerouslySetInnerHTML))throw Error(p$8(61))}if(lt.style!=null&&typeof lt.style!="object")throw Error(p$8(62))}}function vb(ft,lt){if(ft.indexOf("-")===-1)return typeof lt.is=="string";switch(ft){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(ft){return ft=ft.target||ft.srcElement||window,ft.correspondingUseElement&&(ft=ft.correspondingUseElement),ft.nodeType===3?ft.parentNode:ft}var yb=null,zb=null,Ab=null;function Bb(ft){if(ft=Cb(ft)){if(typeof yb!="function")throw Error(p$8(280));var lt=ft.stateNode;lt&&(lt=Db(lt),yb(ft.stateNode,ft.type,lt))}}function Eb(ft){zb?Ab?Ab.push(ft):Ab=[ft]:zb=ft}function Fb(){if(zb){var ft=zb,lt=Ab;if(Ab=zb=null,Bb(ft),lt)for(ft=0;ft<lt.length;ft++)Bb(lt[ft])}}function Gb(ft,lt){return ft(lt)}function Hb(){}var Ib=!1;function Jb(ft,lt,dt){if(Ib)return ft(lt,dt);Ib=!0;try{return Gb(ft,lt,dt)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(ft,lt){var dt=ft.stateNode;if(dt===null)return null;var vt=Db(dt);if(vt===null)return null;dt=vt[lt];e:switch(lt){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(vt=!vt.disabled)||(ft=ft.type,vt=!(ft==="button"||ft==="input"||ft==="select"||ft==="textarea")),ft=!vt;break e;default:ft=!1}if(ft)return null;if(dt&&typeof dt!="function")throw Error(p$8(231,lt,typeof dt));return dt}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(ft,lt,dt,vt,Tt,Et,Ct,Rt,kt){var Dt=Array.prototype.slice.call(arguments,3);try{lt.apply(dt,Dt)}catch(Bt){this.onError(Bt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(ft){Ob=!0,Pb=ft}};function Tb(ft,lt,dt,vt,Tt,Et,Ct,Rt,kt){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(ft,lt,dt,vt,Tt,Et,Ct,Rt,kt){if(Tb.apply(this,arguments),Ob){if(Ob){var Dt=Pb;Ob=!1,Pb=null}else throw Error(p$8(198));Qb||(Qb=!0,Rb=Dt)}}function Vb(ft){var lt=ft,dt=ft;if(ft.alternate)for(;lt.return;)lt=lt.return;else{ft=lt;do lt=ft,lt.flags&4098&&(dt=lt.return),ft=lt.return;while(ft)}return lt.tag===3?dt:null}function Wb(ft){if(ft.tag===13){var lt=ft.memoizedState;if(lt===null&&(ft=ft.alternate,ft!==null&&(lt=ft.memoizedState)),lt!==null)return lt.dehydrated}return null}function Xb(ft){if(Vb(ft)!==ft)throw Error(p$8(188))}function Yb(ft){var lt=ft.alternate;if(!lt){if(lt=Vb(ft),lt===null)throw Error(p$8(188));return lt!==ft?null:ft}for(var dt=ft,vt=lt;;){var Tt=dt.return;if(Tt===null)break;var Et=Tt.alternate;if(Et===null){if(vt=Tt.return,vt!==null){dt=vt;continue}break}if(Tt.child===Et.child){for(Et=Tt.child;Et;){if(Et===dt)return Xb(Tt),ft;if(Et===vt)return Xb(Tt),lt;Et=Et.sibling}throw Error(p$8(188))}if(dt.return!==vt.return)dt=Tt,vt=Et;else{for(var Ct=!1,Rt=Tt.child;Rt;){if(Rt===dt){Ct=!0,dt=Tt,vt=Et;break}if(Rt===vt){Ct=!0,vt=Tt,dt=Et;break}Rt=Rt.sibling}if(!Ct){for(Rt=Et.child;Rt;){if(Rt===dt){Ct=!0,dt=Et,vt=Tt;break}if(Rt===vt){Ct=!0,vt=Et,dt=Tt;break}Rt=Rt.sibling}if(!Ct)throw Error(p$8(189))}}if(dt.alternate!==vt)throw Error(p$8(190))}if(dt.tag!==3)throw Error(p$8(188));return dt.stateNode.current===dt?ft:lt}function Zb(ft){return ft=Yb(ft),ft!==null?$b(ft):null}function $b(ft){if(ft.tag===5||ft.tag===6)return ft;for(ft=ft.child;ft!==null;){var lt=$b(ft);if(lt!==null)return lt;ft=ft.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$2=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(ft){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,ft,void 0,(ft.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(ft){return ft>>>=0,ft===0?32:31-(pc(ft)/qc|0)|0}var rc=64,sc=4194304;function tc(ft){switch(ft&-ft){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return ft&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return ft&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return ft}}function uc(ft,lt){var dt=ft.pendingLanes;if(dt===0)return 0;var vt=0,Tt=ft.suspendedLanes,Et=ft.pingedLanes,Ct=dt&268435455;if(Ct!==0){var Rt=Ct&~Tt;Rt!==0?vt=tc(Rt):(Et&=Ct,Et!==0&&(vt=tc(Et)))}else Ct=dt&~Tt,Ct!==0?vt=tc(Ct):Et!==0&&(vt=tc(Et));if(vt===0)return 0;if(lt!==0&&lt!==vt&&!(lt&Tt)&&(Tt=vt&-vt,Et=lt&-lt,Tt>=Et||Tt===16&&(Et&4194240)!==0))return lt;if(vt&4&&(vt|=dt&16),lt=ft.entangledLanes,lt!==0)for(ft=ft.entanglements,lt&=vt;0<lt;)dt=31-oc(lt),Tt=1<<dt,vt|=ft[dt],lt&=~Tt;return vt}function vc(ft,lt){switch(ft){case 1:case 2:case 4:return lt+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return lt+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(ft,lt){for(var dt=ft.suspendedLanes,vt=ft.pingedLanes,Tt=ft.expirationTimes,Et=ft.pendingLanes;0<Et;){var Ct=31-oc(Et),Rt=1<<Ct,kt=Tt[Ct];kt===-1?(!(Rt&dt)||Rt&vt)&&(Tt[Ct]=vc(Rt,lt)):kt<=lt&&(ft.expiredLanes|=Rt),Et&=~Rt}}function xc(ft){return ft=ft.pendingLanes&-1073741825,ft!==0?ft:ft&1073741824?1073741824:0}function yc(){var ft=rc;return rc<<=1,!(rc&4194240)&&(rc=64),ft}function zc(ft){for(var lt=[],dt=0;31>dt;dt++)lt.push(ft);return lt}function Ac(ft,lt,dt){ft.pendingLanes|=lt,lt!==536870912&&(ft.suspendedLanes=0,ft.pingedLanes=0),ft=ft.eventTimes,lt=31-oc(lt),ft[lt]=dt}function Bc(ft,lt){var dt=ft.pendingLanes&~lt;ft.pendingLanes=lt,ft.suspendedLanes=0,ft.pingedLanes=0,ft.expiredLanes&=lt,ft.mutableReadLanes&=lt,ft.entangledLanes&=lt,lt=ft.entanglements;var vt=ft.eventTimes;for(ft=ft.expirationTimes;0<dt;){var Tt=31-oc(dt),Et=1<<Tt;lt[Tt]=0,vt[Tt]=-1,ft[Tt]=-1,dt&=~Et}}function Cc(ft,lt){var dt=ft.entangledLanes|=lt;for(ft=ft.entanglements;dt;){var vt=31-oc(dt),Tt=1<<vt;Tt&lt|ft[vt]&lt&&(ft[vt]|=lt),dt&=~Tt}}var C$4=0;function Dc(ft){return ft&=-ft,1<ft?4<ft?ft&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(ft,lt){switch(ft){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(lt.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(lt.pointerId)}}function Tc(ft,lt,dt,vt,Tt,Et){return ft===null||ft.nativeEvent!==Et?(ft={blockedOn:lt,domEventName:dt,eventSystemFlags:vt,nativeEvent:Et,targetContainers:[Tt]},lt!==null&&(lt=Cb(lt),lt!==null&&Fc(lt)),ft):(ft.eventSystemFlags|=vt,lt=ft.targetContainers,Tt!==null&&lt.indexOf(Tt)===-1&&lt.push(Tt),ft)}function Uc(ft,lt,dt,vt,Tt){switch(lt){case"focusin":return Lc=Tc(Lc,ft,lt,dt,vt,Tt),!0;case"dragenter":return Mc=Tc(Mc,ft,lt,dt,vt,Tt),!0;case"mouseover":return Nc=Tc(Nc,ft,lt,dt,vt,Tt),!0;case"pointerover":var Et=Tt.pointerId;return Oc.set(Et,Tc(Oc.get(Et)||null,ft,lt,dt,vt,Tt)),!0;case"gotpointercapture":return Et=Tt.pointerId,Pc.set(Et,Tc(Pc.get(Et)||null,ft,lt,dt,vt,Tt)),!0}return!1}function Vc(ft){var lt=Wc(ft.target);if(lt!==null){var dt=Vb(lt);if(dt!==null){if(lt=dt.tag,lt===13){if(lt=Wb(dt),lt!==null){ft.blockedOn=lt,Ic(ft.priority,function(){Gc(dt)});return}}else if(lt===3&&dt.stateNode.current.memoizedState.isDehydrated){ft.blockedOn=dt.tag===3?dt.stateNode.containerInfo:null;return}}}ft.blockedOn=null}function Xc(ft){if(ft.blockedOn!==null)return!1;for(var lt=ft.targetContainers;0<lt.length;){var dt=Yc(ft.domEventName,ft.eventSystemFlags,lt[0],ft.nativeEvent);if(dt===null){dt=ft.nativeEvent;var vt=new dt.constructor(dt.type,dt);wb=vt,dt.target.dispatchEvent(vt),wb=null}else return lt=Cb(dt),lt!==null&&Fc(lt),ft.blockedOn=dt,!1;lt.shift()}return!0}function Zc(ft,lt,dt){Xc(ft)&&dt.delete(lt)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(ft,lt){ft.blockedOn===lt&&(ft.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(ft){function lt(Tt){return ad(Tt,ft)}if(0<Kc.length){ad(Kc[0],ft);for(var dt=1;dt<Kc.length;dt++){var vt=Kc[dt];vt.blockedOn===ft&&(vt.blockedOn=null)}}for(Lc!==null&&ad(Lc,ft),Mc!==null&&ad(Mc,ft),Nc!==null&&ad(Nc,ft),Oc.forEach(lt),Pc.forEach(lt),dt=0;dt<Qc.length;dt++)vt=Qc[dt],vt.blockedOn===ft&&(vt.blockedOn=null);for(;0<Qc.length&&(dt=Qc[0],dt.blockedOn===null);)Vc(dt),dt.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(ft,lt,dt,vt){var Tt=C$4,Et=cd.transition;cd.transition=null;try{C$4=1,fd(ft,lt,dt,vt)}finally{C$4=Tt,cd.transition=Et}}function gd(ft,lt,dt,vt){var Tt=C$4,Et=cd.transition;cd.transition=null;try{C$4=4,fd(ft,lt,dt,vt)}finally{C$4=Tt,cd.transition=Et}}function fd(ft,lt,dt,vt){if(dd){var Tt=Yc(ft,lt,dt,vt);if(Tt===null)hd(ft,lt,vt,id$2,dt),Sc(ft,vt);else if(Uc(Tt,ft,lt,dt,vt))vt.stopPropagation();else if(Sc(ft,vt),lt&4&&-1<Rc.indexOf(ft)){for(;Tt!==null;){var Et=Cb(Tt);if(Et!==null&&Ec(Et),Et=Yc(ft,lt,dt,vt),Et===null&&hd(ft,lt,vt,id$2,dt),Et===Tt)break;Tt=Et}Tt!==null&&vt.stopPropagation()}else hd(ft,lt,vt,null,dt)}}var id$2=null;function Yc(ft,lt,dt,vt){if(id$2=null,ft=xb(vt),ft=Wc(ft),ft!==null)if(lt=Vb(ft),lt===null)ft=null;else if(dt=lt.tag,dt===13){if(ft=Wb(lt),ft!==null)return ft;ft=null}else if(dt===3){if(lt.stateNode.current.memoizedState.isDehydrated)return lt.tag===3?lt.stateNode.containerInfo:null;ft=null}else lt!==ft&&(ft=null);return id$2=ft,null}function jd(ft){switch(ft){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var ft,lt=ld,dt=lt.length,vt,Tt="value"in kd?kd.value:kd.textContent,Et=Tt.length;for(ft=0;ft<dt&&lt[ft]===Tt[ft];ft++);var Ct=dt-ft;for(vt=1;vt<=Ct&&lt[dt-vt]===Tt[Et-vt];vt++);return md=Tt.slice(ft,1<vt?1-vt:void 0)}function od(ft){var lt=ft.keyCode;return"charCode"in ft?(ft=ft.charCode,ft===0&&lt===13&&(ft=13)):ft=lt,ft===10&&(ft=13),32<=ft||ft===13?ft:0}function pd(){return!0}function qd(){return!1}function rd(ft){function lt(dt,vt,Tt,Et,Ct){this._reactName=dt,this._targetInst=Tt,this.type=vt,this.nativeEvent=Et,this.target=Ct,this.currentTarget=null;for(var Rt in ft)ft.hasOwnProperty(Rt)&&(dt=ft[Rt],this[Rt]=dt?dt(Et):Et[Rt]);return this.isDefaultPrevented=(Et.defaultPrevented!=null?Et.defaultPrevented:Et.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$4(lt.prototype,{preventDefault:function(){this.defaultPrevented=!0;var dt=this.nativeEvent;dt&&(dt.preventDefault?dt.preventDefault():typeof dt.returnValue!="unknown"&&(dt.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var dt=this.nativeEvent;dt&&(dt.stopPropagation?dt.stopPropagation():typeof dt.cancelBubble!="unknown"&&(dt.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),lt}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(ft){return ft.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$4({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$4({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(ft){return ft.relatedTarget===void 0?ft.fromElement===ft.srcElement?ft.toElement:ft.fromElement:ft.relatedTarget},movementX:function(ft){return"movementX"in ft?ft.movementX:(ft!==yd&&(yd&&ft.type==="mousemove"?(wd=ft.screenX-yd.screenX,xd=ft.screenY-yd.screenY):xd=wd=0,yd=ft),wd)},movementY:function(ft){return"movementY"in ft?ft.movementY:xd}}),Bd=rd(Ad),Cd=A$4({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$4({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$4({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$4({},sd,{clipboardData:function(ft){return"clipboardData"in ft?ft.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$4({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(ft){var lt=this.nativeEvent;return lt.getModifierState?lt.getModifierState(ft):(ft=Od[ft])?!!lt[ft]:!1}function zd(){return Pd}var Qd=A$4({},ud,{key:function(ft){if(ft.key){var lt=Md[ft.key]||ft.key;if(lt!=="Unidentified")return lt}return ft.type==="keypress"?(ft=od(ft),ft===13?"Enter":String.fromCharCode(ft)):ft.type==="keydown"||ft.type==="keyup"?Nd[ft.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(ft){return ft.type==="keypress"?od(ft):0},keyCode:function(ft){return ft.type==="keydown"||ft.type==="keyup"?ft.keyCode:0},which:function(ft){return ft.type==="keypress"?od(ft):ft.type==="keydown"||ft.type==="keyup"?ft.keyCode:0}}),Rd=rd(Qd),Sd=A$4({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$4({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$4({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$4({},Ad,{deltaX:function(ft){return"deltaX"in ft?ft.deltaX:"wheelDeltaX"in ft?-ft.wheelDeltaX:0},deltaY:function(ft){return"deltaY"in ft?ft.deltaY:"wheelDeltaY"in ft?-ft.wheelDeltaY:"wheelDelta"in ft?-ft.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$2=ia&&"CompositionEvent"in window,be$2=null;ia&&"documentMode"in document&&(be$2=document.documentMode);var ce$1=ia&&"TextEvent"in window&&!be$2,de$2=ia&&(!ae$2||be$2&&8<be$2&&11>=be$2),ee$1=String.fromCharCode(32),fe$2=!1;function ge$1(ft,lt){switch(ft){case"keyup":return $d.indexOf(lt.keyCode)!==-1;case"keydown":return lt.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$2(ft){return ft=ft.detail,typeof ft=="object"&&"data"in ft?ft.data:null}var ie$3=!1;function je$1(ft,lt){switch(ft){case"compositionend":return he$2(lt);case"keypress":return lt.which!==32?null:(fe$2=!0,ee$1);case"textInput":return ft=lt.data,ft===ee$1&&fe$2?null:ft;default:return null}}function ke$1(ft,lt){if(ie$3)return ft==="compositionend"||!ae$2&&ge$1(ft,lt)?(ft=nd(),md=ld=kd=null,ie$3=!1,ft):null;switch(ft){case"paste":return null;case"keypress":if(!(lt.ctrlKey||lt.altKey||lt.metaKey)||lt.ctrlKey&&lt.altKey){if(lt.char&&1<lt.char.length)return lt.char;if(lt.which)return String.fromCharCode(lt.which)}return null;case"compositionend":return de$2&&lt.locale!=="ko"?null:lt.data;default:return null}}var le$2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$2(ft){var lt=ft&&ft.nodeName&&ft.nodeName.toLowerCase();return lt==="input"?!!le$2[ft.type]:lt==="textarea"}function ne$3(ft,lt,dt,vt){Eb(vt),lt=oe$2(lt,"onChange"),0<lt.length&&(dt=new td("onChange","change",null,dt,vt),ft.push({event:dt,listeners:lt}))}var pe$1=null,qe$2=null;function re$1(ft){se$2(ft,0)}function te$2(ft){var lt=ue$2(ft);if(Wa(lt))return ft}function ve$1(ft,lt){if(ft==="change")return lt}var we$2=!1;if(ia){var xe$2;if(ia){var ye$2="oninput"in document;if(!ye$2){var ze$2=document.createElement("div");ze$2.setAttribute("oninput","return;"),ye$2=typeof ze$2.oninput=="function"}xe$2=ye$2}else xe$2=!1;we$2=xe$2&&(!document.documentMode||9<document.documentMode)}function Ae$1(){pe$1&&(pe$1.detachEvent("onpropertychange",Be$1),qe$2=pe$1=null)}function Be$1(ft){if(ft.propertyName==="value"&&te$2(qe$2)){var lt=[];ne$3(lt,qe$2,ft,xb(ft)),Jb(re$1,lt)}}function Ce$2(ft,lt,dt){ft==="focusin"?(Ae$1(),pe$1=lt,qe$2=dt,pe$1.attachEvent("onpropertychange",Be$1)):ft==="focusout"&&Ae$1()}function De$2(ft){if(ft==="selectionchange"||ft==="keyup"||ft==="keydown")return te$2(qe$2)}function Ee$2(ft,lt){if(ft==="click")return te$2(lt)}function Fe(ft,lt){if(ft==="input"||ft==="change")return te$2(lt)}function Ge$2(ft,lt){return ft===lt&&(ft!==0||1/ft===1/lt)||ft!==ft&&lt!==lt}var He$2=typeof Object.is=="function"?Object.is:Ge$2;function Ie$1(ft,lt){if(He$2(ft,lt))return!0;if(typeof ft!="object"||ft===null||typeof lt!="object"||lt===null)return!1;var dt=Object.keys(ft),vt=Object.keys(lt);if(dt.length!==vt.length)return!1;for(vt=0;vt<dt.length;vt++){var Tt=dt[vt];if(!ja.call(lt,Tt)||!He$2(ft[Tt],lt[Tt]))return!1}return!0}function Je(ft){for(;ft&&ft.firstChild;)ft=ft.firstChild;return ft}function Ke$2(ft,lt){var dt=Je(ft);ft=0;for(var vt;dt;){if(dt.nodeType===3){if(vt=ft+dt.textContent.length,ft<=lt&&vt>=lt)return{node:dt,offset:lt-ft};ft=vt}e:{for(;dt;){if(dt.nextSibling){dt=dt.nextSibling;break e}dt=dt.parentNode}dt=void 0}dt=Je(dt)}}function Le$3(ft,lt){return ft&&lt?ft===lt?!0:ft&&ft.nodeType===3?!1:lt&&lt.nodeType===3?Le$3(ft,lt.parentNode):"contains"in ft?ft.contains(lt):ft.compareDocumentPosition?!!(ft.compareDocumentPosition(lt)&16):!1:!1}function Me$1(){for(var ft=window,lt=Xa();lt instanceof ft.HTMLIFrameElement;){try{var dt=typeof lt.contentWindow.location.href=="string"}catch{dt=!1}if(dt)ft=lt.contentWindow;else break;lt=Xa(ft.document)}return lt}function Ne$2(ft){var lt=ft&&ft.nodeName&&ft.nodeName.toLowerCase();return lt&&(lt==="input"&&(ft.type==="text"||ft.type==="search"||ft.type==="tel"||ft.type==="url"||ft.type==="password")||lt==="textarea"||ft.contentEditable==="true")}function Oe$1(ft){var lt=Me$1(),dt=ft.focusedElem,vt=ft.selectionRange;if(lt!==dt&&dt&&dt.ownerDocument&&Le$3(dt.ownerDocument.documentElement,dt)){if(vt!==null&&Ne$2(dt)){if(lt=vt.start,ft=vt.end,ft===void 0&&(ft=lt),"selectionStart"in dt)dt.selectionStart=lt,dt.selectionEnd=Math.min(ft,dt.value.length);else if(ft=(lt=dt.ownerDocument||document)&&lt.defaultView||window,ft.getSelection){ft=ft.getSelection();var Tt=dt.textContent.length,Et=Math.min(vt.start,Tt);vt=vt.end===void 0?Et:Math.min(vt.end,Tt),!ft.extend&&Et>vt&&(Tt=vt,vt=Et,Et=Tt),Tt=Ke$2(dt,Et);var Ct=Ke$2(dt,vt);Tt&&Ct&&(ft.rangeCount!==1||ft.anchorNode!==Tt.node||ft.anchorOffset!==Tt.offset||ft.focusNode!==Ct.node||ft.focusOffset!==Ct.offset)&&(lt=lt.createRange(),lt.setStart(Tt.node,Tt.offset),ft.removeAllRanges(),Et>vt?(ft.addRange(lt),ft.extend(Ct.node,Ct.offset)):(lt.setEnd(Ct.node,Ct.offset),ft.addRange(lt)))}}for(lt=[],ft=dt;ft=ft.parentNode;)ft.nodeType===1&&lt.push({element:ft,left:ft.scrollLeft,top:ft.scrollTop});for(typeof dt.focus=="function"&&dt.focus(),dt=0;dt<lt.length;dt++)ft=lt[dt],ft.element.scrollLeft=ft.left,ft.element.scrollTop=ft.top}}var Pe$2=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re$1=null,Se=null,Te$1=!1;function Ue$2(ft,lt,dt){var vt=dt.window===dt?dt.document:dt.nodeType===9?dt:dt.ownerDocument;Te$1||Qe==null||Qe!==Xa(vt)||(vt=Qe,"selectionStart"in vt&&Ne$2(vt)?vt={start:vt.selectionStart,end:vt.selectionEnd}:(vt=(vt.ownerDocument&&vt.ownerDocument.defaultView||window).getSelection(),vt={anchorNode:vt.anchorNode,anchorOffset:vt.anchorOffset,focusNode:vt.focusNode,focusOffset:vt.focusOffset}),Se&&Ie$1(Se,vt)||(Se=vt,vt=oe$2(Re$1,"onSelect"),0<vt.length&&(lt=new td("onSelect","select",null,lt,dt),ft.push({event:lt,listeners:vt}),lt.target=Qe)))}function Ve$1(ft,lt){var dt={};return dt[ft.toLowerCase()]=lt.toLowerCase(),dt["Webkit"+ft]="webkit"+lt,dt["Moz"+ft]="moz"+lt,dt}var We$1={animationend:Ve$1("Animation","AnimationEnd"),animationiteration:Ve$1("Animation","AnimationIteration"),animationstart:Ve$1("Animation","AnimationStart"),transitionend:Ve$1("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We$1.animationend.animation,delete We$1.animationiteration.animation,delete We$1.animationstart.animation),"TransitionEvent"in window||delete We$1.transitionend.transition);function Ze(ft){if(Xe[ft])return Xe[ft];if(!We$1[ft])return ft;var lt=We$1[ft],dt;for(dt in lt)if(lt.hasOwnProperty(dt)&&dt in Ye)return Xe[ft]=lt[dt];return ft}var $e$1=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(ft,lt){df.set(ft,lt),fa(lt,[ft])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e$1,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(ft,lt,dt){var vt=ft.type||"unknown-event";ft.currentTarget=dt,Ub(vt,lt,void 0,ft),ft.currentTarget=null}function se$2(ft,lt){lt=(lt&4)!==0;for(var dt=0;dt<ft.length;dt++){var vt=ft[dt],Tt=vt.event;vt=vt.listeners;e:{var Et=void 0;if(lt)for(var Ct=vt.length-1;0<=Ct;Ct--){var Rt=vt[Ct],kt=Rt.instance,Dt=Rt.currentTarget;if(Rt=Rt.listener,kt!==Et&&Tt.isPropagationStopped())break e;nf(Tt,Rt,Dt),Et=kt}else for(Ct=0;Ct<vt.length;Ct++){if(Rt=vt[Ct],kt=Rt.instance,Dt=Rt.currentTarget,Rt=Rt.listener,kt!==Et&&Tt.isPropagationStopped())break e;nf(Tt,Rt,Dt),Et=kt}}}if(Qb)throw ft=Rb,Qb=!1,Rb=null,ft}function D$6(ft,lt){var dt=lt[of];dt===void 0&&(dt=lt[of]=new Set);var vt=ft+"__bubble";dt.has(vt)||(pf(lt,ft,2,!1),dt.add(vt))}function qf(ft,lt,dt){var vt=0;lt&&(vt|=4),pf(dt,ft,vt,lt)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(ft){if(!ft[rf]){ft[rf]=!0,da.forEach(function(dt){dt!=="selectionchange"&&(mf.has(dt)||qf(dt,!1,ft),qf(dt,!0,ft))});var lt=ft.nodeType===9?ft:ft.ownerDocument;lt===null||lt[rf]||(lt[rf]=!0,qf("selectionchange",!1,lt))}}function pf(ft,lt,dt,vt){switch(jd(lt)){case 1:var Tt=ed;break;case 4:Tt=gd;break;default:Tt=fd}dt=Tt.bind(null,lt,dt,ft),Tt=void 0,!Lb||lt!=="touchstart"&&lt!=="touchmove"&&lt!=="wheel"||(Tt=!0),vt?Tt!==void 0?ft.addEventListener(lt,dt,{capture:!0,passive:Tt}):ft.addEventListener(lt,dt,!0):Tt!==void 0?ft.addEventListener(lt,dt,{passive:Tt}):ft.addEventListener(lt,dt,!1)}function hd(ft,lt,dt,vt,Tt){var Et=vt;if(!(lt&1)&&!(lt&2)&&vt!==null)e:for(;;){if(vt===null)return;var Ct=vt.tag;if(Ct===3||Ct===4){var Rt=vt.stateNode.containerInfo;if(Rt===Tt||Rt.nodeType===8&&Rt.parentNode===Tt)break;if(Ct===4)for(Ct=vt.return;Ct!==null;){var kt=Ct.tag;if((kt===3||kt===4)&&(kt=Ct.stateNode.containerInfo,kt===Tt||kt.nodeType===8&&kt.parentNode===Tt))return;Ct=Ct.return}for(;Rt!==null;){if(Ct=Wc(Rt),Ct===null)return;if(kt=Ct.tag,kt===5||kt===6){vt=Et=Ct;continue e}Rt=Rt.parentNode}}vt=vt.return}Jb(function(){var Dt=Et,Bt=xb(dt),Ft=[];e:{var Ut=df.get(ft);if(Ut!==void 0){var Zt=td,Kt=ft;switch(ft){case"keypress":if(od(dt)===0)break e;case"keydown":case"keyup":Zt=Rd;break;case"focusin":Kt="focus",Zt=Fd;break;case"focusout":Kt="blur",Zt=Fd;break;case"beforeblur":case"afterblur":Zt=Fd;break;case"click":if(dt.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Zt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Zt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Zt=Vd;break;case $e$1:case af:case bf:Zt=Hd;break;case cf:Zt=Xd;break;case"scroll":Zt=vd;break;case"wheel":Zt=Zd;break;case"copy":case"cut":case"paste":Zt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Zt=Td}var ln=(lt&4)!==0,hn=!ln&&ft==="scroll",dn=ln?Ut!==null?Ut+"Capture":null:Ut;ln=[];for(var pn=Dt,mn;pn!==null;){mn=pn;var On=mn.stateNode;if(mn.tag===5&&On!==null&&(mn=On,dn!==null&&(On=Kb(pn,dn),On!=null&&ln.push(tf(pn,On,mn)))),hn)break;pn=pn.return}0<ln.length&&(Ut=new Zt(Ut,Kt,null,dt,Bt),Ft.push({event:Ut,listeners:ln}))}}if(!(lt&7)){e:{if(Ut=ft==="mouseover"||ft==="pointerover",Zt=ft==="mouseout"||ft==="pointerout",Ut&&dt!==wb&&(Kt=dt.relatedTarget||dt.fromElement)&&(Wc(Kt)||Kt[uf]))break e;if((Zt||Ut)&&(Ut=Bt.window===Bt?Bt:(Ut=Bt.ownerDocument)?Ut.defaultView||Ut.parentWindow:window,Zt?(Kt=dt.relatedTarget||dt.toElement,Zt=Dt,Kt=Kt?Wc(Kt):null,Kt!==null&&(hn=Vb(Kt),Kt!==hn||Kt.tag!==5&&Kt.tag!==6)&&(Kt=null)):(Zt=null,Kt=Dt),Zt!==Kt)){if(ln=Bd,On="onMouseLeave",dn="onMouseEnter",pn="mouse",(ft==="pointerout"||ft==="pointerover")&&(ln=Td,On="onPointerLeave",dn="onPointerEnter",pn="pointer"),hn=Zt==null?Ut:ue$2(Zt),mn=Kt==null?Ut:ue$2(Kt),Ut=new ln(On,pn+"leave",Zt,dt,Bt),Ut.target=hn,Ut.relatedTarget=mn,On=null,Wc(Bt)===Dt&&(ln=new ln(dn,pn+"enter",Kt,dt,Bt),ln.target=mn,ln.relatedTarget=hn,On=ln),hn=On,Zt&&Kt)t:{for(ln=Zt,dn=Kt,pn=0,mn=ln;mn;mn=vf(mn))pn++;for(mn=0,On=dn;On;On=vf(On))mn++;for(;0<pn-mn;)ln=vf(ln),pn--;for(;0<mn-pn;)dn=vf(dn),mn--;for(;pn--;){if(ln===dn||dn!==null&&ln===dn.alternate)break t;ln=vf(ln),dn=vf(dn)}ln=null}else ln=null;Zt!==null&&wf(Ft,Ut,Zt,ln,!1),Kt!==null&&hn!==null&&wf(Ft,hn,Kt,ln,!0)}}e:{if(Ut=Dt?ue$2(Dt):window,Zt=Ut.nodeName&&Ut.nodeName.toLowerCase(),Zt==="select"||Zt==="input"&&Ut.type==="file")var bn=ve$1;else if(me$2(Ut))if(we$2)bn=Fe;else{bn=De$2;var En=Ce$2}else(Zt=Ut.nodeName)&&Zt.toLowerCase()==="input"&&(Ut.type==="checkbox"||Ut.type==="radio")&&(bn=Ee$2);if(bn&&(bn=bn(ft,Dt))){ne$3(Ft,bn,dt,Bt);break e}En&&En(ft,Ut,Dt),ft==="focusout"&&(En=Ut._wrapperState)&&En.controlled&&Ut.type==="number"&&cb(Ut,"number",Ut.value)}switch(En=Dt?ue$2(Dt):window,ft){case"focusin":(me$2(En)||En.contentEditable==="true")&&(Qe=En,Re$1=Dt,Se=null);break;case"focusout":Se=Re$1=Qe=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue$2(Ft,dt,Bt);break;case"selectionchange":if(Pe$2)break;case"keydown":case"keyup":Ue$2(Ft,dt,Bt)}var An;if(ae$2)e:{switch(ft){case"compositionstart":var Tn="onCompositionStart";break e;case"compositionend":Tn="onCompositionEnd";break e;case"compositionupdate":Tn="onCompositionUpdate";break e}Tn=void 0}else ie$3?ge$1(ft,dt)&&(Tn="onCompositionEnd"):ft==="keydown"&&dt.keyCode===229&&(Tn="onCompositionStart");Tn&&(de$2&&dt.locale!=="ko"&&(ie$3||Tn!=="onCompositionStart"?Tn==="onCompositionEnd"&&ie$3&&(An=nd()):(kd=Bt,ld="value"in kd?kd.value:kd.textContent,ie$3=!0)),En=oe$2(Dt,Tn),0<En.length&&(Tn=new Ld(Tn,ft,null,dt,Bt),Ft.push({event:Tn,listeners:En}),An?Tn.data=An:(An=he$2(dt),An!==null&&(Tn.data=An)))),(An=ce$1?je$1(ft,dt):ke$1(ft,dt))&&(Dt=oe$2(Dt,"onBeforeInput"),0<Dt.length&&(Bt=new Ld("onBeforeInput","beforeinput",null,dt,Bt),Ft.push({event:Bt,listeners:Dt}),Bt.data=An))}se$2(Ft,lt)})}function tf(ft,lt,dt){return{instance:ft,listener:lt,currentTarget:dt}}function oe$2(ft,lt){for(var dt=lt+"Capture",vt=[];ft!==null;){var Tt=ft,Et=Tt.stateNode;Tt.tag===5&&Et!==null&&(Tt=Et,Et=Kb(ft,dt),Et!=null&&vt.unshift(tf(ft,Et,Tt)),Et=Kb(ft,lt),Et!=null&&vt.push(tf(ft,Et,Tt))),ft=ft.return}return vt}function vf(ft){if(ft===null)return null;do ft=ft.return;while(ft&&ft.tag!==5);return ft||null}function wf(ft,lt,dt,vt,Tt){for(var Et=lt._reactName,Ct=[];dt!==null&&dt!==vt;){var Rt=dt,kt=Rt.alternate,Dt=Rt.stateNode;if(kt!==null&&kt===vt)break;Rt.tag===5&&Dt!==null&&(Rt=Dt,Tt?(kt=Kb(dt,Et),kt!=null&&Ct.unshift(tf(dt,kt,Rt))):Tt||(kt=Kb(dt,Et),kt!=null&&Ct.push(tf(dt,kt,Rt)))),dt=dt.return}Ct.length!==0&&ft.push({event:lt,listeners:Ct})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(ft){return(typeof ft=="string"?ft:""+ft).replace(xf,`
`).replace(yf,"")}function Af(ft,lt,dt){if(lt=zf(lt),zf(ft)!==lt&&dt)throw Error(p$8(425))}function Bf(){}var Cf=null,Df=null;function Ef(ft,lt){return ft==="textarea"||ft==="noscript"||typeof lt.children=="string"||typeof lt.children=="number"||typeof lt.dangerouslySetInnerHTML=="object"&&lt.dangerouslySetInnerHTML!==null&&lt.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(ft){return Hf.resolve(null).then(ft).catch(If)}:Ff;function If(ft){setTimeout(function(){throw ft})}function Kf(ft,lt){var dt=lt,vt=0;do{var Tt=dt.nextSibling;if(ft.removeChild(dt),Tt&&Tt.nodeType===8)if(dt=Tt.data,dt==="/$"){if(vt===0){ft.removeChild(Tt),bd(lt);return}vt--}else dt!=="$"&&dt!=="$?"&&dt!=="$!"||vt++;dt=Tt}while(dt);bd(lt)}function Lf(ft){for(;ft!=null;ft=ft.nextSibling){var lt=ft.nodeType;if(lt===1||lt===3)break;if(lt===8){if(lt=ft.data,lt==="$"||lt==="$!"||lt==="$?")break;if(lt==="/$")return null}}return ft}function Mf(ft){ft=ft.previousSibling;for(var lt=0;ft;){if(ft.nodeType===8){var dt=ft.data;if(dt==="$"||dt==="$!"||dt==="$?"){if(lt===0)return ft;lt--}else dt==="/$"&&lt++}ft=ft.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(ft){var lt=ft[Of];if(lt)return lt;for(var dt=ft.parentNode;dt;){if(lt=dt[uf]||dt[Of]){if(dt=lt.alternate,lt.child!==null||dt!==null&&dt.child!==null)for(ft=Mf(ft);ft!==null;){if(dt=ft[Of])return dt;ft=Mf(ft)}return lt}ft=dt,dt=ft.parentNode}return null}function Cb(ft){return ft=ft[Of]||ft[uf],!ft||ft.tag!==5&&ft.tag!==6&&ft.tag!==13&&ft.tag!==3?null:ft}function ue$2(ft){if(ft.tag===5||ft.tag===6)return ft.stateNode;throw Error(p$8(33))}function Db(ft){return ft[Pf]||null}var Sf=[],Tf=-1;function Uf(ft){return{current:ft}}function E$6(ft){0>Tf||(ft.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$1(ft,lt){Tf++,Sf[Tf]=ft.current,ft.current=lt}var Vf={},H$5=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(ft,lt){var dt=ft.type.contextTypes;if(!dt)return Vf;var vt=ft.stateNode;if(vt&&vt.__reactInternalMemoizedUnmaskedChildContext===lt)return vt.__reactInternalMemoizedMaskedChildContext;var Tt={},Et;for(Et in dt)Tt[Et]=lt[Et];return vt&&(ft=ft.stateNode,ft.__reactInternalMemoizedUnmaskedChildContext=lt,ft.__reactInternalMemoizedMaskedChildContext=Tt),Tt}function Zf(ft){return ft=ft.childContextTypes,ft!=null}function $f(){E$6(Wf),E$6(H$5)}function ag(ft,lt,dt){if(H$5.current!==Vf)throw Error(p$8(168));G$1(H$5,lt),G$1(Wf,dt)}function bg(ft,lt,dt){var vt=ft.stateNode;if(lt=lt.childContextTypes,typeof vt.getChildContext!="function")return dt;vt=vt.getChildContext();for(var Tt in vt)if(!(Tt in lt))throw Error(p$8(108,Ra(ft)||"Unknown",Tt));return A$4({},dt,vt)}function cg(ft){return ft=(ft=ft.stateNode)&&ft.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$5.current,G$1(H$5,ft),G$1(Wf,Wf.current),!0}function dg(ft,lt,dt){var vt=ft.stateNode;if(!vt)throw Error(p$8(169));dt?(ft=bg(ft,lt,Xf),vt.__reactInternalMemoizedMergedChildContext=ft,E$6(Wf),E$6(H$5),G$1(H$5,ft)):E$6(Wf),G$1(Wf,dt)}var eg=null,fg=!1,gg=!1;function hg(ft){eg===null?eg=[ft]:eg.push(ft)}function ig(ft){fg=!0,hg(ft)}function jg(){if(!gg&&eg!==null){gg=!0;var ft=0,lt=C$4;try{var dt=eg;for(C$4=1;ft<dt.length;ft++){var vt=dt[ft];do vt=vt(!0);while(vt!==null)}eg=null,fg=!1}catch(Tt){throw eg!==null&&(eg=eg.slice(ft+1)),ac(fc,jg),Tt}finally{C$4=lt,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(ft,lt){kg[lg++]=ng,kg[lg++]=mg,mg=ft,ng=lt}function ug(ft,lt,dt){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=ft;var vt=rg;ft=sg;var Tt=32-oc(vt)-1;vt&=~(1<<Tt),dt+=1;var Et=32-oc(lt)+Tt;if(30<Et){var Ct=Tt-Tt%5;Et=(vt&(1<<Ct)-1).toString(32),vt>>=Ct,Tt-=Ct,rg=1<<32-oc(lt)+Tt|dt<<Tt|vt,sg=Et+ft}else rg=1<<Et|dt<<Tt|vt,sg=ft}function vg(ft){ft.return!==null&&(tg(ft,1),ug(ft,1,0))}function wg(ft){for(;ft===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;ft===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$4=!1,zg=null;function Ag(ft,lt){var dt=Bg(5,null,null,0);dt.elementType="DELETED",dt.stateNode=lt,dt.return=ft,lt=ft.deletions,lt===null?(ft.deletions=[dt],ft.flags|=16):lt.push(dt)}function Cg(ft,lt){switch(ft.tag){case 5:var dt=ft.type;return lt=lt.nodeType!==1||dt.toLowerCase()!==lt.nodeName.toLowerCase()?null:lt,lt!==null?(ft.stateNode=lt,xg=ft,yg=Lf(lt.firstChild),!0):!1;case 6:return lt=ft.pendingProps===""||lt.nodeType!==3?null:lt,lt!==null?(ft.stateNode=lt,xg=ft,yg=null,!0):!1;case 13:return lt=lt.nodeType!==8?null:lt,lt!==null?(dt=qg!==null?{id:rg,overflow:sg}:null,ft.memoizedState={dehydrated:lt,treeContext:dt,retryLane:1073741824},dt=Bg(18,null,null,0),dt.stateNode=lt,dt.return=ft,ft.child=dt,xg=ft,yg=null,!0):!1;default:return!1}}function Dg(ft){return(ft.mode&1)!==0&&(ft.flags&128)===0}function Eg(ft){if(I$4){var lt=yg;if(lt){var dt=lt;if(!Cg(ft,lt)){if(Dg(ft))throw Error(p$8(418));lt=Lf(dt.nextSibling);var vt=xg;lt&&Cg(ft,lt)?Ag(vt,dt):(ft.flags=ft.flags&-4097|2,I$4=!1,xg=ft)}}else{if(Dg(ft))throw Error(p$8(418));ft.flags=ft.flags&-4097|2,I$4=!1,xg=ft}}}function Fg(ft){for(ft=ft.return;ft!==null&&ft.tag!==5&&ft.tag!==3&&ft.tag!==13;)ft=ft.return;xg=ft}function Gg(ft){if(ft!==xg)return!1;if(!I$4)return Fg(ft),I$4=!0,!1;var lt;if((lt=ft.tag!==3)&&!(lt=ft.tag!==5)&&(lt=ft.type,lt=lt!=="head"&&lt!=="body"&&!Ef(ft.type,ft.memoizedProps)),lt&&(lt=yg)){if(Dg(ft))throw Hg(),Error(p$8(418));for(;lt;)Ag(ft,lt),lt=Lf(lt.nextSibling)}if(Fg(ft),ft.tag===13){if(ft=ft.memoizedState,ft=ft!==null?ft.dehydrated:null,!ft)throw Error(p$8(317));e:{for(ft=ft.nextSibling,lt=0;ft;){if(ft.nodeType===8){var dt=ft.data;if(dt==="/$"){if(lt===0){yg=Lf(ft.nextSibling);break e}lt--}else dt!=="$"&&dt!=="$!"&&dt!=="$?"||lt++}ft=ft.nextSibling}yg=null}}else yg=xg?Lf(ft.stateNode.nextSibling):null;return!0}function Hg(){for(var ft=yg;ft;)ft=Lf(ft.nextSibling)}function Ig(){yg=xg=null,I$4=!1}function Jg(ft){zg===null?zg=[ft]:zg.push(ft)}var Kg=ua.ReactCurrentBatchConfig;function Lg(ft,lt){if(ft&&ft.defaultProps){lt=A$4({},lt),ft=ft.defaultProps;for(var dt in ft)lt[dt]===void 0&&(lt[dt]=ft[dt]);return lt}return lt}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(ft){var lt=Mg.current;E$6(Mg),ft._currentValue=lt}function Sg(ft,lt,dt){for(;ft!==null;){var vt=ft.alternate;if((ft.childLanes&lt)!==lt?(ft.childLanes|=lt,vt!==null&&(vt.childLanes|=lt)):vt!==null&&(vt.childLanes&lt)!==lt&&(vt.childLanes|=lt),ft===dt)break;ft=ft.return}}function Tg(ft,lt){Ng=ft,Pg=Og=null,ft=ft.dependencies,ft!==null&&ft.firstContext!==null&&(ft.lanes&lt&&(Ug=!0),ft.firstContext=null)}function Vg(ft){var lt=ft._currentValue;if(Pg!==ft)if(ft={context:ft,memoizedValue:lt,next:null},Og===null){if(Ng===null)throw Error(p$8(308));Og=ft,Ng.dependencies={lanes:0,firstContext:ft}}else Og=Og.next=ft;return lt}var Wg=null;function Xg(ft){Wg===null?Wg=[ft]:Wg.push(ft)}function Yg(ft,lt,dt,vt){var Tt=lt.interleaved;return Tt===null?(dt.next=dt,Xg(lt)):(dt.next=Tt.next,Tt.next=dt),lt.interleaved=dt,Zg(ft,vt)}function Zg(ft,lt){ft.lanes|=lt;var dt=ft.alternate;for(dt!==null&&(dt.lanes|=lt),dt=ft,ft=ft.return;ft!==null;)ft.childLanes|=lt,dt=ft.alternate,dt!==null&&(dt.childLanes|=lt),dt=ft,ft=ft.return;return dt.tag===3?dt.stateNode:null}var $g=!1;function ah(ft){ft.updateQueue={baseState:ft.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(ft,lt){ft=ft.updateQueue,lt.updateQueue===ft&&(lt.updateQueue={baseState:ft.baseState,firstBaseUpdate:ft.firstBaseUpdate,lastBaseUpdate:ft.lastBaseUpdate,shared:ft.shared,effects:ft.effects})}function ch(ft,lt){return{eventTime:ft,lane:lt,tag:0,payload:null,callback:null,next:null}}function dh(ft,lt,dt){var vt=ft.updateQueue;if(vt===null)return null;if(vt=vt.shared,K$1&2){var Tt=vt.pending;return Tt===null?lt.next=lt:(lt.next=Tt.next,Tt.next=lt),vt.pending=lt,Zg(ft,dt)}return Tt=vt.interleaved,Tt===null?(lt.next=lt,Xg(vt)):(lt.next=Tt.next,Tt.next=lt),vt.interleaved=lt,Zg(ft,dt)}function eh(ft,lt,dt){if(lt=lt.updateQueue,lt!==null&&(lt=lt.shared,(dt&4194240)!==0)){var vt=lt.lanes;vt&=ft.pendingLanes,dt|=vt,lt.lanes=dt,Cc(ft,dt)}}function fh(ft,lt){var dt=ft.updateQueue,vt=ft.alternate;if(vt!==null&&(vt=vt.updateQueue,dt===vt)){var Tt=null,Et=null;if(dt=dt.firstBaseUpdate,dt!==null){do{var Ct={eventTime:dt.eventTime,lane:dt.lane,tag:dt.tag,payload:dt.payload,callback:dt.callback,next:null};Et===null?Tt=Et=Ct:Et=Et.next=Ct,dt=dt.next}while(dt!==null);Et===null?Tt=Et=lt:Et=Et.next=lt}else Tt=Et=lt;dt={baseState:vt.baseState,firstBaseUpdate:Tt,lastBaseUpdate:Et,shared:vt.shared,effects:vt.effects},ft.updateQueue=dt;return}ft=dt.lastBaseUpdate,ft===null?dt.firstBaseUpdate=lt:ft.next=lt,dt.lastBaseUpdate=lt}function gh(ft,lt,dt,vt){var Tt=ft.updateQueue;$g=!1;var Et=Tt.firstBaseUpdate,Ct=Tt.lastBaseUpdate,Rt=Tt.shared.pending;if(Rt!==null){Tt.shared.pending=null;var kt=Rt,Dt=kt.next;kt.next=null,Ct===null?Et=Dt:Ct.next=Dt,Ct=kt;var Bt=ft.alternate;Bt!==null&&(Bt=Bt.updateQueue,Rt=Bt.lastBaseUpdate,Rt!==Ct&&(Rt===null?Bt.firstBaseUpdate=Dt:Rt.next=Dt,Bt.lastBaseUpdate=kt))}if(Et!==null){var Ft=Tt.baseState;Ct=0,Bt=Dt=kt=null,Rt=Et;do{var Ut=Rt.lane,Zt=Rt.eventTime;if((vt&Ut)===Ut){Bt!==null&&(Bt=Bt.next={eventTime:Zt,lane:0,tag:Rt.tag,payload:Rt.payload,callback:Rt.callback,next:null});e:{var Kt=ft,ln=Rt;switch(Ut=lt,Zt=dt,ln.tag){case 1:if(Kt=ln.payload,typeof Kt=="function"){Ft=Kt.call(Zt,Ft,Ut);break e}Ft=Kt;break e;case 3:Kt.flags=Kt.flags&-65537|128;case 0:if(Kt=ln.payload,Ut=typeof Kt=="function"?Kt.call(Zt,Ft,Ut):Kt,Ut==null)break e;Ft=A$4({},Ft,Ut);break e;case 2:$g=!0}}Rt.callback!==null&&Rt.lane!==0&&(ft.flags|=64,Ut=Tt.effects,Ut===null?Tt.effects=[Rt]:Ut.push(Rt))}else Zt={eventTime:Zt,lane:Ut,tag:Rt.tag,payload:Rt.payload,callback:Rt.callback,next:null},Bt===null?(Dt=Bt=Zt,kt=Ft):Bt=Bt.next=Zt,Ct|=Ut;if(Rt=Rt.next,Rt===null){if(Rt=Tt.shared.pending,Rt===null)break;Ut=Rt,Rt=Ut.next,Ut.next=null,Tt.lastBaseUpdate=Ut,Tt.shared.pending=null}}while(1);if(Bt===null&&(kt=Ft),Tt.baseState=kt,Tt.firstBaseUpdate=Dt,Tt.lastBaseUpdate=Bt,lt=Tt.shared.interleaved,lt!==null){Tt=lt;do Ct|=Tt.lane,Tt=Tt.next;while(Tt!==lt)}else Et===null&&(Tt.shared.lanes=0);hh|=Ct,ft.lanes=Ct,ft.memoizedState=Ft}}function ih(ft,lt,dt){if(ft=lt.effects,lt.effects=null,ft!==null)for(lt=0;lt<ft.length;lt++){var vt=ft[lt],Tt=vt.callback;if(Tt!==null){if(vt.callback=null,vt=dt,typeof Tt!="function")throw Error(p$8(191,Tt));Tt.call(vt)}}}var jh=new aa.Component().refs;function kh(ft,lt,dt,vt){lt=ft.memoizedState,dt=dt(vt,lt),dt=dt==null?lt:A$4({},lt,dt),ft.memoizedState=dt,ft.lanes===0&&(ft.updateQueue.baseState=dt)}var nh={isMounted:function(ft){return(ft=ft._reactInternals)?Vb(ft)===ft:!1},enqueueSetState:function(ft,lt,dt){ft=ft._reactInternals;var vt=L$3(),Tt=lh(ft),Et=ch(vt,Tt);Et.payload=lt,dt!=null&&(Et.callback=dt),lt=dh(ft,Et,Tt),lt!==null&&(mh(lt,ft,Tt,vt),eh(lt,ft,Tt))},enqueueReplaceState:function(ft,lt,dt){ft=ft._reactInternals;var vt=L$3(),Tt=lh(ft),Et=ch(vt,Tt);Et.tag=1,Et.payload=lt,dt!=null&&(Et.callback=dt),lt=dh(ft,Et,Tt),lt!==null&&(mh(lt,ft,Tt,vt),eh(lt,ft,Tt))},enqueueForceUpdate:function(ft,lt){ft=ft._reactInternals;var dt=L$3(),vt=lh(ft),Tt=ch(dt,vt);Tt.tag=2,lt!=null&&(Tt.callback=lt),lt=dh(ft,Tt,vt),lt!==null&&(mh(lt,ft,vt,dt),eh(lt,ft,vt))}};function oh(ft,lt,dt,vt,Tt,Et,Ct){return ft=ft.stateNode,typeof ft.shouldComponentUpdate=="function"?ft.shouldComponentUpdate(vt,Et,Ct):lt.prototype&&lt.prototype.isPureReactComponent?!Ie$1(dt,vt)||!Ie$1(Tt,Et):!0}function ph(ft,lt,dt){var vt=!1,Tt=Vf,Et=lt.contextType;return typeof Et=="object"&&Et!==null?Et=Vg(Et):(Tt=Zf(lt)?Xf:H$5.current,vt=lt.contextTypes,Et=(vt=vt!=null)?Yf(ft,Tt):Vf),lt=new lt(dt,Et),ft.memoizedState=lt.state!==null&&lt.state!==void 0?lt.state:null,lt.updater=nh,ft.stateNode=lt,lt._reactInternals=ft,vt&&(ft=ft.stateNode,ft.__reactInternalMemoizedUnmaskedChildContext=Tt,ft.__reactInternalMemoizedMaskedChildContext=Et),lt}function qh(ft,lt,dt,vt){ft=lt.state,typeof lt.componentWillReceiveProps=="function"&&lt.componentWillReceiveProps(dt,vt),typeof lt.UNSAFE_componentWillReceiveProps=="function"&&lt.UNSAFE_componentWillReceiveProps(dt,vt),lt.state!==ft&&nh.enqueueReplaceState(lt,lt.state,null)}function rh(ft,lt,dt,vt){var Tt=ft.stateNode;Tt.props=dt,Tt.state=ft.memoizedState,Tt.refs=jh,ah(ft);var Et=lt.contextType;typeof Et=="object"&&Et!==null?Tt.context=Vg(Et):(Et=Zf(lt)?Xf:H$5.current,Tt.context=Yf(ft,Et)),Tt.state=ft.memoizedState,Et=lt.getDerivedStateFromProps,typeof Et=="function"&&(kh(ft,lt,Et,dt),Tt.state=ft.memoizedState),typeof lt.getDerivedStateFromProps=="function"||typeof Tt.getSnapshotBeforeUpdate=="function"||typeof Tt.UNSAFE_componentWillMount!="function"&&typeof Tt.componentWillMount!="function"||(lt=Tt.state,typeof Tt.componentWillMount=="function"&&Tt.componentWillMount(),typeof Tt.UNSAFE_componentWillMount=="function"&&Tt.UNSAFE_componentWillMount(),lt!==Tt.state&&nh.enqueueReplaceState(Tt,Tt.state,null),gh(ft,dt,Tt,vt),Tt.state=ft.memoizedState),typeof Tt.componentDidMount=="function"&&(ft.flags|=4194308)}function sh(ft,lt,dt){if(ft=dt.ref,ft!==null&&typeof ft!="function"&&typeof ft!="object"){if(dt._owner){if(dt=dt._owner,dt){if(dt.tag!==1)throw Error(p$8(309));var vt=dt.stateNode}if(!vt)throw Error(p$8(147,ft));var Tt=vt,Et=""+ft;return lt!==null&&lt.ref!==null&&typeof lt.ref=="function"&&lt.ref._stringRef===Et?lt.ref:(lt=function(Ct){var Rt=Tt.refs;Rt===jh&&(Rt=Tt.refs={}),Ct===null?delete Rt[Et]:Rt[Et]=Ct},lt._stringRef=Et,lt)}if(typeof ft!="string")throw Error(p$8(284));if(!dt._owner)throw Error(p$8(290,ft))}return ft}function th(ft,lt){throw ft=Object.prototype.toString.call(lt),Error(p$8(31,ft==="[object Object]"?"object with keys {"+Object.keys(lt).join(", ")+"}":ft))}function uh(ft){var lt=ft._init;return lt(ft._payload)}function vh(ft){function lt(dn,pn){if(ft){var mn=dn.deletions;mn===null?(dn.deletions=[pn],dn.flags|=16):mn.push(pn)}}function dt(dn,pn){if(!ft)return null;for(;pn!==null;)lt(dn,pn),pn=pn.sibling;return null}function vt(dn,pn){for(dn=new Map;pn!==null;)pn.key!==null?dn.set(pn.key,pn):dn.set(pn.index,pn),pn=pn.sibling;return dn}function Tt(dn,pn){return dn=wh(dn,pn),dn.index=0,dn.sibling=null,dn}function Et(dn,pn,mn){return dn.index=mn,ft?(mn=dn.alternate,mn!==null?(mn=mn.index,mn<pn?(dn.flags|=2,pn):mn):(dn.flags|=2,pn)):(dn.flags|=1048576,pn)}function Ct(dn){return ft&&dn.alternate===null&&(dn.flags|=2),dn}function Rt(dn,pn,mn,On){return pn===null||pn.tag!==6?(pn=xh(mn,dn.mode,On),pn.return=dn,pn):(pn=Tt(pn,mn),pn.return=dn,pn)}function kt(dn,pn,mn,On){var bn=mn.type;return bn===ya?Bt(dn,pn,mn.props.children,On,mn.key):pn!==null&&(pn.elementType===bn||typeof bn=="object"&&bn!==null&&bn.$$typeof===Ha&&uh(bn)===pn.type)?(On=Tt(pn,mn.props),On.ref=sh(dn,pn,mn),On.return=dn,On):(On=yh(mn.type,mn.key,mn.props,null,dn.mode,On),On.ref=sh(dn,pn,mn),On.return=dn,On)}function Dt(dn,pn,mn,On){return pn===null||pn.tag!==4||pn.stateNode.containerInfo!==mn.containerInfo||pn.stateNode.implementation!==mn.implementation?(pn=zh(mn,dn.mode,On),pn.return=dn,pn):(pn=Tt(pn,mn.children||[]),pn.return=dn,pn)}function Bt(dn,pn,mn,On,bn){return pn===null||pn.tag!==7?(pn=Ah(mn,dn.mode,On,bn),pn.return=dn,pn):(pn=Tt(pn,mn),pn.return=dn,pn)}function Ft(dn,pn,mn){if(typeof pn=="string"&&pn!==""||typeof pn=="number")return pn=xh(""+pn,dn.mode,mn),pn.return=dn,pn;if(typeof pn=="object"&&pn!==null){switch(pn.$$typeof){case va:return mn=yh(pn.type,pn.key,pn.props,null,dn.mode,mn),mn.ref=sh(dn,null,pn),mn.return=dn,mn;case wa:return pn=zh(pn,dn.mode,mn),pn.return=dn,pn;case Ha:var On=pn._init;return Ft(dn,On(pn._payload),mn)}if(eb(pn)||Ka(pn))return pn=Ah(pn,dn.mode,mn,null),pn.return=dn,pn;th(dn,pn)}return null}function Ut(dn,pn,mn,On){var bn=pn!==null?pn.key:null;if(typeof mn=="string"&&mn!==""||typeof mn=="number")return bn!==null?null:Rt(dn,pn,""+mn,On);if(typeof mn=="object"&&mn!==null){switch(mn.$$typeof){case va:return mn.key===bn?kt(dn,pn,mn,On):null;case wa:return mn.key===bn?Dt(dn,pn,mn,On):null;case Ha:return bn=mn._init,Ut(dn,pn,bn(mn._payload),On)}if(eb(mn)||Ka(mn))return bn!==null?null:Bt(dn,pn,mn,On,null);th(dn,mn)}return null}function Zt(dn,pn,mn,On,bn){if(typeof On=="string"&&On!==""||typeof On=="number")return dn=dn.get(mn)||null,Rt(pn,dn,""+On,bn);if(typeof On=="object"&&On!==null){switch(On.$$typeof){case va:return dn=dn.get(On.key===null?mn:On.key)||null,kt(pn,dn,On,bn);case wa:return dn=dn.get(On.key===null?mn:On.key)||null,Dt(pn,dn,On,bn);case Ha:var En=On._init;return Zt(dn,pn,mn,En(On._payload),bn)}if(eb(On)||Ka(On))return dn=dn.get(mn)||null,Bt(pn,dn,On,bn,null);th(pn,On)}return null}function Kt(dn,pn,mn,On){for(var bn=null,En=null,An=pn,Tn=pn=0,In=null;An!==null&&Tn<mn.length;Tn++){An.index>Tn?(In=An,An=null):In=An.sibling;var Rn=Ut(dn,An,mn[Tn],On);if(Rn===null){An===null&&(An=In);break}ft&&An&&Rn.alternate===null&&lt(dn,An),pn=Et(Rn,pn,Tn),En===null?bn=Rn:En.sibling=Rn,En=Rn,An=In}if(Tn===mn.length)return dt(dn,An),I$4&&tg(dn,Tn),bn;if(An===null){for(;Tn<mn.length;Tn++)An=Ft(dn,mn[Tn],On),An!==null&&(pn=Et(An,pn,Tn),En===null?bn=An:En.sibling=An,En=An);return I$4&&tg(dn,Tn),bn}for(An=vt(dn,An);Tn<mn.length;Tn++)In=Zt(An,dn,Tn,mn[Tn],On),In!==null&&(ft&&In.alternate!==null&&An.delete(In.key===null?Tn:In.key),pn=Et(In,pn,Tn),En===null?bn=In:En.sibling=In,En=In);return ft&&An.forEach(function(Dn){return lt(dn,Dn)}),I$4&&tg(dn,Tn),bn}function ln(dn,pn,mn,On){var bn=Ka(mn);if(typeof bn!="function")throw Error(p$8(150));if(mn=bn.call(mn),mn==null)throw Error(p$8(151));for(var En=bn=null,An=pn,Tn=pn=0,In=null,Rn=mn.next();An!==null&&!Rn.done;Tn++,Rn=mn.next()){An.index>Tn?(In=An,An=null):In=An.sibling;var Dn=Ut(dn,An,Rn.value,On);if(Dn===null){An===null&&(An=In);break}ft&&An&&Dn.alternate===null&&lt(dn,An),pn=Et(Dn,pn,Tn),En===null?bn=Dn:En.sibling=Dn,En=Dn,An=In}if(Rn.done)return dt(dn,An),I$4&&tg(dn,Tn),bn;if(An===null){for(;!Rn.done;Tn++,Rn=mn.next())Rn=Ft(dn,Rn.value,On),Rn!==null&&(pn=Et(Rn,pn,Tn),En===null?bn=Rn:En.sibling=Rn,En=Rn);return I$4&&tg(dn,Tn),bn}for(An=vt(dn,An);!Rn.done;Tn++,Rn=mn.next())Rn=Zt(An,dn,Tn,Rn.value,On),Rn!==null&&(ft&&Rn.alternate!==null&&An.delete(Rn.key===null?Tn:Rn.key),pn=Et(Rn,pn,Tn),En===null?bn=Rn:En.sibling=Rn,En=Rn);return ft&&An.forEach(function(Bn){return lt(dn,Bn)}),I$4&&tg(dn,Tn),bn}function hn(dn,pn,mn,On){if(typeof mn=="object"&&mn!==null&&mn.type===ya&&mn.key===null&&(mn=mn.props.children),typeof mn=="object"&&mn!==null){switch(mn.$$typeof){case va:e:{for(var bn=mn.key,En=pn;En!==null;){if(En.key===bn){if(bn=mn.type,bn===ya){if(En.tag===7){dt(dn,En.sibling),pn=Tt(En,mn.props.children),pn.return=dn,dn=pn;break e}}else if(En.elementType===bn||typeof bn=="object"&&bn!==null&&bn.$$typeof===Ha&&uh(bn)===En.type){dt(dn,En.sibling),pn=Tt(En,mn.props),pn.ref=sh(dn,En,mn),pn.return=dn,dn=pn;break e}dt(dn,En);break}else lt(dn,En);En=En.sibling}mn.type===ya?(pn=Ah(mn.props.children,dn.mode,On,mn.key),pn.return=dn,dn=pn):(On=yh(mn.type,mn.key,mn.props,null,dn.mode,On),On.ref=sh(dn,pn,mn),On.return=dn,dn=On)}return Ct(dn);case wa:e:{for(En=mn.key;pn!==null;){if(pn.key===En)if(pn.tag===4&&pn.stateNode.containerInfo===mn.containerInfo&&pn.stateNode.implementation===mn.implementation){dt(dn,pn.sibling),pn=Tt(pn,mn.children||[]),pn.return=dn,dn=pn;break e}else{dt(dn,pn);break}else lt(dn,pn);pn=pn.sibling}pn=zh(mn,dn.mode,On),pn.return=dn,dn=pn}return Ct(dn);case Ha:return En=mn._init,hn(dn,pn,En(mn._payload),On)}if(eb(mn))return Kt(dn,pn,mn,On);if(Ka(mn))return ln(dn,pn,mn,On);th(dn,mn)}return typeof mn=="string"&&mn!==""||typeof mn=="number"?(mn=""+mn,pn!==null&&pn.tag===6?(dt(dn,pn.sibling),pn=Tt(pn,mn),pn.return=dn,dn=pn):(dt(dn,pn),pn=xh(mn,dn.mode,On),pn.return=dn,dn=pn),Ct(dn)):dt(dn,pn)}return hn}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(ft){if(ft===Dh)throw Error(p$8(174));return ft}function Ih(ft,lt){switch(G$1(Gh,lt),G$1(Fh,ft),G$1(Eh,Dh),ft=lt.nodeType,ft){case 9:case 11:lt=(lt=lt.documentElement)?lt.namespaceURI:lb(null,"");break;default:ft=ft===8?lt.parentNode:lt,lt=ft.namespaceURI||null,ft=ft.tagName,lt=lb(lt,ft)}E$6(Eh),G$1(Eh,lt)}function Jh(){E$6(Eh),E$6(Fh),E$6(Gh)}function Kh(ft){Hh(Gh.current);var lt=Hh(Eh.current),dt=lb(lt,ft.type);lt!==dt&&(G$1(Fh,ft),G$1(Eh,dt))}function Lh(ft){Fh.current===ft&&(E$6(Eh),E$6(Fh))}var M$2=Uf(0);function Mh(ft){for(var lt=ft;lt!==null;){if(lt.tag===13){var dt=lt.memoizedState;if(dt!==null&&(dt=dt.dehydrated,dt===null||dt.data==="$?"||dt.data==="$!"))return lt}else if(lt.tag===19&&lt.memoizedProps.revealOrder!==void 0){if(lt.flags&128)return lt}else if(lt.child!==null){lt.child.return=lt,lt=lt.child;continue}if(lt===ft)break;for(;lt.sibling===null;){if(lt.return===null||lt.return===ft)return null;lt=lt.return}lt.sibling.return=lt.return,lt=lt.sibling}return null}var Nh=[];function Oh(){for(var ft=0;ft<Nh.length;ft++)Nh[ft]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua.ReactCurrentDispatcher,Qh=ua.ReactCurrentBatchConfig,Rh=0,N$3=null,O$4=null,P$4=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q$4(){throw Error(p$8(321))}function Wh(ft,lt){if(lt===null)return!1;for(var dt=0;dt<lt.length&&dt<ft.length;dt++)if(!He$2(ft[dt],lt[dt]))return!1;return!0}function Xh(ft,lt,dt,vt,Tt,Et){if(Rh=Et,N$3=lt,lt.memoizedState=null,lt.updateQueue=null,lt.lanes=0,Ph.current=ft===null||ft.memoizedState===null?Yh:Zh,ft=dt(vt,Tt),Th){Et=0;do{if(Th=!1,Uh=0,25<=Et)throw Error(p$8(301));Et+=1,P$4=O$4=null,lt.updateQueue=null,Ph.current=$h,ft=dt(vt,Tt)}while(Th)}if(Ph.current=ai,lt=O$4!==null&&O$4.next!==null,Rh=0,P$4=O$4=N$3=null,Sh=!1,lt)throw Error(p$8(300));return ft}function bi(){var ft=Uh!==0;return Uh=0,ft}function ci(){var ft={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$4===null?N$3.memoizedState=P$4=ft:P$4=P$4.next=ft,P$4}function di(){if(O$4===null){var ft=N$3.alternate;ft=ft!==null?ft.memoizedState:null}else ft=O$4.next;var lt=P$4===null?N$3.memoizedState:P$4.next;if(lt!==null)P$4=lt,O$4=ft;else{if(ft===null)throw Error(p$8(310));O$4=ft,ft={memoizedState:O$4.memoizedState,baseState:O$4.baseState,baseQueue:O$4.baseQueue,queue:O$4.queue,next:null},P$4===null?N$3.memoizedState=P$4=ft:P$4=P$4.next=ft}return P$4}function ei(ft,lt){return typeof lt=="function"?lt(ft):lt}function fi(ft){var lt=di(),dt=lt.queue;if(dt===null)throw Error(p$8(311));dt.lastRenderedReducer=ft;var vt=O$4,Tt=vt.baseQueue,Et=dt.pending;if(Et!==null){if(Tt!==null){var Ct=Tt.next;Tt.next=Et.next,Et.next=Ct}vt.baseQueue=Tt=Et,dt.pending=null}if(Tt!==null){Et=Tt.next,vt=vt.baseState;var Rt=Ct=null,kt=null,Dt=Et;do{var Bt=Dt.lane;if((Rh&Bt)===Bt)kt!==null&&(kt=kt.next={lane:0,action:Dt.action,hasEagerState:Dt.hasEagerState,eagerState:Dt.eagerState,next:null}),vt=Dt.hasEagerState?Dt.eagerState:ft(vt,Dt.action);else{var Ft={lane:Bt,action:Dt.action,hasEagerState:Dt.hasEagerState,eagerState:Dt.eagerState,next:null};kt===null?(Rt=kt=Ft,Ct=vt):kt=kt.next=Ft,N$3.lanes|=Bt,hh|=Bt}Dt=Dt.next}while(Dt!==null&&Dt!==Et);kt===null?Ct=vt:kt.next=Rt,He$2(vt,lt.memoizedState)||(Ug=!0),lt.memoizedState=vt,lt.baseState=Ct,lt.baseQueue=kt,dt.lastRenderedState=vt}if(ft=dt.interleaved,ft!==null){Tt=ft;do Et=Tt.lane,N$3.lanes|=Et,hh|=Et,Tt=Tt.next;while(Tt!==ft)}else Tt===null&&(dt.lanes=0);return[lt.memoizedState,dt.dispatch]}function gi(ft){var lt=di(),dt=lt.queue;if(dt===null)throw Error(p$8(311));dt.lastRenderedReducer=ft;var vt=dt.dispatch,Tt=dt.pending,Et=lt.memoizedState;if(Tt!==null){dt.pending=null;var Ct=Tt=Tt.next;do Et=ft(Et,Ct.action),Ct=Ct.next;while(Ct!==Tt);He$2(Et,lt.memoizedState)||(Ug=!0),lt.memoizedState=Et,lt.baseQueue===null&&(lt.baseState=Et),dt.lastRenderedState=Et}return[Et,vt]}function hi(){}function ii(ft,lt){var dt=N$3,vt=di(),Tt=lt(),Et=!He$2(vt.memoizedState,Tt);if(Et&&(vt.memoizedState=Tt,Ug=!0),vt=vt.queue,ji(ki.bind(null,dt,vt,ft),[ft]),vt.getSnapshot!==lt||Et||P$4!==null&&P$4.memoizedState.tag&1){if(dt.flags|=2048,li(9,mi.bind(null,dt,vt,Tt,lt),void 0,null),R$3===null)throw Error(p$8(349));Rh&30||ni(dt,lt,Tt)}return Tt}function ni(ft,lt,dt){ft.flags|=16384,ft={getSnapshot:lt,value:dt},lt=N$3.updateQueue,lt===null?(lt={lastEffect:null,stores:null},N$3.updateQueue=lt,lt.stores=[ft]):(dt=lt.stores,dt===null?lt.stores=[ft]:dt.push(ft))}function mi(ft,lt,dt,vt){lt.value=dt,lt.getSnapshot=vt,oi(lt)&&pi(ft)}function ki(ft,lt,dt){return dt(function(){oi(lt)&&pi(ft)})}function oi(ft){var lt=ft.getSnapshot;ft=ft.value;try{var dt=lt();return!He$2(ft,dt)}catch{return!0}}function pi(ft){var lt=Zg(ft,1);lt!==null&&mh(lt,ft,1,-1)}function qi(ft){var lt=ci();return typeof ft=="function"&&(ft=ft()),lt.memoizedState=lt.baseState=ft,ft={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:ft},lt.queue=ft,ft=ft.dispatch=ri.bind(null,N$3,ft),[lt.memoizedState,ft]}function li(ft,lt,dt,vt){return ft={tag:ft,create:lt,destroy:dt,deps:vt,next:null},lt=N$3.updateQueue,lt===null?(lt={lastEffect:null,stores:null},N$3.updateQueue=lt,lt.lastEffect=ft.next=ft):(dt=lt.lastEffect,dt===null?lt.lastEffect=ft.next=ft:(vt=dt.next,dt.next=ft,ft.next=vt,lt.lastEffect=ft)),ft}function si(){return di().memoizedState}function ti(ft,lt,dt,vt){var Tt=ci();N$3.flags|=ft,Tt.memoizedState=li(1|lt,dt,void 0,vt===void 0?null:vt)}function ui(ft,lt,dt,vt){var Tt=di();vt=vt===void 0?null:vt;var Et=void 0;if(O$4!==null){var Ct=O$4.memoizedState;if(Et=Ct.destroy,vt!==null&&Wh(vt,Ct.deps)){Tt.memoizedState=li(lt,dt,Et,vt);return}}N$3.flags|=ft,Tt.memoizedState=li(1|lt,dt,Et,vt)}function vi(ft,lt){return ti(8390656,8,ft,lt)}function ji(ft,lt){return ui(2048,8,ft,lt)}function wi(ft,lt){return ui(4,2,ft,lt)}function xi(ft,lt){return ui(4,4,ft,lt)}function yi(ft,lt){if(typeof lt=="function")return ft=ft(),lt(ft),function(){lt(null)};if(lt!=null)return ft=ft(),lt.current=ft,function(){lt.current=null}}function zi(ft,lt,dt){return dt=dt!=null?dt.concat([ft]):null,ui(4,4,yi.bind(null,lt,ft),dt)}function Ai(){}function Bi(ft,lt){var dt=di();lt=lt===void 0?null:lt;var vt=dt.memoizedState;return vt!==null&&lt!==null&&Wh(lt,vt[1])?vt[0]:(dt.memoizedState=[ft,lt],ft)}function Ci(ft,lt){var dt=di();lt=lt===void 0?null:lt;var vt=dt.memoizedState;return vt!==null&&lt!==null&&Wh(lt,vt[1])?vt[0]:(ft=ft(),dt.memoizedState=[ft,lt],ft)}function Di(ft,lt,dt){return Rh&21?(He$2(dt,lt)||(dt=yc(),N$3.lanes|=dt,hh|=dt,ft.baseState=!0),lt):(ft.baseState&&(ft.baseState=!1,Ug=!0),ft.memoizedState=dt)}function Ei(ft,lt){var dt=C$4;C$4=dt!==0&&4>dt?dt:4,ft(!0);var vt=Qh.transition;Qh.transition={};try{ft(!1),lt()}finally{C$4=dt,Qh.transition=vt}}function Fi(){return di().memoizedState}function Gi(ft,lt,dt){var vt=lh(ft);if(dt={lane:vt,action:dt,hasEagerState:!1,eagerState:null,next:null},Hi(ft))Ii(lt,dt);else if(dt=Yg(ft,lt,dt,vt),dt!==null){var Tt=L$3();mh(dt,ft,vt,Tt),Ji(dt,lt,vt)}}function ri(ft,lt,dt){var vt=lh(ft),Tt={lane:vt,action:dt,hasEagerState:!1,eagerState:null,next:null};if(Hi(ft))Ii(lt,Tt);else{var Et=ft.alternate;if(ft.lanes===0&&(Et===null||Et.lanes===0)&&(Et=lt.lastRenderedReducer,Et!==null))try{var Ct=lt.lastRenderedState,Rt=Et(Ct,dt);if(Tt.hasEagerState=!0,Tt.eagerState=Rt,He$2(Rt,Ct)){var kt=lt.interleaved;kt===null?(Tt.next=Tt,Xg(lt)):(Tt.next=kt.next,kt.next=Tt),lt.interleaved=Tt;return}}catch{}finally{}dt=Yg(ft,lt,Tt,vt),dt!==null&&(Tt=L$3(),mh(dt,ft,vt,Tt),Ji(dt,lt,vt))}}function Hi(ft){var lt=ft.alternate;return ft===N$3||lt!==null&&lt===N$3}function Ii(ft,lt){Th=Sh=!0;var dt=ft.pending;dt===null?lt.next=lt:(lt.next=dt.next,dt.next=lt),ft.pending=lt}function Ji(ft,lt,dt){if(dt&4194240){var vt=lt.lanes;vt&=ft.pendingLanes,dt|=vt,lt.lanes=dt,Cc(ft,dt)}}var ai={readContext:Vg,useCallback:Q$4,useContext:Q$4,useEffect:Q$4,useImperativeHandle:Q$4,useInsertionEffect:Q$4,useLayoutEffect:Q$4,useMemo:Q$4,useReducer:Q$4,useRef:Q$4,useState:Q$4,useDebugValue:Q$4,useDeferredValue:Q$4,useTransition:Q$4,useMutableSource:Q$4,useSyncExternalStore:Q$4,useId:Q$4,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(ft,lt){return ci().memoizedState=[ft,lt===void 0?null:lt],ft},useContext:Vg,useEffect:vi,useImperativeHandle:function(ft,lt,dt){return dt=dt!=null?dt.concat([ft]):null,ti(4194308,4,yi.bind(null,lt,ft),dt)},useLayoutEffect:function(ft,lt){return ti(4194308,4,ft,lt)},useInsertionEffect:function(ft,lt){return ti(4,2,ft,lt)},useMemo:function(ft,lt){var dt=ci();return lt=lt===void 0?null:lt,ft=ft(),dt.memoizedState=[ft,lt],ft},useReducer:function(ft,lt,dt){var vt=ci();return lt=dt!==void 0?dt(lt):lt,vt.memoizedState=vt.baseState=lt,ft={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ft,lastRenderedState:lt},vt.queue=ft,ft=ft.dispatch=Gi.bind(null,N$3,ft),[vt.memoizedState,ft]},useRef:function(ft){var lt=ci();return ft={current:ft},lt.memoizedState=ft},useState:qi,useDebugValue:Ai,useDeferredValue:function(ft){return ci().memoizedState=ft},useTransition:function(){var ft=qi(!1),lt=ft[0];return ft=Ei.bind(null,ft[1]),ci().memoizedState=ft,[lt,ft]},useMutableSource:function(){},useSyncExternalStore:function(ft,lt,dt){var vt=N$3,Tt=ci();if(I$4){if(dt===void 0)throw Error(p$8(407));dt=dt()}else{if(dt=lt(),R$3===null)throw Error(p$8(349));Rh&30||ni(vt,lt,dt)}Tt.memoizedState=dt;var Et={value:dt,getSnapshot:lt};return Tt.queue=Et,vi(ki.bind(null,vt,Et,ft),[ft]),vt.flags|=2048,li(9,mi.bind(null,vt,Et,dt,lt),void 0,null),dt},useId:function(){var ft=ci(),lt=R$3.identifierPrefix;if(I$4){var dt=sg,vt=rg;dt=(vt&~(1<<32-oc(vt)-1)).toString(32)+dt,lt=":"+lt+"R"+dt,dt=Uh++,0<dt&&(lt+="H"+dt.toString(32)),lt+=":"}else dt=Vh++,lt=":"+lt+"r"+dt.toString(32)+":";return ft.memoizedState=lt},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(ft){var lt=di();return Di(lt,O$4.memoizedState,ft)},useTransition:function(){var ft=fi(ei)[0],lt=di().memoizedState;return[ft,lt]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(ft){var lt=di();return O$4===null?lt.memoizedState=ft:Di(lt,O$4.memoizedState,ft)},useTransition:function(){var ft=gi(ei)[0],lt=di().memoizedState;return[ft,lt]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(ft,lt){try{var dt="",vt=lt;do dt+=Pa(vt),vt=vt.return;while(vt);var Tt=dt}catch(Et){Tt=`
Error generating stack: `+Et.message+`
`+Et.stack}return{value:ft,source:lt,stack:Tt,digest:null}}function Li(ft,lt,dt){return{value:ft,source:null,stack:dt??null,digest:lt??null}}function Mi(ft,lt){try{console.error(lt.value)}catch(dt){setTimeout(function(){throw dt})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(ft,lt,dt){dt=ch(-1,dt),dt.tag=3,dt.payload={element:null};var vt=lt.value;return dt.callback=function(){Pi||(Pi=!0,Qi=vt),Mi(ft,lt)},dt}function Ri(ft,lt,dt){dt=ch(-1,dt),dt.tag=3;var vt=ft.type.getDerivedStateFromError;if(typeof vt=="function"){var Tt=lt.value;dt.payload=function(){return vt(Tt)},dt.callback=function(){Mi(ft,lt)}}var Et=ft.stateNode;return Et!==null&&typeof Et.componentDidCatch=="function"&&(dt.callback=function(){Mi(ft,lt),typeof vt!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var Ct=lt.stack;this.componentDidCatch(lt.value,{componentStack:Ct!==null?Ct:""})}),dt}function Ti(ft,lt,dt){var vt=ft.pingCache;if(vt===null){vt=ft.pingCache=new Ni;var Tt=new Set;vt.set(lt,Tt)}else Tt=vt.get(lt),Tt===void 0&&(Tt=new Set,vt.set(lt,Tt));Tt.has(dt)||(Tt.add(dt),ft=Ui.bind(null,ft,lt,dt),lt.then(ft,ft))}function Vi(ft){do{var lt;if((lt=ft.tag===13)&&(lt=ft.memoizedState,lt=lt!==null?lt.dehydrated!==null:!0),lt)return ft;ft=ft.return}while(ft!==null);return null}function Wi(ft,lt,dt,vt,Tt){return ft.mode&1?(ft.flags|=65536,ft.lanes=Tt,ft):(ft===lt?ft.flags|=65536:(ft.flags|=128,dt.flags|=131072,dt.flags&=-52805,dt.tag===1&&(dt.alternate===null?dt.tag=17:(lt=ch(-1,1),lt.tag=2,dh(dt,lt,1))),dt.lanes|=1),ft)}var Xi=ua.ReactCurrentOwner,Ug=!1;function Yi(ft,lt,dt,vt){lt.child=ft===null?Ch(lt,null,dt,vt):Bh(lt,ft.child,dt,vt)}function Zi(ft,lt,dt,vt,Tt){dt=dt.render;var Et=lt.ref;return Tg(lt,Tt),vt=Xh(ft,lt,dt,vt,Et,Tt),dt=bi(),ft!==null&&!Ug?(lt.updateQueue=ft.updateQueue,lt.flags&=-2053,ft.lanes&=~Tt,$i(ft,lt,Tt)):(I$4&&dt&&vg(lt),lt.flags|=1,Yi(ft,lt,vt,Tt),lt.child)}function aj(ft,lt,dt,vt,Tt){if(ft===null){var Et=dt.type;return typeof Et=="function"&&!bj(Et)&&Et.defaultProps===void 0&&dt.compare===null&&dt.defaultProps===void 0?(lt.tag=15,lt.type=Et,cj(ft,lt,Et,vt,Tt)):(ft=yh(dt.type,null,vt,lt,lt.mode,Tt),ft.ref=lt.ref,ft.return=lt,lt.child=ft)}if(Et=ft.child,!(ft.lanes&Tt)){var Ct=Et.memoizedProps;if(dt=dt.compare,dt=dt!==null?dt:Ie$1,dt(Ct,vt)&&ft.ref===lt.ref)return $i(ft,lt,Tt)}return lt.flags|=1,ft=wh(Et,vt),ft.ref=lt.ref,ft.return=lt,lt.child=ft}function cj(ft,lt,dt,vt,Tt){if(ft!==null){var Et=ft.memoizedProps;if(Ie$1(Et,vt)&&ft.ref===lt.ref)if(Ug=!1,lt.pendingProps=vt=Et,(ft.lanes&Tt)!==0)ft.flags&131072&&(Ug=!0);else return lt.lanes=ft.lanes,$i(ft,lt,Tt)}return dj(ft,lt,dt,vt,Tt)}function ej(ft,lt,dt){var vt=lt.pendingProps,Tt=vt.children,Et=ft!==null?ft.memoizedState:null;if(vt.mode==="hidden")if(!(lt.mode&1))lt.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(fj,gj),gj|=dt;else{if(!(dt&1073741824))return ft=Et!==null?Et.baseLanes|dt:dt,lt.lanes=lt.childLanes=1073741824,lt.memoizedState={baseLanes:ft,cachePool:null,transitions:null},lt.updateQueue=null,G$1(fj,gj),gj|=ft,null;lt.memoizedState={baseLanes:0,cachePool:null,transitions:null},vt=Et!==null?Et.baseLanes:dt,G$1(fj,gj),gj|=vt}else Et!==null?(vt=Et.baseLanes|dt,lt.memoizedState=null):vt=dt,G$1(fj,gj),gj|=vt;return Yi(ft,lt,Tt,dt),lt.child}function hj(ft,lt){var dt=lt.ref;(ft===null&&dt!==null||ft!==null&&ft.ref!==dt)&&(lt.flags|=512,lt.flags|=2097152)}function dj(ft,lt,dt,vt,Tt){var Et=Zf(dt)?Xf:H$5.current;return Et=Yf(lt,Et),Tg(lt,Tt),dt=Xh(ft,lt,dt,vt,Et,Tt),vt=bi(),ft!==null&&!Ug?(lt.updateQueue=ft.updateQueue,lt.flags&=-2053,ft.lanes&=~Tt,$i(ft,lt,Tt)):(I$4&&vt&&vg(lt),lt.flags|=1,Yi(ft,lt,dt,Tt),lt.child)}function ij(ft,lt,dt,vt,Tt){if(Zf(dt)){var Et=!0;cg(lt)}else Et=!1;if(Tg(lt,Tt),lt.stateNode===null)jj(ft,lt),ph(lt,dt,vt),rh(lt,dt,vt,Tt),vt=!0;else if(ft===null){var Ct=lt.stateNode,Rt=lt.memoizedProps;Ct.props=Rt;var kt=Ct.context,Dt=dt.contextType;typeof Dt=="object"&&Dt!==null?Dt=Vg(Dt):(Dt=Zf(dt)?Xf:H$5.current,Dt=Yf(lt,Dt));var Bt=dt.getDerivedStateFromProps,Ft=typeof Bt=="function"||typeof Ct.getSnapshotBeforeUpdate=="function";Ft||typeof Ct.UNSAFE_componentWillReceiveProps!="function"&&typeof Ct.componentWillReceiveProps!="function"||(Rt!==vt||kt!==Dt)&&qh(lt,Ct,vt,Dt),$g=!1;var Ut=lt.memoizedState;Ct.state=Ut,gh(lt,vt,Ct,Tt),kt=lt.memoizedState,Rt!==vt||Ut!==kt||Wf.current||$g?(typeof Bt=="function"&&(kh(lt,dt,Bt,vt),kt=lt.memoizedState),(Rt=$g||oh(lt,dt,Rt,vt,Ut,kt,Dt))?(Ft||typeof Ct.UNSAFE_componentWillMount!="function"&&typeof Ct.componentWillMount!="function"||(typeof Ct.componentWillMount=="function"&&Ct.componentWillMount(),typeof Ct.UNSAFE_componentWillMount=="function"&&Ct.UNSAFE_componentWillMount()),typeof Ct.componentDidMount=="function"&&(lt.flags|=4194308)):(typeof Ct.componentDidMount=="function"&&(lt.flags|=4194308),lt.memoizedProps=vt,lt.memoizedState=kt),Ct.props=vt,Ct.state=kt,Ct.context=Dt,vt=Rt):(typeof Ct.componentDidMount=="function"&&(lt.flags|=4194308),vt=!1)}else{Ct=lt.stateNode,bh(ft,lt),Rt=lt.memoizedProps,Dt=lt.type===lt.elementType?Rt:Lg(lt.type,Rt),Ct.props=Dt,Ft=lt.pendingProps,Ut=Ct.context,kt=dt.contextType,typeof kt=="object"&&kt!==null?kt=Vg(kt):(kt=Zf(dt)?Xf:H$5.current,kt=Yf(lt,kt));var Zt=dt.getDerivedStateFromProps;(Bt=typeof Zt=="function"||typeof Ct.getSnapshotBeforeUpdate=="function")||typeof Ct.UNSAFE_componentWillReceiveProps!="function"&&typeof Ct.componentWillReceiveProps!="function"||(Rt!==Ft||Ut!==kt)&&qh(lt,Ct,vt,kt),$g=!1,Ut=lt.memoizedState,Ct.state=Ut,gh(lt,vt,Ct,Tt);var Kt=lt.memoizedState;Rt!==Ft||Ut!==Kt||Wf.current||$g?(typeof Zt=="function"&&(kh(lt,dt,Zt,vt),Kt=lt.memoizedState),(Dt=$g||oh(lt,dt,Dt,vt,Ut,Kt,kt)||!1)?(Bt||typeof Ct.UNSAFE_componentWillUpdate!="function"&&typeof Ct.componentWillUpdate!="function"||(typeof Ct.componentWillUpdate=="function"&&Ct.componentWillUpdate(vt,Kt,kt),typeof Ct.UNSAFE_componentWillUpdate=="function"&&Ct.UNSAFE_componentWillUpdate(vt,Kt,kt)),typeof Ct.componentDidUpdate=="function"&&(lt.flags|=4),typeof Ct.getSnapshotBeforeUpdate=="function"&&(lt.flags|=1024)):(typeof Ct.componentDidUpdate!="function"||Rt===ft.memoizedProps&&Ut===ft.memoizedState||(lt.flags|=4),typeof Ct.getSnapshotBeforeUpdate!="function"||Rt===ft.memoizedProps&&Ut===ft.memoizedState||(lt.flags|=1024),lt.memoizedProps=vt,lt.memoizedState=Kt),Ct.props=vt,Ct.state=Kt,Ct.context=kt,vt=Dt):(typeof Ct.componentDidUpdate!="function"||Rt===ft.memoizedProps&&Ut===ft.memoizedState||(lt.flags|=4),typeof Ct.getSnapshotBeforeUpdate!="function"||Rt===ft.memoizedProps&&Ut===ft.memoizedState||(lt.flags|=1024),vt=!1)}return kj(ft,lt,dt,vt,Et,Tt)}function kj(ft,lt,dt,vt,Tt,Et){hj(ft,lt);var Ct=(lt.flags&128)!==0;if(!vt&&!Ct)return Tt&&dg(lt,dt,!1),$i(ft,lt,Et);vt=lt.stateNode,Xi.current=lt;var Rt=Ct&&typeof dt.getDerivedStateFromError!="function"?null:vt.render();return lt.flags|=1,ft!==null&&Ct?(lt.child=Bh(lt,ft.child,null,Et),lt.child=Bh(lt,null,Rt,Et)):Yi(ft,lt,Rt,Et),lt.memoizedState=vt.state,Tt&&dg(lt,dt,!0),lt.child}function lj(ft){var lt=ft.stateNode;lt.pendingContext?ag(ft,lt.pendingContext,lt.pendingContext!==lt.context):lt.context&&ag(ft,lt.context,!1),Ih(ft,lt.containerInfo)}function mj(ft,lt,dt,vt,Tt){return Ig(),Jg(Tt),lt.flags|=256,Yi(ft,lt,dt,vt),lt.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(ft){return{baseLanes:ft,cachePool:null,transitions:null}}function pj(ft,lt,dt){var vt=lt.pendingProps,Tt=M$2.current,Et=!1,Ct=(lt.flags&128)!==0,Rt;if((Rt=Ct)||(Rt=ft!==null&&ft.memoizedState===null?!1:(Tt&2)!==0),Rt?(Et=!0,lt.flags&=-129):(ft===null||ft.memoizedState!==null)&&(Tt|=1),G$1(M$2,Tt&1),ft===null)return Eg(lt),ft=lt.memoizedState,ft!==null&&(ft=ft.dehydrated,ft!==null)?(lt.mode&1?ft.data==="$!"?lt.lanes=8:lt.lanes=1073741824:lt.lanes=1,null):(Ct=vt.children,ft=vt.fallback,Et?(vt=lt.mode,Et=lt.child,Ct={mode:"hidden",children:Ct},!(vt&1)&&Et!==null?(Et.childLanes=0,Et.pendingProps=Ct):Et=qj(Ct,vt,0,null),ft=Ah(ft,vt,dt,null),Et.return=lt,ft.return=lt,Et.sibling=ft,lt.child=Et,lt.child.memoizedState=oj(dt),lt.memoizedState=nj,ft):rj(lt,Ct));if(Tt=ft.memoizedState,Tt!==null&&(Rt=Tt.dehydrated,Rt!==null))return sj(ft,lt,Ct,vt,Rt,Tt,dt);if(Et){Et=vt.fallback,Ct=lt.mode,Tt=ft.child,Rt=Tt.sibling;var kt={mode:"hidden",children:vt.children};return!(Ct&1)&&lt.child!==Tt?(vt=lt.child,vt.childLanes=0,vt.pendingProps=kt,lt.deletions=null):(vt=wh(Tt,kt),vt.subtreeFlags=Tt.subtreeFlags&14680064),Rt!==null?Et=wh(Rt,Et):(Et=Ah(Et,Ct,dt,null),Et.flags|=2),Et.return=lt,vt.return=lt,vt.sibling=Et,lt.child=vt,vt=Et,Et=lt.child,Ct=ft.child.memoizedState,Ct=Ct===null?oj(dt):{baseLanes:Ct.baseLanes|dt,cachePool:null,transitions:Ct.transitions},Et.memoizedState=Ct,Et.childLanes=ft.childLanes&~dt,lt.memoizedState=nj,vt}return Et=ft.child,ft=Et.sibling,vt=wh(Et,{mode:"visible",children:vt.children}),!(lt.mode&1)&&(vt.lanes=dt),vt.return=lt,vt.sibling=null,ft!==null&&(dt=lt.deletions,dt===null?(lt.deletions=[ft],lt.flags|=16):dt.push(ft)),lt.child=vt,lt.memoizedState=null,vt}function rj(ft,lt){return lt=qj({mode:"visible",children:lt},ft.mode,0,null),lt.return=ft,ft.child=lt}function tj(ft,lt,dt,vt){return vt!==null&&Jg(vt),Bh(lt,ft.child,null,dt),ft=rj(lt,lt.pendingProps.children),ft.flags|=2,lt.memoizedState=null,ft}function sj(ft,lt,dt,vt,Tt,Et,Ct){if(dt)return lt.flags&256?(lt.flags&=-257,vt=Li(Error(p$8(422))),tj(ft,lt,Ct,vt)):lt.memoizedState!==null?(lt.child=ft.child,lt.flags|=128,null):(Et=vt.fallback,Tt=lt.mode,vt=qj({mode:"visible",children:vt.children},Tt,0,null),Et=Ah(Et,Tt,Ct,null),Et.flags|=2,vt.return=lt,Et.return=lt,vt.sibling=Et,lt.child=vt,lt.mode&1&&Bh(lt,ft.child,null,Ct),lt.child.memoizedState=oj(Ct),lt.memoizedState=nj,Et);if(!(lt.mode&1))return tj(ft,lt,Ct,null);if(Tt.data==="$!"){if(vt=Tt.nextSibling&&Tt.nextSibling.dataset,vt)var Rt=vt.dgst;return vt=Rt,Et=Error(p$8(419)),vt=Li(Et,vt,void 0),tj(ft,lt,Ct,vt)}if(Rt=(Ct&ft.childLanes)!==0,Ug||Rt){if(vt=R$3,vt!==null){switch(Ct&-Ct){case 4:Tt=2;break;case 16:Tt=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Tt=32;break;case 536870912:Tt=268435456;break;default:Tt=0}Tt=Tt&(vt.suspendedLanes|Ct)?0:Tt,Tt!==0&&Tt!==Et.retryLane&&(Et.retryLane=Tt,Zg(ft,Tt),mh(vt,ft,Tt,-1))}return uj(),vt=Li(Error(p$8(421))),tj(ft,lt,Ct,vt)}return Tt.data==="$?"?(lt.flags|=128,lt.child=ft.child,lt=vj.bind(null,ft),Tt._reactRetry=lt,null):(ft=Et.treeContext,yg=Lf(Tt.nextSibling),xg=lt,I$4=!0,zg=null,ft!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=ft.id,sg=ft.overflow,qg=lt),lt=rj(lt,vt.children),lt.flags|=4096,lt)}function wj(ft,lt,dt){ft.lanes|=lt;var vt=ft.alternate;vt!==null&&(vt.lanes|=lt),Sg(ft.return,lt,dt)}function xj(ft,lt,dt,vt,Tt){var Et=ft.memoizedState;Et===null?ft.memoizedState={isBackwards:lt,rendering:null,renderingStartTime:0,last:vt,tail:dt,tailMode:Tt}:(Et.isBackwards=lt,Et.rendering=null,Et.renderingStartTime=0,Et.last=vt,Et.tail=dt,Et.tailMode=Tt)}function yj(ft,lt,dt){var vt=lt.pendingProps,Tt=vt.revealOrder,Et=vt.tail;if(Yi(ft,lt,vt.children,dt),vt=M$2.current,vt&2)vt=vt&1|2,lt.flags|=128;else{if(ft!==null&&ft.flags&128)e:for(ft=lt.child;ft!==null;){if(ft.tag===13)ft.memoizedState!==null&&wj(ft,dt,lt);else if(ft.tag===19)wj(ft,dt,lt);else if(ft.child!==null){ft.child.return=ft,ft=ft.child;continue}if(ft===lt)break e;for(;ft.sibling===null;){if(ft.return===null||ft.return===lt)break e;ft=ft.return}ft.sibling.return=ft.return,ft=ft.sibling}vt&=1}if(G$1(M$2,vt),!(lt.mode&1))lt.memoizedState=null;else switch(Tt){case"forwards":for(dt=lt.child,Tt=null;dt!==null;)ft=dt.alternate,ft!==null&&Mh(ft)===null&&(Tt=dt),dt=dt.sibling;dt=Tt,dt===null?(Tt=lt.child,lt.child=null):(Tt=dt.sibling,dt.sibling=null),xj(lt,!1,Tt,dt,Et);break;case"backwards":for(dt=null,Tt=lt.child,lt.child=null;Tt!==null;){if(ft=Tt.alternate,ft!==null&&Mh(ft)===null){lt.child=Tt;break}ft=Tt.sibling,Tt.sibling=dt,dt=Tt,Tt=ft}xj(lt,!0,dt,null,Et);break;case"together":xj(lt,!1,null,null,void 0);break;default:lt.memoizedState=null}return lt.child}function jj(ft,lt){!(lt.mode&1)&&ft!==null&&(ft.alternate=null,lt.alternate=null,lt.flags|=2)}function $i(ft,lt,dt){if(ft!==null&&(lt.dependencies=ft.dependencies),hh|=lt.lanes,!(dt&lt.childLanes))return null;if(ft!==null&&lt.child!==ft.child)throw Error(p$8(153));if(lt.child!==null){for(ft=lt.child,dt=wh(ft,ft.pendingProps),lt.child=dt,dt.return=lt;ft.sibling!==null;)ft=ft.sibling,dt=dt.sibling=wh(ft,ft.pendingProps),dt.return=lt;dt.sibling=null}return lt.child}function zj(ft,lt,dt){switch(lt.tag){case 3:lj(lt),Ig();break;case 5:Kh(lt);break;case 1:Zf(lt.type)&&cg(lt);break;case 4:Ih(lt,lt.stateNode.containerInfo);break;case 10:var vt=lt.type._context,Tt=lt.memoizedProps.value;G$1(Mg,vt._currentValue),vt._currentValue=Tt;break;case 13:if(vt=lt.memoizedState,vt!==null)return vt.dehydrated!==null?(G$1(M$2,M$2.current&1),lt.flags|=128,null):dt&lt.child.childLanes?pj(ft,lt,dt):(G$1(M$2,M$2.current&1),ft=$i(ft,lt,dt),ft!==null?ft.sibling:null);G$1(M$2,M$2.current&1);break;case 19:if(vt=(dt&lt.childLanes)!==0,ft.flags&128){if(vt)return yj(ft,lt,dt);lt.flags|=128}if(Tt=lt.memoizedState,Tt!==null&&(Tt.rendering=null,Tt.tail=null,Tt.lastEffect=null),G$1(M$2,M$2.current),vt)break;return null;case 22:case 23:return lt.lanes=0,ej(ft,lt,dt)}return $i(ft,lt,dt)}var Aj,Bj,Cj,Dj;Aj=function(ft,lt){for(var dt=lt.child;dt!==null;){if(dt.tag===5||dt.tag===6)ft.appendChild(dt.stateNode);else if(dt.tag!==4&&dt.child!==null){dt.child.return=dt,dt=dt.child;continue}if(dt===lt)break;for(;dt.sibling===null;){if(dt.return===null||dt.return===lt)return;dt=dt.return}dt.sibling.return=dt.return,dt=dt.sibling}};Bj=function(){};Cj=function(ft,lt,dt,vt){var Tt=ft.memoizedProps;if(Tt!==vt){ft=lt.stateNode,Hh(Eh.current);var Et=null;switch(dt){case"input":Tt=Ya(ft,Tt),vt=Ya(ft,vt),Et=[];break;case"select":Tt=A$4({},Tt,{value:void 0}),vt=A$4({},vt,{value:void 0}),Et=[];break;case"textarea":Tt=gb(ft,Tt),vt=gb(ft,vt),Et=[];break;default:typeof Tt.onClick!="function"&&typeof vt.onClick=="function"&&(ft.onclick=Bf)}ub(dt,vt);var Ct;dt=null;for(Dt in Tt)if(!vt.hasOwnProperty(Dt)&&Tt.hasOwnProperty(Dt)&&Tt[Dt]!=null)if(Dt==="style"){var Rt=Tt[Dt];for(Ct in Rt)Rt.hasOwnProperty(Ct)&&(dt||(dt={}),dt[Ct]="")}else Dt!=="dangerouslySetInnerHTML"&&Dt!=="children"&&Dt!=="suppressContentEditableWarning"&&Dt!=="suppressHydrationWarning"&&Dt!=="autoFocus"&&(ea.hasOwnProperty(Dt)?Et||(Et=[]):(Et=Et||[]).push(Dt,null));for(Dt in vt){var kt=vt[Dt];if(Rt=Tt!=null?Tt[Dt]:void 0,vt.hasOwnProperty(Dt)&&kt!==Rt&&(kt!=null||Rt!=null))if(Dt==="style")if(Rt){for(Ct in Rt)!Rt.hasOwnProperty(Ct)||kt&&kt.hasOwnProperty(Ct)||(dt||(dt={}),dt[Ct]="");for(Ct in kt)kt.hasOwnProperty(Ct)&&Rt[Ct]!==kt[Ct]&&(dt||(dt={}),dt[Ct]=kt[Ct])}else dt||(Et||(Et=[]),Et.push(Dt,dt)),dt=kt;else Dt==="dangerouslySetInnerHTML"?(kt=kt?kt.__html:void 0,Rt=Rt?Rt.__html:void 0,kt!=null&&Rt!==kt&&(Et=Et||[]).push(Dt,kt)):Dt==="children"?typeof kt!="string"&&typeof kt!="number"||(Et=Et||[]).push(Dt,""+kt):Dt!=="suppressContentEditableWarning"&&Dt!=="suppressHydrationWarning"&&(ea.hasOwnProperty(Dt)?(kt!=null&&Dt==="onScroll"&&D$6("scroll",ft),Et||Rt===kt||(Et=[])):(Et=Et||[]).push(Dt,kt))}dt&&(Et=Et||[]).push("style",dt);var Dt=Et;(lt.updateQueue=Dt)&&(lt.flags|=4)}};Dj=function(ft,lt,dt,vt){dt!==vt&&(lt.flags|=4)};function Ej(ft,lt){if(!I$4)switch(ft.tailMode){case"hidden":lt=ft.tail;for(var dt=null;lt!==null;)lt.alternate!==null&&(dt=lt),lt=lt.sibling;dt===null?ft.tail=null:dt.sibling=null;break;case"collapsed":dt=ft.tail;for(var vt=null;dt!==null;)dt.alternate!==null&&(vt=dt),dt=dt.sibling;vt===null?lt||ft.tail===null?ft.tail=null:ft.tail.sibling=null:vt.sibling=null}}function S$3(ft){var lt=ft.alternate!==null&&ft.alternate.child===ft.child,dt=0,vt=0;if(lt)for(var Tt=ft.child;Tt!==null;)dt|=Tt.lanes|Tt.childLanes,vt|=Tt.subtreeFlags&14680064,vt|=Tt.flags&14680064,Tt.return=ft,Tt=Tt.sibling;else for(Tt=ft.child;Tt!==null;)dt|=Tt.lanes|Tt.childLanes,vt|=Tt.subtreeFlags,vt|=Tt.flags,Tt.return=ft,Tt=Tt.sibling;return ft.subtreeFlags|=vt,ft.childLanes=dt,lt}function Fj(ft,lt,dt){var vt=lt.pendingProps;switch(wg(lt),lt.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$3(lt),null;case 1:return Zf(lt.type)&&$f(),S$3(lt),null;case 3:return vt=lt.stateNode,Jh(),E$6(Wf),E$6(H$5),Oh(),vt.pendingContext&&(vt.context=vt.pendingContext,vt.pendingContext=null),(ft===null||ft.child===null)&&(Gg(lt)?lt.flags|=4:ft===null||ft.memoizedState.isDehydrated&&!(lt.flags&256)||(lt.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(ft,lt),S$3(lt),null;case 5:Lh(lt);var Tt=Hh(Gh.current);if(dt=lt.type,ft!==null&&lt.stateNode!=null)Cj(ft,lt,dt,vt,Tt),ft.ref!==lt.ref&&(lt.flags|=512,lt.flags|=2097152);else{if(!vt){if(lt.stateNode===null)throw Error(p$8(166));return S$3(lt),null}if(ft=Hh(Eh.current),Gg(lt)){vt=lt.stateNode,dt=lt.type;var Et=lt.memoizedProps;switch(vt[Of]=lt,vt[Pf]=Et,ft=(lt.mode&1)!==0,dt){case"dialog":D$6("cancel",vt),D$6("close",vt);break;case"iframe":case"object":case"embed":D$6("load",vt);break;case"video":case"audio":for(Tt=0;Tt<lf.length;Tt++)D$6(lf[Tt],vt);break;case"source":D$6("error",vt);break;case"img":case"image":case"link":D$6("error",vt),D$6("load",vt);break;case"details":D$6("toggle",vt);break;case"input":Za(vt,Et),D$6("invalid",vt);break;case"select":vt._wrapperState={wasMultiple:!!Et.multiple},D$6("invalid",vt);break;case"textarea":hb(vt,Et),D$6("invalid",vt)}ub(dt,Et),Tt=null;for(var Ct in Et)if(Et.hasOwnProperty(Ct)){var Rt=Et[Ct];Ct==="children"?typeof Rt=="string"?vt.textContent!==Rt&&(Et.suppressHydrationWarning!==!0&&Af(vt.textContent,Rt,ft),Tt=["children",Rt]):typeof Rt=="number"&&vt.textContent!==""+Rt&&(Et.suppressHydrationWarning!==!0&&Af(vt.textContent,Rt,ft),Tt=["children",""+Rt]):ea.hasOwnProperty(Ct)&&Rt!=null&&Ct==="onScroll"&&D$6("scroll",vt)}switch(dt){case"input":Va(vt),db(vt,Et,!0);break;case"textarea":Va(vt),jb(vt);break;case"select":case"option":break;default:typeof Et.onClick=="function"&&(vt.onclick=Bf)}vt=Tt,lt.updateQueue=vt,vt!==null&&(lt.flags|=4)}else{Ct=Tt.nodeType===9?Tt:Tt.ownerDocument,ft==="http://www.w3.org/1999/xhtml"&&(ft=kb(dt)),ft==="http://www.w3.org/1999/xhtml"?dt==="script"?(ft=Ct.createElement("div"),ft.innerHTML="<script><\/script>",ft=ft.removeChild(ft.firstChild)):typeof vt.is=="string"?ft=Ct.createElement(dt,{is:vt.is}):(ft=Ct.createElement(dt),dt==="select"&&(Ct=ft,vt.multiple?Ct.multiple=!0:vt.size&&(Ct.size=vt.size))):ft=Ct.createElementNS(ft,dt),ft[Of]=lt,ft[Pf]=vt,Aj(ft,lt,!1,!1),lt.stateNode=ft;e:{switch(Ct=vb(dt,vt),dt){case"dialog":D$6("cancel",ft),D$6("close",ft),Tt=vt;break;case"iframe":case"object":case"embed":D$6("load",ft),Tt=vt;break;case"video":case"audio":for(Tt=0;Tt<lf.length;Tt++)D$6(lf[Tt],ft);Tt=vt;break;case"source":D$6("error",ft),Tt=vt;break;case"img":case"image":case"link":D$6("error",ft),D$6("load",ft),Tt=vt;break;case"details":D$6("toggle",ft),Tt=vt;break;case"input":Za(ft,vt),Tt=Ya(ft,vt),D$6("invalid",ft);break;case"option":Tt=vt;break;case"select":ft._wrapperState={wasMultiple:!!vt.multiple},Tt=A$4({},vt,{value:void 0}),D$6("invalid",ft);break;case"textarea":hb(ft,vt),Tt=gb(ft,vt),D$6("invalid",ft);break;default:Tt=vt}ub(dt,Tt),Rt=Tt;for(Et in Rt)if(Rt.hasOwnProperty(Et)){var kt=Rt[Et];Et==="style"?sb(ft,kt):Et==="dangerouslySetInnerHTML"?(kt=kt?kt.__html:void 0,kt!=null&&nb(ft,kt)):Et==="children"?typeof kt=="string"?(dt!=="textarea"||kt!=="")&&ob(ft,kt):typeof kt=="number"&&ob(ft,""+kt):Et!=="suppressContentEditableWarning"&&Et!=="suppressHydrationWarning"&&Et!=="autoFocus"&&(ea.hasOwnProperty(Et)?kt!=null&&Et==="onScroll"&&D$6("scroll",ft):kt!=null&&ta(ft,Et,kt,Ct))}switch(dt){case"input":Va(ft),db(ft,vt,!1);break;case"textarea":Va(ft),jb(ft);break;case"option":vt.value!=null&&ft.setAttribute("value",""+Sa(vt.value));break;case"select":ft.multiple=!!vt.multiple,Et=vt.value,Et!=null?fb(ft,!!vt.multiple,Et,!1):vt.defaultValue!=null&&fb(ft,!!vt.multiple,vt.defaultValue,!0);break;default:typeof Tt.onClick=="function"&&(ft.onclick=Bf)}switch(dt){case"button":case"input":case"select":case"textarea":vt=!!vt.autoFocus;break e;case"img":vt=!0;break e;default:vt=!1}}vt&&(lt.flags|=4)}lt.ref!==null&&(lt.flags|=512,lt.flags|=2097152)}return S$3(lt),null;case 6:if(ft&&lt.stateNode!=null)Dj(ft,lt,ft.memoizedProps,vt);else{if(typeof vt!="string"&&lt.stateNode===null)throw Error(p$8(166));if(dt=Hh(Gh.current),Hh(Eh.current),Gg(lt)){if(vt=lt.stateNode,dt=lt.memoizedProps,vt[Of]=lt,(Et=vt.nodeValue!==dt)&&(ft=xg,ft!==null))switch(ft.tag){case 3:Af(vt.nodeValue,dt,(ft.mode&1)!==0);break;case 5:ft.memoizedProps.suppressHydrationWarning!==!0&&Af(vt.nodeValue,dt,(ft.mode&1)!==0)}Et&&(lt.flags|=4)}else vt=(dt.nodeType===9?dt:dt.ownerDocument).createTextNode(vt),vt[Of]=lt,lt.stateNode=vt}return S$3(lt),null;case 13:if(E$6(M$2),vt=lt.memoizedState,ft===null||ft.memoizedState!==null&&ft.memoizedState.dehydrated!==null){if(I$4&&yg!==null&&lt.mode&1&&!(lt.flags&128))Hg(),Ig(),lt.flags|=98560,Et=!1;else if(Et=Gg(lt),vt!==null&&vt.dehydrated!==null){if(ft===null){if(!Et)throw Error(p$8(318));if(Et=lt.memoizedState,Et=Et!==null?Et.dehydrated:null,!Et)throw Error(p$8(317));Et[Of]=lt}else Ig(),!(lt.flags&128)&&(lt.memoizedState=null),lt.flags|=4;S$3(lt),Et=!1}else zg!==null&&(Gj(zg),zg=null),Et=!0;if(!Et)return lt.flags&65536?lt:null}return lt.flags&128?(lt.lanes=dt,lt):(vt=vt!==null,vt!==(ft!==null&&ft.memoizedState!==null)&&vt&&(lt.child.flags|=8192,lt.mode&1&&(ft===null||M$2.current&1?T$3===0&&(T$3=3):uj())),lt.updateQueue!==null&&(lt.flags|=4),S$3(lt),null);case 4:return Jh(),Bj(ft,lt),ft===null&&sf(lt.stateNode.containerInfo),S$3(lt),null;case 10:return Rg(lt.type._context),S$3(lt),null;case 17:return Zf(lt.type)&&$f(),S$3(lt),null;case 19:if(E$6(M$2),Et=lt.memoizedState,Et===null)return S$3(lt),null;if(vt=(lt.flags&128)!==0,Ct=Et.rendering,Ct===null)if(vt)Ej(Et,!1);else{if(T$3!==0||ft!==null&&ft.flags&128)for(ft=lt.child;ft!==null;){if(Ct=Mh(ft),Ct!==null){for(lt.flags|=128,Ej(Et,!1),vt=Ct.updateQueue,vt!==null&&(lt.updateQueue=vt,lt.flags|=4),lt.subtreeFlags=0,vt=dt,dt=lt.child;dt!==null;)Et=dt,ft=vt,Et.flags&=14680066,Ct=Et.alternate,Ct===null?(Et.childLanes=0,Et.lanes=ft,Et.child=null,Et.subtreeFlags=0,Et.memoizedProps=null,Et.memoizedState=null,Et.updateQueue=null,Et.dependencies=null,Et.stateNode=null):(Et.childLanes=Ct.childLanes,Et.lanes=Ct.lanes,Et.child=Ct.child,Et.subtreeFlags=0,Et.deletions=null,Et.memoizedProps=Ct.memoizedProps,Et.memoizedState=Ct.memoizedState,Et.updateQueue=Ct.updateQueue,Et.type=Ct.type,ft=Ct.dependencies,Et.dependencies=ft===null?null:{lanes:ft.lanes,firstContext:ft.firstContext}),dt=dt.sibling;return G$1(M$2,M$2.current&1|2),lt.child}ft=ft.sibling}Et.tail!==null&&B$2()>Hj&&(lt.flags|=128,vt=!0,Ej(Et,!1),lt.lanes=4194304)}else{if(!vt)if(ft=Mh(Ct),ft!==null){if(lt.flags|=128,vt=!0,dt=ft.updateQueue,dt!==null&&(lt.updateQueue=dt,lt.flags|=4),Ej(Et,!0),Et.tail===null&&Et.tailMode==="hidden"&&!Ct.alternate&&!I$4)return S$3(lt),null}else 2*B$2()-Et.renderingStartTime>Hj&&dt!==1073741824&&(lt.flags|=128,vt=!0,Ej(Et,!1),lt.lanes=4194304);Et.isBackwards?(Ct.sibling=lt.child,lt.child=Ct):(dt=Et.last,dt!==null?dt.sibling=Ct:lt.child=Ct,Et.last=Ct)}return Et.tail!==null?(lt=Et.tail,Et.rendering=lt,Et.tail=lt.sibling,Et.renderingStartTime=B$2(),lt.sibling=null,dt=M$2.current,G$1(M$2,vt?dt&1|2:dt&1),lt):(S$3(lt),null);case 22:case 23:return Ij(),vt=lt.memoizedState!==null,ft!==null&&ft.memoizedState!==null!==vt&&(lt.flags|=8192),vt&&lt.mode&1?gj&1073741824&&(S$3(lt),lt.subtreeFlags&6&&(lt.flags|=8192)):S$3(lt),null;case 24:return null;case 25:return null}throw Error(p$8(156,lt.tag))}function Jj(ft,lt){switch(wg(lt),lt.tag){case 1:return Zf(lt.type)&&$f(),ft=lt.flags,ft&65536?(lt.flags=ft&-65537|128,lt):null;case 3:return Jh(),E$6(Wf),E$6(H$5),Oh(),ft=lt.flags,ft&65536&&!(ft&128)?(lt.flags=ft&-65537|128,lt):null;case 5:return Lh(lt),null;case 13:if(E$6(M$2),ft=lt.memoizedState,ft!==null&&ft.dehydrated!==null){if(lt.alternate===null)throw Error(p$8(340));Ig()}return ft=lt.flags,ft&65536?(lt.flags=ft&-65537|128,lt):null;case 19:return E$6(M$2),null;case 4:return Jh(),null;case 10:return Rg(lt.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U$2=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V$3=null;function Mj(ft,lt){var dt=ft.ref;if(dt!==null)if(typeof dt=="function")try{dt(null)}catch(vt){W$4(ft,lt,vt)}else dt.current=null}function Nj(ft,lt,dt){try{dt()}catch(vt){W$4(ft,lt,vt)}}var Oj=!1;function Pj(ft,lt){if(Cf=dd,ft=Me$1(),Ne$2(ft)){if("selectionStart"in ft)var dt={start:ft.selectionStart,end:ft.selectionEnd};else e:{dt=(dt=ft.ownerDocument)&&dt.defaultView||window;var vt=dt.getSelection&&dt.getSelection();if(vt&&vt.rangeCount!==0){dt=vt.anchorNode;var Tt=vt.anchorOffset,Et=vt.focusNode;vt=vt.focusOffset;try{dt.nodeType,Et.nodeType}catch{dt=null;break e}var Ct=0,Rt=-1,kt=-1,Dt=0,Bt=0,Ft=ft,Ut=null;t:for(;;){for(var Zt;Ft!==dt||Tt!==0&&Ft.nodeType!==3||(Rt=Ct+Tt),Ft!==Et||vt!==0&&Ft.nodeType!==3||(kt=Ct+vt),Ft.nodeType===3&&(Ct+=Ft.nodeValue.length),(Zt=Ft.firstChild)!==null;)Ut=Ft,Ft=Zt;for(;;){if(Ft===ft)break t;if(Ut===dt&&++Dt===Tt&&(Rt=Ct),Ut===Et&&++Bt===vt&&(kt=Ct),(Zt=Ft.nextSibling)!==null)break;Ft=Ut,Ut=Ft.parentNode}Ft=Zt}dt=Rt===-1||kt===-1?null:{start:Rt,end:kt}}else dt=null}dt=dt||{start:0,end:0}}else dt=null;for(Df={focusedElem:ft,selectionRange:dt},dd=!1,V$3=lt;V$3!==null;)if(lt=V$3,ft=lt.child,(lt.subtreeFlags&1028)!==0&&ft!==null)ft.return=lt,V$3=ft;else for(;V$3!==null;){lt=V$3;try{var Kt=lt.alternate;if(lt.flags&1024)switch(lt.tag){case 0:case 11:case 15:break;case 1:if(Kt!==null){var ln=Kt.memoizedProps,hn=Kt.memoizedState,dn=lt.stateNode,pn=dn.getSnapshotBeforeUpdate(lt.elementType===lt.type?ln:Lg(lt.type,ln),hn);dn.__reactInternalSnapshotBeforeUpdate=pn}break;case 3:var mn=lt.stateNode.containerInfo;mn.nodeType===1?mn.textContent="":mn.nodeType===9&&mn.documentElement&&mn.removeChild(mn.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$8(163))}}catch(On){W$4(lt,lt.return,On)}if(ft=lt.sibling,ft!==null){ft.return=lt.return,V$3=ft;break}V$3=lt.return}return Kt=Oj,Oj=!1,Kt}function Qj(ft,lt,dt){var vt=lt.updateQueue;if(vt=vt!==null?vt.lastEffect:null,vt!==null){var Tt=vt=vt.next;do{if((Tt.tag&ft)===ft){var Et=Tt.destroy;Tt.destroy=void 0,Et!==void 0&&Nj(lt,dt,Et)}Tt=Tt.next}while(Tt!==vt)}}function Rj(ft,lt){if(lt=lt.updateQueue,lt=lt!==null?lt.lastEffect:null,lt!==null){var dt=lt=lt.next;do{if((dt.tag&ft)===ft){var vt=dt.create;dt.destroy=vt()}dt=dt.next}while(dt!==lt)}}function Sj(ft){var lt=ft.ref;if(lt!==null){var dt=ft.stateNode;switch(ft.tag){case 5:ft=dt;break;default:ft=dt}typeof lt=="function"?lt(ft):lt.current=ft}}function Tj(ft){var lt=ft.alternate;lt!==null&&(ft.alternate=null,Tj(lt)),ft.child=null,ft.deletions=null,ft.sibling=null,ft.tag===5&&(lt=ft.stateNode,lt!==null&&(delete lt[Of],delete lt[Pf],delete lt[of],delete lt[Qf],delete lt[Rf])),ft.stateNode=null,ft.return=null,ft.dependencies=null,ft.memoizedProps=null,ft.memoizedState=null,ft.pendingProps=null,ft.stateNode=null,ft.updateQueue=null}function Uj(ft){return ft.tag===5||ft.tag===3||ft.tag===4}function Vj(ft){e:for(;;){for(;ft.sibling===null;){if(ft.return===null||Uj(ft.return))return null;ft=ft.return}for(ft.sibling.return=ft.return,ft=ft.sibling;ft.tag!==5&&ft.tag!==6&&ft.tag!==18;){if(ft.flags&2||ft.child===null||ft.tag===4)continue e;ft.child.return=ft,ft=ft.child}if(!(ft.flags&2))return ft.stateNode}}function Wj(ft,lt,dt){var vt=ft.tag;if(vt===5||vt===6)ft=ft.stateNode,lt?dt.nodeType===8?dt.parentNode.insertBefore(ft,lt):dt.insertBefore(ft,lt):(dt.nodeType===8?(lt=dt.parentNode,lt.insertBefore(ft,dt)):(lt=dt,lt.appendChild(ft)),dt=dt._reactRootContainer,dt!=null||lt.onclick!==null||(lt.onclick=Bf));else if(vt!==4&&(ft=ft.child,ft!==null))for(Wj(ft,lt,dt),ft=ft.sibling;ft!==null;)Wj(ft,lt,dt),ft=ft.sibling}function Xj(ft,lt,dt){var vt=ft.tag;if(vt===5||vt===6)ft=ft.stateNode,lt?dt.insertBefore(ft,lt):dt.appendChild(ft);else if(vt!==4&&(ft=ft.child,ft!==null))for(Xj(ft,lt,dt),ft=ft.sibling;ft!==null;)Xj(ft,lt,dt),ft=ft.sibling}var X$2=null,Yj=!1;function Zj(ft,lt,dt){for(dt=dt.child;dt!==null;)ak(ft,lt,dt),dt=dt.sibling}function ak(ft,lt,dt){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,dt)}catch{}switch(dt.tag){case 5:U$2||Mj(dt,lt);case 6:var vt=X$2,Tt=Yj;X$2=null,Zj(ft,lt,dt),X$2=vt,Yj=Tt,X$2!==null&&(Yj?(ft=X$2,dt=dt.stateNode,ft.nodeType===8?ft.parentNode.removeChild(dt):ft.removeChild(dt)):X$2.removeChild(dt.stateNode));break;case 18:X$2!==null&&(Yj?(ft=X$2,dt=dt.stateNode,ft.nodeType===8?Kf(ft.parentNode,dt):ft.nodeType===1&&Kf(ft,dt),bd(ft)):Kf(X$2,dt.stateNode));break;case 4:vt=X$2,Tt=Yj,X$2=dt.stateNode.containerInfo,Yj=!0,Zj(ft,lt,dt),X$2=vt,Yj=Tt;break;case 0:case 11:case 14:case 15:if(!U$2&&(vt=dt.updateQueue,vt!==null&&(vt=vt.lastEffect,vt!==null))){Tt=vt=vt.next;do{var Et=Tt,Ct=Et.destroy;Et=Et.tag,Ct!==void 0&&(Et&2||Et&4)&&Nj(dt,lt,Ct),Tt=Tt.next}while(Tt!==vt)}Zj(ft,lt,dt);break;case 1:if(!U$2&&(Mj(dt,lt),vt=dt.stateNode,typeof vt.componentWillUnmount=="function"))try{vt.props=dt.memoizedProps,vt.state=dt.memoizedState,vt.componentWillUnmount()}catch(Rt){W$4(dt,lt,Rt)}Zj(ft,lt,dt);break;case 21:Zj(ft,lt,dt);break;case 22:dt.mode&1?(U$2=(vt=U$2)||dt.memoizedState!==null,Zj(ft,lt,dt),U$2=vt):Zj(ft,lt,dt);break;default:Zj(ft,lt,dt)}}function bk(ft){var lt=ft.updateQueue;if(lt!==null){ft.updateQueue=null;var dt=ft.stateNode;dt===null&&(dt=ft.stateNode=new Lj),lt.forEach(function(vt){var Tt=ck.bind(null,ft,vt);dt.has(vt)||(dt.add(vt),vt.then(Tt,Tt))})}}function dk(ft,lt){var dt=lt.deletions;if(dt!==null)for(var vt=0;vt<dt.length;vt++){var Tt=dt[vt];try{var Et=ft,Ct=lt,Rt=Ct;e:for(;Rt!==null;){switch(Rt.tag){case 5:X$2=Rt.stateNode,Yj=!1;break e;case 3:X$2=Rt.stateNode.containerInfo,Yj=!0;break e;case 4:X$2=Rt.stateNode.containerInfo,Yj=!0;break e}Rt=Rt.return}if(X$2===null)throw Error(p$8(160));ak(Et,Ct,Tt),X$2=null,Yj=!1;var kt=Tt.alternate;kt!==null&&(kt.return=null),Tt.return=null}catch(Dt){W$4(Tt,lt,Dt)}}if(lt.subtreeFlags&12854)for(lt=lt.child;lt!==null;)ek(lt,ft),lt=lt.sibling}function ek(ft,lt){var dt=ft.alternate,vt=ft.flags;switch(ft.tag){case 0:case 11:case 14:case 15:if(dk(lt,ft),fk(ft),vt&4){try{Qj(3,ft,ft.return),Rj(3,ft)}catch(ln){W$4(ft,ft.return,ln)}try{Qj(5,ft,ft.return)}catch(ln){W$4(ft,ft.return,ln)}}break;case 1:dk(lt,ft),fk(ft),vt&512&&dt!==null&&Mj(dt,dt.return);break;case 5:if(dk(lt,ft),fk(ft),vt&512&&dt!==null&&Mj(dt,dt.return),ft.flags&32){var Tt=ft.stateNode;try{ob(Tt,"")}catch(ln){W$4(ft,ft.return,ln)}}if(vt&4&&(Tt=ft.stateNode,Tt!=null)){var Et=ft.memoizedProps,Ct=dt!==null?dt.memoizedProps:Et,Rt=ft.type,kt=ft.updateQueue;if(ft.updateQueue=null,kt!==null)try{Rt==="input"&&Et.type==="radio"&&Et.name!=null&&ab(Tt,Et),vb(Rt,Ct);var Dt=vb(Rt,Et);for(Ct=0;Ct<kt.length;Ct+=2){var Bt=kt[Ct],Ft=kt[Ct+1];Bt==="style"?sb(Tt,Ft):Bt==="dangerouslySetInnerHTML"?nb(Tt,Ft):Bt==="children"?ob(Tt,Ft):ta(Tt,Bt,Ft,Dt)}switch(Rt){case"input":bb(Tt,Et);break;case"textarea":ib(Tt,Et);break;case"select":var Ut=Tt._wrapperState.wasMultiple;Tt._wrapperState.wasMultiple=!!Et.multiple;var Zt=Et.value;Zt!=null?fb(Tt,!!Et.multiple,Zt,!1):Ut!==!!Et.multiple&&(Et.defaultValue!=null?fb(Tt,!!Et.multiple,Et.defaultValue,!0):fb(Tt,!!Et.multiple,Et.multiple?[]:"",!1))}Tt[Pf]=Et}catch(ln){W$4(ft,ft.return,ln)}}break;case 6:if(dk(lt,ft),fk(ft),vt&4){if(ft.stateNode===null)throw Error(p$8(162));Tt=ft.stateNode,Et=ft.memoizedProps;try{Tt.nodeValue=Et}catch(ln){W$4(ft,ft.return,ln)}}break;case 3:if(dk(lt,ft),fk(ft),vt&4&&dt!==null&&dt.memoizedState.isDehydrated)try{bd(lt.containerInfo)}catch(ln){W$4(ft,ft.return,ln)}break;case 4:dk(lt,ft),fk(ft);break;case 13:dk(lt,ft),fk(ft),Tt=ft.child,Tt.flags&8192&&(Et=Tt.memoizedState!==null,Tt.stateNode.isHidden=Et,!Et||Tt.alternate!==null&&Tt.alternate.memoizedState!==null||(gk=B$2())),vt&4&&bk(ft);break;case 22:if(Bt=dt!==null&&dt.memoizedState!==null,ft.mode&1?(U$2=(Dt=U$2)||Bt,dk(lt,ft),U$2=Dt):dk(lt,ft),fk(ft),vt&8192){if(Dt=ft.memoizedState!==null,(ft.stateNode.isHidden=Dt)&&!Bt&&ft.mode&1)for(V$3=ft,Bt=ft.child;Bt!==null;){for(Ft=V$3=Bt;V$3!==null;){switch(Ut=V$3,Zt=Ut.child,Ut.tag){case 0:case 11:case 14:case 15:Qj(4,Ut,Ut.return);break;case 1:Mj(Ut,Ut.return);var Kt=Ut.stateNode;if(typeof Kt.componentWillUnmount=="function"){vt=Ut,dt=Ut.return;try{lt=vt,Kt.props=lt.memoizedProps,Kt.state=lt.memoizedState,Kt.componentWillUnmount()}catch(ln){W$4(vt,dt,ln)}}break;case 5:Mj(Ut,Ut.return);break;case 22:if(Ut.memoizedState!==null){hk(Ft);continue}}Zt!==null?(Zt.return=Ut,V$3=Zt):hk(Ft)}Bt=Bt.sibling}e:for(Bt=null,Ft=ft;;){if(Ft.tag===5){if(Bt===null){Bt=Ft;try{Tt=Ft.stateNode,Dt?(Et=Tt.style,typeof Et.setProperty=="function"?Et.setProperty("display","none","important"):Et.display="none"):(Rt=Ft.stateNode,kt=Ft.memoizedProps.style,Ct=kt!=null&&kt.hasOwnProperty("display")?kt.display:null,Rt.style.display=rb("display",Ct))}catch(ln){W$4(ft,ft.return,ln)}}}else if(Ft.tag===6){if(Bt===null)try{Ft.stateNode.nodeValue=Dt?"":Ft.memoizedProps}catch(ln){W$4(ft,ft.return,ln)}}else if((Ft.tag!==22&&Ft.tag!==23||Ft.memoizedState===null||Ft===ft)&&Ft.child!==null){Ft.child.return=Ft,Ft=Ft.child;continue}if(Ft===ft)break e;for(;Ft.sibling===null;){if(Ft.return===null||Ft.return===ft)break e;Bt===Ft&&(Bt=null),Ft=Ft.return}Bt===Ft&&(Bt=null),Ft.sibling.return=Ft.return,Ft=Ft.sibling}}break;case 19:dk(lt,ft),fk(ft),vt&4&&bk(ft);break;case 21:break;default:dk(lt,ft),fk(ft)}}function fk(ft){var lt=ft.flags;if(lt&2){try{e:{for(var dt=ft.return;dt!==null;){if(Uj(dt)){var vt=dt;break e}dt=dt.return}throw Error(p$8(160))}switch(vt.tag){case 5:var Tt=vt.stateNode;vt.flags&32&&(ob(Tt,""),vt.flags&=-33);var Et=Vj(ft);Xj(ft,Et,Tt);break;case 3:case 4:var Ct=vt.stateNode.containerInfo,Rt=Vj(ft);Wj(ft,Rt,Ct);break;default:throw Error(p$8(161))}}catch(kt){W$4(ft,ft.return,kt)}ft.flags&=-3}lt&4096&&(ft.flags&=-4097)}function ik(ft,lt,dt){V$3=ft,jk(ft)}function jk(ft,lt,dt){for(var vt=(ft.mode&1)!==0;V$3!==null;){var Tt=V$3,Et=Tt.child;if(Tt.tag===22&&vt){var Ct=Tt.memoizedState!==null||Kj;if(!Ct){var Rt=Tt.alternate,kt=Rt!==null&&Rt.memoizedState!==null||U$2;Rt=Kj;var Dt=U$2;if(Kj=Ct,(U$2=kt)&&!Dt)for(V$3=Tt;V$3!==null;)Ct=V$3,kt=Ct.child,Ct.tag===22&&Ct.memoizedState!==null?kk(Tt):kt!==null?(kt.return=Ct,V$3=kt):kk(Tt);for(;Et!==null;)V$3=Et,jk(Et),Et=Et.sibling;V$3=Tt,Kj=Rt,U$2=Dt}lk(ft)}else Tt.subtreeFlags&8772&&Et!==null?(Et.return=Tt,V$3=Et):lk(ft)}}function lk(ft){for(;V$3!==null;){var lt=V$3;if(lt.flags&8772){var dt=lt.alternate;try{if(lt.flags&8772)switch(lt.tag){case 0:case 11:case 15:U$2||Rj(5,lt);break;case 1:var vt=lt.stateNode;if(lt.flags&4&&!U$2)if(dt===null)vt.componentDidMount();else{var Tt=lt.elementType===lt.type?dt.memoizedProps:Lg(lt.type,dt.memoizedProps);vt.componentDidUpdate(Tt,dt.memoizedState,vt.__reactInternalSnapshotBeforeUpdate)}var Et=lt.updateQueue;Et!==null&&ih(lt,Et,vt);break;case 3:var Ct=lt.updateQueue;if(Ct!==null){if(dt=null,lt.child!==null)switch(lt.child.tag){case 5:dt=lt.child.stateNode;break;case 1:dt=lt.child.stateNode}ih(lt,Ct,dt)}break;case 5:var Rt=lt.stateNode;if(dt===null&&lt.flags&4){dt=Rt;var kt=lt.memoizedProps;switch(lt.type){case"button":case"input":case"select":case"textarea":kt.autoFocus&&dt.focus();break;case"img":kt.src&&(dt.src=kt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(lt.memoizedState===null){var Dt=lt.alternate;if(Dt!==null){var Bt=Dt.memoizedState;if(Bt!==null){var Ft=Bt.dehydrated;Ft!==null&&bd(Ft)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$8(163))}U$2||lt.flags&512&&Sj(lt)}catch(Ut){W$4(lt,lt.return,Ut)}}if(lt===ft){V$3=null;break}if(dt=lt.sibling,dt!==null){dt.return=lt.return,V$3=dt;break}V$3=lt.return}}function hk(ft){for(;V$3!==null;){var lt=V$3;if(lt===ft){V$3=null;break}var dt=lt.sibling;if(dt!==null){dt.return=lt.return,V$3=dt;break}V$3=lt.return}}function kk(ft){for(;V$3!==null;){var lt=V$3;try{switch(lt.tag){case 0:case 11:case 15:var dt=lt.return;try{Rj(4,lt)}catch(kt){W$4(lt,dt,kt)}break;case 1:var vt=lt.stateNode;if(typeof vt.componentDidMount=="function"){var Tt=lt.return;try{vt.componentDidMount()}catch(kt){W$4(lt,Tt,kt)}}var Et=lt.return;try{Sj(lt)}catch(kt){W$4(lt,Et,kt)}break;case 5:var Ct=lt.return;try{Sj(lt)}catch(kt){W$4(lt,Ct,kt)}}}catch(kt){W$4(lt,lt.return,kt)}if(lt===ft){V$3=null;break}var Rt=lt.sibling;if(Rt!==null){Rt.return=lt.return,V$3=Rt;break}V$3=lt.return}}var mk=Math.ceil,nk=ua.ReactCurrentDispatcher,ok=ua.ReactCurrentOwner,pk=ua.ReactCurrentBatchConfig,K$1=0,R$3=null,Y$1=null,Z$2=0,gj=0,fj=Uf(0),T$3=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L$3(){return K$1&6?B$2():Bk!==-1?Bk:Bk=B$2()}function lh(ft){return ft.mode&1?K$1&2&&Z$2!==0?Z$2&-Z$2:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):(ft=C$4,ft!==0||(ft=window.event,ft=ft===void 0?16:jd(ft.type)),ft):1}function mh(ft,lt,dt,vt){if(50<zk)throw zk=0,Ak=null,Error(p$8(185));Ac(ft,dt,vt),(!(K$1&2)||ft!==R$3)&&(ft===R$3&&(!(K$1&2)&&(rk|=dt),T$3===4&&Dk(ft,Z$2)),Ek(ft,vt),dt===1&&K$1===0&&!(lt.mode&1)&&(Hj=B$2()+500,fg&&jg()))}function Ek(ft,lt){var dt=ft.callbackNode;wc(ft,lt);var vt=uc(ft,ft===R$3?Z$2:0);if(vt===0)dt!==null&&bc(dt),ft.callbackNode=null,ft.callbackPriority=0;else if(lt=vt&-vt,ft.callbackPriority!==lt){if(dt!=null&&bc(dt),lt===1)ft.tag===0?ig(Fk.bind(null,ft)):hg(Fk.bind(null,ft)),Jf(function(){!(K$1&6)&&jg()}),dt=null;else{switch(Dc(vt)){case 1:dt=fc;break;case 4:dt=gc;break;case 16:dt=hc;break;case 536870912:dt=jc;break;default:dt=hc}dt=Gk(dt,Hk.bind(null,ft))}ft.callbackPriority=lt,ft.callbackNode=dt}}function Hk(ft,lt){if(Bk=-1,Ck=0,K$1&6)throw Error(p$8(327));var dt=ft.callbackNode;if(Ik()&&ft.callbackNode!==dt)return null;var vt=uc(ft,ft===R$3?Z$2:0);if(vt===0)return null;if(vt&30||vt&ft.expiredLanes||lt)lt=Jk(ft,vt);else{lt=vt;var Tt=K$1;K$1|=2;var Et=Kk();(R$3!==ft||Z$2!==lt)&&(vk=null,Hj=B$2()+500,Lk(ft,lt));do try{Mk();break}catch(Rt){Nk(ft,Rt)}while(1);Qg(),nk.current=Et,K$1=Tt,Y$1!==null?lt=0:(R$3=null,Z$2=0,lt=T$3)}if(lt!==0){if(lt===2&&(Tt=xc(ft),Tt!==0&&(vt=Tt,lt=Ok(ft,Tt))),lt===1)throw dt=qk,Lk(ft,0),Dk(ft,vt),Ek(ft,B$2()),dt;if(lt===6)Dk(ft,vt);else{if(Tt=ft.current.alternate,!(vt&30)&&!Pk(Tt)&&(lt=Jk(ft,vt),lt===2&&(Et=xc(ft),Et!==0&&(vt=Et,lt=Ok(ft,Et))),lt===1))throw dt=qk,Lk(ft,0),Dk(ft,vt),Ek(ft,B$2()),dt;switch(ft.finishedWork=Tt,ft.finishedLanes=vt,lt){case 0:case 1:throw Error(p$8(345));case 2:Qk(ft,uk,vk);break;case 3:if(Dk(ft,vt),(vt&130023424)===vt&&(lt=gk+500-B$2(),10<lt)){if(uc(ft,0)!==0)break;if(Tt=ft.suspendedLanes,(Tt&vt)!==vt){L$3(),ft.pingedLanes|=ft.suspendedLanes&Tt;break}ft.timeoutHandle=Ff(Qk.bind(null,ft,uk,vk),lt);break}Qk(ft,uk,vk);break;case 4:if(Dk(ft,vt),(vt&4194240)===vt)break;for(lt=ft.eventTimes,Tt=-1;0<vt;){var Ct=31-oc(vt);Et=1<<Ct,Ct=lt[Ct],Ct>Tt&&(Tt=Ct),vt&=~Et}if(vt=Tt,vt=B$2()-vt,vt=(120>vt?120:480>vt?480:1080>vt?1080:1920>vt?1920:3e3>vt?3e3:4320>vt?4320:1960*mk(vt/1960))-vt,10<vt){ft.timeoutHandle=Ff(Qk.bind(null,ft,uk,vk),vt);break}Qk(ft,uk,vk);break;case 5:Qk(ft,uk,vk);break;default:throw Error(p$8(329))}}}return Ek(ft,B$2()),ft.callbackNode===dt?Hk.bind(null,ft):null}function Ok(ft,lt){var dt=tk;return ft.current.memoizedState.isDehydrated&&(Lk(ft,lt).flags|=256),ft=Jk(ft,lt),ft!==2&&(lt=uk,uk=dt,lt!==null&&Gj(lt)),ft}function Gj(ft){uk===null?uk=ft:uk.push.apply(uk,ft)}function Pk(ft){for(var lt=ft;;){if(lt.flags&16384){var dt=lt.updateQueue;if(dt!==null&&(dt=dt.stores,dt!==null))for(var vt=0;vt<dt.length;vt++){var Tt=dt[vt],Et=Tt.getSnapshot;Tt=Tt.value;try{if(!He$2(Et(),Tt))return!1}catch{return!1}}}if(dt=lt.child,lt.subtreeFlags&16384&&dt!==null)dt.return=lt,lt=dt;else{if(lt===ft)break;for(;lt.sibling===null;){if(lt.return===null||lt.return===ft)return!0;lt=lt.return}lt.sibling.return=lt.return,lt=lt.sibling}}return!0}function Dk(ft,lt){for(lt&=~sk,lt&=~rk,ft.suspendedLanes|=lt,ft.pingedLanes&=~lt,ft=ft.expirationTimes;0<lt;){var dt=31-oc(lt),vt=1<<dt;ft[dt]=-1,lt&=~vt}}function Fk(ft){if(K$1&6)throw Error(p$8(327));Ik();var lt=uc(ft,0);if(!(lt&1))return Ek(ft,B$2()),null;var dt=Jk(ft,lt);if(ft.tag!==0&&dt===2){var vt=xc(ft);vt!==0&&(lt=vt,dt=Ok(ft,vt))}if(dt===1)throw dt=qk,Lk(ft,0),Dk(ft,lt),Ek(ft,B$2()),dt;if(dt===6)throw Error(p$8(345));return ft.finishedWork=ft.current.alternate,ft.finishedLanes=lt,Qk(ft,uk,vk),Ek(ft,B$2()),null}function Rk(ft,lt){var dt=K$1;K$1|=1;try{return ft(lt)}finally{K$1=dt,K$1===0&&(Hj=B$2()+500,fg&&jg())}}function Sk(ft){xk!==null&&xk.tag===0&&!(K$1&6)&&Ik();var lt=K$1;K$1|=1;var dt=pk.transition,vt=C$4;try{if(pk.transition=null,C$4=1,ft)return ft()}finally{C$4=vt,pk.transition=dt,K$1=lt,!(K$1&6)&&jg()}}function Ij(){gj=fj.current,E$6(fj)}function Lk(ft,lt){ft.finishedWork=null,ft.finishedLanes=0;var dt=ft.timeoutHandle;if(dt!==-1&&(ft.timeoutHandle=-1,Gf(dt)),Y$1!==null)for(dt=Y$1.return;dt!==null;){var vt=dt;switch(wg(vt),vt.tag){case 1:vt=vt.type.childContextTypes,vt!=null&&$f();break;case 3:Jh(),E$6(Wf),E$6(H$5),Oh();break;case 5:Lh(vt);break;case 4:Jh();break;case 13:E$6(M$2);break;case 19:E$6(M$2);break;case 10:Rg(vt.type._context);break;case 22:case 23:Ij()}dt=dt.return}if(R$3=ft,Y$1=ft=wh(ft.current,null),Z$2=gj=lt,T$3=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(lt=0;lt<Wg.length;lt++)if(dt=Wg[lt],vt=dt.interleaved,vt!==null){dt.interleaved=null;var Tt=vt.next,Et=dt.pending;if(Et!==null){var Ct=Et.next;Et.next=Tt,vt.next=Ct}dt.pending=vt}Wg=null}return ft}function Nk(ft,lt){do{var dt=Y$1;try{if(Qg(),Ph.current=ai,Sh){for(var vt=N$3.memoizedState;vt!==null;){var Tt=vt.queue;Tt!==null&&(Tt.pending=null),vt=vt.next}Sh=!1}if(Rh=0,P$4=O$4=N$3=null,Th=!1,Uh=0,ok.current=null,dt===null||dt.return===null){T$3=1,qk=lt,Y$1=null;break}e:{var Et=ft,Ct=dt.return,Rt=dt,kt=lt;if(lt=Z$2,Rt.flags|=32768,kt!==null&&typeof kt=="object"&&typeof kt.then=="function"){var Dt=kt,Bt=Rt,Ft=Bt.tag;if(!(Bt.mode&1)&&(Ft===0||Ft===11||Ft===15)){var Ut=Bt.alternate;Ut?(Bt.updateQueue=Ut.updateQueue,Bt.memoizedState=Ut.memoizedState,Bt.lanes=Ut.lanes):(Bt.updateQueue=null,Bt.memoizedState=null)}var Zt=Vi(Ct);if(Zt!==null){Zt.flags&=-257,Wi(Zt,Ct,Rt,Et,lt),Zt.mode&1&&Ti(Et,Dt,lt),lt=Zt,kt=Dt;var Kt=lt.updateQueue;if(Kt===null){var ln=new Set;ln.add(kt),lt.updateQueue=ln}else Kt.add(kt);break e}else{if(!(lt&1)){Ti(Et,Dt,lt),uj();break e}kt=Error(p$8(426))}}else if(I$4&&Rt.mode&1){var hn=Vi(Ct);if(hn!==null){!(hn.flags&65536)&&(hn.flags|=256),Wi(hn,Ct,Rt,Et,lt),Jg(Ki(kt,Rt));break e}}Et=kt=Ki(kt,Rt),T$3!==4&&(T$3=2),tk===null?tk=[Et]:tk.push(Et),Et=Ct;do{switch(Et.tag){case 3:Et.flags|=65536,lt&=-lt,Et.lanes|=lt;var dn=Oi(Et,kt,lt);fh(Et,dn);break e;case 1:Rt=kt;var pn=Et.type,mn=Et.stateNode;if(!(Et.flags&128)&&(typeof pn.getDerivedStateFromError=="function"||mn!==null&&typeof mn.componentDidCatch=="function"&&(Si===null||!Si.has(mn)))){Et.flags|=65536,lt&=-lt,Et.lanes|=lt;var On=Ri(Et,Rt,lt);fh(Et,On);break e}}Et=Et.return}while(Et!==null)}Tk(dt)}catch(bn){lt=bn,Y$1===dt&&dt!==null&&(Y$1=dt=dt.return);continue}break}while(1)}function Kk(){var ft=nk.current;return nk.current=ai,ft===null?ai:ft}function uj(){(T$3===0||T$3===3||T$3===2)&&(T$3=4),R$3===null||!(hh&268435455)&&!(rk&268435455)||Dk(R$3,Z$2)}function Jk(ft,lt){var dt=K$1;K$1|=2;var vt=Kk();(R$3!==ft||Z$2!==lt)&&(vk=null,Lk(ft,lt));do try{Uk();break}catch(Tt){Nk(ft,Tt)}while(1);if(Qg(),K$1=dt,nk.current=vt,Y$1!==null)throw Error(p$8(261));return R$3=null,Z$2=0,T$3}function Uk(){for(;Y$1!==null;)Vk(Y$1)}function Mk(){for(;Y$1!==null&&!cc();)Vk(Y$1)}function Vk(ft){var lt=Wk(ft.alternate,ft,gj);ft.memoizedProps=ft.pendingProps,lt===null?Tk(ft):Y$1=lt,ok.current=null}function Tk(ft){var lt=ft;do{var dt=lt.alternate;if(ft=lt.return,lt.flags&32768){if(dt=Jj(dt,lt),dt!==null){dt.flags&=32767,Y$1=dt;return}if(ft!==null)ft.flags|=32768,ft.subtreeFlags=0,ft.deletions=null;else{T$3=6,Y$1=null;return}}else if(dt=Fj(dt,lt,gj),dt!==null){Y$1=dt;return}if(lt=lt.sibling,lt!==null){Y$1=lt;return}Y$1=lt=ft}while(lt!==null);T$3===0&&(T$3=5)}function Qk(ft,lt,dt){var vt=C$4,Tt=pk.transition;try{pk.transition=null,C$4=1,Xk(ft,lt,dt,vt)}finally{pk.transition=Tt,C$4=vt}return null}function Xk(ft,lt,dt,vt){do Ik();while(xk!==null);if(K$1&6)throw Error(p$8(327));dt=ft.finishedWork;var Tt=ft.finishedLanes;if(dt===null)return null;if(ft.finishedWork=null,ft.finishedLanes=0,dt===ft.current)throw Error(p$8(177));ft.callbackNode=null,ft.callbackPriority=0;var Et=dt.lanes|dt.childLanes;if(Bc(ft,Et),ft===R$3&&(Y$1=R$3=null,Z$2=0),!(dt.subtreeFlags&2064)&&!(dt.flags&2064)||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),Et=(dt.flags&15990)!==0,dt.subtreeFlags&15990||Et){Et=pk.transition,pk.transition=null;var Ct=C$4;C$4=1;var Rt=K$1;K$1|=4,ok.current=null,Pj(ft,dt),ek(dt,ft),Oe$1(Df),dd=!!Cf,Df=Cf=null,ft.current=dt,ik(dt),dc(),K$1=Rt,C$4=Ct,pk.transition=Et}else ft.current=dt;if(wk&&(wk=!1,xk=ft,yk=Tt),Et=ft.pendingLanes,Et===0&&(Si=null),mc(dt.stateNode),Ek(ft,B$2()),lt!==null)for(vt=ft.onRecoverableError,dt=0;dt<lt.length;dt++)Tt=lt[dt],vt(Tt.value,{componentStack:Tt.stack,digest:Tt.digest});if(Pi)throw Pi=!1,ft=Qi,Qi=null,ft;return yk&1&&ft.tag!==0&&Ik(),Et=ft.pendingLanes,Et&1?ft===Ak?zk++:(zk=0,Ak=ft):zk=0,jg(),null}function Ik(){if(xk!==null){var ft=Dc(yk),lt=pk.transition,dt=C$4;try{if(pk.transition=null,C$4=16>ft?16:ft,xk===null)var vt=!1;else{if(ft=xk,xk=null,yk=0,K$1&6)throw Error(p$8(331));var Tt=K$1;for(K$1|=4,V$3=ft.current;V$3!==null;){var Et=V$3,Ct=Et.child;if(V$3.flags&16){var Rt=Et.deletions;if(Rt!==null){for(var kt=0;kt<Rt.length;kt++){var Dt=Rt[kt];for(V$3=Dt;V$3!==null;){var Bt=V$3;switch(Bt.tag){case 0:case 11:case 15:Qj(8,Bt,Et)}var Ft=Bt.child;if(Ft!==null)Ft.return=Bt,V$3=Ft;else for(;V$3!==null;){Bt=V$3;var Ut=Bt.sibling,Zt=Bt.return;if(Tj(Bt),Bt===Dt){V$3=null;break}if(Ut!==null){Ut.return=Zt,V$3=Ut;break}V$3=Zt}}}var Kt=Et.alternate;if(Kt!==null){var ln=Kt.child;if(ln!==null){Kt.child=null;do{var hn=ln.sibling;ln.sibling=null,ln=hn}while(ln!==null)}}V$3=Et}}if(Et.subtreeFlags&2064&&Ct!==null)Ct.return=Et,V$3=Ct;else e:for(;V$3!==null;){if(Et=V$3,Et.flags&2048)switch(Et.tag){case 0:case 11:case 15:Qj(9,Et,Et.return)}var dn=Et.sibling;if(dn!==null){dn.return=Et.return,V$3=dn;break e}V$3=Et.return}}var pn=ft.current;for(V$3=pn;V$3!==null;){Ct=V$3;var mn=Ct.child;if(Ct.subtreeFlags&2064&&mn!==null)mn.return=Ct,V$3=mn;else e:for(Ct=pn;V$3!==null;){if(Rt=V$3,Rt.flags&2048)try{switch(Rt.tag){case 0:case 11:case 15:Rj(9,Rt)}}catch(bn){W$4(Rt,Rt.return,bn)}if(Rt===Ct){V$3=null;break e}var On=Rt.sibling;if(On!==null){On.return=Rt.return,V$3=On;break e}V$3=Rt.return}}if(K$1=Tt,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,ft)}catch{}vt=!0}return vt}finally{C$4=dt,pk.transition=lt}}return!1}function Yk(ft,lt,dt){lt=Ki(dt,lt),lt=Oi(ft,lt,1),ft=dh(ft,lt,1),lt=L$3(),ft!==null&&(Ac(ft,1,lt),Ek(ft,lt))}function W$4(ft,lt,dt){if(ft.tag===3)Yk(ft,ft,dt);else for(;lt!==null;){if(lt.tag===3){Yk(lt,ft,dt);break}else if(lt.tag===1){var vt=lt.stateNode;if(typeof lt.type.getDerivedStateFromError=="function"||typeof vt.componentDidCatch=="function"&&(Si===null||!Si.has(vt))){ft=Ki(dt,ft),ft=Ri(lt,ft,1),lt=dh(lt,ft,1),ft=L$3(),lt!==null&&(Ac(lt,1,ft),Ek(lt,ft));break}}lt=lt.return}}function Ui(ft,lt,dt){var vt=ft.pingCache;vt!==null&&vt.delete(lt),lt=L$3(),ft.pingedLanes|=ft.suspendedLanes&dt,R$3===ft&&(Z$2&dt)===dt&&(T$3===4||T$3===3&&(Z$2&130023424)===Z$2&&500>B$2()-gk?Lk(ft,0):sk|=dt),Ek(ft,lt)}function Zk(ft,lt){lt===0&&(ft.mode&1?(lt=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):lt=1);var dt=L$3();ft=Zg(ft,lt),ft!==null&&(Ac(ft,lt,dt),Ek(ft,dt))}function vj(ft){var lt=ft.memoizedState,dt=0;lt!==null&&(dt=lt.retryLane),Zk(ft,dt)}function ck(ft,lt){var dt=0;switch(ft.tag){case 13:var vt=ft.stateNode,Tt=ft.memoizedState;Tt!==null&&(dt=Tt.retryLane);break;case 19:vt=ft.stateNode;break;default:throw Error(p$8(314))}vt!==null&&vt.delete(lt),Zk(ft,dt)}var Wk;Wk=function(ft,lt,dt){if(ft!==null)if(ft.memoizedProps!==lt.pendingProps||Wf.current)Ug=!0;else{if(!(ft.lanes&dt)&&!(lt.flags&128))return Ug=!1,zj(ft,lt,dt);Ug=!!(ft.flags&131072)}else Ug=!1,I$4&&lt.flags&1048576&&ug(lt,ng,lt.index);switch(lt.lanes=0,lt.tag){case 2:var vt=lt.type;jj(ft,lt),ft=lt.pendingProps;var Tt=Yf(lt,H$5.current);Tg(lt,dt),Tt=Xh(null,lt,vt,ft,Tt,dt);var Et=bi();return lt.flags|=1,typeof Tt=="object"&&Tt!==null&&typeof Tt.render=="function"&&Tt.$$typeof===void 0?(lt.tag=1,lt.memoizedState=null,lt.updateQueue=null,Zf(vt)?(Et=!0,cg(lt)):Et=!1,lt.memoizedState=Tt.state!==null&&Tt.state!==void 0?Tt.state:null,ah(lt),Tt.updater=nh,lt.stateNode=Tt,Tt._reactInternals=lt,rh(lt,vt,ft,dt),lt=kj(null,lt,vt,!0,Et,dt)):(lt.tag=0,I$4&&Et&&vg(lt),Yi(null,lt,Tt,dt),lt=lt.child),lt;case 16:vt=lt.elementType;e:{switch(jj(ft,lt),ft=lt.pendingProps,Tt=vt._init,vt=Tt(vt._payload),lt.type=vt,Tt=lt.tag=$k(vt),ft=Lg(vt,ft),Tt){case 0:lt=dj(null,lt,vt,ft,dt);break e;case 1:lt=ij(null,lt,vt,ft,dt);break e;case 11:lt=Zi(null,lt,vt,ft,dt);break e;case 14:lt=aj(null,lt,vt,Lg(vt.type,ft),dt);break e}throw Error(p$8(306,vt,""))}return lt;case 0:return vt=lt.type,Tt=lt.pendingProps,Tt=lt.elementType===vt?Tt:Lg(vt,Tt),dj(ft,lt,vt,Tt,dt);case 1:return vt=lt.type,Tt=lt.pendingProps,Tt=lt.elementType===vt?Tt:Lg(vt,Tt),ij(ft,lt,vt,Tt,dt);case 3:e:{if(lj(lt),ft===null)throw Error(p$8(387));vt=lt.pendingProps,Et=lt.memoizedState,Tt=Et.element,bh(ft,lt),gh(lt,vt,null,dt);var Ct=lt.memoizedState;if(vt=Ct.element,Et.isDehydrated)if(Et={element:vt,isDehydrated:!1,cache:Ct.cache,pendingSuspenseBoundaries:Ct.pendingSuspenseBoundaries,transitions:Ct.transitions},lt.updateQueue.baseState=Et,lt.memoizedState=Et,lt.flags&256){Tt=Ki(Error(p$8(423)),lt),lt=mj(ft,lt,vt,dt,Tt);break e}else if(vt!==Tt){Tt=Ki(Error(p$8(424)),lt),lt=mj(ft,lt,vt,dt,Tt);break e}else for(yg=Lf(lt.stateNode.containerInfo.firstChild),xg=lt,I$4=!0,zg=null,dt=Ch(lt,null,vt,dt),lt.child=dt;dt;)dt.flags=dt.flags&-3|4096,dt=dt.sibling;else{if(Ig(),vt===Tt){lt=$i(ft,lt,dt);break e}Yi(ft,lt,vt,dt)}lt=lt.child}return lt;case 5:return Kh(lt),ft===null&&Eg(lt),vt=lt.type,Tt=lt.pendingProps,Et=ft!==null?ft.memoizedProps:null,Ct=Tt.children,Ef(vt,Tt)?Ct=null:Et!==null&&Ef(vt,Et)&&(lt.flags|=32),hj(ft,lt),Yi(ft,lt,Ct,dt),lt.child;case 6:return ft===null&&Eg(lt),null;case 13:return pj(ft,lt,dt);case 4:return Ih(lt,lt.stateNode.containerInfo),vt=lt.pendingProps,ft===null?lt.child=Bh(lt,null,vt,dt):Yi(ft,lt,vt,dt),lt.child;case 11:return vt=lt.type,Tt=lt.pendingProps,Tt=lt.elementType===vt?Tt:Lg(vt,Tt),Zi(ft,lt,vt,Tt,dt);case 7:return Yi(ft,lt,lt.pendingProps,dt),lt.child;case 8:return Yi(ft,lt,lt.pendingProps.children,dt),lt.child;case 12:return Yi(ft,lt,lt.pendingProps.children,dt),lt.child;case 10:e:{if(vt=lt.type._context,Tt=lt.pendingProps,Et=lt.memoizedProps,Ct=Tt.value,G$1(Mg,vt._currentValue),vt._currentValue=Ct,Et!==null)if(He$2(Et.value,Ct)){if(Et.children===Tt.children&&!Wf.current){lt=$i(ft,lt,dt);break e}}else for(Et=lt.child,Et!==null&&(Et.return=lt);Et!==null;){var Rt=Et.dependencies;if(Rt!==null){Ct=Et.child;for(var kt=Rt.firstContext;kt!==null;){if(kt.context===vt){if(Et.tag===1){kt=ch(-1,dt&-dt),kt.tag=2;var Dt=Et.updateQueue;if(Dt!==null){Dt=Dt.shared;var Bt=Dt.pending;Bt===null?kt.next=kt:(kt.next=Bt.next,Bt.next=kt),Dt.pending=kt}}Et.lanes|=dt,kt=Et.alternate,kt!==null&&(kt.lanes|=dt),Sg(Et.return,dt,lt),Rt.lanes|=dt;break}kt=kt.next}}else if(Et.tag===10)Ct=Et.type===lt.type?null:Et.child;else if(Et.tag===18){if(Ct=Et.return,Ct===null)throw Error(p$8(341));Ct.lanes|=dt,Rt=Ct.alternate,Rt!==null&&(Rt.lanes|=dt),Sg(Ct,dt,lt),Ct=Et.sibling}else Ct=Et.child;if(Ct!==null)Ct.return=Et;else for(Ct=Et;Ct!==null;){if(Ct===lt){Ct=null;break}if(Et=Ct.sibling,Et!==null){Et.return=Ct.return,Ct=Et;break}Ct=Ct.return}Et=Ct}Yi(ft,lt,Tt.children,dt),lt=lt.child}return lt;case 9:return Tt=lt.type,vt=lt.pendingProps.children,Tg(lt,dt),Tt=Vg(Tt),vt=vt(Tt),lt.flags|=1,Yi(ft,lt,vt,dt),lt.child;case 14:return vt=lt.type,Tt=Lg(vt,lt.pendingProps),Tt=Lg(vt.type,Tt),aj(ft,lt,vt,Tt,dt);case 15:return cj(ft,lt,lt.type,lt.pendingProps,dt);case 17:return vt=lt.type,Tt=lt.pendingProps,Tt=lt.elementType===vt?Tt:Lg(vt,Tt),jj(ft,lt),lt.tag=1,Zf(vt)?(ft=!0,cg(lt)):ft=!1,Tg(lt,dt),ph(lt,vt,Tt),rh(lt,vt,Tt,dt),kj(null,lt,vt,!0,ft,dt);case 19:return yj(ft,lt,dt);case 22:return ej(ft,lt,dt)}throw Error(p$8(156,lt.tag))};function Gk(ft,lt){return ac(ft,lt)}function al(ft,lt,dt,vt){this.tag=ft,this.key=dt,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=lt,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=vt,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(ft,lt,dt,vt){return new al(ft,lt,dt,vt)}function bj(ft){return ft=ft.prototype,!(!ft||!ft.isReactComponent)}function $k(ft){if(typeof ft=="function")return bj(ft)?1:0;if(ft!=null){if(ft=ft.$$typeof,ft===Da)return 11;if(ft===Ga)return 14}return 2}function wh(ft,lt){var dt=ft.alternate;return dt===null?(dt=Bg(ft.tag,lt,ft.key,ft.mode),dt.elementType=ft.elementType,dt.type=ft.type,dt.stateNode=ft.stateNode,dt.alternate=ft,ft.alternate=dt):(dt.pendingProps=lt,dt.type=ft.type,dt.flags=0,dt.subtreeFlags=0,dt.deletions=null),dt.flags=ft.flags&14680064,dt.childLanes=ft.childLanes,dt.lanes=ft.lanes,dt.child=ft.child,dt.memoizedProps=ft.memoizedProps,dt.memoizedState=ft.memoizedState,dt.updateQueue=ft.updateQueue,lt=ft.dependencies,dt.dependencies=lt===null?null:{lanes:lt.lanes,firstContext:lt.firstContext},dt.sibling=ft.sibling,dt.index=ft.index,dt.ref=ft.ref,dt}function yh(ft,lt,dt,vt,Tt,Et){var Ct=2;if(vt=ft,typeof ft=="function")bj(ft)&&(Ct=1);else if(typeof ft=="string")Ct=5;else e:switch(ft){case ya:return Ah(dt.children,Tt,Et,lt);case za:Ct=8,Tt|=8;break;case Aa:return ft=Bg(12,dt,lt,Tt|2),ft.elementType=Aa,ft.lanes=Et,ft;case Ea:return ft=Bg(13,dt,lt,Tt),ft.elementType=Ea,ft.lanes=Et,ft;case Fa:return ft=Bg(19,dt,lt,Tt),ft.elementType=Fa,ft.lanes=Et,ft;case Ia:return qj(dt,Tt,Et,lt);default:if(typeof ft=="object"&&ft!==null)switch(ft.$$typeof){case Ba:Ct=10;break e;case Ca:Ct=9;break e;case Da:Ct=11;break e;case Ga:Ct=14;break e;case Ha:Ct=16,vt=null;break e}throw Error(p$8(130,ft==null?ft:typeof ft,""))}return lt=Bg(Ct,dt,lt,Tt),lt.elementType=ft,lt.type=vt,lt.lanes=Et,lt}function Ah(ft,lt,dt,vt){return ft=Bg(7,ft,vt,lt),ft.lanes=dt,ft}function qj(ft,lt,dt,vt){return ft=Bg(22,ft,vt,lt),ft.elementType=Ia,ft.lanes=dt,ft.stateNode={isHidden:!1},ft}function xh(ft,lt,dt){return ft=Bg(6,ft,null,lt),ft.lanes=dt,ft}function zh(ft,lt,dt){return lt=Bg(4,ft.children!==null?ft.children:[],ft.key,lt),lt.lanes=dt,lt.stateNode={containerInfo:ft.containerInfo,pendingChildren:null,implementation:ft.implementation},lt}function bl(ft,lt,dt,vt,Tt){this.tag=lt,this.containerInfo=ft,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=vt,this.onRecoverableError=Tt,this.mutableSourceEagerHydrationData=null}function cl(ft,lt,dt,vt,Tt,Et,Ct,Rt,kt){return ft=new bl(ft,lt,dt,Rt,kt),lt===1?(lt=1,Et===!0&&(lt|=8)):lt=0,Et=Bg(3,null,null,lt),ft.current=Et,Et.stateNode=ft,Et.memoizedState={element:vt,isDehydrated:dt,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(Et),ft}function dl(ft,lt,dt){var vt=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:vt==null?null:""+vt,children:ft,containerInfo:lt,implementation:dt}}function el(ft){if(!ft)return Vf;ft=ft._reactInternals;e:{if(Vb(ft)!==ft||ft.tag!==1)throw Error(p$8(170));var lt=ft;do{switch(lt.tag){case 3:lt=lt.stateNode.context;break e;case 1:if(Zf(lt.type)){lt=lt.stateNode.__reactInternalMemoizedMergedChildContext;break e}}lt=lt.return}while(lt!==null);throw Error(p$8(171))}if(ft.tag===1){var dt=ft.type;if(Zf(dt))return bg(ft,dt,lt)}return lt}function fl(ft,lt,dt,vt,Tt,Et,Ct,Rt,kt){return ft=cl(dt,vt,!0,ft,Tt,Et,Ct,Rt,kt),ft.context=el(null),dt=ft.current,vt=L$3(),Tt=lh(dt),Et=ch(vt,Tt),Et.callback=lt??null,dh(dt,Et,Tt),ft.current.lanes=Tt,Ac(ft,Tt,vt),Ek(ft,vt),ft}function gl(ft,lt,dt,vt){var Tt=lt.current,Et=L$3(),Ct=lh(Tt);return dt=el(dt),lt.context===null?lt.context=dt:lt.pendingContext=dt,lt=ch(Et,Ct),lt.payload={element:ft},vt=vt===void 0?null:vt,vt!==null&&(lt.callback=vt),ft=dh(Tt,lt,Ct),ft!==null&&(mh(ft,Tt,Ct,Et),eh(ft,Tt,Ct)),Ct}function hl(ft){if(ft=ft.current,!ft.child)return null;switch(ft.child.tag){case 5:return ft.child.stateNode;default:return ft.child.stateNode}}function il(ft,lt){if(ft=ft.memoizedState,ft!==null&&ft.dehydrated!==null){var dt=ft.retryLane;ft.retryLane=dt!==0&&dt<lt?dt:lt}}function jl(ft,lt){il(ft,lt),(ft=ft.alternate)&&il(ft,lt)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(ft){console.error(ft)};function ml(ft){this._internalRoot=ft}nl.prototype.render=ml.prototype.render=function(ft){var lt=this._internalRoot;if(lt===null)throw Error(p$8(409));gl(ft,lt,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var ft=this._internalRoot;if(ft!==null){this._internalRoot=null;var lt=ft.containerInfo;Sk(function(){gl(null,ft,null,null)}),lt[uf]=null}};function nl(ft){this._internalRoot=ft}nl.prototype.unstable_scheduleHydration=function(ft){if(ft){var lt=Hc();ft={blockedOn:null,target:ft,priority:lt};for(var dt=0;dt<Qc.length&&lt!==0&&lt<Qc[dt].priority;dt++);Qc.splice(dt,0,ft),dt===0&&Vc(ft)}};function ol(ft){return!(!ft||ft.nodeType!==1&&ft.nodeType!==9&&ft.nodeType!==11)}function pl(ft){return!(!ft||ft.nodeType!==1&&ft.nodeType!==9&&ft.nodeType!==11&&(ft.nodeType!==8||ft.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(ft,lt,dt,vt,Tt){if(Tt){if(typeof vt=="function"){var Et=vt;vt=function(){var Dt=hl(Ct);Et.call(Dt)}}var Ct=fl(lt,vt,ft,0,null,!1,!1,"",ql);return ft._reactRootContainer=Ct,ft[uf]=Ct.current,sf(ft.nodeType===8?ft.parentNode:ft),Sk(),Ct}for(;Tt=ft.lastChild;)ft.removeChild(Tt);if(typeof vt=="function"){var Rt=vt;vt=function(){var Dt=hl(kt);Rt.call(Dt)}}var kt=cl(ft,0,!1,null,null,!1,!1,"",ql);return ft._reactRootContainer=kt,ft[uf]=kt.current,sf(ft.nodeType===8?ft.parentNode:ft),Sk(function(){gl(lt,kt,dt,vt)}),kt}function sl(ft,lt,dt,vt,Tt){var Et=dt._reactRootContainer;if(Et){var Ct=Et;if(typeof Tt=="function"){var Rt=Tt;Tt=function(){var kt=hl(Ct);Rt.call(kt)}}gl(lt,Ct,ft,Tt)}else Ct=rl(dt,lt,ft,Tt,vt);return hl(Ct)}Ec=function(ft){switch(ft.tag){case 3:var lt=ft.stateNode;if(lt.current.memoizedState.isDehydrated){var dt=tc(lt.pendingLanes);dt!==0&&(Cc(lt,dt|1),Ek(lt,B$2()),!(K$1&6)&&(Hj=B$2()+500,jg()))}break;case 13:Sk(function(){var vt=Zg(ft,1);if(vt!==null){var Tt=L$3();mh(vt,ft,1,Tt)}}),jl(ft,1)}};Fc=function(ft){if(ft.tag===13){var lt=Zg(ft,134217728);if(lt!==null){var dt=L$3();mh(lt,ft,134217728,dt)}jl(ft,134217728)}};Gc=function(ft){if(ft.tag===13){var lt=lh(ft),dt=Zg(ft,lt);if(dt!==null){var vt=L$3();mh(dt,ft,lt,vt)}jl(ft,lt)}};Hc=function(){return C$4};Ic=function(ft,lt){var dt=C$4;try{return C$4=ft,lt()}finally{C$4=dt}};yb=function(ft,lt,dt){switch(lt){case"input":if(bb(ft,dt),lt=dt.name,dt.type==="radio"&&lt!=null){for(dt=ft;dt.parentNode;)dt=dt.parentNode;for(dt=dt.querySelectorAll("input[name="+JSON.stringify(""+lt)+'][type="radio"]'),lt=0;lt<dt.length;lt++){var vt=dt[lt];if(vt!==ft&&vt.form===ft.form){var Tt=Db(vt);if(!Tt)throw Error(p$8(90));Wa(vt),bb(vt,Tt)}}}break;case"textarea":ib(ft,dt);break;case"select":lt=dt.value,lt!=null&&fb(ft,!!dt.multiple,lt,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue$2,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(ft){return ft=Zb(ft),ft===null?null:ft.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(ft,lt){var dt=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(lt))throw Error(p$8(200));return dl(ft,lt,null,dt)};reactDom_production_min.createRoot=function(ft,lt){if(!ol(ft))throw Error(p$8(299));var dt=!1,vt="",Tt=ll;return lt!=null&&(lt.unstable_strictMode===!0&&(dt=!0),lt.identifierPrefix!==void 0&&(vt=lt.identifierPrefix),lt.onRecoverableError!==void 0&&(Tt=lt.onRecoverableError)),lt=cl(ft,1,!1,null,null,dt,!1,vt,Tt),ft[uf]=lt.current,sf(ft.nodeType===8?ft.parentNode:ft),new ml(lt)};reactDom_production_min.findDOMNode=function(ft){if(ft==null)return null;if(ft.nodeType===1)return ft;var lt=ft._reactInternals;if(lt===void 0)throw typeof ft.render=="function"?Error(p$8(188)):(ft=Object.keys(ft).join(","),Error(p$8(268,ft)));return ft=Zb(lt),ft=ft===null?null:ft.stateNode,ft};reactDom_production_min.flushSync=function(ft){return Sk(ft)};reactDom_production_min.hydrate=function(ft,lt,dt){if(!pl(lt))throw Error(p$8(200));return sl(null,ft,lt,!0,dt)};reactDom_production_min.hydrateRoot=function(ft,lt,dt){if(!ol(ft))throw Error(p$8(405));var vt=dt!=null&&dt.hydratedSources||null,Tt=!1,Et="",Ct=ll;if(dt!=null&&(dt.unstable_strictMode===!0&&(Tt=!0),dt.identifierPrefix!==void 0&&(Et=dt.identifierPrefix),dt.onRecoverableError!==void 0&&(Ct=dt.onRecoverableError)),lt=fl(lt,null,ft,1,dt??null,Tt,!1,Et,Ct),ft[uf]=lt.current,sf(ft),vt)for(ft=0;ft<vt.length;ft++)dt=vt[ft],Tt=dt._getVersion,Tt=Tt(dt._source),lt.mutableSourceEagerHydrationData==null?lt.mutableSourceEagerHydrationData=[dt,Tt]:lt.mutableSourceEagerHydrationData.push(dt,Tt);return new nl(lt)};reactDom_production_min.render=function(ft,lt,dt){if(!pl(lt))throw Error(p$8(200));return sl(null,ft,lt,!1,dt)};reactDom_production_min.unmountComponentAtNode=function(ft){if(!pl(ft))throw Error(p$8(40));return ft._reactRootContainer?(Sk(function(){sl(null,null,ft,!1,function(){ft._reactRootContainer=null,ft[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(ft,lt,dt,vt){if(!pl(dt))throw Error(p$8(200));if(ft==null||ft._reactInternals===void 0)throw Error(p$8(38));return sl(ft,lt,dt,!1,vt)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(ft){console.error(ft)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m$6=reactDomExports;client.createRoot=m$6.createRoot,client.hydrateRoot=m$6.hydrateRoot;const $3f95d3e171760903$var$canUseEffectHooks=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$3f95d3e171760903$var$useIsomorphicLayoutEffect=$3f95d3e171760903$var$canUseEffectHooks?reactExports.useLayoutEffect:()=>{};var $3f95d3e171760903$export$2e2bcd8739ae039=$3f95d3e171760903$var$useIsomorphicLayoutEffect;let $e504a2438473eda9$var$counter=0;function $e504a2438473eda9$export$2e2bcd8739ae039(ft=null){const lt=typeof reactExports.useId=="function"?reactExports.useId():null,dt=reactExports.useRef(ft||lt||null);return dt.current===null&&(dt.current=""+$e504a2438473eda9$var$counter++),dt.current}const $af466b485b9d515d$export$7d8c6d083caec74a=reactExports.createContext(null);$af466b485b9d515d$export$7d8c6d083caec74a.displayName="PanelGroupContext";function $c33df6d7c39fd3ee$var$PanelWithForwardedRef({children:ft=null,className:lt="",collapsible:dt=!1,defaultSize:vt=null,forwardedRef:Tt,id:Et=null,maxSize:Ct=100,minSize:Rt=10,onCollapse:kt=null,onResize:Dt=null,order:Bt=null,style:Ft={},tagName:Ut="div"}){const Zt=reactExports.useContext($af466b485b9d515d$export$7d8c6d083caec74a);if(Zt===null)throw Error("Panel components must be rendered within a PanelGroup container");const Kt=$e504a2438473eda9$export$2e2bcd8739ae039(Et),{collapsePanel:ln,expandPanel:hn,getPanelStyle:dn,registerPanel:pn,resizePanel:mn,unregisterPanel:On}=Zt,bn=reactExports.useRef({onCollapse:kt,onResize:Dt});if(reactExports.useEffect(()=>{bn.current.onCollapse=kt,bn.current.onResize=Dt}),Rt<0||Rt>100)throw Error(`Panel minSize must be between 0 and 100, but was ${Rt}`);if(Ct<0||Ct>100)throw Error(`Panel maxSize must be between 0 and 100, but was ${Ct}`);if(vt!==null){if(vt<0||vt>100)throw Error(`Panel defaultSize must be between 0 and 100, but was ${vt}`);Rt>vt&&!dt&&(console.error(`Panel minSize ${Rt} cannot be greater than defaultSize ${vt}`),vt=Rt)}$3f95d3e171760903$export$2e2bcd8739ae039(()=>(pn(Kt,{callbacksRef:bn,collapsible:dt,defaultSize:vt,id:Kt,maxSize:Ct,minSize:Rt,order:Bt}),()=>{On(Kt)}),[dt,vt,Kt,Ct,Rt,Bt,pn,On]);const En=dn(Kt),An=reactExports.useRef({size:$c33df6d7c39fd3ee$var$parseSizeFromStyle(En)});return $3f95d3e171760903$export$2e2bcd8739ae039(()=>{An.current.size=$c33df6d7c39fd3ee$var$parseSizeFromStyle(En)}),reactExports.useImperativeHandle(Tt,()=>({collapse:()=>ln(Kt),expand:()=>hn(Kt),getCollapsed(){return An.current.size===0},getSize(){return An.current.size},resize:Tn=>mn(Kt,Tn)}),[ln,hn,Kt,mn]),reactExports.createElement(Ut,{children:ft,className:lt,"data-panel":"","data-panel-collapsible":dt||void 0,"data-panel-id":Kt,"data-panel-size":parseFloat(""+En.flexGrow).toFixed(1),id:`data-panel-id-${Kt}`,style:{...En,...Ft}})}const $c33df6d7c39fd3ee$export$2ddb90ad54e5f587=reactExports.forwardRef((ft,lt)=>reactExports.createElement($c33df6d7c39fd3ee$var$PanelWithForwardedRef,{...ft,forwardedRef:lt}));$c33df6d7c39fd3ee$var$PanelWithForwardedRef.displayName="Panel";$c33df6d7c39fd3ee$export$2ddb90ad54e5f587.displayName="forwardRef(Panel)";function $c33df6d7c39fd3ee$var$parseSizeFromStyle(ft){const{flexGrow:lt}=ft;return typeof lt=="string"?parseFloat(lt):lt}function $6889c3a3ed41cfd1$var$getSerializationKey(ft){return ft.map(lt=>{const{minSize:dt,order:vt}=lt;return vt?`${vt}:${dt}`:`${dt}`}).sort((lt,dt)=>lt.localeCompare(dt)).join(",")}function $6889c3a3ed41cfd1$var$loadSerializedPanelGroupState(ft,lt){try{const dt=lt.getItem(`PanelGroup:sizes:${ft}`);if(dt){const vt=JSON.parse(dt);if(typeof vt=="object"&&vt!=null)return vt}}catch{}return null}function $6889c3a3ed41cfd1$export$9c80c6617f0386da(ft,lt,dt){const vt=$6889c3a3ed41cfd1$var$loadSerializedPanelGroupState(ft,dt);if(vt){const Et=$6889c3a3ed41cfd1$var$getSerializationKey(lt);var Tt;return(Tt=vt[Et])!==null&&Tt!==void 0?Tt:null}return null}function $6889c3a3ed41cfd1$export$af183b313c61be4f(ft,lt,dt,vt){const Tt=$6889c3a3ed41cfd1$var$getSerializationKey(lt),Et=$6889c3a3ed41cfd1$var$loadSerializedPanelGroupState(ft,vt)||{};Et[Tt]=dt;try{vt.setItem(`PanelGroup:sizes:${ft}`,JSON.stringify(Et))}catch(Ct){console.error(Ct)}}const $a8e83be196252871$export$d6d3992f3becc879=10;function $d6f7e4c3aa9e02d7$export$f50bae335f53943c(ft,lt,dt,vt,Tt,Et,Ct,Rt){const{sizes:kt}=Rt||{},Dt=kt||Et;if(Tt===0)return Dt;const Bt=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(lt),Ft=Dt.concat();let Ut=0;{const ln=Tt<0?vt:dt,hn=Bt.findIndex(On=>On.id===ln),dn=Bt[hn],pn=Dt[hn],mn=$d6f7e4c3aa9e02d7$var$safeResizePanel(dn,Math.abs(Tt),pn,ft);if(pn===mn)return Dt;mn===0&&pn>0&&Ct.set(ln,pn),Tt=Tt<0?pn-mn:mn-pn}let Zt=Tt<0?dt:vt,Kt=Bt.findIndex(ln=>ln.id===Zt);for(;;){const ln=Bt[Kt],hn=Dt[Kt],dn=Math.abs(Tt)-Math.abs(Ut),pn=$d6f7e4c3aa9e02d7$var$safeResizePanel(ln,0-dn,hn,ft);if(hn!==pn&&(pn===0&&hn>0&&Ct.set(ln.id,hn),Ut+=hn-pn,Ft[Kt]=pn,Ut.toPrecision($a8e83be196252871$export$d6d3992f3becc879).localeCompare(Math.abs(Tt).toPrecision($a8e83be196252871$export$d6d3992f3becc879),void 0,{numeric:!0})>=0))break;if(Tt<0){if(--Kt<0)break}else if(++Kt>=Bt.length)break}return Ut===0?Dt:(Zt=Tt<0?vt:dt,Kt=Bt.findIndex(ln=>ln.id===Zt),Ft[Kt]=Dt[Kt]+Ut,Ft)}function $d6f7e4c3aa9e02d7$export$b8e48269e4faa934(ft,lt,dt){dt.forEach((vt,Tt)=>{const Et=lt[Tt];if(Et!==vt){const{callbacksRef:Ct,collapsible:Rt}=ft[Tt],{onCollapse:kt,onResize:Dt}=Ct.current;Dt&&Dt(vt),Rt&&kt&&(!Et&&vt!==0?kt(!1):Et!==0&&vt===0&&kt(!0))}})}function $d6f7e4c3aa9e02d7$export$5a5b0c1d38c23c3b(ft,lt){if(lt.length<2)return[null,null];const dt=lt.findIndex(Ct=>Ct.id===ft);if(dt<0)return[null,null];const vt=dt===lt.length-1,Tt=vt?lt[dt-1].id:ft,Et=vt?ft:lt[dt+1].id;return[Tt,Et]}function $d6f7e4c3aa9e02d7$export$6f43503e166de6fb(ft,lt,dt){if(ft.size===1)return"100";const Tt=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(ft).findIndex(Ct=>Ct.id===lt),Et=dt[Tt];return Et==null?"0":Et.toPrecision($a8e83be196252871$export$d6d3992f3becc879)}function $d6f7e4c3aa9e02d7$export$7361ed18ff57179e(ft){const lt=document.querySelector(`[data-panel-id="${ft}"]`);return lt||null}function $d6f7e4c3aa9e02d7$export$5e67632cf3550a9c(ft){const lt=document.querySelector(`[data-panel-group-id="${ft}"]`);return lt||null}function $d6f7e4c3aa9e02d7$export$2e27d3a347680388(ft){const lt=document.querySelector(`[data-panel-resize-handle-id="${ft}"]`);return lt||null}function $d6f7e4c3aa9e02d7$export$96a40be80fb6c3c8(ft){const dt=$d6f7e4c3aa9e02d7$export$8d0cd3c32ddc045e().findIndex(vt=>vt.getAttribute("data-panel-resize-handle-id")===ft);return dt??null}function $d6f7e4c3aa9e02d7$export$8d0cd3c32ddc045e(){return Array.from(document.querySelectorAll("[data-panel-resize-handle-id]"))}function $d6f7e4c3aa9e02d7$export$ae14931f0a0256a3(ft){return Array.from(document.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${ft}"]`))}function $d6f7e4c3aa9e02d7$export$68d3a33c21dfbe27(ft,lt,dt){var vt,Tt;const Et=$d6f7e4c3aa9e02d7$export$2e27d3a347680388(lt),Rt=$d6f7e4c3aa9e02d7$export$ae14931f0a0256a3(ft).indexOf(Et);var kt;const Dt=(kt=(vt=dt[Rt])===null||vt===void 0?void 0:vt.id)!==null&&kt!==void 0?kt:null;var Bt;const Ft=(Bt=(Tt=dt[Rt+1])===null||Tt===void 0?void 0:Tt.id)!==null&&Bt!==void 0?Bt:null;return[Dt,Ft]}function $d6f7e4c3aa9e02d7$export$a861c0ad45885494(ft){return Array.from(ft.values()).sort((lt,dt)=>lt.order-dt.order)}function $d6f7e4c3aa9e02d7$var$safeResizePanel(ft,lt,dt,vt){const Tt=dt+lt;if(ft.collapsible)if(dt>0){if(Tt<=0)return 0}else{var Et;if(!(vt==null||(Et=vt.type)===null||Et===void 0?void 0:Et.startsWith("key"))&&Tt<ft.minSize)return 0}return Math.min(ft.maxSize,Math.max(ft.minSize,Tt))}function $8f51c2d77bf1da88$export$ec391ce65b083ed4(ft,lt,dt,vt=0,Tt=null){const Et=dt==="horizontal";let Ct=0;if($8f51c2d77bf1da88$export$764db16956f554f8(ft))Ct=Et?ft.clientX:ft.clientY;else if($8f51c2d77bf1da88$export$c4dfce035d43d1e0(ft)){const Bt=ft.touches[0];Ct=Et?Bt.screenX:Bt.screenY}else return 0;const Rt=$d6f7e4c3aa9e02d7$export$2e27d3a347680388(lt),kt=Tt||Rt.getBoundingClientRect(),Dt=Et?kt.left:kt.top;return Ct-Dt-vt}function $8f51c2d77bf1da88$export$354b17c0684607ed(ft,lt,dt,vt,Tt,Et,Ct){const{dragOffset:Rt=0,dragHandleRect:kt,sizes:Dt}=Ct||{},Bt=Dt||Et;if($8f51c2d77bf1da88$export$e7bf60a870f429b0(ft)){const Ft=Tt==="horizontal",Zt=$d6f7e4c3aa9e02d7$export$5e67632cf3550a9c(lt).getBoundingClientRect(),Kt=Ft?Zt.width:Zt.height,ln=ft.shiftKey?10:100,hn=Kt/ln;let dn=0;switch(ft.key){case"ArrowDown":dn=Ft?0:hn;break;case"ArrowLeft":dn=Ft?-hn:0;break;case"ArrowRight":dn=Ft?hn:0;break;case"ArrowUp":dn=Ft?0:-hn;break;case"End":dn=Kt;break;case"Home":dn=-Kt;break}const[pn,mn]=$d6f7e4c3aa9e02d7$export$68d3a33c21dfbe27(lt,dt,vt),On=dn<0?pn:mn,bn=vt.findIndex(An=>An.id===On),En=vt[bn];if(En.collapsible){const An=Bt[bn];(An===0||An.toPrecision($a8e83be196252871$export$d6d3992f3becc879)===En.minSize.toPrecision($a8e83be196252871$export$d6d3992f3becc879))&&(dn=dn<0?-En.minSize*Kt:En.minSize*Kt)}return dn}else return $8f51c2d77bf1da88$export$ec391ce65b083ed4(ft,dt,Tt,Rt,kt)}function $8f51c2d77bf1da88$export$e7bf60a870f429b0(ft){return ft.type==="keydown"}function $8f51c2d77bf1da88$export$764db16956f554f8(ft){return ft.type.startsWith("mouse")}function $8f51c2d77bf1da88$export$c4dfce035d43d1e0(ft){return ft.type.startsWith("touch")}function $4a90471e7083b52f$export$d9fcbe062527d159({committedValuesRef:ft,groupId:lt,panels:dt,setSizes:vt,sizes:Tt,panelSizeBeforeCollapse:Et}){reactExports.useEffect(()=>{const{direction:Ct,panels:Rt}=ft.current,kt=$d6f7e4c3aa9e02d7$export$5e67632cf3550a9c(lt),{height:Dt,width:Bt}=kt.getBoundingClientRect(),Ut=$d6f7e4c3aa9e02d7$export$ae14931f0a0256a3(lt).map(Zt=>{const Kt=Zt.getAttribute("data-panel-resize-handle-id"),ln=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(Rt),[hn,dn]=$d6f7e4c3aa9e02d7$export$68d3a33c21dfbe27(lt,Kt,ln);if(hn==null||dn==null)return()=>{};let pn=0,mn=100,On=0,bn=0;ln.forEach(Dn=>{Dn.id===hn?(mn=Dn.maxSize,pn=Dn.minSize):(On+=Dn.minSize,bn+=Dn.maxSize)});const En=Math.min(mn,100-On),An=Math.max(pn,(ln.length-1)*100-bn),Tn=$d6f7e4c3aa9e02d7$export$6f43503e166de6fb(Rt,hn,Tt);Zt.setAttribute("aria-valuemax",""+Math.round(En)),Zt.setAttribute("aria-valuemin",""+Math.round(An)),Zt.setAttribute("aria-valuenow",""+Math.round(parseInt(Tn)));const In=Dn=>{switch(Dn.key){case"Enter":{const Bn=ln.findIndex(Hn=>Hn.id===hn);if(Bn>=0){const Hn=ln[Bn],jn=Tt[Bn];if(jn!=null){let Kn=0;jn.toPrecision($a8e83be196252871$export$d6d3992f3becc879)<=Hn.minSize.toPrecision($a8e83be196252871$export$d6d3992f3becc879)?Kn=Ct==="horizontal"?Bt:Dt:Kn=-(Ct==="horizontal"?Bt:Dt);const zn=$d6f7e4c3aa9e02d7$export$f50bae335f53943c(Dn,Rt,hn,dn,Kn,Tt,Et.current,null);Tt!==zn&&vt(zn)}}break}}};Zt.addEventListener("keydown",In);const Rn=$d6f7e4c3aa9e02d7$export$7361ed18ff57179e(hn);return Rn!=null&&Zt.setAttribute("aria-controls",Rn.id),()=>{Zt.removeAttribute("aria-valuemax"),Zt.removeAttribute("aria-valuemin"),Zt.removeAttribute("aria-valuenow"),Zt.removeEventListener("keydown",In),Rn!=null&&Zt.removeAttribute("aria-controls")}});return()=>{Ut.forEach(Zt=>Zt())}},[lt,dt,Tt])}function $4a90471e7083b52f$export$33b0bea6ac3ffb03({disabled:ft,handleId:lt,resizeHandler:dt}){reactExports.useEffect(()=>{if(ft||dt==null)return;const vt=$d6f7e4c3aa9e02d7$export$2e27d3a347680388(lt);if(vt==null)return;const Tt=Et=>{switch(Et.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":dt(Et);break;case"F6":{const Ct=$d6f7e4c3aa9e02d7$export$8d0cd3c32ddc045e(),Rt=$d6f7e4c3aa9e02d7$export$96a40be80fb6c3c8(lt),kt=Et.shiftKey?Rt>0?Rt-1:Ct.length-1:Rt+1<Ct.length?Rt+1:0;Ct[kt].focus();break}}};return vt.addEventListener("keydown",Tt),()=>{vt.removeEventListener("keydown",Tt)}},[ft,lt,dt])}let $8d9d88bebf1a8ace$var$currentState=null,$8d9d88bebf1a8ace$var$element=null;function $8d9d88bebf1a8ace$export$fa35f3322c52262f(ft){switch(ft){case"horizontal":return"col-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"row-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function $8d9d88bebf1a8ace$export$b61932ee18f96e08(){$8d9d88bebf1a8ace$var$element!==null&&(document.head.removeChild($8d9d88bebf1a8ace$var$element),$8d9d88bebf1a8ace$var$currentState=null,$8d9d88bebf1a8ace$var$element=null)}function $8d9d88bebf1a8ace$export$d395b5dfd066a659(ft){if($8d9d88bebf1a8ace$var$currentState===ft)return;$8d9d88bebf1a8ace$var$currentState=ft;const lt=$8d9d88bebf1a8ace$export$fa35f3322c52262f(ft);$8d9d88bebf1a8ace$var$element===null&&($8d9d88bebf1a8ace$var$element=document.createElement("style"),document.head.appendChild($8d9d88bebf1a8ace$var$element)),$8d9d88bebf1a8ace$var$element.innerHTML=`*{cursor: ${lt}!important;}`}function $f7d932e9304c1581$export$2e2bcd8739ae039(ft,lt=10){let dt=null;return(...Tt)=>{clearTimeout(dt),dt=setTimeout(()=>{ft(...Tt)},lt)}}function $c892f0f705e6ded5$export$b141efd0b0fb9174(ft,lt){if(ft.length!==lt.length)return!1;for(let dt=0;dt<ft.length;dt++)if(ft[dt]!==lt[dt])return!1;return!0}const $3daa5d4c086ea816$var$savePanelGroupLayoutDebounced=$f7d932e9304c1581$export$2e2bcd8739ae039($6889c3a3ed41cfd1$export$af183b313c61be4f,100);function $3daa5d4c086ea816$var$throwServerError(){throw new Error('PanelGroup "storage" prop required for server rendering.')}const $3daa5d4c086ea816$var$defaultStorage={getItem:typeof localStorage<"u"?ft=>localStorage.getItem(ft):$3daa5d4c086ea816$var$throwServerError,setItem:typeof localStorage<"u"?(ft,lt)=>localStorage.setItem(ft,lt):$3daa5d4c086ea816$var$throwServerError};function $3daa5d4c086ea816$export$1d05749f6f573bb({autoSaveId:ft,children:lt=null,className:dt="",direction:vt,disablePointerEventsDuringResize:Tt=!1,id:Et=null,onLayout:Ct=null,storage:Rt=$3daa5d4c086ea816$var$defaultStorage,style:kt={},tagName:Dt="div"}){const Bt=$e504a2438473eda9$export$2e2bcd8739ae039(Et),[Ft,Ut]=reactExports.useState(null),[Zt,Kt]=reactExports.useState(new Map),ln=reactExports.useRef(null),hn=reactExports.useRef({onLayout:Ct});reactExports.useEffect(()=>{hn.current.onLayout=Ct});const[dn,pn]=reactExports.useState([]),mn=reactExports.useRef(new Map),On=reactExports.useRef(0),bn=reactExports.useRef({direction:vt,panels:Zt,sizes:dn});$3f95d3e171760903$export$2e2bcd8739ae039(()=>{bn.current.direction=vt,bn.current.panels=Zt,bn.current.sizes=dn}),$4a90471e7083b52f$export$d9fcbe062527d159({committedValuesRef:bn,groupId:Bt,panels:Zt,setSizes:pn,sizes:dn,panelSizeBeforeCollapse:mn}),reactExports.useEffect(()=>{const{onLayout:zn}=hn.current;if(zn){const{sizes:lr}=bn.current;lr.length>0&&zn(lr)}},[dn]);const En=reactExports.useRef(!1);$3f95d3e171760903$export$2e2bcd8739ae039(()=>{if(En.current)return;const{panels:zn,sizes:lr}=bn.current;if(lr.length>0){En.current=!0;const Ln=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(zn);$d6f7e4c3aa9e02d7$export$b8e48269e4faa934(Ln,[],lr)}},[dn]),$3f95d3e171760903$export$2e2bcd8739ae039(()=>{if(bn.current.sizes.length===Zt.size)return;let lr;if(ft){const Ln=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(Zt);lr=$6889c3a3ed41cfd1$export$9c80c6617f0386da(ft,Ln,Rt)}if(lr!=null)pn(lr);else{const Ln=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(Zt);let Vn=0,Wn=0,sr=0;if(Ln.forEach(Mn=>{sr+=Mn.minSize,Mn.defaultSize===null?Vn++:Wn+=Mn.defaultSize}),Wn>100)throw new Error("The sum of the defaultSize of all panels in a group cannot exceed 100.");if(sr>100)throw new Error("The sum of the minSize of all panels in a group cannot exceed 100.");pn(Ln.map(Mn=>Mn.defaultSize===null?(100-Wn)/Vn:Mn.defaultSize))}},[ft,Zt]),reactExports.useEffect(()=>{if(ft){if(dn.length===0||dn.length!==Zt.size)return;const zn=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(Zt);$3daa5d4c086ea816$var$savePanelGroupLayoutDebounced(ft,zn,dn,Rt)}},[ft,Zt,dn]);const An=reactExports.useCallback(zn=>{const{panels:lr}=bn.current;return lr.size===0?{flexBasis:"auto",flexGrow:1,flexShrink:1,overflow:"hidden"}:{flexBasis:0,flexGrow:$d6f7e4c3aa9e02d7$export$6f43503e166de6fb(lr,zn,dn),flexShrink:1,overflow:"hidden",pointerEvents:Tt&&Ft!==null?"none":void 0}},[Ft,vt,dn]),Tn=reactExports.useCallback((zn,lr)=>{Kt(Ln=>{if(Ln.has(zn))return Ln;const Vn=new Map(Ln);return Vn.set(zn,lr),Vn})},[]),In=reactExports.useCallback(zn=>Ln=>{Ln.preventDefault();const{direction:Vn,panels:Wn,sizes:sr}=bn.current,Mn=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(Wn),[ir,mr]=$d6f7e4c3aa9e02d7$export$68d3a33c21dfbe27(Bt,zn,Mn);if(ir==null||mr==null)return;const tr=$8f51c2d77bf1da88$export$354b17c0684607ed(Ln,Bt,zn,Mn,Vn,sr,ln.current);if(tr===0)return;const Sr=$d6f7e4c3aa9e02d7$export$5e67632cf3550a9c(Bt).getBoundingClientRect(),Vr=Vn==="horizontal",Jr=Vr?Sr.width:Sr.height,Yr=tr/Jr*100,_i=$d6f7e4c3aa9e02d7$export$f50bae335f53943c(Ln,Wn,ir,mr,Yr,sr,mn.current,ln.current),Er=!$c892f0f705e6ded5$export$b141efd0b0fb9174(sr,_i);($8f51c2d77bf1da88$export$764db16956f554f8(Ln)||$8f51c2d77bf1da88$export$c4dfce035d43d1e0(Ln))&&On.current!=Yr&&$8d9d88bebf1a8ace$export$d395b5dfd066a659(Er?Vr?"horizontal":"vertical":Vr?tr<0?"horizontal-min":"horizontal-max":tr<0?"vertical-min":"vertical-max"),Er&&($d6f7e4c3aa9e02d7$export$b8e48269e4faa934(Mn,sr,_i),pn(_i)),On.current=Yr},[Bt]),Rn=reactExports.useCallback(zn=>{Kt(lr=>{if(!lr.has(zn))return lr;const Ln=new Map(lr);return Ln.delete(zn),Ln})},[]),Dn=reactExports.useCallback(zn=>{const{panels:lr,sizes:Ln}=bn.current,Vn=lr.get(zn);if(Vn==null||!Vn.collapsible)return;const Wn=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(lr),sr=Wn.indexOf(Vn);if(sr<0)return;const Mn=Ln[sr];if(Mn===0)return;mn.current.set(zn,Mn);const[ir,mr]=$d6f7e4c3aa9e02d7$export$5a5b0c1d38c23c3b(zn,Wn);if(ir==null||mr==null)return;const Dr=sr===Wn.length-1?Mn:0-Mn,Sr=$d6f7e4c3aa9e02d7$export$f50bae335f53943c(null,lr,ir,mr,Dr,Ln,mn.current,null);Ln!==Sr&&($d6f7e4c3aa9e02d7$export$b8e48269e4faa934(Wn,Ln,Sr),pn(Sr))},[]),Bn=reactExports.useCallback(zn=>{const{panels:lr,sizes:Ln}=bn.current,Vn=lr.get(zn);if(Vn==null)return;const Wn=mn.current.get(zn)||Vn.minSize;if(!Wn)return;const sr=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(lr),Mn=sr.indexOf(Vn);if(Mn<0||Ln[Mn]!==0)return;const[mr,tr]=$d6f7e4c3aa9e02d7$export$5a5b0c1d38c23c3b(zn,sr);if(mr==null||tr==null)return;const Sr=Mn===sr.length-1?0-Wn:Wn,Vr=$d6f7e4c3aa9e02d7$export$f50bae335f53943c(null,lr,mr,tr,Sr,Ln,mn.current,null);Ln!==Vr&&($d6f7e4c3aa9e02d7$export$b8e48269e4faa934(sr,Ln,Vr),pn(Vr))},[]),Hn=reactExports.useCallback((zn,lr)=>{const{panels:Ln,sizes:Vn}=bn.current,Wn=Ln.get(zn);if(Wn==null)return;const sr=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(Ln),Mn=sr.indexOf(Wn);if(Mn<0)return;const ir=Vn[Mn];if(ir===lr)return;Wn.collapsible&&lr===0||(lr=Math.min(Wn.maxSize,Math.max(Wn.minSize,lr)));const[mr,tr]=$d6f7e4c3aa9e02d7$export$5a5b0c1d38c23c3b(zn,sr);if(mr==null||tr==null)return;const Sr=Mn===sr.length-1?ir-lr:lr-ir,Vr=$d6f7e4c3aa9e02d7$export$f50bae335f53943c(null,Ln,mr,tr,Sr,Vn,mn.current,null);Vn!==Vr&&($d6f7e4c3aa9e02d7$export$b8e48269e4faa934(sr,Vn,Vr),pn(Vr))},[]),jn=reactExports.useMemo(()=>({activeHandleId:Ft,collapsePanel:Dn,direction:vt,expandPanel:Bn,getPanelStyle:An,groupId:Bt,registerPanel:Tn,registerResizeHandle:In,resizePanel:Hn,startDragging:(zn,lr)=>{if(Ut(zn),$8f51c2d77bf1da88$export$764db16956f554f8(lr)||$8f51c2d77bf1da88$export$c4dfce035d43d1e0(lr)){const Ln=$d6f7e4c3aa9e02d7$export$2e27d3a347680388(zn);ln.current={dragHandleRect:Ln.getBoundingClientRect(),dragOffset:$8f51c2d77bf1da88$export$ec391ce65b083ed4(lr,zn,vt),sizes:bn.current.sizes}}},stopDragging:()=>{$8d9d88bebf1a8ace$export$b61932ee18f96e08(),Ut(null),ln.current=null},unregisterPanel:Rn}),[Ft,Dn,vt,Bn,An,Bt,Tn,In,Hn,Rn]),Kn={display:"flex",flexDirection:vt==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return reactExports.createElement($af466b485b9d515d$export$7d8c6d083caec74a.Provider,{children:reactExports.createElement(Dt,{children:lt,className:dt,"data-panel-group":"","data-panel-group-direction":vt,"data-panel-group-id":Bt,style:{...Kn,...kt}}),value:jn})}$3daa5d4c086ea816$export$1d05749f6f573bb.displayName="PanelGroup";function $971f2c37f9d2b98e$export$8829ecf6b6b15484({children:ft=null,className:lt="",disabled:dt=!1,id:vt=null,style:Tt={},tagName:Et="div"}){const Ct=reactExports.useRef(null),Rt=reactExports.useContext($af466b485b9d515d$export$7d8c6d083caec74a);if(Rt===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{activeHandleId:kt,direction:Dt,groupId:Bt,registerResizeHandle:Ft,startDragging:Ut,stopDragging:Zt}=Rt,Kt=$e504a2438473eda9$export$2e2bcd8739ae039(vt),ln=kt===Kt,[hn,dn]=reactExports.useState(!1),[pn,mn]=reactExports.useState(null),On=reactExports.useCallback(()=>{Ct.current.blur(),Zt()},[Zt]);reactExports.useEffect(()=>{if(dt)mn(null);else{const En=Ft(Kt);mn(()=>En)}},[dt,Kt,Ft]),reactExports.useEffect(()=>{if(dt||pn==null||!ln)return;const En=An=>{pn(An)};return document.body.addEventListener("contextmenu",On),document.body.addEventListener("mousemove",En),document.body.addEventListener("touchmove",En),window.addEventListener("mouseup",On),window.addEventListener("touchend",On),()=>{document.body.removeEventListener("contextmenu",On),document.body.removeEventListener("mousemove",En),document.body.removeEventListener("touchmove",En),window.removeEventListener("mouseup",On),window.removeEventListener("touchend",On)}},[Dt,dt,ln,pn,On]),$4a90471e7083b52f$export$33b0bea6ac3ffb03({disabled:dt,handleId:Kt,resizeHandler:pn});const bn={cursor:$8d9d88bebf1a8ace$export$fa35f3322c52262f(Dt),touchAction:"none",userSelect:"none"};return reactExports.createElement(Et,{children:ft,className:lt,"data-resize-handle-active":ln?"pointer":hn?"keyboard":void 0,"data-panel-group-direction":Dt,"data-panel-group-id":Bt,"data-panel-resize-handle-enabled":!dt,"data-panel-resize-handle-id":Kt,onBlur:()=>dn(!1),onFocus:()=>dn(!0),onMouseDown:En=>Ut(Kt,En.nativeEvent),onMouseUp:On,onTouchCancel:On,onTouchEnd:On,onTouchStart:En=>Ut(Kt,En.nativeEvent),ref:Ct,role:"separator",style:{...bn,...Tt},tabIndex:0})}$971f2c37f9d2b98e$export$8829ecf6b6b15484.displayName="PanelResizeHandle";var blockly$1={exports:{}},browser$1={exports:{}},coreBrowser={exports:{}},blockly={exports:{}},blockly_compressed={exports:{}},hasRequiredBlockly_compressed;function requireBlockly_compressed(){return hasRequiredBlockly_compressed||(hasRequiredBlockly_compressed=1,function(ft,lt){(function(dt,vt){ft.exports=vt()})(commonjsGlobal,function(){var dt={},vt=function(St,At,Nt,Wt){St=St+" was deprecated in "+At+" and will be deleted in "+Nt+".",Wt&&(St+=`
Use `+Wt+" instead."),console.warn(St)},Tt=function(St,At){Et(),s_=setTimeout(function(){At&&At.handleRightClick(St)},yS)},Et=function(){s_&&(clearTimeout(s_),s_=0)},Ct=function(){o_=null},Rt=function(St){return!St.type.startsWith("pointer")||St instanceof PointerEvent&&Dt(St)},kt=function(St){return`${St.pointerId}`},Dt=function(St){const At=kt(St);return o_?o_===At:St.type==="pointerdown"?(o_=At,!0):!1},Bt=function(St){if(vt("setClientFromTouch()","version 9","version 10"),St.type.startsWith("touch")&&St.changedTouches){const At=St.changedTouches[0];St.clientX=At.clientX,St.clientY=At.clientY}},Ft=function(St){return vt("isMouseOrTouchEvent()","version 9","version 10"),St.type.startsWith("touch")||St.type.startsWith("mouse")||St.type.startsWith("pointer")},Ut=function(St){return vt("isTouchEvent()","version 9","version 10"),St.type.startsWith("touch")||St.type.startsWith("pointer")},Zt=function(St){vt("splitEventByTouches()","version 9","version 10");const At=[];if(St.changedTouches)for(let Nt=0;Nt<St.changedTouches.length;Nt++)At[Nt]={type:St.type,changedTouches:[St.changedTouches[Nt]],target:St.target,stopPropagation(){St.stopPropagation()},preventDefault(){St.preventDefault()}};else At.push(St);return At},Kt=function(St,At,Nt,Wt,cn,vn){function Pn(qn){(cn||Rt(qn))&&(Nt?Wt.call(Nt,qn):Wt(qn))}if(vn!==void 0&&vt("The opt_noPreventDefault argument of conditionalBind","version 9","version 10"),vn=[],At in dp)for(let qn=0;qn<dp[At].length;qn++){const Ar=dp[At][qn];St.addEventListener(Ar,Pn,!1),vn.push([St,Ar,Pn])}else St.addEventListener(At,Pn,!1),vn.push([St,At,Pn]);return vn},ln=function(St,At,Nt,Wt){function cn(Pn){Nt?Wt.call(Nt,Pn):Wt(Pn)}const vn=[];if(At in dp)for(let Pn=0;Pn<dp[At].length;Pn++){const qn=dp[At][Pn];St.addEventListener(qn,cn,!1),vn.push([St,qn,cn])}else St.addEventListener(At,cn,!1),vn.push([St,At,cn]);return vn},hn=function(St){const At=St[St.length-1][2];for(;St.length;){const Nt=St.pop();Nt[0].removeEventListener(Nt[1],Nt[2],!1)}return At},dn=function(St){if(St.target instanceof HTMLElement){if(St.target.isContentEditable||St.target.getAttribute("data-is-text-input")==="true")return!0;if(St.target instanceof HTMLInputElement)return St=St.target,St.type==="text"||St.type==="number"||St.type==="email"||St.type==="password"||St.type==="search"||St.type==="tel"||St.type==="url";if(St.target instanceof HTMLTextAreaElement)return!0}return!1},pn=function(St){return St.ctrlKey&&yo?!0:St.button===2},mn=function(St,At,Nt){const Wt=At.createSVGPoint();return Wt.x=St.clientX,Wt.y=St.clientY,Nt||(Nt=At.getScreenCTM().inverse()),Wt.matrixTransform(Nt)},On=function(St){switch(St.deltaMode){default:return{x:St.deltaX,y:St.deltaY};case 1:return{x:St.deltaX*_r,y:St.deltaY*_r};case 2:return{x:St.deltaX*ur,y:St.deltaY*ur}}},bn=function(St){return po[St]||null},En=function(){const St=[];for(const At in po)St.push(po[At]);return St},An=function(St){po[St.id]=St},Tn=function(St){delete po[St.id]},In=function(){return Go},Rn=function(St){Go=St},Dn=function(){return Lo},Bn=function(St){Lo=St},Hn=function(){return Yo},jn=function(St){Yo=St},Kn=function(St){for(;St.options.parentWorkspace;)St=St.options.parentWorkspace;const At=St.getParentSvg(),Nt=St.getCachedParentSvgSize();var Wt=At.parentElement;if(Wt instanceof HTMLElement){var cn=Wt.offsetWidth;Wt=Wt.offsetHeight,Nt.width!==cn&&(At.setAttribute("width",cn+"px"),St.setCachedParentSvgSize(cn,null)),Nt.height!==Wt&&(At.setAttribute("height",Wt+"px"),St.setCachedParentSvgSize(null,Wt)),St.resize()}},zn=function(St,At){const Nt=Object.create(null),Wt=St.getDescendants(!0);At&&(St=St.getNextBlock())&&(St=Wt.indexOf(St),Wt.splice(St,Wt.length-St));for(let cn=0,vn;vn=Wt[cn];cn++)Nt[vn.type]?Nt[vn.type]++:Nt[vn.type]=1;return Nt},lr=function(St){return function(){this.jsonInit(St)}},Ln=function(St){jo.defineBlocksWithJsonArrayInternal(St)},Vn=function(St){sr(Wn(St))},Wn=function(St){const At={};for(let Nt=0;Nt<St.length;Nt++){const Wt=St[Nt];if(!Wt){console.warn(`Block definition #${Nt} in JSON array is ${Wt}. Skipping`);continue}const cn=Wt.type;cn?At[cn]={init:lr(Wt)}:console.warn(`Block definition #${Nt} in JSON array is missing a type attribute. Skipping.`)}return At},sr=function(St){for(const At of Object.keys(St)){const Nt=St[At];At in Xr&&console.warn(`Block definiton "${At}" overwrites previous definition.`),Xr[At]=Nt}},Mn=function(St,At,Nt){St=document.createElementNS(Wl,String(St));for(const Wt in At)St.setAttribute(Wt,`${At[Wt]}`);return Nt&&Nt.appendChild(St),St},ir=function(St,At){return At=At.split(" "),At.every(Nt=>St.classList.contains(Nt))?!1:(St.classList.add(...At),!0)},mr=function(St,At){St.classList.remove(...At.split(" "))},tr=function(St,At){return At=At.split(" "),At.every(Nt=>!St.classList.contains(Nt))?!1:(St.classList.remove(...At),!0)},Dr=function(St,At){return St.classList.contains(At)},Sr=function(St){return St&&St.parentNode?St.parentNode.removeChild(St):null},Vr=function(St,At){const Nt=At.nextSibling;if(At=At.parentNode,!At)throw Error("Reference node has no parent.");Nt?At.insertBefore(St,Nt):At.appendChild(St)},Jr=function(St,At){return!!(St.compareDocumentPosition(At)&fp.DOCUMENT_POSITION_CONTAINED_BY)},Yr=function(St,At){St.style.transform=At,St.style["-webkit-transform"]=At},_i=function(){vS++,Xu||(Xu=Object.create(null))},Er=function(){vS--,vS||(Xu=null)},kr=function(St){const At=St.textContent+`
`+St.className.baseVal;let Nt;if(Xu&&(Nt=Xu[At]))return Nt;try{Nt=St.getComputedTextLength()}catch{return 8*St.textContent.length}return Xu&&(Xu[At]=Nt),Nt},Qr=function(St,At,Nt,Wt){return so(St,At+"pt",Nt,Wt)},so=function(St,At,Nt,Wt){const cn=St.textContent;St=cn+`
`+St.className.baseVal;var vn;return Xu&&(vn=Xu[St])||(Sv||(vn=document.createElement("canvas"),vn.className="blocklyComputeCanvas",document.body.appendChild(vn),Sv=vn.getContext("2d")),Sv.font=Nt+" "+At+" "+Wt,vn=cn?Sv.measureText(cn).width:0,Xu&&(Xu[St]=vn)),vn},jr=function(St,At,Nt,Wt){const cn=document.createElement("span");cn.style.font=Nt+" "+At+" "+Wt,cn.textContent=St,St=document.createElement("div"),St.style.width="1px",St.style.height="0",At=document.createElement("div"),At.setAttribute("style","position: fixed; top: 0; left: 0; display: flex;"),At.appendChild(cn),At.appendChild(St),document.body.appendChild(At),Nt={height:0,baseline:0};try{At.style.alignItems="baseline",Nt.baseline=St.offsetTop-cn.offsetTop,At.style.alignItems="flex-end",Nt.height=St.offsetTop-cn.offsetTop}finally{document.body.removeChild(At)}return Nt},no=function(St){return St*Math.PI/180},uo=function(St){return 180*St/Math.PI},ho=function(St,At,Nt){if(Nt<St){const Wt=Nt;Nt=St,St=Wt}return Math.max(St,Math.min(At,Nt))},Po=function(St){return eT.getSizeInternal(St)},Wo=function(St){if(Un(St,"display")!=="none")return Xn(St);const At=St.style,Nt=At.display,Wt=At.visibility,cn=At.position;At.visibility="hidden",At.position="absolute",At.display="inline";const vn=St.offsetWidth;return St=St.offsetHeight,At.display=Nt,At.position=cn,At.visibility=Wt,new Ks(vn,St)},Xn=function(St){return new Ks(St.offsetWidth,St.offsetHeight)},Un=function(St,At){return St=window.getComputedStyle(St),St[At]||St.getPropertyValue(At)},rr=function(St,At){return vt("Blockly.utils.style.getCascadedStyle","version 9","version 10"),St.currentStyle?St.currentStyle[At]:""},yr=function(St){const At=new qr(0,0);St=St.getBoundingClientRect();var Nt=document.documentElement;return Nt=new qr(window.pageXOffset||Nt.scrollLeft,window.pageYOffset||Nt.scrollTop),At.x=St.left+Nt.x,At.y=St.top+Nt.y,At},Ir=function(){const St=document.body,At=document.documentElement;return new qr(St.scrollLeft||At.scrollLeft,St.scrollTop||At.scrollTop)},Fr=function(St){const At=parseFloat(Un(St,"borderLeftWidth")),Nt=parseFloat(Un(St,"borderRightWidth")),Wt=parseFloat(Un(St,"borderTopWidth"));return St=parseFloat(Un(St,"borderBottomWidth")),new ws(Wt,St,At,Nt)},pr=function(St,At,Nt){St=Zr(St,At,Nt),At.scrollLeft=St.x,At.scrollTop=St.y},Zr=function(St,At,Nt){var Wt=yr(St),cn=yr(At),vn=Fr(At);const Pn=Wt.x-cn.x-vn.left;return Wt=Wt.y-cn.y-vn.top,cn=Xn(St),St=At.clientWidth-cn.width,cn=At.clientHeight-cn.height,vn=At.scrollLeft,At=At.scrollTop,Nt?(vn+=Pn-St/2,At+=Wt-cn/2):(vn+=Math.min(Pn,Math.max(Pn-St,0)),At+=Math.min(Wt,Math.max(Wt-cn,0))),new qr(vn,At)},Cr=function(){qo||(qo=document.createElement("div"),qo.className="blocklyDropDownDiv",(Hn()||document.body).appendChild(qo),dO=document.createElement("div"),dO.className="blocklyDropDownContent",qo.appendChild(dO),l_=document.createElement("div"),l_.className="blocklyDropDownArrow",qo.appendChild(l_),qo.style.opacity="0",qo.style.transition="transform "+Tv+"s, opacity "+Tv+"s",qo.addEventListener("focusin",function(){ir(qo,"blocklyFocused")}),qo.addEventListener("focusout",function(){tr(qo,"blocklyFocused")}))},lo=function(St){TS=St},Jn=function(){return Om},Tr=function(){return dO},Nr=function(){dO.textContent="",dO.style.width=""},xn=function(St,At){qo.style.backgroundColor=St,qo.style.borderColor=At},Nn=function(St,At,Nt,Wt){return dr(hr(At),St,Nt,Wt)},Zn=function(St,At,Nt){return nT=!0,dr(Gn(St),St,At,Nt)},hr=function(St){var At=St.getSvgRoot();const Nt=St.workspace.scale,Wt=St.height*Nt;return St=St.width*Nt,At=yr(At),new ws(At.y,At.y+Wt,At.x,At.x+St)},Gn=function(St){return St=St.getScaledBBox(),new ws(St.top,St.bottom,St.left,St.right)},dr=function(St,At,Nt,Wt){const cn=St.left+(St.right-St.left)/2,vn=St.bottom;St=St.top,Wt&&(St+=Wt),Wt=At.getSourceBlock();let Pn=Wt.workspace;for(;Pn.options.parentWorkspace;)Pn=Pn.options.parentWorkspace;return lo(Pn.getParentSvg().parentNode),Br(At,Wt.RTL,cn,vn,cn,St,Nt)},Br=function(St,At,Nt,Wt,cn,vn,Pn){return Om=St,a_=Pn||null,qo.style.direction=At?"rtl":"ltr",St=In(),uO=St.getRenderer().getClassName(),hO=St.getTheme().getClassName(),uO&&ir(qo,uO),hO&&ir(qo,hO),Ml(Nt,Wt,cn,vn)},io=function(St,At,Nt,Wt){return St=cs(St,Nt.left,Nt.right,Wt.width),{initialX:St.divX,initialY:At,finalX:St.divX,finalY:At+SS,arrowX:St.arrowX,arrowY:-(Fy/2+bS),arrowAtTop:!0,arrowVisible:!0}},fo=function(St,At,Nt,Wt){return St=cs(St,Nt.left,Nt.right,Wt.width),{initialX:St.divX,initialY:At-Wt.height,finalX:St.divX,finalY:At-Wt.height-SS,arrowX:St.arrowX,arrowY:Wt.height-2*bS-Fy/2,arrowAtTop:!1,arrowVisible:!0}},rs=function(St,At,Nt){return St=cs(St,At.left,At.right,Nt.width),{initialX:St.divX,initialY:0,finalX:St.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},cs=function(St,At,Nt,Wt){return At=ho(At,St-Wt/2,Nt-Wt),St=St-Fy/2-At,Nt=tT,St=ho(Nt,St,Wt-Nt-Fy),{arrowX:St,divX:At}},Ns=function(){return!!Om},Us=function(St,At){return Om===St?(At?us():as(),!0):!1},as=function(){qo.style.transform="translate(0, 0)",qo.style.opacity="0",$S=setTimeout(function(){us()},1e3*Tv),a_&&(a_(),a_=null)},us=function(){Ns()&&($S&&clearTimeout($S),qo.style.transform="",qo.style.left="",qo.style.top="",qo.style.opacity="0",qo.style.display="none",qo.style.backgroundColor="",qo.style.borderColor="",a_&&(a_(),a_=null),Nr(),Om=null,uO&&(tr(qo,uO),uO=""),hO&&(tr(qo,hO),hO=""),In().markFocused())},Ml=function(St,At,Nt,Wt){St=ES.getPositionMetrics(St,At,Nt,Wt),St.arrowVisible?(l_.style.display="",l_.style.transform="translate("+St.arrowX+"px,"+St.arrowY+"px) rotate(45deg)",l_.setAttribute("class",St.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):l_.style.display="none",At=Math.floor(St.initialX),Nt=Math.floor(St.initialY),Wt=Math.floor(St.finalX);const cn=Math.floor(St.finalY);return qo.style.left=At+"px",qo.style.top=Nt+"px",qo.style.display="block",qo.style.opacity="1",qo.style.transform="translate("+(Wt-At)+"px,"+(cn-Nt)+"px)",!!St.arrowAtTop},LO=function(){if(Om){var St=Om.getSourceBlock();St=nT?Gn(Om):hr(St);const At=St.left+(St.right-St.left)/2;Ml(At,St.bottom,At,St.top)}else as()},wo=function(St,At,Nt,Wt){if(!(St instanceof Hr)&&typeof St!="string"||String(St).trim()==="")throw Error('Invalid type "'+St+'". The type must be a non-empty string or a Blockly.registry.Type.');if(St=String(St).toLowerCase(),typeof At!="string"||At.trim()==="")throw Error('Invalid name "'+At+'". The name must be a non-empty string.');const cn=At.toLowerCase();if(!Nt)throw Error("Can not register a null value");let vn=ym[St],Pn=Ev[St];if(vn||(vn=ym[St]=Object.create(null),Pn=Ev[St]=Object.create(null)),S_(St,Nt),!Wt&&vn[cn])throw Error('Name "'+cn+'" with type "'+St+'" already registered.');vn[cn]=Nt,Pn[cn]=At},S_=function(St,At){switch(St){case String(Hr.FIELD):if(typeof At.fromJson!="function")throw Error('Type "'+St+'" must have a fromJson function')}},Qn=function(St,At){St=String(St).toLowerCase(),At=At.toLowerCase();const Nt=ym[St];Nt&&Nt[At]?(delete ym[St][At],delete Ev[St][At]):console.warn("Unable to unregister ["+At+"]["+St+"] from the registry.")},Or=function(St,At,Nt){St=String(St).toLowerCase(),At=At.toLowerCase();const Wt=ym[St];if(!Wt||!Wt[At]){if(At="Unable to find ["+At+"]["+St+"] in the registry.",Nt)throw Error(At+" You must require or register a "+St+" plugin.");return console.warn(At),null}return Wt[At]},wr=function(St,At){return St=String(St).toLowerCase(),At=At.toLowerCase(),(St=ym[St])?!!St[At]:!1},fr=function(St,At,Nt){return Or(St,At,Nt)},Rr=function(St,At,Nt){return Or(St,At,Nt)},$o=function(St,At,Nt){St=String(St).toLowerCase();var Wt=ym[St];if(!Wt){if(Wt=`Unable to find [${St}] in the registry.`,Nt)throw Error(`${Wt} You must require or register a ${St} plugin.`);return console.warn(Wt),null}if(!At)return Wt;St=Ev[St],Nt=Object.create(null),At=Object.keys(Wt);for(let cn=0;cn<At.length;cn++){const vn=At[cn];Nt[St[vn]]=Wt[vn]}return Nt},So=function(St,At,Nt){return At=At.plugins[St.toString()]||Fp,typeof At=="function"?At:fr(St,At,Nt)},Do=function(){return"blockly-"+(zE++).toString(36)},xo=function(){return iT.genUid()},Io=function(St){Gy=St},Co=function(){return Gy},Gr=function(St){CS.fireInternal(St)},Os=function(St){ss()&&(_O.length||setTimeout(zs,0),_O.push(St))},zs=function(){const St=xl(_O,!0);_O.length=0;for(let At=0,Nt;Nt=St[At];At++){if(!Nt.workspaceId)continue;const Wt=bn(Nt.workspaceId);Wt&&Wt.fireChangeListener(Nt)}},xl=function(St,At){St=St.slice(),At||St.reverse();const Nt=[],Wt=Object.create(null);for(let Pn=0,qn;qn=St[Pn];Pn++)if(!qn.isNull()){var cn=[qn.isUiEvent?Vy:qn.type,qn.blockId,qn.workspaceId].join(" "),vn=Wt[cn];const Ar=vn?vn.event:null;vn?qn.type===Hl&&vn.index===Pn-1?(cn=qn,Ar.newParentId=cn.newParentId,Ar.newInputName=cn.newInputName,Ar.newCoordinate=cn.newCoordinate,vn.index=Pn):qn.type===Qs&&qn.element===Ar.element&&qn.name===Ar.name?Ar.newValue=qn.newValue:qn.type===u_?(vn=qn,Ar.viewTop=vn.viewTop,Ar.viewLeft=vn.viewLeft,Ar.scale=vn.scale,Ar.oldScale=vn.oldScale):(qn.type!==bm||Ar.type!==Gp)&&(Wt[cn]={event:qn,index:Pn},Nt.push(qn)):(Wt[cn]={event:qn,index:Pn},Nt.push(qn))}St=Nt.filter(function(Pn){return!Pn.isNull()}),At||St.reverse();for(let Pn=1,qn;qn=St[Pn];Pn++)qn.type===Qs&&qn.element==="mutation"&&St.unshift(St.splice(Pn,1)[0]);return St},lu=function(){for(let St=0,At;At=_O[St];St++)At.recordUndo=!1},Fo=function(){xS++},vo=function(){xS--},ss=function(){return xS===0},Ro=function(){return oT},oo=function(St){CS.setGroupInternal(St)},$_=function(St){oT=typeof St=="boolean"?St?xo():"":St},Yl=function(St){const At=[];St=St.getDescendants(!1);for(let Nt=0,Wt;Wt=St[Nt];Nt++)At[Nt]=Wt.id;return At},cu=function(St,At){var Nt=Wr(St.type);if(!Nt)throw Error("Unknown event type.");return hs(Nt)?Nt.fromJson(St,At):(Nt=new Nt,Nt.fromJson(St),Nt.workspaceId=At.id,Nt)},hs=function(St){return Object.getOwnPropertyDescriptors(St).fromJson&&typeof St.fromJson=="function"},Wr=function(St){const At=fr(Hr.EVENT,St);if(!At)throw Error(`Event type ${St} not found in registry.`);return At},Zo=function(St){if((St.type===Hl||St.type===Tl)&&St.workspaceId){var At=bn(St.workspaceId);if(!St.blockId)throw Error("Encountered a blockEvent without a proper blockId");if(St=At.getBlockById(St.blockId)){const Nt=Gy;try{Gy=!1;const Wt=St.getParent();if(Wt&&Wt.isEnabled()){const cn=St.getDescendants(!1);for(let vn=0,Pn;Pn=cn[vn];vn++)Pn.setEnabled(!0)}else if((St.outputConnection||St.previousConnection)&&!At.isDragging())do St.setEnabled(!1),St=St.getNextBlock();while(St)}finally{Gy=Nt}}}},ys=function(St){({document:d_=d_,DOMParser:Pv=Pv,XMLSerializer:Lv=Lv}=St)},Cs=function(){return vt("Blockly.utils.xml.getDocument","version 9","version 10"),d_},js=function(St){vt("Blockly.utils.xml.setDocument","version 9","version 10"),d_=St},Bo=function(St){return d_.createElementNS(AS,St)},Pl=function(St){return d_.createTextNode(St)},na=function(St){return new Pv().parseFromString(St,"text/xml")},wm=function(St){return new Lv().serializeToString(St)},Cm=function(St,At){sT(St,At)},C0=function(St){sT=St},Xp=function(St,At){cT.confirmInternal(St,At)},A0=function(St,At){aT(St,At)},uu=function(St){aT=St},DO=function(St,At,Nt){lT(St,At,Nt)},nS=function(St){lT=St},NO=function(St){St=St.getAllBlocks(!1);const At=new Set;for(let Nt=0;Nt<St.length;Nt++){const Wt=St[Nt].getVarModels();if(Wt)for(let cn=0;cn<Wt.length;cn++){const vn=Wt[cn];vn.getId()&&At.add(vn)}}return Array.from(At.values())},T_=function(St){St=St.getAllBlocks(!1);const At=new Set;for(let Wt=0,cn;cn=St[Wt];Wt++){var Nt=cn.getDeveloperVariables;if(Nt){Nt=Nt();for(let vn=0;vn<Nt.length;vn++)At.add(Nt[vn])}}return Array.from(At.values())},Yp=function(St){let At=[];const Nt=document.createElement("button");return Nt.setAttribute("text","%{BKY_NEW_VARIABLE}"),Nt.setAttribute("callbackKey","CREATE_VARIABLE"),St.registerButtonCallback("CREATE_VARIABLE",function(Wt){Sp(Wt.getTargetWorkspace())}),At.push(Nt),St=Zp(St),At=At.concat(St)},Zp=function(St){St=St.getVariablesOfType("");const At=[];if(0<St.length){var Nt=St[St.length-1];if(Xr.variables_set){var Wt=Bo("block");Wt.setAttribute("type","variables_set"),Wt.setAttribute("gap",Xr.math_change?"8":"24"),Wt.appendChild(Ho(Nt)),At.push(Wt)}if(Xr.math_change&&(Wt=Bo("block"),Wt.setAttribute("type","math_change"),Wt.setAttribute("gap",Xr.variables_get?"20":"8"),Wt.appendChild(Ho(Nt)),Nt=ga('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),Wt.appendChild(Nt),At.push(Wt)),Xr.variables_get){St.sort(Zy.compareByName);for(let cn=0,vn;vn=St[cn];cn++)Nt=Bo("block"),Nt.setAttribute("type","variables_get"),Nt.setAttribute("gap","8"),Nt.appendChild(Ho(vn)),At.push(Nt)}}return At},Am=function(St){return kS.generateUniqueNameInternal(St)},rS=function(St){return BO(Nv.charAt(0),St.getAllVariableNames())},BO=function(St,At){if(!At.length)return St;const Nt=Nv;let Wt="",cn=Nt.indexOf(St);for(;;){let vn=!1;for(let Pn=0;Pn<At.length;Pn++)if(At[Pn].toLowerCase()===St){vn=!0;break}if(!vn)break;cn++,cn===Nt.length&&(cn=0,Wt=`${Number(Wt)+1}`),St=Nt.charAt(cn)+Wt}return St},Sp=function(St,At,Nt){function Wt(vn){$p(To.NEW_VARIABLE_TITLE,vn,function(Pn){if(Pn){const qn=x_(Pn,St);if(qn){let Ar;qn.type===cn?Ar=To.VARIABLE_ALREADY_EXISTS.replace("%1",qn.name):(Ar=To.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,Ar=Ar.replace("%1",qn.name).replace("%2",qn.type)),Cm(Ar,function(){Wt(Pn)})}else St.createVariable(Pn,cn),At&&At(Pn)}else At&&At(null)})}const cn=Nt||"";Wt("")},E_=function(St,At,Nt){function Wt(cn){const vn=To.RENAME_VARIABLE_TITLE.replace("%1",At.name);$p(vn,cn,function(Pn){if(Pn){var qn=iS(Pn,At.type,St);qn?(qn=To.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",qn.name).replace("%2",qn.type),Cm(qn,function(){Wt(Pn)})):(St.renameVariableById(At.getId(),Pn),Nt&&Nt(Pn))}else Nt&&Nt(null)})}Wt("")},$p=function(St,At,Nt){DO(St,At,function(Wt){Wt&&(Wt=Wt.replace(/[\s\xa0]+/g," ").trim(),Wt===To.RENAME_VARIABLE||Wt===To.NEW_VARIABLE)&&(Wt=null),Nt(Wt)})},iS=function(St,At,Nt){Nt=Nt.getVariableMap().getAllVariables(),St=St.toLowerCase();for(let Wt=0,cn;cn=Nt[Wt];Wt++)if(cn.name.toLowerCase()===St&&cn.type!==At)return cn;return null},x_=function(St,At){At=At.getVariableMap().getAllVariables(),St=St.toLowerCase();for(let Nt=0,Wt;Wt=At[Nt];Nt++)if(Wt.name.toLowerCase()===St)return Wt;return null},Ho=function(St){const At=Bo("field");return At.setAttribute("name","VAR"),At.setAttribute("id",St.getId()),At.setAttribute("variabletype",St.type),St=Pl(St.name),At.appendChild(St),At},Im=function(St,At,Nt,Wt){let cn=qp(St,At,Nt,Wt);return cn||(cn=I0(St,At,Nt,Wt)),cn},qp=function(St,At,Nt,Wt){const cn=St.getPotentialVariableMap();let vn=null;if(At&&(vn=St.getVariableById(At),!vn&&cn&&(vn=cn.getVariableById(At)),vn))return vn;if(Nt){if(Wt===void 0)throw Error("Tried to look up a variable by name without a type");vn=St.getVariable(Nt,Wt),!vn&&cn&&(vn=cn.getVariable(Nt,Wt))}return vn},I0=function(St,At,Nt,Wt){const cn=St.getPotentialVariableMap();return Nt||(Nt=Am(St.isFlyout?St.targetWorkspace:St)),cn?cn.createVariable(Nt,Wt,At):St.createVariable(Nt,Wt,At)},FO=function(St,At){St=St.getAllVariables();const Nt=[];if(At.length!==St.length)for(let Wt=0;Wt<St.length;Wt++){const cn=St[Wt];At.indexOf(cn)===-1&&Nt.push(cn)}return Nt},hu=function(St){if(PS)throw Error("CSS already injected");LS+=`
`+St},Ms=function(St,At){PS||(PS=!0,St&&(St=At.replace(/[\\/]$/,""),At=LS.replace(/<<<PATH>>>/g,St),LS="",St=document.createElement("style"),St.id="blockly-common-style",At=document.createTextNode(At),St.appendChild(At),document.head.insertBefore(St,document.head.firstChild)))},Ll=function(St){const At=new qr(0,0);var Nt=St.x&&St.getAttribute("x");const Wt=St.y&&St.getAttribute("y");return Nt&&(At.x=parseInt(Nt)),Wt&&(At.y=parseInt(Wt)),(Nt=(Nt=St.getAttribute("transform"))&&Nt.match(uT))&&(At.x+=Number(Nt[1]),Nt[3]&&(At.y+=Number(Nt[3]))),(St=St.getAttribute("style"))&&-1<St.indexOf("translate")&&(St=St.match(hT))&&(At.x+=Number(St[1]),St[3]&&(At.y+=Number(St[3]))),At},w_=function(St){let At=0,Nt=0;for(;St;){const Wt=Ll(St);if(At+=Wt.x,Nt+=Wt.y,(" "+(St.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!==-1)break;St=St.parentNode}return new qr(At,Nt)},C_=function(){return vt("Blockly.utils.svgMath.is3dSupported","version 9","version 10"),!0},GO=function(){const St=Ir();return new ws(St.y,document.documentElement.clientHeight+St.y,St.x,document.documentElement.clientWidth+St.x)},Kp=function(){const St=document.documentElement,At=window;return new qr(At.pageXOffset||St.scrollLeft,At.pageYOffset||St.scrollTop)},du=function(St,At){var Nt=At.x;At=At.y;const Wt=St.getInjectionDiv().getBoundingClientRect();return Nt=new qr(Nt-Wt.left,At-Wt.top),At=St.getOriginOffsetInPixels(),qr.difference(Nt,At).scale(1/St.scale)},oS=function(St,At){const Nt=Bo("xml");var Wt=R0(NO(St));Wt.hasChildNodes()&&Nt.appendChild(Wt),Wt=St.getTopComments(!0);for(let cn=0;cn<Wt.length;cn++)Nt.appendChild(Wt[cn].toXmlWithXY(At));for(St=St.getTopBlocks(!0),Wt=0;Wt<St.length;Wt++)Nt.appendChild(Dl(St[Wt],At));return Nt},R0=function(St){const At=Bo("variables");for(let Nt=0;Nt<St.length;Nt++){const Wt=St[Nt],cn=Bo("variable");cn.appendChild(Pl(Wt.name)),Wt.type&&cn.setAttribute("type",Wt.type),cn.id=Wt.getId(),At.appendChild(cn)}return At},Dl=function(St,At){if(St.isInsertionMarker()&&(St=St.getChildren(!1)[0],!St))return new DocumentFragment;let Nt=0;St.workspace.RTL&&(Nt=St.workspace.getWidth()),At=Fu(St,At);const Wt=St.getRelativeToSurfaceXY();return At.setAttribute("x",Math.round(St.workspace.RTL?Nt-Wt.x:Wt.x)),At.setAttribute("y",Math.round(Wt.y)),At},Bu=function(St){if(St.isSerializable()){const At=Bo("field");return At.setAttribute("name",St.name||""),St.toXml(At)}return null},A_=function(St,At){for(let Nt=0;Nt<St.inputList.length;Nt++){const Wt=St.inputList[Nt];for(let cn=0;cn<Wt.fieldRow.length;cn++){const vn=Bu(Wt.fieldRow[cn]);vn&&At.appendChild(vn)}}},Fu=function(St,At){if(St.isInsertionMarker())return(At=St.getChildren(!1)[0])?Fu(At):new DocumentFragment;const Nt=Bo(St.isShadow()?"shadow":"block");if(Nt.setAttribute("type",St.type),At||Nt.setAttribute("id",St.id),St.mutationToDom){var Wt=St.mutationToDom();Wt&&(Wt.hasChildNodes()||Wt.hasAttributes())&&Nt.appendChild(Wt)}if(A_(St,Nt),Wt=St.getCommentText()){var cn=St.commentModel.size,vn=St.commentModel.pinned,Pn=Bo("comment");Pn.appendChild(Pl(Wt)),Pn.setAttribute("pinned",vn),Pn.setAttribute("h",cn.height),Pn.setAttribute("w",cn.width),Nt.appendChild(Pn)}for(St.data&&(Wt=Bo("data"),Wt.appendChild(Pl(St.data)),Nt.appendChild(Wt)),Wt=0;Wt<St.inputList.length;Wt++){cn=St.inputList[Wt];var qn=void 0;if(vn=!0,cn.type!==No.DUMMY){Pn=cn.connection.targetBlock(),cn.type===No.VALUE?qn=Bo("value"):cn.type===No.STATEMENT&&(qn=Bo("statement"));const Kr=cn.connection.getShadowDom();!Kr||Pn&&Pn.isShadow()||qn.appendChild(UO(Kr,At)),Pn&&(Pn=Fu(Pn,At),Pn.nodeType===fp.ELEMENT_NODE&&(qn.appendChild(Pn),vn=!1)),qn.setAttribute("name",cn.name),vn||Nt.appendChild(qn)}}St.inputsInline!==void 0&&St.inputsInline!==St.inputsInlineDefault&&Nt.setAttribute("inline",St.inputsInline.toString()),St.isCollapsed()&&Nt.setAttribute("collapsed","true"),St.isEnabled()||Nt.setAttribute("disabled","true"),St.isDeletable()||St.isShadow()||Nt.setAttribute("deletable","false"),St.isMovable()||St.isShadow()||Nt.setAttribute("movable","false"),St.isEditable()||Nt.setAttribute("editable","false"),qn=St.getNextBlock();let Ar;return qn&&(Wt=Fu(qn,At),Wt.nodeType===fp.ELEMENT_NODE&&(Ar=Bo("next"),Ar.appendChild(Wt),Nt.appendChild(Ar))),St=St.nextConnection&&St.nextConnection.getShadowDom(),!St||qn&&qn.isShadow()||Ar.appendChild(UO(St,At)),Nt},UO=function(St,At){let Nt=St=St.cloneNode(!0),Wt;for(;Nt;)if(At&&Nt.nodeName==="shadow"&&Nt.removeAttribute("id"),Nt.firstChild)Nt=Nt.firstChild;else{for(;Nt&&!Nt.nextSibling;){Wt=Nt,Nt=Nt.parentNode;let cn;Wt.nodeType===fp.TEXT_NODE&&Wt.data.trim()===""&&((cn=Nt)==null?void 0:cn.firstChild)!==Wt&&Sr(Wt)}Nt&&(Wt=Nt,Nt=Nt.nextSibling,Wt.nodeType===fp.TEXT_NODE&&Wt.data.trim()===""&&Sr(Wt))}return St},Zl=function(St){return wm(St).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},xu=function(St){St=Zl(St).split("<");let At="";for(let Nt=1;Nt<St.length;Nt++){const Wt=St[Nt];Wt[0]==="/"&&(At=At.substring(2)),St[Nt]=At+"<"+Wt,Wt[0]!=="/"&&Wt.slice(-2)!=="/>"&&(At+="  ")}return St=St.join(`
`),St=St.replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>"),St.replace(/^\n/,"")},ga=function(St){const At=na(St);if(!At||!At.documentElement||At.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+St);return At.documentElement},I_=function(St,At){return At.setResizesEnabled(!1),At.clear(),St=Rm(St,At),At.setResizesEnabled(!0),St},Rm=function(St,At){let Nt=0;At.RTL&&(Nt=At.getWidth());const Wt=[];_i();const cn=Ro();cn||oo(!0),At.setResizesEnabled&&At.setResizesEnabled(!1);let vn=!0;try{for(let Pn=0,qn;qn=St.childNodes[Pn];Pn++){const Ar=qn.nodeName.toLowerCase(),Kr=qn;if(Ar==="block"||Ar==="shadow"&&!Co()){const Xo=Gu(Kr,At);Wt.push(Xo.id);const _s=Kr.hasAttribute("x")?parseInt(Kr.getAttribute("x")):10,Eu=Kr.hasAttribute("y")?parseInt(Kr.getAttribute("y")):10;isNaN(_s)||isNaN(Eu)||Xo.moveBy(At.RTL?Nt-_s:_s,Eu),vn=!1}else{if(Ar==="shadow")throw TypeError("Shadow block cannot be a top-level block.");if(Ar==="comment")At.rendered?Il.fromXmlRendered(Kr,At,Nt):gp.fromXml(Kr,At);else if(Ar==="variables"){if(vn)km(Kr,At);else throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");vn=!1}}}}finally{cn||oo(!1),Er()}return At.setResizesEnabled&&At.setResizesEnabled(!0),Gr(new(Wr(gO))(At)),Wt},fu=function(St,At){if(!At.getBlocksBoundingBox)return Rm(St,At);var Nt=At.getBlocksBoundingBox();if(St=Rm(St,At),Nt&&Nt.top!==Nt.bottom){var Wt=Nt.bottom;Nt=At.RTL?Nt.right:Nt.left;var cn=1/0;let vn=-1/0,Pn=1/0;for(let qn=0;qn<St.length;qn++){const Ar=At.getBlockById(St[qn]).getRelativeToSurfaceXY();Ar.y<Pn&&(Pn=Ar.y),Ar.x<cn&&(cn=Ar.x),Ar.x>vn&&(vn=Ar.x)}for(Wt=Wt-Pn+10,Nt=At.RTL?Nt-vn:Nt-cn,cn=0;cn<St.length;cn++)At.getBlockById(St[cn]).moveBy(Nt,Wt)}return St},Gu=function(St,At){Fo();var Nt=At.getAllVariables();let Wt;try{if(Wt=Jl(St,At),At.rendered){const cn=Wt,vn=Wt.getDescendants(!1);cn.setConnectionTracking(!1);for(let Pn=vn.length-1;0<=Pn;Pn--)vn[Pn].initSvg();for(let Pn=vn.length-1;0<=Pn;Pn--)vn[Pn].render(!1);setTimeout(function(){cn.disposed||cn.setConnectionTracking(!0)},1),cn.updateDisabled(),At.resizeContents()}else{const cn=Wt.getDescendants(!1);for(let vn=cn.length-1;0<=vn;vn--)cn[vn].initModel()}}finally{vo()}if(ss()){for(St=FO(At,Nt),At=0;At<St.length;At++)Nt=St[At],Gr(new(Wr(c_))(Nt));Gr(new(Wr(Tl))(Wt))}return Wt},km=function(St,At){for(let Nt=0;Nt<St.children.length;Nt++){const Wt=St.children[Nt],cn=Wt.getAttribute("type"),vn=Wt.getAttribute("id");At.createVariable(Wt.textContent,cn,vn)}},Jp=function(St){const At={mutation:[],comment:[],data:[],field:[],input:[],next:[]};for(let Nt=0;Nt<St.children.length;Nt++){const Wt=St.children[Nt];if(Wt.nodeType!==fp.TEXT_NODE)switch(Wt.nodeName.toLowerCase()){case"mutation":At.mutation.push(Wt);break;case"comment":At.comment.push(Wt);break;case"data":At.data.push(Wt);break;case"title":case"field":At.field.push(Wt);break;case"value":case"statement":At.input.push(Wt);break;case"next":At.next.push(Wt);break;default:console.warn("Ignoring unknown tag: "+Wt.nodeName)}}return At},VO=function(St,At){let Nt=!1;for(let Wt=0;Wt<St.length;Wt++){const cn=St[Wt];At.domToMutation&&(At.domToMutation(cn),At.initSvg&&(Nt=!0))}return Nt},WO=function(St,At){for(let Wt=0;Wt<St.length;Wt++){var Nt=St[Wt];const cn=Nt.textContent,vn=Nt.getAttribute("pinned")==="true",Pn=parseInt(Nt.getAttribute("w"));if(Nt=parseInt(Nt.getAttribute("h")),At.setCommentText(cn),At.commentModel.pinned=vn,isNaN(Pn)||isNaN(Nt)||(At.commentModel.size=new Ks(Pn,Nt)),vn&&At.getCommentIcon&&!At.isInFlyout){const qn=At;setTimeout(function(){qn.getCommentIcon().setVisible(!0)},1)}}},k0=function(St,At){for(let Nt=0;Nt<St.length;Nt++)At.data=St[Nt].textContent},HO=function(St,At){for(let Nt=0;Nt<St.length;Nt++){const Wt=St[Nt],cn=Wt.getAttribute("name");tp(At,cn,Wt)}},R_=function(St){const At={childBlockElement:null,childShadowElement:null};for(let Nt=0;Nt<St.childNodes.length;Nt++){const Wt=St.childNodes[Nt];Wt.nodeType===fp.ELEMENT_NODE&&(Wt.nodeName.toLowerCase()==="block"?At.childBlockElement=Wt:Wt.nodeName.toLowerCase()==="shadow"&&(At.childShadowElement=Wt))}return At},em=function(St,At,Nt,Wt){for(let vn=0;vn<St.length;vn++){var cn=St[vn];const Pn=cn.getAttribute("name"),qn=Nt.getInput(Pn);if(!qn){console.warn("Ignoring non-existent input "+Pn+" in block "+Wt);break}if(cn=R_(cn),cn.childBlockElement){if(!qn.connection)throw TypeError("Input connection does not exist.");Jl(cn.childBlockElement,At,qn.connection,!1)}if(cn.childShadowElement){let Ar;(Ar=qn.connection)==null||Ar.setShadowDom(cn.childShadowElement)}}},Kl=function(St,At,Nt){for(let Wt=0;Wt<St.length;Wt++){const cn=R_(St[Wt]);if(cn.childBlockElement){if(!Nt.nextConnection)throw TypeError("Next statement does not exist.");if(Nt.nextConnection.isConnected())throw TypeError("Next statement is already connected.");Jl(cn.childBlockElement,At,Nt.nextConnection,!0)}cn.childShadowElement&&Nt.nextConnection&&Nt.nextConnection.setShadowDom(cn.childShadowElement)}},Jl=function(St,At,Nt,Wt){const cn=St.getAttribute("type");if(!cn)throw TypeError("Block type unspecified: "+St.outerHTML);var vn=St.getAttribute("id");vn=At.newBlock(cn,vn);const Pn=Jp(St),qn=VO(Pn.mutation,vn);if(WO(Pn.comment,vn),k0(Pn.data,vn),Nt)if(Wt)if(vn.previousConnection)Nt.connect(vn.previousConnection);else throw TypeError("Next block does not have previous statement.");else if(vn.outputConnection)Nt.connect(vn.outputConnection);else if(vn.previousConnection)Nt.connect(vn.previousConnection);else throw TypeError("Child block does not have output or previous statement.");if(HO(Pn.field,vn),em(Pn.input,At,vn,cn),Kl(Pn.next,At,vn),qn&&vn.initSvg(),(At=St.getAttribute("inline"))&&vn.setInputsInline(At==="true"),(At=St.getAttribute("disabled"))&&vn.setEnabled(At!=="true"&&At!=="disabled"),(At=St.getAttribute("deletable"))&&vn.setDeletable(At==="true"),(At=St.getAttribute("movable"))&&vn.setMovable(At==="true"),(At=St.getAttribute("editable"))&&vn.setEditable(At==="true"),(At=St.getAttribute("collapsed"))&&vn.setCollapsed(At==="true"),St.nodeName.toLowerCase()==="shadow"){for(St=vn.getChildren(!1),At=0;At<St.length;At++)if(!St[At].isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(vn.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");vn.setShadow(!0)}return vn},tp=function(St,At,Nt){const Wt=St.getField(At);Wt?Wt.fromXml(Nt):console.warn("Ignoring non-existent field "+At+" in block "+St.type)},QO=function(St){for(let At=0;At<St.childNodes.length;At++){const Nt=St.childNodes[At];if(Nt.nodeName.toLowerCase()==="next"){St.removeChild(Nt);break}}},M0=function(St,At){return vt("Blockly.utils.string.startsWith()","April 2022","April 2023","Use built-in string.startsWith"),St.startsWith(At)},_c=function(St){return St.length?St.reduce(function(At,Nt){return At.length<Nt.length?At:Nt}).length:0},Uu=function(St,At){if(!St.length)return 0;if(St.length===1)return St[0].length;let Nt=0;At=At||_c(St);let Wt;for(Wt=0;Wt<At;Wt++){for(var cn=St[0][Wt],vn=1;vn<St.length;vn++)if(cn!==St[vn][Wt])return Nt;cn===" "&&(Nt=Wt+1)}for(cn=1;cn<St.length;cn++)if((vn=St[cn][Wt])&&vn!==" ")return Nt;return At},Mm=function(St,At){if(!St.length)return 0;if(St.length===1)return St[0].length;let Nt=0;At=At||_c(St);let Wt;for(Wt=0;Wt<At;Wt++){for(var cn=St[0].substr(-Wt-1,1),vn=1;vn<St.length;vn++)if(cn!==St[vn].substr(-Wt-1,1))return Nt;cn===" "&&(Nt=Wt+1)}for(cn=1;cn<St.length;cn++)if((vn=St[cn].charAt(St[cn].length-Wt-1))&&vn!==" ")return Nt;return At},zO=function(St,At){St=St.split(`
`);for(let Nt=0;Nt<St.length;Nt++)St[Nt]=k_(St[Nt],At);return St.join(`
`)},k_=function(St,At){if(St.length<=At)return St;const Nt=St.trim().split(/\s+/);for(var Wt=0;Wt<Nt.length;Wt++)Nt[Wt].length>At&&(At=Nt[Wt].length);var cn=-1/0;let vn,Pn=1;do{Wt=cn,vn=St,St=[],cn=Nt.length/Pn;let qn=1;for(let Ar=0;Ar<Nt.length-1;Ar++)qn<(Ar+1.5)/cn?(qn++,St[Ar]=!0):St[Ar]=!1;St=jO(Nt,St,At),cn=M_(Nt,St,At),St=XO(Nt,St),Pn++}while(cn>Wt);return vn},M_=function(St,At,Nt){const Wt=[0],cn=[];for(var vn=0;vn<St.length;vn++)Wt[Wt.length-1]+=St[vn].length,At[vn]===!0?(Wt.push(0),cn.push(St[vn].charAt(St[vn].length-1))):At[vn]===!1&&Wt[Wt.length-1]++;for(St=Math.max(...Wt),At=0,vn=0;vn<Wt.length;vn++)At-=2*Math.pow(Math.abs(Nt-Wt[vn]),1.5),At-=Math.pow(St-Wt[vn],1.5),".?!".indexOf(cn[vn])!==-1?At+=Nt/3:",;)]}".indexOf(cn[vn])!==-1&&(At+=Nt/4);return 1<Wt.length&&Wt[Wt.length-1]<=Wt[Wt.length-2]&&(At+=.5),At},jO=function(St,At,Nt){let Wt=M_(St,At,Nt),cn;for(let vn=0;vn<At.length-1;vn++){if(At[vn]===At[vn+1])continue;const Pn=[].concat(At);Pn[vn]=!Pn[vn],Pn[vn+1]=!Pn[vn+1];const qn=M_(St,Pn,Nt);qn>Wt&&(Wt=qn,cn=Pn)}return cn?jO(St,cn,Nt):At},XO=function(St,At){const Nt=[];for(let Wt=0;Wt<St.length;Wt++)Nt.push(St[Wt]),At[Wt]!==void 0&&Nt.push(At[Wt]?`
`:" ");return Nt.join("")},Pm=function(St){return/^\s*-?\d+(\.\d+)?\s*$/.test(St)},P0=function(St){Fv=St},L0=function(){return Fv},D0=function(){return Ky},YO=function(){return Ls},wu=function(St){if(St=Tp(St)){for(St=St.tooltip;typeof St=="function";)St=St();if(typeof St!="string")throw Error("Tooltip function must return a string.");return St}return""},Tp=function(St){for(;St&&St.tooltip;){if(typeof St.tooltip=="string"||typeof St.tooltip=="function")return St;St=St.tooltip}return null},Lm=function(){Ls||(Ls=document.createElement("div"),Ls.className="blocklyTooltipDiv",(Hn()||document.body).appendChild(Ls))},Ep=function(St){St.mouseOverWrapper_=ln(St,"pointerover",null,eu),St.mouseOutWrapper_=ln(St,"pointerout",null,xp),St.addEventListener("pointermove",Cu,!1)},ba=function(St){St&&(hn(St.mouseOverWrapper_),hn(St.mouseOutWrapper_),St.removeEventListener("pointermove",Cu))},eu=function(St){yO||(St=Tp(St.currentTarget),Lu!==St&&(Nl(),e0=null,Lu=St),clearTimeout(fT))},xp=function(St){yO||(fT=setTimeout(function(){e0=Lu=null,Nl()},1),clearTimeout(Jy))},Cu=function(St){if(Lu&&Lu.tooltip&&!yO)if(Ky){const At=NS-St.pageX;St=BS-St.pageY,Math.sqrt(At*At+St*St)>pT&&Nl()}else e0!==Lu&&(clearTimeout(Jy),NS=St.pageX,BS=St.pageY,Jy=setTimeout(ds,mT))},Au=function(){e0=Lu=null,Nl()},Nl=function(){Ky&&(Ky=!1,Ls&&(Ls.style.display="none")),Jy&&clearTimeout(Jy)},ZO=function(){Nl(),yO=!0},P_=function(){yO=!1},qO=function(){Ls&&Lu&&(typeof Fv=="function"?Fv(Ls,Lu):Bl())},Bl=function(){var St=wu(Lu);St=zO(St,dT),St=St.split(`
`);for(let At=0;At<St.length;At++){const Nt=document.createElement("div");Nt.appendChild(document.createTextNode(St[At])),Ls.appendChild(Nt)}},Fl=function(St){const At=document.documentElement.clientWidth,Nt=document.documentElement.clientHeight;let Wt=NS;Wt=St?Wt-(FS+Ls.offsetWidth):Wt+FS;let cn=BS+GS;return cn+Ls.offsetHeight>Nt+window.scrollY&&(cn-=Ls.offsetHeight+2*GS),St?Wt=Math.max(Gv-window.scrollX,Wt):Wt+Ls.offsetWidth>At+window.scrollX-2*Gv&&(Wt=At-Ls.offsetWidth-2*Gv),{x:Wt,y:cn}},ds=function(){if(!yO&&(e0=Lu,Ls)){Ls.textContent="",qO();var St=Lu.RTL;Ls.style.direction=St?"rtl":"ltr",Ls.style.display="block",Ky=!0;var{x:At,y:Nt}=Fl(St);Ls.style.left=At+"px",Ls.style.top=Nt+"px"}},tm=function(){return US},pu=function(St){US=St},KO=function(){return VS},N0=function(St){VS=St},Vu=function(St){St=String(St).toLowerCase().trim();var At=gT[St];if(At||(At=St.substring(0,2)==="0x"?"#"+St.substring(2):St,At=At[0]==="#"?At:"#"+At,/^#[0-9a-f]{6}$/.test(At)))return At;if(/^#[0-9a-f]{3}$/.test(At))return["#",At[1],At[1],At[2],At[2],At[3],At[3]].join("");var Nt=St.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return Nt&&(St=Number(Nt[1]),At=Number(Nt[2]),Nt=Number(Nt[3]),0<=St&&256>St&&0<=At&&256>At&&0<=Nt&&256>Nt)?nm(St,At,Nt):null},nm=function(St,At,Nt){return At=St<<16|At<<8|Nt,16>St?"#"+(16777216|At).toString(16).substr(1):"#"+At.toString(16)},L_=function(St){return St=Vu(St),St?(St=parseInt(St.substr(1),16),[St>>16,St>>8&255,St&255]):[0,0,0]},wp=function(St,At,Nt){let Wt=0,cn=0,vn=0;if(At===0)vn=cn=Wt=Nt;else{const Pn=Math.floor(St/60),qn=St/60-Pn;St=Nt*(1-At);const Ar=Nt*(1-At*qn);switch(At=Nt*(1-At*(1-qn)),Pn){case 1:Wt=Ar,cn=Nt,vn=St;break;case 2:Wt=St,cn=Nt,vn=At;break;case 3:Wt=St,cn=Ar,vn=Nt;break;case 4:Wt=At,cn=St,vn=Nt;break;case 5:Wt=Nt,cn=St,vn=Ar;break;case 6:case 0:Wt=Nt,cn=At,vn=St}}return nm(Math.floor(Wt),Math.floor(cn),Math.floor(vn))},mu=function(St,At,Nt){return St=Vu(St),!St||(At=Vu(At),!At)?null:(St=L_(St),At=L_(At),nm(Math.round(At[0]+Nt*(St[0]-At[0])),Math.round(At[1]+Nt*(St[1]-At[1])),Math.round(At[2]+Nt*(St[2]-At[2]))))},Dm=function(St){return wp(St,US,255*VS)},Cp=function(St,At){const Nt=[];var Wt=St.split("");Wt.push("");var cn=0;St=[];let vn=null;for(let Ar=0;Ar<Wt.length;Ar++){var Pn=Wt[Ar];if(cn===0)Pn==="%"?((cn=St.join(""))&&Nt.push(cn),St.length=0,cn=1):St.push(Pn);else if(cn===1)Pn==="%"?(St.push(Pn),cn=0):At&&"0"<=Pn&&"9">=Pn?(cn=2,vn=Pn,(Pn=St.join(""))&&Nt.push(Pn),St.length=0):Pn==="{"?cn=3:(St.push("%",Pn),cn=0);else if(cn===2)if("0"<=Pn&&"9">=Pn)vn+=Pn;else{var qn=void 0;Nt.push(parseInt((qn=vn)!=null?qn:"",10)),Ar--,cn=0}else cn===3&&(Pn===""?(St.splice(0,0,"%{"),Ar--,cn=0):Pn!=="}"?St.push(Pn):(cn=St.join(""),/[A-Z]\w*/i.test(cn)?(Pn=cn.toUpperCase(),(Pn=Pn.startsWith("BKY_")?Pn.substring(4):null)&&Pn in To?(cn=To[Pn],typeof cn=="string"?Array.prototype.push.apply(Nt,Cp(cn,At)):At?Nt.push(String(cn)):Nt.push(cn)):Nt.push("%{"+cn+"}")):Nt.push("%{"+cn+"}"),cn=St.length=0))}for((At=St.join(""))&&Nt.push(At),qn=[],St.length=0,Wt=0;Wt<Nt.length;Wt++)typeof Nt[Wt]=="string"?St.push(Nt[Wt]):((At=St.join(""))&&qn.push(At),St.length=0,qn.push(Nt[Wt]));return(At=St.join(""))&&qn.push(At),St.length=0,qn},im=function(St){return Cp(St,!0)},fs=function(St){return typeof St!="string"?St:(St=Cp(St,!1),St.length?String(St[0]):"")},Nm=function(St){let At=!0;const Nt=To,Wt=St.match(/%{BKY_[A-Z]\w*}/ig);if(Wt)for(let cn=0;cn<Wt.length;cn++){const vn=Wt[cn].toUpperCase();Nt[vn.slice(6,-1)]===void 0&&(console.warn("No message string for "+Wt[cn]+" in "+St),At=!1)}return At},gu=function(St){const At=typeof St=="string"?fs(St):St;var Nt=Number(At);if(!isNaN(Nt)&&0<=Nt&&360>=Nt)return{hue:Nt,hex:wp(Nt,tm(),255*KO())};if(Nt=Vu(At))return{hue:null,hex:Nt};throw Nt='Invalid colour: "'+At+'"',St!==At&&(Nt+=' (from "'+St+'")'),Error(Nt)},Ap=function(){return qu},Bm=function(St){qu=St},Gl=function(){qu||(qu=document.createElement("div"),qu.className="blocklyWidgetDiv",(Hn()||document.body).appendChild(qu))},Ip=function(St,At,Nt){$a(),Uv=St,Vv=Nt,(St=qu)&&(St.style.direction=At?"rtl":"ltr",St.style.display="block",At=In(),vO=At.getRenderer().getClassName(),bO=At.getTheme().getClassName(),vO&&ir(St,vO),bO&&ir(St,bO))},$a=function(){if(_u()){Uv=null;var St=qu;St&&(St.style.display="none",St.style.left="",St.style.top="",Vv&&Vv(),Vv=null,St.textContent="",vO&&(tr(St,vO),vO=""),bO&&(tr(St,bO),bO=""),In().markFocused())}},_u=function(){return!!Uv},Fm=function(St){Uv===St&&$a()},Rp=function(St,At,Nt){qu.style.left=St+"px",qu.style.top=At+"px",qu.style.height=Nt+"px"},JO=function(St,At,Nt,Wt){const cn=gs(St,At,Nt);St=ey(St,At,Nt,Wt),0>cn?Rp(St,0,Nt.height+cn):Rp(St,cn,Nt.height)},ey=function(St,At,Nt,Wt){return Wt?Math.min(Math.max(At.right-Nt.width,St.left),St.right-Nt.width):Math.max(Math.min(At.left,St.right-Nt.width),St.left)},gs=function(St,At,Nt){return At.bottom+Nt.height>=St.bottom?At.top-Nt.height:At.bottom},xa=function(St,At){wo(Hr.FIELD,St,At)},ty=function(St){Qn(Hr.FIELD,St)},Gm=function(St){return _T.fromJsonInternal(St)},D_=function(St){const At=Rr(Hr.FIELD,St.type);if(At){if(typeof At.fromJson!="function")throw new TypeError("returned Field was not a IRegistrableField");return At.fromJson(St)}return console.warn("Blockly could not create a field of type "+St.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null},$s=function(St,At){St.setAttribute(qE,At)},ns=function(St,At,Nt){Array.isArray(Nt)&&(Nt=Nt.join(" ")),St.setAttribute(ZE+At,`${Nt}`)},vs=function(St){return St!==Qo.SKIP_SETUP},Xs=function(St){let At=!1;const Nt=St.map(([Pn,qn])=>typeof Pn=="string"?[fs(Pn),qn]:(At=!0,[Pn.alt!==null?Object.assign({},Pn,{alt:fs(Pn.alt)}):Object.assign({},Pn),qn]));if(At||2>St.length)return{options:Nt};var Wt=Nt.map(([Pn])=>Pn),cn=_c(Wt);St=Uu(Wt,cn);const vn=Mm(Wt,cn);return!St&&!vn||cn<=St+vn?{options:Nt}:(cn=St?Wt[0].substring(0,St-1):void 0,Wt=vn?Wt[0].substr(1-vn):void 0,{options:Bs(Nt,St,vn),prefix:cn,suffix:Wt})},Bs=function(St,At,Nt){return St.map(([Wt,cn])=>[Wt.substring(At,Wt.length-Nt),cn])},Um=function(St){if(!Array.isArray(St))throw TypeError("FieldDropdown options must be an array.");if(!St.length)throw TypeError("FieldDropdown options must not be an empty array.");let At=!1;for(let Nt=0;Nt<St.length;Nt++){const Wt=St[Nt];Array.isArray(Wt)?typeof Wt[1]!="string"?(At=!0,console.error("Invalid option["+Nt+"]: Each FieldDropdown option id must be a string. Found "+Wt[1]+" in: ",Wt)):Wt[0]&&typeof Wt[0]!="string"&&typeof Wt[0].src!="string"&&(At=!0,console.error("Invalid option["+Nt+"]: Each FieldDropdown option must have a string label or image description. Found"+Wt[0]+" in: ",Wt)):(At=!0,console.error("Invalid option["+Nt+"]: Each FieldDropdown option must be an array. Found: ",Wt))}if(At)throw TypeError("Found invalid FieldDropdown options.")},Vm=function(St,At){vt("Blockly.utils.object.inherits","version 9","version 10"),St.superClass_=At.prototype,Object.setPrototypeOf(St,At),St.prototype=Object.create(At.prototype),St.prototype.constructor=St},Wm=function(St,At){vt("Blockly.utils.object.mixin","May 2022","May 2023","Object.assign");for(const Nt in At)St[Nt]=At[Nt]},np=function(St,At){for(const Nt in At)St[Nt]=At[Nt]!==null&&typeof At[Nt]=="object"?np(St[Nt]||Object.create(null),At[Nt]):At[Nt];return St},Ys=function(St){return vt("Blockly.utils.object.values","version 9","version 10","Object.values"),Object.values(St)},om=function(St){return St?((St instanceof Element||typeof St=="string")&&(St=iy(St),St=N_(St)),ny(St),St):null},ny=function(St){const At=St.kind;if(St=St.contents,At&&At!==yT&&At!==XS)throw Error("Invalid toolbox kind "+At+". Please supply either "+yT+" or "+XS);if(!St)throw Error("Toolbox must have a contents attribute.")},sm=function(St){return St?St.contents?St.contents:Array.isArray(St)&&0<St.length&&!St[0].nodeType?St:am(St):[]},Ou=function(St){return vT.hasCategoriesInternal(St)},Iu=function(St){if(!St)return!1;const At=St.kind;return At?At===XS:!!St.contents.filter(function(Nt){return Nt.kind.toUpperCase()==="CATEGORY"}).length},Wu=function(St){return St&&St.contents?!!St.contents.filter(function(At){return At.kind.toUpperCase()==="CATEGORY"}).length:!1},N_=function(St){const At={contents:am(St)};return St instanceof Node&&ry(St,At),At},am=function(St){const At=[];let Nt=St.childNodes;Nt||(Nt=St);for(let Wt=0,cn;cn=Nt[Wt];Wt++){if(!cn.tagName)continue;St={};const vn=cn.tagName.toUpperCase();St.kind=vn,vn==="BLOCK"?St.blockxml=cn:cn.childNodes&&0<cn.childNodes.length&&(St.contents=am(cn)),ry(cn,St),At.push(St)}return At},ry=function(St,At){for(let Nt=0;Nt<St.attributes.length;Nt++){const Wt=St.attributes[Nt];-1<Wt.nodeName.indexOf("css-")?(At.cssconfig=At.cssconfig||{},At.cssconfig[Wt.nodeName.replace("css-","")]=Wt.value):At[Wt.nodeName]=Wt.value}},iy=function(St){let At=null;if(St)if(typeof St=="string"){if(At=ga(St),At.nodeName.toLowerCase()!=="xml")throw TypeError("Toolbox should be an <xml> document.")}else St instanceof Element&&(At=St);return At},Hm=function(St,At){if(typeof St!="string"||St.trim()==="")throw Error('Error: Invalid extension name "'+St+'"');if(SO[St])throw Error('Error: Extension "'+St+'" is already registered.');if(typeof At!="function")throw Error('Error: Extension "'+St+'" must be a function');SO[St]=At},B0=function(St,At){if(!At||typeof At!="object")throw Error('Error: Mixin "'+St+'" must be a object');Hm(St,function(){this.mixin(At)})},F0=function(St,At,Nt,Wt){const cn='Error when registering mutator "'+St+'": ';oy(cn,At);const vn=U_(At,cn);if(Nt&&typeof Nt!="function")throw Error(cn+'Extension "'+St+'" is not a function');Hm(St,function(){vn&&this.setMutator(new dt.Mutator$$module$build$src$core$mutator(Wt||[],this)),this.mixin(At),Nt&&Nt.apply(this)})},G0=function(St){B_(St)?delete SO[St]:console.warn('No extension mapping for name "'+St+'" found to unregister')},B_=function(St){return!!SO[St]},kp=function(St,At,Nt){const Wt=SO[St];if(typeof Wt!="function")throw Error('Error: Extension "'+St+'" not found.');let cn;if(Nt?U0(St,At):cn=V_(At),Wt.apply(At),Nt)oy('Error after applying mutator "'+St+'": ',At);else if(!V0(cn,At))throw Error('Error when applying extension "'+St+'": mutation properties changed when applying a non-mutator extension.')},U0=function(St,At){if(V_(At).length)throw Error('Error: tried to apply mutation "'+St+'" to a block that already has mutator functions.  Block id: '+At.id)},F_=function(St,At){return Mp(St.mutationToDom,St.domToMutation,At+" mutationToDom/domToMutation")},G_=function(St,At){return Mp(St.saveExtraState,St.loadExtraState,At+" saveExtraState/loadExtraState")},U_=function(St,At){return Mp(St.compose,St.decompose,At+" compose/decompose")},Mp=function(St,At,Nt){if(St&&At){if(typeof St!="function"||typeof At!="function")throw Error(Nt+" must be a function");return!0}if(!St&&!At)return!1;throw Error(Nt+"Must have both or neither functions")},oy=function(St,At){const Nt=F_(At,St),Wt=G_(At,St);if(!Nt&&!Wt)throw Error(St+"Mutations must contain either XML hooks, or JSON hooks, or both");U_(At,St)},V_=function(St){const At=[];return St.domToMutation!==void 0&&At.push(St.domToMutation),St.mutationToDom!==void 0&&At.push(St.mutationToDom),St.saveExtraState!==void 0&&At.push(St.saveExtraState),St.loadExtraState!==void 0&&At.push(St.loadExtraState),St.compose!==void 0&&At.push(St.compose),St.decompose!==void 0&&At.push(St.decompose),At},V0=function(St,At){if(At=V_(At),At.length!==St.length)return!1;for(let Nt=0;Nt<At.length;Nt++)if(St[Nt]!==At[Nt])return!1;return!0},Qm=function(St){if(typeof document!="object")throw Error("runAfterPageLoad() requires browser document.");if(document.readyState==="complete")St();else{const At=setInterval(function(){document.readyState==="complete"&&(clearInterval(At),St())},10)}},sy=function(St,At){const Nt=[];return typeof document=="object"&&Qm(function(){for(const Wt in At)Nm(At[Wt])}),function(){this.type&&Nt.indexOf(this.type)===-1&&(W0(this,St,At),Nt.push(this.type)),this.setTooltip(function(){var Wt=String(this.getFieldValue(St));let cn=At[Wt];return cn===null?Nt.indexOf(this.type)===-1&&(Wt="No tooltip mapping for value "+Wt+" of field "+St,this.type!==null&&(Wt+=" of block type "+this.type),console.warn(Wt+".")):cn=fs(cn),cn}.bind(this))}},W0=function(St,At,Nt){var Wt=St.getField(At);if(Wt instanceof Ju&&!Wt.isOptionListDynamic()){Wt=Wt.getOptions();for(let cn=0;cn<Wt.length;cn++){const vn=Wt[cn][1];Nt[vn]===null&&console.warn("No tooltip mapping for value "+vn+" of field "+At+" of block type "+St.type)}}},H0=function(St,At){return typeof document=="object"&&Qm(function(){Nm(St)}),function(){this.setTooltip(function(){const Nt=this.getField(At);return fs(St).replace("%1",Nt?Nt.getText():"")}.bind(this))}},sS=function(){const St=this.tooltip;this.setTooltip(function(){const At=this.getParent();return At&&At.getInputsInline()&&At.tooltip||St}.bind(this))},_l=function(St,At){return At=St.indexOf(At),At===-1?!1:(St.splice(At,1),!0)},_o=function(St,At){return" "+St+","+At+" "},Ul=function(St,At){return" "+St+At.join("")},Vs=function(St,At){return" M "+St+","+At+" "},ls=function(St,At){return" m "+St+","+At+" "},Ru=function(St,At){return" l "+St+","+At+" "},lm=function(St){return" l"+St.join("")},eo=function(St,At){return" "+St+" "+At+" "},Ts=function(St,At,Nt,Wt){return St+" "+Nt+" "+Nt+" "+At+Wt},aS=function(St){return vt("Blockly.utils.getRelativeXY","December 2021","December 2022","Blockly.utils.svgMath.getRelativeXY"),Ll(St)},lS=function(St){return vt("Blockly.utils.getInjectionDivXY_","December 2021","December 2022","Blockly.utils.svgMath.getInjectionDivXY"),w_(St)},ay=function(St){return vt("Blockly.utils.tokenizeInterpolation","December 2021","December 2022","Blockly.utils.parsing.tokenizeInterpolation"),im(St)},ly=function(St){return vt("Blockly.utils.replaceMessageReferences","December 2021","December 2022","Blockly.utils.parsing.replaceMessageReferences"),fs(St)},cS=function(St){return vt("Blockly.utils.checkMessageReferences","December 2021","December 2022","Blockly.utils.parsing.checkMessageReferences"),Nm(St)},Q0=function(){return vt("Blockly.utils.is3dSupported","December 2021","December 2022","Blockly.utils.svgMath.is3dSupported"),C_()},z0=function(){return vt("Blockly.utils.getViewportBBox","December 2021","December 2022","Blockly.utils.svgMath.getViewportBBox"),GO()},j0=function(St,At){return vt("Blockly.utils.arrayRemove","December 2021","December 2022","Blockly.array.removeElem"),_l(St,At)},X0=function(){return vt("Blockly.utils.getDocumentScroll","December 2021","December 2022","Blockly.utils.svgMath.getDocumentScroll"),Kp()},Y0=function(St,At){return vt("Blockly.utils.getBlockTypeCounts","December 2021","December 2022","Blockly.common.getBlockTypeCounts"),zn(St,At)},ku=function(St,At){return vt("Blockly.utils.screenToWsCoordinates","December 2021","December 2022","Blockly.utils.svgMath.screenToWsCoordinates"),du(St,At)},Z0=function(St){return vt("Blockly.utils.parseBlockColour","December 2021","December 2022","Blockly.utils.parsing.parseBlockColour"),gu(St)},zm=function(St){vt("Blockly.utils.runAfterPageLoad","December 2021","December 2022"),Qm(St)},Pp=function(St,At){wo(Hr.SERIALIZER,St,At)},W_=function(St){Qn(Hr.SERIALIZER,St)},tu=function(St,{addCoordinates:At=!1,addInputBlocks:Nt=!0,addNextBlocks:Wt=!0,doFullSerialization:cn=!0}={}){if(St.isInsertionMarker())return null;const vn={type:St.type,id:St.id};return At&&jm(St,vn),q0(St,vn),Zs(St,vn),uS(St,vn),hS(St,vn,cn),Nt&&Vl(St,vn,cn),Wt&&Ol(St,vn,cn),vn},q0=function(St,At){St.isCollapsed()&&(At.collapsed=!0),St.isEnabled()||(At.enabled=!1),St.inputsInline!==void 0&&St.inputsInline!==St.inputsInlineDefault&&(At.inline=St.inputsInline),St.data&&(At.data=St.data)},jm=function(St,At){const Nt=St.workspace;St=St.getRelativeToSurfaceXY(),At.x=Math.round(Nt.RTL?Nt.getWidth()-St.x:St.x),At.y=Math.round(St.y)},Zs=function(St,At){St.saveExtraState?(St=St.saveExtraState(),St!==null&&(At.extraState=St)):St.mutationToDom&&(St=St.mutationToDom(),St!==null&&(At.extraState=Zl(St).replace(' xmlns="https://developers.google.com/blockly/xml"',"")))},uS=function(St,At){St.getCommentText()&&(At.icons={comment:{text:St.getCommentText(),pinned:St.commentModel.pinned,height:Math.round(St.commentModel.size.height),width:Math.round(St.commentModel.size.width)}})},hS=function(St,At,Nt){const Wt=Object.create(null);for(let cn=0;cn<St.inputList.length;cn++){const vn=St.inputList[cn];for(let Pn=0;Pn<vn.fieldRow.length;Pn++){const qn=vn.fieldRow[Pn];qn.isSerializable()&&(Wt[qn.name]=qn.saveState(Nt))}}Object.keys(Wt).length&&(At.fields=Wt)},Vl=function(St,At,Nt){const Wt=Object.create(null);for(let cn=0;cn<St.inputList.length;cn++){const vn=St.inputList[cn];if(vn.type===No.DUMMY)continue;const Pn=cy(vn.connection,Nt);Pn&&(Wt[vn.name]=Pn)}Object.keys(Wt).length&&(At.inputs=Wt)},Ol=function(St,At,Nt){St.nextConnection&&(St=cy(St.nextConnection,Nt))&&(At.next=St)},cy=function(St,At){const Nt=St.getShadowState(!0);if(St=St.targetBlock(),!Nt&&!St)return null;const Wt=Object.create(null);return Nt&&(Wt.shadow=Nt),St&&!St.isShadow()&&(Wt.block=tu(St,{doFullSerialization:At})),Wt},rp=function(St,At,{recordUndo:Nt=!1}={}){return H_(St,At,{recordUndo:Nt})},H_=function(St,At,{parentConnection:Nt,isShadow:Wt=!1,recordUndo:cn=!1}={}){const vn=Co();Io(cn),(cn=Ro())||oo(!0),Fo();const Pn=uy(St,At,{parentConnection:Nt,isShadow:Wt});return vo(),Gr(new(Wr(Tl))(Pn)),oo(cn),Io(vn),At.rendered&&setTimeout(()=>{Pn.disposed||Pn.setConnectionTracking(!0)},1),Pn},uy=function(St,At,{parentConnection:Nt,isShadow:Wt=!1}={}){if(!St.type)throw new $T(St);const cn=At.newBlock(St.type,St.id);return cn.setShadow(Wt),K0(cn,St),hy(cn,St),J0(cn,St),dy(Nt,cn,St),ev(cn,St),tv(cn,St),Q_(cn,St),z_(cn,St),my(cn,At.rendered),cn},K0=function(St,At){let Nt=At.x===void 0?0:At.x;At=At.y===void 0?0:At.y;const Wt=St.workspace;Nt=Wt.RTL?Wt.getWidth()-Nt:Nt,St.moveBy(Nt,At)},hy=function(St,At){At.collapsed&&St.setCollapsed(!0),At.enabled===!1&&St.setEnabled(!1),At.inline!==void 0&&St.setInputsInline(At.inline),At.data!==void 0&&(St.data=At.data)},J0=function(St,At){At.extraState&&(St.loadExtraState?St.loadExtraState(At.extraState):St.domToMutation&&St.domToMutation(ga(At.extraState)))},dy=function(St,At,Nt){if(St){if(St.getSourceBlock().isShadow()&&!At.isShadow())throw new ET(Nt);if(St.type===No.VALUE){var Wt=At.outputConnection;if(!Wt)throw new s0("output",At,Nt)}else if(Wt=At.previousConnection,!Wt)throw new s0("previous",At,Nt);if(!St.connect(Wt)){const cn=At.workspace.connectionChecker;throw new TT(cn.getErrorMessage(cn.canConnectWithReason(Wt,St,!1),Wt,St),St.type===No.VALUE?"output connection":"previous connection",At,Nt)}}},ev=function(St,At){At.icons&&(At=At.icons.comment)&&(St.setCommentText(At.text),"pinned"in At&&(St.commentModel.pinned=At.pinned),"width"in At&&"height"in At&&(St.commentModel.size=new Ks(At.width,At.height)),At.pinned&&St.rendered&&!St.isInFlyout&&setTimeout(()=>St.getCommentIcon().setVisible(!0),1))},tv=function(St,At){if(At.fields){var Nt=Object.keys(At.fields);for(let Wt=0;Wt<Nt.length;Wt++){const cn=Nt[Wt],vn=At.fields[cn],Pn=St.getField(cn);Pn?Pn.loadState(vn):console.warn(`Ignoring non-existant field ${cn} in block ${St.type}`)}}},Q_=function(St,At){if(At.inputs){var Nt=Object.keys(At.inputs);for(let Wt=0;Wt<Nt.length;Wt++){const cn=Nt[Wt],vn=St.getInput(cn);if(!vn||!vn.connection)throw new s0(cn,St,At);fy(vn.connection,At.inputs[cn])}}},z_=function(St,At){if(At.next){if(!St.nextConnection)throw new s0("next",St,At);fy(St.nextConnection,At.next)}},fy=function(St,At){At.shadow&&St.setShadowState(At.shadow),At.block&&uy(At.block,St.getSourceBlock().workspace,{parentConnection:St})},my=function(St,At){if(At)for(St.setConnectionTracking(!1),St.initSvg(),St.render(!1),St=St.getIcons(),At=0;At<St.length;At++)St[At].computeIconLocation();else St.initModel()},nv=function(St,At){if(!St||!At)throw Error("Cannot connect null connections.");St.targetConnection=At,At.targetConnection=St},rv=function(St,At){let Nt=null;At=At.outputConnection;const Wt=At.getConnectionChecker();for(let cn=0,vn;vn=St.inputList[cn];cn++){const Pn=vn.connection;if(Pn&&Wt.canConnect(At,Pn,!1)){if(Nt)return null;Nt=Pn}}return Nt},j_=function(St,At){let Nt;for(;Nt=rv(St,At);)if(St=Nt.targetBlock(),!St||St.isShadow())return Nt;return null},Xm=function(St){let At=St.outputConnection;return(!At||St.previousConnection&&St.previousConnection.isConnected())&&(At=St.previousConnection),At},X_=function(St){const At=St.workspace;var Nt=St.getSvgRoot();At.getAudioManager().play("delete");const Wt=At.getSvgXY(Nt);Nt=Nt.cloneNode(!0),Nt.setAttribute("transform","translate("+Wt.x+","+Wt.y+")"),At.getParentSvg().appendChild(Nt),gy(Nt,{x:Wt.x,y:Wt.y,width:St.width,height:St.height},At.RTL,new Date,At.scale)},gy=function(St,At,Nt,Wt,cn){const vn=(new Date().getTime()-Wt.getTime())/150;1<vn?Sr(St):(St.setAttribute("transform","translate("+(At.x+(Nt?-1:1)*At.width*cn/2*vn)+","+(At.y+At.height*cn*vn)+") scale("+(1-vn)*cn+")"),setTimeout(gy,10,St,At,Nt,Wt,cn))},Mu=function(St){const At=St.workspace,Nt=At.scale;if(At.getAudioManager().play("click"),!(1>Nt)){var Wt=At.getSvgXY(St.getSvgRoot());St.outputConnection?(Wt.x+=(St.RTL?3:-3)*Nt,Wt.y+=13*Nt):St.previousConnection&&(Wt.x+=(St.RTL?-23:23)*Nt,Wt.y+=3*Nt),St=Mn(ar.CIRCLE,{cx:Wt.x,cy:Wt.y,r:0,fill:"none",stroke:"#888","stroke-width":10},At.getParentSvg()),iv(St,new Date,Nt)}},iv=function(St,At,Nt){const Wt=(new Date().getTime()-At.getTime())/150;1<Wt?Sr(St):(St.setAttribute("r",(25*Wt*Nt).toString()),St.style.opacity=(1-Wt).toString(),zv=setTimeout(iv,10,St,At,Nt))},ov=function(St){if(yu(),St.workspace.getAudioManager().play("disconnect"),!(1>St.workspace.scale)){var At=St.getHeightWidth().height;At=Math.atan(10/At)/Math.PI*180,St.RTL||(At*=-1),u0=St.getSvgRoot(),Ym(u0,At,new Date)}},Ym=function(St,At,Nt){const Wt=(new Date().getTime()-Nt.getTime())/200;let cn="";1>=Wt&&(cn=`skewX(${Math.round(Math.sin(Wt*Math.PI*3)*(1-Wt)*At)})`,zv=setTimeout(Ym,10,St,At,Nt)),St.skew_=cn,St.setAttribute("transform",St.translate_+St.skew_)},yu=function(){if(u0){zv&&clearTimeout(zv);const St=u0;St.skew_="",St.setAttribute("transform",St.translate_),u0=null}},Zm=function(St){t$.copyInternal(St)},to=function(St){Hp=St.toCopyData()},cm=function(){if(!Hp)return null;let St=Hp.source;return St.isFlyout&&(St=St.targetWorkspace),Hp.typeCounts&&St.isCapacityAvailable(Hp.typeCounts)?St.paste(Hp.saveInfo):null},um=function(St){return t$.duplicateInternal(St)},sv=function(St){const At=Hp;Zm(St);let Nt,Wt,cn;return St=(cn=(Nt=St.toCopyData())==null||(Wt=Nt.source)==null?void 0:Wt.paste(Hp.saveInfo))!=null?cn:null,Hp=At,St},av=function(){return f0},ip=function(St){f0=St},op=function(St,At,Nt){if(Ip(n$,Nt,yy),At.length){var Wt=Oy(At,Nt);p0=Wt,lv(Wt,St,Nt),setTimeout(function(){Wt.focus()},1),f0=null}else qm()},Oy=function(St,At){const Nt=new WS;Nt.setRole(au.MENU);for(let Wt=0;Wt<St.length;Wt++){const cn=St[Wt],vn=new HS(cn.text);vn.setRightToLeft(At),vn.setRole(au.MENUITEM),Nt.addChild(vn),vn.setEnabled(cn.enabled),cn.enabled&&vn.onAction(function(){qm(),cn.callback(cn.scope)},{})}return Nt},lv=function(St,At,Nt){const Wt=GO();At=new ws(At.clientY+Wt.top,At.clientY+Wt.top,At.clientX+Wt.left,At.clientX+Wt.left),cv(St);const cn=St.getSize();Nt&&(At.left+=cn.width,At.right+=cn.width,Wt.left+=cn.width,Wt.right+=cn.width),JO(Wt,At,cn,Nt),St.focus()},cv=function(St){var At=Ap();if(!At)throw Error("Attempting to create a context menu when widget div is null");At=St.render(At),ir(At,"blocklyContextMenu"),Kt(At,"contextmenu",null,uv),St.focus()},uv=function(St){St.preventDefault(),St.stopPropagation()},qm=function(){Fm(n$),f0=null},yy=function(){p0&&(p0.dispose(),p0=null)},hv=function(St,At){return()=>{Fo();let Nt;try{Nt=Gu(At,St.workspace);const Wt=St.getRelativeToSurfaceXY();Wt.x=St.RTL?Wt.x-dt.config$$module$build$src$core$config.snapRadius:Wt.x+dt.config$$module$build$src$core$config.snapRadius,Wt.y+=2*dt.config$$module$build$src$core$config.snapRadius,Nt.moveBy(Wt.x,Wt.y)}finally{vo()}ss()&&!Nt.isShadow()&&Gr(new(Wr(Tl))(Nt)),Nt.select()}},Y_=function(St){return{text:To.REMOVE_COMMENT,enabled:!0,callback:function(){oo(!0),St.dispose(),oo(!1)}}},Z_=function(St){return{text:To.DUPLICATE_COMMENT,enabled:!0,callback:function(){um(St)}}},dv=function(St,At){const Nt={enabled:!0};return Nt.text=To.ADD_COMMENT,Nt.callback=function(){const Wt=new Il(St,To.WORKSPACE_COMMENT_DEFAULT_TEXT,Il.DEFAULT_SIZE,Il.DEFAULT_SIZE);var cn=St.getInjectionDiv().getBoundingClientRect();cn=new qr(At.clientX-cn.left,At.clientY-cn.top);const vn=St.getOriginOffsetInPixels();cn=qr.difference(cn,vn),cn.scale(1/St.scale),Wt.moveBy(cn.x,cn.y),St.rendered&&(Wt.initSvg(),Wt.render(),Wt.select())},Nt},Km=function(St,At,Nt,Wt,cn,vn){const Pn=vn.scrollbar&&vn.scrollbar.canScrollVertically();return St.horizontal===xO.LEFT?(Nt=cn.absoluteMetrics.left+Nt,Pn&&vn.RTL&&(Nt+=Ss.scrollbarThickness)):(Nt=cn.absoluteMetrics.left+cn.viewMetrics.width-At.width-Nt,Pn&&!vn.RTL&&(Nt-=Ss.scrollbarThickness)),St.vertical===Qp.TOP?St=cn.absoluteMetrics.top+Wt:(St=cn.absoluteMetrics.top+cn.viewMetrics.height-At.height-Wt,vn.scrollbar&&vn.scrollbar.canScrollHorizontally()&&(St-=Ss.scrollbarThickness)),new ws(St,St+At.height,Nt,Nt+At.width)},hm=function(St,At){return{horizontal:At.toolboxMetrics.position===Ao.LEFT||St.horizontalLayout&&!St.RTL?xO.RIGHT:xO.LEFT,vertical:At.toolboxMetrics.position===Ao.BOTTOM?Qp.TOP:Qp.BOTTOM}},vy=function(St,At,Nt,Wt){const cn=St.left,vn=St.right-St.left,Pn=St.bottom-St.top;for(let qn=0;qn<Wt.length;qn++){const Ar=Wt[qn];St.intersects(Ar)&&(St=Nt===Tm.UP?Ar.top-Pn-At:Ar.bottom+At,St=new ws(St,St+Pn,cn,cn+vn),qn=-1)}return St},fv=function(){ts.registry.register({name:Op.ESCAPE,preconditionFn(St){return!St.options.readOnly},callback(St){return St.hideChaff(),!0},keyCodes:[co.ESC]})},by=function(){ts.registry.register({name:Op.DELETE,preconditionFn(St){const At=Dn();return!St.options.readOnly&&At!=null&&At.isDeletable()},callback(St,At){return At.preventDefault(),_p.inProgress()?!1:(Dn().checkAndDelete(),!0)},keyCodes:[co.DELETE,co.BACKSPACE]})},Sy=function(){const St=ts.registry.createSerializedKey(co.C,[co.CTRL]),At=ts.registry.createSerializedKey(co.C,[co.ALT]),Nt=ts.registry.createSerializedKey(co.C,[co.META]);ts.registry.register({name:Op.COPY,preconditionFn(Wt){const cn=Dn();return!Wt.options.readOnly&&!_p.inProgress()&&cn!=null&&cn.isDeletable()&&cn.isMovable()},callback(Wt,cn){return cn.preventDefault(),Wt.hideChaff(),Zm(Dn()),!0},keyCodes:[St,At,Nt]})},$y=function(){const St=ts.registry.createSerializedKey(co.X,[co.CTRL]),At=ts.registry.createSerializedKey(co.X,[co.ALT]),Nt=ts.registry.createSerializedKey(co.X,[co.META]);ts.registry.register({name:Op.CUT,preconditionFn(Wt){const cn=Dn();return!Wt.options.readOnly&&!_p.inProgress()&&cn!=null&&cn instanceof Du&&cn.isDeletable()&&cn.isMovable()&&!cn.workspace.isFlyout},callback(){const Wt=Dn();return Wt?(Zm(Wt),Wt.checkAndDelete(),!0):!1},keyCodes:[St,At,Nt]})},Ty=function(){const St=ts.registry.createSerializedKey(co.V,[co.CTRL]),At=ts.registry.createSerializedKey(co.V,[co.ALT]),Nt=ts.registry.createSerializedKey(co.V,[co.META]);ts.registry.register({name:Op.PASTE,preconditionFn(Wt){return!Wt.options.readOnly&&!_p.inProgress()},callback(){return!!cm()},keyCodes:[St,At,Nt]})},Jm=function(){const St=ts.registry.createSerializedKey(co.Z,[co.CTRL]),At=ts.registry.createSerializedKey(co.Z,[co.ALT]),Nt=ts.registry.createSerializedKey(co.Z,[co.META]);ts.registry.register({name:Op.UNDO,preconditionFn(Wt){return!Wt.options.readOnly&&!_p.inProgress()},callback(Wt){return Wt.hideChaff(),Wt.undo(!1),!0},keyCodes:[St,At,Nt]})},_g=function(){const St=ts.registry.createSerializedKey(co.Z,[co.SHIFT,co.CTRL]),At=ts.registry.createSerializedKey(co.Z,[co.SHIFT,co.ALT]),Nt=ts.registry.createSerializedKey(co.Z,[co.SHIFT,co.META]),Wt=ts.registry.createSerializedKey(co.Y,[co.CTRL]);ts.registry.register({name:Op.REDO,preconditionFn(cn){return!_p.inProgress()&&!cn.options.readOnly},callback(cn){return cn.hideChaff(),cn.undo(!0),!0},keyCodes:[St,At,Nt,Wt]})},e_=function(){fv(),by(),Sy(),$y(),Ty(),Jm(),_g()},Hu=function(St){return St.startPublishing!==void 0&&St.stopPublishing!==void 0},q_=function(St){return St.doProcedureUpdate!==void 0},nu=function(St){for(const At of St.getAllBlocks(!1))q_(At)&&At.doProcedureUpdate()},t_=function(St){const At=St.getBlocksByType("procedures_defnoreturn",!1).map(function(Nt){return Nt.getProcedureDef()});return St=St.getBlocksByType("procedures_defreturn",!1).map(function(Nt){return Nt.getProcedureDef()}),At.sort(K_),St.sort(K_),[At,St]},K_=function(St,At){return St[0].localeCompare(At[0],void 0,{sensitivity:"base"})},J_=function(St,At){if(At.isInFlyout)return St;for(St=St||To.UNNAMED_KEY||"unnamed";!pv(St,At.workspace,At);){const Nt=St.match(/^(.*?)(\d+)$/);St=Nt?Nt[1]+(parseInt(Nt[2])+1):St+"2"}return St},pv=function(St,At,Nt){return!eO(St,At,Nt)},eO=function(St,At,Nt){At=At.getAllBlocks(!1);for(let cn=0;cn<At.length;cn++)if(At[cn]!==Nt){var Wt=At[cn];if(Wt.getProcedureDef&&(Wt=Wt.getProcedureDef(),Nu.equals(Wt[0],St)))return!0}return!1},dS=function(St){var At=this.getSourceBlock();if(!At)throw new Ds;St=St.trim();const Nt=J_(St,At),Wt=this.getValue();if(Wt!==St&&Wt!==Nt)for(St=At.workspace.getAllBlocks(!1),At=0;At<St.length;At++){const cn=St[At];cn.renameProcedure&&cn.renameProcedure(Wt,Nt)}return Nt},dm=function(St){function At(vn,Pn){for(let Ar=0;Ar<vn.length;Ar++){var qn=vn[Ar][0];const Kr=vn[Ar][1],Xo=Bo("block");Xo.setAttribute("type",Pn),Xo.setAttribute("gap","16");const _s=Bo("mutation");for(_s.setAttribute("name",qn),Xo.appendChild(_s),qn=0;qn<Kr.length;qn++){const Eu=Bo("arg");Eu.setAttribute("name",Kr[qn]),_s.appendChild(Eu)}Nt.push(Xo)}}const Nt=[];if(Xr.procedures_defnoreturn){var Wt=Bo("block");Wt.setAttribute("type","procedures_defnoreturn"),Wt.setAttribute("gap","16");var cn=Bo("field");cn.setAttribute("name","NAME"),cn.appendChild(Pl(To.PROCEDURES_DEFNORETURN_PROCEDURE)),Wt.appendChild(cn),Nt.push(Wt)}return Xr.procedures_defreturn&&(Wt=Bo("block"),Wt.setAttribute("type","procedures_defreturn"),Wt.setAttribute("gap","16"),cn=Bo("field"),cn.setAttribute("name","NAME"),cn.appendChild(Pl(To.PROCEDURES_DEFRETURN_PROCEDURE)),Wt.appendChild(cn),Nt.push(Wt)),Xr.procedures_ifreturn&&(Wt=Bo("block"),Wt.setAttribute("type","procedures_ifreturn"),Wt.setAttribute("gap","16"),Nt.push(Wt)),Nt.length&&Nt[Nt.length-1].setAttribute("gap","24"),St=t_(St),At(St[0],"procedures_callnoreturn"),At(St[1],"procedures_callreturn"),Nt},tO=function(St){var At=[],Nt=St.getBlocksByType("procedures_mutatorarg",!1);for(let vn=0,Pn;Pn=Nt[vn];vn++)At.push(Pn.getFieldValue("NAME"));Nt=Bo("xml");const Wt=Bo("block");Wt.setAttribute("type","procedures_mutatorarg");const cn=Bo("field");cn.setAttribute("name","NAME"),At=BO(_$,At),At=Pl(At),cn.appendChild(At),Wt.appendChild(cn),Nt.appendChild(Wt),St.updateToolbox(Nt)},bs=function(St){if(St.type===Gp&&St.bubbleType==="mutator"&&St.isOpen&&St.blockId){St=bn(St.workspaceId).getBlockById(St.blockId);var At=St.type;(At==="procedures_defnoreturn"||At==="procedures_defreturn")&&(St=St.mutator.getWorkspace(),tO(St),St.addChangeListener(Uo))}},Uo=function(St){(St.type===Tl||St.type===mp||St.type===Qs)&&(St=bn(St.workspaceId),tO(St))},Es=function(St,At){const Nt=[];At=At.getAllBlocks(!1);for(let cn=0;cn<At.length;cn++){var Wt=At[cn];Wt.getProcedureCall&&(Wt=Wt.getProcedureCall())&&Nu.equals(Wt,St)&&Nt.push(At[cn])}return Nt},As=function(St){const At=Co();var Nt=St.getProcedureDef()[0];const Wt=St.mutationToDom(!0);St=Es(Nt,St.workspace);for(let vn=0,Pn;Pn=St[vn];vn++){Nt=(Nt=Pn.mutationToDom())&&Zl(Nt),Pn.domToMutation&&Pn.domToMutation(Wt);var cn=Pn.mutationToDom();cn=cn&&Zl(cn),Nt!==cn&&(Io(!1),Gr(new(Wr(Qs))(Pn,"mutation",null,Nt,cn)),Io(At))}},Ws=function(St,At){At=At.getAllBlocks(!1);for(let Wt=0;Wt<At.length;Wt++){var Nt=At[Wt];if(Nt.getProcedureDef&&(Nt=Nt.getProcedureDef())&&Nu.equals(Nt[0],St))return At[Wt]}return null},Cl=function(St){return St.isDynamic},Qu=function(){return ZT},Ps=function(){vt("Blockly.blockRendering.debug.stopDebugger()","version 8","version 10","the debug renderer in @blockly/dev-tools (See https://www.npmjs.com/package/@blockly/dev-tools.)"),ZT=!1},zu=function(St,At){wo(Hr.RENDERER,St,At)},fm=function(St){Qn(Hr.RENDERER,St)},nO=function(){vt("Blockly.blockRendering.stopDebugger()","September 2021","September 2022","the debug renderer in @blockly/dev-tools (See https://www.npmjs.com/package/@blockly/dev-tools.)"),Ps()},rO=function(St,At,Nt){return St=new(fr(Hr.RENDERER,St))(St),St.init(At,Nt),St},pm=function(St){Sp(St.getTargetWorkspace(),void 0,"String")},yl=function(St){Sp(St.getTargetWorkspace(),void 0,"Number")},iO=function(St){Sp(St.getTargetWorkspace(),void 0,"Colour")},n_=function(St){let At=[],Nt=document.createElement("button");return Nt.setAttribute("text",To.NEW_STRING_VARIABLE),Nt.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),At.push(Nt),Nt=document.createElement("button"),Nt.setAttribute("text",To.NEW_NUMBER_VARIABLE),Nt.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),At.push(Nt),Nt=document.createElement("button"),Nt.setAttribute("text",To.NEW_COLOUR_VARIABLE),Nt.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),At.push(Nt),St.registerButtonCallback("CREATE_VARIABLE_STRING",pm),St.registerButtonCallback("CREATE_VARIABLE_NUMBER",yl),St.registerButtonCallback("CREATE_VARIABLE_COLOUR",iO),St=Lp(St),At=At.concat(St)},Lp=function(St){St=St.getAllVariables();const At=[];if(0<St.length){if(Xr.variables_set_dynamic){var Nt=St[St.length-1];const Wt=Bo("block");Wt.setAttribute("type","variables_set_dynamic"),Wt.setAttribute("gap","24"),Wt.appendChild(Ho(Nt)),At.push(Wt)}if(Xr.variables_get_dynamic){St.sort(Zy.compareByName);for(let Wt=0,cn;cn=St[Wt];Wt++)Nt=Bo("block"),Nt.setAttribute("type","variables_get_dynamic"),Nt.setAttribute("gap","8"),Nt.appendChild(Ho(cn)),At.push(Nt)}}return At},oO=function(St){St.resizeContents()},Ey=function(St){const At=Object.create(null),Nt=$o(Hr.SERIALIZER,!0);for(const Wt in Nt){let cn;const vn=(cn=Nt[Wt])==null?void 0:cn.save(St);vn&&(At[Wt]=vn)}return At},sp=function(St,At,{recordUndo:Nt=!1}={}){var Wt=$o(Hr.SERIALIZER,!0);if(Wt){Wt=Object.entries(Wt).sort((vn,Pn)=>Pn[1].priority-vn[1].priority);var cn=Co();Io(Nt),(Nt=Ro())||oo(!0),_i(),At instanceof _f&&At.setResizesEnabled(!1);for(const[,vn]of Wt.reverse()){let Pn;(Pn=vn)==null||Pn.clear(At)}for(let[vn,Pn]of Wt.reverse())if(St[vn]){let qn;(qn=Pn)==null||qn.load(St[vn],At)}At instanceof _f&&At.setResizesEnabled(!0),Er(),Gr(new(Wr(gO))(At)),oo(Nt),Io(cn)}},mm=function(St){const At={id:St.getId(),name:St.getName(),returnTypes:St.getReturnTypes()};return St.getParameters().length&&(At.parameters=St.getParameters().map(Nt=>Pu(Nt))),At},Pu=function(St){const At={id:St.getId(),name:St.getName()};return St.getTypes().length&&(At.types=St.getTypes()),At},gm=function(St,At,Nt,Wt){if(St=new St(Wt,Nt.name,Nt.id).setReturnTypes(Nt.returnTypes),!Nt.parameters)return St;for(const[cn,vn]of Nt.parameters.entries())St.insertParameter(Dp(At,vn,Wt),cn);return St},Dp=function(St,At,Nt){return St=new St(Nt,At.name,At.id),At.types&&St.setTypes(At.types),St},_m=function(St,At,Nt){const Wt=Nt.getBoundingRectangle(),cn=Wt.right-Wt.left,vn=ho(At.top,Wt.top,At.top+At.height-(Wt.bottom-Wt.top))-Wt.top;let Pn=At.left;return At=At.left+At.width-cn,St.RTL?Pn=Math.min(At,Pn):At=Math.max(Pn,At),(St=ho(Pn,Wt.left,At)-Wt.left)||vn?(Nt.moveBy(St,vn),!0):!1},r_=function(St){return At=>{var Nt=St.getMetricsManager();if(Nt.hasFixedEdges()&&!St.isDragging()){var Wt;if(wS.indexOf((Wt=At.type)!=null?Wt:"")!==-1){Wt=Nt.getScrollMetrics(!0);const cn=sO(St,At);cn&&(Nt=Ro(),oo(At.group),_m(St,Wt,cn)&&!At.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),Nt!==null&&oo(Nt))}else At.type===u_&&At.scale&&At.oldScale&&At.scale>At.oldScale&&Hs(St)}}},sO=function(St,At){let Nt=null;switch(At.type){case Tl:case Hl:(Nt=St.getBlockById(At.blockId))&&(Nt=Nt.getRootBlock());break;case h_:case Up:Nt=St.getCommentById(At.commentId)}return Nt},Hs=function(St){var At=St.getMetricsManager();if(At.hasFixedEdges()&&!St.isDragging()){At=At.getScrollMetrics(!0);var Nt=St.getTopBoundedElements();for(let Wt=0,cn;cn=Nt[Wt];Wt++)_m(St,At,cn)}},ap=function(St,At){if(typeof St=="string"&&(St=document.getElementById(St)||document.querySelector(St)),!St||!Jr(document,St))throw Error("Error: container is not in current document.");At=new _h(At||{});const Nt=document.createElement("div");Nt.className="injectionDiv",Nt.tabIndex=0,ns(Nt,ms.LABEL,To.WORKSPACE_ARIA_LABEL),St.appendChild(Nt),St=ru(Nt,At);const Wt=new RE(Nt),cn=new IE(Nt),vn=aO(St,At,Wt,cn);return Al(vn),Rn(vn),Kn(vn),Nt.addEventListener("focusin",function(){Rn(vn)}),vn},ru=function(St,At){St.setAttribute("dir","LTR"),Ms(At.hasCss,At.pathToMedia),St=Mn(ar.SVG,{xmlns:Wl,"xmlns:html":vu,"xmlns:xlink":ou,version:"1.1",class:"blocklySvg",tabindex:"0"},St);const Nt=Mn(ar.DEFS,{},St),Wt=String(Math.random()).substring(2);return At.gridPattern=g$.createDom(Wt,At.gridOptions,Nt),St},aO=function(St,At,Nt,Wt){At.parentWorkspace=null,At=new _f(At,Nt,Wt),Nt=At.options,At.scale=Nt.zoomOptions.startScale,St.appendChild(At.createDom("blocklyMainBackground")),Wt=At.getInjectionDiv();var cn=At.getRenderer().getClassName();return cn&&ir(Wt,cn),(cn=At.getTheme().getClassName())&&ir(Wt,cn),!Nt.hasCategories&&Nt.languageTree&&(Wt=At.addFlyout(ar.SVG),Vr(Wt,St)),Nt.hasTrashcan&&At.addTrashcan(),Nt.zoomOptions&&Nt.zoomOptions.controls&&At.addZoomControls(),At.getThemeManager().subscribe(St,"workspaceBackgroundColour","background-color"),At.translate(0,0),At.addChangeListener(r_(At)),Kn(At),Gl(),Cr(),Lm(),At},Al=function(St){const At=St.options;var Nt=St.getParentSvg();if(Kt(Nt.parentNode,"contextmenu",null,function(Wt){dn(Wt)||Wt.preventDefault()}),Nt=Kt(window,"resize",null,function(){St.hideChaff(!0),Kn(St),Hs(St)}),St.setResizeHandlerWrapper(Nt),xy(),At.languageTree){Nt=St.getToolbox();const Wt=St.getFlyout(!0);Nt?Nt.init():Wt&&(Wt.init(St),Wt.show(At.languageTree),typeof Wt.scrollToStart=="function"&&Wt.scrollToStart())}At.hasTrashcan&&St.trashcan.init(),At.zoomOptions&&At.zoomOptions.controls&&St.zoomControls_.init(),At.moveOptions&&At.moveOptions.scrollbars?(St.scrollbar=new k$(St,At.moveOptions.scrollbars===!0||!!At.moveOptions.scrollbars.horizontal,At.moveOptions.scrollbars===!0||!!At.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),St.scrollbar.resize()):St.setMetrics({x:.5,y:.5}),At.hasSounds&&wy(At.pathToMedia,St)},mv=function(St){const At=In();At&&!(dn(St)||At.rendered&&!At.isVisible())&&ts.registry.onKeyDown(At,St)},xy=function(){kE||(Kt(document,"scroll",null,function(){const St=En();for(let At=0,Nt;Nt=St[At];At++)Nt instanceof _f&&Nt.updateInverseScreenCTM()}),Kt(document,"keydown",null,mv),ln(document,"touchend",null,Et),ln(document,"touchcancel",null,Et),bo&&Kt(window,"orientationchange",document,function(){Kn(In())})),kE=!0},wy=function(St,At){function Nt(){for(;cn.length;)hn(cn.pop());Wt.preload()}const Wt=At.getAudioManager();Wt.load([St+"click.mp3",St+"click.wav",St+"click.ogg"],"click"),Wt.load([St+"disconnect.wav",St+"disconnect.mp3",St+"disconnect.ogg"],"disconnect"),Wt.load([St+"delete.mp3",St+"delete.ogg",St+"delete.wav"],"delete");const cn=[];cn.push(Kt(document,"pointermove",null,Nt,!0)),cn.push(Kt(document,"touchstart",null,Nt,!0))},gv=function(St,At,Nt){if(St=St.getProcedureMap().get(At),!St)throw Error("Cannot rename the parameter of a procedure that does not exist in the procedure map");return St.getParameters().find(Wt=>Wt.getId()===Nt)},ju=function(){Jo.registry.register({displayText(){return To.UNDO},preconditionFn(St){return 0<St.workspace.getUndoStack().length?"enabled":"disabled"},callback(St){St.workspace.undo(!1)},scopeType:Jo.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},Cy=function(){Jo.registry.register({displayText(){return To.REDO},preconditionFn(St){return 0<St.workspace.getRedoStack().length?"enabled":"disabled"},callback(St){St.workspace.undo(!0)},scopeType:Jo.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},Ay=function(){Jo.registry.register({displayText(){return To.CLEAN_UP},preconditionFn(St){return St.workspace.isMovable()?1<St.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback(St){St.workspace.cleanUp()},scopeType:Jo.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},lO=function(St,At){function Nt(vn){cn--,vn.setCollapsed(St),cn===0&&oo(!1)}let Wt=0,cn=0;oo(!0);for(let vn=0;vn<At.length;vn++){let Pn=At[vn];for(;Pn;)cn++,setTimeout(Nt.bind(null,Pn),Wt),Pn=Pn.getNextBlock(),Wt+=10}},lp=function(){Jo.registry.register({displayText(){return To.COLLAPSE_ALL},preconditionFn(St){if(St.workspace.options.collapse){St=St.workspace.getTopBlocks(!1);for(let At=0;At<St.length;At++){let Nt=St[At];for(;Nt;){if(!Nt.isCollapsed())return"enabled";Nt=Nt.getNextBlock()}}return"disabled"}return"hidden"},callback(St){lO(!0,St.workspace.getTopBlocks(!0))},scopeType:Jo.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},Iy=function(){Jo.registry.register({displayText(){return To.EXPAND_ALL},preconditionFn(St){if(St.workspace.options.collapse){St=St.workspace.getTopBlocks(!1);for(let At=0;At<St.length;At++){let Nt=St[At];for(;Nt;){if(Nt.isCollapsed())return"enabled";Nt=Nt.getNextBlock()}}return"disabled"}return"hidden"},callback(St){lO(!1,St.workspace.getTopBlocks(!0))},scopeType:Jo.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},Ry=function(St,At){if(St.isDeletable())Array.prototype.push.apply(At,St.getDescendants(!1));else{St=St.getChildren(!1);for(let Nt=0;Nt<St.length;Nt++)Ry(St[Nt],At)}},i_=function(St){const At=[];St=St.getTopBlocks(!0);for(let Nt=0;Nt<St.length;Nt++)Ry(St[Nt],At);return At},Np=function(St,At){oo(At);const Nt=St.shift();Nt&&(Nt.isDeadOrDying()?Np(St,At):(Nt.dispose(!1,!0),setTimeout(Np,10,St,At))),oo(!1)},_v=function(){Jo.registry.register({displayText(St){return St.workspace?(St=i_(St.workspace).length,St===1?To.DELETE_BLOCK:To.DELETE_X_BLOCKS.replace("%1",String(St))):""},preconditionFn(St){return St.workspace&&0<i_(St.workspace).length?"enabled":"disabled"},callback(St){if(St.workspace){St.workspace.cancelCurrentGesture();var At=i_(St.workspace),Nt=xo();2>At.length?Np(At,Nt):Xp(To.DELETE_ALL_BLOCKS.replace("%1",String(At.length)),function(Wt){Wt&&Np(At,Nt)})}},scopeType:Jo.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},fS=function(){ju(),Cy(),Ay(),lp(),Iy(),_v()},ky=function(){Jo.registry.register({displayText(){return To.DUPLICATE_BLOCK},preconditionFn(St){return St=St.block,!St.isInFlyout&&St.isDeletable()&&St.isMovable()?St.isDuplicatable()?"enabled":"disabled":"hidden"},callback(St){St.block&&um(St.block)},scopeType:Jo.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},My=function(){Jo.registry.register({displayText(St){return St.block.getCommentIcon()?To.REMOVE_COMMENT:To.ADD_COMMENT},preconditionFn(St){return St=St.block,!St.isInFlyout&&St.workspace.options.comments&&!St.isCollapsed()&&St.isEditable()?"enabled":"hidden"},callback(St){St=St.block,St.getCommentIcon()?St.setCommentText(null):St.setCommentText("")},scopeType:Jo.ScopeType.BLOCK,id:"blockComment",weight:2})},cp=function(){Jo.registry.register({displayText(St){return St.block.getInputsInline()?To.EXTERNAL_INPUTS:To.INLINE_INPUTS},preconditionFn(St){if(St=St.block,!St.isInFlyout&&St.isMovable()&&!St.isCollapsed()){for(let At=1;At<St.inputList.length;At++)if(St.inputList[At-1].type!==No.STATEMENT&&St.inputList[At].type!==No.STATEMENT)return"enabled"}return"hidden"},callback(St){St.block.setInputsInline(!St.block.getInputsInline())},scopeType:Jo.ScopeType.BLOCK,id:"blockInline",weight:3})},Ov=function(){Jo.registry.register({displayText(St){return St.block.isCollapsed()?To.EXPAND_BLOCK:To.COLLAPSE_BLOCK},preconditionFn(St){return St=St.block,!St.isInFlyout&&St.isMovable()&&St.workspace.options.collapse?"enabled":"hidden"},callback(St){St.block.setCollapsed(!St.block.isCollapsed())},scopeType:Jo.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},up=function(){Jo.registry.register({displayText(St){return St.block.isEnabled()?To.DISABLE_BLOCK:To.ENABLE_BLOCK},preconditionFn(St){return St=St.block,!St.isInFlyout&&St.workspace.options.disable&&St.isEditable()?St.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback(St){St=St.block;const At=Ro();At||oo(!0),St.setEnabled(!St.isEnabled()),At||oo(!1)},scopeType:Jo.ScopeType.BLOCK,id:"blockDisable",weight:5})},Py=function(){Jo.registry.register({displayText(St){var At=St.block;return St=At.getDescendants(!1).length,(At=At.getNextBlock())&&(St-=At.getDescendants(!1).length),St===1?To.DELETE_BLOCK:To.DELETE_X_BLOCKS.replace("%1",String(St))},preconditionFn(St){return!St.block.isInFlyout&&St.block.isDeletable()?"enabled":"hidden"},callback(St){St.block&&St.block.checkAndDelete()},scopeType:Jo.ScopeType.BLOCK,id:"blockDelete",weight:6})},Sl=function(){Jo.registry.register({displayText(){return To.HELP},preconditionFn(St){return St=St.block,(typeof St.helpUrl=="function"?St.helpUrl():St.helpUrl)?"enabled":"hidden"},callback(St){St.block.showHelp()},scopeType:Jo.ScopeType.BLOCK,id:"blockHelp",weight:7})},pS=function(){ky(),My(),cp(),Ov(),up(),Py(),Sl()},Ly=function(){fS(),pS()},mS=function(St){const At=[];St=St.getDescendants(!1);for(let Nt=0,Wt;Wt=St[Nt];Nt++){const cn=Wt.getIcons();for(let vn=0;vn<cn.length;vn++){const Pn={location:cn[vn].getIconLocation(),icon:cn[vn]};At.push(Pn)}}return At},gS=function(St){In().hideChaff(St)},yv=function(St){vt("Blockly.resizeSvgContents","December 2021","December 2022","Blockly.WorkspaceSvg.resizeSvgContents"),oO(St)},vv=function(St){vt("Blockly.copy","December 2021","December 2022","Blockly.clipboard.copy"),Zm(St)},_S=function(){return vt("Blockly.paste","December 2021","December 2022","Blockly.clipboard.paste"),!!cm()},iu=function(St){vt("Blockly.duplicate","December 2021","December 2022","Blockly.clipboard.duplicate"),um(St)},Dy=function(St){return vt("Blockly.isNumber","December 2021","December 2022","Blockly.utils.string.isNumber"),Pm(St)},OS=function(St){return vt("Blockly.hueToHex","December 2021","December 2022","Blockly.utils.colour.hueToHex"),Dm(St)},hp=function(St,At,Nt,Wt){return vt("Blockly.bindEvent_","December 2021","December 2022","Blockly.browserEvents.bind"),ln(St,At,Nt,Wt)},cO=function(St){return vt("Blockly.unbindEvent_","December 2021","December 2022","Blockly.browserEvents.unbind"),hn(St)},Bp=function(St,At,Nt,Wt,cn,vn){return vt("Blockly.bindEventWithChecks_","December 2021","December 2022","Blockly.browserEvents.conditionalBind"),Kt(St,At,Nt,Wt,cn)},Oo=Oo||{};Oo.scope={},Oo.ASSUME_ES5=!1,Oo.ASSUME_NO_NATIVE_MAP=!1,Oo.ASSUME_NO_NATIVE_SET=!1,Oo.SIMPLE_FROUND_POLYFILL=!1,Oo.ISOLATE_POLYFILLS=!1,Oo.FORCE_POLYFILL_PROMISE=!1,Oo.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,Oo.defineProperty=Oo.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(St,At,Nt){return St==Array.prototype||St==Object.prototype||(St[At]=Nt.value),St},Oo.getGlobal=function(St){St=[typeof globalThis=="object"&&globalThis,St,typeof window=="object"&&window,typeof self=="object"&&self,typeof commonjsGlobal=="object"&&commonjsGlobal];for(var At=0;At<St.length;++At){var Nt=St[At];if(Nt&&Nt.Math==Math)return Nt}throw Error("Cannot find global object")},Oo.global=Oo.getGlobal(this),Oo.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",Oo.TRUST_ES6_POLYFILLS=!Oo.ISOLATE_POLYFILLS||Oo.IS_SYMBOL_NATIVE,Oo.polyfills={},Oo.propertyToPolyfillSymbol={},Oo.POLYFILL_PREFIX="$jscp$",Oo.polyfill=function(St,At,Nt,Wt){At&&(Oo.ISOLATE_POLYFILLS?Oo.polyfillIsolated(St,At,Nt,Wt):Oo.polyfillUnisolated(St,At,Nt,Wt))},Oo.polyfillUnisolated=function(St,At,Nt,Wt){for(Nt=Oo.global,St=St.split("."),Wt=0;Wt<St.length-1;Wt++){var cn=St[Wt];if(!(cn in Nt))return;Nt=Nt[cn]}St=St[St.length-1],Wt=Nt[St],At=At(Wt),At!=Wt&&At!=null&&Oo.defineProperty(Nt,St,{configurable:!0,writable:!0,value:At})},Oo.polyfillIsolated=function(St,At,Nt,Wt){var cn=St.split(".");St=cn.length===1,Wt=cn[0],Wt=!St&&Wt in Oo.polyfills?Oo.polyfills:Oo.global;for(var vn=0;vn<cn.length-1;vn++){var Pn=cn[vn];if(!(Pn in Wt))return;Wt=Wt[Pn]}cn=cn[cn.length-1],Nt=Oo.IS_SYMBOL_NATIVE&&Nt==="es6"?Wt[cn]:null,At=At(Nt),At!=null&&(St?Oo.defineProperty(Oo.polyfills,cn,{configurable:!0,writable:!0,value:At}):At!==Nt&&(Oo.propertyToPolyfillSymbol[cn]===void 0&&(Nt=1e9*Math.random()>>>0,Oo.propertyToPolyfillSymbol[cn]=Oo.IS_SYMBOL_NATIVE?Oo.global.Symbol(cn):Oo.POLYFILL_PREFIX+Nt+"$"+cn),Oo.defineProperty(Wt,Oo.propertyToPolyfillSymbol[cn],{configurable:!0,writable:!0,value:At})))},Oo.polyfill("globalThis",function(St){return St||Oo.global},"es_2020","es3"),Oo.polyfill("Object.getOwnPropertyDescriptors",function(St){return St||function(At){for(var Nt={},Wt=Reflect.ownKeys(At),cn=0;cn<Wt.length;cn++)Nt[Wt[cn]]=Object.getOwnPropertyDescriptor(At,Wt[cn]);return Nt}},"es8","es5"),Oo.arrayIteratorImpl=function(St){var At=0;return function(){return At<St.length?{done:!1,value:St[At++]}:{done:!0}}},Oo.arrayIterator=function(St){return{next:Oo.arrayIteratorImpl(St)}},Oo.initSymbol=function(){},Oo.iteratorPrototype=function(St){return St={next:St},St[Symbol.iterator]=function(){return this},St},Oo.iteratorFromArray=function(St,At){St instanceof String&&(St+="");var Nt=0,Wt=!1,cn={next:function(){if(!Wt&&Nt<St.length){var vn=Nt++;return{value:At(vn,St[vn]),done:!1}}return Wt=!0,{done:!0,value:void 0}}};return cn[Symbol.iterator]=function(){return cn},cn},Oo.polyfill("Array.prototype.values",function(St){return St||function(){return Oo.iteratorFromArray(this,function(At,Nt){return Nt})}},"es8","es3"),Oo.owns=function(St,At){return Object.prototype.hasOwnProperty.call(St,At)},Oo.polyfill("Object.values",function(St){return St||function(At){var Nt=[],Wt;for(Wt in At)Oo.owns(At,Wt)&&Nt.push(At[Wt]);return Nt}},"es8","es3"),Oo.polyfill("Array.prototype.flat",function(St){return St||function(At){At=At===void 0?1:At;for(var Nt=[],Wt=0;Wt<this.length;Wt++){var cn=this[Wt];Array.isArray(cn)&&0<At?(cn=Array.prototype.flat.call(cn,At-1),Nt.push.apply(Nt,cn)):Nt.push(cn)}return Nt}},"es9","es5"),Oo.polyfill("Object.entries",function(St){return St||function(At){var Nt=[],Wt;for(Wt in At)Oo.owns(At,Wt)&&Nt.push([Wt,At[Wt]]);return Nt}},"es8","es3");var qs=qs||{};qs.global=globalThis||root,qs.define=function(St,At){return At},qs.DEBUG=!1,qs.DISALLOW_TEST_ONLY_CODE=!qs.DEBUG,qs.provide=function(St){},qs.module=function(St){},qs.module.get=function(St){},qs.module.declareLegacyNamespace=function(){},qs.setTestOnly=function(St){if(qs.DISALLOW_TEST_ONLY_CODE)throw St=St||"",Error("Importing test-only code into non-debug environment"+(St?": "+St:"."))},qs.require=function(St){},qs.requireType=function(St){};var xs={};xs.warn=vt;var yS=750,Ny="ontouchstart"in globalThis||!!(globalThis.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!globalThis.navigator||!globalThis.navigator.maxTouchPoints&&!globalThis.navigator.msMaxTouchPoints),o_=null,dp={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]},s_=0,$l={};$l.TOUCH_ENABLED=Ny,$l.TOUCH_MAP=dp,$l.checkTouchIdentifier=Dt,$l.clearTouchIdentifier=Ct,$l.getTouchIdentifierFromEvent=kt,$l.isMouseOrTouchEvent=Ft,$l.isTouchEvent=Ut,$l.longStart=Tt,$l.longStop=Et,$l.setClientFromTouch=Bt,$l.shouldHandleEvent=Rt,$l.splitEventByTouches=Zt;var By,bv,Ht,zt,gn,yn,$n,Cn,Yn,cr;(function(St){function At(Wt){return Nt.indexOf(Wt.toUpperCase())!==-1}By=St;const Nt=By.toUpperCase();bv=At("JavaFX"),Ht=At("WebKit"),zt=At("Gecko")&&!Ht,gn=At("Android"),St=globalThis.navigator&&globalThis.navigator.maxTouchPoints,yn=At("iPad")||At("Macintosh")&&0<St,$n=At("iPhone")&&!yn,Cn=At("Macintosh"),Yn=yn||gn&&!At("Mobile")||At("Silk"),cr=!Yn&&($n||gn)})(globalThis.navigator&&globalThis.navigator.userAgent||"");var xr=By,zr=bv,ao=zt,ko=gn,bo=yn,os=$n,yo=Cn,Fs=cr,Is={};Is.ANDROID=ko,Is.GECKO=ao,Is.IPAD=bo,Is.IPHONE=os,Is.JavaFx=zr,Is.MAC=yo,Is.MOBILE=Fs,Is.raw=xr;var _r=40,ur=125,br={};br.bind=ln,br.conditionalBind=Kt,br.getScrollDeltaPixels=On,br.isRightButton=pn,br.isTargetInput=dn,br.mouseToSvg=mn,br.unbind=hn;var Xr=Object.create(null),po,Go,Lo,Yo,ps,jo;po=Object.create(null),Lo=null,ps=[],jo={defineBlocksWithJsonArrayInternal:Vn},dt.module$build$src$core$common={},dt.module$build$src$core$common.TEST_ONLY=jo,dt.module$build$src$core$common.createBlockDefinitionsFromJsonArray=Wn,dt.module$build$src$core$common.defineBlocks=sr,dt.module$build$src$core$common.defineBlocksWithJsonArray=Ln,dt.module$build$src$core$common.draggingConnections=ps,dt.module$build$src$core$common.getAllWorkspaces=En,dt.module$build$src$core$common.getBlockTypeCounts=zn,dt.module$build$src$core$common.getMainWorkspace=In,dt.module$build$src$core$common.getParentContainer=Hn,dt.module$build$src$core$common.getSelected=Dn,dt.module$build$src$core$common.getWorkspaceById=bn,dt.module$build$src$core$common.registerWorkspace=An,dt.module$build$src$core$common.setMainWorkspace=Rn,dt.module$build$src$core$common.setParentContainer=jn,dt.module$build$src$core$common.setSelected=Bn,dt.module$build$src$core$common.svgResize=Kn,dt.module$build$src$core$common.unregisterWorkpace=Tn;var Wl="http://www.w3.org/2000/svg",vu="http://www.w3.org/1999/xhtml",ou="http://www.w3.org/1999/xlink",fp;(function(St){St[St.ELEMENT_NODE=1]="ELEMENT_NODE",St[St.TEXT_NODE=3]="TEXT_NODE",St[St.COMMENT_NODE=8]="COMMENT_NODE",St[St.DOCUMENT_POSITION_CONTAINED_BY=16]="DOCUMENT_POSITION_CONTAINED_BY"})(fp||(fp={}));var Xu=null,vS=0,Sv=null,Gs={};Gs.HTML_NS=vu,Gs.NodeType=fp,Gs.SVG_NS=Wl,Gs.XLINK_NS=ou,Gs.addClass=ir,Gs.containsNode=Jr,Gs.createSvgElement=Mn,Gs.getFastTextWidth=Qr,Gs.getFastTextWidthWithSizeString=so,Gs.getTextWidth=kr,Gs.hasClass=Dr,Gs.insertAfter=Vr,Gs.measureFontMetrics=jr,Gs.removeClass=tr,Gs.removeClasses=mr,Gs.removeNode=Sr,Gs.setCssTransform=Yr,Gs.startTextWidthCache=_i,Gs.stopTextWidthCache=Er;var $v={};$v.clamp=ho,$v.toDegrees=uo,$v.toRadians=no;var ws=class{constructor(St,At,Nt,Wt){this.top=St,this.bottom=At,this.left=Nt,this.right=Wt}contains(St,At){return St>=this.left&&St<=this.right&&At>=this.top&&At<=this.bottom}intersects(St){return!(this.left>St.right||this.right<St.left||this.top>St.bottom||this.bottom<St.top)}},qr=class{constructor(St,At){this.x=St,this.y=At}clone(){return new qr(this.x,this.y)}scale(St){return this.x*=St,this.y*=St,this}translate(St,At){return this.x+=St,this.y+=At,this}static equals(St,At){return St===At?!0:St&&At?St.x===At.x&&St.y===At.y:!1}static distance(St,At){const Nt=St.x-At.x;return St=St.y-At.y,Math.sqrt(Nt*Nt+St*St)}static magnitude(St){return Math.sqrt(St.x*St.x+St.y*St.y)}static difference(St,At){return new qr(St.x-At.x,St.y-At.y)}static sum(St,At){return new qr(St.x+At.x,St.y+At.y)}},Ks=class{constructor(St,At){this.width=St,this.height=At}static equals(St,At){return St===At?!0:St&&At?St.width===At.width&&St.height===At.height:!1}},eT={getSizeInternal:Wo},pp={};pp.TEST_ONLY=eT,pp.getBorderBox=Fr,pp.getCascadedStyle=rr,pp.getComputedStyle=Un,pp.getContainerOffsetToScrollInto=Zr,pp.getPageOffset=yr,pp.getSize=Po,pp.getViewportPageOffset=Ir,pp.scrollIntoContainerView=pr;var Fy=16,bS=1,tT=12,SS=16,Tv=.25,$S=null,a_=null,uO="",hO="",qo,dO,l_,TS=null,Om=null,nT=null,ES={getBoundsInfo:function(){const St=yr(TS),At=Po(TS);return{left:St.x,right:St.x+At.width,top:St.y,bottom:St.y+At.height,width:At.width,height:At.height}},getPositionMetrics:function(St,At,Nt,Wt){const cn=ES.getBoundsInfo(),vn=Po(qo);return At+vn.height<cn.bottom?io(St,At,cn,vn):Wt-vn.height>cn.top?fo(Nt,Wt,cn,vn):At+vn.height<document.documentElement.clientHeight?io(St,At,cn,vn):Wt-vn.height>document.documentElement.clientTop?fo(Nt,Wt,cn,vn):rs(St,cn,vn)}},Rs={};Rs.ANIMATION_TIME=Tv,Rs.ARROW_HORIZONTAL_PADDING=tT,Rs.ARROW_SIZE=Fy,Rs.BORDER_SIZE=bS,Rs.PADDING_Y=SS,Rs.TEST_ONLY=ES,Rs.clearContent=Nr,Rs.createDom=Cr,Rs.getContentDiv=Tr,Rs.getOwner=Jn,Rs.getPositionX=cs,Rs.hide=as,Rs.hideIfOwner=Us,Rs.hideWithoutAnimation=us,Rs.isVisible=Ns,Rs.repositionForWindowResize=LO,Rs.setBoundsElement=lo,Rs.setColour=xn,Rs.show=Br,Rs.showPositionedByBlock=Nn,Rs.showPositionedByField=Zn;var ym=Object.create(null),QE={typeMap:ym},Ev=Object.create(null),Fp="default",Hr=class{constructor(St){this.name=St}toString(){return this.name}};Hr.CONNECTION_CHECKER=new Hr("connectionChecker"),Hr.CURSOR=new Hr("cursor"),Hr.EVENT=new Hr("event"),Hr.FIELD=new Hr("field"),Hr.RENDERER=new Hr("renderer"),Hr.TOOLBOX=new Hr("toolbox"),Hr.THEME=new Hr("theme"),Hr.TOOLBOX_ITEM=new Hr("toolboxItem"),Hr.FLYOUTS_VERTICAL_TOOLBOX=new Hr("flyoutsVerticalToolbox"),Hr.FLYOUTS_HORIZONTAL_TOOLBOX=new Hr("flyoutsHorizontalToolbox"),Hr.METRICS_MANAGER=new Hr("metricsManager"),Hr.BLOCK_DRAGGER=new Hr("blockDragger"),Hr.SERIALIZER=new Hr("serializer");var Yu={};Yu.DEFAULT=Fp,Yu.TEST_ONLY=QE,Yu.Type=Hr,Yu.getAllItems=$o,Yu.getClass=fr,Yu.getClassFromOptions=So,Yu.getObject=Rr,Yu.hasItem=wr,Yu.register=wo,Yu.unregister=Qn;var rT="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",iT={genUid:()=>{const St=rT.length,At=[];for(let Nt=0;20>Nt;Nt++)At[Nt]=rT.charAt(Math.random()*St);return At.join("")}},zE=0,xv={};xv.TEST_ONLY=iT,xv.genUid=xo,xv.getNextUniqueId=Do;var oT="",Gy=!0,xS=0,Tl="create",mp="delete",Qs="change",Hl="move",c_="var_create",fO="var_delete",Uy="var_rename",Vy="ui",pO="drag",vm="selected",bm="click",Wy="marker_move",Gp="bubble_open",Hy="trashcan_open",Qy="toolbox_item_select",zy="theme_change",u_="viewport_change",h_="comment_create",mO="comment_delete",jy="comment_change",Up="comment_move",gO="finished_loading",wv="procedure_create",Xy="procedure_delete",Cv="procedure_rename",Av="procedure_enable",Iv="procedure_change_return",Rv="procedure_parameter_create",kv="procedure_parameter_delete",Mv="procedure_parameter_rename",wS=[Tl,Hl,h_,Up],_O=[],CS={FIRE_QUEUE:_O,fireNow:zs,fireInternal:Os,setGroupInternal:$_},Eo={};Eo.BLOCK_CHANGE=Qs,Eo.BLOCK_CREATE=Tl,Eo.BLOCK_DELETE=mp,Eo.BLOCK_DRAG=pO,Eo.BLOCK_MOVE=Hl,Eo.BUBBLE_OPEN=Gp,Eo.BUMP_EVENTS=wS,Eo.CHANGE=Qs,Eo.CLICK=bm,Eo.COMMENT_CHANGE=jy,Eo.COMMENT_CREATE=h_,Eo.COMMENT_DELETE=mO,Eo.COMMENT_MOVE=Up,Eo.CREATE=Tl,Eo.DELETE=mp,Eo.FINISHED_LOADING=gO,Eo.MARKER_MOVE=Wy,Eo.MOVE=Hl,Eo.PROCEDURE_CHANGE_RETURN=Iv,Eo.PROCEDURE_CREATE=wv,Eo.PROCEDURE_DELETE=Xy,Eo.PROCEDURE_ENABLE=Av,Eo.PROCEDURE_PARAMETER_CREATE=Rv,Eo.PROCEDURE_PARAMETER_DELETE=kv,Eo.PROCEDURE_PARAMETER_RENAME=Mv,Eo.PROCEDURE_RENAME=Cv,Eo.SELECTED=vm,Eo.TEST_ONLY=CS,Eo.THEME_CHANGE=zy,Eo.TOOLBOX_ITEM_SELECT=Qy,Eo.TRASHCAN_OPEN=Hy,Eo.UI=Vy,Eo.VAR_CREATE=c_,Eo.VAR_DELETE=fO,Eo.VAR_RENAME=Uy,Eo.VIEWPORT_CHANGE=u_,Eo.clearPendingUndo=lu,Eo.disable=Fo,Eo.disableOrphans=Zo,Eo.enable=vo,Eo.filter=xl,Eo.fire=Gr,Eo.fromJson=cu,Eo.get=Wr,Eo.getDescendantIds=Yl,Eo.getGroup=Ro,Eo.getRecordUndo=Co,Eo.isEnabled=ss,Eo.setGroup=oo,Eo.setRecordUndo=Io;var No;(function(St){St[St.VALUE=1]="VALUE",St[St.STATEMENT=3]="STATEMENT",St[St.DUMMY=5]="DUMMY"})(No||(No={})),dt.module$build$src$core$input_types={},dt.module$build$src$core$input_types.inputTypes=No;var d_,Pv,Lv,AS;({document:d_,DOMParser:Pv,XMLSerializer:Lv}=globalThis),AS="https://developers.google.com/blockly/xml",dt.module$build$src$core$utils$xml={},dt.module$build$src$core$utils$xml.NAME_SPACE=AS,dt.module$build$src$core$utils$xml.createElement=Bo,dt.module$build$src$core$utils$xml.createTextNode=Pl,dt.module$build$src$core$utils$xml.domToText=wm,dt.module$build$src$core$utils$xml.getDocument=Cs,dt.module$build$src$core$utils$xml.injectDependencies=ys,dt.module$build$src$core$utils$xml.setDocument=js,dt.module$build$src$core$utils$xml.textToDomDocument=na;var sT=function(St,At){window.alert(St),At&&At()},aT=function(St,At){At(window.confirm(St))},lT=function(St,At,Nt){Nt(window.prompt(St,At))},cT={confirmInternal:A0},su={};su.TEST_ONLY=cT,su.alert=Cm,su.confirm=Xp,su.prompt=DO,su.setAlert=C0,su.setConfirm=uu,su.setPrompt=nS;var To,IS;To=Object.create(null),IS=function(St){Object.keys(St).forEach(function(At){To[At]=St[At]})},dt.module$build$src$core$msg={},dt.module$build$src$core$msg.Msg=To,dt.module$build$src$core$msg.setLocale=IS;var f_=class{constructor(){this.workspaceId=void 0,this.isUiEvent=!1,this.type="",this.group=Ro(),this.recordUndo=Co()}toJson(){return{type:this.type,group:this.group}}fromJson(St){this.isBlank=!1,this.group=St.group||""}static fromJson(St,At,Nt){return vt("Blockly.Events.Abstract.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),Nt.isBlank=!1,Nt.group=St.group||"",Nt.workspaceId=At.id,Nt}isNull(){return!1}run(St){}getEventWorkspace_(){let St;if(this.workspaceId&&(St=bn(this.workspaceId)),!St)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return St}},Yy=class extends f_{constructor(St){super(),this.isBlank=typeof St>"u",St&&(this.varId=St.getId(),this.workspaceId=St.workspace.id)}toJson(){const St=super.toJson();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");return St.varId=this.varId,St}fromJson(St){vt("Blockly.Events.VarBase.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(St),this.varId=St.varId}static fromJson(St,At,Nt){return At=super.fromJson(St,At,Nt??new Yy),At.varId=St.varId,At}},RS=class extends Yy{constructor(St){super(St),this.type=c_,St&&(this.varType=St.type,this.varName=St.name)}toJson(){const St=super.toJson();if(!this.varType)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return St.varType=this.varType,St.varName=this.varName,St}fromJson(St){vt("Blockly.Events.VarCreate.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(St),this.varType=St.varType,this.varName=St.varName}static fromJson(St,At,Nt){return At=super.fromJson(St,At,Nt??new RS),At.varType=St.varType,At.varName=St.varName,At}run(St){const At=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");St?At.createVariable(this.varName,this.varType,this.varId):At.deleteVariableById(this.varId)}};wo(Hr.EVENT,c_,RS);var Zy=class{constructor(St,At,Nt,Wt){this.workspace=St,this.name=At,this.type=Nt||"",this.id_=Wt||xo()}getId(){return this.id_}static compareByName(St,At){return St.name.localeCompare(At.name,void 0,{sensitivity:"base"})}},Dv,Nv,kS;Dv="VARIABLE",Nv="ijkmnopqrstuvwxyzabcdefgh",kS={generateUniqueNameInternal:rS},dt.module$build$src$core$variables={},dt.module$build$src$core$variables.CATEGORY_NAME=Dv,dt.module$build$src$core$variables.TEST_ONLY=kS,dt.module$build$src$core$variables.VAR_LETTER_OPTIONS=Nv,dt.module$build$src$core$variables.allDeveloperVariables=T_,dt.module$build$src$core$variables.allUsedVarModels=NO,dt.module$build$src$core$variables.createVariableButtonHandler=Sp,dt.module$build$src$core$variables.flyoutCategory=Yp,dt.module$build$src$core$variables.flyoutCategoryBlocks=Zp,dt.module$build$src$core$variables.generateUniqueName=Am,dt.module$build$src$core$variables.generateUniqueNameFromOptions=BO,dt.module$build$src$core$variables.generateVariableFieldDom=Ho,dt.module$build$src$core$variables.getAddedVariables=FO,dt.module$build$src$core$variables.getOrCreateVariablePackage=Im,dt.module$build$src$core$variables.getVariable=qp,dt.module$build$src$core$variables.nameUsedWithAnyType=x_,dt.module$build$src$core$variables.promptName=$p,dt.module$build$src$core$variables.renameVariable=E_;var gp=class{constructor(St,At,Nt,Wt,cn){this.workspace=St,this.editable_=this.movable_=this.deletable_=!0,this.disposed_=!1,this.isComment=!0,this.id=cn&&!St.getCommentById(cn)?cn:xo(),St.addTopComment(this),this.xy_=new qr(0,0),this.height_=Nt,this.width_=Wt,this.RTL=St.RTL,this.content_=At,gp.fireCreateEvent(this)}dispose(){this.disposed_||(ss()&&Gr(new(Wr(mO))(this)),this.workspace.removeTopComment(this),this.disposed_=!0)}getHeight(){return this.height_}setHeight(St){this.height_=St}getWidth(){return this.width_}setWidth(St){this.width_=St}getXY(){return new qr(this.xy_.x,this.xy_.y)}moveBy(St,At){const Nt=new(Wr(Up))(this);this.xy_.translate(St,At),Nt.recordNew(),Gr(Nt)}isDeletable(){return this.deletable_&&!(this.workspace&&this.workspace.options.readOnly)}setDeletable(St){this.deletable_=St}isMovable(){return this.movable_&&!(this.workspace&&this.workspace.options.readOnly)}setMovable(St){this.movable_=St}isEditable(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)}setEditable(St){this.editable_=St}getContent(){return this.content_}setContent(St){this.content_!==St&&(Gr(new(Wr(jy))(this,this.content_,St)),this.content_=St)}toXmlWithXY(St){return St=this.toXml(St),St.setAttribute("x",`${Math.round(this.xy_.x)}`),St.setAttribute("y",`${Math.round(this.xy_.y)}`),St.setAttribute("h",`${this.height_}`),St.setAttribute("w",`${this.width_}`),St}toXml(St){const At=Bo("comment");return St||(At.id=this.id),At.textContent=this.getContent(),At}static fireCreateEvent(St){if(ss()){const At=Ro();At||oo(!0);try{Gr(new(Wr(h_))(St))}finally{At||oo(!1)}}}static fromXml(St,At){var Nt=gp.parseAttributes(St);return At=new gp(At,Nt.content,Nt.h,Nt.w,Nt.id),Nt=St.getAttribute("x"),St=St.getAttribute("y"),Nt=Nt?parseInt(Nt,10):NaN,St=St?parseInt(St,10):NaN,isNaN(Nt)||isNaN(St)||At.moveBy(Nt,St),gp.fireCreateEvent(At),At}static parseAttributes(St){const At=St.getAttribute("h"),Nt=St.getAttribute("w"),Wt=St.getAttribute("x"),cn=St.getAttribute("y"),vn=St.getAttribute("id");if(!vn)throw Error("No ID present in XML comment definition.");let Pn;return{id:vn,h:At?parseInt(At):100,w:Nt?parseInt(Nt):100,x:Wt?parseInt(Wt):NaN,y:cn?parseInt(cn):NaN,content:(Pn=St.textContent)!=null?Pn:""}}},Zu=class extends f_{constructor(St){super(),this.isBlank=!0,this.recordUndo=!1,this.isUiEvent=!0,this.isBlank=typeof St>"u",this.workspaceId=St||""}},MS=class extends Zu{constructor(St,At,Nt){super(Nt),this.type=vm,this.oldElementId=St??void 0,this.newElementId=At??void 0}toJson(){const St=super.toJson();return St.oldElementId=this.oldElementId,St.newElementId=this.newElementId,St}fromJson(St){vt("Blockly.Events.Selected.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(St),this.oldElementId=St.oldElementId,this.newElementId=St.newElementId}static fromJson(St,At,Nt){return At=super.fromJson(St,At,Nt??new MS),At.oldElementId=St.oldElementId,At.newElementId=St.newElementId,At}};wo(Hr.EVENT,vm,MS);var PS=!1,LS=`
.blocklySvg {
  background-color: #fff;
  outline: none;
  overflow: hidden;  /* IE overflows by default. */
  position: absolute;
  display: block;
}

.blocklyWidgetDiv {
  display: none;
  position: absolute;
  z-index: 99999;  /* big value for bootstrap3 compatibility */
}

.injectionDiv {
  height: 100%;
  position: relative;
  overflow: hidden;  /* So blocks in drag surface disappear at edges */
  touch-action: none;
}

.blocklyNonSelectable {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
}

.blocklyWsDragSurface {
  display: none;
  position: absolute;
  top: 0;
  left: 0;
}

/* Added as a separate rule with multiple classes to make it more specific
   than a bootstrap rule that selects svg:root. See issue #1275 for context.
*/
.blocklyWsDragSurface.blocklyOverflowVisible {
  overflow: visible;
}

.blocklyBlockDragSurface {
  display: none;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: visible !important;
  z-index: 50;  /* Display below toolbox, but above everything else. */
}

.blocklyBlockCanvas.blocklyCanvasTransitioning,
.blocklyBubbleCanvas.blocklyCanvasTransitioning {
  transition: transform .5s;
}

.blocklyTooltipDiv {
  background-color: #ffffc7;
  border: 1px solid #ddc;
  box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);
  color: #000;
  display: none;
  font: 9pt sans-serif;
  opacity: .9;
  padding: 2px;
  position: absolute;
  z-index: 100000;  /* big value for bootstrap3 compatibility */
}

.blocklyDropDownDiv {
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1000;
  display: none;
  border: 1px solid;
  border-color: #dadce0;
  background-color: #fff;
  border-radius: 2px;
  padding: 4px;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownContent {
  max-height: 300px;  /* @todo: spec for maximum height. */
  overflow: auto;
  overflow-x: hidden;
  position: relative;
}

.blocklyDropDownArrow {
  position: absolute;
  left: 0;
  top: 0;
  width: 16px;
  height: 16px;
  z-index: -1;
  background-color: inherit;
  border-color: inherit;
}

.blocklyDropDownButton {
  display: inline-block;
  float: left;
  padding: 0;
  margin: 4px;
  border-radius: 4px;
  outline: none;
  border: 1px solid;
  transition: box-shadow .1s;
  cursor: pointer;
}

.blocklyArrowTop {
  border-top: 1px solid;
  border-left: 1px solid;
  border-top-left-radius: 4px;
  border-color: inherit;
}

.blocklyArrowBottom {
  border-bottom: 1px solid;
  border-right: 1px solid;
  border-bottom-right-radius: 4px;
  border-color: inherit;
}

.blocklyResizeSE {
  cursor: se-resize;
  fill: #aaa;
}

.blocklyResizeSW {
  cursor: sw-resize;
  fill: #aaa;
}

.blocklyResizeLine {
  stroke: #515A5A;
  stroke-width: 1;
}

.blocklyHighlightedConnectionPath {
  fill: none;
  stroke: #fc3;
  stroke-width: 4px;
}

.blocklyPathLight {
  fill: none;
  stroke-linecap: round;
  stroke-width: 1;
}

.blocklySelected>.blocklyPathLight {
  display: none;
}

.blocklyDraggable {
  /* backup for browsers (e.g. IE11) that don't support grab */
  cursor: url("<<<PATH>>>/handopen.cur"), auto;
  cursor: grab;
  cursor: -webkit-grab;
}

  /* backup for browsers (e.g. IE11) that don't support grabbing */
.blocklyDragging {
  /* backup for browsers (e.g. IE11) that don't support grabbing */
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

  /* Changes cursor on mouse down. Not effective in Firefox because of
     https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */
.blocklyDraggable:active {
  /* backup for browsers (e.g. IE11) that don't support grabbing */
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

/* Change the cursor on the whole drag surface in case the mouse gets
   ahead of block during a drag. This way the cursor is still a closed hand.
  */
.blocklyBlockDragSurface .blocklyDraggable {
  /* backup for browsers (e.g. IE11) that don't support grabbing */
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

.blocklyDragging.blocklyDraggingDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyDragging>.blocklyPath,
.blocklyDragging>.blocklyPathLight {
  fill-opacity: .8;
  stroke-opacity: .8;
}

.blocklyDragging>.blocklyPathDark {
  display: none;
}

.blocklyDisabled>.blocklyPath {
  fill-opacity: .5;
  stroke-opacity: .5;
}

.blocklyDisabled>.blocklyPathLight,
.blocklyDisabled>.blocklyPathDark {
  display: none;
}

.blocklyInsertionMarker>.blocklyPath,
.blocklyInsertionMarker>.blocklyPathLight,
.blocklyInsertionMarker>.blocklyPathDark {
  fill-opacity: .2;
  stroke: none;
}

.blocklyMultilineText {
  font-family: monospace;
}

.blocklyNonEditableText>text {
  pointer-events: none;
}

.blocklyFlyout {
  position: absolute;
  z-index: 20;
}

.blocklyText text {
  cursor: default;
}

/*
  Don't allow users to select text.  It gets annoying when trying to
  drag a block and selected text moves instead.
*/
.blocklySvg text,
.blocklyBlockDragSurface text {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  cursor: inherit;
}

.blocklyHidden {
  display: none;
}

.blocklyFieldDropdown:not(.blocklyHidden) {
  display: block;
}

.blocklyIconGroup {
  cursor: default;
}

.blocklyIconGroup:not(:hover),
.blocklyIconGroupReadonly {
  opacity: .6;
}

.blocklyIconShape {
  fill: #00f;
  stroke: #fff;
  stroke-width: 1px;
}

.blocklyIconSymbol {
  fill: #fff;
}

.blocklyMinimalBody {
  margin: 0;
  padding: 0;
}

.blocklyHtmlInput {
  border: none;
  border-radius: 4px;
  height: 100%;
  margin: 0;
  outline: none;
  padding: 0;
  width: 100%;
  text-align: center;
  display: block;
  box-sizing: border-box;
}

/* Edge and IE introduce a close icon when the input value is longer than a
   certain length. This affects our sizing calculations of the text input.
   Hiding the close icon to avoid that. */
.blocklyHtmlInput::-ms-clear {
  display: none;
}

.blocklyMainBackground {
  stroke-width: 1;
  stroke: #c6c6c6;  /* Equates to #ddd due to border being off-pixel. */
}

.blocklyMutatorBackground {
  fill: #fff;
  stroke: #ddd;
  stroke-width: 1;
}

.blocklyFlyoutBackground {
  fill: #ddd;
  fill-opacity: .8;
}

.blocklyMainWorkspaceScrollbar {
  z-index: 20;
}

.blocklyFlyoutScrollbar {
  z-index: 30;
}

.blocklyScrollbarHorizontal,
.blocklyScrollbarVertical {
  position: absolute;
  outline: none;
}

.blocklyScrollbarBackground {
  opacity: 0;
}

.blocklyScrollbarHandle {
  fill: #ccc;
}

.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyScrollbarHandle:hover {
  fill: #bbb;
}

/* Darken flyout scrollbars due to being on a grey background. */
/* By contrast, workspace scrollbars are on a white background. */
.blocklyFlyout .blocklyScrollbarHandle {
  fill: #bbb;
}

.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyFlyout .blocklyScrollbarHandle:hover {
  fill: #aaa;
}

.blocklyInvalidInput {
  background: #faa;
}

.blocklyVerticalMarker {
  stroke-width: 3px;
  fill: rgba(255,255,255,.5);
  pointer-events: none;
}

.blocklyComputeCanvas {
  position: absolute;
  width: 0;
  height: 0;
}

.blocklyNoPointerEvents {
  pointer-events: none;
}

.blocklyContextMenu {
  border-radius: 4px;
  max-height: 100%;
}

.blocklyDropdownMenu {
  border-radius: 2px;
  padding: 0 !important;
}

.blocklyDropdownMenu .blocklyMenuItem {
  /* 28px on the left for icon or checkbox. */
  padding-left: 28px;
}

/* BiDi override for the resting state. */
.blocklyDropdownMenu .blocklyMenuItemRtl {
  /* Flip left/right padding for BiDi. */
  padding-left: 5px;
  padding-right: 28px;
}

.blocklyWidgetDiv .blocklyMenu {
  background: #fff;
  border: 1px solid transparent;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
  font: normal 13px Arial, sans-serif;
  margin: 0;
  outline: none;
  padding: 4px 0;
  position: absolute;
  overflow-y: auto;
  overflow-x: hidden;
  max-height: 100%;
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

.blocklyWidgetDiv .blocklyMenu.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv .blocklyMenu {
  background: inherit;  /* Compatibility with gapi, reset from goog-menu */
  border: inherit;  /* Compatibility with gapi, reset from goog-menu */
  font: normal 13px "Helvetica Neue", Helvetica, sans-serif;
  outline: none;
  position: relative;  /* Compatibility with gapi, reset from goog-menu */
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

/* State: resting. */
.blocklyMenuItem {
  border: none;
  color: #000;
  cursor: pointer;
  list-style: none;
  margin: 0;
  /* 7em on the right for shortcut. */
  min-width: 7em;
  padding: 6px 15px;
  white-space: nowrap;
}

/* State: disabled. */
.blocklyMenuItemDisabled {
  color: #ccc;
  cursor: inherit;
}

/* State: hover. */
.blocklyMenuItemHighlight {
  background-color: rgba(0,0,0,.1);
}

/* State: selected/checked. */
.blocklyMenuItemCheckbox {
  height: 16px;
  position: absolute;
  width: 16px;
}

.blocklyMenuItemSelected .blocklyMenuItemCheckbox {
  background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;
  float: left;
  margin-left: -24px;
  position: static;  /* Scroll with the menu. */
}

.blocklyMenuItemRtl .blocklyMenuItemCheckbox {
  float: right;
  margin-right: -24px;
}
`,DS={};DS.inject=Ms,DS.register=hu;var ar=class{constructor(St){this.tagName=St}toString(){return this.tagName}};ar.ANIMATE=new ar("animate"),ar.CIRCLE=new ar("circle"),ar.CLIPPATH=new ar("clipPath"),ar.DEFS=new ar("defs"),ar.FECOMPOSITE=new ar("feComposite"),ar.FECOMPONENTTRANSFER=new ar("feComponentTransfer"),ar.FEFLOOD=new ar("feFlood"),ar.FEFUNCA=new ar("feFuncA"),ar.FEGAUSSIANBLUR=new ar("feGaussianBlur"),ar.FEPOINTLIGHT=new ar("fePointLight"),ar.FESPECULARLIGHTING=new ar("feSpecularLighting"),ar.FILTER=new ar("filter"),ar.FOREIGNOBJECT=new ar("foreignObject"),ar.G=new ar("g"),ar.IMAGE=new ar("image"),ar.LINE=new ar("line"),ar.PATH=new ar("path"),ar.PATTERN=new ar("pattern"),ar.POLYGON=new ar("polygon"),ar.RECT=new ar("rect"),ar.SVG=new ar("svg"),ar.TEXT=new ar("text"),ar.TSPAN=new ar("tspan");var uT=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,hT=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,jE={XY_REGEX:uT,XY_STYLE_REGEX:hT},Sm={};Sm.TEST_ONLY=jE,Sm.getDocumentScroll=Kp,Sm.getInjectionDivXY=w_,Sm.getRelativeXY=Ll,Sm.getViewportBBox=GO,Sm.is3dSupported=C_,Sm.screenToWsCoordinates=du;var El=8,Bv=3,XE=2,Il=class extends gp{constructor(St,At,Nt,Wt,cn){super(St,At,Nt,Wt,cn),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.eventsInit_=!1,this.deleteIconBorder_=this.deleteGroup_=this.resizeGroup_=this.foreignObject_=this.svgHandleTarget_=this.svgRectTarget_=this.textarea_=null,this.rendered_=this.autoLayout_=this.focused_=!1,this.svgGroup_=Mn(ar.G,{class:"blocklyComment"}),this.svgGroup_.translate_="",this.workspace=St,this.svgRect_=Mn(ar.RECT,{class:"blocklyCommentRect",x:0,y:0,rx:Bv,ry:Bv}),this.svgGroup_.appendChild(this.svgRect_),this.useDragSurface_=!!St.getBlockDragSurface(),this.render()}dispose(){this.disposed_||(Dn()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),ss()&&Gr(new(Wr(mO))(this)),Sr(this.svgGroup_),this.disposeInternal_(),Fo(),super.dispose(),vo())}initSvg(St){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");this.workspace.options.readOnly||this.eventsInit_||(Kt(this.svgRectTarget_,"pointerdown",this,this.pathMouseDown_),Kt(this.svgHandleTarget_,"pointerdown",this,this.pathMouseDown_)),this.eventsInit_=!0,this.updateMovable(),this.getSvgRoot().parentNode||this.workspace.getBubbleCanvas().appendChild(this.getSvgRoot()),!St&&this.textarea_&&this.textarea_.select()}pathMouseDown_(St){const At=this.workspace.getGesture(St);At&&At.handleBubbleStart(St,this)}showContextMenu(St){throw Error("The implementation of showContextMenu should be monkey-patched in by blockly.ts")}select(){if(Dn()!==this){var St=null;if(Dn()){St=Dn().id,Fo();try{Dn().unselect()}finally{vo()}}St=new(Wr(vm))(St,this.id,this.workspace.id),Gr(St),Bn(this),this.addSelect()}}unselect(){if(Dn()===this){var St=new(Wr(vm))(this.id,null,this.workspace.id);Gr(St),Bn(null),this.removeSelect(),this.blurFocus()}}addSelect(){ir(this.svgGroup_,"blocklySelected"),this.setFocus()}removeSelect(){ir(this.svgGroup_,"blocklySelected"),this.blurFocus()}addFocus(){ir(this.svgGroup_,"blocklyFocused")}removeFocus(){tr(this.svgGroup_,"blocklyFocused")}getRelativeToSurfaceXY(){let St=0,At=0;const Nt=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null;let Wt=this.getSvgRoot();if(Wt)do{var cn=Ll(Wt);St+=cn.x,At+=cn.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()===Wt&&(cn=this.workspace.getBlockDragSurface().getSurfaceTranslation(),St+=cn.x,At+=cn.y),Wt=Wt.parentNode}while(Wt&&Wt!==this.workspace.getBubbleCanvas()&&Wt!==Nt);return this.xy_=new qr(St,At)}moveBy(St,At){const Nt=new(Wr(Up))(this),Wt=this.getRelativeToSurfaceXY();this.translate(Wt.x+St,Wt.y+At),this.xy_=new qr(Wt.x+St,Wt.y+At),Nt.recordNew(),Gr(Nt),this.workspace.resizeContents()}translate(St,At){this.xy_=new qr(St,At),this.getSvgRoot().setAttribute("transform","translate("+St+","+At+")")}moveToDragSurface(){if(this.useDragSurface_){var St=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(St.x,St.y),this.workspace.getBlockDragSurface().setBlocksAndShow(this.getSvgRoot())}}moveDuringDrag(St,At){St?St.translateSurface(At.x,At.y):(this.svgGroup_.translate_="translate("+At.x+","+At.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))}moveTo(St,At){this.translate(St,At)}clearTransformAttributes_(){this.getSvgRoot().removeAttribute("transform")}getBoundingRectangle(){var St=this.getRelativeToSurfaceXY();const At=this.getHeightWidth(),Nt=St.y,Wt=St.y+At.height;let cn;return this.RTL?(cn=St.x-At.width,St=St.x):(cn=St.x,St=St.x+At.width),new ws(Nt,Wt,cn,St)}updateMovable(){this.isMovable()?ir(this.svgGroup_,"blocklyDraggable"):tr(this.svgGroup_,"blocklyDraggable")}setMovable(St){super.setMovable(St),this.updateMovable()}setEditable(St){super.setEditable(St),this.textarea_&&(this.textarea_.readOnly=!St)}setDragging(St){St?(St=this.getSvgRoot(),St.translate_="",St.skew_="",ir(this.svgGroup_,"blocklyDragging")):tr(this.svgGroup_,"blocklyDragging")}getSvgRoot(){return this.svgGroup_}getContent(){return this.textarea_?this.textarea_.value:this.content_}setContent(St){super.setContent(St),this.textarea_&&(this.textarea_.value=St)}setDeleteStyle(St){St?ir(this.svgGroup_,"blocklyDraggingDelete"):tr(this.svgGroup_,"blocklyDraggingDelete")}setAutoLayout(St){}toXmlWithXY(St){let At=0;this.workspace.RTL&&(At=this.workspace.getWidth()),St=this.toXml(St);const Nt=this.getRelativeToSurfaceXY();return St.setAttribute("x",Math.round(this.workspace.RTL?At-Nt.x:Nt.x)),St.setAttribute("y",Math.round(Nt.y)),St.setAttribute("h",this.getHeight()),St.setAttribute("w",this.getWidth()),St}toCopyData(){return{saveInfo:this.toXmlWithXY(),source:this.workspace,typeCounts:null}}getHeightWidth(){return{width:this.getWidth(),height:this.getHeight()}}render(){if(!this.rendered_){var St=this.getHeightWidth();this.createEditor_(),this.svgGroup_.appendChild(this.foreignObject_),this.svgHandleTarget_=Mn(ar.RECT,{class:"blocklyCommentHandleTarget",x:0,y:0}),this.svgGroup_.appendChild(this.svgHandleTarget_),this.svgRectTarget_=Mn(ar.RECT,{class:"blocklyCommentTarget",x:0,y:0,rx:Bv,ry:Bv}),this.svgGroup_.appendChild(this.svgRectTarget_),this.addResizeDom_(),this.isDeletable()&&this.addDeleteDom_(),this.setSize_(St.width,St.height),this.textarea_.value=this.content_,this.rendered_=!0,this.resizeGroup_&&Kt(this.resizeGroup_,"pointerdown",this,this.resizeMouseDown_),this.isDeletable()&&(Kt(this.deleteGroup_,"pointerdown",this,this.deleteMouseDown_),Kt(this.deleteGroup_,"pointerout",this,this.deleteMouseOut_),Kt(this.deleteGroup_,"pointerup",this,this.deleteMouseUp_))}}createEditor_(){this.foreignObject_=Mn(ar.FOREIGNOBJECT,{x:0,y:Il.TOP_OFFSET,class:"blocklyCommentForeignObject"});const St=document.createElementNS(vu,"body");St.setAttribute("xmlns",vu),St.className="blocklyMinimalBody";const At=document.createElementNS(vu,"textarea");return At.className="blocklyCommentTextarea",At.setAttribute("dir",this.RTL?"RTL":"LTR"),At.readOnly=!this.isEditable(),St.appendChild(At),this.textarea_=At,this.foreignObject_.appendChild(St),Kt(At,"wheel",this,function(Nt){Nt.stopPropagation()}),Kt(At,"change",this,function(Nt){this.setContent(At.value)}),this.foreignObject_}addResizeDom_(){this.resizeGroup_=Mn(ar.G,{class:this.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.svgGroup_),Mn(ar.POLYGON,{points:"0,x x,x x,0".replace(/x/g,El.toString())},this.resizeGroup_),Mn(ar.LINE,{class:"blocklyResizeLine",x1:El/3,y1:El-1,x2:El-1,y2:El/3},this.resizeGroup_),Mn(ar.LINE,{class:"blocklyResizeLine",x1:2*El/3,y1:El-1,x2:El-1,y2:2*El/3},this.resizeGroup_)}addDeleteDom_(){this.deleteGroup_=Mn(ar.G,{class:"blocklyCommentDeleteIcon"},this.svgGroup_),this.deleteIconBorder_=Mn(ar.CIRCLE,{class:"blocklyDeleteIconShape",r:"7",cx:"7.5",cy:"7.5"},this.deleteGroup_),Mn(ar.LINE,{x1:"5",y1:"10",x2:"10",y2:"5",stroke:"#fff","stroke-width":"2"},this.deleteGroup_),Mn(ar.LINE,{x1:"5",y1:"5",x2:"10",y2:"10",stroke:"#fff","stroke-width":"2"},this.deleteGroup_)}resizeMouseDown_(St){this.unbindDragEvents_(),pn(St)||(this.workspace.startDrag(St,new qr(this.workspace.RTL?-this.width_:this.width_,this.height_)),this.onMouseUpWrapper_=Kt(document,"pointerup",this,this.resizeMouseUp_),this.onMouseMoveWrapper_=Kt(document,"pointermove",this,this.resizeMouseMove_),this.workspace.hideChaff()),St.stopPropagation()}deleteMouseDown_(St){this.deleteIconBorder_&&ir(this.deleteIconBorder_,"blocklyDeleteIconHighlighted"),St.stopPropagation()}deleteMouseOut_(St){this.deleteIconBorder_&&tr(this.deleteIconBorder_,"blocklyDeleteIconHighlighted")}deleteMouseUp_(St){this.dispose(),St.stopPropagation()}unbindDragEvents_(){this.onMouseUpWrapper_&&(hn(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(hn(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}resizeMouseUp_(St){Ct(),this.unbindDragEvents_()}resizeMouseMove_(St){this.autoLayout_=!1,St=this.workspace.moveDrag(St),this.setSize_(this.RTL?-St.x:St.x,St.y)}resizeComment_(){const St=this.getHeightWidth(),At=Il.TOP_OFFSET,Nt=2*XE;this.foreignObject_.setAttribute("width",St.width),this.foreignObject_.setAttribute("height",(St.height-At).toString()),this.RTL&&this.foreignObject_.setAttribute("x",(-St.width).toString()),this.textarea_.style.width=St.width-Nt+"px",this.textarea_.style.height=St.height-Nt-At+"px"}setSize_(St,At){St=Math.max(St,45),At=Math.max(At,20+Il.TOP_OFFSET),this.width_=St,this.height_=At,this.svgRect_.setAttribute("width",St),this.svgRect_.setAttribute("height",At),this.svgRectTarget_.setAttribute("width",St),this.svgRectTarget_.setAttribute("height",At),this.svgHandleTarget_.setAttribute("width",St),this.svgHandleTarget_.setAttribute("height",Il.TOP_OFFSET),this.RTL&&(this.svgRect_.setAttribute("transform","scale(-1 1)"),this.svgRectTarget_.setAttribute("transform","scale(-1 1)")),this.resizeGroup_&&(this.RTL?(this.resizeGroup_.setAttribute("transform","translate("+(-St+El)+","+(At-El)+") scale(-1 1)"),this.deleteGroup_.setAttribute("transform","translate("+(-St+El)+","+-El+") scale(-1 1)")):(this.resizeGroup_.setAttribute("transform","translate("+(St-El)+","+(At-El)+")"),this.deleteGroup_.setAttribute("transform","translate("+(St-El)+","+-El+")"))),this.resizeComment_()}disposeInternal_(){this.svgHandleTarget_=this.svgRectTarget_=this.foreignObject_=this.textarea_=null,this.disposed_=!0}setFocus(){this.focused_=!0,setTimeout(()=>{this.disposed_||(this.textarea_.focus(),this.addFocus(),this.svgRectTarget_&&ir(this.svgRectTarget_,"blocklyCommentTargetFocused"),this.svgHandleTarget_&&ir(this.svgHandleTarget_,"blocklyCommentHandleTargetFocused"))},0)}blurFocus(){this.focused_=!1,setTimeout(()=>{this.disposed_||(this.textarea_.blur(),this.removeFocus(),this.svgRectTarget_&&tr(this.svgRectTarget_,"blocklyCommentTargetFocused"),this.svgHandleTarget_&&tr(this.svgHandleTarget_,"blocklyCommentHandleTargetFocused"))},0)}static fromXmlRendered(St,At,Nt){Fo();let Wt;try{const cn=gp.parseAttributes(St);if(Wt=new Il(At,cn.content,cn.h,cn.w,cn.id),At.rendered&&(Wt.initSvg(!0),Wt.render()),!isNaN(cn.x)&&!isNaN(cn.y))if(At.RTL){const vn=Nt||At.getWidth();Wt.moveBy(vn-cn.x,cn.y)}else Wt.moveBy(cn.x,cn.y)}finally{vo()}return gp.fireCreateEvent(Wt),Wt}};Il.DEFAULT_SIZE=100,Il.TOP_OFFSET=10,hu(`
.blocklyCommentForeignObject {
  position: relative;
  z-index: 0;
}

.blocklyCommentRect {
  fill: #E7DE8E;
  stroke: #bcA903;
  stroke-width: 1px;
}

.blocklyCommentTarget {
  fill: transparent;
  stroke: #bcA903;
}

.blocklyCommentTargetFocused {
  fill: none;
}

.blocklyCommentHandleTarget {
  fill: none;
}

.blocklyCommentHandleTargetFocused {
  fill: transparent;
}

.blocklyFocused>.blocklyCommentRect {
  fill: #B9B272;
  stroke: #B9B272;
}

.blocklySelected>.blocklyCommentTarget {
  stroke: #fc3;
  stroke-width: 3px;
}

.blocklyCommentDeleteIcon {
  cursor: pointer;
  fill: #000;
  display: none;
}

.blocklySelected > .blocklyCommentDeleteIcon {
  display: block;
}

.blocklyDeleteIconShape {
  fill: #000;
  stroke: #000;
  stroke-width: 1px;
}

.blocklyDeleteIconShape.blocklyDeleteIconHighlighted {
  stroke: #fc3;
}
`),dt.module$build$src$core$xml={},dt.module$build$src$core$xml.appendDomToWorkspace=fu,dt.module$build$src$core$xml.blockToDom=Fu,dt.module$build$src$core$xml.blockToDomWithXY=Dl,dt.module$build$src$core$xml.clearWorkspaceAndLoadFromXml=I_,dt.module$build$src$core$xml.deleteNext=QO,dt.module$build$src$core$xml.domToBlock=Gu,dt.module$build$src$core$xml.domToPrettyText=xu,dt.module$build$src$core$xml.domToText=Zl,dt.module$build$src$core$xml.domToVariables=km,dt.module$build$src$core$xml.domToWorkspace=Rm,dt.module$build$src$core$xml.textToDom=ga,dt.module$build$src$core$xml.variablesToDom=R0,dt.module$build$src$core$xml.workspaceToDom=oS;var OO=class extends f_{constructor(St){super(),this.isBlank=!St,St&&(this.blockId=St.id,this.workspaceId=St.workspace.id)}toJson(){const St=super.toJson();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return St.blockId=this.blockId,St}fromJson(St){vt("Blockly.Events.BlockBase.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(St),this.blockId=St.blockId}static fromJson(St,At,Nt){return At=super.fromJson(St,At,Nt??new OO),At.blockId=St.blockId,At}},p_=class extends OO{constructor(St,At,Nt,Wt,cn){super(St),this.type=Qs,St&&(this.element=At,this.name=Nt||void 0,this.oldValue=Wt,this.newValue=cn)}toJson(){const St=super.toJson();if(!this.element)throw Error("The changed element is undefined. Either pass an element to the constructor, or call fromJson");return St.element=this.element,St.name=this.name,St.oldValue=this.oldValue,St.newValue=this.newValue,St}fromJson(St){vt("Blockly.Events.BlockChange.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(St),this.element=St.element,this.name=St.name,this.oldValue=St.oldValue,this.newValue=St.newValue}static fromJson(St,At,Nt){return At=super.fromJson(St,At,Nt??new p_),At.element=St.element,At.name=St.name,At.oldValue=St.oldValue,At.newValue=St.newValue,At}isNull(){return this.oldValue===this.newValue}run(St){var At=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(At=At.getBlockById(this.blockId),!At)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");switch(At.mutator&&At.mutator.setVisible(!1),St=St?this.newValue:this.oldValue,this.element){case"field":(At=At.getField(this.name))?At.setValue(St):console.warn("Can't set non-existent field: "+this.name);break;case"comment":At.setCommentText(St||null);break;case"collapsed":At.setCollapsed(!!St);break;case"disabled":At.setEnabled(!St);break;case"inline":At.setInputsInline(!!St);break;case"mutation":const Nt=p_.getExtraBlockState_(At);At.loadExtraState?At.loadExtraState(JSON.parse(St||"{}")):At.domToMutation&&At.domToMutation(ga(St||"<mutation/>")),Gr(new p_(At,"mutation",null,Nt,St));break;default:console.warn("Unknown change type: "+this.element)}}static getExtraBlockState_(St){return St.saveExtraState?(St=St.saveExtraState())?JSON.stringify(St):"":St.mutationToDom&&(St=St.mutationToDom())?Zl(St):""}};wo(Hr.EVENT,Qs,p_);var qy=class{constructor(St){this.workspace=St,this.cursorSvg_=this.cursor_=null,this.markers=new Map,this.markerSvg_=null}registerMarker(St,At){this.markers.has(St)&&this.unregisterMarker(St),At.setDrawer(this.workspace.getRenderer().makeMarkerDrawer(this.workspace,At)),this.setMarkerSvg(At.getDrawer().createDom()),this.markers.set(St,At)}unregisterMarker(St){const At=this.markers.get(St);if(At)At.dispose(),this.markers.delete(St);else throw Error("Marker with ID "+St+" does not exist. Can only unregister markers that exist.")}getCursor(){return this.cursor_}getMarker(St){return this.markers.get(St)||null}setCursor(St){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=St)&&(St=this.workspace.getRenderer().makeMarkerDrawer(this.workspace,this.cursor_),this.cursor_.setDrawer(St),this.setCursorSvg(this.cursor_.getDrawer().createDom()))}setCursorSvg(St){St?(this.workspace.getBlockCanvas().appendChild(St),this.cursorSvg_=St):this.cursorSvg_=null}setMarkerSvg(St){St?this.workspace.getBlockCanvas()&&(this.cursorSvg_?this.workspace.getBlockCanvas().insertBefore(St,this.cursorSvg_):this.workspace.getBlockCanvas().appendChild(St)):this.markerSvg_=null}updateMarkers(){this.workspace.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace.getCursor().draw()}dispose(){const St=Object.keys(this.markers);for(let At=0,Nt;Nt=St[At];At++)this.unregisterMarker(Nt);this.markers.clear(),this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)}};qy.LOCAL_MARKER="local_marker_1",dt.module$build$src$core$utils$string={},dt.module$build$src$core$utils$string.commonWordPrefix=Uu,dt.module$build$src$core$utils$string.commonWordSuffix=Mm,dt.module$build$src$core$utils$string.isNumber=Pm,dt.module$build$src$core$utils$string.shortestStringLength=_c,dt.module$build$src$core$utils$string.startsWith=M0,dt.module$build$src$core$utils$string.wrap=zO;var Fv=void 0,Ky=!1,yO=!1,dT=50,fT=0,Jy=0,NS=0,BS=0,Lu=null,e0=null,FS=0,GS=10,pT=10,mT=750,Gv=5,Ls=null,ks={};ks.HOVER_MS=mT,ks.LIMIT=dT,ks.MARGINS=Gv,ks.OFFSET_X=FS,ks.OFFSET_Y=GS,ks.RADIUS_OK=pT,ks.bindMouseEvents=Ep,ks.block=ZO,ks.createDom=Lm,ks.dispose=Au,ks.getCustomTooltip=L0,ks.getDiv=YO,ks.getTooltipOfObject=wu,ks.hide=Nl,ks.isVisible=D0,ks.setCustomTooltip=P0,ks.unbindMouseEvents=ba,ks.unblock=P_;var US=.45,VS=.65,gT={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},Rl={};Rl.blend=mu,Rl.getHsvSaturation=tm,Rl.getHsvValue=KO,Rl.hexToRgb=L_,Rl.hsvToHex=wp,Rl.hueToHex=Dm,Rl.names=gT,Rl.parse=Vu,Rl.rgbToHex=nm,Rl.setHsvSaturation=pu,Rl.setHsvValue=N0;var t0={};t0.checkMessageReferences=Nm,t0.parseBlockColour=gu,t0.replaceMessageReferences=fs,t0.tokenizeInterpolation=im;var YE=class{},Uv=null,Vv=null,vO="",bO="",qu,Ku={};Ku.createDom=Gl,Ku.getDiv=Ap,Ku.hide=$a,Ku.hideIfOwner=Fm,Ku.isVisible=_u,Ku.positionWithAnchor=JO,Ku.show=Ip,Ku.testOnly_setDiv=Bm;var Qo=class{constructor(St,At,Nt){this.DEFAULT_VALUE=null,this.name=void 0,this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=this.tooltip_=this.validator_=null,this.disposed=!1,this.maxDisplayLength=50,this.sourceBlock_=null,this.enabled_=this.visible_=this.isDirty_=!0,this.suffixField=this.prefixField=this.clickTarget_=null,this.EDITABLE=!0,this.SERIALIZABLE=!1,this.CURSOR="",this.value_="DEFAULT_VALUE"in new.target.prototype?new.target.prototype.DEFAULT_VALUE:this.DEFAULT_VALUE,this.size_=new Ks(0,0),St!==Qo.SKIP_SETUP&&(Nt&&this.configure_(Nt),this.setValue(St),At&&this.setValidator(At))}configure_(St){St.tooltip&&this.setTooltip(fs(St.tooltip))}setSourceBlock(St){if(this.sourceBlock_)throw Error("Field already bound to a block");this.sourceBlock_=St}getConstants(){return!this.constants_&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_}getSourceBlock(){return this.sourceBlock_}init(){this.fieldGroup_||(this.fieldGroup_=Mn(ar.G,{}),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())}initView(){this.createBorderRect_(),this.createTextElement_()}initModel(){}createBorderRect_(){this.borderRect_=Mn(ar.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)}createTextElement_(){this.textElement_=Mn(ar.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)}bindEvents_(){const St=this.getClickTarget_();if(!St)throw Error("A click target has not been set.");Ep(St),this.mouseDownWrapper_=Kt(St,"pointerdown",this,this.onMouseDown_)}fromXml(St){this.setValue(St.textContent)}toXml(St){return St.textContent=this.getValue(),St}saveState(St){return St=this.saveLegacyState(Qo),St!==null?St:this.getValue()}loadState(St){this.loadLegacyState(Qo,St)||this.setValue(St)}saveLegacyState(St){return St.prototype.saveState===this.saveState&&St.prototype.toXml!==this.toXml?(St=Bo("field"),St.setAttribute("name",this.name||""),Zl(this.toXml(St)).replace(' xmlns="https://developers.google.com/blockly/xml"',"")):null}loadLegacyState(St,At){return St.prototype.loadState===this.loadState&&St.prototype.fromXml!==this.fromXml?(this.fromXml(ga(At)),!0):!1}dispose(){Us(this),Fm(this),ba(this.getClickTarget_()),this.mouseDownWrapper_&&hn(this.mouseDownWrapper_),Sr(this.fieldGroup_),this.disposed=!0}updateEditable(){const St=this.fieldGroup_,At=this.getSourceBlock();this.EDITABLE&&St&&At&&(this.enabled_&&At.isEditable()?(ir(St,"blocklyEditableText"),tr(St,"blocklyNonEditableText"),St.style.cursor=this.CURSOR):(ir(St,"blocklyNonEditableText"),tr(St,"blocklyEditableText"),St.style.cursor=""))}setEnabled(St){this.enabled_=St,this.updateEditable()}isEnabled(){return this.enabled_}isClickable(){return this.enabled_&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&this.showEditor_!==Qo.prototype.showEditor_}isCurrentlyEditable(){return this.enabled_&&this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()}isSerializable(){let St=!1;return this.name&&(this.SERIALIZABLE?St=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),St=!0)),St}isVisible(){return this.visible_}setVisible(St){if(this.visible_!==St){this.visible_=St;var At=this.fieldGroup_;At&&(At.style.display=St?"block":"none")}}setValidator(St){this.validator_=St}getValidator(){return this.validator_}getSvgRoot(){return this.fieldGroup_}getBorderRect(){if(!this.borderRect_)throw Error(`The border rectangle is ${this.borderRect_}.`);return this.borderRect_}getTextElement(){if(!this.textElement_)throw Error(`The text element is ${this.textElement_}.`);return this.textElement_}getTextContent(){if(!this.textContent_)throw Error(`The text content is ${this.textContent_}.`);return this.textContent_}applyColour(){}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()}showEditor(St){this.isClickable()&&this.showEditor_(St)}showEditor_(St){}updateSize_(St){const At=this.getConstants();St=St!==void 0?St:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let Nt=2*St,Wt=At.FIELD_TEXT_HEIGHT,cn=0;this.textElement_&&(cn=Qr(this.textElement_,At.FIELD_TEXT_FONTSIZE,At.FIELD_TEXT_FONTWEIGHT,At.FIELD_TEXT_FONTFAMILY),Nt+=cn),this.borderRect_&&(Wt=Math.max(Wt,At.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=Wt,this.size_.width=Nt,this.positionTextElement_(St,cn),this.positionBorderRect_()}positionTextElement_(St,At){if(this.textElement_){var Nt=this.getConstants(),Wt=this.size_.height/2,cn;this.textElement_.setAttribute("x",`${(cn=this.getSourceBlock())!=null&&cn.RTL?this.size_.width-At-St:St}`),this.textElement_.setAttribute("y",`${Nt.FIELD_TEXT_BASELINE_CENTER?Wt:Wt-Nt.FIELD_TEXT_HEIGHT/2+Nt.FIELD_TEXT_BASELINE}`)}}positionBorderRect_(){this.borderRect_&&(this.borderRect_.setAttribute("width",`${this.size_.width}`),this.borderRect_.setAttribute("height",`${this.size_.height}`),this.borderRect_.setAttribute("rx",`${this.getConstants().FIELD_BORDER_RECT_RADIUS}`),this.borderRect_.setAttribute("ry",`${this.getConstants().FIELD_BORDER_RECT_RADIUS}`))}getSize(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&this.size_.width===0&&(this.render_(),this.size_.width!==0&&console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead.")),this.size_):new Ks(0,0)}getScaledBBox(){let St;var At=this.getSourceBlock();if(!At)throw new Ds;if(this.borderRect_){var Nt=this.borderRect_.getBoundingClientRect();St=yr(this.borderRect_),At=Nt.width,Nt=Nt.height}else{Nt=this.sourceBlock_.getHeightWidth();const Wt=At.workspace.scale;St=this.getAbsoluteXY_(),At=(Nt.width+1)*Wt,Nt=(Nt.height+1)*Wt,ao?(St.x+=1.5*Wt,St.y+=1.5*Wt):(St.x-=.5*Wt,St.y-=.5*Wt)}return new ws(St.y,St.y+Nt,St.x,St.x+At)}getDisplayText_(){let St=this.getText();return St?(St.length>this.maxDisplayLength&&(St=St.substring(0,this.maxDisplayLength-2)+"…"),St=St.replace(/\s/g,Qo.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(St+="‏"),St):Qo.NBSP}getText(){const St=this.getText_();return String(St!==null?St:this.getValue())}getText_(){return null}markDirty(){this.isDirty_=!0,this.constants_=null}forceRerender(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours(),this.updateMarkers_())}setValue(St){if(St!==null){var At=this.doClassValidation_(St);if(St=this.processValidation_(St,At),!(St instanceof Error)){if((At=this.getValidator())&&(At=At.call(this,St),St=this.processValidation_(St,At),St instanceof Error))return;if(At=this.sourceBlock_,!At||!At.disposed){var Nt=this.getValue();Nt===St?this.doValueUpdate_(St):(this.doValueUpdate_(St),At&&ss()&&Gr(new(Wr(Qs))(At,"field",this.name||null,Nt,St)),this.isDirty_&&this.forceRerender())}}}}processValidation_(St,At){return At===null?(this.doValueInvalid_(St),this.isDirty_&&this.forceRerender(),Error()):(At!==void 0&&(St=At),St)}getValue(){return this.value_}doClassValidation_(St){return St??null}doValueUpdate_(St){this.value_=St,this.isDirty_=!0}doValueInvalid_(St){}onMouseDown_(St){this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&(St=this.sourceBlock_.workspace.getGesture(St))&&St.setStartField(this)}setTooltip(St){St||St===""||(St=this.sourceBlock_);const At=this.getClickTarget_();At?At.tooltip=St:this.tooltip_=St}getTooltip(){const St=this.getClickTarget_();return wu(St||{tooltip:this.tooltip_})}getClickTarget_(){return this.clickTarget_||this.getSvgRoot()}getAbsoluteXY_(){return yr(this.getClickTarget_())}referencesVariables(){return!1}refreshVariableName(){}getParentInput(){let St=null;const At=this.getSourceBlock();if(!At)throw new Ds;const Nt=At.inputList;for(let Wt=0;Wt<At.inputList.length;Wt++){const cn=Nt[Wt],vn=cn.fieldRow;for(let Pn=0;Pn<vn.length;Pn++)if(vn[Pn]===this){St=cn;break}}return St}getFlipRtl(){return!1}isTabNavigable(){return!1}onShortcut(St){return!1}setCursorSvg(St){if(St){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(St),this.cursorSvg_=St}else this.cursorSvg_=null}setMarkerSvg(St){if(St){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(St),this.markerSvg_=St}else this.markerSvg_=null}updateMarkers_(){var St=this.getSourceBlock();if(!St)throw new Ds;St=St.workspace,St.keyboardAccessibilityMode&&this.cursorSvg_&&St.getCursor().draw(),St.keyboardAccessibilityMode&&this.markerSvg_&&St.getMarker(qy.LOCAL_MARKER).draw()}};Qo.NBSP=" ",Qo.SKIP_SETUP=new YE;var Ds=class extends Error{constructor(){super("The field has not yet been attached to its input. Call appendField to attach it.")}},_T={fromJsonInternal:D_},n0={};n0.TEST_ONLY=_T,n0.fromJson=Gm,n0.register=xa,n0.unregister=ty;var ZE="aria-",qE="role",au;(function(St){St.GRID="grid",St.GRIDCELL="gridcell",St.GROUP="group",St.LISTBOX="listbox",St.MENU="menu",St.MENUITEM="menuitem",St.MENUITEMCHECKBOX="menuitemcheckbox",St.OPTION="option",St.PRESENTATION="presentation",St.ROW="row",St.TREE="tree",St.TREEITEM="treeitem"})(au||(au={}));var ms;(function(St){St.ACTIVEDESCENDANT="activedescendant",St.COLCOUNT="colcount",St.DISABLED="disabled",St.EXPANDED="expanded",St.INVALID="invalid",St.LABEL="label",St.LABELLEDBY="labelledby",St.LEVEL="level",St.ORIENTATION="orientation",St.POSINSET="posinset",St.ROWCOUNT="rowcount",St.SELECTED="selected",St.SETSIZE="setsize",St.VALUEMAX="valuemax",St.VALUEMIN="valuemin"})(ms||(ms={}));var r0={};r0.Role=au,r0.State=ms,r0.setRole=$s,r0.setState=ns;var co;(function(St){St[St.WIN_KEY_FF_LINUX=0]="WIN_KEY_FF_LINUX",St[St.MAC_ENTER=3]="MAC_ENTER",St[St.BACKSPACE=8]="BACKSPACE",St[St.TAB=9]="TAB",St[St.NUM_CENTER=12]="NUM_CENTER",St[St.ENTER=13]="ENTER",St[St.SHIFT=16]="SHIFT",St[St.CTRL=17]="CTRL",St[St.ALT=18]="ALT",St[St.PAUSE=19]="PAUSE",St[St.CAPS_LOCK=20]="CAPS_LOCK",St[St.ESC=27]="ESC",St[St.SPACE=32]="SPACE",St[St.PAGE_UP=33]="PAGE_UP",St[St.PAGE_DOWN=34]="PAGE_DOWN",St[St.END=35]="END",St[St.HOME=36]="HOME",St[St.LEFT=37]="LEFT",St[St.UP=38]="UP",St[St.RIGHT=39]="RIGHT",St[St.DOWN=40]="DOWN",St[St.PLUS_SIGN=43]="PLUS_SIGN",St[St.PRINT_SCREEN=44]="PRINT_SCREEN",St[St.INSERT=45]="INSERT",St[St.DELETE=46]="DELETE",St[St.ZERO=48]="ZERO",St[St.ONE=49]="ONE",St[St.TWO=50]="TWO",St[St.THREE=51]="THREE",St[St.FOUR=52]="FOUR",St[St.FIVE=53]="FIVE",St[St.SIX=54]="SIX",St[St.SEVEN=55]="SEVEN",St[St.EIGHT=56]="EIGHT",St[St.NINE=57]="NINE",St[St.FF_SEMICOLON=59]="FF_SEMICOLON",St[St.FF_EQUALS=61]="FF_EQUALS",St[St.FF_DASH=173]="FF_DASH",St[St.FF_HASH=163]="FF_HASH",St[St.QUESTION_MARK=63]="QUESTION_MARK",St[St.AT_SIGN=64]="AT_SIGN",St[St.A=65]="A",St[St.B=66]="B",St[St.C=67]="C",St[St.D=68]="D",St[St.E=69]="E",St[St.F=70]="F",St[St.G=71]="G",St[St.H=72]="H",St[St.I=73]="I",St[St.J=74]="J",St[St.K=75]="K",St[St.L=76]="L",St[St.M=77]="M",St[St.N=78]="N",St[St.O=79]="O",St[St.P=80]="P",St[St.Q=81]="Q",St[St.R=82]="R",St[St.S=83]="S",St[St.T=84]="T",St[St.U=85]="U",St[St.V=86]="V",St[St.W=87]="W",St[St.X=88]="X",St[St.Y=89]="Y",St[St.Z=90]="Z",St[St.META=91]="META",St[St.WIN_KEY_RIGHT=92]="WIN_KEY_RIGHT",St[St.CONTEXT_MENU=93]="CONTEXT_MENU",St[St.NUM_ZERO=96]="NUM_ZERO",St[St.NUM_ONE=97]="NUM_ONE",St[St.NUM_TWO=98]="NUM_TWO",St[St.NUM_THREE=99]="NUM_THREE",St[St.NUM_FOUR=100]="NUM_FOUR",St[St.NUM_FIVE=101]="NUM_FIVE",St[St.NUM_SIX=102]="NUM_SIX",St[St.NUM_SEVEN=103]="NUM_SEVEN",St[St.NUM_EIGHT=104]="NUM_EIGHT",St[St.NUM_NINE=105]="NUM_NINE",St[St.NUM_MULTIPLY=106]="NUM_MULTIPLY",St[St.NUM_PLUS=107]="NUM_PLUS",St[St.NUM_MINUS=109]="NUM_MINUS",St[St.NUM_PERIOD=110]="NUM_PERIOD",St[St.NUM_DIVISION=111]="NUM_DIVISION",St[St.F1=112]="F1",St[St.F2=113]="F2",St[St.F3=114]="F3",St[St.F4=115]="F4",St[St.F5=116]="F5",St[St.F6=117]="F6",St[St.F7=118]="F7",St[St.F8=119]="F8",St[St.F9=120]="F9",St[St.F10=121]="F10",St[St.F11=122]="F11",St[St.F12=123]="F12",St[St.NUMLOCK=144]="NUMLOCK",St[St.SCROLL_LOCK=145]="SCROLL_LOCK",St[St.FIRST_MEDIA_KEY=166]="FIRST_MEDIA_KEY",St[St.LAST_MEDIA_KEY=183]="LAST_MEDIA_KEY",St[St.SEMICOLON=186]="SEMICOLON",St[St.DASH=189]="DASH",St[St.EQUALS=187]="EQUALS",St[St.COMMA=188]="COMMA",St[St.PERIOD=190]="PERIOD",St[St.SLASH=191]="SLASH",St[St.APOSTROPHE=192]="APOSTROPHE",St[St.TILDE=192]="TILDE",St[St.SINGLE_QUOTE=222]="SINGLE_QUOTE",St[St.OPEN_SQUARE_BRACKET=219]="OPEN_SQUARE_BRACKET",St[St.BACKSLASH=220]="BACKSLASH",St[St.CLOSE_SQUARE_BRACKET=221]="CLOSE_SQUARE_BRACKET",St[St.WIN_KEY=224]="WIN_KEY",St[St.MAC_FF_META=224]="MAC_FF_META",St[St.MAC_WK_CMD_LEFT=91]="MAC_WK_CMD_LEFT",St[St.MAC_WK_CMD_RIGHT=93]="MAC_WK_CMD_RIGHT",St[St.WIN_IME=229]="WIN_IME",St[St.VK_NONAME=252]="VK_NONAME",St[St.PHANTOM=255]="PHANTOM"})(co||(co={}));var WS=class{constructor(){this.menuItems=[],this.roleName=this.element=this.onKeyDownHandler=this.mouseLeaveHandler=this.mouseEnterHandler=this.clickHandler=this.mouseOverHandler=this.highlightedItem=this.openingCoords=null}addChild(St){this.menuItems.push(St)}render(St){const At=document.createElement("div");At.className="blocklyMenu goog-menu blocklyNonSelectable",At.tabIndex=0,this.roleName&&$s(At,this.roleName),this.element=At;for(let Nt=0,Wt;Wt=this.menuItems[Nt];Nt++)At.appendChild(Wt.createDom());return this.mouseOverHandler=Kt(At,"pointerover",this,this.handleMouseOver,!0),this.clickHandler=Kt(At,"pointerdown",this,this.handleClick,!0),this.mouseEnterHandler=Kt(At,"pointerenter",this,this.handleMouseEnter,!0),this.mouseLeaveHandler=Kt(At,"pointerleave",this,this.handleMouseLeave,!0),this.onKeyDownHandler=Kt(At,"keydown",this,this.handleKeyEvent),St.appendChild(At),At}getElement(){return this.element}focus(){const St=this.getElement();St&&(St.focus({preventScroll:!0}),ir(St,"blocklyFocused"))}blur(){const St=this.getElement();St&&(St.blur(),tr(St,"blocklyFocused"))}setRole(St){this.roleName=St}dispose(){this.mouseOverHandler&&(hn(this.mouseOverHandler),this.mouseOverHandler=null),this.clickHandler&&(hn(this.clickHandler),this.clickHandler=null),this.mouseEnterHandler&&(hn(this.mouseEnterHandler),this.mouseEnterHandler=null),this.mouseLeaveHandler&&(hn(this.mouseLeaveHandler),this.mouseLeaveHandler=null),this.onKeyDownHandler&&(hn(this.onKeyDownHandler),this.onKeyDownHandler=null);for(let St=0,At;At=this.menuItems[St];St++)At.dispose();this.element=null}getMenuItem(St){const At=this.getElement();for(;St&&St!==At;){if(St.classList.contains("blocklyMenuItem")){for(let Nt=0,Wt;Wt=this.menuItems[Nt];Nt++)if(Wt.getElement()===St)return Wt}St=St.parentElement}return null}setHighlighted(St){var At=this.highlightedItem;At&&(At.setHighlighted(!1),this.highlightedItem=null),St&&(St.setHighlighted(!0),this.highlightedItem=St,At=this.getElement(),pr(St.getElement(),At),ns(At,ms.ACTIVEDESCENDANT,St.getId()))}highlightNext(){const St=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(St,1)}highlightPrevious(){const St=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(0>St?this.menuItems.length:St,-1)}highlightFirst(){this.highlightHelper(-1,1)}highlightLast(){this.highlightHelper(this.menuItems.length,-1)}highlightHelper(St,At){St+=At;let Nt;for(;Nt=this.menuItems[St];){if(Nt.isEnabled()){this.setHighlighted(Nt);break}St+=At}}handleMouseOver(St){(St=this.getMenuItem(St.target))&&(St.isEnabled()?this.highlightedItem!==St&&this.setHighlighted(St):this.setHighlighted(null))}handleClick(St){const At=this.openingCoords;if(this.openingCoords=null,At&&typeof St.clientX=="number"){const Nt=new qr(St.clientX,St.clientY);if(1>qr.distance(At,Nt))return}(St=this.getMenuItem(St.target))&&St.performAction()}handleMouseEnter(St){this.focus()}handleMouseLeave(St){this.getElement()&&(this.blur(),this.setHighlighted(null))}handleKeyEvent(St){if(this.menuItems.length&&!(St.shiftKey||St.ctrlKey||St.metaKey||St.altKey)){var At=this.highlightedItem;switch(St.keyCode){case co.ENTER:case co.SPACE:At&&At.performAction();break;case co.UP:this.highlightPrevious();break;case co.DOWN:this.highlightNext();break;case co.PAGE_UP:case co.HOME:this.highlightFirst();break;case co.PAGE_DOWN:case co.END:this.highlightLast();break;default:return}St.preventDefault(),St.stopPropagation()}}getSize(){const St=this.getElement(),At=Po(St);return At.height=St.scrollHeight,At}},HS=class{constructor(St,At){this.content=St,this.opt_value=At,this.enabled=!0,this.element=null,this.rightToLeft=!1,this.roleName=null,this.highlight=this.checked=this.checkable=!1,this.actionHandler=null}createDom(){const St=document.createElement("div");St.id=Do(),this.element=St,St.className="blocklyMenuItem goog-menuitem "+(this.enabled?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft?"blocklyMenuItemRtl goog-menuitem-rtl ":"");const At=document.createElement("div");if(At.className="blocklyMenuItemContent goog-menuitem-content",this.checkable){var Nt=document.createElement("div");Nt.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",At.appendChild(Nt)}return Nt=this.content,typeof this.content=="string"&&(Nt=document.createTextNode(this.content)),At.appendChild(Nt),St.appendChild(At),this.roleName&&$s(St,this.roleName),ns(St,ms.SELECTED,this.checkable&&this.checked||!1),ns(St,ms.DISABLED,!this.enabled),St}dispose(){this.element=null}getElement(){return this.element}getId(){return this.element.id}getValue(){let St;return(St=this.opt_value)!=null?St:null}setRightToLeft(St){this.rightToLeft=St}setRole(St){this.roleName=St}setCheckable(St){this.checkable=St}setChecked(St){this.checked=St}setHighlighted(St){this.highlight=St;const At=this.getElement();At&&this.isEnabled()&&(St?(ir(At,"blocklyMenuItemHighlight"),ir(At,"goog-menuitem-highlight")):(tr(At,"blocklyMenuItemHighlight"),tr(At,"goog-menuitem-highlight")))}isEnabled(){return this.enabled}setEnabled(St){this.enabled=St}performAction(){this.isEnabled()&&this.actionHandler&&this.actionHandler(this)}onAction(St,At){this.actionHandler=St.bind(At)}},Ju=class extends Qo{constructor(St,At,Nt){super(Qo.SKIP_SETUP),this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null,this.SERIALIZABLE=!0,this.CURSOR="default",this.clickTarget_=this.suffixField=this.prefixField=this.generatedOptions_=null,vs(St)&&(Array.isArray(St)?(Um(St),St=Xs(St),this.menuGenerator_=St.options,this.prefixField=St.prefix||null,this.suffixField=St.suffix||null):this.menuGenerator_=St,this.selectedOption_=this.getOptions(!1)[0],Nt&&this.configure_(Nt),this.setValue(this.selectedOption_[1]),At&&this.setValidator(At))}fromXml(St){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(St.textContent)}loadState(St){this.loadLegacyState(Ju,St)||(this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(St))}initView(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement_=Mn(ar.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&ir(this.borderRect_,"blocklyDropdownRect")}shouldAddBorderRect_(){let St;return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!((St=this.getSourceBlock())!=null&&St.isShadow())}createTextArrow_(){this.arrow_=Mn(ar.TSPAN,{},this.textElement_);let St;this.arrow_.appendChild(document.createTextNode((St=this.getSourceBlock())!=null&&St.RTL?Ju.ARROW_CHAR+" ":" "+Ju.ARROW_CHAR));let At;(At=this.getSourceBlock())!=null&&At.RTL?this.getTextElement().insertBefore(this.arrow_,this.textContent_):this.getTextElement().appendChild(this.arrow_)}createSVGArrow_(){this.svgArrow_=Mn(ar.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(ou,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)}showEditor_(St){var At=this.getSourceBlock();if(!At)throw new Ds;this.dropdownCreate_(),this.menu_.openingCoords=St&&typeof St.clientX=="number"?new qr(St.clientX,St.clientY):null,Nr(),St=this.menu_.render(Tr()),ir(St,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV&&(St=At.isShadow()?At.getParent().getColour():At.getColour(),At=At.isShadow()?At.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary,xn(St,At)),Zn(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&this.menu_.setHighlighted(this.selectedMenuItem_),this.applyColour()}dropdownCreate_(){const St=this.getSourceBlock();if(!St)throw new Ds;const At=new WS;At.setRole(au.LISTBOX),this.menu_=At;const Nt=this.getOptions(!1);this.selectedMenuItem_=null;for(let cn=0;cn<Nt.length;cn++){const[vn,Pn]=Nt[cn];if(typeof vn=="object"){var Wt=new Image(vn.width,vn.height);Wt.src=vn.src,Wt.alt=vn.alt||""}else Wt=vn;Wt=new HS(Wt,Pn),Wt.setRole(au.OPTION),Wt.setRightToLeft(St.RTL),Wt.setCheckable(!0),At.addChild(Wt),Wt.setChecked(Pn===this.value_),Pn===this.value_&&(this.selectedMenuItem_=Wt),Wt.onAction(this.handleMenuActionEvent_,this)}}dropdownDispose_(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem_=this.menu_=null,this.applyColour()}handleMenuActionEvent_(St){Us(this,!0),this.onItemSelected_(this.menu_,St)}onItemSelected_(St,At){this.setValue(At.getValue())}isOptionListDynamic(){return typeof this.menuGenerator_=="function"}getOptions(St){if(!this.menuGenerator_)throw TypeError("A menu generator was never defined.");return Array.isArray(this.menuGenerator_)?this.menuGenerator_:St&&this.generatedOptions_?this.generatedOptions_:(this.generatedOptions_=this.menuGenerator_(),Um(this.generatedOptions_),this.generatedOptions_)}doClassValidation_(St){return this.getOptions(!0).some(At=>At[1]===St)?St:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+St),null)}doValueUpdate_(St){super.doValueUpdate_(St),St=this.getOptions(!0);for(let At=0,Nt;Nt=St[At];At++)Nt[1]===this.value_&&(this.selectedOption_=Nt)}applyColour(){const St=this.sourceBlock_.style;this.borderRect_&&(this.borderRect_.setAttribute("stroke",St.colourTertiary),this.menu_?this.borderRect_.setAttribute("fill",St.colourTertiary):this.borderRect_.setAttribute("fill","transparent")),this.sourceBlock_&&this.arrow_&&(this.sourceBlock_.isShadow()?this.arrow_.style.fill=St.colourSecondary:this.arrow_.style.fill=St.colourPrimary)}render_(){this.getTextContent().nodeValue="",this.imageElement_.style.display="none";const St=this.selectedOption_&&this.selectedOption_[0];St&&typeof St=="object"?this.renderSelectedImage_(St):this.renderSelectedText_(),this.positionBorderRect_()}renderSelectedImage_(St){const At=this.getSourceBlock();if(!At)throw new Ds;this.imageElement_.style.display="",this.imageElement_.setAttributeNS(ou,"xlink:href",St.src),this.imageElement_.setAttribute("height",`${St.height}`),this.imageElement_.setAttribute("width",`${St.width}`);const Nt=Number(St.height);St=Number(St.width);var Wt=!!this.borderRect_;const cn=Math.max(Wt?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,Nt+JE);Wt=Wt?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let vn;vn=this.svgArrow_?this.positionSVGArrow_(St+Wt,cn/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):Qr(this.arrow_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY),this.size_.width=St+vn+2*Wt,this.size_.height=cn;let Pn=0;At.RTL?this.imageElement_.setAttribute("x",(Wt+vn).toString()):(Pn=St+vn,this.getTextElement().setAttribute("text-anchor","end"),this.imageElement_.setAttribute("x",Wt.toString())),this.imageElement_.setAttribute("y",(cn/2-Nt/2).toString()),this.positionTextElement_(Pn+Wt,St+vn)}renderSelectedText_(){this.getTextContent().nodeValue=this.getDisplayText_();var St=this.getTextElement();ir(St,"blocklyDropdownText"),St.setAttribute("text-anchor","start");var At=!!this.borderRect_;St=Math.max(At?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT);const Nt=Qr(this.getTextElement(),this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);At=At?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let Wt=0;this.svgArrow_&&(Wt=this.positionSVGArrow_(Nt+At,St/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=Nt+Wt+2*At,this.size_.height=St,this.positionTextElement_(At,Nt)}positionSVGArrow_(St,At){if(!this.svgArrow_)return 0;const Nt=this.getSourceBlock();if(!Nt)throw new Ds;const Wt=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,cn=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,vn=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow_.setAttribute("transform","translate("+(Nt.RTL?Wt:St+cn)+","+At+")"),vn+cn}getText_(){if(!this.selectedOption_)return null;const St=this.selectedOption_[0];return typeof St=="object"?St.alt:St}static fromJson(St){if(!St.options)throw Error("options are required for the dropdown field. The options property must be assigned an array of [humanReadableValue, languageNeutralValue] tuples.");return new this(St.options,void 0,St)}};Ju.CHECKMARK_OVERHANG=25,Ju.MAX_MENU_HEIGHT_VH=.45,Ju.ARROW_CHAR="▾";var KE=5,JE=2*KE;xa("field_dropdown",Ju),dt.module$build$src$core$field_dropdown={},dt.module$build$src$core$field_dropdown.FieldDropdown=Ju;var QS=class extends Zu{constructor(St,At,Nt){super(St?St.workspace.id:void 0),this.type=Gp,St&&(this.blockId=St.id,this.isOpen=At,this.bubbleType=Nt)}toJson(){const St=super.toJson();if(this.isOpen===void 0)throw Error("Whether this event is for opening the bubble is undefined. Either pass the value to the constructor, or call fromJson");if(!this.bubbleType)throw Error("The type of bubble is undefined. Either pass the value to the constructor, or call fromJson");return St.isOpen=this.isOpen,St.bubbleType=this.bubbleType,St.blockId=this.blockId||"",St}fromJson(St){vt("Blockly.Events.BubbleOpen.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(St),this.isOpen=St.isOpen,this.bubbleType=St.bubbleType,this.blockId=St.blockId}static fromJson(St,At,Nt){return At=super.fromJson(St,At,Nt??new QS),At.isOpen=St.isOpen,At.bubbleType=St.bubbleType,At.blockId=St.blockId,At}},zS;(function(St){St.MUTATOR="mutator",St.COMMENT="comment",St.WARNING="warning"})(zS||(zS={})),wo(Hr.EVENT,Gp,QS);var Ss=class{constructor(St,At,Nt,Wt,cn){this.workspace=St,this.horizontal=At,this.oldHostMetrics=null,this.ratio=1,this.origin=new qr(0,0),this.startDragHandle=this.handlePosition=this.handleLength=this.scrollbarLength=this.startDragMouse=0,this.containerVisible=this.isHandleVisible=!0,this.position=new qr(0,0),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.pair=Nt||!1,this.margin=cn!==void 0?cn:Ss.DEFAULT_SCROLLBAR_MARGIN,St="blocklyScrollbar"+(this.horizontal?"Horizontal":"Vertical"),Wt&&(St+=" "+Wt),this.outerSvg=Mn(ar.SVG,{class:St}),Wt=Mn(ar.G,{},this.outerSvg),this.svgBackground=Mn(ar.RECT,{class:"blocklyScrollbarBackground"},Wt),St=Math.floor((Ss.scrollbarThickness-5)/2),this.svgHandle=Mn(ar.RECT,{class:"blocklyScrollbarHandle",rx:St,ry:St},Wt),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarColour","fill"),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarOpacity","fill-opacity"),Vr(this.outerSvg,this.workspace.getParentSvg()),this.setInitialThickness(),At?(this.lengthAttribute_="width",this.positionAttribute_="x"):(this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=Kt(this.svgBackground,"pointerdown",this,this.onMouseDownBar),this.onMouseDownHandleWrapper_=Kt(this.svgHandle,"pointerdown",this,this.onMouseDownHandle)}setInitialThickness(){const St=Ss.scrollbarThickness;this.horizontal?(this.svgBackground.setAttribute("height",String(St)),this.outerSvg.setAttribute("height",String(St)),this.svgHandle.setAttribute("height",String(St-5)),this.svgHandle.setAttribute("y","2.5")):(this.svgBackground.setAttribute("width",String(St)),this.outerSvg.setAttribute("width",String(St)),this.svgHandle.setAttribute("width",String(St-5)),this.svgHandle.setAttribute("x","2.5"))}dispose(){this.cleanUp(),hn(this.onMouseDownBarWrapper_),hn(this.onMouseDownHandleWrapper_),Sr(this.outerSvg),this.workspace.getThemeManager().unsubscribe(this.svgHandle)}constrainHandleLength(St){return St=0>=St||isNaN(St)?0:Math.min(St,this.scrollbarLength)}setHandleLength(St){this.handleLength=St,this.svgHandle.setAttribute(this.lengthAttribute_,String(this.handleLength))}constrainHandlePosition(St){return St=0>=St||isNaN(St)?0:Math.min(St,this.scrollbarLength-this.handleLength)}setHandlePosition(St){this.handlePosition=St,this.svgHandle.setAttribute(this.positionAttribute_,String(this.handlePosition))}setScrollbarLength(St){this.scrollbarLength=St,this.outerSvg.setAttribute(this.lengthAttribute_,String(this.scrollbarLength)),this.svgBackground.setAttribute(this.lengthAttribute_,String(this.scrollbarLength))}setPosition(St,At){this.position.x=St,this.position.y=At,Yr(this.outerSvg,"translate("+(this.position.x+this.origin.x)+"px,"+(this.position.y+this.origin.y)+"px)")}resize(St){!St&&(St=this.workspace.getMetrics(),!St)||this.oldHostMetrics&&Ss.metricsAreEquivalent(St,this.oldHostMetrics)||(this.horizontal?this.resizeHorizontal(St):this.resizeVertical(St),this.oldHostMetrics=St,this.updateMetrics())}requiresViewResize(St){return this.oldHostMetrics?this.oldHostMetrics.viewWidth!==St.viewWidth||this.oldHostMetrics.viewHeight!==St.viewHeight||this.oldHostMetrics.absoluteLeft!==St.absoluteLeft||this.oldHostMetrics.absoluteTop!==St.absoluteTop:!0}resizeHorizontal(St){this.requiresViewResize(St)?this.resizeViewHorizontal(St):this.resizeContentHorizontal(St)}resizeViewHorizontal(St){var At=St.viewWidth-2*this.margin;this.pair&&(At-=Ss.scrollbarThickness),this.setScrollbarLength(Math.max(0,At)),At=St.absoluteLeft+this.margin,this.pair&&this.workspace.RTL&&(At+=Ss.scrollbarThickness),this.setPosition(At,St.absoluteTop+St.viewHeight-Ss.scrollbarThickness-this.margin),this.resizeContentHorizontal(St)}resizeContentHorizontal(St){if(St.viewWidth>=St.scrollWidth)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var At=this.scrollbarLength*St.viewWidth/St.scrollWidth;At=this.constrainHandleLength(At),this.setHandleLength(At),At=St.scrollWidth-St.viewWidth;var Nt=this.scrollbarLength-this.handleLength;St=(St.viewLeft-St.scrollLeft)/At*Nt,St=this.constrainHandlePosition(St),this.setHandlePosition(St),this.ratio=Nt/At}}resizeVertical(St){this.requiresViewResize(St)?this.resizeViewVertical(St):this.resizeContentVertical(St)}resizeViewVertical(St){let At=St.viewHeight-2*this.margin;this.pair&&(At-=Ss.scrollbarThickness),this.setScrollbarLength(Math.max(0,At)),this.setPosition(this.workspace.RTL?St.absoluteLeft+this.margin:St.absoluteLeft+St.viewWidth-Ss.scrollbarThickness-this.margin,St.absoluteTop+this.margin),this.resizeContentVertical(St)}resizeContentVertical(St){if(St.viewHeight>=St.scrollHeight)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var At=this.scrollbarLength*St.viewHeight/St.scrollHeight;At=this.constrainHandleLength(At),this.setHandleLength(At),At=St.scrollHeight-St.viewHeight;var Nt=this.scrollbarLength-this.handleLength;St=(St.viewTop-St.scrollTop)/At*Nt,St=this.constrainHandlePosition(St),this.setHandlePosition(St),this.ratio=Nt/At}}isVisible(){return this.isHandleVisible}setContainerVisible(St){const At=St!==this.containerVisible;this.containerVisible=St,At&&this.updateDisplay_()}setVisible(St){const At=St!==this.isVisible();if(this.pair)throw Error("Unable to toggle visibility of paired scrollbars.");this.isHandleVisible=St,At&&this.updateDisplay_()}updateDisplay_(){this.containerVisible&&this.isVisible()?this.outerSvg.setAttribute("display","block"):this.outerSvg.setAttribute("display","none")}onMouseDownBar(St){if(this.workspace.markFocused(),Ct(),this.cleanUp(),pn(St))St.stopPropagation();else{var At=mn(St,this.workspace.getParentSvg(),this.workspace.getInverseScreenCTM());At=this.horizontal?At.x:At.y;var Nt=w_(this.svgHandle);Nt=this.horizontal?Nt.x:Nt.y;var Wt=this.handlePosition,cn=.95*this.handleLength;At<=Nt?Wt-=cn:At>=Nt+this.handleLength&&(Wt+=cn),this.setHandlePosition(this.constrainHandlePosition(Wt)),this.updateMetrics(),St.stopPropagation(),St.preventDefault()}}onMouseDownHandle(St){this.workspace.markFocused(),this.cleanUp(),pn(St)?St.stopPropagation():(this.startDragHandle=this.handlePosition,this.workspace.setupDragSurface(),this.startDragMouse=this.horizontal?St.clientX:St.clientY,this.onMouseUpWrapper_=Kt(document,"pointerup",this,this.onMouseUpHandle),this.onMouseMoveWrapper_=Kt(document,"pointermove",this,this.onMouseMoveHandle),St.stopPropagation(),St.preventDefault())}onMouseMoveHandle(St){this.setHandlePosition(this.constrainHandlePosition(this.startDragHandle+((this.horizontal?St.clientX:St.clientY)-this.startDragMouse))),this.updateMetrics()}onMouseUpHandle(){this.workspace.resetDragSurface(),Ct(),this.cleanUp()}cleanUp(){this.workspace.hideChaff(!0),this.onMouseUpWrapper_&&(hn(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(hn(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}getRatio_(){let St=this.handlePosition/(this.scrollbarLength-this.handleLength);return isNaN(St)&&(St=0),St}updateMetrics(){const St=this.getRatio_();this.horizontal?this.workspace.setMetrics({x:St}):this.workspace.setMetrics({y:St})}set(St,At){this.setHandlePosition(this.constrainHandlePosition(St*this.ratio)),(At||At===void 0)&&this.updateMetrics()}setOrigin(St,At){this.origin=new qr(St,At)}static metricsAreEquivalent(St,At){return St.viewWidth===At.viewWidth&&St.viewHeight===At.viewHeight&&St.viewLeft===At.viewLeft&&St.viewTop===At.viewTop&&St.absoluteTop===At.absoluteTop&&St.absoluteLeft===At.absoluteLeft&&St.scrollWidth===At.scrollWidth&&St.scrollHeight===At.scrollHeight&&St.scrollLeft===At.scrollLeft&&St.scrollTop===At.scrollTop}};Ss.scrollbarThickness=Ny?25:15,Ss.DEFAULT_SCROLLBAR_MARGIN=.5;var Mo=class{constructor(St,At,Nt,Wt,cn,vn){this.resizeGroup=this.bubbleBack=this.bubbleArrow=this.bubbleGroup=null,this.height=this.width=this.relativeTop=this.relativeLeft=0,this.autoLayout=!0,this.onMouseDownResizeWrapper=this.onMouseDownBubbleWrapper=this.moveCallback=this.resizeCallback=null,this.rendered=this.disposed=!1,this.workspace_=St,this.content_=At,this.shape_=Nt,Nt=Mo.ARROW_ANGLE,this.workspace_.RTL&&(Nt=-Nt),this.arrowRadians=no(Nt),St.getBubbleCanvas().appendChild(this.createDom(At,!(!cn||!vn))),this.setAnchorLocation(Wt),cn&&vn||(St=this.content_.getBBox(),cn=St.width+2*Mo.BORDER_WIDTH,vn=St.height+2*Mo.BORDER_WIDTH),this.setBubbleSize(cn,vn),this.positionBubble(),this.renderArrow(),this.rendered=!0}createDom(St,At){this.bubbleGroup=Mn(ar.G,{});var Nt={filter:"url(#"+this.workspace_.getRenderer().getConstants().embossFilterId+")"};return zr&&(Nt={}),Nt=Mn(ar.G,Nt,this.bubbleGroup),this.bubbleArrow=Mn(ar.PATH,{},Nt),this.bubbleBack=Mn(ar.RECT,{class:"blocklyDraggable",x:0,y:0,rx:Mo.BORDER_WIDTH,ry:Mo.BORDER_WIDTH},Nt),At?(this.resizeGroup=Mn(ar.G,{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup),At=2*Mo.BORDER_WIDTH,Mn(ar.POLYGON,{points:"0,x x,x x,0".replace(/x/g,At.toString())},this.resizeGroup),Mn(ar.LINE,{class:"blocklyResizeLine",x1:At/3,y1:At-1,x2:At-1,y2:At/3},this.resizeGroup),Mn(ar.LINE,{class:"blocklyResizeLine",x1:2*At/3,y1:At-1,x2:At-1,y2:2*At/3},this.resizeGroup)):this.resizeGroup=null,this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper=Kt(this.bubbleBack,"pointerdown",this,this.bubbleMouseDown),this.resizeGroup&&(this.onMouseDownResizeWrapper=Kt(this.resizeGroup,"pointerdown",this,this.resizeMouseDown))),this.bubbleGroup.appendChild(St),this.bubbleGroup}getSvgRoot(){return this.bubbleGroup}setSvgId(St){let At;(At=this.bubbleGroup)==null||At.setAttribute("data-block-id",St)}bubbleMouseDown(St){const At=this.workspace_.getGesture(St);At&&At.handleBubbleStart(St,this)}showContextMenu(St){}isDeletable(){return!1}setDeleteStyle(St){}resizeMouseDown(St){this.promote(),Mo.unbindDragEvents(),pn(St)||(this.workspace_.startDrag(St,new qr(this.workspace_.RTL?-this.width:this.width,this.height)),Mo.onMouseUpWrapper=Kt(document,"pointerup",this,Mo.bubbleMouseUp),Mo.onMouseMoveWrapper=Kt(document,"pointermove",this,this.resizeMouseMove),this.workspace_.hideChaff()),St.stopPropagation()}resizeMouseMove(St){this.autoLayout=!1,St=this.workspace_.moveDrag(St),this.setBubbleSize(this.workspace_.RTL?-St.x:St.x,St.y),this.workspace_.RTL&&this.positionBubble()}registerResizeEvent(St){this.resizeCallback=St}registerMoveEvent(St){this.moveCallback=St}promote(){let St;const At=(St=this.bubbleGroup)==null?void 0:St.parentNode;return(At==null?void 0:At.lastChild)!==this.bubbleGroup&&this.bubbleGroup?(At==null||At.appendChild(this.bubbleGroup),!0):!1}setAnchorLocation(St){this.anchorXY=St,this.rendered&&this.positionBubble()}layoutBubble(){var St=this.workspace_.getMetricsManager().getViewMetrics(!0),At=this.getOptimalRelativeLeft(St),Nt=this.getOptimalRelativeTop(St),Wt=this.shape_.getBBox();const cn={x:At,y:-this.height-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},vn={x:-this.width-30,y:Nt};Nt={x:Wt.width,y:Nt};var Pn={x:At,y:Wt.height};At=Wt.width<Wt.height?Nt:Pn,Wt=Wt.width<Wt.height?Pn:Nt,Nt=this.getOverlap(cn,St),Pn=this.getOverlap(vn,St);const qn=this.getOverlap(At,St);St=this.getOverlap(Wt,St),St=Math.max(Nt,Pn,qn,St),Nt===St?(this.relativeLeft=cn.x,this.relativeTop=cn.y):Pn===St?(this.relativeLeft=vn.x,this.relativeTop=vn.y):qn===St?(this.relativeLeft=At.x,this.relativeTop=At.y):(this.relativeLeft=Wt.x,this.relativeTop=Wt.y)}getOverlap(St,At){var Nt=this.workspace_.RTL?this.anchorXY.x-St.x-this.width:St.x+this.anchorXY.x;return St=St.y+this.anchorXY.y,Math.max(0,Math.min(1,(Math.min(Nt+this.width,At.left+At.width)-Math.max(Nt,At.left))*(Math.min(St+this.height,At.top+At.height)-Math.max(St,At.top))/(this.width*this.height)))}getOptimalRelativeLeft(St){let At=-this.width/4;if(this.width>St.width)return At;if(this.workspace_.RTL){var Nt=this.anchorXY.x-At,Wt=St.left+St.width;St=St.left+Ss.scrollbarThickness/this.workspace_.scale,Nt-this.width<St?At=-(St-this.anchorXY.x+this.width):Nt>Wt&&(At=-(Wt-this.anchorXY.x))}else{Nt=At+this.anchorXY.x,Wt=Nt+this.width;const cn=St.left;St=St.left+St.width-Ss.scrollbarThickness/this.workspace_.scale,Nt<cn?At=cn-this.anchorXY.x:Wt>St&&(At=St-this.anchorXY.x-this.width)}return At}getOptimalRelativeTop(St){let At=-this.height/4;if(this.height>St.height)return At;const Nt=this.anchorXY.y+At,Wt=Nt+this.height,cn=St.top;St=St.top+St.height-Ss.scrollbarThickness/this.workspace_.scale;const vn=this.anchorXY.y;return Nt<cn?At=cn-vn:Wt>St&&(At=St-vn-this.height),At}positionBubble(){let St=this.anchorXY.x;St=this.workspace_.RTL?St-(this.relativeLeft+this.width):St+this.relativeLeft,this.moveTo(St,this.relativeTop+this.anchorXY.y)}moveTo(St,At){let Nt;(Nt=this.bubbleGroup)==null||Nt.setAttribute("transform","translate("+St+","+At+")")}setDragging(St){!St&&this.moveCallback&&this.moveCallback()}getBubbleSize(){return new Ks(this.width,this.height)}setBubbleSize(St,At){const Nt=2*Mo.BORDER_WIDTH;St=Math.max(St,Nt+45),At=Math.max(At,Nt+20),this.width=St,this.height=At;let Wt;(Wt=this.bubbleBack)==null||Wt.setAttribute("width",St.toString());let cn;(cn=this.bubbleBack)==null||cn.setAttribute("height",At.toString()),this.resizeGroup&&(this.workspace_.RTL?this.resizeGroup.setAttribute("transform","translate("+2*Mo.BORDER_WIDTH+","+(At-Nt)+") scale(-1 1)"):this.resizeGroup.setAttribute("transform","translate("+(St-Nt)+","+(At-Nt)+")")),this.autoLayout&&this.layoutBubble(),this.positionBubble(),this.renderArrow(),this.resizeCallback&&this.resizeCallback()}renderArrow(){const St=[];var At=this.width/2,Nt=this.height/2,Wt=-this.relativeLeft,cn=-this.relativeTop;if(At===Wt&&Nt===cn)St.push("M "+At+","+Nt);else{cn-=Nt,Wt-=At,this.workspace_.RTL&&(Wt*=-1);var vn=Math.sqrt(cn*cn+Wt*Wt),Pn=Math.acos(Wt/vn);0>cn&&(Pn=2*Math.PI-Pn);var qn=Pn+Math.PI/2;qn>2*Math.PI&&(qn-=2*Math.PI);var Ar=Math.sin(qn);const _s=Math.cos(qn);var Kr=this.getBubbleSize();qn=(Kr.width+Kr.height)/Mo.ARROW_THICKNESS,qn=Math.min(qn,Kr.width,Kr.height)/4,Kr=1-Mo.ANCHOR_RADIUS/vn,Wt=At+Kr*Wt,cn=Nt+Kr*cn,Kr=At+qn*_s;const Eu=Nt+qn*Ar;At-=qn*_s,Nt-=qn*Ar,Ar=Pn+this.arrowRadians,Ar>2*Math.PI&&(Ar-=2*Math.PI),Pn=Math.sin(Ar)*vn/Mo.ARROW_BEND,vn=Math.cos(Ar)*vn/Mo.ARROW_BEND,St.push("M"+Kr+","+Eu),St.push("C"+(Kr+vn)+","+(Eu+Pn)+" "+Wt+","+cn+" "+Wt+","+cn),St.push("C"+Wt+","+cn+" "+(At+vn)+","+(Nt+Pn)+" "+At+","+Nt)}St.push("z");let Xo;(Xo=this.bubbleArrow)==null||Xo.setAttribute("d",St.join(" "))}setColour(St){let At;(At=this.bubbleBack)==null||At.setAttribute("fill",St);let Nt;(Nt=this.bubbleArrow)==null||Nt.setAttribute("fill",St)}dispose(){this.onMouseDownBubbleWrapper&&hn(this.onMouseDownBubbleWrapper),this.onMouseDownResizeWrapper&&hn(this.onMouseDownResizeWrapper),Mo.unbindDragEvents(),Sr(this.bubbleGroup),this.disposed=!0}moveDuringDrag(St,At){St?St.translateSurface(At.x,At.y):this.moveTo(At.x,At.y),this.relativeLeft=this.workspace_.RTL?this.anchorXY.x-At.x-this.width:At.x-this.anchorXY.x,this.relativeTop=At.y-this.anchorXY.y,this.renderArrow()}getRelativeToSurfaceXY(){return new qr(this.workspace_.RTL?-this.relativeLeft+this.anchorXY.x-this.width:this.anchorXY.x+this.relativeLeft,this.anchorXY.y+this.relativeTop)}setAutoLayout(St){this.autoLayout=St}static unbindDragEvents(){Mo.onMouseUpWrapper&&(hn(Mo.onMouseUpWrapper),Mo.onMouseUpWrapper=null),Mo.onMouseMoveWrapper&&(hn(Mo.onMouseMoveWrapper),Mo.onMouseMoveWrapper=null)}static bubbleMouseUp(St){Ct(),Mo.unbindDragEvents()}static textToDom(St){const At=Mn(ar.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:Mo.BORDER_WIDTH});St=St.split(`
`);for(let Nt=0;Nt<St.length;Nt++){const Wt=Mn(ar.TSPAN,{dy:"1em",x:Mo.BORDER_WIDTH},At),cn=document.createTextNode(St[Nt]);Wt.appendChild(cn)}return At}static createNonEditableBubble(St,At,Nt){if(Nt=new Mo(At.workspace,St,At.pathObject.svgPath,Nt,null,null),Nt.setSvgId(At.id),At.RTL){At=St.getBBox().width;for(let Wt=0,cn;cn=St.childNodes[Wt];Wt++)cn.setAttribute("text-anchor","end"),cn.setAttribute("x",(At+Mo.BORDER_WIDTH).toString())}return Nt}};Mo.BORDER_WIDTH=6,Mo.ARROW_THICKNESS=5,Mo.ARROW_ANGLE=20,Mo.ARROW_BEND=4,Mo.ANCHOR_RADIUS=8,Mo.onMouseUpWrapper=null,Mo.onMouseMoveWrapper=null;var jS,OT;jS=28,dt.config$$module$build$src$core$config={dragRadius:5,flyoutDragRadius:10,snapRadius:jS,connectingSnapRadius:jS,currentConnectionPreference:8,bumpDelay:250},OT={},OT.config=dt.config$$module$build$src$core$config;var Wv=class{constructor(St){this.iconGroup_=null,this.collapseHidden=!0,this.SIZE=17,this.iconXY_=this.bubble_=null,St||vt("Calling the Icon constructor with a null block","version 9","version 10","a non-null block"),this.block_=St}createIcon(){this.iconGroup_||(this.iconGroup_=Mn(ar.G,{class:"blocklyIconGroup"}),this.getBlock().isInFlyout&&ir(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.getBlock().getSvgRoot().appendChild(this.iconGroup_),Kt(this.iconGroup_,"pointerup",this,this.iconClick_),this.updateEditable())}dispose(){Sr(this.iconGroup_),this.setVisible(!1)}updateEditable(){}isVisible(){return!!this.bubble_}iconClick_(St){this.getBlock().workspace.isDragging()||this.getBlock().isInFlyout||pn(St)||this.setVisible(!this.isVisible())}applyColour(){this.bubble_&&this.isVisible()&&this.bubble_.setColour(this.getBlock().style.colourPrimary)}setIconLocation(St){this.iconXY_=St,this.bubble_&&this.isVisible()&&this.bubble_.setAnchorLocation(St)}computeIconLocation(){var St=this.getBlock().getRelativeToSurfaceXY();const At=Ll(this.iconGroup_);St=new qr(St.x+At.x+this.SIZE/2,St.y+At.y+this.SIZE/2),qr.equals(this.getIconLocation(),St)||this.setIconLocation(St)}getIconLocation(){return this.iconXY_}getCorrectedSize(){return new Ks(this.SIZE,this.SIZE-2)}drawIcon_(St){}setVisible(St){}getBlock(){if(!this.block_)throw Error("Block is not set for this icon.");return this.block_}},i0={};i0.deepMerge=np,i0.inherits=Vm,i0.mixin=Wm,i0.values=Ys;var m_=class{constructor(St,At,Nt,Wt){this.name=St,this.startHats=!1,this.blockStyles=At||Object.create(null),this.categoryStyles=Nt||Object.create(null),this.componentStyles=Wt||Object.create(null),this.fontStyle=Object.create(null),wo(Hr.THEME,St,this)}getClassName(){return this.name+"-theme"}setBlockStyle(St,At){this.blockStyles[St]=At}setCategoryStyle(St,At){this.categoryStyles[St]=At}getComponentStyle(St){return(St=this.componentStyles[St])&&typeof St=="string"&&this.getComponentStyle(St)?this.getComponentStyle(St):St?String(St):null}setComponentStyle(St,At){this.componentStyles[St]=At}setFontStyle(St){this.fontStyle=St}setStartHats(St){this.startHats=St}static defineTheme(St,At){St=St.toLowerCase();const Nt=new m_(St);let Wt=At.base;if(Wt){if(typeof Wt=="string"){let cn;Wt=(cn=Rr(Hr.THEME,Wt))!=null?cn:void 0}Wt instanceof m_&&(np(Nt,Wt),Nt.name=St)}return np(Nt.blockStyles,At.blockStyles),np(Nt.categoryStyles,At.categoryStyles),np(Nt.componentStyles,At.componentStyles),np(Nt.fontStyle,At.fontStyle),At.startHats!==null&&(Nt.startHats=At.startHats),Nt}},ex={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},tx={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},Hv=new m_("classic",ex,tx),XS="categoryToolbox",yT="flyoutToolbox",Ao;(function(St){St[St.TOP=0]="TOP",St[St.BOTTOM=1]="BOTTOM",St[St.LEFT=2]="LEFT",St[St.RIGHT=3]="RIGHT"})(Ao||(Ao={}));var vT={hasCategoriesInternal:Iu},$m={};$m.Position=Ao,$m.TEST_ONLY=vT,$m.convertFlyoutDefToJsonArray=sm,$m.convertToolboxDefToJson=om,$m.hasCategories=Ou,$m.isCategoryCollapsible=Wu,$m.parseToolboxTree=iy;var _h=class{constructor(St){this.gridPattern=null,this.getMetrics=this.setMetrics=void 0;let At=null,Nt=!1;var Wt=!1,cn=!1,vn=!1,Pn=!1,qn=!1;const Ar=!!St.readOnly;if(!Ar){var Kr;At=om((Kr=St.toolbox)!=null?Kr:null),Nt=Ou(At),Wt=St.trashcan,Wt=Wt===void 0?Nt:Wt,cn=St.collapse,cn=cn===void 0?Nt:cn,vn=St.comments,vn=vn===void 0?Nt:vn,Pn=St.disable,Pn=Pn===void 0?Nt:Pn,qn=St.sounds,qn=qn===void 0?!0:qn}Kr=St.maxTrashcanContents,Wt?Kr===void 0&&(Kr=32):Kr=0;const Xo=!!St.rtl;let _s=St.horizontalLayout;_s===void 0&&(_s=!1);var Eu=St.toolboxPosition!=="end";Eu=_s?Eu?Ao.TOP:Ao.BOTTOM:Eu===Xo?Ao.RIGHT:Ao.LEFT;let q$=St.css;q$===void 0&&(q$=!0);let K$="https://blockly-demo.appspot.com/static/media/";St.media?K$=St.media.endsWith("/")?St.media:St.media+"/":"path"in St&&(vt("path","Nov 2014","Jul 2023","media"),K$=St.path+"media/");const FE=St.oneBasedIndex,Nx=St.renderer||"geras",Bx=St.plugins||{};let J$=St.modalInputs;J$===void 0&&(J$=!0),this.RTL=Xo,this.oneBasedIndex=FE===void 0?!0:FE,this.collapse=cn,this.comments=vn,this.disable=Pn,this.readOnly=Ar,this.maxBlocks=St.maxBlocks||1/0;let GE;this.maxInstances=(GE=St.maxInstances)!=null?GE:null,this.modalInputs=J$,this.pathToMedia=K$,this.hasCategories=Nt,this.moveOptions=_h.parseMoveOptions_(St,Nt),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=Wt,this.maxTrashcanContents=Kr,this.hasSounds=qn,this.hasCss=q$,this.horizontalLayout=_s,this.languageTree=At,this.gridOptions=_h.parseGridOptions_(St),this.zoomOptions=_h.parseZoomOptions_(St),this.toolboxPosition=Eu,this.theme=_h.parseThemeOptions_(St),this.renderer=Nx;let UE;this.rendererOverrides=(UE=St.rendererOverrides)!=null?UE:null;let VE;this.parentWorkspace=(VE=St.parentWorkspace)!=null?VE:null,this.plugins=Bx}static parseMoveOptions_(St,At){const Nt=St.move||{},Wt={};return Nt.scrollbars===void 0&&St.scrollbars===void 0?Wt.scrollbars=At:typeof Nt.scrollbars=="object"?(Wt.scrollbars={horizontal:!!Nt.scrollbars.horizontal,vertical:!!Nt.scrollbars.vertical},Wt.scrollbars.horizontal&&Wt.scrollbars.vertical?Wt.scrollbars=!0:Wt.scrollbars.horizontal||Wt.scrollbars.vertical||(Wt.scrollbars=!1)):Wt.scrollbars=!!Nt.scrollbars||!!St.scrollbars,Wt.wheel=Wt.scrollbars&&Nt.wheel!==void 0?!!Nt.wheel:typeof Wt.scrollbars=="object",Wt.drag=Wt.scrollbars?Nt.drag===void 0?!0:!!Nt.drag:!1,Wt}static parseZoomOptions_(St){St=St.zoom||{};const At={};return At.controls=St.controls===void 0?!1:!!St.controls,At.wheel=St.wheel===void 0?!1:!!St.wheel,At.startScale=St.startScale===void 0?1:Number(St.startScale),At.maxScale=St.maxScale===void 0?3:Number(St.maxScale),At.minScale=St.minScale===void 0?.3:Number(St.minScale),At.scaleSpeed=St.scaleSpeed===void 0?1.2:Number(St.scaleSpeed),At.pinch=St.pinch===void 0?At.wheel||At.controls:!!St.pinch,At}static parseGridOptions_(St){St=St.grid||{};const At={};return At.spacing=Number(St.spacing)||0,At.colour=St.colour||"#888",At.length=St.length===void 0?1:Number(St.length),At.snap=0<At.spacing&&!!St.snap,At}static parseThemeOptions_(St){return St=St.theme||Hv,typeof St=="string"?Rr(Hr.THEME,St):St instanceof m_?St:m_.defineTheme(St.name||"builtin"+Do(),St)}},bT;dt.Mutator$$module$build$src$core$mutator=class extends Wv{constructor(St,At){At||vt("Calling the Mutator constructor without passing the block it is attached to","version 9","version 10","the constructor by passing the list of subblocks and the block instance to attach the mutator to"),super(At??null),this.workspace_=null,this.workspaceHeight=this.workspaceWidth=0,this.updateWorkspacePid=this.sourceListener=this.rootBlock=this.svgDialog=null,this.quarkNames=St}setBlock(St){this.block_=St}getWorkspace(){return this.workspace_}drawIcon_(St){Mn(ar.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},St),Mn(ar.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},St),Mn(ar.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},St)}iconClick_(St){this.getBlock().isEditable()&&super.iconClick_(St)}createEditor(){if(this.svgDialog=Mn(ar.SVG,{x:Mo.BORDER_WIDTH,y:Mo.BORDER_WIDTH}),this.quarkNames.length){var St=Bo("xml");for(let Wt=0,cn;cn=this.quarkNames[Wt];Wt++){var At=Bo("block");At.setAttribute("type",cn),St.appendChild(At)}}else St=null;var Nt=this.getBlock();return At=new _h({disable:!1,parentWorkspace:Nt.workspace,media:Nt.workspace.options.pathToMedia,rtl:Nt.RTL,horizontalLayout:!1,renderer:Nt.workspace.options.renderer,rendererOverrides:Nt.workspace.options.rendererOverrides}),At.toolboxPosition=Nt.RTL?Ao.RIGHT:Ao.LEFT,(Nt=!!St)&&(At.languageTree=om(St)),this.workspace_=this.newWorkspaceSvg(At),this.workspace_.internalIsMutator=!0,this.workspace_.addChangeListener(Zo),St=Nt?this.workspace_.addFlyout(ar.G):null,At=this.workspace_.createDom("blocklyMutatorBackground"),St&&At.insertBefore(St,this.workspace_.svgBlockCanvas_),this.svgDialog.appendChild(At),this.svgDialog}newWorkspaceSvg(St){throw Error("The implementation of newWorkspaceSvg should be monkey-patched in by blockly.ts")}updateEditable(){super.updateEditable(),this.getBlock().isInFlyout||(this.getBlock().isEditable()?this.iconGroup_&&tr(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&ir(this.iconGroup_,"blocklyIconGroupReadonly")))}resizeBubble(){if(this.workspace_){var St=2*Mo.BORDER_WIDTH,At=this.workspace_.getCanvas(),Nt=At.getBBox(),Wt=Nt.width+Nt.x,cn=Nt.height+3*St,vn=this.workspace_.getFlyout();if(vn){const Pn=vn.getWorkspace().getMetricsManager().getScrollMetrics();cn=Math.max(cn,Pn.height+20),Wt+=vn.getWidth()}(vn=this.getBlock().RTL)&&(Wt=-Nt.x),Wt+=3*St,(Math.abs(this.workspaceWidth-Wt)>St||Math.abs(this.workspaceHeight-cn)>St)&&(this.workspaceWidth=Wt,this.workspaceHeight=cn,this.bubble_.setBubbleSize(Wt+St,cn+St),this.svgDialog.setAttribute("width",`${Wt}`),this.svgDialog.setAttribute("height",`${cn}`),this.workspace_.setCachedParentSvgSize(Wt,cn)),vn&&At.setAttribute("transform",`translate(${this.workspaceWidth}, 0)`),this.workspace_.resize()}}onBubbleMove(){this.workspace_&&this.workspace_.recordDragTargets()}setVisible(St){if(St!==this.isVisible()){var At=this.getBlock();if(Gr(new(Wr(Gp))(At,St,"mutator")),St){this.bubble_=new Mo(At.workspace,this.createEditor(),At.pathObject.svgPath,this.iconXY_,null,null),St=this.workspace_,this.bubble_.setSvgId(At.id),this.bubble_.registerMoveEvent(this.onBubbleMove.bind(this));var Nt=St.options.languageTree,Wt=St.getFlyout();Nt&&(Wt.init(St),Wt.show(Nt)),this.rootBlock=At.decompose(St),Nt=this.rootBlock.getDescendants(!1);for(let cn=0,vn;vn=Nt[cn];cn++)vn.render();if(this.rootBlock.setMovable(!1),this.rootBlock.setDeletable(!1),Wt?(Nt=2*Wt.CORNER_RADIUS,Wt=this.rootBlock.RTL?Wt.getWidth()+Nt:Nt):Wt=Nt=16,At.RTL&&(Wt=-Wt),this.rootBlock.moveBy(Wt,Nt),At.saveConnections){const cn=this.rootBlock;At.saveConnections(cn),this.sourceListener=()=>{const vn=this.getBlock();vn.saveConnections&&vn.saveConnections(cn)},At.workspace.addChangeListener(this.sourceListener)}this.resizeBubble(),St.addChangeListener(this.workspaceChanged.bind(this)),this.updateWorkspace(),this.applyColour()}else this.svgDialog=null,this.workspace_.dispose(),this.rootBlock=this.workspace_=null,(Wt=this.bubble_)==null||Wt.dispose(),this.bubble_=null,this.workspaceHeight=this.workspaceWidth=0,this.sourceListener&&(At.workspace.removeChangeListener(this.sourceListener),this.sourceListener=null)}}workspaceChanged(St){this.shouldIgnoreMutatorEvent_(St)||this.updateWorkspacePid||(this.updateWorkspacePid=setTimeout(()=>{this.updateWorkspacePid=null,this.updateWorkspace()},0))}shouldIgnoreMutatorEvent_(St){return St.isUiEvent||St.type===Tl||St.type===Qs&&St.element==="disabled"}updateWorkspace(){if(!this.workspace_.isDragging()){var St=this.workspace_.getTopBlocks(!1);for(let Wt=0,cn;cn=St[Wt];Wt++){var At=cn.getRelativeToSurfaceXY();if(20>At.y&&cn.moveBy(0,20-At.y),cn.RTL){var Nt=-20;const vn=this.workspace_.getFlyout();vn&&(Nt-=vn.getWidth()),At.x>Nt&&cn.moveBy(Nt-At.x,0)}else 20>At.x&&cn.moveBy(20-At.x,0)}}if(this.rootBlock&&this.rootBlock.workspace===this.workspace_){(St=Ro())||oo(!0);const Wt=this.getBlock();if(At=p_.getExtraBlockState_(Wt),Nt=Wt.rendered,Wt.rendered=!1,Wt.compose(this.rootBlock),Wt.rendered=Nt,Wt.initSvg(),Wt.rendered&&Wt.render(),Nt=p_.getExtraBlockState_(Wt),At!==Nt){Gr(new(Wr(Qs))(Wt,"mutation",null,At,Nt));const cn=Ro();setTimeout(function(){const vn=Ro();oo(cn),Wt.bumpNeighbours(),oo(vn)},dt.config$$module$build$src$core$config.bumpDelay)}this.workspace_.isDragging()||setTimeout(()=>this.resizeBubble(),0),oo(St)}}dispose(){this.getBlock().mutator=null,super.dispose()}updateBlockStyle(){var St=this.workspace_;if(St&&St.getAllBlocks(!1)){const At=St.getAllBlocks(!1);for(let Nt=0,Wt;Wt=At[Nt];Nt++)Wt.setStyle(Wt.getStyleName());if(St=St.getFlyout()){St=St.getWorkspace().getAllBlocks(!1);for(let Nt=0,Wt;Wt=St[Nt];Nt++)Wt.setStyle(Wt.getStyleName())}}}static reconnect(St,At,Nt){if(!St||!St.getSourceBlock().workspace)return!1;Nt=At.getInput(Nt).connection;const Wt=St.targetBlock();return Wt&&Wt!==At||!Nt||Nt.targetConnection===St?!1:(Nt.isConnected()&&Nt.disconnect(),Nt.connect(St),!0)}static findParentWs(St){let At=null;if(St&&St.options){const Nt=St.options.parentWorkspace;St.isFlyout?Nt&&Nt.options&&(At=Nt.options.parentWorkspace):Nt&&(At=Nt)}return At}},bT={},bT.Mutator=dt.Mutator$$module$build$src$core$mutator;var SO=Object.create(null),nx={allExtensions:SO};Hm("parent_tooltip_when_inline",sS),dt.module$build$src$core$extensions={},dt.module$build$src$core$extensions.TEST_ONLY=nx,dt.module$build$src$core$extensions.apply=kp,dt.module$build$src$core$extensions.buildTooltipForDropdown=sy,dt.module$build$src$core$extensions.buildTooltipWithFieldText=H0,dt.module$build$src$core$extensions.isRegistered=B_,dt.module$build$src$core$extensions.register=Hm,dt.module$build$src$core$extensions.registerMixin=B0,dt.module$build$src$core$extensions.registerMutator=F0,dt.module$build$src$core$extensions.runAfterPageLoad=Qm,dt.module$build$src$core$extensions.unregister=G0;var ST={};ST.removeElem=_l;var Vp={};Vp.arc=Ts,Vp.curve=Ul,Vp.line=lm,Vp.lineOnAxis=eo,Vp.lineTo=Ru,Vp.moveBy=ls,Vp.moveTo=Vs,Vp.point=_o;var zo={};zo.Coordinate=qr,zo.KeyCodes=co,zo.Rect=ws,zo.Size=Ks,zo.Svg=ar,zo.aria=r0,zo.array=ST,zo.arrayRemove=j0,zo.browserEvents=br,zo.checkMessageReferences=cS,zo.colour=Rl,zo.deprecation=xs,zo.dom=Gs,zo.extensions=dt.module$build$src$core$extensions,zo.getBlockTypeCounts=Y0,zo.getDocumentScroll=X0,zo.getInjectionDivXY_=lS,zo.getRelativeXY=aS,zo.getViewportBBox=z0,zo.idGenerator=xv,zo.is3dSupported=Q0,zo.math=$v,zo.object=i0,zo.parseBlockColour=Z0,zo.parsing=t0,zo.replaceMessageReferences=ly,zo.runAfterPageLoad=zm,zo.screenToWsCoordinates=ku,zo.string=dt.module$build$src$core$utils$string,zo.style=pp,zo.svgMath=Sm,zo.svgPaths=Vp,zo.tokenizeInterpolation=ay,zo.toolbox=$m,zo.userAgent=Is,zo.xml=dt.module$build$src$core$utils$xml;var YS=class extends Zu{constructor(St,At){super(At),this.type=Hy,this.isOpen=St}toJson(){const St=super.toJson();if(this.isOpen===void 0)throw Error("Whether this is already open or not is undefined. Either pass a value to the constructor, or call fromJson");return St.isOpen=this.isOpen,St}fromJson(St){vt("Blockly.Events.TrashcanOpen.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(St),this.isOpen=St.isOpen}static fromJson(St,At,Nt){return At=super.fromJson(St,At,Nt??new YS),At.isOpen=St.isOpen,At}};wo(Hr.EVENT,Hy,YS);var Wp=class{constructor(St){this.name_=St}toString(){return this.name_}};Wp.POSITIONABLE=new Wp("positionable"),Wp.DRAG_TARGET=new Wp("drag_target"),Wp.DELETE_AREA=new Wp("delete_area"),Wp.AUTOHIDEABLE=new Wp("autohideable");var Js=class{constructor(){this.componentData=new Map,this.capabilityToComponentIds=new Map}addComponent(St,At){const Nt=St.component.id;if(!At&&this.componentData.has(Nt)){var Wt;throw Error('Plugin "'+Nt+'" with capabilities "'+((Wt=this.componentData.get(Nt))==null?void 0:Wt.capabilities)+'" already added.')}for(this.componentData.set(Nt,St),At=[],Wt=0;Wt<St.capabilities.length;Wt++){const cn=String(St.capabilities[Wt]).toLowerCase();if(At.push(cn),this.capabilityToComponentIds.has(cn)){let vn;(vn=this.capabilityToComponentIds.get(cn))==null||vn.push(Nt)}else this.capabilityToComponentIds.set(cn,[Nt])}this.componentData.get(Nt).capabilities=At}removeComponent(St){const At=this.componentData.get(St);if(At){for(let Nt=0;Nt<At.capabilities.length;Nt++){const Wt=String(At.capabilities[Nt]).toLowerCase();_l(this.capabilityToComponentIds.get(Wt),St)}this.componentData.delete(St)}}addCapability(St,At){if(!this.getComponent(St))throw Error('Cannot add capability, "'+At+'". Plugin "'+St+'" has not been added to the ComponentManager');if(this.hasCapability(St,At))console.warn('Plugin "'+St+'already has capability "'+At+'"');else{At=String(At).toLowerCase();var Nt;(Nt=this.componentData.get(St))==null||Nt.capabilities.push(At);var Wt;(Wt=this.capabilityToComponentIds.get(At))==null||Wt.push(St)}}removeCapability(St,At){if(!this.getComponent(St))throw Error('Cannot remove capability, "'+At+'". Plugin "'+St+'" has not been added to the ComponentManager');this.hasCapability(St,At)?(At=String(At).toLowerCase(),_l(this.componentData.get(St).capabilities,At),_l(this.capabilityToComponentIds.get(At),St)):console.warn('Plugin "'+St+`doesn't have capability "`+At+'" to remove')}hasCapability(St,At){return At=String(At).toLowerCase(),this.componentData.has(St)&&this.componentData.get(St).capabilities.indexOf(At)!==-1}getComponent(St){let At;return(At=this.componentData.get(St))==null?void 0:At.component}getComponents(St,At){if(St=String(St).toLowerCase(),St=this.capabilityToComponentIds.get(St),!St)return[];const Nt=[];if(At){const Wt=[];St.forEach(cn=>{Wt.push(this.componentData.get(cn))}),Wt.sort(function(cn,vn){return cn.weight-vn.weight}),Wt.forEach(function(cn){Nt.push(cn.component)})}else St.forEach(Wt=>{Nt.push(this.componentData.get(Wt).component)});return Nt}};Js.Capability=Wp;var o0=class extends Error{},$T=class extends o0{constructor(St){super("Expected to find a 'type' property, defining the block type"),this.state=St}},s0=class extends o0{constructor(St,At,Nt){super(`The block ${At.toDevString()} is missing a(n) ${St}
connection`),this.block=At,this.state=Nt}},TT=class extends o0{constructor(St,At,Nt,Wt){super(`The block ${Nt.toDevString()} could not connect its
${At} to its parent, because: ${St}`),this.childBlock=Nt,this.childState=Wt}},ET=class extends o0{constructor(St){super(`Encountered a real block which is defined as a child of a shadow
block. It is an invariant of Blockly that shadow blocks only have shadow
children`),this.state=St}},$O={};$O.BadConnectionCheck=TT,$O.DeserializationError=o0,$O.MissingBlockType=$T,$O.MissingConnection=s0,$O.RealChildOfShadow=ET;var xT=100,wT=75,CT=50,Qv={};Qv.BLOCKS=CT,Qv.PROCEDURES=wT,Qv.VARIABLES=xT;var ZS={};ZS.register=Pp,ZS.unregister=W_;var AT=class{constructor(){this.priority=CT}save(St){const At=[];for(const Nt of St.getTopBlocks(!1))(St=tu(Nt,{addCoordinates:!0,doFullSerialization:!1}))&&At.push(St);return At.length?{languageVersion:0,blocks:At}:null}load(St,At){St=St.blocks;for(const Nt of St)rp(Nt,At,{recordUndo:Co()})}clear(St){for(const At of St.getTopBlocks(!1))At.dispose(!1)}};Pp("blocks",new AT);var a0={};a0.BlockSerializer=AT,a0.append=rp,a0.appendInternal=H_,a0.save=tu;var qS=class extends OO{constructor(St){super(St),this.type=Tl,St&&(St.isShadow()&&(this.recordUndo=!1),this.xml=Dl(St),this.ids=Yl(St),this.json=tu(St,{addCoordinates:!0}))}toJson(){const St=super.toJson();if(!this.xml)throw Error("The block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");return St.xml=Zl(this.xml),St.ids=this.ids,St.json=this.json,this.recordUndo||(St.recordUndo=this.recordUndo),St}fromJson(St){vt("Blockly.Events.BlockCreate.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(St),this.xml=ga(St.xml),this.ids=St.ids,this.json=St.json,St.recordUndo!==void 0&&(this.recordUndo=St.recordUndo)}static fromJson(St,At,Nt){return At=super.fromJson(St,At,Nt??new qS),At.xml=ga(St.xml),At.ids=St.ids,At.json=St.json,St.recordUndo!==void 0&&(At.recordUndo=St.recordUndo),At}run(St){const At=this.getEventWorkspace_();if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(St)rp(this.json,At);else for(St=0;St<this.ids.length;St++){const Nt=this.ids[St],Wt=At.getBlockById(Nt);Wt?Wt.dispose(!1):Nt===this.blockId&&console.warn("Can't uncreate non-existent block: "+Nt)}}};wo(Hr.EVENT,Tl,qS);var KS=class extends OO{constructor(St){if(super(St),this.type=mp,St){if(St.getParent())throw Error("Connected blocks cannot be deleted.");St.isShadow()&&(this.recordUndo=!1),this.oldXml=Dl(St),this.ids=Yl(St),this.wasShadow=St.isShadow(),this.oldJson=tu(St,{addCoordinates:!0})}}toJson(){const St=super.toJson();if(!this.oldXml)throw Error("The old block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(this.wasShadow===void 0)throw Error("Whether the block was a shadow is undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");return St.oldXml=Zl(this.oldXml),St.ids=this.ids,St.wasShadow=this.wasShadow,St.oldJson=this.oldJson,this.recordUndo||(St.recordUndo=this.recordUndo),St}fromJson(St){vt("Blockly.Events.BlockDelete.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(St),this.oldXml=ga(St.oldXml),this.ids=St.ids,this.wasShadow=St.wasShadow||this.oldXml.tagName.toLowerCase()==="shadow",this.oldJson=St.oldJson,St.recordUndo!==void 0&&(this.recordUndo=St.recordUndo)}static fromJson(St,At,Nt){return At=super.fromJson(St,At,Nt??new KS),At.oldXml=ga(St.oldXml),At.ids=St.ids,At.wasShadow=St.wasShadow||At.oldXml.tagName.toLowerCase()==="shadow",At.oldJson=St.oldJson,St.recordUndo!==void 0&&(At.recordUndo=St.recordUndo),At}run(St){const At=this.getEventWorkspace_();if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(St)for(St=0;St<this.ids.length;St++){const Nt=this.ids[St],Wt=At.getBlockById(Nt);Wt?Wt.dispose(!1):Nt===this.blockId&&console.warn("Can't delete non-existent block: "+Nt)}else rp(this.oldJson,At)}};wo(Hr.EVENT,mp,KS);var ro;(function(St){St[St.INPUT_VALUE=1]="INPUT_VALUE",St[St.OUTPUT_VALUE=2]="OUTPUT_VALUE",St[St.NEXT_STATEMENT=3]="NEXT_STATEMENT",St[St.PREVIOUS_STATEMENT=4]="PREVIOUS_STATEMENT"})(ro||(ro={})),dt.module$build$src$core$connection_type={},dt.module$build$src$core$connection_type.ConnectionType=ro;var Ko=class{constructor(St,At){this.type=At,this.targetConnection=null,this.disposed=!1,this.shadowDom_=this.check_=null,this.y=this.x=0,this.shadowState_=null,this.sourceBlock_=St}connect_(St){const At=ro.INPUT_VALUE,Nt=this.getSourceBlock();var Wt=St.getSourceBlock();St.isConnected()&&St.disconnect();let cn;if(this.isConnected()){const Pn=this.stashShadowState_(),qn=this.targetBlock();qn.isShadow()?qn.dispose(!1):(this.disconnect(),cn=qn),this.applyShadowState_(Pn)}let vn;ss()&&(vn=new(Wr(Hl))(Wt)),nv(this,St),Wt.setParent(Nt),vn&&(vn.recordNew(),Gr(vn)),cn&&(St=this.type===At?cn.outputConnection:cn.previousConnection,(Wt=Ko.getConnectionForOrphanedConnection(Wt,St))?St.connect(Wt):St.onFailedConnect(this))}dispose(){if(this.isConnected()){this.setShadowStateInternal_();const St=this.targetBlock();St&&St.unplug()}this.disposed=!0}getSourceBlock(){return this.sourceBlock_}isSuperior(){return this.type===ro.INPUT_VALUE||this.type===ro.NEXT_STATEMENT}isConnected(){return!!this.targetConnection}getConnectionChecker(){return this.sourceBlock_.workspace.connectionChecker}onFailedConnect(St){}connect(St){if(this.targetConnection===St)return!0;if(this.getConnectionChecker().canConnect(this,St,!1)){const At=Ro();At||oo(!0),this.isSuperior()?this.connect_(St):St.connect_(this),At||oo(!1)}return this.isConnected()}disconnect(){var St=this.targetConnection;if(!St)throw Error("Source connection not connected.");if(St.targetConnection!==this)throw Error("Target connection not connected to source connection.");let At,Nt;this.isSuperior()?(At=this.sourceBlock_,Nt=St.getSourceBlock(),St=this):(At=St.getSourceBlock(),Nt=this.sourceBlock_);const Wt=Ro();Wt||oo(!0),this.disconnectInternal_(At,Nt),Nt.isShadow()||St.respawnShadow_(),Wt||oo(!1)}disconnectInternal_(St,At){let Nt;ss()&&(Nt=new(Wr(Hl))(At)),(St=this.targetConnection)&&(St.targetConnection=null),this.targetConnection=null,At.setParent(null),Nt&&(Nt.recordNew(),Gr(Nt))}respawnShadow_(){this.createShadowBlock_(!0)}targetBlock(){if(this.isConnected()){let St,At;return(At=(St=this.targetConnection)==null?void 0:St.getSourceBlock())!=null?At:null}return null}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(St){return St?(Array.isArray(St)||(St=[St]),this.check_=St,this.onCheckChanged_()):this.check_=null,this}getCheck(){return this.check_}setShadowDom(St){this.setShadowStateInternal_({shadowDom:St})}getShadowDom(St){return St&&this.targetBlock().isShadow()?Fu(this.targetBlock()):this.shadowDom_}setShadowState(St){this.setShadowStateInternal_({shadowState:St})}getShadowState(St){return St&&this.targetBlock()&&this.targetBlock().isShadow()?tu(this.targetBlock()):this.shadowState_}neighbours(St){return[]}getParentInput(){let St=null;const At=this.sourceBlock_.inputList;for(let Nt=0;Nt<At.length;Nt++)if(At[Nt].connection===this){St=At[Nt];break}return St}toString(){const St=this.sourceBlock_;if(!St)return"Orphan Connection";if(St.outputConnection===this)var At="Output Connection of ";else if(St.previousConnection===this)At="Previous Connection of ";else if(St.nextConnection===this)At="Next Connection of ";else{At=null;for(let Nt=0,Wt;Wt=St.inputList[Nt];Nt++)if(Wt.connection===this){At=Wt;break}if(At)At='Input "'+At.name+'" connection on ';else return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection"}return At+St.toDevString()}stashShadowState_(){const St=this.getShadowDom(!0),At=this.getShadowState(!0);return this.shadowState_=this.shadowDom_=null,{shadowDom:St,shadowState:At}}applyShadowState_({shadowDom:St,shadowState:At}){this.shadowDom_=St,this.shadowState_=At}setShadowStateInternal_({shadowDom:St=null,shadowState:At=null}={}){this.shadowDom_=St,this.shadowState_=At,(St=this.targetBlock())?St.isShadow()?(St.dispose(!1),this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow_(this.targetBlock())):(St=this.createShadowBlock_(!1),this.serializeShadow_(St),St&&St.dispose(!1)):(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow_(this.targetBlock()))}createShadowBlock_(St){var At=this.getSourceBlock();const Nt=this.getShadowState(),Wt=this.getShadowDom();if(At.isDeadOrDying()||!Nt&&!Wt)return null;if(Nt)return At=H_(Nt,At.workspace,{parentConnection:St?this:void 0,isShadow:!0,recordUndo:!1});if(Wt){if(At=Gu(Wt,At.workspace),St)if(this.type===ro.INPUT_VALUE){if(!At.outputConnection)throw Error("Shadow block is missing an output connection");if(!this.connect(At.outputConnection))throw Error("Could not connect shadow block to connection")}else if(this.type===ro.NEXT_STATEMENT){if(!At.previousConnection)throw Error("Shadow block is missing previous connection");if(!this.connect(At.previousConnection))throw Error("Could not connect shadow block to connection")}else throw Error("Cannot connect a shadow block to a previous/output connection");return At}return null}serializeShadow_(St){St&&(this.shadowDom_=Fu(St),this.shadowState_=tu(St))}static getConnectionForOrphanedConnection(St,At){if(At.type===ro.OUTPUT_VALUE)return j_(St,At.getSourceBlock());St=St.lastConnectionInStack(!0);const Nt=At.getConnectionChecker();return St&&Nt.canConnect(At,St,!1)?St:null}};Ko.CAN_CONNECT=0,Ko.REASON_SELF_CONNECTION=1,Ko.REASON_WRONG_TYPE=2,Ko.REASON_TARGET_NULL=3,Ko.REASON_CHECKS_FAILED=4,Ko.REASON_DIFFERENT_WORKSPACES=5,Ko.REASON_SHADOW_PARENT=6,Ko.REASON_DRAG_CHECKS_FAILED=7,Ko.REASON_PREVIOUS_AND_OUTPUT=8;var l0="_TEMP_COLLAPSED_INPUT",c0="_TEMP_COLLAPSED_FIELD",JS={};JS.COLLAPSED_FIELD_NAME=c0,JS.COLLAPSED_INPUT_NAME=l0,dt.FieldLabel$$module$build$src$core$field_label=class extends Qo{constructor(St,At,Nt){super(Qo.SKIP_SETUP),this.class_=null,this.EDITABLE=!1,St!==Qo.SKIP_SETUP&&(Nt?this.configure_(Nt):this.class_=At||null,this.setValue(St))}configure_(St){super.configure_(St),St.class&&(this.class_=St.class)}initView(){this.createTextElement_(),this.class_&&ir(this.getTextElement(),this.class_)}doClassValidation_(St){return St==null?null:String(St)}setClass(St){this.textElement_&&(this.class_&&tr(this.textElement_,this.class_),St&&ir(this.textElement_,St)),this.class_=St}static fromJson(St){return new this(fs(St.text),void 0,St)}},xa("field_label",dt.FieldLabel$$module$build$src$core$field_label),dt.FieldLabel$$module$build$src$core$field_label.prototype.DEFAULT_VALUE="",dt.FieldLabel$$module$build$src$core$field_label;var TO=class{constructor(St,At,Nt,Wt){if(this.type=St,this.name=At,this.connection=Wt,this.fieldRow=[],this.align=dt.Align$$module$build$src$core$input.LEFT,this.visible=!0,St!==No.DUMMY&&!At)throw Error("Value inputs and statement inputs must have non-empty name.");this.sourceBlock=Nt}getSourceBlock(){return this.sourceBlock}appendField(St,At){return this.insertFieldAt(this.fieldRow.length,St,At),this}insertFieldAt(St,At,Nt){if(0>St||St>this.fieldRow.length)throw Error("index "+St+" out of bounds.");return(At||At===""&&Nt)&&(typeof At=="string"&&(At=Gm({type:"field_label",text:At})),At.setSourceBlock(this.sourceBlock),this.sourceBlock.rendered&&(At.init(),At.applyColour()),At.name=Nt,At.setVisible(this.isVisible()),At.prefixField&&(St=this.insertFieldAt(St,At.prefixField)),this.fieldRow.splice(St,0,At),St++,At.suffixField&&(St=this.insertFieldAt(St,At.suffixField)),this.sourceBlock.rendered&&(this.sourceBlock.render(),this.sourceBlock.bumpNeighbours())),St}removeField(St,At){for(let Nt=0,Wt;Wt=this.fieldRow[Nt];Nt++)if(Wt.name===St)return Wt.dispose(),this.fieldRow.splice(Nt,1),this.sourceBlock.rendered&&(this.sourceBlock.render(),this.sourceBlock.bumpNeighbours()),!0;if(At)return!1;throw Error('Field "'+St+'" not found.')}isVisible(){return this.visible}setVisible(St){let At=[];if(this.visible===St)return At;this.visible=St;for(let Wt=0,cn;cn=this.fieldRow[Wt];Wt++)cn.setVisible(St);if(this.connection){var Nt=this.connection;St?At=Nt.startTrackingAll():Nt.stopTrackingAll(),(Nt=Nt.targetBlock())&&(Nt.getSvgRoot().style.display=St?"block":"none")}return At}markDirty(){for(let St=0,At;At=this.fieldRow[St];St++)At.markDirty()}setCheck(St){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(St),this}setAlign(St){return this.align=St,this.sourceBlock.rendered&&this.sourceBlock.render(),this}setShadowDom(St){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(St),this}getShadowDom(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()}init(){if(this.sourceBlock.workspace.rendered)for(let St=0;St<this.fieldRow.length;St++)this.fieldRow[St].init()}dispose(){for(let St=0,At;At=this.fieldRow[St];St++)At.dispose();this.connection&&this.connection.dispose()}},e$;(function(St){St=St.Align||(St.Align={}),St[St.LEFT=-1]="LEFT",St[St.CENTRE=0]="CENTRE",St[St.RIGHT=1]="RIGHT"})(TO||(TO={})),dt.Align$$module$build$src$core$input=TO.Align,e$={},e$.Align=dt.Align$$module$build$src$core$input,e$.Input=TO;var Pr=class{constructor(St,At,Nt){if(this.wsCoordinate_=null,!At)throw Error("Cannot create a node without a location.");this.type_=St,this.isConnection_=Pr.isConnectionType_(St),this.location_=At,this.processParams_(Nt||null)}processParams_(St){St&&St.wsCoordinate&&(this.wsCoordinate_=St.wsCoordinate)}getLocation(){return this.location_}getType(){return this.type_}getWsCoordinate(){return this.wsCoordinate_}isConnection(){return this.isConnection_}findNextForInput_(){var St=this.location_.getParentInput();const At=St.getSourceBlock();for(St=At.inputList.indexOf(St),St+=1;St<At.inputList.length;St++){const Nt=At.inputList[St],Wt=Nt.fieldRow;for(let cn=0;cn<Wt.length;cn++){const vn=Wt[cn];if(vn.isClickable()||Pr.NAVIGATE_ALL_FIELDS)return Pr.createFieldNode(vn)}if(Nt.connection)return Pr.createInputNode(Nt)}return null}findNextForField_(){var St=this.location_,At=St.getParentInput();const Nt=St.getSourceBlock();if(!Nt)throw Error("The current AST location is not associated with a block");var Wt=Nt.inputList.indexOf(At);for(St=At.fieldRow.indexOf(St)+1;Wt<Nt.inputList.length;Wt++){At=Nt.inputList[Wt];const cn=At.fieldRow;for(;St<cn.length;){if(cn[St].isClickable()||Pr.NAVIGATE_ALL_FIELDS)return Pr.createFieldNode(cn[St]);St++}if(St=0,At.connection)return Pr.createInputNode(At)}return null}findPrevForInput_(){const St=this.location_.getParentInput(),At=St.getSourceBlock();for(var Nt=At.inputList.indexOf(St);0<=Nt;Nt--){var Wt=At.inputList[Nt];if(Wt.connection&&Wt!==St)return Pr.createInputNode(Wt);Wt=Wt.fieldRow;for(let cn=Wt.length-1;0<=cn;cn--){const vn=Wt[cn];if(vn.isClickable()||Pr.NAVIGATE_ALL_FIELDS)return Pr.createFieldNode(vn)}}return null}findPrevForField_(){var St=this.location_;const At=St.getParentInput(),Nt=St.getSourceBlock();if(!Nt)throw Error("The current AST location is not associated with a block");var Wt=Nt.inputList.indexOf(At);for(St=At.fieldRow.indexOf(St)-1;0<=Wt;Wt--){var cn=Nt.inputList[Wt];if(cn.connection&&cn!==At)return Pr.createInputNode(cn);for(cn=cn.fieldRow;-1<St;){if(cn[St].isClickable()||Pr.NAVIGATE_ALL_FIELDS)return Pr.createFieldNode(cn[St]);St--}0<=Wt-1&&(St=Nt.inputList[Wt-1].fieldRow.length-1)}return null}navigateBetweenStacks_(St){var At=this.getLocation();if(At.getSourceBlock){var Nt=At.getSourceBlock();Nt&&(At=Nt)}if(!At||At.isDeadOrDying())return null;Nt=At.getRootBlock(),At=Nt.workspace.getTopBlocks(!0);for(let Wt=0;Wt<At.length;Wt++)if(Nt.id===At[Wt].id)return St=Wt+(St?1:-1),St===-1||St===At.length?null:Pr.createStackNode(At[St]);throw Error("Couldn't find "+(St?"next":"previous")+" stack?!")}findTopASTNodeForBlock_(St){const At=Xm(St);return At?Pr.createConnectionNode(At):Pr.createBlockNode(St)}getOutAstNodeForBlock_(St){if(!St)return null;St=St.getTopStackBlock();const At=Xm(St);return At&&At.targetConnection&&At.targetConnection.getParentInput()?Pr.createInputNode(At.targetConnection.getParentInput()):Pr.createStackNode(St)}findFirstFieldOrInput_(St){St=St.inputList;for(let At=0;At<St.length;At++){const Nt=St[At],Wt=Nt.fieldRow;for(let cn=0;cn<Wt.length;cn++){const vn=Wt[cn];if(vn.isClickable()||Pr.NAVIGATE_ALL_FIELDS)return Pr.createFieldNode(vn)}if(Nt.connection)return Pr.createInputNode(Nt)}return null}getSourceBlock(){return this.getType()===Pr.types.BLOCK?this.getLocation():this.getType()===Pr.types.STACK?this.getLocation():this.getType()===Pr.types.WORKSPACE?null:this.getLocation().getSourceBlock()}next(){switch(this.type_){case Pr.types.STACK:return this.navigateBetweenStacks_(!0);case Pr.types.OUTPUT:return Pr.createBlockNode(this.location_.getSourceBlock());case Pr.types.FIELD:return this.findNextForField_();case Pr.types.INPUT:return this.findNextForInput_();case Pr.types.BLOCK:return Pr.createConnectionNode(this.location_.nextConnection);case Pr.types.PREVIOUS:return Pr.createBlockNode(this.location_.getSourceBlock());case Pr.types.NEXT:return Pr.createConnectionNode(this.location_.targetConnection)}return null}in(){switch(this.type_){case Pr.types.WORKSPACE:const St=this.location_.getTopBlocks(!0);if(0<St.length)return Pr.createStackNode(St[0]);break;case Pr.types.STACK:return this.findTopASTNodeForBlock_(this.location_);case Pr.types.BLOCK:return this.findFirstFieldOrInput_(this.location_);case Pr.types.INPUT:return Pr.createConnectionNode(this.location_.targetConnection)}return null}prev(){switch(this.type_){case Pr.types.STACK:return this.navigateBetweenStacks_(!1);case Pr.types.FIELD:return this.findPrevForField_();case Pr.types.INPUT:return this.findPrevForInput_();case Pr.types.BLOCK:var St=Xm(this.location_);return Pr.createConnectionNode(St);case Pr.types.PREVIOUS:if((St=this.location_.targetConnection)&&!St.getParentInput())return Pr.createConnectionNode(St);break;case Pr.types.NEXT:return Pr.createBlockNode(this.location_.getSourceBlock())}return null}out(){switch(this.type_){case Pr.types.STACK:var St=this.location_,At=St.getRelativeToSurfaceXY();return At=new qr(At.x,At.y+Pr.DEFAULT_OFFSET_Y),Pr.createWorkspaceNode(St.workspace,At);case Pr.types.OUTPUT:return St=this.location_,(At=St.targetConnection)?Pr.createConnectionNode(At):Pr.createStackNode(St.getSourceBlock());case Pr.types.FIELD:if(St=this.location_.getSourceBlock(),!St)throw Error("The current AST location is not associated with a block");return Pr.createBlockNode(St);case Pr.types.INPUT:return Pr.createBlockNode(this.location_.getSourceBlock());case Pr.types.BLOCK:return this.getOutAstNodeForBlock_(this.location_);case Pr.types.PREVIOUS:return this.getOutAstNodeForBlock_(this.location_.getSourceBlock());case Pr.types.NEXT:return this.getOutAstNodeForBlock_(this.location_.getSourceBlock())}return null}static isConnectionType_(St){switch(St){case Pr.types.PREVIOUS:case Pr.types.NEXT:case Pr.types.INPUT:case Pr.types.OUTPUT:return!0}return!1}static createFieldNode(St){return St?new Pr(Pr.types.FIELD,St):null}static createConnectionNode(St){if(!St)return null;const At=St.type;return At===ro.INPUT_VALUE||At===ro.NEXT_STATEMENT&&St.getParentInput()?Pr.createInputNode(St.getParentInput()):At===ro.NEXT_STATEMENT?new Pr(Pr.types.NEXT,St):At===ro.OUTPUT_VALUE?new Pr(Pr.types.OUTPUT,St):At===ro.PREVIOUS_STATEMENT?new Pr(Pr.types.PREVIOUS,St):null}static createInputNode(St){return St&&St.connection?new Pr(Pr.types.INPUT,St.connection):null}static createBlockNode(St){return St?new Pr(Pr.types.BLOCK,St):null}static createStackNode(St){return St?new Pr(Pr.types.STACK,St):null}static createWorkspaceNode(St,At){return At&&St?new Pr(Pr.types.WORKSPACE,St,{wsCoordinate:At}):null}static createTopNode(St){const At=Xm(St);return At?Pr.createConnectionNode(At):Pr.createBlockNode(St)}};Pr.NAVIGATE_ALL_FIELDS=!1,Pr.DEFAULT_OFFSET_Y=-20,function(St){St=St.types||(St.types={}),St.FIELD="field",St.BLOCK="block",St.INPUT="input",St.OUTPUT="output",St.NEXT="next",St.PREVIOUS="previous",St.STACK="stack",St.WORKSPACE="workspace"}(Pr||(Pr={}));var EO=class{constructor(St,At,Nt){if(this.data=null,this.disposed=!1,this.hue_=null,this.colour_="#000000",this.styleName_="",this.loadExtraState=this.saveExtraState=this.domToMutation=this.mutationToDom=this.destroy=this.init=void 0,this.suppressPrefixSuffix=!1,this.decompose=this.compose=this.getDeveloperVariables=void 0,this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.outputShape_=null,this.disposing=!1,this.comment=null,this.isInsertionMarker_=!1,this.hat=void 0,this.onchangeWrapper_=this.helpUrl=this.rendered=null,this.statementInputCount=0,this.workspace=St,this.id=Nt&&!St.getBlockById(Nt)?Nt:xo(),St.setBlockById(this.id,this),this.commentModel={text:null,pinned:!1,size:new Ks(160,80)},this.xy_=new qr(0,0),this.isInFlyout=St.isFlyout,this.isInMutator=St.isMutator,this.RTL=St.RTL,At){if(this.type=At,Nt=Xr[At],!Nt||typeof Nt!="object")throw TypeError("Invalid block definition for type: "+At);Object.assign(this,Nt)}St.addTopBlock(this),St.addTypedBlock(this),new.target===EO&&this.doInit_()}doInit_(){const St=Ro();St||oo(!0);const At=Co();try{typeof this.init=="function"&&(Io(!1),this.init(),Io(At)),ss()&&Gr(new(Wr(Tl))(this))}finally{St||oo(!1),Io(At)}this.inputsInlineDefault=this.inputsInline,typeof this.onchange=="function"&&this.setOnChange(this.onchange)}dispose(St){if(!this.isDeadOrDying()){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(St),ss()&&Gr(new(Wr(mp))(this)),Fo();try{this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.disposing=!0;for(let Nt=this.childBlocks_.length-1;0<=Nt;Nt--)this.childBlocks_[Nt].dispose(!1);for(let Nt=0,Wt;Wt=this.inputList[Nt];Nt++)Wt.dispose();this.inputList.length=0;const At=this.getConnections_(!0);for(let Nt=0,Wt;Wt=At[Nt];Nt++)Wt.dispose()}finally{vo(),typeof this.destroy=="function"&&this.destroy(),this.disposed=!0}}}isDeadOrDying(){return this.disposing||this.disposed}initModel(){for(let St=0,At;At=this.inputList[St];St++)for(let Nt=0,Wt;Wt=At.fieldRow[Nt];Nt++)Wt.initModel&&Wt.initModel()}unplug(St){this.outputConnection&&this.unplugFromRow_(St),this.previousConnection&&this.unplugFromStack_(St)}unplugFromRow_(St){let At=null;this.outputConnection.isConnected()&&(At=this.outputConnection.targetConnection,this.outputConnection.disconnect()),At&&St&&(St=this.getOnlyValueConnection_())&&St.isConnected()&&!St.targetBlock().isShadow()&&(St=St.targetConnection,St==null||St.disconnect(),this.workspace.connectionChecker.canConnect(St,At,!1)?At.connect(St):St==null||St.onFailedConnect(At))}getOnlyValueConnection_(){let St=null;for(let At=0;At<this.inputList.length;At++){const Nt=this.inputList[At].connection;if(Nt&&Nt.type===ro.INPUT_VALUE&&Nt.targetConnection){if(St)return null;St=Nt}}return St}unplugFromStack_(St){let At=null;this.previousConnection.isConnected()&&(At=this.previousConnection.targetConnection,this.previousConnection.disconnect());const Nt=this.getNextBlock();St&&Nt&&!Nt.isShadow()&&(St=this.nextConnection.targetConnection,St==null||St.disconnect(),At&&this.workspace.connectionChecker.canConnect(At,St,!1)&&At.connect(St))}getConnections_(St){St=[],this.outputConnection&&St.push(this.outputConnection),this.previousConnection&&St.push(this.previousConnection),this.nextConnection&&St.push(this.nextConnection);for(let At=0,Nt;Nt=this.inputList[At];At++)Nt.connection&&St.push(Nt.connection);return St}lastConnectionInStack(St){let At=this.nextConnection;for(;At;){const Nt=At.targetBlock();if(!Nt||St&&Nt.isShadow())return At;At=Nt.nextConnection}return null}bumpNeighbours(){}getParent(){return this.parentBlock_}getInputWithBlock(St){for(let At=0,Nt;Nt=this.inputList[At];At++)if(Nt.connection&&Nt.connection.targetBlock()===St)return Nt;return null}getSurroundParent(){let St=this,At;do if(At=St,St=St.getParent(),!St)return null;while(St.getNextBlock()===At);return St}getNextBlock(){return this.nextConnection&&this.nextConnection.targetBlock()}getPreviousBlock(){return this.previousConnection&&this.previousConnection.targetBlock()}getFirstStatementConnection(){for(let St=0,At;At=this.inputList[St];St++)if(At.connection&&At.connection.type===ro.NEXT_STATEMENT)return At.connection;return null}getRootBlock(){let St,At=this;do St=At,At=St.parentBlock_;while(At);return St}getTopStackBlock(){let St=this,At;do At=St.getPreviousBlock();while(At&&At.getNextBlock()===St&&(St=At));return St}getChildren(St){if(!St)return this.childBlocks_;St=[];for(let Nt=0,Wt;Wt=this.inputList[Nt];Nt++)if(Wt.connection){var At=Wt.connection.targetBlock();At&&St.push(At)}return(At=this.getNextBlock())&&St.push(At),St}setParent(St){if(St!==this.parentBlock_){var At=this.previousConnection&&this.previousConnection.targetBlock()||this.outputConnection&&this.outputConnection.targetBlock(),Nt=!!At;if(Nt&&St&&At!==St)throw Error("Block connected to superior one that is not new parent.");if(!Nt&&St)throw Error("Block not connected to new parent.");if(Nt&&!St)throw Error("Cannot set parent to null while block is still connected to superior block.");this.parentBlock_?_l(this.parentBlock_.childBlocks_,this):this.workspace.removeTopBlock(this),(this.parentBlock_=St)?St.childBlocks_.push(this):this.workspace.addTopBlock(this)}}getDescendants(St){const At=[this],Nt=this.getChildren(St);for(let Wt,cn=0;Wt=Nt[cn];cn++)At.push(...Wt.getDescendants(St));return At}isDeletable(){return this.deletable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}setDeletable(St){this.deletable_=St}isMovable(){return this.movable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}setMovable(St){this.movable_=St}isDuplicatable(){return this.workspace.hasBlockLimits()?this.workspace.isCapacityAvailable(zn(this,!0)):!0}isShadow(){return this.isShadow_}setShadow(St){this.isShadow_=St}isInsertionMarker(){return this.isInsertionMarker_}setInsertionMarker(St){this.isInsertionMarker_=St}isEditable(){return this.editable_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}setEditable(St){this.editable_=St;for(let At=0,Nt;Nt=this.inputList[At];At++)for(let Wt=0,cn;cn=Nt.fieldRow[Wt];Wt++)cn.updateEditable()}isDisposed(){return this.disposed}getMatchingConnection(St,At){const Nt=this.getConnections_(!0);if(St=St.getConnections_(!0),Nt.length!==St.length)throw Error("Connection lists did not match in length.");for(let Wt=0;Wt<St.length;Wt++)if(St[Wt]===At)return Nt[Wt];return null}setHelpUrl(St){this.helpUrl=St}setTooltip(St){this.tooltip=St}getTooltip(){return wu(this)}getColour(){return this.colour_}getStyleName(){return this.styleName_}getHue(){return this.hue_}setColour(St){St=gu(St),this.hue_=St.hue,this.colour_=St.hex}setStyle(St){this.styleName_=St}setOnChange(St){if(St&&typeof St!="function")throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.onchange=St,this.onchangeWrapper_=St.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_)}getField(St){if(typeof St!="string")throw TypeError("Block.prototype.getField expects a string with the field name but received "+(St===void 0?"nothing":St+" of type "+typeof St)+" instead");for(let At=0,Nt;Nt=this.inputList[At];At++)for(let Wt=0,cn;cn=Nt.fieldRow[Wt];Wt++)if(cn.name===St)return cn;return null}getVars(){const St=[];for(let At=0,Nt;Nt=this.inputList[At];At++)for(let Wt=0,cn;cn=Nt.fieldRow[Wt];Wt++)cn.referencesVariables()&&St.push(cn.getValue());return St}getVarModels(){const St=[];for(let At=0,Nt;Nt=this.inputList[At];At++)for(let Wt=0,cn;cn=Nt.fieldRow[Wt];Wt++)if(cn.referencesVariables()){const vn=this.workspace.getVariableById(cn.getValue());vn&&St.push(vn)}return St}updateVarName(St){for(let At=0,Nt;Nt=this.inputList[At];At++)for(let Wt=0,cn;cn=Nt.fieldRow[Wt];Wt++)cn.referencesVariables()&&St.getId()===cn.getValue()&&cn.refreshVariableName()}renameVarById(St,At){for(let Nt=0,Wt;Wt=this.inputList[Nt];Nt++)for(let cn=0,vn;vn=Wt.fieldRow[cn];cn++)vn.referencesVariables()&&St===vn.getValue()&&vn.setValue(At)}getFieldValue(St){return(St=this.getField(St))?St.getValue():null}setFieldValue(St,At){const Nt=this.getField(At);if(!Nt)throw Error('Field "'+At+'" not found.');Nt.setValue(St)}setPreviousStatement(St,At){if(St)At===void 0&&(At=null),this.previousConnection||(this.previousConnection=this.makeConnection_(ro.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(At);else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}}setNextStatement(St,At){if(St)At===void 0&&(At=null),this.nextConnection||(this.nextConnection=this.makeConnection_(ro.NEXT_STATEMENT)),this.nextConnection.setCheck(At);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}}setOutput(St,At){if(St)At===void 0&&(At=null),this.outputConnection||(this.outputConnection=this.makeConnection_(ro.OUTPUT_VALUE)),this.outputConnection.setCheck(At);else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}}setInputsInline(St){this.inputsInline!==St&&(Gr(new(Wr(Qs))(this,"inline",null,this.inputsInline,St)),this.inputsInline=St)}getInputsInline(){if(this.inputsInline!==void 0)return this.inputsInline;for(var St=1;St<this.inputList.length;St++)if(this.inputList[St-1].type===No.DUMMY&&this.inputList[St].type===No.DUMMY)return!1;for(St=1;St<this.inputList.length;St++)if(this.inputList[St-1].type===No.VALUE&&this.inputList[St].type===No.DUMMY)return!0;return!1}setOutputShape(St){this.outputShape_=St}getOutputShape(){return this.outputShape_}isEnabled(){return!this.disabled}setEnabled(St){if(this.isEnabled()!==St){const At=this.disabled;this.disabled=!St,Gr(new(Wr(Qs))(this,"disabled",null,At,!St))}}getInheritedDisabled(){let St=this.getSurroundParent();for(;St;){if(St.disabled)return!0;St=St.getSurroundParent()}return!1}isCollapsed(){return this.collapsed_}setCollapsed(St){this.collapsed_!==St&&(Gr(new(Wr(Qs))(this,"collapsed",null,this.collapsed_,St)),this.collapsed_=St)}toString(St,At){function Nt(Kr){let Xo=Kr.getCheck();return!Xo&&Kr.targetConnection&&(Xo=Kr.targetConnection.getCheck()),!!Xo&&(Xo.indexOf("Boolean")!==-1||Xo.indexOf("Number")!==-1)}function Wt(){let Kr,Xo;Pn&&Pn.getType()===((Kr=qn)==null?void 0:Kr.getType())&&Pn.getLocation()===((Xo=qn)==null?void 0:Xo.getLocation())&&(Pn=null)}var cn=[];At=At||"?";const vn=Pr.NAVIGATE_ALL_FIELDS;Pr.NAVIGATE_ALL_FIELDS=!0;let Pn=Pr.createBlockNode(this);const qn=Pn;for(;Pn;){switch(Pn.getType()){case Pr.types.INPUT:var Ar=Pn.getLocation();Pn.in()?Nt(Ar)&&cn.push("("):cn.push(At);break;case Pr.types.FIELD:Ar=Pn.getLocation(),Ar.name!==c0&&cn.push(Ar.getText())}if(Ar=Pn,Pn=Ar.in()||Ar.next(),!Pn){for(Pn=Ar.out(),Wt();Pn&&!Pn.next();)Pn=Pn.out(),Wt(),Pn&&Pn.getType()===Pr.types.INPUT&&Nt(Pn.getLocation())&&cn.push(")");Pn&&(Pn=Pn.next())}}for(Pr.NAVIGATE_ALL_FIELDS=vn,At=2;At<cn.length;At++)cn[At-2]==="("&&cn[At]===")"&&(cn[At-2]=cn[At-1],cn.splice(At-1,2));return cn=cn.reduce(function(Kr,Xo){return Kr+(Kr.substr(-1)==="("||Xo===")"?"":" ")+Xo},""),cn=cn.trim()||"???",St&&cn.length>St&&(cn=cn.substring(0,St-3)+"..."),cn}appendValueInput(St){return this.appendInput_(No.VALUE,St)}appendStatementInput(St){return this.appendInput_(No.STATEMENT,St)}appendDummyInput(St){return this.appendInput_(No.DUMMY,St||"")}jsonInit(St){var At=St.type?'Block "'+St.type+'": ':"";if(St.output&&St.previousStatement)throw Error(At+"Must not have both an output and a previousStatement.");if(St.style&&St.style.hat&&(this.hat=St.style.hat,St.style=null),St.style&&St.colour)throw Error(At+"Must not have both a colour and a style.");St.style?this.jsonInitStyle_(St,At):this.jsonInitColour_(St,At);for(var Nt=0;St["message"+Nt]!==void 0;)this.interpolate_(St["message"+Nt],St["args"+Nt]||[],St["lastDummyAlign"+Nt],At),Nt++;if(St.inputsInline!==void 0&&this.setInputsInline(St.inputsInline),St.output!==void 0&&this.setOutput(!0,St.output),St.outputShape!==void 0&&this.setOutputShape(St.outputShape),St.previousStatement!==void 0&&this.setPreviousStatement(!0,St.previousStatement),St.nextStatement!==void 0&&this.setNextStatement(!0,St.nextStatement),St.tooltip!==void 0&&(Nt=fs(St.tooltip),this.setTooltip(Nt)),St.enableContextMenu!==void 0&&(this.contextMenu=!!St.enableContextMenu),St.suppressPrefixSuffix!==void 0&&(this.suppressPrefixSuffix=!!St.suppressPrefixSuffix),St.helpUrl!==void 0&&(Nt=fs(St.helpUrl),this.setHelpUrl(Nt)),typeof St.extensions=="string"&&(console.warn(At+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+St.type+"' block."),St.extensions=[St.extensions]),St.mutator!==void 0&&kp(St.mutator,this,!0),St=St.extensions,Array.isArray(St))for(At=0;At<St.length;At++)kp(St[At],this,!1)}jsonInitColour_(St,At){if("colour"in St)if(St.colour===void 0)console.warn(At+"Undefined colour value.");else{St=St.colour;try{this.setColour(St)}catch{console.warn(At+"Illegal colour value: ",St)}}}jsonInitStyle_(St,At){St=St.style;try{this.setStyle(St)}catch{console.warn(At+"Style does not exist: ",St)}}mixin(St,At){if(At!==void 0&&typeof At!="boolean")throw Error("opt_disableCheck must be a boolean if provided");if(!At){At=[];for(const Nt in St)this[Nt]!==void 0&&At.push(Nt);if(At.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(At))}Object.assign(this,St)}interpolate_(St,At,Nt,Wt){St=im(St),this.validateTokens_(St,At.length),At=this.interpolateArguments_(St,At,Nt),Nt=[];for(let cn=0,vn;vn=At[cn];cn++)if(this.isInputKeyword_(vn.type)){if(St=this.inputFromJson_(vn,Wt)){for(let Pn=0,qn;qn=Nt[Pn];Pn++)St.appendField(qn[0],qn[1]);Nt.length=0}}else(St=this.fieldFromJson_(vn))&&Nt.push([St,vn.name])}validateTokens_(St,At){const Nt=[];let Wt=0;for(let cn=0;cn<St.length;cn++){const vn=St[cn];if(typeof vn=="number"){if(1>vn||vn>At)throw Error('Block "'+this.type+'": Message index %'+vn+" out of range.");if(Nt[vn])throw Error('Block "'+this.type+'": Message index %'+vn+" duplicated.");Nt[vn]=!0,Wt++}}if(Wt!==At)throw Error('Block "'+this.type+'": Message does not reference all '+At+" arg(s).")}interpolateArguments_(St,At,Nt){const Wt=[];for(let cn=0;cn<St.length;cn++){let vn=St[cn];typeof vn=="number"&&(vn=At[vn-1]),!(typeof vn=="string"&&(vn=this.stringToFieldJson_(vn),!vn))&&Wt.push(vn)}return(St=Wt.length)&&!this.isInputKeyword_(Wt[St-1].type)&&(St={type:"input_dummy"},Nt&&(St.align=Nt),Wt.push(St)),Wt}fieldFromJson_(St){const At=Gm(St);return!At&&St.alt?typeof St.alt=="string"?(St=this.stringToFieldJson_(St.alt))?this.fieldFromJson_(St):null:this.fieldFromJson_(St.alt):At}inputFromJson_(St,At){var Nt={LEFT:dt.Align$$module$build$src$core$input.LEFT,RIGHT:dt.Align$$module$build$src$core$input.RIGHT,CENTRE:dt.Align$$module$build$src$core$input.CENTRE,CENTER:dt.Align$$module$build$src$core$input.CENTRE};let Wt=null;switch(St.type){case"input_value":Wt=this.appendValueInput(St.name);break;case"input_statement":Wt=this.appendStatementInput(St.name);break;case"input_dummy":Wt=this.appendDummyInput(St.name)}return Wt?(St.check&&Wt.setCheck(St.check),St.align&&(Nt=Nt[St.align.toUpperCase()],Nt===void 0?console.warn(At+"Illegal align value: ",St.align):Wt.setAlign(Nt)),Wt):null}isInputKeyword_(St){return St==="input_value"||St==="input_statement"||St==="input_dummy"}stringToFieldJson_(St){return(St=St.trim())?{type:"field_label",text:St}:null}appendInput_(St,At){let Nt=null;return(St===No.VALUE||St===No.STATEMENT)&&(Nt=this.makeConnection_(St)),St===No.STATEMENT&&this.statementInputCount++,St=new TO(St,At,this,Nt),this.inputList.push(St),St}moveInputBefore(St,At){if(St!==At){var Nt=-1,Wt=At?-1:this.inputList.length;for(let cn=0,vn;vn=this.inputList[cn];cn++)if(vn.name===St){if(Nt=cn,Wt!==-1)break}else if(At&&vn.name===At&&(Wt=cn,Nt!==-1))break;if(Nt===-1)throw Error('Named input "'+St+'" not found.');if(Wt===-1)throw Error('Reference input "'+At+'" not found.');this.moveNumberedInputBefore(Nt,Wt)}}moveNumberedInputBefore(St,At){if(St===At)throw Error("Can't move input to itself.");if(St>=this.inputList.length)throw RangeError("Input index "+St+" out of bounds.");if(At>this.inputList.length)throw RangeError("Reference input "+At+" out of bounds.");const Nt=this.inputList[St];this.inputList.splice(St,1),St<At&&At--,this.inputList.splice(At,0,Nt)}removeInput(St,At){for(let Nt=0,Wt;Wt=this.inputList[Nt];Nt++)if(Wt.name===St)return Wt.type===No.STATEMENT&&this.statementInputCount--,Wt.dispose(),this.inputList.splice(Nt,1),!0;if(At)return!1;throw Error("Input not found: "+St)}getInput(St){for(let At=0,Nt;Nt=this.inputList[At];At++)if(Nt.name===St)return Nt;return null}getInputTargetBlock(St){return(St=this.getInput(St))&&St.connection&&St.connection.targetBlock()}getCommentText(){return this.commentModel.text}setCommentText(St){this.commentModel.text!==St&&(Gr(new(Wr(Qs))(this,"comment",null,this.commentModel.text,St)),this.comment=this.commentModel.text=St)}setWarningText(St,At){}setMutator(St){}getRelativeToSurfaceXY(){return this.xy_}moveBy(St,At){if(this.parentBlock_)throw Error("Block has parent.");const Nt=new(Wr(Hl))(this);this.xy_.translate(St,At),Nt.recordNew(),Gr(Nt)}makeConnection_(St){return new Ko(this,St)}allInputsFilled(St){if(St===void 0&&(St=!0),!St&&this.isShadow())return!1;for(let Nt=0,Wt;Wt=this.inputList[Nt];Nt++)if(Wt.connection){var At=Wt.connection.targetBlock();if(!At||!At.allInputsFilled(St))return!1}return(At=this.getNextBlock())?At.allInputsFilled(St):!0}toDevString(){let St=this.type?'"'+this.type+'" block':"Block";return this.id&&(St+=' (id="'+this.id+'")'),St}};EO.COLLAPSED_INPUT_NAME=l0,EO.COLLAPSED_FIELD_NAME=c0;var zv=null,u0=null,h0={};h0.connectionUiEffect=Mu,h0.disconnectUiEffect=ov,h0.disconnectUiStop=yu,h0.disposeUiEffect=X_;var IT=class extends Wv{constructor(St){super(St),this.cachedText="",this.paragraphElement_=this.textarea_=this.foreignObject=this.onInputWrapper=this.onChangeWrapper=this.onWheelWrapper=this.onMouseUpWrapper=null,this.model=St.commentModel;let At;this.model.text=(At=this.model.text)!=null?At:"",this.createIcon()}drawIcon_(St){Mn(ar.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},St),Mn(ar.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},St),Mn(ar.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},St)}createEditor(){this.foreignObject=Mn(ar.FOREIGNOBJECT,{x:Mo.BORDER_WIDTH,y:Mo.BORDER_WIDTH});const St=document.createElementNS(vu,"body");St.setAttribute("xmlns",vu),St.className="blocklyMinimalBody";const At=this.textarea_=document.createElementNS(vu,"textarea");At.className="blocklyCommentTextarea",At.setAttribute("dir",this.getBlock().RTL?"RTL":"LTR");let Nt;return At.value=(Nt=this.model.text)!=null?Nt:"",this.resizeTextarea(),St.appendChild(At),this.foreignObject.appendChild(St),this.onMouseUpWrapper=Kt(At,"focus",this,this.startEdit,!0),this.onWheelWrapper=Kt(At,"wheel",this,function(Wt){Wt.stopPropagation()}),this.onChangeWrapper=Kt(At,"change",this,function(Wt){this.cachedText!==this.model.text&&Gr(new(Wr(Qs))(this.getBlock(),"comment",null,this.cachedText,this.model.text))}),this.onInputWrapper=Kt(At,"input",this,function(Wt){this.model.text=At.value}),setTimeout(At.focus.bind(At),0),this.foreignObject}updateEditable(){super.updateEditable(),this.isVisible()&&(this.disposeBubble(),this.createBubble())}onBubbleResize(){this.isVisible()&&this.bubble_&&(this.model.size=this.bubble_.getBubbleSize(),this.resizeTextarea())}resizeTextarea(){if(this.textarea_&&this.foreignObject){var St=this.model.size,At=2*Mo.BORDER_WIDTH,Nt=St.width-At;St=St.height-At,this.foreignObject.setAttribute("width",`${Nt}`),this.foreignObject.setAttribute("height",`${St}`),this.textarea_.style.width=Nt-4+"px",this.textarea_.style.height=St-4+"px"}}setVisible(St){St!==this.isVisible()&&(Gr(new(Wr(Gp))(this.getBlock(),St,"comment")),(this.model.pinned=St)?this.createBubble():this.disposeBubble())}createBubble(){this.getBlock().isEditable()?this.createEditableBubble():this.createNonEditableBubble()}createEditableBubble(){const St=this.getBlock();this.bubble_=new Mo(St.workspace,this.createEditor(),St.pathObject.svgPath,this.iconXY_,this.model.size.width,this.model.size.height),this.bubble_.setSvgId(St.id),this.bubble_.registerResizeEvent(this.onBubbleResize.bind(this)),this.applyColour()}createNonEditableBubble(){let St;this.paragraphElement_=Mo.textToDom((St=this.model.text)!=null?St:""),this.bubble_=Mo.createNonEditableBubble(this.paragraphElement_,this.getBlock(),this.iconXY_),this.applyColour()}disposeBubble(){this.onMouseUpWrapper&&(hn(this.onMouseUpWrapper),this.onMouseUpWrapper=null),this.onWheelWrapper&&(hn(this.onWheelWrapper),this.onWheelWrapper=null),this.onChangeWrapper&&(hn(this.onChangeWrapper),this.onChangeWrapper=null),this.onInputWrapper&&(hn(this.onInputWrapper),this.onInputWrapper=null),this.bubble_&&(this.bubble_.dispose(),this.bubble_=null),this.paragraphElement_=this.foreignObject=this.textarea_=null}startEdit(St){let At;(At=this.bubble_)!=null&&At.promote()&&this.textarea_.focus(),this.cachedText=this.model.text}getBubbleSize(){return this.model.size}setBubbleSize(St,At){this.bubble_?this.bubble_.setBubbleSize(St,At):(this.model.size.width=St,this.model.size.height=At)}updateText(){if(this.textarea_){let St;this.textarea_.value=(St=this.model.text)!=null?St:""}else this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model.text)}dispose(){this.getBlock().comment=null,super.dispose()}};hu(`
.blocklyCommentTextarea {
  background-color: #fef49c;
  border: 0;
  display: block;
  margin: 0;
  outline: 0;
  padding: 3px;
  resize: none;
  text-overflow: hidden;
}
`);var Hp=null,t$={duplicateInternal:sv,copyInternal:to},d0={};d0.TEST_ONLY=t$,d0.copy=Zm,d0.duplicate=um,d0.paste=cm;var f0,n$,p0;f0=null,n$={},p0=null,dt.module$build$src$core$contextmenu={},dt.module$build$src$core$contextmenu.callbackFactory=hv,dt.module$build$src$core$contextmenu.commentDeleteOption=Y_,dt.module$build$src$core$contextmenu.commentDuplicateOption=Z_,dt.module$build$src$core$contextmenu.dispose=yy,dt.module$build$src$core$contextmenu.getCurrentBlock=av,dt.module$build$src$core$contextmenu.hide=qm,dt.module$build$src$core$contextmenu.setCurrentBlock=ip,dt.module$build$src$core$contextmenu.show=op,dt.module$build$src$core$contextmenu.workspaceCommentOption=dv;var Jo=class{constructor(){this.registry_=new Map,this.reset()}reset(){this.registry_.clear()}register(St){if(this.registry_.has(St.id))throw Error('Menu item with ID "'+St.id+'" is already registered.');this.registry_.set(St.id,St)}unregister(St){if(!this.registry_.has(St))throw Error('Menu item with ID "'+St+'" not found.');this.registry_.delete(St)}getItem(St){let At;return(At=this.registry_.get(St))!=null?At:null}getContextMenuOptions(St,At){const Nt=[];for(const cn of this.registry_.values())if(St===cn.scopeType){var Wt=cn.preconditionFn(At);Wt!=="hidden"&&(Wt={text:typeof cn.displayText=="function"?cn.displayText(At):cn.displayText,enabled:Wt==="enabled",callback:cn.callback,scope:At,weight:cn.weight},Nt.push(Wt))}return Nt.sort(function(cn,vn){return cn.weight-vn.weight}),Nt}};(function(St){var At=St.ScopeType||(St.ScopeType={});At.BLOCK="block",At.WORKSPACE="workspace",St.registry=new St})(Jo||(Jo={})),Jo.ScopeType;var RT=30,kT=!0,g_=[];g_[ro.INPUT_VALUE]=ro.OUTPUT_VALUE,g_[ro.OUTPUT_VALUE]=ro.INPUT_VALUE,g_[ro.NEXT_STATEMENT]=ro.PREVIOUS_STATEMENT,g_[ro.PREVIOUS_STATEMENT]=ro.NEXT_STATEMENT;var r$="RENAME_VARIABLE_ID",i$="DELETE_VARIABLE_ID",MT=class{constructor(){this.drawer_=this.curNode_=this.colour=null,this.type="marker"}setDrawer(St){this.drawer_=St}getDrawer(){return this.drawer_}getCurNode(){return this.curNode_}setCurNode(St){const At=this.curNode_;this.curNode_=St,this.drawer_&&this.drawer_.draw(At,this.curNode_)}draw(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)}hide(){this.drawer_&&this.drawer_.hide()}dispose(){this.getDrawer()&&this.getDrawer().dispose()}},o$=class extends MT{constructor(){super(),this.type="cursor"}next(){var St=this.getCurNode();if(!St)return null;for(St=St.next();St&&St.next()&&(St.getType()===Pr.types.NEXT||St.getType()===Pr.types.BLOCK);)St=St.next();return St&&this.setCurNode(St),St}in(){var St=this.getCurNode();if(!St)return null;(St.getType()===Pr.types.PREVIOUS||St.getType()===Pr.types.OUTPUT)&&(St=St.next());let At,Nt;return(St=(Nt=(At=St)==null?void 0:At.in())!=null?Nt:null)&&this.setCurNode(St),St}prev(){var St=this.getCurNode();if(!St)return null;for(St=St.prev();St&&St.prev()&&(St.getType()===Pr.types.NEXT||St.getType()===Pr.types.BLOCK);)St=St.prev();return St&&this.setCurNode(St),St}out(){var St=this.getCurNode();return St?((St=St.out())&&St.getType()===Pr.types.BLOCK&&(St=St.prev()||St),St&&this.setCurNode(St),St):null}};wo(Hr.CURSOR,Fp,o$);var m0=class extends o${constructor(){super()}next(){var St=this.getCurNode();return St?((St=this.getNextNode_(St,this.validNode_))&&this.setCurNode(St),St):null}in(){return this.next()}prev(){var St=this.getCurNode();return St?((St=this.getPreviousNode_(St,this.validNode_))&&this.setCurNode(St),St):null}out(){return this.prev()}getNextNode_(St,At){if(!St)return null;const Nt=St.in()||St.next();return At(Nt)?Nt:Nt?this.getNextNode_(Nt,At):(St=this.findSiblingOrParent_(St.out()),At(St)?St:St?this.getNextNode_(St,At):null)}getPreviousNode_(St,At){if(!St)return null;let Nt=St.prev();return Nt=Nt?this.getRightMostChild_(Nt):St.out(),At(Nt)?Nt:Nt?this.getPreviousNode_(Nt,At):null}validNode_(St){let At=!1;return St=St&&St.getType(),(St===Pr.types.OUTPUT||St===Pr.types.INPUT||St===Pr.types.FIELD||St===Pr.types.NEXT||St===Pr.types.PREVIOUS||St===Pr.types.WORKSPACE)&&(At=!0),At}findSiblingOrParent_(St){if(!St)return null;const At=St.next();return At||this.findSiblingOrParent_(St.out())}getRightMostChild_(St){if(!St.in())return St;for(St=St.in();St&&St.next();)St=St.next();return this.getRightMostChild_(St)}};m0.registrationName="basicCursor",wo(Hr.CURSOR,m0.registrationName,m0);var PT=class extends m0{validNode_(St){let At=!1;const Nt=St&&St.getType();return St&&(St=St.getLocation(),Nt===Pr.types.FIELD&&St&&St.isTabNavigable()&&St.isClickable()&&(At=!0)),At}},s$=10,Ql=class extends Ko{constructor(St,At){super(St,At),this.targetConnection=this.highlightPath=null,this.db_=St.workspace.connectionDBList[At],this.dbOpposite_=St.workspace.connectionDBList[g_[At]],this.offsetInBlock_=new qr(0,0),this.trackedState_=Ql.TrackedState.WILL_TRACK}dispose(){super.dispose(),this.trackedState_===Ql.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)}getSourceBlock(){return super.getSourceBlock()}targetBlock(){return super.targetBlock()}distanceFrom(St){const At=this.x-St.x;return St=this.y-St.y,Math.sqrt(At*At+St*St)}bumpAwayFrom(St){if(!this.sourceBlock_.workspace.isDragging()){var At=this.sourceBlock_.getRootBlock();if(!At.isInFlyout){var Nt=!1;if(!At.isMovable()){if(At=St.getSourceBlock().getRootBlock(),!At.isMovable())return;St=this,Nt=!0}var Wt=Dn()==At;Wt||At.addSelect();var cn=St.x+dt.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*s$)-this.x,vn=St.y+dt.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*s$)-this.y;Nt&&(vn=-vn),At.RTL&&(cn=St.x-dt.config$$module$build$src$core$config.snapRadius-Math.floor(Math.random()*s$)-this.x),At.moveBy(cn,vn),Wt||At.removeSelect()}}}moveTo(St,At){this.trackedState_===Ql.TrackedState.WILL_TRACK?(this.db_.addConnection(this,At),this.trackedState_=Ql.TrackedState.TRACKED):this.trackedState_===Ql.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,At)),this.x=St,this.y=At}moveBy(St,At){this.moveTo(this.x+St,this.y+At)}moveToOffset(St){this.moveTo(St.x+this.offsetInBlock_.x,St.y+this.offsetInBlock_.y)}setOffsetInBlock(St,At){this.offsetInBlock_.x=St,this.offsetInBlock_.y=At}getOffsetInBlock(){return this.offsetInBlock_}tighten(){const St=this.targetConnection.x-this.x,At=this.targetConnection.y-this.y;if(St!==0||At!==0){const Wt=this.targetBlock();var Nt=Wt.getSvgRoot();if(!Nt)throw Error("block is not rendered.");Nt=Ll(Nt),Wt.getSvgRoot().setAttribute("transform","translate("+(Nt.x-St)+","+(Nt.y-At)+")"),Wt.moveConnections(-St,-At)}}closest(St,At){return this.dbOpposite_.searchForClosest(this,St,At)}highlight(){if(!this.highlightPath){var St=this.sourceBlock_.workspace.getRenderer().getConstants(),At=St.shapeFor(this);this.type===ro.INPUT_VALUE||this.type===ro.OUTPUT_VALUE?(St=St.TAB_OFFSET_FROM_TOP,At=ls(0,-St)+eo("v",St)+At.pathDown+eo("v",St)):(St=St.NOTCH_OFFSET_LEFT-St.CORNER_RADIUS,At=ls(-St,0)+eo("h",St)+At.pathLeft+eo("h",St)),St=this.sourceBlock_.getRelativeToSurfaceXY(),this.highlightPath=Mn(ar.PATH,{class:"blocklyHighlightedConnectionPath",d:At,transform:"translate("+(this.x-St.x)+","+(this.y-St.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())}}unhighlight(){this.highlightPath&&(Sr(this.highlightPath),this.highlightPath=null)}setTracking(St){St&&this.trackedState_===Ql.TrackedState.TRACKED||!St&&this.trackedState_===Ql.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(St?(this.db_.addConnection(this,this.y),this.trackedState_=Ql.TrackedState.TRACKED):(this.trackedState_===Ql.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=Ql.TrackedState.UNTRACKED))}stopTrackingAll(){if(this.setTracking(!1),this.targetConnection){const Nt=this.targetBlock().getDescendants(!1);for(let Wt=0;Wt<Nt.length;Wt++){var St=Nt[Wt],At=St.getConnections_(!0);for(let cn=0;cn<At.length;cn++)At[cn].setTracking(!1);for(St=St.getIcons(),At=0;At<St.length;At++)St[At].setVisible(!1)}}}startTrackingAll(){this.setTracking(!0);let St=[];if(this.type!==ro.INPUT_VALUE&&this.type!==ro.NEXT_STATEMENT)return St;const At=this.targetBlock();if(At){let Nt;At.isCollapsed()?(Nt=[],At.outputConnection&&Nt.push(At.outputConnection),At.nextConnection&&Nt.push(At.nextConnection),At.previousConnection&&Nt.push(At.previousConnection)):Nt=At.getConnections_(!0);for(let Wt=0;Wt<Nt.length;Wt++)St.push(...Nt[Wt].startTrackingAll());St.length||(St=[At])}return St}onFailedConnect(St){const At=this.getSourceBlock();if(Co()){const Nt=Ro();setTimeout(function(){At.isDisposed()||At.getParent()||(oo(Nt),this.bumpAwayFrom(St),oo(!1))}.bind(this),dt.config$$module$build$src$core$config.bumpDelay)}}disconnectInternal_(St,At){super.disconnectInternal_(St,At),St.rendered&&St.render(),At.rendered&&(At.updateDisabled(),At.render(),At.getSvgRoot().style.display="block")}respawnShadow_(){super.respawnShadow_();var St=this.targetBlock();St&&(St.initSvg(),St.render(!1),St=this.getSourceBlock(),St.rendered&&St.render())}neighbours(St){return this.dbOpposite_.getNeighbours(this,St)}connect_(St){super.connect_(St);var At=this.getSourceBlock();St=St.getSourceBlock();const Nt=At.rendered,Wt=St.rendered;Nt&&At.updateDisabled(),Wt&&St.updateDisabled(),Nt&&Wt&&(this.type===ro.NEXT_STATEMENT||this.type===ro.PREVIOUS_STATEMENT?St.render():At.render()),(At=At.getInputWithBlock(St))&&(At=At.isVisible(),St.getSvgRoot().style.display=At?"block":"none")}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())}};(function(St){St=St.TrackedState||(St.TrackedState={}),St[St.WILL_TRACK=-1]="WILL_TRACK",St[St.UNTRACKED=0]="UNTRACKED",St[St.TRACKED=1]="TRACKED"})(Ql||(Ql={})),Ql.TrackedState;var LT=class extends Wv{constructor(St){super(St),this.paragraphElement=null,this.collapseHidden=!1,this.createIcon(),this.text=Object.create(null)}drawIcon_(St){Mn(ar.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},St),Mn(ar.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},St),Mn(ar.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},St)}setVisible(St){St!==this.isVisible()&&(Gr(new(Wr(Gp))(this.getBlock(),St,"warning")),St?this.createBubble():this.disposeBubble())}createBubble(){this.paragraphElement=Mo.textToDom(this.getText()),this.bubble_=Mo.createNonEditableBubble(this.paragraphElement,this.getBlock(),this.iconXY_),this.applyColour()}disposeBubble(){this.bubble_&&(this.bubble_.dispose(),this.bubble_=null),this.paragraphElement=null}setText(St,At){this.text[At]!==St&&(St?this.text[At]=St:delete this.text[At],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))}getText(){const St=[];for(const At in this.text)St.push(this.text[At]);return St.join(`
`)}dispose(){this.getBlock().warning=null,super.dispose()}},Du=class extends EO{constructor(St,At,Nt){super(St,At,Nt),this.renderingDebugger=null,this.width=this.height=0,this.warningTextDb=new Map,this.warning=this.commentIcon_=this.mutator=null,this.eventsInit_=this.renderIsInProgress_=this.rendered=!1,this.workspace=St,this.decompose=this.decompose,this.compose=this.compose,this.saveConnections=this.saveConnections,this.customContextMenu=this.customContextMenu,this.svgGroup_=Mn(ar.G,{}),this.svgGroup_.translate_="",this.style=St.getRenderer().getConstants().getBlockStyle(null),this.pathObject=St.getRenderer().makePathObject(this.svgGroup_,this.style),this.useDragSurface_=!!St.getBlockDragSurface(),St=this.pathObject.svgPath,St.tooltip=this,Ep(St),this.svgGroup_.setAttribute("data-id",this.id),this.doInit_()}initSvg(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(let At=0,Nt;Nt=this.inputList[At];At++)Nt.init();var St=this.getIcons();for(let At=0;At<St.length;At++)St[At].createIcon();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),St=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!St||Kt(St,"pointerdown",this,this.onMouseDown_),this.eventsInit_=!0,St.parentNode||this.workspace.getCanvas().appendChild(St)}getColourSecondary(){return this.style.colourSecondary}getColourTertiary(){return this.style.colourTertiary}select(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(Dn()!==this){var St=null;if(Dn()){St=Dn().id,Fo();try{Dn().unselect()}finally{vo()}}St=new(Wr(vm))(St,this.id,this.workspace.id),Gr(St),Bn(this),this.addSelect()}}unselect(){if(Dn()===this){var St=new(Wr(vm))(this.id,null,this.workspace.id);St.workspaceId=this.workspace.id,Gr(St),Bn(null),this.removeSelect()}}getIcons(){const St=[];return this.mutator&&St.push(this.mutator),this.commentIcon_&&St.push(this.commentIcon_),this.warning&&St.push(this.warning),St}setParent(St){const At=this.parentBlock_;if(St!==At){_i(),super.setParent(St),Er();var Nt=this.getSvgRoot();if(!this.workspace.isClearing&&Nt){var Wt=this.getRelativeToSurfaceXY();St?(St.getSvgRoot().appendChild(Nt),St=this.getRelativeToSurfaceXY(),this.moveConnections(St.x-Wt.x,St.y-Wt.y)):At&&(this.workspace.getCanvas().appendChild(Nt),this.translate(Wt.x,Wt.y)),this.applyColour()}}}getRelativeToSurfaceXY(){let St=0,At=0;const Nt=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null;let Wt=this.getSvgRoot();if(Wt)do{var cn=Ll(Wt);St+=cn.x,At+=cn.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()===Wt&&(cn=this.workspace.getBlockDragSurface().getSurfaceTranslation(),St+=cn.x,At+=cn.y),Wt=Wt.parentNode}while(Wt&&Wt!==this.workspace.getCanvas()&&Wt!==Nt);return new qr(St,At)}moveBy(St,At){if(this.parentBlock_)throw Error("Block has parent.");const Nt=ss();let Wt=null;Nt&&(Wt=new(Wr(Hl))(this));const cn=this.getRelativeToSurfaceXY();this.translate(cn.x+St,cn.y+At),this.moveConnections(St,At),Nt&&Wt&&(Wt.recordNew(),Gr(Wt)),this.workspace.resizeContents()}translate(St,At){this.getSvgRoot().setAttribute("transform","translate("+St+","+At+")")}moveToDragSurface(){if(this.useDragSurface_){var St=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(St.x,St.y),(St=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow(St)}}moveTo(St){const At=this.getRelativeToSurfaceXY();this.moveBy(St.x-At.x,St.y-At.y)}moveOffDragSurface(St){this.useDragSurface_&&(this.translate(St.x,St.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))}moveDuringDrag(St){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface(St.x,St.y):(this.svgGroup_.translate_="translate("+St.x+","+St.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))}clearTransformAttributes_(){this.getSvgRoot().removeAttribute("transform")}snapToGrid(){if(!(this.isDeadOrDying()||this.workspace.isDragging()||this.getParent()||this.isInFlyout)){var St=this.workspace.getGrid();if(St&&St.shouldSnap()){var At=St.getSpacing(),Nt=At/2,Wt=this.getRelativeToSurfaceXY();St=Math.round(Math.round((Wt.x-Nt)/At)*At+Nt-Wt.x),At=Math.round(Math.round((Wt.y-Nt)/At)*At+Nt-Wt.y),(St||At)&&this.moveBy(St,At)}}}getBoundingRectangle(){const St=this.getRelativeToSurfaceXY(),At=this.getHeightWidth();let Nt,Wt;return this.RTL?(Nt=St.x-At.width,Wt=St.x):(Nt=St.x,Wt=St.x+At.width),new ws(St.y,St.y+At.height,Nt,Wt)}markDirty(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(let St=0,At;At=this.inputList[St];St++)At.markDirty()}setCollapsed(St){this.collapsed_!==St&&(super.setCollapsed(St),St?this.rendered&&this.render():this.updateCollapsed_())}updateCollapsed_(){var St=this.isCollapsed();const At=l0,Nt=c0;for(let cn=0,vn;vn=this.inputList[cn];cn++)vn.name!==At&&vn.setVisible(!St);if(St){St=this.getIcons();for(let cn=0,vn;vn=St[cn];cn++)vn.setVisible(!1);St=this.toString(RT);var Wt=this.getField(Nt);Wt?Wt.setValue(St):(this.getInput(At)||this.appendDummyInput(At)).appendField(new dt.FieldLabel$$module$build$src$core$field_label(St),Nt)}else this.updateDisabled(),this.removeInput(At)}tab(St,At){const Nt=new PT;Nt.setCurNode(Pr.createFieldNode(St)),St=Nt.getCurNode(),At?Nt.next():Nt.prev(),(At=Nt.getCurNode())&&At!==St&&(At.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(At))}onMouseDown_(St){const At=this.workspace.getGesture(St);At&&At.handleBlockStart(St,this)}showHelp(){const St=typeof this.helpUrl=="function"?this.helpUrl():this.helpUrl;St&&window.open(St)}generateContextMenu(){if(this.workspace.options.readOnly||!this.contextMenu)return null;const St=Jo.registry.getContextMenuOptions(Jo.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(St),St}showContextMenu(St){const At=this.generateContextMenu();At&&At.length&&(op(St,At,this.RTL),ip(this))}moveConnections(St,At){if(this.rendered){for(var Nt=this.getConnections_(!1),Wt=0;Wt<Nt.length;Wt++)Nt[Wt].moveBy(St,At);for(Nt=this.getIcons(),Wt=0;Wt<Nt.length;Wt++)Nt[Wt].computeIconLocation();for(Nt=0;Nt<this.childBlocks_.length;Nt++)this.childBlocks_[Nt].moveConnections(St,At)}}setDragging(St){if(St){var At=this.getSvgRoot();At.translate_="",At.skew_="",ps.push(...this.getConnections_(!0)),ir(this.svgGroup_,"blocklyDragging")}else ps.length=0,tr(this.svgGroup_,"blocklyDragging");for(At=0;At<this.childBlocks_.length;At++)this.childBlocks_[At].setDragging(St)}setMovable(St){super.setMovable(St),this.pathObject.updateMovable(St)}setEditable(St){super.setEditable(St),St=this.getIcons();for(let At=0;At<St.length;At++)St[At].updateEditable()}setShadow(St){super.setShadow(St),this.applyColour()}setInsertionMarker(St){this.isInsertionMarker_!==St&&(this.isInsertionMarker_=St)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))}getSvgRoot(){return this.svgGroup_}dispose(St,At){if(!this.isDeadOrDying()){Au(),ba(this.pathObject.svgPath),_i();var Nt=this.workspace;Dn()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),av()===this&&qm(),At&&this.rendered&&(this.unplug(St),X_(this)),this.rendered=!1;for(var Wt of this.warningTextDb.values())clearTimeout(Wt);for(this.warningTextDb.clear(),At=this.getIcons(),Wt=0;Wt<At.length;Wt++)At[Wt].dispose();Dn()===this&&Bn(null),super.dispose(!!St),Sr(this.svgGroup_),Nt.resizeContents(),this.svgGroup_=null,Er()}}checkAndDelete(){this.workspace.isFlyout||(oo(!0),this.workspace.hideChaff(),this.outputConnection?this.dispose(!1,!0):this.dispose(!0,!0),oo(!1))}toCopyData(){return this.isInsertionMarker_?null:{saveInfo:tu(this,{addCoordinates:!0,addNextBlocks:!1}),source:this.workspace,typeCounts:zn(this,!0)}}applyColour(){this.pathObject.applyColour(this);const St=this.getIcons();for(let At=0;At<St.length;At++)St[At].applyColour();for(let At=0,Nt;Nt=this.inputList[At];At++)for(let Wt=0,cn;cn=Nt.fieldRow[Wt];Wt++)cn.applyColour()}updateDisabled(){const St=this.getChildren(!1);if(this.applyColour(),!this.isCollapsed())for(let At=0,Nt;Nt=St[At];At++)Nt.rendered&&Nt.updateDisabled()}getCommentIcon(){return this.commentIcon_}setCommentText(St){this.commentModel.text!==St&&(super.setCommentText(St),St=St!==null,!!this.commentIcon_===St?this.commentIcon_.updateText():(St?this.comment=this.commentIcon_=new IT(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))}setWarningText(St,At){const Nt=At||"";if(Nt)this.warningTextDb.has(Nt)&&(clearTimeout(this.warningTextDb.get(Nt)),this.warningTextDb.delete(Nt));else{for(var Wt of this.warningTextDb.values())clearTimeout(Wt);this.warningTextDb.clear()}if(this.workspace.isDragging())this.warningTextDb.set(Nt,setTimeout(()=>{this.isDeadOrDying()||(this.warningTextDb.delete(Nt),this.setWarningText(St,Nt))},100));else{if(this.isInFlyout&&(St=null),At=!1,typeof St=="string"){Wt=this.getSurroundParent();let cn=null;for(;Wt;)Wt.isCollapsed()&&(cn=Wt),Wt=Wt.getSurroundParent();cn&&cn.setWarningText(To.COLLAPSED_WARNINGS_WARNING,Du.COLLAPSED_WARNING_ID),this.warning||(this.warning=new LT(this),At=!0),this.warning.setText(St,Nt)}else this.warning&&!Nt?(this.warning.dispose(),At=!0):this.warning&&(At=this.warning.getText(),this.warning.setText("",Nt),(Wt=this.warning.getText())||this.warning.dispose(),At=At!==Wt);At&&this.rendered&&(this.render(),this.bumpNeighbours())}}setMutator(St){this.mutator&&this.mutator!==St&&this.mutator.dispose(),St&&(St.setBlock(this),this.mutator=St,St.createIcon()),this.rendered&&(this.render(),this.bumpNeighbours())}setEnabled(St){this.isEnabled()!==St&&(super.setEnabled(St),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())}setHighlighted(St){this.rendered&&this.pathObject.updateHighlighted(St)}addSelect(){this.pathObject.updateSelected(!0)}removeSelect(){this.pathObject.updateSelected(!1)}setDeleteStyle(St){this.pathObject.updateDraggingDelete(St)}getColour(){return this.style.colourPrimary}setColour(St){super.setColour(St),St=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(St.style),this.style=St.style,this.styleName_=St.name,this.applyColour()}setStyle(St){const At=this.workspace.getRenderer().getConstants().getBlockStyle(St);if(this.styleName_=St,At)this.hat=At.hat,this.pathObject.setStyle(At),this.colour_=At.colourPrimary,this.style=At,this.applyColour();else throw Error("Invalid style name: "+St)}bringToFront(){let St=this;do{const At=St.getSvgRoot(),Nt=At.parentNode,Wt=Nt.childNodes;Wt[Wt.length-1]!==At&&Nt.appendChild(At),St=St.getParent()}while(St)}setPreviousStatement(St,At){super.setPreviousStatement(St,At),this.rendered&&(this.render(),this.bumpNeighbours())}setNextStatement(St,At){super.setNextStatement(St,At),this.rendered&&(this.render(),this.bumpNeighbours())}setOutput(St,At){super.setOutput(St,At),this.rendered&&(this.render(),this.bumpNeighbours())}setInputsInline(St){super.setInputsInline(St),this.rendered&&(this.render(),this.bumpNeighbours())}removeInput(St,At){return St=super.removeInput(St,At),this.rendered&&(this.render(),this.bumpNeighbours()),St}moveNumberedInputBefore(St,At){super.moveNumberedInputBefore(St,At),this.rendered&&(this.render(),this.bumpNeighbours())}appendInput_(St,At){return St=super.appendInput_(St,At),this.rendered&&(this.render(),this.bumpNeighbours()),St}setConnectionTracking(St){if(this.previousConnection&&this.previousConnection.setTracking(St),this.outputConnection&&this.outputConnection.setTracking(St),this.nextConnection){this.nextConnection.setTracking(St);var At=this.nextConnection.targetBlock();At&&At.setConnectionTracking(St)}if(!this.collapsed_)for(At=0;At<this.inputList.length;At++){var Nt=this.inputList[At].connection;Nt&&(Nt.setTracking(St),(Nt=Nt.targetBlock())&&Nt.setConnectionTracking(St))}}getConnections_(St){const At=[];if((St||this.rendered)&&(this.outputConnection&&At.push(this.outputConnection),this.previousConnection&&At.push(this.previousConnection),this.nextConnection&&At.push(this.nextConnection),St||!this.collapsed_))for(let Nt=0,Wt;Wt=this.inputList[Nt];Nt++)Wt.connection&&At.push(Wt.connection);return At}lastConnectionInStack(St){return super.lastConnectionInStack(St)}getMatchingConnection(St,At){return super.getMatchingConnection(St,At)}makeConnection_(St){return new Ql(this,St)}getNextBlock(){return super.getNextBlock()}getPreviousBlock(){return super.getPreviousBlock()}bumpNeighbours(){this.getRootBlock().bumpNeighboursInternal()}bumpNeighboursInternal(){const St=this.getRootBlock();if(!(this.isDeadOrDying()||this.workspace.isDragging()||St.isInFlyout))for(const At of this.getConnections_(!1)){if(At.isSuperior()){let Nt;(Nt=At.targetBlock())==null||Nt.bumpNeighboursInternal()}for(const Nt of At.neighbours(dt.config$$module$build$src$core$config.snapRadius))Nt.getSourceBlock().getRootBlock()!==St&&(At.isConnected()&&Nt.isConnected()||(At.isSuperior()?Nt.bumpAwayFrom(At):At.bumpAwayFrom(Nt)))}}scheduleSnapAndBump(){const St=Ro();setTimeout(()=>{oo(St),this.snapToGrid(),oo(!1)},dt.config$$module$build$src$core$config.bumpDelay/2),setTimeout(()=>{oo(St),this.bumpNeighbours(),oo(!1)},dt.config$$module$build$src$core$config.bumpDelay)}positionNearConnection(St,At){St.type!==ro.NEXT_STATEMENT&&St.type!==ro.INPUT_VALUE||this.moveBy(At.x-St.x,At.y-St.y)}getFirstStatementConnection(){return super.getFirstStatementConnection()}getChildren(St){return super.getChildren(St)}render(St){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{if(this.rendered=!0,_i(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),St!==!1){const At=this.getParent();At?At.render(!0):this.workspace.resizeContents()}Er(),this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}}updateMarkers_(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(qy.LOCAL_MARKER).draw()}updateConnectionLocations_(){const St=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(St),this.outputConnection&&this.outputConnection.moveToOffset(St);for(let At=0;At<this.inputList.length;At++){const Nt=this.inputList[At].connection;Nt&&(Nt.moveToOffset(St),Nt.isConnected()&&Nt.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset(St),this.nextConnection.isConnected()&&this.nextConnection.tighten())}setCursorSvg(St){this.pathObject.setCursorSvg(St)}setMarkerSvg(St){this.pathObject.setMarkerSvg(St)}getHeightWidth(){let St=this.height,At=this.width;var Nt=this.getNextBlock();if(Nt){Nt=Nt.getHeightWidth();const Wt=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;St+=Nt.height-Wt,At=Math.max(At,Nt.width)}return{height:St,width:At}}fadeForReplacement(St){this.pathObject.updateReplacementFade(St)}highlightShapeForInput(St,At){this.pathObject.updateShapeForInputHighlight(St,At)}};Du.INLINE=-1,Du.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_";var DT=class{constructor(){}onDragEnter(St){}onDragOver(St){}onDragExit(St){}onDrop(St){}getClientRect(){return null}shouldPreventMove(St){return!1}},jv=class extends DT{constructor(){super(),this.wouldDelete_=!1}wouldDelete(St,At){return St instanceof Du?(St=!St.getParent()&&St.isDeletable(),this.updateWouldDelete_(St&&!At)):this.updateWouldDelete_(St.isDeletable()),this.wouldDelete_}updateWouldDelete_(St){this.wouldDelete_=St}},Qp;(function(St){St[St.TOP=0]="TOP",St[St.BOTTOM=1]="BOTTOM"})(Qp||(Qp={}));var xO;(function(St){St[St.LEFT=0]="LEFT",St[St.RIGHT=1]="RIGHT"})(xO||(xO={}));var Tm;(function(St){St[St.UP=0]="UP",St[St.DOWN=1]="DOWN"})(Tm||(Tm={}));var __={};__.bumpDirection=Tm,__.bumpPositionRect=vy,__.getCornerOppositeToolbox=hm,__.getStartPositionRect=Km,__.horizontalPosition=xO,__.verticalPosition=Qp;var zl={width:96,height:124,url:"sprites.png"},NT=class extends jv{constructor(St){super(),this.workspace=St,this.id="trashcan",this.contents_=[],this.flyout=null,this.isLidOpen=!1,this.minOpenness_=0,this.lidTask_=this.svgLid_=this.svgGroup_=null,this.top_=this.left_=this.lidOpen_=0,this.initialized_=!1,0>=this.workspace.options.maxTrashcanContents||(St=new _h({scrollbars:!0,parentWorkspace:this.workspace,rtl:this.workspace.RTL,oneBasedIndex:this.workspace.options.oneBasedIndex,renderer:this.workspace.options.renderer,rendererOverrides:this.workspace.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace.horizontalLayout?(St.toolboxPosition=this.workspace.toolboxPosition===Ao.TOP?Ao.BOTTOM:Ao.TOP,this.flyout=new(So(Hr.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace.options,!0))(St)):(St.toolboxPosition=this.workspace.toolboxPosition===Ao.RIGHT?Ao.LEFT:Ao.RIGHT,this.flyout=new(So(Hr.FLYOUTS_VERTICAL_TOOLBOX,this.workspace.options,!0))(St)),this.workspace.addChangeListener(this.onDelete_.bind(this)))}createDom(){this.svgGroup_=Mn(ar.G,{class:"blocklyTrash"});let St;const At=String(Math.random()).substring(2);St=Mn(ar.CLIPPATH,{id:"blocklyTrashBodyClipPath"+At},this.svgGroup_),Mn(ar.RECT,{width:wO,height:Xv,y:CO},St);const Nt=Mn(ar.IMAGE,{width:zl.width,x:-a$,height:zl.height,y:-l$,"clip-path":"url(#blocklyTrashBodyClipPath"+At+")"},this.svgGroup_);return Nt.setAttributeNS(ou,"xlink:href",this.workspace.options.pathToMedia+zl.url),St=Mn(ar.CLIPPATH,{id:"blocklyTrashLidClipPath"+At},this.svgGroup_),Mn(ar.RECT,{width:wO,height:CO},St),this.svgLid_=Mn(ar.IMAGE,{width:zl.width,x:-a$,height:zl.height,y:-l$,"clip-path":"url(#blocklyTrashLidClipPath"+At+")"},this.svgGroup_),this.svgLid_.setAttributeNS(ou,"xlink:href",this.workspace.options.pathToMedia+zl.url),ln(this.svgGroup_,"pointerdown",this,this.blockMouseDownWhenOpenable_),ln(this.svgGroup_,"pointerup",this,this.click),ln(Nt,"pointerover",this,this.mouseOver_),ln(Nt,"pointerout",this,this.mouseOut_),this.animateLid_(),this.svgGroup_}init(){0<this.workspace.options.maxTrashcanContents&&(Vr(this.flyout.createDom(ar.SVG),this.workspace.getParentSvg()),this.flyout.init(this.workspace)),this.workspace.getComponentManager().addComponent({component:this,weight:1,capabilities:[Js.Capability.AUTOHIDEABLE,Js.Capability.DELETE_AREA,Js.Capability.DRAG_TARGET,Js.Capability.POSITIONABLE]}),this.initialized_=!0,this.setLidOpen(!1)}dispose(){this.workspace.getComponentManager().removeComponent("trashcan"),this.svgGroup_&&(Sr(this.svgGroup_),this.svgGroup_=null),this.svgLid_=null,this.lidTask_&&clearTimeout(this.lidTask_)}hasContents_(){return!!this.contents_.length}contentsIsOpen(){return!!this.flyout&&this.flyout.isVisible()}openFlyout(){if(!this.contentsIsOpen()){var St=this.contents_.map(function(Nt){return JSON.parse(Nt)}),At=this.workspace.getParentSvg().style;At.cursor="wait",setTimeout(()=>{let Nt;(Nt=this.flyout)==null||Nt.show(St),At.cursor=""},10),this.fireUiEvent_(!0)}}closeFlyout(){if(this.contentsIsOpen()){var St;(St=this.flyout)==null||St.hide(),this.fireUiEvent_(!1),this.workspace.recordDragTargets()}}autoHide(St){!St&&this.flyout&&this.closeFlyout()}emptyContents(){this.hasContents_()&&(this.contents_.length=0,this.setMinOpenness_(0),this.closeFlyout())}position(St,At){if(this.initialized_){var Nt=hm(this.workspace,St);St=Km(Nt,new Ks(wO,Xv+CO),rx,BT,St,this.workspace),At=vy(St,BT,Nt.vertical===Qp.TOP?Tm.DOWN:Tm.UP,At),this.top_=At.top,this.left_=At.left;var Wt;(Wt=this.svgGroup_)==null||Wt.setAttribute("transform","translate("+this.left_+","+this.top_+")")}}getBoundingRectangle(){return new ws(this.top_,this.top_+Xv+CO,this.left_,this.left_+wO)}getClientRect(){if(!this.svgGroup_)return null;var St=this.svgGroup_.getBoundingClientRect();const At=St.top+l$-Yv;return St=St.left+a$-Yv,new ws(At,At+CO+Xv+2*Yv,St,St+wO+2*Yv)}onDragOver(St){this.setLidOpen(this.wouldDelete_)}onDragExit(St){this.setLidOpen(!1)}onDrop(St){setTimeout(this.setLidOpen.bind(this,!1),100)}setLidOpen(St){this.isLidOpen!==St&&(this.lidTask_&&clearTimeout(this.lidTask_),this.isLidOpen=St,this.animateLid_())}animateLid_(){const St=sx;var At=1/(St+1);this.lidOpen_+=this.isLidOpen?At:-At,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(this.lidOpen_*GT),At=FT+this.lidOpen_*(ax-FT),this.svgGroup_&&(this.svgGroup_.style.opacity=At.toString()),this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),ox/St))}setLidAngle_(St){const At=this.workspace.toolboxPosition===Ao.RIGHT||this.workspace.horizontalLayout&&this.workspace.RTL;let Nt;(Nt=this.svgLid_)==null||Nt.setAttribute("transform","rotate("+(At?-St:St)+","+(At?4:wO-4)+","+(CO-2)+")")}setMinOpenness_(St){this.minOpenness_=St,this.isLidOpen||this.setLidAngle_(St*GT)}closeLid(){this.setLidOpen(!1)}click(){this.hasContents_()&&this.openFlyout()}fireUiEvent_(St){St=new(Wr(Hy))(St,this.workspace.id),Gr(St)}blockMouseDownWhenOpenable_(St){!this.contentsIsOpen()&&this.hasContents_()&&St.stopPropagation()}mouseOver_(){this.hasContents_()&&this.setLidOpen(!0)}mouseOut_(){this.setLidOpen(!1)}onDelete_(St){if(!(0>=this.workspace.options.maxTrashcanContents||St.type!==mp||St.type!==mp||St.wasShadow)){if(!St.oldJson)throw Error("Encountered a delete event without proper oldJson");if(St=JSON.stringify(this.cleanBlockJson_(St.oldJson)),this.contents_.indexOf(St)===-1){for(this.contents_.unshift(St);this.contents_.length>this.workspace.options.maxTrashcanContents;)this.contents_.pop();this.setMinOpenness_(ix)}}}cleanBlockJson_(St){function At(Nt){if(Nt){if(delete Nt.id,delete Nt.x,delete Nt.y,delete Nt.enabled,Nt.icons&&Nt.icons.comment){var Wt=Nt.icons.comment;delete Wt.height,delete Wt.width,delete Wt.pinned}Wt=Nt.inputs;for(var cn in Wt){var vn=Wt[cn];const Pn=vn.block;vn=vn.shadow,Pn&&At(Pn),vn&&At(vn)}Nt.next&&(cn=Nt.next,Nt=cn.block,cn=cn.shadow,Nt&&At(Nt),cn&&At(cn))}}return St=JSON.parse(JSON.stringify(St)),At(St),Object.assign({},{kind:"BLOCK"},St)}},wO=47,Xv=44,CO=16,BT=20,rx=20,Yv=10,a$=0,l$=32,ix=.1,ox=80,sx=4,FT=.4,ax=.8,GT=45,c$=class extends Zu{constructor(St,At,Nt){super(Nt),this.type=Qy,this.oldItem=St??void 0,this.newItem=At??void 0}toJson(){const St=super.toJson();return St.oldItem=this.oldItem,St.newItem=this.newItem,St}fromJson(St){vt("Blockly.Events.ToolboxItemSelect.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(St),this.oldItem=St.oldItem,this.newItem=St.newItem}static fromJson(St,At,Nt){return At=super.fromJson(St,At,Nt??new c$),At.oldItem=St.oldItem,At.newItem=St.newItem,At}};wo(Hr.EVENT,Qy,c$);var u$=class{constructor(St,At,Nt){this.id_=St.toolboxitemid||Do(),this.level_=(this.parent_=Nt||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=St,this.parentToolbox_=At,this.workspace_=this.parentToolbox_.getWorkspace()}init(){}getDiv(){return null}getClickTarget(){return null}getId(){return this.id_}getParent(){return null}getLevel(){return this.level_}isSelectable(){return!1}isCollapsible(){return!1}dispose(){}setVisible_(St){}},_d=class extends u${constructor(St,At,Nt){super(St,At,Nt),this.colour_=this.name_="",this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.cssConfig_=this.makeDefaultCssConfig_()}init(){this.parseCategoryDef_(this.toolboxItemDef_),this.parseContents_(this.toolboxItemDef_),this.createDom_(),this.toolboxItemDef_.hidden==="true"&&this.hide()}makeDefaultCssConfig_(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}}parseContents_(St){if("custom"in St)this.flyoutItems_=St.custom;else if(St=St.contents)for(let At=0;At<St.length;At++){const Nt=St[At];Array.isArray(this.flyoutItems_)&&this.flyoutItems_.push(Nt)}}parseCategoryDef_(St){this.name_="name"in St?fs(St.name):"",this.colour_=this.getColour_(St),Object.assign(this.cssConfig_,St.cssconfig||St.cssConfig)}createDom_(){this.htmlDiv_=this.createContainer_(),$s(this.htmlDiv_,au.TREEITEM),ns(this.htmlDiv_,ms.SELECTED,!1),ns(this.htmlDiv_,ms.LEVEL,this.level_),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),$s(this.iconDom_,au.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_);const St=this.labelDom_.getAttribute("id");return St&&ns(this.htmlDiv_,ms.LABELLEDBY,St),this.addColourBorder_(this.colour_),this.htmlDiv_}createContainer_(){const St=document.createElement("div"),At=this.cssConfig_.container;return At&&ir(St,At),St}createRowContainer_(){const St=document.createElement("div");var At=this.cssConfig_.row;return At&&ir(St,At),At=`${_d.nestedPadding*this.getLevel()}px`,this.workspace_.RTL?St.style.paddingRight=At:St.style.paddingLeft=At,St}createRowContentsContainer_(){const St=document.createElement("div"),At=this.cssConfig_.rowcontentcontainer;return At&&ir(St,At),St}createIconDom_(){const St=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const At=this.cssConfig_.icon;At&&ir(St,At)}return St.style.display="inline-block",St}createLabelDom_(St){const At=document.createElement("span");return At.setAttribute("id",this.getId()+".label"),At.textContent=St,(St=this.cssConfig_.label)&&ir(At,St),At}refreshTheme(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)}addColourBorder_(St){St&&(St=_d.borderWidth+"px solid "+(St||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=St:this.rowDiv_.style.borderLeft=St)}getColour_(St){const At=St.categorystyle||St.categoryStyle;if((St=St.colour)&&At)console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour');else{if(At)return this.getColourfromStyle_(At);if(St)return this.parseColour_(St)}return""}getColourfromStyle_(St){var At=this.workspace_.getTheme();if(St&&At){if((At=At.categoryStyles[St])&&At.colour)return this.parseColour_(At.colour);console.warn('Style "'+St+'" must exist and contain a colour value')}return""}getClickTarget(){return this.rowDiv_}parseColour_(St){if(St=fs(St),St==null||St==="")return"";var At=Number(St);return isNaN(At)?(At=Vu(St))?At:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+St),""):Dm(At)}openIcon_(St){if(St){var At=this.cssConfig_.closedicon;At&&mr(St,At),(At=this.cssConfig_.openicon)&&ir(St,At)}}closeIcon_(St){if(St){var At=this.cssConfig_.openicon;At&&mr(St,At),(At=this.cssConfig_.closedicon)&&ir(St,At)}}setVisible_(St){this.htmlDiv_.style.display=St?"block":"none",this.isHidden_=!St,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}hide(){this.setVisible_(!1)}show(){this.setVisible_(!0)}isVisible(){return!this.isHidden_&&this.allAncestorsExpanded_()}allAncestorsExpanded_(){let St=this;for(;St.getParent();)if(St=St.getParent(),!St.isExpanded())return!1;return!0}isSelectable(){return this.isVisible()&&!this.isDisabled_}onClick(St){}setSelected(St){if(this.rowDiv_){var At=this.cssConfig_.selected;if(St){const Nt=this.parseColour_(_d.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||Nt,At&&ir(this.rowDiv_,At)}else this.rowDiv_.style.backgroundColor="",At&&tr(this.rowDiv_,At);ns(this.htmlDiv_,ms.SELECTED,St)}}setDisabled(St){this.isDisabled_=St,this.getDiv().setAttribute("disabled",`${St}`),St?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")}getName(){return this.name_}getParent(){return this.parent_}getDiv(){return this.htmlDiv_}getContents(){return this.flyoutItems_}updateFlyoutContents(St){this.flyoutItems_=[],this.toolboxItemDef_=typeof St=="string"?{kind:this.toolboxItemDef_.kind,custom:St,id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden}:{kind:this.toolboxItemDef_.kind,name:"name"in this.toolboxItemDef_?this.toolboxItemDef_.name:"",contents:sm(St),id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden},this.parseContents_(this.toolboxItemDef_)}dispose(){Sr(this.htmlDiv_)}};_d.registrationName="category",_d.nestedPadding=19,_d.borderWidth=8,_d.defaultBackgroundColour="#57e",hu(`
.blocklyTreeRow:not(.blocklyTreeSelected):hover {
  background-color: rgba(255, 255, 255, .2);
}

.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {
  margin: 1px 5px 1px 0;
}

.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {
  margin: 1px 0 1px 5px;
}

.blocklyTreeRow {
  height: 22px;
  line-height: 22px;
  margin-bottom: 3px;
  padding-right: 8px;
  white-space: nowrap;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {
  margin-left: 8px;
  padding-right: 0;
}

.blocklyTreeIcon {
  background-image: url(<<<PATH>>>/sprites.png);
  height: 16px;
  vertical-align: middle;
  visibility: hidden;
  width: 16px;
}

.blocklyTreeIconClosed {
  background-position: -32px -1px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {
  background-position: 0 -1px;
}

.blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: -32px -17px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: 0 -17px;
}

.blocklyTreeIconOpen {
  background-position: -16px -1px;
}

.blocklyTreeSelected>.blocklyTreeIconOpen {
  background-position: -16px -17px;
}

.blocklyTreeLabel {
  cursor: default;
  font: 16px sans-serif;
  padding: 0 3px;
  vertical-align: middle;
}

.blocklyToolboxDelete .blocklyTreeLabel {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyTreeSelected .blocklyTreeLabel {
  color: #fff;
}
`),wo(Hr.TOOLBOX_ITEM,_d.registrationName,_d);var g0=class extends u${constructor(St,At){super(St,At),this.cssConfig_={container:"blocklyTreeSeparator"},this.htmlDiv_=null,Object.assign(this.cssConfig_,St.cssconfig||St.cssConfig)}init(){this.createDom_()}createDom_(){const St=document.createElement("div"),At=this.cssConfig_.container;return At&&ir(St,At),this.htmlDiv_=St}getDiv(){return this.htmlDiv_}dispose(){Sr(this.htmlDiv_)}};g0.registrationName="sep",hu(`
.blocklyTreeSeparator {
  border-bottom: solid #e5e5e5 1px;
  height: 0;
  margin: 5px 0;
}

.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {
  border-right: solid #e5e5e5 1px;
  border-bottom: none;
  height: auto;
  margin: 0 5px 0 5px;
  padding: 5px 0;
  width: 0;
}
`),wo(Hr.TOOLBOX_ITEM,g0.registrationName,g0);var AO=class extends _d{constructor(St,At,Nt){super(St,At,Nt),this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[]}makeDefaultCssConfig_(){const St=super.makeDefaultCssConfig_();return St.contents="blocklyToolboxContents",St}parseContents_(St){const At=St.contents;let Nt=!0;if(St.custom)this.flyoutItems_=St.custom;else if(At)for(St=0;St<At.length;St++){const Wt=At[St];!wr(Hr.TOOLBOX_ITEM,Wt.kind)||Wt.kind.toLowerCase()===g0.registrationName&&Nt?(this.flyoutItems_.push(Wt),Nt=!0):(this.createToolboxItem_(Wt),Nt=!1)}}createToolboxItem_(St){let At=St.kind;At.toUpperCase()==="CATEGORY"&&Wu(St)&&(At=AO.registrationName),St=new(fr(Hr.TOOLBOX_ITEM,At))(St,this.parentToolbox_,this),this.toolboxItems_.push(St)}init(){super.init(),this.setExpanded(this.toolboxItemDef_.expanded==="true"||this.toolboxItemDef_.expanded)}createDom_(){super.createDom_();const St=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(St),$s(this.subcategoriesDiv_,au.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.htmlDiv_}createIconDom_(){const St=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const At=this.cssConfig_.icon;At&&ir(St,At),St.style.visibility="visible"}return St.style.display="inline-block",St}createSubCategoriesDom_(St){const At=document.createElement("div");var Nt=this.cssConfig_.contents;for(Nt&&ir(At,Nt),Nt=0;Nt<St.length;Nt++){const Wt=St[Nt];Wt.init();const cn=Wt.getDiv();if(At.appendChild(cn),Wt.getClickTarget){let vn;(vn=Wt.getClickTarget())==null||vn.setAttribute("id",Wt.getId())}}return At}setExpanded(St){this.expanded_!==St&&((this.expanded_=St)?(this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)),ns(this.htmlDiv_,ms.EXPANDED,St),this.parentToolbox_.handleToolboxItemResize())}setVisible_(St){this.htmlDiv_.style.display=St?"block":"none";const At=this.getChildToolboxItems();for(let Nt=0;Nt<At.length;Nt++)At[Nt].setVisible_(St);this.isHidden_=!St,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}isExpanded(){return this.expanded_}isCollapsible(){return!0}onClick(St){this.toggleExpanded()}toggleExpanded(){this.setExpanded(!this.expanded_)}getDiv(){return this.htmlDiv_}getChildToolboxItems(){return this.toolboxItems_}};AO.registrationName="collapsibleCategory",wo(Hr.TOOLBOX_ITEM,AO.registrationName,AO);var UT=class extends jv{constructor(St){super(),this.id="toolbox",this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.previouslySelectedItem_=this.selectedItem_=this.flyout_=null,this.boundEvents_=[],this.workspace_=St,this.toolboxDef_=St.options.languageTree||{contents:[]},this.horizontalLayout_=St.options.horizontalLayout,this.RTL=St.options.RTL,this.contentMap_=Object.create(null),this.toolboxPosition=St.options.toolboxPosition}onShortcut(St){return!1}init(){var St=this.workspace_;const At=St.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),Vr(this.flyout_.createDom("svg"),At),this.setVisible(!0),this.flyout_.init(St),this.render(this.toolboxDef_),St=St.getThemeManager(),St.subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),St.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[Js.Capability.AUTOHIDEABLE,Js.Capability.DELETE_AREA,Js.Capability.DRAG_TARGET]})}createDom_(St){St=St.getParentSvg();const At=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,$s(this.contentsDiv_,au.TREE),At.appendChild(this.contentsDiv_),St.parentNode.insertBefore(At,St),this.attachEvents_(At,this.contentsDiv_),At}createContainer_(){const St=document.createElement("div");return St.setAttribute("layout",this.isHorizontal()?"h":"v"),ir(St,"blocklyToolboxDiv"),ir(St,"blocklyNonSelectable"),St.setAttribute("dir",this.RTL?"RTL":"LTR"),St}createContentsContainer_(){const St=document.createElement("div");return ir(St,"blocklyToolboxContents"),this.isHorizontal()&&(St.style.flexDirection="row"),St}attachEvents_(St,At){St=Kt(St,"pointerdown",this,this.onClick_,!1),this.boundEvents_.push(St),At=Kt(At,"keydown",this,this.onKeyDown_,!1),this.boundEvents_.push(At)}onClick_(St){if(pn(St)||St.target===this.HtmlDiv)In().hideChaff(!1);else{var At=St.target.getAttribute("id");At&&(At=this.getToolboxItemById(At),At.isSelectable()&&(this.setSelectedItem(At),At.onClick(St))),In().hideChaff(!0)}Ct()}onKeyDown_(St){let At=!1;switch(St.keyCode){case co.DOWN:At=this.selectNext_();break;case co.UP:At=this.selectPrevious_();break;case co.LEFT:At=this.selectParent_();break;case co.RIGHT:At=this.selectChild_();break;case co.ENTER:case co.SPACE:this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),At=!0);break;default:At=!1}if(!At&&this.selectedItem_){const Nt=this.selectedItem_;Nt.onKeyDown&&(At=Nt.onKeyDown(St))}At&&St.preventDefault()}createFlyout_(){const St=this.workspace_,At=new _h({parentWorkspace:St,rtl:St.RTL,oneBasedIndex:St.options.oneBasedIndex,horizontalLayout:St.horizontalLayout,renderer:St.options.renderer,rendererOverrides:St.options.rendererOverrides,move:{scrollbars:!0}});return At.toolboxPosition=St.options.toolboxPosition,new(St.horizontalLayout?So(Hr.FLYOUTS_HORIZONTAL_TOOLBOX,St.options,!0):So(Hr.FLYOUTS_VERTICAL_TOOLBOX,St.options,!0))(At)}render(St){this.toolboxDef_=St;for(let At=0;At<this.contents_.length;At++){const Nt=this.contents_[At];Nt&&Nt.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(St.contents),this.position(),this.handleToolboxItemResize()}renderContents_(St){const At=document.createDocumentFragment();for(let Nt=0;Nt<St.length;Nt++)this.createToolboxItem_(St[Nt],At);this.contentsDiv_.appendChild(At)}createToolboxItem_(St,At){var Nt=St.kind;Nt.toUpperCase()==="CATEGORY"&&Wu(St)&&(Nt=AO.registrationName),(Nt=fr(Hr.TOOLBOX_ITEM,Nt.toLowerCase()))&&(St=new Nt(St,this),St.init(),this.addToolboxItem_(St),(Nt=St.getDiv())&&At.appendChild(Nt),St.getClickTarget()&&St.getClickTarget().setAttribute("id",St.getId()))}addToolboxItem_(St){if(this.contents_.push(St),this.contentMap_[St.getId()]=St,St.isCollapsible()){St=St.getChildToolboxItems();for(let At=0;At<St.length;At++)this.addToolboxItem_(St[At])}}getToolboxItems(){return this.contents_}addStyle(St){St&&this.HtmlDiv&&ir(this.HtmlDiv,St)}removeStyle(St){St&&this.HtmlDiv&&tr(this.HtmlDiv,St)}getClientRect(){if(!this.HtmlDiv||!this.isVisible_)return null;var St=this.HtmlDiv.getBoundingClientRect();const At=St.top,Nt=At+St.height,Wt=St.left;return St=Wt+St.width,this.toolboxPosition===Ao.TOP?new ws(-1e7,Nt,-1e7,1e7):this.toolboxPosition===Ao.BOTTOM?new ws(At,1e7,-1e7,1e7):this.toolboxPosition===Ao.LEFT?new ws(-1e7,1e7,-1e7,St):new ws(-1e7,1e7,Wt,1e7)}wouldDelete(St,At){return St instanceof Du?this.updateWouldDelete_(!St.getParent()&&St.isDeletable()):this.updateWouldDelete_(St.isDeletable()),this.wouldDelete_}onDragEnter(St){this.updateCursorDeleteStyle_(!0)}onDragExit(St){this.updateCursorDeleteStyle_(!1)}onDrop(St){this.updateCursorDeleteStyle_(!1)}updateWouldDelete_(St){St!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=St,this.updateCursorDeleteStyle_(!0))}updateCursorDeleteStyle_(St){const At=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";St?this.addStyle(At):this.removeStyle(At)}getToolboxItemById(St){return this.contentMap_[St]||null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyout(){return this.flyout_}getWorkspace(){return this.workspace_}getSelectedItem(){return this.selectedItem_}getPreviouslySelectedItem(){return this.previouslySelectedItem_}isHorizontal(){return this.horizontalLayout_}position(){const St=this.workspace_.getMetrics(),At=this.HtmlDiv;At&&(this.horizontalLayout_?(At.style.left="0",At.style.height="auto",At.style.width="100%",this.height_=At.offsetHeight,this.width_=St.viewWidth,this.toolboxPosition===Ao.TOP?At.style.top="0":At.style.bottom="0"):(this.toolboxPosition===Ao.RIGHT?At.style.right="0":At.style.left="0",At.style.height="100%",this.width_=At.offsetWidth,this.height_=St.viewHeight),this.flyout_.position())}handleToolboxItemResize(){const St=this.workspace_,At=this.HtmlDiv.getBoundingClientRect();St.translate(this.toolboxPosition===Ao.LEFT?St.scrollX+At.width:St.scrollX,this.toolboxPosition===Ao.TOP?St.scrollY+At.height:St.scrollY),Kn(St)}clearSelection(){this.setSelectedItem(null)}refreshTheme(){for(let St=0;St<this.contents_.length;St++){const At=this.contents_[St];At.refreshTheme&&At.refreshTheme()}}refreshSelection(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())}setVisible(St){this.isVisible_!==St&&(this.HtmlDiv.style.display=St?"block":"none",this.isVisible_=St,this.workspace_.recordDragTargets())}autoHide(St){!St&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()}setSelectedItem(St){const At=this.selectedItem_;!St&&!At||St&&!St.isSelectable()||(this.shouldDeselectItem_(At,St)&&At!==null&&this.deselectItem_(At),this.shouldSelectItem_(At,St)&&St!==null&&this.selectItem_(At,St),this.updateFlyout_(At,St),this.fireSelectEvent_(At,St))}shouldDeselectItem_(St,At){return St!==null&&(!St.isCollapsible()||St!==At)}shouldSelectItem_(St,At){return At!==null&&At!==St}deselectItem_(St){this.selectedItem_=null,this.previouslySelectedItem_=St,St.setSelected(!1),ns(this.contentsDiv_,ms.ACTIVEDESCENDANT,"")}selectItem_(St,At){this.selectedItem_=At,this.previouslySelectedItem_=St,At.setSelected(!0),ns(this.contentsDiv_,ms.ACTIVEDESCENDANT,At.getId())}selectItemByPosition(St){-1<St&&St<this.contents_.length&&(St=this.contents_[St],St.isSelectable()&&this.setSelectedItem(St))}updateFlyout_(St,At){At&&(St!==At||At.isCollapsible())&&At.getContents().length?(this.flyout_.show(At.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()}fireSelectEvent_(St,At){const Nt=St&&St.getName();let Wt=At&&At.getName();St===At&&(Wt=null),St=new(Wr(Qy))(Nt,Wt,this.workspace_.id),Gr(St)}selectParent_(){return this.selectedItem_?this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.toggleExpanded(),!0):this.selectedItem_.getParent()&&this.selectedItem_.getParent().isSelectable()?(this.setSelectedItem(this.selectedItem_.getParent()),!0):!1:!1}selectChild_(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;const St=this.selectedItem_;return St.isExpanded()?this.selectNext_():St.toggleExpanded(),!0}selectNext_(){if(!this.selectedItem_)return!1;let St=this.contents_.indexOf(this.selectedItem_)+1;if(-1<St&&St<this.contents_.length){let At=this.contents_[St];for(;At&&!At.isSelectable();)At=this.contents_[++St];if(At&&At.isSelectable())return this.setSelectedItem(At),!0}return!1}selectPrevious_(){if(!this.selectedItem_)return!1;let St=this.contents_.indexOf(this.selectedItem_)-1;if(-1<St&&St<this.contents_.length){let At=this.contents_[St];for(;At&&!At.isSelectable();)At=this.contents_[--St];if(At&&At.isSelectable())return this.setSelectedItem(At),!0}return!1}dispose(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var St=0;St<this.contents_.length;St++)this.contents_[St].dispose();for(St=0;St<this.boundEvents_.length;St++)hn(this.boundEvents_[St]);this.boundEvents_=[],this.contents_=[],this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),Sr(this.HtmlDiv)}};hu(`
.blocklyToolboxDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyToolboxGrab {
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

/* Category tree in Toolbox. */
.blocklyToolboxDiv {
  background-color: #ddd;
  overflow-x: visible;
  overflow-y: auto;
  padding: 4px 0 4px 0;
  position: absolute;
  z-index: 70;  /* so blocks go under toolbox when dragging */
  -webkit-tap-highlight-color: transparent;  /* issue #1345 */
}

.blocklyToolboxContents {
  display: flex;
  flex-wrap: wrap;
  flex-direction: column;
}

.blocklyToolboxContents:focus {
  outline: none;
}
`),wo(Hr.TOOLBOX,Fp,UT);var lx={colour_blocks:{colourPrimary:"#CF63CF",colourSecondary:"#C94FC9",colourTertiary:"#BD42BD"},list_blocks:{colourPrimary:"#9966FF",colourSecondary:"#855CD6",colourTertiary:"#774DCB"},logic_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC"},loop_blocks:{colourPrimary:"#0fBD8C",colourSecondary:"#0DA57A",colourTertiary:"#0B8E69"},math_blocks:{colourPrimary:"#59C059",colourSecondary:"#46B946",colourTertiary:"#389438"},procedure_blocks:{colourPrimary:"#FF6680",colourSecondary:"#FF4D6A",colourTertiary:"#FF3355"},text_blocks:{colourPrimary:"#FFBF00",colourSecondary:"#E6AC00",colourTertiary:"#CC9900"},variable_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}},cx={colour_category:{colour:"#CF63CF"},list_category:{colour:"#9966FF"},logic_category:{colour:"#4C97FF"},loop_category:{colour:"#0fBD8C"},math_category:{colour:"#59C059"},procedure_category:{colour:"#FF6680"},text_category:{colour:"#FFBF00"},variable_category:{colour:"#FF8C1A"},variable_dynamic_category:{colour:"#FF8C1A"}},ux=new m_("zelos",lx,cx),h$={};h$.Classic=Hv,h$.Zelos=ux;var d$=class extends Zu{constructor(St,At,Nt){At=St?St.workspace.id:At,At===null&&(At=void 0),super(At),this.type=bm,this.blockId=St?St.id:void 0,this.targetType=Nt}toJson(){const St=super.toJson();if(!this.targetType)throw Error("The click target type is undefined. Either pass a block to the constructor, or call fromJson");return St.targetType=this.targetType,St.blockId=this.blockId,St}fromJson(St){vt("Blockly.Events.Click.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(St),this.targetType=St.targetType,this.blockId=St.blockId}static fromJson(St,At,Nt){return At=super.fromJson(St,At,Nt??new d$),At.targetType=St.targetType,At.blockId=St.blockId,At}},f$;(function(St){St.BLOCK="block",St.WORKSPACE="workspace",St.ZOOM_CONTROLS="zoom_controls"})(f$||(f$={})),wo(Hr.EVENT,bm,d$);var VT=class{constructor(St,At){this.bubble=St,this.workspace=At,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.bubble.getRelativeToSurfaceXY(),this.dragSurface_=At.getBlockDragSurface()}startBubbleDrag(){Ro()||oo(!0),this.workspace.setResizesEnabled(!1),this.bubble.setAutoLayout(!1),this.dragSurface_&&(this.bubble.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.bubble.getSvgRoot())),this.bubble.setDragging&&this.bubble.setDragging(!0)}dragBubble(St,At){At=this.pixelsToWorkspaceUnits_(At),At=qr.sum(this.startXY_,At),this.bubble.moveDuringDrag(this.dragSurface_,At),At=this.dragTarget_,this.dragTarget_=this.workspace.getDragTarget(St),St=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),St!==this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==At&&(At&&At.onDragExit(this.bubble),this.dragTarget_&&this.dragTarget_.onDragEnter(this.bubble)),this.dragTarget_&&this.dragTarget_.onDragOver(this.bubble)}shouldDelete_(St){return St&&this.workspace.getComponentManager().hasCapability(St.id,Js.Capability.DELETE_AREA)?St.wouldDelete(this.bubble,!1):!1}updateCursorDuringBubbleDrag_(){this.bubble.setDeleteStyle(this.wouldDeleteBubble_)}endBubbleDrag(St,At){this.dragBubble(St,At),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.bubble)?St=this.startXY_:(St=this.pixelsToWorkspaceUnits_(At),St=qr.sum(this.startXY_,St)),this.bubble.moveTo(St.x,St.y),this.dragTarget_&&this.dragTarget_.onDrop(this.bubble),this.wouldDeleteBubble_?(this.fireMoveEvent_(),this.bubble.dispose()):(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace.getBubbleCanvas()),this.bubble.setDragging&&this.bubble.setDragging(!1),this.fireMoveEvent_()),this.workspace.setResizesEnabled(!0),oo(!1)}fireMoveEvent_(){if(this.bubble instanceof Il){const St=new(Wr(Up))(this.bubble);St.setOldCoordinate(this.startXY_),St.recordNew(),Gr(St)}}pixelsToWorkspaceUnits_(St){return St=new qr(St.x/this.workspace.scale,St.y/this.workspace.scale),this.workspace.isMutator&&St.scale(1/this.workspace.options.parentWorkspace.scale),St}},WT=class{constructor(St){this.workspace=St,this.horizontalScrollEnabled_=this.workspace.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace.isMovableVertically(),this.startScrollXY_=new qr(St.scrollX,St.scrollY)}dispose(){this.workspace=null}startDrag(){Dn()&&Dn().unselect(),this.workspace.setupDragSurface()}endDrag(St){this.drag(St),this.workspace.resetDragSurface()}drag(St){if(St=qr.sum(this.startScrollXY_,St),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace.scroll(St.x,St.y);else if(this.horizontalScrollEnabled_)this.workspace.scroll(St.x,this.workspace.scrollY);else if(this.verticalScrollEnabled_)this.workspace.scroll(this.workspace.scrollX,St.y);else throw new TypeError("Invalid state.")}},hx=5,dx=6,_p=class{constructor(St,At){this.creatorWorkspace=At,this.mouseDownXY_=new qr(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.hasExceededDragRadius_=!1,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.isMultiTouch_=this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.cachedPoints=new Map,this.startDistance_=this.previousScale_=0,this.currentDropdownOwner=this.isPinchZoomEnabled_=this.onStartWrapper_=null,this.mostRecentEvent_=St,this.currentDragDeltaXY_=new qr(0,0),this.healStack_=!kT}dispose(){Ct(),P_(),this.creatorWorkspace.clearGesture(),this.onMoveWrapper_&&hn(this.onMoveWrapper_),this.onUpWrapper_&&hn(this.onUpWrapper_),this.blockDragger_&&this.blockDragger_.dispose(),this.workspaceDragger_&&this.workspaceDragger_.dispose(),this.onStartWrapper_&&hn(this.onStartWrapper_)}updateFromEvent_(St){const At=new qr(St.clientX,St.clientY);this.updateDragDelta_(At)&&(this.updateIsDragging_(),Et()),this.mostRecentEvent_=St}updateDragDelta_(St){return this.currentDragDeltaXY_=qr.difference(St,this.mouseDownXY_),this.hasExceededDragRadius_?!1:this.hasExceededDragRadius_=qr.magnitude(this.currentDragDeltaXY_)>(this.flyout_?dt.config$$module$build$src$core$config.flyoutDragRadius:dt.config$$module$build$src$core$config.dragRadius)}updateIsDraggingFromFlyout_(){let St;if(!this.targetBlock_||(St=this.flyout_)==null||!St.isBlockCreatable(this.targetBlock_))return!1;if(!this.flyout_.targetWorkspace)throw Error(`Cannot update dragging from the flyout because the ' +
          'flyout's target workspace is undefined`);return!this.flyout_.isScrollable()||this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)?(this.startWorkspace_=this.flyout_.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),Ro()||oo(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),!0):!1}updateIsDraggingBubble_(){return this.startBubble_?(this.startDraggingBubble_(),!0):!1}updateIsDraggingBlock_(){if(!this.targetBlock_)return!1;if(this.flyout_){if(this.updateIsDraggingFromFlyout_())return this.startDraggingBlock_(),!0}else if(this.targetBlock_.isMovable())return this.startDraggingBlock_(),!0;return!1}updateIsDraggingWorkspace_(){if(!this.startWorkspace_)throw Error("Cannot update dragging the workspace because the start workspace is undefined");(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=new WT(this.startWorkspace_),this.workspaceDragger_.startDrag())}updateIsDragging_(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()}startDraggingBlock_(){this.blockDragger_=new(So(Hr.BLOCK_DRAGGER,this.creatorWorkspace.options,!0))(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_)}startDraggingBubble_(){if(!this.startBubble_)throw Error("Cannot update dragging the bubble because the start bubble is undefined");if(!this.startWorkspace_)throw Error("Cannot update dragging the bubble because the start workspace is undefined");this.bubbleDragger_=new VT(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)}doStart(St){if(!this.startWorkspace_)throw Error("Cannot start the touch gesture becauase the start workspace is undefined");this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,dn(St)?this.cancel():(this.hasStarted_=!0,yu(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.currentDropdownOwner=Jn(),this.startWorkspace_.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=St,ZO(),this.targetBlock_&&this.targetBlock_.select(),pn(St)?this.handleRightClick(St):(St.type.toLowerCase()==="pointerdown"&&St.pointerType!=="mouse"&&Tt(St,this),this.mouseDownXY_=new qr(St.clientX,St.clientY),this.healStack_=St.altKey||St.ctrlKey||St.metaKey,this.bindMouseEvents(St),this.isEnding_||this.handleTouchStart(St)))}bindMouseEvents(St){this.onStartWrapper_=Kt(document,"pointerdown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=Kt(document,"pointermove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=Kt(document,"pointerup",null,this.handleUp.bind(this),!0),St.preventDefault(),St.stopPropagation()}handleStart(St){this.isDragging()||(this.handleTouchStart(St),this.isMultiTouch()&&Et())}handleMove(St){this.isDragging()&&Rt(St)||!this.isMultiTouch()?(this.updateFromEvent_(St),this.workspaceDragger_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.blockDragger_?this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.bubbleDragger_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),St.preventDefault(),St.stopPropagation()):this.isMultiTouch()&&(this.handleTouchMove(St),Et())}handleUp(St){if(this.isDragging()||this.handleTouchEnd(St),!this.isMultiTouch()||this.isDragging()){if(!Rt(St))return;if(this.updateFromEvent_(St),Et(),this.isEnding_){console.log("Trying to end a gesture recursively.");return}this.isEnding_=!0,this.bubbleDragger_?this.bubbleDragger_.endBubbleDrag(St,this.currentDragDeltaXY_):this.blockDragger_?this.blockDragger_.endDrag(St,this.currentDragDeltaXY_):this.workspaceDragger_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(St)}St.preventDefault(),St.stopPropagation(),this.dispose()}handleTouchStart(St){var At=kt(St);this.cachedPoints.set(At,this.getTouchPoint(St));var Nt=Array.from(this.cachedPoints.keys());Nt.length===2&&(At=this.cachedPoints.get(Nt[0]),Nt=this.cachedPoints.get(Nt[1]),this.startDistance_=qr.distance(At,Nt),this.isMultiTouch_=!0,St.preventDefault())}handleTouchMove(St){const At=kt(St);this.cachedPoints.set(At,this.getTouchPoint(St)),this.isPinchZoomEnabled_&&this.cachedPoints.size===2?this.handlePinch_(St):this.handleMove(St)}handlePinch_(St){var At=Array.from(this.cachedPoints.keys()),Nt=this.cachedPoints.get(At[0]);if(At=this.cachedPoints.get(At[1]),Nt=qr.distance(Nt,At)/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){if(At=Nt-this.previousScale_,At=0<At?At*hx:At*dx,!this.startWorkspace_)throw Error("Cannot handle a pinch because the start workspace is undefined");const Wt=this.startWorkspace_,cn=mn(St,Wt.getParentSvg(),Wt.getInverseScreenCTM());Wt.zoom(cn.x,cn.y,At)}this.previousScale_=Nt,St.preventDefault()}handleTouchEnd(St){St=kt(St),this.cachedPoints.has(St)&&this.cachedPoints.delete(St),2>this.cachedPoints.size&&(this.cachedPoints.clear(),this.previousScale_=0)}getTouchPoint(St){return this.startWorkspace_?new qr(St.pageX,St.pageY):null}isMultiTouch(){return this.isMultiTouch_}cancel(){this.isEnding_||(Et(),this.bubbleDragger_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.blockDragger_?this.blockDragger_.endDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.workspaceDragger_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())}handleRightClick(St){this.targetBlock_?(this.bringBlockToFront_(),this.targetBlock_.workspace.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu(St)):this.startBubble_?this.startBubble_.showContextMenu(St):this.startWorkspace_&&!this.flyout_&&(this.startWorkspace_.hideChaff(),this.startWorkspace_.showContextMenu(St)),St.preventDefault(),St.stopPropagation(),this.dispose()}handleWsStart(St,At){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(At),this.mostRecentEvent_=St,this.doStart(St)}fireWorkspaceClick_(St){Gr(new(Wr(bm))(null,St.id,"workspace"))}handleFlyoutStart(St,At){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(At),this.handleWsStart(St,At.getWorkspace())}handleBlockStart(St,At){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(At),this.mostRecentEvent_=St}handleBubbleStart(St,At){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(At),this.mostRecentEvent_=St}doBubbleClick_(){this.startBubble_ instanceof Il&&(this.startBubble_.setFocus(),this.startBubble_.select())}doFieldClick_(){if(!this.startField_)throw Error("Cannot do a field click because the start field is undefined");this.currentDropdownOwner!==this.startField_&&this.startField_.showEditor(this.mostRecentEvent_),this.bringBlockToFront_()}doBlockClick_(){if(this.flyout_&&this.flyout_.autoClose){if(!this.targetBlock_)throw Error("Cannot do a block click because the target block is undefined");this.targetBlock_.isEnabled()&&(Ro()||oo(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump())}else{if(!this.startWorkspace_)throw Error("Cannot do a block click because the start workspace is undefined");const St=new(Wr(bm))(this.startBlock_,this.startWorkspace_.id,"block");Gr(St)}this.bringBlockToFront_(),oo(!1)}doWorkspaceClick_(St){St=this.creatorWorkspace,Dn()&&Dn().unselect(),this.fireWorkspaceClick_(this.startWorkspace_||St)}bringBlockToFront_(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()}setStartField(St){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=St)}setStartBubble(St){this.startBubble_||(this.startBubble_=St)}setStartBlock(St){this.startBlock_||this.startBubble_||(this.startBlock_=St,St.isInFlyout&&St!==St.getRootBlock()?this.setTargetBlock_(St.getRootBlock()):this.setTargetBlock_(St))}setTargetBlock_(St){St.isShadow()?this.setTargetBlock_(St.getParent()):this.targetBlock_=St}setStartWorkspace_(St){this.startWorkspace_||(this.startWorkspace_=St)}setStartFlyout_(St){this.flyout_||(this.flyout_=St)}isBubbleClick_(){return!!this.startBubble_&&!this.hasExceededDragRadius_}isBlockClick_(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()}isFieldClick_(){return(this.startField_?this.startField_.isClickable():!1)&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)}isWorkspaceClick_(){return!this.startBlock_&&!this.startBubble_&&!this.startField_&&!this.hasExceededDragRadius_}isDragging(){return!!this.workspaceDragger_||!!this.blockDragger_||!!this.bubbleDragger_}hasStarted(){return this.hasStarted_}getInsertionMarkers(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]}getCurrentDragger(){let St,At;return(At=(St=this.blockDragger_)!=null?St:this.workspaceDragger_)!=null?At:this.bubbleDragger_}static inProgress(){const St=En();for(let At=0,Nt;Nt=St[At];At++)if(Nt.currentGesture_)return!0;return!1}},ts=class{constructor(){this.shortcuts=new Map,this.keyMap=new Map,this.reset()}reset(){this.shortcuts.clear(),this.keyMap.clear()}register(St,At){if(this.shortcuts.get(St.name)&&!At)throw Error(`Shortcut named "${St.name}" already exists.`);if(this.shortcuts.set(St.name,St),(At=St.keyCodes)&&0<At.length)for(let Nt=0;Nt<At.length;Nt++)this.addKeyMapping(At[Nt],St.name,!!St.allowCollision)}unregister(St){return this.shortcuts.get(St)?(this.removeAllKeyMappings(St),this.shortcuts.delete(St),!0):(console.warn(`Keyboard shortcut named "${St}" not found.`),!1)}addKeyMapping(St,At,Nt){St=String(St);const Wt=this.keyMap.get(St);if(Wt&&!Nt)throw Error(`Shortcut named "${At}" collides with shortcuts "${Wt}"`);Wt&&Nt?Wt.unshift(At):this.keyMap.set(St,[At])}removeKeyMapping(St,At,Nt){const Wt=this.keyMap.get(St);if(!Wt)return Nt||console.warn(`No keyboard shortcut named "${At}" registered with key code "${St}"`),!1;const cn=Wt.indexOf(At);return-1<cn?(Wt.splice(cn,1),Wt.length===0&&this.keyMap.delete(St),!0):(Nt||console.warn(`No keyboard shortcut named "${At}" registered with key code "${St}"`),!1)}removeAllKeyMappings(St){for(const At of this.keyMap.keys())this.removeKeyMapping(At,St,!0)}setKeyMap(St){this.keyMap.clear();for(const At in St)this.keyMap.set(At,St[At])}getKeyMap(){const St=Object.create(null);for(const[At,Nt]of this.keyMap)St[At]=Nt;return St}getRegistry(){const St=Object.create(null);for(const[At,Nt]of this.shortcuts)St[At]=Nt;return np(Object.create(null),St)}onKeyDown(St,At){var Nt=this.serializeKeyEvent_(At);if(Nt=this.getShortcutNamesByKeyCode(Nt),!Nt)return!1;for(let Wt=0,cn;cn=Nt[Wt];Wt++){const vn=this.shortcuts.get(cn);let Pn,qn;if((Pn=vn)==null||!Pn.preconditionFn||(qn=vn)!=null&&qn.preconditionFn(St)){let Ar,Kr;if((Ar=vn)!=null&&Ar.callback&&((Kr=vn)!=null&&Kr.callback(St,At,vn)))return!0}}return!1}getShortcutNamesByKeyCode(St){return this.keyMap.get(St)||[]}getKeyCodesByShortcutName(St){const At=[];for(const[Nt,Wt]of this.keyMap)-1<Wt.indexOf(St)&&At.push(Nt);return At}serializeKeyEvent_(St){let At="";for(const Nt in ts.modifierKeys)St.getModifierState(Nt)&&(At!==""&&(At+="+"),At+=Nt);return At!==""&&St.keyCode?At=At+"+"+St.keyCode:St.keyCode&&(At=St.keyCode.toString()),At}checkModifiers_(St){for(let At=0,Nt;Nt=St[At];At++)if(!(Nt in ts.modifierKeys))throw Error(Nt+" is not a valid modifier key.")}createSerializedKey(St,At){let Nt="";if(At){this.checkModifiers_(At);for(const Wt in ts.modifierKeys)-1<At.indexOf(ts.modifierKeys[Wt])&&(Nt!==""&&(Nt+="+"),Nt+=Wt)}return Nt!==""&&St?Nt=Nt+"+"+St:St&&(Nt=St.toString()),Nt}};ts.registry=new ts,function(St){St=St.modifierKeys||(St.modifierKeys={}),St[St.Shift=16]="Shift",St[St.Control=17]="Control",St[St.Alt=18]="Alt",St[St.Meta=91]="Meta"}(ts||(ts={}));var Op;(function(St){St.ESCAPE="escape",St.DELETE="delete",St.COPY="copy",St.CUT="cut",St.PASTE="paste",St.UNDO="undo",St.REDO="redo"})(Op||(Op={})),e_();var yp={};yp.names=Op,yp.registerCopy=Sy,yp.registerCut=$y,yp.registerDefaultShortcuts=e_,yp.registerDelete=by,yp.registerEscape=fv,yp.registerPaste=Ty,yp.registerRedo=_g,yp.registerUndo=Jm;var p$=class extends Zu{constructor(St,At){super(At),this.type=zy,this.themeName=St}toJson(){const St=super.toJson();if(!this.themeName)throw Error("The theme name is undefined. Either pass a theme name to the constructor, or call fromJson");return St.themeName=this.themeName,St}fromJson(St){vt("Blockly.Events.ThemeChange.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(St),this.themeName=St.themeName}static fromJson(St,At,Nt){return At=super.fromJson(St,At,Nt??new p$),At.themeName=St.themeName,At}};wo(Hr.EVENT,zy,p$);var m$=class extends Zu{constructor(St,At,Nt,Wt,cn){super(Wt),this.type=u_,this.viewTop=St,this.viewLeft=At,this.scale=Nt,this.oldScale=cn}toJson(){const St=super.toJson();if(this.viewTop===void 0)throw Error("The view top is undefined. Either pass a value to the constructor, or call fromJson");if(this.viewLeft===void 0)throw Error("The view left is undefined. Either pass a value to the constructor, or call fromJson");if(this.scale===void 0)throw Error("The scale is undefined. Either pass a value to the constructor, or call fromJson");if(this.oldScale===void 0)throw Error("The old scale is undefined. Either pass a value to the constructor, or call fromJson");return St.viewTop=this.viewTop,St.viewLeft=this.viewLeft,St.scale=this.scale,St.oldScale=this.oldScale,St}fromJson(St){vt("Blockly.Events.Viewport.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(St),this.viewTop=St.viewTop,this.viewLeft=St.viewLeft,this.scale=St.scale,this.oldScale=St.oldScale}static fromJson(St,At,Nt){return At=super.fromJson(St,At,Nt??new m$),At.viewTop=St.viewTop,At.viewLeft=St.viewLeft,At.scale=St.scale,At.oldScale=St.oldScale,At}};wo(Hr.EVENT,u_,m$);var IO=class{constructor(St){this.connectionChecker=St,this.connections_=[]}addConnection(St,At){At=this.calculateIndexForYPos_(At),this.connections_.splice(At,0,St)}findIndexOfConnection_(St,At){if(!this.connections_.length)return-1;const Nt=this.calculateIndexForYPos_(At);if(Nt>=this.connections_.length)return-1;At=St.y;let Wt=Nt;for(;0<=Wt&&this.connections_[Wt].y===At;){if(this.connections_[Wt]===St)return Wt;Wt--}for(Wt=Nt;Wt<this.connections_.length&&this.connections_[Wt].y===At;){if(this.connections_[Wt]===St)return Wt;Wt++}return-1}calculateIndexForYPos_(St){if(!this.connections_.length)return 0;let At=0,Nt=this.connections_.length;for(;At<Nt;){const Wt=Math.floor((At+Nt)/2);if(this.connections_[Wt].y<St)At=Wt+1;else if(this.connections_[Wt].y>St)Nt=Wt;else{At=Wt;break}}return At}removeConnection(St,At){if(St=this.findIndexOfConnection_(St,At),St===-1)throw Error("Unable to find connection in connectionDB.");this.connections_.splice(St,1)}getNeighbours(St,At){function Nt(Kr){const Xo=cn-Wt[Kr].x,_s=vn-Wt[Kr].y;return Math.sqrt(Xo*Xo+_s*_s)<=At&&Ar.push(Wt[Kr]),_s<At}const Wt=this.connections_,cn=St.x,vn=St.y;St=0;let Pn=Wt.length-2,qn=Pn;for(;St<qn;)Wt[qn].y<vn?St=qn:Pn=qn,qn=Math.floor((St+Pn)/2);const Ar=[];if(Pn=St=qn,Wt.length){for(;0<=St&&Nt(St);)St--;do Pn++;while(Pn<Wt.length&&Nt(Pn))}return Ar}isInYRange_(St,At,Nt){return Math.abs(this.connections_[St].y-At)<=Nt}searchForClosest(St,At,Nt){if(!this.connections_.length)return{connection:null,radius:At};const Wt=St.y,cn=St.x;St.x=cn+Nt.x,St.y=Wt+Nt.y;var vn=this.calculateIndexForYPos_(St.y);Nt=null;let Pn=At,qn,Ar=vn-1;for(;0<=Ar&&this.isInYRange_(Ar,St.y,At);)qn=this.connections_[Ar],this.connectionChecker.canConnect(St,qn,!0,Pn)&&(Nt=qn,Pn=qn.distanceFrom(St)),Ar--;for(;vn<this.connections_.length&&this.isInYRange_(vn,St.y,At);)qn=this.connections_[vn],this.connectionChecker.canConnect(St,qn,!0,Pn)&&(Nt=qn,Pn=qn.distanceFrom(St)),vn++;return St.x=cn,St.y=Wt,{connection:Nt,radius:Pn}}static init(St){const At=[];return At[ro.INPUT_VALUE]=new IO(St),At[ro.OUTPUT_VALUE]=new IO(St),At[ro.NEXT_STATEMENT]=new IO(St),At[ro.PREVIOUS_STATEMENT]=new IO(St),At}},g$=class{constructor(St,At){this.pattern=St;let Nt;this.spacing=(Nt=At.spacing)!=null?Nt:0;let Wt;this.length=(Wt=At.length)!=null?Wt:1,this.line2=(this.line1=St.firstChild)&&this.line1.nextSibling;let cn;this.snapToGrid=(cn=At.snap)!=null?cn:!1}shouldSnap(){return this.snapToGrid}getSpacing(){return this.spacing}getPatternId(){return this.pattern.id}update(St){var At=this.spacing*St||100;this.pattern.setAttribute("width",At.toString()),this.pattern.setAttribute("height",At.toString()),At=Math.floor(this.spacing/2)+.5;let Nt=At-this.length/2,Wt=At+this.length/2;At*=St,Nt*=St,Wt*=St,this.setLineAttributes(this.line1,St,Nt,Wt,At,At),this.setLineAttributes(this.line2,St,At,At,Nt,Wt)}setLineAttributes(St,At,Nt,Wt,cn,vn){St&&(St.setAttribute("stroke-width",At.toString()),St.setAttribute("x1",Nt.toString()),St.setAttribute("y1",cn.toString()),St.setAttribute("x2",Wt.toString()),St.setAttribute("y2",vn.toString()))}moveTo(St,At){this.pattern.setAttribute("x",St.toString()),this.pattern.setAttribute("y",At.toString())}static createDom(St,At,Nt){St=Mn(ar.PATTERN,{id:"blocklyGridPattern"+St,patternUnits:"userSpaceOnUse"},Nt);let Wt,cn;if(0<((Wt=At.length)!=null?Wt:1)&&0<((cn=At.spacing)!=null?cn:0)){Mn(ar.LINE,{stroke:At.colour},St);let vn;(vn=At.length)!=null&&vn&&Mn(ar.LINE,{stroke:At.colour},St)}else Mn(ar.LINE,{},St);return St}},Nu=class{constructor(St,At){this.db=new Map,this.dbReverse=new Set,this.variableMap_=null,this.variablePrefix_=At||"",this.reservedWords=new Set(St?St.split(","):[])}reset(){this.db.clear(),this.dbReverse.clear(),this.variableMap_=null}setVariableMap(St){this.variableMap_=St}getNameForUserVariable_(St){return this.variableMap_?(St=this.variableMap_.getVariableById(St))?St.name:null:(console.warn(`Deprecated call to Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:
Blockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());`),null)}populateVariables(St){St=NO(St);for(let At=0;At<St.length;At++)this.getName(St[At].getId(),dt.NameType$$module$build$src$core$names.VARIABLE)}populateProcedures(St){throw Error("The implementation of populateProcedures should be monkey-patched in by blockly.ts")}getName(St,At){let Nt=St;At===dt.NameType$$module$build$src$core$names.VARIABLE&&(St=this.getNameForUserVariable_(St))&&(Nt=St),St=Nt.toLowerCase();const Wt=At===dt.NameType$$module$build$src$core$names.VARIABLE||At===dt.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix_:"";this.db.has(At)||this.db.set(At,new Map);const cn=this.db.get(At);return cn.has(St)?Wt+cn.get(St):(At=this.getDistinctName(Nt,At),cn.set(St,At.substr(Wt.length)),At)}getUserNames(St){let At;return(St=(At=this.db.get(St))==null?void 0:At.keys())?Array.from(St):[]}getDistinctName(St,At){St=this.safeName_(St);let Nt="";for(;this.dbReverse.has(St+Nt)||this.reservedWords.has(St+Nt);)Nt=Nt?Nt+1:2;return St+=Nt,this.dbReverse.add(St),(At===dt.NameType$$module$build$src$core$names.VARIABLE||At===dt.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix_:"")+St}safeName_(St){return St?(St=encodeURI(St.replace(/ /g,"_")).replace(/[^\w]/g,"_"),"0123456789".indexOf(St[0])!==-1&&(St="my_"+St)):St=To.UNNAMED_KEY||"unnamed",St}static equals(St,At){return St.toLowerCase()===At.toLowerCase()}};(function(St){St=St.NameType||(St.NameType={}),St.DEVELOPER_VARIABLE="DEVELOPER_VARIABLE",St.VARIABLE="VARIABLE",St.PROCEDURE="PROCEDURE"})(Nu||(Nu={})),dt.NameType$$module$build$src$core$names=Nu.NameType,Nu.DEVELOPER_VARIABLE_TYPE=dt.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE,dt.module$build$src$core$names={},dt.module$build$src$core$names.NameType=dt.NameType$$module$build$src$core$names,dt.module$build$src$core$names.Names=Nu;var HT=class extends Map{constructor(St){super(),this.workspace=St}set(St,At){return this.get(St)===At?this:(super.set(St,At),Gr(new(Wr(wv))(this.workspace,At)),Hu(At)&&At.startPublishing(),this)}delete(St){const At=this.get(St);return St=super.delete(St),St&&(nu(this.workspace),Gr(new(Wr(Xy))(this.workspace,At)),Hu(At)&&At.stopPublishing(),St)}clear(){if(this.size){for(const St of this.keys()){const At=this.get(St);super.delete(St),Gr(new(Wr(Xy))(this.workspace,At))}nu(this.workspace)}}add(St){return this.set(St.getId(),St)}getProcedures(){return[...this.values()]}},_0=class{constructor(St,At,Nt){this.workspace=St,this.parameters=[],this.returnTypes=null,this.enabled=!0,this.shouldFireEvents=!1,this.id=Nt??xo(),this.name=At}setName(St){if(St===this.name)return this;const At=this.name;return this.name=St,nu(this.workspace),this.shouldFireEvents&&Gr(new(Wr(Cv))(this.workspace,this,At)),this}insertParameter(St,At){return this.parameters[At]&&this.parameters[At].getId()===St.getId()?this:(this.parameters.splice(At,0,St),St.setProcedureModel(this),Hu(St)&&(this.shouldFireEvents?St.startPublishing():St.stopPublishing()),nu(this.workspace),this.shouldFireEvents&&Gr(new(Wr(Rv))(this.workspace,this,St,At)),this)}deleteParameter(St){if(!this.parameters[St])return this;const At=this.parameters[St];return this.parameters.splice(St,1),nu(this.workspace),Hu(At)&&At.stopPublishing(),this.shouldFireEvents&&Gr(new(Wr(kv))(this.workspace,this,At,St)),this}setReturnTypes(St){if(St&&St.length)throw Error("The built-in ProcedureModel does not support typing. You need to implement your own custom ProcedureModel.");if(!!St==!!this.returnTypes)return this;const At=this.returnTypes;return this.returnTypes=St,nu(this.workspace),this.shouldFireEvents&&Gr(new(Wr(Iv))(this.workspace,this,At)),this}setEnabled(St){return St===this.enabled?this:(this.enabled=St,nu(this.workspace),this.shouldFireEvents&&Gr(new(Wr(Av))(this.workspace,this)),this)}getId(){return this.id}getName(){return this.name}getParameter(St){return this.parameters[St]}getParameters(){return[...this.parameters]}getReturnTypes(){return this.returnTypes}getEnabled(){return this.enabled}startPublishing(){this.shouldFireEvents=!0;for(const St of this.parameters)Hu(St)&&St.startPublishing()}stopPublishing(){this.shouldFireEvents=!1;for(const St of this.parameters)Hu(St)&&St.stopPublishing()}},RO=class{constructor(St,At,Nt){this.workspace=St,this.shouldFireEvents=!1,this.procedureModel=null,this.id=Nt??xo();let Wt;this.variable=(Wt=this.workspace.getVariable(At))!=null?Wt:St.createVariable(At)}setName(St){if(St===this.variable.name)return this;const At=this.variable.name;let Nt;return this.variable=(Nt=this.workspace.getVariable(St))!=null?Nt:this.workspace.createVariable(St),nu(this.workspace),this.shouldFireEvents&&Gr(new(Wr(Mv))(this.workspace,this.procedureModel,this,At)),this}setTypes(St){throw Error("The built-in ParameterModel does not support typing. You need to implement your own custom ParameterModel.")}getName(){return this.variable.name}getTypes(){return[]}getId(){return this.id}getVariableModel(){return this.variable}startPublishing(){this.shouldFireEvents=!0}stopPublishing(){this.shouldFireEvents=!1}setProcedureModel(St){return this.procedureModel=St,this}},Zv,_$;Zv="PROCEDURE",_$="x",dt.module$build$src$core$procedures={},dt.module$build$src$core$procedures.CATEGORY_NAME=Zv,dt.module$build$src$core$procedures.DEFAULT_ARG=_$,dt.module$build$src$core$procedures.ObservableParameterModel=RO,dt.module$build$src$core$procedures.ObservableProcedureMap=HT,dt.module$build$src$core$procedures.ObservableProcedureModel=_0,dt.module$build$src$core$procedures.allProcedures=t_,dt.module$build$src$core$procedures.findLegalName=J_,dt.module$build$src$core$procedures.flyoutCategory=dm,dt.module$build$src$core$procedures.getCallers=Es,dt.module$build$src$core$procedures.getDefinition=Ws,dt.module$build$src$core$procedures.isNameUsed=eO,dt.module$build$src$core$procedures.mutateCallers=As,dt.module$build$src$core$procedures.mutatorOpenListener=bs,dt.module$build$src$core$procedures.rename=dS;var fx=class{constructor(){this.NONE=0,this.FIELD=1,this.HAT=2,this.ICON=4,this.SPACER=8,this.BETWEEN_ROW_SPACER=16,this.IN_ROW_SPACER=32,this.EXTERNAL_VALUE_INPUT=64,this.INPUT=128,this.INLINE_INPUT=256,this.STATEMENT_INPUT=512,this.CONNECTION=1024,this.PREVIOUS_CONNECTION=2048,this.NEXT_CONNECTION=4096,this.OUTPUT_CONNECTION=8192,this.CORNER=16384,this.LEFT_SQUARE_CORNER=32768,this.LEFT_ROUND_CORNER=65536,this.RIGHT_SQUARE_CORNER=131072,this.RIGHT_ROUND_CORNER=262144,this.JAGGED_EDGE=524288,this.ROW=1048576,this.TOP_ROW=2097152,this.BOTTOM_ROW=4194304,this.INPUT_ROW=8388608,this.LEFT_CORNER=this.LEFT_SQUARE_CORNER|this.LEFT_ROUND_CORNER,this.RIGHT_CORNER=this.RIGHT_SQUARE_CORNER|this.RIGHT_ROUND_CORNER,this.nextTypeValue_=16777216}getType(St){return Object.prototype.hasOwnProperty.call(this,St)||(this[St]=this.nextTypeValue_,this.nextTypeValue_<<=1),this[St]}isField(St){return St.type&this.FIELD}isHat(St){return St.type&this.HAT}isIcon(St){return St.type&this.ICON}isSpacer(St){return St.type&this.SPACER}isInRowSpacer(St){return St.type&this.IN_ROW_SPACER}isInput(St){return St.type&this.INPUT}isExternalInput(St){return St.type&this.EXTERNAL_VALUE_INPUT}isInlineInput(St){return St.type&this.INLINE_INPUT}isStatementInput(St){return St.type&this.STATEMENT_INPUT}isPreviousConnection(St){return St.type&this.PREVIOUS_CONNECTION}isNextConnection(St){return St.type&this.NEXT_CONNECTION}isPreviousOrNextConnection(St){return St.type&(this.PREVIOUS_CONNECTION|this.NEXT_CONNECTION)}isLeftRoundedCorner(St){return St.type&this.LEFT_ROUND_CORNER}isRightRoundedCorner(St){return St.type&this.RIGHT_ROUND_CORNER}isLeftSquareCorner(St){return St.type&this.LEFT_SQUARE_CORNER}isRightSquareCorner(St){return St.type&this.RIGHT_SQUARE_CORNER}isCorner(St){return St.type&this.CORNER}isJaggedEdge(St){return St.type&this.JAGGED_EDGE}isRow(St){return St.type&this.ROW}isBetweenRowSpacer(St){return St.type&this.BETWEEN_ROW_SPACER}isTopRow(St){return St.type&this.TOP_ROW}isBottomRow(St){return St.type&this.BOTTOM_ROW}isTopOrBottomRow(St){return St.type&(this.TOP_ROW|this.BOTTOM_ROW)}isInputRow(St){return St.type&this.INPUT_ROW}},nr=new fx,vp=class{constructor(St){this.centerline=this.xPos=this.height=this.width=0,this.constants_=St,this.type=nr.NONE,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}},O0=class{constructor(St){this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasStatement=this.hasExternalInput=!1,this.statementEdge=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=!1,this.align=null,this.constants_=St,this.type=nr.ROW,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}getLastInput(){for(let St=this.elements.length-1;0<=St;St--){const At=this.elements[St];if(nr.isInput(At))return At}return null}measure(){throw Error("Unexpected attempt to measure a base Row.")}startsWithElemSpacer(){return!0}endsWithElemSpacer(){return!0}getFirstSpacer(){for(let St=0;St<this.elements.length;St++){const At=this.elements[St];if(nr.isSpacer(At))return At}return null}getLastSpacer(){for(let St=this.elements.length-1;0<=St;St--){const At=this.elements[St];if(nr.isSpacer(At))return At}return null}},O$=class extends O0{constructor(St){super(St),this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0,this.type|=nr.BOTTOM_ROW}hasLeftSquareCorner(St){return!!St.outputConnection||!!St.getNextBlock()}hasRightSquareCorner(St){return!0}measure(){let St=0,At=0,Nt=0;for(let Wt=0;Wt<this.elements.length;Wt++){const cn=this.elements[Wt];At+=cn.width,nr.isSpacer(cn)||(nr.isNextConnection(cn)?Nt=Math.max(Nt,cn.height):St=Math.max(St,cn.height))}this.width=Math.max(this.minWidth,At),this.height=Math.max(this.minHeight,St)+Nt,this.descenderHeight=Nt,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},O_=class extends vp{constructor(St,At){super(St),this.connectionModel=At,this.shape=this.constants_.shapeFor(At),this.isDynamicShape="isDynamic"in this.shape&&this.shape.isDynamic,this.type|=nr.CONNECTION}},zp=class extends O_{constructor(St,At){super(St,At.connection),this.input=At,this.connectionOffsetY=this.connectionOffsetX=0,this.type|=nr.INPUT,this.align=At.align,(this.connectedBlock=At.connection&&At.connection.targetBlock()?At.connection.targetBlock():null)?(St=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=St.width,this.connectedBlockHeight=St.height):this.connectedBlockHeight=this.connectedBlockWidth=0}},qv=class extends zp{constructor(St,At){super(St,At),this.height=0,this.type|=nr.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width}},y_=class extends vp{constructor(St,At,Nt){super(St),this.field=At,this.parentInput=Nt,this.isEditable=At.EDITABLE,this.flipRtl=At.getFlipRtl(),this.type|=nr.FIELD,St=this.field.getSize(),this.height=St.height,this.width=St.width}},y$=class extends vp{constructor(St){super(St),this.type|=nr.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height}},QT=class extends vp{constructor(St,At){super(St),this.icon=At,this.flipRtl=!1,this.isVisible=At.isVisible(),this.type|=nr.ICON,St=At.getCorrectedSize(),this.height=St.height,this.width=St.width}},bu=class extends vp{constructor(St,At){super(St),this.type=this.type|nr.SPACER|nr.IN_ROW_SPACER,this.width=At,this.height=this.constants_.SPACER_DEFAULT_HEIGHT}},v$=class extends zp{constructor(St,At){super(St,At),this.type|=nr.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY="connectionOffsetY"in this.shape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX="connectionOffsetX"in this.shape?this.shape.connectionOffsetX(this.connectionWidth):0}},y0=class extends zp{constructor(St,At){super(St,At),this.type|=nr.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width}},b$=class extends O0{constructor(St){super(St),this.connectedBlockWidths=0,this.type|=nr.INPUT_ROW}measure(){this.width=this.minWidth,this.height=this.minHeight;let St=0;for(let At=0;At<this.elements.length;At++){const Nt=this.elements[At];this.width+=Nt.width,nr.isInput(Nt)&&Nt instanceof zp&&(nr.isStatementInput(Nt)&&Nt instanceof y0?St+=Nt.connectedBlockWidth:nr.isExternalInput(Nt)&&Nt instanceof qv&&Nt.connectedBlockWidth!==0&&(St+=Nt.connectedBlockWidth-Nt.connectionWidth)),nr.isSpacer(Nt)||(this.height=Math.max(this.height,Nt.height))}this.connectedBlockWidths=St,this.widthWithConnectedBlocks=this.width+St}endsWithElemSpacer(){return!this.hasExternalInput&&!this.hasStatement}},zT=class extends vp{constructor(St){super(St),this.type|=nr.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width}},jT=class extends O_{constructor(St,At){super(St,At),this.type|=nr.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},XT=class extends O_{constructor(St,At){super(St,At),this.connectionOffsetX=0,this.type|=nr.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP}},YT=class extends O_{constructor(St,At){super(St,At),this.type|=nr.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},v0=class extends vp{constructor(St,At){super(St),this.type=(At&&At!=="left"?nr.RIGHT_ROUND_CORNER:nr.LEFT_ROUND_CORNER)|nr.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2}},S$=class extends O0{constructor(St,At,Nt){super(St),this.height=At,this.width=Nt,this.precedesStatement=this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.type=this.type|nr.SPACER|nr.BETWEEN_ROW_SPACER,this.elements=[new bu(this.constants_,Nt)]}measure(){}},b0=class extends vp{constructor(St,At){super(St),this.type=(At&&At!=="left"?nr.RIGHT_SQUARE_CORNER:nr.LEFT_SQUARE_CORNER)|nr.CORNER,this.width=this.height=this.constants_.NO_PADDING}},$$=class extends O0{constructor(St){super(St),this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null,this.type|=nr.TOP_ROW}hasLeftSquareCorner(St){const At=(St.hat?St.hat==="cap":this.constants_.ADD_START_HATS)&&!St.outputConnection&&!St.previousConnection,Nt=St.getPreviousBlock();return!!St.outputConnection||At||(Nt?Nt.getNextBlock()===St:!1)}hasRightSquareCorner(St){return!0}measure(){let St=0,At=0,Nt=0;for(let Wt=0;Wt<this.elements.length;Wt++){const cn=this.elements[Wt];At+=cn.width,nr.isSpacer(cn)||(nr.isHat(cn)&&cn instanceof y$?Nt=Math.max(Nt,cn.ascenderHeight):St=Math.max(St,cn.height))}this.width=Math.max(this.minWidth,At),this.height=Math.max(this.minHeight,St)+Nt,this.capline=this.ascenderHeight=Nt,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},S0=class{constructor(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.CORNER_RADIUS=8,this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.defs_=null,this.embossFilterId="",this.embossFilter_=null,this.disabledPatternId="",this.disabledPattern_=null,this.debugFilterId="",this.cssNode_=this.debugFilter_=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2},this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=ls(0,0),this.FIELD_TEXT_BASELINE_CENTER=!0,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2)}init(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()}setTheme(St){this.blockStyles=Object.create(null);const At=St.blockStyles;for(const Nt in At)this.blockStyles[Nt]=this.validatedBlockStyle_(At[Nt]);this.setDynamicProperties_(St)}setDynamicProperties_(St){this.setFontConstants_(St),this.setComponentConstants_(St),this.ADD_START_HATS=St.startHats!==void 0?St.startHats:this.ADD_START_HATS}setFontConstants_(St){St.fontStyle&&St.fontStyle.family&&(this.FIELD_TEXT_FONTFAMILY=St.fontStyle.family),St.fontStyle&&St.fontStyle.weight&&(this.FIELD_TEXT_FONTWEIGHT=St.fontStyle.weight),St.fontStyle&&St.fontStyle.size&&(this.FIELD_TEXT_FONTSIZE=St.fontStyle.size),St=jr("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=St.height,this.FIELD_TEXT_BASELINE=St.baseline}setComponentConstants_(St){this.CURSOR_COLOUR=St.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=St.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=St.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(St.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY}getBlockStyleForColour(St){const At="auto_"+St;return this.blockStyles[At]||(this.blockStyles[At]=this.createBlockStyle_(St)),{style:this.blockStyles[At],name:At}}getBlockStyle(St){return this.blockStyles[St||""]||(St&&St.indexOf("auto_")===0?this.getBlockStyleForColour(St.substring(5)).style:this.createBlockStyle_("#000000"))}createBlockStyle_(St){return this.validatedBlockStyle_({colourPrimary:St})}validatedBlockStyle_(St){const At={};return St&&Object.assign(At,St),St=gu(At.colourPrimary||"#000"),At.colourPrimary=St.hex,At.colourSecondary=At.colourSecondary?gu(At.colourSecondary).hex:this.generateSecondaryColour_(At.colourPrimary),At.colourTertiary=At.colourTertiary?gu(At.colourTertiary).hex:this.generateTertiaryColour_(At.colourPrimary),At.hat=At.hat||"",At}generateSecondaryColour_(St){return mu("#fff",St,.6)||St}generateTertiaryColour_(St){return mu("#fff",St,.3)||St}dispose(){this.embossFilter_&&Sr(this.embossFilter_),this.disabledPattern_&&Sr(this.disabledPattern_),this.debugFilter_&&Sr(this.debugFilter_),this.cssNode_=null}makeJaggedTeeth(){const St=this.JAGGED_TEETH_HEIGHT,At=this.JAGGED_TEETH_WIDTH,Nt=lm([_o(At,St/4),_o(2*-At,St/2),_o(At,St/4)]);return{height:St,width:At,path:Nt}}makeStartHat(){const St=this.START_HAT_HEIGHT,At=this.START_HAT_WIDTH,Nt=Ul("c",[_o(30,-St),_o(70,-St),_o(At,0)]);return{height:St,width:At,path:Nt}}makePuzzleTab(){function St(vn){vn=vn?-1:1;const Pn=-vn;var qn=Nt/2;const Ar=qn+2.5,Kr=qn+.5,Xo=_o(-At,vn*qn);return qn=_o(At,vn*qn),Ul("c",[_o(0,vn*Ar),_o(-At,Pn*Kr),Xo])+Ul("s",[_o(At,2.5*Pn),qn])}const At=this.TAB_WIDTH,Nt=this.TAB_HEIGHT,Wt=St(!0),cn=St(!1);return{type:this.SHAPES.PUZZLE,width:At,height:Nt,pathDown:cn,pathUp:Wt}}makeNotch(){function St(Pn){return lm([_o(Pn*Wt,Nt),_o(3*Pn,0),_o(Pn*Wt,-Nt)])}const At=this.NOTCH_WIDTH,Nt=this.NOTCH_HEIGHT,Wt=(At-3)/2,cn=St(1),vn=St(-1);return{type:this.SHAPES.NOTCH,width:At,height:Nt,pathLeft:cn,pathRight:vn}}makeInsideCorners(){const St=this.CORNER_RADIUS,At=Ts("a","0 0,0",St,_o(-St,St)),Nt=Ts("a","0 0,0",St,_o(St,St));return{width:St,height:St,pathTop:At,pathBottom:Nt}}makeOutsideCorners(){const St=this.CORNER_RADIUS,At=ls(0,St)+Ts("a","0 0,1",St,_o(St,-St)),Nt=Ts("a","0 0,1",St,_o(St,St)),Wt=Ts("a","0 0,1",St,_o(-St,-St)),cn=Ts("a","0 0,1",St,_o(-St,St));return{topLeft:At,topRight:Nt,bottomRight:cn,bottomLeft:Wt,rightHeight:St}}shapeFor(St){switch(St.type){case ro.INPUT_VALUE:case ro.OUTPUT_VALUE:return this.PUZZLE_TAB;case ro.PREVIOUS_STATEMENT:case ro.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}}createDom(St,At,Nt){this.injectCSS_(At,Nt),this.defs_=Mn(ar.DEFS,{},St),St=Mn(ar.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},this.defs_),Mn(ar.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},St),At=Mn(ar.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},St),Mn(ar.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},At),Mn(ar.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},St),Mn(ar.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},St),this.embossFilterId=St.id,this.embossFilter_=St,St=Mn(ar.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},this.defs_),Mn(ar.RECT,{width:10,height:10,fill:"#aaa"},St),Mn(ar.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},St),this.disabledPatternId=St.id,this.disabledPattern_=St,this.createDebugFilter()}createDebugFilter(){if(!this.debugFilter_){const St=Mn(ar.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},this.defs_),At=Mn(ar.FECOMPONENTTRANSFER,{result:"outBlur"},St);Mn(ar.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},At),Mn(ar.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},St),Mn(ar.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},St),this.debugFilterId=St.id,this.debugFilter_=St}}injectCSS_(St,At){At=this.getCSS_(At),St="blockly-renderer-style-"+St,this.cssNode_=document.getElementById(St);const Nt=At.join(`
`);this.cssNode_?this.cssNode_.firstChild.textContent=Nt:(At=document.createElement("style"),At.id=St,St=document.createTextNode(Nt),At.appendChild(St),document.head.insertBefore(At,document.head.firstChild),this.cssNode_=At)}getCSS_(St){return[`${St} .blocklyText, `,`${St} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${St} .blocklyText {`,"fill: #fff;","}",`${St} .blocklyNonEditableText>rect,`,`${St} .blocklyEditableText>rect {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"fill-opacity: .6;","stroke: none;","}",`${St} .blocklyNonEditableText>text,`,`${St} .blocklyEditableText>text {`,"fill: #000;","}",`${St} .blocklyFlyoutLabelText {`,"fill: #000;","}",`${St} .blocklyText.blocklyBubbleText {`,"fill: #000;","}",`${St} .blocklyEditableText:not(.editing):hover>rect {`,"stroke: #fff;","stroke-width: 2;","}",`${St} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"}",`${St} .blocklySelected>.blocklyPath {`,"stroke: #fc3;","stroke-width: 3px;","}",`${St} .blocklyHighlightedConnectionPath {`,"stroke: #fc3;","}",`${St} .blocklyReplaceable .blocklyPath {`,"fill-opacity: .5;","}",`${St} .blocklyReplaceable .blocklyPathLight,`,`${St} .blocklyReplaceable .blocklyPathDark {`,"display: none;","}",`${St} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},ZT=!1,Su=class{constructor(St){this.constants=St,this.debugElements_=[],this.svgRoot_=null,this.randomColour_=""}clearElems(){for(let St=0;St<this.debugElements_.length;St++)Sr(this.debugElements_[St]);this.debugElements_=[]}drawSpacerRow(St,At,Nt){if(Su.config.rowSpacers){var Wt=Math.abs(St.height),cn=0>St.height;cn&&(At-=Wt),this.debugElements_.push(Mn(ar.RECT,{class:"rowSpacerRect blockRenderDebug",x:Nt?-(St.xPos+St.width):St.xPos,y:At,width:St.width,height:Wt,stroke:cn?"black":"blue",fill:"blue","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}}drawSpacerElem(St,At,Nt){if(Su.config.elemSpacers){At=Math.abs(St.width);var Wt=0>St.width,cn=Wt?St.xPos-At:St.xPos;Nt&&(cn=-(cn+At)),this.debugElements_.push(Mn(ar.RECT,{class:"elemSpacerRect blockRenderDebug",x:cn,y:St.centerline-St.height/2,width:At,height:St.height,stroke:"pink",fill:Wt?"black":"pink","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}}drawRenderedElem(St,At){if(Su.config.elems){let Nt=St.xPos;At&&(Nt=-(Nt+St.width)),At=St.centerline-St.height/2,this.debugElements_.push(Mn(ar.RECT,{class:"rowRenderingRect blockRenderDebug",x:Nt,y:At,width:St.width,height:St.height,stroke:"black",fill:"none","stroke-width":"1px"},this.svgRoot_)),nr.isField(St)&&St instanceof y_&&St.field instanceof dt.FieldLabel$$module$build$src$core$field_label&&this.debugElements_.push(Mn(ar.RECT,{class:"rowRenderingRect blockRenderDebug",x:Nt,y:At+this.constants.FIELD_TEXT_BASELINE,width:St.width,height:"0.1px",stroke:"red",fill:"none","stroke-width":"0.5px"},this.svgRoot_))}nr.isInput(St)&&St instanceof zp&&Su.config.connections&&this.drawConnection(St.connectionModel)}drawConnection(St){if(Su.config.connections){var At="",Nt=0,Wt="";St.type===ro.INPUT_VALUE?(Nt=4,At="magenta",Wt="none"):St.type===ro.OUTPUT_VALUE?(Nt=2,Wt=At="magenta"):St.type===ro.NEXT_STATEMENT?(Nt=4,At="goldenrod",Wt="none"):St.type===ro.PREVIOUS_STATEMENT&&(Nt=2,Wt=At="goldenrod"),this.debugElements_.push(Mn(ar.CIRCLE,{class:"blockRenderDebug",cx:St.getOffsetInBlock().x,cy:St.getOffsetInBlock().y,r:Nt,fill:Wt,stroke:At},this.svgRoot_))}}drawRenderedRow(St,At,Nt){Su.config.rows&&(this.debugElements_.push(Mn(ar.RECT,{class:"elemRenderingRect blockRenderDebug",x:Nt?-(St.xPos+St.width):St.xPos,y:St.yPos,width:St.width,height:St.height,stroke:"red",fill:"none","stroke-width":"1px"},this.svgRoot_)),nr.isTopOrBottomRow(St)||Su.config.connectedBlockBounds&&this.debugElements_.push(Mn(ar.RECT,{class:"connectedBlockWidth blockRenderDebug",x:Nt?-(St.xPos+St.widthWithConnectedBlocks):St.xPos,y:St.yPos,width:St.widthWithConnectedBlocks,height:St.height,stroke:this.randomColour_,fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))}drawRowWithElements(St,At,Nt){for(let Wt=0;Wt<St.elements.length;Wt++){const cn=St.elements[Wt];cn?nr.isSpacer(cn)?this.drawSpacerElem(cn,St.height,Nt):this.drawRenderedElem(cn,Nt):console.warn("A row has an undefined or null element.",St,cn)}this.drawRenderedRow(St,At,Nt)}drawBoundingBox(St){if(Su.config.blockBounds){var At=St.RTL?-St.width:0;this.debugElements_.push(Mn(ar.RECT,{class:"blockBoundingBox blockRenderDebug",x:At,y:0,width:St.width,height:St.height,stroke:"black",fill:"none","stroke-width":"1px","stroke-dasharray":"5,5"},this.svgRoot_)),Su.config.connectedBlockBounds&&(At=St.RTL?-St.widthWithChildren:0,this.debugElements_.push(Mn(ar.RECT,{class:"blockRenderDebug",x:At,y:0,width:St.widthWithChildren,height:St.height,stroke:"#DF57BC",fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))}}drawDebug(St,At){this.clearElems(),this.svgRoot_=St.getSvgRoot(),this.randomColour_="#"+Math.floor(16777215*Math.random()).toString(16);let Nt=0;for(let Wt=0;Wt<At.rows.length;Wt++){const cn=At.rows[Wt];nr.isBetweenRowSpacer(cn)?this.drawSpacerRow(cn,Nt,At.RTL):this.drawRowWithElements(cn,Nt,At.RTL),Nt+=cn.height}St.previousConnection&&this.drawConnection(St.previousConnection),St.nextConnection&&this.drawConnection(St.nextConnection),St.outputConnection&&this.drawConnection(St.outputConnection),At.rightSide&&this.drawRenderedElem(At.rightSide,At.RTL),this.drawBoundingBox(At),this.drawRender(St.pathObject.svgPath)}drawRender(St){Su.config.render&&(St.setAttribute("filter","url(#"+this.constants.debugFilterId+")"),setTimeout(function(){St.setAttribute("filter","")},100))}};Su.config={rowSpacers:!0,elemSpacers:!0,rows:!0,elems:!0,connections:!0,blockBounds:!0,connectedBlockBounds:!0,render:!0};var $0=class{constructor(St,At){this.inlinePath_=this.outlinePath_="",this.block_=St,this.info_=At,this.topLeft_=St.getRelativeToSurfaceXY(),this.constants_=At.getRenderer().getConstants()}draw(){if(this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),Qu()){let St;(St=this.block_.renderingDebugger)==null||St.drawDebug(this.block_,this.info_)}this.recordSizeOnBlock_()}recordSizeOnBlock_(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren}hideHiddenIcons_(){for(let St=0,At;At=this.info_.hiddenIcons[St];St++){let Nt;(Nt=At.icon.iconGroup_)==null||Nt.setAttribute("display","none")}}drawOutline_(){this.drawTop_();for(let St=1;St<this.info_.rows.length-1;St++){const At=this.info_.rows[St];At.hasJaggedEdge?this.drawJaggedEdge_(At):At.hasStatement?this.drawStatementInput_(At):At.hasExternalInput?this.drawValueInput_(At):this.drawRightSideRow_(At)}this.drawBottom_(),this.drawLeft_()}drawTop_(){const St=this.info_.topRow,At=St.elements;this.positionPreviousConnection_(),this.outlinePath_+=ls(St.xPos,this.info_.startY);for(let Nt=0,Wt;Wt=At[Nt];Nt++)nr.isLeftRoundedCorner(Wt)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:nr.isRightRoundedCorner(Wt)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:nr.isPreviousConnection(Wt)&&Wt instanceof O_?this.outlinePath_+=Wt.shape.pathLeft:nr.isHat(Wt)?this.outlinePath_+=this.constants_.START_HAT.path:nr.isSpacer(Wt)&&(this.outlinePath_+=eo("h",Wt.width));this.outlinePath_+=eo("v",St.height)}drawJaggedEdge_(St){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+eo("v",St.height-this.constants_.JAGGED_TEETH.height)}drawValueInput_(St){const At=St.getLastInput();this.positionExternalValueConnection_(St);const Nt=Cl(At.shape)?At.shape.pathDown(At.height):At.shape.pathDown;this.outlinePath_+=eo("H",At.xPos+At.width)+Nt+eo("v",St.height-At.connectionHeight)}drawStatementInput_(St){var At=St.getLastInput();if(At){var Nt=At.xPos+At.notchOffset+At.shape.width;At=At.shape.pathRight+eo("h",-(At.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var Wt=St.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=eo("H",Nt)+At+eo("v",Wt)+this.constants_.INSIDE_CORNERS.pathBottom+eo("H",St.xPos+St.width),this.positionStatementInputConnection_(St)}}drawRightSideRow_(St){this.outlinePath_+=eo("V",St.yPos+St.height)}drawBottom_(){const St=this.info_.bottomRow,At=St.elements;this.positionNextConnection_();let Nt=0,Wt="";for(let cn=At.length-1,vn;vn=At[cn];cn--)nr.isNextConnection(vn)&&vn instanceof O_?Wt+=vn.shape.pathRight:nr.isLeftSquareCorner(vn)?Wt+=eo("H",St.xPos):nr.isLeftRoundedCorner(vn)?Wt+=this.constants_.OUTSIDE_CORNERS.bottomLeft:nr.isRightRoundedCorner(vn)?(Wt+=this.constants_.OUTSIDE_CORNERS.bottomRight,Nt=this.constants_.OUTSIDE_CORNERS.rightHeight):nr.isSpacer(vn)&&(Wt+=eo("h",-1*vn.width));this.outlinePath_+=eo("V",St.baseline-Nt),this.outlinePath_+=Wt}drawLeft_(){var St=this.info_.outputConnection;if(this.positionOutputConnection_(),St){const At=St.connectionOffsetY+St.height;St=Cl(St.shape)?St.shape.pathUp(St.height):St.shape.pathUp,this.outlinePath_+=eo("V",At)+St}this.outlinePath_+="z"}drawInternals_(){for(let St=0,At;At=this.info_.rows[St];St++)for(let Nt=0,Wt;Wt=At.elements[Nt];Nt++)nr.isInlineInput(Wt)?this.drawInlineInput_(Wt):(nr.isIcon(Wt)||nr.isField(Wt))&&this.layoutField_(Wt)}layoutField_(St){const At=nr.isField(St)?St.field.getSvgRoot():St.icon.iconGroup_,Nt=St.centerline-St.height/2;let Wt=St.xPos,cn="";this.info_.RTL&&(Wt=-(Wt+St.width),St.flipRtl&&(Wt+=St.width,cn="scale(-1 1)")),nr.isIcon(St)?(At.setAttribute("display","block"),At.setAttribute("transform","translate("+Wt+","+Nt+")"),St.icon.computeIconLocation()):At.setAttribute("transform","translate("+Wt+","+Nt+")"+cn),this.info_.isInsertionMarker&&At.setAttribute("display","none")}drawInlineInput_(St){const At=St.width,Nt=St.height,Wt=St.connectionOffsetY,cn=St.connectionHeight+Wt;this.inlinePath_+=Vs(St.xPos+St.connectionWidth,St.centerline-Nt/2)+eo("v",Wt)+St.shape.pathDown+eo("v",Nt-cn)+eo("h",At-St.connectionWidth)+eo("v",-Nt)+"z",this.positionInlineInputConnection_(St)}positionInlineInputConnection_(St){const At=St.centerline-St.height/2;if(St.connectionModel){let Nt=St.xPos+St.connectionWidth+St.connectionOffsetX;this.info_.RTL&&(Nt*=-1),St.connectionModel.setOffsetInBlock(Nt,At+St.connectionOffsetY)}}positionStatementInputConnection_(St){const At=St.getLastInput();if(At!=null&&At.connectionModel){let Nt=St.xPos+St.statementEdge+At.notchOffset;this.info_.RTL&&(Nt*=-1),At.connectionModel.setOffsetInBlock(Nt,St.yPos)}}positionExternalValueConnection_(St){const At=St.getLastInput();if(At&&At.connectionModel){let Nt=St.xPos+St.width;this.info_.RTL&&(Nt*=-1),At.connectionModel.setOffsetInBlock(Nt,St.yPos)}}positionPreviousConnection_(){const St=this.info_.topRow;if(St.connection){const At=St.xPos+St.notchOffset;St.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-At:At,0)}}positionNextConnection_(){const St=this.info_.bottomRow;if(St.connection){const At=St.connection,Nt=At.xPos;At.connectionModel.setOffsetInBlock(this.info_.RTL?-Nt:Nt,St.baseline)}}positionOutputConnection_(){if(this.info_.outputConnection){const St=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-St:St,this.info_.outputConnection.connectionOffsetY)}}},kO=class{constructor(St,At){this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.hiddenIcons=[],this.startY=this.startX=0,this.renderer_=St,this.block_=At,this.constants_=this.renderer_.getConstants(),this.outputConnection=At.outputConnection?new XT(this.constants_,At.outputConnection):null,this.isInline=At.getInputsInline()&&!At.isCollapsed(),this.isCollapsed=At.isCollapsed(),this.isInsertionMarker=At.isInsertionMarker(),this.RTL=At.RTL,this.topRow=new $$(this.constants_),this.bottomRow=new O$(this.constants_)}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}createRows_(){this.populateTopRow_(),this.rows.push(this.topRow);let St=new b$(this.constants_);this.inputRows.push(St);var At=this.block_.getIcons();for(let Nt=0,Wt;Wt=At[Nt];Nt++){const cn=new QT(this.constants_,Wt);this.isCollapsed&&Wt.collapseHidden?this.hiddenIcons.push(cn):St.elements.push(cn)}At=void 0;for(let Nt=0,Wt;Wt=this.block_.inputList[Nt];Nt++)if(Wt.isVisible()){this.shouldStartNewRow_(Wt,At)&&(this.rows.push(St),St=new b$(this.constants_),this.inputRows.push(St));for(let cn=0,vn;vn=Wt.fieldRow[cn];cn++)St.elements.push(new y_(this.constants_,vn,Wt));this.addInput_(Wt,St),At=Wt}this.isCollapsed&&(St.hasJaggedEdge=!0,St.elements.push(new zT(this.constants_))),(St.elements.length||St.hasDummyInput)&&this.rows.push(St),this.populateBottomRow_(),this.rows.push(this.bottomRow)}populateTopRow_(){var St=!!this.block_.previousConnection;const At=(this.block_.hat?this.block_.hat==="cap":this.constants_.ADD_START_HATS)&&!this.outputConnection&&!St;let Nt=this.topRow.hasLeftSquareCorner(this.block_)?b0:v0;this.topRow.elements.push(new Nt(this.constants_)),At?(St=new y$(this.constants_),this.topRow.elements.push(St),this.topRow.capline=St.ascenderHeight):St&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new YT(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0].type===No.STATEMENT&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,Nt=this.topRow.hasRightSquareCorner(this.block_)?b0:v0,this.topRow.elements.push(new Nt(this.constants_,"right"))}populateBottomRow_(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type===No.STATEMENT?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new b0(this.constants_)):this.bottomRow.elements.push(new v0(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new jT(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new b0(this.constants_,"right")):this.bottomRow.elements.push(new v0(this.constants_,"right"))}addInput_(St,At){this.isInline&&St.type===No.VALUE?(At.elements.push(new v$(this.constants_,St)),At.hasInlineInput=!0):St.type===No.STATEMENT?(At.elements.push(new y0(this.constants_,St)),At.hasStatement=!0):St.type===No.VALUE?(At.elements.push(new qv(this.constants_,St)),At.hasExternalInput=!0):St.type===No.DUMMY&&(At.minHeight=Math.max(At.minHeight,St.getSourceBlock()&&St.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),At.hasDummyInput=!0),At.align===null&&(At.align=St.align)}shouldStartNewRow_(St,At){return At?St.type===No.STATEMENT||At.type===No.STATEMENT?!0:St.type===No.VALUE||St.type===No.DUMMY?!this.isInline:!1:!1}addElemSpacing_(){for(let St=0,At;At=this.rows[St];St++){const Nt=At.elements;if(At.elements=[],At.startsWithElemSpacer()&&At.elements.push(new bu(this.constants_,this.getInRowSpacing_(null,Nt[0]))),Nt.length){for(let Wt=0;Wt<Nt.length-1;Wt++){At.elements.push(Nt[Wt]);const cn=this.getInRowSpacing_(Nt[Wt],Nt[Wt+1]);At.elements.push(new bu(this.constants_,cn))}At.elements.push(Nt[Nt.length-1]),At.endsWithElemSpacer()&&At.elements.push(new bu(this.constants_,this.getInRowSpacing_(Nt[Nt.length-1],null)))}}}getInRowSpacing_(St,At){if(!St&&At&&nr.isStatementInput(At))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(St&&nr.isInput(St)&&!At){if(nr.isExternalInput(St))return this.constants_.NO_PADDING;if(nr.isInlineInput(St))return this.constants_.LARGE_PADDING;if(nr.isStatementInput(St))return this.constants_.NO_PADDING}return St&&nr.isLeftSquareCorner(St)&&At&&(nr.isPreviousConnection(At)||nr.isNextConnection(At))?At.notchOffset:St&&nr.isLeftRoundedCorner(St)&&At&&(nr.isPreviousConnection(At)||nr.isNextConnection(At))?At.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}computeBounds_(){let St=0,At=0,Nt=0;for(let cn=0,vn;vn=this.rows[cn];cn++){if(vn.measure(),At=Math.max(At,vn.width),vn.hasStatement){var Wt=vn.getLastInput();let Pn,qn;Wt=vn.width-((qn=(Pn=Wt)==null?void 0:Pn.width)!=null?qn:0),St=Math.max(St,Wt)}Nt=Math.max(Nt,vn.widthWithConnectedBlocks)}this.statementEdge=St,this.width=At;for(let cn=0,vn;vn=this.rows[cn];cn++)vn.hasStatement&&(vn.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(At,Nt),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)}alignRowElements_(){for(let At=0,Nt;Nt=this.rows[At];At++)if(Nt.hasStatement)this.alignStatementRow_(Nt);else{var St=Nt.width;St=this.getDesiredRowWidth_(Nt)-St,0<St&&this.addAlignmentPadding_(Nt,St),nr.isTopOrBottomRow(Nt)&&(Nt.widthWithConnectedBlocks=Nt.width)}}getDesiredRowWidth_(St){return this.width-this.startX}addAlignmentPadding_(St,At){const Nt=St.getFirstSpacer(),Wt=St.getLastSpacer();if((St.hasExternalInput||St.hasStatement)&&(St.widthWithConnectedBlocks+=At),St.align===dt.Align$$module$build$src$core$input.LEFT&&Wt)Wt.width+=At;else if(St.align===dt.Align$$module$build$src$core$input.CENTRE&&Nt&&Wt)Nt.width+=At/2,Wt.width+=At/2;else if(St.align===dt.Align$$module$build$src$core$input.RIGHT&&Nt)Nt.width+=At;else if(Wt)Wt.width+=At;else return;St.width+=At}alignStatementRow_(St){const At=St.getLastInput();if(At){var Nt=St.width-At.width,Wt=this.statementEdge;Nt=Wt-Nt,0<Nt&&this.addAlignmentPadding_(St,Nt),Nt=St.width,Wt=this.getDesiredRowWidth_(St),At.width+=Wt-Nt,At.height=Math.max(At.height,St.height),St.width+=Wt-Nt,St.widthWithConnectedBlocks=Math.max(St.width,this.statementEdge+St.connectedBlockWidths)}}addRowSpacing_(){const St=this.rows;this.rows=[];for(let At=0;At<St.length;At++)this.rows.push(St[At]),At!==St.length-1&&this.rows.push(this.makeSpacerRow_(St[At],St[At+1]))}makeSpacerRow_(St,At){var Nt=this.getSpacerRowHeight_(St,At);const Wt=this.getSpacerRowWidth_(St,At);return Nt=new S$(this.constants_,Nt,Wt),St.hasStatement&&(Nt.followsStatement=!0),At.hasStatement&&(Nt.precedesStatement=!0),Nt}getSpacerRowWidth_(St,At){return this.width-this.startX}getSpacerRowHeight_(St,At){return this.constants_.MEDIUM_PADDING}getElemCenterline_(St,At){return nr.isSpacer(At)?St.yPos+At.height/2:nr.isBottomRow(St)?(St=St.yPos+St.height-St.descenderHeight,nr.isNextConnection(At)?St+At.height/2:St-At.height/2):nr.isTopRow(St)?nr.isHat(At)?St.capline-At.height/2:St.capline+At.height/2:St.yPos+St.height/2}recordElemPositions_(St){let At=St.xPos;for(let Nt=0,Wt;Wt=St.elements[Nt];Nt++)nr.isSpacer(Wt)&&(Wt.height=St.height),Wt.xPos=At,Wt.centerline=this.getElemCenterline_(St,Wt),At+=Wt.width}finalize_(){let St=0,At=0;for(let Nt=0,Wt;Wt=this.rows[Nt];Nt++)Wt.yPos=At,Wt.xPos=this.startX,At+=Wt.height,St=Math.max(St,Wt.widthWithConnectedBlocks),this.recordElemPositions_(Wt);if(this.outputConnection&&this.block_.nextConnection){const Nt=this.block_.nextConnection.targetBlock();Nt&&(St=Math.max(St,Nt.getHeightWidth().width))}this.widthWithChildren=St+this.startX,this.height=At,this.startY=this.topRow.capline,this.bottomRow.baseline=At-this.bottomRow.descenderHeight}},T$=class extends Zu{constructor(St,At,Nt,Wt){let cn=St?St.workspace.id:void 0;Wt&&Wt.getType()===Pr.types.WORKSPACE&&(cn=Wt.getLocation().id),super(cn),this.type=Wy,this.blockId=St==null?void 0:St.id,this.oldNode=Nt||void 0,this.newNode=Wt,this.isCursor=At}toJson(){const St=super.toJson();if(this.isCursor===void 0)throw Error("Whether this is a cursor event or not is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newNode)throw Error("The new node is undefined. Either pass a node to the constructor, or call fromJson");return St.isCursor=this.isCursor,St.blockId=this.blockId,St.oldNode=this.oldNode,St.newNode=this.newNode,St}fromJson(St){vt("Blockly.Events.MarkerMove.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(St),this.isCursor=St.isCursor,this.blockId=St.blockId,this.oldNode=St.oldNode,this.newNode=St.newNode}static fromJson(St,At,Nt){return At=super.fromJson(St,At,Nt??new T$),At.isCursor=St.isCursor,At.blockId=St.blockId,At.oldNode=St.oldNode,At.newNode=St.newNode,At}};wo(Hr.EVENT,Wy,T$);var mx="blocklyCursor",gx="blocklyMarker",Ox=.75,E$=class{constructor(St,At,Nt){this.workspace=St,this.marker=Nt,this.markerSvgRect_=this.markerSvgLine_=this.markerInput_=this.markerBlock_=this.svgGroup_=this.markerSvg_=this.currentMarkerSvg=this.parent_=null,this.constants_=At,St=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=Nt.colour||St}getSvgRoot(){return this.svgGroup_}getMarker(){return this.marker}isCursor(){return this.marker.type==="cursor"}createDom(){const St=this.isCursor()?mx:gx;return this.svgGroup_=Mn(ar.G,{class:St}),this.createDomInternal_(),this.svgGroup_}setParent_(St){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),St.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),St.setMarkerSvg(this.getSvgRoot())),this.parent_=St}draw(St,At){if(At){this.constants_=this.workspace.getRenderer().getConstants();var Nt=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker.colour||Nt,this.applyColour_(At),this.showAtLocation_(At),this.fireMarkerEvent_(St,At),St=this.currentMarkerSvg.childNodes[0],St!==void 0&&St.beginElement&&St.beginElement()}else this.hide()}showAtLocation_(St){const At=St.getLocation().type;St.getType()===Pr.types.BLOCK?this.showWithBlock_(St):St.getType()===Pr.types.OUTPUT?this.showWithOutput_(St):At===ro.INPUT_VALUE?this.showWithInput_(St):At===ro.NEXT_STATEMENT?this.showWithNext_(St):St.getType()===Pr.types.PREVIOUS?this.showWithPrevious_(St):St.getType()===Pr.types.FIELD?this.showWithField_(St):St.getType()===Pr.types.WORKSPACE?this.showWithCoordinates_(St):St.getType()===Pr.types.STACK&&this.showWithStack_(St)}showWithBlockPrevOutput_(St){St=St.getSourceBlock();const At=St.width;var Nt=St.height,Wt=Nt*Ox;const cn=this.constants_.CURSOR_BLOCK_PADDING;St.previousConnection?(Nt=this.constants_.shapeFor(St.previousConnection),this.positionPrevious_(At,cn,Wt,Nt)):St.outputConnection?(Wt=this.constants_.shapeFor(St.outputConnection),this.positionOutput_(At,Nt,Wt)):this.positionBlock_(At,cn,Wt),this.setParent_(St),this.showCurrent_()}showWithBlock_(St){this.showWithBlockPrevOutput_(St)}showWithPrevious_(St){this.showWithBlockPrevOutput_(St)}showWithOutput_(St){this.showWithBlockPrevOutput_(St)}showWithCoordinates_(St){var At=St.getWsCoordinate();St=At.x,At=At.y,this.workspace.RTL&&(St-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(St,At,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace),this.showCurrent_()}showWithField_(St){St=St.getLocation();const At=St.getSize().width,Nt=St.getSize().height;this.positionRect_(0,0,At,Nt),this.setParent_(St),this.showCurrent_()}showWithInput_(St){St=St.getLocation();const At=St.getSourceBlock();this.positionInput_(St),this.setParent_(At),this.showCurrent_()}showWithNext_(St){var At=St.getLocation();St=At.getSourceBlock();let Nt=0;At=At.getOffsetInBlock().y;const Wt=St.getHeightWidth().width;this.workspace.RTL&&(Nt=-Wt),this.positionLine_(Nt,At,Wt),this.setParent_(St),this.showCurrent_()}showWithStack_(St){St=St.getLocation();var At=St.getHeightWidth();const Nt=At.width+this.constants_.CURSOR_STACK_PADDING;At=At.height+this.constants_.CURSOR_STACK_PADDING;const Wt=-this.constants_.CURSOR_STACK_PADDING/2,cn=-this.constants_.CURSOR_STACK_PADDING/2;let vn=Wt;this.workspace.RTL&&(vn=-(Nt+Wt)),this.positionRect_(vn,cn,Nt,At),this.setParent_(St),this.showCurrent_()}showCurrent_(){this.hide(),this.currentMarkerSvg&&(this.currentMarkerSvg.style.display="")}positionBlock_(St,At,Nt){if(St=ls(-At,Nt)+eo("V",-At)+eo("H",St+2*At)+eo("V",Nt),!this.markerBlock_)throw Error("createDom should be called before positioning the marker");this.markerBlock_.setAttribute("d",St),this.workspace.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionInput_(St){const At=St.getOffsetInBlock().x,Nt=St.getOffsetInBlock().y;St=Vs(0,0)+this.constants_.shapeFor(St).pathDown,this.markerInput_.setAttribute("d",St),this.markerInput_.setAttribute("transform","translate("+At+","+Nt+")"+(this.workspace.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_}positionLine_(St,At,Nt){if(!this.markerSvgLine_)throw Error("createDom should be called before positioning the line");this.markerSvgLine_.setAttribute("x",`${St}`),this.markerSvgLine_.setAttribute("y",`${At}`),this.markerSvgLine_.setAttribute("width",`${Nt}`),this.currentMarkerSvg=this.markerSvgLine_}positionOutput_(St,At,Nt){if(!this.markerBlock_)throw Error("createDom should be called before positioning the output");St=ls(St,0)+eo("h",-(St-Nt.width))+eo("v",this.constants_.TAB_OFFSET_FROM_TOP)+Nt.pathDown+eo("V",At)+eo("H",St),this.markerBlock_.setAttribute("d",St),this.workspace.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionPrevious_(St,At,Nt,Wt){if(!this.markerBlock_)throw Error("createDom should be called before positioning the previous connection marker");St=ls(-At,Nt)+eo("V",-At)+eo("H",this.constants_.NOTCH_OFFSET_LEFT)+Wt.pathLeft+eo("H",St+2*At)+eo("V",Nt),this.markerBlock_.setAttribute("d",St),this.workspace.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionRect_(St,At,Nt,Wt){if(!this.markerSvgRect_)throw Error("createDom should be called before positioning the rect");this.markerSvgRect_.setAttribute("x",`${St}`),this.markerSvgRect_.setAttribute("y",`${At}`),this.markerSvgRect_.setAttribute("width",`${Nt}`),this.markerSvgRect_.setAttribute("height",`${Wt}`),this.currentMarkerSvg=this.markerSvgRect_}flipRtl_(St){St.setAttribute("transform","scale(-1 1)")}hide(){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before hiding the marker");this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"}fireMarkerEvent_(St,At){const Nt=At.getSourceBlock();St=new(Wr(Wy))(Nt,this.isCursor(),St,At),Gr(St)}getBlinkProperties_(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}}createDomInternal_(){if(this.markerSvg_=Mn(ar.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=Mn(ar.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=Mn(ar.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.markerSvg_),this.markerInput_=Mn(ar.PATH,{transform:"",style:"display: none"},this.markerSvg_),this.markerBlock_=Mn(ar.PATH,{transform:"",style:"display: none",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){const St=this.getBlinkProperties_();Mn(ar.ANIMATE,St,this.markerSvgLine_),Mn(ar.ANIMATE,St,this.markerInput_),Mn(ar.ANIMATE,Object.assign({},St,{attributeName:"stroke"}),this.markerBlock_)}return this.markerSvg_}applyColour_(St){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before applying color to the markerj");this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(St=this.colour_+";transparent;transparent;",this.markerSvgLine_.firstElementChild.setAttribute("values",St),this.markerInput_.firstElementChild.setAttribute("values",St),this.markerBlock_.firstElementChild.setAttribute("values",St))}dispose(){this.svgGroup_&&Sr(this.svgGroup_)}},Kv=class{constructor(St,At,Nt){this.markerSvg=this.cursorSvg=null,this.constants=Nt,this.style=At,this.svgRoot=St,this.svgPath=Mn(ar.PATH,{class:"blocklyPath"},this.svgRoot)}setPath(St){this.svgPath.setAttribute("d",St)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)")}setCursorSvg(St){St?(this.svgRoot.appendChild(St),this.cursorSvg=St):this.cursorSvg=null}setMarkerSvg(St){St?(this.cursorSvg?this.svgRoot.insertBefore(St,this.cursorSvg):this.svgRoot.appendChild(St),this.markerSvg=St):this.markerSvg=null}applyColour(St){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(St.isShadow()),this.updateDisabled_(!St.isEnabled()||St.getInheritedDisabled())}setStyle(St){this.style=St}setClass_(St,At){St&&(At?ir(this.svgRoot,St):tr(this.svgRoot,St))}updateHighlighted(St){St?this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"):this.svgPath.setAttribute("filter","none")}updateShadow_(St){St&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))}updateDisabled_(St){this.setClass_("blocklyDisabled",St),St&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")}updateSelected(St){this.setClass_("blocklySelected",St)}updateDraggingDelete(St){this.setClass_("blocklyDraggingDelete",St)}updateInsertionMarker(St){this.setClass_("blocklyInsertionMarker",St)}updateMovable(St){this.setClass_("blocklyDraggable",St)}updateReplacementFade(St){this.setClass_("blocklyReplaceable",St)}updateShapeForInputHighlight(St,At){}},qT="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",$u=class{constructor(St){this.activeCandidate=this.lastMarker=this.lastOnStack=null,this.wouldDeleteBlock=!1,this.fadedBlock=this.highlightedBlock=this.markerConnection=null,Bn(St),this.topBlock=St,this.workspace=St.workspace,this.firstMarker=this.createMarkerBlock(this.topBlock),this.availableConnections=this.initAvailableConnections()}dispose(){this.availableConnections.length=0,Fo();try{this.firstMarker&&this.firstMarker.dispose(),this.lastMarker&&this.lastMarker.dispose()}finally{vo()}}updateAvailableConnections(){this.availableConnections=this.initAvailableConnections()}wouldConnectBlock(){return!!this.activeCandidate}applyConnections(){if(this.activeCandidate){Fo(),this.hidePreview(),vo();var{local:St,closest:At}=this.activeCandidate;if(St.connect(At),this.topBlock.rendered){const Nt=St.isSuperior()?At:St;Mu(Nt.getSourceBlock()),this.topBlock.getRootBlock().bringToFront()}}}update(St,At){const Nt=this.getCandidate(St);((this.wouldDeleteBlock=this.shouldDelete(!!Nt,At))||this.shouldUpdatePreviews(Nt,St))&&(Fo(),this.maybeHidePreview(Nt),this.maybeShowPreview(Nt),vo())}createMarkerBlock(St){var At=St.type;Fo();let Nt;try{if(Nt=this.workspace.newBlock(At),Nt.setInsertionMarker(!0),St.saveExtraState){var Wt=St.saveExtraState();Wt&&Nt.loadExtraState&&Nt.loadExtraState(Wt)}else if(St.mutationToDom){const cn=St.mutationToDom();cn&&Nt.domToMutation&&Nt.domToMutation(cn)}for(At=0;At<St.inputList.length;At++){const cn=St.inputList[At];if(cn.name===l0)continue;const vn=Nt.inputList[At];if(!vn)throw Error(qT.replace("%1","an input"));for(Wt=0;Wt<cn.fieldRow.length;Wt++){const Pn=cn.fieldRow[Wt],qn=vn.fieldRow[Wt];if(!qn)throw Error(qT.replace("%1","a field"));qn.setValue(Pn.getValue())}}Nt.setCollapsed(St.isCollapsed()),Nt.setInputsInline(St.getInputsInline()),Nt.initSvg(),Nt.getSvgRoot().setAttribute("visibility","hidden")}finally{vo()}return Nt}initAvailableConnections(){const St=this.topBlock.getConnections_(!1),At=this.topBlock.lastConnectionInStack(!0);if(At&&At!==this.topBlock.nextConnection){if(St.push(At),this.lastOnStack=At,this.lastMarker){Fo();try{this.lastMarker.dispose()}finally{vo()}}this.lastMarker=this.createMarkerBlock(At.getSourceBlock())}return St}shouldUpdatePreviews(St,At){if(!St)return!!this.activeCandidate;if(!this.activeCandidate)return!0;const{local:Nt,closest:Wt}=this.activeCandidate;if(Wt===St.closest&&Nt===St.local)return!1;const cn=Nt.x+At.x-Wt.x;return At=Nt.y+At.y-Wt.y,St.radius<Math.sqrt(cn*cn+At*At)-dt.config$$module$build$src$core$config.currentConnectionPreference}getCandidate(St){this.markerConnection&&this.markerConnection.isConnected()||this.updateAvailableConnections();let At=this.getStartRadius(),Nt=null;for(let Wt=0;Wt<this.availableConnections.length;Wt++){const cn=this.availableConnections[Wt],vn=cn.closest(At,St);vn.connection&&(Nt={closest:vn.connection,local:cn,radius:vn.radius},At=vn.radius)}return Nt}getStartRadius(){return this.activeCandidate?dt.config$$module$build$src$core$config.connectingSnapRadius:dt.config$$module$build$src$core$config.snapRadius}shouldDelete(St,At){return At&&this.workspace.getComponentManager().hasCapability(At.id,Js.Capability.DELETE_AREA)?At.wouldDelete(this.topBlock,St):!1}maybeShowPreview(St){if(!this.wouldDeleteBlock&&St){var At=St.closest,Nt;At===((Nt=this.activeCandidate)==null?void 0:Nt.closest)||At.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.activeCandidate=St,this.showPreview(this.activeCandidate))}}showPreview(St){const At=this.workspace.getRenderer();switch(At.getConnectionPreviewMethod(St.closest,St.local,this.topBlock)){case $u.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline(St);break;case $u.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker(St);break;case $u.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade(St)}At.shouldHighlightConnection(St.closest)&&St.closest.highlight()}maybeHidePreview(St){if(!St)this.hidePreview();else if(this.activeCandidate){const At=this.activeCandidate.local!==St.local;(this.activeCandidate.closest!==St.closest||At||this.wouldDeleteBlock)&&this.hidePreview()}this.activeCandidate=this.markerConnection=null}hidePreview(){let St;const At=(St=this.activeCandidate)==null?void 0:St.closest;At&&At.targetBlock()&&this.workspace.getRenderer().shouldHighlightConnection(At)&&At.unhighlight(),this.hideReplacementFade(),this.hideInsertionInputOutline(),this.hideInsertionMarker()}showInsertionMarker(St){const{local:At,closest:Nt}=St;let Wt=(St=this.lastOnStack&&At===this.lastOnStack)?this.lastMarker:this.firstMarker;if(!Wt)throw Error("Cannot show the insertion marker because there is no insertion marker block");let cn;try{cn=Wt.getMatchingConnection(At.getSourceBlock(),At)}catch{if(this.firstMarker=this.createMarkerBlock(this.topBlock),Wt=St?this.lastMarker:this.firstMarker,!Wt)throw Error("Cannot show the insertion marker because there is no insertion marker block");cn=Wt.getMatchingConnection(At.getSourceBlock(),At)}if(!cn)throw Error("Cannot show the insertion marker because there is no associated connection");if(cn===this.markerConnection)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");Wt.render(),Wt.rendered=!0,Wt.getSvgRoot().setAttribute("visibility","visible"),cn&&Nt&&Wt.positionNearConnection(cn,Nt),Nt&&cn.connect(Nt),this.markerConnection=cn}hideInsertionMarker(){if(this.markerConnection){var St=this.markerConnection,At=St.getSourceBlock(),Nt=At.previousConnection,Wt=At.outputConnection,cn=St===At.nextConnection;if(Wt=St.type===ro.INPUT_VALUE&&!(Wt&&Wt.targetConnection),cn&&(!Nt||!Nt.targetConnection)||Wt?St.targetBlock().unplug(!1):St.type!==ro.NEXT_STATEMENT||cn?At.unplug(!0):((cn=St.targetConnection)&&cn.getSourceBlock().unplug(!1),Nt=Nt?Nt.targetConnection:null,At.unplug(!0),Nt&&cn&&Nt.connect(cn)),St.targetConnection)throw Error("markerConnection still connected at the end of disconnectInsertionMarker");this.markerConnection=null,(St=At.getSvgRoot())&&St.setAttribute("visibility","hidden")}}showInsertionInputOutline(St){St=St.closest,this.highlightedBlock=St.getSourceBlock(),this.highlightedBlock.highlightShapeForInput(St,!0)}hideInsertionInputOutline(){if(this.highlightedBlock){if(!this.activeCandidate)throw Error("Cannot hide the insertion marker outline because there is no active candidate");this.highlightedBlock.highlightShapeForInput(this.activeCandidate.closest,!1),this.highlightedBlock=null}}showReplacementFade(St){if(this.fadedBlock=St.closest.targetBlock(),!this.fadedBlock)throw Error("Cannot show the replacement fade because the closest connection does not have a target block");this.fadedBlock.fadeForReplacement(!0)}hideReplacementFade(){this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null)}getInsertionMarkers(){const St=[];return this.firstMarker&&St.push(this.firstMarker),this.lastMarker&&St.push(this.lastMarker),St}};(function(St){St=St.PREVIEW_TYPE||(St.PREVIEW_TYPE={}),St[St.INSERTION_MARKER=0]="INSERTION_MARKER",St[St.INPUT_OUTLINE=1]="INPUT_OUTLINE",St[St.REPLACEMENT_FADE=2]="REPLACEMENT_FADE"})($u||($u={})),$u.PREVIEW_TYPE;var T0=class{constructor(St){this.overrides=null,this.name=St}getClassName(){return this.name+"-renderer"}init(St,At){this.constants_=this.makeConstants_(),At&&(this.overrides=At,Object.assign(this.constants_,At)),this.constants_.setTheme(St),this.constants_.init()}createDom(St,At){this.constants_.createDom(St,this.name+"-"+At.name,"."+this.getClassName()+"."+At.getClassName())}refreshDom(St,At){const Nt=this.getConstants();Nt.dispose(),this.constants_=this.makeConstants_(),this.overrides&&Object.assign(this.constants_,this.overrides),this.constants_.randomIdentifier=Nt.randomIdentifier,this.constants_.setTheme(At),this.constants_.init(),this.createDom(St,At)}dispose(){this.constants_&&this.constants_.dispose()}makeConstants_(){return new S0}makeRenderInfo_(St){return new kO(this,St)}makeDrawer_(St,At){return new $0(St,At)}makeDebugger_(){return new Su(this.getConstants())}makeMarkerDrawer(St,At){return new E$(St,this.getConstants(),At)}makePathObject(St,At){return new Kv(St,At,this.constants_)}getConstants(){return this.constants_}shouldHighlightConnection(St){return!0}orphanCanConnectAtEnd(St,At,Nt){return!!Ko.getConnectionForOrphanedConnection(St,Nt===ro.OUTPUT_VALUE?At.outputConnection:At.previousConnection)}getConnectionPreviewMethod(St,At,Nt){return At.type===ro.OUTPUT_VALUE||At.type===ro.PREVIOUS_STATEMENT?!St.isConnected()||this.orphanCanConnectAtEnd(Nt,St.targetBlock(),At.type)?$u.PREVIEW_TYPE.INSERTION_MARKER:$u.PREVIEW_TYPE.REPLACEMENT_FADE:$u.PREVIEW_TYPE.INSERTION_MARKER}render(St){Qu()&&!St.renderingDebugger&&(St.renderingDebugger=this.makeDebugger_());const At=this.makeRenderInfo_(St);At.measure(),this.makeDrawer_(St,At).draw()}},es={};es.BottomRow=O$,es.Connection=O_,es.ConstantProvider=S0,es.Debug=Su,es.Drawer=$0,es.ExternalValueInput=qv,es.Field=y_,es.Hat=y$,es.Icon=QT,es.InRowSpacer=bu,es.InlineInput=v$,es.InputConnection=zp,es.InputRow=b$,es.JaggedEdge=zT,es.MarkerSvg=E$,es.Measurable=vp,es.NextConnection=jT,es.OutputConnection=XT,es.PathObject=Kv,es.PreviousConnection=YT,es.RenderInfo=kO,es.Renderer=T0,es.RoundCorner=v0,es.Row=O0,es.SpacerRow=S$,es.SquareCorner=b0,es.StatementInput=y0,es.TopRow=$$,es.Types=nr,es.init=rO,es.register=zu,es.stopDebugger=nO,es.unregister=fm;var KT=class{constructor(St,At){this.workspace=St,this.theme=At,this.subscribedWorkspaces_=[],this.componentDB=new Map}getTheme(){return this.theme}setTheme(St){var At=this.theme;this.theme=St,(St=this.workspace.getInjectionDiv())&&(At&&(At=At.getClassName())&&tr(St,At),(At=this.theme.getClassName())&&ir(St,At));for(let Nt=0,Wt;Wt=this.subscribedWorkspaces_[Nt];Nt++)Wt.refreshTheme();for(const[Nt,Wt]of this.componentDB)for(const cn of Wt){St=cn.element,At=cn.propertyName;const vn=this.theme&&this.theme.getComponentStyle(Nt);St.style[At]=vn||""}for(const Nt of this.subscribedWorkspaces_)Nt.hideChaff()}subscribeWorkspace(St){this.subscribedWorkspaces_.push(St)}unsubscribeWorkspace(St){if(!_l(this.subscribedWorkspaces_,St))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.")}subscribe(St,At,Nt){this.componentDB.has(At)||this.componentDB.set(At,[]),this.componentDB.get(At).push({element:St,propertyName:Nt}),At=this.theme&&this.theme.getComponentStyle(At),St.style[Nt]=At||""}unsubscribe(St){if(St)for(const[At,Nt]of this.componentDB){for(let Wt=Nt.length-1;0<=Wt;Wt--)Nt[Wt].element===St&&Nt.splice(Wt,1);Nt.length||this.componentDB.delete(At)}}dispose(){this.subscribedWorkspaces_=this.theme=this.owner_=null,this.componentDB.clear()}},x$="VARIABLE_DYNAMIC",Em={};Em.CATEGORY_NAME=x$,Em.flyoutCategory=n_,Em.flyoutCategoryBlocks=Lp,Em.onCreateVariableButtonClick_Colour=iO,Em.onCreateVariableButtonClick_Number=yl,Em.onCreateVariableButtonClick_String=pm;var JT=class{canConnect(St,At,Nt,Wt){return this.canConnectWithReason(St,At,Nt,Wt)===Ko.CAN_CONNECT}canConnectWithReason(St,At,Nt,Wt){const cn=this.doSafetyChecks(St,At);return cn!==Ko.CAN_CONNECT?cn:this.doTypeChecks(St,At)?Nt&&!this.doDragChecks(St,At,Wt||0)?Ko.REASON_DRAG_CHECKS_FAILED:Ko.CAN_CONNECT:Ko.REASON_CHECKS_FAILED}getErrorMessage(St,At,Nt){switch(St){case Ko.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case Ko.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case Ko.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case Ko.REASON_TARGET_NULL:return"Target connection is null.";case Ko.REASON_CHECKS_FAILED:return"Connection checks failed. "+(At+" expected "+At.getCheck()+", found "+Nt.getCheck());case Ko.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case Ko.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";case Ko.REASON_PREVIOUS_AND_OUTPUT:return"Block would have an output and a previous connection.";default:return"Unknown connection failure: this should never happen!"}}doSafetyChecks(St,At){if(!St||!At)return Ko.REASON_TARGET_NULL;let Nt,Wt,cn;return St.isSuperior()?(Nt=St.getSourceBlock(),Wt=At.getSourceBlock(),cn=At):(Wt=St.getSourceBlock(),Nt=At.getSourceBlock(),cn=St,St=At),Nt===Wt?Ko.REASON_SELF_CONNECTION:cn.type!==g_[St.type]?Ko.REASON_WRONG_TYPE:Nt.workspace!==Wt.workspace?Ko.REASON_DIFFERENT_WORKSPACES:Nt.isShadow()&&!Wt.isShadow()?Ko.REASON_SHADOW_PARENT:cn.type===ro.OUTPUT_VALUE&&Wt.previousConnection&&Wt.previousConnection.isConnected()||cn.type===ro.PREVIOUS_STATEMENT&&Wt.outputConnection&&Wt.outputConnection.isConnected()?Ko.REASON_PREVIOUS_AND_OUTPUT:Ko.CAN_CONNECT}doTypeChecks(St,At){if(St=St.getCheck(),At=At.getCheck(),!St||!At)return!0;for(let Nt=0;Nt<St.length;Nt++)if(At.indexOf(St[Nt])!==-1)return!0;return!1}doDragChecks(St,At,Nt){if(St.distanceFrom(At)>Nt||At.getSourceBlock().isInsertionMarker())return!1;switch(At.type){case ro.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(St,At);case ro.OUTPUT_VALUE:if(At.isConnected()&&!At.targetBlock().isInsertionMarker()||St.isConnected())return!1;break;case ro.INPUT_VALUE:if(At.isConnected()&&!At.targetBlock().isMovable()&&!At.targetBlock().isShadow())return!1;break;case ro.NEXT_STATEMENT:if(At.isConnected()&&!St.getSourceBlock().nextConnection&&!At.targetBlock().isShadow()&&At.targetBlock().nextConnection)return!1;break;default:return!1}return ps.indexOf(At)===-1}canConnectToPrevious_(St,At){return St.targetConnection||ps.indexOf(At)!==-1?!1:At.targetConnection?(St=At.targetBlock(),St.isInsertionMarker()?!St.getPreviousBlock():!1):!0}};wo(Hr.CONNECTION_CHECKER,Fp,JT);var w$=class extends Yy{constructor(St){super(St),this.type=fO,St&&(this.varType=St.type,this.varName=St.name)}toJson(){const St=super.toJson();if(!this.varType)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return St.varType=this.varType,St.varName=this.varName,St}fromJson(St){vt("Blockly.Events.VarDelete.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(St),this.varType=St.varType,this.varName=St.varName}static fromJson(St,At,Nt){return At=super.fromJson(St,At,Nt??new w$),At.varType=St.varType,At.varName=St.varName,At}run(St){const At=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");St?At.deleteVariableById(this.varId):At.createVariable(this.varName,this.varType,this.varId)}};wo(Hr.EVENT,fO,w$);var C$=class extends Yy{constructor(St,At){super(St),this.type=Uy,St&&(this.oldName=St.name,this.newName=typeof At>"u"?"":At)}toJson(){const St=super.toJson();if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");return St.oldName=this.oldName,St.newName=this.newName,St}fromJson(St){vt("Blockly.Events.VarRename.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(St),this.oldName=St.oldName,this.newName=St.newName}static fromJson(St,At,Nt){return At=super.fromJson(St,At,Nt??new C$),At.oldName=St.oldName,At.newName=St.newName,At}run(St){const At=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");St?At.renameVariableById(this.varId,this.newName):At.renameVariableById(this.varId,this.oldName)}};wo(Hr.EVENT,Uy,C$);var A$=class{constructor(St){this.workspace=St,this.variableMap=new Map}clear(){this.variableMap.clear()}renameVariable(St,At){if(St.name!==At){var Nt=this.getVariable(At,St.type),Wt=this.workspace.getAllBlocks(!1);oo(!0);try{Nt&&Nt.getId()!==St.getId()?this.renameVariableWithConflict_(St,At,Nt,Wt):this.renameVariableAndUses_(St,At,Wt)}finally{oo(!1)}}}renameVariableById(St,At){const Nt=this.getVariableById(St);if(!Nt)throw Error("Tried to rename a variable that didn't exist. ID: "+St);this.renameVariable(Nt,At)}renameVariableAndUses_(St,At,Nt){for(Gr(new(Wr(Uy))(St,At)),St.name=At,At=0;At<Nt.length;At++)Nt[At].updateVarName(St)}renameVariableWithConflict_(St,At,Nt,Wt){const cn=St.type;for(At!==Nt.name&&this.renameVariableAndUses_(Nt,At,Wt),At=0;At<Wt.length;At++)Wt[At].renameVarById(St.getId(),Nt.getId());Gr(new(Wr(fO))(St)),_l(this.variableMap.get(cn),St)}createVariable(St,At,Nt){var Wt=this.getVariable(St,At);if(Wt){if(Nt&&Wt.getId()!==Nt)throw Error('Variable "'+St+'" is already in use and its id is "'+Wt.getId()+'" which conflicts with the passed in id, "'+Nt+'".');return Wt}if(Nt&&this.getVariableById(Nt))throw Error('Variable id, "'+Nt+'", is already in use.');return Wt=Nt||xo(),At=At||"",Wt=new Zy(this.workspace,St,At,Wt),St=this.variableMap.get(At)||[],St.push(Wt),this.variableMap.delete(At),this.variableMap.set(At,St),Gr(new(Wr(c_))(Wt)),Wt}deleteVariable(St){const At=St.getId(),Nt=this.variableMap.get(St.type);if(Nt){for(let Wt=0;Wt<Nt.length;Wt++)if(Nt[Wt].getId()===At){Nt.splice(Wt,1),Gr(new(Wr(fO))(St));break}}}deleteVariableById(St){const At=this.getVariableById(St);if(At){var Nt=At.name;const Wt=this.getVariableUsesById(St);for(let cn=0,vn;vn=Wt[cn];cn++)if(vn.type==="procedures_defnoreturn"||vn.type==="procedures_defreturn"){St=String(vn.getFieldValue("NAME")),Nt=To.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",Nt).replace("%2",St),Cm(Nt);return}1<Wt.length?(Nt=To.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(Wt.length)).replace("%2",Nt),Xp(Nt,cn=>{cn&&At&&this.deleteVariableInternal(At,Wt)})):this.deleteVariableInternal(At,Wt)}else console.warn("Can't delete non-existent variable: "+St)}deleteVariableInternal(St,At){const Nt=Ro();Nt||oo(!0);try{for(let Wt=0;Wt<At.length;Wt++)At[Wt].dispose(!0);this.deleteVariable(St)}finally{Nt||oo(!1)}}getVariable(St,At){if(At=this.variableMap.get(At||"")){for(let Nt=0,Wt;Wt=At[Nt];Nt++)if(Nu.equals(Wt.name,St))return Wt}return null}getVariableById(St){for(const[,At]of this.variableMap)for(const Nt of At)if(Nt.getId()===St)return Nt;return null}getVariablesOfType(St){return(St=this.variableMap.get(St||""))?St.slice():[]}getVariableTypes(St){const At=new Set(this.variableMap.keys());if(St&&St.getPotentialVariableMap())for(const Nt of St.getPotentialVariableMap().variableMap.keys())At.add(Nt);return At.has("")||At.add(""),Array.from(At.values())}getAllVariables(){let St=[];for(const At of this.variableMap.values())St=St.concat(At);return St}getAllVariableNames(){return Array.from(this.variableMap.values()).flat().map(St=>St.name)}getVariableUsesById(St){const At=[],Nt=this.workspace.getAllBlocks(!1);for(let Wt=0;Wt<Nt.length;Wt++){const cn=Nt[Wt].getVarModels();if(cn)for(let vn=0;vn<cn.length;vn++)cn[vn].getId()===St&&At.push(Nt[Wt])}return At}},jp=class{get isFlyout(){return this.internalIsFlyout}get isMutator(){return this.internalIsMutator}constructor(St){this.isClearing=this.internalIsMutator=this.internalIsFlyout=this.rendered=!1,this.MAX_UNDO=1024,this.connectionDBList=[],this.topBlocks=[],this.topComments=[],this.commentDB=new Map,this.listeners=[],this.undoStack_=[],this.redoStack_=[],this.blockDB=new Map,this.typedBlocksDB=new Map,this.procedureMap=new HT(this),this.potentialVariableMap=null,this.id=xo(),An(this),this.options=St||new _h({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(So(Hr.CONNECTION_CHECKER,this.options,!0))(this),this.variableMap=new A$(this)}dispose(){this.listeners.length=0,this.clear(),Tn(this)}sortObjects_(St,At){return St=St.getRelativeToSurfaceXY(),At=At.getRelativeToSurfaceXY(),St.y+jp.prototype.sortObjects_.offset*St.x-(At.y+jp.prototype.sortObjects_.offset*At.x)}addTopBlock(St){this.topBlocks.push(St)}removeTopBlock(St){if(!_l(this.topBlocks,St))throw Error("Block not present in workspace's list of top-most blocks.")}getTopBlocks(St){const At=[].concat(this.topBlocks);return St&&1<At.length&&(this.sortObjects_.offset=Math.sin(no(jp.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),At.sort(this.sortObjects_)),At}addTypedBlock(St){this.typedBlocksDB.has(St.type)||this.typedBlocksDB.set(St.type,[]),this.typedBlocksDB.get(St.type).push(St)}removeTypedBlock(St){_l(this.typedBlocksDB.get(St.type),St),this.typedBlocksDB.get(St.type).length||this.typedBlocksDB.delete(St.type)}getBlocksByType(St,At){return this.typedBlocksDB.has(St)?(St=this.typedBlocksDB.get(St).slice(0),At&&St&&1<St.length&&(this.sortObjects_.offset=Math.sin(no(jp.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),St.sort(this.sortObjects_)),St.filter(function(Nt){return!Nt.isInsertionMarker()})):[]}addTopComment(St){this.topComments.push(St),this.commentDB.has(St.id)&&console.warn('Overriding an existing comment on this workspace, with id "'+St.id+'"'),this.commentDB.set(St.id,St)}removeTopComment(St){if(!_l(this.topComments,St))throw Error("Comment not present in workspace's list of top-most comments.");this.commentDB.delete(St.id)}getTopComments(St){const At=[].concat(this.topComments);return St&&1<At.length&&(this.sortObjects_.offset=Math.sin(no(jp.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),At.sort(this.sortObjects_)),At}getAllBlocks(St){if(St){var At=this.getTopBlocks(!0);St=[];for(let Nt=0;Nt<At.length;Nt++)St.push(...At[Nt].getDescendants(!0))}else for(St=this.getTopBlocks(!1),At=0;At<St.length;At++)St.push(...St[At].getChildren(!1));return St.filter(function(Nt){return!Nt.isInsertionMarker()})}clear(){this.isClearing=!0;try{const St=Ro();for(St||oo(!0);this.topBlocks.length;)this.topBlocks[0].dispose(!1);for(;this.topComments.length;)this.topComments[this.topComments.length-1].dispose();St||oo(!1),this.variableMap.clear(),this.potentialVariableMap&&this.potentialVariableMap.clear()}finally{this.isClearing=!1}}renameVariableById(St,At){this.variableMap.renameVariableById(St,At)}createVariable(St,At,Nt){return this.variableMap.createVariable(St,At,Nt)}getVariableUsesById(St){return this.variableMap.getVariableUsesById(St)}deleteVariableById(St){this.variableMap.deleteVariableById(St)}getVariable(St,At){return this.variableMap.getVariable(St,At)}getVariableById(St){return this.variableMap.getVariableById(St)}getVariablesOfType(St){return this.variableMap.getVariablesOfType(St)}getVariableTypes(){return this.variableMap.getVariableTypes(this)}getAllVariables(){return this.variableMap.getAllVariables()}getAllVariableNames(){return this.variableMap.getAllVariableNames()}getWidth(){return 0}newBlock(St,At){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}remainingCapacity(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length}remainingCapacityOfType(St){return this.options.maxInstances?(this.options.maxInstances[St]!==void 0?this.options.maxInstances[St]:1/0)-this.getBlocksByType(St,!1).length:1/0}isCapacityAvailable(St){if(!this.hasBlockLimits())return!0;let At=0;for(const Nt in St){if(St[Nt]>this.remainingCapacityOfType(Nt))return!1;At+=St[Nt]}return!(At>this.remainingCapacity())}hasBlockLimits(){return this.options.maxBlocks!==1/0||!!this.options.maxInstances}getUndoStack(){return this.undoStack_}getRedoStack(){return this.redoStack_}undo(St){var At=St?this.redoStack_:this.undoStack_,Nt=St?this.undoStack_:this.redoStack_;const Wt=At.pop();if(Wt){for(var cn=[Wt];At.length&&Wt.group&&Wt.group===At[At.length-1].group;)cn.push(At.pop());for(At=0;At<cn.length;At++)Nt.push(cn[At]);cn=xl(cn,St),Io(!1);try{for(Nt=0;Nt<cn.length;Nt++)cn[Nt].run(St)}finally{Io(!0)}}}clearUndo(){this.undoStack_.length=0,this.redoStack_.length=0,lu()}addChangeListener(St){return this.listeners.push(St),St}removeChangeListener(St){_l(this.listeners,St)}fireChangeListener(St){if(St.recordUndo)for(this.undoStack_.push(St),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(let At=0;At<this.listeners.length;At++)(0,this.listeners[At])(St)}getBlockById(St){return this.blockDB.get(St)||null}setBlockById(St,At){this.blockDB.set(St,At)}removeBlockById(St){this.blockDB.delete(St)}getCommentById(St){let At;return(At=this.commentDB.get(St))!=null?At:null}allInputsFilled(St){const At=this.getTopBlocks(!1);for(let Nt=0;Nt<At.length;Nt++)if(!At[Nt].allInputsFilled(St))return!1;return!0}getPotentialVariableMap(){return this.potentialVariableMap}createPotentialVariableMap(){this.potentialVariableMap=new A$(this)}getVariableMap(){return this.variableMap}setVariableMap(St){this.variableMap=St}getProcedureMap(){return this.procedureMap}static getById(St){return bn(St)}static getAll(){return En()}};jp.SCAN_ANGLE=3;var yx=100,eE=class{constructor(St){this.parentWorkspace=St,this.sounds=new Map,this.lastSound_=null}dispose(){this.sounds.clear()}load(St,At){if(St.length){try{var Nt=new globalThis.Audio}catch{return}for(let cn=0;cn<St.length;cn++){const vn=St[cn],Pn=vn.match(/\.(\w+)$/);if(Pn&&Nt.canPlayType("audio/"+Pn[1])){var Wt=new globalThis.Audio(vn);break}}Wt&&this.sounds.set(At,Wt)}}preload(){for(const St of this.sounds.values()){St.volume=.01;const At=St.play();if(At!==void 0?At.then(St.pause).catch(function(){}):St.pause(),bo||os)break}}play(St,At){var Nt=this.sounds.get(St);Nt?(St=new Date,this.lastSound_!==null&&St.getTime()-this.lastSound_.getTime()<yx||(this.lastSound_=St,Nt=bo||ko?Nt:Nt.cloneNode(),Nt.volume=At===void 0?1:At,Nt.play())):this.parentWorkspace&&this.parentWorkspace.getAudioManager().play(St,At)}},tE=class{constructor(St){this.workspace=St,this.id="zoomControls",this.zoomResetGroup=this.zoomOutGroup=this.zoomInGroup=this.onZoomOutWrapper=this.onZoomInWrapper=this.onZoomResetWrapper=null,this.HEIGHT=this.WIDTH=32,this.SMALL_SPACING=2,this.LARGE_SPACING=11,this.MARGIN_HORIZONTAL=this.MARGIN_VERTICAL=20,this.svgGroup=null,this.top=this.left=0,this.initialized=!1}createDom(){this.svgGroup=Mn(ar.G,{});const St=String(Math.random()).substring(2);return this.createZoomOutSvg(St),this.createZoomInSvg(St),this.workspace.isMovable()&&this.createZoomResetSvg(St),this.svgGroup}init(){this.workspace.getComponentManager().addComponent({component:this,weight:2,capabilities:[Js.Capability.POSITIONABLE]}),this.initialized=!0}dispose(){this.workspace.getComponentManager().removeComponent("zoomControls"),this.svgGroup&&Sr(this.svgGroup),this.onZoomResetWrapper&&hn(this.onZoomResetWrapper),this.onZoomInWrapper&&hn(this.onZoomInWrapper),this.onZoomOutWrapper&&hn(this.onZoomOutWrapper)}getBoundingRectangle(){let St=this.SMALL_SPACING+2*this.HEIGHT;return this.zoomResetGroup&&(St+=this.LARGE_SPACING+this.HEIGHT),new ws(this.top,this.top+St,this.left,this.left+this.WIDTH)}position(St,At){if(this.initialized){var Nt=hm(this.workspace,St),Wt=this.SMALL_SPACING+2*this.HEIGHT;if(this.zoomResetGroup&&(Wt+=this.LARGE_SPACING+this.HEIGHT),St=Km(Nt,new Ks(this.WIDTH,Wt),this.MARGIN_HORIZONTAL,this.MARGIN_VERTICAL,St,this.workspace),Nt=Nt.vertical,At=vy(St,this.MARGIN_VERTICAL,Nt===Qp.TOP?Tm.DOWN:Tm.UP,At),Nt===Qp.TOP){var cn=this.SMALL_SPACING+this.HEIGHT,vn;(vn=this.zoomInGroup)==null||vn.setAttribute("transform","translate(0, "+cn+")"),this.zoomResetGroup&&this.zoomResetGroup.setAttribute("transform","translate(0, "+(cn+this.LARGE_SPACING+this.HEIGHT)+")")}else{vn=this.zoomResetGroup?this.LARGE_SPACING+this.HEIGHT:0;let qn;(qn=this.zoomInGroup)==null||qn.setAttribute("transform","translate(0, "+vn+")"),vn=vn+this.SMALL_SPACING+this.HEIGHT,(cn=this.zoomOutGroup)==null||cn.setAttribute("transform","translate(0, "+vn+")")}this.top=At.top,this.left=At.left;var Pn;(Pn=this.svgGroup)==null||Pn.setAttribute("transform","translate("+this.left+","+this.top+")")}}createZoomOutSvg(St){this.zoomOutGroup=Mn(ar.G,{class:"blocklyZoom"},this.svgGroup);const At=Mn(ar.CLIPPATH,{id:"blocklyZoomoutClipPath"+St},this.zoomOutGroup);Mn(ar.RECT,{width:32,height:32},At),Mn(ar.IMAGE,{width:zl.width,height:zl.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+St+")"},this.zoomOutGroup).setAttributeNS(ou,"xlink:href",this.workspace.options.pathToMedia+zl.url),this.onZoomOutWrapper=Kt(this.zoomOutGroup,"pointerdown",null,this.zoom.bind(this,-1))}createZoomInSvg(St){this.zoomInGroup=Mn(ar.G,{class:"blocklyZoom"},this.svgGroup);const At=Mn(ar.CLIPPATH,{id:"blocklyZoominClipPath"+St},this.zoomInGroup);Mn(ar.RECT,{width:32,height:32},At),Mn(ar.IMAGE,{width:zl.width,height:zl.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+St+")"},this.zoomInGroup).setAttributeNS(ou,"xlink:href",this.workspace.options.pathToMedia+zl.url),this.onZoomInWrapper=Kt(this.zoomInGroup,"pointerdown",null,this.zoom.bind(this,1))}zoom(St,At){this.workspace.markFocused(),this.workspace.zoomCenter(St),this.fireZoomEvent(),Ct(),At.stopPropagation(),At.preventDefault()}createZoomResetSvg(St){this.zoomResetGroup=Mn(ar.G,{class:"blocklyZoom"},this.svgGroup);const At=Mn(ar.CLIPPATH,{id:"blocklyZoomresetClipPath"+St},this.zoomResetGroup);Mn(ar.RECT,{width:32,height:32},At),Mn(ar.IMAGE,{width:zl.width,height:zl.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+St+")"},this.zoomResetGroup).setAttributeNS(ou,"xlink:href",this.workspace.options.pathToMedia+zl.url),this.onZoomResetWrapper=Kt(this.zoomResetGroup,"pointerdown",null,this.resetZoom.bind(this))}resetZoom(St){this.workspace.markFocused();const At=Math.log(this.workspace.options.zoomOptions.startScale/this.workspace.scale)/Math.log(this.workspace.options.zoomOptions.scaleSpeed);this.workspace.beginCanvasTransition(),this.workspace.zoomCenter(At),this.workspace.scrollCenter(),setTimeout(this.workspace.endCanvasTransition.bind(this.workspace),500),this.fireZoomEvent(),Ct(),St.stopPropagation(),St.preventDefault()}fireZoomEvent(){const St=new(Wr(bm))(null,this.workspace.id,"zoom_controls");Gr(St)}};hu(`
.blocklyZoom>image, .blocklyZoom>svg>image {
  opacity: .4;
}

.blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {
  opacity: .6;
}

.blocklyZoom>image:active, .blocklyZoom>svg>image:active {
  opacity: .8;
}
`);var vx=20,_f=class extends jp{constructor(St,At,Nt){super(St),this.resizeHandlerWrapper=null,this.resizesEnabled=this.isVisible_=this.rendered=!0,this.startScrollY=this.startScrollX=this.scrollY=this.scrollX=0,this.dragDeltaXY=null,this.oldScale=this.scale=1,this.oldLeft=this.oldTop=0,this.workspaceDragSurface=this.blockDragSurface=this.currentGesture_=this.toolbox_=this.flyout=this.scrollbar=this.trashcan=null,this.isDragSurfaceActive=!1,this.inverseScreenCTM=this.targetWorkspace=this.configureContextMenu=this.lastRecordedPageScroll=this.injectionDiv=null,this.inverseScreenCTMDirty=!0,this.highlightedBlocks=[],this.toolboxCategoryCallbacks=new Map,this.flyoutButtonCallbacks=new Map,this.cachedParentSvg=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements=[],this.dragTargetAreas=[],this.zoomControls_=null,this.metricsManager=new(So(Hr.METRICS_MANAGER,St,!0))(this),this.getMetrics=St.getMetrics||this.metricsManager.getMetrics.bind(this.metricsManager),this.setMetrics=St.setMetrics||_f.setTopLevelWorkspaceMetrics_,this.componentManager=new Js,this.connectionDBList=IO.init(this.connectionChecker),At&&(this.blockDragSurface=At),Nt&&(this.workspaceDragSurface=Nt),this.useWorkspaceDragSurface=!!this.workspaceDragSurface,this.audioManager=new eE(St.parentWorkspace),this.grid=this.options.gridPattern?new g$(this.options.gridPattern,St.gridOptions):null,this.markerManager=new qy(this),dt.module$build$src$core$variables&&Yp&&this.registerToolboxCategoryCallback(Dv,Yp),Em&&n_&&this.registerToolboxCategoryCallback(x$,n_),dt.module$build$src$core$procedures&&dm&&(this.registerToolboxCategoryCallback(Zv,dm),this.addChangeListener(bs)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new KT(this,this.options.theme||Hv),this.themeManager_.subscribeWorkspace(this);let Wt;this.renderer=rO(this.options.renderer||"geras",this.getTheme(),(Wt=this.options.rendererOverrides)!=null?Wt:void 0),this.cachedParentSvgSize=new Ks(0,0)}getMarkerManager(){return this.markerManager}getMetricsManager(){return this.metricsManager}setMetricsManager(St){this.metricsManager=St,this.getMetrics=this.metricsManager.getMetrics.bind(this.metricsManager)}getComponentManager(){return this.componentManager}setCursorSvg(St){this.markerManager.setCursorSvg(St)}setMarkerSvg(St){this.markerManager.setMarkerSvg(St)}getMarker(St){return this.markerManager?this.markerManager.getMarker(St):null}getCursor(){return this.markerManager?this.markerManager.getCursor():null}getRenderer(){return this.renderer}getThemeManager(){return this.themeManager_}getTheme(){return this.themeManager_.getTheme()}setTheme(St){St||(St=Hv),this.themeManager_.setTheme(St)}refreshTheme(){this.svgGroup_&&this.renderer.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(At){return!!At.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);const St=new(Wr(zy))(this.getTheme().name,this.id);Gr(St)}updateBlockStyles_(St){for(let At=0,Nt;Nt=St[At];At++){const Wt=Nt.getStyleName();if(Wt){const cn=Nt;cn.setStyle(Wt),cn.mutator&&cn.mutator.updateBlockStyle()}}}getInverseScreenCTM(){if(this.inverseScreenCTMDirty){const St=this.getParentSvg().getScreenCTM();St&&(this.inverseScreenCTM=St.inverse(),this.inverseScreenCTMDirty=!1)}return this.inverseScreenCTM}updateInverseScreenCTM(){this.inverseScreenCTMDirty=!0}isVisible(){return this.isVisible_}getSvgXY(St){let At=0,Nt=0,Wt=1;(Jr(this.getCanvas(),St)||Jr(this.getBubbleCanvas(),St))&&(Wt=this.scale);do{const cn=Ll(St);(St===this.getCanvas()||St===this.getBubbleCanvas())&&(Wt=1),At+=cn.x*Wt,Nt+=cn.y*Wt,St=St.parentNode}while(St&&St!==this.getParentSvg());return new qr(At,Nt)}getCachedParentSvgSize(){const St=this.cachedParentSvgSize;return new Ks(St.width,St.height)}getOriginOffsetInPixels(){return w_(this.getCanvas())}getInjectionDiv(){if(!this.injectionDiv){let St=this.svgGroup_;for(;St;){if((" "+(St.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!==-1){this.injectionDiv=St;break}St=St.parentNode}}return this.injectionDiv}getBlockCanvas(){return this.svgBlockCanvas_}setResizeHandlerWrapper(St){this.resizeHandlerWrapper=St}createDom(St){return this.svgGroup_=Mn(ar.G,{class:"blocklyWorkspace"}),St&&(this.svgBackground_=Mn(ar.RECT,{height:"100%",width:"100%",class:St},this.svgGroup_),St==="blocklyMainBackground"&&this.grid?this.svgBackground_.style.fill="url(#"+this.grid.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=Mn(ar.G,{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=Mn(ar.G,{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||(Kt(this.svgGroup_,"pointerdown",this,this.onMouseDown_,!1),document.body.addEventListener("wheel",function(){}),Kt(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(So(Hr.TOOLBOX,this.options,!0))(this)),this.grid&&this.grid.update(this.scale),this.recordDragTargets(),(St=So(Hr.CURSOR,this.options))&&this.markerManager.setCursor(new St),this.renderer.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_}dispose(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&Sr(this.svgGroup_),this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout&&(this.flyout.dispose(),this.flyout=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&this.zoomControls_.dispose(),this.audioManager&&this.audioManager.dispose(),this.grid&&(this.grid=null),this.renderer.dispose(),this.markerManager&&this.markerManager.dispose(),super.dispose(),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||this.themeManager_.dispose()),this.connectionDBList.length=0,this.toolboxCategoryCallbacks.clear(),this.flyoutButtonCallbacks.clear(),!this.options.parentWorkspace){const St=this.getParentSvg();St&&St.parentNode&&Sr(St.parentNode)}this.resizeHandlerWrapper&&(hn(this.resizeHandlerWrapper),this.resizeHandlerWrapper=null)}addTrashcan(){this.trashcan=_f.newTrashcan(this);const St=this.trashcan.createDom();this.svgGroup_.insertBefore(St,this.svgBlockCanvas_)}static newTrashcan(St){throw Error("The implementation of newTrashcan should be monkey-patched in by blockly.ts")}addZoomControls(){this.zoomControls_=new tE(this);const St=this.zoomControls_.createDom();this.svgGroup_.appendChild(St)}addFlyout(St){const At=new _h({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return At.toolboxPosition=this.options.toolboxPosition,this.flyout=this.horizontalLayout?new(So(Hr.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(At):new(So(Hr.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(At),this.flyout.autoClose=!1,this.flyout.getWorkspace().setVisible(!0),this.flyout.createDom(St)}getFlyout(St){return this.flyout||St?this.flyout:this.toolbox_?this.toolbox_.getFlyout():null}getToolbox(){return this.toolbox_}updateScreenCalculations_(){this.updateInverseScreenCTM(),this.recordDragTargets()}resizeContents(){this.resizesEnabled&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())}resize(){this.toolbox_&&this.toolbox_.position(),this.flyout&&this.flyout.position();const St=this.componentManager.getComponents(Js.Capability.POSITIONABLE,!0),At=this.getMetricsManager().getUiMetrics(),Nt=[];for(let Wt=0,cn;cn=St[Wt];Wt++){cn.position(At,Nt);const vn=cn.getBoundingRectangle();vn&&Nt.push(vn)}this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()}updateScreenCalculationsIfScrolled(){const St=Kp();qr.equals(this.lastRecordedPageScroll,St)||(this.lastRecordedPageScroll=St,this.updateScreenCalculations_())}getCanvas(){return this.svgBlockCanvas_}setCachedParentSvgSize(St,At){const Nt=this.getParentSvg();St!=null&&(this.cachedParentSvgSize.width=St,Nt.setAttribute("data-cached-width",St.toString())),At!=null&&(this.cachedParentSvgSize.height=At,Nt.setAttribute("data-cached-height",At.toString()))}getBubbleCanvas(){return this.svgBubbleCanvas_}getParentSvg(){if(!this.cachedParentSvg){let St=this.svgGroup_;for(;St;){if(St.tagName==="svg"){this.cachedParentSvg=St;break}St=St.parentNode}}return this.cachedParentSvg}maybeFireViewportChangeEvent(){if(ss()){var St=this.scale,At=-this.scrollY,Nt=-this.scrollX;if(!(St===this.oldScale&&1>Math.abs(At-this.oldTop)&&1>Math.abs(Nt-this.oldLeft))){var Wt=new(Wr(u_))(At,Nt,St,this.id,this.oldScale);this.oldScale=St,this.oldTop=At,this.oldLeft=Nt,Gr(Wt)}}}translate(St,At){if(this.useWorkspaceDragSurface&&this.isDragSurfaceActive){var Nt;(Nt=this.workspaceDragSurface)==null||Nt.translateSurface(St,At)}else Nt="translate("+St+","+At+") scale("+this.scale+")",this.svgBlockCanvas_.setAttribute("transform",Nt),this.svgBubbleCanvas_.setAttribute("transform",Nt);this.blockDragSurface&&this.blockDragSurface.translateAndScaleGroup(St,At,this.scale),this.grid&&this.grid.moveTo(St,At),this.maybeFireViewportChangeEvent()}resetDragSurface(){if(this.useWorkspaceDragSurface){this.isDragSurfaceActive=!1;var St=this.workspaceDragSurface.getSurfaceTranslation();this.workspaceDragSurface.clearAndHide(this.svgGroup_),St="translate("+St.x+","+St.y+") scale("+this.scale+")",this.svgBlockCanvas_.setAttribute("transform",St),this.svgBubbleCanvas_.setAttribute("transform",St)}}setupDragSurface(){if(this.useWorkspaceDragSurface&&!this.isDragSurfaceActive){this.isDragSurfaceActive=!0;var St=this.svgBlockCanvas_.previousSibling,At,Nt=parseInt((At=this.getParentSvg().getAttribute("width"))!=null?At:"0"),Wt;At=parseInt((Wt=this.getParentSvg().getAttribute("height"))!=null?Wt:"0"),Wt=Ll(this.getCanvas()),this.workspaceDragSurface.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),St,Nt,At,this.scale),this.workspaceDragSurface.translateSurface(Wt.x,Wt.y)}}getBlockDragSurface(){return this.blockDragSurface}getWidth(){const St=this.getMetrics();return St?St.viewWidth/this.scale:0}setVisible(St){if(this.isVisible_=St,this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible(St),this.getFlyout()&&this.getFlyout().setContainerVisible(St),this.getParentSvg().style.display=St?"block":"none",this.toolbox_&&this.toolbox_.setVisible(St),St){St=this.getAllBlocks(!1);for(let At=St.length-1;0<=At;At--)St[At].markDirty();this.render(),this.toolbox_&&this.toolbox_.position()}else this.hideChaff(!0)}render(){for(var St=this.getAllBlocks(!1),At=St.length-1;0<=At;At--)St[At].render(!1);if(this.currentGesture_)for(St=this.currentGesture_.getInsertionMarkers(),At=0;At<St.length;At++)St[At].render(!1);this.markerManager.updateMarkers()}highlightBlock(St,At){if(At===void 0){for(let Nt=0,Wt;Wt=this.highlightedBlocks[Nt];Nt++)Wt.setHighlighted(!1);this.highlightedBlocks.length=0}(St=St?this.getBlockById(St):null)&&((At=At===void 0||At)?this.highlightedBlocks.indexOf(St)===-1&&this.highlightedBlocks.push(St):_l(this.highlightedBlocks,St),St.setHighlighted(At))}paste(St){if(!this.rendered||!St.type&&!St.tagName)return null;this.currentGesture_&&this.currentGesture_.cancel();const At=Ro();return At||oo(!0),St=St.type?this.pasteBlock_(null,St):St.tagName.toLowerCase()==="comment"?this.pasteWorkspaceComment_(St):this.pasteBlock_(St,null),oo(At),St}pasteBlock_(St,At){Fo();let Nt;try{let Wt=0,cn=0;if(St){Nt=Gu(St,this);let vn;Wt=parseInt((vn=St.getAttribute("x"))!=null?vn:"0"),this.RTL&&(Wt=-Wt);let Pn;cn=parseInt((Pn=St.getAttribute("y"))!=null?Pn:"0")}else At&&(Nt=rp(At,this),Wt=At.x||10,this.RTL&&(Wt=this.getWidth()-Wt),cn=At.y||10);if(!isNaN(Wt)&&!isNaN(cn)){let vn;do{vn=!1;const Pn=this.getAllBlocks(!1);for(let qn=0,Ar;Ar=Pn[qn];qn++){const Kr=Ar.getRelativeToSurfaceXY();if(1>=Math.abs(Wt-Kr.x)&&1>=Math.abs(cn-Kr.y)){vn=!0;break}}if(!vn){const qn=Nt.getConnections_(!1);for(let Ar=0,Kr;Kr=qn[Ar];Ar++)if(Kr.closest(dt.config$$module$build$src$core$config.snapRadius,new qr(Wt,cn)).connection){vn=!0;break}}vn&&(Wt=this.RTL?Wt-dt.config$$module$build$src$core$config.snapRadius:Wt+dt.config$$module$build$src$core$config.snapRadius,cn+=2*dt.config$$module$build$src$core$config.snapRadius)}while(vn);Nt.moveTo(new qr(Wt,cn))}}finally{vo()}return ss()&&!Nt.isShadow()&&Gr(new(Wr(Tl))(Nt)),Nt.select(),Nt}pasteWorkspaceComment_(St){Fo();let At;try{At=Il.fromXmlRendered(St,this);let Nt,Wt=parseInt((Nt=St.getAttribute("x"))!=null?Nt:"0"),cn,vn=parseInt((cn=St.getAttribute("y"))!=null?cn:"0");isNaN(Wt)||isNaN(vn)||(this.RTL&&(Wt=-Wt),At.moveBy(Wt+50,vn+50))}finally{vo()}return ss()&&gp.fireCreateEvent(At),At.select(),At}refreshToolboxSelection(){const St=this.isFlyout?this.targetWorkspace:this;St&&!St.currentGesture_&&St.toolbox_&&St.toolbox_.getFlyout()&&St.toolbox_.refreshSelection()}renameVariableById(St,At){super.renameVariableById(St,At),this.refreshToolboxSelection()}deleteVariableById(St){super.deleteVariableById(St),this.refreshToolboxSelection()}createVariable(St,At,Nt){return St=super.createVariable(St,At,Nt),this.refreshToolboxSelection(),St}recordDragTargets(){const St=this.componentManager.getComponents(Js.Capability.DRAG_TARGET,!0);this.dragTargetAreas=[];for(let At=0,Nt;Nt=St[At];At++){const Wt=Nt.getClientRect();Wt&&this.dragTargetAreas.push({component:Nt,clientRect:Wt})}}newBlock(St,At){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}getDragTarget(St){for(let At=0,Nt;Nt=this.dragTargetAreas[At];At++)if(Nt.clientRect.contains(St.clientX,St.clientY))return Nt.component;return null}onMouseDown_(St){const At=this.getGesture(St);At&&At.handleWsStart(St,this)}startDrag(St,At){St=mn(St,this.getParentSvg(),this.getInverseScreenCTM()),St.x/=this.scale,St.y/=this.scale,this.dragDeltaXY=qr.difference(At,St)}moveDrag(St){return St=mn(St,this.getParentSvg(),this.getInverseScreenCTM()),St.x/=this.scale,St.y/=this.scale,qr.sum(this.dragDeltaXY,St)}isDragging(){return this.currentGesture_!==null&&this.currentGesture_.isDragging()}isDraggable(){return this.options.moveOptions&&this.options.moveOptions.drag}isMovable(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch}isMovableHorizontally(){const St=!!this.scrollbar;return this.isMovable()&&(!St||St&&this.scrollbar.canScrollHorizontally())}isMovableVertically(){const St=!!this.scrollbar;return this.isMovable()&&(!St||St&&this.scrollbar.canScrollVertically())}onMouseWheel_(St){if(_p.inProgress())St.preventDefault(),St.stopPropagation();else{var At=this.options.zoomOptions&&this.options.zoomOptions.wheel,Nt=this.options.moveOptions&&this.options.moveOptions.wheel;if(At||Nt){var Wt=On(St);if(yo)var cn=St.metaKey;At&&(St.ctrlKey||cn||!Nt)?(Wt=-Wt.y/50,At=mn(St,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(At.x,At.y,Wt)):(At=this.scrollX-Wt.x,Nt=this.scrollY-Wt.y,St.shiftKey&&!Wt.x&&(At=this.scrollX-Wt.y,Nt=this.scrollY),this.scroll(At,Nt)),St.preventDefault()}}}getBlocksBoundingBox(){const St=this.getTopBoundedElements();if(!St.length)return new ws(0,0,0,0);const At=St[0].getBoundingRectangle();for(let Wt=1;Wt<St.length;Wt++){var Nt=St[Wt];Nt.isInsertionMarker&&Nt.isInsertionMarker()||(Nt=Nt.getBoundingRectangle(),Nt.top<At.top&&(At.top=Nt.top),Nt.bottom>At.bottom&&(At.bottom=Nt.bottom),Nt.left<At.left&&(At.left=Nt.left),Nt.right>At.right&&(At.right=Nt.right))}return At}cleanUp(){this.setResizesEnabled(!1),oo(!0);const St=this.getTopBlocks(!0);let At=0;for(let Nt=0,Wt;Wt=St[Nt];Nt++){if(!Wt.isMovable())continue;const cn=Wt.getRelativeToSurfaceXY();Wt.moveBy(-cn.x,At-cn.y),Wt.snapToGrid(),At=Wt.getRelativeToSurfaceXY().y+Wt.getHeightWidth().height+this.renderer.getConstants().MIN_BLOCK_HEIGHT}oo(!1),this.setResizesEnabled(!0)}showContextMenu(St){if(!this.options.readOnly&&!this.isFlyout){var At=Jo.registry.getContextMenuOptions(Jo.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(At,St),op(St,At,this.RTL)}}updateToolbox(St){if(St=om(St)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(Ou(St)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=St,this.toolbox_.render(St)}else{if(!this.flyout)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=St,this.flyout.show(St)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")}markFocused(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(Rn(this),this.setBrowserFocus())}setBrowserFocus(){document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch{try{this.getParentSvg().parentElement.setActive()}catch{this.getParentSvg().parentElement.focus({preventScroll:!0})}}}zoom(St,At,Nt){Nt=Math.pow(this.options.zoomOptions.scaleSpeed,Nt);const Wt=this.scale*Nt;if(this.scale!==Wt){Wt>this.options.zoomOptions.maxScale?Nt=this.options.zoomOptions.maxScale/this.scale:Wt<this.options.zoomOptions.minScale&&(Nt=this.options.zoomOptions.minScale/this.scale);var cn=this.getCanvas().getCTM(),vn=this.getParentSvg().createSVGPoint();vn.x=St,vn.y=At,vn=vn.matrixTransform(cn.inverse()),St=vn.x,At=vn.y,cn=cn.translate(St*(1-Nt),At*(1-Nt)).scale(Nt),this.scrollX=cn.e,this.scrollY=cn.f,this.setScale(Wt)}}zoomCenter(St){var At=this.getMetrics();let Nt;this.flyout?(Nt=At.svgWidth?At.svgWidth/2:0,At=At.svgHeight?At.svgHeight/2:0):(Nt=At.viewWidth/2+At.absoluteLeft,At=At.viewHeight/2+At.absoluteTop),this.zoom(Nt,At,St)}zoomToFit(){if(this.isMovable()){var St=this.getMetrics(),At=St.viewWidth;St=St.viewHeight;var Nt=this.getBlocksBoundingBox(),Wt=2*vx,cn=Nt.right-Nt.left+Wt;if(Nt=Nt.bottom-Nt.top+Wt,cn){this.flyout&&(this.horizontalLayout?(St+=this.flyout.getHeight(),Nt+=this.flyout.getHeight()/this.scale):(At+=this.flyout.getWidth(),cn+=this.flyout.getWidth()/this.scale)),At/=cn,St/=Nt,Fo();try{this.setScale(Math.min(At,St)),this.scrollCenter()}finally{vo()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}beginCanvasTransition(){ir(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),ir(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")}endCanvasTransition(){tr(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),tr(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")}scrollCenter(){if(this.isMovable()){var St=this.getMetrics(),At=(St.scrollWidth-St.viewWidth)/2,Nt=(St.scrollHeight-St.viewHeight)/2;At=-At-St.scrollLeft,Nt=-Nt-St.scrollTop,this.scroll(At,Nt)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}centerOnBlock(St){if(this.isMovable()){if(St=St?this.getBlockById(St):null){var At=St.getRelativeToSurfaceXY(),Nt=St.getHeightWidth(),Wt=this.scale;St=(At.x+(this.RTL?-1:1)*Nt.width/2)*Wt,At=(At.y+Nt.height/2)*Wt,Nt=this.getMetrics(),this.scroll(-(St-Nt.viewWidth/2),-(At-Nt.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}setScale(St){this.options.zoomOptions.maxScale&&St>this.options.zoomOptions.maxScale?St=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&St<this.options.zoomOptions.minScale&&(St=this.options.zoomOptions.minScale),this.scale=St,this.hideChaff(!1),(St=this.getFlyout(!1))&&St.isVisible()&&(St.reflow(),this.recordDragTargets()),this.grid&&this.grid.update(this.scale),St=this.getMetrics(),this.scrollX-=St.absoluteLeft,this.scrollY-=St.absoluteTop,St.viewLeft+=St.absoluteLeft,St.viewTop+=St.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout?this.scrollbar.resizeView(St):this.scrollbar.resizeContent(St))}getScale(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale}scroll(St,At){this.hideChaff(!0);const Nt=this.getMetrics();St=Math.min(St,-Nt.scrollLeft),At=Math.min(At,-Nt.scrollTop);const Wt=Nt.scrollTop+Math.max(0,Nt.scrollHeight-Nt.viewHeight);St=Math.max(St,-(Nt.scrollLeft+Math.max(0,Nt.scrollWidth-Nt.viewWidth))),At=Math.max(At,-Wt),this.scrollX=St,this.scrollY=At,this.scrollbar&&this.scrollbar.set(-(St+Nt.scrollLeft),-(At+Nt.scrollTop),!1),St+=Nt.absoluteLeft,At+=Nt.absoluteTop,this.translate(St,At)}getBlockById(St){return super.getBlockById(St)}getAllBlocks(St){return super.getAllBlocks(St)}getTopBlocks(St){return super.getTopBlocks(St)}addTopBlock(St){this.addTopBoundedElement(St),super.addTopBlock(St)}removeTopBlock(St){this.removeTopBoundedElement(St),super.removeTopBlock(St)}addTopComment(St){this.addTopBoundedElement(St),super.addTopComment(St)}removeTopComment(St){this.removeTopBoundedElement(St),super.removeTopComment(St)}addTopBoundedElement(St){this.topBoundedElements.push(St)}removeTopBoundedElement(St){_l(this.topBoundedElements,St)}getTopBoundedElements(){return[].concat(this.topBoundedElements)}setResizesEnabled(St){const At=!this.resizesEnabled&&St;this.resizesEnabled=St,At&&this.resizeContents()}clear(){this.setResizesEnabled(!1),super.clear(),this.topBoundedElements=[],this.setResizesEnabled(!0)}registerButtonCallback(St,At){if(typeof At!="function")throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks.set(St,At)}getButtonCallback(St){let At;return(At=this.flyoutButtonCallbacks.get(St))!=null?At:null}removeButtonCallback(St){this.flyoutButtonCallbacks.delete(St)}registerToolboxCategoryCallback(St,At){if(typeof At!="function")throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks.set(St,At)}getToolboxCategoryCallback(St){return this.toolboxCategoryCallbacks.get(St)||null}removeToolboxCategoryCallback(St){this.toolboxCategoryCallbacks.delete(St)}getGesture(St){const At=St.type==="pointerdown",Nt=this.currentGesture_;return Nt?At&&Nt.hasStarted()?(console.warn("Tried to start the same gesture twice."),Nt.cancel(),null):Nt:At?this.currentGesture_=new _p(St,this):null}clearGesture(){this.currentGesture_=null}cancelCurrentGesture(){this.currentGesture_&&this.currentGesture_.cancel()}getAudioManager(){return this.audioManager}getGrid(){return this.grid}hideChaff(St){Nl(),$a(),us();const At=!!St;this.getComponentManager().getComponents(Js.Capability.AUTOHIDEABLE,!0).forEach(Nt=>Nt.autoHide(At))}static setTopLevelWorkspaceMetrics_(St){const At=this.getMetrics();typeof St.x=="number"&&(this.scrollX=-(At.scrollLeft+(At.scrollWidth-At.viewWidth)*St.x)),typeof St.y=="number"&&(this.scrollY=-(At.scrollTop+(At.scrollHeight-At.viewHeight)*St.y)),this.translate(this.scrollX+At.absoluteLeft,this.scrollY+At.absoluteTop)}},I$={};I$.load=sp,I$.save=Ey;var nE=class{constructor(){this.priority=xT}save(St){const At=[];for(const Nt of St.getAllVariables())St={name:Nt.name,id:Nt.getId()},Nt.type&&(St.type=Nt.type),At.push(St);return At.length?At:null}load(St,At){for(const Nt of St)At.createVariable(Nt.name,Nt.type,Nt.id)}clear(St){St.getVariableMap().clear()}};Pp("variables",new nE);var rE={};rE.VariableSerializer=nE;var iE=class{constructor(St,At){this.procedureModelClass=St,this.parameterModelClass=At,this.priority=wT}save(St){return St.getProcedureMap().getProcedures().map(At=>mm(At))}load(St,At){const Nt=At.getProcedureMap();for(const Wt of St)Nt.add(gm(this.procedureModelClass,this.parameterModelClass,Wt,At))}clear(St){St.getProcedureMap().clear()}},bx=new iE(_0,RO),v_={};v_.ProcedureSerializer=iE,v_.loadParameter=Dp,v_.loadProcedure=gm,v_.observableProcedureSerializer=bx,v_.saveParameter=Pu,v_.saveProcedure=mm;var Sx={blocks:a0,exceptions:$O,priorities:Qv,procedures:v_,registry:ZS,variables:rE,workspaces:I$},oE=class extends S0{constructor(){super(),this.GRID_UNIT=4,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter_=null,this.replacementGlowFilterId="",this.SQUARED=this.ROUNDED=this.HEXAGONAL=this.replacementGlowFilter_=null,this.SMALL_PADDING=this.GRID_UNIT,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT}setFontConstants_(St){super.setFontConstants_(St),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING}init(){super.init(),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth}setDynamicProperties_(St){super.setDynamicProperties_(St),this.SELECTED_GLOW_COLOUR=St.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;const At=Number(St.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=At&&!isNaN(At)?At:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=St.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(St=Number(St.getComponentStyle("replacementGlowSize")))&&!isNaN(St)?St:this.REPLACEMENT_GLOW_SIZE}dispose(){super.dispose(),this.selectedGlowFilter_&&Sr(this.selectedGlowFilter_),this.replacementGlowFilter_&&Sr(this.replacementGlowFilter_)}makeStartHat(){const St=this.START_HAT_HEIGHT,At=this.START_HAT_WIDTH,Nt=Ul("c",[_o(25,-St),_o(71,-St),_o(At,0)]);return{height:St,width:At,path:Nt}}makeHexagonal(){function St(Nt,Wt,cn){var vn=Nt/2;return vn=vn>At?At:vn,cn=cn?-1:1,Nt=(Wt?-1:1)*Nt/2,Ru(-cn*vn,Nt)+Ru(cn*vn,Nt)}const At=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width(Nt){return Nt/=2,Nt>At?At:Nt},height(Nt){return Nt},connectionOffsetY(Nt){return Nt/2},connectionOffsetX(Nt){return-Nt},pathDown(Nt){return St(Nt,!1,!1)},pathUp(Nt){return St(Nt,!0,!1)},pathRightDown(Nt){return St(Nt,!1,!0)},pathRightUp(Nt){return St(Nt,!1,!0)}}}makeRounded(){function St(Wt,cn,vn){const Pn=Wt>Nt?Wt-Nt:0;return Wt=(Wt>Nt?Nt:Wt)/2,Ts("a","0 0,1",Wt,_o((cn?-1:1)*Wt,(cn?-1:1)*Wt))+eo("v",(vn?1:-1)*Pn)+Ts("a","0 0,1",Wt,_o((cn?1:-1)*Wt,(cn?-1:1)*Wt))}const At=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,Nt=2*At;return{type:this.SHAPES.ROUND,isDynamic:!0,width(Wt){return Wt/=2,Wt>At?At:Wt},height(Wt){return Wt},connectionOffsetY(Wt){return Wt/2},connectionOffsetX(Wt){return-Wt},pathDown(Wt){return St(Wt,!1,!1)},pathUp(Wt){return St(Wt,!0,!1)},pathRightDown(Wt){return St(Wt,!1,!0)},pathRightUp(Wt){return St(Wt,!1,!0)}}}makeSquared(){function St(Nt,Wt,cn){return Nt-=2*At,Ts("a","0 0,1",At,_o((Wt?-1:1)*At,(Wt?-1:1)*At))+eo("v",(cn?1:-1)*Nt)+Ts("a","0 0,1",At,_o((Wt?1:-1)*At,(Wt?-1:1)*At))}const At=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width(Nt){return At},height(Nt){return Nt},connectionOffsetY(Nt){return Nt/2},connectionOffsetX(Nt){return-Nt},pathDown(Nt){return St(Nt,!1,!1)},pathUp(Nt){return St(Nt,!0,!1)},pathRightDown(Nt){return St(Nt,!1,!0)},pathRightUp(Nt){return St(Nt,!1,!0)}}}shapeFor(St){let At=St.getCheck();switch(!At&&St.targetConnection&&(At=St.targetConnection.getCheck()),St.type){case ro.INPUT_VALUE:case ro.OUTPUT_VALUE:if(St=St.getSourceBlock().getOutputShape(),St!==null)switch(St){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return At&&At.indexOf("Boolean")!==-1?this.HEXAGONAL:At&&At.indexOf("Number")!==-1?this.ROUNDED:(At&&At.indexOf("String"),this.ROUNDED);case ro.PREVIOUS_STATEMENT:case ro.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}}makeNotch(){function St(Kr){return Ul("c",[_o(Kr*cn/2,0),_o(Kr*cn*3/4,Pn/2),_o(Kr*cn,Pn)])+lm([_o(Kr*cn,vn)])+Ul("c",[_o(Kr*cn/4,Pn/2),_o(Kr*cn/2,Pn),_o(Kr*cn,Pn)])+eo("h",Kr*Wt)+Ul("c",[_o(Kr*cn/2,0),_o(Kr*cn*3/4,-(Pn/2)),_o(Kr*cn,-Pn)])+lm([_o(Kr*cn,-vn)])+Ul("c",[_o(Kr*cn/4,-(Pn/2)),_o(Kr*cn/2,-Pn),_o(Kr*cn,-Pn)])}const At=this.NOTCH_WIDTH,Nt=this.NOTCH_HEIGHT,Wt=At/3,cn=Wt/3,vn=Nt/2,Pn=vn/2,qn=St(1),Ar=St(-1);return{type:this.SHAPES.NOTCH,width:At,height:Nt,pathLeft:qn,pathRight:Ar}}makeInsideCorners(){const St=this.CORNER_RADIUS,At=Ts("a","0 0,0",St,_o(-St,St)),Nt=Ts("a","0 0,1",St,_o(-St,St)),Wt=Ts("a","0 0,0",St,_o(St,St)),cn=Ts("a","0 0,1",St,_o(St,St));return{width:St,height:St,pathTop:At,pathBottom:Wt,rightWidth:St,rightHeight:St,pathTopRight:Nt,pathBottomRight:cn}}generateSecondaryColour_(St){return mu("#000",St,.15)||St}generateTertiaryColour_(St){return mu("#000",St,.25)||St}createDom(St,At,Nt){super.createDom(St,At,Nt),St=Mn(ar.DEFS,{},St),At=Mn(ar.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},St),Mn(ar.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},At),Nt=Mn(ar.FECOMPONENTTRANSFER,{result:"outBlur"},At),Mn(ar.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},Nt),Mn(ar.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},At),Mn(ar.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},At),this.selectedGlowFilterId=At.id,this.selectedGlowFilter_=At,St=Mn(ar.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},St),Mn(ar.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},St),At=Mn(ar.FECOMPONENTTRANSFER,{result:"outBlur"},St),Mn(ar.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},At),Mn(ar.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},St),Mn(ar.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},St),Mn(ar.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},St),this.replacementGlowFilterId=St.id,this.replacementGlowFilter_=St}getCSS_(St){return[`${St} .blocklyText,`,`${St} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${St} .blocklyText {`,"fill: #fff;","}",`${St} .blocklyNonEditableText>rect:not(.blocklyDropdownRect),`,`${St} .blocklyEditableText>rect:not(.blocklyDropdownRect) {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"}",`${St} .blocklyNonEditableText>text,`,`${St} .blocklyEditableText>text,`,`${St} .blocklyNonEditableText>g>text,`,`${St} .blocklyEditableText>g>text {`,"fill: #575E75;","}",`${St} .blocklyFlyoutLabelText {`,"fill: #575E75;","}",`${St} .blocklyText.blocklyBubbleText {`,"fill: #575E75;","}",`${St} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>rect,",`${St} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",`${St} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"color: #575E75;","}",`${St} .blocklyDropdownText {`,"fill: #fff !important;","}",`${St}.blocklyWidgetDiv .goog-menuitem,`,`${St}.blocklyDropDownDiv .goog-menuitem {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${St}.blocklyDropDownDiv .goog-menuitem-content {`,"color: #fff;","}",`${St} .blocklyHighlightedConnectionPath {`,`stroke: ${this.SELECTED_GLOW_COLOUR};`,"}",`${St} .blocklyDisabled > .blocklyOutlinePath {`,`fill: url(#blocklyDisabledPattern${this.randomIdentifier})`,"}",`${St} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},sE=class extends $0{constructor(St,At){super(St,At)}draw(){const St=this.block_.pathObject;if(St.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),St.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&St.flipRTL(),Qu()){let At,Nt;(At=this.block_)==null||(Nt=At.renderingDebugger)==null||Nt.drawDebug(this.block_,this.info_)}this.recordSizeOnBlock_(),this.info_.outputConnection&&(St.outputShapeType=this.info_.outputConnection.shape.type),St.endDrawing()}drawOutline_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):super.drawOutline_()}drawLeft_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():super.drawLeft_()}drawRightSideRow_(St){if(!(0>=St.height))if(nr.isSpacer(St)&&(St.precedesStatement||St.followsStatement)){var At=this.constants_.INSIDE_CORNERS.rightHeight;At=St.height-(St.precedesStatement?At:0),this.outlinePath_+=(St.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(0<At?eo("V",St.yPos+At):"")+(St.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")}else this.outlinePath_+=eo("V",St.yPos+St.height)}drawRightDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)}drawLeftDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"}drawFlatTop_(){const St=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=ls(St.xPos,this.info_.startY),this.outlinePath_+=eo("h",St.width)}drawFlatBottom_(){const St=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=eo("V",St.baseline),this.outlinePath_+=eo("h",-St.width)}drawInlineInput_(St){this.positionInlineInputConnection_(St);const At=St.input.name;if(!St.connectedBlock&&!this.info_.isInsertionMarker){var Nt=St.width-2*St.connectionWidth;St=Vs(St.xPos+St.connectionWidth,St.centerline-St.height/2)+eo("h",Nt)+St.shape.pathRightDown(St.height)+eo("h",-Nt)+St.shape.pathUp(St.height)+"z",this.block_.pathObject.setOutlinePath(At,St)}}drawStatementInput_(St){var At=St.getLastInput();const Nt=At.xPos+At.notchOffset+At.shape.width,Wt=At.shape.pathRight+eo("h",-(At.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,cn=St.height-2*this.constants_.INSIDE_CORNERS.height;At=this.constants_.INSIDE_CORNERS.pathBottom+eo("h",At.notchOffset-this.constants_.INSIDE_CORNERS.width)+(At.connectedBottomNextConnection?"":At.shape.pathLeft),this.outlinePath_+=eo("H",Nt)+Wt+eo("v",cn)+At+eo("H",St.xPos+St.width),this.positionStatementInputConnection_(St)}};dt.FieldImage$$module$build$src$core$field_image=class extends Qo{constructor(St,At,Nt,Wt,cn,vn,Pn){if(super(Qo.SKIP_SETUP),this.imageElement_=this.clickHandler_=null,this.flipRtl_=this.isDirty_=this.EDITABLE=!1,this.altText_="",Nt=Number(fs(Nt)),At=Number(fs(At)),isNaN(Nt)||isNaN(At))throw Error("Height and width values of an image field must cast to numbers.");if(0>=Nt||0>=At)throw Error("Height and width values of an image field must be greater than 0.");this.size_=new Ks(At,Nt+dt.FieldImage$$module$build$src$core$field_image.Y_PADDING),this.imageHeight_=Nt,typeof cn=="function"&&(this.clickHandler_=cn),St!==Qo.SKIP_SETUP&&(Pn?this.configure_(Pn):(this.flipRtl_=!!vn,this.altText_=fs(Wt)||""),this.setValue(fs(St)))}configure_(St){super.configure_(St),St.flipRtl&&(this.flipRtl_=St.flipRtl),St.alt&&(this.altText_=fs(St.alt))}initView(){this.imageElement_=Mn(ar.IMAGE,{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(ou,"xlink:href",this.value_),this.clickHandler_&&(this.imageElement_.style.cursor="pointer")}updateSize_(){}doClassValidation_(St){return typeof St!="string"?null:St}doValueUpdate_(St){this.value_=St,this.imageElement_&&this.imageElement_.setAttributeNS(ou,"xlink:href",String(this.value_))}getFlipRtl(){return this.flipRtl_}setAlt(St){St!==this.altText_&&(this.altText_=St||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))}showEditor_(){this.clickHandler_&&this.clickHandler_(this)}setOnClickHandler(St){this.clickHandler_=St}getText_(){return this.altText_}static fromJson(St){if(!St.src||!St.width||!St.height)throw Error("src, width, and height values for an image field arerequired. The width and height must be non-zero.");return new this(St.src,St.width,St.height,void 0,void 0,void 0,St)}},dt.FieldImage$$module$build$src$core$field_image.Y_PADDING=1,xa("field_image",dt.FieldImage$$module$build$src$core$field_image),dt.FieldImage$$module$build$src$core$field_image.prototype.DEFAULT_VALUE="",dt.FieldImage$$module$build$src$core$field_image;var E0=class extends Qo{constructor(St,At,Nt){super(Qo.SKIP_SETUP),this.spellcheck_=!0,this.htmlInput_=null,this.isTextValid_=this.isBeingEdited_=!1,this.onKeyInputWrapper_=this.onKeyDownWrapper_=null,this.fullBlockClickTarget_=!1,this.workspace_=null,this.SERIALIZABLE=!0,this.CURSOR="text",St!==Qo.SKIP_SETUP&&(Nt&&this.configure_(Nt),this.setValue(St),At&&this.setValidator(At))}configure_(St){super.configure_(St),St.spellcheck!==void 0&&(this.spellcheck_=St.spellcheck)}initView(){const St=this.getSourceBlock();if(!St)throw new Ds;if(this.getConstants().FULL_BLOCK_FIELDS){let At=0,Nt=0;for(let Wt=0,cn;cn=St.inputList[Wt];Wt++){for(let vn=0;cn.fieldRow[vn];vn++)At++;cn.connection&&Nt++}this.fullBlockClickTarget_=1>=At&&St.outputConnection&&!Nt}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()}doClassValidation_(St){return St==null?null:String(St)}doValueInvalid_(St){this.isBeingEdited_&&(this.isDirty_=!0,this.isTextValid_=!1,St=this.value_,this.value_=this.htmlInput_.getAttribute("data-untyped-default-value"),this.sourceBlock_&&ss()&&Gr(new(Wr(Qs))(this.sourceBlock_,"field",this.name||null,St,this.value_)))}doValueUpdate_(St){this.isTextValid_=this.isDirty_=!0,this.value_=St}applyColour(){if(this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS){var St=this.sourceBlock_;this.borderRect_?this.borderRect_.setAttribute("stroke",St.style.colourTertiary):St.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR)}}render_(){if(super.render_(),this.isBeingEdited_){this.resizeEditor_();const St=this.htmlInput_;this.isTextValid_?(tr(St,"blocklyInvalidInput"),ns(St,ms.INVALID,!1)):(ir(St,"blocklyInvalidInput"),ns(St,ms.INVALID,!0))}}setSpellcheck(St){St!==this.spellcheck_&&(this.spellcheck_=St,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))}showEditor_(St,At){this.workspace_=this.sourceBlock_.workspace,St=At||!1,!St&&this.workspace_.options.modalInputs&&(Fs||ko||bo)?this.showPromptEditor_():this.showInlineEditor_(St)}showPromptEditor_(){DO(To.CHANGE_VALUE_TITLE,this.getText(),St=>{St!==null&&this.setValue(this.getValueFromEditorText_(St))})}showInlineEditor_(St){const At=this.getSourceBlock();if(!At)throw new Ds;Ip(this,At.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,St||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())}widgetCreate_(){var St=this.getSourceBlock();if(!St)throw new Ds;oo(!0);const At=Ap();var Nt=this.getClickTarget_();if(!Nt)throw Error("A click target has not been set.");ir(Nt,"editing"),Nt=document.createElement("input"),Nt.className="blocklyHtmlInput",Nt.setAttribute("spellcheck",this.spellcheck_);const Wt=this.workspace_.getScale();var cn=this.getConstants().FIELD_TEXT_FONTSIZE*Wt+"pt";return At.style.fontSize=cn,Nt.style.fontSize=cn,cn=E0.BORDERRADIUS*Wt+"px",this.fullBlockClickTarget_&&(cn=this.getScaledBBox(),cn=(cn.bottom-cn.top)/2+"px",St=St.getParent()?St.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary,Nt.style.border=1*Wt+"px solid "+St,At.style.borderRadius=cn,At.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(At.style.boxShadow="rgba(255, 255, 255, 0.3) 0 0 0 "+4*Wt+"px")),Nt.style.borderRadius=cn,At.appendChild(Nt),Nt.value=Nt.defaultValue=this.getEditorText_(this.value_),Nt.setAttribute("data-untyped-default-value",this.value_),this.resizeEditor_(),this.bindInputEvents_(Nt),Nt}widgetDispose_(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_(this.value_),oo(!1),this.unbindInputEvents_();var St=Ap().style;if(St.width="auto",St.height="auto",St.fontSize="",St.transition="",St.boxShadow="",this.htmlInput_=null,St=this.getClickTarget_(),!St)throw Error("A click target has not been set.");tr(St,"editing")}onFinishEditing_(St){}bindInputEvents_(St){this.onKeyDownWrapper_=Kt(St,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=Kt(St,"input",this,this.onHtmlInputChange_)}unbindInputEvents_(){this.onKeyDownWrapper_&&(hn(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(hn(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)}onHtmlInputKeyDown_(St){St.keyCode===co.ENTER?($a(),us()):St.keyCode===co.ESC?(this.setValue(this.htmlInput_.getAttribute("data-untyped-default-value")),$a(),us()):St.keyCode===co.TAB&&($a(),us(),this.sourceBlock_.tab(this,!St.shiftKey),St.preventDefault())}onHtmlInputChange_(St){this.setValue(this.getValueFromEditorText_(this.htmlInput_.value))}setEditorValue_(St){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(St)),this.setValue(St)}resizeEditor_(){var St=this.getSourceBlock();if(!St)throw new Ds;const At=Ap(),Nt=this.getScaledBBox();At.style.width=Nt.right-Nt.left+"px",At.style.height=Nt.bottom-Nt.top+"px",St=new qr(St.RTL?Nt.right-At.offsetWidth:Nt.left,Nt.top),At.style.left=St.x+"px",At.style.top=St.y+"px"}isTabNavigable(){return!0}getText_(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null}getEditorText_(St){return String(St)}getValueFromEditorText_(St){return St}};E0.BORDERRADIUS=4,dt.FieldTextInput$$module$build$src$core$field_textinput=class extends E0{constructor(St,At,Nt){super(St,At,Nt)}static fromJson(St){return new this(fs(St.text),void 0,St)}},xa("field_input",dt.FieldTextInput$$module$build$src$core$field_textinput),dt.FieldTextInput$$module$build$src$core$field_textinput.prototype.DEFAULT_VALUE="",dt.FieldTextInput$$module$build$src$core$field_textinput;var aE=class extends O${constructor(St){super(St)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(St){return!!St.outputConnection}hasRightSquareCorner(St){return!!St.outputConnection&&!St.statementInputCount&&!St.nextConnection}},lE=class extends y0{constructor(St,At){if(super(St,At),this.connectedBottomNextConnection=!1,this.connectedBlock){for(St=this.connectedBlock;At=St.getNextBlock();)St=At;St.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}}},cE=class extends vp{constructor(St){super(St),this.width=this.height=0,this.type|=nr.getType("RIGHT_CONNECTION")}},uE=class extends $${constructor(St){super(St)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(St){const At=(St.hat?St.hat==="cap":this.constants_.ADD_START_HATS)&&!St.outputConnection&&!St.previousConnection;return!!St.outputConnection||At}hasRightSquareCorner(St){return!!St.outputConnection&&!St.statementInputCount&&!St.nextConnection}},hE=class extends kO{constructor(St,At){super(St,At),this.isInline=!0,this.renderer_=St,this.constants_=this.renderer_.getConstants(),this.topRow=new uE(this.constants_),this.bottomRow=new aE(this.constants_),this.isMultiRow=!At.getInputsInline()||At.isCollapsed(),this.hasStatementInput=0<At.statementInputCount,this.rightSide=this.outputConnection?new cE(this.constants_):null,this.rightAlignedDummyInputs_=new WeakMap}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}shouldStartNewRow_(St,At){return At?St.type===No.STATEMENT||At.type===No.STATEMENT?!0:St.type===No.VALUE||St.type===No.DUMMY?!this.isInline||this.isMultiRow:!1:!1}getDesiredRowWidth_(St){return St.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):super.getDesiredRowWidth_(St)}getInRowSpacing_(St,At){return St&&At||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!St&&At&&nr.isStatementInput(At)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:St&&nr.isLeftRoundedCorner(St)&&At&&(nr.isPreviousConnection(At)||nr.isNextConnection(At))?At.notchOffset-this.constants_.CORNER_RADIUS:St&&nr.isLeftSquareCorner(St)&&At&&nr.isHat(At)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING}getSpacerRowHeight_(St,At){if(nr.isTopRow(St)&&nr.isBottomRow(At))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;const Nt=nr.isInputRow(St)&&St.hasStatement,Wt=nr.isInputRow(At)&&At.hasStatement;return Wt||Nt?(St=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),Wt&&Nt?Math.max(St,this.constants_.DUMMY_INPUT_MIN_HEIGHT):St):nr.isTopRow(St)?St.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):nr.isBottomRow(At)?this.outputConnection?!At.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}getSpacerRowWidth_(St,At){const Nt=this.width-this.startX;return nr.isInputRow(St)&&St.hasStatement||nr.isInputRow(At)&&At.hasStatement?Math.max(Nt,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):Nt}getElemCenterline_(St,At){if(St.hasStatement&&!nr.isSpacer(At)&&!nr.isStatementInput(At))return St.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(nr.isInlineInput(At)&&At instanceof zp){const Nt=At.connectedBlock;if(Nt&&Nt.outputConnection&&Nt.nextConnection)return St.yPos+Nt.height/2}return super.getElemCenterline_(St,At)}addInput_(St,At){if(St.type===No.DUMMY&&At.hasDummyInput&&At.align===dt.Align$$module$build$src$core$input.LEFT&&St.align===dt.Align$$module$build$src$core$input.RIGHT)this.rightAlignedDummyInputs_.set(At,St);else if(St.type===No.STATEMENT){At.elements.push(new lE(this.constants_,St)),At.hasStatement=!0,At.align===null&&(At.align=St.align);return}super.addInput_(St,At)}addAlignmentPadding_(St,At){if(this.rightAlignedDummyInputs_.get(St)){let Nt;for(let Wt=0;Wt<St.elements.length;Wt++){const cn=St.elements[Wt];if(nr.isSpacer(cn)&&(Nt=cn),nr.isField(cn)&&cn instanceof y_&&cn.parentInput===this.rightAlignedDummyInputs_.get(St))break}if(Nt){Nt.width+=At,St.width+=At;return}}super.addAlignmentPadding_(St,At)}adjustXPosition_(){const St=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH;let At=St;for(let cn=2;cn<this.rows.length-1;cn+=2){var Nt=this.rows[cn-1];const vn=this.rows[cn];var Wt=this.rows[cn+1];if(Nt=cn===2?!!this.topRow.hasPreviousConnection:!!Nt.followsStatement,Wt=cn+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!Wt.precedesStatement,nr.isInputRow(vn)&&vn.hasStatement){vn.measure();let Pn,qn;At=vn.width-((qn=(Pn=vn.getLastInput())==null?void 0:Pn.width)!=null?qn:0)+St}else if(Nt&&(cn===2||Wt)&&nr.isInputRow(vn)&&!vn.hasStatement){Wt=vn.xPos,Nt=null;for(let Pn=0;Pn<vn.elements.length;Pn++){const qn=vn.elements[Pn];nr.isSpacer(qn)&&(Nt=qn),Nt&&(nr.isField(qn)||nr.isInput(qn))&&Wt<At&&!(nr.isField(qn)&&qn instanceof y_&&(qn.field instanceof dt.FieldLabel$$module$build$src$core$field_label||qn.field instanceof dt.FieldImage$$module$build$src$core$field_image))&&(Nt.width+=At-Wt),Wt+=qn.width}}}}finalizeOutputConnection_(){if(this.outputConnection&&this.outputConnection.isDynamicShape){var St=this.outputConnection.shape;if("isDynamic"in St&&St.isDynamic){for(var At=0,Nt=0;Nt<this.rows.length;Nt++){const Wt=this.rows[Nt];Wt.yPos=At,At+=Wt.height}this.height=At,Nt=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,At=St.height(Nt),Nt=St.width(Nt),this.outputConnection.height=At,this.outputConnection.width=Nt,this.outputConnection.startX=Nt,this.outputConnection.connectionOffsetY=St.connectionOffsetY(At),this.outputConnection.connectionOffsetX=St.connectionOffsetX(Nt),St=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(St=Nt,this.rightSide.height=At,this.rightSide.width=St,this.rightSide.centerline=At/2,this.rightSide.xPos=this.width+St),this.startX=Nt,this.width+=Nt+St,this.widthWithChildren+=Nt+St}}}finalizeHorizontalAlignment_(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var St=0,At=0;At<this.rows.length;At++){var Nt=this.rows[At];if(!nr.isInputRow(Nt))continue;St=Nt.elements[Nt.elements.length-2];let Wt=this.getNegativeSpacing_(Nt.elements[1]),cn=this.getNegativeSpacing_(St);St=Wt+cn;const vn=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-St<vn&&(St=this.width-vn,Wt=St/2,cn=St/2),Nt.elements.unshift(new bu(this.constants_,-Wt)),Nt.elements.push(new bu(this.constants_,-cn))}if(St)for(this.width-=St,this.widthWithChildren-=St,this.rightSide.xPos-=St,At=0;At<this.rows.length;At++)Nt=this.rows[At],nr.isTopOrBottomRow(Nt)&&(Nt.elements[1].width-=St),Nt.width-=St,Nt.widthWithConnectedBlocks-=St}}getNegativeSpacing_(St){if(!St||!this.outputConnection)return 0;const At=this.outputConnection.width;var Nt=this.outputConnection.shape.type;const Wt=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)switch(Nt){case Wt.SHAPES.ROUND:return Nt=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,Nt=this.height/2>Nt?Nt:this.height/2,At-Nt*(1-Math.sin(Math.acos((Nt-this.constants_.SMALL_PADDING)/Nt)));default:return 0}if(nr.isInlineInput(St)&&St instanceof zp){const cn=St.connectedBlock;return St=cn?cn.pathObject.outputShapeType:St.shape.type,St==null||cn&&cn.outputConnection&&(cn.statementInputCount||cn.nextConnection)||Nt===Wt.SHAPES.HEXAGONAL&&Nt!==St?0:At-this.constants_.SHAPE_IN_SHAPE_PADDING[Nt][St]}return nr.isField(St)&&St instanceof y_?Nt===Wt.SHAPES.ROUND&&St.field instanceof dt.FieldTextInput$$module$build$src$core$field_textinput?At-2.75*Wt.GRID_UNIT:At-this.constants_.SHAPE_IN_SHAPE_PADDING[Nt][0]:nr.isIcon(St)?this.constants_.SMALL_PADDING:0}finalizeVerticalAlignment_(){if(!this.outputConnection)for(let Wt=2;Wt<this.rows.length-1;Wt+=2){const cn=this.rows[Wt-1],vn=this.rows[Wt],Pn=this.rows[Wt+1];var St=Wt===2,At=Wt+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!Pn.precedesStatement;if(St?this.topRow.hasPreviousConnection:cn.followsStatement){var Nt=vn.elements[1];if(Nt=vn.elements.length===3&&Nt instanceof y_&&(Nt.field instanceof dt.FieldLabel$$module$build$src$core$field_label||Nt.field instanceof dt.FieldImage$$module$build$src$core$field_image),!St&&Nt)cn.height-=this.constants_.SMALL_PADDING,Pn.height-=this.constants_.SMALL_PADDING,vn.height-=this.constants_.MEDIUM_PADDING;else if(!St&&!At)cn.height+=this.constants_.SMALL_PADDING;else if(At){for(St=!1,At=0;At<vn.elements.length;At++)if(Nt=vn.elements[At],Nt instanceof zp&&nr.isInlineInput(Nt)&&Nt.connectedBlock&&!Nt.connectedBlock.isShadow()&&40<=Nt.connectedBlock.getHeightWidth().height){St=!0;break}St&&(cn.height-=this.constants_.SMALL_PADDING,Pn.height-=this.constants_.SMALL_PADDING)}}}}finalize_(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),super.finalize_(),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)}},dE=class extends E${constructor(St,At,Nt){super(St,At,Nt),this.markerCircle_=null}showWithInputOutput_(St){const At=St.getSourceBlock();St=St.getLocation().getOffsetInBlock(),this.positionCircle_(St.x,St.y),this.setParent_(At),this.showCurrent_()}showWithOutput_(St){this.showWithInputOutput_(St)}showWithInput_(St){this.showWithInputOutput_(St)}showWithBlock_(St){St=St.getLocation();const At=St.getHeightWidth();this.positionRect_(0,0,At.width,At.height),this.setParent_(St),this.showCurrent_()}positionCircle_(St,At){let Nt;(Nt=this.markerCircle_)==null||Nt.setAttribute("cx",St.toString());let Wt;(Wt=this.markerCircle_)==null||Wt.setAttribute("cy",At.toString()),this.currentMarkerSvg=this.markerCircle_}hide(){super.hide(),this.markerCircle_&&(this.markerCircle_.style.display="none")}createDomInternal_(){if(super.createDomInternal_(),this.markerCircle_=Mn(ar.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:"display: none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){const St=this.getBlinkProperties_();Mn(ar.ANIMATE,St,this.markerCircle_)}return this.markerSvg_}applyColour_(St){super.applyColour_(St);let At;(At=this.markerCircle_)==null||At.setAttribute("fill",this.colour_);let Nt;if((Nt=this.markerCircle_)==null||Nt.setAttribute("stroke",this.colour_),this.isCursor()){St=this.colour_+";transparent;transparent;";let Wt;(Wt=this.markerCircle_)==null||Wt.firstElementChild.setAttribute("values",St)}}},fE=class extends Kv{constructor(St,At,Nt){super(St,At,Nt),this.svgPathSelected_=null,this.outlines=new Map,this.remainingOutlines=new Set,this.outputShapeType=null,this.constants=Nt}setPath(St){super.setPath(St),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",St)}applyColour(St){super.applyColour(St);const At=St.getParent();St.isShadow()&&At&&this.svgPath.setAttribute("stroke",At.style.colourTertiary);for(const Nt of this.outlines.values())Nt.setAttribute("fill",this.style.colourTertiary)}flipRTL(){super.flipRTL();for(const St of this.outlines.values())St.setAttribute("transform","scale(-1 1)")}updateSelected(St){this.setClass_("blocklySelected",St),St?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)}updateReplacementFade(St){this.setClass_("blocklyReplaceable",St),St?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")}updateShapeForInputHighlight(St,At){St=St.getParentInput().name,(St=this.getOutlinePath_(St))&&(At?St.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):St.removeAttribute("filter"))}beginDrawing(){this.remainingOutlines.clear();for(const St of this.outlines.keys())this.remainingOutlines.add(St)}endDrawing(){if(this.remainingOutlines.size)for(const St of this.remainingOutlines)this.removeOutlinePath_(St);this.remainingOutlines.clear()}setOutlinePath(St,At){St=this.getOutlinePath_(St),St.setAttribute("d",At),St.setAttribute("fill",this.style.colourTertiary)}getOutlinePath_(St){return this.outlines.has(St)||this.outlines.set(St,Mn(ar.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines.delete(St),this.outlines.get(St)}removeOutlinePath_(St){let At,Nt;(At=this.outlines.get(St))==null||(Nt=At.parentNode)==null||Nt.removeChild(this.outlines.get(St)),this.outlines.delete(St)}},pE=class extends T0{constructor(St){super(St)}makeConstants_(){return new oE}makeRenderInfo_(St){return new hE(this,St)}makeDrawer_(St,At){return new sE(St,At)}makeMarkerDrawer(St,At){return new dE(St,this.getConstants(),At)}makePathObject(St,At){return new fE(St,At,this.getConstants())}getConstants(){return this.constants_}shouldHighlightConnection(St){return St.type!==ro.INPUT_VALUE&&St.type!==ro.OUTPUT_VALUE}getConnectionPreviewMethod(St,At,Nt){return At.type===ro.OUTPUT_VALUE?St.isConnected()?$u.PREVIEW_TYPE.REPLACEMENT_FADE:$u.PREVIEW_TYPE.INPUT_OUTLINE:super.getConnectionPreviewMethod(St,At,Nt)}};zu("zelos",pE);var ep={};ep.BottomRow=aE,ep.ConstantProvider=oE,ep.Drawer=sE,ep.MarkerSvg=dE,ep.PathObject=fE,ep.RenderInfo=hE,ep.Renderer=pE,ep.RightConnectionShape=cE,ep.StatementInput=lE,ep.TopRow=uE;var mE=class extends kO{constructor(St,At){super(St,At)}getRenderer(){return this.renderer_}addElemSpacing_(){let St=!1;for(var At=0;At<this.rows.length;At++)if(this.rows[At].hasExternalInput){St=!0;break}for(At=0;At<this.rows.length;At++){const Wt=this.rows[At];var Nt=Wt.elements;if(Wt.elements=[],Wt.startsWithElemSpacer()&&Wt.elements.push(new bu(this.constants_,this.getInRowSpacing_(null,Nt[0]))),Nt.length){for(let cn=0;cn<Nt.length-1;cn++){Wt.elements.push(Nt[cn]);const vn=this.getInRowSpacing_(Nt[cn],Nt[cn+1]);Wt.elements.push(new bu(this.constants_,vn))}Wt.elements.push(Nt[Nt.length-1]),Wt.endsWithElemSpacer()&&(Nt=this.getInRowSpacing_(Nt[Nt.length-1],null),St&&Wt.hasDummyInput&&(Nt+=this.constants_.TAB_WIDTH),Wt.elements.push(new bu(this.constants_,Nt)))}}}getInRowSpacing_(St,At){if(!St)return At&&nr.isField(At)&&At.isEditable?this.constants_.MEDIUM_PADDING:At&&nr.isInlineInput(At)?this.constants_.MEDIUM_LARGE_PADDING:At&&nr.isStatementInput(At)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!nr.isInput(St)&&!At)return nr.isField(St)&&St.isEditable?this.constants_.MEDIUM_PADDING:nr.isIcon(St)?2*this.constants_.LARGE_PADDING+1:nr.isHat(St)?this.constants_.NO_PADDING:nr.isPreviousOrNextConnection(St)?this.constants_.LARGE_PADDING:nr.isLeftRoundedCorner(St)?this.constants_.MIN_BLOCK_WIDTH:nr.isJaggedEdge(St)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(nr.isInput(St)&&!At){if(nr.isExternalInput(St))return this.constants_.NO_PADDING;if(nr.isInlineInput(St))return this.constants_.LARGE_PADDING;if(nr.isStatementInput(St))return this.constants_.NO_PADDING}if(!nr.isInput(St)&&At&&nr.isInput(At)){if(nr.isField(St)&&St.isEditable){if(nr.isInlineInput(At)||nr.isExternalInput(At))return this.constants_.SMALL_PADDING}else{if(nr.isInlineInput(At)||nr.isExternalInput(At))return this.constants_.MEDIUM_LARGE_PADDING;if(nr.isStatementInput(At))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(nr.isIcon(St)&&At&&!nr.isInput(At))return this.constants_.LARGE_PADDING;if(nr.isInlineInput(St)&&At&&nr.isField(At))return At.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(nr.isLeftSquareCorner(St)&&At){if(nr.isHat(At))return this.constants_.NO_PADDING;if(nr.isPreviousConnection(At)||nr.isNextConnection(At))return At.notchOffset}return nr.isLeftRoundedCorner(St)&&At?At.notchOffset-this.constants_.CORNER_RADIUS:nr.isField(St)&&At&&nr.isField(At)&&St.isEditable===At.isEditable||At&&nr.isJaggedEdge(At)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(St,At){return nr.isTopRow(St)&&nr.isBottomRow(At)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:nr.isTopRow(St)||nr.isBottomRow(At)?this.constants_.NO_PADDING:St.hasExternalInput&&At.hasExternalInput?this.constants_.LARGE_PADDING:!St.hasStatement&&At.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:St.hasStatement&&At.hasStatement||St.hasDummyInput||At.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(St,At){if(nr.isSpacer(At))return St.yPos+At.height/2;if(nr.isBottomRow(St))return St=St.yPos+St.height-St.descenderHeight,nr.isNextConnection(At)?St+At.height/2:St-At.height/2;if(nr.isTopRow(St))return nr.isHat(At)?St.capline-At.height/2:St.capline+At.height/2;let Nt=St.yPos;return Nt=nr.isField(At)&&St.hasStatement?Nt+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+At.height/2):Nt+St.height/2}finalize_(){let St=0,At=0;for(var Nt=0;Nt<this.rows.length;Nt++){const cn=this.rows[Nt];cn.yPos=At,cn.xPos=this.startX,At+=cn.height,St=Math.max(St,cn.widthWithConnectedBlocks);var Wt=At-this.topRow.ascenderHeight;cn===this.bottomRow&&Wt<this.constants_.MIN_BLOCK_HEIGHT&&(Wt=this.constants_.MIN_BLOCK_HEIGHT-Wt,this.bottomRow.height+=Wt,At+=Wt),this.recordElemPositions_(cn)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(Nt=this.block_.nextConnection.targetBlock())&&(St=Math.max(St,Nt.getHeightWidth().width)),this.bottomRow.baseline=At-this.bottomRow.descenderHeight,this.widthWithChildren=St+this.startX,this.height=At,this.startY=this.topRow.capline}},gE=class extends T0{constructor(St){super(St)}makeRenderInfo_(St){return new mE(this,St)}};zu("thrasos",gE);var R$={};R$.RenderInfo=mE,R$.Renderer=gE;var _E=class extends S0{constructor(){super()}},OE=class extends $0{constructor(St,At){super(St,At)}},yE=class extends kO{constructor(St,At){super(St,At)}getRenderer(){return this.renderer_}},vE=class extends T0{constructor(St){super(St)}makeConstants_(){return new _E}makeRenderInfo_(St){return new yE(this,St)}makeDrawer_(St,At){return new OE(St,At)}};zu("minimalist",vE);var x0={};x0.ConstantProvider=_E,x0.Drawer=OE,x0.RenderInfo=yE,x0.Renderer=vE;var bE=class extends S0{constructor(){super(),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2}getCSS_(St){return super.getCSS_(St).concat([`${St} .blocklyInsertionMarker>.blocklyPathLight,`,`${St} .blocklyInsertionMarker>.blocklyPathDark {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"])}},SE=class{constructor(St){this.inlineSteps_=this.steps_="",this.info_=St,this.RTL_=this.info_.RTL,St=St.getRenderer(),this.constants_=St.getConstants(),this.highlightConstants_=St.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH}getPath(){return this.steps_+`
`+this.inlineSteps_}drawTopCorner(St){this.steps_+=ls(St.xPos,this.info_.startY);for(let At=0,Nt;Nt=St.elements[At];At++)nr.isLeftSquareCorner(Nt)?this.steps_+=this.highlightConstants_.START_POINT:nr.isLeftRoundedCorner(Nt)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):nr.isPreviousConnection(Nt)?this.steps_+=this.notchPaths_.pathLeft:nr.isHat(Nt)?this.steps_+=this.startPaths_.path(this.RTL_):nr.isSpacer(Nt)&&Nt.width!==0&&(this.steps_+=eo("H",Nt.xPos+Nt.width-this.highlightOffset_));this.steps_+=eo("H",St.xPos+St.width-this.highlightOffset_)}drawJaggedEdge_(St){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+eo("v",St.height-this.jaggedTeethPaths_.height-this.highlightOffset_))}drawValueInput(St){const At=St.getLastInput();if(this.RTL_){const Nt=St.height-At.connectionHeight;this.steps_+=Vs(At.xPos+At.width-this.highlightOffset_,St.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+eo("v",Nt)}else this.steps_+=Vs(At.xPos+At.width,St.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)}drawStatementInput(St){const At=St.getLastInput();if(At)if(this.RTL_){const Nt=St.height-2*this.insideCornerPaths_.height;this.steps_+=Vs(At.xPos,St.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+eo("v",Nt)+this.insideCornerPaths_.pathBottom(this.RTL_)+Ru(St.width-At.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=Vs(At.xPos,St.yPos+St.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+Ru(St.width-At.xPos-this.insideCornerPaths_.width,0)}drawRightSideRow(St){const At=St.xPos+St.width-this.highlightOffset_;St instanceof S$&&St.followsStatement&&(this.steps_+=eo("H",At)),this.RTL_&&(this.steps_+=eo("H",At),St.height>this.highlightOffset_&&(this.steps_+=eo("V",St.yPos+St.height-this.highlightOffset_)))}drawBottomRow(St){if(this.RTL_)this.steps_+=eo("V",St.baseline-this.highlightOffset_);else{const At=this.info_.bottomRow.elements[0];nr.isLeftSquareCorner(At)?this.steps_+=Vs(St.xPos+this.highlightOffset_,St.baseline-this.highlightOffset_):nr.isLeftRoundedCorner(At)&&(this.steps_+=Vs(St.xPos,St.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}}drawLeft(){var St=this.info_.outputConnection;St&&(St=St.connectionOffsetY+St.height,this.RTL_?this.steps_+=Vs(this.info_.startX,St):(this.steps_+=Vs(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=eo("V",St)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(St=this.info_.topRow,nr.isLeftRoundedCorner(St.elements[0])?this.steps_+=eo("V",this.outsideCornerPaths_.height):this.steps_+=eo("V",St.capline+this.highlightOffset_))}drawInlineInput(St){const At=this.highlightOffset_,Nt=St.xPos+St.connectionWidth;var Wt=St.centerline-St.height/2;const cn=St.width-St.connectionWidth,vn=Wt+At;this.RTL_?(Wt=St.connectionOffsetY-At,St=St.height-(St.connectionOffsetY+St.connectionHeight)+At,this.inlineSteps_+=Vs(Nt-At,vn)+eo("v",Wt)+this.puzzleTabPaths_.pathDown(this.RTL_)+eo("v",St)+eo("h",cn)):this.inlineSteps_+=Vs(St.xPos+St.width+At,vn)+eo("v",St.height)+eo("h",-cn)+Vs(Nt,Wt+St.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)}},$E=class extends $0{constructor(St,At){super(St,At),this.highlighter_=new SE(At)}draw(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();const St=this.block_.pathObject;if(St.setPath(this.outlinePath_+`
`+this.inlinePath_),St.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&St.flipRTL(),Qu()){let At,Nt;(At=this.block_)==null||(Nt=At.renderingDebugger)==null||Nt.drawDebug(this.block_,this.info_)}this.recordSizeOnBlock_()}drawTop_(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),super.drawTop_()}drawJaggedEdge_(St){this.highlighter_.drawJaggedEdge_(St),super.drawJaggedEdge_(St)}drawValueInput_(St){this.highlighter_.drawValueInput(St),super.drawValueInput_(St)}drawStatementInput_(St){this.highlighter_.drawStatementInput(St),super.drawStatementInput_(St)}drawRightSideRow_(St){this.highlighter_.drawRightSideRow(St),this.outlinePath_+=eo("H",St.xPos+St.width)+eo("V",St.yPos+St.height)}drawBottom_(){this.highlighter_.drawBottomRow(this.info_.bottomRow),super.drawBottom_()}drawLeft_(){this.highlighter_.drawLeft(),super.drawLeft_()}drawInlineInput_(St){this.highlighter_.drawInlineInput(St),super.drawInlineInput_(St)}positionInlineInputConnection_(St){const At=St.centerline-St.height/2;if(St.connectionModel){let Nt=St.xPos+St.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(Nt*=-1),St.connectionModel.setOffsetInBlock(Nt,At+St.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}}positionStatementInputConnection_(St){const At=St.getLastInput();if(At!=null&&At.connectionModel){let Nt=St.xPos+St.statementEdge+At.notchOffset;Nt=this.info_.RTL?-1*Nt:Nt+this.constants_.DARK_PATH_OFFSET,At.connectionModel.setOffsetInBlock(Nt,St.yPos+this.constants_.DARK_PATH_OFFSET)}}positionExternalValueConnection_(St){const At=St.getLastInput();if(At&&At.connectionModel){let Nt=St.xPos+St.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(Nt*=-1),At.connectionModel.setOffsetInBlock(Nt,St.yPos)}}positionNextConnection_(){const St=this.info_.bottomRow;if(St.connection){const At=St.connection,Nt=At.xPos;At.connectionModel.setOffsetInBlock((this.info_.RTL?-Nt:Nt)+this.constants_.DARK_PATH_OFFSET/2,St.baseline+this.constants_.DARK_PATH_OFFSET)}}},TE=class{constructor(St){this.OFFSET=.5,this.constantProvider=St,this.START_POINT=ls(this.OFFSET,this.OFFSET)}init(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()}makeInsideCorner(){const St=this.constantProvider.CORNER_RADIUS,At=this.OFFSET,Nt=(1-Math.SQRT1_2)*(St+At)-At,Wt=ls(Nt,Nt)+Ts("a","0 0,0",St,_o(-Nt-At,St-Nt)),cn=Ts("a","0 0,0",St+At,_o(St+At,St+At)),vn=ls(Nt,-Nt)+Ts("a","0 0,0",St+At,_o(St-Nt,Nt+At));return{width:St+At,height:St,pathTop(Pn){return Pn?Wt:""},pathBottom(Pn){return Pn?cn:vn}}}makeOutsideCorner(){const St=this.constantProvider.CORNER_RADIUS,At=this.OFFSET,Nt=(1-Math.SQRT1_2)*(St-At)+At,Wt=ls(Nt,Nt)+Ts("a","0 0,1",St-At,_o(St-Nt,-Nt+At)),cn=ls(At,St)+Ts("a","0 0,1",St-At,_o(St,-St+At)),vn=-Nt,Pn=ls(Nt,vn)+Ts("a","0 0,1",St-At,_o(-Nt+At,-vn-St));return{height:St,topLeft(qn){return qn?Wt:cn},bottomLeft(){return Pn}}}makePuzzleTab(){const St=this.constantProvider.TAB_WIDTH,At=this.constantProvider.TAB_HEIGHT,Nt=ls(-2,-At+3.4)+Ru(-.45*St,-2.1),Wt=eo("v",2.5)+ls(.97*-St,2.5)+Ul("q",[_o(.05*-St,10),_o(.3*St,9.5)])+ls(.67*St,-1.9)+eo("v",2.5),cn=eo("v",-1.5)+ls(-.92*St,-.5)+Ul("q",[_o(-.19*St,-5.5),_o(0,-11)])+ls(.92*St,1),vn=ls(-5,At-.7)+Ru(.46*St,-2.1);return{width:St,height:At,pathUp(Pn){return Pn?Nt:cn},pathDown(Pn){return Pn?Wt:vn}}}makeNotch(){return{pathLeft:eo("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}}makeJaggedTeeth(){return{pathLeft:Ru(5.1,2.6)+ls(-10.2,6.8)+Ru(5.1,2.6),height:12,width:10.2}}makeStartHat(){const St=this.constantProvider.START_HAT.height,At=ls(25,-8.7)+Ul("c",[_o(29.7,-6.2),_o(57.2,-.5),_o(75,8.7)]),Nt=Ul("c",[_o(17.8,-9.2),_o(45.3,-14.9),_o(75,-8.7)])+Vs(100.5,St+.5);return{path(Wt){return Wt?At:Nt}}}},EE=class extends v${constructor(St,At){super(St,At),this.constants_=St,this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)}},xE=class extends y0{constructor(St,At){super(St,At),this.constants_=St,this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)}},wE=class extends kO{constructor(St,At){super(St,At),this.renderer_=St}getRenderer(){return this.renderer_}populateBottomRow_(){super.populateBottomRow_(),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type===No.STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)}addInput_(St,At){this.isInline&&St.type===No.VALUE?(At.elements.push(new EE(this.constants_,St)),At.hasInlineInput=!0):St.type===No.STATEMENT?(At.elements.push(new xE(this.constants_,St)),At.hasStatement=!0):St.type===No.VALUE?(At.elements.push(new qv(this.constants_,St)),At.hasExternalInput=!0):St.type===No.DUMMY&&(At.minHeight=Math.max(At.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),At.hasDummyInput=!0),this.isInline||At.align!==null||(At.align=St.align)}addElemSpacing_(){let St=!1;for(let Nt=0,Wt;Wt=this.rows[Nt];Nt++)Wt.hasExternalInput&&(St=!0);for(let Nt=0,Wt;Wt=this.rows[Nt];Nt++){var At=Wt.elements;if(Wt.elements=[],Wt.startsWithElemSpacer()&&Wt.elements.push(new bu(this.constants_,this.getInRowSpacing_(null,At[0]))),At.length){for(let cn=0;cn<At.length-1;cn++){Wt.elements.push(At[cn]);const vn=this.getInRowSpacing_(At[cn],At[cn+1]);Wt.elements.push(new bu(this.constants_,vn))}Wt.elements.push(At[At.length-1]),Wt.endsWithElemSpacer()&&(At=this.getInRowSpacing_(At[At.length-1],null),St&&Wt.hasDummyInput&&(At+=this.constants_.TAB_WIDTH),Wt.elements.push(new bu(this.constants_,At)))}}}getInRowSpacing_(St,At){if(!St)return At&&nr.isField(At)&&At.isEditable?this.constants_.MEDIUM_PADDING:At&&nr.isInlineInput(At)?this.constants_.MEDIUM_LARGE_PADDING:At&&nr.isStatementInput(At)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!nr.isInput(St)&&(!At||nr.isStatementInput(At)))return nr.isField(St)&&St.isEditable?this.constants_.MEDIUM_PADDING:nr.isIcon(St)?2*this.constants_.LARGE_PADDING+1:nr.isHat(St)?this.constants_.NO_PADDING:nr.isPreviousOrNextConnection(St)?this.constants_.LARGE_PADDING:nr.isLeftRoundedCorner(St)?this.constants_.MIN_BLOCK_WIDTH:nr.isJaggedEdge(St)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(nr.isInput(St)&&!At){if(nr.isExternalInput(St))return this.constants_.NO_PADDING;if(nr.isInlineInput(St))return this.constants_.LARGE_PADDING;if(nr.isStatementInput(St))return this.constants_.NO_PADDING}if(!nr.isInput(St)&&At&&nr.isInput(At)){if(nr.isField(St)&&St.isEditable){if(nr.isInlineInput(At)||nr.isExternalInput(At))return this.constants_.SMALL_PADDING}else{if(nr.isInlineInput(At)||nr.isExternalInput(At))return this.constants_.MEDIUM_LARGE_PADDING;if(nr.isStatementInput(At))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(nr.isIcon(St)&&At&&!nr.isInput(At))return this.constants_.LARGE_PADDING;if(nr.isInlineInput(St)&&At&&nr.isField(At))return At.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(nr.isLeftSquareCorner(St)&&At){if(nr.isHat(At))return this.constants_.NO_PADDING;if(nr.isPreviousConnection(At))return At.notchOffset;if(nr.isNextConnection(At))return At.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(nr.isLeftRoundedCorner(St)&&At){if(nr.isPreviousConnection(At))return At.notchOffset-this.constants_.CORNER_RADIUS;if(nr.isNextConnection(At))return At.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return nr.isField(St)&&At&&nr.isField(At)&&St.isEditable===At.isEditable||At&&nr.isJaggedEdge(At)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(St,At){return nr.isTopRow(St)&&nr.isBottomRow(At)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:nr.isTopRow(St)||nr.isBottomRow(At)?this.constants_.NO_PADDING:St.hasExternalInput&&At.hasExternalInput?this.constants_.LARGE_PADDING:!St.hasStatement&&At.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:St.hasStatement&&At.hasStatement||!St.hasStatement&&At.hasDummyInput||St.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(St,At){if(nr.isSpacer(At))return St.yPos+At.height/2;if(nr.isBottomRow(St))return St=St.yPos+St.height-St.descenderHeight,nr.isNextConnection(At)?St+At.height/2:St-At.height/2;if(nr.isTopRow(St))return nr.isHat(At)?St.capline-At.height/2:St.capline+At.height/2;let Nt=St.yPos;return nr.isField(At)||nr.isIcon(At)?(Nt+=At.height/2,(St.hasInlineInput||St.hasStatement)&&At.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=St.height&&(Nt+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):Nt=nr.isInlineInput(At)?Nt+At.height/2:Nt+St.height/2,Nt}alignRowElements_(){if(this.isInline){var St=0,At=new WeakMap,Nt=null;for(let Wt=this.rows.length-1,cn;cn=this.rows[Wt];Wt--)At.set(cn,St),nr.isInputRow(cn)&&(cn.hasStatement&&this.alignStatementRow_(cn),Nt&&Nt.hasStatement&&cn.width<Nt.width?At.set(cn,Nt.width):St=cn.width,Nt=cn);St=0;for(let Wt=0,cn;cn=this.rows[Wt];Wt++)cn.hasStatement?St=this.getDesiredRowWidth_(cn):nr.isSpacer(cn)?cn.width=Math.max(St,At.get(cn)):(Nt=cn.width,St=Math.max(St,At.get(cn))-Nt,0<St&&this.addAlignmentPadding_(cn,St),St=cn.width)}else super.alignRowElements_()}getDesiredRowWidth_(St){return this.isInline&&St.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:super.getDesiredRowWidth_(St)}finalize_(){let St=0,At=0;for(let Wt=0,cn;cn=this.rows[Wt];Wt++){cn.yPos=At,cn.xPos=this.startX,At+=cn.height,St=Math.max(St,cn.widthWithConnectedBlocks);var Nt=At-this.topRow.ascenderHeight;cn===this.bottomRow&&Nt<this.constants_.MIN_BLOCK_HEIGHT&&(Nt=this.constants_.MIN_BLOCK_HEIGHT-Nt,this.bottomRow.height+=Nt,At+=Nt),this.recordElemPositions_(cn)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(Nt=this.block_.nextConnection.targetBlock())&&(St=Math.max(St,Nt.getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=At-this.bottomRow.descenderHeight,this.widthWithChildren=St+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=At+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline}},CE=class extends Kv{constructor(St,At,Nt){super(St,At,Nt),this.constants=Nt,this.colourDark="#000000",this.svgPathDark=Mn(ar.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"}),this.svgRoot.insertBefore(this.svgPathDark,this.svgPath),this.svgPathLight=Mn(ar.PATH,{class:"blocklyPathLight"},this.svgRoot)}setPath(St){this.svgPath.setAttribute("d",St),this.svgPathDark.setAttribute("d",St)}setHighlightPath(St){this.svgPathLight.setAttribute("d",St)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")}applyColour(St){if(this.svgPathLight.style.display="",this.svgPathDark.style.display="",!this.style.colourTertiary)throw Error("The renderer did not properly initialize the tertiary colour of the block style");this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),super.applyColour(St),this.svgPath.setAttribute("stroke","none")}setStyle(St){this.style=St,this.colourDark=mu("#000",this.style.colourPrimary,.2)||this.colourDark}updateHighlighted(St){St?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")}updateShadow_(St){if(St){if(this.svgPathLight.style.display="none",!this.style.colourSecondary)throw Error("The renderer did not properly initialize the secondary colour of the block style block style");this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)}}updateDisabled_(St){super.updateDisabled_(St),St&&this.svgPath.setAttribute("stroke","none")}},AE=class extends T0{constructor(St){super(St),this.highlightConstants_=null}init(St,At){super.init(St,At),this.highlightConstants_=this.makeHighlightConstants_(),this.highlightConstants_.init()}refreshDom(St,At){super.refreshDom(St,At),this.getHighlightConstants().init()}makeConstants_(){return new bE}makeRenderInfo_(St){return new wE(this,St)}makeDrawer_(St,At){return new $E(St,At)}makePathObject(St,At){return new CE(St,At,this.getConstants())}makeHighlightConstants_(){return new TE(this.getConstants())}getHighlightConstants(){if(!this.highlightConstants_)throw Error("Cannot access the highlight constants because init has not been called");return this.highlightConstants_}};zu("geras",AE);var bp={};bp.ConstantProvider=bE,bp.Drawer=$E,bp.HighlightConstantProvider=TE,bp.Highlighter=SE,bp.InlineInput=EE,bp.PathObject=CE,bp.RenderInfo=wE,bp.Renderer=AE,bp.StatementInput=xE;var IE=class{constructor(St){this.container=St,this.previousSibling=null,this.createDom()}createDom(){this.SVG||(this.SVG=Mn(ar.SVG,{xmlns:Wl,"xmlns:html":vu,"xmlns:xlink":ou,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"}),this.container.appendChild(this.SVG))}translateSurface(St,At){St=Math.round(St),At=Math.round(At),this.SVG.style.display="block",Yr(this.SVG,"translate3d("+St+"px, "+At+"px, 0)")}getSurfaceTranslation(){return Ll(this.SVG)}clearAndHide(St){if(!St)throw Error("Couldn't clear and hide the drag surface: missing new surface.");const At=this.SVG.childNodes[0],Nt=this.SVG.childNodes[1];if(!At||!Nt||!At.classList.contains("blocklyBlockCanvas")&&Nt.classList.contains("blocklyBubbleCanvas"))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(this.previousSibling!==null?Vr(At,this.previousSibling):St.insertBefore(At,St.firstChild),Vr(Nt,At),this.SVG.style.display="none",this.SVG.childNodes.length)throw Error("Drag surface was not cleared.");Yr(this.SVG,""),this.previousSibling=null}setContentsAndShow(St,At,Nt,Wt,cn,vn){if(this.SVG.childNodes.length)throw Error("Already dragging a block.");this.previousSibling=Nt,St.setAttribute("transform","translate(0, 0) scale("+vn+")"),At.setAttribute("transform","translate(0, 0) scale("+vn+")"),this.SVG.setAttribute("width",String(Wt)),this.SVG.setAttribute("height",String(cn)),this.SVG.appendChild(St),this.SVG.appendChild(At),this.SVG.style.display="block"}},RE=class{constructor(St){this.container=St,this.scale=1,this.surfaceXY=new qr(0,0),this.childSurfaceXY=new qr(0,0),this.svg=Mn(ar.SVG,{xmlns:Wl,"xmlns:html":vu,"xmlns:xlink":ou,version:"1.1",class:"blocklyBlockDragSurface"},this.container),this.dragGroup=Mn(ar.G,{},this.svg)}createDom(){vt("BlockDragSurfaceSvg createDom","June 2022","June 2023")}setBlocksAndShow(St){if(this.dragGroup.childNodes.length)throw Error("Already dragging a block.");this.dragGroup.appendChild(St),this.svg.style.display="block",this.surfaceXY=new qr(0,0)}translateAndScaleGroup(St,At,Nt){this.scale=Nt,St=Math.round(St),At=Math.round(At),this.childSurfaceXY.x=St,this.childSurfaceXY.y=At,this.dragGroup.setAttribute("transform","translate("+St+","+At+") scale("+Nt+")")}translateSurfaceInternal_(){const St=Math.round(this.surfaceXY.x),At=Math.round(this.surfaceXY.y);this.svg.style.display="block",Yr(this.svg,"translate3d("+St+"px, "+At+"px, 0)")}translateBy(St,At){this.surfaceXY=new qr(this.surfaceXY.x+St,this.surfaceXY.y+At),this.translateSurfaceInternal_()}translateSurface(St,At){this.surfaceXY=new qr(St*this.scale,At*this.scale),this.translateSurfaceInternal_()}getSurfaceTranslation(){const St=Ll(this.svg);return new qr(St.x/this.scale,St.y/this.scale)}getGroup(){return this.dragGroup}getSvgRoot(){return this.svg}getCurrentBlock(){return this.dragGroup.firstChild}getWsTranslation(){return this.childSurfaceXY.clone()}clearAndHide(St){const At=this.getCurrentBlock();if(At&&(St?St.appendChild(At):this.dragGroup.removeChild(At)),this.svg.style.display="none",this.dragGroup.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY=new qr(0,0)}},Jv={};Jv.bumpIntoBounds=_m,Jv.bumpIntoBoundsHandler=r_,Jv.bumpTopObjectsIntoBounds=Hs;var k$=class{constructor(St,At,Nt,Wt,cn){this.workspace=St,this.oldHostMetrics_=this.corner_=this.vScroll=this.hScroll=null,At=At===void 0?!0:At,Nt=Nt===void 0?!0:Nt;const vn=At&&Nt;At&&(this.hScroll=new Ss(St,!0,vn,Wt,cn)),Nt&&(this.vScroll=new Ss(St,!1,vn,Wt,cn)),vn&&(this.corner_=Mn(ar.RECT,{height:Ss.scrollbarThickness,width:Ss.scrollbarThickness,class:"blocklyScrollbarBackground"}),Vr(this.corner_,St.getBubbleCanvas()))}dispose(){Sr(this.corner_),this.oldHostMetrics_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)}resize(){const St=this.workspace.getMetrics();if(St){var At=!1,Nt=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth===St.viewWidth&&this.oldHostMetrics_.viewHeight===St.viewHeight&&this.oldHostMetrics_.absoluteTop===St.absoluteTop&&this.oldHostMetrics_.absoluteLeft===St.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth===St.scrollWidth&&this.oldHostMetrics_.viewLeft===St.viewLeft&&this.oldHostMetrics_.scrollLeft===St.scrollLeft||(At=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight===St.scrollHeight&&this.oldHostMetrics_.viewTop===St.viewTop&&this.oldHostMetrics_.scrollTop===St.scrollTop||(Nt=!0)):Nt=At=!0,At||Nt){try{Fo(),this.hScroll&&At&&this.hScroll.resize(St),this.vScroll&&Nt&&this.vScroll.resize(St)}finally{vo()}this.workspace.maybeFireViewportChangeEvent()}if(this.hScroll&&this.vScroll){if(!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==St.viewWidth||this.oldHostMetrics_.absoluteLeft!==St.absoluteLeft){let Wt;(Wt=this.corner_)==null||Wt.setAttribute("x",String(this.vScroll.position.x))}if(!this.oldHostMetrics_||this.oldHostMetrics_.viewHeight!==St.viewHeight||this.oldHostMetrics_.absoluteTop!==St.absoluteTop){let Wt;(Wt=this.corner_)==null||Wt.setAttribute("y",String(this.hScroll.position.y))}}this.oldHostMetrics_=St}}canScrollHorizontally(){return!!this.hScroll}canScrollVertically(){return!!this.vScroll}setOrigin(St,At){this.hScroll&&this.hScroll.setOrigin(St,At),this.vScroll&&this.vScroll.setOrigin(St,At)}set(St,At,Nt){this.hScroll&&this.hScroll.set(St,!1),this.vScroll&&this.vScroll.set(At,!1),(Nt||Nt===void 0)&&(St={},this.hScroll&&(St.x=this.hScroll.getRatio_()),this.vScroll&&(St.y=this.vScroll.getRatio_()),this.workspace.setMetrics(St))}setX(St){this.hScroll&&this.hScroll.set(St,!0)}setY(St){this.vScroll&&this.vScroll.set(St,!0)}setContainerVisible(St){this.hScroll&&this.hScroll.setContainerVisible(St),this.vScroll&&this.vScroll.setContainerVisible(St)}isVisible(){let St=!1;return this.hScroll&&(St=this.hScroll.isVisible()),this.vScroll&&(St=St||this.vScroll.isVisible()),St}resizeContent(St){this.hScroll&&this.hScroll.resizeContentHorizontal(St),this.vScroll&&this.vScroll.resizeContentVertical(St)}resizeView(St){this.hScroll&&this.hScroll.resizeViewHorizontal(St),this.vScroll&&this.vScroll.resizeViewVertical(St)}},kE=!1;dt.CodeGenerator$$module$build$src$core$generator=class{constructor(St){this.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",this.STATEMENT_SUFFIX=this.STATEMENT_PREFIX=this.INFINITE_LOOP_TRAP=null,this.INDENT="  ",this.COMMENT_WRAP=60,this.ORDER_OVERRIDES=[],this.isInitialized=null,this.RESERVED_WORDS_="",this.definitions_=Object.create(null),this.functionNames_=Object.create(null),this.nameDB_=void 0,this.name_=St,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")}workspaceToCode(St){St||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),St=In());var At=[];this.init(St),St=St.getTopBlocks(!0);for(let Nt=0,Wt;Wt=St[Nt];Nt++){let cn=this.blockToCode(Wt);Array.isArray(cn)&&(cn=cn[0]),cn&&(Wt.outputConnection&&(cn=this.scrubNakedValue(cn),this.STATEMENT_PREFIX&&!Wt.suppressPrefixSuffix&&(cn=this.injectId(this.STATEMENT_PREFIX,Wt)+cn),this.STATEMENT_SUFFIX&&!Wt.suppressPrefixSuffix&&(cn+=this.injectId(this.STATEMENT_SUFFIX,Wt))),At.push(cn))}return At=At.join(`
`),At=this.finish(At),At=At.replace(/^\s+\n/,""),At=At.replace(/\n\s+$/,`
`),At=At.replace(/[ \t]+\n/g,`
`)}prefixLines(St,At){return At+St.replace(/(?!\n$)\n/g,`
`+At)}allNestedComments(St){const At=[];St=St.getDescendants(!0);for(let Nt=0;Nt<St.length;Nt++){const Wt=St[Nt].getCommentText();Wt&&At.push(Wt)}return At.length&&At.push(""),At.join(`
`)}blockToCode(St,At){if(this.isInitialized===!1&&console.warn("CodeGenerator init was not called before blockToCode was called."),!St)return"";if(!St.isEnabled())return At?"":this.blockToCode(St.getNextBlock());if(St.isInsertionMarker())return At?"":this.blockToCode(St.getChildren(!1)[0]);var Nt=this[St.type];if(typeof Nt!="function")throw Error('Language "'+this.name_+'" does not know how to generate code for block type "'+St.type+'".');if(Nt=Nt.call(St,St),Array.isArray(Nt)){if(!St.outputConnection)throw TypeError("Expecting string from statement block: "+St.type);return[this.scrub_(St,Nt[0],At),Nt[1]]}if(typeof Nt=="string")return this.STATEMENT_PREFIX&&!St.suppressPrefixSuffix&&(Nt=this.injectId(this.STATEMENT_PREFIX,St)+Nt),this.STATEMENT_SUFFIX&&!St.suppressPrefixSuffix&&(Nt+=this.injectId(this.STATEMENT_SUFFIX,St)),this.scrub_(St,Nt,At);if(Nt===null)return"";throw SyntaxError("Invalid code generated: "+Nt)}valueToCode(St,At,Nt){if(isNaN(Nt))throw TypeError("Expecting valid order from block: "+St.type);var Wt=St.getInputTargetBlock(At);if(!Wt||(At=this.blockToCode(Wt),At===""))return"";if(!Array.isArray(At))throw TypeError("Expecting tuple from value block: "+Wt.type);if(St=At[0],At=At[1],isNaN(At))throw TypeError("Expecting valid order from value block: "+Wt.type);if(!St)return"";Wt=!1;var cn=Math.floor(Nt);const vn=Math.floor(At);if(cn<=vn&&(cn!==vn||cn!==0&&cn!==99)){for(Wt=!0,cn=0;cn<this.ORDER_OVERRIDES.length;cn++)if(this.ORDER_OVERRIDES[cn][0]===Nt&&this.ORDER_OVERRIDES[cn][1]===At){Wt=!1;break}}return Wt&&(St="("+St+")"),St}statementToCode(St,At){if(St=St.getInputTargetBlock(At),At=this.blockToCode(St),typeof At!="string")throw TypeError("Expecting code from statement block: "+(St&&St.type));return At&&(At=this.prefixLines(At,this.INDENT)),At}addLoopTrap(St,At){return this.INFINITE_LOOP_TRAP&&(St=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,At),this.INDENT)+St),this.STATEMENT_SUFFIX&&!At.suppressPrefixSuffix&&(St=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,At),this.INDENT)+St),this.STATEMENT_PREFIX&&!At.suppressPrefixSuffix&&(St+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,At),this.INDENT)),St}injectId(St,At){return At=At.id.replace(/\$/g,"$$$$"),St.replace(/%1/g,"'"+At+"'")}addReservedWords(St){this.RESERVED_WORDS_+=St+","}provideFunction_(St,At){if(!this.definitions_[St]){const Nt=this.nameDB_.getDistinctName(St,dt.NameType$$module$build$src$core$names.PROCEDURE);this.functionNames_[St]=Nt,Array.isArray(At)&&(At=At.join(`
`)),At=At.trim().replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,Nt);let Wt;for(;Wt!==At;)Wt=At,At=At.replace(/^(( {2})*) {2}/gm,"$1\0");At=At.replace(/\0/g,this.INDENT),this.definitions_[St]=At}return this.functionNames_[St]}init(St){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)}scrub_(St,At,Nt){return At}finish(St){return this.definitions_=Object.create(null),this.functionNames_=Object.create(null),St}scrubNakedValue(St){return St}},Object.defineProperties(dt.CodeGenerator$$module$build$src$core$generator.prototype,{variableDB_:{get(){return vt("variableDB_","version 9","version 10","nameDB_"),this.nameDB_},set(St){vt("variableDB_","version 9","version 10","nameDB_"),this.nameDB_=St}}}),dt.CodeGenerator$$module$build$src$core$generator;var MO=class{constructor(St,At,Nt,Wt){this.workspace=St,this.targetWorkspace=At,this.isLabel_=Wt,this.onMouseUpWrapper_=null,this.height=this.width=0,this.svgText_=this.svgGroup_=null,this.text_=Nt.text,this.position_=new qr(0,0),this.callbackKey_=Nt.callbackKey||Nt.callbackkey,this.cssClass_=Nt["web-class"]||null,this.info=Nt}createDom(){var St=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";this.cssClass_&&(St+=" "+this.cssClass_),this.svgGroup_=Mn(ar.G,{class:St},this.workspace.getCanvas());let At;this.isLabel_||(At=Mn(ar.RECT,{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_)),St=Mn(ar.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);const Nt=Mn(ar.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_);var Wt=fs(this.text_);this.workspace.RTL&&(Wt+="‏"),Nt.textContent=Wt,this.isLabel_&&(this.svgText_=Nt,this.workspace.getThemeManager().subscribe(this.svgText_,"flyoutForegroundColour","fill"));const cn=Un(Nt,"fontSize"),vn=Un(Nt,"fontWeight"),Pn=Un(Nt,"fontFamily");if(this.width=so(Nt,cn,vn,Pn),Wt=jr(Wt,cn,vn,Pn),this.height=Wt.height,!this.isLabel_){this.width+=2*MO.TEXT_MARGIN_X,this.height+=2*MO.TEXT_MARGIN_Y;let qn;(qn=At)==null||qn.setAttribute("width",this.width.toString());let Ar;(Ar=At)==null||Ar.setAttribute("height",this.height.toString())}return St.setAttribute("width",this.width.toString()),St.setAttribute("height",this.height.toString()),Nt.setAttribute("x",(this.width/2).toString()),Nt.setAttribute("y",(this.height/2-Wt.height/2+Wt.baseline).toString()),this.updateTransform_(),this.onMouseUpWrapper_=Kt(this.svgGroup_,"pointerup",this,this.onMouseUp_),this.svgGroup_}show(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")}updateTransform_(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")}moveTo(St,At){this.position_.x=St,this.position_.y=At,this.updateTransform_()}isLabel(){return this.isLabel_}getPosition(){return this.position_}getButtonText(){return this.text_}getTargetWorkspace(){return this.targetWorkspace}dispose(){this.onMouseUpWrapper_&&hn(this.onMouseUpWrapper_),this.svgGroup_&&Sr(this.svgGroup_),this.svgText_&&this.workspace.getThemeManager().unsubscribe(this.svgText_)}onMouseUp_(St){(St=this.targetWorkspace.getGesture(St))&&St.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace.getButtonCallback(this.callbackKey_)?this.isLabel_||(St=this.targetWorkspace.getButtonCallback(this.callbackKey_))&&St(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)}};MO.TEXT_MARGIN_X=5,MO.TEXT_MARGIN_Y=2,hu(`
.blocklyFlyoutButton {
  fill: #888;
  cursor: default;
}

.blocklyFlyoutButtonShadow {
  fill: #666;
}

.blocklyFlyoutButton:hover {
  fill: #aaa;
}

.blocklyFlyoutLabel {
  cursor: default;
}

.blocklyFlyoutLabelBackground {
  opacity: 0;
}
`);var M$=class{constructor(St){this.workspace_=St}getDimensionsPx_(St){let At=0,Nt=0;return St&&(At=St.getWidth(),Nt=St.getHeight()),new Ks(At,Nt)}getFlyoutMetrics(St){return St=this.getDimensionsPx_(this.workspace_.getFlyout(St)),{width:St.width,height:St.height,position:this.workspace_.toolboxPosition}}getToolboxMetrics(){const St=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:St.width,height:St.height,position:this.workspace_.toolboxPosition}}getSvgMetrics(){return this.workspace_.getCachedParentSvgSize()}getAbsoluteMetrics(){let St=0;const At=this.getToolboxMetrics(),Nt=this.getFlyoutMetrics(!0),Wt=!!this.workspace_.getToolbox(),cn=!!this.workspace_.getFlyout(!0);var vn=Wt?At.position:Nt.position,Pn=vn===Ao.LEFT;return vn=vn===Ao.TOP,Wt&&Pn?St=At.width:cn&&Pn&&(St=Nt.width),Pn=0,Wt&&vn?Pn=At.height:cn&&vn&&(Pn=Nt.height),{top:Pn,left:St}}getViewMetrics(St){St=St?this.workspace_.scale:1;const At=this.getSvgMetrics(),Nt=this.getToolboxMetrics(),Wt=this.getFlyoutMetrics(!0),cn=this.workspace_.getToolbox()?Nt.position:Wt.position;return this.workspace_.getToolbox()?cn===Ao.TOP||cn===Ao.BOTTOM?At.height-=Nt.height:(cn===Ao.LEFT||cn===Ao.RIGHT)&&(At.width-=Nt.width):this.workspace_.getFlyout(!0)&&(cn===Ao.TOP||cn===Ao.BOTTOM?At.height-=Wt.height:(cn===Ao.LEFT||cn===Ao.RIGHT)&&(At.width-=Wt.width)),{height:At.height/St,width:At.width/St,top:-this.workspace_.scrollY/St,left:-this.workspace_.scrollX/St}}getContentMetrics(St){St=St?1:this.workspace_.scale;const At=this.workspace_.getBlocksBoundingBox();return{height:(At.bottom-At.top)*St,width:(At.right-At.left)*St,top:At.top*St,left:At.left*St}}hasFixedEdges(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()}getComputedFixedEdges_(St){if(!this.hasFixedEdges())return{};const At=this.workspace_.isMovableHorizontally(),Nt=this.workspace_.isMovableVertically();St=St||this.getViewMetrics(!1);const Wt={};return Nt||(Wt.top=St.top,Wt.bottom=St.top+St.height),At||(Wt.left=St.left,Wt.right=St.left+St.width),Wt}getPaddedContent_(St,At){const Nt=At.top+At.height,Wt=At.left+At.width,cn=St.width;St=St.height;const vn=cn/2,Pn=St/2;return{top:Math.min(At.top-Pn,Nt-St),bottom:Math.max(Nt+Pn,At.top+St),left:Math.min(At.left-vn,Wt-cn),right:Math.max(Wt+vn,At.left+cn)}}getScrollMetrics(St,At,Nt){St=St?this.workspace_.scale:1,At=At||this.getViewMetrics(!1);var Wt=Nt||this.getContentMetrics();Nt=this.getComputedFixedEdges_(At),At=this.getPaddedContent_(At,Wt),Wt=Nt.top!==void 0?Nt.top:At.top;const cn=Nt.left!==void 0?Nt.left:At.left;return{top:Wt/St,left:cn/St,width:((Nt.right!==void 0?Nt.right:At.right)-cn)/St,height:((Nt.bottom!==void 0?Nt.bottom:At.bottom)-Wt)/St}}getUiMetrics(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}}getMetrics(){const St=this.getToolboxMetrics(),At=this.getFlyoutMetrics(!0),Nt=this.getSvgMetrics(),Wt=this.getAbsoluteMetrics(),cn=this.getViewMetrics(),vn=this.getContentMetrics(),Pn=this.getScrollMetrics(!1,cn,vn);return{contentHeight:vn.height,contentWidth:vn.width,contentTop:vn.top,contentLeft:vn.left,scrollHeight:Pn.height,scrollWidth:Pn.width,scrollTop:Pn.top,scrollLeft:Pn.left,viewHeight:cn.height,viewWidth:cn.width,viewTop:cn.top,viewLeft:cn.left,absoluteTop:Wt.top,absoluteLeft:Wt.left,svgHeight:Nt.height,svgWidth:Nt.width,toolboxWidth:St.width,toolboxHeight:St.height,toolboxPosition:St.position,flyoutWidth:At.width,flyoutHeight:At.height}}};wo(Hr.METRICS_MANAGER,Fp,M$);var ME=class extends M${constructor(St,At){super(St),this.flyout_=At}getBoundingBox_(){let St;try{St=this.workspace_.getCanvas().getBBox()}catch{St={height:0,y:0,width:0,x:0}}return St}getContentMetrics(St){const At=this.getBoundingBox_();return St=St?1:this.workspace_.scale,{height:At.height*St,width:At.width*St,top:At.y*St,left:At.x*St}}getScrollMetrics(St,At,Nt){return At=Nt||this.getContentMetrics(),Nt=this.flyout_.MARGIN*this.workspace_.scale,St=St?this.workspace_.scale:1,{height:(At.height+2*Nt)/St,width:(At.width+At.left+Nt)/St,top:0,left:0}}},PO;(function(St){St.BLOCK="block",St.BUTTON="button"})(PO||(PO={}));var _b=class extends jv{constructor(St){super(),this.horizontalLayout=!1,this.eventWrappers_=[],this.filterWrapper_=this.reflowWrapper_=null,this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.recycledBlocks_=[],this.autoClose=!0,this.isVisible_=!1,this.containerVisible_=!0,this.CORNER_RADIUS=8,this.SCROLLBAR_MARGIN=2.5,this.height_=this.width_=0,this.dragAngleRange_=70,this.svgGroup_=this.svgBackground_=null,St.setMetrics=this.setMetrics_.bind(this),this.workspace_=new _f(St),this.workspace_.setMetricsManager(new ME(this.workspace_,this)),this.workspace_.internalIsFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=xo(),this.RTL=!!St.RTL,this.toolboxPosition_=St.toolboxPosition,this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.rectMap_=new WeakMap,this.MARGIN=this.CORNER_RADIUS,this.GAP_X=3*this.MARGIN,this.GAP_Y=3*this.MARGIN}createDom(St){return this.svgGroup_=Mn(St,{class:"blocklyFlyout",style:"display: none"}),this.svgBackground_=Mn(ar.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_}init(St){this.targetWorkspace=St,this.workspace_.targetWorkspace=St,this.workspace_.scrollbar=new k$(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),Array.prototype.push.apply(this.eventWrappers_,Kt(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,Kt(this.svgBackground_,"pointerdown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),St.getComponentManager().addComponent({component:this,weight:1,capabilities:[Js.Capability.DELETE_AREA,Js.Capability.DRAG_TARGET]})}dispose(){this.hide(),this.workspace_.getComponentManager().removeComponent(this.id),hn(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.dispose()),this.svgGroup_&&(Sr(this.svgGroup_),this.svgGroup_=null),this.svgBackground_=null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyoutScale(){return this.targetWorkspace.scale}getWorkspace(){return this.workspace_}isVisible(){return this.isVisible_}setVisible(St){const At=St!==this.isVisible();this.isVisible_=St,At&&(this.autoClose||this.workspace_.recordDragTargets(),this.updateDisplay_())}setContainerVisible(St){const At=St!==this.containerVisible_;this.containerVisible_=St,At&&this.updateDisplay_()}updateDisplay_(){let St;St=this.containerVisible_?this.isVisible():!1,this.svgGroup_&&(this.svgGroup_.style.display=St?"block":"none");let At;(At=this.workspace_.scrollbar)==null||At.setContainerVisible(St)}positionAt_(St,At,Nt,Wt){let cn;(cn=this.svgGroup_)==null||cn.setAttribute("width",St.toString());let vn;(vn=this.svgGroup_)==null||vn.setAttribute("height",At.toString()),this.workspace_.setCachedParentSvgSize(St,At);let Pn;if(((Pn=this.svgGroup_)==null?void 0:Pn.tagName)==="svg")Yr(this.svgGroup_,"translate("+Nt+"px,"+Wt+"px)");else{let qn;(qn=this.svgGroup_)==null||qn.setAttribute("transform","translate("+Nt+","+Wt+")")}(St=this.workspace_.scrollbar)&&(St.setOrigin(Nt,Wt),St.resize(),St.hScroll&&St.hScroll.setPosition(St.hScroll.position.x,St.hScroll.position.y),St.vScroll&&St.vScroll.setPosition(St.vScroll.position.x,St.vScroll.position.y))}hide(){if(this.isVisible()){this.setVisible(!1);for(let St=0,At;At=this.listeners_[St];St++)hn(At);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}}show(St){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),typeof St=="string"&&(St=this.getDynamicCategoryContents_(St)),this.setVisible(!0),St=sm(St),St=this.createFlyoutInfo_(St),this.layout_(St.contents,St.gaps),this.listeners_.push(Kt(this.svgBackground_,"pointerover",this,function(){const At=this.workspace_.getTopBlocks(!1);for(let Nt=0,Wt;Wt=At[Nt];Nt++)Wt.removeSelect()})),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_),this.emptyRecycledBlocks_()}createFlyoutInfo_(St){const At=[],Nt=[];this.permanentlyDisabled_.length=0;const Wt=this.horizontalLayout?this.GAP_X:this.GAP_Y;for(let vn=0,Pn;Pn=St[vn];vn++){if("custom"in Pn){var cn=this.getDynamicCategoryContents_(Pn.custom);cn=sm(cn),St.splice.apply(St,[vn,1,...cn]),Pn=St[vn]}switch(Pn.kind.toUpperCase()){case"BLOCK":cn=Pn;const qn=this.createFlyoutBlock_(cn);At.push({type:PO.BLOCK,block:qn}),this.addBlockGap_(cn,Nt,Wt);break;case"SEP":this.addSeparatorGap_(Pn,Nt,Wt);break;case"LABEL":cn=this.createButton_(Pn,!0),At.push({type:PO.BUTTON,button:cn}),Nt.push(Wt);break;case"BUTTON":cn=this.createButton_(Pn,!1),At.push({type:PO.BUTTON,button:cn}),Nt.push(Wt)}}return{contents:At,gaps:Nt}}getDynamicCategoryContents_(St){if(St=this.workspace_.targetWorkspace.getToolboxCategoryCallback(St),typeof St!="function")throw TypeError("Couldn't find a callback function when opening a toolbox category.");return St(this.workspace_.targetWorkspace)}createButton_(St,At){return new MO(this.workspace_,this.targetWorkspace,St,At)}createFlyoutBlock_(St){let At;return St.blockxml?(St=typeof St.blockxml=="string"?ga(St.blockxml):St.blockxml,(At=this.getRecycledBlock_(St.getAttribute("type")))||(At=Gu(St,this.workspace_))):(At=this.getRecycledBlock_(St.type),At||(St.enabled===void 0&&(St.enabled=St.disabled!=="true"&&St.disabled!==!0),At=rp(St,this.workspace_))),At.isEnabled()||this.permanentlyDisabled_.push(At),At}getRecycledBlock_(St){let At=-1;for(let Nt=0;Nt<this.recycledBlocks_.length;Nt++)if(this.recycledBlocks_[Nt].type===St){At=Nt;break}return At===-1?void 0:this.recycledBlocks_.splice(At,1)[0]}addBlockGap_(St,At,Nt){let Wt;St.gap?Wt=parseInt(St.gap.toString()):St.blockxml&&(St=typeof St.blockxml=="string"?ga(St.blockxml):St.blockxml,Wt=parseInt(St.getAttribute("gap"))),At.push(!Wt||isNaN(Wt)?Nt:Wt)}addSeparatorGap_(St,At,Nt){St=parseInt(St.gap.toString()),!isNaN(St)&&0<At.length?At[At.length-1]=St:At.push(Nt)}clearOldBlocks_(){var St=this.workspace_.getTopBlocks(!1);for(let Nt=0,Wt;Wt=St[Nt];Nt++)this.blockIsRecyclable_(Wt)?this.recycleBlock_(Wt):Wt.dispose(!1,!1);for(St=0;St<this.mats_.length;St++){const Nt=this.mats_[St];Nt&&(ba(Nt),Sr(Nt))}this.mats_.length=0;for(let Nt=0,Wt;Wt=this.buttons_[Nt];Nt++)Wt.dispose();this.buttons_.length=0;let At;(At=this.workspace_.getPotentialVariableMap())==null||At.clear()}emptyRecycledBlocks_(){for(let St=0;St<this.recycledBlocks_.length;St++)this.recycledBlocks_[St].dispose();this.recycledBlocks_=[]}blockIsRecyclable_(St){return!1}recycleBlock_(St){const At=St.getRelativeToSurfaceXY();St.moveBy(-At.x,-At.y),this.recycledBlocks_.push(St)}addBlockListeners_(St,At,Nt){this.listeners_.push(Kt(St,"pointerdown",null,this.blockMouseDown_(At))),this.listeners_.push(Kt(Nt,"pointerdown",null,this.blockMouseDown_(At))),this.listeners_.push(ln(St,"pointerenter",At,At.addSelect)),this.listeners_.push(ln(St,"pointerleave",At,At.removeSelect)),this.listeners_.push(ln(Nt,"pointerenter",At,At.addSelect)),this.listeners_.push(ln(Nt,"pointerleave",At,At.removeSelect))}blockMouseDown_(St){return At=>{const Nt=this.targetWorkspace.getGesture(At);Nt&&(Nt.setStartBlock(St),Nt.handleFlyoutStart(At,this))}}onMouseDown_(St){const At=this.targetWorkspace.getGesture(St);At&&At.handleFlyoutStart(St,this)}isBlockCreatable(St){return St.isEnabled()}createBlock(St){let At=null;Fo();var Nt=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{At=this.placeNewBlock_(St)}finally{vo()}if(this.targetWorkspace.hideChaff(),St=FO(this.targetWorkspace,Nt),ss()){for(oo(!0),Nt=0;Nt<St.length;Nt++){const Wt=St[Nt];Gr(new(Wr(c_))(Wt))}Gr(new(Wr(Tl))(At))}return this.autoClose?this.hide():this.filterForCapacity_(),At}initFlyoutButton_(St,At,Nt){const Wt=St.createDom();St.moveTo(At,Nt),St.show(),this.listeners_.push(Kt(Wt,"pointerdown",this,this.onMouseDown_)),this.buttons_.push(St)}createRect_(St,At,Nt,Wt,cn){return At=Mn(ar.RECT,{"fill-opacity":0,x:At,y:Nt,height:Wt.height,width:Wt.width}),At.tooltip=St,Ep(At),this.workspace_.getCanvas().insertBefore(At,St.getSvgRoot()),this.rectMap_.set(St,At),this.mats_[cn]=At}moveRectToBlock_(St,At){const Nt=At.getHeightWidth();St.setAttribute("width",Nt.width.toString()),St.setAttribute("height",Nt.height.toString()),At=At.getRelativeToSurfaceXY(),St.setAttribute("y",At.y.toString()),St.setAttribute("x",(this.RTL?At.x-Nt.width:At.x).toString())}filterForCapacity_(){const St=this.workspace_.getTopBlocks(!1);for(let At=0,Nt;Nt=St[At];At++)if(this.permanentlyDisabled_.indexOf(Nt)===-1){const Wt=this.targetWorkspace.isCapacityAvailable(zn(Nt));for(;Nt;)Nt.setEnabled(Wt),Nt=Nt.getNextBlock()}}reflow(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)}isScrollable(){return this.workspace_.scrollbar?this.workspace_.scrollbar.isVisible():!1}placeNewBlock_(St){var At=this.targetWorkspace;if(!St.getSvgRoot())throw Error("oldBlock is not rendered.");const Nt=tu(St);return At.setResizesEnabled(!1),At=rp(Nt,At),this.positionNewBlock_(St,At),At}positionNewBlock_(St,At){const Nt=this.targetWorkspace;var Wt=Nt.getOriginOffsetInPixels(),cn=this.workspace_.getOriginOffsetInPixels();St=St.getRelativeToSurfaceXY(),St.scale(this.workspace_.scale),cn=qr.sum(cn,St),Wt=qr.difference(cn,Wt),Wt.scale(1/Nt.scale),At.moveTo(new qr(Wt.x,Wt.y))}};_b.FlyoutItemType=PO;var P$=class extends _b{constructor(St){super(St)}setMetrics_(St){if(this.isVisible()){var At=this.workspace_.getMetricsManager(),Nt=At.getScrollMetrics(),Wt=At.getViewMetrics();At=At.getAbsoluteMetrics(),typeof St.y=="number"&&(this.workspace_.scrollY=-(Nt.top+(Nt.height-Wt.height)*St.y)),this.workspace_.translate(this.workspace_.scrollX+At.left,this.workspace_.scrollY+At.top)}}getX(){if(!this.isVisible())return 0;var St=this.targetWorkspace.getMetricsManager();const At=St.getAbsoluteMetrics(),Nt=St.getViewMetrics();return St=St.getToolboxMetrics(),this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_===Ao.LEFT?St.width:Nt.width-this.width_:this.toolboxPosition_===Ao.LEFT?0:Nt.width:this.toolboxPosition_===Ao.LEFT?0:Nt.width+At.left-this.width_}getY(){return 0}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var St=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=St.height,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,St.height-2*this.CORNER_RADIUS),St=this.getX();var At=this.getY();this.positionAt_(this.width_,this.height_,St,At)}}setBackgroundPath_(St,At){const Nt=this.toolboxPosition_===Ao.RIGHT;var Wt=St+this.CORNER_RADIUS;Wt=["M "+(Nt?Wt:0)+",0"],Wt.push("h",Nt?-St:St),Wt.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,Nt?0:1,Nt?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),Wt.push("v",Math.max(0,At)),Wt.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,Nt?0:1,Nt?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),Wt.push("h",Nt?St:-St),Wt.push("z"),this.svgBackground_.setAttribute("d",Wt.join(" "))}scrollToStart(){let St;(St=this.workspace_.scrollbar)==null||St.setY(0)}wheel_(St){var At=On(St);if(At.y){const Nt=this.workspace_.getMetricsManager(),Wt=Nt.getScrollMetrics();At=Nt.getViewMetrics().top-Wt.top+At.y;let cn;(cn=this.workspace_.scrollbar)==null||cn.setY(At),$a(),us()}St.preventDefault(),St.stopPropagation()}layout_(St,At){this.workspace_.scale=this.targetWorkspace.scale;var Nt=this.MARGIN;const Wt=this.RTL?Nt:Nt+this.tabWidth_;for(let qn=0,Ar;Ar=St[qn];qn++)if(Ar.type==="block"){var cn=Ar.block,vn=cn.getDescendants(!1);for(let Xo=0,_s;_s=vn[Xo];Xo++)_s.isInFlyout=!0;cn.render(),vn=cn.getSvgRoot();const Kr=cn.getHeightWidth();var Pn=cn.outputConnection?Wt-this.tabWidth_:Wt;cn.moveBy(Pn,Nt),Pn=this.createRect_(cn,this.RTL?Pn-Kr.width:Pn,Nt,Kr,qn),this.addBlockListeners_(vn,cn,Pn),Nt+=Kr.height+At[qn]}else Ar.type==="button"&&(cn=Ar.button,this.initFlyoutButton_(cn,Wt,Nt),Nt+=cn.height+At[qn])}isDragTowardWorkspace(St){St=Math.atan2(St.y,St.x)/Math.PI*180;const At=this.dragAngleRange_;return St<At&&St>-At||St<-180+At||St>180-At}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const St=this.svgGroup_.getBoundingClientRect(),At=St.left;return this.toolboxPosition_===Ao.LEFT?new ws(-1e9,1e9,-1e9,At+St.width):new ws(-1e9,1e9,At,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let St=0;var At=this.workspace_.getTopBlocks(!1);for(let Wt=0,cn;cn=At[Wt];Wt++){var Nt=cn.getHeightWidth().width;cn.outputConnection&&(Nt-=this.tabWidth_),St=Math.max(St,Nt)}for(let Wt=0,cn;cn=this.buttons_[Wt];Wt++)St=Math.max(St,cn.width);if(St+=1.5*this.MARGIN+this.tabWidth_,St*=this.workspace_.scale,St+=Ss.scrollbarThickness,this.width_!==St){for(let Wt=0,cn;cn=At[Wt];Wt++){if(this.RTL){Nt=cn.getRelativeToSurfaceXY().x;let vn=St/this.workspace_.scale-this.MARGIN;cn.outputConnection||(vn-=this.tabWidth_),cn.moveBy(vn-Nt,0)}this.rectMap_.has(cn)&&this.moveRectToBlock_(this.rectMap_.get(cn),cn)}if(this.RTL)for(let Wt=0,cn;cn=this.buttons_[Wt];Wt++)At=cn.getPosition().y,cn.moveTo(St/this.workspace_.scale-cn.width-this.MARGIN-this.tabWidth_,At);this.targetWorkspace.toolboxPosition!==this.toolboxPosition_||this.toolboxPosition_!==Ao.LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+St,this.targetWorkspace.scrollY),this.width_=St,this.position(),this.targetWorkspace.recordDragTargets()}}};P$.registryName="verticalFlyout",wo(Hr.FLYOUTS_VERTICAL_TOOLBOX,Fp,P$);var PE=class extends _b{constructor(St){super(St),this.horizontalLayout=!0}setMetrics_(St){if(this.isVisible()){var At=this.workspace_.getMetricsManager(),Nt=At.getScrollMetrics(),Wt=At.getViewMetrics();At=At.getAbsoluteMetrics(),typeof St.x=="number"&&(this.workspace_.scrollX=-(Nt.left+(Nt.width-Wt.width)*St.x)),this.workspace_.translate(this.workspace_.scrollX+At.left,this.workspace_.scrollY+At.top)}}getX(){return 0}getY(){if(!this.isVisible())return 0;var St=this.targetWorkspace.getMetricsManager();const At=St.getAbsoluteMetrics(),Nt=St.getViewMetrics();St=St.getToolboxMetrics();const Wt=this.toolboxPosition_===Ao.TOP;return this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?Wt?St.height:Nt.height-this.height_:Wt?0:Nt.height:Wt?0:Nt.height+At.top-this.height_}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var St=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=St.width,this.setBackgroundPath_(St.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),St=this.getX();var At=this.getY();this.positionAt_(this.width_,this.height_,St,At)}}setBackgroundPath_(St,At){const Nt=this.toolboxPosition_===Ao.TOP,Wt=["M 0,"+(Nt?0:this.CORNER_RADIUS)];Nt?(Wt.push("h",St+2*this.CORNER_RADIUS),Wt.push("v",At),Wt.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),Wt.push("h",-St),Wt.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(Wt.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),Wt.push("h",St),Wt.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),Wt.push("v",At),Wt.push("h",-St-2*this.CORNER_RADIUS)),Wt.push("z"),this.svgBackground_.setAttribute("d",Wt.join(" "))}scrollToStart(){let St;(St=this.workspace_.scrollbar)==null||St.setX(this.RTL?1/0:0)}wheel_(St){var At=On(St);if(At=At.x||At.y){const Nt=this.workspace_.getMetricsManager(),Wt=Nt.getScrollMetrics();At=Nt.getViewMetrics().left-Wt.left+At;let cn;(cn=this.workspace_.scrollbar)==null||cn.setX(At),$a(),us()}St.preventDefault(),St.stopPropagation()}layout_(St,At){this.workspace_.scale=this.targetWorkspace.scale;const Nt=this.MARGIN;let Wt=Nt+this.tabWidth_;this.RTL&&(St=St.reverse());for(let qn=0,Ar;Ar=St[qn];qn++)if(Ar.type==="block"){var cn=Ar.block,vn=cn.getDescendants(!1);for(let Xo=0,_s;_s=vn[Xo];Xo++)_s.isInFlyout=!0;cn.render(),vn=cn.getSvgRoot();const Kr=cn.getHeightWidth();var Pn=cn.outputConnection?this.tabWidth_:0;Pn=this.RTL?Wt+Kr.width:Wt-Pn,cn.moveBy(Pn,Nt),Pn=this.createRect_(cn,Pn,Nt,Kr,qn),Wt+=Kr.width+At[qn],this.addBlockListeners_(vn,cn,Pn)}else Ar.type==="button"&&(cn=Ar.button,this.initFlyoutButton_(cn,Wt,Nt),Wt+=cn.width+At[qn])}isDragTowardWorkspace(St){St=Math.atan2(St.y,St.x)/Math.PI*180;const At=this.dragAngleRange_;return St<90+At&&St>90-At||St>-90-At&&St<-90+At}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const St=this.svgGroup_.getBoundingClientRect(),At=St.top;return this.toolboxPosition_===Ao.TOP?new ws(-1e9,At+St.height,-1e9,1e9):new ws(At,1e9,-1e9,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let St=0;const At=this.workspace_.getTopBlocks(!1);for(let Wt=0,cn;cn=At[Wt];Wt++)St=Math.max(St,cn.getHeightWidth().height);const Nt=this.buttons_;for(let Wt=0,cn;cn=Nt[Wt];Wt++)St=Math.max(St,cn.height);if(St+=1.5*this.MARGIN,St*=this.workspace_.scale,St+=Ss.scrollbarThickness,this.height_!==St){for(let Wt=0,cn;cn=At[Wt];Wt++)this.rectMap_.has(cn)&&this.moveRectToBlock_(this.rectMap_.get(cn),cn);this.targetWorkspace.toolboxPosition!==this.toolboxPosition_||this.toolboxPosition_!==Ao.TOP||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+St),this.height_=St,this.position(),this.targetWorkspace.recordDragTargets()}}};wo(Hr.FLYOUTS_HORIZONTAL_TOOLBOX,Fp,PE);var w0=class extends Ju{constructor(St,At,Nt,Wt,cn){super(Qo.SKIP_SETUP),this.defaultType_="",this.variableTypes=[],this.variable_=null,this.SERIALIZABLE=!0,this.menuGenerator_=w0.dropdownCreate,this.defaultVariableName=typeof St=="string"?St:"",this.size_=new Ks(0,0),St!==Qo.SKIP_SETUP&&(cn?this.configure_(cn):this.setTypes_(Nt,Wt),At&&this.setValidator(At))}configure_(St){super.configure_(St),this.setTypes_(St.variableTypes,St.defaultType)}initModel(){var St=this.getSourceBlock();if(!St)throw new Ds;this.variable_||(St=Im(St.workspace,null,this.defaultVariableName,this.defaultType_),this.doValueUpdate_(St.getId()))}shouldAddBorderRect_(){const St=this.getSourceBlock();if(!St)throw new Ds;return super.shouldAddBorderRect_()&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||St.type!=="variables_get")}fromXml(St){var At=this.getSourceBlock();if(!At)throw new Ds;const Nt=St.getAttribute("id"),Wt=St.textContent,cn=St.getAttribute("variabletype")||St.getAttribute("variableType")||"";if(At=Im(At.workspace,Nt,Wt,cn),cn!==null&&cn!==At.type)throw Error("Serialized variable type with id '"+At.getId()+"' had type "+At.type+", and does not match variable field that references it: "+Zl(St)+".");this.setValue(At.getId())}toXml(St){return this.initModel(),St.id=this.variable_.getId(),St.textContent=this.variable_.name,this.variable_.type&&St.setAttribute("variabletype",this.variable_.type),St}saveState(St){var At=this.saveLegacyState(w0);return At!==null||(this.initModel(),At={id:this.variable_.getId()},St&&(At.name=this.variable_.name,At.type=this.variable_.type)),At}loadState(St){const At=this.getSourceBlock();if(!At)throw new Ds;this.loadLegacyState(w0,St)||(St=Im(At.workspace,St.id||null,St.name,St.type||""),this.setValue(St.getId()))}setSourceBlock(St){if(St.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");super.setSourceBlock(St)}getValue(){return this.variable_?this.variable_.getId():null}getText(){return this.variable_?this.variable_.name:""}getVariable(){return this.variable_}getValidator(){return this.variable_?this.validator_:null}doClassValidation_(St){if(St===null)return null;var At=this.getSourceBlock();if(!At)throw new Ds;return At=qp(At.workspace,St),At?(At=At.type,this.typeIsAllowed_(At)?St:(console.warn("Variable type doesn't match this field!  Type was "+At),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+St),null)}doValueUpdate_(St){const At=this.getSourceBlock();if(!At)throw new Ds;this.variable_=qp(At.workspace,St),super.doValueUpdate_(St)}typeIsAllowed_(St){const At=this.getVariableTypes_();if(!At)return!0;for(let Nt=0;Nt<At.length;Nt++)if(St===At[Nt])return!0;return!1}getVariableTypes_(){var St=this.variableTypes;if(St===null&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())return this.sourceBlock_.workspace.getVariableTypes();if(St=St||[""],St.length===0)throw St=this.getText(),Error("'variableTypes' of field variable "+St+" was an empty list");return St}setTypes_(St,At){if(At=At||"",St==null)St=null;else if(Array.isArray(St)){let Nt=!1;for(let Wt=0;Wt<St.length;Wt++)St[Wt]===At&&(Nt=!0);if(!Nt)throw Error("Invalid default type '"+At+"' in the definition of a FieldVariable")}else throw Error("'variableTypes' was not an array in the definition of a FieldVariable");this.defaultType_=At,this.variableTypes=St}refreshVariableName(){this.forceRerender()}onItemSelected_(St,At){if(St=At.getValue(),this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()){if(St===r$){E_(this.sourceBlock_.workspace,this.variable_);return}if(St===i$){this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId());return}}this.setValue(St)}referencesVariables(){return!0}static fromJson(St){return new this(fs(St.variable),void 0,void 0,void 0,St)}static dropdownCreate(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");const St=this.getText();let At=[];if(this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())for(var Nt=this.getVariableTypes_(),Wt=0;Wt<Nt.length;Wt++){const cn=this.sourceBlock_.workspace.getVariablesOfType(Nt[Wt]);At=At.concat(cn)}for(At.sort(Zy.compareByName),Nt=[],Wt=0;Wt<At.length;Wt++)Nt[Wt]=[At[Wt].name,At[Wt].getId()];return Nt.push([To.RENAME_VARIABLE,r$]),To.DELETE_VARIABLE&&Nt.push([To.DELETE_VARIABLE.replace("%1",St),i$]),Nt}};xa("field_variable",w0);var L$=class extends E0{constructor(St,At,Nt,Wt,cn,vn){super(Qo.SKIP_SETUP),this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,this.SERIALIZABLE=!0,this.spellcheck_=!1,St!==Qo.SKIP_SETUP&&(vn?this.configure_(vn):this.setConstraints(At,Nt,Wt),this.setValue(St),cn&&this.setValidator(cn))}configure_(St){super.configure_(St),this.setMinInternal_(St.min),this.setMaxInternal_(St.max),this.setPrecisionInternal_(St.precision)}setConstraints(St,At,Nt){this.setMinInternal_(St),this.setMaxInternal_(At),this.setPrecisionInternal_(Nt),this.setValue(this.getValue())}setMin(St){this.setMinInternal_(St),this.setValue(this.getValue())}setMinInternal_(St){St==null?this.min_=-1/0:(St=Number(St),isNaN(St)||(this.min_=St))}getMin(){return this.min_}setMax(St){this.setMaxInternal_(St),this.setValue(this.getValue())}setMaxInternal_(St){St==null?this.max_=1/0:(St=Number(St),isNaN(St)||(this.max_=St))}getMax(){return this.max_}setPrecision(St){this.setPrecisionInternal_(St),this.setValue(this.getValue())}setPrecisionInternal_(St){this.precision_=Number(St)||0;let At=String(this.precision_);At.indexOf("e")!==-1&&(At=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));const Nt=At.indexOf(".");this.decimalPlaces_=Nt===-1?St?0:null:At.length-Nt-1}getPrecision(){return this.precision_}doClassValidation_(St){return St===null||(St=String(St),St=St.replace(/O/ig,"0"),St=St.replace(/,/g,""),St=St.replace(/infinity/i,"Infinity"),St=Number(St||0),isNaN(St))?null:(St=Math.min(Math.max(St,this.min_),this.max_),this.precision_&&isFinite(St)&&(St=Math.round(St/this.precision_)*this.precision_),this.decimalPlaces_!==null&&(St=Number(St.toFixed(this.decimalPlaces_))),St)}widgetCreate_(){const St=super.widgetCreate_();return-1/0<this.min_&&ns(St,ms.VALUEMIN,this.min_),1/0>this.max_&&ns(St,ms.VALUEMAX,this.max_),St}static fromJson(St){return new this(St.value,void 0,void 0,void 0,void 0,St)}};xa("field_number",L$),L$.prototype.DEFAULT_VALUE=0;var D$=class extends dt.FieldTextInput$$module$build$src$core$field_textinput{constructor(St,At,Nt){super(Qo.SKIP_SETUP),this.textGroup_=null,this.maxLines_=1/0,this.isOverflowedY_=!1,St!==Qo.SKIP_SETUP&&(Nt&&this.configure_(Nt),this.setValue(St),At&&this.setValidator(At))}configure_(St){super.configure_(St),St.maxLines&&this.setMaxLines(St.maxLines)}toXml(St){return St.textContent=this.getValue().replace(/\n/g,"&#10;"),St}fromXml(St){this.setValue(St.textContent.replace(/&#10;/g,`
`))}saveState(){const St=this.saveLegacyState(D$);return St!==null?St:this.getValue()}loadState(St){this.loadLegacyState(Qo,St)||this.setValue(St)}initView(){this.createBorderRect_(),this.textGroup_=Mn(ar.G,{class:"blocklyEditableText"},this.fieldGroup_)}getDisplayText_(){const St=this.getSourceBlock();if(!St)throw new Ds;let At=this.getText();if(!At)return Qo.NBSP;const Nt=At.split(`
`);At="";const Wt=this.isOverflowedY_?this.maxLines_:Nt.length;for(let cn=0;cn<Wt;cn++){let vn=Nt[cn];vn.length>this.maxDisplayLength?vn=vn.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&cn===Wt-1&&(vn=vn.substring(0,vn.length-3)+"..."),vn=vn.replace(/\s/g,Qo.NBSP),At+=vn,cn!==Wt-1&&(At+=`
`)}return St.RTL&&(At+="‏"),At}doValueUpdate_(St){super.doValueUpdate_(St),this.isOverflowedY_=this.value_.split(`
`).length>this.maxLines_}render_(){var St=this.getSourceBlock();if(!St)throw new Ds;for(var At;At=this.textGroup_.firstChild;)this.textGroup_.removeChild(At);At=this.getDisplayText_().split(`
`);let Nt=0;for(let Wt=0;Wt<At.length;Wt++){const cn=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;Mn(ar.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:Nt+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},this.textGroup_).appendChild(document.createTextNode(At[Wt])),Nt+=cn}this.isBeingEdited_&&(At=this.htmlInput_,this.isOverflowedY_?ir(At,"blocklyHtmlTextAreaInputOverflowedY"):tr(At,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(St.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),St=this.htmlInput_,this.isTextValid_?(tr(St,"blocklyInvalidInput"),ns(St,ms.INVALID,!1)):(ir(St,"blocklyInvalidInput"),ns(St,ms.INVALID,!0)))}updateSize_(){var St=this.textGroup_.childNodes;const At=this.getConstants().FIELD_TEXT_FONTSIZE,Nt=this.getConstants().FIELD_TEXT_FONTWEIGHT,Wt=this.getConstants().FIELD_TEXT_FONTFAMILY;let cn=0,vn=0;for(var Pn=0;Pn<St.length;Pn++){var qn=Qr(St[Pn],At,Nt,Wt);qn>cn&&(cn=qn),vn+=this.getConstants().FIELD_TEXT_HEIGHT+(0<Pn?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){for(St=this.value_.split(`
`),Pn=Mn(ar.TEXT,{class:"blocklyText blocklyMultilineText"}),qn=0;qn<St.length;qn++){St[qn].length>this.maxDisplayLength&&(St[qn]=St[qn].substring(0,this.maxDisplayLength)),Pn.textContent=St[qn];const Ar=Qr(Pn,At,Nt,Wt);Ar>cn&&(cn=Ar)}cn+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(vn+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,cn+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",cn),this.borderRect_.setAttribute("height",vn)),this.size_.width=cn,this.size_.height=vn,this.positionBorderRect_()}showEditor_(St,At){super.showEditor_(St,At),this.forceRerender()}widgetCreate_(){const St=Ap(),At=this.workspace_.getScale(),Nt=document.createElement("textarea");Nt.className="blocklyHtmlInput blocklyHtmlTextAreaInput",Nt.setAttribute("spellcheck",this.spellcheck_);var Wt=this.getConstants().FIELD_TEXT_FONTSIZE*At+"pt";St.style.fontSize=Wt,Nt.style.fontSize=Wt,Nt.style.borderRadius=dt.FieldTextInput$$module$build$src$core$field_textinput.BORDERRADIUS*At+"px",Wt=this.getConstants().FIELD_BORDER_RECT_X_PADDING*At;const cn=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*At/2;return Nt.style.padding=cn+"px "+Wt+"px "+cn+"px "+Wt+"px",Wt=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,Nt.style.lineHeight=Wt*At+"px",St.appendChild(Nt),Nt.value=Nt.defaultValue=this.getEditorText_(this.value_),Nt.setAttribute("data-untyped-default-value",this.value_),Nt.setAttribute("data-old-value",""),ao?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(Nt),Nt}setMaxLines(St){typeof St=="number"&&0<St&&St!==this.maxLines_&&(this.maxLines_=St,this.forceRerender())}getMaxLines(){return this.maxLines_}onHtmlInputKeyDown_(St){St.keyCode!==co.ENTER&&super.onHtmlInputKeyDown_(St)}static fromJson(St){return new this(fs(St.text),void 0,St)}};hu(`
.blocklyHtmlTextAreaInput {
  font-family: monospace;
  resize: none;
  overflow: hidden;
  height: 100%;
  text-align: left;
}

.blocklyHtmlTextAreaInputOverflowedY {
  overflow-y: scroll;
}
`),xa("field_multilinetext",D$);var LE=class extends dt.FieldLabel$$module$build$src$core$field_label{constructor(St,At,Nt){super(String(St??""),At,Nt),this.EDITABLE=!1,this.SERIALIZABLE=!0}static fromJson(St){return new this(fs(St.text),void 0,St)}};xa("field_label_serializable",LE);var Tu=class extends Qo{constructor(St,At,Nt){super(Qo.SKIP_SETUP),this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null,this.SERIALIZABLE=!0,this.CURSOR="default",this.isDirty_=!1,this.titles_=this.colours_=null,this.columns_=0,St!==Qo.SKIP_SETUP&&(Nt&&this.configure_(Nt),this.setValue(St),At&&this.setValidator(At))}configure_(St){super.configure_(St),St.colourOptions&&(this.colours_=St.colourOptions),St.colourTitles&&(this.titles_=St.colourTitles),St.columns&&(this.columns_=St.columns)}initView(){this.size_=new Ks(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.sourceBlock_ instanceof Du&&(this.clickTarget_=this.sourceBlock_.getSvgRoot()):(this.createBorderRect_(),this.getBorderRect().style.fillOpacity="1")}applyColour(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.sourceBlock_ instanceof Du&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())}doClassValidation_(St){return typeof St!="string"?null:Vu(St)}doValueUpdate_(St){this.value_=St,this.borderRect_?this.borderRect_.style.fill=St:this.sourceBlock_&&this.sourceBlock_.rendered&&this.sourceBlock_ instanceof Du&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",St),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))}getText(){let St=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(St)&&(St="#"+St[1]+St[3]+St[5]),St}setColours(St,At){return this.colours_=St,At&&(this.titles_=At),this}setColumns(St){return this.columns_=St,this}showEditor_(){this.dropdownCreate_(),Tr().appendChild(this.picker_),Zn(this,this.dropdownDispose_.bind(this)),this.picker_.focus({preventScroll:!0})}onClick_(St){St=(St=St.target)&&St.getAttribute("data-colour"),St!==null&&(this.setValue(St),Us(this))}onKeyDown_(St){var At=!1;St.keyCode===co.UP?(this.moveHighlightBy_(0,-1),At=!0):St.keyCode===co.DOWN?(this.moveHighlightBy_(0,1),At=!0):St.keyCode===co.LEFT?(this.moveHighlightBy_(-1,0),At=!0):St.keyCode===co.RIGHT?(this.moveHighlightBy_(1,0),At=!0):St.keyCode===co.ENTER&&((At=this.getHighlighted_())&&(At=At&&At.getAttribute("data-colour"),At!==null&&this.setValue(At)),us(),At=!0),At&&St.stopPropagation()}moveHighlightBy_(St,At){if(this.highlightedIndex_){var Nt=this.colours_||Tu.COLOURS,Wt=this.columns_||Tu.COLUMNS,cn=this.highlightedIndex_%Wt,vn=Math.floor(this.highlightedIndex_/Wt);cn+=St,vn+=At,0>St?0>cn&&0<vn?(cn=Wt-1,vn--):0>cn&&(cn=0):0<St?cn>Wt-1&&vn<Math.floor(Nt.length/Wt)-1?(cn=0,vn++):cn>Wt-1&&cn--:0>At?0>vn&&(vn=0):0<At&&vn>Math.floor(Nt.length/Wt)-1&&(vn=Math.floor(Nt.length/Wt)-1),this.setHighlightedCell_(this.picker_.childNodes[vn].childNodes[cn],vn*Wt+cn)}}onMouseMove_(St){const At=(St=St.target)&&Number(St.getAttribute("data-index"));At!==null&&At!==this.highlightedIndex_&&this.setHighlightedCell_(St,At)}onMouseEnter_(){this.picker_.focus({preventScroll:!0})}onMouseLeave_(){this.picker_.blur();const St=this.getHighlighted_();St&&tr(St,"blocklyColourHighlighted")}getHighlighted_(){if(!this.highlightedIndex_)return null;const St=this.columns_||Tu.COLUMNS,At=this.picker_.childNodes[Math.floor(this.highlightedIndex_/St)];return At?At.childNodes[this.highlightedIndex_%St]:null}setHighlightedCell_(St,At){const Nt=this.getHighlighted_();Nt&&tr(Nt,"blocklyColourHighlighted"),ir(St,"blocklyColourHighlighted"),this.highlightedIndex_=At,ns(this.picker_,ms.ACTIVEDESCENDANT,St.getAttribute("id"))}dropdownCreate_(){const St=this.columns_||Tu.COLUMNS,At=this.colours_||Tu.COLOURS,Nt=this.titles_||Tu.TITLES,Wt=this.getValue(),cn=document.createElement("table");cn.className="blocklyColourTable",cn.tabIndex=0,cn.dir="ltr",$s(cn,au.GRID),ns(cn,ms.EXPANDED,!0),ns(cn,ms.ROWCOUNT,Math.floor(At.length/St)),ns(cn,ms.COLCOUNT,St);let vn;for(let Pn=0;Pn<At.length;Pn++){Pn%St===0&&(vn=document.createElement("tr"),$s(vn,au.ROW),cn.appendChild(vn));const qn=document.createElement("td");vn.appendChild(qn),qn.setAttribute("data-colour",At[Pn]),qn.title=Nt[Pn]||At[Pn],qn.id=Do(),qn.setAttribute("data-index",Pn),$s(qn,au.GRIDCELL),ns(qn,ms.LABEL,At[Pn]),ns(qn,ms.SELECTED,At[Pn]===Wt),qn.style.backgroundColor=At[Pn],At[Pn]===Wt&&(qn.className="blocklyColourSelected",this.highlightedIndex_=Pn)}this.onClickWrapper_=Kt(cn,"pointerdown",this,this.onClick_,!0),this.onMouseMoveWrapper_=Kt(cn,"pointermove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=Kt(cn,"pointerenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=Kt(cn,"pointerleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=Kt(cn,"keydown",this,this.onKeyDown_),this.picker_=cn}dropdownDispose_(){this.onClickWrapper_&&(hn(this.onClickWrapper_),this.onClickWrapper_=null),this.onMouseMoveWrapper_&&(hn(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null),this.onMouseEnterWrapper_&&(hn(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null),this.onMouseLeaveWrapper_&&(hn(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null),this.onKeyDownWrapper_&&(hn(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.highlightedIndex_=this.picker_=null}static fromJson(St){return new this(St.colour,void 0,St)}};Tu.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),Tu.TITLES=[],Tu.COLUMNS=7,Tu.prototype.DEFAULT_VALUE=Tu.COLOURS[0],hu(`
.blocklyColourTable {
  border-collapse: collapse;
  display: block;
  outline: none;
  padding: 1px;
}

.blocklyColourTable>tr>td {
  border: .5px solid #888;
  box-sizing: border-box;
  cursor: pointer;
  display: inline-block;
  height: 20px;
  padding: 0;
  width: 20px;
}

.blocklyColourTable>tr>td.blocklyColourHighlighted {
  border-color: #eee;
  box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);
  position: relative;
}

.blocklyColourSelected, .blocklyColourSelected:hover {
  border-color: #eee !important;
  outline: 1px solid #333;
  position: relative;
}
`),xa("field_colour",Tu),dt.FieldCheckbox$$module$build$src$core$field_checkbox=class extends Qo{constructor(St,At,Nt){super(Qo.SKIP_SETUP),this.SERIALIZABLE=!0,this.CURSOR="default",this.checkChar_=dt.FieldCheckbox$$module$build$src$core$field_checkbox.CHECK_CHAR,St!==Qo.SKIP_SETUP&&(Nt&&this.configure_(Nt),this.setValue(St),At&&this.setValidator(At))}configure_(St){super.configure_(St),St.checkCharacter&&(this.checkChar_=St.checkCharacter)}saveState(){const St=this.saveLegacyState(dt.FieldCheckbox$$module$build$src$core$field_checkbox);return St!==null?St:this.getValueBoolean()}initView(){super.initView();const St=this.getTextElement();ir(St,"blocklyCheckbox"),St.style.display=this.value_?"block":"none"}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)}getDisplayText_(){return this.checkChar_}setCheckCharacter(St){this.checkChar_=St||dt.FieldCheckbox$$module$build$src$core$field_checkbox.CHECK_CHAR,this.forceRerender()}showEditor_(){this.setValue(!this.value_)}doClassValidation_(St){return St===!0||St==="TRUE"?"TRUE":St===!1||St==="FALSE"?"FALSE":null}doValueUpdate_(St){this.value_=this.convertValueToBool_(St),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")}getValue(){return this.value_?"TRUE":"FALSE"}getValueBoolean(){return this.value_}getText(){return String(this.convertValueToBool_(this.value_))}convertValueToBool_(St){return typeof St=="string"?St==="TRUE":!!St}static fromJson(St){return new this(St.checked,void 0,St)}},dt.FieldCheckbox$$module$build$src$core$field_checkbox.CHECK_CHAR="✓",xa("field_checkbox",dt.FieldCheckbox$$module$build$src$core$field_checkbox),dt.FieldCheckbox$$module$build$src$core$field_checkbox.prototype.DEFAULT_VALUE=!1,dt.FieldCheckbox$$module$build$src$core$field_checkbox;var Vo=class extends E0{constructor(St,At,Nt){super(Qo.SKIP_SETUP),this.clockwise_=Vo.CLOCKWISE,this.offset_=Vo.OFFSET,this.wrap_=Vo.WRAP,this.round_=Vo.ROUND,this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.symbol_=this.line_=this.gauge_=this.editor_=null,this.SERIALIZABLE=!0,St!==Qo.SKIP_SETUP&&(Nt&&this.configure_(Nt),this.setValue(St),At&&this.setValidator(At))}configure_(St){switch(super.configure_(St),St.mode){case eS.COMPASS:this.clockwise_=!0,this.offset_=90;break;case eS.PROTRACTOR:this.clockwise_=!1,this.offset_=0}St.clockwise&&(this.clockwise_=St.clockwise),St.offset&&(this.offset_=St.offset),St.wrap&&(this.wrap_=St.wrap),St.round&&(this.round_=St.round)}initView(){super.initView(),this.symbol_=Mn(ar.TSPAN,{}),this.symbol_.appendChild(document.createTextNode("°")),this.getTextElement().appendChild(this.symbol_)}render_(){super.render_(),this.updateGraph_()}showEditor_(St){super.showEditor_(St,Fs||ko||bo),this.dropdownCreate_(),Tr().appendChild(this.editor_),this.sourceBlock_ instanceof Du&&xn(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),Zn(this,this.dropdownDispose_.bind(this)),this.updateGraph_()}dropdownCreate_(){const St=Mn(ar.SVG,{xmlns:Wl,"xmlns:html":vu,"xmlns:xlink":ou,version:"1.1",height:2*Vo.HALF+"px",width:2*Vo.HALF+"px",style:"touch-action: none"}),At=Mn(ar.CIRCLE,{cx:Vo.HALF,cy:Vo.HALF,r:Vo.RADIUS,class:"blocklyAngleCircle"},St);this.gauge_=Mn(ar.PATH,{class:"blocklyAngleGauge"},St),this.line_=Mn(ar.LINE,{x1:Vo.HALF,y1:Vo.HALF,class:"blocklyAngleLine"},St);for(let Nt=0;360>Nt;Nt+=15)Mn(ar.LINE,{x1:Vo.HALF+Vo.RADIUS,y1:Vo.HALF,x2:Vo.HALF+Vo.RADIUS-(Nt%45===0?10:5),y2:Vo.HALF,class:"blocklyAngleMarks",transform:"rotate("+Nt+","+Vo.HALF+","+Vo.HALF+")"},St);this.clickWrapper_=Kt(St,"click",this,this.hide_),this.clickSurfaceWrapper_=Kt(At,"pointerdown",this,this.onMouseMove_,!0),this.moveSurfaceWrapper_=Kt(At,"pointermove",this,this.onMouseMove_,!0),this.editor_=St}dropdownDispose_(){this.clickWrapper_&&(hn(this.clickWrapper_),this.clickWrapper_=null),this.clickSurfaceWrapper_&&(hn(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null),this.moveSurfaceWrapper_&&(hn(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null),this.line_=this.gauge_=null}hide_(){Us(this),$a()}onMouseMove_(St){var At=this.gauge_.ownerSVGElement.getBoundingClientRect();const Nt=St.clientX-At.left-Vo.HALF;St=St.clientY-At.top-Vo.HALF,At=Math.atan(-St/Nt),isNaN(At)||(At=uo(At),0>Nt?At+=180:0<St&&(At+=360),At=this.clockwise_?this.offset_+360-At:360-(this.offset_-At),this.displayMouseOrKeyboardValue_(At))}displayMouseOrKeyboardValue_(St){this.round_&&(St=Math.round(St/this.round_)*this.round_),St=this.wrapValue_(St),St!==this.value_&&this.setEditorValue_(St)}updateGraph_(){if(this.gauge_){var St=Number(this.getText())+this.offset_,At=no(St%360);St=["M ",Vo.HALF,",",Vo.HALF];var Nt=Vo.HALF,Wt=Vo.HALF;if(!isNaN(At)){const cn=Number(this.clockwise_),vn=no(this.offset_),Pn=Math.cos(vn)*Vo.RADIUS,qn=Math.sin(vn)*-Vo.RADIUS;cn&&(At=2*vn-At),Nt+=Math.cos(At)*Vo.RADIUS,Wt-=Math.sin(At)*Vo.RADIUS,At=Math.abs(Math.floor((At-vn)/Math.PI)%2),cn&&(At=1-At),St.push(" l ",Pn,",",qn," A ",Vo.RADIUS,",",Vo.RADIUS," 0 ",At," ",cn," ",Nt,",",Wt," z")}this.gauge_.setAttribute("d",St.join("")),this.line_.setAttribute("x2",Nt),this.line_.setAttribute("y2",Wt)}}onHtmlInputKeyDown_(St){super.onHtmlInputKeyDown_(St);var At=this.getSourceBlock();if(!At)throw new Ds;let Nt;St.keyCode===co.LEFT?Nt=At.RTL?1:-1:St.keyCode===co.RIGHT?Nt=At.RTL?-1:1:St.keyCode===co.DOWN?Nt=-1:St.keyCode===co.UP&&(Nt=1),Nt&&(At=this.getValue(),this.displayMouseOrKeyboardValue_(At+Nt*this.round_),St.preventDefault(),St.stopPropagation())}doClassValidation_(St){return St=Number(St),isNaN(St)||!isFinite(St)?null:this.wrapValue_(St)}wrapValue_(St){return St%=360,0>St&&(St+=360),St>this.wrap_&&(St-=360),St}static fromJson(St){return new this(St.angle,void 0,St)}};Vo.ROUND=15,Vo.HALF=50,Vo.CLOCKWISE=!1,Vo.OFFSET=0,Vo.WRAP=360,Vo.RADIUS=Vo.HALF-1,hu(`
.blocklyAngleCircle {
  stroke: #444;
  stroke-width: 1;
  fill: #ddd;
  fill-opacity: .8;
}

.blocklyAngleMarks {
  stroke: #444;
  stroke-width: 1;
}

.blocklyAngleGauge {
  fill: #f88;
  fill-opacity: .8;
  pointer-events: none;
}

.blocklyAngleLine {
  stroke: #f00;
  stroke-width: 2;
  stroke-linecap: round;
  pointer-events: none;
}
`),xa("field_angle",Vo),Vo.prototype.DEFAULT_VALUE=0;var eS;(function(St){St.COMPASS="compass",St.PROTRACTOR="protractor"})(eS||(eS={}));var N$=class extends OO{constructor(St){super(St),this.type=Hl,St&&(St.isShadow()&&(this.recordUndo=!1),St=this.currentLocation_(),this.oldParentId=St.parentId,this.oldInputName=St.inputName,this.oldCoordinate=St.coordinate)}toJson(){const St=super.toJson();return St.oldParentId=this.oldParentId,St.oldInputName=this.oldInputName,this.oldCoordinate&&(St.oldCoordinate=`${Math.round(this.oldCoordinate.x)}, ${Math.round(this.oldCoordinate.y)}`),St.newParentId=this.newParentId,St.newInputName=this.newInputName,this.newCoordinate&&(St.newCoordinate=`${Math.round(this.newCoordinate.x)}, ${Math.round(this.newCoordinate.y)}`),this.recordUndo||(St.recordUndo=this.recordUndo),St}fromJson(St){if(vt("Blockly.Events.BlockMove.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(St),this.oldParentId=St.oldParentId,this.oldInputName=St.oldInputName,St.oldCoordinate){var At=St.oldCoordinate.split(",");this.oldCoordinate=new qr(Number(At[0]),Number(At[1]))}this.newParentId=St.newParentId,this.newInputName=St.newInputName,St.newCoordinate&&(At=St.newCoordinate.split(","),this.newCoordinate=new qr(Number(At[0]),Number(At[1]))),St.recordUndo!==void 0&&(this.recordUndo=St.recordUndo)}static fromJson(St,At,Nt){return At=super.fromJson(St,At,Nt??new N$),At.oldParentId=St.oldParentId,At.oldInputName=St.oldInputName,St.oldCoordinate&&(Nt=St.oldCoordinate.split(","),At.oldCoordinate=new qr(Number(Nt[0]),Number(Nt[1]))),At.newParentId=St.newParentId,At.newInputName=St.newInputName,St.newCoordinate&&(Nt=St.newCoordinate.split(","),At.newCoordinate=new qr(Number(Nt[0]),Number(Nt[1]))),St.recordUndo!==void 0&&(At.recordUndo=St.recordUndo),At}recordNew(){const St=this.currentLocation_();this.newParentId=St.parentId,this.newInputName=St.inputName,this.newCoordinate=St.coordinate}currentLocation_(){var St=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var At=St.getBlockById(this.blockId);if(!At)throw Error("The block associated with the block move event could not be found");St={};const Nt=At.getParent();return Nt?(St.parentId=Nt.id,(At=Nt.getInputWithBlock(At))&&(St.inputName=At.name)):St.coordinate=At.getRelativeToSurfaceXY(),St}isNull(){return this.oldParentId===this.newParentId&&this.oldInputName===this.newInputName&&qr.equals(this.oldCoordinate,this.newCoordinate)}run(St){var At=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var Nt=At.getBlockById(this.blockId);if(Nt){var Wt=St?this.newParentId:this.oldParentId,cn=St?this.newInputName:this.oldInputName;if(St=St?this.newCoordinate:this.oldCoordinate,Wt){var vn=At.getBlockById(Wt);if(!vn){console.warn("Can't connect to non-existent block: "+Wt);return}}if(Nt.getParent()&&Nt.unplug(),St)cn=Nt.getRelativeToSurfaceXY(),Nt.moveBy(St.x-cn.x,St.y-cn.y);else{At=Nt.outputConnection,(!At||Nt.previousConnection&&Nt.previousConnection.isConnected())&&(At=Nt.previousConnection);let Pn;Nt=At.type,cn?(Nt=vn.getInput(cn))&&(Pn=Nt.connection):Nt===ro.PREVIOUS_STATEMENT&&(Pn=vn.nextConnection),Pn?At.connect(Pn):console.warn("Can't connect to non-existent input: "+cn)}}else console.warn("Can't move non-existent block: "+this.blockId)}};wo(Hr.EVENT,Hl,N$);var xm=class extends f_{constructor(St){super(),this.isBlank=!St,St&&(this.commentId=St.id,this.workspaceId=St.workspace.id,this.group=Ro(),this.recordUndo=Co())}toJson(){const St=super.toJson();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return St.commentId=this.commentId,St}fromJson(St){vt("Blockly.Events.CommentBase.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(St),this.commentId=St.commentId}static fromJson(St,At,Nt){return At=super.fromJson(St,At,Nt??new xm),At.commentId=St.commentId,At}static CommentCreateDeleteHelper(St,At){var Nt=St.getEventWorkspace_();if(At){if(At=Bo("xml"),!St.xml)throw Error("Ecountered a comment event without proper xml");At.appendChild(St.xml),Rm(At,Nt)}else{if(!St.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(Nt=Nt.getCommentById(St.commentId))?Nt.dispose():console.warn("Can't uncreate non-existent comment: "+St.commentId)}}},B$=class extends xm{constructor(St,At,Nt){super(St),this.type=jy,St&&(this.oldContents_=typeof At>"u"?"":At,this.newContents_=typeof Nt>"u"?"":Nt)}toJson(){const St=super.toJson();if(!this.oldContents_)throw Error("The old contents is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newContents_)throw Error("The new contents is undefined. Either pass a value to the constructor, or call fromJson");return St.oldContents=this.oldContents_,St.newContents=this.newContents_,St}fromJson(St){vt("Blockly.Events.CommentChange.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(St),this.oldContents_=St.oldContents,this.newContents_=St.newContents}static fromJson(St,At,Nt){return At=super.fromJson(St,At,Nt??new B$),At.oldContents_=St.oldContents,At.newContents_=St.newContents,At}isNull(){return this.oldContents_===this.newContents_}run(St){var At=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(At=At.getCommentById(this.commentId)){var Nt=St?this.newContents_:this.oldContents_;if(!Nt)throw Error(St?"The new contents is undefined. Either pass a value to the constructor, or call fromJson":"The old contents is undefined. Either pass a value to the constructor, or call fromJson");At.setContent(Nt)}else console.warn("Can't change non-existent comment: "+this.commentId)}};wo(Hr.EVENT,jy,B$);var F$=class extends xm{constructor(St){super(St),this.type=h_,St&&(this.xml=St.toXmlWithXY())}toJson(){const St=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");return St.xml=Zl(this.xml),St}fromJson(St){vt("Blockly.Events.CommentCreate.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(St),this.xml=ga(St.xml)}static fromJson(St,At,Nt){return At=super.fromJson(St,At,Nt??new F$),At.xml=ga(St.xml),At}run(St){xm.CommentCreateDeleteHelper(this,St)}};wo(Hr.EVENT,h_,F$);var G$=class extends xm{constructor(St){super(St),this.type=mO,St&&(this.xml=St.toXmlWithXY())}run(St){xm.CommentCreateDeleteHelper(this,!St)}toJson(){const St=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");return St.xml=Zl(this.xml),St}static fromJson(St,At,Nt){return At=super.fromJson(St,At,Nt??new G$),At.xml=ga(St.xml),At}};wo(Hr.EVENT,mO,G$);var U$=class extends xm{constructor(St){super(St),this.type=Up,St&&(this.comment_=St,this.oldCoordinate_=St.getXY())}recordNew(){if(this.newCoordinate_)throw Error("Tried to record the new position of a comment on the same event twice.");if(!this.comment_)throw Error("The comment is undefined. Pass a comment to the constructor if you want to use the record functionality");this.newCoordinate_=this.comment_.getXY()}setOldCoordinate(St){this.oldCoordinate_=St}toJson(){const St=super.toJson();if(!this.oldCoordinate_)throw Error("The old comment position is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newCoordinate_)throw Error("The new comment position is undefined. Either call recordNew, or call fromJson");return St.oldCoordinate=`${Math.round(this.oldCoordinate_.x)}, ${Math.round(this.oldCoordinate_.y)}`,St.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y),St}fromJson(St){vt("Blockly.Events.CommentMove.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(St);let At=St.oldCoordinate.split(",");this.oldCoordinate_=new qr(Number(At[0]),Number(At[1])),At=St.newCoordinate.split(","),this.newCoordinate_=new qr(Number(At[0]),Number(At[1]))}static fromJson(St,At,Nt){return At=super.fromJson(St,At,Nt??new U$),Nt=St.oldCoordinate.split(","),At.oldCoordinate_=new qr(Number(Nt[0]),Number(Nt[1])),Nt=St.newCoordinate.split(","),At.newCoordinate_=new qr(Number(Nt[0]),Number(Nt[1])),At}isNull(){return qr.equals(this.oldCoordinate_,this.newCoordinate_)}run(St){var At=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(At=At.getCommentById(this.commentId)){if(St=St?this.newCoordinate_:this.oldCoordinate_,!St)throw Error("Either oldCoordinate_ or newCoordinate_ is undefined. Either pass a comment to the constructor and call recordNew, or call fromJson");var Nt=At.getXY();At.moveBy(St.x-Nt.x,St.y-Nt.y)}else console.warn("Can't move non-existent comment: "+this.commentId)}};wo(Hr.EVENT,Up,U$);var b_=class extends f_{constructor(St,At){super(),this.model=At,this.isBlank=!1,this.workspaceId=St.id}toJson(){const St=super.toJson();return St.procedureId=this.model.getId(),St}},V$=class extends b_{constructor(St,At,Nt){super(St,At),this.oldTypes=Nt,this.type=Iv,this.newTypes=At.getReturnTypes()}run(St){const At=this.getEventWorkspace_().getProcedureMap().get(this.model.getId());if(!At)throw Error("Cannot change the type of a procedure that does not exist in the procedure map");St?At.setReturnTypes(this.newTypes):At.setReturnTypes(this.oldTypes)}toJson(){const St=super.toJson();return St.oldTypes=this.oldTypes,St}static fromJson(St,At){const Nt=At.getProcedureMap().get(St.procedureId);if(!Nt)throw Error("Cannot deserialize procedure change return event because the target procedure does not exist");return new V$(At,Nt,St.oldTypes)}};wo(Hr.EVENT,Iv,V$);var W$=class extends b_{constructor(St,At){super(St,At),this.type=wv}run(St){const At=this.getEventWorkspace_(),Nt=At.getProcedureMap(),Wt=Nt.get(this.model.getId());St?Wt||Nt.add(new _0(At,this.model.getName(),this.model.getId())):Wt&&Nt.delete(this.model.getId())}toJson(){const St=super.toJson();return St.model=mm(this.model),St}static fromJson(St,At){return new W$(At,gm(_0,RO,St.model,At))}};wo(Hr.EVENT,wv,W$);var H$=class extends b_{constructor(St,At){super(St,At),this.type=Xy}run(St){const At=this.getEventWorkspace_(),Nt=At.getProcedureMap(),Wt=Nt.get(this.model.getId());St?Wt&&Nt.delete(this.model.getId()):Wt||Nt.add(new _0(At,this.model.getName(),this.model.getId()))}toJson(){return super.toJson()}static fromJson(St,At){if(St=At.getProcedureMap().get(St.procedureId),!St)throw Error("Cannot deserialize procedure delete event because the target procedure does not exist");return new H$(At,St)}};wo(Hr.EVENT,Xy,H$);var Q$=class extends b_{constructor(St,At){super(St,At),this.type=Av,this.oldState=!At.getEnabled(),this.newState=At.getEnabled()}run(St){const At=this.getEventWorkspace_().getProcedureMap().get(this.model.getId());if(!At)throw Error("Cannot change the enabled state of a procedure that does not exist in the procedure map");St?At.setEnabled(this.newState):At.setEnabled(this.oldState)}toJson(){return super.toJson()}static fromJson(St,At){if(St=At.getProcedureMap().get(St.procedureId),!St)throw Error("Cannot deserialize procedure enable event because the target procedure does not exist");return new Q$(At,St)}};wo(Hr.EVENT,Av,Q$);var z$=class extends b_{constructor(St,At,Nt){super(St,At),this.oldName=Nt,this.type=Cv,this.newName=At.getName()}run(St){const At=this.getEventWorkspace_().getProcedureMap().get(this.model.getId());if(!At)throw Error("Cannot change the type of a procedure that does not exist in the procedure map");St?At.setName(this.newName):At.setName(this.oldName)}toJson(){const St=super.toJson();return St.oldName=this.oldName,St}static fromJson(St,At){const Nt=At.getProcedureMap().get(St.procedureId);if(!Nt)throw Error("Cannot deserialize procedure rename event because the target procedure does not exist");return new z$(At,Nt,St.oldName)}};wo(Hr.EVENT,Cv,z$);var tS=class extends b_{constructor(St,At,Nt){super(St,At),this.parameter=Nt}toJson(){const St=super.toJson();return St.parameterId=this.model.getId(),St}},j$=class extends tS{constructor(St,At,Nt,Wt){super(St,At,Nt),this.index=Wt,this.type=Rv}run(St){const At=this.getEventWorkspace_(),Nt=At.getProcedureMap().get(this.model.getId());if(!Nt)throw Error("Cannot add a parameter to a procedure that does not exist in the procedure map");const Wt=Nt.getParameter(this.index);St?this.parameterMatches(Wt)||Nt.insertParameter(new RO(At,this.parameter.getName(),this.parameter.getId()),this.index):this.parameterMatches(Wt)&&Nt.deleteParameter(this.index)}parameterMatches(St){return St&&St.getId()===this.parameter.getId()}toJson(){const St=super.toJson();return St.parameter=Pu(this.parameter),St.index=this.index,St}static fromJson(St,At){const Nt=At.getProcedureMap().get(St.procedureId);if(!Nt)throw Error("Cannot deserialize parameter create event because the target procedure does not exist");return new j$(At,Nt,Dp(RO,St.parameter,At),St.index)}};wo(Hr.EVENT,Rv,j$);var X$=class extends tS{constructor(St,At,Nt,Wt){super(St,At,Nt),this.index=Wt,this.type=kv}run(St){const At=this.getEventWorkspace_(),Nt=At.getProcedureMap().get(this.model.getId());if(!Nt)throw Error("Cannot add a parameter to a procedure that does not exist in the procedure map");const Wt=Nt.getParameter(this.index);St?this.parameterMatches(Wt)&&Nt.deleteParameter(this.index):this.parameterMatches(Wt)||Nt.insertParameter(new RO(At,this.parameter.getName(),this.parameter.getId()),this.index)}parameterMatches(St){return St&&St.getId()===this.parameter.getId()}toJson(){const St=super.toJson();return St.index=this.index,St}static fromJson(St,At){const Nt=At.getProcedureMap().get(St.procedureId);if(!Nt)throw Error("Cannot deserialize procedure delete event because the target procedure does not exist");const Wt=Nt.getParameter(St.index);return new X$(At,Nt,Wt,St.index)}};wo(Hr.EVENT,kv,X$);var Y$=class extends tS{constructor(St,At,Nt,Wt){super(St,At,Nt),this.oldName=Wt,this.type=Mv,this.newName=Nt.getName()}run(St){const At=gv(this.getEventWorkspace_(),this.model.getId(),this.parameter.getId());if(!At)throw Error("Cannot rename a parameter that does not exist in the procedure map");St?At.setName(this.newName):At.setName(this.oldName)}toJson(){const St=super.toJson();return St.oldName=this.oldName,St}static fromJson(St,At){const Nt=At.getProcedureMap().get(St.procedureId);if(!Nt)throw Error("Cannot deserialize procedure delete event because the target procedure does not exist");const Wt=gv(At,St.procedureId,St.parameterId);if(!Wt)throw Error("Cannot deserialize parameter rename event because the target parameter does not exist");return new Y$(At,Nt,Wt,St.oldName)}};wo(Hr.EVENT,Mv,Y$);var Z$=class extends Zu{constructor(St,At,Nt){super(St?St.workspace.id:void 0),this.type=pO,St&&(this.blockId=St.id,this.isStart=At,this.blocks=Nt)}toJson(){const St=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.blockId===void 0)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return St.isStart=this.isStart,St.blockId=this.blockId,St.blocks=this.blocks,St}fromJson(St){vt("Blockly.Events.BlockDrag.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(St),this.isStart=St.isStart,this.blockId=St.blockId,this.blocks=St.blocks}static fromJson(St,At,Nt){return At=super.fromJson(St,At,Nt??new Z$),At.isStart=St.isStart,At.blockId=St.blockId,At.blocks=St.blocks,At}};wo(Hr.EVENT,pO,Z$);var DE=class extends Zu{constructor(St,At,Nt,Wt){super(St?St.workspace.id:void 0),this.type=Vy,this.blockId=St?St.id:null,this.element=typeof At>"u"?"":At,this.oldValue=typeof Nt>"u"?"":Nt,this.newValue=typeof Wt>"u"?"":Wt}toJson(){const St=super.toJson();return St.element=this.element,this.newValue!==void 0&&(St.newValue=this.newValue),this.blockId&&(St.blockId=this.blockId),St}fromJson(St){super.fromJson(St),this.element=St.element,this.newValue=St.newValue,this.blockId=St.blockId}};wo(Hr.EVENT,Vy,DE);var NE=class extends f_{constructor(St){super(),this.isBlank=!0,this.recordUndo=!1,this.type=gO,this.isBlank=!!St,St&&(this.workspaceId=St.id)}toJson(){const St=super.toJson();if(!this.workspaceId)throw Error("The workspace ID is undefined. Either pass a workspace to the constructor, or call fromJson");return St.workspaceId=this.workspaceId,St}fromJson(St){super.fromJson(St),this.workspaceId=St.workspaceId}};wo(Hr.EVENT,gO,NE),dt.module$build$src$core$events$events={},dt.module$build$src$core$events$events.Abstract=f_,dt.module$build$src$core$events$events.BLOCK_CHANGE=Qs,dt.module$build$src$core$events$events.BLOCK_CREATE=Tl,dt.module$build$src$core$events$events.BLOCK_DELETE=mp,dt.module$build$src$core$events$events.BLOCK_DRAG=pO,dt.module$build$src$core$events$events.BLOCK_MOVE=Hl,dt.module$build$src$core$events$events.BUBBLE_OPEN=Gp,dt.module$build$src$core$events$events.BUMP_EVENTS=wS,dt.module$build$src$core$events$events.BlockBase=OO,dt.module$build$src$core$events$events.BlockChange=p_,dt.module$build$src$core$events$events.BlockCreate=qS,dt.module$build$src$core$events$events.BlockDelete=KS,dt.module$build$src$core$events$events.BlockDrag=Z$,dt.module$build$src$core$events$events.BlockMove=N$,dt.module$build$src$core$events$events.BubbleOpen=QS,dt.module$build$src$core$events$events.BubbleType=zS,dt.module$build$src$core$events$events.CHANGE=Qs,dt.module$build$src$core$events$events.CLICK=bm,dt.module$build$src$core$events$events.COMMENT_CHANGE=jy,dt.module$build$src$core$events$events.COMMENT_CREATE=h_,dt.module$build$src$core$events$events.COMMENT_DELETE=mO,dt.module$build$src$core$events$events.COMMENT_MOVE=Up,dt.module$build$src$core$events$events.CREATE=Tl,dt.module$build$src$core$events$events.Click=d$,dt.module$build$src$core$events$events.ClickTarget=f$,dt.module$build$src$core$events$events.CommentBase=xm,dt.module$build$src$core$events$events.CommentChange=B$,dt.module$build$src$core$events$events.CommentCreate=F$,dt.module$build$src$core$events$events.CommentDelete=G$,dt.module$build$src$core$events$events.CommentMove=U$,dt.module$build$src$core$events$events.DELETE=mp,dt.module$build$src$core$events$events.FINISHED_LOADING=gO,dt.module$build$src$core$events$events.FinishedLoading=NE,dt.module$build$src$core$events$events.MARKER_MOVE=Wy,dt.module$build$src$core$events$events.MOVE=Hl,dt.module$build$src$core$events$events.MarkerMove=T$,dt.module$build$src$core$events$events.ProcedureBase=b_,dt.module$build$src$core$events$events.ProcedureChangeReturn=V$,dt.module$build$src$core$events$events.ProcedureCreate=W$,dt.module$build$src$core$events$events.ProcedureDelete=H$,dt.module$build$src$core$events$events.ProcedureEnable=Q$,dt.module$build$src$core$events$events.ProcedureParameterBase=tS,dt.module$build$src$core$events$events.ProcedureParameterCreate=j$,dt.module$build$src$core$events$events.ProcedureParameterDelete=X$,dt.module$build$src$core$events$events.ProcedureParameterRename=Y$,dt.module$build$src$core$events$events.ProcedureRename=z$,dt.module$build$src$core$events$events.SELECTED=vm,dt.module$build$src$core$events$events.Selected=MS,dt.module$build$src$core$events$events.THEME_CHANGE=zy,dt.module$build$src$core$events$events.TOOLBOX_ITEM_SELECT=Qy,dt.module$build$src$core$events$events.TRASHCAN_OPEN=Hy,dt.module$build$src$core$events$events.ThemeChange=p$,dt.module$build$src$core$events$events.ToolboxItemSelect=c$,dt.module$build$src$core$events$events.TrashcanOpen=YS,dt.module$build$src$core$events$events.UI=Vy,dt.module$build$src$core$events$events.Ui=DE,dt.module$build$src$core$events$events.UiBase=Zu,dt.module$build$src$core$events$events.VAR_CREATE=c_,dt.module$build$src$core$events$events.VAR_DELETE=fO,dt.module$build$src$core$events$events.VAR_RENAME=Uy,dt.module$build$src$core$events$events.VIEWPORT_CHANGE=u_,dt.module$build$src$core$events$events.VarBase=Yy,dt.module$build$src$core$events$events.VarCreate=RS,dt.module$build$src$core$events$events.VarDelete=w$,dt.module$build$src$core$events$events.VarRename=C$,dt.module$build$src$core$events$events.ViewportChange=m$,dt.module$build$src$core$events$events.clearPendingUndo=lu,dt.module$build$src$core$events$events.disable=Fo,dt.module$build$src$core$events$events.disableOrphans=Zo,dt.module$build$src$core$events$events.enable=vo,dt.module$build$src$core$events$events.filter=xl,dt.module$build$src$core$events$events.fire=Gr,dt.module$build$src$core$events$events.fromJson=cu,dt.module$build$src$core$events$events.get=Wr,dt.module$build$src$core$events$events.getDescendantIds=Yl,dt.module$build$src$core$events$events.getGroup=Ro,dt.module$build$src$core$events$events.getRecordUndo=Co,dt.module$build$src$core$events$events.isEnabled=ss,dt.module$build$src$core$events$events.setGroup=oo,dt.module$build$src$core$events$events.setRecordUndo=Io,Ly();var Xl={};Xl.registerCleanup=Ay,Xl.registerCollapse=lp,Xl.registerCollapseExpandBlock=Ov,Xl.registerComment=My,Xl.registerDefaultOptions=Ly,Xl.registerDelete=Py,Xl.registerDeleteAll=_v,Xl.registerDisable=up,Xl.registerDuplicate=ky,Xl.registerExpand=Iy,Xl.registerHelp=Sl,Xl.registerInline=cp,Xl.registerRedo=Cy,Xl.registerUndo=ju;var BE=class{constructor(St,At){this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.draggingBlock_=St,this.draggedConnectionManager_=new $u(this.draggingBlock_),this.workspace_=At,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=mS(St)}dispose(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()}startDrag(St,At){Ro()||oo(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),_i(),this.workspace_.setResizesEnabled(!1),yu(),this.shouldDisconnect_(At)&&this.disconnectBlock_(At,St),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface()}shouldDisconnect_(St){return!!(this.draggingBlock_.getParent()||St&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())}disconnectBlock_(St,At){this.draggingBlock_.unplug(St),St=this.pixelsToWorkspaceUnits_(At),St=qr.sum(this.startXY_,St),this.draggingBlock_.translate(St.x,St.y),ov(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections()}fireDragStartEvent_(){const St=new(Wr(pO))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));Gr(St)}drag(St,At){At=this.pixelsToWorkspaceUnits_(At);var Nt=qr.sum(this.startXY_,At);this.draggingBlock_.moveDuringDrag(Nt),this.dragIcons_(At),Nt=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(St),this.draggedConnectionManager_.update(At,this.dragTarget_),St=this.wouldDeleteBlock_,this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock,St!==this.wouldDeleteBlock_&&this.updateCursorDuringBlockDrag_(),this.dragTarget_!==Nt&&(Nt&&Nt.onDragExit(this.draggingBlock_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBlock_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBlock_)}endDrag(St,At){this.drag(St,At),this.dragIconData_=[],this.fireDragEndEvent_(),Er(),yu(),St=null,this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_)?At=this.startXY_:(At=this.getNewLocationAfterDrag_(At),St=At.delta,At=At.newLocation),this.draggingBlock_.moveOffDragSurface(At),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),this.maybeDeleteBlock_()||(this.draggingBlock_.setDragging(!1),St?this.updateBlockAfterMove_(St):_m(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)),this.workspace_.setResizesEnabled(!0),oo(!1)}getNewLocationAfterDrag_(St){St=this.pixelsToWorkspaceUnits_(St);const At=qr.sum(this.startXY_,St);return{delta:St,newLocation:At}}maybeDeleteBlock_(){return this.wouldDeleteBlock_?(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),ps.length=0,!0):!1}updateBlockAfterMove_(St){this.draggingBlock_.moveConnections(St.x,St.y),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()}fireDragEndEvent_(){const St=new(Wr(pO))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));Gr(St)}updateToolboxStyle_(St){const At=this.workspace_.getToolbox();if(At){const Nt=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";St&&typeof At.removeStyle=="function"?At.removeStyle(Nt):St||typeof At.addStyle!="function"||At.addStyle(Nt)}}fireMoveEvent_(){const St=new(Wr(Hl))(this.draggingBlock_);St.oldCoordinate=this.startXY_,St.recordNew(),Gr(St)}updateCursorDuringBlockDrag_(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)}pixelsToWorkspaceUnits_(St){return St=new qr(St.x/this.workspace_.scale,St.y/this.workspace_.scale),this.workspace_.isMutator&&St.scale(1/this.workspace_.options.parentWorkspace.scale),St}dragIcons_(St){for(let At=0;At<this.dragIconData_.length;At++){const Nt=this.dragIconData_[At];Nt.icon.setIconLocation(qr.sum(Nt.location,St))}}getInsertionMarkers(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]}};wo(Hr.BLOCK_DRAGGER,Fp,BE);var $x="9.2.1",Tx=dt.Align$$module$build$src$core$input.LEFT,Ex=dt.Align$$module$build$src$core$input.CENTRE,xx=dt.Align$$module$build$src$core$input.RIGHT,wx=ro.INPUT_VALUE,Cx=ro.OUTPUT_VALUE,Ax=ro.NEXT_STATEMENT,Ix=ro.PREVIOUS_STATEMENT,Rx=No.DUMMY,kx=Ao.TOP,Mx=Ao.BOTTOM,Px=Ao.LEFT,Lx=Ao.RIGHT;jp.prototype.newBlock=function(St,At){return new EO(this,St,At)},_f.prototype.newBlock=function(St,At){return new Du(this,St,At)},_f.newTrashcan=function(St){return new NT(St)},Il.prototype.showContextMenu=function(St){if(!this.workspace.options.readOnly){var At=[];this.isDeletable()&&this.isMovable()&&(At.push(Z_(this)),At.push(Y_(this))),op(St,At,this.RTL)}},dt.Mutator$$module$build$src$core$mutator.prototype.newWorkspaceSvg=function(St){return new _f(St)},Nu.prototype.populateProcedures=function(St){St=t_(St),St=St[0].concat(St[1]);for(let At=0;At<St.length;At++)this.getName(St[At][0],Nu.NameType.PROCEDURE)};var Dx=ro,gr={};return gr.ALIGN_CENTRE=Ex,gr.ALIGN_LEFT=Tx,gr.ALIGN_RIGHT=xx,gr.ASTNode=Pr,gr.BasicCursor=m0,gr.Block=EO,gr.BlockDragSurfaceSvg=RE,gr.BlockDragger=BE,gr.BlockSvg=Du,gr.Blocks=Xr,gr.Bubble=Mo,gr.BubbleDragger=VT,gr.COLLAPSED_FIELD_NAME=c0,gr.COLLAPSED_INPUT_NAME=l0,gr.COLLAPSE_CHARS=RT,gr.CodeGenerator=dt.CodeGenerator$$module$build$src$core$generator,gr.CollapsibleToolboxCategory=AO,gr.Comment=IT,gr.ComponentManager=Js,gr.Connection=Ko,gr.ConnectionChecker=JT,gr.ConnectionDB=IO,gr.ConnectionType=ro,gr.ContextMenu=dt.module$build$src$core$contextmenu,gr.ContextMenuItems=Xl,gr.ContextMenuRegistry=Jo,gr.Css=DS,gr.Cursor=o$,gr.DELETE_VARIABLE_ID=i$,gr.DRAG_STACK=kT,gr.DUMMY_INPUT=Rx,gr.DeleteArea=jv,gr.DragTarget=DT,gr.DropDownDiv=Rs,gr.Events=dt.module$build$src$core$events$events,gr.Extensions=dt.module$build$src$core$extensions,gr.Field=Qo,gr.FieldAngle=Vo,gr.FieldCheckbox=dt.FieldCheckbox$$module$build$src$core$field_checkbox,gr.FieldColour=Tu,gr.FieldDropdown=Ju,gr.FieldImage=dt.FieldImage$$module$build$src$core$field_image,gr.FieldLabel=dt.FieldLabel$$module$build$src$core$field_label,gr.FieldLabelSerializable=LE,gr.FieldMultilineInput=D$,gr.FieldNumber=L$,gr.FieldTextInput=dt.FieldTextInput$$module$build$src$core$field_textinput,gr.FieldVariable=w0,gr.Flyout=_b,gr.FlyoutButton=MO,gr.FlyoutMetricsManager=ME,gr.Generator=dt.CodeGenerator$$module$build$src$core$generator,gr.Gesture=_p,gr.Grid=g$,gr.HorizontalFlyout=PE,gr.INPUT_VALUE=wx,gr.Icon=Wv,gr.Input=TO,gr.InsertionMarkerManager=$u,gr.Marker=MT,gr.MarkerManager=qy,gr.Menu=WS,gr.MenuItem=HS,gr.MetricsManager=M$,gr.Msg=To,gr.Mutator=dt.Mutator$$module$build$src$core$mutator,gr.NEXT_STATEMENT=Ax,gr.Names=Nu,gr.OPPOSITE_TYPE=g_,gr.OUTPUT_VALUE=Cx,gr.Options=_h,gr.PREVIOUS_STATEMENT=Ix,gr.PROCEDURE_CATEGORY_NAME=Zv,gr.Procedures=dt.module$build$src$core$procedures,gr.RENAME_VARIABLE_ID=r$,gr.RenderedConnection=Ql,gr.Scrollbar=Ss,gr.ScrollbarPair=k$,gr.ShortcutItems=yp,gr.ShortcutRegistry=ts,gr.TOOLBOX_AT_BOTTOM=Mx,gr.TOOLBOX_AT_LEFT=Px,gr.TOOLBOX_AT_RIGHT=Lx,gr.TOOLBOX_AT_TOP=kx,gr.TabNavigateCursor=PT,gr.Theme=m_,gr.ThemeManager=KT,gr.Themes=h$,gr.Toolbox=UT,gr.ToolboxCategory=_d,gr.ToolboxItem=u$,gr.ToolboxSeparator=g0,gr.Tooltip=ks,gr.Touch=$l,gr.TouchGesture=_p,gr.Trashcan=NT,gr.VARIABLE_CATEGORY_NAME=Dv,gr.VARIABLE_DYNAMIC_CATEGORY_NAME=x$,gr.VERSION=$x,gr.VariableMap=A$,gr.VariableModel=Zy,gr.Variables=dt.module$build$src$core$variables,gr.VariablesDynamic=Em,gr.VerticalFlyout=P$,gr.Warning=LT,gr.WidgetDiv=Ku,gr.Workspace=jp,gr.WorkspaceAudio=eE,gr.WorkspaceComment=gp,gr.WorkspaceCommentSvg=Il,gr.WorkspaceDragSurfaceSvg=IE,gr.WorkspaceDragger=WT,gr.WorkspaceSvg=_f,gr.Xml=dt.module$build$src$core$xml,gr.ZoomControls=tE,gr.bindEventWithChecks_=Bp,gr.bindEvent_=hp,gr.blockAnimations=h0,gr.blockRendering=es,gr.browserEvents=br,gr.bumpObjects=Jv,gr.clipboard=d0,gr.common=dt.module$build$src$core$common,gr.config=dt.config$$module$build$src$core$config,gr.connectionTypes=Dx,gr.constants=JS,gr.copy=vv,gr.defineBlocksWithJsonArray=Ln,gr.dialog=su,gr.duplicate=iu,gr.fieldRegistry=n0,gr.geras=bp,gr.getMainWorkspace=In,gr.getSelected=Dn,gr.hideChaff=gS,gr.hueToHex=OS,gr.inject=ap,gr.inputTypes=No,gr.isNumber=Dy,gr.minimalist=x0,gr.paste=_S,gr.procedures=dt.module$build$src$core$procedures,gr.registry=Yu,gr.resizeSvgContents=yv,gr.serialization=Sx,gr.setLocale=IS,gr.setParentContainer=jn,gr.svgResize=Kn,gr.thrasos=R$,gr.uiPosition=__,gr.unbindEvent_=cO,gr.utils=zo,gr.zelos=ep,dt.module$build$src$core$contextmenu,dt.module$build$src$core$events$events,dt.module$build$src$core$msg,dt.module$build$src$core$common,Object.defineProperties(gr,{alert:{set:function(St){xs.warn("Blockly.alert","December 2021","December 2022"),su.setAlert(St)},get:function(){return xs.warn("Blockly.alert","December 2021","December 2022","Blockly.dialog.alert()"),su.alert}},confirm:{set:function(St){xs.warn("Blockly.confirm","December 2021","December 2022"),su.setConfirm(St)},get:function(){return xs.warn("Blockly.confirm","December 2021","December 2022","Blockly.dialog.confirm()"),su.confirm}},mainWorkspace:{set:function(St){xs.warn("Blockly.mainWorkspace","version 9","version 10","Blockly.getMainWorkspace"),dt.module$build$src$core$common.setMainWorkspace(St)},get:function(){return xs.warn("Blockly.mainWorkspace","version 9","version 10","Blockly.getMainWorkspace"),dt.module$build$src$core$common.getMainWorkspace()}},prompt:{set:function(St){xs.warn("Blockly.prompt","December 2021","December 2022"),su.setPrompt(St)},get:function(){return xs.warn("Blockly.prompt","December 2021","December 2022","Blockly.dialog.prompt()"),su.prompt}},selected:{get:function(){return xs.warn("Blockly.selected","version 9","version 10","Blockly.getSelected"),dt.module$build$src$core$common.getSelected()},set:function(St){xs.warn("Blockly.selected","version 9","version 10","Blockly.getSelected"),dt.module$build$src$core$common.setSelected(St)}},HSV_SATURATION:{get:function(){return Rl.getHsvSaturation()},set:function(St){Rl.setHsvSaturation(St)}},HSV_VALUE:{get:function(){return Rl.getHsvValue()},set:function(St){Rl.setHsvValue(St)}}}),Object.defineProperties(dt.module$build$src$core$contextmenu,{currentBlock:{get:function(){return xs.warn("Blockly.ContextMenu.currentBlock","September 2021","September 2022","Blockly.Tooltip.getCurrentBlock()"),dt.module$build$src$core$contextmenu.getCurrentBlock()},set:function(St){xs.warn("Blockly.ContextMenu.currentBlock","September 2021","September 2022","Blockly.Tooltip.setCurrentBlock(block)"),dt.module$build$src$core$contextmenu.setCurrentBlock(St)}}}),Object.defineProperties(dt.module$build$src$core$events$events,{recordUndo:{get:function(){return xs.warn("Blockly.Events.recordUndo","September 2021","September 2022","Blockly.Events.getRecordUndo()"),Eo.getRecordUndo()},set:function(St){xs.warn("Blockly.Events.recordUndo","September 2021","September 2022","Blockly.Events.setRecordUndo()"),Eo.setRecordUndo(St)}}}),Object.defineProperties(ks,{visible:{get:function(){return xs.warn("Blockly.Tooltip.visible","September 2021","September 2022","Blockly.Tooltip.isVisible()"),ks.isVisible()}},DIV:{get:function(){return xs.warn("Blockly.Tooltip.DIV","September 2021","September 2022","Blockly.Tooltip.getDiv()"),ks.getDiv()}}}),Object.defineProperties(Ku,{DIV:{get:function(){return xs.warn("Blockly.WidgetDiv.DIV","September 2021","September 2022","Blockly.WidgetDiv.getDiv()"),Ku.getDiv()}}}),"Blockly"in globalThis||(globalThis.Blockly={Msg:dt.module$build$src$core$msg}),gr.__namespace__=dt,gr})}(blockly_compressed)),blockly_compressed.exports}var hasRequiredBlockly;function requireBlockly(){return hasRequiredBlockly||(hasRequiredBlockly=1,function(ft,lt){(function(dt,vt){ft.exports=vt(requireBlockly_compressed())})(commonjsGlobal,function(dt){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return dt})}(blockly)),blockly.exports}var hasRequiredCoreBrowser;function requireCoreBrowser(){return hasRequiredCoreBrowser||(hasRequiredCoreBrowser=1,function(ft,lt){(function(dt,vt){ft.exports=vt(requireBlockly())})(commonjsGlobal,function(dt){return dt})}(coreBrowser)),coreBrowser.exports}var en$1={exports:{}},hasRequiredEn;function requireEn(){return hasRequiredEn||(hasRequiredEn=1,function(ft,lt){(function(dt,vt){ft.exports=vt()})(commonjsGlobal,function(){var dt=dt||{Msg:Object.create(null)};return dt.Msg.ADD_COMMENT="Add Comment",dt.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",dt.Msg.CHANGE_VALUE_TITLE="Change value:",dt.Msg.CLEAN_UP="Clean up Blocks",dt.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",dt.Msg.COLLAPSE_ALL="Collapse Blocks",dt.Msg.COLLAPSE_BLOCK="Collapse Block",dt.Msg.COLOUR_BLEND_COLOUR1="colour 1",dt.Msg.COLOUR_BLEND_COLOUR2="colour 2",dt.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",dt.Msg.COLOUR_BLEND_RATIO="ratio",dt.Msg.COLOUR_BLEND_TITLE="blend",dt.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",dt.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",dt.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",dt.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",dt.Msg.COLOUR_RANDOM_TITLE="random colour",dt.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",dt.Msg.COLOUR_RGB_BLUE="blue",dt.Msg.COLOUR_RGB_GREEN="green",dt.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",dt.Msg.COLOUR_RGB_RED="red",dt.Msg.COLOUR_RGB_TITLE="colour with",dt.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",dt.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",dt.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",dt.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",dt.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",dt.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",dt.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",dt.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",dt.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",dt.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",dt.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",dt.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",dt.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",dt.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",dt.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",dt.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",dt.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",dt.Msg.CONTROLS_IF_MSG_ELSE="else",dt.Msg.CONTROLS_IF_MSG_ELSEIF="else if",dt.Msg.CONTROLS_IF_MSG_IF="if",dt.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",dt.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",dt.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",dt.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",dt.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",dt.Msg.CONTROLS_REPEAT_INPUT_DO="do",dt.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",dt.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",dt.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",dt.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",dt.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",dt.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",dt.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",dt.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",dt.Msg.DELETE_BLOCK="Delete Block",dt.Msg.DELETE_VARIABLE="Delete the '%1' variable",dt.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",dt.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",dt.Msg.DIALOG_CANCEL="Cancel",dt.Msg.DIALOG_OK="OK",dt.Msg.DISABLE_BLOCK="Disable Block",dt.Msg.DUPLICATE_BLOCK="Duplicate",dt.Msg.DUPLICATE_COMMENT="Duplicate Comment",dt.Msg.ENABLE_BLOCK="Enable Block",dt.Msg.EXPAND_ALL="Expand Blocks",dt.Msg.EXPAND_BLOCK="Expand Block",dt.Msg.EXTERNAL_INPUTS="External Inputs",dt.Msg.HELP="Help",dt.Msg.INLINE_INPUTS="Inline Inputs",dt.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",dt.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",dt.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",dt.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",dt.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",dt.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",dt.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",dt.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",dt.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",dt.Msg.LISTS_GET_INDEX_FIRST="first",dt.Msg.LISTS_GET_INDEX_FROM_END="# from end",dt.Msg.LISTS_GET_INDEX_FROM_START="#",dt.Msg.LISTS_GET_INDEX_GET="get",dt.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",dt.Msg.LISTS_GET_INDEX_LAST="last",dt.Msg.LISTS_GET_INDEX_RANDOM="random",dt.Msg.LISTS_GET_INDEX_REMOVE="remove",dt.Msg.LISTS_GET_INDEX_TAIL="",dt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",dt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",dt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",dt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",dt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",dt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",dt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",dt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",dt.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",dt.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",dt.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",dt.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",dt.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",dt.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",dt.Msg.LISTS_GET_SUBLIST_END_LAST="to last",dt.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",dt.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",dt.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",dt.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",dt.Msg.LISTS_GET_SUBLIST_TAIL="",dt.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",dt.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",dt.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",dt.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",dt.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",dt.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",dt.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",dt.Msg.LISTS_INLIST="in list",dt.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",dt.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",dt.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",dt.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",dt.Msg.LISTS_LENGTH_TITLE="length of %1",dt.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",dt.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",dt.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",dt.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",dt.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",dt.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",dt.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",dt.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",dt.Msg.LISTS_SET_INDEX_INPUT_TO="as",dt.Msg.LISTS_SET_INDEX_INSERT="insert at",dt.Msg.LISTS_SET_INDEX_SET="set",dt.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",dt.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",dt.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",dt.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",dt.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",dt.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",dt.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",dt.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",dt.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",dt.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",dt.Msg.LISTS_SORT_ORDER_DESCENDING="descending",dt.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",dt.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",dt.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",dt.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",dt.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",dt.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",dt.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",dt.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",dt.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",dt.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",dt.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",dt.Msg.LOGIC_BOOLEAN_FALSE="false",dt.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",dt.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",dt.Msg.LOGIC_BOOLEAN_TRUE="true",dt.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",dt.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",dt.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",dt.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",dt.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",dt.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",dt.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",dt.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",dt.Msg.LOGIC_NEGATE_TITLE="not %1",dt.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",dt.Msg.LOGIC_NULL="null",dt.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",dt.Msg.LOGIC_NULL_TOOLTIP="Returns null.",dt.Msg.LOGIC_OPERATION_AND="and",dt.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",dt.Msg.LOGIC_OPERATION_OR="or",dt.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",dt.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",dt.Msg.LOGIC_TERNARY_CONDITION="test",dt.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",dt.Msg.LOGIC_TERNARY_IF_FALSE="if false",dt.Msg.LOGIC_TERNARY_IF_TRUE="if true",dt.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",dt.Msg.MATH_ADDITION_SYMBOL="+",dt.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",dt.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",dt.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",dt.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",dt.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",dt.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",dt.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",dt.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",dt.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",dt.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",dt.Msg.MATH_CHANGE_TITLE="change %1 by %2",dt.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",dt.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",dt.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: π (3.141…), e (2.718…), φ (1.618…), sqrt(2) (1.414…), sqrt(½) (0.707…), or ∞ (infinity).",dt.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",dt.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",dt.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",dt.Msg.MATH_DIVISION_SYMBOL="÷",dt.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",dt.Msg.MATH_IS_EVEN="is even",dt.Msg.MATH_IS_NEGATIVE="is negative",dt.Msg.MATH_IS_ODD="is odd",dt.Msg.MATH_IS_POSITIVE="is positive",dt.Msg.MATH_IS_PRIME="is prime",dt.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",dt.Msg.MATH_IS_WHOLE="is whole",dt.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",dt.Msg.MATH_MODULO_TITLE="remainder of %1 ÷ %2",dt.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",dt.Msg.MATH_MULTIPLICATION_SYMBOL="×",dt.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",dt.Msg.MATH_NUMBER_TOOLTIP="A number.",dt.Msg.MATH_ONLIST_HELPURL="",dt.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",dt.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",dt.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",dt.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",dt.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",dt.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",dt.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",dt.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",dt.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",dt.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",dt.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",dt.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",dt.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",dt.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",dt.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",dt.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",dt.Msg.MATH_POWER_SYMBOL="^",dt.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",dt.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",dt.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",dt.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",dt.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",dt.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",dt.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",dt.Msg.MATH_ROUND_OPERATOR_ROUND="round",dt.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",dt.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",dt.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",dt.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",dt.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",dt.Msg.MATH_SINGLE_OP_ROOT="square root",dt.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",dt.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",dt.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",dt.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",dt.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",dt.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",dt.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",dt.Msg.MATH_SUBTRACTION_SYMBOL="-",dt.Msg.MATH_TRIG_ACOS="acos",dt.Msg.MATH_TRIG_ASIN="asin",dt.Msg.MATH_TRIG_ATAN="atan",dt.Msg.MATH_TRIG_COS="cos",dt.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",dt.Msg.MATH_TRIG_SIN="sin",dt.Msg.MATH_TRIG_TAN="tan",dt.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",dt.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",dt.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",dt.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",dt.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",dt.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",dt.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",dt.Msg.NEW_NUMBER_VARIABLE="Create number variable...",dt.Msg.NEW_STRING_VARIABLE="Create string variable...",dt.Msg.NEW_VARIABLE="Create variable...",dt.Msg.NEW_VARIABLE_TITLE="New variable name:",dt.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",dt.Msg.ORDINAL_NUMBER_SUFFIX="",dt.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",dt.Msg.PROCEDURES_BEFORE_PARAMS="with:",dt.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",dt.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",dt.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",dt.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",dt.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",dt.Msg.PROCEDURES_CREATE_DO="Create '%1'",dt.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",dt.Msg.PROCEDURES_DEFNORETURN_DO="",dt.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",dt.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",dt.Msg.PROCEDURES_DEFNORETURN_TITLE="to",dt.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",dt.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",dt.Msg.PROCEDURES_DEFRETURN_RETURN="return",dt.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",dt.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",dt.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",dt.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",dt.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",dt.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",dt.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",dt.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",dt.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",dt.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",dt.Msg.REDO="Redo",dt.Msg.REMOVE_COMMENT="Remove Comment",dt.Msg.RENAME_VARIABLE="Rename variable...",dt.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",dt.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",dt.Msg.TEXT_APPEND_TITLE="to %1 append text %2",dt.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",dt.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",dt.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",dt.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",dt.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",dt.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",dt.Msg.TEXT_CHARAT_FIRST="get first letter",dt.Msg.TEXT_CHARAT_FROM_END="get letter # from end",dt.Msg.TEXT_CHARAT_FROM_START="get letter #",dt.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",dt.Msg.TEXT_CHARAT_LAST="get last letter",dt.Msg.TEXT_CHARAT_RANDOM="get random letter",dt.Msg.TEXT_CHARAT_TAIL="",dt.Msg.TEXT_CHARAT_TITLE="in text %1 %2",dt.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",dt.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",dt.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",dt.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",dt.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",dt.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",dt.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",dt.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",dt.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",dt.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",dt.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",dt.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",dt.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",dt.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",dt.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",dt.Msg.TEXT_GET_SUBSTRING_TAIL="",dt.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",dt.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",dt.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",dt.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",dt.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",dt.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",dt.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",dt.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",dt.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",dt.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",dt.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",dt.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",dt.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",dt.Msg.TEXT_LENGTH_TITLE="length of %1",dt.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",dt.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",dt.Msg.TEXT_PRINT_TITLE="print %1",dt.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",dt.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",dt.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",dt.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",dt.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",dt.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",dt.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",dt.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",dt.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",dt.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",dt.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",dt.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",dt.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",dt.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",dt.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",dt.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",dt.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",dt.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",dt.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",dt.Msg.TODAY="Today",dt.Msg.UNDO="Undo",dt.Msg.UNNAMED_KEY="unnamed",dt.Msg.VARIABLES_DEFAULT_NAME="item",dt.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",dt.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",dt.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",dt.Msg.VARIABLES_SET="set %1 to %2",dt.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",dt.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",dt.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",dt.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",dt.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",dt.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",dt.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",dt.Msg.CONTROLS_FOREACH_INPUT_DO=dt.Msg.CONTROLS_REPEAT_INPUT_DO,dt.Msg.CONTROLS_FOR_INPUT_DO=dt.Msg.CONTROLS_REPEAT_INPUT_DO,dt.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=dt.Msg.CONTROLS_IF_MSG_ELSEIF,dt.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=dt.Msg.CONTROLS_IF_MSG_ELSE,dt.Msg.CONTROLS_IF_IF_TITLE_IF=dt.Msg.CONTROLS_IF_MSG_IF,dt.Msg.CONTROLS_IF_MSG_THEN=dt.Msg.CONTROLS_REPEAT_INPUT_DO,dt.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=dt.Msg.CONTROLS_REPEAT_INPUT_DO,dt.Msg.LISTS_CREATE_WITH_ITEM_TITLE=dt.Msg.VARIABLES_DEFAULT_NAME,dt.Msg.LISTS_GET_INDEX_HELPURL=dt.Msg.LISTS_INDEX_OF_HELPURL,dt.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=dt.Msg.LISTS_INLIST,dt.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=dt.Msg.LISTS_INLIST,dt.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=dt.Msg.LISTS_INLIST,dt.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=dt.Msg.LISTS_INLIST,dt.Msg.MATH_CHANGE_TITLE_ITEM=dt.Msg.VARIABLES_DEFAULT_NAME,dt.Msg.PROCEDURES_DEFRETURN_COMMENT=dt.Msg.PROCEDURES_DEFNORETURN_COMMENT,dt.Msg.PROCEDURES_DEFRETURN_DO=dt.Msg.PROCEDURES_DEFNORETURN_DO,dt.Msg.PROCEDURES_DEFRETURN_PROCEDURE=dt.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,dt.Msg.PROCEDURES_DEFRETURN_TITLE=dt.Msg.PROCEDURES_DEFNORETURN_TITLE,dt.Msg.TEXT_APPEND_VARIABLE=dt.Msg.VARIABLES_DEFAULT_NAME,dt.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=dt.Msg.VARIABLES_DEFAULT_NAME,dt.Msg.MATH_HUE="230",dt.Msg.LOOPS_HUE="120",dt.Msg.LISTS_HUE="260",dt.Msg.LOGIC_HUE="210",dt.Msg.VARIABLES_HUE="330",dt.Msg.TEXTS_HUE="160",dt.Msg.PROCEDURES_HUE="290",dt.Msg.COLOUR_HUE="20",dt.Msg.VARIABLES_DYNAMIC_HUE="310",dt.Msg})}(en$1)),en$1.exports}var blocks={exports:{}},blocks_compressed={exports:{}},hasRequiredBlocks_compressed;function requireBlocks_compressed(){return hasRequiredBlocks_compressed||(hasRequiredBlocks_compressed=1,function(ft,lt){(function(dt,vt){ft.exports=vt(requireBlockly_compressed())})(commonjsGlobal,function(dt){var vt=dt.__namespace__,Tt={};vt.module$build$src$core$contextmenu,vt.module$build$src$core$extensions,vt.module$build$src$core$variables,vt.module$build$src$core$utils$xml;var Et=vt.module$build$src$core$msg.Msg,Ct=vt.module$build$src$core$common.createBlockDefinitionsFromJsonArray,Rt=vt.module$build$src$core$common.defineBlocks;Tt.blocks=Ct([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]);var kt={customContextMenu:function(xn){if(this.isInFlyout)(this.type==="variables_get_dynamic"||this.type==="variables_get_reporter_dynamic")&&(Nn={text:Et.RENAME_VARIABLE,enabled:!0,callback:Dt(this)},Gn=this.getField("VAR").getText(),Gn={text:Et.DELETE_VARIABLE.replace("%1",Gn),enabled:!0,callback:Bt(this)},xn.unshift(Nn),xn.unshift(Gn));else{var Nn=this.getFieldValue("VAR"),Zn=this.workspace.getVariableById(Nn).type;if(this.type==="variables_get_dynamic"){Nn="variables_set_dynamic";var hr=Et.VARIABLES_GET_CREATE_SET}else Nn="variables_get_dynamic",hr=Et.VARIABLES_SET_CREATE_GET;var Gn={enabled:0<this.workspace.remainingCapacity()};const dr=this.getField("VAR").getText();Gn.text=hr.replace("%1",dr),hr=vt.module$build$src$core$utils$xml.createElement("field"),hr.setAttribute("name","VAR"),hr.setAttribute("variabletype",Zn),hr.appendChild(vt.module$build$src$core$utils$xml.createTextNode(dr)),Zn=vt.module$build$src$core$utils$xml.createElement("block"),Zn.setAttribute("type",Nn),Zn.appendChild(hr),Gn.callback=vt.module$build$src$core$contextmenu.callbackFactory(this,Zn),xn.push(Gn)}},onchange:function(xn){xn=this.getFieldValue("VAR"),xn=vt.module$build$src$core$variables.getVariable(this.workspace,xn),this.type==="variables_get_dynamic"?this.outputConnection.setCheck(xn.type):this.getInput("VALUE").connection.setCheck(xn.type)}},Dt=function(xn){return function(){const Nn=xn.workspace,Zn=xn.getField("VAR").getVariable();vt.module$build$src$core$variables.renameVariable(Nn,Zn)}},Bt=function(xn){return function(){const Nn=xn.workspace,Zn=xn.getField("VAR").getVariable();Nn.deleteVariableById(Zn.getId()),Nn.refreshToolboxSelection()}};vt.module$build$src$core$extensions.registerMixin("contextMenu_variableDynamicSetterGetter",kt),Rt(Tt.blocks);var Ft={};vt.module$build$src$core$contextmenu,vt.module$build$src$core$extensions,vt.module$build$src$core$variables,vt.module$build$src$core$utils$xml;var Ut=vt.module$build$src$core$msg.Msg,Zt=vt.module$build$src$core$common.createBlockDefinitionsFromJsonArray,Kt=vt.module$build$src$core$common.defineBlocks;Ft.blocks=Zt([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]);var ln={customContextMenu:function(xn){if(this.isInFlyout)(this.type==="variables_get"||this.type==="variables_get_reporter")&&(Nn={text:Ut.RENAME_VARIABLE,enabled:!0,callback:hn(this)},hr=this.getField("VAR").getText(),hr={text:Ut.DELETE_VARIABLE.replace("%1",hr),enabled:!0,callback:dn(this)},xn.unshift(Nn),xn.unshift(hr));else{if(this.type==="variables_get")var Nn="variables_set",Zn=Ut.VARIABLES_GET_CREATE_SET;else Nn="variables_get",Zn=Ut.VARIABLES_SET_CREATE_GET;var hr={enabled:0<this.workspace.remainingCapacity()},Gn=this.getField("VAR").getText();hr.text=Zn.replace("%1",Gn),Zn=vt.module$build$src$core$utils$xml.createElement("field"),Zn.setAttribute("name","VAR"),Zn.appendChild(vt.module$build$src$core$utils$xml.createTextNode(Gn)),Gn=vt.module$build$src$core$utils$xml.createElement("block"),Gn.setAttribute("type",Nn),Gn.appendChild(Zn),hr.callback=vt.module$build$src$core$contextmenu.callbackFactory(this,Gn),xn.push(hr)}}},hn=function(xn){return function(){const Nn=xn.workspace,Zn=xn.getField("VAR").getVariable();vt.module$build$src$core$variables.renameVariable(Nn,Zn)}},dn=function(xn){return function(){const Nn=xn.workspace,Zn=xn.getField("VAR").getVariable();Nn.deleteVariableById(Zn.getId()),Nn.refreshToolboxSelection()}};vt.module$build$src$core$extensions.registerMixin("contextMenu_variableSetterGetter",ln),Kt(Ft.blocks);var pn={};vt.module$build$src$core$extensions;var mn=vt.module$build$src$core$msg.Msg;vt.module$build$src$core$utils$xml,vt.Align$$module$build$src$core$input,vt.module$build$src$core$connection_type.ConnectionType;var On=vt.module$build$src$core$field_dropdown.FieldDropdown;vt.FieldImage$$module$build$src$core$field_image,vt.FieldTextInput$$module$build$src$core$field_textinput,vt.Mutator$$module$build$src$core$mutator;var bn=vt.module$build$src$core$common.createBlockDefinitionsFromJsonArray,En=vt.module$build$src$core$common.defineBlocks;pn.blocks=bn([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"¶"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),pn.blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[mn.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[mn.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[mn.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[mn.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[mn.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[mn.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(mn.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(mn.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),mn.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(mn.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(mn.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){const xn=vt.module$build$src$core$utils$xml.createElement("mutation");var Nn=this.getInput("AT1").type===vt.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return xn.setAttribute("at1",Nn),Nn=this.getInput("AT2").type===vt.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE,xn.setAttribute("at2",Nn),xn},domToMutation:function(xn){const Nn=xn.getAttribute("at1")==="true";xn=xn.getAttribute("at2")==="true",this.updateAt_(1,Nn),this.updateAt_(2,xn)},updateAt_:function(xn,Nn){this.removeInput("AT"+xn),this.removeInput("ORDINAL"+xn,!0),Nn?(this.appendValueInput("AT"+xn).setCheck("Number"),mn.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+xn).appendField(mn.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+xn),xn===2&&mn.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(mn.TEXT_GET_SUBSTRING_TAIL));const Zn=new On(this["WHERE_OPTIONS_"+xn],function(hr){const Gn=hr==="FROM_START"||hr==="FROM_END";if(Gn!==Nn){const dr=this.getSourceBlock();return dr.updateAt_(xn,Gn),dr.setFieldValue(hr,"WHERE"+xn),null}});this.getInput("AT"+xn).appendField(Zn,"WHERE"+xn),xn===1&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},pn.blocks.text_changeCase={init:function(){const xn=[[mn.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[mn.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[mn.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(mn.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new On(xn),"CASE"),this.setOutput(!0,"String"),this.setTooltip(mn.TEXT_CHANGECASE_TOOLTIP)}},pn.blocks.text_trim={init:function(){const xn=[[mn.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[mn.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[mn.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(mn.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new On(xn),"MODE"),this.setOutput(!0,"String"),this.setTooltip(mn.TEXT_TRIM_TOOLTIP)}},pn.blocks.text_print={init:function(){this.jsonInit({message0:mn.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:mn.TEXT_PRINT_TOOLTIP,helpUrl:mn.TEXT_PRINT_HELPURL})}};var An={updateType_:function(xn){this.outputConnection.setCheck(xn==="NUMBER"?"Number":"String")},mutationToDom:function(){const xn=vt.module$build$src$core$utils$xml.createElement("mutation");return xn.setAttribute("type",this.getFieldValue("TYPE")),xn},domToMutation:function(xn){this.updateType_(xn.getAttribute("type"))}};pn.blocks.text_prompt_ext=Object.assign({},An,{init:function(){var xn=[[mn.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[mn.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(mn.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks");const Nn=this;xn=new On(xn,function(Zn){Nn.updateType_(Zn)}),this.appendValueInput("TEXT").appendField(xn,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(function(){return Nn.getFieldValue("TYPE")==="TEXT"?mn.TEXT_PROMPT_TOOLTIP_TEXT:mn.TEXT_PROMPT_TOOLTIP_NUMBER})}}),pn.blocks.text_prompt=Object.assign({},An,{init:function(){this.mixin(Tn);var xn=[[mn.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[mn.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];const Nn=this;this.setHelpUrl(mn.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),xn=new On(xn,function(Zn){Nn.updateType_(Zn)}),this.appendDummyInput().appendField(xn,"TYPE").appendField(this.newQuote_(!0)).appendField(new vt.FieldTextInput$$module$build$src$core$field_textinput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(function(){return Nn.getFieldValue("TYPE")==="TEXT"?mn.TEXT_PROMPT_TOOLTIP_TEXT:mn.TEXT_PROMPT_TOOLTIP_NUMBER})}}),pn.blocks.text_count={init:function(){this.jsonInit({message0:mn.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:mn.TEXT_COUNT_TOOLTIP,helpUrl:mn.TEXT_COUNT_HELPURL})}},pn.blocks.text_replace={init:function(){this.jsonInit({message0:mn.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:mn.TEXT_REPLACE_TOOLTIP,helpUrl:mn.TEXT_REPLACE_HELPURL})}},pn.blocks.text_reverse={init:function(){this.jsonInit({message0:mn.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:mn.TEXT_REVERSE_TOOLTIP,helpUrl:mn.TEXT_REVERSE_HELPURL})}};var Tn={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(xn){for(let Nn=0,Zn;Zn=this.inputList[Nn];Nn++)for(let hr=0,Gn;Gn=Zn.fieldRow[hr];hr++)if(xn===Gn.name){Zn.insertFieldAt(hr,this.newQuote_(!0)),Zn.insertFieldAt(hr+2,this.newQuote_(!1));return}console.warn('field named "'+xn+'" not found in '+this.toDevString())},newQuote_:function(xn){return xn=this.RTL?!xn:xn,new vt.FieldImage$$module$build$src$core$field_image(xn?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,xn?"“":"”")}},In=function(){this.mixin(Tn),this.quoteField_("TEXT")},Rn={mutationToDom:function(){const xn=vt.module$build$src$core$utils$xml.createElement("mutation");return xn.setAttribute("items",this.itemCount_),xn},domToMutation:function(xn){this.itemCount_=parseInt(xn.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(xn){this.itemCount_=xn.itemCount,this.updateShape_()},decompose:function(xn){const Nn=xn.newBlock("text_create_join_container");Nn.initSvg();let Zn=Nn.getInput("STACK").connection;for(let hr=0;hr<this.itemCount_;hr++){const Gn=xn.newBlock("text_create_join_item");Gn.initSvg(),Zn.connect(Gn.previousConnection),Zn=Gn.nextConnection}return Nn},compose:function(xn){var Nn=xn.getInputTargetBlock("STACK");for(xn=[];Nn;)Nn.isInsertionMarker()||xn.push(Nn.valueConnection_),Nn=Nn.getNextBlock();for(Nn=0;Nn<this.itemCount_;Nn++){const Zn=this.getInput("ADD"+Nn).connection.targetConnection;Zn&&xn.indexOf(Zn)===-1&&Zn.disconnect()}for(this.itemCount_=xn.length,this.updateShape_(),Nn=0;Nn<this.itemCount_;Nn++)vt.Mutator$$module$build$src$core$mutator.reconnect(xn[Nn],this,"ADD"+Nn)},saveConnections:function(xn){xn=xn.getInputTargetBlock("STACK");let Nn=0;for(;xn;){if(xn.isInsertionMarker()){xn=xn.getNextBlock();continue}const Zn=this.getInput("ADD"+Nn);xn.valueConnection_=Zn&&Zn.connection.targetConnection,xn=xn.getNextBlock(),Nn++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var xn=0;xn<this.itemCount_;xn++)if(!this.getInput("ADD"+xn)){const Nn=this.appendValueInput("ADD"+xn).setAlign(vt.Align$$module$build$src$core$input.RIGHT);xn===0&&Nn.appendField(mn.TEXT_JOIN_TITLE_CREATEWITH)}for(xn=this.itemCount_;this.getInput("ADD"+xn);xn++)this.removeInput("ADD"+xn)}},Dn=function(){this.mixin(Tn),this.itemCount_=2,this.updateShape_(),this.setMutator(new vt.Mutator$$module$build$src$core$mutator(["text_create_join_item"],this))};vt.module$build$src$core$extensions.register("text_append_tooltip",vt.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_TEXT_APPEND_TOOLTIP}","VAR"));var Bn=function(){const xn=this;this.setTooltip(function(){return mn.TEXT_INDEXOF_TOOLTIP.replace("%1",xn.workspace.options.oneBasedIndex?"0":"-1")})},Hn={mutationToDom:function(){const xn=vt.module$build$src$core$utils$xml.createElement("mutation");return xn.setAttribute("at",!!this.isAt_),xn},domToMutation:function(xn){xn=xn.getAttribute("at")!=="false",this.updateAt_(xn)},updateAt_:function(xn){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),xn&&(this.appendValueInput("AT").setCheck("Number"),mn.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(mn.ORDINAL_NUMBER_SUFFIX)),mn.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(mn.TEXT_CHARAT_TAIL)),this.isAt_=xn}},jn=function(){this.getField("WHERE").setValidator(function(Nn){Nn=Nn==="FROM_START"||Nn==="FROM_END",Nn!==this.isAt_&&this.getSourceBlock().updateAt_(Nn)}),this.updateAt_(!0);const xn=this;this.setTooltip(function(){var Nn=xn.getFieldValue("WHERE");let Zn=mn.TEXT_CHARAT_TOOLTIP;return(Nn==="FROM_START"||Nn==="FROM_END")&&(Nn=Nn==="FROM_START"?mn.LISTS_INDEX_FROM_START_TOOLTIP:mn.LISTS_INDEX_FROM_END_TOOLTIP)&&(Zn+="  "+Nn.replace("%1",xn.workspace.options.oneBasedIndex?"#1":"#0")),Zn})};vt.module$build$src$core$extensions.register("text_indexOf_tooltip",Bn),vt.module$build$src$core$extensions.register("text_quotes",In),vt.module$build$src$core$extensions.registerMutator("text_join_mutator",Rn,Dn),vt.module$build$src$core$extensions.registerMutator("text_charAt_mutator",Hn,jn),En(pn.blocks);var Kn={};vt.module$build$src$core$contextmenu,vt.module$build$src$core$events$events,vt.module$build$src$core$procedures,vt.module$build$src$core$variables,vt.module$build$src$core$xml,vt.module$build$src$core$utils$xml,vt.Align$$module$build$src$core$input,vt.config$$module$build$src$core$config,vt.FieldCheckbox$$module$build$src$core$field_checkbox,vt.FieldLabel$$module$build$src$core$field_label,vt.FieldTextInput$$module$build$src$core$field_textinput;var zn=vt.module$build$src$core$msg.Msg;vt.Mutator$$module$build$src$core$mutator,vt.module$build$src$core$names.Names;var lr=vt.module$build$src$core$common.defineBlocks;Kn.blocks={};var Ln={setStatements_:function(xn){this.hasStatements_!==xn&&(xn?(this.appendStatementInput("STACK").appendField(zn.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=xn)},updateParams_:function(){let xn="";this.arguments_.length&&(xn=zn.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),vt.module$build$src$core$events$events.disable();try{this.setFieldValue(xn,"PARAMS")}finally{vt.module$build$src$core$events$events.enable()}},mutationToDom:function(xn){const Nn=vt.module$build$src$core$utils$xml.createElement("mutation");xn&&Nn.setAttribute("name",this.getFieldValue("NAME"));for(let Zn=0;Zn<this.argumentVarModels_.length;Zn++){const hr=vt.module$build$src$core$utils$xml.createElement("arg"),Gn=this.argumentVarModels_[Zn];hr.setAttribute("name",Gn.name),hr.setAttribute("varid",Gn.getId()),xn&&this.paramIds_&&hr.setAttribute("paramId",this.paramIds_[Zn]),Nn.appendChild(hr)}return this.hasStatements_||Nn.setAttribute("statements","false"),Nn},domToMutation:function(xn){this.arguments_=[],this.argumentVarModels_=[];for(let Zn=0,hr;hr=xn.childNodes[Zn];Zn++)if(hr.nodeName.toLowerCase()==="arg"){const Gn=hr.getAttribute("name");var Nn=hr.getAttribute("varid")||hr.getAttribute("varId");this.arguments_.push(Gn),Nn=vt.module$build$src$core$variables.getOrCreateVariablePackage(this.workspace,Nn,Gn,""),Nn!==null?this.argumentVarModels_.push(Nn):console.log(`Failed to create a variable named "${Gn}", ignoring.`)}this.updateParams_(),vt.module$build$src$core$procedures.mutateCallers(this),this.setStatements_(xn.getAttribute("statements")!=="false")},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;const xn=Object.create(null);if(this.argumentVarModels_.length){xn.params=[];for(let Nn=0;Nn<this.argumentVarModels_.length;Nn++)xn.params.push({name:this.argumentVarModels_[Nn].name,id:this.argumentVarModels_[Nn].getId()})}return this.hasStatements_||(xn.hasStatements=!1),xn},loadExtraState:function(xn){if(this.arguments_=[],this.argumentVarModels_=[],xn.params)for(let Zn=0;Zn<xn.params.length;Zn++){var Nn=xn.params[Zn];Nn=vt.module$build$src$core$variables.getOrCreateVariablePackage(this.workspace,Nn.id,Nn.name,""),this.arguments_.push(Nn.name),this.argumentVarModels_.push(Nn)}this.updateParams_(),vt.module$build$src$core$procedures.mutateCallers(this),this.setStatements_(xn.hasStatements!==!1)},decompose:function(xn){const Nn=vt.module$build$src$core$utils$xml.createElement("block");Nn.setAttribute("type","procedures_mutatorcontainer");var Zn=vt.module$build$src$core$utils$xml.createElement("statement");Zn.setAttribute("name","STACK"),Nn.appendChild(Zn);for(let Gn=0;Gn<this.arguments_.length;Gn++){const dr=vt.module$build$src$core$utils$xml.createElement("block");dr.setAttribute("type","procedures_mutatorarg");var hr=vt.module$build$src$core$utils$xml.createElement("field");hr.setAttribute("name","NAME");const Br=vt.module$build$src$core$utils$xml.createTextNode(this.arguments_[Gn]);hr.appendChild(Br),dr.appendChild(hr),hr=vt.module$build$src$core$utils$xml.createElement("next"),dr.appendChild(hr),Zn.appendChild(dr),Zn=hr}return xn=vt.module$build$src$core$xml.domToBlock(Nn,xn),this.type==="procedures_defreturn"?xn.setFieldValue(this.hasStatements_,"STATEMENTS"):xn.removeInput("STATEMENT_INPUT"),vt.module$build$src$core$procedures.mutateCallers(this),xn},compose:function(xn){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];let Nn=xn.getInputTargetBlock("STACK");for(;Nn&&!Nn.isInsertionMarker();){var Zn=Nn.getFieldValue("NAME");this.arguments_.push(Zn),Zn=this.workspace.getVariable(Zn,""),this.argumentVarModels_.push(Zn),this.paramIds_.push(Nn.id),Nn=Nn.nextConnection&&Nn.nextConnection.targetBlock()}this.updateParams_(),vt.module$build$src$core$procedures.mutateCallers(this),xn=xn.getFieldValue("STATEMENTS"),xn!==null&&(xn=xn==="TRUE",this.hasStatements_!==xn)&&(xn?(this.setStatements_(!0),vt.Mutator$$module$build$src$core$mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(xn=this.getInput("STACK").connection,(this.statementConnection_=xn.targetConnection)&&(xn=xn.targetBlock(),xn.unplug(),xn.bumpNeighbours()),this.setStatements_(!1)))},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(xn,Nn){var Zn=this.workspace.getVariableById(xn);if(Zn.type===""){Zn=Zn.name,Nn=this.workspace.getVariableById(Nn);var hr=!1;for(let Gn=0;Gn<this.argumentVarModels_.length;Gn++)this.argumentVarModels_[Gn].getId()===xn&&(this.arguments_[Gn]=Nn.name,this.argumentVarModels_[Gn]=Nn,hr=!0);hr&&(this.displayRenamedVar_(Zn,Nn.name),vt.module$build$src$core$procedures.mutateCallers(this))}},updateVarName:function(xn){const Nn=xn.name;let Zn=!1,hr;for(let Gn=0;Gn<this.argumentVarModels_.length;Gn++)this.argumentVarModels_[Gn].getId()===xn.getId()&&(hr=this.arguments_[Gn],this.arguments_[Gn]=Nn,Zn=!0);Zn&&(this.displayRenamedVar_(hr,Nn),vt.module$build$src$core$procedures.mutateCallers(this))},displayRenamedVar_:function(xn,Nn){if(this.updateParams_(),this.mutator&&this.mutator.isVisible()){const Zn=this.mutator.workspace_.getAllBlocks(!1);for(let hr=0,Gn;Gn=Zn[hr];hr++)Gn.type==="procedures_mutatorarg"&&vt.module$build$src$core$names.Names.equals(xn,Gn.getFieldValue("NAME"))&&Gn.setFieldValue(Nn,"NAME")}},customContextMenu:function(xn){if(!this.isInFlyout){var Nn={enabled:!0},Zn=this.getFieldValue("NAME");Nn.text=zn.PROCEDURES_CREATE_DO.replace("%1",Zn);var hr=vt.module$build$src$core$utils$xml.createElement("mutation");for(hr.setAttribute("name",Zn),Zn=0;Zn<this.arguments_.length;Zn++){var Gn=vt.module$build$src$core$utils$xml.createElement("arg");Gn.setAttribute("name",this.arguments_[Zn]),hr.appendChild(Gn)}if(Zn=vt.module$build$src$core$utils$xml.createElement("block"),Zn.setAttribute("type",this.callType_),Zn.appendChild(hr),Nn.callback=vt.module$build$src$core$contextmenu.callbackFactory(this,Zn),xn.push(Nn),!this.isCollapsed())for(Nn=0;Nn<this.argumentVarModels_.length;Nn++)hr={enabled:!0},Zn=this.argumentVarModels_[Nn],hr.text=zn.VARIABLES_SET_CREATE_GET.replace("%1",Zn.name),Zn=vt.module$build$src$core$variables.generateVariableFieldDom(Zn),Gn=vt.module$build$src$core$utils$xml.createElement("block"),Gn.setAttribute("type","variables_get"),Gn.appendChild(Zn),hr.callback=vt.module$build$src$core$contextmenu.callbackFactory(this,Gn),xn.push(hr)}}};Kn.blocks.procedures_defnoreturn=Object.assign({},Ln,{init:function(){var xn=vt.module$build$src$core$procedures.findLegalName("",this);xn=new vt.FieldTextInput$$module$build$src$core$field_textinput(xn,vt.module$build$src$core$procedures.rename),xn.setSpellcheck(!1),this.appendDummyInput().appendField(zn.PROCEDURES_DEFNORETURN_TITLE).appendField(xn,"NAME").appendField("","PARAMS"),this.setMutator(new vt.Mutator$$module$build$src$core$mutator(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&zn.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(zn.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(zn.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(zn.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},callType_:"procedures_callnoreturn"}),Kn.blocks.procedures_defreturn=Object.assign({},Ln,{init:function(){var xn=vt.module$build$src$core$procedures.findLegalName("",this);xn=new vt.FieldTextInput$$module$build$src$core$field_textinput(xn,vt.module$build$src$core$procedures.rename),xn.setSpellcheck(!1),this.appendDummyInput().appendField(zn.PROCEDURES_DEFRETURN_TITLE).appendField(xn,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(vt.Align$$module$build$src$core$input.RIGHT).appendField(zn.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new vt.Mutator$$module$build$src$core$mutator(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&zn.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(zn.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(zn.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(zn.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},callType_:"procedures_callreturn"}),Kn.blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(zn.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(zn.PROCEDURES_ALLOW_STATEMENTS).appendField(new vt.FieldCheckbox$$module$build$src$core$field_checkbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(zn.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},Kn.blocks.procedures_mutatorarg={init:function(){const xn=new vt.FieldTextInput$$module$build$src$core$field_textinput(vt.module$build$src$core$procedures.DEFAULT_ARG,this.validator_);xn.oldShowEditorFn_=xn.showEditor_,xn.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(zn.PROCEDURES_MUTATORARG_TITLE).appendField(xn,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(zn.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,xn.onFinishEditing_=this.deleteIntermediateVars_,xn.createdVariables_=[],xn.onFinishEditing_("x")},validator_:function(xn){var Nn=this.getSourceBlock();const Zn=vt.Mutator$$module$build$src$core$mutator.findParentWs(Nn.workspace);if(xn=xn.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""),!xn)return null;const hr=(Nn.workspace.targetWorkspace||Nn.workspace).getAllBlocks(!1),Gn=xn.toLowerCase();for(let dr=0;dr<hr.length;dr++){if(hr[dr].id===this.getSourceBlock().id)continue;const Br=hr[dr].getFieldValue("NAME");if(Br&&Br.toLowerCase()===Gn)return null}return Nn.isInFlyout||((Nn=Zn.getVariable(xn,""))&&Nn.name!==xn&&Zn.renameVariableById(Nn.getId(),xn),Nn||(Nn=Zn.createVariable(xn,""))&&this.createdVariables_&&this.createdVariables_.push(Nn)),xn},deleteIntermediateVars_:function(xn){const Nn=vt.Mutator$$module$build$src$core$mutator.findParentWs(this.getSourceBlock().workspace);if(Nn)for(let Zn=0;Zn<this.createdVariables_.length;Zn++){const hr=this.createdVariables_[Zn];hr.name!==xn&&Nn.deleteVariableById(hr.getId())}}};var Vn={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(xn,Nn){vt.module$build$src$core$names.Names.equals(xn,this.getProcedureCall())&&(this.setFieldValue(Nn,"NAME"),this.setTooltip((this.outputConnection?zn.PROCEDURES_CALLRETURN_TOOLTIP:zn.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",Nn)))},setProcedureParameters_:function(xn,Nn){var Zn=vt.module$build$src$core$procedures.getDefinition(this.getProcedureCall(),this.workspace),hr=Zn&&Zn.mutator&&Zn.mutator.isVisible();if(hr?this.setCollapsed(!1):(this.quarkConnections_={},this.quarkIds_=null),xn.join(`
`)===this.arguments_.join(`
`))this.quarkIds_=Nn;else{if(Nn.length!==xn.length)throw RangeError("paramNames and paramIds must be the same length.");this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),Zn=this.rendered,this.rendered=!1;for(let dr=0;dr<this.arguments_.length;dr++){var Gn=this.getInput("ARG"+dr);Gn&&(Gn=Gn.connection.targetConnection,this.quarkConnections_[this.quarkIds_[dr]]=Gn,hr&&Gn&&Nn.indexOf(this.quarkIds_[dr])===-1&&(Gn.disconnect(),Gn.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(xn),this.argumentVarModels_=[],xn=0;xn<this.arguments_.length;xn++)hr=vt.module$build$src$core$variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[xn],""),this.argumentVarModels_.push(hr);if(this.updateShape_(),this.quarkIds_=Nn)for(Nn=0;Nn<this.arguments_.length;Nn++)xn=this.quarkIds_[Nn],xn in this.quarkConnections_&&(vt.Mutator$$module$build$src$core$mutator.reconnect(this.quarkConnections_[xn],this,"ARG"+Nn)||delete this.quarkConnections_[xn]);(this.rendered=Zn)&&this.render()}},updateShape_:function(){for(var xn=0;xn<this.arguments_.length;xn++){var Nn=this.getField("ARGNAME"+xn);if(Nn){vt.module$build$src$core$events$events.disable();try{Nn.setValue(this.arguments_[xn])}finally{vt.module$build$src$core$events$events.enable()}}else Nn=new vt.FieldLabel$$module$build$src$core$field_label(this.arguments_[xn]),this.appendValueInput("ARG"+xn).setAlign(vt.Align$$module$build$src$core$input.RIGHT).appendField(Nn,"ARGNAME"+xn).init()}for(xn=this.arguments_.length;this.getInput("ARG"+xn);xn++)this.removeInput("ARG"+xn);(xn=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(xn.appendField(zn.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),xn.init()):this.getField("WITH")&&xn.removeField("WITH"))},mutationToDom:function(){const xn=vt.module$build$src$core$utils$xml.createElement("mutation");xn.setAttribute("name",this.getProcedureCall());for(let Nn=0;Nn<this.arguments_.length;Nn++){const Zn=vt.module$build$src$core$utils$xml.createElement("arg");Zn.setAttribute("name",this.arguments_[Nn]),xn.appendChild(Zn)}return xn},domToMutation:function(xn){var Nn=xn.getAttribute("name");this.renameProcedure(this.getProcedureCall(),Nn),Nn=[];const Zn=[];for(let hr=0,Gn;Gn=xn.childNodes[hr];hr++)Gn.nodeName.toLowerCase()==="arg"&&(Nn.push(Gn.getAttribute("name")),Zn.push(Gn.getAttribute("paramId")));this.setProcedureParameters_(Nn,Zn)},saveExtraState:function(){const xn=Object.create(null);return xn.name=this.getProcedureCall(),this.arguments_.length&&(xn.params=this.arguments_),xn},loadExtraState:function(xn){if(this.renameProcedure(this.getProcedureCall(),xn.name),xn=xn.params){const Nn=[];Nn.length=xn.length,Nn.fill(null),this.setProcedureParameters_(xn,Nn)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(xn){if(this.workspace&&!this.workspace.isFlyout&&xn.recordUndo)if(xn.type===vt.module$build$src$core$events$events.BLOCK_CREATE&&xn.ids.indexOf(this.id)!==-1){var Nn=this.getProcedureCall();if(Nn=vt.module$build$src$core$procedures.getDefinition(Nn,this.workspace),!Nn||Nn.type===this.defType_&&JSON.stringify(Nn.getVars())===JSON.stringify(this.arguments_)||(Nn=null),!Nn){vt.module$build$src$core$events$events.setGroup(xn.group),xn=vt.module$build$src$core$utils$xml.createElement("xml"),Nn=vt.module$build$src$core$utils$xml.createElement("block"),Nn.setAttribute("type",this.defType_);var Zn=this.getRelativeToSurfaceXY(),hr=Zn.y+2*vt.config$$module$build$src$core$config.snapRadius;Nn.setAttribute("x",Zn.x+vt.config$$module$build$src$core$config.snapRadius*(this.RTL?-1:1)),Nn.setAttribute("y",hr),Zn=this.mutationToDom(),Nn.appendChild(Zn),Zn=vt.module$build$src$core$utils$xml.createElement("field"),Zn.setAttribute("name","NAME"),hr=this.getProcedureCall();const Gn=vt.module$build$src$core$procedures.findLegalName(hr,this);hr!==Gn&&this.renameProcedure(hr,Gn),Zn.appendChild(vt.module$build$src$core$utils$xml.createTextNode(hr)),Nn.appendChild(Zn),xn.appendChild(Nn),vt.module$build$src$core$xml.domToWorkspace(xn,this.workspace),vt.module$build$src$core$events$events.setGroup(!1)}}else xn.type===vt.module$build$src$core$events$events.BLOCK_DELETE?(Nn=this.getProcedureCall(),vt.module$build$src$core$procedures.getDefinition(Nn,this.workspace)||(vt.module$build$src$core$events$events.setGroup(xn.group),this.dispose(!0),vt.module$build$src$core$events$events.setGroup(!1))):xn.type===vt.module$build$src$core$events$events.CHANGE&&xn.element==="disabled"&&(Nn=this.getProcedureCall(),(Nn=vt.module$build$src$core$procedures.getDefinition(Nn,this.workspace))&&Nn.id===xn.blockId&&((Nn=vt.module$build$src$core$events$events.getGroup())&&console.log("Saw an existing group while responding to a definition change"),vt.module$build$src$core$events$events.setGroup(xn.group),xn.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),vt.module$build$src$core$events$events.setGroup(Nn)))},customContextMenu:function(xn){if(this.workspace.isMovable()){var Nn={enabled:!0};Nn.text=zn.PROCEDURES_HIGHLIGHT_DEF;var Zn=this.getProcedureCall(),hr=this.workspace;Nn.callback=function(){const Gn=vt.module$build$src$core$procedures.getDefinition(Zn,hr);Gn&&(hr.centerOnBlock(Gn.id),Gn.select())},xn.push(Nn)}}};Kn.blocks.procedures_callnoreturn=Object.assign({},Vn,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(zn.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defnoreturn"}),Kn.blocks.procedures_callreturn=Object.assign({},Vn,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(zn.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defreturn"}),Kn.blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(zn.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(zn.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(zn.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(zn.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){const xn=vt.module$build$src$core$utils$xml.createElement("mutation");return xn.setAttribute("value",Number(this.hasReturnValue_)),xn},domToMutation:function(xn){this.hasReturnValue_=xn.getAttribute("value")==="1",this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(zn.PROCEDURES_DEFRETURN_RETURN))},onchange:function(xn){if(!(this.workspace.isDragging&&this.workspace.isDragging()||xn.type!==vt.module$build$src$core$events$events.BLOCK_MOVE)){var Nn=!1,Zn=this;do{if(this.FUNCTION_TYPES.indexOf(Zn.type)!==-1){Nn=!0;break}Zn=Zn.getSurroundParent()}while(Zn);Nn?(Zn.type==="procedures_defnoreturn"&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(zn.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):Zn.type!=="procedures_defreturn"||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(zn.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null)):this.setWarningText(zn.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||(Zn=vt.module$build$src$core$events$events.getGroup(),vt.module$build$src$core$events$events.setGroup(xn.group),this.setEnabled(Nn),vt.module$build$src$core$events$events.setGroup(Zn))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},lr(Kn.blocks);var Wn={};vt.module$build$src$core$extensions,vt.module$build$src$core$field_dropdown,vt.module$build$src$core$utils$xml;var sr=vt.module$build$src$core$common.createBlockDefinitionsFromJsonArray,Mn=vt.module$build$src$core$common.defineBlocks;Wn.blocks=sr([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["π","PI"],["e","E"],["φ","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(½)","SQRT1_2"],["∞","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]);var ir={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"};vt.module$build$src$core$extensions.register("math_op_tooltip",vt.module$build$src$core$extensions.buildTooltipForDropdown("OP",ir));var mr={mutationToDom:function(){const xn=vt.module$build$src$core$utils$xml.createElement("mutation"),Nn=this.getFieldValue("PROPERTY")==="DIVISIBLE_BY";return xn.setAttribute("divisor_input",Nn),xn},domToMutation:function(xn){xn=xn.getAttribute("divisor_input")==="true",this.updateShape_(xn)},updateShape_:function(xn){const Nn=this.getInput("DIVISOR");xn?Nn||this.appendValueInput("DIVISOR").setCheck("Number"):Nn&&this.removeInput("DIVISOR")}},tr=function(){this.getField("PROPERTY").setValidator(function(xn){xn=xn==="DIVISIBLE_BY",this.getSourceBlock().updateShape_(xn)})};vt.module$build$src$core$extensions.registerMutator("math_is_divisibleby_mutator",mr,tr),vt.module$build$src$core$extensions.register("math_change_tooltip",vt.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_MATH_CHANGE_TOOLTIP}","VAR"));var Dr={updateType_:function(xn){xn==="MODE"?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){const xn=vt.module$build$src$core$utils$xml.createElement("mutation");return xn.setAttribute("op",this.getFieldValue("OP")),xn},domToMutation:function(xn){this.updateType_(xn.getAttribute("op"))}},Sr=function(){this.getField("OP").setValidator(function(xn){this.updateType_(xn)}.bind(this))};vt.module$build$src$core$extensions.registerMutator("math_modes_of_list_mutator",Dr,Sr),Mn(Wn.blocks);var Vr={};vt.module$build$src$core$contextmenu,vt.module$build$src$core$events$events,vt.module$build$src$core$extensions,vt.module$build$src$core$variables,vt.module$build$src$core$utils$xml;var Jr=vt.module$build$src$core$msg.Msg,Yr=vt.module$build$src$core$common.createBlockDefinitionsFromJsonArray,_i=vt.module$build$src$core$common.defineBlocks;Vr.blocks=Yr([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]);var Er={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"};vt.module$build$src$core$extensions.register("controls_whileUntil_tooltip",vt.module$build$src$core$extensions.buildTooltipForDropdown("MODE",Er));var kr={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"};vt.module$build$src$core$extensions.register("controls_flow_tooltip",vt.module$build$src$core$extensions.buildTooltipForDropdown("FLOW",kr));var Qr={customContextMenu:function(xn){if(!this.isInFlyout){var Nn=this.getField("VAR").getVariable(),Zn=Nn.name;if(!this.isCollapsed()&&Zn!==null){const hr={enabled:!0};hr.text=Jr.VARIABLES_SET_CREATE_GET.replace("%1",Zn),Nn=vt.module$build$src$core$variables.generateVariableFieldDom(Nn),Zn=vt.module$build$src$core$utils$xml.createElement("block"),Zn.setAttribute("type","variables_get"),Zn.appendChild(Nn),hr.callback=vt.module$build$src$core$contextmenu.callbackFactory(this,Zn),xn.push(hr)}}}};vt.module$build$src$core$extensions.registerMixin("contextMenu_newGetVariableBlock",Qr),vt.module$build$src$core$extensions.register("controls_for_tooltip",vt.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),vt.module$build$src$core$extensions.register("controls_forEach_tooltip",vt.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),Vr.loopTypes=new Set(["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"]);var so={getSurroundLoop:function(){let xn=this;do{if(Vr.loopTypes.has(xn.type))return xn;xn=xn.getSurroundParent()}while(xn);return null},onchange:function(xn){if(this.workspace.isDragging&&!this.workspace.isDragging()&&xn.type===vt.module$build$src$core$events$events.BLOCK_MOVE){var Nn=this.getSurroundLoop(this);if(this.setWarningText(Nn?null:Jr.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout){const Zn=vt.module$build$src$core$events$events.getGroup();vt.module$build$src$core$events$events.setGroup(xn.group),this.setEnabled(Nn),vt.module$build$src$core$events$events.setGroup(Zn)}}}};vt.module$build$src$core$extensions.registerMixin("controls_flow_in_loop_check",so),_i(Vr.blocks);var jr={};vt.module$build$src$core$events$events,vt.module$build$src$core$extensions,vt.module$build$src$core$utils$xml;var no=vt.module$build$src$core$msg.Msg;vt.Mutator$$module$build$src$core$mutator;var uo=vt.module$build$src$core$common.createBlockDefinitionsFromJsonArray,ho=vt.module$build$src$core$common.defineBlocks;jr.blocks=uo([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["≠","NEQ"],["‏<","LT"],["‏≤","LTE"],["‏>","GT"],["‏≥","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]);var Po={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"};vt.module$build$src$core$extensions.register("logic_op_tooltip",vt.module$build$src$core$extensions.buildTooltipForDropdown("OP",Po));var Wo={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const xn=vt.module$build$src$core$utils$xml.createElement("mutation");return this.elseifCount_&&xn.setAttribute("elseif",this.elseifCount_),this.elseCount_&&xn.setAttribute("else",1),xn},domToMutation:function(xn){this.elseifCount_=parseInt(xn.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(xn.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const xn=Object.create(null);return this.elseifCount_&&(xn.elseIfCount=this.elseifCount_),this.elseCount_&&(xn.hasElse=!0),xn},loadExtraState:function(xn){this.elseifCount_=xn.elseIfCount||0,this.elseCount_=xn.hasElse?1:0,this.updateShape_()},decompose:function(xn){const Nn=xn.newBlock("controls_if_if");Nn.initSvg();let Zn=Nn.nextConnection;for(let hr=1;hr<=this.elseifCount_;hr++){const Gn=xn.newBlock("controls_if_elseif");Gn.initSvg(),Zn.connect(Gn.previousConnection),Zn=Gn.nextConnection}return this.elseCount_&&(xn=xn.newBlock("controls_if_else"),xn.initSvg(),Zn.connect(xn.previousConnection)),Nn},compose:function(xn){xn=xn.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;const Nn=[null],Zn=[null];let hr=null;for(;xn;){if(!xn.isInsertionMarker())switch(xn.type){case"controls_if_elseif":this.elseifCount_++,Nn.push(xn.valueConnection_),Zn.push(xn.statementConnection_);break;case"controls_if_else":this.elseCount_++,hr=xn.statementConnection_;break;default:throw TypeError("Unknown block type: "+xn.type)}xn=xn.getNextBlock()}this.updateShape_(),this.reconnectChildBlocks_(Nn,Zn,hr)},saveConnections:function(xn){xn=xn.nextConnection.targetBlock();let Nn=1;for(;xn;){if(!xn.isInsertionMarker())switch(xn.type){case"controls_if_elseif":var Zn=this.getInput("IF"+Nn);const hr=this.getInput("DO"+Nn);xn.valueConnection_=Zn&&Zn.connection.targetConnection,xn.statementConnection_=hr&&hr.connection.targetConnection,Nn++;break;case"controls_if_else":Zn=this.getInput("ELSE"),xn.statementConnection_=Zn&&Zn.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+xn.type)}xn=xn.getNextBlock()}},rebuildShape_:function(){const xn=[null],Nn=[null];let Zn=null;this.getInput("ELSE")&&(Zn=this.getInput("ELSE").connection.targetConnection);for(let hr=1;this.getInput("IF"+hr);hr++){const Gn=this.getInput("IF"+hr),dr=this.getInput("DO"+hr);xn.push(Gn.connection.targetConnection),Nn.push(dr.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(xn,Nn,Zn)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var xn=1;this.getInput("IF"+xn);xn++)this.removeInput("IF"+xn),this.removeInput("DO"+xn);for(xn=1;xn<=this.elseifCount_;xn++)this.appendValueInput("IF"+xn).setCheck("Boolean").appendField(no.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+xn).appendField(no.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(no.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(xn,Nn,Zn){for(let hr=1;hr<=this.elseifCount_;hr++)vt.Mutator$$module$build$src$core$mutator.reconnect(xn[hr],this,"IF"+hr),vt.Mutator$$module$build$src$core$mutator.reconnect(Nn[hr],this,"DO"+hr);vt.Mutator$$module$build$src$core$mutator.reconnect(Zn,this,"ELSE")}};vt.module$build$src$core$extensions.registerMutator("controls_if_mutator",Wo,null,["controls_if_elseif","controls_if_else"]);var Xn=function(){this.setTooltip(function(){if(this.elseifCount_||this.elseCount_){if(!this.elseifCount_&&this.elseCount_)return no.CONTROLS_IF_TOOLTIP_2;if(this.elseifCount_&&!this.elseCount_)return no.CONTROLS_IF_TOOLTIP_3;if(this.elseifCount_&&this.elseCount_)return no.CONTROLS_IF_TOOLTIP_4}else return no.CONTROLS_IF_TOOLTIP_1;return""}.bind(this))};vt.module$build$src$core$extensions.register("controls_if_tooltip",Xn);var Un={onchange:function(xn){this.prevBlocks_||(this.prevBlocks_=[null,null]);var Nn=this.getInputTargetBlock("A");const Zn=this.getInputTargetBlock("B");Nn&&Zn&&!this.workspace.connectionChecker.doTypeChecks(Nn.outputConnection,Zn.outputConnection)&&(vt.module$build$src$core$events$events.setGroup(xn.group),xn=this.prevBlocks_[0],xn!==Nn&&(Nn.unplug(),!xn||xn.isDisposed()||xn.isShadow()||this.getInput("A").connection.connect(xn.outputConnection)),Nn=this.prevBlocks_[1],Nn!==Zn&&(Zn.unplug(),!Nn||Nn.isDisposed()||Nn.isShadow()||this.getInput("B").connection.connect(Nn.outputConnection)),this.bumpNeighbours(),vt.module$build$src$core$events$events.setGroup(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},rr=function(){this.mixin(Un)};vt.module$build$src$core$extensions.register("logic_compare",rr);var yr={prevParentConnection_:null,onchange:function(xn){const Nn=this.getInputTargetBlock("THEN"),Zn=this.getInputTargetBlock("ELSE"),hr=this.outputConnection.targetConnection;if((Nn||Zn)&&hr)for(let Gn=0;2>Gn;Gn++){const dr=Gn===1?Nn:Zn;dr&&!dr.workspace.connectionChecker.doTypeChecks(dr.outputConnection,hr)&&(vt.module$build$src$core$events$events.setGroup(xn.group),hr===this.prevParentConnection_?(this.unplug(),hr.getSourceBlock().bumpNeighbours()):(dr.unplug(),dr.bumpNeighbours()),vt.module$build$src$core$events$events.setGroup(!1))}this.prevParentConnection_=hr}};vt.module$build$src$core$extensions.registerMixin("logic_ternary",yr),ho(jr.blocks);var Ir={};vt.module$build$src$core$utils$xml,vt.module$build$src$core$xml,vt.Align$$module$build$src$core$input,vt.module$build$src$core$connection_type.ConnectionType;var Fr=vt.module$build$src$core$field_dropdown.FieldDropdown,pr=vt.module$build$src$core$msg.Msg;vt.Mutator$$module$build$src$core$mutator;var Zr=vt.module$build$src$core$common.createBlockDefinitionsFromJsonArray,Cr=vt.module$build$src$core$common.defineBlocks;Ir.blocks=Zr([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),Ir.blocks.lists_create_with={init:function(){this.setHelpUrl(pr.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new vt.Mutator$$module$build$src$core$mutator(["lists_create_with_item"],this)),this.setTooltip(pr.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){const xn=vt.module$build$src$core$utils$xml.createElement("mutation");return xn.setAttribute("items",this.itemCount_),xn},domToMutation:function(xn){this.itemCount_=parseInt(xn.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(xn){this.itemCount_=xn.itemCount,this.updateShape_()},decompose:function(xn){const Nn=xn.newBlock("lists_create_with_container");Nn.initSvg();let Zn=Nn.getInput("STACK").connection;for(let hr=0;hr<this.itemCount_;hr++){const Gn=xn.newBlock("lists_create_with_item");Gn.initSvg(),Zn.connect(Gn.previousConnection),Zn=Gn.nextConnection}return Nn},compose:function(xn){var Nn=xn.getInputTargetBlock("STACK");for(xn=[];Nn;)Nn.isInsertionMarker()||xn.push(Nn.valueConnection_),Nn=Nn.getNextBlock();for(Nn=0;Nn<this.itemCount_;Nn++){const Zn=this.getInput("ADD"+Nn).connection.targetConnection;Zn&&xn.indexOf(Zn)===-1&&Zn.disconnect()}for(this.itemCount_=xn.length,this.updateShape_(),Nn=0;Nn<this.itemCount_;Nn++)vt.Mutator$$module$build$src$core$mutator.reconnect(xn[Nn],this,"ADD"+Nn)},saveConnections:function(xn){xn=xn.getInputTargetBlock("STACK");let Nn=0;for(;xn;){if(xn.isInsertionMarker()){xn=xn.getNextBlock();continue}const Zn=this.getInput("ADD"+Nn);xn.valueConnection_=Zn&&Zn.connection.targetConnection,xn=xn.getNextBlock(),Nn++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(pr.LISTS_CREATE_EMPTY_TITLE);for(var xn=0;xn<this.itemCount_;xn++)if(!this.getInput("ADD"+xn)){const Nn=this.appendValueInput("ADD"+xn).setAlign(vt.Align$$module$build$src$core$input.RIGHT);xn===0&&Nn.appendField(pr.LISTS_CREATE_WITH_INPUT_WITH)}for(xn=this.itemCount_;this.getInput("ADD"+xn);xn++)this.removeInput("ADD"+xn)}},Ir.blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(pr.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(pr.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},Ir.blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(pr.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(pr.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},Ir.blocks.lists_indexOf={init:function(){const xn=[[pr.LISTS_INDEX_OF_FIRST,"FIRST"],[pr.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(pr.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(pr.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new Fr(xn),"END"),this.setInputsInline(!0);const Nn=this;this.setTooltip(function(){return pr.LISTS_INDEX_OF_TOOLTIP.replace("%1",Nn.workspace.options.oneBasedIndex?"0":"-1")})}},Ir.blocks.lists_getIndex={init:function(){var xn=[[pr.LISTS_GET_INDEX_GET,"GET"],[pr.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[pr.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[pr.LISTS_GET_INDEX_FROM_START,"FROM_START"],[pr.LISTS_GET_INDEX_FROM_END,"FROM_END"],[pr.LISTS_GET_INDEX_FIRST,"FIRST"],[pr.LISTS_GET_INDEX_LAST,"LAST"],[pr.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(pr.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),xn=new Fr(xn,function(Zn){Zn=Zn==="REMOVE",this.getSourceBlock().updateStatement_(Zn)}),this.appendValueInput("VALUE").setCheck("Array").appendField(pr.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(xn,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),pr.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(pr.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);const Nn=this;this.setTooltip(function(){const Zn=Nn.getFieldValue("MODE"),hr=Nn.getFieldValue("WHERE");let Gn="";switch(Zn+" "+hr){case"GET FROM_START":case"GET FROM_END":Gn=pr.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":Gn=pr.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":Gn=pr.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":Gn=pr.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":Gn=pr.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":Gn=pr.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":Gn=pr.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":Gn=pr.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":Gn=pr.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":Gn=pr.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":Gn=pr.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":Gn=pr.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return(hr==="FROM_START"||hr==="FROM_END")&&(Gn+="  "+(hr==="FROM_START"?pr.LISTS_INDEX_FROM_START_TOOLTIP:pr.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",Nn.workspace.options.oneBasedIndex?"#1":"#0")),Gn})},mutationToDom:function(){const xn=vt.module$build$src$core$utils$xml.createElement("mutation");xn.setAttribute("statement",!this.outputConnection);const Nn=this.getInput("AT").type===vt.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return xn.setAttribute("at",Nn),xn},domToMutation:function(xn){const Nn=xn.getAttribute("statement")==="true";this.updateStatement_(Nn),xn=xn.getAttribute("at")!=="false",this.updateAt_(xn)},saveExtraState:function(){return this.outputConnection?null:{isStatement:!0}},loadExtraState:function(xn){xn.isStatement?this.updateStatement_(!0):typeof xn=="string"&&this.domToMutation(vt.module$build$src$core$xml.textToDom(xn))},updateStatement_:function(xn){xn!==!this.outputConnection&&(this.unplug(!0,!0),xn?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(xn){this.removeInput("AT"),this.removeInput("ORDINAL",!0),xn?(this.appendValueInput("AT").setCheck("Number"),pr.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(pr.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const Nn=new Fr(this.WHERE_OPTIONS,function(Zn){const hr=Zn==="FROM_START"||Zn==="FROM_END";if(hr!==xn){const Gn=this.getSourceBlock();return Gn.updateAt_(hr),Gn.setFieldValue(Zn,"WHERE"),null}});this.getInput("AT").appendField(Nn,"WHERE"),pr.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},Ir.blocks.lists_setIndex={init:function(){const xn=[[pr.LISTS_SET_INDEX_SET,"SET"],[pr.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[pr.LISTS_GET_INDEX_FROM_START,"FROM_START"],[pr.LISTS_GET_INDEX_FROM_END,"FROM_END"],[pr.LISTS_GET_INDEX_FIRST,"FIRST"],[pr.LISTS_GET_INDEX_LAST,"LAST"],[pr.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(pr.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(pr.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new Fr(xn),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(pr.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(pr.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);const Nn=this;this.setTooltip(function(){const Zn=Nn.getFieldValue("MODE"),hr=Nn.getFieldValue("WHERE");let Gn="";switch(Zn+" "+hr){case"SET FROM_START":case"SET FROM_END":Gn=pr.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":Gn=pr.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":Gn=pr.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":Gn=pr.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":Gn=pr.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":Gn=pr.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":Gn=pr.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":Gn=pr.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return(hr==="FROM_START"||hr==="FROM_END")&&(Gn+="  "+pr.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",Nn.workspace.options.oneBasedIndex?"#1":"#0")),Gn})},mutationToDom:function(){const xn=vt.module$build$src$core$utils$xml.createElement("mutation"),Nn=this.getInput("AT").type===vt.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return xn.setAttribute("at",Nn),xn},domToMutation:function(xn){xn=xn.getAttribute("at")!=="false",this.updateAt_(xn)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(xn){this.removeInput("AT"),this.removeInput("ORDINAL",!0),xn?(this.appendValueInput("AT").setCheck("Number"),pr.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(pr.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const Nn=new Fr(this.WHERE_OPTIONS,function(Zn){const hr=Zn==="FROM_START"||Zn==="FROM_END";if(hr!==xn){const Gn=this.getSourceBlock();return Gn.updateAt_(hr),Gn.setFieldValue(Zn,"WHERE"),null}});this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(Nn,"WHERE")}},Ir.blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[pr.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[pr.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[pr.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[pr.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[pr.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[pr.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(pr.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(pr.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),pr.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(pr.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(pr.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){const xn=vt.module$build$src$core$utils$xml.createElement("mutation");var Nn=this.getInput("AT1").type===vt.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return xn.setAttribute("at1",Nn),Nn=this.getInput("AT2").type===vt.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE,xn.setAttribute("at2",Nn),xn},domToMutation:function(xn){const Nn=xn.getAttribute("at1")==="true";xn=xn.getAttribute("at2")==="true",this.updateAt_(1,Nn),this.updateAt_(2,xn)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(xn,Nn){this.removeInput("AT"+xn),this.removeInput("ORDINAL"+xn,!0),Nn?(this.appendValueInput("AT"+xn).setCheck("Number"),pr.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+xn).appendField(pr.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+xn);const Zn=new Fr(this["WHERE_OPTIONS_"+xn],function(hr){const Gn=hr==="FROM_START"||hr==="FROM_END";if(Gn!==Nn){const dr=this.getSourceBlock();return dr.updateAt_(xn,Gn),dr.setFieldValue(hr,"WHERE"+xn),null}});this.getInput("AT"+xn).appendField(Zn,"WHERE"+xn),xn===1&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),pr.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},Ir.blocks.lists_sort={init:function(){this.jsonInit({message0:"%{BKY_LISTS_SORT_TITLE}",args0:[{type:"field_dropdown",name:"TYPE",options:[["%{BKY_LISTS_SORT_TYPE_NUMERIC}","NUMERIC"],["%{BKY_LISTS_SORT_TYPE_TEXT}","TEXT"],["%{BKY_LISTS_SORT_TYPE_IGNORECASE}","IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[["%{BKY_LISTS_SORT_ORDER_ASCENDING}","1"],["%{BKY_LISTS_SORT_ORDER_DESCENDING}","-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_SORT_TOOLTIP}",helpUrl:"%{BKY_LISTS_SORT_HELPURL}"})}},Ir.blocks.lists_split={init:function(){const xn=this,Nn=new Fr([[pr.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[pr.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],function(Zn){xn.updateType_(Zn)});this.setHelpUrl(pr.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(Nn,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(pr.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(function(){const Zn=xn.getFieldValue("MODE");if(Zn==="SPLIT")return pr.LISTS_SPLIT_TOOLTIP_SPLIT;if(Zn==="JOIN")return pr.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+Zn)})},updateType_:function(xn){if(this.getFieldValue("MODE")!==xn){const Nn=this.getInput("INPUT").connection;Nn.setShadowDom(null);const Zn=Nn.targetBlock();Zn&&(Nn.disconnect(),Zn.isShadow()?Zn.dispose():this.bumpNeighbours())}xn==="SPLIT"?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){const xn=vt.module$build$src$core$utils$xml.createElement("mutation");return xn.setAttribute("mode",this.getFieldValue("MODE")),xn},domToMutation:function(xn){this.updateType_(xn.getAttribute("mode"))},saveExtraState:function(){return null},loadExtraState:function(){}},Cr(Ir.blocks);var lo={},Jn=vt.module$build$src$core$common.createBlockDefinitionsFromJsonArray,Tr=vt.module$build$src$core$common.defineBlocks;lo.blocks=Jn([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),Tr(lo.blocks);var Nr={};return Nr.colour=lo,Nr.lists=Ir,Nr.logic=jr,Nr.loops=Vr,Nr.math=Wn,Nr.procedures=Kn,Nr.texts=pn,Nr.variables=Ft,Nr.variablesDynamic=Tt,Nr.blocks=Object.assign({},lo.blocks,Ir.blocks,jr.blocks,Vr.blocks,Wn.blocks,Kn.blocks,Ft.blocks,Tt.blocks),Nr.__namespace__=vt,Nr})}(blocks_compressed)),blocks_compressed.exports}var hasRequiredBlocks;function requireBlocks(){return hasRequiredBlocks||(hasRequiredBlocks=1,function(ft,lt){(function(dt,vt){ft.exports=vt(requireBlocks_compressed())})(commonjsGlobal,function(dt){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return dt})}(blocks)),blocks.exports}var javascript$1={exports:{}},javascript_compressed={exports:{}},hasRequiredJavascript_compressed;function requireJavascript_compressed(){return hasRequiredJavascript_compressed||(hasRequiredJavascript_compressed=1,function(ft,lt){(function(dt,vt){ft.exports=vt(requireBlockly_compressed())})(commonjsGlobal,function(dt){var vt=dt.__namespace__,Tt={};vt.module$build$src$core$variables,vt.module$build$src$core$utils$string,vt.CodeGenerator$$module$build$src$core$generator,vt.module$build$src$core$input_types.inputTypes,vt.module$build$src$core$names.Names,vt.NameType$$module$build$src$core$names,Tt.javascriptGenerator=new vt.CodeGenerator$$module$build$src$core$generator("JavaScript"),Tt.javascriptGenerator.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(globalThis).join(",")),Tt.javascriptGenerator.ORDER_ATOMIC=0,Tt.javascriptGenerator.ORDER_NEW=1.1,Tt.javascriptGenerator.ORDER_MEMBER=1.2,Tt.javascriptGenerator.ORDER_FUNCTION_CALL=2,Tt.javascriptGenerator.ORDER_INCREMENT=3,Tt.javascriptGenerator.ORDER_DECREMENT=3,Tt.javascriptGenerator.ORDER_BITWISE_NOT=4.1,Tt.javascriptGenerator.ORDER_UNARY_PLUS=4.2,Tt.javascriptGenerator.ORDER_UNARY_NEGATION=4.3,Tt.javascriptGenerator.ORDER_LOGICAL_NOT=4.4,Tt.javascriptGenerator.ORDER_TYPEOF=4.5,Tt.javascriptGenerator.ORDER_VOID=4.6,Tt.javascriptGenerator.ORDER_DELETE=4.7,Tt.javascriptGenerator.ORDER_AWAIT=4.8,Tt.javascriptGenerator.ORDER_EXPONENTIATION=5,Tt.javascriptGenerator.ORDER_MULTIPLICATION=5.1,Tt.javascriptGenerator.ORDER_DIVISION=5.2,Tt.javascriptGenerator.ORDER_MODULUS=5.3,Tt.javascriptGenerator.ORDER_SUBTRACTION=6.1,Tt.javascriptGenerator.ORDER_ADDITION=6.2,Tt.javascriptGenerator.ORDER_BITWISE_SHIFT=7,Tt.javascriptGenerator.ORDER_RELATIONAL=8,Tt.javascriptGenerator.ORDER_IN=8,Tt.javascriptGenerator.ORDER_INSTANCEOF=8,Tt.javascriptGenerator.ORDER_EQUALITY=9,Tt.javascriptGenerator.ORDER_BITWISE_AND=10,Tt.javascriptGenerator.ORDER_BITWISE_XOR=11,Tt.javascriptGenerator.ORDER_BITWISE_OR=12,Tt.javascriptGenerator.ORDER_LOGICAL_AND=13,Tt.javascriptGenerator.ORDER_LOGICAL_OR=14,Tt.javascriptGenerator.ORDER_CONDITIONAL=15,Tt.javascriptGenerator.ORDER_ASSIGNMENT=16,Tt.javascriptGenerator.ORDER_YIELD=17,Tt.javascriptGenerator.ORDER_COMMA=18,Tt.javascriptGenerator.ORDER_NONE=99,Tt.javascriptGenerator.ORDER_OVERRIDES=[[Tt.javascriptGenerator.ORDER_FUNCTION_CALL,Tt.javascriptGenerator.ORDER_MEMBER],[Tt.javascriptGenerator.ORDER_FUNCTION_CALL,Tt.javascriptGenerator.ORDER_FUNCTION_CALL],[Tt.javascriptGenerator.ORDER_MEMBER,Tt.javascriptGenerator.ORDER_MEMBER],[Tt.javascriptGenerator.ORDER_MEMBER,Tt.javascriptGenerator.ORDER_FUNCTION_CALL],[Tt.javascriptGenerator.ORDER_LOGICAL_NOT,Tt.javascriptGenerator.ORDER_LOGICAL_NOT],[Tt.javascriptGenerator.ORDER_MULTIPLICATION,Tt.javascriptGenerator.ORDER_MULTIPLICATION],[Tt.javascriptGenerator.ORDER_ADDITION,Tt.javascriptGenerator.ORDER_ADDITION],[Tt.javascriptGenerator.ORDER_LOGICAL_AND,Tt.javascriptGenerator.ORDER_LOGICAL_AND],[Tt.javascriptGenerator.ORDER_LOGICAL_OR,Tt.javascriptGenerator.ORDER_LOGICAL_OR]],Tt.javascriptGenerator.isInitialized=!1,Tt.javascriptGenerator.init=function(Dt){Object.getPrototypeOf(this).init.call(this),this.nameDB_?this.nameDB_.reset():this.nameDB_=new vt.module$build$src$core$names.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(Dt.getVariableMap()),this.nameDB_.populateVariables(Dt),this.nameDB_.populateProcedures(Dt);const Bt=[];var Ft=vt.module$build$src$core$variables.allDeveloperVariables(Dt);for(let Ut=0;Ut<Ft.length;Ut++)Bt.push(this.nameDB_.getName(Ft[Ut],vt.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));for(Dt=vt.module$build$src$core$variables.allUsedVarModels(Dt),Ft=0;Ft<Dt.length;Ft++)Bt.push(this.nameDB_.getName(Dt[Ft].getId(),vt.NameType$$module$build$src$core$names.VARIABLE));Bt.length&&(this.definitions_.variables="var "+Bt.join(", ")+";"),this.isInitialized=!0},Tt.javascriptGenerator.finish=function(Dt){const Bt=Object.values(this.definitions_);return Dt=Object.getPrototypeOf(this).finish.call(this,Dt),this.isInitialized=!1,this.nameDB_.reset(),Bt.join(`

`)+`


`+Dt},Tt.javascriptGenerator.scrubNakedValue=function(Dt){return Dt+`;
`},Tt.javascriptGenerator.quote_=function(Dt){return Dt=Dt.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`).replace(/'/g,"\\'"),"'"+Dt+"'"},Tt.javascriptGenerator.multiline_quote_=function(Dt){return Dt.split(/\n/g).map(this.quote_).join(` + '\\n' +
`)},Tt.javascriptGenerator.scrub_=function(Dt,Bt,Ft){let Ut="";if(!Dt.outputConnection||!Dt.outputConnection.targetConnection){var Zt=Dt.getCommentText();Zt&&(Zt=vt.module$build$src$core$utils$string.wrap(Zt,this.COMMENT_WRAP-3),Ut+=this.prefixLines(Zt+`
`,"// "));for(let Kt=0;Kt<Dt.inputList.length;Kt++)Dt.inputList[Kt].type===vt.module$build$src$core$input_types.inputTypes.VALUE&&(Zt=Dt.inputList[Kt].connection.targetBlock())&&(Zt=this.allNestedComments(Zt))&&(Ut+=this.prefixLines(Zt,"// "))}return Dt=Dt.nextConnection&&Dt.nextConnection.targetBlock(),Ft=Ft?"":this.blockToCode(Dt),Ut+Bt+Ft},Tt.javascriptGenerator.getAdjusted=function(Dt,Bt,Ft,Ut,Zt){Ft=Ft||0,Zt=Zt||this.ORDER_NONE,Dt.workspace.options.oneBasedIndex&&Ft--;const Kt=Dt.workspace.options.oneBasedIndex?"1":"0";let ln,hn=Zt;return 0<Ft?ln=hn=this.ORDER_ADDITION:0>Ft?ln=hn=this.ORDER_SUBTRACTION:Ut&&(ln=hn=this.ORDER_UNARY_NEGATION),Dt=this.valueToCode(Dt,Bt,hn)||Kt,vt.module$build$src$core$utils$string.isNumber(Dt)?(Dt=Number(Dt)+Ft,Ut&&(Dt=-Dt)):(0<Ft?Dt=Dt+" + "+Ft:0>Ft&&(Dt=Dt+" - "+-Ft),Ut&&(Dt=Ft?"-("+Dt+")":"-"+Dt),ln=Math.floor(ln),Zt=Math.floor(Zt),ln&&Zt>=ln&&(Dt="("+Dt+")")),Dt},vt.NameType$$module$build$src$core$names,Tt.javascriptGenerator.variables_get=function(Dt){return[Tt.javascriptGenerator.nameDB_.getName(Dt.getFieldValue("VAR"),vt.NameType$$module$build$src$core$names.VARIABLE),Tt.javascriptGenerator.ORDER_ATOMIC]},Tt.javascriptGenerator.variables_set=function(Dt){const Bt=Tt.javascriptGenerator.valueToCode(Dt,"VALUE",Tt.javascriptGenerator.ORDER_ASSIGNMENT)||"0";return Tt.javascriptGenerator.nameDB_.getName(Dt.getFieldValue("VAR"),vt.NameType$$module$build$src$core$names.VARIABLE)+" = "+Bt+`;
`},Tt.javascriptGenerator.variables_get_dynamic=Tt.javascriptGenerator.variables_get,Tt.javascriptGenerator.variables_set_dynamic=Tt.javascriptGenerator.variables_set,vt.NameType$$module$build$src$core$names;var Et=/^\s*'([^']|\\')*'\s*$/,Ct=function(Dt){return Et.test(Dt)?[Dt,Tt.javascriptGenerator.ORDER_ATOMIC]:["String("+Dt+")",Tt.javascriptGenerator.ORDER_FUNCTION_CALL]},Rt=function(Dt,Bt,Ft){return Bt==="FIRST"?"0":Bt==="FROM_END"?Dt+".length - 1 - "+Ft:Bt==="LAST"?Dt+".length - 1":Ft};Tt.javascriptGenerator.text=function(Dt){return[Tt.javascriptGenerator.quote_(Dt.getFieldValue("TEXT")),Tt.javascriptGenerator.ORDER_ATOMIC]},Tt.javascriptGenerator.text_multiline=function(Dt){Dt=Tt.javascriptGenerator.multiline_quote_(Dt.getFieldValue("TEXT"));const Bt=Dt.indexOf("+")!==-1?Tt.javascriptGenerator.ORDER_ADDITION:Tt.javascriptGenerator.ORDER_ATOMIC;return[Dt,Bt]},Tt.javascriptGenerator.text_join=function(Dt){switch(Dt.itemCount_){case 0:return["''",Tt.javascriptGenerator.ORDER_ATOMIC];case 1:return Dt=Tt.javascriptGenerator.valueToCode(Dt,"ADD0",Tt.javascriptGenerator.ORDER_NONE)||"''",Ct(Dt);case 2:var Bt=Tt.javascriptGenerator.valueToCode(Dt,"ADD0",Tt.javascriptGenerator.ORDER_NONE)||"''";return Dt=Tt.javascriptGenerator.valueToCode(Dt,"ADD1",Tt.javascriptGenerator.ORDER_NONE)||"''",[Ct(Bt)[0]+" + "+Ct(Dt)[0],Tt.javascriptGenerator.ORDER_ADDITION];default:Bt=Array(Dt.itemCount_);for(let Ft=0;Ft<Dt.itemCount_;Ft++)Bt[Ft]=Tt.javascriptGenerator.valueToCode(Dt,"ADD"+Ft,Tt.javascriptGenerator.ORDER_NONE)||"''";return["["+Bt.join(",")+"].join('')",Tt.javascriptGenerator.ORDER_FUNCTION_CALL]}},Tt.javascriptGenerator.text_append=function(Dt){const Bt=Tt.javascriptGenerator.nameDB_.getName(Dt.getFieldValue("VAR"),vt.NameType$$module$build$src$core$names.VARIABLE);return Dt=Tt.javascriptGenerator.valueToCode(Dt,"TEXT",Tt.javascriptGenerator.ORDER_NONE)||"''",Bt+" += "+Ct(Dt)[0]+`;
`},Tt.javascriptGenerator.text_length=function(Dt){return[(Tt.javascriptGenerator.valueToCode(Dt,"VALUE",Tt.javascriptGenerator.ORDER_MEMBER)||"''")+".length",Tt.javascriptGenerator.ORDER_MEMBER]},Tt.javascriptGenerator.text_isEmpty=function(Dt){return["!"+(Tt.javascriptGenerator.valueToCode(Dt,"VALUE",Tt.javascriptGenerator.ORDER_MEMBER)||"''")+".length",Tt.javascriptGenerator.ORDER_LOGICAL_NOT]},Tt.javascriptGenerator.text_indexOf=function(Dt){var Bt=Dt.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf";const Ft=Tt.javascriptGenerator.valueToCode(Dt,"FIND",Tt.javascriptGenerator.ORDER_NONE)||"''";return Bt=(Tt.javascriptGenerator.valueToCode(Dt,"VALUE",Tt.javascriptGenerator.ORDER_MEMBER)||"''")+"."+Bt+"("+Ft+")",Dt.workspace.options.oneBasedIndex?[Bt+" + 1",Tt.javascriptGenerator.ORDER_ADDITION]:[Bt,Tt.javascriptGenerator.ORDER_FUNCTION_CALL]},Tt.javascriptGenerator.text_charAt=function(Dt){const Bt=Dt.getFieldValue("WHERE")||"FROM_START",Ft=Tt.javascriptGenerator.valueToCode(Dt,"VALUE",Bt==="RANDOM"?Tt.javascriptGenerator.ORDER_NONE:Tt.javascriptGenerator.ORDER_MEMBER)||"''";switch(Bt){case"FIRST":return[Ft+".charAt(0)",Tt.javascriptGenerator.ORDER_FUNCTION_CALL];case"LAST":return[Ft+".slice(-1)",Tt.javascriptGenerator.ORDER_FUNCTION_CALL];case"FROM_START":return Dt=Tt.javascriptGenerator.getAdjusted(Dt,"AT"),[Ft+".charAt("+Dt+")",Tt.javascriptGenerator.ORDER_FUNCTION_CALL];case"FROM_END":return Dt=Tt.javascriptGenerator.getAdjusted(Dt,"AT",1,!0),[Ft+".slice("+Dt+").charAt(0)",Tt.javascriptGenerator.ORDER_FUNCTION_CALL];case"RANDOM":return[Tt.javascriptGenerator.provideFunction_("textRandomLetter",`
function ${Tt.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(text) {
  var x = Math.floor(Math.random() * text.length);
  return text[x];
}
`)+"("+Ft+")",Tt.javascriptGenerator.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},Tt.javascriptGenerator.text_getSubstring=function(Dt){var Bt=Dt.getFieldValue("WHERE1"),Ft=Dt.getFieldValue("WHERE2"),Ut=Bt!=="FROM_END"&&Bt!=="LAST"&&Ft!=="FROM_END"&&Ft!=="LAST",Zt=Tt.javascriptGenerator.valueToCode(Dt,"STRING",Ut?Tt.javascriptGenerator.ORDER_MEMBER:Tt.javascriptGenerator.ORDER_NONE)||"''";if(Bt==="FIRST"&&Ft==="LAST")return[Zt,Tt.javascriptGenerator.ORDER_NONE];if(Zt.match(/^'?\w+'?$/)||Ut){switch(Bt){case"FROM_START":Bt=Tt.javascriptGenerator.getAdjusted(Dt,"AT1");break;case"FROM_END":Bt=Tt.javascriptGenerator.getAdjusted(Dt,"AT1",1,!1,Tt.javascriptGenerator.ORDER_SUBTRACTION),Bt=Zt+".length - "+Bt;break;case"FIRST":Bt="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(Ft){case"FROM_START":Ft=Tt.javascriptGenerator.getAdjusted(Dt,"AT2",1);break;case"FROM_END":Ft=Tt.javascriptGenerator.getAdjusted(Dt,"AT2",0,!1,Tt.javascriptGenerator.ORDER_SUBTRACTION),Ft=Zt+".length - "+Ft;break;case"LAST":Ft=Zt+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}Zt=Zt+".slice("+Bt+", "+Ft+")"}else{Ut=Tt.javascriptGenerator.getAdjusted(Dt,"AT1"),Dt=Tt.javascriptGenerator.getAdjusted(Dt,"AT2");const Kt={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};Zt=Tt.javascriptGenerator.provideFunction_("subsequence"+Kt[Bt]+Kt[Ft],`
function ${Tt.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(sequence${Bt==="FROM_END"||Bt==="FROM_START"?", at1":""}${Ft==="FROM_END"||Ft==="FROM_START"?", at2":""}) {
  var start = ${Rt("sequence",Bt,"at1")};
  var end = ${Rt("sequence",Ft,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+Zt+(Bt==="FROM_END"||Bt==="FROM_START"?", "+Ut:"")+(Ft==="FROM_END"||Ft==="FROM_START"?", "+Dt:"")+")"}return[Zt,Tt.javascriptGenerator.ORDER_FUNCTION_CALL]},Tt.javascriptGenerator.text_changeCase=function(Dt){const Bt={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[Dt.getFieldValue("CASE")];return Dt=Tt.javascriptGenerator.valueToCode(Dt,"TEXT",Bt?Tt.javascriptGenerator.ORDER_MEMBER:Tt.javascriptGenerator.ORDER_NONE)||"''",[Bt?Dt+Bt:Tt.javascriptGenerator.provideFunction_("textToTitleCase",`
function ${Tt.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(str) {
  return str.replace(/\\S+/g,
      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});
}
`)+"("+Dt+")",Tt.javascriptGenerator.ORDER_FUNCTION_CALL]},Tt.javascriptGenerator.text_trim=function(Dt){const Bt={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[Dt.getFieldValue("MODE")];return[(Tt.javascriptGenerator.valueToCode(Dt,"TEXT",Tt.javascriptGenerator.ORDER_MEMBER)||"''")+Bt,Tt.javascriptGenerator.ORDER_FUNCTION_CALL]},Tt.javascriptGenerator.text_print=function(Dt){return"window.alert("+(Tt.javascriptGenerator.valueToCode(Dt,"TEXT",Tt.javascriptGenerator.ORDER_NONE)||"''")+`);
`},Tt.javascriptGenerator.text_prompt_ext=function(Dt){let Bt="window.prompt("+(Dt.getField("TEXT")?Tt.javascriptGenerator.quote_(Dt.getFieldValue("TEXT")):Tt.javascriptGenerator.valueToCode(Dt,"TEXT",Tt.javascriptGenerator.ORDER_NONE)||"''")+")";return Dt.getFieldValue("TYPE")==="NUMBER"&&(Bt="Number("+Bt+")"),[Bt,Tt.javascriptGenerator.ORDER_FUNCTION_CALL]},Tt.javascriptGenerator.text_prompt=Tt.javascriptGenerator.text_prompt_ext,Tt.javascriptGenerator.text_count=function(Dt){const Bt=Tt.javascriptGenerator.valueToCode(Dt,"TEXT",Tt.javascriptGenerator.ORDER_NONE)||"''";return Dt=Tt.javascriptGenerator.valueToCode(Dt,"SUB",Tt.javascriptGenerator.ORDER_NONE)||"''",[Tt.javascriptGenerator.provideFunction_("textCount",`
function ${Tt.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle) {
  if (needle.length === 0) {
    return haystack.length + 1;
  } else {
    return haystack.split(needle).length - 1;
  }
}
`)+"("+Bt+", "+Dt+")",Tt.javascriptGenerator.ORDER_FUNCTION_CALL]},Tt.javascriptGenerator.text_replace=function(Dt){const Bt=Tt.javascriptGenerator.valueToCode(Dt,"TEXT",Tt.javascriptGenerator.ORDER_NONE)||"''",Ft=Tt.javascriptGenerator.valueToCode(Dt,"FROM",Tt.javascriptGenerator.ORDER_NONE)||"''";return Dt=Tt.javascriptGenerator.valueToCode(Dt,"TO",Tt.javascriptGenerator.ORDER_NONE)||"''",[Tt.javascriptGenerator.provideFunction_("textReplace",`
function ${Tt.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle, replacement) {
  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g, '\\\\$1')
                 .replace(/\\x08/g, '\\\\x08');
  return haystack.replace(new RegExp(needle, 'g'), replacement);
}
`)+"("+Bt+", "+Ft+", "+Dt+")",Tt.javascriptGenerator.ORDER_FUNCTION_CALL]},Tt.javascriptGenerator.text_reverse=function(Dt){return[(Tt.javascriptGenerator.valueToCode(Dt,"TEXT",Tt.javascriptGenerator.ORDER_MEMBER)||"''")+".split('').reverse().join('')",Tt.javascriptGenerator.ORDER_FUNCTION_CALL]},vt.NameType$$module$build$src$core$names,Tt.javascriptGenerator.procedures_defreturn=function(Dt){const Bt=Tt.javascriptGenerator.nameDB_.getName(Dt.getFieldValue("NAME"),vt.NameType$$module$build$src$core$names.PROCEDURE);var Ft="";Tt.javascriptGenerator.STATEMENT_PREFIX&&(Ft+=Tt.javascriptGenerator.injectId(Tt.javascriptGenerator.STATEMENT_PREFIX,Dt)),Tt.javascriptGenerator.STATEMENT_SUFFIX&&(Ft+=Tt.javascriptGenerator.injectId(Tt.javascriptGenerator.STATEMENT_SUFFIX,Dt)),Ft&&(Ft=Tt.javascriptGenerator.prefixLines(Ft,Tt.javascriptGenerator.INDENT));let Ut="";Tt.javascriptGenerator.INFINITE_LOOP_TRAP&&(Ut=Tt.javascriptGenerator.prefixLines(Tt.javascriptGenerator.injectId(Tt.javascriptGenerator.INFINITE_LOOP_TRAP,Dt),Tt.javascriptGenerator.INDENT));const Zt=Tt.javascriptGenerator.statementToCode(Dt,"STACK");let Kt=Tt.javascriptGenerator.valueToCode(Dt,"RETURN",Tt.javascriptGenerator.ORDER_NONE)||"",ln="";Zt&&Kt&&(ln=Ft),Kt&&(Kt=Tt.javascriptGenerator.INDENT+"return "+Kt+`;
`);const hn=[],dn=Dt.getVars();for(let pn=0;pn<dn.length;pn++)hn[pn]=Tt.javascriptGenerator.nameDB_.getName(dn[pn],vt.NameType$$module$build$src$core$names.VARIABLE);return Ft="function "+Bt+"("+hn.join(", ")+`) {
`+Ft+Ut+Zt+ln+Kt+"}",Ft=Tt.javascriptGenerator.scrub_(Dt,Ft),Tt.javascriptGenerator.definitions_["%"+Bt]=Ft,null},Tt.javascriptGenerator.procedures_defnoreturn=Tt.javascriptGenerator.procedures_defreturn,Tt.javascriptGenerator.procedures_callreturn=function(Dt){const Bt=Tt.javascriptGenerator.nameDB_.getName(Dt.getFieldValue("NAME"),vt.NameType$$module$build$src$core$names.PROCEDURE),Ft=[],Ut=Dt.getVars();for(let Zt=0;Zt<Ut.length;Zt++)Ft[Zt]=Tt.javascriptGenerator.valueToCode(Dt,"ARG"+Zt,Tt.javascriptGenerator.ORDER_NONE)||"null";return[Bt+"("+Ft.join(", ")+")",Tt.javascriptGenerator.ORDER_FUNCTION_CALL]},Tt.javascriptGenerator.procedures_callnoreturn=function(Dt){return Tt.javascriptGenerator.procedures_callreturn(Dt)[0]+`;
`},Tt.javascriptGenerator.procedures_ifreturn=function(Dt){let Bt="if ("+(Tt.javascriptGenerator.valueToCode(Dt,"CONDITION",Tt.javascriptGenerator.ORDER_NONE)||"false")+`) {
`;return Tt.javascriptGenerator.STATEMENT_SUFFIX&&(Bt+=Tt.javascriptGenerator.prefixLines(Tt.javascriptGenerator.injectId(Tt.javascriptGenerator.STATEMENT_SUFFIX,Dt),Tt.javascriptGenerator.INDENT)),Dt.hasReturnValue_?(Dt=Tt.javascriptGenerator.valueToCode(Dt,"VALUE",Tt.javascriptGenerator.ORDER_NONE)||"null",Bt+=Tt.javascriptGenerator.INDENT+"return "+Dt+`;
`):Bt+=Tt.javascriptGenerator.INDENT+`return;
`,Bt+`}
`},vt.NameType$$module$build$src$core$names,Tt.javascriptGenerator.math_number=function(Dt){return Dt=Number(Dt.getFieldValue("NUM")),[Dt,0<=Dt?Tt.javascriptGenerator.ORDER_ATOMIC:Tt.javascriptGenerator.ORDER_UNARY_NEGATION]},Tt.javascriptGenerator.math_arithmetic=function(Dt){var Bt={ADD:[" + ",Tt.javascriptGenerator.ORDER_ADDITION],MINUS:[" - ",Tt.javascriptGenerator.ORDER_SUBTRACTION],MULTIPLY:[" * ",Tt.javascriptGenerator.ORDER_MULTIPLICATION],DIVIDE:[" / ",Tt.javascriptGenerator.ORDER_DIVISION],POWER:[null,Tt.javascriptGenerator.ORDER_NONE]}[Dt.getFieldValue("OP")];const Ft=Bt[0];Bt=Bt[1];const Ut=Tt.javascriptGenerator.valueToCode(Dt,"A",Bt)||"0";return Dt=Tt.javascriptGenerator.valueToCode(Dt,"B",Bt)||"0",Ft?[Ut+Ft+Dt,Bt]:["Math.pow("+Ut+", "+Dt+")",Tt.javascriptGenerator.ORDER_FUNCTION_CALL]},Tt.javascriptGenerator.math_single=function(Dt){const Bt=Dt.getFieldValue("OP");let Ft;if(Bt==="NEG")return Dt=Tt.javascriptGenerator.valueToCode(Dt,"NUM",Tt.javascriptGenerator.ORDER_UNARY_NEGATION)||"0",Dt[0]==="-"&&(Dt=" "+Dt),["-"+Dt,Tt.javascriptGenerator.ORDER_UNARY_NEGATION];switch(Dt=Bt==="SIN"||Bt==="COS"||Bt==="TAN"?Tt.javascriptGenerator.valueToCode(Dt,"NUM",Tt.javascriptGenerator.ORDER_DIVISION)||"0":Tt.javascriptGenerator.valueToCode(Dt,"NUM",Tt.javascriptGenerator.ORDER_NONE)||"0",Bt){case"ABS":Ft="Math.abs("+Dt+")";break;case"ROOT":Ft="Math.sqrt("+Dt+")";break;case"LN":Ft="Math.log("+Dt+")";break;case"EXP":Ft="Math.exp("+Dt+")";break;case"POW10":Ft="Math.pow(10,"+Dt+")";break;case"ROUND":Ft="Math.round("+Dt+")";break;case"ROUNDUP":Ft="Math.ceil("+Dt+")";break;case"ROUNDDOWN":Ft="Math.floor("+Dt+")";break;case"SIN":Ft="Math.sin("+Dt+" / 180 * Math.PI)";break;case"COS":Ft="Math.cos("+Dt+" / 180 * Math.PI)";break;case"TAN":Ft="Math.tan("+Dt+" / 180 * Math.PI)"}if(Ft)return[Ft,Tt.javascriptGenerator.ORDER_FUNCTION_CALL];switch(Bt){case"LOG10":Ft="Math.log("+Dt+") / Math.log(10)";break;case"ASIN":Ft="Math.asin("+Dt+") / Math.PI * 180";break;case"ACOS":Ft="Math.acos("+Dt+") / Math.PI * 180";break;case"ATAN":Ft="Math.atan("+Dt+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+Bt)}return[Ft,Tt.javascriptGenerator.ORDER_DIVISION]},Tt.javascriptGenerator.math_constant=function(Dt){return{PI:["Math.PI",Tt.javascriptGenerator.ORDER_MEMBER],E:["Math.E",Tt.javascriptGenerator.ORDER_MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",Tt.javascriptGenerator.ORDER_DIVISION],SQRT2:["Math.SQRT2",Tt.javascriptGenerator.ORDER_MEMBER],SQRT1_2:["Math.SQRT1_2",Tt.javascriptGenerator.ORDER_MEMBER],INFINITY:["Infinity",Tt.javascriptGenerator.ORDER_ATOMIC]}[Dt.getFieldValue("CONSTANT")]},Tt.javascriptGenerator.math_number_property=function(Dt){var Bt={EVEN:[" % 2 === 0",Tt.javascriptGenerator.ORDER_MODULUS,Tt.javascriptGenerator.ORDER_EQUALITY],ODD:[" % 2 === 1",Tt.javascriptGenerator.ORDER_MODULUS,Tt.javascriptGenerator.ORDER_EQUALITY],WHOLE:[" % 1 === 0",Tt.javascriptGenerator.ORDER_MODULUS,Tt.javascriptGenerator.ORDER_EQUALITY],POSITIVE:[" > 0",Tt.javascriptGenerator.ORDER_RELATIONAL,Tt.javascriptGenerator.ORDER_RELATIONAL],NEGATIVE:[" < 0",Tt.javascriptGenerator.ORDER_RELATIONAL,Tt.javascriptGenerator.ORDER_RELATIONAL],DIVISIBLE_BY:[null,Tt.javascriptGenerator.ORDER_MODULUS,Tt.javascriptGenerator.ORDER_EQUALITY],PRIME:[null,Tt.javascriptGenerator.ORDER_NONE,Tt.javascriptGenerator.ORDER_FUNCTION_CALL]};const Ft=Dt.getFieldValue("PROPERTY"),[Ut,Zt,Kt]=Bt[Ft];return Bt=Tt.javascriptGenerator.valueToCode(Dt,"NUMBER_TO_CHECK",Zt)||"0",Ft==="PRIME"?Dt=Tt.javascriptGenerator.provideFunction_("mathIsPrime",`
function ${Tt.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(n) {
  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  if (n == 2 || n == 3) {
    return true;
  }
  // False if n is NaN, negative, is 1, or not whole.
  // And false if n is divisible by 2 or 3.
  if (isNaN(n) || n <= 1 || n % 1 !== 0 || n % 2 === 0 || n % 3 === 0) {
    return false;
  }
  // Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {
    if (n % (x - 1) === 0 || n % (x + 1) === 0) {
      return false;
    }
  }
  return true;
}
`)+"("+Bt+")":Ft==="DIVISIBLE_BY"?(Dt=Tt.javascriptGenerator.valueToCode(Dt,"DIVISOR",Tt.javascriptGenerator.ORDER_MODULUS)||"0",Dt=Bt+" % "+Dt+" === 0"):Dt=Bt+Ut,[Dt,Kt]},Tt.javascriptGenerator.math_change=function(Dt){const Bt=Tt.javascriptGenerator.valueToCode(Dt,"DELTA",Tt.javascriptGenerator.ORDER_ADDITION)||"0";return Dt=Tt.javascriptGenerator.nameDB_.getName(Dt.getFieldValue("VAR"),vt.NameType$$module$build$src$core$names.VARIABLE),Dt+" = (typeof "+Dt+" === 'number' ? "+Dt+" : 0) + "+Bt+`;
`},Tt.javascriptGenerator.math_round=Tt.javascriptGenerator.math_single,Tt.javascriptGenerator.math_trig=Tt.javascriptGenerator.math_single,Tt.javascriptGenerator.math_on_list=function(Dt){var Bt=Dt.getFieldValue("OP");switch(Bt){case"SUM":Dt=Tt.javascriptGenerator.valueToCode(Dt,"LIST",Tt.javascriptGenerator.ORDER_MEMBER)||"[]",Dt+=".reduce(function(x, y) {return x + y;}, 0)";break;case"MIN":Dt=Tt.javascriptGenerator.valueToCode(Dt,"LIST",Tt.javascriptGenerator.ORDER_NONE)||"[]",Dt="Math.min.apply(null, "+Dt+")";break;case"MAX":Dt=Tt.javascriptGenerator.valueToCode(Dt,"LIST",Tt.javascriptGenerator.ORDER_NONE)||"[]",Dt="Math.max.apply(null, "+Dt+")";break;case"AVERAGE":Bt=Tt.javascriptGenerator.provideFunction_("mathMean",`
function ${Tt.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  return myList.reduce(function(x, y) {return x + y;}, 0) / myList.length;
}
`),Dt=Tt.javascriptGenerator.valueToCode(Dt,"LIST",Tt.javascriptGenerator.ORDER_NONE)||"[]",Dt=Bt+"("+Dt+")";break;case"MEDIAN":Bt=Tt.javascriptGenerator.provideFunction_("mathMedian",`
function ${Tt.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  var localList = myList.filter(function (x) {return typeof x === 'number';});
  if (!localList.length) return null;
  localList.sort(function(a, b) {return b - a;});
  if (localList.length % 2 === 0) {
    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;
  } else {
    return localList[(localList.length - 1) / 2];
  }
}
`),Dt=Tt.javascriptGenerator.valueToCode(Dt,"LIST",Tt.javascriptGenerator.ORDER_NONE)||"[]",Dt=Bt+"("+Dt+")";break;case"MODE":Bt=Tt.javascriptGenerator.provideFunction_("mathModes",`
function ${Tt.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(values) {
  var modes = [];
  var counts = [];
  var maxCount = 0;
  for (var i = 0; i < values.length; i++) {
    var value = values[i];
    var found = false;
    var thisCount;
    for (var j = 0; j < counts.length; j++) {
      if (counts[j][0] === value) {
        thisCount = ++counts[j][1];
        found = true;
        break;
      }
    }
    if (!found) {
      counts.push([value, 1]);
      thisCount = 1;
    }
    maxCount = Math.max(thisCount, maxCount);
  }
  for (var j = 0; j < counts.length; j++) {
    if (counts[j][1] === maxCount) {
        modes.push(counts[j][0]);
    }
  }
  return modes;
}
`),Dt=Tt.javascriptGenerator.valueToCode(Dt,"LIST",Tt.javascriptGenerator.ORDER_NONE)||"[]",Dt=Bt+"("+Dt+")";break;case"STD_DEV":Bt=Tt.javascriptGenerator.provideFunction_("mathStandardDeviation",`
function ${Tt.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(numbers) {
  var n = numbers.length;
  if (!n) return null;
  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;
  var variance = 0;
  for (var j = 0; j < n; j++) {
    variance += Math.pow(numbers[j] - mean, 2);
  }
  variance = variance / n;
  return Math.sqrt(variance);
}
`),Dt=Tt.javascriptGenerator.valueToCode(Dt,"LIST",Tt.javascriptGenerator.ORDER_NONE)||"[]",Dt=Bt+"("+Dt+")";break;case"RANDOM":Bt=Tt.javascriptGenerator.provideFunction_("mathRandomList",`
function ${Tt.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(list) {
  var x = Math.floor(Math.random() * list.length);
  return list[x];
}
`),Dt=Tt.javascriptGenerator.valueToCode(Dt,"LIST",Tt.javascriptGenerator.ORDER_NONE)||"[]",Dt=Bt+"("+Dt+")";break;default:throw Error("Unknown operator: "+Bt)}return[Dt,Tt.javascriptGenerator.ORDER_FUNCTION_CALL]},Tt.javascriptGenerator.math_modulo=function(Dt){const Bt=Tt.javascriptGenerator.valueToCode(Dt,"DIVIDEND",Tt.javascriptGenerator.ORDER_MODULUS)||"0";return Dt=Tt.javascriptGenerator.valueToCode(Dt,"DIVISOR",Tt.javascriptGenerator.ORDER_MODULUS)||"0",[Bt+" % "+Dt,Tt.javascriptGenerator.ORDER_MODULUS]},Tt.javascriptGenerator.math_constrain=function(Dt){const Bt=Tt.javascriptGenerator.valueToCode(Dt,"VALUE",Tt.javascriptGenerator.ORDER_NONE)||"0",Ft=Tt.javascriptGenerator.valueToCode(Dt,"LOW",Tt.javascriptGenerator.ORDER_NONE)||"0";return Dt=Tt.javascriptGenerator.valueToCode(Dt,"HIGH",Tt.javascriptGenerator.ORDER_NONE)||"Infinity",["Math.min(Math.max("+Bt+", "+Ft+"), "+Dt+")",Tt.javascriptGenerator.ORDER_FUNCTION_CALL]},Tt.javascriptGenerator.math_random_int=function(Dt){const Bt=Tt.javascriptGenerator.valueToCode(Dt,"FROM",Tt.javascriptGenerator.ORDER_NONE)||"0";return Dt=Tt.javascriptGenerator.valueToCode(Dt,"TO",Tt.javascriptGenerator.ORDER_NONE)||"0",[Tt.javascriptGenerator.provideFunction_("mathRandomInt",`
function ${Tt.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(a, b) {
  if (a > b) {
    // Swap a and b to ensure a is smaller.
    var c = a;
    a = b;
    b = c;
  }
  return Math.floor(Math.random() * (b - a + 1) + a);
}
`)+"("+Bt+", "+Dt+")",Tt.javascriptGenerator.ORDER_FUNCTION_CALL]},Tt.javascriptGenerator.math_random_float=function(Dt){return["Math.random()",Tt.javascriptGenerator.ORDER_FUNCTION_CALL]},Tt.javascriptGenerator.math_atan2=function(Dt){const Bt=Tt.javascriptGenerator.valueToCode(Dt,"X",Tt.javascriptGenerator.ORDER_NONE)||"0";return["Math.atan2("+(Tt.javascriptGenerator.valueToCode(Dt,"Y",Tt.javascriptGenerator.ORDER_NONE)||"0")+", "+Bt+") / Math.PI * 180",Tt.javascriptGenerator.ORDER_DIVISION]},vt.module$build$src$core$utils$string,vt.NameType$$module$build$src$core$names,Tt.javascriptGenerator.controls_repeat_ext=function(Dt){let Bt;Bt=Dt.getField("TIMES")?String(Number(Dt.getFieldValue("TIMES"))):Tt.javascriptGenerator.valueToCode(Dt,"TIMES",Tt.javascriptGenerator.ORDER_ASSIGNMENT)||"0";let Ft=Tt.javascriptGenerator.statementToCode(Dt,"DO");Ft=Tt.javascriptGenerator.addLoopTrap(Ft,Dt),Dt="";const Ut=Tt.javascriptGenerator.nameDB_.getDistinctName("count",vt.NameType$$module$build$src$core$names.VARIABLE);let Zt=Bt;return Bt.match(/^\w+$/)||vt.module$build$src$core$utils$string.isNumber(Bt)||(Zt=Tt.javascriptGenerator.nameDB_.getDistinctName("repeat_end",vt.NameType$$module$build$src$core$names.VARIABLE),Dt+="var "+Zt+" = "+Bt+`;
`),Dt+("for (var "+Ut+" = 0; "+Ut+" < "+Zt+"; "+Ut+`++) {
`+Ft+`}
`)},Tt.javascriptGenerator.controls_repeat=Tt.javascriptGenerator.controls_repeat_ext,Tt.javascriptGenerator.controls_whileUntil=function(Dt){const Bt=Dt.getFieldValue("MODE")==="UNTIL";let Ft=Tt.javascriptGenerator.valueToCode(Dt,"BOOL",Bt?Tt.javascriptGenerator.ORDER_LOGICAL_NOT:Tt.javascriptGenerator.ORDER_NONE)||"false",Ut=Tt.javascriptGenerator.statementToCode(Dt,"DO");return Ut=Tt.javascriptGenerator.addLoopTrap(Ut,Dt),Bt&&(Ft="!"+Ft),"while ("+Ft+`) {
`+Ut+`}
`},Tt.javascriptGenerator.controls_for=function(Dt){var Bt=Tt.javascriptGenerator.nameDB_.getName(Dt.getFieldValue("VAR"),vt.NameType$$module$build$src$core$names.VARIABLE),Ft=Tt.javascriptGenerator.valueToCode(Dt,"FROM",Tt.javascriptGenerator.ORDER_ASSIGNMENT)||"0",Ut=Tt.javascriptGenerator.valueToCode(Dt,"TO",Tt.javascriptGenerator.ORDER_ASSIGNMENT)||"0";const Zt=Tt.javascriptGenerator.valueToCode(Dt,"BY",Tt.javascriptGenerator.ORDER_ASSIGNMENT)||"1";let Kt=Tt.javascriptGenerator.statementToCode(Dt,"DO");if(Kt=Tt.javascriptGenerator.addLoopTrap(Kt,Dt),vt.module$build$src$core$utils$string.isNumber(Ft)&&vt.module$build$src$core$utils$string.isNumber(Ut)&&vt.module$build$src$core$utils$string.isNumber(Zt)){var ln=Number(Ft)<=Number(Ut);Dt="for ("+Bt+" = "+Ft+"; "+Bt+(ln?" <= ":" >= ")+Ut+"; "+Bt,Bt=Math.abs(Number(Zt)),Dt=Bt===1?Dt+(ln?"++":"--"):Dt+((ln?" += ":" -= ")+Bt),Dt+=`) {
`+Kt+`}
`}else Dt="",ln=Ft,Ft.match(/^\w+$/)||vt.module$build$src$core$utils$string.isNumber(Ft)||(ln=Tt.javascriptGenerator.nameDB_.getDistinctName(Bt+"_start",vt.NameType$$module$build$src$core$names.VARIABLE),Dt+="var "+ln+" = "+Ft+`;
`),Ft=Ut,Ut.match(/^\w+$/)||vt.module$build$src$core$utils$string.isNumber(Ut)||(Ft=Tt.javascriptGenerator.nameDB_.getDistinctName(Bt+"_end",vt.NameType$$module$build$src$core$names.VARIABLE),Dt+="var "+Ft+" = "+Ut+`;
`),Ut=Tt.javascriptGenerator.nameDB_.getDistinctName(Bt+"_inc",vt.NameType$$module$build$src$core$names.VARIABLE),Dt+="var "+Ut+" = ",Dt=vt.module$build$src$core$utils$string.isNumber(Zt)?Dt+(Math.abs(Zt)+`;
`):Dt+("Math.abs("+Zt+`);
`),Dt+="if ("+ln+" > "+Ft+`) {
`,Dt+=Tt.javascriptGenerator.INDENT+Ut+" = -"+Ut+`;
`,Dt=Dt+`}
for (`+(Bt+" = "+ln+"; "+Ut+" >= 0 ? "+Bt+" <= "+Ft+" : "+Bt+" >= "+Ft+"; "+Bt+" += "+Ut+`) {
`+Kt+`}
`);return Dt},Tt.javascriptGenerator.controls_forEach=function(Dt){const Bt=Tt.javascriptGenerator.nameDB_.getName(Dt.getFieldValue("VAR"),vt.NameType$$module$build$src$core$names.VARIABLE);var Ft=Tt.javascriptGenerator.valueToCode(Dt,"LIST",Tt.javascriptGenerator.ORDER_ASSIGNMENT)||"[]";let Ut=Tt.javascriptGenerator.statementToCode(Dt,"DO");Ut=Tt.javascriptGenerator.addLoopTrap(Ut,Dt),Dt="";let Zt=Ft;return Ft.match(/^\w+$/)||(Zt=Tt.javascriptGenerator.nameDB_.getDistinctName(Bt+"_list",vt.NameType$$module$build$src$core$names.VARIABLE),Dt+="var "+Zt+" = "+Ft+`;
`),Ft=Tt.javascriptGenerator.nameDB_.getDistinctName(Bt+"_index",vt.NameType$$module$build$src$core$names.VARIABLE),Ut=Tt.javascriptGenerator.INDENT+Bt+" = "+Zt+"["+Ft+`];
`+Ut,Dt+("for (var "+Ft+" in "+Zt+`) {
`+Ut+`}
`)},Tt.javascriptGenerator.controls_flow_statements=function(Dt){let Bt="";if(Tt.javascriptGenerator.STATEMENT_PREFIX&&(Bt+=Tt.javascriptGenerator.injectId(Tt.javascriptGenerator.STATEMENT_PREFIX,Dt)),Tt.javascriptGenerator.STATEMENT_SUFFIX&&(Bt+=Tt.javascriptGenerator.injectId(Tt.javascriptGenerator.STATEMENT_SUFFIX,Dt)),Tt.javascriptGenerator.STATEMENT_PREFIX){const Ft=Dt.getSurroundLoop();Ft&&!Ft.suppressPrefixSuffix&&(Bt+=Tt.javascriptGenerator.injectId(Tt.javascriptGenerator.STATEMENT_PREFIX,Ft))}switch(Dt.getFieldValue("FLOW")){case"BREAK":return Bt+`break;
`;case"CONTINUE":return Bt+`continue;
`}throw Error("Unknown flow statement.")},Tt.javascriptGenerator.controls_if=function(Dt){var Bt=0;let Ft="";Tt.javascriptGenerator.STATEMENT_PREFIX&&(Ft+=Tt.javascriptGenerator.injectId(Tt.javascriptGenerator.STATEMENT_PREFIX,Dt));do{const Ut=Tt.javascriptGenerator.valueToCode(Dt,"IF"+Bt,Tt.javascriptGenerator.ORDER_NONE)||"false";let Zt=Tt.javascriptGenerator.statementToCode(Dt,"DO"+Bt);Tt.javascriptGenerator.STATEMENT_SUFFIX&&(Zt=Tt.javascriptGenerator.prefixLines(Tt.javascriptGenerator.injectId(Tt.javascriptGenerator.STATEMENT_SUFFIX,Dt),Tt.javascriptGenerator.INDENT)+Zt),Ft+=(0<Bt?" else ":"")+"if ("+Ut+`) {
`+Zt+"}",Bt++}while(Dt.getInput("IF"+Bt));return(Dt.getInput("ELSE")||Tt.javascriptGenerator.STATEMENT_SUFFIX)&&(Bt=Tt.javascriptGenerator.statementToCode(Dt,"ELSE"),Tt.javascriptGenerator.STATEMENT_SUFFIX&&(Bt=Tt.javascriptGenerator.prefixLines(Tt.javascriptGenerator.injectId(Tt.javascriptGenerator.STATEMENT_SUFFIX,Dt),Tt.javascriptGenerator.INDENT)+Bt),Ft+=` else {
`+Bt+"}"),Ft+`
`},Tt.javascriptGenerator.controls_ifelse=Tt.javascriptGenerator.controls_if,Tt.javascriptGenerator.logic_compare=function(Dt){const Bt={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[Dt.getFieldValue("OP")],Ft=Bt==="=="||Bt==="!="?Tt.javascriptGenerator.ORDER_EQUALITY:Tt.javascriptGenerator.ORDER_RELATIONAL,Ut=Tt.javascriptGenerator.valueToCode(Dt,"A",Ft)||"0";return Dt=Tt.javascriptGenerator.valueToCode(Dt,"B",Ft)||"0",[Ut+" "+Bt+" "+Dt,Ft]},Tt.javascriptGenerator.logic_operation=function(Dt){const Bt=Dt.getFieldValue("OP")==="AND"?"&&":"||",Ft=Bt==="&&"?Tt.javascriptGenerator.ORDER_LOGICAL_AND:Tt.javascriptGenerator.ORDER_LOGICAL_OR;let Ut=Tt.javascriptGenerator.valueToCode(Dt,"A",Ft);if(Dt=Tt.javascriptGenerator.valueToCode(Dt,"B",Ft),Ut||Dt){const Zt=Bt==="&&"?"true":"false";Ut||(Ut=Zt),Dt||(Dt=Zt)}else Dt=Ut="false";return[Ut+" "+Bt+" "+Dt,Ft]},Tt.javascriptGenerator.logic_negate=function(Dt){const Bt=Tt.javascriptGenerator.ORDER_LOGICAL_NOT;return["!"+(Tt.javascriptGenerator.valueToCode(Dt,"BOOL",Bt)||"true"),Bt]},Tt.javascriptGenerator.logic_boolean=function(Dt){return[Dt.getFieldValue("BOOL")==="TRUE"?"true":"false",Tt.javascriptGenerator.ORDER_ATOMIC]},Tt.javascriptGenerator.logic_null=function(Dt){return["null",Tt.javascriptGenerator.ORDER_ATOMIC]},Tt.javascriptGenerator.logic_ternary=function(Dt){const Bt=Tt.javascriptGenerator.valueToCode(Dt,"IF",Tt.javascriptGenerator.ORDER_CONDITIONAL)||"false",Ft=Tt.javascriptGenerator.valueToCode(Dt,"THEN",Tt.javascriptGenerator.ORDER_CONDITIONAL)||"null";return Dt=Tt.javascriptGenerator.valueToCode(Dt,"ELSE",Tt.javascriptGenerator.ORDER_CONDITIONAL)||"null",[Bt+" ? "+Ft+" : "+Dt,Tt.javascriptGenerator.ORDER_CONDITIONAL]},vt.NameType$$module$build$src$core$names,Tt.javascriptGenerator.lists_create_empty=function(Dt){return["[]",Tt.javascriptGenerator.ORDER_ATOMIC]},Tt.javascriptGenerator.lists_create_with=function(Dt){const Bt=Array(Dt.itemCount_);for(let Ft=0;Ft<Dt.itemCount_;Ft++)Bt[Ft]=Tt.javascriptGenerator.valueToCode(Dt,"ADD"+Ft,Tt.javascriptGenerator.ORDER_NONE)||"null";return["["+Bt.join(", ")+"]",Tt.javascriptGenerator.ORDER_ATOMIC]},Tt.javascriptGenerator.lists_repeat=function(Dt){const Bt=Tt.javascriptGenerator.provideFunction_("listsRepeat",`
function ${Tt.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(value, n) {
  var array = [];
  for (var i = 0; i < n; i++) {
    array[i] = value;
  }
  return array;
}
`),Ft=Tt.javascriptGenerator.valueToCode(Dt,"ITEM",Tt.javascriptGenerator.ORDER_NONE)||"null";return Dt=Tt.javascriptGenerator.valueToCode(Dt,"NUM",Tt.javascriptGenerator.ORDER_NONE)||"0",[Bt+"("+Ft+", "+Dt+")",Tt.javascriptGenerator.ORDER_FUNCTION_CALL]},Tt.javascriptGenerator.lists_length=function(Dt){return[(Tt.javascriptGenerator.valueToCode(Dt,"VALUE",Tt.javascriptGenerator.ORDER_MEMBER)||"[]")+".length",Tt.javascriptGenerator.ORDER_MEMBER]},Tt.javascriptGenerator.lists_isEmpty=function(Dt){return["!"+(Tt.javascriptGenerator.valueToCode(Dt,"VALUE",Tt.javascriptGenerator.ORDER_MEMBER)||"[]")+".length",Tt.javascriptGenerator.ORDER_LOGICAL_NOT]},Tt.javascriptGenerator.lists_indexOf=function(Dt){var Bt=Dt.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf";const Ft=Tt.javascriptGenerator.valueToCode(Dt,"FIND",Tt.javascriptGenerator.ORDER_NONE)||"''";return Bt=(Tt.javascriptGenerator.valueToCode(Dt,"VALUE",Tt.javascriptGenerator.ORDER_MEMBER)||"[]")+"."+Bt+"("+Ft+")",Dt.workspace.options.oneBasedIndex?[Bt+" + 1",Tt.javascriptGenerator.ORDER_ADDITION]:[Bt,Tt.javascriptGenerator.ORDER_FUNCTION_CALL]},Tt.javascriptGenerator.lists_getIndex=function(Dt){const Bt=Dt.getFieldValue("MODE")||"GET",Ft=Dt.getFieldValue("WHERE")||"FROM_START";var Ut=Tt.javascriptGenerator.valueToCode(Dt,"VALUE",Ft==="RANDOM"?Tt.javascriptGenerator.ORDER_NONE:Tt.javascriptGenerator.ORDER_MEMBER)||"[]";switch(Ft){case"FIRST":if(Bt==="GET")return[Ut+"[0]",Tt.javascriptGenerator.ORDER_MEMBER];if(Bt==="GET_REMOVE")return[Ut+".shift()",Tt.javascriptGenerator.ORDER_MEMBER];if(Bt==="REMOVE")return Ut+`.shift();
`;break;case"LAST":if(Bt==="GET")return[Ut+".slice(-1)[0]",Tt.javascriptGenerator.ORDER_MEMBER];if(Bt==="GET_REMOVE")return[Ut+".pop()",Tt.javascriptGenerator.ORDER_MEMBER];if(Bt==="REMOVE")return Ut+`.pop();
`;break;case"FROM_START":if(Dt=Tt.javascriptGenerator.getAdjusted(Dt,"AT"),Bt==="GET")return[Ut+"["+Dt+"]",Tt.javascriptGenerator.ORDER_MEMBER];if(Bt==="GET_REMOVE")return[Ut+".splice("+Dt+", 1)[0]",Tt.javascriptGenerator.ORDER_FUNCTION_CALL];if(Bt==="REMOVE")return Ut+".splice("+Dt+`, 1);
`;break;case"FROM_END":if(Dt=Tt.javascriptGenerator.getAdjusted(Dt,"AT",1,!0),Bt==="GET")return[Ut+".slice("+Dt+")[0]",Tt.javascriptGenerator.ORDER_FUNCTION_CALL];if(Bt==="GET_REMOVE")return[Ut+".splice("+Dt+", 1)[0]",Tt.javascriptGenerator.ORDER_FUNCTION_CALL];if(Bt==="REMOVE")return Ut+".splice("+Dt+", 1);";break;case"RANDOM":if(Ut=Tt.javascriptGenerator.provideFunction_("listsGetRandomItem",`
function ${Tt.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(list, remove) {
  var x = Math.floor(Math.random() * list.length);
  if (remove) {
    return list.splice(x, 1)[0];
  } else {
    return list[x];
  }
}
`)+"("+Ut+", "+(Bt!=="GET")+")",Bt==="GET"||Bt==="GET_REMOVE")return[Ut,Tt.javascriptGenerator.ORDER_FUNCTION_CALL];if(Bt==="REMOVE")return Ut+`;
`}throw Error("Unhandled combination (lists_getIndex).")},Tt.javascriptGenerator.lists_setIndex=function(Dt){function Bt(){if(Ft.match(/^\w+$/))return"";const ln=Tt.javascriptGenerator.nameDB_.getDistinctName("tmpList",vt.NameType$$module$build$src$core$names.VARIABLE),hn="var "+ln+" = "+Ft+`;
`;return Ft=ln,hn}let Ft=Tt.javascriptGenerator.valueToCode(Dt,"LIST",Tt.javascriptGenerator.ORDER_MEMBER)||"[]";const Ut=Dt.getFieldValue("MODE")||"GET";var Zt=Dt.getFieldValue("WHERE")||"FROM_START";const Kt=Tt.javascriptGenerator.valueToCode(Dt,"TO",Tt.javascriptGenerator.ORDER_ASSIGNMENT)||"null";switch(Zt){case"FIRST":if(Ut==="SET")return Ft+"[0] = "+Kt+`;
`;if(Ut==="INSERT")return Ft+".unshift("+Kt+`);
`;break;case"LAST":if(Ut==="SET")return Bt()+(Ft+"["+Ft+".length - 1] = "+Kt+`;
`);if(Ut==="INSERT")return Ft+".push("+Kt+`);
`;break;case"FROM_START":if(Dt=Tt.javascriptGenerator.getAdjusted(Dt,"AT"),Ut==="SET")return Ft+"["+Dt+"] = "+Kt+`;
`;if(Ut==="INSERT")return Ft+".splice("+Dt+", 0, "+Kt+`);
`;break;case"FROM_END":if(Dt=Tt.javascriptGenerator.getAdjusted(Dt,"AT",1,!1,Tt.javascriptGenerator.ORDER_SUBTRACTION),Zt=Bt(),Ut==="SET")return Zt+(Ft+"["+Ft+".length - "+Dt+"] = "+Kt+`;
`);if(Ut==="INSERT")return Zt+(Ft+".splice("+Ft+".length - "+Dt+", 0, "+Kt+`);
`);break;case"RANDOM":if(Dt=Bt(),Zt=Tt.javascriptGenerator.nameDB_.getDistinctName("tmpX",vt.NameType$$module$build$src$core$names.VARIABLE),Dt+="var "+Zt+" = Math.floor(Math.random() * "+Ft+`.length);
`,Ut==="SET")return Dt+(Ft+"["+Zt+"] = "+Kt+`;
`);if(Ut==="INSERT")return Dt+(Ft+".splice("+Zt+", 0, "+Kt+`);
`)}throw Error("Unhandled combination (lists_setIndex).")};var kt=function(Dt,Bt,Ft){return Bt==="FIRST"?"0":Bt==="FROM_END"?Dt+".length - 1 - "+Ft:Bt==="LAST"?Dt+".length - 1":Ft};return Tt.javascriptGenerator.lists_getSublist=function(Dt){var Bt=Tt.javascriptGenerator.valueToCode(Dt,"LIST",Tt.javascriptGenerator.ORDER_MEMBER)||"[]",Ft=Dt.getFieldValue("WHERE1"),Ut=Dt.getFieldValue("WHERE2");if(Ft==="FIRST"&&Ut==="LAST")Bt+=".slice(0)";else if(Bt.match(/^\w+$/)||Ft!=="FROM_END"&&Ut==="FROM_START"){switch(Ft){case"FROM_START":Ft=Tt.javascriptGenerator.getAdjusted(Dt,"AT1");break;case"FROM_END":Ft=Tt.javascriptGenerator.getAdjusted(Dt,"AT1",1,!1,Tt.javascriptGenerator.ORDER_SUBTRACTION),Ft=Bt+".length - "+Ft;break;case"FIRST":Ft="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(Ut){case"FROM_START":Ut=Tt.javascriptGenerator.getAdjusted(Dt,"AT2",1);break;case"FROM_END":Ut=Tt.javascriptGenerator.getAdjusted(Dt,"AT2",0,!1,Tt.javascriptGenerator.ORDER_SUBTRACTION),Ut=Bt+".length - "+Ut;break;case"LAST":Ut=Bt+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}Bt=Bt+".slice("+Ft+", "+Ut+")"}else{const Zt=Tt.javascriptGenerator.getAdjusted(Dt,"AT1");Dt=Tt.javascriptGenerator.getAdjusted(Dt,"AT2");const Kt={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};Bt=Tt.javascriptGenerator.provideFunction_("subsequence"+Kt[Ft]+Kt[Ut],`
function ${Tt.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(sequence${Ft==="FROM_END"||Ft==="FROM_START"?", at1":""}${Ut==="FROM_END"||Ut==="FROM_START"?", at2":""}) {
  var start = ${kt("sequence",Ft,"at1")};
  var end = ${kt("sequence",Ut,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+Bt+(Ft==="FROM_END"||Ft==="FROM_START"?", "+Zt:"")+(Ut==="FROM_END"||Ut==="FROM_START"?", "+Dt:"")+")"}return[Bt,Tt.javascriptGenerator.ORDER_FUNCTION_CALL]},Tt.javascriptGenerator.lists_sort=function(Dt){const Bt=Tt.javascriptGenerator.valueToCode(Dt,"LIST",Tt.javascriptGenerator.ORDER_FUNCTION_CALL)||"[]",Ft=Dt.getFieldValue("DIRECTION")==="1"?1:-1;Dt=Dt.getFieldValue("TYPE");const Ut=Tt.javascriptGenerator.provideFunction_("listsGetSortCompare",`
function ${Tt.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(type, direction) {
  var compareFuncs = {
    'NUMERIC': function(a, b) {
        return Number(a) - Number(b); },
    'TEXT': function(a, b) {
        return a.toString() > b.toString() ? 1 : -1; },
    'IGNORE_CASE': function(a, b) {
        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },
  };
  var compare = compareFuncs[type];
  return function(a, b) { return compare(a, b) * direction; };
}
      `);return[Bt+".slice().sort("+Ut+'("'+Dt+'", '+Ft+"))",Tt.javascriptGenerator.ORDER_FUNCTION_CALL]},Tt.javascriptGenerator.lists_split=function(Dt){let Bt=Tt.javascriptGenerator.valueToCode(Dt,"INPUT",Tt.javascriptGenerator.ORDER_MEMBER);const Ft=Tt.javascriptGenerator.valueToCode(Dt,"DELIM",Tt.javascriptGenerator.ORDER_NONE)||"''";if(Dt=Dt.getFieldValue("MODE"),Dt==="SPLIT")Bt||(Bt="''"),Dt="split";else if(Dt==="JOIN")Bt||(Bt="[]"),Dt="join";else throw Error("Unknown mode: "+Dt);return[Bt+"."+Dt+"("+Ft+")",Tt.javascriptGenerator.ORDER_FUNCTION_CALL]},Tt.javascriptGenerator.lists_reverse=function(Dt){return[(Tt.javascriptGenerator.valueToCode(Dt,"LIST",Tt.javascriptGenerator.ORDER_FUNCTION_CALL)||"[]")+".slice().reverse()",Tt.javascriptGenerator.ORDER_FUNCTION_CALL]},Tt.javascriptGenerator.colour_picker=function(Dt){return[Tt.javascriptGenerator.quote_(Dt.getFieldValue("COLOUR")),Tt.javascriptGenerator.ORDER_ATOMIC]},Tt.javascriptGenerator.colour_random=function(Dt){return[Tt.javascriptGenerator.provideFunction_("colourRandom",`
function ${Tt.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}() {
  var num = Math.floor(Math.random() * Math.pow(2, 24));
  return '#' + ('00000' + num.toString(16)).substr(-6);
}
`)+"()",Tt.javascriptGenerator.ORDER_FUNCTION_CALL]},Tt.javascriptGenerator.colour_rgb=function(Dt){const Bt=Tt.javascriptGenerator.valueToCode(Dt,"RED",Tt.javascriptGenerator.ORDER_NONE)||0,Ft=Tt.javascriptGenerator.valueToCode(Dt,"GREEN",Tt.javascriptGenerator.ORDER_NONE)||0;return Dt=Tt.javascriptGenerator.valueToCode(Dt,"BLUE",Tt.javascriptGenerator.ORDER_NONE)||0,[Tt.javascriptGenerator.provideFunction_("colourRgb",`
function ${Tt.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(r, g, b) {
  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;
  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;
  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;
  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);
  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);
  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)+"("+Bt+", "+Ft+", "+Dt+")",Tt.javascriptGenerator.ORDER_FUNCTION_CALL]},Tt.javascriptGenerator.colour_blend=function(Dt){const Bt=Tt.javascriptGenerator.valueToCode(Dt,"COLOUR1",Tt.javascriptGenerator.ORDER_NONE)||"'#000000'",Ft=Tt.javascriptGenerator.valueToCode(Dt,"COLOUR2",Tt.javascriptGenerator.ORDER_NONE)||"'#000000'";return Dt=Tt.javascriptGenerator.valueToCode(Dt,"RATIO",Tt.javascriptGenerator.ORDER_NONE)||.5,[Tt.javascriptGenerator.provideFunction_("colourBlend",`
function ${Tt.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(c1, c2, ratio) {
  ratio = Math.max(Math.min(Number(ratio), 1), 0);
  var r1 = parseInt(c1.substring(1, 3), 16);
  var g1 = parseInt(c1.substring(3, 5), 16);
  var b1 = parseInt(c1.substring(5, 7), 16);
  var r2 = parseInt(c2.substring(1, 3), 16);
  var g2 = parseInt(c2.substring(3, 5), 16);
  var b2 = parseInt(c2.substring(5, 7), 16);
  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);
  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);
  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);
  r = ('0' + (r || 0).toString(16)).slice(-2);
  g = ('0' + (g || 0).toString(16)).slice(-2);
  b = ('0' + (b || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)+"("+Bt+", "+Ft+", "+Dt+")",Tt.javascriptGenerator.ORDER_FUNCTION_CALL]},Tt.__namespace__=vt,Tt})}(javascript_compressed)),javascript_compressed.exports}(function(ft,lt){(function(dt,vt){ft.exports=vt(requireCoreBrowser(),requireJavascript_compressed())})(commonjsGlobal,function(dt,vt){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return vt})})(javascript$1);var javascriptExports=javascript$1.exports,hasRequiredBrowser;function requireBrowser(){return hasRequiredBrowser||(hasRequiredBrowser=1,function(ft,lt){(function(dt,vt){ft.exports=vt(requireCoreBrowser(),requireEn(),requireBlocks(),javascriptExports)})(commonjsGlobal,function(dt,vt,Tt,Et){return dt.setLocale(vt),dt})}(browser$1)),browser$1.exports}(function(ft,lt){(function(dt,vt){ft.exports=vt(requireBrowser())})(commonjsGlobal,function(dt){/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return dt})})(blockly$1);var blocklyExports=blockly$1.exports;const Blockly=getDefaultExportFromCjs(blocklyExports);var python$1={exports:{}},python_compressed={exports:{}},hasRequiredPython_compressed;function requirePython_compressed(){return hasRequiredPython_compressed||(hasRequiredPython_compressed=1,function(ft,lt){(function(dt,vt){ft.exports=vt(requireBlockly_compressed())})(commonjsGlobal,function(dt){var vt=dt.__namespace__,Tt={};vt.module$build$src$core$utils$string,vt.module$build$src$core$variables,vt.CodeGenerator$$module$build$src$core$generator,vt.module$build$src$core$input_types.inputTypes,vt.module$build$src$core$names.Names,vt.NameType$$module$build$src$core$names,Tt.pythonGenerator=new vt.CodeGenerator$$module$build$src$core$generator("Python"),Tt.pythonGenerator.addReservedWords("False,None,True,and,as,assert,break,class,continue,def,del,elif,else,except,exec,finally,for,from,global,if,import,in,is,lambda,nonlocal,not,or,pass,print,raise,return,try,while,with,yield,NotImplemented,Ellipsis,__debug__,quit,exit,copyright,license,credits,ArithmeticError,AssertionError,AttributeError,BaseException,BlockingIOError,BrokenPipeError,BufferError,BytesWarning,ChildProcessError,ConnectionAbortedError,ConnectionError,ConnectionRefusedError,ConnectionResetError,DeprecationWarning,EOFError,Ellipsis,EnvironmentError,Exception,FileExistsError,FileNotFoundError,FloatingPointError,FutureWarning,GeneratorExit,IOError,ImportError,ImportWarning,IndentationError,IndexError,InterruptedError,IsADirectoryError,KeyError,KeyboardInterrupt,LookupError,MemoryError,ModuleNotFoundError,NameError,NotADirectoryError,NotImplemented,NotImplementedError,OSError,OverflowError,PendingDeprecationWarning,PermissionError,ProcessLookupError,RecursionError,ReferenceError,ResourceWarning,RuntimeError,RuntimeWarning,StandardError,StopAsyncIteration,StopIteration,SyntaxError,SyntaxWarning,SystemError,SystemExit,TabError,TimeoutError,TypeError,UnboundLocalError,UnicodeDecodeError,UnicodeEncodeError,UnicodeError,UnicodeTranslateError,UnicodeWarning,UserWarning,ValueError,Warning,ZeroDivisionError,_,__build_class__,__debug__,__doc__,__import__,__loader__,__name__,__package__,__spec__,abs,all,any,apply,ascii,basestring,bin,bool,buffer,bytearray,bytes,callable,chr,classmethod,cmp,coerce,compile,complex,copyright,credits,delattr,dict,dir,divmod,enumerate,eval,exec,execfile,exit,file,filter,float,format,frozenset,getattr,globals,hasattr,hash,help,hex,id,input,int,intern,isinstance,issubclass,iter,len,license,list,locals,long,map,max,memoryview,min,next,object,oct,open,ord,pow,print,property,quit,range,raw_input,reduce,reload,repr,reversed,round,set,setattr,slice,sorted,staticmethod,str,sum,super,tuple,type,unichr,unicode,vars,xrange,zip"),Tt.pythonGenerator.ORDER_ATOMIC=0,Tt.pythonGenerator.ORDER_COLLECTION=1,Tt.pythonGenerator.ORDER_STRING_CONVERSION=1,Tt.pythonGenerator.ORDER_MEMBER=2.1,Tt.pythonGenerator.ORDER_FUNCTION_CALL=2.2,Tt.pythonGenerator.ORDER_EXPONENTIATION=3,Tt.pythonGenerator.ORDER_UNARY_SIGN=4,Tt.pythonGenerator.ORDER_BITWISE_NOT=4,Tt.pythonGenerator.ORDER_MULTIPLICATIVE=5,Tt.pythonGenerator.ORDER_ADDITIVE=6,Tt.pythonGenerator.ORDER_BITWISE_SHIFT=7,Tt.pythonGenerator.ORDER_BITWISE_AND=8,Tt.pythonGenerator.ORDER_BITWISE_XOR=9,Tt.pythonGenerator.ORDER_BITWISE_OR=10,Tt.pythonGenerator.ORDER_RELATIONAL=11,Tt.pythonGenerator.ORDER_LOGICAL_NOT=12,Tt.pythonGenerator.ORDER_LOGICAL_AND=13,Tt.pythonGenerator.ORDER_LOGICAL_OR=14,Tt.pythonGenerator.ORDER_CONDITIONAL=15,Tt.pythonGenerator.ORDER_LAMBDA=16,Tt.pythonGenerator.ORDER_NONE=99,Tt.pythonGenerator.ORDER_OVERRIDES=[[Tt.pythonGenerator.ORDER_FUNCTION_CALL,Tt.pythonGenerator.ORDER_MEMBER],[Tt.pythonGenerator.ORDER_FUNCTION_CALL,Tt.pythonGenerator.ORDER_FUNCTION_CALL],[Tt.pythonGenerator.ORDER_MEMBER,Tt.pythonGenerator.ORDER_MEMBER],[Tt.pythonGenerator.ORDER_MEMBER,Tt.pythonGenerator.ORDER_FUNCTION_CALL],[Tt.pythonGenerator.ORDER_LOGICAL_NOT,Tt.pythonGenerator.ORDER_LOGICAL_NOT],[Tt.pythonGenerator.ORDER_LOGICAL_AND,Tt.pythonGenerator.ORDER_LOGICAL_AND],[Tt.pythonGenerator.ORDER_LOGICAL_OR,Tt.pythonGenerator.ORDER_LOGICAL_OR]],Tt.pythonGenerator.isInitialized=!1,Tt.pythonGenerator.init=function(Rt){Object.getPrototypeOf(this).init.call(this),this.PASS=this.INDENT+`pass
`,this.nameDB_?this.nameDB_.reset():this.nameDB_=new vt.module$build$src$core$names.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(Rt.getVariableMap()),this.nameDB_.populateVariables(Rt),this.nameDB_.populateProcedures(Rt);const kt=[];var Dt=vt.module$build$src$core$variables.allDeveloperVariables(Rt);for(let Bt=0;Bt<Dt.length;Bt++)kt.push(this.nameDB_.getName(Dt[Bt],vt.module$build$src$core$names.Names.DEVELOPER_VARIABLE_TYPE)+" = None");for(Rt=vt.module$build$src$core$variables.allUsedVarModels(Rt),Dt=0;Dt<Rt.length;Dt++)kt.push(this.nameDB_.getName(Rt[Dt].getId(),vt.NameType$$module$build$src$core$names.VARIABLE)+" = None");this.definitions_.variables=kt.join(`
`),this.isInitialized=!0},Tt.pythonGenerator.finish=function(Rt){const kt=[],Dt=[];for(let Bt in this.definitions_){const Ft=this.definitions_[Bt];Ft.match(/^(from\s+\S+\s+)?import\s+\S+/)?kt.push(Ft):Dt.push(Ft)}return Rt=Object.getPrototypeOf(this).finish.call(this,Rt),this.isInitialized=!1,this.nameDB_.reset(),(kt.join(`
`)+`

`+Dt.join(`

`)).replace(/\n\n+/g,`

`).replace(/\n*$/,`


`)+Rt},Tt.pythonGenerator.scrubNakedValue=function(Rt){return Rt+`
`},Tt.pythonGenerator.quote_=function(Rt){Rt=Rt.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`);let kt="'";return Rt.indexOf("'")!==-1&&(Rt.indexOf('"')===-1?kt='"':Rt=Rt.replace(/'/g,"\\'")),kt+Rt+kt},Tt.pythonGenerator.multiline_quote_=function(Rt){return Rt.split(/\n/g).map(this.quote_).join(` + '\\n' + 
`)},Tt.pythonGenerator.scrub_=function(Rt,kt,Dt){let Bt="";if(!Rt.outputConnection||!Rt.outputConnection.targetConnection){var Ft=Rt.getCommentText();Ft&&(Ft=vt.module$build$src$core$utils$string.wrap(Ft,this.COMMENT_WRAP-3),Bt+=this.prefixLines(Ft+`
`,"# "));for(let Ut=0;Ut<Rt.inputList.length;Ut++)Rt.inputList[Ut].type===vt.module$build$src$core$input_types.inputTypes.VALUE&&(Ft=Rt.inputList[Ut].connection.targetBlock())&&(Ft=this.allNestedComments(Ft))&&(Bt+=this.prefixLines(Ft,"# "))}return Rt=Rt.nextConnection&&Rt.nextConnection.targetBlock(),Dt=Dt?"":this.blockToCode(Rt),Bt+kt+Dt},Tt.pythonGenerator.getAdjustedInt=function(Rt,kt,Dt,Bt){Dt=Dt||0,Rt.workspace.options.oneBasedIndex&&Dt--;const Ft=Rt.workspace.options.oneBasedIndex?"1":"0";return Rt=this.valueToCode(Rt,kt,Dt?this.ORDER_ADDITIVE:this.ORDER_NONE)||Ft,vt.module$build$src$core$utils$string.isNumber(Rt)?(Rt=parseInt(Rt,10)+Dt,Bt&&(Rt=-Rt)):(Rt=0<Dt?"int("+Rt+" + "+Dt+")":0>Dt?"int("+Rt+" - "+-Dt+")":"int("+Rt+")",Bt&&(Rt="-"+Rt)),Rt},vt.NameType$$module$build$src$core$names,Tt.pythonGenerator.variables_get=function(Rt){return[Tt.pythonGenerator.nameDB_.getName(Rt.getFieldValue("VAR"),vt.NameType$$module$build$src$core$names.VARIABLE),Tt.pythonGenerator.ORDER_ATOMIC]},Tt.pythonGenerator.variables_set=function(Rt){const kt=Tt.pythonGenerator.valueToCode(Rt,"VALUE",Tt.pythonGenerator.ORDER_NONE)||"0";return Tt.pythonGenerator.nameDB_.getName(Rt.getFieldValue("VAR"),vt.NameType$$module$build$src$core$names.VARIABLE)+" = "+kt+`
`},Tt.pythonGenerator.variables_get_dynamic=Tt.pythonGenerator.variables_get,Tt.pythonGenerator.variables_set_dynamic=Tt.pythonGenerator.variables_set,vt.module$build$src$core$utils$string,vt.NameType$$module$build$src$core$names,Tt.pythonGenerator.text=function(Rt){return[Tt.pythonGenerator.quote_(Rt.getFieldValue("TEXT")),Tt.pythonGenerator.ORDER_ATOMIC]},Tt.pythonGenerator.text_multiline=function(Rt){Rt=Tt.pythonGenerator.multiline_quote_(Rt.getFieldValue("TEXT"));const kt=Rt.indexOf("+")!==-1?Tt.pythonGenerator.ORDER_ADDITIVE:Tt.pythonGenerator.ORDER_ATOMIC;return[Rt,kt]};var Et=/^\s*'([^']|\\')*'\s*$/,Ct=function(Rt){return Et.test(Rt)?[Rt,Tt.pythonGenerator.ORDER_ATOMIC]:["str("+Rt+")",Tt.pythonGenerator.ORDER_FUNCTION_CALL]};return Tt.pythonGenerator.text_join=function(Rt){switch(Rt.itemCount_){case 0:return["''",Tt.pythonGenerator.ORDER_ATOMIC];case 1:return Rt=Tt.pythonGenerator.valueToCode(Rt,"ADD0",Tt.pythonGenerator.ORDER_NONE)||"''",Ct(Rt);case 2:var kt=Tt.pythonGenerator.valueToCode(Rt,"ADD0",Tt.pythonGenerator.ORDER_NONE)||"''";return Rt=Tt.pythonGenerator.valueToCode(Rt,"ADD1",Tt.pythonGenerator.ORDER_NONE)||"''",[Ct(kt)[0]+" + "+Ct(Rt)[0],Tt.pythonGenerator.ORDER_ADDITIVE];default:kt=[];for(let Dt=0;Dt<Rt.itemCount_;Dt++)kt[Dt]=Tt.pythonGenerator.valueToCode(Rt,"ADD"+Dt,Tt.pythonGenerator.ORDER_NONE)||"''";return Rt=Tt.pythonGenerator.nameDB_.getDistinctName("x",vt.NameType$$module$build$src$core$names.VARIABLE),["''.join([str("+Rt+") for "+Rt+" in ["+kt.join(", ")+"]])",Tt.pythonGenerator.ORDER_FUNCTION_CALL]}},Tt.pythonGenerator.text_append=function(Rt){const kt=Tt.pythonGenerator.nameDB_.getName(Rt.getFieldValue("VAR"),vt.NameType$$module$build$src$core$names.VARIABLE);return Rt=Tt.pythonGenerator.valueToCode(Rt,"TEXT",Tt.pythonGenerator.ORDER_NONE)||"''",kt+" = str("+kt+") + "+Ct(Rt)[0]+`
`},Tt.pythonGenerator.text_length=function(Rt){return["len("+(Tt.pythonGenerator.valueToCode(Rt,"VALUE",Tt.pythonGenerator.ORDER_NONE)||"''")+")",Tt.pythonGenerator.ORDER_FUNCTION_CALL]},Tt.pythonGenerator.text_isEmpty=function(Rt){return["not len("+(Tt.pythonGenerator.valueToCode(Rt,"VALUE",Tt.pythonGenerator.ORDER_NONE)||"''")+")",Tt.pythonGenerator.ORDER_LOGICAL_NOT]},Tt.pythonGenerator.text_indexOf=function(Rt){var kt=Rt.getFieldValue("END")==="FIRST"?"find":"rfind";const Dt=Tt.pythonGenerator.valueToCode(Rt,"FIND",Tt.pythonGenerator.ORDER_NONE)||"''";return kt=(Tt.pythonGenerator.valueToCode(Rt,"VALUE",Tt.pythonGenerator.ORDER_MEMBER)||"''")+"."+kt+"("+Dt+")",Rt.workspace.options.oneBasedIndex?[kt+" + 1",Tt.pythonGenerator.ORDER_ADDITIVE]:[kt,Tt.pythonGenerator.ORDER_FUNCTION_CALL]},Tt.pythonGenerator.text_charAt=function(Rt){const kt=Rt.getFieldValue("WHERE")||"FROM_START",Dt=Tt.pythonGenerator.valueToCode(Rt,"VALUE",kt==="RANDOM"?Tt.pythonGenerator.ORDER_NONE:Tt.pythonGenerator.ORDER_MEMBER)||"''";switch(kt){case"FIRST":return[Dt+"[0]",Tt.pythonGenerator.ORDER_MEMBER];case"LAST":return[Dt+"[-1]",Tt.pythonGenerator.ORDER_MEMBER];case"FROM_START":return Rt=Tt.pythonGenerator.getAdjustedInt(Rt,"AT"),[Dt+"["+Rt+"]",Tt.pythonGenerator.ORDER_MEMBER];case"FROM_END":return Rt=Tt.pythonGenerator.getAdjustedInt(Rt,"AT",1,!0),[Dt+"["+Rt+"]",Tt.pythonGenerator.ORDER_MEMBER];case"RANDOM":return Tt.pythonGenerator.definitions_.import_random="import random",[Tt.pythonGenerator.provideFunction_("text_random_letter",`
def ${Tt.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(text):
  x = int(random.random() * len(text))
  return text[x]
`)+"("+Dt+")",Tt.pythonGenerator.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},Tt.pythonGenerator.text_getSubstring=function(Rt){var kt=Rt.getFieldValue("WHERE1");const Dt=Rt.getFieldValue("WHERE2"),Bt=Tt.pythonGenerator.valueToCode(Rt,"STRING",Tt.pythonGenerator.ORDER_MEMBER)||"''";switch(kt){case"FROM_START":kt=Tt.pythonGenerator.getAdjustedInt(Rt,"AT1"),kt===0&&(kt="");break;case"FROM_END":kt=Tt.pythonGenerator.getAdjustedInt(Rt,"AT1",1,!0);break;case"FIRST":kt="";break;default:throw Error("Unhandled option (text_getSubstring)")}switch(Dt){case"FROM_START":Rt=Tt.pythonGenerator.getAdjustedInt(Rt,"AT2",1);break;case"FROM_END":Rt=Tt.pythonGenerator.getAdjustedInt(Rt,"AT2",0,!0),vt.module$build$src$core$utils$string.isNumber(String(Rt))?Rt===0&&(Rt=""):(Tt.pythonGenerator.definitions_.import_sys="import sys",Rt+=" or sys.maxsize");break;case"LAST":Rt="";break;default:throw Error("Unhandled option (text_getSubstring)")}return[Bt+"["+kt+" : "+Rt+"]",Tt.pythonGenerator.ORDER_MEMBER]},Tt.pythonGenerator.text_changeCase=function(Rt){const kt={UPPERCASE:".upper()",LOWERCASE:".lower()",TITLECASE:".title()"}[Rt.getFieldValue("CASE")];return[(Tt.pythonGenerator.valueToCode(Rt,"TEXT",Tt.pythonGenerator.ORDER_MEMBER)||"''")+kt,Tt.pythonGenerator.ORDER_FUNCTION_CALL]},Tt.pythonGenerator.text_trim=function(Rt){const kt={LEFT:".lstrip()",RIGHT:".rstrip()",BOTH:".strip()"}[Rt.getFieldValue("MODE")];return[(Tt.pythonGenerator.valueToCode(Rt,"TEXT",Tt.pythonGenerator.ORDER_MEMBER)||"''")+kt,Tt.pythonGenerator.ORDER_FUNCTION_CALL]},Tt.pythonGenerator.text_print=function(Rt){return"print("+(Tt.pythonGenerator.valueToCode(Rt,"TEXT",Tt.pythonGenerator.ORDER_NONE)||"''")+`)
`},Tt.pythonGenerator.text_prompt_ext=function(Rt){var kt=Tt.pythonGenerator.provideFunction_("text_prompt",`
def ${Tt.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(msg):
  try:
    return raw_input(msg)
  except NameError:
    return input(msg)
`);let Dt;return Dt=Rt.getField("TEXT")?Tt.pythonGenerator.quote_(Rt.getFieldValue("TEXT")):Tt.pythonGenerator.valueToCode(Rt,"TEXT",Tt.pythonGenerator.ORDER_NONE)||"''",kt=kt+"("+Dt+")",Rt.getFieldValue("TYPE")==="NUMBER"&&(kt="float("+kt+")"),[kt,Tt.pythonGenerator.ORDER_FUNCTION_CALL]},Tt.pythonGenerator.text_prompt=Tt.pythonGenerator.text_prompt_ext,Tt.pythonGenerator.text_count=function(Rt){const kt=Tt.pythonGenerator.valueToCode(Rt,"TEXT",Tt.pythonGenerator.ORDER_MEMBER)||"''";return Rt=Tt.pythonGenerator.valueToCode(Rt,"SUB",Tt.pythonGenerator.ORDER_NONE)||"''",[kt+".count("+Rt+")",Tt.pythonGenerator.ORDER_FUNCTION_CALL]},Tt.pythonGenerator.text_replace=function(Rt){const kt=Tt.pythonGenerator.valueToCode(Rt,"TEXT",Tt.pythonGenerator.ORDER_MEMBER)||"''",Dt=Tt.pythonGenerator.valueToCode(Rt,"FROM",Tt.pythonGenerator.ORDER_NONE)||"''";return Rt=Tt.pythonGenerator.valueToCode(Rt,"TO",Tt.pythonGenerator.ORDER_NONE)||"''",[kt+".replace("+Dt+", "+Rt+")",Tt.pythonGenerator.ORDER_MEMBER]},Tt.pythonGenerator.text_reverse=function(Rt){return[(Tt.pythonGenerator.valueToCode(Rt,"TEXT",Tt.pythonGenerator.ORDER_MEMBER)||"''")+"[::-1]",Tt.pythonGenerator.ORDER_MEMBER]},vt.module$build$src$core$variables,vt.NameType$$module$build$src$core$names,Tt.pythonGenerator.procedures_defreturn=function(Rt){var kt=[],Dt=Rt.workspace,Bt=vt.module$build$src$core$variables.allUsedVarModels(Dt)||[];for(let dn=0,pn;pn=Bt[dn];dn++){var Ft=pn.name;Rt.getVars().indexOf(Ft)===-1&&kt.push(Tt.pythonGenerator.nameDB_.getName(Ft,vt.NameType$$module$build$src$core$names.VARIABLE))}for(Dt=vt.module$build$src$core$variables.allDeveloperVariables(Dt),Bt=0;Bt<Dt.length;Bt++)kt.push(Tt.pythonGenerator.nameDB_.getName(Dt[Bt],vt.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));Dt=kt.length?Tt.pythonGenerator.INDENT+"global "+kt.join(", ")+`
`:"",kt=Tt.pythonGenerator.nameDB_.getName(Rt.getFieldValue("NAME"),vt.NameType$$module$build$src$core$names.PROCEDURE),Bt="",Tt.pythonGenerator.STATEMENT_PREFIX&&(Bt+=Tt.pythonGenerator.injectId(Tt.pythonGenerator.STATEMENT_PREFIX,Rt)),Tt.pythonGenerator.STATEMENT_SUFFIX&&(Bt+=Tt.pythonGenerator.injectId(Tt.pythonGenerator.STATEMENT_SUFFIX,Rt)),Bt&&(Bt=Tt.pythonGenerator.prefixLines(Bt,Tt.pythonGenerator.INDENT)),Ft="",Tt.pythonGenerator.INFINITE_LOOP_TRAP&&(Ft=Tt.pythonGenerator.prefixLines(Tt.pythonGenerator.injectId(Tt.pythonGenerator.INFINITE_LOOP_TRAP,Rt),Tt.pythonGenerator.INDENT));let Ut=Tt.pythonGenerator.statementToCode(Rt,"STACK"),Zt=Tt.pythonGenerator.valueToCode(Rt,"RETURN",Tt.pythonGenerator.ORDER_NONE)||"",Kt="";Ut&&Zt&&(Kt=Bt),Zt?Zt=Tt.pythonGenerator.INDENT+"return "+Zt+`
`:Ut||(Ut=Tt.pythonGenerator.PASS);const ln=[],hn=Rt.getVars();for(let dn=0;dn<hn.length;dn++)ln[dn]=Tt.pythonGenerator.nameDB_.getName(hn[dn],vt.NameType$$module$build$src$core$names.VARIABLE);return Dt="def "+kt+"("+ln.join(", ")+`):
`+Dt+Bt+Ft+Ut+Kt+Zt,Dt=Tt.pythonGenerator.scrub_(Rt,Dt),Tt.pythonGenerator.definitions_["%"+kt]=Dt,null},Tt.pythonGenerator.procedures_defnoreturn=Tt.pythonGenerator.procedures_defreturn,Tt.pythonGenerator.procedures_callreturn=function(Rt){const kt=Tt.pythonGenerator.nameDB_.getName(Rt.getFieldValue("NAME"),vt.NameType$$module$build$src$core$names.PROCEDURE),Dt=[],Bt=Rt.getVars();for(let Ft=0;Ft<Bt.length;Ft++)Dt[Ft]=Tt.pythonGenerator.valueToCode(Rt,"ARG"+Ft,Tt.pythonGenerator.ORDER_NONE)||"None";return[kt+"("+Dt.join(", ")+")",Tt.pythonGenerator.ORDER_FUNCTION_CALL]},Tt.pythonGenerator.procedures_callnoreturn=function(Rt){return Tt.pythonGenerator.procedures_callreturn(Rt)[0]+`
`},Tt.pythonGenerator.procedures_ifreturn=function(Rt){let kt="if "+(Tt.pythonGenerator.valueToCode(Rt,"CONDITION",Tt.pythonGenerator.ORDER_NONE)||"False")+`:
`;return Tt.pythonGenerator.STATEMENT_SUFFIX&&(kt+=Tt.pythonGenerator.prefixLines(Tt.pythonGenerator.injectId(Tt.pythonGenerator.STATEMENT_SUFFIX,Rt),Tt.pythonGenerator.INDENT)),Rt.hasReturnValue_?(Rt=Tt.pythonGenerator.valueToCode(Rt,"VALUE",Tt.pythonGenerator.ORDER_NONE)||"None",kt+=Tt.pythonGenerator.INDENT+"return "+Rt+`
`):kt+=Tt.pythonGenerator.INDENT+`return
`,kt},vt.NameType$$module$build$src$core$names,Tt.pythonGenerator.addReservedWords("math,random,Number"),Tt.pythonGenerator.math_number=function(Rt){Rt=Number(Rt.getFieldValue("NUM"));let kt;return Rt===1/0?(Rt='float("inf")',kt=Tt.pythonGenerator.ORDER_FUNCTION_CALL):Rt===-1/0?(Rt='-float("inf")',kt=Tt.pythonGenerator.ORDER_UNARY_SIGN):kt=0>Rt?Tt.pythonGenerator.ORDER_UNARY_SIGN:Tt.pythonGenerator.ORDER_ATOMIC,[Rt,kt]},Tt.pythonGenerator.math_arithmetic=function(Rt){var kt={ADD:[" + ",Tt.pythonGenerator.ORDER_ADDITIVE],MINUS:[" - ",Tt.pythonGenerator.ORDER_ADDITIVE],MULTIPLY:[" * ",Tt.pythonGenerator.ORDER_MULTIPLICATIVE],DIVIDE:[" / ",Tt.pythonGenerator.ORDER_MULTIPLICATIVE],POWER:[" ** ",Tt.pythonGenerator.ORDER_EXPONENTIATION]}[Rt.getFieldValue("OP")];const Dt=kt[0];kt=kt[1];const Bt=Tt.pythonGenerator.valueToCode(Rt,"A",kt)||"0";return Rt=Tt.pythonGenerator.valueToCode(Rt,"B",kt)||"0",[Bt+Dt+Rt,kt]},Tt.pythonGenerator.math_single=function(Rt){const kt=Rt.getFieldValue("OP");let Dt;if(kt==="NEG")return Dt=Tt.pythonGenerator.valueToCode(Rt,"NUM",Tt.pythonGenerator.ORDER_UNARY_SIGN)||"0",["-"+Dt,Tt.pythonGenerator.ORDER_UNARY_SIGN];switch(Tt.pythonGenerator.definitions_.import_math="import math",Rt=kt==="SIN"||kt==="COS"||kt==="TAN"?Tt.pythonGenerator.valueToCode(Rt,"NUM",Tt.pythonGenerator.ORDER_MULTIPLICATIVE)||"0":Tt.pythonGenerator.valueToCode(Rt,"NUM",Tt.pythonGenerator.ORDER_NONE)||"0",kt){case"ABS":Dt="math.fabs("+Rt+")";break;case"ROOT":Dt="math.sqrt("+Rt+")";break;case"LN":Dt="math.log("+Rt+")";break;case"LOG10":Dt="math.log10("+Rt+")";break;case"EXP":Dt="math.exp("+Rt+")";break;case"POW10":Dt="math.pow(10,"+Rt+")";break;case"ROUND":Dt="round("+Rt+")";break;case"ROUNDUP":Dt="math.ceil("+Rt+")";break;case"ROUNDDOWN":Dt="math.floor("+Rt+")";break;case"SIN":Dt="math.sin("+Rt+" / 180.0 * math.pi)";break;case"COS":Dt="math.cos("+Rt+" / 180.0 * math.pi)";break;case"TAN":Dt="math.tan("+Rt+" / 180.0 * math.pi)"}if(Dt)return[Dt,Tt.pythonGenerator.ORDER_FUNCTION_CALL];switch(kt){case"ASIN":Dt="math.asin("+Rt+") / math.pi * 180";break;case"ACOS":Dt="math.acos("+Rt+") / math.pi * 180";break;case"ATAN":Dt="math.atan("+Rt+") / math.pi * 180";break;default:throw Error("Unknown math operator: "+kt)}return[Dt,Tt.pythonGenerator.ORDER_MULTIPLICATIVE]},Tt.pythonGenerator.math_constant=function(Rt){const kt={PI:["math.pi",Tt.pythonGenerator.ORDER_MEMBER],E:["math.e",Tt.pythonGenerator.ORDER_MEMBER],GOLDEN_RATIO:["(1 + math.sqrt(5)) / 2",Tt.pythonGenerator.ORDER_MULTIPLICATIVE],SQRT2:["math.sqrt(2)",Tt.pythonGenerator.ORDER_MEMBER],SQRT1_2:["math.sqrt(1.0 / 2)",Tt.pythonGenerator.ORDER_MEMBER],INFINITY:["float('inf')",Tt.pythonGenerator.ORDER_ATOMIC]};return Rt=Rt.getFieldValue("CONSTANT"),Rt!=="INFINITY"&&(Tt.pythonGenerator.definitions_.import_math="import math"),kt[Rt]},Tt.pythonGenerator.math_number_property=function(Rt){var kt={EVEN:[" % 2 == 0",Tt.pythonGenerator.ORDER_MULTIPLICATIVE,Tt.pythonGenerator.ORDER_RELATIONAL],ODD:[" % 2 == 1",Tt.pythonGenerator.ORDER_MULTIPLICATIVE,Tt.pythonGenerator.ORDER_RELATIONAL],WHOLE:[" % 1 == 0",Tt.pythonGenerator.ORDER_MULTIPLICATIVE,Tt.pythonGenerator.ORDER_RELATIONAL],POSITIVE:[" > 0",Tt.pythonGenerator.ORDER_RELATIONAL,Tt.pythonGenerator.ORDER_RELATIONAL],NEGATIVE:[" < 0",Tt.pythonGenerator.ORDER_RELATIONAL,Tt.pythonGenerator.ORDER_RELATIONAL],DIVISIBLE_BY:[null,Tt.pythonGenerator.ORDER_MULTIPLICATIVE,Tt.pythonGenerator.ORDER_RELATIONAL],PRIME:[null,Tt.pythonGenerator.ORDER_NONE,Tt.pythonGenerator.ORDER_FUNCTION_CALL]};const Dt=Rt.getFieldValue("PROPERTY"),[Bt,Ft,Ut]=kt[Dt];if(kt=Tt.pythonGenerator.valueToCode(Rt,"NUMBER_TO_CHECK",Ft)||"0",Dt==="PRIME")Tt.pythonGenerator.definitions_.import_math="import math",Tt.pythonGenerator.definitions_.from_numbers_import_Number="from numbers import Number",Rt=Tt.pythonGenerator.provideFunction_("math_isPrime",`
def ${Tt.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(n):
  # https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  # If n is not a number but a string, try parsing it.
  if not isinstance(n, Number):
    try:
      n = float(n)
    except:
      return False
  if n == 2 or n == 3:
    return True
  # False if n is negative, is 1, or not whole, or if n is divisible by 2 or 3.
  if n <= 1 or n % 1 != 0 or n % 2 == 0 or n % 3 == 0:
    return False
  # Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for x in range(6, int(math.sqrt(n)) + 2, 6):
    if n % (x - 1) == 0 or n % (x + 1) == 0:
      return False
  return True
`)+"("+kt+")";else if(Dt==="DIVISIBLE_BY"){if(Rt=Tt.pythonGenerator.valueToCode(Rt,"DIVISOR",Tt.pythonGenerator.ORDER_MULTIPLICATIVE)||"0",Rt==="0")return["False",Tt.pythonGenerator.ORDER_ATOMIC];Rt=kt+" % "+Rt+" == 0"}else Rt=kt+Bt;return[Rt,Ut]},Tt.pythonGenerator.math_change=function(Rt){Tt.pythonGenerator.definitions_.from_numbers_import_Number="from numbers import Number";const kt=Tt.pythonGenerator.valueToCode(Rt,"DELTA",Tt.pythonGenerator.ORDER_ADDITIVE)||"0";return Rt=Tt.pythonGenerator.nameDB_.getName(Rt.getFieldValue("VAR"),vt.NameType$$module$build$src$core$names.VARIABLE),Rt+" = ("+Rt+" if isinstance("+Rt+", Number) else 0) + "+kt+`
`},Tt.pythonGenerator.math_round=Tt.pythonGenerator.math_single,Tt.pythonGenerator.math_trig=Tt.pythonGenerator.math_single,Tt.pythonGenerator.math_on_list=function(Rt){var kt=Rt.getFieldValue("OP");switch(Rt=Tt.pythonGenerator.valueToCode(Rt,"LIST",Tt.pythonGenerator.ORDER_NONE)||"[]",kt){case"SUM":kt="sum("+Rt+")";break;case"MIN":kt="min("+Rt+")";break;case"MAX":kt="max("+Rt+")";break;case"AVERAGE":Tt.pythonGenerator.definitions_.from_numbers_import_Number="from numbers import Number",kt=Tt.pythonGenerator.provideFunction_("math_mean",`
def ${Tt.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(myList):
  localList = [e for e in myList if isinstance(e, Number)]
  if not localList: return
  return float(sum(localList)) / len(localList)
`)+"("+Rt+")";break;case"MEDIAN":Tt.pythonGenerator.definitions_.from_numbers_import_Number="from numbers import Number",kt=Tt.pythonGenerator.provideFunction_("math_median",`
def ${Tt.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(myList):
  localList = sorted([e for e in myList if isinstance(e, Number)])
  if not localList: return
  if len(localList) % 2 == 0:
    return (localList[len(localList) // 2 - 1] + localList[len(localList) // 2]) / 2.0
  else:
    return localList[(len(localList) - 1) // 2]
`)+"("+Rt+")";break;case"MODE":kt=Tt.pythonGenerator.provideFunction_("math_modes",`
def ${Tt.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(some_list):
  modes = []
  # Using a lists of [item, count] to keep count rather than dict
  # to avoid "unhashable" errors when the counted item is itself a list or dict.
  counts = []
  maxCount = 1
  for item in some_list:
    found = False
    for count in counts:
      if count[0] == item:
        count[1] += 1
        maxCount = max(maxCount, count[1])
        found = True
    if not found:
      counts.append([item, 1])
  for counted_item, item_count in counts:
    if item_count == maxCount:
      modes.append(counted_item)
  return modes
`)+"("+Rt+")";break;case"STD_DEV":Tt.pythonGenerator.definitions_.import_math="import math",kt=Tt.pythonGenerator.provideFunction_("math_standard_deviation",`
def ${Tt.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(numbers):
  n = len(numbers)
  if n == 0: return
  mean = float(sum(numbers)) / n
  variance = sum((x - mean) ** 2 for x in numbers) / n
  return math.sqrt(variance)
`)+"("+Rt+")";break;case"RANDOM":Tt.pythonGenerator.definitions_.import_random="import random",kt="random.choice("+Rt+")";break;default:throw Error("Unknown operator: "+kt)}return[kt,Tt.pythonGenerator.ORDER_FUNCTION_CALL]},Tt.pythonGenerator.math_modulo=function(Rt){const kt=Tt.pythonGenerator.valueToCode(Rt,"DIVIDEND",Tt.pythonGenerator.ORDER_MULTIPLICATIVE)||"0";return Rt=Tt.pythonGenerator.valueToCode(Rt,"DIVISOR",Tt.pythonGenerator.ORDER_MULTIPLICATIVE)||"0",[kt+" % "+Rt,Tt.pythonGenerator.ORDER_MULTIPLICATIVE]},Tt.pythonGenerator.math_constrain=function(Rt){const kt=Tt.pythonGenerator.valueToCode(Rt,"VALUE",Tt.pythonGenerator.ORDER_NONE)||"0",Dt=Tt.pythonGenerator.valueToCode(Rt,"LOW",Tt.pythonGenerator.ORDER_NONE)||"0";return Rt=Tt.pythonGenerator.valueToCode(Rt,"HIGH",Tt.pythonGenerator.ORDER_NONE)||"float('inf')",["min(max("+kt+", "+Dt+"), "+Rt+")",Tt.pythonGenerator.ORDER_FUNCTION_CALL]},Tt.pythonGenerator.math_random_int=function(Rt){Tt.pythonGenerator.definitions_.import_random="import random";const kt=Tt.pythonGenerator.valueToCode(Rt,"FROM",Tt.pythonGenerator.ORDER_NONE)||"0";return Rt=Tt.pythonGenerator.valueToCode(Rt,"TO",Tt.pythonGenerator.ORDER_NONE)||"0",["random.randint("+kt+", "+Rt+")",Tt.pythonGenerator.ORDER_FUNCTION_CALL]},Tt.pythonGenerator.math_random_float=function(Rt){return Tt.pythonGenerator.definitions_.import_random="import random",["random.random()",Tt.pythonGenerator.ORDER_FUNCTION_CALL]},Tt.pythonGenerator.math_atan2=function(Rt){Tt.pythonGenerator.definitions_.import_math="import math";const kt=Tt.pythonGenerator.valueToCode(Rt,"X",Tt.pythonGenerator.ORDER_NONE)||"0";return["math.atan2("+(Tt.pythonGenerator.valueToCode(Rt,"Y",Tt.pythonGenerator.ORDER_NONE)||"0")+", "+kt+") / math.pi * 180",Tt.pythonGenerator.ORDER_MULTIPLICATIVE]},vt.module$build$src$core$utils$string,vt.NameType$$module$build$src$core$names,Tt.pythonGenerator.controls_repeat_ext=function(Rt){let kt;kt=Rt.getField("TIMES")?String(parseInt(Rt.getFieldValue("TIMES"),10)):Tt.pythonGenerator.valueToCode(Rt,"TIMES",Tt.pythonGenerator.ORDER_NONE)||"0",kt=vt.module$build$src$core$utils$string.isNumber(kt)?parseInt(kt,10):"int("+kt+")";let Dt=Tt.pythonGenerator.statementToCode(Rt,"DO");return Dt=Tt.pythonGenerator.addLoopTrap(Dt,Rt)||Tt.pythonGenerator.PASS,"for "+Tt.pythonGenerator.nameDB_.getDistinctName("count",vt.NameType$$module$build$src$core$names.VARIABLE)+" in range("+kt+`):
`+Dt},Tt.pythonGenerator.controls_repeat=Tt.pythonGenerator.controls_repeat_ext,Tt.pythonGenerator.controls_whileUntil=function(Rt){const kt=Rt.getFieldValue("MODE")==="UNTIL";let Dt=Tt.pythonGenerator.valueToCode(Rt,"BOOL",kt?Tt.pythonGenerator.ORDER_LOGICAL_NOT:Tt.pythonGenerator.ORDER_NONE)||"False",Bt=Tt.pythonGenerator.statementToCode(Rt,"DO");return Bt=Tt.pythonGenerator.addLoopTrap(Bt,Rt)||Tt.pythonGenerator.PASS,kt&&(Dt="not "+Dt),"while "+Dt+`:
`+Bt},Tt.pythonGenerator.controls_for=function(Rt){const kt=Tt.pythonGenerator.nameDB_.getName(Rt.getFieldValue("VAR"),vt.NameType$$module$build$src$core$names.VARIABLE);var Dt=Tt.pythonGenerator.valueToCode(Rt,"FROM",Tt.pythonGenerator.ORDER_NONE)||"0",Bt=Tt.pythonGenerator.valueToCode(Rt,"TO",Tt.pythonGenerator.ORDER_NONE)||"0",Ft=Tt.pythonGenerator.valueToCode(Rt,"BY",Tt.pythonGenerator.ORDER_NONE)||"1";let Ut=Tt.pythonGenerator.statementToCode(Rt,"DO");Ut=Tt.pythonGenerator.addLoopTrap(Ut,Rt)||Tt.pythonGenerator.PASS;let Zt="";const Kt=function(){return Tt.pythonGenerator.provideFunction_("upRange",`
def ${Tt.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(start, stop, step):
  while start <= stop:
    yield start
    start += abs(step)
`)},ln=function(){return Tt.pythonGenerator.provideFunction_("downRange",`
def ${Tt.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(start, stop, step):
  while start >= stop:
    yield start
    start -= abs(step)
`)};if(Rt=function(hn,dn,pn){return"("+hn+" <= "+dn+") and "+Kt()+"("+hn+", "+dn+", "+pn+") or "+ln()+"("+hn+", "+dn+", "+pn+")"},vt.module$build$src$core$utils$string.isNumber(Dt)&&vt.module$build$src$core$utils$string.isNumber(Bt)&&vt.module$build$src$core$utils$string.isNumber(Ft))Dt=Number(Dt),Bt=Number(Bt),Ft=Math.abs(Number(Ft)),Dt%1===0&&Bt%1===0&&Ft%1===0?(Dt<=Bt?(Bt++,Rt=Dt===0&&Ft===1?Bt:Dt+", "+Bt,Ft!==1&&(Rt+=", "+Ft)):(Bt--,Rt=Dt+", "+Bt+", -"+Ft),Rt="range("+Rt+")"):(Rt=Dt<Bt?Kt():ln(),Rt+="("+Dt+", "+Bt+", "+Ft+")");else{const hn=function(dn,pn){return vt.module$build$src$core$utils$string.isNumber(dn)?dn=Number(dn):dn.match(/^\w+$/)||(pn=Tt.pythonGenerator.nameDB_.getDistinctName(kt+pn,vt.NameType$$module$build$src$core$names.VARIABLE),Zt+=pn+" = "+dn+`
`,dn=pn),dn};Dt=hn(Dt,"_start"),Bt=hn(Bt,"_end"),Ft=hn(Ft,"_inc"),typeof Dt=="number"&&typeof Bt=="number"?(Rt=Dt<Bt?Kt():ln(),Rt+="("+Dt+", "+Bt+", "+Ft+")"):Rt=Rt(Dt,Bt,Ft)}return Zt+="for "+kt+" in "+Rt+`:
`+Ut},Tt.pythonGenerator.controls_forEach=function(Rt){const kt=Tt.pythonGenerator.nameDB_.getName(Rt.getFieldValue("VAR"),vt.NameType$$module$build$src$core$names.VARIABLE),Dt=Tt.pythonGenerator.valueToCode(Rt,"LIST",Tt.pythonGenerator.ORDER_RELATIONAL)||"[]";let Bt=Tt.pythonGenerator.statementToCode(Rt,"DO");return Bt=Tt.pythonGenerator.addLoopTrap(Bt,Rt)||Tt.pythonGenerator.PASS,"for "+kt+" in "+Dt+`:
`+Bt},Tt.pythonGenerator.controls_flow_statements=function(Rt){let kt="";if(Tt.pythonGenerator.STATEMENT_PREFIX&&(kt+=Tt.pythonGenerator.injectId(Tt.pythonGenerator.STATEMENT_PREFIX,Rt)),Tt.pythonGenerator.STATEMENT_SUFFIX&&(kt+=Tt.pythonGenerator.injectId(Tt.pythonGenerator.STATEMENT_SUFFIX,Rt)),Tt.pythonGenerator.STATEMENT_PREFIX){const Dt=Rt.getSurroundLoop();Dt&&!Dt.suppressPrefixSuffix&&(kt+=Tt.pythonGenerator.injectId(Tt.pythonGenerator.STATEMENT_PREFIX,Dt))}switch(Rt.getFieldValue("FLOW")){case"BREAK":return kt+`break
`;case"CONTINUE":return kt+`continue
`}throw Error("Unknown flow statement.")},Tt.pythonGenerator.controls_if=function(Rt){let kt=0,Dt="",Bt,Ft;Tt.pythonGenerator.STATEMENT_PREFIX&&(Dt+=Tt.pythonGenerator.injectId(Tt.pythonGenerator.STATEMENT_PREFIX,Rt));do Ft=Tt.pythonGenerator.valueToCode(Rt,"IF"+kt,Tt.pythonGenerator.ORDER_NONE)||"False",Bt=Tt.pythonGenerator.statementToCode(Rt,"DO"+kt)||Tt.pythonGenerator.PASS,Tt.pythonGenerator.STATEMENT_SUFFIX&&(Bt=Tt.pythonGenerator.prefixLines(Tt.pythonGenerator.injectId(Tt.pythonGenerator.STATEMENT_SUFFIX,Rt),Tt.pythonGenerator.INDENT)+Bt),Dt+=(kt===0?"if ":"elif ")+Ft+`:
`+Bt,kt++;while(Rt.getInput("IF"+kt));return(Rt.getInput("ELSE")||Tt.pythonGenerator.STATEMENT_SUFFIX)&&(Bt=Tt.pythonGenerator.statementToCode(Rt,"ELSE")||Tt.pythonGenerator.PASS,Tt.pythonGenerator.STATEMENT_SUFFIX&&(Bt=Tt.pythonGenerator.prefixLines(Tt.pythonGenerator.injectId(Tt.pythonGenerator.STATEMENT_SUFFIX,Rt),Tt.pythonGenerator.INDENT)+Bt),Dt+=`else:
`+Bt),Dt},Tt.pythonGenerator.controls_ifelse=Tt.pythonGenerator.controls_if,Tt.pythonGenerator.logic_compare=function(Rt){const kt={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[Rt.getFieldValue("OP")],Dt=Tt.pythonGenerator.ORDER_RELATIONAL,Bt=Tt.pythonGenerator.valueToCode(Rt,"A",Dt)||"0";return Rt=Tt.pythonGenerator.valueToCode(Rt,"B",Dt)||"0",[Bt+" "+kt+" "+Rt,Dt]},Tt.pythonGenerator.logic_operation=function(Rt){const kt=Rt.getFieldValue("OP")==="AND"?"and":"or",Dt=kt==="and"?Tt.pythonGenerator.ORDER_LOGICAL_AND:Tt.pythonGenerator.ORDER_LOGICAL_OR;let Bt=Tt.pythonGenerator.valueToCode(Rt,"A",Dt);if(Rt=Tt.pythonGenerator.valueToCode(Rt,"B",Dt),Bt||Rt){const Ft=kt==="and"?"True":"False";Bt||(Bt=Ft),Rt||(Rt=Ft)}else Rt=Bt="False";return[Bt+" "+kt+" "+Rt,Dt]},Tt.pythonGenerator.logic_negate=function(Rt){return["not "+(Tt.pythonGenerator.valueToCode(Rt,"BOOL",Tt.pythonGenerator.ORDER_LOGICAL_NOT)||"True"),Tt.pythonGenerator.ORDER_LOGICAL_NOT]},Tt.pythonGenerator.logic_boolean=function(Rt){return[Rt.getFieldValue("BOOL")==="TRUE"?"True":"False",Tt.pythonGenerator.ORDER_ATOMIC]},Tt.pythonGenerator.logic_null=function(Rt){return["None",Tt.pythonGenerator.ORDER_ATOMIC]},Tt.pythonGenerator.logic_ternary=function(Rt){const kt=Tt.pythonGenerator.valueToCode(Rt,"IF",Tt.pythonGenerator.ORDER_CONDITIONAL)||"False",Dt=Tt.pythonGenerator.valueToCode(Rt,"THEN",Tt.pythonGenerator.ORDER_CONDITIONAL)||"None";return Rt=Tt.pythonGenerator.valueToCode(Rt,"ELSE",Tt.pythonGenerator.ORDER_CONDITIONAL)||"None",[Dt+" if "+kt+" else "+Rt,Tt.pythonGenerator.ORDER_CONDITIONAL]},vt.module$build$src$core$utils$string,vt.NameType$$module$build$src$core$names,Tt.pythonGenerator.lists_create_empty=function(Rt){return["[]",Tt.pythonGenerator.ORDER_ATOMIC]},Tt.pythonGenerator.lists_create_with=function(Rt){const kt=Array(Rt.itemCount_);for(let Dt=0;Dt<Rt.itemCount_;Dt++)kt[Dt]=Tt.pythonGenerator.valueToCode(Rt,"ADD"+Dt,Tt.pythonGenerator.ORDER_NONE)||"None";return["["+kt.join(", ")+"]",Tt.pythonGenerator.ORDER_ATOMIC]},Tt.pythonGenerator.lists_repeat=function(Rt){const kt=Tt.pythonGenerator.valueToCode(Rt,"ITEM",Tt.pythonGenerator.ORDER_NONE)||"None";return Rt=Tt.pythonGenerator.valueToCode(Rt,"NUM",Tt.pythonGenerator.ORDER_MULTIPLICATIVE)||"0",["["+kt+"] * "+Rt,Tt.pythonGenerator.ORDER_MULTIPLICATIVE]},Tt.pythonGenerator.lists_length=function(Rt){return["len("+(Tt.pythonGenerator.valueToCode(Rt,"VALUE",Tt.pythonGenerator.ORDER_NONE)||"[]")+")",Tt.pythonGenerator.ORDER_FUNCTION_CALL]},Tt.pythonGenerator.lists_isEmpty=function(Rt){return["not len("+(Tt.pythonGenerator.valueToCode(Rt,"VALUE",Tt.pythonGenerator.ORDER_NONE)||"[]")+")",Tt.pythonGenerator.ORDER_LOGICAL_NOT]},Tt.pythonGenerator.lists_indexOf=function(Rt){const kt=Tt.pythonGenerator.valueToCode(Rt,"FIND",Tt.pythonGenerator.ORDER_NONE)||"[]",Dt=Tt.pythonGenerator.valueToCode(Rt,"VALUE",Tt.pythonGenerator.ORDER_NONE)||"''";let Bt=" -1",Ft="",Ut=" - 1";return Rt.workspace.options.oneBasedIndex&&(Bt=" 0",Ft=" + 1",Ut=""),[(Rt.getFieldValue("END")==="FIRST"?Tt.pythonGenerator.provideFunction_("first_index",`
def ${Tt.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(my_list, elem):
  try: index = my_list.index(elem)${Ft}
  except: index =${Bt}
  return index
`):Tt.pythonGenerator.provideFunction_("last_index",`
def ${Tt.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(my_list, elem):
  try: index = len(my_list) - my_list[::-1].index(elem)${Ut}
  except: index =${Bt}
  return index
`))+"("+Dt+", "+kt+")",Tt.pythonGenerator.ORDER_FUNCTION_CALL]},Tt.pythonGenerator.lists_getIndex=function(Rt){const kt=Rt.getFieldValue("MODE")||"GET",Dt=Rt.getFieldValue("WHERE")||"FROM_START";var Bt=Tt.pythonGenerator.valueToCode(Rt,"VALUE",Dt==="RANDOM"?Tt.pythonGenerator.ORDER_NONE:Tt.pythonGenerator.ORDER_MEMBER)||"[]";switch(Dt){case"FIRST":if(kt==="GET")return[Bt+"[0]",Tt.pythonGenerator.ORDER_MEMBER];if(kt==="GET_REMOVE")return[Bt+".pop(0)",Tt.pythonGenerator.ORDER_FUNCTION_CALL];if(kt==="REMOVE")return Bt+`.pop(0)
`;break;case"LAST":if(kt==="GET")return[Bt+"[-1]",Tt.pythonGenerator.ORDER_MEMBER];if(kt==="GET_REMOVE")return[Bt+".pop()",Tt.pythonGenerator.ORDER_FUNCTION_CALL];if(kt==="REMOVE")return Bt+`.pop()
`;break;case"FROM_START":if(Rt=Tt.pythonGenerator.getAdjustedInt(Rt,"AT"),kt==="GET")return[Bt+"["+Rt+"]",Tt.pythonGenerator.ORDER_MEMBER];if(kt==="GET_REMOVE")return[Bt+".pop("+Rt+")",Tt.pythonGenerator.ORDER_FUNCTION_CALL];if(kt==="REMOVE")return Bt+".pop("+Rt+`)
`;break;case"FROM_END":if(Rt=Tt.pythonGenerator.getAdjustedInt(Rt,"AT",1,!0),kt==="GET")return[Bt+"["+Rt+"]",Tt.pythonGenerator.ORDER_MEMBER];if(kt==="GET_REMOVE")return[Bt+".pop("+Rt+")",Tt.pythonGenerator.ORDER_FUNCTION_CALL];if(kt==="REMOVE")return Bt+".pop("+Rt+`)
`;break;case"RANDOM":if(Tt.pythonGenerator.definitions_.import_random="import random",kt==="GET")return["random.choice("+Bt+")",Tt.pythonGenerator.ORDER_FUNCTION_CALL];if(Bt=Tt.pythonGenerator.provideFunction_("lists_remove_random_item",`
def ${Tt.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(myList):
  x = int(random.random() * len(myList))
  return myList.pop(x)
`)+"("+Bt+")",kt==="GET_REMOVE")return[Bt,Tt.pythonGenerator.ORDER_FUNCTION_CALL];if(kt==="REMOVE")return Bt+`
`}throw Error("Unhandled combination (lists_getIndex).")},Tt.pythonGenerator.lists_setIndex=function(Rt){let kt=Tt.pythonGenerator.valueToCode(Rt,"LIST",Tt.pythonGenerator.ORDER_MEMBER)||"[]";const Dt=Rt.getFieldValue("MODE")||"GET";var Bt=Rt.getFieldValue("WHERE")||"FROM_START";const Ft=Tt.pythonGenerator.valueToCode(Rt,"TO",Tt.pythonGenerator.ORDER_NONE)||"None";switch(Bt){case"FIRST":if(Dt==="SET")return kt+"[0] = "+Ft+`
`;if(Dt==="INSERT")return kt+".insert(0, "+Ft+`)
`;break;case"LAST":if(Dt==="SET")return kt+"[-1] = "+Ft+`
`;if(Dt==="INSERT")return kt+".append("+Ft+`)
`;break;case"FROM_START":if(Rt=Tt.pythonGenerator.getAdjustedInt(Rt,"AT"),Dt==="SET")return kt+"["+Rt+"] = "+Ft+`
`;if(Dt==="INSERT")return kt+".insert("+Rt+", "+Ft+`)
`;break;case"FROM_END":if(Rt=Tt.pythonGenerator.getAdjustedInt(Rt,"AT",1,!0),Dt==="SET")return kt+"["+Rt+"] = "+Ft+`
`;if(Dt==="INSERT")return kt+".insert("+Rt+", "+Ft+`)
`;break;case"RANDOM":if(Tt.pythonGenerator.definitions_.import_random="import random",kt.match(/^\w+$/)?Rt="":(Rt=Tt.pythonGenerator.nameDB_.getDistinctName("tmp_list",vt.NameType$$module$build$src$core$names.VARIABLE),Bt=Rt+" = "+kt+`
`,kt=Rt,Rt=Bt),Bt=Tt.pythonGenerator.nameDB_.getDistinctName("tmp_x",vt.NameType$$module$build$src$core$names.VARIABLE),Rt+=Bt+" = int(random.random() * len("+kt+`))
`,Dt==="SET")return Rt+(kt+"["+Bt+"] = "+Ft+`
`);if(Dt==="INSERT")return Rt+(kt+".insert("+Bt+", "+Ft+`)
`)}throw Error("Unhandled combination (lists_setIndex).")},Tt.pythonGenerator.lists_getSublist=function(Rt){const kt=Tt.pythonGenerator.valueToCode(Rt,"LIST",Tt.pythonGenerator.ORDER_MEMBER)||"[]";var Dt=Rt.getFieldValue("WHERE1");const Bt=Rt.getFieldValue("WHERE2");switch(Dt){case"FROM_START":Dt=Tt.pythonGenerator.getAdjustedInt(Rt,"AT1"),Dt===0&&(Dt="");break;case"FROM_END":Dt=Tt.pythonGenerator.getAdjustedInt(Rt,"AT1",1,!0);break;case"FIRST":Dt="";break;default:throw Error("Unhandled option (lists_getSublist)")}switch(Bt){case"FROM_START":Rt=Tt.pythonGenerator.getAdjustedInt(Rt,"AT2",1);break;case"FROM_END":Rt=Tt.pythonGenerator.getAdjustedInt(Rt,"AT2",0,!0),vt.module$build$src$core$utils$string.isNumber(String(Rt))?Rt===0&&(Rt=""):(Tt.pythonGenerator.definitions_.import_sys="import sys",Rt+=" or sys.maxsize");break;case"LAST":Rt="";break;default:throw Error("Unhandled option (lists_getSublist)")}return[kt+"["+Dt+" : "+Rt+"]",Tt.pythonGenerator.ORDER_MEMBER]},Tt.pythonGenerator.lists_sort=function(Rt){const kt=Tt.pythonGenerator.valueToCode(Rt,"LIST",Tt.pythonGenerator.ORDER_NONE)||"[]",Dt=Rt.getFieldValue("TYPE");return Rt=Rt.getFieldValue("DIRECTION")==="1"?"False":"True",[Tt.pythonGenerator.provideFunction_("lists_sort",`
def ${Tt.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(my_list, type, reverse):
  def try_float(s):
    try:
      return float(s)
    except:
      return 0
  key_funcs = {
    "NUMERIC": try_float,
    "TEXT": str,
    "IGNORE_CASE": lambda s: str(s).lower()
  }
  key_func = key_funcs[type]
  list_cpy = list(my_list)
  return sorted(list_cpy, key=key_func, reverse=reverse)
`)+"("+kt+', "'+Dt+'", '+Rt+")",Tt.pythonGenerator.ORDER_FUNCTION_CALL]},Tt.pythonGenerator.lists_split=function(Rt){var kt=Rt.getFieldValue("MODE");if(kt==="SPLIT")kt=Tt.pythonGenerator.valueToCode(Rt,"INPUT",Tt.pythonGenerator.ORDER_MEMBER)||"''",Rt=Tt.pythonGenerator.valueToCode(Rt,"DELIM",Tt.pythonGenerator.ORDER_NONE),Rt=kt+".split("+Rt+")";else if(kt==="JOIN")kt=Tt.pythonGenerator.valueToCode(Rt,"INPUT",Tt.pythonGenerator.ORDER_NONE)||"[]",Rt=(Tt.pythonGenerator.valueToCode(Rt,"DELIM",Tt.pythonGenerator.ORDER_MEMBER)||"''")+".join("+kt+")";else throw Error("Unknown mode: "+kt);return[Rt,Tt.pythonGenerator.ORDER_FUNCTION_CALL]},Tt.pythonGenerator.lists_reverse=function(Rt){return["list(reversed("+(Tt.pythonGenerator.valueToCode(Rt,"LIST",Tt.pythonGenerator.ORDER_NONE)||"[]")+"))",Tt.pythonGenerator.ORDER_FUNCTION_CALL]},Tt.pythonGenerator.colour_picker=function(Rt){return[Tt.pythonGenerator.quote_(Rt.getFieldValue("COLOUR")),Tt.pythonGenerator.ORDER_ATOMIC]},Tt.pythonGenerator.colour_random=function(Rt){return Tt.pythonGenerator.definitions_.import_random="import random",["'#%06x' % random.randint(0, 2**24 - 1)",Tt.pythonGenerator.ORDER_FUNCTION_CALL]},Tt.pythonGenerator.colour_rgb=function(Rt){const kt=Tt.pythonGenerator.provideFunction_("colour_rgb",`
def ${Tt.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(r, g, b):
  r = round(min(100, max(0, r)) * 2.55)
  g = round(min(100, max(0, g)) * 2.55)
  b = round(min(100, max(0, b)) * 2.55)
  return '#%02x%02x%02x' % (r, g, b)
`),Dt=Tt.pythonGenerator.valueToCode(Rt,"RED",Tt.pythonGenerator.ORDER_NONE)||0,Bt=Tt.pythonGenerator.valueToCode(Rt,"GREEN",Tt.pythonGenerator.ORDER_NONE)||0;return Rt=Tt.pythonGenerator.valueToCode(Rt,"BLUE",Tt.pythonGenerator.ORDER_NONE)||0,[kt+"("+Dt+", "+Bt+", "+Rt+")",Tt.pythonGenerator.ORDER_FUNCTION_CALL]},Tt.pythonGenerator.colour_blend=function(Rt){const kt=Tt.pythonGenerator.provideFunction_("colour_blend",`
def ${Tt.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(colour1, colour2, ratio):
  r1, r2 = int(colour1[1:3], 16), int(colour2[1:3], 16)
  g1, g2 = int(colour1[3:5], 16), int(colour2[3:5], 16)
  b1, b2 = int(colour1[5:7], 16), int(colour2[5:7], 16)
  ratio = min(1, max(0, ratio))
  r = round(r1 * (1 - ratio) + r2 * ratio)
  g = round(g1 * (1 - ratio) + g2 * ratio)
  b = round(b1 * (1 - ratio) + b2 * ratio)
  return '#%02x%02x%02x' % (r, g, b)
`),Dt=Tt.pythonGenerator.valueToCode(Rt,"COLOUR1",Tt.pythonGenerator.ORDER_NONE)||"'#000000'",Bt=Tt.pythonGenerator.valueToCode(Rt,"COLOUR2",Tt.pythonGenerator.ORDER_NONE)||"'#000000'";return Rt=Tt.pythonGenerator.valueToCode(Rt,"RATIO",Tt.pythonGenerator.ORDER_NONE)||0,[kt+"("+Dt+", "+Bt+", "+Rt+")",Tt.pythonGenerator.ORDER_FUNCTION_CALL]},Tt.__namespace__=vt,Tt})}(python_compressed)),python_compressed.exports}(function(ft,lt){(function(dt,vt){ft.exports=vt(requireCoreBrowser(),requirePython_compressed())})(commonjsGlobal,function(dt,vt){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return vt})})(python$1);var pythonExports=python$1.exports;function debounce$1(ft,lt){var dt=null,vt=null,Tt=function(){for(var Ct=[],Rt=0;Rt<arguments.length;Rt++)Ct[Rt]=arguments[Rt];vt=function(){dt=null,ft.apply(void 0,Ct)},clearTimeout(dt),dt=setTimeout(vt,lt)},Et=function(){dt!==null&&(clearTimeout(dt),vt())};return[Tt,Et]}var __assign$1=globalThis&&globalThis.__assign||function(){return __assign$1=Object.assign||function(ft){for(var lt,dt=1,vt=arguments.length;dt<vt;dt++){lt=arguments[dt];for(var Tt in lt)Object.prototype.hasOwnProperty.call(lt,Tt)&&(ft[Tt]=lt[Tt])}return ft},__assign$1.apply(this,arguments)};function importFromXml(ft,lt,dt){try{return Blockly.Xml.domToWorkspace(Blockly.Xml.textToDom(ft),lt),!0}catch(vt){return dt&&dt(vt),!1}}var useBlocklyWorkspace=function(ft){var lt=ft.ref,dt=ft.initialXml,vt=ft.toolboxConfiguration,Tt=ft.workspaceConfiguration,Et=ft.onWorkspaceChange,Ct=ft.onImportXmlError,Rt=ft.onInject,kt=ft.onDispose,Dt=React.useState(null),Bt=Dt[0],Ft=Dt[1],Ut=React.useState(dt),Zt=Ut[0],Kt=Ut[1],ln=React.useState(!1),hn=ln[0],dn=ln[1],pn=React.useState(!1),mn=pn[0],On=pn[1],bn=React.useRef(Tt);React.useEffect(function(){bn.current=Tt},[Tt]);var En=React.useRef(vt);React.useEffect(function(){En.current=vt,vt&&Bt&&Bt.updateToolbox(vt)},[vt,Bt]);var An=React.useRef(Rt),Tn=React.useRef(kt);React.useEffect(function(){An.current=Rt},[Rt]),React.useEffect(function(){Tn.current=kt},[kt]);var In=React.useCallback(function(Rn){Et&&Et(Rn)},[Et]);return React.useEffect(function(){if(lt.current){var Rn=Blockly.inject(lt.current,__assign$1(__assign$1({},bn.current),{toolbox:En.current}));Ft(Rn),dn(!1),On(!1),An.current&&An.current(Rn);var Dn=Tn.current;return function(){Rn.dispose(),Dn&&Dn(Rn)}}},[lt]),React.useEffect(function(){Bt&&!mn&&In(Bt)},[In,mn,Bt]),React.useEffect(function(){if(Bt!=null){var Rn=function(){In(Bt)};return Bt.addChangeListener(Rn),function(){Bt.removeChangeListener(Rn)}}},[Bt,In]),React.useEffect(function(){if(Bt!=null){var Rn=debounce$1(function(){var Hn=Blockly.Xml.domToText(Blockly.Xml.workspaceToDom(Bt));Hn!==Zt&&Kt(Hn)},200),Dn=Rn[0],Bn=Rn[1];return Bt.addChangeListener(Dn),function(){Bt.removeChangeListener(Dn),Bn()}}},[Bt,Zt]),React.useEffect(function(){if(Zt&&Bt&&!hn){var Rn=importFromXml(Zt,Bt,Ct);Rn||Kt(null),dn(!0)}},[Zt,Bt,hn,Ct]),{workspace:Bt,xml:Zt}},propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function ft(vt,Tt,Et,Ct,Rt,kt){if(kt!==ReactPropTypesSecret){var Dt=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw Dt.name="Invariant Violation",Dt}}ft.isRequired=ft;function lt(){return ft}var dt={array:ft,bigint:ft,bool:ft,func:ft,number:ft,object:ft,string:ft,symbol:ft,any:ft,arrayOf:lt,element:ft,elementType:ft,instanceOf:lt,node:ft,objectOf:lt,oneOf:lt,oneOfType:lt,shape:lt,exact:lt,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return dt.PropTypes=dt,dt};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports);PropTypes.string,PropTypes.object,PropTypes.object,PropTypes.string,PropTypes.func,PropTypes.func,PropTypes.func,PropTypes.func,PropTypes.func;const block_circle={name:"circle",block:{init:function(){this.appendDummyInput().appendField(new Blockly.FieldLabelSerializable("Go in circle of radius"),"Circular motion").appendField(new Blockly.FieldNumber(0,0),"radius_m").appendField("m"),this.appendDummyInput().appendField("at speed").appendField(new Blockly.FieldNumber(.2),"velocity").appendField("m/s"),this.appendDummyInput().appendField("for").appendField(new Blockly.FieldAngle(90),"angle_degrees").appendField("degrees,"),this.appendDummyInput().appendField(new Blockly.FieldDropdown([["counterclockwise","ccw"],["clockwise","cw"]]),"direction"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(ft,lt)=>{var dt=ft.getFieldValue("radius_m"),vt=ft.getFieldValue("velocity"),Tt=ft.getFieldValue("angle_degrees"),Et=ft.getFieldValue("direction"),Ct="circle("+dt+","+vt+","+Tt+","+Et+`)
`;return Ct},javascriptGenerator:(ft,lt)=>"duration += simulator.dummy();"},block_start_linear_motion={name:"start_linear_motion",block:{init:function(){this.appendDummyInput().appendField("Start linear motion with speeds in"),this.appendDummyInput().appendField("x direction:").appendField(new Blockly.FieldNumber(0),"velocity_x_m").appendField("m/s"),this.appendDummyInput().appendField("y direction:").appendField(new Blockly.FieldNumber(0),"velocity_y_m").appendField("m/s"),this.appendDummyInput().appendField("z direction:").appendField(new Blockly.FieldNumber(0),"velocity_z_m").appendField("m/s"),this.appendDummyInput().appendField("yaw:").appendField(new Blockly.FieldAngle(90),"rate_yaw").appendField("/s"),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(ft,lt)=>{var dt=ft.getFieldValue("velocity_x_m"),vt=ft.getFieldValue("velocity_y_m"),Tt=ft.getFieldValue("velocity_z_m"),Et=ft.getFieldValue("rate_yaw"),Ct="start_linear_motion("+dt+","+vt+","+Tt+","+Et+`)
`;return Ct},javascriptGenerator:(ft,lt)=>"duration += simulator.dummy();"},block_set_default_height={name:"set_default_height",block:{init:function(){this.appendDummyInput().appendField("set default height to").appendField(new Blockly.FieldNumber(0,0),"default_height").appendField("meters"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(ft,lt)=>{var dt=ft.getFieldValue("default_height"),vt="set_default_height("+dt+`)
`;return vt},javascriptGenerator:(ft,lt)=>"duration += simulator.dummy();"},block_stop={name:"stop",block:{init:function(){this.appendDummyInput().appendField("stop and hover"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(0),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(ft,lt)=>`stop_and_hover(cf)
`,javascriptGenerator:(ft,lt)=>`duration += simulator.stop_and_hover(group_state);
`},block_go_to={name:"go_to",block:{init:function(){this.appendDummyInput().appendField("go to X:").appendField(new Blockly.FieldNumber(0),"x_pos").appendField("Y:").appendField(new Blockly.FieldNumber(0),"y_pos").appendField("Z:").appendField(new Blockly.FieldNumber(0),"z_pos").appendField("over").appendField(new Blockly.FieldNumber(0),"duration").appendField("seconds"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(ft,lt)=>{var dt=ft.getFieldValue("x_pos"),vt=ft.getFieldValue("y_pos"),Tt=ft.getFieldValue("z_pos"),Et=ft.getFieldValue("duration"),Ct="goto_duration(cf, "+dt+","+vt+","+Tt+","+Et+`)
`;return Ct},javascriptGenerator:(ft,lt)=>{var dt=ft.getFieldValue("x_pos"),vt=ft.getFieldValue("y_pos"),Tt=ft.getFieldValue("z_pos"),Et=ft.getFieldValue("duration");return`duration += simulator.go_to_xyz_duration(group_state, ${dt}, ${vt}, ${Tt}, ${Et});
`}},block_go_to_speed={name:"go_to_speed",block:{init:function(){this.appendDummyInput().appendField("go to X:").appendField(new Blockly.FieldNumber(0),"x_pos").appendField("Y:").appendField(new Blockly.FieldNumber(0),"y_pos").appendField("Z:").appendField(new Blockly.FieldNumber(0),"z_pos").appendField("at").appendField(new Blockly.FieldNumber(0),"speed").appendField("m/s"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(ft,lt)=>{var dt=ft.getFieldValue("x_pos"),vt=ft.getFieldValue("y_pos"),Tt=ft.getFieldValue("z_pos"),Et=ft.getFieldValue("speed"),Ct="go_to(cf, "+dt+","+vt+","+Tt+","+Et+`)
`;return Ct},javascriptGenerator:(ft,lt)=>{var dt=ft.getFieldValue("x_pos"),vt=ft.getFieldValue("y_pos"),Tt=ft.getFieldValue("z_pos"),Et=ft.getFieldValue("speed");return`duration += simulator.go_to_xyz_speed(group_state, ${dt}, ${vt}, ${Tt}, ${Et});
`}},block_land={name:"land",block:{init:function(){this.appendDummyInput().appendField("land at height").appendField(new Blockly.FieldNumber(0),"height").appendField("over").appendField(new Blockly.FieldNumber(0),"duration").appendField("seconds"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(ft,lt)=>{var dt=ft.getFieldValue("height"),vt=ft.getFieldValue("duration"),Tt="land(cf, "+dt+","+vt+`)
`;return Tt},javascriptGenerator:(ft,lt)=>{var dt=ft.getFieldValue("height"),vt=ft.getFieldValue("duration");return`duration += simulator.land(group_state, ${dt}, ${vt});
`}},block_move_angles={name:"move_angles",block:{init:function(){this.appendDummyInput().appendField("move towards"),this.appendDummyInput().appendField("horizontal angle").appendField(new Blockly.FieldAngle(90),"horizontal angle"),this.appendDummyInput().appendField("vertical angle").appendField(new Blockly.FieldAngle(90),"vertical angle"),this.appendDummyInput().appendField("distance").appendField(new Blockly.FieldNumber(0),"distance"),this.appendDummyInput().appendField("at").appendField(new Blockly.FieldNumber(0),"NAME").appendField("m/s"),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(ft,lt)=>{var dt=ft.getFieldValue("horizontal angle"),vt=ft.getFieldValue("vertical angle"),Tt=ft.getFieldValue("distance"),Et=ft.getFieldValue("NAME"),Ct="move_by_angles("+dt+","+vt+","+Tt+","+Et+`)
`;return Ct},javascriptGenerator:(ft,lt)=>"duration += simulator.dummy()"},block_move_xyz={name:"move_xyz",block:{init:function(){this.appendDummyInput().appendField("move X").appendField(new Blockly.FieldNumber(0),"x").appendField("meters"),this.appendDummyInput().appendField("move Y").appendField(new Blockly.FieldNumber(0),"y").appendField("meters"),this.appendDummyInput().appendField("move Z").appendField(new Blockly.FieldNumber(0),"z").appendField("meters"),this.appendDummyInput().appendField("at").appendField(new Blockly.FieldNumber(0),"speed").appendField("m/s"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(ft,lt)=>{var dt=ft.getFieldValue("x"),vt=ft.getFieldValue("y"),Tt=ft.getFieldValue("z"),Et=ft.getFieldValue("speed"),Ct="goto_rel_at_speed(cf, "+dt+","+vt+","+Tt+","+Et+`)
`;return Ct},javascriptGenerator:(ft,lt)=>{var dt=ft.getFieldValue("x"),vt=ft.getFieldValue("y"),Tt=ft.getFieldValue("z"),Et=ft.getFieldValue("speed");return`duration += simulator.move_speed(group_state, ${dt}, ${vt}, ${Tt}, ${Et});
`}},block_move={name:"move",block:{init:function(){this.appendDummyInput().appendField("move").appendField(new Blockly.FieldDropdown([["up","up"],["down","down"],["left","left"],["right","right"],["forward","forward"],["backward","backward"]]),"direction").appendField(new Blockly.FieldNumber(0),"distance").appendField("meters for").appendField(new Blockly.FieldNumber(0),"duration").appendField("seconds"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(ft,lt)=>{var dt=ft.getFieldValue("direction"),vt=ft.getFieldValue("distance"),Tt=ft.getFieldValue("duration"),Et="move_direction(cf, "+dt+","+vt+","+Tt+`)
`;return Et},javascriptGenerator:(ft,lt)=>{var dt=ft.getFieldValue("direction"),vt=ft.getFieldValue("distance"),Tt=ft.getFieldValue("duration");return`duration += simulator.move_direction(group_state, ${dt}, ${vt}, ${Tt});
`}},block_takeoff={name:"takeoff",block:{init:function(){this.appendDummyInput().appendField("takeoff to").appendField(new Blockly.FieldNumber(0),"height").appendField("meters over").appendField(new Blockly.FieldNumber(0),"duration").appendField("seconds"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(ft,lt)=>{var dt=ft.getFieldValue("height"),vt=ft.getFieldValue("duration"),Tt="takeoff(cf, "+dt+" ,"+vt+`)
`;return Tt},javascriptGenerator:(ft,lt)=>{var dt=ft.getFieldValue("height"),vt=ft.getFieldValue("duration");return`duration += simulator.takeoff(group_state, ${dt}, ${vt});
`}},block_turn={name:"turn",block:{init:function(){this.appendDummyInput().appendField("turn").appendField(new Blockly.FieldDropdown([["right",`
									right
								`],["left","left"]]),"direction").appendField(new Blockly.FieldAngle(0),"degrees").appendField("at").appendField(new Blockly.FieldAngle(0),"rate").appendField("degrees/s"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(ft,lt)=>{var dt=ft.getFieldValue("direction"),vt=ft.getFieldValue("degrees"),Tt=ft.getFieldValue("rate"),Et="turn("+dt+","+vt+","+Tt+`)
`;return Et},javascriptGenerator:(ft,lt)=>"duration += simulator.dummy();"},block_start_circle={name:"start_circle",block:{init:function(){this.appendDummyInput().appendField("start cricling").appendField(new Blockly.FieldNumber(0),"radius").appendField("meter radius").appendField(new Blockly.FieldDropdown([["right","circle_right"],["left","circle_left"]]),"direction"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(ft,lt)=>{var dt=ft.getFieldValue("radius"),vt=ft.getFieldValue("direction"),Tt="start_circle("+dt+","+vt+`)
`;return Tt},javascriptGenerator:(ft,lt)=>"duration += simulator.dummy();"},block_start_move={name:"start_move",block:{init:function(){this.appendDummyInput().appendField("start moving").appendField(new Blockly.FieldDropdown([["up","up"],["down","down"],["left","left"],["right","right"],["forward","forward"],["backward","backward"]]),"direction").appendField("at").appendField(new Blockly.FieldNumber(0),"speed").appendField("m/s"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(ft,lt)=>{var dt=ft.getFieldValue("direction"),vt=ft.getFieldValue("speed"),Tt="start_move("+dt+","+vt+`)
`;return Tt},javascriptGenerator:(ft,lt)=>"duration += simulator.dummy();"},block_start_turn={name:"start_turn",block:{init:function(){this.appendDummyInput().appendField("start turning").appendField(new Blockly.FieldDropdown([["right","right"],["left","left"]]),"direction").appendField("at").appendField(new Blockly.FieldAngle(0),"rate").appendField("degrees/s"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(ft,lt)=>{var dt=ft.getFieldValue("direction"),vt=ft.getFieldValue("rate"),Tt="start_turn("+dt+","+vt+`)
`;return Tt},javascriptGenerator:(ft,lt)=>"duration += simulator.dummy();"},block_get_a_position={name:"get_a_position",block:{init:function(){this.appendDummyInput().appendField(new Blockly.FieldDropdown([["default","default"],["current","current"]]),"which").appendField(new Blockly.FieldDropdown([["x","x position"],["y","y position"],["z","z position"]]),"NAME").appendField("position"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(ft,lt)=>{var dt=ft.getFieldValue("which"),vt=ft.getFieldValue("NAME"),Tt="get_a_position("+dt+","+vt+")";return Tt},javascriptGenerator:(ft,lt)=>"duration += simulator.dummy()"},block_set_default_speed={name:"set_default_speed",block:{init:function(){this.appendDummyInput().appendField("set default speed to").appendField(new Blockly.FieldNumber(0),"speed"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(ft,lt)=>{var dt=ft.getFieldValue("speed"),vt="set_default_speed("+dt+`)
`;return vt},javascriptGenerator:(ft,lt)=>"duration += simulator.dummy();"},block_set_default_xy={name:"set_default_xy",block:{init:function(){this.appendDummyInput().appendField("set default").appendField(new Blockly.FieldDropdown([["x","x"],["y","y"]]),"xy").appendField("to").appendField(new Blockly.FieldNumber(0),"NAME"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(ft,lt)=>{var dt=ft.getFieldValue("xy"),vt=ft.getFieldValue("NAME"),Tt="set_default_xy("+dt+","+vt+`)
`;return Tt},javascriptGenerator:(ft,lt)=>"duration += simulator.dummy();"};var coreBrowserExports=requireCoreBrowser();/*!
 * iro.js v5.5.2
 * 2016-2021 James Daniel
 * Licensed under MPL 2.0
 * github.com/jaames/iro.js
 */var n$7,u$8,t$5,i$7,r$9,f$6={},e$2=[],c$7=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i;function s$4(ft,lt){for(var dt in lt)ft[dt]=lt[dt];return ft}function a$4(ft){var lt=ft.parentNode;lt&&lt.removeChild(ft)}function h$8(ft,lt,dt){var vt,Tt,Et,Ct,Rt=arguments;if(lt=s$4({},lt),arguments.length>3)for(dt=[dt],vt=3;vt<arguments.length;vt++)dt.push(Rt[vt]);if(dt!=null&&(lt.children=dt),ft!=null&&ft.defaultProps!=null)for(Tt in ft.defaultProps)lt[Tt]===void 0&&(lt[Tt]=ft.defaultProps[Tt]);return Ct=lt.key,(Et=lt.ref)!=null&&delete lt.ref,Ct!=null&&delete lt.key,v$6(ft,lt,Ct,Et)}function v$6(ft,lt,dt,vt){var Tt={type:ft,props:lt,key:dt,ref:vt,__k:null,__p:null,__b:0,__e:null,l:null,__c:null,constructor:void 0};return n$7.vnode&&n$7.vnode(Tt),Tt}function d$7(ft){return ft.children}function y$6(ft){if(ft==null||typeof ft=="boolean")return null;if(typeof ft=="string"||typeof ft=="number")return v$6(null,ft,null,null);if(ft.__e!=null||ft.__c!=null){var lt=v$6(ft.type,ft.props,ft.key,null);return lt.__e=ft.__e,lt}return ft}function m$5(ft,lt){this.props=ft,this.context=lt}function w$6(ft,lt){if(lt==null)return ft.__p?w$6(ft.__p,ft.__p.__k.indexOf(ft)+1):null;for(var dt;lt<ft.__k.length;lt++)if((dt=ft.__k[lt])!=null&&dt.__e!=null)return dt.__e;return typeof ft.type=="function"?w$6(ft):null}function g$4(ft){var lt,dt;if((ft=ft.__p)!=null&&ft.__c!=null){for(ft.__e=ft.__c.base=null,lt=0;lt<ft.__k.length;lt++)if((dt=ft.__k[lt])!=null&&dt.__e!=null){ft.__e=ft.__c.base=dt.__e;break}return g$4(ft)}}function k$4(ft){(!ft.__d&&(ft.__d=!0)&&u$8.push(ft)===1||i$7!==n$7.debounceRendering)&&(i$7=n$7.debounceRendering,(n$7.debounceRendering||t$5)(_$2))}function _$2(){var ft,lt,dt,vt,Tt,Et,Ct,Rt;for(u$8.sort(function(kt,Dt){return Dt.__v.__b-kt.__v.__b});ft=u$8.pop();)ft.__d&&(dt=void 0,vt=void 0,Et=(Tt=(lt=ft).__v).__e,Ct=lt.__P,Rt=lt.u,lt.u=!1,Ct&&(dt=[],vt=$(Ct,Tt,s$4({},Tt),lt.__n,Ct.ownerSVGElement!==void 0,null,dt,Rt,Et??w$6(Tt)),j$3(dt,Tt),vt!=Et&&g$4(Tt)))}function b$6(ft,lt,dt,vt,Tt,Et,Ct,Rt,kt){var Dt,Bt,Ft,Ut,Zt,Kt,ln,hn=dt&&dt.__k||e$2,dn=hn.length;if(Rt==f$6&&(Rt=Et!=null?Et[0]:dn?w$6(dt,0):null),Dt=0,lt.__k=x$5(lt.__k,function(pn){if(pn!=null){if(pn.__p=lt,pn.__b=lt.__b+1,(Ft=hn[Dt])===null||Ft&&pn.key==Ft.key&&pn.type===Ft.type)hn[Dt]=void 0;else for(Bt=0;Bt<dn;Bt++){if((Ft=hn[Bt])&&pn.key==Ft.key&&pn.type===Ft.type){hn[Bt]=void 0;break}Ft=null}if(Ut=$(ft,pn,Ft=Ft||f$6,vt,Tt,Et,Ct,null,Rt,kt),(Bt=pn.ref)&&Ft.ref!=Bt&&(ln||(ln=[])).push(Bt,pn.__c||Ut,pn),Ut!=null){if(Kt==null&&(Kt=Ut),pn.l!=null)Ut=pn.l,pn.l=null;else if(Et==Ft||Ut!=Rt||Ut.parentNode==null){e:if(Rt==null||Rt.parentNode!==ft)ft.appendChild(Ut);else{for(Zt=Rt,Bt=0;(Zt=Zt.nextSibling)&&Bt<dn;Bt+=2)if(Zt==Ut)break e;ft.insertBefore(Ut,Rt)}lt.type=="option"&&(ft.value="")}Rt=Ut.nextSibling,typeof lt.type=="function"&&(lt.l=Ut)}}return Dt++,pn}),lt.__e=Kt,Et!=null&&typeof lt.type!="function")for(Dt=Et.length;Dt--;)Et[Dt]!=null&&a$4(Et[Dt]);for(Dt=dn;Dt--;)hn[Dt]!=null&&D$5(hn[Dt],hn[Dt]);if(ln)for(Dt=0;Dt<ln.length;Dt++)A$3(ln[Dt],ln[++Dt],ln[++Dt])}function x$5(ft,lt,dt){if(dt==null&&(dt=[]),ft==null||typeof ft=="boolean")lt&&dt.push(lt(null));else if(Array.isArray(ft))for(var vt=0;vt<ft.length;vt++)x$5(ft[vt],lt,dt);else dt.push(lt?lt(y$6(ft)):ft);return dt}function C$3(ft,lt,dt,vt,Tt){var Et;for(Et in dt)Et in lt||N$2(ft,Et,null,dt[Et],vt);for(Et in lt)Tt&&typeof lt[Et]!="function"||Et==="value"||Et==="checked"||dt[Et]===lt[Et]||N$2(ft,Et,lt[Et],dt[Et],vt)}function P$3(ft,lt,dt){lt[0]==="-"?ft.setProperty(lt,dt):ft[lt]=typeof dt=="number"&&c$7.test(lt)===!1?dt+"px":dt??""}function N$2(ft,lt,dt,vt,Tt){var Et,Ct,Rt,kt,Dt;if(!((lt=Tt?lt==="className"?"class":lt:lt==="class"?"className":lt)==="key"||lt==="children"))if(lt==="style")if(Et=ft.style,typeof dt=="string")Et.cssText=dt;else{if(typeof vt=="string"&&(Et.cssText="",vt=null),vt)for(Ct in vt)dt&&Ct in dt||P$3(Et,Ct,"");if(dt)for(Rt in dt)vt&&dt[Rt]===vt[Rt]||P$3(Et,Rt,dt[Rt])}else lt[0]==="o"&&lt[1]==="n"?(kt=lt!==(lt=lt.replace(/Capture$/,"")),Dt=lt.toLowerCase(),lt=(Dt in ft?Dt:lt).slice(2),dt?(vt||ft.addEventListener(lt,T$2,kt),(ft.t||(ft.t={}))[lt]=dt):ft.removeEventListener(lt,T$2,kt)):lt!=="list"&&lt!=="tagName"&&lt!=="form"&&!Tt&&lt in ft?ft[lt]=dt??"":typeof dt!="function"&&lt!=="dangerouslySetInnerHTML"&&(lt!==(lt=lt.replace(/^xlink:?/,""))?dt==null||dt===!1?ft.removeAttributeNS("http://www.w3.org/1999/xlink",lt.toLowerCase()):ft.setAttributeNS("http://www.w3.org/1999/xlink",lt.toLowerCase(),dt):dt==null||dt===!1?ft.removeAttribute(lt):ft.setAttribute(lt,dt))}function T$2(ft){return this.t[ft.type](n$7.event?n$7.event(ft):ft)}function $(ft,lt,dt,vt,Tt,Et,Ct,Rt,kt,Dt){var Bt,Ft,Ut,Zt,Kt,ln,hn,dn,pn,mn,On=lt.type;if(lt.constructor!==void 0)return null;(Bt=n$7.__b)&&Bt(lt);try{e:if(typeof On=="function"){if(dn=lt.props,pn=(Bt=On.contextType)&&vt[Bt.__c],mn=Bt?pn?pn.props.value:Bt.__p:vt,dt.__c?hn=(Ft=lt.__c=dt.__c).__p=Ft.__E:("prototype"in On&&On.prototype.render?lt.__c=Ft=new On(dn,mn):(lt.__c=Ft=new m$5(dn,mn),Ft.constructor=On,Ft.render=H$4),pn&&pn.sub(Ft),Ft.props=dn,Ft.state||(Ft.state={}),Ft.context=mn,Ft.__n=vt,Ut=Ft.__d=!0,Ft.__h=[]),Ft.__s==null&&(Ft.__s=Ft.state),On.getDerivedStateFromProps!=null&&s$4(Ft.__s==Ft.state?Ft.__s=s$4({},Ft.__s):Ft.__s,On.getDerivedStateFromProps(dn,Ft.__s)),Ut)On.getDerivedStateFromProps==null&&Ft.componentWillMount!=null&&Ft.componentWillMount(),Ft.componentDidMount!=null&&Ct.push(Ft);else{if(On.getDerivedStateFromProps==null&&Rt==null&&Ft.componentWillReceiveProps!=null&&Ft.componentWillReceiveProps(dn,mn),!Rt&&Ft.shouldComponentUpdate!=null&&Ft.shouldComponentUpdate(dn,Ft.__s,mn)===!1){for(Ft.props=dn,Ft.state=Ft.__s,Ft.__d=!1,Ft.__v=lt,lt.__e=kt!=null?kt!==dt.__e?kt:dt.__e:null,lt.__k=dt.__k,Bt=0;Bt<lt.__k.length;Bt++)lt.__k[Bt]&&(lt.__k[Bt].__p=lt);break e}Ft.componentWillUpdate!=null&&Ft.componentWillUpdate(dn,Ft.__s,mn)}for(Zt=Ft.props,Kt=Ft.state,Ft.context=mn,Ft.props=dn,Ft.state=Ft.__s,(Bt=n$7.__r)&&Bt(lt),Ft.__d=!1,Ft.__v=lt,Ft.__P=ft,Bt=Ft.render(Ft.props,Ft.state,Ft.context),lt.__k=x$5(Bt!=null&&Bt.type==d$7&&Bt.key==null?Bt.props.children:Bt),Ft.getChildContext!=null&&(vt=s$4(s$4({},vt),Ft.getChildContext())),Ut||Ft.getSnapshotBeforeUpdate==null||(ln=Ft.getSnapshotBeforeUpdate(Zt,Kt)),b$6(ft,lt,dt,vt,Tt,Et,Ct,kt,Dt),Ft.base=lt.__e;Bt=Ft.__h.pop();)Ft.__s&&(Ft.state=Ft.__s),Bt.call(Ft);Ut||Zt==null||Ft.componentDidUpdate==null||Ft.componentDidUpdate(Zt,Kt,ln),hn&&(Ft.__E=Ft.__p=null)}else lt.__e=z$4(dt.__e,lt,dt,vt,Tt,Et,Ct,Dt);(Bt=n$7.diffed)&&Bt(lt)}catch(bn){n$7.__e(bn,lt,dt)}return lt.__e}function j$3(ft,lt){for(var dt;dt=ft.pop();)try{dt.componentDidMount()}catch(vt){n$7.__e(vt,dt.__v)}n$7.__c&&n$7.__c(lt)}function z$4(ft,lt,dt,vt,Tt,Et,Ct,Rt){var kt,Dt,Bt,Ft,Ut=dt.props,Zt=lt.props;if(Tt=lt.type==="svg"||Tt,ft==null&&Et!=null){for(kt=0;kt<Et.length;kt++)if((Dt=Et[kt])!=null&&(lt.type===null?Dt.nodeType===3:Dt.localName===lt.type)){ft=Dt,Et[kt]=null;break}}if(ft==null){if(lt.type===null)return document.createTextNode(Zt);ft=Tt?document.createElementNS("http://www.w3.org/2000/svg",lt.type):document.createElement(lt.type),Et=null}return lt.type===null?Ut!==Zt&&(Et!=null&&(Et[Et.indexOf(ft)]=null),ft.data=Zt):lt!==dt&&(Et!=null&&(Et=e$2.slice.call(ft.childNodes)),Bt=(Ut=dt.props||f$6).dangerouslySetInnerHTML,Ft=Zt.dangerouslySetInnerHTML,Rt||(Ft||Bt)&&(Ft&&Bt&&Ft.__html==Bt.__html||(ft.innerHTML=Ft&&Ft.__html||"")),C$3(ft,Zt,Ut,Tt,Rt),lt.__k=lt.props.children,Ft||b$6(ft,lt,dt,vt,lt.type!=="foreignObject"&&Tt,Et,Ct,f$6,Rt),Rt||("value"in Zt&&Zt.value!==void 0&&Zt.value!==ft.value&&(ft.value=Zt.value==null?"":Zt.value),"checked"in Zt&&Zt.checked!==void 0&&Zt.checked!==ft.checked&&(ft.checked=Zt.checked))),ft}function A$3(ft,lt,dt){try{typeof ft=="function"?ft(lt):ft.current=lt}catch(vt){n$7.__e(vt,dt)}}function D$5(ft,lt,dt){var vt,Tt,Et;if(n$7.unmount&&n$7.unmount(ft),(vt=ft.ref)&&A$3(vt,null,lt),dt||typeof ft.type=="function"||(dt=(Tt=ft.__e)!=null),ft.__e=ft.l=null,(vt=ft.__c)!=null){if(vt.componentWillUnmount)try{vt.componentWillUnmount()}catch(Ct){n$7.__e(Ct,lt)}vt.base=vt.__P=null}if(vt=ft.__k)for(Et=0;Et<vt.length;Et++)vt[Et]&&D$5(vt[Et],lt,dt);Tt!=null&&a$4(Tt)}function H$4(ft,lt,dt){return this.constructor(ft,dt)}function I$3(ft,lt,dt){var vt,Tt,Et;n$7.__p&&n$7.__p(ft,lt),Tt=(vt=dt===r$9)?null:dt&&dt.__k||lt.__k,ft=h$8(d$7,null,[ft]),Et=[],$(lt,vt?lt.__k=ft:(dt||lt).__k=ft,Tt||f$6,f$6,lt.ownerSVGElement!==void 0,dt&&!vt?[dt]:Tt?null:e$2.slice.call(lt.childNodes),Et,!1,dt||f$6,vt),j$3(Et,ft)}n$7={},m$5.prototype.setState=function(ft,lt){var dt=this.__s!==this.state&&this.__s||(this.__s=s$4({},this.state));(typeof ft!="function"||(ft=ft(dt,this.props)))&&s$4(dt,ft),ft!=null&&this.__v&&(this.u=!1,lt&&this.__h.push(lt),k$4(this))},m$5.prototype.forceUpdate=function(ft){this.__v&&(ft&&this.__h.push(ft),this.u=!0,k$4(this))},m$5.prototype.render=d$7,u$8=[],t$5=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,i$7=n$7.debounceRendering,n$7.__e=function(ft,lt,dt){for(var vt;lt=lt.__p;)if((vt=lt.__c)&&!vt.__p)try{if(vt.constructor&&vt.constructor.getDerivedStateFromError!=null)vt.setState(vt.constructor.getDerivedStateFromError(ft));else{if(vt.componentDidCatch==null)continue;vt.componentDidCatch(ft)}return k$4(vt.__E=vt)}catch(Tt){ft=Tt}throw ft},r$9=f$6;function _defineProperties$1(ft,lt){for(var dt=0;dt<lt.length;dt++){var vt=lt[dt];vt.enumerable=vt.enumerable||!1,vt.configurable=!0,"value"in vt&&(vt.writable=!0),Object.defineProperty(ft,vt.key,vt)}}function _createClass$1(ft,lt,dt){return lt&&_defineProperties$1(ft.prototype,lt),dt&&_defineProperties$1(ft,dt),ft}function _extends$1(){return _extends$1=Object.assign||function(ft){for(var lt=arguments,dt=1;dt<arguments.length;dt++){var vt=lt[dt];for(var Tt in vt)Object.prototype.hasOwnProperty.call(vt,Tt)&&(ft[Tt]=vt[Tt])}return ft},_extends$1.apply(this,arguments)}var CSS_INTEGER="[-\\+]?\\d+%?",CSS_NUMBER="[-\\+]?\\d*\\.\\d+%?",CSS_UNIT="(?:"+CSS_NUMBER+")|(?:"+CSS_INTEGER+")",PERMISSIVE_MATCH_3="[\\s|\\(]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")\\s*\\)?",PERMISSIVE_MATCH_4="[\\s|\\(]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")\\s*\\)?",REGEX_FUNCTIONAL_RGB=new RegExp("rgb"+PERMISSIVE_MATCH_3),REGEX_FUNCTIONAL_RGBA=new RegExp("rgba"+PERMISSIVE_MATCH_4),REGEX_FUNCTIONAL_HSL=new RegExp("hsl"+PERMISSIVE_MATCH_3),REGEX_FUNCTIONAL_HSLA=new RegExp("hsla"+PERMISSIVE_MATCH_4),HEX_START="^(?:#?|0x?)",HEX_INT_SINGLE="([0-9a-fA-F]{1})",HEX_INT_DOUBLE="([0-9a-fA-F]{2})",REGEX_HEX_3=new RegExp(HEX_START+HEX_INT_SINGLE+HEX_INT_SINGLE+HEX_INT_SINGLE+"$"),REGEX_HEX_4=new RegExp(HEX_START+HEX_INT_SINGLE+HEX_INT_SINGLE+HEX_INT_SINGLE+HEX_INT_SINGLE+"$"),REGEX_HEX_6=new RegExp(HEX_START+HEX_INT_DOUBLE+HEX_INT_DOUBLE+HEX_INT_DOUBLE+"$"),REGEX_HEX_8=new RegExp(HEX_START+HEX_INT_DOUBLE+HEX_INT_DOUBLE+HEX_INT_DOUBLE+HEX_INT_DOUBLE+"$"),KELVIN_MIN=2e3,KELVIN_MAX=4e4,log$1=Math.log,round=Math.round,floor=Math.floor;function clamp$2(ft,lt,dt){return Math.min(Math.max(ft,lt),dt)}function parseUnit(ft,lt){var dt=ft.indexOf("%")>-1,vt=parseFloat(ft);return dt?lt/100*vt:vt}function parseHexInt(ft){return parseInt(ft,16)}function intToHex(ft){return ft.toString(16).padStart(2,"0")}var IroColor=function(){function ft(dt,vt){this.$={h:0,s:0,v:0,a:1},dt&&this.set(dt),this.onChange=vt,this.initialValue=_extends$1({},this.$)}var lt=ft.prototype;return lt.set=function(vt){if(typeof vt=="string")/^(?:#?|0x?)[0-9a-fA-F]{3,8}$/.test(vt)?this.hexString=vt:/^rgba?/.test(vt)?this.rgbString=vt:/^hsla?/.test(vt)&&(this.hslString=vt);else if(typeof vt=="object")vt instanceof ft?this.hsva=vt.hsva:"r"in vt&&"g"in vt&&"b"in vt?this.rgb=vt:"h"in vt&&"s"in vt&&"v"in vt?this.hsv=vt:"h"in vt&&"s"in vt&&"l"in vt?this.hsl=vt:"kelvin"in vt&&(this.kelvin=vt.kelvin);else throw new Error("Invalid color value")},lt.setChannel=function(vt,Tt,Et){var Ct;this[vt]=_extends$1({},this[vt],(Ct={},Ct[Tt]=Et,Ct))},lt.reset=function(){this.hsva=this.initialValue},lt.clone=function(){return new ft(this)},lt.unbind=function(){this.onChange=void 0},ft.hsvToRgb=function(vt){var Tt=vt.h/60,Et=vt.s/100,Ct=vt.v/100,Rt=floor(Tt),kt=Tt-Rt,Dt=Ct*(1-Et),Bt=Ct*(1-kt*Et),Ft=Ct*(1-(1-kt)*Et),Ut=Rt%6,Zt=[Ct,Bt,Dt,Dt,Ft,Ct][Ut],Kt=[Ft,Ct,Ct,Bt,Dt,Dt][Ut],ln=[Dt,Dt,Ft,Ct,Ct,Bt][Ut];return{r:clamp$2(Zt*255,0,255),g:clamp$2(Kt*255,0,255),b:clamp$2(ln*255,0,255)}},ft.rgbToHsv=function(vt){var Tt=vt.r/255,Et=vt.g/255,Ct=vt.b/255,Rt=Math.max(Tt,Et,Ct),kt=Math.min(Tt,Et,Ct),Dt=Rt-kt,Bt=0,Ft=Rt,Ut=Rt===0?0:Dt/Rt;switch(Rt){case kt:Bt=0;break;case Tt:Bt=(Et-Ct)/Dt+(Et<Ct?6:0);break;case Et:Bt=(Ct-Tt)/Dt+2;break;case Ct:Bt=(Tt-Et)/Dt+4;break}return{h:Bt*60%360,s:clamp$2(Ut*100,0,100),v:clamp$2(Ft*100,0,100)}},ft.hsvToHsl=function(vt){var Tt=vt.s/100,Et=vt.v/100,Ct=(2-Tt)*Et,Rt=Ct<=1?Ct:2-Ct,kt=Rt<1e-9?0:Tt*Et/Rt;return{h:vt.h,s:clamp$2(kt*100,0,100),l:clamp$2(Ct*50,0,100)}},ft.hslToHsv=function(vt){var Tt=vt.l*2,Et=vt.s*(Tt<=100?Tt:200-Tt)/100,Ct=Tt+Et<1e-9?0:2*Et/(Tt+Et);return{h:vt.h,s:clamp$2(Ct*100,0,100),v:clamp$2((Tt+Et)/2,0,100)}},ft.kelvinToRgb=function(vt){var Tt=vt/100,Et,Ct,Rt;return Tt<66?(Et=255,Ct=-155.25485562709179-.44596950469579133*(Ct=Tt-2)+104.49216199393888*log$1(Ct),Rt=Tt<20?0:-254.76935184120902+.8274096064007395*(Rt=Tt-10)+115.67994401066147*log$1(Rt)):(Et=351.97690566805693+.114206453784165*(Et=Tt-55)-40.25366309332127*log$1(Et),Ct=325.4494125711974+.07943456536662342*(Ct=Tt-50)-28.0852963507957*log$1(Ct),Rt=255),{r:clamp$2(floor(Et),0,255),g:clamp$2(floor(Ct),0,255),b:clamp$2(floor(Rt),0,255)}},ft.rgbToKelvin=function(vt){for(var Tt=vt.r,Et=vt.b,Ct=.4,Rt=KELVIN_MIN,kt=KELVIN_MAX,Dt;kt-Rt>Ct;){Dt=(kt+Rt)*.5;var Bt=ft.kelvinToRgb(Dt);Bt.b/Bt.r>=Et/Tt?kt=Dt:Rt=Dt}return Dt},_createClass$1(ft,[{key:"hsv",get:function(){var vt=this.$;return{h:vt.h,s:vt.s,v:vt.v}},set:function(vt){var Tt=this.$;if(vt=_extends$1({},Tt,vt),this.onChange){var Et={h:!1,v:!1,s:!1,a:!1};for(var Ct in Tt)Et[Ct]=vt[Ct]!=Tt[Ct];this.$=vt,(Et.h||Et.s||Et.v||Et.a)&&this.onChange(this,Et)}else this.$=vt}},{key:"hsva",get:function(){return _extends$1({},this.$)},set:function(vt){this.hsv=vt}},{key:"hue",get:function(){return this.$.h},set:function(vt){this.hsv={h:vt}}},{key:"saturation",get:function(){return this.$.s},set:function(vt){this.hsv={s:vt}}},{key:"value",get:function(){return this.$.v},set:function(vt){this.hsv={v:vt}}},{key:"alpha",get:function(){return this.$.a},set:function(vt){this.hsv=_extends$1({},this.hsv,{a:vt})}},{key:"kelvin",get:function(){return ft.rgbToKelvin(this.rgb)},set:function(vt){this.rgb=ft.kelvinToRgb(vt)}},{key:"red",get:function(){var vt=this.rgb;return vt.r},set:function(vt){this.rgb=_extends$1({},this.rgb,{r:vt})}},{key:"green",get:function(){var vt=this.rgb;return vt.g},set:function(vt){this.rgb=_extends$1({},this.rgb,{g:vt})}},{key:"blue",get:function(){var vt=this.rgb;return vt.b},set:function(vt){this.rgb=_extends$1({},this.rgb,{b:vt})}},{key:"rgb",get:function(){var vt=ft.hsvToRgb(this.$),Tt=vt.r,Et=vt.g,Ct=vt.b;return{r:round(Tt),g:round(Et),b:round(Ct)}},set:function(vt){this.hsv=_extends$1({},ft.rgbToHsv(vt),{a:vt.a===void 0?1:vt.a})}},{key:"rgba",get:function(){return _extends$1({},this.rgb,{a:this.alpha})},set:function(vt){this.rgb=vt}},{key:"hsl",get:function(){var vt=ft.hsvToHsl(this.$),Tt=vt.h,Et=vt.s,Ct=vt.l;return{h:round(Tt),s:round(Et),l:round(Ct)}},set:function(vt){this.hsv=_extends$1({},ft.hslToHsv(vt),{a:vt.a===void 0?1:vt.a})}},{key:"hsla",get:function(){return _extends$1({},this.hsl,{a:this.alpha})},set:function(vt){this.hsl=vt}},{key:"rgbString",get:function(){var vt=this.rgb;return"rgb("+vt.r+", "+vt.g+", "+vt.b+")"},set:function(vt){var Tt,Et,Ct,Rt,kt=1;if((Tt=REGEX_FUNCTIONAL_RGB.exec(vt))?(Et=parseUnit(Tt[1],255),Ct=parseUnit(Tt[2],255),Rt=parseUnit(Tt[3],255)):(Tt=REGEX_FUNCTIONAL_RGBA.exec(vt))&&(Et=parseUnit(Tt[1],255),Ct=parseUnit(Tt[2],255),Rt=parseUnit(Tt[3],255),kt=parseUnit(Tt[4],1)),Tt)this.rgb={r:Et,g:Ct,b:Rt,a:kt};else throw new Error("Invalid rgb string")}},{key:"rgbaString",get:function(){var vt=this.rgba;return"rgba("+vt.r+", "+vt.g+", "+vt.b+", "+vt.a+")"},set:function(vt){this.rgbString=vt}},{key:"hexString",get:function(){var vt=this.rgb;return"#"+intToHex(vt.r)+intToHex(vt.g)+intToHex(vt.b)},set:function(vt){var Tt,Et,Ct,Rt,kt=255;if((Tt=REGEX_HEX_3.exec(vt))?(Et=parseHexInt(Tt[1])*17,Ct=parseHexInt(Tt[2])*17,Rt=parseHexInt(Tt[3])*17):(Tt=REGEX_HEX_4.exec(vt))?(Et=parseHexInt(Tt[1])*17,Ct=parseHexInt(Tt[2])*17,Rt=parseHexInt(Tt[3])*17,kt=parseHexInt(Tt[4])*17):(Tt=REGEX_HEX_6.exec(vt))?(Et=parseHexInt(Tt[1]),Ct=parseHexInt(Tt[2]),Rt=parseHexInt(Tt[3])):(Tt=REGEX_HEX_8.exec(vt))&&(Et=parseHexInt(Tt[1]),Ct=parseHexInt(Tt[2]),Rt=parseHexInt(Tt[3]),kt=parseHexInt(Tt[4])),Tt)this.rgb={r:Et,g:Ct,b:Rt,a:kt/255};else throw new Error("Invalid hex string")}},{key:"hex8String",get:function(){var vt=this.rgba;return"#"+intToHex(vt.r)+intToHex(vt.g)+intToHex(vt.b)+intToHex(floor(vt.a*255))},set:function(vt){this.hexString=vt}},{key:"hslString",get:function(){var vt=this.hsl;return"hsl("+vt.h+", "+vt.s+"%, "+vt.l+"%)"},set:function(vt){var Tt,Et,Ct,Rt,kt=1;if((Tt=REGEX_FUNCTIONAL_HSL.exec(vt))?(Et=parseUnit(Tt[1],360),Ct=parseUnit(Tt[2],100),Rt=parseUnit(Tt[3],100)):(Tt=REGEX_FUNCTIONAL_HSLA.exec(vt))&&(Et=parseUnit(Tt[1],360),Ct=parseUnit(Tt[2],100),Rt=parseUnit(Tt[3],100),kt=parseUnit(Tt[4],1)),Tt)this.hsl={h:Et,s:Ct,l:Rt,a:kt};else throw new Error("Invalid hsl string")}},{key:"hslaString",get:function(){var vt=this.hsla;return"hsla("+vt.h+", "+vt.s+"%, "+vt.l+"%, "+vt.a+")"},set:function(vt){this.hslString=vt}}]),ft}(),sliderDefaultOptions={sliderShape:"bar",sliderType:"value",minTemperature:2200,maxTemperature:11e3};function getSliderDimensions(ft){var lt,dt=ft.width,vt=ft.sliderSize,Tt=ft.borderWidth,Et=ft.handleRadius,Ct=ft.padding,Rt=ft.sliderShape,kt=ft.layoutDirection==="horizontal";return vt=(lt=vt)!=null?lt:Ct*2+Et*2,Rt==="circle"?{handleStart:ft.padding+ft.handleRadius,handleRange:dt-Ct*2-Et*2,width:dt,height:dt,cx:dt/2,cy:dt/2,radius:dt/2-Tt/2}:{handleStart:vt/2,handleRange:dt-vt,radius:vt/2,x:0,y:0,width:kt?vt:dt,height:kt?dt:vt}}function getCurrentSliderValue(ft,lt){var dt=lt.hsva,vt=lt.rgb;switch(ft.sliderType){case"red":return vt.r/2.55;case"green":return vt.g/2.55;case"blue":return vt.b/2.55;case"alpha":return dt.a*100;case"kelvin":var Tt=ft.minTemperature,Et=ft.maxTemperature,Ct=Et-Tt,Rt=(lt.kelvin-Tt)/Ct*100;return Math.max(0,Math.min(Rt,100));case"hue":return dt.h/=3.6;case"saturation":return dt.s;case"value":default:return dt.v}}function getSliderValueFromInput(ft,lt,dt){var vt=getSliderDimensions(ft),Tt=vt.handleRange,Et=vt.handleStart,Ct;ft.layoutDirection==="horizontal"?Ct=-1*dt+Tt+Et:Ct=lt-Et,Ct=Math.max(Math.min(Ct,Tt),0);var Rt=Math.round(100/Tt*Ct);switch(ft.sliderType){case"kelvin":var kt=ft.minTemperature,Dt=ft.maxTemperature,Bt=Dt-kt;return kt+Bt*(Rt/100);case"alpha":return Rt/100;case"hue":return Rt*3.6;case"red":case"blue":case"green":return Rt*2.55;default:return Rt}}function getSliderHandlePosition(ft,lt){var dt=getSliderDimensions(ft),vt=dt.width,Tt=dt.height,Et=dt.handleRange,Ct=dt.handleStart,Rt=ft.layoutDirection==="horizontal",kt=getCurrentSliderValue(ft,lt),Dt=Rt?vt/2:Tt/2,Bt=Ct+kt/100*Et;return Rt&&(Bt=-1*Bt+Et+Ct*2),{x:Rt?Dt:Bt,y:Rt?Bt:Dt}}function getSliderGradient(ft,lt){var dt=lt.hsv,vt=lt.rgb;switch(ft.sliderType){case"red":return[[0,"rgb(0,"+vt.g+","+vt.b+")"],[100,"rgb(255,"+vt.g+","+vt.b+")"]];case"green":return[[0,"rgb("+vt.r+",0,"+vt.b+")"],[100,"rgb("+vt.r+",255,"+vt.b+")"]];case"blue":return[[0,"rgb("+vt.r+","+vt.g+",0)"],[100,"rgb("+vt.r+","+vt.g+",255)"]];case"alpha":return[[0,"rgba("+vt.r+","+vt.g+","+vt.b+",0)"],[100,"rgb("+vt.r+","+vt.g+","+vt.b+")"]];case"kelvin":for(var Tt=[],Et=ft.minTemperature,Ct=ft.maxTemperature,Rt=8,kt=Ct-Et,Dt=Et,Bt=0;Dt<Ct;Dt+=kt/Rt,Bt+=1){var Ft=IroColor.kelvinToRgb(Dt),Ut=Ft.r,Zt=Ft.g,Kt=Ft.b;Tt.push([100/Rt*Bt,"rgb("+Ut+","+Zt+","+Kt+")"])}return Tt;case"hue":return[[0,"#f00"],[16.666,"#ff0"],[33.333,"#0f0"],[50,"#0ff"],[66.666,"#00f"],[83.333,"#f0f"],[100,"#f00"]];case"saturation":var ln=IroColor.hsvToHsl({h:dt.h,s:0,v:dt.v}),hn=IroColor.hsvToHsl({h:dt.h,s:100,v:dt.v});return[[0,"hsl("+ln.h+","+ln.s+"%,"+ln.l+"%)"],[100,"hsl("+hn.h+","+hn.s+"%,"+hn.l+"%)"]];case"value":default:var dn=IroColor.hsvToHsl({h:dt.h,s:dt.s,v:100});return[[0,"#000"],[100,"hsl("+dn.h+","+dn.s+"%,"+dn.l+"%)"]]}}var TAU=Math.PI*2,mod=function(lt,dt){return(lt%dt+dt)%dt},dist=function(lt,dt){return Math.sqrt(lt*lt+dt*dt)};function getHandleRange(ft){return ft.width/2-ft.padding-ft.handleRadius-ft.borderWidth}function isInputInsideWheel(ft,lt,dt){var vt=getWheelDimensions(ft),Tt=vt.cx,Et=vt.cy,Ct=ft.width/2;return dist(Tt-lt,Et-dt)<Ct}function getWheelDimensions(ft){var lt=ft.width/2;return{width:ft.width,radius:lt-ft.borderWidth,cx:lt,cy:lt}}function translateWheelAngle(ft,lt,dt){var vt=ft.wheelAngle,Tt=ft.wheelDirection;return dt&&Tt==="clockwise"?lt=vt+lt:Tt==="clockwise"?lt=360-vt+lt:dt&&Tt==="anticlockwise"?lt=vt+180-lt:Tt==="anticlockwise"&&(lt=vt-lt),mod(lt,360)}function getWheelHandlePosition(ft,lt){var dt=lt.hsv,vt=getWheelDimensions(ft),Tt=vt.cx,Et=vt.cy,Ct=getHandleRange(ft),Rt=(180+translateWheelAngle(ft,dt.h,!0))*(TAU/360),kt=dt.s/100*Ct,Dt=ft.wheelDirection==="clockwise"?-1:1;return{x:Tt+kt*Math.cos(Rt)*Dt,y:Et+kt*Math.sin(Rt)*Dt}}function getWheelValueFromInput(ft,lt,dt){var vt=getWheelDimensions(ft),Tt=vt.cx,Et=vt.cy,Ct=getHandleRange(ft);lt=Tt-lt,dt=Et-dt;var Rt=translateWheelAngle(ft,Math.atan2(-dt,-lt)*(360/TAU)),kt=Math.min(dist(lt,dt),Ct);return{h:Math.round(Rt),s:Math.round(100/Ct*kt)}}function getBoxDimensions(ft){var lt=ft.width,dt=ft.boxHeight,vt=ft.padding,Tt=ft.handleRadius;return{width:lt,height:dt??lt,radius:vt+Tt}}function getBoxValueFromInput(ft,lt,dt){var vt=getBoxDimensions(ft),Tt=vt.width,Et=vt.height,Ct=vt.radius,Rt=Ct,kt=Tt-Ct*2,Dt=Et-Ct*2,Bt=(lt-Rt)/kt*100,Ft=(dt-Rt)/Dt*100;return{s:Math.max(0,Math.min(Bt,100)),v:Math.max(0,Math.min(100-Ft,100))}}function getBoxHandlePosition(ft,lt){var dt=getBoxDimensions(ft),vt=dt.width,Tt=dt.height,Et=dt.radius,Ct=lt.hsv,Rt=Et,kt=vt-Et*2,Dt=Tt-Et*2;return{x:Rt+Ct.s/100*kt,y:Rt+(Dt-Ct.v/100*Dt)}}function getBoxGradients(ft,lt){var dt=lt.hue;return[[[0,"#fff"],[100,"hsl("+dt+",100%,50%)"]],[[0,"rgba(0,0,0,0)"],[100,"#000"]]]}var BASE_ELEMENTS;function resolveSvgUrl(ft){BASE_ELEMENTS||(BASE_ELEMENTS=document.getElementsByTagName("base"));var lt=window.navigator.userAgent,dt=/^((?!chrome|android).)*safari/i.test(lt),vt=/iPhone|iPod|iPad/i.test(lt),Tt=window.location;return(dt||vt)&&BASE_ELEMENTS.length>0?Tt.protocol+"//"+Tt.host+Tt.pathname+Tt.search+ft:ft}function getHandleAtPoint(ft,lt,dt,vt){for(var Tt=0;Tt<vt.length;Tt++){var Et=vt[Tt].x-lt,Ct=vt[Tt].y-dt,Rt=Math.sqrt(Et*Et+Ct*Ct);if(Rt<ft.handleRadius)return Tt}return null}function cssBorderStyles(ft){return{boxSizing:"border-box",border:ft.borderWidth+"px solid "+ft.borderColor}}function cssGradient(ft,lt,dt){return ft+"-gradient("+lt+", "+dt.map(function(vt){var Tt=vt[0],Et=vt[1];return Et+" "+Tt+"%"}).join(",")+")"}function cssValue(ft){return typeof ft=="string"?ft:ft+"px"}var iroColorPickerOptionDefaults={width:300,height:300,color:"#fff",colors:[],padding:6,layoutDirection:"vertical",borderColor:"#fff",borderWidth:0,handleRadius:8,activeHandleRadius:null,handleSvg:null,handleProps:{x:0,y:0},wheelLightness:!0,wheelAngle:0,wheelDirection:"anticlockwise",sliderSize:null,sliderMargin:12,boxHeight:null},SECONDARY_EVENTS=["mousemove","touchmove","mouseup","touchend"],IroComponentWrapper=function(ft){function lt(dt){ft.call(this,dt),this.uid=(Math.random()+1).toString(36).substring(5)}return ft&&(lt.__proto__=ft),lt.prototype=Object.create(ft&&ft.prototype),lt.prototype.constructor=lt,lt.prototype.render=function(vt){var Tt=this.handleEvent.bind(this),Et={onMouseDown:Tt,ontouchstart:Tt},Ct=vt.layoutDirection==="horizontal",Rt=vt.margin===null?vt.sliderMargin:vt.margin,kt={overflow:"visible",display:Ct?"inline-block":"block"};return vt.index>0&&(kt[Ct?"marginLeft":"marginTop"]=Rt),h$8(d$7,null,vt.children(this.uid,Et,kt))},lt.prototype.handleEvent=function(vt){var Tt=this,Et=this.props.onInput,Ct=this.base.getBoundingClientRect();vt.preventDefault();var Rt=vt.touches?vt.changedTouches[0]:vt,kt=Rt.clientX-Ct.left,Dt=Rt.clientY-Ct.top;switch(vt.type){case"mousedown":case"touchstart":var Bt=Et(kt,Dt,0);Bt!==!1&&SECONDARY_EVENTS.forEach(function(Ft){document.addEventListener(Ft,Tt,{passive:!1})});break;case"mousemove":case"touchmove":Et(kt,Dt,1);break;case"mouseup":case"touchend":Et(kt,Dt,2),SECONDARY_EVENTS.forEach(function(Ft){document.removeEventListener(Ft,Tt,{passive:!1})});break}},lt}(m$5);function IroHandle(ft){var lt=ft.r,dt=ft.url,vt=lt,Tt=lt;return h$8("svg",{className:"IroHandle IroHandle--"+ft.index+" "+(ft.isActive?"IroHandle--isActive":""),style:{"-webkit-tap-highlight-color":"rgba(0, 0, 0, 0);",transform:"translate("+cssValue(ft.x)+", "+cssValue(ft.y)+")",willChange:"transform",top:cssValue(-lt),left:cssValue(-lt),width:cssValue(lt*2),height:cssValue(lt*2),position:"absolute",overflow:"visible"}},dt&&h$8("use",Object.assign({xlinkHref:resolveSvgUrl(dt)},ft.props)),!dt&&h$8("circle",{cx:vt,cy:Tt,r:lt,fill:"none","stroke-width":2,stroke:"#000"}),!dt&&h$8("circle",{cx:vt,cy:Tt,r:lt-2,fill:ft.fill,"stroke-width":2,stroke:"#fff"}))}IroHandle.defaultProps={fill:"none",x:0,y:0,r:8,url:null,props:{x:0,y:0}};function IroSlider(ft){var lt=ft.activeIndex,dt=lt!==void 0&&lt<ft.colors.length?ft.colors[lt]:ft.color,vt=getSliderDimensions(ft),Tt=vt.width,Et=vt.height,Ct=vt.radius,Rt=getSliderHandlePosition(ft,dt),kt=getSliderGradient(ft,dt);function Dt(Bt,Ft,Ut){var Zt=getSliderValueFromInput(ft,Bt,Ft);ft.parent.inputActive=!0,dt[ft.sliderType]=Zt,ft.onInput(Ut,ft.id)}return h$8(IroComponentWrapper,Object.assign({},ft,{onInput:Dt}),function(Bt,Ft,Ut){return h$8("div",Object.assign({},Ft,{className:"IroSlider",style:Object.assign({},{position:"relative",width:cssValue(Tt),height:cssValue(Et),borderRadius:cssValue(Ct),background:"conic-gradient(#ccc 25%, #fff 0 50%, #ccc 0 75%, #fff 0)",backgroundSize:"8px 8px"},Ut)}),h$8("div",{className:"IroSliderGradient",style:Object.assign({},{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:cssValue(Ct),background:cssGradient("linear",ft.layoutDirection==="horizontal"?"to top":"to right",kt)},cssBorderStyles(ft))}),h$8(IroHandle,{isActive:!0,index:dt.index,r:ft.handleRadius,url:ft.handleSvg,props:ft.handleProps,x:Rt.x,y:Rt.y}))})}IroSlider.defaultProps=Object.assign({},sliderDefaultOptions);function IroBox(ft){var lt=getBoxDimensions(ft),dt=lt.width,vt=lt.height,Tt=lt.radius,Et=ft.colors,Ct=ft.parent,Rt=ft.activeIndex,kt=Rt!==void 0&&Rt<ft.colors.length?ft.colors[Rt]:ft.color,Dt=getBoxGradients(ft,kt),Bt=Et.map(function(Ut){return getBoxHandlePosition(ft,Ut)});function Ft(Ut,Zt,Kt){if(Kt===0){var ln=getHandleAtPoint(ft,Ut,Zt,Bt);ln!==null?Ct.setActiveColor(ln):(Ct.inputActive=!0,kt.hsv=getBoxValueFromInput(ft,Ut,Zt),ft.onInput(Kt,ft.id))}else Kt===1&&(Ct.inputActive=!0,kt.hsv=getBoxValueFromInput(ft,Ut,Zt));ft.onInput(Kt,ft.id)}return h$8(IroComponentWrapper,Object.assign({},ft,{onInput:Ft}),function(Ut,Zt,Kt){return h$8("div",Object.assign({},Zt,{className:"IroBox",style:Object.assign({},{width:cssValue(dt),height:cssValue(vt),position:"relative"},Kt)}),h$8("div",{className:"IroBox",style:Object.assign({},{width:"100%",height:"100%",borderRadius:cssValue(Tt)},cssBorderStyles(ft),{background:cssGradient("linear","to bottom",Dt[1])+","+cssGradient("linear","to right",Dt[0])})}),Et.filter(function(ln){return ln!==kt}).map(function(ln){return h$8(IroHandle,{isActive:!1,index:ln.index,fill:ln.hslString,r:ft.handleRadius,url:ft.handleSvg,props:ft.handleProps,x:Bt[ln.index].x,y:Bt[ln.index].y})}),h$8(IroHandle,{isActive:!0,index:kt.index,fill:kt.hslString,r:ft.activeHandleRadius||ft.handleRadius,url:ft.handleSvg,props:ft.handleProps,x:Bt[kt.index].x,y:Bt[kt.index].y}))})}var HUE_GRADIENT_CLOCKWISE="conic-gradient(red, yellow, lime, aqua, blue, magenta, red)",HUE_GRADIENT_ANTICLOCKWISE="conic-gradient(red, magenta, blue, aqua, lime, yellow, red)";function IroWheel(ft){var lt=getWheelDimensions(ft),dt=lt.width,vt=ft.colors;ft.borderWidth;var Tt=ft.parent,Et=ft.color,Ct=Et.hsv,Rt=vt.map(function(Bt){return getWheelHandlePosition(ft,Bt)}),kt={position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",boxSizing:"border-box"};function Dt(Bt,Ft,Ut){if(Ut===0){if(!isInputInsideWheel(ft,Bt,Ft))return!1;var Zt=getHandleAtPoint(ft,Bt,Ft,Rt);Zt!==null?Tt.setActiveColor(Zt):(Tt.inputActive=!0,Et.hsv=getWheelValueFromInput(ft,Bt,Ft),ft.onInput(Ut,ft.id))}else Ut===1&&(Tt.inputActive=!0,Et.hsv=getWheelValueFromInput(ft,Bt,Ft));ft.onInput(Ut,ft.id)}return h$8(IroComponentWrapper,Object.assign({},ft,{onInput:Dt}),function(Bt,Ft,Ut){return h$8("div",Object.assign({},Ft,{className:"IroWheel",style:Object.assign({},{width:cssValue(dt),height:cssValue(dt),position:"relative"},Ut)}),h$8("div",{className:"IroWheelHue",style:Object.assign({},kt,{transform:"rotateZ("+(ft.wheelAngle+90)+"deg)",background:ft.wheelDirection==="clockwise"?HUE_GRADIENT_CLOCKWISE:HUE_GRADIENT_ANTICLOCKWISE})}),h$8("div",{className:"IroWheelSaturation",style:Object.assign({},kt,{background:"radial-gradient(circle closest-side, #fff, transparent)"})}),ft.wheelLightness&&h$8("div",{className:"IroWheelLightness",style:Object.assign({},kt,{background:"#000",opacity:1-Ct.v/100})}),h$8("div",{className:"IroWheelBorder",style:Object.assign({},kt,cssBorderStyles(ft))}),vt.filter(function(Zt){return Zt!==Et}).map(function(Zt){return h$8(IroHandle,{isActive:!1,index:Zt.index,fill:Zt.hslString,r:ft.handleRadius,url:ft.handleSvg,props:ft.handleProps,x:Rt[Zt.index].x,y:Rt[Zt.index].y})}),h$8(IroHandle,{isActive:!0,index:Et.index,fill:Et.hslString,r:ft.activeHandleRadius||ft.handleRadius,url:ft.handleSvg,props:ft.handleProps,x:Rt[Et.index].x,y:Rt[Et.index].y}))})}function createWidget(ft){var lt=function(dt,vt){var Tt,Et=document.createElement("div");I$3(h$8(ft,Object.assign({},{ref:function(Rt){return Tt=Rt}},vt)),Et);function Ct(){var Rt=dt instanceof Element?dt:document.querySelector(dt);Rt.appendChild(Tt.base),Tt.onMount(Rt)}return document.readyState!=="loading"?Ct():document.addEventListener("DOMContentLoaded",Ct),Tt};return lt.prototype=ft.prototype,Object.assign(lt,ft),lt.__component=ft,lt}var IroColorPicker=function(ft){function lt(dt){var vt=this;ft.call(this,dt),this.colors=[],this.inputActive=!1,this.events={},this.activeEvents={},this.deferredEvents={},this.id=dt.id;var Tt=dt.colors.length>0?dt.colors:[dt.color];Tt.forEach(function(Et){return vt.addColor(Et)}),this.setActiveColor(0),this.state=Object.assign({},dt,{color:this.color,colors:this.colors,layout:dt.layout})}return ft&&(lt.__proto__=ft),lt.prototype=Object.create(ft&&ft.prototype),lt.prototype.constructor=lt,lt.prototype.addColor=function(vt,Tt){Tt===void 0&&(Tt=this.colors.length);var Et=new IroColor(vt,this.onColorChange.bind(this));this.colors.splice(Tt,0,Et),this.colors.forEach(function(Ct,Rt){return Ct.index=Rt}),this.state&&this.setState({colors:this.colors}),this.deferredEmit("color:init",Et)},lt.prototype.removeColor=function(vt){var Tt=this.colors.splice(vt,1)[0];Tt.unbind(),this.colors.forEach(function(Et,Ct){return Et.index=Ct}),this.state&&this.setState({colors:this.colors}),Tt.index===this.color.index&&this.setActiveColor(0),this.emit("color:remove",Tt)},lt.prototype.setActiveColor=function(vt){this.color=this.colors[vt],this.state&&this.setState({color:this.color}),this.emit("color:setActive",this.color)},lt.prototype.setColors=function(vt,Tt){var Et=this;Tt===void 0&&(Tt=0),this.colors.forEach(function(Ct){return Ct.unbind()}),this.colors=[],vt.forEach(function(Ct){return Et.addColor(Ct)}),this.setActiveColor(Tt),this.emit("color:setAll",this.colors)},lt.prototype.on=function(vt,Tt){var Et=this,Ct=this.events;(Array.isArray(vt)?vt:[vt]).forEach(function(Rt){(Ct[Rt]||(Ct[Rt]=[])).push(Tt),Et.deferredEvents[Rt]&&(Et.deferredEvents[Rt].forEach(function(kt){Tt.apply(null,kt)}),Et.deferredEvents[Rt]=[])})},lt.prototype.off=function(vt,Tt){var Et=this;(Array.isArray(vt)?vt:[vt]).forEach(function(Ct){var Rt=Et.events[Ct];Rt&&Rt.splice(Rt.indexOf(Tt),1)})},lt.prototype.emit=function(vt){for(var Tt=this,Et=[],Ct=arguments.length-1;Ct-- >0;)Et[Ct]=arguments[Ct+1];var Rt=this.activeEvents,kt=Rt.hasOwnProperty(vt)?Rt[vt]:!1;if(!kt){Rt[vt]=!0;var Dt=this.events[vt]||[];Dt.forEach(function(Bt){return Bt.apply(Tt,Et)}),Rt[vt]=!1}},lt.prototype.deferredEmit=function(vt){for(var Tt,Et=[],Ct=arguments.length-1;Ct-- >0;)Et[Ct]=arguments[Ct+1];var Rt=this.deferredEvents;(Tt=this).emit.apply(Tt,[vt].concat(Et)),(Rt[vt]||(Rt[vt]=[])).push(Et)},lt.prototype.setOptions=function(vt){this.setState(vt)},lt.prototype.resize=function(vt){this.setOptions({width:vt})},lt.prototype.reset=function(){this.colors.forEach(function(vt){return vt.reset()}),this.setState({colors:this.colors})},lt.prototype.onMount=function(vt){this.el=vt,this.deferredEmit("mount",this)},lt.prototype.onColorChange=function(vt,Tt){this.setState({color:this.color}),this.inputActive&&(this.inputActive=!1,this.emit("input:change",vt,Tt)),this.emit("color:change",vt,Tt)},lt.prototype.emitInputEvent=function(vt,Tt){vt===0?this.emit("input:start",this.color,Tt):vt===1?this.emit("input:move",this.color,Tt):vt===2&&this.emit("input:end",this.color,Tt)},lt.prototype.render=function(vt,Tt){var Et=this,Ct=Tt.layout;if(!Array.isArray(Ct)){switch(Ct){default:Ct=[{component:IroWheel},{component:IroSlider}]}Tt.transparency&&Ct.push({component:IroSlider,options:{sliderType:"alpha"}})}return h$8("div",{class:"IroColorPicker",id:Tt.id,style:{display:Tt.display}},Ct.map(function(Rt,kt){var Dt=Rt.component,Bt=Rt.options;return h$8(Dt,Object.assign({},Tt,Bt,{ref:void 0,onInput:Et.emitInputEvent.bind(Et),parent:Et,index:kt}))}))},lt}(m$5);IroColorPicker.defaultProps=Object.assign({},iroColorPickerOptionDefaults,{colors:[],display:"block",id:null,layout:"default",margin:null});var IroColorPickerWidget=createWidget(IroColorPicker),iro;(function(ft){ft.version="5.5.2",ft.Color=IroColor,ft.ColorPicker=IroColorPickerWidget,function(lt){lt.h=h$8,lt.ComponentBase=IroComponentWrapper,lt.Handle=IroHandle,lt.Slider=IroSlider,lt.Wheel=IroWheel,lt.Box=IroBox}(ft.ui||(ft.ui={}))})(iro||(iro={}));var iro$1=iro;class ColorWheelField extends coreBrowserExports.FieldColour{constructor(lt,dt=150,vt={}){super(lt),this.color=lt,this.width=dt,this.options=vt}static fromJson(lt){return new ColorWheelField(lt.color,lt.size||150,lt.options||{})}showEditor_(){const lt=document.createElement("div");coreBrowserExports.DropDownDiv.getContentDiv().appendChild(lt),lt.classList.add("blockly-color-wheel-container"),iro$1.ColorPicker(lt,{width:this.width,color:this.getValue(),...this.options}).on("color:change",vt=>{this.setValue(vt.hexString)}),coreBrowserExports.DropDownDiv.showPositionedByField(this,()=>lt.remove())}}coreBrowserExports.fieldRegistry.register("color_wheel",ColorWheelField);function hexToRgb(ft){var lt=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(ft);return lt?{r:parseInt(lt[1],16),g:parseInt(lt[2],16),b:parseInt(lt[3],16)}:null}const block_color={name:"color",block:{init:function(){this.appendDummyInput().appendField("set LED color:").appendField(new ColorWheelField("#00FF00",150,{layoutDirection:"horizontal"}),"color"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},pythonGenerator:(ft,lt)=>'setLEDColorFromHex(cf, "'+ft.getFieldValue("color")+`")
`,javascriptGenerator:(ft,lt)=>{var dt=ft.getFieldValue("color"),vt=hexToRgb(dt);return`duration += simulator.setColor(group_state, ${vt==null?void 0:vt.r},${vt==null?void 0:vt.g},${vt==null?void 0:vt.b});`}},CUSTOM_BLOCKS={block_go_to_speed,block_go_to,block_land,block_move_angles,block_move_xyz,block_move,block_start_linear_motion,block_stop,block_takeoff,block_turn,block_circle,block_start_circle,block_start_move,block_start_turn,block_get_a_position,block_set_default_height,block_set_default_speed,block_set_default_xy,block_color};Object.values(CUSTOM_BLOCKS).forEach(ft=>{Blockly.Blocks[ft.name]=ft.block,pythonExports.pythonGenerator[ft.name]=lt=>ft.pythonGenerator(lt,pythonExports.pythonGenerator),javascriptExports.javascriptGenerator[ft.name]=lt=>ft.javascriptGenerator(lt,javascriptExports.javascriptGenerator)});const blockToToolbox=ft=>({kind:"block",type:ft.name}),blocklyToolboxConfiguration={kind:"categoryToolbox",contents:[{kind:"category",name:"Motion",contents:[blockToToolbox(CUSTOM_BLOCKS.block_go_to),blockToToolbox(CUSTOM_BLOCKS.block_go_to_speed),blockToToolbox(CUSTOM_BLOCKS.block_takeoff),blockToToolbox(CUSTOM_BLOCKS.block_land),blockToToolbox(CUSTOM_BLOCKS.block_move_angles),blockToToolbox(CUSTOM_BLOCKS.block_move_xyz),blockToToolbox(CUSTOM_BLOCKS.block_move),blockToToolbox(CUSTOM_BLOCKS.block_start_linear_motion),blockToToolbox(CUSTOM_BLOCKS.block_stop),blockToToolbox(CUSTOM_BLOCKS.block_turn)]},{kind:"category",name:"Curves",contents:[blockToToolbox(CUSTOM_BLOCKS.block_circle),blockToToolbox(CUSTOM_BLOCKS.block_start_circle),blockToToolbox(CUSTOM_BLOCKS.block_start_move),blockToToolbox(CUSTOM_BLOCKS.block_start_turn)]},{kind:"category",name:"Config",contents:[blockToToolbox(CUSTOM_BLOCKS.block_get_a_position),blockToToolbox(CUSTOM_BLOCKS.block_set_default_height),blockToToolbox(CUSTOM_BLOCKS.block_set_default_speed),blockToToolbox(CUSTOM_BLOCKS.block_set_default_xy)]},{kind:"category",name:"Colors",contents:[blockToToolbox(CUSTOM_BLOCKS.block_color)]},{kind:"category",name:"Logic",colour:"#5C81A6",contents:[{kind:"block",type:"controls_if"},{kind:"block",type:"logic_compare"}]},{kind:"category",name:"Math",colour:"#5CA65C",contents:[{kind:"block",type:"math_round"},{kind:"block",type:"math_number"}]},{kind:"category",name:"Custom",colour:"#5CA699",contents:[{kind:"block",type:"new_boundary_function"},{kind:"block",type:"return"}]}]};function uuid$1(){const ft=["a","b","c","d","e","f","0","1","2","3","4","5","6","7","8","9"];let lt=[];for(let dt=0;dt<36;dt++)dt===8||dt===13||dt===18||dt===23?lt[dt]="-":lt[dt]=ft[Math.ceil(Math.random()*ft.length-1)];return lt.join("")}var uuid_1=uuid$1;const uuid$2=getDefaultExportFromCjs(uuid_1),createStoreImpl=ft=>{let lt;const dt=new Set,vt=(kt,Dt)=>{const Bt=typeof kt=="function"?kt(lt):kt;if(!Object.is(Bt,lt)){const Ft=lt;lt=Dt??typeof Bt!="object"?Bt:Object.assign({},lt,Bt),dt.forEach(Ut=>Ut(lt,Ft))}},Tt=()=>lt,Rt={setState:vt,getState:Tt,subscribe:kt=>(dt.add(kt),()=>dt.delete(kt)),destroy:()=>{({BASE_URL:"/MultiRobotArt",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),dt.clear()}};return lt=ft(vt,Tt,Rt),Rt},createStore$2=ft=>ft?createStoreImpl(ft):createStoreImpl;var withSelector={exports:{}},withSelector_production_min={},shim={exports:{}},useSyncExternalStoreShim_production_min={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e$1=reactExports;function h$7(ft,lt){return ft===lt&&(ft!==0||1/ft===1/lt)||ft!==ft&&lt!==lt}var k$3=typeof Object.is=="function"?Object.is:h$7,l$7=e$1.useState,m$4=e$1.useEffect,n$6=e$1.useLayoutEffect,p$7=e$1.useDebugValue;function q$3(ft,lt){var dt=lt(),vt=l$7({inst:{value:dt,getSnapshot:lt}}),Tt=vt[0].inst,Et=vt[1];return n$6(function(){Tt.value=dt,Tt.getSnapshot=lt,r$8(Tt)&&Et({inst:Tt})},[ft,dt,lt]),m$4(function(){return r$8(Tt)&&Et({inst:Tt}),ft(function(){r$8(Tt)&&Et({inst:Tt})})},[ft]),p$7(dt),dt}function r$8(ft){var lt=ft.getSnapshot;ft=ft.value;try{var dt=lt();return!k$3(ft,dt)}catch{return!0}}function t$4(ft,lt){return lt()}var u$7=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?t$4:q$3;useSyncExternalStoreShim_production_min.useSyncExternalStore=e$1.useSyncExternalStore!==void 0?e$1.useSyncExternalStore:u$7;shim.exports=useSyncExternalStoreShim_production_min;var shimExports=shim.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h$6=reactExports,n$5=shimExports;function p$6(ft,lt){return ft===lt&&(ft!==0||1/ft===1/lt)||ft!==ft&&lt!==lt}var q$2=typeof Object.is=="function"?Object.is:p$6,r$7=n$5.useSyncExternalStore,t$3=h$6.useRef,u$6=h$6.useEffect,v$5=h$6.useMemo,w$5=h$6.useDebugValue;withSelector_production_min.useSyncExternalStoreWithSelector=function(ft,lt,dt,vt,Tt){var Et=t$3(null);if(Et.current===null){var Ct={hasValue:!1,value:null};Et.current=Ct}else Ct=Et.current;Et=v$5(function(){function kt(Zt){if(!Dt){if(Dt=!0,Bt=Zt,Zt=vt(Zt),Tt!==void 0&&Ct.hasValue){var Kt=Ct.value;if(Tt(Kt,Zt))return Ft=Kt}return Ft=Zt}if(Kt=Ft,q$2(Bt,Zt))return Kt;var ln=vt(Zt);return Tt!==void 0&&Tt(Kt,ln)?Kt:(Bt=Zt,Ft=ln)}var Dt=!1,Bt,Ft,Ut=dt===void 0?null:dt;return[function(){return kt(lt())},Ut===null?void 0:function(){return kt(Ut())}]},[lt,dt,vt,Tt]);var Rt=r$7(ft,Et[0],Et[1]);return u$6(function(){Ct.hasValue=!0,Ct.value=Rt},[Rt]),w$5(Rt),Rt};withSelector.exports=withSelector_production_min;var withSelectorExports=withSelector.exports;const useSyncExternalStoreExports=getDefaultExportFromCjs(withSelectorExports),{useSyncExternalStoreWithSelector}=useSyncExternalStoreExports;function useStore$1(ft,lt=ft.getState,dt){const vt=useSyncExternalStoreWithSelector(ft.subscribe,ft.getState,ft.getServerState||ft.getState,lt,dt);return reactExports.useDebugValue(vt),vt}const createImpl=ft=>{({BASE_URL:"/MultiRobotArt",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&typeof ft!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const lt=typeof ft=="function"?createStore$2(ft):ft,dt=(vt,Tt)=>useStore$1(lt,vt,Tt);return Object.assign(dt,lt),dt},create$2=ft=>ft?createImpl(ft):createImpl,subscribeWithSelectorImpl=ft=>(lt,dt,vt)=>{const Tt=vt.subscribe;return vt.subscribe=(Ct,Rt,kt)=>{let Dt=Ct;if(Rt){const Bt=(kt==null?void 0:kt.equalityFn)||Object.is;let Ft=Ct(vt.getState());Dt=Ut=>{const Zt=Ct(Ut);if(!Bt(Ft,Zt)){const Kt=Ft;Rt(Ft=Zt,Kt)}},kt!=null&&kt.fireImmediately&&Rt(Ft,Ft)}return Tt(Dt)},ft(lt,dt,vt)},subscribeWithSelector=subscribeWithSelectorImpl;function createJSONStorage(ft){let lt;try{lt=ft()}catch{return}return{getItem:vt=>{var Tt;const Et=Rt=>Rt===null?null:JSON.parse(Rt),Ct=(Tt=lt.getItem(vt))!=null?Tt:null;return Ct instanceof Promise?Ct.then(Et):Et(Ct)},setItem:(vt,Tt)=>lt.setItem(vt,JSON.stringify(Tt)),removeItem:vt=>lt.removeItem(vt)}}const toThenable=ft=>lt=>{try{const dt=ft(lt);return dt instanceof Promise?dt:{then(vt){return toThenable(vt)(dt)},catch(vt){return this}}}catch(dt){return{then(vt){return this},catch(vt){return toThenable(vt)(dt)}}}},oldImpl=(ft,lt)=>(dt,vt,Tt)=>{let Et={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:hn=>hn,version:0,merge:(hn,dn)=>({...dn,...hn}),...lt},Ct=!1;const Rt=new Set,kt=new Set;let Dt;try{Dt=Et.getStorage()}catch{}if(!Dt)return ft((...hn)=>{console.warn(`[zustand persist middleware] Unable to update item '${Et.name}', the given storage is currently unavailable.`),dt(...hn)},vt,Tt);const Bt=toThenable(Et.serialize),Ft=()=>{const hn=Et.partialize({...vt()});let dn;const pn=Bt({state:hn,version:Et.version}).then(mn=>Dt.setItem(Et.name,mn)).catch(mn=>{dn=mn});if(dn)throw dn;return pn},Ut=Tt.setState;Tt.setState=(hn,dn)=>{Ut(hn,dn),Ft()};const Zt=ft((...hn)=>{dt(...hn),Ft()},vt,Tt);let Kt;const ln=()=>{var hn;if(!Dt)return;Ct=!1,Rt.forEach(pn=>pn(vt()));const dn=((hn=Et.onRehydrateStorage)==null?void 0:hn.call(Et,vt()))||void 0;return toThenable(Dt.getItem.bind(Dt))(Et.name).then(pn=>{if(pn)return Et.deserialize(pn)}).then(pn=>{if(pn)if(typeof pn.version=="number"&&pn.version!==Et.version){if(Et.migrate)return Et.migrate(pn.state,pn.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return pn.state}).then(pn=>{var mn;return Kt=Et.merge(pn,(mn=vt())!=null?mn:Zt),dt(Kt,!0),Ft()}).then(()=>{dn==null||dn(Kt,void 0),Ct=!0,kt.forEach(pn=>pn(Kt))}).catch(pn=>{dn==null||dn(void 0,pn)})};return Tt.persist={setOptions:hn=>{Et={...Et,...hn},hn.getStorage&&(Dt=hn.getStorage())},clearStorage:()=>{Dt==null||Dt.removeItem(Et.name)},getOptions:()=>Et,rehydrate:()=>ln(),hasHydrated:()=>Ct,onHydrate:hn=>(Rt.add(hn),()=>{Rt.delete(hn)}),onFinishHydration:hn=>(kt.add(hn),()=>{kt.delete(hn)})},ln(),Kt||Zt},newImpl=(ft,lt)=>(dt,vt,Tt)=>{let Et={storage:createJSONStorage(()=>localStorage),partialize:ln=>ln,version:0,merge:(ln,hn)=>({...hn,...ln}),...lt},Ct=!1;const Rt=new Set,kt=new Set;let Dt=Et.storage;if(!Dt)return ft((...ln)=>{console.warn(`[zustand persist middleware] Unable to update item '${Et.name}', the given storage is currently unavailable.`),dt(...ln)},vt,Tt);const Bt=()=>{const ln=Et.partialize({...vt()});return Dt.setItem(Et.name,{state:ln,version:Et.version})},Ft=Tt.setState;Tt.setState=(ln,hn)=>{Ft(ln,hn),Bt()};const Ut=ft((...ln)=>{dt(...ln),Bt()},vt,Tt);let Zt;const Kt=()=>{var ln;if(!Dt)return;Ct=!1,Rt.forEach(dn=>dn(vt()));const hn=((ln=Et.onRehydrateStorage)==null?void 0:ln.call(Et,vt()))||void 0;return toThenable(Dt.getItem.bind(Dt))(Et.name).then(dn=>{if(dn)if(typeof dn.version=="number"&&dn.version!==Et.version){if(Et.migrate)return Et.migrate(dn.state,dn.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return dn.state}).then(dn=>{var pn;return Zt=Et.merge(dn,(pn=vt())!=null?pn:Ut),dt(Zt,!0),Bt()}).then(()=>{hn==null||hn(Zt,void 0),Ct=!0,kt.forEach(dn=>dn(Zt))}).catch(dn=>{hn==null||hn(void 0,dn)})};return Tt.persist={setOptions:ln=>{Et={...Et,...ln},ln.storage&&(Dt=ln.storage)},clearStorage:()=>{Dt==null||Dt.removeItem(Et.name)},getOptions:()=>Et,rehydrate:()=>Kt(),hasHydrated:()=>Ct,onHydrate:ln=>(Rt.add(ln),()=>{Rt.delete(ln)}),onFinishHydration:ln=>(kt.add(ln),()=>{kt.delete(ln)})},Kt(),Zt||Ut},persistImpl=(ft,lt)=>"getStorage"in lt||"serialize"in lt||"deserialize"in lt?(({BASE_URL:"/MultiRobotArt",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),oldImpl(ft,lt)):newImpl(ft,lt),persist=persistImpl;function n$4(ft){for(var lt=arguments.length,dt=Array(lt>1?lt-1:0),vt=1;vt<lt;vt++)dt[vt-1]=arguments[vt];throw Error("[Immer] minified error nr: "+ft+(dt.length?" "+dt.map(function(Tt){return"'"+Tt+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function r$6(ft){return!!ft&&!!ft[Q$3]}function t$2(ft){var lt;return!!ft&&(function(dt){if(!dt||typeof dt!="object")return!1;var vt=Object.getPrototypeOf(dt);if(vt===null)return!0;var Tt=Object.hasOwnProperty.call(vt,"constructor")&&vt.constructor;return Tt===Object||typeof Tt=="function"&&Function.toString.call(Tt)===Z$1}(ft)||Array.isArray(ft)||!!ft[L$2]||!!(!((lt=ft.constructor)===null||lt===void 0)&&lt[L$2])||s$3(ft)||v$4(ft))}function i$6(ft,lt,dt){dt===void 0&&(dt=!1),o$4(ft)===0?(dt?Object.keys:nn$1)(ft).forEach(function(vt){dt&&typeof vt=="symbol"||lt(vt,ft[vt],ft)}):ft.forEach(function(vt,Tt){return lt(Tt,vt,ft)})}function o$4(ft){var lt=ft[Q$3];return lt?lt.i>3?lt.i-4:lt.i:Array.isArray(ft)?1:s$3(ft)?2:v$4(ft)?3:0}function u$5(ft,lt){return o$4(ft)===2?ft.has(lt):Object.prototype.hasOwnProperty.call(ft,lt)}function a$3(ft,lt){return o$4(ft)===2?ft.get(lt):ft[lt]}function f$5(ft,lt,dt){var vt=o$4(ft);vt===2?ft.set(lt,dt):vt===3?ft.add(dt):ft[lt]=dt}function c$6(ft,lt){return ft===lt?ft!==0||1/ft==1/lt:ft!=ft&&lt!=lt}function s$3(ft){return X$1&&ft instanceof Map}function v$4(ft){return q$1&&ft instanceof Set}function p$5(ft){return ft.o||ft.t}function l$6(ft){if(Array.isArray(ft))return Array.prototype.slice.call(ft);var lt=rn$1(ft);delete lt[Q$3];for(var dt=nn$1(lt),vt=0;vt<dt.length;vt++){var Tt=dt[vt],Et=lt[Tt];Et.writable===!1&&(Et.writable=!0,Et.configurable=!0),(Et.get||Et.set)&&(lt[Tt]={configurable:!0,writable:!0,enumerable:Et.enumerable,value:ft[Tt]})}return Object.create(Object.getPrototypeOf(ft),lt)}function d$6(ft,lt){return lt===void 0&&(lt=!1),y$5(ft)||r$6(ft)||!t$2(ft)||(o$4(ft)>1&&(ft.set=ft.add=ft.clear=ft.delete=h$5),Object.freeze(ft),lt&&i$6(ft,function(dt,vt){return d$6(vt,!0)},!0)),ft}function h$5(){n$4(2)}function y$5(ft){return ft==null||typeof ft!="object"||Object.isFrozen(ft)}function b$5(ft){var lt=tn[ft];return lt||n$4(18,ft),lt}function _$1(){return U$1}function j$2(ft,lt){lt&&(b$5("Patches"),ft.u=[],ft.s=[],ft.v=lt)}function O$3(ft){g$3(ft),ft.p.forEach(S$2),ft.p=null}function g$3(ft){ft===U$1&&(U$1=ft.l)}function w$4(ft){return U$1={p:[],l:U$1,h:ft,m:!0,_:0}}function S$2(ft){var lt=ft[Q$3];lt.i===0||lt.i===1?lt.j():lt.O=!0}function P$2(ft,lt){lt._=lt.p.length;var dt=lt.p[0],vt=ft!==void 0&&ft!==dt;return lt.h.g||b$5("ES5").S(lt,ft,vt),vt?(dt[Q$3].P&&(O$3(lt),n$4(4)),t$2(ft)&&(ft=M$1(lt,ft),lt.l||x$4(lt,ft)),lt.u&&b$5("Patches").M(dt[Q$3].t,ft,lt.u,lt.s)):ft=M$1(lt,dt,[]),O$3(lt),lt.u&&lt.v(lt.u,lt.s),ft!==H$3?ft:void 0}function M$1(ft,lt,dt){if(y$5(lt))return lt;var vt=lt[Q$3];if(!vt)return i$6(lt,function(Rt,kt){return A$2(ft,vt,lt,Rt,kt,dt)},!0),lt;if(vt.A!==ft)return lt;if(!vt.P)return x$4(ft,vt.t,!0),vt.t;if(!vt.I){vt.I=!0,vt.A._--;var Tt=vt.i===4||vt.i===5?vt.o=l$6(vt.k):vt.o,Et=Tt,Ct=!1;vt.i===3&&(Et=new Set(Tt),Tt.clear(),Ct=!0),i$6(Et,function(Rt,kt){return A$2(ft,vt,Tt,Rt,kt,dt,Ct)}),x$4(ft,Tt,!1),dt&&ft.u&&b$5("Patches").N(vt,dt,ft.u,ft.s)}return vt.o}function A$2(ft,lt,dt,vt,Tt,Et,Ct){if(r$6(Tt)){var Rt=M$1(ft,Tt,Et&&lt&&lt.i!==3&&!u$5(lt.R,vt)?Et.concat(vt):void 0);if(f$5(dt,vt,Rt),!r$6(Rt))return;ft.m=!1}else Ct&&dt.add(Tt);if(t$2(Tt)&&!y$5(Tt)){if(!ft.h.D&&ft._<1)return;M$1(ft,Tt),lt&&lt.A.l||x$4(ft,Tt)}}function x$4(ft,lt,dt){dt===void 0&&(dt=!1),!ft.l&&ft.h.D&&ft.m&&d$6(lt,dt)}function z$3(ft,lt){var dt=ft[Q$3];return(dt?p$5(dt):ft)[lt]}function I$2(ft,lt){if(lt in ft)for(var dt=Object.getPrototypeOf(ft);dt;){var vt=Object.getOwnPropertyDescriptor(dt,lt);if(vt)return vt;dt=Object.getPrototypeOf(dt)}}function k$2(ft){ft.P||(ft.P=!0,ft.l&&k$2(ft.l))}function E$5(ft){ft.o||(ft.o=l$6(ft.t))}function N$1(ft,lt,dt){var vt=s$3(lt)?b$5("MapSet").F(lt,dt):v$4(lt)?b$5("MapSet").T(lt,dt):ft.g?function(Tt,Et){var Ct=Array.isArray(Tt),Rt={i:Ct?1:0,A:Et?Et.A:_$1(),P:!1,I:!1,R:{},l:Et,t:Tt,k:null,o:null,j:null,C:!1},kt=Rt,Dt=en;Ct&&(kt=[Rt],Dt=on$1);var Bt=Proxy.revocable(kt,Dt),Ft=Bt.revoke,Ut=Bt.proxy;return Rt.k=Ut,Rt.j=Ft,Ut}(lt,dt):b$5("ES5").J(lt,dt);return(dt?dt.A:_$1()).p.push(vt),vt}function R$2(ft){return r$6(ft)||n$4(22,ft),function lt(dt){if(!t$2(dt))return dt;var vt,Tt=dt[Q$3],Et=o$4(dt);if(Tt){if(!Tt.P&&(Tt.i<4||!b$5("ES5").K(Tt)))return Tt.t;Tt.I=!0,vt=D$4(dt,Et),Tt.I=!1}else vt=D$4(dt,Et);return i$6(vt,function(Ct,Rt){Tt&&a$3(Tt.t,Ct)===Rt||f$5(vt,Ct,lt(Rt))}),Et===3?new Set(vt):vt}(ft)}function D$4(ft,lt){switch(lt){case 2:return new Map(ft);case 3:return Array.from(ft)}return l$6(ft)}var G,U$1,W$3=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",X$1=typeof Map<"u",q$1=typeof Set<"u",B$1=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",H$3=W$3?Symbol.for("immer-nothing"):((G={})["immer-nothing"]=!0,G),L$2=W$3?Symbol.for("immer-draftable"):"__$immer_draftable",Q$3=W$3?Symbol.for("immer-state"):"__$immer_state",Z$1=""+Object.prototype.constructor,nn$1=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(ft){return Object.getOwnPropertyNames(ft).concat(Object.getOwnPropertySymbols(ft))}:Object.getOwnPropertyNames,rn$1=Object.getOwnPropertyDescriptors||function(ft){var lt={};return nn$1(ft).forEach(function(dt){lt[dt]=Object.getOwnPropertyDescriptor(ft,dt)}),lt},tn={},en={get:function(ft,lt){if(lt===Q$3)return ft;var dt=p$5(ft);if(!u$5(dt,lt))return function(Tt,Et,Ct){var Rt,kt=I$2(Et,Ct);return kt?"value"in kt?kt.value:(Rt=kt.get)===null||Rt===void 0?void 0:Rt.call(Tt.k):void 0}(ft,dt,lt);var vt=dt[lt];return ft.I||!t$2(vt)?vt:vt===z$3(ft.t,lt)?(E$5(ft),ft.o[lt]=N$1(ft.A.h,vt,ft)):vt},has:function(ft,lt){return lt in p$5(ft)},ownKeys:function(ft){return Reflect.ownKeys(p$5(ft))},set:function(ft,lt,dt){var vt=I$2(p$5(ft),lt);if(vt!=null&&vt.set)return vt.set.call(ft.k,dt),!0;if(!ft.P){var Tt=z$3(p$5(ft),lt),Et=Tt==null?void 0:Tt[Q$3];if(Et&&Et.t===dt)return ft.o[lt]=dt,ft.R[lt]=!1,!0;if(c$6(dt,Tt)&&(dt!==void 0||u$5(ft.t,lt)))return!0;E$5(ft),k$2(ft)}return ft.o[lt]===dt&&(dt!==void 0||lt in ft.o)||Number.isNaN(dt)&&Number.isNaN(ft.o[lt])||(ft.o[lt]=dt,ft.R[lt]=!0),!0},deleteProperty:function(ft,lt){return z$3(ft.t,lt)!==void 0||lt in ft.t?(ft.R[lt]=!1,E$5(ft),k$2(ft)):delete ft.R[lt],ft.o&&delete ft.o[lt],!0},getOwnPropertyDescriptor:function(ft,lt){var dt=p$5(ft),vt=Reflect.getOwnPropertyDescriptor(dt,lt);return vt&&{writable:!0,configurable:ft.i!==1||lt!=="length",enumerable:vt.enumerable,value:dt[lt]}},defineProperty:function(){n$4(11)},getPrototypeOf:function(ft){return Object.getPrototypeOf(ft.t)},setPrototypeOf:function(){n$4(12)}},on$1={};i$6(en,function(ft,lt){on$1[ft]=function(){return arguments[0]=arguments[0][0],lt.apply(this,arguments)}}),on$1.deleteProperty=function(ft,lt){return on$1.set.call(this,ft,lt,void 0)},on$1.set=function(ft,lt,dt){return en.set.call(this,ft[0],lt,dt,ft[0])};var un=function(){function ft(dt){var vt=this;this.g=B$1,this.D=!0,this.produce=function(Tt,Et,Ct){if(typeof Tt=="function"&&typeof Et!="function"){var Rt=Et;Et=Tt;var kt=vt;return function(ln){var hn=this;ln===void 0&&(ln=Rt);for(var dn=arguments.length,pn=Array(dn>1?dn-1:0),mn=1;mn<dn;mn++)pn[mn-1]=arguments[mn];return kt.produce(ln,function(On){var bn;return(bn=Et).call.apply(bn,[hn,On].concat(pn))})}}var Dt;if(typeof Et!="function"&&n$4(6),Ct!==void 0&&typeof Ct!="function"&&n$4(7),t$2(Tt)){var Bt=w$4(vt),Ft=N$1(vt,Tt,void 0),Ut=!0;try{Dt=Et(Ft),Ut=!1}finally{Ut?O$3(Bt):g$3(Bt)}return typeof Promise<"u"&&Dt instanceof Promise?Dt.then(function(ln){return j$2(Bt,Ct),P$2(ln,Bt)},function(ln){throw O$3(Bt),ln}):(j$2(Bt,Ct),P$2(Dt,Bt))}if(!Tt||typeof Tt!="object"){if((Dt=Et(Tt))===void 0&&(Dt=Tt),Dt===H$3&&(Dt=void 0),vt.D&&d$6(Dt,!0),Ct){var Zt=[],Kt=[];b$5("Patches").M(Tt,Dt,Zt,Kt),Ct(Zt,Kt)}return Dt}n$4(21,Tt)},this.produceWithPatches=function(Tt,Et){if(typeof Tt=="function")return function(Dt){for(var Bt=arguments.length,Ft=Array(Bt>1?Bt-1:0),Ut=1;Ut<Bt;Ut++)Ft[Ut-1]=arguments[Ut];return vt.produceWithPatches(Dt,function(Zt){return Tt.apply(void 0,[Zt].concat(Ft))})};var Ct,Rt,kt=vt.produce(Tt,Et,function(Dt,Bt){Ct=Dt,Rt=Bt});return typeof Promise<"u"&&kt instanceof Promise?kt.then(function(Dt){return[Dt,Ct,Rt]}):[kt,Ct,Rt]},typeof(dt==null?void 0:dt.useProxies)=="boolean"&&this.setUseProxies(dt.useProxies),typeof(dt==null?void 0:dt.autoFreeze)=="boolean"&&this.setAutoFreeze(dt.autoFreeze)}var lt=ft.prototype;return lt.createDraft=function(dt){t$2(dt)||n$4(8),r$6(dt)&&(dt=R$2(dt));var vt=w$4(this),Tt=N$1(this,dt,void 0);return Tt[Q$3].C=!0,g$3(vt),Tt},lt.finishDraft=function(dt,vt){var Tt=dt&&dt[Q$3],Et=Tt.A;return j$2(Et,vt),P$2(void 0,Et)},lt.setAutoFreeze=function(dt){this.D=dt},lt.setUseProxies=function(dt){dt&&!B$1&&n$4(20),this.g=dt},lt.applyPatches=function(dt,vt){var Tt;for(Tt=vt.length-1;Tt>=0;Tt--){var Et=vt[Tt];if(Et.path.length===0&&Et.op==="replace"){dt=Et.value;break}}Tt>-1&&(vt=vt.slice(Tt+1));var Ct=b$5("Patches").$;return r$6(dt)?Ct(dt,vt):this.produce(dt,function(Rt){return Ct(Rt,vt)})},ft}(),an=new un,fn=an.produce;an.produceWithPatches.bind(an);an.setAutoFreeze.bind(an);an.setUseProxies.bind(an);an.applyPatches.bind(an);an.createDraft.bind(an);an.finishDraft.bind(an);const immerImpl=ft=>(lt,dt,vt)=>(vt.setState=(Tt,Et,...Ct)=>{const Rt=typeof Tt=="function"?fn(Tt):Tt;return lt(Rt,Et,...Ct)},ft(vt.setState,dt,vt)),immer=immerImpl,ROBART_VERSION=.1,saveToFile=(ft,lt)=>{const dt=document.createElement("a"),vt=new Blob([lt],{type:"text/plain"});dt.href=URL.createObjectURL(vt),dt.download=ft,document.body.appendChild(dt),dt.click(),document.body.removeChild(dt)},trajLine=45,execBlocksLine=88;var launcherNodeLine=39;const exportToROS=async(ft,lt)=>{var dt=launcherNode.split(`
`),vt=0;const Tt=ft.timelineState.groups;for(let pn in Tt){const mn=ft.timelineState.groups[pn],On=Object.values(mn.robots);var Et=[];if(On.length===0)continue;vt+=1;for(let An in On)console.log(On,An),On[An]!=null&&(Et.push(An),console.log("Robot Indices",Et));var Ct="",Rt="";if(Object.keys(mn.items).length===0){console.log("No items"+mn);continue}else console.log(mn.items);console.log("Items: "+mn.items);for(let An in mn.items){console.log(An);const Tn=mn.items[An],In=Tn.startTime,Rn=ft.blocks[Tn.blockId].python;if(Tn.isTrajectory)Ct+="        trajectories.append("+Rn+")",Rt+="        start_time = ${startTime}\n",Rt+=`        self.wait_until(start_time)
`,Rt+=`        for cf in self.crazyflies:
`,Rt+="            cf.startTrajectory(${trajCounter}, 0, 1)\n",Rt+="        self.wait_until(start_time + self.trajectories[${trajCounter}].duration\n";else{Rt+=`        start_time = ${In}
`,Rt+=`        total_duration = 1
`,Rt+=`        self.wait_until(start_time)
`;for(var kt=Rn.split(`
`),Dt=0;Dt<kt.length-1;Dt++)Rt+=`        for cf in self.crazyflies:
`,Rt+=`            block_duration = ${kt[Dt]}
`,Rt+=`        self.wait(block_duration)
`;Rt+=`        self.wait_until(start_time + total_duration)
`}}var Bt=workerNodeTemplate.split(`
`);Bt.splice(trajLine,0,Ct),Bt.splice(execBlocksLine,0,Rt),console.log(Et);var Ft=`    import ${pn}_node
`;Ft=`    cfs = []
`;for(let An in Et)Ft+=`    cfs.append(crazyflies[${An}])
`;Ft+=`    nodes.append(${pn}_node.worker_node(cfs, len(nodes)-1, ${vt}))
`,dt.splice(launcherNodeLine,0,Ft),launcherNodeLine+=2;const bn=document.createElement("a"),En=new Blob([Bt.join(`
`)],{type:"text/plain"});bn.href=URL.createObjectURL(En),bn.download=`${pn}_node.py`,document.body.appendChild(bn),bn.click(),document.body.removeChild(bn)}const Ut=document.createElement("a"),Zt=new Blob([dt.join(`
`)],{type:"text/plain"});Ut.href=URL.createObjectURL(Zt),Ut.download="launch_nodes.py",document.body.appendChild(Ut),Ut.click(),document.body.removeChild(Ut);const Kt=new Blob([configure],{type:"text/plain"});Ut.href=URL.createObjectURL(Kt),Ut.download="configure.py",document.body.appendChild(Ut),Ut.click(),document.body.removeChild(Ut);var ln=`positions:
`;for(let pn in Object.values(ft.robots)){var hn=[0,0,0];ft.robots[pn]!=null&&(hn=ft.robots[pn].startingPosition),ln+=`    - [${hn[0]}, ${hn[1]}, ${hn[2]}]
`}const dn=new Blob([ln],{type:"text/plain"});Ut.href=URL.createObjectURL(dn),Ut.download="starting_positions.yaml",document.body.appendChild(Ut),Ut.click(),document.body.removeChild(Ut)},workerNodeTemplate=`import rclpy
from rclpy.node import Node
from std_msgs.msg import Int32
from crazyflie_py import generate_trajectory
import numpy as np
from blocklyTranslations import *

Hz = 30

class worker_node(Node):

    def __init__(self, crazyflies, id=0, num_nodes=1):
        """
        id: a unique id between 0 and num_nodes corresponding to the thread number of this worker
        num_nodes: number of nodes (threads) in total
        """
        super().__init__("worker_node_{}".format(id))
        self.id = id
        self.num_nodes = num_nodes
        self.crazyflies = crazyflies

        self.execution_ready_subscription(
            Int32,
            'ready',
            self.ready_callback,
            num_nodes + 1
        )
        self.execution_ready_publisher(
            Int32,
            'ready',
            num_nodes + 1
        )
        self.timer = self.create_timer(1/Hz, self.timer_callback)
        self.ready_ids = set()
        self.executing = False
        self.running = False
        self.done = False
    
    def compute_trajectories(self):
        """
        Inject Trajectory computation code here...
        """
        trajectories = []
        
        #TODO insert trajectories here...

        return trajectories

    def upload_trajectories(crazyflies, trajectories):
        '''
            Upload trajectories to crazyflies one by one
        '''

        # TODO: Currently doesn't support overlapping crazyflies as we will overwrite trajectories...
        for i, traj in enumerate(trajectories):
            for cf in crazyflies:
                cf.uploadTrajectory(traj, i, 0)

    def begin(self):
        """
            Prepare for execution. Pre-compute trajectories and upload them to crazyflies
        """
        trajectories = self.compute_trajectories()
        self.upload_trajectories(trajectories)
        msg = Int32()
        msg.data = self.id
        self.ready_publisher.publish(msg)

    def time(self):
        return self.get_clock().now().nanoseconds / 1e9
    
    def execute_blocks(self):
        """
        Must be injected into...

        Typical format should be:
        
        start_time = 0.0
        duration = 3.0
        self.wait_until(start_time)
        for cf in self.crazyflies:
            cf.takeoff(1.0, duration)
        self.wait_until(start_time+duration)

        where start_time, duration, and in the inner portion of the for loop are provided.
        """
        # BLOCKS...
        pass

    def ready_callback(self, msg):
        self.ready_ids.add(msg.data)
    
    def timer_callback(self):
        if not self.running:
            self.begin()
            self.running = True
        if len(self.ready_ids) == self.num_nodes and not self.executing:
            self.running = True
            self.start_time = self.get_clock().now()
            self.execute_blocks()
            self.destroy_node()
            self.done = True

    def wait_until(self, end_time):
        while self.time() < end_time:
            rclpy.spin_once(self, timeout_sec=0)

    def wait(self, time):
        end_time = self.time() + time
        self.wait_until(end_time)
`,launcherNode=`import yaml
from ament_index_python.packages import get_package_share_directory
from launch import LaunchDescription
from launch_ros.actions import Node
from crazyflie_py import Crazyswarm
import rclpy
import threading

# Inject Imports Here:

def launch(nodes):
    threads = []
    for node in nodes:
        thread = threading.Thread(target=rclpy.spin, args=(node, ), daemon=True)
        thread.start()
        threads.append(thread)
    while not all([n.done for n in nodes]):
        pass
    rclpy.shutdown()
    [t.join() for t in threads]

def main():
    # node_config_file = get_package_share_directory('crazyflie'), 'config', 'crazyflies.yaml'
    
    # Initialize swarm
    swarm = Crazyswarm()
    with open("cfs_ordering.yaml") as f:
        ordering = yaml.load(f)
        order = ordering['cfs']
    # all_crazyflies = swarm.allcfs.crazyflies
    all_crazyflies = [swarm.allcfs.crazyfliesById[k] for k in order]
    # Construct Launch Description from yaml files
    # One node per line in the timeline, linked to a worker node described in the yaml file
    counter = 0
    nodes = []
    cfs = []

    # Inject append here...

    # cfs.append(all_crazyflies[0])
    # nodes.append(group1_node.worker_node(cfs, len(cfs), 1))
    
    # Launch all nodes
    return launch(nodes)

if __name__ == '__main__':
    main()
`,configure=`# Need to ask user which crazyflies they will use, and will tell them where to place them

import yaml
import copy
import os, sys, stat

# Load starting positions from blockly
with open('starting_positions.yaml') as f:
    starting_positions = yaml.load(f)

n_robots = len(starting_positions['positions'])

print("You will need {} crazyflies".format(n_robots))
print("Which crazyflies (by ID) will you use?")

cfs = []
for i in range(n_robots):
    cf = input("crazyflie #{}: ".format(i + 1))
    cfs.append(cf)

    
start_dict = {}
for cf, pos in zip(cfs, starting_positions['positions']):
    print("Place cf {} at location {}".format(cf, pos))
    start_dict[cf] = pos

# Make changes to local mycrazyflies.yaml
with open('crazyflies.yaml') as f:
    all_crazyflies = yaml.load(f)

my_cfs = copy.deepcopy(all_crazyflies)
for r in all_crazyflies['robots']:
    id = r.strip('cf')
    if id not in cfs:
        del my_cfs['robots'][r]
    else:
        my_cfs['robots'][r]['enabled'] = True
        my_cfs['robots'][r]['initial_position'] = start_dict[id]


with open('my_crazyflies.yaml', 'w') as f:
    yaml.dump(my_cfs, f)

# Make commands for sim and non-sim launches
with open('sim.sh', 'w') as f:
    f.write('ros2 launch launch.py config:=my_crazyflies.yaml backend:=sim')
    os.chmod('sim.sh', stat.S_IRWXU)
with open('run.sh', 'w') as f:
    f.write('ros2 launch launch.py config:=my_crazyflies.yaml')
    os.chmod('run.sh', stat.S_IRWXU)
`,saveProjectToFile=(ft,lt=void 0)=>{const dt=JSON.stringify(ft);lt=lt??ft.projectName.replaceAll(" ","")+".robart",saveToFile(lt,dt)},loadProjectFromFile=ft=>JSON.parse(ft),exportROS=(ft,lt)=>{exportToROS(ft)};/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const REVISION="150",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,CullFaceFrontBack=3,BasicShadowMap=0,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,TwoPassDoubleSide=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,CineonToneMapping=3,ACESFilmicToneMapping=4,CustomToneMapping=5,UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,CubeUVReflectionMapping=306,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipMapNearestFilter=1004,NearestMipmapLinearFilter=1005,NearestMipMapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipMapNearestFilter=1007,LinearMipmapLinearFilter=1008,LinearMipMapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedInt248Type=1020,AlphaFormat=1021,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,RED_RGTC1_Format=36283,SIGNED_RED_RGTC1_Format=36284,RED_GREEN_RGTC2_Format=36285,SIGNED_RED_GREEN_RGTC2_Format=36286,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,LinearEncoding=3e3,sRGBEncoding=3001,BasicDepthPacking=3200,RGBADepthPacking=3201,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,NoColorSpace="",SRGBColorSpace="srgb",LinearSRGBColorSpace="srgb-linear",DisplayP3ColorSpace="display-p3",ZeroStencilOp=0,KeepStencilOp=7680,ReplaceStencilOp=7681,IncrementStencilOp=7682,DecrementStencilOp=7683,IncrementWrapStencilOp=34055,DecrementWrapStencilOp=34056,InvertStencilOp=5386,NeverStencilFunc=512,LessStencilFunc=513,EqualStencilFunc=514,LessEqualStencilFunc=515,GreaterStencilFunc=516,NotEqualStencilFunc=517,GreaterEqualStencilFunc=518,AlwaysStencilFunc=519,StaticDrawUsage=35044,DynamicDrawUsage=35048,StreamDrawUsage=35040,StaticReadUsage=35045,DynamicReadUsage=35049,StreamReadUsage=35041,StaticCopyUsage=35046,DynamicCopyUsage=35050,StreamCopyUsage=35042,GLSL1="100",GLSL3="300 es",_SRGBAFormat=1035;class EventDispatcher{addEventListener(lt,dt){this._listeners===void 0&&(this._listeners={});const vt=this._listeners;vt[lt]===void 0&&(vt[lt]=[]),vt[lt].indexOf(dt)===-1&&vt[lt].push(dt)}hasEventListener(lt,dt){if(this._listeners===void 0)return!1;const vt=this._listeners;return vt[lt]!==void 0&&vt[lt].indexOf(dt)!==-1}removeEventListener(lt,dt){if(this._listeners===void 0)return;const Tt=this._listeners[lt];if(Tt!==void 0){const Et=Tt.indexOf(dt);Et!==-1&&Tt.splice(Et,1)}}dispatchEvent(lt){if(this._listeners===void 0)return;const vt=this._listeners[lt.type];if(vt!==void 0){lt.target=this;const Tt=vt.slice(0);for(let Et=0,Ct=Tt.length;Et<Ct;Et++)Tt[Et].call(this,lt);lt.target=null}}}const _lut=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let _seed=1234567;const DEG2RAD=Math.PI/180,RAD2DEG=180/Math.PI;function generateUUID(){const ft=Math.random()*4294967295|0,lt=Math.random()*4294967295|0,dt=Math.random()*4294967295|0,vt=Math.random()*4294967295|0;return(_lut[ft&255]+_lut[ft>>8&255]+_lut[ft>>16&255]+_lut[ft>>24&255]+"-"+_lut[lt&255]+_lut[lt>>8&255]+"-"+_lut[lt>>16&15|64]+_lut[lt>>24&255]+"-"+_lut[dt&63|128]+_lut[dt>>8&255]+"-"+_lut[dt>>16&255]+_lut[dt>>24&255]+_lut[vt&255]+_lut[vt>>8&255]+_lut[vt>>16&255]+_lut[vt>>24&255]).toLowerCase()}function clamp$1(ft,lt,dt){return Math.max(lt,Math.min(dt,ft))}function euclideanModulo(ft,lt){return(ft%lt+lt)%lt}function mapLinear(ft,lt,dt,vt,Tt){return vt+(ft-lt)*(Tt-vt)/(dt-lt)}function inverseLerp(ft,lt,dt){return ft!==lt?(dt-ft)/(lt-ft):0}function lerp(ft,lt,dt){return(1-dt)*ft+dt*lt}function damp(ft,lt,dt,vt){return lerp(ft,lt,1-Math.exp(-dt*vt))}function pingpong(ft,lt=1){return lt-Math.abs(euclideanModulo(ft,lt*2)-lt)}function smoothstep(ft,lt,dt){return ft<=lt?0:ft>=dt?1:(ft=(ft-lt)/(dt-lt),ft*ft*(3-2*ft))}function smootherstep(ft,lt,dt){return ft<=lt?0:ft>=dt?1:(ft=(ft-lt)/(dt-lt),ft*ft*ft*(ft*(ft*6-15)+10))}function randInt(ft,lt){return ft+Math.floor(Math.random()*(lt-ft+1))}function randFloat(ft,lt){return ft+Math.random()*(lt-ft)}function randFloatSpread(ft){return ft*(.5-Math.random())}function seededRandom(ft){ft!==void 0&&(_seed=ft);let lt=_seed+=1831565813;return lt=Math.imul(lt^lt>>>15,lt|1),lt^=lt+Math.imul(lt^lt>>>7,lt|61),((lt^lt>>>14)>>>0)/4294967296}function degToRad(ft){return ft*DEG2RAD}function radToDeg(ft){return ft*RAD2DEG}function isPowerOfTwo(ft){return(ft&ft-1)===0&&ft!==0}function ceilPowerOfTwo(ft){return Math.pow(2,Math.ceil(Math.log(ft)/Math.LN2))}function floorPowerOfTwo(ft){return Math.pow(2,Math.floor(Math.log(ft)/Math.LN2))}function setQuaternionFromProperEuler(ft,lt,dt,vt,Tt){const Et=Math.cos,Ct=Math.sin,Rt=Et(dt/2),kt=Ct(dt/2),Dt=Et((lt+vt)/2),Bt=Ct((lt+vt)/2),Ft=Et((lt-vt)/2),Ut=Ct((lt-vt)/2),Zt=Et((vt-lt)/2),Kt=Ct((vt-lt)/2);switch(Tt){case"XYX":ft.set(Rt*Bt,kt*Ft,kt*Ut,Rt*Dt);break;case"YZY":ft.set(kt*Ut,Rt*Bt,kt*Ft,Rt*Dt);break;case"ZXZ":ft.set(kt*Ft,kt*Ut,Rt*Bt,Rt*Dt);break;case"XZX":ft.set(Rt*Bt,kt*Kt,kt*Zt,Rt*Dt);break;case"YXY":ft.set(kt*Zt,Rt*Bt,kt*Kt,Rt*Dt);break;case"ZYZ":ft.set(kt*Kt,kt*Zt,Rt*Bt,Rt*Dt);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+Tt)}}function denormalize(ft,lt){switch(lt.constructor){case Float32Array:return ft;case Uint16Array:return ft/65535;case Uint8Array:return ft/255;case Int16Array:return Math.max(ft/32767,-1);case Int8Array:return Math.max(ft/127,-1);default:throw new Error("Invalid component type.")}}function normalize(ft,lt){switch(lt.constructor){case Float32Array:return ft;case Uint16Array:return Math.round(ft*65535);case Uint8Array:return Math.round(ft*255);case Int16Array:return Math.round(ft*32767);case Int8Array:return Math.round(ft*127);default:throw new Error("Invalid component type.")}}const MathUtils={DEG2RAD,RAD2DEG,generateUUID,clamp:clamp$1,euclideanModulo,mapLinear,inverseLerp,lerp,damp,pingpong,smoothstep,smootherstep,randInt,randFloat,randFloatSpread,seededRandom,degToRad,radToDeg,isPowerOfTwo,ceilPowerOfTwo,floorPowerOfTwo,setQuaternionFromProperEuler,normalize,denormalize};class Vector2{constructor(lt=0,dt=0){Vector2.prototype.isVector2=!0,this.x=lt,this.y=dt}get width(){return this.x}set width(lt){this.x=lt}get height(){return this.y}set height(lt){this.y=lt}set(lt,dt){return this.x=lt,this.y=dt,this}setScalar(lt){return this.x=lt,this.y=lt,this}setX(lt){return this.x=lt,this}setY(lt){return this.y=lt,this}setComponent(lt,dt){switch(lt){case 0:this.x=dt;break;case 1:this.y=dt;break;default:throw new Error("index is out of range: "+lt)}return this}getComponent(lt){switch(lt){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+lt)}}clone(){return new this.constructor(this.x,this.y)}copy(lt){return this.x=lt.x,this.y=lt.y,this}add(lt){return this.x+=lt.x,this.y+=lt.y,this}addScalar(lt){return this.x+=lt,this.y+=lt,this}addVectors(lt,dt){return this.x=lt.x+dt.x,this.y=lt.y+dt.y,this}addScaledVector(lt,dt){return this.x+=lt.x*dt,this.y+=lt.y*dt,this}sub(lt){return this.x-=lt.x,this.y-=lt.y,this}subScalar(lt){return this.x-=lt,this.y-=lt,this}subVectors(lt,dt){return this.x=lt.x-dt.x,this.y=lt.y-dt.y,this}multiply(lt){return this.x*=lt.x,this.y*=lt.y,this}multiplyScalar(lt){return this.x*=lt,this.y*=lt,this}divide(lt){return this.x/=lt.x,this.y/=lt.y,this}divideScalar(lt){return this.multiplyScalar(1/lt)}applyMatrix3(lt){const dt=this.x,vt=this.y,Tt=lt.elements;return this.x=Tt[0]*dt+Tt[3]*vt+Tt[6],this.y=Tt[1]*dt+Tt[4]*vt+Tt[7],this}min(lt){return this.x=Math.min(this.x,lt.x),this.y=Math.min(this.y,lt.y),this}max(lt){return this.x=Math.max(this.x,lt.x),this.y=Math.max(this.y,lt.y),this}clamp(lt,dt){return this.x=Math.max(lt.x,Math.min(dt.x,this.x)),this.y=Math.max(lt.y,Math.min(dt.y,this.y)),this}clampScalar(lt,dt){return this.x=Math.max(lt,Math.min(dt,this.x)),this.y=Math.max(lt,Math.min(dt,this.y)),this}clampLength(lt,dt){const vt=this.length();return this.divideScalar(vt||1).multiplyScalar(Math.max(lt,Math.min(dt,vt)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(lt){return this.x*lt.x+this.y*lt.y}cross(lt){return this.x*lt.y-this.y*lt.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(lt){return Math.sqrt(this.distanceToSquared(lt))}distanceToSquared(lt){const dt=this.x-lt.x,vt=this.y-lt.y;return dt*dt+vt*vt}manhattanDistanceTo(lt){return Math.abs(this.x-lt.x)+Math.abs(this.y-lt.y)}setLength(lt){return this.normalize().multiplyScalar(lt)}lerp(lt,dt){return this.x+=(lt.x-this.x)*dt,this.y+=(lt.y-this.y)*dt,this}lerpVectors(lt,dt,vt){return this.x=lt.x+(dt.x-lt.x)*vt,this.y=lt.y+(dt.y-lt.y)*vt,this}equals(lt){return lt.x===this.x&&lt.y===this.y}fromArray(lt,dt=0){return this.x=lt[dt],this.y=lt[dt+1],this}toArray(lt=[],dt=0){return lt[dt]=this.x,lt[dt+1]=this.y,lt}fromBufferAttribute(lt,dt){return this.x=lt.getX(dt),this.y=lt.getY(dt),this}rotateAround(lt,dt){const vt=Math.cos(dt),Tt=Math.sin(dt),Et=this.x-lt.x,Ct=this.y-lt.y;return this.x=Et*vt-Ct*Tt+lt.x,this.y=Et*Tt+Ct*vt+lt.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Matrix3{constructor(){Matrix3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(lt,dt,vt,Tt,Et,Ct,Rt,kt,Dt){const Bt=this.elements;return Bt[0]=lt,Bt[1]=Tt,Bt[2]=Rt,Bt[3]=dt,Bt[4]=Et,Bt[5]=kt,Bt[6]=vt,Bt[7]=Ct,Bt[8]=Dt,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(lt){const dt=this.elements,vt=lt.elements;return dt[0]=vt[0],dt[1]=vt[1],dt[2]=vt[2],dt[3]=vt[3],dt[4]=vt[4],dt[5]=vt[5],dt[6]=vt[6],dt[7]=vt[7],dt[8]=vt[8],this}extractBasis(lt,dt,vt){return lt.setFromMatrix3Column(this,0),dt.setFromMatrix3Column(this,1),vt.setFromMatrix3Column(this,2),this}setFromMatrix4(lt){const dt=lt.elements;return this.set(dt[0],dt[4],dt[8],dt[1],dt[5],dt[9],dt[2],dt[6],dt[10]),this}multiply(lt){return this.multiplyMatrices(this,lt)}premultiply(lt){return this.multiplyMatrices(lt,this)}multiplyMatrices(lt,dt){const vt=lt.elements,Tt=dt.elements,Et=this.elements,Ct=vt[0],Rt=vt[3],kt=vt[6],Dt=vt[1],Bt=vt[4],Ft=vt[7],Ut=vt[2],Zt=vt[5],Kt=vt[8],ln=Tt[0],hn=Tt[3],dn=Tt[6],pn=Tt[1],mn=Tt[4],On=Tt[7],bn=Tt[2],En=Tt[5],An=Tt[8];return Et[0]=Ct*ln+Rt*pn+kt*bn,Et[3]=Ct*hn+Rt*mn+kt*En,Et[6]=Ct*dn+Rt*On+kt*An,Et[1]=Dt*ln+Bt*pn+Ft*bn,Et[4]=Dt*hn+Bt*mn+Ft*En,Et[7]=Dt*dn+Bt*On+Ft*An,Et[2]=Ut*ln+Zt*pn+Kt*bn,Et[5]=Ut*hn+Zt*mn+Kt*En,Et[8]=Ut*dn+Zt*On+Kt*An,this}multiplyScalar(lt){const dt=this.elements;return dt[0]*=lt,dt[3]*=lt,dt[6]*=lt,dt[1]*=lt,dt[4]*=lt,dt[7]*=lt,dt[2]*=lt,dt[5]*=lt,dt[8]*=lt,this}determinant(){const lt=this.elements,dt=lt[0],vt=lt[1],Tt=lt[2],Et=lt[3],Ct=lt[4],Rt=lt[5],kt=lt[6],Dt=lt[7],Bt=lt[8];return dt*Ct*Bt-dt*Rt*Dt-vt*Et*Bt+vt*Rt*kt+Tt*Et*Dt-Tt*Ct*kt}invert(){const lt=this.elements,dt=lt[0],vt=lt[1],Tt=lt[2],Et=lt[3],Ct=lt[4],Rt=lt[5],kt=lt[6],Dt=lt[7],Bt=lt[8],Ft=Bt*Ct-Rt*Dt,Ut=Rt*kt-Bt*Et,Zt=Dt*Et-Ct*kt,Kt=dt*Ft+vt*Ut+Tt*Zt;if(Kt===0)return this.set(0,0,0,0,0,0,0,0,0);const ln=1/Kt;return lt[0]=Ft*ln,lt[1]=(Tt*Dt-Bt*vt)*ln,lt[2]=(Rt*vt-Tt*Ct)*ln,lt[3]=Ut*ln,lt[4]=(Bt*dt-Tt*kt)*ln,lt[5]=(Tt*Et-Rt*dt)*ln,lt[6]=Zt*ln,lt[7]=(vt*kt-Dt*dt)*ln,lt[8]=(Ct*dt-vt*Et)*ln,this}transpose(){let lt;const dt=this.elements;return lt=dt[1],dt[1]=dt[3],dt[3]=lt,lt=dt[2],dt[2]=dt[6],dt[6]=lt,lt=dt[5],dt[5]=dt[7],dt[7]=lt,this}getNormalMatrix(lt){return this.setFromMatrix4(lt).invert().transpose()}transposeIntoArray(lt){const dt=this.elements;return lt[0]=dt[0],lt[1]=dt[3],lt[2]=dt[6],lt[3]=dt[1],lt[4]=dt[4],lt[5]=dt[7],lt[6]=dt[2],lt[7]=dt[5],lt[8]=dt[8],this}setUvTransform(lt,dt,vt,Tt,Et,Ct,Rt){const kt=Math.cos(Et),Dt=Math.sin(Et);return this.set(vt*kt,vt*Dt,-vt*(kt*Ct+Dt*Rt)+Ct+lt,-Tt*Dt,Tt*kt,-Tt*(-Dt*Ct+kt*Rt)+Rt+dt,0,0,1),this}scale(lt,dt){return this.premultiply(_m3.makeScale(lt,dt)),this}rotate(lt){return this.premultiply(_m3.makeRotation(-lt)),this}translate(lt,dt){return this.premultiply(_m3.makeTranslation(lt,dt)),this}makeTranslation(lt,dt){return this.set(1,0,lt,0,1,dt,0,0,1),this}makeRotation(lt){const dt=Math.cos(lt),vt=Math.sin(lt);return this.set(dt,-vt,0,vt,dt,0,0,0,1),this}makeScale(lt,dt){return this.set(lt,0,0,0,dt,0,0,0,1),this}equals(lt){const dt=this.elements,vt=lt.elements;for(let Tt=0;Tt<9;Tt++)if(dt[Tt]!==vt[Tt])return!1;return!0}fromArray(lt,dt=0){for(let vt=0;vt<9;vt++)this.elements[vt]=lt[vt+dt];return this}toArray(lt=[],dt=0){const vt=this.elements;return lt[dt]=vt[0],lt[dt+1]=vt[1],lt[dt+2]=vt[2],lt[dt+3]=vt[3],lt[dt+4]=vt[4],lt[dt+5]=vt[5],lt[dt+6]=vt[6],lt[dt+7]=vt[7],lt[dt+8]=vt[8],lt}clone(){return new this.constructor().fromArray(this.elements)}}const _m3=new Matrix3;function arrayNeedsUint32(ft){for(let lt=ft.length-1;lt>=0;--lt)if(ft[lt]>=65535)return!0;return!1}const TYPED_ARRAYS={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function getTypedArray(ft,lt){return new TYPED_ARRAYS[ft](lt)}function createElementNS$1(ft){return document.createElementNS("http://www.w3.org/1999/xhtml",ft)}class Quaternion{constructor(lt=0,dt=0,vt=0,Tt=1){this.isQuaternion=!0,this._x=lt,this._y=dt,this._z=vt,this._w=Tt}static slerpFlat(lt,dt,vt,Tt,Et,Ct,Rt){let kt=vt[Tt+0],Dt=vt[Tt+1],Bt=vt[Tt+2],Ft=vt[Tt+3];const Ut=Et[Ct+0],Zt=Et[Ct+1],Kt=Et[Ct+2],ln=Et[Ct+3];if(Rt===0){lt[dt+0]=kt,lt[dt+1]=Dt,lt[dt+2]=Bt,lt[dt+3]=Ft;return}if(Rt===1){lt[dt+0]=Ut,lt[dt+1]=Zt,lt[dt+2]=Kt,lt[dt+3]=ln;return}if(Ft!==ln||kt!==Ut||Dt!==Zt||Bt!==Kt){let hn=1-Rt;const dn=kt*Ut+Dt*Zt+Bt*Kt+Ft*ln,pn=dn>=0?1:-1,mn=1-dn*dn;if(mn>Number.EPSILON){const bn=Math.sqrt(mn),En=Math.atan2(bn,dn*pn);hn=Math.sin(hn*En)/bn,Rt=Math.sin(Rt*En)/bn}const On=Rt*pn;if(kt=kt*hn+Ut*On,Dt=Dt*hn+Zt*On,Bt=Bt*hn+Kt*On,Ft=Ft*hn+ln*On,hn===1-Rt){const bn=1/Math.sqrt(kt*kt+Dt*Dt+Bt*Bt+Ft*Ft);kt*=bn,Dt*=bn,Bt*=bn,Ft*=bn}}lt[dt]=kt,lt[dt+1]=Dt,lt[dt+2]=Bt,lt[dt+3]=Ft}static multiplyQuaternionsFlat(lt,dt,vt,Tt,Et,Ct){const Rt=vt[Tt],kt=vt[Tt+1],Dt=vt[Tt+2],Bt=vt[Tt+3],Ft=Et[Ct],Ut=Et[Ct+1],Zt=Et[Ct+2],Kt=Et[Ct+3];return lt[dt]=Rt*Kt+Bt*Ft+kt*Zt-Dt*Ut,lt[dt+1]=kt*Kt+Bt*Ut+Dt*Ft-Rt*Zt,lt[dt+2]=Dt*Kt+Bt*Zt+Rt*Ut-kt*Ft,lt[dt+3]=Bt*Kt-Rt*Ft-kt*Ut-Dt*Zt,lt}get x(){return this._x}set x(lt){this._x=lt,this._onChangeCallback()}get y(){return this._y}set y(lt){this._y=lt,this._onChangeCallback()}get z(){return this._z}set z(lt){this._z=lt,this._onChangeCallback()}get w(){return this._w}set w(lt){this._w=lt,this._onChangeCallback()}set(lt,dt,vt,Tt){return this._x=lt,this._y=dt,this._z=vt,this._w=Tt,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(lt){return this._x=lt.x,this._y=lt.y,this._z=lt.z,this._w=lt.w,this._onChangeCallback(),this}setFromEuler(lt,dt){const vt=lt._x,Tt=lt._y,Et=lt._z,Ct=lt._order,Rt=Math.cos,kt=Math.sin,Dt=Rt(vt/2),Bt=Rt(Tt/2),Ft=Rt(Et/2),Ut=kt(vt/2),Zt=kt(Tt/2),Kt=kt(Et/2);switch(Ct){case"XYZ":this._x=Ut*Bt*Ft+Dt*Zt*Kt,this._y=Dt*Zt*Ft-Ut*Bt*Kt,this._z=Dt*Bt*Kt+Ut*Zt*Ft,this._w=Dt*Bt*Ft-Ut*Zt*Kt;break;case"YXZ":this._x=Ut*Bt*Ft+Dt*Zt*Kt,this._y=Dt*Zt*Ft-Ut*Bt*Kt,this._z=Dt*Bt*Kt-Ut*Zt*Ft,this._w=Dt*Bt*Ft+Ut*Zt*Kt;break;case"ZXY":this._x=Ut*Bt*Ft-Dt*Zt*Kt,this._y=Dt*Zt*Ft+Ut*Bt*Kt,this._z=Dt*Bt*Kt+Ut*Zt*Ft,this._w=Dt*Bt*Ft-Ut*Zt*Kt;break;case"ZYX":this._x=Ut*Bt*Ft-Dt*Zt*Kt,this._y=Dt*Zt*Ft+Ut*Bt*Kt,this._z=Dt*Bt*Kt-Ut*Zt*Ft,this._w=Dt*Bt*Ft+Ut*Zt*Kt;break;case"YZX":this._x=Ut*Bt*Ft+Dt*Zt*Kt,this._y=Dt*Zt*Ft+Ut*Bt*Kt,this._z=Dt*Bt*Kt-Ut*Zt*Ft,this._w=Dt*Bt*Ft-Ut*Zt*Kt;break;case"XZY":this._x=Ut*Bt*Ft-Dt*Zt*Kt,this._y=Dt*Zt*Ft-Ut*Bt*Kt,this._z=Dt*Bt*Kt+Ut*Zt*Ft,this._w=Dt*Bt*Ft+Ut*Zt*Kt;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+Ct)}return dt!==!1&&this._onChangeCallback(),this}setFromAxisAngle(lt,dt){const vt=dt/2,Tt=Math.sin(vt);return this._x=lt.x*Tt,this._y=lt.y*Tt,this._z=lt.z*Tt,this._w=Math.cos(vt),this._onChangeCallback(),this}setFromRotationMatrix(lt){const dt=lt.elements,vt=dt[0],Tt=dt[4],Et=dt[8],Ct=dt[1],Rt=dt[5],kt=dt[9],Dt=dt[2],Bt=dt[6],Ft=dt[10],Ut=vt+Rt+Ft;if(Ut>0){const Zt=.5/Math.sqrt(Ut+1);this._w=.25/Zt,this._x=(Bt-kt)*Zt,this._y=(Et-Dt)*Zt,this._z=(Ct-Tt)*Zt}else if(vt>Rt&&vt>Ft){const Zt=2*Math.sqrt(1+vt-Rt-Ft);this._w=(Bt-kt)/Zt,this._x=.25*Zt,this._y=(Tt+Ct)/Zt,this._z=(Et+Dt)/Zt}else if(Rt>Ft){const Zt=2*Math.sqrt(1+Rt-vt-Ft);this._w=(Et-Dt)/Zt,this._x=(Tt+Ct)/Zt,this._y=.25*Zt,this._z=(kt+Bt)/Zt}else{const Zt=2*Math.sqrt(1+Ft-vt-Rt);this._w=(Ct-Tt)/Zt,this._x=(Et+Dt)/Zt,this._y=(kt+Bt)/Zt,this._z=.25*Zt}return this._onChangeCallback(),this}setFromUnitVectors(lt,dt){let vt=lt.dot(dt)+1;return vt<Number.EPSILON?(vt=0,Math.abs(lt.x)>Math.abs(lt.z)?(this._x=-lt.y,this._y=lt.x,this._z=0,this._w=vt):(this._x=0,this._y=-lt.z,this._z=lt.y,this._w=vt)):(this._x=lt.y*dt.z-lt.z*dt.y,this._y=lt.z*dt.x-lt.x*dt.z,this._z=lt.x*dt.y-lt.y*dt.x,this._w=vt),this.normalize()}angleTo(lt){return 2*Math.acos(Math.abs(clamp$1(this.dot(lt),-1,1)))}rotateTowards(lt,dt){const vt=this.angleTo(lt);if(vt===0)return this;const Tt=Math.min(1,dt/vt);return this.slerp(lt,Tt),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(lt){return this._x*lt._x+this._y*lt._y+this._z*lt._z+this._w*lt._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let lt=this.length();return lt===0?(this._x=0,this._y=0,this._z=0,this._w=1):(lt=1/lt,this._x=this._x*lt,this._y=this._y*lt,this._z=this._z*lt,this._w=this._w*lt),this._onChangeCallback(),this}multiply(lt){return this.multiplyQuaternions(this,lt)}premultiply(lt){return this.multiplyQuaternions(lt,this)}multiplyQuaternions(lt,dt){const vt=lt._x,Tt=lt._y,Et=lt._z,Ct=lt._w,Rt=dt._x,kt=dt._y,Dt=dt._z,Bt=dt._w;return this._x=vt*Bt+Ct*Rt+Tt*Dt-Et*kt,this._y=Tt*Bt+Ct*kt+Et*Rt-vt*Dt,this._z=Et*Bt+Ct*Dt+vt*kt-Tt*Rt,this._w=Ct*Bt-vt*Rt-Tt*kt-Et*Dt,this._onChangeCallback(),this}slerp(lt,dt){if(dt===0)return this;if(dt===1)return this.copy(lt);const vt=this._x,Tt=this._y,Et=this._z,Ct=this._w;let Rt=Ct*lt._w+vt*lt._x+Tt*lt._y+Et*lt._z;if(Rt<0?(this._w=-lt._w,this._x=-lt._x,this._y=-lt._y,this._z=-lt._z,Rt=-Rt):this.copy(lt),Rt>=1)return this._w=Ct,this._x=vt,this._y=Tt,this._z=Et,this;const kt=1-Rt*Rt;if(kt<=Number.EPSILON){const Zt=1-dt;return this._w=Zt*Ct+dt*this._w,this._x=Zt*vt+dt*this._x,this._y=Zt*Tt+dt*this._y,this._z=Zt*Et+dt*this._z,this.normalize(),this._onChangeCallback(),this}const Dt=Math.sqrt(kt),Bt=Math.atan2(Dt,Rt),Ft=Math.sin((1-dt)*Bt)/Dt,Ut=Math.sin(dt*Bt)/Dt;return this._w=Ct*Ft+this._w*Ut,this._x=vt*Ft+this._x*Ut,this._y=Tt*Ft+this._y*Ut,this._z=Et*Ft+this._z*Ut,this._onChangeCallback(),this}slerpQuaternions(lt,dt,vt){return this.copy(lt).slerp(dt,vt)}random(){const lt=Math.random(),dt=Math.sqrt(1-lt),vt=Math.sqrt(lt),Tt=2*Math.PI*Math.random(),Et=2*Math.PI*Math.random();return this.set(dt*Math.cos(Tt),vt*Math.sin(Et),vt*Math.cos(Et),dt*Math.sin(Tt))}equals(lt){return lt._x===this._x&&lt._y===this._y&&lt._z===this._z&&lt._w===this._w}fromArray(lt,dt=0){return this._x=lt[dt],this._y=lt[dt+1],this._z=lt[dt+2],this._w=lt[dt+3],this._onChangeCallback(),this}toArray(lt=[],dt=0){return lt[dt]=this._x,lt[dt+1]=this._y,lt[dt+2]=this._z,lt[dt+3]=this._w,lt}fromBufferAttribute(lt,dt){return this._x=lt.getX(dt),this._y=lt.getY(dt),this._z=lt.getZ(dt),this._w=lt.getW(dt),this}_onChange(lt){return this._onChangeCallback=lt,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Vector3{constructor(lt=0,dt=0,vt=0){Vector3.prototype.isVector3=!0,this.x=lt,this.y=dt,this.z=vt}set(lt,dt,vt){return vt===void 0&&(vt=this.z),this.x=lt,this.y=dt,this.z=vt,this}setScalar(lt){return this.x=lt,this.y=lt,this.z=lt,this}setX(lt){return this.x=lt,this}setY(lt){return this.y=lt,this}setZ(lt){return this.z=lt,this}setComponent(lt,dt){switch(lt){case 0:this.x=dt;break;case 1:this.y=dt;break;case 2:this.z=dt;break;default:throw new Error("index is out of range: "+lt)}return this}getComponent(lt){switch(lt){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+lt)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(lt){return this.x=lt.x,this.y=lt.y,this.z=lt.z,this}add(lt){return this.x+=lt.x,this.y+=lt.y,this.z+=lt.z,this}addScalar(lt){return this.x+=lt,this.y+=lt,this.z+=lt,this}addVectors(lt,dt){return this.x=lt.x+dt.x,this.y=lt.y+dt.y,this.z=lt.z+dt.z,this}addScaledVector(lt,dt){return this.x+=lt.x*dt,this.y+=lt.y*dt,this.z+=lt.z*dt,this}sub(lt){return this.x-=lt.x,this.y-=lt.y,this.z-=lt.z,this}subScalar(lt){return this.x-=lt,this.y-=lt,this.z-=lt,this}subVectors(lt,dt){return this.x=lt.x-dt.x,this.y=lt.y-dt.y,this.z=lt.z-dt.z,this}multiply(lt){return this.x*=lt.x,this.y*=lt.y,this.z*=lt.z,this}multiplyScalar(lt){return this.x*=lt,this.y*=lt,this.z*=lt,this}multiplyVectors(lt,dt){return this.x=lt.x*dt.x,this.y=lt.y*dt.y,this.z=lt.z*dt.z,this}applyEuler(lt){return this.applyQuaternion(_quaternion$4.setFromEuler(lt))}applyAxisAngle(lt,dt){return this.applyQuaternion(_quaternion$4.setFromAxisAngle(lt,dt))}applyMatrix3(lt){const dt=this.x,vt=this.y,Tt=this.z,Et=lt.elements;return this.x=Et[0]*dt+Et[3]*vt+Et[6]*Tt,this.y=Et[1]*dt+Et[4]*vt+Et[7]*Tt,this.z=Et[2]*dt+Et[5]*vt+Et[8]*Tt,this}applyNormalMatrix(lt){return this.applyMatrix3(lt).normalize()}applyMatrix4(lt){const dt=this.x,vt=this.y,Tt=this.z,Et=lt.elements,Ct=1/(Et[3]*dt+Et[7]*vt+Et[11]*Tt+Et[15]);return this.x=(Et[0]*dt+Et[4]*vt+Et[8]*Tt+Et[12])*Ct,this.y=(Et[1]*dt+Et[5]*vt+Et[9]*Tt+Et[13])*Ct,this.z=(Et[2]*dt+Et[6]*vt+Et[10]*Tt+Et[14])*Ct,this}applyQuaternion(lt){const dt=this.x,vt=this.y,Tt=this.z,Et=lt.x,Ct=lt.y,Rt=lt.z,kt=lt.w,Dt=kt*dt+Ct*Tt-Rt*vt,Bt=kt*vt+Rt*dt-Et*Tt,Ft=kt*Tt+Et*vt-Ct*dt,Ut=-Et*dt-Ct*vt-Rt*Tt;return this.x=Dt*kt+Ut*-Et+Bt*-Rt-Ft*-Ct,this.y=Bt*kt+Ut*-Ct+Ft*-Et-Dt*-Rt,this.z=Ft*kt+Ut*-Rt+Dt*-Ct-Bt*-Et,this}project(lt){return this.applyMatrix4(lt.matrixWorldInverse).applyMatrix4(lt.projectionMatrix)}unproject(lt){return this.applyMatrix4(lt.projectionMatrixInverse).applyMatrix4(lt.matrixWorld)}transformDirection(lt){const dt=this.x,vt=this.y,Tt=this.z,Et=lt.elements;return this.x=Et[0]*dt+Et[4]*vt+Et[8]*Tt,this.y=Et[1]*dt+Et[5]*vt+Et[9]*Tt,this.z=Et[2]*dt+Et[6]*vt+Et[10]*Tt,this.normalize()}divide(lt){return this.x/=lt.x,this.y/=lt.y,this.z/=lt.z,this}divideScalar(lt){return this.multiplyScalar(1/lt)}min(lt){return this.x=Math.min(this.x,lt.x),this.y=Math.min(this.y,lt.y),this.z=Math.min(this.z,lt.z),this}max(lt){return this.x=Math.max(this.x,lt.x),this.y=Math.max(this.y,lt.y),this.z=Math.max(this.z,lt.z),this}clamp(lt,dt){return this.x=Math.max(lt.x,Math.min(dt.x,this.x)),this.y=Math.max(lt.y,Math.min(dt.y,this.y)),this.z=Math.max(lt.z,Math.min(dt.z,this.z)),this}clampScalar(lt,dt){return this.x=Math.max(lt,Math.min(dt,this.x)),this.y=Math.max(lt,Math.min(dt,this.y)),this.z=Math.max(lt,Math.min(dt,this.z)),this}clampLength(lt,dt){const vt=this.length();return this.divideScalar(vt||1).multiplyScalar(Math.max(lt,Math.min(dt,vt)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(lt){return this.x*lt.x+this.y*lt.y+this.z*lt.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(lt){return this.normalize().multiplyScalar(lt)}lerp(lt,dt){return this.x+=(lt.x-this.x)*dt,this.y+=(lt.y-this.y)*dt,this.z+=(lt.z-this.z)*dt,this}lerpVectors(lt,dt,vt){return this.x=lt.x+(dt.x-lt.x)*vt,this.y=lt.y+(dt.y-lt.y)*vt,this.z=lt.z+(dt.z-lt.z)*vt,this}cross(lt){return this.crossVectors(this,lt)}crossVectors(lt,dt){const vt=lt.x,Tt=lt.y,Et=lt.z,Ct=dt.x,Rt=dt.y,kt=dt.z;return this.x=Tt*kt-Et*Rt,this.y=Et*Ct-vt*kt,this.z=vt*Rt-Tt*Ct,this}projectOnVector(lt){const dt=lt.lengthSq();if(dt===0)return this.set(0,0,0);const vt=lt.dot(this)/dt;return this.copy(lt).multiplyScalar(vt)}projectOnPlane(lt){return _vector$d.copy(this).projectOnVector(lt),this.sub(_vector$d)}reflect(lt){return this.sub(_vector$d.copy(lt).multiplyScalar(2*this.dot(lt)))}angleTo(lt){const dt=Math.sqrt(this.lengthSq()*lt.lengthSq());if(dt===0)return Math.PI/2;const vt=this.dot(lt)/dt;return Math.acos(clamp$1(vt,-1,1))}distanceTo(lt){return Math.sqrt(this.distanceToSquared(lt))}distanceToSquared(lt){const dt=this.x-lt.x,vt=this.y-lt.y,Tt=this.z-lt.z;return dt*dt+vt*vt+Tt*Tt}manhattanDistanceTo(lt){return Math.abs(this.x-lt.x)+Math.abs(this.y-lt.y)+Math.abs(this.z-lt.z)}setFromSpherical(lt){return this.setFromSphericalCoords(lt.radius,lt.phi,lt.theta)}setFromSphericalCoords(lt,dt,vt){const Tt=Math.sin(dt)*lt;return this.x=Tt*Math.sin(vt),this.y=Math.cos(dt)*lt,this.z=Tt*Math.cos(vt),this}setFromCylindrical(lt){return this.setFromCylindricalCoords(lt.radius,lt.theta,lt.y)}setFromCylindricalCoords(lt,dt,vt){return this.x=lt*Math.sin(dt),this.y=vt,this.z=lt*Math.cos(dt),this}setFromMatrixPosition(lt){const dt=lt.elements;return this.x=dt[12],this.y=dt[13],this.z=dt[14],this}setFromMatrixScale(lt){const dt=this.setFromMatrixColumn(lt,0).length(),vt=this.setFromMatrixColumn(lt,1).length(),Tt=this.setFromMatrixColumn(lt,2).length();return this.x=dt,this.y=vt,this.z=Tt,this}setFromMatrixColumn(lt,dt){return this.fromArray(lt.elements,dt*4)}setFromMatrix3Column(lt,dt){return this.fromArray(lt.elements,dt*3)}setFromEuler(lt){return this.x=lt._x,this.y=lt._y,this.z=lt._z,this}equals(lt){return lt.x===this.x&&lt.y===this.y&&lt.z===this.z}fromArray(lt,dt=0){return this.x=lt[dt],this.y=lt[dt+1],this.z=lt[dt+2],this}toArray(lt=[],dt=0){return lt[dt]=this.x,lt[dt+1]=this.y,lt[dt+2]=this.z,lt}fromBufferAttribute(lt,dt){return this.x=lt.getX(dt),this.y=lt.getY(dt),this.z=lt.getZ(dt),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const lt=(Math.random()-.5)*2,dt=Math.random()*Math.PI*2,vt=Math.sqrt(1-lt**2);return this.x=vt*Math.cos(dt),this.y=vt*Math.sin(dt),this.z=lt,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _vector$d=new Vector3,_quaternion$4=new Quaternion;function SRGBToLinear(ft){return ft<.04045?ft*.0773993808:Math.pow(ft*.9478672986+.0521327014,2.4)}function LinearToSRGB(ft){return ft<.0031308?ft*12.92:1.055*Math.pow(ft,.41666)-.055}const LINEAR_SRGB_TO_LINEAR_DISPLAY_P3=new Matrix3().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),LINEAR_DISPLAY_P3_TO_LINEAR_SRGB=new Matrix3().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),_vector$c=new Vector3;function DisplayP3ToLinearSRGB(ft){return ft.convertSRGBToLinear(),_vector$c.set(ft.r,ft.g,ft.b).applyMatrix3(LINEAR_DISPLAY_P3_TO_LINEAR_SRGB),ft.setRGB(_vector$c.x,_vector$c.y,_vector$c.z)}function LinearSRGBToDisplayP3(ft){return _vector$c.set(ft.r,ft.g,ft.b).applyMatrix3(LINEAR_SRGB_TO_LINEAR_DISPLAY_P3),ft.setRGB(_vector$c.x,_vector$c.y,_vector$c.z).convertLinearToSRGB()}const TO_LINEAR={[LinearSRGBColorSpace]:ft=>ft,[SRGBColorSpace]:ft=>ft.convertSRGBToLinear(),[DisplayP3ColorSpace]:DisplayP3ToLinearSRGB},FROM_LINEAR={[LinearSRGBColorSpace]:ft=>ft,[SRGBColorSpace]:ft=>ft.convertLinearToSRGB(),[DisplayP3ColorSpace]:LinearSRGBToDisplayP3},ColorManagement={enabled:!1,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(ft){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!ft},get workingColorSpace(){return LinearSRGBColorSpace},set workingColorSpace(ft){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(ft,lt,dt){if(this.enabled===!1||lt===dt||!lt||!dt)return ft;const vt=TO_LINEAR[lt],Tt=FROM_LINEAR[dt];if(vt===void 0||Tt===void 0)throw new Error(`Unsupported color space conversion, "${lt}" to "${dt}".`);return Tt(vt(ft))},fromWorkingColorSpace:function(ft,lt){return this.convert(ft,this.workingColorSpace,lt)},toWorkingColorSpace:function(ft,lt){return this.convert(ft,lt,this.workingColorSpace)}};let _canvas;class ImageUtils{static getDataURL(lt){if(/^data:/i.test(lt.src)||typeof HTMLCanvasElement>"u")return lt.src;let dt;if(lt instanceof HTMLCanvasElement)dt=lt;else{_canvas===void 0&&(_canvas=createElementNS$1("canvas")),_canvas.width=lt.width,_canvas.height=lt.height;const vt=_canvas.getContext("2d");lt instanceof ImageData?vt.putImageData(lt,0,0):vt.drawImage(lt,0,0,lt.width,lt.height),dt=_canvas}return dt.width>2048||dt.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",lt),dt.toDataURL("image/jpeg",.6)):dt.toDataURL("image/png")}static sRGBToLinear(lt){if(typeof HTMLImageElement<"u"&&lt instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&lt instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&lt instanceof ImageBitmap){const dt=createElementNS$1("canvas");dt.width=lt.width,dt.height=lt.height;const vt=dt.getContext("2d");vt.drawImage(lt,0,0,lt.width,lt.height);const Tt=vt.getImageData(0,0,lt.width,lt.height),Et=Tt.data;for(let Ct=0;Ct<Et.length;Ct++)Et[Ct]=SRGBToLinear(Et[Ct]/255)*255;return vt.putImageData(Tt,0,0),dt}else if(lt.data){const dt=lt.data.slice(0);for(let vt=0;vt<dt.length;vt++)dt instanceof Uint8Array||dt instanceof Uint8ClampedArray?dt[vt]=Math.floor(SRGBToLinear(dt[vt]/255)*255):dt[vt]=SRGBToLinear(dt[vt]);return{data:dt,width:lt.width,height:lt.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),lt}}class Source{constructor(lt=null){this.isSource=!0,this.uuid=generateUUID(),this.data=lt,this.version=0}set needsUpdate(lt){lt===!0&&this.version++}toJSON(lt){const dt=lt===void 0||typeof lt=="string";if(!dt&&lt.images[this.uuid]!==void 0)return lt.images[this.uuid];const vt={uuid:this.uuid,url:""},Tt=this.data;if(Tt!==null){let Et;if(Array.isArray(Tt)){Et=[];for(let Ct=0,Rt=Tt.length;Ct<Rt;Ct++)Tt[Ct].isDataTexture?Et.push(serializeImage(Tt[Ct].image)):Et.push(serializeImage(Tt[Ct]))}else Et=serializeImage(Tt);vt.url=Et}return dt||(lt.images[this.uuid]=vt),vt}}function serializeImage(ft){return typeof HTMLImageElement<"u"&&ft instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ft instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ft instanceof ImageBitmap?ImageUtils.getDataURL(ft):ft.data?{data:Array.from(ft.data),width:ft.width,height:ft.height,type:ft.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let textureId=0;class Texture extends EventDispatcher{constructor(lt=Texture.DEFAULT_IMAGE,dt=Texture.DEFAULT_MAPPING,vt=ClampToEdgeWrapping,Tt=ClampToEdgeWrapping,Et=LinearFilter,Ct=LinearMipmapLinearFilter,Rt=RGBAFormat,kt=UnsignedByteType,Dt=Texture.DEFAULT_ANISOTROPY,Bt=LinearEncoding){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:textureId++}),this.uuid=generateUUID(),this.name="",this.source=new Source(lt),this.mipmaps=[],this.mapping=dt,this.wrapS=vt,this.wrapT=Tt,this.magFilter=Et,this.minFilter=Ct,this.anisotropy=Dt,this.format=Rt,this.internalFormat=null,this.type=kt,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=Bt,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(lt=null){this.source.data=lt}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(lt){return this.name=lt.name,this.source=lt.source,this.mipmaps=lt.mipmaps.slice(0),this.mapping=lt.mapping,this.wrapS=lt.wrapS,this.wrapT=lt.wrapT,this.magFilter=lt.magFilter,this.minFilter=lt.minFilter,this.anisotropy=lt.anisotropy,this.format=lt.format,this.internalFormat=lt.internalFormat,this.type=lt.type,this.offset.copy(lt.offset),this.repeat.copy(lt.repeat),this.center.copy(lt.center),this.rotation=lt.rotation,this.matrixAutoUpdate=lt.matrixAutoUpdate,this.matrix.copy(lt.matrix),this.generateMipmaps=lt.generateMipmaps,this.premultiplyAlpha=lt.premultiplyAlpha,this.flipY=lt.flipY,this.unpackAlignment=lt.unpackAlignment,this.encoding=lt.encoding,this.userData=JSON.parse(JSON.stringify(lt.userData)),this.needsUpdate=!0,this}toJSON(lt){const dt=lt===void 0||typeof lt=="string";if(!dt&&lt.textures[this.uuid]!==void 0)return lt.textures[this.uuid];const vt={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(lt).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(vt.userData=this.userData),dt||(lt.textures[this.uuid]=vt),vt}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(lt){if(this.mapping!==UVMapping)return lt;if(lt.applyMatrix3(this.matrix),lt.x<0||lt.x>1)switch(this.wrapS){case RepeatWrapping:lt.x=lt.x-Math.floor(lt.x);break;case ClampToEdgeWrapping:lt.x=lt.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(lt.x)%2)===1?lt.x=Math.ceil(lt.x)-lt.x:lt.x=lt.x-Math.floor(lt.x);break}if(lt.y<0||lt.y>1)switch(this.wrapT){case RepeatWrapping:lt.y=lt.y-Math.floor(lt.y);break;case ClampToEdgeWrapping:lt.y=lt.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(lt.y)%2)===1?lt.y=Math.ceil(lt.y)-lt.y:lt.y=lt.y-Math.floor(lt.y);break}return this.flipY&&(lt.y=1-lt.y),lt}set needsUpdate(lt){lt===!0&&(this.version++,this.source.needsUpdate=!0)}}Texture.DEFAULT_IMAGE=null;Texture.DEFAULT_MAPPING=UVMapping;Texture.DEFAULT_ANISOTROPY=1;class Vector4{constructor(lt=0,dt=0,vt=0,Tt=1){Vector4.prototype.isVector4=!0,this.x=lt,this.y=dt,this.z=vt,this.w=Tt}get width(){return this.z}set width(lt){this.z=lt}get height(){return this.w}set height(lt){this.w=lt}set(lt,dt,vt,Tt){return this.x=lt,this.y=dt,this.z=vt,this.w=Tt,this}setScalar(lt){return this.x=lt,this.y=lt,this.z=lt,this.w=lt,this}setX(lt){return this.x=lt,this}setY(lt){return this.y=lt,this}setZ(lt){return this.z=lt,this}setW(lt){return this.w=lt,this}setComponent(lt,dt){switch(lt){case 0:this.x=dt;break;case 1:this.y=dt;break;case 2:this.z=dt;break;case 3:this.w=dt;break;default:throw new Error("index is out of range: "+lt)}return this}getComponent(lt){switch(lt){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+lt)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(lt){return this.x=lt.x,this.y=lt.y,this.z=lt.z,this.w=lt.w!==void 0?lt.w:1,this}add(lt){return this.x+=lt.x,this.y+=lt.y,this.z+=lt.z,this.w+=lt.w,this}addScalar(lt){return this.x+=lt,this.y+=lt,this.z+=lt,this.w+=lt,this}addVectors(lt,dt){return this.x=lt.x+dt.x,this.y=lt.y+dt.y,this.z=lt.z+dt.z,this.w=lt.w+dt.w,this}addScaledVector(lt,dt){return this.x+=lt.x*dt,this.y+=lt.y*dt,this.z+=lt.z*dt,this.w+=lt.w*dt,this}sub(lt){return this.x-=lt.x,this.y-=lt.y,this.z-=lt.z,this.w-=lt.w,this}subScalar(lt){return this.x-=lt,this.y-=lt,this.z-=lt,this.w-=lt,this}subVectors(lt,dt){return this.x=lt.x-dt.x,this.y=lt.y-dt.y,this.z=lt.z-dt.z,this.w=lt.w-dt.w,this}multiply(lt){return this.x*=lt.x,this.y*=lt.y,this.z*=lt.z,this.w*=lt.w,this}multiplyScalar(lt){return this.x*=lt,this.y*=lt,this.z*=lt,this.w*=lt,this}applyMatrix4(lt){const dt=this.x,vt=this.y,Tt=this.z,Et=this.w,Ct=lt.elements;return this.x=Ct[0]*dt+Ct[4]*vt+Ct[8]*Tt+Ct[12]*Et,this.y=Ct[1]*dt+Ct[5]*vt+Ct[9]*Tt+Ct[13]*Et,this.z=Ct[2]*dt+Ct[6]*vt+Ct[10]*Tt+Ct[14]*Et,this.w=Ct[3]*dt+Ct[7]*vt+Ct[11]*Tt+Ct[15]*Et,this}divideScalar(lt){return this.multiplyScalar(1/lt)}setAxisAngleFromQuaternion(lt){this.w=2*Math.acos(lt.w);const dt=Math.sqrt(1-lt.w*lt.w);return dt<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=lt.x/dt,this.y=lt.y/dt,this.z=lt.z/dt),this}setAxisAngleFromRotationMatrix(lt){let dt,vt,Tt,Et;const kt=lt.elements,Dt=kt[0],Bt=kt[4],Ft=kt[8],Ut=kt[1],Zt=kt[5],Kt=kt[9],ln=kt[2],hn=kt[6],dn=kt[10];if(Math.abs(Bt-Ut)<.01&&Math.abs(Ft-ln)<.01&&Math.abs(Kt-hn)<.01){if(Math.abs(Bt+Ut)<.1&&Math.abs(Ft+ln)<.1&&Math.abs(Kt+hn)<.1&&Math.abs(Dt+Zt+dn-3)<.1)return this.set(1,0,0,0),this;dt=Math.PI;const mn=(Dt+1)/2,On=(Zt+1)/2,bn=(dn+1)/2,En=(Bt+Ut)/4,An=(Ft+ln)/4,Tn=(Kt+hn)/4;return mn>On&&mn>bn?mn<.01?(vt=0,Tt=.707106781,Et=.707106781):(vt=Math.sqrt(mn),Tt=En/vt,Et=An/vt):On>bn?On<.01?(vt=.707106781,Tt=0,Et=.707106781):(Tt=Math.sqrt(On),vt=En/Tt,Et=Tn/Tt):bn<.01?(vt=.707106781,Tt=.707106781,Et=0):(Et=Math.sqrt(bn),vt=An/Et,Tt=Tn/Et),this.set(vt,Tt,Et,dt),this}let pn=Math.sqrt((hn-Kt)*(hn-Kt)+(Ft-ln)*(Ft-ln)+(Ut-Bt)*(Ut-Bt));return Math.abs(pn)<.001&&(pn=1),this.x=(hn-Kt)/pn,this.y=(Ft-ln)/pn,this.z=(Ut-Bt)/pn,this.w=Math.acos((Dt+Zt+dn-1)/2),this}min(lt){return this.x=Math.min(this.x,lt.x),this.y=Math.min(this.y,lt.y),this.z=Math.min(this.z,lt.z),this.w=Math.min(this.w,lt.w),this}max(lt){return this.x=Math.max(this.x,lt.x),this.y=Math.max(this.y,lt.y),this.z=Math.max(this.z,lt.z),this.w=Math.max(this.w,lt.w),this}clamp(lt,dt){return this.x=Math.max(lt.x,Math.min(dt.x,this.x)),this.y=Math.max(lt.y,Math.min(dt.y,this.y)),this.z=Math.max(lt.z,Math.min(dt.z,this.z)),this.w=Math.max(lt.w,Math.min(dt.w,this.w)),this}clampScalar(lt,dt){return this.x=Math.max(lt,Math.min(dt,this.x)),this.y=Math.max(lt,Math.min(dt,this.y)),this.z=Math.max(lt,Math.min(dt,this.z)),this.w=Math.max(lt,Math.min(dt,this.w)),this}clampLength(lt,dt){const vt=this.length();return this.divideScalar(vt||1).multiplyScalar(Math.max(lt,Math.min(dt,vt)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(lt){return this.x*lt.x+this.y*lt.y+this.z*lt.z+this.w*lt.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(lt){return this.normalize().multiplyScalar(lt)}lerp(lt,dt){return this.x+=(lt.x-this.x)*dt,this.y+=(lt.y-this.y)*dt,this.z+=(lt.z-this.z)*dt,this.w+=(lt.w-this.w)*dt,this}lerpVectors(lt,dt,vt){return this.x=lt.x+(dt.x-lt.x)*vt,this.y=lt.y+(dt.y-lt.y)*vt,this.z=lt.z+(dt.z-lt.z)*vt,this.w=lt.w+(dt.w-lt.w)*vt,this}equals(lt){return lt.x===this.x&&lt.y===this.y&&lt.z===this.z&&lt.w===this.w}fromArray(lt,dt=0){return this.x=lt[dt],this.y=lt[dt+1],this.z=lt[dt+2],this.w=lt[dt+3],this}toArray(lt=[],dt=0){return lt[dt]=this.x,lt[dt+1]=this.y,lt[dt+2]=this.z,lt[dt+3]=this.w,lt}fromBufferAttribute(lt,dt){return this.x=lt.getX(dt),this.y=lt.getY(dt),this.z=lt.getZ(dt),this.w=lt.getW(dt),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class WebGLRenderTarget extends EventDispatcher{constructor(lt=1,dt=1,vt={}){super(),this.isWebGLRenderTarget=!0,this.width=lt,this.height=dt,this.depth=1,this.scissor=new Vector4(0,0,lt,dt),this.scissorTest=!1,this.viewport=new Vector4(0,0,lt,dt);const Tt={width:lt,height:dt,depth:1};this.texture=new Texture(Tt,vt.mapping,vt.wrapS,vt.wrapT,vt.magFilter,vt.minFilter,vt.format,vt.type,vt.anisotropy,vt.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=vt.generateMipmaps!==void 0?vt.generateMipmaps:!1,this.texture.internalFormat=vt.internalFormat!==void 0?vt.internalFormat:null,this.texture.minFilter=vt.minFilter!==void 0?vt.minFilter:LinearFilter,this.depthBuffer=vt.depthBuffer!==void 0?vt.depthBuffer:!0,this.stencilBuffer=vt.stencilBuffer!==void 0?vt.stencilBuffer:!1,this.depthTexture=vt.depthTexture!==void 0?vt.depthTexture:null,this.samples=vt.samples!==void 0?vt.samples:0}setSize(lt,dt,vt=1){(this.width!==lt||this.height!==dt||this.depth!==vt)&&(this.width=lt,this.height=dt,this.depth=vt,this.texture.image.width=lt,this.texture.image.height=dt,this.texture.image.depth=vt,this.dispose()),this.viewport.set(0,0,lt,dt),this.scissor.set(0,0,lt,dt)}clone(){return new this.constructor().copy(this)}copy(lt){this.width=lt.width,this.height=lt.height,this.depth=lt.depth,this.viewport.copy(lt.viewport),this.texture=lt.texture.clone(),this.texture.isRenderTargetTexture=!0;const dt=Object.assign({},lt.texture.image);return this.texture.source=new Source(dt),this.depthBuffer=lt.depthBuffer,this.stencilBuffer=lt.stencilBuffer,lt.depthTexture!==null&&(this.depthTexture=lt.depthTexture.clone()),this.samples=lt.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class DataArrayTexture extends Texture{constructor(lt=null,dt=1,vt=1,Tt=1){super(null),this.isDataArrayTexture=!0,this.image={data:lt,width:dt,height:vt,depth:Tt},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class WebGLArrayRenderTarget extends WebGLRenderTarget{constructor(lt=1,dt=1,vt=1){super(lt,dt),this.isWebGLArrayRenderTarget=!0,this.depth=vt,this.texture=new DataArrayTexture(null,lt,dt,vt),this.texture.isRenderTargetTexture=!0}}class Data3DTexture extends Texture{constructor(lt=null,dt=1,vt=1,Tt=1){super(null),this.isData3DTexture=!0,this.image={data:lt,width:dt,height:vt,depth:Tt},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class WebGL3DRenderTarget extends WebGLRenderTarget{constructor(lt=1,dt=1,vt=1){super(lt,dt),this.isWebGL3DRenderTarget=!0,this.depth=vt,this.texture=new Data3DTexture(null,lt,dt,vt),this.texture.isRenderTargetTexture=!0}}class WebGLMultipleRenderTargets extends WebGLRenderTarget{constructor(lt=1,dt=1,vt=1,Tt={}){super(lt,dt,Tt),this.isWebGLMultipleRenderTargets=!0;const Et=this.texture;this.texture=[];for(let Ct=0;Ct<vt;Ct++)this.texture[Ct]=Et.clone(),this.texture[Ct].isRenderTargetTexture=!0}setSize(lt,dt,vt=1){if(this.width!==lt||this.height!==dt||this.depth!==vt){this.width=lt,this.height=dt,this.depth=vt;for(let Tt=0,Et=this.texture.length;Tt<Et;Tt++)this.texture[Tt].image.width=lt,this.texture[Tt].image.height=dt,this.texture[Tt].image.depth=vt;this.dispose()}return this.viewport.set(0,0,lt,dt),this.scissor.set(0,0,lt,dt),this}copy(lt){this.dispose(),this.width=lt.width,this.height=lt.height,this.depth=lt.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=lt.depthBuffer,this.stencilBuffer=lt.stencilBuffer,lt.depthTexture!==null&&(this.depthTexture=lt.depthTexture.clone()),this.texture.length=0;for(let dt=0,vt=lt.texture.length;dt<vt;dt++)this.texture[dt]=lt.texture[dt].clone(),this.texture[dt].isRenderTargetTexture=!0;return this}}class Box3{constructor(lt=new Vector3(1/0,1/0,1/0),dt=new Vector3(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=lt,this.max=dt}set(lt,dt){return this.min.copy(lt),this.max.copy(dt),this}setFromArray(lt){let dt=1/0,vt=1/0,Tt=1/0,Et=-1/0,Ct=-1/0,Rt=-1/0;for(let kt=0,Dt=lt.length;kt<Dt;kt+=3){const Bt=lt[kt],Ft=lt[kt+1],Ut=lt[kt+2];Bt<dt&&(dt=Bt),Ft<vt&&(vt=Ft),Ut<Tt&&(Tt=Ut),Bt>Et&&(Et=Bt),Ft>Ct&&(Ct=Ft),Ut>Rt&&(Rt=Ut)}return this.min.set(dt,vt,Tt),this.max.set(Et,Ct,Rt),this}setFromBufferAttribute(lt){let dt=1/0,vt=1/0,Tt=1/0,Et=-1/0,Ct=-1/0,Rt=-1/0;for(let kt=0,Dt=lt.count;kt<Dt;kt++){const Bt=lt.getX(kt),Ft=lt.getY(kt),Ut=lt.getZ(kt);Bt<dt&&(dt=Bt),Ft<vt&&(vt=Ft),Ut<Tt&&(Tt=Ut),Bt>Et&&(Et=Bt),Ft>Ct&&(Ct=Ft),Ut>Rt&&(Rt=Ut)}return this.min.set(dt,vt,Tt),this.max.set(Et,Ct,Rt),this}setFromPoints(lt){this.makeEmpty();for(let dt=0,vt=lt.length;dt<vt;dt++)this.expandByPoint(lt[dt]);return this}setFromCenterAndSize(lt,dt){const vt=_vector$b.copy(dt).multiplyScalar(.5);return this.min.copy(lt).sub(vt),this.max.copy(lt).add(vt),this}setFromObject(lt,dt=!1){return this.makeEmpty(),this.expandByObject(lt,dt)}clone(){return new this.constructor().copy(this)}copy(lt){return this.min.copy(lt.min),this.max.copy(lt.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(lt){return this.isEmpty()?lt.set(0,0,0):lt.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(lt){return this.isEmpty()?lt.set(0,0,0):lt.subVectors(this.max,this.min)}expandByPoint(lt){return this.min.min(lt),this.max.max(lt),this}expandByVector(lt){return this.min.sub(lt),this.max.add(lt),this}expandByScalar(lt){return this.min.addScalar(-lt),this.max.addScalar(lt),this}expandByObject(lt,dt=!1){lt.updateWorldMatrix(!1,!1);const vt=lt.geometry;if(vt!==void 0)if(dt&&vt.attributes!=null&&vt.attributes.position!==void 0){const Et=vt.attributes.position;for(let Ct=0,Rt=Et.count;Ct<Rt;Ct++)_vector$b.fromBufferAttribute(Et,Ct).applyMatrix4(lt.matrixWorld),this.expandByPoint(_vector$b)}else vt.boundingBox===null&&vt.computeBoundingBox(),_box$3.copy(vt.boundingBox),_box$3.applyMatrix4(lt.matrixWorld),this.union(_box$3);const Tt=lt.children;for(let Et=0,Ct=Tt.length;Et<Ct;Et++)this.expandByObject(Tt[Et],dt);return this}containsPoint(lt){return!(lt.x<this.min.x||lt.x>this.max.x||lt.y<this.min.y||lt.y>this.max.y||lt.z<this.min.z||lt.z>this.max.z)}containsBox(lt){return this.min.x<=lt.min.x&&lt.max.x<=this.max.x&&this.min.y<=lt.min.y&&lt.max.y<=this.max.y&&this.min.z<=lt.min.z&&lt.max.z<=this.max.z}getParameter(lt,dt){return dt.set((lt.x-this.min.x)/(this.max.x-this.min.x),(lt.y-this.min.y)/(this.max.y-this.min.y),(lt.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(lt){return!(lt.max.x<this.min.x||lt.min.x>this.max.x||lt.max.y<this.min.y||lt.min.y>this.max.y||lt.max.z<this.min.z||lt.min.z>this.max.z)}intersectsSphere(lt){return this.clampPoint(lt.center,_vector$b),_vector$b.distanceToSquared(lt.center)<=lt.radius*lt.radius}intersectsPlane(lt){let dt,vt;return lt.normal.x>0?(dt=lt.normal.x*this.min.x,vt=lt.normal.x*this.max.x):(dt=lt.normal.x*this.max.x,vt=lt.normal.x*this.min.x),lt.normal.y>0?(dt+=lt.normal.y*this.min.y,vt+=lt.normal.y*this.max.y):(dt+=lt.normal.y*this.max.y,vt+=lt.normal.y*this.min.y),lt.normal.z>0?(dt+=lt.normal.z*this.min.z,vt+=lt.normal.z*this.max.z):(dt+=lt.normal.z*this.max.z,vt+=lt.normal.z*this.min.z),dt<=-lt.constant&&vt>=-lt.constant}intersectsTriangle(lt){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0$2.subVectors(lt.a,_center),_v1$7.subVectors(lt.b,_center),_v2$4.subVectors(lt.c,_center),_f0.subVectors(_v1$7,_v0$2),_f1.subVectors(_v2$4,_v1$7),_f2.subVectors(_v0$2,_v2$4);let dt=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes(dt,_v0$2,_v1$7,_v2$4,_extents)||(dt=[1,0,0,0,1,0,0,0,1],!satForAxes(dt,_v0$2,_v1$7,_v2$4,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),dt=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(dt,_v0$2,_v1$7,_v2$4,_extents))}clampPoint(lt,dt){return dt.copy(lt).clamp(this.min,this.max)}distanceToPoint(lt){return this.clampPoint(lt,_vector$b).distanceTo(lt)}getBoundingSphere(lt){return this.isEmpty()?lt.makeEmpty():(this.getCenter(lt.center),lt.radius=this.getSize(_vector$b).length()*.5),lt}intersect(lt){return this.min.max(lt.min),this.max.min(lt.max),this.isEmpty()&&this.makeEmpty(),this}union(lt){return this.min.min(lt.min),this.max.max(lt.max),this}applyMatrix4(lt){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(lt),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(lt),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(lt),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(lt),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(lt),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(lt),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(lt),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(lt),this.setFromPoints(_points),this)}translate(lt){return this.min.add(lt),this.max.add(lt),this}equals(lt){return lt.min.equals(this.min)&&lt.max.equals(this.max)}}const _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$b=new Vector3,_box$3=new Box3,_v0$2=new Vector3,_v1$7=new Vector3,_v2$4=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function satForAxes(ft,lt,dt,vt,Tt){for(let Et=0,Ct=ft.length-3;Et<=Ct;Et+=3){_testAxis.fromArray(ft,Et);const Rt=Tt.x*Math.abs(_testAxis.x)+Tt.y*Math.abs(_testAxis.y)+Tt.z*Math.abs(_testAxis.z),kt=lt.dot(_testAxis),Dt=dt.dot(_testAxis),Bt=vt.dot(_testAxis);if(Math.max(-Math.max(kt,Dt,Bt),Math.min(kt,Dt,Bt))>Rt)return!1}return!0}const _box$2=new Box3,_v1$6=new Vector3,_v2$3=new Vector3;let Sphere$1=class{constructor(lt=new Vector3,dt=-1){this.center=lt,this.radius=dt}set(lt,dt){return this.center.copy(lt),this.radius=dt,this}setFromPoints(lt,dt){const vt=this.center;dt!==void 0?vt.copy(dt):_box$2.setFromPoints(lt).getCenter(vt);let Tt=0;for(let Et=0,Ct=lt.length;Et<Ct;Et++)Tt=Math.max(Tt,vt.distanceToSquared(lt[Et]));return this.radius=Math.sqrt(Tt),this}copy(lt){return this.center.copy(lt.center),this.radius=lt.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(lt){return lt.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(lt){return lt.distanceTo(this.center)-this.radius}intersectsSphere(lt){const dt=this.radius+lt.radius;return lt.center.distanceToSquared(this.center)<=dt*dt}intersectsBox(lt){return lt.intersectsSphere(this)}intersectsPlane(lt){return Math.abs(lt.distanceToPoint(this.center))<=this.radius}clampPoint(lt,dt){const vt=this.center.distanceToSquared(lt);return dt.copy(lt),vt>this.radius*this.radius&&(dt.sub(this.center).normalize(),dt.multiplyScalar(this.radius).add(this.center)),dt}getBoundingBox(lt){return this.isEmpty()?(lt.makeEmpty(),lt):(lt.set(this.center,this.center),lt.expandByScalar(this.radius),lt)}applyMatrix4(lt){return this.center.applyMatrix4(lt),this.radius=this.radius*lt.getMaxScaleOnAxis(),this}translate(lt){return this.center.add(lt),this}expandByPoint(lt){if(this.isEmpty())return this.center.copy(lt),this.radius=0,this;_v1$6.subVectors(lt,this.center);const dt=_v1$6.lengthSq();if(dt>this.radius*this.radius){const vt=Math.sqrt(dt),Tt=(vt-this.radius)*.5;this.center.addScaledVector(_v1$6,Tt/vt),this.radius+=Tt}return this}union(lt){return lt.isEmpty()?this:this.isEmpty()?(this.copy(lt),this):(this.center.equals(lt.center)===!0?this.radius=Math.max(this.radius,lt.radius):(_v2$3.subVectors(lt.center,this.center).setLength(lt.radius),this.expandByPoint(_v1$6.copy(lt.center).add(_v2$3)),this.expandByPoint(_v1$6.copy(lt.center).sub(_v2$3))),this)}equals(lt){return lt.center.equals(this.center)&&lt.radius===this.radius}clone(){return new this.constructor().copy(this)}};const _vector$a=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal$1=new Vector3;class Ray{constructor(lt=new Vector3,dt=new Vector3(0,0,-1)){this.origin=lt,this.direction=dt}set(lt,dt){return this.origin.copy(lt),this.direction.copy(dt),this}copy(lt){return this.origin.copy(lt.origin),this.direction.copy(lt.direction),this}at(lt,dt){return dt.copy(this.origin).addScaledVector(this.direction,lt)}lookAt(lt){return this.direction.copy(lt).sub(this.origin).normalize(),this}recast(lt){return this.origin.copy(this.at(lt,_vector$a)),this}closestPointToPoint(lt,dt){dt.subVectors(lt,this.origin);const vt=dt.dot(this.direction);return vt<0?dt.copy(this.origin):dt.copy(this.origin).addScaledVector(this.direction,vt)}distanceToPoint(lt){return Math.sqrt(this.distanceSqToPoint(lt))}distanceSqToPoint(lt){const dt=_vector$a.subVectors(lt,this.origin).dot(this.direction);return dt<0?this.origin.distanceToSquared(lt):(_vector$a.copy(this.origin).addScaledVector(this.direction,dt),_vector$a.distanceToSquared(lt))}distanceSqToSegment(lt,dt,vt,Tt){_segCenter.copy(lt).add(dt).multiplyScalar(.5),_segDir.copy(dt).sub(lt).normalize(),_diff.copy(this.origin).sub(_segCenter);const Et=lt.distanceTo(dt)*.5,Ct=-this.direction.dot(_segDir),Rt=_diff.dot(this.direction),kt=-_diff.dot(_segDir),Dt=_diff.lengthSq(),Bt=Math.abs(1-Ct*Ct);let Ft,Ut,Zt,Kt;if(Bt>0)if(Ft=Ct*kt-Rt,Ut=Ct*Rt-kt,Kt=Et*Bt,Ft>=0)if(Ut>=-Kt)if(Ut<=Kt){const ln=1/Bt;Ft*=ln,Ut*=ln,Zt=Ft*(Ft+Ct*Ut+2*Rt)+Ut*(Ct*Ft+Ut+2*kt)+Dt}else Ut=Et,Ft=Math.max(0,-(Ct*Ut+Rt)),Zt=-Ft*Ft+Ut*(Ut+2*kt)+Dt;else Ut=-Et,Ft=Math.max(0,-(Ct*Ut+Rt)),Zt=-Ft*Ft+Ut*(Ut+2*kt)+Dt;else Ut<=-Kt?(Ft=Math.max(0,-(-Ct*Et+Rt)),Ut=Ft>0?-Et:Math.min(Math.max(-Et,-kt),Et),Zt=-Ft*Ft+Ut*(Ut+2*kt)+Dt):Ut<=Kt?(Ft=0,Ut=Math.min(Math.max(-Et,-kt),Et),Zt=Ut*(Ut+2*kt)+Dt):(Ft=Math.max(0,-(Ct*Et+Rt)),Ut=Ft>0?Et:Math.min(Math.max(-Et,-kt),Et),Zt=-Ft*Ft+Ut*(Ut+2*kt)+Dt);else Ut=Ct>0?-Et:Et,Ft=Math.max(0,-(Ct*Ut+Rt)),Zt=-Ft*Ft+Ut*(Ut+2*kt)+Dt;return vt&&vt.copy(this.origin).addScaledVector(this.direction,Ft),Tt&&Tt.copy(_segCenter).addScaledVector(_segDir,Ut),Zt}intersectSphere(lt,dt){_vector$a.subVectors(lt.center,this.origin);const vt=_vector$a.dot(this.direction),Tt=_vector$a.dot(_vector$a)-vt*vt,Et=lt.radius*lt.radius;if(Tt>Et)return null;const Ct=Math.sqrt(Et-Tt),Rt=vt-Ct,kt=vt+Ct;return kt<0?null:Rt<0?this.at(kt,dt):this.at(Rt,dt)}intersectsSphere(lt){return this.distanceSqToPoint(lt.center)<=lt.radius*lt.radius}distanceToPlane(lt){const dt=lt.normal.dot(this.direction);if(dt===0)return lt.distanceToPoint(this.origin)===0?0:null;const vt=-(this.origin.dot(lt.normal)+lt.constant)/dt;return vt>=0?vt:null}intersectPlane(lt,dt){const vt=this.distanceToPlane(lt);return vt===null?null:this.at(vt,dt)}intersectsPlane(lt){const dt=lt.distanceToPoint(this.origin);return dt===0||lt.normal.dot(this.direction)*dt<0}intersectBox(lt,dt){let vt,Tt,Et,Ct,Rt,kt;const Dt=1/this.direction.x,Bt=1/this.direction.y,Ft=1/this.direction.z,Ut=this.origin;return Dt>=0?(vt=(lt.min.x-Ut.x)*Dt,Tt=(lt.max.x-Ut.x)*Dt):(vt=(lt.max.x-Ut.x)*Dt,Tt=(lt.min.x-Ut.x)*Dt),Bt>=0?(Et=(lt.min.y-Ut.y)*Bt,Ct=(lt.max.y-Ut.y)*Bt):(Et=(lt.max.y-Ut.y)*Bt,Ct=(lt.min.y-Ut.y)*Bt),vt>Ct||Et>Tt||((Et>vt||isNaN(vt))&&(vt=Et),(Ct<Tt||isNaN(Tt))&&(Tt=Ct),Ft>=0?(Rt=(lt.min.z-Ut.z)*Ft,kt=(lt.max.z-Ut.z)*Ft):(Rt=(lt.max.z-Ut.z)*Ft,kt=(lt.min.z-Ut.z)*Ft),vt>kt||Rt>Tt)||((Rt>vt||vt!==vt)&&(vt=Rt),(kt<Tt||Tt!==Tt)&&(Tt=kt),Tt<0)?null:this.at(vt>=0?vt:Tt,dt)}intersectsBox(lt){return this.intersectBox(lt,_vector$a)!==null}intersectTriangle(lt,dt,vt,Tt,Et){_edge1.subVectors(dt,lt),_edge2.subVectors(vt,lt),_normal$1.crossVectors(_edge1,_edge2);let Ct=this.direction.dot(_normal$1),Rt;if(Ct>0){if(Tt)return null;Rt=1}else if(Ct<0)Rt=-1,Ct=-Ct;else return null;_diff.subVectors(this.origin,lt);const kt=Rt*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(kt<0)return null;const Dt=Rt*this.direction.dot(_edge1.cross(_diff));if(Dt<0||kt+Dt>Ct)return null;const Bt=-Rt*_diff.dot(_normal$1);return Bt<0?null:this.at(Bt/Ct,Et)}applyMatrix4(lt){return this.origin.applyMatrix4(lt),this.direction.transformDirection(lt),this}equals(lt){return lt.origin.equals(this.origin)&&lt.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Matrix4{constructor(){Matrix4.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(lt,dt,vt,Tt,Et,Ct,Rt,kt,Dt,Bt,Ft,Ut,Zt,Kt,ln,hn){const dn=this.elements;return dn[0]=lt,dn[4]=dt,dn[8]=vt,dn[12]=Tt,dn[1]=Et,dn[5]=Ct,dn[9]=Rt,dn[13]=kt,dn[2]=Dt,dn[6]=Bt,dn[10]=Ft,dn[14]=Ut,dn[3]=Zt,dn[7]=Kt,dn[11]=ln,dn[15]=hn,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Matrix4().fromArray(this.elements)}copy(lt){const dt=this.elements,vt=lt.elements;return dt[0]=vt[0],dt[1]=vt[1],dt[2]=vt[2],dt[3]=vt[3],dt[4]=vt[4],dt[5]=vt[5],dt[6]=vt[6],dt[7]=vt[7],dt[8]=vt[8],dt[9]=vt[9],dt[10]=vt[10],dt[11]=vt[11],dt[12]=vt[12],dt[13]=vt[13],dt[14]=vt[14],dt[15]=vt[15],this}copyPosition(lt){const dt=this.elements,vt=lt.elements;return dt[12]=vt[12],dt[13]=vt[13],dt[14]=vt[14],this}setFromMatrix3(lt){const dt=lt.elements;return this.set(dt[0],dt[3],dt[6],0,dt[1],dt[4],dt[7],0,dt[2],dt[5],dt[8],0,0,0,0,1),this}extractBasis(lt,dt,vt){return lt.setFromMatrixColumn(this,0),dt.setFromMatrixColumn(this,1),vt.setFromMatrixColumn(this,2),this}makeBasis(lt,dt,vt){return this.set(lt.x,dt.x,vt.x,0,lt.y,dt.y,vt.y,0,lt.z,dt.z,vt.z,0,0,0,0,1),this}extractRotation(lt){const dt=this.elements,vt=lt.elements,Tt=1/_v1$5.setFromMatrixColumn(lt,0).length(),Et=1/_v1$5.setFromMatrixColumn(lt,1).length(),Ct=1/_v1$5.setFromMatrixColumn(lt,2).length();return dt[0]=vt[0]*Tt,dt[1]=vt[1]*Tt,dt[2]=vt[2]*Tt,dt[3]=0,dt[4]=vt[4]*Et,dt[5]=vt[5]*Et,dt[6]=vt[6]*Et,dt[7]=0,dt[8]=vt[8]*Ct,dt[9]=vt[9]*Ct,dt[10]=vt[10]*Ct,dt[11]=0,dt[12]=0,dt[13]=0,dt[14]=0,dt[15]=1,this}makeRotationFromEuler(lt){const dt=this.elements,vt=lt.x,Tt=lt.y,Et=lt.z,Ct=Math.cos(vt),Rt=Math.sin(vt),kt=Math.cos(Tt),Dt=Math.sin(Tt),Bt=Math.cos(Et),Ft=Math.sin(Et);if(lt.order==="XYZ"){const Ut=Ct*Bt,Zt=Ct*Ft,Kt=Rt*Bt,ln=Rt*Ft;dt[0]=kt*Bt,dt[4]=-kt*Ft,dt[8]=Dt,dt[1]=Zt+Kt*Dt,dt[5]=Ut-ln*Dt,dt[9]=-Rt*kt,dt[2]=ln-Ut*Dt,dt[6]=Kt+Zt*Dt,dt[10]=Ct*kt}else if(lt.order==="YXZ"){const Ut=kt*Bt,Zt=kt*Ft,Kt=Dt*Bt,ln=Dt*Ft;dt[0]=Ut+ln*Rt,dt[4]=Kt*Rt-Zt,dt[8]=Ct*Dt,dt[1]=Ct*Ft,dt[5]=Ct*Bt,dt[9]=-Rt,dt[2]=Zt*Rt-Kt,dt[6]=ln+Ut*Rt,dt[10]=Ct*kt}else if(lt.order==="ZXY"){const Ut=kt*Bt,Zt=kt*Ft,Kt=Dt*Bt,ln=Dt*Ft;dt[0]=Ut-ln*Rt,dt[4]=-Ct*Ft,dt[8]=Kt+Zt*Rt,dt[1]=Zt+Kt*Rt,dt[5]=Ct*Bt,dt[9]=ln-Ut*Rt,dt[2]=-Ct*Dt,dt[6]=Rt,dt[10]=Ct*kt}else if(lt.order==="ZYX"){const Ut=Ct*Bt,Zt=Ct*Ft,Kt=Rt*Bt,ln=Rt*Ft;dt[0]=kt*Bt,dt[4]=Kt*Dt-Zt,dt[8]=Ut*Dt+ln,dt[1]=kt*Ft,dt[5]=ln*Dt+Ut,dt[9]=Zt*Dt-Kt,dt[2]=-Dt,dt[6]=Rt*kt,dt[10]=Ct*kt}else if(lt.order==="YZX"){const Ut=Ct*kt,Zt=Ct*Dt,Kt=Rt*kt,ln=Rt*Dt;dt[0]=kt*Bt,dt[4]=ln-Ut*Ft,dt[8]=Kt*Ft+Zt,dt[1]=Ft,dt[5]=Ct*Bt,dt[9]=-Rt*Bt,dt[2]=-Dt*Bt,dt[6]=Zt*Ft+Kt,dt[10]=Ut-ln*Ft}else if(lt.order==="XZY"){const Ut=Ct*kt,Zt=Ct*Dt,Kt=Rt*kt,ln=Rt*Dt;dt[0]=kt*Bt,dt[4]=-Ft,dt[8]=Dt*Bt,dt[1]=Ut*Ft+ln,dt[5]=Ct*Bt,dt[9]=Zt*Ft-Kt,dt[2]=Kt*Ft-Zt,dt[6]=Rt*Bt,dt[10]=ln*Ft+Ut}return dt[3]=0,dt[7]=0,dt[11]=0,dt[12]=0,dt[13]=0,dt[14]=0,dt[15]=1,this}makeRotationFromQuaternion(lt){return this.compose(_zero,lt,_one)}lookAt(lt,dt,vt){const Tt=this.elements;return _z.subVectors(lt,dt),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(vt,_z),_x.lengthSq()===0&&(Math.abs(vt.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(vt,_z)),_x.normalize(),_y.crossVectors(_z,_x),Tt[0]=_x.x,Tt[4]=_y.x,Tt[8]=_z.x,Tt[1]=_x.y,Tt[5]=_y.y,Tt[9]=_z.y,Tt[2]=_x.z,Tt[6]=_y.z,Tt[10]=_z.z,this}multiply(lt){return this.multiplyMatrices(this,lt)}premultiply(lt){return this.multiplyMatrices(lt,this)}multiplyMatrices(lt,dt){const vt=lt.elements,Tt=dt.elements,Et=this.elements,Ct=vt[0],Rt=vt[4],kt=vt[8],Dt=vt[12],Bt=vt[1],Ft=vt[5],Ut=vt[9],Zt=vt[13],Kt=vt[2],ln=vt[6],hn=vt[10],dn=vt[14],pn=vt[3],mn=vt[7],On=vt[11],bn=vt[15],En=Tt[0],An=Tt[4],Tn=Tt[8],In=Tt[12],Rn=Tt[1],Dn=Tt[5],Bn=Tt[9],Hn=Tt[13],jn=Tt[2],Kn=Tt[6],zn=Tt[10],lr=Tt[14],Ln=Tt[3],Vn=Tt[7],Wn=Tt[11],sr=Tt[15];return Et[0]=Ct*En+Rt*Rn+kt*jn+Dt*Ln,Et[4]=Ct*An+Rt*Dn+kt*Kn+Dt*Vn,Et[8]=Ct*Tn+Rt*Bn+kt*zn+Dt*Wn,Et[12]=Ct*In+Rt*Hn+kt*lr+Dt*sr,Et[1]=Bt*En+Ft*Rn+Ut*jn+Zt*Ln,Et[5]=Bt*An+Ft*Dn+Ut*Kn+Zt*Vn,Et[9]=Bt*Tn+Ft*Bn+Ut*zn+Zt*Wn,Et[13]=Bt*In+Ft*Hn+Ut*lr+Zt*sr,Et[2]=Kt*En+ln*Rn+hn*jn+dn*Ln,Et[6]=Kt*An+ln*Dn+hn*Kn+dn*Vn,Et[10]=Kt*Tn+ln*Bn+hn*zn+dn*Wn,Et[14]=Kt*In+ln*Hn+hn*lr+dn*sr,Et[3]=pn*En+mn*Rn+On*jn+bn*Ln,Et[7]=pn*An+mn*Dn+On*Kn+bn*Vn,Et[11]=pn*Tn+mn*Bn+On*zn+bn*Wn,Et[15]=pn*In+mn*Hn+On*lr+bn*sr,this}multiplyScalar(lt){const dt=this.elements;return dt[0]*=lt,dt[4]*=lt,dt[8]*=lt,dt[12]*=lt,dt[1]*=lt,dt[5]*=lt,dt[9]*=lt,dt[13]*=lt,dt[2]*=lt,dt[6]*=lt,dt[10]*=lt,dt[14]*=lt,dt[3]*=lt,dt[7]*=lt,dt[11]*=lt,dt[15]*=lt,this}determinant(){const lt=this.elements,dt=lt[0],vt=lt[4],Tt=lt[8],Et=lt[12],Ct=lt[1],Rt=lt[5],kt=lt[9],Dt=lt[13],Bt=lt[2],Ft=lt[6],Ut=lt[10],Zt=lt[14],Kt=lt[3],ln=lt[7],hn=lt[11],dn=lt[15];return Kt*(+Et*kt*Ft-Tt*Dt*Ft-Et*Rt*Ut+vt*Dt*Ut+Tt*Rt*Zt-vt*kt*Zt)+ln*(+dt*kt*Zt-dt*Dt*Ut+Et*Ct*Ut-Tt*Ct*Zt+Tt*Dt*Bt-Et*kt*Bt)+hn*(+dt*Dt*Ft-dt*Rt*Zt-Et*Ct*Ft+vt*Ct*Zt+Et*Rt*Bt-vt*Dt*Bt)+dn*(-Tt*Rt*Bt-dt*kt*Ft+dt*Rt*Ut+Tt*Ct*Ft-vt*Ct*Ut+vt*kt*Bt)}transpose(){const lt=this.elements;let dt;return dt=lt[1],lt[1]=lt[4],lt[4]=dt,dt=lt[2],lt[2]=lt[8],lt[8]=dt,dt=lt[6],lt[6]=lt[9],lt[9]=dt,dt=lt[3],lt[3]=lt[12],lt[12]=dt,dt=lt[7],lt[7]=lt[13],lt[13]=dt,dt=lt[11],lt[11]=lt[14],lt[14]=dt,this}setPosition(lt,dt,vt){const Tt=this.elements;return lt.isVector3?(Tt[12]=lt.x,Tt[13]=lt.y,Tt[14]=lt.z):(Tt[12]=lt,Tt[13]=dt,Tt[14]=vt),this}invert(){const lt=this.elements,dt=lt[0],vt=lt[1],Tt=lt[2],Et=lt[3],Ct=lt[4],Rt=lt[5],kt=lt[6],Dt=lt[7],Bt=lt[8],Ft=lt[9],Ut=lt[10],Zt=lt[11],Kt=lt[12],ln=lt[13],hn=lt[14],dn=lt[15],pn=Ft*hn*Dt-ln*Ut*Dt+ln*kt*Zt-Rt*hn*Zt-Ft*kt*dn+Rt*Ut*dn,mn=Kt*Ut*Dt-Bt*hn*Dt-Kt*kt*Zt+Ct*hn*Zt+Bt*kt*dn-Ct*Ut*dn,On=Bt*ln*Dt-Kt*Ft*Dt+Kt*Rt*Zt-Ct*ln*Zt-Bt*Rt*dn+Ct*Ft*dn,bn=Kt*Ft*kt-Bt*ln*kt-Kt*Rt*Ut+Ct*ln*Ut+Bt*Rt*hn-Ct*Ft*hn,En=dt*pn+vt*mn+Tt*On+Et*bn;if(En===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const An=1/En;return lt[0]=pn*An,lt[1]=(ln*Ut*Et-Ft*hn*Et-ln*Tt*Zt+vt*hn*Zt+Ft*Tt*dn-vt*Ut*dn)*An,lt[2]=(Rt*hn*Et-ln*kt*Et+ln*Tt*Dt-vt*hn*Dt-Rt*Tt*dn+vt*kt*dn)*An,lt[3]=(Ft*kt*Et-Rt*Ut*Et-Ft*Tt*Dt+vt*Ut*Dt+Rt*Tt*Zt-vt*kt*Zt)*An,lt[4]=mn*An,lt[5]=(Bt*hn*Et-Kt*Ut*Et+Kt*Tt*Zt-dt*hn*Zt-Bt*Tt*dn+dt*Ut*dn)*An,lt[6]=(Kt*kt*Et-Ct*hn*Et-Kt*Tt*Dt+dt*hn*Dt+Ct*Tt*dn-dt*kt*dn)*An,lt[7]=(Ct*Ut*Et-Bt*kt*Et+Bt*Tt*Dt-dt*Ut*Dt-Ct*Tt*Zt+dt*kt*Zt)*An,lt[8]=On*An,lt[9]=(Kt*Ft*Et-Bt*ln*Et-Kt*vt*Zt+dt*ln*Zt+Bt*vt*dn-dt*Ft*dn)*An,lt[10]=(Ct*ln*Et-Kt*Rt*Et+Kt*vt*Dt-dt*ln*Dt-Ct*vt*dn+dt*Rt*dn)*An,lt[11]=(Bt*Rt*Et-Ct*Ft*Et-Bt*vt*Dt+dt*Ft*Dt+Ct*vt*Zt-dt*Rt*Zt)*An,lt[12]=bn*An,lt[13]=(Bt*ln*Tt-Kt*Ft*Tt+Kt*vt*Ut-dt*ln*Ut-Bt*vt*hn+dt*Ft*hn)*An,lt[14]=(Kt*Rt*Tt-Ct*ln*Tt-Kt*vt*kt+dt*ln*kt+Ct*vt*hn-dt*Rt*hn)*An,lt[15]=(Ct*Ft*Tt-Bt*Rt*Tt+Bt*vt*kt-dt*Ft*kt-Ct*vt*Ut+dt*Rt*Ut)*An,this}scale(lt){const dt=this.elements,vt=lt.x,Tt=lt.y,Et=lt.z;return dt[0]*=vt,dt[4]*=Tt,dt[8]*=Et,dt[1]*=vt,dt[5]*=Tt,dt[9]*=Et,dt[2]*=vt,dt[6]*=Tt,dt[10]*=Et,dt[3]*=vt,dt[7]*=Tt,dt[11]*=Et,this}getMaxScaleOnAxis(){const lt=this.elements,dt=lt[0]*lt[0]+lt[1]*lt[1]+lt[2]*lt[2],vt=lt[4]*lt[4]+lt[5]*lt[5]+lt[6]*lt[6],Tt=lt[8]*lt[8]+lt[9]*lt[9]+lt[10]*lt[10];return Math.sqrt(Math.max(dt,vt,Tt))}makeTranslation(lt,dt,vt){return this.set(1,0,0,lt,0,1,0,dt,0,0,1,vt,0,0,0,1),this}makeRotationX(lt){const dt=Math.cos(lt),vt=Math.sin(lt);return this.set(1,0,0,0,0,dt,-vt,0,0,vt,dt,0,0,0,0,1),this}makeRotationY(lt){const dt=Math.cos(lt),vt=Math.sin(lt);return this.set(dt,0,vt,0,0,1,0,0,-vt,0,dt,0,0,0,0,1),this}makeRotationZ(lt){const dt=Math.cos(lt),vt=Math.sin(lt);return this.set(dt,-vt,0,0,vt,dt,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(lt,dt){const vt=Math.cos(dt),Tt=Math.sin(dt),Et=1-vt,Ct=lt.x,Rt=lt.y,kt=lt.z,Dt=Et*Ct,Bt=Et*Rt;return this.set(Dt*Ct+vt,Dt*Rt-Tt*kt,Dt*kt+Tt*Rt,0,Dt*Rt+Tt*kt,Bt*Rt+vt,Bt*kt-Tt*Ct,0,Dt*kt-Tt*Rt,Bt*kt+Tt*Ct,Et*kt*kt+vt,0,0,0,0,1),this}makeScale(lt,dt,vt){return this.set(lt,0,0,0,0,dt,0,0,0,0,vt,0,0,0,0,1),this}makeShear(lt,dt,vt,Tt,Et,Ct){return this.set(1,vt,Et,0,lt,1,Ct,0,dt,Tt,1,0,0,0,0,1),this}compose(lt,dt,vt){const Tt=this.elements,Et=dt._x,Ct=dt._y,Rt=dt._z,kt=dt._w,Dt=Et+Et,Bt=Ct+Ct,Ft=Rt+Rt,Ut=Et*Dt,Zt=Et*Bt,Kt=Et*Ft,ln=Ct*Bt,hn=Ct*Ft,dn=Rt*Ft,pn=kt*Dt,mn=kt*Bt,On=kt*Ft,bn=vt.x,En=vt.y,An=vt.z;return Tt[0]=(1-(ln+dn))*bn,Tt[1]=(Zt+On)*bn,Tt[2]=(Kt-mn)*bn,Tt[3]=0,Tt[4]=(Zt-On)*En,Tt[5]=(1-(Ut+dn))*En,Tt[6]=(hn+pn)*En,Tt[7]=0,Tt[8]=(Kt+mn)*An,Tt[9]=(hn-pn)*An,Tt[10]=(1-(Ut+ln))*An,Tt[11]=0,Tt[12]=lt.x,Tt[13]=lt.y,Tt[14]=lt.z,Tt[15]=1,this}decompose(lt,dt,vt){const Tt=this.elements;let Et=_v1$5.set(Tt[0],Tt[1],Tt[2]).length();const Ct=_v1$5.set(Tt[4],Tt[5],Tt[6]).length(),Rt=_v1$5.set(Tt[8],Tt[9],Tt[10]).length();this.determinant()<0&&(Et=-Et),lt.x=Tt[12],lt.y=Tt[13],lt.z=Tt[14],_m1$2.copy(this);const Dt=1/Et,Bt=1/Ct,Ft=1/Rt;return _m1$2.elements[0]*=Dt,_m1$2.elements[1]*=Dt,_m1$2.elements[2]*=Dt,_m1$2.elements[4]*=Bt,_m1$2.elements[5]*=Bt,_m1$2.elements[6]*=Bt,_m1$2.elements[8]*=Ft,_m1$2.elements[9]*=Ft,_m1$2.elements[10]*=Ft,dt.setFromRotationMatrix(_m1$2),vt.x=Et,vt.y=Ct,vt.z=Rt,this}makePerspective(lt,dt,vt,Tt,Et,Ct){const Rt=this.elements,kt=2*Et/(dt-lt),Dt=2*Et/(vt-Tt),Bt=(dt+lt)/(dt-lt),Ft=(vt+Tt)/(vt-Tt),Ut=-(Ct+Et)/(Ct-Et),Zt=-2*Ct*Et/(Ct-Et);return Rt[0]=kt,Rt[4]=0,Rt[8]=Bt,Rt[12]=0,Rt[1]=0,Rt[5]=Dt,Rt[9]=Ft,Rt[13]=0,Rt[2]=0,Rt[6]=0,Rt[10]=Ut,Rt[14]=Zt,Rt[3]=0,Rt[7]=0,Rt[11]=-1,Rt[15]=0,this}makeOrthographic(lt,dt,vt,Tt,Et,Ct){const Rt=this.elements,kt=1/(dt-lt),Dt=1/(vt-Tt),Bt=1/(Ct-Et),Ft=(dt+lt)*kt,Ut=(vt+Tt)*Dt,Zt=(Ct+Et)*Bt;return Rt[0]=2*kt,Rt[4]=0,Rt[8]=0,Rt[12]=-Ft,Rt[1]=0,Rt[5]=2*Dt,Rt[9]=0,Rt[13]=-Ut,Rt[2]=0,Rt[6]=0,Rt[10]=-2*Bt,Rt[14]=-Zt,Rt[3]=0,Rt[7]=0,Rt[11]=0,Rt[15]=1,this}equals(lt){const dt=this.elements,vt=lt.elements;for(let Tt=0;Tt<16;Tt++)if(dt[Tt]!==vt[Tt])return!1;return!0}fromArray(lt,dt=0){for(let vt=0;vt<16;vt++)this.elements[vt]=lt[vt+dt];return this}toArray(lt=[],dt=0){const vt=this.elements;return lt[dt]=vt[0],lt[dt+1]=vt[1],lt[dt+2]=vt[2],lt[dt+3]=vt[3],lt[dt+4]=vt[4],lt[dt+5]=vt[5],lt[dt+6]=vt[6],lt[dt+7]=vt[7],lt[dt+8]=vt[8],lt[dt+9]=vt[9],lt[dt+10]=vt[10],lt[dt+11]=vt[11],lt[dt+12]=vt[12],lt[dt+13]=vt[13],lt[dt+14]=vt[14],lt[dt+15]=vt[15],lt}}const _v1$5=new Vector3,_m1$2=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3,_matrix$1=new Matrix4,_quaternion$3=new Quaternion;class Euler{constructor(lt=0,dt=0,vt=0,Tt=Euler.DEFAULT_ORDER){this.isEuler=!0,this._x=lt,this._y=dt,this._z=vt,this._order=Tt}get x(){return this._x}set x(lt){this._x=lt,this._onChangeCallback()}get y(){return this._y}set y(lt){this._y=lt,this._onChangeCallback()}get z(){return this._z}set z(lt){this._z=lt,this._onChangeCallback()}get order(){return this._order}set order(lt){this._order=lt,this._onChangeCallback()}set(lt,dt,vt,Tt=this._order){return this._x=lt,this._y=dt,this._z=vt,this._order=Tt,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(lt){return this._x=lt._x,this._y=lt._y,this._z=lt._z,this._order=lt._order,this._onChangeCallback(),this}setFromRotationMatrix(lt,dt=this._order,vt=!0){const Tt=lt.elements,Et=Tt[0],Ct=Tt[4],Rt=Tt[8],kt=Tt[1],Dt=Tt[5],Bt=Tt[9],Ft=Tt[2],Ut=Tt[6],Zt=Tt[10];switch(dt){case"XYZ":this._y=Math.asin(clamp$1(Rt,-1,1)),Math.abs(Rt)<.9999999?(this._x=Math.atan2(-Bt,Zt),this._z=Math.atan2(-Ct,Et)):(this._x=Math.atan2(Ut,Dt),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp$1(Bt,-1,1)),Math.abs(Bt)<.9999999?(this._y=Math.atan2(Rt,Zt),this._z=Math.atan2(kt,Dt)):(this._y=Math.atan2(-Ft,Et),this._z=0);break;case"ZXY":this._x=Math.asin(clamp$1(Ut,-1,1)),Math.abs(Ut)<.9999999?(this._y=Math.atan2(-Ft,Zt),this._z=Math.atan2(-Ct,Dt)):(this._y=0,this._z=Math.atan2(kt,Et));break;case"ZYX":this._y=Math.asin(-clamp$1(Ft,-1,1)),Math.abs(Ft)<.9999999?(this._x=Math.atan2(Ut,Zt),this._z=Math.atan2(kt,Et)):(this._x=0,this._z=Math.atan2(-Ct,Dt));break;case"YZX":this._z=Math.asin(clamp$1(kt,-1,1)),Math.abs(kt)<.9999999?(this._x=Math.atan2(-Bt,Dt),this._y=Math.atan2(-Ft,Et)):(this._x=0,this._y=Math.atan2(Rt,Zt));break;case"XZY":this._z=Math.asin(-clamp$1(Ct,-1,1)),Math.abs(Ct)<.9999999?(this._x=Math.atan2(Ut,Dt),this._y=Math.atan2(Rt,Et)):(this._x=Math.atan2(-Bt,Zt),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+dt)}return this._order=dt,vt===!0&&this._onChangeCallback(),this}setFromQuaternion(lt,dt,vt){return _matrix$1.makeRotationFromQuaternion(lt),this.setFromRotationMatrix(_matrix$1,dt,vt)}setFromVector3(lt,dt=this._order){return this.set(lt.x,lt.y,lt.z,dt)}reorder(lt){return _quaternion$3.setFromEuler(this),this.setFromQuaternion(_quaternion$3,lt)}equals(lt){return lt._x===this._x&&lt._y===this._y&&lt._z===this._z&&lt._order===this._order}fromArray(lt){return this._x=lt[0],this._y=lt[1],this._z=lt[2],lt[3]!==void 0&&(this._order=lt[3]),this._onChangeCallback(),this}toArray(lt=[],dt=0){return lt[dt]=this._x,lt[dt+1]=this._y,lt[dt+2]=this._z,lt[dt+3]=this._order,lt}_onChange(lt){return this._onChangeCallback=lt,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Euler.DEFAULT_ORDER="XYZ";let Layers$1=class{constructor(){this.mask=1}set(lt){this.mask=(1<<lt|0)>>>0}enable(lt){this.mask|=1<<lt|0}enableAll(){this.mask=-1}toggle(lt){this.mask^=1<<lt|0}disable(lt){this.mask&=~(1<<lt|0)}disableAll(){this.mask=0}test(lt){return(this.mask&lt.mask)!==0}isEnabled(lt){return(this.mask&(1<<lt|0))!==0}},_object3DId=0;const _v1$4=new Vector3,_q1=new Quaternion,_m1$1=new Matrix4,_target=new Vector3,_position$3=new Vector3,_scale$2=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"};class Object3D extends EventDispatcher{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DEFAULT_UP.clone();const lt=new Vector3,dt=new Euler,vt=new Quaternion,Tt=new Vector3(1,1,1);function Et(){vt.setFromEuler(dt,!1)}function Ct(){dt.setFromQuaternion(vt,void 0,!1)}dt._onChange(Et),vt._onChange(Ct),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:lt},rotation:{configurable:!0,enumerable:!0,value:dt},quaternion:{configurable:!0,enumerable:!0,value:vt},scale:{configurable:!0,enumerable:!0,value:Tt},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Layers$1,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(lt){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(lt),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(lt){return this.quaternion.premultiply(lt),this}setRotationFromAxisAngle(lt,dt){this.quaternion.setFromAxisAngle(lt,dt)}setRotationFromEuler(lt){this.quaternion.setFromEuler(lt,!0)}setRotationFromMatrix(lt){this.quaternion.setFromRotationMatrix(lt)}setRotationFromQuaternion(lt){this.quaternion.copy(lt)}rotateOnAxis(lt,dt){return _q1.setFromAxisAngle(lt,dt),this.quaternion.multiply(_q1),this}rotateOnWorldAxis(lt,dt){return _q1.setFromAxisAngle(lt,dt),this.quaternion.premultiply(_q1),this}rotateX(lt){return this.rotateOnAxis(_xAxis,lt)}rotateY(lt){return this.rotateOnAxis(_yAxis,lt)}rotateZ(lt){return this.rotateOnAxis(_zAxis,lt)}translateOnAxis(lt,dt){return _v1$4.copy(lt).applyQuaternion(this.quaternion),this.position.add(_v1$4.multiplyScalar(dt)),this}translateX(lt){return this.translateOnAxis(_xAxis,lt)}translateY(lt){return this.translateOnAxis(_yAxis,lt)}translateZ(lt){return this.translateOnAxis(_zAxis,lt)}localToWorld(lt){return this.updateWorldMatrix(!0,!1),lt.applyMatrix4(this.matrixWorld)}worldToLocal(lt){return this.updateWorldMatrix(!0,!1),lt.applyMatrix4(_m1$1.copy(this.matrixWorld).invert())}lookAt(lt,dt,vt){lt.isVector3?_target.copy(lt):_target.set(lt,dt,vt);const Tt=this.parent;this.updateWorldMatrix(!0,!1),_position$3.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1.lookAt(_position$3,_target,this.up):_m1$1.lookAt(_target,_position$3,this.up),this.quaternion.setFromRotationMatrix(_m1$1),Tt&&(_m1$1.extractRotation(Tt.matrixWorld),_q1.setFromRotationMatrix(_m1$1),this.quaternion.premultiply(_q1.invert()))}add(lt){if(arguments.length>1){for(let dt=0;dt<arguments.length;dt++)this.add(arguments[dt]);return this}return lt===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",lt),this):(lt&&lt.isObject3D?(lt.parent!==null&&lt.parent.remove(lt),lt.parent=this,this.children.push(lt),lt.dispatchEvent(_addedEvent)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",lt),this)}remove(lt){if(arguments.length>1){for(let vt=0;vt<arguments.length;vt++)this.remove(arguments[vt]);return this}const dt=this.children.indexOf(lt);return dt!==-1&&(lt.parent=null,this.children.splice(dt,1),lt.dispatchEvent(_removedEvent)),this}removeFromParent(){const lt=this.parent;return lt!==null&&lt.remove(this),this}clear(){for(let lt=0;lt<this.children.length;lt++){const dt=this.children[lt];dt.parent=null,dt.dispatchEvent(_removedEvent)}return this.children.length=0,this}attach(lt){return this.updateWorldMatrix(!0,!1),_m1$1.copy(this.matrixWorld).invert(),lt.parent!==null&&(lt.parent.updateWorldMatrix(!0,!1),_m1$1.multiply(lt.parent.matrixWorld)),lt.applyMatrix4(_m1$1),this.add(lt),lt.updateWorldMatrix(!1,!0),this}getObjectById(lt){return this.getObjectByProperty("id",lt)}getObjectByName(lt){return this.getObjectByProperty("name",lt)}getObjectByProperty(lt,dt){if(this[lt]===dt)return this;for(let vt=0,Tt=this.children.length;vt<Tt;vt++){const Ct=this.children[vt].getObjectByProperty(lt,dt);if(Ct!==void 0)return Ct}}getObjectsByProperty(lt,dt){let vt=[];this[lt]===dt&&vt.push(this);for(let Tt=0,Et=this.children.length;Tt<Et;Tt++){const Ct=this.children[Tt].getObjectsByProperty(lt,dt);Ct.length>0&&(vt=vt.concat(Ct))}return vt}getWorldPosition(lt){return this.updateWorldMatrix(!0,!1),lt.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(lt){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,lt,_scale$2),lt}getWorldScale(lt){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,_quaternion$2,lt),lt}getWorldDirection(lt){this.updateWorldMatrix(!0,!1);const dt=this.matrixWorld.elements;return lt.set(dt[8],dt[9],dt[10]).normalize()}raycast(){}traverse(lt){lt(this);const dt=this.children;for(let vt=0,Tt=dt.length;vt<Tt;vt++)dt[vt].traverse(lt)}traverseVisible(lt){if(this.visible===!1)return;lt(this);const dt=this.children;for(let vt=0,Tt=dt.length;vt<Tt;vt++)dt[vt].traverseVisible(lt)}traverseAncestors(lt){const dt=this.parent;dt!==null&&(lt(dt),dt.traverseAncestors(lt))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(lt){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||lt)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,lt=!0);const dt=this.children;for(let vt=0,Tt=dt.length;vt<Tt;vt++){const Et=dt[vt];(Et.matrixWorldAutoUpdate===!0||lt===!0)&&Et.updateMatrixWorld(lt)}}updateWorldMatrix(lt,dt){const vt=this.parent;if(lt===!0&&vt!==null&&vt.matrixWorldAutoUpdate===!0&&vt.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),dt===!0){const Tt=this.children;for(let Et=0,Ct=Tt.length;Et<Ct;Et++){const Rt=Tt[Et];Rt.matrixWorldAutoUpdate===!0&&Rt.updateWorldMatrix(!1,!0)}}}toJSON(lt){const dt=lt===void 0||typeof lt=="string",vt={};dt&&(lt={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},vt.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const Tt={};Tt.uuid=this.uuid,Tt.type=this.type,this.name!==""&&(Tt.name=this.name),this.castShadow===!0&&(Tt.castShadow=!0),this.receiveShadow===!0&&(Tt.receiveShadow=!0),this.visible===!1&&(Tt.visible=!1),this.frustumCulled===!1&&(Tt.frustumCulled=!1),this.renderOrder!==0&&(Tt.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(Tt.userData=this.userData),Tt.layers=this.layers.mask,Tt.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(Tt.matrixAutoUpdate=!1),this.isInstancedMesh&&(Tt.type="InstancedMesh",Tt.count=this.count,Tt.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(Tt.instanceColor=this.instanceColor.toJSON()));function Et(Rt,kt){return Rt[kt.uuid]===void 0&&(Rt[kt.uuid]=kt.toJSON(lt)),kt.uuid}if(this.isScene)this.background&&(this.background.isColor?Tt.background=this.background.toJSON():this.background.isTexture&&(Tt.background=this.background.toJSON(lt).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(Tt.environment=this.environment.toJSON(lt).uuid);else if(this.isMesh||this.isLine||this.isPoints){Tt.geometry=Et(lt.geometries,this.geometry);const Rt=this.geometry.parameters;if(Rt!==void 0&&Rt.shapes!==void 0){const kt=Rt.shapes;if(Array.isArray(kt))for(let Dt=0,Bt=kt.length;Dt<Bt;Dt++){const Ft=kt[Dt];Et(lt.shapes,Ft)}else Et(lt.shapes,kt)}}if(this.isSkinnedMesh&&(Tt.bindMode=this.bindMode,Tt.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(Et(lt.skeletons,this.skeleton),Tt.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const Rt=[];for(let kt=0,Dt=this.material.length;kt<Dt;kt++)Rt.push(Et(lt.materials,this.material[kt]));Tt.material=Rt}else Tt.material=Et(lt.materials,this.material);if(this.children.length>0){Tt.children=[];for(let Rt=0;Rt<this.children.length;Rt++)Tt.children.push(this.children[Rt].toJSON(lt).object)}if(this.animations.length>0){Tt.animations=[];for(let Rt=0;Rt<this.animations.length;Rt++){const kt=this.animations[Rt];Tt.animations.push(Et(lt.animations,kt))}}if(dt){const Rt=Ct(lt.geometries),kt=Ct(lt.materials),Dt=Ct(lt.textures),Bt=Ct(lt.images),Ft=Ct(lt.shapes),Ut=Ct(lt.skeletons),Zt=Ct(lt.animations),Kt=Ct(lt.nodes);Rt.length>0&&(vt.geometries=Rt),kt.length>0&&(vt.materials=kt),Dt.length>0&&(vt.textures=Dt),Bt.length>0&&(vt.images=Bt),Ft.length>0&&(vt.shapes=Ft),Ut.length>0&&(vt.skeletons=Ut),Zt.length>0&&(vt.animations=Zt),Kt.length>0&&(vt.nodes=Kt)}return vt.object=Tt,vt;function Ct(Rt){const kt=[];for(const Dt in Rt){const Bt=Rt[Dt];delete Bt.metadata,kt.push(Bt)}return kt}}clone(lt){return new this.constructor().copy(this,lt)}copy(lt,dt=!0){if(this.name=lt.name,this.up.copy(lt.up),this.position.copy(lt.position),this.rotation.order=lt.rotation.order,this.quaternion.copy(lt.quaternion),this.scale.copy(lt.scale),this.matrix.copy(lt.matrix),this.matrixWorld.copy(lt.matrixWorld),this.matrixAutoUpdate=lt.matrixAutoUpdate,this.matrixWorldNeedsUpdate=lt.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=lt.matrixWorldAutoUpdate,this.layers.mask=lt.layers.mask,this.visible=lt.visible,this.castShadow=lt.castShadow,this.receiveShadow=lt.receiveShadow,this.frustumCulled=lt.frustumCulled,this.renderOrder=lt.renderOrder,this.userData=JSON.parse(JSON.stringify(lt.userData)),dt===!0)for(let vt=0;vt<lt.children.length;vt++){const Tt=lt.children[vt];this.add(Tt.clone())}return this}}Object3D.DEFAULT_UP=new Vector3(0,1,0);Object3D.DEFAULT_MATRIX_AUTO_UPDATE=!0;Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const _v0$1=new Vector3,_v1$3=new Vector3,_v2$2=new Vector3,_v3$1=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3;class Triangle{constructor(lt=new Vector3,dt=new Vector3,vt=new Vector3){this.a=lt,this.b=dt,this.c=vt}static getNormal(lt,dt,vt,Tt){Tt.subVectors(vt,dt),_v0$1.subVectors(lt,dt),Tt.cross(_v0$1);const Et=Tt.lengthSq();return Et>0?Tt.multiplyScalar(1/Math.sqrt(Et)):Tt.set(0,0,0)}static getBarycoord(lt,dt,vt,Tt,Et){_v0$1.subVectors(Tt,dt),_v1$3.subVectors(vt,dt),_v2$2.subVectors(lt,dt);const Ct=_v0$1.dot(_v0$1),Rt=_v0$1.dot(_v1$3),kt=_v0$1.dot(_v2$2),Dt=_v1$3.dot(_v1$3),Bt=_v1$3.dot(_v2$2),Ft=Ct*Dt-Rt*Rt;if(Ft===0)return Et.set(-2,-1,-1);const Ut=1/Ft,Zt=(Dt*kt-Rt*Bt)*Ut,Kt=(Ct*Bt-Rt*kt)*Ut;return Et.set(1-Zt-Kt,Kt,Zt)}static containsPoint(lt,dt,vt,Tt){return this.getBarycoord(lt,dt,vt,Tt,_v3$1),_v3$1.x>=0&&_v3$1.y>=0&&_v3$1.x+_v3$1.y<=1}static getUV(lt,dt,vt,Tt,Et,Ct,Rt,kt){return this.getBarycoord(lt,dt,vt,Tt,_v3$1),kt.set(0,0),kt.addScaledVector(Et,_v3$1.x),kt.addScaledVector(Ct,_v3$1.y),kt.addScaledVector(Rt,_v3$1.z),kt}static isFrontFacing(lt,dt,vt,Tt){return _v0$1.subVectors(vt,dt),_v1$3.subVectors(lt,dt),_v0$1.cross(_v1$3).dot(Tt)<0}set(lt,dt,vt){return this.a.copy(lt),this.b.copy(dt),this.c.copy(vt),this}setFromPointsAndIndices(lt,dt,vt,Tt){return this.a.copy(lt[dt]),this.b.copy(lt[vt]),this.c.copy(lt[Tt]),this}setFromAttributeAndIndices(lt,dt,vt,Tt){return this.a.fromBufferAttribute(lt,dt),this.b.fromBufferAttribute(lt,vt),this.c.fromBufferAttribute(lt,Tt),this}clone(){return new this.constructor().copy(this)}copy(lt){return this.a.copy(lt.a),this.b.copy(lt.b),this.c.copy(lt.c),this}getArea(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$1.cross(_v1$3).length()*.5}getMidpoint(lt){return lt.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(lt){return Triangle.getNormal(this.a,this.b,this.c,lt)}getPlane(lt){return lt.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(lt,dt){return Triangle.getBarycoord(lt,this.a,this.b,this.c,dt)}getUV(lt,dt,vt,Tt,Et){return Triangle.getUV(lt,this.a,this.b,this.c,dt,vt,Tt,Et)}containsPoint(lt){return Triangle.containsPoint(lt,this.a,this.b,this.c)}isFrontFacing(lt){return Triangle.isFrontFacing(this.a,this.b,this.c,lt)}intersectsBox(lt){return lt.intersectsTriangle(this)}closestPointToPoint(lt,dt){const vt=this.a,Tt=this.b,Et=this.c;let Ct,Rt;_vab.subVectors(Tt,vt),_vac.subVectors(Et,vt),_vap.subVectors(lt,vt);const kt=_vab.dot(_vap),Dt=_vac.dot(_vap);if(kt<=0&&Dt<=0)return dt.copy(vt);_vbp.subVectors(lt,Tt);const Bt=_vab.dot(_vbp),Ft=_vac.dot(_vbp);if(Bt>=0&&Ft<=Bt)return dt.copy(Tt);const Ut=kt*Ft-Bt*Dt;if(Ut<=0&&kt>=0&&Bt<=0)return Ct=kt/(kt-Bt),dt.copy(vt).addScaledVector(_vab,Ct);_vcp.subVectors(lt,Et);const Zt=_vab.dot(_vcp),Kt=_vac.dot(_vcp);if(Kt>=0&&Zt<=Kt)return dt.copy(Et);const ln=Zt*Dt-kt*Kt;if(ln<=0&&Dt>=0&&Kt<=0)return Rt=Dt/(Dt-Kt),dt.copy(vt).addScaledVector(_vac,Rt);const hn=Bt*Kt-Zt*Ft;if(hn<=0&&Ft-Bt>=0&&Zt-Kt>=0)return _vbc.subVectors(Et,Tt),Rt=(Ft-Bt)/(Ft-Bt+(Zt-Kt)),dt.copy(Tt).addScaledVector(_vbc,Rt);const dn=1/(hn+ln+Ut);return Ct=ln*dn,Rt=Ut*dn,dt.copy(vt).addScaledVector(_vab,Ct).addScaledVector(_vac,Rt)}equals(lt){return lt.a.equals(this.a)&&lt.b.equals(this.b)&&lt.c.equals(this.c)}}let materialId=0;class Material extends EventDispatcher{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:materialId++}),this.uuid=generateUUID(),this.name="",this.type="Material",this.blending=NormalBlending,this.side=FrontSide,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(lt){this._alphaTest>0!=lt>0&&this.version++,this._alphaTest=lt}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(lt){if(lt!==void 0)for(const dt in lt){const vt=lt[dt];if(vt===void 0){console.warn("THREE.Material: '"+dt+"' parameter is undefined.");continue}const Tt=this[dt];if(Tt===void 0){console.warn("THREE."+this.type+": '"+dt+"' is not a property of this material.");continue}Tt&&Tt.isColor?Tt.set(vt):Tt&&Tt.isVector3&&vt&&vt.isVector3?Tt.copy(vt):this[dt]=vt}}toJSON(lt){const dt=lt===void 0||typeof lt=="string";dt&&(lt={textures:{},images:{}});const vt={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};vt.uuid=this.uuid,vt.type=this.type,this.name!==""&&(vt.name=this.name),this.color&&this.color.isColor&&(vt.color=this.color.getHex()),this.roughness!==void 0&&(vt.roughness=this.roughness),this.metalness!==void 0&&(vt.metalness=this.metalness),this.sheen!==void 0&&(vt.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(vt.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(vt.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(vt.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(vt.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(vt.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(vt.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(vt.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(vt.shininess=this.shininess),this.clearcoat!==void 0&&(vt.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(vt.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(vt.clearcoatMap=this.clearcoatMap.toJSON(lt).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(vt.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(lt).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(vt.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(lt).uuid,vt.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(vt.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(vt.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(vt.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(vt.iridescenceMap=this.iridescenceMap.toJSON(lt).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(vt.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(lt).uuid),this.map&&this.map.isTexture&&(vt.map=this.map.toJSON(lt).uuid),this.matcap&&this.matcap.isTexture&&(vt.matcap=this.matcap.toJSON(lt).uuid),this.alphaMap&&this.alphaMap.isTexture&&(vt.alphaMap=this.alphaMap.toJSON(lt).uuid),this.lightMap&&this.lightMap.isTexture&&(vt.lightMap=this.lightMap.toJSON(lt).uuid,vt.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(vt.aoMap=this.aoMap.toJSON(lt).uuid,vt.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(vt.bumpMap=this.bumpMap.toJSON(lt).uuid,vt.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(vt.normalMap=this.normalMap.toJSON(lt).uuid,vt.normalMapType=this.normalMapType,vt.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(vt.displacementMap=this.displacementMap.toJSON(lt).uuid,vt.displacementScale=this.displacementScale,vt.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(vt.roughnessMap=this.roughnessMap.toJSON(lt).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(vt.metalnessMap=this.metalnessMap.toJSON(lt).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(vt.emissiveMap=this.emissiveMap.toJSON(lt).uuid),this.specularMap&&this.specularMap.isTexture&&(vt.specularMap=this.specularMap.toJSON(lt).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(vt.specularIntensityMap=this.specularIntensityMap.toJSON(lt).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(vt.specularColorMap=this.specularColorMap.toJSON(lt).uuid),this.envMap&&this.envMap.isTexture&&(vt.envMap=this.envMap.toJSON(lt).uuid,this.combine!==void 0&&(vt.combine=this.combine)),this.envMapIntensity!==void 0&&(vt.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(vt.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(vt.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(vt.gradientMap=this.gradientMap.toJSON(lt).uuid),this.transmission!==void 0&&(vt.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(vt.transmissionMap=this.transmissionMap.toJSON(lt).uuid),this.thickness!==void 0&&(vt.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(vt.thicknessMap=this.thicknessMap.toJSON(lt).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(vt.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(vt.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(vt.size=this.size),this.shadowSide!==null&&(vt.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(vt.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(vt.blending=this.blending),this.side!==FrontSide&&(vt.side=this.side),this.vertexColors&&(vt.vertexColors=!0),this.opacity<1&&(vt.opacity=this.opacity),this.transparent===!0&&(vt.transparent=this.transparent),vt.depthFunc=this.depthFunc,vt.depthTest=this.depthTest,vt.depthWrite=this.depthWrite,vt.colorWrite=this.colorWrite,vt.stencilWrite=this.stencilWrite,vt.stencilWriteMask=this.stencilWriteMask,vt.stencilFunc=this.stencilFunc,vt.stencilRef=this.stencilRef,vt.stencilFuncMask=this.stencilFuncMask,vt.stencilFail=this.stencilFail,vt.stencilZFail=this.stencilZFail,vt.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(vt.rotation=this.rotation),this.polygonOffset===!0&&(vt.polygonOffset=!0),this.polygonOffsetFactor!==0&&(vt.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(vt.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(vt.linewidth=this.linewidth),this.dashSize!==void 0&&(vt.dashSize=this.dashSize),this.gapSize!==void 0&&(vt.gapSize=this.gapSize),this.scale!==void 0&&(vt.scale=this.scale),this.dithering===!0&&(vt.dithering=!0),this.alphaTest>0&&(vt.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(vt.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(vt.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(vt.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(vt.wireframe=this.wireframe),this.wireframeLinewidth>1&&(vt.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(vt.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(vt.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(vt.flatShading=this.flatShading),this.visible===!1&&(vt.visible=!1),this.toneMapped===!1&&(vt.toneMapped=!1),this.fog===!1&&(vt.fog=!1),Object.keys(this.userData).length>0&&(vt.userData=this.userData);function Tt(Et){const Ct=[];for(const Rt in Et){const kt=Et[Rt];delete kt.metadata,Ct.push(kt)}return Ct}if(dt){const Et=Tt(lt.textures),Ct=Tt(lt.images);Et.length>0&&(vt.textures=Et),Ct.length>0&&(vt.images=Ct)}return vt}clone(){return new this.constructor().copy(this)}copy(lt){this.name=lt.name,this.blending=lt.blending,this.side=lt.side,this.vertexColors=lt.vertexColors,this.opacity=lt.opacity,this.transparent=lt.transparent,this.blendSrc=lt.blendSrc,this.blendDst=lt.blendDst,this.blendEquation=lt.blendEquation,this.blendSrcAlpha=lt.blendSrcAlpha,this.blendDstAlpha=lt.blendDstAlpha,this.blendEquationAlpha=lt.blendEquationAlpha,this.depthFunc=lt.depthFunc,this.depthTest=lt.depthTest,this.depthWrite=lt.depthWrite,this.stencilWriteMask=lt.stencilWriteMask,this.stencilFunc=lt.stencilFunc,this.stencilRef=lt.stencilRef,this.stencilFuncMask=lt.stencilFuncMask,this.stencilFail=lt.stencilFail,this.stencilZFail=lt.stencilZFail,this.stencilZPass=lt.stencilZPass,this.stencilWrite=lt.stencilWrite;const dt=lt.clippingPlanes;let vt=null;if(dt!==null){const Tt=dt.length;vt=new Array(Tt);for(let Et=0;Et!==Tt;++Et)vt[Et]=dt[Et].clone()}return this.clippingPlanes=vt,this.clipIntersection=lt.clipIntersection,this.clipShadows=lt.clipShadows,this.shadowSide=lt.shadowSide,this.colorWrite=lt.colorWrite,this.precision=lt.precision,this.polygonOffset=lt.polygonOffset,this.polygonOffsetFactor=lt.polygonOffsetFactor,this.polygonOffsetUnits=lt.polygonOffsetUnits,this.dithering=lt.dithering,this.alphaTest=lt.alphaTest,this.alphaToCoverage=lt.alphaToCoverage,this.premultipliedAlpha=lt.premultipliedAlpha,this.forceSinglePass=lt.forceSinglePass,this.visible=lt.visible,this.toneMapped=lt.toneMapped,this.userData=JSON.parse(JSON.stringify(lt.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(lt){lt===!0&&this.version++}}const _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function hue2rgb(ft,lt,dt){return dt<0&&(dt+=1),dt>1&&(dt-=1),dt<1/6?ft+(lt-ft)*6*dt:dt<1/2?lt:dt<2/3?ft+(lt-ft)*6*(2/3-dt):ft}class Color{constructor(lt,dt,vt){return this.isColor=!0,this.r=1,this.g=1,this.b=1,dt===void 0&&vt===void 0?this.set(lt):this.setRGB(lt,dt,vt)}set(lt){return lt&&lt.isColor?this.copy(lt):typeof lt=="number"?this.setHex(lt):typeof lt=="string"&&this.setStyle(lt),this}setScalar(lt){return this.r=lt,this.g=lt,this.b=lt,this}setHex(lt,dt=SRGBColorSpace){return lt=Math.floor(lt),this.r=(lt>>16&255)/255,this.g=(lt>>8&255)/255,this.b=(lt&255)/255,ColorManagement.toWorkingColorSpace(this,dt),this}setRGB(lt,dt,vt,Tt=ColorManagement.workingColorSpace){return this.r=lt,this.g=dt,this.b=vt,ColorManagement.toWorkingColorSpace(this,Tt),this}setHSL(lt,dt,vt,Tt=ColorManagement.workingColorSpace){if(lt=euclideanModulo(lt,1),dt=clamp$1(dt,0,1),vt=clamp$1(vt,0,1),dt===0)this.r=this.g=this.b=vt;else{const Et=vt<=.5?vt*(1+dt):vt+dt-vt*dt,Ct=2*vt-Et;this.r=hue2rgb(Ct,Et,lt+1/3),this.g=hue2rgb(Ct,Et,lt),this.b=hue2rgb(Ct,Et,lt-1/3)}return ColorManagement.toWorkingColorSpace(this,Tt),this}setStyle(lt,dt=SRGBColorSpace){function vt(Et){Et!==void 0&&parseFloat(Et)<1&&console.warn("THREE.Color: Alpha component of "+lt+" will be ignored.")}let Tt;if(Tt=/^(\w+)\(([^\)]*)\)/.exec(lt)){let Et;const Ct=Tt[1],Rt=Tt[2];switch(Ct){case"rgb":case"rgba":if(Et=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(Rt))return this.r=Math.min(255,parseInt(Et[1],10))/255,this.g=Math.min(255,parseInt(Et[2],10))/255,this.b=Math.min(255,parseInt(Et[3],10))/255,ColorManagement.toWorkingColorSpace(this,dt),vt(Et[4]),this;if(Et=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(Rt))return this.r=Math.min(100,parseInt(Et[1],10))/100,this.g=Math.min(100,parseInt(Et[2],10))/100,this.b=Math.min(100,parseInt(Et[3],10))/100,ColorManagement.toWorkingColorSpace(this,dt),vt(Et[4]),this;break;case"hsl":case"hsla":if(Et=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(Rt)){const kt=parseFloat(Et[1])/360,Dt=parseFloat(Et[2])/100,Bt=parseFloat(Et[3])/100;return vt(Et[4]),this.setHSL(kt,Dt,Bt,dt)}break;default:console.warn("THREE.Color: Unknown color model "+lt)}}else if(Tt=/^\#([A-Fa-f\d]+)$/.exec(lt)){const Et=Tt[1],Ct=Et.length;if(Ct===3)return this.r=parseInt(Et.charAt(0)+Et.charAt(0),16)/255,this.g=parseInt(Et.charAt(1)+Et.charAt(1),16)/255,this.b=parseInt(Et.charAt(2)+Et.charAt(2),16)/255,ColorManagement.toWorkingColorSpace(this,dt),this;if(Ct===6)return this.r=parseInt(Et.charAt(0)+Et.charAt(1),16)/255,this.g=parseInt(Et.charAt(2)+Et.charAt(3),16)/255,this.b=parseInt(Et.charAt(4)+Et.charAt(5),16)/255,ColorManagement.toWorkingColorSpace(this,dt),this;console.warn("THREE.Color: Invalid hex color "+lt)}else if(lt&&lt.length>0)return this.setColorName(lt,dt);return this}setColorName(lt,dt=SRGBColorSpace){const vt=_colorKeywords[lt.toLowerCase()];return vt!==void 0?this.setHex(vt,dt):console.warn("THREE.Color: Unknown color "+lt),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(lt){return this.r=lt.r,this.g=lt.g,this.b=lt.b,this}copySRGBToLinear(lt){return this.r=SRGBToLinear(lt.r),this.g=SRGBToLinear(lt.g),this.b=SRGBToLinear(lt.b),this}copyLinearToSRGB(lt){return this.r=LinearToSRGB(lt.r),this.g=LinearToSRGB(lt.g),this.b=LinearToSRGB(lt.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(lt=SRGBColorSpace){return ColorManagement.fromWorkingColorSpace(_color.copy(this),lt),clamp$1(_color.r*255,0,255)<<16^clamp$1(_color.g*255,0,255)<<8^clamp$1(_color.b*255,0,255)<<0}getHexString(lt=SRGBColorSpace){return("000000"+this.getHex(lt).toString(16)).slice(-6)}getHSL(lt,dt=ColorManagement.workingColorSpace){ColorManagement.fromWorkingColorSpace(_color.copy(this),dt);const vt=_color.r,Tt=_color.g,Et=_color.b,Ct=Math.max(vt,Tt,Et),Rt=Math.min(vt,Tt,Et);let kt,Dt;const Bt=(Rt+Ct)/2;if(Rt===Ct)kt=0,Dt=0;else{const Ft=Ct-Rt;switch(Dt=Bt<=.5?Ft/(Ct+Rt):Ft/(2-Ct-Rt),Ct){case vt:kt=(Tt-Et)/Ft+(Tt<Et?6:0);break;case Tt:kt=(Et-vt)/Ft+2;break;case Et:kt=(vt-Tt)/Ft+4;break}kt/=6}return lt.h=kt,lt.s=Dt,lt.l=Bt,lt}getRGB(lt,dt=ColorManagement.workingColorSpace){return ColorManagement.fromWorkingColorSpace(_color.copy(this),dt),lt.r=_color.r,lt.g=_color.g,lt.b=_color.b,lt}getStyle(lt=SRGBColorSpace){ColorManagement.fromWorkingColorSpace(_color.copy(this),lt);const dt=_color.r,vt=_color.g,Tt=_color.b;return lt!==SRGBColorSpace?`color(${lt} ${dt.toFixed(3)} ${vt.toFixed(3)} ${Tt.toFixed(3)})`:`rgb(${dt*255|0},${vt*255|0},${Tt*255|0})`}offsetHSL(lt,dt,vt){return this.getHSL(_hslA),_hslA.h+=lt,_hslA.s+=dt,_hslA.l+=vt,this.setHSL(_hslA.h,_hslA.s,_hslA.l),this}add(lt){return this.r+=lt.r,this.g+=lt.g,this.b+=lt.b,this}addColors(lt,dt){return this.r=lt.r+dt.r,this.g=lt.g+dt.g,this.b=lt.b+dt.b,this}addScalar(lt){return this.r+=lt,this.g+=lt,this.b+=lt,this}sub(lt){return this.r=Math.max(0,this.r-lt.r),this.g=Math.max(0,this.g-lt.g),this.b=Math.max(0,this.b-lt.b),this}multiply(lt){return this.r*=lt.r,this.g*=lt.g,this.b*=lt.b,this}multiplyScalar(lt){return this.r*=lt,this.g*=lt,this.b*=lt,this}lerp(lt,dt){return this.r+=(lt.r-this.r)*dt,this.g+=(lt.g-this.g)*dt,this.b+=(lt.b-this.b)*dt,this}lerpColors(lt,dt,vt){return this.r=lt.r+(dt.r-lt.r)*vt,this.g=lt.g+(dt.g-lt.g)*vt,this.b=lt.b+(dt.b-lt.b)*vt,this}lerpHSL(lt,dt){this.getHSL(_hslA),lt.getHSL(_hslB);const vt=lerp(_hslA.h,_hslB.h,dt),Tt=lerp(_hslA.s,_hslB.s,dt),Et=lerp(_hslA.l,_hslB.l,dt);return this.setHSL(vt,Tt,Et),this}equals(lt){return lt.r===this.r&&lt.g===this.g&&lt.b===this.b}fromArray(lt,dt=0){return this.r=lt[dt],this.g=lt[dt+1],this.b=lt[dt+2],this}toArray(lt=[],dt=0){return lt[dt]=this.r,lt[dt+1]=this.g,lt[dt+2]=this.b,lt}fromBufferAttribute(lt,dt){return this.r=lt.getX(dt),this.g=lt.getY(dt),this.b=lt.getZ(dt),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const _color=new Color;Color.NAMES=_colorKeywords;class MeshBasicMaterial extends Material{constructor(lt){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(lt)}copy(lt){return super.copy(lt),this.color.copy(lt.color),this.map=lt.map,this.lightMap=lt.lightMap,this.lightMapIntensity=lt.lightMapIntensity,this.aoMap=lt.aoMap,this.aoMapIntensity=lt.aoMapIntensity,this.specularMap=lt.specularMap,this.alphaMap=lt.alphaMap,this.envMap=lt.envMap,this.combine=lt.combine,this.reflectivity=lt.reflectivity,this.refractionRatio=lt.refractionRatio,this.wireframe=lt.wireframe,this.wireframeLinewidth=lt.wireframeLinewidth,this.wireframeLinecap=lt.wireframeLinecap,this.wireframeLinejoin=lt.wireframeLinejoin,this.fog=lt.fog,this}}const _vector$9=new Vector3,_vector2$1=new Vector2;class BufferAttribute{constructor(lt,dt,vt=!1){if(Array.isArray(lt))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=lt,this.itemSize=dt,this.count=lt!==void 0?lt.length/dt:0,this.normalized=vt,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(lt){lt===!0&&this.version++}setUsage(lt){return this.usage=lt,this}copy(lt){return this.name=lt.name,this.array=new lt.array.constructor(lt.array),this.itemSize=lt.itemSize,this.count=lt.count,this.normalized=lt.normalized,this.usage=lt.usage,this}copyAt(lt,dt,vt){lt*=this.itemSize,vt*=dt.itemSize;for(let Tt=0,Et=this.itemSize;Tt<Et;Tt++)this.array[lt+Tt]=dt.array[vt+Tt];return this}copyArray(lt){return this.array.set(lt),this}applyMatrix3(lt){if(this.itemSize===2)for(let dt=0,vt=this.count;dt<vt;dt++)_vector2$1.fromBufferAttribute(this,dt),_vector2$1.applyMatrix3(lt),this.setXY(dt,_vector2$1.x,_vector2$1.y);else if(this.itemSize===3)for(let dt=0,vt=this.count;dt<vt;dt++)_vector$9.fromBufferAttribute(this,dt),_vector$9.applyMatrix3(lt),this.setXYZ(dt,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyMatrix4(lt){for(let dt=0,vt=this.count;dt<vt;dt++)_vector$9.fromBufferAttribute(this,dt),_vector$9.applyMatrix4(lt),this.setXYZ(dt,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyNormalMatrix(lt){for(let dt=0,vt=this.count;dt<vt;dt++)_vector$9.fromBufferAttribute(this,dt),_vector$9.applyNormalMatrix(lt),this.setXYZ(dt,_vector$9.x,_vector$9.y,_vector$9.z);return this}transformDirection(lt){for(let dt=0,vt=this.count;dt<vt;dt++)_vector$9.fromBufferAttribute(this,dt),_vector$9.transformDirection(lt),this.setXYZ(dt,_vector$9.x,_vector$9.y,_vector$9.z);return this}set(lt,dt=0){return this.array.set(lt,dt),this}getX(lt){let dt=this.array[lt*this.itemSize];return this.normalized&&(dt=denormalize(dt,this.array)),dt}setX(lt,dt){return this.normalized&&(dt=normalize(dt,this.array)),this.array[lt*this.itemSize]=dt,this}getY(lt){let dt=this.array[lt*this.itemSize+1];return this.normalized&&(dt=denormalize(dt,this.array)),dt}setY(lt,dt){return this.normalized&&(dt=normalize(dt,this.array)),this.array[lt*this.itemSize+1]=dt,this}getZ(lt){let dt=this.array[lt*this.itemSize+2];return this.normalized&&(dt=denormalize(dt,this.array)),dt}setZ(lt,dt){return this.normalized&&(dt=normalize(dt,this.array)),this.array[lt*this.itemSize+2]=dt,this}getW(lt){let dt=this.array[lt*this.itemSize+3];return this.normalized&&(dt=denormalize(dt,this.array)),dt}setW(lt,dt){return this.normalized&&(dt=normalize(dt,this.array)),this.array[lt*this.itemSize+3]=dt,this}setXY(lt,dt,vt){return lt*=this.itemSize,this.normalized&&(dt=normalize(dt,this.array),vt=normalize(vt,this.array)),this.array[lt+0]=dt,this.array[lt+1]=vt,this}setXYZ(lt,dt,vt,Tt){return lt*=this.itemSize,this.normalized&&(dt=normalize(dt,this.array),vt=normalize(vt,this.array),Tt=normalize(Tt,this.array)),this.array[lt+0]=dt,this.array[lt+1]=vt,this.array[lt+2]=Tt,this}setXYZW(lt,dt,vt,Tt,Et){return lt*=this.itemSize,this.normalized&&(dt=normalize(dt,this.array),vt=normalize(vt,this.array),Tt=normalize(Tt,this.array),Et=normalize(Et,this.array)),this.array[lt+0]=dt,this.array[lt+1]=vt,this.array[lt+2]=Tt,this.array[lt+3]=Et,this}onUpload(lt){return this.onUploadCallback=lt,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const lt={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(lt.name=this.name),this.usage!==StaticDrawUsage&&(lt.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(lt.updateRange=this.updateRange),lt}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Int8BufferAttribute extends BufferAttribute{constructor(lt,dt,vt){super(new Int8Array(lt),dt,vt)}}class Uint8BufferAttribute extends BufferAttribute{constructor(lt,dt,vt){super(new Uint8Array(lt),dt,vt)}}class Uint8ClampedBufferAttribute extends BufferAttribute{constructor(lt,dt,vt){super(new Uint8ClampedArray(lt),dt,vt)}}class Int16BufferAttribute extends BufferAttribute{constructor(lt,dt,vt){super(new Int16Array(lt),dt,vt)}}class Uint16BufferAttribute extends BufferAttribute{constructor(lt,dt,vt){super(new Uint16Array(lt),dt,vt)}}class Int32BufferAttribute extends BufferAttribute{constructor(lt,dt,vt){super(new Int32Array(lt),dt,vt)}}class Uint32BufferAttribute extends BufferAttribute{constructor(lt,dt,vt){super(new Uint32Array(lt),dt,vt)}}class Float16BufferAttribute extends BufferAttribute{constructor(lt,dt,vt){super(new Uint16Array(lt),dt,vt),this.isFloat16BufferAttribute=!0}}class Float32BufferAttribute extends BufferAttribute{constructor(lt,dt,vt){super(new Float32Array(lt),dt,vt)}}class Float64BufferAttribute extends BufferAttribute{constructor(lt,dt,vt){super(new Float64Array(lt),dt,vt)}}let _id$1=0;const _m1=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$1$1=new Box3,_boxMorphTargets=new Box3,_vector$8=new Vector3;class BufferGeometry extends EventDispatcher{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_id$1++}),this.uuid=generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(lt){return Array.isArray(lt)?this.index=new(arrayNeedsUint32(lt)?Uint32BufferAttribute:Uint16BufferAttribute)(lt,1):this.index=lt,this}getAttribute(lt){return this.attributes[lt]}setAttribute(lt,dt){return this.attributes[lt]=dt,this}deleteAttribute(lt){return delete this.attributes[lt],this}hasAttribute(lt){return this.attributes[lt]!==void 0}addGroup(lt,dt,vt=0){this.groups.push({start:lt,count:dt,materialIndex:vt})}clearGroups(){this.groups=[]}setDrawRange(lt,dt){this.drawRange.start=lt,this.drawRange.count=dt}applyMatrix4(lt){const dt=this.attributes.position;dt!==void 0&&(dt.applyMatrix4(lt),dt.needsUpdate=!0);const vt=this.attributes.normal;if(vt!==void 0){const Et=new Matrix3().getNormalMatrix(lt);vt.applyNormalMatrix(Et),vt.needsUpdate=!0}const Tt=this.attributes.tangent;return Tt!==void 0&&(Tt.transformDirection(lt),Tt.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(lt){return _m1.makeRotationFromQuaternion(lt),this.applyMatrix4(_m1),this}rotateX(lt){return _m1.makeRotationX(lt),this.applyMatrix4(_m1),this}rotateY(lt){return _m1.makeRotationY(lt),this.applyMatrix4(_m1),this}rotateZ(lt){return _m1.makeRotationZ(lt),this.applyMatrix4(_m1),this}translate(lt,dt,vt){return _m1.makeTranslation(lt,dt,vt),this.applyMatrix4(_m1),this}scale(lt,dt,vt){return _m1.makeScale(lt,dt,vt),this.applyMatrix4(_m1),this}lookAt(lt){return _obj.lookAt(lt),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this}setFromPoints(lt){const dt=[];for(let vt=0,Tt=lt.length;vt<Tt;vt++){const Et=lt[vt];dt.push(Et.x,Et.y,Et.z||0)}return this.setAttribute("position",new Float32BufferAttribute(dt,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const lt=this.attributes.position,dt=this.morphAttributes.position;if(lt&&lt.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Vector3(-1/0,-1/0,-1/0),new Vector3(1/0,1/0,1/0));return}if(lt!==void 0){if(this.boundingBox.setFromBufferAttribute(lt),dt)for(let vt=0,Tt=dt.length;vt<Tt;vt++){const Et=dt[vt];_box$1$1.setFromBufferAttribute(Et),this.morphTargetsRelative?(_vector$8.addVectors(this.boundingBox.min,_box$1$1.min),this.boundingBox.expandByPoint(_vector$8),_vector$8.addVectors(this.boundingBox.max,_box$1$1.max),this.boundingBox.expandByPoint(_vector$8)):(this.boundingBox.expandByPoint(_box$1$1.min),this.boundingBox.expandByPoint(_box$1$1.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere$1);const lt=this.attributes.position,dt=this.morphAttributes.position;if(lt&&lt.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Vector3,1/0);return}if(lt){const vt=this.boundingSphere.center;if(_box$1$1.setFromBufferAttribute(lt),dt)for(let Et=0,Ct=dt.length;Et<Ct;Et++){const Rt=dt[Et];_boxMorphTargets.setFromBufferAttribute(Rt),this.morphTargetsRelative?(_vector$8.addVectors(_box$1$1.min,_boxMorphTargets.min),_box$1$1.expandByPoint(_vector$8),_vector$8.addVectors(_box$1$1.max,_boxMorphTargets.max),_box$1$1.expandByPoint(_vector$8)):(_box$1$1.expandByPoint(_boxMorphTargets.min),_box$1$1.expandByPoint(_boxMorphTargets.max))}_box$1$1.getCenter(vt);let Tt=0;for(let Et=0,Ct=lt.count;Et<Ct;Et++)_vector$8.fromBufferAttribute(lt,Et),Tt=Math.max(Tt,vt.distanceToSquared(_vector$8));if(dt)for(let Et=0,Ct=dt.length;Et<Ct;Et++){const Rt=dt[Et],kt=this.morphTargetsRelative;for(let Dt=0,Bt=Rt.count;Dt<Bt;Dt++)_vector$8.fromBufferAttribute(Rt,Dt),kt&&(_offset.fromBufferAttribute(lt,Dt),_vector$8.add(_offset)),Tt=Math.max(Tt,vt.distanceToSquared(_vector$8))}this.boundingSphere.radius=Math.sqrt(Tt),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const lt=this.index,dt=this.attributes;if(lt===null||dt.position===void 0||dt.normal===void 0||dt.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const vt=lt.array,Tt=dt.position.array,Et=dt.normal.array,Ct=dt.uv.array,Rt=Tt.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*Rt),4));const kt=this.getAttribute("tangent").array,Dt=[],Bt=[];for(let Rn=0;Rn<Rt;Rn++)Dt[Rn]=new Vector3,Bt[Rn]=new Vector3;const Ft=new Vector3,Ut=new Vector3,Zt=new Vector3,Kt=new Vector2,ln=new Vector2,hn=new Vector2,dn=new Vector3,pn=new Vector3;function mn(Rn,Dn,Bn){Ft.fromArray(Tt,Rn*3),Ut.fromArray(Tt,Dn*3),Zt.fromArray(Tt,Bn*3),Kt.fromArray(Ct,Rn*2),ln.fromArray(Ct,Dn*2),hn.fromArray(Ct,Bn*2),Ut.sub(Ft),Zt.sub(Ft),ln.sub(Kt),hn.sub(Kt);const Hn=1/(ln.x*hn.y-hn.x*ln.y);isFinite(Hn)&&(dn.copy(Ut).multiplyScalar(hn.y).addScaledVector(Zt,-ln.y).multiplyScalar(Hn),pn.copy(Zt).multiplyScalar(ln.x).addScaledVector(Ut,-hn.x).multiplyScalar(Hn),Dt[Rn].add(dn),Dt[Dn].add(dn),Dt[Bn].add(dn),Bt[Rn].add(pn),Bt[Dn].add(pn),Bt[Bn].add(pn))}let On=this.groups;On.length===0&&(On=[{start:0,count:vt.length}]);for(let Rn=0,Dn=On.length;Rn<Dn;++Rn){const Bn=On[Rn],Hn=Bn.start,jn=Bn.count;for(let Kn=Hn,zn=Hn+jn;Kn<zn;Kn+=3)mn(vt[Kn+0],vt[Kn+1],vt[Kn+2])}const bn=new Vector3,En=new Vector3,An=new Vector3,Tn=new Vector3;function In(Rn){An.fromArray(Et,Rn*3),Tn.copy(An);const Dn=Dt[Rn];bn.copy(Dn),bn.sub(An.multiplyScalar(An.dot(Dn))).normalize(),En.crossVectors(Tn,Dn);const Hn=En.dot(Bt[Rn])<0?-1:1;kt[Rn*4]=bn.x,kt[Rn*4+1]=bn.y,kt[Rn*4+2]=bn.z,kt[Rn*4+3]=Hn}for(let Rn=0,Dn=On.length;Rn<Dn;++Rn){const Bn=On[Rn],Hn=Bn.start,jn=Bn.count;for(let Kn=Hn,zn=Hn+jn;Kn<zn;Kn+=3)In(vt[Kn+0]),In(vt[Kn+1]),In(vt[Kn+2])}}computeVertexNormals(){const lt=this.index,dt=this.getAttribute("position");if(dt!==void 0){let vt=this.getAttribute("normal");if(vt===void 0)vt=new BufferAttribute(new Float32Array(dt.count*3),3),this.setAttribute("normal",vt);else for(let Ut=0,Zt=vt.count;Ut<Zt;Ut++)vt.setXYZ(Ut,0,0,0);const Tt=new Vector3,Et=new Vector3,Ct=new Vector3,Rt=new Vector3,kt=new Vector3,Dt=new Vector3,Bt=new Vector3,Ft=new Vector3;if(lt)for(let Ut=0,Zt=lt.count;Ut<Zt;Ut+=3){const Kt=lt.getX(Ut+0),ln=lt.getX(Ut+1),hn=lt.getX(Ut+2);Tt.fromBufferAttribute(dt,Kt),Et.fromBufferAttribute(dt,ln),Ct.fromBufferAttribute(dt,hn),Bt.subVectors(Ct,Et),Ft.subVectors(Tt,Et),Bt.cross(Ft),Rt.fromBufferAttribute(vt,Kt),kt.fromBufferAttribute(vt,ln),Dt.fromBufferAttribute(vt,hn),Rt.add(Bt),kt.add(Bt),Dt.add(Bt),vt.setXYZ(Kt,Rt.x,Rt.y,Rt.z),vt.setXYZ(ln,kt.x,kt.y,kt.z),vt.setXYZ(hn,Dt.x,Dt.y,Dt.z)}else for(let Ut=0,Zt=dt.count;Ut<Zt;Ut+=3)Tt.fromBufferAttribute(dt,Ut+0),Et.fromBufferAttribute(dt,Ut+1),Ct.fromBufferAttribute(dt,Ut+2),Bt.subVectors(Ct,Et),Ft.subVectors(Tt,Et),Bt.cross(Ft),vt.setXYZ(Ut+0,Bt.x,Bt.y,Bt.z),vt.setXYZ(Ut+1,Bt.x,Bt.y,Bt.z),vt.setXYZ(Ut+2,Bt.x,Bt.y,Bt.z);this.normalizeNormals(),vt.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const lt=this.attributes.normal;for(let dt=0,vt=lt.count;dt<vt;dt++)_vector$8.fromBufferAttribute(lt,dt),_vector$8.normalize(),lt.setXYZ(dt,_vector$8.x,_vector$8.y,_vector$8.z)}toNonIndexed(){function lt(Rt,kt){const Dt=Rt.array,Bt=Rt.itemSize,Ft=Rt.normalized,Ut=new Dt.constructor(kt.length*Bt);let Zt=0,Kt=0;for(let ln=0,hn=kt.length;ln<hn;ln++){Rt.isInterleavedBufferAttribute?Zt=kt[ln]*Rt.data.stride+Rt.offset:Zt=kt[ln]*Bt;for(let dn=0;dn<Bt;dn++)Ut[Kt++]=Dt[Zt++]}return new BufferAttribute(Ut,Bt,Ft)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const dt=new BufferGeometry,vt=this.index.array,Tt=this.attributes;for(const Rt in Tt){const kt=Tt[Rt],Dt=lt(kt,vt);dt.setAttribute(Rt,Dt)}const Et=this.morphAttributes;for(const Rt in Et){const kt=[],Dt=Et[Rt];for(let Bt=0,Ft=Dt.length;Bt<Ft;Bt++){const Ut=Dt[Bt],Zt=lt(Ut,vt);kt.push(Zt)}dt.morphAttributes[Rt]=kt}dt.morphTargetsRelative=this.morphTargetsRelative;const Ct=this.groups;for(let Rt=0,kt=Ct.length;Rt<kt;Rt++){const Dt=Ct[Rt];dt.addGroup(Dt.start,Dt.count,Dt.materialIndex)}return dt}toJSON(){const lt={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(lt.uuid=this.uuid,lt.type=this.type,this.name!==""&&(lt.name=this.name),Object.keys(this.userData).length>0&&(lt.userData=this.userData),this.parameters!==void 0){const kt=this.parameters;for(const Dt in kt)kt[Dt]!==void 0&&(lt[Dt]=kt[Dt]);return lt}lt.data={attributes:{}};const dt=this.index;dt!==null&&(lt.data.index={type:dt.array.constructor.name,array:Array.prototype.slice.call(dt.array)});const vt=this.attributes;for(const kt in vt){const Dt=vt[kt];lt.data.attributes[kt]=Dt.toJSON(lt.data)}const Tt={};let Et=!1;for(const kt in this.morphAttributes){const Dt=this.morphAttributes[kt],Bt=[];for(let Ft=0,Ut=Dt.length;Ft<Ut;Ft++){const Zt=Dt[Ft];Bt.push(Zt.toJSON(lt.data))}Bt.length>0&&(Tt[kt]=Bt,Et=!0)}Et&&(lt.data.morphAttributes=Tt,lt.data.morphTargetsRelative=this.morphTargetsRelative);const Ct=this.groups;Ct.length>0&&(lt.data.groups=JSON.parse(JSON.stringify(Ct)));const Rt=this.boundingSphere;return Rt!==null&&(lt.data.boundingSphere={center:Rt.center.toArray(),radius:Rt.radius}),lt}clone(){return new this.constructor().copy(this)}copy(lt){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const dt={};this.name=lt.name;const vt=lt.index;vt!==null&&this.setIndex(vt.clone(dt));const Tt=lt.attributes;for(const Dt in Tt){const Bt=Tt[Dt];this.setAttribute(Dt,Bt.clone(dt))}const Et=lt.morphAttributes;for(const Dt in Et){const Bt=[],Ft=Et[Dt];for(let Ut=0,Zt=Ft.length;Ut<Zt;Ut++)Bt.push(Ft[Ut].clone(dt));this.morphAttributes[Dt]=Bt}this.morphTargetsRelative=lt.morphTargetsRelative;const Ct=lt.groups;for(let Dt=0,Bt=Ct.length;Dt<Bt;Dt++){const Ft=Ct[Dt];this.addGroup(Ft.start,Ft.count,Ft.materialIndex)}const Rt=lt.boundingBox;Rt!==null&&(this.boundingBox=Rt.clone());const kt=lt.boundingSphere;return kt!==null&&(this.boundingSphere=kt.clone()),this.drawRange.start=lt.drawRange.start,this.drawRange.count=lt.drawRange.count,this.userData=lt.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const _inverseMatrix$2=new Matrix4,_ray$2=new Ray,_sphere$3=new Sphere$1,_sphereHitAt=new Vector3,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_tempA=new Vector3,_morphA=new Vector3,_uvA$1=new Vector2,_uvB$1=new Vector2,_uvC$1=new Vector2,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;class Mesh extends Object3D{constructor(lt=new BufferGeometry,dt=new MeshBasicMaterial){super(),this.isMesh=!0,this.type="Mesh",this.geometry=lt,this.material=dt,this.updateMorphTargets()}copy(lt,dt){return super.copy(lt,dt),lt.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=lt.morphTargetInfluences.slice()),lt.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},lt.morphTargetDictionary)),this.material=lt.material,this.geometry=lt.geometry,this}updateMorphTargets(){const dt=this.geometry.morphAttributes,vt=Object.keys(dt);if(vt.length>0){const Tt=dt[vt[0]];if(Tt!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let Et=0,Ct=Tt.length;Et<Ct;Et++){const Rt=Tt[Et].name||String(Et);this.morphTargetInfluences.push(0),this.morphTargetDictionary[Rt]=Et}}}}getVertexPosition(lt,dt){const vt=this.geometry,Tt=vt.attributes.position,Et=vt.morphAttributes.position,Ct=vt.morphTargetsRelative;dt.fromBufferAttribute(Tt,lt);const Rt=this.morphTargetInfluences;if(Et&&Rt){_morphA.set(0,0,0);for(let kt=0,Dt=Et.length;kt<Dt;kt++){const Bt=Rt[kt],Ft=Et[kt];Bt!==0&&(_tempA.fromBufferAttribute(Ft,lt),Ct?_morphA.addScaledVector(_tempA,Bt):_morphA.addScaledVector(_tempA.sub(dt),Bt))}dt.add(_morphA)}return this.isSkinnedMesh&&this.boneTransform(lt,dt),dt}raycast(lt,dt){const vt=this.geometry,Tt=this.material,Et=this.matrixWorld;if(Tt===void 0||(vt.boundingSphere===null&&vt.computeBoundingSphere(),_sphere$3.copy(vt.boundingSphere),_sphere$3.applyMatrix4(Et),_ray$2.copy(lt.ray).recast(lt.near),_sphere$3.containsPoint(_ray$2.origin)===!1&&(_ray$2.intersectSphere(_sphere$3,_sphereHitAt)===null||_ray$2.origin.distanceToSquared(_sphereHitAt)>(lt.far-lt.near)**2))||(_inverseMatrix$2.copy(Et).invert(),_ray$2.copy(lt.ray).applyMatrix4(_inverseMatrix$2),vt.boundingBox!==null&&_ray$2.intersectsBox(vt.boundingBox)===!1))return;let Ct;const Rt=vt.index,kt=vt.attributes.position,Dt=vt.attributes.uv,Bt=vt.attributes.uv2,Ft=vt.groups,Ut=vt.drawRange;if(Rt!==null)if(Array.isArray(Tt))for(let Zt=0,Kt=Ft.length;Zt<Kt;Zt++){const ln=Ft[Zt],hn=Tt[ln.materialIndex],dn=Math.max(ln.start,Ut.start),pn=Math.min(Rt.count,Math.min(ln.start+ln.count,Ut.start+Ut.count));for(let mn=dn,On=pn;mn<On;mn+=3){const bn=Rt.getX(mn),En=Rt.getX(mn+1),An=Rt.getX(mn+2);Ct=checkBufferGeometryIntersection(this,hn,lt,_ray$2,Dt,Bt,bn,En,An),Ct&&(Ct.faceIndex=Math.floor(mn/3),Ct.face.materialIndex=ln.materialIndex,dt.push(Ct))}}else{const Zt=Math.max(0,Ut.start),Kt=Math.min(Rt.count,Ut.start+Ut.count);for(let ln=Zt,hn=Kt;ln<hn;ln+=3){const dn=Rt.getX(ln),pn=Rt.getX(ln+1),mn=Rt.getX(ln+2);Ct=checkBufferGeometryIntersection(this,Tt,lt,_ray$2,Dt,Bt,dn,pn,mn),Ct&&(Ct.faceIndex=Math.floor(ln/3),dt.push(Ct))}}else if(kt!==void 0)if(Array.isArray(Tt))for(let Zt=0,Kt=Ft.length;Zt<Kt;Zt++){const ln=Ft[Zt],hn=Tt[ln.materialIndex],dn=Math.max(ln.start,Ut.start),pn=Math.min(kt.count,Math.min(ln.start+ln.count,Ut.start+Ut.count));for(let mn=dn,On=pn;mn<On;mn+=3){const bn=mn,En=mn+1,An=mn+2;Ct=checkBufferGeometryIntersection(this,hn,lt,_ray$2,Dt,Bt,bn,En,An),Ct&&(Ct.faceIndex=Math.floor(mn/3),Ct.face.materialIndex=ln.materialIndex,dt.push(Ct))}}else{const Zt=Math.max(0,Ut.start),Kt=Math.min(kt.count,Ut.start+Ut.count);for(let ln=Zt,hn=Kt;ln<hn;ln+=3){const dn=ln,pn=ln+1,mn=ln+2;Ct=checkBufferGeometryIntersection(this,Tt,lt,_ray$2,Dt,Bt,dn,pn,mn),Ct&&(Ct.faceIndex=Math.floor(ln/3),dt.push(Ct))}}}}function checkIntersection(ft,lt,dt,vt,Tt,Et,Ct,Rt){let kt;if(lt.side===BackSide?kt=vt.intersectTriangle(Ct,Et,Tt,!0,Rt):kt=vt.intersectTriangle(Tt,Et,Ct,lt.side===FrontSide,Rt),kt===null)return null;_intersectionPointWorld.copy(Rt),_intersectionPointWorld.applyMatrix4(ft.matrixWorld);const Dt=dt.ray.origin.distanceTo(_intersectionPointWorld);return Dt<dt.near||Dt>dt.far?null:{distance:Dt,point:_intersectionPointWorld.clone(),object:ft}}function checkBufferGeometryIntersection(ft,lt,dt,vt,Tt,Et,Ct,Rt,kt){ft.getVertexPosition(Ct,_vA$1),ft.getVertexPosition(Rt,_vB$1),ft.getVertexPosition(kt,_vC$1);const Dt=checkIntersection(ft,lt,dt,vt,_vA$1,_vB$1,_vC$1,_intersectionPoint);if(Dt){Tt&&(_uvA$1.fromBufferAttribute(Tt,Ct),_uvB$1.fromBufferAttribute(Tt,Rt),_uvC$1.fromBufferAttribute(Tt,kt),Dt.uv=Triangle.getUV(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2)),Et&&(_uvA$1.fromBufferAttribute(Et,Ct),_uvB$1.fromBufferAttribute(Et,Rt),_uvC$1.fromBufferAttribute(Et,kt),Dt.uv2=Triangle.getUV(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2));const Bt={a:Ct,b:Rt,c:kt,normal:new Vector3,materialIndex:0};Triangle.getNormal(_vA$1,_vB$1,_vC$1,Bt.normal),Dt.face=Bt}return Dt}class BoxGeometry extends BufferGeometry{constructor(lt=1,dt=1,vt=1,Tt=1,Et=1,Ct=1){super(),this.type="BoxGeometry",this.parameters={width:lt,height:dt,depth:vt,widthSegments:Tt,heightSegments:Et,depthSegments:Ct};const Rt=this;Tt=Math.floor(Tt),Et=Math.floor(Et),Ct=Math.floor(Ct);const kt=[],Dt=[],Bt=[],Ft=[];let Ut=0,Zt=0;Kt("z","y","x",-1,-1,vt,dt,lt,Ct,Et,0),Kt("z","y","x",1,-1,vt,dt,-lt,Ct,Et,1),Kt("x","z","y",1,1,lt,vt,dt,Tt,Ct,2),Kt("x","z","y",1,-1,lt,vt,-dt,Tt,Ct,3),Kt("x","y","z",1,-1,lt,dt,vt,Tt,Et,4),Kt("x","y","z",-1,-1,lt,dt,-vt,Tt,Et,5),this.setIndex(kt),this.setAttribute("position",new Float32BufferAttribute(Dt,3)),this.setAttribute("normal",new Float32BufferAttribute(Bt,3)),this.setAttribute("uv",new Float32BufferAttribute(Ft,2));function Kt(ln,hn,dn,pn,mn,On,bn,En,An,Tn,In){const Rn=On/An,Dn=bn/Tn,Bn=On/2,Hn=bn/2,jn=En/2,Kn=An+1,zn=Tn+1;let lr=0,Ln=0;const Vn=new Vector3;for(let Wn=0;Wn<zn;Wn++){const sr=Wn*Dn-Hn;for(let Mn=0;Mn<Kn;Mn++){const ir=Mn*Rn-Bn;Vn[ln]=ir*pn,Vn[hn]=sr*mn,Vn[dn]=jn,Dt.push(Vn.x,Vn.y,Vn.z),Vn[ln]=0,Vn[hn]=0,Vn[dn]=En>0?1:-1,Bt.push(Vn.x,Vn.y,Vn.z),Ft.push(Mn/An),Ft.push(1-Wn/Tn),lr+=1}}for(let Wn=0;Wn<Tn;Wn++)for(let sr=0;sr<An;sr++){const Mn=Ut+sr+Kn*Wn,ir=Ut+sr+Kn*(Wn+1),mr=Ut+(sr+1)+Kn*(Wn+1),tr=Ut+(sr+1)+Kn*Wn;kt.push(Mn,ir,tr),kt.push(ir,mr,tr),Ln+=6}Rt.addGroup(Zt,Ln,In),Zt+=Ln,Ut+=lr}}copy(lt){return super.copy(lt),this.parameters=Object.assign({},lt.parameters),this}static fromJSON(lt){return new BoxGeometry(lt.width,lt.height,lt.depth,lt.widthSegments,lt.heightSegments,lt.depthSegments)}}function cloneUniforms(ft){const lt={};for(const dt in ft){lt[dt]={};for(const vt in ft[dt]){const Tt=ft[dt][vt];Tt&&(Tt.isColor||Tt.isMatrix3||Tt.isMatrix4||Tt.isVector2||Tt.isVector3||Tt.isVector4||Tt.isTexture||Tt.isQuaternion)?lt[dt][vt]=Tt.clone():Array.isArray(Tt)?lt[dt][vt]=Tt.slice():lt[dt][vt]=Tt}}return lt}function mergeUniforms(ft){const lt={};for(let dt=0;dt<ft.length;dt++){const vt=cloneUniforms(ft[dt]);for(const Tt in vt)lt[Tt]=vt[Tt]}return lt}function cloneUniformsGroups(ft){const lt=[];for(let dt=0;dt<ft.length;dt++)lt.push(ft[dt].clone());return lt}function getUnlitUniformColorSpace(ft){return ft.getRenderTarget()===null&&ft.outputEncoding===sRGBEncoding?SRGBColorSpace:LinearSRGBColorSpace}const UniformsUtils={clone:cloneUniforms,merge:mergeUniforms};var default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ShaderMaterial extends Material{constructor(lt){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,lt!==void 0&&this.setValues(lt)}copy(lt){return super.copy(lt),this.fragmentShader=lt.fragmentShader,this.vertexShader=lt.vertexShader,this.uniforms=cloneUniforms(lt.uniforms),this.uniformsGroups=cloneUniformsGroups(lt.uniformsGroups),this.defines=Object.assign({},lt.defines),this.wireframe=lt.wireframe,this.wireframeLinewidth=lt.wireframeLinewidth,this.fog=lt.fog,this.lights=lt.lights,this.clipping=lt.clipping,this.extensions=Object.assign({},lt.extensions),this.glslVersion=lt.glslVersion,this}toJSON(lt){const dt=super.toJSON(lt);dt.glslVersion=this.glslVersion,dt.uniforms={};for(const Tt in this.uniforms){const Ct=this.uniforms[Tt].value;Ct&&Ct.isTexture?dt.uniforms[Tt]={type:"t",value:Ct.toJSON(lt).uuid}:Ct&&Ct.isColor?dt.uniforms[Tt]={type:"c",value:Ct.getHex()}:Ct&&Ct.isVector2?dt.uniforms[Tt]={type:"v2",value:Ct.toArray()}:Ct&&Ct.isVector3?dt.uniforms[Tt]={type:"v3",value:Ct.toArray()}:Ct&&Ct.isVector4?dt.uniforms[Tt]={type:"v4",value:Ct.toArray()}:Ct&&Ct.isMatrix3?dt.uniforms[Tt]={type:"m3",value:Ct.toArray()}:Ct&&Ct.isMatrix4?dt.uniforms[Tt]={type:"m4",value:Ct.toArray()}:dt.uniforms[Tt]={value:Ct}}Object.keys(this.defines).length>0&&(dt.defines=this.defines),dt.vertexShader=this.vertexShader,dt.fragmentShader=this.fragmentShader;const vt={};for(const Tt in this.extensions)this.extensions[Tt]===!0&&(vt[Tt]=!0);return Object.keys(vt).length>0&&(dt.extensions=vt),dt}}class Camera extends Object3D{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4}copy(lt,dt){return super.copy(lt,dt),this.matrixWorldInverse.copy(lt.matrixWorldInverse),this.projectionMatrix.copy(lt.projectionMatrix),this.projectionMatrixInverse.copy(lt.projectionMatrixInverse),this}getWorldDirection(lt){this.updateWorldMatrix(!0,!1);const dt=this.matrixWorld.elements;return lt.set(-dt[8],-dt[9],-dt[10]).normalize()}updateMatrixWorld(lt){super.updateMatrixWorld(lt),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(lt,dt){super.updateWorldMatrix(lt,dt),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class PerspectiveCamera extends Camera{constructor(lt=50,dt=1,vt=.1,Tt=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=lt,this.zoom=1,this.near=vt,this.far=Tt,this.focus=10,this.aspect=dt,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(lt,dt){return super.copy(lt,dt),this.fov=lt.fov,this.zoom=lt.zoom,this.near=lt.near,this.far=lt.far,this.focus=lt.focus,this.aspect=lt.aspect,this.view=lt.view===null?null:Object.assign({},lt.view),this.filmGauge=lt.filmGauge,this.filmOffset=lt.filmOffset,this}setFocalLength(lt){const dt=.5*this.getFilmHeight()/lt;this.fov=RAD2DEG*2*Math.atan(dt),this.updateProjectionMatrix()}getFocalLength(){const lt=Math.tan(DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/lt}getEffectiveFOV(){return RAD2DEG*2*Math.atan(Math.tan(DEG2RAD*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(lt,dt,vt,Tt,Et,Ct){this.aspect=lt/dt,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=lt,this.view.fullHeight=dt,this.view.offsetX=vt,this.view.offsetY=Tt,this.view.width=Et,this.view.height=Ct,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const lt=this.near;let dt=lt*Math.tan(DEG2RAD*.5*this.fov)/this.zoom,vt=2*dt,Tt=this.aspect*vt,Et=-.5*Tt;const Ct=this.view;if(this.view!==null&&this.view.enabled){const kt=Ct.fullWidth,Dt=Ct.fullHeight;Et+=Ct.offsetX*Tt/kt,dt-=Ct.offsetY*vt/Dt,Tt*=Ct.width/kt,vt*=Ct.height/Dt}const Rt=this.filmOffset;Rt!==0&&(Et+=lt*Rt/this.getFilmWidth()),this.projectionMatrix.makePerspective(Et,Et+Tt,dt,dt-vt,lt,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(lt){const dt=super.toJSON(lt);return dt.object.fov=this.fov,dt.object.zoom=this.zoom,dt.object.near=this.near,dt.object.far=this.far,dt.object.focus=this.focus,dt.object.aspect=this.aspect,this.view!==null&&(dt.object.view=Object.assign({},this.view)),dt.object.filmGauge=this.filmGauge,dt.object.filmOffset=this.filmOffset,dt}}const fov=-90,aspect=1;class CubeCamera extends Object3D{constructor(lt,dt,vt){super(),this.type="CubeCamera",this.renderTarget=vt;const Tt=new PerspectiveCamera(fov,aspect,lt,dt);Tt.layers=this.layers,Tt.up.set(0,1,0),Tt.lookAt(1,0,0),this.add(Tt);const Et=new PerspectiveCamera(fov,aspect,lt,dt);Et.layers=this.layers,Et.up.set(0,1,0),Et.lookAt(-1,0,0),this.add(Et);const Ct=new PerspectiveCamera(fov,aspect,lt,dt);Ct.layers=this.layers,Ct.up.set(0,0,-1),Ct.lookAt(0,1,0),this.add(Ct);const Rt=new PerspectiveCamera(fov,aspect,lt,dt);Rt.layers=this.layers,Rt.up.set(0,0,1),Rt.lookAt(0,-1,0),this.add(Rt);const kt=new PerspectiveCamera(fov,aspect,lt,dt);kt.layers=this.layers,kt.up.set(0,1,0),kt.lookAt(0,0,1),this.add(kt);const Dt=new PerspectiveCamera(fov,aspect,lt,dt);Dt.layers=this.layers,Dt.up.set(0,1,0),Dt.lookAt(0,0,-1),this.add(Dt)}update(lt,dt){this.parent===null&&this.updateMatrixWorld();const vt=this.renderTarget,[Tt,Et,Ct,Rt,kt,Dt]=this.children,Bt=lt.getRenderTarget(),Ft=lt.toneMapping,Ut=lt.xr.enabled;lt.toneMapping=NoToneMapping,lt.xr.enabled=!1;const Zt=vt.texture.generateMipmaps;vt.texture.generateMipmaps=!1,lt.setRenderTarget(vt,0),lt.render(dt,Tt),lt.setRenderTarget(vt,1),lt.render(dt,Et),lt.setRenderTarget(vt,2),lt.render(dt,Ct),lt.setRenderTarget(vt,3),lt.render(dt,Rt),lt.setRenderTarget(vt,4),lt.render(dt,kt),vt.texture.generateMipmaps=Zt,lt.setRenderTarget(vt,5),lt.render(dt,Dt),lt.setRenderTarget(Bt),lt.toneMapping=Ft,lt.xr.enabled=Ut,vt.texture.needsPMREMUpdate=!0}}class CubeTexture extends Texture{constructor(lt,dt,vt,Tt,Et,Ct,Rt,kt,Dt,Bt){lt=lt!==void 0?lt:[],dt=dt!==void 0?dt:CubeReflectionMapping,super(lt,dt,vt,Tt,Et,Ct,Rt,kt,Dt,Bt),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(lt){this.image=lt}}class WebGLCubeRenderTarget extends WebGLRenderTarget{constructor(lt=1,dt={}){super(lt,lt,dt),this.isWebGLCubeRenderTarget=!0;const vt={width:lt,height:lt,depth:1},Tt=[vt,vt,vt,vt,vt,vt];this.texture=new CubeTexture(Tt,dt.mapping,dt.wrapS,dt.wrapT,dt.magFilter,dt.minFilter,dt.format,dt.type,dt.anisotropy,dt.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=dt.generateMipmaps!==void 0?dt.generateMipmaps:!1,this.texture.minFilter=dt.minFilter!==void 0?dt.minFilter:LinearFilter}fromEquirectangularTexture(lt,dt){this.texture.type=dt.type,this.texture.encoding=dt.encoding,this.texture.generateMipmaps=dt.generateMipmaps,this.texture.minFilter=dt.minFilter,this.texture.magFilter=dt.magFilter;const vt={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},Tt=new BoxGeometry(5,5,5),Et=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(vt.uniforms),vertexShader:vt.vertexShader,fragmentShader:vt.fragmentShader,side:BackSide,blending:NoBlending});Et.uniforms.tEquirect.value=dt;const Ct=new Mesh(Tt,Et),Rt=dt.minFilter;return dt.minFilter===LinearMipmapLinearFilter&&(dt.minFilter=LinearFilter),new CubeCamera(1,10,this).update(lt,Ct),dt.minFilter=Rt,Ct.geometry.dispose(),Ct.material.dispose(),this}clear(lt,dt,vt,Tt){const Et=lt.getRenderTarget();for(let Ct=0;Ct<6;Ct++)lt.setRenderTarget(this,Ct),lt.clear(dt,vt,Tt);lt.setRenderTarget(Et)}}const _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;let Plane$1=class{constructor(lt=new Vector3(1,0,0),dt=0){this.isPlane=!0,this.normal=lt,this.constant=dt}set(lt,dt){return this.normal.copy(lt),this.constant=dt,this}setComponents(lt,dt,vt,Tt){return this.normal.set(lt,dt,vt),this.constant=Tt,this}setFromNormalAndCoplanarPoint(lt,dt){return this.normal.copy(lt),this.constant=-dt.dot(this.normal),this}setFromCoplanarPoints(lt,dt,vt){const Tt=_vector1.subVectors(vt,dt).cross(_vector2.subVectors(lt,dt)).normalize();return this.setFromNormalAndCoplanarPoint(Tt,lt),this}copy(lt){return this.normal.copy(lt.normal),this.constant=lt.constant,this}normalize(){const lt=1/this.normal.length();return this.normal.multiplyScalar(lt),this.constant*=lt,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(lt){return this.normal.dot(lt)+this.constant}distanceToSphere(lt){return this.distanceToPoint(lt.center)-lt.radius}projectPoint(lt,dt){return dt.copy(lt).addScaledVector(this.normal,-this.distanceToPoint(lt))}intersectLine(lt,dt){const vt=lt.delta(_vector1),Tt=this.normal.dot(vt);if(Tt===0)return this.distanceToPoint(lt.start)===0?dt.copy(lt.start):null;const Et=-(lt.start.dot(this.normal)+this.constant)/Tt;return Et<0||Et>1?null:dt.copy(lt.start).addScaledVector(vt,Et)}intersectsLine(lt){const dt=this.distanceToPoint(lt.start),vt=this.distanceToPoint(lt.end);return dt<0&&vt>0||vt<0&&dt>0}intersectsBox(lt){return lt.intersectsPlane(this)}intersectsSphere(lt){return lt.intersectsPlane(this)}coplanarPoint(lt){return lt.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(lt,dt){const vt=dt||_normalMatrix.getNormalMatrix(lt),Tt=this.coplanarPoint(_vector1).applyMatrix4(lt),Et=this.normal.applyMatrix3(vt).normalize();return this.constant=-Tt.dot(Et),this}translate(lt){return this.constant-=lt.dot(this.normal),this}equals(lt){return lt.normal.equals(this.normal)&&lt.constant===this.constant}clone(){return new this.constructor().copy(this)}};const _sphere$2=new Sphere$1,_vector$7=new Vector3;class Frustum{constructor(lt=new Plane$1,dt=new Plane$1,vt=new Plane$1,Tt=new Plane$1,Et=new Plane$1,Ct=new Plane$1){this.planes=[lt,dt,vt,Tt,Et,Ct]}set(lt,dt,vt,Tt,Et,Ct){const Rt=this.planes;return Rt[0].copy(lt),Rt[1].copy(dt),Rt[2].copy(vt),Rt[3].copy(Tt),Rt[4].copy(Et),Rt[5].copy(Ct),this}copy(lt){const dt=this.planes;for(let vt=0;vt<6;vt++)dt[vt].copy(lt.planes[vt]);return this}setFromProjectionMatrix(lt){const dt=this.planes,vt=lt.elements,Tt=vt[0],Et=vt[1],Ct=vt[2],Rt=vt[3],kt=vt[4],Dt=vt[5],Bt=vt[6],Ft=vt[7],Ut=vt[8],Zt=vt[9],Kt=vt[10],ln=vt[11],hn=vt[12],dn=vt[13],pn=vt[14],mn=vt[15];return dt[0].setComponents(Rt-Tt,Ft-kt,ln-Ut,mn-hn).normalize(),dt[1].setComponents(Rt+Tt,Ft+kt,ln+Ut,mn+hn).normalize(),dt[2].setComponents(Rt+Et,Ft+Dt,ln+Zt,mn+dn).normalize(),dt[3].setComponents(Rt-Et,Ft-Dt,ln-Zt,mn-dn).normalize(),dt[4].setComponents(Rt-Ct,Ft-Bt,ln-Kt,mn-pn).normalize(),dt[5].setComponents(Rt+Ct,Ft+Bt,ln+Kt,mn+pn).normalize(),this}intersectsObject(lt){const dt=lt.geometry;return dt.boundingSphere===null&&dt.computeBoundingSphere(),_sphere$2.copy(dt.boundingSphere).applyMatrix4(lt.matrixWorld),this.intersectsSphere(_sphere$2)}intersectsSprite(lt){return _sphere$2.center.set(0,0,0),_sphere$2.radius=.7071067811865476,_sphere$2.applyMatrix4(lt.matrixWorld),this.intersectsSphere(_sphere$2)}intersectsSphere(lt){const dt=this.planes,vt=lt.center,Tt=-lt.radius;for(let Et=0;Et<6;Et++)if(dt[Et].distanceToPoint(vt)<Tt)return!1;return!0}intersectsBox(lt){const dt=this.planes;for(let vt=0;vt<6;vt++){const Tt=dt[vt];if(_vector$7.x=Tt.normal.x>0?lt.max.x:lt.min.x,_vector$7.y=Tt.normal.y>0?lt.max.y:lt.min.y,_vector$7.z=Tt.normal.z>0?lt.max.z:lt.min.z,Tt.distanceToPoint(_vector$7)<0)return!1}return!0}containsPoint(lt){const dt=this.planes;for(let vt=0;vt<6;vt++)if(dt[vt].distanceToPoint(lt)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function WebGLAnimation(){let ft=null,lt=!1,dt=null,vt=null;function Tt(Et,Ct){dt(Et,Ct),vt=ft.requestAnimationFrame(Tt)}return{start:function(){lt!==!0&&dt!==null&&(vt=ft.requestAnimationFrame(Tt),lt=!0)},stop:function(){ft.cancelAnimationFrame(vt),lt=!1},setAnimationLoop:function(Et){dt=Et},setContext:function(Et){ft=Et}}}function WebGLAttributes(ft,lt){const dt=lt.isWebGL2,vt=new WeakMap;function Tt(Dt,Bt){const Ft=Dt.array,Ut=Dt.usage,Zt=ft.createBuffer();ft.bindBuffer(Bt,Zt),ft.bufferData(Bt,Ft,Ut),Dt.onUploadCallback();let Kt;if(Ft instanceof Float32Array)Kt=5126;else if(Ft instanceof Uint16Array)if(Dt.isFloat16BufferAttribute)if(dt)Kt=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else Kt=5123;else if(Ft instanceof Int16Array)Kt=5122;else if(Ft instanceof Uint32Array)Kt=5125;else if(Ft instanceof Int32Array)Kt=5124;else if(Ft instanceof Int8Array)Kt=5120;else if(Ft instanceof Uint8Array)Kt=5121;else if(Ft instanceof Uint8ClampedArray)Kt=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+Ft);return{buffer:Zt,type:Kt,bytesPerElement:Ft.BYTES_PER_ELEMENT,version:Dt.version}}function Et(Dt,Bt,Ft){const Ut=Bt.array,Zt=Bt.updateRange;ft.bindBuffer(Ft,Dt),Zt.count===-1?ft.bufferSubData(Ft,0,Ut):(dt?ft.bufferSubData(Ft,Zt.offset*Ut.BYTES_PER_ELEMENT,Ut,Zt.offset,Zt.count):ft.bufferSubData(Ft,Zt.offset*Ut.BYTES_PER_ELEMENT,Ut.subarray(Zt.offset,Zt.offset+Zt.count)),Zt.count=-1),Bt.onUploadCallback()}function Ct(Dt){return Dt.isInterleavedBufferAttribute&&(Dt=Dt.data),vt.get(Dt)}function Rt(Dt){Dt.isInterleavedBufferAttribute&&(Dt=Dt.data);const Bt=vt.get(Dt);Bt&&(ft.deleteBuffer(Bt.buffer),vt.delete(Dt))}function kt(Dt,Bt){if(Dt.isGLBufferAttribute){const Ut=vt.get(Dt);(!Ut||Ut.version<Dt.version)&&vt.set(Dt,{buffer:Dt.buffer,type:Dt.type,bytesPerElement:Dt.elementSize,version:Dt.version});return}Dt.isInterleavedBufferAttribute&&(Dt=Dt.data);const Ft=vt.get(Dt);Ft===void 0?vt.set(Dt,Tt(Dt,Bt)):Ft.version<Dt.version&&(Et(Ft.buffer,Dt,Bt),Ft.version=Dt.version)}return{get:Ct,remove:Rt,update:kt}}class PlaneGeometry extends BufferGeometry{constructor(lt=1,dt=1,vt=1,Tt=1){super(),this.type="PlaneGeometry",this.parameters={width:lt,height:dt,widthSegments:vt,heightSegments:Tt};const Et=lt/2,Ct=dt/2,Rt=Math.floor(vt),kt=Math.floor(Tt),Dt=Rt+1,Bt=kt+1,Ft=lt/Rt,Ut=dt/kt,Zt=[],Kt=[],ln=[],hn=[];for(let dn=0;dn<Bt;dn++){const pn=dn*Ut-Ct;for(let mn=0;mn<Dt;mn++){const On=mn*Ft-Et;Kt.push(On,-pn,0),ln.push(0,0,1),hn.push(mn/Rt),hn.push(1-dn/kt)}}for(let dn=0;dn<kt;dn++)for(let pn=0;pn<Rt;pn++){const mn=pn+Dt*dn,On=pn+Dt*(dn+1),bn=pn+1+Dt*(dn+1),En=pn+1+Dt*dn;Zt.push(mn,On,En),Zt.push(On,bn,En)}this.setIndex(Zt),this.setAttribute("position",new Float32BufferAttribute(Kt,3)),this.setAttribute("normal",new Float32BufferAttribute(ln,3)),this.setAttribute("uv",new Float32BufferAttribute(hn,2))}copy(lt){return super.copy(lt),this.parameters=Object.assign({},lt.parameters),this}static fromJSON(lt){return new PlaneGeometry(lt.width,lt.height,lt.widthSegments,lt.heightSegments)}}var alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,alphatest_pars_fragment=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,begin_vertex="vec3 transformed = vec3( position );",beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,iridescence_fragment=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,color_pars_vertex=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,color_vertex=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,common=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,encodings_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,lightmap_fragment=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_fragment=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,lights_lambert_pars_fragment=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,lights_physical_pars_fragment=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,map_fragment=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphcolor_vertex=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,normal_fragment_begin=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,normal_fragment_maps=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,normal_pars_fragment=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_pars_vertex=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_vertex=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,iridescence_pars_fragment=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,output_fragment=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,shadowmap_pars_vertex=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,transmission_fragment=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,transmission_pars_fragment=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		
		vec2 lodFudge = pow( 1.95, lod ) / fullSize;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec2 fullSize = vec2( textureSize( sampler, 0 ) );
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,uv_pars_fragment=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,uv_pars_vertex=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,uv_vertex=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,uv2_pars_fragment=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,uv2_pars_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,uv2_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const vertex$h=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,fragment$h=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vertex$g=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$g=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vertex$f=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$f=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vertex$e=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,fragment$e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,vertex$d=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,fragment$d=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,vertex$c=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,fragment$c=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vertex$b=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$b=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$a=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,fragment$a=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$9=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$9=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$8=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fragment$8=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$7=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,fragment$7=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,vertex$6=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$6=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$5=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,fragment$5=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$4=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$4=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$3=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,fragment$3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$2=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$2=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,vertex$1=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$1=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,ShaderChunk={alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,alphatest_pars_fragment,aomap_fragment,aomap_pars_fragment,begin_vertex,beginnormal_vertex,bsdfs,iridescence_fragment,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,encodings_fragment,encodings_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_fragment,lightmap_pars_fragment,lights_lambert_fragment,lights_lambert_pars_fragment,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphcolor_vertex,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normal_pars_fragment,normal_pars_vertex,normal_vertex,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,iridescence_pars_fragment,output_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,transmission_fragment,transmission_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,uv2_pars_fragment,uv2_pars_vertex,uv2_vertex,worldpos_vertex,background_vert:vertex$h,background_frag:fragment$h,backgroundCube_vert:vertex$g,backgroundCube_frag:fragment$g,cube_vert:vertex$f,cube_frag:fragment$f,depth_vert:vertex$e,depth_frag:fragment$e,distanceRGBA_vert:vertex$d,distanceRGBA_frag:fragment$d,equirect_vert:vertex$c,equirect_frag:fragment$c,linedashed_vert:vertex$b,linedashed_frag:fragment$b,meshbasic_vert:vertex$a,meshbasic_frag:fragment$a,meshlambert_vert:vertex$9,meshlambert_frag:fragment$9,meshmatcap_vert:vertex$8,meshmatcap_frag:fragment$8,meshnormal_vert:vertex$7,meshnormal_frag:fragment$7,meshphong_vert:vertex$6,meshphong_frag:fragment$6,meshphysical_vert:vertex$5,meshphysical_frag:fragment$5,meshtoon_vert:vertex$4,meshtoon_frag:fragment$4,points_vert:vertex$3,points_frag:fragment$3,shadow_vert:vertex$2,shadow_frag:fragment$2,sprite_vert:vertex$1,sprite_frag:fragment$1},UniformsLib={common:{diffuse:{value:new Color(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Matrix3},uv2Transform:{value:new Matrix3},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Color(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(16777215)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Matrix3}}},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.meshnormal_vert,fragmentShader:ShaderChunk.meshnormal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.backgroundCube_vert,fragmentShader:ShaderChunk.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Color(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Vector2},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Color(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Color(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};const _rgb={r:0,b:0,g:0};function WebGLBackground(ft,lt,dt,vt,Tt,Et,Ct){const Rt=new Color(0);let kt=Et===!0?0:1,Dt,Bt,Ft=null,Ut=0,Zt=null;function Kt(hn,dn){let pn=!1,mn=dn.isScene===!0?dn.background:null;mn&&mn.isTexture&&(mn=(dn.backgroundBlurriness>0?dt:lt).get(mn));const On=ft.xr,bn=On.getSession&&On.getSession();bn&&bn.environmentBlendMode==="additive"&&(mn=null),mn===null?ln(Rt,kt):mn&&mn.isColor&&(ln(mn,1),pn=!0),(ft.autoClear||pn)&&ft.clear(ft.autoClearColor,ft.autoClearDepth,ft.autoClearStencil),mn&&(mn.isCubeTexture||mn.mapping===CubeUVReflectionMapping)?(Bt===void 0&&(Bt=new Mesh(new BoxGeometry(1,1,1),new ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.backgroundCube.uniforms),vertexShader:ShaderLib.backgroundCube.vertexShader,fragmentShader:ShaderLib.backgroundCube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1})),Bt.geometry.deleteAttribute("normal"),Bt.geometry.deleteAttribute("uv"),Bt.onBeforeRender=function(En,An,Tn){this.matrixWorld.copyPosition(Tn.matrixWorld)},Object.defineProperty(Bt.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),Tt.update(Bt)),Bt.material.uniforms.envMap.value=mn,Bt.material.uniforms.flipEnvMap.value=mn.isCubeTexture&&mn.isRenderTargetTexture===!1?-1:1,Bt.material.uniforms.backgroundBlurriness.value=dn.backgroundBlurriness,Bt.material.uniforms.backgroundIntensity.value=dn.backgroundIntensity,Bt.material.toneMapped=mn.encoding!==sRGBEncoding,(Ft!==mn||Ut!==mn.version||Zt!==ft.toneMapping)&&(Bt.material.needsUpdate=!0,Ft=mn,Ut=mn.version,Zt=ft.toneMapping),Bt.layers.enableAll(),hn.unshift(Bt,Bt.geometry,Bt.material,0,0,null)):mn&&mn.isTexture&&(Dt===void 0&&(Dt=new Mesh(new PlaneGeometry(2,2),new ShaderMaterial({name:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1})),Dt.geometry.deleteAttribute("normal"),Object.defineProperty(Dt.material,"map",{get:function(){return this.uniforms.t2D.value}}),Tt.update(Dt)),Dt.material.uniforms.t2D.value=mn,Dt.material.uniforms.backgroundIntensity.value=dn.backgroundIntensity,Dt.material.toneMapped=mn.encoding!==sRGBEncoding,mn.matrixAutoUpdate===!0&&mn.updateMatrix(),Dt.material.uniforms.uvTransform.value.copy(mn.matrix),(Ft!==mn||Ut!==mn.version||Zt!==ft.toneMapping)&&(Dt.material.needsUpdate=!0,Ft=mn,Ut=mn.version,Zt=ft.toneMapping),Dt.layers.enableAll(),hn.unshift(Dt,Dt.geometry,Dt.material,0,0,null))}function ln(hn,dn){hn.getRGB(_rgb,getUnlitUniformColorSpace(ft)),vt.buffers.color.setClear(_rgb.r,_rgb.g,_rgb.b,dn,Ct)}return{getClearColor:function(){return Rt},setClearColor:function(hn,dn=1){Rt.set(hn),kt=dn,ln(Rt,kt)},getClearAlpha:function(){return kt},setClearAlpha:function(hn){kt=hn,ln(Rt,kt)},render:Kt}}function WebGLBindingStates(ft,lt,dt,vt){const Tt=ft.getParameter(34921),Et=vt.isWebGL2?null:lt.get("OES_vertex_array_object"),Ct=vt.isWebGL2||Et!==null,Rt={},kt=hn(null);let Dt=kt,Bt=!1;function Ft(jn,Kn,zn,lr,Ln){let Vn=!1;if(Ct){const Wn=ln(lr,zn,Kn);Dt!==Wn&&(Dt=Wn,Zt(Dt.object)),Vn=dn(jn,lr,zn,Ln),Vn&&pn(jn,lr,zn,Ln)}else{const Wn=Kn.wireframe===!0;(Dt.geometry!==lr.id||Dt.program!==zn.id||Dt.wireframe!==Wn)&&(Dt.geometry=lr.id,Dt.program=zn.id,Dt.wireframe=Wn,Vn=!0)}Ln!==null&&dt.update(Ln,34963),(Vn||Bt)&&(Bt=!1,Tn(jn,Kn,zn,lr),Ln!==null&&ft.bindBuffer(34963,dt.get(Ln).buffer))}function Ut(){return vt.isWebGL2?ft.createVertexArray():Et.createVertexArrayOES()}function Zt(jn){return vt.isWebGL2?ft.bindVertexArray(jn):Et.bindVertexArrayOES(jn)}function Kt(jn){return vt.isWebGL2?ft.deleteVertexArray(jn):Et.deleteVertexArrayOES(jn)}function ln(jn,Kn,zn){const lr=zn.wireframe===!0;let Ln=Rt[jn.id];Ln===void 0&&(Ln={},Rt[jn.id]=Ln);let Vn=Ln[Kn.id];Vn===void 0&&(Vn={},Ln[Kn.id]=Vn);let Wn=Vn[lr];return Wn===void 0&&(Wn=hn(Ut()),Vn[lr]=Wn),Wn}function hn(jn){const Kn=[],zn=[],lr=[];for(let Ln=0;Ln<Tt;Ln++)Kn[Ln]=0,zn[Ln]=0,lr[Ln]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Kn,enabledAttributes:zn,attributeDivisors:lr,object:jn,attributes:{},index:null}}function dn(jn,Kn,zn,lr){const Ln=Dt.attributes,Vn=Kn.attributes;let Wn=0;const sr=zn.getAttributes();for(const Mn in sr)if(sr[Mn].location>=0){const mr=Ln[Mn];let tr=Vn[Mn];if(tr===void 0&&(Mn==="instanceMatrix"&&jn.instanceMatrix&&(tr=jn.instanceMatrix),Mn==="instanceColor"&&jn.instanceColor&&(tr=jn.instanceColor)),mr===void 0||mr.attribute!==tr||tr&&mr.data!==tr.data)return!0;Wn++}return Dt.attributesNum!==Wn||Dt.index!==lr}function pn(jn,Kn,zn,lr){const Ln={},Vn=Kn.attributes;let Wn=0;const sr=zn.getAttributes();for(const Mn in sr)if(sr[Mn].location>=0){let mr=Vn[Mn];mr===void 0&&(Mn==="instanceMatrix"&&jn.instanceMatrix&&(mr=jn.instanceMatrix),Mn==="instanceColor"&&jn.instanceColor&&(mr=jn.instanceColor));const tr={};tr.attribute=mr,mr&&mr.data&&(tr.data=mr.data),Ln[Mn]=tr,Wn++}Dt.attributes=Ln,Dt.attributesNum=Wn,Dt.index=lr}function mn(){const jn=Dt.newAttributes;for(let Kn=0,zn=jn.length;Kn<zn;Kn++)jn[Kn]=0}function On(jn){bn(jn,0)}function bn(jn,Kn){const zn=Dt.newAttributes,lr=Dt.enabledAttributes,Ln=Dt.attributeDivisors;zn[jn]=1,lr[jn]===0&&(ft.enableVertexAttribArray(jn),lr[jn]=1),Ln[jn]!==Kn&&((vt.isWebGL2?ft:lt.get("ANGLE_instanced_arrays"))[vt.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](jn,Kn),Ln[jn]=Kn)}function En(){const jn=Dt.newAttributes,Kn=Dt.enabledAttributes;for(let zn=0,lr=Kn.length;zn<lr;zn++)Kn[zn]!==jn[zn]&&(ft.disableVertexAttribArray(zn),Kn[zn]=0)}function An(jn,Kn,zn,lr,Ln,Vn){vt.isWebGL2===!0&&(zn===5124||zn===5125)?ft.vertexAttribIPointer(jn,Kn,zn,Ln,Vn):ft.vertexAttribPointer(jn,Kn,zn,lr,Ln,Vn)}function Tn(jn,Kn,zn,lr){if(vt.isWebGL2===!1&&(jn.isInstancedMesh||lr.isInstancedBufferGeometry)&&lt.get("ANGLE_instanced_arrays")===null)return;mn();const Ln=lr.attributes,Vn=zn.getAttributes(),Wn=Kn.defaultAttributeValues;for(const sr in Vn){const Mn=Vn[sr];if(Mn.location>=0){let ir=Ln[sr];if(ir===void 0&&(sr==="instanceMatrix"&&jn.instanceMatrix&&(ir=jn.instanceMatrix),sr==="instanceColor"&&jn.instanceColor&&(ir=jn.instanceColor)),ir!==void 0){const mr=ir.normalized,tr=ir.itemSize,Dr=dt.get(ir);if(Dr===void 0)continue;const Sr=Dr.buffer,Vr=Dr.type,Jr=Dr.bytesPerElement;if(ir.isInterleavedBufferAttribute){const Yr=ir.data,_i=Yr.stride,Er=ir.offset;if(Yr.isInstancedInterleavedBuffer){for(let kr=0;kr<Mn.locationSize;kr++)bn(Mn.location+kr,Yr.meshPerAttribute);jn.isInstancedMesh!==!0&&lr._maxInstanceCount===void 0&&(lr._maxInstanceCount=Yr.meshPerAttribute*Yr.count)}else for(let kr=0;kr<Mn.locationSize;kr++)On(Mn.location+kr);ft.bindBuffer(34962,Sr);for(let kr=0;kr<Mn.locationSize;kr++)An(Mn.location+kr,tr/Mn.locationSize,Vr,mr,_i*Jr,(Er+tr/Mn.locationSize*kr)*Jr)}else{if(ir.isInstancedBufferAttribute){for(let Yr=0;Yr<Mn.locationSize;Yr++)bn(Mn.location+Yr,ir.meshPerAttribute);jn.isInstancedMesh!==!0&&lr._maxInstanceCount===void 0&&(lr._maxInstanceCount=ir.meshPerAttribute*ir.count)}else for(let Yr=0;Yr<Mn.locationSize;Yr++)On(Mn.location+Yr);ft.bindBuffer(34962,Sr);for(let Yr=0;Yr<Mn.locationSize;Yr++)An(Mn.location+Yr,tr/Mn.locationSize,Vr,mr,tr*Jr,tr/Mn.locationSize*Yr*Jr)}}else if(Wn!==void 0){const mr=Wn[sr];if(mr!==void 0)switch(mr.length){case 2:ft.vertexAttrib2fv(Mn.location,mr);break;case 3:ft.vertexAttrib3fv(Mn.location,mr);break;case 4:ft.vertexAttrib4fv(Mn.location,mr);break;default:ft.vertexAttrib1fv(Mn.location,mr)}}}}En()}function In(){Bn();for(const jn in Rt){const Kn=Rt[jn];for(const zn in Kn){const lr=Kn[zn];for(const Ln in lr)Kt(lr[Ln].object),delete lr[Ln];delete Kn[zn]}delete Rt[jn]}}function Rn(jn){if(Rt[jn.id]===void 0)return;const Kn=Rt[jn.id];for(const zn in Kn){const lr=Kn[zn];for(const Ln in lr)Kt(lr[Ln].object),delete lr[Ln];delete Kn[zn]}delete Rt[jn.id]}function Dn(jn){for(const Kn in Rt){const zn=Rt[Kn];if(zn[jn.id]===void 0)continue;const lr=zn[jn.id];for(const Ln in lr)Kt(lr[Ln].object),delete lr[Ln];delete zn[jn.id]}}function Bn(){Hn(),Bt=!0,Dt!==kt&&(Dt=kt,Zt(Dt.object))}function Hn(){kt.geometry=null,kt.program=null,kt.wireframe=!1}return{setup:Ft,reset:Bn,resetDefaultState:Hn,dispose:In,releaseStatesOfGeometry:Rn,releaseStatesOfProgram:Dn,initAttributes:mn,enableAttribute:On,disableUnusedAttributes:En}}function WebGLBufferRenderer(ft,lt,dt,vt){const Tt=vt.isWebGL2;let Et;function Ct(Dt){Et=Dt}function Rt(Dt,Bt){ft.drawArrays(Et,Dt,Bt),dt.update(Bt,Et,1)}function kt(Dt,Bt,Ft){if(Ft===0)return;let Ut,Zt;if(Tt)Ut=ft,Zt="drawArraysInstanced";else if(Ut=lt.get("ANGLE_instanced_arrays"),Zt="drawArraysInstancedANGLE",Ut===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}Ut[Zt](Et,Dt,Bt,Ft),dt.update(Bt,Et,Ft)}this.setMode=Ct,this.render=Rt,this.renderInstances=kt}function WebGLCapabilities(ft,lt,dt){let vt;function Tt(){if(vt!==void 0)return vt;if(lt.has("EXT_texture_filter_anisotropic")===!0){const An=lt.get("EXT_texture_filter_anisotropic");vt=ft.getParameter(An.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else vt=0;return vt}function Et(An){if(An==="highp"){if(ft.getShaderPrecisionFormat(35633,36338).precision>0&&ft.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";An="mediump"}return An==="mediump"&&ft.getShaderPrecisionFormat(35633,36337).precision>0&&ft.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const Ct=typeof WebGL2RenderingContext<"u"&&ft instanceof WebGL2RenderingContext;let Rt=dt.precision!==void 0?dt.precision:"highp";const kt=Et(Rt);kt!==Rt&&(console.warn("THREE.WebGLRenderer:",Rt,"not supported, using",kt,"instead."),Rt=kt);const Dt=Ct||lt.has("WEBGL_draw_buffers"),Bt=dt.logarithmicDepthBuffer===!0,Ft=ft.getParameter(34930),Ut=ft.getParameter(35660),Zt=ft.getParameter(3379),Kt=ft.getParameter(34076),ln=ft.getParameter(34921),hn=ft.getParameter(36347),dn=ft.getParameter(36348),pn=ft.getParameter(36349),mn=Ut>0,On=Ct||lt.has("OES_texture_float"),bn=mn&&On,En=Ct?ft.getParameter(36183):0;return{isWebGL2:Ct,drawBuffers:Dt,getMaxAnisotropy:Tt,getMaxPrecision:Et,precision:Rt,logarithmicDepthBuffer:Bt,maxTextures:Ft,maxVertexTextures:Ut,maxTextureSize:Zt,maxCubemapSize:Kt,maxAttributes:ln,maxVertexUniforms:hn,maxVaryings:dn,maxFragmentUniforms:pn,vertexTextures:mn,floatFragmentTextures:On,floatVertexTextures:bn,maxSamples:En}}function WebGLClipping(ft){const lt=this;let dt=null,vt=0,Tt=!1,Et=!1;const Ct=new Plane$1,Rt=new Matrix3,kt={value:null,needsUpdate:!1};this.uniform=kt,this.numPlanes=0,this.numIntersection=0,this.init=function(Ft,Ut){const Zt=Ft.length!==0||Ut||vt!==0||Tt;return Tt=Ut,vt=Ft.length,Zt},this.beginShadows=function(){Et=!0,Bt(null)},this.endShadows=function(){Et=!1},this.setGlobalState=function(Ft,Ut){dt=Bt(Ft,Ut,0)},this.setState=function(Ft,Ut,Zt){const Kt=Ft.clippingPlanes,ln=Ft.clipIntersection,hn=Ft.clipShadows,dn=ft.get(Ft);if(!Tt||Kt===null||Kt.length===0||Et&&!hn)Et?Bt(null):Dt();else{const pn=Et?0:vt,mn=pn*4;let On=dn.clippingState||null;kt.value=On,On=Bt(Kt,Ut,mn,Zt);for(let bn=0;bn!==mn;++bn)On[bn]=dt[bn];dn.clippingState=On,this.numIntersection=ln?this.numPlanes:0,this.numPlanes+=pn}};function Dt(){kt.value!==dt&&(kt.value=dt,kt.needsUpdate=vt>0),lt.numPlanes=vt,lt.numIntersection=0}function Bt(Ft,Ut,Zt,Kt){const ln=Ft!==null?Ft.length:0;let hn=null;if(ln!==0){if(hn=kt.value,Kt!==!0||hn===null){const dn=Zt+ln*4,pn=Ut.matrixWorldInverse;Rt.getNormalMatrix(pn),(hn===null||hn.length<dn)&&(hn=new Float32Array(dn));for(let mn=0,On=Zt;mn!==ln;++mn,On+=4)Ct.copy(Ft[mn]).applyMatrix4(pn,Rt),Ct.normal.toArray(hn,On),hn[On+3]=Ct.constant}kt.value=hn,kt.needsUpdate=!0}return lt.numPlanes=ln,lt.numIntersection=0,hn}}function WebGLCubeMaps(ft){let lt=new WeakMap;function dt(Ct,Rt){return Rt===EquirectangularReflectionMapping?Ct.mapping=CubeReflectionMapping:Rt===EquirectangularRefractionMapping&&(Ct.mapping=CubeRefractionMapping),Ct}function vt(Ct){if(Ct&&Ct.isTexture&&Ct.isRenderTargetTexture===!1){const Rt=Ct.mapping;if(Rt===EquirectangularReflectionMapping||Rt===EquirectangularRefractionMapping)if(lt.has(Ct)){const kt=lt.get(Ct).texture;return dt(kt,Ct.mapping)}else{const kt=Ct.image;if(kt&&kt.height>0){const Dt=new WebGLCubeRenderTarget(kt.height/2);return Dt.fromEquirectangularTexture(ft,Ct),lt.set(Ct,Dt),Ct.addEventListener("dispose",Tt),dt(Dt.texture,Ct.mapping)}else return null}}return Ct}function Tt(Ct){const Rt=Ct.target;Rt.removeEventListener("dispose",Tt);const kt=lt.get(Rt);kt!==void 0&&(lt.delete(Rt),kt.dispose())}function Et(){lt=new WeakMap}return{get:vt,dispose:Et}}let OrthographicCamera$1=class extends Camera{constructor(lt=-1,dt=1,vt=1,Tt=-1,Et=.1,Ct=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=lt,this.right=dt,this.top=vt,this.bottom=Tt,this.near=Et,this.far=Ct,this.updateProjectionMatrix()}copy(lt,dt){return super.copy(lt,dt),this.left=lt.left,this.right=lt.right,this.top=lt.top,this.bottom=lt.bottom,this.near=lt.near,this.far=lt.far,this.zoom=lt.zoom,this.view=lt.view===null?null:Object.assign({},lt.view),this}setViewOffset(lt,dt,vt,Tt,Et,Ct){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=lt,this.view.fullHeight=dt,this.view.offsetX=vt,this.view.offsetY=Tt,this.view.width=Et,this.view.height=Ct,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const lt=(this.right-this.left)/(2*this.zoom),dt=(this.top-this.bottom)/(2*this.zoom),vt=(this.right+this.left)/2,Tt=(this.top+this.bottom)/2;let Et=vt-lt,Ct=vt+lt,Rt=Tt+dt,kt=Tt-dt;if(this.view!==null&&this.view.enabled){const Dt=(this.right-this.left)/this.view.fullWidth/this.zoom,Bt=(this.top-this.bottom)/this.view.fullHeight/this.zoom;Et+=Dt*this.view.offsetX,Ct=Et+Dt*this.view.width,Rt-=Bt*this.view.offsetY,kt=Rt-Bt*this.view.height}this.projectionMatrix.makeOrthographic(Et,Ct,Rt,kt,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(lt){const dt=super.toJSON(lt);return dt.object.zoom=this.zoom,dt.object.left=this.left,dt.object.right=this.right,dt.object.top=this.top,dt.object.bottom=this.bottom,dt.object.near=this.near,dt.object.far=this.far,this.view!==null&&(dt.object.view=Object.assign({},this.view)),dt}};const LOD_MIN=4,EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],MAX_SAMPLES=20,_flatCamera=new OrthographicCamera$1,_clearColor=new Color;let _oldTarget=null;const PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(1,1,1),new Vector3(-1,1,1),new Vector3(1,1,-1),new Vector3(-1,1,-1),new Vector3(0,PHI,INV_PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(INV_PHI,0,PHI),new Vector3(-INV_PHI,0,PHI),new Vector3(PHI,INV_PHI,0),new Vector3(-PHI,INV_PHI,0)];class PMREMGenerator{constructor(lt){this._renderer=lt,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(lt,dt=0,vt=.1,Tt=100){_oldTarget=this._renderer.getRenderTarget(),this._setSize(256);const Et=this._allocateTargets();return Et.depthBuffer=!0,this._sceneToCubeUV(lt,vt,Tt,Et),dt>0&&this._blur(Et,0,0,dt),this._applyPMREM(Et),this._cleanup(Et),Et}fromEquirectangular(lt,dt=null){return this._fromTexture(lt,dt)}fromCubemap(lt,dt=null){return this._fromTexture(lt,dt)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(lt){this._lodMax=Math.floor(Math.log2(lt)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let lt=0;lt<this._lodPlanes.length;lt++)this._lodPlanes[lt].dispose()}_cleanup(lt){this._renderer.setRenderTarget(_oldTarget),lt.scissorTest=!1,_setViewport(lt,0,0,lt.width,lt.height)}_fromTexture(lt,dt){lt.mapping===CubeReflectionMapping||lt.mapping===CubeRefractionMapping?this._setSize(lt.image.length===0?16:lt.image[0].width||lt.image[0].image.width):this._setSize(lt.image.width/4),_oldTarget=this._renderer.getRenderTarget();const vt=dt||this._allocateTargets();return this._textureToCubeUV(lt,vt),this._applyPMREM(vt),this._cleanup(vt),vt}_allocateTargets(){const lt=3*Math.max(this._cubeSize,112),dt=4*this._cubeSize,vt={magFilter:LinearFilter,minFilter:LinearFilter,generateMipmaps:!1,type:HalfFloatType,format:RGBAFormat,encoding:LinearEncoding,depthBuffer:!1},Tt=_createRenderTarget(lt,dt,vt);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==lt||this._pingPongRenderTarget.height!==dt){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=_createRenderTarget(lt,dt,vt);const{_lodMax:Et}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=_createPlanes(Et)),this._blurMaterial=_getBlurShader(Et,lt,dt)}return Tt}_compileMaterial(lt){const dt=new Mesh(this._lodPlanes[0],lt);this._renderer.compile(dt,_flatCamera)}_sceneToCubeUV(lt,dt,vt,Tt){const Rt=new PerspectiveCamera(90,1,dt,vt),kt=[1,-1,1,1,1,1],Dt=[1,1,1,-1,-1,-1],Bt=this._renderer,Ft=Bt.autoClear,Ut=Bt.toneMapping;Bt.getClearColor(_clearColor),Bt.toneMapping=NoToneMapping,Bt.autoClear=!1;const Zt=new MeshBasicMaterial({name:"PMREM.Background",side:BackSide,depthWrite:!1,depthTest:!1}),Kt=new Mesh(new BoxGeometry,Zt);let ln=!1;const hn=lt.background;hn?hn.isColor&&(Zt.color.copy(hn),lt.background=null,ln=!0):(Zt.color.copy(_clearColor),ln=!0);for(let dn=0;dn<6;dn++){const pn=dn%3;pn===0?(Rt.up.set(0,kt[dn],0),Rt.lookAt(Dt[dn],0,0)):pn===1?(Rt.up.set(0,0,kt[dn]),Rt.lookAt(0,Dt[dn],0)):(Rt.up.set(0,kt[dn],0),Rt.lookAt(0,0,Dt[dn]));const mn=this._cubeSize;_setViewport(Tt,pn*mn,dn>2?mn:0,mn,mn),Bt.setRenderTarget(Tt),ln&&Bt.render(Kt,Rt),Bt.render(lt,Rt)}Kt.geometry.dispose(),Kt.material.dispose(),Bt.toneMapping=Ut,Bt.autoClear=Ft,lt.background=hn}_textureToCubeUV(lt,dt){const vt=this._renderer,Tt=lt.mapping===CubeReflectionMapping||lt.mapping===CubeRefractionMapping;Tt?(this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial()),this._cubemapMaterial.uniforms.flipEnvMap.value=lt.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial());const Et=Tt?this._cubemapMaterial:this._equirectMaterial,Ct=new Mesh(this._lodPlanes[0],Et),Rt=Et.uniforms;Rt.envMap.value=lt;const kt=this._cubeSize;_setViewport(dt,0,0,3*kt,2*kt),vt.setRenderTarget(dt),vt.render(Ct,_flatCamera)}_applyPMREM(lt){const dt=this._renderer,vt=dt.autoClear;dt.autoClear=!1;for(let Tt=1;Tt<this._lodPlanes.length;Tt++){const Et=Math.sqrt(this._sigmas[Tt]*this._sigmas[Tt]-this._sigmas[Tt-1]*this._sigmas[Tt-1]),Ct=_axisDirections[(Tt-1)%_axisDirections.length];this._blur(lt,Tt-1,Tt,Et,Ct)}dt.autoClear=vt}_blur(lt,dt,vt,Tt,Et){const Ct=this._pingPongRenderTarget;this._halfBlur(lt,Ct,dt,vt,Tt,"latitudinal",Et),this._halfBlur(Ct,lt,vt,vt,Tt,"longitudinal",Et)}_halfBlur(lt,dt,vt,Tt,Et,Ct,Rt){const kt=this._renderer,Dt=this._blurMaterial;Ct!=="latitudinal"&&Ct!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const Bt=3,Ft=new Mesh(this._lodPlanes[Tt],Dt),Ut=Dt.uniforms,Zt=this._sizeLods[vt]-1,Kt=isFinite(Et)?Math.PI/(2*Zt):2*Math.PI/(2*MAX_SAMPLES-1),ln=Et/Kt,hn=isFinite(Et)?1+Math.floor(Bt*ln):MAX_SAMPLES;hn>MAX_SAMPLES&&console.warn(`sigmaRadians, ${Et}, is too large and will clip, as it requested ${hn} samples when the maximum is set to ${MAX_SAMPLES}`);const dn=[];let pn=0;for(let An=0;An<MAX_SAMPLES;++An){const Tn=An/ln,In=Math.exp(-Tn*Tn/2);dn.push(In),An===0?pn+=In:An<hn&&(pn+=2*In)}for(let An=0;An<dn.length;An++)dn[An]=dn[An]/pn;Ut.envMap.value=lt.texture,Ut.samples.value=hn,Ut.weights.value=dn,Ut.latitudinal.value=Ct==="latitudinal",Rt&&(Ut.poleAxis.value=Rt);const{_lodMax:mn}=this;Ut.dTheta.value=Kt,Ut.mipInt.value=mn-vt;const On=this._sizeLods[Tt],bn=3*On*(Tt>mn-LOD_MIN?Tt-mn+LOD_MIN:0),En=4*(this._cubeSize-On);_setViewport(dt,bn,En,3*On,2*On),kt.setRenderTarget(dt),kt.render(Ft,_flatCamera)}}function _createPlanes(ft){const lt=[],dt=[],vt=[];let Tt=ft;const Et=ft-LOD_MIN+1+EXTRA_LOD_SIGMA.length;for(let Ct=0;Ct<Et;Ct++){const Rt=Math.pow(2,Tt);dt.push(Rt);let kt=1/Rt;Ct>ft-LOD_MIN?kt=EXTRA_LOD_SIGMA[Ct-ft+LOD_MIN-1]:Ct===0&&(kt=0),vt.push(kt);const Dt=1/(Rt-2),Bt=-Dt,Ft=1+Dt,Ut=[Bt,Bt,Ft,Bt,Ft,Ft,Bt,Bt,Ft,Ft,Bt,Ft],Zt=6,Kt=6,ln=3,hn=2,dn=1,pn=new Float32Array(ln*Kt*Zt),mn=new Float32Array(hn*Kt*Zt),On=new Float32Array(dn*Kt*Zt);for(let En=0;En<Zt;En++){const An=En%3*2/3-1,Tn=En>2?0:-1,In=[An,Tn,0,An+2/3,Tn,0,An+2/3,Tn+1,0,An,Tn,0,An+2/3,Tn+1,0,An,Tn+1,0];pn.set(In,ln*Kt*En),mn.set(Ut,hn*Kt*En);const Rn=[En,En,En,En,En,En];On.set(Rn,dn*Kt*En)}const bn=new BufferGeometry;bn.setAttribute("position",new BufferAttribute(pn,ln)),bn.setAttribute("uv",new BufferAttribute(mn,hn)),bn.setAttribute("faceIndex",new BufferAttribute(On,dn)),lt.push(bn),Tt>LOD_MIN&&Tt--}return{lodPlanes:lt,sizeLods:dt,sigmas:vt}}function _createRenderTarget(ft,lt,dt){const vt=new WebGLRenderTarget(ft,lt,dt);return vt.texture.mapping=CubeUVReflectionMapping,vt.texture.name="PMREM.cubeUv",vt.scissorTest=!0,vt}function _setViewport(ft,lt,dt,vt,Tt){ft.viewport.set(lt,dt,vt,Tt),ft.scissor.set(lt,dt,vt,Tt)}function _getBlurShader(ft,lt,dt){const vt=new Float32Array(MAX_SAMPLES),Tt=new Vector3(0,1,0);return new ShaderMaterial({name:"SphericalGaussianBlur",defines:{n:MAX_SAMPLES,CUBEUV_TEXEL_WIDTH:1/lt,CUBEUV_TEXEL_HEIGHT:1/dt,CUBEUV_MAX_MIP:`${ft}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:vt},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:Tt}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getEquirectMaterial(){return new ShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCubemapMaterial(){return new ShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCommonVertexShader(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function WebGLCubeUVMaps(ft){let lt=new WeakMap,dt=null;function vt(Rt){if(Rt&&Rt.isTexture){const kt=Rt.mapping,Dt=kt===EquirectangularReflectionMapping||kt===EquirectangularRefractionMapping,Bt=kt===CubeReflectionMapping||kt===CubeRefractionMapping;if(Dt||Bt)if(Rt.isRenderTargetTexture&&Rt.needsPMREMUpdate===!0){Rt.needsPMREMUpdate=!1;let Ft=lt.get(Rt);return dt===null&&(dt=new PMREMGenerator(ft)),Ft=Dt?dt.fromEquirectangular(Rt,Ft):dt.fromCubemap(Rt,Ft),lt.set(Rt,Ft),Ft.texture}else{if(lt.has(Rt))return lt.get(Rt).texture;{const Ft=Rt.image;if(Dt&&Ft&&Ft.height>0||Bt&&Ft&&Tt(Ft)){dt===null&&(dt=new PMREMGenerator(ft));const Ut=Dt?dt.fromEquirectangular(Rt):dt.fromCubemap(Rt);return lt.set(Rt,Ut),Rt.addEventListener("dispose",Et),Ut.texture}else return null}}}return Rt}function Tt(Rt){let kt=0;const Dt=6;for(let Bt=0;Bt<Dt;Bt++)Rt[Bt]!==void 0&&kt++;return kt===Dt}function Et(Rt){const kt=Rt.target;kt.removeEventListener("dispose",Et);const Dt=lt.get(kt);Dt!==void 0&&(lt.delete(kt),Dt.dispose())}function Ct(){lt=new WeakMap,dt!==null&&(dt.dispose(),dt=null)}return{get:vt,dispose:Ct}}function WebGLExtensions(ft){const lt={};function dt(vt){if(lt[vt]!==void 0)return lt[vt];let Tt;switch(vt){case"WEBGL_depth_texture":Tt=ft.getExtension("WEBGL_depth_texture")||ft.getExtension("MOZ_WEBGL_depth_texture")||ft.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":Tt=ft.getExtension("EXT_texture_filter_anisotropic")||ft.getExtension("MOZ_EXT_texture_filter_anisotropic")||ft.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":Tt=ft.getExtension("WEBGL_compressed_texture_s3tc")||ft.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||ft.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":Tt=ft.getExtension("WEBGL_compressed_texture_pvrtc")||ft.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:Tt=ft.getExtension(vt)}return lt[vt]=Tt,Tt}return{has:function(vt){return dt(vt)!==null},init:function(vt){vt.isWebGL2?dt("EXT_color_buffer_float"):(dt("WEBGL_depth_texture"),dt("OES_texture_float"),dt("OES_texture_half_float"),dt("OES_texture_half_float_linear"),dt("OES_standard_derivatives"),dt("OES_element_index_uint"),dt("OES_vertex_array_object"),dt("ANGLE_instanced_arrays")),dt("OES_texture_float_linear"),dt("EXT_color_buffer_half_float"),dt("WEBGL_multisampled_render_to_texture")},get:function(vt){const Tt=dt(vt);return Tt===null&&console.warn("THREE.WebGLRenderer: "+vt+" extension not supported."),Tt}}}function WebGLGeometries(ft,lt,dt,vt){const Tt={},Et=new WeakMap;function Ct(Ft){const Ut=Ft.target;Ut.index!==null&&lt.remove(Ut.index);for(const Kt in Ut.attributes)lt.remove(Ut.attributes[Kt]);Ut.removeEventListener("dispose",Ct),delete Tt[Ut.id];const Zt=Et.get(Ut);Zt&&(lt.remove(Zt),Et.delete(Ut)),vt.releaseStatesOfGeometry(Ut),Ut.isInstancedBufferGeometry===!0&&delete Ut._maxInstanceCount,dt.memory.geometries--}function Rt(Ft,Ut){return Tt[Ut.id]===!0||(Ut.addEventListener("dispose",Ct),Tt[Ut.id]=!0,dt.memory.geometries++),Ut}function kt(Ft){const Ut=Ft.attributes;for(const Kt in Ut)lt.update(Ut[Kt],34962);const Zt=Ft.morphAttributes;for(const Kt in Zt){const ln=Zt[Kt];for(let hn=0,dn=ln.length;hn<dn;hn++)lt.update(ln[hn],34962)}}function Dt(Ft){const Ut=[],Zt=Ft.index,Kt=Ft.attributes.position;let ln=0;if(Zt!==null){const pn=Zt.array;ln=Zt.version;for(let mn=0,On=pn.length;mn<On;mn+=3){const bn=pn[mn+0],En=pn[mn+1],An=pn[mn+2];Ut.push(bn,En,En,An,An,bn)}}else{const pn=Kt.array;ln=Kt.version;for(let mn=0,On=pn.length/3-1;mn<On;mn+=3){const bn=mn+0,En=mn+1,An=mn+2;Ut.push(bn,En,En,An,An,bn)}}const hn=new(arrayNeedsUint32(Ut)?Uint32BufferAttribute:Uint16BufferAttribute)(Ut,1);hn.version=ln;const dn=Et.get(Ft);dn&&lt.remove(dn),Et.set(Ft,hn)}function Bt(Ft){const Ut=Et.get(Ft);if(Ut){const Zt=Ft.index;Zt!==null&&Ut.version<Zt.version&&Dt(Ft)}else Dt(Ft);return Et.get(Ft)}return{get:Rt,update:kt,getWireframeAttribute:Bt}}function WebGLIndexedBufferRenderer(ft,lt,dt,vt){const Tt=vt.isWebGL2;let Et;function Ct(Ut){Et=Ut}let Rt,kt;function Dt(Ut){Rt=Ut.type,kt=Ut.bytesPerElement}function Bt(Ut,Zt){ft.drawElements(Et,Zt,Rt,Ut*kt),dt.update(Zt,Et,1)}function Ft(Ut,Zt,Kt){if(Kt===0)return;let ln,hn;if(Tt)ln=ft,hn="drawElementsInstanced";else if(ln=lt.get("ANGLE_instanced_arrays"),hn="drawElementsInstancedANGLE",ln===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}ln[hn](Et,Zt,Rt,Ut*kt,Kt),dt.update(Zt,Et,Kt)}this.setMode=Ct,this.setIndex=Dt,this.render=Bt,this.renderInstances=Ft}function WebGLInfo(ft){const lt={geometries:0,textures:0},dt={frame:0,calls:0,triangles:0,points:0,lines:0};function vt(Et,Ct,Rt){switch(dt.calls++,Ct){case 4:dt.triangles+=Rt*(Et/3);break;case 1:dt.lines+=Rt*(Et/2);break;case 3:dt.lines+=Rt*(Et-1);break;case 2:dt.lines+=Rt*Et;break;case 0:dt.points+=Rt*Et;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",Ct);break}}function Tt(){dt.frame++,dt.calls=0,dt.triangles=0,dt.points=0,dt.lines=0}return{memory:lt,render:dt,programs:null,autoReset:!0,reset:Tt,update:vt}}function numericalSort(ft,lt){return ft[0]-lt[0]}function absNumericalSort(ft,lt){return Math.abs(lt[1])-Math.abs(ft[1])}function WebGLMorphtargets(ft,lt,dt){const vt={},Tt=new Float32Array(8),Et=new WeakMap,Ct=new Vector4,Rt=[];for(let Dt=0;Dt<8;Dt++)Rt[Dt]=[Dt,0];function kt(Dt,Bt,Ft){const Ut=Dt.morphTargetInfluences;if(lt.isWebGL2===!0){const Kt=Bt.morphAttributes.position||Bt.morphAttributes.normal||Bt.morphAttributes.color,ln=Kt!==void 0?Kt.length:0;let hn=Et.get(Bt);if(hn===void 0||hn.count!==ln){let Kn=function(){Hn.dispose(),Et.delete(Bt),Bt.removeEventListener("dispose",Kn)};var Zt=Kn;hn!==void 0&&hn.texture.dispose();const mn=Bt.morphAttributes.position!==void 0,On=Bt.morphAttributes.normal!==void 0,bn=Bt.morphAttributes.color!==void 0,En=Bt.morphAttributes.position||[],An=Bt.morphAttributes.normal||[],Tn=Bt.morphAttributes.color||[];let In=0;mn===!0&&(In=1),On===!0&&(In=2),bn===!0&&(In=3);let Rn=Bt.attributes.position.count*In,Dn=1;Rn>lt.maxTextureSize&&(Dn=Math.ceil(Rn/lt.maxTextureSize),Rn=lt.maxTextureSize);const Bn=new Float32Array(Rn*Dn*4*ln),Hn=new DataArrayTexture(Bn,Rn,Dn,ln);Hn.type=FloatType,Hn.needsUpdate=!0;const jn=In*4;for(let zn=0;zn<ln;zn++){const lr=En[zn],Ln=An[zn],Vn=Tn[zn],Wn=Rn*Dn*4*zn;for(let sr=0;sr<lr.count;sr++){const Mn=sr*jn;mn===!0&&(Ct.fromBufferAttribute(lr,sr),Bn[Wn+Mn+0]=Ct.x,Bn[Wn+Mn+1]=Ct.y,Bn[Wn+Mn+2]=Ct.z,Bn[Wn+Mn+3]=0),On===!0&&(Ct.fromBufferAttribute(Ln,sr),Bn[Wn+Mn+4]=Ct.x,Bn[Wn+Mn+5]=Ct.y,Bn[Wn+Mn+6]=Ct.z,Bn[Wn+Mn+7]=0),bn===!0&&(Ct.fromBufferAttribute(Vn,sr),Bn[Wn+Mn+8]=Ct.x,Bn[Wn+Mn+9]=Ct.y,Bn[Wn+Mn+10]=Ct.z,Bn[Wn+Mn+11]=Vn.itemSize===4?Ct.w:1)}}hn={count:ln,texture:Hn,size:new Vector2(Rn,Dn)},Et.set(Bt,hn),Bt.addEventListener("dispose",Kn)}let dn=0;for(let mn=0;mn<Ut.length;mn++)dn+=Ut[mn];const pn=Bt.morphTargetsRelative?1:1-dn;Ft.getUniforms().setValue(ft,"morphTargetBaseInfluence",pn),Ft.getUniforms().setValue(ft,"morphTargetInfluences",Ut),Ft.getUniforms().setValue(ft,"morphTargetsTexture",hn.texture,dt),Ft.getUniforms().setValue(ft,"morphTargetsTextureSize",hn.size)}else{const Kt=Ut===void 0?0:Ut.length;let ln=vt[Bt.id];if(ln===void 0||ln.length!==Kt){ln=[];for(let On=0;On<Kt;On++)ln[On]=[On,0];vt[Bt.id]=ln}for(let On=0;On<Kt;On++){const bn=ln[On];bn[0]=On,bn[1]=Ut[On]}ln.sort(absNumericalSort);for(let On=0;On<8;On++)On<Kt&&ln[On][1]?(Rt[On][0]=ln[On][0],Rt[On][1]=ln[On][1]):(Rt[On][0]=Number.MAX_SAFE_INTEGER,Rt[On][1]=0);Rt.sort(numericalSort);const hn=Bt.morphAttributes.position,dn=Bt.morphAttributes.normal;let pn=0;for(let On=0;On<8;On++){const bn=Rt[On],En=bn[0],An=bn[1];En!==Number.MAX_SAFE_INTEGER&&An?(hn&&Bt.getAttribute("morphTarget"+On)!==hn[En]&&Bt.setAttribute("morphTarget"+On,hn[En]),dn&&Bt.getAttribute("morphNormal"+On)!==dn[En]&&Bt.setAttribute("morphNormal"+On,dn[En]),Tt[On]=An,pn+=An):(hn&&Bt.hasAttribute("morphTarget"+On)===!0&&Bt.deleteAttribute("morphTarget"+On),dn&&Bt.hasAttribute("morphNormal"+On)===!0&&Bt.deleteAttribute("morphNormal"+On),Tt[On]=0)}const mn=Bt.morphTargetsRelative?1:1-pn;Ft.getUniforms().setValue(ft,"morphTargetBaseInfluence",mn),Ft.getUniforms().setValue(ft,"morphTargetInfluences",Tt)}}return{update:kt}}function WebGLObjects(ft,lt,dt,vt){let Tt=new WeakMap;function Et(kt){const Dt=vt.render.frame,Bt=kt.geometry,Ft=lt.get(kt,Bt);return Tt.get(Ft)!==Dt&&(lt.update(Ft),Tt.set(Ft,Dt)),kt.isInstancedMesh&&(kt.hasEventListener("dispose",Rt)===!1&&kt.addEventListener("dispose",Rt),dt.update(kt.instanceMatrix,34962),kt.instanceColor!==null&&dt.update(kt.instanceColor,34962)),Ft}function Ct(){Tt=new WeakMap}function Rt(kt){const Dt=kt.target;Dt.removeEventListener("dispose",Rt),dt.remove(Dt.instanceMatrix),Dt.instanceColor!==null&&dt.remove(Dt.instanceColor)}return{update:Et,dispose:Ct}}const emptyTexture=new Texture,emptyArrayTexture=new DataArrayTexture,empty3dTexture=new Data3DTexture,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten$2(ft,lt,dt){const vt=ft[0];if(vt<=0||vt>0)return ft;const Tt=lt*dt;let Et=arrayCacheF32[Tt];if(Et===void 0&&(Et=new Float32Array(Tt),arrayCacheF32[Tt]=Et),lt!==0){vt.toArray(Et,0);for(let Ct=1,Rt=0;Ct!==lt;++Ct)Rt+=dt,ft[Ct].toArray(Et,Rt)}return Et}function arraysEqual(ft,lt){if(ft.length!==lt.length)return!1;for(let dt=0,vt=ft.length;dt<vt;dt++)if(ft[dt]!==lt[dt])return!1;return!0}function copyArray(ft,lt){for(let dt=0,vt=lt.length;dt<vt;dt++)ft[dt]=lt[dt]}function allocTexUnits(ft,lt){let dt=arrayCacheI32[lt];dt===void 0&&(dt=new Int32Array(lt),arrayCacheI32[lt]=dt);for(let vt=0;vt!==lt;++vt)dt[vt]=ft.allocateTextureUnit();return dt}function setValueV1f(ft,lt){const dt=this.cache;dt[0]!==lt&&(ft.uniform1f(this.addr,lt),dt[0]=lt)}function setValueV2f(ft,lt){const dt=this.cache;if(lt.x!==void 0)(dt[0]!==lt.x||dt[1]!==lt.y)&&(ft.uniform2f(this.addr,lt.x,lt.y),dt[0]=lt.x,dt[1]=lt.y);else{if(arraysEqual(dt,lt))return;ft.uniform2fv(this.addr,lt),copyArray(dt,lt)}}function setValueV3f(ft,lt){const dt=this.cache;if(lt.x!==void 0)(dt[0]!==lt.x||dt[1]!==lt.y||dt[2]!==lt.z)&&(ft.uniform3f(this.addr,lt.x,lt.y,lt.z),dt[0]=lt.x,dt[1]=lt.y,dt[2]=lt.z);else if(lt.r!==void 0)(dt[0]!==lt.r||dt[1]!==lt.g||dt[2]!==lt.b)&&(ft.uniform3f(this.addr,lt.r,lt.g,lt.b),dt[0]=lt.r,dt[1]=lt.g,dt[2]=lt.b);else{if(arraysEqual(dt,lt))return;ft.uniform3fv(this.addr,lt),copyArray(dt,lt)}}function setValueV4f(ft,lt){const dt=this.cache;if(lt.x!==void 0)(dt[0]!==lt.x||dt[1]!==lt.y||dt[2]!==lt.z||dt[3]!==lt.w)&&(ft.uniform4f(this.addr,lt.x,lt.y,lt.z,lt.w),dt[0]=lt.x,dt[1]=lt.y,dt[2]=lt.z,dt[3]=lt.w);else{if(arraysEqual(dt,lt))return;ft.uniform4fv(this.addr,lt),copyArray(dt,lt)}}function setValueM2(ft,lt){const dt=this.cache,vt=lt.elements;if(vt===void 0){if(arraysEqual(dt,lt))return;ft.uniformMatrix2fv(this.addr,!1,lt),copyArray(dt,lt)}else{if(arraysEqual(dt,vt))return;mat2array.set(vt),ft.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(dt,vt)}}function setValueM3(ft,lt){const dt=this.cache,vt=lt.elements;if(vt===void 0){if(arraysEqual(dt,lt))return;ft.uniformMatrix3fv(this.addr,!1,lt),copyArray(dt,lt)}else{if(arraysEqual(dt,vt))return;mat3array.set(vt),ft.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(dt,vt)}}function setValueM4(ft,lt){const dt=this.cache,vt=lt.elements;if(vt===void 0){if(arraysEqual(dt,lt))return;ft.uniformMatrix4fv(this.addr,!1,lt),copyArray(dt,lt)}else{if(arraysEqual(dt,vt))return;mat4array.set(vt),ft.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(dt,vt)}}function setValueV1i(ft,lt){const dt=this.cache;dt[0]!==lt&&(ft.uniform1i(this.addr,lt),dt[0]=lt)}function setValueV2i(ft,lt){const dt=this.cache;if(lt.x!==void 0)(dt[0]!==lt.x||dt[1]!==lt.y)&&(ft.uniform2i(this.addr,lt.x,lt.y),dt[0]=lt.x,dt[1]=lt.y);else{if(arraysEqual(dt,lt))return;ft.uniform2iv(this.addr,lt),copyArray(dt,lt)}}function setValueV3i(ft,lt){const dt=this.cache;if(lt.x!==void 0)(dt[0]!==lt.x||dt[1]!==lt.y||dt[2]!==lt.z)&&(ft.uniform3i(this.addr,lt.x,lt.y,lt.z),dt[0]=lt.x,dt[1]=lt.y,dt[2]=lt.z);else{if(arraysEqual(dt,lt))return;ft.uniform3iv(this.addr,lt),copyArray(dt,lt)}}function setValueV4i(ft,lt){const dt=this.cache;if(lt.x!==void 0)(dt[0]!==lt.x||dt[1]!==lt.y||dt[2]!==lt.z||dt[3]!==lt.w)&&(ft.uniform4i(this.addr,lt.x,lt.y,lt.z,lt.w),dt[0]=lt.x,dt[1]=lt.y,dt[2]=lt.z,dt[3]=lt.w);else{if(arraysEqual(dt,lt))return;ft.uniform4iv(this.addr,lt),copyArray(dt,lt)}}function setValueV1ui(ft,lt){const dt=this.cache;dt[0]!==lt&&(ft.uniform1ui(this.addr,lt),dt[0]=lt)}function setValueV2ui(ft,lt){const dt=this.cache;if(lt.x!==void 0)(dt[0]!==lt.x||dt[1]!==lt.y)&&(ft.uniform2ui(this.addr,lt.x,lt.y),dt[0]=lt.x,dt[1]=lt.y);else{if(arraysEqual(dt,lt))return;ft.uniform2uiv(this.addr,lt),copyArray(dt,lt)}}function setValueV3ui(ft,lt){const dt=this.cache;if(lt.x!==void 0)(dt[0]!==lt.x||dt[1]!==lt.y||dt[2]!==lt.z)&&(ft.uniform3ui(this.addr,lt.x,lt.y,lt.z),dt[0]=lt.x,dt[1]=lt.y,dt[2]=lt.z);else{if(arraysEqual(dt,lt))return;ft.uniform3uiv(this.addr,lt),copyArray(dt,lt)}}function setValueV4ui(ft,lt){const dt=this.cache;if(lt.x!==void 0)(dt[0]!==lt.x||dt[1]!==lt.y||dt[2]!==lt.z||dt[3]!==lt.w)&&(ft.uniform4ui(this.addr,lt.x,lt.y,lt.z,lt.w),dt[0]=lt.x,dt[1]=lt.y,dt[2]=lt.z,dt[3]=lt.w);else{if(arraysEqual(dt,lt))return;ft.uniform4uiv(this.addr,lt),copyArray(dt,lt)}}function setValueT1(ft,lt,dt){const vt=this.cache,Tt=dt.allocateTextureUnit();vt[0]!==Tt&&(ft.uniform1i(this.addr,Tt),vt[0]=Tt),dt.setTexture2D(lt||emptyTexture,Tt)}function setValueT3D1(ft,lt,dt){const vt=this.cache,Tt=dt.allocateTextureUnit();vt[0]!==Tt&&(ft.uniform1i(this.addr,Tt),vt[0]=Tt),dt.setTexture3D(lt||empty3dTexture,Tt)}function setValueT6(ft,lt,dt){const vt=this.cache,Tt=dt.allocateTextureUnit();vt[0]!==Tt&&(ft.uniform1i(this.addr,Tt),vt[0]=Tt),dt.setTextureCube(lt||emptyCubeTexture,Tt)}function setValueT2DArray1(ft,lt,dt){const vt=this.cache,Tt=dt.allocateTextureUnit();vt[0]!==Tt&&(ft.uniform1i(this.addr,Tt),vt[0]=Tt),dt.setTexture2DArray(lt||emptyArrayTexture,Tt)}function getSingularSetter(ft){switch(ft){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(ft,lt){ft.uniform1fv(this.addr,lt)}function setValueV2fArray(ft,lt){const dt=flatten$2(lt,this.size,2);ft.uniform2fv(this.addr,dt)}function setValueV3fArray(ft,lt){const dt=flatten$2(lt,this.size,3);ft.uniform3fv(this.addr,dt)}function setValueV4fArray(ft,lt){const dt=flatten$2(lt,this.size,4);ft.uniform4fv(this.addr,dt)}function setValueM2Array(ft,lt){const dt=flatten$2(lt,this.size,4);ft.uniformMatrix2fv(this.addr,!1,dt)}function setValueM3Array(ft,lt){const dt=flatten$2(lt,this.size,9);ft.uniformMatrix3fv(this.addr,!1,dt)}function setValueM4Array(ft,lt){const dt=flatten$2(lt,this.size,16);ft.uniformMatrix4fv(this.addr,!1,dt)}function setValueV1iArray(ft,lt){ft.uniform1iv(this.addr,lt)}function setValueV2iArray(ft,lt){ft.uniform2iv(this.addr,lt)}function setValueV3iArray(ft,lt){ft.uniform3iv(this.addr,lt)}function setValueV4iArray(ft,lt){ft.uniform4iv(this.addr,lt)}function setValueV1uiArray(ft,lt){ft.uniform1uiv(this.addr,lt)}function setValueV2uiArray(ft,lt){ft.uniform2uiv(this.addr,lt)}function setValueV3uiArray(ft,lt){ft.uniform3uiv(this.addr,lt)}function setValueV4uiArray(ft,lt){ft.uniform4uiv(this.addr,lt)}function setValueT1Array(ft,lt,dt){const vt=this.cache,Tt=lt.length,Et=allocTexUnits(dt,Tt);arraysEqual(vt,Et)||(ft.uniform1iv(this.addr,Et),copyArray(vt,Et));for(let Ct=0;Ct!==Tt;++Ct)dt.setTexture2D(lt[Ct]||emptyTexture,Et[Ct])}function setValueT3DArray(ft,lt,dt){const vt=this.cache,Tt=lt.length,Et=allocTexUnits(dt,Tt);arraysEqual(vt,Et)||(ft.uniform1iv(this.addr,Et),copyArray(vt,Et));for(let Ct=0;Ct!==Tt;++Ct)dt.setTexture3D(lt[Ct]||empty3dTexture,Et[Ct])}function setValueT6Array(ft,lt,dt){const vt=this.cache,Tt=lt.length,Et=allocTexUnits(dt,Tt);arraysEqual(vt,Et)||(ft.uniform1iv(this.addr,Et),copyArray(vt,Et));for(let Ct=0;Ct!==Tt;++Ct)dt.setTextureCube(lt[Ct]||emptyCubeTexture,Et[Ct])}function setValueT2DArrayArray(ft,lt,dt){const vt=this.cache,Tt=lt.length,Et=allocTexUnits(dt,Tt);arraysEqual(vt,Et)||(ft.uniform1iv(this.addr,Et),copyArray(vt,Et));for(let Ct=0;Ct!==Tt;++Ct)dt.setTexture2DArray(lt[Ct]||emptyArrayTexture,Et[Ct])}function getPureArraySetter(ft){switch(ft){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35679:case 36299:case 36307:return setValueT3DArray;case 35680:case 36300:case 36308:case 36293:return setValueT6Array;case 36289:case 36303:case 36311:case 36292:return setValueT2DArrayArray}}class SingleUniform{constructor(lt,dt,vt){this.id=lt,this.addr=vt,this.cache=[],this.setValue=getSingularSetter(dt.type)}}class PureArrayUniform{constructor(lt,dt,vt){this.id=lt,this.addr=vt,this.cache=[],this.size=dt.size,this.setValue=getPureArraySetter(dt.type)}}class StructuredUniform{constructor(lt){this.id=lt,this.seq=[],this.map={}}setValue(lt,dt,vt){const Tt=this.seq;for(let Et=0,Ct=Tt.length;Et!==Ct;++Et){const Rt=Tt[Et];Rt.setValue(lt,dt[Rt.id],vt)}}}const RePathPart=/(\w+)(\])?(\[|\.)?/g;function addUniform(ft,lt){ft.seq.push(lt),ft.map[lt.id]=lt}function parseUniform(ft,lt,dt){const vt=ft.name,Tt=vt.length;for(RePathPart.lastIndex=0;;){const Et=RePathPart.exec(vt),Ct=RePathPart.lastIndex;let Rt=Et[1];const kt=Et[2]==="]",Dt=Et[3];if(kt&&(Rt=Rt|0),Dt===void 0||Dt==="["&&Ct+2===Tt){addUniform(dt,Dt===void 0?new SingleUniform(Rt,ft,lt):new PureArrayUniform(Rt,ft,lt));break}else{let Ft=dt.map[Rt];Ft===void 0&&(Ft=new StructuredUniform(Rt),addUniform(dt,Ft)),dt=Ft}}}class WebGLUniforms{constructor(lt,dt){this.seq=[],this.map={};const vt=lt.getProgramParameter(dt,35718);for(let Tt=0;Tt<vt;++Tt){const Et=lt.getActiveUniform(dt,Tt),Ct=lt.getUniformLocation(dt,Et.name);parseUniform(Et,Ct,this)}}setValue(lt,dt,vt,Tt){const Et=this.map[dt];Et!==void 0&&Et.setValue(lt,vt,Tt)}setOptional(lt,dt,vt){const Tt=dt[vt];Tt!==void 0&&this.setValue(lt,vt,Tt)}static upload(lt,dt,vt,Tt){for(let Et=0,Ct=dt.length;Et!==Ct;++Et){const Rt=dt[Et],kt=vt[Rt.id];kt.needsUpdate!==!1&&Rt.setValue(lt,kt.value,Tt)}}static seqWithValue(lt,dt){const vt=[];for(let Tt=0,Et=lt.length;Tt!==Et;++Tt){const Ct=lt[Tt];Ct.id in dt&&vt.push(Ct)}return vt}}function WebGLShader(ft,lt,dt){const vt=ft.createShader(lt);return ft.shaderSource(vt,dt),ft.compileShader(vt),vt}let programIdCount=0;function handleSource(ft,lt){const dt=ft.split(`
`),vt=[],Tt=Math.max(lt-6,0),Et=Math.min(lt+6,dt.length);for(let Ct=Tt;Ct<Et;Ct++){const Rt=Ct+1;vt.push(`${Rt===lt?">":" "} ${Rt}: ${dt[Ct]}`)}return vt.join(`
`)}function getEncodingComponents(ft){switch(ft){case LinearEncoding:return["Linear","( value )"];case sRGBEncoding:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",ft),["Linear","( value )"]}}function getShaderErrors(ft,lt,dt){const vt=ft.getShaderParameter(lt,35713),Tt=ft.getShaderInfoLog(lt).trim();if(vt&&Tt==="")return"";const Et=/ERROR: 0:(\d+)/.exec(Tt);if(Et){const Ct=parseInt(Et[1]);return dt.toUpperCase()+`

`+Tt+`

`+handleSource(ft.getShaderSource(lt),Ct)}else return Tt}function getTexelEncodingFunction(ft,lt){const dt=getEncodingComponents(lt);return"vec4 "+ft+"( vec4 value ) { return LinearTo"+dt[0]+dt[1]+"; }"}function getToneMappingFunction(ft,lt){let dt;switch(lt){case LinearToneMapping:dt="Linear";break;case ReinhardToneMapping:dt="Reinhard";break;case CineonToneMapping:dt="OptimizedCineon";break;case ACESFilmicToneMapping:dt="ACESFilmic";break;case CustomToneMapping:dt="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",lt),dt="Linear"}return"vec3 "+ft+"( vec3 color ) { return "+dt+"ToneMapping( color ); }"}function generateExtensions(ft){return[ft.extensionDerivatives||ft.envMapCubeUVHeight||ft.bumpMap||ft.tangentSpaceNormalMap||ft.clearcoatNormalMap||ft.flatShading||ft.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(ft.extensionFragDepth||ft.logarithmicDepthBuffer)&&ft.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",ft.extensionDrawBuffers&&ft.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(ft.extensionShaderTextureLOD||ft.envMap||ft.transmission)&&ft.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(filterEmptyLine).join(`
`)}function generateDefines(ft){const lt=[];for(const dt in ft){const vt=ft[dt];vt!==!1&&lt.push("#define "+dt+" "+vt)}return lt.join(`
`)}function fetchAttributeLocations(ft,lt){const dt={},vt=ft.getProgramParameter(lt,35721);for(let Tt=0;Tt<vt;Tt++){const Et=ft.getActiveAttrib(lt,Tt),Ct=Et.name;let Rt=1;Et.type===35674&&(Rt=2),Et.type===35675&&(Rt=3),Et.type===35676&&(Rt=4),dt[Ct]={type:Et.type,location:ft.getAttribLocation(lt,Ct),locationSize:Rt}}return dt}function filterEmptyLine(ft){return ft!==""}function replaceLightNums(ft,lt){const dt=lt.numSpotLightShadows+lt.numSpotLightMaps-lt.numSpotLightShadowsWithMaps;return ft.replace(/NUM_DIR_LIGHTS/g,lt.numDirLights).replace(/NUM_SPOT_LIGHTS/g,lt.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,lt.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,dt).replace(/NUM_RECT_AREA_LIGHTS/g,lt.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,lt.numPointLights).replace(/NUM_HEMI_LIGHTS/g,lt.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,lt.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,lt.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,lt.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,lt.numPointLightShadows)}function replaceClippingPlaneNums(ft,lt){return ft.replace(/NUM_CLIPPING_PLANES/g,lt.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,lt.numClippingPlanes-lt.numClipIntersection)}const includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(ft){return ft.replace(includePattern,includeReplacer)}function includeReplacer(ft,lt){const dt=ShaderChunk[lt];if(dt===void 0)throw new Error("Can not resolve #include <"+lt+">");return resolveIncludes(dt)}const unrollLoopPattern=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(ft){return ft.replace(unrollLoopPattern,loopReplacer)}function loopReplacer(ft,lt,dt,vt){let Tt="";for(let Et=parseInt(lt);Et<parseInt(dt);Et++)Tt+=vt.replace(/\[\s*i\s*\]/g,"[ "+Et+" ]").replace(/UNROLLED_LOOP_INDEX/g,Et);return Tt}function generatePrecision(ft){let lt="precision "+ft.precision+` float;
precision `+ft.precision+" int;";return ft.precision==="highp"?lt+=`
#define HIGH_PRECISION`:ft.precision==="mediump"?lt+=`
#define MEDIUM_PRECISION`:ft.precision==="lowp"&&(lt+=`
#define LOW_PRECISION`),lt}function generateShadowMapTypeDefine(ft){let lt="SHADOWMAP_TYPE_BASIC";return ft.shadowMapType===PCFShadowMap?lt="SHADOWMAP_TYPE_PCF":ft.shadowMapType===PCFSoftShadowMap?lt="SHADOWMAP_TYPE_PCF_SOFT":ft.shadowMapType===VSMShadowMap&&(lt="SHADOWMAP_TYPE_VSM"),lt}function generateEnvMapTypeDefine(ft){let lt="ENVMAP_TYPE_CUBE";if(ft.envMap)switch(ft.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:lt="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:lt="ENVMAP_TYPE_CUBE_UV";break}return lt}function generateEnvMapModeDefine(ft){let lt="ENVMAP_MODE_REFLECTION";if(ft.envMap)switch(ft.envMapMode){case CubeRefractionMapping:lt="ENVMAP_MODE_REFRACTION";break}return lt}function generateEnvMapBlendingDefine(ft){let lt="ENVMAP_BLENDING_NONE";if(ft.envMap)switch(ft.combine){case MultiplyOperation:lt="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:lt="ENVMAP_BLENDING_MIX";break;case AddOperation:lt="ENVMAP_BLENDING_ADD";break}return lt}function generateCubeUVSize(ft){const lt=ft.envMapCubeUVHeight;if(lt===null)return null;const dt=Math.log2(lt)-2,vt=1/lt;return{texelWidth:1/(3*Math.max(Math.pow(2,dt),7*16)),texelHeight:vt,maxMip:dt}}function WebGLProgram(ft,lt,dt,vt){const Tt=ft.getContext(),Et=dt.defines;let Ct=dt.vertexShader,Rt=dt.fragmentShader;const kt=generateShadowMapTypeDefine(dt),Dt=generateEnvMapTypeDefine(dt),Bt=generateEnvMapModeDefine(dt),Ft=generateEnvMapBlendingDefine(dt),Ut=generateCubeUVSize(dt),Zt=dt.isWebGL2?"":generateExtensions(dt),Kt=generateDefines(Et),ln=Tt.createProgram();let hn,dn,pn=dt.glslVersion?"#version "+dt.glslVersion+`
`:"";dt.isRawShaderMaterial?(hn=[Kt].filter(filterEmptyLine).join(`
`),hn.length>0&&(hn+=`
`),dn=[Zt,Kt].filter(filterEmptyLine).join(`
`),dn.length>0&&(dn+=`
`)):(hn=[generatePrecision(dt),"#define SHADER_NAME "+dt.shaderName,Kt,dt.instancing?"#define USE_INSTANCING":"",dt.instancingColor?"#define USE_INSTANCING_COLOR":"",dt.supportsVertexTextures?"#define VERTEX_TEXTURES":"",dt.useFog&&dt.fog?"#define USE_FOG":"",dt.useFog&&dt.fogExp2?"#define FOG_EXP2":"",dt.map?"#define USE_MAP":"",dt.envMap?"#define USE_ENVMAP":"",dt.envMap?"#define "+Bt:"",dt.lightMap?"#define USE_LIGHTMAP":"",dt.aoMap?"#define USE_AOMAP":"",dt.emissiveMap?"#define USE_EMISSIVEMAP":"",dt.bumpMap?"#define USE_BUMPMAP":"",dt.normalMap?"#define USE_NORMALMAP":"",dt.normalMap&&dt.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",dt.normalMap&&dt.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",dt.clearcoatMap?"#define USE_CLEARCOATMAP":"",dt.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",dt.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",dt.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",dt.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",dt.displacementMap&&dt.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",dt.specularMap?"#define USE_SPECULARMAP":"",dt.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",dt.specularColorMap?"#define USE_SPECULARCOLORMAP":"",dt.roughnessMap?"#define USE_ROUGHNESSMAP":"",dt.metalnessMap?"#define USE_METALNESSMAP":"",dt.alphaMap?"#define USE_ALPHAMAP":"",dt.transmission?"#define USE_TRANSMISSION":"",dt.transmissionMap?"#define USE_TRANSMISSIONMAP":"",dt.thicknessMap?"#define USE_THICKNESSMAP":"",dt.sheenColorMap?"#define USE_SHEENCOLORMAP":"",dt.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",dt.vertexTangents?"#define USE_TANGENT":"",dt.vertexColors?"#define USE_COLOR":"",dt.vertexAlphas?"#define USE_COLOR_ALPHA":"",dt.vertexUvs?"#define USE_UV":"",dt.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",dt.flatShading?"#define FLAT_SHADED":"",dt.skinning?"#define USE_SKINNING":"",dt.morphTargets?"#define USE_MORPHTARGETS":"",dt.morphNormals&&dt.flatShading===!1?"#define USE_MORPHNORMALS":"",dt.morphColors&&dt.isWebGL2?"#define USE_MORPHCOLORS":"",dt.morphTargetsCount>0&&dt.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",dt.morphTargetsCount>0&&dt.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+dt.morphTextureStride:"",dt.morphTargetsCount>0&&dt.isWebGL2?"#define MORPHTARGETS_COUNT "+dt.morphTargetsCount:"",dt.doubleSided?"#define DOUBLE_SIDED":"",dt.flipSided?"#define FLIP_SIDED":"",dt.shadowMapEnabled?"#define USE_SHADOWMAP":"",dt.shadowMapEnabled?"#define "+kt:"",dt.sizeAttenuation?"#define USE_SIZEATTENUATION":"",dt.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",dt.logarithmicDepthBuffer&&dt.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),dn=[Zt,generatePrecision(dt),"#define SHADER_NAME "+dt.shaderName,Kt,dt.useFog&&dt.fog?"#define USE_FOG":"",dt.useFog&&dt.fogExp2?"#define FOG_EXP2":"",dt.map?"#define USE_MAP":"",dt.matcap?"#define USE_MATCAP":"",dt.envMap?"#define USE_ENVMAP":"",dt.envMap?"#define "+Dt:"",dt.envMap?"#define "+Bt:"",dt.envMap?"#define "+Ft:"",Ut?"#define CUBEUV_TEXEL_WIDTH "+Ut.texelWidth:"",Ut?"#define CUBEUV_TEXEL_HEIGHT "+Ut.texelHeight:"",Ut?"#define CUBEUV_MAX_MIP "+Ut.maxMip+".0":"",dt.lightMap?"#define USE_LIGHTMAP":"",dt.aoMap?"#define USE_AOMAP":"",dt.emissiveMap?"#define USE_EMISSIVEMAP":"",dt.bumpMap?"#define USE_BUMPMAP":"",dt.normalMap?"#define USE_NORMALMAP":"",dt.normalMap&&dt.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",dt.normalMap&&dt.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",dt.clearcoat?"#define USE_CLEARCOAT":"",dt.clearcoatMap?"#define USE_CLEARCOATMAP":"",dt.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",dt.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",dt.iridescence?"#define USE_IRIDESCENCE":"",dt.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",dt.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",dt.specularMap?"#define USE_SPECULARMAP":"",dt.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",dt.specularColorMap?"#define USE_SPECULARCOLORMAP":"",dt.roughnessMap?"#define USE_ROUGHNESSMAP":"",dt.metalnessMap?"#define USE_METALNESSMAP":"",dt.alphaMap?"#define USE_ALPHAMAP":"",dt.alphaTest?"#define USE_ALPHATEST":"",dt.sheen?"#define USE_SHEEN":"",dt.sheenColorMap?"#define USE_SHEENCOLORMAP":"",dt.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",dt.transmission?"#define USE_TRANSMISSION":"",dt.transmissionMap?"#define USE_TRANSMISSIONMAP":"",dt.thicknessMap?"#define USE_THICKNESSMAP":"",dt.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",dt.vertexTangents?"#define USE_TANGENT":"",dt.vertexColors||dt.instancingColor?"#define USE_COLOR":"",dt.vertexAlphas?"#define USE_COLOR_ALPHA":"",dt.vertexUvs?"#define USE_UV":"",dt.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",dt.gradientMap?"#define USE_GRADIENTMAP":"",dt.flatShading?"#define FLAT_SHADED":"",dt.doubleSided?"#define DOUBLE_SIDED":"",dt.flipSided?"#define FLIP_SIDED":"",dt.shadowMapEnabled?"#define USE_SHADOWMAP":"",dt.shadowMapEnabled?"#define "+kt:"",dt.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",dt.useLegacyLights?"#define LEGACY_LIGHTS":"",dt.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",dt.logarithmicDepthBuffer&&dt.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",dt.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",dt.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",dt.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",dt.toneMapping):"",dt.dithering?"#define DITHERING":"",dt.opaque?"#define OPAQUE":"",ShaderChunk.encodings_pars_fragment,getTexelEncodingFunction("linearToOutputTexel",dt.outputEncoding),dt.useDepthPacking?"#define DEPTH_PACKING "+dt.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),Ct=resolveIncludes(Ct),Ct=replaceLightNums(Ct,dt),Ct=replaceClippingPlaneNums(Ct,dt),Rt=resolveIncludes(Rt),Rt=replaceLightNums(Rt,dt),Rt=replaceClippingPlaneNums(Rt,dt),Ct=unrollLoops(Ct),Rt=unrollLoops(Rt),dt.isWebGL2&&dt.isRawShaderMaterial!==!0&&(pn=`#version 300 es
`,hn=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+hn,dn=["#define varying in",dt.glslVersion===GLSL3?"":"layout(location = 0) out highp vec4 pc_fragColor;",dt.glslVersion===GLSL3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+dn);const mn=pn+hn+Ct,On=pn+dn+Rt,bn=WebGLShader(Tt,35633,mn),En=WebGLShader(Tt,35632,On);if(Tt.attachShader(ln,bn),Tt.attachShader(ln,En),dt.index0AttributeName!==void 0?Tt.bindAttribLocation(ln,0,dt.index0AttributeName):dt.morphTargets===!0&&Tt.bindAttribLocation(ln,0,"position"),Tt.linkProgram(ln),ft.debug.checkShaderErrors){const In=Tt.getProgramInfoLog(ln).trim(),Rn=Tt.getShaderInfoLog(bn).trim(),Dn=Tt.getShaderInfoLog(En).trim();let Bn=!0,Hn=!0;if(Tt.getProgramParameter(ln,35714)===!1){Bn=!1;const jn=getShaderErrors(Tt,bn,"vertex"),Kn=getShaderErrors(Tt,En,"fragment");console.error("THREE.WebGLProgram: Shader Error "+Tt.getError()+" - VALIDATE_STATUS "+Tt.getProgramParameter(ln,35715)+`

Program Info Log: `+In+`
`+jn+`
`+Kn)}else In!==""?console.warn("THREE.WebGLProgram: Program Info Log:",In):(Rn===""||Dn==="")&&(Hn=!1);Hn&&(this.diagnostics={runnable:Bn,programLog:In,vertexShader:{log:Rn,prefix:hn},fragmentShader:{log:Dn,prefix:dn}})}Tt.deleteShader(bn),Tt.deleteShader(En);let An;this.getUniforms=function(){return An===void 0&&(An=new WebGLUniforms(Tt,ln)),An};let Tn;return this.getAttributes=function(){return Tn===void 0&&(Tn=fetchAttributeLocations(Tt,ln)),Tn},this.destroy=function(){vt.releaseStatesOfProgram(this),Tt.deleteProgram(ln),this.program=void 0},this.name=dt.shaderName,this.id=programIdCount++,this.cacheKey=lt,this.usedTimes=1,this.program=ln,this.vertexShader=bn,this.fragmentShader=En,this}let _id=0;class WebGLShaderCache{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(lt){const dt=lt.vertexShader,vt=lt.fragmentShader,Tt=this._getShaderStage(dt),Et=this._getShaderStage(vt),Ct=this._getShaderCacheForMaterial(lt);return Ct.has(Tt)===!1&&(Ct.add(Tt),Tt.usedTimes++),Ct.has(Et)===!1&&(Ct.add(Et),Et.usedTimes++),this}remove(lt){const dt=this.materialCache.get(lt);for(const vt of dt)vt.usedTimes--,vt.usedTimes===0&&this.shaderCache.delete(vt.code);return this.materialCache.delete(lt),this}getVertexShaderID(lt){return this._getShaderStage(lt.vertexShader).id}getFragmentShaderID(lt){return this._getShaderStage(lt.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(lt){const dt=this.materialCache;let vt=dt.get(lt);return vt===void 0&&(vt=new Set,dt.set(lt,vt)),vt}_getShaderStage(lt){const dt=this.shaderCache;let vt=dt.get(lt);return vt===void 0&&(vt=new WebGLShaderStage(lt),dt.set(lt,vt)),vt}}class WebGLShaderStage{constructor(lt){this.id=_id++,this.code=lt,this.usedTimes=0}}function WebGLPrograms(ft,lt,dt,vt,Tt,Et,Ct){const Rt=new Layers$1,kt=new WebGLShaderCache,Dt=[],Bt=Tt.isWebGL2,Ft=Tt.logarithmicDepthBuffer,Ut=Tt.vertexTextures;let Zt=Tt.precision;const Kt={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function ln(Tn,In,Rn,Dn,Bn){const Hn=Dn.fog,jn=Bn.geometry,Kn=Tn.isMeshStandardMaterial?Dn.environment:null,zn=(Tn.isMeshStandardMaterial?dt:lt).get(Tn.envMap||Kn),lr=zn&&zn.mapping===CubeUVReflectionMapping?zn.image.height:null,Ln=Kt[Tn.type];Tn.precision!==null&&(Zt=Tt.getMaxPrecision(Tn.precision),Zt!==Tn.precision&&console.warn("THREE.WebGLProgram.getParameters:",Tn.precision,"not supported, using",Zt,"instead."));const Vn=jn.morphAttributes.position||jn.morphAttributes.normal||jn.morphAttributes.color,Wn=Vn!==void 0?Vn.length:0;let sr=0;jn.morphAttributes.position!==void 0&&(sr=1),jn.morphAttributes.normal!==void 0&&(sr=2),jn.morphAttributes.color!==void 0&&(sr=3);let Mn,ir,mr,tr;if(Ln){const _i=ShaderLib[Ln];Mn=_i.vertexShader,ir=_i.fragmentShader}else Mn=Tn.vertexShader,ir=Tn.fragmentShader,kt.update(Tn),mr=kt.getVertexShaderID(Tn),tr=kt.getFragmentShaderID(Tn);const Dr=ft.getRenderTarget(),Sr=Tn.alphaTest>0,Vr=Tn.clearcoat>0,Jr=Tn.iridescence>0;return{isWebGL2:Bt,shaderID:Ln,shaderName:Tn.type,vertexShader:Mn,fragmentShader:ir,defines:Tn.defines,customVertexShaderID:mr,customFragmentShaderID:tr,isRawShaderMaterial:Tn.isRawShaderMaterial===!0,glslVersion:Tn.glslVersion,precision:Zt,instancing:Bn.isInstancedMesh===!0,instancingColor:Bn.isInstancedMesh===!0&&Bn.instanceColor!==null,supportsVertexTextures:Ut,outputEncoding:Dr===null?ft.outputEncoding:Dr.isXRRenderTarget===!0?Dr.texture.encoding:LinearEncoding,map:!!Tn.map,matcap:!!Tn.matcap,envMap:!!zn,envMapMode:zn&&zn.mapping,envMapCubeUVHeight:lr,lightMap:!!Tn.lightMap,aoMap:!!Tn.aoMap,emissiveMap:!!Tn.emissiveMap,bumpMap:!!Tn.bumpMap,normalMap:!!Tn.normalMap,objectSpaceNormalMap:Tn.normalMapType===ObjectSpaceNormalMap,tangentSpaceNormalMap:Tn.normalMapType===TangentSpaceNormalMap,decodeVideoTexture:!!Tn.map&&Tn.map.isVideoTexture===!0&&Tn.map.encoding===sRGBEncoding,clearcoat:Vr,clearcoatMap:Vr&&!!Tn.clearcoatMap,clearcoatRoughnessMap:Vr&&!!Tn.clearcoatRoughnessMap,clearcoatNormalMap:Vr&&!!Tn.clearcoatNormalMap,iridescence:Jr,iridescenceMap:Jr&&!!Tn.iridescenceMap,iridescenceThicknessMap:Jr&&!!Tn.iridescenceThicknessMap,displacementMap:!!Tn.displacementMap,roughnessMap:!!Tn.roughnessMap,metalnessMap:!!Tn.metalnessMap,specularMap:!!Tn.specularMap,specularIntensityMap:!!Tn.specularIntensityMap,specularColorMap:!!Tn.specularColorMap,opaque:Tn.transparent===!1&&Tn.blending===NormalBlending,alphaMap:!!Tn.alphaMap,alphaTest:Sr,gradientMap:!!Tn.gradientMap,sheen:Tn.sheen>0,sheenColorMap:!!Tn.sheenColorMap,sheenRoughnessMap:!!Tn.sheenRoughnessMap,transmission:Tn.transmission>0,transmissionMap:!!Tn.transmissionMap,thicknessMap:!!Tn.thicknessMap,combine:Tn.combine,vertexTangents:!!Tn.normalMap&&!!jn.attributes.tangent,vertexColors:Tn.vertexColors,vertexAlphas:Tn.vertexColors===!0&&!!jn.attributes.color&&jn.attributes.color.itemSize===4,vertexUvs:!!Tn.map||!!Tn.bumpMap||!!Tn.normalMap||!!Tn.specularMap||!!Tn.alphaMap||!!Tn.emissiveMap||!!Tn.roughnessMap||!!Tn.metalnessMap||!!Tn.clearcoatMap||!!Tn.clearcoatRoughnessMap||!!Tn.clearcoatNormalMap||!!Tn.iridescenceMap||!!Tn.iridescenceThicknessMap||!!Tn.displacementMap||!!Tn.transmissionMap||!!Tn.thicknessMap||!!Tn.specularIntensityMap||!!Tn.specularColorMap||!!Tn.sheenColorMap||!!Tn.sheenRoughnessMap,uvsVertexOnly:!(Tn.map||Tn.bumpMap||Tn.normalMap||Tn.specularMap||Tn.alphaMap||Tn.emissiveMap||Tn.roughnessMap||Tn.metalnessMap||Tn.clearcoatNormalMap||Tn.iridescenceMap||Tn.iridescenceThicknessMap||Tn.transmission>0||Tn.transmissionMap||Tn.thicknessMap||Tn.specularIntensityMap||Tn.specularColorMap||Tn.sheen>0||Tn.sheenColorMap||Tn.sheenRoughnessMap)&&!!Tn.displacementMap,fog:!!Hn,useFog:Tn.fog===!0,fogExp2:Hn&&Hn.isFogExp2,flatShading:!!Tn.flatShading,sizeAttenuation:Tn.sizeAttenuation,logarithmicDepthBuffer:Ft,skinning:Bn.isSkinnedMesh===!0,morphTargets:jn.morphAttributes.position!==void 0,morphNormals:jn.morphAttributes.normal!==void 0,morphColors:jn.morphAttributes.color!==void 0,morphTargetsCount:Wn,morphTextureStride:sr,numDirLights:In.directional.length,numPointLights:In.point.length,numSpotLights:In.spot.length,numSpotLightMaps:In.spotLightMap.length,numRectAreaLights:In.rectArea.length,numHemiLights:In.hemi.length,numDirLightShadows:In.directionalShadowMap.length,numPointLightShadows:In.pointShadowMap.length,numSpotLightShadows:In.spotShadowMap.length,numSpotLightShadowsWithMaps:In.numSpotLightShadowsWithMaps,numClippingPlanes:Ct.numPlanes,numClipIntersection:Ct.numIntersection,dithering:Tn.dithering,shadowMapEnabled:ft.shadowMap.enabled&&Rn.length>0,shadowMapType:ft.shadowMap.type,toneMapping:Tn.toneMapped?ft.toneMapping:NoToneMapping,useLegacyLights:ft.useLegacyLights,premultipliedAlpha:Tn.premultipliedAlpha,doubleSided:Tn.side===DoubleSide,flipSided:Tn.side===BackSide,useDepthPacking:!!Tn.depthPacking,depthPacking:Tn.depthPacking||0,index0AttributeName:Tn.index0AttributeName,extensionDerivatives:Tn.extensions&&Tn.extensions.derivatives,extensionFragDepth:Tn.extensions&&Tn.extensions.fragDepth,extensionDrawBuffers:Tn.extensions&&Tn.extensions.drawBuffers,extensionShaderTextureLOD:Tn.extensions&&Tn.extensions.shaderTextureLOD,rendererExtensionFragDepth:Bt||vt.has("EXT_frag_depth"),rendererExtensionDrawBuffers:Bt||vt.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:Bt||vt.has("EXT_shader_texture_lod"),customProgramCacheKey:Tn.customProgramCacheKey()}}function hn(Tn){const In=[];if(Tn.shaderID?In.push(Tn.shaderID):(In.push(Tn.customVertexShaderID),In.push(Tn.customFragmentShaderID)),Tn.defines!==void 0)for(const Rn in Tn.defines)In.push(Rn),In.push(Tn.defines[Rn]);return Tn.isRawShaderMaterial===!1&&(dn(In,Tn),pn(In,Tn),In.push(ft.outputEncoding)),In.push(Tn.customProgramCacheKey),In.join()}function dn(Tn,In){Tn.push(In.precision),Tn.push(In.outputEncoding),Tn.push(In.envMapMode),Tn.push(In.envMapCubeUVHeight),Tn.push(In.combine),Tn.push(In.vertexUvs),Tn.push(In.fogExp2),Tn.push(In.sizeAttenuation),Tn.push(In.morphTargetsCount),Tn.push(In.morphAttributeCount),Tn.push(In.numDirLights),Tn.push(In.numPointLights),Tn.push(In.numSpotLights),Tn.push(In.numSpotLightMaps),Tn.push(In.numHemiLights),Tn.push(In.numRectAreaLights),Tn.push(In.numDirLightShadows),Tn.push(In.numPointLightShadows),Tn.push(In.numSpotLightShadows),Tn.push(In.numSpotLightShadowsWithMaps),Tn.push(In.shadowMapType),Tn.push(In.toneMapping),Tn.push(In.numClippingPlanes),Tn.push(In.numClipIntersection),Tn.push(In.depthPacking)}function pn(Tn,In){Rt.disableAll(),In.isWebGL2&&Rt.enable(0),In.supportsVertexTextures&&Rt.enable(1),In.instancing&&Rt.enable(2),In.instancingColor&&Rt.enable(3),In.map&&Rt.enable(4),In.matcap&&Rt.enable(5),In.envMap&&Rt.enable(6),In.lightMap&&Rt.enable(7),In.aoMap&&Rt.enable(8),In.emissiveMap&&Rt.enable(9),In.bumpMap&&Rt.enable(10),In.normalMap&&Rt.enable(11),In.objectSpaceNormalMap&&Rt.enable(12),In.tangentSpaceNormalMap&&Rt.enable(13),In.clearcoat&&Rt.enable(14),In.clearcoatMap&&Rt.enable(15),In.clearcoatRoughnessMap&&Rt.enable(16),In.clearcoatNormalMap&&Rt.enable(17),In.iridescence&&Rt.enable(18),In.iridescenceMap&&Rt.enable(19),In.iridescenceThicknessMap&&Rt.enable(20),In.displacementMap&&Rt.enable(21),In.specularMap&&Rt.enable(22),In.roughnessMap&&Rt.enable(23),In.metalnessMap&&Rt.enable(24),In.gradientMap&&Rt.enable(25),In.alphaMap&&Rt.enable(26),In.alphaTest&&Rt.enable(27),In.vertexColors&&Rt.enable(28),In.vertexAlphas&&Rt.enable(29),In.vertexUvs&&Rt.enable(30),In.vertexTangents&&Rt.enable(31),In.uvsVertexOnly&&Rt.enable(32),Tn.push(Rt.mask),Rt.disableAll(),In.fog&&Rt.enable(0),In.useFog&&Rt.enable(1),In.flatShading&&Rt.enable(2),In.logarithmicDepthBuffer&&Rt.enable(3),In.skinning&&Rt.enable(4),In.morphTargets&&Rt.enable(5),In.morphNormals&&Rt.enable(6),In.morphColors&&Rt.enable(7),In.premultipliedAlpha&&Rt.enable(8),In.shadowMapEnabled&&Rt.enable(9),In.useLegacyLights&&Rt.enable(10),In.doubleSided&&Rt.enable(11),In.flipSided&&Rt.enable(12),In.useDepthPacking&&Rt.enable(13),In.dithering&&Rt.enable(14),In.specularIntensityMap&&Rt.enable(15),In.specularColorMap&&Rt.enable(16),In.transmission&&Rt.enable(17),In.transmissionMap&&Rt.enable(18),In.thicknessMap&&Rt.enable(19),In.sheen&&Rt.enable(20),In.sheenColorMap&&Rt.enable(21),In.sheenRoughnessMap&&Rt.enable(22),In.decodeVideoTexture&&Rt.enable(23),In.opaque&&Rt.enable(24),Tn.push(Rt.mask)}function mn(Tn){const In=Kt[Tn.type];let Rn;if(In){const Dn=ShaderLib[In];Rn=UniformsUtils.clone(Dn.uniforms)}else Rn=Tn.uniforms;return Rn}function On(Tn,In){let Rn;for(let Dn=0,Bn=Dt.length;Dn<Bn;Dn++){const Hn=Dt[Dn];if(Hn.cacheKey===In){Rn=Hn,++Rn.usedTimes;break}}return Rn===void 0&&(Rn=new WebGLProgram(ft,In,Tn,Et),Dt.push(Rn)),Rn}function bn(Tn){if(--Tn.usedTimes===0){const In=Dt.indexOf(Tn);Dt[In]=Dt[Dt.length-1],Dt.pop(),Tn.destroy()}}function En(Tn){kt.remove(Tn)}function An(){kt.dispose()}return{getParameters:ln,getProgramCacheKey:hn,getUniforms:mn,acquireProgram:On,releaseProgram:bn,releaseShaderCache:En,programs:Dt,dispose:An}}function WebGLProperties(){let ft=new WeakMap;function lt(Et){let Ct=ft.get(Et);return Ct===void 0&&(Ct={},ft.set(Et,Ct)),Ct}function dt(Et){ft.delete(Et)}function vt(Et,Ct,Rt){ft.get(Et)[Ct]=Rt}function Tt(){ft=new WeakMap}return{get:lt,remove:dt,update:vt,dispose:Tt}}function painterSortStable(ft,lt){return ft.groupOrder!==lt.groupOrder?ft.groupOrder-lt.groupOrder:ft.renderOrder!==lt.renderOrder?ft.renderOrder-lt.renderOrder:ft.material.id!==lt.material.id?ft.material.id-lt.material.id:ft.z!==lt.z?ft.z-lt.z:ft.id-lt.id}function reversePainterSortStable(ft,lt){return ft.groupOrder!==lt.groupOrder?ft.groupOrder-lt.groupOrder:ft.renderOrder!==lt.renderOrder?ft.renderOrder-lt.renderOrder:ft.z!==lt.z?lt.z-ft.z:ft.id-lt.id}function WebGLRenderList(){const ft=[];let lt=0;const dt=[],vt=[],Tt=[];function Et(){lt=0,dt.length=0,vt.length=0,Tt.length=0}function Ct(Ft,Ut,Zt,Kt,ln,hn){let dn=ft[lt];return dn===void 0?(dn={id:Ft.id,object:Ft,geometry:Ut,material:Zt,groupOrder:Kt,renderOrder:Ft.renderOrder,z:ln,group:hn},ft[lt]=dn):(dn.id=Ft.id,dn.object=Ft,dn.geometry=Ut,dn.material=Zt,dn.groupOrder=Kt,dn.renderOrder=Ft.renderOrder,dn.z=ln,dn.group=hn),lt++,dn}function Rt(Ft,Ut,Zt,Kt,ln,hn){const dn=Ct(Ft,Ut,Zt,Kt,ln,hn);Zt.transmission>0?vt.push(dn):Zt.transparent===!0?Tt.push(dn):dt.push(dn)}function kt(Ft,Ut,Zt,Kt,ln,hn){const dn=Ct(Ft,Ut,Zt,Kt,ln,hn);Zt.transmission>0?vt.unshift(dn):Zt.transparent===!0?Tt.unshift(dn):dt.unshift(dn)}function Dt(Ft,Ut){dt.length>1&&dt.sort(Ft||painterSortStable),vt.length>1&&vt.sort(Ut||reversePainterSortStable),Tt.length>1&&Tt.sort(Ut||reversePainterSortStable)}function Bt(){for(let Ft=lt,Ut=ft.length;Ft<Ut;Ft++){const Zt=ft[Ft];if(Zt.id===null)break;Zt.id=null,Zt.object=null,Zt.geometry=null,Zt.material=null,Zt.group=null}}return{opaque:dt,transmissive:vt,transparent:Tt,init:Et,push:Rt,unshift:kt,finish:Bt,sort:Dt}}function WebGLRenderLists(){let ft=new WeakMap;function lt(vt,Tt){const Et=ft.get(vt);let Ct;return Et===void 0?(Ct=new WebGLRenderList,ft.set(vt,[Ct])):Tt>=Et.length?(Ct=new WebGLRenderList,Et.push(Ct)):Ct=Et[Tt],Ct}function dt(){ft=new WeakMap}return{get:lt,dispose:dt}}function UniformsCache(){const ft={};return{get:function(lt){if(ft[lt.id]!==void 0)return ft[lt.id];let dt;switch(lt.type){case"DirectionalLight":dt={direction:new Vector3,color:new Color};break;case"SpotLight":dt={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":dt={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":dt={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":dt={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return ft[lt.id]=dt,dt}}}function ShadowUniformsCache(){const ft={};return{get:function(lt){if(ft[lt.id]!==void 0)return ft[lt.id];let dt;switch(lt.type){case"DirectionalLight":dt={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":dt={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":dt={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return ft[lt.id]=dt,dt}}}let nextVersion=0;function shadowCastingAndTexturingLightsFirst(ft,lt){return(lt.castShadow?2:0)-(ft.castShadow?2:0)+(lt.map?1:0)-(ft.map?1:0)}function WebGLLights(ft,lt){const dt=new UniformsCache,vt=ShadowUniformsCache(),Tt={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let Bt=0;Bt<9;Bt++)Tt.probe.push(new Vector3);const Et=new Vector3,Ct=new Matrix4,Rt=new Matrix4;function kt(Bt,Ft){let Ut=0,Zt=0,Kt=0;for(let Dn=0;Dn<9;Dn++)Tt.probe[Dn].set(0,0,0);let ln=0,hn=0,dn=0,pn=0,mn=0,On=0,bn=0,En=0,An=0,Tn=0;Bt.sort(shadowCastingAndTexturingLightsFirst);const In=Ft===!0?Math.PI:1;for(let Dn=0,Bn=Bt.length;Dn<Bn;Dn++){const Hn=Bt[Dn],jn=Hn.color,Kn=Hn.intensity,zn=Hn.distance,lr=Hn.shadow&&Hn.shadow.map?Hn.shadow.map.texture:null;if(Hn.isAmbientLight)Ut+=jn.r*Kn*In,Zt+=jn.g*Kn*In,Kt+=jn.b*Kn*In;else if(Hn.isLightProbe)for(let Ln=0;Ln<9;Ln++)Tt.probe[Ln].addScaledVector(Hn.sh.coefficients[Ln],Kn);else if(Hn.isDirectionalLight){const Ln=dt.get(Hn);if(Ln.color.copy(Hn.color).multiplyScalar(Hn.intensity*In),Hn.castShadow){const Vn=Hn.shadow,Wn=vt.get(Hn);Wn.shadowBias=Vn.bias,Wn.shadowNormalBias=Vn.normalBias,Wn.shadowRadius=Vn.radius,Wn.shadowMapSize=Vn.mapSize,Tt.directionalShadow[ln]=Wn,Tt.directionalShadowMap[ln]=lr,Tt.directionalShadowMatrix[ln]=Hn.shadow.matrix,On++}Tt.directional[ln]=Ln,ln++}else if(Hn.isSpotLight){const Ln=dt.get(Hn);Ln.position.setFromMatrixPosition(Hn.matrixWorld),Ln.color.copy(jn).multiplyScalar(Kn*In),Ln.distance=zn,Ln.coneCos=Math.cos(Hn.angle),Ln.penumbraCos=Math.cos(Hn.angle*(1-Hn.penumbra)),Ln.decay=Hn.decay,Tt.spot[dn]=Ln;const Vn=Hn.shadow;if(Hn.map&&(Tt.spotLightMap[An]=Hn.map,An++,Vn.updateMatrices(Hn),Hn.castShadow&&Tn++),Tt.spotLightMatrix[dn]=Vn.matrix,Hn.castShadow){const Wn=vt.get(Hn);Wn.shadowBias=Vn.bias,Wn.shadowNormalBias=Vn.normalBias,Wn.shadowRadius=Vn.radius,Wn.shadowMapSize=Vn.mapSize,Tt.spotShadow[dn]=Wn,Tt.spotShadowMap[dn]=lr,En++}dn++}else if(Hn.isRectAreaLight){const Ln=dt.get(Hn);Ln.color.copy(jn).multiplyScalar(Kn),Ln.halfWidth.set(Hn.width*.5,0,0),Ln.halfHeight.set(0,Hn.height*.5,0),Tt.rectArea[pn]=Ln,pn++}else if(Hn.isPointLight){const Ln=dt.get(Hn);if(Ln.color.copy(Hn.color).multiplyScalar(Hn.intensity*In),Ln.distance=Hn.distance,Ln.decay=Hn.decay,Hn.castShadow){const Vn=Hn.shadow,Wn=vt.get(Hn);Wn.shadowBias=Vn.bias,Wn.shadowNormalBias=Vn.normalBias,Wn.shadowRadius=Vn.radius,Wn.shadowMapSize=Vn.mapSize,Wn.shadowCameraNear=Vn.camera.near,Wn.shadowCameraFar=Vn.camera.far,Tt.pointShadow[hn]=Wn,Tt.pointShadowMap[hn]=lr,Tt.pointShadowMatrix[hn]=Hn.shadow.matrix,bn++}Tt.point[hn]=Ln,hn++}else if(Hn.isHemisphereLight){const Ln=dt.get(Hn);Ln.skyColor.copy(Hn.color).multiplyScalar(Kn*In),Ln.groundColor.copy(Hn.groundColor).multiplyScalar(Kn*In),Tt.hemi[mn]=Ln,mn++}}pn>0&&(lt.isWebGL2||ft.has("OES_texture_float_linear")===!0?(Tt.rectAreaLTC1=UniformsLib.LTC_FLOAT_1,Tt.rectAreaLTC2=UniformsLib.LTC_FLOAT_2):ft.has("OES_texture_half_float_linear")===!0?(Tt.rectAreaLTC1=UniformsLib.LTC_HALF_1,Tt.rectAreaLTC2=UniformsLib.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),Tt.ambient[0]=Ut,Tt.ambient[1]=Zt,Tt.ambient[2]=Kt;const Rn=Tt.hash;(Rn.directionalLength!==ln||Rn.pointLength!==hn||Rn.spotLength!==dn||Rn.rectAreaLength!==pn||Rn.hemiLength!==mn||Rn.numDirectionalShadows!==On||Rn.numPointShadows!==bn||Rn.numSpotShadows!==En||Rn.numSpotMaps!==An)&&(Tt.directional.length=ln,Tt.spot.length=dn,Tt.rectArea.length=pn,Tt.point.length=hn,Tt.hemi.length=mn,Tt.directionalShadow.length=On,Tt.directionalShadowMap.length=On,Tt.pointShadow.length=bn,Tt.pointShadowMap.length=bn,Tt.spotShadow.length=En,Tt.spotShadowMap.length=En,Tt.directionalShadowMatrix.length=On,Tt.pointShadowMatrix.length=bn,Tt.spotLightMatrix.length=En+An-Tn,Tt.spotLightMap.length=An,Tt.numSpotLightShadowsWithMaps=Tn,Rn.directionalLength=ln,Rn.pointLength=hn,Rn.spotLength=dn,Rn.rectAreaLength=pn,Rn.hemiLength=mn,Rn.numDirectionalShadows=On,Rn.numPointShadows=bn,Rn.numSpotShadows=En,Rn.numSpotMaps=An,Tt.version=nextVersion++)}function Dt(Bt,Ft){let Ut=0,Zt=0,Kt=0,ln=0,hn=0;const dn=Ft.matrixWorldInverse;for(let pn=0,mn=Bt.length;pn<mn;pn++){const On=Bt[pn];if(On.isDirectionalLight){const bn=Tt.directional[Ut];bn.direction.setFromMatrixPosition(On.matrixWorld),Et.setFromMatrixPosition(On.target.matrixWorld),bn.direction.sub(Et),bn.direction.transformDirection(dn),Ut++}else if(On.isSpotLight){const bn=Tt.spot[Kt];bn.position.setFromMatrixPosition(On.matrixWorld),bn.position.applyMatrix4(dn),bn.direction.setFromMatrixPosition(On.matrixWorld),Et.setFromMatrixPosition(On.target.matrixWorld),bn.direction.sub(Et),bn.direction.transformDirection(dn),Kt++}else if(On.isRectAreaLight){const bn=Tt.rectArea[ln];bn.position.setFromMatrixPosition(On.matrixWorld),bn.position.applyMatrix4(dn),Rt.identity(),Ct.copy(On.matrixWorld),Ct.premultiply(dn),Rt.extractRotation(Ct),bn.halfWidth.set(On.width*.5,0,0),bn.halfHeight.set(0,On.height*.5,0),bn.halfWidth.applyMatrix4(Rt),bn.halfHeight.applyMatrix4(Rt),ln++}else if(On.isPointLight){const bn=Tt.point[Zt];bn.position.setFromMatrixPosition(On.matrixWorld),bn.position.applyMatrix4(dn),Zt++}else if(On.isHemisphereLight){const bn=Tt.hemi[hn];bn.direction.setFromMatrixPosition(On.matrixWorld),bn.direction.transformDirection(dn),hn++}}}return{setup:kt,setupView:Dt,state:Tt}}function WebGLRenderState(ft,lt){const dt=new WebGLLights(ft,lt),vt=[],Tt=[];function Et(){vt.length=0,Tt.length=0}function Ct(Ft){vt.push(Ft)}function Rt(Ft){Tt.push(Ft)}function kt(Ft){dt.setup(vt,Ft)}function Dt(Ft){dt.setupView(vt,Ft)}return{init:Et,state:{lightsArray:vt,shadowsArray:Tt,lights:dt},setupLights:kt,setupLightsView:Dt,pushLight:Ct,pushShadow:Rt}}function WebGLRenderStates(ft,lt){let dt=new WeakMap;function vt(Et,Ct=0){const Rt=dt.get(Et);let kt;return Rt===void 0?(kt=new WebGLRenderState(ft,lt),dt.set(Et,[kt])):Ct>=Rt.length?(kt=new WebGLRenderState(ft,lt),Rt.push(kt)):kt=Rt[Ct],kt}function Tt(){dt=new WeakMap}return{get:vt,dispose:Tt}}class MeshDepthMaterial extends Material{constructor(lt){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(lt)}copy(lt){return super.copy(lt),this.depthPacking=lt.depthPacking,this.map=lt.map,this.alphaMap=lt.alphaMap,this.displacementMap=lt.displacementMap,this.displacementScale=lt.displacementScale,this.displacementBias=lt.displacementBias,this.wireframe=lt.wireframe,this.wireframeLinewidth=lt.wireframeLinewidth,this}}class MeshDistanceMaterial extends Material{constructor(lt){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Vector3,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(lt)}copy(lt){return super.copy(lt),this.referencePosition.copy(lt.referencePosition),this.nearDistance=lt.nearDistance,this.farDistance=lt.farDistance,this.map=lt.map,this.alphaMap=lt.alphaMap,this.displacementMap=lt.displacementMap,this.displacementScale=lt.displacementScale,this.displacementBias=lt.displacementBias,this}}const vertex=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fragment=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function WebGLShadowMap(ft,lt,dt){let vt=new Frustum;const Tt=new Vector2,Et=new Vector2,Ct=new Vector4,Rt=new MeshDepthMaterial({depthPacking:RGBADepthPacking}),kt=new MeshDistanceMaterial,Dt={},Bt=dt.maxTextureSize,Ft={[FrontSide]:BackSide,[BackSide]:FrontSide,[DoubleSide]:DoubleSide},Ut=new ShaderMaterial({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vertex,fragmentShader:fragment}),Zt=Ut.clone();Zt.defines.HORIZONTAL_PASS=1;const Kt=new BufferGeometry;Kt.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const ln=new Mesh(Kt,Ut),hn=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap,this.render=function(On,bn,En){if(hn.enabled===!1||hn.autoUpdate===!1&&hn.needsUpdate===!1||On.length===0)return;const An=ft.getRenderTarget(),Tn=ft.getActiveCubeFace(),In=ft.getActiveMipmapLevel(),Rn=ft.state;Rn.setBlending(NoBlending),Rn.buffers.color.setClear(1,1,1,1),Rn.buffers.depth.setTest(!0),Rn.setScissorTest(!1);for(let Dn=0,Bn=On.length;Dn<Bn;Dn++){const Hn=On[Dn],jn=Hn.shadow;if(jn===void 0){console.warn("THREE.WebGLShadowMap:",Hn,"has no shadow.");continue}if(jn.autoUpdate===!1&&jn.needsUpdate===!1)continue;Tt.copy(jn.mapSize);const Kn=jn.getFrameExtents();if(Tt.multiply(Kn),Et.copy(jn.mapSize),(Tt.x>Bt||Tt.y>Bt)&&(Tt.x>Bt&&(Et.x=Math.floor(Bt/Kn.x),Tt.x=Et.x*Kn.x,jn.mapSize.x=Et.x),Tt.y>Bt&&(Et.y=Math.floor(Bt/Kn.y),Tt.y=Et.y*Kn.y,jn.mapSize.y=Et.y)),jn.map===null){const lr=this.type!==VSMShadowMap?{minFilter:NearestFilter,magFilter:NearestFilter}:{};jn.map=new WebGLRenderTarget(Tt.x,Tt.y,lr),jn.map.texture.name=Hn.name+".shadowMap",jn.camera.updateProjectionMatrix()}ft.setRenderTarget(jn.map),ft.clear();const zn=jn.getViewportCount();for(let lr=0;lr<zn;lr++){const Ln=jn.getViewport(lr);Ct.set(Et.x*Ln.x,Et.y*Ln.y,Et.x*Ln.z,Et.y*Ln.w),Rn.viewport(Ct),jn.updateMatrices(Hn,lr),vt=jn.getFrustum(),mn(bn,En,jn.camera,Hn,this.type)}jn.isPointLightShadow!==!0&&this.type===VSMShadowMap&&dn(jn,En),jn.needsUpdate=!1}hn.needsUpdate=!1,ft.setRenderTarget(An,Tn,In)};function dn(On,bn){const En=lt.update(ln);Ut.defines.VSM_SAMPLES!==On.blurSamples&&(Ut.defines.VSM_SAMPLES=On.blurSamples,Zt.defines.VSM_SAMPLES=On.blurSamples,Ut.needsUpdate=!0,Zt.needsUpdate=!0),On.mapPass===null&&(On.mapPass=new WebGLRenderTarget(Tt.x,Tt.y)),Ut.uniforms.shadow_pass.value=On.map.texture,Ut.uniforms.resolution.value=On.mapSize,Ut.uniforms.radius.value=On.radius,ft.setRenderTarget(On.mapPass),ft.clear(),ft.renderBufferDirect(bn,null,En,Ut,ln,null),Zt.uniforms.shadow_pass.value=On.mapPass.texture,Zt.uniforms.resolution.value=On.mapSize,Zt.uniforms.radius.value=On.radius,ft.setRenderTarget(On.map),ft.clear(),ft.renderBufferDirect(bn,null,En,Zt,ln,null)}function pn(On,bn,En,An,Tn,In){let Rn=null;const Dn=En.isPointLight===!0?On.customDistanceMaterial:On.customDepthMaterial;if(Dn!==void 0)Rn=Dn;else if(Rn=En.isPointLight===!0?kt:Rt,ft.localClippingEnabled&&bn.clipShadows===!0&&Array.isArray(bn.clippingPlanes)&&bn.clippingPlanes.length!==0||bn.displacementMap&&bn.displacementScale!==0||bn.alphaMap&&bn.alphaTest>0||bn.map&&bn.alphaTest>0){const Bn=Rn.uuid,Hn=bn.uuid;let jn=Dt[Bn];jn===void 0&&(jn={},Dt[Bn]=jn);let Kn=jn[Hn];Kn===void 0&&(Kn=Rn.clone(),jn[Hn]=Kn),Rn=Kn}return Rn.visible=bn.visible,Rn.wireframe=bn.wireframe,In===VSMShadowMap?Rn.side=bn.shadowSide!==null?bn.shadowSide:bn.side:Rn.side=bn.shadowSide!==null?bn.shadowSide:Ft[bn.side],Rn.alphaMap=bn.alphaMap,Rn.alphaTest=bn.alphaTest,Rn.map=bn.map,Rn.clipShadows=bn.clipShadows,Rn.clippingPlanes=bn.clippingPlanes,Rn.clipIntersection=bn.clipIntersection,Rn.displacementMap=bn.displacementMap,Rn.displacementScale=bn.displacementScale,Rn.displacementBias=bn.displacementBias,Rn.wireframeLinewidth=bn.wireframeLinewidth,Rn.linewidth=bn.linewidth,En.isPointLight===!0&&Rn.isMeshDistanceMaterial===!0&&(Rn.referencePosition.setFromMatrixPosition(En.matrixWorld),Rn.nearDistance=An,Rn.farDistance=Tn),Rn}function mn(On,bn,En,An,Tn){if(On.visible===!1)return;if(On.layers.test(bn.layers)&&(On.isMesh||On.isLine||On.isPoints)&&(On.castShadow||On.receiveShadow&&Tn===VSMShadowMap)&&(!On.frustumCulled||vt.intersectsObject(On))){On.modelViewMatrix.multiplyMatrices(En.matrixWorldInverse,On.matrixWorld);const Dn=lt.update(On),Bn=On.material;if(Array.isArray(Bn)){const Hn=Dn.groups;for(let jn=0,Kn=Hn.length;jn<Kn;jn++){const zn=Hn[jn],lr=Bn[zn.materialIndex];if(lr&&lr.visible){const Ln=pn(On,lr,An,En.near,En.far,Tn);ft.renderBufferDirect(En,null,Dn,Ln,On,zn)}}}else if(Bn.visible){const Hn=pn(On,Bn,An,En.near,En.far,Tn);ft.renderBufferDirect(En,null,Dn,Hn,On,null)}}const Rn=On.children;for(let Dn=0,Bn=Rn.length;Dn<Bn;Dn++)mn(Rn[Dn],bn,En,An,Tn)}}function WebGLState(ft,lt,dt){const vt=dt.isWebGL2;function Tt(){let Gn=!1;const dr=new Vector4;let Br=null;const io=new Vector4(0,0,0,0);return{setMask:function(fo){Br!==fo&&!Gn&&(ft.colorMask(fo,fo,fo,fo),Br=fo)},setLocked:function(fo){Gn=fo},setClear:function(fo,rs,cs,Ns,Us){Us===!0&&(fo*=Ns,rs*=Ns,cs*=Ns),dr.set(fo,rs,cs,Ns),io.equals(dr)===!1&&(ft.clearColor(fo,rs,cs,Ns),io.copy(dr))},reset:function(){Gn=!1,Br=null,io.set(-1,0,0,0)}}}function Et(){let Gn=!1,dr=null,Br=null,io=null;return{setTest:function(fo){fo?Sr(2929):Vr(2929)},setMask:function(fo){dr!==fo&&!Gn&&(ft.depthMask(fo),dr=fo)},setFunc:function(fo){if(Br!==fo){switch(fo){case NeverDepth:ft.depthFunc(512);break;case AlwaysDepth:ft.depthFunc(519);break;case LessDepth:ft.depthFunc(513);break;case LessEqualDepth:ft.depthFunc(515);break;case EqualDepth:ft.depthFunc(514);break;case GreaterEqualDepth:ft.depthFunc(518);break;case GreaterDepth:ft.depthFunc(516);break;case NotEqualDepth:ft.depthFunc(517);break;default:ft.depthFunc(515)}Br=fo}},setLocked:function(fo){Gn=fo},setClear:function(fo){io!==fo&&(ft.clearDepth(fo),io=fo)},reset:function(){Gn=!1,dr=null,Br=null,io=null}}}function Ct(){let Gn=!1,dr=null,Br=null,io=null,fo=null,rs=null,cs=null,Ns=null,Us=null;return{setTest:function(as){Gn||(as?Sr(2960):Vr(2960))},setMask:function(as){dr!==as&&!Gn&&(ft.stencilMask(as),dr=as)},setFunc:function(as,us,Ml){(Br!==as||io!==us||fo!==Ml)&&(ft.stencilFunc(as,us,Ml),Br=as,io=us,fo=Ml)},setOp:function(as,us,Ml){(rs!==as||cs!==us||Ns!==Ml)&&(ft.stencilOp(as,us,Ml),rs=as,cs=us,Ns=Ml)},setLocked:function(as){Gn=as},setClear:function(as){Us!==as&&(ft.clearStencil(as),Us=as)},reset:function(){Gn=!1,dr=null,Br=null,io=null,fo=null,rs=null,cs=null,Ns=null,Us=null}}}const Rt=new Tt,kt=new Et,Dt=new Ct,Bt=new WeakMap,Ft=new WeakMap;let Ut={},Zt={},Kt=new WeakMap,ln=[],hn=null,dn=!1,pn=null,mn=null,On=null,bn=null,En=null,An=null,Tn=null,In=!1,Rn=null,Dn=null,Bn=null,Hn=null,jn=null;const Kn=ft.getParameter(35661);let zn=!1,lr=0;const Ln=ft.getParameter(7938);Ln.indexOf("WebGL")!==-1?(lr=parseFloat(/^WebGL (\d)/.exec(Ln)[1]),zn=lr>=1):Ln.indexOf("OpenGL ES")!==-1&&(lr=parseFloat(/^OpenGL ES (\d)/.exec(Ln)[1]),zn=lr>=2);let Vn=null,Wn={};const sr=ft.getParameter(3088),Mn=ft.getParameter(2978),ir=new Vector4().fromArray(sr),mr=new Vector4().fromArray(Mn);function tr(Gn,dr,Br){const io=new Uint8Array(4),fo=ft.createTexture();ft.bindTexture(Gn,fo),ft.texParameteri(Gn,10241,9728),ft.texParameteri(Gn,10240,9728);for(let rs=0;rs<Br;rs++)ft.texImage2D(dr+rs,0,6408,1,1,0,6408,5121,io);return fo}const Dr={};Dr[3553]=tr(3553,3553,1),Dr[34067]=tr(34067,34069,6),Rt.setClear(0,0,0,1),kt.setClear(1),Dt.setClear(0),Sr(2929),kt.setFunc(LessEqualDepth),jr(!1),no(CullFaceBack),Sr(2884),Qr(NoBlending);function Sr(Gn){Ut[Gn]!==!0&&(ft.enable(Gn),Ut[Gn]=!0)}function Vr(Gn){Ut[Gn]!==!1&&(ft.disable(Gn),Ut[Gn]=!1)}function Jr(Gn,dr){return Zt[Gn]!==dr?(ft.bindFramebuffer(Gn,dr),Zt[Gn]=dr,vt&&(Gn===36009&&(Zt[36160]=dr),Gn===36160&&(Zt[36009]=dr)),!0):!1}function Yr(Gn,dr){let Br=ln,io=!1;if(Gn)if(Br=Kt.get(dr),Br===void 0&&(Br=[],Kt.set(dr,Br)),Gn.isWebGLMultipleRenderTargets){const fo=Gn.texture;if(Br.length!==fo.length||Br[0]!==36064){for(let rs=0,cs=fo.length;rs<cs;rs++)Br[rs]=36064+rs;Br.length=fo.length,io=!0}}else Br[0]!==36064&&(Br[0]=36064,io=!0);else Br[0]!==1029&&(Br[0]=1029,io=!0);io&&(dt.isWebGL2?ft.drawBuffers(Br):lt.get("WEBGL_draw_buffers").drawBuffersWEBGL(Br))}function _i(Gn){return hn!==Gn?(ft.useProgram(Gn),hn=Gn,!0):!1}const Er={[AddEquation]:32774,[SubtractEquation]:32778,[ReverseSubtractEquation]:32779};if(vt)Er[MinEquation]=32775,Er[MaxEquation]=32776;else{const Gn=lt.get("EXT_blend_minmax");Gn!==null&&(Er[MinEquation]=Gn.MIN_EXT,Er[MaxEquation]=Gn.MAX_EXT)}const kr={[ZeroFactor]:0,[OneFactor]:1,[SrcColorFactor]:768,[SrcAlphaFactor]:770,[SrcAlphaSaturateFactor]:776,[DstColorFactor]:774,[DstAlphaFactor]:772,[OneMinusSrcColorFactor]:769,[OneMinusSrcAlphaFactor]:771,[OneMinusDstColorFactor]:775,[OneMinusDstAlphaFactor]:773};function Qr(Gn,dr,Br,io,fo,rs,cs,Ns){if(Gn===NoBlending){dn===!0&&(Vr(3042),dn=!1);return}if(dn===!1&&(Sr(3042),dn=!0),Gn!==CustomBlending){if(Gn!==pn||Ns!==In){if((mn!==AddEquation||En!==AddEquation)&&(ft.blendEquation(32774),mn=AddEquation,En=AddEquation),Ns)switch(Gn){case NormalBlending:ft.blendFuncSeparate(1,771,1,771);break;case AdditiveBlending:ft.blendFunc(1,1);break;case SubtractiveBlending:ft.blendFuncSeparate(0,769,0,1);break;case MultiplyBlending:ft.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Gn);break}else switch(Gn){case NormalBlending:ft.blendFuncSeparate(770,771,1,771);break;case AdditiveBlending:ft.blendFunc(770,1);break;case SubtractiveBlending:ft.blendFuncSeparate(0,769,0,1);break;case MultiplyBlending:ft.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Gn);break}On=null,bn=null,An=null,Tn=null,pn=Gn,In=Ns}return}fo=fo||dr,rs=rs||Br,cs=cs||io,(dr!==mn||fo!==En)&&(ft.blendEquationSeparate(Er[dr],Er[fo]),mn=dr,En=fo),(Br!==On||io!==bn||rs!==An||cs!==Tn)&&(ft.blendFuncSeparate(kr[Br],kr[io],kr[rs],kr[cs]),On=Br,bn=io,An=rs,Tn=cs),pn=Gn,In=!1}function so(Gn,dr){Gn.side===DoubleSide?Vr(2884):Sr(2884);let Br=Gn.side===BackSide;dr&&(Br=!Br),jr(Br),Gn.blending===NormalBlending&&Gn.transparent===!1?Qr(NoBlending):Qr(Gn.blending,Gn.blendEquation,Gn.blendSrc,Gn.blendDst,Gn.blendEquationAlpha,Gn.blendSrcAlpha,Gn.blendDstAlpha,Gn.premultipliedAlpha),kt.setFunc(Gn.depthFunc),kt.setTest(Gn.depthTest),kt.setMask(Gn.depthWrite),Rt.setMask(Gn.colorWrite);const io=Gn.stencilWrite;Dt.setTest(io),io&&(Dt.setMask(Gn.stencilWriteMask),Dt.setFunc(Gn.stencilFunc,Gn.stencilRef,Gn.stencilFuncMask),Dt.setOp(Gn.stencilFail,Gn.stencilZFail,Gn.stencilZPass)),ho(Gn.polygonOffset,Gn.polygonOffsetFactor,Gn.polygonOffsetUnits),Gn.alphaToCoverage===!0?Sr(32926):Vr(32926)}function jr(Gn){Rn!==Gn&&(Gn?ft.frontFace(2304):ft.frontFace(2305),Rn=Gn)}function no(Gn){Gn!==CullFaceNone?(Sr(2884),Gn!==Dn&&(Gn===CullFaceBack?ft.cullFace(1029):Gn===CullFaceFront?ft.cullFace(1028):ft.cullFace(1032))):Vr(2884),Dn=Gn}function uo(Gn){Gn!==Bn&&(zn&&ft.lineWidth(Gn),Bn=Gn)}function ho(Gn,dr,Br){Gn?(Sr(32823),(Hn!==dr||jn!==Br)&&(ft.polygonOffset(dr,Br),Hn=dr,jn=Br)):Vr(32823)}function Po(Gn){Gn?Sr(3089):Vr(3089)}function Wo(Gn){Gn===void 0&&(Gn=33984+Kn-1),Vn!==Gn&&(ft.activeTexture(Gn),Vn=Gn)}function Xn(Gn,dr,Br){Br===void 0&&(Vn===null?Br=33984+Kn-1:Br=Vn);let io=Wn[Br];io===void 0&&(io={type:void 0,texture:void 0},Wn[Br]=io),(io.type!==Gn||io.texture!==dr)&&(Vn!==Br&&(ft.activeTexture(Br),Vn=Br),ft.bindTexture(Gn,dr||Dr[Gn]),io.type=Gn,io.texture=dr)}function Un(){const Gn=Wn[Vn];Gn!==void 0&&Gn.type!==void 0&&(ft.bindTexture(Gn.type,null),Gn.type=void 0,Gn.texture=void 0)}function rr(){try{ft.compressedTexImage2D.apply(ft,arguments)}catch(Gn){console.error("THREE.WebGLState:",Gn)}}function yr(){try{ft.compressedTexImage3D.apply(ft,arguments)}catch(Gn){console.error("THREE.WebGLState:",Gn)}}function Ir(){try{ft.texSubImage2D.apply(ft,arguments)}catch(Gn){console.error("THREE.WebGLState:",Gn)}}function Fr(){try{ft.texSubImage3D.apply(ft,arguments)}catch(Gn){console.error("THREE.WebGLState:",Gn)}}function pr(){try{ft.compressedTexSubImage2D.apply(ft,arguments)}catch(Gn){console.error("THREE.WebGLState:",Gn)}}function Zr(){try{ft.compressedTexSubImage3D.apply(ft,arguments)}catch(Gn){console.error("THREE.WebGLState:",Gn)}}function Cr(){try{ft.texStorage2D.apply(ft,arguments)}catch(Gn){console.error("THREE.WebGLState:",Gn)}}function lo(){try{ft.texStorage3D.apply(ft,arguments)}catch(Gn){console.error("THREE.WebGLState:",Gn)}}function Jn(){try{ft.texImage2D.apply(ft,arguments)}catch(Gn){console.error("THREE.WebGLState:",Gn)}}function Tr(){try{ft.texImage3D.apply(ft,arguments)}catch(Gn){console.error("THREE.WebGLState:",Gn)}}function Nr(Gn){ir.equals(Gn)===!1&&(ft.scissor(Gn.x,Gn.y,Gn.z,Gn.w),ir.copy(Gn))}function xn(Gn){mr.equals(Gn)===!1&&(ft.viewport(Gn.x,Gn.y,Gn.z,Gn.w),mr.copy(Gn))}function Nn(Gn,dr){let Br=Ft.get(dr);Br===void 0&&(Br=new WeakMap,Ft.set(dr,Br));let io=Br.get(Gn);io===void 0&&(io=ft.getUniformBlockIndex(dr,Gn.name),Br.set(Gn,io))}function Zn(Gn,dr){const io=Ft.get(dr).get(Gn);Bt.get(dr)!==io&&(ft.uniformBlockBinding(dr,io,Gn.__bindingPointIndex),Bt.set(dr,io))}function hr(){ft.disable(3042),ft.disable(2884),ft.disable(2929),ft.disable(32823),ft.disable(3089),ft.disable(2960),ft.disable(32926),ft.blendEquation(32774),ft.blendFunc(1,0),ft.blendFuncSeparate(1,0,1,0),ft.colorMask(!0,!0,!0,!0),ft.clearColor(0,0,0,0),ft.depthMask(!0),ft.depthFunc(513),ft.clearDepth(1),ft.stencilMask(4294967295),ft.stencilFunc(519,0,4294967295),ft.stencilOp(7680,7680,7680),ft.clearStencil(0),ft.cullFace(1029),ft.frontFace(2305),ft.polygonOffset(0,0),ft.activeTexture(33984),ft.bindFramebuffer(36160,null),vt===!0&&(ft.bindFramebuffer(36009,null),ft.bindFramebuffer(36008,null)),ft.useProgram(null),ft.lineWidth(1),ft.scissor(0,0,ft.canvas.width,ft.canvas.height),ft.viewport(0,0,ft.canvas.width,ft.canvas.height),Ut={},Vn=null,Wn={},Zt={},Kt=new WeakMap,ln=[],hn=null,dn=!1,pn=null,mn=null,On=null,bn=null,En=null,An=null,Tn=null,In=!1,Rn=null,Dn=null,Bn=null,Hn=null,jn=null,ir.set(0,0,ft.canvas.width,ft.canvas.height),mr.set(0,0,ft.canvas.width,ft.canvas.height),Rt.reset(),kt.reset(),Dt.reset()}return{buffers:{color:Rt,depth:kt,stencil:Dt},enable:Sr,disable:Vr,bindFramebuffer:Jr,drawBuffers:Yr,useProgram:_i,setBlending:Qr,setMaterial:so,setFlipSided:jr,setCullFace:no,setLineWidth:uo,setPolygonOffset:ho,setScissorTest:Po,activeTexture:Wo,bindTexture:Xn,unbindTexture:Un,compressedTexImage2D:rr,compressedTexImage3D:yr,texImage2D:Jn,texImage3D:Tr,updateUBOMapping:Nn,uniformBlockBinding:Zn,texStorage2D:Cr,texStorage3D:lo,texSubImage2D:Ir,texSubImage3D:Fr,compressedTexSubImage2D:pr,compressedTexSubImage3D:Zr,scissor:Nr,viewport:xn,reset:hr}}function WebGLTextures(ft,lt,dt,vt,Tt,Et,Ct){const Rt=Tt.isWebGL2,kt=Tt.maxTextures,Dt=Tt.maxCubemapSize,Bt=Tt.maxTextureSize,Ft=Tt.maxSamples,Ut=lt.has("WEBGL_multisampled_render_to_texture")?lt.get("WEBGL_multisampled_render_to_texture"):null,Zt=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),Kt=new WeakMap;let ln;const hn=new WeakMap;let dn=!1;try{dn=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function pn(Xn,Un){return dn?new OffscreenCanvas(Xn,Un):createElementNS$1("canvas")}function mn(Xn,Un,rr,yr){let Ir=1;if((Xn.width>yr||Xn.height>yr)&&(Ir=yr/Math.max(Xn.width,Xn.height)),Ir<1||Un===!0)if(typeof HTMLImageElement<"u"&&Xn instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Xn instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Xn instanceof ImageBitmap){const Fr=Un?floorPowerOfTwo:Math.floor,pr=Fr(Ir*Xn.width),Zr=Fr(Ir*Xn.height);ln===void 0&&(ln=pn(pr,Zr));const Cr=rr?pn(pr,Zr):ln;return Cr.width=pr,Cr.height=Zr,Cr.getContext("2d").drawImage(Xn,0,0,pr,Zr),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Xn.width+"x"+Xn.height+") to ("+pr+"x"+Zr+")."),Cr}else return"data"in Xn&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Xn.width+"x"+Xn.height+")."),Xn;return Xn}function On(Xn){return isPowerOfTwo(Xn.width)&&isPowerOfTwo(Xn.height)}function bn(Xn){return Rt?!1:Xn.wrapS!==ClampToEdgeWrapping||Xn.wrapT!==ClampToEdgeWrapping||Xn.minFilter!==NearestFilter&&Xn.minFilter!==LinearFilter}function En(Xn,Un){return Xn.generateMipmaps&&Un&&Xn.minFilter!==NearestFilter&&Xn.minFilter!==LinearFilter}function An(Xn){ft.generateMipmap(Xn)}function Tn(Xn,Un,rr,yr,Ir=!1){if(Rt===!1)return Un;if(Xn!==null){if(ft[Xn]!==void 0)return ft[Xn];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Xn+"'")}let Fr=Un;return Un===6403&&(rr===5126&&(Fr=33326),rr===5131&&(Fr=33325),rr===5121&&(Fr=33321)),Un===33319&&(rr===5126&&(Fr=33328),rr===5131&&(Fr=33327),rr===5121&&(Fr=33323)),Un===6408&&(rr===5126&&(Fr=34836),rr===5131&&(Fr=34842),rr===5121&&(Fr=yr===sRGBEncoding&&Ir===!1?35907:32856),rr===32819&&(Fr=32854),rr===32820&&(Fr=32855)),(Fr===33325||Fr===33326||Fr===33327||Fr===33328||Fr===34842||Fr===34836)&&lt.get("EXT_color_buffer_float"),Fr}function In(Xn,Un,rr){return En(Xn,rr)===!0||Xn.isFramebufferTexture&&Xn.minFilter!==NearestFilter&&Xn.minFilter!==LinearFilter?Math.log2(Math.max(Un.width,Un.height))+1:Xn.mipmaps!==void 0&&Xn.mipmaps.length>0?Xn.mipmaps.length:Xn.isCompressedTexture&&Array.isArray(Xn.image)?Un.mipmaps.length:1}function Rn(Xn){return Xn===NearestFilter||Xn===NearestMipmapNearestFilter||Xn===NearestMipmapLinearFilter?9728:9729}function Dn(Xn){const Un=Xn.target;Un.removeEventListener("dispose",Dn),Hn(Un),Un.isVideoTexture&&Kt.delete(Un)}function Bn(Xn){const Un=Xn.target;Un.removeEventListener("dispose",Bn),Kn(Un)}function Hn(Xn){const Un=vt.get(Xn);if(Un.__webglInit===void 0)return;const rr=Xn.source,yr=hn.get(rr);if(yr){const Ir=yr[Un.__cacheKey];Ir.usedTimes--,Ir.usedTimes===0&&jn(Xn),Object.keys(yr).length===0&&hn.delete(rr)}vt.remove(Xn)}function jn(Xn){const Un=vt.get(Xn);ft.deleteTexture(Un.__webglTexture);const rr=Xn.source,yr=hn.get(rr);delete yr[Un.__cacheKey],Ct.memory.textures--}function Kn(Xn){const Un=Xn.texture,rr=vt.get(Xn),yr=vt.get(Un);if(yr.__webglTexture!==void 0&&(ft.deleteTexture(yr.__webglTexture),Ct.memory.textures--),Xn.depthTexture&&Xn.depthTexture.dispose(),Xn.isWebGLCubeRenderTarget)for(let Ir=0;Ir<6;Ir++)ft.deleteFramebuffer(rr.__webglFramebuffer[Ir]),rr.__webglDepthbuffer&&ft.deleteRenderbuffer(rr.__webglDepthbuffer[Ir]);else{if(ft.deleteFramebuffer(rr.__webglFramebuffer),rr.__webglDepthbuffer&&ft.deleteRenderbuffer(rr.__webglDepthbuffer),rr.__webglMultisampledFramebuffer&&ft.deleteFramebuffer(rr.__webglMultisampledFramebuffer),rr.__webglColorRenderbuffer)for(let Ir=0;Ir<rr.__webglColorRenderbuffer.length;Ir++)rr.__webglColorRenderbuffer[Ir]&&ft.deleteRenderbuffer(rr.__webglColorRenderbuffer[Ir]);rr.__webglDepthRenderbuffer&&ft.deleteRenderbuffer(rr.__webglDepthRenderbuffer)}if(Xn.isWebGLMultipleRenderTargets)for(let Ir=0,Fr=Un.length;Ir<Fr;Ir++){const pr=vt.get(Un[Ir]);pr.__webglTexture&&(ft.deleteTexture(pr.__webglTexture),Ct.memory.textures--),vt.remove(Un[Ir])}vt.remove(Un),vt.remove(Xn)}let zn=0;function lr(){zn=0}function Ln(){const Xn=zn;return Xn>=kt&&console.warn("THREE.WebGLTextures: Trying to use "+Xn+" texture units while this GPU supports only "+kt),zn+=1,Xn}function Vn(Xn){const Un=[];return Un.push(Xn.wrapS),Un.push(Xn.wrapT),Un.push(Xn.wrapR||0),Un.push(Xn.magFilter),Un.push(Xn.minFilter),Un.push(Xn.anisotropy),Un.push(Xn.internalFormat),Un.push(Xn.format),Un.push(Xn.type),Un.push(Xn.generateMipmaps),Un.push(Xn.premultiplyAlpha),Un.push(Xn.flipY),Un.push(Xn.unpackAlignment),Un.push(Xn.encoding),Un.join()}function Wn(Xn,Un){const rr=vt.get(Xn);if(Xn.isVideoTexture&&Po(Xn),Xn.isRenderTargetTexture===!1&&Xn.version>0&&rr.__version!==Xn.version){const yr=Xn.image;if(yr===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(yr.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Vr(rr,Xn,Un);return}}dt.bindTexture(3553,rr.__webglTexture,33984+Un)}function sr(Xn,Un){const rr=vt.get(Xn);if(Xn.version>0&&rr.__version!==Xn.version){Vr(rr,Xn,Un);return}dt.bindTexture(35866,rr.__webglTexture,33984+Un)}function Mn(Xn,Un){const rr=vt.get(Xn);if(Xn.version>0&&rr.__version!==Xn.version){Vr(rr,Xn,Un);return}dt.bindTexture(32879,rr.__webglTexture,33984+Un)}function ir(Xn,Un){const rr=vt.get(Xn);if(Xn.version>0&&rr.__version!==Xn.version){Jr(rr,Xn,Un);return}dt.bindTexture(34067,rr.__webglTexture,33984+Un)}const mr={[RepeatWrapping]:10497,[ClampToEdgeWrapping]:33071,[MirroredRepeatWrapping]:33648},tr={[NearestFilter]:9728,[NearestMipmapNearestFilter]:9984,[NearestMipmapLinearFilter]:9986,[LinearFilter]:9729,[LinearMipmapNearestFilter]:9985,[LinearMipmapLinearFilter]:9987};function Dr(Xn,Un,rr){if(rr?(ft.texParameteri(Xn,10242,mr[Un.wrapS]),ft.texParameteri(Xn,10243,mr[Un.wrapT]),(Xn===32879||Xn===35866)&&ft.texParameteri(Xn,32882,mr[Un.wrapR]),ft.texParameteri(Xn,10240,tr[Un.magFilter]),ft.texParameteri(Xn,10241,tr[Un.minFilter])):(ft.texParameteri(Xn,10242,33071),ft.texParameteri(Xn,10243,33071),(Xn===32879||Xn===35866)&&ft.texParameteri(Xn,32882,33071),(Un.wrapS!==ClampToEdgeWrapping||Un.wrapT!==ClampToEdgeWrapping)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),ft.texParameteri(Xn,10240,Rn(Un.magFilter)),ft.texParameteri(Xn,10241,Rn(Un.minFilter)),Un.minFilter!==NearestFilter&&Un.minFilter!==LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),lt.has("EXT_texture_filter_anisotropic")===!0){const yr=lt.get("EXT_texture_filter_anisotropic");if(Un.magFilter===NearestFilter||Un.minFilter!==NearestMipmapLinearFilter&&Un.minFilter!==LinearMipmapLinearFilter||Un.type===FloatType&&lt.has("OES_texture_float_linear")===!1||Rt===!1&&Un.type===HalfFloatType&&lt.has("OES_texture_half_float_linear")===!1)return;(Un.anisotropy>1||vt.get(Un).__currentAnisotropy)&&(ft.texParameterf(Xn,yr.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Un.anisotropy,Tt.getMaxAnisotropy())),vt.get(Un).__currentAnisotropy=Un.anisotropy)}}function Sr(Xn,Un){let rr=!1;Xn.__webglInit===void 0&&(Xn.__webglInit=!0,Un.addEventListener("dispose",Dn));const yr=Un.source;let Ir=hn.get(yr);Ir===void 0&&(Ir={},hn.set(yr,Ir));const Fr=Vn(Un);if(Fr!==Xn.__cacheKey){Ir[Fr]===void 0&&(Ir[Fr]={texture:ft.createTexture(),usedTimes:0},Ct.memory.textures++,rr=!0),Ir[Fr].usedTimes++;const pr=Ir[Xn.__cacheKey];pr!==void 0&&(Ir[Xn.__cacheKey].usedTimes--,pr.usedTimes===0&&jn(Un)),Xn.__cacheKey=Fr,Xn.__webglTexture=Ir[Fr].texture}return rr}function Vr(Xn,Un,rr){let yr=3553;(Un.isDataArrayTexture||Un.isCompressedArrayTexture)&&(yr=35866),Un.isData3DTexture&&(yr=32879);const Ir=Sr(Xn,Un),Fr=Un.source;dt.bindTexture(yr,Xn.__webglTexture,33984+rr);const pr=vt.get(Fr);if(Fr.version!==pr.__version||Ir===!0){dt.activeTexture(33984+rr),ft.pixelStorei(37440,Un.flipY),ft.pixelStorei(37441,Un.premultiplyAlpha),ft.pixelStorei(3317,Un.unpackAlignment),ft.pixelStorei(37443,0);const Zr=bn(Un)&&On(Un.image)===!1;let Cr=mn(Un.image,Zr,!1,Bt);Cr=Wo(Un,Cr);const lo=On(Cr)||Rt,Jn=Et.convert(Un.format,Un.encoding);let Tr=Et.convert(Un.type),Nr=Tn(Un.internalFormat,Jn,Tr,Un.encoding,Un.isVideoTexture);Dr(yr,Un,lo);let xn;const Nn=Un.mipmaps,Zn=Rt&&Un.isVideoTexture!==!0,hr=pr.__version===void 0||Ir===!0,Gn=In(Un,Cr,lo);if(Un.isDepthTexture)Nr=6402,Rt?Un.type===FloatType?Nr=36012:Un.type===UnsignedIntType?Nr=33190:Un.type===UnsignedInt248Type?Nr=35056:Nr=33189:Un.type===FloatType&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Un.format===DepthFormat&&Nr===6402&&Un.type!==UnsignedShortType&&Un.type!==UnsignedIntType&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Un.type=UnsignedIntType,Tr=Et.convert(Un.type)),Un.format===DepthStencilFormat&&Nr===6402&&(Nr=34041,Un.type!==UnsignedInt248Type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Un.type=UnsignedInt248Type,Tr=Et.convert(Un.type))),hr&&(Zn?dt.texStorage2D(3553,1,Nr,Cr.width,Cr.height):dt.texImage2D(3553,0,Nr,Cr.width,Cr.height,0,Jn,Tr,null));else if(Un.isDataTexture)if(Nn.length>0&&lo){Zn&&hr&&dt.texStorage2D(3553,Gn,Nr,Nn[0].width,Nn[0].height);for(let dr=0,Br=Nn.length;dr<Br;dr++)xn=Nn[dr],Zn?dt.texSubImage2D(3553,dr,0,0,xn.width,xn.height,Jn,Tr,xn.data):dt.texImage2D(3553,dr,Nr,xn.width,xn.height,0,Jn,Tr,xn.data);Un.generateMipmaps=!1}else Zn?(hr&&dt.texStorage2D(3553,Gn,Nr,Cr.width,Cr.height),dt.texSubImage2D(3553,0,0,0,Cr.width,Cr.height,Jn,Tr,Cr.data)):dt.texImage2D(3553,0,Nr,Cr.width,Cr.height,0,Jn,Tr,Cr.data);else if(Un.isCompressedTexture)if(Un.isCompressedArrayTexture){Zn&&hr&&dt.texStorage3D(35866,Gn,Nr,Nn[0].width,Nn[0].height,Cr.depth);for(let dr=0,Br=Nn.length;dr<Br;dr++)xn=Nn[dr],Un.format!==RGBAFormat?Jn!==null?Zn?dt.compressedTexSubImage3D(35866,dr,0,0,0,xn.width,xn.height,Cr.depth,Jn,xn.data,0,0):dt.compressedTexImage3D(35866,dr,Nr,xn.width,xn.height,Cr.depth,0,xn.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Zn?dt.texSubImage3D(35866,dr,0,0,0,xn.width,xn.height,Cr.depth,Jn,Tr,xn.data):dt.texImage3D(35866,dr,Nr,xn.width,xn.height,Cr.depth,0,Jn,Tr,xn.data)}else{Zn&&hr&&dt.texStorage2D(3553,Gn,Nr,Nn[0].width,Nn[0].height);for(let dr=0,Br=Nn.length;dr<Br;dr++)xn=Nn[dr],Un.format!==RGBAFormat?Jn!==null?Zn?dt.compressedTexSubImage2D(3553,dr,0,0,xn.width,xn.height,Jn,xn.data):dt.compressedTexImage2D(3553,dr,Nr,xn.width,xn.height,0,xn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Zn?dt.texSubImage2D(3553,dr,0,0,xn.width,xn.height,Jn,Tr,xn.data):dt.texImage2D(3553,dr,Nr,xn.width,xn.height,0,Jn,Tr,xn.data)}else if(Un.isDataArrayTexture)Zn?(hr&&dt.texStorage3D(35866,Gn,Nr,Cr.width,Cr.height,Cr.depth),dt.texSubImage3D(35866,0,0,0,0,Cr.width,Cr.height,Cr.depth,Jn,Tr,Cr.data)):dt.texImage3D(35866,0,Nr,Cr.width,Cr.height,Cr.depth,0,Jn,Tr,Cr.data);else if(Un.isData3DTexture)Zn?(hr&&dt.texStorage3D(32879,Gn,Nr,Cr.width,Cr.height,Cr.depth),dt.texSubImage3D(32879,0,0,0,0,Cr.width,Cr.height,Cr.depth,Jn,Tr,Cr.data)):dt.texImage3D(32879,0,Nr,Cr.width,Cr.height,Cr.depth,0,Jn,Tr,Cr.data);else if(Un.isFramebufferTexture){if(hr)if(Zn)dt.texStorage2D(3553,Gn,Nr,Cr.width,Cr.height);else{let dr=Cr.width,Br=Cr.height;for(let io=0;io<Gn;io++)dt.texImage2D(3553,io,Nr,dr,Br,0,Jn,Tr,null),dr>>=1,Br>>=1}}else if(Nn.length>0&&lo){Zn&&hr&&dt.texStorage2D(3553,Gn,Nr,Nn[0].width,Nn[0].height);for(let dr=0,Br=Nn.length;dr<Br;dr++)xn=Nn[dr],Zn?dt.texSubImage2D(3553,dr,0,0,Jn,Tr,xn):dt.texImage2D(3553,dr,Nr,Jn,Tr,xn);Un.generateMipmaps=!1}else Zn?(hr&&dt.texStorage2D(3553,Gn,Nr,Cr.width,Cr.height),dt.texSubImage2D(3553,0,0,0,Jn,Tr,Cr)):dt.texImage2D(3553,0,Nr,Jn,Tr,Cr);En(Un,lo)&&An(yr),pr.__version=Fr.version,Un.onUpdate&&Un.onUpdate(Un)}Xn.__version=Un.version}function Jr(Xn,Un,rr){if(Un.image.length!==6)return;const yr=Sr(Xn,Un),Ir=Un.source;dt.bindTexture(34067,Xn.__webglTexture,33984+rr);const Fr=vt.get(Ir);if(Ir.version!==Fr.__version||yr===!0){dt.activeTexture(33984+rr),ft.pixelStorei(37440,Un.flipY),ft.pixelStorei(37441,Un.premultiplyAlpha),ft.pixelStorei(3317,Un.unpackAlignment),ft.pixelStorei(37443,0);const pr=Un.isCompressedTexture||Un.image[0].isCompressedTexture,Zr=Un.image[0]&&Un.image[0].isDataTexture,Cr=[];for(let dr=0;dr<6;dr++)!pr&&!Zr?Cr[dr]=mn(Un.image[dr],!1,!0,Dt):Cr[dr]=Zr?Un.image[dr].image:Un.image[dr],Cr[dr]=Wo(Un,Cr[dr]);const lo=Cr[0],Jn=On(lo)||Rt,Tr=Et.convert(Un.format,Un.encoding),Nr=Et.convert(Un.type),xn=Tn(Un.internalFormat,Tr,Nr,Un.encoding),Nn=Rt&&Un.isVideoTexture!==!0,Zn=Fr.__version===void 0||yr===!0;let hr=In(Un,lo,Jn);Dr(34067,Un,Jn);let Gn;if(pr){Nn&&Zn&&dt.texStorage2D(34067,hr,xn,lo.width,lo.height);for(let dr=0;dr<6;dr++){Gn=Cr[dr].mipmaps;for(let Br=0;Br<Gn.length;Br++){const io=Gn[Br];Un.format!==RGBAFormat?Tr!==null?Nn?dt.compressedTexSubImage2D(34069+dr,Br,0,0,io.width,io.height,Tr,io.data):dt.compressedTexImage2D(34069+dr,Br,xn,io.width,io.height,0,io.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Nn?dt.texSubImage2D(34069+dr,Br,0,0,io.width,io.height,Tr,Nr,io.data):dt.texImage2D(34069+dr,Br,xn,io.width,io.height,0,Tr,Nr,io.data)}}}else{Gn=Un.mipmaps,Nn&&Zn&&(Gn.length>0&&hr++,dt.texStorage2D(34067,hr,xn,Cr[0].width,Cr[0].height));for(let dr=0;dr<6;dr++)if(Zr){Nn?dt.texSubImage2D(34069+dr,0,0,0,Cr[dr].width,Cr[dr].height,Tr,Nr,Cr[dr].data):dt.texImage2D(34069+dr,0,xn,Cr[dr].width,Cr[dr].height,0,Tr,Nr,Cr[dr].data);for(let Br=0;Br<Gn.length;Br++){const fo=Gn[Br].image[dr].image;Nn?dt.texSubImage2D(34069+dr,Br+1,0,0,fo.width,fo.height,Tr,Nr,fo.data):dt.texImage2D(34069+dr,Br+1,xn,fo.width,fo.height,0,Tr,Nr,fo.data)}}else{Nn?dt.texSubImage2D(34069+dr,0,0,0,Tr,Nr,Cr[dr]):dt.texImage2D(34069+dr,0,xn,Tr,Nr,Cr[dr]);for(let Br=0;Br<Gn.length;Br++){const io=Gn[Br];Nn?dt.texSubImage2D(34069+dr,Br+1,0,0,Tr,Nr,io.image[dr]):dt.texImage2D(34069+dr,Br+1,xn,Tr,Nr,io.image[dr])}}}En(Un,Jn)&&An(34067),Fr.__version=Ir.version,Un.onUpdate&&Un.onUpdate(Un)}Xn.__version=Un.version}function Yr(Xn,Un,rr,yr,Ir){const Fr=Et.convert(rr.format,rr.encoding),pr=Et.convert(rr.type),Zr=Tn(rr.internalFormat,Fr,pr,rr.encoding);vt.get(Un).__hasExternalTextures||(Ir===32879||Ir===35866?dt.texImage3D(Ir,0,Zr,Un.width,Un.height,Un.depth,0,Fr,pr,null):dt.texImage2D(Ir,0,Zr,Un.width,Un.height,0,Fr,pr,null)),dt.bindFramebuffer(36160,Xn),ho(Un)?Ut.framebufferTexture2DMultisampleEXT(36160,yr,Ir,vt.get(rr).__webglTexture,0,uo(Un)):(Ir===3553||Ir>=34069&&Ir<=34074)&&ft.framebufferTexture2D(36160,yr,Ir,vt.get(rr).__webglTexture,0),dt.bindFramebuffer(36160,null)}function _i(Xn,Un,rr){if(ft.bindRenderbuffer(36161,Xn),Un.depthBuffer&&!Un.stencilBuffer){let yr=33189;if(rr||ho(Un)){const Ir=Un.depthTexture;Ir&&Ir.isDepthTexture&&(Ir.type===FloatType?yr=36012:Ir.type===UnsignedIntType&&(yr=33190));const Fr=uo(Un);ho(Un)?Ut.renderbufferStorageMultisampleEXT(36161,Fr,yr,Un.width,Un.height):ft.renderbufferStorageMultisample(36161,Fr,yr,Un.width,Un.height)}else ft.renderbufferStorage(36161,yr,Un.width,Un.height);ft.framebufferRenderbuffer(36160,36096,36161,Xn)}else if(Un.depthBuffer&&Un.stencilBuffer){const yr=uo(Un);rr&&ho(Un)===!1?ft.renderbufferStorageMultisample(36161,yr,35056,Un.width,Un.height):ho(Un)?Ut.renderbufferStorageMultisampleEXT(36161,yr,35056,Un.width,Un.height):ft.renderbufferStorage(36161,34041,Un.width,Un.height),ft.framebufferRenderbuffer(36160,33306,36161,Xn)}else{const yr=Un.isWebGLMultipleRenderTargets===!0?Un.texture:[Un.texture];for(let Ir=0;Ir<yr.length;Ir++){const Fr=yr[Ir],pr=Et.convert(Fr.format,Fr.encoding),Zr=Et.convert(Fr.type),Cr=Tn(Fr.internalFormat,pr,Zr,Fr.encoding),lo=uo(Un);rr&&ho(Un)===!1?ft.renderbufferStorageMultisample(36161,lo,Cr,Un.width,Un.height):ho(Un)?Ut.renderbufferStorageMultisampleEXT(36161,lo,Cr,Un.width,Un.height):ft.renderbufferStorage(36161,Cr,Un.width,Un.height)}}ft.bindRenderbuffer(36161,null)}function Er(Xn,Un){if(Un&&Un.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(dt.bindFramebuffer(36160,Xn),!(Un.depthTexture&&Un.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!vt.get(Un.depthTexture).__webglTexture||Un.depthTexture.image.width!==Un.width||Un.depthTexture.image.height!==Un.height)&&(Un.depthTexture.image.width=Un.width,Un.depthTexture.image.height=Un.height,Un.depthTexture.needsUpdate=!0),Wn(Un.depthTexture,0);const yr=vt.get(Un.depthTexture).__webglTexture,Ir=uo(Un);if(Un.depthTexture.format===DepthFormat)ho(Un)?Ut.framebufferTexture2DMultisampleEXT(36160,36096,3553,yr,0,Ir):ft.framebufferTexture2D(36160,36096,3553,yr,0);else if(Un.depthTexture.format===DepthStencilFormat)ho(Un)?Ut.framebufferTexture2DMultisampleEXT(36160,33306,3553,yr,0,Ir):ft.framebufferTexture2D(36160,33306,3553,yr,0);else throw new Error("Unknown depthTexture format")}function kr(Xn){const Un=vt.get(Xn),rr=Xn.isWebGLCubeRenderTarget===!0;if(Xn.depthTexture&&!Un.__autoAllocateDepthBuffer){if(rr)throw new Error("target.depthTexture not supported in Cube render targets");Er(Un.__webglFramebuffer,Xn)}else if(rr){Un.__webglDepthbuffer=[];for(let yr=0;yr<6;yr++)dt.bindFramebuffer(36160,Un.__webglFramebuffer[yr]),Un.__webglDepthbuffer[yr]=ft.createRenderbuffer(),_i(Un.__webglDepthbuffer[yr],Xn,!1)}else dt.bindFramebuffer(36160,Un.__webglFramebuffer),Un.__webglDepthbuffer=ft.createRenderbuffer(),_i(Un.__webglDepthbuffer,Xn,!1);dt.bindFramebuffer(36160,null)}function Qr(Xn,Un,rr){const yr=vt.get(Xn);Un!==void 0&&Yr(yr.__webglFramebuffer,Xn,Xn.texture,36064,3553),rr!==void 0&&kr(Xn)}function so(Xn){const Un=Xn.texture,rr=vt.get(Xn),yr=vt.get(Un);Xn.addEventListener("dispose",Bn),Xn.isWebGLMultipleRenderTargets!==!0&&(yr.__webglTexture===void 0&&(yr.__webglTexture=ft.createTexture()),yr.__version=Un.version,Ct.memory.textures++);const Ir=Xn.isWebGLCubeRenderTarget===!0,Fr=Xn.isWebGLMultipleRenderTargets===!0,pr=On(Xn)||Rt;if(Ir){rr.__webglFramebuffer=[];for(let Zr=0;Zr<6;Zr++)rr.__webglFramebuffer[Zr]=ft.createFramebuffer()}else{if(rr.__webglFramebuffer=ft.createFramebuffer(),Fr)if(Tt.drawBuffers){const Zr=Xn.texture;for(let Cr=0,lo=Zr.length;Cr<lo;Cr++){const Jn=vt.get(Zr[Cr]);Jn.__webglTexture===void 0&&(Jn.__webglTexture=ft.createTexture(),Ct.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(Rt&&Xn.samples>0&&ho(Xn)===!1){const Zr=Fr?Un:[Un];rr.__webglMultisampledFramebuffer=ft.createFramebuffer(),rr.__webglColorRenderbuffer=[],dt.bindFramebuffer(36160,rr.__webglMultisampledFramebuffer);for(let Cr=0;Cr<Zr.length;Cr++){const lo=Zr[Cr];rr.__webglColorRenderbuffer[Cr]=ft.createRenderbuffer(),ft.bindRenderbuffer(36161,rr.__webglColorRenderbuffer[Cr]);const Jn=Et.convert(lo.format,lo.encoding),Tr=Et.convert(lo.type),Nr=Tn(lo.internalFormat,Jn,Tr,lo.encoding,Xn.isXRRenderTarget===!0),xn=uo(Xn);ft.renderbufferStorageMultisample(36161,xn,Nr,Xn.width,Xn.height),ft.framebufferRenderbuffer(36160,36064+Cr,36161,rr.__webglColorRenderbuffer[Cr])}ft.bindRenderbuffer(36161,null),Xn.depthBuffer&&(rr.__webglDepthRenderbuffer=ft.createRenderbuffer(),_i(rr.__webglDepthRenderbuffer,Xn,!0)),dt.bindFramebuffer(36160,null)}}if(Ir){dt.bindTexture(34067,yr.__webglTexture),Dr(34067,Un,pr);for(let Zr=0;Zr<6;Zr++)Yr(rr.__webglFramebuffer[Zr],Xn,Un,36064,34069+Zr);En(Un,pr)&&An(34067),dt.unbindTexture()}else if(Fr){const Zr=Xn.texture;for(let Cr=0,lo=Zr.length;Cr<lo;Cr++){const Jn=Zr[Cr],Tr=vt.get(Jn);dt.bindTexture(3553,Tr.__webglTexture),Dr(3553,Jn,pr),Yr(rr.__webglFramebuffer,Xn,Jn,36064+Cr,3553),En(Jn,pr)&&An(3553)}dt.unbindTexture()}else{let Zr=3553;(Xn.isWebGL3DRenderTarget||Xn.isWebGLArrayRenderTarget)&&(Rt?Zr=Xn.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),dt.bindTexture(Zr,yr.__webglTexture),Dr(Zr,Un,pr),Yr(rr.__webglFramebuffer,Xn,Un,36064,Zr),En(Un,pr)&&An(Zr),dt.unbindTexture()}Xn.depthBuffer&&kr(Xn)}function jr(Xn){const Un=On(Xn)||Rt,rr=Xn.isWebGLMultipleRenderTargets===!0?Xn.texture:[Xn.texture];for(let yr=0,Ir=rr.length;yr<Ir;yr++){const Fr=rr[yr];if(En(Fr,Un)){const pr=Xn.isWebGLCubeRenderTarget?34067:3553,Zr=vt.get(Fr).__webglTexture;dt.bindTexture(pr,Zr),An(pr),dt.unbindTexture()}}}function no(Xn){if(Rt&&Xn.samples>0&&ho(Xn)===!1){const Un=Xn.isWebGLMultipleRenderTargets?Xn.texture:[Xn.texture],rr=Xn.width,yr=Xn.height;let Ir=16384;const Fr=[],pr=Xn.stencilBuffer?33306:36096,Zr=vt.get(Xn),Cr=Xn.isWebGLMultipleRenderTargets===!0;if(Cr)for(let lo=0;lo<Un.length;lo++)dt.bindFramebuffer(36160,Zr.__webglMultisampledFramebuffer),ft.framebufferRenderbuffer(36160,36064+lo,36161,null),dt.bindFramebuffer(36160,Zr.__webglFramebuffer),ft.framebufferTexture2D(36009,36064+lo,3553,null,0);dt.bindFramebuffer(36008,Zr.__webglMultisampledFramebuffer),dt.bindFramebuffer(36009,Zr.__webglFramebuffer);for(let lo=0;lo<Un.length;lo++){Fr.push(36064+lo),Xn.depthBuffer&&Fr.push(pr);const Jn=Zr.__ignoreDepthValues!==void 0?Zr.__ignoreDepthValues:!1;if(Jn===!1&&(Xn.depthBuffer&&(Ir|=256),Xn.stencilBuffer&&(Ir|=1024)),Cr&&ft.framebufferRenderbuffer(36008,36064,36161,Zr.__webglColorRenderbuffer[lo]),Jn===!0&&(ft.invalidateFramebuffer(36008,[pr]),ft.invalidateFramebuffer(36009,[pr])),Cr){const Tr=vt.get(Un[lo]).__webglTexture;ft.framebufferTexture2D(36009,36064,3553,Tr,0)}ft.blitFramebuffer(0,0,rr,yr,0,0,rr,yr,Ir,9728),Zt&&ft.invalidateFramebuffer(36008,Fr)}if(dt.bindFramebuffer(36008,null),dt.bindFramebuffer(36009,null),Cr)for(let lo=0;lo<Un.length;lo++){dt.bindFramebuffer(36160,Zr.__webglMultisampledFramebuffer),ft.framebufferRenderbuffer(36160,36064+lo,36161,Zr.__webglColorRenderbuffer[lo]);const Jn=vt.get(Un[lo]).__webglTexture;dt.bindFramebuffer(36160,Zr.__webglFramebuffer),ft.framebufferTexture2D(36009,36064+lo,3553,Jn,0)}dt.bindFramebuffer(36009,Zr.__webglMultisampledFramebuffer)}}function uo(Xn){return Math.min(Ft,Xn.samples)}function ho(Xn){const Un=vt.get(Xn);return Rt&&Xn.samples>0&&lt.has("WEBGL_multisampled_render_to_texture")===!0&&Un.__useRenderToTexture!==!1}function Po(Xn){const Un=Ct.render.frame;Kt.get(Xn)!==Un&&(Kt.set(Xn,Un),Xn.update())}function Wo(Xn,Un){const rr=Xn.encoding,yr=Xn.format,Ir=Xn.type;return Xn.isCompressedTexture===!0||Xn.isVideoTexture===!0||Xn.format===_SRGBAFormat||rr!==LinearEncoding&&(rr===sRGBEncoding?Rt===!1?lt.has("EXT_sRGB")===!0&&yr===RGBAFormat?(Xn.format=_SRGBAFormat,Xn.minFilter=LinearFilter,Xn.generateMipmaps=!1):Un=ImageUtils.sRGBToLinear(Un):(yr!==RGBAFormat||Ir!==UnsignedByteType)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",rr)),Un}this.allocateTextureUnit=Ln,this.resetTextureUnits=lr,this.setTexture2D=Wn,this.setTexture2DArray=sr,this.setTexture3D=Mn,this.setTextureCube=ir,this.rebindTextures=Qr,this.setupRenderTarget=so,this.updateRenderTargetMipmap=jr,this.updateMultisampleRenderTarget=no,this.setupDepthRenderbuffer=kr,this.setupFrameBufferTexture=Yr,this.useMultisampledRTT=ho}function WebGLUtils(ft,lt,dt){const vt=dt.isWebGL2;function Tt(Et,Ct=null){let Rt;if(Et===UnsignedByteType)return 5121;if(Et===UnsignedShort4444Type)return 32819;if(Et===UnsignedShort5551Type)return 32820;if(Et===ByteType)return 5120;if(Et===ShortType)return 5122;if(Et===UnsignedShortType)return 5123;if(Et===IntType)return 5124;if(Et===UnsignedIntType)return 5125;if(Et===FloatType)return 5126;if(Et===HalfFloatType)return vt?5131:(Rt=lt.get("OES_texture_half_float"),Rt!==null?Rt.HALF_FLOAT_OES:null);if(Et===AlphaFormat)return 6406;if(Et===RGBAFormat)return 6408;if(Et===LuminanceFormat)return 6409;if(Et===LuminanceAlphaFormat)return 6410;if(Et===DepthFormat)return 6402;if(Et===DepthStencilFormat)return 34041;if(Et===_SRGBAFormat)return Rt=lt.get("EXT_sRGB"),Rt!==null?Rt.SRGB_ALPHA_EXT:null;if(Et===RedFormat)return 6403;if(Et===RedIntegerFormat)return 36244;if(Et===RGFormat)return 33319;if(Et===RGIntegerFormat)return 33320;if(Et===RGBAIntegerFormat)return 36249;if(Et===RGB_S3TC_DXT1_Format||Et===RGBA_S3TC_DXT1_Format||Et===RGBA_S3TC_DXT3_Format||Et===RGBA_S3TC_DXT5_Format)if(Ct===sRGBEncoding)if(Rt=lt.get("WEBGL_compressed_texture_s3tc_srgb"),Rt!==null){if(Et===RGB_S3TC_DXT1_Format)return Rt.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(Et===RGBA_S3TC_DXT1_Format)return Rt.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(Et===RGBA_S3TC_DXT3_Format)return Rt.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(Et===RGBA_S3TC_DXT5_Format)return Rt.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(Rt=lt.get("WEBGL_compressed_texture_s3tc"),Rt!==null){if(Et===RGB_S3TC_DXT1_Format)return Rt.COMPRESSED_RGB_S3TC_DXT1_EXT;if(Et===RGBA_S3TC_DXT1_Format)return Rt.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(Et===RGBA_S3TC_DXT3_Format)return Rt.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(Et===RGBA_S3TC_DXT5_Format)return Rt.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(Et===RGB_PVRTC_4BPPV1_Format||Et===RGB_PVRTC_2BPPV1_Format||Et===RGBA_PVRTC_4BPPV1_Format||Et===RGBA_PVRTC_2BPPV1_Format)if(Rt=lt.get("WEBGL_compressed_texture_pvrtc"),Rt!==null){if(Et===RGB_PVRTC_4BPPV1_Format)return Rt.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(Et===RGB_PVRTC_2BPPV1_Format)return Rt.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(Et===RGBA_PVRTC_4BPPV1_Format)return Rt.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(Et===RGBA_PVRTC_2BPPV1_Format)return Rt.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(Et===RGB_ETC1_Format)return Rt=lt.get("WEBGL_compressed_texture_etc1"),Rt!==null?Rt.COMPRESSED_RGB_ETC1_WEBGL:null;if(Et===RGB_ETC2_Format||Et===RGBA_ETC2_EAC_Format)if(Rt=lt.get("WEBGL_compressed_texture_etc"),Rt!==null){if(Et===RGB_ETC2_Format)return Ct===sRGBEncoding?Rt.COMPRESSED_SRGB8_ETC2:Rt.COMPRESSED_RGB8_ETC2;if(Et===RGBA_ETC2_EAC_Format)return Ct===sRGBEncoding?Rt.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:Rt.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(Et===RGBA_ASTC_4x4_Format||Et===RGBA_ASTC_5x4_Format||Et===RGBA_ASTC_5x5_Format||Et===RGBA_ASTC_6x5_Format||Et===RGBA_ASTC_6x6_Format||Et===RGBA_ASTC_8x5_Format||Et===RGBA_ASTC_8x6_Format||Et===RGBA_ASTC_8x8_Format||Et===RGBA_ASTC_10x5_Format||Et===RGBA_ASTC_10x6_Format||Et===RGBA_ASTC_10x8_Format||Et===RGBA_ASTC_10x10_Format||Et===RGBA_ASTC_12x10_Format||Et===RGBA_ASTC_12x12_Format)if(Rt=lt.get("WEBGL_compressed_texture_astc"),Rt!==null){if(Et===RGBA_ASTC_4x4_Format)return Ct===sRGBEncoding?Rt.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:Rt.COMPRESSED_RGBA_ASTC_4x4_KHR;if(Et===RGBA_ASTC_5x4_Format)return Ct===sRGBEncoding?Rt.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:Rt.COMPRESSED_RGBA_ASTC_5x4_KHR;if(Et===RGBA_ASTC_5x5_Format)return Ct===sRGBEncoding?Rt.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:Rt.COMPRESSED_RGBA_ASTC_5x5_KHR;if(Et===RGBA_ASTC_6x5_Format)return Ct===sRGBEncoding?Rt.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:Rt.COMPRESSED_RGBA_ASTC_6x5_KHR;if(Et===RGBA_ASTC_6x6_Format)return Ct===sRGBEncoding?Rt.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:Rt.COMPRESSED_RGBA_ASTC_6x6_KHR;if(Et===RGBA_ASTC_8x5_Format)return Ct===sRGBEncoding?Rt.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:Rt.COMPRESSED_RGBA_ASTC_8x5_KHR;if(Et===RGBA_ASTC_8x6_Format)return Ct===sRGBEncoding?Rt.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:Rt.COMPRESSED_RGBA_ASTC_8x6_KHR;if(Et===RGBA_ASTC_8x8_Format)return Ct===sRGBEncoding?Rt.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:Rt.COMPRESSED_RGBA_ASTC_8x8_KHR;if(Et===RGBA_ASTC_10x5_Format)return Ct===sRGBEncoding?Rt.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:Rt.COMPRESSED_RGBA_ASTC_10x5_KHR;if(Et===RGBA_ASTC_10x6_Format)return Ct===sRGBEncoding?Rt.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:Rt.COMPRESSED_RGBA_ASTC_10x6_KHR;if(Et===RGBA_ASTC_10x8_Format)return Ct===sRGBEncoding?Rt.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:Rt.COMPRESSED_RGBA_ASTC_10x8_KHR;if(Et===RGBA_ASTC_10x10_Format)return Ct===sRGBEncoding?Rt.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:Rt.COMPRESSED_RGBA_ASTC_10x10_KHR;if(Et===RGBA_ASTC_12x10_Format)return Ct===sRGBEncoding?Rt.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:Rt.COMPRESSED_RGBA_ASTC_12x10_KHR;if(Et===RGBA_ASTC_12x12_Format)return Ct===sRGBEncoding?Rt.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:Rt.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(Et===RGBA_BPTC_Format)if(Rt=lt.get("EXT_texture_compression_bptc"),Rt!==null){if(Et===RGBA_BPTC_Format)return Ct===sRGBEncoding?Rt.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:Rt.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(Et===RED_RGTC1_Format||Et===SIGNED_RED_RGTC1_Format||Et===RED_GREEN_RGTC2_Format||Et===SIGNED_RED_GREEN_RGTC2_Format)if(Rt=lt.get("EXT_texture_compression_rgtc"),Rt!==null){if(Et===RGBA_BPTC_Format)return Rt.COMPRESSED_RED_RGTC1_EXT;if(Et===SIGNED_RED_RGTC1_Format)return Rt.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(Et===RED_GREEN_RGTC2_Format)return Rt.COMPRESSED_RED_GREEN_RGTC2_EXT;if(Et===SIGNED_RED_GREEN_RGTC2_Format)return Rt.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return Et===UnsignedInt248Type?vt?34042:(Rt=lt.get("WEBGL_depth_texture"),Rt!==null?Rt.UNSIGNED_INT_24_8_WEBGL:null):ft[Et]!==void 0?ft[Et]:null}return{convert:Tt}}class ArrayCamera extends PerspectiveCamera{constructor(lt=[]){super(),this.isArrayCamera=!0,this.cameras=lt}}class Group extends Object3D{constructor(){super(),this.isGroup=!0,this.type="Group"}}const _moveEvent={type:"move"};class WebXRController{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vector3),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vector3),this._grip}dispatchEvent(lt){return this._targetRay!==null&&this._targetRay.dispatchEvent(lt),this._grip!==null&&this._grip.dispatchEvent(lt),this._hand!==null&&this._hand.dispatchEvent(lt),this}connect(lt){if(lt&&lt.hand){const dt=this._hand;if(dt)for(const vt of lt.hand.values())this._getHandJoint(dt,vt)}return this.dispatchEvent({type:"connected",data:lt}),this}disconnect(lt){return this.dispatchEvent({type:"disconnected",data:lt}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(lt,dt,vt){let Tt=null,Et=null,Ct=null;const Rt=this._targetRay,kt=this._grip,Dt=this._hand;if(lt&&dt.session.visibilityState!=="visible-blurred"){if(Dt&&lt.hand){Ct=!0;for(const ln of lt.hand.values()){const hn=dt.getJointPose(ln,vt),dn=this._getHandJoint(Dt,ln);hn!==null&&(dn.matrix.fromArray(hn.transform.matrix),dn.matrix.decompose(dn.position,dn.rotation,dn.scale),dn.jointRadius=hn.radius),dn.visible=hn!==null}const Bt=Dt.joints["index-finger-tip"],Ft=Dt.joints["thumb-tip"],Ut=Bt.position.distanceTo(Ft.position),Zt=.02,Kt=.005;Dt.inputState.pinching&&Ut>Zt+Kt?(Dt.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:lt.handedness,target:this})):!Dt.inputState.pinching&&Ut<=Zt-Kt&&(Dt.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:lt.handedness,target:this}))}else kt!==null&&lt.gripSpace&&(Et=dt.getPose(lt.gripSpace,vt),Et!==null&&(kt.matrix.fromArray(Et.transform.matrix),kt.matrix.decompose(kt.position,kt.rotation,kt.scale),Et.linearVelocity?(kt.hasLinearVelocity=!0,kt.linearVelocity.copy(Et.linearVelocity)):kt.hasLinearVelocity=!1,Et.angularVelocity?(kt.hasAngularVelocity=!0,kt.angularVelocity.copy(Et.angularVelocity)):kt.hasAngularVelocity=!1));Rt!==null&&(Tt=dt.getPose(lt.targetRaySpace,vt),Tt===null&&Et!==null&&(Tt=Et),Tt!==null&&(Rt.matrix.fromArray(Tt.transform.matrix),Rt.matrix.decompose(Rt.position,Rt.rotation,Rt.scale),Tt.linearVelocity?(Rt.hasLinearVelocity=!0,Rt.linearVelocity.copy(Tt.linearVelocity)):Rt.hasLinearVelocity=!1,Tt.angularVelocity?(Rt.hasAngularVelocity=!0,Rt.angularVelocity.copy(Tt.angularVelocity)):Rt.hasAngularVelocity=!1,this.dispatchEvent(_moveEvent)))}return Rt!==null&&(Rt.visible=Tt!==null),kt!==null&&(kt.visible=Et!==null),Dt!==null&&(Dt.visible=Ct!==null),this}_getHandJoint(lt,dt){if(lt.joints[dt.jointName]===void 0){const vt=new Group;vt.matrixAutoUpdate=!1,vt.visible=!1,lt.joints[dt.jointName]=vt,lt.add(vt)}return lt.joints[dt.jointName]}}class DepthTexture extends Texture{constructor(lt,dt,vt,Tt,Et,Ct,Rt,kt,Dt,Bt){if(Bt=Bt!==void 0?Bt:DepthFormat,Bt!==DepthFormat&&Bt!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");vt===void 0&&Bt===DepthFormat&&(vt=UnsignedIntType),vt===void 0&&Bt===DepthStencilFormat&&(vt=UnsignedInt248Type),super(null,Tt,Et,Ct,Rt,kt,Bt,vt,Dt),this.isDepthTexture=!0,this.image={width:lt,height:dt},this.magFilter=Rt!==void 0?Rt:NearestFilter,this.minFilter=kt!==void 0?kt:NearestFilter,this.flipY=!1,this.generateMipmaps=!1}}class WebXRManager extends EventDispatcher{constructor(lt,dt){super();const vt=this;let Tt=null,Et=1,Ct=null,Rt="local-floor",kt=1,Dt=null,Bt=null,Ft=null,Ut=null,Zt=null,Kt=null;const ln=dt.getContextAttributes();let hn=null,dn=null;const pn=[],mn=[],On=new Set,bn=new Map,En=new PerspectiveCamera;En.layers.enable(1),En.viewport=new Vector4;const An=new PerspectiveCamera;An.layers.enable(2),An.viewport=new Vector4;const Tn=[En,An],In=new ArrayCamera;In.layers.enable(1),In.layers.enable(2);let Rn=null,Dn=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Mn){let ir=pn[Mn];return ir===void 0&&(ir=new WebXRController,pn[Mn]=ir),ir.getTargetRaySpace()},this.getControllerGrip=function(Mn){let ir=pn[Mn];return ir===void 0&&(ir=new WebXRController,pn[Mn]=ir),ir.getGripSpace()},this.getHand=function(Mn){let ir=pn[Mn];return ir===void 0&&(ir=new WebXRController,pn[Mn]=ir),ir.getHandSpace()};function Bn(Mn){const ir=mn.indexOf(Mn.inputSource);if(ir===-1)return;const mr=pn[ir];mr!==void 0&&mr.dispatchEvent({type:Mn.type,data:Mn.inputSource})}function Hn(){Tt.removeEventListener("select",Bn),Tt.removeEventListener("selectstart",Bn),Tt.removeEventListener("selectend",Bn),Tt.removeEventListener("squeeze",Bn),Tt.removeEventListener("squeezestart",Bn),Tt.removeEventListener("squeezeend",Bn),Tt.removeEventListener("end",Hn),Tt.removeEventListener("inputsourceschange",jn);for(let Mn=0;Mn<pn.length;Mn++){const ir=mn[Mn];ir!==null&&(mn[Mn]=null,pn[Mn].disconnect(ir))}Rn=null,Dn=null,lt.setRenderTarget(hn),Zt=null,Ut=null,Ft=null,Tt=null,dn=null,sr.stop(),vt.isPresenting=!1,vt.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Mn){Et=Mn,vt.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Mn){Rt=Mn,vt.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return Dt||Ct},this.setReferenceSpace=function(Mn){Dt=Mn},this.getBaseLayer=function(){return Ut!==null?Ut:Zt},this.getBinding=function(){return Ft},this.getFrame=function(){return Kt},this.getSession=function(){return Tt},this.setSession=async function(Mn){if(Tt=Mn,Tt!==null){if(hn=lt.getRenderTarget(),Tt.addEventListener("select",Bn),Tt.addEventListener("selectstart",Bn),Tt.addEventListener("selectend",Bn),Tt.addEventListener("squeeze",Bn),Tt.addEventListener("squeezestart",Bn),Tt.addEventListener("squeezeend",Bn),Tt.addEventListener("end",Hn),Tt.addEventListener("inputsourceschange",jn),ln.xrCompatible!==!0&&await dt.makeXRCompatible(),Tt.renderState.layers===void 0||lt.capabilities.isWebGL2===!1){const ir={antialias:Tt.renderState.layers===void 0?ln.antialias:!0,alpha:ln.alpha,depth:ln.depth,stencil:ln.stencil,framebufferScaleFactor:Et};Zt=new XRWebGLLayer(Tt,dt,ir),Tt.updateRenderState({baseLayer:Zt}),dn=new WebGLRenderTarget(Zt.framebufferWidth,Zt.framebufferHeight,{format:RGBAFormat,type:UnsignedByteType,encoding:lt.outputEncoding,stencilBuffer:ln.stencil})}else{let ir=null,mr=null,tr=null;ln.depth&&(tr=ln.stencil?35056:33190,ir=ln.stencil?DepthStencilFormat:DepthFormat,mr=ln.stencil?UnsignedInt248Type:UnsignedIntType);const Dr={colorFormat:32856,depthFormat:tr,scaleFactor:Et};Ft=new XRWebGLBinding(Tt,dt),Ut=Ft.createProjectionLayer(Dr),Tt.updateRenderState({layers:[Ut]}),dn=new WebGLRenderTarget(Ut.textureWidth,Ut.textureHeight,{format:RGBAFormat,type:UnsignedByteType,depthTexture:new DepthTexture(Ut.textureWidth,Ut.textureHeight,mr,void 0,void 0,void 0,void 0,void 0,void 0,ir),stencilBuffer:ln.stencil,encoding:lt.outputEncoding,samples:ln.antialias?4:0});const Sr=lt.properties.get(dn);Sr.__ignoreDepthValues=Ut.ignoreDepthValues}dn.isXRRenderTarget=!0,this.setFoveation(kt),Dt=null,Ct=await Tt.requestReferenceSpace(Rt),sr.setContext(Tt),sr.start(),vt.isPresenting=!0,vt.dispatchEvent({type:"sessionstart"})}};function jn(Mn){for(let ir=0;ir<Mn.removed.length;ir++){const mr=Mn.removed[ir],tr=mn.indexOf(mr);tr>=0&&(mn[tr]=null,pn[tr].disconnect(mr))}for(let ir=0;ir<Mn.added.length;ir++){const mr=Mn.added[ir];let tr=mn.indexOf(mr);if(tr===-1){for(let Sr=0;Sr<pn.length;Sr++)if(Sr>=mn.length){mn.push(mr),tr=Sr;break}else if(mn[Sr]===null){mn[Sr]=mr,tr=Sr;break}if(tr===-1)break}const Dr=pn[tr];Dr&&Dr.connect(mr)}}const Kn=new Vector3,zn=new Vector3;function lr(Mn,ir,mr){Kn.setFromMatrixPosition(ir.matrixWorld),zn.setFromMatrixPosition(mr.matrixWorld);const tr=Kn.distanceTo(zn),Dr=ir.projectionMatrix.elements,Sr=mr.projectionMatrix.elements,Vr=Dr[14]/(Dr[10]-1),Jr=Dr[14]/(Dr[10]+1),Yr=(Dr[9]+1)/Dr[5],_i=(Dr[9]-1)/Dr[5],Er=(Dr[8]-1)/Dr[0],kr=(Sr[8]+1)/Sr[0],Qr=Vr*Er,so=Vr*kr,jr=tr/(-Er+kr),no=jr*-Er;ir.matrixWorld.decompose(Mn.position,Mn.quaternion,Mn.scale),Mn.translateX(no),Mn.translateZ(jr),Mn.matrixWorld.compose(Mn.position,Mn.quaternion,Mn.scale),Mn.matrixWorldInverse.copy(Mn.matrixWorld).invert();const uo=Vr+jr,ho=Jr+jr,Po=Qr-no,Wo=so+(tr-no),Xn=Yr*Jr/ho*uo,Un=_i*Jr/ho*uo;Mn.projectionMatrix.makePerspective(Po,Wo,Xn,Un,uo,ho)}function Ln(Mn,ir){ir===null?Mn.matrixWorld.copy(Mn.matrix):Mn.matrixWorld.multiplyMatrices(ir.matrixWorld,Mn.matrix),Mn.matrixWorldInverse.copy(Mn.matrixWorld).invert()}this.updateCamera=function(Mn){if(Tt===null)return;In.near=An.near=En.near=Mn.near,In.far=An.far=En.far=Mn.far,(Rn!==In.near||Dn!==In.far)&&(Tt.updateRenderState({depthNear:In.near,depthFar:In.far}),Rn=In.near,Dn=In.far);const ir=Mn.parent,mr=In.cameras;Ln(In,ir);for(let Dr=0;Dr<mr.length;Dr++)Ln(mr[Dr],ir);In.matrixWorld.decompose(In.position,In.quaternion,In.scale),Mn.matrix.copy(In.matrix),Mn.matrix.decompose(Mn.position,Mn.quaternion,Mn.scale);const tr=Mn.children;for(let Dr=0,Sr=tr.length;Dr<Sr;Dr++)tr[Dr].updateMatrixWorld(!0);mr.length===2?lr(In,En,An):In.projectionMatrix.copy(En.projectionMatrix)},this.getCamera=function(){return In},this.getFoveation=function(){if(!(Ut===null&&Zt===null))return kt},this.setFoveation=function(Mn){kt=Mn,Ut!==null&&(Ut.fixedFoveation=Mn),Zt!==null&&Zt.fixedFoveation!==void 0&&(Zt.fixedFoveation=Mn)},this.getPlanes=function(){return On};let Vn=null;function Wn(Mn,ir){if(Bt=ir.getViewerPose(Dt||Ct),Kt=ir,Bt!==null){const mr=Bt.views;Zt!==null&&(lt.setRenderTargetFramebuffer(dn,Zt.framebuffer),lt.setRenderTarget(dn));let tr=!1;mr.length!==In.cameras.length&&(In.cameras.length=0,tr=!0);for(let Dr=0;Dr<mr.length;Dr++){const Sr=mr[Dr];let Vr=null;if(Zt!==null)Vr=Zt.getViewport(Sr);else{const Yr=Ft.getViewSubImage(Ut,Sr);Vr=Yr.viewport,Dr===0&&(lt.setRenderTargetTextures(dn,Yr.colorTexture,Ut.ignoreDepthValues?void 0:Yr.depthStencilTexture),lt.setRenderTarget(dn))}let Jr=Tn[Dr];Jr===void 0&&(Jr=new PerspectiveCamera,Jr.layers.enable(Dr),Jr.viewport=new Vector4,Tn[Dr]=Jr),Jr.matrix.fromArray(Sr.transform.matrix),Jr.projectionMatrix.fromArray(Sr.projectionMatrix),Jr.viewport.set(Vr.x,Vr.y,Vr.width,Vr.height),Dr===0&&In.matrix.copy(Jr.matrix),tr===!0&&In.cameras.push(Jr)}}for(let mr=0;mr<pn.length;mr++){const tr=mn[mr],Dr=pn[mr];tr!==null&&Dr!==void 0&&Dr.update(tr,ir,Dt||Ct)}if(Vn&&Vn(Mn,ir),ir.detectedPlanes){vt.dispatchEvent({type:"planesdetected",data:ir.detectedPlanes});let mr=null;for(const tr of On)ir.detectedPlanes.has(tr)||(mr===null&&(mr=[]),mr.push(tr));if(mr!==null)for(const tr of mr)On.delete(tr),bn.delete(tr),vt.dispatchEvent({type:"planeremoved",data:tr});for(const tr of ir.detectedPlanes)if(!On.has(tr))On.add(tr),bn.set(tr,ir.lastChangedTime),vt.dispatchEvent({type:"planeadded",data:tr});else{const Dr=bn.get(tr);tr.lastChangedTime>Dr&&(bn.set(tr,tr.lastChangedTime),vt.dispatchEvent({type:"planechanged",data:tr}))}}Kt=null}const sr=new WebGLAnimation;sr.setAnimationLoop(Wn),this.setAnimationLoop=function(Mn){Vn=Mn},this.dispose=function(){}}}function WebGLMaterials(ft,lt){function dt(ln,hn){hn.color.getRGB(ln.fogColor.value,getUnlitUniformColorSpace(ft)),hn.isFog?(ln.fogNear.value=hn.near,ln.fogFar.value=hn.far):hn.isFogExp2&&(ln.fogDensity.value=hn.density)}function vt(ln,hn,dn,pn,mn){hn.isMeshBasicMaterial||hn.isMeshLambertMaterial?Tt(ln,hn):hn.isMeshToonMaterial?(Tt(ln,hn),Bt(ln,hn)):hn.isMeshPhongMaterial?(Tt(ln,hn),Dt(ln,hn)):hn.isMeshStandardMaterial?(Tt(ln,hn),Ft(ln,hn),hn.isMeshPhysicalMaterial&&Ut(ln,hn,mn)):hn.isMeshMatcapMaterial?(Tt(ln,hn),Zt(ln,hn)):hn.isMeshDepthMaterial?Tt(ln,hn):hn.isMeshDistanceMaterial?(Tt(ln,hn),Kt(ln,hn)):hn.isMeshNormalMaterial?Tt(ln,hn):hn.isLineBasicMaterial?(Et(ln,hn),hn.isLineDashedMaterial&&Ct(ln,hn)):hn.isPointsMaterial?Rt(ln,hn,dn,pn):hn.isSpriteMaterial?kt(ln,hn):hn.isShadowMaterial?(ln.color.value.copy(hn.color),ln.opacity.value=hn.opacity):hn.isShaderMaterial&&(hn.uniformsNeedUpdate=!1)}function Tt(ln,hn){ln.opacity.value=hn.opacity,hn.color&&ln.diffuse.value.copy(hn.color),hn.emissive&&ln.emissive.value.copy(hn.emissive).multiplyScalar(hn.emissiveIntensity),hn.map&&(ln.map.value=hn.map),hn.alphaMap&&(ln.alphaMap.value=hn.alphaMap),hn.bumpMap&&(ln.bumpMap.value=hn.bumpMap,ln.bumpScale.value=hn.bumpScale,hn.side===BackSide&&(ln.bumpScale.value*=-1)),hn.displacementMap&&(ln.displacementMap.value=hn.displacementMap,ln.displacementScale.value=hn.displacementScale,ln.displacementBias.value=hn.displacementBias),hn.emissiveMap&&(ln.emissiveMap.value=hn.emissiveMap),hn.normalMap&&(ln.normalMap.value=hn.normalMap,ln.normalScale.value.copy(hn.normalScale),hn.side===BackSide&&ln.normalScale.value.negate()),hn.specularMap&&(ln.specularMap.value=hn.specularMap),hn.alphaTest>0&&(ln.alphaTest.value=hn.alphaTest);const dn=lt.get(hn).envMap;if(dn&&(ln.envMap.value=dn,ln.flipEnvMap.value=dn.isCubeTexture&&dn.isRenderTargetTexture===!1?-1:1,ln.reflectivity.value=hn.reflectivity,ln.ior.value=hn.ior,ln.refractionRatio.value=hn.refractionRatio),hn.lightMap){ln.lightMap.value=hn.lightMap;const On=ft.useLegacyLights===!0?Math.PI:1;ln.lightMapIntensity.value=hn.lightMapIntensity*On}hn.aoMap&&(ln.aoMap.value=hn.aoMap,ln.aoMapIntensity.value=hn.aoMapIntensity);let pn;hn.map?pn=hn.map:hn.specularMap?pn=hn.specularMap:hn.displacementMap?pn=hn.displacementMap:hn.normalMap?pn=hn.normalMap:hn.bumpMap?pn=hn.bumpMap:hn.roughnessMap?pn=hn.roughnessMap:hn.metalnessMap?pn=hn.metalnessMap:hn.alphaMap?pn=hn.alphaMap:hn.emissiveMap?pn=hn.emissiveMap:hn.clearcoatMap?pn=hn.clearcoatMap:hn.clearcoatNormalMap?pn=hn.clearcoatNormalMap:hn.clearcoatRoughnessMap?pn=hn.clearcoatRoughnessMap:hn.iridescenceMap?pn=hn.iridescenceMap:hn.iridescenceThicknessMap?pn=hn.iridescenceThicknessMap:hn.specularIntensityMap?pn=hn.specularIntensityMap:hn.specularColorMap?pn=hn.specularColorMap:hn.transmissionMap?pn=hn.transmissionMap:hn.thicknessMap?pn=hn.thicknessMap:hn.sheenColorMap?pn=hn.sheenColorMap:hn.sheenRoughnessMap&&(pn=hn.sheenRoughnessMap),pn!==void 0&&(pn.isWebGLRenderTarget&&(pn=pn.texture),pn.matrixAutoUpdate===!0&&pn.updateMatrix(),ln.uvTransform.value.copy(pn.matrix));let mn;hn.aoMap?mn=hn.aoMap:hn.lightMap&&(mn=hn.lightMap),mn!==void 0&&(mn.isWebGLRenderTarget&&(mn=mn.texture),mn.matrixAutoUpdate===!0&&mn.updateMatrix(),ln.uv2Transform.value.copy(mn.matrix))}function Et(ln,hn){ln.diffuse.value.copy(hn.color),ln.opacity.value=hn.opacity}function Ct(ln,hn){ln.dashSize.value=hn.dashSize,ln.totalSize.value=hn.dashSize+hn.gapSize,ln.scale.value=hn.scale}function Rt(ln,hn,dn,pn){ln.diffuse.value.copy(hn.color),ln.opacity.value=hn.opacity,ln.size.value=hn.size*dn,ln.scale.value=pn*.5,hn.map&&(ln.map.value=hn.map),hn.alphaMap&&(ln.alphaMap.value=hn.alphaMap),hn.alphaTest>0&&(ln.alphaTest.value=hn.alphaTest);let mn;hn.map?mn=hn.map:hn.alphaMap&&(mn=hn.alphaMap),mn!==void 0&&(mn.matrixAutoUpdate===!0&&mn.updateMatrix(),ln.uvTransform.value.copy(mn.matrix))}function kt(ln,hn){ln.diffuse.value.copy(hn.color),ln.opacity.value=hn.opacity,ln.rotation.value=hn.rotation,hn.map&&(ln.map.value=hn.map),hn.alphaMap&&(ln.alphaMap.value=hn.alphaMap),hn.alphaTest>0&&(ln.alphaTest.value=hn.alphaTest);let dn;hn.map?dn=hn.map:hn.alphaMap&&(dn=hn.alphaMap),dn!==void 0&&(dn.matrixAutoUpdate===!0&&dn.updateMatrix(),ln.uvTransform.value.copy(dn.matrix))}function Dt(ln,hn){ln.specular.value.copy(hn.specular),ln.shininess.value=Math.max(hn.shininess,1e-4)}function Bt(ln,hn){hn.gradientMap&&(ln.gradientMap.value=hn.gradientMap)}function Ft(ln,hn){ln.roughness.value=hn.roughness,ln.metalness.value=hn.metalness,hn.roughnessMap&&(ln.roughnessMap.value=hn.roughnessMap),hn.metalnessMap&&(ln.metalnessMap.value=hn.metalnessMap),lt.get(hn).envMap&&(ln.envMapIntensity.value=hn.envMapIntensity)}function Ut(ln,hn,dn){ln.ior.value=hn.ior,hn.sheen>0&&(ln.sheenColor.value.copy(hn.sheenColor).multiplyScalar(hn.sheen),ln.sheenRoughness.value=hn.sheenRoughness,hn.sheenColorMap&&(ln.sheenColorMap.value=hn.sheenColorMap),hn.sheenRoughnessMap&&(ln.sheenRoughnessMap.value=hn.sheenRoughnessMap)),hn.clearcoat>0&&(ln.clearcoat.value=hn.clearcoat,ln.clearcoatRoughness.value=hn.clearcoatRoughness,hn.clearcoatMap&&(ln.clearcoatMap.value=hn.clearcoatMap),hn.clearcoatRoughnessMap&&(ln.clearcoatRoughnessMap.value=hn.clearcoatRoughnessMap),hn.clearcoatNormalMap&&(ln.clearcoatNormalScale.value.copy(hn.clearcoatNormalScale),ln.clearcoatNormalMap.value=hn.clearcoatNormalMap,hn.side===BackSide&&ln.clearcoatNormalScale.value.negate())),hn.iridescence>0&&(ln.iridescence.value=hn.iridescence,ln.iridescenceIOR.value=hn.iridescenceIOR,ln.iridescenceThicknessMinimum.value=hn.iridescenceThicknessRange[0],ln.iridescenceThicknessMaximum.value=hn.iridescenceThicknessRange[1],hn.iridescenceMap&&(ln.iridescenceMap.value=hn.iridescenceMap),hn.iridescenceThicknessMap&&(ln.iridescenceThicknessMap.value=hn.iridescenceThicknessMap)),hn.transmission>0&&(ln.transmission.value=hn.transmission,ln.transmissionSamplerMap.value=dn.texture,ln.transmissionSamplerSize.value.set(dn.width,dn.height),hn.transmissionMap&&(ln.transmissionMap.value=hn.transmissionMap),ln.thickness.value=hn.thickness,hn.thicknessMap&&(ln.thicknessMap.value=hn.thicknessMap),ln.attenuationDistance.value=hn.attenuationDistance,ln.attenuationColor.value.copy(hn.attenuationColor)),ln.specularIntensity.value=hn.specularIntensity,ln.specularColor.value.copy(hn.specularColor),hn.specularIntensityMap&&(ln.specularIntensityMap.value=hn.specularIntensityMap),hn.specularColorMap&&(ln.specularColorMap.value=hn.specularColorMap)}function Zt(ln,hn){hn.matcap&&(ln.matcap.value=hn.matcap)}function Kt(ln,hn){ln.referencePosition.value.copy(hn.referencePosition),ln.nearDistance.value=hn.nearDistance,ln.farDistance.value=hn.farDistance}return{refreshFogUniforms:dt,refreshMaterialUniforms:vt}}function WebGLUniformsGroups(ft,lt,dt,vt){let Tt={},Et={},Ct=[];const Rt=dt.isWebGL2?ft.getParameter(35375):0;function kt(pn,mn){const On=mn.program;vt.uniformBlockBinding(pn,On)}function Dt(pn,mn){let On=Tt[pn.id];On===void 0&&(Kt(pn),On=Bt(pn),Tt[pn.id]=On,pn.addEventListener("dispose",hn));const bn=mn.program;vt.updateUBOMapping(pn,bn);const En=lt.render.frame;Et[pn.id]!==En&&(Ut(pn),Et[pn.id]=En)}function Bt(pn){const mn=Ft();pn.__bindingPointIndex=mn;const On=ft.createBuffer(),bn=pn.__size,En=pn.usage;return ft.bindBuffer(35345,On),ft.bufferData(35345,bn,En),ft.bindBuffer(35345,null),ft.bindBufferBase(35345,mn,On),On}function Ft(){for(let pn=0;pn<Rt;pn++)if(Ct.indexOf(pn)===-1)return Ct.push(pn),pn;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function Ut(pn){const mn=Tt[pn.id],On=pn.uniforms,bn=pn.__cache;ft.bindBuffer(35345,mn);for(let En=0,An=On.length;En<An;En++){const Tn=On[En];if(Zt(Tn,En,bn)===!0){const In=Tn.__offset,Rn=Array.isArray(Tn.value)?Tn.value:[Tn.value];let Dn=0;for(let Bn=0;Bn<Rn.length;Bn++){const Hn=Rn[Bn],jn=ln(Hn);typeof Hn=="number"?(Tn.__data[0]=Hn,ft.bufferSubData(35345,In+Dn,Tn.__data)):Hn.isMatrix3?(Tn.__data[0]=Hn.elements[0],Tn.__data[1]=Hn.elements[1],Tn.__data[2]=Hn.elements[2],Tn.__data[3]=Hn.elements[0],Tn.__data[4]=Hn.elements[3],Tn.__data[5]=Hn.elements[4],Tn.__data[6]=Hn.elements[5],Tn.__data[7]=Hn.elements[0],Tn.__data[8]=Hn.elements[6],Tn.__data[9]=Hn.elements[7],Tn.__data[10]=Hn.elements[8],Tn.__data[11]=Hn.elements[0]):(Hn.toArray(Tn.__data,Dn),Dn+=jn.storage/Float32Array.BYTES_PER_ELEMENT)}ft.bufferSubData(35345,In,Tn.__data)}}ft.bindBuffer(35345,null)}function Zt(pn,mn,On){const bn=pn.value;if(On[mn]===void 0){if(typeof bn=="number")On[mn]=bn;else{const En=Array.isArray(bn)?bn:[bn],An=[];for(let Tn=0;Tn<En.length;Tn++)An.push(En[Tn].clone());On[mn]=An}return!0}else if(typeof bn=="number"){if(On[mn]!==bn)return On[mn]=bn,!0}else{const En=Array.isArray(On[mn])?On[mn]:[On[mn]],An=Array.isArray(bn)?bn:[bn];for(let Tn=0;Tn<En.length;Tn++){const In=En[Tn];if(In.equals(An[Tn])===!1)return In.copy(An[Tn]),!0}}return!1}function Kt(pn){const mn=pn.uniforms;let On=0;const bn=16;let En=0;for(let An=0,Tn=mn.length;An<Tn;An++){const In=mn[An],Rn={boundary:0,storage:0},Dn=Array.isArray(In.value)?In.value:[In.value];for(let Bn=0,Hn=Dn.length;Bn<Hn;Bn++){const jn=Dn[Bn],Kn=ln(jn);Rn.boundary+=Kn.boundary,Rn.storage+=Kn.storage}if(In.__data=new Float32Array(Rn.storage/Float32Array.BYTES_PER_ELEMENT),In.__offset=On,An>0){En=On%bn;const Bn=bn-En;En!==0&&Bn-Rn.boundary<0&&(On+=bn-En,In.__offset=On)}On+=Rn.storage}return En=On%bn,En>0&&(On+=bn-En),pn.__size=On,pn.__cache={},this}function ln(pn){const mn={boundary:0,storage:0};return typeof pn=="number"?(mn.boundary=4,mn.storage=4):pn.isVector2?(mn.boundary=8,mn.storage=8):pn.isVector3||pn.isColor?(mn.boundary=16,mn.storage=12):pn.isVector4?(mn.boundary=16,mn.storage=16):pn.isMatrix3?(mn.boundary=48,mn.storage=48):pn.isMatrix4?(mn.boundary=64,mn.storage=64):pn.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",pn),mn}function hn(pn){const mn=pn.target;mn.removeEventListener("dispose",hn);const On=Ct.indexOf(mn.__bindingPointIndex);Ct.splice(On,1),ft.deleteBuffer(Tt[mn.id]),delete Tt[mn.id],delete Et[mn.id]}function dn(){for(const pn in Tt)ft.deleteBuffer(Tt[pn]);Ct=[],Tt={},Et={}}return{bind:kt,update:Dt,dispose:dn}}function createCanvasElement(){const ft=createElementNS$1("canvas");return ft.style.display="block",ft}function WebGLRenderer(ft={}){this.isWebGLRenderer=!0;const lt=ft.canvas!==void 0?ft.canvas:createCanvasElement(),dt=ft.context!==void 0?ft.context:null,vt=ft.depth!==void 0?ft.depth:!0,Tt=ft.stencil!==void 0?ft.stencil:!0,Et=ft.antialias!==void 0?ft.antialias:!1,Ct=ft.premultipliedAlpha!==void 0?ft.premultipliedAlpha:!0,Rt=ft.preserveDrawingBuffer!==void 0?ft.preserveDrawingBuffer:!1,kt=ft.powerPreference!==void 0?ft.powerPreference:"default",Dt=ft.failIfMajorPerformanceCaveat!==void 0?ft.failIfMajorPerformanceCaveat:!1;let Bt;dt!==null?Bt=dt.getContextAttributes().alpha:Bt=ft.alpha!==void 0?ft.alpha:!1;let Ft=null,Ut=null;const Zt=[],Kt=[];this.domElement=lt,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=LinearEncoding,this.useLegacyLights=!0,this.toneMapping=NoToneMapping,this.toneMappingExposure=1;const ln=this;let hn=!1,dn=0,pn=0,mn=null,On=-1,bn=null;const En=new Vector4,An=new Vector4;let Tn=null,In=lt.width,Rn=lt.height,Dn=1,Bn=null,Hn=null;const jn=new Vector4(0,0,In,Rn),Kn=new Vector4(0,0,In,Rn);let zn=!1;const lr=new Frustum;let Ln=!1,Vn=!1,Wn=null;const sr=new Matrix4,Mn=new Vector3,ir={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function mr(){return mn===null?Dn:1}let tr=dt;function Dr(Qn,Or){for(let wr=0;wr<Qn.length;wr++){const fr=Qn[wr],Rr=lt.getContext(fr,Or);if(Rr!==null)return Rr}return null}try{const Qn={alpha:!0,depth:vt,stencil:Tt,antialias:Et,premultipliedAlpha:Ct,preserveDrawingBuffer:Rt,powerPreference:kt,failIfMajorPerformanceCaveat:Dt};if("setAttribute"in lt&&lt.setAttribute("data-engine",`three.js r${REVISION}`),lt.addEventListener("webglcontextlost",Tr,!1),lt.addEventListener("webglcontextrestored",Nr,!1),lt.addEventListener("webglcontextcreationerror",xn,!1),tr===null){const Or=["webgl2","webgl","experimental-webgl"];if(ln.isWebGL1Renderer===!0&&Or.shift(),tr=Dr(Or,Qn),tr===null)throw Dr(Or)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}tr.getShaderPrecisionFormat===void 0&&(tr.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Qn){throw console.error("THREE.WebGLRenderer: "+Qn.message),Qn}let Sr,Vr,Jr,Yr,_i,Er,kr,Qr,so,jr,no,uo,ho,Po,Wo,Xn,Un,rr,yr,Ir,Fr,pr,Zr,Cr;function lo(){Sr=new WebGLExtensions(tr),Vr=new WebGLCapabilities(tr,Sr,ft),Sr.init(Vr),pr=new WebGLUtils(tr,Sr,Vr),Jr=new WebGLState(tr,Sr,Vr),Yr=new WebGLInfo,_i=new WebGLProperties,Er=new WebGLTextures(tr,Sr,Jr,_i,Vr,pr,Yr),kr=new WebGLCubeMaps(ln),Qr=new WebGLCubeUVMaps(ln),so=new WebGLAttributes(tr,Vr),Zr=new WebGLBindingStates(tr,Sr,so,Vr),jr=new WebGLGeometries(tr,so,Yr,Zr),no=new WebGLObjects(tr,jr,so,Yr),yr=new WebGLMorphtargets(tr,Vr,Er),Xn=new WebGLClipping(_i),uo=new WebGLPrograms(ln,kr,Qr,Sr,Vr,Zr,Xn),ho=new WebGLMaterials(ln,_i),Po=new WebGLRenderLists,Wo=new WebGLRenderStates(Sr,Vr),rr=new WebGLBackground(ln,kr,Qr,Jr,no,Bt,Ct),Un=new WebGLShadowMap(ln,no,Vr),Cr=new WebGLUniformsGroups(tr,Yr,Vr,Jr),Ir=new WebGLBufferRenderer(tr,Sr,Yr,Vr),Fr=new WebGLIndexedBufferRenderer(tr,Sr,Yr,Vr),Yr.programs=uo.programs,ln.capabilities=Vr,ln.extensions=Sr,ln.properties=_i,ln.renderLists=Po,ln.shadowMap=Un,ln.state=Jr,ln.info=Yr}lo();const Jn=new WebXRManager(ln,tr);this.xr=Jn,this.getContext=function(){return tr},this.getContextAttributes=function(){return tr.getContextAttributes()},this.forceContextLoss=function(){const Qn=Sr.get("WEBGL_lose_context");Qn&&Qn.loseContext()},this.forceContextRestore=function(){const Qn=Sr.get("WEBGL_lose_context");Qn&&Qn.restoreContext()},this.getPixelRatio=function(){return Dn},this.setPixelRatio=function(Qn){Qn!==void 0&&(Dn=Qn,this.setSize(In,Rn,!1))},this.getSize=function(Qn){return Qn.set(In,Rn)},this.setSize=function(Qn,Or,wr=!0){if(Jn.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}In=Qn,Rn=Or,lt.width=Math.floor(Qn*Dn),lt.height=Math.floor(Or*Dn),wr===!0&&(lt.style.width=Qn+"px",lt.style.height=Or+"px"),this.setViewport(0,0,Qn,Or)},this.getDrawingBufferSize=function(Qn){return Qn.set(In*Dn,Rn*Dn).floor()},this.setDrawingBufferSize=function(Qn,Or,wr){In=Qn,Rn=Or,Dn=wr,lt.width=Math.floor(Qn*wr),lt.height=Math.floor(Or*wr),this.setViewport(0,0,Qn,Or)},this.getCurrentViewport=function(Qn){return Qn.copy(En)},this.getViewport=function(Qn){return Qn.copy(jn)},this.setViewport=function(Qn,Or,wr,fr){Qn.isVector4?jn.set(Qn.x,Qn.y,Qn.z,Qn.w):jn.set(Qn,Or,wr,fr),Jr.viewport(En.copy(jn).multiplyScalar(Dn).floor())},this.getScissor=function(Qn){return Qn.copy(Kn)},this.setScissor=function(Qn,Or,wr,fr){Qn.isVector4?Kn.set(Qn.x,Qn.y,Qn.z,Qn.w):Kn.set(Qn,Or,wr,fr),Jr.scissor(An.copy(Kn).multiplyScalar(Dn).floor())},this.getScissorTest=function(){return zn},this.setScissorTest=function(Qn){Jr.setScissorTest(zn=Qn)},this.setOpaqueSort=function(Qn){Bn=Qn},this.setTransparentSort=function(Qn){Hn=Qn},this.getClearColor=function(Qn){return Qn.copy(rr.getClearColor())},this.setClearColor=function(){rr.setClearColor.apply(rr,arguments)},this.getClearAlpha=function(){return rr.getClearAlpha()},this.setClearAlpha=function(){rr.setClearAlpha.apply(rr,arguments)},this.clear=function(Qn=!0,Or=!0,wr=!0){let fr=0;Qn&&(fr|=16384),Or&&(fr|=256),wr&&(fr|=1024),tr.clear(fr)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){lt.removeEventListener("webglcontextlost",Tr,!1),lt.removeEventListener("webglcontextrestored",Nr,!1),lt.removeEventListener("webglcontextcreationerror",xn,!1),Po.dispose(),Wo.dispose(),_i.dispose(),kr.dispose(),Qr.dispose(),no.dispose(),Zr.dispose(),Cr.dispose(),uo.dispose(),Jn.dispose(),Jn.removeEventListener("sessionstart",Br),Jn.removeEventListener("sessionend",io),Wn&&(Wn.dispose(),Wn=null),fo.stop()};function Tr(Qn){Qn.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),hn=!0}function Nr(){console.log("THREE.WebGLRenderer: Context Restored."),hn=!1;const Qn=Yr.autoReset,Or=Un.enabled,wr=Un.autoUpdate,fr=Un.needsUpdate,Rr=Un.type;lo(),Yr.autoReset=Qn,Un.enabled=Or,Un.autoUpdate=wr,Un.needsUpdate=fr,Un.type=Rr}function xn(Qn){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Qn.statusMessage)}function Nn(Qn){const Or=Qn.target;Or.removeEventListener("dispose",Nn),Zn(Or)}function Zn(Qn){hr(Qn),_i.remove(Qn)}function hr(Qn){const Or=_i.get(Qn).programs;Or!==void 0&&(Or.forEach(function(wr){uo.releaseProgram(wr)}),Qn.isShaderMaterial&&uo.releaseShaderCache(Qn))}this.renderBufferDirect=function(Qn,Or,wr,fr,Rr,$o){Or===null&&(Or=ir);const So=Rr.isMesh&&Rr.matrixWorld.determinant()<0,Do=LO(Qn,Or,wr,fr,Rr);Jr.setMaterial(fr,So);let xo=wr.index,Io=1;fr.wireframe===!0&&(xo=jr.getWireframeAttribute(wr),Io=2);const Co=wr.drawRange,Gr=wr.attributes.position;let Os=Co.start*Io,zs=(Co.start+Co.count)*Io;$o!==null&&(Os=Math.max(Os,$o.start*Io),zs=Math.min(zs,($o.start+$o.count)*Io)),xo!==null?(Os=Math.max(Os,0),zs=Math.min(zs,xo.count)):Gr!=null&&(Os=Math.max(Os,0),zs=Math.min(zs,Gr.count));const xl=zs-Os;if(xl<0||xl===1/0)return;Zr.setup(Rr,fr,Do,wr,xo);let lu,Fo=Ir;if(xo!==null&&(lu=so.get(xo),Fo=Fr,Fo.setIndex(lu)),Rr.isMesh)fr.wireframe===!0?(Jr.setLineWidth(fr.wireframeLinewidth*mr()),Fo.setMode(1)):Fo.setMode(4);else if(Rr.isLine){let vo=fr.linewidth;vo===void 0&&(vo=1),Jr.setLineWidth(vo*mr()),Rr.isLineSegments?Fo.setMode(1):Rr.isLineLoop?Fo.setMode(2):Fo.setMode(3)}else Rr.isPoints?Fo.setMode(0):Rr.isSprite&&Fo.setMode(4);if(Rr.isInstancedMesh)Fo.renderInstances(Os,xl,Rr.count);else if(wr.isInstancedBufferGeometry){const vo=wr._maxInstanceCount!==void 0?wr._maxInstanceCount:1/0,ss=Math.min(wr.instanceCount,vo);Fo.renderInstances(Os,xl,ss)}else Fo.render(Os,xl)},this.compile=function(Qn,Or){function wr(fr,Rr,$o){fr.transparent===!0&&fr.side===DoubleSide&&fr.forceSinglePass===!1?(fr.side=BackSide,fr.needsUpdate=!0,us(fr,Rr,$o),fr.side=FrontSide,fr.needsUpdate=!0,us(fr,Rr,$o),fr.side=DoubleSide):us(fr,Rr,$o)}Ut=Wo.get(Qn),Ut.init(),Kt.push(Ut),Qn.traverseVisible(function(fr){fr.isLight&&fr.layers.test(Or.layers)&&(Ut.pushLight(fr),fr.castShadow&&Ut.pushShadow(fr))}),Ut.setupLights(ln.useLegacyLights),Qn.traverse(function(fr){const Rr=fr.material;if(Rr)if(Array.isArray(Rr))for(let $o=0;$o<Rr.length;$o++){const So=Rr[$o];wr(So,Qn,fr)}else wr(Rr,Qn,fr)}),Kt.pop(),Ut=null};let Gn=null;function dr(Qn){Gn&&Gn(Qn)}function Br(){fo.stop()}function io(){fo.start()}const fo=new WebGLAnimation;fo.setAnimationLoop(dr),typeof self<"u"&&fo.setContext(self),this.setAnimationLoop=function(Qn){Gn=Qn,Jn.setAnimationLoop(Qn),Qn===null?fo.stop():fo.start()},Jn.addEventListener("sessionstart",Br),Jn.addEventListener("sessionend",io),this.render=function(Qn,Or){if(Or!==void 0&&Or.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(hn===!0)return;Qn.matrixWorldAutoUpdate===!0&&Qn.updateMatrixWorld(),Or.parent===null&&Or.matrixWorldAutoUpdate===!0&&Or.updateMatrixWorld(),Jn.enabled===!0&&Jn.isPresenting===!0&&(Jn.cameraAutoUpdate===!0&&Jn.updateCamera(Or),Or=Jn.getCamera()),Qn.isScene===!0&&Qn.onBeforeRender(ln,Qn,Or,mn),Ut=Wo.get(Qn,Kt.length),Ut.init(),Kt.push(Ut),sr.multiplyMatrices(Or.projectionMatrix,Or.matrixWorldInverse),lr.setFromProjectionMatrix(sr),Vn=this.localClippingEnabled,Ln=Xn.init(this.clippingPlanes,Vn),Ft=Po.get(Qn,Zt.length),Ft.init(),Zt.push(Ft),rs(Qn,Or,0,ln.sortObjects),Ft.finish(),ln.sortObjects===!0&&Ft.sort(Bn,Hn),Ln===!0&&Xn.beginShadows();const wr=Ut.state.shadowsArray;if(Un.render(wr,Qn,Or),Ln===!0&&Xn.endShadows(),this.info.autoReset===!0&&this.info.reset(),rr.render(Ft,Qn),Ut.setupLights(ln.useLegacyLights),Or.isArrayCamera){const fr=Or.cameras;for(let Rr=0,$o=fr.length;Rr<$o;Rr++){const So=fr[Rr];cs(Ft,Qn,So,So.viewport)}}else cs(Ft,Qn,Or);mn!==null&&(Er.updateMultisampleRenderTarget(mn),Er.updateRenderTargetMipmap(mn)),Qn.isScene===!0&&Qn.onAfterRender(ln,Qn,Or),Zr.resetDefaultState(),On=-1,bn=null,Kt.pop(),Kt.length>0?Ut=Kt[Kt.length-1]:Ut=null,Zt.pop(),Zt.length>0?Ft=Zt[Zt.length-1]:Ft=null};function rs(Qn,Or,wr,fr){if(Qn.visible===!1)return;if(Qn.layers.test(Or.layers)){if(Qn.isGroup)wr=Qn.renderOrder;else if(Qn.isLOD)Qn.autoUpdate===!0&&Qn.update(Or);else if(Qn.isLight)Ut.pushLight(Qn),Qn.castShadow&&Ut.pushShadow(Qn);else if(Qn.isSprite){if(!Qn.frustumCulled||lr.intersectsSprite(Qn)){fr&&Mn.setFromMatrixPosition(Qn.matrixWorld).applyMatrix4(sr);const So=no.update(Qn),Do=Qn.material;Do.visible&&Ft.push(Qn,So,Do,wr,Mn.z,null)}}else if((Qn.isMesh||Qn.isLine||Qn.isPoints)&&(Qn.isSkinnedMesh&&Qn.skeleton.frame!==Yr.render.frame&&(Qn.skeleton.update(),Qn.skeleton.frame=Yr.render.frame),!Qn.frustumCulled||lr.intersectsObject(Qn))){fr&&Mn.setFromMatrixPosition(Qn.matrixWorld).applyMatrix4(sr);const So=no.update(Qn),Do=Qn.material;if(Array.isArray(Do)){const xo=So.groups;for(let Io=0,Co=xo.length;Io<Co;Io++){const Gr=xo[Io],Os=Do[Gr.materialIndex];Os&&Os.visible&&Ft.push(Qn,So,Os,wr,Mn.z,Gr)}}else Do.visible&&Ft.push(Qn,So,Do,wr,Mn.z,null)}}const $o=Qn.children;for(let So=0,Do=$o.length;So<Do;So++)rs($o[So],Or,wr,fr)}function cs(Qn,Or,wr,fr){const Rr=Qn.opaque,$o=Qn.transmissive,So=Qn.transparent;Ut.setupLightsView(wr),Ln===!0&&Xn.setGlobalState(ln.clippingPlanes,wr),$o.length>0&&Ns(Rr,Or,wr),fr&&Jr.viewport(En.copy(fr)),Rr.length>0&&Us(Rr,Or,wr),$o.length>0&&Us($o,Or,wr),So.length>0&&Us(So,Or,wr),Jr.buffers.depth.setTest(!0),Jr.buffers.depth.setMask(!0),Jr.buffers.color.setMask(!0),Jr.setPolygonOffset(!1)}function Ns(Qn,Or,wr){const fr=Vr.isWebGL2;Wn===null&&(Wn=new WebGLRenderTarget(1024,1024,{generateMipmaps:!0,type:Sr.has("EXT_color_buffer_half_float")?HalfFloatType:UnsignedByteType,minFilter:LinearMipmapLinearFilter,samples:fr&&Et===!0?4:0}));const Rr=ln.getRenderTarget();ln.setRenderTarget(Wn),ln.clear();const $o=ln.toneMapping;ln.toneMapping=NoToneMapping,Us(Qn,Or,wr),ln.toneMapping=$o,Er.updateMultisampleRenderTarget(Wn),Er.updateRenderTargetMipmap(Wn),ln.setRenderTarget(Rr)}function Us(Qn,Or,wr){const fr=Or.isScene===!0?Or.overrideMaterial:null;for(let Rr=0,$o=Qn.length;Rr<$o;Rr++){const So=Qn[Rr],Do=So.object,xo=So.geometry,Io=fr===null?So.material:fr,Co=So.group;Do.layers.test(wr.layers)&&as(Do,Or,wr,xo,Io,Co)}}function as(Qn,Or,wr,fr,Rr,$o){Qn.onBeforeRender(ln,Or,wr,fr,Rr,$o),Qn.modelViewMatrix.multiplyMatrices(wr.matrixWorldInverse,Qn.matrixWorld),Qn.normalMatrix.getNormalMatrix(Qn.modelViewMatrix),Rr.onBeforeRender(ln,Or,wr,fr,Qn,$o),Rr.transparent===!0&&Rr.side===DoubleSide&&Rr.forceSinglePass===!1?(Rr.side=BackSide,Rr.needsUpdate=!0,ln.renderBufferDirect(wr,Or,fr,Rr,Qn,$o),Rr.side=FrontSide,Rr.needsUpdate=!0,ln.renderBufferDirect(wr,Or,fr,Rr,Qn,$o),Rr.side=DoubleSide):ln.renderBufferDirect(wr,Or,fr,Rr,Qn,$o),Qn.onAfterRender(ln,Or,wr,fr,Rr,$o)}function us(Qn,Or,wr){Or.isScene!==!0&&(Or=ir);const fr=_i.get(Qn),Rr=Ut.state.lights,$o=Ut.state.shadowsArray,So=Rr.state.version,Do=uo.getParameters(Qn,Rr.state,$o,Or,wr),xo=uo.getProgramCacheKey(Do);let Io=fr.programs;fr.environment=Qn.isMeshStandardMaterial?Or.environment:null,fr.fog=Or.fog,fr.envMap=(Qn.isMeshStandardMaterial?Qr:kr).get(Qn.envMap||fr.environment),Io===void 0&&(Qn.addEventListener("dispose",Nn),Io=new Map,fr.programs=Io);let Co=Io.get(xo);if(Co!==void 0){if(fr.currentProgram===Co&&fr.lightsStateVersion===So)return Ml(Qn,Do),Co}else Do.uniforms=uo.getUniforms(Qn),Qn.onBuild(wr,Do,ln),Qn.onBeforeCompile(Do,ln),Co=uo.acquireProgram(Do,xo),Io.set(xo,Co),fr.uniforms=Do.uniforms;const Gr=fr.uniforms;(!Qn.isShaderMaterial&&!Qn.isRawShaderMaterial||Qn.clipping===!0)&&(Gr.clippingPlanes=Xn.uniform),Ml(Qn,Do),fr.needsLights=S_(Qn),fr.lightsStateVersion=So,fr.needsLights&&(Gr.ambientLightColor.value=Rr.state.ambient,Gr.lightProbe.value=Rr.state.probe,Gr.directionalLights.value=Rr.state.directional,Gr.directionalLightShadows.value=Rr.state.directionalShadow,Gr.spotLights.value=Rr.state.spot,Gr.spotLightShadows.value=Rr.state.spotShadow,Gr.rectAreaLights.value=Rr.state.rectArea,Gr.ltc_1.value=Rr.state.rectAreaLTC1,Gr.ltc_2.value=Rr.state.rectAreaLTC2,Gr.pointLights.value=Rr.state.point,Gr.pointLightShadows.value=Rr.state.pointShadow,Gr.hemisphereLights.value=Rr.state.hemi,Gr.directionalShadowMap.value=Rr.state.directionalShadowMap,Gr.directionalShadowMatrix.value=Rr.state.directionalShadowMatrix,Gr.spotShadowMap.value=Rr.state.spotShadowMap,Gr.spotLightMatrix.value=Rr.state.spotLightMatrix,Gr.spotLightMap.value=Rr.state.spotLightMap,Gr.pointShadowMap.value=Rr.state.pointShadowMap,Gr.pointShadowMatrix.value=Rr.state.pointShadowMatrix);const Os=Co.getUniforms(),zs=WebGLUniforms.seqWithValue(Os.seq,Gr);return fr.currentProgram=Co,fr.uniformsList=zs,Co}function Ml(Qn,Or){const wr=_i.get(Qn);wr.outputEncoding=Or.outputEncoding,wr.instancing=Or.instancing,wr.skinning=Or.skinning,wr.morphTargets=Or.morphTargets,wr.morphNormals=Or.morphNormals,wr.morphColors=Or.morphColors,wr.morphTargetsCount=Or.morphTargetsCount,wr.numClippingPlanes=Or.numClippingPlanes,wr.numIntersection=Or.numClipIntersection,wr.vertexAlphas=Or.vertexAlphas,wr.vertexTangents=Or.vertexTangents,wr.toneMapping=Or.toneMapping}function LO(Qn,Or,wr,fr,Rr){Or.isScene!==!0&&(Or=ir),Er.resetTextureUnits();const $o=Or.fog,So=fr.isMeshStandardMaterial?Or.environment:null,Do=mn===null?ln.outputEncoding:mn.isXRRenderTarget===!0?mn.texture.encoding:LinearEncoding,xo=(fr.isMeshStandardMaterial?Qr:kr).get(fr.envMap||So),Io=fr.vertexColors===!0&&!!wr.attributes.color&&wr.attributes.color.itemSize===4,Co=!!fr.normalMap&&!!wr.attributes.tangent,Gr=!!wr.morphAttributes.position,Os=!!wr.morphAttributes.normal,zs=!!wr.morphAttributes.color,xl=fr.toneMapped?ln.toneMapping:NoToneMapping,lu=wr.morphAttributes.position||wr.morphAttributes.normal||wr.morphAttributes.color,Fo=lu!==void 0?lu.length:0,vo=_i.get(fr),ss=Ut.state.lights;if(Ln===!0&&(Vn===!0||Qn!==bn)){const ys=Qn===bn&&fr.id===On;Xn.setState(fr,Qn,ys)}let Ro=!1;fr.version===vo.__version?(vo.needsLights&&vo.lightsStateVersion!==ss.state.version||vo.outputEncoding!==Do||Rr.isInstancedMesh&&vo.instancing===!1||!Rr.isInstancedMesh&&vo.instancing===!0||Rr.isSkinnedMesh&&vo.skinning===!1||!Rr.isSkinnedMesh&&vo.skinning===!0||vo.envMap!==xo||fr.fog===!0&&vo.fog!==$o||vo.numClippingPlanes!==void 0&&(vo.numClippingPlanes!==Xn.numPlanes||vo.numIntersection!==Xn.numIntersection)||vo.vertexAlphas!==Io||vo.vertexTangents!==Co||vo.morphTargets!==Gr||vo.morphNormals!==Os||vo.morphColors!==zs||vo.toneMapping!==xl||Vr.isWebGL2===!0&&vo.morphTargetsCount!==Fo)&&(Ro=!0):(Ro=!0,vo.__version=fr.version);let oo=vo.currentProgram;Ro===!0&&(oo=us(fr,Or,Rr));let $_=!1,Yl=!1,cu=!1;const hs=oo.getUniforms(),Wr=vo.uniforms;if(Jr.useProgram(oo.program)&&($_=!0,Yl=!0,cu=!0),fr.id!==On&&(On=fr.id,Yl=!0),$_||bn!==Qn){if(hs.setValue(tr,"projectionMatrix",Qn.projectionMatrix),Vr.logarithmicDepthBuffer&&hs.setValue(tr,"logDepthBufFC",2/(Math.log(Qn.far+1)/Math.LN2)),bn!==Qn&&(bn=Qn,Yl=!0,cu=!0),fr.isShaderMaterial||fr.isMeshPhongMaterial||fr.isMeshToonMaterial||fr.isMeshStandardMaterial||fr.envMap){const ys=hs.map.cameraPosition;ys!==void 0&&ys.setValue(tr,Mn.setFromMatrixPosition(Qn.matrixWorld))}(fr.isMeshPhongMaterial||fr.isMeshToonMaterial||fr.isMeshLambertMaterial||fr.isMeshBasicMaterial||fr.isMeshStandardMaterial||fr.isShaderMaterial)&&hs.setValue(tr,"isOrthographic",Qn.isOrthographicCamera===!0),(fr.isMeshPhongMaterial||fr.isMeshToonMaterial||fr.isMeshLambertMaterial||fr.isMeshBasicMaterial||fr.isMeshStandardMaterial||fr.isShaderMaterial||fr.isShadowMaterial||Rr.isSkinnedMesh)&&hs.setValue(tr,"viewMatrix",Qn.matrixWorldInverse)}if(Rr.isSkinnedMesh){hs.setOptional(tr,Rr,"bindMatrix"),hs.setOptional(tr,Rr,"bindMatrixInverse");const ys=Rr.skeleton;ys&&(Vr.floatVertexTextures?(ys.boneTexture===null&&ys.computeBoneTexture(),hs.setValue(tr,"boneTexture",ys.boneTexture,Er),hs.setValue(tr,"boneTextureSize",ys.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Zo=wr.morphAttributes;if((Zo.position!==void 0||Zo.normal!==void 0||Zo.color!==void 0&&Vr.isWebGL2===!0)&&yr.update(Rr,wr,oo),(Yl||vo.receiveShadow!==Rr.receiveShadow)&&(vo.receiveShadow=Rr.receiveShadow,hs.setValue(tr,"receiveShadow",Rr.receiveShadow)),fr.isMeshGouraudMaterial&&fr.envMap!==null&&(Wr.envMap.value=xo,Wr.flipEnvMap.value=xo.isCubeTexture&&xo.isRenderTargetTexture===!1?-1:1),Yl&&(hs.setValue(tr,"toneMappingExposure",ln.toneMappingExposure),vo.needsLights&&wo(Wr,cu),$o&&fr.fog===!0&&ho.refreshFogUniforms(Wr,$o),ho.refreshMaterialUniforms(Wr,fr,Dn,Rn,Wn),WebGLUniforms.upload(tr,vo.uniformsList,Wr,Er)),fr.isShaderMaterial&&fr.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(tr,vo.uniformsList,Wr,Er),fr.uniformsNeedUpdate=!1),fr.isSpriteMaterial&&hs.setValue(tr,"center",Rr.center),hs.setValue(tr,"modelViewMatrix",Rr.modelViewMatrix),hs.setValue(tr,"normalMatrix",Rr.normalMatrix),hs.setValue(tr,"modelMatrix",Rr.matrixWorld),fr.isShaderMaterial||fr.isRawShaderMaterial){const ys=fr.uniformsGroups;for(let Cs=0,js=ys.length;Cs<js;Cs++)if(Vr.isWebGL2){const Bo=ys[Cs];Cr.update(Bo,oo),Cr.bind(Bo,oo)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return oo}function wo(Qn,Or){Qn.ambientLightColor.needsUpdate=Or,Qn.lightProbe.needsUpdate=Or,Qn.directionalLights.needsUpdate=Or,Qn.directionalLightShadows.needsUpdate=Or,Qn.pointLights.needsUpdate=Or,Qn.pointLightShadows.needsUpdate=Or,Qn.spotLights.needsUpdate=Or,Qn.spotLightShadows.needsUpdate=Or,Qn.rectAreaLights.needsUpdate=Or,Qn.hemisphereLights.needsUpdate=Or}function S_(Qn){return Qn.isMeshLambertMaterial||Qn.isMeshToonMaterial||Qn.isMeshPhongMaterial||Qn.isMeshStandardMaterial||Qn.isShadowMaterial||Qn.isShaderMaterial&&Qn.lights===!0}this.getActiveCubeFace=function(){return dn},this.getActiveMipmapLevel=function(){return pn},this.getRenderTarget=function(){return mn},this.setRenderTargetTextures=function(Qn,Or,wr){_i.get(Qn.texture).__webglTexture=Or,_i.get(Qn.depthTexture).__webglTexture=wr;const fr=_i.get(Qn);fr.__hasExternalTextures=!0,fr.__hasExternalTextures&&(fr.__autoAllocateDepthBuffer=wr===void 0,fr.__autoAllocateDepthBuffer||Sr.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),fr.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Qn,Or){const wr=_i.get(Qn);wr.__webglFramebuffer=Or,wr.__useDefaultFramebuffer=Or===void 0},this.setRenderTarget=function(Qn,Or=0,wr=0){mn=Qn,dn=Or,pn=wr;let fr=!0,Rr=null,$o=!1,So=!1;if(Qn){const xo=_i.get(Qn);xo.__useDefaultFramebuffer!==void 0?(Jr.bindFramebuffer(36160,null),fr=!1):xo.__webglFramebuffer===void 0?Er.setupRenderTarget(Qn):xo.__hasExternalTextures&&Er.rebindTextures(Qn,_i.get(Qn.texture).__webglTexture,_i.get(Qn.depthTexture).__webglTexture);const Io=Qn.texture;(Io.isData3DTexture||Io.isDataArrayTexture||Io.isCompressedArrayTexture)&&(So=!0);const Co=_i.get(Qn).__webglFramebuffer;Qn.isWebGLCubeRenderTarget?(Rr=Co[Or],$o=!0):Vr.isWebGL2&&Qn.samples>0&&Er.useMultisampledRTT(Qn)===!1?Rr=_i.get(Qn).__webglMultisampledFramebuffer:Rr=Co,En.copy(Qn.viewport),An.copy(Qn.scissor),Tn=Qn.scissorTest}else En.copy(jn).multiplyScalar(Dn).floor(),An.copy(Kn).multiplyScalar(Dn).floor(),Tn=zn;if(Jr.bindFramebuffer(36160,Rr)&&Vr.drawBuffers&&fr&&Jr.drawBuffers(Qn,Rr),Jr.viewport(En),Jr.scissor(An),Jr.setScissorTest(Tn),$o){const xo=_i.get(Qn.texture);tr.framebufferTexture2D(36160,36064,34069+Or,xo.__webglTexture,wr)}else if(So){const xo=_i.get(Qn.texture),Io=Or||0;tr.framebufferTextureLayer(36160,36064,xo.__webglTexture,wr||0,Io)}On=-1},this.readRenderTargetPixels=function(Qn,Or,wr,fr,Rr,$o,So){if(!(Qn&&Qn.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Do=_i.get(Qn).__webglFramebuffer;if(Qn.isWebGLCubeRenderTarget&&So!==void 0&&(Do=Do[So]),Do){Jr.bindFramebuffer(36160,Do);try{const xo=Qn.texture,Io=xo.format,Co=xo.type;if(Io!==RGBAFormat&&pr.convert(Io)!==tr.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Gr=Co===HalfFloatType&&(Sr.has("EXT_color_buffer_half_float")||Vr.isWebGL2&&Sr.has("EXT_color_buffer_float"));if(Co!==UnsignedByteType&&pr.convert(Co)!==tr.getParameter(35738)&&!(Co===FloatType&&(Vr.isWebGL2||Sr.has("OES_texture_float")||Sr.has("WEBGL_color_buffer_float")))&&!Gr){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Or>=0&&Or<=Qn.width-fr&&wr>=0&&wr<=Qn.height-Rr&&tr.readPixels(Or,wr,fr,Rr,pr.convert(Io),pr.convert(Co),$o)}finally{const xo=mn!==null?_i.get(mn).__webglFramebuffer:null;Jr.bindFramebuffer(36160,xo)}}},this.copyFramebufferToTexture=function(Qn,Or,wr=0){const fr=Math.pow(2,-wr),Rr=Math.floor(Or.image.width*fr),$o=Math.floor(Or.image.height*fr);Er.setTexture2D(Or,0),tr.copyTexSubImage2D(3553,wr,0,0,Qn.x,Qn.y,Rr,$o),Jr.unbindTexture()},this.copyTextureToTexture=function(Qn,Or,wr,fr=0){const Rr=Or.image.width,$o=Or.image.height,So=pr.convert(wr.format),Do=pr.convert(wr.type);Er.setTexture2D(wr,0),tr.pixelStorei(37440,wr.flipY),tr.pixelStorei(37441,wr.premultiplyAlpha),tr.pixelStorei(3317,wr.unpackAlignment),Or.isDataTexture?tr.texSubImage2D(3553,fr,Qn.x,Qn.y,Rr,$o,So,Do,Or.image.data):Or.isCompressedTexture?tr.compressedTexSubImage2D(3553,fr,Qn.x,Qn.y,Or.mipmaps[0].width,Or.mipmaps[0].height,So,Or.mipmaps[0].data):tr.texSubImage2D(3553,fr,Qn.x,Qn.y,So,Do,Or.image),fr===0&&wr.generateMipmaps&&tr.generateMipmap(3553),Jr.unbindTexture()},this.copyTextureToTexture3D=function(Qn,Or,wr,fr,Rr=0){if(ln.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const $o=Qn.max.x-Qn.min.x+1,So=Qn.max.y-Qn.min.y+1,Do=Qn.max.z-Qn.min.z+1,xo=pr.convert(fr.format),Io=pr.convert(fr.type);let Co;if(fr.isData3DTexture)Er.setTexture3D(fr,0),Co=32879;else if(fr.isDataArrayTexture)Er.setTexture2DArray(fr,0),Co=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}tr.pixelStorei(37440,fr.flipY),tr.pixelStorei(37441,fr.premultiplyAlpha),tr.pixelStorei(3317,fr.unpackAlignment);const Gr=tr.getParameter(3314),Os=tr.getParameter(32878),zs=tr.getParameter(3316),xl=tr.getParameter(3315),lu=tr.getParameter(32877),Fo=wr.isCompressedTexture?wr.mipmaps[0]:wr.image;tr.pixelStorei(3314,Fo.width),tr.pixelStorei(32878,Fo.height),tr.pixelStorei(3316,Qn.min.x),tr.pixelStorei(3315,Qn.min.y),tr.pixelStorei(32877,Qn.min.z),wr.isDataTexture||wr.isData3DTexture?tr.texSubImage3D(Co,Rr,Or.x,Or.y,Or.z,$o,So,Do,xo,Io,Fo.data):wr.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),tr.compressedTexSubImage3D(Co,Rr,Or.x,Or.y,Or.z,$o,So,Do,xo,Fo.data)):tr.texSubImage3D(Co,Rr,Or.x,Or.y,Or.z,$o,So,Do,xo,Io,Fo),tr.pixelStorei(3314,Gr),tr.pixelStorei(32878,Os),tr.pixelStorei(3316,zs),tr.pixelStorei(3315,xl),tr.pixelStorei(32877,lu),Rr===0&&fr.generateMipmaps&&tr.generateMipmap(Co),Jr.unbindTexture()},this.initTexture=function(Qn){Qn.isCubeTexture?Er.setTextureCube(Qn,0):Qn.isData3DTexture?Er.setTexture3D(Qn,0):Qn.isDataArrayTexture||Qn.isCompressedArrayTexture?Er.setTexture2DArray(Qn,0):Er.setTexture2D(Qn,0),Jr.unbindTexture()},this.resetState=function(){dn=0,pn=0,mn=null,Jr.reset(),Zr.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Object.defineProperties(WebGLRenderer.prototype,{physicallyCorrectLights:{get:function(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights},set:function(ft){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!ft}}});class WebGL1Renderer extends WebGLRenderer{}WebGL1Renderer.prototype.isWebGL1Renderer=!0;class FogExp2{constructor(lt,dt=25e-5){this.isFogExp2=!0,this.name="",this.color=new Color(lt),this.density=dt}clone(){return new FogExp2(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class Fog{constructor(lt,dt=1,vt=1e3){this.isFog=!0,this.name="",this.color=new Color(lt),this.near=dt,this.far=vt}clone(){return new Fog(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Scene extends Object3D{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(lt,dt){return super.copy(lt,dt),lt.background!==null&&(this.background=lt.background.clone()),lt.environment!==null&&(this.environment=lt.environment.clone()),lt.fog!==null&&(this.fog=lt.fog.clone()),this.backgroundBlurriness=lt.backgroundBlurriness,this.backgroundIntensity=lt.backgroundIntensity,lt.overrideMaterial!==null&&(this.overrideMaterial=lt.overrideMaterial.clone()),this.matrixAutoUpdate=lt.matrixAutoUpdate,this}toJSON(lt){const dt=super.toJSON(lt);return this.fog!==null&&(dt.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(dt.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(dt.object.backgroundIntensity=this.backgroundIntensity),dt}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(lt){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=lt}}class InterleavedBuffer{constructor(lt,dt){this.isInterleavedBuffer=!0,this.array=lt,this.stride=dt,this.count=lt!==void 0?lt.length/dt:0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=generateUUID()}onUploadCallback(){}set needsUpdate(lt){lt===!0&&this.version++}setUsage(lt){return this.usage=lt,this}copy(lt){return this.array=new lt.array.constructor(lt.array),this.count=lt.count,this.stride=lt.stride,this.usage=lt.usage,this}copyAt(lt,dt,vt){lt*=this.stride,vt*=dt.stride;for(let Tt=0,Et=this.stride;Tt<Et;Tt++)this.array[lt+Tt]=dt.array[vt+Tt];return this}set(lt,dt=0){return this.array.set(lt,dt),this}clone(lt){lt.arrayBuffers===void 0&&(lt.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID()),lt.arrayBuffers[this.array.buffer._uuid]===void 0&&(lt.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const dt=new this.array.constructor(lt.arrayBuffers[this.array.buffer._uuid]),vt=new this.constructor(dt,this.stride);return vt.setUsage(this.usage),vt}onUpload(lt){return this.onUploadCallback=lt,this}toJSON(lt){return lt.arrayBuffers===void 0&&(lt.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID()),lt.arrayBuffers[this.array.buffer._uuid]===void 0&&(lt.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const _vector$6=new Vector3;class InterleavedBufferAttribute{constructor(lt,dt,vt,Tt=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=lt,this.itemSize=dt,this.offset=vt,this.normalized=Tt}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(lt){this.data.needsUpdate=lt}applyMatrix4(lt){for(let dt=0,vt=this.data.count;dt<vt;dt++)_vector$6.fromBufferAttribute(this,dt),_vector$6.applyMatrix4(lt),this.setXYZ(dt,_vector$6.x,_vector$6.y,_vector$6.z);return this}applyNormalMatrix(lt){for(let dt=0,vt=this.count;dt<vt;dt++)_vector$6.fromBufferAttribute(this,dt),_vector$6.applyNormalMatrix(lt),this.setXYZ(dt,_vector$6.x,_vector$6.y,_vector$6.z);return this}transformDirection(lt){for(let dt=0,vt=this.count;dt<vt;dt++)_vector$6.fromBufferAttribute(this,dt),_vector$6.transformDirection(lt),this.setXYZ(dt,_vector$6.x,_vector$6.y,_vector$6.z);return this}setX(lt,dt){return this.normalized&&(dt=normalize(dt,this.array)),this.data.array[lt*this.data.stride+this.offset]=dt,this}setY(lt,dt){return this.normalized&&(dt=normalize(dt,this.array)),this.data.array[lt*this.data.stride+this.offset+1]=dt,this}setZ(lt,dt){return this.normalized&&(dt=normalize(dt,this.array)),this.data.array[lt*this.data.stride+this.offset+2]=dt,this}setW(lt,dt){return this.normalized&&(dt=normalize(dt,this.array)),this.data.array[lt*this.data.stride+this.offset+3]=dt,this}getX(lt){let dt=this.data.array[lt*this.data.stride+this.offset];return this.normalized&&(dt=denormalize(dt,this.array)),dt}getY(lt){let dt=this.data.array[lt*this.data.stride+this.offset+1];return this.normalized&&(dt=denormalize(dt,this.array)),dt}getZ(lt){let dt=this.data.array[lt*this.data.stride+this.offset+2];return this.normalized&&(dt=denormalize(dt,this.array)),dt}getW(lt){let dt=this.data.array[lt*this.data.stride+this.offset+3];return this.normalized&&(dt=denormalize(dt,this.array)),dt}setXY(lt,dt,vt){return lt=lt*this.data.stride+this.offset,this.normalized&&(dt=normalize(dt,this.array),vt=normalize(vt,this.array)),this.data.array[lt+0]=dt,this.data.array[lt+1]=vt,this}setXYZ(lt,dt,vt,Tt){return lt=lt*this.data.stride+this.offset,this.normalized&&(dt=normalize(dt,this.array),vt=normalize(vt,this.array),Tt=normalize(Tt,this.array)),this.data.array[lt+0]=dt,this.data.array[lt+1]=vt,this.data.array[lt+2]=Tt,this}setXYZW(lt,dt,vt,Tt,Et){return lt=lt*this.data.stride+this.offset,this.normalized&&(dt=normalize(dt,this.array),vt=normalize(vt,this.array),Tt=normalize(Tt,this.array),Et=normalize(Et,this.array)),this.data.array[lt+0]=dt,this.data.array[lt+1]=vt,this.data.array[lt+2]=Tt,this.data.array[lt+3]=Et,this}clone(lt){if(lt===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const dt=[];for(let vt=0;vt<this.count;vt++){const Tt=vt*this.data.stride+this.offset;for(let Et=0;Et<this.itemSize;Et++)dt.push(this.data.array[Tt+Et])}return new BufferAttribute(new this.array.constructor(dt),this.itemSize,this.normalized)}else return lt.interleavedBuffers===void 0&&(lt.interleavedBuffers={}),lt.interleavedBuffers[this.data.uuid]===void 0&&(lt.interleavedBuffers[this.data.uuid]=this.data.clone(lt)),new InterleavedBufferAttribute(lt.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(lt){if(lt===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const dt=[];for(let vt=0;vt<this.count;vt++){const Tt=vt*this.data.stride+this.offset;for(let Et=0;Et<this.itemSize;Et++)dt.push(this.data.array[Tt+Et])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:dt,normalized:this.normalized}}else return lt.interleavedBuffers===void 0&&(lt.interleavedBuffers={}),lt.interleavedBuffers[this.data.uuid]===void 0&&(lt.interleavedBuffers[this.data.uuid]=this.data.toJSON(lt)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class SpriteMaterial extends Material{constructor(lt){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(lt)}copy(lt){return super.copy(lt),this.color.copy(lt.color),this.map=lt.map,this.alphaMap=lt.alphaMap,this.rotation=lt.rotation,this.sizeAttenuation=lt.sizeAttenuation,this.fog=lt.fog,this}}let _geometry;const _intersectPoint=new Vector3,_worldScale=new Vector3,_mvPosition=new Vector3,_alignedPosition=new Vector2,_rotatedPosition=new Vector2,_viewWorldMatrix=new Matrix4,_vA=new Vector3,_vB=new Vector3,_vC=new Vector3,_uvA=new Vector2,_uvB=new Vector2,_uvC=new Vector2;class Sprite extends Object3D{constructor(lt){if(super(),this.isSprite=!0,this.type="Sprite",_geometry===void 0){_geometry=new BufferGeometry;const dt=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),vt=new InterleavedBuffer(dt,5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(vt,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(vt,2,3,!1))}this.geometry=_geometry,this.material=lt!==void 0?lt:new SpriteMaterial,this.center=new Vector2(.5,.5)}raycast(lt,dt){lt.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy(lt.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(lt.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),lt.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_worldScale.multiplyScalar(-_mvPosition.z);const vt=this.material.rotation;let Tt,Et;vt!==0&&(Et=Math.cos(vt),Tt=Math.sin(vt));const Ct=this.center;transformVertex(_vA.set(-.5,-.5,0),_mvPosition,Ct,_worldScale,Tt,Et),transformVertex(_vB.set(.5,-.5,0),_mvPosition,Ct,_worldScale,Tt,Et),transformVertex(_vC.set(.5,.5,0),_mvPosition,Ct,_worldScale,Tt,Et),_uvA.set(0,0),_uvB.set(1,0),_uvC.set(1,1);let Rt=lt.ray.intersectTriangle(_vA,_vB,_vC,!1,_intersectPoint);if(Rt===null&&(transformVertex(_vB.set(-.5,.5,0),_mvPosition,Ct,_worldScale,Tt,Et),_uvB.set(0,1),Rt=lt.ray.intersectTriangle(_vA,_vC,_vB,!1,_intersectPoint),Rt===null))return;const kt=lt.ray.origin.distanceTo(_intersectPoint);kt<lt.near||kt>lt.far||dt.push({distance:kt,point:_intersectPoint.clone(),uv:Triangle.getUV(_intersectPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2),face:null,object:this})}copy(lt,dt){return super.copy(lt,dt),lt.center!==void 0&&this.center.copy(lt.center),this.material=lt.material,this}}function transformVertex(ft,lt,dt,vt,Tt,Et){_alignedPosition.subVectors(ft,dt).addScalar(.5).multiply(vt),Tt!==void 0?(_rotatedPosition.x=Et*_alignedPosition.x-Tt*_alignedPosition.y,_rotatedPosition.y=Tt*_alignedPosition.x+Et*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),ft.copy(lt),ft.x+=_rotatedPosition.x,ft.y+=_rotatedPosition.y,ft.applyMatrix4(_viewWorldMatrix)}const _v1$2=new Vector3,_v2$1=new Vector3;class LOD extends Object3D{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(lt){super.copy(lt,!1);const dt=lt.levels;for(let vt=0,Tt=dt.length;vt<Tt;vt++){const Et=dt[vt];this.addLevel(Et.object.clone(),Et.distance,Et.hysteresis)}return this.autoUpdate=lt.autoUpdate,this}addLevel(lt,dt=0,vt=0){dt=Math.abs(dt);const Tt=this.levels;let Et;for(Et=0;Et<Tt.length&&!(dt<Tt[Et].distance);Et++);return Tt.splice(Et,0,{distance:dt,hysteresis:vt,object:lt}),this.add(lt),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(lt){const dt=this.levels;if(dt.length>0){let vt,Tt;for(vt=1,Tt=dt.length;vt<Tt;vt++){let Et=dt[vt].distance;if(dt[vt].object.visible&&(Et-=Et*dt[vt].hysteresis),lt<Et)break}return dt[vt-1].object}return null}raycast(lt,dt){if(this.levels.length>0){_v1$2.setFromMatrixPosition(this.matrixWorld);const Tt=lt.ray.origin.distanceTo(_v1$2);this.getObjectForDistance(Tt).raycast(lt,dt)}}update(lt){const dt=this.levels;if(dt.length>1){_v1$2.setFromMatrixPosition(lt.matrixWorld),_v2$1.setFromMatrixPosition(this.matrixWorld);const vt=_v1$2.distanceTo(_v2$1)/lt.zoom;dt[0].object.visible=!0;let Tt,Et;for(Tt=1,Et=dt.length;Tt<Et;Tt++){let Ct=dt[Tt].distance;if(dt[Tt].object.visible&&(Ct-=Ct*dt[Tt].hysteresis),vt>=Ct)dt[Tt-1].object.visible=!1,dt[Tt].object.visible=!0;else break}for(this._currentLevel=Tt-1;Tt<Et;Tt++)dt[Tt].object.visible=!1}}toJSON(lt){const dt=super.toJSON(lt);this.autoUpdate===!1&&(dt.object.autoUpdate=!1),dt.object.levels=[];const vt=this.levels;for(let Tt=0,Et=vt.length;Tt<Et;Tt++){const Ct=vt[Tt];dt.object.levels.push({object:Ct.object.uuid,distance:Ct.distance,hysteresis:Ct.hysteresis})}return dt}}const _basePosition=new Vector3,_skinIndex=new Vector4,_skinWeight=new Vector4,_vector$5=new Vector3,_matrix=new Matrix4;class SkinnedMesh extends Mesh{constructor(lt,dt){super(lt,dt),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4}copy(lt,dt){return super.copy(lt,dt),this.bindMode=lt.bindMode,this.bindMatrix.copy(lt.bindMatrix),this.bindMatrixInverse.copy(lt.bindMatrixInverse),this.skeleton=lt.skeleton,this}bind(lt,dt){this.skeleton=lt,dt===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),dt=this.matrixWorld),this.bindMatrix.copy(dt),this.bindMatrixInverse.copy(dt).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const lt=new Vector4,dt=this.geometry.attributes.skinWeight;for(let vt=0,Tt=dt.count;vt<Tt;vt++){lt.fromBufferAttribute(dt,vt);const Et=1/lt.manhattanLength();Et!==1/0?lt.multiplyScalar(Et):lt.set(1,0,0,0),dt.setXYZW(vt,lt.x,lt.y,lt.z,lt.w)}}updateMatrixWorld(lt){super.updateMatrixWorld(lt),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(lt,dt){const vt=this.skeleton,Tt=this.geometry;_skinIndex.fromBufferAttribute(Tt.attributes.skinIndex,lt),_skinWeight.fromBufferAttribute(Tt.attributes.skinWeight,lt),_basePosition.copy(dt).applyMatrix4(this.bindMatrix),dt.set(0,0,0);for(let Et=0;Et<4;Et++){const Ct=_skinWeight.getComponent(Et);if(Ct!==0){const Rt=_skinIndex.getComponent(Et);_matrix.multiplyMatrices(vt.bones[Rt].matrixWorld,vt.boneInverses[Rt]),dt.addScaledVector(_vector$5.copy(_basePosition).applyMatrix4(_matrix),Ct)}}return dt.applyMatrix4(this.bindMatrixInverse)}}class Bone extends Object3D{constructor(){super(),this.isBone=!0,this.type="Bone"}}class DataTexture extends Texture{constructor(lt=null,dt=1,vt=1,Tt,Et,Ct,Rt,kt,Dt=NearestFilter,Bt=NearestFilter,Ft,Ut){super(null,Ct,Rt,kt,Dt,Bt,Tt,Et,Ft,Ut),this.isDataTexture=!0,this.image={data:lt,width:dt,height:vt},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const _offsetMatrix=new Matrix4,_identityMatrix=new Matrix4;class Skeleton{constructor(lt=[],dt=[]){this.uuid=generateUUID(),this.bones=lt.slice(0),this.boneInverses=dt,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const lt=this.bones,dt=this.boneInverses;if(this.boneMatrices=new Float32Array(lt.length*16),dt.length===0)this.calculateInverses();else if(lt.length!==dt.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let vt=0,Tt=this.bones.length;vt<Tt;vt++)this.boneInverses.push(new Matrix4)}}calculateInverses(){this.boneInverses.length=0;for(let lt=0,dt=this.bones.length;lt<dt;lt++){const vt=new Matrix4;this.bones[lt]&&vt.copy(this.bones[lt].matrixWorld).invert(),this.boneInverses.push(vt)}}pose(){for(let lt=0,dt=this.bones.length;lt<dt;lt++){const vt=this.bones[lt];vt&&vt.matrixWorld.copy(this.boneInverses[lt]).invert()}for(let lt=0,dt=this.bones.length;lt<dt;lt++){const vt=this.bones[lt];vt&&(vt.parent&&vt.parent.isBone?(vt.matrix.copy(vt.parent.matrixWorld).invert(),vt.matrix.multiply(vt.matrixWorld)):vt.matrix.copy(vt.matrixWorld),vt.matrix.decompose(vt.position,vt.quaternion,vt.scale))}}update(){const lt=this.bones,dt=this.boneInverses,vt=this.boneMatrices,Tt=this.boneTexture;for(let Et=0,Ct=lt.length;Et<Ct;Et++){const Rt=lt[Et]?lt[Et].matrixWorld:_identityMatrix;_offsetMatrix.multiplyMatrices(Rt,dt[Et]),_offsetMatrix.toArray(vt,Et*16)}Tt!==null&&(Tt.needsUpdate=!0)}clone(){return new Skeleton(this.bones,this.boneInverses)}computeBoneTexture(){let lt=Math.sqrt(this.bones.length*4);lt=ceilPowerOfTwo(lt),lt=Math.max(lt,4);const dt=new Float32Array(lt*lt*4);dt.set(this.boneMatrices);const vt=new DataTexture(dt,lt,lt,RGBAFormat,FloatType);return vt.needsUpdate=!0,this.boneMatrices=dt,this.boneTexture=vt,this.boneTextureSize=lt,this}getBoneByName(lt){for(let dt=0,vt=this.bones.length;dt<vt;dt++){const Tt=this.bones[dt];if(Tt.name===lt)return Tt}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(lt,dt){this.uuid=lt.uuid;for(let vt=0,Tt=lt.bones.length;vt<Tt;vt++){const Et=lt.bones[vt];let Ct=dt[Et];Ct===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",Et),Ct=new Bone),this.bones.push(Ct),this.boneInverses.push(new Matrix4().fromArray(lt.boneInverses[vt]))}return this.init(),this}toJSON(){const lt={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};lt.uuid=this.uuid;const dt=this.bones,vt=this.boneInverses;for(let Tt=0,Et=dt.length;Tt<Et;Tt++){const Ct=dt[Tt];lt.bones.push(Ct.uuid);const Rt=vt[Tt];lt.boneInverses.push(Rt.toArray())}return lt}}class InstancedBufferAttribute extends BufferAttribute{constructor(lt,dt,vt,Tt=1){super(lt,dt,vt),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=Tt}copy(lt){return super.copy(lt),this.meshPerAttribute=lt.meshPerAttribute,this}toJSON(){const lt=super.toJSON();return lt.meshPerAttribute=this.meshPerAttribute,lt.isInstancedBufferAttribute=!0,lt}}const _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_identity=new Matrix4,_mesh=new Mesh;class InstancedMesh extends Mesh{constructor(lt,dt,vt){super(lt,dt),this.isInstancedMesh=!0,this.instanceMatrix=new InstancedBufferAttribute(new Float32Array(vt*16),16),this.instanceColor=null,this.count=vt,this.frustumCulled=!1;for(let Tt=0;Tt<vt;Tt++)this.setMatrixAt(Tt,_identity)}copy(lt,dt){return super.copy(lt,dt),this.instanceMatrix.copy(lt.instanceMatrix),lt.instanceColor!==null&&(this.instanceColor=lt.instanceColor.clone()),this.count=lt.count,this}getColorAt(lt,dt){dt.fromArray(this.instanceColor.array,lt*3)}getMatrixAt(lt,dt){dt.fromArray(this.instanceMatrix.array,lt*16)}raycast(lt,dt){const vt=this.matrixWorld,Tt=this.count;if(_mesh.geometry=this.geometry,_mesh.material=this.material,_mesh.material!==void 0)for(let Et=0;Et<Tt;Et++){this.getMatrixAt(Et,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(vt,_instanceLocalMatrix),_mesh.matrixWorld=_instanceWorldMatrix,_mesh.raycast(lt,_instanceIntersects);for(let Ct=0,Rt=_instanceIntersects.length;Ct<Rt;Ct++){const kt=_instanceIntersects[Ct];kt.instanceId=Et,kt.object=this,dt.push(kt)}_instanceIntersects.length=0}}setColorAt(lt,dt){this.instanceColor===null&&(this.instanceColor=new InstancedBufferAttribute(new Float32Array(this.instanceMatrix.count*3),3)),dt.toArray(this.instanceColor.array,lt*3)}setMatrixAt(lt,dt){dt.toArray(this.instanceMatrix.array,lt*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class LineBasicMaterial extends Material{constructor(lt){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(lt)}copy(lt){return super.copy(lt),this.color.copy(lt.color),this.linewidth=lt.linewidth,this.linecap=lt.linecap,this.linejoin=lt.linejoin,this.fog=lt.fog,this}}const _start$1=new Vector3,_end$1=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray,_sphere$1=new Sphere$1;let Line$2=class extends Object3D{constructor(lt=new BufferGeometry,dt=new LineBasicMaterial){super(),this.isLine=!0,this.type="Line",this.geometry=lt,this.material=dt,this.updateMorphTargets()}copy(lt,dt){return super.copy(lt,dt),this.material=lt.material,this.geometry=lt.geometry,this}computeLineDistances(){const lt=this.geometry;if(lt.index===null){const dt=lt.attributes.position,vt=[0];for(let Tt=1,Et=dt.count;Tt<Et;Tt++)_start$1.fromBufferAttribute(dt,Tt-1),_end$1.fromBufferAttribute(dt,Tt),vt[Tt]=vt[Tt-1],vt[Tt]+=_start$1.distanceTo(_end$1);lt.setAttribute("lineDistance",new Float32BufferAttribute(vt,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(lt,dt){const vt=this.geometry,Tt=this.matrixWorld,Et=lt.params.Line.threshold,Ct=vt.drawRange;if(vt.boundingSphere===null&&vt.computeBoundingSphere(),_sphere$1.copy(vt.boundingSphere),_sphere$1.applyMatrix4(Tt),_sphere$1.radius+=Et,lt.ray.intersectsSphere(_sphere$1)===!1)return;_inverseMatrix$1.copy(Tt).invert(),_ray$1.copy(lt.ray).applyMatrix4(_inverseMatrix$1);const Rt=Et/((this.scale.x+this.scale.y+this.scale.z)/3),kt=Rt*Rt,Dt=new Vector3,Bt=new Vector3,Ft=new Vector3,Ut=new Vector3,Zt=this.isLineSegments?2:1,Kt=vt.index,hn=vt.attributes.position;if(Kt!==null){const dn=Math.max(0,Ct.start),pn=Math.min(Kt.count,Ct.start+Ct.count);for(let mn=dn,On=pn-1;mn<On;mn+=Zt){const bn=Kt.getX(mn),En=Kt.getX(mn+1);if(Dt.fromBufferAttribute(hn,bn),Bt.fromBufferAttribute(hn,En),_ray$1.distanceSqToSegment(Dt,Bt,Ut,Ft)>kt)continue;Ut.applyMatrix4(this.matrixWorld);const Tn=lt.ray.origin.distanceTo(Ut);Tn<lt.near||Tn>lt.far||dt.push({distance:Tn,point:Ft.clone().applyMatrix4(this.matrixWorld),index:mn,face:null,faceIndex:null,object:this})}}else{const dn=Math.max(0,Ct.start),pn=Math.min(hn.count,Ct.start+Ct.count);for(let mn=dn,On=pn-1;mn<On;mn+=Zt){if(Dt.fromBufferAttribute(hn,mn),Bt.fromBufferAttribute(hn,mn+1),_ray$1.distanceSqToSegment(Dt,Bt,Ut,Ft)>kt)continue;Ut.applyMatrix4(this.matrixWorld);const En=lt.ray.origin.distanceTo(Ut);En<lt.near||En>lt.far||dt.push({distance:En,point:Ft.clone().applyMatrix4(this.matrixWorld),index:mn,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const dt=this.geometry.morphAttributes,vt=Object.keys(dt);if(vt.length>0){const Tt=dt[vt[0]];if(Tt!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let Et=0,Ct=Tt.length;Et<Ct;Et++){const Rt=Tt[Et].name||String(Et);this.morphTargetInfluences.push(0),this.morphTargetDictionary[Rt]=Et}}}}};const _start$2=new Vector3,_end$2=new Vector3;class LineSegments extends Line$2{constructor(lt,dt){super(lt,dt),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const lt=this.geometry;if(lt.index===null){const dt=lt.attributes.position,vt=[];for(let Tt=0,Et=dt.count;Tt<Et;Tt+=2)_start$2.fromBufferAttribute(dt,Tt),_end$2.fromBufferAttribute(dt,Tt+1),vt[Tt]=Tt===0?0:vt[Tt-1],vt[Tt+1]=vt[Tt]+_start$2.distanceTo(_end$2);lt.setAttribute("lineDistance",new Float32BufferAttribute(vt,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class LineLoop extends Line$2{constructor(lt,dt){super(lt,dt),this.isLineLoop=!0,this.type="LineLoop"}}class PointsMaterial extends Material{constructor(lt){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(lt)}copy(lt){return super.copy(lt),this.color.copy(lt.color),this.map=lt.map,this.alphaMap=lt.alphaMap,this.size=lt.size,this.sizeAttenuation=lt.sizeAttenuation,this.fog=lt.fog,this}}const _inverseMatrix=new Matrix4,_ray$3=new Ray,_sphere$4=new Sphere$1,_position$2=new Vector3;class Points extends Object3D{constructor(lt=new BufferGeometry,dt=new PointsMaterial){super(),this.isPoints=!0,this.type="Points",this.geometry=lt,this.material=dt,this.updateMorphTargets()}copy(lt,dt){return super.copy(lt,dt),this.material=lt.material,this.geometry=lt.geometry,this}raycast(lt,dt){const vt=this.geometry,Tt=this.matrixWorld,Et=lt.params.Points.threshold,Ct=vt.drawRange;if(vt.boundingSphere===null&&vt.computeBoundingSphere(),_sphere$4.copy(vt.boundingSphere),_sphere$4.applyMatrix4(Tt),_sphere$4.radius+=Et,lt.ray.intersectsSphere(_sphere$4)===!1)return;_inverseMatrix.copy(Tt).invert(),_ray$3.copy(lt.ray).applyMatrix4(_inverseMatrix);const Rt=Et/((this.scale.x+this.scale.y+this.scale.z)/3),kt=Rt*Rt,Dt=vt.index,Ft=vt.attributes.position;if(Dt!==null){const Ut=Math.max(0,Ct.start),Zt=Math.min(Dt.count,Ct.start+Ct.count);for(let Kt=Ut,ln=Zt;Kt<ln;Kt++){const hn=Dt.getX(Kt);_position$2.fromBufferAttribute(Ft,hn),testPoint(_position$2,hn,kt,Tt,lt,dt,this)}}else{const Ut=Math.max(0,Ct.start),Zt=Math.min(Ft.count,Ct.start+Ct.count);for(let Kt=Ut,ln=Zt;Kt<ln;Kt++)_position$2.fromBufferAttribute(Ft,Kt),testPoint(_position$2,Kt,kt,Tt,lt,dt,this)}}updateMorphTargets(){const dt=this.geometry.morphAttributes,vt=Object.keys(dt);if(vt.length>0){const Tt=dt[vt[0]];if(Tt!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let Et=0,Ct=Tt.length;Et<Ct;Et++){const Rt=Tt[Et].name||String(Et);this.morphTargetInfluences.push(0),this.morphTargetDictionary[Rt]=Et}}}}}function testPoint(ft,lt,dt,vt,Tt,Et,Ct){const Rt=_ray$3.distanceSqToPoint(ft);if(Rt<dt){const kt=new Vector3;_ray$3.closestPointToPoint(ft,kt),kt.applyMatrix4(vt);const Dt=Tt.ray.origin.distanceTo(kt);if(Dt<Tt.near||Dt>Tt.far)return;Et.push({distance:Dt,distanceToRay:Math.sqrt(Rt),point:kt,index:lt,face:null,object:Ct})}}class VideoTexture extends Texture{constructor(lt,dt,vt,Tt,Et,Ct,Rt,kt,Dt){super(lt,dt,vt,Tt,Et,Ct,Rt,kt,Dt),this.isVideoTexture=!0,this.minFilter=Ct!==void 0?Ct:LinearFilter,this.magFilter=Et!==void 0?Et:LinearFilter,this.generateMipmaps=!1;const Bt=this;function Ft(){Bt.needsUpdate=!0,lt.requestVideoFrameCallback(Ft)}"requestVideoFrameCallback"in lt&&lt.requestVideoFrameCallback(Ft)}clone(){return new this.constructor(this.image).copy(this)}update(){const lt=this.image;"requestVideoFrameCallback"in lt===!1&&lt.readyState>=lt.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class FramebufferTexture extends Texture{constructor(lt,dt,vt){super({width:lt,height:dt}),this.isFramebufferTexture=!0,this.format=vt,this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.generateMipmaps=!1,this.needsUpdate=!0}}class CompressedTexture extends Texture{constructor(lt,dt,vt,Tt,Et,Ct,Rt,kt,Dt,Bt,Ft,Ut){super(null,Ct,Rt,kt,Dt,Bt,Tt,Et,Ft,Ut),this.isCompressedTexture=!0,this.image={width:dt,height:vt},this.mipmaps=lt,this.flipY=!1,this.generateMipmaps=!1}}class CompressedArrayTexture extends CompressedTexture{constructor(lt,dt,vt,Tt,Et,Ct){super(lt,dt,vt,Et,Ct),this.isCompressedArrayTexture=!0,this.image.depth=Tt,this.wrapR=ClampToEdgeWrapping}}class CanvasTexture extends Texture{constructor(lt,dt,vt,Tt,Et,Ct,Rt,kt,Dt){super(lt,dt,vt,Tt,Et,Ct,Rt,kt,Dt),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Curve{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(lt,dt){const vt=this.getUtoTmapping(lt);return this.getPoint(vt,dt)}getPoints(lt=5){const dt=[];for(let vt=0;vt<=lt;vt++)dt.push(this.getPoint(vt/lt));return dt}getSpacedPoints(lt=5){const dt=[];for(let vt=0;vt<=lt;vt++)dt.push(this.getPointAt(vt/lt));return dt}getLength(){const lt=this.getLengths();return lt[lt.length-1]}getLengths(lt=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===lt+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const dt=[];let vt,Tt=this.getPoint(0),Et=0;dt.push(0);for(let Ct=1;Ct<=lt;Ct++)vt=this.getPoint(Ct/lt),Et+=vt.distanceTo(Tt),dt.push(Et),Tt=vt;return this.cacheArcLengths=dt,dt}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(lt,dt){const vt=this.getLengths();let Tt=0;const Et=vt.length;let Ct;dt?Ct=dt:Ct=lt*vt[Et-1];let Rt=0,kt=Et-1,Dt;for(;Rt<=kt;)if(Tt=Math.floor(Rt+(kt-Rt)/2),Dt=vt[Tt]-Ct,Dt<0)Rt=Tt+1;else if(Dt>0)kt=Tt-1;else{kt=Tt;break}if(Tt=kt,vt[Tt]===Ct)return Tt/(Et-1);const Bt=vt[Tt],Ut=vt[Tt+1]-Bt,Zt=(Ct-Bt)/Ut;return(Tt+Zt)/(Et-1)}getTangent(lt,dt){let Tt=lt-1e-4,Et=lt+1e-4;Tt<0&&(Tt=0),Et>1&&(Et=1);const Ct=this.getPoint(Tt),Rt=this.getPoint(Et),kt=dt||(Ct.isVector2?new Vector2:new Vector3);return kt.copy(Rt).sub(Ct).normalize(),kt}getTangentAt(lt,dt){const vt=this.getUtoTmapping(lt);return this.getTangent(vt,dt)}computeFrenetFrames(lt,dt){const vt=new Vector3,Tt=[],Et=[],Ct=[],Rt=new Vector3,kt=new Matrix4;for(let Zt=0;Zt<=lt;Zt++){const Kt=Zt/lt;Tt[Zt]=this.getTangentAt(Kt,new Vector3)}Et[0]=new Vector3,Ct[0]=new Vector3;let Dt=Number.MAX_VALUE;const Bt=Math.abs(Tt[0].x),Ft=Math.abs(Tt[0].y),Ut=Math.abs(Tt[0].z);Bt<=Dt&&(Dt=Bt,vt.set(1,0,0)),Ft<=Dt&&(Dt=Ft,vt.set(0,1,0)),Ut<=Dt&&vt.set(0,0,1),Rt.crossVectors(Tt[0],vt).normalize(),Et[0].crossVectors(Tt[0],Rt),Ct[0].crossVectors(Tt[0],Et[0]);for(let Zt=1;Zt<=lt;Zt++){if(Et[Zt]=Et[Zt-1].clone(),Ct[Zt]=Ct[Zt-1].clone(),Rt.crossVectors(Tt[Zt-1],Tt[Zt]),Rt.length()>Number.EPSILON){Rt.normalize();const Kt=Math.acos(clamp$1(Tt[Zt-1].dot(Tt[Zt]),-1,1));Et[Zt].applyMatrix4(kt.makeRotationAxis(Rt,Kt))}Ct[Zt].crossVectors(Tt[Zt],Et[Zt])}if(dt===!0){let Zt=Math.acos(clamp$1(Et[0].dot(Et[lt]),-1,1));Zt/=lt,Tt[0].dot(Rt.crossVectors(Et[0],Et[lt]))>0&&(Zt=-Zt);for(let Kt=1;Kt<=lt;Kt++)Et[Kt].applyMatrix4(kt.makeRotationAxis(Tt[Kt],Zt*Kt)),Ct[Kt].crossVectors(Tt[Kt],Et[Kt])}return{tangents:Tt,normals:Et,binormals:Ct}}clone(){return new this.constructor().copy(this)}copy(lt){return this.arcLengthDivisions=lt.arcLengthDivisions,this}toJSON(){const lt={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return lt.arcLengthDivisions=this.arcLengthDivisions,lt.type=this.type,lt}fromJSON(lt){return this.arcLengthDivisions=lt.arcLengthDivisions,this}}class EllipseCurve extends Curve{constructor(lt=0,dt=0,vt=1,Tt=1,Et=0,Ct=Math.PI*2,Rt=!1,kt=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=lt,this.aY=dt,this.xRadius=vt,this.yRadius=Tt,this.aStartAngle=Et,this.aEndAngle=Ct,this.aClockwise=Rt,this.aRotation=kt}getPoint(lt,dt){const vt=dt||new Vector2,Tt=Math.PI*2;let Et=this.aEndAngle-this.aStartAngle;const Ct=Math.abs(Et)<Number.EPSILON;for(;Et<0;)Et+=Tt;for(;Et>Tt;)Et-=Tt;Et<Number.EPSILON&&(Ct?Et=0:Et=Tt),this.aClockwise===!0&&!Ct&&(Et===Tt?Et=-Tt:Et=Et-Tt);const Rt=this.aStartAngle+lt*Et;let kt=this.aX+this.xRadius*Math.cos(Rt),Dt=this.aY+this.yRadius*Math.sin(Rt);if(this.aRotation!==0){const Bt=Math.cos(this.aRotation),Ft=Math.sin(this.aRotation),Ut=kt-this.aX,Zt=Dt-this.aY;kt=Ut*Bt-Zt*Ft+this.aX,Dt=Ut*Ft+Zt*Bt+this.aY}return vt.set(kt,Dt)}copy(lt){return super.copy(lt),this.aX=lt.aX,this.aY=lt.aY,this.xRadius=lt.xRadius,this.yRadius=lt.yRadius,this.aStartAngle=lt.aStartAngle,this.aEndAngle=lt.aEndAngle,this.aClockwise=lt.aClockwise,this.aRotation=lt.aRotation,this}toJSON(){const lt=super.toJSON();return lt.aX=this.aX,lt.aY=this.aY,lt.xRadius=this.xRadius,lt.yRadius=this.yRadius,lt.aStartAngle=this.aStartAngle,lt.aEndAngle=this.aEndAngle,lt.aClockwise=this.aClockwise,lt.aRotation=this.aRotation,lt}fromJSON(lt){return super.fromJSON(lt),this.aX=lt.aX,this.aY=lt.aY,this.xRadius=lt.xRadius,this.yRadius=lt.yRadius,this.aStartAngle=lt.aStartAngle,this.aEndAngle=lt.aEndAngle,this.aClockwise=lt.aClockwise,this.aRotation=lt.aRotation,this}}class ArcCurve extends EllipseCurve{constructor(lt,dt,vt,Tt,Et,Ct){super(lt,dt,vt,vt,Tt,Et,Ct),this.isArcCurve=!0,this.type="ArcCurve"}}function CubicPoly(){let ft=0,lt=0,dt=0,vt=0;function Tt(Et,Ct,Rt,kt){ft=Et,lt=Rt,dt=-3*Et+3*Ct-2*Rt-kt,vt=2*Et-2*Ct+Rt+kt}return{initCatmullRom:function(Et,Ct,Rt,kt,Dt){Tt(Ct,Rt,Dt*(Rt-Et),Dt*(kt-Ct))},initNonuniformCatmullRom:function(Et,Ct,Rt,kt,Dt,Bt,Ft){let Ut=(Ct-Et)/Dt-(Rt-Et)/(Dt+Bt)+(Rt-Ct)/Bt,Zt=(Rt-Ct)/Bt-(kt-Ct)/(Bt+Ft)+(kt-Rt)/Ft;Ut*=Bt,Zt*=Bt,Tt(Ct,Rt,Ut,Zt)},calc:function(Et){const Ct=Et*Et,Rt=Ct*Et;return ft+lt*Et+dt*Ct+vt*Rt}}}const tmp=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;class CatmullRomCurve3 extends Curve{constructor(lt=[],dt=!1,vt="centripetal",Tt=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=lt,this.closed=dt,this.curveType=vt,this.tension=Tt}getPoint(lt,dt=new Vector3){const vt=dt,Tt=this.points,Et=Tt.length,Ct=(Et-(this.closed?0:1))*lt;let Rt=Math.floor(Ct),kt=Ct-Rt;this.closed?Rt+=Rt>0?0:(Math.floor(Math.abs(Rt)/Et)+1)*Et:kt===0&&Rt===Et-1&&(Rt=Et-2,kt=1);let Dt,Bt;this.closed||Rt>0?Dt=Tt[(Rt-1)%Et]:(tmp.subVectors(Tt[0],Tt[1]).add(Tt[0]),Dt=tmp);const Ft=Tt[Rt%Et],Ut=Tt[(Rt+1)%Et];if(this.closed||Rt+2<Et?Bt=Tt[(Rt+2)%Et]:(tmp.subVectors(Tt[Et-1],Tt[Et-2]).add(Tt[Et-1]),Bt=tmp),this.curveType==="centripetal"||this.curveType==="chordal"){const Zt=this.curveType==="chordal"?.5:.25;let Kt=Math.pow(Dt.distanceToSquared(Ft),Zt),ln=Math.pow(Ft.distanceToSquared(Ut),Zt),hn=Math.pow(Ut.distanceToSquared(Bt),Zt);ln<1e-4&&(ln=1),Kt<1e-4&&(Kt=ln),hn<1e-4&&(hn=ln),px.initNonuniformCatmullRom(Dt.x,Ft.x,Ut.x,Bt.x,Kt,ln,hn),py.initNonuniformCatmullRom(Dt.y,Ft.y,Ut.y,Bt.y,Kt,ln,hn),pz.initNonuniformCatmullRom(Dt.z,Ft.z,Ut.z,Bt.z,Kt,ln,hn)}else this.curveType==="catmullrom"&&(px.initCatmullRom(Dt.x,Ft.x,Ut.x,Bt.x,this.tension),py.initCatmullRom(Dt.y,Ft.y,Ut.y,Bt.y,this.tension),pz.initCatmullRom(Dt.z,Ft.z,Ut.z,Bt.z,this.tension));return vt.set(px.calc(kt),py.calc(kt),pz.calc(kt)),vt}copy(lt){super.copy(lt),this.points=[];for(let dt=0,vt=lt.points.length;dt<vt;dt++){const Tt=lt.points[dt];this.points.push(Tt.clone())}return this.closed=lt.closed,this.curveType=lt.curveType,this.tension=lt.tension,this}toJSON(){const lt=super.toJSON();lt.points=[];for(let dt=0,vt=this.points.length;dt<vt;dt++){const Tt=this.points[dt];lt.points.push(Tt.toArray())}return lt.closed=this.closed,lt.curveType=this.curveType,lt.tension=this.tension,lt}fromJSON(lt){super.fromJSON(lt),this.points=[];for(let dt=0,vt=lt.points.length;dt<vt;dt++){const Tt=lt.points[dt];this.points.push(new Vector3().fromArray(Tt))}return this.closed=lt.closed,this.curveType=lt.curveType,this.tension=lt.tension,this}}function CatmullRom(ft,lt,dt,vt,Tt){const Et=(vt-lt)*.5,Ct=(Tt-dt)*.5,Rt=ft*ft,kt=ft*Rt;return(2*dt-2*vt+Et+Ct)*kt+(-3*dt+3*vt-2*Et-Ct)*Rt+Et*ft+dt}function QuadraticBezierP0(ft,lt){const dt=1-ft;return dt*dt*lt}function QuadraticBezierP1(ft,lt){return 2*(1-ft)*ft*lt}function QuadraticBezierP2(ft,lt){return ft*ft*lt}function QuadraticBezier(ft,lt,dt,vt){return QuadraticBezierP0(ft,lt)+QuadraticBezierP1(ft,dt)+QuadraticBezierP2(ft,vt)}function CubicBezierP0(ft,lt){const dt=1-ft;return dt*dt*dt*lt}function CubicBezierP1(ft,lt){const dt=1-ft;return 3*dt*dt*ft*lt}function CubicBezierP2(ft,lt){return 3*(1-ft)*ft*ft*lt}function CubicBezierP3(ft,lt){return ft*ft*ft*lt}function CubicBezier(ft,lt,dt,vt,Tt){return CubicBezierP0(ft,lt)+CubicBezierP1(ft,dt)+CubicBezierP2(ft,vt)+CubicBezierP3(ft,Tt)}class CubicBezierCurve extends Curve{constructor(lt=new Vector2,dt=new Vector2,vt=new Vector2,Tt=new Vector2){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=lt,this.v1=dt,this.v2=vt,this.v3=Tt}getPoint(lt,dt=new Vector2){const vt=dt,Tt=this.v0,Et=this.v1,Ct=this.v2,Rt=this.v3;return vt.set(CubicBezier(lt,Tt.x,Et.x,Ct.x,Rt.x),CubicBezier(lt,Tt.y,Et.y,Ct.y,Rt.y)),vt}copy(lt){return super.copy(lt),this.v0.copy(lt.v0),this.v1.copy(lt.v1),this.v2.copy(lt.v2),this.v3.copy(lt.v3),this}toJSON(){const lt=super.toJSON();return lt.v0=this.v0.toArray(),lt.v1=this.v1.toArray(),lt.v2=this.v2.toArray(),lt.v3=this.v3.toArray(),lt}fromJSON(lt){return super.fromJSON(lt),this.v0.fromArray(lt.v0),this.v1.fromArray(lt.v1),this.v2.fromArray(lt.v2),this.v3.fromArray(lt.v3),this}}class CubicBezierCurve3 extends Curve{constructor(lt=new Vector3,dt=new Vector3,vt=new Vector3,Tt=new Vector3){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=lt,this.v1=dt,this.v2=vt,this.v3=Tt}getPoint(lt,dt=new Vector3){const vt=dt,Tt=this.v0,Et=this.v1,Ct=this.v2,Rt=this.v3;return vt.set(CubicBezier(lt,Tt.x,Et.x,Ct.x,Rt.x),CubicBezier(lt,Tt.y,Et.y,Ct.y,Rt.y),CubicBezier(lt,Tt.z,Et.z,Ct.z,Rt.z)),vt}copy(lt){return super.copy(lt),this.v0.copy(lt.v0),this.v1.copy(lt.v1),this.v2.copy(lt.v2),this.v3.copy(lt.v3),this}toJSON(){const lt=super.toJSON();return lt.v0=this.v0.toArray(),lt.v1=this.v1.toArray(),lt.v2=this.v2.toArray(),lt.v3=this.v3.toArray(),lt}fromJSON(lt){return super.fromJSON(lt),this.v0.fromArray(lt.v0),this.v1.fromArray(lt.v1),this.v2.fromArray(lt.v2),this.v3.fromArray(lt.v3),this}}class LineCurve extends Curve{constructor(lt=new Vector2,dt=new Vector2){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=lt,this.v2=dt}getPoint(lt,dt=new Vector2){const vt=dt;return lt===1?vt.copy(this.v2):(vt.copy(this.v2).sub(this.v1),vt.multiplyScalar(lt).add(this.v1)),vt}getPointAt(lt,dt){return this.getPoint(lt,dt)}getTangent(lt,dt=new Vector2){return dt.subVectors(this.v2,this.v1).normalize()}getTangentAt(lt,dt){return this.getTangent(lt,dt)}copy(lt){return super.copy(lt),this.v1.copy(lt.v1),this.v2.copy(lt.v2),this}toJSON(){const lt=super.toJSON();return lt.v1=this.v1.toArray(),lt.v2=this.v2.toArray(),lt}fromJSON(lt){return super.fromJSON(lt),this.v1.fromArray(lt.v1),this.v2.fromArray(lt.v2),this}}class LineCurve3 extends Curve{constructor(lt=new Vector3,dt=new Vector3){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=lt,this.v2=dt}getPoint(lt,dt=new Vector3){const vt=dt;return lt===1?vt.copy(this.v2):(vt.copy(this.v2).sub(this.v1),vt.multiplyScalar(lt).add(this.v1)),vt}getPointAt(lt,dt){return this.getPoint(lt,dt)}getTangent(lt,dt=new Vector3){return dt.subVectors(this.v2,this.v1).normalize()}getTangentAt(lt,dt){return this.getTangent(lt,dt)}copy(lt){return super.copy(lt),this.v1.copy(lt.v1),this.v2.copy(lt.v2),this}toJSON(){const lt=super.toJSON();return lt.v1=this.v1.toArray(),lt.v2=this.v2.toArray(),lt}fromJSON(lt){return super.fromJSON(lt),this.v1.fromArray(lt.v1),this.v2.fromArray(lt.v2),this}}class QuadraticBezierCurve extends Curve{constructor(lt=new Vector2,dt=new Vector2,vt=new Vector2){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=lt,this.v1=dt,this.v2=vt}getPoint(lt,dt=new Vector2){const vt=dt,Tt=this.v0,Et=this.v1,Ct=this.v2;return vt.set(QuadraticBezier(lt,Tt.x,Et.x,Ct.x),QuadraticBezier(lt,Tt.y,Et.y,Ct.y)),vt}copy(lt){return super.copy(lt),this.v0.copy(lt.v0),this.v1.copy(lt.v1),this.v2.copy(lt.v2),this}toJSON(){const lt=super.toJSON();return lt.v0=this.v0.toArray(),lt.v1=this.v1.toArray(),lt.v2=this.v2.toArray(),lt}fromJSON(lt){return super.fromJSON(lt),this.v0.fromArray(lt.v0),this.v1.fromArray(lt.v1),this.v2.fromArray(lt.v2),this}}class QuadraticBezierCurve3 extends Curve{constructor(lt=new Vector3,dt=new Vector3,vt=new Vector3){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=lt,this.v1=dt,this.v2=vt}getPoint(lt,dt=new Vector3){const vt=dt,Tt=this.v0,Et=this.v1,Ct=this.v2;return vt.set(QuadraticBezier(lt,Tt.x,Et.x,Ct.x),QuadraticBezier(lt,Tt.y,Et.y,Ct.y),QuadraticBezier(lt,Tt.z,Et.z,Ct.z)),vt}copy(lt){return super.copy(lt),this.v0.copy(lt.v0),this.v1.copy(lt.v1),this.v2.copy(lt.v2),this}toJSON(){const lt=super.toJSON();return lt.v0=this.v0.toArray(),lt.v1=this.v1.toArray(),lt.v2=this.v2.toArray(),lt}fromJSON(lt){return super.fromJSON(lt),this.v0.fromArray(lt.v0),this.v1.fromArray(lt.v1),this.v2.fromArray(lt.v2),this}}class SplineCurve extends Curve{constructor(lt=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=lt}getPoint(lt,dt=new Vector2){const vt=dt,Tt=this.points,Et=(Tt.length-1)*lt,Ct=Math.floor(Et),Rt=Et-Ct,kt=Tt[Ct===0?Ct:Ct-1],Dt=Tt[Ct],Bt=Tt[Ct>Tt.length-2?Tt.length-1:Ct+1],Ft=Tt[Ct>Tt.length-3?Tt.length-1:Ct+2];return vt.set(CatmullRom(Rt,kt.x,Dt.x,Bt.x,Ft.x),CatmullRom(Rt,kt.y,Dt.y,Bt.y,Ft.y)),vt}copy(lt){super.copy(lt),this.points=[];for(let dt=0,vt=lt.points.length;dt<vt;dt++){const Tt=lt.points[dt];this.points.push(Tt.clone())}return this}toJSON(){const lt=super.toJSON();lt.points=[];for(let dt=0,vt=this.points.length;dt<vt;dt++){const Tt=this.points[dt];lt.points.push(Tt.toArray())}return lt}fromJSON(lt){super.fromJSON(lt),this.points=[];for(let dt=0,vt=lt.points.length;dt<vt;dt++){const Tt=lt.points[dt];this.points.push(new Vector2().fromArray(Tt))}return this}}var Curves=Object.freeze({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve});class CurvePath extends Curve{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(lt){this.curves.push(lt)}closePath(){const lt=this.curves[0].getPoint(0),dt=this.curves[this.curves.length-1].getPoint(1);lt.equals(dt)||this.curves.push(new LineCurve(dt,lt))}getPoint(lt,dt){const vt=lt*this.getLength(),Tt=this.getCurveLengths();let Et=0;for(;Et<Tt.length;){if(Tt[Et]>=vt){const Ct=Tt[Et]-vt,Rt=this.curves[Et],kt=Rt.getLength(),Dt=kt===0?0:1-Ct/kt;return Rt.getPointAt(Dt,dt)}Et++}return null}getLength(){const lt=this.getCurveLengths();return lt[lt.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const lt=[];let dt=0;for(let vt=0,Tt=this.curves.length;vt<Tt;vt++)dt+=this.curves[vt].getLength(),lt.push(dt);return this.cacheLengths=lt,lt}getSpacedPoints(lt=40){const dt=[];for(let vt=0;vt<=lt;vt++)dt.push(this.getPoint(vt/lt));return this.autoClose&&dt.push(dt[0]),dt}getPoints(lt=12){const dt=[];let vt;for(let Tt=0,Et=this.curves;Tt<Et.length;Tt++){const Ct=Et[Tt],Rt=Ct.isEllipseCurve?lt*2:Ct.isLineCurve||Ct.isLineCurve3?1:Ct.isSplineCurve?lt*Ct.points.length:lt,kt=Ct.getPoints(Rt);for(let Dt=0;Dt<kt.length;Dt++){const Bt=kt[Dt];vt&&vt.equals(Bt)||(dt.push(Bt),vt=Bt)}}return this.autoClose&&dt.length>1&&!dt[dt.length-1].equals(dt[0])&&dt.push(dt[0]),dt}copy(lt){super.copy(lt),this.curves=[];for(let dt=0,vt=lt.curves.length;dt<vt;dt++){const Tt=lt.curves[dt];this.curves.push(Tt.clone())}return this.autoClose=lt.autoClose,this}toJSON(){const lt=super.toJSON();lt.autoClose=this.autoClose,lt.curves=[];for(let dt=0,vt=this.curves.length;dt<vt;dt++){const Tt=this.curves[dt];lt.curves.push(Tt.toJSON())}return lt}fromJSON(lt){super.fromJSON(lt),this.autoClose=lt.autoClose,this.curves=[];for(let dt=0,vt=lt.curves.length;dt<vt;dt++){const Tt=lt.curves[dt];this.curves.push(new Curves[Tt.type]().fromJSON(Tt))}return this}}class Path extends CurvePath{constructor(lt){super(),this.type="Path",this.currentPoint=new Vector2,lt&&this.setFromPoints(lt)}setFromPoints(lt){this.moveTo(lt[0].x,lt[0].y);for(let dt=1,vt=lt.length;dt<vt;dt++)this.lineTo(lt[dt].x,lt[dt].y);return this}moveTo(lt,dt){return this.currentPoint.set(lt,dt),this}lineTo(lt,dt){const vt=new LineCurve(this.currentPoint.clone(),new Vector2(lt,dt));return this.curves.push(vt),this.currentPoint.set(lt,dt),this}quadraticCurveTo(lt,dt,vt,Tt){const Et=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(lt,dt),new Vector2(vt,Tt));return this.curves.push(Et),this.currentPoint.set(vt,Tt),this}bezierCurveTo(lt,dt,vt,Tt,Et,Ct){const Rt=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(lt,dt),new Vector2(vt,Tt),new Vector2(Et,Ct));return this.curves.push(Rt),this.currentPoint.set(Et,Ct),this}splineThru(lt){const dt=[this.currentPoint.clone()].concat(lt),vt=new SplineCurve(dt);return this.curves.push(vt),this.currentPoint.copy(lt[lt.length-1]),this}arc(lt,dt,vt,Tt,Et,Ct){const Rt=this.currentPoint.x,kt=this.currentPoint.y;return this.absarc(lt+Rt,dt+kt,vt,Tt,Et,Ct),this}absarc(lt,dt,vt,Tt,Et,Ct){return this.absellipse(lt,dt,vt,vt,Tt,Et,Ct),this}ellipse(lt,dt,vt,Tt,Et,Ct,Rt,kt){const Dt=this.currentPoint.x,Bt=this.currentPoint.y;return this.absellipse(lt+Dt,dt+Bt,vt,Tt,Et,Ct,Rt,kt),this}absellipse(lt,dt,vt,Tt,Et,Ct,Rt,kt){const Dt=new EllipseCurve(lt,dt,vt,Tt,Et,Ct,Rt,kt);if(this.curves.length>0){const Ft=Dt.getPoint(0);Ft.equals(this.currentPoint)||this.lineTo(Ft.x,Ft.y)}this.curves.push(Dt);const Bt=Dt.getPoint(1);return this.currentPoint.copy(Bt),this}copy(lt){return super.copy(lt),this.currentPoint.copy(lt.currentPoint),this}toJSON(){const lt=super.toJSON();return lt.currentPoint=this.currentPoint.toArray(),lt}fromJSON(lt){return super.fromJSON(lt),this.currentPoint.fromArray(lt.currentPoint),this}}class LatheGeometry extends BufferGeometry{constructor(lt=[new Vector2(0,-.5),new Vector2(.5,0),new Vector2(0,.5)],dt=12,vt=0,Tt=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:lt,segments:dt,phiStart:vt,phiLength:Tt},dt=Math.floor(dt),Tt=clamp$1(Tt,0,Math.PI*2);const Et=[],Ct=[],Rt=[],kt=[],Dt=[],Bt=1/dt,Ft=new Vector3,Ut=new Vector2,Zt=new Vector3,Kt=new Vector3,ln=new Vector3;let hn=0,dn=0;for(let pn=0;pn<=lt.length-1;pn++)switch(pn){case 0:hn=lt[pn+1].x-lt[pn].x,dn=lt[pn+1].y-lt[pn].y,Zt.x=dn*1,Zt.y=-hn,Zt.z=dn*0,ln.copy(Zt),Zt.normalize(),kt.push(Zt.x,Zt.y,Zt.z);break;case lt.length-1:kt.push(ln.x,ln.y,ln.z);break;default:hn=lt[pn+1].x-lt[pn].x,dn=lt[pn+1].y-lt[pn].y,Zt.x=dn*1,Zt.y=-hn,Zt.z=dn*0,Kt.copy(Zt),Zt.x+=ln.x,Zt.y+=ln.y,Zt.z+=ln.z,Zt.normalize(),kt.push(Zt.x,Zt.y,Zt.z),ln.copy(Kt)}for(let pn=0;pn<=dt;pn++){const mn=vt+pn*Bt*Tt,On=Math.sin(mn),bn=Math.cos(mn);for(let En=0;En<=lt.length-1;En++){Ft.x=lt[En].x*On,Ft.y=lt[En].y,Ft.z=lt[En].x*bn,Ct.push(Ft.x,Ft.y,Ft.z),Ut.x=pn/dt,Ut.y=En/(lt.length-1),Rt.push(Ut.x,Ut.y);const An=kt[3*En+0]*On,Tn=kt[3*En+1],In=kt[3*En+0]*bn;Dt.push(An,Tn,In)}}for(let pn=0;pn<dt;pn++)for(let mn=0;mn<lt.length-1;mn++){const On=mn+pn*lt.length,bn=On,En=On+lt.length,An=On+lt.length+1,Tn=On+1;Et.push(bn,En,Tn),Et.push(An,Tn,En)}this.setIndex(Et),this.setAttribute("position",new Float32BufferAttribute(Ct,3)),this.setAttribute("uv",new Float32BufferAttribute(Rt,2)),this.setAttribute("normal",new Float32BufferAttribute(Dt,3))}copy(lt){return super.copy(lt),this.parameters=Object.assign({},lt.parameters),this}static fromJSON(lt){return new LatheGeometry(lt.points,lt.segments,lt.phiStart,lt.phiLength)}}class CapsuleGeometry extends LatheGeometry{constructor(lt=1,dt=1,vt=4,Tt=8){const Et=new Path;Et.absarc(0,-dt/2,lt,Math.PI*1.5,0),Et.absarc(0,dt/2,lt,0,Math.PI*.5),super(Et.getPoints(vt),Tt),this.type="CapsuleGeometry",this.parameters={radius:lt,height:dt,capSegments:vt,radialSegments:Tt}}static fromJSON(lt){return new CapsuleGeometry(lt.radius,lt.length,lt.capSegments,lt.radialSegments)}}class CircleGeometry extends BufferGeometry{constructor(lt=1,dt=32,vt=0,Tt=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:lt,segments:dt,thetaStart:vt,thetaLength:Tt},dt=Math.max(3,dt);const Et=[],Ct=[],Rt=[],kt=[],Dt=new Vector3,Bt=new Vector2;Ct.push(0,0,0),Rt.push(0,0,1),kt.push(.5,.5);for(let Ft=0,Ut=3;Ft<=dt;Ft++,Ut+=3){const Zt=vt+Ft/dt*Tt;Dt.x=lt*Math.cos(Zt),Dt.y=lt*Math.sin(Zt),Ct.push(Dt.x,Dt.y,Dt.z),Rt.push(0,0,1),Bt.x=(Ct[Ut]/lt+1)/2,Bt.y=(Ct[Ut+1]/lt+1)/2,kt.push(Bt.x,Bt.y)}for(let Ft=1;Ft<=dt;Ft++)Et.push(Ft,Ft+1,0);this.setIndex(Et),this.setAttribute("position",new Float32BufferAttribute(Ct,3)),this.setAttribute("normal",new Float32BufferAttribute(Rt,3)),this.setAttribute("uv",new Float32BufferAttribute(kt,2))}copy(lt){return super.copy(lt),this.parameters=Object.assign({},lt.parameters),this}static fromJSON(lt){return new CircleGeometry(lt.radius,lt.segments,lt.thetaStart,lt.thetaLength)}}class CylinderGeometry extends BufferGeometry{constructor(lt=1,dt=1,vt=1,Tt=32,Et=1,Ct=!1,Rt=0,kt=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:lt,radiusBottom:dt,height:vt,radialSegments:Tt,heightSegments:Et,openEnded:Ct,thetaStart:Rt,thetaLength:kt};const Dt=this;Tt=Math.floor(Tt),Et=Math.floor(Et);const Bt=[],Ft=[],Ut=[],Zt=[];let Kt=0;const ln=[],hn=vt/2;let dn=0;pn(),Ct===!1&&(lt>0&&mn(!0),dt>0&&mn(!1)),this.setIndex(Bt),this.setAttribute("position",new Float32BufferAttribute(Ft,3)),this.setAttribute("normal",new Float32BufferAttribute(Ut,3)),this.setAttribute("uv",new Float32BufferAttribute(Zt,2));function pn(){const On=new Vector3,bn=new Vector3;let En=0;const An=(dt-lt)/vt;for(let Tn=0;Tn<=Et;Tn++){const In=[],Rn=Tn/Et,Dn=Rn*(dt-lt)+lt;for(let Bn=0;Bn<=Tt;Bn++){const Hn=Bn/Tt,jn=Hn*kt+Rt,Kn=Math.sin(jn),zn=Math.cos(jn);bn.x=Dn*Kn,bn.y=-Rn*vt+hn,bn.z=Dn*zn,Ft.push(bn.x,bn.y,bn.z),On.set(Kn,An,zn).normalize(),Ut.push(On.x,On.y,On.z),Zt.push(Hn,1-Rn),In.push(Kt++)}ln.push(In)}for(let Tn=0;Tn<Tt;Tn++)for(let In=0;In<Et;In++){const Rn=ln[In][Tn],Dn=ln[In+1][Tn],Bn=ln[In+1][Tn+1],Hn=ln[In][Tn+1];Bt.push(Rn,Dn,Hn),Bt.push(Dn,Bn,Hn),En+=6}Dt.addGroup(dn,En,0),dn+=En}function mn(On){const bn=Kt,En=new Vector2,An=new Vector3;let Tn=0;const In=On===!0?lt:dt,Rn=On===!0?1:-1;for(let Bn=1;Bn<=Tt;Bn++)Ft.push(0,hn*Rn,0),Ut.push(0,Rn,0),Zt.push(.5,.5),Kt++;const Dn=Kt;for(let Bn=0;Bn<=Tt;Bn++){const jn=Bn/Tt*kt+Rt,Kn=Math.cos(jn),zn=Math.sin(jn);An.x=In*zn,An.y=hn*Rn,An.z=In*Kn,Ft.push(An.x,An.y,An.z),Ut.push(0,Rn,0),En.x=Kn*.5+.5,En.y=zn*.5*Rn+.5,Zt.push(En.x,En.y),Kt++}for(let Bn=0;Bn<Tt;Bn++){const Hn=bn+Bn,jn=Dn+Bn;On===!0?Bt.push(jn,jn+1,Hn):Bt.push(jn+1,jn,Hn),Tn+=3}Dt.addGroup(dn,Tn,On===!0?1:2),dn+=Tn}}copy(lt){return super.copy(lt),this.parameters=Object.assign({},lt.parameters),this}static fromJSON(lt){return new CylinderGeometry(lt.radiusTop,lt.radiusBottom,lt.height,lt.radialSegments,lt.heightSegments,lt.openEnded,lt.thetaStart,lt.thetaLength)}}class ConeGeometry extends CylinderGeometry{constructor(lt=1,dt=1,vt=32,Tt=1,Et=!1,Ct=0,Rt=Math.PI*2){super(0,lt,dt,vt,Tt,Et,Ct,Rt),this.type="ConeGeometry",this.parameters={radius:lt,height:dt,radialSegments:vt,heightSegments:Tt,openEnded:Et,thetaStart:Ct,thetaLength:Rt}}static fromJSON(lt){return new ConeGeometry(lt.radius,lt.height,lt.radialSegments,lt.heightSegments,lt.openEnded,lt.thetaStart,lt.thetaLength)}}class PolyhedronGeometry extends BufferGeometry{constructor(lt=[],dt=[],vt=1,Tt=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:lt,indices:dt,radius:vt,detail:Tt};const Et=[],Ct=[];Rt(Tt),Dt(vt),Bt(),this.setAttribute("position",new Float32BufferAttribute(Et,3)),this.setAttribute("normal",new Float32BufferAttribute(Et.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(Ct,2)),Tt===0?this.computeVertexNormals():this.normalizeNormals();function Rt(pn){const mn=new Vector3,On=new Vector3,bn=new Vector3;for(let En=0;En<dt.length;En+=3)Zt(dt[En+0],mn),Zt(dt[En+1],On),Zt(dt[En+2],bn),kt(mn,On,bn,pn)}function kt(pn,mn,On,bn){const En=bn+1,An=[];for(let Tn=0;Tn<=En;Tn++){An[Tn]=[];const In=pn.clone().lerp(On,Tn/En),Rn=mn.clone().lerp(On,Tn/En),Dn=En-Tn;for(let Bn=0;Bn<=Dn;Bn++)Bn===0&&Tn===En?An[Tn][Bn]=In:An[Tn][Bn]=In.clone().lerp(Rn,Bn/Dn)}for(let Tn=0;Tn<En;Tn++)for(let In=0;In<2*(En-Tn)-1;In++){const Rn=Math.floor(In/2);In%2===0?(Ut(An[Tn][Rn+1]),Ut(An[Tn+1][Rn]),Ut(An[Tn][Rn])):(Ut(An[Tn][Rn+1]),Ut(An[Tn+1][Rn+1]),Ut(An[Tn+1][Rn]))}}function Dt(pn){const mn=new Vector3;for(let On=0;On<Et.length;On+=3)mn.x=Et[On+0],mn.y=Et[On+1],mn.z=Et[On+2],mn.normalize().multiplyScalar(pn),Et[On+0]=mn.x,Et[On+1]=mn.y,Et[On+2]=mn.z}function Bt(){const pn=new Vector3;for(let mn=0;mn<Et.length;mn+=3){pn.x=Et[mn+0],pn.y=Et[mn+1],pn.z=Et[mn+2];const On=hn(pn)/2/Math.PI+.5,bn=dn(pn)/Math.PI+.5;Ct.push(On,1-bn)}Kt(),Ft()}function Ft(){for(let pn=0;pn<Ct.length;pn+=6){const mn=Ct[pn+0],On=Ct[pn+2],bn=Ct[pn+4],En=Math.max(mn,On,bn),An=Math.min(mn,On,bn);En>.9&&An<.1&&(mn<.2&&(Ct[pn+0]+=1),On<.2&&(Ct[pn+2]+=1),bn<.2&&(Ct[pn+4]+=1))}}function Ut(pn){Et.push(pn.x,pn.y,pn.z)}function Zt(pn,mn){const On=pn*3;mn.x=lt[On+0],mn.y=lt[On+1],mn.z=lt[On+2]}function Kt(){const pn=new Vector3,mn=new Vector3,On=new Vector3,bn=new Vector3,En=new Vector2,An=new Vector2,Tn=new Vector2;for(let In=0,Rn=0;In<Et.length;In+=9,Rn+=6){pn.set(Et[In+0],Et[In+1],Et[In+2]),mn.set(Et[In+3],Et[In+4],Et[In+5]),On.set(Et[In+6],Et[In+7],Et[In+8]),En.set(Ct[Rn+0],Ct[Rn+1]),An.set(Ct[Rn+2],Ct[Rn+3]),Tn.set(Ct[Rn+4],Ct[Rn+5]),bn.copy(pn).add(mn).add(On).divideScalar(3);const Dn=hn(bn);ln(En,Rn+0,pn,Dn),ln(An,Rn+2,mn,Dn),ln(Tn,Rn+4,On,Dn)}}function ln(pn,mn,On,bn){bn<0&&pn.x===1&&(Ct[mn]=pn.x-1),On.x===0&&On.z===0&&(Ct[mn]=bn/2/Math.PI+.5)}function hn(pn){return Math.atan2(pn.z,-pn.x)}function dn(pn){return Math.atan2(-pn.y,Math.sqrt(pn.x*pn.x+pn.z*pn.z))}}copy(lt){return super.copy(lt),this.parameters=Object.assign({},lt.parameters),this}static fromJSON(lt){return new PolyhedronGeometry(lt.vertices,lt.indices,lt.radius,lt.details)}}class DodecahedronGeometry extends PolyhedronGeometry{constructor(lt=1,dt=0){const vt=(1+Math.sqrt(5))/2,Tt=1/vt,Et=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-Tt,-vt,0,-Tt,vt,0,Tt,-vt,0,Tt,vt,-Tt,-vt,0,-Tt,vt,0,Tt,-vt,0,Tt,vt,0,-vt,0,-Tt,vt,0,-Tt,-vt,0,Tt,vt,0,Tt],Ct=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(Et,Ct,lt,dt),this.type="DodecahedronGeometry",this.parameters={radius:lt,detail:dt}}static fromJSON(lt){return new DodecahedronGeometry(lt.radius,lt.detail)}}const _v0=new Vector3,_v1$1=new Vector3,_normal=new Vector3,_triangle=new Triangle;class EdgesGeometry extends BufferGeometry{constructor(lt=null,dt=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:lt,thresholdAngle:dt},lt!==null){const Tt=Math.pow(10,4),Et=Math.cos(DEG2RAD*dt),Ct=lt.getIndex(),Rt=lt.getAttribute("position"),kt=Ct?Ct.count:Rt.count,Dt=[0,0,0],Bt=["a","b","c"],Ft=new Array(3),Ut={},Zt=[];for(let Kt=0;Kt<kt;Kt+=3){Ct?(Dt[0]=Ct.getX(Kt),Dt[1]=Ct.getX(Kt+1),Dt[2]=Ct.getX(Kt+2)):(Dt[0]=Kt,Dt[1]=Kt+1,Dt[2]=Kt+2);const{a:ln,b:hn,c:dn}=_triangle;if(ln.fromBufferAttribute(Rt,Dt[0]),hn.fromBufferAttribute(Rt,Dt[1]),dn.fromBufferAttribute(Rt,Dt[2]),_triangle.getNormal(_normal),Ft[0]=`${Math.round(ln.x*Tt)},${Math.round(ln.y*Tt)},${Math.round(ln.z*Tt)}`,Ft[1]=`${Math.round(hn.x*Tt)},${Math.round(hn.y*Tt)},${Math.round(hn.z*Tt)}`,Ft[2]=`${Math.round(dn.x*Tt)},${Math.round(dn.y*Tt)},${Math.round(dn.z*Tt)}`,!(Ft[0]===Ft[1]||Ft[1]===Ft[2]||Ft[2]===Ft[0]))for(let pn=0;pn<3;pn++){const mn=(pn+1)%3,On=Ft[pn],bn=Ft[mn],En=_triangle[Bt[pn]],An=_triangle[Bt[mn]],Tn=`${On}_${bn}`,In=`${bn}_${On}`;In in Ut&&Ut[In]?(_normal.dot(Ut[In].normal)<=Et&&(Zt.push(En.x,En.y,En.z),Zt.push(An.x,An.y,An.z)),Ut[In]=null):Tn in Ut||(Ut[Tn]={index0:Dt[pn],index1:Dt[mn],normal:_normal.clone()})}}for(const Kt in Ut)if(Ut[Kt]){const{index0:ln,index1:hn}=Ut[Kt];_v0.fromBufferAttribute(Rt,ln),_v1$1.fromBufferAttribute(Rt,hn),Zt.push(_v0.x,_v0.y,_v0.z),Zt.push(_v1$1.x,_v1$1.y,_v1$1.z)}this.setAttribute("position",new Float32BufferAttribute(Zt,3))}}copy(lt){return super.copy(lt),this.parameters=Object.assign({},lt.parameters),this}}class Shape extends Path{constructor(lt){super(lt),this.uuid=generateUUID(),this.type="Shape",this.holes=[]}getPointsHoles(lt){const dt=[];for(let vt=0,Tt=this.holes.length;vt<Tt;vt++)dt[vt]=this.holes[vt].getPoints(lt);return dt}extractPoints(lt){return{shape:this.getPoints(lt),holes:this.getPointsHoles(lt)}}copy(lt){super.copy(lt),this.holes=[];for(let dt=0,vt=lt.holes.length;dt<vt;dt++){const Tt=lt.holes[dt];this.holes.push(Tt.clone())}return this}toJSON(){const lt=super.toJSON();lt.uuid=this.uuid,lt.holes=[];for(let dt=0,vt=this.holes.length;dt<vt;dt++){const Tt=this.holes[dt];lt.holes.push(Tt.toJSON())}return lt}fromJSON(lt){super.fromJSON(lt),this.uuid=lt.uuid,this.holes=[];for(let dt=0,vt=lt.holes.length;dt<vt;dt++){const Tt=lt.holes[dt];this.holes.push(new Path().fromJSON(Tt))}return this}}const Earcut={triangulate:function(ft,lt,dt=2){const vt=lt&&lt.length,Tt=vt?lt[0]*dt:ft.length;let Et=linkedList(ft,0,Tt,dt,!0);const Ct=[];if(!Et||Et.next===Et.prev)return Ct;let Rt,kt,Dt,Bt,Ft,Ut,Zt;if(vt&&(Et=eliminateHoles(ft,lt,Et,dt)),ft.length>80*dt){Rt=Dt=ft[0],kt=Bt=ft[1];for(let Kt=dt;Kt<Tt;Kt+=dt)Ft=ft[Kt],Ut=ft[Kt+1],Ft<Rt&&(Rt=Ft),Ut<kt&&(kt=Ut),Ft>Dt&&(Dt=Ft),Ut>Bt&&(Bt=Ut);Zt=Math.max(Dt-Rt,Bt-kt),Zt=Zt!==0?32767/Zt:0}return earcutLinked(Et,Ct,dt,Rt,kt,Zt,0),Ct}};function linkedList(ft,lt,dt,vt,Tt){let Et,Ct;if(Tt===signedArea(ft,lt,dt,vt)>0)for(Et=lt;Et<dt;Et+=vt)Ct=insertNode(Et,ft[Et],ft[Et+1],Ct);else for(Et=dt-vt;Et>=lt;Et-=vt)Ct=insertNode(Et,ft[Et],ft[Et+1],Ct);return Ct&&equals(Ct,Ct.next)&&(removeNode(Ct),Ct=Ct.next),Ct}function filterPoints(ft,lt){if(!ft)return ft;lt||(lt=ft);let dt=ft,vt;do if(vt=!1,!dt.steiner&&(equals(dt,dt.next)||area(dt.prev,dt,dt.next)===0)){if(removeNode(dt),dt=lt=dt.prev,dt===dt.next)break;vt=!0}else dt=dt.next;while(vt||dt!==lt);return lt}function earcutLinked(ft,lt,dt,vt,Tt,Et,Ct){if(!ft)return;!Ct&&Et&&indexCurve(ft,vt,Tt,Et);let Rt=ft,kt,Dt;for(;ft.prev!==ft.next;){if(kt=ft.prev,Dt=ft.next,Et?isEarHashed(ft,vt,Tt,Et):isEar(ft)){lt.push(kt.i/dt|0),lt.push(ft.i/dt|0),lt.push(Dt.i/dt|0),removeNode(ft),ft=Dt.next,Rt=Dt.next;continue}if(ft=Dt,ft===Rt){Ct?Ct===1?(ft=cureLocalIntersections(filterPoints(ft),lt,dt),earcutLinked(ft,lt,dt,vt,Tt,Et,2)):Ct===2&&splitEarcut(ft,lt,dt,vt,Tt,Et):earcutLinked(filterPoints(ft),lt,dt,vt,Tt,Et,1);break}}}function isEar(ft){const lt=ft.prev,dt=ft,vt=ft.next;if(area(lt,dt,vt)>=0)return!1;const Tt=lt.x,Et=dt.x,Ct=vt.x,Rt=lt.y,kt=dt.y,Dt=vt.y,Bt=Tt<Et?Tt<Ct?Tt:Ct:Et<Ct?Et:Ct,Ft=Rt<kt?Rt<Dt?Rt:Dt:kt<Dt?kt:Dt,Ut=Tt>Et?Tt>Ct?Tt:Ct:Et>Ct?Et:Ct,Zt=Rt>kt?Rt>Dt?Rt:Dt:kt>Dt?kt:Dt;let Kt=vt.next;for(;Kt!==lt;){if(Kt.x>=Bt&&Kt.x<=Ut&&Kt.y>=Ft&&Kt.y<=Zt&&pointInTriangle(Tt,Rt,Et,kt,Ct,Dt,Kt.x,Kt.y)&&area(Kt.prev,Kt,Kt.next)>=0)return!1;Kt=Kt.next}return!0}function isEarHashed(ft,lt,dt,vt){const Tt=ft.prev,Et=ft,Ct=ft.next;if(area(Tt,Et,Ct)>=0)return!1;const Rt=Tt.x,kt=Et.x,Dt=Ct.x,Bt=Tt.y,Ft=Et.y,Ut=Ct.y,Zt=Rt<kt?Rt<Dt?Rt:Dt:kt<Dt?kt:Dt,Kt=Bt<Ft?Bt<Ut?Bt:Ut:Ft<Ut?Ft:Ut,ln=Rt>kt?Rt>Dt?Rt:Dt:kt>Dt?kt:Dt,hn=Bt>Ft?Bt>Ut?Bt:Ut:Ft>Ut?Ft:Ut,dn=zOrder(Zt,Kt,lt,dt,vt),pn=zOrder(ln,hn,lt,dt,vt);let mn=ft.prevZ,On=ft.nextZ;for(;mn&&mn.z>=dn&&On&&On.z<=pn;){if(mn.x>=Zt&&mn.x<=ln&&mn.y>=Kt&&mn.y<=hn&&mn!==Tt&&mn!==Ct&&pointInTriangle(Rt,Bt,kt,Ft,Dt,Ut,mn.x,mn.y)&&area(mn.prev,mn,mn.next)>=0||(mn=mn.prevZ,On.x>=Zt&&On.x<=ln&&On.y>=Kt&&On.y<=hn&&On!==Tt&&On!==Ct&&pointInTriangle(Rt,Bt,kt,Ft,Dt,Ut,On.x,On.y)&&area(On.prev,On,On.next)>=0))return!1;On=On.nextZ}for(;mn&&mn.z>=dn;){if(mn.x>=Zt&&mn.x<=ln&&mn.y>=Kt&&mn.y<=hn&&mn!==Tt&&mn!==Ct&&pointInTriangle(Rt,Bt,kt,Ft,Dt,Ut,mn.x,mn.y)&&area(mn.prev,mn,mn.next)>=0)return!1;mn=mn.prevZ}for(;On&&On.z<=pn;){if(On.x>=Zt&&On.x<=ln&&On.y>=Kt&&On.y<=hn&&On!==Tt&&On!==Ct&&pointInTriangle(Rt,Bt,kt,Ft,Dt,Ut,On.x,On.y)&&area(On.prev,On,On.next)>=0)return!1;On=On.nextZ}return!0}function cureLocalIntersections(ft,lt,dt){let vt=ft;do{const Tt=vt.prev,Et=vt.next.next;!equals(Tt,Et)&&intersects(Tt,vt,vt.next,Et)&&locallyInside(Tt,Et)&&locallyInside(Et,Tt)&&(lt.push(Tt.i/dt|0),lt.push(vt.i/dt|0),lt.push(Et.i/dt|0),removeNode(vt),removeNode(vt.next),vt=ft=Et),vt=vt.next}while(vt!==ft);return filterPoints(vt)}function splitEarcut(ft,lt,dt,vt,Tt,Et){let Ct=ft;do{let Rt=Ct.next.next;for(;Rt!==Ct.prev;){if(Ct.i!==Rt.i&&isValidDiagonal(Ct,Rt)){let kt=splitPolygon(Ct,Rt);Ct=filterPoints(Ct,Ct.next),kt=filterPoints(kt,kt.next),earcutLinked(Ct,lt,dt,vt,Tt,Et,0),earcutLinked(kt,lt,dt,vt,Tt,Et,0);return}Rt=Rt.next}Ct=Ct.next}while(Ct!==ft)}function eliminateHoles(ft,lt,dt,vt){const Tt=[];let Et,Ct,Rt,kt,Dt;for(Et=0,Ct=lt.length;Et<Ct;Et++)Rt=lt[Et]*vt,kt=Et<Ct-1?lt[Et+1]*vt:ft.length,Dt=linkedList(ft,Rt,kt,vt,!1),Dt===Dt.next&&(Dt.steiner=!0),Tt.push(getLeftmost(Dt));for(Tt.sort(compareX),Et=0;Et<Tt.length;Et++)dt=eliminateHole(Tt[Et],dt);return dt}function compareX(ft,lt){return ft.x-lt.x}function eliminateHole(ft,lt){const dt=findHoleBridge(ft,lt);if(!dt)return lt;const vt=splitPolygon(dt,ft);return filterPoints(vt,vt.next),filterPoints(dt,dt.next)}function findHoleBridge(ft,lt){let dt=lt,vt=-1/0,Tt;const Et=ft.x,Ct=ft.y;do{if(Ct<=dt.y&&Ct>=dt.next.y&&dt.next.y!==dt.y){const Ut=dt.x+(Ct-dt.y)*(dt.next.x-dt.x)/(dt.next.y-dt.y);if(Ut<=Et&&Ut>vt&&(vt=Ut,Tt=dt.x<dt.next.x?dt:dt.next,Ut===Et))return Tt}dt=dt.next}while(dt!==lt);if(!Tt)return null;const Rt=Tt,kt=Tt.x,Dt=Tt.y;let Bt=1/0,Ft;dt=Tt;do Et>=dt.x&&dt.x>=kt&&Et!==dt.x&&pointInTriangle(Ct<Dt?Et:vt,Ct,kt,Dt,Ct<Dt?vt:Et,Ct,dt.x,dt.y)&&(Ft=Math.abs(Ct-dt.y)/(Et-dt.x),locallyInside(dt,ft)&&(Ft<Bt||Ft===Bt&&(dt.x>Tt.x||dt.x===Tt.x&&sectorContainsSector(Tt,dt)))&&(Tt=dt,Bt=Ft)),dt=dt.next;while(dt!==Rt);return Tt}function sectorContainsSector(ft,lt){return area(ft.prev,ft,lt.prev)<0&&area(lt.next,ft,ft.next)<0}function indexCurve(ft,lt,dt,vt){let Tt=ft;do Tt.z===0&&(Tt.z=zOrder(Tt.x,Tt.y,lt,dt,vt)),Tt.prevZ=Tt.prev,Tt.nextZ=Tt.next,Tt=Tt.next;while(Tt!==ft);Tt.prevZ.nextZ=null,Tt.prevZ=null,sortLinked(Tt)}function sortLinked(ft){let lt,dt,vt,Tt,Et,Ct,Rt,kt,Dt=1;do{for(dt=ft,ft=null,Et=null,Ct=0;dt;){for(Ct++,vt=dt,Rt=0,lt=0;lt<Dt&&(Rt++,vt=vt.nextZ,!!vt);lt++);for(kt=Dt;Rt>0||kt>0&&vt;)Rt!==0&&(kt===0||!vt||dt.z<=vt.z)?(Tt=dt,dt=dt.nextZ,Rt--):(Tt=vt,vt=vt.nextZ,kt--),Et?Et.nextZ=Tt:ft=Tt,Tt.prevZ=Et,Et=Tt;dt=vt}Et.nextZ=null,Dt*=2}while(Ct>1);return ft}function zOrder(ft,lt,dt,vt,Tt){return ft=(ft-dt)*Tt|0,lt=(lt-vt)*Tt|0,ft=(ft|ft<<8)&16711935,ft=(ft|ft<<4)&252645135,ft=(ft|ft<<2)&858993459,ft=(ft|ft<<1)&1431655765,lt=(lt|lt<<8)&16711935,lt=(lt|lt<<4)&252645135,lt=(lt|lt<<2)&858993459,lt=(lt|lt<<1)&1431655765,ft|lt<<1}function getLeftmost(ft){let lt=ft,dt=ft;do(lt.x<dt.x||lt.x===dt.x&&lt.y<dt.y)&&(dt=lt),lt=lt.next;while(lt!==ft);return dt}function pointInTriangle(ft,lt,dt,vt,Tt,Et,Ct,Rt){return(Tt-Ct)*(lt-Rt)>=(ft-Ct)*(Et-Rt)&&(ft-Ct)*(vt-Rt)>=(dt-Ct)*(lt-Rt)&&(dt-Ct)*(Et-Rt)>=(Tt-Ct)*(vt-Rt)}function isValidDiagonal(ft,lt){return ft.next.i!==lt.i&&ft.prev.i!==lt.i&&!intersectsPolygon(ft,lt)&&(locallyInside(ft,lt)&&locallyInside(lt,ft)&&middleInside(ft,lt)&&(area(ft.prev,ft,lt.prev)||area(ft,lt.prev,lt))||equals(ft,lt)&&area(ft.prev,ft,ft.next)>0&&area(lt.prev,lt,lt.next)>0)}function area(ft,lt,dt){return(lt.y-ft.y)*(dt.x-lt.x)-(lt.x-ft.x)*(dt.y-lt.y)}function equals(ft,lt){return ft.x===lt.x&&ft.y===lt.y}function intersects(ft,lt,dt,vt){const Tt=sign(area(ft,lt,dt)),Et=sign(area(ft,lt,vt)),Ct=sign(area(dt,vt,ft)),Rt=sign(area(dt,vt,lt));return!!(Tt!==Et&&Ct!==Rt||Tt===0&&onSegment(ft,dt,lt)||Et===0&&onSegment(ft,vt,lt)||Ct===0&&onSegment(dt,ft,vt)||Rt===0&&onSegment(dt,lt,vt))}function onSegment(ft,lt,dt){return lt.x<=Math.max(ft.x,dt.x)&&lt.x>=Math.min(ft.x,dt.x)&&lt.y<=Math.max(ft.y,dt.y)&&lt.y>=Math.min(ft.y,dt.y)}function sign(ft){return ft>0?1:ft<0?-1:0}function intersectsPolygon(ft,lt){let dt=ft;do{if(dt.i!==ft.i&&dt.next.i!==ft.i&&dt.i!==lt.i&&dt.next.i!==lt.i&&intersects(dt,dt.next,ft,lt))return!0;dt=dt.next}while(dt!==ft);return!1}function locallyInside(ft,lt){return area(ft.prev,ft,ft.next)<0?area(ft,lt,ft.next)>=0&&area(ft,ft.prev,lt)>=0:area(ft,lt,ft.prev)<0||area(ft,ft.next,lt)<0}function middleInside(ft,lt){let dt=ft,vt=!1;const Tt=(ft.x+lt.x)/2,Et=(ft.y+lt.y)/2;do dt.y>Et!=dt.next.y>Et&&dt.next.y!==dt.y&&Tt<(dt.next.x-dt.x)*(Et-dt.y)/(dt.next.y-dt.y)+dt.x&&(vt=!vt),dt=dt.next;while(dt!==ft);return vt}function splitPolygon(ft,lt){const dt=new Node$1(ft.i,ft.x,ft.y),vt=new Node$1(lt.i,lt.x,lt.y),Tt=ft.next,Et=lt.prev;return ft.next=lt,lt.prev=ft,dt.next=Tt,Tt.prev=dt,vt.next=dt,dt.prev=vt,Et.next=vt,vt.prev=Et,vt}function insertNode(ft,lt,dt,vt){const Tt=new Node$1(ft,lt,dt);return vt?(Tt.next=vt.next,Tt.prev=vt,vt.next.prev=Tt,vt.next=Tt):(Tt.prev=Tt,Tt.next=Tt),Tt}function removeNode(ft){ft.next.prev=ft.prev,ft.prev.next=ft.next,ft.prevZ&&(ft.prevZ.nextZ=ft.nextZ),ft.nextZ&&(ft.nextZ.prevZ=ft.prevZ)}function Node$1(ft,lt,dt){this.i=ft,this.x=lt,this.y=dt,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(ft,lt,dt,vt){let Tt=0;for(let Et=lt,Ct=dt-vt;Et<dt;Et+=vt)Tt+=(ft[Ct]-ft[Et])*(ft[Et+1]+ft[Ct+1]),Ct=Et;return Tt}class ShapeUtils{static area(lt){const dt=lt.length;let vt=0;for(let Tt=dt-1,Et=0;Et<dt;Tt=Et++)vt+=lt[Tt].x*lt[Et].y-lt[Et].x*lt[Tt].y;return vt*.5}static isClockWise(lt){return ShapeUtils.area(lt)<0}static triangulateShape(lt,dt){const vt=[],Tt=[],Et=[];removeDupEndPts(lt),addContour(vt,lt);let Ct=lt.length;dt.forEach(removeDupEndPts);for(let kt=0;kt<dt.length;kt++)Tt.push(Ct),Ct+=dt[kt].length,addContour(vt,dt[kt]);const Rt=Earcut.triangulate(vt,Tt);for(let kt=0;kt<Rt.length;kt+=3)Et.push(Rt.slice(kt,kt+3));return Et}}function removeDupEndPts(ft){const lt=ft.length;lt>2&&ft[lt-1].equals(ft[0])&&ft.pop()}function addContour(ft,lt){for(let dt=0;dt<lt.length;dt++)ft.push(lt[dt].x),ft.push(lt[dt].y)}class ExtrudeGeometry extends BufferGeometry{constructor(lt=new Shape([new Vector2(.5,.5),new Vector2(-.5,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),dt={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:lt,options:dt},lt=Array.isArray(lt)?lt:[lt];const vt=this,Tt=[],Et=[];for(let Rt=0,kt=lt.length;Rt<kt;Rt++){const Dt=lt[Rt];Ct(Dt)}this.setAttribute("position",new Float32BufferAttribute(Tt,3)),this.setAttribute("uv",new Float32BufferAttribute(Et,2)),this.computeVertexNormals();function Ct(Rt){const kt=[],Dt=dt.curveSegments!==void 0?dt.curveSegments:12,Bt=dt.steps!==void 0?dt.steps:1,Ft=dt.depth!==void 0?dt.depth:1;let Ut=dt.bevelEnabled!==void 0?dt.bevelEnabled:!0,Zt=dt.bevelThickness!==void 0?dt.bevelThickness:.2,Kt=dt.bevelSize!==void 0?dt.bevelSize:Zt-.1,ln=dt.bevelOffset!==void 0?dt.bevelOffset:0,hn=dt.bevelSegments!==void 0?dt.bevelSegments:3;const dn=dt.extrudePath,pn=dt.UVGenerator!==void 0?dt.UVGenerator:WorldUVGenerator;let mn,On=!1,bn,En,An,Tn;dn&&(mn=dn.getSpacedPoints(Bt),On=!0,Ut=!1,bn=dn.computeFrenetFrames(Bt,!1),En=new Vector3,An=new Vector3,Tn=new Vector3),Ut||(hn=0,Zt=0,Kt=0,ln=0);const In=Rt.extractPoints(Dt);let Rn=In.shape;const Dn=In.holes;if(!ShapeUtils.isClockWise(Rn)){Rn=Rn.reverse();for(let Er=0,kr=Dn.length;Er<kr;Er++){const Qr=Dn[Er];ShapeUtils.isClockWise(Qr)&&(Dn[Er]=Qr.reverse())}}const Hn=ShapeUtils.triangulateShape(Rn,Dn),jn=Rn;for(let Er=0,kr=Dn.length;Er<kr;Er++){const Qr=Dn[Er];Rn=Rn.concat(Qr)}function Kn(Er,kr,Qr){return kr||console.error("THREE.ExtrudeGeometry: vec does not exist"),Er.clone().addScaledVector(kr,Qr)}const zn=Rn.length,lr=Hn.length;function Ln(Er,kr,Qr){let so,jr,no;const uo=Er.x-kr.x,ho=Er.y-kr.y,Po=Qr.x-Er.x,Wo=Qr.y-Er.y,Xn=uo*uo+ho*ho,Un=uo*Wo-ho*Po;if(Math.abs(Un)>Number.EPSILON){const rr=Math.sqrt(Xn),yr=Math.sqrt(Po*Po+Wo*Wo),Ir=kr.x-ho/rr,Fr=kr.y+uo/rr,pr=Qr.x-Wo/yr,Zr=Qr.y+Po/yr,Cr=((pr-Ir)*Wo-(Zr-Fr)*Po)/(uo*Wo-ho*Po);so=Ir+uo*Cr-Er.x,jr=Fr+ho*Cr-Er.y;const lo=so*so+jr*jr;if(lo<=2)return new Vector2(so,jr);no=Math.sqrt(lo/2)}else{let rr=!1;uo>Number.EPSILON?Po>Number.EPSILON&&(rr=!0):uo<-Number.EPSILON?Po<-Number.EPSILON&&(rr=!0):Math.sign(ho)===Math.sign(Wo)&&(rr=!0),rr?(so=-ho,jr=uo,no=Math.sqrt(Xn)):(so=uo,jr=ho,no=Math.sqrt(Xn/2))}return new Vector2(so/no,jr/no)}const Vn=[];for(let Er=0,kr=jn.length,Qr=kr-1,so=Er+1;Er<kr;Er++,Qr++,so++)Qr===kr&&(Qr=0),so===kr&&(so=0),Vn[Er]=Ln(jn[Er],jn[Qr],jn[so]);const Wn=[];let sr,Mn=Vn.concat();for(let Er=0,kr=Dn.length;Er<kr;Er++){const Qr=Dn[Er];sr=[];for(let so=0,jr=Qr.length,no=jr-1,uo=so+1;so<jr;so++,no++,uo++)no===jr&&(no=0),uo===jr&&(uo=0),sr[so]=Ln(Qr[so],Qr[no],Qr[uo]);Wn.push(sr),Mn=Mn.concat(sr)}for(let Er=0;Er<hn;Er++){const kr=Er/hn,Qr=Zt*Math.cos(kr*Math.PI/2),so=Kt*Math.sin(kr*Math.PI/2)+ln;for(let jr=0,no=jn.length;jr<no;jr++){const uo=Kn(jn[jr],Vn[jr],so);Sr(uo.x,uo.y,-Qr)}for(let jr=0,no=Dn.length;jr<no;jr++){const uo=Dn[jr];sr=Wn[jr];for(let ho=0,Po=uo.length;ho<Po;ho++){const Wo=Kn(uo[ho],sr[ho],so);Sr(Wo.x,Wo.y,-Qr)}}}const ir=Kt+ln;for(let Er=0;Er<zn;Er++){const kr=Ut?Kn(Rn[Er],Mn[Er],ir):Rn[Er];On?(An.copy(bn.normals[0]).multiplyScalar(kr.x),En.copy(bn.binormals[0]).multiplyScalar(kr.y),Tn.copy(mn[0]).add(An).add(En),Sr(Tn.x,Tn.y,Tn.z)):Sr(kr.x,kr.y,0)}for(let Er=1;Er<=Bt;Er++)for(let kr=0;kr<zn;kr++){const Qr=Ut?Kn(Rn[kr],Mn[kr],ir):Rn[kr];On?(An.copy(bn.normals[Er]).multiplyScalar(Qr.x),En.copy(bn.binormals[Er]).multiplyScalar(Qr.y),Tn.copy(mn[Er]).add(An).add(En),Sr(Tn.x,Tn.y,Tn.z)):Sr(Qr.x,Qr.y,Ft/Bt*Er)}for(let Er=hn-1;Er>=0;Er--){const kr=Er/hn,Qr=Zt*Math.cos(kr*Math.PI/2),so=Kt*Math.sin(kr*Math.PI/2)+ln;for(let jr=0,no=jn.length;jr<no;jr++){const uo=Kn(jn[jr],Vn[jr],so);Sr(uo.x,uo.y,Ft+Qr)}for(let jr=0,no=Dn.length;jr<no;jr++){const uo=Dn[jr];sr=Wn[jr];for(let ho=0,Po=uo.length;ho<Po;ho++){const Wo=Kn(uo[ho],sr[ho],so);On?Sr(Wo.x,Wo.y+mn[Bt-1].y,mn[Bt-1].x+Qr):Sr(Wo.x,Wo.y,Ft+Qr)}}}mr(),tr();function mr(){const Er=Tt.length/3;if(Ut){let kr=0,Qr=zn*kr;for(let so=0;so<lr;so++){const jr=Hn[so];Vr(jr[2]+Qr,jr[1]+Qr,jr[0]+Qr)}kr=Bt+hn*2,Qr=zn*kr;for(let so=0;so<lr;so++){const jr=Hn[so];Vr(jr[0]+Qr,jr[1]+Qr,jr[2]+Qr)}}else{for(let kr=0;kr<lr;kr++){const Qr=Hn[kr];Vr(Qr[2],Qr[1],Qr[0])}for(let kr=0;kr<lr;kr++){const Qr=Hn[kr];Vr(Qr[0]+zn*Bt,Qr[1]+zn*Bt,Qr[2]+zn*Bt)}}vt.addGroup(Er,Tt.length/3-Er,0)}function tr(){const Er=Tt.length/3;let kr=0;Dr(jn,kr),kr+=jn.length;for(let Qr=0,so=Dn.length;Qr<so;Qr++){const jr=Dn[Qr];Dr(jr,kr),kr+=jr.length}vt.addGroup(Er,Tt.length/3-Er,1)}function Dr(Er,kr){let Qr=Er.length;for(;--Qr>=0;){const so=Qr;let jr=Qr-1;jr<0&&(jr=Er.length-1);for(let no=0,uo=Bt+hn*2;no<uo;no++){const ho=zn*no,Po=zn*(no+1),Wo=kr+so+ho,Xn=kr+jr+ho,Un=kr+jr+Po,rr=kr+so+Po;Jr(Wo,Xn,Un,rr)}}}function Sr(Er,kr,Qr){kt.push(Er),kt.push(kr),kt.push(Qr)}function Vr(Er,kr,Qr){Yr(Er),Yr(kr),Yr(Qr);const so=Tt.length/3,jr=pn.generateTopUV(vt,Tt,so-3,so-2,so-1);_i(jr[0]),_i(jr[1]),_i(jr[2])}function Jr(Er,kr,Qr,so){Yr(Er),Yr(kr),Yr(so),Yr(kr),Yr(Qr),Yr(so);const jr=Tt.length/3,no=pn.generateSideWallUV(vt,Tt,jr-6,jr-3,jr-2,jr-1);_i(no[0]),_i(no[1]),_i(no[3]),_i(no[1]),_i(no[2]),_i(no[3])}function Yr(Er){Tt.push(kt[Er*3+0]),Tt.push(kt[Er*3+1]),Tt.push(kt[Er*3+2])}function _i(Er){Et.push(Er.x),Et.push(Er.y)}}}copy(lt){return super.copy(lt),this.parameters=Object.assign({},lt.parameters),this}toJSON(){const lt=super.toJSON(),dt=this.parameters.shapes,vt=this.parameters.options;return toJSON$1(dt,vt,lt)}static fromJSON(lt,dt){const vt=[];for(let Et=0,Ct=lt.shapes.length;Et<Ct;Et++){const Rt=dt[lt.shapes[Et]];vt.push(Rt)}const Tt=lt.options.extrudePath;return Tt!==void 0&&(lt.options.extrudePath=new Curves[Tt.type]().fromJSON(Tt)),new ExtrudeGeometry(vt,lt.options)}}const WorldUVGenerator={generateTopUV:function(ft,lt,dt,vt,Tt){const Et=lt[dt*3],Ct=lt[dt*3+1],Rt=lt[vt*3],kt=lt[vt*3+1],Dt=lt[Tt*3],Bt=lt[Tt*3+1];return[new Vector2(Et,Ct),new Vector2(Rt,kt),new Vector2(Dt,Bt)]},generateSideWallUV:function(ft,lt,dt,vt,Tt,Et){const Ct=lt[dt*3],Rt=lt[dt*3+1],kt=lt[dt*3+2],Dt=lt[vt*3],Bt=lt[vt*3+1],Ft=lt[vt*3+2],Ut=lt[Tt*3],Zt=lt[Tt*3+1],Kt=lt[Tt*3+2],ln=lt[Et*3],hn=lt[Et*3+1],dn=lt[Et*3+2];return Math.abs(Rt-Bt)<Math.abs(Ct-Dt)?[new Vector2(Ct,1-kt),new Vector2(Dt,1-Ft),new Vector2(Ut,1-Kt),new Vector2(ln,1-dn)]:[new Vector2(Rt,1-kt),new Vector2(Bt,1-Ft),new Vector2(Zt,1-Kt),new Vector2(hn,1-dn)]}};function toJSON$1(ft,lt,dt){if(dt.shapes=[],Array.isArray(ft))for(let vt=0,Tt=ft.length;vt<Tt;vt++){const Et=ft[vt];dt.shapes.push(Et.uuid)}else dt.shapes.push(ft.uuid);return dt.options=Object.assign({},lt),lt.extrudePath!==void 0&&(dt.options.extrudePath=lt.extrudePath.toJSON()),dt}class IcosahedronGeometry extends PolyhedronGeometry{constructor(lt=1,dt=0){const vt=(1+Math.sqrt(5))/2,Tt=[-1,vt,0,1,vt,0,-1,-vt,0,1,-vt,0,0,-1,vt,0,1,vt,0,-1,-vt,0,1,-vt,vt,0,-1,vt,0,1,-vt,0,-1,-vt,0,1],Et=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(Tt,Et,lt,dt),this.type="IcosahedronGeometry",this.parameters={radius:lt,detail:dt}}static fromJSON(lt){return new IcosahedronGeometry(lt.radius,lt.detail)}}class OctahedronGeometry extends PolyhedronGeometry{constructor(lt=1,dt=0){const vt=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],Tt=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(vt,Tt,lt,dt),this.type="OctahedronGeometry",this.parameters={radius:lt,detail:dt}}static fromJSON(lt){return new OctahedronGeometry(lt.radius,lt.detail)}}class RingGeometry extends BufferGeometry{constructor(lt=.5,dt=1,vt=32,Tt=1,Et=0,Ct=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:lt,outerRadius:dt,thetaSegments:vt,phiSegments:Tt,thetaStart:Et,thetaLength:Ct},vt=Math.max(3,vt),Tt=Math.max(1,Tt);const Rt=[],kt=[],Dt=[],Bt=[];let Ft=lt;const Ut=(dt-lt)/Tt,Zt=new Vector3,Kt=new Vector2;for(let ln=0;ln<=Tt;ln++){for(let hn=0;hn<=vt;hn++){const dn=Et+hn/vt*Ct;Zt.x=Ft*Math.cos(dn),Zt.y=Ft*Math.sin(dn),kt.push(Zt.x,Zt.y,Zt.z),Dt.push(0,0,1),Kt.x=(Zt.x/dt+1)/2,Kt.y=(Zt.y/dt+1)/2,Bt.push(Kt.x,Kt.y)}Ft+=Ut}for(let ln=0;ln<Tt;ln++){const hn=ln*(vt+1);for(let dn=0;dn<vt;dn++){const pn=dn+hn,mn=pn,On=pn+vt+1,bn=pn+vt+2,En=pn+1;Rt.push(mn,On,En),Rt.push(On,bn,En)}}this.setIndex(Rt),this.setAttribute("position",new Float32BufferAttribute(kt,3)),this.setAttribute("normal",new Float32BufferAttribute(Dt,3)),this.setAttribute("uv",new Float32BufferAttribute(Bt,2))}copy(lt){return super.copy(lt),this.parameters=Object.assign({},lt.parameters),this}static fromJSON(lt){return new RingGeometry(lt.innerRadius,lt.outerRadius,lt.thetaSegments,lt.phiSegments,lt.thetaStart,lt.thetaLength)}}class ShapeGeometry extends BufferGeometry{constructor(lt=new Shape([new Vector2(0,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),dt=12){super(),this.type="ShapeGeometry",this.parameters={shapes:lt,curveSegments:dt};const vt=[],Tt=[],Et=[],Ct=[];let Rt=0,kt=0;if(Array.isArray(lt)===!1)Dt(lt);else for(let Bt=0;Bt<lt.length;Bt++)Dt(lt[Bt]),this.addGroup(Rt,kt,Bt),Rt+=kt,kt=0;this.setIndex(vt),this.setAttribute("position",new Float32BufferAttribute(Tt,3)),this.setAttribute("normal",new Float32BufferAttribute(Et,3)),this.setAttribute("uv",new Float32BufferAttribute(Ct,2));function Dt(Bt){const Ft=Tt.length/3,Ut=Bt.extractPoints(dt);let Zt=Ut.shape;const Kt=Ut.holes;ShapeUtils.isClockWise(Zt)===!1&&(Zt=Zt.reverse());for(let hn=0,dn=Kt.length;hn<dn;hn++){const pn=Kt[hn];ShapeUtils.isClockWise(pn)===!0&&(Kt[hn]=pn.reverse())}const ln=ShapeUtils.triangulateShape(Zt,Kt);for(let hn=0,dn=Kt.length;hn<dn;hn++){const pn=Kt[hn];Zt=Zt.concat(pn)}for(let hn=0,dn=Zt.length;hn<dn;hn++){const pn=Zt[hn];Tt.push(pn.x,pn.y,0),Et.push(0,0,1),Ct.push(pn.x,pn.y)}for(let hn=0,dn=ln.length;hn<dn;hn++){const pn=ln[hn],mn=pn[0]+Ft,On=pn[1]+Ft,bn=pn[2]+Ft;vt.push(mn,On,bn),kt+=3}}}copy(lt){return super.copy(lt),this.parameters=Object.assign({},lt.parameters),this}toJSON(){const lt=super.toJSON(),dt=this.parameters.shapes;return toJSON(dt,lt)}static fromJSON(lt,dt){const vt=[];for(let Tt=0,Et=lt.shapes.length;Tt<Et;Tt++){const Ct=dt[lt.shapes[Tt]];vt.push(Ct)}return new ShapeGeometry(vt,lt.curveSegments)}}function toJSON(ft,lt){if(lt.shapes=[],Array.isArray(ft))for(let dt=0,vt=ft.length;dt<vt;dt++){const Tt=ft[dt];lt.shapes.push(Tt.uuid)}else lt.shapes.push(ft.uuid);return lt}class SphereGeometry extends BufferGeometry{constructor(lt=1,dt=32,vt=16,Tt=0,Et=Math.PI*2,Ct=0,Rt=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:lt,widthSegments:dt,heightSegments:vt,phiStart:Tt,phiLength:Et,thetaStart:Ct,thetaLength:Rt},dt=Math.max(3,Math.floor(dt)),vt=Math.max(2,Math.floor(vt));const kt=Math.min(Ct+Rt,Math.PI);let Dt=0;const Bt=[],Ft=new Vector3,Ut=new Vector3,Zt=[],Kt=[],ln=[],hn=[];for(let dn=0;dn<=vt;dn++){const pn=[],mn=dn/vt;let On=0;dn==0&&Ct==0?On=.5/dt:dn==vt&&kt==Math.PI&&(On=-.5/dt);for(let bn=0;bn<=dt;bn++){const En=bn/dt;Ft.x=-lt*Math.cos(Tt+En*Et)*Math.sin(Ct+mn*Rt),Ft.y=lt*Math.cos(Ct+mn*Rt),Ft.z=lt*Math.sin(Tt+En*Et)*Math.sin(Ct+mn*Rt),Kt.push(Ft.x,Ft.y,Ft.z),Ut.copy(Ft).normalize(),ln.push(Ut.x,Ut.y,Ut.z),hn.push(En+On,1-mn),pn.push(Dt++)}Bt.push(pn)}for(let dn=0;dn<vt;dn++)for(let pn=0;pn<dt;pn++){const mn=Bt[dn][pn+1],On=Bt[dn][pn],bn=Bt[dn+1][pn],En=Bt[dn+1][pn+1];(dn!==0||Ct>0)&&Zt.push(mn,On,En),(dn!==vt-1||kt<Math.PI)&&Zt.push(On,bn,En)}this.setIndex(Zt),this.setAttribute("position",new Float32BufferAttribute(Kt,3)),this.setAttribute("normal",new Float32BufferAttribute(ln,3)),this.setAttribute("uv",new Float32BufferAttribute(hn,2))}copy(lt){return super.copy(lt),this.parameters=Object.assign({},lt.parameters),this}static fromJSON(lt){return new SphereGeometry(lt.radius,lt.widthSegments,lt.heightSegments,lt.phiStart,lt.phiLength,lt.thetaStart,lt.thetaLength)}}class TetrahedronGeometry extends PolyhedronGeometry{constructor(lt=1,dt=0){const vt=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],Tt=[2,1,0,0,3,2,1,3,0,2,3,1];super(vt,Tt,lt,dt),this.type="TetrahedronGeometry",this.parameters={radius:lt,detail:dt}}static fromJSON(lt){return new TetrahedronGeometry(lt.radius,lt.detail)}}class TorusGeometry extends BufferGeometry{constructor(lt=1,dt=.4,vt=12,Tt=48,Et=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:lt,tube:dt,radialSegments:vt,tubularSegments:Tt,arc:Et},vt=Math.floor(vt),Tt=Math.floor(Tt);const Ct=[],Rt=[],kt=[],Dt=[],Bt=new Vector3,Ft=new Vector3,Ut=new Vector3;for(let Zt=0;Zt<=vt;Zt++)for(let Kt=0;Kt<=Tt;Kt++){const ln=Kt/Tt*Et,hn=Zt/vt*Math.PI*2;Ft.x=(lt+dt*Math.cos(hn))*Math.cos(ln),Ft.y=(lt+dt*Math.cos(hn))*Math.sin(ln),Ft.z=dt*Math.sin(hn),Rt.push(Ft.x,Ft.y,Ft.z),Bt.x=lt*Math.cos(ln),Bt.y=lt*Math.sin(ln),Ut.subVectors(Ft,Bt).normalize(),kt.push(Ut.x,Ut.y,Ut.z),Dt.push(Kt/Tt),Dt.push(Zt/vt)}for(let Zt=1;Zt<=vt;Zt++)for(let Kt=1;Kt<=Tt;Kt++){const ln=(Tt+1)*Zt+Kt-1,hn=(Tt+1)*(Zt-1)+Kt-1,dn=(Tt+1)*(Zt-1)+Kt,pn=(Tt+1)*Zt+Kt;Ct.push(ln,hn,pn),Ct.push(hn,dn,pn)}this.setIndex(Ct),this.setAttribute("position",new Float32BufferAttribute(Rt,3)),this.setAttribute("normal",new Float32BufferAttribute(kt,3)),this.setAttribute("uv",new Float32BufferAttribute(Dt,2))}copy(lt){return super.copy(lt),this.parameters=Object.assign({},lt.parameters),this}static fromJSON(lt){return new TorusGeometry(lt.radius,lt.tube,lt.radialSegments,lt.tubularSegments,lt.arc)}}class TorusKnotGeometry extends BufferGeometry{constructor(lt=1,dt=.4,vt=64,Tt=8,Et=2,Ct=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:lt,tube:dt,tubularSegments:vt,radialSegments:Tt,p:Et,q:Ct},vt=Math.floor(vt),Tt=Math.floor(Tt);const Rt=[],kt=[],Dt=[],Bt=[],Ft=new Vector3,Ut=new Vector3,Zt=new Vector3,Kt=new Vector3,ln=new Vector3,hn=new Vector3,dn=new Vector3;for(let mn=0;mn<=vt;++mn){const On=mn/vt*Et*Math.PI*2;pn(On,Et,Ct,lt,Zt),pn(On+.01,Et,Ct,lt,Kt),hn.subVectors(Kt,Zt),dn.addVectors(Kt,Zt),ln.crossVectors(hn,dn),dn.crossVectors(ln,hn),ln.normalize(),dn.normalize();for(let bn=0;bn<=Tt;++bn){const En=bn/Tt*Math.PI*2,An=-dt*Math.cos(En),Tn=dt*Math.sin(En);Ft.x=Zt.x+(An*dn.x+Tn*ln.x),Ft.y=Zt.y+(An*dn.y+Tn*ln.y),Ft.z=Zt.z+(An*dn.z+Tn*ln.z),kt.push(Ft.x,Ft.y,Ft.z),Ut.subVectors(Ft,Zt).normalize(),Dt.push(Ut.x,Ut.y,Ut.z),Bt.push(mn/vt),Bt.push(bn/Tt)}}for(let mn=1;mn<=vt;mn++)for(let On=1;On<=Tt;On++){const bn=(Tt+1)*(mn-1)+(On-1),En=(Tt+1)*mn+(On-1),An=(Tt+1)*mn+On,Tn=(Tt+1)*(mn-1)+On;Rt.push(bn,En,Tn),Rt.push(En,An,Tn)}this.setIndex(Rt),this.setAttribute("position",new Float32BufferAttribute(kt,3)),this.setAttribute("normal",new Float32BufferAttribute(Dt,3)),this.setAttribute("uv",new Float32BufferAttribute(Bt,2));function pn(mn,On,bn,En,An){const Tn=Math.cos(mn),In=Math.sin(mn),Rn=bn/On*mn,Dn=Math.cos(Rn);An.x=En*(2+Dn)*.5*Tn,An.y=En*(2+Dn)*In*.5,An.z=En*Math.sin(Rn)*.5}}copy(lt){return super.copy(lt),this.parameters=Object.assign({},lt.parameters),this}static fromJSON(lt){return new TorusKnotGeometry(lt.radius,lt.tube,lt.tubularSegments,lt.radialSegments,lt.p,lt.q)}}class TubeGeometry extends BufferGeometry{constructor(lt=new QuadraticBezierCurve3(new Vector3(-1,-1,0),new Vector3(-1,1,0),new Vector3(1,1,0)),dt=64,vt=1,Tt=8,Et=!1){super(),this.type="TubeGeometry",this.parameters={path:lt,tubularSegments:dt,radius:vt,radialSegments:Tt,closed:Et};const Ct=lt.computeFrenetFrames(dt,Et);this.tangents=Ct.tangents,this.normals=Ct.normals,this.binormals=Ct.binormals;const Rt=new Vector3,kt=new Vector3,Dt=new Vector2;let Bt=new Vector3;const Ft=[],Ut=[],Zt=[],Kt=[];ln(),this.setIndex(Kt),this.setAttribute("position",new Float32BufferAttribute(Ft,3)),this.setAttribute("normal",new Float32BufferAttribute(Ut,3)),this.setAttribute("uv",new Float32BufferAttribute(Zt,2));function ln(){for(let mn=0;mn<dt;mn++)hn(mn);hn(Et===!1?dt:0),pn(),dn()}function hn(mn){Bt=lt.getPointAt(mn/dt,Bt);const On=Ct.normals[mn],bn=Ct.binormals[mn];for(let En=0;En<=Tt;En++){const An=En/Tt*Math.PI*2,Tn=Math.sin(An),In=-Math.cos(An);kt.x=In*On.x+Tn*bn.x,kt.y=In*On.y+Tn*bn.y,kt.z=In*On.z+Tn*bn.z,kt.normalize(),Ut.push(kt.x,kt.y,kt.z),Rt.x=Bt.x+vt*kt.x,Rt.y=Bt.y+vt*kt.y,Rt.z=Bt.z+vt*kt.z,Ft.push(Rt.x,Rt.y,Rt.z)}}function dn(){for(let mn=1;mn<=dt;mn++)for(let On=1;On<=Tt;On++){const bn=(Tt+1)*(mn-1)+(On-1),En=(Tt+1)*mn+(On-1),An=(Tt+1)*mn+On,Tn=(Tt+1)*(mn-1)+On;Kt.push(bn,En,Tn),Kt.push(En,An,Tn)}}function pn(){for(let mn=0;mn<=dt;mn++)for(let On=0;On<=Tt;On++)Dt.x=mn/dt,Dt.y=On/Tt,Zt.push(Dt.x,Dt.y)}}copy(lt){return super.copy(lt),this.parameters=Object.assign({},lt.parameters),this}toJSON(){const lt=super.toJSON();return lt.path=this.parameters.path.toJSON(),lt}static fromJSON(lt){return new TubeGeometry(new Curves[lt.path.type]().fromJSON(lt.path),lt.tubularSegments,lt.radius,lt.radialSegments,lt.closed)}}class WireframeGeometry extends BufferGeometry{constructor(lt=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:lt},lt!==null){const dt=[],vt=new Set,Tt=new Vector3,Et=new Vector3;if(lt.index!==null){const Ct=lt.attributes.position,Rt=lt.index;let kt=lt.groups;kt.length===0&&(kt=[{start:0,count:Rt.count,materialIndex:0}]);for(let Dt=0,Bt=kt.length;Dt<Bt;++Dt){const Ft=kt[Dt],Ut=Ft.start,Zt=Ft.count;for(let Kt=Ut,ln=Ut+Zt;Kt<ln;Kt+=3)for(let hn=0;hn<3;hn++){const dn=Rt.getX(Kt+hn),pn=Rt.getX(Kt+(hn+1)%3);Tt.fromBufferAttribute(Ct,dn),Et.fromBufferAttribute(Ct,pn),isUniqueEdge(Tt,Et,vt)===!0&&(dt.push(Tt.x,Tt.y,Tt.z),dt.push(Et.x,Et.y,Et.z))}}}else{const Ct=lt.attributes.position;for(let Rt=0,kt=Ct.count/3;Rt<kt;Rt++)for(let Dt=0;Dt<3;Dt++){const Bt=3*Rt+Dt,Ft=3*Rt+(Dt+1)%3;Tt.fromBufferAttribute(Ct,Bt),Et.fromBufferAttribute(Ct,Ft),isUniqueEdge(Tt,Et,vt)===!0&&(dt.push(Tt.x,Tt.y,Tt.z),dt.push(Et.x,Et.y,Et.z))}}this.setAttribute("position",new Float32BufferAttribute(dt,3))}}copy(lt){return super.copy(lt),this.parameters=Object.assign({},lt.parameters),this}}function isUniqueEdge(ft,lt,dt){const vt=`${ft.x},${ft.y},${ft.z}-${lt.x},${lt.y},${lt.z}`,Tt=`${lt.x},${lt.y},${lt.z}-${ft.x},${ft.y},${ft.z}`;return dt.has(vt)===!0||dt.has(Tt)===!0?!1:(dt.add(vt),dt.add(Tt),!0)}var Geometries=Object.freeze({__proto__:null,BoxGeometry,CapsuleGeometry,CircleGeometry,ConeGeometry,CylinderGeometry,DodecahedronGeometry,EdgesGeometry,ExtrudeGeometry,IcosahedronGeometry,LatheGeometry,OctahedronGeometry,PlaneGeometry,PolyhedronGeometry,RingGeometry,ShapeGeometry,SphereGeometry,TetrahedronGeometry,TorusGeometry,TorusKnotGeometry,TubeGeometry,WireframeGeometry});class ShadowMaterial extends Material{constructor(lt){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Color(0),this.transparent=!0,this.fog=!0,this.setValues(lt)}copy(lt){return super.copy(lt),this.color.copy(lt.color),this.fog=lt.fog,this}}class RawShaderMaterial extends ShaderMaterial{constructor(lt){super(lt),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class MeshStandardMaterial extends Material{constructor(lt){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(lt)}copy(lt){return super.copy(lt),this.defines={STANDARD:""},this.color.copy(lt.color),this.roughness=lt.roughness,this.metalness=lt.metalness,this.map=lt.map,this.lightMap=lt.lightMap,this.lightMapIntensity=lt.lightMapIntensity,this.aoMap=lt.aoMap,this.aoMapIntensity=lt.aoMapIntensity,this.emissive.copy(lt.emissive),this.emissiveMap=lt.emissiveMap,this.emissiveIntensity=lt.emissiveIntensity,this.bumpMap=lt.bumpMap,this.bumpScale=lt.bumpScale,this.normalMap=lt.normalMap,this.normalMapType=lt.normalMapType,this.normalScale.copy(lt.normalScale),this.displacementMap=lt.displacementMap,this.displacementScale=lt.displacementScale,this.displacementBias=lt.displacementBias,this.roughnessMap=lt.roughnessMap,this.metalnessMap=lt.metalnessMap,this.alphaMap=lt.alphaMap,this.envMap=lt.envMap,this.envMapIntensity=lt.envMapIntensity,this.wireframe=lt.wireframe,this.wireframeLinewidth=lt.wireframeLinewidth,this.wireframeLinecap=lt.wireframeLinecap,this.wireframeLinejoin=lt.wireframeLinejoin,this.flatShading=lt.flatShading,this.fog=lt.fog,this}}class MeshPhysicalMaterial extends MeshStandardMaterial{constructor(lt){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return clamp$1(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(dt){this.ior=(1+.4*dt)/(1-.4*dt)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Color(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Color(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Color(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(lt)}get sheen(){return this._sheen}set sheen(lt){this._sheen>0!=lt>0&&this.version++,this._sheen=lt}get clearcoat(){return this._clearcoat}set clearcoat(lt){this._clearcoat>0!=lt>0&&this.version++,this._clearcoat=lt}get iridescence(){return this._iridescence}set iridescence(lt){this._iridescence>0!=lt>0&&this.version++,this._iridescence=lt}get transmission(){return this._transmission}set transmission(lt){this._transmission>0!=lt>0&&this.version++,this._transmission=lt}copy(lt){return super.copy(lt),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=lt.clearcoat,this.clearcoatMap=lt.clearcoatMap,this.clearcoatRoughness=lt.clearcoatRoughness,this.clearcoatRoughnessMap=lt.clearcoatRoughnessMap,this.clearcoatNormalMap=lt.clearcoatNormalMap,this.clearcoatNormalScale.copy(lt.clearcoatNormalScale),this.ior=lt.ior,this.iridescence=lt.iridescence,this.iridescenceMap=lt.iridescenceMap,this.iridescenceIOR=lt.iridescenceIOR,this.iridescenceThicknessRange=[...lt.iridescenceThicknessRange],this.iridescenceThicknessMap=lt.iridescenceThicknessMap,this.sheen=lt.sheen,this.sheenColor.copy(lt.sheenColor),this.sheenColorMap=lt.sheenColorMap,this.sheenRoughness=lt.sheenRoughness,this.sheenRoughnessMap=lt.sheenRoughnessMap,this.transmission=lt.transmission,this.transmissionMap=lt.transmissionMap,this.thickness=lt.thickness,this.thicknessMap=lt.thicknessMap,this.attenuationDistance=lt.attenuationDistance,this.attenuationColor.copy(lt.attenuationColor),this.specularIntensity=lt.specularIntensity,this.specularIntensityMap=lt.specularIntensityMap,this.specularColor.copy(lt.specularColor),this.specularColorMap=lt.specularColorMap,this}}class MeshPhongMaterial extends Material{constructor(lt){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(lt)}copy(lt){return super.copy(lt),this.color.copy(lt.color),this.specular.copy(lt.specular),this.shininess=lt.shininess,this.map=lt.map,this.lightMap=lt.lightMap,this.lightMapIntensity=lt.lightMapIntensity,this.aoMap=lt.aoMap,this.aoMapIntensity=lt.aoMapIntensity,this.emissive.copy(lt.emissive),this.emissiveMap=lt.emissiveMap,this.emissiveIntensity=lt.emissiveIntensity,this.bumpMap=lt.bumpMap,this.bumpScale=lt.bumpScale,this.normalMap=lt.normalMap,this.normalMapType=lt.normalMapType,this.normalScale.copy(lt.normalScale),this.displacementMap=lt.displacementMap,this.displacementScale=lt.displacementScale,this.displacementBias=lt.displacementBias,this.specularMap=lt.specularMap,this.alphaMap=lt.alphaMap,this.envMap=lt.envMap,this.combine=lt.combine,this.reflectivity=lt.reflectivity,this.refractionRatio=lt.refractionRatio,this.wireframe=lt.wireframe,this.wireframeLinewidth=lt.wireframeLinewidth,this.wireframeLinecap=lt.wireframeLinecap,this.wireframeLinejoin=lt.wireframeLinejoin,this.flatShading=lt.flatShading,this.fog=lt.fog,this}}class MeshToonMaterial extends Material{constructor(lt){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(lt)}copy(lt){return super.copy(lt),this.color.copy(lt.color),this.map=lt.map,this.gradientMap=lt.gradientMap,this.lightMap=lt.lightMap,this.lightMapIntensity=lt.lightMapIntensity,this.aoMap=lt.aoMap,this.aoMapIntensity=lt.aoMapIntensity,this.emissive.copy(lt.emissive),this.emissiveMap=lt.emissiveMap,this.emissiveIntensity=lt.emissiveIntensity,this.bumpMap=lt.bumpMap,this.bumpScale=lt.bumpScale,this.normalMap=lt.normalMap,this.normalMapType=lt.normalMapType,this.normalScale.copy(lt.normalScale),this.displacementMap=lt.displacementMap,this.displacementScale=lt.displacementScale,this.displacementBias=lt.displacementBias,this.alphaMap=lt.alphaMap,this.wireframe=lt.wireframe,this.wireframeLinewidth=lt.wireframeLinewidth,this.wireframeLinecap=lt.wireframeLinecap,this.wireframeLinejoin=lt.wireframeLinejoin,this.fog=lt.fog,this}}class MeshNormalMaterial extends Material{constructor(lt){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(lt)}copy(lt){return super.copy(lt),this.bumpMap=lt.bumpMap,this.bumpScale=lt.bumpScale,this.normalMap=lt.normalMap,this.normalMapType=lt.normalMapType,this.normalScale.copy(lt.normalScale),this.displacementMap=lt.displacementMap,this.displacementScale=lt.displacementScale,this.displacementBias=lt.displacementBias,this.wireframe=lt.wireframe,this.wireframeLinewidth=lt.wireframeLinewidth,this.flatShading=lt.flatShading,this}}class MeshLambertMaterial extends Material{constructor(lt){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(lt)}copy(lt){return super.copy(lt),this.color.copy(lt.color),this.map=lt.map,this.lightMap=lt.lightMap,this.lightMapIntensity=lt.lightMapIntensity,this.aoMap=lt.aoMap,this.aoMapIntensity=lt.aoMapIntensity,this.emissive.copy(lt.emissive),this.emissiveMap=lt.emissiveMap,this.emissiveIntensity=lt.emissiveIntensity,this.bumpMap=lt.bumpMap,this.bumpScale=lt.bumpScale,this.normalMap=lt.normalMap,this.normalMapType=lt.normalMapType,this.normalScale.copy(lt.normalScale),this.displacementMap=lt.displacementMap,this.displacementScale=lt.displacementScale,this.displacementBias=lt.displacementBias,this.specularMap=lt.specularMap,this.alphaMap=lt.alphaMap,this.envMap=lt.envMap,this.combine=lt.combine,this.reflectivity=lt.reflectivity,this.refractionRatio=lt.refractionRatio,this.wireframe=lt.wireframe,this.wireframeLinewidth=lt.wireframeLinewidth,this.wireframeLinecap=lt.wireframeLinecap,this.wireframeLinejoin=lt.wireframeLinejoin,this.flatShading=lt.flatShading,this.fog=lt.fog,this}}class MeshMatcapMaterial extends Material{constructor(lt){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(lt)}copy(lt){return super.copy(lt),this.defines={MATCAP:""},this.color.copy(lt.color),this.matcap=lt.matcap,this.map=lt.map,this.bumpMap=lt.bumpMap,this.bumpScale=lt.bumpScale,this.normalMap=lt.normalMap,this.normalMapType=lt.normalMapType,this.normalScale.copy(lt.normalScale),this.displacementMap=lt.displacementMap,this.displacementScale=lt.displacementScale,this.displacementBias=lt.displacementBias,this.alphaMap=lt.alphaMap,this.flatShading=lt.flatShading,this.fog=lt.fog,this}}class LineDashedMaterial extends LineBasicMaterial{constructor(lt){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(lt)}copy(lt){return super.copy(lt),this.scale=lt.scale,this.dashSize=lt.dashSize,this.gapSize=lt.gapSize,this}}function arraySlice(ft,lt,dt){return isTypedArray(ft)?new ft.constructor(ft.subarray(lt,dt!==void 0?dt:ft.length)):ft.slice(lt,dt)}function convertArray(ft,lt,dt){return!ft||!dt&&ft.constructor===lt?ft:typeof lt.BYTES_PER_ELEMENT=="number"?new lt(ft):Array.prototype.slice.call(ft)}function isTypedArray(ft){return ArrayBuffer.isView(ft)&&!(ft instanceof DataView)}function getKeyframeOrder(ft){function lt(Tt,Et){return ft[Tt]-ft[Et]}const dt=ft.length,vt=new Array(dt);for(let Tt=0;Tt!==dt;++Tt)vt[Tt]=Tt;return vt.sort(lt),vt}function sortedArray(ft,lt,dt){const vt=ft.length,Tt=new ft.constructor(vt);for(let Et=0,Ct=0;Ct!==vt;++Et){const Rt=dt[Et]*lt;for(let kt=0;kt!==lt;++kt)Tt[Ct++]=ft[Rt+kt]}return Tt}function flattenJSON(ft,lt,dt,vt){let Tt=1,Et=ft[0];for(;Et!==void 0&&Et[vt]===void 0;)Et=ft[Tt++];if(Et===void 0)return;let Ct=Et[vt];if(Ct!==void 0)if(Array.isArray(Ct))do Ct=Et[vt],Ct!==void 0&&(lt.push(Et.time),dt.push.apply(dt,Ct)),Et=ft[Tt++];while(Et!==void 0);else if(Ct.toArray!==void 0)do Ct=Et[vt],Ct!==void 0&&(lt.push(Et.time),Ct.toArray(dt,dt.length)),Et=ft[Tt++];while(Et!==void 0);else do Ct=Et[vt],Ct!==void 0&&(lt.push(Et.time),dt.push(Ct)),Et=ft[Tt++];while(Et!==void 0)}function subclip(ft,lt,dt,vt,Tt=30){const Et=ft.clone();Et.name=lt;const Ct=[];for(let kt=0;kt<Et.tracks.length;++kt){const Dt=Et.tracks[kt],Bt=Dt.getValueSize(),Ft=[],Ut=[];for(let Zt=0;Zt<Dt.times.length;++Zt){const Kt=Dt.times[Zt]*Tt;if(!(Kt<dt||Kt>=vt)){Ft.push(Dt.times[Zt]);for(let ln=0;ln<Bt;++ln)Ut.push(Dt.values[Zt*Bt+ln])}}Ft.length!==0&&(Dt.times=convertArray(Ft,Dt.times.constructor),Dt.values=convertArray(Ut,Dt.values.constructor),Ct.push(Dt))}Et.tracks=Ct;let Rt=1/0;for(let kt=0;kt<Et.tracks.length;++kt)Rt>Et.tracks[kt].times[0]&&(Rt=Et.tracks[kt].times[0]);for(let kt=0;kt<Et.tracks.length;++kt)Et.tracks[kt].shift(-1*Rt);return Et.resetDuration(),Et}function makeClipAdditive(ft,lt=0,dt=ft,vt=30){vt<=0&&(vt=30);const Tt=dt.tracks.length,Et=lt/vt;for(let Ct=0;Ct<Tt;++Ct){const Rt=dt.tracks[Ct],kt=Rt.ValueTypeName;if(kt==="bool"||kt==="string")continue;const Dt=ft.tracks.find(function(dn){return dn.name===Rt.name&&dn.ValueTypeName===kt});if(Dt===void 0)continue;let Bt=0;const Ft=Rt.getValueSize();Rt.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(Bt=Ft/3);let Ut=0;const Zt=Dt.getValueSize();Dt.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(Ut=Zt/3);const Kt=Rt.times.length-1;let ln;if(Et<=Rt.times[0]){const dn=Bt,pn=Ft-Bt;ln=arraySlice(Rt.values,dn,pn)}else if(Et>=Rt.times[Kt]){const dn=Kt*Ft+Bt,pn=dn+Ft-Bt;ln=arraySlice(Rt.values,dn,pn)}else{const dn=Rt.createInterpolant(),pn=Bt,mn=Ft-Bt;dn.evaluate(Et),ln=arraySlice(dn.resultBuffer,pn,mn)}kt==="quaternion"&&new Quaternion().fromArray(ln).normalize().conjugate().toArray(ln);const hn=Dt.times.length;for(let dn=0;dn<hn;++dn){const pn=dn*Zt+Ut;if(kt==="quaternion")Quaternion.multiplyQuaternionsFlat(Dt.values,pn,ln,0,Dt.values,pn);else{const mn=Zt-Ut*2;for(let On=0;On<mn;++On)Dt.values[pn+On]-=ln[On]}}}return ft.blendMode=AdditiveAnimationBlendMode,ft}const AnimationUtils={arraySlice,convertArray,isTypedArray,getKeyframeOrder,sortedArray,flattenJSON,subclip,makeClipAdditive};class Interpolant{constructor(lt,dt,vt,Tt){this.parameterPositions=lt,this._cachedIndex=0,this.resultBuffer=Tt!==void 0?Tt:new dt.constructor(vt),this.sampleValues=dt,this.valueSize=vt,this.settings=null,this.DefaultSettings_={}}evaluate(lt){const dt=this.parameterPositions;let vt=this._cachedIndex,Tt=dt[vt],Et=dt[vt-1];e:{t:{let Ct;n:{r:if(!(lt<Tt)){for(let Rt=vt+2;;){if(Tt===void 0){if(lt<Et)break r;return vt=dt.length,this._cachedIndex=vt,this.copySampleValue_(vt-1)}if(vt===Rt)break;if(Et=Tt,Tt=dt[++vt],lt<Tt)break t}Ct=dt.length;break n}if(!(lt>=Et)){const Rt=dt[1];lt<Rt&&(vt=2,Et=Rt);for(let kt=vt-2;;){if(Et===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(vt===kt)break;if(Tt=Et,Et=dt[--vt-1],lt>=Et)break t}Ct=vt,vt=0;break n}break e}for(;vt<Ct;){const Rt=vt+Ct>>>1;lt<dt[Rt]?Ct=Rt:vt=Rt+1}if(Tt=dt[vt],Et=dt[vt-1],Et===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(Tt===void 0)return vt=dt.length,this._cachedIndex=vt,this.copySampleValue_(vt-1)}this._cachedIndex=vt,this.intervalChanged_(vt,Et,Tt)}return this.interpolate_(vt,Et,lt,Tt)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(lt){const dt=this.resultBuffer,vt=this.sampleValues,Tt=this.valueSize,Et=lt*Tt;for(let Ct=0;Ct!==Tt;++Ct)dt[Ct]=vt[Et+Ct];return dt}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class CubicInterpolant extends Interpolant{constructor(lt,dt,vt,Tt){super(lt,dt,vt,Tt),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding}}intervalChanged_(lt,dt,vt){const Tt=this.parameterPositions;let Et=lt-2,Ct=lt+1,Rt=Tt[Et],kt=Tt[Ct];if(Rt===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:Et=lt,Rt=2*dt-vt;break;case WrapAroundEnding:Et=Tt.length-2,Rt=dt+Tt[Et]-Tt[Et+1];break;default:Et=lt,Rt=vt}if(kt===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:Ct=lt,kt=2*vt-dt;break;case WrapAroundEnding:Ct=1,kt=vt+Tt[1]-Tt[0];break;default:Ct=lt-1,kt=dt}const Dt=(vt-dt)*.5,Bt=this.valueSize;this._weightPrev=Dt/(dt-Rt),this._weightNext=Dt/(kt-vt),this._offsetPrev=Et*Bt,this._offsetNext=Ct*Bt}interpolate_(lt,dt,vt,Tt){const Et=this.resultBuffer,Ct=this.sampleValues,Rt=this.valueSize,kt=lt*Rt,Dt=kt-Rt,Bt=this._offsetPrev,Ft=this._offsetNext,Ut=this._weightPrev,Zt=this._weightNext,Kt=(vt-dt)/(Tt-dt),ln=Kt*Kt,hn=ln*Kt,dn=-Ut*hn+2*Ut*ln-Ut*Kt,pn=(1+Ut)*hn+(-1.5-2*Ut)*ln+(-.5+Ut)*Kt+1,mn=(-1-Zt)*hn+(1.5+Zt)*ln+.5*Kt,On=Zt*hn-Zt*ln;for(let bn=0;bn!==Rt;++bn)Et[bn]=dn*Ct[Bt+bn]+pn*Ct[Dt+bn]+mn*Ct[kt+bn]+On*Ct[Ft+bn];return Et}}class LinearInterpolant extends Interpolant{constructor(lt,dt,vt,Tt){super(lt,dt,vt,Tt)}interpolate_(lt,dt,vt,Tt){const Et=this.resultBuffer,Ct=this.sampleValues,Rt=this.valueSize,kt=lt*Rt,Dt=kt-Rt,Bt=(vt-dt)/(Tt-dt),Ft=1-Bt;for(let Ut=0;Ut!==Rt;++Ut)Et[Ut]=Ct[Dt+Ut]*Ft+Ct[kt+Ut]*Bt;return Et}}class DiscreteInterpolant extends Interpolant{constructor(lt,dt,vt,Tt){super(lt,dt,vt,Tt)}interpolate_(lt){return this.copySampleValue_(lt-1)}}class KeyframeTrack{constructor(lt,dt,vt,Tt){if(lt===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(dt===void 0||dt.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+lt);this.name=lt,this.times=convertArray(dt,this.TimeBufferType),this.values=convertArray(vt,this.ValueBufferType),this.setInterpolation(Tt||this.DefaultInterpolation)}static toJSON(lt){const dt=lt.constructor;let vt;if(dt.toJSON!==this.toJSON)vt=dt.toJSON(lt);else{vt={name:lt.name,times:convertArray(lt.times,Array),values:convertArray(lt.values,Array)};const Tt=lt.getInterpolation();Tt!==lt.DefaultInterpolation&&(vt.interpolation=Tt)}return vt.type=lt.ValueTypeName,vt}InterpolantFactoryMethodDiscrete(lt){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),lt)}InterpolantFactoryMethodLinear(lt){return new LinearInterpolant(this.times,this.values,this.getValueSize(),lt)}InterpolantFactoryMethodSmooth(lt){return new CubicInterpolant(this.times,this.values,this.getValueSize(),lt)}setInterpolation(lt){let dt;switch(lt){case InterpolateDiscrete:dt=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:dt=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:dt=this.InterpolantFactoryMethodSmooth;break}if(dt===void 0){const vt="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(lt!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(vt);return console.warn("THREE.KeyframeTrack:",vt),this}return this.createInterpolant=dt,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}}getValueSize(){return this.values.length/this.times.length}shift(lt){if(lt!==0){const dt=this.times;for(let vt=0,Tt=dt.length;vt!==Tt;++vt)dt[vt]+=lt}return this}scale(lt){if(lt!==1){const dt=this.times;for(let vt=0,Tt=dt.length;vt!==Tt;++vt)dt[vt]*=lt}return this}trim(lt,dt){const vt=this.times,Tt=vt.length;let Et=0,Ct=Tt-1;for(;Et!==Tt&&vt[Et]<lt;)++Et;for(;Ct!==-1&&vt[Ct]>dt;)--Ct;if(++Ct,Et!==0||Ct!==Tt){Et>=Ct&&(Ct=Math.max(Ct,1),Et=Ct-1);const Rt=this.getValueSize();this.times=arraySlice(vt,Et,Ct),this.values=arraySlice(this.values,Et*Rt,Ct*Rt)}return this}validate(){let lt=!0;const dt=this.getValueSize();dt-Math.floor(dt)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),lt=!1);const vt=this.times,Tt=this.values,Et=vt.length;Et===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),lt=!1);let Ct=null;for(let Rt=0;Rt!==Et;Rt++){const kt=vt[Rt];if(typeof kt=="number"&&isNaN(kt)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,Rt,kt),lt=!1;break}if(Ct!==null&&Ct>kt){console.error("THREE.KeyframeTrack: Out of order keys.",this,Rt,kt,Ct),lt=!1;break}Ct=kt}if(Tt!==void 0&&isTypedArray(Tt))for(let Rt=0,kt=Tt.length;Rt!==kt;++Rt){const Dt=Tt[Rt];if(isNaN(Dt)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,Rt,Dt),lt=!1;break}}return lt}optimize(){const lt=arraySlice(this.times),dt=arraySlice(this.values),vt=this.getValueSize(),Tt=this.getInterpolation()===InterpolateSmooth,Et=lt.length-1;let Ct=1;for(let Rt=1;Rt<Et;++Rt){let kt=!1;const Dt=lt[Rt],Bt=lt[Rt+1];if(Dt!==Bt&&(Rt!==1||Dt!==lt[0]))if(Tt)kt=!0;else{const Ft=Rt*vt,Ut=Ft-vt,Zt=Ft+vt;for(let Kt=0;Kt!==vt;++Kt){const ln=dt[Ft+Kt];if(ln!==dt[Ut+Kt]||ln!==dt[Zt+Kt]){kt=!0;break}}}if(kt){if(Rt!==Ct){lt[Ct]=lt[Rt];const Ft=Rt*vt,Ut=Ct*vt;for(let Zt=0;Zt!==vt;++Zt)dt[Ut+Zt]=dt[Ft+Zt]}++Ct}}if(Et>0){lt[Ct]=lt[Et];for(let Rt=Et*vt,kt=Ct*vt,Dt=0;Dt!==vt;++Dt)dt[kt+Dt]=dt[Rt+Dt];++Ct}return Ct!==lt.length?(this.times=arraySlice(lt,0,Ct),this.values=arraySlice(dt,0,Ct*vt)):(this.times=lt,this.values=dt),this}clone(){const lt=arraySlice(this.times,0),dt=arraySlice(this.values,0),vt=this.constructor,Tt=new vt(this.name,lt,dt);return Tt.createInterpolant=this.createInterpolant,Tt}}KeyframeTrack.prototype.TimeBufferType=Float32Array;KeyframeTrack.prototype.ValueBufferType=Float32Array;KeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear;class BooleanKeyframeTrack extends KeyframeTrack{}BooleanKeyframeTrack.prototype.ValueTypeName="bool";BooleanKeyframeTrack.prototype.ValueBufferType=Array;BooleanKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class ColorKeyframeTrack extends KeyframeTrack{}ColorKeyframeTrack.prototype.ValueTypeName="color";class NumberKeyframeTrack extends KeyframeTrack{}NumberKeyframeTrack.prototype.ValueTypeName="number";class QuaternionLinearInterpolant extends Interpolant{constructor(lt,dt,vt,Tt){super(lt,dt,vt,Tt)}interpolate_(lt,dt,vt,Tt){const Et=this.resultBuffer,Ct=this.sampleValues,Rt=this.valueSize,kt=(vt-dt)/(Tt-dt);let Dt=lt*Rt;for(let Bt=Dt+Rt;Dt!==Bt;Dt+=4)Quaternion.slerpFlat(Et,0,Ct,Dt-Rt,Ct,Dt,kt);return Et}}class QuaternionKeyframeTrack extends KeyframeTrack{InterpolantFactoryMethodLinear(lt){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),lt)}}QuaternionKeyframeTrack.prototype.ValueTypeName="quaternion";QuaternionKeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear;QuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class StringKeyframeTrack extends KeyframeTrack{}StringKeyframeTrack.prototype.ValueTypeName="string";StringKeyframeTrack.prototype.ValueBufferType=Array;StringKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;StringKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;StringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class VectorKeyframeTrack extends KeyframeTrack{}VectorKeyframeTrack.prototype.ValueTypeName="vector";class AnimationClip{constructor(lt,dt=-1,vt,Tt=NormalAnimationBlendMode){this.name=lt,this.tracks=vt,this.duration=dt,this.blendMode=Tt,this.uuid=generateUUID(),this.duration<0&&this.resetDuration()}static parse(lt){const dt=[],vt=lt.tracks,Tt=1/(lt.fps||1);for(let Ct=0,Rt=vt.length;Ct!==Rt;++Ct)dt.push(parseKeyframeTrack(vt[Ct]).scale(Tt));const Et=new this(lt.name,lt.duration,dt,lt.blendMode);return Et.uuid=lt.uuid,Et}static toJSON(lt){const dt=[],vt=lt.tracks,Tt={name:lt.name,duration:lt.duration,tracks:dt,uuid:lt.uuid,blendMode:lt.blendMode};for(let Et=0,Ct=vt.length;Et!==Ct;++Et)dt.push(KeyframeTrack.toJSON(vt[Et]));return Tt}static CreateFromMorphTargetSequence(lt,dt,vt,Tt){const Et=dt.length,Ct=[];for(let Rt=0;Rt<Et;Rt++){let kt=[],Dt=[];kt.push((Rt+Et-1)%Et,Rt,(Rt+1)%Et),Dt.push(0,1,0);const Bt=getKeyframeOrder(kt);kt=sortedArray(kt,1,Bt),Dt=sortedArray(Dt,1,Bt),!Tt&&kt[0]===0&&(kt.push(Et),Dt.push(Dt[0])),Ct.push(new NumberKeyframeTrack(".morphTargetInfluences["+dt[Rt].name+"]",kt,Dt).scale(1/vt))}return new this(lt,-1,Ct)}static findByName(lt,dt){let vt=lt;if(!Array.isArray(lt)){const Tt=lt;vt=Tt.geometry&&Tt.geometry.animations||Tt.animations}for(let Tt=0;Tt<vt.length;Tt++)if(vt[Tt].name===dt)return vt[Tt];return null}static CreateClipsFromMorphTargetSequences(lt,dt,vt){const Tt={},Et=/^([\w-]*?)([\d]+)$/;for(let Rt=0,kt=lt.length;Rt<kt;Rt++){const Dt=lt[Rt],Bt=Dt.name.match(Et);if(Bt&&Bt.length>1){const Ft=Bt[1];let Ut=Tt[Ft];Ut||(Tt[Ft]=Ut=[]),Ut.push(Dt)}}const Ct=[];for(const Rt in Tt)Ct.push(this.CreateFromMorphTargetSequence(Rt,Tt[Rt],dt,vt));return Ct}static parseAnimation(lt,dt){if(!lt)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const vt=function(Ft,Ut,Zt,Kt,ln){if(Zt.length!==0){const hn=[],dn=[];flattenJSON(Zt,hn,dn,Kt),hn.length!==0&&ln.push(new Ft(Ut,hn,dn))}},Tt=[],Et=lt.name||"default",Ct=lt.fps||30,Rt=lt.blendMode;let kt=lt.length||-1;const Dt=lt.hierarchy||[];for(let Ft=0;Ft<Dt.length;Ft++){const Ut=Dt[Ft].keys;if(!(!Ut||Ut.length===0))if(Ut[0].morphTargets){const Zt={};let Kt;for(Kt=0;Kt<Ut.length;Kt++)if(Ut[Kt].morphTargets)for(let ln=0;ln<Ut[Kt].morphTargets.length;ln++)Zt[Ut[Kt].morphTargets[ln]]=-1;for(const ln in Zt){const hn=[],dn=[];for(let pn=0;pn!==Ut[Kt].morphTargets.length;++pn){const mn=Ut[Kt];hn.push(mn.time),dn.push(mn.morphTarget===ln?1:0)}Tt.push(new NumberKeyframeTrack(".morphTargetInfluence["+ln+"]",hn,dn))}kt=Zt.length*Ct}else{const Zt=".bones["+dt[Ft].name+"]";vt(VectorKeyframeTrack,Zt+".position",Ut,"pos",Tt),vt(QuaternionKeyframeTrack,Zt+".quaternion",Ut,"rot",Tt),vt(VectorKeyframeTrack,Zt+".scale",Ut,"scl",Tt)}}return Tt.length===0?null:new this(Et,kt,Tt,Rt)}resetDuration(){const lt=this.tracks;let dt=0;for(let vt=0,Tt=lt.length;vt!==Tt;++vt){const Et=this.tracks[vt];dt=Math.max(dt,Et.times[Et.times.length-1])}return this.duration=dt,this}trim(){for(let lt=0;lt<this.tracks.length;lt++)this.tracks[lt].trim(0,this.duration);return this}validate(){let lt=!0;for(let dt=0;dt<this.tracks.length;dt++)lt=lt&&this.tracks[dt].validate();return lt}optimize(){for(let lt=0;lt<this.tracks.length;lt++)this.tracks[lt].optimize();return this}clone(){const lt=[];for(let dt=0;dt<this.tracks.length;dt++)lt.push(this.tracks[dt].clone());return new this.constructor(this.name,this.duration,lt,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function getTrackTypeForValueTypeName(ft){switch(ft.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+ft)}function parseKeyframeTrack(ft){if(ft.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const lt=getTrackTypeForValueTypeName(ft.type);if(ft.times===void 0){const dt=[],vt=[];flattenJSON(ft.keys,dt,vt,"value"),ft.times=dt,ft.values=vt}return lt.parse!==void 0?lt.parse(ft):new lt(ft.name,ft.times,ft.values,ft.interpolation)}const Cache={enabled:!1,files:{},add:function(ft,lt){this.enabled!==!1&&(this.files[ft]=lt)},get:function(ft){if(this.enabled!==!1)return this.files[ft]},remove:function(ft){delete this.files[ft]},clear:function(){this.files={}}};class LoadingManager{constructor(lt,dt,vt){const Tt=this;let Et=!1,Ct=0,Rt=0,kt;const Dt=[];this.onStart=void 0,this.onLoad=lt,this.onProgress=dt,this.onError=vt,this.itemStart=function(Bt){Rt++,Et===!1&&Tt.onStart!==void 0&&Tt.onStart(Bt,Ct,Rt),Et=!0},this.itemEnd=function(Bt){Ct++,Tt.onProgress!==void 0&&Tt.onProgress(Bt,Ct,Rt),Ct===Rt&&(Et=!1,Tt.onLoad!==void 0&&Tt.onLoad())},this.itemError=function(Bt){Tt.onError!==void 0&&Tt.onError(Bt)},this.resolveURL=function(Bt){return kt?kt(Bt):Bt},this.setURLModifier=function(Bt){return kt=Bt,this},this.addHandler=function(Bt,Ft){return Dt.push(Bt,Ft),this},this.removeHandler=function(Bt){const Ft=Dt.indexOf(Bt);return Ft!==-1&&Dt.splice(Ft,2),this},this.getHandler=function(Bt){for(let Ft=0,Ut=Dt.length;Ft<Ut;Ft+=2){const Zt=Dt[Ft],Kt=Dt[Ft+1];if(Zt.global&&(Zt.lastIndex=0),Zt.test(Bt))return Kt}return null}}}const DefaultLoadingManager=new LoadingManager;class Loader{constructor(lt){this.manager=lt!==void 0?lt:DefaultLoadingManager,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(lt,dt){const vt=this;return new Promise(function(Tt,Et){vt.load(lt,Tt,dt,Et)})}parse(){}setCrossOrigin(lt){return this.crossOrigin=lt,this}setWithCredentials(lt){return this.withCredentials=lt,this}setPath(lt){return this.path=lt,this}setResourcePath(lt){return this.resourcePath=lt,this}setRequestHeader(lt){return this.requestHeader=lt,this}}const loading={};class HttpError extends Error{constructor(lt,dt){super(lt),this.response=dt}}class FileLoader extends Loader{constructor(lt){super(lt)}load(lt,dt,vt,Tt){lt===void 0&&(lt=""),this.path!==void 0&&(lt=this.path+lt),lt=this.manager.resolveURL(lt);const Et=Cache.get(lt);if(Et!==void 0)return this.manager.itemStart(lt),setTimeout(()=>{dt&&dt(Et),this.manager.itemEnd(lt)},0),Et;if(loading[lt]!==void 0){loading[lt].push({onLoad:dt,onProgress:vt,onError:Tt});return}loading[lt]=[],loading[lt].push({onLoad:dt,onProgress:vt,onError:Tt});const Ct=new Request(lt,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),Rt=this.mimeType,kt=this.responseType;fetch(Ct).then(Dt=>{if(Dt.status===200||Dt.status===0){if(Dt.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||Dt.body===void 0||Dt.body.getReader===void 0)return Dt;const Bt=loading[lt],Ft=Dt.body.getReader(),Ut=Dt.headers.get("Content-Length")||Dt.headers.get("X-File-Size"),Zt=Ut?parseInt(Ut):0,Kt=Zt!==0;let ln=0;const hn=new ReadableStream({start(dn){pn();function pn(){Ft.read().then(({done:mn,value:On})=>{if(mn)dn.close();else{ln+=On.byteLength;const bn=new ProgressEvent("progress",{lengthComputable:Kt,loaded:ln,total:Zt});for(let En=0,An=Bt.length;En<An;En++){const Tn=Bt[En];Tn.onProgress&&Tn.onProgress(bn)}dn.enqueue(On),pn()}})}}});return new Response(hn)}else throw new HttpError(`fetch for "${Dt.url}" responded with ${Dt.status}: ${Dt.statusText}`,Dt)}).then(Dt=>{switch(kt){case"arraybuffer":return Dt.arrayBuffer();case"blob":return Dt.blob();case"document":return Dt.text().then(Bt=>new DOMParser().parseFromString(Bt,Rt));case"json":return Dt.json();default:if(Rt===void 0)return Dt.text();{const Ft=/charset="?([^;"\s]*)"?/i.exec(Rt),Ut=Ft&&Ft[1]?Ft[1].toLowerCase():void 0,Zt=new TextDecoder(Ut);return Dt.arrayBuffer().then(Kt=>Zt.decode(Kt))}}}).then(Dt=>{Cache.add(lt,Dt);const Bt=loading[lt];delete loading[lt];for(let Ft=0,Ut=Bt.length;Ft<Ut;Ft++){const Zt=Bt[Ft];Zt.onLoad&&Zt.onLoad(Dt)}}).catch(Dt=>{const Bt=loading[lt];if(Bt===void 0)throw this.manager.itemError(lt),Dt;delete loading[lt];for(let Ft=0,Ut=Bt.length;Ft<Ut;Ft++){const Zt=Bt[Ft];Zt.onError&&Zt.onError(Dt)}this.manager.itemError(lt)}).finally(()=>{this.manager.itemEnd(lt)}),this.manager.itemStart(lt)}setResponseType(lt){return this.responseType=lt,this}setMimeType(lt){return this.mimeType=lt,this}}class AnimationLoader extends Loader{constructor(lt){super(lt)}load(lt,dt,vt,Tt){const Et=this,Ct=new FileLoader(this.manager);Ct.setPath(this.path),Ct.setRequestHeader(this.requestHeader),Ct.setWithCredentials(this.withCredentials),Ct.load(lt,function(Rt){try{dt(Et.parse(JSON.parse(Rt)))}catch(kt){Tt?Tt(kt):console.error(kt),Et.manager.itemError(lt)}},vt,Tt)}parse(lt){const dt=[];for(let vt=0;vt<lt.length;vt++){const Tt=AnimationClip.parse(lt[vt]);dt.push(Tt)}return dt}}class CompressedTextureLoader extends Loader{constructor(lt){super(lt)}load(lt,dt,vt,Tt){const Et=this,Ct=[],Rt=new CompressedTexture,kt=new FileLoader(this.manager);kt.setPath(this.path),kt.setResponseType("arraybuffer"),kt.setRequestHeader(this.requestHeader),kt.setWithCredentials(Et.withCredentials);let Dt=0;function Bt(Ft){kt.load(lt[Ft],function(Ut){const Zt=Et.parse(Ut,!0);Ct[Ft]={width:Zt.width,height:Zt.height,format:Zt.format,mipmaps:Zt.mipmaps},Dt+=1,Dt===6&&(Zt.mipmapCount===1&&(Rt.minFilter=LinearFilter),Rt.image=Ct,Rt.format=Zt.format,Rt.needsUpdate=!0,dt&&dt(Rt))},vt,Tt)}if(Array.isArray(lt))for(let Ft=0,Ut=lt.length;Ft<Ut;++Ft)Bt(Ft);else kt.load(lt,function(Ft){const Ut=Et.parse(Ft,!0);if(Ut.isCubemap){const Zt=Ut.mipmaps.length/Ut.mipmapCount;for(let Kt=0;Kt<Zt;Kt++){Ct[Kt]={mipmaps:[]};for(let ln=0;ln<Ut.mipmapCount;ln++)Ct[Kt].mipmaps.push(Ut.mipmaps[Kt*Ut.mipmapCount+ln]),Ct[Kt].format=Ut.format,Ct[Kt].width=Ut.width,Ct[Kt].height=Ut.height}Rt.image=Ct}else Rt.image.width=Ut.width,Rt.image.height=Ut.height,Rt.mipmaps=Ut.mipmaps;Ut.mipmapCount===1&&(Rt.minFilter=LinearFilter),Rt.format=Ut.format,Rt.needsUpdate=!0,dt&&dt(Rt)},vt,Tt);return Rt}}class ImageLoader extends Loader{constructor(lt){super(lt)}load(lt,dt,vt,Tt){this.path!==void 0&&(lt=this.path+lt),lt=this.manager.resolveURL(lt);const Et=this,Ct=Cache.get(lt);if(Ct!==void 0)return Et.manager.itemStart(lt),setTimeout(function(){dt&&dt(Ct),Et.manager.itemEnd(lt)},0),Ct;const Rt=createElementNS$1("img");function kt(){Bt(),Cache.add(lt,this),dt&&dt(this),Et.manager.itemEnd(lt)}function Dt(Ft){Bt(),Tt&&Tt(Ft),Et.manager.itemError(lt),Et.manager.itemEnd(lt)}function Bt(){Rt.removeEventListener("load",kt,!1),Rt.removeEventListener("error",Dt,!1)}return Rt.addEventListener("load",kt,!1),Rt.addEventListener("error",Dt,!1),lt.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(Rt.crossOrigin=this.crossOrigin),Et.manager.itemStart(lt),Rt.src=lt,Rt}}class CubeTextureLoader extends Loader{constructor(lt){super(lt)}load(lt,dt,vt,Tt){const Et=new CubeTexture,Ct=new ImageLoader(this.manager);Ct.setCrossOrigin(this.crossOrigin),Ct.setPath(this.path);let Rt=0;function kt(Dt){Ct.load(lt[Dt],function(Bt){Et.images[Dt]=Bt,Rt++,Rt===6&&(Et.needsUpdate=!0,dt&&dt(Et))},void 0,Tt)}for(let Dt=0;Dt<lt.length;++Dt)kt(Dt);return Et}}class DataTextureLoader extends Loader{constructor(lt){super(lt)}load(lt,dt,vt,Tt){const Et=this,Ct=new DataTexture,Rt=new FileLoader(this.manager);return Rt.setResponseType("arraybuffer"),Rt.setRequestHeader(this.requestHeader),Rt.setPath(this.path),Rt.setWithCredentials(Et.withCredentials),Rt.load(lt,function(kt){const Dt=Et.parse(kt);Dt&&(Dt.image!==void 0?Ct.image=Dt.image:Dt.data!==void 0&&(Ct.image.width=Dt.width,Ct.image.height=Dt.height,Ct.image.data=Dt.data),Ct.wrapS=Dt.wrapS!==void 0?Dt.wrapS:ClampToEdgeWrapping,Ct.wrapT=Dt.wrapT!==void 0?Dt.wrapT:ClampToEdgeWrapping,Ct.magFilter=Dt.magFilter!==void 0?Dt.magFilter:LinearFilter,Ct.minFilter=Dt.minFilter!==void 0?Dt.minFilter:LinearFilter,Ct.anisotropy=Dt.anisotropy!==void 0?Dt.anisotropy:1,Dt.encoding!==void 0&&(Ct.encoding=Dt.encoding),Dt.flipY!==void 0&&(Ct.flipY=Dt.flipY),Dt.format!==void 0&&(Ct.format=Dt.format),Dt.type!==void 0&&(Ct.type=Dt.type),Dt.mipmaps!==void 0&&(Ct.mipmaps=Dt.mipmaps,Ct.minFilter=LinearMipmapLinearFilter),Dt.mipmapCount===1&&(Ct.minFilter=LinearFilter),Dt.generateMipmaps!==void 0&&(Ct.generateMipmaps=Dt.generateMipmaps),Ct.needsUpdate=!0,dt&&dt(Ct,Dt))},vt,Tt),Ct}}class TextureLoader extends Loader{constructor(lt){super(lt)}load(lt,dt,vt,Tt){const Et=new Texture,Ct=new ImageLoader(this.manager);return Ct.setCrossOrigin(this.crossOrigin),Ct.setPath(this.path),Ct.load(lt,function(Rt){Et.image=Rt,Et.needsUpdate=!0,dt!==void 0&&dt(Et)},vt,Tt),Et}}class Light extends Object3D{constructor(lt,dt=1){super(),this.isLight=!0,this.type="Light",this.color=new Color(lt),this.intensity=dt}dispose(){}copy(lt,dt){return super.copy(lt,dt),this.color.copy(lt.color),this.intensity=lt.intensity,this}toJSON(lt){const dt=super.toJSON(lt);return dt.object.color=this.color.getHex(),dt.object.intensity=this.intensity,this.groundColor!==void 0&&(dt.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(dt.object.distance=this.distance),this.angle!==void 0&&(dt.object.angle=this.angle),this.decay!==void 0&&(dt.object.decay=this.decay),this.penumbra!==void 0&&(dt.object.penumbra=this.penumbra),this.shadow!==void 0&&(dt.object.shadow=this.shadow.toJSON()),dt}}class HemisphereLight extends Light{constructor(lt,dt,vt){super(lt,vt),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Color(dt)}copy(lt,dt){return super.copy(lt,dt),this.groundColor.copy(lt.groundColor),this}}const _projScreenMatrix$1=new Matrix4,_lightPositionWorld$1=new Vector3,_lookTarget$1=new Vector3;class LightShadow{constructor(lt){this.camera=lt,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(lt){const dt=this.camera,vt=this.matrix;_lightPositionWorld$1.setFromMatrixPosition(lt.matrixWorld),dt.position.copy(_lightPositionWorld$1),_lookTarget$1.setFromMatrixPosition(lt.target.matrixWorld),dt.lookAt(_lookTarget$1),dt.updateMatrixWorld(),_projScreenMatrix$1.multiplyMatrices(dt.projectionMatrix,dt.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix$1),vt.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),vt.multiply(_projScreenMatrix$1)}getViewport(lt){return this._viewports[lt]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(lt){return this.camera=lt.camera.clone(),this.bias=lt.bias,this.radius=lt.radius,this.mapSize.copy(lt.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const lt={};return this.bias!==0&&(lt.bias=this.bias),this.normalBias!==0&&(lt.normalBias=this.normalBias),this.radius!==1&&(lt.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(lt.mapSize=this.mapSize.toArray()),lt.camera=this.camera.toJSON(!1).object,delete lt.camera.matrix,lt}}class SpotLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(lt){const dt=this.camera,vt=RAD2DEG*2*lt.angle*this.focus,Tt=this.mapSize.width/this.mapSize.height,Et=lt.distance||dt.far;(vt!==dt.fov||Tt!==dt.aspect||Et!==dt.far)&&(dt.fov=vt,dt.aspect=Tt,dt.far=Et,dt.updateProjectionMatrix()),super.updateMatrices(lt)}copy(lt){return super.copy(lt),this.focus=lt.focus,this}}class SpotLight extends Light{constructor(lt,dt,vt=0,Tt=Math.PI/3,Et=0,Ct=2){super(lt,dt),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.distance=vt,this.angle=Tt,this.penumbra=Et,this.decay=Ct,this.map=null,this.shadow=new SpotLightShadow}get power(){return this.intensity*Math.PI}set power(lt){this.intensity=lt/Math.PI}dispose(){this.shadow.dispose()}copy(lt,dt){return super.copy(lt,dt),this.distance=lt.distance,this.angle=lt.angle,this.penumbra=lt.penumbra,this.decay=lt.decay,this.target=lt.target.clone(),this.shadow=lt.shadow.clone(),this}}const _projScreenMatrix=new Matrix4,_lightPositionWorld=new Vector3,_lookTarget=new Vector3;class PointLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}updateMatrices(lt,dt=0){const vt=this.camera,Tt=this.matrix,Et=lt.distance||vt.far;Et!==vt.far&&(vt.far=Et,vt.updateProjectionMatrix()),_lightPositionWorld.setFromMatrixPosition(lt.matrixWorld),vt.position.copy(_lightPositionWorld),_lookTarget.copy(vt.position),_lookTarget.add(this._cubeDirections[dt]),vt.up.copy(this._cubeUps[dt]),vt.lookAt(_lookTarget),vt.updateMatrixWorld(),Tt.makeTranslation(-_lightPositionWorld.x,-_lightPositionWorld.y,-_lightPositionWorld.z),_projScreenMatrix.multiplyMatrices(vt.projectionMatrix,vt.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix)}}class PointLight extends Light{constructor(lt,dt,vt=0,Tt=2){super(lt,dt),this.isPointLight=!0,this.type="PointLight",this.distance=vt,this.decay=Tt,this.shadow=new PointLightShadow}get power(){return this.intensity*4*Math.PI}set power(lt){this.intensity=lt/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(lt,dt){return super.copy(lt,dt),this.distance=lt.distance,this.decay=lt.decay,this.shadow=lt.shadow.clone(),this}}class DirectionalLightShadow extends LightShadow{constructor(){super(new OrthographicCamera$1(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class DirectionalLight extends Light{constructor(lt,dt){super(lt,dt),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}dispose(){this.shadow.dispose()}copy(lt){return super.copy(lt),this.target=lt.target.clone(),this.shadow=lt.shadow.clone(),this}}class AmbientLight extends Light{constructor(lt,dt){super(lt,dt),this.isAmbientLight=!0,this.type="AmbientLight"}}class RectAreaLight extends Light{constructor(lt,dt,vt=10,Tt=10){super(lt,dt),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=vt,this.height=Tt}get power(){return this.intensity*this.width*this.height*Math.PI}set power(lt){this.intensity=lt/(this.width*this.height*Math.PI)}copy(lt){return super.copy(lt),this.width=lt.width,this.height=lt.height,this}toJSON(lt){const dt=super.toJSON(lt);return dt.object.width=this.width,dt.object.height=this.height,dt}}class SphericalHarmonics3{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let lt=0;lt<9;lt++)this.coefficients.push(new Vector3)}set(lt){for(let dt=0;dt<9;dt++)this.coefficients[dt].copy(lt[dt]);return this}zero(){for(let lt=0;lt<9;lt++)this.coefficients[lt].set(0,0,0);return this}getAt(lt,dt){const vt=lt.x,Tt=lt.y,Et=lt.z,Ct=this.coefficients;return dt.copy(Ct[0]).multiplyScalar(.282095),dt.addScaledVector(Ct[1],.488603*Tt),dt.addScaledVector(Ct[2],.488603*Et),dt.addScaledVector(Ct[3],.488603*vt),dt.addScaledVector(Ct[4],1.092548*(vt*Tt)),dt.addScaledVector(Ct[5],1.092548*(Tt*Et)),dt.addScaledVector(Ct[6],.315392*(3*Et*Et-1)),dt.addScaledVector(Ct[7],1.092548*(vt*Et)),dt.addScaledVector(Ct[8],.546274*(vt*vt-Tt*Tt)),dt}getIrradianceAt(lt,dt){const vt=lt.x,Tt=lt.y,Et=lt.z,Ct=this.coefficients;return dt.copy(Ct[0]).multiplyScalar(.886227),dt.addScaledVector(Ct[1],2*.511664*Tt),dt.addScaledVector(Ct[2],2*.511664*Et),dt.addScaledVector(Ct[3],2*.511664*vt),dt.addScaledVector(Ct[4],2*.429043*vt*Tt),dt.addScaledVector(Ct[5],2*.429043*Tt*Et),dt.addScaledVector(Ct[6],.743125*Et*Et-.247708),dt.addScaledVector(Ct[7],2*.429043*vt*Et),dt.addScaledVector(Ct[8],.429043*(vt*vt-Tt*Tt)),dt}add(lt){for(let dt=0;dt<9;dt++)this.coefficients[dt].add(lt.coefficients[dt]);return this}addScaledSH(lt,dt){for(let vt=0;vt<9;vt++)this.coefficients[vt].addScaledVector(lt.coefficients[vt],dt);return this}scale(lt){for(let dt=0;dt<9;dt++)this.coefficients[dt].multiplyScalar(lt);return this}lerp(lt,dt){for(let vt=0;vt<9;vt++)this.coefficients[vt].lerp(lt.coefficients[vt],dt);return this}equals(lt){for(let dt=0;dt<9;dt++)if(!this.coefficients[dt].equals(lt.coefficients[dt]))return!1;return!0}copy(lt){return this.set(lt.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(lt,dt=0){const vt=this.coefficients;for(let Tt=0;Tt<9;Tt++)vt[Tt].fromArray(lt,dt+Tt*3);return this}toArray(lt=[],dt=0){const vt=this.coefficients;for(let Tt=0;Tt<9;Tt++)vt[Tt].toArray(lt,dt+Tt*3);return lt}static getBasisAt(lt,dt){const vt=lt.x,Tt=lt.y,Et=lt.z;dt[0]=.282095,dt[1]=.488603*Tt,dt[2]=.488603*Et,dt[3]=.488603*vt,dt[4]=1.092548*vt*Tt,dt[5]=1.092548*Tt*Et,dt[6]=.315392*(3*Et*Et-1),dt[7]=1.092548*vt*Et,dt[8]=.546274*(vt*vt-Tt*Tt)}}class LightProbe extends Light{constructor(lt=new SphericalHarmonics3,dt=1){super(void 0,dt),this.isLightProbe=!0,this.sh=lt}copy(lt){return super.copy(lt),this.sh.copy(lt.sh),this}fromJSON(lt){return this.intensity=lt.intensity,this.sh.fromArray(lt.sh),this}toJSON(lt){const dt=super.toJSON(lt);return dt.object.sh=this.sh.toArray(),dt}}class MaterialLoader extends Loader{constructor(lt){super(lt),this.textures={}}load(lt,dt,vt,Tt){const Et=this,Ct=new FileLoader(Et.manager);Ct.setPath(Et.path),Ct.setRequestHeader(Et.requestHeader),Ct.setWithCredentials(Et.withCredentials),Ct.load(lt,function(Rt){try{dt(Et.parse(JSON.parse(Rt)))}catch(kt){Tt?Tt(kt):console.error(kt),Et.manager.itemError(lt)}},vt,Tt)}parse(lt){const dt=this.textures;function vt(Et){return dt[Et]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",Et),dt[Et]}const Tt=MaterialLoader.createMaterialFromType(lt.type);if(lt.uuid!==void 0&&(Tt.uuid=lt.uuid),lt.name!==void 0&&(Tt.name=lt.name),lt.color!==void 0&&Tt.color!==void 0&&Tt.color.setHex(lt.color),lt.roughness!==void 0&&(Tt.roughness=lt.roughness),lt.metalness!==void 0&&(Tt.metalness=lt.metalness),lt.sheen!==void 0&&(Tt.sheen=lt.sheen),lt.sheenColor!==void 0&&(Tt.sheenColor=new Color().setHex(lt.sheenColor)),lt.sheenRoughness!==void 0&&(Tt.sheenRoughness=lt.sheenRoughness),lt.emissive!==void 0&&Tt.emissive!==void 0&&Tt.emissive.setHex(lt.emissive),lt.specular!==void 0&&Tt.specular!==void 0&&Tt.specular.setHex(lt.specular),lt.specularIntensity!==void 0&&(Tt.specularIntensity=lt.specularIntensity),lt.specularColor!==void 0&&Tt.specularColor!==void 0&&Tt.specularColor.setHex(lt.specularColor),lt.shininess!==void 0&&(Tt.shininess=lt.shininess),lt.clearcoat!==void 0&&(Tt.clearcoat=lt.clearcoat),lt.clearcoatRoughness!==void 0&&(Tt.clearcoatRoughness=lt.clearcoatRoughness),lt.iridescence!==void 0&&(Tt.iridescence=lt.iridescence),lt.iridescenceIOR!==void 0&&(Tt.iridescenceIOR=lt.iridescenceIOR),lt.iridescenceThicknessRange!==void 0&&(Tt.iridescenceThicknessRange=lt.iridescenceThicknessRange),lt.transmission!==void 0&&(Tt.transmission=lt.transmission),lt.thickness!==void 0&&(Tt.thickness=lt.thickness),lt.attenuationDistance!==void 0&&(Tt.attenuationDistance=lt.attenuationDistance),lt.attenuationColor!==void 0&&Tt.attenuationColor!==void 0&&Tt.attenuationColor.setHex(lt.attenuationColor),lt.fog!==void 0&&(Tt.fog=lt.fog),lt.flatShading!==void 0&&(Tt.flatShading=lt.flatShading),lt.blending!==void 0&&(Tt.blending=lt.blending),lt.combine!==void 0&&(Tt.combine=lt.combine),lt.side!==void 0&&(Tt.side=lt.side),lt.shadowSide!==void 0&&(Tt.shadowSide=lt.shadowSide),lt.opacity!==void 0&&(Tt.opacity=lt.opacity),lt.transparent!==void 0&&(Tt.transparent=lt.transparent),lt.alphaTest!==void 0&&(Tt.alphaTest=lt.alphaTest),lt.depthTest!==void 0&&(Tt.depthTest=lt.depthTest),lt.depthWrite!==void 0&&(Tt.depthWrite=lt.depthWrite),lt.colorWrite!==void 0&&(Tt.colorWrite=lt.colorWrite),lt.stencilWrite!==void 0&&(Tt.stencilWrite=lt.stencilWrite),lt.stencilWriteMask!==void 0&&(Tt.stencilWriteMask=lt.stencilWriteMask),lt.stencilFunc!==void 0&&(Tt.stencilFunc=lt.stencilFunc),lt.stencilRef!==void 0&&(Tt.stencilRef=lt.stencilRef),lt.stencilFuncMask!==void 0&&(Tt.stencilFuncMask=lt.stencilFuncMask),lt.stencilFail!==void 0&&(Tt.stencilFail=lt.stencilFail),lt.stencilZFail!==void 0&&(Tt.stencilZFail=lt.stencilZFail),lt.stencilZPass!==void 0&&(Tt.stencilZPass=lt.stencilZPass),lt.wireframe!==void 0&&(Tt.wireframe=lt.wireframe),lt.wireframeLinewidth!==void 0&&(Tt.wireframeLinewidth=lt.wireframeLinewidth),lt.wireframeLinecap!==void 0&&(Tt.wireframeLinecap=lt.wireframeLinecap),lt.wireframeLinejoin!==void 0&&(Tt.wireframeLinejoin=lt.wireframeLinejoin),lt.rotation!==void 0&&(Tt.rotation=lt.rotation),lt.linewidth!==1&&(Tt.linewidth=lt.linewidth),lt.dashSize!==void 0&&(Tt.dashSize=lt.dashSize),lt.gapSize!==void 0&&(Tt.gapSize=lt.gapSize),lt.scale!==void 0&&(Tt.scale=lt.scale),lt.polygonOffset!==void 0&&(Tt.polygonOffset=lt.polygonOffset),lt.polygonOffsetFactor!==void 0&&(Tt.polygonOffsetFactor=lt.polygonOffsetFactor),lt.polygonOffsetUnits!==void 0&&(Tt.polygonOffsetUnits=lt.polygonOffsetUnits),lt.dithering!==void 0&&(Tt.dithering=lt.dithering),lt.alphaToCoverage!==void 0&&(Tt.alphaToCoverage=lt.alphaToCoverage),lt.premultipliedAlpha!==void 0&&(Tt.premultipliedAlpha=lt.premultipliedAlpha),lt.forceSinglePass!==void 0&&(Tt.forceSinglePass=lt.forceSinglePass),lt.visible!==void 0&&(Tt.visible=lt.visible),lt.toneMapped!==void 0&&(Tt.toneMapped=lt.toneMapped),lt.userData!==void 0&&(Tt.userData=lt.userData),lt.vertexColors!==void 0&&(typeof lt.vertexColors=="number"?Tt.vertexColors=lt.vertexColors>0:Tt.vertexColors=lt.vertexColors),lt.uniforms!==void 0)for(const Et in lt.uniforms){const Ct=lt.uniforms[Et];switch(Tt.uniforms[Et]={},Ct.type){case"t":Tt.uniforms[Et].value=vt(Ct.value);break;case"c":Tt.uniforms[Et].value=new Color().setHex(Ct.value);break;case"v2":Tt.uniforms[Et].value=new Vector2().fromArray(Ct.value);break;case"v3":Tt.uniforms[Et].value=new Vector3().fromArray(Ct.value);break;case"v4":Tt.uniforms[Et].value=new Vector4().fromArray(Ct.value);break;case"m3":Tt.uniforms[Et].value=new Matrix3().fromArray(Ct.value);break;case"m4":Tt.uniforms[Et].value=new Matrix4().fromArray(Ct.value);break;default:Tt.uniforms[Et].value=Ct.value}}if(lt.defines!==void 0&&(Tt.defines=lt.defines),lt.vertexShader!==void 0&&(Tt.vertexShader=lt.vertexShader),lt.fragmentShader!==void 0&&(Tt.fragmentShader=lt.fragmentShader),lt.glslVersion!==void 0&&(Tt.glslVersion=lt.glslVersion),lt.extensions!==void 0)for(const Et in lt.extensions)Tt.extensions[Et]=lt.extensions[Et];if(lt.size!==void 0&&(Tt.size=lt.size),lt.sizeAttenuation!==void 0&&(Tt.sizeAttenuation=lt.sizeAttenuation),lt.map!==void 0&&(Tt.map=vt(lt.map)),lt.matcap!==void 0&&(Tt.matcap=vt(lt.matcap)),lt.alphaMap!==void 0&&(Tt.alphaMap=vt(lt.alphaMap)),lt.bumpMap!==void 0&&(Tt.bumpMap=vt(lt.bumpMap)),lt.bumpScale!==void 0&&(Tt.bumpScale=lt.bumpScale),lt.normalMap!==void 0&&(Tt.normalMap=vt(lt.normalMap)),lt.normalMapType!==void 0&&(Tt.normalMapType=lt.normalMapType),lt.normalScale!==void 0){let Et=lt.normalScale;Array.isArray(Et)===!1&&(Et=[Et,Et]),Tt.normalScale=new Vector2().fromArray(Et)}return lt.displacementMap!==void 0&&(Tt.displacementMap=vt(lt.displacementMap)),lt.displacementScale!==void 0&&(Tt.displacementScale=lt.displacementScale),lt.displacementBias!==void 0&&(Tt.displacementBias=lt.displacementBias),lt.roughnessMap!==void 0&&(Tt.roughnessMap=vt(lt.roughnessMap)),lt.metalnessMap!==void 0&&(Tt.metalnessMap=vt(lt.metalnessMap)),lt.emissiveMap!==void 0&&(Tt.emissiveMap=vt(lt.emissiveMap)),lt.emissiveIntensity!==void 0&&(Tt.emissiveIntensity=lt.emissiveIntensity),lt.specularMap!==void 0&&(Tt.specularMap=vt(lt.specularMap)),lt.specularIntensityMap!==void 0&&(Tt.specularIntensityMap=vt(lt.specularIntensityMap)),lt.specularColorMap!==void 0&&(Tt.specularColorMap=vt(lt.specularColorMap)),lt.envMap!==void 0&&(Tt.envMap=vt(lt.envMap)),lt.envMapIntensity!==void 0&&(Tt.envMapIntensity=lt.envMapIntensity),lt.reflectivity!==void 0&&(Tt.reflectivity=lt.reflectivity),lt.refractionRatio!==void 0&&(Tt.refractionRatio=lt.refractionRatio),lt.lightMap!==void 0&&(Tt.lightMap=vt(lt.lightMap)),lt.lightMapIntensity!==void 0&&(Tt.lightMapIntensity=lt.lightMapIntensity),lt.aoMap!==void 0&&(Tt.aoMap=vt(lt.aoMap)),lt.aoMapIntensity!==void 0&&(Tt.aoMapIntensity=lt.aoMapIntensity),lt.gradientMap!==void 0&&(Tt.gradientMap=vt(lt.gradientMap)),lt.clearcoatMap!==void 0&&(Tt.clearcoatMap=vt(lt.clearcoatMap)),lt.clearcoatRoughnessMap!==void 0&&(Tt.clearcoatRoughnessMap=vt(lt.clearcoatRoughnessMap)),lt.clearcoatNormalMap!==void 0&&(Tt.clearcoatNormalMap=vt(lt.clearcoatNormalMap)),lt.clearcoatNormalScale!==void 0&&(Tt.clearcoatNormalScale=new Vector2().fromArray(lt.clearcoatNormalScale)),lt.iridescenceMap!==void 0&&(Tt.iridescenceMap=vt(lt.iridescenceMap)),lt.iridescenceThicknessMap!==void 0&&(Tt.iridescenceThicknessMap=vt(lt.iridescenceThicknessMap)),lt.transmissionMap!==void 0&&(Tt.transmissionMap=vt(lt.transmissionMap)),lt.thicknessMap!==void 0&&(Tt.thicknessMap=vt(lt.thicknessMap)),lt.sheenColorMap!==void 0&&(Tt.sheenColorMap=vt(lt.sheenColorMap)),lt.sheenRoughnessMap!==void 0&&(Tt.sheenRoughnessMap=vt(lt.sheenRoughnessMap)),Tt}setTextures(lt){return this.textures=lt,this}static createMaterialFromType(lt){const dt={ShadowMaterial,SpriteMaterial,RawShaderMaterial,ShaderMaterial,PointsMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshPhongMaterial,MeshToonMaterial,MeshNormalMaterial,MeshLambertMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshBasicMaterial,MeshMatcapMaterial,LineDashedMaterial,LineBasicMaterial,Material};return new dt[lt]}}class LoaderUtils{static decodeText(lt){if(typeof TextDecoder<"u")return new TextDecoder().decode(lt);let dt="";for(let vt=0,Tt=lt.length;vt<Tt;vt++)dt+=String.fromCharCode(lt[vt]);try{return decodeURIComponent(escape(dt))}catch{return dt}}static extractUrlBase(lt){const dt=lt.lastIndexOf("/");return dt===-1?"./":lt.slice(0,dt+1)}static resolveURL(lt,dt){return typeof lt!="string"||lt===""?"":(/^https?:\/\//i.test(dt)&&/^\//.test(lt)&&(dt=dt.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(lt)||/^data:.*,.*$/i.test(lt)||/^blob:.*$/i.test(lt)?lt:dt+lt)}}class InstancedBufferGeometry extends BufferGeometry{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(lt){return super.copy(lt),this.instanceCount=lt.instanceCount,this}toJSON(){const lt=super.toJSON();return lt.instanceCount=this.instanceCount,lt.isInstancedBufferGeometry=!0,lt}}class BufferGeometryLoader extends Loader{constructor(lt){super(lt)}load(lt,dt,vt,Tt){const Et=this,Ct=new FileLoader(Et.manager);Ct.setPath(Et.path),Ct.setRequestHeader(Et.requestHeader),Ct.setWithCredentials(Et.withCredentials),Ct.load(lt,function(Rt){try{dt(Et.parse(JSON.parse(Rt)))}catch(kt){Tt?Tt(kt):console.error(kt),Et.manager.itemError(lt)}},vt,Tt)}parse(lt){const dt={},vt={};function Tt(Zt,Kt){if(dt[Kt]!==void 0)return dt[Kt];const hn=Zt.interleavedBuffers[Kt],dn=Et(Zt,hn.buffer),pn=getTypedArray(hn.type,dn),mn=new InterleavedBuffer(pn,hn.stride);return mn.uuid=hn.uuid,dt[Kt]=mn,mn}function Et(Zt,Kt){if(vt[Kt]!==void 0)return vt[Kt];const hn=Zt.arrayBuffers[Kt],dn=new Uint32Array(hn).buffer;return vt[Kt]=dn,dn}const Ct=lt.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,Rt=lt.data.index;if(Rt!==void 0){const Zt=getTypedArray(Rt.type,Rt.array);Ct.setIndex(new BufferAttribute(Zt,1))}const kt=lt.data.attributes;for(const Zt in kt){const Kt=kt[Zt];let ln;if(Kt.isInterleavedBufferAttribute){const hn=Tt(lt.data,Kt.data);ln=new InterleavedBufferAttribute(hn,Kt.itemSize,Kt.offset,Kt.normalized)}else{const hn=getTypedArray(Kt.type,Kt.array),dn=Kt.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute;ln=new dn(hn,Kt.itemSize,Kt.normalized)}Kt.name!==void 0&&(ln.name=Kt.name),Kt.usage!==void 0&&ln.setUsage(Kt.usage),Kt.updateRange!==void 0&&(ln.updateRange.offset=Kt.updateRange.offset,ln.updateRange.count=Kt.updateRange.count),Ct.setAttribute(Zt,ln)}const Dt=lt.data.morphAttributes;if(Dt)for(const Zt in Dt){const Kt=Dt[Zt],ln=[];for(let hn=0,dn=Kt.length;hn<dn;hn++){const pn=Kt[hn];let mn;if(pn.isInterleavedBufferAttribute){const On=Tt(lt.data,pn.data);mn=new InterleavedBufferAttribute(On,pn.itemSize,pn.offset,pn.normalized)}else{const On=getTypedArray(pn.type,pn.array);mn=new BufferAttribute(On,pn.itemSize,pn.normalized)}pn.name!==void 0&&(mn.name=pn.name),ln.push(mn)}Ct.morphAttributes[Zt]=ln}lt.data.morphTargetsRelative&&(Ct.morphTargetsRelative=!0);const Ft=lt.data.groups||lt.data.drawcalls||lt.data.offsets;if(Ft!==void 0)for(let Zt=0,Kt=Ft.length;Zt!==Kt;++Zt){const ln=Ft[Zt];Ct.addGroup(ln.start,ln.count,ln.materialIndex)}const Ut=lt.data.boundingSphere;if(Ut!==void 0){const Zt=new Vector3;Ut.center!==void 0&&Zt.fromArray(Ut.center),Ct.boundingSphere=new Sphere$1(Zt,Ut.radius)}return lt.name&&(Ct.name=lt.name),lt.userData&&(Ct.userData=lt.userData),Ct}}class ObjectLoader extends Loader{constructor(lt){super(lt)}load(lt,dt,vt,Tt){const Et=this,Ct=this.path===""?LoaderUtils.extractUrlBase(lt):this.path;this.resourcePath=this.resourcePath||Ct;const Rt=new FileLoader(this.manager);Rt.setPath(this.path),Rt.setRequestHeader(this.requestHeader),Rt.setWithCredentials(this.withCredentials),Rt.load(lt,function(kt){let Dt=null;try{Dt=JSON.parse(kt)}catch(Ft){Tt!==void 0&&Tt(Ft),console.error("THREE:ObjectLoader: Can't parse "+lt+".",Ft.message);return}const Bt=Dt.metadata;if(Bt===void 0||Bt.type===void 0||Bt.type.toLowerCase()==="geometry"){Tt!==void 0&&Tt(new Error("THREE.ObjectLoader: Can't load "+lt)),console.error("THREE.ObjectLoader: Can't load "+lt);return}Et.parse(Dt,dt)},vt,Tt)}async loadAsync(lt,dt){const vt=this,Tt=this.path===""?LoaderUtils.extractUrlBase(lt):this.path;this.resourcePath=this.resourcePath||Tt;const Et=new FileLoader(this.manager);Et.setPath(this.path),Et.setRequestHeader(this.requestHeader),Et.setWithCredentials(this.withCredentials);const Ct=await Et.loadAsync(lt,dt),Rt=JSON.parse(Ct),kt=Rt.metadata;if(kt===void 0||kt.type===void 0||kt.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+lt);return await vt.parseAsync(Rt)}parse(lt,dt){const vt=this.parseAnimations(lt.animations),Tt=this.parseShapes(lt.shapes),Et=this.parseGeometries(lt.geometries,Tt),Ct=this.parseImages(lt.images,function(){dt!==void 0&&dt(Dt)}),Rt=this.parseTextures(lt.textures,Ct),kt=this.parseMaterials(lt.materials,Rt),Dt=this.parseObject(lt.object,Et,kt,Rt,vt),Bt=this.parseSkeletons(lt.skeletons,Dt);if(this.bindSkeletons(Dt,Bt),dt!==void 0){let Ft=!1;for(const Ut in Ct)if(Ct[Ut].data instanceof HTMLImageElement){Ft=!0;break}Ft===!1&&dt(Dt)}return Dt}async parseAsync(lt){const dt=this.parseAnimations(lt.animations),vt=this.parseShapes(lt.shapes),Tt=this.parseGeometries(lt.geometries,vt),Et=await this.parseImagesAsync(lt.images),Ct=this.parseTextures(lt.textures,Et),Rt=this.parseMaterials(lt.materials,Ct),kt=this.parseObject(lt.object,Tt,Rt,Ct,dt),Dt=this.parseSkeletons(lt.skeletons,kt);return this.bindSkeletons(kt,Dt),kt}parseShapes(lt){const dt={};if(lt!==void 0)for(let vt=0,Tt=lt.length;vt<Tt;vt++){const Et=new Shape().fromJSON(lt[vt]);dt[Et.uuid]=Et}return dt}parseSkeletons(lt,dt){const vt={},Tt={};if(dt.traverse(function(Et){Et.isBone&&(Tt[Et.uuid]=Et)}),lt!==void 0)for(let Et=0,Ct=lt.length;Et<Ct;Et++){const Rt=new Skeleton().fromJSON(lt[Et],Tt);vt[Rt.uuid]=Rt}return vt}parseGeometries(lt,dt){const vt={};if(lt!==void 0){const Tt=new BufferGeometryLoader;for(let Et=0,Ct=lt.length;Et<Ct;Et++){let Rt;const kt=lt[Et];switch(kt.type){case"BufferGeometry":case"InstancedBufferGeometry":Rt=Tt.parse(kt);break;default:kt.type in Geometries?Rt=Geometries[kt.type].fromJSON(kt,dt):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${kt.type}"`)}Rt.uuid=kt.uuid,kt.name!==void 0&&(Rt.name=kt.name),kt.userData!==void 0&&(Rt.userData=kt.userData),vt[kt.uuid]=Rt}}return vt}parseMaterials(lt,dt){const vt={},Tt={};if(lt!==void 0){const Et=new MaterialLoader;Et.setTextures(dt);for(let Ct=0,Rt=lt.length;Ct<Rt;Ct++){const kt=lt[Ct];vt[kt.uuid]===void 0&&(vt[kt.uuid]=Et.parse(kt)),Tt[kt.uuid]=vt[kt.uuid]}}return Tt}parseAnimations(lt){const dt={};if(lt!==void 0)for(let vt=0;vt<lt.length;vt++){const Tt=lt[vt],Et=AnimationClip.parse(Tt);dt[Et.uuid]=Et}return dt}parseImages(lt,dt){const vt=this,Tt={};let Et;function Ct(kt){return vt.manager.itemStart(kt),Et.load(kt,function(){vt.manager.itemEnd(kt)},void 0,function(){vt.manager.itemError(kt),vt.manager.itemEnd(kt)})}function Rt(kt){if(typeof kt=="string"){const Dt=kt,Bt=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(Dt)?Dt:vt.resourcePath+Dt;return Ct(Bt)}else return kt.data?{data:getTypedArray(kt.type,kt.data),width:kt.width,height:kt.height}:null}if(lt!==void 0&&lt.length>0){const kt=new LoadingManager(dt);Et=new ImageLoader(kt),Et.setCrossOrigin(this.crossOrigin);for(let Dt=0,Bt=lt.length;Dt<Bt;Dt++){const Ft=lt[Dt],Ut=Ft.url;if(Array.isArray(Ut)){const Zt=[];for(let Kt=0,ln=Ut.length;Kt<ln;Kt++){const hn=Ut[Kt],dn=Rt(hn);dn!==null&&(dn instanceof HTMLImageElement?Zt.push(dn):Zt.push(new DataTexture(dn.data,dn.width,dn.height)))}Tt[Ft.uuid]=new Source(Zt)}else{const Zt=Rt(Ft.url);Tt[Ft.uuid]=new Source(Zt)}}}return Tt}async parseImagesAsync(lt){const dt=this,vt={};let Tt;async function Et(Ct){if(typeof Ct=="string"){const Rt=Ct,kt=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(Rt)?Rt:dt.resourcePath+Rt;return await Tt.loadAsync(kt)}else return Ct.data?{data:getTypedArray(Ct.type,Ct.data),width:Ct.width,height:Ct.height}:null}if(lt!==void 0&&lt.length>0){Tt=new ImageLoader(this.manager),Tt.setCrossOrigin(this.crossOrigin);for(let Ct=0,Rt=lt.length;Ct<Rt;Ct++){const kt=lt[Ct],Dt=kt.url;if(Array.isArray(Dt)){const Bt=[];for(let Ft=0,Ut=Dt.length;Ft<Ut;Ft++){const Zt=Dt[Ft],Kt=await Et(Zt);Kt!==null&&(Kt instanceof HTMLImageElement?Bt.push(Kt):Bt.push(new DataTexture(Kt.data,Kt.width,Kt.height)))}vt[kt.uuid]=new Source(Bt)}else{const Bt=await Et(kt.url);vt[kt.uuid]=new Source(Bt)}}}return vt}parseTextures(lt,dt){function vt(Et,Ct){return typeof Et=="number"?Et:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",Et),Ct[Et])}const Tt={};if(lt!==void 0)for(let Et=0,Ct=lt.length;Et<Ct;Et++){const Rt=lt[Et];Rt.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',Rt.uuid),dt[Rt.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",Rt.image);const kt=dt[Rt.image],Dt=kt.data;let Bt;Array.isArray(Dt)?(Bt=new CubeTexture,Dt.length===6&&(Bt.needsUpdate=!0)):(Dt&&Dt.data?Bt=new DataTexture:Bt=new Texture,Dt&&(Bt.needsUpdate=!0)),Bt.source=kt,Bt.uuid=Rt.uuid,Rt.name!==void 0&&(Bt.name=Rt.name),Rt.mapping!==void 0&&(Bt.mapping=vt(Rt.mapping,TEXTURE_MAPPING)),Rt.offset!==void 0&&Bt.offset.fromArray(Rt.offset),Rt.repeat!==void 0&&Bt.repeat.fromArray(Rt.repeat),Rt.center!==void 0&&Bt.center.fromArray(Rt.center),Rt.rotation!==void 0&&(Bt.rotation=Rt.rotation),Rt.wrap!==void 0&&(Bt.wrapS=vt(Rt.wrap[0],TEXTURE_WRAPPING),Bt.wrapT=vt(Rt.wrap[1],TEXTURE_WRAPPING)),Rt.format!==void 0&&(Bt.format=Rt.format),Rt.internalFormat!==void 0&&(Bt.internalFormat=Rt.internalFormat),Rt.type!==void 0&&(Bt.type=Rt.type),Rt.encoding!==void 0&&(Bt.encoding=Rt.encoding),Rt.minFilter!==void 0&&(Bt.minFilter=vt(Rt.minFilter,TEXTURE_FILTER)),Rt.magFilter!==void 0&&(Bt.magFilter=vt(Rt.magFilter,TEXTURE_FILTER)),Rt.anisotropy!==void 0&&(Bt.anisotropy=Rt.anisotropy),Rt.flipY!==void 0&&(Bt.flipY=Rt.flipY),Rt.generateMipmaps!==void 0&&(Bt.generateMipmaps=Rt.generateMipmaps),Rt.premultiplyAlpha!==void 0&&(Bt.premultiplyAlpha=Rt.premultiplyAlpha),Rt.unpackAlignment!==void 0&&(Bt.unpackAlignment=Rt.unpackAlignment),Rt.userData!==void 0&&(Bt.userData=Rt.userData),Tt[Rt.uuid]=Bt}return Tt}parseObject(lt,dt,vt,Tt,Et){let Ct;function Rt(Ut){return dt[Ut]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",Ut),dt[Ut]}function kt(Ut){if(Ut!==void 0){if(Array.isArray(Ut)){const Zt=[];for(let Kt=0,ln=Ut.length;Kt<ln;Kt++){const hn=Ut[Kt];vt[hn]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",hn),Zt.push(vt[hn])}return Zt}return vt[Ut]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",Ut),vt[Ut]}}function Dt(Ut){return Tt[Ut]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",Ut),Tt[Ut]}let Bt,Ft;switch(lt.type){case"Scene":Ct=new Scene,lt.background!==void 0&&(Number.isInteger(lt.background)?Ct.background=new Color(lt.background):Ct.background=Dt(lt.background)),lt.environment!==void 0&&(Ct.environment=Dt(lt.environment)),lt.fog!==void 0&&(lt.fog.type==="Fog"?Ct.fog=new Fog(lt.fog.color,lt.fog.near,lt.fog.far):lt.fog.type==="FogExp2"&&(Ct.fog=new FogExp2(lt.fog.color,lt.fog.density))),lt.backgroundBlurriness!==void 0&&(Ct.backgroundBlurriness=lt.backgroundBlurriness),lt.backgroundIntensity!==void 0&&(Ct.backgroundIntensity=lt.backgroundIntensity);break;case"PerspectiveCamera":Ct=new PerspectiveCamera(lt.fov,lt.aspect,lt.near,lt.far),lt.focus!==void 0&&(Ct.focus=lt.focus),lt.zoom!==void 0&&(Ct.zoom=lt.zoom),lt.filmGauge!==void 0&&(Ct.filmGauge=lt.filmGauge),lt.filmOffset!==void 0&&(Ct.filmOffset=lt.filmOffset),lt.view!==void 0&&(Ct.view=Object.assign({},lt.view));break;case"OrthographicCamera":Ct=new OrthographicCamera$1(lt.left,lt.right,lt.top,lt.bottom,lt.near,lt.far),lt.zoom!==void 0&&(Ct.zoom=lt.zoom),lt.view!==void 0&&(Ct.view=Object.assign({},lt.view));break;case"AmbientLight":Ct=new AmbientLight(lt.color,lt.intensity);break;case"DirectionalLight":Ct=new DirectionalLight(lt.color,lt.intensity);break;case"PointLight":Ct=new PointLight(lt.color,lt.intensity,lt.distance,lt.decay);break;case"RectAreaLight":Ct=new RectAreaLight(lt.color,lt.intensity,lt.width,lt.height);break;case"SpotLight":Ct=new SpotLight(lt.color,lt.intensity,lt.distance,lt.angle,lt.penumbra,lt.decay);break;case"HemisphereLight":Ct=new HemisphereLight(lt.color,lt.groundColor,lt.intensity);break;case"LightProbe":Ct=new LightProbe().fromJSON(lt);break;case"SkinnedMesh":Bt=Rt(lt.geometry),Ft=kt(lt.material),Ct=new SkinnedMesh(Bt,Ft),lt.bindMode!==void 0&&(Ct.bindMode=lt.bindMode),lt.bindMatrix!==void 0&&Ct.bindMatrix.fromArray(lt.bindMatrix),lt.skeleton!==void 0&&(Ct.skeleton=lt.skeleton);break;case"Mesh":Bt=Rt(lt.geometry),Ft=kt(lt.material),Ct=new Mesh(Bt,Ft);break;case"InstancedMesh":Bt=Rt(lt.geometry),Ft=kt(lt.material);const Ut=lt.count,Zt=lt.instanceMatrix,Kt=lt.instanceColor;Ct=new InstancedMesh(Bt,Ft,Ut),Ct.instanceMatrix=new InstancedBufferAttribute(new Float32Array(Zt.array),16),Kt!==void 0&&(Ct.instanceColor=new InstancedBufferAttribute(new Float32Array(Kt.array),Kt.itemSize));break;case"LOD":Ct=new LOD;break;case"Line":Ct=new Line$2(Rt(lt.geometry),kt(lt.material));break;case"LineLoop":Ct=new LineLoop(Rt(lt.geometry),kt(lt.material));break;case"LineSegments":Ct=new LineSegments(Rt(lt.geometry),kt(lt.material));break;case"PointCloud":case"Points":Ct=new Points(Rt(lt.geometry),kt(lt.material));break;case"Sprite":Ct=new Sprite(kt(lt.material));break;case"Group":Ct=new Group;break;case"Bone":Ct=new Bone;break;default:Ct=new Object3D}if(Ct.uuid=lt.uuid,lt.name!==void 0&&(Ct.name=lt.name),lt.matrix!==void 0?(Ct.matrix.fromArray(lt.matrix),lt.matrixAutoUpdate!==void 0&&(Ct.matrixAutoUpdate=lt.matrixAutoUpdate),Ct.matrixAutoUpdate&&Ct.matrix.decompose(Ct.position,Ct.quaternion,Ct.scale)):(lt.position!==void 0&&Ct.position.fromArray(lt.position),lt.rotation!==void 0&&Ct.rotation.fromArray(lt.rotation),lt.quaternion!==void 0&&Ct.quaternion.fromArray(lt.quaternion),lt.scale!==void 0&&Ct.scale.fromArray(lt.scale)),lt.castShadow!==void 0&&(Ct.castShadow=lt.castShadow),lt.receiveShadow!==void 0&&(Ct.receiveShadow=lt.receiveShadow),lt.shadow&&(lt.shadow.bias!==void 0&&(Ct.shadow.bias=lt.shadow.bias),lt.shadow.normalBias!==void 0&&(Ct.shadow.normalBias=lt.shadow.normalBias),lt.shadow.radius!==void 0&&(Ct.shadow.radius=lt.shadow.radius),lt.shadow.mapSize!==void 0&&Ct.shadow.mapSize.fromArray(lt.shadow.mapSize),lt.shadow.camera!==void 0&&(Ct.shadow.camera=this.parseObject(lt.shadow.camera))),lt.visible!==void 0&&(Ct.visible=lt.visible),lt.frustumCulled!==void 0&&(Ct.frustumCulled=lt.frustumCulled),lt.renderOrder!==void 0&&(Ct.renderOrder=lt.renderOrder),lt.userData!==void 0&&(Ct.userData=lt.userData),lt.layers!==void 0&&(Ct.layers.mask=lt.layers),lt.children!==void 0){const Ut=lt.children;for(let Zt=0;Zt<Ut.length;Zt++)Ct.add(this.parseObject(Ut[Zt],dt,vt,Tt,Et))}if(lt.animations!==void 0){const Ut=lt.animations;for(let Zt=0;Zt<Ut.length;Zt++){const Kt=Ut[Zt];Ct.animations.push(Et[Kt])}}if(lt.type==="LOD"){lt.autoUpdate!==void 0&&(Ct.autoUpdate=lt.autoUpdate);const Ut=lt.levels;for(let Zt=0;Zt<Ut.length;Zt++){const Kt=Ut[Zt],ln=Ct.getObjectByProperty("uuid",Kt.object);ln!==void 0&&Ct.addLevel(ln,Kt.distance,Kt.hysteresis)}}return Ct}bindSkeletons(lt,dt){Object.keys(dt).length!==0&&lt.traverse(function(vt){if(vt.isSkinnedMesh===!0&&vt.skeleton!==void 0){const Tt=dt[vt.skeleton];Tt===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",vt.skeleton):vt.bind(Tt,vt.bindMatrix)}})}}const TEXTURE_MAPPING={UVMapping,CubeReflectionMapping,CubeRefractionMapping,EquirectangularReflectionMapping,EquirectangularRefractionMapping,CubeUVReflectionMapping},TEXTURE_WRAPPING={RepeatWrapping,ClampToEdgeWrapping,MirroredRepeatWrapping},TEXTURE_FILTER={NearestFilter,NearestMipmapNearestFilter,NearestMipmapLinearFilter,LinearFilter,LinearMipmapNearestFilter,LinearMipmapLinearFilter};class ImageBitmapLoader extends Loader{constructor(lt){super(lt),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(lt){return this.options=lt,this}load(lt,dt,vt,Tt){lt===void 0&&(lt=""),this.path!==void 0&&(lt=this.path+lt),lt=this.manager.resolveURL(lt);const Et=this,Ct=Cache.get(lt);if(Ct!==void 0)return Et.manager.itemStart(lt),setTimeout(function(){dt&&dt(Ct),Et.manager.itemEnd(lt)},0),Ct;const Rt={};Rt.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",Rt.headers=this.requestHeader,fetch(lt,Rt).then(function(kt){return kt.blob()}).then(function(kt){return createImageBitmap(kt,Object.assign(Et.options,{colorSpaceConversion:"none"}))}).then(function(kt){Cache.add(lt,kt),dt&&dt(kt),Et.manager.itemEnd(lt)}).catch(function(kt){Tt&&Tt(kt),Et.manager.itemError(lt),Et.manager.itemEnd(lt)}),Et.manager.itemStart(lt)}}let _context;class AudioContext{static getContext(){return _context===void 0&&(_context=new(window.AudioContext||window.webkitAudioContext)),_context}static setContext(lt){_context=lt}}class AudioLoader extends Loader{constructor(lt){super(lt)}load(lt,dt,vt,Tt){const Et=this,Ct=new FileLoader(this.manager);Ct.setResponseType("arraybuffer"),Ct.setPath(this.path),Ct.setRequestHeader(this.requestHeader),Ct.setWithCredentials(this.withCredentials),Ct.load(lt,function(Rt){try{const kt=Rt.slice(0);AudioContext.getContext().decodeAudioData(kt,function(Bt){dt(Bt)})}catch(kt){Tt?Tt(kt):console.error(kt),Et.manager.itemError(lt)}},vt,Tt)}}class HemisphereLightProbe extends LightProbe{constructor(lt,dt,vt=1){super(void 0,vt),this.isHemisphereLightProbe=!0;const Tt=new Color().set(lt),Et=new Color().set(dt),Ct=new Vector3(Tt.r,Tt.g,Tt.b),Rt=new Vector3(Et.r,Et.g,Et.b),kt=Math.sqrt(Math.PI),Dt=kt*Math.sqrt(.75);this.sh.coefficients[0].copy(Ct).add(Rt).multiplyScalar(kt),this.sh.coefficients[1].copy(Ct).sub(Rt).multiplyScalar(Dt)}}class AmbientLightProbe extends LightProbe{constructor(lt,dt=1){super(void 0,dt),this.isAmbientLightProbe=!0;const vt=new Color().set(lt);this.sh.coefficients[0].set(vt.r,vt.g,vt.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const _eyeRight=new Matrix4,_eyeLeft=new Matrix4,_projectionMatrix=new Matrix4;class StereoCamera{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(lt){const dt=this._cache;if(dt.focus!==lt.focus||dt.fov!==lt.fov||dt.aspect!==lt.aspect*this.aspect||dt.near!==lt.near||dt.far!==lt.far||dt.zoom!==lt.zoom||dt.eyeSep!==this.eyeSep){dt.focus=lt.focus,dt.fov=lt.fov,dt.aspect=lt.aspect*this.aspect,dt.near=lt.near,dt.far=lt.far,dt.zoom=lt.zoom,dt.eyeSep=this.eyeSep,_projectionMatrix.copy(lt.projectionMatrix);const Tt=dt.eyeSep/2,Et=Tt*dt.near/dt.focus,Ct=dt.near*Math.tan(DEG2RAD*dt.fov*.5)/dt.zoom;let Rt,kt;_eyeLeft.elements[12]=-Tt,_eyeRight.elements[12]=Tt,Rt=-Ct*dt.aspect+Et,kt=Ct*dt.aspect+Et,_projectionMatrix.elements[0]=2*dt.near/(kt-Rt),_projectionMatrix.elements[8]=(kt+Rt)/(kt-Rt),this.cameraL.projectionMatrix.copy(_projectionMatrix),Rt=-Ct*dt.aspect-Et,kt=Ct*dt.aspect-Et,_projectionMatrix.elements[0]=2*dt.near/(kt-Rt),_projectionMatrix.elements[8]=(kt+Rt)/(kt-Rt),this.cameraR.projectionMatrix.copy(_projectionMatrix)}this.cameraL.matrixWorld.copy(lt.matrixWorld).multiply(_eyeLeft),this.cameraR.matrixWorld.copy(lt.matrixWorld).multiply(_eyeRight)}}class Clock{constructor(lt=!0){this.autoStart=lt,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let lt=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const dt=now();lt=(dt-this.oldTime)/1e3,this.oldTime=dt,this.elapsedTime+=lt}return lt}}function now(){return(typeof performance>"u"?Date:performance).now()}const _position$1=new Vector3,_quaternion$1=new Quaternion,_scale$1=new Vector3,_orientation$1=new Vector3;class AudioListener extends Object3D{constructor(){super(),this.type="AudioListener",this.context=AudioContext.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(lt){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=lt,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(lt){return this.gain.gain.setTargetAtTime(lt,this.context.currentTime,.01),this}updateMatrixWorld(lt){super.updateMatrixWorld(lt);const dt=this.context.listener,vt=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_position$1,_quaternion$1,_scale$1),_orientation$1.set(0,0,-1).applyQuaternion(_quaternion$1),dt.positionX){const Tt=this.context.currentTime+this.timeDelta;dt.positionX.linearRampToValueAtTime(_position$1.x,Tt),dt.positionY.linearRampToValueAtTime(_position$1.y,Tt),dt.positionZ.linearRampToValueAtTime(_position$1.z,Tt),dt.forwardX.linearRampToValueAtTime(_orientation$1.x,Tt),dt.forwardY.linearRampToValueAtTime(_orientation$1.y,Tt),dt.forwardZ.linearRampToValueAtTime(_orientation$1.z,Tt),dt.upX.linearRampToValueAtTime(vt.x,Tt),dt.upY.linearRampToValueAtTime(vt.y,Tt),dt.upZ.linearRampToValueAtTime(vt.z,Tt)}else dt.setPosition(_position$1.x,_position$1.y,_position$1.z),dt.setOrientation(_orientation$1.x,_orientation$1.y,_orientation$1.z,vt.x,vt.y,vt.z)}}class Audio extends Object3D{constructor(lt){super(),this.type="Audio",this.listener=lt,this.context=lt.context,this.gain=this.context.createGain(),this.gain.connect(lt.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(lt){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=lt,this.connect(),this}setMediaElementSource(lt){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(lt),this.connect(),this}setMediaStreamSource(lt){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(lt),this.connect(),this}setBuffer(lt){return this.buffer=lt,this.sourceType="buffer",this.autoplay&&this.play(),this}play(lt=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+lt;const dt=this.context.createBufferSource();return dt.buffer=this.buffer,dt.loop=this.loop,dt.loopStart=this.loopStart,dt.loopEnd=this.loopEnd,dt.onended=this.onEnded.bind(this),dt.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=dt,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let lt=1,dt=this.filters.length;lt<dt;lt++)this.filters[lt-1].connect(this.filters[lt]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let lt=1,dt=this.filters.length;lt<dt;lt++)this.filters[lt-1].disconnect(this.filters[lt]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(lt){return lt||(lt=[]),this._connected===!0?(this.disconnect(),this.filters=lt.slice(),this.connect()):this.filters=lt.slice(),this}setDetune(lt){if(this.detune=lt,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(lt){return this.setFilters(lt?[lt]:[])}setPlaybackRate(lt){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=lt,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(lt){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=lt,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(lt){return this.loopStart=lt,this}setLoopEnd(lt){return this.loopEnd=lt,this}getVolume(){return this.gain.gain.value}setVolume(lt){return this.gain.gain.setTargetAtTime(lt,this.context.currentTime,.01),this}}const _position=new Vector3,_quaternion=new Quaternion,_scale=new Vector3,_orientation=new Vector3;class PositionalAudio extends Audio{constructor(lt){super(lt),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(lt){return this.panner.refDistance=lt,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(lt){return this.panner.rolloffFactor=lt,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(lt){return this.panner.distanceModel=lt,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(lt){return this.panner.maxDistance=lt,this}setDirectionalCone(lt,dt,vt){return this.panner.coneInnerAngle=lt,this.panner.coneOuterAngle=dt,this.panner.coneOuterGain=vt,this}updateMatrixWorld(lt){if(super.updateMatrixWorld(lt),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(_position,_quaternion,_scale),_orientation.set(0,0,1).applyQuaternion(_quaternion);const dt=this.panner;if(dt.positionX){const vt=this.context.currentTime+this.listener.timeDelta;dt.positionX.linearRampToValueAtTime(_position.x,vt),dt.positionY.linearRampToValueAtTime(_position.y,vt),dt.positionZ.linearRampToValueAtTime(_position.z,vt),dt.orientationX.linearRampToValueAtTime(_orientation.x,vt),dt.orientationY.linearRampToValueAtTime(_orientation.y,vt),dt.orientationZ.linearRampToValueAtTime(_orientation.z,vt)}else dt.setPosition(_position.x,_position.y,_position.z),dt.setOrientation(_orientation.x,_orientation.y,_orientation.z)}}class AudioAnalyser{constructor(lt,dt=2048){this.analyser=lt.context.createAnalyser(),this.analyser.fftSize=dt,this.data=new Uint8Array(this.analyser.frequencyBinCount),lt.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let lt=0;const dt=this.getFrequencyData();for(let vt=0;vt<dt.length;vt++)lt+=dt[vt];return lt/dt.length}}class PropertyMixer{constructor(lt,dt,vt){this.binding=lt,this.valueSize=vt;let Tt,Et,Ct;switch(dt){case"quaternion":Tt=this._slerp,Et=this._slerpAdditive,Ct=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(vt*6),this._workIndex=5;break;case"string":case"bool":Tt=this._select,Et=this._select,Ct=this._setAdditiveIdentityOther,this.buffer=new Array(vt*5);break;default:Tt=this._lerp,Et=this._lerpAdditive,Ct=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(vt*5)}this._mixBufferRegion=Tt,this._mixBufferRegionAdditive=Et,this._setIdentity=Ct,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(lt,dt){const vt=this.buffer,Tt=this.valueSize,Et=lt*Tt+Tt;let Ct=this.cumulativeWeight;if(Ct===0){for(let Rt=0;Rt!==Tt;++Rt)vt[Et+Rt]=vt[Rt];Ct=dt}else{Ct+=dt;const Rt=dt/Ct;this._mixBufferRegion(vt,Et,0,Rt,Tt)}this.cumulativeWeight=Ct}accumulateAdditive(lt){const dt=this.buffer,vt=this.valueSize,Tt=vt*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(dt,Tt,0,lt,vt),this.cumulativeWeightAdditive+=lt}apply(lt){const dt=this.valueSize,vt=this.buffer,Tt=lt*dt+dt,Et=this.cumulativeWeight,Ct=this.cumulativeWeightAdditive,Rt=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,Et<1){const kt=dt*this._origIndex;this._mixBufferRegion(vt,Tt,kt,1-Et,dt)}Ct>0&&this._mixBufferRegionAdditive(vt,Tt,this._addIndex*dt,1,dt);for(let kt=dt,Dt=dt+dt;kt!==Dt;++kt)if(vt[kt]!==vt[kt+dt]){Rt.setValue(vt,Tt);break}}saveOriginalState(){const lt=this.binding,dt=this.buffer,vt=this.valueSize,Tt=vt*this._origIndex;lt.getValue(dt,Tt);for(let Et=vt,Ct=Tt;Et!==Ct;++Et)dt[Et]=dt[Tt+Et%vt];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const lt=this.valueSize*3;this.binding.setValue(this.buffer,lt)}_setAdditiveIdentityNumeric(){const lt=this._addIndex*this.valueSize,dt=lt+this.valueSize;for(let vt=lt;vt<dt;vt++)this.buffer[vt]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const lt=this._origIndex*this.valueSize,dt=this._addIndex*this.valueSize;for(let vt=0;vt<this.valueSize;vt++)this.buffer[dt+vt]=this.buffer[lt+vt]}_select(lt,dt,vt,Tt,Et){if(Tt>=.5)for(let Ct=0;Ct!==Et;++Ct)lt[dt+Ct]=lt[vt+Ct]}_slerp(lt,dt,vt,Tt){Quaternion.slerpFlat(lt,dt,lt,dt,lt,vt,Tt)}_slerpAdditive(lt,dt,vt,Tt,Et){const Ct=this._workIndex*Et;Quaternion.multiplyQuaternionsFlat(lt,Ct,lt,dt,lt,vt),Quaternion.slerpFlat(lt,dt,lt,dt,lt,Ct,Tt)}_lerp(lt,dt,vt,Tt,Et){const Ct=1-Tt;for(let Rt=0;Rt!==Et;++Rt){const kt=dt+Rt;lt[kt]=lt[kt]*Ct+lt[vt+Rt]*Tt}}_lerpAdditive(lt,dt,vt,Tt,Et){for(let Ct=0;Ct!==Et;++Ct){const Rt=dt+Ct;lt[Rt]=lt[Rt]+lt[vt+Ct]*Tt}}}const _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones","map"];class Composite{constructor(lt,dt,vt){const Tt=vt||PropertyBinding.parseTrackName(dt);this._targetGroup=lt,this._bindings=lt.subscribe_(dt,Tt)}getValue(lt,dt){this.bind();const vt=this._targetGroup.nCachedObjects_,Tt=this._bindings[vt];Tt!==void 0&&Tt.getValue(lt,dt)}setValue(lt,dt){const vt=this._bindings;for(let Tt=this._targetGroup.nCachedObjects_,Et=vt.length;Tt!==Et;++Tt)vt[Tt].setValue(lt,dt)}bind(){const lt=this._bindings;for(let dt=this._targetGroup.nCachedObjects_,vt=lt.length;dt!==vt;++dt)lt[dt].bind()}unbind(){const lt=this._bindings;for(let dt=this._targetGroup.nCachedObjects_,vt=lt.length;dt!==vt;++dt)lt[dt].unbind()}}class PropertyBinding{constructor(lt,dt,vt){this.path=dt,this.parsedPath=vt||PropertyBinding.parseTrackName(dt),this.node=PropertyBinding.findNode(lt,this.parsedPath.nodeName),this.rootNode=lt,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(lt,dt,vt){return lt&&lt.isAnimationObjectGroup?new PropertyBinding.Composite(lt,dt,vt):new PropertyBinding(lt,dt,vt)}static sanitizeNodeName(lt){return lt.replace(/\s/g,"_").replace(_reservedRe,"")}static parseTrackName(lt){const dt=_trackRe.exec(lt);if(dt===null)throw new Error("PropertyBinding: Cannot parse trackName: "+lt);const vt={nodeName:dt[2],objectName:dt[3],objectIndex:dt[4],propertyName:dt[5],propertyIndex:dt[6]},Tt=vt.nodeName&&vt.nodeName.lastIndexOf(".");if(Tt!==void 0&&Tt!==-1){const Et=vt.nodeName.substring(Tt+1);_supportedObjectNames.indexOf(Et)!==-1&&(vt.nodeName=vt.nodeName.substring(0,Tt),vt.objectName=Et)}if(vt.propertyName===null||vt.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+lt);return vt}static findNode(lt,dt){if(dt===void 0||dt===""||dt==="."||dt===-1||dt===lt.name||dt===lt.uuid)return lt;if(lt.skeleton){const vt=lt.skeleton.getBoneByName(dt);if(vt!==void 0)return vt}if(lt.children){const vt=function(Et){for(let Ct=0;Ct<Et.length;Ct++){const Rt=Et[Ct];if(Rt.name===dt||Rt.uuid===dt)return Rt;const kt=vt(Rt.children);if(kt)return kt}return null},Tt=vt(lt.children);if(Tt)return Tt}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(lt,dt){lt[dt]=this.targetObject[this.propertyName]}_getValue_array(lt,dt){const vt=this.resolvedProperty;for(let Tt=0,Et=vt.length;Tt!==Et;++Tt)lt[dt++]=vt[Tt]}_getValue_arrayElement(lt,dt){lt[dt]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(lt,dt){this.resolvedProperty.toArray(lt,dt)}_setValue_direct(lt,dt){this.targetObject[this.propertyName]=lt[dt]}_setValue_direct_setNeedsUpdate(lt,dt){this.targetObject[this.propertyName]=lt[dt],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(lt,dt){this.targetObject[this.propertyName]=lt[dt],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(lt,dt){const vt=this.resolvedProperty;for(let Tt=0,Et=vt.length;Tt!==Et;++Tt)vt[Tt]=lt[dt++]}_setValue_array_setNeedsUpdate(lt,dt){const vt=this.resolvedProperty;for(let Tt=0,Et=vt.length;Tt!==Et;++Tt)vt[Tt]=lt[dt++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(lt,dt){const vt=this.resolvedProperty;for(let Tt=0,Et=vt.length;Tt!==Et;++Tt)vt[Tt]=lt[dt++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(lt,dt){this.resolvedProperty[this.propertyIndex]=lt[dt]}_setValue_arrayElement_setNeedsUpdate(lt,dt){this.resolvedProperty[this.propertyIndex]=lt[dt],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(lt,dt){this.resolvedProperty[this.propertyIndex]=lt[dt],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(lt,dt){this.resolvedProperty.fromArray(lt,dt)}_setValue_fromArray_setNeedsUpdate(lt,dt){this.resolvedProperty.fromArray(lt,dt),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(lt,dt){this.resolvedProperty.fromArray(lt,dt),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(lt,dt){this.bind(),this.getValue(lt,dt)}_setValue_unbound(lt,dt){this.bind(),this.setValue(lt,dt)}bind(){let lt=this.node;const dt=this.parsedPath,vt=dt.objectName,Tt=dt.propertyName;let Et=dt.propertyIndex;if(lt||(lt=PropertyBinding.findNode(this.rootNode,dt.nodeName),this.node=lt),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!lt){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(vt){let Dt=dt.objectIndex;switch(vt){case"materials":if(!lt.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!lt.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}lt=lt.material.materials;break;case"bones":if(!lt.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}lt=lt.skeleton.bones;for(let Bt=0;Bt<lt.length;Bt++)if(lt[Bt].name===Dt){Dt=Bt;break}break;case"map":if("map"in lt){lt=lt.map;break}if(!lt.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!lt.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}lt=lt.material.map;break;default:if(lt[vt]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}lt=lt[vt]}if(Dt!==void 0){if(lt[Dt]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,lt);return}lt=lt[Dt]}}const Ct=lt[Tt];if(Ct===void 0){const Dt=dt.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+Dt+"."+Tt+" but it wasn't found.",lt);return}let Rt=this.Versioning.None;this.targetObject=lt,lt.needsUpdate!==void 0?Rt=this.Versioning.NeedsUpdate:lt.matrixWorldNeedsUpdate!==void 0&&(Rt=this.Versioning.MatrixWorldNeedsUpdate);let kt=this.BindingType.Direct;if(Et!==void 0){if(Tt==="morphTargetInfluences"){if(!lt.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!lt.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}lt.morphTargetDictionary[Et]!==void 0&&(Et=lt.morphTargetDictionary[Et])}kt=this.BindingType.ArrayElement,this.resolvedProperty=Ct,this.propertyIndex=Et}else Ct.fromArray!==void 0&&Ct.toArray!==void 0?(kt=this.BindingType.HasFromToArray,this.resolvedProperty=Ct):Array.isArray(Ct)?(kt=this.BindingType.EntireArray,this.resolvedProperty=Ct):this.propertyName=Tt;this.getValue=this.GetterByBindingType[kt],this.setValue=this.SetterByBindingTypeAndVersioning[kt][Rt]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}PropertyBinding.Composite=Composite;PropertyBinding.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};PropertyBinding.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};PropertyBinding.prototype.GetterByBindingType=[PropertyBinding.prototype._getValue_direct,PropertyBinding.prototype._getValue_array,PropertyBinding.prototype._getValue_arrayElement,PropertyBinding.prototype._getValue_toArray];PropertyBinding.prototype.SetterByBindingTypeAndVersioning=[[PropertyBinding.prototype._setValue_direct,PropertyBinding.prototype._setValue_direct_setNeedsUpdate,PropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_array,PropertyBinding.prototype._setValue_array_setNeedsUpdate,PropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_arrayElement,PropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate,PropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_fromArray,PropertyBinding.prototype._setValue_fromArray_setNeedsUpdate,PropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class AnimationObjectGroup{constructor(){this.isAnimationObjectGroup=!0,this.uuid=generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const lt={};this._indicesByUUID=lt;for(let vt=0,Tt=arguments.length;vt!==Tt;++vt)lt[arguments[vt].uuid]=vt;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const dt=this;this.stats={objects:{get total(){return dt._objects.length},get inUse(){return this.total-dt.nCachedObjects_}},get bindingsPerObject(){return dt._bindings.length}}}add(){const lt=this._objects,dt=this._indicesByUUID,vt=this._paths,Tt=this._parsedPaths,Et=this._bindings,Ct=Et.length;let Rt,kt=lt.length,Dt=this.nCachedObjects_;for(let Bt=0,Ft=arguments.length;Bt!==Ft;++Bt){const Ut=arguments[Bt],Zt=Ut.uuid;let Kt=dt[Zt];if(Kt===void 0){Kt=kt++,dt[Zt]=Kt,lt.push(Ut);for(let ln=0,hn=Ct;ln!==hn;++ln)Et[ln].push(new PropertyBinding(Ut,vt[ln],Tt[ln]))}else if(Kt<Dt){Rt=lt[Kt];const ln=--Dt,hn=lt[ln];dt[hn.uuid]=Kt,lt[Kt]=hn,dt[Zt]=ln,lt[ln]=Ut;for(let dn=0,pn=Ct;dn!==pn;++dn){const mn=Et[dn],On=mn[ln];let bn=mn[Kt];mn[Kt]=On,bn===void 0&&(bn=new PropertyBinding(Ut,vt[dn],Tt[dn])),mn[ln]=bn}}else lt[Kt]!==Rt&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=Dt}remove(){const lt=this._objects,dt=this._indicesByUUID,vt=this._bindings,Tt=vt.length;let Et=this.nCachedObjects_;for(let Ct=0,Rt=arguments.length;Ct!==Rt;++Ct){const kt=arguments[Ct],Dt=kt.uuid,Bt=dt[Dt];if(Bt!==void 0&&Bt>=Et){const Ft=Et++,Ut=lt[Ft];dt[Ut.uuid]=Bt,lt[Bt]=Ut,dt[Dt]=Ft,lt[Ft]=kt;for(let Zt=0,Kt=Tt;Zt!==Kt;++Zt){const ln=vt[Zt],hn=ln[Ft],dn=ln[Bt];ln[Bt]=hn,ln[Ft]=dn}}}this.nCachedObjects_=Et}uncache(){const lt=this._objects,dt=this._indicesByUUID,vt=this._bindings,Tt=vt.length;let Et=this.nCachedObjects_,Ct=lt.length;for(let Rt=0,kt=arguments.length;Rt!==kt;++Rt){const Dt=arguments[Rt],Bt=Dt.uuid,Ft=dt[Bt];if(Ft!==void 0)if(delete dt[Bt],Ft<Et){const Ut=--Et,Zt=lt[Ut],Kt=--Ct,ln=lt[Kt];dt[Zt.uuid]=Ft,lt[Ft]=Zt,dt[ln.uuid]=Ut,lt[Ut]=ln,lt.pop();for(let hn=0,dn=Tt;hn!==dn;++hn){const pn=vt[hn],mn=pn[Ut],On=pn[Kt];pn[Ft]=mn,pn[Ut]=On,pn.pop()}}else{const Ut=--Ct,Zt=lt[Ut];Ut>0&&(dt[Zt.uuid]=Ft),lt[Ft]=Zt,lt.pop();for(let Kt=0,ln=Tt;Kt!==ln;++Kt){const hn=vt[Kt];hn[Ft]=hn[Ut],hn.pop()}}}this.nCachedObjects_=Et}subscribe_(lt,dt){const vt=this._bindingsIndicesByPath;let Tt=vt[lt];const Et=this._bindings;if(Tt!==void 0)return Et[Tt];const Ct=this._paths,Rt=this._parsedPaths,kt=this._objects,Dt=kt.length,Bt=this.nCachedObjects_,Ft=new Array(Dt);Tt=Et.length,vt[lt]=Tt,Ct.push(lt),Rt.push(dt),Et.push(Ft);for(let Ut=Bt,Zt=kt.length;Ut!==Zt;++Ut){const Kt=kt[Ut];Ft[Ut]=new PropertyBinding(Kt,lt,dt)}return Ft}unsubscribe_(lt){const dt=this._bindingsIndicesByPath,vt=dt[lt];if(vt!==void 0){const Tt=this._paths,Et=this._parsedPaths,Ct=this._bindings,Rt=Ct.length-1,kt=Ct[Rt],Dt=lt[Rt];dt[Dt]=vt,Ct[vt]=kt,Ct.pop(),Et[vt]=Et[Rt],Et.pop(),Tt[vt]=Tt[Rt],Tt.pop()}}}class AnimationAction{constructor(lt,dt,vt=null,Tt=dt.blendMode){this._mixer=lt,this._clip=dt,this._localRoot=vt,this.blendMode=Tt;const Et=dt.tracks,Ct=Et.length,Rt=new Array(Ct),kt={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding};for(let Dt=0;Dt!==Ct;++Dt){const Bt=Et[Dt].createInterpolant(null);Rt[Dt]=Bt,Bt.settings=kt}this._interpolantSettings=kt,this._interpolants=Rt,this._propertyBindings=new Array(Ct),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(lt){return this._startTime=lt,this}setLoop(lt,dt){return this.loop=lt,this.repetitions=dt,this}setEffectiveWeight(lt){return this.weight=lt,this._effectiveWeight=this.enabled?lt:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(lt){return this._scheduleFading(lt,0,1)}fadeOut(lt){return this._scheduleFading(lt,1,0)}crossFadeFrom(lt,dt,vt){if(lt.fadeOut(dt),this.fadeIn(dt),vt){const Tt=this._clip.duration,Et=lt._clip.duration,Ct=Et/Tt,Rt=Tt/Et;lt.warp(1,Ct,dt),this.warp(Rt,1,dt)}return this}crossFadeTo(lt,dt,vt){return lt.crossFadeFrom(this,dt,vt)}stopFading(){const lt=this._weightInterpolant;return lt!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(lt)),this}setEffectiveTimeScale(lt){return this.timeScale=lt,this._effectiveTimeScale=this.paused?0:lt,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(lt){return this.timeScale=this._clip.duration/lt,this.stopWarping()}syncWith(lt){return this.time=lt.time,this.timeScale=lt.timeScale,this.stopWarping()}halt(lt){return this.warp(this._effectiveTimeScale,0,lt)}warp(lt,dt,vt){const Tt=this._mixer,Et=Tt.time,Ct=this.timeScale;let Rt=this._timeScaleInterpolant;Rt===null&&(Rt=Tt._lendControlInterpolant(),this._timeScaleInterpolant=Rt);const kt=Rt.parameterPositions,Dt=Rt.sampleValues;return kt[0]=Et,kt[1]=Et+vt,Dt[0]=lt/Ct,Dt[1]=dt/Ct,this}stopWarping(){const lt=this._timeScaleInterpolant;return lt!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(lt)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(lt,dt,vt,Tt){if(!this.enabled){this._updateWeight(lt);return}const Et=this._startTime;if(Et!==null){const kt=(lt-Et)*vt;kt<0||vt===0?dt=0:(this._startTime=null,dt=vt*kt)}dt*=this._updateTimeScale(lt);const Ct=this._updateTime(dt),Rt=this._updateWeight(lt);if(Rt>0){const kt=this._interpolants,Dt=this._propertyBindings;switch(this.blendMode){case AdditiveAnimationBlendMode:for(let Bt=0,Ft=kt.length;Bt!==Ft;++Bt)kt[Bt].evaluate(Ct),Dt[Bt].accumulateAdditive(Rt);break;case NormalAnimationBlendMode:default:for(let Bt=0,Ft=kt.length;Bt!==Ft;++Bt)kt[Bt].evaluate(Ct),Dt[Bt].accumulate(Tt,Rt)}}}_updateWeight(lt){let dt=0;if(this.enabled){dt=this.weight;const vt=this._weightInterpolant;if(vt!==null){const Tt=vt.evaluate(lt)[0];dt*=Tt,lt>vt.parameterPositions[1]&&(this.stopFading(),Tt===0&&(this.enabled=!1))}}return this._effectiveWeight=dt,dt}_updateTimeScale(lt){let dt=0;if(!this.paused){dt=this.timeScale;const vt=this._timeScaleInterpolant;if(vt!==null){const Tt=vt.evaluate(lt)[0];dt*=Tt,lt>vt.parameterPositions[1]&&(this.stopWarping(),dt===0?this.paused=!0:this.timeScale=dt)}}return this._effectiveTimeScale=dt,dt}_updateTime(lt){const dt=this._clip.duration,vt=this.loop;let Tt=this.time+lt,Et=this._loopCount;const Ct=vt===LoopPingPong;if(lt===0)return Et===-1?Tt:Ct&&(Et&1)===1?dt-Tt:Tt;if(vt===LoopOnce){Et===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(Tt>=dt)Tt=dt;else if(Tt<0)Tt=0;else{this.time=Tt;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=Tt,this._mixer.dispatchEvent({type:"finished",action:this,direction:lt<0?-1:1})}}else{if(Et===-1&&(lt>=0?(Et=0,this._setEndings(!0,this.repetitions===0,Ct)):this._setEndings(this.repetitions===0,!0,Ct)),Tt>=dt||Tt<0){const Rt=Math.floor(Tt/dt);Tt-=dt*Rt,Et+=Math.abs(Rt);const kt=this.repetitions-Et;if(kt<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,Tt=lt>0?dt:0,this.time=Tt,this._mixer.dispatchEvent({type:"finished",action:this,direction:lt>0?1:-1});else{if(kt===1){const Dt=lt<0;this._setEndings(Dt,!Dt,Ct)}else this._setEndings(!1,!1,Ct);this._loopCount=Et,this.time=Tt,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:Rt})}}else this.time=Tt;if(Ct&&(Et&1)===1)return dt-Tt}return Tt}_setEndings(lt,dt,vt){const Tt=this._interpolantSettings;vt?(Tt.endingStart=ZeroSlopeEnding,Tt.endingEnd=ZeroSlopeEnding):(lt?Tt.endingStart=this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:Tt.endingStart=WrapAroundEnding,dt?Tt.endingEnd=this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:Tt.endingEnd=WrapAroundEnding)}_scheduleFading(lt,dt,vt){const Tt=this._mixer,Et=Tt.time;let Ct=this._weightInterpolant;Ct===null&&(Ct=Tt._lendControlInterpolant(),this._weightInterpolant=Ct);const Rt=Ct.parameterPositions,kt=Ct.sampleValues;return Rt[0]=Et,kt[0]=dt,Rt[1]=Et+lt,kt[1]=vt,this}}const _controlInterpolantsResultBuffer=new Float32Array(1);class AnimationMixer extends EventDispatcher{constructor(lt){super(),this._root=lt,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(lt,dt){const vt=lt._localRoot||this._root,Tt=lt._clip.tracks,Et=Tt.length,Ct=lt._propertyBindings,Rt=lt._interpolants,kt=vt.uuid,Dt=this._bindingsByRootAndName;let Bt=Dt[kt];Bt===void 0&&(Bt={},Dt[kt]=Bt);for(let Ft=0;Ft!==Et;++Ft){const Ut=Tt[Ft],Zt=Ut.name;let Kt=Bt[Zt];if(Kt!==void 0)++Kt.referenceCount,Ct[Ft]=Kt;else{if(Kt=Ct[Ft],Kt!==void 0){Kt._cacheIndex===null&&(++Kt.referenceCount,this._addInactiveBinding(Kt,kt,Zt));continue}const ln=dt&&dt._propertyBindings[Ft].binding.parsedPath;Kt=new PropertyMixer(PropertyBinding.create(vt,Zt,ln),Ut.ValueTypeName,Ut.getValueSize()),++Kt.referenceCount,this._addInactiveBinding(Kt,kt,Zt),Ct[Ft]=Kt}Rt[Ft].resultBuffer=Kt.buffer}}_activateAction(lt){if(!this._isActiveAction(lt)){if(lt._cacheIndex===null){const vt=(lt._localRoot||this._root).uuid,Tt=lt._clip.uuid,Et=this._actionsByClip[Tt];this._bindAction(lt,Et&&Et.knownActions[0]),this._addInactiveAction(lt,Tt,vt)}const dt=lt._propertyBindings;for(let vt=0,Tt=dt.length;vt!==Tt;++vt){const Et=dt[vt];Et.useCount++===0&&(this._lendBinding(Et),Et.saveOriginalState())}this._lendAction(lt)}}_deactivateAction(lt){if(this._isActiveAction(lt)){const dt=lt._propertyBindings;for(let vt=0,Tt=dt.length;vt!==Tt;++vt){const Et=dt[vt];--Et.useCount===0&&(Et.restoreOriginalState(),this._takeBackBinding(Et))}this._takeBackAction(lt)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const lt=this;this.stats={actions:{get total(){return lt._actions.length},get inUse(){return lt._nActiveActions}},bindings:{get total(){return lt._bindings.length},get inUse(){return lt._nActiveBindings}},controlInterpolants:{get total(){return lt._controlInterpolants.length},get inUse(){return lt._nActiveControlInterpolants}}}}_isActiveAction(lt){const dt=lt._cacheIndex;return dt!==null&&dt<this._nActiveActions}_addInactiveAction(lt,dt,vt){const Tt=this._actions,Et=this._actionsByClip;let Ct=Et[dt];if(Ct===void 0)Ct={knownActions:[lt],actionByRoot:{}},lt._byClipCacheIndex=0,Et[dt]=Ct;else{const Rt=Ct.knownActions;lt._byClipCacheIndex=Rt.length,Rt.push(lt)}lt._cacheIndex=Tt.length,Tt.push(lt),Ct.actionByRoot[vt]=lt}_removeInactiveAction(lt){const dt=this._actions,vt=dt[dt.length-1],Tt=lt._cacheIndex;vt._cacheIndex=Tt,dt[Tt]=vt,dt.pop(),lt._cacheIndex=null;const Et=lt._clip.uuid,Ct=this._actionsByClip,Rt=Ct[Et],kt=Rt.knownActions,Dt=kt[kt.length-1],Bt=lt._byClipCacheIndex;Dt._byClipCacheIndex=Bt,kt[Bt]=Dt,kt.pop(),lt._byClipCacheIndex=null;const Ft=Rt.actionByRoot,Ut=(lt._localRoot||this._root).uuid;delete Ft[Ut],kt.length===0&&delete Ct[Et],this._removeInactiveBindingsForAction(lt)}_removeInactiveBindingsForAction(lt){const dt=lt._propertyBindings;for(let vt=0,Tt=dt.length;vt!==Tt;++vt){const Et=dt[vt];--Et.referenceCount===0&&this._removeInactiveBinding(Et)}}_lendAction(lt){const dt=this._actions,vt=lt._cacheIndex,Tt=this._nActiveActions++,Et=dt[Tt];lt._cacheIndex=Tt,dt[Tt]=lt,Et._cacheIndex=vt,dt[vt]=Et}_takeBackAction(lt){const dt=this._actions,vt=lt._cacheIndex,Tt=--this._nActiveActions,Et=dt[Tt];lt._cacheIndex=Tt,dt[Tt]=lt,Et._cacheIndex=vt,dt[vt]=Et}_addInactiveBinding(lt,dt,vt){const Tt=this._bindingsByRootAndName,Et=this._bindings;let Ct=Tt[dt];Ct===void 0&&(Ct={},Tt[dt]=Ct),Ct[vt]=lt,lt._cacheIndex=Et.length,Et.push(lt)}_removeInactiveBinding(lt){const dt=this._bindings,vt=lt.binding,Tt=vt.rootNode.uuid,Et=vt.path,Ct=this._bindingsByRootAndName,Rt=Ct[Tt],kt=dt[dt.length-1],Dt=lt._cacheIndex;kt._cacheIndex=Dt,dt[Dt]=kt,dt.pop(),delete Rt[Et],Object.keys(Rt).length===0&&delete Ct[Tt]}_lendBinding(lt){const dt=this._bindings,vt=lt._cacheIndex,Tt=this._nActiveBindings++,Et=dt[Tt];lt._cacheIndex=Tt,dt[Tt]=lt,Et._cacheIndex=vt,dt[vt]=Et}_takeBackBinding(lt){const dt=this._bindings,vt=lt._cacheIndex,Tt=--this._nActiveBindings,Et=dt[Tt];lt._cacheIndex=Tt,dt[Tt]=lt,Et._cacheIndex=vt,dt[vt]=Et}_lendControlInterpolant(){const lt=this._controlInterpolants,dt=this._nActiveControlInterpolants++;let vt=lt[dt];return vt===void 0&&(vt=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,_controlInterpolantsResultBuffer),vt.__cacheIndex=dt,lt[dt]=vt),vt}_takeBackControlInterpolant(lt){const dt=this._controlInterpolants,vt=lt.__cacheIndex,Tt=--this._nActiveControlInterpolants,Et=dt[Tt];lt.__cacheIndex=Tt,dt[Tt]=lt,Et.__cacheIndex=vt,dt[vt]=Et}clipAction(lt,dt,vt){const Tt=dt||this._root,Et=Tt.uuid;let Ct=typeof lt=="string"?AnimationClip.findByName(Tt,lt):lt;const Rt=Ct!==null?Ct.uuid:lt,kt=this._actionsByClip[Rt];let Dt=null;if(vt===void 0&&(Ct!==null?vt=Ct.blendMode:vt=NormalAnimationBlendMode),kt!==void 0){const Ft=kt.actionByRoot[Et];if(Ft!==void 0&&Ft.blendMode===vt)return Ft;Dt=kt.knownActions[0],Ct===null&&(Ct=Dt._clip)}if(Ct===null)return null;const Bt=new AnimationAction(this,Ct,dt,vt);return this._bindAction(Bt,Dt),this._addInactiveAction(Bt,Rt,Et),Bt}existingAction(lt,dt){const vt=dt||this._root,Tt=vt.uuid,Et=typeof lt=="string"?AnimationClip.findByName(vt,lt):lt,Ct=Et?Et.uuid:lt,Rt=this._actionsByClip[Ct];return Rt!==void 0&&Rt.actionByRoot[Tt]||null}stopAllAction(){const lt=this._actions,dt=this._nActiveActions;for(let vt=dt-1;vt>=0;--vt)lt[vt].stop();return this}update(lt){lt*=this.timeScale;const dt=this._actions,vt=this._nActiveActions,Tt=this.time+=lt,Et=Math.sign(lt),Ct=this._accuIndex^=1;for(let Dt=0;Dt!==vt;++Dt)dt[Dt]._update(Tt,lt,Et,Ct);const Rt=this._bindings,kt=this._nActiveBindings;for(let Dt=0;Dt!==kt;++Dt)Rt[Dt].apply(Ct);return this}setTime(lt){this.time=0;for(let dt=0;dt<this._actions.length;dt++)this._actions[dt].time=0;return this.update(lt)}getRoot(){return this._root}uncacheClip(lt){const dt=this._actions,vt=lt.uuid,Tt=this._actionsByClip,Et=Tt[vt];if(Et!==void 0){const Ct=Et.knownActions;for(let Rt=0,kt=Ct.length;Rt!==kt;++Rt){const Dt=Ct[Rt];this._deactivateAction(Dt);const Bt=Dt._cacheIndex,Ft=dt[dt.length-1];Dt._cacheIndex=null,Dt._byClipCacheIndex=null,Ft._cacheIndex=Bt,dt[Bt]=Ft,dt.pop(),this._removeInactiveBindingsForAction(Dt)}delete Tt[vt]}}uncacheRoot(lt){const dt=lt.uuid,vt=this._actionsByClip;for(const Ct in vt){const Rt=vt[Ct].actionByRoot,kt=Rt[dt];kt!==void 0&&(this._deactivateAction(kt),this._removeInactiveAction(kt))}const Tt=this._bindingsByRootAndName,Et=Tt[dt];if(Et!==void 0)for(const Ct in Et){const Rt=Et[Ct];Rt.restoreOriginalState(),this._removeInactiveBinding(Rt)}}uncacheAction(lt,dt){const vt=this.existingAction(lt,dt);vt!==null&&(this._deactivateAction(vt),this._removeInactiveAction(vt))}}class Uniform{constructor(lt){this.value=lt}clone(){return new Uniform(this.value.clone===void 0?this.value:this.value.clone())}}let id$1=0;class UniformsGroup extends EventDispatcher{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:id$1++}),this.name="",this.usage=StaticDrawUsage,this.uniforms=[]}add(lt){return this.uniforms.push(lt),this}remove(lt){const dt=this.uniforms.indexOf(lt);return dt!==-1&&this.uniforms.splice(dt,1),this}setName(lt){return this.name=lt,this}setUsage(lt){return this.usage=lt,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(lt){this.name=lt.name,this.usage=lt.usage;const dt=lt.uniforms;this.uniforms.length=0;for(let vt=0,Tt=dt.length;vt<Tt;vt++)this.uniforms.push(dt[vt].clone());return this}clone(){return new this.constructor().copy(this)}}class InstancedInterleavedBuffer extends InterleavedBuffer{constructor(lt,dt,vt=1){super(lt,dt),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=vt}copy(lt){return super.copy(lt),this.meshPerAttribute=lt.meshPerAttribute,this}clone(lt){const dt=super.clone(lt);return dt.meshPerAttribute=this.meshPerAttribute,dt}toJSON(lt){const dt=super.toJSON(lt);return dt.isInstancedInterleavedBuffer=!0,dt.meshPerAttribute=this.meshPerAttribute,dt}}class GLBufferAttribute{constructor(lt,dt,vt,Tt,Et){this.isGLBufferAttribute=!0,this.name="",this.buffer=lt,this.type=dt,this.itemSize=vt,this.elementSize=Tt,this.count=Et,this.version=0}set needsUpdate(lt){lt===!0&&this.version++}setBuffer(lt){return this.buffer=lt,this}setType(lt,dt){return this.type=lt,this.elementSize=dt,this}setItemSize(lt){return this.itemSize=lt,this}setCount(lt){return this.count=lt,this}}class Raycaster{constructor(lt,dt,vt=0,Tt=1/0){this.ray=new Ray(lt,dt),this.near=vt,this.far=Tt,this.camera=null,this.layers=new Layers$1,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(lt,dt){this.ray.set(lt,dt)}setFromCamera(lt,dt){dt.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(dt.matrixWorld),this.ray.direction.set(lt.x,lt.y,.5).unproject(dt).sub(this.ray.origin).normalize(),this.camera=dt):dt.isOrthographicCamera?(this.ray.origin.set(lt.x,lt.y,(dt.near+dt.far)/(dt.near-dt.far)).unproject(dt),this.ray.direction.set(0,0,-1).transformDirection(dt.matrixWorld),this.camera=dt):console.error("THREE.Raycaster: Unsupported camera type: "+dt.type)}intersectObject(lt,dt=!0,vt=[]){return intersectObject(lt,this,vt,dt),vt.sort(ascSort),vt}intersectObjects(lt,dt=!0,vt=[]){for(let Tt=0,Et=lt.length;Tt<Et;Tt++)intersectObject(lt[Tt],this,vt,dt);return vt.sort(ascSort),vt}}function ascSort(ft,lt){return ft.distance-lt.distance}function intersectObject(ft,lt,dt,vt){if(ft.layers.test(lt.layers)&&ft.raycast(lt,dt),vt===!0){const Tt=ft.children;for(let Et=0,Ct=Tt.length;Et<Ct;Et++)intersectObject(Tt[Et],lt,dt,!0)}}class Spherical{constructor(lt=1,dt=0,vt=0){return this.radius=lt,this.phi=dt,this.theta=vt,this}set(lt,dt,vt){return this.radius=lt,this.phi=dt,this.theta=vt,this}copy(lt){return this.radius=lt.radius,this.phi=lt.phi,this.theta=lt.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(lt){return this.setFromCartesianCoords(lt.x,lt.y,lt.z)}setFromCartesianCoords(lt,dt,vt){return this.radius=Math.sqrt(lt*lt+dt*dt+vt*vt),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(lt,vt),this.phi=Math.acos(clamp$1(dt/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Cylindrical{constructor(lt=1,dt=0,vt=0){return this.radius=lt,this.theta=dt,this.y=vt,this}set(lt,dt,vt){return this.radius=lt,this.theta=dt,this.y=vt,this}copy(lt){return this.radius=lt.radius,this.theta=lt.theta,this.y=lt.y,this}setFromVector3(lt){return this.setFromCartesianCoords(lt.x,lt.y,lt.z)}setFromCartesianCoords(lt,dt,vt){return this.radius=Math.sqrt(lt*lt+vt*vt),this.theta=Math.atan2(lt,vt),this.y=dt,this}clone(){return new this.constructor().copy(this)}}const _vector$4=new Vector2;class Box2{constructor(lt=new Vector2(1/0,1/0),dt=new Vector2(-1/0,-1/0)){this.isBox2=!0,this.min=lt,this.max=dt}set(lt,dt){return this.min.copy(lt),this.max.copy(dt),this}setFromPoints(lt){this.makeEmpty();for(let dt=0,vt=lt.length;dt<vt;dt++)this.expandByPoint(lt[dt]);return this}setFromCenterAndSize(lt,dt){const vt=_vector$4.copy(dt).multiplyScalar(.5);return this.min.copy(lt).sub(vt),this.max.copy(lt).add(vt),this}clone(){return new this.constructor().copy(this)}copy(lt){return this.min.copy(lt.min),this.max.copy(lt.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(lt){return this.isEmpty()?lt.set(0,0):lt.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(lt){return this.isEmpty()?lt.set(0,0):lt.subVectors(this.max,this.min)}expandByPoint(lt){return this.min.min(lt),this.max.max(lt),this}expandByVector(lt){return this.min.sub(lt),this.max.add(lt),this}expandByScalar(lt){return this.min.addScalar(-lt),this.max.addScalar(lt),this}containsPoint(lt){return!(lt.x<this.min.x||lt.x>this.max.x||lt.y<this.min.y||lt.y>this.max.y)}containsBox(lt){return this.min.x<=lt.min.x&&lt.max.x<=this.max.x&&this.min.y<=lt.min.y&&lt.max.y<=this.max.y}getParameter(lt,dt){return dt.set((lt.x-this.min.x)/(this.max.x-this.min.x),(lt.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(lt){return!(lt.max.x<this.min.x||lt.min.x>this.max.x||lt.max.y<this.min.y||lt.min.y>this.max.y)}clampPoint(lt,dt){return dt.copy(lt).clamp(this.min,this.max)}distanceToPoint(lt){return this.clampPoint(lt,_vector$4).distanceTo(lt)}intersect(lt){return this.min.max(lt.min),this.max.min(lt.max),this.isEmpty()&&this.makeEmpty(),this}union(lt){return this.min.min(lt.min),this.max.max(lt.max),this}translate(lt){return this.min.add(lt),this.max.add(lt),this}equals(lt){return lt.min.equals(this.min)&&lt.max.equals(this.max)}}const _startP=new Vector3,_startEnd=new Vector3;class Line3{constructor(lt=new Vector3,dt=new Vector3){this.start=lt,this.end=dt}set(lt,dt){return this.start.copy(lt),this.end.copy(dt),this}copy(lt){return this.start.copy(lt.start),this.end.copy(lt.end),this}getCenter(lt){return lt.addVectors(this.start,this.end).multiplyScalar(.5)}delta(lt){return lt.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(lt,dt){return this.delta(dt).multiplyScalar(lt).add(this.start)}closestPointToPointParameter(lt,dt){_startP.subVectors(lt,this.start),_startEnd.subVectors(this.end,this.start);const vt=_startEnd.dot(_startEnd);let Et=_startEnd.dot(_startP)/vt;return dt&&(Et=clamp$1(Et,0,1)),Et}closestPointToPoint(lt,dt,vt){const Tt=this.closestPointToPointParameter(lt,dt);return this.delta(vt).multiplyScalar(Tt).add(this.start)}applyMatrix4(lt){return this.start.applyMatrix4(lt),this.end.applyMatrix4(lt),this}equals(lt){return lt.start.equals(this.start)&&lt.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const _vector$3=new Vector3;class SpotLightHelper extends Object3D{constructor(lt,dt){super(),this.light=lt,this.matrix=lt.matrixWorld,this.matrixAutoUpdate=!1,this.color=dt,this.type="SpotLightHelper";const vt=new BufferGeometry,Tt=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let Ct=0,Rt=1,kt=32;Ct<kt;Ct++,Rt++){const Dt=Ct/kt*Math.PI*2,Bt=Rt/kt*Math.PI*2;Tt.push(Math.cos(Dt),Math.sin(Dt),1,Math.cos(Bt),Math.sin(Bt),1)}vt.setAttribute("position",new Float32BufferAttribute(Tt,3));const Et=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(vt,Et),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const lt=this.light.distance?this.light.distance:1e3,dt=lt*Math.tan(this.light.angle);this.cone.scale.set(dt,dt,lt),_vector$3.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_vector$3),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const _vector$2=new Vector3,_boneMatrix=new Matrix4,_matrixWorldInv=new Matrix4;class SkeletonHelper extends LineSegments{constructor(lt){const dt=getBoneList(lt),vt=new BufferGeometry,Tt=[],Et=[],Ct=new Color(0,0,1),Rt=new Color(0,1,0);for(let Dt=0;Dt<dt.length;Dt++){const Bt=dt[Dt];Bt.parent&&Bt.parent.isBone&&(Tt.push(0,0,0),Tt.push(0,0,0),Et.push(Ct.r,Ct.g,Ct.b),Et.push(Rt.r,Rt.g,Rt.b))}vt.setAttribute("position",new Float32BufferAttribute(Tt,3)),vt.setAttribute("color",new Float32BufferAttribute(Et,3));const kt=new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(vt,kt),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=lt,this.bones=dt,this.matrix=lt.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(lt){const dt=this.bones,vt=this.geometry,Tt=vt.getAttribute("position");_matrixWorldInv.copy(this.root.matrixWorld).invert();for(let Et=0,Ct=0;Et<dt.length;Et++){const Rt=dt[Et];Rt.parent&&Rt.parent.isBone&&(_boneMatrix.multiplyMatrices(_matrixWorldInv,Rt.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),Tt.setXYZ(Ct,_vector$2.x,_vector$2.y,_vector$2.z),_boneMatrix.multiplyMatrices(_matrixWorldInv,Rt.parent.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),Tt.setXYZ(Ct+1,_vector$2.x,_vector$2.y,_vector$2.z),Ct+=2)}vt.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(lt)}dispose(){this.geometry.dispose(),this.material.dispose()}}function getBoneList(ft){const lt=[];ft.isBone===!0&&lt.push(ft);for(let dt=0;dt<ft.children.length;dt++)lt.push.apply(lt,getBoneList(ft.children[dt]));return lt}class PointLightHelper extends Mesh{constructor(lt,dt,vt){const Tt=new SphereGeometry(dt,4,2),Et=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1});super(Tt,Et),this.light=lt,this.color=vt,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const _vector$1=new Vector3,_color1=new Color,_color2=new Color;class HemisphereLightHelper extends Object3D{constructor(lt,dt,vt){super(),this.light=lt,this.matrix=lt.matrixWorld,this.matrixAutoUpdate=!1,this.color=vt,this.type="HemisphereLightHelper";const Tt=new OctahedronGeometry(dt);Tt.rotateY(Math.PI*.5),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const Et=Tt.getAttribute("position"),Ct=new Float32Array(Et.count*3);Tt.setAttribute("color",new BufferAttribute(Ct,3)),this.add(new Mesh(Tt,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const lt=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const dt=lt.geometry.getAttribute("color");_color1.copy(this.light.color),_color2.copy(this.light.groundColor);for(let vt=0,Tt=dt.count;vt<Tt;vt++){const Et=vt<Tt/2?_color1:_color2;dt.setXYZ(vt,Et.r,Et.g,Et.b)}dt.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),lt.lookAt(_vector$1.setFromMatrixPosition(this.light.matrixWorld).negate())}}class GridHelper extends LineSegments{constructor(lt=10,dt=10,vt=4473924,Tt=8947848){vt=new Color(vt),Tt=new Color(Tt);const Et=dt/2,Ct=lt/dt,Rt=lt/2,kt=[],Dt=[];for(let Ut=0,Zt=0,Kt=-Rt;Ut<=dt;Ut++,Kt+=Ct){kt.push(-Rt,0,Kt,Rt,0,Kt),kt.push(Kt,0,-Rt,Kt,0,Rt);const ln=Ut===Et?vt:Tt;ln.toArray(Dt,Zt),Zt+=3,ln.toArray(Dt,Zt),Zt+=3,ln.toArray(Dt,Zt),Zt+=3,ln.toArray(Dt,Zt),Zt+=3}const Bt=new BufferGeometry;Bt.setAttribute("position",new Float32BufferAttribute(kt,3)),Bt.setAttribute("color",new Float32BufferAttribute(Dt,3));const Ft=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(Bt,Ft),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class PolarGridHelper extends LineSegments{constructor(lt=10,dt=16,vt=8,Tt=64,Et=4473924,Ct=8947848){Et=new Color(Et),Ct=new Color(Ct);const Rt=[],kt=[];if(dt>1)for(let Ft=0;Ft<dt;Ft++){const Ut=Ft/dt*(Math.PI*2),Zt=Math.sin(Ut)*lt,Kt=Math.cos(Ut)*lt;Rt.push(0,0,0),Rt.push(Zt,0,Kt);const ln=Ft&1?Et:Ct;kt.push(ln.r,ln.g,ln.b),kt.push(ln.r,ln.g,ln.b)}for(let Ft=0;Ft<vt;Ft++){const Ut=Ft&1?Et:Ct,Zt=lt-lt/vt*Ft;for(let Kt=0;Kt<Tt;Kt++){let ln=Kt/Tt*(Math.PI*2),hn=Math.sin(ln)*Zt,dn=Math.cos(ln)*Zt;Rt.push(hn,0,dn),kt.push(Ut.r,Ut.g,Ut.b),ln=(Kt+1)/Tt*(Math.PI*2),hn=Math.sin(ln)*Zt,dn=Math.cos(ln)*Zt,Rt.push(hn,0,dn),kt.push(Ut.r,Ut.g,Ut.b)}}const Dt=new BufferGeometry;Dt.setAttribute("position",new Float32BufferAttribute(Rt,3)),Dt.setAttribute("color",new Float32BufferAttribute(kt,3));const Bt=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(Dt,Bt),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const _v1=new Vector3,_v2=new Vector3,_v3=new Vector3;class DirectionalLightHelper extends Object3D{constructor(lt,dt,vt){super(),this.light=lt,this.matrix=lt.matrixWorld,this.matrixAutoUpdate=!1,this.color=vt,this.type="DirectionalLightHelper",dt===void 0&&(dt=1);let Tt=new BufferGeometry;Tt.setAttribute("position",new Float32BufferAttribute([-dt,dt,0,dt,dt,0,dt,-dt,0,-dt,-dt,0,-dt,dt,0],3));const Et=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line$2(Tt,Et),this.add(this.lightPlane),Tt=new BufferGeometry,Tt.setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line$2(Tt,Et),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),_v1.setFromMatrixPosition(this.light.matrixWorld),_v2.setFromMatrixPosition(this.light.target.matrixWorld),_v3.subVectors(_v2,_v1),this.lightPlane.lookAt(_v2),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_v2),this.targetLine.scale.z=_v3.length()}}const _vector$e=new Vector3,_camera=new Camera;class CameraHelper extends LineSegments{constructor(lt){const dt=new BufferGeometry,vt=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),Tt=[],Et=[],Ct={};Rt("n1","n2"),Rt("n2","n4"),Rt("n4","n3"),Rt("n3","n1"),Rt("f1","f2"),Rt("f2","f4"),Rt("f4","f3"),Rt("f3","f1"),Rt("n1","f1"),Rt("n2","f2"),Rt("n3","f3"),Rt("n4","f4"),Rt("p","n1"),Rt("p","n2"),Rt("p","n3"),Rt("p","n4"),Rt("u1","u2"),Rt("u2","u3"),Rt("u3","u1"),Rt("c","t"),Rt("p","c"),Rt("cn1","cn2"),Rt("cn3","cn4"),Rt("cf1","cf2"),Rt("cf3","cf4");function Rt(Kt,ln){kt(Kt),kt(ln)}function kt(Kt){Tt.push(0,0,0),Et.push(0,0,0),Ct[Kt]===void 0&&(Ct[Kt]=[]),Ct[Kt].push(Tt.length/3-1)}dt.setAttribute("position",new Float32BufferAttribute(Tt,3)),dt.setAttribute("color",new Float32BufferAttribute(Et,3)),super(dt,vt),this.type="CameraHelper",this.camera=lt,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=lt.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=Ct,this.update();const Dt=new Color(16755200),Bt=new Color(16711680),Ft=new Color(43775),Ut=new Color(16777215),Zt=new Color(3355443);this.setColors(Dt,Bt,Ft,Ut,Zt)}setColors(lt,dt,vt,Tt,Et){const Rt=this.geometry.getAttribute("color");Rt.setXYZ(0,lt.r,lt.g,lt.b),Rt.setXYZ(1,lt.r,lt.g,lt.b),Rt.setXYZ(2,lt.r,lt.g,lt.b),Rt.setXYZ(3,lt.r,lt.g,lt.b),Rt.setXYZ(4,lt.r,lt.g,lt.b),Rt.setXYZ(5,lt.r,lt.g,lt.b),Rt.setXYZ(6,lt.r,lt.g,lt.b),Rt.setXYZ(7,lt.r,lt.g,lt.b),Rt.setXYZ(8,lt.r,lt.g,lt.b),Rt.setXYZ(9,lt.r,lt.g,lt.b),Rt.setXYZ(10,lt.r,lt.g,lt.b),Rt.setXYZ(11,lt.r,lt.g,lt.b),Rt.setXYZ(12,lt.r,lt.g,lt.b),Rt.setXYZ(13,lt.r,lt.g,lt.b),Rt.setXYZ(14,lt.r,lt.g,lt.b),Rt.setXYZ(15,lt.r,lt.g,lt.b),Rt.setXYZ(16,lt.r,lt.g,lt.b),Rt.setXYZ(17,lt.r,lt.g,lt.b),Rt.setXYZ(18,lt.r,lt.g,lt.b),Rt.setXYZ(19,lt.r,lt.g,lt.b),Rt.setXYZ(20,lt.r,lt.g,lt.b),Rt.setXYZ(21,lt.r,lt.g,lt.b),Rt.setXYZ(22,lt.r,lt.g,lt.b),Rt.setXYZ(23,lt.r,lt.g,lt.b),Rt.setXYZ(24,dt.r,dt.g,dt.b),Rt.setXYZ(25,dt.r,dt.g,dt.b),Rt.setXYZ(26,dt.r,dt.g,dt.b),Rt.setXYZ(27,dt.r,dt.g,dt.b),Rt.setXYZ(28,dt.r,dt.g,dt.b),Rt.setXYZ(29,dt.r,dt.g,dt.b),Rt.setXYZ(30,dt.r,dt.g,dt.b),Rt.setXYZ(31,dt.r,dt.g,dt.b),Rt.setXYZ(32,vt.r,vt.g,vt.b),Rt.setXYZ(33,vt.r,vt.g,vt.b),Rt.setXYZ(34,vt.r,vt.g,vt.b),Rt.setXYZ(35,vt.r,vt.g,vt.b),Rt.setXYZ(36,vt.r,vt.g,vt.b),Rt.setXYZ(37,vt.r,vt.g,vt.b),Rt.setXYZ(38,Tt.r,Tt.g,Tt.b),Rt.setXYZ(39,Tt.r,Tt.g,Tt.b),Rt.setXYZ(40,Et.r,Et.g,Et.b),Rt.setXYZ(41,Et.r,Et.g,Et.b),Rt.setXYZ(42,Et.r,Et.g,Et.b),Rt.setXYZ(43,Et.r,Et.g,Et.b),Rt.setXYZ(44,Et.r,Et.g,Et.b),Rt.setXYZ(45,Et.r,Et.g,Et.b),Rt.setXYZ(46,Et.r,Et.g,Et.b),Rt.setXYZ(47,Et.r,Et.g,Et.b),Rt.setXYZ(48,Et.r,Et.g,Et.b),Rt.setXYZ(49,Et.r,Et.g,Et.b),Rt.needsUpdate=!0}update(){const lt=this.geometry,dt=this.pointMap,vt=1,Tt=1;_camera.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),setPoint("c",dt,lt,_camera,0,0,-1),setPoint("t",dt,lt,_camera,0,0,1),setPoint("n1",dt,lt,_camera,-vt,-Tt,-1),setPoint("n2",dt,lt,_camera,vt,-Tt,-1),setPoint("n3",dt,lt,_camera,-vt,Tt,-1),setPoint("n4",dt,lt,_camera,vt,Tt,-1),setPoint("f1",dt,lt,_camera,-vt,-Tt,1),setPoint("f2",dt,lt,_camera,vt,-Tt,1),setPoint("f3",dt,lt,_camera,-vt,Tt,1),setPoint("f4",dt,lt,_camera,vt,Tt,1),setPoint("u1",dt,lt,_camera,vt*.7,Tt*1.1,-1),setPoint("u2",dt,lt,_camera,-vt*.7,Tt*1.1,-1),setPoint("u3",dt,lt,_camera,0,Tt*2,-1),setPoint("cf1",dt,lt,_camera,-vt,0,1),setPoint("cf2",dt,lt,_camera,vt,0,1),setPoint("cf3",dt,lt,_camera,0,-Tt,1),setPoint("cf4",dt,lt,_camera,0,Tt,1),setPoint("cn1",dt,lt,_camera,-vt,0,-1),setPoint("cn2",dt,lt,_camera,vt,0,-1),setPoint("cn3",dt,lt,_camera,0,-Tt,-1),setPoint("cn4",dt,lt,_camera,0,Tt,-1),lt.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function setPoint(ft,lt,dt,vt,Tt,Et,Ct){_vector$e.set(Tt,Et,Ct).unproject(vt);const Rt=lt[ft];if(Rt!==void 0){const kt=dt.getAttribute("position");for(let Dt=0,Bt=Rt.length;Dt<Bt;Dt++)kt.setXYZ(Rt[Dt],_vector$e.x,_vector$e.y,_vector$e.z)}}const _box$4=new Box3;class BoxHelper extends LineSegments{constructor(lt,dt=16776960){const vt=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),Tt=new Float32Array(8*3),Et=new BufferGeometry;Et.setIndex(new BufferAttribute(vt,1)),Et.setAttribute("position",new BufferAttribute(Tt,3)),super(Et,new LineBasicMaterial({color:dt,toneMapped:!1})),this.object=lt,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(lt){if(lt!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&_box$4.setFromObject(this.object),_box$4.isEmpty())return;const dt=_box$4.min,vt=_box$4.max,Tt=this.geometry.attributes.position,Et=Tt.array;Et[0]=vt.x,Et[1]=vt.y,Et[2]=vt.z,Et[3]=dt.x,Et[4]=vt.y,Et[5]=vt.z,Et[6]=dt.x,Et[7]=dt.y,Et[8]=vt.z,Et[9]=vt.x,Et[10]=dt.y,Et[11]=vt.z,Et[12]=vt.x,Et[13]=vt.y,Et[14]=dt.z,Et[15]=dt.x,Et[16]=vt.y,Et[17]=dt.z,Et[18]=dt.x,Et[19]=dt.y,Et[20]=dt.z,Et[21]=vt.x,Et[22]=dt.y,Et[23]=dt.z,Tt.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(lt){return this.object=lt,this.update(),this}copy(lt,dt){return super.copy(lt,dt),this.object=lt.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Box3Helper extends LineSegments{constructor(lt,dt=16776960){const vt=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),Tt=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],Et=new BufferGeometry;Et.setIndex(new BufferAttribute(vt,1)),Et.setAttribute("position",new Float32BufferAttribute(Tt,3)),super(Et,new LineBasicMaterial({color:dt,toneMapped:!1})),this.box=lt,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(lt){const dt=this.box;dt.isEmpty()||(dt.getCenter(this.position),dt.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(lt))}dispose(){this.geometry.dispose(),this.material.dispose()}}class PlaneHelper extends Line$2{constructor(lt,dt=1,vt=16776960){const Tt=vt,Et=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],Ct=new BufferGeometry;Ct.setAttribute("position",new Float32BufferAttribute(Et,3)),Ct.computeBoundingSphere(),super(Ct,new LineBasicMaterial({color:Tt,toneMapped:!1})),this.type="PlaneHelper",this.plane=lt,this.size=dt;const Rt=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],kt=new BufferGeometry;kt.setAttribute("position",new Float32BufferAttribute(Rt,3)),kt.computeBoundingSphere(),this.add(new Mesh(kt,new MeshBasicMaterial({color:Tt,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(lt){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(lt)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const _axis=new Vector3;let _lineGeometry,_coneGeometry;class ArrowHelper extends Object3D{constructor(lt=new Vector3(0,0,1),dt=new Vector3(0,0,0),vt=1,Tt=16776960,Et=vt*.2,Ct=Et*.2){super(),this.type="ArrowHelper",_lineGeometry===void 0&&(_lineGeometry=new BufferGeometry,_lineGeometry.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),_coneGeometry=new CylinderGeometry(0,.5,1,5,1),_coneGeometry.translate(0,-.5,0)),this.position.copy(dt),this.line=new Line$2(_lineGeometry,new LineBasicMaterial({color:Tt,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(_coneGeometry,new MeshBasicMaterial({color:Tt,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(lt),this.setLength(vt,Et,Ct)}setDirection(lt){if(lt.y>.99999)this.quaternion.set(0,0,0,1);else if(lt.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set(lt.z,0,-lt.x).normalize();const dt=Math.acos(lt.y);this.quaternion.setFromAxisAngle(_axis,dt)}}setLength(lt,dt=lt*.2,vt=dt*.2){this.line.scale.set(1,Math.max(1e-4,lt-dt),1),this.line.updateMatrix(),this.cone.scale.set(vt,dt,vt),this.cone.position.y=lt,this.cone.updateMatrix()}setColor(lt){this.line.material.color.set(lt),this.cone.material.color.set(lt)}copy(lt){return super.copy(lt,!1),this.line.copy(lt.line),this.cone.copy(lt.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class AxesHelper extends LineSegments{constructor(lt=1){const dt=[0,0,0,lt,0,0,0,0,0,0,lt,0,0,0,0,0,0,lt],vt=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],Tt=new BufferGeometry;Tt.setAttribute("position",new Float32BufferAttribute(dt,3)),Tt.setAttribute("color",new Float32BufferAttribute(vt,3));const Et=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(Tt,Et),this.type="AxesHelper"}setColors(lt,dt,vt){const Tt=new Color,Et=this.geometry.attributes.color.array;return Tt.set(lt),Tt.toArray(Et,0),Tt.toArray(Et,3),Tt.set(dt),Tt.toArray(Et,6),Tt.toArray(Et,9),Tt.set(vt),Tt.toArray(Et,12),Tt.toArray(Et,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ShapePath{constructor(){this.type="ShapePath",this.color=new Color,this.subPaths=[],this.currentPath=null}moveTo(lt,dt){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(lt,dt),this}lineTo(lt,dt){return this.currentPath.lineTo(lt,dt),this}quadraticCurveTo(lt,dt,vt,Tt){return this.currentPath.quadraticCurveTo(lt,dt,vt,Tt),this}bezierCurveTo(lt,dt,vt,Tt,Et,Ct){return this.currentPath.bezierCurveTo(lt,dt,vt,Tt,Et,Ct),this}splineThru(lt){return this.currentPath.splineThru(lt),this}toShapes(lt){function dt(dn){const pn=[];for(let mn=0,On=dn.length;mn<On;mn++){const bn=dn[mn],En=new Shape;En.curves=bn.curves,pn.push(En)}return pn}function vt(dn,pn){const mn=pn.length;let On=!1;for(let bn=mn-1,En=0;En<mn;bn=En++){let An=pn[bn],Tn=pn[En],In=Tn.x-An.x,Rn=Tn.y-An.y;if(Math.abs(Rn)>Number.EPSILON){if(Rn<0&&(An=pn[En],In=-In,Tn=pn[bn],Rn=-Rn),dn.y<An.y||dn.y>Tn.y)continue;if(dn.y===An.y){if(dn.x===An.x)return!0}else{const Dn=Rn*(dn.x-An.x)-In*(dn.y-An.y);if(Dn===0)return!0;if(Dn<0)continue;On=!On}}else{if(dn.y!==An.y)continue;if(Tn.x<=dn.x&&dn.x<=An.x||An.x<=dn.x&&dn.x<=Tn.x)return!0}}return On}const Tt=ShapeUtils.isClockWise,Et=this.subPaths;if(Et.length===0)return[];let Ct,Rt,kt;const Dt=[];if(Et.length===1)return Rt=Et[0],kt=new Shape,kt.curves=Rt.curves,Dt.push(kt),Dt;let Bt=!Tt(Et[0].getPoints());Bt=lt?!Bt:Bt;const Ft=[],Ut=[];let Zt=[],Kt=0,ln;Ut[Kt]=void 0,Zt[Kt]=[];for(let dn=0,pn=Et.length;dn<pn;dn++)Rt=Et[dn],ln=Rt.getPoints(),Ct=Tt(ln),Ct=lt?!Ct:Ct,Ct?(!Bt&&Ut[Kt]&&Kt++,Ut[Kt]={s:new Shape,p:ln},Ut[Kt].s.curves=Rt.curves,Bt&&Kt++,Zt[Kt]=[]):Zt[Kt].push({h:Rt,p:ln[0]});if(!Ut[0])return dt(Et);if(Ut.length>1){let dn=!1,pn=0;for(let mn=0,On=Ut.length;mn<On;mn++)Ft[mn]=[];for(let mn=0,On=Ut.length;mn<On;mn++){const bn=Zt[mn];for(let En=0;En<bn.length;En++){const An=bn[En];let Tn=!0;for(let In=0;In<Ut.length;In++)vt(An.p,Ut[In].p)&&(mn!==In&&pn++,Tn?(Tn=!1,Ft[In].push(An)):dn=!0);Tn&&Ft[mn].push(An)}}pn>0&&dn===!1&&(Zt=Ft)}let hn;for(let dn=0,pn=Ut.length;dn<pn;dn++){kt=Ut[dn].s,Dt.push(kt),hn=Zt[dn];for(let mn=0,On=hn.length;mn<On;mn++)kt.holes.push(hn[mn].h)}return Dt}}const _tables=_generateTables();function _generateTables(){const ft=new ArrayBuffer(4),lt=new Float32Array(ft),dt=new Uint32Array(ft),vt=new Uint32Array(512),Tt=new Uint32Array(512);for(let kt=0;kt<256;++kt){const Dt=kt-127;Dt<-27?(vt[kt]=0,vt[kt|256]=32768,Tt[kt]=24,Tt[kt|256]=24):Dt<-14?(vt[kt]=1024>>-Dt-14,vt[kt|256]=1024>>-Dt-14|32768,Tt[kt]=-Dt-1,Tt[kt|256]=-Dt-1):Dt<=15?(vt[kt]=Dt+15<<10,vt[kt|256]=Dt+15<<10|32768,Tt[kt]=13,Tt[kt|256]=13):Dt<128?(vt[kt]=31744,vt[kt|256]=64512,Tt[kt]=24,Tt[kt|256]=24):(vt[kt]=31744,vt[kt|256]=64512,Tt[kt]=13,Tt[kt|256]=13)}const Et=new Uint32Array(2048),Ct=new Uint32Array(64),Rt=new Uint32Array(64);for(let kt=1;kt<1024;++kt){let Dt=kt<<13,Bt=0;for(;!(Dt&8388608);)Dt<<=1,Bt-=8388608;Dt&=-8388609,Bt+=947912704,Et[kt]=Dt|Bt}for(let kt=1024;kt<2048;++kt)Et[kt]=939524096+(kt-1024<<13);for(let kt=1;kt<31;++kt)Ct[kt]=kt<<23;Ct[31]=1199570944,Ct[32]=2147483648;for(let kt=33;kt<63;++kt)Ct[kt]=2147483648+(kt-32<<23);Ct[63]=3347054592;for(let kt=1;kt<64;++kt)kt!==32&&(Rt[kt]=1024);return{floatView:lt,uint32View:dt,baseTable:vt,shiftTable:Tt,mantissaTable:Et,exponentTable:Ct,offsetTable:Rt}}function toHalfFloat(ft){Math.abs(ft)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),ft=clamp$1(ft,-65504,65504),_tables.floatView[0]=ft;const lt=_tables.uint32View[0],dt=lt>>23&511;return _tables.baseTable[dt]+((lt&8388607)>>_tables.shiftTable[dt])}function fromHalfFloat(ft){const lt=ft>>10;return _tables.uint32View[0]=_tables.mantissaTable[_tables.offsetTable[lt]+(ft&1023)]+_tables.exponentTable[lt],_tables.floatView[0]}const DataUtils={toHalfFloat,fromHalfFloat};class BoxBufferGeometry extends BoxGeometry{constructor(lt,dt,vt,Tt,Et,Ct){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(lt,dt,vt,Tt,Et,Ct)}}class CapsuleBufferGeometry extends CapsuleGeometry{constructor(lt,dt,vt,Tt){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(lt,dt,vt,Tt)}}class CircleBufferGeometry extends CircleGeometry{constructor(lt,dt,vt,Tt){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(lt,dt,vt,Tt)}}class ConeBufferGeometry extends ConeGeometry{constructor(lt,dt,vt,Tt,Et,Ct,Rt){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(lt,dt,vt,Tt,Et,Ct,Rt)}}class CylinderBufferGeometry extends CylinderGeometry{constructor(lt,dt,vt,Tt,Et,Ct,Rt,kt){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(lt,dt,vt,Tt,Et,Ct,Rt,kt)}}class DodecahedronBufferGeometry extends DodecahedronGeometry{constructor(lt,dt){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(lt,dt)}}class ExtrudeBufferGeometry extends ExtrudeGeometry{constructor(lt,dt){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(lt,dt)}}class IcosahedronBufferGeometry extends IcosahedronGeometry{constructor(lt,dt){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(lt,dt)}}class LatheBufferGeometry extends LatheGeometry{constructor(lt,dt,vt,Tt){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(lt,dt,vt,Tt)}}class OctahedronBufferGeometry extends OctahedronGeometry{constructor(lt,dt){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(lt,dt)}}class PlaneBufferGeometry extends PlaneGeometry{constructor(lt,dt,vt,Tt){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(lt,dt,vt,Tt)}}class PolyhedronBufferGeometry extends PolyhedronGeometry{constructor(lt,dt,vt,Tt){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(lt,dt,vt,Tt)}}class RingBufferGeometry extends RingGeometry{constructor(lt,dt,vt,Tt,Et,Ct){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(lt,dt,vt,Tt,Et,Ct)}}class ShapeBufferGeometry extends ShapeGeometry{constructor(lt,dt){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(lt,dt)}}class SphereBufferGeometry extends SphereGeometry{constructor(lt,dt,vt,Tt,Et,Ct,Rt){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(lt,dt,vt,Tt,Et,Ct,Rt)}}class TetrahedronBufferGeometry extends TetrahedronGeometry{constructor(lt,dt){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(lt,dt)}}class TorusBufferGeometry extends TorusGeometry{constructor(lt,dt,vt,Tt,Et){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(lt,dt,vt,Tt,Et)}}class TorusKnotBufferGeometry extends TorusKnotGeometry{constructor(lt,dt,vt,Tt,Et,Ct){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(lt,dt,vt,Tt,Et,Ct)}}class TubeBufferGeometry extends TubeGeometry{constructor(lt,dt,vt,Tt,Et){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(lt,dt,vt,Tt,Et)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=REVISION);const r$5=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping,AddEquation,AddOperation,AdditiveAnimationBlendMode,AdditiveBlending,AlphaFormat,AlwaysDepth,AlwaysStencilFunc,AmbientLight,AmbientLightProbe,AnimationClip,AnimationLoader,AnimationMixer,AnimationObjectGroup,AnimationUtils,ArcCurve,ArrayCamera,ArrowHelper,Audio,AudioAnalyser,AudioContext,AudioListener,AudioLoader,AxesHelper,BackSide,BasicDepthPacking,BasicShadowMap,Bone,BooleanKeyframeTrack,Box2,Box3,Box3Helper,BoxBufferGeometry,BoxGeometry,BoxHelper,BufferAttribute,BufferGeometry,BufferGeometryLoader,ByteType,Cache,Camera,CameraHelper,CanvasTexture,CapsuleBufferGeometry,CapsuleGeometry,CatmullRomCurve3,CineonToneMapping,CircleBufferGeometry,CircleGeometry,ClampToEdgeWrapping,Clock,Color,ColorKeyframeTrack,ColorManagement,CompressedArrayTexture,CompressedTexture,CompressedTextureLoader,ConeBufferGeometry,ConeGeometry,CubeCamera,CubeReflectionMapping,CubeRefractionMapping,CubeTexture,CubeTextureLoader,CubeUVReflectionMapping,CubicBezierCurve,CubicBezierCurve3,CubicInterpolant,CullFaceBack,CullFaceFront,CullFaceFrontBack,CullFaceNone,Curve,CurvePath,CustomBlending,CustomToneMapping,CylinderBufferGeometry,CylinderGeometry,Cylindrical,Data3DTexture,DataArrayTexture,DataTexture,DataTextureLoader,DataUtils,DecrementStencilOp,DecrementWrapStencilOp,DefaultLoadingManager,DepthFormat,DepthStencilFormat,DepthTexture,DirectionalLight,DirectionalLightHelper,DiscreteInterpolant,DisplayP3ColorSpace,DodecahedronBufferGeometry,DodecahedronGeometry,DoubleSide,DstAlphaFactor,DstColorFactor,DynamicCopyUsage,DynamicDrawUsage,DynamicReadUsage,EdgesGeometry,EllipseCurve,EqualDepth,EqualStencilFunc,EquirectangularReflectionMapping,EquirectangularRefractionMapping,Euler,EventDispatcher,ExtrudeBufferGeometry,ExtrudeGeometry,FileLoader,Float16BufferAttribute,Float32BufferAttribute,Float64BufferAttribute,FloatType,Fog,FogExp2,FramebufferTexture,FrontSide,Frustum,GLBufferAttribute,GLSL1,GLSL3,GreaterDepth,GreaterEqualDepth,GreaterEqualStencilFunc,GreaterStencilFunc,GridHelper,Group,HalfFloatType,HemisphereLight,HemisphereLightHelper,HemisphereLightProbe,IcosahedronBufferGeometry,IcosahedronGeometry,ImageBitmapLoader,ImageLoader,ImageUtils,IncrementStencilOp,IncrementWrapStencilOp,InstancedBufferAttribute,InstancedBufferGeometry,InstancedInterleavedBuffer,InstancedMesh,Int16BufferAttribute,Int32BufferAttribute,Int8BufferAttribute,IntType,InterleavedBuffer,InterleavedBufferAttribute,Interpolant,InterpolateDiscrete,InterpolateLinear,InterpolateSmooth,InvertStencilOp,KeepStencilOp,KeyframeTrack,LOD,LatheBufferGeometry,LatheGeometry,Layers:Layers$1,LessDepth,LessEqualDepth,LessEqualStencilFunc,LessStencilFunc,Light,LightProbe,Line:Line$2,Line3,LineBasicMaterial,LineCurve,LineCurve3,LineDashedMaterial,LineLoop,LineSegments,LinearEncoding,LinearFilter,LinearInterpolant,LinearMipMapLinearFilter,LinearMipMapNearestFilter,LinearMipmapLinearFilter,LinearMipmapNearestFilter,LinearSRGBColorSpace,LinearToneMapping,Loader,LoaderUtils,LoadingManager,LoopOnce,LoopPingPong,LoopRepeat,LuminanceAlphaFormat,LuminanceFormat,MOUSE,Material,MaterialLoader,MathUtils,Matrix3,Matrix4,MaxEquation,Mesh,MeshBasicMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshLambertMaterial,MeshMatcapMaterial,MeshNormalMaterial,MeshPhongMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshToonMaterial,MinEquation,MirroredRepeatWrapping,MixOperation,MultiplyBlending,MultiplyOperation,NearestFilter,NearestMipMapLinearFilter,NearestMipMapNearestFilter,NearestMipmapLinearFilter,NearestMipmapNearestFilter,NeverDepth,NeverStencilFunc,NoBlending,NoColorSpace,NoToneMapping,NormalAnimationBlendMode,NormalBlending,NotEqualDepth,NotEqualStencilFunc,NumberKeyframeTrack,Object3D,ObjectLoader,ObjectSpaceNormalMap,OctahedronBufferGeometry,OctahedronGeometry,OneFactor,OneMinusDstAlphaFactor,OneMinusDstColorFactor,OneMinusSrcAlphaFactor,OneMinusSrcColorFactor,OrthographicCamera:OrthographicCamera$1,PCFShadowMap,PCFSoftShadowMap,PMREMGenerator,Path,PerspectiveCamera,Plane:Plane$1,PlaneBufferGeometry,PlaneGeometry,PlaneHelper,PointLight,PointLightHelper,Points,PointsMaterial,PolarGridHelper,PolyhedronBufferGeometry,PolyhedronGeometry,PositionalAudio,PropertyBinding,PropertyMixer,QuadraticBezierCurve,QuadraticBezierCurve3,Quaternion,QuaternionKeyframeTrack,QuaternionLinearInterpolant,RED_GREEN_RGTC2_Format,RED_RGTC1_Format,REVISION,RGBADepthPacking,RGBAFormat,RGBAIntegerFormat,RGBA_ASTC_10x10_Format,RGBA_ASTC_10x5_Format,RGBA_ASTC_10x6_Format,RGBA_ASTC_10x8_Format,RGBA_ASTC_12x10_Format,RGBA_ASTC_12x12_Format,RGBA_ASTC_4x4_Format,RGBA_ASTC_5x4_Format,RGBA_ASTC_5x5_Format,RGBA_ASTC_6x5_Format,RGBA_ASTC_6x6_Format,RGBA_ASTC_8x5_Format,RGBA_ASTC_8x6_Format,RGBA_ASTC_8x8_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_2BPPV1_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format,RGBA_S3TC_DXT3_Format,RGBA_S3TC_DXT5_Format,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_2BPPV1_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format,RGFormat,RGIntegerFormat,RawShaderMaterial,Ray,Raycaster,RectAreaLight,RedFormat,RedIntegerFormat,ReinhardToneMapping,RepeatWrapping,ReplaceStencilOp,ReverseSubtractEquation,RingBufferGeometry,RingGeometry,SIGNED_RED_GREEN_RGTC2_Format,SIGNED_RED_RGTC1_Format,SRGBColorSpace,Scene,ShaderChunk,ShaderLib,ShaderMaterial,ShadowMaterial,Shape,ShapeBufferGeometry,ShapeGeometry,ShapePath,ShapeUtils,ShortType,Skeleton,SkeletonHelper,SkinnedMesh,Source,Sphere:Sphere$1,SphereBufferGeometry,SphereGeometry,Spherical,SphericalHarmonics3,SplineCurve,SpotLight,SpotLightHelper,Sprite,SpriteMaterial,SrcAlphaFactor,SrcAlphaSaturateFactor,SrcColorFactor,StaticCopyUsage,StaticDrawUsage,StaticReadUsage,StereoCamera,StreamCopyUsage,StreamDrawUsage,StreamReadUsage,StringKeyframeTrack,SubtractEquation,SubtractiveBlending,TOUCH,TangentSpaceNormalMap,TetrahedronBufferGeometry,TetrahedronGeometry,Texture,TextureLoader,TorusBufferGeometry,TorusGeometry,TorusKnotBufferGeometry,TorusKnotGeometry,Triangle,TriangleFanDrawMode,TriangleStripDrawMode,TrianglesDrawMode,TubeBufferGeometry,TubeGeometry,TwoPassDoubleSide,UVMapping,Uint16BufferAttribute,Uint32BufferAttribute,Uint8BufferAttribute,Uint8ClampedBufferAttribute,Uniform,UniformsGroup,UniformsLib,UniformsUtils,UnsignedByteType,UnsignedInt248Type,UnsignedIntType,UnsignedShort4444Type,UnsignedShort5551Type,UnsignedShortType,VSMShadowMap,Vector2,Vector3,Vector4,VectorKeyframeTrack,VideoTexture,WebGL1Renderer,WebGL3DRenderTarget,WebGLArrayRenderTarget,WebGLCubeRenderTarget,WebGLMultipleRenderTargets,WebGLRenderTarget,WebGLRenderer,WebGLUtils,WireframeGeometry,WrapAroundEnding,ZeroCurvatureEnding,ZeroFactor,ZeroSlopeEnding,ZeroStencilOp,_SRGBAFormat,sRGBEncoding},Symbol.toStringTag,{value:"Module"})),FPS=60,defaultSimulatorState={robots:{},time:0,timeDilation:1,status:"STOPPED"},SIMULATOR_TIMEOUTS=[],useSimulator=create$2()(immer((set,get)=>({...defaultSimulatorState,play:()=>{set({status:"RUNNING",time:0}),get().executeSimulation(0)},pause:()=>{set({status:"PAUSED"}),get().cancelSimulation()},resume:()=>{set({status:"RUNNING"}),get().executeSimulation(get().time)},halt:()=>{set({status:"STOPPED"}),get().cancelSimulation()},step:()=>{const{status:ft,time:lt,timeDilation:dt,robots:vt}=get();if(ft!=="RUNNING")return;const Tt=1/(FPS*dt),Et=lt+Tt,Ct={...vt};Object.keys(Ct).forEach(Rt=>{var Ut;const kt=Ct[Rt];if(kt.trajectory===null)return;const Dt=new Vector3,Bt=kt.timeAlongTrajectory+Tt/kt.trajectoryDuration;kt.trajectory.map((Zt,Kt)=>{Dt.addScaledVector(Zt,Math.pow(Bt,Kt))});const Ft=Dt.clone().sub(kt.pos);Ct[Rt]={...Ct[Rt],pos:Dt,boundingBox:(Ut=kt.boundingBox)==null?void 0:Ut.clone().translate(Ft),timeAlongTrajectory:Bt},Ct[Rt].timeAlongTrajectory>=1&&(Ct[Rt].trajectory=null,Ct[Rt].timeAlongTrajectory=0)}),set({robots:Ct,time:Et})},setRobots:ft=>{const lt={};Object.values(ft).forEach(dt=>{lt[dt.id]={id:dt.id,boundingBox:void 0,pos:new Vector3(...dt.startingPosition),vel:new Vector3,acc:new Vector3,color:new Color(255,255,255),timeAlongTrajectory:0,trajectory:null,trajectoryDuration:0,trajectories:[]}}),set({robots:lt})},updateRobotBoundingBox:(ft,lt)=>{set(dt=>{dt.robots[ft].boundingBox=lt})},checkCollisions:ft=>{const lt=get().robots[ft],dt=Object.entries(get().robots);return lt.boundingBox===void 0?!1:dt.some(([vt,Tt])=>(vt!==ft&&Tt.boundingBox&&lt.boundingBox&&lt.boundingBox.intersectsBox(Tt.boundingBox)&&(console.log("collision between",ft,"and",vt),console.log("robotId position",lt.pos,"and other robot position",Tt.pos)),vt!==ft&&Tt.boundingBox&&lt.boundingBox&&lt.boundingBox.intersectsBox(Tt.boundingBox)))},updateTrajectory:(ft,lt,dt)=>{set(vt=>{vt.robots[ft].timeAlongTrajectory=0,vt.robots[ft].trajectory=lt,vt.robots[ft].trajectoryDuration=dt})},robotGoTo:(ft,lt,dt,vt)=>{const Tt=get().robots[ft],Et=Tt.pos.clone(),Ct=Tt.vel.clone(),Rt=Tt.acc.clone().multiplyScalar(.5),kt=new Vector3,Dt=Tt.acc.clone().multiplyScalar(2).addScaledVector(vt,-1).addScaledVector(Tt.vel,8).addScaledVector(dt,6).addScaledVector(Tt.pos,14).addScaledVector(lt,-14).multiplyScalar(-2.5),Bt=Tt.acc.clone().multiplyScalar(10).addScaledVector(vt,-7).addScaledVector(Tt.vel,45).addScaledVector(dt,39).addScaledVector(Tt.pos,84).addScaledVector(lt,-84),Ft=Tt.acc.clone().multiplyScalar(-15).addScaledVector(vt,13).addScaledVector(Tt.vel,-72).addScaledVector(dt,-68).addScaledVector(Tt.pos,-140).addScaledVector(lt,140).multiplyScalar(.5),Ut=Tt.acc.clone().addScaledVector(vt,-1).addScaledVector(Tt.vel,5).addScaledVector(dt,5).addScaledVector(Tt.pos,10).addScaledVector(lt,-10).multiplyScalar(2);return[Et,Ct,Rt,kt,Dt,Bt,Ft,Ut]},executeSimulation:startTime=>{const timeline=useRobartState.getState().timelineState,blocks=useRobartState.getState().blocks;console.log("execute",timeline.groups),Object.values(timeline.groups).forEach(group=>{Object.keys(group.robots),Object.values(group.items).forEach(timelineItem=>{console.log("item time",timelineItem.startTime);const offset=timelineItem.startTime-startTime;if(offset<0)return;const timeout=setTimeout(()=>{eval(blocks[timelineItem.blockId].javaScript)},timeline.scale*offset*1e3);SIMULATOR_TIMEOUTS.push(timeout)})})},cancelSimulation:()=>{for(SIMULATOR_TIMEOUTS.map(ft=>clearInterval(ft));SIMULATOR_TIMEOUTS.length>0;)SIMULATOR_TIMEOUTS.pop()}}))),defaultRobartState={blocks:{},projectName:"New Robart Project",timelineState:{scale:1,mode:"ADD",groups:{group1:{id:"group1",name:"Group 1",items:{},robots:{}},group2:{id:"group2",name:"Group 2",items:{},robots:{}},group3:{id:"group3",name:"Group 3",items:{},robots:{}},group4:{id:"group4",name:"Group 4",items:{},robots:{}},group5:{id:"group5",name:"Group 5",items:{},robots:{}},group6:{id:"group6",name:"Group 6",items:{},robots:{}},group7:{id:"group7",name:"Group 7",items:{},robots:{}},group8:{id:"group8",name:"Group 8",items:{},robots:{}},group9:{id:"group9",name:"Group 9",items:{},robots:{}}}},editingBlockId:void 0,version:ROBART_VERSION,robots:{}},useRobartState=create$2()(immer(subscribeWithSelector(persist((set,get)=>({...defaultRobartState,loadProject:ft=>{const lt=loadProjectFromFile(ft);set(lt)},saveProject:ft=>{const lt={blocks:get().blocks,editingBlockId:void 0,projectName:get().projectName,timelineState:get().timelineState,version:ROBART_VERSION,robots:get().robots};saveProjectToFile(lt,ft)},exportToROS:ft=>{const lt={blocks:get().blocks,editingBlockId:void 0,projectName:get().projectName,timelineState:get().timelineState,version:ROBART_VERSION,robots:get().robots};exportROS(lt)},resetProject:()=>{set(defaultRobartState)},setProjectName:ft=>set({projectName:ft}),saveGroup:(ft,lt)=>{},createGroup:ft=>{const lt=uuid$2(),dt={id:lt,name:ft,items:{},robots:{}};return set(vt=>{vt.timelineState.groups[lt]=dt}),lt},addBlockToTimeline:(groupId,blockId,startTime,isTrajectory)=>{Object.keys(get().timelineState.groups[groupId].robots);const state={blocks:get().blocks,editingBlockId:void 0,projectName:get().projectName,timelineState:get().timelineState,version:ROBART_VERSION,robots:get().robots};Object.keys(get().timelineState.groups[groupId].items),state.timelineState.groups[groupId].items;var duration=0;eval(get().blocks[blockId].javaScript);const newItem={id:uuid$2(),groupId,blockId,startTime,isTrajectory,duration},oldItems={...get().timelineState.groups[groupId].items};oldItems[newItem.id]=newItem,set(ft=>{ft.timelineState.groups[groupId].items=oldItems})},updateBlockInTimeline:(ft,lt,dt)=>{const vt={...get().timelineState.groups[ft].items[lt],startTime:dt},Tt={...get().timelineState.groups[ft].items};Tt[vt.id]=vt,set(Et=>{Et.timelineState.groups[ft].items=Tt})},saveBlock:(ft,lt)=>{set(dt=>{dt.blocks[ft]={...dt.blocks[ft],...lt}})},removeBlock:ft=>{var Tt;const lt={...get().blocks};delete lt[ft],Object.values(get().timelineState.groups).map(Et=>Object.values(Et.items).filter(Ct=>Ct.blockId===ft)).flat().forEach(Et=>get().removeTimelineItem(Et.groupId,Et.id));const vt=(Tt=Object.values(lt)[Object.keys(lt).length-1])==null?void 0:Tt.id;set({blocks:lt,editingBlockId:vt})},renameBlock:ft=>set(lt=>{lt.blocks[lt.editingBlockId].name=ft}),createBlock:ft=>{const lt={id:uuid$2(),name:ft,xml:"",python:"",javaScript:"",duration:3};return set(dt=>{dt.blocks[lt.id]=lt}),lt.id},copyBlock:ft=>{const lt={...get().blocks[ft],id:uuid$2(),name:`Copy of ${get().blocks[ft].name}`};return set(dt=>{dt.blocks[lt.id]=lt}),lt.id},setEditingBlock:ft=>{const lt=get().editingBlockId;set({editingBlockId:void 0}),ft!=lt&&set({editingBlockId:ft})},addRobotToGroup:(ft,lt)=>{set(dt=>{dt.timelineState.groups[ft].robots[lt]=dt.robots[lt]})},removeRobotFromGroup:(ft,lt)=>{set(dt=>{delete dt.timelineState.groups[ft].robots[lt]})},createRobot:()=>{const ft=uuid$2(),lt=Object.keys(get().robots).length;return set(dt=>{dt.robots[ft]={id:ft,name:`CF ${lt}`,type:"crazyflie",startingPosition:[0,0,0]}}),ft},saveRobot:(ft,lt)=>{set(dt=>{dt.robots[ft]={...dt.robots[ft],...lt}})},deleteRobot:ft=>{const lt={...get().robots};delete lt[ft],set({robots:lt})},setTimelineMode:ft=>{set({timelineState:{...get().timelineState,mode:ft}})},removeTimelineItem:(ft,lt)=>{const dt={...get().timelineState.groups[ft].items};delete dt[lt],set(vt=>{vt.timelineState.groups[ft].items=dt})}}),{storage:createJSONStorage(()=>sessionStorage),name:"robartState"}))));useRobartState.subscribe(ft=>ft.robots,ft=>{useSimulator.getState().setRobots(ft)});function r$4(ft){var lt,dt,vt="";if(typeof ft=="string"||typeof ft=="number")vt+=ft;else if(typeof ft=="object")if(Array.isArray(ft))for(lt=0;lt<ft.length;lt++)ft[lt]&&(dt=r$4(ft[lt]))&&(vt&&(vt+=" "),vt+=dt);else for(lt in ft)ft[lt]&&(vt&&(vt+=" "),vt+=lt);return vt}function clsx(){for(var ft,lt,dt=0,vt="";dt<arguments.length;)(ft=arguments[dt++])&&(lt=r$4(ft))&&(vt&&(vt+=" "),vt+=lt);return vt}const RenamableText=({text:ft,updateText:lt,className:dt})=>{const[vt,Tt]=reactExports.useState(!1),[Et,Ct]=reactExports.useState(""),[Rt,kt]=reactExports.useState(0),Dt=reactExports.useRef(null);reactExports.useEffect(()=>{var Ft;Dt.current!==null&&kt((Ft=Dt.current)==null?void 0:Ft.offsetWidth)},[Et]);const Bt="h-min w-fit rounded-md border-2 border-white hover:border-black";return vt?jsxs("form",{onSubmit:Ft=>{Ft.preventDefault(),lt(Et),Tt(!1)},children:[jsx("span",{className:clsx(Bt,dt,"absolute -z-40 whitespace-pre"),ref:Dt,children:Et}),jsx("input",{className:clsx(Bt,dt),value:Et,style:{width:`calc(${Rt}px + 1ch)`},onChange:Ft=>Ct(Ft.target.value),onBlur:()=>Tt(!1),autoFocus:!0}),jsx("input",{type:"submit",className:"hidden"})]}):jsx("h2",{className:clsx(Bt,dt),onClick:()=>{Ct(ft),Tt(!0)},children:ft})},BlockEditorHeader=()=>{const ft=useRobartState(vt=>vt.editingBlockId),lt=useRobartState(vt=>vt.blocks[ft??""]),dt=useRobartState(vt=>vt.renameBlock);return lt?jsx("div",{className:"m-2 flex items-center gap-2",children:jsx(RenamableText,{text:lt.name,className:"text-lg font-bold",updateText:vt=>{dt(vt!==""?vt:"New Block")}})}):jsx("div",{className:"m-2",children:"No Block selected."})},BlockEditorPanel=()=>{const ft=reactExports.useRef(null),[lt,dt]=reactExports.useState(void 0),vt=useRobartState(Rt=>Rt.editingBlockId),Tt=useRobartState(Rt=>Rt.saveBlock),{workspace:Et,xml:Ct}=useBlocklyWorkspace({toolboxConfiguration:blocklyToolboxConfiguration,initialXml:"",workspaceConfiguration:{grid:{spacing:20,length:3,colour:"#ccc",snap:!0}},onWorkspaceChange:Rt=>{const kt=pythonExports.pythonGenerator.workspaceToCode(Rt),Dt=javascriptExports.javascriptGenerator.workspaceToCode(Rt);lt&&Ct&&Tt(lt,{xml:Ct,python:kt,javaScript:Dt})},ref:ft});return reactExports.useEffect(()=>{if(window.dispatchEvent(new Event("resize")),dt(vt),vt){Et==null||Et.setVisible(!0);const kt=useRobartState.getState().blocks[vt];if(kt.xml&&Et){var Rt=Blockly.Xml.textToDom(kt.xml);Blockly.Xml.clearWorkspaceAndLoadFromXml(Rt,Et)}else!kt.xml&&Et&&Et.clear()}else Et&&(Et.setVisible(!1),Et.clear())},[vt]),jsxs("div",{className:"flex h-full w-full flex-col",children:[jsx(BlockEditorHeader,{}),jsx("div",{ref:ft,className:"w-full flex-grow"})]})};function ownKeys$4(ft,lt){var dt=Object.keys(ft);if(Object.getOwnPropertySymbols){var vt=Object.getOwnPropertySymbols(ft);lt&&(vt=vt.filter(function(Tt){return Object.getOwnPropertyDescriptor(ft,Tt).enumerable})),dt.push.apply(dt,vt)}return dt}function _objectSpread2$2(ft){for(var lt=1;lt<arguments.length;lt++){var dt=arguments[lt]!=null?arguments[lt]:{};lt%2?ownKeys$4(Object(dt),!0).forEach(function(vt){_defineProperty$5(ft,vt,dt[vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ft,Object.getOwnPropertyDescriptors(dt)):ownKeys$4(Object(dt)).forEach(function(vt){Object.defineProperty(ft,vt,Object.getOwnPropertyDescriptor(dt,vt))})}return ft}function _typeof$2(ft){"@babel/helpers - typeof";return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(lt){return typeof lt}:function(lt){return lt&&typeof Symbol=="function"&&lt.constructor===Symbol&&lt!==Symbol.prototype?"symbol":typeof lt},_typeof$2(ft)}function _classCallCheck(ft,lt){if(!(ft instanceof lt))throw new TypeError("Cannot call a class as a function")}function _defineProperties(ft,lt){for(var dt=0;dt<lt.length;dt++){var vt=lt[dt];vt.enumerable=vt.enumerable||!1,vt.configurable=!0,"value"in vt&&(vt.writable=!0),Object.defineProperty(ft,vt.key,vt)}}function _createClass(ft,lt,dt){return lt&&_defineProperties(ft.prototype,lt),dt&&_defineProperties(ft,dt),Object.defineProperty(ft,"prototype",{writable:!1}),ft}function _defineProperty$5(ft,lt,dt){return lt in ft?Object.defineProperty(ft,lt,{value:dt,enumerable:!0,configurable:!0,writable:!0}):ft[lt]=dt,ft}function _slicedToArray$2(ft,lt){return _arrayWithHoles$2(ft)||_iterableToArrayLimit$2(ft,lt)||_unsupportedIterableToArray$3(ft,lt)||_nonIterableRest$2()}function _toConsumableArray$3(ft){return _arrayWithoutHoles$3(ft)||_iterableToArray$3(ft)||_unsupportedIterableToArray$3(ft)||_nonIterableSpread$3()}function _arrayWithoutHoles$3(ft){if(Array.isArray(ft))return _arrayLikeToArray$3(ft)}function _arrayWithHoles$2(ft){if(Array.isArray(ft))return ft}function _iterableToArray$3(ft){if(typeof Symbol<"u"&&ft[Symbol.iterator]!=null||ft["@@iterator"]!=null)return Array.from(ft)}function _iterableToArrayLimit$2(ft,lt){var dt=ft==null?null:typeof Symbol<"u"&&ft[Symbol.iterator]||ft["@@iterator"];if(dt!=null){var vt=[],Tt=!0,Et=!1,Ct,Rt;try{for(dt=dt.call(ft);!(Tt=(Ct=dt.next()).done)&&(vt.push(Ct.value),!(lt&&vt.length===lt));Tt=!0);}catch(kt){Et=!0,Rt=kt}finally{try{!Tt&&dt.return!=null&&dt.return()}finally{if(Et)throw Rt}}return vt}}function _unsupportedIterableToArray$3(ft,lt){if(ft){if(typeof ft=="string")return _arrayLikeToArray$3(ft,lt);var dt=Object.prototype.toString.call(ft).slice(8,-1);if(dt==="Object"&&ft.constructor&&(dt=ft.constructor.name),dt==="Map"||dt==="Set")return Array.from(ft);if(dt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(dt))return _arrayLikeToArray$3(ft,lt)}}function _arrayLikeToArray$3(ft,lt){(lt==null||lt>ft.length)&&(lt=ft.length);for(var dt=0,vt=new Array(lt);dt<lt;dt++)vt[dt]=ft[dt];return vt}function _nonIterableSpread$3(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _nonIterableRest$2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var noop$2=function ft(){},_WINDOW={},_DOCUMENT={},_MUTATION_OBSERVER=null,_PERFORMANCE={mark:noop$2,measure:noop$2};try{typeof window<"u"&&(_WINDOW=window),typeof document<"u"&&(_DOCUMENT=document),typeof MutationObserver<"u"&&(_MUTATION_OBSERVER=MutationObserver),typeof performance<"u"&&(_PERFORMANCE=performance)}catch(ft){}var _ref=_WINDOW.navigator||{},_ref$userAgent=_ref.userAgent,userAgent=_ref$userAgent===void 0?"":_ref$userAgent,WINDOW=_WINDOW,DOCUMENT=_DOCUMENT,MUTATION_OBSERVER=_MUTATION_OBSERVER,PERFORMANCE=_PERFORMANCE;WINDOW.document;var IS_DOM=!!DOCUMENT.documentElement&&!!DOCUMENT.head&&typeof DOCUMENT.addEventListener=="function"&&typeof DOCUMENT.createElement=="function",IS_IE=~userAgent.indexOf("MSIE")||~userAgent.indexOf("Trident/"),_familyProxy,_familyProxy2,_familyProxy3,_familyProxy4,_familyProxy5,NAMESPACE_IDENTIFIER="___FONT_AWESOME___",UNITS_IN_GRID=16,DEFAULT_CSS_PREFIX="fa",DEFAULT_REPLACEMENT_CLASS="svg-inline--fa",DATA_FA_I2SVG="data-fa-i2svg",DATA_FA_PSEUDO_ELEMENT="data-fa-pseudo-element",DATA_FA_PSEUDO_ELEMENT_PENDING="data-fa-pseudo-element-pending",DATA_PREFIX="data-prefix",DATA_ICON="data-icon",HTML_CLASS_I2SVG_BASE_CLASS="fontawesome-i2svg",MUTATION_APPROACH_ASYNC="async",TAGNAMES_TO_SKIP_FOR_PSEUDOELEMENTS=["HTML","HEAD","STYLE","SCRIPT"],PRODUCTION$1=function(){try{return!0}catch{return!1}}(),FAMILY_CLASSIC="classic",FAMILY_SHARP="sharp",FAMILIES=[FAMILY_CLASSIC,FAMILY_SHARP];function familyProxy(ft){return new Proxy(ft,{get:function(dt,vt){return vt in dt?dt[vt]:dt[FAMILY_CLASSIC]}})}var PREFIX_TO_STYLE=familyProxy((_familyProxy={},_defineProperty$5(_familyProxy,FAMILY_CLASSIC,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit"}),_defineProperty$5(_familyProxy,FAMILY_SHARP,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular"}),_familyProxy)),STYLE_TO_PREFIX=familyProxy((_familyProxy2={},_defineProperty$5(_familyProxy2,FAMILY_CLASSIC,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),_defineProperty$5(_familyProxy2,FAMILY_SHARP,{solid:"fass",regular:"fasr"}),_familyProxy2)),PREFIX_TO_LONG_STYLE=familyProxy((_familyProxy3={},_defineProperty$5(_familyProxy3,FAMILY_CLASSIC,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),_defineProperty$5(_familyProxy3,FAMILY_SHARP,{fass:"fa-solid",fasr:"fa-regular"}),_familyProxy3)),LONG_STYLE_TO_PREFIX=familyProxy((_familyProxy4={},_defineProperty$5(_familyProxy4,FAMILY_CLASSIC,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),_defineProperty$5(_familyProxy4,FAMILY_SHARP,{"fa-solid":"fass","fa-regular":"fasr"}),_familyProxy4)),ICON_SELECTION_SYNTAX_PATTERN=/fa(s|r|l|t|d|b|k|ss|sr)?[\-\ ]/,LAYERS_TEXT_CLASSNAME="fa-layers-text",FONT_FAMILY_PATTERN=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,FONT_WEIGHT_TO_PREFIX=familyProxy((_familyProxy5={},_defineProperty$5(_familyProxy5,FAMILY_CLASSIC,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),_defineProperty$5(_familyProxy5,FAMILY_SHARP,{900:"fass",400:"fasr"}),_familyProxy5)),oneToTen=[1,2,3,4,5,6,7,8,9,10],oneToTwenty=oneToTen.concat([11,12,13,14,15,16,17,18,19,20]),ATTRIBUTES_WATCHED_FOR_MUTATION=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],DUOTONE_CLASSES={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},prefixes=new Set;Object.keys(STYLE_TO_PREFIX[FAMILY_CLASSIC]).map(prefixes.add.bind(prefixes));Object.keys(STYLE_TO_PREFIX[FAMILY_SHARP]).map(prefixes.add.bind(prefixes));var RESERVED_CLASSES=[].concat(FAMILIES,_toConsumableArray$3(prefixes),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",DUOTONE_CLASSES.GROUP,DUOTONE_CLASSES.SWAP_OPACITY,DUOTONE_CLASSES.PRIMARY,DUOTONE_CLASSES.SECONDARY]).concat(oneToTen.map(function(ft){return"".concat(ft,"x")})).concat(oneToTwenty.map(function(ft){return"w-".concat(ft)})),initial=WINDOW.FontAwesomeConfig||{};function getAttrConfig(ft){var lt=DOCUMENT.querySelector("script["+ft+"]");if(lt)return lt.getAttribute(ft)}function coerce(ft){return ft===""?!0:ft==="false"?!1:ft==="true"?!0:ft}if(DOCUMENT&&typeof DOCUMENT.querySelector=="function"){var attrs=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];attrs.forEach(function(ft){var lt=_slicedToArray$2(ft,2),dt=lt[0],vt=lt[1],Tt=coerce(getAttrConfig(dt));Tt!=null&&(initial[vt]=Tt)})}var _default$1={styleDefault:"solid",familyDefault:"classic",cssPrefix:DEFAULT_CSS_PREFIX,replacementClass:DEFAULT_REPLACEMENT_CLASS,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};initial.familyPrefix&&(initial.cssPrefix=initial.familyPrefix);var _config=_objectSpread2$2(_objectSpread2$2({},_default$1),initial);_config.autoReplaceSvg||(_config.observeMutations=!1);var config$1={};Object.keys(_default$1).forEach(function(ft){Object.defineProperty(config$1,ft,{enumerable:!0,set:function(dt){_config[ft]=dt,_onChangeCb.forEach(function(vt){return vt(config$1)})},get:function(){return _config[ft]}})});Object.defineProperty(config$1,"familyPrefix",{enumerable:!0,set:function ft(lt){_config.cssPrefix=lt,_onChangeCb.forEach(function(dt){return dt(config$1)})},get:function ft(){return _config.cssPrefix}});WINDOW.FontAwesomeConfig=config$1;var _onChangeCb=[];function onChange(ft){return _onChangeCb.push(ft),function(){_onChangeCb.splice(_onChangeCb.indexOf(ft),1)}}var d$5=UNITS_IN_GRID,meaninglessTransform={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function insertCss(ft){if(!(!ft||!IS_DOM)){var lt=DOCUMENT.createElement("style");lt.setAttribute("type","text/css"),lt.innerHTML=ft;for(var dt=DOCUMENT.head.childNodes,vt=null,Tt=dt.length-1;Tt>-1;Tt--){var Et=dt[Tt],Ct=(Et.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(Ct)>-1&&(vt=Et)}return DOCUMENT.head.insertBefore(lt,vt),ft}}var idPool="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function nextUniqueId(){for(var ft=12,lt="";ft-- >0;)lt+=idPool[Math.random()*62|0];return lt}function toArray(ft){for(var lt=[],dt=(ft||[]).length>>>0;dt--;)lt[dt]=ft[dt];return lt}function classArray(ft){return ft.classList?toArray(ft.classList):(ft.getAttribute("class")||"").split(" ").filter(function(lt){return lt})}function htmlEscape(ft){return"".concat(ft).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function joinAttributes(ft){return Object.keys(ft||{}).reduce(function(lt,dt){return lt+"".concat(dt,'="').concat(htmlEscape(ft[dt]),'" ')},"").trim()}function joinStyles(ft){return Object.keys(ft||{}).reduce(function(lt,dt){return lt+"".concat(dt,": ").concat(ft[dt].trim(),";")},"")}function transformIsMeaningful(ft){return ft.size!==meaninglessTransform.size||ft.x!==meaninglessTransform.x||ft.y!==meaninglessTransform.y||ft.rotate!==meaninglessTransform.rotate||ft.flipX||ft.flipY}function transformForSvg(ft){var lt=ft.transform,dt=ft.containerWidth,vt=ft.iconWidth,Tt={transform:"translate(".concat(dt/2," 256)")},Et="translate(".concat(lt.x*32,", ").concat(lt.y*32,") "),Ct="scale(".concat(lt.size/16*(lt.flipX?-1:1),", ").concat(lt.size/16*(lt.flipY?-1:1),") "),Rt="rotate(".concat(lt.rotate," 0 0)"),kt={transform:"".concat(Et," ").concat(Ct," ").concat(Rt)},Dt={transform:"translate(".concat(vt/2*-1," -256)")};return{outer:Tt,inner:kt,path:Dt}}function transformForCss(ft){var lt=ft.transform,dt=ft.width,vt=dt===void 0?UNITS_IN_GRID:dt,Tt=ft.height,Et=Tt===void 0?UNITS_IN_GRID:Tt,Ct=ft.startCentered,Rt=Ct===void 0?!1:Ct,kt="";return Rt&&IS_IE?kt+="translate(".concat(lt.x/d$5-vt/2,"em, ").concat(lt.y/d$5-Et/2,"em) "):Rt?kt+="translate(calc(-50% + ".concat(lt.x/d$5,"em), calc(-50% + ").concat(lt.y/d$5,"em)) "):kt+="translate(".concat(lt.x/d$5,"em, ").concat(lt.y/d$5,"em) "),kt+="scale(".concat(lt.size/d$5*(lt.flipX?-1:1),", ").concat(lt.size/d$5*(lt.flipY?-1:1),") "),kt+="rotate(".concat(lt.rotate,"deg) "),kt}var baseStyles=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function css(){var ft=DEFAULT_CSS_PREFIX,lt=DEFAULT_REPLACEMENT_CLASS,dt=config$1.cssPrefix,vt=config$1.replacementClass,Tt=baseStyles;if(dt!==ft||vt!==lt){var Et=new RegExp("\\.".concat(ft,"\\-"),"g"),Ct=new RegExp("\\--".concat(ft,"\\-"),"g"),Rt=new RegExp("\\.".concat(lt),"g");Tt=Tt.replace(Et,".".concat(dt,"-")).replace(Ct,"--".concat(dt,"-")).replace(Rt,".".concat(vt))}return Tt}var _cssInserted=!1;function ensureCss(){config$1.autoAddCss&&!_cssInserted&&(insertCss(css()),_cssInserted=!0)}var InjectCSS={mixout:function ft(){return{dom:{css,insertCss:ensureCss}}},hooks:function ft(){return{beforeDOMElementCreation:function(){ensureCss()},beforeI2svg:function(){ensureCss()}}}},w$3=WINDOW||{};w$3[NAMESPACE_IDENTIFIER]||(w$3[NAMESPACE_IDENTIFIER]={});w$3[NAMESPACE_IDENTIFIER].styles||(w$3[NAMESPACE_IDENTIFIER].styles={});w$3[NAMESPACE_IDENTIFIER].hooks||(w$3[NAMESPACE_IDENTIFIER].hooks={});w$3[NAMESPACE_IDENTIFIER].shims||(w$3[NAMESPACE_IDENTIFIER].shims=[]);var namespace=w$3[NAMESPACE_IDENTIFIER],functions=[],listener=function ft(){DOCUMENT.removeEventListener("DOMContentLoaded",ft),loaded=1,functions.map(function(lt){return lt()})},loaded=!1;IS_DOM&&(loaded=(DOCUMENT.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(DOCUMENT.readyState),loaded||DOCUMENT.addEventListener("DOMContentLoaded",listener));function domready(ft){IS_DOM&&(loaded?setTimeout(ft,0):functions.push(ft))}function toHtml(ft){var lt=ft.tag,dt=ft.attributes,vt=dt===void 0?{}:dt,Tt=ft.children,Et=Tt===void 0?[]:Tt;return typeof ft=="string"?htmlEscape(ft):"<".concat(lt," ").concat(joinAttributes(vt),">").concat(Et.map(toHtml).join(""),"</").concat(lt,">")}function iconFromMapping(ft,lt,dt){if(ft&&ft[lt]&&ft[lt][dt])return{prefix:lt,iconName:dt,icon:ft[lt][dt]}}var bindInternal4=function ft(lt,dt){return function(vt,Tt,Et,Ct){return lt.call(dt,vt,Tt,Et,Ct)}},reduce=function ft(lt,dt,vt,Tt){var Et=Object.keys(lt),Ct=Et.length,Rt=Tt!==void 0?bindInternal4(dt,Tt):dt,kt,Dt,Bt;for(vt===void 0?(kt=1,Bt=lt[Et[0]]):(kt=0,Bt=vt);kt<Ct;kt++)Dt=Et[kt],Bt=Rt(Bt,lt[Dt],Dt,lt);return Bt};function ucs2decode(ft){for(var lt=[],dt=0,vt=ft.length;dt<vt;){var Tt=ft.charCodeAt(dt++);if(Tt>=55296&&Tt<=56319&&dt<vt){var Et=ft.charCodeAt(dt++);(Et&64512)==56320?lt.push(((Tt&1023)<<10)+(Et&1023)+65536):(lt.push(Tt),dt--)}else lt.push(Tt)}return lt}function toHex(ft){var lt=ucs2decode(ft);return lt.length===1?lt[0].toString(16):null}function codePointAt$1(ft,lt){var dt=ft.length,vt=ft.charCodeAt(lt),Tt;return vt>=55296&&vt<=56319&&dt>lt+1&&(Tt=ft.charCodeAt(lt+1),Tt>=56320&&Tt<=57343)?(vt-55296)*1024+Tt-56320+65536:vt}function normalizeIcons(ft){return Object.keys(ft).reduce(function(lt,dt){var vt=ft[dt],Tt=!!vt.icon;return Tt?lt[vt.iconName]=vt.icon:lt[dt]=vt,lt},{})}function defineIcons(ft,lt){var dt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},vt=dt.skipHooks,Tt=vt===void 0?!1:vt,Et=normalizeIcons(lt);typeof namespace.hooks.addPack=="function"&&!Tt?namespace.hooks.addPack(ft,normalizeIcons(lt)):namespace.styles[ft]=_objectSpread2$2(_objectSpread2$2({},namespace.styles[ft]||{}),Et),ft==="fas"&&defineIcons("fa",lt)}var _LONG_STYLE,_PREFIXES,_PREFIXES_FOR_FAMILY,styles=namespace.styles,shims=namespace.shims,LONG_STYLE=(_LONG_STYLE={},_defineProperty$5(_LONG_STYLE,FAMILY_CLASSIC,Object.values(PREFIX_TO_LONG_STYLE[FAMILY_CLASSIC])),_defineProperty$5(_LONG_STYLE,FAMILY_SHARP,Object.values(PREFIX_TO_LONG_STYLE[FAMILY_SHARP])),_LONG_STYLE),_defaultUsablePrefix=null,_byUnicode={},_byLigature={},_byOldName={},_byOldUnicode={},_byAlias={},PREFIXES=(_PREFIXES={},_defineProperty$5(_PREFIXES,FAMILY_CLASSIC,Object.keys(PREFIX_TO_STYLE[FAMILY_CLASSIC])),_defineProperty$5(_PREFIXES,FAMILY_SHARP,Object.keys(PREFIX_TO_STYLE[FAMILY_SHARP])),_PREFIXES);function isReserved(ft){return~RESERVED_CLASSES.indexOf(ft)}function getIconName(ft,lt){var dt=lt.split("-"),vt=dt[0],Tt=dt.slice(1).join("-");return vt===ft&&Tt!==""&&!isReserved(Tt)?Tt:null}var build=function ft(){var lt=function(Et){return reduce(styles,function(Ct,Rt,kt){return Ct[kt]=reduce(Rt,Et,{}),Ct},{})};_byUnicode=lt(function(Tt,Et,Ct){if(Et[3]&&(Tt[Et[3]]=Ct),Et[2]){var Rt=Et[2].filter(function(kt){return typeof kt=="number"});Rt.forEach(function(kt){Tt[kt.toString(16)]=Ct})}return Tt}),_byLigature=lt(function(Tt,Et,Ct){if(Tt[Ct]=Ct,Et[2]){var Rt=Et[2].filter(function(kt){return typeof kt=="string"});Rt.forEach(function(kt){Tt[kt]=Ct})}return Tt}),_byAlias=lt(function(Tt,Et,Ct){var Rt=Et[2];return Tt[Ct]=Ct,Rt.forEach(function(kt){Tt[kt]=Ct}),Tt});var dt="far"in styles||config$1.autoFetchSvg,vt=reduce(shims,function(Tt,Et){var Ct=Et[0],Rt=Et[1],kt=Et[2];return Rt==="far"&&!dt&&(Rt="fas"),typeof Ct=="string"&&(Tt.names[Ct]={prefix:Rt,iconName:kt}),typeof Ct=="number"&&(Tt.unicodes[Ct.toString(16)]={prefix:Rt,iconName:kt}),Tt},{names:{},unicodes:{}});_byOldName=vt.names,_byOldUnicode=vt.unicodes,_defaultUsablePrefix=getCanonicalPrefix(config$1.styleDefault,{family:config$1.familyDefault})};onChange(function(ft){_defaultUsablePrefix=getCanonicalPrefix(ft.styleDefault,{family:config$1.familyDefault})});build();function byUnicode(ft,lt){return(_byUnicode[ft]||{})[lt]}function byLigature(ft,lt){return(_byLigature[ft]||{})[lt]}function byAlias(ft,lt){return(_byAlias[ft]||{})[lt]}function byOldName(ft){return _byOldName[ft]||{prefix:null,iconName:null}}function byOldUnicode(ft){var lt=_byOldUnicode[ft],dt=byUnicode("fas",ft);return lt||(dt?{prefix:"fas",iconName:dt}:null)||{prefix:null,iconName:null}}function getDefaultUsablePrefix(){return _defaultUsablePrefix}var emptyCanonicalIcon=function ft(){return{prefix:null,iconName:null,rest:[]}};function getCanonicalPrefix(ft){var lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},dt=lt.family,vt=dt===void 0?FAMILY_CLASSIC:dt,Tt=PREFIX_TO_STYLE[vt][ft],Et=STYLE_TO_PREFIX[vt][ft]||STYLE_TO_PREFIX[vt][Tt],Ct=ft in namespace.styles?ft:null;return Et||Ct||null}var PREFIXES_FOR_FAMILY=(_PREFIXES_FOR_FAMILY={},_defineProperty$5(_PREFIXES_FOR_FAMILY,FAMILY_CLASSIC,Object.keys(PREFIX_TO_LONG_STYLE[FAMILY_CLASSIC])),_defineProperty$5(_PREFIXES_FOR_FAMILY,FAMILY_SHARP,Object.keys(PREFIX_TO_LONG_STYLE[FAMILY_SHARP])),_PREFIXES_FOR_FAMILY);function getCanonicalIcon(ft){var lt,dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},vt=dt.skipLookups,Tt=vt===void 0?!1:vt,Et=(lt={},_defineProperty$5(lt,FAMILY_CLASSIC,"".concat(config$1.cssPrefix,"-").concat(FAMILY_CLASSIC)),_defineProperty$5(lt,FAMILY_SHARP,"".concat(config$1.cssPrefix,"-").concat(FAMILY_SHARP)),lt),Ct=null,Rt=FAMILY_CLASSIC;(ft.includes(Et[FAMILY_CLASSIC])||ft.some(function(Dt){return PREFIXES_FOR_FAMILY[FAMILY_CLASSIC].includes(Dt)}))&&(Rt=FAMILY_CLASSIC),(ft.includes(Et[FAMILY_SHARP])||ft.some(function(Dt){return PREFIXES_FOR_FAMILY[FAMILY_SHARP].includes(Dt)}))&&(Rt=FAMILY_SHARP);var kt=ft.reduce(function(Dt,Bt){var Ft=getIconName(config$1.cssPrefix,Bt);if(styles[Bt]?(Bt=LONG_STYLE[Rt].includes(Bt)?LONG_STYLE_TO_PREFIX[Rt][Bt]:Bt,Ct=Bt,Dt.prefix=Bt):PREFIXES[Rt].indexOf(Bt)>-1?(Ct=Bt,Dt.prefix=getCanonicalPrefix(Bt,{family:Rt})):Ft?Dt.iconName=Ft:Bt!==config$1.replacementClass&&Bt!==Et[FAMILY_CLASSIC]&&Bt!==Et[FAMILY_SHARP]&&Dt.rest.push(Bt),!Tt&&Dt.prefix&&Dt.iconName){var Ut=Ct==="fa"?byOldName(Dt.iconName):{},Zt=byAlias(Dt.prefix,Dt.iconName);Ut.prefix&&(Ct=null),Dt.iconName=Ut.iconName||Zt||Dt.iconName,Dt.prefix=Ut.prefix||Dt.prefix,Dt.prefix==="far"&&!styles.far&&styles.fas&&!config$1.autoFetchSvg&&(Dt.prefix="fas")}return Dt},emptyCanonicalIcon());return(ft.includes("fa-brands")||ft.includes("fab"))&&(kt.prefix="fab"),(ft.includes("fa-duotone")||ft.includes("fad"))&&(kt.prefix="fad"),!kt.prefix&&Rt===FAMILY_SHARP&&(styles.fass||config$1.autoFetchSvg)&&(kt.prefix="fass",kt.iconName=byAlias(kt.prefix,kt.iconName)||kt.iconName),(kt.prefix==="fa"||Ct==="fa")&&(kt.prefix=getDefaultUsablePrefix()||"fas"),kt}var Library=function(){function ft(){_classCallCheck(this,ft),this.definitions={}}return _createClass(ft,[{key:"add",value:function(){for(var dt=this,vt=arguments.length,Tt=new Array(vt),Et=0;Et<vt;Et++)Tt[Et]=arguments[Et];var Ct=Tt.reduce(this._pullDefinitions,{});Object.keys(Ct).forEach(function(Rt){dt.definitions[Rt]=_objectSpread2$2(_objectSpread2$2({},dt.definitions[Rt]||{}),Ct[Rt]),defineIcons(Rt,Ct[Rt]);var kt=PREFIX_TO_LONG_STYLE[FAMILY_CLASSIC][Rt];kt&&defineIcons(kt,Ct[Rt]),build()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(dt,vt){var Tt=vt.prefix&&vt.iconName&&vt.icon?{0:vt}:vt;return Object.keys(Tt).map(function(Et){var Ct=Tt[Et],Rt=Ct.prefix,kt=Ct.iconName,Dt=Ct.icon,Bt=Dt[2];dt[Rt]||(dt[Rt]={}),Bt.length>0&&Bt.forEach(function(Ft){typeof Ft=="string"&&(dt[Rt][Ft]=Dt)}),dt[Rt][kt]=Dt}),dt}}]),ft}(),_plugins=[],_hooks={},providers={},defaultProviderKeys=Object.keys(providers);function registerPlugins(ft,lt){var dt=lt.mixoutsTo;return _plugins=ft,_hooks={},Object.keys(providers).forEach(function(vt){defaultProviderKeys.indexOf(vt)===-1&&delete providers[vt]}),_plugins.forEach(function(vt){var Tt=vt.mixout?vt.mixout():{};if(Object.keys(Tt).forEach(function(Ct){typeof Tt[Ct]=="function"&&(dt[Ct]=Tt[Ct]),_typeof$2(Tt[Ct])==="object"&&Object.keys(Tt[Ct]).forEach(function(Rt){dt[Ct]||(dt[Ct]={}),dt[Ct][Rt]=Tt[Ct][Rt]})}),vt.hooks){var Et=vt.hooks();Object.keys(Et).forEach(function(Ct){_hooks[Ct]||(_hooks[Ct]=[]),_hooks[Ct].push(Et[Ct])})}vt.provides&&vt.provides(providers)}),dt}function chainHooks(ft,lt){for(var dt=arguments.length,vt=new Array(dt>2?dt-2:0),Tt=2;Tt<dt;Tt++)vt[Tt-2]=arguments[Tt];var Et=_hooks[ft]||[];return Et.forEach(function(Ct){lt=Ct.apply(null,[lt].concat(vt))}),lt}function callHooks(ft){for(var lt=arguments.length,dt=new Array(lt>1?lt-1:0),vt=1;vt<lt;vt++)dt[vt-1]=arguments[vt];var Tt=_hooks[ft]||[];Tt.forEach(function(Et){Et.apply(null,dt)})}function callProvided(){var ft=arguments[0],lt=Array.prototype.slice.call(arguments,1);return providers[ft]?providers[ft].apply(null,lt):void 0}function findIconDefinition(ft){ft.prefix==="fa"&&(ft.prefix="fas");var lt=ft.iconName,dt=ft.prefix||getDefaultUsablePrefix();if(lt)return lt=byAlias(dt,lt)||lt,iconFromMapping(library.definitions,dt,lt)||iconFromMapping(namespace.styles,dt,lt)}var library=new Library,noAuto=function ft(){config$1.autoReplaceSvg=!1,config$1.observeMutations=!1,callHooks("noAuto")},dom={i2svg:function ft(){var lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return IS_DOM?(callHooks("beforeI2svg",lt),callProvided("pseudoElements2svg",lt),callProvided("i2svg",lt)):Promise.reject("Operation requires a DOM of some kind.")},watch:function ft(){var lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},dt=lt.autoReplaceSvgRoot;config$1.autoReplaceSvg===!1&&(config$1.autoReplaceSvg=!0),config$1.observeMutations=!0,domready(function(){autoReplace({autoReplaceSvgRoot:dt}),callHooks("watch",lt)})}},parse$1={icon:function ft(lt){if(lt===null)return null;if(_typeof$2(lt)==="object"&&lt.prefix&&lt.iconName)return{prefix:lt.prefix,iconName:byAlias(lt.prefix,lt.iconName)||lt.iconName};if(Array.isArray(lt)&&lt.length===2){var dt=lt[1].indexOf("fa-")===0?lt[1].slice(3):lt[1],vt=getCanonicalPrefix(lt[0]);return{prefix:vt,iconName:byAlias(vt,dt)||dt}}if(typeof lt=="string"&&(lt.indexOf("".concat(config$1.cssPrefix,"-"))>-1||lt.match(ICON_SELECTION_SYNTAX_PATTERN))){var Tt=getCanonicalIcon(lt.split(" "),{skipLookups:!0});return{prefix:Tt.prefix||getDefaultUsablePrefix(),iconName:byAlias(Tt.prefix,Tt.iconName)||Tt.iconName}}if(typeof lt=="string"){var Et=getDefaultUsablePrefix();return{prefix:Et,iconName:byAlias(Et,lt)||lt}}}},api={noAuto,config:config$1,dom,parse:parse$1,library,findIconDefinition,toHtml},autoReplace=function ft(){var lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},dt=lt.autoReplaceSvgRoot,vt=dt===void 0?DOCUMENT:dt;(Object.keys(namespace.styles).length>0||config$1.autoFetchSvg)&&IS_DOM&&config$1.autoReplaceSvg&&api.dom.i2svg({node:vt})};function domVariants(ft,lt){return Object.defineProperty(ft,"abstract",{get:lt}),Object.defineProperty(ft,"html",{get:function(){return ft.abstract.map(function(vt){return toHtml(vt)})}}),Object.defineProperty(ft,"node",{get:function(){if(IS_DOM){var vt=DOCUMENT.createElement("div");return vt.innerHTML=ft.html,vt.children}}}),ft}function asIcon(ft){var lt=ft.children,dt=ft.main,vt=ft.mask,Tt=ft.attributes,Et=ft.styles,Ct=ft.transform;if(transformIsMeaningful(Ct)&&dt.found&&!vt.found){var Rt=dt.width,kt=dt.height,Dt={x:Rt/kt/2,y:.5};Tt.style=joinStyles(_objectSpread2$2(_objectSpread2$2({},Et),{},{"transform-origin":"".concat(Dt.x+Ct.x/16,"em ").concat(Dt.y+Ct.y/16,"em")}))}return[{tag:"svg",attributes:Tt,children:lt}]}function asSymbol(ft){var lt=ft.prefix,dt=ft.iconName,vt=ft.children,Tt=ft.attributes,Et=ft.symbol,Ct=Et===!0?"".concat(lt,"-").concat(config$1.cssPrefix,"-").concat(dt):Et;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:_objectSpread2$2(_objectSpread2$2({},Tt),{},{id:Ct}),children:vt}]}]}function makeInlineSvgAbstract(ft){var lt=ft.icons,dt=lt.main,vt=lt.mask,Tt=ft.prefix,Et=ft.iconName,Ct=ft.transform,Rt=ft.symbol,kt=ft.title,Dt=ft.maskId,Bt=ft.titleId,Ft=ft.extra,Ut=ft.watchable,Zt=Ut===void 0?!1:Ut,Kt=vt.found?vt:dt,ln=Kt.width,hn=Kt.height,dn=Tt==="fak",pn=[config$1.replacementClass,Et?"".concat(config$1.cssPrefix,"-").concat(Et):""].filter(function(In){return Ft.classes.indexOf(In)===-1}).filter(function(In){return In!==""||!!In}).concat(Ft.classes).join(" "),mn={children:[],attributes:_objectSpread2$2(_objectSpread2$2({},Ft.attributes),{},{"data-prefix":Tt,"data-icon":Et,class:pn,role:Ft.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(ln," ").concat(hn)})},On=dn&&!~Ft.classes.indexOf("fa-fw")?{width:"".concat(ln/hn*16*.0625,"em")}:{};Zt&&(mn.attributes[DATA_FA_I2SVG]=""),kt&&(mn.children.push({tag:"title",attributes:{id:mn.attributes["aria-labelledby"]||"title-".concat(Bt||nextUniqueId())},children:[kt]}),delete mn.attributes.title);var bn=_objectSpread2$2(_objectSpread2$2({},mn),{},{prefix:Tt,iconName:Et,main:dt,mask:vt,maskId:Dt,transform:Ct,symbol:Rt,styles:_objectSpread2$2(_objectSpread2$2({},On),Ft.styles)}),En=vt.found&&dt.found?callProvided("generateAbstractMask",bn)||{children:[],attributes:{}}:callProvided("generateAbstractIcon",bn)||{children:[],attributes:{}},An=En.children,Tn=En.attributes;return bn.children=An,bn.attributes=Tn,Rt?asSymbol(bn):asIcon(bn)}function makeLayersTextAbstract(ft){var lt=ft.content,dt=ft.width,vt=ft.height,Tt=ft.transform,Et=ft.title,Ct=ft.extra,Rt=ft.watchable,kt=Rt===void 0?!1:Rt,Dt=_objectSpread2$2(_objectSpread2$2(_objectSpread2$2({},Ct.attributes),Et?{title:Et}:{}),{},{class:Ct.classes.join(" ")});kt&&(Dt[DATA_FA_I2SVG]="");var Bt=_objectSpread2$2({},Ct.styles);transformIsMeaningful(Tt)&&(Bt.transform=transformForCss({transform:Tt,startCentered:!0,width:dt,height:vt}),Bt["-webkit-transform"]=Bt.transform);var Ft=joinStyles(Bt);Ft.length>0&&(Dt.style=Ft);var Ut=[];return Ut.push({tag:"span",attributes:Dt,children:[lt]}),Et&&Ut.push({tag:"span",attributes:{class:"sr-only"},children:[Et]}),Ut}function makeLayersCounterAbstract(ft){var lt=ft.content,dt=ft.title,vt=ft.extra,Tt=_objectSpread2$2(_objectSpread2$2(_objectSpread2$2({},vt.attributes),dt?{title:dt}:{}),{},{class:vt.classes.join(" ")}),Et=joinStyles(vt.styles);Et.length>0&&(Tt.style=Et);var Ct=[];return Ct.push({tag:"span",attributes:Tt,children:[lt]}),dt&&Ct.push({tag:"span",attributes:{class:"sr-only"},children:[dt]}),Ct}var styles$1=namespace.styles;function asFoundIcon(ft){var lt=ft[0],dt=ft[1],vt=ft.slice(4),Tt=_slicedToArray$2(vt,1),Et=Tt[0],Ct=null;return Array.isArray(Et)?Ct={tag:"g",attributes:{class:"".concat(config$1.cssPrefix,"-").concat(DUOTONE_CLASSES.GROUP)},children:[{tag:"path",attributes:{class:"".concat(config$1.cssPrefix,"-").concat(DUOTONE_CLASSES.SECONDARY),fill:"currentColor",d:Et[0]}},{tag:"path",attributes:{class:"".concat(config$1.cssPrefix,"-").concat(DUOTONE_CLASSES.PRIMARY),fill:"currentColor",d:Et[1]}}]}:Ct={tag:"path",attributes:{fill:"currentColor",d:Et}},{found:!0,width:lt,height:dt,icon:Ct}}var missingIconResolutionMixin={found:!1,width:512,height:512};function maybeNotifyMissing(ft,lt){!PRODUCTION$1&&!config$1.showMissingIcons&&ft&&console.error('Icon with name "'.concat(ft,'" and prefix "').concat(lt,'" is missing.'))}function findIcon(ft,lt){var dt=lt;return lt==="fa"&&config$1.styleDefault!==null&&(lt=getDefaultUsablePrefix()),new Promise(function(vt,Tt){if(callProvided("missingIconAbstract"),dt==="fa"){var Et=byOldName(ft)||{};ft=Et.iconName||ft,lt=Et.prefix||lt}if(ft&&lt&&styles$1[lt]&&styles$1[lt][ft]){var Ct=styles$1[lt][ft];return vt(asFoundIcon(Ct))}maybeNotifyMissing(ft,lt),vt(_objectSpread2$2(_objectSpread2$2({},missingIconResolutionMixin),{},{icon:config$1.showMissingIcons&&ft?callProvided("missingIconAbstract")||{}:{}}))})}var noop$1$1=function ft(){},p$4=config$1.measurePerformance&&PERFORMANCE&&PERFORMANCE.mark&&PERFORMANCE.measure?PERFORMANCE:{mark:noop$1$1,measure:noop$1$1},preamble='FA "6.3.0"',begin=function ft(lt){return p$4.mark("".concat(preamble," ").concat(lt," begins")),function(){return end(lt)}},end=function ft(lt){p$4.mark("".concat(preamble," ").concat(lt," ends")),p$4.measure("".concat(preamble," ").concat(lt),"".concat(preamble," ").concat(lt," begins"),"".concat(preamble," ").concat(lt," ends"))},perf={begin,end},noop$2$1=function ft(){};function isWatched(ft){var lt=ft.getAttribute?ft.getAttribute(DATA_FA_I2SVG):null;return typeof lt=="string"}function hasPrefixAndIcon(ft){var lt=ft.getAttribute?ft.getAttribute(DATA_PREFIX):null,dt=ft.getAttribute?ft.getAttribute(DATA_ICON):null;return lt&&dt}function hasBeenReplaced(ft){return ft&&ft.classList&&ft.classList.contains&&ft.classList.contains(config$1.replacementClass)}function getMutator(){if(config$1.autoReplaceSvg===!0)return mutators.replace;var ft=mutators[config$1.autoReplaceSvg];return ft||mutators.replace}function createElementNS(ft){return DOCUMENT.createElementNS("http://www.w3.org/2000/svg",ft)}function createElement(ft){return DOCUMENT.createElement(ft)}function convertSVG(ft){var lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},dt=lt.ceFn,vt=dt===void 0?ft.tag==="svg"?createElementNS:createElement:dt;if(typeof ft=="string")return DOCUMENT.createTextNode(ft);var Tt=vt(ft.tag);Object.keys(ft.attributes||[]).forEach(function(Ct){Tt.setAttribute(Ct,ft.attributes[Ct])});var Et=ft.children||[];return Et.forEach(function(Ct){Tt.appendChild(convertSVG(Ct,{ceFn:vt}))}),Tt}function nodeAsComment(ft){var lt=" ".concat(ft.outerHTML," ");return lt="".concat(lt,"Font Awesome fontawesome.com "),lt}var mutators={replace:function ft(lt){var dt=lt[0];if(dt.parentNode)if(lt[1].forEach(function(Tt){dt.parentNode.insertBefore(convertSVG(Tt),dt)}),dt.getAttribute(DATA_FA_I2SVG)===null&&config$1.keepOriginalSource){var vt=DOCUMENT.createComment(nodeAsComment(dt));dt.parentNode.replaceChild(vt,dt)}else dt.remove()},nest:function ft(lt){var dt=lt[0],vt=lt[1];if(~classArray(dt).indexOf(config$1.replacementClass))return mutators.replace(lt);var Tt=new RegExp("".concat(config$1.cssPrefix,"-.*"));if(delete vt[0].attributes.id,vt[0].attributes.class){var Et=vt[0].attributes.class.split(" ").reduce(function(Rt,kt){return kt===config$1.replacementClass||kt.match(Tt)?Rt.toSvg.push(kt):Rt.toNode.push(kt),Rt},{toNode:[],toSvg:[]});vt[0].attributes.class=Et.toSvg.join(" "),Et.toNode.length===0?dt.removeAttribute("class"):dt.setAttribute("class",Et.toNode.join(" "))}var Ct=vt.map(function(Rt){return toHtml(Rt)}).join(`
`);dt.setAttribute(DATA_FA_I2SVG,""),dt.innerHTML=Ct}};function performOperationSync(ft){ft()}function perform(ft,lt){var dt=typeof lt=="function"?lt:noop$2$1;if(ft.length===0)dt();else{var vt=performOperationSync;config$1.mutateApproach===MUTATION_APPROACH_ASYNC&&(vt=WINDOW.requestAnimationFrame||performOperationSync),vt(function(){var Tt=getMutator(),Et=perf.begin("mutate");ft.map(Tt),Et(),dt()})}}var disabled=!1;function disableObservation(){disabled=!0}function enableObservation(){disabled=!1}var mo=null;function observe(ft){if(MUTATION_OBSERVER&&config$1.observeMutations){var lt=ft.treeCallback,dt=lt===void 0?noop$2$1:lt,vt=ft.nodeCallback,Tt=vt===void 0?noop$2$1:vt,Et=ft.pseudoElementsCallback,Ct=Et===void 0?noop$2$1:Et,Rt=ft.observeMutationsRoot,kt=Rt===void 0?DOCUMENT:Rt;mo=new MUTATION_OBSERVER(function(Dt){if(!disabled){var Bt=getDefaultUsablePrefix();toArray(Dt).forEach(function(Ft){if(Ft.type==="childList"&&Ft.addedNodes.length>0&&!isWatched(Ft.addedNodes[0])&&(config$1.searchPseudoElements&&Ct(Ft.target),dt(Ft.target)),Ft.type==="attributes"&&Ft.target.parentNode&&config$1.searchPseudoElements&&Ct(Ft.target.parentNode),Ft.type==="attributes"&&isWatched(Ft.target)&&~ATTRIBUTES_WATCHED_FOR_MUTATION.indexOf(Ft.attributeName))if(Ft.attributeName==="class"&&hasPrefixAndIcon(Ft.target)){var Ut=getCanonicalIcon(classArray(Ft.target)),Zt=Ut.prefix,Kt=Ut.iconName;Ft.target.setAttribute(DATA_PREFIX,Zt||Bt),Kt&&Ft.target.setAttribute(DATA_ICON,Kt)}else hasBeenReplaced(Ft.target)&&Tt(Ft.target)})}}),IS_DOM&&mo.observe(kt,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function disconnect(){mo&&mo.disconnect()}function styleParser(ft){var lt=ft.getAttribute("style"),dt=[];return lt&&(dt=lt.split(";").reduce(function(vt,Tt){var Et=Tt.split(":"),Ct=Et[0],Rt=Et.slice(1);return Ct&&Rt.length>0&&(vt[Ct]=Rt.join(":").trim()),vt},{})),dt}function classParser(ft){var lt=ft.getAttribute("data-prefix"),dt=ft.getAttribute("data-icon"),vt=ft.innerText!==void 0?ft.innerText.trim():"",Tt=getCanonicalIcon(classArray(ft));return Tt.prefix||(Tt.prefix=getDefaultUsablePrefix()),lt&&dt&&(Tt.prefix=lt,Tt.iconName=dt),Tt.iconName&&Tt.prefix||(Tt.prefix&&vt.length>0&&(Tt.iconName=byLigature(Tt.prefix,ft.innerText)||byUnicode(Tt.prefix,toHex(ft.innerText))),!Tt.iconName&&config$1.autoFetchSvg&&ft.firstChild&&ft.firstChild.nodeType===Node.TEXT_NODE&&(Tt.iconName=ft.firstChild.data)),Tt}function attributesParser(ft){var lt=toArray(ft.attributes).reduce(function(Tt,Et){return Tt.name!=="class"&&Tt.name!=="style"&&(Tt[Et.name]=Et.value),Tt},{}),dt=ft.getAttribute("title"),vt=ft.getAttribute("data-fa-title-id");return config$1.autoA11y&&(dt?lt["aria-labelledby"]="".concat(config$1.replacementClass,"-title-").concat(vt||nextUniqueId()):(lt["aria-hidden"]="true",lt.focusable="false")),lt}function blankMeta(){return{iconName:null,title:null,titleId:null,prefix:null,transform:meaninglessTransform,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function parseMeta(ft){var lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},dt=classParser(ft),vt=dt.iconName,Tt=dt.prefix,Et=dt.rest,Ct=attributesParser(ft),Rt=chainHooks("parseNodeAttributes",{},ft),kt=lt.styleParser?styleParser(ft):[];return _objectSpread2$2({iconName:vt,title:ft.getAttribute("title"),titleId:ft.getAttribute("data-fa-title-id"),prefix:Tt,transform:meaninglessTransform,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:Et,styles:kt,attributes:Ct}},Rt)}var styles$2=namespace.styles;function generateMutation(ft){var lt=config$1.autoReplaceSvg==="nest"?parseMeta(ft,{styleParser:!1}):parseMeta(ft);return~lt.extra.classes.indexOf(LAYERS_TEXT_CLASSNAME)?callProvided("generateLayersText",ft,lt):callProvided("generateSvgReplacementMutation",ft,lt)}var knownPrefixes=new Set;FAMILIES.map(function(ft){knownPrefixes.add("fa-".concat(ft))});Object.keys(PREFIX_TO_STYLE[FAMILY_CLASSIC]).map(knownPrefixes.add.bind(knownPrefixes));Object.keys(PREFIX_TO_STYLE[FAMILY_SHARP]).map(knownPrefixes.add.bind(knownPrefixes));knownPrefixes=_toConsumableArray$3(knownPrefixes);function onTree(ft){var lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!IS_DOM)return Promise.resolve();var dt=DOCUMENT.documentElement.classList,vt=function(Ft){return dt.add("".concat(HTML_CLASS_I2SVG_BASE_CLASS,"-").concat(Ft))},Tt=function(Ft){return dt.remove("".concat(HTML_CLASS_I2SVG_BASE_CLASS,"-").concat(Ft))},Et=config$1.autoFetchSvg?knownPrefixes:FAMILIES.map(function(Bt){return"fa-".concat(Bt)}).concat(Object.keys(styles$2));Et.includes("fa")||Et.push("fa");var Ct=[".".concat(LAYERS_TEXT_CLASSNAME,":not([").concat(DATA_FA_I2SVG,"])")].concat(Et.map(function(Bt){return".".concat(Bt,":not([").concat(DATA_FA_I2SVG,"])")})).join(", ");if(Ct.length===0)return Promise.resolve();var Rt=[];try{Rt=toArray(ft.querySelectorAll(Ct))}catch{}if(Rt.length>0)vt("pending"),Tt("complete");else return Promise.resolve();var kt=perf.begin("onTree"),Dt=Rt.reduce(function(Bt,Ft){try{var Ut=generateMutation(Ft);Ut&&Bt.push(Ut)}catch(Zt){PRODUCTION$1||Zt.name==="MissingIcon"&&console.error(Zt)}return Bt},[]);return new Promise(function(Bt,Ft){Promise.all(Dt).then(function(Ut){perform(Ut,function(){vt("active"),vt("complete"),Tt("pending"),typeof lt=="function"&&lt(),kt(),Bt()})}).catch(function(Ut){kt(),Ft(Ut)})})}function onNode(ft){var lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;generateMutation(ft).then(function(dt){dt&&perform([dt],lt)})}function resolveIcons(ft){return function(lt){var dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},vt=(lt||{}).icon?lt:findIconDefinition(lt||{}),Tt=dt.mask;return Tt&&(Tt=(Tt||{}).icon?Tt:findIconDefinition(Tt||{})),ft(vt,_objectSpread2$2(_objectSpread2$2({},dt),{},{mask:Tt}))}}var render=function ft(lt){var dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},vt=dt.transform,Tt=vt===void 0?meaninglessTransform:vt,Et=dt.symbol,Ct=Et===void 0?!1:Et,Rt=dt.mask,kt=Rt===void 0?null:Rt,Dt=dt.maskId,Bt=Dt===void 0?null:Dt,Ft=dt.title,Ut=Ft===void 0?null:Ft,Zt=dt.titleId,Kt=Zt===void 0?null:Zt,ln=dt.classes,hn=ln===void 0?[]:ln,dn=dt.attributes,pn=dn===void 0?{}:dn,mn=dt.styles,On=mn===void 0?{}:mn;if(lt){var bn=lt.prefix,En=lt.iconName,An=lt.icon;return domVariants(_objectSpread2$2({type:"icon"},lt),function(){return callHooks("beforeDOMElementCreation",{iconDefinition:lt,params:dt}),config$1.autoA11y&&(Ut?pn["aria-labelledby"]="".concat(config$1.replacementClass,"-title-").concat(Kt||nextUniqueId()):(pn["aria-hidden"]="true",pn.focusable="false")),makeInlineSvgAbstract({icons:{main:asFoundIcon(An),mask:kt?asFoundIcon(kt.icon):{found:!1,width:null,height:null,icon:{}}},prefix:bn,iconName:En,transform:_objectSpread2$2(_objectSpread2$2({},meaninglessTransform),Tt),symbol:Ct,title:Ut,maskId:Bt,titleId:Kt,extra:{attributes:pn,styles:On,classes:hn}})})}},ReplaceElements={mixout:function ft(){return{icon:resolveIcons(render)}},hooks:function ft(){return{mutationObserverCallbacks:function(dt){return dt.treeCallback=onTree,dt.nodeCallback=onNode,dt}}},provides:function ft(lt){lt.i2svg=function(dt){var vt=dt.node,Tt=vt===void 0?DOCUMENT:vt,Et=dt.callback,Ct=Et===void 0?function(){}:Et;return onTree(Tt,Ct)},lt.generateSvgReplacementMutation=function(dt,vt){var Tt=vt.iconName,Et=vt.title,Ct=vt.titleId,Rt=vt.prefix,kt=vt.transform,Dt=vt.symbol,Bt=vt.mask,Ft=vt.maskId,Ut=vt.extra;return new Promise(function(Zt,Kt){Promise.all([findIcon(Tt,Rt),Bt.iconName?findIcon(Bt.iconName,Bt.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(ln){var hn=_slicedToArray$2(ln,2),dn=hn[0],pn=hn[1];Zt([dt,makeInlineSvgAbstract({icons:{main:dn,mask:pn},prefix:Rt,iconName:Tt,transform:kt,symbol:Dt,maskId:Ft,title:Et,titleId:Ct,extra:Ut,watchable:!0})])}).catch(Kt)})},lt.generateAbstractIcon=function(dt){var vt=dt.children,Tt=dt.attributes,Et=dt.main,Ct=dt.transform,Rt=dt.styles,kt=joinStyles(Rt);kt.length>0&&(Tt.style=kt);var Dt;return transformIsMeaningful(Ct)&&(Dt=callProvided("generateAbstractTransformGrouping",{main:Et,transform:Ct,containerWidth:Et.width,iconWidth:Et.width})),vt.push(Dt||Et.icon),{children:vt,attributes:Tt}}}},Layers={mixout:function ft(){return{layer:function(dt){var vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Tt=vt.classes,Et=Tt===void 0?[]:Tt;return domVariants({type:"layer"},function(){callHooks("beforeDOMElementCreation",{assembler:dt,params:vt});var Ct=[];return dt(function(Rt){Array.isArray(Rt)?Rt.map(function(kt){Ct=Ct.concat(kt.abstract)}):Ct=Ct.concat(Rt.abstract)}),[{tag:"span",attributes:{class:["".concat(config$1.cssPrefix,"-layers")].concat(_toConsumableArray$3(Et)).join(" ")},children:Ct}]})}}}},LayersCounter={mixout:function ft(){return{counter:function(dt){var vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Tt=vt.title,Et=Tt===void 0?null:Tt,Ct=vt.classes,Rt=Ct===void 0?[]:Ct,kt=vt.attributes,Dt=kt===void 0?{}:kt,Bt=vt.styles,Ft=Bt===void 0?{}:Bt;return domVariants({type:"counter",content:dt},function(){return callHooks("beforeDOMElementCreation",{content:dt,params:vt}),makeLayersCounterAbstract({content:dt.toString(),title:Et,extra:{attributes:Dt,styles:Ft,classes:["".concat(config$1.cssPrefix,"-layers-counter")].concat(_toConsumableArray$3(Rt))}})})}}}},LayersText={mixout:function ft(){return{text:function(dt){var vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Tt=vt.transform,Et=Tt===void 0?meaninglessTransform:Tt,Ct=vt.title,Rt=Ct===void 0?null:Ct,kt=vt.classes,Dt=kt===void 0?[]:kt,Bt=vt.attributes,Ft=Bt===void 0?{}:Bt,Ut=vt.styles,Zt=Ut===void 0?{}:Ut;return domVariants({type:"text",content:dt},function(){return callHooks("beforeDOMElementCreation",{content:dt,params:vt}),makeLayersTextAbstract({content:dt,transform:_objectSpread2$2(_objectSpread2$2({},meaninglessTransform),Et),title:Rt,extra:{attributes:Ft,styles:Zt,classes:["".concat(config$1.cssPrefix,"-layers-text")].concat(_toConsumableArray$3(Dt))}})})}}},provides:function ft(lt){lt.generateLayersText=function(dt,vt){var Tt=vt.title,Et=vt.transform,Ct=vt.extra,Rt=null,kt=null;if(IS_IE){var Dt=parseInt(getComputedStyle(dt).fontSize,10),Bt=dt.getBoundingClientRect();Rt=Bt.width/Dt,kt=Bt.height/Dt}return config$1.autoA11y&&!Tt&&(Ct.attributes["aria-hidden"]="true"),Promise.resolve([dt,makeLayersTextAbstract({content:dt.innerHTML,width:Rt,height:kt,transform:Et,title:Tt,extra:Ct,watchable:!0})])}}},CLEAN_CONTENT_PATTERN=new RegExp('"',"ug"),SECONDARY_UNICODE_RANGE=[1105920,1112319];function hexValueFromContent(ft){var lt=ft.replace(CLEAN_CONTENT_PATTERN,""),dt=codePointAt$1(lt,0),vt=dt>=SECONDARY_UNICODE_RANGE[0]&&dt<=SECONDARY_UNICODE_RANGE[1],Tt=lt.length===2?lt[0]===lt[1]:!1;return{value:toHex(Tt?lt[0]:lt),isSecondary:vt||Tt}}function replaceForPosition(ft,lt){var dt="".concat(DATA_FA_PSEUDO_ELEMENT_PENDING).concat(lt.replace(":","-"));return new Promise(function(vt,Tt){if(ft.getAttribute(dt)!==null)return vt();var Et=toArray(ft.children),Ct=Et.filter(function(An){return An.getAttribute(DATA_FA_PSEUDO_ELEMENT)===lt})[0],Rt=WINDOW.getComputedStyle(ft,lt),kt=Rt.getPropertyValue("font-family").match(FONT_FAMILY_PATTERN),Dt=Rt.getPropertyValue("font-weight"),Bt=Rt.getPropertyValue("content");if(Ct&&!kt)return ft.removeChild(Ct),vt();if(kt&&Bt!=="none"&&Bt!==""){var Ft=Rt.getPropertyValue("content"),Ut=~["Sharp"].indexOf(kt[2])?FAMILY_SHARP:FAMILY_CLASSIC,Zt=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(kt[2])?STYLE_TO_PREFIX[Ut][kt[2].toLowerCase()]:FONT_WEIGHT_TO_PREFIX[Ut][Dt],Kt=hexValueFromContent(Ft),ln=Kt.value,hn=Kt.isSecondary,dn=kt[0].startsWith("FontAwesome"),pn=byUnicode(Zt,ln),mn=pn;if(dn){var On=byOldUnicode(ln);On.iconName&&On.prefix&&(pn=On.iconName,Zt=On.prefix)}if(pn&&!hn&&(!Ct||Ct.getAttribute(DATA_PREFIX)!==Zt||Ct.getAttribute(DATA_ICON)!==mn)){ft.setAttribute(dt,mn),Ct&&ft.removeChild(Ct);var bn=blankMeta(),En=bn.extra;En.attributes[DATA_FA_PSEUDO_ELEMENT]=lt,findIcon(pn,Zt).then(function(An){var Tn=makeInlineSvgAbstract(_objectSpread2$2(_objectSpread2$2({},bn),{},{icons:{main:An,mask:emptyCanonicalIcon()},prefix:Zt,iconName:mn,extra:En,watchable:!0})),In=DOCUMENT.createElement("svg");lt==="::before"?ft.insertBefore(In,ft.firstChild):ft.appendChild(In),In.outerHTML=Tn.map(function(Rn){return toHtml(Rn)}).join(`
`),ft.removeAttribute(dt),vt()}).catch(Tt)}else vt()}else vt()})}function replace(ft){return Promise.all([replaceForPosition(ft,"::before"),replaceForPosition(ft,"::after")])}function processable(ft){return ft.parentNode!==document.head&&!~TAGNAMES_TO_SKIP_FOR_PSEUDOELEMENTS.indexOf(ft.tagName.toUpperCase())&&!ft.getAttribute(DATA_FA_PSEUDO_ELEMENT)&&(!ft.parentNode||ft.parentNode.tagName!=="svg")}function searchPseudoElements(ft){if(IS_DOM)return new Promise(function(lt,dt){var vt=toArray(ft.querySelectorAll("*")).filter(processable).map(replace),Tt=perf.begin("searchPseudoElements");disableObservation(),Promise.all(vt).then(function(){Tt(),enableObservation(),lt()}).catch(function(){Tt(),enableObservation(),dt()})})}var PseudoElements={hooks:function ft(){return{mutationObserverCallbacks:function(dt){return dt.pseudoElementsCallback=searchPseudoElements,dt}}},provides:function ft(lt){lt.pseudoElements2svg=function(dt){var vt=dt.node,Tt=vt===void 0?DOCUMENT:vt;config$1.searchPseudoElements&&searchPseudoElements(Tt)}}},_unwatched=!1,MutationObserver$1={mixout:function ft(){return{dom:{unwatch:function(){disableObservation(),_unwatched=!0}}}},hooks:function ft(){return{bootstrap:function(){observe(chainHooks("mutationObserverCallbacks",{}))},noAuto:function(){disconnect()},watch:function(dt){var vt=dt.observeMutationsRoot;_unwatched?enableObservation():observe(chainHooks("mutationObserverCallbacks",{observeMutationsRoot:vt}))}}}},parseTransformString=function ft(lt){var dt={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return lt.toLowerCase().split(" ").reduce(function(vt,Tt){var Et=Tt.toLowerCase().split("-"),Ct=Et[0],Rt=Et.slice(1).join("-");if(Ct&&Rt==="h")return vt.flipX=!0,vt;if(Ct&&Rt==="v")return vt.flipY=!0,vt;if(Rt=parseFloat(Rt),isNaN(Rt))return vt;switch(Ct){case"grow":vt.size=vt.size+Rt;break;case"shrink":vt.size=vt.size-Rt;break;case"left":vt.x=vt.x-Rt;break;case"right":vt.x=vt.x+Rt;break;case"up":vt.y=vt.y-Rt;break;case"down":vt.y=vt.y+Rt;break;case"rotate":vt.rotate=vt.rotate+Rt;break}return vt},dt)},PowerTransforms={mixout:function ft(){return{parse:{transform:function(dt){return parseTransformString(dt)}}}},hooks:function ft(){return{parseNodeAttributes:function(dt,vt){var Tt=vt.getAttribute("data-fa-transform");return Tt&&(dt.transform=parseTransformString(Tt)),dt}}},provides:function ft(lt){lt.generateAbstractTransformGrouping=function(dt){var vt=dt.main,Tt=dt.transform,Et=dt.containerWidth,Ct=dt.iconWidth,Rt={transform:"translate(".concat(Et/2," 256)")},kt="translate(".concat(Tt.x*32,", ").concat(Tt.y*32,") "),Dt="scale(".concat(Tt.size/16*(Tt.flipX?-1:1),", ").concat(Tt.size/16*(Tt.flipY?-1:1),") "),Bt="rotate(".concat(Tt.rotate," 0 0)"),Ft={transform:"".concat(kt," ").concat(Dt," ").concat(Bt)},Ut={transform:"translate(".concat(Ct/2*-1," -256)")},Zt={outer:Rt,inner:Ft,path:Ut};return{tag:"g",attributes:_objectSpread2$2({},Zt.outer),children:[{tag:"g",attributes:_objectSpread2$2({},Zt.inner),children:[{tag:vt.icon.tag,children:vt.icon.children,attributes:_objectSpread2$2(_objectSpread2$2({},vt.icon.attributes),Zt.path)}]}]}}}},ALL_SPACE={x:0,y:0,width:"100%",height:"100%"};function fillBlack(ft){var lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return ft.attributes&&(ft.attributes.fill||lt)&&(ft.attributes.fill="black"),ft}function deGroup(ft){return ft.tag==="g"?ft.children:[ft]}var Masks={hooks:function ft(){return{parseNodeAttributes:function(dt,vt){var Tt=vt.getAttribute("data-fa-mask"),Et=Tt?getCanonicalIcon(Tt.split(" ").map(function(Ct){return Ct.trim()})):emptyCanonicalIcon();return Et.prefix||(Et.prefix=getDefaultUsablePrefix()),dt.mask=Et,dt.maskId=vt.getAttribute("data-fa-mask-id"),dt}}},provides:function ft(lt){lt.generateAbstractMask=function(dt){var vt=dt.children,Tt=dt.attributes,Et=dt.main,Ct=dt.mask,Rt=dt.maskId,kt=dt.transform,Dt=Et.width,Bt=Et.icon,Ft=Ct.width,Ut=Ct.icon,Zt=transformForSvg({transform:kt,containerWidth:Ft,iconWidth:Dt}),Kt={tag:"rect",attributes:_objectSpread2$2(_objectSpread2$2({},ALL_SPACE),{},{fill:"white"})},ln=Bt.children?{children:Bt.children.map(fillBlack)}:{},hn={tag:"g",attributes:_objectSpread2$2({},Zt.inner),children:[fillBlack(_objectSpread2$2({tag:Bt.tag,attributes:_objectSpread2$2(_objectSpread2$2({},Bt.attributes),Zt.path)},ln))]},dn={tag:"g",attributes:_objectSpread2$2({},Zt.outer),children:[hn]},pn="mask-".concat(Rt||nextUniqueId()),mn="clip-".concat(Rt||nextUniqueId()),On={tag:"mask",attributes:_objectSpread2$2(_objectSpread2$2({},ALL_SPACE),{},{id:pn,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[Kt,dn]},bn={tag:"defs",children:[{tag:"clipPath",attributes:{id:mn},children:deGroup(Ut)},On]};return vt.push(bn,{tag:"rect",attributes:_objectSpread2$2({fill:"currentColor","clip-path":"url(#".concat(mn,")"),mask:"url(#".concat(pn,")")},ALL_SPACE)}),{children:vt,attributes:Tt}}}},MissingIconIndicator={provides:function ft(lt){var dt=!1;WINDOW.matchMedia&&(dt=WINDOW.matchMedia("(prefers-reduced-motion: reduce)").matches),lt.missingIconAbstract=function(){var vt=[],Tt={fill:"currentColor"},Et={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};vt.push({tag:"path",attributes:_objectSpread2$2(_objectSpread2$2({},Tt),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var Ct=_objectSpread2$2(_objectSpread2$2({},Et),{},{attributeName:"opacity"}),Rt={tag:"circle",attributes:_objectSpread2$2(_objectSpread2$2({},Tt),{},{cx:"256",cy:"364",r:"28"}),children:[]};return dt||Rt.children.push({tag:"animate",attributes:_objectSpread2$2(_objectSpread2$2({},Et),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:_objectSpread2$2(_objectSpread2$2({},Ct),{},{values:"1;0;1;1;0;1;"})}),vt.push(Rt),vt.push({tag:"path",attributes:_objectSpread2$2(_objectSpread2$2({},Tt),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:dt?[]:[{tag:"animate",attributes:_objectSpread2$2(_objectSpread2$2({},Ct),{},{values:"1;0;0;0;0;1;"})}]}),dt||vt.push({tag:"path",attributes:_objectSpread2$2(_objectSpread2$2({},Tt),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:_objectSpread2$2(_objectSpread2$2({},Ct),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:vt}}}},SvgSymbols={hooks:function ft(){return{parseNodeAttributes:function(dt,vt){var Tt=vt.getAttribute("data-fa-symbol"),Et=Tt===null?!1:Tt===""?!0:Tt;return dt.symbol=Et,dt}}}},plugins=[InjectCSS,ReplaceElements,Layers,LayersCounter,LayersText,PseudoElements,MutationObserver$1,PowerTransforms,Masks,MissingIconIndicator,SvgSymbols];registerPlugins(plugins,{mixoutsTo:api});api.noAuto;api.config;api.library;api.dom;var parse$1$1=api.parse;api.findIconDefinition;api.toHtml;var icon=api.icon;api.layer;api.text;api.counter;function ownKeys$3(ft,lt){var dt=Object.keys(ft);if(Object.getOwnPropertySymbols){var vt=Object.getOwnPropertySymbols(ft);lt&&(vt=vt.filter(function(Tt){return Object.getOwnPropertyDescriptor(ft,Tt).enumerable})),dt.push.apply(dt,vt)}return dt}function _objectSpread2$1(ft){for(var lt=1;lt<arguments.length;lt++){var dt=arguments[lt]!=null?arguments[lt]:{};lt%2?ownKeys$3(Object(dt),!0).forEach(function(vt){_defineProperty$4(ft,vt,dt[vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ft,Object.getOwnPropertyDescriptors(dt)):ownKeys$3(Object(dt)).forEach(function(vt){Object.defineProperty(ft,vt,Object.getOwnPropertyDescriptor(dt,vt))})}return ft}function _typeof$1(ft){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(lt){return typeof lt}:function(lt){return lt&&typeof Symbol=="function"&&lt.constructor===Symbol&&lt!==Symbol.prototype?"symbol":typeof lt},_typeof$1(ft)}function _defineProperty$4(ft,lt,dt){return lt in ft?Object.defineProperty(ft,lt,{value:dt,enumerable:!0,configurable:!0,writable:!0}):ft[lt]=dt,ft}function _objectWithoutPropertiesLoose$3(ft,lt){if(ft==null)return{};var dt={},vt=Object.keys(ft),Tt,Et;for(Et=0;Et<vt.length;Et++)Tt=vt[Et],!(lt.indexOf(Tt)>=0)&&(dt[Tt]=ft[Tt]);return dt}function _objectWithoutProperties$2(ft,lt){if(ft==null)return{};var dt=_objectWithoutPropertiesLoose$3(ft,lt),vt,Tt;if(Object.getOwnPropertySymbols){var Et=Object.getOwnPropertySymbols(ft);for(Tt=0;Tt<Et.length;Tt++)vt=Et[Tt],!(lt.indexOf(vt)>=0)&&Object.prototype.propertyIsEnumerable.call(ft,vt)&&(dt[vt]=ft[vt])}return dt}function _toConsumableArray$2(ft){return _arrayWithoutHoles$2(ft)||_iterableToArray$2(ft)||_unsupportedIterableToArray$2(ft)||_nonIterableSpread$2()}function _arrayWithoutHoles$2(ft){if(Array.isArray(ft))return _arrayLikeToArray$2(ft)}function _iterableToArray$2(ft){if(typeof Symbol<"u"&&ft[Symbol.iterator]!=null||ft["@@iterator"]!=null)return Array.from(ft)}function _unsupportedIterableToArray$2(ft,lt){if(ft){if(typeof ft=="string")return _arrayLikeToArray$2(ft,lt);var dt=Object.prototype.toString.call(ft).slice(8,-1);if(dt==="Object"&&ft.constructor&&(dt=ft.constructor.name),dt==="Map"||dt==="Set")return Array.from(ft);if(dt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(dt))return _arrayLikeToArray$2(ft,lt)}}function _arrayLikeToArray$2(ft,lt){(lt==null||lt>ft.length)&&(lt=ft.length);for(var dt=0,vt=new Array(lt);dt<lt;dt++)vt[dt]=ft[dt];return vt}function _nonIterableSpread$2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function classList(ft){var lt,dt=ft.beat,vt=ft.fade,Tt=ft.beatFade,Et=ft.bounce,Ct=ft.shake,Rt=ft.flash,kt=ft.spin,Dt=ft.spinPulse,Bt=ft.spinReverse,Ft=ft.pulse,Ut=ft.fixedWidth,Zt=ft.inverse,Kt=ft.border,ln=ft.listItem,hn=ft.flip,dn=ft.size,pn=ft.rotation,mn=ft.pull,On=(lt={"fa-beat":dt,"fa-fade":vt,"fa-beat-fade":Tt,"fa-bounce":Et,"fa-shake":Ct,"fa-flash":Rt,"fa-spin":kt,"fa-spin-reverse":Bt,"fa-spin-pulse":Dt,"fa-pulse":Ft,"fa-fw":Ut,"fa-inverse":Zt,"fa-border":Kt,"fa-li":ln,"fa-flip":hn===!0,"fa-flip-horizontal":hn==="horizontal"||hn==="both","fa-flip-vertical":hn==="vertical"||hn==="both"},_defineProperty$4(lt,"fa-".concat(dn),typeof dn<"u"&&dn!==null),_defineProperty$4(lt,"fa-rotate-".concat(pn),typeof pn<"u"&&pn!==null&&pn!==0),_defineProperty$4(lt,"fa-pull-".concat(mn),typeof mn<"u"&&mn!==null),_defineProperty$4(lt,"fa-swap-opacity",ft.swapOpacity),lt);return Object.keys(On).map(function(bn){return On[bn]?bn:null}).filter(function(bn){return bn})}function _isNumerical(ft){return ft=ft-0,ft===ft}function camelize(ft){return _isNumerical(ft)?ft:(ft=ft.replace(/[\-_\s]+(.)?/g,function(lt,dt){return dt?dt.toUpperCase():""}),ft.substr(0,1).toLowerCase()+ft.substr(1))}var _excluded$3=["style"];function capitalize$1(ft){return ft.charAt(0).toUpperCase()+ft.slice(1)}function styleToObject(ft){return ft.split(";").map(function(lt){return lt.trim()}).filter(function(lt){return lt}).reduce(function(lt,dt){var vt=dt.indexOf(":"),Tt=camelize(dt.slice(0,vt)),Et=dt.slice(vt+1).trim();return Tt.startsWith("webkit")?lt[capitalize$1(Tt)]=Et:lt[Tt]=Et,lt},{})}function convert(ft,lt){var dt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof lt=="string")return lt;var vt=(lt.children||[]).map(function(kt){return convert(ft,kt)}),Tt=Object.keys(lt.attributes||{}).reduce(function(kt,Dt){var Bt=lt.attributes[Dt];switch(Dt){case"class":kt.attrs.className=Bt,delete lt.attributes.class;break;case"style":kt.attrs.style=styleToObject(Bt);break;default:Dt.indexOf("aria-")===0||Dt.indexOf("data-")===0?kt.attrs[Dt.toLowerCase()]=Bt:kt.attrs[camelize(Dt)]=Bt}return kt},{attrs:{}}),Et=dt.style,Ct=Et===void 0?{}:Et,Rt=_objectWithoutProperties$2(dt,_excluded$3);return Tt.attrs.style=_objectSpread2$1(_objectSpread2$1({},Tt.attrs.style),Ct),ft.apply(void 0,[lt.tag,_objectSpread2$1(_objectSpread2$1({},Tt.attrs),Rt)].concat(_toConsumableArray$2(vt)))}var PRODUCTION=!1;try{PRODUCTION=!0}catch(ft){}function log(){if(!PRODUCTION&&console&&typeof console.error=="function"){var ft;(ft=console).error.apply(ft,arguments)}}function normalizeIconArgs(ft){if(ft&&_typeof$1(ft)==="object"&&ft.prefix&&ft.iconName&&ft.icon)return ft;if(parse$1$1.icon)return parse$1$1.icon(ft);if(ft===null)return null;if(ft&&_typeof$1(ft)==="object"&&ft.prefix&&ft.iconName)return ft;if(Array.isArray(ft)&&ft.length===2)return{prefix:ft[0],iconName:ft[1]};if(typeof ft=="string")return{prefix:"fas",iconName:ft}}function objectWithKey(ft,lt){return Array.isArray(lt)&&lt.length>0||!Array.isArray(lt)&&lt?_defineProperty$4({},ft,lt):{}}var FontAwesomeIcon=React.forwardRef(function(ft,lt){var dt=ft.icon,vt=ft.mask,Tt=ft.symbol,Et=ft.className,Ct=ft.title,Rt=ft.titleId,kt=ft.maskId,Dt=normalizeIconArgs(dt),Bt=objectWithKey("classes",[].concat(_toConsumableArray$2(classList(ft)),_toConsumableArray$2(Et.split(" ")))),Ft=objectWithKey("transform",typeof ft.transform=="string"?parse$1$1.transform(ft.transform):ft.transform),Ut=objectWithKey("mask",normalizeIconArgs(vt)),Zt=icon(Dt,_objectSpread2$1(_objectSpread2$1(_objectSpread2$1(_objectSpread2$1({},Bt),Ft),Ut),{},{symbol:Tt,title:Ct,titleId:Rt,maskId:kt}));if(!Zt)return log("Could not find icon",Dt),null;var Kt=Zt.abstract,ln={ref:lt};return Object.keys(ft).forEach(function(hn){FontAwesomeIcon.defaultProps.hasOwnProperty(hn)||(ln[hn]=ft[hn])}),convertCurry(Kt[0],ln)});FontAwesomeIcon.displayName="FontAwesomeIcon";FontAwesomeIcon.propTypes={beat:PropTypes.bool,border:PropTypes.bool,beatFade:PropTypes.bool,bounce:PropTypes.bool,className:PropTypes.string,fade:PropTypes.bool,flash:PropTypes.bool,mask:PropTypes.oneOfType([PropTypes.object,PropTypes.array,PropTypes.string]),maskId:PropTypes.string,fixedWidth:PropTypes.bool,inverse:PropTypes.bool,flip:PropTypes.oneOf([!0,!1,"horizontal","vertical","both"]),icon:PropTypes.oneOfType([PropTypes.object,PropTypes.array,PropTypes.string]),listItem:PropTypes.bool,pull:PropTypes.oneOf(["right","left"]),pulse:PropTypes.bool,rotation:PropTypes.oneOf([0,90,180,270]),shake:PropTypes.bool,size:PropTypes.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:PropTypes.bool,spinPulse:PropTypes.bool,spinReverse:PropTypes.bool,symbol:PropTypes.oneOfType([PropTypes.bool,PropTypes.string]),title:PropTypes.string,titleId:PropTypes.string,transform:PropTypes.oneOfType([PropTypes.string,PropTypes.object]),swapOpacity:PropTypes.bool};FontAwesomeIcon.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var convertCurry=convert.bind(null,React.createElement),classnames={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(ft){(function(){var lt={}.hasOwnProperty;function dt(){for(var vt=[],Tt=0;Tt<arguments.length;Tt++){var Et=arguments[Tt];if(Et){var Ct=typeof Et;if(Ct==="string"||Ct==="number")vt.push(Et);else if(Array.isArray(Et)){if(Et.length){var Rt=dt.apply(null,Et);Rt&&vt.push(Rt)}}else if(Ct==="object"){if(Et.toString!==Object.prototype.toString&&!Et.toString.toString().includes("[native code]")){vt.push(Et.toString());continue}for(var kt in Et)lt.call(Et,kt)&&Et[kt]&&vt.push(kt)}}}return vt.join(" ")}ft.exports?(dt.default=dt,ft.exports=dt):window.classNames=dt})()})(classnames);var classnamesExports=classnames.exports;const classNames=getDefaultExportFromCjs(classnamesExports);var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React.createContext&&React.createContext(DefaultContext),__assign=globalThis&&globalThis.__assign||function(){return __assign=Object.assign||function(ft){for(var lt,dt=1,vt=arguments.length;dt<vt;dt++){lt=arguments[dt];for(var Tt in lt)Object.prototype.hasOwnProperty.call(lt,Tt)&&(ft[Tt]=lt[Tt])}return ft},__assign.apply(this,arguments)},__rest=globalThis&&globalThis.__rest||function(ft,lt){var dt={};for(var vt in ft)Object.prototype.hasOwnProperty.call(ft,vt)&&lt.indexOf(vt)<0&&(dt[vt]=ft[vt]);if(ft!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Tt=0,vt=Object.getOwnPropertySymbols(ft);Tt<vt.length;Tt++)lt.indexOf(vt[Tt])<0&&Object.prototype.propertyIsEnumerable.call(ft,vt[Tt])&&(dt[vt[Tt]]=ft[vt[Tt]]);return dt};function Tree2Element(ft){return ft&&ft.map(function(lt,dt){return React.createElement(lt.tag,__assign({key:dt},lt.attr),Tree2Element(lt.child))})}function GenIcon(ft){return function(lt){return React.createElement(IconBase,__assign({attr:__assign({},ft.attr)},lt),Tree2Element(ft.child))}}function IconBase(ft){var lt=function(dt){var vt=ft.attr,Tt=ft.size,Et=ft.title,Ct=__rest(ft,["attr","size","title"]),Rt=Tt||dt.size||"1em",kt;return dt.className&&(kt=dt.className),ft.className&&(kt=(kt?kt+" ":"")+ft.className),React.createElement("svg",__assign({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},dt.attr,vt,Ct,{className:kt,style:__assign(__assign({color:ft.color||dt.color},dt.style),ft.style),height:Rt,width:Rt,xmlns:"http://www.w3.org/2000/svg"}),Et&&React.createElement("title",null,Et),ft.children)};return IconContext!==void 0?React.createElement(IconContext.Consumer,null,function(dt){return lt(dt)}):lt(DefaultContext)}function HiChevronDown(ft){return GenIcon({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"}}]})(ft)}function HiStar(ft){return GenIcon({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor"},child:[{tag:"path",attr:{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"}}]})(ft)}function HiX(ft){return GenIcon({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"}}]})(ft)}function HiOutlineChevronDown(ft){return GenIcon({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"}}]})(ft)}function HiOutlineChevronLeft(ft){return GenIcon({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"}}]})(ft)}function HiOutlineChevronRight(ft){return GenIcon({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"}}]})(ft)}function HiOutlineChevronUp(ft){return GenIcon({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 15l7-7 7 7"}}]})(ft)}function HiOutlineX(ft){return GenIcon({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"}}]})(ft)}function isObject$1(ft){return ft!==null&&typeof ft=="object"&&ft.constructor===Object}function cloneDeep(ft){if(!isObject$1(ft))return ft;const lt={...ft};return Object.keys(ft).forEach(dt=>{lt[dt]=cloneDeep(ft[dt])}),lt}function mergeDeep(ft,lt){if(isObject$1(lt)&&Object.keys(lt).length===0)return cloneDeep({...ft,...lt});let dt={...ft,...lt};return isObject$1(lt)&&isObject$1(ft)&&Object.keys(lt).forEach(vt=>{isObject$1(lt[vt])&&vt in ft&&isObject$1(ft[vt])?dt[vt]=mergeDeep(ft[vt],lt[vt]):dt[vt]=isObject$1(lt[vt])?cloneDeep(lt[vt]):lt[vt]}),dt}const theme$1={accordion:{root:{base:"divide-y divide-gray-200 border-gray-200 dark:divide-gray-700 dark:border-gray-700",flush:{off:"rounded-lg border",on:"border-b"}},content:{base:"py-5 px-5 last:rounded-b-lg dark:bg-gray-900 first:rounded-t-lg"},title:{arrow:{base:"h-6 w-6 shrink-0",open:{off:"",on:"rotate-180"}},base:"flex w-full items-center justify-between first:rounded-t-lg last:rounded-b-lg py-5 px-5 text-left font-medium text-gray-500 dark:text-gray-400",flush:{off:"hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 dark:hover:bg-gray-800 dark:focus:ring-gray-800",on:"!bg-transparent dark:!bg-transparent"},heading:"",open:{off:"",on:"text-gray-900 bg-gray-100 dark:bg-gray-800 dark:text-white"}}},alert:{root:{base:"flex flex-col gap-2 p-4 text-sm",borderAccent:"border-t-4",wrapper:"flex items-center",color:{info:"text-blue-700 bg-blue-100 border-blue-500 dark:bg-blue-200 dark:text-blue-800",gray:"text-gray-700 bg-gray-100 border-gray-500 dark:bg-gray-700 dark:text-gray-300",failure:"text-red-700 bg-red-100 border-red-500 dark:bg-red-200 dark:text-red-800",success:"text-green-700 bg-green-100 border-green-500 dark:bg-green-200 dark:text-green-800",warning:"text-yellow-700 bg-yellow-100 border-yellow-500 dark:bg-yellow-200 dark:text-yellow-800"},icon:"mr-3 inline h-5 w-5 flex-shrink-0",rounded:"rounded-lg"},closeButton:{base:"-mx-1.5 -my-1.5 ml-auto inline-flex h-8 w-8 rounded-lg p-1.5 focus:ring-2",icon:"w-5 h-5",color:{info:"bg-blue-100 text-blue-500 hover:bg-blue-200 focus:ring-blue-400 dark:bg-blue-200 dark:text-blue-600 dark:hover:bg-blue-300",gray:"bg-gray-100 text-gray-500 hover:bg-gray-200 focus:ring-gray-400 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-800 dark:hover:text-white",failure:"bg-red-100 text-red-500 hover:bg-red-200 focus:ring-red-400 dark:bg-red-200 dark:text-red-600 dark:hover:bg-red-300",success:"bg-green-100 text-green-500 hover:bg-green-200 focus:ring-green-400 dark:bg-green-200 dark:text-green-600 dark:hover:bg-green-300",warning:"bg-yellow-100 text-yellow-500 hover:bg-yellow-200 focus:ring-yellow-400 dark:bg-yellow-200 dark:text-yellow-600 dark:hover:bg-yellow-300"}}},avatar:{root:{base:"flex justify-center items-center space-x-4",bordered:"p-1 ring-2",rounded:"!rounded-full",color:{dark:"ring-gray-800 dark:ring-gray-800",failure:"ring-red-500 dark:ring-red-700",gray:"ring-gray-500 dark:ring-gray-400",info:"ring-blue-400 dark:ring-blue-800",light:"ring-gray-300 dark:ring-gray-500",purple:"ring-purple-500 dark:ring-purple-600",success:"ring-green-500 dark:ring-green-500",warning:"ring-yellow-300 dark:ring-yellow-500",pink:"ring-pink-500 dark:ring-pink-500"},size:{xs:"w-6 h-6",sm:"w-8 h-8",md:"w-10 h-10",lg:"w-20 h-20",xl:"w-36 h-36"},stacked:"ring-2 ring-gray-300 dark:ring-gray-500",statusPosition:{"bottom-left":"-bottom-1 -left-1","bottom-center":"-botton-1 center","bottom-right":"-bottom-1 -right-1","top-left":"-top-1 -left-1","top-center":"-top-1 center","top-right":"-top-1 -right-1","center-right":"center -right-1",center:"center center","center-left":"center -left-1"}},img:{off:"rounded relative overflow-hidden bg-gray-100 dark:bg-gray-600",on:"rounded",placeholder:"absolute w-auto h-auto text-gray-400 -bottom-1"},status:{away:"bg-yellow-400",base:"absolute h-3.5 w-3.5 rounded-full border-2 border-white dark:border-gray-800",busy:"bg-red-400",offline:"bg-gray-400",online:"bg-green-400"},initials:{text:"font-medium text-gray-600 dark:text-gray-300",base:"inline-flex overflow-hidden relative justify-center items-center w-10 h-10 bg-gray-100 dark:bg-gray-600"}},avatarGroupCounter:{root:{base:"relative flex items-center justify-center w-10 h-10 text-xs font-medium text-white bg-gray-700 rounded-full ring-2 ring-gray-300 hover:bg-gray-600 dark:ring-gray-500"}},avatarGroup:{root:{base:"flex -space-x-4"}},badge:{root:{base:"flex h-fit items-center gap-1 font-semibold",color:{info:"bg-blue-100 text-blue-800 dark:bg-blue-200 dark:text-blue-800 group-hover:bg-blue-200 dark:group-hover:bg-blue-300",gray:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300 group-hover:bg-gray-200 dark:group-hover:bg-gray-600",failure:"bg-red-100 text-red-800 dark:bg-red-200 dark:text-red-900 group-hover:bg-red-200 dark:group-hover:bg-red-300",success:"bg-green-100 text-green-800 dark:bg-green-200 dark:text-green-900 group-hover:bg-green-200 dark:group-hover:bg-green-300",warning:"bg-yellow-100 text-yellow-800 dark:bg-yellow-200 dark:text-yellow-900 group-hover:bg-yellow-200 dark:group-hover:bg-yellow-300",indigo:"bg-indigo-100 text-indigo-800 dark:bg-indigo-200 dark:text-indigo-900 group-hover:bg-indigo-200 dark:group-hover:bg-indigo-300",purple:"bg-purple-100 text-purple-800 dark:bg-purple-200 dark:text-purple-900 group-hover:bg-purple-200 dark:group-hover:bg-purple-300",pink:"bg-pink-100 text-pink-800 dark:bg-pink-200 dark:text-pink-900 group-hover:bg-pink-200 dark:group-hover:bg-pink-300"},href:"group",size:{xs:"p-1 text-xs",sm:"p-1.5 text-sm"}},icon:{off:"rounded px-2 py-0.5",on:"rounded-full p-1.5",size:{xs:"w-3 h-3",sm:"w-3.5 h-3.5"}}},breadcrumb:{root:{base:"",list:"flex items-center"},item:{base:"group flex items-center",chevron:"mx-1 h-6 w-6 text-gray-400 group-first:hidden md:mx-2",href:{off:"flex items-center text-sm font-medium text-gray-500 dark:text-gray-400",on:"flex items-center text-sm font-medium text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white"},icon:"mr-2 h-4 w-4"}},button:{base:"group flex h-min items-center justify-center p-0.5 text-center font-medium focus:z-10",fullSized:"w-full",color:{dark:"text-white bg-gray-800 border border-transparent hover:bg-gray-900 focus:ring-4 focus:ring-gray-300 disabled:hover:bg-gray-800 dark:bg-gray-800 dark:hover:bg-gray-700 dark:focus:ring-gray-800 dark:border-gray-700 dark:disabled:hover:bg-gray-800",failure:"text-white bg-red-700 border border-transparent hover:bg-red-800 focus:ring-4 focus:ring-red-300 disabled:hover:bg-red-800 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900 dark:disabled:hover:bg-red-600",gray:"text-gray-900 bg-white border border-gray-200 hover:bg-gray-100 hover:text-blue-700 disabled:hover:bg-white focus:ring-blue-700 focus:text-blue-700 dark:bg-transparent dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700 focus:ring-2 dark:disabled:hover:bg-gray-800",info:"text-white bg-blue-700 border border-transparent hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 disabled:hover:bg-blue-700 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800 dark:disabled:hover:bg-blue-600",light:"text-gray-900 bg-white border border-gray-300 hover:bg-gray-100 focus:ring-4 focus:ring-blue-300 disabled:hover:bg-white dark:bg-gray-600 dark:text-white dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:border-gray-700 dark:focus:ring-gray-700",purple:"text-white bg-purple-700 border border-transparent hover:bg-purple-800 focus:ring-4 focus:ring-purple-300 disabled:hover:bg-purple-700 dark:bg-purple-600 dark:hover:bg-purple-700 dark:focus:ring-purple-900 dark:disabled:hover:bg-purple-600",success:"text-white bg-green-700 border border-transparent hover:bg-green-800 focus:ring-4 focus:ring-green-300 disabled:hover:bg-green-700 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800 dark:disabled:hover:bg-green-600",warning:"text-white bg-yellow-400 border border-transparent hover:bg-yellow-500 focus:ring-4 focus:ring-yellow-300 disabled:hover:bg-yellow-400 dark:focus:ring-yellow-900 dark:disabled:hover:bg-yellow-400"},disabled:"cursor-not-allowed opacity-50",gradient:{cyan:"text-white bg-gradient-to-r from-cyan-400 via-cyan-500 to-cyan-600 hover:bg-gradient-to-br focus:ring-4 focus:ring-cyan-300 dark:focus:ring-cyan-800",failure:"text-white bg-gradient-to-r from-red-400 via-red-500 to-red-600 hover:bg-gradient-to-br focus:ring-4 focus:ring-red-300 dark:focus:ring-red-800",info:"text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br focus:ring-4 focus:ring-blue-300 dark:focus:ring-blue-800 ",lime:"text-gray-900 bg-gradient-to-r from-lime-200 via-lime-400 to-lime-500 hover:bg-gradient-to-br focus:ring-4 focus:ring-lime-300 dark:focus:ring-lime-800",pink:"text-white bg-gradient-to-r from-pink-400 via-pink-500 to-pink-600 hover:bg-gradient-to-br focus:ring-4 focus:ring-pink-300 dark:focus:ring-pink-800",purple:"text-white bg-gradient-to-r from-purple-500 via-purple-600 to-purple-700 hover:bg-gradient-to-br focus:ring-4 focus:ring-purple-300 dark:focus:ring-purple-800",success:"text-white bg-gradient-to-r from-green-400 via-green-500 to-green-600 hover:bg-gradient-to-br focus:ring-4 focus:ring-green-300 dark:focus:ring-green-800",teal:"text-white bg-gradient-to-r from-teal-400 via-teal-500 to-teal-600 hover:bg-gradient-to-br focus:ring-4 focus:ring-teal-300 dark:focus:ring-teal-800"},gradientDuoTone:{cyanToBlue:"text-white bg-gradient-to-r from-cyan-500 to-blue-500 hover:bg-gradient-to-bl focus:ring-4 focus:ring-cyan-300 dark:focus:ring-cyan-800",greenToBlue:"text-white bg-gradient-to-br from-green-400 to-blue-600 hover:bg-gradient-to-bl focus:ring-4 focus:ring-green-200 dark:focus:ring-green-800",pinkToOrange:"text-white bg-gradient-to-br from-pink-500 to-orange-400 hover:bg-gradient-to-bl focus:ring-4 focus:ring-pink-200 dark:focus:ring-pink-800",purpleToBlue:"text-white bg-gradient-to-br from-purple-600 to-blue-500 hover:bg-gradient-to-bl focus:ring-4 focus:ring-blue-300 dark:focus:ring-blue-800",purpleToPink:"text-white bg-gradient-to-r from-purple-500 to-pink-500 hover:bg-gradient-to-l focus:ring-4 focus:ring-purple-200 dark:focus:ring-purple-800",redToYellow:"text-gray-900 bg-gradient-to-r from-red-200 via-red-300 to-yellow-200 hover:bg-gradient-to-bl focus:ring-4 focus:ring-red-100 dark:focus:ring-red-400",tealToLime:"text-gray-900 bg-gradient-to-r from-teal-200 to-lime-200 hover:bg-gradient-to-l hover:from-teal-200 hover:to-lime-200 hover:!text-gray-900 focus:ring-4 focus:ring-lime-200 dark:focus:ring-teal-700"},inner:{base:"flex items-center",position:{none:"",start:"rounded-r-none",middle:"!rounded-none",end:"rounded-l-none"},outline:"border border-transparent"},label:"ml-2 inline-flex h-4 w-4 items-center justify-center rounded-full bg-blue-200 text-xs font-semibold text-blue-800",outline:{color:{gray:"border border-gray-900 dark:border-white",default:"border-0",light:""},off:"",on:"!block bg-white text-gray-900 transition-all duration-75 ease-in group-hover:bg-opacity-0 group-hover:text-inherit dark:bg-gray-900 dark:text-white w-full",pill:{off:"rounded-md",on:"rounded-full"}},pill:{off:"rounded-lg",on:"rounded-full"},size:{xs:"text-xs px-2 py-1",sm:"text-sm px-3 py-1.5",md:"text-sm px-4 py-2",lg:"text-base px-5 py-2.5",xl:"text-base px-6 py-3"}},buttonGroup:{base:"inline-flex",position:{none:"focus:!ring-2",start:"rounded-r-none",middle:"!rounded-none border-l-0 pl-0",end:"rounded-l-none border-l-0 pl-0"}},card:{root:{base:"flex rounded-lg border border-gray-200 bg-white shadow-md dark:border-gray-700 dark:bg-gray-800",children:"flex h-full flex-col justify-center gap-4 p-6",horizontal:{off:"flex-col",on:"flex-col md:max-w-xl md:flex-row"},href:"hover:bg-gray-100 dark:hover:bg-gray-700"},img:{base:"",horizontal:{off:"rounded-t-lg",on:"h-96 w-full rounded-t-lg object-cover md:h-auto md:w-48 md:rounded-none md:rounded-l-lg"}}},carousel:{base:"relative h-full w-full",indicators:{active:{off:"bg-white/50 hover:bg-white dark:bg-gray-800/50 dark:hover:bg-gray-800",on:"bg-white dark:bg-gray-800"},base:"h-3 w-3 rounded-full",wrapper:"absolute bottom-5 left-1/2 flex -translate-x-1/2 space-x-3"},item:{base:"absolute top-1/2 left-1/2 block w-full -translate-x-1/2 -translate-y-1/2",wrapper:"w-full flex-shrink-0 transform cursor-grab snap-center"},control:{base:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-white/30 group-hover:bg-white/50 group-focus:outline-none group-focus:ring-4 group-focus:ring-white dark:bg-gray-800/30 dark:group-hover:bg-gray-800/60 dark:group-focus:ring-gray-800/70 sm:h-10 sm:w-10",icon:"h-5 w-5 text-white dark:text-gray-800 sm:h-6 sm:w-6"},leftControl:"absolute top-0 left-0 flex h-full items-center justify-center px-4 focus:outline-none",rightControl:"absolute top-0 right-0 flex h-full items-center justify-center px-4 focus:outline-none",scrollContainer:{base:"flex h-full snap-mandatory overflow-y-hidden overflow-x-scroll scroll-smooth rounded-lg",snap:"snap-x"}},darkThemeToggle:{base:"rounded-lg p-2.5 text-sm text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-700",icon:"h-5 w-5"},dropdown:{floating:{target:"w-fit",base:"z-10 w-fit rounded divide-y divide-gray-100 shadow",animation:"transition-opacity",hidden:"invisible opacity-0",style:{dark:"bg-gray-900 text-white dark:bg-gray-700",light:"border border-gray-200 bg-white text-gray-900",auto:"border border-gray-200 bg-white text-gray-900 dark:border-none dark:bg-gray-700 dark:text-white"},header:"block py-2 px-4 text-sm text-gray-700 dark:text-gray-200",content:"py-1 text-sm text-gray-700 dark:text-gray-200",arrow:{base:"absolute z-10 h-2 w-2 rotate-45",style:{dark:"bg-gray-900 dark:bg-gray-700",light:"bg-white",auto:"bg-white dark:bg-gray-700"},placement:"-4px"},item:{base:"flex items-center justify-start py-2 px-4 text-sm text-gray-700 cursor-pointer hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-600 dark:hover:text-white",icon:"mr-2 h-4 w-4"},divider:"my-1 h-px bg-gray-100 dark:bg-gray-600"},arrowIcon:"ml-2 h-4 w-4",inlineWrapper:"flex items-center",content:"py-1"},footer:{base:"w-full rounded-lg bg-white shadow dark:bg-gray-800 md:flex md:items-center md:justify-between",container:"w-full p-6",bgDark:"bg-gray-800",groupLink:{base:"flex flex-wrap text-sm text-gray-500 dark:text-white",link:{base:"last:mr-0 md:mr-6",href:"hover:underline"},col:"flex-col space-y-4"},icon:{base:"text-gray-500 dark:hover:text-white",size:"h-5 w-5"},title:{base:"mb-6 text-sm font-semibold uppercase text-gray-500 dark:text-white"},divider:{base:"w-full my-6 border-gray-200 sm:mx-auto dark:border-gray-700 lg:my-8"},copyright:{base:"text-sm text-gray-500 dark:text-gray-400 sm:text-center",href:"ml-1 hover:underline",span:"ml-1"},brand:{base:"mb-4 flex items-center sm:mb-0",img:"mr-3 h-8",span:"self-center whitespace-nowrap text-2xl font-semibold text-gray-800 dark:text-white"}},checkbox:{root:{base:"h-4 w-4 rounded border border-gray-300 bg-gray-100 focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800 dark:focus:ring-blue-600"}},fileInput:{base:"flex",field:{base:"relative w-full",input:{base:"rounded-lg overflow-hidden block w-full border disabled:cursor-not-allowed disabled:opacity-50",sizes:{sm:"sm:text-xs",md:"text-sm",lg:"sm:text-md"},colors:{gray:"bg-gray-50 border-gray-300 text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",info:"border-blue-500 bg-blue-50 text-blue-900 placeholder-blue-700 focus:border-blue-500 focus:ring-blue-500 dark:border-blue-400 dark:bg-blue-100 dark:focus:border-blue-500 dark:focus:ring-blue-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"}}}},label:{base:"text-sm font-medium",colors:{default:"text-gray-900 dark:text-gray-300",info:"text-blue-500 dark:text-blue-600",failure:"text-red-700 dark:text-red-500",warning:"text-yellow-500 dark:text-yellow-600",success:"text-green-700 dark:text-green-500"},disabled:"opacity-50"},radio:{root:{base:"h-4 w-4 border border-gray-300 focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:focus:bg-blue-600 dark:focus:ring-blue-600"}},rangeSlider:{base:"flex",field:{base:"relative w-full",input:{base:"w-full bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700",sizes:{sm:"h-1 range-sm",md:"h-2",lg:"h-3 range-lg"}}}},select:{base:"flex",addon:"inline-flex items-center rounded-l-md border border-r-0 border-gray-300 bg-gray-200 px-3 text-sm text-gray-900 dark:border-gray-600 dark:bg-gray-600 dark:text-gray-400",field:{base:"relative w-full",icon:{base:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",svg:"h-5 w-5 text-gray-500 dark:text-gray-400"},select:{base:"block w-full border disabled:cursor-not-allowed disabled:opacity-50",withIcon:{on:"pl-10",off:""},withAddon:{on:"rounded-r-lg",off:"rounded-lg"},withShadow:{on:"shadow-sm dark:shadow-sm-light",off:""},sizes:{sm:"p-2 sm:text-xs",md:"p-2.5 text-sm",lg:"sm:text-md p-4"},colors:{gray:"bg-gray-50 border-gray-300 text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",info:"border-blue-500 bg-blue-50 text-blue-900 placeholder-blue-700 focus:border-blue-500 focus:ring-blue-500 dark:border-blue-400 dark:bg-blue-100 dark:focus:border-blue-500 dark:focus:ring-blue-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"}}}},textInput:{base:"flex",addon:"inline-flex items-center rounded-l-md border border-r-0 border-gray-300 bg-gray-200 px-3 text-sm text-gray-900 dark:border-gray-600 dark:bg-gray-600 dark:text-gray-400",field:{base:"relative w-full",icon:{base:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",svg:"h-5 w-5 text-gray-500 dark:text-gray-400"},rightIcon:{base:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3",svg:"h-5 w-5 text-gray-500 dark:text-gray-400"},input:{base:"block w-full border disabled:cursor-not-allowed disabled:opacity-50",sizes:{sm:"p-2 sm:text-xs",md:"p-2.5 text-sm",lg:"sm:text-md p-4"},colors:{gray:"bg-gray-50 border-gray-300 text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",info:"border-blue-500 bg-blue-50 text-blue-900 placeholder-blue-700 focus:border-blue-500 focus:ring-blue-500 dark:border-blue-400 dark:bg-blue-100 dark:focus:border-blue-500 dark:focus:ring-blue-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"},withRightIcon:{on:"pr-10",off:""},withIcon:{on:"pl-10",off:""},withAddon:{on:"rounded-r-lg",off:"rounded-lg"},withShadow:{on:"shadow-sm dark:shadow-sm-light",off:""}}}},textarea:{base:"block w-full rounded-lg border disabled:cursor-not-allowed disabled:opacity-50",colors:{gray:"bg-gray-50 border-gray-300 text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",info:"border-blue-500 bg-blue-50 text-blue-900 placeholder-blue-700 focus:border-blue-500 focus:ring-blue-500 dark:border-blue-400 dark:bg-blue-100 dark:focus:border-blue-500 dark:focus:ring-blue-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"},withShadow:{on:"shadow-sm dark:shadow-sm-light",off:""}},toggleSwitch:{root:{base:"group relative flex items-center rounded-lg focus:outline-none",active:{on:"cursor-pointer",off:"cursor-not-allowed opacity-50"},label:"ml-3 text-sm font-medium text-gray-900 dark:text-gray-300"},toggle:{base:"toggle-bg h-6 w-11 rounded-full border group-focus:ring-4 group-focus:ring-blue-500/25",checked:{on:"after:translate-x-full after:border-white",off:"border-gray-200 bg-gray-200 dark:border-gray-600 dark:bg-gray-700",color:{blue:" bg-blue-700 border-blue-700",dark:"bg-dark-700 border-dark-900",failure:"bg-red-700 border-red-900",gray:"bg-gray-500 border-gray-600",green:"bg-green-600 border-green-700",light:"bg-light-700 border-light-900",red:"bg-red-700 border-red-900",purple:"bg-purple-700 border-purple-900",success:"bg-green-500 border-green-500",yellow:"bg-yellow-400 border-yellow-400",warning:"bg-yellow-600 border-yellow-600",cyan:"bg-cyan-500 border-cyan-500",lime:"bg-lime-400 border-lime-400",indigo:"bg-indigo-400 border-indigo-400",teal:"bg-gradient-to-r from-teal-400 via-teal-500 to-teal-600 hover:bg-gradient-to-br focus:ring-4",info:"bg-blue-600 border-blue-600",pink:"bg-pink-600 border-pink-600"}}}},helperText:{base:"mt-2 text-sm",colors:{gray:"text-gray-500 dark:text-gray-400",info:"text-blue-700 dark:text-blue-800",success:"text-green-600 dark:text-green-500",failure:"text-red-600 dark:text-red-500",warning:"text-yellow-500 dark:text-yellow-600"}},listGroup:{base:"list-none rounded-lg border border-gray-200 bg-white text-sm font-medium text-gray-900 dark:border-gray-600 dark:bg-gray-700 dark:text-white",item:{active:{off:"hover:bg-gray-100 hover:text-blue-700 focus:text-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-700 dark:border-gray-600 dark:hover:bg-gray-600 dark:hover:text-white dark:focus:text-white dark:focus:ring-gray-500",on:"bg-blue-700 text-white dark:bg-gray-800"},base:"flex w-full cursor-pointer border-b border-gray-200 py-2 px-4 first:rounded-t-lg last:rounded-b-lg last:border-b-0 dark:border-gray-600",href:{off:"",on:""},icon:"mr-2 h-4 w-4 fill-current"}},modal:{base:"fixed top-0 right-0 left-0 z-50 h-modal overflow-y-auto overflow-x-hidden md:inset-0 md:h-full",show:{on:"flex bg-gray-900 bg-opacity-50 dark:bg-opacity-80",off:"hidden"},content:{base:"relative h-full w-full p-4 md:h-auto",inner:"relative rounded-lg bg-white shadow dark:bg-gray-700"},body:{base:"p-6",popup:"pt-0"},header:{base:"flex items-start justify-between rounded-t dark:border-gray-600 border-b p-5",popup:"!p-2 !border-b-0",title:"text-xl font-medium text-gray-900 dark:text-white",close:{base:"ml-auto inline-flex items-center rounded-lg bg-transparent p-1.5 text-sm text-gray-400 hover:bg-gray-200 hover:text-gray-900 dark:hover:bg-gray-600 dark:hover:text-white",icon:"h-5 w-5"}},footer:{base:"flex items-center space-x-2 rounded-b border-gray-200 p-6 dark:border-gray-600",popup:"border-t"},sizes:{sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","3xl":"max-w-3xl","4xl":"max-w-4xl","5xl":"max-w-5xl","6xl":"max-w-6xl","7xl":"max-w-7xl"},positions:{"top-left":"items-start justify-start","top-center":"items-start justify-center","top-right":"items-start justify-end","center-left":"items-center justify-start",center:"items-center justify-center","center-right":"items-center justify-end","bottom-right":"items-end justify-end","bottom-center":"items-end justify-center","bottom-left":"items-end justify-start"}},navbar:{root:{base:"border-gray-200 bg-white px-2 py-2.5 dark:border-gray-700 dark:bg-gray-800 sm:px-4",rounded:{on:"rounded",off:""},bordered:{on:"border",off:""},inner:{base:"mx-auto flex flex-wrap items-center justify-between",fluid:{on:"",off:"container"}}},brand:{base:"flex items-center"},collapse:{base:"w-full md:block md:w-auto",list:"mt-4 flex flex-col md:mt-0 md:flex-row md:space-x-8 md:text-sm md:font-medium",hidden:{on:"hidden",off:""}},link:{base:"block py-2 pr-4 pl-3 md:p-0",active:{on:"bg-blue-700 text-white dark:text-white md:bg-transparent md:text-blue-700",off:"border-b border-gray-100  text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white md:border-0 md:hover:bg-transparent md:hover:text-blue-700 md:dark:hover:bg-transparent md:dark:hover:text-white"},disabled:{on:"text-gray-400 hover:cursor-not-allowed dark:text-gray-600",off:""}},toggle:{base:"inline-flex items-center rounded-lg p-2 text-sm text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600 md:hidden",icon:"h-6 w-6 shrink-0"}},rating:{base:"flex items-center",star:{sizes:{sm:"w-5 h-5",md:"w-7 h-7",lg:"w-10 h-10"},filled:"text-yellow-400",empty:"text-gray-300 dark:text-gray-500"},advanced:{base:"flex items-center",label:"text-sm font-medium text-blue-600 dark:text-blue-500",progress:{base:"mx-4 h-5 w-2/4 rounded bg-gray-200 dark:bg-gray-700",fill:"h-5 rounded bg-yellow-400",label:"text-sm font-medium text-blue-600 dark:text-blue-500"}}},pagination:{base:"",layout:{table:{base:"text-sm text-gray-700 dark:text-gray-400",span:"font-semibold text-gray-900 dark:text-white"}},pages:{base:"xs:mt-0 mt-2 inline-flex items-center -space-x-px",showIcon:"inline-flex",previous:{base:"ml-0 rounded-l-lg border border-gray-300 bg-white py-2 px-3 leading-tight text-gray-500 hover:bg-gray-100 hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",icon:"h-5 w-5"},next:{base:"rounded-r-lg border border-gray-300 bg-white py-2 px-3 leading-tight text-gray-500 hover:bg-gray-100 hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",icon:"h-5 w-5"},selector:{base:"w-12 border border-gray-300 bg-white py-2 leading-tight text-gray-500 hover:bg-gray-100 hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",active:"bg-blue-50 text-blue-600 hover:bg-blue-100 hover:text-blue-700 dark:border-gray-700 dark:bg-gray-700 dark:text-white"}}},sidebar:{base:"h-full",inner:"h-full overflow-y-auto overflow-x-hidden rounded bg-white py-4 px-3 dark:bg-gray-800",collapsed:{on:"w-16",off:"w-64"},collapse:{button:"group flex w-full items-center rounded-lg p-2 text-base font-normal text-gray-900 transition duration-75 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700",icon:{base:"h-6 w-6 text-gray-500 transition duration-75 group-hover:text-gray-900 dark:text-gray-400 dark:group-hover:text-white",open:{off:"",on:"text-gray-900"}},label:{base:"ml-3 flex-1 whitespace-nowrap text-left",icon:"h-6 w-6"},list:"space-y-2 py-2"},cta:{base:"mt-6 rounded-lg p-4",color:{blue:"bg-blue-50 dark:bg-blue-900",dark:"bg-dark-50 dark:bg-dark-900",failure:"bg-red-50 dark:bg-red-900",gray:"bg-alternative-50 dark:bg-alternative-900",green:"bg-green-50 dark:bg-green-900",light:"bg-light-50 dark:bg-light-900",red:"bg-red-50 dark:bg-red-900",purple:"bg-purple-50 dark:bg-purple-900",success:"bg-green-50 dark:bg-green-900",yellow:"bg-yellow-50 dark:bg-yellow-900",warning:"bg-yellow-50 dark:bg-yellow-900"}},item:{base:"flex items-center justify-center rounded-lg p-2 text-base font-normal text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700",active:"bg-gray-100 dark:bg-gray-700",collapsed:{insideCollapse:"group w-full pl-8 transition duration-75",noIcon:"font-bold"},content:{base:"px-3 flex-1 whitespace-nowrap"},icon:{base:"h-6 w-6 flex-shrink-0 text-gray-500 transition duration-75 group-hover:text-gray-900 dark:text-gray-400 dark:group-hover:text-white",active:"text-gray-700 dark:text-gray-100"},label:""},items:"",itemGroup:"mt-4 space-y-2 border-t border-gray-200 pt-4 first:mt-0 first:border-t-0 first:pt-0 dark:border-gray-700",logo:{base:"mb-5 flex items-center pl-2.5",collapsed:{on:"hidden",off:"self-center whitespace-nowrap text-xl font-semibold dark:text-white"},img:"mr-3 h-6 sm:h-7"}},progress:{base:"w-full overflow-hidden rounded-full bg-gray-200 dark:bg-gray-700",label:"mb-1 flex justify-between font-medium dark:text-white",bar:"flex items-center justify-center rounded-full text-center font-medium leading-none text-blue-100",color:{dark:"bg-gray-600 dark:bg-gray-300",blue:"bg-blue-600",red:"bg-red-600 dark:bg-red-500",green:"bg-green-600 dark:bg-green-500",yellow:"bg-yellow-400",indigo:"bg-indigo-600 dark:bg-indigo-500",purple:"bg-purple-600 dark:bg-purple-500"},size:{sm:"h-1.5",md:"h-2.5",lg:"h-4",xl:"h-6"}},spinner:{base:"inline animate-spin text-gray-200",color:{failure:"fill-red-600",gray:"fill-gray-600",info:"fill-blue-600",pink:"fill-pink-600",purple:"fill-purple-600",success:"fill-green-500",warning:"fill-yellow-400"},light:{off:{base:"dark:text-gray-600",color:{failure:"",gray:"dark:fill-gray-300",info:"",pink:"",purple:"",success:"",warning:""}},on:{base:"",color:{failure:"",gray:"",info:"",pink:"",purple:"",success:"",warning:""}}},size:{xs:"w-3 h-3",sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8",xl:"w-10 h-10"}},tab:{base:"flex flex-col gap-2",tablist:{base:"flex text-center",styles:{default:"flex-wrap border-b border-gray-200 dark:border-gray-700",underline:"flex-wrap -mb-px border-b border-gray-200 dark:border-gray-700",pills:"flex-wrap font-medium text-sm text-gray-500 dark:text-gray-400",fullWidth:"hidden text-sm font-medium rounded-lg divide-x divide-gray-200 shadow sm:flex dark:divide-gray-700 dark:text-gray-400"},tabitem:{base:"flex items-center justify-center p-4 text-sm font-medium first:ml-0 disabled:cursor-not-allowed disabled:text-gray-400 disabled:dark:text-gray-500",styles:{default:{base:"rounded-t-lg",active:{on:"bg-gray-100 text-blue-600 dark:bg-gray-800 dark:text-blue-500",off:"text-gray-500 hover:bg-gray-50 hover:text-gray-600 dark:text-gray-400 dark:hover:bg-gray-800  dark:hover:text-gray-300"}},underline:{base:"rounded-t-lg",active:{on:"text-blue-600 rounded-t-lg border-b-2 border-blue-600 active dark:text-blue-500 dark:border-blue-500",off:"border-b-2 border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-600 dark:text-gray-400 dark:hover:text-gray-300"}},pills:{base:"",active:{on:"rounded-lg bg-blue-600 text-white",off:"rounded-lg hover:text-gray-900 hover:bg-gray-100 dark:hover:bg-gray-800 dark:hover:text-white"}},fullWidth:{base:"ml-2 first:ml-0 w-full first:rounded-l-lg last:rounded-r-lg",active:{on:"inline-block p-4 w-full text-gray-900 bg-gray-100 focus:ring-4 focus:ring-blue-300 active focus:outline-none dark:bg-gray-700 dark:text-white",off:"bg-white hover:text-gray-700 hover:bg-gray-50 focus:ring-4 focus:ring-blue-300 focus:outline-none dark:hover:text-white dark:bg-gray-800 dark:hover:bg-gray-700"}}},icon:"mr-2 h-5 w-5"}},tabpanel:"p-4"},toast:{base:"flex w-full max-w-xs items-center rounded-lg bg-white p-4 text-gray-500 shadow dark:bg-gray-800 dark:text-gray-400",closed:"opacity-0 ease-out",removed:"hidden",toggle:{base:"-mx-1.5 -my-1.5 ml-auto inline-flex h-8 w-8 rounded-lg bg-white p-1.5 text-gray-400 hover:bg-gray-100 hover:text-gray-900 focus:ring-2 focus:ring-gray-300 dark:bg-gray-800 dark:text-gray-500 dark:hover:bg-gray-700 dark:hover:text-white",icon:"h-5 w-5 shrink-0"}},tooltip:{target:"w-fit",base:"absolute inline-block z-10 rounded-lg py-2 px-3 text-sm font-medium shadow-sm",animation:"transition-opacity",hidden:"invisible opacity-0",style:{dark:"bg-gray-900 text-white dark:bg-gray-700",light:"border border-gray-200 bg-white text-gray-900",auto:"border border-gray-200 bg-white text-gray-900 dark:border-none dark:bg-gray-700 dark:text-white"},content:"relative z-20",arrow:{base:"absolute z-10 h-2 w-2 rotate-45",style:{dark:"bg-gray-900 dark:bg-gray-700",light:"bg-white",auto:"bg-white dark:bg-gray-700"},placement:"-4px"}},table:{wrapper:"relative overflow-x-auto shadow-md sm:rounded-lg",base:"w-full text-left text-sm text-gray-500 dark:text-gray-400",head:{base:"bg-gray-50 text-xs uppercase text-gray-700 dark:bg-gray-700 dark:text-gray-400",cell:{base:"px-6 py-3"}},row:{hovered:"hover:bg-gray-50 dark:hover:bg-gray-600",striped:"odd:bg-white even:bg-gray-50 odd:dark:bg-gray-800 even:dark:bg-gray-700"},cell:{base:"px-6 py-4"}},timeline:{direction:{horizontal:"items-base sm:flex",vertical:"relative border-l border-gray-200 dark:border-gray-700"},item:{base:{horizontal:"relative mb-6 sm:mb-0",vertical:"mb-10 ml-6"},point:{base:{horizontal:"flex items-center",vertical:""},marker:{base:{horizontal:"absolute -left-1.5 h-3 w-3 rounded-full border border-white bg-gray-200 dark:border-gray-900 dark:bg-gray-700",vertical:"absolute -left-1.5 mt-1.5 h-3 w-3 rounded-full border border-white bg-gray-200 dark:border-gray-900 dark:bg-gray-700"},icon:{wrapper:"absolute -left-3 flex h-6 w-6 items-center justify-center rounded-full bg-blue-200 ring-8 ring-white dark:bg-blue-900 dark:ring-gray-900",base:"h-3 w-3 text-blue-600 dark:text-blue-300"}},line:"hidden h-0.5 w-full bg-gray-200 dark:bg-gray-700 sm:flex"},content:{base:"mt-3 sm:pr-8",time:"mb-1 text-sm font-normal leading-none text-gray-400 dark:text-gray-500",title:"text-lg font-semibold text-gray-900 dark:text-white",body:"mb-4 text-base font-normal text-gray-500 dark:text-gray-400"}}}},ThemeContext=reactExports.createContext({theme:theme$1});function useTheme(){return reactExports.useContext(ThemeContext)}const AccordionPanelContext=reactExports.createContext(void 0);function useAccordionContext(){const ft=reactExports.useContext(AccordionPanelContext);if(!ft)throw new Error("useAccordionContext should be used within the AccordionPanelContext provider!");return ft}const AccordionContent=({children:ft,className:lt,theme:dt={},...vt})=>{const{isOpen:Tt}=useAccordionContext(),Et=mergeDeep(useTheme().theme.accordion.content,dt);return jsx("div",{className:classNames(Et.base,lt),"data-testid":"flowbite-accordion-content",hidden:!Tt,...vt,children:ft})},AccordionPanel=({children:ft,...lt})=>{const{alwaysOpen:dt}=lt,[vt,Tt]=reactExports.useState(lt.isOpen),Et=dt?{...lt,isOpen:vt,setOpen:()=>Tt(!vt)}:lt;return jsx(AccordionPanelContext.Provider,{value:Et,children:ft})},AccordionTitle=({as:ft="h2",children:lt,className:dt,theme:vt={},...Tt})=>{const{arrowIcon:Et,flush:Ct,isOpen:Rt,setOpen:kt}=useAccordionContext(),Dt=()=>typeof kt<"u"&&kt(),Bt=mergeDeep(useTheme().theme.accordion.title,vt);return jsxs("button",{className:classNames(Bt.base,Bt.flush[Ct?"on":"off"],Bt.open[Rt?"on":"off"],dt),onClick:Dt,type:"button",...Tt,children:[jsx(ft,{className:Bt.heading,"data-testid":"flowbite-accordion-heading",children:lt}),Et&&jsx(Et,{"aria-hidden":!0,className:classNames(Bt.arrow.base,Bt.arrow.open[Rt?"on":"off"]),"data-testid":"flowbite-accordion-arrow"})]})},AccordionComponent=({alwaysOpen:ft=!1,arrowIcon:lt=HiChevronDown,children:dt,flush:vt=!1,collapseAll:Tt=!1,className:Et,theme:Ct={},...Rt})=>{const[kt,Dt]=reactExports.useState(Tt?-1:0),Bt=reactExports.useMemo(()=>reactExports.Children.map(dt,(Ut,Zt)=>reactExports.cloneElement(Ut,{alwaysOpen:ft,arrowIcon:lt,flush:vt,isOpen:kt===Zt,setOpen:()=>Dt(Zt)})),[ft,lt,dt,vt,kt]),Ft=mergeDeep(useTheme().theme.accordion.root,Ct);return jsx("div",{className:classNames(Ft.base,Ft.flush[vt?"on":"off"],Et),"data-testid":"flowbite-accordion",...Rt,children:Bt})};AccordionComponent.displayName="Accordion";AccordionPanel.displayName="Accordion.Panel";AccordionTitle.displayName="Accordion.Title";AccordionContent.displayName="Accordion.Content";Object.assign(AccordionComponent,{Panel:AccordionPanel,Title:AccordionTitle,Content:AccordionContent});const AvatarGroup=({children:ft,className:lt,theme:dt={},...vt})=>{const Tt=mergeDeep(useTheme().theme.avatarGroup.root,dt);return jsx("div",{"data-testid":"avatar-group-element",className:classNames(Tt.base,lt),...vt,children:ft})};AvatarGroup.displayName="Avatar.Group";const AvatarGroupCounter=({total:ft,href:lt,className:dt,theme:vt={}})=>{const Tt=mergeDeep(useTheme().theme.avatarGroupCounter.root,vt);return jsxs("a",{className:classNames(Tt.base,dt),href:lt,children:["+",ft]})};AvatarGroupCounter.displayName="Avatar.GroupCounter";const AvatarComponent=({alt:ft="",bordered:lt=!1,children:dt,img:vt,color:Tt="light",rounded:Et=!1,size:Ct="md",stacked:Rt=!1,status:kt,statusPosition:Dt="top-left",placeholderInitials:Bt="",className:Ft,theme:Ut={},...Zt})=>{const Kt=mergeDeep(useTheme().theme.avatar,Ut),ln=classNames(lt&&Kt.root.bordered,lt&&Kt.root.color[Tt],Et&&Kt.root.rounded,Rt&&Kt.root.stacked,Kt.img.on,Kt.root.size[Ct]),hn={alt:ft,className:classNames(ln,Kt.img.on),"data-testid":"flowbite-avatar-img"};return jsxs("div",{className:classNames(Kt.root.base,Ft),"data-testid":"flowbite-avatar",...Zt,children:[jsxs("div",{className:"relative",children:[vt?typeof vt=="string"?jsx("img",{...hn,src:vt}):vt(hn):Bt?jsx("div",{className:classNames(Kt.img.off,Kt.initials.base,Et&&Kt.root.rounded,Rt&&Kt.root.stacked,lt&&Kt.root.bordered,lt&&Kt.root.color[Tt]),"data-testid":"flowbite-avatar-initials-placeholder",children:jsx("span",{className:classNames(Kt.initials.text),"data-testid":"flowbite-avatar-initials-placeholder-text",children:Bt})}):jsx("div",{className:classNames(ln,Kt.img.off),"data-testid":"flowbite-avatar-img",children:jsx("svg",{className:Kt.img.placeholder,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),kt&&jsx("span",{"data-testid":"flowbite-avatar-status",className:classNames(Kt.status.base,Kt.status[kt],Kt.root.statusPosition[Dt])})]}),dt&&jsx("div",{children:dt})]})};AvatarComponent.displayName="Avatar";Object.assign(AvatarComponent,{Group:AvatarGroup,Counter:AvatarGroupCounter});const Badge=({children:ft,color:lt="info",href:dt,icon:vt,size:Tt="xs",className:Et,theme:Ct={},...Rt})=>{const kt=mergeDeep(useTheme().theme.badge,Ct),Dt=()=>jsxs("span",{className:classNames(kt.root.base,kt.root.color[lt],kt.icon[vt?"on":"off"],kt.root.size[Tt],Et),"data-testid":"flowbite-badge",...Rt,children:[vt&&jsx(vt,{"aria-hidden":!0,className:kt.icon.size[Tt],"data-testid":"flowbite-badge-icon"}),ft&&jsx("span",{children:ft})]});return dt?jsx("a",{className:kt.root.href,href:dt,children:jsx(Dt,{})}):jsx(Dt,{})},BreadcrumbItem=reactExports.forwardRef(({children:ft,className:lt,href:dt,icon:vt,theme:Tt={},...Et},Ct)=>{const Rt=typeof dt<"u",kt=Rt?"a":"span",Dt=mergeDeep(useTheme().theme.breadcrumb.item,Tt);return jsxs("li",{className:classNames(Dt.base,lt),...Et,children:[jsx(HiOutlineChevronRight,{"aria-hidden":!0,className:Dt.chevron,"data-testid":"flowbite-breadcrumb-separator"}),jsxs(kt,{ref:Ct,className:Dt.href[Rt?"on":"off"],"data-testid":"flowbite-breadcrumb-item",href:dt,children:[vt&&jsx(vt,{"aria-hidden":!0,className:Dt.icon}),ft]})]})});BreadcrumbItem.displayName="Breadcrumb.Item";const BreadcrumbComponent=({children:ft,className:lt,theme:dt={},...vt})=>{const Tt=mergeDeep(useTheme().theme.breadcrumb.root,dt);return jsx("nav",{"aria-label":"Breadcrumb",className:classNames(Tt.base,lt),...vt,children:jsx("ol",{className:Tt.list,children:ft})})};BreadcrumbComponent.displayName="Breadcrumb";Object.assign(BreadcrumbComponent,{Item:BreadcrumbItem});const ButtonGroup=({children:ft,outline:lt,pill:dt,className:vt,...Tt})=>{const Et=reactExports.useMemo(()=>reactExports.Children.map(ft,(Rt,kt)=>reactExports.cloneElement(Rt,{outline:lt,pill:dt,positionInGroup:kt===0?"start":kt===ft.length-1?"end":"middle"})),[ft,lt,dt]),Ct=useTheme().theme.buttonGroup;return jsx("div",{className:classNames(Ct.base,vt),role:"group",...Tt,children:Et})};ButtonGroup.displayName="Button.Group";const ButtonComponent=reactExports.forwardRef(({children:ft,color:lt="info",disabled:dt=!1,gradientDuoTone:vt,gradientMonochrome:Tt,href:Et,label:Ct,outline:Rt=!1,pill:kt=!1,fullSized:Dt,positionInGroup:Bt="none",size:Ft="md",className:Ut,...Zt},Kt)=>{const ln=typeof Et<"u",{buttonGroup:hn,button:dn}=useTheme().theme,pn=ln?"a":"button",mn=Zt;return jsx(pn,{className:classNames(dt&&dn.disabled,!vt&&!Tt&&dn.color[lt],vt&&!Tt&&dn.gradientDuoTone[vt],!vt&&Tt&&dn.gradient[Tt],hn.position[Bt],Rt&&(dn.outline.color[lt]??dn.outline.color.default),dn.base,dn.pill[kt?"on":"off"],Dt&&dn.fullSized,Ut),disabled:dt,href:Et,type:ln?void 0:"button",ref:Kt,...mn,children:jsx("span",{className:classNames(dn.inner.base,dn.inner.position[Bt],dn.outline[Rt?"on":"off"],dn.outline.pill[Rt&&kt?"on":"off"],dn.size[Ft],Rt&&!dn.outline.color[lt]&&dn.inner.outline),children:jsxs(Fragment,{children:[typeof ft<"u"&&ft,typeof Ct<"u"&&jsx("span",{className:dn.label,"data-testid":"flowbite-button-label",children:Ct})]})})})});ButtonComponent.displayName="Button";const Button=Object.assign(ButtonComponent,{Group:ButtonGroup});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var n$3=function(ft,lt){return(n$3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(dt,vt){dt.__proto__=vt}||function(dt,vt){for(var Tt in vt)vt.hasOwnProperty(Tt)&&(dt[Tt]=vt[Tt])})(ft,lt)},o$3,r$3,i$5=(function(ft){/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){var lt={}.hasOwnProperty;function dt(){for(var vt=[],Tt=0;Tt<arguments.length;Tt++){var Et=arguments[Tt];if(Et){var Ct=typeof Et;if(Ct==="string"||Ct==="number")vt.push(Et);else if(Array.isArray(Et)&&Et.length){var Rt=dt.apply(null,Et);Rt&&vt.push(Rt)}else if(Ct==="object")for(var kt in Et)lt.call(Et,kt)&&Et[kt]&&vt.push(kt)}}return vt.join(" ")}ft.exports?(dt.default=dt,ft.exports=dt):window.classNames=dt})()}(r$3={path:o$3,exports:{},require:function(ft,lt){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(lt==null&&r$3.path)}},r$3.exports),r$3.exports);function s$2(ft,lt,dt){var vt,Tt,Et,Ct,Rt;function kt(){var Bt=Date.now()-Ct;Bt<lt&&Bt>=0?vt=setTimeout(kt,lt-Bt):(vt=null,dt||(Rt=ft.apply(Et,Tt),Et=Tt=null))}lt==null&&(lt=100);var Dt=function(){Et=this,Tt=arguments,Ct=Date.now();var Bt=dt&&!vt;return vt||(vt=setTimeout(kt,lt)),Bt&&(Rt=ft.apply(Et,Tt),Et=Tt=null),Rt};return Dt.clear=function(){vt&&(clearTimeout(vt),vt=null)},Dt.flush=function(){vt&&(Rt=ft.apply(Et,Tt),Et=Tt=null,clearTimeout(vt),vt=null)},Dt}s$2.debounce=s$2;var l$5=s$2;(function(ft,lt){lt===void 0&&(lt={});var dt=lt.insertAt;if(ft&&typeof document<"u"){var vt=document.head||document.getElementsByTagName("head")[0],Tt=document.createElement("style");Tt.type="text/css",dt==="top"&&vt.firstChild?vt.insertBefore(Tt,vt.firstChild):vt.appendChild(Tt),Tt.styleSheet?Tt.styleSheet.cssText=ft:Tt.appendChild(document.createTextNode(ft))}})(`.indiana-scroll-container {
  overflow: auto; }
  .indiana-scroll-container--dragging {
    scroll-behavior: auto !important; }
    .indiana-scroll-container--dragging > * {
      pointer-events: none;
      cursor: -webkit-grab;
      cursor: grab; }
  .indiana-scroll-container--hide-scrollbars {
    overflow: hidden;
    overflow: -moz-scrollbars-none;
    -ms-overflow-style: none;
    scrollbar-width: none; }
    .indiana-scroll-container--hide-scrollbars::-webkit-scrollbar {
      display: none !important;
      height: 0 !important;
      width: 0 !important;
      background: transparent !important;
      -webkit-appearance: none !important; }
  .indiana-scroll-container--native-scroll {
    overflow: auto; }

.indiana-dragging {
  cursor: -webkit-grab;
  cursor: grab; }
`);var a$2,c$5=(a$2="indiana-scroll-container",function(ft,lt){if(!ft)return a$2;var dt;typeof ft=="string"?dt=ft:lt=ft;var vt=a$2;return dt&&(vt+="__"+dt),vt+(lt?Object.keys(lt).reduce(function(Tt,Et){var Ct=lt[Et];return Ct&&(Tt+=" "+(typeof Ct=="boolean"?vt+"--"+Et:vt+"--"+Et+"_"+Ct)),Tt},""):"")});(function(ft){function lt(dt){var vt=ft.call(this,dt)||this;return vt.onEndScroll=function(){vt.scrolling=!1,!vt.pressed&&vt.started&&vt.processEnd()},vt.onScroll=function(Tt){var Et=vt.container.current;Et.scrollLeft===vt.scrollLeft&&Et.scrollTop===vt.scrollTop||(vt.scrolling=!0,vt.processScroll(Tt),vt.onEndScroll())},vt.onTouchStart=function(Tt){var Et=vt.props.nativeMobileScroll;if(vt.isDraggable(Tt.target))if(vt.internal=!0,Et&&vt.scrolling)vt.pressed=!0;else{var Ct=Tt.touches[0];vt.processClick(Tt,Ct.clientX,Ct.clientY),!Et&&vt.props.stopPropagation&&Tt.stopPropagation()}},vt.onTouchEnd=function(Tt){var Et=vt.props.nativeMobileScroll;vt.pressed&&(!vt.started||vt.scrolling&&Et?vt.pressed=!1:vt.processEnd(),vt.forceUpdate())},vt.onTouchMove=function(Tt){var Et=vt.props.nativeMobileScroll;if(vt.pressed&&(!Et||!vt.isMobile)){var Ct=Tt.touches[0];Ct&&vt.processMove(Tt,Ct.clientX,Ct.clientY),Tt.preventDefault(),vt.props.stopPropagation&&Tt.stopPropagation()}},vt.onMouseDown=function(Tt){vt.isDraggable(Tt.target)&&vt.isScrollable()&&(vt.internal=!0,vt.props.buttons.indexOf(Tt.button)!==-1&&(vt.processClick(Tt,Tt.clientX,Tt.clientY),Tt.preventDefault(),vt.props.stopPropagation&&Tt.stopPropagation()))},vt.onMouseMove=function(Tt){vt.pressed&&(vt.processMove(Tt,Tt.clientX,Tt.clientY),Tt.preventDefault(),vt.props.stopPropagation&&Tt.stopPropagation())},vt.onMouseUp=function(Tt){vt.pressed&&(vt.started?vt.processEnd():(vt.internal=!1,vt.pressed=!1,vt.forceUpdate(),vt.props.onClick&&vt.props.onClick(Tt)),Tt.preventDefault(),vt.props.stopPropagation&&Tt.stopPropagation())},vt.container=React.createRef(),vt.onEndScroll=l$5(vt.onEndScroll,300),vt.scrolling=!1,vt.started=!1,vt.pressed=!1,vt.internal=!1,vt.getRef=vt.getRef.bind(vt),vt}return function(dt,vt){function Tt(){this.constructor=dt}n$3(dt,vt),dt.prototype=vt===null?Object.create(vt):(Tt.prototype=vt.prototype,new Tt)}(lt,ft),lt.prototype.componentDidMount=function(){var dt=this.props.nativeMobileScroll,vt=this.container.current;window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd),vt.addEventListener("touchstart",this.onTouchStart,{passive:!1}),vt.addEventListener("mousedown",this.onMouseDown,{passive:!1}),dt&&(this.isMobile=this.isMobileDevice(),this.isMobile&&this.forceUpdate())},lt.prototype.componentWillUnmount=function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},lt.prototype.getElement=function(){return this.container.current},lt.prototype.isMobileDevice=function(){return window.orientation!==void 0||navigator.userAgent.indexOf("IEMobile")!==-1},lt.prototype.isDraggable=function(dt){var vt=this.props.ignoreElements;if(vt){var Tt=dt.closest(vt);return Tt===null||Tt.contains(this.getElement())}return!0},lt.prototype.isScrollable=function(){var dt=this.container.current;return dt&&(dt.scrollWidth>dt.clientWidth||dt.scrollHeight>dt.clientHeight)},lt.prototype.processClick=function(dt,vt,Tt){var Et=this.container.current;this.scrollLeft=Et.scrollLeft,this.scrollTop=Et.scrollTop,this.clientX=vt,this.clientY=Tt,this.pressed=!0},lt.prototype.processStart=function(dt){dt===void 0&&(dt=!0);var vt=this.props.onStartScroll;this.started=!0,dt&&document.body.classList.add("indiana-dragging"),vt&&vt({external:!this.internal}),this.forceUpdate()},lt.prototype.processScroll=function(dt){if(this.started){var vt=this.props.onScroll;vt&&vt({external:!this.internal})}else this.processStart(!1)},lt.prototype.processMove=function(dt,vt,Tt){var Et=this.props,Ct=Et.horizontal,Rt=Et.vertical,kt=Et.activationDistance,Dt=Et.onScroll,Bt=this.container.current;this.started?(Ct&&(Bt.scrollLeft-=vt-this.clientX),Rt&&(Bt.scrollTop-=Tt-this.clientY),Dt&&Dt({external:!this.internal}),this.clientX=vt,this.clientY=Tt,this.scrollLeft=Bt.scrollLeft,this.scrollTop=Bt.scrollTop):(Ct&&Math.abs(vt-this.clientX)>kt||Rt&&Math.abs(Tt-this.clientY)>kt)&&(this.clientX=vt,this.clientY=Tt,this.processStart())},lt.prototype.processEnd=function(){var dt=this.props.onEndScroll;this.container.current&&dt&&dt({external:!this.internal}),this.pressed=!1,this.started=!1,this.scrolling=!1,this.internal=!1,document.body.classList.remove("indiana-dragging"),this.forceUpdate()},lt.prototype.getRef=function(dt){[this.container,this.props.innerRef].forEach(function(vt){vt&&(typeof vt=="function"?vt(dt):vt.current=dt)})},lt.prototype.render=function(){var dt=this.props,vt=dt.children,Tt=dt.draggingClassName,Et=dt.className,Ct=dt.style,Rt=dt.hideScrollbars,kt=dt.component;return React.createElement(kt,{className:i$5(Et,this.pressed&&Tt,c$5({dragging:this.pressed,"hide-scrollbars":Rt,"native-scroll":this.isMobile})),style:Ct,ref:this.getRef,onScroll:this.onScroll},vt)},lt.defaultProps={nativeMobileScroll:!0,hideScrollbars:!0,activationDistance:10,vertical:!0,horizontal:!0,stopPropagation:!1,style:{},component:"div",buttons:[0]},lt})(reactExports.PureComponent);const Checkbox=reactExports.forwardRef(({theme:ft={},className:lt,...dt},vt)=>{const Tt=mergeDeep(useTheme().theme.checkbox,ft);return jsx("input",{ref:vt,className:classNames(Tt.root.base,lt),type:"checkbox",...dt})});Checkbox.displayName="Checkbox";function uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(ft){const lt=Math.random()*16|0;return(ft=="x"?lt:lt&3|8).toString(16)})}function t$1(ft){return ft.split("-")[1]}function e(ft){return ft==="y"?"height":"width"}function n$2(ft){return ft.split("-")[0]}function o$2(ft){return["top","bottom"].includes(n$2(ft))?"x":"y"}function r$2(ft,lt,dt){let{reference:vt,floating:Tt}=ft;const Et=vt.x+vt.width/2-Tt.width/2,Ct=vt.y+vt.height/2-Tt.height/2,Rt=o$2(lt),kt=e(Rt),Dt=vt[kt]/2-Tt[kt]/2,Bt=Rt==="x";let Ft;switch(n$2(lt)){case"top":Ft={x:Et,y:vt.y-Tt.height};break;case"bottom":Ft={x:Et,y:vt.y+vt.height};break;case"right":Ft={x:vt.x+vt.width,y:Ct};break;case"left":Ft={x:vt.x-Tt.width,y:Ct};break;default:Ft={x:vt.x,y:vt.y}}switch(t$1(lt)){case"start":Ft[Rt]-=Dt*(dt&&Bt?-1:1);break;case"end":Ft[Rt]+=Dt*(dt&&Bt?-1:1)}return Ft}const i$4=async(ft,lt,dt)=>{const{placement:vt="bottom",strategy:Tt="absolute",middleware:Et=[],platform:Ct}=dt,Rt=Et.filter(Boolean),kt=await(Ct.isRTL==null?void 0:Ct.isRTL(lt));let Dt=await Ct.getElementRects({reference:ft,floating:lt,strategy:Tt}),{x:Bt,y:Ft}=r$2(Dt,vt,kt),Ut=vt,Zt={},Kt=0;for(let ln=0;ln<Rt.length;ln++){const{name:hn,fn:dn}=Rt[ln],{x:pn,y:mn,data:On,reset:bn}=await dn({x:Bt,y:Ft,initialPlacement:vt,placement:Ut,strategy:Tt,middlewareData:Zt,rects:Dt,platform:Ct,elements:{reference:ft,floating:lt}});Bt=pn??Bt,Ft=mn??Ft,Zt={...Zt,[hn]:{...Zt[hn],...On}},bn&&Kt<=50&&(Kt++,typeof bn=="object"&&(bn.placement&&(Ut=bn.placement),bn.rects&&(Dt=bn.rects===!0?await Ct.getElementRects({reference:ft,floating:lt,strategy:Tt}):bn.rects),{x:Bt,y:Ft}=r$2(Dt,Ut,kt)),ln=-1)}return{x:Bt,y:Ft,placement:Ut,strategy:Tt,middlewareData:Zt}};function a$1(ft){return typeof ft!="number"?function(lt){return{top:0,right:0,bottom:0,left:0,...lt}}(ft):{top:ft,right:ft,bottom:ft,left:ft}}function l$4(ft){return{...ft,top:ft.y,left:ft.x,right:ft.x+ft.width,bottom:ft.y+ft.height}}async function s$1(ft,lt){var dt;lt===void 0&&(lt={});const{x:vt,y:Tt,platform:Et,rects:Ct,elements:Rt,strategy:kt}=ft,{boundary:Dt="clippingAncestors",rootBoundary:Bt="viewport",elementContext:Ft="floating",altBoundary:Ut=!1,padding:Zt=0}=lt,Kt=a$1(Zt),ln=Rt[Ut?Ft==="floating"?"reference":"floating":Ft],hn=l$4(await Et.getClippingRect({element:(dt=await(Et.isElement==null?void 0:Et.isElement(ln)))==null||dt?ln:ln.contextElement||await(Et.getDocumentElement==null?void 0:Et.getDocumentElement(Rt.floating)),boundary:Dt,rootBoundary:Bt,strategy:kt})),dn=Ft==="floating"?{...Ct.floating,x:vt,y:Tt}:Ct.reference,pn=await(Et.getOffsetParent==null?void 0:Et.getOffsetParent(Rt.floating)),mn=await(Et.isElement==null?void 0:Et.isElement(pn))&&await(Et.getScale==null?void 0:Et.getScale(pn))||{x:1,y:1},On=l$4(Et.convertOffsetParentRelativeRectToViewportRelativeRect?await Et.convertOffsetParentRelativeRectToViewportRelativeRect({rect:dn,offsetParent:pn,strategy:kt}):dn);return{top:(hn.top-On.top+Kt.top)/mn.y,bottom:(On.bottom-hn.bottom+Kt.bottom)/mn.y,left:(hn.left-On.left+Kt.left)/mn.x,right:(On.right-hn.right+Kt.right)/mn.x}}const c$4=Math.min,f$4=Math.max;function u$4(ft,lt,dt){return f$4(ft,c$4(lt,dt))}const m$3=ft=>({name:"arrow",options:ft,async fn(lt){const{element:dt,padding:vt=0}=ft||{},{x:Tt,y:Et,placement:Ct,rects:Rt,platform:kt}=lt;if(dt==null)return{};const Dt=a$1(vt),Bt={x:Tt,y:Et},Ft=o$2(Ct),Ut=e(Ft),Zt=await kt.getDimensions(dt),Kt=Ft==="y"?"top":"left",ln=Ft==="y"?"bottom":"right",hn=Rt.reference[Ut]+Rt.reference[Ft]-Bt[Ft]-Rt.floating[Ut],dn=Bt[Ft]-Rt.reference[Ft],pn=await(kt.getOffsetParent==null?void 0:kt.getOffsetParent(dt));let mn=pn?Ft==="y"?pn.clientHeight||0:pn.clientWidth||0:0;mn===0&&(mn=Rt.floating[Ut]);const On=hn/2-dn/2,bn=Dt[Kt],En=mn-Zt[Ut]-Dt[ln],An=mn/2-Zt[Ut]/2+On,Tn=u$4(bn,An,En),In=t$1(Ct)!=null&&An!=Tn&&Rt.reference[Ut]/2-(An<bn?Dt[Kt]:Dt[ln])-Zt[Ut]/2<0;return{[Ft]:Bt[Ft]-(In?An<bn?bn-An:En-An:0),data:{[Ft]:Tn,centerOffset:An-Tn}}}}),g$2=["top","right","bottom","left"],d$4=g$2.reduce((ft,lt)=>ft.concat(lt,lt+"-start",lt+"-end"),[]),p$3={left:"right",right:"left",bottom:"top",top:"bottom"};function h$4(ft){return ft.replace(/left|right|bottom|top/g,lt=>p$3[lt])}function y$4(ft,lt,dt){dt===void 0&&(dt=!1);const vt=t$1(ft),Tt=o$2(ft),Et=e(Tt);let Ct=Tt==="x"?vt===(dt?"end":"start")?"right":"left":vt==="start"?"bottom":"top";return lt.reference[Et]>lt.floating[Et]&&(Ct=h$4(Ct)),{main:Ct,cross:h$4(Ct)}}const x$3={start:"end",end:"start"};function w$2(ft){return ft.replace(/start|end/g,lt=>x$3[lt])}const v$3=function(ft){return ft===void 0&&(ft={}),{name:"autoPlacement",options:ft,async fn(lt){var dt,vt,Tt;const{rects:Et,middlewareData:Ct,placement:Rt,platform:kt,elements:Dt}=lt,{crossAxis:Bt=!1,alignment:Ft,allowedPlacements:Ut=d$4,autoAlignment:Zt=!0,...Kt}=ft,ln=Ft!==void 0||Ut===d$4?function(Rn,Dn,Bn){return(Rn?[...Bn.filter(Hn=>t$1(Hn)===Rn),...Bn.filter(Hn=>t$1(Hn)!==Rn)]:Bn.filter(Hn=>n$2(Hn)===Hn)).filter(Hn=>!Rn||t$1(Hn)===Rn||!!Dn&&w$2(Hn)!==Hn)}(Ft||null,Zt,Ut):Ut,hn=await s$1(lt,Kt),dn=((dt=Ct.autoPlacement)==null?void 0:dt.index)||0,pn=ln[dn];if(pn==null)return{};const{main:mn,cross:On}=y$4(pn,Et,await(kt.isRTL==null?void 0:kt.isRTL(Dt.floating)));if(Rt!==pn)return{reset:{placement:ln[0]}};const bn=[hn[n$2(pn)],hn[mn],hn[On]],En=[...((vt=Ct.autoPlacement)==null?void 0:vt.overflows)||[],{placement:pn,overflows:bn}],An=ln[dn+1];if(An)return{data:{index:dn+1,overflows:En},reset:{placement:An}};const Tn=En.map(Rn=>{const Dn=t$1(Rn.placement);return[Rn.placement,Dn&&Bt?Rn.overflows.slice(0,2).reduce((Bn,Hn)=>Bn+Hn,0):Rn.overflows[0],Rn.overflows]}).sort((Rn,Dn)=>Rn[1]-Dn[1]),In=((Tt=Tn.filter(Rn=>Rn[2].slice(0,t$1(Rn[0])?2:3).every(Dn=>Dn<=0))[0])==null?void 0:Tt[0])||Tn[0][0];return In!==Rt?{data:{index:dn+1,overflows:En},reset:{placement:In}}:{}}}},b$4=function(ft){return ft===void 0&&(ft={}),{name:"flip",options:ft,async fn(lt){var dt;const{placement:vt,middlewareData:Tt,rects:Et,initialPlacement:Ct,platform:Rt,elements:kt}=lt,{mainAxis:Dt=!0,crossAxis:Bt=!0,fallbackPlacements:Ft,fallbackStrategy:Ut="bestFit",fallbackAxisSideDirection:Zt="none",flipAlignment:Kt=!0,...ln}=ft,hn=n$2(vt),dn=n$2(Ct)===Ct,pn=await(Rt.isRTL==null?void 0:Rt.isRTL(kt.floating)),mn=Ft||(dn||!Kt?[h$4(Ct)]:function(Dn){const Bn=h$4(Dn);return[w$2(Dn),Bn,w$2(Bn)]}(Ct));Ft||Zt==="none"||mn.push(...function(Dn,Bn,Hn,jn){const Kn=t$1(Dn);let zn=function(lr,Ln,Vn){const Wn=["left","right"],sr=["right","left"],Mn=["top","bottom"],ir=["bottom","top"];switch(lr){case"top":case"bottom":return Vn?Ln?sr:Wn:Ln?Wn:sr;case"left":case"right":return Ln?Mn:ir;default:return[]}}(n$2(Dn),Hn==="start",jn);return Kn&&(zn=zn.map(lr=>lr+"-"+Kn),Bn&&(zn=zn.concat(zn.map(w$2)))),zn}(Ct,Kt,Zt,pn));const On=[Ct,...mn],bn=await s$1(lt,ln),En=[];let An=((dt=Tt.flip)==null?void 0:dt.overflows)||[];if(Dt&&En.push(bn[hn]),Bt){const{main:Dn,cross:Bn}=y$4(vt,Et,pn);En.push(bn[Dn],bn[Bn])}if(An=[...An,{placement:vt,overflows:En}],!En.every(Dn=>Dn<=0)){var Tn,In;const Dn=(((Tn=Tt.flip)==null?void 0:Tn.index)||0)+1,Bn=On[Dn];if(Bn)return{data:{index:Dn,overflows:An},reset:{placement:Bn}};let Hn=(In=An.filter(jn=>jn.overflows[0]<=0).sort((jn,Kn)=>jn.overflows[1]-Kn.overflows[1])[0])==null?void 0:In.placement;if(!Hn)switch(Ut){case"bestFit":{var Rn;const jn=(Rn=An.map(Kn=>[Kn.placement,Kn.overflows.filter(zn=>zn>0).reduce((zn,lr)=>zn+lr,0)]).sort((Kn,zn)=>Kn[1]-zn[1])[0])==null?void 0:Rn[0];jn&&(Hn=jn);break}case"initialPlacement":Hn=Ct}if(vt!==Hn)return{reset:{placement:Hn}}}return{}}}},O$2=function(ft){return ft===void 0&&(ft=0),{name:"offset",options:ft,async fn(lt){const{x:dt,y:vt}=lt,Tt=await async function(Et,Ct){const{placement:Rt,platform:kt,elements:Dt}=Et,Bt=await(kt.isRTL==null?void 0:kt.isRTL(Dt.floating)),Ft=n$2(Rt),Ut=t$1(Rt),Zt=o$2(Rt)==="x",Kt=["left","top"].includes(Ft)?-1:1,ln=Bt&&Zt?-1:1,hn=typeof Ct=="function"?Ct(Et):Ct;let{mainAxis:dn,crossAxis:pn,alignmentAxis:mn}=typeof hn=="number"?{mainAxis:hn,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...hn};return Ut&&typeof mn=="number"&&(pn=Ut==="end"?-1*mn:mn),Zt?{x:pn*ln,y:dn*Kt}:{x:dn*Kt,y:pn*ln}}(lt,ft);return{x:dt+Tt.x,y:vt+Tt.y,data:Tt}}}};function D$3(ft){return ft==="x"?"y":"x"}const E$4=function(ft){return ft===void 0&&(ft={}),{name:"shift",options:ft,async fn(lt){const{x:dt,y:vt,placement:Tt}=lt,{mainAxis:Et=!0,crossAxis:Ct=!1,limiter:Rt={fn:hn=>{let{x:dn,y:pn}=hn;return{x:dn,y:pn}}},...kt}=ft,Dt={x:dt,y:vt},Bt=await s$1(lt,kt),Ft=o$2(n$2(Tt)),Ut=D$3(Ft);let Zt=Dt[Ft],Kt=Dt[Ut];if(Et){const hn=Ft==="y"?"bottom":"right";Zt=u$4(Zt+Bt[Ft==="y"?"top":"left"],Zt,Zt-Bt[hn])}if(Ct){const hn=Ut==="y"?"bottom":"right";Kt=u$4(Kt+Bt[Ut==="y"?"top":"left"],Kt,Kt-Bt[hn])}const ln=Rt.fn({...lt,[Ft]:Zt,[Ut]:Kt});return{...ln,data:{x:ln.x-dt,y:ln.y-vt}}}}};function n$1(ft){var lt;return((lt=ft.ownerDocument)==null?void 0:lt.defaultView)||window}function o$1(ft){return n$1(ft).getComputedStyle(ft)}const i$3=Math.min,r$1=Math.max,l$3=Math.round;function c$3(ft){const lt=o$1(ft);let dt=parseFloat(lt.width),vt=parseFloat(lt.height);const Tt=ft.offsetWidth,Et=ft.offsetHeight,Ct=l$3(dt)!==Tt||l$3(vt)!==Et;return Ct&&(dt=Tt,vt=Et),{width:dt,height:vt,fallback:Ct}}function s(ft){return h$3(ft)?(ft.nodeName||"").toLowerCase():""}let f$3;function u$3(){if(f$3)return f$3;const ft=navigator.userAgentData;return ft&&Array.isArray(ft.brands)?(f$3=ft.brands.map(lt=>lt.brand+"/"+lt.version).join(" "),f$3):navigator.userAgent}function a(ft){return ft instanceof n$1(ft).HTMLElement}function d$3(ft){return ft instanceof n$1(ft).Element}function h$3(ft){return ft instanceof n$1(ft).Node}function p$2(ft){return typeof ShadowRoot>"u"?!1:ft instanceof n$1(ft).ShadowRoot||ft instanceof ShadowRoot}function g$1(ft){const{overflow:lt,overflowX:dt,overflowY:vt,display:Tt}=o$1(ft);return/auto|scroll|overlay|hidden|clip/.test(lt+vt+dt)&&!["inline","contents"].includes(Tt)}function m$2(ft){return["table","td","th"].includes(s(ft))}function y$3(ft){const lt=/firefox/i.test(u$3()),dt=o$1(ft),vt=dt.backdropFilter||dt.WebkitBackdropFilter;return dt.transform!=="none"||dt.perspective!=="none"||!!vt&&vt!=="none"||lt&&dt.willChange==="filter"||lt&&!!dt.filter&&dt.filter!=="none"||["transform","perspective"].some(Tt=>dt.willChange.includes(Tt))||["paint","layout","strict","content"].some(Tt=>{const Et=dt.contain;return Et!=null&&Et.includes(Tt)})}function x$2(){return/^((?!chrome|android).)*safari/i.test(u$3())}function w$1(ft){return["html","body","#document"].includes(s(ft))}function v$2(ft){return d$3(ft)?ft:ft.contextElement}const b$3={x:1,y:1};function L$1(ft){const lt=v$2(ft);if(!a(lt))return b$3;const dt=lt.getBoundingClientRect(),{width:vt,height:Tt,fallback:Et}=c$3(lt);let Ct=(Et?l$3(dt.width):dt.width)/vt,Rt=(Et?l$3(dt.height):dt.height)/Tt;return Ct&&Number.isFinite(Ct)||(Ct=1),Rt&&Number.isFinite(Rt)||(Rt=1),{x:Ct,y:Rt}}function E$3(ft,lt,dt,vt){var Tt,Et;lt===void 0&&(lt=!1),dt===void 0&&(dt=!1);const Ct=ft.getBoundingClientRect(),Rt=v$2(ft);let kt=b$3;lt&&(vt?d$3(vt)&&(kt=L$1(vt)):kt=L$1(ft));const Dt=Rt?n$1(Rt):window,Bt=x$2()&&dt;let Ft=(Ct.left+(Bt&&((Tt=Dt.visualViewport)==null?void 0:Tt.offsetLeft)||0))/kt.x,Ut=(Ct.top+(Bt&&((Et=Dt.visualViewport)==null?void 0:Et.offsetTop)||0))/kt.y,Zt=Ct.width/kt.x,Kt=Ct.height/kt.y;if(Rt){const ln=n$1(Rt),hn=vt&&d$3(vt)?n$1(vt):vt;let dn=ln.frameElement;for(;dn&&vt&&hn!==ln;){const pn=L$1(dn),mn=dn.getBoundingClientRect(),On=getComputedStyle(dn);mn.x+=(dn.clientLeft+parseFloat(On.paddingLeft))*pn.x,mn.y+=(dn.clientTop+parseFloat(On.paddingTop))*pn.y,Ft*=pn.x,Ut*=pn.y,Zt*=pn.x,Kt*=pn.y,Ft+=mn.x,Ut+=mn.y,dn=n$1(dn).frameElement}}return{width:Zt,height:Kt,top:Ut,right:Ft+Zt,bottom:Ut+Kt,left:Ft,x:Ft,y:Ut}}function R$1(ft){return((h$3(ft)?ft.ownerDocument:ft.document)||window.document).documentElement}function T$1(ft){return d$3(ft)?{scrollLeft:ft.scrollLeft,scrollTop:ft.scrollTop}:{scrollLeft:ft.pageXOffset,scrollTop:ft.pageYOffset}}function C$2(ft){return E$3(R$1(ft)).left+T$1(ft).scrollLeft}function F$1(ft){if(s(ft)==="html")return ft;const lt=ft.assignedSlot||ft.parentNode||p$2(ft)&&ft.host||R$1(ft);return p$2(lt)?lt.host:lt}function W$2(ft){const lt=F$1(ft);return w$1(lt)?lt.ownerDocument.body:a(lt)&&g$1(lt)?lt:W$2(lt)}function D$2(ft,lt){var dt;lt===void 0&&(lt=[]);const vt=W$2(ft),Tt=vt===((dt=ft.ownerDocument)==null?void 0:dt.body),Et=n$1(vt);return Tt?lt.concat(Et,Et.visualViewport||[],g$1(vt)?vt:[]):lt.concat(vt,D$2(vt))}function S$1(ft,lt,dt){let vt;if(lt==="viewport")vt=function(Ct,Rt){const kt=n$1(Ct),Dt=R$1(Ct),Bt=kt.visualViewport;let Ft=Dt.clientWidth,Ut=Dt.clientHeight,Zt=0,Kt=0;if(Bt){Ft=Bt.width,Ut=Bt.height;const ln=x$2();(!ln||ln&&Rt==="fixed")&&(Zt=Bt.offsetLeft,Kt=Bt.offsetTop)}return{width:Ft,height:Ut,x:Zt,y:Kt}}(ft,dt);else if(lt==="document")vt=function(Ct){const Rt=R$1(Ct),kt=T$1(Ct),Dt=Ct.ownerDocument.body,Bt=r$1(Rt.scrollWidth,Rt.clientWidth,Dt.scrollWidth,Dt.clientWidth),Ft=r$1(Rt.scrollHeight,Rt.clientHeight,Dt.scrollHeight,Dt.clientHeight);let Ut=-kt.scrollLeft+C$2(Ct);const Zt=-kt.scrollTop;return o$1(Dt).direction==="rtl"&&(Ut+=r$1(Rt.clientWidth,Dt.clientWidth)-Bt),{width:Bt,height:Ft,x:Ut,y:Zt}}(R$1(ft));else if(d$3(lt))vt=function(Ct,Rt){const kt=E$3(Ct,!0,Rt==="fixed"),Dt=kt.top+Ct.clientTop,Bt=kt.left+Ct.clientLeft,Ft=a(Ct)?L$1(Ct):{x:1,y:1};return{width:Ct.clientWidth*Ft.x,height:Ct.clientHeight*Ft.y,x:Bt*Ft.x,y:Dt*Ft.y}}(lt,dt);else{const Ct={...lt};if(x$2()){var Tt,Et;const Rt=n$1(ft);Ct.x-=((Tt=Rt.visualViewport)==null?void 0:Tt.offsetLeft)||0,Ct.y-=((Et=Rt.visualViewport)==null?void 0:Et.offsetTop)||0}vt=Ct}return l$4(vt)}function A$1(ft,lt){return a(ft)&&o$1(ft).position!=="fixed"?lt?lt(ft):ft.offsetParent:null}function H$2(ft,lt){const dt=n$1(ft);let vt=A$1(ft,lt);for(;vt&&m$2(vt)&&o$1(vt).position==="static";)vt=A$1(vt,lt);return vt&&(s(vt)==="html"||s(vt)==="body"&&o$1(vt).position==="static"&&!y$3(vt))?dt:vt||function(Tt){let Et=F$1(Tt);for(;a(Et)&&!w$1(Et);){if(y$3(Et))return Et;Et=F$1(Et)}return null}(ft)||dt}function V$2(ft,lt,dt){const vt=a(lt),Tt=R$1(lt),Et=E$3(ft,!0,dt==="fixed",lt);let Ct={scrollLeft:0,scrollTop:0};const Rt={x:0,y:0};if(vt||!vt&&dt!=="fixed")if((s(lt)!=="body"||g$1(Tt))&&(Ct=T$1(lt)),a(lt)){const kt=E$3(lt,!0);Rt.x=kt.x+lt.clientLeft,Rt.y=kt.y+lt.clientTop}else Tt&&(Rt.x=C$2(Tt));return{x:Et.left+Ct.scrollLeft-Rt.x,y:Et.top+Ct.scrollTop-Rt.y,width:Et.width,height:Et.height}}const O$1={getClippingRect:function(ft){let{element:lt,boundary:dt,rootBoundary:vt,strategy:Tt}=ft;const Et=dt==="clippingAncestors"?function(Dt,Bt){const Ft=Bt.get(Dt);if(Ft)return Ft;let Ut=D$2(Dt).filter(hn=>d$3(hn)&&s(hn)!=="body"),Zt=null;const Kt=o$1(Dt).position==="fixed";let ln=Kt?F$1(Dt):Dt;for(;d$3(ln)&&!w$1(ln);){const hn=o$1(ln),dn=y$3(ln);hn.position==="fixed"?Zt=null:(Kt?dn||Zt:dn||hn.position!=="static"||!Zt||!["absolute","fixed"].includes(Zt.position))?Zt=hn:Ut=Ut.filter(pn=>pn!==ln),ln=F$1(ln)}return Bt.set(Dt,Ut),Ut}(lt,this._c):[].concat(dt),Ct=[...Et,vt],Rt=Ct[0],kt=Ct.reduce((Dt,Bt)=>{const Ft=S$1(lt,Bt,Tt);return Dt.top=r$1(Ft.top,Dt.top),Dt.right=i$3(Ft.right,Dt.right),Dt.bottom=i$3(Ft.bottom,Dt.bottom),Dt.left=r$1(Ft.left,Dt.left),Dt},S$1(lt,Rt,Tt));return{width:kt.right-kt.left,height:kt.bottom-kt.top,x:kt.left,y:kt.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(ft){let{rect:lt,offsetParent:dt,strategy:vt}=ft;const Tt=a(dt),Et=R$1(dt);if(dt===Et)return lt;let Ct={scrollLeft:0,scrollTop:0},Rt={x:1,y:1};const kt={x:0,y:0};if((Tt||!Tt&&vt!=="fixed")&&((s(dt)!=="body"||g$1(Et))&&(Ct=T$1(dt)),a(dt))){const Dt=E$3(dt);Rt=L$1(dt),kt.x=Dt.x+dt.clientLeft,kt.y=Dt.y+dt.clientTop}return{width:lt.width*Rt.x,height:lt.height*Rt.y,x:lt.x*Rt.x-Ct.scrollLeft*Rt.x+kt.x,y:lt.y*Rt.y-Ct.scrollTop*Rt.y+kt.y}},isElement:d$3,getDimensions:function(ft){return a(ft)?c$3(ft):ft.getBoundingClientRect()},getOffsetParent:H$2,getDocumentElement:R$1,getScale:L$1,async getElementRects(ft){let{reference:lt,floating:dt,strategy:vt}=ft;const Tt=this.getOffsetParent||H$2,Et=this.getDimensions;return{reference:V$2(lt,await Tt(dt),vt),floating:{x:0,y:0,...await Et(dt)}}},getClientRects:ft=>Array.from(ft.getClientRects()),isRTL:ft=>o$1(ft).direction==="rtl"};function P$1(ft,lt,dt,vt){vt===void 0&&(vt={});const{ancestorScroll:Tt=!0,ancestorResize:Et=!0,elementResize:Ct=!0,animationFrame:Rt=!1}=vt,kt=Tt&&!Rt,Dt=kt||Et?[...d$3(ft)?D$2(ft):ft.contextElement?D$2(ft.contextElement):[],...D$2(lt)]:[];Dt.forEach(Zt=>{kt&&Zt.addEventListener("scroll",dt,{passive:!0}),Et&&Zt.addEventListener("resize",dt)});let Bt,Ft=null;if(Ct){let Zt=!0;Ft=new ResizeObserver(()=>{Zt||dt(),Zt=!1}),d$3(ft)&&!Rt&&Ft.observe(ft),d$3(ft)||!ft.contextElement||Rt||Ft.observe(ft.contextElement),Ft.observe(lt)}let Ut=Rt?E$3(ft):null;return Rt&&function Zt(){const Kt=E$3(ft);!Ut||Kt.x===Ut.x&&Kt.y===Ut.y&&Kt.width===Ut.width&&Kt.height===Ut.height||dt(),Ut=Kt,Bt=requestAnimationFrame(Zt)}(),dt(),()=>{var Zt;Dt.forEach(Kt=>{kt&&Kt.removeEventListener("scroll",dt),Et&&Kt.removeEventListener("resize",dt)}),(Zt=Ft)==null||Zt.disconnect(),Ft=null,Rt&&cancelAnimationFrame(Bt)}}const z$2=(ft,lt,dt)=>{const vt=new Map,Tt={platform:O$1,...dt},Et={...Tt.platform,_c:vt};return i$4(ft,lt,{...Tt,platform:Et})},arrow=ft=>{const{element:lt,padding:dt}=ft;function vt(Tt){return Object.prototype.hasOwnProperty.call(Tt,"current")}return{name:"arrow",options:ft,fn(Tt){return vt(lt)?lt.current!=null?m$3({element:lt.current,padding:dt}).fn(Tt):{}:lt?m$3({element:lt,padding:dt}).fn(Tt):{}}}};var index$2=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function deepEqual(ft,lt){if(ft===lt)return!0;if(typeof ft!=typeof lt)return!1;if(typeof ft=="function"&&ft.toString()===lt.toString())return!0;let dt,vt,Tt;if(ft&&lt&&typeof ft=="object"){if(Array.isArray(ft)){if(dt=ft.length,dt!=lt.length)return!1;for(vt=dt;vt--!==0;)if(!deepEqual(ft[vt],lt[vt]))return!1;return!0}if(Tt=Object.keys(ft),dt=Tt.length,dt!==Object.keys(lt).length)return!1;for(vt=dt;vt--!==0;)if(!Object.prototype.hasOwnProperty.call(lt,Tt[vt]))return!1;for(vt=dt;vt--!==0;){const Et=Tt[vt];if(!(Et==="_owner"&&ft.$$typeof)&&!deepEqual(ft[Et],lt[Et]))return!1}return!0}return ft!==ft&&lt!==lt}function useLatestRef$1(ft){const lt=reactExports.useRef(ft);return index$2(()=>{lt.current=ft}),lt}function useFloating$1(ft){ft===void 0&&(ft={});const{placement:lt="bottom",strategy:dt="absolute",middleware:vt=[],platform:Tt,whileElementsMounted:Et,open:Ct}=ft,[Rt,kt]=reactExports.useState({x:null,y:null,strategy:dt,placement:lt,middlewareData:{},isPositioned:!1}),[Dt,Bt]=reactExports.useState(vt);deepEqual(Dt,vt)||Bt(vt);const Ft=reactExports.useRef(null),Ut=reactExports.useRef(null),Zt=reactExports.useRef(Rt),Kt=useLatestRef$1(Et),ln=useLatestRef$1(Tt),[hn,dn]=reactExports.useState(null),[pn,mn]=reactExports.useState(null),On=reactExports.useCallback(Rn=>{Ft.current!==Rn&&(Ft.current=Rn,dn(Rn))},[]),bn=reactExports.useCallback(Rn=>{Ut.current!==Rn&&(Ut.current=Rn,mn(Rn))},[]),En=reactExports.useCallback(()=>{if(!Ft.current||!Ut.current)return;const Rn={placement:lt,strategy:dt,middleware:Dt};ln.current&&(Rn.platform=ln.current),z$2(Ft.current,Ut.current,Rn).then(Dn=>{const Bn={...Dn,isPositioned:!0};An.current&&!deepEqual(Zt.current,Bn)&&(Zt.current=Bn,reactDomExports.flushSync(()=>{kt(Bn)}))})},[Dt,lt,dt,ln]);index$2(()=>{Ct===!1&&Zt.current.isPositioned&&(Zt.current.isPositioned=!1,kt(Rn=>({...Rn,isPositioned:!1})))},[Ct]);const An=reactExports.useRef(!1);index$2(()=>(An.current=!0,()=>{An.current=!1}),[]),index$2(()=>{if(hn&&pn){if(Kt.current)return Kt.current(hn,pn,En);En()}},[hn,pn,En,Kt]);const Tn=reactExports.useMemo(()=>({reference:Ft,floating:Ut,setReference:On,setFloating:bn}),[On,bn]),In=reactExports.useMemo(()=>({reference:hn,floating:pn}),[hn,pn]);return reactExports.useMemo(()=>({...Rt,update:En,refs:Tn,elements:In,reference:On,floating:bn}),[Rt,En,Tn,In,On,bn])}var index$1=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;let serverHandoffComplete=!1,count=0;const genId=()=>"floating-ui-"+count++;function useFloatingId(){const[ft,lt]=reactExports.useState(()=>serverHandoffComplete?genId():void 0);return index$1(()=>{ft==null&&lt(genId())},[]),reactExports.useEffect(()=>{serverHandoffComplete||(serverHandoffComplete=!0)},[]),ft}const useReactId=React$1["useId".toString()],useId=useReactId||useFloatingId;function createPubSub(){const ft=new Map;return{emit(lt,dt){var vt;(vt=ft.get(lt))==null||vt.forEach(Tt=>Tt(dt))},on(lt,dt){ft.set(lt,[...ft.get(lt)||[],dt])},off(lt,dt){ft.set(lt,(ft.get(lt)||[]).filter(vt=>vt!==dt))}}}const FloatingTreeContext=reactExports.createContext(null),useFloatingTree=()=>reactExports.useContext(FloatingTreeContext);function getDocument(ft){return(ft==null?void 0:ft.ownerDocument)||document}function getWindow(ft){return getDocument(ft).defaultView||window}function isElement(ft){return ft?ft instanceof getWindow(ft).Element:!1}function isHTMLElement(ft){return ft?ft instanceof getWindow(ft).HTMLElement:!1}function isShadowRoot(ft){if(typeof ShadowRoot>"u")return!1;const lt=getWindow(ft).ShadowRoot;return ft instanceof lt||ft instanceof ShadowRoot}function isSafari(){return/apple/i.test(navigator.vendor)}function isMouseLikePointerType(ft,lt){const dt=["mouse","pen"];return lt||dt.push("",void 0),dt.includes(ft)}function contains$1(ft,lt){if(!ft||!lt)return!1;const dt=lt.getRootNode&&lt.getRootNode();if(ft.contains(lt))return!0;if(dt&&isShadowRoot(dt)){let vt=lt;do{if(vt&&ft===vt)return!0;vt=vt.parentNode||vt.host}while(vt)}return!1}function getChildren$1(ft,lt){let dt=ft.filter(Tt=>{var Et;return Tt.parentId===lt&&((Et=Tt.context)==null?void 0:Et.open)})||[],vt=dt;for(;vt.length;)vt=ft.filter(Tt=>{var Et;return(Et=vt)==null?void 0:Et.some(Ct=>{var Rt;return Tt.parentId===Ct.id&&((Rt=Tt.context)==null?void 0:Rt.open)})})||[],dt=dt.concat(vt);return dt}function getTarget(ft){return"composedPath"in ft?ft.composedPath()[0]:ft.target}function isPointInPolygon(ft,lt){const[dt,vt]=ft;let Tt=!1;const Et=lt.length;for(let Ct=0,Rt=Et-1;Ct<Et;Rt=Ct++){const[kt,Dt]=lt[Ct]||[0,0],[Bt,Ft]=lt[Rt]||[0,0];Dt>=vt!=Ft>=vt&&dt<=(Bt-kt)*(vt-Dt)/(Ft-Dt)+kt&&(Tt=!Tt)}return Tt}const svgNs="http://www.w3.org/2000/svg";function createPolygonElement(ft,lt,dt){var vt,Tt;const Et=isSafari(),Ct=lt.defaultView||window,Rt=lt.createElementNS(svgNs,"svg");Object.assign(Rt.style,{position:"fixed",left:(Et&&((vt=Ct.visualViewport)==null?void 0:vt.offsetLeft)||0)+"px",top:(Et&&((Tt=Ct.visualViewport)==null?void 0:Tt.offsetTop)||0)+"px",width:"100%",height:"100%",pointerEvents:"none",zIndex:2147483647}),Rt.setAttribute("data-type",dt?"rect":"triangle");const kt=lt.createElementNS(svgNs,"polygon");return kt.setAttribute("points",ft.map(Dt=>{let[Bt,Ft]=Dt;return Bt+","+Ft}).join(" ")),Object.assign(kt.style,{pointerEvents:"auto",fill:"transparent",opacity:0}),Rt.appendChild(kt),Rt}function destroyPolygon(ft){ft.current&&(ft.current.remove(),ft.current=null)}function safePolygon(ft){let{restMs:lt=0,buffer:dt=.5,blockPointerEvents:vt=!0}=ft===void 0?{}:ft,Tt,Et=!1,Ct=!1;return kt=>{let{x:Dt,y:Bt,placement:Ft,refs:Ut,onClose:Zt,nodeId:Kt,tree:ln,polygonRef:hn}=kt;return function(pn){var mn;function On(){destroyPolygon(hn),clearTimeout(Tt),Zt()}if(clearTimeout(Tt),!Ut.domReference.current||!Ut.floating.current||Ft==null||Dt==null||Bt==null)return;const{clientX:bn,clientY:En}=pn,An=getTarget(pn),Tn=pn.type==="mouseleave",In=contains$1(Ut.domReference.current,An),Rn=contains$1(Ut.floating.current,An);if(!Tn&&In){destroyPolygon(hn);return}if(!Tn&&(In||Et&&contains$1(hn.current,An))||Tn&&isElement(pn.relatedTarget)&&contains$1(Ut.floating.current,pn.relatedTarget)||ln&&getChildren$1(ln.nodesRef.current,Kt).some(Vn=>{let{context:Wn}=Vn;return Wn==null?void 0:Wn.open}))return;if(Rn&&(Ct=!0),Rn&&!Tn&&((mn=hn.current)==null?void 0:mn.dataset.type)!=="rect"){destroyPolygon(hn);return}const Dn=Ut.domReference.current.getBoundingClientRect(),Bn=Ut.floating.current.getBoundingClientRect(),Hn=Ft.split("-")[0],jn=Dt>Bn.right-Bn.width/2,Kn=Bt>Bn.bottom-Bn.height/2;if(Hn==="top"&&Bt>=Dn.bottom-1||Hn==="bottom"&&Bt<=Dn.top+1||Hn==="left"&&Dt>=Dn.right-1||Hn==="right"&&Dt<=Dn.left+1)return On();let zn=[];switch(Hn){case"top":zn=[[Bn.left,Dn.top+1],[Bn.left,Bn.bottom-1],[Bn.right,Bn.bottom-1],[Bn.right,Dn.top+1]],Et=bn>=Bn.left&&bn<=Bn.right&&En>=Bn.top&&En<=Dn.top+1;break;case"bottom":zn=[[Bn.left,Bn.top+1],[Bn.left,Dn.bottom-1],[Bn.right,Dn.bottom-1],[Bn.right,Bn.top+1]],Et=bn>=Bn.left&&bn<=Bn.right&&En>=Dn.bottom-1&&En<=Bn.bottom;break;case"left":zn=[[Bn.right-1,Bn.bottom],[Bn.right-1,Bn.top],[Dn.left+1,Bn.top],[Dn.left+1,Bn.bottom]],Et=bn>=Bn.left&&bn<=Dn.left+1&&En>=Bn.top&&En<=Bn.bottom;break;case"right":zn=[[Dn.right-1,Bn.bottom],[Dn.right-1,Bn.top],[Bn.left+1,Bn.top],[Bn.left+1,Bn.bottom]],Et=bn>=Dn.right-1&&bn<=Bn.right&&En>=Bn.top&&En<=Bn.bottom;break}function lr(Vn){let[Wn,sr]=Vn;const Mn=Bn.width>Dn.width,ir=Bn.height>Dn.height;switch(Hn){case"top":{const mr=[Mn?Wn+dt/2:jn?Wn+dt*4:Wn-dt*4,sr+dt+1],tr=[Mn?Wn-dt/2:jn?Wn+dt*4:Wn-dt*4,sr+dt+1],Dr=[[Bn.left,jn||Mn?Bn.bottom-dt:Bn.top],[Bn.right,jn?Mn?Bn.bottom-dt:Bn.top:Bn.bottom-dt]];return[mr,tr,...Dr]}case"bottom":{const mr=[Mn?Wn+dt/2:jn?Wn+dt*4:Wn-dt*4,sr-dt],tr=[Mn?Wn-dt/2:jn?Wn+dt*4:Wn-dt*4,sr-dt],Dr=[[Bn.left,jn||Mn?Bn.top+dt:Bn.bottom],[Bn.right,jn?Mn?Bn.top+dt:Bn.bottom:Bn.top+dt]];return[mr,tr,...Dr]}case"left":{const mr=[Wn+dt+1,ir?sr+dt/2:Kn?sr+dt*4:sr-dt*4],tr=[Wn+dt+1,ir?sr-dt/2:Kn?sr+dt*4:sr-dt*4];return[...[[Kn||ir?Bn.right-dt:Bn.left,Bn.top],[Kn?ir?Bn.right-dt:Bn.left:Bn.right-dt,Bn.bottom]],mr,tr]}case"right":{const mr=[Wn-dt,ir?sr+dt/2:Kn?sr+dt*4:sr-dt*4],tr=[Wn-dt,ir?sr-dt/2:Kn?sr+dt*4:sr-dt*4],Dr=[[Kn||ir?Bn.left+dt:Bn.right,Bn.top],[Kn?ir?Bn.left+dt:Bn.right:Bn.left+dt,Bn.bottom]];return[mr,tr,...Dr]}}}const Ln=Et?zn:lr([Dt,Bt]);if(!hn.current&&vt&&Tn){const Vn=getDocument(Ut.floating.current);hn.current=createPolygonElement(Ln,Vn,Et),Vn.body.appendChild(hn.current)}Et||(isPointInPolygon([bn,En],Ln)?lt&&!Ct&&(Tt=setTimeout(Zt,lt)):On())}}}function useLatestRef(ft){const lt=reactExports.useRef(ft);return index$1(()=>{lt.current=ft}),lt}function getDelay(ft,lt,dt){return dt&&!isMouseLikePointerType(dt)?0:typeof ft=="number"?ft:ft==null?void 0:ft[lt]}const useHover=function(ft,lt){let{enabled:dt=!0,delay:vt=0,handleClose:Tt=null,mouseOnly:Et=!1,restMs:Ct=0,move:Rt=!0}=lt===void 0?{}:lt;const{open:kt,onOpenChange:Dt,dataRef:Bt,events:Ft,refs:Ut,_:Zt}=ft,Kt=useFloatingTree(),ln=useLatestRef(Tt),hn=useLatestRef(vt),dn=reactExports.useRef(),pn=reactExports.useRef(),mn=reactExports.useRef(),On=reactExports.useRef(),bn=reactExports.useRef(!0),En=reactExports.useRef(null),An=reactExports.useCallback(()=>{var Rn;const Dn=(Rn=Bt.current.openEvent)==null?void 0:Rn.type;return(Dn==null?void 0:Dn.includes("mouse"))&&Dn!=="mousedown"},[Bt]);reactExports.useEffect(()=>{if(!dt)return;function Rn(){clearTimeout(pn.current),clearTimeout(On.current),bn.current=!0}return Ft.on("dismiss",Rn),()=>{Ft.off("dismiss",Rn)}},[dt,Ft,Ut]),reactExports.useEffect(()=>{if(!dt||!ln.current||!kt)return;function Rn(){An()&&Dt(!1)}const Dn=getDocument(Ut.floating.current).documentElement;return Dn.addEventListener("mouseleave",Rn),()=>{Dn.removeEventListener("mouseleave",Rn)}},[Ut,kt,Dt,dt,ln,Bt,An]);const Tn=reactExports.useCallback(function(Rn){Rn===void 0&&(Rn=!0);const Dn=getDelay(hn.current,"close",dn.current);Dn&&!mn.current?(clearTimeout(pn.current),pn.current=setTimeout(()=>Dt(!1),Dn)):Rn&&(clearTimeout(pn.current),Dt(!1))},[hn,Dt]),In=reactExports.useCallback(()=>{mn.current&&(getDocument(Ut.floating.current).removeEventListener("mousemove",mn.current),mn.current=void 0)},[Ut]);return reactExports.useEffect(()=>{if(!dt)return;function Rn(){return Bt.current.openEvent?["click","mousedown"].includes(Bt.current.openEvent.type):!1}function Dn(zn){if(clearTimeout(pn.current),bn.current=!1,Et&&!isMouseLikePointerType(dn.current)||Ct>0&&getDelay(hn.current,"open")===0)return;Bt.current.openEvent=zn;const lr=getDelay(hn.current,"open",dn.current);lr?pn.current=setTimeout(()=>{Dt(!0)},lr):Dt(!0)}function Bn(zn){if(Rn())return;const lr=getDocument(Ut.floating.current);if(clearTimeout(On.current),ln.current){clearTimeout(pn.current),mn.current&&lr.removeEventListener("mousemove",mn.current),mn.current=ln.current({...ft,tree:Kt,polygonRef:En,x:zn.clientX,y:zn.clientY,onClose(){In(),Tn()}}),lr.addEventListener("mousemove",mn.current);return}Tn()}function Hn(zn){Rn()||ln.current==null||ln.current({...ft,tree:Kt,polygonRef:En,x:zn.clientX,y:zn.clientY,onClose(){In(),Tn()}})(zn)}const jn=Ut.floating.current,Kn=Ut.domReference.current;if(isElement(Kn))return kt&&Kn.addEventListener("mouseleave",Hn),jn==null||jn.addEventListener("mouseleave",Hn),Rt&&Kn.addEventListener("mousemove",Dn,{once:!0}),Kn.addEventListener("mouseenter",Dn),Kn.addEventListener("mouseleave",Bn),()=>{kt&&Kn.removeEventListener("mouseleave",Hn),jn==null||jn.removeEventListener("mouseleave",Hn),Rt&&Kn.removeEventListener("mousemove",Dn),Kn.removeEventListener("mouseenter",Dn),Kn.removeEventListener("mouseleave",Bn)}},[Zt.domReference,dt,ft,Et,Ct,Rt,Tn,In,Dt,kt,Kt,Ut,hn,ln,Bt]),index$1(()=>{kt||(dn.current=void 0,In(),destroyPolygon(En))},[kt,In]),reactExports.useEffect(()=>()=>{In(),clearTimeout(pn.current),clearTimeout(On.current),destroyPolygon(En)},[dt,In]),reactExports.useMemo(()=>{if(!dt)return{};function Rn(Dn){dn.current=Dn.pointerType}return{reference:{onPointerDown:Rn,onPointerEnter:Rn,onMouseMove(){kt||Ct===0||(clearTimeout(On.current),On.current=setTimeout(()=>{bn.current||Dt(!0)},Ct))}},floating:{onMouseEnter(){clearTimeout(pn.current)},onMouseLeave(){Ft.emit("dismiss",{type:"mouseLeave",data:{returnFocus:!1}}),Tn(!1)}}}},[Ft,dt,Ct,kt,Dt,Tn])};function activeElement$1(ft){let lt=ft.activeElement;for(;((dt=lt)==null||(vt=dt.shadowRoot)==null?void 0:vt.activeElement)!=null;){var dt,vt;lt=lt.shadowRoot.activeElement}return lt}const TYPEABLE_SELECTOR="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function isTypeableElement(ft){return isHTMLElement(ft)&&ft.matches(TYPEABLE_SELECTOR)}const useInsertionEffect=React$1["useInsertionEffect".toString()],useSafeInsertionEffect=useInsertionEffect||(ft=>ft());function useEvent(ft){const lt=reactExports.useRef(()=>{});return useSafeInsertionEffect(()=>{lt.current=ft}),reactExports.useCallback(function(){for(var dt=arguments.length,vt=new Array(dt),Tt=0;Tt<dt;Tt++)vt[Tt]=arguments[Tt];return lt.current==null?void 0:lt.current(...vt)},[])}function isButtonTarget(ft){return isHTMLElement(ft.target)&&ft.target.tagName==="BUTTON"}function isSpaceIgnored(ft){return isTypeableElement(ft)}const useClick=function(ft,lt){let{open:dt,onOpenChange:vt,dataRef:Tt,refs:Et}=ft,{enabled:Ct=!0,event:Rt="click",toggle:kt=!0,ignoreMouse:Dt=!1,keyboardHandlers:Bt=!0}=lt===void 0?{}:lt;const Ft=reactExports.useRef();return reactExports.useMemo(()=>Ct?{reference:{onPointerDown(Ut){Ft.current=Ut.pointerType},onMouseDown(Ut){Ut.button===0&&(isMouseLikePointerType(Ft.current,!0)&&Dt||Rt!=="click"&&(dt?kt&&(!Tt.current.openEvent||Tt.current.openEvent.type==="mousedown")&&vt(!1):(Ut.preventDefault(),vt(!0)),Tt.current.openEvent=Ut.nativeEvent))},onClick(Ut){if(Rt==="mousedown"&&Ft.current){Ft.current=void 0;return}isMouseLikePointerType(Ft.current,!0)&&Dt||(dt?kt&&(!Tt.current.openEvent||Tt.current.openEvent.type==="click")&&vt(!1):vt(!0),Tt.current.openEvent=Ut.nativeEvent)},onKeyDown(Ut){Ft.current=void 0,Bt&&(isButtonTarget(Ut)||(Ut.key===" "&&!isSpaceIgnored(Et.domReference.current)&&Ut.preventDefault(),Ut.key==="Enter"&&(dt?kt&&vt(!1):vt(!0))))},onKeyUp(Ut){Bt&&(isButtonTarget(Ut)||isSpaceIgnored(Et.domReference.current)||Ut.key===" "&&(dt?kt&&vt(!1):vt(!0)))}}}:{},[Ct,Tt,Rt,Dt,Bt,Et,kt,dt,vt])};function isEventTargetWithin(ft,lt){if(lt==null)return!1;if("composedPath"in ft)return ft.composedPath().includes(lt);const dt=ft;return dt.target!=null&&lt.contains(dt.target)}const useFocus=function(ft,lt){let{open:dt,onOpenChange:vt,dataRef:Tt,refs:Et,events:Ct}=ft,{enabled:Rt=!0,keyboardOnly:kt=!0}=lt===void 0?{}:lt;const Dt=reactExports.useRef(""),Bt=reactExports.useRef(!1),Ft=reactExports.useRef();return reactExports.useEffect(()=>{if(!Rt)return;const Zt=getDocument(Et.floating.current).defaultView||window;function Kt(){!dt&&isHTMLElement(Et.domReference.current)&&Et.domReference.current===activeElement$1(getDocument(Et.domReference.current))&&(Bt.current=!0)}return Zt.addEventListener("blur",Kt),()=>{Zt.removeEventListener("blur",Kt)}},[Et,dt,Rt]),reactExports.useEffect(()=>{if(!Rt)return;function Ut(Zt){(Zt.type==="referencePress"||Zt.type==="escapeKey")&&(Bt.current=!0)}return Ct.on("dismiss",Ut),()=>{Ct.off("dismiss",Ut)}},[Ct,Rt]),reactExports.useEffect(()=>()=>{clearTimeout(Ft.current)},[]),reactExports.useMemo(()=>Rt?{reference:{onPointerDown(Ut){let{pointerType:Zt}=Ut;Dt.current=Zt,Bt.current=!!(Zt&&kt)},onMouseLeave(){Bt.current=!1},onFocus(Ut){var Zt;Bt.current||Ut.type==="focus"&&((Zt=Tt.current.openEvent)==null?void 0:Zt.type)==="mousedown"&&Tt.current.openEvent&&isEventTargetWithin(Tt.current.openEvent,Et.domReference.current)||(Tt.current.openEvent=Ut.nativeEvent,vt(!0))},onBlur(Ut){Bt.current=!1;const Zt=Ut.relatedTarget,Kt=isElement(Zt)&&Zt.hasAttribute("data-floating-ui-focus-guard");Ft.current=setTimeout(()=>{contains$1(Et.floating.current,Zt)||contains$1(Et.domReference.current,Zt)||Kt||vt(!1)})}}}:{},[Rt,kt,Et,Tt,vt])},useRole=function(ft,lt){let{open:dt}=ft,{enabled:vt=!0,role:Tt="dialog"}=lt===void 0?{}:lt;const Et=useId(),Ct=useId();return reactExports.useMemo(()=>{const Rt={id:Et,role:Tt};return vt?Tt==="tooltip"?{reference:{"aria-describedby":dt?Et:void 0},floating:Rt}:{reference:{"aria-expanded":dt?"true":"false","aria-haspopup":Tt==="alertdialog"?"dialog":Tt,"aria-controls":dt?Et:void 0,...Tt==="listbox"&&{role:"combobox"},...Tt==="menu"&&{id:Ct}},floating:{...Rt,...Tt==="menu"&&{"aria-labelledby":Ct}}}:{}},[vt,Tt,dt,Et,Ct])};function useFloating(ft){let{open:lt=!1,onOpenChange:dt,whileElementsMounted:vt,placement:Tt,middleware:Et,strategy:Ct,nodeId:Rt}=ft===void 0?{}:ft;const[kt,Dt]=reactExports.useState(null),Bt=useFloatingTree(),Ft=reactExports.useRef(null),Ut=reactExports.useRef({}),Zt=reactExports.useState(()=>createPubSub())[0],Kt=useFloating$1({open:lt,placement:Tt,middleware:Et,strategy:Ct,whileElementsMounted:vt}),ln=useEvent(dt),hn=reactExports.useMemo(()=>({...Kt.refs,domReference:Ft}),[Kt.refs]),dn=reactExports.useMemo(()=>({...Kt,refs:hn,dataRef:Ut,nodeId:Rt,events:Zt,open:lt,onOpenChange:ln,_:{domReference:kt}}),[Kt,Rt,Zt,lt,ln,hn,kt]);index$1(()=>{const bn=Bt==null?void 0:Bt.nodesRef.current.find(En=>En.id===Rt);bn&&(bn.context=dn)});const{reference:pn}=Kt,mn=reactExports.useCallback(bn=>{(isElement(bn)||bn===null)&&(hn.domReference.current=bn,Dt(bn)),(isElement(hn.reference.current)||hn.reference.current===null||bn!==null&&!isElement(bn))&&pn(bn)},[pn,hn]),On=reactExports.useCallback(bn=>{const En=isElement(bn)?{getBoundingClientRect:()=>bn.getBoundingClientRect(),contextElement:bn}:bn;pn(En)},[pn]);return reactExports.useMemo(()=>({...Kt,context:dn,refs:hn,reference:mn,positionReference:On}),[Kt,hn,dn,mn,On])}function mergeProps(ft,lt,dt){const vt=new Map;return{...dt==="floating"&&{tabIndex:-1},...ft,...lt.map(Tt=>Tt?Tt[dt]:null).concat(ft).reduce((Tt,Et)=>(Et&&Object.entries(Et).forEach(Ct=>{let[Rt,kt]=Ct;if(Rt.indexOf("on")===0){if(vt.has(Rt)||vt.set(Rt,[]),typeof kt=="function"){var Dt;(Dt=vt.get(Rt))==null||Dt.push(kt),Tt[Rt]=function(){for(var Bt,Ft=arguments.length,Ut=new Array(Ft),Zt=0;Zt<Ft;Zt++)Ut[Zt]=arguments[Zt];(Bt=vt.get(Rt))==null||Bt.forEach(Kt=>Kt(...Ut))}}}else Tt[Rt]=kt}),Tt),{})}}const useInteractions=function(ft){ft===void 0&&(ft=[]);const lt=ft,dt=reactExports.useCallback(Et=>mergeProps(Et,ft,"reference"),lt),vt=reactExports.useCallback(Et=>mergeProps(Et,ft,"floating"),lt),Tt=reactExports.useCallback(Et=>mergeProps(Et,ft,"item"),lt);return reactExports.useMemo(()=>({getReferenceProps:dt,getFloatingProps:vt,getItemProps:Tt}),[dt,vt,Tt])},getMiddleware=({arrowRef:ft,placement:lt})=>{const dt=[];return dt.push(O$2(8)),dt.push(lt==="auto"?v$3():b$4()),dt.push(E$4({padding:8})),ft.current&&dt.push(arrow({element:ft.current})),dt},getPlacement=({placement:ft})=>ft==="auto"?void 0:ft,getArrowPlacement=({placement:ft})=>({top:"bottom",right:"left",bottom:"top",left:"right"})[ft.split("-")[0]],Floating=({children:ft,content:lt,theme:dt,animation:vt="duration-300",arrow:Tt=!0,placement:Et="top",style:Ct="dark",trigger:Rt="hover",closeRequestKey:kt,className:Dt,...Bt})=>{const Ft=reactExports.useRef(null),[Ut,Zt]=reactExports.useState(!1),Kt=useFloating({middleware:getMiddleware({arrowRef:Ft,placement:Et}),onOpenChange:Zt,open:Ut,placement:getPlacement({placement:Et})}),{context:ln,floating:hn,middlewareData:{arrow:{x:dn,y:pn}={}},reference:mn,refs:On,strategy:bn,update:En,x:An,y:Tn}=Kt,{getFloatingProps:In,getReferenceProps:Rn}=useInteractions([useClick(ln,{enabled:Rt==="click"}),useFocus(ln),useHover(ln,{enabled:Rt==="hover",handleClose:safePolygon()}),useRole(ln,{role:"tooltip"})]);return reactExports.useEffect(()=>{if(On.reference.current&&On.floating.current&&Ut)return P$1(On.reference.current,On.floating.current,En)},[Ut,On.floating,On.reference,En]),reactExports.useEffect(()=>{kt!==void 0&&Zt(!1)},[kt]),jsxs(Fragment,{children:[jsx("div",{className:dt.target,...Rn({ref:mn}),"data-testid":"flowbite-tooltip-target",children:ft}),jsxs("div",{"data-testid":"flowbite-tooltip",...In({className:classNames(dt.base,vt&&`${dt.animation} ${vt}`,!Ut&&dt.hidden,dt.style[Ct],Dt),ref:hn,style:{position:bn,top:Tn??" ",left:An??" "},...Bt}),children:[jsx("div",{className:dt.content,children:lt}),Tt&&jsx("div",{className:classNames(dt.arrow.base,{[dt.arrow.style.dark]:Ct==="dark",[dt.arrow.style.light]:Ct==="light",[dt.arrow.style.auto]:Ct==="auto"}),"data-testid":"flowbite-tooltip-arrow",ref:Ft,style:{top:pn??" ",left:dn??" ",right:" ",bottom:" ",[getArrowPlacement({placement:Kt.placement})]:dt.arrow.placement},children:" "})]})]})},DropdownDivider=()=>{const ft=useTheme().theme.dropdown.floating.divider;return jsx("div",{className:ft})},DropdownHeader=({children:ft,className:lt,...dt})=>{const vt=useTheme().theme.dropdown.floating.header;return jsxs(Fragment,{children:[jsx("div",{className:classNames(vt,lt),...dt,children:ft}),jsx(DropdownDivider,{})]})},DropdownItem=({children:ft,className:lt,onClick:dt,icon:vt})=>{const Tt=useTheme().theme.dropdown.floating.item;return jsxs("li",{className:classNames(Tt.base,lt),onClick:dt,children:[vt&&jsx(vt,{className:Tt.icon}),ft]})},icons={top:HiOutlineChevronUp,right:HiOutlineChevronRight,bottom:HiOutlineChevronDown,left:HiOutlineChevronLeft},DropdownComponent=({children:ft,className:lt,dismissOnClick:dt=!0,...vt})=>{const Tt=useTheme().theme.dropdown,Et=vt,{placement:Ct=vt.inline?"bottom-start":"bottom",trigger:Rt="click",label:kt,inline:Dt,floatingArrow:Bt=!1,arrowIcon:Ft=!0,...Ut}=Et,Zt=reactExports.useMemo(()=>{const[mn]=Ct.split("-");return icons[mn]??HiOutlineChevronDown},[Ct]),[Kt,ln]=reactExports.useState(void 0),hn=mn=>React.isValidElement(mn)?mn.type===DropdownItem?React.cloneElement(mn,{onClick:()=>{var On,bn;(bn=(On=mn.props).onClick)==null||bn.call(On),dt&&ln(uuid())}}):mn.props.children&&typeof mn.props.children=="object"?React.cloneElement(mn,{children:reactExports.Children.map(mn.props.children,hn)}):mn:mn,dn=reactExports.useMemo(()=>jsx("ul",{className:Tt.content,children:reactExports.Children.map(ft,hn)}),[ft,Tt]),pn=({children:mn})=>Dt?jsx("button",{className:Tt.inlineWrapper,children:mn}):jsx(Button,{...Ut,children:mn});return jsx(Floating,{content:dn,style:"auto",animation:"duration-100",placement:Ct,arrow:Bt,trigger:Rt,theme:Tt.floating,closeRequestKey:Kt,className:lt,children:jsxs(pn,{children:[kt,Ft&&jsx(Zt,{className:Tt.arrowIcon})]})})};DropdownComponent.displayName="Dropdown";DropdownItem.displayName="Dropdown.Item";DropdownHeader.displayName="Dropdown.Header";DropdownDivider.displayName="Dropdown.Divider";const Dropdown=Object.assign(DropdownComponent,{Item:DropdownItem,Header:DropdownHeader,Divider:DropdownDivider}),HelperText=({value:ft,children:lt,color:dt="default",className:vt,...Tt})=>{const Et=useTheme().theme.helperText;return jsx("p",{className:classNames(Et.base,Et.colors[dt],vt),...Tt,children:ft??lt??""})},FileInput=reactExports.forwardRef(({theme:ft={},sizing:lt="md",helperText:dt,color:vt="gray",className:Tt,...Et},Ct)=>{const Rt=mergeDeep(useTheme().theme.fileInput,ft);return jsxs(Fragment,{children:[jsx("div",{className:classNames(Rt.base,Tt),children:jsx("div",{className:Rt.field.base,children:jsx("input",{className:classNames(Rt.field.input.base,Rt.field.input.colors[vt],Rt.field.input.sizes[lt]),...Et,type:"file",ref:Ct})})}),dt&&jsx(HelperText,{color:vt,children:dt})]})});FileInput.displayName="FileInput";const FooterBrand=({alt:ft,className:lt,children:dt,href:vt,name:Tt,src:Et})=>{const Ct=useTheme().theme.footer.brand;return jsx("div",{children:vt?jsxs("a",{"data-testid":"flowbite-footer-brand",href:vt,className:classNames(Ct.base,lt),children:[jsx("img",{alt:ft,src:Et,className:Ct.img}),jsx("span",{"data-testid":"flowbite-footer-brand-span",className:Ct.span,children:Tt}),dt]}):jsx("img",{alt:ft,"data-testid":"flowbite-footer-brand",src:Et,className:Ct.img})})},FooterCopyright=({href:ft,by:lt,year:dt,className:vt})=>{const Tt=useTheme().theme.footer.copyright;return jsx("div",{children:jsxs("span",{className:classNames(Tt.base,vt),"data-testid":"flowbite-footer-copyright",children:["© ",dt,ft?jsx("a",{href:ft,className:Tt.href,children:lt}):jsx("span",{"data-testid":"flowbite-footer-copyright-span",className:Tt.span,children:lt})]})})},FooterDivider=({className:ft})=>{const lt=useTheme().theme.footer.divider;return jsx("hr",{"data-testid":"footer-divider",className:classNames(lt.base,ft)})},FooterIcon=({href:ft,className:lt,ariaLabel:dt,icon:vt})=>{const Tt=useTheme().theme.footer.icon;return jsx("div",{children:ft?jsx("a",{"aria-label":dt,"data-testid":"flowbite-footer-icon",href:ft,className:classNames(Tt.base,lt),children:jsx(vt,{className:Tt.size})}):jsx(vt,{"data-testid":"flowbite-footer-icon",className:Tt.size})})},FooterLink=({children:ft,className:lt,href:dt})=>{const vt=useTheme().theme.footer.groupLink.link;return jsx("li",{className:classNames(vt.base,lt),children:jsx("a",{href:dt,className:vt.href,children:ft})})},FooterLinkGroup=({children:ft,className:lt,col:dt=!1})=>{const vt=useTheme().theme.footer.groupLink;return jsx("ul",{"data-testid":"footer-groupLink",className:classNames(vt.base,dt&&vt.col,lt),children:ft})},FooterTitle=({title:ft,className:lt})=>{const dt=useTheme().theme.footer.title;return jsx("h2",{"data-testid":"flowbite-footer-title",className:classNames(dt.base,lt),children:ft})},FooterComponent=({children:ft,className:lt,bgDark:dt=!1,container:vt=!1})=>{const Tt=useTheme().theme.footer;return jsx("footer",{"data-testid":"flowbite-footer",className:classNames(Tt.base,dt&&Tt.bgDark,vt&&Tt.container,lt),children:ft})};FooterComponent.displayName="Footer";FooterCopyright.displayName="Footer.Copyright";FooterLink.displayName="Footer.Link";FooterBrand.displayName="Footer.Brand";FooterLinkGroup.displayName="Footer.LinkGroup";FooterIcon.displayName="Footer.Icon";FooterTitle.displayName="Footer.Title";FooterDivider.displayName="Footer.Divider";Object.assign(FooterComponent,{Copyright:FooterCopyright,Link:FooterLink,LinkGroup:FooterLinkGroup,Brand:FooterBrand,Icon:FooterIcon,Title:FooterTitle,Divider:FooterDivider});const Label=({children:ft,color:lt="default",disabled:dt=!1,value:vt,className:Tt,...Et})=>{const Ct=useTheme().theme.label;return jsx("label",{className:classNames(Ct.base,Ct.colors[lt],dt??Ct.disabled,Tt),...Et,children:vt??ft??""})},ListGroupItem=({active:ft,children:lt,href:dt,icon:vt,onClick:Tt,className:Et,...Ct})=>{const Rt=typeof dt<"u",kt=Rt?"a":"button",Dt=useTheme().theme.listGroup.item,Bt=Ct;return jsx("li",{children:jsxs(kt,{className:classNames(Dt.active[ft?"on":"off"],Dt.base,Dt.href[Rt?"on":"off"]),href:dt,onClick:Tt,type:Rt?void 0:"button",...Bt,children:[vt&&jsx(vt,{"aria-hidden":!0,className:Dt.icon,"data-testid":"flowbite-list-group-item-icon"}),lt]})})},ListGroupComponent=({children:ft,className:lt,...dt})=>{const vt=useTheme().theme.listGroup.base,Tt=dt;return jsx("ul",{className:classNames(vt,lt),...Tt,children:ft})};ListGroupComponent.displayName="ListGroup";ListGroupItem.displayName="ListGroup.Item";Object.assign(ListGroupComponent,{Item:ListGroupItem});const useKeyDown=(ft,lt)=>{const dt=vt=>{vt.key===ft&&lt()};reactExports.useEffect(()=>(document.addEventListener("keydown",dt),()=>{document.removeEventListener("keydown",dt)}),[ft,lt])},ModalContext=reactExports.createContext(void 0);function useModalContext(){const ft=reactExports.useContext(ModalContext);if(!ft)throw new Error("useModalContext should be used within the ModalContext provider!");return ft}const ModalBody=({children:ft,className:lt,...dt})=>{const{popup:vt}=useModalContext(),Tt=useTheme().theme.modal.body;return jsx("div",{className:classNames(Tt.base,{[Tt.popup]:vt},lt),...dt,children:ft})},ModalFooter=({children:ft,className:lt,...dt})=>{const{popup:vt}=useModalContext(),Tt=useTheme().theme.modal.footer;return jsx("div",{className:classNames(Tt.base,{[Tt.popup]:!vt},lt),...dt,children:ft})},ModalHeader=({children:ft,className:lt,...dt})=>{const{popup:vt,onClose:Tt}=useModalContext(),Et=useTheme().theme.modal.header;return jsxs("div",{className:classNames(Et.base,{[Et.popup]:vt},lt),...dt,children:[jsx("h3",{className:Et.title,children:ft}),jsx("button",{"aria-label":"Close",className:Et.close.base,type:"button",onClick:Tt,children:jsx(HiOutlineX,{"aria-hidden":!0,className:Et.close.icon})})]})},ModalComponent=({children:ft,show:lt,root:dt=document.body,popup:vt,size:Tt="2xl",position:Et="center",dismissible:Ct=!1,onClose:Rt,className:kt,...Dt})=>{const Bt=useTheme().theme.modal,Ft=reactExports.useRef(null);Ft.current||(Ft.current=document.createElement("div")),Ft.current.parentNode!==dt&&dt.appendChild(Ft.current),reactExports.useEffect(()=>()=>{var Kt;const Zt=Ft.current;Zt&&((Kt=Zt.parentNode)==null||Kt.removeChild(Zt),Ft.current=null)},[]),useKeyDown("Escape",()=>{Ct&&Rt&&Rt()});const Ut=Zt=>{Ct&&Zt.target===Zt.currentTarget&&Rt&&Rt()};return reactDomExports.createPortal(jsx(ModalContext.Provider,{value:{popup:vt,onClose:Rt},children:jsx("div",{"aria-hidden":!lt,className:classNames(Bt.base,Bt.positions[Et],lt?Bt.show.on:Bt.show.off,kt),"data-testid":"modal",role:"dialog",onClick:Ut,...Dt,children:jsx("div",{className:classNames(Bt.content.base,Bt.sizes[Tt]),children:jsx("div",{className:Bt.content.inner,children:ft})})})}),Ft.current)};ModalComponent.displayName="Modal";ModalHeader.displayName="Modal.Header";ModalBody.displayName="Modal.Body";ModalFooter.displayName="Modal.Footer";const Modal=Object.assign(ModalComponent,{Header:ModalHeader,Body:ModalBody,Footer:ModalFooter}),NavbarBrand=({theme:ft={},children:lt,className:dt,as:vt="a",...Tt})=>{const Et=mergeDeep(useTheme().theme.navbar.brand,ft);return jsx(vt,{className:classNames(Et.base,dt),...Tt,children:lt})},NavbarContext=reactExports.createContext(void 0);function useNavbarContext(){const ft=reactExports.useContext(NavbarContext);if(!ft)throw new Error("useNavBarContext should be used within the NavbarContext provider!");return ft}const NavbarCollapse=({theme:ft={},children:lt,className:dt,...vt})=>{const{isOpen:Tt}=useNavbarContext(),Et=mergeDeep(useTheme().theme.navbar.collapse,ft);return jsx("div",{className:classNames(Et.base,Et.hidden[Tt?"off":"on"],dt),"data-testid":"flowbite-navbar-collapse",...vt,children:jsx("ul",{className:Et.list,children:lt})})},NavbarLink=({active:ft,disabled:lt,theme:dt={},children:vt,className:Tt,as:Et="a",...Ct})=>{const Rt=mergeDeep(useTheme().theme.navbar.link,dt);return jsx("li",{children:jsx(Et,{className:classNames(Rt.base,{[Rt.active.on]:ft,[Rt.active.off]:!ft&&!lt},Rt.disabled[lt?"on":"off"],Tt),...Ct,children:vt})})};function GoThreeBars(ft){return GenIcon({tag:"svg",attr:{viewBox:"0 0 12 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M11.41 9H.59C0 9 0 8.59 0 8c0-.59 0-1 .59-1H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1h.01zm0-4H.59C0 5 0 4.59 0 4c0-.59 0-1 .59-1H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1h.01zM.59 11H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1H.59C0 13 0 12.59 0 12c0-.59 0-1 .59-1z"}}]})(ft)}const NavbarToggle=({barIcon:ft=GoThreeBars,theme:lt={},className:dt,...vt})=>{const{isOpen:Tt,setIsOpen:Et}=useNavbarContext(),Ct=()=>{Et(!Tt)},Rt=mergeDeep(useTheme().theme.navbar.toggle,lt);return jsxs("button",{className:classNames(Rt.base,dt),"data-testid":"flowbite-navbar-toggle",onClick:Ct,...vt,children:[jsx("span",{className:"sr-only",children:"Open main menu"}),jsx(ft,{className:Rt.icon})]})},NavbarComponent=({children:ft,menuOpen:lt,fluid:dt=!1,rounded:vt,border:Tt,className:Et,theme:Ct={},...Rt})=>{const[kt,Dt]=reactExports.useState(lt),Bt=mergeDeep(useTheme().theme.navbar.root,Ct);return jsx(NavbarContext.Provider,{value:{isOpen:kt,setIsOpen:Dt},children:jsx("nav",{className:classNames(Bt.base,Bt.bordered[Tt?"on":"off"],Bt.rounded[vt?"on":"off"],Et),...Rt,children:jsx("div",{className:classNames(Bt.inner.base,Bt.inner.fluid[dt?"on":"off"]),children:ft})})})};NavbarComponent.displayName="Navbar";NavbarBrand.displayName="Navbar.Brand";NavbarCollapse.displayName="Navbar.Collapse";NavbarLink.displayName="Navbar.Link";NavbarToggle.displayName="Navbar.Toggle";Object.assign(NavbarComponent,{Brand:NavbarBrand,Collapse:NavbarCollapse,Link:NavbarLink,Toggle:NavbarToggle});const Radio=reactExports.forwardRef(({theme:ft={},className:lt,...dt},vt)=>{const Tt=mergeDeep(useTheme().theme.radio,ft);return jsx("input",{ref:vt,className:classNames(Tt.root.base,lt),type:"radio",...dt})});Radio.displayName="Radio";const RangeSlider=reactExports.forwardRef(({theme:ft={},sizing:lt="md",className:dt,...vt},Tt)=>{const Et=mergeDeep(useTheme().theme.rangeSlider,ft);return jsx(Fragment,{children:jsx("div",{"data-testid":"flowbite-range-slider",className:classNames(Et.base,dt),children:jsx("div",{className:Et.field.base,children:jsx("input",{className:classNames(Et.field.input.base,Et.field.input.sizes[lt]),...vt,type:"range",ref:Tt})})})})});RangeSlider.displayName="RangeSlider";const RatingAdvanced=({percentFilled:ft=0,children:lt,className:dt,...vt})=>{const Tt=useTheme().theme.rating.advanced;return jsxs("div",{className:classNames(Tt.base,dt),...vt,children:[jsx("span",{className:Tt.label,children:lt}),jsx("div",{className:Tt.progress.base,children:jsx("div",{className:Tt.progress.fill,"data-testid":"flowbite-rating-fill",style:{width:`${ft}%`}})}),jsx("span",{className:Tt.progress.label,children:`${ft}%`})]})},RatingContext=reactExports.createContext(void 0);function useRatingContext(){const ft=reactExports.useContext(RatingContext);if(!ft)throw new Error("useRatingContext should be used within the RatingContext provider!");return ft}const RatingStar=({filled:ft=!0,starIcon:lt=HiStar,className:dt})=>{const{size:vt="sm"}=useRatingContext(),Tt=useTheme().theme.rating.star;return jsx(lt,{className:classNames(Tt.sizes[vt],Tt[ft?"filled":"empty"],dt),"data-testid":"flowbite-rating-star"})},RatingComponent=({children:ft,size:lt="sm",className:dt,...vt})=>{const Tt=useTheme().theme.rating;return jsx(RatingContext.Provider,{value:{size:lt},children:jsx("div",{className:classNames(Tt.base,dt),...vt,children:ft})})};RatingComponent.displayName="Rating";RatingStar.displayName="Rating.Star";RatingAdvanced.displayName="Rating.Advanced";Object.assign(RatingComponent,{Star:RatingStar,Advanced:RatingAdvanced});const Select=reactExports.forwardRef(({children:ft,sizing:lt="md",shadow:dt,helperText:vt,addon:Tt,icon:Et,color:Ct="gray",className:Rt,...kt},Dt)=>{const Bt=useTheme().theme.select;return jsxs("div",{className:classNames(Bt.base,Rt),children:[Tt&&jsx("span",{className:Bt.addon,children:Tt}),jsxs("div",{className:Bt.field.base,children:[Et&&jsx("div",{className:Bt.field.icon.base,children:jsx(Et,{className:Bt.field.icon.svg})}),jsx("select",{className:classNames(Bt.field.select.base,Bt.field.select.colors[Ct],Bt.field.select.withIcon[Et?"on":"off"],Bt.field.select.withAddon[Tt?"on":"off"],Bt.field.select.withShadow[dt?"on":"off"],Bt.field.select.sizes[lt]),...kt,ref:Dt,children:ft}),vt&&jsx(HelperText,{color:Ct,children:vt})]})]})});Select.displayName="Select";const Tooltip=({animation:ft="duration-300",arrow:lt=!0,children:dt,content:vt,placement:Tt="top",style:Et="dark",trigger:Ct="hover",className:Rt,...kt})=>{const Dt=useTheme().theme.tooltip;return jsx(Floating,{content:vt,style:Et,animation:ft,placement:Tt,arrow:lt,trigger:Ct,theme:Dt,className:Rt,...kt,children:dt})},SidebarContext=reactExports.createContext(void 0);function useSidebarContext(){const ft=reactExports.useContext(SidebarContext);if(!ft)throw new Error("useSidebarContext should be used within the SidebarContext provider!");return ft}const SidebarItemContext=reactExports.createContext(void 0);function useSidebarItemContext(){const ft=reactExports.useContext(SidebarItemContext);if(!ft)throw new Error("useSidebarItemContext should be used within the SidebarItemContext provider!");return ft}const SidebarCollapse=({children:ft,icon:lt,label:dt,className:vt,open:Tt=!1,...Et})=>{const Ct=reactExports.useId(),{isCollapsed:Rt}=useSidebarContext(),[kt,Dt]=reactExports.useState(Tt),Bt=useTheme().theme.sidebar.collapse;return reactExports.useEffect(()=>Dt(Tt),[Tt]),jsxs(({children:Ut})=>jsx("li",{children:Rt&&!kt?jsx(Tooltip,{content:dt,placement:"right",children:Ut}):Ut}),{children:[jsxs("button",{className:classNames(Bt.button,vt),id:`flowbite-sidebar-collapse-${Ct}`,onClick:()=>Dt(!kt),title:dt,type:"button",...Et,children:[lt&&jsx(lt,{"aria-hidden":!0,className:classNames(Bt.icon.base,Bt.icon.open[kt?"on":"off"]),"data-testid":"flowbite-sidebar-collapse-icon"}),Rt?jsx("span",{className:"sr-only",children:dt}):jsxs(Fragment,{children:[jsx("span",{className:Bt.label.base,"data-testid":"flowbite-sidebar-collapse-label",children:dt}),jsx(HiChevronDown,{"aria-hidden":!0,className:Bt.label.icon})]})]}),jsx("ul",{"aria-labelledby":`flowbite-sidebar-collapse-${Ct}`,className:Bt.list,hidden:!kt,children:jsx(SidebarItemContext.Provider,{value:{isInsideCollapse:!0},children:ft})})]})};SidebarCollapse.displayName="Sidebar.Collapse";const SidebarCTA=({children:ft,color:lt="info",className:dt,...vt})=>{const{isCollapsed:Tt}=useSidebarContext(),Et=useTheme().theme.sidebar.cta;return jsx("div",{className:classNames(Et.base,Et.color[lt],dt),"data-testid":"sidebar-cta",hidden:Tt,...vt,children:ft})};SidebarCTA.displayName="Sidebar.CTA";const ListItem=({id:ft,isCollapsed:lt,tooltipChildren:dt,children:vt})=>jsx("li",{children:lt?jsx(Tooltip,{content:jsx(TooltipContent,{id:ft,children:dt}),placement:"right",children:vt}):vt}),TooltipContent=({id:ft,children:lt})=>jsx(Children,{id:ft,children:lt}),Children=({id:ft,children:lt})=>{const dt=useTheme().theme.sidebar.item;return jsx("span",{className:classNames(dt.content.base),"data-testid":"flowbite-sidebar-item-content",id:`flowbite-sidebar-item-${ft}`,children:lt})},SidebarItem=reactExports.forwardRef(({as:ft="a",children:lt,icon:dt,active:vt,label:Tt,labelColor:Et="info",className:Ct,...Rt},kt)=>{const Dt=reactExports.useId(),{isCollapsed:Bt}=useSidebarContext(),{isInsideCollapse:Ft}=useSidebarItemContext(),Ut=useTheme().theme.sidebar.item;return jsx(ListItem,{id:Dt,isCollapsed:Bt,tooltipChildren:lt,children:jsxs(ft,{"aria-labelledby":`flowbite-sidebar-item-${Dt}`,className:classNames(Ut.base,vt&&Ut.active,!Bt&&Ft&&Ut.collapsed.insideCollapse,Ct),ref:kt,...Rt,children:[dt&&jsx(dt,{"aria-hidden":!0,className:classNames(Ut.icon.base,vt&&Ut.icon.active),"data-testid":"flowbite-sidebar-item-icon"}),Bt&&!dt&&jsx("span",{className:Ut.collapsed.noIcon,children:lt.charAt(0).toLocaleUpperCase()??"?"}),!Bt&&jsx(Children,{id:Dt,children:lt}),!Bt&&Tt&&jsx(Badge,{color:Et,"data-testid":"flowbite-sidebar-label",hidden:Bt,className:Ut.label,children:Tt})]})})});SidebarItem.displayName="Sidebar.Item";const SidebarItemGroup=({children:ft,className:lt,...dt})=>{const vt=useTheme().theme.sidebar.itemGroup;return jsx("ul",{className:classNames(vt,lt),"data-testid":"flowbite-sidebar-item-group",...dt,children:jsx(SidebarItemContext.Provider,{value:{isInsideCollapse:!1},children:ft})})};SidebarItemGroup.displayName="Sidebar.ItemGroup";const SidebarItems=({children:ft,className:lt,...dt})=>{const vt=useTheme().theme.sidebar.items;return jsx("div",{className:classNames(vt,lt),"data-testid":"flowbite-sidebar-items",...dt,children:ft})};SidebarItems.displayName="Sidebar.Items";const SidebarLogo=({children:ft,href:lt,img:dt,imgAlt:vt="",className:Tt,...Et})=>{const Ct=reactExports.useId(),{isCollapsed:Rt}=useSidebarContext(),kt=useTheme().theme.sidebar.logo;return jsxs("a",{"aria-labelledby":`flowbite-sidebar-logo-${Ct}`,className:classNames(kt.base,Tt),href:lt,...Et,children:[jsx("img",{alt:vt,className:kt.img,src:dt}),jsx("span",{className:kt.collapsed[Rt?"on":"off"],id:`flowbite-sidebar-logo-${Ct}`,children:ft})]})};SidebarLogo.displayName="Sidebar.Logo";const SidebarComponent=({children:ft,collapseBehavior:lt="collapse",collapsed:dt=!1,...vt})=>{const Tt=useTheme().theme.sidebar;return jsx(SidebarContext.Provider,{value:{isCollapsed:dt},children:jsx("aside",{"aria-label":"Sidebar",className:classNames(Tt.base,Tt.collapsed[dt?"on":"off"]),hidden:dt&&lt==="hide",...vt,children:jsx("div",{className:Tt.inner,children:ft})})})};SidebarComponent.displayName="Sidebar";Object.assign(SidebarComponent,{Collapse:SidebarCollapse,CTA:SidebarCTA,Item:SidebarItem,Items:SidebarItems,ItemGroup:SidebarItemGroup,Logo:SidebarLogo});const TabItem=({children:ft,className:lt})=>jsx("div",{className:lt,children:ft}),TabsComponent=reactExports.forwardRef(({children:ft,style:lt="default",className:dt,onActiveTabChange:vt,...Tt},Et)=>{const Ct=useTheme().theme.tab,Rt=reactExports.useId(),kt=reactExports.useMemo(()=>reactExports.Children.map(ft,({props:pn})=>pn),[ft]),Dt=reactExports.useRef([]),[Bt,Ft]=reactExports.useState(Math.max(0,kt.findIndex(pn=>pn.active))),[Ut,Zt]=reactExports.useState(Math.max(0,kt.findIndex(pn=>pn.active))),Kt=pn=>{Ft(pn),vt&&vt(pn)},ln=({target:pn})=>{Kt(pn),Zt(pn)},hn=({event:pn,target:mn})=>{pn.key==="ArrowLeft"&&Zt(Math.max(0,Ut-1)),pn.key==="ArrowRight"&&Zt(Math.min(kt.length-1,Ut+1)),pn.key==="Enter"&&(Kt(mn),Zt(mn))},dn=Ct.tablist.tabitem.styles[lt];return reactExports.useEffect(()=>{var pn;(pn=Dt.current[Ut])==null||pn.focus()},[Ut]),reactExports.useImperativeHandle(Et,()=>({setActiveTab:Kt})),jsxs("div",{className:classNames(Ct.base,dt),children:[jsx("div",{"aria-label":"Tabs",role:"tablist",className:classNames(Ct.tablist.base,Ct.tablist.styles[lt],dt),...Tt,children:kt.map((pn,mn)=>jsxs("button",{type:"button","aria-controls":`${Rt}-tabpanel-${mn}`,"aria-selected":mn===Bt,className:classNames(Ct.tablist.tabitem.base,{...dn},{[dn.active.on]:mn===Bt,[dn.active.off]:mn!==Bt&&!pn.disabled}),disabled:pn.disabled,id:`${Rt}-tab-${mn}`,onClick:()=>ln({target:mn}),onKeyDown:On=>hn({event:On,target:mn}),ref:On=>Dt.current[mn]=On,role:"tab",tabIndex:mn===Ut?0:-1,children:[pn.icon&&jsx(pn.icon,{className:Ct.tablist.tabitem.icon}),pn.title]},mn))}),jsx("div",{children:kt.map((pn,mn)=>jsx("div",{"aria-labelledby":`${Rt}-tab-${mn}`,className:Ct.tabpanel,hidden:mn!==Bt,id:`${Rt}-tabpanel-${mn}`,role:"tabpanel",tabIndex:0,children:pn.children},mn))})]})});TabsComponent.displayName="Tabs.Group";TabItem.displayName="Tabs.Item";const Tabs={Group:TabsComponent,Item:TabItem},TableBody=({children:ft,...lt})=>jsx("tbody",{...lt,children:ft}),TableCell=({children:ft,className:lt,...dt})=>{const vt=useTheme().theme.table.cell;return jsx("td",{className:classNames(vt.base,lt),...dt,children:ft})},TableContext=reactExports.createContext(void 0);function useTableContext(){const ft=reactExports.useContext(TableContext);if(!ft)throw new Error("useTableContext should be used within the TableContext provider!");return ft}const TableHead=({children:ft,className:lt,...dt})=>{const vt=useTheme().theme.table;return jsx("thead",{className:classNames(vt.head.base,lt),...dt,children:jsx("tr",{children:ft})})},TableHeadCell=({children:ft,className:lt,...dt})=>{const vt=useTheme().theme.table.head.cell;return jsx("th",{className:classNames(vt.base,lt),...dt,children:ft})},TableRow=({children:ft,className:lt,...dt})=>{const vt=useTheme().theme.table.row,{striped:Tt,hoverable:Et}=useTableContext();return jsx("tr",{"data-testid":"table-row-element",className:classNames(Tt&&vt.striped,Et&&vt.hovered,lt),...dt,children:ft})},TableComponent=({children:ft,striped:lt,hoverable:dt,className:vt,...Tt})=>{const Et=useTheme().theme.table;return jsx("div",{"data-testid":"table-element",className:classNames(Et.wrapper),children:jsx(TableContext.Provider,{value:{striped:lt,hoverable:dt},children:jsx("table",{className:classNames(Et.base,vt),...Tt,children:ft})})})};TableComponent.displayName="Table";TableHead.displayName="Table.Head";TableBody.displayName="Table.Body";TableRow.displayName="Table.Row";TableCell.displayName="Table.Cell";TableHeadCell.displayName="Table.HeadCell";Object.assign(TableComponent,{Head:TableHead,Body:TableBody,Row:TableRow,Cell:TableCell,HeadCell:TableHeadCell});const Textarea=reactExports.forwardRef(({shadow:ft,helperText:lt,color:dt="gray",className:vt,...Tt},Et)=>{const Ct=useTheme().theme.textarea;return jsxs(Fragment,{children:[jsx("textarea",{ref:Et,className:classNames(Ct.base,Ct.colors[dt],Ct.withShadow[ft?"on":"off"],vt),...Tt}),lt&&jsx(HelperText,{color:dt,children:lt})]})});Textarea.displayName="Textarea";const TextInput=reactExports.forwardRef(({sizing:ft="md",shadow:lt,helperText:dt,addon:vt,icon:Tt,rightIcon:Et,color:Ct="gray",className:Rt,theme:kt={},...Dt},Bt)=>{const Ft=mergeDeep(useTheme().theme.textInput,kt);return jsxs(Fragment,{children:[jsxs("div",{className:classNames(Ft.base,Rt),children:[vt&&jsx("span",{className:Ft.addon,children:vt}),jsxs("div",{className:Ft.field.base,children:[Tt&&jsx("div",{className:Ft.field.icon.base,children:jsx(Tt,{className:Ft.field.icon.svg})}),Et&&jsx("div",{"data-testid":"right-icon",className:Ft.field.rightIcon.base,children:jsx(Et,{className:Ft.field.rightIcon.svg})}),jsx("input",{className:classNames(Ft.field.input.base,Ft.field.input.colors[Ct],Ft.field.input.withIcon[Tt?"on":"off"],Ft.field.input.withAddon[vt?"on":"off"],Ft.field.input.withShadow[lt?"on":"off"],Ft.field.input.sizes[ft]),...Dt,ref:Bt})]})]}),dt&&jsx(HelperText,{color:Ct,children:dt})]})});TextInput.displayName="TextInput";const TimelineBody=({children:ft,className:lt,...dt})=>{const vt=useTheme().theme.timeline.item.content;return jsx("p",{className:classNames(vt.body,lt),...dt,children:ft})},TimelineContext=reactExports.createContext(void 0);function useTimelineContext(){const ft=reactExports.useContext(TimelineContext);if(!ft)throw new Error("useTimelineContext should be used within the TimelineContext providor!");return ft}const TimelineContent=({children:ft,className:lt,...dt})=>{const vt=useTheme().theme.timeline.item.content,{horizontal:Tt}=useTimelineContext();return jsx("div",{"data-testid":"timeline-content",className:classNames(Tt&&vt.base,lt),...dt,children:ft})},TimelineItem=({children:ft,className:lt,...dt})=>{const vt=useTheme().theme.timeline.item,{horizontal:Tt}=useTimelineContext();return jsx("li",{"data-testid":"timeline-item",className:classNames(Tt&&vt.base.horizontal,!Tt&&vt.base.vertical,lt),...dt,children:ft})},TimelinePoint=({children:ft,className:lt,icon:dt,...vt})=>{const Tt=useTheme().theme.timeline.item.point,{horizontal:Et}=useTimelineContext();return jsxs("div",{"data-testid":"timeline-point",className:classNames(Et&&Tt.base.horizontal,!Et&&Tt.base.vertical,lt),...vt,children:[ft,dt?jsx("span",{className:classNames(Tt.marker.icon.wrapper),children:jsx(dt,{"aria-hidden":!0,className:classNames(Tt.marker.icon.base)})}):jsx("div",{className:classNames(Et&&Tt.marker.base.horizontal,!Et&&Tt.marker.base.vertical)}),Et&&jsx("div",{className:classNames(Tt.line)})]})},TimelineTime=({children:ft,className:lt,...dt})=>{const vt=useTheme().theme.timeline.item.content;return jsx("time",{className:classNames(vt.time,lt),...dt,children:ft})},TimelineTitle=({children:ft,className:lt,as:dt="h3",...vt})=>{const Tt=useTheme().theme.timeline.item.content;return jsx(dt,{className:classNames(Tt.title,lt),...vt,children:ft})},TimelineComponent=({children:ft,horizontal:lt,className:dt})=>{const vt=useTheme().theme.timeline;return jsx(TimelineContext.Provider,{value:{horizontal:lt},children:jsx("ol",{"data-testid":"timeline-component",className:classNames(lt&&vt.direction.horizontal,!lt&&vt.direction.vertical,dt),children:ft})})};TimelineComponent.displayName="Timeline";TimelineItem.displayName="Timeline.Item";TimelinePoint.displayName="Timeline.Point";TimelineContent.displayName="Timeline.Content";TimelineTime.displayName="Timeline.Time";TimelineTitle.displayName="Timeline.Title";TimelineBody.displayName="Timeline.Body";Object.assign(TimelineComponent,{Item:TimelineItem,Point:TimelinePoint,Content:TimelineContent,Time:TimelineTime,Title:TimelineTitle,Body:TimelineBody});const ToastContext=reactExports.createContext(void 0);function useToastContext(){const ft=reactExports.useContext(ToastContext);if(!ft)throw new Error("useToastContext should be used within the ToastContext provider!");return ft}const ToastToggle=({className:ft,xIcon:lt=HiX})=>{const{duration:dt,isClosed:vt,isRemoved:Tt,setIsClosed:Et,setIsRemoved:Ct}=useToastContext(),Rt=useTheme().theme.toast.toggle;return jsx("button",{"aria-label":"Close",onClick:()=>{Et(!vt),setTimeout(()=>Ct(!Tt),dt)},type:"button",className:classNames(Rt.base,ft),children:jsx(lt,{className:Rt.icon})})},durationClasses={75:"duration-75",100:"duration-100",150:"duration-150",200:"duration-200",300:"duration-300",500:"duration-500",700:"duration-700",1e3:"duration-1000"},ToastComponent=({children:ft,duration:lt=300,className:dt,...vt})=>{const[Tt,Et]=reactExports.useState(!1),[Ct,Rt]=reactExports.useState(!1),kt=useTheme().theme.toast;return jsx(ToastContext.Provider,{value:{duration:lt,isClosed:Tt,isRemoved:Ct,setIsClosed:Et,setIsRemoved:Rt},children:jsx("div",{"data-testid":"flowbite-toast",className:classNames(kt.base,durationClasses[lt],{[kt.closed]:Tt},{[kt.removed]:Ct},dt),...vt,children:ft})})};ToastComponent.displayName="Toast";ToastToggle.displayName="Toast.Toggle";Object.assign(ToastComponent,{Toggle:ToastToggle});const IconButton=({icon:ft,text:lt,color:dt,onClick:vt,className:Tt,type:Et})=>jsxs(Button,{className:Tt,onClick:vt,color:dt,type:Et,children:[jsx(FontAwesomeIcon,{icon:ft}),lt!==""?jsx("span",{className:"ml-2",children:lt}):null]});var faTrashCan={prefix:"fas",iconName:"trash-can",icon:[448,512,[61460,"trash-alt"],"f2ed","M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"]},faPause={prefix:"fas",iconName:"pause",icon:[320,512,[9208],"f04c","M48 64C21.5 64 0 85.5 0 112V400c0 26.5 21.5 48 48 48H80c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48H48zm192 0c-26.5 0-48 21.5-48 48V400c0 26.5 21.5 48 48 48h32c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48H240z"]},faArrowsLeftRight={prefix:"fas",iconName:"arrows-left-right",icon:[512,512,["arrows-h"],"f07e","M406.6 374.6l96-96c12.5-12.5 12.5-32.8 0-45.3l-96-96c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224l-293.5 0 41.4-41.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3l96 96c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 288l293.5 0-41.4 41.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0z"]},faArrowsRotate={prefix:"fas",iconName:"arrows-rotate",icon:[512,512,[128472,"refresh","sync"],"f021","M89.1 202.6c7.7-21.8 20.2-42.3 37.8-59.8c62.5-62.5 163.8-62.5 226.3 0L370.3 160H320c-17.7 0-32 14.3-32 32s14.3 32 32 32H447.5c0 0 0 0 0 0h.4c17.7 0 32-14.3 32-32V64c0-17.7-14.3-32-32-32s-32 14.3-32 32v51.2L398.4 97.6c-87.5-87.5-229.3-87.5-316.8 0C57.2 122 39.6 150.7 28.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5zM23 289.3c-5 1.5-9.8 4.2-13.7 8.2c-4 4-6.7 8.8-8.1 14c-.3 1.2-.6 2.5-.8 3.8c-.3 1.7-.4 3.4-.4 5.1V448c0 17.7 14.3 32 32 32s32-14.3 32-32V396.9l17.6 17.5 0 0c87.5 87.4 229.3 87.4 316.7 0c24.4-24.4 42.1-53.1 52.9-83.7c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.5 62.5-163.8 62.5-226.3 0l-.1-.1L109.6 352H160c17.7 0 32-14.3 32-32s-14.3-32-32-32H32.4c-1.6 0-3.2 .1-4.8 .3s-3.1 .5-4.6 1z"]},faSync=faArrowsRotate,faSquare={prefix:"fas",iconName:"square",icon:[448,512,[9632,9723,9724,61590],"f0c8","M0 96C0 60.7 28.7 32 64 32H384c35.3 0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96z"]},faTrash={prefix:"fas",iconName:"trash",icon:[448,512,[],"f1f8","M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"]},faGear={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M481.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-30.9 28.1c-7.7 7.1-11.4 17.5-10.9 27.9c.1 2.9 .2 5.8 .2 8.8s-.1 5.9-.2 8.8c-.5 10.5 3.1 20.9 10.9 27.9l30.9 28.1c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-39.7-12.6c-10-3.2-20.8-1.1-29.7 4.6c-4.9 3.1-9.9 6.1-15.1 8.7c-9.3 4.8-16.5 13.2-18.8 23.4l-8.9 40.7c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-8.9-40.7c-2.2-10.2-9.5-18.6-18.8-23.4c-5.2-2.7-10.2-5.6-15.1-8.7c-8.8-5.7-19.7-7.8-29.7-4.6L69.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l30.9-28.1c7.7-7.1 11.4-17.5 10.9-27.9c-.1-2.9-.2-5.8-.2-8.8s.1-5.9 .2-8.8c.5-10.5-3.1-20.9-10.9-27.9L8.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l39.7 12.6c10 3.2 20.8 1.1 29.7-4.6c4.9-3.1 9.9-6.1 15.1-8.7c9.3-4.8 16.5-13.2 18.8-23.4l8.9-40.7c2-9.1 9-16.3 18.2-17.8C213.3 1.2 227.5 0 242 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l8.9 40.7c2.2 10.2 9.4 18.6 18.8 23.4c5.2 2.7 10.2 5.6 15.1 8.7c8.8 5.7 19.7 7.7 29.7 4.6l39.7-12.6c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM242 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"]},faDownload={prefix:"fas",iconName:"download",icon:[512,512,[],"f019","M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32V274.7l-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7V32zM64 352c-35.3 0-64 28.7-64 64v32c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V416c0-35.3-28.7-64-64-64H346.5l-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352H64zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},faUpload={prefix:"fas",iconName:"upload",icon:[512,512,[],"f093","M288 109.3V352c0 17.7-14.3 32-32 32s-32-14.3-32-32V109.3l-73.4 73.4c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l128-128c12.5-12.5 32.8-12.5 45.3 0l128 128c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L288 109.3zM64 352H192c0 35.3 28.7 64 64 64s64-28.7 64-64H448c35.3 0 64 28.7 64 64v32c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V416c0-35.3 28.7-64 64-64zM432 456a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"]},faEraser={prefix:"fas",iconName:"eraser",icon:[512,512,[],"f12d","M258.7 57.4L25.4 290.7c-25 25-25 65.5 0 90.5l80 80c12 12 28.3 18.7 45.3 18.7H256h9.4H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H355.9L486.6 285.3c25-25 25-65.5 0-90.5L349.3 57.4c-25-25-65.5-25-90.5 0zM265.4 416H256l-105.4 0-80-80L195.3 211.3 332.7 348.7 265.4 416z"]},faPlay={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"]},faCopy={prefix:"fas",iconName:"copy",icon:[512,512,[],"f0c5","M224 0c-35.3 0-64 28.7-64 64V288c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H224zM64 160c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H288c35.3 0 64-28.7 64-64V384H288v64H64V224h64V160H64z"]},faPlus={prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M240 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H32c-17.7 0-32 14.3-32 32s14.3 32 32 32H176V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H384c17.7 0 32-14.3 32-32s-14.3-32-32-32H240V80z"]},faRobot={prefix:"fas",iconName:"robot",icon:[640,512,[129302],"f544","M320 0c17.7 0 32 14.3 32 32V96H472c39.8 0 72 32.2 72 72V440c0 39.8-32.2 72-72 72H168c-39.8 0-72-32.2-72-72V168c0-39.8 32.2-72 72-72H288V32c0-17.7 14.3-32 32-32zM208 384c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16H208zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16H304zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16H400zM264 256a40 40 0 1 0 -80 0 40 40 0 1 0 80 0zm152 40a40 40 0 1 0 0-80 40 40 0 1 0 0 80zM48 224H64V416H48c-26.5 0-48-21.5-48-48V272c0-26.5 21.5-48 48-48zm544 0c26.5 0 48 21.5 48 48v96c0 26.5-21.5 48-48 48H576V224h16z"]},faCirclePlus={prefix:"fas",iconName:"circle-plus",icon:[512,512,["plus-circle"],"f055","M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0S0 114.6 0 256S114.6 512 256 512zM232 344V280H168c-13.3 0-24-10.7-24-24s10.7-24 24-24h64V168c0-13.3 10.7-24 24-24s24 10.7 24 24v64h64c13.3 0 24 10.7 24 24s-10.7 24-24 24H280v64c0 13.3-10.7 24-24 24s-24-10.7-24-24z"]},faPlusCircle=faCirclePlus,faCircleXmark={prefix:"fas",iconName:"circle-xmark",icon:[512,512,[61532,"times-circle","xmark-circle"],"f057","M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0S0 114.6 0 256S114.6 512 256 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"]},faXmarkCircle=faCircleXmark;const BlockManagerPanel=()=>{const ft=useRobartState(Rt=>Rt.blocks),lt=Object.values(ft),dt=useRobartState(Rt=>Rt.removeBlock),vt=useRobartState(Rt=>Rt.createBlock),Tt=useRobartState(Rt=>Rt.copyBlock),Et=useRobartState(Rt=>Rt.editingBlockId),Ct=useRobartState(Rt=>Rt.setEditingBlock);return jsxs("div",{children:[jsxs("div",{className:"flex flex-wrap gap-2 p-2",children:[jsx(IconButton,{icon:faPlusCircle,text:"New",onClick:()=>{const Rt=vt("New Block");Ct(Rt)}}),jsx(IconButton,{icon:faCopy,text:"Copy",onClick:()=>{if(Et===void 0)return;const Rt=Tt(Et);Ct(Rt)}}),jsx(IconButton,{color:"failure",icon:faTrash,text:"Delete",onClick:()=>{Et!==void 0&&dt(Et)}})]}),jsx("div",{className:"flex flex-wrap gap-2 p-2",children:lt.map(Rt=>jsx(Button,{className:"flex",onClick:()=>Ct(Rt.id),color:"success",children:Rt.name},Rt.id))})]})};function __awaiter(ft,lt,dt,vt){function Tt(Et){return Et instanceof dt?Et:new dt(function(Ct){Ct(Et)})}return new(dt||(dt=Promise))(function(Et,Ct){function Rt(Bt){try{Dt(vt.next(Bt))}catch(Ft){Ct(Ft)}}function kt(Bt){try{Dt(vt.throw(Bt))}catch(Ft){Ct(Ft)}}function Dt(Bt){Bt.done?Et(Bt.value):Tt(Bt.value).then(Rt,kt)}Dt((vt=vt.apply(ft,lt||[])).next())})}function __generator(ft,lt){var dt={label:0,sent:function(){if(Et[0]&1)throw Et[1];return Et[1]},trys:[],ops:[]},vt,Tt,Et,Ct;return Ct={next:Rt(0),throw:Rt(1),return:Rt(2)},typeof Symbol=="function"&&(Ct[Symbol.iterator]=function(){return this}),Ct;function Rt(Dt){return function(Bt){return kt([Dt,Bt])}}function kt(Dt){if(vt)throw new TypeError("Generator is already executing.");for(;Ct&&(Ct=0,Dt[0]&&(dt=0)),dt;)try{if(vt=1,Tt&&(Et=Dt[0]&2?Tt.return:Dt[0]?Tt.throw||((Et=Tt.return)&&Et.call(Tt),0):Tt.next)&&!(Et=Et.call(Tt,Dt[1])).done)return Et;switch(Tt=0,Et&&(Dt=[Dt[0]&2,Et.value]),Dt[0]){case 0:case 1:Et=Dt;break;case 4:return dt.label++,{value:Dt[1],done:!1};case 5:dt.label++,Tt=Dt[1],Dt=[0];continue;case 7:Dt=dt.ops.pop(),dt.trys.pop();continue;default:if(Et=dt.trys,!(Et=Et.length>0&&Et[Et.length-1])&&(Dt[0]===6||Dt[0]===2)){dt=0;continue}if(Dt[0]===3&&(!Et||Dt[1]>Et[0]&&Dt[1]<Et[3])){dt.label=Dt[1];break}if(Dt[0]===6&&dt.label<Et[1]){dt.label=Et[1],Et=Dt;break}if(Et&&dt.label<Et[2]){dt.label=Et[2],dt.ops.push(Dt);break}Et[2]&&dt.ops.pop(),dt.trys.pop();continue}Dt=lt.call(ft,dt)}catch(Bt){Dt=[6,Bt],Tt=0}finally{vt=Et=0}if(Dt[0]&5)throw Dt[1];return{value:Dt[0]?Dt[1]:void 0,done:!0}}}function __read(ft,lt){var dt=typeof Symbol=="function"&&ft[Symbol.iterator];if(!dt)return ft;var vt=dt.call(ft),Tt,Et=[],Ct;try{for(;(lt===void 0||lt-- >0)&&!(Tt=vt.next()).done;)Et.push(Tt.value)}catch(Rt){Ct={error:Rt}}finally{try{Tt&&!Tt.done&&(dt=vt.return)&&dt.call(vt)}finally{if(Ct)throw Ct.error}}return Et}function __spreadArray(ft,lt,dt){if(dt||arguments.length===2)for(var vt=0,Tt=lt.length,Et;vt<Tt;vt++)(Et||!(vt in lt))&&(Et||(Et=Array.prototype.slice.call(lt,0,vt)),Et[vt]=lt[vt]);return ft.concat(Et||Array.prototype.slice.call(lt))}var COMMON_MIME_TYPES=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function toFileWithPath(ft,lt){var dt=withMimeType(ft);if(typeof dt.path!="string"){var vt=ft.webkitRelativePath;Object.defineProperty(dt,"path",{value:typeof lt=="string"?lt:typeof vt=="string"&&vt.length>0?vt:ft.name,writable:!1,configurable:!1,enumerable:!0})}return dt}function withMimeType(ft){var lt=ft.name,dt=lt&&lt.lastIndexOf(".")!==-1;if(dt&&!ft.type){var vt=lt.split(".").pop().toLowerCase(),Tt=COMMON_MIME_TYPES.get(vt);Tt&&Object.defineProperty(ft,"type",{value:Tt,writable:!1,configurable:!1,enumerable:!0})}return ft}var FILES_TO_IGNORE=[".DS_Store","Thumbs.db"];function fromEvent(ft){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(lt){return isObject(ft)&&isDataTransfer(ft.dataTransfer)?[2,getDataTransferFiles(ft.dataTransfer,ft.type)]:isChangeEvt(ft)?[2,getInputFiles(ft)]:Array.isArray(ft)&&ft.every(function(dt){return"getFile"in dt&&typeof dt.getFile=="function"})?[2,getFsHandleFiles(ft)]:[2,[]]})})}function isDataTransfer(ft){return isObject(ft)}function isChangeEvt(ft){return isObject(ft)&&isObject(ft.target)}function isObject(ft){return typeof ft=="object"&&ft!==null}function getInputFiles(ft){return fromList(ft.target.files).map(function(lt){return toFileWithPath(lt)})}function getFsHandleFiles(ft){return __awaiter(this,void 0,void 0,function(){var lt;return __generator(this,function(dt){switch(dt.label){case 0:return[4,Promise.all(ft.map(function(vt){return vt.getFile()}))];case 1:return lt=dt.sent(),[2,lt.map(function(vt){return toFileWithPath(vt)})]}})})}function getDataTransferFiles(ft,lt){return __awaiter(this,void 0,void 0,function(){var dt,vt;return __generator(this,function(Tt){switch(Tt.label){case 0:return ft.items?(dt=fromList(ft.items).filter(function(Et){return Et.kind==="file"}),lt!=="drop"?[2,dt]:[4,Promise.all(dt.map(toFilePromises))]):[3,2];case 1:return vt=Tt.sent(),[2,noIgnoredFiles(flatten$1(vt))];case 2:return[2,noIgnoredFiles(fromList(ft.files).map(function(Et){return toFileWithPath(Et)}))]}})})}function noIgnoredFiles(ft){return ft.filter(function(lt){return FILES_TO_IGNORE.indexOf(lt.name)===-1})}function fromList(ft){if(ft===null)return[];for(var lt=[],dt=0;dt<ft.length;dt++){var vt=ft[dt];lt.push(vt)}return lt}function toFilePromises(ft){if(typeof ft.webkitGetAsEntry!="function")return fromDataTransferItem(ft);var lt=ft.webkitGetAsEntry();return lt&&lt.isDirectory?fromDirEntry(lt):fromDataTransferItem(ft)}function flatten$1(ft){return ft.reduce(function(lt,dt){return __spreadArray(__spreadArray([],__read(lt),!1),__read(Array.isArray(dt)?flatten$1(dt):[dt]),!1)},[])}function fromDataTransferItem(ft){var lt=ft.getAsFile();if(!lt)return Promise.reject("".concat(ft," is not a File"));var dt=toFileWithPath(lt);return Promise.resolve(dt)}function fromEntry(ft){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(lt){return[2,ft.isDirectory?fromDirEntry(ft):fromFileEntry(ft)]})})}function fromDirEntry(ft){var lt=ft.createReader();return new Promise(function(dt,vt){var Tt=[];function Et(){var Ct=this;lt.readEntries(function(Rt){return __awaiter(Ct,void 0,void 0,function(){var kt,Dt,Bt;return __generator(this,function(Ft){switch(Ft.label){case 0:if(Rt.length)return[3,5];Ft.label=1;case 1:return Ft.trys.push([1,3,,4]),[4,Promise.all(Tt)];case 2:return kt=Ft.sent(),dt(kt),[3,4];case 3:return Dt=Ft.sent(),vt(Dt),[3,4];case 4:return[3,6];case 5:Bt=Promise.all(Rt.map(fromEntry)),Tt.push(Bt),Et(),Ft.label=6;case 6:return[2]}})})},function(Rt){vt(Rt)})}Et()})}function fromFileEntry(ft){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(lt){return[2,new Promise(function(dt,vt){ft.file(function(Tt){var Et=toFileWithPath(Tt,ft.fullPath);dt(Et)},function(Tt){vt(Tt)})})]})})}var _default=function(ft,lt){if(ft&&lt){var dt=Array.isArray(lt)?lt:lt.split(","),vt=ft.name||"",Tt=(ft.type||"").toLowerCase(),Et=Tt.replace(/\/.*$/,"");return dt.some(function(Ct){var Rt=Ct.trim().toLowerCase();return Rt.charAt(0)==="."?vt.toLowerCase().endsWith(Rt):Rt.endsWith("/*")?Et===Rt.replace(/\/.*$/,""):Tt===Rt})}return!0};function _toConsumableArray$1(ft){return _arrayWithoutHoles$1(ft)||_iterableToArray$1(ft)||_unsupportedIterableToArray$1(ft)||_nonIterableSpread$1()}function _nonIterableSpread$1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray$1(ft){if(typeof Symbol<"u"&&ft[Symbol.iterator]!=null||ft["@@iterator"]!=null)return Array.from(ft)}function _arrayWithoutHoles$1(ft){if(Array.isArray(ft))return _arrayLikeToArray$1(ft)}function ownKeys$2(ft,lt){var dt=Object.keys(ft);if(Object.getOwnPropertySymbols){var vt=Object.getOwnPropertySymbols(ft);lt&&(vt=vt.filter(function(Tt){return Object.getOwnPropertyDescriptor(ft,Tt).enumerable})),dt.push.apply(dt,vt)}return dt}function _objectSpread$1(ft){for(var lt=1;lt<arguments.length;lt++){var dt=arguments[lt]!=null?arguments[lt]:{};lt%2?ownKeys$2(Object(dt),!0).forEach(function(vt){_defineProperty$3(ft,vt,dt[vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ft,Object.getOwnPropertyDescriptors(dt)):ownKeys$2(Object(dt)).forEach(function(vt){Object.defineProperty(ft,vt,Object.getOwnPropertyDescriptor(dt,vt))})}return ft}function _defineProperty$3(ft,lt,dt){return lt in ft?Object.defineProperty(ft,lt,{value:dt,enumerable:!0,configurable:!0,writable:!0}):ft[lt]=dt,ft}function _slicedToArray$1(ft,lt){return _arrayWithHoles$1(ft)||_iterableToArrayLimit$1(ft,lt)||_unsupportedIterableToArray$1(ft,lt)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$1(ft,lt){if(ft){if(typeof ft=="string")return _arrayLikeToArray$1(ft,lt);var dt=Object.prototype.toString.call(ft).slice(8,-1);if(dt==="Object"&&ft.constructor&&(dt=ft.constructor.name),dt==="Map"||dt==="Set")return Array.from(ft);if(dt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(dt))return _arrayLikeToArray$1(ft,lt)}}function _arrayLikeToArray$1(ft,lt){(lt==null||lt>ft.length)&&(lt=ft.length);for(var dt=0,vt=new Array(lt);dt<lt;dt++)vt[dt]=ft[dt];return vt}function _iterableToArrayLimit$1(ft,lt){var dt=ft==null?null:typeof Symbol<"u"&&ft[Symbol.iterator]||ft["@@iterator"];if(dt!=null){var vt=[],Tt=!0,Et=!1,Ct,Rt;try{for(dt=dt.call(ft);!(Tt=(Ct=dt.next()).done)&&(vt.push(Ct.value),!(lt&&vt.length===lt));Tt=!0);}catch(kt){Et=!0,Rt=kt}finally{try{!Tt&&dt.return!=null&&dt.return()}finally{if(Et)throw Rt}}return vt}}function _arrayWithHoles$1(ft){if(Array.isArray(ft))return ft}var FILE_INVALID_TYPE="file-invalid-type",FILE_TOO_LARGE="file-too-large",FILE_TOO_SMALL="file-too-small",TOO_MANY_FILES="too-many-files",getInvalidTypeRejectionErr=function ft(lt){lt=Array.isArray(lt)&&lt.length===1?lt[0]:lt;var dt=Array.isArray(lt)?"one of ".concat(lt.join(", ")):lt;return{code:FILE_INVALID_TYPE,message:"File type must be ".concat(dt)}},getTooLargeRejectionErr=function ft(lt){return{code:FILE_TOO_LARGE,message:"File is larger than ".concat(lt," ").concat(lt===1?"byte":"bytes")}},getTooSmallRejectionErr=function ft(lt){return{code:FILE_TOO_SMALL,message:"File is smaller than ".concat(lt," ").concat(lt===1?"byte":"bytes")}},TOO_MANY_FILES_REJECTION={code:TOO_MANY_FILES,message:"Too many files"};function fileAccepted(ft,lt){var dt=ft.type==="application/x-moz-file"||_default(ft,lt);return[dt,dt?null:getInvalidTypeRejectionErr(lt)]}function fileMatchSize(ft,lt,dt){if(isDefined(ft.size))if(isDefined(lt)&&isDefined(dt)){if(ft.size>dt)return[!1,getTooLargeRejectionErr(dt)];if(ft.size<lt)return[!1,getTooSmallRejectionErr(lt)]}else{if(isDefined(lt)&&ft.size<lt)return[!1,getTooSmallRejectionErr(lt)];if(isDefined(dt)&&ft.size>dt)return[!1,getTooLargeRejectionErr(dt)]}return[!0,null]}function isDefined(ft){return ft!=null}function allFilesAccepted(ft){var lt=ft.files,dt=ft.accept,vt=ft.minSize,Tt=ft.maxSize,Et=ft.multiple,Ct=ft.maxFiles,Rt=ft.validator;return!Et&&lt.length>1||Et&&Ct>=1&&lt.length>Ct?!1:lt.every(function(kt){var Dt=fileAccepted(kt,dt),Bt=_slicedToArray$1(Dt,1),Ft=Bt[0],Ut=fileMatchSize(kt,vt,Tt),Zt=_slicedToArray$1(Ut,1),Kt=Zt[0],ln=Rt?Rt(kt):null;return Ft&&Kt&&!ln})}function isPropagationStopped(ft){return typeof ft.isPropagationStopped=="function"?ft.isPropagationStopped():typeof ft.cancelBubble<"u"?ft.cancelBubble:!1}function isEvtWithFiles(ft){return ft.dataTransfer?Array.prototype.some.call(ft.dataTransfer.types,function(lt){return lt==="Files"||lt==="application/x-moz-file"}):!!ft.target&&!!ft.target.files}function onDocumentDragOver(ft){ft.preventDefault()}function isIe(ft){return ft.indexOf("MSIE")!==-1||ft.indexOf("Trident/")!==-1}function isEdge(ft){return ft.indexOf("Edge/")!==-1}function isIeOrEdge(){var ft=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return isIe(ft)||isEdge(ft)}function composeEventHandlers(){for(var ft=arguments.length,lt=new Array(ft),dt=0;dt<ft;dt++)lt[dt]=arguments[dt];return function(vt){for(var Tt=arguments.length,Et=new Array(Tt>1?Tt-1:0),Ct=1;Ct<Tt;Ct++)Et[Ct-1]=arguments[Ct];return lt.some(function(Rt){return!isPropagationStopped(vt)&&Rt&&Rt.apply(void 0,[vt].concat(Et)),isPropagationStopped(vt)})}}function canUseFileSystemAccessAPI(){return"showOpenFilePicker"in window}function pickerOptionsFromAccept(ft){if(isDefined(ft)){var lt=Object.entries(ft).filter(function(dt){var vt=_slicedToArray$1(dt,2),Tt=vt[0],Et=vt[1],Ct=!0;return isMIMEType(Tt)||(console.warn('Skipped "'.concat(Tt,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),Ct=!1),(!Array.isArray(Et)||!Et.every(isExt))&&(console.warn('Skipped "'.concat(Tt,'" because an invalid file extension was provided.')),Ct=!1),Ct}).reduce(function(dt,vt){var Tt=_slicedToArray$1(vt,2),Et=Tt[0],Ct=Tt[1];return _objectSpread$1(_objectSpread$1({},dt),{},_defineProperty$3({},Et,Ct))},{});return[{description:"Files",accept:lt}]}return ft}function acceptPropAsAcceptAttr(ft){if(isDefined(ft))return Object.entries(ft).reduce(function(lt,dt){var vt=_slicedToArray$1(dt,2),Tt=vt[0],Et=vt[1];return[].concat(_toConsumableArray$1(lt),[Tt],_toConsumableArray$1(Et))},[]).filter(function(lt){return isMIMEType(lt)||isExt(lt)}).join(",")}function isAbort(ft){return ft instanceof DOMException&&(ft.name==="AbortError"||ft.code===ft.ABORT_ERR)}function isSecurityError(ft){return ft instanceof DOMException&&(ft.name==="SecurityError"||ft.code===ft.SECURITY_ERR)}function isMIMEType(ft){return ft==="audio/*"||ft==="video/*"||ft==="image/*"||ft==="text/*"||/\w+\/[-+.\w]+/g.test(ft)}function isExt(ft){return/^.*\.[\w]+$/.test(ft)}var _excluded$2=["children"],_excluded2=["open"],_excluded3=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],_excluded4=["refKey","onChange","onClick"];function _toConsumableArray(ft){return _arrayWithoutHoles(ft)||_iterableToArray(ft)||_unsupportedIterableToArray(ft)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray(ft){if(typeof Symbol<"u"&&ft[Symbol.iterator]!=null||ft["@@iterator"]!=null)return Array.from(ft)}function _arrayWithoutHoles(ft){if(Array.isArray(ft))return _arrayLikeToArray(ft)}function _slicedToArray(ft,lt){return _arrayWithHoles(ft)||_iterableToArrayLimit(ft,lt)||_unsupportedIterableToArray(ft,lt)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(ft,lt){if(ft){if(typeof ft=="string")return _arrayLikeToArray(ft,lt);var dt=Object.prototype.toString.call(ft).slice(8,-1);if(dt==="Object"&&ft.constructor&&(dt=ft.constructor.name),dt==="Map"||dt==="Set")return Array.from(ft);if(dt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(dt))return _arrayLikeToArray(ft,lt)}}function _arrayLikeToArray(ft,lt){(lt==null||lt>ft.length)&&(lt=ft.length);for(var dt=0,vt=new Array(lt);dt<lt;dt++)vt[dt]=ft[dt];return vt}function _iterableToArrayLimit(ft,lt){var dt=ft==null?null:typeof Symbol<"u"&&ft[Symbol.iterator]||ft["@@iterator"];if(dt!=null){var vt=[],Tt=!0,Et=!1,Ct,Rt;try{for(dt=dt.call(ft);!(Tt=(Ct=dt.next()).done)&&(vt.push(Ct.value),!(lt&&vt.length===lt));Tt=!0);}catch(kt){Et=!0,Rt=kt}finally{try{!Tt&&dt.return!=null&&dt.return()}finally{if(Et)throw Rt}}return vt}}function _arrayWithHoles(ft){if(Array.isArray(ft))return ft}function ownKeys$1(ft,lt){var dt=Object.keys(ft);if(Object.getOwnPropertySymbols){var vt=Object.getOwnPropertySymbols(ft);lt&&(vt=vt.filter(function(Tt){return Object.getOwnPropertyDescriptor(ft,Tt).enumerable})),dt.push.apply(dt,vt)}return dt}function _objectSpread(ft){for(var lt=1;lt<arguments.length;lt++){var dt=arguments[lt]!=null?arguments[lt]:{};lt%2?ownKeys$1(Object(dt),!0).forEach(function(vt){_defineProperty$2(ft,vt,dt[vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ft,Object.getOwnPropertyDescriptors(dt)):ownKeys$1(Object(dt)).forEach(function(vt){Object.defineProperty(ft,vt,Object.getOwnPropertyDescriptor(dt,vt))})}return ft}function _defineProperty$2(ft,lt,dt){return lt in ft?Object.defineProperty(ft,lt,{value:dt,enumerable:!0,configurable:!0,writable:!0}):ft[lt]=dt,ft}function _objectWithoutProperties$1(ft,lt){if(ft==null)return{};var dt=_objectWithoutPropertiesLoose$2(ft,lt),vt,Tt;if(Object.getOwnPropertySymbols){var Et=Object.getOwnPropertySymbols(ft);for(Tt=0;Tt<Et.length;Tt++)vt=Et[Tt],!(lt.indexOf(vt)>=0)&&Object.prototype.propertyIsEnumerable.call(ft,vt)&&(dt[vt]=ft[vt])}return dt}function _objectWithoutPropertiesLoose$2(ft,lt){if(ft==null)return{};var dt={},vt=Object.keys(ft),Tt,Et;for(Et=0;Et<vt.length;Et++)Tt=vt[Et],!(lt.indexOf(Tt)>=0)&&(dt[Tt]=ft[Tt]);return dt}var Dropzone=reactExports.forwardRef(function(ft,lt){var dt=ft.children,vt=_objectWithoutProperties$1(ft,_excluded$2),Tt=useDropzone(vt),Et=Tt.open,Ct=_objectWithoutProperties$1(Tt,_excluded2);return reactExports.useImperativeHandle(lt,function(){return{open:Et}},[Et]),React.createElement(reactExports.Fragment,null,dt(_objectSpread(_objectSpread({},Ct),{},{open:Et})))});Dropzone.displayName="Dropzone";var defaultProps={disabled:!1,getFilesFromEvent:fromEvent,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};Dropzone.defaultProps=defaultProps;Dropzone.propTypes={children:PropTypes.func,accept:PropTypes.objectOf(PropTypes.arrayOf(PropTypes.string)),multiple:PropTypes.bool,preventDropOnDocument:PropTypes.bool,noClick:PropTypes.bool,noKeyboard:PropTypes.bool,noDrag:PropTypes.bool,noDragEventsBubbling:PropTypes.bool,minSize:PropTypes.number,maxSize:PropTypes.number,maxFiles:PropTypes.number,disabled:PropTypes.bool,getFilesFromEvent:PropTypes.func,onFileDialogCancel:PropTypes.func,onFileDialogOpen:PropTypes.func,useFsAccessApi:PropTypes.bool,autoFocus:PropTypes.bool,onDragEnter:PropTypes.func,onDragLeave:PropTypes.func,onDragOver:PropTypes.func,onDrop:PropTypes.func,onDropAccepted:PropTypes.func,onDropRejected:PropTypes.func,onError:PropTypes.func,validator:PropTypes.func};var initialState={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function useDropzone(){var ft=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},lt=_objectSpread(_objectSpread({},defaultProps),ft),dt=lt.accept,vt=lt.disabled,Tt=lt.getFilesFromEvent,Et=lt.maxSize,Ct=lt.minSize,Rt=lt.multiple,kt=lt.maxFiles,Dt=lt.onDragEnter,Bt=lt.onDragLeave,Ft=lt.onDragOver,Ut=lt.onDrop,Zt=lt.onDropAccepted,Kt=lt.onDropRejected,ln=lt.onFileDialogCancel,hn=lt.onFileDialogOpen,dn=lt.useFsAccessApi,pn=lt.autoFocus,mn=lt.preventDropOnDocument,On=lt.noClick,bn=lt.noKeyboard,En=lt.noDrag,An=lt.noDragEventsBubbling,Tn=lt.onError,In=lt.validator,Rn=reactExports.useMemo(function(){return acceptPropAsAcceptAttr(dt)},[dt]),Dn=reactExports.useMemo(function(){return pickerOptionsFromAccept(dt)},[dt]),Bn=reactExports.useMemo(function(){return typeof hn=="function"?hn:noop$1},[hn]),Hn=reactExports.useMemo(function(){return typeof ln=="function"?ln:noop$1},[ln]),jn=reactExports.useRef(null),Kn=reactExports.useRef(null),zn=reactExports.useReducer(reducer,initialState),lr=_slicedToArray(zn,2),Ln=lr[0],Vn=lr[1],Wn=Ln.isFocused,sr=Ln.isFileDialogActive,Mn=reactExports.useRef(typeof window<"u"&&window.isSecureContext&&dn&&canUseFileSystemAccessAPI()),ir=function(){!Mn.current&&sr&&setTimeout(function(){if(Kn.current){var yr=Kn.current.files;yr.length||(Vn({type:"closeDialog"}),Hn())}},300)};reactExports.useEffect(function(){return window.addEventListener("focus",ir,!1),function(){window.removeEventListener("focus",ir,!1)}},[Kn,sr,Hn,Mn]);var mr=reactExports.useRef([]),tr=function(yr){jn.current&&jn.current.contains(yr.target)||(yr.preventDefault(),mr.current=[])};reactExports.useEffect(function(){return mn&&(document.addEventListener("dragover",onDocumentDragOver,!1),document.addEventListener("drop",tr,!1)),function(){mn&&(document.removeEventListener("dragover",onDocumentDragOver),document.removeEventListener("drop",tr))}},[jn,mn]),reactExports.useEffect(function(){return!vt&&pn&&jn.current&&jn.current.focus(),function(){}},[jn,pn,vt]);var Dr=reactExports.useCallback(function(rr){Tn?Tn(rr):console.error(rr)},[Tn]),Sr=reactExports.useCallback(function(rr){rr.preventDefault(),rr.persist(),Po(rr),mr.current=[].concat(_toConsumableArray(mr.current),[rr.target]),isEvtWithFiles(rr)&&Promise.resolve(Tt(rr)).then(function(yr){if(!(isPropagationStopped(rr)&&!An)){var Ir=yr.length,Fr=Ir>0&&allFilesAccepted({files:yr,accept:Rn,minSize:Ct,maxSize:Et,multiple:Rt,maxFiles:kt,validator:In}),pr=Ir>0&&!Fr;Vn({isDragAccept:Fr,isDragReject:pr,isDragActive:!0,type:"setDraggedFiles"}),Dt&&Dt(rr)}}).catch(function(yr){return Dr(yr)})},[Tt,Dt,Dr,An,Rn,Ct,Et,Rt,kt,In]),Vr=reactExports.useCallback(function(rr){rr.preventDefault(),rr.persist(),Po(rr);var yr=isEvtWithFiles(rr);if(yr&&rr.dataTransfer)try{rr.dataTransfer.dropEffect="copy"}catch{}return yr&&Ft&&Ft(rr),!1},[Ft,An]),Jr=reactExports.useCallback(function(rr){rr.preventDefault(),rr.persist(),Po(rr);var yr=mr.current.filter(function(Fr){return jn.current&&jn.current.contains(Fr)}),Ir=yr.indexOf(rr.target);Ir!==-1&&yr.splice(Ir,1),mr.current=yr,!(yr.length>0)&&(Vn({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),isEvtWithFiles(rr)&&Bt&&Bt(rr))},[jn,Bt,An]),Yr=reactExports.useCallback(function(rr,yr){var Ir=[],Fr=[];rr.forEach(function(pr){var Zr=fileAccepted(pr,Rn),Cr=_slicedToArray(Zr,2),lo=Cr[0],Jn=Cr[1],Tr=fileMatchSize(pr,Ct,Et),Nr=_slicedToArray(Tr,2),xn=Nr[0],Nn=Nr[1],Zn=In?In(pr):null;if(lo&&xn&&!Zn)Ir.push(pr);else{var hr=[Jn,Nn];Zn&&(hr=hr.concat(Zn)),Fr.push({file:pr,errors:hr.filter(function(Gn){return Gn})})}}),(!Rt&&Ir.length>1||Rt&&kt>=1&&Ir.length>kt)&&(Ir.forEach(function(pr){Fr.push({file:pr,errors:[TOO_MANY_FILES_REJECTION]})}),Ir.splice(0)),Vn({acceptedFiles:Ir,fileRejections:Fr,type:"setFiles"}),Ut&&Ut(Ir,Fr,yr),Fr.length>0&&Kt&&Kt(Fr,yr),Ir.length>0&&Zt&&Zt(Ir,yr)},[Vn,Rt,Rn,Ct,Et,kt,Ut,Zt,Kt,In]),_i=reactExports.useCallback(function(rr){rr.preventDefault(),rr.persist(),Po(rr),mr.current=[],isEvtWithFiles(rr)&&Promise.resolve(Tt(rr)).then(function(yr){isPropagationStopped(rr)&&!An||Yr(yr,rr)}).catch(function(yr){return Dr(yr)}),Vn({type:"reset"})},[Tt,Yr,Dr,An]),Er=reactExports.useCallback(function(){if(Mn.current){Vn({type:"openDialog"}),Bn();var rr={multiple:Rt,types:Dn};window.showOpenFilePicker(rr).then(function(yr){return Tt(yr)}).then(function(yr){Yr(yr,null),Vn({type:"closeDialog"})}).catch(function(yr){isAbort(yr)?(Hn(yr),Vn({type:"closeDialog"})):isSecurityError(yr)?(Mn.current=!1,Kn.current?(Kn.current.value=null,Kn.current.click()):Dr(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):Dr(yr)});return}Kn.current&&(Vn({type:"openDialog"}),Bn(),Kn.current.value=null,Kn.current.click())},[Vn,Bn,Hn,dn,Yr,Dr,Dn,Rt]),kr=reactExports.useCallback(function(rr){!jn.current||!jn.current.isEqualNode(rr.target)||(rr.key===" "||rr.key==="Enter"||rr.keyCode===32||rr.keyCode===13)&&(rr.preventDefault(),Er())},[jn,Er]),Qr=reactExports.useCallback(function(){Vn({type:"focus"})},[]),so=reactExports.useCallback(function(){Vn({type:"blur"})},[]),jr=reactExports.useCallback(function(){On||(isIeOrEdge()?setTimeout(Er,0):Er())},[On,Er]),no=function(yr){return vt?null:yr},uo=function(yr){return bn?null:no(yr)},ho=function(yr){return En?null:no(yr)},Po=function(yr){An&&yr.stopPropagation()},Wo=reactExports.useMemo(function(){return function(){var rr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},yr=rr.refKey,Ir=yr===void 0?"ref":yr,Fr=rr.role,pr=rr.onKeyDown,Zr=rr.onFocus,Cr=rr.onBlur,lo=rr.onClick,Jn=rr.onDragEnter,Tr=rr.onDragOver,Nr=rr.onDragLeave,xn=rr.onDrop,Nn=_objectWithoutProperties$1(rr,_excluded3);return _objectSpread(_objectSpread(_defineProperty$2({onKeyDown:uo(composeEventHandlers(pr,kr)),onFocus:uo(composeEventHandlers(Zr,Qr)),onBlur:uo(composeEventHandlers(Cr,so)),onClick:no(composeEventHandlers(lo,jr)),onDragEnter:ho(composeEventHandlers(Jn,Sr)),onDragOver:ho(composeEventHandlers(Tr,Vr)),onDragLeave:ho(composeEventHandlers(Nr,Jr)),onDrop:ho(composeEventHandlers(xn,_i)),role:typeof Fr=="string"&&Fr!==""?Fr:"presentation"},Ir,jn),!vt&&!bn?{tabIndex:0}:{}),Nn)}},[jn,kr,Qr,so,jr,Sr,Vr,Jr,_i,bn,En,vt]),Xn=reactExports.useCallback(function(rr){rr.stopPropagation()},[]),Un=reactExports.useMemo(function(){return function(){var rr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},yr=rr.refKey,Ir=yr===void 0?"ref":yr,Fr=rr.onChange,pr=rr.onClick,Zr=_objectWithoutProperties$1(rr,_excluded4),Cr=_defineProperty$2({accept:Rn,multiple:Rt,type:"file",style:{display:"none"},onChange:no(composeEventHandlers(Fr,_i)),onClick:no(composeEventHandlers(pr,Xn)),tabIndex:-1},Ir,Kn);return _objectSpread(_objectSpread({},Cr),Zr)}},[Kn,dt,Rt,_i,vt]);return _objectSpread(_objectSpread({},Ln),{},{isFocused:Wn&&!vt,getRootProps:Wo,getInputProps:Un,rootRef:jn,inputRef:Kn,open:no(Er)})}function reducer(ft,lt){switch(lt.type){case"focus":return _objectSpread(_objectSpread({},ft),{},{isFocused:!0});case"blur":return _objectSpread(_objectSpread({},ft),{},{isFocused:!1});case"openDialog":return _objectSpread(_objectSpread({},initialState),{},{isFileDialogActive:!0});case"closeDialog":return _objectSpread(_objectSpread({},ft),{},{isFileDialogActive:!1});case"setDraggedFiles":return _objectSpread(_objectSpread({},ft),{},{isDragActive:lt.isDragActive,isDragAccept:lt.isDragAccept,isDragReject:lt.isDragReject});case"setFiles":return _objectSpread(_objectSpread({},ft),{},{acceptedFiles:lt.acceptedFiles,fileRejections:lt.fileRejections});case"reset":return _objectSpread({},initialState);default:return ft}}function noop$1(){}const CancelButton=({onClick:ft})=>jsx(Button,{color:"gray",onClick:ft,children:"Cancel"}),UploadFileModal=({open:ft,onClose:lt,onFileUpload:dt,header:vt})=>{const Tt=reactExports.useCallback(Dt=>{Dt.forEach(Bt=>{const Ft=new FileReader;Ft.onabort=()=>console.log("file reading was aborted!"),Ft.onerror=()=>console.log("file reading failed!"),Ft.onload=()=>{dt(Ft.result),lt()},Ft.readAsBinaryString(Bt)})},[]),{getRootProps:Et,getInputProps:Ct,isDragActive:Rt,inputRef:kt}=useDropzone({onDrop:Dt=>Tt(Dt),multiple:!1,onDragEnter:Dt=>{},onDragLeave:Dt=>{},onDragOver:Dt=>{},accept:{"application/json":[".robart"]}});return jsxs(Modal,{show:ft,onClose:lt,children:[jsx(Modal.Header,{children:vt}),jsx(Modal.Body,{children:jsxs("div",{className:"border-1 flex justify-center border-gray-500 bg-gray-50 p-5 py-14 text-lg shadow-lg",...Et(),children:[jsx("input",{ref:kt,...Ct()}),jsx("p",{children:"Drag & drop a project file here, or click to select a file"})]})}),jsx(Modal.Footer,{children:jsx(CancelButton,{onClick:lt})})]})},useUIState=create$2()((ft,lt)=>({settingsModalOpen:!1,curveEditorOpen:!1,openSimulation:!1,robotManagerModalOpen:!1,toggleSettingsModal:()=>ft({settingsModalOpen:!lt().settingsModalOpen}),toggleCurveEditor:()=>ft({curveEditorOpen:!lt().curveEditorOpen}),toggleRobotManager:()=>{ft({robotManagerModalOpen:!lt().robotManagerModalOpen})},toggleSimulation:()=>{ft({openSimulation:!lt().openSimulation})}})),ConfirmationModal=({open:ft,onCancel:lt,onConfirm:dt,header:vt,children:Tt})=>jsxs(Modal,{show:ft,onClose:lt,children:[jsx(Modal.Header,{children:vt}),jsx(Modal.Body,{children:Tt}),jsxs(Modal.Footer,{children:[jsx(Button,{color:"gray",onClick:lt,children:"Cancel"}),jsx(Button,{color:"failure",onClick:dt,children:"Confirm"})]})]});var constants={exports:{}},reactReconcilerConstants_production_min={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */reactReconcilerConstants_production_min.ConcurrentRoot=1;reactReconcilerConstants_production_min.ContinuousEventPriority=4;reactReconcilerConstants_production_min.DefaultEventPriority=16;reactReconcilerConstants_production_min.DiscreteEventPriority=1;reactReconcilerConstants_production_min.IdleEventPriority=536870912;reactReconcilerConstants_production_min.LegacyRoot=0;constants.exports=reactReconcilerConstants_production_min;var constantsExports=constants.exports;function createStore$1(ft){let lt;const dt=new Set,vt=(Dt,Bt)=>{const Ft=typeof Dt=="function"?Dt(lt):Dt;if(Ft!==lt){const Ut=lt;lt=Bt?Ft:Object.assign({},lt,Ft),dt.forEach(Zt=>Zt(lt,Ut))}},Tt=()=>lt,Et=(Dt,Bt=Tt,Ft=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let Ut=Bt(lt);function Zt(){const Kt=Bt(lt);if(!Ft(Ut,Kt)){const ln=Ut;Dt(Ut=Kt,ln)}}return dt.add(Zt),()=>dt.delete(Zt)},kt={setState:vt,getState:Tt,subscribe:(Dt,Bt,Ft)=>Bt||Ft?Et(Dt,Bt,Ft):(dt.add(Dt),()=>dt.delete(Dt)),destroy:()=>dt.clear()};return lt=ft(vt,Tt,kt),kt}const isSSR=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),useIsomorphicLayoutEffect$1=isSSR?reactExports.useEffect:reactExports.useLayoutEffect;function create$1(ft){const lt=typeof ft=="function"?createStore$1(ft):ft,dt=(vt=lt.getState,Tt=Object.is)=>{const[,Et]=reactExports.useReducer(hn=>hn+1,0),Ct=lt.getState(),Rt=reactExports.useRef(Ct),kt=reactExports.useRef(vt),Dt=reactExports.useRef(Tt),Bt=reactExports.useRef(!1),Ft=reactExports.useRef();Ft.current===void 0&&(Ft.current=vt(Ct));let Ut,Zt=!1;(Rt.current!==Ct||kt.current!==vt||Dt.current!==Tt||Bt.current)&&(Ut=vt(Ct),Zt=!Tt(Ft.current,Ut)),useIsomorphicLayoutEffect$1(()=>{Zt&&(Ft.current=Ut),Rt.current=Ct,kt.current=vt,Dt.current=Tt,Bt.current=!1});const Kt=reactExports.useRef(Ct);useIsomorphicLayoutEffect$1(()=>{const hn=()=>{try{const pn=lt.getState(),mn=kt.current(pn);Dt.current(Ft.current,mn)||(Rt.current=pn,Ft.current=mn,Et())}catch{Bt.current=!0,Et()}},dn=lt.subscribe(hn);return lt.getState()!==Kt.current&&hn(),dn},[]);const ln=Zt?Ut:Ft.current;return reactExports.useDebugValue(ln),ln};return Object.assign(dt,lt),dt[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const vt=[dt,lt];return{next(){const Tt=vt.length<=0;return{value:vt.shift(),done:Tt}}}},dt}var reactReconciler={exports:{}},scheduler$1={exports:{}},scheduler_production_min$1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,function(ft){function lt(Ln,Vn){var Wn=Ln.length;Ln.push(Vn);e:for(;0<Wn;){var sr=Wn-1>>>1,Mn=Ln[sr];if(0<Tt(Mn,Vn))Ln[sr]=Vn,Ln[Wn]=Mn,Wn=sr;else break e}}function dt(Ln){return Ln.length===0?null:Ln[0]}function vt(Ln){if(Ln.length===0)return null;var Vn=Ln[0],Wn=Ln.pop();if(Wn!==Vn){Ln[0]=Wn;e:for(var sr=0,Mn=Ln.length,ir=Mn>>>1;sr<ir;){var mr=2*(sr+1)-1,tr=Ln[mr],Dr=mr+1,Sr=Ln[Dr];if(0>Tt(tr,Wn))Dr<Mn&&0>Tt(Sr,tr)?(Ln[sr]=Sr,Ln[Dr]=Wn,sr=Dr):(Ln[sr]=tr,Ln[mr]=Wn,sr=mr);else if(Dr<Mn&&0>Tt(Sr,Wn))Ln[sr]=Sr,Ln[Dr]=Wn,sr=Dr;else break e}}return Vn}function Tt(Ln,Vn){var Wn=Ln.sortIndex-Vn.sortIndex;return Wn!==0?Wn:Ln.id-Vn.id}if(typeof performance=="object"&&typeof performance.now=="function"){var Et=performance;ft.unstable_now=function(){return Et.now()}}else{var Ct=Date,Rt=Ct.now();ft.unstable_now=function(){return Ct.now()-Rt}}var kt=[],Dt=[],Bt=1,Ft=null,Ut=3,Zt=!1,Kt=!1,ln=!1,hn=typeof setTimeout=="function"?setTimeout:null,dn=typeof clearTimeout=="function"?clearTimeout:null,pn=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function mn(Ln){for(var Vn=dt(Dt);Vn!==null;){if(Vn.callback===null)vt(Dt);else if(Vn.startTime<=Ln)vt(Dt),Vn.sortIndex=Vn.expirationTime,lt(kt,Vn);else break;Vn=dt(Dt)}}function On(Ln){if(ln=!1,mn(Ln),!Kt)if(dt(kt)!==null)Kt=!0,zn(bn);else{var Vn=dt(Dt);Vn!==null&&lr(On,Vn.startTime-Ln)}}function bn(Ln,Vn){Kt=!1,ln&&(ln=!1,dn(Tn),Tn=-1),Zt=!0;var Wn=Ut;try{for(mn(Vn),Ft=dt(kt);Ft!==null&&(!(Ft.expirationTime>Vn)||Ln&&!Dn());){var sr=Ft.callback;if(typeof sr=="function"){Ft.callback=null,Ut=Ft.priorityLevel;var Mn=sr(Ft.expirationTime<=Vn);Vn=ft.unstable_now(),typeof Mn=="function"?Ft.callback=Mn:Ft===dt(kt)&&vt(kt),mn(Vn)}else vt(kt);Ft=dt(kt)}if(Ft!==null)var ir=!0;else{var mr=dt(Dt);mr!==null&&lr(On,mr.startTime-Vn),ir=!1}return ir}finally{Ft=null,Ut=Wn,Zt=!1}}var En=!1,An=null,Tn=-1,In=5,Rn=-1;function Dn(){return!(ft.unstable_now()-Rn<In)}function Bn(){if(An!==null){var Ln=ft.unstable_now();Rn=Ln;var Vn=!0;try{Vn=An(!0,Ln)}finally{Vn?Hn():(En=!1,An=null)}}else En=!1}var Hn;if(typeof pn=="function")Hn=function(){pn(Bn)};else if(typeof MessageChannel<"u"){var jn=new MessageChannel,Kn=jn.port2;jn.port1.onmessage=Bn,Hn=function(){Kn.postMessage(null)}}else Hn=function(){hn(Bn,0)};function zn(Ln){An=Ln,En||(En=!0,Hn())}function lr(Ln,Vn){Tn=hn(function(){Ln(ft.unstable_now())},Vn)}ft.unstable_IdlePriority=5,ft.unstable_ImmediatePriority=1,ft.unstable_LowPriority=4,ft.unstable_NormalPriority=3,ft.unstable_Profiling=null,ft.unstable_UserBlockingPriority=2,ft.unstable_cancelCallback=function(Ln){Ln.callback=null},ft.unstable_continueExecution=function(){Kt||Zt||(Kt=!0,zn(bn))},ft.unstable_forceFrameRate=function(Ln){0>Ln||125<Ln?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):In=0<Ln?Math.floor(1e3/Ln):5},ft.unstable_getCurrentPriorityLevel=function(){return Ut},ft.unstable_getFirstCallbackNode=function(){return dt(kt)},ft.unstable_next=function(Ln){switch(Ut){case 1:case 2:case 3:var Vn=3;break;default:Vn=Ut}var Wn=Ut;Ut=Vn;try{return Ln()}finally{Ut=Wn}},ft.unstable_pauseExecution=function(){},ft.unstable_requestPaint=function(){},ft.unstable_runWithPriority=function(Ln,Vn){switch(Ln){case 1:case 2:case 3:case 4:case 5:break;default:Ln=3}var Wn=Ut;Ut=Ln;try{return Vn()}finally{Ut=Wn}},ft.unstable_scheduleCallback=function(Ln,Vn,Wn){var sr=ft.unstable_now();switch(typeof Wn=="object"&&Wn!==null?(Wn=Wn.delay,Wn=typeof Wn=="number"&&0<Wn?sr+Wn:sr):Wn=sr,Ln){case 1:var Mn=-1;break;case 2:Mn=250;break;case 5:Mn=1073741823;break;case 4:Mn=1e4;break;default:Mn=5e3}return Mn=Wn+Mn,Ln={id:Bt++,callback:Vn,priorityLevel:Ln,startTime:Wn,expirationTime:Mn,sortIndex:-1},Wn>sr?(Ln.sortIndex=Wn,lt(Dt,Ln),dt(kt)===null&&Ln===dt(Dt)&&(ln?(dn(Tn),Tn=-1):ln=!0,lr(On,Wn-sr))):(Ln.sortIndex=Mn,lt(kt,Ln),Kt||Zt||(Kt=!0,zn(bn))),Ln},ft.unstable_shouldYield=Dn,ft.unstable_wrapCallback=function(Ln){var Vn=Ut;return function(){var Wn=Ut;Ut=Vn;try{return Ln.apply(this,arguments)}finally{Ut=Wn}}}}(scheduler_production_min$1)),scheduler_production_min$1}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler$1.exports=requireScheduler_production_min()),scheduler$1.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var reactReconciler_production_min=function ft(lt){var dt={},vt=reactExports,Tt=requireScheduler(),Et=Object.assign;function Ct(Ht){for(var zt="https://reactjs.org/docs/error-decoder.html?invariant="+Ht,gn=1;gn<arguments.length;gn++)zt+="&args[]="+encodeURIComponent(arguments[gn]);return"Minified React error #"+Ht+"; visit "+zt+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Rt=vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,kt=Symbol.for("react.element"),Dt=Symbol.for("react.portal"),Bt=Symbol.for("react.fragment"),Ft=Symbol.for("react.strict_mode"),Ut=Symbol.for("react.profiler"),Zt=Symbol.for("react.provider"),Kt=Symbol.for("react.context"),ln=Symbol.for("react.forward_ref"),hn=Symbol.for("react.suspense"),dn=Symbol.for("react.suspense_list"),pn=Symbol.for("react.memo"),mn=Symbol.for("react.lazy"),On=Symbol.for("react.offscreen"),bn=Symbol.iterator;function En(Ht){return Ht===null||typeof Ht!="object"?null:(Ht=bn&&Ht[bn]||Ht["@@iterator"],typeof Ht=="function"?Ht:null)}function An(Ht){if(Ht==null)return null;if(typeof Ht=="function")return Ht.displayName||Ht.name||null;if(typeof Ht=="string")return Ht;switch(Ht){case Bt:return"Fragment";case Dt:return"Portal";case Ut:return"Profiler";case Ft:return"StrictMode";case hn:return"Suspense";case dn:return"SuspenseList"}if(typeof Ht=="object")switch(Ht.$$typeof){case Kt:return(Ht.displayName||"Context")+".Consumer";case Zt:return(Ht._context.displayName||"Context")+".Provider";case ln:var zt=Ht.render;return Ht=Ht.displayName,Ht||(Ht=zt.displayName||zt.name||"",Ht=Ht!==""?"ForwardRef("+Ht+")":"ForwardRef"),Ht;case pn:return zt=Ht.displayName||null,zt!==null?zt:An(Ht.type)||"Memo";case mn:zt=Ht._payload,Ht=Ht._init;try{return An(Ht(zt))}catch{}}return null}function Tn(Ht){var zt=Ht.type;switch(Ht.tag){case 24:return"Cache";case 9:return(zt.displayName||"Context")+".Consumer";case 10:return(zt._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return Ht=zt.render,Ht=Ht.displayName||Ht.name||"",zt.displayName||(Ht!==""?"ForwardRef("+Ht+")":"ForwardRef");case 7:return"Fragment";case 5:return zt;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return An(zt);case 8:return zt===Ft?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof zt=="function")return zt.displayName||zt.name||null;if(typeof zt=="string")return zt}return null}function In(Ht){var zt=Ht,gn=Ht;if(Ht.alternate)for(;zt.return;)zt=zt.return;else{Ht=zt;do zt=Ht,zt.flags&4098&&(gn=zt.return),Ht=zt.return;while(Ht)}return zt.tag===3?gn:null}function Rn(Ht){if(In(Ht)!==Ht)throw Error(Ct(188))}function Dn(Ht){var zt=Ht.alternate;if(!zt){if(zt=In(Ht),zt===null)throw Error(Ct(188));return zt!==Ht?null:Ht}for(var gn=Ht,yn=zt;;){var $n=gn.return;if($n===null)break;var Cn=$n.alternate;if(Cn===null){if(yn=$n.return,yn!==null){gn=yn;continue}break}if($n.child===Cn.child){for(Cn=$n.child;Cn;){if(Cn===gn)return Rn($n),Ht;if(Cn===yn)return Rn($n),zt;Cn=Cn.sibling}throw Error(Ct(188))}if(gn.return!==yn.return)gn=$n,yn=Cn;else{for(var Yn=!1,cr=$n.child;cr;){if(cr===gn){Yn=!0,gn=$n,yn=Cn;break}if(cr===yn){Yn=!0,yn=$n,gn=Cn;break}cr=cr.sibling}if(!Yn){for(cr=Cn.child;cr;){if(cr===gn){Yn=!0,gn=Cn,yn=$n;break}if(cr===yn){Yn=!0,yn=Cn,gn=$n;break}cr=cr.sibling}if(!Yn)throw Error(Ct(189))}}if(gn.alternate!==yn)throw Error(Ct(190))}if(gn.tag!==3)throw Error(Ct(188));return gn.stateNode.current===gn?Ht:zt}function Bn(Ht){return Ht=Dn(Ht),Ht!==null?Hn(Ht):null}function Hn(Ht){if(Ht.tag===5||Ht.tag===6)return Ht;for(Ht=Ht.child;Ht!==null;){var zt=Hn(Ht);if(zt!==null)return zt;Ht=Ht.sibling}return null}function jn(Ht){if(Ht.tag===5||Ht.tag===6)return Ht;for(Ht=Ht.child;Ht!==null;){if(Ht.tag!==4){var zt=jn(Ht);if(zt!==null)return zt}Ht=Ht.sibling}return null}var Kn=Array.isArray,zn=lt.getPublicInstance,lr=lt.getRootHostContext,Ln=lt.getChildHostContext,Vn=lt.prepareForCommit,Wn=lt.resetAfterCommit,sr=lt.createInstance,Mn=lt.appendInitialChild,ir=lt.finalizeInitialChildren,mr=lt.prepareUpdate,tr=lt.shouldSetTextContent,Dr=lt.createTextInstance,Sr=lt.scheduleTimeout,Vr=lt.cancelTimeout,Jr=lt.noTimeout,Yr=lt.isPrimaryRenderer,_i=lt.supportsMutation,Er=lt.supportsPersistence,kr=lt.supportsHydration,Qr=lt.getInstanceFromNode,so=lt.preparePortalMount,jr=lt.getCurrentEventPriority,no=lt.detachDeletedInstance,uo=lt.supportsMicrotasks,ho=lt.scheduleMicrotask,Po=lt.supportsTestSelectors,Wo=lt.findFiberRoot,Xn=lt.getBoundingRect,Un=lt.getTextContent,rr=lt.isHiddenSubtree,yr=lt.matchAccessibilityRole,Ir=lt.setFocusIfFocusable,Fr=lt.setupIntersectionObserver,pr=lt.appendChild,Zr=lt.appendChildToContainer,Cr=lt.commitTextUpdate,lo=lt.commitMount,Jn=lt.commitUpdate,Tr=lt.insertBefore,Nr=lt.insertInContainerBefore,xn=lt.removeChild,Nn=lt.removeChildFromContainer,Zn=lt.resetTextContent,hr=lt.hideInstance,Gn=lt.hideTextInstance,dr=lt.unhideInstance,Br=lt.unhideTextInstance,io=lt.clearContainer,fo=lt.cloneInstance,rs=lt.createContainerChildSet,cs=lt.appendChildToContainerChildSet,Ns=lt.finalizeContainerChildren,Us=lt.replaceContainerChildren,as=lt.cloneHiddenInstance,us=lt.cloneHiddenTextInstance,Ml=lt.canHydrateInstance,LO=lt.canHydrateTextInstance,wo=lt.canHydrateSuspenseInstance,S_=lt.isSuspenseInstancePending,Qn=lt.isSuspenseInstanceFallback,Or=lt.registerSuspenseInstanceRetry,wr=lt.getNextHydratableSibling,fr=lt.getFirstHydratableChild,Rr=lt.getFirstHydratableChildWithinContainer,$o=lt.getFirstHydratableChildWithinSuspenseInstance,So=lt.hydrateInstance,Do=lt.hydrateTextInstance,xo=lt.hydrateSuspenseInstance,Io=lt.getNextHydratableInstanceAfterSuspenseInstance,Co=lt.commitHydratedContainer,Gr=lt.commitHydratedSuspenseInstance,Os=lt.clearSuspenseBoundary,zs=lt.clearSuspenseBoundaryFromContainer,xl=lt.shouldDeleteUnhydratedTailInstances,lu=lt.didNotMatchHydratedContainerTextInstance,Fo=lt.didNotMatchHydratedTextInstance,vo;function ss(Ht){if(vo===void 0)try{throw Error()}catch(gn){var zt=gn.stack.trim().match(/\n( *(at )?)/);vo=zt&&zt[1]||""}return`
`+vo+Ht}var Ro=!1;function oo(Ht,zt){if(!Ht||Ro)return"";Ro=!0;var gn=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(zt)if(zt=function(){throw Error()},Object.defineProperty(zt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(zt,[])}catch(zr){var yn=zr}Reflect.construct(Ht,[],zt)}else{try{zt.call()}catch(zr){yn=zr}Ht.call(zt.prototype)}else{try{throw Error()}catch(zr){yn=zr}Ht()}}catch(zr){if(zr&&yn&&typeof zr.stack=="string"){for(var $n=zr.stack.split(`
`),Cn=yn.stack.split(`
`),Yn=$n.length-1,cr=Cn.length-1;1<=Yn&&0<=cr&&$n[Yn]!==Cn[cr];)cr--;for(;1<=Yn&&0<=cr;Yn--,cr--)if($n[Yn]!==Cn[cr]){if(Yn!==1||cr!==1)do if(Yn--,cr--,0>cr||$n[Yn]!==Cn[cr]){var xr=`
`+$n[Yn].replace(" at new "," at ");return Ht.displayName&&xr.includes("<anonymous>")&&(xr=xr.replace("<anonymous>",Ht.displayName)),xr}while(1<=Yn&&0<=cr);break}}}finally{Ro=!1,Error.prepareStackTrace=gn}return(Ht=Ht?Ht.displayName||Ht.name:"")?ss(Ht):""}var $_=Object.prototype.hasOwnProperty,Yl=[],cu=-1;function hs(Ht){return{current:Ht}}function Wr(Ht){0>cu||(Ht.current=Yl[cu],Yl[cu]=null,cu--)}function Zo(Ht,zt){cu++,Yl[cu]=Ht.current,Ht.current=zt}var ys={},Cs=hs(ys),js=hs(!1),Bo=ys;function Pl(Ht,zt){var gn=Ht.type.contextTypes;if(!gn)return ys;var yn=Ht.stateNode;if(yn&&yn.__reactInternalMemoizedUnmaskedChildContext===zt)return yn.__reactInternalMemoizedMaskedChildContext;var $n={},Cn;for(Cn in gn)$n[Cn]=zt[Cn];return yn&&(Ht=Ht.stateNode,Ht.__reactInternalMemoizedUnmaskedChildContext=zt,Ht.__reactInternalMemoizedMaskedChildContext=$n),$n}function na(Ht){return Ht=Ht.childContextTypes,Ht!=null}function wm(){Wr(js),Wr(Cs)}function Cm(Ht,zt,gn){if(Cs.current!==ys)throw Error(Ct(168));Zo(Cs,zt),Zo(js,gn)}function C0(Ht,zt,gn){var yn=Ht.stateNode;if(zt=zt.childContextTypes,typeof yn.getChildContext!="function")return gn;yn=yn.getChildContext();for(var $n in yn)if(!($n in zt))throw Error(Ct(108,Tn(Ht)||"Unknown",$n));return Et({},gn,yn)}function Xp(Ht){return Ht=(Ht=Ht.stateNode)&&Ht.__reactInternalMemoizedMergedChildContext||ys,Bo=Cs.current,Zo(Cs,Ht),Zo(js,js.current),!0}function A0(Ht,zt,gn){var yn=Ht.stateNode;if(!yn)throw Error(Ct(169));gn?(Ht=C0(Ht,zt,Bo),yn.__reactInternalMemoizedMergedChildContext=Ht,Wr(js),Wr(Cs),Zo(Cs,Ht)):Wr(js),Zo(js,gn)}var uu=Math.clz32?Math.clz32:NO,DO=Math.log,nS=Math.LN2;function NO(Ht){return Ht>>>=0,Ht===0?32:31-(DO(Ht)/nS|0)|0}var T_=64,Yp=4194304;function Zp(Ht){switch(Ht&-Ht){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return Ht&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return Ht&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return Ht}}function Am(Ht,zt){var gn=Ht.pendingLanes;if(gn===0)return 0;var yn=0,$n=Ht.suspendedLanes,Cn=Ht.pingedLanes,Yn=gn&268435455;if(Yn!==0){var cr=Yn&~$n;cr!==0?yn=Zp(cr):(Cn&=Yn,Cn!==0&&(yn=Zp(Cn)))}else Yn=gn&~$n,Yn!==0?yn=Zp(Yn):Cn!==0&&(yn=Zp(Cn));if(yn===0)return 0;if(zt!==0&&zt!==yn&&!(zt&$n)&&($n=yn&-yn,Cn=zt&-zt,$n>=Cn||$n===16&&(Cn&4194240)!==0))return zt;if(yn&4&&(yn|=gn&16),zt=Ht.entangledLanes,zt!==0)for(Ht=Ht.entanglements,zt&=yn;0<zt;)gn=31-uu(zt),$n=1<<gn,yn|=Ht[gn],zt&=~$n;return yn}function rS(Ht,zt){switch(Ht){case 1:case 2:case 4:return zt+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return zt+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function BO(Ht,zt){for(var gn=Ht.suspendedLanes,yn=Ht.pingedLanes,$n=Ht.expirationTimes,Cn=Ht.pendingLanes;0<Cn;){var Yn=31-uu(Cn),cr=1<<Yn,xr=$n[Yn];xr===-1?(!(cr&gn)||cr&yn)&&($n[Yn]=rS(cr,zt)):xr<=zt&&(Ht.expiredLanes|=cr),Cn&=~cr}}function Sp(Ht){return Ht=Ht.pendingLanes&-1073741825,Ht!==0?Ht:Ht&1073741824?1073741824:0}function E_(Ht){for(var zt=[],gn=0;31>gn;gn++)zt.push(Ht);return zt}function $p(Ht,zt,gn){Ht.pendingLanes|=zt,zt!==536870912&&(Ht.suspendedLanes=0,Ht.pingedLanes=0),Ht=Ht.eventTimes,zt=31-uu(zt),Ht[zt]=gn}function iS(Ht,zt){var gn=Ht.pendingLanes&~zt;Ht.pendingLanes=zt,Ht.suspendedLanes=0,Ht.pingedLanes=0,Ht.expiredLanes&=zt,Ht.mutableReadLanes&=zt,Ht.entangledLanes&=zt,zt=Ht.entanglements;var yn=Ht.eventTimes;for(Ht=Ht.expirationTimes;0<gn;){var $n=31-uu(gn),Cn=1<<$n;zt[$n]=0,yn[$n]=-1,Ht[$n]=-1,gn&=~Cn}}function x_(Ht,zt){var gn=Ht.entangledLanes|=zt;for(Ht=Ht.entanglements;gn;){var yn=31-uu(gn),$n=1<<yn;$n&zt|Ht[yn]&zt&&(Ht[yn]|=zt),gn&=~$n}}var Ho=0;function Im(Ht){return Ht&=-Ht,1<Ht?4<Ht?Ht&268435455?16:536870912:4:1}var qp=Tt.unstable_scheduleCallback,I0=Tt.unstable_cancelCallback,FO=Tt.unstable_shouldYield,hu=Tt.unstable_requestPaint,Ms=Tt.unstable_now,Ll=Tt.unstable_ImmediatePriority,w_=Tt.unstable_UserBlockingPriority,C_=Tt.unstable_NormalPriority,GO=Tt.unstable_IdlePriority,Kp=null,du=null;function oS(Ht){if(du&&typeof du.onCommitFiberRoot=="function")try{du.onCommitFiberRoot(Kp,Ht,void 0,(Ht.current.flags&128)===128)}catch{}}function R0(Ht,zt){return Ht===zt&&(Ht!==0||1/Ht===1/zt)||Ht!==Ht&&zt!==zt}var Dl=typeof Object.is=="function"?Object.is:R0,Bu=null,A_=!1,Fu=!1;function UO(Ht){Bu===null?Bu=[Ht]:Bu.push(Ht)}function Zl(Ht){A_=!0,UO(Ht)}function xu(){if(!Fu&&Bu!==null){Fu=!0;var Ht=0,zt=Ho;try{var gn=Bu;for(Ho=1;Ht<gn.length;Ht++){var yn=gn[Ht];do yn=yn(!0);while(yn!==null)}Bu=null,A_=!1}catch($n){throw Bu!==null&&(Bu=Bu.slice(Ht+1)),qp(Ll,xu),$n}finally{Ho=zt,Fu=!1}}return null}var ga=Rt.ReactCurrentBatchConfig;function I_(Ht,zt){if(Dl(Ht,zt))return!0;if(typeof Ht!="object"||Ht===null||typeof zt!="object"||zt===null)return!1;var gn=Object.keys(Ht),yn=Object.keys(zt);if(gn.length!==yn.length)return!1;for(yn=0;yn<gn.length;yn++){var $n=gn[yn];if(!$_.call(zt,$n)||!Dl(Ht[$n],zt[$n]))return!1}return!0}function Rm(Ht){switch(Ht.tag){case 5:return ss(Ht.type);case 16:return ss("Lazy");case 13:return ss("Suspense");case 19:return ss("SuspenseList");case 0:case 2:case 15:return Ht=oo(Ht.type,!1),Ht;case 11:return Ht=oo(Ht.type.render,!1),Ht;case 1:return Ht=oo(Ht.type,!0),Ht;default:return""}}function fu(Ht,zt){if(Ht&&Ht.defaultProps){zt=Et({},zt),Ht=Ht.defaultProps;for(var gn in Ht)zt[gn]===void 0&&(zt[gn]=Ht[gn]);return zt}return zt}var Gu=hs(null),km=null,Jp=null,VO=null;function WO(){VO=Jp=km=null}function k0(Ht,zt,gn){Yr?(Zo(Gu,zt._currentValue),zt._currentValue=gn):(Zo(Gu,zt._currentValue2),zt._currentValue2=gn)}function HO(Ht){var zt=Gu.current;Wr(Gu),Yr?Ht._currentValue=zt:Ht._currentValue2=zt}function R_(Ht,zt,gn){for(;Ht!==null;){var yn=Ht.alternate;if((Ht.childLanes&zt)!==zt?(Ht.childLanes|=zt,yn!==null&&(yn.childLanes|=zt)):yn!==null&&(yn.childLanes&zt)!==zt&&(yn.childLanes|=zt),Ht===gn)break;Ht=Ht.return}}function em(Ht,zt){km=Ht,VO=Jp=null,Ht=Ht.dependencies,Ht!==null&&Ht.firstContext!==null&&(Ht.lanes&zt&&(Vl=!0),Ht.firstContext=null)}function Kl(Ht){var zt=Yr?Ht._currentValue:Ht._currentValue2;if(VO!==Ht)if(Ht={context:Ht,memoizedValue:zt,next:null},Jp===null){if(km===null)throw Error(Ct(308));Jp=Ht,km.dependencies={lanes:0,firstContext:Ht}}else Jp=Jp.next=Ht;return zt}var Jl=null,tp=!1;function QO(Ht){Ht.updateQueue={baseState:Ht.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function M0(Ht,zt){Ht=Ht.updateQueue,zt.updateQueue===Ht&&(zt.updateQueue={baseState:Ht.baseState,firstBaseUpdate:Ht.firstBaseUpdate,lastBaseUpdate:Ht.lastBaseUpdate,shared:Ht.shared,effects:Ht.effects})}function _c(Ht,zt){return{eventTime:Ht,lane:zt,tag:0,payload:null,callback:null,next:null}}function Uu(Ht,zt){var gn=Ht.updateQueue;gn!==null&&(gn=gn.shared,Es!==null&&Ht.mode&1&&!(Uo&2)?(Ht=gn.interleaved,Ht===null?(zt.next=zt,Jl===null?Jl=[gn]:Jl.push(gn)):(zt.next=Ht.next,Ht.next=zt),gn.interleaved=zt):(Ht=gn.pending,Ht===null?zt.next=zt:(zt.next=Ht.next,Ht.next=zt),gn.pending=zt))}function Mm(Ht,zt,gn){if(zt=zt.updateQueue,zt!==null&&(zt=zt.shared,(gn&4194240)!==0)){var yn=zt.lanes;yn&=Ht.pendingLanes,gn|=yn,zt.lanes=gn,x_(Ht,gn)}}function zO(Ht,zt){var gn=Ht.updateQueue,yn=Ht.alternate;if(yn!==null&&(yn=yn.updateQueue,gn===yn)){var $n=null,Cn=null;if(gn=gn.firstBaseUpdate,gn!==null){do{var Yn={eventTime:gn.eventTime,lane:gn.lane,tag:gn.tag,payload:gn.payload,callback:gn.callback,next:null};Cn===null?$n=Cn=Yn:Cn=Cn.next=Yn,gn=gn.next}while(gn!==null);Cn===null?$n=Cn=zt:Cn=Cn.next=zt}else $n=Cn=zt;gn={baseState:yn.baseState,firstBaseUpdate:$n,lastBaseUpdate:Cn,shared:yn.shared,effects:yn.effects},Ht.updateQueue=gn;return}Ht=gn.lastBaseUpdate,Ht===null?gn.firstBaseUpdate=zt:Ht.next=zt,gn.lastBaseUpdate=zt}function k_(Ht,zt,gn,yn){var $n=Ht.updateQueue;tp=!1;var Cn=$n.firstBaseUpdate,Yn=$n.lastBaseUpdate,cr=$n.shared.pending;if(cr!==null){$n.shared.pending=null;var xr=cr,zr=xr.next;xr.next=null,Yn===null?Cn=zr:Yn.next=zr,Yn=xr;var ao=Ht.alternate;ao!==null&&(ao=ao.updateQueue,cr=ao.lastBaseUpdate,cr!==Yn&&(cr===null?ao.firstBaseUpdate=zr:cr.next=zr,ao.lastBaseUpdate=xr))}if(Cn!==null){var ko=$n.baseState;Yn=0,ao=zr=xr=null,cr=Cn;do{var bo=cr.lane,os=cr.eventTime;if((yn&bo)===bo){ao!==null&&(ao=ao.next={eventTime:os,lane:0,tag:cr.tag,payload:cr.payload,callback:cr.callback,next:null});e:{var yo=Ht,Fs=cr;switch(bo=zt,os=gn,Fs.tag){case 1:if(yo=Fs.payload,typeof yo=="function"){ko=yo.call(os,ko,bo);break e}ko=yo;break e;case 3:yo.flags=yo.flags&-65537|128;case 0:if(yo=Fs.payload,bo=typeof yo=="function"?yo.call(os,ko,bo):yo,bo==null)break e;ko=Et({},ko,bo);break e;case 2:tp=!0}}cr.callback!==null&&cr.lane!==0&&(Ht.flags|=64,bo=$n.effects,bo===null?$n.effects=[cr]:bo.push(cr))}else os={eventTime:os,lane:bo,tag:cr.tag,payload:cr.payload,callback:cr.callback,next:null},ao===null?(zr=ao=os,xr=ko):ao=ao.next=os,Yn|=bo;if(cr=cr.next,cr===null){if(cr=$n.shared.pending,cr===null)break;bo=cr,cr=bo.next,bo.next=null,$n.lastBaseUpdate=bo,$n.shared.pending=null}}while(1);if(ao===null&&(xr=ko),$n.baseState=xr,$n.firstBaseUpdate=zr,$n.lastBaseUpdate=ao,zt=$n.shared.interleaved,zt!==null){$n=zt;do Yn|=$n.lane,$n=$n.next;while($n!==zt)}else Cn===null&&($n.shared.lanes=0);fm|=Yn,Ht.lanes=Yn,Ht.memoizedState=ko}}function M_(Ht,zt,gn){if(Ht=zt.effects,zt.effects=null,Ht!==null)for(zt=0;zt<Ht.length;zt++){var yn=Ht[zt],$n=yn.callback;if($n!==null){if(yn.callback=null,yn=gn,typeof $n!="function")throw Error(Ct(191,$n));$n.call(yn)}}}var jO=new vt.Component().refs;function XO(Ht,zt,gn,yn){zt=Ht.memoizedState,gn=gn(yn,zt),gn=gn==null?zt:Et({},zt,gn),Ht.memoizedState=gn,Ht.lanes===0&&(Ht.updateQueue.baseState=gn)}var Pm={isMounted:function(Ht){return(Ht=Ht._reactInternals)?In(Ht)===Ht:!1},enqueueSetState:function(Ht,zt,gn){Ht=Ht._reactInternals;var yn=Hs(),$n=ap(Ht),Cn=_c(yn,$n);Cn.payload=zt,gn!=null&&(Cn.callback=gn),Uu(Ht,Cn),zt=ru(Ht,$n,yn),zt!==null&&Mm(zt,Ht,$n)},enqueueReplaceState:function(Ht,zt,gn){Ht=Ht._reactInternals;var yn=Hs(),$n=ap(Ht),Cn=_c(yn,$n);Cn.tag=1,Cn.payload=zt,gn!=null&&(Cn.callback=gn),Uu(Ht,Cn),zt=ru(Ht,$n,yn),zt!==null&&Mm(zt,Ht,$n)},enqueueForceUpdate:function(Ht,zt){Ht=Ht._reactInternals;var gn=Hs(),yn=ap(Ht),$n=_c(gn,yn);$n.tag=2,zt!=null&&($n.callback=zt),Uu(Ht,$n),zt=ru(Ht,yn,gn),zt!==null&&Mm(zt,Ht,yn)}};function P0(Ht,zt,gn,yn,$n,Cn,Yn){return Ht=Ht.stateNode,typeof Ht.shouldComponentUpdate=="function"?Ht.shouldComponentUpdate(yn,Cn,Yn):zt.prototype&&zt.prototype.isPureReactComponent?!I_(gn,yn)||!I_($n,Cn):!0}function L0(Ht,zt,gn){var yn=!1,$n=ys,Cn=zt.contextType;return typeof Cn=="object"&&Cn!==null?Cn=Kl(Cn):($n=na(zt)?Bo:Cs.current,yn=zt.contextTypes,Cn=(yn=yn!=null)?Pl(Ht,$n):ys),zt=new zt(gn,Cn),Ht.memoizedState=zt.state!==null&&zt.state!==void 0?zt.state:null,zt.updater=Pm,Ht.stateNode=zt,zt._reactInternals=Ht,yn&&(Ht=Ht.stateNode,Ht.__reactInternalMemoizedUnmaskedChildContext=$n,Ht.__reactInternalMemoizedMaskedChildContext=Cn),zt}function D0(Ht,zt,gn,yn){Ht=zt.state,typeof zt.componentWillReceiveProps=="function"&&zt.componentWillReceiveProps(gn,yn),typeof zt.UNSAFE_componentWillReceiveProps=="function"&&zt.UNSAFE_componentWillReceiveProps(gn,yn),zt.state!==Ht&&Pm.enqueueReplaceState(zt,zt.state,null)}function YO(Ht,zt,gn,yn){var $n=Ht.stateNode;$n.props=gn,$n.state=Ht.memoizedState,$n.refs=jO,QO(Ht);var Cn=zt.contextType;typeof Cn=="object"&&Cn!==null?$n.context=Kl(Cn):(Cn=na(zt)?Bo:Cs.current,$n.context=Pl(Ht,Cn)),$n.state=Ht.memoizedState,Cn=zt.getDerivedStateFromProps,typeof Cn=="function"&&(XO(Ht,zt,Cn,gn),$n.state=Ht.memoizedState),typeof zt.getDerivedStateFromProps=="function"||typeof $n.getSnapshotBeforeUpdate=="function"||typeof $n.UNSAFE_componentWillMount!="function"&&typeof $n.componentWillMount!="function"||(zt=$n.state,typeof $n.componentWillMount=="function"&&$n.componentWillMount(),typeof $n.UNSAFE_componentWillMount=="function"&&$n.UNSAFE_componentWillMount(),zt!==$n.state&&Pm.enqueueReplaceState($n,$n.state,null),k_(Ht,gn,$n,yn),$n.state=Ht.memoizedState),typeof $n.componentDidMount=="function"&&(Ht.flags|=4194308)}var wu=[],Tp=0,Lm=null,Ep=0,ba=[],eu=0,xp=null,Cu=1,Au="";function Nl(Ht,zt){wu[Tp++]=Ep,wu[Tp++]=Lm,Lm=Ht,Ep=zt}function ZO(Ht,zt,gn){ba[eu++]=Cu,ba[eu++]=Au,ba[eu++]=xp,xp=Ht;var yn=Cu;Ht=Au;var $n=32-uu(yn)-1;yn&=~(1<<$n),gn+=1;var Cn=32-uu(zt)+$n;if(30<Cn){var Yn=$n-$n%5;Cn=(yn&(1<<Yn)-1).toString(32),yn>>=Yn,$n-=Yn,Cu=1<<32-uu(zt)+$n|gn<<$n|yn,Au=Cn+Ht}else Cu=1<<Cn|gn<<$n|yn,Au=Ht}function P_(Ht){Ht.return!==null&&(Nl(Ht,1),ZO(Ht,1,0))}function qO(Ht){for(;Ht===Lm;)Lm=wu[--Tp],wu[Tp]=null,Ep=wu[--Tp],wu[Tp]=null;for(;Ht===xp;)xp=ba[--eu],ba[eu]=null,Au=ba[--eu],ba[eu]=null,Cu=ba[--eu],ba[eu]=null}var Bl=null,Fl=null,ds=!1,tm=!1,pu=null;function KO(Ht,zt){var gn=iu(5,null,null,0);gn.elementType="DELETED",gn.stateNode=zt,gn.return=Ht,zt=Ht.deletions,zt===null?(Ht.deletions=[gn],Ht.flags|=16):zt.push(gn)}function N0(Ht,zt){switch(Ht.tag){case 5:return zt=Ml(zt,Ht.type,Ht.pendingProps),zt!==null?(Ht.stateNode=zt,Bl=Ht,Fl=fr(zt),!0):!1;case 6:return zt=LO(zt,Ht.pendingProps),zt!==null?(Ht.stateNode=zt,Bl=Ht,Fl=null,!0):!1;case 13:if(zt=wo(zt),zt!==null){var gn=xp!==null?{id:Cu,overflow:Au}:null;return Ht.memoizedState={dehydrated:zt,treeContext:gn,retryLane:1073741824},gn=iu(18,null,null,0),gn.stateNode=zt,gn.return=Ht,Ht.child=gn,Bl=Ht,Fl=null,!0}return!1;default:return!1}}function Vu(Ht){return(Ht.mode&1)!==0&&(Ht.flags&128)===0}function nm(Ht){if(ds){var zt=Fl;if(zt){var gn=zt;if(!N0(Ht,zt)){if(Vu(Ht))throw Error(Ct(418));zt=wr(gn);var yn=Bl;zt&&N0(Ht,zt)?KO(yn,gn):(Ht.flags=Ht.flags&-4097|2,ds=!1,Bl=Ht)}}else{if(Vu(Ht))throw Error(Ct(418));Ht.flags=Ht.flags&-4097|2,ds=!1,Bl=Ht}}}function L_(Ht){for(Ht=Ht.return;Ht!==null&&Ht.tag!==5&&Ht.tag!==3&&Ht.tag!==13;)Ht=Ht.return;Bl=Ht}function wp(Ht){if(!kr||Ht!==Bl)return!1;if(!ds)return L_(Ht),ds=!0,!1;if(Ht.tag!==3&&(Ht.tag!==5||xl(Ht.type)&&!tr(Ht.type,Ht.memoizedProps))){var zt=Fl;if(zt){if(Vu(Ht)){for(Ht=Fl;Ht;)Ht=wr(Ht);throw Error(Ct(418))}for(;zt;)KO(Ht,zt),zt=wr(zt)}}if(L_(Ht),Ht.tag===13){if(!kr)throw Error(Ct(316));if(Ht=Ht.memoizedState,Ht=Ht!==null?Ht.dehydrated:null,!Ht)throw Error(Ct(317));Fl=Io(Ht)}else Fl=Bl?wr(Ht.stateNode):null;return!0}function mu(){kr&&(Fl=Bl=null,tm=ds=!1)}function Dm(Ht){pu===null?pu=[Ht]:pu.push(Ht)}function Cp(Ht,zt,gn){if(Ht=gn.ref,Ht!==null&&typeof Ht!="function"&&typeof Ht!="object"){if(gn._owner){if(gn=gn._owner,gn){if(gn.tag!==1)throw Error(Ct(309));var yn=gn.stateNode}if(!yn)throw Error(Ct(147,Ht));var $n=yn,Cn=""+Ht;return zt!==null&&zt.ref!==null&&typeof zt.ref=="function"&&zt.ref._stringRef===Cn?zt.ref:(zt=function(Yn){var cr=$n.refs;cr===jO&&(cr=$n.refs={}),Yn===null?delete cr[Cn]:cr[Cn]=Yn},zt._stringRef=Cn,zt)}if(typeof Ht!="string")throw Error(Ct(284));if(!gn._owner)throw Error(Ct(290,Ht))}return Ht}function im(Ht,zt){throw Ht=Object.prototype.toString.call(zt),Error(Ct(31,Ht==="[object Object]"?"object with keys {"+Object.keys(zt).join(", ")+"}":Ht))}function fs(Ht){var zt=Ht._init;return zt(Ht._payload)}function Nm(Ht){function zt(_r,ur){if(Ht){var br=_r.deletions;br===null?(_r.deletions=[ur],_r.flags|=16):br.push(ur)}}function gn(_r,ur){if(!Ht)return null;for(;ur!==null;)zt(_r,ur),ur=ur.sibling;return null}function yn(_r,ur){for(_r=new Map;ur!==null;)ur.key!==null?_r.set(ur.key,ur):_r.set(ur.index,ur),ur=ur.sibling;return _r}function $n(_r,ur){return _r=hp(_r,ur),_r.index=0,_r.sibling=null,_r}function Cn(_r,ur,br){return _r.index=br,Ht?(br=_r.alternate,br!==null?(br=br.index,br<ur?(_r.flags|=2,ur):br):(_r.flags|=2,ur)):(_r.flags|=1048576,ur)}function Yn(_r){return Ht&&_r.alternate===null&&(_r.flags|=2),_r}function cr(_r,ur,br,Xr){return ur===null||ur.tag!==6?(ur=qs(br,_r.mode,Xr),ur.return=_r,ur):(ur=$n(ur,br),ur.return=_r,ur)}function xr(_r,ur,br,Xr){var po=br.type;return po===Bt?ao(_r,ur,br.props.children,Xr,br.key):ur!==null&&(ur.elementType===po||typeof po=="object"&&po!==null&&po.$$typeof===mn&&fs(po)===ur.type)?(Xr=$n(ur,br.props),Xr.ref=Cp(_r,ur,br),Xr.return=_r,Xr):(Xr=cO(br.type,br.key,br.props,null,_r.mode,Xr),Xr.ref=Cp(_r,ur,br),Xr.return=_r,Xr)}function zr(_r,ur,br,Xr){return ur===null||ur.tag!==4||ur.stateNode.containerInfo!==br.containerInfo||ur.stateNode.implementation!==br.implementation?(ur=xs(br,_r.mode,Xr),ur.return=_r,ur):(ur=$n(ur,br.children||[]),ur.return=_r,ur)}function ao(_r,ur,br,Xr,po){return ur===null||ur.tag!==7?(ur=Bp(br,_r.mode,Xr,po),ur.return=_r,ur):(ur=$n(ur,br),ur.return=_r,ur)}function ko(_r,ur,br){if(typeof ur=="string"&&ur!==""||typeof ur=="number")return ur=qs(""+ur,_r.mode,br),ur.return=_r,ur;if(typeof ur=="object"&&ur!==null){switch(ur.$$typeof){case kt:return br=cO(ur.type,ur.key,ur.props,null,_r.mode,br),br.ref=Cp(_r,null,ur),br.return=_r,br;case Dt:return ur=xs(ur,_r.mode,br),ur.return=_r,ur;case mn:var Xr=ur._init;return ko(_r,Xr(ur._payload),br)}if(Kn(ur)||En(ur))return ur=Bp(ur,_r.mode,br,null),ur.return=_r,ur;im(_r,ur)}return null}function bo(_r,ur,br,Xr){var po=ur!==null?ur.key:null;if(typeof br=="string"&&br!==""||typeof br=="number")return po!==null?null:cr(_r,ur,""+br,Xr);if(typeof br=="object"&&br!==null){switch(br.$$typeof){case kt:return br.key===po?xr(_r,ur,br,Xr):null;case Dt:return br.key===po?zr(_r,ur,br,Xr):null;case mn:return po=br._init,bo(_r,ur,po(br._payload),Xr)}if(Kn(br)||En(br))return po!==null?null:ao(_r,ur,br,Xr,null);im(_r,br)}return null}function os(_r,ur,br,Xr,po){if(typeof Xr=="string"&&Xr!==""||typeof Xr=="number")return _r=_r.get(br)||null,cr(ur,_r,""+Xr,po);if(typeof Xr=="object"&&Xr!==null){switch(Xr.$$typeof){case kt:return _r=_r.get(Xr.key===null?br:Xr.key)||null,xr(ur,_r,Xr,po);case Dt:return _r=_r.get(Xr.key===null?br:Xr.key)||null,zr(ur,_r,Xr,po);case mn:var Go=Xr._init;return os(_r,ur,br,Go(Xr._payload),po)}if(Kn(Xr)||En(Xr))return _r=_r.get(br)||null,ao(ur,_r,Xr,po,null);im(ur,Xr)}return null}function yo(_r,ur,br,Xr){for(var po=null,Go=null,Lo=ur,Yo=ur=0,ps=null;Lo!==null&&Yo<br.length;Yo++){Lo.index>Yo?(ps=Lo,Lo=null):ps=Lo.sibling;var jo=bo(_r,Lo,br[Yo],Xr);if(jo===null){Lo===null&&(Lo=ps);break}Ht&&Lo&&jo.alternate===null&&zt(_r,Lo),ur=Cn(jo,ur,Yo),Go===null?po=jo:Go.sibling=jo,Go=jo,Lo=ps}if(Yo===br.length)return gn(_r,Lo),ds&&Nl(_r,Yo),po;if(Lo===null){for(;Yo<br.length;Yo++)Lo=ko(_r,br[Yo],Xr),Lo!==null&&(ur=Cn(Lo,ur,Yo),Go===null?po=Lo:Go.sibling=Lo,Go=Lo);return ds&&Nl(_r,Yo),po}for(Lo=yn(_r,Lo);Yo<br.length;Yo++)ps=os(Lo,_r,Yo,br[Yo],Xr),ps!==null&&(Ht&&ps.alternate!==null&&Lo.delete(ps.key===null?Yo:ps.key),ur=Cn(ps,ur,Yo),Go===null?po=ps:Go.sibling=ps,Go=ps);return Ht&&Lo.forEach(function(Wl){return zt(_r,Wl)}),ds&&Nl(_r,Yo),po}function Fs(_r,ur,br,Xr){var po=En(br);if(typeof po!="function")throw Error(Ct(150));if(br=po.call(br),br==null)throw Error(Ct(151));for(var Go=po=null,Lo=ur,Yo=ur=0,ps=null,jo=br.next();Lo!==null&&!jo.done;Yo++,jo=br.next()){Lo.index>Yo?(ps=Lo,Lo=null):ps=Lo.sibling;var Wl=bo(_r,Lo,jo.value,Xr);if(Wl===null){Lo===null&&(Lo=ps);break}Ht&&Lo&&Wl.alternate===null&&zt(_r,Lo),ur=Cn(Wl,ur,Yo),Go===null?po=Wl:Go.sibling=Wl,Go=Wl,Lo=ps}if(jo.done)return gn(_r,Lo),ds&&Nl(_r,Yo),po;if(Lo===null){for(;!jo.done;Yo++,jo=br.next())jo=ko(_r,jo.value,Xr),jo!==null&&(ur=Cn(jo,ur,Yo),Go===null?po=jo:Go.sibling=jo,Go=jo);return ds&&Nl(_r,Yo),po}for(Lo=yn(_r,Lo);!jo.done;Yo++,jo=br.next())jo=os(Lo,_r,Yo,jo.value,Xr),jo!==null&&(Ht&&jo.alternate!==null&&Lo.delete(jo.key===null?Yo:jo.key),ur=Cn(jo,ur,Yo),Go===null?po=jo:Go.sibling=jo,Go=jo);return Ht&&Lo.forEach(function(vu){return zt(_r,vu)}),ds&&Nl(_r,Yo),po}function Is(_r,ur,br,Xr){if(typeof br=="object"&&br!==null&&br.type===Bt&&br.key===null&&(br=br.props.children),typeof br=="object"&&br!==null){switch(br.$$typeof){case kt:e:{for(var po=br.key,Go=ur;Go!==null;){if(Go.key===po){if(po=br.type,po===Bt){if(Go.tag===7){gn(_r,Go.sibling),ur=$n(Go,br.props.children),ur.return=_r,_r=ur;break e}}else if(Go.elementType===po||typeof po=="object"&&po!==null&&po.$$typeof===mn&&fs(po)===Go.type){gn(_r,Go.sibling),ur=$n(Go,br.props),ur.ref=Cp(_r,Go,br),ur.return=_r,_r=ur;break e}gn(_r,Go);break}else zt(_r,Go);Go=Go.sibling}br.type===Bt?(ur=Bp(br.props.children,_r.mode,Xr,br.key),ur.return=_r,_r=ur):(Xr=cO(br.type,br.key,br.props,null,_r.mode,Xr),Xr.ref=Cp(_r,ur,br),Xr.return=_r,_r=Xr)}return Yn(_r);case Dt:e:{for(Go=br.key;ur!==null;){if(ur.key===Go)if(ur.tag===4&&ur.stateNode.containerInfo===br.containerInfo&&ur.stateNode.implementation===br.implementation){gn(_r,ur.sibling),ur=$n(ur,br.children||[]),ur.return=_r,_r=ur;break e}else{gn(_r,ur);break}else zt(_r,ur);ur=ur.sibling}ur=xs(br,_r.mode,Xr),ur.return=_r,_r=ur}return Yn(_r);case mn:return Go=br._init,Is(_r,ur,Go(br._payload),Xr)}if(Kn(br))return yo(_r,ur,br,Xr);if(En(br))return Fs(_r,ur,br,Xr);im(_r,br)}return typeof br=="string"&&br!==""||typeof br=="number"?(br=""+br,ur!==null&&ur.tag===6?(gn(_r,ur.sibling),ur=$n(ur,br),ur.return=_r,_r=ur):(gn(_r,ur),ur=qs(br,_r.mode,Xr),ur.return=_r,_r=ur),Yn(_r)):gn(_r,ur)}return Is}var gu=Nm(!0),Ap=Nm(!1),Bm={},Gl=hs(Bm),Ip=hs(Bm),$a=hs(Bm);function _u(Ht){if(Ht===Bm)throw Error(Ct(174));return Ht}function Fm(Ht,zt){Zo($a,zt),Zo(Ip,Ht),Zo(Gl,Bm),Ht=lr(zt),Wr(Gl),Zo(Gl,Ht)}function Rp(){Wr(Gl),Wr(Ip),Wr($a)}function JO(Ht){var zt=_u($a.current),gn=_u(Gl.current);zt=Ln(gn,Ht.type,zt),gn!==zt&&(Zo(Ip,Ht),Zo(Gl,zt))}function ey(Ht){Ip.current===Ht&&(Wr(Gl),Wr(Ip))}var gs=hs(0);function xa(Ht){for(var zt=Ht;zt!==null;){if(zt.tag===13){var gn=zt.memoizedState;if(gn!==null&&(gn=gn.dehydrated,gn===null||S_(gn)||Qn(gn)))return zt}else if(zt.tag===19&&zt.memoizedProps.revealOrder!==void 0){if(zt.flags&128)return zt}else if(zt.child!==null){zt.child.return=zt,zt=zt.child;continue}if(zt===Ht)break;for(;zt.sibling===null;){if(zt.return===null||zt.return===Ht)return null;zt=zt.return}zt.sibling.return=zt.return,zt=zt.sibling}return null}var ty=[];function Gm(){for(var Ht=0;Ht<ty.length;Ht++){var zt=ty[Ht];Yr?zt._workInProgressVersionPrimary=null:zt._workInProgressVersionSecondary=null}ty.length=0}var D_=Rt.ReactCurrentDispatcher,$s=Rt.ReactCurrentBatchConfig,ns=0,vs=null,Xs=null,Bs=null,Um=!1,Vm=!1,Wm=0,np=0;function Ys(){throw Error(Ct(321))}function om(Ht,zt){if(zt===null)return!1;for(var gn=0;gn<zt.length&&gn<Ht.length;gn++)if(!Dl(Ht[gn],zt[gn]))return!1;return!0}function ny(Ht,zt,gn,yn,$n,Cn){if(ns=Cn,vs=zt,zt.memoizedState=null,zt.updateQueue=null,zt.lanes=0,D_.current=Ht===null||Ht.memoizedState===null?Ts:aS,Ht=gn(yn,$n),Vm){Cn=0;do{if(Vm=!1,Wm=0,25<=Cn)throw Error(Ct(301));Cn+=1,Bs=Xs=null,zt.updateQueue=null,D_.current=lS,Ht=gn(yn,$n)}while(Vm)}if(D_.current=eo,zt=Xs!==null&&Xs.next!==null,ns=0,Bs=Xs=vs=null,Um=!1,zt)throw Error(Ct(300));return Ht}function sm(){var Ht=Wm!==0;return Wm=0,Ht}function Ou(){var Ht={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bs===null?vs.memoizedState=Bs=Ht:Bs=Bs.next=Ht,Bs}function Iu(){if(Xs===null){var Ht=vs.alternate;Ht=Ht!==null?Ht.memoizedState:null}else Ht=Xs.next;var zt=Bs===null?vs.memoizedState:Bs.next;if(zt!==null)Bs=zt,Xs=Ht;else{if(Ht===null)throw Error(Ct(310));Xs=Ht,Ht={memoizedState:Xs.memoizedState,baseState:Xs.baseState,baseQueue:Xs.baseQueue,queue:Xs.queue,next:null},Bs===null?vs.memoizedState=Bs=Ht:Bs=Bs.next=Ht}return Bs}function Wu(Ht,zt){return typeof zt=="function"?zt(Ht):zt}function N_(Ht){var zt=Iu(),gn=zt.queue;if(gn===null)throw Error(Ct(311));gn.lastRenderedReducer=Ht;var yn=Xs,$n=yn.baseQueue,Cn=gn.pending;if(Cn!==null){if($n!==null){var Yn=$n.next;$n.next=Cn.next,Cn.next=Yn}yn.baseQueue=$n=Cn,gn.pending=null}if($n!==null){Cn=$n.next,yn=yn.baseState;var cr=Yn=null,xr=null,zr=Cn;do{var ao=zr.lane;if((ns&ao)===ao)xr!==null&&(xr=xr.next={lane:0,action:zr.action,hasEagerState:zr.hasEagerState,eagerState:zr.eagerState,next:null}),yn=zr.hasEagerState?zr.eagerState:Ht(yn,zr.action);else{var ko={lane:ao,action:zr.action,hasEagerState:zr.hasEagerState,eagerState:zr.eagerState,next:null};xr===null?(cr=xr=ko,Yn=yn):xr=xr.next=ko,vs.lanes|=ao,fm|=ao}zr=zr.next}while(zr!==null&&zr!==Cn);xr===null?Yn=yn:xr.next=cr,Dl(yn,zt.memoizedState)||(Vl=!0),zt.memoizedState=yn,zt.baseState=Yn,zt.baseQueue=xr,gn.lastRenderedState=yn}if(Ht=gn.interleaved,Ht!==null){$n=Ht;do Cn=$n.lane,vs.lanes|=Cn,fm|=Cn,$n=$n.next;while($n!==Ht)}else $n===null&&(gn.lanes=0);return[zt.memoizedState,gn.dispatch]}function am(Ht){var zt=Iu(),gn=zt.queue;if(gn===null)throw Error(Ct(311));gn.lastRenderedReducer=Ht;var yn=gn.dispatch,$n=gn.pending,Cn=zt.memoizedState;if($n!==null){gn.pending=null;var Yn=$n=$n.next;do Cn=Ht(Cn,Yn.action),Yn=Yn.next;while(Yn!==$n);Dl(Cn,zt.memoizedState)||(Vl=!0),zt.memoizedState=Cn,zt.baseQueue===null&&(zt.baseState=Cn),gn.lastRenderedState=Cn}return[Cn,yn]}function ry(){}function iy(Ht,zt){var gn=vs,yn=Iu(),$n=zt(),Cn=!Dl(yn.memoizedState,$n);if(Cn&&(yn.memoizedState=$n,Vl=!0),yn=yn.queue,Mp(F0.bind(null,gn,yn,Ht),[Ht]),yn.getSnapshot!==zt||Cn||Bs!==null&&Bs.memoizedState.tag&1){if(gn.flags|=2048,kp(9,B0.bind(null,gn,yn,$n,zt),void 0,null),Es===null)throw Error(Ct(349));ns&30||Hm(gn,zt,$n)}return $n}function Hm(Ht,zt,gn){Ht.flags|=16384,Ht={getSnapshot:zt,value:gn},zt=vs.updateQueue,zt===null?(zt={lastEffect:null,stores:null},vs.updateQueue=zt,zt.stores=[Ht]):(gn=zt.stores,gn===null?zt.stores=[Ht]:gn.push(Ht))}function B0(Ht,zt,gn,yn){zt.value=gn,zt.getSnapshot=yn,G0(zt)&&ru(Ht,1,-1)}function F0(Ht,zt,gn){return gn(function(){G0(zt)&&ru(Ht,1,-1)})}function G0(Ht){var zt=Ht.getSnapshot;Ht=Ht.value;try{var gn=zt();return!Dl(Ht,gn)}catch{return!0}}function B_(Ht){var zt=Ou();return typeof Ht=="function"&&(Ht=Ht()),zt.memoizedState=zt.baseState=Ht,Ht={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wu,lastRenderedState:Ht},zt.queue=Ht,Ht=Ht.dispatch=Ul.bind(null,vs,Ht),[zt.memoizedState,Ht]}function kp(Ht,zt,gn,yn){return Ht={tag:Ht,create:zt,destroy:gn,deps:yn,next:null},zt=vs.updateQueue,zt===null?(zt={lastEffect:null,stores:null},vs.updateQueue=zt,zt.lastEffect=Ht.next=Ht):(gn=zt.lastEffect,gn===null?zt.lastEffect=Ht.next=Ht:(yn=gn.next,gn.next=Ht,Ht.next=yn,zt.lastEffect=Ht)),Ht}function U0(){return Iu().memoizedState}function F_(Ht,zt,gn,yn){var $n=Ou();vs.flags|=Ht,$n.memoizedState=kp(1|zt,gn,void 0,yn===void 0?null:yn)}function G_(Ht,zt,gn,yn){var $n=Iu();yn=yn===void 0?null:yn;var Cn=void 0;if(Xs!==null){var Yn=Xs.memoizedState;if(Cn=Yn.destroy,yn!==null&&om(yn,Yn.deps)){$n.memoizedState=kp(zt,gn,Cn,yn);return}}vs.flags|=Ht,$n.memoizedState=kp(1|zt,gn,Cn,yn)}function U_(Ht,zt){return F_(8390656,8,Ht,zt)}function Mp(Ht,zt){return G_(2048,8,Ht,zt)}function oy(Ht,zt){return G_(4,2,Ht,zt)}function V_(Ht,zt){return G_(4,4,Ht,zt)}function V0(Ht,zt){if(typeof zt=="function")return Ht=Ht(),zt(Ht),function(){zt(null)};if(zt!=null)return Ht=Ht(),zt.current=Ht,function(){zt.current=null}}function Qm(Ht,zt,gn){return gn=gn!=null?gn.concat([Ht]):null,G_(4,4,V0.bind(null,zt,Ht),gn)}function sy(){}function W0(Ht,zt){var gn=Iu();zt=zt===void 0?null:zt;var yn=gn.memoizedState;return yn!==null&&zt!==null&&om(zt,yn[1])?yn[0]:(gn.memoizedState=[Ht,zt],Ht)}function H0(Ht,zt){var gn=Iu();zt=zt===void 0?null:zt;var yn=gn.memoizedState;return yn!==null&&zt!==null&&om(zt,yn[1])?yn[0]:(Ht=Ht(),gn.memoizedState=[Ht,zt],Ht)}function sS(Ht,zt){var gn=Ho;Ho=gn!==0&&4>gn?gn:4,Ht(!0);var yn=$s.transition;$s.transition={};try{Ht(!1),zt()}finally{Ho=gn,$s.transition=yn}}function _l(){return Iu().memoizedState}function _o(Ht,zt,gn){var yn=ap(Ht);gn={lane:yn,action:gn,hasEagerState:!1,eagerState:null,next:null},Vs(Ht)?ls(zt,gn):(Ru(Ht,zt,gn),gn=Hs(),Ht=ru(Ht,yn,gn),Ht!==null&&lm(Ht,zt,yn))}function Ul(Ht,zt,gn){var yn=ap(Ht),$n={lane:yn,action:gn,hasEagerState:!1,eagerState:null,next:null};if(Vs(Ht))ls(zt,$n);else{Ru(Ht,zt,$n);var Cn=Ht.alternate;if(Ht.lanes===0&&(Cn===null||Cn.lanes===0)&&(Cn=zt.lastRenderedReducer,Cn!==null))try{var Yn=zt.lastRenderedState,cr=Cn(Yn,gn);if($n.hasEagerState=!0,$n.eagerState=cr,Dl(cr,Yn))return}catch{}finally{}gn=Hs(),Ht=ru(Ht,yn,gn),Ht!==null&&lm(Ht,zt,yn)}}function Vs(Ht){var zt=Ht.alternate;return Ht===vs||zt!==null&&zt===vs}function ls(Ht,zt){Vm=Um=!0;var gn=Ht.pending;gn===null?zt.next=zt:(zt.next=gn.next,gn.next=zt),Ht.pending=zt}function Ru(Ht,zt,gn){Es!==null&&Ht.mode&1&&!(Uo&2)?(Ht=zt.interleaved,Ht===null?(gn.next=gn,Jl===null?Jl=[zt]:Jl.push(zt)):(gn.next=Ht.next,Ht.next=gn),zt.interleaved=gn):(Ht=zt.pending,Ht===null?gn.next=gn:(gn.next=Ht.next,Ht.next=gn),zt.pending=gn)}function lm(Ht,zt,gn){if(gn&4194240){var yn=zt.lanes;yn&=Ht.pendingLanes,gn|=yn,zt.lanes=gn,x_(Ht,gn)}}var eo={readContext:Kl,useCallback:Ys,useContext:Ys,useEffect:Ys,useImperativeHandle:Ys,useInsertionEffect:Ys,useLayoutEffect:Ys,useMemo:Ys,useReducer:Ys,useRef:Ys,useState:Ys,useDebugValue:Ys,useDeferredValue:Ys,useTransition:Ys,useMutableSource:Ys,useSyncExternalStore:Ys,useId:Ys,unstable_isNewReconciler:!1},Ts={readContext:Kl,useCallback:function(Ht,zt){return Ou().memoizedState=[Ht,zt===void 0?null:zt],Ht},useContext:Kl,useEffect:U_,useImperativeHandle:function(Ht,zt,gn){return gn=gn!=null?gn.concat([Ht]):null,F_(4194308,4,V0.bind(null,zt,Ht),gn)},useLayoutEffect:function(Ht,zt){return F_(4194308,4,Ht,zt)},useInsertionEffect:function(Ht,zt){return F_(4,2,Ht,zt)},useMemo:function(Ht,zt){var gn=Ou();return zt=zt===void 0?null:zt,Ht=Ht(),gn.memoizedState=[Ht,zt],Ht},useReducer:function(Ht,zt,gn){var yn=Ou();return zt=gn!==void 0?gn(zt):zt,yn.memoizedState=yn.baseState=zt,Ht={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ht,lastRenderedState:zt},yn.queue=Ht,Ht=Ht.dispatch=_o.bind(null,vs,Ht),[yn.memoizedState,Ht]},useRef:function(Ht){var zt=Ou();return Ht={current:Ht},zt.memoizedState=Ht},useState:B_,useDebugValue:sy,useDeferredValue:function(Ht){var zt=B_(Ht),gn=zt[0],yn=zt[1];return U_(function(){var $n=$s.transition;$s.transition={};try{yn(Ht)}finally{$s.transition=$n}},[Ht]),gn},useTransition:function(){var Ht=B_(!1),zt=Ht[0];return Ht=sS.bind(null,Ht[1]),Ou().memoizedState=Ht,[zt,Ht]},useMutableSource:function(){},useSyncExternalStore:function(Ht,zt,gn){var yn=vs,$n=Ou();if(ds){if(gn===void 0)throw Error(Ct(407));gn=gn()}else{if(gn=zt(),Es===null)throw Error(Ct(349));ns&30||Hm(yn,zt,gn)}$n.memoizedState=gn;var Cn={value:gn,getSnapshot:zt};return $n.queue=Cn,U_(F0.bind(null,yn,Cn,Ht),[Ht]),yn.flags|=2048,kp(9,B0.bind(null,yn,Cn,gn,zt),void 0,null),gn},useId:function(){var Ht=Ou(),zt=Es.identifierPrefix;if(ds){var gn=Au,yn=Cu;gn=(yn&~(1<<32-uu(yn)-1)).toString(32)+gn,zt=":"+zt+"R"+gn,gn=Wm++,0<gn&&(zt+="H"+gn.toString(32)),zt+=":"}else gn=np++,zt=":"+zt+"r"+gn.toString(32)+":";return Ht.memoizedState=zt},unstable_isNewReconciler:!1},aS={readContext:Kl,useCallback:W0,useContext:Kl,useEffect:Mp,useImperativeHandle:Qm,useInsertionEffect:oy,useLayoutEffect:V_,useMemo:H0,useReducer:N_,useRef:U0,useState:function(){return N_(Wu)},useDebugValue:sy,useDeferredValue:function(Ht){var zt=N_(Wu),gn=zt[0],yn=zt[1];return Mp(function(){var $n=$s.transition;$s.transition={};try{yn(Ht)}finally{$s.transition=$n}},[Ht]),gn},useTransition:function(){var Ht=N_(Wu)[0],zt=Iu().memoizedState;return[Ht,zt]},useMutableSource:ry,useSyncExternalStore:iy,useId:_l,unstable_isNewReconciler:!1},lS={readContext:Kl,useCallback:W0,useContext:Kl,useEffect:Mp,useImperativeHandle:Qm,useInsertionEffect:oy,useLayoutEffect:V_,useMemo:H0,useReducer:am,useRef:U0,useState:function(){return am(Wu)},useDebugValue:sy,useDeferredValue:function(Ht){var zt=am(Wu),gn=zt[0],yn=zt[1];return Mp(function(){var $n=$s.transition;$s.transition={};try{yn(Ht)}finally{$s.transition=$n}},[Ht]),gn},useTransition:function(){var Ht=am(Wu)[0],zt=Iu().memoizedState;return[Ht,zt]},useMutableSource:ry,useSyncExternalStore:iy,useId:_l,unstable_isNewReconciler:!1};function ay(Ht,zt){try{var gn="",yn=zt;do gn+=Rm(yn),yn=yn.return;while(yn);var $n=gn}catch(Cn){$n=`
Error generating stack: `+Cn.message+`
`+Cn.stack}return{value:Ht,source:zt,stack:$n}}function ly(Ht,zt){try{console.error(zt.value)}catch(gn){setTimeout(function(){throw gn})}}var cS=typeof WeakMap=="function"?WeakMap:Map;function Q0(Ht,zt,gn){gn=_c(-1,gn),gn.tag=3,gn.payload={element:null};var yn=zt.value;return gn.callback=function(){oO||(oO=!0,Ey=yn),ly(Ht,zt)},gn}function z0(Ht,zt,gn){gn=_c(-1,gn),gn.tag=3;var yn=Ht.type.getDerivedStateFromError;if(typeof yn=="function"){var $n=zt.value;gn.payload=function(){return yn($n)},gn.callback=function(){ly(Ht,zt)}}var Cn=Ht.stateNode;return Cn!==null&&typeof Cn.componentDidCatch=="function"&&(gn.callback=function(){ly(Ht,zt),typeof yn!="function"&&(sp===null?sp=new Set([this]):sp.add(this));var Yn=zt.stack;this.componentDidCatch(zt.value,{componentStack:Yn!==null?Yn:""})}),gn}function j0(Ht,zt,gn){var yn=Ht.pingCache;if(yn===null){yn=Ht.pingCache=new cS;var $n=new Set;yn.set(zt,$n)}else $n=yn.get(zt),$n===void 0&&($n=new Set,yn.set(zt,$n));$n.has(gn)||($n.add(gn),Ht=pS.bind(null,Ht,zt,gn),zt.then(Ht,Ht))}function X0(Ht){do{var zt;if((zt=Ht.tag===13)&&(zt=Ht.memoizedState,zt=zt!==null?zt.dehydrated!==null:!0),zt)return Ht;Ht=Ht.return}while(Ht!==null);return null}function Y0(Ht,zt,gn,yn,$n){return Ht.mode&1?(Ht.flags|=65536,Ht.lanes=$n,Ht):(Ht===zt?Ht.flags|=65536:(Ht.flags|=128,gn.flags|=131072,gn.flags&=-52805,gn.tag===1&&(gn.alternate===null?gn.tag=17:(zt=_c(-1,1),zt.tag=2,Uu(gn,zt))),gn.lanes|=1),Ht)}function ku(Ht){Ht.flags|=4}function Z0(Ht,zt){if(Ht!==null&&Ht.child===zt.child)return!0;if(zt.flags&16)return!1;for(Ht=zt.child;Ht!==null;){if(Ht.flags&12854||Ht.subtreeFlags&12854)return!1;Ht=Ht.sibling}return!0}var zm,Pp,W_,tu;if(_i)zm=function(Ht,zt){for(var gn=zt.child;gn!==null;){if(gn.tag===5||gn.tag===6)Mn(Ht,gn.stateNode);else if(gn.tag!==4&&gn.child!==null){gn.child.return=gn,gn=gn.child;continue}if(gn===zt)break;for(;gn.sibling===null;){if(gn.return===null||gn.return===zt)return;gn=gn.return}gn.sibling.return=gn.return,gn=gn.sibling}},Pp=function(){},W_=function(Ht,zt,gn,yn,$n){if(Ht=Ht.memoizedProps,Ht!==yn){var Cn=zt.stateNode,Yn=_u(Gl.current);gn=mr(Cn,gn,Ht,yn,$n,Yn),(zt.updateQueue=gn)&&ku(zt)}},tu=function(Ht,zt,gn,yn){gn!==yn&&ku(zt)};else if(Er){zm=function(Ht,zt,gn,yn){for(var $n=zt.child;$n!==null;){if($n.tag===5){var Cn=$n.stateNode;gn&&yn&&(Cn=as(Cn,$n.type,$n.memoizedProps,$n)),Mn(Ht,Cn)}else if($n.tag===6)Cn=$n.stateNode,gn&&yn&&(Cn=us(Cn,$n.memoizedProps,$n)),Mn(Ht,Cn);else if($n.tag!==4){if($n.tag===22&&$n.memoizedState!==null)Cn=$n.child,Cn!==null&&(Cn.return=$n),zm(Ht,$n,!0,!0);else if($n.child!==null){$n.child.return=$n,$n=$n.child;continue}}if($n===zt)break;for(;$n.sibling===null;){if($n.return===null||$n.return===zt)return;$n=$n.return}$n.sibling.return=$n.return,$n=$n.sibling}};var q0=function(Ht,zt,gn,yn){for(var $n=zt.child;$n!==null;){if($n.tag===5){var Cn=$n.stateNode;gn&&yn&&(Cn=as(Cn,$n.type,$n.memoizedProps,$n)),cs(Ht,Cn)}else if($n.tag===6)Cn=$n.stateNode,gn&&yn&&(Cn=us(Cn,$n.memoizedProps,$n)),cs(Ht,Cn);else if($n.tag!==4){if($n.tag===22&&$n.memoizedState!==null)Cn=$n.child,Cn!==null&&(Cn.return=$n),q0(Ht,$n,!0,!0);else if($n.child!==null){$n.child.return=$n,$n=$n.child;continue}}if($n===zt)break;for(;$n.sibling===null;){if($n.return===null||$n.return===zt)return;$n=$n.return}$n.sibling.return=$n.return,$n=$n.sibling}};Pp=function(Ht,zt){var gn=zt.stateNode;if(!Z0(Ht,zt)){Ht=gn.containerInfo;var yn=rs(Ht);q0(yn,zt,!1,!1),gn.pendingChildren=yn,ku(zt),Ns(Ht,yn)}},W_=function(Ht,zt,gn,yn,$n){var Cn=Ht.stateNode,Yn=Ht.memoizedProps;if((Ht=Z0(Ht,zt))&&Yn===yn)zt.stateNode=Cn;else{var cr=zt.stateNode,xr=_u(Gl.current),zr=null;Yn!==yn&&(zr=mr(cr,gn,Yn,yn,$n,xr)),Ht&&zr===null?zt.stateNode=Cn:(Cn=fo(Cn,zr,gn,Yn,yn,zt,Ht,cr),ir(Cn,gn,yn,$n,xr)&&ku(zt),zt.stateNode=Cn,Ht?ku(zt):zm(Cn,zt,!1,!1))}},tu=function(Ht,zt,gn,yn){gn!==yn?(Ht=_u($a.current),gn=_u(Gl.current),zt.stateNode=Dr(yn,Ht,gn,zt),ku(zt)):zt.stateNode=Ht.stateNode}}else Pp=function(){},W_=function(){},tu=function(){};function jm(Ht,zt){if(!ds)switch(Ht.tailMode){case"hidden":zt=Ht.tail;for(var gn=null;zt!==null;)zt.alternate!==null&&(gn=zt),zt=zt.sibling;gn===null?Ht.tail=null:gn.sibling=null;break;case"collapsed":gn=Ht.tail;for(var yn=null;gn!==null;)gn.alternate!==null&&(yn=gn),gn=gn.sibling;yn===null?zt||Ht.tail===null?Ht.tail=null:Ht.tail.sibling=null:yn.sibling=null}}function Zs(Ht){var zt=Ht.alternate!==null&&Ht.alternate.child===Ht.child,gn=0,yn=0;if(zt)for(var $n=Ht.child;$n!==null;)gn|=$n.lanes|$n.childLanes,yn|=$n.subtreeFlags&14680064,yn|=$n.flags&14680064,$n.return=Ht,$n=$n.sibling;else for($n=Ht.child;$n!==null;)gn|=$n.lanes|$n.childLanes,yn|=$n.subtreeFlags,yn|=$n.flags,$n.return=Ht,$n=$n.sibling;return Ht.subtreeFlags|=yn,Ht.childLanes=gn,zt}function uS(Ht,zt,gn){var yn=zt.pendingProps;switch(qO(zt),zt.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zs(zt),null;case 1:return na(zt.type)&&wm(),Zs(zt),null;case 3:return yn=zt.stateNode,Rp(),Wr(js),Wr(Cs),Gm(),yn.pendingContext&&(yn.context=yn.pendingContext,yn.pendingContext=null),(Ht===null||Ht.child===null)&&(wp(zt)?ku(zt):Ht===null||Ht.memoizedState.isDehydrated&&!(zt.flags&256)||(zt.flags|=1024,pu!==null&&(wy(pu),pu=null))),Pp(Ht,zt),Zs(zt),null;case 5:ey(zt),gn=_u($a.current);var $n=zt.type;if(Ht!==null&&zt.stateNode!=null)W_(Ht,zt,$n,yn,gn),Ht.ref!==zt.ref&&(zt.flags|=512,zt.flags|=2097152);else{if(!yn){if(zt.stateNode===null)throw Error(Ct(166));return Zs(zt),null}if(Ht=_u(Gl.current),wp(zt)){if(!kr)throw Error(Ct(175));Ht=So(zt.stateNode,zt.type,zt.memoizedProps,gn,Ht,zt,!tm),zt.updateQueue=Ht,Ht!==null&&ku(zt)}else{var Cn=sr($n,yn,gn,Ht,zt);zm(Cn,zt,!1,!1),zt.stateNode=Cn,ir(Cn,$n,yn,gn,Ht)&&ku(zt)}zt.ref!==null&&(zt.flags|=512,zt.flags|=2097152)}return Zs(zt),null;case 6:if(Ht&&zt.stateNode!=null)tu(Ht,zt,Ht.memoizedProps,yn);else{if(typeof yn!="string"&&zt.stateNode===null)throw Error(Ct(166));if(Ht=_u($a.current),gn=_u(Gl.current),wp(zt)){if(!kr)throw Error(Ct(176));if(Ht=zt.stateNode,yn=zt.memoizedProps,(gn=Do(Ht,yn,zt,!tm))&&($n=Bl,$n!==null))switch(Cn=($n.mode&1)!==0,$n.tag){case 3:lu($n.stateNode.containerInfo,Ht,yn,Cn);break;case 5:Fo($n.type,$n.memoizedProps,$n.stateNode,Ht,yn,Cn)}gn&&ku(zt)}else zt.stateNode=Dr(yn,Ht,gn,zt)}return Zs(zt),null;case 13:if(Wr(gs),yn=zt.memoizedState,ds&&Fl!==null&&zt.mode&1&&!(zt.flags&128)){for(Ht=Fl;Ht;)Ht=wr(Ht);return mu(),zt.flags|=98560,zt}if(yn!==null&&yn.dehydrated!==null){if(yn=wp(zt),Ht===null){if(!yn)throw Error(Ct(318));if(!kr)throw Error(Ct(344));if(Ht=zt.memoizedState,Ht=Ht!==null?Ht.dehydrated:null,!Ht)throw Error(Ct(317));xo(Ht,zt)}else mu(),!(zt.flags&128)&&(zt.memoizedState=null),zt.flags|=4;return Zs(zt),null}return pu!==null&&(wy(pu),pu=null),zt.flags&128?(zt.lanes=gn,zt):(yn=yn!==null,gn=!1,Ht===null?wp(zt):gn=Ht.memoizedState!==null,yn&&!gn&&(zt.child.flags|=8192,zt.mode&1&&(Ht===null||gs.current&1?Ps===0&&(Ps=3):i_())),zt.updateQueue!==null&&(zt.flags|=4),Zs(zt),null);case 4:return Rp(),Pp(Ht,zt),Ht===null&&so(zt.stateNode.containerInfo),Zs(zt),null;case 10:return HO(zt.type._context),Zs(zt),null;case 17:return na(zt.type)&&wm(),Zs(zt),null;case 19:if(Wr(gs),$n=zt.memoizedState,$n===null)return Zs(zt),null;if(yn=(zt.flags&128)!==0,Cn=$n.rendering,Cn===null)if(yn)jm($n,!1);else{if(Ps!==0||Ht!==null&&Ht.flags&128)for(Ht=zt.child;Ht!==null;){if(Cn=xa(Ht),Cn!==null){for(zt.flags|=128,jm($n,!1),Ht=Cn.updateQueue,Ht!==null&&(zt.updateQueue=Ht,zt.flags|=4),zt.subtreeFlags=0,Ht=gn,yn=zt.child;yn!==null;)gn=yn,$n=Ht,gn.flags&=14680066,Cn=gn.alternate,Cn===null?(gn.childLanes=0,gn.lanes=$n,gn.child=null,gn.subtreeFlags=0,gn.memoizedProps=null,gn.memoizedState=null,gn.updateQueue=null,gn.dependencies=null,gn.stateNode=null):(gn.childLanes=Cn.childLanes,gn.lanes=Cn.lanes,gn.child=Cn.child,gn.subtreeFlags=0,gn.deletions=null,gn.memoizedProps=Cn.memoizedProps,gn.memoizedState=Cn.memoizedState,gn.updateQueue=Cn.updateQueue,gn.type=Cn.type,$n=Cn.dependencies,gn.dependencies=$n===null?null:{lanes:$n.lanes,firstContext:$n.firstContext}),yn=yn.sibling;return Zo(gs,gs.current&1|2),zt.child}Ht=Ht.sibling}$n.tail!==null&&Ms()>n_&&(zt.flags|=128,yn=!0,jm($n,!1),zt.lanes=4194304)}else{if(!yn)if(Ht=xa(Cn),Ht!==null){if(zt.flags|=128,yn=!0,Ht=Ht.updateQueue,Ht!==null&&(zt.updateQueue=Ht,zt.flags|=4),jm($n,!0),$n.tail===null&&$n.tailMode==="hidden"&&!Cn.alternate&&!ds)return Zs(zt),null}else 2*Ms()-$n.renderingStartTime>n_&&gn!==1073741824&&(zt.flags|=128,yn=!0,jm($n,!1),zt.lanes=4194304);$n.isBackwards?(Cn.sibling=zt.child,zt.child=Cn):(Ht=$n.last,Ht!==null?Ht.sibling=Cn:zt.child=Cn,$n.last=Cn)}return $n.tail!==null?(zt=$n.tail,$n.rendering=zt,$n.tail=zt.sibling,$n.renderingStartTime=Ms(),zt.sibling=null,Ht=gs.current,Zo(gs,yn?Ht&1|2:Ht&1),zt):(Zs(zt),null);case 22:case 23:return lO(),yn=zt.memoizedState!==null,Ht!==null&&Ht.memoizedState!==null!==yn&&(zt.flags|=8192),yn&&zt.mode&1?Cl&1073741824&&(Zs(zt),_i&&zt.subtreeFlags&6&&(zt.flags|=8192)):Zs(zt),null;case 24:return null;case 25:return null}throw Error(Ct(156,zt.tag))}var hS=Rt.ReactCurrentOwner,Vl=!1;function Ol(Ht,zt,gn,yn){zt.child=Ht===null?Ap(zt,null,gn,yn):gu(zt,Ht.child,gn,yn)}function cy(Ht,zt,gn,yn,$n){gn=gn.render;var Cn=zt.ref;return em(zt,$n),yn=ny(Ht,zt,gn,yn,Cn,$n),gn=sm(),Ht!==null&&!Vl?(zt.updateQueue=Ht.updateQueue,zt.flags&=-2053,Ht.lanes&=~$n,Mu(Ht,zt,$n)):(ds&&gn&&P_(zt),zt.flags|=1,Ol(Ht,zt,yn,$n),zt.child)}function rp(Ht,zt,gn,yn,$n){if(Ht===null){var Cn=gn.type;return typeof Cn=="function"&&!Dy(Cn)&&Cn.defaultProps===void 0&&gn.compare===null&&gn.defaultProps===void 0?(zt.tag=15,zt.type=Cn,H_(Ht,zt,Cn,yn,$n)):(Ht=cO(gn.type,null,yn,zt,zt.mode,$n),Ht.ref=zt.ref,Ht.return=zt,zt.child=Ht)}if(Cn=Ht.child,!(Ht.lanes&$n)){var Yn=Cn.memoizedProps;if(gn=gn.compare,gn=gn!==null?gn:I_,gn(Yn,yn)&&Ht.ref===zt.ref)return Mu(Ht,zt,$n)}return zt.flags|=1,Ht=hp(Cn,yn),Ht.ref=zt.ref,Ht.return=zt,zt.child=Ht}function H_(Ht,zt,gn,yn,$n){if(Ht!==null&&I_(Ht.memoizedProps,yn)&&Ht.ref===zt.ref)if(Vl=!1,(Ht.lanes&$n)!==0)Ht.flags&131072&&(Vl=!0);else return zt.lanes=Ht.lanes,Mu(Ht,zt,$n);return hy(Ht,zt,gn,yn,$n)}function uy(Ht,zt,gn){var yn=zt.pendingProps,$n=yn.children,Cn=Ht!==null?Ht.memoizedState:null;if(yn.mode==="hidden")if(!(zt.mode&1))zt.memoizedState={baseLanes:0,cachePool:null},Zo(Qu,Cl),Cl|=gn;else if(gn&1073741824)zt.memoizedState={baseLanes:0,cachePool:null},yn=Cn!==null?Cn.baseLanes:gn,Zo(Qu,Cl),Cl|=yn;else return Ht=Cn!==null?Cn.baseLanes|gn:gn,zt.lanes=zt.childLanes=1073741824,zt.memoizedState={baseLanes:Ht,cachePool:null},zt.updateQueue=null,Zo(Qu,Cl),Cl|=Ht,null;else Cn!==null?(yn=Cn.baseLanes|gn,zt.memoizedState=null):yn=gn,Zo(Qu,Cl),Cl|=yn;return Ol(Ht,zt,$n,gn),zt.child}function K0(Ht,zt){var gn=zt.ref;(Ht===null&&gn!==null||Ht!==null&&Ht.ref!==gn)&&(zt.flags|=512,zt.flags|=2097152)}function hy(Ht,zt,gn,yn,$n){var Cn=na(gn)?Bo:Cs.current;return Cn=Pl(zt,Cn),em(zt,$n),gn=ny(Ht,zt,gn,yn,Cn,$n),yn=sm(),Ht!==null&&!Vl?(zt.updateQueue=Ht.updateQueue,zt.flags&=-2053,Ht.lanes&=~$n,Mu(Ht,zt,$n)):(ds&&yn&&P_(zt),zt.flags|=1,Ol(Ht,zt,gn,$n),zt.child)}function J0(Ht,zt,gn,yn,$n){if(na(gn)){var Cn=!0;Xp(zt)}else Cn=!1;if(em(zt,$n),zt.stateNode===null)Ht!==null&&(Ht.alternate=null,zt.alternate=null,zt.flags|=2),L0(zt,gn,yn),YO(zt,gn,yn,$n),yn=!0;else if(Ht===null){var Yn=zt.stateNode,cr=zt.memoizedProps;Yn.props=cr;var xr=Yn.context,zr=gn.contextType;typeof zr=="object"&&zr!==null?zr=Kl(zr):(zr=na(gn)?Bo:Cs.current,zr=Pl(zt,zr));var ao=gn.getDerivedStateFromProps,ko=typeof ao=="function"||typeof Yn.getSnapshotBeforeUpdate=="function";ko||typeof Yn.UNSAFE_componentWillReceiveProps!="function"&&typeof Yn.componentWillReceiveProps!="function"||(cr!==yn||xr!==zr)&&D0(zt,Yn,yn,zr),tp=!1;var bo=zt.memoizedState;Yn.state=bo,k_(zt,yn,Yn,$n),xr=zt.memoizedState,cr!==yn||bo!==xr||js.current||tp?(typeof ao=="function"&&(XO(zt,gn,ao,yn),xr=zt.memoizedState),(cr=tp||P0(zt,gn,cr,yn,bo,xr,zr))?(ko||typeof Yn.UNSAFE_componentWillMount!="function"&&typeof Yn.componentWillMount!="function"||(typeof Yn.componentWillMount=="function"&&Yn.componentWillMount(),typeof Yn.UNSAFE_componentWillMount=="function"&&Yn.UNSAFE_componentWillMount()),typeof Yn.componentDidMount=="function"&&(zt.flags|=4194308)):(typeof Yn.componentDidMount=="function"&&(zt.flags|=4194308),zt.memoizedProps=yn,zt.memoizedState=xr),Yn.props=yn,Yn.state=xr,Yn.context=zr,yn=cr):(typeof Yn.componentDidMount=="function"&&(zt.flags|=4194308),yn=!1)}else{Yn=zt.stateNode,M0(Ht,zt),cr=zt.memoizedProps,zr=zt.type===zt.elementType?cr:fu(zt.type,cr),Yn.props=zr,ko=zt.pendingProps,bo=Yn.context,xr=gn.contextType,typeof xr=="object"&&xr!==null?xr=Kl(xr):(xr=na(gn)?Bo:Cs.current,xr=Pl(zt,xr));var os=gn.getDerivedStateFromProps;(ao=typeof os=="function"||typeof Yn.getSnapshotBeforeUpdate=="function")||typeof Yn.UNSAFE_componentWillReceiveProps!="function"&&typeof Yn.componentWillReceiveProps!="function"||(cr!==ko||bo!==xr)&&D0(zt,Yn,yn,xr),tp=!1,bo=zt.memoizedState,Yn.state=bo,k_(zt,yn,Yn,$n);var yo=zt.memoizedState;cr!==ko||bo!==yo||js.current||tp?(typeof os=="function"&&(XO(zt,gn,os,yn),yo=zt.memoizedState),(zr=tp||P0(zt,gn,zr,yn,bo,yo,xr)||!1)?(ao||typeof Yn.UNSAFE_componentWillUpdate!="function"&&typeof Yn.componentWillUpdate!="function"||(typeof Yn.componentWillUpdate=="function"&&Yn.componentWillUpdate(yn,yo,xr),typeof Yn.UNSAFE_componentWillUpdate=="function"&&Yn.UNSAFE_componentWillUpdate(yn,yo,xr)),typeof Yn.componentDidUpdate=="function"&&(zt.flags|=4),typeof Yn.getSnapshotBeforeUpdate=="function"&&(zt.flags|=1024)):(typeof Yn.componentDidUpdate!="function"||cr===Ht.memoizedProps&&bo===Ht.memoizedState||(zt.flags|=4),typeof Yn.getSnapshotBeforeUpdate!="function"||cr===Ht.memoizedProps&&bo===Ht.memoizedState||(zt.flags|=1024),zt.memoizedProps=yn,zt.memoizedState=yo),Yn.props=yn,Yn.state=yo,Yn.context=xr,yn=zr):(typeof Yn.componentDidUpdate!="function"||cr===Ht.memoizedProps&&bo===Ht.memoizedState||(zt.flags|=4),typeof Yn.getSnapshotBeforeUpdate!="function"||cr===Ht.memoizedProps&&bo===Ht.memoizedState||(zt.flags|=1024),yn=!1)}return dy(Ht,zt,gn,yn,Cn,$n)}function dy(Ht,zt,gn,yn,$n,Cn){K0(Ht,zt);var Yn=(zt.flags&128)!==0;if(!yn&&!Yn)return $n&&A0(zt,gn,!1),Mu(Ht,zt,Cn);yn=zt.stateNode,hS.current=zt;var cr=Yn&&typeof gn.getDerivedStateFromError!="function"?null:yn.render();return zt.flags|=1,Ht!==null&&Yn?(zt.child=gu(zt,Ht.child,null,Cn),zt.child=gu(zt,null,cr,Cn)):Ol(Ht,zt,cr,Cn),zt.memoizedState=yn.state,$n&&A0(zt,gn,!0),zt.child}function ev(Ht){var zt=Ht.stateNode;zt.pendingContext?Cm(Ht,zt.pendingContext,zt.pendingContext!==zt.context):zt.context&&Cm(Ht,zt.context,!1),Fm(Ht,zt.containerInfo)}function tv(Ht,zt,gn,yn,$n){return mu(),Dm($n),zt.flags|=256,Ol(Ht,zt,gn,yn),zt.child}var Q_={dehydrated:null,treeContext:null,retryLane:0};function z_(Ht){return{baseLanes:Ht,cachePool:null}}function fy(Ht,zt,gn){var yn=zt.pendingProps,$n=gs.current,Cn=!1,Yn=(zt.flags&128)!==0,cr;if((cr=Yn)||(cr=Ht!==null&&Ht.memoizedState===null?!1:($n&2)!==0),cr?(Cn=!0,zt.flags&=-129):(Ht===null||Ht.memoizedState!==null)&&($n|=1),Zo(gs,$n&1),Ht===null)return nm(zt),Ht=zt.memoizedState,Ht!==null&&(Ht=Ht.dehydrated,Ht!==null)?(zt.mode&1?Qn(Ht)?zt.lanes=8:zt.lanes=1073741824:zt.lanes=1,null):($n=yn.children,Ht=yn.fallback,Cn?(yn=zt.mode,Cn=zt.child,$n={mode:"hidden",children:$n},!(yn&1)&&Cn!==null?(Cn.childLanes=0,Cn.pendingProps=$n):Cn=Oo($n,yn,0,null),Ht=Bp(Ht,yn,gn,null),Cn.return=zt,Ht.return=zt,Cn.sibling=Ht,zt.child=Cn,zt.child.memoizedState=z_(gn),zt.memoizedState=Q_,Ht):my(zt,$n));if($n=Ht.memoizedState,$n!==null){if(cr=$n.dehydrated,cr!==null){if(Yn)return zt.flags&256?(zt.flags&=-257,j_(Ht,zt,gn,Error(Ct(422)))):zt.memoizedState!==null?(zt.child=Ht.child,zt.flags|=128,null):(Cn=yn.fallback,$n=zt.mode,yn=Oo({mode:"visible",children:yn.children},$n,0,null),Cn=Bp(Cn,$n,gn,null),Cn.flags|=2,yn.return=zt,Cn.return=zt,yn.sibling=Cn,zt.child=yn,zt.mode&1&&gu(zt,Ht.child,null,gn),zt.child.memoizedState=z_(gn),zt.memoizedState=Q_,Cn);if(!(zt.mode&1))zt=j_(Ht,zt,gn,null);else if(Qn(cr))zt=j_(Ht,zt,gn,Error(Ct(419)));else if(yn=(gn&Ht.childLanes)!==0,Vl||yn){if(yn=Es,yn!==null){switch(gn&-gn){case 4:Cn=2;break;case 16:Cn=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Cn=32;break;case 536870912:Cn=268435456;break;default:Cn=0}yn=Cn&(yn.suspendedLanes|gn)?0:Cn,yn!==0&&yn!==$n.retryLane&&($n.retryLane=yn,ru(Ht,yn,-1))}i_(),zt=j_(Ht,zt,gn,Error(Ct(421)))}else S_(cr)?(zt.flags|=128,zt.child=Ht.child,zt=mS.bind(null,Ht),Or(cr,zt),zt=null):(gn=$n.treeContext,kr&&(Fl=$o(cr),Bl=zt,ds=!0,pu=null,tm=!1,gn!==null&&(ba[eu++]=Cu,ba[eu++]=Au,ba[eu++]=xp,Cu=gn.id,Au=gn.overflow,xp=zt)),zt=my(zt,zt.pendingProps.children),zt.flags|=4096);return zt}return Cn?(yn=rv(Ht,zt,yn.children,yn.fallback,gn),Cn=zt.child,$n=Ht.child.memoizedState,Cn.memoizedState=$n===null?z_(gn):{baseLanes:$n.baseLanes|gn,cachePool:null},Cn.childLanes=Ht.childLanes&~gn,zt.memoizedState=Q_,yn):(gn=nv(Ht,zt,yn.children,gn),zt.memoizedState=null,gn)}return Cn?(yn=rv(Ht,zt,yn.children,yn.fallback,gn),Cn=zt.child,$n=Ht.child.memoizedState,Cn.memoizedState=$n===null?z_(gn):{baseLanes:$n.baseLanes|gn,cachePool:null},Cn.childLanes=Ht.childLanes&~gn,zt.memoizedState=Q_,yn):(gn=nv(Ht,zt,yn.children,gn),zt.memoizedState=null,gn)}function my(Ht,zt){return zt=Oo({mode:"visible",children:zt},Ht.mode,0,null),zt.return=Ht,Ht.child=zt}function nv(Ht,zt,gn,yn){var $n=Ht.child;return Ht=$n.sibling,gn=hp($n,{mode:"visible",children:gn}),!(zt.mode&1)&&(gn.lanes=yn),gn.return=zt,gn.sibling=null,Ht!==null&&(yn=zt.deletions,yn===null?(zt.deletions=[Ht],zt.flags|=16):yn.push(Ht)),zt.child=gn}function rv(Ht,zt,gn,yn,$n){var Cn=zt.mode;Ht=Ht.child;var Yn=Ht.sibling,cr={mode:"hidden",children:gn};return!(Cn&1)&&zt.child!==Ht?(gn=zt.child,gn.childLanes=0,gn.pendingProps=cr,zt.deletions=null):(gn=hp(Ht,cr),gn.subtreeFlags=Ht.subtreeFlags&14680064),Yn!==null?yn=hp(Yn,yn):(yn=Bp(yn,Cn,$n,null),yn.flags|=2),yn.return=zt,gn.return=zt,gn.sibling=yn,zt.child=gn,yn}function j_(Ht,zt,gn,yn){return yn!==null&&Dm(yn),gu(zt,Ht.child,null,gn),Ht=my(zt,zt.pendingProps.children),Ht.flags|=2,zt.memoizedState=null,Ht}function Xm(Ht,zt,gn){Ht.lanes|=zt;var yn=Ht.alternate;yn!==null&&(yn.lanes|=zt),R_(Ht.return,zt,gn)}function X_(Ht,zt,gn,yn,$n){var Cn=Ht.memoizedState;Cn===null?Ht.memoizedState={isBackwards:zt,rendering:null,renderingStartTime:0,last:yn,tail:gn,tailMode:$n}:(Cn.isBackwards=zt,Cn.rendering=null,Cn.renderingStartTime=0,Cn.last=yn,Cn.tail=gn,Cn.tailMode=$n)}function gy(Ht,zt,gn){var yn=zt.pendingProps,$n=yn.revealOrder,Cn=yn.tail;if(Ol(Ht,zt,yn.children,gn),yn=gs.current,yn&2)yn=yn&1|2,zt.flags|=128;else{if(Ht!==null&&Ht.flags&128)e:for(Ht=zt.child;Ht!==null;){if(Ht.tag===13)Ht.memoizedState!==null&&Xm(Ht,gn,zt);else if(Ht.tag===19)Xm(Ht,gn,zt);else if(Ht.child!==null){Ht.child.return=Ht,Ht=Ht.child;continue}if(Ht===zt)break e;for(;Ht.sibling===null;){if(Ht.return===null||Ht.return===zt)break e;Ht=Ht.return}Ht.sibling.return=Ht.return,Ht=Ht.sibling}yn&=1}if(Zo(gs,yn),!(zt.mode&1))zt.memoizedState=null;else switch($n){case"forwards":for(gn=zt.child,$n=null;gn!==null;)Ht=gn.alternate,Ht!==null&&xa(Ht)===null&&($n=gn),gn=gn.sibling;gn=$n,gn===null?($n=zt.child,zt.child=null):($n=gn.sibling,gn.sibling=null),X_(zt,!1,$n,gn,Cn);break;case"backwards":for(gn=null,$n=zt.child,zt.child=null;$n!==null;){if(Ht=$n.alternate,Ht!==null&&xa(Ht)===null){zt.child=$n;break}Ht=$n.sibling,$n.sibling=gn,gn=$n,$n=Ht}X_(zt,!0,gn,null,Cn);break;case"together":X_(zt,!1,null,null,void 0);break;default:zt.memoizedState=null}return zt.child}function Mu(Ht,zt,gn){if(Ht!==null&&(zt.dependencies=Ht.dependencies),fm|=zt.lanes,!(gn&zt.childLanes))return null;if(Ht!==null&&zt.child!==Ht.child)throw Error(Ct(153));if(zt.child!==null){for(Ht=zt.child,gn=hp(Ht,Ht.pendingProps),zt.child=gn,gn.return=zt;Ht.sibling!==null;)Ht=Ht.sibling,gn=gn.sibling=hp(Ht,Ht.pendingProps),gn.return=zt;gn.sibling=null}return zt.child}function iv(Ht,zt,gn){switch(zt.tag){case 3:ev(zt),mu();break;case 5:JO(zt);break;case 1:na(zt.type)&&Xp(zt);break;case 4:Fm(zt,zt.stateNode.containerInfo);break;case 10:k0(zt,zt.type._context,zt.memoizedProps.value);break;case 13:var yn=zt.memoizedState;if(yn!==null)return yn.dehydrated!==null?(Zo(gs,gs.current&1),zt.flags|=128,null):gn&zt.child.childLanes?fy(Ht,zt,gn):(Zo(gs,gs.current&1),Ht=Mu(Ht,zt,gn),Ht!==null?Ht.sibling:null);Zo(gs,gs.current&1);break;case 19:if(yn=(gn&zt.childLanes)!==0,Ht.flags&128){if(yn)return gy(Ht,zt,gn);zt.flags|=128}var $n=zt.memoizedState;if($n!==null&&($n.rendering=null,$n.tail=null,$n.lastEffect=null),Zo(gs,gs.current),yn)break;return null;case 22:case 23:return zt.lanes=0,uy(Ht,zt,gn)}return Mu(Ht,zt,gn)}function ov(Ht,zt){switch(qO(zt),zt.tag){case 1:return na(zt.type)&&wm(),Ht=zt.flags,Ht&65536?(zt.flags=Ht&-65537|128,zt):null;case 3:return Rp(),Wr(js),Wr(Cs),Gm(),Ht=zt.flags,Ht&65536&&!(Ht&128)?(zt.flags=Ht&-65537|128,zt):null;case 5:return ey(zt),null;case 13:if(Wr(gs),Ht=zt.memoizedState,Ht!==null&&Ht.dehydrated!==null){if(zt.alternate===null)throw Error(Ct(340));mu()}return Ht=zt.flags,Ht&65536?(zt.flags=Ht&-65537|128,zt):null;case 19:return Wr(gs),null;case 4:return Rp(),null;case 10:return HO(zt.type._context),null;case 22:case 23:return lO(),null;case 24:return null;default:return null}}var Ym=!1,yu=!1,Zm=typeof WeakSet=="function"?WeakSet:Set,to=null;function cm(Ht,zt){var gn=Ht.ref;if(gn!==null)if(typeof gn=="function")try{gn(null)}catch(yn){Sl(Ht,zt,yn)}else gn.current=null}function um(Ht,zt,gn){try{gn()}catch(yn){Sl(Ht,zt,yn)}}var sv=!1;function av(Ht,zt){for(Vn(Ht.containerInfo),to=zt;to!==null;)if(Ht=to,zt=Ht.child,(Ht.subtreeFlags&1028)!==0&&zt!==null)zt.return=Ht,to=zt;else for(;to!==null;){Ht=to;try{var gn=Ht.alternate;if(Ht.flags&1024)switch(Ht.tag){case 0:case 11:case 15:break;case 1:if(gn!==null){var yn=gn.memoizedProps,$n=gn.memoizedState,Cn=Ht.stateNode,Yn=Cn.getSnapshotBeforeUpdate(Ht.elementType===Ht.type?yn:fu(Ht.type,yn),$n);Cn.__reactInternalSnapshotBeforeUpdate=Yn}break;case 3:_i&&io(Ht.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ct(163))}}catch(cr){Sl(Ht,Ht.return,cr)}if(zt=Ht.sibling,zt!==null){zt.return=Ht.return,to=zt;break}to=Ht.return}return gn=sv,sv=!1,gn}function ip(Ht,zt,gn){var yn=zt.updateQueue;if(yn=yn!==null?yn.lastEffect:null,yn!==null){var $n=yn=yn.next;do{if(($n.tag&Ht)===Ht){var Cn=$n.destroy;$n.destroy=void 0,Cn!==void 0&&um(zt,gn,Cn)}$n=$n.next}while($n!==yn)}}function op(Ht,zt){if(zt=zt.updateQueue,zt=zt!==null?zt.lastEffect:null,zt!==null){var gn=zt=zt.next;do{if((gn.tag&Ht)===Ht){var yn=gn.create;gn.destroy=yn()}gn=gn.next}while(gn!==zt)}}function Oy(Ht){var zt=Ht.ref;if(zt!==null){var gn=Ht.stateNode;switch(Ht.tag){case 5:Ht=zn(gn);break;default:Ht=gn}typeof zt=="function"?zt(Ht):zt.current=Ht}}function lv(Ht,zt,gn){if(du&&typeof du.onCommitFiberUnmount=="function")try{du.onCommitFiberUnmount(Kp,zt)}catch{}switch(zt.tag){case 0:case 11:case 14:case 15:if(Ht=zt.updateQueue,Ht!==null&&(Ht=Ht.lastEffect,Ht!==null)){var yn=Ht=Ht.next;do{var $n=yn,Cn=$n.destroy;$n=$n.tag,Cn!==void 0&&($n&2||$n&4)&&um(zt,gn,Cn),yn=yn.next}while(yn!==Ht)}break;case 1:if(cm(zt,gn),Ht=zt.stateNode,typeof Ht.componentWillUnmount=="function")try{Ht.props=zt.memoizedProps,Ht.state=zt.memoizedState,Ht.componentWillUnmount()}catch(Yn){Sl(zt,gn,Yn)}break;case 5:cm(zt,gn);break;case 4:_i?dv(Ht,zt,gn):Er&&Er&&(zt=zt.stateNode.containerInfo,gn=rs(zt),Us(zt,gn))}}function cv(Ht,zt,gn){for(var yn=zt;;)if(lv(Ht,yn,gn),yn.child===null||_i&&yn.tag===4){if(yn===zt)break;for(;yn.sibling===null;){if(yn.return===null||yn.return===zt)return;yn=yn.return}yn.sibling.return=yn.return,yn=yn.sibling}else yn.child.return=yn,yn=yn.child}function uv(Ht){var zt=Ht.alternate;zt!==null&&(Ht.alternate=null,uv(zt)),Ht.child=null,Ht.deletions=null,Ht.sibling=null,Ht.tag===5&&(zt=Ht.stateNode,zt!==null&&no(zt)),Ht.stateNode=null,Ht.return=null,Ht.dependencies=null,Ht.memoizedProps=null,Ht.memoizedState=null,Ht.pendingProps=null,Ht.stateNode=null,Ht.updateQueue=null}function qm(Ht){return Ht.tag===5||Ht.tag===3||Ht.tag===4}function yy(Ht){e:for(;;){for(;Ht.sibling===null;){if(Ht.return===null||qm(Ht.return))return null;Ht=Ht.return}for(Ht.sibling.return=Ht.return,Ht=Ht.sibling;Ht.tag!==5&&Ht.tag!==6&&Ht.tag!==18;){if(Ht.flags&2||Ht.child===null||Ht.tag===4)continue e;Ht.child.return=Ht,Ht=Ht.child}if(!(Ht.flags&2))return Ht.stateNode}}function hv(Ht){if(_i){e:{for(var zt=Ht.return;zt!==null;){if(qm(zt))break e;zt=zt.return}throw Error(Ct(160))}var gn=zt;switch(gn.tag){case 5:zt=gn.stateNode,gn.flags&32&&(Zn(zt),gn.flags&=-33),gn=yy(Ht),Z_(Ht,gn,zt);break;case 3:case 4:zt=gn.stateNode.containerInfo,gn=yy(Ht),Y_(Ht,gn,zt);break;default:throw Error(Ct(161))}}}function Y_(Ht,zt,gn){var yn=Ht.tag;if(yn===5||yn===6)Ht=Ht.stateNode,zt?Nr(gn,Ht,zt):Zr(gn,Ht);else if(yn!==4&&(Ht=Ht.child,Ht!==null))for(Y_(Ht,zt,gn),Ht=Ht.sibling;Ht!==null;)Y_(Ht,zt,gn),Ht=Ht.sibling}function Z_(Ht,zt,gn){var yn=Ht.tag;if(yn===5||yn===6)Ht=Ht.stateNode,zt?Tr(gn,Ht,zt):pr(gn,Ht);else if(yn!==4&&(Ht=Ht.child,Ht!==null))for(Z_(Ht,zt,gn),Ht=Ht.sibling;Ht!==null;)Z_(Ht,zt,gn),Ht=Ht.sibling}function dv(Ht,zt,gn){for(var yn=zt,$n=!1,Cn,Yn;;){if(!$n){$n=yn.return;e:for(;;){if($n===null)throw Error(Ct(160));switch(Cn=$n.stateNode,$n.tag){case 5:Yn=!1;break e;case 3:Cn=Cn.containerInfo,Yn=!0;break e;case 4:Cn=Cn.containerInfo,Yn=!0;break e}$n=$n.return}$n=!0}if(yn.tag===5||yn.tag===6)cv(Ht,yn,gn),Yn?Nn(Cn,yn.stateNode):xn(Cn,yn.stateNode);else if(yn.tag===18)Yn?zs(Cn,yn.stateNode):Os(Cn,yn.stateNode);else if(yn.tag===4){if(yn.child!==null){Cn=yn.stateNode.containerInfo,Yn=!0,yn.child.return=yn,yn=yn.child;continue}}else if(lv(Ht,yn,gn),yn.child!==null){yn.child.return=yn,yn=yn.child;continue}if(yn===zt)break;for(;yn.sibling===null;){if(yn.return===null||yn.return===zt)return;yn=yn.return,yn.tag===4&&($n=!1)}yn.sibling.return=yn.return,yn=yn.sibling}}function Km(Ht,zt){if(_i){switch(zt.tag){case 0:case 11:case 14:case 15:ip(3,zt,zt.return),op(3,zt),ip(5,zt,zt.return);return;case 1:return;case 5:var gn=zt.stateNode;if(gn!=null){var yn=zt.memoizedProps;Ht=Ht!==null?Ht.memoizedProps:yn;var $n=zt.type,Cn=zt.updateQueue;zt.updateQueue=null,Cn!==null&&Jn(gn,Cn,$n,Ht,yn,zt)}return;case 6:if(zt.stateNode===null)throw Error(Ct(162));gn=zt.memoizedProps,Cr(zt.stateNode,Ht!==null?Ht.memoizedProps:gn,gn);return;case 3:kr&&Ht!==null&&Ht.memoizedState.isDehydrated&&Co(zt.stateNode.containerInfo);return;case 12:return;case 13:hm(zt);return;case 19:hm(zt);return;case 17:return}throw Error(Ct(163))}switch(zt.tag){case 0:case 11:case 14:case 15:ip(3,zt,zt.return),op(3,zt),ip(5,zt,zt.return);return;case 12:return;case 13:hm(zt);return;case 19:hm(zt);return;case 3:kr&&Ht!==null&&Ht.memoizedState.isDehydrated&&Co(zt.stateNode.containerInfo);break;case 22:case 23:return}e:if(Er){switch(zt.tag){case 1:case 5:case 6:break e;case 3:case 4:zt=zt.stateNode,Us(zt.containerInfo,zt.pendingChildren);break e}throw Error(Ct(163))}}function hm(Ht){var zt=Ht.updateQueue;if(zt!==null){Ht.updateQueue=null;var gn=Ht.stateNode;gn===null&&(gn=Ht.stateNode=new Zm),zt.forEach(function(yn){var $n=gS.bind(null,Ht,yn);gn.has(yn)||(gn.add(yn),yn.then($n,$n))})}}function vy(Ht,zt){for(to=zt;to!==null;){zt=to;var gn=zt.deletions;if(gn!==null)for(var yn=0;yn<gn.length;yn++){var $n=gn[yn];try{var Cn=Ht;_i?dv(Cn,$n,zt):cv(Cn,$n,zt);var Yn=$n.alternate;Yn!==null&&(Yn.return=null),$n.return=null}catch(po){Sl($n,zt,po)}}if(gn=zt.child,zt.subtreeFlags&12854&&gn!==null)gn.return=zt,to=gn;else for(;to!==null;){zt=to;try{var cr=zt.flags;if(cr&32&&_i&&Zn(zt.stateNode),cr&512){var xr=zt.alternate;if(xr!==null){var zr=xr.ref;zr!==null&&(typeof zr=="function"?zr(null):zr.current=null)}}if(cr&8192)switch(zt.tag){case 13:if(zt.memoizedState!==null){var ao=zt.alternate;(ao===null||ao.memoizedState===null)&&(iO=Ms())}break;case 22:var ko=zt.memoizedState!==null,bo=zt.alternate,os=bo!==null&&bo.memoizedState!==null;if(gn=zt,_i){e:if(yn=gn,$n=ko,Cn=null,_i)for(var yo=yn;;){if(yo.tag===5){if(Cn===null){Cn=yo;var Fs=yo.stateNode;$n?hr(Fs):dr(yo.stateNode,yo.memoizedProps)}}else if(yo.tag===6){if(Cn===null){var Is=yo.stateNode;$n?Gn(Is):Br(Is,yo.memoizedProps)}}else if((yo.tag!==22&&yo.tag!==23||yo.memoizedState===null||yo===yn)&&yo.child!==null){yo.child.return=yo,yo=yo.child;continue}if(yo===yn)break;for(;yo.sibling===null;){if(yo.return===null||yo.return===yn)break e;Cn===yo&&(Cn=null),yo=yo.return}Cn===yo&&(Cn=null),yo.sibling.return=yo.return,yo=yo.sibling}}if(ko&&!os&&gn.mode&1){to=gn;for(var _r=gn.child;_r!==null;){for(gn=to=_r;to!==null;){yn=to;var ur=yn.child;switch(yn.tag){case 0:case 11:case 14:case 15:ip(4,yn,yn.return);break;case 1:cm(yn,yn.return);var br=yn.stateNode;if(typeof br.componentWillUnmount=="function"){var Xr=yn.return;try{br.props=yn.memoizedProps,br.state=yn.memoizedState,br.componentWillUnmount()}catch(po){Sl(yn,Xr,po)}}break;case 5:cm(yn,yn.return);break;case 22:if(yn.memoizedState!==null){$y(gn);continue}}ur!==null?(ur.return=yn,to=ur):$y(gn)}_r=_r.sibling}}}switch(cr&4102){case 2:hv(zt),zt.flags&=-3;break;case 6:hv(zt),zt.flags&=-3,Km(zt.alternate,zt);break;case 4096:zt.flags&=-4097;break;case 4100:zt.flags&=-4097,Km(zt.alternate,zt);break;case 4:Km(zt.alternate,zt)}}catch(po){Sl(zt,zt.return,po)}if(gn=zt.sibling,gn!==null){gn.return=zt.return,to=gn;break}to=zt.return}}}function fv(Ht,zt,gn){to=Ht,by(Ht)}function by(Ht,zt,gn){for(var yn=(Ht.mode&1)!==0;to!==null;){var $n=to,Cn=$n.child;if($n.tag===22&&yn){var Yn=$n.memoizedState!==null||Ym;if(!Yn){var cr=$n.alternate,xr=cr!==null&&cr.memoizedState!==null||yu;cr=Ym;var zr=yu;if(Ym=Yn,(yu=xr)&&!zr)for(to=$n;to!==null;)Yn=to,xr=Yn.child,Yn.tag===22&&Yn.memoizedState!==null?Ty($n):xr!==null?(xr.return=Yn,to=xr):Ty($n);for(;Cn!==null;)to=Cn,by(Cn),Cn=Cn.sibling;to=$n,Ym=cr,yu=zr}Sy(Ht)}else $n.subtreeFlags&8772&&Cn!==null?(Cn.return=$n,to=Cn):Sy(Ht)}}function Sy(Ht){for(;to!==null;){var zt=to;if(zt.flags&8772){var gn=zt.alternate;try{if(zt.flags&8772)switch(zt.tag){case 0:case 11:case 15:yu||op(5,zt);break;case 1:var yn=zt.stateNode;if(zt.flags&4&&!yu)if(gn===null)yn.componentDidMount();else{var $n=zt.elementType===zt.type?gn.memoizedProps:fu(zt.type,gn.memoizedProps);yn.componentDidUpdate($n,gn.memoizedState,yn.__reactInternalSnapshotBeforeUpdate)}var Cn=zt.updateQueue;Cn!==null&&M_(zt,Cn,yn);break;case 3:var Yn=zt.updateQueue;if(Yn!==null){if(gn=null,zt.child!==null)switch(zt.child.tag){case 5:gn=zn(zt.child.stateNode);break;case 1:gn=zt.child.stateNode}M_(zt,Yn,gn)}break;case 5:var cr=zt.stateNode;gn===null&&zt.flags&4&&lo(cr,zt.type,zt.memoizedProps,zt);break;case 6:break;case 4:break;case 12:break;case 13:if(kr&&zt.memoizedState===null){var xr=zt.alternate;if(xr!==null){var zr=xr.memoizedState;if(zr!==null){var ao=zr.dehydrated;ao!==null&&Gr(ao)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(Ct(163))}yu||zt.flags&512&&Oy(zt)}catch(ko){Sl(zt,zt.return,ko)}}if(zt===Ht){to=null;break}if(gn=zt.sibling,gn!==null){gn.return=zt.return,to=gn;break}to=zt.return}}function $y(Ht){for(;to!==null;){var zt=to;if(zt===Ht){to=null;break}var gn=zt.sibling;if(gn!==null){gn.return=zt.return,to=gn;break}to=zt.return}}function Ty(Ht){for(;to!==null;){var zt=to;try{switch(zt.tag){case 0:case 11:case 15:var gn=zt.return;try{op(4,zt)}catch(xr){Sl(zt,gn,xr)}break;case 1:var yn=zt.stateNode;if(typeof yn.componentDidMount=="function"){var $n=zt.return;try{yn.componentDidMount()}catch(xr){Sl(zt,$n,xr)}}var Cn=zt.return;try{Oy(zt)}catch(xr){Sl(zt,Cn,xr)}break;case 5:var Yn=zt.return;try{Oy(zt)}catch(xr){Sl(zt,Yn,xr)}}}catch(xr){Sl(zt,zt.return,xr)}if(zt===Ht){to=null;break}var cr=zt.sibling;if(cr!==null){cr.return=zt.return,to=cr;break}to=zt.return}}var Jm=0,_g=1,e_=2,Hu=3,q_=4;if(typeof Symbol=="function"&&Symbol.for){var nu=Symbol.for;Jm=nu("selector.component"),_g=nu("selector.has_pseudo_class"),e_=nu("selector.role"),Hu=nu("selector.test_id"),q_=nu("selector.text")}function t_(Ht){var zt=Qr(Ht);if(zt!=null){if(typeof zt.memoizedProps["data-testname"]!="string")throw Error(Ct(364));return zt}if(Ht=Wo(Ht),Ht===null)throw Error(Ct(362));return Ht.stateNode.current}function K_(Ht,zt){switch(zt.$$typeof){case Jm:if(Ht.type===zt.value)return!0;break;case _g:e:{zt=zt.value,Ht=[Ht,0];for(var gn=0;gn<Ht.length;){var yn=Ht[gn++],$n=Ht[gn++],Cn=zt[$n];if(yn.tag!==5||!rr(yn)){for(;Cn!=null&&K_(yn,Cn);)$n++,Cn=zt[$n];if($n===zt.length){zt=!0;break e}else for(yn=yn.child;yn!==null;)Ht.push(yn,$n),yn=yn.sibling}}zt=!1}return zt;case e_:if(Ht.tag===5&&yr(Ht.stateNode,zt.value))return!0;break;case q_:if((Ht.tag===5||Ht.tag===6)&&(Ht=Un(Ht),Ht!==null&&0<=Ht.indexOf(zt.value)))return!0;break;case Hu:if(Ht.tag===5&&(Ht=Ht.memoizedProps["data-testname"],typeof Ht=="string"&&Ht.toLowerCase()===zt.value.toLowerCase()))return!0;break;default:throw Error(Ct(365))}return!1}function J_(Ht){switch(Ht.$$typeof){case Jm:return"<"+(An(Ht.value)||"Unknown")+">";case _g:return":has("+(J_(Ht)||"")+")";case e_:return'[role="'+Ht.value+'"]';case q_:return'"'+Ht.value+'"';case Hu:return'[data-testname="'+Ht.value+'"]';default:throw Error(Ct(365))}}function pv(Ht,zt){var gn=[];Ht=[Ht,0];for(var yn=0;yn<Ht.length;){var $n=Ht[yn++],Cn=Ht[yn++],Yn=zt[Cn];if($n.tag!==5||!rr($n)){for(;Yn!=null&&K_($n,Yn);)Cn++,Yn=zt[Cn];if(Cn===zt.length)gn.push($n);else for($n=$n.child;$n!==null;)Ht.push($n,Cn),$n=$n.sibling}}return gn}function eO(Ht,zt){if(!Po)throw Error(Ct(363));Ht=t_(Ht),Ht=pv(Ht,zt),zt=[],Ht=Array.from(Ht);for(var gn=0;gn<Ht.length;){var yn=Ht[gn++];if(yn.tag===5)rr(yn)||zt.push(yn.stateNode);else for(yn=yn.child;yn!==null;)Ht.push(yn),yn=yn.sibling}return zt}var dS=Math.ceil,dm=Rt.ReactCurrentDispatcher,tO=Rt.ReactCurrentOwner,bs=Rt.ReactCurrentBatchConfig,Uo=0,Es=null,As=null,Ws=0,Cl=0,Qu=hs(0),Ps=0,zu=null,fm=0,nO=0,rO=0,pm=null,yl=null,iO=0,n_=1/0;function Lp(){n_=Ms()+500}var oO=!1,Ey=null,sp=null,mm=!1,Pu=null,gm=0,Dp=0,_m=null,r_=-1,sO=0;function Hs(){return Uo&6?Ms():r_!==-1?r_:r_=Ms()}function ap(Ht){return Ht.mode&1?Uo&2&&Ws!==0?Ws&-Ws:ga.transition!==null?(sO===0&&(Ht=T_,T_<<=1,!(T_&4194240)&&(T_=64),sO=Ht),sO):(Ht=Ho,Ht!==0?Ht:jr()):1}function ru(Ht,zt,gn){if(50<Dp)throw Dp=0,_m=null,Error(Ct(185));var yn=aO(Ht,zt);return yn===null?null:($p(yn,zt,gn),(!(Uo&2)||yn!==Es)&&(yn===Es&&(!(Uo&2)&&(nO|=zt),Ps===4&&ju(yn,Ws)),Al(yn,gn),zt===1&&Uo===0&&!(Ht.mode&1)&&(Lp(),A_&&xu())),yn)}function aO(Ht,zt){Ht.lanes|=zt;var gn=Ht.alternate;for(gn!==null&&(gn.lanes|=zt),gn=Ht,Ht=Ht.return;Ht!==null;)Ht.childLanes|=zt,gn=Ht.alternate,gn!==null&&(gn.childLanes|=zt),gn=Ht,Ht=Ht.return;return gn.tag===3?gn.stateNode:null}function Al(Ht,zt){var gn=Ht.callbackNode;BO(Ht,zt);var yn=Am(Ht,Ht===Es?Ws:0);if(yn===0)gn!==null&&I0(gn),Ht.callbackNode=null,Ht.callbackPriority=0;else if(zt=yn&-yn,Ht.callbackPriority!==zt){if(gn!=null&&I0(gn),zt===1)Ht.tag===0?Zl(Cy.bind(null,Ht)):UO(Cy.bind(null,Ht)),uo?ho(function(){Uo===0&&xu()}):qp(Ll,xu),gn=null;else{switch(Im(yn)){case 1:gn=Ll;break;case 4:gn=w_;break;case 16:gn=C_;break;case 536870912:gn=GO;break;default:gn=C_}gn=vv(gn,mv.bind(null,Ht))}Ht.callbackPriority=zt,Ht.callbackNode=gn}}function mv(Ht,zt){if(r_=-1,sO=0,Uo&6)throw Error(Ct(327));var gn=Ht.callbackNode;if(up()&&Ht.callbackNode!==gn)return null;var yn=Am(Ht,Ht===Es?Ws:0);if(yn===0)return null;if(yn&30||yn&Ht.expiredLanes||zt)zt=Np(Ht,yn);else{zt=yn;var $n=Uo;Uo|=2;var Cn=Ry();(Es!==Ht||Ws!==zt)&&(Lp(),lp(Ht,zt));do try{fS();break}catch(cr){Iy(Ht,cr)}while(1);WO(),dm.current=Cn,Uo=$n,As!==null?zt=0:(Es=null,Ws=0,zt=Ps)}if(zt!==0){if(zt===2&&($n=Sp(Ht),$n!==0&&(yn=$n,zt=xy(Ht,$n))),zt===1)throw gn=zu,lp(Ht,0),ju(Ht,yn),Al(Ht,Ms()),gn;if(zt===6)ju(Ht,yn);else{if($n=Ht.current.alternate,!(yn&30)&&!gv($n)&&(zt=Np(Ht,yn),zt===2&&(Cn=Sp(Ht),Cn!==0&&(yn=Cn,zt=xy(Ht,Cn))),zt===1))throw gn=zu,lp(Ht,0),ju(Ht,yn),Al(Ht,Ms()),gn;switch(Ht.finishedWork=$n,Ht.finishedLanes=yn,zt){case 0:case 1:throw Error(Ct(345));case 2:cp(Ht,yl);break;case 3:if(ju(Ht,yn),(yn&130023424)===yn&&(zt=iO+500-Ms(),10<zt)){if(Am(Ht,0)!==0)break;if($n=Ht.suspendedLanes,($n&yn)!==yn){Hs(),Ht.pingedLanes|=Ht.suspendedLanes&$n;break}Ht.timeoutHandle=Sr(cp.bind(null,Ht,yl),zt);break}cp(Ht,yl);break;case 4:if(ju(Ht,yn),(yn&4194240)===yn)break;for(zt=Ht.eventTimes,$n=-1;0<yn;){var Yn=31-uu(yn);Cn=1<<Yn,Yn=zt[Yn],Yn>$n&&($n=Yn),yn&=~Cn}if(yn=$n,yn=Ms()-yn,yn=(120>yn?120:480>yn?480:1080>yn?1080:1920>yn?1920:3e3>yn?3e3:4320>yn?4320:1960*dS(yn/1960))-yn,10<yn){Ht.timeoutHandle=Sr(cp.bind(null,Ht,yl),yn);break}cp(Ht,yl);break;case 5:cp(Ht,yl);break;default:throw Error(Ct(329))}}}return Al(Ht,Ms()),Ht.callbackNode===gn?mv.bind(null,Ht):null}function xy(Ht,zt){var gn=pm;return Ht.current.memoizedState.isDehydrated&&(lp(Ht,zt).flags|=256),Ht=Np(Ht,zt),Ht!==2&&(zt=yl,yl=gn,zt!==null&&wy(zt)),Ht}function wy(Ht){yl===null?yl=Ht:yl.push.apply(yl,Ht)}function gv(Ht){for(var zt=Ht;;){if(zt.flags&16384){var gn=zt.updateQueue;if(gn!==null&&(gn=gn.stores,gn!==null))for(var yn=0;yn<gn.length;yn++){var $n=gn[yn],Cn=$n.getSnapshot;$n=$n.value;try{if(!Dl(Cn(),$n))return!1}catch{return!1}}}if(gn=zt.child,zt.subtreeFlags&16384&&gn!==null)gn.return=zt,zt=gn;else{if(zt===Ht)break;for(;zt.sibling===null;){if(zt.return===null||zt.return===Ht)return!0;zt=zt.return}zt.sibling.return=zt.return,zt=zt.sibling}}return!0}function ju(Ht,zt){for(zt&=~rO,zt&=~nO,Ht.suspendedLanes|=zt,Ht.pingedLanes&=~zt,Ht=Ht.expirationTimes;0<zt;){var gn=31-uu(zt),yn=1<<gn;Ht[gn]=-1,zt&=~yn}}function Cy(Ht){if(Uo&6)throw Error(Ct(327));up();var zt=Am(Ht,0);if(!(zt&1))return Al(Ht,Ms()),null;var gn=Np(Ht,zt);if(Ht.tag!==0&&gn===2){var yn=Sp(Ht);yn!==0&&(zt=yn,gn=xy(Ht,yn))}if(gn===1)throw gn=zu,lp(Ht,0),ju(Ht,zt),Al(Ht,Ms()),gn;if(gn===6)throw Error(Ct(345));return Ht.finishedWork=Ht.current.alternate,Ht.finishedLanes=zt,cp(Ht,yl),Al(Ht,Ms()),null}function Ay(Ht){Pu!==null&&Pu.tag===0&&!(Uo&6)&&up();var zt=Uo;Uo|=1;var gn=bs.transition,yn=Ho;try{if(bs.transition=null,Ho=1,Ht)return Ht()}finally{Ho=yn,bs.transition=gn,Uo=zt,!(Uo&6)&&xu()}}function lO(){Cl=Qu.current,Wr(Qu)}function lp(Ht,zt){Ht.finishedWork=null,Ht.finishedLanes=0;var gn=Ht.timeoutHandle;if(gn!==Jr&&(Ht.timeoutHandle=Jr,Vr(gn)),As!==null)for(gn=As.return;gn!==null;){var yn=gn;switch(qO(yn),yn.tag){case 1:yn=yn.type.childContextTypes,yn!=null&&wm();break;case 3:Rp(),Wr(js),Wr(Cs),Gm();break;case 5:ey(yn);break;case 4:Rp();break;case 13:Wr(gs);break;case 19:Wr(gs);break;case 10:HO(yn.type._context);break;case 22:case 23:lO()}gn=gn.return}if(Es=Ht,As=Ht=hp(Ht.current,null),Ws=Cl=zt,Ps=0,zu=null,rO=nO=fm=0,yl=pm=null,Jl!==null){for(zt=0;zt<Jl.length;zt++)if(gn=Jl[zt],yn=gn.interleaved,yn!==null){gn.interleaved=null;var $n=yn.next,Cn=gn.pending;if(Cn!==null){var Yn=Cn.next;Cn.next=$n,yn.next=Yn}gn.pending=yn}Jl=null}return Ht}function Iy(Ht,zt){do{var gn=As;try{if(WO(),D_.current=eo,Um){for(var yn=vs.memoizedState;yn!==null;){var $n=yn.queue;$n!==null&&($n.pending=null),yn=yn.next}Um=!1}if(ns=0,Bs=Xs=vs=null,Vm=!1,Wm=0,tO.current=null,gn===null||gn.return===null){Ps=1,zu=zt,As=null;break}e:{var Cn=Ht,Yn=gn.return,cr=gn,xr=zt;if(zt=Ws,cr.flags|=32768,xr!==null&&typeof xr=="object"&&typeof xr.then=="function"){var zr=xr,ao=cr,ko=ao.tag;if(!(ao.mode&1)&&(ko===0||ko===11||ko===15)){var bo=ao.alternate;bo?(ao.updateQueue=bo.updateQueue,ao.memoizedState=bo.memoizedState,ao.lanes=bo.lanes):(ao.updateQueue=null,ao.memoizedState=null)}var os=X0(Yn);if(os!==null){os.flags&=-257,Y0(os,Yn,cr,Cn,zt),os.mode&1&&j0(Cn,zr,zt),zt=os,xr=zr;var yo=zt.updateQueue;if(yo===null){var Fs=new Set;Fs.add(xr),zt.updateQueue=Fs}else yo.add(xr);break e}else{if(!(zt&1)){j0(Cn,zr,zt),i_();break e}xr=Error(Ct(426))}}else if(ds&&cr.mode&1){var Is=X0(Yn);if(Is!==null){!(Is.flags&65536)&&(Is.flags|=256),Y0(Is,Yn,cr,Cn,zt),Dm(xr);break e}}Cn=xr,Ps!==4&&(Ps=2),pm===null?pm=[Cn]:pm.push(Cn),xr=ay(xr,cr),cr=Yn;do{switch(cr.tag){case 3:cr.flags|=65536,zt&=-zt,cr.lanes|=zt;var _r=Q0(cr,xr,zt);zO(cr,_r);break e;case 1:Cn=xr;var ur=cr.type,br=cr.stateNode;if(!(cr.flags&128)&&(typeof ur.getDerivedStateFromError=="function"||br!==null&&typeof br.componentDidCatch=="function"&&(sp===null||!sp.has(br)))){cr.flags|=65536,zt&=-zt,cr.lanes|=zt;var Xr=z0(cr,Cn,zt);zO(cr,Xr);break e}}cr=cr.return}while(cr!==null)}My(gn)}catch(po){zt=po,As===gn&&gn!==null&&(As=gn=gn.return);continue}break}while(1)}function Ry(){var Ht=dm.current;return dm.current=eo,Ht===null?eo:Ht}function i_(){(Ps===0||Ps===3||Ps===2)&&(Ps=4),Es===null||!(fm&268435455)&&!(nO&268435455)||ju(Es,Ws)}function Np(Ht,zt){var gn=Uo;Uo|=2;var yn=Ry();Es===Ht&&Ws===zt||lp(Ht,zt);do try{_v();break}catch($n){Iy(Ht,$n)}while(1);if(WO(),Uo=gn,dm.current=yn,As!==null)throw Error(Ct(261));return Es=null,Ws=0,Ps}function _v(){for(;As!==null;)ky(As)}function fS(){for(;As!==null&&!FO();)ky(As)}function ky(Ht){var zt=yv(Ht.alternate,Ht,Cl);Ht.memoizedProps=Ht.pendingProps,zt===null?My(Ht):As=zt,tO.current=null}function My(Ht){var zt=Ht;do{var gn=zt.alternate;if(Ht=zt.return,zt.flags&32768){if(gn=ov(gn,zt),gn!==null){gn.flags&=32767,As=gn;return}if(Ht!==null)Ht.flags|=32768,Ht.subtreeFlags=0,Ht.deletions=null;else{Ps=6,As=null;return}}else if(gn=uS(gn,zt,Cl),gn!==null){As=gn;return}if(zt=zt.sibling,zt!==null){As=zt;return}As=zt=Ht}while(zt!==null);Ps===0&&(Ps=5)}function cp(Ht,zt){var gn=Ho,yn=bs.transition;try{bs.transition=null,Ho=1,Ov(Ht,zt,gn)}finally{bs.transition=yn,Ho=gn}return null}function Ov(Ht,zt,gn){do up();while(Pu!==null);if(Uo&6)throw Error(Ct(327));var yn=Ht.finishedWork,$n=Ht.finishedLanes;if(yn===null)return null;if(Ht.finishedWork=null,Ht.finishedLanes=0,yn===Ht.current)throw Error(Ct(177));Ht.callbackNode=null,Ht.callbackPriority=0;var Cn=yn.lanes|yn.childLanes;if(iS(Ht,Cn),Ht===Es&&(As=Es=null,Ws=0),!(yn.subtreeFlags&2064)&&!(yn.flags&2064)||mm||(mm=!0,vv(C_,function(){return up(),null})),Cn=(yn.flags&15990)!==0,yn.subtreeFlags&15990||Cn){Cn=bs.transition,bs.transition=null;var Yn=Ho;Ho=1;var cr=Uo;Uo|=4,tO.current=null,av(Ht,yn),vy(Ht,yn),Wn(Ht.containerInfo),Ht.current=yn,fv(yn),hu(),Uo=cr,Ho=Yn,bs.transition=Cn}else Ht.current=yn;if(mm&&(mm=!1,Pu=Ht,gm=$n),Cn=Ht.pendingLanes,Cn===0&&(sp=null),oS(yn.stateNode),Al(Ht,Ms()),zt!==null)for(gn=Ht.onRecoverableError,yn=0;yn<zt.length;yn++)gn(zt[yn]);if(oO)throw oO=!1,Ht=Ey,Ey=null,Ht;return gm&1&&Ht.tag!==0&&up(),Cn=Ht.pendingLanes,Cn&1?Ht===_m?Dp++:(Dp=0,_m=Ht):Dp=0,xu(),null}function up(){if(Pu!==null){var Ht=Im(gm),zt=bs.transition,gn=Ho;try{if(bs.transition=null,Ho=16>Ht?16:Ht,Pu===null)var yn=!1;else{if(Ht=Pu,Pu=null,gm=0,Uo&6)throw Error(Ct(331));var $n=Uo;for(Uo|=4,to=Ht.current;to!==null;){var Cn=to,Yn=Cn.child;if(to.flags&16){var cr=Cn.deletions;if(cr!==null){for(var xr=0;xr<cr.length;xr++){var zr=cr[xr];for(to=zr;to!==null;){var ao=to;switch(ao.tag){case 0:case 11:case 15:ip(8,ao,Cn)}var ko=ao.child;if(ko!==null)ko.return=ao,to=ko;else for(;to!==null;){ao=to;var bo=ao.sibling,os=ao.return;if(uv(ao),ao===zr){to=null;break}if(bo!==null){bo.return=os,to=bo;break}to=os}}}var yo=Cn.alternate;if(yo!==null){var Fs=yo.child;if(Fs!==null){yo.child=null;do{var Is=Fs.sibling;Fs.sibling=null,Fs=Is}while(Fs!==null)}}to=Cn}}if(Cn.subtreeFlags&2064&&Yn!==null)Yn.return=Cn,to=Yn;else e:for(;to!==null;){if(Cn=to,Cn.flags&2048)switch(Cn.tag){case 0:case 11:case 15:ip(9,Cn,Cn.return)}var _r=Cn.sibling;if(_r!==null){_r.return=Cn.return,to=_r;break e}to=Cn.return}}var ur=Ht.current;for(to=ur;to!==null;){Yn=to;var br=Yn.child;if(Yn.subtreeFlags&2064&&br!==null)br.return=Yn,to=br;else e:for(Yn=ur;to!==null;){if(cr=to,cr.flags&2048)try{switch(cr.tag){case 0:case 11:case 15:op(9,cr)}}catch(po){Sl(cr,cr.return,po)}if(cr===Yn){to=null;break e}var Xr=cr.sibling;if(Xr!==null){Xr.return=cr.return,to=Xr;break e}to=cr.return}}if(Uo=$n,xu(),du&&typeof du.onPostCommitFiberRoot=="function")try{du.onPostCommitFiberRoot(Kp,Ht)}catch{}yn=!0}return yn}finally{Ho=gn,bs.transition=zt}}return!1}function Py(Ht,zt,gn){zt=ay(gn,zt),zt=Q0(Ht,zt,1),Uu(Ht,zt),zt=Hs(),Ht=aO(Ht,1),Ht!==null&&($p(Ht,1,zt),Al(Ht,zt))}function Sl(Ht,zt,gn){if(Ht.tag===3)Py(Ht,Ht,gn);else for(;zt!==null;){if(zt.tag===3){Py(zt,Ht,gn);break}else if(zt.tag===1){var yn=zt.stateNode;if(typeof zt.type.getDerivedStateFromError=="function"||typeof yn.componentDidCatch=="function"&&(sp===null||!sp.has(yn))){Ht=ay(gn,Ht),Ht=z0(zt,Ht,1),Uu(zt,Ht),Ht=Hs(),zt=aO(zt,1),zt!==null&&($p(zt,1,Ht),Al(zt,Ht));break}}zt=zt.return}}function pS(Ht,zt,gn){var yn=Ht.pingCache;yn!==null&&yn.delete(zt),zt=Hs(),Ht.pingedLanes|=Ht.suspendedLanes&gn,Es===Ht&&(Ws&gn)===gn&&(Ps===4||Ps===3&&(Ws&130023424)===Ws&&500>Ms()-iO?lp(Ht,0):rO|=gn),Al(Ht,zt)}function Ly(Ht,zt){zt===0&&(Ht.mode&1?(zt=Yp,Yp<<=1,!(Yp&130023424)&&(Yp=4194304)):zt=1);var gn=Hs();Ht=aO(Ht,zt),Ht!==null&&($p(Ht,zt,gn),Al(Ht,gn))}function mS(Ht){var zt=Ht.memoizedState,gn=0;zt!==null&&(gn=zt.retryLane),Ly(Ht,gn)}function gS(Ht,zt){var gn=0;switch(Ht.tag){case 13:var yn=Ht.stateNode,$n=Ht.memoizedState;$n!==null&&(gn=$n.retryLane);break;case 19:yn=Ht.stateNode;break;default:throw Error(Ct(314))}yn!==null&&yn.delete(zt),Ly(Ht,gn)}var yv;yv=function(Ht,zt,gn){if(Ht!==null)if(Ht.memoizedProps!==zt.pendingProps||js.current)Vl=!0;else{if(!(Ht.lanes&gn)&&!(zt.flags&128))return Vl=!1,iv(Ht,zt,gn);Vl=!!(Ht.flags&131072)}else Vl=!1,ds&&zt.flags&1048576&&ZO(zt,Ep,zt.index);switch(zt.lanes=0,zt.tag){case 2:var yn=zt.type;Ht!==null&&(Ht.alternate=null,zt.alternate=null,zt.flags|=2),Ht=zt.pendingProps;var $n=Pl(zt,Cs.current);em(zt,gn),$n=ny(null,zt,yn,Ht,$n,gn);var Cn=sm();return zt.flags|=1,typeof $n=="object"&&$n!==null&&typeof $n.render=="function"&&$n.$$typeof===void 0?(zt.tag=1,zt.memoizedState=null,zt.updateQueue=null,na(yn)?(Cn=!0,Xp(zt)):Cn=!1,zt.memoizedState=$n.state!==null&&$n.state!==void 0?$n.state:null,QO(zt),$n.updater=Pm,zt.stateNode=$n,$n._reactInternals=zt,YO(zt,yn,Ht,gn),zt=dy(null,zt,yn,!0,Cn,gn)):(zt.tag=0,ds&&Cn&&P_(zt),Ol(null,zt,$n,gn),zt=zt.child),zt;case 16:yn=zt.elementType;e:{switch(Ht!==null&&(Ht.alternate=null,zt.alternate=null,zt.flags|=2),Ht=zt.pendingProps,$n=yn._init,yn=$n(yn._payload),zt.type=yn,$n=zt.tag=OS(yn),Ht=fu(yn,Ht),$n){case 0:zt=hy(null,zt,yn,Ht,gn);break e;case 1:zt=J0(null,zt,yn,Ht,gn);break e;case 11:zt=cy(null,zt,yn,Ht,gn);break e;case 14:zt=rp(null,zt,yn,fu(yn.type,Ht),gn);break e}throw Error(Ct(306,yn,""))}return zt;case 0:return yn=zt.type,$n=zt.pendingProps,$n=zt.elementType===yn?$n:fu(yn,$n),hy(Ht,zt,yn,$n,gn);case 1:return yn=zt.type,$n=zt.pendingProps,$n=zt.elementType===yn?$n:fu(yn,$n),J0(Ht,zt,yn,$n,gn);case 3:e:{if(ev(zt),Ht===null)throw Error(Ct(387));yn=zt.pendingProps,Cn=zt.memoizedState,$n=Cn.element,M0(Ht,zt),k_(zt,yn,null,gn);var Yn=zt.memoizedState;if(yn=Yn.element,kr&&Cn.isDehydrated)if(Cn={element:yn,isDehydrated:!1,cache:Yn.cache,transitions:Yn.transitions},zt.updateQueue.baseState=Cn,zt.memoizedState=Cn,zt.flags&256){$n=Error(Ct(423)),zt=tv(Ht,zt,yn,gn,$n);break e}else if(yn!==$n){$n=Error(Ct(424)),zt=tv(Ht,zt,yn,gn,$n);break e}else for(kr&&(Fl=Rr(zt.stateNode.containerInfo),Bl=zt,ds=!0,pu=null,tm=!1),gn=Ap(zt,null,yn,gn),zt.child=gn;gn;)gn.flags=gn.flags&-3|4096,gn=gn.sibling;else{if(mu(),yn===$n){zt=Mu(Ht,zt,gn);break e}Ol(Ht,zt,yn,gn)}zt=zt.child}return zt;case 5:return JO(zt),Ht===null&&nm(zt),yn=zt.type,$n=zt.pendingProps,Cn=Ht!==null?Ht.memoizedProps:null,Yn=$n.children,tr(yn,$n)?Yn=null:Cn!==null&&tr(yn,Cn)&&(zt.flags|=32),K0(Ht,zt),Ol(Ht,zt,Yn,gn),zt.child;case 6:return Ht===null&&nm(zt),null;case 13:return fy(Ht,zt,gn);case 4:return Fm(zt,zt.stateNode.containerInfo),yn=zt.pendingProps,Ht===null?zt.child=gu(zt,null,yn,gn):Ol(Ht,zt,yn,gn),zt.child;case 11:return yn=zt.type,$n=zt.pendingProps,$n=zt.elementType===yn?$n:fu(yn,$n),cy(Ht,zt,yn,$n,gn);case 7:return Ol(Ht,zt,zt.pendingProps,gn),zt.child;case 8:return Ol(Ht,zt,zt.pendingProps.children,gn),zt.child;case 12:return Ol(Ht,zt,zt.pendingProps.children,gn),zt.child;case 10:e:{if(yn=zt.type._context,$n=zt.pendingProps,Cn=zt.memoizedProps,Yn=$n.value,k0(zt,yn,Yn),Cn!==null)if(Dl(Cn.value,Yn)){if(Cn.children===$n.children&&!js.current){zt=Mu(Ht,zt,gn);break e}}else for(Cn=zt.child,Cn!==null&&(Cn.return=zt);Cn!==null;){var cr=Cn.dependencies;if(cr!==null){Yn=Cn.child;for(var xr=cr.firstContext;xr!==null;){if(xr.context===yn){if(Cn.tag===1){xr=_c(-1,gn&-gn),xr.tag=2;var zr=Cn.updateQueue;if(zr!==null){zr=zr.shared;var ao=zr.pending;ao===null?xr.next=xr:(xr.next=ao.next,ao.next=xr),zr.pending=xr}}Cn.lanes|=gn,xr=Cn.alternate,xr!==null&&(xr.lanes|=gn),R_(Cn.return,gn,zt),cr.lanes|=gn;break}xr=xr.next}}else if(Cn.tag===10)Yn=Cn.type===zt.type?null:Cn.child;else if(Cn.tag===18){if(Yn=Cn.return,Yn===null)throw Error(Ct(341));Yn.lanes|=gn,cr=Yn.alternate,cr!==null&&(cr.lanes|=gn),R_(Yn,gn,zt),Yn=Cn.sibling}else Yn=Cn.child;if(Yn!==null)Yn.return=Cn;else for(Yn=Cn;Yn!==null;){if(Yn===zt){Yn=null;break}if(Cn=Yn.sibling,Cn!==null){Cn.return=Yn.return,Yn=Cn;break}Yn=Yn.return}Cn=Yn}Ol(Ht,zt,$n.children,gn),zt=zt.child}return zt;case 9:return $n=zt.type,yn=zt.pendingProps.children,em(zt,gn),$n=Kl($n),yn=yn($n),zt.flags|=1,Ol(Ht,zt,yn,gn),zt.child;case 14:return yn=zt.type,$n=fu(yn,zt.pendingProps),$n=fu(yn.type,$n),rp(Ht,zt,yn,$n,gn);case 15:return H_(Ht,zt,zt.type,zt.pendingProps,gn);case 17:return yn=zt.type,$n=zt.pendingProps,$n=zt.elementType===yn?$n:fu(yn,$n),Ht!==null&&(Ht.alternate=null,zt.alternate=null,zt.flags|=2),zt.tag=1,na(yn)?(Ht=!0,Xp(zt)):Ht=!1,em(zt,gn),L0(zt,yn,$n),YO(zt,yn,$n,gn),dy(null,zt,yn,!0,Ht,gn);case 19:return gy(Ht,zt,gn);case 22:return uy(Ht,zt,gn)}throw Error(Ct(156,zt.tag))};function vv(Ht,zt){return qp(Ht,zt)}function _S(Ht,zt,gn,yn){this.tag=Ht,this.key=gn,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=zt,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=yn,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function iu(Ht,zt,gn,yn){return new _S(Ht,zt,gn,yn)}function Dy(Ht){return Ht=Ht.prototype,!(!Ht||!Ht.isReactComponent)}function OS(Ht){if(typeof Ht=="function")return Dy(Ht)?1:0;if(Ht!=null){if(Ht=Ht.$$typeof,Ht===ln)return 11;if(Ht===pn)return 14}return 2}function hp(Ht,zt){var gn=Ht.alternate;return gn===null?(gn=iu(Ht.tag,zt,Ht.key,Ht.mode),gn.elementType=Ht.elementType,gn.type=Ht.type,gn.stateNode=Ht.stateNode,gn.alternate=Ht,Ht.alternate=gn):(gn.pendingProps=zt,gn.type=Ht.type,gn.flags=0,gn.subtreeFlags=0,gn.deletions=null),gn.flags=Ht.flags&14680064,gn.childLanes=Ht.childLanes,gn.lanes=Ht.lanes,gn.child=Ht.child,gn.memoizedProps=Ht.memoizedProps,gn.memoizedState=Ht.memoizedState,gn.updateQueue=Ht.updateQueue,zt=Ht.dependencies,gn.dependencies=zt===null?null:{lanes:zt.lanes,firstContext:zt.firstContext},gn.sibling=Ht.sibling,gn.index=Ht.index,gn.ref=Ht.ref,gn}function cO(Ht,zt,gn,yn,$n,Cn){var Yn=2;if(yn=Ht,typeof Ht=="function")Dy(Ht)&&(Yn=1);else if(typeof Ht=="string")Yn=5;else e:switch(Ht){case Bt:return Bp(gn.children,$n,Cn,zt);case Ft:Yn=8,$n|=8;break;case Ut:return Ht=iu(12,gn,zt,$n|2),Ht.elementType=Ut,Ht.lanes=Cn,Ht;case hn:return Ht=iu(13,gn,zt,$n),Ht.elementType=hn,Ht.lanes=Cn,Ht;case dn:return Ht=iu(19,gn,zt,$n),Ht.elementType=dn,Ht.lanes=Cn,Ht;case On:return Oo(gn,$n,Cn,zt);default:if(typeof Ht=="object"&&Ht!==null)switch(Ht.$$typeof){case Zt:Yn=10;break e;case Kt:Yn=9;break e;case ln:Yn=11;break e;case pn:Yn=14;break e;case mn:Yn=16,yn=null;break e}throw Error(Ct(130,Ht==null?Ht:typeof Ht,""))}return zt=iu(Yn,gn,zt,$n),zt.elementType=Ht,zt.type=yn,zt.lanes=Cn,zt}function Bp(Ht,zt,gn,yn){return Ht=iu(7,Ht,yn,zt),Ht.lanes=gn,Ht}function Oo(Ht,zt,gn,yn){return Ht=iu(22,Ht,yn,zt),Ht.elementType=On,Ht.lanes=gn,Ht.stateNode={},Ht}function qs(Ht,zt,gn){return Ht=iu(6,Ht,null,zt),Ht.lanes=gn,Ht}function xs(Ht,zt,gn){return zt=iu(4,Ht.children!==null?Ht.children:[],Ht.key,zt),zt.lanes=gn,zt.stateNode={containerInfo:Ht.containerInfo,pendingChildren:null,implementation:Ht.implementation},zt}function yS(Ht,zt,gn,yn,$n){this.tag=zt,this.containerInfo=Ht,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Jr,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=E_(0),this.expirationTimes=E_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=E_(0),this.identifierPrefix=yn,this.onRecoverableError=$n,kr&&(this.mutableSourceEagerHydrationData=null)}function Ny(Ht,zt,gn,yn,$n,Cn,Yn,cr,xr){return Ht=new yS(Ht,zt,gn,cr,xr),zt===1?(zt=1,Cn===!0&&(zt|=8)):zt=0,Cn=iu(3,null,null,zt),Ht.current=Cn,Cn.stateNode=Ht,Cn.memoizedState={element:yn,isDehydrated:gn,cache:null,transitions:null},QO(Cn),Ht}function o_(Ht){if(!Ht)return ys;Ht=Ht._reactInternals;e:{if(In(Ht)!==Ht||Ht.tag!==1)throw Error(Ct(170));var zt=Ht;do{switch(zt.tag){case 3:zt=zt.stateNode.context;break e;case 1:if(na(zt.type)){zt=zt.stateNode.__reactInternalMemoizedMergedChildContext;break e}}zt=zt.return}while(zt!==null);throw Error(Ct(171))}if(Ht.tag===1){var gn=Ht.type;if(na(gn))return C0(Ht,gn,zt)}return zt}function dp(Ht){var zt=Ht._reactInternals;if(zt===void 0)throw typeof Ht.render=="function"?Error(Ct(188)):(Ht=Object.keys(Ht).join(","),Error(Ct(268,Ht)));return Ht=Bn(zt),Ht===null?null:Ht.stateNode}function s_(Ht,zt){if(Ht=Ht.memoizedState,Ht!==null&&Ht.dehydrated!==null){var gn=Ht.retryLane;Ht.retryLane=gn!==0&&gn<zt?gn:zt}}function $l(Ht,zt){s_(Ht,zt),(Ht=Ht.alternate)&&s_(Ht,zt)}function By(Ht){return Ht=Bn(Ht),Ht===null?null:Ht.stateNode}function bv(){return null}return dt.attemptContinuousHydration=function(Ht){if(Ht.tag===13){var zt=Hs();ru(Ht,134217728,zt),$l(Ht,134217728)}},dt.attemptHydrationAtCurrentPriority=function(Ht){if(Ht.tag===13){var zt=Hs(),gn=ap(Ht);ru(Ht,gn,zt),$l(Ht,gn)}},dt.attemptSynchronousHydration=function(Ht){switch(Ht.tag){case 3:var zt=Ht.stateNode;if(zt.current.memoizedState.isDehydrated){var gn=Zp(zt.pendingLanes);gn!==0&&(x_(zt,gn|1),Al(zt,Ms()),!(Uo&6)&&(Lp(),xu()))}break;case 13:var yn=Hs();Ay(function(){return ru(Ht,1,yn)}),$l(Ht,1)}},dt.batchedUpdates=function(Ht,zt){var gn=Uo;Uo|=1;try{return Ht(zt)}finally{Uo=gn,Uo===0&&(Lp(),A_&&xu())}},dt.createComponentSelector=function(Ht){return{$$typeof:Jm,value:Ht}},dt.createContainer=function(Ht,zt,gn,yn,$n,Cn,Yn){return Ny(Ht,zt,!1,null,gn,yn,$n,Cn,Yn)},dt.createHasPseudoClassSelector=function(Ht){return{$$typeof:_g,value:Ht}},dt.createHydrationContainer=function(Ht,zt,gn,yn,$n,Cn,Yn,cr,xr){return Ht=Ny(gn,yn,!0,Ht,$n,Cn,Yn,cr,xr),Ht.context=o_(null),gn=Ht.current,yn=Hs(),$n=ap(gn),Cn=_c(yn,$n),Cn.callback=zt??null,Uu(gn,Cn),Ht.current.lanes=$n,$p(Ht,$n,yn),Al(Ht,yn),Ht},dt.createPortal=function(Ht,zt,gn){var yn=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Dt,key:yn==null?null:""+yn,children:Ht,containerInfo:zt,implementation:gn}},dt.createRoleSelector=function(Ht){return{$$typeof:e_,value:Ht}},dt.createTestNameSelector=function(Ht){return{$$typeof:Hu,value:Ht}},dt.createTextSelector=function(Ht){return{$$typeof:q_,value:Ht}},dt.deferredUpdates=function(Ht){var zt=Ho,gn=bs.transition;try{return bs.transition=null,Ho=16,Ht()}finally{Ho=zt,bs.transition=gn}},dt.discreteUpdates=function(Ht,zt,gn,yn,$n){var Cn=Ho,Yn=bs.transition;try{return bs.transition=null,Ho=1,Ht(zt,gn,yn,$n)}finally{Ho=Cn,bs.transition=Yn,Uo===0&&Lp()}},dt.findAllNodes=eO,dt.findBoundingRects=function(Ht,zt){if(!Po)throw Error(Ct(363));zt=eO(Ht,zt),Ht=[];for(var gn=0;gn<zt.length;gn++)Ht.push(Xn(zt[gn]));for(zt=Ht.length-1;0<zt;zt--){gn=Ht[zt];for(var yn=gn.x,$n=yn+gn.width,Cn=gn.y,Yn=Cn+gn.height,cr=zt-1;0<=cr;cr--)if(zt!==cr){var xr=Ht[cr],zr=xr.x,ao=zr+xr.width,ko=xr.y,bo=ko+xr.height;if(yn>=zr&&Cn>=ko&&$n<=ao&&Yn<=bo){Ht.splice(zt,1);break}else if(yn!==zr||gn.width!==xr.width||bo<Cn||ko>Yn){if(!(Cn!==ko||gn.height!==xr.height||ao<yn||zr>$n)){zr>yn&&(xr.width+=zr-yn,xr.x=yn),ao<$n&&(xr.width=$n-zr),Ht.splice(zt,1);break}}else{ko>Cn&&(xr.height+=ko-Cn,xr.y=Cn),bo<Yn&&(xr.height=Yn-ko),Ht.splice(zt,1);break}}}return Ht},dt.findHostInstance=dp,dt.findHostInstanceWithNoPortals=function(Ht){return Ht=Dn(Ht),Ht=Ht!==null?jn(Ht):null,Ht===null?null:Ht.stateNode},dt.findHostInstanceWithWarning=function(Ht){return dp(Ht)},dt.flushControlled=function(Ht){var zt=Uo;Uo|=1;var gn=bs.transition,yn=Ho;try{bs.transition=null,Ho=1,Ht()}finally{Ho=yn,bs.transition=gn,Uo=zt,Uo===0&&(Lp(),xu())}},dt.flushPassiveEffects=up,dt.flushSync=Ay,dt.focusWithin=function(Ht,zt){if(!Po)throw Error(Ct(363));for(Ht=t_(Ht),zt=pv(Ht,zt),zt=Array.from(zt),Ht=0;Ht<zt.length;){var gn=zt[Ht++];if(!rr(gn)){if(gn.tag===5&&Ir(gn.stateNode))return!0;for(gn=gn.child;gn!==null;)zt.push(gn),gn=gn.sibling}}return!1},dt.getCurrentUpdatePriority=function(){return Ho},dt.getFindAllNodesFailureDescription=function(Ht,zt){if(!Po)throw Error(Ct(363));var gn=0,yn=[];Ht=[t_(Ht),0];for(var $n=0;$n<Ht.length;){var Cn=Ht[$n++],Yn=Ht[$n++],cr=zt[Yn];if((Cn.tag!==5||!rr(Cn))&&(K_(Cn,cr)&&(yn.push(J_(cr)),Yn++,Yn>gn&&(gn=Yn)),Yn<zt.length))for(Cn=Cn.child;Cn!==null;)Ht.push(Cn,Yn),Cn=Cn.sibling}if(gn<zt.length){for(Ht=[];gn<zt.length;gn++)Ht.push(J_(zt[gn]));return`findAllNodes was able to match part of the selector:
  `+(yn.join(" > ")+`

No matching component was found for:
  `)+Ht.join(" > ")}return null},dt.getPublicRootInstance=function(Ht){if(Ht=Ht.current,!Ht.child)return null;switch(Ht.child.tag){case 5:return zn(Ht.child.stateNode);default:return Ht.child.stateNode}},dt.injectIntoDevTools=function(Ht){if(Ht={bundleType:Ht.bundleType,version:Ht.version,rendererPackageName:Ht.rendererPackageName,rendererConfig:Ht.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rt.ReactCurrentDispatcher,findHostInstanceByFiber:By,findFiberByHostInstance:Ht.findFiberByHostInstance||bv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")Ht=!1;else{var zt=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(zt.isDisabled||!zt.supportsFiber)Ht=!0;else{try{Kp=zt.inject(Ht),du=zt}catch{}Ht=!!zt.checkDCE}}return Ht},dt.isAlreadyRendering=function(){return!1},dt.observeVisibleRects=function(Ht,zt,gn,yn){if(!Po)throw Error(Ct(363));Ht=eO(Ht,zt);var $n=Fr(Ht,gn,yn).disconnect;return{disconnect:function(){$n()}}},dt.registerMutableSourceForHydration=function(Ht,zt){var gn=zt._getVersion;gn=gn(zt._source),Ht.mutableSourceEagerHydrationData==null?Ht.mutableSourceEagerHydrationData=[zt,gn]:Ht.mutableSourceEagerHydrationData.push(zt,gn)},dt.runWithPriority=function(Ht,zt){var gn=Ho;try{return Ho=Ht,zt()}finally{Ho=gn}},dt.shouldError=function(){return null},dt.shouldSuspend=function(){return!1},dt.updateContainer=function(Ht,zt,gn,yn){var $n=zt.current,Cn=Hs(),Yn=ap($n);return gn=o_(gn),zt.context===null?zt.context=gn:zt.pendingContext=gn,zt=_c(Cn,Yn),zt.payload={element:Ht},yn=yn===void 0?null:yn,yn!==null&&(zt.callback=yn),Uu($n,zt),Ht=ru($n,Yn,Cn),Ht!==null&&Mm(Ht,$n,Yn),Yn},dt};reactReconciler.exports=reactReconciler_production_min;var reactReconcilerExports=reactReconciler.exports;const Reconciler=getDefaultExportFromCjs(reactReconcilerExports);var scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(ft){function lt(Ln,Vn){var Wn=Ln.length;Ln.push(Vn);e:for(;0<Wn;){var sr=Wn-1>>>1,Mn=Ln[sr];if(0<Tt(Mn,Vn))Ln[sr]=Vn,Ln[Wn]=Mn,Wn=sr;else break e}}function dt(Ln){return Ln.length===0?null:Ln[0]}function vt(Ln){if(Ln.length===0)return null;var Vn=Ln[0],Wn=Ln.pop();if(Wn!==Vn){Ln[0]=Wn;e:for(var sr=0,Mn=Ln.length,ir=Mn>>>1;sr<ir;){var mr=2*(sr+1)-1,tr=Ln[mr],Dr=mr+1,Sr=Ln[Dr];if(0>Tt(tr,Wn))Dr<Mn&&0>Tt(Sr,tr)?(Ln[sr]=Sr,Ln[Dr]=Wn,sr=Dr):(Ln[sr]=tr,Ln[mr]=Wn,sr=mr);else if(Dr<Mn&&0>Tt(Sr,Wn))Ln[sr]=Sr,Ln[Dr]=Wn,sr=Dr;else break e}}return Vn}function Tt(Ln,Vn){var Wn=Ln.sortIndex-Vn.sortIndex;return Wn!==0?Wn:Ln.id-Vn.id}if(typeof performance=="object"&&typeof performance.now=="function"){var Et=performance;ft.unstable_now=function(){return Et.now()}}else{var Ct=Date,Rt=Ct.now();ft.unstable_now=function(){return Ct.now()-Rt}}var kt=[],Dt=[],Bt=1,Ft=null,Ut=3,Zt=!1,Kt=!1,ln=!1,hn=typeof setTimeout=="function"?setTimeout:null,dn=typeof clearTimeout=="function"?clearTimeout:null,pn=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function mn(Ln){for(var Vn=dt(Dt);Vn!==null;){if(Vn.callback===null)vt(Dt);else if(Vn.startTime<=Ln)vt(Dt),Vn.sortIndex=Vn.expirationTime,lt(kt,Vn);else break;Vn=dt(Dt)}}function On(Ln){if(ln=!1,mn(Ln),!Kt)if(dt(kt)!==null)Kt=!0,zn(bn);else{var Vn=dt(Dt);Vn!==null&&lr(On,Vn.startTime-Ln)}}function bn(Ln,Vn){Kt=!1,ln&&(ln=!1,dn(Tn),Tn=-1),Zt=!0;var Wn=Ut;try{for(mn(Vn),Ft=dt(kt);Ft!==null&&(!(Ft.expirationTime>Vn)||Ln&&!Dn());){var sr=Ft.callback;if(typeof sr=="function"){Ft.callback=null,Ut=Ft.priorityLevel;var Mn=sr(Ft.expirationTime<=Vn);Vn=ft.unstable_now(),typeof Mn=="function"?Ft.callback=Mn:Ft===dt(kt)&&vt(kt),mn(Vn)}else vt(kt);Ft=dt(kt)}if(Ft!==null)var ir=!0;else{var mr=dt(Dt);mr!==null&&lr(On,mr.startTime-Vn),ir=!1}return ir}finally{Ft=null,Ut=Wn,Zt=!1}}var En=!1,An=null,Tn=-1,In=5,Rn=-1;function Dn(){return!(ft.unstable_now()-Rn<In)}function Bn(){if(An!==null){var Ln=ft.unstable_now();Rn=Ln;var Vn=!0;try{Vn=An(!0,Ln)}finally{Vn?Hn():(En=!1,An=null)}}else En=!1}var Hn;if(typeof pn=="function")Hn=function(){pn(Bn)};else if(typeof MessageChannel<"u"){var jn=new MessageChannel,Kn=jn.port2;jn.port1.onmessage=Bn,Hn=function(){Kn.postMessage(null)}}else Hn=function(){hn(Bn,0)};function zn(Ln){An=Ln,En||(En=!0,Hn())}function lr(Ln,Vn){Tn=hn(function(){Ln(ft.unstable_now())},Vn)}ft.unstable_IdlePriority=5,ft.unstable_ImmediatePriority=1,ft.unstable_LowPriority=4,ft.unstable_NormalPriority=3,ft.unstable_Profiling=null,ft.unstable_UserBlockingPriority=2,ft.unstable_cancelCallback=function(Ln){Ln.callback=null},ft.unstable_continueExecution=function(){Kt||Zt||(Kt=!0,zn(bn))},ft.unstable_forceFrameRate=function(Ln){0>Ln||125<Ln?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):In=0<Ln?Math.floor(1e3/Ln):5},ft.unstable_getCurrentPriorityLevel=function(){return Ut},ft.unstable_getFirstCallbackNode=function(){return dt(kt)},ft.unstable_next=function(Ln){switch(Ut){case 1:case 2:case 3:var Vn=3;break;default:Vn=Ut}var Wn=Ut;Ut=Vn;try{return Ln()}finally{Ut=Wn}},ft.unstable_pauseExecution=function(){},ft.unstable_requestPaint=function(){},ft.unstable_runWithPriority=function(Ln,Vn){switch(Ln){case 1:case 2:case 3:case 4:case 5:break;default:Ln=3}var Wn=Ut;Ut=Ln;try{return Vn()}finally{Ut=Wn}},ft.unstable_scheduleCallback=function(Ln,Vn,Wn){var sr=ft.unstable_now();switch(typeof Wn=="object"&&Wn!==null?(Wn=Wn.delay,Wn=typeof Wn=="number"&&0<Wn?sr+Wn:sr):Wn=sr,Ln){case 1:var Mn=-1;break;case 2:Mn=250;break;case 5:Mn=1073741823;break;case 4:Mn=1e4;break;default:Mn=5e3}return Mn=Wn+Mn,Ln={id:Bt++,callback:Vn,priorityLevel:Ln,startTime:Wn,expirationTime:Mn,sortIndex:-1},Wn>sr?(Ln.sortIndex=Wn,lt(Dt,Ln),dt(kt)===null&&Ln===dt(Dt)&&(ln?(dn(Tn),Tn=-1):ln=!0,lr(On,Wn-sr))):(Ln.sortIndex=Mn,lt(kt,Ln),Kt||Zt||(Kt=!0,zn(bn))),Ln},ft.unstable_shouldYield=Dn,ft.unstable_wrapCallback=function(Ln){var Vn=Ut;return function(){var Wn=Ut;Ut=Vn;try{return Ln.apply(this,arguments)}finally{Ut=Wn}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;function shallowEqualArrays(ft,lt,dt=(vt,Tt)=>vt===Tt){if(ft===lt)return!0;if(!ft||!lt)return!1;const vt=ft.length;if(lt.length!==vt)return!1;for(let Tt=0;Tt<vt;Tt++)if(!dt(ft[Tt],lt[Tt]))return!1;return!0}const globalCache=[];function query(ft,lt,dt=!1,vt={}){for(const Et of globalCache)if(shallowEqualArrays(lt,Et.keys,Et.equal)){if(dt)return;if(Object.prototype.hasOwnProperty.call(Et,"error"))throw Et.error;if(Object.prototype.hasOwnProperty.call(Et,"response"))return Et.response;if(!dt)throw Et.promise}const Tt={keys:lt,equal:vt.equal,promise:ft(...lt).then(Et=>Tt.response=Et).then(()=>{vt.lifespan&&vt.lifespan>0&&setTimeout(()=>{const Et=globalCache.indexOf(Tt);Et!==-1&&globalCache.splice(Et,1)},vt.lifespan)}).catch(Et=>Tt.error=Et)};if(globalCache.push(Tt),!dt)throw Tt.promise}const suspend=(ft,lt,dt)=>query(ft,lt,!1,dt),preload=(ft,lt,dt)=>void query(ft,lt,!0,dt),clear=ft=>{if(ft===void 0||ft.length===0)globalCache.splice(0,globalCache.length);else{const lt=globalCache.find(dt=>shallowEqualArrays(ft,dt.keys,dt.equal));if(lt){const dt=globalCache.indexOf(lt);dt!==-1&&globalCache.splice(dt,1)}}},catalogue={},extend$1=ft=>void Object.assign(catalogue,ft);function createRenderer(ft,lt){function dt(Bt,{args:Ft=[],attach:Ut,...Zt},Kt){let ln=`${Bt[0].toUpperCase()}${Bt.slice(1)}`,hn;if(Bt==="primitive"){if(Zt.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const dn=Zt.object;hn=prepare(dn,{type:Bt,root:Kt,attach:Ut,primitive:!0})}else{const dn=catalogue[ln];if(!dn)throw new Error(`R3F: ${ln} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(Ft))throw new Error("R3F: The args prop must be an array!");hn=prepare(new dn(...Ft),{type:Bt,root:Kt,attach:Ut,memoizedProps:{args:Ft}})}return hn.__r3f.attach===void 0&&(hn instanceof BufferGeometry?hn.__r3f.attach="geometry":hn instanceof Material&&(hn.__r3f.attach="material")),ln!=="inject"&&applyProps$1(hn,Zt),hn}function vt(Bt,Ft){let Ut=!1;if(Ft){var Zt,Kt;(Zt=Ft.__r3f)!=null&&Zt.attach?attach(Bt,Ft,Ft.__r3f.attach):Ft.isObject3D&&Bt.isObject3D&&(Bt.add(Ft),Ut=!0),Ut||(Kt=Bt.__r3f)==null||Kt.objects.push(Ft),Ft.__r3f||prepare(Ft,{}),Ft.__r3f.parent=Bt,updateInstance(Ft),invalidateInstance(Ft)}}function Tt(Bt,Ft,Ut){let Zt=!1;if(Ft){var Kt,ln;if((Kt=Ft.__r3f)!=null&&Kt.attach)attach(Bt,Ft,Ft.__r3f.attach);else if(Ft.isObject3D&&Bt.isObject3D){Ft.parent=Bt,Ft.dispatchEvent({type:"added"});const hn=Bt.children.filter(pn=>pn!==Ft),dn=hn.indexOf(Ut);Bt.children=[...hn.slice(0,dn),Ft,...hn.slice(dn)],Zt=!0}Zt||(ln=Bt.__r3f)==null||ln.objects.push(Ft),Ft.__r3f||prepare(Ft,{}),Ft.__r3f.parent=Bt,updateInstance(Ft),invalidateInstance(Ft)}}function Et(Bt,Ft,Ut=!1){Bt&&[...Bt].forEach(Zt=>Ct(Ft,Zt,Ut))}function Ct(Bt,Ft,Ut){if(Ft){var Zt,Kt,ln;if(Ft.__r3f&&(Ft.__r3f.parent=null),(Zt=Bt.__r3f)!=null&&Zt.objects&&(Bt.__r3f.objects=Bt.__r3f.objects.filter(On=>On!==Ft)),(Kt=Ft.__r3f)!=null&&Kt.attach)detach(Bt,Ft,Ft.__r3f.attach);else if(Ft.isObject3D&&Bt.isObject3D){var hn;Bt.remove(Ft),(hn=Ft.__r3f)!=null&&hn.root&&removeInteractivity(Ft.__r3f.root,Ft)}const pn=(ln=Ft.__r3f)==null?void 0:ln.primitive,mn=Ut===void 0?Ft.dispose!==null&&!pn:Ut;if(!pn){var dn;Et((dn=Ft.__r3f)==null?void 0:dn.objects,Ft,mn),Et(Ft.children,Ft,mn)}Ft.__r3f&&(delete Ft.__r3f.root,delete Ft.__r3f.objects,delete Ft.__r3f.handlers,delete Ft.__r3f.memoizedProps,pn||delete Ft.__r3f),mn&&Ft.dispose&&Ft.type!=="Scene"&&schedulerExports.unstable_scheduleCallback(schedulerExports.unstable_IdlePriority,()=>{try{Ft.dispose()}catch{}}),invalidateInstance(Bt)}}function Rt(Bt,Ft,Ut,Zt){var Kt;const ln=(Kt=Bt.__r3f)==null?void 0:Kt.parent;if(!ln)return;const hn=dt(Ft,Ut,Bt.__r3f.root);if(Bt.children){for(const dn of Bt.children)dn.__r3f&&vt(hn,dn);Bt.children=Bt.children.filter(dn=>!dn.__r3f)}Bt.__r3f.objects.forEach(dn=>vt(hn,dn)),Bt.__r3f.objects=[],Bt.__r3f.autoRemovedBeforeAppend||Ct(ln,Bt),hn.parent&&(hn.__r3f.autoRemovedBeforeAppend=!0),vt(ln,hn),hn.raycast&&hn.__r3f.eventCount&&hn.__r3f.root.getState().internal.interaction.push(hn),[Zt,Zt.alternate].forEach(dn=>{dn!==null&&(dn.stateNode=hn,dn.ref&&(typeof dn.ref=="function"?dn.ref(hn):dn.ref.current=hn))})}const kt=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:Reconciler({createInstance:dt,removeChild:Ct,appendChild:vt,appendInitialChild:vt,insertBefore:Tt,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(Bt,Ft)=>{if(!Ft)return;const Ut=Bt.getState().scene;Ut.__r3f&&(Ut.__r3f.root=Bt,vt(Ut,Ft))},removeChildFromContainer:(Bt,Ft)=>{Ft&&Ct(Bt.getState().scene,Ft)},insertInContainerBefore:(Bt,Ft,Ut)=>{if(!Ft||!Ut)return;const Zt=Bt.getState().scene;Zt.__r3f&&Tt(Zt,Ft,Ut)},getRootHostContext:()=>null,getChildHostContext:Bt=>Bt,finalizeInitialChildren(Bt){var Ft;return!!((Ft=Bt==null?void 0:Bt.__r3f)!=null?Ft:{}).handlers},prepareUpdate(Bt,Ft,Ut,Zt){if(Bt.__r3f.primitive&&Zt.object&&Zt.object!==Bt)return[!0];{const{args:Kt=[],children:ln,...hn}=Zt,{args:dn=[],children:pn,...mn}=Ut;if(!Array.isArray(Kt))throw new Error("R3F: the args prop must be an array!");if(Kt.some((bn,En)=>bn!==dn[En]))return[!0];const On=diffProps(Bt,hn,mn,!0);return On.changes.length?[!1,On]:null}},commitUpdate(Bt,[Ft,Ut],Zt,Kt,ln,hn){Ft?Rt(Bt,Zt,ln,hn):applyProps$1(Bt,Ut)},commitMount(Bt,Ft,Ut,Zt){var Kt;const ln=(Kt=Bt.__r3f)!=null?Kt:{};Bt.raycast&&ln.handlers&&ln.eventCount&&Bt.__r3f.root.getState().internal.interaction.push(Bt)},getPublicInstance:Bt=>Bt,prepareForCommit:()=>null,preparePortalMount:Bt=>prepare(Bt.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(Bt){var Ft;const{attach:Ut,parent:Zt}=(Ft=Bt.__r3f)!=null?Ft:{};Ut&&Zt&&detach(Zt,Bt,Ut),Bt.isObject3D&&(Bt.visible=!1),invalidateInstance(Bt)},unhideInstance(Bt,Ft){var Ut;const{attach:Zt,parent:Kt}=(Ut=Bt.__r3f)!=null?Ut:{};Zt&&Kt&&attach(Kt,Bt,Zt),(Bt.isObject3D&&Ft.visible==null||Ft.visible)&&(Bt.visible=!0),invalidateInstance(Bt)},createTextInstance:kt,hideTextInstance:kt,unhideTextInstance:kt,getCurrentEventPriority:()=>lt?lt():constantsExports.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&is.fun(performance.now)?performance.now:is.fun(Date.now)?Date.now:()=>0,scheduleTimeout:is.fun(setTimeout)?setTimeout:void 0,cancelTimeout:is.fun(clearTimeout)?clearTimeout:void 0}),applyProps:applyProps$1}}var _window$document,_window$navigator;const getColorManagement=()=>{var ft;return(ft=catalogue.ColorManagement)!=null?ft:null},isOrthographicCamera=ft=>ft&&ft.isOrthographicCamera,isRef=ft=>ft&&ft.hasOwnProperty("current"),useIsomorphicLayoutEffect=typeof window<"u"&&((_window$document=window.document)!=null&&_window$document.createElement||((_window$navigator=window.navigator)==null?void 0:_window$navigator.product)==="ReactNative")?reactExports.useLayoutEffect:reactExports.useEffect;function useMutableCallback(ft){const lt=reactExports.useRef(ft);return useIsomorphicLayoutEffect(()=>void(lt.current=ft),[ft]),lt}function Block({set:ft}){return useIsomorphicLayoutEffect(()=>(ft(new Promise(()=>null)),()=>ft(!1)),[ft]),null}class ErrorBoundary extends reactExports.Component{constructor(...lt){super(...lt),this.state={error:!1}}componentDidCatch(lt){this.props.set(lt)}render(){return this.state.error?null:this.props.children}}ErrorBoundary.getDerivedStateFromError=()=>({error:!0});const DEFAULT="__default",DEFAULTS=new Map,isDiffSet=ft=>ft&&!!ft.memoized&&!!ft.changes;function calculateDpr(ft){const lt=typeof window<"u"?window.devicePixelRatio:1;return Array.isArray(ft)?Math.min(Math.max(ft[0],lt),ft[1]):ft}const getRootState=ft=>{var lt;return(lt=ft.__r3f)==null?void 0:lt.root.getState()},is={obj:ft=>ft===Object(ft)&&!is.arr(ft)&&typeof ft!="function",fun:ft=>typeof ft=="function",str:ft=>typeof ft=="string",num:ft=>typeof ft=="number",boo:ft=>typeof ft=="boolean",und:ft=>ft===void 0,arr:ft=>Array.isArray(ft),equ(ft,lt,{arrays:dt="shallow",objects:vt="reference",strict:Tt=!0}={}){if(typeof ft!=typeof lt||!!ft!=!!lt)return!1;if(is.str(ft)||is.num(ft))return ft===lt;const Et=is.obj(ft);if(Et&&vt==="reference")return ft===lt;const Ct=is.arr(ft);if(Ct&&dt==="reference")return ft===lt;if((Ct||Et)&&ft===lt)return!0;let Rt;for(Rt in ft)if(!(Rt in lt))return!1;if(Et&&dt==="shallow"&&vt==="shallow"){for(Rt in Tt?lt:ft)if(!is.equ(ft[Rt],lt[Rt],{strict:Tt,objects:"reference"}))return!1}else for(Rt in Tt?lt:ft)if(ft[Rt]!==lt[Rt])return!1;if(is.und(Rt)){if(Ct&&ft.length===0&&lt.length===0||Et&&Object.keys(ft).length===0&&Object.keys(lt).length===0)return!0;if(ft!==lt)return!1}return!0}};function buildGraph(ft){const lt={nodes:{},materials:{}};return ft&&ft.traverse(dt=>{dt.name&&(lt.nodes[dt.name]=dt),dt.material&&!lt.materials[dt.material.name]&&(lt.materials[dt.material.name]=dt.material)}),lt}function dispose(ft){ft.dispose&&ft.type!=="Scene"&&ft.dispose();for(const lt in ft)lt.dispose==null||lt.dispose(),delete ft[lt]}function prepare(ft,lt){const dt=ft;return(lt!=null&&lt.primitive||!dt.__r3f)&&(dt.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...lt}),ft}function resolve(ft,lt){let dt=ft;if(lt.includes("-")){const vt=lt.split("-"),Tt=vt.pop();return dt=vt.reduce((Et,Ct)=>Et[Ct],ft),{target:dt,key:Tt}}else return{target:dt,key:lt}}const INDEX_REGEX=/-\d+$/;function attach(ft,lt,dt){if(is.str(dt)){if(INDEX_REGEX.test(dt)){const Et=dt.replace(INDEX_REGEX,""),{target:Ct,key:Rt}=resolve(ft,Et);Array.isArray(Ct[Rt])||(Ct[Rt]=[])}const{target:vt,key:Tt}=resolve(ft,dt);lt.__r3f.previousAttach=vt[Tt],vt[Tt]=lt}else lt.__r3f.previousAttach=dt(ft,lt)}function detach(ft,lt,dt){var vt,Tt;if(is.str(dt)){const{target:Et,key:Ct}=resolve(ft,dt),Rt=lt.__r3f.previousAttach;Rt===void 0?delete Et[Ct]:Et[Ct]=Rt}else(vt=lt.__r3f)==null||vt.previousAttach==null||vt.previousAttach(ft,lt);(Tt=lt.__r3f)==null||delete Tt.previousAttach}function diffProps(ft,{children:lt,key:dt,ref:vt,...Tt},{children:Et,key:Ct,ref:Rt,...kt}={},Dt=!1){var Bt;const Ft=(Bt=ft==null?void 0:ft.__r3f)!=null?Bt:{},Ut=Object.entries(Tt),Zt=[];if(Dt){const ln=Object.keys(kt);for(let hn=0;hn<ln.length;hn++)Tt.hasOwnProperty(ln[hn])||Ut.unshift([ln[hn],DEFAULT+"remove"])}Ut.forEach(([ln,hn])=>{var dn;if((dn=ft.__r3f)!=null&&dn.primitive&&ln==="object"||is.equ(hn,kt[ln]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(ln))return Zt.push([ln,hn,!0,[]]);let pn=[];ln.includes("-")&&(pn=ln.split("-")),Zt.push([ln,hn,!1,pn]);for(const mn in Tt){const On=Tt[mn];mn.startsWith(`${ln}-`)&&Zt.push([mn,On,!1,mn.split("-")])}});const Kt={...Tt};return Ft.memoizedProps&&Ft.memoizedProps.args&&(Kt.args=Ft.memoizedProps.args),Ft.memoizedProps&&Ft.memoizedProps.attach&&(Kt.attach=Ft.memoizedProps.attach),{memoized:Kt,changes:Zt}}function applyProps$1(ft,lt){var dt,vt,Tt;const Et=(dt=ft.__r3f)!=null?dt:{},Ct=Et.root,Rt=(vt=Ct==null||Ct.getState==null?void 0:Ct.getState())!=null?vt:{},{memoized:kt,changes:Dt}=isDiffSet(lt)?lt:diffProps(ft,lt),Bt=Et.eventCount;ft.__r3f&&(ft.__r3f.memoizedProps=kt);for(let Ut=0;Ut<Dt.length;Ut++){let[Zt,Kt,ln,hn]=Dt[Ut],dn=ft,pn=dn[Zt];if(hn.length&&(pn=hn.reduce((mn,On)=>mn[On],ft),!(pn&&pn.set))){const[mn,...On]=hn.reverse();dn=On.reverse().reduce((bn,En)=>bn[En],ft),Zt=mn}if(Kt===DEFAULT+"remove")if(dn.constructor){let mn=DEFAULTS.get(dn.constructor);mn||(mn=new dn.constructor,DEFAULTS.set(dn.constructor,mn)),Kt=mn[Zt]}else Kt=0;if(ln)Kt?Et.handlers[Zt]=Kt:delete Et.handlers[Zt],Et.eventCount=Object.keys(Et.handlers).length;else if(pn&&pn.set&&(pn.copy||pn instanceof Layers$1)){if(Array.isArray(Kt))pn.fromArray?pn.fromArray(Kt):pn.set(...Kt);else if(pn.copy&&Kt&&Kt.constructor&&pn.constructor===Kt.constructor)pn.copy(Kt);else if(Kt!==void 0){const mn=pn instanceof Color;!mn&&pn.setScalar?pn.setScalar(Kt):pn instanceof Layers$1&&Kt instanceof Layers$1?pn.mask=Kt.mask:pn.set(Kt),!getColorManagement()&&!Rt.linear&&mn&&pn.convertSRGBToLinear()}}else dn[Zt]=Kt,!Rt.linear&&dn[Zt]instanceof Texture&&dn[Zt].format===RGBAFormat&&dn[Zt].type===UnsignedByteType&&(dn[Zt].encoding=sRGBEncoding);invalidateInstance(ft)}if(Et.parent&&Rt.internal&&ft.raycast&&Bt!==Et.eventCount){const Ut=Rt.internal.interaction.indexOf(ft);Ut>-1&&Rt.internal.interaction.splice(Ut,1),Et.eventCount&&Rt.internal.interaction.push(ft)}return!(Dt.length===1&&Dt[0][0]==="onUpdate")&&Dt.length&&(Tt=ft.__r3f)!=null&&Tt.parent&&updateInstance(ft),ft}function invalidateInstance(ft){var lt,dt;const vt=(lt=ft.__r3f)==null||(dt=lt.root)==null||dt.getState==null?void 0:dt.getState();vt&&vt.internal.frames===0&&vt.invalidate()}function updateInstance(ft){ft.onUpdate==null||ft.onUpdate(ft)}function updateCamera(ft,lt){ft.manual||(isOrthographicCamera(ft)?(ft.left=lt.width/-2,ft.right=lt.width/2,ft.top=lt.height/2,ft.bottom=lt.height/-2):ft.aspect=lt.width/lt.height,ft.updateProjectionMatrix(),ft.updateMatrixWorld())}function makeId(ft){return(ft.eventObject||ft.object).uuid+"/"+ft.index+ft.instanceId}function getEventPriority(){var ft;const lt=typeof self<"u"&&self||typeof window<"u"&&window;if(!lt)return constantsExports.DefaultEventPriority;switch((ft=lt.event)==null?void 0:ft.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return constantsExports.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return constantsExports.ContinuousEventPriority;default:return constantsExports.DefaultEventPriority}}function releaseInternalPointerCapture(ft,lt,dt,vt){const Tt=dt.get(lt);Tt&&(dt.delete(lt),dt.size===0&&(ft.delete(vt),Tt.target.releasePointerCapture(vt)))}function removeInteractivity(ft,lt){const{internal:dt}=ft.getState();dt.interaction=dt.interaction.filter(vt=>vt!==lt),dt.initialHits=dt.initialHits.filter(vt=>vt!==lt),dt.hovered.forEach((vt,Tt)=>{(vt.eventObject===lt||vt.object===lt)&&dt.hovered.delete(Tt)}),dt.capturedMap.forEach((vt,Tt)=>{releaseInternalPointerCapture(dt.capturedMap,lt,vt,Tt)})}function createEvents(ft){function lt(kt){const{internal:Dt}=ft.getState(),Bt=kt.offsetX-Dt.initialClick[0],Ft=kt.offsetY-Dt.initialClick[1];return Math.round(Math.sqrt(Bt*Bt+Ft*Ft))}function dt(kt){return kt.filter(Dt=>["Move","Over","Enter","Out","Leave"].some(Bt=>{var Ft;return(Ft=Dt.__r3f)==null?void 0:Ft.handlers["onPointer"+Bt]}))}function vt(kt,Dt){const Bt=ft.getState(),Ft=new Set,Ut=[],Zt=Dt?Dt(Bt.internal.interaction):Bt.internal.interaction;for(let dn=0;dn<Zt.length;dn++){const pn=getRootState(Zt[dn]);pn&&(pn.raycaster.camera=void 0)}Bt.previousRoot||Bt.events.compute==null||Bt.events.compute(kt,Bt);function Kt(dn){const pn=getRootState(dn);if(!pn||!pn.events.enabled||pn.raycaster.camera===null)return[];if(pn.raycaster.camera===void 0){var mn;pn.events.compute==null||pn.events.compute(kt,pn,(mn=pn.previousRoot)==null?void 0:mn.getState()),pn.raycaster.camera===void 0&&(pn.raycaster.camera=null)}return pn.raycaster.camera?pn.raycaster.intersectObject(dn,!0):[]}let ln=Zt.flatMap(Kt).sort((dn,pn)=>{const mn=getRootState(dn.object),On=getRootState(pn.object);return!mn||!On?dn.distance-pn.distance:On.events.priority-mn.events.priority||dn.distance-pn.distance}).filter(dn=>{const pn=makeId(dn);return Ft.has(pn)?!1:(Ft.add(pn),!0)});Bt.events.filter&&(ln=Bt.events.filter(ln,Bt));for(const dn of ln){let pn=dn.object;for(;pn;){var hn;(hn=pn.__r3f)!=null&&hn.eventCount&&Ut.push({...dn,eventObject:pn}),pn=pn.parent}}if("pointerId"in kt&&Bt.internal.capturedMap.has(kt.pointerId))for(let dn of Bt.internal.capturedMap.get(kt.pointerId).values())Ft.has(makeId(dn.intersection))||Ut.push(dn.intersection);return Ut}function Tt(kt,Dt,Bt,Ft){const Ut=ft.getState();if(kt.length){const Zt={stopped:!1};for(const Kt of kt){const ln=getRootState(Kt.object)||Ut,{raycaster:hn,pointer:dn,camera:pn,internal:mn}=ln,On=new Vector3(dn.x,dn.y,0).unproject(pn),bn=Rn=>{var Dn,Bn;return(Dn=(Bn=mn.capturedMap.get(Rn))==null?void 0:Bn.has(Kt.eventObject))!=null?Dn:!1},En=Rn=>{const Dn={intersection:Kt,target:Dt.target};mn.capturedMap.has(Rn)?mn.capturedMap.get(Rn).set(Kt.eventObject,Dn):mn.capturedMap.set(Rn,new Map([[Kt.eventObject,Dn]])),Dt.target.setPointerCapture(Rn)},An=Rn=>{const Dn=mn.capturedMap.get(Rn);Dn&&releaseInternalPointerCapture(mn.capturedMap,Kt.eventObject,Dn,Rn)};let Tn={};for(let Rn in Dt){let Dn=Dt[Rn];typeof Dn!="function"&&(Tn[Rn]=Dn)}let In={...Kt,...Tn,pointer:dn,intersections:kt,stopped:Zt.stopped,delta:Bt,unprojectedPoint:On,ray:hn.ray,camera:pn,stopPropagation(){const Rn="pointerId"in Dt&&mn.capturedMap.get(Dt.pointerId);if((!Rn||Rn.has(Kt.eventObject))&&(In.stopped=Zt.stopped=!0,mn.hovered.size&&Array.from(mn.hovered.values()).find(Dn=>Dn.eventObject===Kt.eventObject))){const Dn=kt.slice(0,kt.indexOf(Kt));Et([...Dn,Kt])}},target:{hasPointerCapture:bn,setPointerCapture:En,releasePointerCapture:An},currentTarget:{hasPointerCapture:bn,setPointerCapture:En,releasePointerCapture:An},nativeEvent:Dt};if(Ft(In),Zt.stopped===!0)break}}return kt}function Et(kt){const{internal:Dt}=ft.getState();for(const Bt of Dt.hovered.values())if(!kt.length||!kt.find(Ft=>Ft.object===Bt.object&&Ft.index===Bt.index&&Ft.instanceId===Bt.instanceId)){const Ut=Bt.eventObject.__r3f,Zt=Ut==null?void 0:Ut.handlers;if(Dt.hovered.delete(makeId(Bt)),Ut!=null&&Ut.eventCount){const Kt={...Bt,intersections:kt};Zt.onPointerOut==null||Zt.onPointerOut(Kt),Zt.onPointerLeave==null||Zt.onPointerLeave(Kt)}}}function Ct(kt,Dt){for(let Bt=0;Bt<Dt.length;Bt++){const Ft=Dt[Bt].__r3f;Ft==null||Ft.handlers.onPointerMissed==null||Ft.handlers.onPointerMissed(kt)}}function Rt(kt){switch(kt){case"onPointerLeave":case"onPointerCancel":return()=>Et([]);case"onLostPointerCapture":return Dt=>{const{internal:Bt}=ft.getState();"pointerId"in Dt&&Bt.capturedMap.has(Dt.pointerId)&&requestAnimationFrame(()=>{Bt.capturedMap.has(Dt.pointerId)&&(Bt.capturedMap.delete(Dt.pointerId),Et([]))})}}return function(Bt){const{onPointerMissed:Ft,internal:Ut}=ft.getState();Ut.lastEvent.current=Bt;const Zt=kt==="onPointerMove",Kt=kt==="onClick"||kt==="onContextMenu"||kt==="onDoubleClick",hn=vt(Bt,Zt?dt:void 0),dn=Kt?lt(Bt):0;kt==="onPointerDown"&&(Ut.initialClick=[Bt.offsetX,Bt.offsetY],Ut.initialHits=hn.map(mn=>mn.eventObject)),Kt&&!hn.length&&dn<=2&&(Ct(Bt,Ut.interaction),Ft&&Ft(Bt)),Zt&&Et(hn);function pn(mn){const On=mn.eventObject,bn=On.__r3f,En=bn==null?void 0:bn.handlers;if(bn!=null&&bn.eventCount)if(Zt){if(En.onPointerOver||En.onPointerEnter||En.onPointerOut||En.onPointerLeave){const An=makeId(mn),Tn=Ut.hovered.get(An);Tn?Tn.stopped&&mn.stopPropagation():(Ut.hovered.set(An,mn),En.onPointerOver==null||En.onPointerOver(mn),En.onPointerEnter==null||En.onPointerEnter(mn))}En.onPointerMove==null||En.onPointerMove(mn)}else{const An=En[kt];An?(!Kt||Ut.initialHits.includes(On))&&(Ct(Bt,Ut.interaction.filter(Tn=>!Ut.initialHits.includes(Tn))),An(mn)):Kt&&Ut.initialHits.includes(On)&&Ct(Bt,Ut.interaction.filter(Tn=>!Ut.initialHits.includes(Tn)))}}Tt(hn,Bt,dn,pn)}}return{handlePointer:Rt}}const privateKeys=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],isRenderer=ft=>!!(ft!=null&&ft.render),context=reactExports.createContext(null),createStore=(ft,lt)=>{const dt=create$1((Rt,kt)=>{const Dt=new Vector3,Bt=new Vector3,Ft=new Vector3;function Ut(dn=kt().camera,pn=Bt,mn=kt().size){const{width:On,height:bn,top:En,left:An}=mn,Tn=On/bn;pn instanceof Vector3?Ft.copy(pn):Ft.set(...pn);const In=dn.getWorldPosition(Dt).distanceTo(Ft);if(isOrthographicCamera(dn))return{width:On/dn.zoom,height:bn/dn.zoom,top:En,left:An,factor:1,distance:In,aspect:Tn};{const Rn=dn.fov*Math.PI/180,Dn=2*Math.tan(Rn/2)*In,Bn=Dn*(On/bn);return{width:Bn,height:Dn,top:En,left:An,factor:On/Bn,distance:In,aspect:Tn}}}let Zt;const Kt=dn=>Rt(pn=>({performance:{...pn.performance,current:dn}})),ln=new Vector2;return{set:Rt,get:kt,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(dn=1)=>ft(kt(),dn),advance:(dn,pn)=>lt(dn,pn,kt()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Clock,pointer:ln,mouse:ln,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const dn=kt();Zt&&clearTimeout(Zt),dn.performance.current!==dn.performance.min&&Kt(dn.performance.min),Zt=setTimeout(()=>Kt(kt().performance.max),dn.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:Ut},setEvents:dn=>Rt(pn=>({...pn,events:{...pn.events,...dn}})),setSize:(dn,pn,mn,On,bn)=>{const En=kt().camera,An={width:dn,height:pn,top:On||0,left:bn||0,updateStyle:mn};Rt(Tn=>({size:An,viewport:{...Tn.viewport,...Ut(En,Bt,An)}}))},setDpr:dn=>Rt(pn=>{const mn=calculateDpr(dn);return{viewport:{...pn.viewport,dpr:mn,initialDpr:pn.viewport.initialDpr||mn}}}),setFrameloop:(dn="always")=>{const pn=kt().clock;pn.stop(),pn.elapsedTime=0,dn!=="never"&&(pn.start(),pn.elapsedTime=0),Rt(()=>({frameloop:dn}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:reactExports.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(dn,pn,mn)=>{const On=kt().internal;return On.priority=On.priority+(pn>0?1:0),On.subscribers.push({ref:dn,priority:pn,store:mn}),On.subscribers=On.subscribers.sort((bn,En)=>bn.priority-En.priority),()=>{const bn=kt().internal;bn!=null&&bn.subscribers&&(bn.priority=bn.priority-(pn>0?1:0),bn.subscribers=bn.subscribers.filter(En=>En.ref!==dn))}}}}}),vt=dt.getState();let Tt=vt.size,Et=vt.viewport.dpr,Ct=vt.camera;return dt.subscribe(()=>{const{camera:Rt,size:kt,viewport:Dt,gl:Bt,set:Ft}=dt.getState();if(kt!==Tt||Dt.dpr!==Et){var Ut;Tt=kt,Et=Dt.dpr,updateCamera(Rt,kt),Bt.setPixelRatio(Dt.dpr);const Zt=(Ut=kt.updateStyle)!=null?Ut:typeof HTMLCanvasElement<"u"&&Bt.domElement instanceof HTMLCanvasElement;Bt.setSize(kt.width,kt.height,Zt)}Rt!==Ct&&(Ct=Rt,Ft(Zt=>({viewport:{...Zt.viewport,...Zt.viewport.getCurrentViewport(Rt)}})))}),dt.subscribe(Rt=>ft(Rt)),dt};function createSubs(ft,lt){const dt={callback:ft};return lt.add(dt),()=>void lt.delete(dt)}let i$2,globalEffects=new Set,globalAfterEffects=new Set,globalTailEffects=new Set;const addEffect=ft=>createSubs(ft,globalEffects);function run(ft,lt){if(ft.size)for(const{callback:dt}of ft.values())dt(lt)}function flushGlobalEffects(ft,lt){switch(ft){case"before":return run(globalEffects,lt);case"after":return run(globalAfterEffects,lt);case"tail":return run(globalTailEffects,lt)}}let subscribers,subscription;function render$1(ft,lt,dt){let vt=lt.clock.getDelta();for(lt.frameloop==="never"&&typeof ft=="number"&&(vt=ft-lt.clock.elapsedTime,lt.clock.oldTime=lt.clock.elapsedTime,lt.clock.elapsedTime=ft),subscribers=lt.internal.subscribers,i$2=0;i$2<subscribers.length;i$2++)subscription=subscribers[i$2],subscription.ref.current(subscription.store.getState(),vt,dt);return!lt.internal.priority&&lt.gl.render&&lt.gl.render(lt.scene,lt.camera),lt.internal.frames=Math.max(0,lt.internal.frames-1),lt.frameloop==="always"?1:lt.internal.frames}function createLoop(ft){let lt=!1,dt,vt,Tt;function Et(kt){vt=requestAnimationFrame(Et),lt=!0,dt=0,flushGlobalEffects("before",kt);for(const Bt of ft.values()){var Dt;Tt=Bt.store.getState(),Tt.internal.active&&(Tt.frameloop==="always"||Tt.internal.frames>0)&&!((Dt=Tt.gl.xr)!=null&&Dt.isPresenting)&&(dt+=render$1(kt,Tt))}if(flushGlobalEffects("after",kt),dt===0)return flushGlobalEffects("tail",kt),lt=!1,cancelAnimationFrame(vt)}function Ct(kt,Dt=1){var Bt;if(!kt)return ft.forEach(Ft=>Ct(Ft.store.getState()),Dt);(Bt=kt.gl.xr)!=null&&Bt.isPresenting||!kt.internal.active||kt.frameloop==="never"||(kt.internal.frames=Math.min(60,kt.internal.frames+Dt),lt||(lt=!0,requestAnimationFrame(Et)))}function Rt(kt,Dt=!0,Bt,Ft){if(Dt&&flushGlobalEffects("before",kt),Bt)render$1(kt,Bt,Ft);else for(const Ut of ft.values())render$1(kt,Ut.store.getState());Dt&&flushGlobalEffects("after",kt)}return{loop:Et,invalidate:Ct,advance:Rt}}function useStore(){const ft=reactExports.useContext(context);if(!ft)throw new Error("R3F: Hooks can only be used within the Canvas component!");return ft}function useThree(ft=dt=>dt,lt){return useStore()(ft,lt)}function useFrame(ft,lt=0){const dt=useStore(),vt=dt.getState().internal.subscribe,Tt=useMutableCallback(ft);return useIsomorphicLayoutEffect(()=>vt(Tt,lt,dt),[lt,vt,dt]),null}function loadingFn(ft,lt){return function(dt,...vt){const Tt=new dt;return ft&&ft(Tt),Promise.all(vt.map(Et=>new Promise((Ct,Rt)=>Tt.load(Et,kt=>{kt.scene&&Object.assign(kt,buildGraph(kt.scene)),Ct(kt)},lt,kt=>Rt(new Error(`Could not load ${Et}: ${kt.message})`))))))}}function useLoader(ft,lt,dt,vt){const Tt=Array.isArray(lt)?lt:[lt],Et=suspend(loadingFn(dt,vt),[ft,...Tt],{equal:is.equ});return Array.isArray(lt)?Et:Et[0]}useLoader.preload=function(ft,lt,dt){const vt=Array.isArray(lt)?lt:[lt];return preload(loadingFn(dt),[ft,...vt])};useLoader.clear=function(ft,lt){const dt=Array.isArray(lt)?lt:[lt];return clear([ft,...dt])};const roots=new Map,{invalidate,advance}=createLoop(roots),{reconciler,applyProps}=createRenderer(roots,getEventPriority),shallowLoose={objects:"shallow",strict:!1},createRendererInstance=(ft,lt)=>{const dt=typeof ft=="function"?ft(lt):ft;return isRenderer(dt)?dt:new WebGLRenderer({powerPreference:"high-performance",canvas:lt,antialias:!0,alpha:!0,...ft})};function computeInitialSize(ft,lt){if(lt)return lt;if(typeof HTMLCanvasElement<"u"&&ft instanceof HTMLCanvasElement&&ft.parentElement){const{width:dt,height:vt,top:Tt,left:Et}=ft.parentElement.getBoundingClientRect();return{width:dt,height:vt,top:Tt,left:Et}}else if(typeof OffscreenCanvas<"u"&&ft instanceof OffscreenCanvas)return{width:ft.width,height:ft.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function createRoot(ft){const lt=roots.get(ft),dt=lt==null?void 0:lt.fiber,vt=lt==null?void 0:lt.store;lt&&console.warn("R3F.createRoot should only be called once!");const Tt=typeof reportError=="function"?reportError:console.error,Et=vt||createStore(invalidate,advance),Ct=dt||reconciler.createContainer(Et,constantsExports.ConcurrentRoot,null,!1,null,"",Tt,null);lt||roots.set(ft,{fiber:Ct,store:Et});let Rt,kt=!1,Dt;return{configure(Bt={}){let{gl:Ft,size:Ut,scene:Zt,events:Kt,onCreated:ln,shadows:hn=!1,linear:dn=!1,flat:pn=!1,legacy:mn=!1,orthographic:On=!1,frameloop:bn="always",dpr:En=[1,2],performance:An,raycaster:Tn,camera:In,onPointerMissed:Rn}=Bt,Dn=Et.getState(),Bn=Dn.gl;Dn.gl||Dn.set({gl:Bn=createRendererInstance(Ft,ft)});let Hn=Dn.raycaster;Hn||Dn.set({raycaster:Hn=new Raycaster});const{params:jn,...Kn}=Tn||{};if(is.equ(Kn,Hn,shallowLoose)||applyProps(Hn,{...Kn}),is.equ(jn,Hn.params,shallowLoose)||applyProps(Hn,{params:{...Hn.params,...jn}}),!Dn.camera||Dn.camera===Dt&&!is.equ(Dt,In,shallowLoose)){Dt=In;const sr=In instanceof Camera,Mn=sr?In:On?new OrthographicCamera$1(0,0,0,0,.1,1e3):new PerspectiveCamera(75,0,.1,1e3);sr||(Mn.position.z=5,In&&applyProps(Mn,In),!Dn.camera&&!(In!=null&&In.rotation)&&Mn.lookAt(0,0,0)),Dn.set({camera:Mn})}if(!Dn.scene){let sr;Zt instanceof Scene?sr=Zt:(sr=new Scene,Zt&&applyProps(sr,Zt)),Dn.set({scene:prepare(sr)})}if(!Dn.xr){const sr=(mr,tr)=>{const Dr=Et.getState();Dr.frameloop!=="never"&&advance(mr,!0,Dr,tr)},Mn=()=>{const mr=Et.getState();mr.gl.xr.enabled=mr.gl.xr.isPresenting,mr.gl.xr.setAnimationLoop(mr.gl.xr.isPresenting?sr:null),mr.gl.xr.isPresenting||invalidate(mr)},ir={connect(){const mr=Et.getState().gl;mr.xr.addEventListener("sessionstart",Mn),mr.xr.addEventListener("sessionend",Mn)},disconnect(){const mr=Et.getState().gl;mr.xr.removeEventListener("sessionstart",Mn),mr.xr.removeEventListener("sessionend",Mn)}};Bn.xr&&ir.connect(),Dn.set({xr:ir})}if(Bn.shadowMap){const sr=Bn.shadowMap.enabled,Mn=Bn.shadowMap.type;if(Bn.shadowMap.enabled=!!hn,is.boo(hn))Bn.shadowMap.type=PCFSoftShadowMap;else if(is.str(hn)){var zn;const ir={basic:BasicShadowMap,percentage:PCFShadowMap,soft:PCFSoftShadowMap,variance:VSMShadowMap};Bn.shadowMap.type=(zn=ir[hn])!=null?zn:PCFSoftShadowMap}else is.obj(hn)&&Object.assign(Bn.shadowMap,hn);(sr!==Bn.shadowMap.enabled||Mn!==Bn.shadowMap.type)&&(Bn.shadowMap.needsUpdate=!0)}const lr=getColorManagement();lr&&("enabled"in lr?lr.enabled=!mn:"legacyMode"in lr&&(lr.legacyMode=mn));const Ln=dn?LinearEncoding:sRGBEncoding,Vn=pn?NoToneMapping:ACESFilmicToneMapping;Bn.outputEncoding!==Ln&&(Bn.outputEncoding=Ln),Bn.toneMapping!==Vn&&(Bn.toneMapping=Vn),Dn.legacy!==mn&&Dn.set(()=>({legacy:mn})),Dn.linear!==dn&&Dn.set(()=>({linear:dn})),Dn.flat!==pn&&Dn.set(()=>({flat:pn})),Ft&&!is.fun(Ft)&&!isRenderer(Ft)&&!is.equ(Ft,Bn,shallowLoose)&&applyProps(Bn,Ft),Kt&&!Dn.events.handlers&&Dn.set({events:Kt(Et)});const Wn=computeInitialSize(ft,Ut);return is.equ(Wn,Dn.size,shallowLoose)||Dn.setSize(Wn.width,Wn.height,Wn.updateStyle,Wn.top,Wn.left),En&&Dn.viewport.dpr!==calculateDpr(En)&&Dn.setDpr(En),Dn.frameloop!==bn&&Dn.setFrameloop(bn),Dn.onPointerMissed||Dn.set({onPointerMissed:Rn}),An&&!is.equ(An,Dn.performance,shallowLoose)&&Dn.set(sr=>({performance:{...sr.performance,...An}})),Rt=ln,kt=!0,this},render(Bt){return kt||this.configure(),reconciler.updateContainer(reactExports.createElement(Provider,{store:Et,children:Bt,onCreated:Rt,rootElement:ft}),Ct,null,()=>{}),Et},unmount(){unmountComponentAtNode(ft)}}}function Provider({store:ft,children:lt,onCreated:dt,rootElement:vt}){return useIsomorphicLayoutEffect(()=>{const Tt=ft.getState();Tt.set(Et=>({internal:{...Et.internal,active:!0}})),dt&&dt(Tt),ft.getState().events.connected||Tt.events.connect==null||Tt.events.connect(vt)},[]),reactExports.createElement(context.Provider,{value:ft},lt)}function unmountComponentAtNode(ft,lt){const dt=roots.get(ft),vt=dt==null?void 0:dt.fiber;if(vt){const Tt=dt==null?void 0:dt.store.getState();Tt&&(Tt.internal.active=!1),reconciler.updateContainer(null,vt,null,()=>{Tt&&setTimeout(()=>{try{var Et,Ct,Rt,kt;Tt.events.disconnect==null||Tt.events.disconnect(),(Et=Tt.gl)==null||(Ct=Et.renderLists)==null||Ct.dispose==null||Ct.dispose(),(Rt=Tt.gl)==null||Rt.forceContextLoss==null||Rt.forceContextLoss(),(kt=Tt.gl)!=null&&kt.xr&&Tt.xr.disconnect(),dispose(Tt),roots.delete(ft),lt&&lt(ft)}catch{}},500)})}}function createPortal(ft,lt,dt){return reactExports.createElement(Portal,{key:lt.uuid,children:ft,container:lt,state:dt})}function Portal({state:ft={},children:lt,container:dt}){const{events:vt,size:Tt,...Et}=ft,Ct=useStore(),[Rt]=reactExports.useState(()=>new Raycaster),[kt]=reactExports.useState(()=>new Vector2),Dt=reactExports.useCallback((Ft,Ut)=>{const Zt={...Ft};Object.keys(Ft).forEach(ln=>{(privateKeys.includes(ln)||Ft[ln]!==Ut[ln]&&Ut[ln])&&delete Zt[ln]});let Kt;if(Ut&&Tt){const ln=Ut.camera;Kt=Ft.viewport.getCurrentViewport(ln,new Vector3,Tt),ln!==Ft.camera&&updateCamera(ln,Tt)}return{...Zt,scene:dt,raycaster:Rt,pointer:kt,mouse:kt,previousRoot:Ct,events:{...Ft.events,...Ut==null?void 0:Ut.events,...vt},size:{...Ft.size,...Tt},viewport:{...Ft.viewport,...Kt},...Et}},[ft]),[Bt]=reactExports.useState(()=>{const Ft=Ct.getState();return create$1((Zt,Kt)=>({...Ft,scene:dt,raycaster:Rt,pointer:kt,mouse:kt,previousRoot:Ct,events:{...Ft.events,...vt},size:{...Ft.size,...Tt},...Et,set:Zt,get:Kt,setEvents:ln=>Zt(hn=>({...hn,events:{...hn.events,...ln}}))}))});return reactExports.useEffect(()=>{const Ft=Ct.subscribe(Ut=>Bt.setState(Zt=>Dt(Ut,Zt)));return()=>{Ft(),Bt.destroy()}},[]),reactExports.useEffect(()=>{Bt.setState(Ft=>Dt(Ct.getState(),Ft))},[Dt]),reactExports.createElement(reactExports.Fragment,null,reconciler.createPortal(reactExports.createElement(context.Provider,{value:Bt},lt),Bt,null))}reconciler.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:reactExports.version});function _extends(){return _extends=Object.assign?Object.assign.bind():function(ft){for(var lt=1;lt<arguments.length;lt++){var dt=arguments[lt];for(var vt in dt)Object.prototype.hasOwnProperty.call(dt,vt)&&(ft[vt]=dt[vt])}return ft},_extends.apply(this,arguments)}function debounce(ft,lt,dt){var vt,Tt,Et,Ct,Rt;lt==null&&(lt=100);function kt(){var Bt=Date.now()-Ct;Bt<lt&&Bt>=0?vt=setTimeout(kt,lt-Bt):(vt=null,dt||(Rt=ft.apply(Et,Tt),Et=Tt=null))}var Dt=function(){Et=this,Tt=arguments,Ct=Date.now();var Bt=dt&&!vt;return vt||(vt=setTimeout(kt,lt)),Bt&&(Rt=ft.apply(Et,Tt),Et=Tt=null),Rt};return Dt.clear=function(){vt&&(clearTimeout(vt),vt=null)},Dt.flush=function(){vt&&(Rt=ft.apply(Et,Tt),Et=Tt=null,clearTimeout(vt),vt=null)},Dt}debounce.debounce=debounce;var debounce_1=debounce;const createDebounce=getDefaultExportFromCjs(debounce_1);function useMeasure(ft){let{debounce:lt,scroll:dt,polyfill:vt,offsetSize:Tt}=ft===void 0?{debounce:0,scroll:!1,offsetSize:!1}:ft;const Et=vt||(typeof window>"u"?class{}:window.ResizeObserver);if(!Et)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[Ct,Rt]=reactExports.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),kt=reactExports.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:Ct}),Dt=lt?typeof lt=="number"?lt:lt.scroll:null,Bt=lt?typeof lt=="number"?lt:lt.resize:null,Ft=reactExports.useRef(!1);reactExports.useEffect(()=>(Ft.current=!0,()=>void(Ft.current=!1)));const[Ut,Zt,Kt]=reactExports.useMemo(()=>{const pn=()=>{if(!kt.current.element)return;const{left:mn,top:On,width:bn,height:En,bottom:An,right:Tn,x:In,y:Rn}=kt.current.element.getBoundingClientRect(),Dn={left:mn,top:On,width:bn,height:En,bottom:An,right:Tn,x:In,y:Rn};kt.current.element instanceof HTMLElement&&Tt&&(Dn.height=kt.current.element.offsetHeight,Dn.width=kt.current.element.offsetWidth),Object.freeze(Dn),Ft.current&&!areBoundsEqual(kt.current.lastBounds,Dn)&&Rt(kt.current.lastBounds=Dn)};return[pn,Bt?createDebounce(pn,Bt):pn,Dt?createDebounce(pn,Dt):pn]},[Rt,Tt,Dt,Bt]);function ln(){kt.current.scrollContainers&&(kt.current.scrollContainers.forEach(pn=>pn.removeEventListener("scroll",Kt,!0)),kt.current.scrollContainers=null),kt.current.resizeObserver&&(kt.current.resizeObserver.disconnect(),kt.current.resizeObserver=null)}function hn(){kt.current.element&&(kt.current.resizeObserver=new Et(Kt),kt.current.resizeObserver.observe(kt.current.element),dt&&kt.current.scrollContainers&&kt.current.scrollContainers.forEach(pn=>pn.addEventListener("scroll",Kt,{capture:!0,passive:!0})))}const dn=pn=>{!pn||pn===kt.current.element||(ln(),kt.current.element=pn,kt.current.scrollContainers=findScrollContainers(pn),hn())};return useOnWindowScroll(Kt,!!dt),useOnWindowResize(Zt),reactExports.useEffect(()=>{ln(),hn()},[dt,Kt,Zt]),reactExports.useEffect(()=>ln,[]),[dn,Ct,Ut]}function useOnWindowResize(ft){reactExports.useEffect(()=>{const lt=ft;return window.addEventListener("resize",lt),()=>void window.removeEventListener("resize",lt)},[ft])}function useOnWindowScroll(ft,lt){reactExports.useEffect(()=>{if(lt){const dt=ft;return window.addEventListener("scroll",dt,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",dt,!0)}},[ft,lt])}function findScrollContainers(ft){const lt=[];if(!ft||ft===document.body)return lt;const{overflow:dt,overflowX:vt,overflowY:Tt}=window.getComputedStyle(ft);return[dt,vt,Tt].some(Et=>Et==="auto"||Et==="scroll")&&lt.push(ft),[...lt,...findScrollContainers(ft.parentElement)]}const keys$1=["x","y","top","bottom","left","right","width","height"],areBoundsEqual=(ft,lt)=>keys$1.every(dt=>ft[dt]===lt[dt]);var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(ft,lt,dt)=>lt in ft?__defProp(ft,lt,{enumerable:!0,configurable:!0,writable:!0,value:dt}):ft[lt]=dt,__spreadValues=(ft,lt)=>{for(var dt in lt||(lt={}))__hasOwnProp.call(lt,dt)&&__defNormalProp(ft,dt,lt[dt]);if(__getOwnPropSymbols)for(var dt of __getOwnPropSymbols(lt))__propIsEnum.call(lt,dt)&&__defNormalProp(ft,dt,lt[dt]);return ft},__spreadProps=(ft,lt)=>__defProps(ft,__getOwnPropDescs(lt)),_a$1;function traverseFiber(ft,lt,dt){if(!ft)return;if(dt(ft)===!0)return ft;let vt=lt?ft.return:ft.child;for(;vt;){const Tt=traverseFiber(vt,lt,dt);if(Tt)return Tt;vt=lt?null:vt.sibling}}function wrapContext(ft){try{return Object.defineProperties(ft,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return ft}}const FiberContext=wrapContext(reactExports.createContext(null));class FiberProvider extends reactExports.Component{render(){return reactExports.createElement(FiberContext.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner,ReactCurrentDispatcher}=(_a$1=reactExports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)!=null?_a$1:{};function useFiber(){const ft=reactExports.useContext(FiberContext),lt=reactExports.useId();return reactExports.useMemo(()=>{var vt;return(vt=ReactCurrentOwner==null?void 0:ReactCurrentOwner.current)!=null?vt:traverseFiber(ft,!1,Tt=>{let Et=Tt.memoizedState;for(;Et;){if(Et.memoizedState===lt)return!0;Et=Et.next}})},[ft,lt])}function useContextBridge(){var ft,lt;const dt=useFiber(),[vt]=reactExports.useState(()=>new Map);vt.clear();let Tt=dt;for(;Tt;){const Et=(ft=Tt.type)==null?void 0:ft._context;Et&&Et!==FiberContext&&!vt.has(Et)&&vt.set(Et,(lt=ReactCurrentDispatcher==null?void 0:ReactCurrentDispatcher.current)==null?void 0:lt.readContext(wrapContext(Et))),Tt=Tt.return}return reactExports.useMemo(()=>Array.from(vt.keys()).reduce((Et,Ct)=>Rt=>reactExports.createElement(Et,null,reactExports.createElement(Ct.Provider,__spreadProps(__spreadValues({},Rt),{value:vt.get(Ct)}))),Et=>reactExports.createElement(FiberProvider,__spreadValues({},Et))),[vt])}const DOM_EVENTS={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function createPointerEvents(ft){const{handlePointer:lt}=createEvents(ft);return{priority:1,enabled:!0,compute(dt,vt,Tt){vt.pointer.set(dt.offsetX/vt.size.width*2-1,-(dt.offsetY/vt.size.height)*2+1),vt.raycaster.setFromCamera(vt.pointer,vt.camera)},connected:void 0,handlers:Object.keys(DOM_EVENTS).reduce((dt,vt)=>({...dt,[vt]:lt(vt)}),{}),update:()=>{var dt;const{events:vt,internal:Tt}=ft.getState();(dt=Tt.lastEvent)!=null&&dt.current&&vt.handlers&&vt.handlers.onPointerMove(Tt.lastEvent.current)},connect:dt=>{var vt;const{set:Tt,events:Et}=ft.getState();Et.disconnect==null||Et.disconnect(),Tt(Ct=>({events:{...Ct.events,connected:dt}})),Object.entries((vt=Et.handlers)!=null?vt:[]).forEach(([Ct,Rt])=>{const[kt,Dt]=DOM_EVENTS[Ct];dt.addEventListener(kt,Rt,{passive:Dt})})},disconnect:()=>{const{set:dt,events:vt}=ft.getState();if(vt.connected){var Tt;Object.entries((Tt=vt.handlers)!=null?Tt:[]).forEach(([Et,Ct])=>{if(vt&&vt.connected instanceof HTMLElement){const[Rt]=DOM_EVENTS[Et];vt.connected.removeEventListener(Rt,Ct)}}),dt(Et=>({events:{...Et.events,connected:void 0}}))}}}}const CanvasImpl=reactExports.forwardRef(function ft({children:lt,fallback:dt,resize:vt,style:Tt,gl:Et,events:Ct=createPointerEvents,eventSource:Rt,eventPrefix:kt,shadows:Dt,linear:Bt,flat:Ft,legacy:Ut,orthographic:Zt,frameloop:Kt,dpr:ln,performance:hn,raycaster:dn,camera:pn,onPointerMissed:mn,onCreated:On,...bn},En){reactExports.useMemo(()=>extend$1(r$5),[]);const An=useContextBridge(),[Tn,In]=useMeasure({scroll:!0,debounce:{scroll:50,resize:0},...vt}),Rn=reactExports.useRef(null),Dn=reactExports.useRef(null);reactExports.useImperativeHandle(En,()=>Rn.current);const Bn=useMutableCallback(mn),[Hn,jn]=reactExports.useState(!1),[Kn,zn]=reactExports.useState(!1);if(Hn)throw Hn;if(Kn)throw Kn;const lr=reactExports.useRef(null);useIsomorphicLayoutEffect(()=>{const Vn=Rn.current;In.width>0&&In.height>0&&Vn&&(lr.current||(lr.current=createRoot(Vn)),lr.current.configure({gl:Et,events:Ct,shadows:Dt,linear:Bt,flat:Ft,legacy:Ut,orthographic:Zt,frameloop:Kt,dpr:ln,performance:hn,raycaster:dn,camera:pn,size:In,onPointerMissed:(...Wn)=>Bn.current==null?void 0:Bn.current(...Wn),onCreated:Wn=>{Wn.events.connect==null||Wn.events.connect(Rt?isRef(Rt)?Rt.current:Rt:Dn.current),kt&&Wn.setEvents({compute:(sr,Mn)=>{const ir=sr[kt+"X"],mr=sr[kt+"Y"];Mn.pointer.set(ir/Mn.size.width*2-1,-(mr/Mn.size.height)*2+1),Mn.raycaster.setFromCamera(Mn.pointer,Mn.camera)}}),On==null||On(Wn)}}),lr.current.render(reactExports.createElement(An,null,reactExports.createElement(ErrorBoundary,{set:zn},reactExports.createElement(reactExports.Suspense,{fallback:reactExports.createElement(Block,{set:jn})},lt)))))}),reactExports.useEffect(()=>{const Vn=Rn.current;if(Vn)return()=>unmountComponentAtNode(Vn)},[]);const Ln=Rt?"none":"auto";return reactExports.createElement("div",_extends({ref:Dn,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Ln,...Tt}},bn),reactExports.createElement("div",{ref:Tn,style:{width:"100%",height:"100%"}},reactExports.createElement("canvas",{ref:Rn,style:{display:"block"}},dt)))}),Canvas=reactExports.forwardRef(function ft(lt,dt){return reactExports.createElement(FiberProvider,null,reactExports.createElement(CanvasImpl,_extends({},lt,{ref:dt})))}),BINOMIAL_COEFFICIENTS=[[1],[1,1],[1,2,1],[1,3,3,1],[1,4,6,4,1],[1,5,10,10,5,1],[1,6,15,20,15,6,1],[1,7,21,35,35,21,7,1],[1,8,28,56,70,56,28,8,1],[1,9,36,84,126,126,84,36,9,1],[1,10,45,120,210,252,210,120,45,10,1]],MAX_CONTROL_POINTS=BINOMIAL_COEFFICIENTS.length,computeBezierPoint=(ft,lt)=>{const dt=new Vector3(0,0,0),vt=ft.length-1;for(let Tt=0;Tt<=vt;Tt++)dt.addScaledVector(ft[Tt],BINOMIAL_COEFFICIENTS[vt][Tt]*Math.pow(1-lt,vt-Tt)*Math.pow(lt,Tt));return dt},interpolateBezierPoints=(ft,lt)=>Array(lt).fill(0).map((dt,vt)=>computeBezierPoint(ft,vt/lt)),INTERPOLATION_COUNT=1e3,useCurveEditorState=create$2()(subscribeWithSelector(immer((ft,lt)=>({bezierControlPoints:[new Vector3(1,1,1),new Vector3(2,5,4)],selectedControlPoint:void 0,hoveredControlPoint:void 0,bezierLinePoints:[],addBezierControlPoint:dt=>{const vt=[...lt().bezierControlPoints];vt.push(dt),!(vt.length>MAX_CONTROL_POINTS)&&ft({bezierControlPoints:vt})},removeBezierControlPoint:dt=>{const vt=[...lt().bezierControlPoints];vt.splice(dt,1),ft({bezierControlPoints:vt})},updateBezierControlPoint:(dt,vt)=>ft(Tt=>{Tt.bezierControlPoints[dt]=vt}),setSelectedControlPoint:dt=>{ft({selectedControlPoint:dt})},updateBezierInterpolationPoints:()=>{const dt=interpolateBezierPoints(lt().bezierControlPoints,INTERPOLATION_COUNT);ft({bezierLinePoints:dt})}}))));useCurveEditorState.subscribe(ft=>ft.bezierControlPoints,()=>{useCurveEditorState.getState().updateBezierInterpolationPoints()});const VectorEditorItem=({id:ft,point:lt})=>{const dt=useCurveEditorState(Ct=>Ct.updateBezierControlPoint),vt=useCurveEditorState(Ct=>Ct.removeBezierControlPoint),[Tt,Et]=reactExports.useState({x:`${lt.x}`,y:`${lt.y}`,z:`${lt.z}`});return reactExports.useEffect(()=>{dt(ft,new Vector3(parseFloat(Tt.x)||0,parseFloat(Tt.y)||0,parseFloat(Tt.z)||0))},[Tt]),reactExports.useEffect(()=>{Et({x:`${lt.x}`,y:`${lt.y}`,z:`${lt.z}`})},[lt]),jsxs("div",{className:"flex items-center gap-2 p-2",children:[jsx("span",{children:`${ft+1}.`}),jsx(TextInput,{className:"text-center",value:Tt.x,onChange:Ct=>Et(Rt=>({...Rt,x:Ct.target.value}))}),jsx(TextInput,{className:"text-center",value:Tt.y,onChange:Ct=>Et(Rt=>({...Rt,y:Ct.target.value}))}),jsx(TextInput,{className:"text-center",value:Tt.z,onChange:Ct=>Et(Rt=>({...Rt,z:Ct.target.value}))}),jsx("button",{onClick:()=>vt(ft),children:jsx(FontAwesomeIcon,{className:"text-blue-600",icon:faTrashCan})})]})},VectorEditor=({points:ft})=>jsx("div",{children:ft.map((lt,dt)=>jsx(VectorEditorItem,{id:dt,point:lt},dt))});function mergeRefs(ft){return function(lt){ft.forEach(function(dt){typeof dt=="function"?dt(lt):dt!=null&&(dt.current=lt)})}}function clamp(ft,lt,dt){return Math.max(lt,Math.min(ft,dt))}const V$1={toVector(ft,lt){return ft===void 0&&(ft=lt),Array.isArray(ft)?ft:[ft,ft]},add(ft,lt){return[ft[0]+lt[0],ft[1]+lt[1]]},sub(ft,lt){return[ft[0]-lt[0],ft[1]-lt[1]]},addTo(ft,lt){ft[0]+=lt[0],ft[1]+=lt[1]},subTo(ft,lt){ft[0]-=lt[0],ft[1]-=lt[1]}};function rubberband(ft,lt,dt){return lt===0||Math.abs(lt)===1/0?Math.pow(ft,dt*5):ft*lt*dt/(lt+dt*ft)}function rubberbandIfOutOfBounds(ft,lt,dt,vt=.15){return vt===0?clamp(ft,lt,dt):ft<lt?-rubberband(lt-ft,dt-lt,vt)+lt:ft>dt?+rubberband(ft-dt,dt-lt,vt)+dt:ft}function computeRubberband(ft,[lt,dt],[vt,Tt]){const[[Et,Ct],[Rt,kt]]=ft;return[rubberbandIfOutOfBounds(lt,Et,Ct,vt),rubberbandIfOutOfBounds(dt,Rt,kt,Tt)]}function _toPrimitive$1(ft,lt){if(typeof ft!="object"||ft===null)return ft;var dt=ft[Symbol.toPrimitive];if(dt!==void 0){var vt=dt.call(ft,lt||"default");if(typeof vt!="object")return vt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(lt==="string"?String:Number)(ft)}function _toPropertyKey$1(ft){var lt=_toPrimitive$1(ft,"string");return typeof lt=="symbol"?lt:String(lt)}function _defineProperty$1(ft,lt,dt){return lt=_toPropertyKey$1(lt),lt in ft?Object.defineProperty(ft,lt,{value:dt,enumerable:!0,configurable:!0,writable:!0}):ft[lt]=dt,ft}function ownKeys(ft,lt){var dt=Object.keys(ft);if(Object.getOwnPropertySymbols){var vt=Object.getOwnPropertySymbols(ft);lt&&(vt=vt.filter(function(Tt){return Object.getOwnPropertyDescriptor(ft,Tt).enumerable})),dt.push.apply(dt,vt)}return dt}function _objectSpread2(ft){for(var lt=1;lt<arguments.length;lt++){var dt=arguments[lt]!=null?arguments[lt]:{};lt%2?ownKeys(Object(dt),!0).forEach(function(vt){_defineProperty$1(ft,vt,dt[vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ft,Object.getOwnPropertyDescriptors(dt)):ownKeys(Object(dt)).forEach(function(vt){Object.defineProperty(ft,vt,Object.getOwnPropertyDescriptor(dt,vt))})}return ft}const EVENT_TYPE_MAP={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function capitalize(ft){return ft?ft[0].toUpperCase()+ft.slice(1):""}const actionsWithoutCaptureSupported=["enter","leave"];function hasCapture(ft=!1,lt){return ft&&!actionsWithoutCaptureSupported.includes(lt)}function toHandlerProp(ft,lt="",dt=!1){const vt=EVENT_TYPE_MAP[ft],Tt=vt&&vt[lt]||lt;return"on"+capitalize(ft)+capitalize(Tt)+(hasCapture(dt,Tt)?"Capture":"")}const pointerCaptureEvents=["gotpointercapture","lostpointercapture"];function parseProp(ft){let lt=ft.substring(2).toLowerCase();const dt=!!~lt.indexOf("passive");dt&&(lt=lt.replace("passive",""));const vt=pointerCaptureEvents.includes(lt)?"capturecapture":"capture",Tt=!!~lt.indexOf(vt);return Tt&&(lt=lt.replace("capture","")),{device:lt,capture:Tt,passive:dt}}function toDomEventType(ft,lt=""){const dt=EVENT_TYPE_MAP[ft],vt=dt&&dt[lt]||lt;return ft+vt}function isTouch(ft){return"touches"in ft}function getPointerType(ft){return isTouch(ft)?"touch":"pointerType"in ft?ft.pointerType:"mouse"}function getCurrentTargetTouchList(ft){return Array.from(ft.touches).filter(lt=>{var dt,vt;return lt.target===ft.currentTarget||((dt=ft.currentTarget)===null||dt===void 0||(vt=dt.contains)===null||vt===void 0?void 0:vt.call(dt,lt.target))})}function getTouchList(ft){return ft.type==="touchend"||ft.type==="touchcancel"?ft.changedTouches:ft.targetTouches}function getValueEvent(ft){return isTouch(ft)?getTouchList(ft)[0]:ft}function distanceAngle(ft,lt){const dt=lt.clientX-ft.clientX,vt=lt.clientY-ft.clientY,Tt=(lt.clientX+ft.clientX)/2,Et=(lt.clientY+ft.clientY)/2,Ct=Math.hypot(dt,vt);return{angle:-(Math.atan2(dt,vt)*180)/Math.PI,distance:Ct,origin:[Tt,Et]}}function touchIds(ft){return getCurrentTargetTouchList(ft).map(lt=>lt.identifier)}function touchDistanceAngle(ft,lt){const[dt,vt]=Array.from(ft.touches).filter(Tt=>lt.includes(Tt.identifier));return distanceAngle(dt,vt)}function pointerId(ft){const lt=getValueEvent(ft);return isTouch(ft)?lt.identifier:lt.pointerId}function pointerValues(ft){const lt=getValueEvent(ft);return[lt.clientX,lt.clientY]}const LINE_HEIGHT=40,PAGE_HEIGHT=800;function wheelValues(ft){let{deltaX:lt,deltaY:dt,deltaMode:vt}=ft;return vt===1?(lt*=LINE_HEIGHT,dt*=LINE_HEIGHT):vt===2&&(lt*=PAGE_HEIGHT,dt*=PAGE_HEIGHT),[lt,dt]}function scrollValues(ft){var lt,dt;const{scrollX:vt,scrollY:Tt,scrollLeft:Et,scrollTop:Ct}=ft.currentTarget;return[(lt=vt??Et)!==null&&lt!==void 0?lt:0,(dt=Tt??Ct)!==null&&dt!==void 0?dt:0]}function getEventDetails(ft){const lt={};if("buttons"in ft&&(lt.buttons=ft.buttons),"shiftKey"in ft){const{shiftKey:dt,altKey:vt,metaKey:Tt,ctrlKey:Et}=ft;Object.assign(lt,{shiftKey:dt,altKey:vt,metaKey:Tt,ctrlKey:Et})}return lt}function call(ft,...lt){return typeof ft=="function"?ft(...lt):ft}function noop(){}function chain(...ft){return ft.length===0?noop:ft.length===1?ft[0]:function(){let lt;for(const dt of ft)lt=dt.apply(this,arguments)||lt;return lt}}function assignDefault(ft,lt){return Object.assign({},lt,ft||{})}const BEFORE_LAST_KINEMATICS_DELAY=32;class Engine{constructor(lt,dt,vt){this.ctrl=lt,this.args=dt,this.key=vt,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(lt){this.ctrl.state[this.key]=lt}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:lt,shared:dt,ingKey:vt,args:Tt}=this;dt[vt]=lt._active=lt.active=lt._blocked=lt._force=!1,lt._step=[!1,!1],lt.intentional=!1,lt._movement=[0,0],lt._distance=[0,0],lt._direction=[0,0],lt._delta=[0,0],lt._bounds=[[-1/0,1/0],[-1/0,1/0]],lt.args=Tt,lt.axis=void 0,lt.memo=void 0,lt.elapsedTime=0,lt.direction=[0,0],lt.distance=[0,0],lt.overflow=[0,0],lt._movementBound=[!1,!1],lt.velocity=[0,0],lt.movement=[0,0],lt.delta=[0,0],lt.timeStamp=0}start(lt){const dt=this.state,vt=this.config;dt._active||(this.reset(),this.computeInitial(),dt._active=!0,dt.target=lt.target,dt.currentTarget=lt.currentTarget,dt.lastOffset=vt.from?call(vt.from,dt):dt.offset,dt.offset=dt.lastOffset),dt.startTime=dt.timeStamp=lt.timeStamp}computeValues(lt){const dt=this.state;dt._values=lt,dt.values=this.config.transform(lt)}computeInitial(){const lt=this.state;lt._initial=lt._values,lt.initial=lt.values}compute(lt){const{state:dt,config:vt,shared:Tt}=this;dt.args=this.args;let Et=0;if(lt&&(dt.event=lt,vt.preventDefault&&lt.cancelable&&dt.event.preventDefault(),dt.type=lt.type,Tt.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,Tt.locked=!!document.pointerLockElement,Object.assign(Tt,getEventDetails(lt)),Tt.down=Tt.pressed=Tt.buttons%2===1||Tt.touches>0,Et=lt.timeStamp-dt.timeStamp,dt.timeStamp=lt.timeStamp,dt.elapsedTime=dt.timeStamp-dt.startTime),dt._active){const En=dt._delta.map(Math.abs);V$1.addTo(dt._distance,En)}this.axisIntent&&this.axisIntent(lt);const[Ct,Rt]=dt._movement,[kt,Dt]=vt.threshold,{_step:Bt,values:Ft}=dt;if(vt.hasCustomTransform?(Bt[0]===!1&&(Bt[0]=Math.abs(Ct)>=kt&&Ft[0]),Bt[1]===!1&&(Bt[1]=Math.abs(Rt)>=Dt&&Ft[1])):(Bt[0]===!1&&(Bt[0]=Math.abs(Ct)>=kt&&Math.sign(Ct)*kt),Bt[1]===!1&&(Bt[1]=Math.abs(Rt)>=Dt&&Math.sign(Rt)*Dt)),dt.intentional=Bt[0]!==!1||Bt[1]!==!1,!dt.intentional)return;const Ut=[0,0];if(vt.hasCustomTransform){const[En,An]=Ft;Ut[0]=Bt[0]!==!1?En-Bt[0]:0,Ut[1]=Bt[1]!==!1?An-Bt[1]:0}else Ut[0]=Bt[0]!==!1?Ct-Bt[0]:0,Ut[1]=Bt[1]!==!1?Rt-Bt[1]:0;this.restrictToAxis&&!dt._blocked&&this.restrictToAxis(Ut);const Zt=dt.offset,Kt=dt._active&&!dt._blocked||dt.active;Kt&&(dt.first=dt._active&&!dt.active,dt.last=!dt._active&&dt.active,dt.active=Tt[this.ingKey]=dt._active,lt&&(dt.first&&("bounds"in vt&&(dt._bounds=call(vt.bounds,dt)),this.setup&&this.setup()),dt.movement=Ut,this.computeOffset()));const[ln,hn]=dt.offset,[[dn,pn],[mn,On]]=dt._bounds;dt.overflow=[ln<dn?-1:ln>pn?1:0,hn<mn?-1:hn>On?1:0],dt._movementBound[0]=dt.overflow[0]?dt._movementBound[0]===!1?dt._movement[0]:dt._movementBound[0]:!1,dt._movementBound[1]=dt.overflow[1]?dt._movementBound[1]===!1?dt._movement[1]:dt._movementBound[1]:!1;const bn=dt._active?vt.rubberband||[0,0]:[0,0];if(dt.offset=computeRubberband(dt._bounds,dt.offset,bn),dt.delta=V$1.sub(dt.offset,Zt),this.computeMovement(),Kt&&(!dt.last||Et>BEFORE_LAST_KINEMATICS_DELAY)){dt.delta=V$1.sub(dt.offset,Zt);const En=dt.delta.map(Math.abs);V$1.addTo(dt.distance,En),dt.direction=dt.delta.map(Math.sign),dt._direction=dt._delta.map(Math.sign),!dt.first&&Et>0&&(dt.velocity=[En[0]/Et,En[1]/Et])}}emit(){const lt=this.state,dt=this.shared,vt=this.config;if(lt._active||this.clean(),(lt._blocked||!lt.intentional)&&!lt._force&&!vt.triggerAllEvents)return;const Tt=this.handler(_objectSpread2(_objectSpread2(_objectSpread2({},dt),lt),{},{[this.aliasKey]:lt.values}));Tt!==void 0&&(lt.memo=Tt)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function selectAxis([ft,lt],dt){const vt=Math.abs(ft),Tt=Math.abs(lt);if(vt>Tt&&vt>dt)return"x";if(Tt>vt&&Tt>dt)return"y"}class CoordinatesEngine extends Engine{constructor(...lt){super(...lt),_defineProperty$1(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=V$1.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=V$1.sub(this.state.offset,this.state.lastOffset)}axisIntent(lt){const dt=this.state,vt=this.config;if(!dt.axis&&lt){const Tt=typeof vt.axisThreshold=="object"?vt.axisThreshold[getPointerType(lt)]:vt.axisThreshold;dt.axis=selectAxis(dt._movement,Tt)}dt._blocked=(vt.lockDirection||!!vt.axis)&&!dt.axis||!!vt.axis&&vt.axis!==dt.axis}restrictToAxis(lt){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":lt[1]=0;break;case"y":lt[0]=0;break}}}const identity=ft=>ft,DEFAULT_RUBBERBAND=.15,commonConfigResolver={enabled(ft=!0){return ft},eventOptions(ft,lt,dt){return _objectSpread2(_objectSpread2({},dt.shared.eventOptions),ft)},preventDefault(ft=!1){return ft},triggerAllEvents(ft=!1){return ft},rubberband(ft=0){switch(ft){case!0:return[DEFAULT_RUBBERBAND,DEFAULT_RUBBERBAND];case!1:return[0,0];default:return V$1.toVector(ft)}},from(ft){if(typeof ft=="function")return ft;if(ft!=null)return V$1.toVector(ft)},transform(ft,lt,dt){const vt=ft||dt.shared.transform;return this.hasCustomTransform=!!vt,vt||identity},threshold(ft){return V$1.toVector(ft,0)}},DEFAULT_AXIS_THRESHOLD=0,coordinatesConfigResolver=_objectSpread2(_objectSpread2({},commonConfigResolver),{},{axis(ft,lt,{axis:dt}){if(this.lockDirection=dt==="lock",!this.lockDirection)return dt},axisThreshold(ft=DEFAULT_AXIS_THRESHOLD){return ft},bounds(ft={}){if(typeof ft=="function")return Et=>coordinatesConfigResolver.bounds(ft(Et));if("current"in ft)return()=>ft.current;if(typeof HTMLElement=="function"&&ft instanceof HTMLElement)return ft;const{left:lt=-1/0,right:dt=1/0,top:vt=-1/0,bottom:Tt=1/0}=ft;return[[lt,dt],[vt,Tt]]}}),KEYS_DELTA_MAP={ArrowRight:(ft,lt=1)=>[ft*lt,0],ArrowLeft:(ft,lt=1)=>[-1*ft*lt,0],ArrowUp:(ft,lt=1)=>[0,-1*ft*lt],ArrowDown:(ft,lt=1)=>[0,ft*lt]};class DragEngine extends CoordinatesEngine{constructor(...lt){super(...lt),_defineProperty$1(this,"ingKey","dragging")}reset(){super.reset();const lt=this.state;lt._pointerId=void 0,lt._pointerActive=!1,lt._keyboardActive=!1,lt._preventScroll=!1,lt._delayed=!1,lt.swipe=[0,0],lt.tap=!1,lt.canceled=!1,lt.cancel=this.cancel.bind(this)}setup(){const lt=this.state;if(lt._bounds instanceof HTMLElement){const dt=lt._bounds.getBoundingClientRect(),vt=lt.currentTarget.getBoundingClientRect(),Tt={left:dt.left-vt.left+lt.offset[0],right:dt.right-vt.right+lt.offset[0],top:dt.top-vt.top+lt.offset[1],bottom:dt.bottom-vt.bottom+lt.offset[1]};lt._bounds=coordinatesConfigResolver.bounds(Tt)}}cancel(){const lt=this.state;lt.canceled||(lt.canceled=!0,lt._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(lt){const dt=this.config,vt=this.state;if(lt.buttons!=null&&(Array.isArray(dt.pointerButtons)?!dt.pointerButtons.includes(lt.buttons):dt.pointerButtons!==-1&&dt.pointerButtons!==lt.buttons))return;const Tt=this.ctrl.setEventIds(lt);dt.pointerCapture&&lt.target.setPointerCapture(lt.pointerId),!(Tt&&Tt.size>1&&vt._pointerActive)&&(this.start(lt),this.setupPointer(lt),vt._pointerId=pointerId(lt),vt._pointerActive=!0,this.computeValues(pointerValues(lt)),this.computeInitial(),dt.preventScrollAxis&&getPointerType(lt)!=="mouse"?(vt._active=!1,this.setupScrollPrevention(lt)):dt.delay>0?(this.setupDelayTrigger(lt),dt.triggerAllEvents&&(this.compute(lt),this.emit())):this.startPointerDrag(lt))}startPointerDrag(lt){const dt=this.state;dt._active=!0,dt._preventScroll=!0,dt._delayed=!1,this.compute(lt),this.emit()}pointerMove(lt){const dt=this.state,vt=this.config;if(!dt._pointerActive||dt.type===lt.type&&lt.timeStamp===dt.timeStamp)return;const Tt=pointerId(lt);if(dt._pointerId!==void 0&&Tt!==dt._pointerId)return;const Et=pointerValues(lt);if(document.pointerLockElement===lt.target?dt._delta=[lt.movementX,lt.movementY]:(dt._delta=V$1.sub(Et,dt._values),this.computeValues(Et)),V$1.addTo(dt._movement,dt._delta),this.compute(lt),dt._delayed&&dt.intentional){this.timeoutStore.remove("dragDelay"),dt.active=!1,this.startPointerDrag(lt);return}if(vt.preventScrollAxis&&!dt._preventScroll)if(dt.axis)if(dt.axis===vt.preventScrollAxis||vt.preventScrollAxis==="xy"){dt._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(lt);return}else return;this.emit()}pointerUp(lt){this.ctrl.setEventIds(lt);try{this.config.pointerCapture&&lt.target.hasPointerCapture(lt.pointerId)&&lt.target.releasePointerCapture(lt.pointerId)}catch{}const dt=this.state,vt=this.config;if(!dt._active||!dt._pointerActive)return;const Tt=pointerId(lt);if(dt._pointerId!==void 0&&Tt!==dt._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(lt);const[Et,Ct]=dt._distance;if(dt.tap=Et<=vt.tapsThreshold&&Ct<=vt.tapsThreshold,dt.tap&&vt.filterTaps)dt._force=!0;else{const[Rt,kt]=dt.direction,[Dt,Bt]=dt.velocity,[Ft,Ut]=dt.movement,[Zt,Kt]=vt.swipe.velocity,[ln,hn]=vt.swipe.distance,dn=vt.swipe.duration;dt.elapsedTime<dn&&(Math.abs(Dt)>Zt&&Math.abs(Ft)>ln&&(dt.swipe[0]=Rt),Math.abs(Bt)>Kt&&Math.abs(Ut)>hn&&(dt.swipe[1]=kt))}this.emit()}pointerClick(lt){!this.state.tap&&lt.detail>0&&(lt.preventDefault(),lt.stopPropagation())}setupPointer(lt){const dt=this.config,vt=dt.device;dt.pointerLock&&lt.currentTarget.requestPointerLock(),dt.pointerCapture||(this.eventStore.add(this.sharedConfig.window,vt,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,vt,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,vt,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(lt){this.state._preventScroll&&lt.cancelable&&lt.preventDefault()}setupScrollPrevention(lt){this.state._preventScroll=!1,persistEvent(lt);const dt=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",dt),this.eventStore.add(this.sharedConfig.window,"touch","cancel",dt),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,lt)}setupDelayTrigger(lt){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(lt)},this.config.delay)}keyDown(lt){const dt=KEYS_DELTA_MAP[lt.key];if(dt){const vt=this.state,Tt=lt.shiftKey?10:lt.altKey?.1:1;this.start(lt),vt._delta=dt(this.config.keyboardDisplacement,Tt),vt._keyboardActive=!0,V$1.addTo(vt._movement,vt._delta),this.compute(lt),this.emit()}}keyUp(lt){lt.key in KEYS_DELTA_MAP&&(this.state._keyboardActive=!1,this.setActive(),this.compute(lt),this.emit())}bind(lt){const dt=this.config.device;lt(dt,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(lt(dt,"change",this.pointerMove.bind(this)),lt(dt,"end",this.pointerUp.bind(this)),lt(dt,"cancel",this.pointerUp.bind(this)),lt("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(lt("key","down",this.keyDown.bind(this)),lt("key","up",this.keyUp.bind(this))),this.config.filterTaps&&lt("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function persistEvent(ft){"persist"in ft&&typeof ft.persist=="function"&&ft.persist()}const isBrowser=typeof window<"u"&&window.document&&window.document.createElement;function supportsTouchEvents(){return isBrowser&&"ontouchstart"in window}function isTouchScreen(){return supportsTouchEvents()||isBrowser&&window.navigator.maxTouchPoints>1}function supportsPointerEvents(){return isBrowser&&"onpointerdown"in window}function supportsPointerLock(){return isBrowser&&"exitPointerLock"in window.document}function supportsGestureEvents(){try{return"constructor"in GestureEvent}catch{return!1}}const SUPPORT={isBrowser,gesture:supportsGestureEvents(),touch:isTouchScreen(),touchscreen:isTouchScreen(),pointer:supportsPointerEvents(),pointerLock:supportsPointerLock()},DEFAULT_PREVENT_SCROLL_DELAY=250,DEFAULT_DRAG_DELAY=180,DEFAULT_SWIPE_VELOCITY=.5,DEFAULT_SWIPE_DISTANCE=50,DEFAULT_SWIPE_DURATION=250,DEFAULT_KEYBOARD_DISPLACEMENT=10,DEFAULT_DRAG_AXIS_THRESHOLD={mouse:0,touch:0,pen:8},dragConfigResolver=_objectSpread2(_objectSpread2({},coordinatesConfigResolver),{},{device(ft,lt,{pointer:{touch:dt=!1,lock:vt=!1,mouse:Tt=!1}={}}){return this.pointerLock=vt&&SUPPORT.pointerLock,SUPPORT.touch&&dt?"touch":this.pointerLock?"mouse":SUPPORT.pointer&&!Tt?"pointer":SUPPORT.touch?"touch":"mouse"},preventScrollAxis(ft,lt,{preventScroll:dt}){if(this.preventScrollDelay=typeof dt=="number"?dt:dt||dt===void 0&&ft?DEFAULT_PREVENT_SCROLL_DELAY:void 0,!(!SUPPORT.touchscreen||dt===!1))return ft||(dt!==void 0?"y":void 0)},pointerCapture(ft,lt,{pointer:{capture:dt=!0,buttons:vt=1,keys:Tt=!0}={}}){return this.pointerButtons=vt,this.keys=Tt,!this.pointerLock&&this.device==="pointer"&&dt},threshold(ft,lt,{filterTaps:dt=!1,tapsThreshold:vt=3,axis:Tt=void 0}){const Et=V$1.toVector(ft,dt?vt:Tt?1:0);return this.filterTaps=dt,this.tapsThreshold=vt,Et},swipe({velocity:ft=DEFAULT_SWIPE_VELOCITY,distance:lt=DEFAULT_SWIPE_DISTANCE,duration:dt=DEFAULT_SWIPE_DURATION}={}){return{velocity:this.transform(V$1.toVector(ft)),distance:this.transform(V$1.toVector(lt)),duration:dt}},delay(ft=0){switch(ft){case!0:return DEFAULT_DRAG_DELAY;case!1:return 0;default:return ft}},axisThreshold(ft){return ft?_objectSpread2(_objectSpread2({},DEFAULT_DRAG_AXIS_THRESHOLD),ft):DEFAULT_DRAG_AXIS_THRESHOLD},keyboardDisplacement(ft=DEFAULT_KEYBOARD_DISPLACEMENT){return ft}});function clampStateInternalMovementToBounds(ft){const[lt,dt]=ft.overflow,[vt,Tt]=ft._delta,[Et,Ct]=ft._direction;(lt<0&&vt>0&&Et<0||lt>0&&vt<0&&Et>0)&&(ft._movement[0]=ft._movementBound[0]),(dt<0&&Tt>0&&Ct<0||dt>0&&Tt<0&&Ct>0)&&(ft._movement[1]=ft._movementBound[1])}const SCALE_ANGLE_RATIO_INTENT_DEG=30,PINCH_WHEEL_RATIO=100;class PinchEngine extends Engine{constructor(...lt){super(...lt),_defineProperty$1(this,"ingKey","pinching"),_defineProperty$1(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const lt=this.state;lt._touchIds=[],lt.canceled=!1,lt.cancel=this.cancel.bind(this),lt.turns=0}computeOffset(){const{type:lt,movement:dt,lastOffset:vt}=this.state;lt==="wheel"?this.state.offset=V$1.add(dt,vt):this.state.offset=[(1+dt[0])*vt[0],dt[1]+vt[1]]}computeMovement(){const{offset:lt,lastOffset:dt}=this.state;this.state.movement=[lt[0]/dt[0],lt[1]-dt[1]]}axisIntent(){const lt=this.state,[dt,vt]=lt._movement;if(!lt.axis){const Tt=Math.abs(dt)*SCALE_ANGLE_RATIO_INTENT_DEG-Math.abs(vt);Tt<0?lt.axis="angle":Tt>0&&(lt.axis="scale")}}restrictToAxis(lt){this.config.lockDirection&&(this.state.axis==="scale"?lt[1]=0:this.state.axis==="angle"&&(lt[0]=0))}cancel(){const lt=this.state;lt.canceled||setTimeout(()=>{lt.canceled=!0,lt._active=!1,this.compute(),this.emit()},0)}touchStart(lt){this.ctrl.setEventIds(lt);const dt=this.state,vt=this.ctrl.touchIds;if(dt._active&&dt._touchIds.every(Et=>vt.has(Et))||vt.size<2)return;this.start(lt),dt._touchIds=Array.from(vt).slice(0,2);const Tt=touchDistanceAngle(lt,dt._touchIds);this.pinchStart(lt,Tt)}pointerStart(lt){if(lt.buttons!=null&&lt.buttons%2!==1)return;this.ctrl.setEventIds(lt),lt.target.setPointerCapture(lt.pointerId);const dt=this.state,vt=dt._pointerEvents,Tt=this.ctrl.pointerIds;if(dt._active&&Array.from(vt.keys()).every(Ct=>Tt.has(Ct))||(vt.size<2&&vt.set(lt.pointerId,lt),dt._pointerEvents.size<2))return;this.start(lt);const Et=distanceAngle(...Array.from(vt.values()));this.pinchStart(lt,Et)}pinchStart(lt,dt){const vt=this.state;vt.origin=dt.origin,this.computeValues([dt.distance,dt.angle]),this.computeInitial(),this.compute(lt),this.emit()}touchMove(lt){if(!this.state._active)return;const dt=touchDistanceAngle(lt,this.state._touchIds);this.pinchMove(lt,dt)}pointerMove(lt){const dt=this.state._pointerEvents;if(dt.has(lt.pointerId)&&dt.set(lt.pointerId,lt),!this.state._active)return;const vt=distanceAngle(...Array.from(dt.values()));this.pinchMove(lt,vt)}pinchMove(lt,dt){const vt=this.state,Tt=vt._values[1],Et=dt.angle-Tt;let Ct=0;Math.abs(Et)>270&&(Ct+=Math.sign(Et)),this.computeValues([dt.distance,dt.angle-360*Ct]),vt.origin=dt.origin,vt.turns=Ct,vt._movement=[vt._values[0]/vt._initial[0]-1,vt._values[1]-vt._initial[1]],this.compute(lt),this.emit()}touchEnd(lt){this.ctrl.setEventIds(lt),this.state._active&&this.state._touchIds.some(dt=>!this.ctrl.touchIds.has(dt))&&(this.state._active=!1,this.compute(lt),this.emit())}pointerEnd(lt){const dt=this.state;this.ctrl.setEventIds(lt);try{lt.target.releasePointerCapture(lt.pointerId)}catch{}dt._pointerEvents.has(lt.pointerId)&&dt._pointerEvents.delete(lt.pointerId),dt._active&&dt._pointerEvents.size<2&&(dt._active=!1,this.compute(lt),this.emit())}gestureStart(lt){lt.cancelable&&lt.preventDefault();const dt=this.state;dt._active||(this.start(lt),this.computeValues([lt.scale,lt.rotation]),dt.origin=[lt.clientX,lt.clientY],this.compute(lt),this.emit())}gestureMove(lt){if(lt.cancelable&&lt.preventDefault(),!this.state._active)return;const dt=this.state;this.computeValues([lt.scale,lt.rotation]),dt.origin=[lt.clientX,lt.clientY];const vt=dt._movement;dt._movement=[lt.scale-1,lt.rotation],dt._delta=V$1.sub(dt._movement,vt),this.compute(lt),this.emit()}gestureEnd(lt){this.state._active&&(this.state._active=!1,this.compute(lt),this.emit())}wheel(lt){const dt=this.config.modifierKey;dt&&!lt[dt]||(this.state._active?this.wheelChange(lt):this.wheelStart(lt),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(lt){this.start(lt),this.wheelChange(lt)}wheelChange(lt){"uv"in lt||lt.cancelable&&lt.preventDefault();const vt=this.state;vt._delta=[-wheelValues(lt)[1]/PINCH_WHEEL_RATIO*vt.offset[0],0],V$1.addTo(vt._movement,vt._delta),clampStateInternalMovementToBounds(vt),this.state.origin=[lt.clientX,lt.clientY],this.compute(lt),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(lt){const dt=this.config.device;dt&&(lt(dt,"start",this[dt+"Start"].bind(this)),lt(dt,"change",this[dt+"Move"].bind(this)),lt(dt,"end",this[dt+"End"].bind(this)),lt(dt,"cancel",this[dt+"End"].bind(this))),this.config.pinchOnWheel&&lt("wheel","",this.wheel.bind(this),{passive:!1})}}const pinchConfigResolver=_objectSpread2(_objectSpread2({},commonConfigResolver),{},{device(ft,lt,{shared:dt,pointer:{touch:vt=!1}={}}){if(dt.target&&!SUPPORT.touch&&SUPPORT.gesture)return"gesture";if(SUPPORT.touch&&vt)return"touch";if(SUPPORT.touchscreen){if(SUPPORT.pointer)return"pointer";if(SUPPORT.touch)return"touch"}},bounds(ft,lt,{scaleBounds:dt={},angleBounds:vt={}}){const Tt=Ct=>{const Rt=assignDefault(call(dt,Ct),{min:-1/0,max:1/0});return[Rt.min,Rt.max]},Et=Ct=>{const Rt=assignDefault(call(vt,Ct),{min:-1/0,max:1/0});return[Rt.min,Rt.max]};return typeof dt!="function"&&typeof vt!="function"?[Tt(),Et()]:Ct=>[Tt(Ct),Et(Ct)]},threshold(ft,lt,dt){return this.lockDirection=dt.axis==="lock",V$1.toVector(ft,this.lockDirection?[.1,3]:0)},modifierKey(ft){return ft===void 0?"ctrlKey":ft},pinchOnWheel(ft=!0){return ft}});class MoveEngine extends CoordinatesEngine{constructor(...lt){super(...lt),_defineProperty$1(this,"ingKey","moving")}move(lt){this.config.mouseOnly&&lt.pointerType!=="mouse"||(this.state._active?this.moveChange(lt):this.moveStart(lt),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(lt){this.start(lt),this.computeValues(pointerValues(lt)),this.compute(lt),this.computeInitial(),this.emit()}moveChange(lt){if(!this.state._active)return;const dt=pointerValues(lt),vt=this.state;vt._delta=V$1.sub(dt,vt._values),V$1.addTo(vt._movement,vt._delta),this.computeValues(dt),this.compute(lt),this.emit()}moveEnd(lt){this.state._active&&(this.state._active=!1,this.compute(lt),this.emit())}bind(lt){lt("pointer","change",this.move.bind(this)),lt("pointer","leave",this.moveEnd.bind(this))}}const moveConfigResolver=_objectSpread2(_objectSpread2({},coordinatesConfigResolver),{},{mouseOnly:(ft=!0)=>ft});class ScrollEngine extends CoordinatesEngine{constructor(...lt){super(...lt),_defineProperty$1(this,"ingKey","scrolling")}scroll(lt){this.state._active||this.start(lt),this.scrollChange(lt),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(lt){lt.cancelable&&lt.preventDefault();const dt=this.state,vt=scrollValues(lt);dt._delta=V$1.sub(vt,dt._values),V$1.addTo(dt._movement,dt._delta),this.computeValues(vt),this.compute(lt),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(lt){lt("scroll","",this.scroll.bind(this))}}const scrollConfigResolver=coordinatesConfigResolver;class WheelEngine extends CoordinatesEngine{constructor(...lt){super(...lt),_defineProperty$1(this,"ingKey","wheeling")}wheel(lt){this.state._active||this.start(lt),this.wheelChange(lt),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(lt){const dt=this.state;dt._delta=wheelValues(lt),V$1.addTo(dt._movement,dt._delta),clampStateInternalMovementToBounds(dt),this.compute(lt),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(lt){lt("wheel","",this.wheel.bind(this))}}const wheelConfigResolver=coordinatesConfigResolver;class HoverEngine extends CoordinatesEngine{constructor(...lt){super(...lt),_defineProperty$1(this,"ingKey","hovering")}enter(lt){this.config.mouseOnly&&lt.pointerType!=="mouse"||(this.start(lt),this.computeValues(pointerValues(lt)),this.compute(lt),this.emit())}leave(lt){if(this.config.mouseOnly&&lt.pointerType!=="mouse")return;const dt=this.state;if(!dt._active)return;dt._active=!1;const vt=pointerValues(lt);dt._movement=dt._delta=V$1.sub(vt,dt._values),this.computeValues(vt),this.compute(lt),dt.delta=dt.movement,this.emit()}bind(lt){lt("pointer","enter",this.enter.bind(this)),lt("pointer","leave",this.leave.bind(this))}}const hoverConfigResolver=_objectSpread2(_objectSpread2({},coordinatesConfigResolver),{},{mouseOnly:(ft=!0)=>ft}),EngineMap=new Map,ConfigResolverMap=new Map;function registerAction(ft){EngineMap.set(ft.key,ft.engine),ConfigResolverMap.set(ft.key,ft.resolver)}const dragAction={key:"drag",engine:DragEngine,resolver:dragConfigResolver},hoverAction={key:"hover",engine:HoverEngine,resolver:hoverConfigResolver},moveAction={key:"move",engine:MoveEngine,resolver:moveConfigResolver},pinchAction={key:"pinch",engine:PinchEngine,resolver:pinchConfigResolver},scrollAction={key:"scroll",engine:ScrollEngine,resolver:scrollConfigResolver},wheelAction={key:"wheel",engine:WheelEngine,resolver:wheelConfigResolver};function _objectWithoutPropertiesLoose$1(ft,lt){if(ft==null)return{};var dt={},vt=Object.keys(ft),Tt,Et;for(Et=0;Et<vt.length;Et++)Tt=vt[Et],!(lt.indexOf(Tt)>=0)&&(dt[Tt]=ft[Tt]);return dt}function _objectWithoutProperties(ft,lt){if(ft==null)return{};var dt=_objectWithoutPropertiesLoose$1(ft,lt),vt,Tt;if(Object.getOwnPropertySymbols){var Et=Object.getOwnPropertySymbols(ft);for(Tt=0;Tt<Et.length;Tt++)vt=Et[Tt],!(lt.indexOf(vt)>=0)&&Object.prototype.propertyIsEnumerable.call(ft,vt)&&(dt[vt]=ft[vt])}return dt}const sharedConfigResolver={target(ft){if(ft)return()=>"current"in ft?ft.current:ft},enabled(ft=!0){return ft},window(ft=SUPPORT.isBrowser?window:void 0){return ft},eventOptions({passive:ft=!0,capture:lt=!1}={}){return{passive:ft,capture:lt}},transform(ft){return ft}},_excluded$1=["target","eventOptions","window","enabled","transform"];function resolveWith(ft={},lt){const dt={};for(const[vt,Tt]of Object.entries(lt))switch(typeof Tt){case"function":dt[vt]=Tt.call(dt,ft[vt],vt,ft);break;case"object":dt[vt]=resolveWith(ft[vt],Tt);break;case"boolean":Tt&&(dt[vt]=ft[vt]);break}return dt}function parse(ft,lt,dt={}){const vt=ft,{target:Tt,eventOptions:Et,window:Ct,enabled:Rt,transform:kt}=vt,Dt=_objectWithoutProperties(vt,_excluded$1);if(dt.shared=resolveWith({target:Tt,eventOptions:Et,window:Ct,enabled:Rt,transform:kt},sharedConfigResolver),lt){const Bt=ConfigResolverMap.get(lt);dt[lt]=resolveWith(_objectSpread2({shared:dt.shared},Dt),Bt)}else for(const Bt in Dt){const Ft=ConfigResolverMap.get(Bt);Ft&&(dt[Bt]=resolveWith(_objectSpread2({shared:dt.shared},Dt[Bt]),Ft))}return dt}class EventStore{constructor(lt,dt){_defineProperty$1(this,"_listeners",new Set),this._ctrl=lt,this._gestureKey=dt}add(lt,dt,vt,Tt,Et){const Ct=this._listeners,Rt=toDomEventType(dt,vt),kt=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},Dt=_objectSpread2(_objectSpread2({},kt),Et);lt.addEventListener(Rt,Tt,Dt);const Bt=()=>{lt.removeEventListener(Rt,Tt,Dt),Ct.delete(Bt)};return Ct.add(Bt),Bt}clean(){this._listeners.forEach(lt=>lt()),this._listeners.clear()}}class TimeoutStore{constructor(){_defineProperty$1(this,"_timeouts",new Map)}add(lt,dt,vt=140,...Tt){this.remove(lt),this._timeouts.set(lt,window.setTimeout(dt,vt,...Tt))}remove(lt){const dt=this._timeouts.get(lt);dt&&window.clearTimeout(dt)}clean(){this._timeouts.forEach(lt=>void window.clearTimeout(lt)),this._timeouts.clear()}}class Controller{constructor(lt){_defineProperty$1(this,"gestures",new Set),_defineProperty$1(this,"_targetEventStore",new EventStore(this)),_defineProperty$1(this,"gestureEventStores",{}),_defineProperty$1(this,"gestureTimeoutStores",{}),_defineProperty$1(this,"handlers",{}),_defineProperty$1(this,"config",{}),_defineProperty$1(this,"pointerIds",new Set),_defineProperty$1(this,"touchIds",new Set),_defineProperty$1(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),resolveGestures(this,lt)}setEventIds(lt){if(isTouch(lt))return this.touchIds=new Set(touchIds(lt)),this.touchIds;if("pointerId"in lt)return lt.type==="pointerup"||lt.type==="pointercancel"?this.pointerIds.delete(lt.pointerId):lt.type==="pointerdown"&&this.pointerIds.add(lt.pointerId),this.pointerIds}applyHandlers(lt,dt){this.handlers=lt,this.nativeHandlers=dt}applyConfig(lt,dt){this.config=parse(lt,dt,this.config)}clean(){this._targetEventStore.clean();for(const lt of this.gestures)this.gestureEventStores[lt].clean(),this.gestureTimeoutStores[lt].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...lt){const dt=this.config.shared,vt={};let Tt;if(!(dt.target&&(Tt=dt.target(),!Tt))){if(dt.enabled){for(const Ct of this.gestures){const Rt=this.config[Ct],kt=bindToProps(vt,Rt.eventOptions,!!Tt);if(Rt.enabled){const Dt=EngineMap.get(Ct);new Dt(this,lt,Ct).bind(kt)}}const Et=bindToProps(vt,dt.eventOptions,!!Tt);for(const Ct in this.nativeHandlers)Et(Ct,"",Rt=>this.nativeHandlers[Ct](_objectSpread2(_objectSpread2({},this.state.shared),{},{event:Rt,args:lt})),void 0,!0)}for(const Et in vt)vt[Et]=chain(...vt[Et]);if(!Tt)return vt;for(const Et in vt){const{device:Ct,capture:Rt,passive:kt}=parseProp(Et);this._targetEventStore.add(Tt,Ct,"",vt[Et],{capture:Rt,passive:kt})}}}}function setupGesture(ft,lt){ft.gestures.add(lt),ft.gestureEventStores[lt]=new EventStore(ft,lt),ft.gestureTimeoutStores[lt]=new TimeoutStore}function resolveGestures(ft,lt){lt.drag&&setupGesture(ft,"drag"),lt.wheel&&setupGesture(ft,"wheel"),lt.scroll&&setupGesture(ft,"scroll"),lt.move&&setupGesture(ft,"move"),lt.pinch&&setupGesture(ft,"pinch"),lt.hover&&setupGesture(ft,"hover")}const bindToProps=(ft,lt,dt)=>(vt,Tt,Et,Ct={},Rt=!1)=>{var kt,Dt;const Bt=(kt=Ct.capture)!==null&&kt!==void 0?kt:lt.capture,Ft=(Dt=Ct.passive)!==null&&Dt!==void 0?Dt:lt.passive;let Ut=Rt?vt:toHandlerProp(vt,Tt,Bt);dt&&Ft&&(Ut+="Passive"),ft[Ut]=ft[Ut]||[],ft[Ut].push(Et)},RE_NOT_NATIVE=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function sortHandlers(ft){const lt={},dt={},vt=new Set;for(let Tt in ft)RE_NOT_NATIVE.test(Tt)?(vt.add(RegExp.lastMatch),dt[Tt]=ft[Tt]):lt[Tt]=ft[Tt];return[dt,lt,vt]}function registerGesture(ft,lt,dt,vt,Tt,Et){if(!ft.has(dt)||!EngineMap.has(vt))return;const Ct=dt+"Start",Rt=dt+"End",kt=Dt=>{let Bt;return Dt.first&&Ct in lt&&lt[Ct](Dt),dt in lt&&(Bt=lt[dt](Dt)),Dt.last&&Rt in lt&&lt[Rt](Dt),Bt};Tt[vt]=kt,Et[vt]=Et[vt]||{}}function parseMergedHandlers(ft,lt){const[dt,vt,Tt]=sortHandlers(ft),Et={};return registerGesture(Tt,dt,"onDrag","drag",Et,lt),registerGesture(Tt,dt,"onWheel","wheel",Et,lt),registerGesture(Tt,dt,"onScroll","scroll",Et,lt),registerGesture(Tt,dt,"onPinch","pinch",Et,lt),registerGesture(Tt,dt,"onMove","move",Et,lt),registerGesture(Tt,dt,"onHover","hover",Et,lt),{handlers:Et,config:lt,nativeHandlers:vt}}function useRecognizers(ft,lt={},dt,vt){const Tt=React.useMemo(()=>new Controller(ft),[]);if(Tt.applyHandlers(ft,vt),Tt.applyConfig(lt,dt),React.useEffect(Tt.effect.bind(Tt)),React.useEffect(()=>Tt.clean.bind(Tt),[]),lt.target===void 0)return Tt.bind.bind(Tt)}function useDrag(ft,lt){return registerAction(dragAction),useRecognizers({drag:ft},lt||{},"drag")}function createUseGesture(ft){return ft.forEach(registerAction),function(dt,vt){const{handlers:Tt,nativeHandlers:Et,config:Ct}=parseMergedHandlers(dt,vt||{});return useRecognizers(Tt,Ct,void 0,Et)}}function useGesture(ft,lt){return createUseGesture([dragAction,pinchAction,scrollAction,wheelAction,moveAction,hoverAction])(ft,lt||{})}function _typeof(ft){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(lt){return typeof lt}:function(lt){return lt&&typeof Symbol=="function"&&lt.constructor===Symbol&&lt!==Symbol.prototype?"symbol":typeof lt},_typeof(ft)}function _toPrimitive(ft,lt){if(_typeof(ft)!=="object"||ft===null)return ft;var dt=ft[Symbol.toPrimitive];if(dt!==void 0){var vt=dt.call(ft,lt||"default");if(_typeof(vt)!=="object")return vt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(lt==="string"?String:Number)(ft)}function _toPropertyKey(ft){var lt=_toPrimitive(ft,"string");return _typeof(lt)==="symbol"?lt:String(lt)}function _defineProperty(ft,lt,dt){return lt=_toPropertyKey(lt),lt in ft?Object.defineProperty(ft,lt,{value:dt,enumerable:!0,configurable:!0,writable:!0}):ft[lt]=dt,ft}let Sky$1=class HE extends Mesh{constructor(){super(new BoxGeometry(1,1,1),HE.material)}};_defineProperty(Sky$1,"SkyShader",{uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new Vector3},up:{value:new Vector3(0,1,0)}},vertexShader:["uniform vec3 sunPosition;","uniform float rayleigh;","uniform float turbidity;","uniform float mieCoefficient;","uniform vec3 up;","varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","const float e = 2.71828182845904523536028747135266249775724709369995957;","const float pi = 3.141592653589793238462643383279502884197169;","const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );","const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );","const float v = 4.0;","const vec3 K = vec3( 0.686, 0.678, 0.666 );","const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );","const float cutoffAngle = 1.6110731556870734;","const float steepness = 1.5;","const float EE = 1000.0;","float sunIntensity( float zenithAngleCos ) {","	zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );","	return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );","}","vec3 totalMie( float T ) {","	float c = ( 0.2 * T ) * 10E-18;","	return 0.434 * c * MieConst;","}","void main() {","	vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","	vWorldPosition = worldPosition.xyz;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","	gl_Position.z = gl_Position.w;","	vSunDirection = normalize( sunPosition );","	vSunE = sunIntensity( dot( vSunDirection, up ) );","	vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );","	float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );","	vBetaR = totalRayleigh * rayleighCoefficient;","	vBetaM = totalMie( turbidity ) * mieCoefficient;","}"].join(`
`),fragmentShader:["varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","uniform float mieDirectionalG;","uniform vec3 up;","const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );","const float pi = 3.141592653589793238462643383279502884197169;","const float n = 1.0003;","const float N = 2.545E25;","const float rayleighZenithLength = 8.4E3;","const float mieZenithLength = 1.25E3;","const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;","const float THREE_OVER_SIXTEENPI = 0.05968310365946075;","const float ONE_OVER_FOURPI = 0.07957747154594767;","float rayleighPhase( float cosTheta ) {","	return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );","}","float hgPhase( float cosTheta, float g ) {","	float g2 = pow( g, 2.0 );","	float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );","	return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );","}","void main() {","	vec3 direction = normalize( vWorldPosition - cameraPos );","	float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );","	float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );","	float sR = rayleighZenithLength * inverse;","	float sM = mieZenithLength * inverse;","	vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );","	float cosTheta = dot( direction, vSunDirection );","	float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );","	vec3 betaRTheta = vBetaR * rPhase;","	float mPhase = hgPhase( cosTheta, mieDirectionalG );","	vec3 betaMTheta = vBetaM * mPhase;","	vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );","	Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );","	float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]","	float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]","	vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );","	vec3 L0 = vec3( 0.1 ) * Fex;","	float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );","	L0 += ( vSunE * 19000.0 * Fex ) * sundisk;","	vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );","	vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );","	gl_FragColor = vec4( retColor, 1.0 );","#include <tonemapping_fragment>","#include <encodings_fragment>","}"].join(`
`)});_defineProperty(Sky$1,"material",new ShaderMaterial({name:"SkyShader",fragmentShader:Sky$1.SkyShader.fragmentShader,vertexShader:Sky$1.SkyShader.vertexShader,uniforms:UniformsUtils.clone(Sky$1.SkyShader.uniforms),side:BackSide,depthWrite:!1}));const moduloWrapAround=(ft,lt)=>(ft%lt+lt)%lt;let OrbitControls$1=class extends EventDispatcher{constructor(lt,dt){super(),_defineProperty(this,"object",void 0),_defineProperty(this,"domElement",void 0),_defineProperty(this,"enabled",!0),_defineProperty(this,"target",new Vector3),_defineProperty(this,"minDistance",0),_defineProperty(this,"maxDistance",1/0),_defineProperty(this,"minZoom",0),_defineProperty(this,"maxZoom",1/0),_defineProperty(this,"minPolarAngle",0),_defineProperty(this,"maxPolarAngle",Math.PI),_defineProperty(this,"minAzimuthAngle",-1/0),_defineProperty(this,"maxAzimuthAngle",1/0),_defineProperty(this,"enableDamping",!1),_defineProperty(this,"dampingFactor",.05),_defineProperty(this,"enableZoom",!0),_defineProperty(this,"zoomSpeed",1),_defineProperty(this,"enableRotate",!0),_defineProperty(this,"rotateSpeed",1),_defineProperty(this,"enablePan",!0),_defineProperty(this,"panSpeed",1),_defineProperty(this,"screenSpacePanning",!0),_defineProperty(this,"keyPanSpeed",7),_defineProperty(this,"autoRotate",!1),_defineProperty(this,"autoRotateSpeed",2),_defineProperty(this,"reverseOrbit",!1),_defineProperty(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),_defineProperty(this,"mouseButtons",{LEFT:MOUSE.ROTATE,MIDDLE:MOUSE.DOLLY,RIGHT:MOUSE.PAN}),_defineProperty(this,"touches",{ONE:TOUCH.ROTATE,TWO:TOUCH.DOLLY_PAN}),_defineProperty(this,"target0",void 0),_defineProperty(this,"position0",void 0),_defineProperty(this,"zoom0",void 0),_defineProperty(this,"_domElementKeyEvents",null),_defineProperty(this,"getPolarAngle",void 0),_defineProperty(this,"getAzimuthalAngle",void 0),_defineProperty(this,"setPolarAngle",void 0),_defineProperty(this,"setAzimuthalAngle",void 0),_defineProperty(this,"getDistance",void 0),_defineProperty(this,"listenToKeyEvents",void 0),_defineProperty(this,"saveState",void 0),_defineProperty(this,"reset",void 0),_defineProperty(this,"update",void 0),_defineProperty(this,"connect",void 0),_defineProperty(this,"dispose",void 0),this.object=lt,this.domElement=dt,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object instanceof PerspectiveCamera?this.object.zoom:1,this.getPolarAngle=()=>Bt.phi,this.getAzimuthalAngle=()=>Bt.theta,this.setPolarAngle=Jn=>{let Tr=moduloWrapAround(Jn,2*Math.PI),Nr=Bt.phi;Nr<0&&(Nr+=2*Math.PI),Tr<0&&(Tr+=2*Math.PI);let xn=Math.abs(Tr-Nr);2*Math.PI-xn<xn&&(Tr<Nr?Tr+=2*Math.PI:Nr+=2*Math.PI),Ft.phi=Tr-Nr,vt.update()},this.setAzimuthalAngle=Jn=>{let Tr=moduloWrapAround(Jn,2*Math.PI),Nr=Bt.theta;Nr<0&&(Nr+=2*Math.PI),Tr<0&&(Tr+=2*Math.PI);let xn=Math.abs(Tr-Nr);2*Math.PI-xn<xn&&(Tr<Nr?Tr+=2*Math.PI:Nr+=2*Math.PI),Ft.theta=Tr-Nr,vt.update()},this.getDistance=()=>vt.object.position.distanceTo(vt.target),this.listenToKeyEvents=Jn=>{Jn.addEventListener("keydown",rr),this._domElementKeyEvents=Jn},this.saveState=()=>{vt.target0.copy(vt.target),vt.position0.copy(vt.object.position),vt.zoom0=vt.object instanceof PerspectiveCamera?vt.object.zoom:1},this.reset=()=>{vt.target.copy(vt.target0),vt.object.position.copy(vt.position0),vt.object instanceof PerspectiveCamera&&(vt.object.zoom=vt.zoom0,vt.object.updateProjectionMatrix()),vt.dispatchEvent(Tt),vt.update(),kt=Rt.NONE},this.update=(()=>{const Jn=new Vector3,Tr=new Quaternion().setFromUnitVectors(lt.up,new Vector3(0,1,0)),Nr=Tr.clone().invert(),xn=new Vector3,Nn=new Quaternion,Zn=2*Math.PI;return function(){const Gn=vt.object.position;Jn.copy(Gn).sub(vt.target),Jn.applyQuaternion(Tr),Bt.setFromVector3(Jn),vt.autoRotate&&kt===Rt.NONE&&Bn(Rn()),vt.enableDamping?(Bt.theta+=Ft.theta*vt.dampingFactor,Bt.phi+=Ft.phi*vt.dampingFactor):(Bt.theta+=Ft.theta,Bt.phi+=Ft.phi);let dr=vt.minAzimuthAngle,Br=vt.maxAzimuthAngle;return isFinite(dr)&&isFinite(Br)&&(dr<-Math.PI?dr+=Zn:dr>Math.PI&&(dr-=Zn),Br<-Math.PI?Br+=Zn:Br>Math.PI&&(Br-=Zn),dr<=Br?Bt.theta=Math.max(dr,Math.min(Br,Bt.theta)):Bt.theta=Bt.theta>(dr+Br)/2?Math.max(dr,Bt.theta):Math.min(Br,Bt.theta)),Bt.phi=Math.max(vt.minPolarAngle,Math.min(vt.maxPolarAngle,Bt.phi)),Bt.makeSafe(),Bt.radius*=Ut,Bt.radius=Math.max(vt.minDistance,Math.min(vt.maxDistance,Bt.radius)),vt.enableDamping===!0?vt.target.addScaledVector(Zt,vt.dampingFactor):vt.target.add(Zt),Jn.setFromSpherical(Bt),Jn.applyQuaternion(Nr),Gn.copy(vt.target).add(Jn),vt.object.lookAt(vt.target),vt.enableDamping===!0?(Ft.theta*=1-vt.dampingFactor,Ft.phi*=1-vt.dampingFactor,Zt.multiplyScalar(1-vt.dampingFactor)):(Ft.set(0,0,0),Zt.set(0,0,0)),Ut=1,Kt||xn.distanceToSquared(vt.object.position)>Dt||8*(1-Nn.dot(vt.object.quaternion))>Dt?(vt.dispatchEvent(Tt),xn.copy(vt.object.position),Nn.copy(vt.object.quaternion),Kt=!1,!0):!1}})(),this.connect=Jn=>{Jn===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),vt.domElement=Jn,vt.domElement.style.touchAction="none",vt.domElement.addEventListener("contextmenu",Fr),vt.domElement.addEventListener("pointerdown",no),vt.domElement.addEventListener("pointercancel",Po),vt.domElement.addEventListener("wheel",Un)},this.dispose=()=>{var Jn,Tr,Nr,xn,Nn,Zn;(Jn=vt.domElement)===null||Jn===void 0||Jn.removeEventListener("contextmenu",Fr),(Tr=vt.domElement)===null||Tr===void 0||Tr.removeEventListener("pointerdown",no),(Nr=vt.domElement)===null||Nr===void 0||Nr.removeEventListener("pointercancel",Po),(xn=vt.domElement)===null||xn===void 0||xn.removeEventListener("wheel",Un),(Nn=vt.domElement)===null||Nn===void 0||Nn.ownerDocument.removeEventListener("pointermove",uo),(Zn=vt.domElement)===null||Zn===void 0||Zn.ownerDocument.removeEventListener("pointerup",ho),vt._domElementKeyEvents!==null&&vt._domElementKeyEvents.removeEventListener("keydown",rr)};const vt=this,Tt={type:"change"},Et={type:"start"},Ct={type:"end"},Rt={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let kt=Rt.NONE;const Dt=1e-6,Bt=new Spherical,Ft=new Spherical;let Ut=1;const Zt=new Vector3;let Kt=!1;const ln=new Vector2,hn=new Vector2,dn=new Vector2,pn=new Vector2,mn=new Vector2,On=new Vector2,bn=new Vector2,En=new Vector2,An=new Vector2,Tn=[],In={};function Rn(){return 2*Math.PI/60/60*vt.autoRotateSpeed}function Dn(){return Math.pow(.95,vt.zoomSpeed)}function Bn(Jn){vt.reverseOrbit?Ft.theta+=Jn:Ft.theta-=Jn}function Hn(Jn){vt.reverseOrbit?Ft.phi+=Jn:Ft.phi-=Jn}const jn=(()=>{const Jn=new Vector3;return function(Nr,xn){Jn.setFromMatrixColumn(xn,0),Jn.multiplyScalar(-Nr),Zt.add(Jn)}})(),Kn=(()=>{const Jn=new Vector3;return function(Nr,xn){vt.screenSpacePanning===!0?Jn.setFromMatrixColumn(xn,1):(Jn.setFromMatrixColumn(xn,0),Jn.crossVectors(vt.object.up,Jn)),Jn.multiplyScalar(Nr),Zt.add(Jn)}})(),zn=(()=>{const Jn=new Vector3;return function(Nr,xn){const Nn=vt.domElement;if(Nn&&vt.object instanceof PerspectiveCamera&&vt.object.isPerspectiveCamera){const Zn=vt.object.position;Jn.copy(Zn).sub(vt.target);let hr=Jn.length();hr*=Math.tan(vt.object.fov/2*Math.PI/180),jn(2*Nr*hr/Nn.clientHeight,vt.object.matrix),Kn(2*xn*hr/Nn.clientHeight,vt.object.matrix)}else Nn&&vt.object instanceof OrthographicCamera$1&&vt.object.isOrthographicCamera?(jn(Nr*(vt.object.right-vt.object.left)/vt.object.zoom/Nn.clientWidth,vt.object.matrix),Kn(xn*(vt.object.top-vt.object.bottom)/vt.object.zoom/Nn.clientHeight,vt.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),vt.enablePan=!1)}})();function lr(Jn){vt.object instanceof PerspectiveCamera&&vt.object.isPerspectiveCamera?Ut/=Jn:vt.object instanceof OrthographicCamera$1&&vt.object.isOrthographicCamera?(vt.object.zoom=Math.max(vt.minZoom,Math.min(vt.maxZoom,vt.object.zoom*Jn)),vt.object.updateProjectionMatrix(),Kt=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),vt.enableZoom=!1)}function Ln(Jn){vt.object instanceof PerspectiveCamera&&vt.object.isPerspectiveCamera?Ut*=Jn:vt.object instanceof OrthographicCamera$1&&vt.object.isOrthographicCamera?(vt.object.zoom=Math.max(vt.minZoom,Math.min(vt.maxZoom,vt.object.zoom/Jn)),vt.object.updateProjectionMatrix(),Kt=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),vt.enableZoom=!1)}function Vn(Jn){ln.set(Jn.clientX,Jn.clientY)}function Wn(Jn){bn.set(Jn.clientX,Jn.clientY)}function sr(Jn){pn.set(Jn.clientX,Jn.clientY)}function Mn(Jn){hn.set(Jn.clientX,Jn.clientY),dn.subVectors(hn,ln).multiplyScalar(vt.rotateSpeed);const Tr=vt.domElement;Tr&&(Bn(2*Math.PI*dn.x/Tr.clientHeight),Hn(2*Math.PI*dn.y/Tr.clientHeight)),ln.copy(hn),vt.update()}function ir(Jn){En.set(Jn.clientX,Jn.clientY),An.subVectors(En,bn),An.y>0?lr(Dn()):An.y<0&&Ln(Dn()),bn.copy(En),vt.update()}function mr(Jn){mn.set(Jn.clientX,Jn.clientY),On.subVectors(mn,pn).multiplyScalar(vt.panSpeed),zn(On.x,On.y),pn.copy(mn),vt.update()}function tr(Jn){Jn.deltaY<0?Ln(Dn()):Jn.deltaY>0&&lr(Dn()),vt.update()}function Dr(Jn){let Tr=!1;switch(Jn.code){case vt.keys.UP:zn(0,vt.keyPanSpeed),Tr=!0;break;case vt.keys.BOTTOM:zn(0,-vt.keyPanSpeed),Tr=!0;break;case vt.keys.LEFT:zn(vt.keyPanSpeed,0),Tr=!0;break;case vt.keys.RIGHT:zn(-vt.keyPanSpeed,0),Tr=!0;break}Tr&&(Jn.preventDefault(),vt.update())}function Sr(){if(Tn.length==1)ln.set(Tn[0].pageX,Tn[0].pageY);else{const Jn=.5*(Tn[0].pageX+Tn[1].pageX),Tr=.5*(Tn[0].pageY+Tn[1].pageY);ln.set(Jn,Tr)}}function Vr(){if(Tn.length==1)pn.set(Tn[0].pageX,Tn[0].pageY);else{const Jn=.5*(Tn[0].pageX+Tn[1].pageX),Tr=.5*(Tn[0].pageY+Tn[1].pageY);pn.set(Jn,Tr)}}function Jr(){const Jn=Tn[0].pageX-Tn[1].pageX,Tr=Tn[0].pageY-Tn[1].pageY,Nr=Math.sqrt(Jn*Jn+Tr*Tr);bn.set(0,Nr)}function Yr(){vt.enableZoom&&Jr(),vt.enablePan&&Vr()}function _i(){vt.enableZoom&&Jr(),vt.enableRotate&&Sr()}function Er(Jn){if(Tn.length==1)hn.set(Jn.pageX,Jn.pageY);else{const Nr=lo(Jn),xn=.5*(Jn.pageX+Nr.x),Nn=.5*(Jn.pageY+Nr.y);hn.set(xn,Nn)}dn.subVectors(hn,ln).multiplyScalar(vt.rotateSpeed);const Tr=vt.domElement;Tr&&(Bn(2*Math.PI*dn.x/Tr.clientHeight),Hn(2*Math.PI*dn.y/Tr.clientHeight)),ln.copy(hn)}function kr(Jn){if(Tn.length==1)mn.set(Jn.pageX,Jn.pageY);else{const Tr=lo(Jn),Nr=.5*(Jn.pageX+Tr.x),xn=.5*(Jn.pageY+Tr.y);mn.set(Nr,xn)}On.subVectors(mn,pn).multiplyScalar(vt.panSpeed),zn(On.x,On.y),pn.copy(mn)}function Qr(Jn){const Tr=lo(Jn),Nr=Jn.pageX-Tr.x,xn=Jn.pageY-Tr.y,Nn=Math.sqrt(Nr*Nr+xn*xn);En.set(0,Nn),An.set(0,Math.pow(En.y/bn.y,vt.zoomSpeed)),lr(An.y),bn.copy(En)}function so(Jn){vt.enableZoom&&Qr(Jn),vt.enablePan&&kr(Jn)}function jr(Jn){vt.enableZoom&&Qr(Jn),vt.enableRotate&&Er(Jn)}function no(Jn){if(vt.enabled!==!1){if(Tn.length===0){var Tr,Nr;(Tr=vt.domElement)===null||Tr===void 0||Tr.ownerDocument.addEventListener("pointermove",uo),(Nr=vt.domElement)===null||Nr===void 0||Nr.ownerDocument.addEventListener("pointerup",ho)}pr(Jn),Jn.pointerType==="touch"?yr(Jn):Wo(Jn)}}function uo(Jn){vt.enabled!==!1&&(Jn.pointerType==="touch"?Ir(Jn):Xn(Jn))}function ho(Jn){if(Zr(Jn),Tn.length===0){var Tr,Nr,xn;(Tr=vt.domElement)===null||Tr===void 0||Tr.releasePointerCapture(Jn.pointerId),(Nr=vt.domElement)===null||Nr===void 0||Nr.ownerDocument.removeEventListener("pointermove",uo),(xn=vt.domElement)===null||xn===void 0||xn.ownerDocument.removeEventListener("pointerup",ho)}vt.dispatchEvent(Ct),kt=Rt.NONE}function Po(Jn){Zr(Jn)}function Wo(Jn){let Tr;switch(Jn.button){case 0:Tr=vt.mouseButtons.LEFT;break;case 1:Tr=vt.mouseButtons.MIDDLE;break;case 2:Tr=vt.mouseButtons.RIGHT;break;default:Tr=-1}switch(Tr){case MOUSE.DOLLY:if(vt.enableZoom===!1)return;Wn(Jn),kt=Rt.DOLLY;break;case MOUSE.ROTATE:if(Jn.ctrlKey||Jn.metaKey||Jn.shiftKey){if(vt.enablePan===!1)return;sr(Jn),kt=Rt.PAN}else{if(vt.enableRotate===!1)return;Vn(Jn),kt=Rt.ROTATE}break;case MOUSE.PAN:if(Jn.ctrlKey||Jn.metaKey||Jn.shiftKey){if(vt.enableRotate===!1)return;Vn(Jn),kt=Rt.ROTATE}else{if(vt.enablePan===!1)return;sr(Jn),kt=Rt.PAN}break;default:kt=Rt.NONE}kt!==Rt.NONE&&vt.dispatchEvent(Et)}function Xn(Jn){if(vt.enabled!==!1)switch(kt){case Rt.ROTATE:if(vt.enableRotate===!1)return;Mn(Jn);break;case Rt.DOLLY:if(vt.enableZoom===!1)return;ir(Jn);break;case Rt.PAN:if(vt.enablePan===!1)return;mr(Jn);break}}function Un(Jn){vt.enabled===!1||vt.enableZoom===!1||kt!==Rt.NONE&&kt!==Rt.ROTATE||(Jn.preventDefault(),vt.dispatchEvent(Et),tr(Jn),vt.dispatchEvent(Ct))}function rr(Jn){vt.enabled===!1||vt.enablePan===!1||Dr(Jn)}function yr(Jn){switch(Cr(Jn),Tn.length){case 1:switch(vt.touches.ONE){case TOUCH.ROTATE:if(vt.enableRotate===!1)return;Sr(),kt=Rt.TOUCH_ROTATE;break;case TOUCH.PAN:if(vt.enablePan===!1)return;Vr(),kt=Rt.TOUCH_PAN;break;default:kt=Rt.NONE}break;case 2:switch(vt.touches.TWO){case TOUCH.DOLLY_PAN:if(vt.enableZoom===!1&&vt.enablePan===!1)return;Yr(),kt=Rt.TOUCH_DOLLY_PAN;break;case TOUCH.DOLLY_ROTATE:if(vt.enableZoom===!1&&vt.enableRotate===!1)return;_i(),kt=Rt.TOUCH_DOLLY_ROTATE;break;default:kt=Rt.NONE}break;default:kt=Rt.NONE}kt!==Rt.NONE&&vt.dispatchEvent(Et)}function Ir(Jn){switch(Cr(Jn),kt){case Rt.TOUCH_ROTATE:if(vt.enableRotate===!1)return;Er(Jn),vt.update();break;case Rt.TOUCH_PAN:if(vt.enablePan===!1)return;kr(Jn),vt.update();break;case Rt.TOUCH_DOLLY_PAN:if(vt.enableZoom===!1&&vt.enablePan===!1)return;so(Jn),vt.update();break;case Rt.TOUCH_DOLLY_ROTATE:if(vt.enableZoom===!1&&vt.enableRotate===!1)return;jr(Jn),vt.update();break;default:kt=Rt.NONE}}function Fr(Jn){vt.enabled!==!1&&Jn.preventDefault()}function pr(Jn){Tn.push(Jn)}function Zr(Jn){delete In[Jn.pointerId];for(let Tr=0;Tr<Tn.length;Tr++)if(Tn[Tr].pointerId==Jn.pointerId){Tn.splice(Tr,1);return}}function Cr(Jn){let Tr=In[Jn.pointerId];Tr===void 0&&(Tr=new Vector2,In[Jn.pointerId]=Tr),Tr.set(Jn.pageX,Jn.pageY)}function lo(Jn){const Tr=Jn.pointerId===Tn[0].pointerId?Tn[1]:Tn[0];return In[Tr.pointerId]}dt!==void 0&&this.connect(dt),this.update()}};class GLTFLoader extends Loader{constructor(lt){super(lt),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(dt){return new GLTFMaterialsClearcoatExtension(dt)}),this.register(function(dt){return new GLTFTextureBasisUExtension(dt)}),this.register(function(dt){return new GLTFTextureWebPExtension(dt)}),this.register(function(dt){return new GLTFMaterialsSheenExtension(dt)}),this.register(function(dt){return new GLTFMaterialsTransmissionExtension(dt)}),this.register(function(dt){return new GLTFMaterialsVolumeExtension(dt)}),this.register(function(dt){return new GLTFMaterialsIorExtension(dt)}),this.register(function(dt){return new GLTFMaterialsEmissiveStrengthExtension(dt)}),this.register(function(dt){return new GLTFMaterialsSpecularExtension(dt)}),this.register(function(dt){return new GLTFMaterialsIridescenceExtension(dt)}),this.register(function(dt){return new GLTFLightsExtension(dt)}),this.register(function(dt){return new GLTFMeshoptCompression(dt)})}load(lt,dt,vt,Tt){const Et=this;let Ct;this.resourcePath!==""?Ct=this.resourcePath:this.path!==""?Ct=this.path:Ct=LoaderUtils.extractUrlBase(lt),this.manager.itemStart(lt);const Rt=function(Dt){Tt?Tt(Dt):console.error(Dt),Et.manager.itemError(lt),Et.manager.itemEnd(lt)},kt=new FileLoader(this.manager);kt.setPath(this.path),kt.setResponseType("arraybuffer"),kt.setRequestHeader(this.requestHeader),kt.setWithCredentials(this.withCredentials),kt.load(lt,function(Dt){try{Et.parse(Dt,Ct,function(Bt){dt(Bt),Et.manager.itemEnd(lt)},Rt)}catch(Bt){Rt(Bt)}},vt,Rt)}setDRACOLoader(lt){return this.dracoLoader=lt,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(lt){return this.ktx2Loader=lt,this}setMeshoptDecoder(lt){return this.meshoptDecoder=lt,this}register(lt){return this.pluginCallbacks.indexOf(lt)===-1&&this.pluginCallbacks.push(lt),this}unregister(lt){return this.pluginCallbacks.indexOf(lt)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(lt),1),this}parse(lt,dt,vt,Tt){let Et;const Ct={},Rt={};if(typeof lt=="string")Et=lt;else if(LoaderUtils.decodeText(new Uint8Array(lt,0,4))===BINARY_EXTENSION_HEADER_MAGIC){try{Ct[EXTENSIONS.KHR_BINARY_GLTF]=new GLTFBinaryExtension(lt)}catch(Ft){Tt&&Tt(Ft);return}Et=Ct[EXTENSIONS.KHR_BINARY_GLTF].content}else Et=LoaderUtils.decodeText(new Uint8Array(lt));const kt=JSON.parse(Et);if(kt.asset===void 0||kt.asset.version[0]<2){Tt&&Tt(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const Dt=new GLTFParser(kt,{path:dt||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});Dt.fileLoader.setRequestHeader(this.requestHeader);for(let Bt=0;Bt<this.pluginCallbacks.length;Bt++){const Ft=this.pluginCallbacks[Bt](Dt);Rt[Ft.name]=Ft,Ct[Ft.name]=!0}if(kt.extensionsUsed)for(let Bt=0;Bt<kt.extensionsUsed.length;++Bt){const Ft=kt.extensionsUsed[Bt],Ut=kt.extensionsRequired||[];switch(Ft){case EXTENSIONS.KHR_MATERIALS_UNLIT:Ct[Ft]=new GLTFMaterialsUnlitExtension;break;case EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:Ct[Ft]=new GLTFMaterialsPbrSpecularGlossinessExtension;break;case EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:Ct[Ft]=new GLTFDracoMeshCompressionExtension(kt,this.dracoLoader);break;case EXTENSIONS.KHR_TEXTURE_TRANSFORM:Ct[Ft]=new GLTFTextureTransformExtension;break;case EXTENSIONS.KHR_MESH_QUANTIZATION:Ct[Ft]=new GLTFMeshQuantizationExtension;break;default:Ut.indexOf(Ft)>=0&&Rt[Ft]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+Ft+'".')}}Dt.setExtensions(Ct),Dt.setPlugins(Rt),Dt.parse(vt,Tt)}parseAsync(lt,dt){const vt=this;return new Promise(function(Tt,Et){vt.parse(lt,dt,Tt,Et)})}}function GLTFRegistry(){let ft={};return{get:function(lt){return ft[lt]},add:function(lt,dt){ft[lt]=dt},remove:function(lt){delete ft[lt]},removeAll:function(){ft={}}}}const EXTENSIONS={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class GLTFLightsExtension{constructor(lt){this.parser=lt,this.name=EXTENSIONS.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const lt=this.parser,dt=this.parser.json.nodes||[];for(let vt=0,Tt=dt.length;vt<Tt;vt++){const Et=dt[vt];Et.extensions&&Et.extensions[this.name]&&Et.extensions[this.name].light!==void 0&&lt._addNodeRef(this.cache,Et.extensions[this.name].light)}}_loadLight(lt){const dt=this.parser,vt="light:"+lt;let Tt=dt.cache.get(vt);if(Tt)return Tt;const Et=dt.json,kt=((Et.extensions&&Et.extensions[this.name]||{}).lights||[])[lt];let Dt;const Bt=new Color(16777215);kt.color!==void 0&&Bt.fromArray(kt.color);const Ft=kt.range!==void 0?kt.range:0;switch(kt.type){case"directional":Dt=new DirectionalLight(Bt),Dt.target.position.set(0,0,-1),Dt.add(Dt.target);break;case"point":Dt=new PointLight(Bt),Dt.distance=Ft;break;case"spot":Dt=new SpotLight(Bt),Dt.distance=Ft,kt.spot=kt.spot||{},kt.spot.innerConeAngle=kt.spot.innerConeAngle!==void 0?kt.spot.innerConeAngle:0,kt.spot.outerConeAngle=kt.spot.outerConeAngle!==void 0?kt.spot.outerConeAngle:Math.PI/4,Dt.angle=kt.spot.outerConeAngle,Dt.penumbra=1-kt.spot.innerConeAngle/kt.spot.outerConeAngle,Dt.target.position.set(0,0,-1),Dt.add(Dt.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+kt.type)}return Dt.position.set(0,0,0),Dt.decay=2,kt.intensity!==void 0&&(Dt.intensity=kt.intensity),Dt.name=dt.createUniqueName(kt.name||"light_"+lt),Tt=Promise.resolve(Dt),dt.cache.add(vt,Tt),Tt}createNodeAttachment(lt){const dt=this,vt=this.parser,Et=vt.json.nodes[lt],Rt=(Et.extensions&&Et.extensions[this.name]||{}).light;return Rt===void 0?null:this._loadLight(Rt).then(function(kt){return vt._getNodeRef(dt.cache,Rt,kt)})}}class GLTFMaterialsUnlitExtension{constructor(){this.name=EXTENSIONS.KHR_MATERIALS_UNLIT}getMaterialType(){return MeshBasicMaterial}extendParams(lt,dt,vt){const Tt=[];lt.color=new Color(1,1,1),lt.opacity=1;const Et=dt.pbrMetallicRoughness;if(Et){if(Array.isArray(Et.baseColorFactor)){const Ct=Et.baseColorFactor;lt.color.fromArray(Ct),lt.opacity=Ct[3]}Et.baseColorTexture!==void 0&&Tt.push(vt.assignTexture(lt,"map",Et.baseColorTexture,sRGBEncoding))}return Promise.all(Tt)}}class GLTFMaterialsEmissiveStrengthExtension{constructor(lt){this.parser=lt,this.name=EXTENSIONS.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(lt,dt){const Tt=this.parser.json.materials[lt];if(!Tt.extensions||!Tt.extensions[this.name])return Promise.resolve();const Et=Tt.extensions[this.name].emissiveStrength;return Et!==void 0&&(dt.emissiveIntensity=Et),Promise.resolve()}}class GLTFMaterialsClearcoatExtension{constructor(lt){this.parser=lt,this.name=EXTENSIONS.KHR_MATERIALS_CLEARCOAT}getMaterialType(lt){const vt=this.parser.json.materials[lt];return!vt.extensions||!vt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(lt,dt){const vt=this.parser,Tt=vt.json.materials[lt];if(!Tt.extensions||!Tt.extensions[this.name])return Promise.resolve();const Et=[],Ct=Tt.extensions[this.name];if(Ct.clearcoatFactor!==void 0&&(dt.clearcoat=Ct.clearcoatFactor),Ct.clearcoatTexture!==void 0&&Et.push(vt.assignTexture(dt,"clearcoatMap",Ct.clearcoatTexture)),Ct.clearcoatRoughnessFactor!==void 0&&(dt.clearcoatRoughness=Ct.clearcoatRoughnessFactor),Ct.clearcoatRoughnessTexture!==void 0&&Et.push(vt.assignTexture(dt,"clearcoatRoughnessMap",Ct.clearcoatRoughnessTexture)),Ct.clearcoatNormalTexture!==void 0&&(Et.push(vt.assignTexture(dt,"clearcoatNormalMap",Ct.clearcoatNormalTexture)),Ct.clearcoatNormalTexture.scale!==void 0)){const Rt=Ct.clearcoatNormalTexture.scale;dt.clearcoatNormalScale=new Vector2(Rt,Rt)}return Promise.all(Et)}}class GLTFMaterialsIridescenceExtension{constructor(lt){this.parser=lt,this.name=EXTENSIONS.KHR_MATERIALS_IRIDESCENCE}getMaterialType(lt){const vt=this.parser.json.materials[lt];return!vt.extensions||!vt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(lt,dt){const vt=this.parser,Tt=vt.json.materials[lt];if(!Tt.extensions||!Tt.extensions[this.name])return Promise.resolve();const Et=[],Ct=Tt.extensions[this.name];return Ct.iridescenceFactor!==void 0&&(dt.iridescence=Ct.iridescenceFactor),Ct.iridescenceTexture!==void 0&&Et.push(vt.assignTexture(dt,"iridescenceMap",Ct.iridescenceTexture)),Ct.iridescenceIor!==void 0&&(dt.iridescenceIOR=Ct.iridescenceIor),dt.iridescenceThicknessRange===void 0&&(dt.iridescenceThicknessRange=[100,400]),Ct.iridescenceThicknessMinimum!==void 0&&(dt.iridescenceThicknessRange[0]=Ct.iridescenceThicknessMinimum),Ct.iridescenceThicknessMaximum!==void 0&&(dt.iridescenceThicknessRange[1]=Ct.iridescenceThicknessMaximum),Ct.iridescenceThicknessTexture!==void 0&&Et.push(vt.assignTexture(dt,"iridescenceThicknessMap",Ct.iridescenceThicknessTexture)),Promise.all(Et)}}class GLTFMaterialsSheenExtension{constructor(lt){this.parser=lt,this.name=EXTENSIONS.KHR_MATERIALS_SHEEN}getMaterialType(lt){const vt=this.parser.json.materials[lt];return!vt.extensions||!vt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(lt,dt){const vt=this.parser,Tt=vt.json.materials[lt];if(!Tt.extensions||!Tt.extensions[this.name])return Promise.resolve();const Et=[];dt.sheenColor=new Color(0,0,0),dt.sheenRoughness=0,dt.sheen=1;const Ct=Tt.extensions[this.name];return Ct.sheenColorFactor!==void 0&&dt.sheenColor.fromArray(Ct.sheenColorFactor),Ct.sheenRoughnessFactor!==void 0&&(dt.sheenRoughness=Ct.sheenRoughnessFactor),Ct.sheenColorTexture!==void 0&&Et.push(vt.assignTexture(dt,"sheenColorMap",Ct.sheenColorTexture,sRGBEncoding)),Ct.sheenRoughnessTexture!==void 0&&Et.push(vt.assignTexture(dt,"sheenRoughnessMap",Ct.sheenRoughnessTexture)),Promise.all(Et)}}class GLTFMaterialsTransmissionExtension{constructor(lt){this.parser=lt,this.name=EXTENSIONS.KHR_MATERIALS_TRANSMISSION}getMaterialType(lt){const vt=this.parser.json.materials[lt];return!vt.extensions||!vt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(lt,dt){const vt=this.parser,Tt=vt.json.materials[lt];if(!Tt.extensions||!Tt.extensions[this.name])return Promise.resolve();const Et=[],Ct=Tt.extensions[this.name];return Ct.transmissionFactor!==void 0&&(dt.transmission=Ct.transmissionFactor),Ct.transmissionTexture!==void 0&&Et.push(vt.assignTexture(dt,"transmissionMap",Ct.transmissionTexture)),Promise.all(Et)}}class GLTFMaterialsVolumeExtension{constructor(lt){this.parser=lt,this.name=EXTENSIONS.KHR_MATERIALS_VOLUME}getMaterialType(lt){const vt=this.parser.json.materials[lt];return!vt.extensions||!vt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(lt,dt){const vt=this.parser,Tt=vt.json.materials[lt];if(!Tt.extensions||!Tt.extensions[this.name])return Promise.resolve();const Et=[],Ct=Tt.extensions[this.name];dt.thickness=Ct.thicknessFactor!==void 0?Ct.thicknessFactor:0,Ct.thicknessTexture!==void 0&&Et.push(vt.assignTexture(dt,"thicknessMap",Ct.thicknessTexture)),dt.attenuationDistance=Ct.attenuationDistance||1/0;const Rt=Ct.attenuationColor||[1,1,1];return dt.attenuationColor=new Color(Rt[0],Rt[1],Rt[2]),Promise.all(Et)}}class GLTFMaterialsIorExtension{constructor(lt){this.parser=lt,this.name=EXTENSIONS.KHR_MATERIALS_IOR}getMaterialType(lt){const vt=this.parser.json.materials[lt];return!vt.extensions||!vt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(lt,dt){const Tt=this.parser.json.materials[lt];if(!Tt.extensions||!Tt.extensions[this.name])return Promise.resolve();const Et=Tt.extensions[this.name];return dt.ior=Et.ior!==void 0?Et.ior:1.5,Promise.resolve()}}class GLTFMaterialsSpecularExtension{constructor(lt){this.parser=lt,this.name=EXTENSIONS.KHR_MATERIALS_SPECULAR}getMaterialType(lt){const vt=this.parser.json.materials[lt];return!vt.extensions||!vt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(lt,dt){const vt=this.parser,Tt=vt.json.materials[lt];if(!Tt.extensions||!Tt.extensions[this.name])return Promise.resolve();const Et=[],Ct=Tt.extensions[this.name];dt.specularIntensity=Ct.specularFactor!==void 0?Ct.specularFactor:1,Ct.specularTexture!==void 0&&Et.push(vt.assignTexture(dt,"specularIntensityMap",Ct.specularTexture));const Rt=Ct.specularColorFactor||[1,1,1];return dt.specularColor=new Color(Rt[0],Rt[1],Rt[2]),Ct.specularColorTexture!==void 0&&Et.push(vt.assignTexture(dt,"specularColorMap",Ct.specularColorTexture,sRGBEncoding)),Promise.all(Et)}}class GLTFTextureBasisUExtension{constructor(lt){this.parser=lt,this.name=EXTENSIONS.KHR_TEXTURE_BASISU}loadTexture(lt){const dt=this.parser,vt=dt.json,Tt=vt.textures[lt];if(!Tt.extensions||!Tt.extensions[this.name])return null;const Et=Tt.extensions[this.name],Ct=dt.options.ktx2Loader;if(!Ct){if(vt.extensionsRequired&&vt.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return dt.loadTextureImage(lt,Et.source,Ct)}}class GLTFTextureWebPExtension{constructor(lt){this.parser=lt,this.name=EXTENSIONS.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(lt){const dt=this.name,vt=this.parser,Tt=vt.json,Et=Tt.textures[lt];if(!Et.extensions||!Et.extensions[dt])return null;const Ct=Et.extensions[dt],Rt=Tt.images[Ct.source];let kt=vt.textureLoader;if(Rt.uri){const Dt=vt.options.manager.getHandler(Rt.uri);Dt!==null&&(kt=Dt)}return this.detectSupport().then(function(Dt){if(Dt)return vt.loadTextureImage(lt,Ct.source,kt);if(Tt.extensionsRequired&&Tt.extensionsRequired.indexOf(dt)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return vt.loadTexture(lt)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(lt){const dt=new Image;dt.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",dt.onload=dt.onerror=function(){lt(dt.height===1)}})),this.isSupported}}class GLTFMeshoptCompression{constructor(lt){this.name=EXTENSIONS.EXT_MESHOPT_COMPRESSION,this.parser=lt}loadBufferView(lt){const dt=this.parser.json,vt=dt.bufferViews[lt];if(vt.extensions&&vt.extensions[this.name]){const Tt=vt.extensions[this.name],Et=this.parser.getDependency("buffer",Tt.buffer),Ct=this.parser.options.meshoptDecoder;if(!Ct||!Ct.supported){if(dt.extensionsRequired&&dt.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Et.then(function(Rt){const kt=Tt.byteOffset||0,Dt=Tt.byteLength||0,Bt=Tt.count,Ft=Tt.byteStride,Ut=new Uint8Array(Rt,kt,Dt);return Ct.decodeGltfBufferAsync?Ct.decodeGltfBufferAsync(Bt,Ft,Ut,Tt.mode,Tt.filter).then(function(Zt){return Zt.buffer}):Ct.ready.then(function(){const Zt=new ArrayBuffer(Bt*Ft);return Ct.decodeGltfBuffer(new Uint8Array(Zt),Bt,Ft,Ut,Tt.mode,Tt.filter),Zt})})}else return null}}const BINARY_EXTENSION_HEADER_MAGIC="glTF",BINARY_EXTENSION_HEADER_LENGTH=12,BINARY_EXTENSION_CHUNK_TYPES={JSON:1313821514,BIN:5130562};class GLTFBinaryExtension{constructor(lt){this.name=EXTENSIONS.KHR_BINARY_GLTF,this.content=null,this.body=null;const dt=new DataView(lt,0,BINARY_EXTENSION_HEADER_LENGTH);if(this.header={magic:LoaderUtils.decodeText(new Uint8Array(lt.slice(0,4))),version:dt.getUint32(4,!0),length:dt.getUint32(8,!0)},this.header.magic!==BINARY_EXTENSION_HEADER_MAGIC)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const vt=this.header.length-BINARY_EXTENSION_HEADER_LENGTH,Tt=new DataView(lt,BINARY_EXTENSION_HEADER_LENGTH);let Et=0;for(;Et<vt;){const Ct=Tt.getUint32(Et,!0);Et+=4;const Rt=Tt.getUint32(Et,!0);if(Et+=4,Rt===BINARY_EXTENSION_CHUNK_TYPES.JSON){const kt=new Uint8Array(lt,BINARY_EXTENSION_HEADER_LENGTH+Et,Ct);this.content=LoaderUtils.decodeText(kt)}else if(Rt===BINARY_EXTENSION_CHUNK_TYPES.BIN){const kt=BINARY_EXTENSION_HEADER_LENGTH+Et;this.body=lt.slice(kt,kt+Ct)}Et+=Ct}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class GLTFDracoMeshCompressionExtension{constructor(lt,dt){if(!dt)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=EXTENSIONS.KHR_DRACO_MESH_COMPRESSION,this.json=lt,this.dracoLoader=dt,this.dracoLoader.preload()}decodePrimitive(lt,dt){const vt=this.json,Tt=this.dracoLoader,Et=lt.extensions[this.name].bufferView,Ct=lt.extensions[this.name].attributes,Rt={},kt={},Dt={};for(const Bt in Ct){const Ft=ATTRIBUTES[Bt]||Bt.toLowerCase();Rt[Ft]=Ct[Bt]}for(const Bt in lt.attributes){const Ft=ATTRIBUTES[Bt]||Bt.toLowerCase();if(Ct[Bt]!==void 0){const Ut=vt.accessors[lt.attributes[Bt]],Zt=WEBGL_COMPONENT_TYPES[Ut.componentType];Dt[Ft]=Zt.name,kt[Ft]=Ut.normalized===!0}}return dt.getDependency("bufferView",Et).then(function(Bt){return new Promise(function(Ft){Tt.decodeDracoFile(Bt,function(Ut){for(const Zt in Ut.attributes){const Kt=Ut.attributes[Zt],ln=kt[Zt];ln!==void 0&&(Kt.normalized=ln)}Ft(Ut)},Rt,Dt)})})}}class GLTFTextureTransformExtension{constructor(){this.name=EXTENSIONS.KHR_TEXTURE_TRANSFORM}extendTexture(lt,dt){return dt.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),dt.offset===void 0&&dt.rotation===void 0&&dt.scale===void 0||(lt=lt.clone(),dt.offset!==void 0&&lt.offset.fromArray(dt.offset),dt.rotation!==void 0&&(lt.rotation=dt.rotation),dt.scale!==void 0&&lt.repeat.fromArray(dt.scale),lt.needsUpdate=!0),lt}}class GLTFMeshStandardSGMaterial extends MeshStandardMaterial{constructor(lt){super(),this.isGLTFSpecularGlossinessMaterial=!0;const dt=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),vt=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),Tt=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),Et=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),Ct=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),Rt={specular:{value:new Color().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=Rt,this.onBeforeCompile=function(kt){for(const Dt in Rt)kt.uniforms[Dt]=Rt[Dt];kt.fragmentShader=kt.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",dt).replace("#include <metalnessmap_pars_fragment>",vt).replace("#include <roughnessmap_fragment>",Tt).replace("#include <metalnessmap_fragment>",Et).replace("#include <lights_physical_fragment>",Ct)},Object.defineProperties(this,{specular:{get:function(){return Rt.specular.value},set:function(kt){Rt.specular.value=kt}},specularMap:{get:function(){return Rt.specularMap.value},set:function(kt){Rt.specularMap.value=kt,kt?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return Rt.glossiness.value},set:function(kt){Rt.glossiness.value=kt}},glossinessMap:{get:function(){return Rt.glossinessMap.value},set:function(kt){Rt.glossinessMap.value=kt,kt?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(lt)}copy(lt){return super.copy(lt),this.specularMap=lt.specularMap,this.specular.copy(lt.specular),this.glossinessMap=lt.glossinessMap,this.glossiness=lt.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class GLTFMaterialsPbrSpecularGlossinessExtension{constructor(){this.name=EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return GLTFMeshStandardSGMaterial}extendParams(lt,dt,vt){const Tt=dt.extensions[this.name];lt.color=new Color(1,1,1),lt.opacity=1;const Et=[];if(Array.isArray(Tt.diffuseFactor)){const Ct=Tt.diffuseFactor;lt.color.fromArray(Ct),lt.opacity=Ct[3]}if(Tt.diffuseTexture!==void 0&&Et.push(vt.assignTexture(lt,"map",Tt.diffuseTexture,sRGBEncoding)),lt.emissive=new Color(0,0,0),lt.glossiness=Tt.glossinessFactor!==void 0?Tt.glossinessFactor:1,lt.specular=new Color(1,1,1),Array.isArray(Tt.specularFactor)&&lt.specular.fromArray(Tt.specularFactor),Tt.specularGlossinessTexture!==void 0){const Ct=Tt.specularGlossinessTexture;Et.push(vt.assignTexture(lt,"glossinessMap",Ct)),Et.push(vt.assignTexture(lt,"specularMap",Ct,sRGBEncoding))}return Promise.all(Et)}createMaterial(lt){const dt=new GLTFMeshStandardSGMaterial(lt);return dt.fog=!0,dt.color=lt.color,dt.map=lt.map===void 0?null:lt.map,dt.lightMap=null,dt.lightMapIntensity=1,dt.aoMap=lt.aoMap===void 0?null:lt.aoMap,dt.aoMapIntensity=1,dt.emissive=lt.emissive,dt.emissiveIntensity=lt.emissiveIntensity===void 0?1:lt.emissiveIntensity,dt.emissiveMap=lt.emissiveMap===void 0?null:lt.emissiveMap,dt.bumpMap=lt.bumpMap===void 0?null:lt.bumpMap,dt.bumpScale=1,dt.normalMap=lt.normalMap===void 0?null:lt.normalMap,dt.normalMapType=TangentSpaceNormalMap,lt.normalScale&&(dt.normalScale=lt.normalScale),dt.displacementMap=null,dt.displacementScale=1,dt.displacementBias=0,dt.specularMap=lt.specularMap===void 0?null:lt.specularMap,dt.specular=lt.specular,dt.glossinessMap=lt.glossinessMap===void 0?null:lt.glossinessMap,dt.glossiness=lt.glossiness,dt.alphaMap=null,dt.envMap=lt.envMap===void 0?null:lt.envMap,dt.envMapIntensity=1,dt.refractionRatio=.98,dt}}class GLTFMeshQuantizationExtension{constructor(){this.name=EXTENSIONS.KHR_MESH_QUANTIZATION}}class GLTFCubicSplineInterpolant extends Interpolant{constructor(lt,dt,vt,Tt){super(lt,dt,vt,Tt)}copySampleValue_(lt){const dt=this.resultBuffer,vt=this.sampleValues,Tt=this.valueSize,Et=lt*Tt*3+Tt;for(let Ct=0;Ct!==Tt;Ct++)dt[Ct]=vt[Et+Ct];return dt}interpolate_(lt,dt,vt,Tt){const Et=this.resultBuffer,Ct=this.sampleValues,Rt=this.valueSize,kt=Rt*2,Dt=Rt*3,Bt=Tt-dt,Ft=(vt-dt)/Bt,Ut=Ft*Ft,Zt=Ut*Ft,Kt=lt*Dt,ln=Kt-Dt,hn=-2*Zt+3*Ut,dn=Zt-Ut,pn=1-hn,mn=dn-Ut+Ft;for(let On=0;On!==Rt;On++){const bn=Ct[ln+On+Rt],En=Ct[ln+On+kt]*Bt,An=Ct[Kt+On+Rt],Tn=Ct[Kt+On]*Bt;Et[On]=pn*bn+mn*En+hn*An+dn*Tn}return Et}}const _q=new Quaternion;class GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant{interpolate_(lt,dt,vt,Tt){const Et=super.interpolate_(lt,dt,vt,Tt);return _q.fromArray(Et).normalize().toArray(Et),Et}}const WEBGL_CONSTANTS={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},WEBGL_COMPONENT_TYPES={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},WEBGL_FILTERS={9728:NearestFilter,9729:LinearFilter,9984:NearestMipmapNearestFilter,9985:LinearMipmapNearestFilter,9986:NearestMipmapLinearFilter,9987:LinearMipmapLinearFilter},WEBGL_WRAPPINGS={33071:ClampToEdgeWrapping,33648:MirroredRepeatWrapping,10497:RepeatWrapping},WEBGL_TYPE_SIZES={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ATTRIBUTES={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},PATH_PROPERTIES={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},INTERPOLATION={CUBICSPLINE:void 0,LINEAR:InterpolateLinear,STEP:InterpolateDiscrete},ALPHA_MODES={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function createDefaultMaterial(ft){return ft.DefaultMaterial===void 0&&(ft.DefaultMaterial=new MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:FrontSide})),ft.DefaultMaterial}function addUnknownExtensionsToUserData(ft,lt,dt){for(const vt in dt.extensions)ft[vt]===void 0&&(lt.userData.gltfExtensions=lt.userData.gltfExtensions||{},lt.userData.gltfExtensions[vt]=dt.extensions[vt])}function assignExtrasToUserData(ft,lt){lt.extras!==void 0&&(typeof lt.extras=="object"?Object.assign(ft.userData,lt.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+lt.extras))}function addMorphTargets(ft,lt,dt){let vt=!1,Tt=!1,Et=!1;for(let Dt=0,Bt=lt.length;Dt<Bt;Dt++){const Ft=lt[Dt];if(Ft.POSITION!==void 0&&(vt=!0),Ft.NORMAL!==void 0&&(Tt=!0),Ft.COLOR_0!==void 0&&(Et=!0),vt&&Tt&&Et)break}if(!vt&&!Tt&&!Et)return Promise.resolve(ft);const Ct=[],Rt=[],kt=[];for(let Dt=0,Bt=lt.length;Dt<Bt;Dt++){const Ft=lt[Dt];if(vt){const Ut=Ft.POSITION!==void 0?dt.getDependency("accessor",Ft.POSITION):ft.attributes.position;Ct.push(Ut)}if(Tt){const Ut=Ft.NORMAL!==void 0?dt.getDependency("accessor",Ft.NORMAL):ft.attributes.normal;Rt.push(Ut)}if(Et){const Ut=Ft.COLOR_0!==void 0?dt.getDependency("accessor",Ft.COLOR_0):ft.attributes.color;kt.push(Ut)}}return Promise.all([Promise.all(Ct),Promise.all(Rt),Promise.all(kt)]).then(function(Dt){const Bt=Dt[0],Ft=Dt[1],Ut=Dt[2];return vt&&(ft.morphAttributes.position=Bt),Tt&&(ft.morphAttributes.normal=Ft),Et&&(ft.morphAttributes.color=Ut),ft.morphTargetsRelative=!0,ft})}function updateMorphTargets(ft,lt){if(ft.updateMorphTargets(),lt.weights!==void 0)for(let dt=0,vt=lt.weights.length;dt<vt;dt++)ft.morphTargetInfluences[dt]=lt.weights[dt];if(lt.extras&&Array.isArray(lt.extras.targetNames)){const dt=lt.extras.targetNames;if(ft.morphTargetInfluences.length===dt.length){ft.morphTargetDictionary={};for(let vt=0,Tt=dt.length;vt<Tt;vt++)ft.morphTargetDictionary[dt[vt]]=vt}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function createPrimitiveKey(ft){const lt=ft.extensions&&ft.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION];let dt;return lt?dt="draco:"+lt.bufferView+":"+lt.indices+":"+createAttributesKey(lt.attributes):dt=ft.indices+":"+createAttributesKey(ft.attributes)+":"+ft.mode,dt}function createAttributesKey(ft){let lt="";const dt=Object.keys(ft).sort();for(let vt=0,Tt=dt.length;vt<Tt;vt++)lt+=dt[vt]+":"+ft[dt[vt]]+";";return lt}function getNormalizedComponentScale(ft){switch(ft){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function getImageURIMimeType(ft){return ft.search(/\.jpe?g($|\?)/i)>0||ft.search(/^data\:image\/jpeg/)===0?"image/jpeg":ft.search(/\.webp($|\?)/i)>0||ft.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}class GLTFParser{constructor(lt={},dt={}){var vt,Tt;this.json=lt,this.extensions={},this.plugins={},this.options=dt,this.cache=new GLTFRegistry,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const Et=typeof navigator<"u"&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,Ct=typeof navigator<"u"&&((vt=navigator.userAgent)===null||vt===void 0?void 0:vt.indexOf("Firefox"))>-1,Rt=typeof navigator<"u"&&Ct?(Tt=navigator.userAgent)===null||Tt===void 0?void 0:Tt.match(/Firefox\/([0-9]+)\./)[1]:-1;typeof createImageBitmap>"u"||Et||Ct&&Rt<98?this.textureLoader=new TextureLoader(this.options.manager):this.textureLoader=new ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(lt){this.extensions=lt}setPlugins(lt){this.plugins=lt}parse(lt,dt){const vt=this,Tt=this.json,Et=this.extensions;this.cache.removeAll(),this._invokeAll(function(Ct){return Ct._markDefs&&Ct._markDefs()}),Promise.all(this._invokeAll(function(Ct){return Ct.beforeRoot&&Ct.beforeRoot()})).then(function(){return Promise.all([vt.getDependencies("scene"),vt.getDependencies("animation"),vt.getDependencies("camera")])}).then(function(Ct){const Rt={scene:Ct[0][Tt.scene||0],scenes:Ct[0],animations:Ct[1],cameras:Ct[2],asset:Tt.asset,parser:vt,userData:{}};addUnknownExtensionsToUserData(Et,Rt,Tt),assignExtrasToUserData(Rt,Tt),Promise.all(vt._invokeAll(function(kt){return kt.afterRoot&&kt.afterRoot(Rt)})).then(function(){lt(Rt)})}).catch(dt)}_markDefs(){const lt=this.json.nodes||[],dt=this.json.skins||[],vt=this.json.meshes||[];for(let Tt=0,Et=dt.length;Tt<Et;Tt++){const Ct=dt[Tt].joints;for(let Rt=0,kt=Ct.length;Rt<kt;Rt++)lt[Ct[Rt]].isBone=!0}for(let Tt=0,Et=lt.length;Tt<Et;Tt++){const Ct=lt[Tt];Ct.mesh!==void 0&&(this._addNodeRef(this.meshCache,Ct.mesh),Ct.skin!==void 0&&(vt[Ct.mesh].isSkinnedMesh=!0)),Ct.camera!==void 0&&this._addNodeRef(this.cameraCache,Ct.camera)}}_addNodeRef(lt,dt){dt!==void 0&&(lt.refs[dt]===void 0&&(lt.refs[dt]=lt.uses[dt]=0),lt.refs[dt]++)}_getNodeRef(lt,dt,vt){if(lt.refs[dt]<=1)return vt;const Tt=vt.clone(),Et=(Ct,Rt)=>{const kt=this.associations.get(Ct);kt!=null&&this.associations.set(Rt,kt);for(const[Dt,Bt]of Ct.children.entries())Et(Bt,Rt.children[Dt])};return Et(vt,Tt),Tt.name+="_instance_"+lt.uses[dt]++,Tt}_invokeOne(lt){const dt=Object.values(this.plugins);dt.push(this);for(let vt=0;vt<dt.length;vt++){const Tt=lt(dt[vt]);if(Tt)return Tt}return null}_invokeAll(lt){const dt=Object.values(this.plugins);dt.unshift(this);const vt=[];for(let Tt=0;Tt<dt.length;Tt++){const Et=lt(dt[Tt]);Et&&vt.push(Et)}return vt}getDependency(lt,dt){const vt=lt+":"+dt;let Tt=this.cache.get(vt);if(!Tt){switch(lt){case"scene":Tt=this.loadScene(dt);break;case"node":Tt=this.loadNode(dt);break;case"mesh":Tt=this._invokeOne(function(Et){return Et.loadMesh&&Et.loadMesh(dt)});break;case"accessor":Tt=this.loadAccessor(dt);break;case"bufferView":Tt=this._invokeOne(function(Et){return Et.loadBufferView&&Et.loadBufferView(dt)});break;case"buffer":Tt=this.loadBuffer(dt);break;case"material":Tt=this._invokeOne(function(Et){return Et.loadMaterial&&Et.loadMaterial(dt)});break;case"texture":Tt=this._invokeOne(function(Et){return Et.loadTexture&&Et.loadTexture(dt)});break;case"skin":Tt=this.loadSkin(dt);break;case"animation":Tt=this._invokeOne(function(Et){return Et.loadAnimation&&Et.loadAnimation(dt)});break;case"camera":Tt=this.loadCamera(dt);break;default:throw new Error("Unknown type: "+lt)}this.cache.add(vt,Tt)}return Tt}getDependencies(lt){let dt=this.cache.get(lt);if(!dt){const vt=this,Tt=this.json[lt+(lt==="mesh"?"es":"s")]||[];dt=Promise.all(Tt.map(function(Et,Ct){return vt.getDependency(lt,Ct)})),this.cache.add(lt,dt)}return dt}loadBuffer(lt){const dt=this.json.buffers[lt],vt=this.fileLoader;if(dt.type&&dt.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+dt.type+" buffer type is not supported.");if(dt.uri===void 0&&lt===0)return Promise.resolve(this.extensions[EXTENSIONS.KHR_BINARY_GLTF].body);const Tt=this.options;return new Promise(function(Et,Ct){vt.load(LoaderUtils.resolveURL(dt.uri,Tt.path),Et,void 0,function(){Ct(new Error('THREE.GLTFLoader: Failed to load buffer "'+dt.uri+'".'))})})}loadBufferView(lt){const dt=this.json.bufferViews[lt];return this.getDependency("buffer",dt.buffer).then(function(vt){const Tt=dt.byteLength||0,Et=dt.byteOffset||0;return vt.slice(Et,Et+Tt)})}loadAccessor(lt){const dt=this,vt=this.json,Tt=this.json.accessors[lt];if(Tt.bufferView===void 0&&Tt.sparse===void 0)return Promise.resolve(null);const Et=[];return Tt.bufferView!==void 0?Et.push(this.getDependency("bufferView",Tt.bufferView)):Et.push(null),Tt.sparse!==void 0&&(Et.push(this.getDependency("bufferView",Tt.sparse.indices.bufferView)),Et.push(this.getDependency("bufferView",Tt.sparse.values.bufferView))),Promise.all(Et).then(function(Ct){const Rt=Ct[0],kt=WEBGL_TYPE_SIZES[Tt.type],Dt=WEBGL_COMPONENT_TYPES[Tt.componentType],Bt=Dt.BYTES_PER_ELEMENT,Ft=Bt*kt,Ut=Tt.byteOffset||0,Zt=Tt.bufferView!==void 0?vt.bufferViews[Tt.bufferView].byteStride:void 0,Kt=Tt.normalized===!0;let ln,hn;if(Zt&&Zt!==Ft){const dn=Math.floor(Ut/Zt),pn="InterleavedBuffer:"+Tt.bufferView+":"+Tt.componentType+":"+dn+":"+Tt.count;let mn=dt.cache.get(pn);mn||(ln=new Dt(Rt,dn*Zt,Tt.count*Zt/Bt),mn=new InterleavedBuffer(ln,Zt/Bt),dt.cache.add(pn,mn)),hn=new InterleavedBufferAttribute(mn,kt,Ut%Zt/Bt,Kt)}else Rt===null?ln=new Dt(Tt.count*kt):ln=new Dt(Rt,Ut,Tt.count*kt),hn=new BufferAttribute(ln,kt,Kt);if(Tt.sparse!==void 0){const dn=WEBGL_TYPE_SIZES.SCALAR,pn=WEBGL_COMPONENT_TYPES[Tt.sparse.indices.componentType],mn=Tt.sparse.indices.byteOffset||0,On=Tt.sparse.values.byteOffset||0,bn=new pn(Ct[1],mn,Tt.sparse.count*dn),En=new Dt(Ct[2],On,Tt.sparse.count*kt);Rt!==null&&(hn=new BufferAttribute(hn.array.slice(),hn.itemSize,hn.normalized));for(let An=0,Tn=bn.length;An<Tn;An++){const In=bn[An];if(hn.setX(In,En[An*kt]),kt>=2&&hn.setY(In,En[An*kt+1]),kt>=3&&hn.setZ(In,En[An*kt+2]),kt>=4&&hn.setW(In,En[An*kt+3]),kt>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return hn})}loadTexture(lt){const dt=this.json,vt=this.options,Et=dt.textures[lt].source,Ct=dt.images[Et];let Rt=this.textureLoader;if(Ct.uri){const kt=vt.manager.getHandler(Ct.uri);kt!==null&&(Rt=kt)}return this.loadTextureImage(lt,Et,Rt)}loadTextureImage(lt,dt,vt){const Tt=this,Et=this.json,Ct=Et.textures[lt],Rt=Et.images[dt],kt=(Rt.uri||Rt.bufferView)+":"+Ct.sampler;if(this.textureCache[kt])return this.textureCache[kt];const Dt=this.loadImageSource(dt,vt).then(function(Bt){Bt.flipY=!1,Ct.name&&(Bt.name=Ct.name);const Ut=(Et.samplers||{})[Ct.sampler]||{};return Bt.magFilter=WEBGL_FILTERS[Ut.magFilter]||LinearFilter,Bt.minFilter=WEBGL_FILTERS[Ut.minFilter]||LinearMipmapLinearFilter,Bt.wrapS=WEBGL_WRAPPINGS[Ut.wrapS]||RepeatWrapping,Bt.wrapT=WEBGL_WRAPPINGS[Ut.wrapT]||RepeatWrapping,Tt.associations.set(Bt,{textures:lt}),Bt}).catch(function(){return null});return this.textureCache[kt]=Dt,Dt}loadImageSource(lt,dt){const vt=this,Tt=this.json,Et=this.options;if(this.sourceCache[lt]!==void 0)return this.sourceCache[lt].then(Ft=>Ft.clone());const Ct=Tt.images[lt],Rt=self.URL||self.webkitURL;let kt=Ct.uri||"",Dt=!1;if(Ct.bufferView!==void 0)kt=vt.getDependency("bufferView",Ct.bufferView).then(function(Ft){Dt=!0;const Ut=new Blob([Ft],{type:Ct.mimeType});return kt=Rt.createObjectURL(Ut),kt});else if(Ct.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+lt+" is missing URI and bufferView");const Bt=Promise.resolve(kt).then(function(Ft){return new Promise(function(Ut,Zt){let Kt=Ut;dt.isImageBitmapLoader===!0&&(Kt=function(ln){const hn=new Texture(ln);hn.needsUpdate=!0,Ut(hn)}),dt.load(LoaderUtils.resolveURL(Ft,Et.path),Kt,void 0,Zt)})}).then(function(Ft){return Dt===!0&&Rt.revokeObjectURL(kt),Ft.userData.mimeType=Ct.mimeType||getImageURIMimeType(Ct.uri),Ft}).catch(function(Ft){throw console.error("THREE.GLTFLoader: Couldn't load texture",kt),Ft});return this.sourceCache[lt]=Bt,Bt}assignTexture(lt,dt,vt,Tt){const Et=this;return this.getDependency("texture",vt.index).then(function(Ct){if(vt.texCoord!==void 0&&vt.texCoord!=0&&!(dt==="aoMap"&&vt.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+vt.texCoord+" for texture "+dt+" not yet supported."),Et.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]){const Rt=vt.extensions!==void 0?vt.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]:void 0;if(Rt){const kt=Et.associations.get(Ct);Ct=Et.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM].extendTexture(Ct,Rt),Et.associations.set(Ct,kt)}}return Tt!==void 0&&(Ct.encoding=Tt),lt[dt]=Ct,Ct})}assignFinalMaterial(lt){const dt=lt.geometry;let vt=lt.material;const Tt=dt.attributes.tangent===void 0,Et=dt.attributes.color!==void 0,Ct=dt.attributes.normal===void 0;if(lt.isPoints){const Rt="PointsMaterial:"+vt.uuid;let kt=this.cache.get(Rt);kt||(kt=new PointsMaterial,Material.prototype.copy.call(kt,vt),kt.color.copy(vt.color),kt.map=vt.map,kt.sizeAttenuation=!1,this.cache.add(Rt,kt)),vt=kt}else if(lt.isLine){const Rt="LineBasicMaterial:"+vt.uuid;let kt=this.cache.get(Rt);kt||(kt=new LineBasicMaterial,Material.prototype.copy.call(kt,vt),kt.color.copy(vt.color),this.cache.add(Rt,kt)),vt=kt}if(Tt||Et||Ct){let Rt="ClonedMaterial:"+vt.uuid+":";vt.isGLTFSpecularGlossinessMaterial&&(Rt+="specular-glossiness:"),Tt&&(Rt+="derivative-tangents:"),Et&&(Rt+="vertex-colors:"),Ct&&(Rt+="flat-shading:");let kt=this.cache.get(Rt);kt||(kt=vt.clone(),Et&&(kt.vertexColors=!0),Ct&&(kt.flatShading=!0),Tt&&(kt.normalScale&&(kt.normalScale.y*=-1),kt.clearcoatNormalScale&&(kt.clearcoatNormalScale.y*=-1)),this.cache.add(Rt,kt),this.associations.set(kt,this.associations.get(vt))),vt=kt}vt.aoMap&&dt.attributes.uv2===void 0&&dt.attributes.uv!==void 0&&dt.setAttribute("uv2",dt.attributes.uv),lt.material=vt}getMaterialType(){return MeshStandardMaterial}loadMaterial(lt){const dt=this,vt=this.json,Tt=this.extensions,Et=vt.materials[lt];let Ct;const Rt={},kt=Et.extensions||{},Dt=[];if(kt[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const Ft=Tt[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];Ct=Ft.getMaterialType(),Dt.push(Ft.extendParams(Rt,Et,dt))}else if(kt[EXTENSIONS.KHR_MATERIALS_UNLIT]){const Ft=Tt[EXTENSIONS.KHR_MATERIALS_UNLIT];Ct=Ft.getMaterialType(),Dt.push(Ft.extendParams(Rt,Et,dt))}else{const Ft=Et.pbrMetallicRoughness||{};if(Rt.color=new Color(1,1,1),Rt.opacity=1,Array.isArray(Ft.baseColorFactor)){const Ut=Ft.baseColorFactor;Rt.color.fromArray(Ut),Rt.opacity=Ut[3]}Ft.baseColorTexture!==void 0&&Dt.push(dt.assignTexture(Rt,"map",Ft.baseColorTexture,sRGBEncoding)),Rt.metalness=Ft.metallicFactor!==void 0?Ft.metallicFactor:1,Rt.roughness=Ft.roughnessFactor!==void 0?Ft.roughnessFactor:1,Ft.metallicRoughnessTexture!==void 0&&(Dt.push(dt.assignTexture(Rt,"metalnessMap",Ft.metallicRoughnessTexture)),Dt.push(dt.assignTexture(Rt,"roughnessMap",Ft.metallicRoughnessTexture))),Ct=this._invokeOne(function(Ut){return Ut.getMaterialType&&Ut.getMaterialType(lt)}),Dt.push(Promise.all(this._invokeAll(function(Ut){return Ut.extendMaterialParams&&Ut.extendMaterialParams(lt,Rt)})))}Et.doubleSided===!0&&(Rt.side=DoubleSide);const Bt=Et.alphaMode||ALPHA_MODES.OPAQUE;if(Bt===ALPHA_MODES.BLEND?(Rt.transparent=!0,Rt.depthWrite=!1):(Rt.transparent=!1,Bt===ALPHA_MODES.MASK&&(Rt.alphaTest=Et.alphaCutoff!==void 0?Et.alphaCutoff:.5)),Et.normalTexture!==void 0&&Ct!==MeshBasicMaterial&&(Dt.push(dt.assignTexture(Rt,"normalMap",Et.normalTexture)),Rt.normalScale=new Vector2(1,1),Et.normalTexture.scale!==void 0)){const Ft=Et.normalTexture.scale;Rt.normalScale.set(Ft,Ft)}return Et.occlusionTexture!==void 0&&Ct!==MeshBasicMaterial&&(Dt.push(dt.assignTexture(Rt,"aoMap",Et.occlusionTexture)),Et.occlusionTexture.strength!==void 0&&(Rt.aoMapIntensity=Et.occlusionTexture.strength)),Et.emissiveFactor!==void 0&&Ct!==MeshBasicMaterial&&(Rt.emissive=new Color().fromArray(Et.emissiveFactor)),Et.emissiveTexture!==void 0&&Ct!==MeshBasicMaterial&&Dt.push(dt.assignTexture(Rt,"emissiveMap",Et.emissiveTexture,sRGBEncoding)),Promise.all(Dt).then(function(){let Ft;return Ct===GLTFMeshStandardSGMaterial?Ft=Tt[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(Rt):Ft=new Ct(Rt),Et.name&&(Ft.name=Et.name),assignExtrasToUserData(Ft,Et),dt.associations.set(Ft,{materials:lt}),Et.extensions&&addUnknownExtensionsToUserData(Tt,Ft,Et),Ft})}createUniqueName(lt){const dt=PropertyBinding.sanitizeNodeName(lt||"");let vt=dt;for(let Tt=1;this.nodeNamesUsed[vt];++Tt)vt=dt+"_"+Tt;return this.nodeNamesUsed[vt]=!0,vt}loadGeometries(lt){const dt=this,vt=this.extensions,Tt=this.primitiveCache;function Et(Rt){return vt[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(Rt,dt).then(function(kt){return addPrimitiveAttributes(kt,Rt,dt)})}const Ct=[];for(let Rt=0,kt=lt.length;Rt<kt;Rt++){const Dt=lt[Rt],Bt=createPrimitiveKey(Dt),Ft=Tt[Bt];if(Ft)Ct.push(Ft.promise);else{let Ut;Dt.extensions&&Dt.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]?Ut=Et(Dt):Ut=addPrimitiveAttributes(new BufferGeometry,Dt,dt),Tt[Bt]={primitive:Dt,promise:Ut},Ct.push(Ut)}}return Promise.all(Ct)}loadMesh(lt){const dt=this,vt=this.json,Tt=this.extensions,Et=vt.meshes[lt],Ct=Et.primitives,Rt=[];for(let kt=0,Dt=Ct.length;kt<Dt;kt++){const Bt=Ct[kt].material===void 0?createDefaultMaterial(this.cache):this.getDependency("material",Ct[kt].material);Rt.push(Bt)}return Rt.push(dt.loadGeometries(Ct)),Promise.all(Rt).then(function(kt){const Dt=kt.slice(0,kt.length-1),Bt=kt[kt.length-1],Ft=[];for(let Zt=0,Kt=Bt.length;Zt<Kt;Zt++){const ln=Bt[Zt],hn=Ct[Zt];let dn;const pn=Dt[Zt];if(hn.mode===WEBGL_CONSTANTS.TRIANGLES||hn.mode===WEBGL_CONSTANTS.TRIANGLE_STRIP||hn.mode===WEBGL_CONSTANTS.TRIANGLE_FAN||hn.mode===void 0)dn=Et.isSkinnedMesh===!0?new SkinnedMesh(ln,pn):new Mesh(ln,pn),dn.isSkinnedMesh===!0&&!dn.geometry.attributes.skinWeight.normalized&&dn.normalizeSkinWeights(),hn.mode===WEBGL_CONSTANTS.TRIANGLE_STRIP?dn.geometry=toTrianglesDrawMode(dn.geometry,TriangleStripDrawMode):hn.mode===WEBGL_CONSTANTS.TRIANGLE_FAN&&(dn.geometry=toTrianglesDrawMode(dn.geometry,TriangleFanDrawMode));else if(hn.mode===WEBGL_CONSTANTS.LINES)dn=new LineSegments(ln,pn);else if(hn.mode===WEBGL_CONSTANTS.LINE_STRIP)dn=new Line$2(ln,pn);else if(hn.mode===WEBGL_CONSTANTS.LINE_LOOP)dn=new LineLoop(ln,pn);else if(hn.mode===WEBGL_CONSTANTS.POINTS)dn=new Points(ln,pn);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+hn.mode);Object.keys(dn.geometry.morphAttributes).length>0&&updateMorphTargets(dn,Et),dn.name=dt.createUniqueName(Et.name||"mesh_"+lt),assignExtrasToUserData(dn,Et),hn.extensions&&addUnknownExtensionsToUserData(Tt,dn,hn),dt.assignFinalMaterial(dn),Ft.push(dn)}for(let Zt=0,Kt=Ft.length;Zt<Kt;Zt++)dt.associations.set(Ft[Zt],{meshes:lt,primitives:Zt});if(Ft.length===1)return Ft[0];const Ut=new Group;dt.associations.set(Ut,{meshes:lt});for(let Zt=0,Kt=Ft.length;Zt<Kt;Zt++)Ut.add(Ft[Zt]);return Ut})}loadCamera(lt){let dt;const vt=this.json.cameras[lt],Tt=vt[vt.type];if(!Tt){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return vt.type==="perspective"?dt=new PerspectiveCamera(MathUtils.radToDeg(Tt.yfov),Tt.aspectRatio||1,Tt.znear||1,Tt.zfar||2e6):vt.type==="orthographic"&&(dt=new OrthographicCamera$1(-Tt.xmag,Tt.xmag,Tt.ymag,-Tt.ymag,Tt.znear,Tt.zfar)),vt.name&&(dt.name=this.createUniqueName(vt.name)),assignExtrasToUserData(dt,vt),Promise.resolve(dt)}loadSkin(lt){const dt=this.json.skins[lt],vt={joints:dt.joints};return dt.inverseBindMatrices===void 0?Promise.resolve(vt):this.getDependency("accessor",dt.inverseBindMatrices).then(function(Tt){return vt.inverseBindMatrices=Tt,vt})}loadAnimation(lt){const vt=this.json.animations[lt],Tt=[],Et=[],Ct=[],Rt=[],kt=[];for(let Dt=0,Bt=vt.channels.length;Dt<Bt;Dt++){const Ft=vt.channels[Dt],Ut=vt.samplers[Ft.sampler],Zt=Ft.target,Kt=Zt.node,ln=vt.parameters!==void 0?vt.parameters[Ut.input]:Ut.input,hn=vt.parameters!==void 0?vt.parameters[Ut.output]:Ut.output;Tt.push(this.getDependency("node",Kt)),Et.push(this.getDependency("accessor",ln)),Ct.push(this.getDependency("accessor",hn)),Rt.push(Ut),kt.push(Zt)}return Promise.all([Promise.all(Tt),Promise.all(Et),Promise.all(Ct),Promise.all(Rt),Promise.all(kt)]).then(function(Dt){const Bt=Dt[0],Ft=Dt[1],Ut=Dt[2],Zt=Dt[3],Kt=Dt[4],ln=[];for(let dn=0,pn=Bt.length;dn<pn;dn++){const mn=Bt[dn],On=Ft[dn],bn=Ut[dn],En=Zt[dn],An=Kt[dn];if(mn===void 0)continue;mn.updateMatrix();let Tn;switch(PATH_PROPERTIES[An.path]){case PATH_PROPERTIES.weights:Tn=NumberKeyframeTrack;break;case PATH_PROPERTIES.rotation:Tn=QuaternionKeyframeTrack;break;case PATH_PROPERTIES.position:case PATH_PROPERTIES.scale:default:Tn=VectorKeyframeTrack;break}const In=mn.name?mn.name:mn.uuid,Rn=En.interpolation!==void 0?INTERPOLATION[En.interpolation]:InterpolateLinear,Dn=[];PATH_PROPERTIES[An.path]===PATH_PROPERTIES.weights?mn.traverse(function(Hn){Hn.morphTargetInfluences&&Dn.push(Hn.name?Hn.name:Hn.uuid)}):Dn.push(In);let Bn=bn.array;if(bn.normalized){const Hn=getNormalizedComponentScale(Bn.constructor),jn=new Float32Array(Bn.length);for(let Kn=0,zn=Bn.length;Kn<zn;Kn++)jn[Kn]=Bn[Kn]*Hn;Bn=jn}for(let Hn=0,jn=Dn.length;Hn<jn;Hn++){const Kn=new Tn(Dn[Hn]+"."+PATH_PROPERTIES[An.path],On.array,Bn,Rn);En.interpolation==="CUBICSPLINE"&&(Kn.createInterpolant=function(lr){const Ln=this instanceof QuaternionKeyframeTrack?GLTFCubicSplineQuaternionInterpolant:GLTFCubicSplineInterpolant;return new Ln(this.times,this.values,this.getValueSize()/3,lr)},Kn.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),ln.push(Kn)}}const hn=vt.name?vt.name:"animation_"+lt;return new AnimationClip(hn,void 0,ln)})}createNodeMesh(lt){const dt=this.json,vt=this,Tt=dt.nodes[lt];return Tt.mesh===void 0?null:vt.getDependency("mesh",Tt.mesh).then(function(Et){const Ct=vt._getNodeRef(vt.meshCache,Tt.mesh,Et);return Tt.weights!==void 0&&Ct.traverse(function(Rt){if(Rt.isMesh)for(let kt=0,Dt=Tt.weights.length;kt<Dt;kt++)Rt.morphTargetInfluences[kt]=Tt.weights[kt]}),Ct})}loadNode(lt){const dt=this.json,vt=this.extensions,Tt=this,Et=dt.nodes[lt],Ct=Et.name?Tt.createUniqueName(Et.name):"";return function(){const Rt=[],kt=Tt._invokeOne(function(Dt){return Dt.createNodeMesh&&Dt.createNodeMesh(lt)});return kt&&Rt.push(kt),Et.camera!==void 0&&Rt.push(Tt.getDependency("camera",Et.camera).then(function(Dt){return Tt._getNodeRef(Tt.cameraCache,Et.camera,Dt)})),Tt._invokeAll(function(Dt){return Dt.createNodeAttachment&&Dt.createNodeAttachment(lt)}).forEach(function(Dt){Rt.push(Dt)}),Promise.all(Rt)}().then(function(Rt){let kt;if(Et.isBone===!0?kt=new Bone:Rt.length>1?kt=new Group:Rt.length===1?kt=Rt[0]:kt=new Object3D,kt!==Rt[0])for(let Dt=0,Bt=Rt.length;Dt<Bt;Dt++)kt.add(Rt[Dt]);if(Et.name&&(kt.userData.name=Et.name,kt.name=Ct),assignExtrasToUserData(kt,Et),Et.extensions&&addUnknownExtensionsToUserData(vt,kt,Et),Et.matrix!==void 0){const Dt=new Matrix4;Dt.fromArray(Et.matrix),kt.applyMatrix4(Dt)}else Et.translation!==void 0&&kt.position.fromArray(Et.translation),Et.rotation!==void 0&&kt.quaternion.fromArray(Et.rotation),Et.scale!==void 0&&kt.scale.fromArray(Et.scale);return Tt.associations.has(kt)||Tt.associations.set(kt,{}),Tt.associations.get(kt).nodes=lt,kt})}loadScene(lt){const dt=this.json,vt=this.extensions,Tt=this.json.scenes[lt],Et=this,Ct=new Group;Tt.name&&(Ct.name=Et.createUniqueName(Tt.name)),assignExtrasToUserData(Ct,Tt),Tt.extensions&&addUnknownExtensionsToUserData(vt,Ct,Tt);const Rt=Tt.nodes||[],kt=[];for(let Dt=0,Bt=Rt.length;Dt<Bt;Dt++)kt.push(buildNodeHierarchy(Rt[Dt],Ct,dt,Et));return Promise.all(kt).then(function(){const Dt=Bt=>{const Ft=new Map;for(const[Ut,Zt]of Et.associations)(Ut instanceof Material||Ut instanceof Texture)&&Ft.set(Ut,Zt);return Bt.traverse(Ut=>{const Zt=Et.associations.get(Ut);Zt!=null&&Ft.set(Ut,Zt)}),Ft};return Et.associations=Dt(Ct),Ct})}}function buildNodeHierarchy(ft,lt,dt,vt){const Tt=dt.nodes[ft];return vt.getDependency("node",ft).then(function(Et){if(Tt.skin===void 0)return Et;let Ct;return vt.getDependency("skin",Tt.skin).then(function(Rt){Ct=Rt;const kt=[];for(let Dt=0,Bt=Ct.joints.length;Dt<Bt;Dt++)kt.push(vt.getDependency("node",Ct.joints[Dt]));return Promise.all(kt)}).then(function(Rt){return Et.traverse(function(kt){if(!kt.isMesh)return;const Dt=[],Bt=[];for(let Ft=0,Ut=Rt.length;Ft<Ut;Ft++){const Zt=Rt[Ft];if(Zt){Dt.push(Zt);const Kt=new Matrix4;Ct.inverseBindMatrices!==void 0&&Kt.fromArray(Ct.inverseBindMatrices.array,Ft*16),Bt.push(Kt)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',Ct.joints[Ft])}kt.bind(new Skeleton(Dt,Bt),kt.matrixWorld)}),Et})}).then(function(Et){lt.add(Et);const Ct=[];if(Tt.children){const Rt=Tt.children;for(let kt=0,Dt=Rt.length;kt<Dt;kt++){const Bt=Rt[kt];Ct.push(buildNodeHierarchy(Bt,Et,dt,vt))}}return Promise.all(Ct)})}function computeBounds(ft,lt,dt){const vt=lt.attributes,Tt=new Box3;if(vt.POSITION!==void 0){const Rt=dt.json.accessors[vt.POSITION],kt=Rt.min,Dt=Rt.max;if(kt!==void 0&&Dt!==void 0){if(Tt.set(new Vector3(kt[0],kt[1],kt[2]),new Vector3(Dt[0],Dt[1],Dt[2])),Rt.normalized){const Bt=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[Rt.componentType]);Tt.min.multiplyScalar(Bt),Tt.max.multiplyScalar(Bt)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const Et=lt.targets;if(Et!==void 0){const Rt=new Vector3,kt=new Vector3;for(let Dt=0,Bt=Et.length;Dt<Bt;Dt++){const Ft=Et[Dt];if(Ft.POSITION!==void 0){const Ut=dt.json.accessors[Ft.POSITION],Zt=Ut.min,Kt=Ut.max;if(Zt!==void 0&&Kt!==void 0){if(kt.setX(Math.max(Math.abs(Zt[0]),Math.abs(Kt[0]))),kt.setY(Math.max(Math.abs(Zt[1]),Math.abs(Kt[1]))),kt.setZ(Math.max(Math.abs(Zt[2]),Math.abs(Kt[2]))),Ut.normalized){const ln=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[Ut.componentType]);kt.multiplyScalar(ln)}Rt.max(kt)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}Tt.expandByVector(Rt)}ft.boundingBox=Tt;const Ct=new Sphere$1;Tt.getCenter(Ct.center),Ct.radius=Tt.min.distanceTo(Tt.max)/2,ft.boundingSphere=Ct}function addPrimitiveAttributes(ft,lt,dt){const vt=lt.attributes,Tt=[];function Et(Ct,Rt){return dt.getDependency("accessor",Ct).then(function(kt){ft.setAttribute(Rt,kt)})}for(const Ct in vt){const Rt=ATTRIBUTES[Ct]||Ct.toLowerCase();Rt in ft.attributes||Tt.push(Et(vt[Ct],Rt))}if(lt.indices!==void 0&&!ft.index){const Ct=dt.getDependency("accessor",lt.indices).then(function(Rt){ft.setIndex(Rt)});Tt.push(Ct)}return assignExtrasToUserData(ft,lt),computeBounds(ft,lt,dt),Promise.all(Tt).then(function(){return lt.targets!==void 0?addMorphTargets(ft,lt.targets,dt):ft})}function toTrianglesDrawMode(ft,lt){let dt=ft.getIndex();if(dt===null){const Ct=[],Rt=ft.getAttribute("position");if(Rt!==void 0){for(let kt=0;kt<Rt.count;kt++)Ct.push(kt);ft.setIndex(Ct),dt=ft.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),ft}const vt=dt.count-2,Tt=[];if(lt===TriangleFanDrawMode)for(let Ct=1;Ct<=vt;Ct++)Tt.push(dt.getX(0)),Tt.push(dt.getX(Ct)),Tt.push(dt.getX(Ct+1));else for(let Ct=0;Ct<vt;Ct++)Ct%2===0?(Tt.push(dt.getX(Ct)),Tt.push(dt.getX(Ct+1)),Tt.push(dt.getX(Ct+2))):(Tt.push(dt.getX(Ct+2)),Tt.push(dt.getX(Ct+1)),Tt.push(dt.getX(Ct)));Tt.length/3!==vt&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const Et=ft.clone();return Et.setIndex(Tt),Et}const _taskCache=new WeakMap;class DRACOLoader extends Loader{constructor(lt){super(lt),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(lt){return this.decoderPath=lt,this}setDecoderConfig(lt){return this.decoderConfig=lt,this}setWorkerLimit(lt){return this.workerLimit=lt,this}load(lt,dt,vt,Tt){const Et=new FileLoader(this.manager);Et.setPath(this.path),Et.setResponseType("arraybuffer"),Et.setRequestHeader(this.requestHeader),Et.setWithCredentials(this.withCredentials),Et.load(lt,Ct=>{const Rt={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(Ct,Rt).then(dt).catch(Tt)},vt,Tt)}decodeDracoFile(lt,dt,vt,Tt){const Et={attributeIDs:vt||this.defaultAttributeIDs,attributeTypes:Tt||this.defaultAttributeTypes,useUniqueIDs:!!vt};this.decodeGeometry(lt,Et).then(dt)}decodeGeometry(lt,dt){for(const kt in dt.attributeTypes){const Dt=dt.attributeTypes[kt];Dt.BYTES_PER_ELEMENT!==void 0&&(dt.attributeTypes[kt]=Dt.name)}const vt=JSON.stringify(dt);if(_taskCache.has(lt)){const kt=_taskCache.get(lt);if(kt.key===vt)return kt.promise;if(lt.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let Tt;const Et=this.workerNextTaskID++,Ct=lt.byteLength,Rt=this._getWorker(Et,Ct).then(kt=>(Tt=kt,new Promise((Dt,Bt)=>{Tt._callbacks[Et]={resolve:Dt,reject:Bt},Tt.postMessage({type:"decode",id:Et,taskConfig:dt,buffer:lt},[lt])}))).then(kt=>this._createGeometry(kt.geometry));return Rt.catch(()=>!0).then(()=>{Tt&&Et&&this._releaseTask(Tt,Et)}),_taskCache.set(lt,{key:vt,promise:Rt}),Rt}_createGeometry(lt){const dt=new BufferGeometry;lt.index&&dt.setIndex(new BufferAttribute(lt.index.array,1));for(let vt=0;vt<lt.attributes.length;vt++){const Tt=lt.attributes[vt],Et=Tt.name,Ct=Tt.array,Rt=Tt.itemSize;dt.setAttribute(Et,new BufferAttribute(Ct,Rt))}return dt}_loadLibrary(lt,dt){const vt=new FileLoader(this.manager);return vt.setPath(this.decoderPath),vt.setResponseType(dt),vt.setWithCredentials(this.withCredentials),new Promise((Tt,Et)=>{vt.load(lt,Tt,void 0,Et)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const lt=typeof WebAssembly!="object"||this.decoderConfig.type==="js",dt=[];return lt?dt.push(this._loadLibrary("draco_decoder.js","text")):(dt.push(this._loadLibrary("draco_wasm_wrapper.js","text")),dt.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(dt).then(vt=>{const Tt=vt[0];lt||(this.decoderConfig.wasmBinary=vt[1]);const Et=DRACOWorker.toString(),Ct=["/* draco decoder */",Tt,"","/* worker */",Et.substring(Et.indexOf("{")+1,Et.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([Ct]))}),this.decoderPending}_getWorker(lt,dt){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const Tt=new Worker(this.workerSourceURL);Tt._callbacks={},Tt._taskCosts={},Tt._taskLoad=0,Tt.postMessage({type:"init",decoderConfig:this.decoderConfig}),Tt.onmessage=function(Et){const Ct=Et.data;switch(Ct.type){case"decode":Tt._callbacks[Ct.id].resolve(Ct);break;case"error":Tt._callbacks[Ct.id].reject(Ct);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+Ct.type+'"')}},this.workerPool.push(Tt)}else this.workerPool.sort(function(Tt,Et){return Tt._taskLoad>Et._taskLoad?-1:1});const vt=this.workerPool[this.workerPool.length-1];return vt._taskCosts[lt]=dt,vt._taskLoad+=dt,vt})}_releaseTask(lt,dt){lt._taskLoad-=lt._taskCosts[dt],delete lt._callbacks[dt],delete lt._taskCosts[dt]}debug(){console.log("Task load: ",this.workerPool.map(lt=>lt._taskLoad))}dispose(){for(let lt=0;lt<this.workerPool.length;++lt)this.workerPool[lt].terminate();return this.workerPool.length=0,this}}function DRACOWorker(){let ft,lt;onmessage=function(Ct){const Rt=Ct.data;switch(Rt.type){case"init":ft=Rt.decoderConfig,lt=new Promise(function(Bt){ft.onModuleLoaded=function(Ft){Bt({draco:Ft})},DracoDecoderModule(ft)});break;case"decode":const kt=Rt.buffer,Dt=Rt.taskConfig;lt.then(Bt=>{const Ft=Bt.draco,Ut=new Ft.Decoder,Zt=new Ft.DecoderBuffer;Zt.Init(new Int8Array(kt),kt.byteLength);try{const Kt=dt(Ft,Ut,Zt,Dt),ln=Kt.attributes.map(hn=>hn.array.buffer);Kt.index&&ln.push(Kt.index.array.buffer),self.postMessage({type:"decode",id:Rt.id,geometry:Kt},ln)}catch(Kt){console.error(Kt),self.postMessage({type:"error",id:Rt.id,error:Kt.message})}finally{Ft.destroy(Zt),Ft.destroy(Ut)}});break}};function dt(Ct,Rt,kt,Dt){const Bt=Dt.attributeIDs,Ft=Dt.attributeTypes;let Ut,Zt;const Kt=Rt.GetEncodedGeometryType(kt);if(Kt===Ct.TRIANGULAR_MESH)Ut=new Ct.Mesh,Zt=Rt.DecodeBufferToMesh(kt,Ut);else if(Kt===Ct.POINT_CLOUD)Ut=new Ct.PointCloud,Zt=Rt.DecodeBufferToPointCloud(kt,Ut);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!Zt.ok()||Ut.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+Zt.error_msg());const ln={index:null,attributes:[]};for(const hn in Bt){const dn=self[Ft[hn]];let pn,mn;if(Dt.useUniqueIDs)mn=Bt[hn],pn=Rt.GetAttributeByUniqueId(Ut,mn);else{if(mn=Rt.GetAttributeId(Ut,Ct[Bt[hn]]),mn===-1)continue;pn=Rt.GetAttribute(Ut,mn)}ln.attributes.push(Tt(Ct,Rt,Ut,hn,dn,pn))}return Kt===Ct.TRIANGULAR_MESH&&(ln.index=vt(Ct,Rt,Ut)),Ct.destroy(Ut),ln}function vt(Ct,Rt,kt){const Bt=kt.num_faces()*3,Ft=Bt*4,Ut=Ct._malloc(Ft);Rt.GetTrianglesUInt32Array(kt,Ft,Ut);const Zt=new Uint32Array(Ct.HEAPF32.buffer,Ut,Bt).slice();return Ct._free(Ut),{array:Zt,itemSize:1}}function Tt(Ct,Rt,kt,Dt,Bt,Ft){const Ut=Ft.num_components(),Kt=kt.num_points()*Ut,ln=Kt*Bt.BYTES_PER_ELEMENT,hn=Et(Ct,Bt),dn=Ct._malloc(ln);Rt.GetAttributeDataArrayForAllPoints(kt,Ft,hn,ln,dn);const pn=new Bt(Ct.HEAPF32.buffer,dn,Kt).slice();return Ct._free(dn),{name:Dt,array:pn,itemSize:Ut}}function Et(Ct,Rt){switch(Rt){case Float32Array:return Ct.DT_FLOAT32;case Int8Array:return Ct.DT_INT8;case Int16Array:return Ct.DT_INT16;case Int32Array:return Ct.DT_INT32;case Uint8Array:return Ct.DT_UINT8;case Uint16Array:return Ct.DT_UINT16;case Uint32Array:return Ct.DT_UINT32}}}const _box$1=new Box3,_vector=new Vector3;class LineSegmentsGeometry extends InstancedBufferGeometry{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const lt=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],dt=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],vt=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(vt),this.setAttribute("position",new Float32BufferAttribute(lt,3)),this.setAttribute("uv",new Float32BufferAttribute(dt,2))}applyMatrix4(lt){const dt=this.attributes.instanceStart,vt=this.attributes.instanceEnd;return dt!==void 0&&(dt.applyMatrix4(lt),vt.applyMatrix4(lt),dt.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(lt){let dt;lt instanceof Float32Array?dt=lt:Array.isArray(lt)&&(dt=new Float32Array(lt));const vt=new InstancedInterleavedBuffer(dt,6,1);return this.setAttribute("instanceStart",new InterleavedBufferAttribute(vt,3,0)),this.setAttribute("instanceEnd",new InterleavedBufferAttribute(vt,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(lt){let dt;lt instanceof Float32Array?dt=lt:Array.isArray(lt)&&(dt=new Float32Array(lt));const vt=new InstancedInterleavedBuffer(dt,6,1);return this.setAttribute("instanceColorStart",new InterleavedBufferAttribute(vt,3,0)),this.setAttribute("instanceColorEnd",new InterleavedBufferAttribute(vt,3,3)),this}fromWireframeGeometry(lt){return this.setPositions(lt.attributes.position.array),this}fromEdgesGeometry(lt){return this.setPositions(lt.attributes.position.array),this}fromMesh(lt){return this.fromWireframeGeometry(new WireframeGeometry(lt.geometry)),this}fromLineSegments(lt){const dt=lt.geometry;return this.setPositions(dt.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const lt=this.attributes.instanceStart,dt=this.attributes.instanceEnd;lt!==void 0&&dt!==void 0&&(this.boundingBox.setFromBufferAttribute(lt),_box$1.setFromBufferAttribute(dt),this.boundingBox.union(_box$1))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere$1),this.boundingBox===null&&this.computeBoundingBox();const lt=this.attributes.instanceStart,dt=this.attributes.instanceEnd;if(lt!==void 0&&dt!==void 0){const vt=this.boundingSphere.center;this.boundingBox.getCenter(vt);let Tt=0;for(let Et=0,Ct=lt.count;Et<Ct;Et++)_vector.fromBufferAttribute(lt,Et),Tt=Math.max(Tt,vt.distanceToSquared(_vector)),_vector.fromBufferAttribute(dt,Et),Tt=Math.max(Tt,vt.distanceToSquared(_vector));this.boundingSphere.radius=Math.sqrt(Tt),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(lt){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(lt)}}class LineGeometry extends LineSegmentsGeometry{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(lt){const dt=lt.length-3,vt=new Float32Array(2*dt);for(let Tt=0;Tt<dt;Tt+=3)vt[2*Tt]=lt[Tt],vt[2*Tt+1]=lt[Tt+1],vt[2*Tt+2]=lt[Tt+2],vt[2*Tt+3]=lt[Tt+3],vt[2*Tt+4]=lt[Tt+4],vt[2*Tt+5]=lt[Tt+5];return super.setPositions(vt),this}setColors(lt){const dt=lt.length-3,vt=new Float32Array(2*dt);for(let Tt=0;Tt<dt;Tt+=3)vt[2*Tt]=lt[Tt],vt[2*Tt+1]=lt[Tt+1],vt[2*Tt+2]=lt[Tt+2],vt[2*Tt+3]=lt[Tt+3],vt[2*Tt+4]=lt[Tt+4],vt[2*Tt+5]=lt[Tt+5];return super.setColors(vt),this}fromLine(lt){const dt=lt.geometry;return this.setPositions(dt.attributes.position.array),this}}UniformsLib.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new Vector2(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};ShaderLib.line={uniforms:UniformsUtils.merge([UniformsLib.common,UniformsLib.fog,UniformsLib.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				// get the offset direction as perpendicular to the view vector
				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 offset;
				if ( position.y < 0.5 ) {

					offset = normalize( cross( start.xyz, worldDir ) );

				} else {

					offset = normalize( cross( end.xyz, worldDir ) );

				}

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// extend the line bounds to encompass  endcaps
					start.xyz += - worldDir * linewidth * 0.5;
					end.xyz += worldDir * linewidth * 0.5;

					// shift the position of the quad so it hugs the forward edge of the line
					offset.xy -= dir * forwardOffset;
					offset.z += 0.5;

				#endif

				// endcaps
				if ( position.y > 1.0 || position.y < 0.0 ) {

					offset.xy += dir * 2.0 * forwardOffset;

				}

				// adjust for linewidth
				offset *= linewidth * 0.5;

				// set the world position
				worldPos = ( position.y < 0.5 ) ? start : end;
				worldPos.xyz += offset;

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <encodings_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};class LineMaterial extends ShaderMaterial{constructor(lt){super({type:"LineMaterial",uniforms:UniformsUtils.clone(ShaderLib.line.uniforms),vertexShader:ShaderLib.line.vertexShader,fragmentShader:ShaderLib.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(dt){this.uniforms.diffuse.value=dt}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(dt){dt===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(dt){this.uniforms.linewidth.value=dt}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(dt){!!dt!="USE_DASH"in this.defines&&(this.needsUpdate=!0),dt===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(dt){this.uniforms.dashScale.value=dt}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(dt){this.uniforms.dashSize.value=dt}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(dt){this.uniforms.dashOffset.value=dt}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(dt){this.uniforms.gapSize.value=dt}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(dt){this.uniforms.opacity.value=dt}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(dt){this.uniforms.resolution.value.copy(dt)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(dt){!!dt!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),dt===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(lt)}}const _start=new Vector3,_end=new Vector3,_start4=new Vector4,_end4=new Vector4,_ssOrigin=new Vector4,_ssOrigin3=new Vector3,_mvMatrix=new Matrix4,_line=new Line3,_closestPoint=new Vector3,_box=new Box3,_sphere=new Sphere$1,_clipToWorldVector=new Vector4;let _ray,_instanceStart,_instanceEnd,_lineWidth;function getWorldSpaceHalfWidth(ft,lt,dt){return _clipToWorldVector.set(0,0,-lt,1).applyMatrix4(ft.projectionMatrix),_clipToWorldVector.multiplyScalar(1/_clipToWorldVector.w),_clipToWorldVector.x=_lineWidth/dt.width,_clipToWorldVector.y=_lineWidth/dt.height,_clipToWorldVector.applyMatrix4(ft.projectionMatrixInverse),_clipToWorldVector.multiplyScalar(1/_clipToWorldVector.w),Math.abs(Math.max(_clipToWorldVector.x,_clipToWorldVector.y))}function raycastWorldUnits(ft,lt){for(let dt=0,vt=_instanceStart.count;dt<vt;dt++){_line.start.fromBufferAttribute(_instanceStart,dt),_line.end.fromBufferAttribute(_instanceEnd,dt);const Tt=new Vector3,Et=new Vector3;_ray.distanceSqToSegment(_line.start,_line.end,Et,Tt),Et.distanceTo(Tt)<_lineWidth*.5&&lt.push({point:Et,pointOnLine:Tt,distance:_ray.origin.distanceTo(Et),object:ft,face:null,faceIndex:dt,uv:null,uv2:null})}}function raycastScreenSpace(ft,lt,dt){const vt=lt.projectionMatrix,Et=ft.material.resolution,Ct=ft.matrixWorld,Rt=ft.geometry,kt=Rt.attributes.instanceStart,Dt=Rt.attributes.instanceEnd,Bt=-lt.near;_ray.at(1,_ssOrigin),_ssOrigin.w=1,_ssOrigin.applyMatrix4(lt.matrixWorldInverse),_ssOrigin.applyMatrix4(vt),_ssOrigin.multiplyScalar(1/_ssOrigin.w),_ssOrigin.x*=Et.x/2,_ssOrigin.y*=Et.y/2,_ssOrigin.z=0,_ssOrigin3.copy(_ssOrigin),_mvMatrix.multiplyMatrices(lt.matrixWorldInverse,Ct);for(let Ft=0,Ut=kt.count;Ft<Ut;Ft++){if(_start4.fromBufferAttribute(kt,Ft),_end4.fromBufferAttribute(Dt,Ft),_start4.w=1,_end4.w=1,_start4.applyMatrix4(_mvMatrix),_end4.applyMatrix4(_mvMatrix),_start4.z>Bt&&_end4.z>Bt)continue;if(_start4.z>Bt){const pn=_start4.z-_end4.z,mn=(_start4.z-Bt)/pn;_start4.lerp(_end4,mn)}else if(_end4.z>Bt){const pn=_end4.z-_start4.z,mn=(_end4.z-Bt)/pn;_end4.lerp(_start4,mn)}_start4.applyMatrix4(vt),_end4.applyMatrix4(vt),_start4.multiplyScalar(1/_start4.w),_end4.multiplyScalar(1/_end4.w),_start4.x*=Et.x/2,_start4.y*=Et.y/2,_end4.x*=Et.x/2,_end4.y*=Et.y/2,_line.start.copy(_start4),_line.start.z=0,_line.end.copy(_end4),_line.end.z=0;const Kt=_line.closestPointToPointParameter(_ssOrigin3,!0);_line.at(Kt,_closestPoint);const ln=MathUtils.lerp(_start4.z,_end4.z,Kt),hn=ln>=-1&&ln<=1,dn=_ssOrigin3.distanceTo(_closestPoint)<_lineWidth*.5;if(hn&&dn){_line.start.fromBufferAttribute(kt,Ft),_line.end.fromBufferAttribute(Dt,Ft),_line.start.applyMatrix4(Ct),_line.end.applyMatrix4(Ct);const pn=new Vector3,mn=new Vector3;_ray.distanceSqToSegment(_line.start,_line.end,mn,pn),dt.push({point:mn,pointOnLine:pn,distance:_ray.origin.distanceTo(mn),object:ft,face:null,faceIndex:Ft,uv:null,uv2:null})}}}class LineSegments2 extends Mesh{constructor(lt=new LineSegmentsGeometry,dt=new LineMaterial({color:Math.random()*16777215})){super(lt,dt),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const lt=this.geometry,dt=lt.attributes.instanceStart,vt=lt.attributes.instanceEnd,Tt=new Float32Array(2*dt.count);for(let Ct=0,Rt=0,kt=dt.count;Ct<kt;Ct++,Rt+=2)_start.fromBufferAttribute(dt,Ct),_end.fromBufferAttribute(vt,Ct),Tt[Rt]=Rt===0?0:Tt[Rt-1],Tt[Rt+1]=Tt[Rt]+_start.distanceTo(_end);const Et=new InstancedInterleavedBuffer(Tt,2,1);return lt.setAttribute("instanceDistanceStart",new InterleavedBufferAttribute(Et,1,0)),lt.setAttribute("instanceDistanceEnd",new InterleavedBufferAttribute(Et,1,1)),this}raycast(lt,dt){const vt=this.material.worldUnits,Tt=lt.camera;Tt===null&&!vt&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const Et=lt.params.Line2!==void 0&&lt.params.Line2.threshold||0;_ray=lt.ray;const Ct=this.matrixWorld,Rt=this.geometry,kt=this.material;_lineWidth=kt.linewidth+Et,_instanceStart=Rt.attributes.instanceStart,_instanceEnd=Rt.attributes.instanceEnd,Rt.boundingSphere===null&&Rt.computeBoundingSphere(),_sphere.copy(Rt.boundingSphere).applyMatrix4(Ct);let Dt;if(vt)Dt=_lineWidth*.5;else{const Ft=Math.max(Tt.near,_sphere.distanceToPoint(_ray.origin));Dt=getWorldSpaceHalfWidth(Tt,Ft,kt.resolution)}if(_sphere.radius+=Dt,_ray.intersectsSphere(_sphere)===!1)return;Rt.boundingBox===null&&Rt.computeBoundingBox(),_box.copy(Rt.boundingBox).applyMatrix4(Ct);let Bt;if(vt)Bt=_lineWidth*.5;else{const Ft=Math.max(Tt.near,_box.distanceToPoint(_ray.origin));Bt=getWorldSpaceHalfWidth(Tt,Ft,kt.resolution)}_box.expandByScalar(Bt),_ray.intersectsBox(_box)!==!1&&(vt?raycastWorldUnits(this,dt):raycastScreenSpace(this,Tt,dt))}}class Line2 extends LineSegments2{constructor(lt=new LineGeometry,dt=new LineMaterial({color:Math.random()*16777215})){super(lt,dt),this.isLine2=!0,this.type="Line2"}}let generated;const MeshoptDecoder=()=>{if(generated)return generated;const ft="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",lt="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",dt=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),vt=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let Tt=ft;WebAssembly.validate(dt)&&(Tt=lt);let Et;const Ct=WebAssembly.instantiate(Rt(Tt),{}).then(Ft=>{Et=Ft.instance,Et.exports.__wasm_call_ctors()});function Rt(Ft){const Ut=new Uint8Array(Ft.length);for(let Kt=0;Kt<Ft.length;++Kt){const ln=Ft.charCodeAt(Kt);Ut[Kt]=ln>96?ln-71:ln>64?ln-65:ln>47?ln+4:ln>46?63:62}let Zt=0;for(let Kt=0;Kt<Ft.length;++Kt)Ut[Zt++]=Ut[Kt]<60?vt[Ut[Kt]]:(Ut[Kt]-60)*64+Ut[++Kt];return Ut.buffer.slice(0,Zt)}function kt(Ft,Ut,Zt,Kt,ln,hn){const dn=Et.exports.sbrk,pn=Zt+3&-4,mn=dn(pn*Kt),On=dn(ln.length),bn=new Uint8Array(Et.exports.memory.buffer);bn.set(ln,On);const En=Ft(mn,Zt,Kt,On,ln.length);if(En===0&&hn&&hn(mn,pn,Kt),Ut.set(bn.subarray(mn,mn+Zt*Kt)),dn(mn-dn(0)),En!==0)throw new Error(`Malformed buffer data: ${En}`)}const Dt={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},Bt={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return generated={ready:Ct,supported:!0,decodeVertexBuffer(Ft,Ut,Zt,Kt,ln){kt(Et.exports.meshopt_decodeVertexBuffer,Ft,Ut,Zt,Kt,Et.exports[Dt[ln]])},decodeIndexBuffer(Ft,Ut,Zt,Kt){kt(Et.exports.meshopt_decodeIndexBuffer,Ft,Ut,Zt,Kt)},decodeIndexSequence(Ft,Ut,Zt,Kt){kt(Et.exports.meshopt_decodeIndexSequence,Ft,Ut,Zt,Kt)},decodeGltfBuffer(Ft,Ut,Zt,Kt,ln,hn){kt(Et.exports[Bt[ln]],Ft,Ut,Zt,Kt,Et.exports[Dt[hn]])}},generated},Line$1=reactExports.forwardRef(function ft({points:lt,color:dt="black",vertexColors:vt,linewidth:Tt,lineWidth:Et,segments:Ct,dashed:Rt,...kt},Dt){const Bt=useThree(Kt=>Kt.size),Ft=reactExports.useMemo(()=>Ct?new LineSegments2:new Line2,[Ct]),[Ut]=reactExports.useState(()=>new LineMaterial),Zt=reactExports.useMemo(()=>{const Kt=Ct?new LineSegmentsGeometry:new LineGeometry,ln=lt.map(hn=>{const dn=Array.isArray(hn);return hn instanceof Vector3?[hn.x,hn.y,hn.z]:hn instanceof Vector2?[hn.x,hn.y,0]:dn&&hn.length===3?[hn[0],hn[1],hn[2]]:dn&&hn.length===2?[hn[0],hn[1],0]:hn});if(Kt.setPositions(ln.flat()),vt){const hn=vt.map(dn=>dn instanceof Color?dn.toArray():dn);Kt.setColors(hn.flat())}return Kt},[lt,Ct,vt]);return reactExports.useLayoutEffect(()=>{Ft.computeLineDistances()},[lt,Ft]),reactExports.useLayoutEffect(()=>{Rt?Ut.defines.USE_DASH="":delete Ut.defines.USE_DASH,Ut.needsUpdate=!0},[Rt,Ut]),reactExports.useEffect(()=>()=>Zt.dispose(),[Zt]),reactExports.createElement("primitive",_extends({object:Ft,ref:Dt},kt),reactExports.createElement("primitive",{object:Zt,attach:"geometry"}),reactExports.createElement("primitive",_extends({object:Ut,attach:"material",color:dt,vertexColors:!!vt,resolution:[Bt.width,Bt.height],linewidth:Tt??Et,dashed:Rt},kt)))}),CatmullRomLine=reactExports.forwardRef(function ft({points:lt,closed:dt=!1,curveType:vt="centripetal",tension:Tt=.5,segments:Et=20,vertexColors:Ct,...Rt},kt){const Dt=reactExports.useMemo(()=>{const Ut=lt.map(Zt=>Zt instanceof Vector3?Zt:new Vector3(...Zt));return new CatmullRomCurve3(Ut,dt,vt,Tt)},[lt,dt,vt,Tt]),Bt=reactExports.useMemo(()=>Dt.getPoints(Et),[Dt,Et]),Ft=reactExports.useMemo(()=>{if(!Ct||Ct.length<2)return;if(Ct.length===Et+1)return Ct;const Ut=Ct.map(ln=>ln instanceof Color?ln:new Color(...ln));dt&&Ut.push(Ut[0].clone());const Zt=[Ut[0]],Kt=Et/(Ut.length-1);for(let ln=1;ln<Et;ln++){const hn=ln%Kt/Kt,dn=Math.floor(ln/Kt);Zt.push(Ut[dn].clone().lerp(Ut[dn+1],hn))}return Zt.push(Ut[Ut.length-1]),Zt},[Ct,Et]);return reactExports.createElement(Line$1,_extends({ref:kt,points:Bt,vertexColors:Ft},Rt))});function shaderMaterial(ft,lt,dt,vt){const Tt=class extends ShaderMaterial{constructor(Ct={}){const Rt=Object.entries(ft);super({uniforms:Rt.reduce((kt,[Dt,Bt])=>{const Ft=UniformsUtils.clone({[Dt]:{value:Bt}});return{...kt,...Ft}},{}),vertexShader:lt,fragmentShader:dt}),this.key="",Rt.forEach(([kt])=>Object.defineProperty(this,kt,{get:()=>this.uniforms[kt].value,set:Dt=>this.uniforms[kt].value=Dt})),Object.assign(this,Ct),vt&&vt(this)}};return Tt.key=MathUtils.generateUUID(),Tt}let dracoLoader=null;function extensions(ft,lt,dt){return vt=>{dt&&dt(vt),ft&&(dracoLoader||(dracoLoader=new DRACOLoader),dracoLoader.setDecoderPath(typeof ft=="string"?ft:"https://www.gstatic.com/draco/versioned/decoders/1.5.5/"),vt.setDRACOLoader(dracoLoader)),lt&&vt.setMeshoptDecoder(typeof MeshoptDecoder=="function"?MeshoptDecoder():MeshoptDecoder)}}function useGLTF(ft,lt=!0,dt=!0,vt){return useLoader(GLTFLoader,ft,extensions(lt,dt,vt))}useGLTF.preload=(ft,lt=!0,dt=!0,vt)=>useLoader.preload(GLTFLoader,ft,extensions(lt,dt,vt));useGLTF.clear=ft=>useLoader.clear(GLTFLoader,ft);function useFBO(ft,lt,dt){const{gl:vt,size:Tt,viewport:Et}=useThree(),Ct=typeof ft=="number"?ft:Tt.width*Et.dpr,Rt=typeof lt=="number"?lt:Tt.height*Et.dpr,kt=(typeof ft=="number"?dt:ft)||{},{samples:Dt=0,depth:Bt,...Ft}=kt,Ut=reactExports.useMemo(()=>{let Zt;return Zt=new WebGLRenderTarget(Ct,Rt,{minFilter:LinearFilter,magFilter:LinearFilter,encoding:vt.outputEncoding,type:HalfFloatType,...Ft}),Bt&&(Zt.depthTexture=new DepthTexture(Ct,Rt,FloatType)),Zt.samples=Dt,Zt},[]);return reactExports.useLayoutEffect(()=>{Ut.setSize(Ct,Rt),Dt&&(Ut.samples=Dt)},[Dt,Ut,Ct,Rt]),reactExports.useEffect(()=>()=>Ut.dispose(),[]),Ut}const isFunction=ft=>typeof ft=="function",OrthographicCamera=reactExports.forwardRef(({envMap:ft,resolution:lt=256,frames:dt=1/0,children:vt,makeDefault:Tt,...Et},Ct)=>{const Rt=useThree(({set:hn})=>hn),kt=useThree(({camera:hn})=>hn),Dt=useThree(({size:hn})=>hn),Bt=reactExports.useRef(null),Ft=reactExports.useRef(null),Ut=useFBO(lt);reactExports.useLayoutEffect(()=>{Et.manual||Bt.current.updateProjectionMatrix()},[Dt,Et]),reactExports.useLayoutEffect(()=>{Bt.current.updateProjectionMatrix()}),reactExports.useLayoutEffect(()=>{if(Tt){const hn=kt;return Rt(()=>({camera:Bt.current})),()=>Rt(()=>({camera:hn}))}},[Bt,Tt,Rt]);let Zt=0,Kt=null;const ln=isFunction(vt);return useFrame(hn=>{ln&&(dt===1/0||Zt<dt)&&(Ft.current.visible=!1,hn.gl.setRenderTarget(Ut),Kt=hn.scene.background,ft&&(hn.scene.background=ft),hn.gl.render(hn.scene,Bt.current),hn.scene.background=Kt,hn.gl.setRenderTarget(null),Ft.current.visible=!0,Zt++)}),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("orthographicCamera",_extends({left:Dt.width/-2,right:Dt.width/2,top:Dt.height/2,bottom:Dt.height/-2,ref:mergeRefs([Bt,Ct])},Et),!ln&&vt),reactExports.createElement("group",{ref:Ft},ln&&vt(Ut.texture)))}),OrbitControls=reactExports.forwardRef(({makeDefault:ft,camera:lt,regress:dt,domElement:vt,enableDamping:Tt=!0,onChange:Et,onStart:Ct,onEnd:Rt,...kt},Dt)=>{const Bt=useThree(bn=>bn.invalidate),Ft=useThree(bn=>bn.camera),Ut=useThree(bn=>bn.gl),Zt=useThree(bn=>bn.events),Kt=useThree(bn=>bn.setEvents),ln=useThree(bn=>bn.set),hn=useThree(bn=>bn.get),dn=useThree(bn=>bn.performance),pn=lt||Ft,mn=vt||Zt.connected||Ut.domElement,On=reactExports.useMemo(()=>new OrbitControls$1(pn),[pn]);return useFrame(()=>{On.enabled&&On.update()},-1),reactExports.useEffect(()=>(On.connect(mn),()=>void On.dispose()),[mn,dt,On,Bt]),reactExports.useEffect(()=>{const bn=Tn=>{Bt(),dt&&dn.regress(),Et&&Et(Tn)},En=Tn=>{Ct&&Ct(Tn)},An=Tn=>{Rt&&Rt(Tn)};return On.addEventListener("change",bn),On.addEventListener("start",En),On.addEventListener("end",An),()=>{On.removeEventListener("start",En),On.removeEventListener("end",An),On.removeEventListener("change",bn)}},[Et,Ct,Rt,On,Bt,Kt]),reactExports.useEffect(()=>{if(ft){const bn=hn().controls;return ln({controls:On}),()=>ln({controls:bn})}},[ft,On]),reactExports.createElement("primitive",_extends({ref:Dt,object:On,enableDamping:Tt},kt))});function RenderHud({defaultScene:ft,defaultCamera:lt,renderPriority:dt=1}){const{gl:vt,scene:Tt,camera:Et}=useThree();let Ct;return useFrame(()=>{Ct=vt.autoClear,dt===1&&(vt.autoClear=!0,vt.render(ft,lt)),vt.autoClear=!1,vt.clearDepth(),vt.render(Tt,Et),vt.autoClear=Ct},dt),reactExports.createElement(reactExports.Fragment,null)}function Hud({children:ft,renderPriority:lt=1}){const{scene:dt,camera:vt}=useThree(),[Tt]=reactExports.useState(()=>new Scene);return reactExports.createElement(reactExports.Fragment,null,createPortal(reactExports.createElement(reactExports.Fragment,null,ft,reactExports.createElement(RenderHud,{defaultScene:dt,defaultCamera:vt,renderPriority:lt})),Tt,{events:{priority:lt+1}}))}const Context=reactExports.createContext({}),useGizmoContext=()=>reactExports.useContext(Context),turnRate=2*Math.PI,dummy=new Object3D,matrix=new Matrix4,[q1,q2]=[new Quaternion,new Quaternion],target=new Vector3,targetPosition=new Vector3,isOrbitControls=ft=>"minPolarAngle"in ft,GizmoHelper=({alignment:ft="bottom-right",margin:lt=[80,80],renderPriority:dt=1,onUpdate:vt,onTarget:Tt,children:Et})=>{const Ct=useThree(En=>En.size),Rt=useThree(En=>En.camera),kt=useThree(En=>En.controls),Dt=useThree(En=>En.invalidate),Bt=reactExports.useRef(),Ft=reactExports.useRef(null),Ut=reactExports.useRef(!1),Zt=reactExports.useRef(0),Kt=reactExports.useRef(new Vector3(0,0,0)),ln=reactExports.useRef(new Vector3(0,0,0));reactExports.useEffect(()=>{ln.current.copy(Rt.up)},[Rt]);const hn=reactExports.useCallback(En=>{Ut.current=!0,(kt||Tt)&&(Kt.current=(kt==null?void 0:kt.target)||(Tt==null?void 0:Tt())),Zt.current=Rt.position.distanceTo(target),q1.copy(Rt.quaternion),targetPosition.copy(En).multiplyScalar(Zt.current).add(target),dummy.lookAt(targetPosition),q2.copy(dummy.quaternion),Dt()},[kt,Rt,Tt,Dt]);useFrame((En,An)=>{if(Ft.current&&Bt.current){var Tn;if(Ut.current)if(q1.angleTo(q2)<.01)Ut.current=!1,isOrbitControls(kt)&&Rt.up.copy(ln.current);else{const In=An*turnRate;q1.rotateTowards(q2,In),Rt.position.set(0,0,1).applyQuaternion(q1).multiplyScalar(Zt.current).add(Kt.current),Rt.up.set(0,1,0).applyQuaternion(q1).normalize(),Rt.quaternion.copy(q1),vt?vt():kt&&kt.update(),Dt()}matrix.copy(Rt.matrix).invert(),(Tn=Bt.current)==null||Tn.quaternion.setFromRotationMatrix(matrix)}});const dn=reactExports.useMemo(()=>({tweenCamera:hn}),[hn]),[pn,mn]=lt,On=ft.endsWith("-center")?0:ft.endsWith("-left")?-Ct.width/2+pn:Ct.width/2-pn,bn=ft.startsWith("center-")?0:ft.startsWith("top-")?Ct.height/2-mn:-Ct.height/2+mn;return reactExports.createElement(Hud,{renderPriority:dt},reactExports.createElement(Context.Provider,{value:dn},reactExports.createElement(OrthographicCamera,{makeDefault:!0,ref:Ft,position:[0,0,200]}),reactExports.createElement("group",{ref:Bt,position:[On,bn,0]},Et)))};function Axis({scale:ft=[.8,.05,.05],color:lt,rotation:dt}){return reactExports.createElement("group",{rotation:dt},reactExports.createElement("mesh",{position:[.4,0,0]},reactExports.createElement("boxGeometry",{args:ft}),reactExports.createElement("meshBasicMaterial",{color:lt,toneMapped:!1})))}function AxisHead({onClick:ft,font:lt,disabled:dt,arcStyle:vt,label:Tt,labelColor:Et,axisHeadScale:Ct=1,...Rt}){const kt=useThree(ln=>ln.gl),Dt=reactExports.useMemo(()=>{const ln=document.createElement("canvas");ln.width=64,ln.height=64;const hn=ln.getContext("2d");return hn.beginPath(),hn.arc(32,32,16,0,2*Math.PI),hn.closePath(),hn.fillStyle=vt,hn.fill(),Tt&&(hn.font=lt,hn.textAlign="center",hn.fillStyle=Et,hn.fillText(Tt,32,41)),new CanvasTexture(ln)},[vt,Tt,Et,lt]),[Bt,Ft]=reactExports.useState(!1),Ut=(Tt?1:.75)*(Bt?1.2:1)*Ct,Zt=ln=>{ln.stopPropagation(),Ft(!0)},Kt=ln=>{ln.stopPropagation(),Ft(!1)};return reactExports.createElement("sprite",_extends({scale:Ut,onPointerOver:dt?void 0:Zt,onPointerOut:dt?void 0:ft||Kt},Rt),reactExports.createElement("spriteMaterial",{map:Dt,"map-encoding":kt.outputEncoding,"map-anisotropy":kt.capabilities.getMaxAnisotropy()||1,alphaTest:.3,opacity:Tt?1:.75,toneMapped:!1}))}const GizmoViewport=({hideNegativeAxes:ft,hideAxisHeads:lt,disabled:dt,font:vt="18px Inter var, Arial, sans-serif",axisColors:Tt=["#ff2060","#20df80","#2080ff"],axisHeadScale:Et=1,axisScale:Ct,labels:Rt=["X","Y","Z"],labelColor:kt="#000",onClick:Dt,...Bt})=>{const[Ft,Ut,Zt]=Tt,{tweenCamera:Kt}=useGizmoContext(),ln={font:vt,disabled:dt,labelColor:kt,onClick:Dt,axisHeadScale:Et,onPointerDown:dt?void 0:hn=>{Kt(hn.object.position),hn.stopPropagation()}};return reactExports.createElement("group",_extends({scale:40},Bt),reactExports.createElement(Axis,{color:Ft,rotation:[0,0,0],scale:Ct}),reactExports.createElement(Axis,{color:Ut,rotation:[0,0,Math.PI/2],scale:Ct}),reactExports.createElement(Axis,{color:Zt,rotation:[0,-Math.PI/2,0],scale:Ct}),!lt&&reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(AxisHead,_extends({arcStyle:Ft,position:[1,0,0],label:Rt[0]},ln)),reactExports.createElement(AxisHead,_extends({arcStyle:Ut,position:[0,1,0],label:Rt[1]},ln)),reactExports.createElement(AxisHead,_extends({arcStyle:Zt,position:[0,0,1],label:Rt[2]},ln)),!ft&&reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(AxisHead,_extends({arcStyle:Ft,position:[-1,0,0]},ln)),reactExports.createElement(AxisHead,_extends({arcStyle:Ut,position:[0,-1,0]},ln)),reactExports.createElement(AxisHead,_extends({arcStyle:Zt,position:[0,0,-1]},ln)))),reactExports.createElement("ambientLight",{intensity:.5}),reactExports.createElement("pointLight",{position:[10,10,10],intensity:.5}))},GridMaterial=shaderMaterial({cellSize:.5,sectionSize:1,fadeDistance:100,fadeStrength:1,cellThickness:.5,sectionThickness:1,cellColor:new Color,sectionColor:new Color,infiniteGrid:0,followCamera:0},`varying vec3 worldPosition;
   uniform float fadeDistance;
   uniform float infiniteGrid;
   uniform float followCamera;
   void main() {
     vec3 pos = position.xzy * (1. + fadeDistance * infiniteGrid);
     pos.xz += (cameraPosition.xz * followCamera);
     worldPosition = pos;
     gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
   }`,`varying vec3 worldPosition;
   uniform float cellSize;
   uniform float sectionSize;
   uniform vec3 cellColor;
   uniform vec3 sectionColor;
   uniform float fadeDistance;
   uniform float fadeStrength;
   uniform float cellThickness;
   uniform float sectionThickness;
   uniform float infiniteGrid;
   float getGrid(float size, float thickness) {
     vec2 r = worldPosition.xz / size;
     vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
     float line = min(grid.x, grid.y) + 1. - thickness;
     return 1.0 - min(line, 1.);
   }
   void main() {
     float g1 = getGrid(cellSize, cellThickness);
     float g2 = getGrid(sectionSize, sectionThickness);
     float d = 1.0 - min(distance(cameraPosition.xz, worldPosition.xz) / fadeDistance, 1.);
     vec3 color = mix(cellColor, sectionColor, min(1.,sectionThickness * g2));
     gl_FragColor = vec4(color, (g1 + g2) * pow(d,fadeStrength));
     gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);
     if (gl_FragColor.a <= 0.0) discard;
     #include <tonemapping_fragment>
     #include <encodings_fragment>
   }`),Grid=reactExports.forwardRef(({args:ft,cellColor:lt="#000000",sectionColor:dt="#2080ff",cellSize:vt=.5,sectionSize:Tt=1,followCamera:Et=!1,infiniteGrid:Ct=!1,fadeDistance:Rt=100,fadeStrength:kt=1,cellThickness:Dt=.5,sectionThickness:Bt=1,side:Ft=BackSide,...Ut},Zt)=>{extend$1({GridMaterial});const Kt={cellSize:vt,sectionSize:Tt,cellColor:lt,sectionColor:dt,cellThickness:Dt,sectionThickness:Bt},ln={fadeDistance:Rt,fadeStrength:kt,infiniteGrid:Ct,followCamera:Et};return reactExports.createElement("mesh",_extends({ref:Zt,frustumCulled:!1},Ut),reactExports.createElement("gridMaterial",_extends({transparent:!0,"extensions-derivatives":!0,side:Ft},Kt,ln)),reactExports.createElement("planeGeometry",{args:ft}))});function useAnimations(ft,lt){const dt=reactExports.useRef(),[vt]=reactExports.useState(()=>lt?lt instanceof Object3D?{current:lt}:lt:dt),[Tt]=reactExports.useState(()=>new AnimationMixer(void 0)),Et=reactExports.useRef({}),[Ct]=reactExports.useState(()=>{const Rt={};return ft.forEach(kt=>Object.defineProperty(Rt,kt.name,{enumerable:!0,get(){if(vt.current)return Et.current[kt.name]||(Et.current[kt.name]=Tt.clipAction(kt,vt.current))}})),{ref:vt,clips:ft,actions:Rt,names:ft.map(kt=>kt.name),mixer:Tt}});return useFrame((Rt,kt)=>Tt.update(kt)),reactExports.useEffect(()=>{const Rt=vt.current;return()=>{Et.current={},Object.values(Ct.actions).forEach(kt=>{Rt&&Tt.uncacheAction(kt,Rt)})}},[ft]),reactExports.useEffect(()=>()=>{Tt.stopAllAction()},[Tt]),Ct}function create(ft){const lt=ft+"Geometry";return reactExports.forwardRef(({args:dt,children:vt,...Tt},Et)=>reactExports.createElement("mesh",_extends({ref:Et},Tt),reactExports.createElement(lt,{attach:"geometry",args:dt}),vt))}const Box=create("box"),Sphere=create("sphere"),Plane=create("plane");function calcPosFromAngles(ft,lt,dt=new Vector3){const vt=Math.PI*(ft-.5),Tt=2*Math.PI*(lt-.5);return dt.x=Math.cos(Tt),dt.y=Math.sin(vt),dt.z=Math.sin(Tt),dt}const Sky=reactExports.forwardRef(({inclination:ft=.6,azimuth:lt=.1,distance:dt=1e3,mieCoefficient:vt=.005,mieDirectionalG:Tt=.8,rayleigh:Et=.5,turbidity:Ct=10,sunPosition:Rt=calcPosFromAngles(ft,lt),...kt},Dt)=>{const Bt=reactExports.useMemo(()=>new Vector3().setScalar(dt),[dt]),[Ft]=reactExports.useState(()=>new Sky$1);return reactExports.createElement("primitive",_extends({object:Ft,ref:Dt,"material-uniforms-mieCoefficient-value":vt,"material-uniforms-mieDirectionalG-value":Tt,"material-uniforms-rayleigh-value":Et,"material-uniforms-sunPosition-value":Rt,"material-uniforms-turbidity-value":Ct,scale:Bt},kt))});function Crazyflie({robotId:ft,renderBoundingBox:lt}){const dt=useSimulator(Ut=>Ut.updateRobotBoundingBox),vt=useSimulator(Ut=>Ut.checkCollisions),Tt=useSimulator(Ut=>Ut.robots[ft]),Et=Tt==null?void 0:Tt.boundingBox,Ct=Et==null?void 0:Et.getSize(new Vector3),Rt=reactExports.useRef(null),{nodes:kt,materials:Dt,animations:Bt}=useGLTF("./crazyflie.glb"),{actions:Ft}=useAnimations(Bt,Rt);return reactExports.useEffect(()=>{if(Rt.current&&(Object.values(Ft).map(Ut=>Ut==null?void 0:Ut.play()),lt)){const Ut=new Box3;Ut.setFromObject(Rt.current),dt(ft,Ut)}},[Rt]),jsxs(Fragment,{children:[jsx("group",{children:jsxs("group",{ref:Rt,children:[jsx("group",{name:"Scene",children:jsxs("mesh",{name:"pcb_Default_sldprt",castShadow:!0,receiveShadow:!0,geometry:kt.pcb_Default_sldprt.geometry,material:Dt["Material.003"],position:[.01,0,0],scale:.01,children:[jsx("mesh",{name:"propeller_ccw_Default_sldprt001",castShadow:!0,receiveShadow:!0,geometry:kt.propeller_ccw_Default_sldprt001.geometry,material:Dt["Material.004"],position:[33.94,15.2,33.85],rotation:[1.56,-.01,.79]}),jsx("mesh",{name:"propeller_ccw_Default_sldprt002",castShadow:!0,receiveShadow:!0,geometry:kt.propeller_ccw_Default_sldprt002.geometry,material:Dt["Material.001"],position:[33.94,15.2,-33.85],rotation:[-1.56,.01,.79],scale:-1}),jsx("mesh",{name:"propeller_ccw_Default_sldprt003",castShadow:!0,receiveShadow:!0,geometry:kt.propeller_ccw_Default_sldprt003.geometry,material:Dt["Material.004"],position:[-33.83,15.2,33.32],rotation:[-1.56,.01,.79],scale:-1}),jsx("mesh",{name:"propeller_ccw_Default_sldprt004",castShadow:!0,receiveShadow:!0,geometry:kt.propeller_ccw_Default_sldprt004.geometry,material:Dt["Material.004"],position:[-33.94,15.2,-33.85],rotation:[1.57,0,Math.PI/4]}),jsx("mesh",{name:"7mm_motor_mount_Default_sldprt",castShadow:!0,receiveShadow:!0,geometry:kt["7mm_motor_mount_Default_sldprt"].geometry,material:Dt.Material,position:[-33.72,3.79,-33.71],rotation:[1.56,0,0]}),jsx("mesh",{name:"7x15_motor_Default_sldprt",castShadow:!0,receiveShadow:!0,geometry:kt["7x15_motor_Default_sldprt"].geometry,material:Dt["Material.002"],position:[-33.85,-4.25,-33.74],rotation:[1.56,0,0]}),jsx("mesh",{name:"battery_bc-bl-01-a_Default_sldprt",castShadow:!0,receiveShadow:!0,geometry:kt["battery_bc-bl-01-a_Default_sldprt"].geometry,material:Dt["Material.006"],position:[-11.27,2.54,8.16],rotation:[1.56,0,0]}),jsx("mesh",{name:"battery_holder_board_Default_sldprt",castShadow:!0,receiveShadow:!0,geometry:kt.battery_holder_board_Default_sldprt.geometry,material:Dt["Material.003"],position:[-10.37,9.9,13.13],rotation:[Math.PI/2,0,0],scale:[1,.97,1]}),jsx("mesh",{name:"header_Default_sldprt",castShadow:!0,receiveShadow:!0,geometry:kt.header_Default_sldprt.geometry,material:Dt["Material.005"],position:[-9.32,4.28,-8.95],rotation:[1.56,0,-Math.PI],scale:-1})]})}),jsxs(Sphere,{position:[0,-.05,0],scale:.1,castShadow:!1,receiveShadow:!1,children:[jsx("meshStandardMaterial",{emissive:Tt?[Tt.color.r/255,Tt.color.g/255,Tt.color.b/255]:[1,1,1]}),jsx("pointLight",{position:[0,0,0],intensity:.5})]})]})}),lt&&Ct?jsx(Box,{args:[Ct.x,Ct.y,Ct.z],material:new MeshBasicMaterial({color:vt(ft)?16711680:65280,wireframe:!0}),position:new Vector3(0,0,0)},ft):null]})}useGLTF.preload("./crazyflie.glb");var f$2=l$2(),n=ft=>c$2(ft,f$2),m$1=l$2();n.write=ft=>c$2(ft,m$1);var d$2=l$2();n.onStart=ft=>c$2(ft,d$2);var h$2=l$2();n.onFrame=ft=>c$2(ft,h$2);var p$1=l$2();n.onFinish=ft=>c$2(ft,p$1);var i$1=[];n.setTimeout=(ft,lt)=>{let dt=n.now()+lt,vt=()=>{let Et=i$1.findIndex(Ct=>Ct.cancel==vt);~Et&&i$1.splice(Et,1),u$2-=~Et?1:0},Tt={time:dt,handler:ft,cancel:vt};return i$1.splice(w(dt),0,Tt),u$2+=1,v$1(),Tt};var w=ft=>~(~i$1.findIndex(lt=>lt.time>ft)||~i$1.length);n.cancel=ft=>{d$2.delete(ft),h$2.delete(ft),p$1.delete(ft),f$2.delete(ft),m$1.delete(ft)};n.sync=ft=>{T=!0,n.batchedUpdates(ft),T=!1};n.throttle=ft=>{let lt;function dt(){try{ft(...lt)}finally{lt=null}}function vt(...Tt){lt=Tt,n.onStart(dt)}return vt.handler=ft,vt.cancel=()=>{d$2.delete(dt),lt=null},vt};var y$2=typeof window<"u"?window.requestAnimationFrame:()=>{};n.use=ft=>y$2=ft;n.now=typeof performance<"u"?()=>performance.now():Date.now;n.batchedUpdates=ft=>ft();n.catch=console.error;n.frameLoop="always";n.advance=()=>{n.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):x$1()};var r=-1,u$2=0,T=!1;function c$2(ft,lt){T?(lt.delete(ft),ft(0)):(lt.add(ft),v$1())}function v$1(){r<0&&(r=0,n.frameLoop!=="demand"&&y$2(b$2))}function R(){r=-1}function b$2(){~r&&(y$2(b$2),n.batchedUpdates(x$1))}function x$1(){let ft=r;r=n.now();let lt=w(r);if(lt&&(Q$2(i$1.splice(0,lt),dt=>dt.handler()),u$2-=lt),!u$2){R();return}d$2.flush(),f$2.flush(ft?Math.min(64,r-ft):16.667),h$2.flush(),m$1.flush(),p$1.flush()}function l$2(){let ft=new Set,lt=ft;return{add(dt){u$2+=lt==ft&&!ft.has(dt)?1:0,ft.add(dt)},delete(dt){return u$2-=lt==ft&&ft.has(dt)?1:0,ft.delete(dt)},flush(dt){lt.size&&(ft=new Set,u$2-=lt.size,Q$2(lt,vt=>vt(dt)&&ft.add(vt)),u$2+=ft.size,lt=ft)}}}function Q$2(ft,lt){ft.forEach(dt=>{try{lt(dt)}catch(vt){n.catch(vt)}})}var ze$1=Object.defineProperty,Le$2=(ft,lt)=>{for(var dt in lt)ze$1(ft,dt,{get:lt[dt],enumerable:!0})},p={};Le$2(p,{assign:()=>U,colors:()=>c$1,createStringInterpolator:()=>k$1,skipAnimation:()=>ee,to:()=>J$1,willAdvance:()=>S});function Y(){}var mt$1=(ft,lt,dt)=>Object.defineProperty(ft,lt,{value:dt,writable:!0,configurable:!0}),l$1={arr:Array.isArray,obj:ft=>!!ft&&ft.constructor.name==="Object",fun:ft=>typeof ft=="function",str:ft=>typeof ft=="string",num:ft=>typeof ft=="number",und:ft=>ft===void 0};function bt$1(ft,lt){if(l$1.arr(ft)){if(!l$1.arr(lt)||ft.length!==lt.length)return!1;for(let dt=0;dt<ft.length;dt++)if(ft[dt]!==lt[dt])return!1;return!0}return ft===lt}var Ve=(ft,lt)=>ft.forEach(lt);function xt(ft,lt,dt){if(l$1.arr(ft)){for(let vt=0;vt<ft.length;vt++)lt.call(dt,ft[vt],`${vt}`);return}for(let vt in ft)ft.hasOwnProperty(vt)&&lt.call(dt,ft[vt],vt)}var ht$1=ft=>l$1.und(ft)?[]:l$1.arr(ft)?ft:[ft];function Pe$1(ft,lt){if(ft.size){let dt=Array.from(ft);ft.clear(),Ve(dt,lt)}}var yt$1=(ft,...lt)=>Pe$1(ft,dt=>dt(...lt)),h$1=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),k$1,J$1,c$1=null,ee=!1,S=Y,U=ft=>{ft.to&&(J$1=ft.to),ft.now&&(n.now=ft.now),ft.colors!==void 0&&(c$1=ft.colors),ft.skipAnimation!=null&&(ee=ft.skipAnimation),ft.createStringInterpolator&&(k$1=ft.createStringInterpolator),ft.requestAnimationFrame&&n.use(ft.requestAnimationFrame),ft.batchedUpdates&&(n.batchedUpdates=ft.batchedUpdates),ft.willAdvance&&(S=ft.willAdvance),ft.frameLoop&&(n.frameLoop=ft.frameLoop)},E$2=new Set,u$1=[],H$1=[],A=0,qe$1={get idle(){return!E$2.size&&!u$1.length},start(ft){A>ft.priority?(E$2.add(ft),n.onStart($e)):(te$1(ft),n(B))},advance:B,sort(ft){if(A)n.onFrame(()=>qe$1.sort(ft));else{let lt=u$1.indexOf(ft);~lt&&(u$1.splice(lt,1),re(ft))}},clear(){u$1=[],E$2.clear()}};function $e(){E$2.forEach(te$1),E$2.clear(),n(B)}function te$1(ft){u$1.includes(ft)||re(ft)}function re(ft){u$1.splice(Ge$1(u$1,lt=>lt.priority>ft.priority),0,ft)}function B(ft){let lt=H$1;for(let dt=0;dt<u$1.length;dt++){let vt=u$1[dt];A=vt.priority,vt.idle||(S(vt),vt.advance(ft),vt.idle||lt.push(vt))}return A=0,H$1=u$1,H$1.length=0,u$1=lt,u$1.length>0}function Ge$1(ft,lt){let dt=ft.findIndex(lt);return dt<0?ft.length:dt}var ne$2=(ft,lt,dt)=>Math.min(Math.max(dt,ft),lt),It={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},d$1="[-+]?\\d*\\.?\\d+",M=d$1+"%";function C$1(...ft){return"\\(\\s*("+ft.join(")\\s*,\\s*(")+")\\s*\\)"}var oe$1=new RegExp("rgb"+C$1(d$1,d$1,d$1)),fe$1=new RegExp("rgba"+C$1(d$1,d$1,d$1,d$1)),ae$1=new RegExp("hsl"+C$1(d$1,M,M)),ie$2=new RegExp("hsla"+C$1(d$1,M,M,d$1)),se$1=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,ue$1=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,le$1=/^#([0-9a-fA-F]{6})$/,ce=/^#([0-9a-fA-F]{8})$/;function be$1(ft){let lt;return typeof ft=="number"?ft>>>0===ft&&ft>=0&&ft<=4294967295?ft:null:(lt=le$1.exec(ft))?parseInt(lt[1]+"ff",16)>>>0:c$1&&c$1[ft]!==void 0?c$1[ft]:(lt=oe$1.exec(ft))?(y$1(lt[1])<<24|y$1(lt[2])<<16|y$1(lt[3])<<8|255)>>>0:(lt=fe$1.exec(ft))?(y$1(lt[1])<<24|y$1(lt[2])<<16|y$1(lt[3])<<8|me$1(lt[4]))>>>0:(lt=se$1.exec(ft))?parseInt(lt[1]+lt[1]+lt[2]+lt[2]+lt[3]+lt[3]+"ff",16)>>>0:(lt=ce.exec(ft))?parseInt(lt[1],16)>>>0:(lt=ue$1.exec(ft))?parseInt(lt[1]+lt[1]+lt[2]+lt[2]+lt[3]+lt[3]+lt[4]+lt[4],16)>>>0:(lt=ae$1.exec(ft))?(de$1(pe(lt[1]),z$1(lt[2]),z$1(lt[3]))|255)>>>0:(lt=ie$2.exec(ft))?(de$1(pe(lt[1]),z$1(lt[2]),z$1(lt[3]))|me$1(lt[4]))>>>0:null}function j$1(ft,lt,dt){return dt<0&&(dt+=1),dt>1&&(dt-=1),dt<1/6?ft+(lt-ft)*6*dt:dt<1/2?lt:dt<2/3?ft+(lt-ft)*(2/3-dt)*6:ft}function de$1(ft,lt,dt){let vt=dt<.5?dt*(1+lt):dt+lt-dt*lt,Tt=2*dt-vt,Et=j$1(Tt,vt,ft+1/3),Ct=j$1(Tt,vt,ft),Rt=j$1(Tt,vt,ft-1/3);return Math.round(Et*255)<<24|Math.round(Ct*255)<<16|Math.round(Rt*255)<<8}function y$1(ft){let lt=parseInt(ft,10);return lt<0?0:lt>255?255:lt}function pe(ft){return(parseFloat(ft)%360+360)%360/360}function me$1(ft){let lt=parseFloat(ft);return lt<0?0:lt>1?255:Math.round(lt*255)}function z$1(ft){let lt=parseFloat(ft);return lt<0?0:lt>100?1:lt/100}function D$1(ft){let lt=be$1(ft);if(lt===null)return ft;lt=lt||0;let dt=(lt&4278190080)>>>24,vt=(lt&16711680)>>>16,Tt=(lt&65280)>>>8,Et=(lt&255)/255;return`rgba(${dt}, ${vt}, ${Tt}, ${Et})`}var W$1=(ft,lt,dt)=>{if(l$1.fun(ft))return ft;if(l$1.arr(ft))return W$1({range:ft,output:lt,extrapolate:dt});if(l$1.str(ft.output[0]))return k$1(ft);let vt=ft,Tt=vt.output,Et=vt.range||[0,1],Ct=vt.extrapolateLeft||vt.extrapolate||"extend",Rt=vt.extrapolateRight||vt.extrapolate||"extend",kt=vt.easing||(Dt=>Dt);return Dt=>{let Bt=He$1(Dt,Et);return Ue$1(Dt,Et[Bt],Et[Bt+1],Tt[Bt],Tt[Bt+1],kt,Ct,Rt,vt.map)}};function Ue$1(ft,lt,dt,vt,Tt,Et,Ct,Rt,kt){let Dt=kt?kt(ft):ft;if(Dt<lt){if(Ct==="identity")return Dt;Ct==="clamp"&&(Dt=lt)}if(Dt>dt){if(Rt==="identity")return Dt;Rt==="clamp"&&(Dt=dt)}return vt===Tt?vt:lt===dt?ft<=lt?vt:Tt:(lt===-1/0?Dt=-Dt:dt===1/0?Dt=Dt-lt:Dt=(Dt-lt)/(dt-lt),Dt=Et(Dt),vt===-1/0?Dt=-Dt:Tt===1/0?Dt=Dt+vt:Dt=Dt*(Tt-vt)+vt,Dt)}function He$1(ft,lt){for(var dt=1;dt<lt.length-1&&!(lt[dt]>=ft);++dt);return dt-1}var Be=(ft,lt="end")=>dt=>{dt=lt==="end"?Math.min(dt,.999):Math.max(dt,.001);let vt=dt*ft,Tt=lt==="end"?Math.floor(vt):Math.ceil(vt);return ne$2(0,1,Tt/ft)},P=1.70158,L=P*1.525,xe$1=P+1,he$1=2*Math.PI/3,ye$1=2*Math.PI/4.5,V=ft=>ft<1/2.75?7.5625*ft*ft:ft<2/2.75?7.5625*(ft-=1.5/2.75)*ft+.75:ft<2.5/2.75?7.5625*(ft-=2.25/2.75)*ft+.9375:7.5625*(ft-=2.625/2.75)*ft+.984375,Lt$1={linear:ft=>ft,easeInQuad:ft=>ft*ft,easeOutQuad:ft=>1-(1-ft)*(1-ft),easeInOutQuad:ft=>ft<.5?2*ft*ft:1-Math.pow(-2*ft+2,2)/2,easeInCubic:ft=>ft*ft*ft,easeOutCubic:ft=>1-Math.pow(1-ft,3),easeInOutCubic:ft=>ft<.5?4*ft*ft*ft:1-Math.pow(-2*ft+2,3)/2,easeInQuart:ft=>ft*ft*ft*ft,easeOutQuart:ft=>1-Math.pow(1-ft,4),easeInOutQuart:ft=>ft<.5?8*ft*ft*ft*ft:1-Math.pow(-2*ft+2,4)/2,easeInQuint:ft=>ft*ft*ft*ft*ft,easeOutQuint:ft=>1-Math.pow(1-ft,5),easeInOutQuint:ft=>ft<.5?16*ft*ft*ft*ft*ft:1-Math.pow(-2*ft+2,5)/2,easeInSine:ft=>1-Math.cos(ft*Math.PI/2),easeOutSine:ft=>Math.sin(ft*Math.PI/2),easeInOutSine:ft=>-(Math.cos(Math.PI*ft)-1)/2,easeInExpo:ft=>ft===0?0:Math.pow(2,10*ft-10),easeOutExpo:ft=>ft===1?1:1-Math.pow(2,-10*ft),easeInOutExpo:ft=>ft===0?0:ft===1?1:ft<.5?Math.pow(2,20*ft-10)/2:(2-Math.pow(2,-20*ft+10))/2,easeInCirc:ft=>1-Math.sqrt(1-Math.pow(ft,2)),easeOutCirc:ft=>Math.sqrt(1-Math.pow(ft-1,2)),easeInOutCirc:ft=>ft<.5?(1-Math.sqrt(1-Math.pow(2*ft,2)))/2:(Math.sqrt(1-Math.pow(-2*ft+2,2))+1)/2,easeInBack:ft=>xe$1*ft*ft*ft-P*ft*ft,easeOutBack:ft=>1+xe$1*Math.pow(ft-1,3)+P*Math.pow(ft-1,2),easeInOutBack:ft=>ft<.5?Math.pow(2*ft,2)*((L+1)*2*ft-L)/2:(Math.pow(2*ft-2,2)*((L+1)*(ft*2-2)+L)+2)/2,easeInElastic:ft=>ft===0?0:ft===1?1:-Math.pow(2,10*ft-10)*Math.sin((ft*10-10.75)*he$1),easeOutElastic:ft=>ft===0?0:ft===1?1:Math.pow(2,-10*ft)*Math.sin((ft*10-.75)*he$1)+1,easeInOutElastic:ft=>ft===0?0:ft===1?1:ft<.5?-(Math.pow(2,20*ft-10)*Math.sin((20*ft-11.125)*ye$1))/2:Math.pow(2,-20*ft+10)*Math.sin((20*ft-11.125)*ye$1)/2+1,easeInBounce:ft=>1-V(1-ft),easeOutBounce:V,easeInOutBounce:ft=>ft<.5?(1-V(1-2*ft))/2:(1+V(2*ft-1))/2,steps:Be},g=Symbol.for("FluidValue.get"),m=Symbol.for("FluidValue.observers"),Pt=ft=>!!(ft&&ft[g]),ve=ft=>ft&&ft[g]?ft[g]():ft,qt=ft=>ft[m]||null;function je(ft,lt){ft.eventObserved?ft.eventObserved(lt):ft(lt)}function $t(ft,lt){let dt=ft[m];dt&&dt.forEach(vt=>{je(vt,lt)})}var Ux,Vx,WE,ge=(WE=class{constructor(ft){go(this,Ux);go(this,Vx);if(!ft&&!(ft=this.get))throw Error("Unknown getter");De$1(this,ft)}},Ux=g,Vx=m,WE),De$1=(ft,lt)=>Ee$1(ft,g,lt);function Gt(ft,lt){if(ft[g]){let dt=ft[m];dt||Ee$1(ft,m,dt=new Set),dt.has(lt)||(dt.add(lt),ft.observerAdded&&ft.observerAdded(dt.size,lt))}return lt}function Qt(ft,lt){let dt=ft[m];if(dt&&dt.has(lt)){let vt=dt.size-1;vt?dt.delete(lt):ft[m]=null,ft.observerRemoved&&ft.observerRemoved(vt,lt)}}var Ee$1=(ft,lt,dt)=>Object.defineProperty(ft,lt,{value:dt,writable:!0,configurable:!0}),O=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Oe=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,K=new RegExp(`(${O.source})(%|[a-z]+)`,"i"),we$1=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,b$1=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,N=ft=>{let[lt,dt]=We(ft);if(!lt||h$1())return ft;let vt=window.getComputedStyle(document.documentElement).getPropertyValue(lt);return vt?vt.trim():dt&&dt.startsWith("--")?window.getComputedStyle(document.documentElement).getPropertyValue(dt)||ft:dt&&b$1.test(dt)?N(dt):dt||ft},We=ft=>{let lt=b$1.exec(ft);if(!lt)return[,];let[,dt,vt]=lt;return[dt,vt]},_,Ke$1=(ft,lt,dt,vt,Tt)=>`rgba(${Math.round(lt)}, ${Math.round(dt)}, ${Math.round(vt)}, ${Tt})`,Xt=ft=>{_||(_=c$1?new RegExp(`(${Object.keys(c$1).join("|")})(?!\\w)`,"g"):/^\b$/);let lt=ft.output.map(Tt=>ve(Tt).replace(b$1,N).replace(Oe,D$1).replace(_,D$1)),dt=lt.map(Tt=>Tt.match(O).map(Number)),vt=dt[0].map((Tt,Et)=>dt.map(Ct=>{if(!(Et in Ct))throw Error('The arity of each "output" value must be equal');return Ct[Et]})).map(Tt=>W$1({...ft,output:Tt}));return Tt=>{var Rt;let Et=!K.test(lt[0])&&((Rt=lt.find(kt=>K.test(kt)))==null?void 0:Rt.replace(O,"")),Ct=0;return lt[0].replace(O,()=>`${vt[Ct++](Tt)}${Et||""}`).replace(we$1,Ke$1)}},Z="react-spring: ",Te=ft=>{let lt=ft,dt=!1;if(typeof lt!="function")throw new TypeError(`${Z}once requires a function parameter`);return(...vt)=>{dt||(lt(...vt),dt=!0)}},Ne$1=Te(console.warn);function Jt(){Ne$1(`${Z}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var _e$1=Te(console.warn);function er(){_e$1(`${Z}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function or(ft){return l$1.str(ft)&&(ft[0]=="#"||/\d/.test(ft)||!h$1()&&b$1.test(ft)||ft in(c$1||{}))}var Q$1=h$1()?reactExports.useEffect:reactExports.useLayoutEffect,Ce$1=()=>{let ft=reactExports.useRef(!1);return Q$1(()=>(ft.current=!0,()=>{ft.current=!1}),[]),ft};function Mr(){let ft=reactExports.useState()[1],lt=Ce$1();return()=>{lt.current&&ft(Math.random())}}function Lr(ft,lt){let[dt]=reactExports.useState(()=>({inputs:lt,result:ft()})),vt=reactExports.useRef(),Tt=vt.current,Et=Tt;return Et?lt&&Et.inputs&&it$1(lt,Et.inputs)||(Et={inputs:lt,result:ft()}):Et=dt,reactExports.useEffect(()=>{vt.current=Et,Tt==dt&&(dt.inputs=dt.result=void 0)},[Et]),Et.result}function it$1(ft,lt){if(ft.length!==lt.length)return!1;for(let dt=0;dt<ft.length;dt++)if(ft[dt]!==lt[dt])return!1;return!0}var $r=ft=>reactExports.useEffect(ft,ut),ut=[];function Ur(ft){let lt=reactExports.useRef();return reactExports.useEffect(()=>{lt.current=ft}),lt.current}var h=Symbol.for("Animated:node"),v=ft=>!!ft&&ft[h]===ft,k=ft=>ft&&ft[h],D=(ft,lt)=>mt$1(ft,h,lt),F=ft=>ft&&ft[h]&&ft[h].getPayload(),c=class{constructor(){go(this,"payload");D(this,this)}getPayload(){return this.payload||[]}},l=class extends c{constructor(lt){super();go(this,"done",!0);go(this,"elapsedTime");go(this,"lastPosition");go(this,"lastVelocity");go(this,"v0");go(this,"durationProgress",0);this._value=lt,l$1.num(this._value)&&(this.lastPosition=this._value)}static create(lt){return new l(lt)}getPayload(){return[this]}getValue(){return this._value}setValue(lt,dt){return l$1.num(lt)&&(this.lastPosition=lt,dt&&(lt=Math.round(lt/dt)*dt,this.done&&(this.lastPosition=lt))),this._value===lt?!1:(this._value=lt,!0)}reset(){let{done:lt}=this;this.done=!1,l$1.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,lt&&(this.lastVelocity=null),this.v0=null)}},d=class extends l{constructor(lt){super(0);go(this,"_string",null);go(this,"_toString");this._toString=W$1({output:[lt,lt]})}static create(lt){return new d(lt)}getValue(){return this._string??(this._string=this._toString(this._value))}setValue(lt){if(l$1.str(lt)){if(lt==this._string)return!1;this._string=lt,this._value=1}else if(super.setValue(lt))this._string=null;else return!1;return!0}reset(lt){lt&&(this._toString=W$1({output:[this.getValue(),lt]})),this._value=0,super.reset()}},f$1={dependencies:null},u=class extends c{constructor(ft){super(),this.source=ft,this.setValue(ft)}getValue(ft){let lt={};return xt(this.source,(dt,vt)=>{v(dt)?lt[vt]=dt.getValue(ft):Pt(dt)?lt[vt]=ve(dt):ft||(lt[vt]=dt)}),lt}setValue(ft){this.source=ft,this.payload=this._makePayload(ft)}reset(){this.payload&&Ve(this.payload,ft=>ft.reset())}_makePayload(ft){if(ft){let lt=new Set;return xt(ft,this._addToPayload,lt),Array.from(lt)}}_addToPayload(ft){f$1.dependencies&&Pt(ft)&&f$1.dependencies.add(ft);let lt=F(ft);lt&&Ve(lt,dt=>this.add(dt))}},y=class extends u{constructor(ft){super(ft)}static create(ft){return new y(ft)}getValue(){return this.source.map(ft=>ft.getValue())}setValue(ft){let lt=this.getPayload();return ft.length==lt.length?lt.map((dt,vt)=>dt.setValue(ft[vt])).some(Boolean):(super.setValue(ft.map(z)),!0)}};function z(ft){return(or(ft)?d:l).create(ft)}function Le$1(ft){let lt=k(ft);return lt?lt.constructor:l$1.arr(ft)?y:or(ft)?d:l}var x=(ft,lt)=>{let dt=!l$1.fun(ft)||ft.prototype&&ft.prototype.isReactComponent;return reactExports.forwardRef((vt,Tt)=>{let Et=reactExports.useRef(null),Ct=dt&&reactExports.useCallback(Kt=>{Et.current=ae(Tt,Kt)},[Tt]),[Rt,kt]=ne$1(vt,lt),Dt=Mr(),Bt=()=>{let Kt=Et.current;dt&&!Kt||(Kt?lt.applyAnimatedValues(Kt,Rt.getValue(!0)):!1)===!1&&Dt()},Ft=new b(Bt,kt),Ut=reactExports.useRef();Q$1(()=>(Ut.current=Ft,Ve(kt,Kt=>Gt(Kt,Ft)),()=>{Ut.current&&(Ve(Ut.current.deps,Kt=>Qt(Kt,Ut.current)),n.cancel(Ut.current.update))})),reactExports.useEffect(Bt,[]),$r(()=>()=>{let Kt=Ut.current;Ve(Kt.deps,ln=>Qt(ln,Kt))});let Zt=lt.getComponentProps(Rt.getValue());return reactExports.createElement(ft,{...Zt,ref:Ct})})},b=class{constructor(ft,lt){this.update=ft,this.deps=lt}eventObserved(ft){ft.type=="change"&&n.write(this.update)}};function ne$1(ft,lt){let dt=new Set;return f$1.dependencies=dt,ft.style&&(ft={...ft,style:lt.createAnimatedStyle(ft.style)}),ft=new u(ft),f$1.dependencies=null,[ft,dt]}function ae(ft,lt){return ft&&(l$1.fun(ft)?ft(lt):ft.current=lt),lt}var j=Symbol.for("AnimatedComponent"),Ke=(ft,{applyAnimatedValues:lt=()=>!1,createAnimatedStyle:dt=Tt=>new u(Tt),getComponentProps:vt=Tt=>Tt}={})=>{let Tt={applyAnimatedValues:lt,createAnimatedStyle:dt,getComponentProps:vt},Et=Ct=>{let Rt=I$1(Ct)||"Anonymous";return l$1.str(Ct)?Ct=Et[Ct]||(Et[Ct]=x(Ct,Tt)):Ct=Ct[j]||(Ct[j]=x(Ct,Tt)),Ct.displayName=`Animated(${Rt})`,Ct};return xt(ft,(Ct,Rt)=>{l$1.arr(ft)&&(Rt=I$1(Ct)),Et[Rt]=Et(Ct)}),{animated:Et}},I$1=ft=>l$1.str(ft)?ft:ft&&l$1.str(ft.displayName)?ft.displayName:l$1.fun(ft)&&ft.name||null;function I(ft,...lt){return l$1.fun(ft)?ft(...lt):ft}var te=(ft,lt)=>ft===!0||!!(lt&&ft&&(l$1.fun(ft)?ft(lt):ht$1(ft).includes(lt))),et=(ft,lt)=>l$1.obj(ft)?lt&&ft[lt]:ft,ke=(ft,lt)=>ft.default===!0?ft[lt]:ft.default?ft.default[lt]:void 0,nn=ft=>ft,ne=(ft,lt=nn)=>{let dt=rn;ft.default&&ft.default!==!0&&(ft=ft.default,dt=Object.keys(ft));let vt={};for(let Tt of dt){let Et=lt(ft[Tt],Tt);l$1.und(Et)||(vt[Tt]=Et)}return vt},rn=["config","onProps","onStart","onChange","onPause","onResume","onRest"],on={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function sn(ft){let lt={},dt=0;if(xt(ft,(vt,Tt)=>{on[Tt]||(lt[Tt]=vt,dt++)}),dt)return lt}function de(ft){let lt=sn(ft);if(lt){let dt={to:lt};return xt(ft,(vt,Tt)=>Tt in lt||(dt[Tt]=vt)),dt}return{...ft}}function me(ft){return ft=ve(ft),l$1.arr(ft)?ft.map(me):or(ft)?p.createStringInterpolator({range:[0,1],output:[ft,ft]})(1):ft}function Ue(ft){for(let lt in ft)return!0;return!1}function Ee(ft){return l$1.fun(ft)||l$1.arr(ft)&&l$1.obj(ft[0])}function xe(ft,lt){var dt;(dt=ft.ref)==null||dt.delete(ft),lt==null||lt.delete(ft)}function he(ft,lt){var dt;lt&&ft.ref!==lt&&((dt=ft.ref)==null||dt.delete(ft),lt.add(ft),ft.ref=lt)}var mt={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},tt={...mt.default,mass:1,damping:1,easing:Lt$1.linear,clamp:!1},we=class{constructor(){go(this,"tension");go(this,"friction");go(this,"frequency");go(this,"damping");go(this,"mass");go(this,"velocity",0);go(this,"restVelocity");go(this,"precision");go(this,"progress");go(this,"duration");go(this,"easing");go(this,"clamp");go(this,"bounce");go(this,"decay");go(this,"round");Object.assign(this,tt)}};function gt(ft,lt,dt){dt&&(dt={...dt},ht(dt,lt),lt={...dt,...lt}),ht(ft,lt),Object.assign(ft,lt);for(let Ct in tt)ft[Ct]==null&&(ft[Ct]=tt[Ct]);let{mass:vt,frequency:Tt,damping:Et}=ft;return l$1.und(Tt)||(Tt<.01&&(Tt=.01),Et<0&&(Et=0),ft.tension=Math.pow(2*Math.PI/Tt,2)*vt,ft.friction=4*Math.PI*Et*vt/Tt),ft}function ht(ft,lt){if(!l$1.und(lt.decay))ft.duration=void 0;else{let dt=!l$1.und(lt.tension)||!l$1.und(lt.friction);(dt||!l$1.und(lt.frequency)||!l$1.und(lt.damping)||!l$1.und(lt.mass))&&(ft.duration=void 0,ft.decay=void 0),dt&&(ft.frequency=void 0)}}var yt=[],Le=class{constructor(){go(this,"changed",!1);go(this,"values",yt);go(this,"toValues",null);go(this,"fromValues",yt);go(this,"to");go(this,"from");go(this,"config",new we);go(this,"immediate",!1)}};function Me(ft,{key:lt,props:dt,defaultProps:vt,state:Tt,actions:Et}){return new Promise((Ct,Rt)=>{let kt,Dt,Bt=te(dt.cancel??(vt==null?void 0:vt.cancel),lt);if(Bt)Zt();else{l$1.und(dt.pause)||(Tt.paused=te(dt.pause,lt));let Kt=vt==null?void 0:vt.pause;Kt!==!0&&(Kt=Tt.paused||te(Kt,lt)),kt=I(dt.delay||0,lt),Kt?(Tt.resumeQueue.add(Ut),Et.pause()):(Et.resume(),Ut())}function Ft(){Tt.resumeQueue.add(Ut),Tt.timeouts.delete(Dt),Dt.cancel(),kt=Dt.time-n.now()}function Ut(){kt>0&&!p.skipAnimation?(Tt.delayed=!0,Dt=n.setTimeout(Zt,kt),Tt.pauseQueue.add(Ft),Tt.timeouts.add(Dt)):Zt()}function Zt(){Tt.delayed&&(Tt.delayed=!1),Tt.pauseQueue.delete(Ft),Tt.timeouts.delete(Dt),ft<=(Tt.cancelId||0)&&(Bt=!0);try{Et.start({...dt,callId:ft,cancel:Bt},Ct)}catch(Kt){Rt(Kt)}}})}var be=(ft,lt)=>lt.length==1?lt[0]:lt.some(dt=>dt.cancelled)?q(ft.get()):lt.every(dt=>dt.noop)?nt(ft.get()):E$1(ft.get(),lt.every(dt=>dt.finished)),nt=ft=>({value:ft,noop:!0,finished:!0,cancelled:!1}),E$1=(ft,lt,dt=!1)=>({value:ft,finished:lt,cancelled:dt}),q=ft=>({value:ft,cancelled:!0,finished:!1});function De(ft,lt,dt,vt){let{callId:Tt,parentId:Et,onRest:Ct}=lt,{asyncTo:Rt,promise:kt}=dt;return!Et&&ft===Rt&&!lt.reset?kt:dt.promise=(async()=>{dt.asyncId=Tt,dt.asyncTo=ft;let Dt=ne(lt,(hn,dn)=>dn==="onRest"?void 0:hn),Bt,Ft,Ut=new Promise((hn,dn)=>(Bt=hn,Ft=dn)),Zt=hn=>{let dn=Tt<=(dt.cancelId||0)&&q(vt)||Tt!==dt.asyncId&&E$1(vt,!1);if(dn)throw hn.result=dn,Ft(hn),hn},Kt=(hn,dn)=>{let pn=new Ae,mn=new Ne;return(async()=>{if(p.skipAnimation)throw oe(dt),mn.result=E$1(vt,!1),Ft(mn),mn;Zt(pn);let On=l$1.obj(hn)?{...hn}:{...dn,to:hn};On.parentId=Tt,xt(Dt,(En,An)=>{l$1.und(On[An])&&(On[An]=En)});let bn=await vt.start(On);return Zt(pn),dt.paused&&await new Promise(En=>{dt.resumeQueue.add(En)}),bn})()},ln;if(p.skipAnimation)return oe(dt),E$1(vt,!1);try{let hn;l$1.arr(ft)?hn=(async dn=>{for(let pn of dn)await Kt(pn)})(ft):hn=Promise.resolve(ft(Kt,vt.stop.bind(vt))),await Promise.all([hn.then(Bt),Ut]),ln=E$1(vt.get(),!0,!1)}catch(hn){if(hn instanceof Ae)ln=hn.result;else if(hn instanceof Ne)ln=hn.result;else throw hn}finally{Tt==dt.asyncId&&(dt.asyncId=Et,dt.asyncTo=Et?Rt:void 0,dt.promise=Et?kt:void 0)}return l$1.fun(Ct)&&n.batchedUpdates(()=>{Ct(ln,vt,vt.item)}),ln})()}function oe(ft,lt){Pe$1(ft.timeouts,dt=>dt.cancel()),ft.pauseQueue.clear(),ft.resumeQueue.clear(),ft.asyncId=ft.asyncTo=ft.promise=void 0,lt&&(ft.cancelId=lt)}var Ae=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.");go(this,"result")}},Ne=class extends Error{constructor(){super("SkipAnimationSignal");go(this,"result")}},Re=ft=>ft instanceof X,Sn=1,X=class extends ge{constructor(){super(...arguments);go(this,"id",Sn++);go(this,"_priority",0)}get priority(){return this._priority}set priority(lt){this._priority!=lt&&(this._priority=lt,this._onPriorityChange(lt))}get(){let lt=k(this);return lt&&lt.getValue()}to(...lt){return p.to(this,lt)}interpolate(...lt){return Jt(),p.to(this,lt)}toJSON(){return this.get()}observerAdded(lt){lt==1&&this._attach()}observerRemoved(lt){lt==0&&this._detach()}_attach(){}_detach(){}_onChange(lt,dt=!1){$t(this,{type:"change",parent:this,value:lt,idle:dt})}_onPriorityChange(lt){this.idle||qe$1.sort(this),$t(this,{type:"priority",parent:this,priority:lt})}},se=Symbol.for("SpringPhase"),bt=1,rt=2,ot=4,qe=ft=>(ft[se]&bt)>0,Q=ft=>(ft[se]&rt)>0,ye=ft=>(ft[se]&ot)>0,st=(ft,lt)=>lt?ft[se]|=rt|bt:ft[se]&=~rt,it=(ft,lt)=>lt?ft[se]|=ot:ft[se]&=~ot,ue=class extends X{constructor(lt,dt){super();go(this,"key");go(this,"animation",new Le);go(this,"queue");go(this,"defaultProps",{});go(this,"_state",{paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set});go(this,"_pendingCalls",new Set);go(this,"_lastCallId",0);go(this,"_lastToId",0);go(this,"_memoizedDuration",0);if(!l$1.und(lt)||!l$1.und(dt)){let vt=l$1.obj(lt)?{...lt}:{...dt,from:lt};l$1.und(vt.default)&&(vt.default=!0),this.start(vt)}}get idle(){return!(Q(this)||this._state.asyncTo)||ye(this)}get goal(){return ve(this.animation.to)}get velocity(){let lt=k(this);return lt instanceof l?lt.lastVelocity||0:lt.getPayload().map(dt=>dt.lastVelocity||0)}get hasAnimated(){return qe(this)}get isAnimating(){return Q(this)}get isPaused(){return ye(this)}get isDelayed(){return this._state.delayed}advance(lt){let dt=!0,vt=!1,Tt=this.animation,{config:Et,toValues:Ct}=Tt,Rt=F(Tt.to);!Rt&&Pt(Tt.to)&&(Ct=ht$1(ve(Tt.to))),Tt.values.forEach((Bt,Ft)=>{if(Bt.done)return;let Ut=Bt.constructor==d?1:Rt?Rt[Ft].lastPosition:Ct[Ft],Zt=Tt.immediate,Kt=Ut;if(!Zt){if(Kt=Bt.lastPosition,Et.tension<=0){Bt.done=!0;return}let ln=Bt.elapsedTime+=lt,hn=Tt.fromValues[Ft],dn=Bt.v0!=null?Bt.v0:Bt.v0=l$1.arr(Et.velocity)?Et.velocity[Ft]:Et.velocity,pn,mn=Et.precision||(hn==Ut?.005:Math.min(1,Math.abs(Ut-hn)*.001));if(l$1.und(Et.duration))if(Et.decay){let On=Et.decay===!0?.998:Et.decay,bn=Math.exp(-(1-On)*ln);Kt=hn+dn/(1-On)*(1-bn),Zt=Math.abs(Bt.lastPosition-Kt)<=mn,pn=dn*bn}else{pn=Bt.lastVelocity==null?dn:Bt.lastVelocity;let On=Et.restVelocity||mn/10,bn=Et.clamp?0:Et.bounce,En=!l$1.und(bn),An=hn==Ut?Bt.v0>0:hn<Ut,Tn,In=!1,Rn=1,Dn=Math.ceil(lt/Rn);for(let Bn=0;Bn<Dn&&(Tn=Math.abs(pn)>On,!(!Tn&&(Zt=Math.abs(Ut-Kt)<=mn,Zt)));++Bn){En&&(In=Kt==Ut||Kt>Ut==An,In&&(pn=-pn*bn,Kt=Ut));let Hn=-Et.tension*1e-6*(Kt-Ut),jn=-Et.friction*.001*pn,Kn=(Hn+jn)/Et.mass;pn=pn+Kn*Rn,Kt=Kt+pn*Rn}}else{let On=1;Et.duration>0&&(this._memoizedDuration!==Et.duration&&(this._memoizedDuration=Et.duration,Bt.durationProgress>0&&(Bt.elapsedTime=Et.duration*Bt.durationProgress,ln=Bt.elapsedTime+=lt)),On=(Et.progress||0)+ln/this._memoizedDuration,On=On>1?1:On<0?0:On,Bt.durationProgress=On),Kt=hn+Et.easing(On)*(Ut-hn),pn=(Kt-Bt.lastPosition)/lt,Zt=On==1}Bt.lastVelocity=pn,Number.isNaN(Kt)&&(console.warn("Got NaN while animating:",this),Zt=!0)}Rt&&!Rt[Ft].done&&(Zt=!1),Zt?Bt.done=!0:dt=!1,Bt.setValue(Kt,Et.round)&&(vt=!0)});let kt=k(this),Dt=kt.getValue();if(dt){let Bt=ve(Tt.to);(Dt!==Bt||vt)&&!Et.decay?(kt.setValue(Bt),this._onChange(Bt)):vt&&Et.decay&&this._onChange(Dt),this._stop()}else vt&&this._onChange(Dt)}set(lt){return n.batchedUpdates(()=>{this._stop(),this._focus(lt),this._set(lt)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Q(this)){let{to:lt,config:dt}=this.animation;n.batchedUpdates(()=>{this._onStart(),dt.decay||this._set(lt,!1),this._stop()})}return this}update(lt){return(this.queue||(this.queue=[])).push(lt),this}start(lt,dt){let vt;return l$1.und(lt)?(vt=this.queue||[],this.queue=[]):vt=[l$1.obj(lt)?lt:{...dt,to:lt}],Promise.all(vt.map(Tt=>this._update(Tt))).then(Tt=>be(this,Tt))}stop(lt){let{to:dt}=this.animation;return this._focus(this.get()),oe(this._state,lt&&this._lastCallId),n.batchedUpdates(()=>this._stop(dt,lt)),this}reset(){this._update({reset:!0})}eventObserved(lt){lt.type=="change"?this._start():lt.type=="priority"&&(this.priority=lt.priority+1)}_prepareNode(lt){let dt=this.key||"",{to:vt,from:Tt}=lt;vt=l$1.obj(vt)?vt[dt]:vt,(vt==null||Ee(vt))&&(vt=void 0),Tt=l$1.obj(Tt)?Tt[dt]:Tt,Tt==null&&(Tt=void 0);let Et={to:vt,from:Tt};return qe(this)||(lt.reverse&&([vt,Tt]=[Tt,vt]),Tt=ve(Tt),l$1.und(Tt)?k(this)||this._set(vt):this._set(Tt)),Et}_update({...lt},dt){let{key:vt,defaultProps:Tt}=this;lt.default&&Object.assign(Tt,ne(lt,(Rt,kt)=>/^on/.test(kt)?et(Rt,vt):Rt)),_t(this,lt,"onProps"),Ie(this,"onProps",lt,this);let Et=this._prepareNode(lt);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");let Ct=this._state;return Me(++this._lastCallId,{key:vt,props:lt,defaultProps:Tt,state:Ct,actions:{pause:()=>{ye(this)||(it(this,!0),yt$1(Ct.pauseQueue),Ie(this,"onPause",E$1(this,Ce(this,this.animation.to)),this))},resume:()=>{ye(this)&&(it(this,!1),Q(this)&&this._resume(),yt$1(Ct.resumeQueue),Ie(this,"onResume",E$1(this,Ce(this,this.animation.to)),this))},start:this._merge.bind(this,Et)}}).then(Rt=>{if(lt.loop&&Rt.finished&&!(dt&&Rt.noop)){let kt=at(lt);if(kt)return this._update(kt,!0)}return Rt})}_merge(lt,dt,vt){if(dt.cancel)return this.stop(!0),vt(q(this));let Tt=!l$1.und(lt.to),Et=!l$1.und(lt.from);if(Tt||Et)if(dt.callId>this._lastToId)this._lastToId=dt.callId;else return vt(q(this));let{key:Ct,defaultProps:Rt,animation:kt}=this,{to:Dt,from:Bt}=kt,{to:Ft=Dt,from:Ut=Bt}=lt;Et&&!Tt&&(!dt.default||l$1.und(Ft))&&(Ft=Ut),dt.reverse&&([Ft,Ut]=[Ut,Ft]);let Zt=!bt$1(Ut,Bt);Zt&&(kt.from=Ut),Ut=ve(Ut);let Kt=!bt$1(Ft,Dt);Kt&&this._focus(Ft);let ln=Ee(dt.to),{config:hn}=kt,{decay:dn,velocity:pn}=hn;(Tt||Et)&&(hn.velocity=0),dt.config&&!ln&&gt(hn,I(dt.config,Ct),dt.config!==Rt.config?I(Rt.config,Ct):void 0);let mn=k(this);if(!mn||l$1.und(Ft))return vt(E$1(this,!0));let On=l$1.und(dt.reset)?Et&&!dt.default:!l$1.und(Ut)&&te(dt.reset,Ct),bn=On?Ut:this.get(),En=me(Ft),An=l$1.num(En)||l$1.arr(En)||or(En),Tn=!ln&&(!An||te(Rt.immediate||dt.immediate,Ct));if(Kt){let Bn=Le$1(Ft);if(Bn!==mn.constructor)if(Tn)mn=this._set(En);else throw Error(`Cannot animate between ${mn.constructor.name} and ${Bn.name}, as the "to" prop suggests`)}let In=mn.constructor,Rn=Pt(Ft),Dn=!1;if(!Rn){let Bn=On||!qe(this)&&Zt;(Kt||Bn)&&(Dn=bt$1(me(bn),En),Rn=!Dn),(!bt$1(kt.immediate,Tn)&&!Tn||!bt$1(hn.decay,dn)||!bt$1(hn.velocity,pn))&&(Rn=!0)}if(Dn&&Q(this)&&(kt.changed&&!On?Rn=!0:Rn||this._stop(Dt)),!ln&&((Rn||Pt(Dt))&&(kt.values=mn.getPayload(),kt.toValues=Pt(Ft)?null:In==d?[1]:ht$1(En)),kt.immediate!=Tn&&(kt.immediate=Tn,!Tn&&!On&&this._set(Dt)),Rn)){let{onRest:Bn}=kt;Ve(_n,jn=>_t(this,dt,jn));let Hn=E$1(this,Ce(this,Dt));yt$1(this._pendingCalls,Hn),this._pendingCalls.add(vt),kt.changed&&n.batchedUpdates(()=>{var jn;kt.changed=!On,Bn==null||Bn(Hn,this),On?I(Rt.onRest,Hn):(jn=kt.onStart)==null||jn.call(kt,Hn,this)})}On&&this._set(bn),ln?vt(De(dt.to,dt,this._state,this)):Rn?this._start():Q(this)&&!Kt?this._pendingCalls.add(vt):vt(nt(bn))}_focus(lt){let dt=this.animation;lt!==dt.to&&(qt(this)&&this._detach(),dt.to=lt,qt(this)&&this._attach())}_attach(){let lt=0,{to:dt}=this.animation;Pt(dt)&&(Gt(dt,this),Re(dt)&&(lt=dt.priority+1)),this.priority=lt}_detach(){let{to:lt}=this.animation;Pt(lt)&&Qt(lt,this)}_set(lt,dt=!0){let vt=ve(lt);if(!l$1.und(vt)){let Tt=k(this);if(!Tt||!bt$1(vt,Tt.getValue())){let Et=Le$1(vt);!Tt||Tt.constructor!=Et?D(this,Et.create(vt)):Tt.setValue(vt),Tt&&n.batchedUpdates(()=>{this._onChange(vt,dt)})}}return k(this)}_onStart(){let lt=this.animation;lt.changed||(lt.changed=!0,Ie(this,"onStart",E$1(this,Ce(this,lt.to)),this))}_onChange(lt,dt){dt||(this._onStart(),I(this.animation.onChange,lt,this)),I(this.defaultProps.onChange,lt,this),super._onChange(lt,dt)}_start(){let lt=this.animation;k(this).reset(ve(lt.to)),lt.immediate||(lt.fromValues=lt.values.map(dt=>dt.lastPosition)),Q(this)||(st(this,!0),ye(this)||this._resume())}_resume(){p.skipAnimation?this.finish():qe$1.start(this)}_stop(lt,dt){if(Q(this)){st(this,!1);let vt=this.animation;Ve(vt.values,Et=>{Et.done=!0}),vt.toValues&&(vt.onChange=vt.onPause=vt.onResume=void 0),$t(this,{type:"idle",parent:this});let Tt=dt?q(this.get()):E$1(this.get(),Ce(this,lt??vt.to));yt$1(this._pendingCalls,Tt),vt.changed&&(vt.changed=!1,Ie(this,"onRest",Tt,this))}}};function Ce(ft,lt){let dt=me(lt),vt=me(ft.get());return bt$1(vt,dt)}function at(ft,lt=ft.loop,dt=ft.to){let vt=I(lt);if(vt){let Tt=vt!==!0&&de(vt),Et=(Tt||ft).reverse,Ct=!Tt||Tt.reset;return Pe({...ft,loop:lt,default:!1,pause:void 0,to:!Et||Ee(dt)?dt:void 0,from:Ct?ft.from:void 0,reset:Ct,...Tt})}}function Pe(ft){let{to:lt,from:dt}=ft=de(ft),vt=new Set;return l$1.obj(lt)&&Vt(lt,vt),l$1.obj(dt)&&Vt(dt,vt),ft.keys=vt.size?Array.from(vt):null,ft}function Ot(ft){let lt=Pe(ft);return l$1.und(lt.default)&&(lt.default=ne(lt)),lt}function Vt(ft,lt){xt(ft,(dt,vt)=>dt!=null&&lt.add(vt))}var _n=["onStart","onRest","onChange","onPause","onResume"];function _t(ft,lt,dt){ft.animation[dt]=lt[dt]!==ke(lt,dt)?et(lt[dt],ft.key):void 0}function Ie(ft,lt,...dt){var vt,Tt,Et,Ct;(Tt=(vt=ft.animation)[lt])==null||Tt.call(vt,...dt),(Ct=(Et=ft.defaultProps)[lt])==null||Ct.call(Et,...dt)}var Fn=["onStart","onChange","onRest"],kn=1,le=class{constructor(ft,lt){go(this,"id",kn++);go(this,"springs",{});go(this,"queue",[]);go(this,"ref");go(this,"_flush");go(this,"_initialProps");go(this,"_lastAsyncId",0);go(this,"_active",new Set);go(this,"_changed",new Set);go(this,"_started",!1);go(this,"_item");go(this,"_state",{paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set});go(this,"_events",{onStart:new Map,onChange:new Map,onRest:new Map});this._onFrame=this._onFrame.bind(this),lt&&(this._flush=lt),ft&&this.start({default:!0,...ft})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(ft=>ft.idle&&!ft.isDelayed&&!ft.isPaused)}get item(){return this._item}set item(ft){this._item=ft}get(){let ft={};return this.each((lt,dt)=>ft[dt]=lt.get()),ft}set(ft){for(let lt in ft){let dt=ft[lt];l$1.und(dt)||this.springs[lt].set(dt)}}update(ft){return ft&&this.queue.push(Pe(ft)),this}start(ft){let{queue:lt}=this;return ft?lt=ht$1(ft).map(Pe):this.queue=[],this._flush?this._flush(this,lt):(jt(this,lt),ze(this,lt))}stop(ft,lt){if(ft!==!!ft&&(lt=ft),lt){let dt=this.springs;Ve(ht$1(lt),vt=>dt[vt].stop(!!ft))}else oe(this._state,this._lastAsyncId),this.each(dt=>dt.stop(!!ft));return this}pause(ft){if(l$1.und(ft))this.start({pause:!0});else{let lt=this.springs;Ve(ht$1(ft),dt=>lt[dt].pause())}return this}resume(ft){if(l$1.und(ft))this.start({pause:!1});else{let lt=this.springs;Ve(ht$1(ft),dt=>lt[dt].resume())}return this}each(ft){xt(this.springs,ft)}_onFrame(){let{onStart:ft,onChange:lt,onRest:dt}=this._events,vt=this._active.size>0,Tt=this._changed.size>0;(vt&&!this._started||Tt&&!this._started)&&(this._started=!0,Pe$1(ft,([Rt,kt])=>{kt.value=this.get(),Rt(kt,this,this._item)}));let Et=!vt&&this._started,Ct=Tt||Et&&dt.size?this.get():null;Tt&&lt.size&&Pe$1(lt,([Rt,kt])=>{kt.value=Ct,Rt(kt,this,this._item)}),Et&&(this._started=!1,Pe$1(dt,([Rt,kt])=>{kt.value=Ct,Rt(kt,this,this._item)}))}eventObserved(ft){if(ft.type=="change")this._changed.add(ft.parent),ft.idle||this._active.add(ft.parent);else if(ft.type=="idle")this._active.delete(ft.parent);else return;n.onFrame(this._onFrame)}};function ze(ft,lt){return Promise.all(lt.map(dt=>wt(ft,dt))).then(dt=>be(ft,dt))}async function wt(ft,lt,dt){let{keys:vt,to:Tt,from:Et,loop:Ct,onRest:Rt,onResolve:kt}=lt,Dt=l$1.obj(lt.default)&&lt.default;Ct&&(lt.loop=!1),Tt===!1&&(lt.to=null),Et===!1&&(lt.from=null);let Bt=l$1.arr(Tt)||l$1.fun(Tt)?Tt:void 0;Bt?(lt.to=void 0,lt.onRest=void 0,Dt&&(Dt.onRest=void 0)):Ve(Fn,ln=>{let hn=lt[ln];if(l$1.fun(hn)){let dn=ft._events[ln];lt[ln]=({finished:pn,cancelled:mn})=>{let On=dn.get(hn);On?(pn||(On.finished=!1),mn&&(On.cancelled=!0)):dn.set(hn,{value:null,finished:pn||!1,cancelled:mn||!1})},Dt&&(Dt[ln]=lt[ln])}});let Ft=ft._state;lt.pause===!Ft.paused?(Ft.paused=lt.pause,yt$1(lt.pause?Ft.pauseQueue:Ft.resumeQueue)):Ft.paused&&(lt.pause=!0);let Ut=(vt||Object.keys(ft.springs)).map(ln=>ft.springs[ln].start(lt)),Zt=lt.cancel===!0||ke(lt,"cancel")===!0;(Bt||Zt&&Ft.asyncId)&&Ut.push(Me(++ft._lastAsyncId,{props:lt,state:Ft,actions:{pause:Y,resume:Y,start(ln,hn){Zt?(oe(Ft,ft._lastAsyncId),hn(q(ft))):(ln.onRest=Rt,hn(De(Bt,ln,Ft,ft)))}}})),Ft.paused&&await new Promise(ln=>{Ft.resumeQueue.add(ln)});let Kt=be(ft,await Promise.all(Ut));if(Ct&&Kt.finished&&!(dt&&Kt.noop)){let ln=at(lt,Ct,Tt);if(ln)return jt(ft,[ln]),wt(ft,ln,!0)}return kt&&n.batchedUpdates(()=>kt(Kt,ft,ft.item)),Kt}function _e(ft,lt){let dt={...ft.springs};return lt&&Ve(ht$1(lt),vt=>{l$1.und(vt.keys)&&(vt=Pe(vt)),l$1.obj(vt.to)||(vt={...vt,to:void 0}),Mt(dt,vt,Tt=>Lt(Tt))}),pt(ft,dt),dt}function pt(ft,lt){xt(lt,(dt,vt)=>{ft.springs[vt]||(ft.springs[vt]=dt,Gt(dt,ft))})}function Lt(ft,lt){let dt=new ue;return dt.key=ft,lt&&Gt(dt,lt),dt}function Mt(ft,lt,dt){lt.keys&&Ve(lt.keys,vt=>{(ft[vt]||(ft[vt]=dt(vt)))._prepareNode(lt)})}function jt(ft,lt){Ve(lt,dt=>{Mt(ft.springs,dt,vt=>Lt(vt,ft))})}var H=({children:ft,...lt})=>{let dt=reactExports.useContext(Ge),vt=lt.pause||!!dt.pause,Tt=lt.immediate||!!dt.immediate;lt=Lr(()=>({pause:vt,immediate:Tt}),[vt,Tt]);let{Provider:Et}=Ge;return reactExports.createElement(Et,{value:lt},ft)},Ge=wn(H,{});H.Provider=Ge.Provider;H.Consumer=Ge.Consumer;function wn(ft,lt){return Object.assign(ft,reactExports.createContext(lt)),ft.Provider._context=ft,ft.Consumer._context=ft,ft}var fe=()=>{let ft=[],lt=function(vt){er();let Tt=[];return Ve(ft,(Et,Ct)=>{if(l$1.und(vt))Tt.push(Et.start());else{let Rt=dt(vt,Et,Ct);Rt&&Tt.push(Et.start(Rt))}}),Tt};lt.current=ft,lt.add=function(vt){ft.includes(vt)||ft.push(vt)},lt.delete=function(vt){let Tt=ft.indexOf(vt);~Tt&&ft.splice(Tt,1)},lt.pause=function(){return Ve(ft,vt=>vt.pause(...arguments)),this},lt.resume=function(){return Ve(ft,vt=>vt.resume(...arguments)),this},lt.set=function(vt){Ve(ft,(Tt,Et)=>{let Ct=l$1.fun(vt)?vt(Et,Tt):vt;Ct&&Tt.set(Ct)})},lt.start=function(vt){let Tt=[];return Ve(ft,(Et,Ct)=>{if(l$1.und(vt))Tt.push(Et.start());else{let Rt=this._getProps(vt,Et,Ct);Rt&&Tt.push(Et.start(Rt))}}),Tt},lt.stop=function(){return Ve(ft,vt=>vt.stop(...arguments)),this},lt.update=function(vt){return Ve(ft,(Tt,Et)=>Tt.update(this._getProps(vt,Tt,Et))),this};let dt=function(vt,Tt,Et){return l$1.fun(vt)?vt(Et,Tt):vt};return lt._getProps=dt,lt};function He(ft,lt,dt){let vt=l$1.fun(lt)&&lt;vt&&!dt&&(dt=[]);let Tt=reactExports.useMemo(()=>vt||arguments.length==3?fe():void 0,[]),Et=reactExports.useRef(0),Ct=Mr(),Rt=reactExports.useMemo(()=>({ctrls:[],queue:[],flush(dn,pn){let mn=_e(dn,pn);return Et.current>0&&!Rt.queue.length&&!Object.keys(mn).some(On=>!dn.springs[On])?ze(dn,pn):new Promise(On=>{pt(dn,mn),Rt.queue.push(()=>{On(ze(dn,pn))}),Ct()})}}),[]),kt=reactExports.useRef([...Rt.ctrls]),Dt=[],Bt=Ur(ft)||0;reactExports.useMemo(()=>{Ve(kt.current.slice(ft,Bt),dn=>{xe(dn,Tt),dn.stop(!0)}),kt.current.length=ft,Ft(Bt,ft)},[ft]),reactExports.useMemo(()=>{Ft(0,Math.min(Bt,ft))},dt);function Ft(dn,pn){for(let mn=dn;mn<pn;mn++){let On=kt.current[mn]||(kt.current[mn]=new le(null,Rt.flush)),bn=vt?vt(mn,On):lt[mn];bn&&(Dt[mn]=Ot(bn))}}let Ut=kt.current.map((dn,pn)=>_e(dn,Dt[pn])),Zt=reactExports.useContext(H),Kt=Ur(Zt),ln=Zt!==Kt&&Ue(Zt);Q$1(()=>{Et.current++,Rt.ctrls=kt.current;let{queue:dn}=Rt;dn.length&&(Rt.queue=[],Ve(dn,pn=>pn())),Ve(kt.current,(pn,mn)=>{Tt==null||Tt.add(pn),ln&&pn.start({default:Zt});let On=Dt[mn];On&&(he(pn,On.ref),pn.ref?pn.queue.push(On):pn.start(On))})}),$r(()=>()=>{Ve(Rt.ctrls,dn=>dn.stop(!0))});let hn=Ut.map(dn=>({...dn}));return Tt?[hn,Tt]:hn}function J(ft,lt){let dt=l$1.fun(ft),[[vt],Tt]=He(1,dt?ft:[ft],dt?lt||[]:lt);return dt||arguments.length==2?[vt,Tt]:vt}var W=class extends X{constructor(lt,dt){super();go(this,"key");go(this,"idle",!0);go(this,"calc");go(this,"_active",new Set);this.source=lt,this.calc=W$1(...dt);let vt=this._get(),Tt=Le$1(vt);D(this,Tt.create(vt))}advance(lt){let dt=this._get(),vt=this.get();bt$1(dt,vt)||(k(this).setValue(dt),this._onChange(dt,this.idle)),!this.idle&&Yt(this._active)&&ct(this)}_get(){let lt=l$1.arr(this.source)?this.source.map(ve):ht$1(ve(this.source));return this.calc(...lt)}_start(){this.idle&&!Yt(this._active)&&(this.idle=!1,Ve(F(this),lt=>{lt.done=!1}),p.skipAnimation?(n.batchedUpdates(()=>this.advance()),ct(this)):qe$1.start(this))}_attach(){let lt=1;Ve(ht$1(this.source),dt=>{Pt(dt)&&Gt(dt,this),Re(dt)&&(dt.idle||this._active.add(dt),lt=Math.max(lt,dt.priority+1))}),this.priority=lt,this._start()}_detach(){Ve(ht$1(this.source),lt=>{Pt(lt)&&Qt(lt,this)}),this._active.clear(),ct(this)}eventObserved(lt){lt.type=="change"?lt.idle?this.advance():(this._active.add(lt.parent),this._start()):lt.type=="idle"?this._active.delete(lt.parent):lt.type=="priority"&&(this.priority=ht$1(this.source).reduce((dt,vt)=>Math.max(dt,(Re(vt)?vt.priority:0)+1),0))}};function vr(ft){return ft.idle!==!1}function Yt(ft){return!ft.size||Array.from(ft).every(vr)}function ct(ft){ft.idle||(ft.idle=!0,Ve(F(ft),lt=>{lt.done=!0}),$t(ft,{type:"idle",parent:ft}))}p.assign({createStringInterpolator:Xt,to:(ft,lt)=>new W(ft,lt)});var o=["primitive"].concat(Object.keys(r$5).filter(ft=>/^[A-Z]/.test(ft)).map(ft=>ft[0].toLowerCase()+ft.slice(1)));p.assign({createStringInterpolator:Xt,colors:It,frameLoop:"demand"});addEffect(()=>{n.advance()});var f=Ke(o,{applyAnimatedValues:applyProps}),E=f.animated;const BezierControlPoint=({id:ft,point:lt})=>{const[dt,vt]=reactExports.useState(void 0),Tt=useCurveEditorState(Zt=>Zt.selectedControlPoint),Et=useCurveEditorState(Zt=>Zt.setSelectedControlPoint),Ct=useCurveEditorState(Zt=>Zt.updateBezierControlPoint),{size:Rt,viewport:kt,camera:Dt}=useThree();kt.aspect;const[Bt,Ft]=J(()=>({scale:[1,1,1],position:[lt.x,lt.y,lt.z],config:{mass:1,tension:0,friction:18}})),Ut=useGesture({onDrag:({xy:[Zt,Kt]})=>{if(!dt)return;const ln=new Raycaster;ln.setFromCamera({x:(Zt-kt.left)/Rt.width*2-1,y:-((Kt-kt.top)/Rt.height)*2+1},Dt);const hn=new Plane$1;hn.setFromNormalAndCoplanarPoint(Dt.getWorldDirection(new Vector3(0,0,1)),dt);const dn=new Vector3;ln.ray.intersectPlane(hn,dn),Ft({position:dn.toArray()}),Ct(ft,dn.clone())},onHover:({hovering:Zt})=>{Ft({scale:Zt?[1.2,1.2,1.2]:[1,1,1]})},onDragStart:()=>{Et(ft);const[Zt,Kt,ln]=Bt.position.get();vt(new Vector3(Zt,Kt,ln))},onDragEnd:()=>{vt(void 0),Et(void 0)}});return jsx(E.mesh,{...Bt,...Ut(),castShadow:!0,children:jsxs(Sphere,{scale:.2,children:[jsx("meshBasicMaterial",{color:Tt===ft?"#FF00FF":"#000000"}),jsx("pointLight",{color:16777215,intensity:1})]})})},CurveEditor=()=>{const ft=useCurveEditorState(Et=>Et.bezierControlPoints),lt=useCurveEditorState(Et=>Et.bezierLinePoints),dt=useCurveEditorState(Et=>Et.selectedControlPoint),vt=ft.length,Tt=reactExports.useRef();return useFrame(({clock:Et})=>{var kt;const Ct=Et.getElapsedTime(),Rt=computeBezierPoint(ft,Ct%vt/vt);(kt=Tt.current)==null||kt.position.set(Rt.x,Rt.y,Rt.z)}),jsxs(Fragment,{children:[jsx("color",{attach:"background",args:["black"]}),jsx(OrbitControls,{maxPolarAngle:Math.PI*(1/2-1/10),minPolarAngle:0,maxDistance:20,enableRotate:dt===void 0}),jsx(GizmoHelper,{alignment:"bottom-right",margin:[80,80],children:jsx(GizmoViewport,{axisColors:["#9d4b4b","#2f7f4f","#3b5b9d"],labelColor:"white"})}),jsx(Grid,{position:[0,-.001,0],args:[10.5,10.5],cellSize:1,cellThickness:1,cellColor:"black",fadeDistance:50,fadeStrength:1.2,infiniteGrid:!0}),jsx("directionalLight",{color:"blue",position:[0,5,5]}),jsx(Sky,{distance:45e4,sunPosition:[0,1,0],inclination:0,azimuth:.25}),jsxs("group",{children:[ft.map((Et,Ct)=>jsx(BezierControlPoint,{id:Ct,point:Et},Ct)),jsx("group",{ref:Tt,children:jsx(Crazyflie,{robotId:"",renderBoundingBox:!1})}),jsx(CatmullRomLine,{points:lt,closed:!1,curveType:"centripetal",tension:.5,color:"black",lineWidth:3,dashed:!0,dashSize:.5,dashScale:5})]})]})},CurveEditorModal=()=>{const[ft,lt]=reactExports.useState([]),dt=useUIState(kt=>kt.curveEditorOpen),vt=useUIState(kt=>kt.toggleCurveEditor),Tt=useCurveEditorState(kt=>kt.bezierControlPoints),Et=useCurveEditorState(kt=>kt.addBezierControlPoint),Ct=useCurveEditorState(kt=>kt.selectedControlPoint),Rt=useCurveEditorState(kt=>kt.bezierControlPoints.length);return reactExports.useEffect(()=>{lt(Tt)},[Ct,Rt]),jsxs(Modal,{show:dt,onClose:vt,className:"!w-full",size:"w-full h-5/6",children:[jsx(Modal.Header,{children:"Curve Editor"}),jsx(Modal.Body,{className:"h-[80vh]",children:jsxs("div",{className:"flex h-full flex-row",children:[jsxs("div",{className:"w-1/4",children:[jsx(IconButton,{icon:faPlus,text:"Add Point",onClick:()=>Et(new Vector3(1,1,1))}),jsx(VectorEditor,{points:ft}),jsx("div",{className:"flex flex-col gap-2"})]}),jsx("div",{className:"flex h-full flex-grow",children:jsx(Canvas,{children:jsx(CurveEditor,{})})})]})}),jsx(Modal.Footer,{})]})},SettingsModal=()=>{const ft=useUIState(kt=>kt.settingsModalOpen),lt=useUIState(kt=>kt.toggleSettingsModal),dt=useRobartState(kt=>kt.resetProject),vt=useRobartState(kt=>kt.projectName),Tt=useRobartState(kt=>kt.setProjectName),Et=useUIState(kt=>kt.toggleCurveEditor),[Ct,Rt]=reactExports.useState(!1);return jsxs(Fragment,{children:[jsxs(Modal,{show:ft,onClose:lt,children:[jsx(Modal.Header,{children:"Settings"}),jsx(Modal.Body,{children:jsxs(Tabs.Group,{style:"default",children:[jsxs(Tabs.Item,{active:!0,title:"Project",children:["Profile content",jsxs("div",{children:[jsx("div",{className:"mb-2 block",children:jsx(Label,{value:"Project Name"})}),jsx(TextInput,{value:vt,onChange:kt=>Tt(kt.target.value)})]})]}),jsx(Tabs.Item,{title:"Blocks",children:"Block Settings"}),jsx(Tabs.Item,{title:"Preferences",children:"User Preferences"}),jsx(Tabs.Item,{title:"Utilities",children:jsx(Button,{onClick:Et,children:"Curve Editor"})})]})}),jsxs(Modal.Footer,{children:[jsx(CancelButton,{onClick:lt}),jsx(IconButton,{color:"warning",text:"Reset Project",icon:faSync,onClick:()=>Rt(!0)})]})]}),jsx(ConfirmationModal,{header:"Confirm Reset Project",open:Ct,onCancel:()=>Rt(!1),onConfirm:()=>{dt(),Rt(!1),lt()},children:"Are you sure?"}),jsx(CurveEditorModal,{})]})},NavigationBar=()=>{const[ft,lt]=reactExports.useState(!1),dt=useRobartState(kt=>kt.saveProject),vt=useRobartState(kt=>kt.exportToROS),Tt=useRobartState(kt=>kt.loadProject),Et=useUIState(kt=>kt.toggleSettingsModal),Ct=useRobartState(kt=>kt.projectName),Rt=useRobartState(kt=>kt.setProjectName);return jsxs(Fragment,{children:[jsxs("div",{className:"flex items-center gap-5 border-b-2 border-black p-4",children:[jsx(RenamableText,{className:"text-4xl font-extrabold",text:Ct,updateText:kt=>{Rt(kt!==""?kt:"New Robart Project")}}),jsxs("div",{className:"flex flex-grow justify-end gap-3",children:[jsx(IconButton,{icon:faDownload,text:"Export To ROS",onClick:()=>vt("test.txt")}),jsx(IconButton,{icon:faDownload,text:"Save Project",onClick:()=>dt()}),jsx(IconButton,{icon:faUpload,text:"Load Project",onClick:()=>lt(!0)}),jsx(IconButton,{icon:faGear,text:"Settings",onClick:()=>Et()})]})]}),jsx(UploadFileModal,{header:"Load Project",open:ft,onClose:()=>lt(!1),onFileUpload:Tt}),jsx(SettingsModal,{})]})},DefaultBufferLength=1024;let nextPropID=0,Range$1=class{constructor(lt,dt){this.from=lt,this.to=dt}};class NodeProp{constructor(lt={}){this.id=nextPropID++,this.perNode=!!lt.perNode,this.deserialize=lt.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(lt){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof lt!="function"&&(lt=NodeType.match(lt)),dt=>{let vt=lt(dt);return vt===void 0?null:[this,vt]}}}NodeProp.closedBy=new NodeProp({deserialize:ft=>ft.split(" ")});NodeProp.openedBy=new NodeProp({deserialize:ft=>ft.split(" ")});NodeProp.group=new NodeProp({deserialize:ft=>ft.split(" ")});NodeProp.contextHash=new NodeProp({perNode:!0});NodeProp.lookAhead=new NodeProp({perNode:!0});NodeProp.mounted=new NodeProp({perNode:!0});const noProps=Object.create(null);class NodeType{constructor(lt,dt,vt,Tt=0){this.name=lt,this.props=dt,this.id=vt,this.flags=Tt}static define(lt){let dt=lt.props&&lt.props.length?Object.create(null):noProps,vt=(lt.top?1:0)|(lt.skipped?2:0)|(lt.error?4:0)|(lt.name==null?8:0),Tt=new NodeType(lt.name||"",dt,lt.id,vt);if(lt.props){for(let Et of lt.props)if(Array.isArray(Et)||(Et=Et(Tt)),Et){if(Et[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");dt[Et[0].id]=Et[1]}}return Tt}prop(lt){return this.props[lt.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(lt){if(typeof lt=="string"){if(this.name==lt)return!0;let dt=this.prop(NodeProp.group);return dt?dt.indexOf(lt)>-1:!1}return this.id==lt}static match(lt){let dt=Object.create(null);for(let vt in lt)for(let Tt of vt.split(" "))dt[Tt]=lt[vt];return vt=>{for(let Tt=vt.prop(NodeProp.group),Et=-1;Et<(Tt?Tt.length:0);Et++){let Ct=dt[Et<0?vt.name:Tt[Et]];if(Ct)return Ct}}}}NodeType.none=new NodeType("",Object.create(null),0,8);class NodeSet{constructor(lt){this.types=lt;for(let dt=0;dt<lt.length;dt++)if(lt[dt].id!=dt)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...lt){let dt=[];for(let vt of this.types){let Tt=null;for(let Et of lt){let Ct=Et(vt);Ct&&(Tt||(Tt=Object.assign({},vt.props)),Tt[Ct[0].id]=Ct[1])}dt.push(Tt?new NodeType(vt.name,Tt,vt.id,vt.flags):vt)}return new NodeSet(dt)}}const CachedNode=new WeakMap,CachedInnerNode=new WeakMap;var IterMode;(function(ft){ft[ft.ExcludeBuffers=1]="ExcludeBuffers",ft[ft.IncludeAnonymous=2]="IncludeAnonymous",ft[ft.IgnoreMounts=4]="IgnoreMounts",ft[ft.IgnoreOverlays=8]="IgnoreOverlays"})(IterMode||(IterMode={}));class Tree{constructor(lt,dt,vt,Tt,Et){if(this.type=lt,this.children=dt,this.positions=vt,this.length=Tt,this.props=null,Et&&Et.length){this.props=Object.create(null);for(let[Ct,Rt]of Et)this.props[typeof Ct=="number"?Ct:Ct.id]=Rt}}toString(){let lt=this.prop(NodeProp.mounted);if(lt&&!lt.overlay)return lt.tree.toString();let dt="";for(let vt of this.children){let Tt=vt.toString();Tt&&(dt&&(dt+=","),dt+=Tt)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(dt.length?"("+dt+")":""):dt}cursor(lt=0){return new TreeCursor(this.topNode,lt)}cursorAt(lt,dt=0,vt=0){let Tt=CachedNode.get(this)||this.topNode,Et=new TreeCursor(Tt);return Et.moveTo(lt,dt),CachedNode.set(this,Et._tree),Et}get topNode(){return new TreeNode(this,0,0,null)}resolve(lt,dt=0){let vt=resolveNode(CachedNode.get(this)||this.topNode,lt,dt,!1);return CachedNode.set(this,vt),vt}resolveInner(lt,dt=0){let vt=resolveNode(CachedInnerNode.get(this)||this.topNode,lt,dt,!0);return CachedInnerNode.set(this,vt),vt}iterate(lt){let{enter:dt,leave:vt,from:Tt=0,to:Et=this.length}=lt;for(let Ct=this.cursor((lt.mode||0)|IterMode.IncludeAnonymous);;){let Rt=!1;if(Ct.from<=Et&&Ct.to>=Tt&&(Ct.type.isAnonymous||dt(Ct)!==!1)){if(Ct.firstChild())continue;Rt=!0}for(;Rt&&vt&&!Ct.type.isAnonymous&&vt(Ct),!Ct.nextSibling();){if(!Ct.parent())return;Rt=!0}}}prop(lt){return lt.perNode?this.props?this.props[lt.id]:void 0:this.type.prop(lt)}get propValues(){let lt=[];if(this.props)for(let dt in this.props)lt.push([+dt,this.props[dt]]);return lt}balance(lt={}){return this.children.length<=8?this:balanceRange(NodeType.none,this.children,this.positions,0,this.children.length,0,this.length,(dt,vt,Tt)=>new Tree(this.type,dt,vt,Tt,this.propValues),lt.makeTree||((dt,vt,Tt)=>new Tree(NodeType.none,dt,vt,Tt)))}static build(lt){return buildTree(lt)}}Tree.empty=new Tree(NodeType.none,[],[],0);class FlatBufferCursor{constructor(lt,dt){this.buffer=lt,this.index=dt}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new FlatBufferCursor(this.buffer,this.index)}}class TreeBuffer{constructor(lt,dt,vt){this.buffer=lt,this.length=dt,this.set=vt}get type(){return NodeType.none}toString(){let lt=[];for(let dt=0;dt<this.buffer.length;)lt.push(this.childString(dt)),dt=this.buffer[dt+3];return lt.join(",")}childString(lt){let dt=this.buffer[lt],vt=this.buffer[lt+3],Tt=this.set.types[dt],Et=Tt.name;if(/\W/.test(Et)&&!Tt.isError&&(Et=JSON.stringify(Et)),lt+=4,vt==lt)return Et;let Ct=[];for(;lt<vt;)Ct.push(this.childString(lt)),lt=this.buffer[lt+3];return Et+"("+Ct.join(",")+")"}findChild(lt,dt,vt,Tt,Et){let{buffer:Ct}=this,Rt=-1;for(let kt=lt;kt!=dt&&!(checkSide(Et,Tt,Ct[kt+1],Ct[kt+2])&&(Rt=kt,vt>0));kt=Ct[kt+3]);return Rt}slice(lt,dt,vt){let Tt=this.buffer,Et=new Uint16Array(dt-lt),Ct=0;for(let Rt=lt,kt=0;Rt<dt;){Et[kt++]=Tt[Rt++],Et[kt++]=Tt[Rt++]-vt;let Dt=Et[kt++]=Tt[Rt++]-vt;Et[kt++]=Tt[Rt++]-lt,Ct=Math.max(Ct,Dt)}return new TreeBuffer(Et,Ct,this.set)}}function checkSide(ft,lt,dt,vt){switch(ft){case-2:return dt<lt;case-1:return vt>=lt&&dt<lt;case 0:return dt<lt&&vt>lt;case 1:return dt<=lt&&vt>lt;case 2:return vt>lt;case 4:return!0}}function enterUnfinishedNodesBefore(ft,lt){let dt=ft.childBefore(lt);for(;dt;){let vt=dt.lastChild;if(!vt||vt.to!=dt.to)break;vt.type.isError&&vt.from==vt.to?(ft=dt,dt=vt.prevSibling):dt=vt}return ft}function resolveNode(ft,lt,dt,vt){for(var Tt;ft.from==ft.to||(dt<1?ft.from>=lt:ft.from>lt)||(dt>-1?ft.to<=lt:ft.to<lt);){let Ct=!vt&&ft instanceof TreeNode&&ft.index<0?null:ft.parent;if(!Ct)return ft;ft=Ct}let Et=vt?0:IterMode.IgnoreOverlays;if(vt)for(let Ct=ft,Rt=Ct.parent;Rt;Ct=Rt,Rt=Ct.parent)Ct instanceof TreeNode&&Ct.index<0&&((Tt=Rt.enter(lt,dt,Et))===null||Tt===void 0?void 0:Tt.from)!=Ct.from&&(ft=Rt);for(;;){let Ct=ft.enter(lt,dt,Et);if(!Ct)return ft;ft=Ct}}class TreeNode{constructor(lt,dt,vt,Tt){this._tree=lt,this.from=dt,this.index=vt,this._parent=Tt}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(lt,dt,vt,Tt,Et=0){for(let Ct=this;;){for(let{children:Rt,positions:kt}=Ct._tree,Dt=dt>0?Rt.length:-1;lt!=Dt;lt+=dt){let Bt=Rt[lt],Ft=kt[lt]+Ct.from;if(checkSide(Tt,vt,Ft,Ft+Bt.length)){if(Bt instanceof TreeBuffer){if(Et&IterMode.ExcludeBuffers)continue;let Ut=Bt.findChild(0,Bt.buffer.length,dt,vt-Ft,Tt);if(Ut>-1)return new BufferNode(new BufferContext(Ct,Bt,lt,Ft),null,Ut)}else if(Et&IterMode.IncludeAnonymous||!Bt.type.isAnonymous||hasChild(Bt)){let Ut;if(!(Et&IterMode.IgnoreMounts)&&Bt.props&&(Ut=Bt.prop(NodeProp.mounted))&&!Ut.overlay)return new TreeNode(Ut.tree,Ft,lt,Ct);let Zt=new TreeNode(Bt,Ft,lt,Ct);return Et&IterMode.IncludeAnonymous||!Zt.type.isAnonymous?Zt:Zt.nextChild(dt<0?Bt.children.length-1:0,dt,vt,Tt)}}}if(Et&IterMode.IncludeAnonymous||!Ct.type.isAnonymous||(Ct.index>=0?lt=Ct.index+dt:lt=dt<0?-1:Ct._parent._tree.children.length,Ct=Ct._parent,!Ct))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(lt){return this.nextChild(0,1,lt,2)}childBefore(lt){return this.nextChild(this._tree.children.length-1,-1,lt,-2)}enter(lt,dt,vt=0){let Tt;if(!(vt&IterMode.IgnoreOverlays)&&(Tt=this._tree.prop(NodeProp.mounted))&&Tt.overlay){let Et=lt-this.from;for(let{from:Ct,to:Rt}of Tt.overlay)if((dt>0?Ct<=Et:Ct<Et)&&(dt<0?Rt>=Et:Rt>Et))return new TreeNode(Tt.tree,Tt.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,lt,dt,vt)}nextSignificantParent(){let lt=this;for(;lt.type.isAnonymous&&lt._parent;)lt=lt._parent;return lt}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(lt=0){return new TreeCursor(this,lt)}get tree(){return this._tree}toTree(){return this._tree}resolve(lt,dt=0){return resolveNode(this,lt,dt,!1)}resolveInner(lt,dt=0){return resolveNode(this,lt,dt,!0)}enterUnfinishedNodesBefore(lt){return enterUnfinishedNodesBefore(this,lt)}getChild(lt,dt=null,vt=null){let Tt=getChildren(this,lt,dt,vt);return Tt.length?Tt[0]:null}getChildren(lt,dt=null,vt=null){return getChildren(this,lt,dt,vt)}toString(){return this._tree.toString()}get node(){return this}matchContext(lt){return matchNodeContext(this,lt)}}function getChildren(ft,lt,dt,vt){let Tt=ft.cursor(),Et=[];if(!Tt.firstChild())return Et;if(dt!=null){for(;!Tt.type.is(dt);)if(!Tt.nextSibling())return Et}for(;;){if(vt!=null&&Tt.type.is(vt))return Et;if(Tt.type.is(lt)&&Et.push(Tt.node),!Tt.nextSibling())return vt==null?Et:[]}}function matchNodeContext(ft,lt,dt=lt.length-1){for(let vt=ft.parent;dt>=0;vt=vt.parent){if(!vt)return!1;if(!vt.type.isAnonymous){if(lt[dt]&&lt[dt]!=vt.name)return!1;dt--}}return!0}class BufferContext{constructor(lt,dt,vt,Tt){this.parent=lt,this.buffer=dt,this.index=vt,this.start=Tt}}class BufferNode{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(lt,dt,vt){this.context=lt,this._parent=dt,this.index=vt,this.type=lt.buffer.set.types[lt.buffer.buffer[vt]]}child(lt,dt,vt){let{buffer:Tt}=this.context,Et=Tt.findChild(this.index+4,Tt.buffer[this.index+3],lt,dt-this.context.start,vt);return Et<0?null:new BufferNode(this.context,this,Et)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(lt){return this.child(1,lt,2)}childBefore(lt){return this.child(-1,lt,-2)}enter(lt,dt,vt=0){if(vt&IterMode.ExcludeBuffers)return null;let{buffer:Tt}=this.context,Et=Tt.findChild(this.index+4,Tt.buffer[this.index+3],dt>0?1:-1,lt-this.context.start,dt);return Et<0?null:new BufferNode(this.context,this,Et)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(lt){return this._parent?null:this.context.parent.nextChild(this.context.index+lt,lt,0,4)}get nextSibling(){let{buffer:lt}=this.context,dt=lt.buffer[this.index+3];return dt<(this._parent?lt.buffer[this._parent.index+3]:lt.buffer.length)?new BufferNode(this.context,this._parent,dt):this.externalSibling(1)}get prevSibling(){let{buffer:lt}=this.context,dt=this._parent?this._parent.index+4:0;return this.index==dt?this.externalSibling(-1):new BufferNode(this.context,this._parent,lt.findChild(dt,this.index,-1,0,4))}cursor(lt=0){return new TreeCursor(this,lt)}get tree(){return null}toTree(){let lt=[],dt=[],{buffer:vt}=this.context,Tt=this.index+4,Et=vt.buffer[this.index+3];if(Et>Tt){let Ct=vt.buffer[this.index+1];lt.push(vt.slice(Tt,Et,Ct)),dt.push(0)}return new Tree(this.type,lt,dt,this.to-this.from)}resolve(lt,dt=0){return resolveNode(this,lt,dt,!1)}resolveInner(lt,dt=0){return resolveNode(this,lt,dt,!0)}enterUnfinishedNodesBefore(lt){return enterUnfinishedNodesBefore(this,lt)}toString(){return this.context.buffer.childString(this.index)}getChild(lt,dt=null,vt=null){let Tt=getChildren(this,lt,dt,vt);return Tt.length?Tt[0]:null}getChildren(lt,dt=null,vt=null){return getChildren(this,lt,dt,vt)}get node(){return this}matchContext(lt){return matchNodeContext(this,lt)}}class TreeCursor{get name(){return this.type.name}constructor(lt,dt=0){if(this.mode=dt,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,lt instanceof TreeNode)this.yieldNode(lt);else{this._tree=lt.context.parent,this.buffer=lt.context;for(let vt=lt._parent;vt;vt=vt._parent)this.stack.unshift(vt.index);this.bufferNode=lt,this.yieldBuf(lt.index)}}yieldNode(lt){return lt?(this._tree=lt,this.type=lt.type,this.from=lt.from,this.to=lt.to,!0):!1}yieldBuf(lt,dt){this.index=lt;let{start:vt,buffer:Tt}=this.buffer;return this.type=dt||Tt.set.types[Tt.buffer[lt]],this.from=vt+Tt.buffer[lt+1],this.to=vt+Tt.buffer[lt+2],!0}yield(lt){return lt?lt instanceof TreeNode?(this.buffer=null,this.yieldNode(lt)):(this.buffer=lt.context,this.yieldBuf(lt.index,lt.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(lt,dt,vt){if(!this.buffer)return this.yield(this._tree.nextChild(lt<0?this._tree._tree.children.length-1:0,lt,dt,vt,this.mode));let{buffer:Tt}=this.buffer,Et=Tt.findChild(this.index+4,Tt.buffer[this.index+3],lt,dt-this.buffer.start,vt);return Et<0?!1:(this.stack.push(this.index),this.yieldBuf(Et))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(lt){return this.enterChild(1,lt,2)}childBefore(lt){return this.enterChild(-1,lt,-2)}enter(lt,dt,vt=this.mode){return this.buffer?vt&IterMode.ExcludeBuffers?!1:this.enterChild(1,lt,dt):this.yield(this._tree.enter(lt,dt,vt))}parent(){if(!this.buffer)return this.yieldNode(this.mode&IterMode.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let lt=this.mode&IterMode.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(lt)}sibling(lt){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+lt,lt,0,4,this.mode)):!1;let{buffer:dt}=this.buffer,vt=this.stack.length-1;if(lt<0){let Tt=vt<0?0:this.stack[vt]+4;if(this.index!=Tt)return this.yieldBuf(dt.findChild(Tt,this.index,-1,0,4))}else{let Tt=dt.buffer[this.index+3];if(Tt<(vt<0?dt.buffer.length:dt.buffer[this.stack[vt]+3]))return this.yieldBuf(Tt)}return vt<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+lt,lt,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(lt){let dt,vt,{buffer:Tt}=this;if(Tt){if(lt>0){if(this.index<Tt.buffer.buffer.length)return!1}else for(let Et=0;Et<this.index;Et++)if(Tt.buffer.buffer[Et+3]<this.index)return!1;({index:dt,parent:vt}=Tt)}else({index:dt,_parent:vt}=this._tree);for(;vt;{index:dt,_parent:vt}=vt)if(dt>-1)for(let Et=dt+lt,Ct=lt<0?-1:vt._tree.children.length;Et!=Ct;Et+=lt){let Rt=vt._tree.children[Et];if(this.mode&IterMode.IncludeAnonymous||Rt instanceof TreeBuffer||!Rt.type.isAnonymous||hasChild(Rt))return!1}return!0}move(lt,dt){if(dt&&this.enterChild(lt,0,4))return!0;for(;;){if(this.sibling(lt))return!0;if(this.atLastNode(lt)||!this.parent())return!1}}next(lt=!0){return this.move(1,lt)}prev(lt=!0){return this.move(-1,lt)}moveTo(lt,dt=0){for(;(this.from==this.to||(dt<1?this.from>=lt:this.from>lt)||(dt>-1?this.to<=lt:this.to<lt))&&this.parent(););for(;this.enterChild(1,lt,dt););return this}get node(){if(!this.buffer)return this._tree;let lt=this.bufferNode,dt=null,vt=0;if(lt&&lt.context==this.buffer)e:for(let Tt=this.index,Et=this.stack.length;Et>=0;){for(let Ct=lt;Ct;Ct=Ct._parent)if(Ct.index==Tt){if(Tt==this.index)return Ct;dt=Ct,vt=Et+1;break e}Tt=this.stack[--Et]}for(let Tt=vt;Tt<this.stack.length;Tt++)dt=new BufferNode(this.buffer,dt,this.stack[Tt]);return this.bufferNode=new BufferNode(this.buffer,dt,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(lt,dt){for(let vt=0;;){let Tt=!1;if(this.type.isAnonymous||lt(this)!==!1){if(this.firstChild()){vt++;continue}this.type.isAnonymous||(Tt=!0)}for(;Tt&&dt&&dt(this),Tt=this.type.isAnonymous,!this.nextSibling();){if(!vt)return;this.parent(),vt--,Tt=!0}}}matchContext(lt){if(!this.buffer)return matchNodeContext(this.node,lt);let{buffer:dt}=this.buffer,{types:vt}=dt.set;for(let Tt=lt.length-1,Et=this.stack.length-1;Tt>=0;Et--){if(Et<0)return matchNodeContext(this.node,lt,Tt);let Ct=vt[dt.buffer[this.stack[Et]]];if(!Ct.isAnonymous){if(lt[Tt]&&lt[Tt]!=Ct.name)return!1;Tt--}}return!0}}function hasChild(ft){return ft.children.some(lt=>lt instanceof TreeBuffer||!lt.type.isAnonymous||hasChild(lt))}function buildTree(ft){var lt;let{buffer:dt,nodeSet:vt,maxBufferLength:Tt=DefaultBufferLength,reused:Et=[],minRepeatType:Ct=vt.types.length}=ft,Rt=Array.isArray(dt)?new FlatBufferCursor(dt,dt.length):dt,kt=vt.types,Dt=0,Bt=0;function Ft(On,bn,En,An,Tn){let{id:In,start:Rn,end:Dn,size:Bn}=Rt,Hn=Bt;for(;Bn<0;)if(Rt.next(),Bn==-1){let Ln=Et[In];En.push(Ln),An.push(Rn-On);return}else if(Bn==-3){Dt=In;return}else if(Bn==-4){Bt=In;return}else throw new RangeError(`Unrecognized record size: ${Bn}`);let jn=kt[In],Kn,zn,lr=Rn-On;if(Dn-Rn<=Tt&&(zn=ln(Rt.pos-bn,Tn))){let Ln=new Uint16Array(zn.size-zn.skip),Vn=Rt.pos-zn.size,Wn=Ln.length;for(;Rt.pos>Vn;)Wn=hn(zn.start,Ln,Wn);Kn=new TreeBuffer(Ln,Dn-zn.start,vt),lr=zn.start-On}else{let Ln=Rt.pos-Bn;Rt.next();let Vn=[],Wn=[],sr=In>=Ct?In:-1,Mn=0,ir=Dn;for(;Rt.pos>Ln;)sr>=0&&Rt.id==sr&&Rt.size>=0?(Rt.end<=ir-Tt&&(Zt(Vn,Wn,Rn,Mn,Rt.end,ir,sr,Hn),Mn=Vn.length,ir=Rt.end),Rt.next()):Ft(Rn,Ln,Vn,Wn,sr);if(sr>=0&&Mn>0&&Mn<Vn.length&&Zt(Vn,Wn,Rn,Mn,Rn,ir,sr,Hn),Vn.reverse(),Wn.reverse(),sr>-1&&Mn>0){let mr=Ut(jn);Kn=balanceRange(jn,Vn,Wn,0,Vn.length,0,Dn-Rn,mr,mr)}else Kn=Kt(jn,Vn,Wn,Dn-Rn,Hn-Dn)}En.push(Kn),An.push(lr)}function Ut(On){return(bn,En,An)=>{let Tn=0,In=bn.length-1,Rn,Dn;if(In>=0&&(Rn=bn[In])instanceof Tree){if(!In&&Rn.type==On&&Rn.length==An)return Rn;(Dn=Rn.prop(NodeProp.lookAhead))&&(Tn=En[In]+Rn.length+Dn)}return Kt(On,bn,En,An,Tn)}}function Zt(On,bn,En,An,Tn,In,Rn,Dn){let Bn=[],Hn=[];for(;On.length>An;)Bn.push(On.pop()),Hn.push(bn.pop()+En-Tn);On.push(Kt(vt.types[Rn],Bn,Hn,In-Tn,Dn-In)),bn.push(Tn-En)}function Kt(On,bn,En,An,Tn=0,In){if(Dt){let Rn=[NodeProp.contextHash,Dt];In=In?[Rn].concat(In):[Rn]}if(Tn>25){let Rn=[NodeProp.lookAhead,Tn];In=In?[Rn].concat(In):[Rn]}return new Tree(On,bn,En,An,In)}function ln(On,bn){let En=Rt.fork(),An=0,Tn=0,In=0,Rn=En.end-Tt,Dn={size:0,start:0,skip:0};e:for(let Bn=En.pos-On;En.pos>Bn;){let Hn=En.size;if(En.id==bn&&Hn>=0){Dn.size=An,Dn.start=Tn,Dn.skip=In,In+=4,An+=4,En.next();continue}let jn=En.pos-Hn;if(Hn<0||jn<Bn||En.start<Rn)break;let Kn=En.id>=Ct?4:0,zn=En.start;for(En.next();En.pos>jn;){if(En.size<0)if(En.size==-3)Kn+=4;else break e;else En.id>=Ct&&(Kn+=4);En.next()}Tn=zn,An+=Hn,In+=Kn}return(bn<0||An==On)&&(Dn.size=An,Dn.start=Tn,Dn.skip=In),Dn.size>4?Dn:void 0}function hn(On,bn,En){let{id:An,start:Tn,end:In,size:Rn}=Rt;if(Rt.next(),Rn>=0&&An<Ct){let Dn=En;if(Rn>4){let Bn=Rt.pos-(Rn-4);for(;Rt.pos>Bn;)En=hn(On,bn,En)}bn[--En]=Dn,bn[--En]=In-On,bn[--En]=Tn-On,bn[--En]=An}else Rn==-3?Dt=An:Rn==-4&&(Bt=An);return En}let dn=[],pn=[];for(;Rt.pos>0;)Ft(ft.start||0,ft.bufferStart||0,dn,pn,-1);let mn=(lt=ft.length)!==null&&lt!==void 0?lt:dn.length?pn[0]+dn[0].length:0;return new Tree(kt[ft.topID],dn.reverse(),pn.reverse(),mn)}const nodeSizeCache=new WeakMap;function nodeSize(ft,lt){if(!ft.isAnonymous||lt instanceof TreeBuffer||lt.type!=ft)return 1;let dt=nodeSizeCache.get(lt);if(dt==null){dt=1;for(let vt of lt.children){if(vt.type!=ft||!(vt instanceof Tree)){dt=1;break}dt+=nodeSize(ft,vt)}nodeSizeCache.set(lt,dt)}return dt}function balanceRange(ft,lt,dt,vt,Tt,Et,Ct,Rt,kt){let Dt=0;for(let Kt=vt;Kt<Tt;Kt++)Dt+=nodeSize(ft,lt[Kt]);let Bt=Math.ceil(Dt*1.5/8),Ft=[],Ut=[];function Zt(Kt,ln,hn,dn,pn){for(let mn=hn;mn<dn;){let On=mn,bn=ln[mn],En=nodeSize(ft,Kt[mn]);for(mn++;mn<dn;mn++){let An=nodeSize(ft,Kt[mn]);if(En+An>=Bt)break;En+=An}if(mn==On+1){if(En>Bt){let An=Kt[On];Zt(An.children,An.positions,0,An.children.length,ln[On]+pn);continue}Ft.push(Kt[On])}else{let An=ln[mn-1]+Kt[mn-1].length-bn;Ft.push(balanceRange(ft,Kt,ln,On,mn,bn,An,null,kt))}Ut.push(bn+pn-Et)}}return Zt(lt,dt,vt,Tt,0),(Rt||kt)(Ft,Ut,Ct)}class NodeWeakMap{constructor(){this.map=new WeakMap}setBuffer(lt,dt,vt){let Tt=this.map.get(lt);Tt||this.map.set(lt,Tt=new Map),Tt.set(dt,vt)}getBuffer(lt,dt){let vt=this.map.get(lt);return vt&&vt.get(dt)}set(lt,dt){lt instanceof BufferNode?this.setBuffer(lt.context.buffer,lt.index,dt):lt instanceof TreeNode&&this.map.set(lt.tree,dt)}get(lt){return lt instanceof BufferNode?this.getBuffer(lt.context.buffer,lt.index):lt instanceof TreeNode?this.map.get(lt.tree):void 0}cursorSet(lt,dt){lt.buffer?this.setBuffer(lt.buffer.buffer,lt.index,dt):this.map.set(lt.tree,dt)}cursorGet(lt){return lt.buffer?this.getBuffer(lt.buffer.buffer,lt.index):this.map.get(lt.tree)}}class TreeFragment{constructor(lt,dt,vt,Tt,Et=!1,Ct=!1){this.from=lt,this.to=dt,this.tree=vt,this.offset=Tt,this.open=(Et?1:0)|(Ct?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(lt,dt=[],vt=!1){let Tt=[new TreeFragment(0,lt.length,lt,0,!1,vt)];for(let Et of dt)Et.to>lt.length&&Tt.push(Et);return Tt}static applyChanges(lt,dt,vt=128){if(!dt.length)return lt;let Tt=[],Et=1,Ct=lt.length?lt[0]:null;for(let Rt=0,kt=0,Dt=0;;Rt++){let Bt=Rt<dt.length?dt[Rt]:null,Ft=Bt?Bt.fromA:1e9;if(Ft-kt>=vt)for(;Ct&&Ct.from<Ft;){let Ut=Ct;if(kt>=Ut.from||Ft<=Ut.to||Dt){let Zt=Math.max(Ut.from,kt)-Dt,Kt=Math.min(Ut.to,Ft)-Dt;Ut=Zt>=Kt?null:new TreeFragment(Zt,Kt,Ut.tree,Ut.offset+Dt,Rt>0,!!Bt)}if(Ut&&Tt.push(Ut),Ct.to>Ft)break;Ct=Et<lt.length?lt[Et++]:null}if(!Bt)break;kt=Bt.toA,Dt=Bt.toA-Bt.toB}return Tt}}class Parser{startParse(lt,dt,vt){return typeof lt=="string"&&(lt=new StringInput(lt)),vt=vt?vt.length?vt.map(Tt=>new Range$1(Tt.from,Tt.to)):[new Range$1(0,0)]:[new Range$1(0,lt.length)],this.createParse(lt,dt||[],vt)}parse(lt,dt,vt){let Tt=this.startParse(lt,dt,vt);for(;;){let Et=Tt.advance();if(Et)return Et}}}class StringInput{constructor(lt){this.string=lt}get length(){return this.string.length}chunk(lt){return this.string.slice(lt)}get lineChunks(){return!1}read(lt,dt){return this.string.slice(lt,dt)}}new NodeProp({perNode:!0});class Stack{constructor(lt,dt,vt,Tt,Et,Ct,Rt,kt,Dt,Bt=0,Ft){this.p=lt,this.stack=dt,this.state=vt,this.reducePos=Tt,this.pos=Et,this.score=Ct,this.buffer=Rt,this.bufferBase=kt,this.curContext=Dt,this.lookAhead=Bt,this.parent=Ft}toString(){return`[${this.stack.filter((lt,dt)=>dt%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(lt,dt,vt=0){let Tt=lt.parser.context;return new Stack(lt,[],dt,vt,vt,0,[],0,Tt?new StackContext(Tt,Tt.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(lt,dt){this.stack.push(this.state,dt,this.bufferBase+this.buffer.length),this.state=lt}reduce(lt){var dt;let vt=lt>>19,Tt=lt&65535,{parser:Et}=this.p,Ct=Et.dynamicPrecedence(Tt);if(Ct&&(this.score+=Ct),vt==0){this.pushState(Et.getGoto(this.state,Tt,!0),this.reducePos),Tt<Et.minRepeatTerm&&this.storeNode(Tt,this.reducePos,this.reducePos,4,!0),this.reduceContext(Tt,this.reducePos);return}let Rt=this.stack.length-(vt-1)*3-(lt&262144?6:0),kt=Rt?this.stack[Rt-2]:this.p.ranges[0].from,Dt=this.reducePos-kt;Dt>=2e3&&!(!((dt=this.p.parser.nodeSet.types[Tt])===null||dt===void 0)&&dt.isAnonymous)&&(kt==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=Dt):this.p.lastBigReductionSize<Dt&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=kt,this.p.lastBigReductionSize=Dt));let Bt=Rt?this.stack[Rt-1]:0,Ft=this.bufferBase+this.buffer.length-Bt;if(Tt<Et.minRepeatTerm||lt&131072){let Ut=Et.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(Tt,kt,Ut,Ft+4,!0)}if(lt&262144)this.state=this.stack[Rt];else{let Ut=this.stack[Rt-3];this.state=Et.getGoto(Ut,Tt,!0)}for(;this.stack.length>Rt;)this.stack.pop();this.reduceContext(Tt,kt)}storeNode(lt,dt,vt,Tt=4,Et=!1){if(lt==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let Ct=this,Rt=this.buffer.length;if(Rt==0&&Ct.parent&&(Rt=Ct.bufferBase-Ct.parent.bufferBase,Ct=Ct.parent),Rt>0&&Ct.buffer[Rt-4]==0&&Ct.buffer[Rt-1]>-1){if(dt==vt)return;if(Ct.buffer[Rt-2]>=dt){Ct.buffer[Rt-2]=vt;return}}}if(!Et||this.pos==vt)this.buffer.push(lt,dt,vt,Tt);else{let Ct=this.buffer.length;if(Ct>0&&this.buffer[Ct-4]!=0)for(;Ct>0&&this.buffer[Ct-2]>vt;)this.buffer[Ct]=this.buffer[Ct-4],this.buffer[Ct+1]=this.buffer[Ct-3],this.buffer[Ct+2]=this.buffer[Ct-2],this.buffer[Ct+3]=this.buffer[Ct-1],Ct-=4,Tt>4&&(Tt-=4);this.buffer[Ct]=lt,this.buffer[Ct+1]=dt,this.buffer[Ct+2]=vt,this.buffer[Ct+3]=Tt}}shift(lt,dt,vt){let Tt=this.pos;if(lt&131072)this.pushState(lt&65535,this.pos);else if(lt&262144)this.pos=vt,this.shiftContext(dt,Tt),dt<=this.p.parser.maxNode&&this.buffer.push(dt,Tt,vt,4);else{let Et=lt,{parser:Ct}=this.p;(vt>this.pos||dt<=Ct.maxNode)&&(this.pos=vt,Ct.stateFlag(Et,1)||(this.reducePos=vt)),this.pushState(Et,Tt),this.shiftContext(dt,Tt),dt<=Ct.maxNode&&this.buffer.push(dt,Tt,vt,4)}}apply(lt,dt,vt){lt&65536?this.reduce(lt):this.shift(lt,dt,vt)}useNode(lt,dt){let vt=this.p.reused.length-1;(vt<0||this.p.reused[vt]!=lt)&&(this.p.reused.push(lt),vt++);let Tt=this.pos;this.reducePos=this.pos=Tt+lt.length,this.pushState(dt,Tt),this.buffer.push(vt,Tt,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,lt,this,this.p.stream.reset(this.pos-lt.length)))}split(){let lt=this,dt=lt.buffer.length;for(;dt>0&&lt.buffer[dt-2]>lt.reducePos;)dt-=4;let vt=lt.buffer.slice(dt),Tt=lt.bufferBase+dt;for(;lt&&Tt==lt.bufferBase;)lt=lt.parent;return new Stack(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,vt,Tt,this.curContext,this.lookAhead,lt)}recoverByDelete(lt,dt){let vt=lt<=this.p.parser.maxNode;vt&&this.storeNode(lt,this.pos,dt,4),this.storeNode(0,this.pos,dt,vt?8:4),this.pos=this.reducePos=dt,this.score-=190}canShift(lt){for(let dt=new SimulatedStack(this);;){let vt=this.p.parser.stateSlot(dt.state,4)||this.p.parser.hasAction(dt.state,lt);if(vt==0)return!1;if(!(vt&65536))return!0;dt.reduce(vt)}}recoverByInsert(lt){if(this.stack.length>=300)return[];let dt=this.p.parser.nextStates(this.state);if(dt.length>8||this.stack.length>=120){let Tt=[];for(let Et=0,Ct;Et<dt.length;Et+=2)(Ct=dt[Et+1])!=this.state&&this.p.parser.hasAction(Ct,lt)&&Tt.push(dt[Et],Ct);if(this.stack.length<120)for(let Et=0;Tt.length<8&&Et<dt.length;Et+=2){let Ct=dt[Et+1];Tt.some((Rt,kt)=>kt&1&&Rt==Ct)||Tt.push(dt[Et],Ct)}dt=Tt}let vt=[];for(let Tt=0;Tt<dt.length&&vt.length<4;Tt+=2){let Et=dt[Tt+1];if(Et==this.state)continue;let Ct=this.split();Ct.pushState(Et,this.pos),Ct.storeNode(0,Ct.pos,Ct.pos,4,!0),Ct.shiftContext(dt[Tt],this.pos),Ct.score-=200,vt.push(Ct)}return vt}forceReduce(){let lt=this.p.parser.stateSlot(this.state,5);if(!(lt&65536))return!1;let{parser:dt}=this.p;if(!dt.validAction(this.state,lt)){let vt=lt>>19,Tt=lt&65535,Et=this.stack.length-vt*3;if(Et<0||dt.getGoto(this.stack[Et],Tt,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(lt),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:lt}=this.p;return lt.data[lt.stateSlot(this.state,1)]==65535&&!lt.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(lt){if(this.state!=lt.state||this.stack.length!=lt.stack.length)return!1;for(let dt=0;dt<this.stack.length;dt+=3)if(this.stack[dt]!=lt.stack[dt])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(lt){return this.p.parser.dialect.flags[lt]}shiftContext(lt,dt){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,lt,this,this.p.stream.reset(dt)))}reduceContext(lt,dt){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,lt,this,this.p.stream.reset(dt)))}emitContext(){let lt=this.buffer.length-1;(lt<0||this.buffer[lt]!=-3)&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let lt=this.buffer.length-1;(lt<0||this.buffer[lt]!=-4)&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(lt){if(lt!=this.curContext.context){let dt=new StackContext(this.curContext.tracker,lt);dt.hash!=this.curContext.hash&&this.emitContext(),this.curContext=dt}}setLookAhead(lt){lt>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=lt)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class StackContext{constructor(lt,dt){this.tracker=lt,this.context=dt,this.hash=lt.strict?lt.hash(dt):0}}var Recover;(function(ft){ft[ft.Insert=200]="Insert",ft[ft.Delete=190]="Delete",ft[ft.Reduce=100]="Reduce",ft[ft.MaxNext=4]="MaxNext",ft[ft.MaxInsertStackDepth=300]="MaxInsertStackDepth",ft[ft.DampenInsertStackDepth=120]="DampenInsertStackDepth",ft[ft.MinBigReduction=2e3]="MinBigReduction"})(Recover||(Recover={}));class SimulatedStack{constructor(lt){this.start=lt,this.state=lt.state,this.stack=lt.stack,this.base=this.stack.length}reduce(lt){let dt=lt&65535,vt=lt>>19;vt==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(vt-1)*3;let Tt=this.start.p.parser.getGoto(this.stack[this.base-3],dt,!0);this.state=Tt}}class StackBufferCursor{constructor(lt,dt,vt){this.stack=lt,this.pos=dt,this.index=vt,this.buffer=lt.buffer,this.index==0&&this.maybeNext()}static create(lt,dt=lt.bufferBase+lt.buffer.length){return new StackBufferCursor(lt,dt,dt-lt.bufferBase)}maybeNext(){let lt=this.stack.parent;lt!=null&&(this.index=this.stack.bufferBase-lt.bufferBase,this.stack=lt,this.buffer=lt.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new StackBufferCursor(this.stack,this.pos,this.index)}}function decodeArray(ft,lt=Uint16Array){if(typeof ft!="string")return ft;let dt=null;for(let vt=0,Tt=0;vt<ft.length;){let Et=0;for(;;){let Ct=ft.charCodeAt(vt++),Rt=!1;if(Ct==126){Et=65535;break}Ct>=92&&Ct--,Ct>=34&&Ct--;let kt=Ct-32;if(kt>=46&&(kt-=46,Rt=!0),Et+=kt,Rt)break;Et*=46}dt?dt[Tt++]=Et:dt=new lt(Et)}return dt}class CachedToken{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const nullToken=new CachedToken;class InputStream{constructor(lt,dt){this.input=lt,this.ranges=dt,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=nullToken,this.rangeIndex=0,this.pos=this.chunkPos=dt[0].from,this.range=dt[0],this.end=dt[dt.length-1].to,this.readNext()}resolveOffset(lt,dt){let vt=this.range,Tt=this.rangeIndex,Et=this.pos+lt;for(;Et<vt.from;){if(!Tt)return null;let Ct=this.ranges[--Tt];Et-=vt.from-Ct.to,vt=Ct}for(;dt<0?Et>vt.to:Et>=vt.to;){if(Tt==this.ranges.length-1)return null;let Ct=this.ranges[++Tt];Et+=Ct.from-vt.to,vt=Ct}return Et}clipPos(lt){if(lt>=this.range.from&&lt<this.range.to)return lt;for(let dt of this.ranges)if(dt.to>lt)return Math.max(lt,dt.from);return this.end}peek(lt){let dt=this.chunkOff+lt,vt,Tt;if(dt>=0&&dt<this.chunk.length)vt=this.pos+lt,Tt=this.chunk.charCodeAt(dt);else{let Et=this.resolveOffset(lt,1);if(Et==null)return-1;if(vt=Et,vt>=this.chunk2Pos&&vt<this.chunk2Pos+this.chunk2.length)Tt=this.chunk2.charCodeAt(vt-this.chunk2Pos);else{let Ct=this.rangeIndex,Rt=this.range;for(;Rt.to<=vt;)Rt=this.ranges[++Ct];this.chunk2=this.input.chunk(this.chunk2Pos=vt),vt+this.chunk2.length>Rt.to&&(this.chunk2=this.chunk2.slice(0,Rt.to-vt)),Tt=this.chunk2.charCodeAt(0)}}return vt>=this.token.lookAhead&&(this.token.lookAhead=vt+1),Tt}acceptToken(lt,dt=0){let vt=dt?this.resolveOffset(dt,-1):this.pos;if(vt==null||vt<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=lt,this.token.end=vt}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:lt,chunkPos:dt}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=lt,this.chunk2Pos=dt,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let lt=this.input.chunk(this.pos),dt=this.pos+lt.length;this.chunk=dt>this.range.to?lt.slice(0,this.range.to-this.pos):lt,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(lt=1){for(this.chunkOff+=lt;this.pos+lt>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();lt-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=lt,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(lt,dt){if(dt?(this.token=dt,dt.start=lt,dt.lookAhead=lt+1,dt.value=dt.extended=-1):this.token=nullToken,this.pos!=lt){if(this.pos=lt,lt==this.end)return this.setDone(),this;for(;lt<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;lt>=this.range.to;)this.range=this.ranges[++this.rangeIndex];lt>=this.chunkPos&&lt<this.chunkPos+this.chunk.length?this.chunkOff=lt-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(lt,dt){if(lt>=this.chunkPos&&dt<=this.chunkPos+this.chunk.length)return this.chunk.slice(lt-this.chunkPos,dt-this.chunkPos);if(lt>=this.chunk2Pos&&dt<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(lt-this.chunk2Pos,dt-this.chunk2Pos);if(lt>=this.range.from&&dt<=this.range.to)return this.input.read(lt,dt);let vt="";for(let Tt of this.ranges){if(Tt.from>=dt)break;Tt.to>lt&&(vt+=this.input.read(Math.max(Tt.from,lt),Math.min(Tt.to,dt)))}return vt}}class TokenGroup{constructor(lt,dt){this.data=lt,this.id=dt}token(lt,dt){let{parser:vt}=dt.p;readToken(this.data,lt,dt,this.id,vt.data,vt.tokenPrecTable)}}TokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;class LocalTokenGroup{constructor(lt,dt,vt){this.precTable=dt,this.elseToken=vt,this.data=typeof lt=="string"?decodeArray(lt):lt}token(lt,dt){let vt=lt.pos,Tt;for(;Tt=lt.pos,readToken(this.data,lt,dt,0,this.data,this.precTable),!(lt.token.value>-1);){if(this.elseToken==null)return;if(lt.next<0)break;lt.advance(),lt.reset(Tt+1,lt.token)}Tt>vt&&(lt.reset(vt,lt.token),lt.acceptToken(this.elseToken,Tt-vt))}}LocalTokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;class ExternalTokenizer{constructor(lt,dt={}){this.token=lt,this.contextual=!!dt.contextual,this.fallback=!!dt.fallback,this.extend=!!dt.extend}}function readToken(ft,lt,dt,vt,Tt,Et){let Ct=0,Rt=1<<vt,{dialect:kt}=dt.p.parser;e:for(;Rt&ft[Ct];){let Dt=ft[Ct+1];for(let Zt=Ct+3;Zt<Dt;Zt+=2)if((ft[Zt+1]&Rt)>0){let Kt=ft[Zt];if(kt.allows(Kt)&&(lt.token.value==-1||lt.token.value==Kt||overrides(Kt,lt.token.value,Tt,Et))){lt.acceptToken(Kt);break}}let Bt=lt.next,Ft=0,Ut=ft[Ct+2];if(lt.next<0&&Ut>Ft&&ft[Dt+Ut*3-3]==65535&&ft[Dt+Ut*3-3]==65535){Ct=ft[Dt+Ut*3-1];continue e}for(;Ft<Ut;){let Zt=Ft+Ut>>1,Kt=Dt+Zt+(Zt<<1),ln=ft[Kt],hn=ft[Kt+1]||65536;if(Bt<ln)Ut=Zt;else if(Bt>=hn)Ft=Zt+1;else{Ct=ft[Kt+2],lt.advance();continue e}}break}}function findOffset(ft,lt,dt){for(let vt=lt,Tt;(Tt=ft[vt])!=65535;vt++)if(Tt==dt)return vt-lt;return-1}function overrides(ft,lt,dt,vt){let Tt=findOffset(dt,vt,lt);return Tt<0||findOffset(dt,vt,ft)<Tt}const verbose=typeof process<"u"&&process.env&&/\bparse\b/.test({}.LOG);let stackIDs=null;var Safety;(function(ft){ft[ft.Margin=25]="Margin"})(Safety||(Safety={}));function cutAt(ft,lt,dt){let vt=ft.cursor(IterMode.IncludeAnonymous);for(vt.moveTo(lt);;)if(!(dt<0?vt.childBefore(lt):vt.childAfter(lt)))for(;;){if((dt<0?vt.to<lt:vt.from>lt)&&!vt.type.isError)return dt<0?Math.max(0,Math.min(vt.to-1,lt-25)):Math.min(ft.length,Math.max(vt.from+1,lt+25));if(dt<0?vt.prevSibling():vt.nextSibling())break;if(!vt.parent())return dt<0?0:ft.length}}class FragmentCursor{constructor(lt,dt){this.fragments=lt,this.nodeSet=dt,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let lt=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(lt){for(this.safeFrom=lt.openStart?cutAt(lt.tree,lt.from+lt.offset,1)-lt.offset:lt.from,this.safeTo=lt.openEnd?cutAt(lt.tree,lt.to+lt.offset,-1)-lt.offset:lt.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(lt.tree),this.start.push(-lt.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(lt){if(lt<this.nextStart)return null;for(;this.fragment&&this.safeTo<=lt;)this.nextFragment();if(!this.fragment)return null;for(;;){let dt=this.trees.length-1;if(dt<0)return this.nextFragment(),null;let vt=this.trees[dt],Tt=this.index[dt];if(Tt==vt.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let Et=vt.children[Tt],Ct=this.start[dt]+vt.positions[Tt];if(Ct>lt)return this.nextStart=Ct,null;if(Et instanceof Tree){if(Ct==lt){if(Ct<this.safeFrom)return null;let Rt=Ct+Et.length;if(Rt<=this.safeTo){let kt=Et.prop(NodeProp.lookAhead);if(!kt||Rt+kt<this.fragment.to)return Et}}this.index[dt]++,Ct+Et.length>=Math.max(this.safeFrom,lt)&&(this.trees.push(Et),this.start.push(Ct),this.index.push(0))}else this.index[dt]++,this.nextStart=Ct+Et.length}}}class TokenCache{constructor(lt,dt){this.stream=dt,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=lt.tokenizers.map(vt=>new CachedToken)}getActions(lt){let dt=0,vt=null,{parser:Tt}=lt.p,{tokenizers:Et}=Tt,Ct=Tt.stateSlot(lt.state,3),Rt=lt.curContext?lt.curContext.hash:0,kt=0;for(let Dt=0;Dt<Et.length;Dt++){if(!(1<<Dt&Ct))continue;let Bt=Et[Dt],Ft=this.tokens[Dt];if(!(vt&&!Bt.fallback)&&((Bt.contextual||Ft.start!=lt.pos||Ft.mask!=Ct||Ft.context!=Rt)&&(this.updateCachedToken(Ft,Bt,lt),Ft.mask=Ct,Ft.context=Rt),Ft.lookAhead>Ft.end+25&&(kt=Math.max(Ft.lookAhead,kt)),Ft.value!=0)){let Ut=dt;if(Ft.extended>-1&&(dt=this.addActions(lt,Ft.extended,Ft.end,dt)),dt=this.addActions(lt,Ft.value,Ft.end,dt),!Bt.extend&&(vt=Ft,dt>Ut))break}}for(;this.actions.length>dt;)this.actions.pop();return kt&&lt.setLookAhead(kt),!vt&&lt.pos==this.stream.end&&(vt=new CachedToken,vt.value=lt.p.parser.eofTerm,vt.start=vt.end=lt.pos,dt=this.addActions(lt,vt.value,vt.end,dt)),this.mainToken=vt,this.actions}getMainToken(lt){if(this.mainToken)return this.mainToken;let dt=new CachedToken,{pos:vt,p:Tt}=lt;return dt.start=vt,dt.end=Math.min(vt+1,Tt.stream.end),dt.value=vt==Tt.stream.end?Tt.parser.eofTerm:0,dt}updateCachedToken(lt,dt,vt){let Tt=this.stream.clipPos(vt.pos);if(dt.token(this.stream.reset(Tt,lt),vt),lt.value>-1){let{parser:Et}=vt.p;for(let Ct=0;Ct<Et.specialized.length;Ct++)if(Et.specialized[Ct]==lt.value){let Rt=Et.specializers[Ct](this.stream.read(lt.start,lt.end),vt);if(Rt>=0&&vt.p.parser.dialect.allows(Rt>>1)){Rt&1?lt.extended=Rt>>1:lt.value=Rt>>1;break}}}else lt.value=0,lt.end=this.stream.clipPos(Tt+1)}putAction(lt,dt,vt,Tt){for(let Et=0;Et<Tt;Et+=3)if(this.actions[Et]==lt)return Tt;return this.actions[Tt++]=lt,this.actions[Tt++]=dt,this.actions[Tt++]=vt,Tt}addActions(lt,dt,vt,Tt){let{state:Et}=lt,{parser:Ct}=lt.p,{data:Rt}=Ct;for(let kt=0;kt<2;kt++)for(let Dt=Ct.stateSlot(Et,kt?2:1);;Dt+=3){if(Rt[Dt]==65535)if(Rt[Dt+1]==1)Dt=pair(Rt,Dt+2);else{Tt==0&&Rt[Dt+1]==2&&(Tt=this.putAction(pair(Rt,Dt+2),dt,vt,Tt));break}Rt[Dt]==dt&&(Tt=this.putAction(pair(Rt,Dt+1),dt,vt,Tt))}return Tt}}var Rec;(function(ft){ft[ft.Distance=5]="Distance",ft[ft.MaxRemainingPerStep=3]="MaxRemainingPerStep",ft[ft.MinBufferLengthPrune=500]="MinBufferLengthPrune",ft[ft.ForceReduceLimit=10]="ForceReduceLimit",ft[ft.CutDepth=15e3]="CutDepth",ft[ft.CutTo=9e3]="CutTo",ft[ft.MaxLeftAssociativeReductionCount=300]="MaxLeftAssociativeReductionCount",ft[ft.MaxStackCount=12]="MaxStackCount"})(Rec||(Rec={}));class Parse{constructor(lt,dt,vt,Tt){this.parser=lt,this.input=dt,this.ranges=Tt,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new InputStream(dt,Tt),this.tokens=new TokenCache(lt,this.stream),this.topTerm=lt.top[1];let{from:Et}=Tt[0];this.stacks=[Stack.start(this,lt.top[0],Et)],this.fragments=vt.length&&this.stream.end-Et>lt.bufferLength*4?new FragmentCursor(vt,lt.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let lt=this.stacks,dt=this.minStackPos,vt=this.stacks=[],Tt,Et;if(this.bigReductionCount>300&&lt.length==1){let[Ct]=lt;for(;Ct.forceReduce()&&Ct.stack.length&&Ct.stack[Ct.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let Ct=0;Ct<lt.length;Ct++){let Rt=lt[Ct];for(;;){if(this.tokens.mainToken=null,Rt.pos>dt)vt.push(Rt);else{if(this.advanceStack(Rt,vt,lt))continue;{Tt||(Tt=[],Et=[]),Tt.push(Rt);let kt=this.tokens.getMainToken(Rt);Et.push(kt.value,kt.end)}}break}}if(!vt.length){let Ct=Tt&&findFinished(Tt);if(Ct)return this.stackToTree(Ct);if(this.parser.strict)throw verbose&&Tt&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+dt);this.recovering||(this.recovering=5)}if(this.recovering&&Tt){let Ct=this.stoppedAt!=null&&Tt[0].pos>this.stoppedAt?Tt[0]:this.runRecovery(Tt,Et,vt);if(Ct)return this.stackToTree(Ct.forceAll())}if(this.recovering){let Ct=this.recovering==1?1:this.recovering*3;if(vt.length>Ct)for(vt.sort((Rt,kt)=>kt.score-Rt.score);vt.length>Ct;)vt.pop();vt.some(Rt=>Rt.reducePos>dt)&&this.recovering--}else if(vt.length>1){e:for(let Ct=0;Ct<vt.length-1;Ct++){let Rt=vt[Ct];for(let kt=Ct+1;kt<vt.length;kt++){let Dt=vt[kt];if(Rt.sameState(Dt)||Rt.buffer.length>500&&Dt.buffer.length>500)if((Rt.score-Dt.score||Rt.buffer.length-Dt.buffer.length)>0)vt.splice(kt--,1);else{vt.splice(Ct--,1);continue e}}}vt.length>12&&vt.splice(12,vt.length-12)}this.minStackPos=vt[0].pos;for(let Ct=1;Ct<vt.length;Ct++)vt[Ct].pos<this.minStackPos&&(this.minStackPos=vt[Ct].pos);return null}stopAt(lt){if(this.stoppedAt!=null&&this.stoppedAt<lt)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=lt}advanceStack(lt,dt,vt){let Tt=lt.pos,{parser:Et}=this,Ct=verbose?this.stackID(lt)+" -> ":"";if(this.stoppedAt!=null&&Tt>this.stoppedAt)return lt.forceReduce()?lt:null;if(this.fragments){let Dt=lt.curContext&&lt.curContext.tracker.strict,Bt=Dt?lt.curContext.hash:0;for(let Ft=this.fragments.nodeAt(Tt);Ft;){let Ut=this.parser.nodeSet.types[Ft.type.id]==Ft.type?Et.getGoto(lt.state,Ft.type.id):-1;if(Ut>-1&&Ft.length&&(!Dt||(Ft.prop(NodeProp.contextHash)||0)==Bt))return lt.useNode(Ft,Ut),verbose&&console.log(Ct+this.stackID(lt)+` (via reuse of ${Et.getName(Ft.type.id)})`),!0;if(!(Ft instanceof Tree)||Ft.children.length==0||Ft.positions[0]>0)break;let Zt=Ft.children[0];if(Zt instanceof Tree&&Ft.positions[0]==0)Ft=Zt;else break}}let Rt=Et.stateSlot(lt.state,4);if(Rt>0)return lt.reduce(Rt),verbose&&console.log(Ct+this.stackID(lt)+` (via always-reduce ${Et.getName(Rt&65535)})`),!0;if(lt.stack.length>=15e3)for(;lt.stack.length>9e3&&lt.forceReduce(););let kt=this.tokens.getActions(lt);for(let Dt=0;Dt<kt.length;){let Bt=kt[Dt++],Ft=kt[Dt++],Ut=kt[Dt++],Zt=Dt==kt.length||!vt,Kt=Zt?lt:lt.split();if(Kt.apply(Bt,Ft,Ut),verbose&&console.log(Ct+this.stackID(Kt)+` (via ${Bt&65536?`reduce of ${Et.getName(Bt&65535)}`:"shift"} for ${Et.getName(Ft)} @ ${Tt}${Kt==lt?"":", split"})`),Zt)return!0;Kt.pos>Tt?dt.push(Kt):vt.push(Kt)}return!1}advanceFully(lt,dt){let vt=lt.pos;for(;;){if(!this.advanceStack(lt,null,null))return!1;if(lt.pos>vt)return pushStackDedup(lt,dt),!0}}runRecovery(lt,dt,vt){let Tt=null,Et=!1;for(let Ct=0;Ct<lt.length;Ct++){let Rt=lt[Ct],kt=dt[Ct<<1],Dt=dt[(Ct<<1)+1],Bt=verbose?this.stackID(Rt)+" -> ":"";if(Rt.deadEnd&&(Et||(Et=!0,Rt.restart(),verbose&&console.log(Bt+this.stackID(Rt)+" (restarted)"),this.advanceFully(Rt,vt))))continue;let Ft=Rt.split(),Ut=Bt;for(let Zt=0;Ft.forceReduce()&&Zt<10&&(verbose&&console.log(Ut+this.stackID(Ft)+" (via force-reduce)"),!this.advanceFully(Ft,vt));Zt++)verbose&&(Ut=this.stackID(Ft)+" -> ");for(let Zt of Rt.recoverByInsert(kt))verbose&&console.log(Bt+this.stackID(Zt)+" (via recover-insert)"),this.advanceFully(Zt,vt);this.stream.end>Rt.pos?(Dt==Rt.pos&&(Dt++,kt=0),Rt.recoverByDelete(kt,Dt),verbose&&console.log(Bt+this.stackID(Rt)+` (via recover-delete ${this.parser.getName(kt)})`),pushStackDedup(Rt,vt)):(!Tt||Tt.score<Rt.score)&&(Tt=Rt)}return Tt}stackToTree(lt){return lt.close(),Tree.build({buffer:StackBufferCursor.create(lt),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:lt.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(lt){let dt=(stackIDs||(stackIDs=new WeakMap)).get(lt);return dt||stackIDs.set(lt,dt=String.fromCodePoint(this.nextStackID++)),dt+lt}}function pushStackDedup(ft,lt){for(let dt=0;dt<lt.length;dt++){let vt=lt[dt];if(vt.pos==ft.pos&&vt.sameState(ft)){lt[dt].score<ft.score&&(lt[dt]=ft);return}}lt.push(ft)}class Dialect{constructor(lt,dt,vt){this.source=lt,this.flags=dt,this.disabled=vt}allows(lt){return!this.disabled||this.disabled[lt]==0}}const id=ft=>ft;class ContextTracker{constructor(lt){this.start=lt.start,this.shift=lt.shift||id,this.reduce=lt.reduce||id,this.reuse=lt.reuse||id,this.hash=lt.hash||(()=>0),this.strict=lt.strict!==!1}}class LRParser extends Parser{constructor(lt){if(super(),this.wrappers=[],lt.version!=14)throw new RangeError(`Parser version (${lt.version}) doesn't match runtime version (14)`);let dt=lt.nodeNames.split(" ");this.minRepeatTerm=dt.length;for(let Rt=0;Rt<lt.repeatNodeCount;Rt++)dt.push("");let vt=Object.keys(lt.topRules).map(Rt=>lt.topRules[Rt][1]),Tt=[];for(let Rt=0;Rt<dt.length;Rt++)Tt.push([]);function Et(Rt,kt,Dt){Tt[Rt].push([kt,kt.deserialize(String(Dt))])}if(lt.nodeProps)for(let Rt of lt.nodeProps){let kt=Rt[0];typeof kt=="string"&&(kt=NodeProp[kt]);for(let Dt=1;Dt<Rt.length;){let Bt=Rt[Dt++];if(Bt>=0)Et(Bt,kt,Rt[Dt++]);else{let Ft=Rt[Dt+-Bt];for(let Ut=-Bt;Ut>0;Ut--)Et(Rt[Dt++],kt,Ft);Dt++}}}this.nodeSet=new NodeSet(dt.map((Rt,kt)=>NodeType.define({name:kt>=this.minRepeatTerm?void 0:Rt,id:kt,props:Tt[kt],top:vt.indexOf(kt)>-1,error:kt==0,skipped:lt.skippedNodes&&lt.skippedNodes.indexOf(kt)>-1}))),lt.propSources&&(this.nodeSet=this.nodeSet.extend(...lt.propSources)),this.strict=!1,this.bufferLength=DefaultBufferLength;let Ct=decodeArray(lt.tokenData);this.context=lt.context,this.specializerSpecs=lt.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let Rt=0;Rt<this.specializerSpecs.length;Rt++)this.specialized[Rt]=this.specializerSpecs[Rt].term;this.specializers=this.specializerSpecs.map(getSpecializer),this.states=decodeArray(lt.states,Uint32Array),this.data=decodeArray(lt.stateData),this.goto=decodeArray(lt.goto),this.maxTerm=lt.maxTerm,this.tokenizers=lt.tokenizers.map(Rt=>typeof Rt=="number"?new TokenGroup(Ct,Rt):Rt),this.topRules=lt.topRules,this.dialects=lt.dialects||{},this.dynamicPrecedences=lt.dynamicPrecedences||null,this.tokenPrecTable=lt.tokenPrec,this.termNames=lt.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(lt,dt,vt){let Tt=new Parse(this,lt,dt,vt);for(let Et of this.wrappers)Tt=Et(Tt,lt,dt,vt);return Tt}getGoto(lt,dt,vt=!1){let Tt=this.goto;if(dt>=Tt[0])return-1;for(let Et=Tt[dt+1];;){let Ct=Tt[Et++],Rt=Ct&1,kt=Tt[Et++];if(Rt&&vt)return kt;for(let Dt=Et+(Ct>>1);Et<Dt;Et++)if(Tt[Et]==lt)return kt;if(Rt)return-1}}hasAction(lt,dt){let vt=this.data;for(let Tt=0;Tt<2;Tt++)for(let Et=this.stateSlot(lt,Tt?2:1),Ct;;Et+=3){if((Ct=vt[Et])==65535)if(vt[Et+1]==1)Ct=vt[Et=pair(vt,Et+2)];else{if(vt[Et+1]==2)return pair(vt,Et+2);break}if(Ct==dt||Ct==0)return pair(vt,Et+1)}return 0}stateSlot(lt,dt){return this.states[lt*6+dt]}stateFlag(lt,dt){return(this.stateSlot(lt,0)&dt)>0}validAction(lt,dt){if(dt==this.stateSlot(lt,4))return!0;for(let vt=this.stateSlot(lt,1);;vt+=3){if(this.data[vt]==65535)if(this.data[vt+1]==1)vt=pair(this.data,vt+2);else return!1;if(dt==pair(this.data,vt+1))return!0}}nextStates(lt){let dt=[];for(let vt=this.stateSlot(lt,1);;vt+=3){if(this.data[vt]==65535)if(this.data[vt+1]==1)vt=pair(this.data,vt+2);else break;if(!(this.data[vt+2]&1)){let Tt=this.data[vt+1];dt.some((Et,Ct)=>Ct&1&&Et==Tt)||dt.push(this.data[vt],Tt)}}return dt}configure(lt){let dt=Object.assign(Object.create(LRParser.prototype),this);if(lt.props&&(dt.nodeSet=this.nodeSet.extend(...lt.props)),lt.top){let vt=this.topRules[lt.top];if(!vt)throw new RangeError(`Invalid top rule name ${lt.top}`);dt.top=vt}return lt.tokenizers&&(dt.tokenizers=this.tokenizers.map(vt=>{let Tt=lt.tokenizers.find(Et=>Et.from==vt);return Tt?Tt.to:vt})),lt.specializers&&(dt.specializers=this.specializers.slice(),dt.specializerSpecs=this.specializerSpecs.map((vt,Tt)=>{let Et=lt.specializers.find(Rt=>Rt.from==vt.external);if(!Et)return vt;let Ct=Object.assign(Object.assign({},vt),{external:Et.to});return dt.specializers[Tt]=getSpecializer(Ct),Ct})),lt.contextTracker&&(dt.context=lt.contextTracker),lt.dialect&&(dt.dialect=this.parseDialect(lt.dialect)),lt.strict!=null&&(dt.strict=lt.strict),lt.wrap&&(dt.wrappers=dt.wrappers.concat(lt.wrap)),lt.bufferLength!=null&&(dt.bufferLength=lt.bufferLength),dt}hasWrappers(){return this.wrappers.length>0}getName(lt){return this.termNames?this.termNames[lt]:String(lt<=this.maxNode&&this.nodeSet.types[lt].name||lt)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(lt){let dt=this.dynamicPrecedences;return dt==null?0:dt[lt]||0}parseDialect(lt){let dt=Object.keys(this.dialects),vt=dt.map(()=>!1);if(lt)for(let Et of lt.split(" ")){let Ct=dt.indexOf(Et);Ct>=0&&(vt[Ct]=!0)}let Tt=null;for(let Et=0;Et<dt.length;Et++)if(!vt[Et])for(let Ct=this.dialects[dt[Et]],Rt;(Rt=this.data[Ct++])!=65535;)(Tt||(Tt=new Uint8Array(this.maxTerm+1)))[Rt]=1;return new Dialect(lt,vt,Tt)}static deserialize(lt){return new LRParser(lt)}}function pair(ft,lt){return ft[lt]|ft[lt+1]<<16}function findFinished(ft){let lt=null;for(let dt of ft){let vt=dt.p.stoppedAt;(dt.pos==dt.p.stream.end||vt!=null&&dt.pos>vt)&&dt.p.parser.stateFlag(dt.state,2)&&(!lt||lt.score<dt.score)&&(lt=dt)}return lt}function getSpecializer(ft){if(ft.external){let lt=ft.extend?1:0;return(dt,vt)=>ft.external(dt,vt)<<1|lt}return ft.get}let nextTagID=0;class Tag{constructor(lt,dt,vt){this.set=lt,this.base=dt,this.modified=vt,this.id=nextTagID++}static define(lt){if(lt!=null&&lt.base)throw new Error("Can not derive from a modified tag");let dt=new Tag([],null,[]);if(dt.set.push(dt),lt)for(let vt of lt.set)dt.set.push(vt);return dt}static defineModifier(){let lt=new Modifier;return dt=>dt.modified.indexOf(lt)>-1?dt:Modifier.get(dt.base||dt,dt.modified.concat(lt).sort((vt,Tt)=>vt.id-Tt.id))}}let nextModifierID=0;class Modifier{constructor(){this.instances=[],this.id=nextModifierID++}static get(lt,dt){if(!dt.length)return lt;let vt=dt[0].instances.find(Rt=>Rt.base==lt&&sameArray$1(dt,Rt.modified));if(vt)return vt;let Tt=[],Et=new Tag(Tt,lt,dt);for(let Rt of dt)Rt.instances.push(Et);let Ct=powerSet(dt);for(let Rt of lt.set)if(!Rt.modified.length)for(let kt of Ct)Tt.push(Modifier.get(Rt,kt));return Et}}function sameArray$1(ft,lt){return ft.length==lt.length&&ft.every((dt,vt)=>dt==lt[vt])}function powerSet(ft){let lt=[[]];for(let dt=0;dt<ft.length;dt++)for(let vt=0,Tt=lt.length;vt<Tt;vt++)lt.push(lt[vt].concat(ft[dt]));return lt.sort((dt,vt)=>vt.length-dt.length)}function styleTags(ft){let lt=Object.create(null);for(let dt in ft){let vt=ft[dt];Array.isArray(vt)||(vt=[vt]);for(let Tt of dt.split(" "))if(Tt){let Et=[],Ct=2,Rt=Tt;for(let Ft=0;;){if(Rt=="..."&&Ft>0&&Ft+3==Tt.length){Ct=1;break}let Ut=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(Rt);if(!Ut)throw new RangeError("Invalid path: "+Tt);if(Et.push(Ut[0]=="*"?"":Ut[0][0]=='"'?JSON.parse(Ut[0]):Ut[0]),Ft+=Ut[0].length,Ft==Tt.length)break;let Zt=Tt[Ft++];if(Ft==Tt.length&&Zt=="!"){Ct=0;break}if(Zt!="/")throw new RangeError("Invalid path: "+Tt);Rt=Tt.slice(Ft)}let kt=Et.length-1,Dt=Et[kt];if(!Dt)throw new RangeError("Invalid path: "+Tt);let Bt=new Rule(vt,Ct,kt>0?Et.slice(0,kt):null);lt[Dt]=Bt.sort(lt[Dt])}}return ruleNodeProp.add(lt)}const ruleNodeProp=new NodeProp;class Rule{constructor(lt,dt,vt,Tt){this.tags=lt,this.mode=dt,this.context=vt,this.next=Tt}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(lt){return!lt||lt.depth<this.depth?(this.next=lt,this):(lt.next=this.sort(lt.next),lt)}get depth(){return this.context?this.context.length:0}}Rule.empty=new Rule([],2,null);function tagHighlighter(ft,lt){let dt=Object.create(null);for(let Et of ft)if(!Array.isArray(Et.tag))dt[Et.tag.id]=Et.class;else for(let Ct of Et.tag)dt[Ct.id]=Et.class;let{scope:vt,all:Tt=null}=lt||{};return{style:Et=>{let Ct=Tt;for(let Rt of Et)for(let kt of Rt.set){let Dt=dt[kt.id];if(Dt){Ct=Ct?Ct+" "+Dt:Dt;break}}return Ct},scope:vt}}function highlightTags(ft,lt){let dt=null;for(let vt of ft){let Tt=vt.style(lt);Tt&&(dt=dt?dt+" "+Tt:Tt)}return dt}function highlightTree(ft,lt,dt,vt=0,Tt=ft.length){let Et=new HighlightBuilder(vt,Array.isArray(lt)?lt:[lt],dt);Et.highlightRange(ft.cursor(),vt,Tt,"",Et.highlighters),Et.flush(Tt)}class HighlightBuilder{constructor(lt,dt,vt){this.at=lt,this.highlighters=dt,this.span=vt,this.class=""}startSpan(lt,dt){dt!=this.class&&(this.flush(lt),lt>this.at&&(this.at=lt),this.class=dt)}flush(lt){lt>this.at&&this.class&&this.span(this.at,lt,this.class)}highlightRange(lt,dt,vt,Tt,Et){let{type:Ct,from:Rt,to:kt}=lt;if(Rt>=vt||kt<=dt)return;Ct.isTop&&(Et=this.highlighters.filter(Zt=>!Zt.scope||Zt.scope(Ct)));let Dt=Tt,Bt=getStyleTags(lt)||Rule.empty,Ft=highlightTags(Et,Bt.tags);if(Ft&&(Dt&&(Dt+=" "),Dt+=Ft,Bt.mode==1&&(Tt+=(Tt?" ":"")+Ft)),this.startSpan(lt.from,Dt),Bt.opaque)return;let Ut=lt.tree&&lt.tree.prop(NodeProp.mounted);if(Ut&&Ut.overlay){let Zt=lt.node.enter(Ut.overlay[0].from+Rt,1),Kt=this.highlighters.filter(hn=>!hn.scope||hn.scope(Ut.tree.type)),ln=lt.firstChild();for(let hn=0,dn=Rt;;hn++){let pn=hn<Ut.overlay.length?Ut.overlay[hn]:null,mn=pn?pn.from+Rt:kt,On=Math.max(dt,dn),bn=Math.min(vt,mn);if(On<bn&&ln)for(;lt.from<bn&&(this.highlightRange(lt,On,bn,Tt,Et),this.startSpan(Math.min(bn,lt.to),Dt),!(lt.to>=mn||!lt.nextSibling())););if(!pn||mn>vt)break;dn=pn.to+Rt,dn>dt&&(this.highlightRange(Zt.cursor(),Math.max(dt,pn.from+Rt),Math.min(vt,dn),Tt,Kt),this.startSpan(dn,Dt))}ln&&lt.parent()}else if(lt.firstChild()){do if(!(lt.to<=dt)){if(lt.from>=vt)break;this.highlightRange(lt,dt,vt,Tt,Et),this.startSpan(Math.min(vt,lt.to),Dt)}while(lt.nextSibling());lt.parent()}}}function getStyleTags(ft){let lt=ft.type.prop(ruleNodeProp);for(;lt&&lt.context&&!ft.matchContext(lt.context);)lt=lt.next;return lt||null}const t=Tag.define,comment=t(),name=t(),typeName=t(name),propertyName=t(name),literal=t(),string=t(literal),number=t(literal),content=t(),heading=t(content),keyword=t(),operator=t(),punctuation=t(),bracket=t(punctuation),meta=t(),tags={comment,lineComment:t(comment),blockComment:t(comment),docComment:t(comment),name,variableName:t(name),typeName,tagName:t(typeName),propertyName,attributeName:t(propertyName),className:t(name),labelName:t(name),namespace:t(name),macroName:t(name),literal,string,docString:t(string),character:t(string),attributeValue:t(string),number,integer:t(number),float:t(number),bool:t(literal),regexp:t(literal),escape:t(literal),color:t(literal),url:t(literal),keyword,self:t(keyword),null:t(keyword),atom:t(keyword),unit:t(keyword),modifier:t(keyword),operatorKeyword:t(keyword),controlKeyword:t(keyword),definitionKeyword:t(keyword),moduleKeyword:t(keyword),operator,derefOperator:t(operator),arithmeticOperator:t(operator),logicOperator:t(operator),bitwiseOperator:t(operator),compareOperator:t(operator),updateOperator:t(operator),definitionOperator:t(operator),typeOperator:t(operator),controlOperator:t(operator),punctuation,separator:t(punctuation),bracket,angleBracket:t(bracket),squareBracket:t(bracket),paren:t(bracket),brace:t(bracket),content,heading,heading1:t(heading),heading2:t(heading),heading3:t(heading),heading4:t(heading),heading5:t(heading),heading6:t(heading),contentSeparator:t(content),list:t(content),quote:t(content),emphasis:t(content),strong:t(content),link:t(content),monospace:t(content),strikethrough:t(content),inserted:t(),deleted:t(),changed:t(),invalid:t(),meta,documentMeta:t(meta),annotation:t(meta),processingInstruction:t(meta),definition:Tag.defineModifier(),constant:Tag.defineModifier(),function:Tag.defineModifier(),standard:Tag.defineModifier(),local:Tag.defineModifier(),special:Tag.defineModifier()};tagHighlighter([{tag:tags.link,class:"tok-link"},{tag:tags.heading,class:"tok-heading"},{tag:tags.emphasis,class:"tok-emphasis"},{tag:tags.strong,class:"tok-strong"},{tag:tags.keyword,class:"tok-keyword"},{tag:tags.atom,class:"tok-atom"},{tag:tags.bool,class:"tok-bool"},{tag:tags.url,class:"tok-url"},{tag:tags.labelName,class:"tok-labelName"},{tag:tags.inserted,class:"tok-inserted"},{tag:tags.deleted,class:"tok-deleted"},{tag:tags.literal,class:"tok-literal"},{tag:tags.string,class:"tok-string"},{tag:tags.number,class:"tok-number"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],class:"tok-string2"},{tag:tags.variableName,class:"tok-variableName"},{tag:tags.local(tags.variableName),class:"tok-variableName tok-local"},{tag:tags.definition(tags.variableName),class:"tok-variableName tok-definition"},{tag:tags.special(tags.variableName),class:"tok-variableName2"},{tag:tags.definition(tags.propertyName),class:"tok-propertyName tok-definition"},{tag:tags.typeName,class:"tok-typeName"},{tag:tags.namespace,class:"tok-namespace"},{tag:tags.className,class:"tok-className"},{tag:tags.macroName,class:"tok-macroName"},{tag:tags.propertyName,class:"tok-propertyName"},{tag:tags.operator,class:"tok-operator"},{tag:tags.comment,class:"tok-comment"},{tag:tags.meta,class:"tok-meta"},{tag:tags.invalid,class:"tok-invalid"},{tag:tags.punctuation,class:"tok-punctuation"}]);const printKeyword=1,indent=189,dedent=190,newline$1=191,newlineBracketed=192,newlineEmpty=193,eof=194,ParenL=22,ParenthesizedExpression=23,TupleExpression=47,ComprehensionExpression=48,BracketL=53,ArrayExpression=54,ArrayComprehensionExpression=55,BraceL=57,DictionaryExpression=58,DictionaryComprehensionExpression=59,SetExpression=60,SetComprehensionExpression=61,ArgList=63,subscript=230,FormatReplacement=71,importList=255,ParamList=121,SequencePattern=142,MappingPattern=143,PatternArgList=146,newline$2=10,carriageReturn=13,space$1=32,tab=9,hash=35,parenOpen=40,dot=46,bracketed=new Set([ParenthesizedExpression,TupleExpression,ComprehensionExpression,importList,ArgList,ParamList,ArrayExpression,ArrayComprehensionExpression,subscript,SetExpression,SetComprehensionExpression,DictionaryExpression,DictionaryComprehensionExpression,FormatReplacement,SequencePattern,MappingPattern,PatternArgList]),newlines=new ExternalTokenizer((ft,lt)=>{if(ft.next<0)ft.acceptToken(eof);else if(!(ft.next!=newline$2&&ft.next!=carriageReturn))if(lt.context.depth<0)ft.acceptToken(newlineBracketed,1);else{ft.advance();let dt=0;for(;ft.next==space$1||ft.next==tab;)ft.advance(),dt++;let vt=ft.next==newline$2||ft.next==carriageReturn||ft.next==hash;ft.acceptToken(vt?newlineEmpty:newline$1,-dt)}},{contextual:!0,fallback:!0}),indentation=new ExternalTokenizer((ft,lt)=>{let dt=lt.context.depth;if(dt<0)return;let vt=ft.peek(-1);if((vt==newline$2||vt==carriageReturn)&&lt.context.depth>=0){let Tt=0,Et=0;for(;;){if(ft.next==space$1)Tt++;else if(ft.next==tab)Tt+=8-Tt%8;else break;ft.advance(),Et++}Tt!=dt&&ft.next!=newline$2&&ft.next!=carriageReturn&&ft.next!=hash&&(Tt<dt?ft.acceptToken(dedent,-Et):ft.acceptToken(indent))}});function IndentLevel(ft,lt){this.parent=ft,this.depth=lt,this.hash=(ft?ft.hash+ft.hash<<8:0)+lt+(lt<<4)}const topIndent$1=new IndentLevel(null,0);function countIndent(ft){let lt=0;for(let dt=0;dt<ft.length;dt++)lt+=ft.charCodeAt(dt)==tab?8-lt%8:1;return lt}const trackIndent=new ContextTracker({start:topIndent$1,reduce(ft,lt){return ft.depth<0&&bracketed.has(lt)?ft.parent:ft},shift(ft,lt,dt,vt){return lt==indent?new IndentLevel(ft,countIndent(vt.read(vt.pos,dt.pos))):lt==dedent?ft.parent:lt==ParenL||lt==BracketL||lt==BraceL?new IndentLevel(ft,-1):ft},hash(ft){return ft.hash}}),legacyPrint=new ExternalTokenizer(ft=>{for(let lt=0;lt<5;lt++){if(ft.next!="print".charCodeAt(lt))return;ft.advance()}if(!/\w/.test(String.fromCharCode(ft.next)))for(let lt=0;;lt++){let dt=ft.peek(lt);if(!(dt==space$1||dt==tab)){dt!=parenOpen&&dt!=dot&&dt!=newline$2&&dt!=carriageReturn&&dt!=hash&&ft.acceptToken(printKeyword);return}}}),pythonHighlighting=styleTags({'async "*" "**" FormatConversion FormatSpec':tags.modifier,"for while if elif else try except finally return raise break continue with pass assert await yield match case":tags.controlKeyword,"in not and or is del":tags.operatorKeyword,"from def class global nonlocal lambda":tags.definitionKeyword,import:tags.moduleKeyword,"with as print":tags.keyword,Boolean:tags.bool,None:tags.null,VariableName:tags.variableName,"CallExpression/VariableName":tags.function(tags.variableName),"FunctionDefinition/VariableName":tags.function(tags.definition(tags.variableName)),"ClassDefinition/VariableName":tags.definition(tags.className),PropertyName:tags.propertyName,"CallExpression/MemberExpression/PropertyName":tags.function(tags.propertyName),Comment:tags.lineComment,Number:tags.number,String:tags.string,FormatString:tags.special(tags.string),UpdateOp:tags.updateOperator,"ArithOp!":tags.arithmeticOperator,BitOp:tags.bitwiseOperator,CompareOp:tags.compareOperator,AssignOp:tags.definitionOperator,Ellipsis:tags.punctuation,At:tags.meta,"( )":tags.paren,"[ ]":tags.squareBracket,"{ }":tags.brace,".":tags.derefOperator,", ;":tags.separator}),spec_identifier$1={__proto__:null,await:40,or:50,and:52,in:56,not:58,is:60,if:66,else:68,lambda:72,yield:90,from:92,async:98,for:100,None:152,True:154,False:154,del:168,pass:172,break:176,continue:180,return:184,raise:192,import:196,as:198,global:202,nonlocal:204,assert:208,elif:218,while:222,try:228,except:230,finally:232,with:236,def:240,class:250,match:261,case:267},parser$1=LRParser.deserialize({version:14,states:"!L`O`Q$IXOOO%fQ$I[O'#G|OOQ$IS'#Cm'#CmOOQ$IS'#Cn'#CnO'UQ$IWO'#ClO(wQ$I[O'#G{OOQ$IS'#G|'#G|OOQ$IS'#DS'#DSOOQ$IS'#G{'#G{O)eQ$IWO'#CsO)uQ$IWO'#DdO*VQ$IWO'#DhOOQ$IS'#Ds'#DsO*jO`O'#DsO*rOpO'#DsO*zO!bO'#DtO+VO#tO'#DtO+bO&jO'#DtO+mO,UO'#DtO-oQ$I[O'#GmOOQ$IS'#Gm'#GmO'UQ$IWO'#GlO/RQ$I[O'#GlOOQ$IS'#E]'#E]O/jQ$IWO'#E^OOQ$IS'#Gk'#GkO/tQ$IWO'#GjOOQ$IV'#Gj'#GjO0PQ$IWO'#FPOOQ$IS'#GX'#GXO0UQ$IWO'#FOOOQ$IV'#Hx'#HxOOQ$IV'#Gi'#GiOOQ$IT'#Fh'#FhQ`Q$IXOOO'UQ$IWO'#CoO0dQ$IWO'#C{O0kQ$IWO'#DPO0yQ$IWO'#HQO1ZQ$I[O'#EQO'UQ$IWO'#EROOQ$IS'#ET'#ETOOQ$IS'#EV'#EVOOQ$IS'#EX'#EXO1oQ$IWO'#EZO2VQ$IWO'#E_O0PQ$IWO'#EaO2jQ$I[O'#EaO0PQ$IWO'#EdO/jQ$IWO'#EgO/jQ$IWO'#EkO/jQ$IWO'#EnO2uQ$IWO'#EpO2|Q$IWO'#EuO3XQ$IWO'#EqO/jQ$IWO'#EuO0PQ$IWO'#EwO0PQ$IWO'#E|O3^Q$IWO'#FROOQ$IS'#Cc'#CcOOQ$IS'#Cd'#CdOOQ$IS'#Ce'#CeOOQ$IS'#Cf'#CfOOQ$IS'#Cg'#CgOOQ$IS'#Ch'#ChOOQ$IS'#Cj'#CjO'UQ$IWO,58|O'UQ$IWO,58|O'UQ$IWO,58|O'UQ$IWO,58|O'UQ$IWO,58|O'UQ$IWO,58|O3eQ$IWO'#DmOOQ$IS,5:W,5:WO3xQ$IWO'#H[OOQ$IS,5:Z,5:ZO4VQ%1`O,5:ZO4[Q$I[O,59WO0dQ$IWO,59`O0dQ$IWO,59`O0dQ$IWO,59`O6zQ$IWO,59`O7PQ$IWO,59`O7WQ$IWO,59hO7_Q$IWO'#G{O8eQ$IWO'#GzOOQ$IS'#Gz'#GzOOQ$IS'#DY'#DYO8|Q$IWO,59_O'UQ$IWO,59_O9[Q$IWO,59_O9aQ$IWO,5:PO'UQ$IWO,5:POOQ$IS,5:O,5:OO9oQ$IWO,5:OO9tQ$IWO,5:VO'UQ$IWO,5:VO'UQ$IWO,5:TOOQ$IS,5:S,5:SO:VQ$IWO,5:SO:[Q$IWO,5:UOOOO'#Fp'#FpO:aO`O,5:_OOQ$IS,5:_,5:_OOOO'#Fq'#FqO:iOpO,5:_O:qQ$IWO'#DuOOOO'#Fr'#FrO;RO!bO,5:`OOQ$IS,5:`,5:`OOOO'#Fu'#FuO;^O#tO,5:`OOOO'#Fv'#FvO;iO&jO,5:`OOOO'#Fw'#FwO;tO,UO,5:`OOQ$IS'#Fx'#FxO<PQ$I[O,5:dO>qQ$I[O,5=WO?[Q%GlO,5=WO?{Q$I[O,5=WOOQ$IS,5:x,5:xO@dQ$IXO'#GQOAsQ$IWO,5;TOOQ$IV,5=U,5=UOBOQ$I[O'#HtOBgQ$IWO,5;kOOQ$IS-E:V-E:VOOQ$IV,5;j,5;jO3SQ$IWO'#EwOOQ$IT-E9f-E9fOBoQ$I[O,59ZODvQ$I[O,59gOEaQ$IWO'#G}OElQ$IWO'#G}O0PQ$IWO'#G}OEwQ$IWO'#DROFPQ$IWO,59kOFUQ$IWO'#HRO'UQ$IWO'#HRO/jQ$IWO,5=lOOQ$IS,5=l,5=lO/jQ$IWO'#D|OOQ$IS'#D}'#D}OFsQ$IWO'#FzOGTQ$IWO,58zOGTQ$IWO,58zO)hQ$IWO,5:jOGcQ$I[O'#HTOOQ$IS,5:m,5:mOOQ$IS,5:u,5:uOGvQ$IWO,5:yOHXQ$IWO,5:{OOQ$IS'#F}'#F}OHgQ$I[O,5:{OHuQ$IWO,5:{OHzQ$IWO'#HwOOQ$IS,5;O,5;OOIYQ$IWO'#HsOOQ$IS,5;R,5;RO3XQ$IWO,5;VO3XQ$IWO,5;YOIkQ$I[O'#HyO'UQ$IWO'#HyOIuQ$IWO,5;[O2uQ$IWO,5;[O/jQ$IWO,5;aO0PQ$IWO,5;cOIzQ$IXO'#ElOKTQ$IZO,5;]ONiQ$IWO'#HzO3XQ$IWO,5;aONtQ$IWO,5;cONyQ$IWO,5;hO! RQ$I[O,5;mO'UQ$IWO,5;mO!#uQ$I[O1G.hO!#|Q$I[O1G.hO!&mQ$I[O1G.hO!&wQ$I[O1G.hO!)bQ$I[O1G.hO!)uQ$I[O1G.hO!*YQ$IWO'#HZO!*hQ$I[O'#GmO/jQ$IWO'#HZO!*rQ$IWO'#HYOOQ$IS,5:X,5:XO!*zQ$IWO,5:XO!+PQ$IWO'#H]O!+[Q$IWO'#H]O!+oQ$IWO,5=vOOQ$IS'#Dq'#DqOOQ$IS1G/u1G/uOOQ$IS1G.z1G.zO!,oQ$I[O1G.zO!,vQ$I[O1G.zO0dQ$IWO1G.zO!-cQ$IWO1G/SOOQ$IS'#DX'#DXO/jQ$IWO,59rOOQ$IS1G.y1G.yO!-jQ$IWO1G/cO!-zQ$IWO1G/cO!.SQ$IWO1G/dO'UQ$IWO'#HSO!.XQ$IWO'#HSO!.^Q$I[O1G.yO!.nQ$IWO,59gO!/tQ$IWO,5=rO!0UQ$IWO,5=rO!0^Q$IWO1G/kO!0cQ$I[O1G/kOOQ$IS1G/j1G/jO!0sQ$IWO,5=mO!1jQ$IWO,5=mO/jQ$IWO1G/oO!2XQ$IWO1G/qO!2^Q$I[O1G/qO!2nQ$I[O1G/oOOQ$IS1G/n1G/nOOQ$IS1G/p1G/pOOOO-E9n-E9nOOQ$IS1G/y1G/yOOOO-E9o-E9oO!3OQ$IWO'#HhO/jQ$IWO'#HhO!3^Q$IWO,5:aOOOO-E9p-E9pOOQ$IS1G/z1G/zOOOO-E9s-E9sOOOO-E9t-E9tOOOO-E9u-E9uOOQ$IS-E9v-E9vO!3iQ%GlO1G2rO!4YQ$I[O1G2rO'UQ$IWO,5<eOOQ$IS,5<e,5<eOOQ$IS-E9w-E9wOOQ$IS,5<l,5<lOOQ$IS-E:O-E:OOOQ$IV1G0o1G0oO0PQ$IWO'#F|O!4qQ$I[O,5>`OOQ$IS1G1V1G1VO!5YQ$IWO1G1VOOQ$IS'#DT'#DTO/jQ$IWO,5=iOOQ$IS,5=i,5=iO!5_Q$IWO'#FiO!5jQ$IWO,59mO!5rQ$IWO1G/VO!5|Q$I[O,5=mOOQ$IS1G3W1G3WOOQ$IS,5:h,5:hO!6mQ$IWO'#GlOOQ$IS,5<f,5<fOOQ$IS-E9x-E9xO!7OQ$IWO1G.fOOQ$IS1G0U1G0UO!7^Q$IWO,5=oO!7nQ$IWO,5=oO/jQ$IWO1G0eO/jQ$IWO1G0eO0PQ$IWO1G0gOOQ$IS-E9{-E9{O!8PQ$IWO1G0gO!8[Q$IWO1G0gO!8aQ$IWO,5>cO!8oQ$IWO,5>cO!8}Q$IWO,5>_O!9eQ$IWO,5>_O!9vQ$IZO1G0qO!=XQ$IZO1G0tO!@gQ$IWO,5>eO!@qQ$IWO,5>eO!@yQ$I[O,5>eO/jQ$IWO1G0vO!ATQ$IWO1G0vO3XQ$IWO1G0{ONtQ$IWO1G0}OOQ$IV,5;W,5;WO!AYQ$IYO,5;WO!A_Q$IZO1G0wO!DsQ$IWO'#GUO3XQ$IWO1G0wO3XQ$IWO1G0wO!EQQ$IWO,5>fO!E_Q$IWO,5>fO0PQ$IWO,5>fOOQ$IV1G0{1G0{O!EgQ$IWO'#EyO!ExQ%1`O1G0}OOQ$IV1G1S1G1SO3XQ$IWO1G1SO!FQQ$IWO'#FTOOQ$IV1G1X1G1XO! RQ$I[O1G1XOOQ$IS,5=u,5=uOOQ$IS'#Dn'#DnO/jQ$IWO,5=uO!FVQ$IWO,5=tO!FjQ$IWO,5=tOOQ$IS1G/s1G/sO!FrQ$IWO,5=wO!GSQ$IWO,5=wO!G[Q$IWO,5=wO!GoQ$IWO,5=wO!HPQ$IWO,5=wOOQ$IS1G3b1G3bOOQ$IS7+$f7+$fO!5rQ$IWO7+$nO!IrQ$IWO1G.zO!IyQ$IWO1G.zOOQ$IS1G/^1G/^OOQ$IS,5<V,5<VO'UQ$IWO,5<VOOQ$IS7+$}7+$}O!JQQ$IWO7+$}OOQ$IS-E9i-E9iOOQ$IS7+%O7+%OO!JbQ$IWO,5=nO'UQ$IWO,5=nOOQ$IS7+$e7+$eO!JgQ$IWO7+$}O!JoQ$IWO7+%OO!JtQ$IWO1G3^OOQ$IS7+%V7+%VO!KUQ$IWO1G3^O!K^Q$IWO7+%VOOQ$IS,5<U,5<UO'UQ$IWO,5<UO!KcQ$IWO1G3XOOQ$IS-E9h-E9hO!LYQ$IWO7+%ZOOQ$IS7+%]7+%]O!LhQ$IWO1G3XO!MVQ$IWO7+%]O!M[Q$IWO1G3_O!MlQ$IWO1G3_O!MtQ$IWO7+%ZO!MyQ$IWO,5>SO!NaQ$IWO,5>SO!NaQ$IWO,5>SO!NoO!LQO'#DwO!NzOSO'#HiOOOO1G/{1G/{O# PQ$IWO1G/{O# XQ%GlO7+(^O# xQ$I[O1G2PP#!cQ$IWO'#FyOOQ$IS,5<h,5<hOOQ$IS-E9z-E9zOOQ$IS7+&q7+&qOOQ$IS1G3T1G3TOOQ$IS,5<T,5<TOOQ$IS-E9g-E9gOOQ$IS7+$q7+$qO#!pQ$IWO,5=WO##ZQ$IWO,5=WO##lQ$I[O,5<WO#$PQ$IWO1G3ZOOQ$IS-E9j-E9jOOQ$IS7+&P7+&PO#$aQ$IWO7+&POOQ$IS7+&R7+&RO#$oQ$IWO'#HvO0PQ$IWO'#HuO#%TQ$IWO7+&ROOQ$IS,5<k,5<kO#%`Q$IWO1G3}OOQ$IS-E9}-E9}OOQ$IS,5<g,5<gO#%nQ$IWO1G3yOOQ$IS-E9y-E9yO#&UQ$IZO7+&]O!DsQ$IWO'#GSO3XQ$IWO7+&]O3XQ$IWO7+&`O#)gQ$I[O,5<oO'UQ$IWO,5<oO#)qQ$IWO1G4POOQ$IS-E:R-E:RO#){Q$IWO1G4PO3XQ$IWO7+&bO/jQ$IWO7+&bOOQ$IV7+&g7+&gO!ExQ%1`O7+&iO#*TQ$IXO1G0rOOQ$IV-E:S-E:SO3XQ$IWO7+&cO3XQ$IWO7+&cOOQ$IV,5<p,5<pO#+yQ$IWO,5<pOOQ$IV7+&c7+&cO#,UQ$IZO7+&cO#/dQ$IWO,5<qO#/oQ$IWO1G4QOOQ$IS-E:T-E:TO#/|Q$IWO1G4QO#0UQ$IWO'#H|O#0dQ$IWO'#H|O0PQ$IWO'#H|OOQ$IS'#H|'#H|O#0oQ$IWO'#H{OOQ$IS,5;e,5;eO#0wQ$IWO,5;eO/jQ$IWO'#E{OOQ$IV7+&i7+&iO3XQ$IWO7+&iOOQ$IV7+&n7+&nO#0|Q$IYO,5;oOOQ$IV7+&s7+&sOOQ$IS1G3a1G3aOOQ$IS,5<Y,5<YO#1RQ$IWO1G3`OOQ$IS-E9l-E9lO#1fQ$IWO,5<ZO#1qQ$IWO,5<ZO#2UQ$IWO1G3cOOQ$IS-E9m-E9mO#2fQ$IWO1G3cO#2nQ$IWO1G3cO#3OQ$IWO1G3cO#2fQ$IWO1G3cOOQ$IS<<HY<<HYO#3ZQ$I[O1G1qOOQ$IS<<Hi<<HiP#3hQ$IWO'#FkO7WQ$IWO1G3YO#3uQ$IWO1G3YO#3zQ$IWO<<HiOOQ$IS<<Hj<<HjO#4[Q$IWO7+(xOOQ$IS<<Hq<<HqO#4lQ$I[O1G1pP#5]Q$IWO'#FjO#5jQ$IWO7+(yO#5zQ$IWO7+(yO#6SQ$IWO<<HuO#6XQ$IWO7+(sOOQ$IS<<Hw<<HwO#7OQ$IWO,5<XO'UQ$IWO,5<XOOQ$IS-E9k-E9kOOQ$IS<<Hu<<HuOOQ$IS,5<_,5<_O/jQ$IWO,5<_O#7TQ$IWO1G3nOOQ$IS-E9q-E9qO#7kQ$IWO1G3nOOOO'#Ft'#FtO#7yO!LQO,5:cOOOO,5>T,5>TOOOO7+%g7+%gO#8UQ$IWO1G2rO#8oQ$IWO1G2rP'UQ$IWO'#FlO/jQ$IWO<<IkO#9QQ$IWO,5>bO#9cQ$IWO,5>bO0PQ$IWO,5>bO#9tQ$IWO,5>aOOQ$IS<<Im<<ImP0PQ$IWO'#GPP/jQ$IWO'#F{OOQ$IV-E:Q-E:QO3XQ$IWO<<IwOOQ$IV,5<n,5<nO3XQ$IWO,5<nOOQ$IV<<Iw<<IwOOQ$IV<<Iz<<IzO#9yQ$I[O1G2ZP#:TQ$IWO'#GTO#:[Q$IWO7+)kO#:fQ$IZO<<I|O3XQ$IWO<<I|OOQ$IV<<JT<<JTO3XQ$IWO<<JTOOQ$IV'#GR'#GRO#=tQ$IZO7+&^OOQ$IV<<I}<<I}O#?pQ$IZO<<I}OOQ$IV1G2[1G2[O0PQ$IWO1G2[O3XQ$IWO<<I}O0PQ$IWO1G2]P/jQ$IWO'#GVO#COQ$IWO7+)lO#C]Q$IWO7+)lOOQ$IS'#Ez'#EzO/jQ$IWO,5>hO#CeQ$IWO,5>hOOQ$IS,5>h,5>hO#CpQ$IWO,5>gO#DRQ$IWO,5>gOOQ$IS1G1P1G1POOQ$IS,5;g,5;gO#DZQ$IWO1G1ZP#D`Q$IWO'#FnO#DpQ$IWO1G1uO#ETQ$IWO1G1uO#EeQ$IWO1G1uP#EpQ$IWO'#FoO#E}Q$IWO7+(}O#F_Q$IWO7+(}O#F_Q$IWO7+(}O#FgQ$IWO7+(}O#FwQ$IWO7+(tO7WQ$IWO7+(tOOQ$ISAN>TAN>TO#GbQ$IWO<<LeOOQ$ISAN>aAN>aO/jQ$IWO1G1sO#GrQ$I[O1G1sP#G|Q$IWO'#FmOOQ$IS1G1y1G1yP#HZQ$IWO'#FsO#HhQ$IWO7+)YOOOO-E9r-E9rO#IOQ$IWO7+(^OOQ$ISAN?VAN?VO#IiQ$IWO,5<jO#I}Q$IWO1G3|OOQ$IS-E9|-E9|O#J`Q$IWO1G3|OOQ$IS1G3{1G3{OOQ$IVAN?cAN?cOOQ$IV1G2Y1G2YO3XQ$IWOAN?hO#JqQ$IZOAN?hOOQ$IVAN?oAN?oOOQ$IV-E:P-E:POOQ$IV<<Ix<<IxO3XQ$IWOAN?iO3XQ$IWO7+'vOOQ$IVAN?iAN?iOOQ$IS7+'w7+'wO#NPQ$IWO<<MWOOQ$IS1G4S1G4SO/jQ$IWO1G4SOOQ$IS,5<r,5<rO#N^Q$IWO1G4ROOQ$IS-E:U-E:UOOQ$IU'#GY'#GYO#NoQ$IYO7+&uO#NzQ$IWO'#FUO$ rQ$IWO7+'aO$!SQ$IWO7+'aOOQ$IS7+'a7+'aO$!_Q$IWO<<LiO$!oQ$IWO<<LiO$!oQ$IWO<<LiO$!wQ$IWO'#HUOOQ$IS<<L`<<L`O$#RQ$IWO<<L`OOQ$IS7+'_7+'_O0PQ$IWO1G2UP0PQ$IWO'#GOO$#lQ$IWO7+)hO$#}Q$IWO7+)hOOQ$IVG25SG25SO3XQ$IWOG25SOOQ$IVG25TG25TOOQ$IV<<Kb<<KbOOQ$IS7+)n7+)nP$$`Q$IWO'#GWOOQ$IU-E:W-E:WOOQ$IV<<Ja<<JaO$%SQ$I[O'#FWOOQ$IS'#FY'#FYO$%dQ$IWO'#FXO$&UQ$IWO'#FXOOQ$IS'#FX'#FXO$&ZQ$IWO'#IOO#NzQ$IWO'#F`O#NzQ$IWO'#F`O$&rQ$IWO'#FaO#NzQ$IWO'#FbO$&yQ$IWO'#IPOOQ$IS'#IP'#IPO$'hQ$IWO,5;pOOQ$IS<<J{<<J{O$'pQ$IWO<<J{O$(QQ$IWOANBTO$(bQ$IWOANBTO$(jQ$IWO'#HVOOQ$IS'#HV'#HVO0kQ$IWO'#DaO$)TQ$IWO,5=pOOQ$ISANAzANAzOOQ$IS7+'p7+'pO$)lQ$IWO<<MSOOQ$IVLD*nLD*nO4VQ%1`O'#G[O$)}Q$I[O,5;yO#NzQ$IWO'#FdOOQ$IS,5;},5;}OOQ$IS'#FZ'#FZO$*oQ$IWO,5;sO$*tQ$IWO,5;sOOQ$IS'#F^'#F^O#NzQ$IWO'#GZO$+fQ$IWO,5;wO$,QQ$IWO,5>jO$,bQ$IWO,5>jO0PQ$IWO,5;vO$,sQ$IWO,5;zO$,xQ$IWO,5;zO#NzQ$IWO'#IQO$,}Q$IWO'#IQO$-SQ$IWO,5;{OOQ$IS,5;|,5;|O'UQ$IWO'#FgOOQ$IU1G1[1G1[O3XQ$IWO1G1[OOQ$ISAN@gAN@gO$-XQ$IWOG27oO$-iQ$IWO,59{OOQ$IS1G3[1G3[OOQ$IS,5<v,5<vOOQ$IS-E:Y-E:YO$-nQ$I[O'#FWO$-uQ$IWO'#IRO$.TQ$IWO'#IRO$.]Q$IWO,5<OOOQ$IS1G1_1G1_O$.bQ$IWO1G1_O$.gQ$IWO,5<uOOQ$IS-E:X-E:XO$/RQ$IWO,5<yO$/jQ$IWO1G4UOOQ$IS-E:]-E:]OOQ$IS1G1b1G1bOOQ$IS1G1f1G1fO$/zQ$IWO,5>lO#NzQ$IWO,5>lOOQ$IS1G1g1G1gO$0YQ$I[O,5<ROOQ$IU7+&v7+&vO$!wQ$IWO1G/gO#NzQ$IWO,5<PO$0aQ$IWO,5>mO$0hQ$IWO,5>mOOQ$IS1G1j1G1jOOQ$IS7+&y7+&yP#NzQ$IWO'#G_O$0pQ$IWO1G4WO$0zQ$IWO1G4WO$1SQ$IWO1G4WOOQ$IS7+%R7+%RO$1bQ$IWO1G1kO$1pQ$I[O'#FWO$1wQ$IWO,5<xOOQ$IS,5<x,5<xO$2VQ$IWO1G4XOOQ$IS-E:[-E:[O#NzQ$IWO,5<wO$2^Q$IWO,5<wO$2cQ$IWO7+)rOOQ$IS-E:Z-E:ZO$2mQ$IWO7+)rO#NzQ$IWO,5<QP#NzQ$IWO'#G^O$2uQ$IWO1G2cO#NzQ$IWO1G2cP$3TQ$IWO'#G]O$3[Q$IWO<<M^O$3fQ$IWO1G1lO$3tQ$IWO7+'}O7WQ$IWO'#C{O7WQ$IWO,59`O7WQ$IWO,59`O7WQ$IWO,59`O$4SQ$I[O,5=WO7WQ$IWO1G.zO/jQ$IWO1G/VO/jQ$IWO7+$nP$4gQ$IWO'#FyO'UQ$IWO'#GlO$4tQ$IWO,59`O$4yQ$IWO,59`O$5QQ$IWO,59kO$5VQ$IWO1G/SO0kQ$IWO'#DPO7WQ$IWO,59h",stateData:"$5m~O%[OS%XOS%WOSQOS~OPhOTeOdsOfXOmtOq!SOtuO}vO!O!PO!R!VO!S!UO!VYO!ZZO!fdO!mdO!ndO!odO!vxO!xyO!zzO!|{O#O|O#S}O#U!OO#X!QO#Y!QO#[!RO#c!TO#f!WO#j!XO#l!YO#q!ZO#tlO#v![O%VqO%gQO%hQO%lRO%mVO&R[O&S]O&V^O&Y_O&``O&caO&ebO~OT!bO]!bO_!cOf!jO!V!lO!d!nO%b!]O%c!^O%d!_O%e!`O%f!`O%g!aO%h!aO%i!bO%j!bO%k!bO~Oi%pXj%pXk%pXl%pXm%pXn%pXq%pXx%pXy%pX!s%pX#^%pX%V%pX%Y%pX%r%pXe%pX!R%pX!S%pX%s%pX!U%pX!Y%pX!O%pX#V%pXr%pX!j%pX~P$bOdsOfXO!VYO!ZZO!fdO!mdO!ndO!odO%gQO%hQO%lRO%mVO&R[O&S]O&V^O&Y_O&``O&caO&ebO~Ox%oXy%oX#^%oX%V%oX%Y%oX%r%oX~Oi!qOj!rOk!pOl!pOm!sOn!tOq!uO!s%oX~P(cOT!{Om/iOt/wO}vO~P'UOT#OOm/iOt/wO!U#PO~P'UOT#SO_#TOm/iOt/wO!Y#UO~P'UO&T#XO&U#ZO~O&W#[O&X#ZO~O!Z#^O&Z#_O&_#aO~O!Z#^O&a#bO&b#aO~O!Z#^O&U#aO&d#dO~O!Z#^O&X#aO&f#fO~OT%aX]%aX_%aXf%aXi%aXj%aXk%aXl%aXm%aXn%aXq%aXx%aX!V%aX!d%aX%b%aX%c%aX%d%aX%e%aX%f%aX%g%aX%h%aX%i%aX%j%aX%k%aXe%aX!R%aX!S%aX~O&R[O&S]O&V^O&Y_O&``O&caO&ebOy%aX!s%aX#^%aX%V%aX%Y%aX%r%aX%s%aX!U%aX!Y%aX!O%aX#V%aXr%aX!j%aX~P+xOx#kOy%`X!s%`X#^%`X%V%`X%Y%`X%r%`X~Om/iOt/wO~P'UO#^#nO%V#pO%Y#pO~O%mVO~O!R#uO#l!YO#q!ZO#tlO~OmtO~P'UOT#zO_#{O%mVOyuP~OT$POm/iOt/wO!O$QO~P'UOy$SO!s$XO%r$TO#^!tX%V!tX%Y!tX~OT$POm/iOt/wO#^!}X%V!}X%Y!}X~P'UOm/iOt/wO#^#RX%V#RX%Y#RX~P'UO!d$_O!m$_O%mVO~OT$iO~P'UO!S$kO#j$lO#l$mO~Oy$nO~OT$uO~P'UOT%OO_%OOe%QOm/iOt/wO~P'UOm/iOt/wOy%TO~P'UO&Q%VO~O_!cOf!jO!V!lO!d!nOT`a]`ai`aj`ak`al`am`an`aq`ax`ay`a!s`a#^`a%V`a%Y`a%b`a%c`a%d`a%e`a%f`a%g`a%h`a%i`a%j`a%k`a%r`ae`a!R`a!S`a%s`a!U`a!Y`a!O`a#V`ar`a!j`a~Ol%[O~Om%[O~P'UOm/iO~P'UOi/kOj/lOk/jOl/jOm/sOn/tOq/xOe%oX!R%oX!S%oX%s%oX!U%oX!Y%oX!O%oX#V%oX!j%oX~P(cO%s%^Oe%nXx%nX!R%nX!S%nX!U%nXy%nX~Oe%`Ox%aO!R%eO!S%dO~Oe%`O~Ox%hO!R%eO!S%dO!U%zX~O!U%lO~Ox%mOy%oO!R%eO!S%dO!Y%uX~O!Y%sO~O!Y%tO~O&T#XO&U%vO~O&W#[O&X%vO~OT%yOm/iOt/wO}vO~P'UO!Z#^O&Z#_O&_%|O~O!Z#^O&a#bO&b%|O~O!Z#^O&U%|O&d#dO~O!Z#^O&X%|O&f#fO~OT!la]!la_!laf!lai!laj!lak!lal!lam!lan!laq!lax!lay!la!V!la!d!la!s!la#^!la%V!la%Y!la%b!la%c!la%d!la%e!la%f!la%g!la%h!la%i!la%j!la%k!la%r!lae!la!R!la!S!la%s!la!U!la!Y!la!O!la#V!lar!la!j!la~P#yOx&ROy%`a!s%`a#^%`a%V%`a%Y%`a%r%`a~P$bOT&TOmtOtuOy%`a!s%`a#^%`a%V%`a%Y%`a%r%`a~P'UOx&ROy%`a!s%`a#^%`a%V%`a%Y%`a%r%`a~OPhOTeOmtOtuO}vO!O!PO!vxO!xyO!zzO!|{O#O|O#S}O#U!OO#X!QO#Y!QO#[!RO#^$tX%V$tX%Y$tX~P'UO#^#nO%V&YO%Y&YO~O!d&ZOf&hX%V&hX#V&hX#^&hX%Y&hX#U&hX~Of!jO%V&]O~Oicajcakcalcamcancaqcaxcayca!sca#^ca%Vca%Yca%rcaeca!Rca!Sca%sca!Uca!Yca!Oca#Vcarca!jca~P$bOqoaxoayoa#^oa%Voa%Yoa%roa~Oi!qOj!rOk!pOl!pOm!sOn!tO!soa~PD_O%r&_Ox%qXy%qX~O%mVOx%qXy%qX~Ox&bOyuX~Oy&dO~Ox%mO#^%uX%V%uX%Y%uXe%uXy%uX!Y%uX!j%uX%r%uX~OT/rOm/iOt/wO}vO~P'UO%r$TO#^Sa%VSa%YSa~Ox&mO#^%wX%V%wX%Y%wXl%wX~P$bOx&pO!O&oO#^#Ra%V#Ra%Y#Ra~O#V&qO#^#Ta%V#Ta%Y#Ta~O!d$_O!m$_O#U&sO%mVO~O#U&sO~Ox&uO#^&kX%V&kX%Y&kX~Ox&wO#^&gX%V&gX%Y&gXy&gX~Ox&{Ol&mX~P$bOl'OO~OPhOTeOmtOtuO}vO!O!PO!vxO!xyO!zzO!|{O#O|O#S}O#U!OO#X!QO#Y!QO#[!RO%V'TO~P'UOr'XO#g'VO#h'WOP#eaT#ead#eaf#eam#eaq#eat#ea}#ea!O#ea!R#ea!S#ea!V#ea!Z#ea!f#ea!m#ea!n#ea!o#ea!v#ea!x#ea!z#ea!|#ea#O#ea#S#ea#U#ea#X#ea#Y#ea#[#ea#c#ea#f#ea#j#ea#l#ea#q#ea#t#ea#v#ea%S#ea%V#ea%g#ea%h#ea%l#ea%m#ea&R#ea&S#ea&V#ea&Y#ea&`#ea&c#ea&e#ea%U#ea%Y#ea~Ox'YO#V'[Oy&nX~Of'^O~Of!jOy$nO~Oy'bO~P$bOT!bO]!bO_!cOf!jO!V!lO!d!nO%d!_O%e!`O%f!`O%g!aO%h!aO%i!bO%j!bO%k!bOiUijUikUilUimUinUiqUixUiyUi!sUi#^Ui%VUi%YUi%bUi%rUieUi!RUi!SUi%sUi!UUi!YUi!OUi#VUirUi!jUi~O%c!^O~P! YO%cUi~P! YOT!bO]!bO_!cOf!jO!V!lO!d!nO%g!aO%h!aO%i!bO%j!bO%k!bOiUijUikUilUimUinUiqUixUiyUi!sUi#^Ui%VUi%YUi%bUi%cUi%dUi%rUieUi!RUi!SUi%sUi!UUi!YUi!OUi#VUirUi!jUi~O%e!`O%f!`O~P!$TO%eUi%fUi~P!$TO_!cOf!jO!V!lO!d!nOiUijUikUilUimUinUiqUixUiyUi!sUi#^Ui%VUi%YUi%bUi%cUi%dUi%eUi%fUi%gUi%hUi%rUieUi!RUi!SUi%sUi!UUi!YUi!OUi#VUirUi!jUi~OT!bO]!bO%i!bO%j!bO%k!bO~P!'ROTUi]Ui%iUi%jUi%kUi~P!'RO!R%eO!S%dOe%}Xx%}X~O%r'fO%s'fO~P+xOx'hOe%|X~Oe'jO~Ox'kOy'mO!U&PX~Om/iOt/wOx'kOy'nO!U&PX~P'UO!U'pO~Ok!pOl!pOm!sOn!tOihiqhixhiyhi!shi#^hi%Vhi%Yhi%rhi~Oj!rO~P!+tOjhi~P!+tOi/kOj/lOk/jOl/jOm/sOn/tO~Or'rO~P!,}OT'wOe'xOm/iOt/wO~P'UOe'xOx'yO~Oe'{O~O!S'}O~Oe(OOx'yO!R%eO!S%dO~P$bOi/kOj/lOk/jOl/jOm/sOn/tOeoa!Roa!Soa%soa!Uoa!Yoa!Ooa#Voaroa!joa~PD_OT'wOm/iOt/wO!U%za~P'UOx(RO!U%za~O!U(SO~Ox(RO!R%eO!S%dO!U%za~P$bOT(WOm/iOt/wO!Y%ua#^%ua%V%ua%Y%uae%uay%ua!j%ua%r%ua~P'UOx(XO!Y%ua#^%ua%V%ua%Y%uae%uay%ua!j%ua%r%ua~O!Y([O~Ox(XO!R%eO!S%dO!Y%ua~P$bOx(_O!R%eO!S%dO!Y%{a~P$bOx(bOy&[X!Y&[X!j&[X~Oy(eO!Y(gO!j(hO~OT&TOmtOtuOy%`i!s%`i#^%`i%V%`i%Y%`i%r%`i~P'UOx(iOy%`i!s%`i#^%`i%V%`i%Y%`i%r%`i~O!d&ZOf&ha%V&ha#V&ha#^&ha%Y&ha#U&ha~O%V(nO~OT#zO_#{O%mVO~Ox&bOyua~OmtOtuO~P'UOx(XO#^%ua%V%ua%Y%uae%uay%ua!Y%ua!j%ua%r%ua~P$bOx(sO#^%`X%V%`X%Y%`X%r%`X~O%r$TO#^Si%VSi%YSi~O#^%wa%V%wa%Y%wal%wa~P'UOx(vO#^%wa%V%wa%Y%wal%wa~OT(zOf(|O%mVO~O#U(}O~O%mVO#^&ka%V&ka%Y&ka~Ox)PO#^&ka%V&ka%Y&ka~Om/iOt/wO#^&ga%V&ga%Y&gay&ga~P'UOx)SO#^&ga%V&ga%Y&gay&ga~Or)WO#a)VOP#_iT#_id#_if#_im#_iq#_it#_i}#_i!O#_i!R#_i!S#_i!V#_i!Z#_i!f#_i!m#_i!n#_i!o#_i!v#_i!x#_i!z#_i!|#_i#O#_i#S#_i#U#_i#X#_i#Y#_i#[#_i#c#_i#f#_i#j#_i#l#_i#q#_i#t#_i#v#_i%S#_i%V#_i%g#_i%h#_i%l#_i%m#_i&R#_i&S#_i&V#_i&Y#_i&`#_i&c#_i&e#_i%U#_i%Y#_i~Or)XOP#biT#bid#bif#bim#biq#bit#bi}#bi!O#bi!R#bi!S#bi!V#bi!Z#bi!f#bi!m#bi!n#bi!o#bi!v#bi!x#bi!z#bi!|#bi#O#bi#S#bi#U#bi#X#bi#Y#bi#[#bi#c#bi#f#bi#j#bi#l#bi#q#bi#t#bi#v#bi%S#bi%V#bi%g#bi%h#bi%l#bi%m#bi&R#bi&S#bi&V#bi&Y#bi&`#bi&c#bi&e#bi%U#bi%Y#bi~OT)ZOl&ma~P'UOx)[Ol&ma~Ox)[Ol&ma~P$bOl)`O~O%T)cO~Or)fO#g'VO#h)eOP#eiT#eid#eif#eim#eiq#eit#ei}#ei!O#ei!R#ei!S#ei!V#ei!Z#ei!f#ei!m#ei!n#ei!o#ei!v#ei!x#ei!z#ei!|#ei#O#ei#S#ei#U#ei#X#ei#Y#ei#[#ei#c#ei#f#ei#j#ei#l#ei#q#ei#t#ei#v#ei%S#ei%V#ei%g#ei%h#ei%l#ei%m#ei&R#ei&S#ei&V#ei&Y#ei&`#ei&c#ei&e#ei%U#ei%Y#ei~Om/iOt/wOy$nO~P'UOm/iOt/wOy&na~P'UOx)lOy&na~OT)pO_)qOe)tO%i)rO%mVO~Oy$nO&q)vO~O%V)zO~OT%OO_%OOm/iOt/wOe%|a~P'UOx*OOe%|a~Om/iOt/wOy*RO!U&Pa~P'UOx*SO!U&Pa~Om/iOt/wOx*SOy*VO!U&Pa~P'UOm/iOt/wOx*SO!U&Pa~P'UOx*SOy*VO!U&Pa~Ok/jOl/jOm/sOn/tOehiihiqhixhi!Rhi!Shi%shi!Uhiyhi!Yhi#^hi%Vhi%Yhi!Ohi#Vhirhi!jhi%rhi~Oj/lO~P!H[Ojhi~P!H[OT'wOe*[Om/iOt/wO~P'UOl*^O~Oe*[Ox*`O~Oe*aO~OT'wOm/iOt/wO!U%zi~P'UOx*bO!U%zi~O!U*cO~OT(WOm/iOt/wO!Y%ui#^%ui%V%ui%Y%uie%uiy%ui!j%ui%r%ui~P'UOx*fO!R%eO!S%dO!Y%{i~Ox*iO!Y%ui#^%ui%V%ui%Y%uie%uiy%ui!j%ui%r%ui~O!Y*jO~O_*lOm/iOt/wO!Y%{i~P'UOx*fO!Y%{i~O!Y*nO~OT*pOm/iOt/wOy&[a!Y&[a!j&[a~P'UOx*qOy&[a!Y&[a!j&[a~O!Z#^O&^*tO!Y!kX~O!Y*vO~Oy(eO!Y*wO~OT&TOmtOtuOy%`q!s%`q#^%`q%V%`q%Y%`q%r%`q~P'UOx$miy$mi!s$mi#^$mi%V$mi%Y$mi%r$mi~P$bOT&TOmtOtuO~P'UOT&TOm/iOt/wO#^%`a%V%`a%Y%`a%r%`a~P'UOx*xO#^%`a%V%`a%Y%`a%r%`a~Ox$`a#^$`a%V$`a%Y$`al$`a~P$bO#^%wi%V%wi%Y%wil%wi~P'UOx*{O#^#Rq%V#Rq%Y#Rq~Ox*|O#V+OO#^&jX%V&jX%Y&jXe&jX~OT+QOf(|O%mVO~O%mVO#^&ki%V&ki%Y&ki~Om/iOt/wO#^&gi%V&gi%Y&giy&gi~P'UOr+UO#a)VOP#_qT#_qd#_qf#_qm#_qq#_qt#_q}#_q!O#_q!R#_q!S#_q!V#_q!Z#_q!f#_q!m#_q!n#_q!o#_q!v#_q!x#_q!z#_q!|#_q#O#_q#S#_q#U#_q#X#_q#Y#_q#[#_q#c#_q#f#_q#j#_q#l#_q#q#_q#t#_q#v#_q%S#_q%V#_q%g#_q%h#_q%l#_q%m#_q&R#_q&S#_q&V#_q&Y#_q&`#_q&c#_q&e#_q%U#_q%Y#_q~Ol$wax$wa~P$bOT)ZOl&mi~P'UOx+]Ol&mi~OPhOTeOmtOq!SOtuO}vO!O!PO!R!VO!S!UO!vxO!xyO!zzO!|{O#O|O#S}O#U!OO#X!QO#Y!QO#[!RO#c!TO#f!WO#j!XO#l!YO#q!ZO#tlO#v![O~P'UOx+gOy$nO#V+gO~O#h+hOP#eqT#eqd#eqf#eqm#eqq#eqt#eq}#eq!O#eq!R#eq!S#eq!V#eq!Z#eq!f#eq!m#eq!n#eq!o#eq!v#eq!x#eq!z#eq!|#eq#O#eq#S#eq#U#eq#X#eq#Y#eq#[#eq#c#eq#f#eq#j#eq#l#eq#q#eq#t#eq#v#eq%S#eq%V#eq%g#eq%h#eq%l#eq%m#eq&R#eq&S#eq&V#eq&Y#eq&`#eq&c#eq&e#eq%U#eq%Y#eq~O#V+iOx$yay$ya~Om/iOt/wOy&ni~P'UOx+kOy&ni~Oy$SO%r+mOe&pXx&pX~O%mVOe&pXx&pX~Ox+qOe&oX~Oe+sO~O%T+uO~OT%OO_%OOm/iOt/wOe%|i~P'UOy+wOx$ca!U$ca~Om/iOt/wOy+xOx$ca!U$ca~P'UOm/iOt/wOy*RO!U&Pi~P'UOx+{O!U&Pi~Om/iOt/wOx+{O!U&Pi~P'UOx+{Oy,OO!U&Pi~Oe$_ix$_i!U$_i~P$bOT'wOm/iOt/wO~P'UOl,QO~OT'wOe,ROm/iOt/wO~P'UOT'wOm/iOt/wO!U%zq~P'UOx$^i!Y$^i#^$^i%V$^i%Y$^ie$^iy$^i!j$^i%r$^i~P$bOT(WOm/iOt/wO~P'UO_*lOm/iOt/wO!Y%{q~P'UOx,SO!Y%{q~O!Y,TO~OT(WOm/iOt/wO!Y%uq#^%uq%V%uq%Y%uqe%uqy%uq!j%uq%r%uq~P'UOy,UO~OT*pOm/iOt/wOy&[i!Y&[i!j&[i~P'UOx,ZOy&[i!Y&[i!j&[i~O!Z#^O&^*tO!Y!ka~OT&TOm/iOt/wO#^%`i%V%`i%Y%`i%r%`i~P'UOx,]O#^%`i%V%`i%Y%`i%r%`i~O%mVO#^&ja%V&ja%Y&jae&ja~Ox,`O#^&ja%V&ja%Y&jae&ja~Oe,cO~Ol$wix$wi~P$bOT)ZO~P'UOT)ZOl&mq~P'UOr,fOP#dyT#dyd#dyf#dym#dyq#dyt#dy}#dy!O#dy!R#dy!S#dy!V#dy!Z#dy!f#dy!m#dy!n#dy!o#dy!v#dy!x#dy!z#dy!|#dy#O#dy#S#dy#U#dy#X#dy#Y#dy#[#dy#c#dy#f#dy#j#dy#l#dy#q#dy#t#dy#v#dy%S#dy%V#dy%g#dy%h#dy%l#dy%m#dy&R#dy&S#dy&V#dy&Y#dy&`#dy&c#dy&e#dy%U#dy%Y#dy~OPhOTeOmtOq!SOtuO}vO!O!PO!R!VO!S!UO!vxO!xyO!zzO!|{O#O|O#S}O#U!OO#X!QO#Y!QO#[!RO#c!TO#f!WO#j!XO#l!YO#q!ZO#tlO#v![O%U,jO%Y,jO~P'UO#h,kOP#eyT#eyd#eyf#eym#eyq#eyt#ey}#ey!O#ey!R#ey!S#ey!V#ey!Z#ey!f#ey!m#ey!n#ey!o#ey!v#ey!x#ey!z#ey!|#ey#O#ey#S#ey#U#ey#X#ey#Y#ey#[#ey#c#ey#f#ey#j#ey#l#ey#q#ey#t#ey#v#ey%S#ey%V#ey%g#ey%h#ey%l#ey%m#ey&R#ey&S#ey&V#ey&Y#ey&`#ey&c#ey&e#ey%U#ey%Y#ey~Om/iOt/wOy&nq~P'UOx,oOy&nq~O%r+mOe&pax&pa~OT)pO_)qO%i)rO%mVOe&oa~Ox,sOe&oa~O#y,wO~OT%OO_%OOm/iOt/wO~P'UOm/iOt/wOy,xOx$ci!U$ci~P'UOm/iOt/wOx$ci!U$ci~P'UOy,xOx$ci!U$ci~Om/iOt/wOy*RO~P'UOm/iOt/wOy*RO!U&Pq~P'UOx,{O!U&Pq~Om/iOt/wOx,{O!U&Pq~P'UOq-OO!R%eO!S%dOe%vq!U%vq!Y%vqx%vq~P!,}O_*lOm/iOt/wO!Y%{y~P'UOx$ai!Y$ai~P$bO_*lOm/iOt/wO~P'UOT*pOm/iOt/wO~P'UOT*pOm/iOt/wOy&[q!Y&[q!j&[q~P'UOT&TOm/iOt/wO#^%`q%V%`q%Y%`q%r%`q~P'UO#V-SOx$ra#^$ra%V$ra%Y$rae$ra~O%mVO#^&ji%V&ji%Y&jie&ji~Ox-UO#^&ji%V&ji%Y&jie&ji~Or-XOP#d!RT#d!Rd#d!Rf#d!Rm#d!Rq#d!Rt#d!R}#d!R!O#d!R!R#d!R!S#d!R!V#d!R!Z#d!R!f#d!R!m#d!R!n#d!R!o#d!R!v#d!R!x#d!R!z#d!R!|#d!R#O#d!R#S#d!R#U#d!R#X#d!R#Y#d!R#[#d!R#c#d!R#f#d!R#j#d!R#l#d!R#q#d!R#t#d!R#v#d!R%S#d!R%V#d!R%g#d!R%h#d!R%l#d!R%m#d!R&R#d!R&S#d!R&V#d!R&Y#d!R&`#d!R&c#d!R&e#d!R%U#d!R%Y#d!R~Om/iOt/wOy&ny~P'UOT)pO_)qO%i)rO%mVOe&oi~O#y,wO%U-_O%Y-_O~OT-iOf-gO!V-fO!Z-hO!f-bO!n-dO!o-dO%h-aO%mVO&R[O&S]O&V^O~Om/iOt/wOx$cq!U$cq~P'UOy-nOx$cq!U$cq~Om/iOt/wOy*RO!U&Py~P'UOx-oO!U&Py~Om/iOt-sO~P'UOq-OO!R%eO!S%dOe%vy!U%vy!Y%vyx%vy~P!,}O%mVO#^&jq%V&jq%Y&jqe&jq~Ox-wO#^&jq%V&jq%Y&jqe&jq~OT)pO_)qO%i)rO%mVO~Of-{O!d-yOx#zX#V#zX%b#zXe#zX~Oq#zXy#zX!U#zX!Y#zX~P$$nO%g-}O%h-}Oq#{Xx#{Xy#{X#V#{X%b#{X!U#{Xe#{X!Y#{X~O!f.PO~Ox.TO#V.VO%b.QOq&rXy&rX!U&rXe&rX~O_.YO~P$ WOf-{Oq&sXx&sXy&sX#V&sX%b&sX!U&sXe&sX!Y&sX~Oq.^Oy$nO~Om/iOt/wOx$cy!U$cy~P'UOm/iOt/wOy*RO!U&P!R~P'UOx.bO!U&P!R~Oe%yXq%yX!R%yX!S%yX!U%yX!Y%yXx%yX~P!,}Oq-OO!R%eO!S%dOe%xa!U%xa!Y%xax%xa~O%mVO#^&jy%V&jy%Y&jye&jy~O!d-yOf$Raq$Rax$Ray$Ra#V$Ra%b$Ra!U$Rae$Ra!Y$Ra~O!f.kO~O%g-}O%h-}Oq#{ax#{ay#{a#V#{a%b#{a!U#{ae#{a!Y#{a~O%b.QOq$Pax$Pay$Pa#V$Pa!U$Pae$Pa!Y$Pa~Oq&ray&ra!U&rae&ra~P#NzOx.pOq&ray&ra!U&rae&ra~O!U.sO~Oe.sO~Oy.uO~O!Y.vO~Om/iOt/wOy*RO!U&P!Z~P'UOy.yO~O%r.zO~P$$nOx.{O#V.VO%b.QOe&uX~Ox.{Oe&uX~Oe.}O~O!f/OO~O#V.VOq$}ax$}ay$}a%b$}a!U$}ae$}a!Y$}a~O#V.VO%b.QOq%Rax%Ray%Ra!U%Rae%Ra~Oq&riy&ri!U&rie&ri~P#NzOx/QO#V.VO%b.QO!Y&ta~Oy$Za~P$bOe&ua~P#NzOx/YOe&ua~O_/[O!Y&ti~P$ WOx/^O!Y&ti~Ox/^O#V.VO%b.QO!Y&ti~O#V.VO%b.QOe$Xix$Xi~O%r/aO~P$$nO#V.VO%b.QOe%Qax%Qa~Oe&ui~P#NzOy/dO~O_/[O!Y&tq~P$ WOx/fO!Y&tq~O#V.VO%b.QOx%Pi!Y%Pi~O_/[O~P$ WO_/[O!Y&ty~P$ WO#V.VO%b.QOe$Yix$Yi~O#V.VO%b.QOx%Pq!Y%Pq~Ox*xO#^%`a%V%`a%Y%`a%r%`a~P$bOT&TOm/iOt/wO~P'UOl/nO~Om/nO~P'UOy/oO~Or/pO~P!,}O&S&V&c&e&R!Z&Z&a&d&f&Y&`&Y%m~",goto:"!9p&vPPPP&wP'P*e*}+h,S,o-]P-zP'P.k.k'PPPP'P2PPPPPPP2P4oPP4oP6{7U=QPP=T=c=fPP'P'PPP=rPP'P'PPP'P'P'P'P'P=v>m'PP>pP>vByFcPFw'PPPPF{GR&wP&w&wP&wP&wP&wP&wP&w&w&wP&wPP&wPP&wPGXPG`GfPG`PG`G`PPPG`PIePInItIzIePG`JQPG`PJXJ_PJcJwKfLPJcJcLVLdJcJcJcJcLxMOMRMWMZMaMgMsNVN]NgNm! Z! a! g! m! w! }!!T!!Z!!a!!g!!y!#T!#Z!#a!#g!#q!#w!#}!$T!$Z!$e!$k!$u!${!%U!%[!%k!%s!%}!&UPPPPPPPPP!&[!&d!&m!&w!'SPPPPPPPPPPPP!+r!,[!0j!3vPP!4O!4^!4g!5]!5S!5f!5l!5o!5r!5u!5}!6nPPPPPPPPPP!6q!6tPPPPPPPPP!6z!7W!7d!7j!7s!7v!7|!8S!8Y!8]P!8e!8n!9j!9m]iOr#n$n)c+c'udOSXYZehrstvx|}!R!S!T!U!X![!d!e!f!g!h!i!j!l!p!q!r!t!u!{#O#S#T#^#k#n$P$Q$S$U$X$i$k$l$n$u%O%T%[%_%a%d%h%m%o%y&R&T&`&d&m&o&p&w&{'O'V'Y'g'h'k'm'n'r'w'y'}(R(W(X(_(b(i(k(s(v)S)V)Z)[)`)c)l)v*O*R*S*V*]*^*`*b*e*f*i*l*p*q*x*z*{+S+[+]+c+j+k+n+v+w+x+z+{,O,Q,S,U,W,Y,Z,],o,q,x,{-O-n-o.^.b.y/i/j/k/l/n/o/p/q/r/t/x}!dP#j#w$Y$h$t%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/m!P!eP#j#w$Y$h$t$v%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/m!R!fP#j#w$Y$h$t$v$w%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/m!T!gP#j#w$Y$h$t$v$w$x%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/m!V!hP#j#w$Y$h$t$v$w$x$y%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/m!X!iP#j#w$Y$h$t$v$w$x$y$z%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/m!]!iP!o#j#w$Y$h$t$v$w$x$y$z${%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/m'uSOSXYZehrstvx|}!R!S!T!U!X![!d!e!f!g!h!i!j!l!p!q!r!t!u!{#O#S#T#^#k#n$P$Q$S$U$X$i$k$l$n$u%O%T%[%_%a%d%h%m%o%y&R&T&`&d&m&o&p&w&{'O'V'Y'g'h'k'm'n'r'w'y'}(R(W(X(_(b(i(k(s(v)S)V)Z)[)`)c)l)v*O*R*S*V*]*^*`*b*e*f*i*l*p*q*x*z*{+S+[+]+c+j+k+n+v+w+x+z+{,O,Q,S,U,W,Y,Z,],o,q,x,{-O-n-o.^.b.y/i/j/k/l/n/o/p/q/r/t/x&ZUOXYZhrtv|}!R!S!T!X!j!l!p!q!r!t!u#^#k#n$Q$S$U$X$l$n%O%T%[%_%a%h%m%o%y&R&`&d&o&p&w'O'V'Y'g'h'k'm'n'r'y(R(X(_(b(i(k(s)S)V)`)c)l)v*O*R*S*V*]*^*`*b*e*f*i*p*q*x*{+S+c+j+k+n+v+w+x+z+{,O,Q,S,U,W,Y,Z,],o,q,x,{-O-n-o.b.y/i/j/k/l/n/o/p/q/t/x%eWOXYZhrv|}!R!S!T!X!j!l#^#k#n$Q$S$U$X$l$n%O%T%_%a%h%m%o%y&R&`&d&o&p&w'O'V'Y'g'h'k'm'n'r'y(R(X(_(b(i(k(s)S)V)`)c)l)v*O*R*S*V*]*`*b*e*f*i*p*q*x*{+S+c+j+k+n+v+w+x+z+{,O,S,U,W,Y,Z,],o,q,x,{-n-o.b/o/p/qQ#}uQ.c-sR/u/w'ldOSXYZehrstvx|}!R!S!T!U!X![!d!e!f!g!h!i!l!p!q!r!t!u!{#O#S#T#^#k#n$P$Q$S$U$X$i$k$l$n$u%O%T%[%_%a%d%h%m%o%y&R&T&`&d&m&o&p&w&{'O'V'Y'g'k'm'n'r'w'y'}(R(W(X(_(b(i(k(s(v)S)V)Z)[)`)c)l)v*R*S*V*]*^*`*b*e*f*i*l*p*q*x*z*{+S+[+]+c+j+k+n+w+x+z+{,O,Q,S,U,W,Y,Z,],o,q,x,{-O-n-o.^.b.y/i/j/k/l/n/o/p/q/r/t/xW#ql!O!P$`W#yu&b-s/wQ$b!QQ$r!YQ$s!ZW$}!j'h*O+vS&a#z#{Q'R$mQ(l&ZQ(z&qU({&s(|(}U)O&u)P+RQ)n'[W)o'^+q,s-]S+p)p)qY,_*|,`-T-U-wQ,b+OQ,l+gQ,n+il-`,w-f-g-i.R.T.Y.p.u.z/P/[/a/dQ-v-SQ.Z-hQ.g-{Q.r.VU/V.{/Y/bX/]/Q/^/e/fR&`#yi!xXY!S!T%a%h'y(R)V*]*`*bR%_!wQ!|XQ%z#^Q&i$UR&l$XT-r-O.y![!kP!o#j#w$Y$h$t$v$w$x$y$z${%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/mQ&^#rR'a$sR'g$}Q%W!nR.e-y'tcOSXYZehrstvx|}!R!S!T!U!X![!d!e!f!g!h!i!j!l!p!q!r!t!u!{#O#S#T#^#k#n$P$Q$S$U$X$i$k$l$n$u%O%T%[%_%a%d%h%m%o%y&R&T&`&d&m&o&p&w&{'O'V'Y'g'h'k'm'n'r'w'y'}(R(W(X(_(b(i(k(s(v)S)V)Z)[)`)c)l)v*O*R*S*V*]*^*`*b*e*f*i*l*p*q*x*z*{+S+[+]+c+j+k+n+v+w+x+z+{,O,Q,S,U,W,Y,Z,],o,q,x,{-O-n-o.^.b.y/i/j/k/l/n/o/p/q/r/t/xS#hc#i!P-d,w-f-g-h-i-{.R.T.Y.p.u.z.{/P/Q/Y/[/^/a/b/d/e/f'tcOSXYZehrstvx|}!R!S!T!U!X![!d!e!f!g!h!i!j!l!p!q!r!t!u!{#O#S#T#^#k#n$P$Q$S$U$X$i$k$l$n$u%O%T%[%_%a%d%h%m%o%y&R&T&`&d&m&o&p&w&{'O'V'Y'g'h'k'm'n'r'w'y'}(R(W(X(_(b(i(k(s(v)S)V)Z)[)`)c)l)v*O*R*S*V*]*^*`*b*e*f*i*l*p*q*x*z*{+S+[+]+c+j+k+n+v+w+x+z+{,O,Q,S,U,W,Y,Z,],o,q,x,{-O-n-o.^.b.y/i/j/k/l/n/o/p/q/r/t/xT#hc#iS#__#`S#b`#cS#da#eS#fb#gT*t(e*uT(f%z(hQ$WwR+o)oX$Uw$V$W&kZkOr$n)c+cXoOr)c+cQ$o!WQ&y$fQ&z$gQ']$qQ'`$sQ)a'QQ)g'VQ)i'WQ)j'XQ)w'_Q)y'aQ+V)VQ+X)WQ+Y)XQ+^)_S+`)b)xQ+d)eQ+e)fQ+f)hQ,d+UQ,e+WQ,g+_Q,h+aQ,m+hQ-W,fQ-Y,kQ-Z,lQ-x-XQ._-lR.x.`WoOr)c+cR#tnQ'_$rR)b'RQ+n)oR,q+oQ)x'_R+a)bZmOnr)c+cQ'c$tR){'dT,u+u,vu-k,w-f-g-i-{.R.T.Y.p.u.z.{/P/Y/[/a/b/dt-k,w-f-g-i-{.R.T.Y.p.u.z.{/P/Y/[/a/b/dQ.Z-hX/]/Q/^/e/f!P-c,w-f-g-h-i-{.R.T.Y.p.u.z.{/P/Q/Y/[/^/a/b/d/e/fQ.O-bR.l.Pg.R-e.S.h.o.t/S/U/W/c/g/hu-j,w-f-g-i-{.R.T.Y.p.u.z.{/P/Y/[/a/b/dX-|-`-j.g/VR.i-{V/X.{/Y/bR.`-lQrOR#vrQ&c#|R(q&cS%n#R$OS(Y%n(]T(]%q&eQ%b!zQ%i!}W'z%b%i(P(TQ(P%fR(T%kQ&n$YR(w&nQ(`%rQ*g(ZT*m(`*gQ'i%PR*P'iS'l%S%TY*T'l*U+|,|-pU*U'm'n'oU+|*V*W*XS,|+},OR-p,}Q#Y]R%u#YQ#]^R%w#]Q#`_R%{#`Q(c%xS*r(c*sR*s(dQ*u(eR,[*uQ#c`R%}#cQ#eaR&O#eQ#gbR&P#gQ#icR&Q#iQ#lfQ&S#jW&V#l&S(t*yQ(t&hR*y/mQ$VwS&j$V&kR&k$WQ&x$dR)T&xQ&[#qR(m&[Q$`!PR&r$`Q*}({S,a*}-VR-V,bQ&v$bR)Q&vQ#ojR&X#oQ+c)cR,i+cQ)U&yR+T)UQ&|$hS)]&|)^R)^&}Q'U$oR)d'UQ'Z$pS)m'Z+lR+l)nQ+r)sR,t+rWnOr)c+cR#snQ,v+uR-^,vd.S-e.h.o.t/S/U/W/c/g/hR.n.SU-z-`.g/VR.f-zQ/R.tS/_/R/`R/`/SS.|.h.iR/Z.|Q.U-eR.q.USqOrT+b)c+cWpOr)c+cR'S$nYjOr$n)c+cR&W#n[wOr#n$n)c+cR&i$U&YPOXYZhrtv|}!R!S!T!X!j!l!p!q!r!t!u#^#k#n$Q$S$U$X$l$n%O%T%[%_%a%h%m%o%y&R&`&d&o&p&w'O'V'Y'g'h'k'm'n'r'y(R(X(_(b(i(k(s)S)V)`)c)l)v*O*R*S*V*]*^*`*b*e*f*i*p*q*x*{+S+c+j+k+n+v+w+x+z+{,O,Q,S,U,W,Y,Z,],o,q,x,{-O-n-o.b.y/i/j/k/l/n/o/p/q/t/xQ!oSQ#jeQ#wsU$Yx%d'}S$h!U$kQ$t![Q$v!dQ$w!eQ$x!fQ$y!gQ$z!hQ${!iQ%f!{Q%k#OQ%q#SQ%r#TQ&e$PQ&}$iQ'd$uQ(j&TU(u&m(v*zW)Y&{)[+[+]Q*Z'wQ*d(WQ+Z)ZQ,V*lQ.w.^R/m/rQ!zXQ!}YQ$f!SQ$g!T^'v%a%h'y(R*]*`*bR+W)V[fOr#n$n)c+ch!wXY!S!T%a%h'y(R)V*]*`*bQ#RZQ#mhS$Ov|Q$]}W$d!R$X'O)`S$p!X$lW$|!j'h*O+vQ%S!lQ%x#^`&U#k&R(i(k(s*x,]/qQ&f$QQ&g$SQ&h$UQ'e%OQ'o%TQ'u%_W(V%m(X*e*iQ(Z%oQ(d%yQ(o&`S(r&d/oQ(x&oQ(y&pU)R&w)S+SQ)h'VY)k'Y)l+j+k,oQ)|'g^*Q'k*S+z+{,{-o.bQ*W'mQ*X'nS*Y'r/pW*k(_*f,S,WW*o(b*q,Y,ZQ+t)vQ+y*RQ+}*VQ,X*pQ,^*{Q,p+nQ,y+wQ,z+xQ,},OQ-R,UQ-[,qQ-m,xR.a-nhTOr#k#n$n&R&d'r(i(k)c+c$z!vXYZhv|}!R!S!T!X!j!l#^$Q$S$U$X$l%O%T%_%a%h%m%o%y&`&o&p&w'O'V'Y'g'h'k'm'n'y(R(X(_(b(s)S)V)`)l)v*O*R*S*V*]*`*b*e*f*i*p*q*x*{+S+j+k+n+v+w+x+z+{,O,S,U,W,Y,Z,],o,q,x,{-n-o.b/o/p/qQ#xtW%X!p!t/j/tQ%Y!qQ%Z!rQ%]!uQ%g/iS'q%[/nQ's/kQ't/lQ,P*^Q-Q,QS-q-O.yR/v/xU#|u-s/wR(p&b[gOr#n$n)c+cX!yX#^$U$XQ#WZQ$RvR$[|Q%c!zQ%j!}Q%p#RQ'e$|Q(Q%fQ(U%kQ(^%qQ(a%rQ*h(ZQ-P,PQ-u-QR.d-tQ$ZxQ'|%dR*_'}Q-t-OR/T.yR#QYR#VZR%R!jQ%P!jV)}'h*O+v!]!mP!o#j#w$Y$h$t$v$w$x$y$z${%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/mR%U!lR%z#^Q(g%zR*w(hQ$e!RQ&l$XQ)_'OR+_)`Q#rlQ$^!OQ$a!PR&t$`Q(z&sR+Q(}Q(z&sQ+P(|R+Q(}R$c!QXpOr)c+cQ$j!UR'P$kQ$q!XR'Q$lR)u'^Q)s'^V,r+q,s-]Q-l,wQ.W-fR.X-gU-e,w-f-gQ.]-iQ.h-{Q.m.RU.o.T.p/PQ.t.YQ/S.uQ/U.zU/W.{/Y/bQ/c/[Q/g/aR/h/dR.[-hR.j-{",nodeNames:"⚠ print Comment Script AssignStatement * BinaryExpression BitOp BitOp BitOp BitOp ArithOp ArithOp @ ArithOp ** UnaryExpression ArithOp BitOp AwaitExpression await ) ( ParenthesizedExpression BinaryExpression or and CompareOp in not is UnaryExpression ConditionalExpression if else LambdaExpression lambda ParamList VariableName AssignOp , : NamedExpression AssignOp YieldExpression yield from TupleExpression ComprehensionExpression async for LambdaExpression ] [ ArrayExpression ArrayComprehensionExpression } { DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression CallExpression ArgList AssignOp MemberExpression . PropertyName Number String FormatString FormatReplacement FormatConversion FormatSpec ContinuedString Ellipsis None Boolean TypeDef AssignOp UpdateStatement UpdateOp ExpressionStatement DeleteStatement del PassStatement pass BreakStatement break ContinueStatement continue ReturnStatement return YieldStatement PrintStatement RaiseStatement raise ImportStatement import as ScopeStatement global nonlocal AssertStatement assert StatementGroup ; IfStatement Body elif WhileStatement while ForStatement TryStatement try except finally WithStatement with FunctionDefinition def ParamList AssignOp TypeDef ClassDefinition class DecoratedStatement Decorator At MatchStatement match MatchBody MatchClause case CapturePattern LiteralPattern ArithOp ArithOp AsPattern OrPattern LogicOp AttributePattern SequencePattern MappingPattern StarPattern ClassPattern PatternArgList KeywordPattern KeywordPattern Guard",maxTerm:267,context:trackIndent,nodeProps:[["group",-14,4,80,82,83,85,87,89,91,93,94,95,97,100,103,"Statement Statement",-22,6,16,19,23,38,47,48,54,55,58,59,60,61,62,65,68,69,70,74,75,76,77,"Expression",-10,105,107,110,112,113,117,119,124,126,129,"Statement",-9,134,135,138,139,141,142,143,144,145,"Pattern"],["openedBy",21,"(",52,"[",56,"{"],["closedBy",22,")",53,"]",57,"}"]],propSources:[pythonHighlighting],skippedNodes:[0,2],repeatNodeCount:38,tokenData:")'WMgR!`OX%TXY!EQY[%T[]!EQ]p%Tpq!EQqr!Gkrs!Ktst#J]tu%Tuv&'{vw&*kwx&+}xy'*fyz'+rz{'-O{|'/z|}'1^}!O'2j!O!P'5]!P!Q'Ae!Q!R'Da!R!['Ho![!](&g!]!^()V!^!_(*c!_!`(-_!`!a(.q!a!b%T!b!c(1j!c!d(3O!d!e(4|!e!h(3O!h!i(?z!i!t(3O!t!u(J[!u!w(3O!w!x(>S!x!}(3O!}#O(Ll#O#P!Fp#P#Q(Mx#Q#R) U#R#S(3O#S#T%T#T#U(3O#U#V(4|#V#Y(3O#Y#Z(?z#Z#f(3O#f#g(J[#g#i(3O#i#j(>S#j#o(3O#o#p)!h#p#q)#d#q#r)$v#r#s)%z#s$g%T$g;'S(3O;'S;=`(4v<%lO(3O<r%f]&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<Q&j]&^7[&TS&Z`&d!bOr'crs!,gsw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'c<Q'r]&^7[&TS&WW&Z`&d!b&f#tOr'crs&_sw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'c;p(t]&^7[&WW&f#tOr)mrs*ssw)mwxKmx#O)m#O#P7}#P#o)m#o#pDs#p#q)m#q#r8l#r;'S)m;'S;=`Kg<%lO)m;p)z]&^7[&TS&WW&d!b&f#tOr)mrs*ssw)mwx(kx#O)m#O#P7}#P#o)m#o#pDs#p#q)m#q#r8l#r;'S)m;'S;=`Kg<%lO)m;p*|]&^7[&TS&d!bOr)mrs+usw)mwx(kx#O)m#O#P7}#P#o)m#o#pDs#p#q)m#q#r8l#r;'S)m;'S;=`Kg<%lO)m;p,O]&^7[&TS&d!bOr)mrs,wsw)mwx(kx#O)m#O#P7}#P#o)m#o#pDs#p#q)m#q#r8l#r;'S)m;'S;=`Kg<%lO)m8r-QZ&^7[&TS&d!bOw,wwx-sx#O,w#O#P/}#P#o,w#o#p3n#p#q,w#q#r0l#r;'S,w;'S;=`7w<%lO,w8r-xZ&^7[Ow,wwx.kx#O,w#O#P/}#P#o,w#o#p3n#p#q,w#q#r0l#r;'S,w;'S;=`7w<%lO,w8r.pZ&^7[Ow,wwx/cx#O,w#O#P/}#P#o,w#o#p3n#p#q,w#q#r0l#r;'S,w;'S;=`7w<%lO,w7[/hT&^7[O#o/c#p#q/c#r;'S/c;'S;=`/w<%lO/c7[/zP;=`<%l/c8r0SW&^7[O#o,w#o#p0l#p#q,w#q#r0l#r;'S,w;'S;=`7Q;=`<%l0l<%lO,w!f0sX&TS&d!bOw0lwx1`x#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z<%lO0l!f1cXOw0lwx2Ox#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z<%lO0l!f2RWOw0lx#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z<%lO0l!f2nRO;'S0l;'S;=`2w;=`O0l!f3OY&TS&d!bOw0lwx1`x#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z;=`<%l0l<%lO0l!f3sX&TSOw4`wx4zx#O4`#O#P5y#P#o4`#o#p0l#p;'S4`;'S;=`6t<%lO4`S4eV&TSOw4`wx4zx#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`S4}VOw4`wx5dx#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`S5gUOw4`x#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`S5|RO;'S4`;'S;=`6V;=`O4`S6[W&TSOw4`wx4zx#O4`#O#P5y#P;'S4`;'S;=`6t;=`<%l4`<%lO4`S6wP;=`<%l4`!f6}P;=`<%l0l8r7XY&TS&d!bOw0lwx1`x#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z;=`<%l,w<%lO0l8r7zP;=`<%l,w;p8SW&^7[O#o)m#o#p8l#p#q)m#q#r8l#r;'S)m;'S;=`Jf;=`<%l8l<%lO)m%d8wZ&TS&WW&d!b&f#tOr8lrs9jsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`<%lO8l%d9qZ&TS&d!bOr8lrs:dsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`<%lO8l%d:kZ&TS&d!bOr8lrs0lsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`<%lO8l%d;eZ&WW&f#tOr8lrs9jsw8lwx<Wx#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`<%lO8l%d<_Z&WW&f#tOr8lrs9jsw8lwx=Qx#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`<%lO8l#|=XX&WW&f#tOr=Qrs=ts#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`<%lO=Q#|=wXOr=Qrs>ds#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`<%lO=Q#|>gWOr=Qs#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`<%lO=Q#|?SRO;'S=Q;'S;=`?];=`O=Q#|?dY&WW&f#tOr=Qrs=ts#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`;=`<%l=Q<%lO=Q#|@XX&WWOr@trsA`s#O@t#O#PB_#P#o@t#o#p=Q#p;'S@t;'S;=`CY<%lO@tW@yV&WWOr@trsA`s#O@t#O#PB_#P;'S@t;'S;=`CY<%lO@tWAcVOr@trsAxs#O@t#O#PB_#P;'S@t;'S;=`CY<%lO@tWA{UOr@ts#O@t#O#PB_#P;'S@t;'S;=`CY<%lO@tWBbRO;'S@t;'S;=`Bk;=`O@tWBpW&WWOr@trsA`s#O@t#O#PB_#P;'S@t;'S;=`CY;=`<%l@t<%lO@tWC]P;=`<%l@t#|CcP;=`<%l=Q%dCiRO;'S8l;'S;=`Cr;=`O8l%dC}[&TS&WW&d!b&f#tOr8lrs9jsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`;=`<%l8l<%lO8l%dDzZ&TS&WWOrEmrsFaswEmwxGsx#OEm#O#PIV#P#oEm#o#p8l#p;'SEm;'S;=`JY<%lOEm[EtX&TS&WWOrEmrsFaswEmwxGsx#OEm#O#PIV#P;'SEm;'S;=`JY<%lOEm[FfX&TSOrEmrsGRswEmwxGsx#OEm#O#PIV#P;'SEm;'S;=`JY<%lOEm[GWX&TSOrEmrs4`swEmwxGsx#OEm#O#PIV#P;'SEm;'S;=`JY<%lOEm[GxX&WWOrEmrsFaswEmwxHex#OEm#O#PIV#P;'SEm;'S;=`JY<%lOEm[HjX&WWOrEmrsFaswEmwx@tx#OEm#O#PIV#P;'SEm;'S;=`JY<%lOEm[IYRO;'SEm;'S;=`Ic;=`OEm[IjY&TS&WWOrEmrsFaswEmwxGsx#OEm#O#PIV#P;'SEm;'S;=`JY;=`<%lEm<%lOEm[J]P;=`<%lEm%dJcP;=`<%l8l;pJq[&TS&WW&d!b&f#tOr8lrs9jsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`;=`<%l)m<%lO8l;pKjP;=`<%l)m;pKv]&^7[&WW&f#tOr)mrs*ssw)mwxLox#O)m#O#P7}#P#o)m#o#pDs#p#q)m#q#r8l#r;'S)m;'S;=`Kg<%lO)m:YLxZ&^7[&WW&f#tOrLorsMks#OLo#O#P! Z#P#oLo#o#p@S#p#qLo#q#r=Q#r;'SLo;'S;=`!!o<%lOLo:YMpZ&^7[OrLorsNcs#OLo#O#P! Z#P#oLo#o#p@S#p#qLo#q#r=Q#r;'SLo;'S;=`!!o<%lOLo:YNhZ&^7[OrLors/cs#OLo#O#P! Z#P#oLo#o#p@S#p#qLo#q#r=Q#r;'SLo;'S;=`!!o<%lOLo:Y! `W&^7[O#oLo#o#p=Q#p#qLo#q#r=Q#r;'SLo;'S;=`! x;=`<%l=Q<%lOLo:Y!!PY&WW&f#tOr=Qrs=ts#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`;=`<%lLo<%lO=Q:Y!!rP;=`<%lLo<Q!!zW&^7[O#o'c#o#p!#d#p#q'c#q#r!#d#r;'S'c;'S;=`!+^;=`<%l!#d<%lO'c%t!#qZ&TS&WW&Z`&d!b&f#tOr!#drs!$dsw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W<%lO!#d%t!$mZ&TS&Z`&d!bOr!#drs!%`sw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W<%lO!#d%t!%iZ&TS&Z`&d!bOr!#drs!&[sw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W<%lO!#d!v!&eX&TS&Z`&d!bOw!&[wx1`x#O!&[#O#P!'Q#P#o!&[#o#p!(V#p;'S!&[;'S;=`!(w<%lO!&[!v!'TRO;'S!&[;'S;=`!'^;=`O!&[!v!'gY&TS&Z`&d!bOw!&[wx1`x#O!&[#O#P!'Q#P#o!&[#o#p!(V#p;'S!&[;'S;=`!(w;=`<%l!&[<%lO!&[!v!([X&TSOw4`wx4zx#O4`#O#P5y#P#o4`#o#p!&[#p;'S4`;'S;=`6t<%lO4`!v!(zP;=`<%l!&[%t!)QRO;'S!#d;'S;=`!)Z;=`O!#d%t!)h[&TS&WW&Z`&d!b&f#tOr!#drs!$dsw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W;=`<%l!#d<%lO!#d%t!*eZ&TS&WWOrEmrsFaswEmwxGsx#OEm#O#PIV#P#oEm#o#p!#d#p;'SEm;'S;=`JY<%lOEm%t!+ZP;=`<%l!#d<Q!+k[&TS&WW&Z`&d!b&f#tOr!#drs!$dsw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W;=`<%l'c<%lO!#d<Q!,dP;=`<%l'c<Q!,r]&^7[&TS&Z`&d!bOr'crs!-ksw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'c9S!-vZ&^7[&TS&Z`&d!bOw!-kwx-sx#O!-k#O#P!.i#P#o!-k#o#p!(V#p#q!-k#q#r!&[#r;'S!-k;'S;=`!0P<%lO!-k9S!.nW&^7[O#o!-k#o#p!&[#p#q!-k#q#r!&[#r;'S!-k;'S;=`!/W;=`<%l!&[<%lO!-k9S!/aY&TS&Z`&d!bOw!&[wx1`x#O!&[#O#P!'Q#P#o!&[#o#p!(V#p;'S!&[;'S;=`!(w;=`<%l!-k<%lO!&[9S!0SP;=`<%l!-k<b!0b]&^7[&WW&ap&f#tOr!1Zrs*ssw!1Zwx!<Tx#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1Z<b!1j]&^7[&TS&WW&ap&d!b&f#tOr!1Zrs*ssw!1Zwx!0Vx#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1Z<b!2hW&^7[O#o!1Z#o#p!3Q#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!:z;=`<%l!3Q<%lO!1Z&U!3_Z&TS&WW&ap&d!b&f#tOr!3Qrs9jsw!3Qwx!4Qx#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t<%lO!3Q&U!4ZZ&WW&ap&f#tOr!3Qrs9jsw!3Qwx!4|x#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t<%lO!3Q&U!5VZ&WW&ap&f#tOr!3Qrs9jsw!3Qwx!5xx#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t<%lO!3Q$n!6RX&WW&ap&f#tOr!5xrs=ts#O!5x#O#P!6n#P#o!5x#o#p!7s#p;'S!5x;'S;=`!8e<%lO!5x$n!6qRO;'S!5x;'S;=`!6z;=`O!5x$n!7TY&WW&ap&f#tOr!5xrs=ts#O!5x#O#P!6n#P#o!5x#o#p!7s#p;'S!5x;'S;=`!8e;=`<%l!5x<%lO!5x$n!7xX&WWOr@trsA`s#O@t#O#PB_#P#o@t#o#p!5x#p;'S@t;'S;=`CY<%lO@t$n!8hP;=`<%l!5x&U!8nRO;'S!3Q;'S;=`!8w;=`O!3Q&U!9U[&TS&WW&ap&d!b&f#tOr!3Qrs9jsw!3Qwx!4Qx#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t;=`<%l!3Q<%lO!3Q&U!:RZ&TS&WWOrEmrsFaswEmwxGsx#OEm#O#PIV#P#oEm#o#p!3Q#p;'SEm;'S;=`JY<%lOEm&U!:wP;=`<%l!3Q<b!;X[&TS&WW&ap&d!b&f#tOr!3Qrs9jsw!3Qwx!4Qx#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t;=`<%l!1Z<%lO!3Q<b!<QP;=`<%l!1Z<b!<`]&^7[&WW&ap&f#tOr!1Zrs*ssw!1Zwx!=Xx#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1Z:z!=dZ&^7[&WW&ap&f#tOr!=XrsMks#O!=X#O#P!>V#P#o!=X#o#p!7s#p#q!=X#q#r!5x#r;'S!=X;'S;=`!?m<%lO!=X:z!>[W&^7[O#o!=X#o#p!5x#p#q!=X#q#r!5x#r;'S!=X;'S;=`!>t;=`<%l!5x<%lO!=X:z!>}Y&WW&ap&f#tOr!5xrs=ts#O!5x#O#P!6n#P#o!5x#o#p!7s#p;'S!5x;'S;=`!8e;=`<%l!=X<%lO!5x:z!?pP;=`<%l!=X<r!?xW&^7[O#o%T#o#p!@b#p#q%T#q#r!@b#r;'S%T;'S;=`!Cu;=`<%l!@b<%lO%T&f!@qZ&TS&WW&Z`&ap&d!b&f#tOr!@brs!$dsw!@bwx!4Qx#O!@b#O#P!Ad#P#o!@b#o#p!Bu#p;'S!@b;'S;=`!Co<%lO!@b&f!AgRO;'S!@b;'S;=`!Ap;=`O!@b&f!BP[&TS&WW&Z`&ap&d!b&f#tOr!@brs!$dsw!@bwx!4Qx#O!@b#O#P!Ad#P#o!@b#o#p!Bu#p;'S!@b;'S;=`!Co;=`<%l!@b<%lO!@b&f!B|Z&TS&WWOrEmrsFaswEmwxGsx#OEm#O#PIV#P#oEm#o#p!@b#p;'SEm;'S;=`JY<%lOEm&f!CrP;=`<%l!@b<r!DU[&TS&WW&Z`&ap&d!b&f#tOr!@brs!$dsw!@bwx!4Qx#O!@b#O#P!Ad#P#o!@b#o#p!Bu#p;'S!@b;'S;=`!Co;=`<%l%T<%lO!@b<r!D}P;=`<%l%TMg!Eec&^7[&TS&WW%[1s&Z`&ap&d!b&f#tOX%TXY!EQY[%T[]!EQ]p%Tpq!EQqr%Trs&_sw%Twx!0Vx#O%T#O#P!Fp#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TMg!Fu[&^7[OY%TYZ!EQZ]%T]^!EQ^#o%T#o#p!@b#p#q%T#q#r!@b#r;'S%T;'S;=`!Cu;=`<%l!@b<%lO%T<u!G|d&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`!I[!`#O%T#O#P!?s#P#T%T#T#U!Jh#U#f%T#f#g!Jh#g#h!Jh#h#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<u!Io]kR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<u!J{]!jR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{!LTa&bp&^7[&TS&R,X&Z`&d!bOY!MYYZ'cZ]!MY]^'c^r!MYrs#HTsw!MYwx# vx#O!MY#O#P#@t#P#o!MY#o#p#E^#p#q!MY#q#r#Ac#r;'S!MY;'S;=`#G}<%lO!MYGZ!Mka&^7[&TS&WW&R,X&Z`&d!b&f#tOY!MYYZ'cZ]!MY]^'c^r!MYrs!Npsw!MYwx# vx#O!MY#O#P#@t#P#o!MY#o#p#E^#p#q!MY#q#r#Ac#r;'S!MY;'S;=`#G}<%lO!MYGZ!N}]&^7[&TS&R,X&Z`&d!bOr'crs!,gsw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'cFy#!Ra&^7[&WW&R,X&f#tOY##WYZ)mZ]##W]^)m^r##Wrs#$lsw##Wwx#;fx#O##W#O#P#%p#P#o##W#o#p#3d#p#q##W#q#r#&_#r;'S##W;'S;=`#;`<%lO##WFy##ga&^7[&TS&WW&R,X&d!b&f#tOY##WYZ)mZ]##W]^)m^r##Wrs#$lsw##Wwx# vx#O##W#O#P#%p#P#o##W#o#p#3d#p#q##W#q#r#&_#r;'S##W;'S;=`#;`<%lO##WFy#$w]&^7[&TS&R,X&d!bOr)mrs+usw)mwx(kx#O)m#O#P7}#P#o)m#o#pDs#p#q)m#q#r8l#r;'S)m;'S;=`Kg<%lO)mFy#%uW&^7[O#o##W#o#p#&_#p#q##W#q#r#&_#r;'S##W;'S;=`#:P;=`<%l#&_<%lO##W0m#&l_&TS&WW&R,X&d!b&f#tOY#&_YZ8lZ]#&_]^8l^r#&_rs#'ksw#&_wx#(gx#O#&_#O#P#1w#P#o#&_#o#p#3d#p;'S#&_;'S;=`#9y<%lO#&_0m#'tZ&TS&R,X&d!bOr8lrs:dsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`<%lO8l0m#(p_&WW&R,X&f#tOY#&_YZ8lZ]#&_]^8l^r#&_rs#'ksw#&_wx#)ox#O#&_#O#P#1w#P#o#&_#o#p#3d#p;'S#&_;'S;=`#9y<%lO#&_0m#)x_&WW&R,X&f#tOY#&_YZ8lZ]#&_]^8l^r#&_rs#'ksw#&_wx#*wx#O#&_#O#P#1w#P#o#&_#o#p#3d#p;'S#&_;'S;=`#9y<%lO#&_/V#+Q]&WW&R,X&f#tOY#*wYZ=QZ]#*w]^=Q^r#*wrs#+ys#O#*w#O#P#,k#P#o#*w#o#p#-|#p;'S#*w;'S;=`#1q<%lO#*w/V#,OX&R,XOr=Qrs>ds#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`<%lO=Q/V#,nRO;'S#*w;'S;=`#,w;=`O#*w/V#-Q^&WW&R,X&f#tOY#*wYZ=QZ]#*w]^=Q^r#*wrs#+ys#O#*w#O#P#,k#P#o#*w#o#p#-|#p;'S#*w;'S;=`#1q;=`<%l#*w<%lO#*w/V#.T]&WW&R,XOY#.|YZ@tZ]#.|]^@t^r#.|rs#/vs#O#.|#O#P#0b#P#o#.|#o#p#*w#p;'S#.|;'S;=`#1k<%lO#.|,a#/TZ&WW&R,XOY#.|YZ@tZ]#.|]^@t^r#.|rs#/vs#O#.|#O#P#0b#P;'S#.|;'S;=`#1k<%lO#.|,a#/{V&R,XOr@trsAxs#O@t#O#PB_#P;'S@t;'S;=`CY<%lO@t,a#0eRO;'S#.|;'S;=`#0n;=`O#.|,a#0u[&WW&R,XOY#.|YZ@tZ]#.|]^@t^r#.|rs#/vs#O#.|#O#P#0b#P;'S#.|;'S;=`#1k;=`<%l#.|<%lO#.|,a#1nP;=`<%l#.|/V#1tP;=`<%l#*w0m#1zRO;'S#&_;'S;=`#2T;=`O#&_0m#2b`&TS&WW&R,X&d!b&f#tOY#&_YZ8lZ]#&_]^8l^r#&_rs#'ksw#&_wx#(gx#O#&_#O#P#1w#P#o#&_#o#p#3d#p;'S#&_;'S;=`#9y;=`<%l#&_<%lO#&_0m#3m_&TS&WW&R,XOY#4lYZEmZ]#4l]^Em^r#4lrs#5nsw#4lwx#6bx#O#4l#O#P#8b#P#o#4l#o#p#&_#p;'S#4l;'S;=`#9s<%lO#4l,e#4u]&TS&WW&R,XOY#4lYZEmZ]#4l]^Em^r#4lrs#5nsw#4lwx#6bx#O#4l#O#P#8b#P;'S#4l;'S;=`#9s<%lO#4l,e#5uX&TS&R,XOrEmrsGRswEmwxGsx#OEm#O#PIV#P;'SEm;'S;=`JY<%lOEm,e#6i]&WW&R,XOY#4lYZEmZ]#4l]^Em^r#4lrs#5nsw#4lwx#7bx#O#4l#O#P#8b#P;'S#4l;'S;=`#9s<%lO#4l,e#7i]&WW&R,XOY#4lYZEmZ]#4l]^Em^r#4lrs#5nsw#4lwx#.|x#O#4l#O#P#8b#P;'S#4l;'S;=`#9s<%lO#4l,e#8eRO;'S#4l;'S;=`#8n;=`O#4l,e#8w^&TS&WW&R,XOY#4lYZEmZ]#4l]^Em^r#4lrs#5nsw#4lwx#6bx#O#4l#O#P#8b#P;'S#4l;'S;=`#9s;=`<%l#4l<%lO#4l,e#9vP;=`<%l#4l0m#9|P;=`<%l#&_Fy#:^`&TS&WW&R,X&d!b&f#tOY#&_YZ8lZ]#&_]^8l^r#&_rs#'ksw#&_wx#(gx#O#&_#O#P#1w#P#o#&_#o#p#3d#p;'S#&_;'S;=`#9y;=`<%l##W<%lO#&_Fy#;cP;=`<%l##WFy#;qa&^7[&WW&R,X&f#tOY##WYZ)mZ]##W]^)m^r##Wrs#$lsw##Wwx#<vx#O##W#O#P#%p#P#o##W#o#p#3d#p#q##W#q#r#&_#r;'S##W;'S;=`#;`<%lO##WEc#=R_&^7[&WW&R,X&f#tOY#<vYZLoZ]#<v]^Lo^r#<vrs#>Qs#O#<v#O#P#>z#P#o#<v#o#p#-|#p#q#<v#q#r#*w#r;'S#<v;'S;=`#@n<%lO#<vEc#>XZ&^7[&R,XOrLorsNcs#OLo#O#P! Z#P#oLo#o#p@S#p#qLo#q#r=Q#r;'SLo;'S;=`!!o<%lOLoEc#?PW&^7[O#o#<v#o#p#*w#p#q#<v#q#r#*w#r;'S#<v;'S;=`#?i;=`<%l#*w<%lO#<vEc#?r^&WW&R,X&f#tOY#*wYZ=QZ]#*w]^=Q^r#*wrs#+ys#O#*w#O#P#,k#P#o#*w#o#p#-|#p;'S#*w;'S;=`#1q;=`<%l#<v<%lO#*wEc#@qP;=`<%l#<vGZ#@yW&^7[O#o!MY#o#p#Ac#p#q!MY#q#r#Ac#r;'S!MY;'S;=`#Fl;=`<%l#Ac<%lO!MY0}#Ar_&TS&WW&R,X&Z`&d!b&f#tOY#AcYZ!#dZ]#Ac]^!#d^r#Acrs#Bqsw#Acwx#(gx#O#Ac#O#P#Co#P#o#Ac#o#p#E^#p;'S#Ac;'S;=`#Ff<%lO#Ac0}#B|Z&TS&R,X&Z`&d!bOr!#drs!%`sw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W<%lO!#d0}#CrRO;'S#Ac;'S;=`#C{;=`O#Ac0}#D[`&TS&WW&R,X&Z`&d!b&f#tOY#AcYZ!#dZ]#Ac]^!#d^r#Acrs#Bqsw#Acwx#(gx#O#Ac#O#P#Co#P#o#Ac#o#p#E^#p;'S#Ac;'S;=`#Ff;=`<%l#Ac<%lO#Ac0}#Eg_&TS&WW&R,XOY#4lYZEmZ]#4l]^Em^r#4lrs#5nsw#4lwx#6bx#O#4l#O#P#8b#P#o#4l#o#p#Ac#p;'S#4l;'S;=`#9s<%lO#4l0}#FiP;=`<%l#AcGZ#F{`&TS&WW&R,X&Z`&d!b&f#tOY#AcYZ!#dZ]#Ac]^!#d^r#Acrs#Bqsw#Acwx#(gx#O#Ac#O#P#Co#P#o#Ac#o#p#E^#p;'S#Ac;'S;=`#Ff;=`<%l!MY<%lO#AcGZ#HQP;=`<%l!MYGZ#Hb]&^7[&TS&R,X&Z`&d!bOr'crs#IZsw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'cGZ#IjZ&X#|&^7[&TS&V,X&Z`&d!bOw!-kwx-sx#O!-k#O#P!.i#P#o!-k#o#p!(V#p#q!-k#q#r!&[#r;'S!-k;'S;=`!0P<%lO!-kMg#JpaQ1s&^7[&TS&WW&Z`&ap&d!b&f#tOY#J]YZ%TZ]#J]]^%T^r#J]rs#Kusw#J]wx%;ax#O#J]#O#P& a#P#o#J]#o#p&%b#p#q#J]#q#r&!^#r;'S#J];'S;=`&'u<%lO#J]Lu#LSaQ1s&^7[&TS&Z`&d!bOY#MXYZ'cZ]#MX]^'c^r#MXrs%6usw#MXwx#Nox#O#MX#O#P%*Z#P#o#MX#o#p%4^#p#q#MX#q#r%+W#r;'S#MX;'S;=`%6o<%lO#MXLu#MjaQ1s&^7[&TS&WW&Z`&d!b&f#tOY#MXYZ'cZ]#MX]^'c^r#MXrs#Kusw#MXwx#Nox#O#MX#O#P%*Z#P#o#MX#o#p%4^#p#q#MX#q#r%+W#r;'S#MX;'S;=`%6o<%lO#MXLe#NzaQ1s&^7[&WW&f#tOY$!PYZ)mZ]$!P]^)m^r$!Prs$#esw$!Pwx%#ix#O$!P#O#P$6g#P#o$!P#o#p$Hf#p#q$!P#q#r$7d#r;'S$!P;'S;=`%#c<%lO$!PLe$!`aQ1s&^7[&TS&WW&d!b&f#tOY$!PYZ)mZ]$!P]^)m^r$!Prs$#esw$!Pwx#Nox#O$!P#O#P$6g#P#o$!P#o#p$Hf#p#q$!P#q#r$7d#r;'S$!P;'S;=`%#c<%lO$!PLe$#paQ1s&^7[&TS&d!bOY$!PYZ)mZ]$!P]^)m^r$!Prs$$usw$!Pwx#Nox#O$!P#O#P$6g#P#o$!P#o#p$Hf#p#q$!P#q#r$7d#r;'S$!P;'S;=`%#c<%lO$!PLe$%QaQ1s&^7[&TS&d!bOY$!PYZ)mZ]$!P]^)m^r$!Prs$&Vsw$!Pwx#Nox#O$!P#O#P$6g#P#o$!P#o#p$Hf#p#q$!P#q#r$7d#r;'S$!P;'S;=`%#c<%lO$!PIg$&b_Q1s&^7[&TS&d!bOY$&VYZ,wZ]$&V]^,w^w$&Vwx$'ax#O$&V#O#P$+X#P#o$&V#o#p$0h#p#q$&V#q#r$,U#r;'S$&V;'S;=`$6a<%lO$&VIg$'h_Q1s&^7[OY$&VYZ,wZ]$&V]^,w^w$&Vwx$(gx#O$&V#O#P$+X#P#o$&V#o#p$0h#p#q$&V#q#r$,U#r;'S$&V;'S;=`$6a<%lO$&VIg$(n_Q1s&^7[OY$&VYZ,wZ]$&V]^,w^w$&Vwx$)mx#O$&V#O#P$+X#P#o$&V#o#p$0h#p#q$&V#q#r$,U#r;'S$&V;'S;=`$6a<%lO$&VHP$)tZQ1s&^7[OY$)mYZ/cZ]$)m]^/c^#o$)m#o#p$*g#p#q$)m#q#r$*g#r;'S$)m;'S;=`$+R<%lO$)m1s$*lTQ1sOY$*gZ]$*g^;'S$*g;'S;=`$*{<%lO$*g1s$+OP;=`<%l$*gHP$+UP;=`<%l$)mIg$+`[Q1s&^7[OY$&VYZ,wZ]$&V]^,w^#o$&V#o#p$,U#p#q$&V#q#r$,U#r;'S$&V;'S;=`$5j;=`<%l0l<%lO$&V3Z$,_]Q1s&TS&d!bOY$,UYZ0lZ]$,U]^0l^w$,Uwx$-Wx#O$,U#O#P$/S#P#o$,U#o#p$0h#p;'S$,U;'S;=`$5d<%lO$,U3Z$-]]Q1sOY$,UYZ0lZ]$,U]^0l^w$,Uwx$.Ux#O$,U#O#P$/S#P#o$,U#o#p$0h#p;'S$,U;'S;=`$5d<%lO$,U3Z$.Z]Q1sOY$,UYZ0lZ]$,U]^0l^w$,Uwx$*gx#O$,U#O#P$/S#P#o$,U#o#p$0h#p;'S$,U;'S;=`$5d<%lO$,U3Z$/XWQ1sOY$,UYZ0lZ]$,U]^0l^;'S$,U;'S;=`$/q;=`<%l0l<%lO$,U3Z$/xY&TS&d!bOw0lwx1`x#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z;=`<%l$,U<%lO0l3Z$0o]Q1s&TSOY$1hYZ4`Z]$1h]^4`^w$1hwx$2bx#O$1h#O#P$4Q#P#o$1h#o#p$,U#p;'S$1h;'S;=`$5^<%lO$1h1w$1oZQ1s&TSOY$1hYZ4`Z]$1h]^4`^w$1hwx$2bx#O$1h#O#P$4Q#P;'S$1h;'S;=`$5^<%lO$1h1w$2gZQ1sOY$1hYZ4`Z]$1h]^4`^w$1hwx$3Yx#O$1h#O#P$4Q#P;'S$1h;'S;=`$5^<%lO$1h1w$3_ZQ1sOY$1hYZ4`Z]$1h]^4`^w$1hwx$*gx#O$1h#O#P$4Q#P;'S$1h;'S;=`$5^<%lO$1h1w$4VWQ1sOY$1hYZ4`Z]$1h]^4`^;'S$1h;'S;=`$4o;=`<%l4`<%lO$1h1w$4tW&TSOw4`wx4zx#O4`#O#P5y#P;'S4`;'S;=`6t;=`<%l$1h<%lO4`1w$5aP;=`<%l$1h3Z$5gP;=`<%l$,UIg$5qY&TS&d!bOw0lwx1`x#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z;=`<%l$&V<%lO0lIg$6dP;=`<%l$&VLe$6n[Q1s&^7[OY$!PYZ)mZ]$!P]^)m^#o$!P#o#p$7d#p#q$!P#q#r$7d#r;'S$!P;'S;=`%!b;=`<%l8l<%lO$!P6X$7q_Q1s&TS&WW&d!b&f#tOY$7dYZ8lZ]$7d]^8l^r$7drs$8psw$7dwx$;Qx#O$7d#O#P$Fv#P#o$7d#o#p$Hf#p;'S$7d;'S;=`%![<%lO$7d6X$8y_Q1s&TS&d!bOY$7dYZ8lZ]$7d]^8l^r$7drs$9xsw$7dwx$;Qx#O$7d#O#P$Fv#P#o$7d#o#p$Hf#p;'S$7d;'S;=`%![<%lO$7d6X$:R_Q1s&TS&d!bOY$7dYZ8lZ]$7d]^8l^r$7drs$,Usw$7dwx$;Qx#O$7d#O#P$Fv#P#o$7d#o#p$Hf#p;'S$7d;'S;=`%![<%lO$7d6X$;Z_Q1s&WW&f#tOY$7dYZ8lZ]$7d]^8l^r$7drs$8psw$7dwx$<Yx#O$7d#O#P$Fv#P#o$7d#o#p$Hf#p;'S$7d;'S;=`%![<%lO$7d6X$<c_Q1s&WW&f#tOY$7dYZ8lZ]$7d]^8l^r$7drs$8psw$7dwx$=bx#O$7d#O#P$Fv#P#o$7d#o#p$Hf#p;'S$7d;'S;=`%![<%lO$7d4q$=k]Q1s&WW&f#tOY$=bYZ=QZ]$=b]^=Q^r$=brs$>ds#O$=b#O#P$@`#P#o$=b#o#p$At#p;'S$=b;'S;=`$Fp<%lO$=b4q$>i]Q1sOY$=bYZ=QZ]$=b]^=Q^r$=brs$?bs#O$=b#O#P$@`#P#o$=b#o#p$At#p;'S$=b;'S;=`$Fp<%lO$=b4q$?g]Q1sOY$=bYZ=QZ]$=b]^=Q^r$=brs$*gs#O$=b#O#P$@`#P#o$=b#o#p$At#p;'S$=b;'S;=`$Fp<%lO$=b4q$@eWQ1sOY$=bYZ=QZ]$=b]^=Q^;'S$=b;'S;=`$@};=`<%l=Q<%lO$=b4q$AUY&WW&f#tOr=Qrs=ts#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`;=`<%l$=b<%lO=Q4q$A{]Q1s&WWOY$BtYZ@tZ]$Bt]^@t^r$Btrs$Cns#O$Bt#O#P$E^#P#o$Bt#o#p$=b#p;'S$Bt;'S;=`$Fj<%lO$Bt1{$B{ZQ1s&WWOY$BtYZ@tZ]$Bt]^@t^r$Btrs$Cns#O$Bt#O#P$E^#P;'S$Bt;'S;=`$Fj<%lO$Bt1{$CsZQ1sOY$BtYZ@tZ]$Bt]^@t^r$Btrs$Dfs#O$Bt#O#P$E^#P;'S$Bt;'S;=`$Fj<%lO$Bt1{$DkZQ1sOY$BtYZ@tZ]$Bt]^@t^r$Btrs$*gs#O$Bt#O#P$E^#P;'S$Bt;'S;=`$Fj<%lO$Bt1{$EcWQ1sOY$BtYZ@tZ]$Bt]^@t^;'S$Bt;'S;=`$E{;=`<%l@t<%lO$Bt1{$FQW&WWOr@trsA`s#O@t#O#PB_#P;'S@t;'S;=`CY;=`<%l$Bt<%lO@t1{$FmP;=`<%l$Bt4q$FsP;=`<%l$=b6X$F{WQ1sOY$7dYZ8lZ]$7d]^8l^;'S$7d;'S;=`$Ge;=`<%l8l<%lO$7d6X$Gp[&TS&WW&d!b&f#tOr8lrs9jsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`;=`<%l$7d<%lO8l6X$Ho_Q1s&TS&WWOY$InYZEmZ]$In]^Em^r$Inrs$Jpsw$Inwx$Lpx#O$In#O#P$Np#P#o$In#o#p$7d#p;'S$In;'S;=`%!U<%lO$In2P$Iw]Q1s&TS&WWOY$InYZEmZ]$In]^Em^r$Inrs$Jpsw$Inwx$Lpx#O$In#O#P$Np#P;'S$In;'S;=`%!U<%lO$In2P$Jw]Q1s&TSOY$InYZEmZ]$In]^Em^r$Inrs$Kpsw$Inwx$Lpx#O$In#O#P$Np#P;'S$In;'S;=`%!U<%lO$In2P$Kw]Q1s&TSOY$InYZEmZ]$In]^Em^r$Inrs$1hsw$Inwx$Lpx#O$In#O#P$Np#P;'S$In;'S;=`%!U<%lO$In2P$Lw]Q1s&WWOY$InYZEmZ]$In]^Em^r$Inrs$Jpsw$Inwx$Mpx#O$In#O#P$Np#P;'S$In;'S;=`%!U<%lO$In2P$Mw]Q1s&WWOY$InYZEmZ]$In]^Em^r$Inrs$Jpsw$Inwx$Btx#O$In#O#P$Np#P;'S$In;'S;=`%!U<%lO$In2P$NuWQ1sOY$InYZEmZ]$In]^Em^;'S$In;'S;=`% _;=`<%lEm<%lO$In2P% fY&TS&WWOrEmrsFaswEmwxGsx#OEm#O#PIV#P;'SEm;'S;=`JY;=`<%l$In<%lOEm2P%!XP;=`<%l$In6X%!_P;=`<%l$7dLe%!m[&TS&WW&d!b&f#tOr8lrs9jsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`;=`<%l$!P<%lO8lLe%#fP;=`<%l$!PLe%#taQ1s&^7[&WW&f#tOY$!PYZ)mZ]$!P]^)m^r$!Prs$#esw$!Pwx%$yx#O$!P#O#P$6g#P#o$!P#o#p$Hf#p#q$!P#q#r$7d#r;'S$!P;'S;=`%#c<%lO$!PJ}%%U_Q1s&^7[&WW&f#tOY%$yYZLoZ]%$y]^Lo^r%$yrs%&Ts#O%$y#O#P%(a#P#o%$y#o#p$At#p#q%$y#q#r$=b#r;'S%$y;'S;=`%*T<%lO%$yJ}%&[_Q1s&^7[OY%$yYZLoZ]%$y]^Lo^r%$yrs%'Zs#O%$y#O#P%(a#P#o%$y#o#p$At#p#q%$y#q#r$=b#r;'S%$y;'S;=`%*T<%lO%$yJ}%'b_Q1s&^7[OY%$yYZLoZ]%$y]^Lo^r%$yrs$)ms#O%$y#O#P%(a#P#o%$y#o#p$At#p#q%$y#q#r$=b#r;'S%$y;'S;=`%*T<%lO%$yJ}%(h[Q1s&^7[OY%$yYZLoZ]%$y]^Lo^#o%$y#o#p$=b#p#q%$y#q#r$=b#r;'S%$y;'S;=`%)^;=`<%l=Q<%lO%$yJ}%)eY&WW&f#tOr=Qrs=ts#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`;=`<%l%$y<%lO=QJ}%*WP;=`<%l%$yLu%*b[Q1s&^7[OY#MXYZ'cZ]#MX]^'c^#o#MX#o#p%+W#p#q#MX#q#r%+W#r;'S#MX;'S;=`%5l;=`<%l!#d<%lO#MX6i%+g_Q1s&TS&WW&Z`&d!b&f#tOY%+WYZ!#dZ]%+W]^!#d^r%+Wrs%,fsw%+Wwx$;Qx#O%+W#O#P%2l#P#o%+W#o#p%4^#p;'S%+W;'S;=`%5f<%lO%+W6i%,q_Q1s&TS&Z`&d!bOY%+WYZ!#dZ]%+W]^!#d^r%+Wrs%-psw%+Wwx$;Qx#O%+W#O#P%2l#P#o%+W#o#p%4^#p;'S%+W;'S;=`%5f<%lO%+W6i%-{_Q1s&TS&Z`&d!bOY%+WYZ!#dZ]%+W]^!#d^r%+Wrs%.zsw%+Wwx$;Qx#O%+W#O#P%2l#P#o%+W#o#p%4^#p;'S%+W;'S;=`%5f<%lO%+W3k%/V]Q1s&TS&Z`&d!bOY%.zYZ!&[Z]%.z]^!&[^w%.zwx$-Wx#O%.z#O#P%0O#P#o%.z#o#p%1f#p;'S%.z;'S;=`%2f<%lO%.z3k%0TWQ1sOY%.zYZ!&[Z]%.z]^!&[^;'S%.z;'S;=`%0m;=`<%l!&[<%lO%.z3k%0vY&TS&Z`&d!bOw!&[wx1`x#O!&[#O#P!'Q#P#o!&[#o#p!(V#p;'S!&[;'S;=`!(w;=`<%l%.z<%lO!&[3k%1m]Q1s&TSOY$1hYZ4`Z]$1h]^4`^w$1hwx$2bx#O$1h#O#P$4Q#P#o$1h#o#p%.z#p;'S$1h;'S;=`$5^<%lO$1h3k%2iP;=`<%l%.z6i%2qWQ1sOY%+WYZ!#dZ]%+W]^!#d^;'S%+W;'S;=`%3Z;=`<%l!#d<%lO%+W6i%3h[&TS&WW&Z`&d!b&f#tOr!#drs!$dsw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W;=`<%l%+W<%lO!#d6i%4g_Q1s&TS&WWOY$InYZEmZ]$In]^Em^r$Inrs$Jpsw$Inwx$Lpx#O$In#O#P$Np#P#o$In#o#p%+W#p;'S$In;'S;=`%!U<%lO$In6i%5iP;=`<%l%+WLu%5y[&TS&WW&Z`&d!b&f#tOr!#drs!$dsw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W;=`<%l#MX<%lO!#dLu%6rP;=`<%l#MXLu%7SaQ1s&^7[&TS&Z`&d!bOY#MXYZ'cZ]#MX]^'c^r#MXrs%8Xsw#MXwx#Nox#O#MX#O#P%*Z#P#o#MX#o#p%4^#p#q#MX#q#r%+W#r;'S#MX;'S;=`%6o<%lO#MXIw%8f_Q1s&^7[&TS&Z`&d!bOY%8XYZ!-kZ]%8X]^!-k^w%8Xwx$'ax#O%8X#O#P%9e#P#o%8X#o#p%1f#p#q%8X#q#r%.z#r;'S%8X;'S;=`%;Z<%lO%8XIw%9l[Q1s&^7[OY%8XYZ!-kZ]%8X]^!-k^#o%8X#o#p%.z#p#q%8X#q#r%.z#r;'S%8X;'S;=`%:b;=`<%l!&[<%lO%8XIw%:kY&TS&Z`&d!bOw!&[wx1`x#O!&[#O#P!'Q#P#o!&[#o#p!(V#p;'S!&[;'S;=`!(w;=`<%l%8X<%lO!&[Iw%;^P;=`<%l%8XMV%;naQ1s&^7[&WW&ap&f#tOY%<sYZ!1ZZ]%<s]^!1Z^r%<srs$#esw%<swx%Jux#O%<s#O#P%>Z#P#o%<s#o#p%H^#p#q%<s#q#r%?W#r;'S%<s;'S;=`%Jo<%lO%<sMV%=UaQ1s&^7[&TS&WW&ap&d!b&f#tOY%<sYZ!1ZZ]%<s]^!1Z^r%<srs$#esw%<swx%;ax#O%<s#O#P%>Z#P#o%<s#o#p%H^#p#q%<s#q#r%?W#r;'S%<s;'S;=`%Jo<%lO%<sMV%>b[Q1s&^7[OY%<sYZ!1ZZ]%<s]^!1Z^#o%<s#o#p%?W#p#q%<s#q#r%?W#r;'S%<s;'S;=`%Il;=`<%l!3Q<%lO%<s6y%?g_Q1s&TS&WW&ap&d!b&f#tOY%?WYZ!3QZ]%?W]^!3Q^r%?Wrs$8psw%?Wwx%@fx#O%?W#O#P%Fl#P#o%?W#o#p%H^#p;'S%?W;'S;=`%If<%lO%?W6y%@q_Q1s&WW&ap&f#tOY%?WYZ!3QZ]%?W]^!3Q^r%?Wrs$8psw%?Wwx%Apx#O%?W#O#P%Fl#P#o%?W#o#p%H^#p;'S%?W;'S;=`%If<%lO%?W6y%A{_Q1s&WW&ap&f#tOY%?WYZ!3QZ]%?W]^!3Q^r%?Wrs$8psw%?Wwx%Bzx#O%?W#O#P%Fl#P#o%?W#o#p%H^#p;'S%?W;'S;=`%If<%lO%?W5c%CV]Q1s&WW&ap&f#tOY%BzYZ!5xZ]%Bz]^!5x^r%Bzrs$>ds#O%Bz#O#P%DO#P#o%Bz#o#p%Ef#p;'S%Bz;'S;=`%Ff<%lO%Bz5c%DTWQ1sOY%BzYZ!5xZ]%Bz]^!5x^;'S%Bz;'S;=`%Dm;=`<%l!5x<%lO%Bz5c%DvY&WW&ap&f#tOr!5xrs=ts#O!5x#O#P!6n#P#o!5x#o#p!7s#p;'S!5x;'S;=`!8e;=`<%l%Bz<%lO!5x5c%Em]Q1s&WWOY$BtYZ@tZ]$Bt]^@t^r$Btrs$Cns#O$Bt#O#P$E^#P#o$Bt#o#p%Bz#p;'S$Bt;'S;=`$Fj<%lO$Bt5c%FiP;=`<%l%Bz6y%FqWQ1sOY%?WYZ!3QZ]%?W]^!3Q^;'S%?W;'S;=`%GZ;=`<%l!3Q<%lO%?W6y%Gh[&TS&WW&ap&d!b&f#tOr!3Qrs9jsw!3Qwx!4Qx#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t;=`<%l%?W<%lO!3Q6y%Hg_Q1s&TS&WWOY$InYZEmZ]$In]^Em^r$Inrs$Jpsw$Inwx$Lpx#O$In#O#P$Np#P#o$In#o#p%?W#p;'S$In;'S;=`%!U<%lO$In6y%IiP;=`<%l%?WMV%Iy[&TS&WW&ap&d!b&f#tOr!3Qrs9jsw!3Qwx!4Qx#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t;=`<%l%<s<%lO!3QMV%JrP;=`<%l%<sMV%KSaQ1s&^7[&WW&ap&f#tOY%<sYZ!1ZZ]%<s]^!1Z^r%<srs$#esw%<swx%LXx#O%<s#O#P%>Z#P#o%<s#o#p%H^#p#q%<s#q#r%?W#r;'S%<s;'S;=`%Jo<%lO%<sKo%Lf_Q1s&^7[&WW&ap&f#tOY%LXYZ!=XZ]%LX]^!=X^r%LXrs%&Ts#O%LX#O#P%Me#P#o%LX#o#p%Ef#p#q%LX#q#r%Bz#r;'S%LX;'S;=`& Z<%lO%LXKo%Ml[Q1s&^7[OY%LXYZ!=XZ]%LX]^!=X^#o%LX#o#p%Bz#p#q%LX#q#r%Bz#r;'S%LX;'S;=`%Nb;=`<%l!5x<%lO%LXKo%NkY&WW&ap&f#tOr!5xrs=ts#O!5x#O#P!6n#P#o!5x#o#p!7s#p;'S!5x;'S;=`!8e;=`<%l%LX<%lO!5xKo& ^P;=`<%l%LXMg& h[Q1s&^7[OY#J]YZ%TZ]#J]]^%T^#o#J]#o#p&!^#p#q#J]#q#r&!^#r;'S#J];'S;=`&&p;=`<%l!@b<%lO#J]7Z&!o_Q1s&TS&WW&Z`&ap&d!b&f#tOY&!^YZ!@bZ]&!^]^!@b^r&!^rs%,fsw&!^wx%@fx#O&!^#O#P&#n#P#o&!^#o#p&%b#p;'S&!^;'S;=`&&j<%lO&!^7Z&#sWQ1sOY&!^YZ!@bZ]&!^]^!@b^;'S&!^;'S;=`&$];=`<%l!@b<%lO&!^7Z&$l[&TS&WW&Z`&ap&d!b&f#tOr!@brs!$dsw!@bwx!4Qx#O!@b#O#P!Ad#P#o!@b#o#p!Bu#p;'S!@b;'S;=`!Co;=`<%l&!^<%lO!@b7Z&%k_Q1s&TS&WWOY$InYZEmZ]$In]^Em^r$Inrs$Jpsw$Inwx$Lpx#O$In#O#P$Np#P#o$In#o#p&!^#p;'S$In;'S;=`%!U<%lO$In7Z&&mP;=`<%l&!^Mg&'P[&TS&WW&Z`&ap&d!b&f#tOr!@brs!$dsw!@bwx!4Qx#O!@b#O#P!Ad#P#o!@b#o#p!Bu#p;'S!@b;'S;=`!Co;=`<%l#J]<%lO!@bMg&'xP;=`<%l#J]Gz&(`_%jQ&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGz&)r]!s,W&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGz&+O_%dQ&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{&,^a&_`&^7[&WW&R,X&ap&f#tOY&-cYZ!1ZZ]&-c]^!1Z^r&-crs&.ysw&-cwx'(^x#O&-c#O#P&N}#P#o&-c#o#p'%g#p#q&-c#q#r' l#r;'S&-c;'S;=`'(W<%lO&-cGk&-ta&^7[&TS&WW&R,X&ap&d!b&f#tOY&-cYZ!1ZZ]&-c]^!1Z^r&-crs&.ysw&-cwx&Mwx#O&-c#O#P&N}#P#o&-c#o#p'%g#p#q&-c#q#r' l#r;'S&-c;'S;=`'(W<%lO&-cFy&/Ua&^7[&TS&R,X&d!bOY&0ZYZ)mZ]&0Z]^)m^r&0Zrs&Hisw&0Zwx&1ox#O&0Z#O#P&2s#P#o&0Z#o#p&@g#p#q&0Z#q#r&3b#r;'S&0Z;'S;=`&Hc<%lO&0ZFy&0ja&^7[&TS&WW&R,X&d!b&f#tOY&0ZYZ)mZ]&0Z]^)m^r&0Zrs&.ysw&0Zwx&1ox#O&0Z#O#P&2s#P#o&0Z#o#p&@g#p#q&0Z#q#r&3b#r;'S&0Z;'S;=`&Hc<%lO&0ZFy&1z]&^7[&WW&R,X&f#tOr)mrs*ssw)mwxKmx#O)m#O#P7}#P#o)m#o#pDs#p#q)m#q#r8l#r;'S)m;'S;=`Kg<%lO)mFy&2xW&^7[O#o&0Z#o#p&3b#p#q&0Z#q#r&3b#r;'S&0Z;'S;=`&GS;=`<%l&3b<%lO&0Z0m&3o_&TS&WW&R,X&d!b&f#tOY&3bYZ8lZ]&3b]^8l^r&3brs&4nsw&3bwx&>Ox#O&3b#O#P&>z#P#o&3b#o#p&@g#p;'S&3b;'S;=`&F|<%lO&3b0m&4w_&TS&R,X&d!bOY&3bYZ8lZ]&3b]^8l^r&3brs&5vsw&3bwx&>Ox#O&3b#O#P&>z#P#o&3b#o#p&@g#p;'S&3b;'S;=`&F|<%lO&3b0m&6P_&TS&R,X&d!bOY&3bYZ8lZ]&3b]^8l^r&3brs&7Osw&3bwx&>Ox#O&3b#O#P&>z#P#o&3b#o#p&@g#p;'S&3b;'S;=`&F|<%lO&3b-o&7X]&TS&R,X&d!bOY&7OYZ0lZ]&7O]^0l^w&7Owx&8Qx#O&7O#O#P&8r#P#o&7O#o#p&:T#p;'S&7O;'S;=`&=x<%lO&7O-o&8VX&R,XOw0lwx2Ox#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z<%lO0l-o&8uRO;'S&7O;'S;=`&9O;=`O&7O-o&9X^&TS&R,X&d!bOY&7OYZ0lZ]&7O]^0l^w&7Owx&8Qx#O&7O#O#P&8r#P#o&7O#o#p&:T#p;'S&7O;'S;=`&=x;=`<%l&7O<%lO&7O-o&:[]&TS&R,XOY&;TYZ4`Z]&;T]^4`^w&;Twx&;}x#O&;T#O#P&<i#P#o&;T#o#p&7O#p;'S&;T;'S;=`&=r<%lO&;T,]&;[Z&TS&R,XOY&;TYZ4`Z]&;T]^4`^w&;Twx&;}x#O&;T#O#P&<i#P;'S&;T;'S;=`&=r<%lO&;T,]&<SV&R,XOw4`wx5dx#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`,]&<lRO;'S&;T;'S;=`&<u;=`O&;T,]&<|[&TS&R,XOY&;TYZ4`Z]&;T]^4`^w&;Twx&;}x#O&;T#O#P&<i#P;'S&;T;'S;=`&=r;=`<%l&;T<%lO&;T,]&=uP;=`<%l&;T-o&={P;=`<%l&7O0m&>XZ&WW&R,X&f#tOr8lrs9jsw8lwx<Wx#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`<%lO8l0m&>}RO;'S&3b;'S;=`&?W;=`O&3b0m&?e`&TS&WW&R,X&d!b&f#tOY&3bYZ8lZ]&3b]^8l^r&3brs&4nsw&3bwx&>Ox#O&3b#O#P&>z#P#o&3b#o#p&@g#p;'S&3b;'S;=`&F|;=`<%l&3b<%lO&3b0m&@p_&TS&WW&R,XOY&AoYZEmZ]&Ao]^Em^r&Aors&Bqsw&Aowx&Dqx#O&Ao#O#P&Ee#P#o&Ao#o#p&3b#p;'S&Ao;'S;=`&Fv<%lO&Ao,e&Ax]&TS&WW&R,XOY&AoYZEmZ]&Ao]^Em^r&Aors&Bqsw&Aowx&Dqx#O&Ao#O#P&Ee#P;'S&Ao;'S;=`&Fv<%lO&Ao,e&Bx]&TS&R,XOY&AoYZEmZ]&Ao]^Em^r&Aors&Cqsw&Aowx&Dqx#O&Ao#O#P&Ee#P;'S&Ao;'S;=`&Fv<%lO&Ao,e&Cx]&TS&R,XOY&AoYZEmZ]&Ao]^Em^r&Aors&;Tsw&Aowx&Dqx#O&Ao#O#P&Ee#P;'S&Ao;'S;=`&Fv<%lO&Ao,e&DxX&WW&R,XOrEmrsFaswEmwxHex#OEm#O#PIV#P;'SEm;'S;=`JY<%lOEm,e&EhRO;'S&Ao;'S;=`&Eq;=`O&Ao,e&Ez^&TS&WW&R,XOY&AoYZEmZ]&Ao]^Em^r&Aors&Bqsw&Aowx&Dqx#O&Ao#O#P&Ee#P;'S&Ao;'S;=`&Fv;=`<%l&Ao<%lO&Ao,e&FyP;=`<%l&Ao0m&GPP;=`<%l&3bFy&Ga`&TS&WW&R,X&d!b&f#tOY&3bYZ8lZ]&3b]^8l^r&3brs&4nsw&3bwx&>Ox#O&3b#O#P&>z#P#o&3b#o#p&@g#p;'S&3b;'S;=`&F|;=`<%l&0Z<%lO&3bFy&HfP;=`<%l&0ZFy&Hta&^7[&TS&R,X&d!bOY&0ZYZ)mZ]&0Z]^)m^r&0Zrs&Iysw&0Zwx&1ox#O&0Z#O#P&2s#P#o&0Z#o#p&@g#p#q&0Z#q#r&3b#r;'S&0Z;'S;=`&Hc<%lO&0ZC{&JU_&^7[&TS&R,X&d!bOY&IyYZ,wZ]&Iy]^,w^w&Iywx&KTx#O&Iy#O#P&K}#P#o&Iy#o#p&:T#p#q&Iy#q#r&7O#r;'S&Iy;'S;=`&Mq<%lO&IyC{&K[Z&^7[&R,XOw,wwx.kx#O,w#O#P/}#P#o,w#o#p3n#p#q,w#q#r0l#r;'S,w;'S;=`7w<%lO,wC{&LSW&^7[O#o&Iy#o#p&7O#p#q&Iy#q#r&7O#r;'S&Iy;'S;=`&Ll;=`<%l&7O<%lO&IyC{&Lu^&TS&R,X&d!bOY&7OYZ0lZ]&7O]^0l^w&7Owx&8Qx#O&7O#O#P&8r#P#o&7O#o#p&:T#p;'S&7O;'S;=`&=x;=`<%l&Iy<%lO&7OC{&MtP;=`<%l&IyGk&NU]&^7[&WW&R,X&ap&f#tOr!1Zrs*ssw!1Zwx!<Tx#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1ZGk' SW&^7[O#o&-c#o#p' l#p#q&-c#q#r' l#r;'S&-c;'S;=`'&u;=`<%l' l<%lO&-c1_' {_&TS&WW&R,X&ap&d!b&f#tOY' lYZ!3QZ]' l]^!3Q^r' lrs&4nsw' lwx'!zx#O' l#O#P'#x#P#o' l#o#p'%g#p;'S' l;'S;=`'&o<%lO' l1_'#VZ&WW&R,X&ap&f#tOr!3Qrs9jsw!3Qwx!4|x#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t<%lO!3Q1_'#{RO;'S' l;'S;=`'$U;=`O' l1_'$e`&TS&WW&R,X&ap&d!b&f#tOY' lYZ!3QZ]' l]^!3Q^r' lrs&4nsw' lwx'!zx#O' l#O#P'#x#P#o' l#o#p'%g#p;'S' l;'S;=`'&o;=`<%l' l<%lO' l1_'%p_&TS&WW&R,XOY&AoYZEmZ]&Ao]^Em^r&Aors&Bqsw&Aowx&Dqx#O&Ao#O#P&Ee#P#o&Ao#o#p' l#p;'S&Ao;'S;=`&Fv<%lO&Ao1_'&rP;=`<%l' lGk''U`&TS&WW&R,X&ap&d!b&f#tOY' lYZ!3QZ]' l]^!3Q^r' lrs&4nsw' lwx'!zx#O' l#O#P'#x#P#o' l#o#p'%g#p;'S' l;'S;=`'&o;=`<%l&-c<%lO' lGk'(ZP;=`<%l&-cGk'(k]&^7[&WW&R,X&ap&f#tOr!1Zrs*ssw!1Zwx')dx#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1ZGk')sZ&U!f&^7[&WW&S,X&ap&f#tOr!=XrsMks#O!=X#O#P!>V#P#o!=X#o#p!7s#p#q!=X#q#r!5x#r;'S!=X;'S;=`!?m<%lO!=XG{'*y]f,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<u',V]eR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{'-caT,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vxz%Tz{'.h{!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{'.{__R&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{'0__%g,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<u'1q]xR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TMg'2}`%h,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`!a'4P!a#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TB^'4d]&q&j&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{'5pa!dQ&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!O%T!O!P'6u!P!Q%T!Q!['9c![#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{'7W_&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!O%T!O!P'8V!P#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{'8j]!m,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'9vi!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!['9c![!g%T!g!h';e!h!l%T!l!m'@X!m#O%T#O#P!?s#P#R%T#R#S'9c#S#X%T#X#Y';e#Y#^%T#^#_'@X#_#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy';vc&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx{%T{|'=R|}%T}!O'=R!O!Q%T!Q!['>c![#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'=d_&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!['>c![#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'>ve!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!['>c![!l%T!l!m'@X!m#O%T#O#P!?s#P#R%T#R#S'>c#S#^%T#^#_'@X#_#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'@l]!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{'Axa%iR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!P%T!P!Q'B}!Q!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGz'Cb_%kQ&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'Dtw!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!O%T!O!P'G_!P!Q%T!Q!['Ho![!d%T!d!e'Jw!e!g%T!g!h';e!h!l%T!l!m'@X!m!q%T!q!r'M}!r!z%T!z!{(!}!{#O%T#O#P!?s#P#R%T#R#S'Ho#S#U%T#U#V'Jw#V#X%T#X#Y';e#Y#^%T#^#_'@X#_#c%T#c#d'M}#d#l%T#l#m(!}#m#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'Gp_&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!['9c![#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'ISk!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!O%T!O!P'G_!P!Q%T!Q!['Ho![!g%T!g!h';e!h!l%T!l!m'@X!m#O%T#O#P!?s#P#R%T#R#S'Ho#S#X%T#X#Y';e#Y#^%T#^#_'@X#_#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'KYb&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!R'Lb!R!S'Lb!S#O%T#O#P!?s#P#R%T#R#S'Lb#S#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'Lub!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!R'Lb!R!S'Lb!S#O%T#O#P!?s#P#R%T#R#S'Lb#S#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'N`a&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!Y( e!Y#O%T#O#P!?s#P#R%T#R#S( e#S#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy( xa!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!Y( e!Y#O%T#O#P!?s#P#R%T#R#S( e#S#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy(#`e&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q![($q![!c%T!c!i($q!i#O%T#O#P!?s#P#R%T#R#S($q#S#T%T#T#Z($q#Z#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy(%Ue!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q![($q![!c%T!c!i($q!i#O%T#O#P!?s#P#R%T#R#S($q#S#T%T#T#Z($q#Z#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TMg(&z_y1s&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`('y!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<u((^]%sR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{()j]#^,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{(*vakR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!^%T!^!_(+{!_!`!I[!`!a!I[!a#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGz(,`_%eQ&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{(-r_%r,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`!I[!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{(/U`kR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`!I[!`!a(0W!a#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGz(0k_%fQ&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{(2P_]Q#tP&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TMg(3ee&^7[&TS&WW&Q&j&Z`&ap&d!b&f#t%m,XOr%Trs&_sw%Twx!0Vx!Q%T!Q![(3O![!c%T!c!}(3O!}#O%T#O#P!?s#P#R%T#R#S(3O#S#T%T#T#o(3O#o#p!Bu#p#q%T#q#r!@b#r$g%T$g;'S(3O;'S;=`(4v<%lO(3OMg(4yP;=`<%l(3OMg(5ci&^7[&TS&WW&Q&j&Z`&ap&d!b&f#t%m,XOr%Trs(7Qsw%Twx(:jx!Q%T!Q![(3O![!c%T!c!t(3O!t!u(>S!u!}(3O!}#O%T#O#P!?s#P#R%T#R#S(3O#S#T%T#T#f(3O#f#g(>S#g#o(3O#o#p!Bu#p#q%T#q#r!@b#r$g%T$g;'S(3O;'S;=`(4v<%lO(3OGZ(7_a&^7[&TS&R,X&Z`&d!bOY!MYYZ'cZ]!MY]^'c^r!MYrs(8dsw!MYwx# vx#O!MY#O#P#@t#P#o!MY#o#p#E^#p#q!MY#q#r#Ac#r;'S!MY;'S;=`#G}<%lO!MYGZ(8q]&^7[&TS&R,X&Z`&d!bOr'crs(9jsw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'cD](9wZ&^7[&TS&V,X&Z`&d!bOw!-kwx-sx#O!-k#O#P!.i#P#o!-k#o#p!(V#p#q!-k#q#r!&[#r;'S!-k;'S;=`!0P<%lO!-kGk(:wa&^7[&WW&R,X&ap&f#tOY&-cYZ!1ZZ]&-c]^!1Z^r&-crs&.ysw&-cwx(;|x#O&-c#O#P&N}#P#o&-c#o#p'%g#p#q&-c#q#r' l#r;'S&-c;'S;=`'(W<%lO&-cGk(<Z]&^7[&WW&R,X&ap&f#tOr!1Zrs*ssw!1Zwx(=Sx#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1ZFT(=aZ&^7[&WW&S,X&ap&f#tOr!=XrsMks#O!=X#O#P!>V#P#o!=X#o#p!7s#p#q!=X#q#r!5x#r;'S!=X;'S;=`!?m<%lO!=XMg(>ie&^7[&TS&WW&Q&j&Z`&ap&d!b&f#t%m,XOr%Trs(7Qsw%Twx(:jx!Q%T!Q![(3O![!c%T!c!}(3O!}#O%T#O#P!?s#P#R%T#R#S(3O#S#T%T#T#o(3O#o#p!Bu#p#q%T#q#r!@b#r$g%T$g;'S(3O;'S;=`(4v<%lO(3OMg(@ai&^7[&TS&WW&Q&j&Z`&ap&d!b&f#t%m,XOr%Trs(BOsw%Twx(EYx!Q%T!Q![(3O![!c%T!c!t(3O!t!u(Hd!u!}(3O!}#O%T#O#P!?s#P#R%T#R#S(3O#S#T%T#T#f(3O#f#g(Hd#g#o(3O#o#p!Bu#p#q%T#q#r!@b#r$g%T$g;'S(3O;'S;=`(4v<%lO(3OGZ(B]]&^7[&TS&Z`&d!b&`,XOr'crs(CUsw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'cGZ(Ca]&^7[&TS&Z`&d!bOr'crs(DYsw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'cD](DgZ&^7[&TS&e,X&Z`&d!bOw!-kwx-sx#O!-k#O#P!.i#P#o!-k#o#p!(V#p#q!-k#q#r!&[#r;'S!-k;'S;=`!0P<%lO!-kGk(Eg]&^7[&WW&ap&f#t&Y,XOr!1Zrs*ssw!1Zwx(F`x#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1ZGk(Fk]&^7[&WW&ap&f#tOr!1Zrs*ssw!1Zwx(Gdx#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1ZFT(GqZ&^7[&WW&c,X&ap&f#tOr!=XrsMks#O!=X#O#P!>V#P#o!=X#o#p!7s#p#q!=X#q#r!5x#r;'S!=X;'S;=`!?m<%lO!=XMg(Hye&^7[&TS&WW&Q&j&Z`&ap&d!b&f#t%m,XOr%Trs(BOsw%Twx(EYx!Q%T!Q![(3O![!c%T!c!}(3O!}#O%T#O#P!?s#P#R%T#R#S(3O#S#T%T#T#o(3O#o#p!Bu#p#q%T#q#r!@b#r$g%T$g;'S(3O;'S;=`(4v<%lO(3OMg(Jqm&^7[&TS&WW&Q&j&Z`&ap&d!b&f#t%m,XOr%Trs(7Qsw%Twx(:jx!Q%T!Q![(3O![!c%T!c!h(3O!h!i(Hd!i!t(3O!t!u(>S!u!}(3O!}#O%T#O#P!?s#P#R%T#R#S(3O#S#T%T#T#U(3O#U#V(>S#V#Y(3O#Y#Z(Hd#Z#o(3O#o#p!Bu#p#q%T#q#r!@b#r$g%T$g;'S(3O;'S;=`(4v<%lO(3OG{(MP]!V,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<u(N]]!UR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGz) i_%cQ&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy)!qZ&TS&WW!ZGmOrEmrsFaswEmwxGsx#OEm#O#PIV#P#oEm#o#p!@b#p;'SEm;'S;=`JY<%lOEmG{)#w_%bR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<u)%XZ!Y7_&TS&WW&Z`&ap&d!b&f#tOr!@brs!$dsw!@bwx!4Qx#O!@b#O#P!Ad#P#o!@b#o#p!Bu#p;'S!@b;'S;=`!Co<%lO!@bGy)&_]%l,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T",tokenizers:[legacyPrint,indentation,0,1,2,3,4,5,6,7,8,9,10,newlines],topRules:{Script:[0,3]},specialized:[{term:213,get:ft=>spec_identifier$1[ft]||-1}],tokenPrec:7282});class Text{constructor(){}lineAt(lt){if(lt<0||lt>this.length)throw new RangeError(`Invalid position ${lt} in document of length ${this.length}`);return this.lineInner(lt,!1,1,0)}line(lt){if(lt<1||lt>this.lines)throw new RangeError(`Invalid line number ${lt} in ${this.lines}-line document`);return this.lineInner(lt,!0,1,0)}replace(lt,dt,vt){let Tt=[];return this.decompose(0,lt,Tt,2),vt.length&&vt.decompose(0,vt.length,Tt,3),this.decompose(dt,this.length,Tt,1),TextNode.from(Tt,this.length-(dt-lt)+vt.length)}append(lt){return this.replace(this.length,this.length,lt)}slice(lt,dt=this.length){let vt=[];return this.decompose(lt,dt,vt,0),TextNode.from(vt,dt-lt)}eq(lt){if(lt==this)return!0;if(lt.length!=this.length||lt.lines!=this.lines)return!1;let dt=this.scanIdentical(lt,1),vt=this.length-this.scanIdentical(lt,-1),Tt=new RawTextCursor(this),Et=new RawTextCursor(lt);for(let Ct=dt,Rt=dt;;){if(Tt.next(Ct),Et.next(Ct),Ct=0,Tt.lineBreak!=Et.lineBreak||Tt.done!=Et.done||Tt.value!=Et.value)return!1;if(Rt+=Tt.value.length,Tt.done||Rt>=vt)return!0}}iter(lt=1){return new RawTextCursor(this,lt)}iterRange(lt,dt=this.length){return new PartialTextCursor(this,lt,dt)}iterLines(lt,dt){let vt;if(lt==null)vt=this.iter();else{dt==null&&(dt=this.lines+1);let Tt=this.line(lt).from;vt=this.iterRange(Tt,Math.max(Tt,dt==this.lines+1?this.length:dt<=1?0:this.line(dt-1).to))}return new LineCursor(vt)}toString(){return this.sliceString(0)}toJSON(){let lt=[];return this.flatten(lt),lt}static of(lt){if(lt.length==0)throw new RangeError("A document must have at least one line");return lt.length==1&&!lt[0]?Text.empty:lt.length<=32?new TextLeaf(lt):TextNode.from(TextLeaf.split(lt,[]))}}class TextLeaf extends Text{constructor(lt,dt=textLength(lt)){super(),this.text=lt,this.length=dt}get lines(){return this.text.length}get children(){return null}lineInner(lt,dt,vt,Tt){for(let Et=0;;Et++){let Ct=this.text[Et],Rt=Tt+Ct.length;if((dt?vt:Rt)>=lt)return new Line(Tt,Rt,vt,Ct);Tt=Rt+1,vt++}}decompose(lt,dt,vt,Tt){let Et=lt<=0&&dt>=this.length?this:new TextLeaf(sliceText(this.text,lt,dt),Math.min(dt,this.length)-Math.max(0,lt));if(Tt&1){let Ct=vt.pop(),Rt=appendText(Et.text,Ct.text.slice(),0,Et.length);if(Rt.length<=32)vt.push(new TextLeaf(Rt,Ct.length+Et.length));else{let kt=Rt.length>>1;vt.push(new TextLeaf(Rt.slice(0,kt)),new TextLeaf(Rt.slice(kt)))}}else vt.push(Et)}replace(lt,dt,vt){if(!(vt instanceof TextLeaf))return super.replace(lt,dt,vt);let Tt=appendText(this.text,appendText(vt.text,sliceText(this.text,0,lt)),dt),Et=this.length+vt.length-(dt-lt);return Tt.length<=32?new TextLeaf(Tt,Et):TextNode.from(TextLeaf.split(Tt,[]),Et)}sliceString(lt,dt=this.length,vt=`
`){let Tt="";for(let Et=0,Ct=0;Et<=dt&&Ct<this.text.length;Ct++){let Rt=this.text[Ct],kt=Et+Rt.length;Et>lt&&Ct&&(Tt+=vt),lt<kt&&dt>Et&&(Tt+=Rt.slice(Math.max(0,lt-Et),dt-Et)),Et=kt+1}return Tt}flatten(lt){for(let dt of this.text)lt.push(dt)}scanIdentical(){return 0}static split(lt,dt){let vt=[],Tt=-1;for(let Et of lt)vt.push(Et),Tt+=Et.length+1,vt.length==32&&(dt.push(new TextLeaf(vt,Tt)),vt=[],Tt=-1);return Tt>-1&&dt.push(new TextLeaf(vt,Tt)),dt}}class TextNode extends Text{constructor(lt,dt){super(),this.children=lt,this.length=dt,this.lines=0;for(let vt of lt)this.lines+=vt.lines}lineInner(lt,dt,vt,Tt){for(let Et=0;;Et++){let Ct=this.children[Et],Rt=Tt+Ct.length,kt=vt+Ct.lines-1;if((dt?kt:Rt)>=lt)return Ct.lineInner(lt,dt,vt,Tt);Tt=Rt+1,vt=kt+1}}decompose(lt,dt,vt,Tt){for(let Et=0,Ct=0;Ct<=dt&&Et<this.children.length;Et++){let Rt=this.children[Et],kt=Ct+Rt.length;if(lt<=kt&&dt>=Ct){let Dt=Tt&((Ct<=lt?1:0)|(kt>=dt?2:0));Ct>=lt&&kt<=dt&&!Dt?vt.push(Rt):Rt.decompose(lt-Ct,dt-Ct,vt,Dt)}Ct=kt+1}}replace(lt,dt,vt){if(vt.lines<this.lines)for(let Tt=0,Et=0;Tt<this.children.length;Tt++){let Ct=this.children[Tt],Rt=Et+Ct.length;if(lt>=Et&&dt<=Rt){let kt=Ct.replace(lt-Et,dt-Et,vt),Dt=this.lines-Ct.lines+kt.lines;if(kt.lines<Dt>>5-1&&kt.lines>Dt>>5+1){let Bt=this.children.slice();return Bt[Tt]=kt,new TextNode(Bt,this.length-(dt-lt)+vt.length)}return super.replace(Et,Rt,kt)}Et=Rt+1}return super.replace(lt,dt,vt)}sliceString(lt,dt=this.length,vt=`
`){let Tt="";for(let Et=0,Ct=0;Et<this.children.length&&Ct<=dt;Et++){let Rt=this.children[Et],kt=Ct+Rt.length;Ct>lt&&Et&&(Tt+=vt),lt<kt&&dt>Ct&&(Tt+=Rt.sliceString(lt-Ct,dt-Ct,vt)),Ct=kt+1}return Tt}flatten(lt){for(let dt of this.children)dt.flatten(lt)}scanIdentical(lt,dt){if(!(lt instanceof TextNode))return 0;let vt=0,[Tt,Et,Ct,Rt]=dt>0?[0,0,this.children.length,lt.children.length]:[this.children.length-1,lt.children.length-1,-1,-1];for(;;Tt+=dt,Et+=dt){if(Tt==Ct||Et==Rt)return vt;let kt=this.children[Tt],Dt=lt.children[Et];if(kt!=Dt)return vt+kt.scanIdentical(Dt,dt);vt+=kt.length+1}}static from(lt,dt=lt.reduce((vt,Tt)=>vt+Tt.length+1,-1)){let vt=0;for(let Zt of lt)vt+=Zt.lines;if(vt<32){let Zt=[];for(let Kt of lt)Kt.flatten(Zt);return new TextLeaf(Zt,dt)}let Tt=Math.max(32,vt>>5),Et=Tt<<1,Ct=Tt>>1,Rt=[],kt=0,Dt=-1,Bt=[];function Ft(Zt){let Kt;if(Zt.lines>Et&&Zt instanceof TextNode)for(let ln of Zt.children)Ft(ln);else Zt.lines>Ct&&(kt>Ct||!kt)?(Ut(),Rt.push(Zt)):Zt instanceof TextLeaf&&kt&&(Kt=Bt[Bt.length-1])instanceof TextLeaf&&Zt.lines+Kt.lines<=32?(kt+=Zt.lines,Dt+=Zt.length+1,Bt[Bt.length-1]=new TextLeaf(Kt.text.concat(Zt.text),Kt.length+1+Zt.length)):(kt+Zt.lines>Tt&&Ut(),kt+=Zt.lines,Dt+=Zt.length+1,Bt.push(Zt))}function Ut(){kt!=0&&(Rt.push(Bt.length==1?Bt[0]:TextNode.from(Bt,Dt)),Dt=-1,kt=Bt.length=0)}for(let Zt of lt)Ft(Zt);return Ut(),Rt.length==1?Rt[0]:new TextNode(Rt,dt)}}Text.empty=new TextLeaf([""],0);function textLength(ft){let lt=-1;for(let dt of ft)lt+=dt.length+1;return lt}function appendText(ft,lt,dt=0,vt=1e9){for(let Tt=0,Et=0,Ct=!0;Et<ft.length&&Tt<=vt;Et++){let Rt=ft[Et],kt=Tt+Rt.length;kt>=dt&&(kt>vt&&(Rt=Rt.slice(0,vt-Tt)),Tt<dt&&(Rt=Rt.slice(dt-Tt)),Ct?(lt[lt.length-1]+=Rt,Ct=!1):lt.push(Rt)),Tt=kt+1}return lt}function sliceText(ft,lt,dt){return appendText(ft,[""],lt,dt)}class RawTextCursor{constructor(lt,dt=1){this.dir=dt,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[lt],this.offsets=[dt>0?1:(lt instanceof TextLeaf?lt.text.length:lt.children.length)<<1]}nextInner(lt,dt){for(this.done=this.lineBreak=!1;;){let vt=this.nodes.length-1,Tt=this.nodes[vt],Et=this.offsets[vt],Ct=Et>>1,Rt=Tt instanceof TextLeaf?Tt.text.length:Tt.children.length;if(Ct==(dt>0?Rt:0)){if(vt==0)return this.done=!0,this.value="",this;dt>0&&this.offsets[vt-1]++,this.nodes.pop(),this.offsets.pop()}else if((Et&1)==(dt>0?0:1)){if(this.offsets[vt]+=dt,lt==0)return this.lineBreak=!0,this.value=`
`,this;lt--}else if(Tt instanceof TextLeaf){let kt=Tt.text[Ct+(dt<0?-1:0)];if(this.offsets[vt]+=dt,kt.length>Math.max(0,lt))return this.value=lt==0?kt:dt>0?kt.slice(lt):kt.slice(0,kt.length-lt),this;lt-=kt.length}else{let kt=Tt.children[Ct+(dt<0?-1:0)];lt>kt.length?(lt-=kt.length,this.offsets[vt]+=dt):(dt<0&&this.offsets[vt]--,this.nodes.push(kt),this.offsets.push(dt>0?1:(kt instanceof TextLeaf?kt.text.length:kt.children.length)<<1))}}}next(lt=0){return lt<0&&(this.nextInner(-lt,-this.dir),lt=this.value.length),this.nextInner(lt,this.dir)}}class PartialTextCursor{constructor(lt,dt,vt){this.value="",this.done=!1,this.cursor=new RawTextCursor(lt,dt>vt?-1:1),this.pos=dt>vt?lt.length:0,this.from=Math.min(dt,vt),this.to=Math.max(dt,vt)}nextInner(lt,dt){if(dt<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;lt+=Math.max(0,dt<0?this.pos-this.to:this.from-this.pos);let vt=dt<0?this.pos-this.from:this.to-this.pos;lt>vt&&(lt=vt),vt-=lt;let{value:Tt}=this.cursor.next(lt);return this.pos+=(Tt.length+lt)*dt,this.value=Tt.length<=vt?Tt:dt<0?Tt.slice(Tt.length-vt):Tt.slice(0,vt),this.done=!this.value,this}next(lt=0){return lt<0?lt=Math.max(lt,this.from-this.pos):lt>0&&(lt=Math.min(lt,this.to-this.pos)),this.nextInner(lt,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class LineCursor{constructor(lt){this.inner=lt,this.afterBreak=!0,this.value="",this.done=!1}next(lt=0){let{done:dt,lineBreak:vt,value:Tt}=this.inner.next(lt);return dt?(this.done=!0,this.value=""):vt?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=Tt,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Text.prototype[Symbol.iterator]=function(){return this.iter()},RawTextCursor.prototype[Symbol.iterator]=PartialTextCursor.prototype[Symbol.iterator]=LineCursor.prototype[Symbol.iterator]=function(){return this});class Line{constructor(lt,dt,vt,Tt){this.from=lt,this.to=dt,this.number=vt,this.text=Tt}get length(){return this.to-this.from}}let extend="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(ft=>ft?parseInt(ft,36):1);for(let ft=1;ft<extend.length;ft++)extend[ft]+=extend[ft-1];function isExtendingChar(ft){for(let lt=1;lt<extend.length;lt+=2)if(extend[lt]>ft)return extend[lt-1]<=ft;return!1}function isRegionalIndicator(ft){return ft>=127462&&ft<=127487}const ZWJ=8205;function findClusterBreak(ft,lt,dt=!0,vt=!0){return(dt?nextClusterBreak:prevClusterBreak)(ft,lt,vt)}function nextClusterBreak(ft,lt,dt){if(lt==ft.length)return lt;lt&&surrogateLow(ft.charCodeAt(lt))&&surrogateHigh(ft.charCodeAt(lt-1))&&lt--;let vt=codePointAt(ft,lt);for(lt+=codePointSize(vt);lt<ft.length;){let Tt=codePointAt(ft,lt);if(vt==ZWJ||Tt==ZWJ||dt&&isExtendingChar(Tt))lt+=codePointSize(Tt),vt=Tt;else if(isRegionalIndicator(Tt)){let Et=0,Ct=lt-2;for(;Ct>=0&&isRegionalIndicator(codePointAt(ft,Ct));)Et++,Ct-=2;if(Et%2==0)break;lt+=2}else break}return lt}function prevClusterBreak(ft,lt,dt){for(;lt>0;){let vt=nextClusterBreak(ft,lt-2,dt);if(vt<lt)return vt;lt--}return 0}function surrogateLow(ft){return ft>=56320&&ft<57344}function surrogateHigh(ft){return ft>=55296&&ft<56320}function codePointAt(ft,lt){let dt=ft.charCodeAt(lt);if(!surrogateHigh(dt)||lt+1==ft.length)return dt;let vt=ft.charCodeAt(lt+1);return surrogateLow(vt)?(dt-55296<<10)+(vt-56320)+65536:dt}function fromCodePoint(ft){return ft<=65535?String.fromCharCode(ft):(ft-=65536,String.fromCharCode((ft>>10)+55296,(ft&1023)+56320))}function codePointSize(ft){return ft<65536?1:2}const DefaultSplit=/\r\n?|\n/;var MapMode=function(ft){return ft[ft.Simple=0]="Simple",ft[ft.TrackDel=1]="TrackDel",ft[ft.TrackBefore=2]="TrackBefore",ft[ft.TrackAfter=3]="TrackAfter",ft}(MapMode||(MapMode={}));class ChangeDesc{constructor(lt){this.sections=lt}get length(){let lt=0;for(let dt=0;dt<this.sections.length;dt+=2)lt+=this.sections[dt];return lt}get newLength(){let lt=0;for(let dt=0;dt<this.sections.length;dt+=2){let vt=this.sections[dt+1];lt+=vt<0?this.sections[dt]:vt}return lt}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(lt){for(let dt=0,vt=0,Tt=0;dt<this.sections.length;){let Et=this.sections[dt++],Ct=this.sections[dt++];Ct<0?(lt(vt,Tt,Et),Tt+=Et):Tt+=Ct,vt+=Et}}iterChangedRanges(lt,dt=!1){iterChanges(this,lt,dt)}get invertedDesc(){let lt=[];for(let dt=0;dt<this.sections.length;){let vt=this.sections[dt++],Tt=this.sections[dt++];Tt<0?lt.push(vt,Tt):lt.push(Tt,vt)}return new ChangeDesc(lt)}composeDesc(lt){return this.empty?lt:lt.empty?this:composeSets(this,lt)}mapDesc(lt,dt=!1){return lt.empty?this:mapSet(this,lt,dt)}mapPos(lt,dt=-1,vt=MapMode.Simple){let Tt=0,Et=0;for(let Ct=0;Ct<this.sections.length;){let Rt=this.sections[Ct++],kt=this.sections[Ct++],Dt=Tt+Rt;if(kt<0){if(Dt>lt)return Et+(lt-Tt);Et+=Rt}else{if(vt!=MapMode.Simple&&Dt>=lt&&(vt==MapMode.TrackDel&&Tt<lt&&Dt>lt||vt==MapMode.TrackBefore&&Tt<lt||vt==MapMode.TrackAfter&&Dt>lt))return null;if(Dt>lt||Dt==lt&&dt<0&&!Rt)return lt==Tt||dt<0?Et:Et+kt;Et+=kt}Tt=Dt}if(lt>Tt)throw new RangeError(`Position ${lt} is out of range for changeset of length ${Tt}`);return Et}touchesRange(lt,dt=lt){for(let vt=0,Tt=0;vt<this.sections.length&&Tt<=dt;){let Et=this.sections[vt++],Ct=this.sections[vt++],Rt=Tt+Et;if(Ct>=0&&Tt<=dt&&Rt>=lt)return Tt<lt&&Rt>dt?"cover":!0;Tt=Rt}return!1}toString(){let lt="";for(let dt=0;dt<this.sections.length;){let vt=this.sections[dt++],Tt=this.sections[dt++];lt+=(lt?" ":"")+vt+(Tt>=0?":"+Tt:"")}return lt}toJSON(){return this.sections}static fromJSON(lt){if(!Array.isArray(lt)||lt.length%2||lt.some(dt=>typeof dt!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ChangeDesc(lt)}static create(lt){return new ChangeDesc(lt)}}class ChangeSet extends ChangeDesc{constructor(lt,dt){super(lt),this.inserted=dt}apply(lt){if(this.length!=lt.length)throw new RangeError("Applying change set to a document with the wrong length");return iterChanges(this,(dt,vt,Tt,Et,Ct)=>lt=lt.replace(Tt,Tt+(vt-dt),Ct),!1),lt}mapDesc(lt,dt=!1){return mapSet(this,lt,dt,!0)}invert(lt){let dt=this.sections.slice(),vt=[];for(let Tt=0,Et=0;Tt<dt.length;Tt+=2){let Ct=dt[Tt],Rt=dt[Tt+1];if(Rt>=0){dt[Tt]=Rt,dt[Tt+1]=Ct;let kt=Tt>>1;for(;vt.length<kt;)vt.push(Text.empty);vt.push(Ct?lt.slice(Et,Et+Ct):Text.empty)}Et+=Ct}return new ChangeSet(dt,vt)}compose(lt){return this.empty?lt:lt.empty?this:composeSets(this,lt,!0)}map(lt,dt=!1){return lt.empty?this:mapSet(this,lt,dt,!0)}iterChanges(lt,dt=!1){iterChanges(this,lt,dt)}get desc(){return ChangeDesc.create(this.sections)}filter(lt){let dt=[],vt=[],Tt=[],Et=new SectionIter(this);e:for(let Ct=0,Rt=0;;){let kt=Ct==lt.length?1e9:lt[Ct++];for(;Rt<kt||Rt==kt&&Et.len==0;){if(Et.done)break e;let Bt=Math.min(Et.len,kt-Rt);addSection(Tt,Bt,-1);let Ft=Et.ins==-1?-1:Et.off==0?Et.ins:0;addSection(dt,Bt,Ft),Ft>0&&addInsert(vt,dt,Et.text),Et.forward(Bt),Rt+=Bt}let Dt=lt[Ct++];for(;Rt<Dt;){if(Et.done)break e;let Bt=Math.min(Et.len,Dt-Rt);addSection(dt,Bt,-1),addSection(Tt,Bt,Et.ins==-1?-1:Et.off==0?Et.ins:0),Et.forward(Bt),Rt+=Bt}}return{changes:new ChangeSet(dt,vt),filtered:ChangeDesc.create(Tt)}}toJSON(){let lt=[];for(let dt=0;dt<this.sections.length;dt+=2){let vt=this.sections[dt],Tt=this.sections[dt+1];Tt<0?lt.push(vt):Tt==0?lt.push([vt]):lt.push([vt].concat(this.inserted[dt>>1].toJSON()))}return lt}static of(lt,dt,vt){let Tt=[],Et=[],Ct=0,Rt=null;function kt(Bt=!1){if(!Bt&&!Tt.length)return;Ct<dt&&addSection(Tt,dt-Ct,-1);let Ft=new ChangeSet(Tt,Et);Rt=Rt?Rt.compose(Ft.map(Rt)):Ft,Tt=[],Et=[],Ct=0}function Dt(Bt){if(Array.isArray(Bt))for(let Ft of Bt)Dt(Ft);else if(Bt instanceof ChangeSet){if(Bt.length!=dt)throw new RangeError(`Mismatched change set length (got ${Bt.length}, expected ${dt})`);kt(),Rt=Rt?Rt.compose(Bt.map(Rt)):Bt}else{let{from:Ft,to:Ut=Ft,insert:Zt}=Bt;if(Ft>Ut||Ft<0||Ut>dt)throw new RangeError(`Invalid change range ${Ft} to ${Ut} (in doc of length ${dt})`);let Kt=Zt?typeof Zt=="string"?Text.of(Zt.split(vt||DefaultSplit)):Zt:Text.empty,ln=Kt.length;if(Ft==Ut&&ln==0)return;Ft<Ct&&kt(),Ft>Ct&&addSection(Tt,Ft-Ct,-1),addSection(Tt,Ut-Ft,ln),addInsert(Et,Tt,Kt),Ct=Ut}}return Dt(lt),kt(!Rt),Rt}static empty(lt){return new ChangeSet(lt?[lt,-1]:[],[])}static fromJSON(lt){if(!Array.isArray(lt))throw new RangeError("Invalid JSON representation of ChangeSet");let dt=[],vt=[];for(let Tt=0;Tt<lt.length;Tt++){let Et=lt[Tt];if(typeof Et=="number")dt.push(Et,-1);else{if(!Array.isArray(Et)||typeof Et[0]!="number"||Et.some((Ct,Rt)=>Rt&&typeof Ct!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(Et.length==1)dt.push(Et[0],0);else{for(;vt.length<Tt;)vt.push(Text.empty);vt[Tt]=Text.of(Et.slice(1)),dt.push(Et[0],vt[Tt].length)}}}return new ChangeSet(dt,vt)}static createSet(lt,dt){return new ChangeSet(lt,dt)}}function addSection(ft,lt,dt,vt=!1){if(lt==0&&dt<=0)return;let Tt=ft.length-2;Tt>=0&&dt<=0&&dt==ft[Tt+1]?ft[Tt]+=lt:lt==0&&ft[Tt]==0?ft[Tt+1]+=dt:vt?(ft[Tt]+=lt,ft[Tt+1]+=dt):ft.push(lt,dt)}function addInsert(ft,lt,dt){if(dt.length==0)return;let vt=lt.length-2>>1;if(vt<ft.length)ft[ft.length-1]=ft[ft.length-1].append(dt);else{for(;ft.length<vt;)ft.push(Text.empty);ft.push(dt)}}function iterChanges(ft,lt,dt){let vt=ft.inserted;for(let Tt=0,Et=0,Ct=0;Ct<ft.sections.length;){let Rt=ft.sections[Ct++],kt=ft.sections[Ct++];if(kt<0)Tt+=Rt,Et+=Rt;else{let Dt=Tt,Bt=Et,Ft=Text.empty;for(;Dt+=Rt,Bt+=kt,kt&&vt&&(Ft=Ft.append(vt[Ct-2>>1])),!(dt||Ct==ft.sections.length||ft.sections[Ct+1]<0);)Rt=ft.sections[Ct++],kt=ft.sections[Ct++];lt(Tt,Dt,Et,Bt,Ft),Tt=Dt,Et=Bt}}}function mapSet(ft,lt,dt,vt=!1){let Tt=[],Et=vt?[]:null,Ct=new SectionIter(ft),Rt=new SectionIter(lt);for(let kt=-1;;)if(Ct.ins==-1&&Rt.ins==-1){let Dt=Math.min(Ct.len,Rt.len);addSection(Tt,Dt,-1),Ct.forward(Dt),Rt.forward(Dt)}else if(Rt.ins>=0&&(Ct.ins<0||kt==Ct.i||Ct.off==0&&(Rt.len<Ct.len||Rt.len==Ct.len&&!dt))){let Dt=Rt.len;for(addSection(Tt,Rt.ins,-1);Dt;){let Bt=Math.min(Ct.len,Dt);Ct.ins>=0&&kt<Ct.i&&Ct.len<=Bt&&(addSection(Tt,0,Ct.ins),Et&&addInsert(Et,Tt,Ct.text),kt=Ct.i),Ct.forward(Bt),Dt-=Bt}Rt.next()}else if(Ct.ins>=0){let Dt=0,Bt=Ct.len;for(;Bt;)if(Rt.ins==-1){let Ft=Math.min(Bt,Rt.len);Dt+=Ft,Bt-=Ft,Rt.forward(Ft)}else if(Rt.ins==0&&Rt.len<Bt)Bt-=Rt.len,Rt.next();else break;addSection(Tt,Dt,kt<Ct.i?Ct.ins:0),Et&&kt<Ct.i&&addInsert(Et,Tt,Ct.text),kt=Ct.i,Ct.forward(Ct.len-Bt)}else{if(Ct.done&&Rt.done)return Et?ChangeSet.createSet(Tt,Et):ChangeDesc.create(Tt);throw new Error("Mismatched change set lengths")}}function composeSets(ft,lt,dt=!1){let vt=[],Tt=dt?[]:null,Et=new SectionIter(ft),Ct=new SectionIter(lt);for(let Rt=!1;;){if(Et.done&&Ct.done)return Tt?ChangeSet.createSet(vt,Tt):ChangeDesc.create(vt);if(Et.ins==0)addSection(vt,Et.len,0,Rt),Et.next();else if(Ct.len==0&&!Ct.done)addSection(vt,0,Ct.ins,Rt),Tt&&addInsert(Tt,vt,Ct.text),Ct.next();else{if(Et.done||Ct.done)throw new Error("Mismatched change set lengths");{let kt=Math.min(Et.len2,Ct.len),Dt=vt.length;if(Et.ins==-1){let Bt=Ct.ins==-1?-1:Ct.off?0:Ct.ins;addSection(vt,kt,Bt,Rt),Tt&&Bt&&addInsert(Tt,vt,Ct.text)}else Ct.ins==-1?(addSection(vt,Et.off?0:Et.len,kt,Rt),Tt&&addInsert(Tt,vt,Et.textBit(kt))):(addSection(vt,Et.off?0:Et.len,Ct.off?0:Ct.ins,Rt),Tt&&!Ct.off&&addInsert(Tt,vt,Ct.text));Rt=(Et.ins>kt||Ct.ins>=0&&Ct.len>kt)&&(Rt||vt.length>Dt),Et.forward2(kt),Ct.forward(kt)}}}}class SectionIter{constructor(lt){this.set=lt,this.i=0,this.next()}next(){let{sections:lt}=this.set;this.i<lt.length?(this.len=lt[this.i++],this.ins=lt[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:lt}=this.set,dt=this.i-2>>1;return dt>=lt.length?Text.empty:lt[dt]}textBit(lt){let{inserted:dt}=this.set,vt=this.i-2>>1;return vt>=dt.length&&!lt?Text.empty:dt[vt].slice(this.off,lt==null?void 0:this.off+lt)}forward(lt){lt==this.len?this.next():(this.len-=lt,this.off+=lt)}forward2(lt){this.ins==-1?this.forward(lt):lt==this.ins?this.next():(this.ins-=lt,this.off+=lt)}}class SelectionRange{constructor(lt,dt,vt){this.from=lt,this.to=dt,this.flags=vt}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let lt=this.flags&3;return lt==3?null:lt}get goalColumn(){let lt=this.flags>>5;return lt==33554431?void 0:lt}map(lt,dt=-1){let vt,Tt;return this.empty?vt=Tt=lt.mapPos(this.from,dt):(vt=lt.mapPos(this.from,1),Tt=lt.mapPos(this.to,-1)),vt==this.from&&Tt==this.to?this:new SelectionRange(vt,Tt,this.flags)}extend(lt,dt=lt){if(lt<=this.anchor&&dt>=this.anchor)return EditorSelection.range(lt,dt);let vt=Math.abs(lt-this.anchor)>Math.abs(dt-this.anchor)?lt:dt;return EditorSelection.range(this.anchor,vt)}eq(lt){return this.anchor==lt.anchor&&this.head==lt.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(lt){if(!lt||typeof lt.anchor!="number"||typeof lt.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return EditorSelection.range(lt.anchor,lt.head)}static create(lt,dt,vt){return new SelectionRange(lt,dt,vt)}}class EditorSelection{constructor(lt,dt){this.ranges=lt,this.mainIndex=dt}map(lt,dt=-1){return lt.empty?this:EditorSelection.create(this.ranges.map(vt=>vt.map(lt,dt)),this.mainIndex)}eq(lt){if(this.ranges.length!=lt.ranges.length||this.mainIndex!=lt.mainIndex)return!1;for(let dt=0;dt<this.ranges.length;dt++)if(!this.ranges[dt].eq(lt.ranges[dt]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new EditorSelection([this.main],0)}addRange(lt,dt=!0){return EditorSelection.create([lt].concat(this.ranges),dt?0:this.mainIndex+1)}replaceRange(lt,dt=this.mainIndex){let vt=this.ranges.slice();return vt[dt]=lt,EditorSelection.create(vt,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(lt=>lt.toJSON()),main:this.mainIndex}}static fromJSON(lt){if(!lt||!Array.isArray(lt.ranges)||typeof lt.main!="number"||lt.main>=lt.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new EditorSelection(lt.ranges.map(dt=>SelectionRange.fromJSON(dt)),lt.main)}static single(lt,dt=lt){return new EditorSelection([EditorSelection.range(lt,dt)],0)}static create(lt,dt=0){if(lt.length==0)throw new RangeError("A selection needs at least one range");for(let vt=0,Tt=0;Tt<lt.length;Tt++){let Et=lt[Tt];if(Et.empty?Et.from<=vt:Et.from<vt)return EditorSelection.normalized(lt.slice(),dt);vt=Et.to}return new EditorSelection(lt,dt)}static cursor(lt,dt=0,vt,Tt){return SelectionRange.create(lt,lt,(dt==0?0:dt<0?4:8)|(vt==null?3:Math.min(2,vt))|(Tt??33554431)<<5)}static range(lt,dt,vt,Tt){let Et=(vt??33554431)<<5|(Tt==null?3:Math.min(2,Tt));return dt<lt?SelectionRange.create(dt,lt,24|Et):SelectionRange.create(lt,dt,(dt>lt?4:0)|Et)}static normalized(lt,dt=0){let vt=lt[dt];lt.sort((Tt,Et)=>Tt.from-Et.from),dt=lt.indexOf(vt);for(let Tt=1;Tt<lt.length;Tt++){let Et=lt[Tt],Ct=lt[Tt-1];if(Et.empty?Et.from<=Ct.to:Et.from<Ct.to){let Rt=Ct.from,kt=Math.max(Et.to,Ct.to);Tt<=dt&&dt--,lt.splice(--Tt,2,Et.anchor>Et.head?EditorSelection.range(kt,Rt):EditorSelection.range(Rt,kt))}}return new EditorSelection(lt,dt)}}function checkSelection(ft,lt){for(let dt of ft.ranges)if(dt.to>lt)throw new RangeError("Selection points outside of document")}let nextID=0;class Facet{constructor(lt,dt,vt,Tt,Et){this.combine=lt,this.compareInput=dt,this.compare=vt,this.isStatic=Tt,this.id=nextID++,this.default=lt([]),this.extensions=typeof Et=="function"?Et(this):Et}static define(lt={}){return new Facet(lt.combine||(dt=>dt),lt.compareInput||((dt,vt)=>dt===vt),lt.compare||(lt.combine?(dt,vt)=>dt===vt:sameArray),!!lt.static,lt.enables)}of(lt){return new FacetProvider([],this,0,lt)}compute(lt,dt){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(lt,this,1,dt)}computeN(lt,dt){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(lt,this,2,dt)}from(lt,dt){return dt||(dt=vt=>vt),this.compute([lt],vt=>dt(vt.field(lt)))}}function sameArray(ft,lt){return ft==lt||ft.length==lt.length&&ft.every((dt,vt)=>dt===lt[vt])}class FacetProvider{constructor(lt,dt,vt,Tt){this.dependencies=lt,this.facet=dt,this.type=vt,this.value=Tt,this.id=nextID++}dynamicSlot(lt){var dt;let vt=this.value,Tt=this.facet.compareInput,Et=this.id,Ct=lt[Et]>>1,Rt=this.type==2,kt=!1,Dt=!1,Bt=[];for(let Ft of this.dependencies)Ft=="doc"?kt=!0:Ft=="selection"?Dt=!0:((dt=lt[Ft.id])!==null&&dt!==void 0?dt:1)&1||Bt.push(lt[Ft.id]);return{create(Ft){return Ft.values[Ct]=vt(Ft),1},update(Ft,Ut){if(kt&&Ut.docChanged||Dt&&(Ut.docChanged||Ut.selection)||ensureAll(Ft,Bt)){let Zt=vt(Ft);if(Rt?!compareArray(Zt,Ft.values[Ct],Tt):!Tt(Zt,Ft.values[Ct]))return Ft.values[Ct]=Zt,1}return 0},reconfigure:(Ft,Ut)=>{let Zt,Kt=Ut.config.address[Et];if(Kt!=null){let ln=getAddr(Ut,Kt);if(this.dependencies.every(hn=>hn instanceof Facet?Ut.facet(hn)===Ft.facet(hn):hn instanceof StateField?Ut.field(hn,!1)==Ft.field(hn,!1):!0)||(Rt?compareArray(Zt=vt(Ft),ln,Tt):Tt(Zt=vt(Ft),ln)))return Ft.values[Ct]=ln,0}else Zt=vt(Ft);return Ft.values[Ct]=Zt,1}}}}function compareArray(ft,lt,dt){if(ft.length!=lt.length)return!1;for(let vt=0;vt<ft.length;vt++)if(!dt(ft[vt],lt[vt]))return!1;return!0}function ensureAll(ft,lt){let dt=!1;for(let vt of lt)ensureAddr(ft,vt)&1&&(dt=!0);return dt}function dynamicFacetSlot(ft,lt,dt){let vt=dt.map(kt=>ft[kt.id]),Tt=dt.map(kt=>kt.type),Et=vt.filter(kt=>!(kt&1)),Ct=ft[lt.id]>>1;function Rt(kt){let Dt=[];for(let Bt=0;Bt<vt.length;Bt++){let Ft=getAddr(kt,vt[Bt]);if(Tt[Bt]==2)for(let Ut of Ft)Dt.push(Ut);else Dt.push(Ft)}return lt.combine(Dt)}return{create(kt){for(let Dt of vt)ensureAddr(kt,Dt);return kt.values[Ct]=Rt(kt),1},update(kt,Dt){if(!ensureAll(kt,Et))return 0;let Bt=Rt(kt);return lt.compare(Bt,kt.values[Ct])?0:(kt.values[Ct]=Bt,1)},reconfigure(kt,Dt){let Bt=ensureAll(kt,vt),Ft=Dt.config.facets[lt.id],Ut=Dt.facet(lt);if(Ft&&!Bt&&sameArray(dt,Ft))return kt.values[Ct]=Ut,0;let Zt=Rt(kt);return lt.compare(Zt,Ut)?(kt.values[Ct]=Ut,0):(kt.values[Ct]=Zt,1)}}}const initField=Facet.define({static:!0});class StateField{constructor(lt,dt,vt,Tt,Et){this.id=lt,this.createF=dt,this.updateF=vt,this.compareF=Tt,this.spec=Et,this.provides=void 0}static define(lt){let dt=new StateField(nextID++,lt.create,lt.update,lt.compare||((vt,Tt)=>vt===Tt),lt);return lt.provide&&(dt.provides=lt.provide(dt)),dt}create(lt){let dt=lt.facet(initField).find(vt=>vt.field==this);return((dt==null?void 0:dt.create)||this.createF)(lt)}slot(lt){let dt=lt[this.id]>>1;return{create:vt=>(vt.values[dt]=this.create(vt),1),update:(vt,Tt)=>{let Et=vt.values[dt],Ct=this.updateF(Et,Tt);return this.compareF(Et,Ct)?0:(vt.values[dt]=Ct,1)},reconfigure:(vt,Tt)=>Tt.config.address[this.id]!=null?(vt.values[dt]=Tt.field(this),0):(vt.values[dt]=this.create(vt),1)}}init(lt){return[this,initField.of({field:this,create:lt})]}get extension(){return this}}const Prec_={lowest:4,low:3,default:2,high:1,highest:0};function prec(ft){return lt=>new PrecExtension(lt,ft)}const Prec={highest:prec(Prec_.highest),high:prec(Prec_.high),default:prec(Prec_.default),low:prec(Prec_.low),lowest:prec(Prec_.lowest)};class PrecExtension{constructor(lt,dt){this.inner=lt,this.prec=dt}}class Compartment{of(lt){return new CompartmentInstance(this,lt)}reconfigure(lt){return Compartment.reconfigure.of({compartment:this,extension:lt})}get(lt){return lt.config.compartments.get(this)}}class CompartmentInstance{constructor(lt,dt){this.compartment=lt,this.inner=dt}}class Configuration{constructor(lt,dt,vt,Tt,Et,Ct){for(this.base=lt,this.compartments=dt,this.dynamicSlots=vt,this.address=Tt,this.staticValues=Et,this.facets=Ct,this.statusTemplate=[];this.statusTemplate.length<vt.length;)this.statusTemplate.push(0)}staticFacet(lt){let dt=this.address[lt.id];return dt==null?lt.default:this.staticValues[dt>>1]}static resolve(lt,dt,vt){let Tt=[],Et=Object.create(null),Ct=new Map;for(let Ut of flatten(lt,dt,Ct))Ut instanceof StateField?Tt.push(Ut):(Et[Ut.facet.id]||(Et[Ut.facet.id]=[])).push(Ut);let Rt=Object.create(null),kt=[],Dt=[];for(let Ut of Tt)Rt[Ut.id]=Dt.length<<1,Dt.push(Zt=>Ut.slot(Zt));let Bt=vt==null?void 0:vt.config.facets;for(let Ut in Et){let Zt=Et[Ut],Kt=Zt[0].facet,ln=Bt&&Bt[Ut]||[];if(Zt.every(hn=>hn.type==0))if(Rt[Kt.id]=kt.length<<1|1,sameArray(ln,Zt))kt.push(vt.facet(Kt));else{let hn=Kt.combine(Zt.map(dn=>dn.value));kt.push(vt&&Kt.compare(hn,vt.facet(Kt))?vt.facet(Kt):hn)}else{for(let hn of Zt)hn.type==0?(Rt[hn.id]=kt.length<<1|1,kt.push(hn.value)):(Rt[hn.id]=Dt.length<<1,Dt.push(dn=>hn.dynamicSlot(dn)));Rt[Kt.id]=Dt.length<<1,Dt.push(hn=>dynamicFacetSlot(hn,Kt,Zt))}}let Ft=Dt.map(Ut=>Ut(Rt));return new Configuration(lt,Ct,Ft,Rt,kt,Et)}}function flatten(ft,lt,dt){let vt=[[],[],[],[],[]],Tt=new Map;function Et(Ct,Rt){let kt=Tt.get(Ct);if(kt!=null){if(kt<=Rt)return;let Dt=vt[kt].indexOf(Ct);Dt>-1&&vt[kt].splice(Dt,1),Ct instanceof CompartmentInstance&&dt.delete(Ct.compartment)}if(Tt.set(Ct,Rt),Array.isArray(Ct))for(let Dt of Ct)Et(Dt,Rt);else if(Ct instanceof CompartmentInstance){if(dt.has(Ct.compartment))throw new RangeError("Duplicate use of compartment in extensions");let Dt=lt.get(Ct.compartment)||Ct.inner;dt.set(Ct.compartment,Dt),Et(Dt,Rt)}else if(Ct instanceof PrecExtension)Et(Ct.inner,Ct.prec);else if(Ct instanceof StateField)vt[Rt].push(Ct),Ct.provides&&Et(Ct.provides,Rt);else if(Ct instanceof FacetProvider)vt[Rt].push(Ct),Ct.facet.extensions&&Et(Ct.facet.extensions,Prec_.default);else{let Dt=Ct.extension;if(!Dt)throw new Error(`Unrecognized extension value in extension set (${Ct}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);Et(Dt,Rt)}}return Et(ft,Prec_.default),vt.reduce((Ct,Rt)=>Ct.concat(Rt))}function ensureAddr(ft,lt){if(lt&1)return 2;let dt=lt>>1,vt=ft.status[dt];if(vt==4)throw new Error("Cyclic dependency between fields and/or facets");if(vt&2)return vt;ft.status[dt]=4;let Tt=ft.computeSlot(ft,ft.config.dynamicSlots[dt]);return ft.status[dt]=2|Tt}function getAddr(ft,lt){return lt&1?ft.config.staticValues[lt>>1]:ft.values[lt>>1]}const languageData=Facet.define(),allowMultipleSelections=Facet.define({combine:ft=>ft.some(lt=>lt),static:!0}),lineSeparator=Facet.define({combine:ft=>ft.length?ft[0]:void 0,static:!0}),changeFilter=Facet.define(),transactionFilter=Facet.define(),transactionExtender=Facet.define(),readOnly=Facet.define({combine:ft=>ft.length?ft[0]:!1});class Annotation{constructor(lt,dt){this.type=lt,this.value=dt}static define(){return new AnnotationType}}class AnnotationType{of(lt){return new Annotation(this,lt)}}class StateEffectType{constructor(lt){this.map=lt}of(lt){return new StateEffect(this,lt)}}class StateEffect{constructor(lt,dt){this.type=lt,this.value=dt}map(lt){let dt=this.type.map(this.value,lt);return dt===void 0?void 0:dt==this.value?this:new StateEffect(this.type,dt)}is(lt){return this.type==lt}static define(lt={}){return new StateEffectType(lt.map||(dt=>dt))}static mapEffects(lt,dt){if(!lt.length)return lt;let vt=[];for(let Tt of lt){let Et=Tt.map(dt);Et&&vt.push(Et)}return vt}}StateEffect.reconfigure=StateEffect.define();StateEffect.appendConfig=StateEffect.define();class Transaction{constructor(lt,dt,vt,Tt,Et,Ct){this.startState=lt,this.changes=dt,this.selection=vt,this.effects=Tt,this.annotations=Et,this.scrollIntoView=Ct,this._doc=null,this._state=null,vt&&checkSelection(vt,dt.newLength),Et.some(Rt=>Rt.type==Transaction.time)||(this.annotations=Et.concat(Transaction.time.of(Date.now())))}static create(lt,dt,vt,Tt,Et,Ct){return new Transaction(lt,dt,vt,Tt,Et,Ct)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(lt){for(let dt of this.annotations)if(dt.type==lt)return dt.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(lt){let dt=this.annotation(Transaction.userEvent);return!!(dt&&(dt==lt||dt.length>lt.length&&dt.slice(0,lt.length)==lt&&dt[lt.length]=="."))}}Transaction.time=Annotation.define();Transaction.userEvent=Annotation.define();Transaction.addToHistory=Annotation.define();Transaction.remote=Annotation.define();function joinRanges(ft,lt){let dt=[];for(let vt=0,Tt=0;;){let Et,Ct;if(vt<ft.length&&(Tt==lt.length||lt[Tt]>=ft[vt]))Et=ft[vt++],Ct=ft[vt++];else if(Tt<lt.length)Et=lt[Tt++],Ct=lt[Tt++];else return dt;!dt.length||dt[dt.length-1]<Et?dt.push(Et,Ct):dt[dt.length-1]<Ct&&(dt[dt.length-1]=Ct)}}function mergeTransaction(ft,lt,dt){var vt;let Tt,Et,Ct;return dt?(Tt=lt.changes,Et=ChangeSet.empty(lt.changes.length),Ct=ft.changes.compose(lt.changes)):(Tt=lt.changes.map(ft.changes),Et=ft.changes.mapDesc(lt.changes,!0),Ct=ft.changes.compose(Tt)),{changes:Ct,selection:lt.selection?lt.selection.map(Et):(vt=ft.selection)===null||vt===void 0?void 0:vt.map(Tt),effects:StateEffect.mapEffects(ft.effects,Tt).concat(StateEffect.mapEffects(lt.effects,Et)),annotations:ft.annotations.length?ft.annotations.concat(lt.annotations):lt.annotations,scrollIntoView:ft.scrollIntoView||lt.scrollIntoView}}function resolveTransactionInner(ft,lt,dt){let vt=lt.selection,Tt=asArray$1(lt.annotations);return lt.userEvent&&(Tt=Tt.concat(Transaction.userEvent.of(lt.userEvent))),{changes:lt.changes instanceof ChangeSet?lt.changes:ChangeSet.of(lt.changes||[],dt,ft.facet(lineSeparator)),selection:vt&&(vt instanceof EditorSelection?vt:EditorSelection.single(vt.anchor,vt.head)),effects:asArray$1(lt.effects),annotations:Tt,scrollIntoView:!!lt.scrollIntoView}}function resolveTransaction(ft,lt,dt){let vt=resolveTransactionInner(ft,lt.length?lt[0]:{},ft.doc.length);lt.length&&lt[0].filter===!1&&(dt=!1);for(let Et=1;Et<lt.length;Et++){lt[Et].filter===!1&&(dt=!1);let Ct=!!lt[Et].sequential;vt=mergeTransaction(vt,resolveTransactionInner(ft,lt[Et],Ct?vt.changes.newLength:ft.doc.length),Ct)}let Tt=Transaction.create(ft,vt.changes,vt.selection,vt.effects,vt.annotations,vt.scrollIntoView);return extendTransaction(dt?filterTransaction(Tt):Tt)}function filterTransaction(ft){let lt=ft.startState,dt=!0;for(let Tt of lt.facet(changeFilter)){let Et=Tt(ft);if(Et===!1){dt=!1;break}Array.isArray(Et)&&(dt=dt===!0?Et:joinRanges(dt,Et))}if(dt!==!0){let Tt,Et;if(dt===!1)Et=ft.changes.invertedDesc,Tt=ChangeSet.empty(lt.doc.length);else{let Ct=ft.changes.filter(dt);Tt=Ct.changes,Et=Ct.filtered.mapDesc(Ct.changes).invertedDesc}ft=Transaction.create(lt,Tt,ft.selection&&ft.selection.map(Et),StateEffect.mapEffects(ft.effects,Et),ft.annotations,ft.scrollIntoView)}let vt=lt.facet(transactionFilter);for(let Tt=vt.length-1;Tt>=0;Tt--){let Et=vt[Tt](ft);Et instanceof Transaction?ft=Et:Array.isArray(Et)&&Et.length==1&&Et[0]instanceof Transaction?ft=Et[0]:ft=resolveTransaction(lt,asArray$1(Et),!1)}return ft}function extendTransaction(ft){let lt=ft.startState,dt=lt.facet(transactionExtender),vt=ft;for(let Tt=dt.length-1;Tt>=0;Tt--){let Et=dt[Tt](ft);Et&&Object.keys(Et).length&&(vt=mergeTransaction(vt,resolveTransactionInner(lt,Et,ft.changes.newLength),!0))}return vt==ft?ft:Transaction.create(lt,ft.changes,ft.selection,vt.effects,vt.annotations,vt.scrollIntoView)}const none$2=[];function asArray$1(ft){return ft==null?none$2:Array.isArray(ft)?ft:[ft]}var CharCategory=function(ft){return ft[ft.Word=0]="Word",ft[ft.Space=1]="Space",ft[ft.Other=2]="Other",ft}(CharCategory||(CharCategory={}));const nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let wordChar;try{wordChar=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(ft){}function hasWordChar(ft){if(wordChar)return wordChar.test(ft);for(let lt=0;lt<ft.length;lt++){let dt=ft[lt];if(/\w/.test(dt)||dt>""&&(dt.toUpperCase()!=dt.toLowerCase()||nonASCIISingleCaseWordChar.test(dt)))return!0}return!1}function makeCategorizer(ft){return lt=>{if(!/\S/.test(lt))return CharCategory.Space;if(hasWordChar(lt))return CharCategory.Word;for(let dt=0;dt<ft.length;dt++)if(lt.indexOf(ft[dt])>-1)return CharCategory.Word;return CharCategory.Other}}class EditorState{constructor(lt,dt,vt,Tt,Et,Ct){this.config=lt,this.doc=dt,this.selection=vt,this.values=Tt,this.status=lt.statusTemplate.slice(),this.computeSlot=Et,Ct&&(Ct._state=this);for(let Rt=0;Rt<this.config.dynamicSlots.length;Rt++)ensureAddr(this,Rt<<1);this.computeSlot=null}field(lt,dt=!0){let vt=this.config.address[lt.id];if(vt==null){if(dt)throw new RangeError("Field is not present in this state");return}return ensureAddr(this,vt),getAddr(this,vt)}update(...lt){return resolveTransaction(this,lt,!0)}applyTransaction(lt){let dt=this.config,{base:vt,compartments:Tt}=dt;for(let Ct of lt.effects)Ct.is(Compartment.reconfigure)?(dt&&(Tt=new Map,dt.compartments.forEach((Rt,kt)=>Tt.set(kt,Rt)),dt=null),Tt.set(Ct.value.compartment,Ct.value.extension)):Ct.is(StateEffect.reconfigure)?(dt=null,vt=Ct.value):Ct.is(StateEffect.appendConfig)&&(dt=null,vt=asArray$1(vt).concat(Ct.value));let Et;dt?Et=lt.startState.values.slice():(dt=Configuration.resolve(vt,Tt,this),Et=new EditorState(dt,this.doc,this.selection,dt.dynamicSlots.map(()=>null),(Rt,kt)=>kt.reconfigure(Rt,this),null).values),new EditorState(dt,lt.newDoc,lt.newSelection,Et,(Ct,Rt)=>Rt.update(Ct,lt),lt)}replaceSelection(lt){return typeof lt=="string"&&(lt=this.toText(lt)),this.changeByRange(dt=>({changes:{from:dt.from,to:dt.to,insert:lt},range:EditorSelection.cursor(dt.from+lt.length)}))}changeByRange(lt){let dt=this.selection,vt=lt(dt.ranges[0]),Tt=this.changes(vt.changes),Et=[vt.range],Ct=asArray$1(vt.effects);for(let Rt=1;Rt<dt.ranges.length;Rt++){let kt=lt(dt.ranges[Rt]),Dt=this.changes(kt.changes),Bt=Dt.map(Tt);for(let Ut=0;Ut<Rt;Ut++)Et[Ut]=Et[Ut].map(Bt);let Ft=Tt.mapDesc(Dt,!0);Et.push(kt.range.map(Ft)),Tt=Tt.compose(Bt),Ct=StateEffect.mapEffects(Ct,Bt).concat(StateEffect.mapEffects(asArray$1(kt.effects),Ft))}return{changes:Tt,selection:EditorSelection.create(Et,dt.mainIndex),effects:Ct}}changes(lt=[]){return lt instanceof ChangeSet?lt:ChangeSet.of(lt,this.doc.length,this.facet(EditorState.lineSeparator))}toText(lt){return Text.of(lt.split(this.facet(EditorState.lineSeparator)||DefaultSplit))}sliceDoc(lt=0,dt=this.doc.length){return this.doc.sliceString(lt,dt,this.lineBreak)}facet(lt){let dt=this.config.address[lt.id];return dt==null?lt.default:(ensureAddr(this,dt),getAddr(this,dt))}toJSON(lt){let dt={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(lt)for(let vt in lt){let Tt=lt[vt];Tt instanceof StateField&&this.config.address[Tt.id]!=null&&(dt[vt]=Tt.spec.toJSON(this.field(lt[vt]),this))}return dt}static fromJSON(lt,dt={},vt){if(!lt||typeof lt.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let Tt=[];if(vt){for(let Et in vt)if(Object.prototype.hasOwnProperty.call(lt,Et)){let Ct=vt[Et],Rt=lt[Et];Tt.push(Ct.init(kt=>Ct.spec.fromJSON(Rt,kt)))}}return EditorState.create({doc:lt.doc,selection:EditorSelection.fromJSON(lt.selection),extensions:dt.extensions?Tt.concat([dt.extensions]):Tt})}static create(lt={}){let dt=Configuration.resolve(lt.extensions||[],new Map),vt=lt.doc instanceof Text?lt.doc:Text.of((lt.doc||"").split(dt.staticFacet(EditorState.lineSeparator)||DefaultSplit)),Tt=lt.selection?lt.selection instanceof EditorSelection?lt.selection:EditorSelection.single(lt.selection.anchor,lt.selection.head):EditorSelection.single(0);return checkSelection(Tt,vt.length),dt.staticFacet(allowMultipleSelections)||(Tt=Tt.asSingle()),new EditorState(dt,vt,Tt,dt.dynamicSlots.map(()=>null),(Et,Ct)=>Ct.create(Et),null)}get tabSize(){return this.facet(EditorState.tabSize)}get lineBreak(){return this.facet(EditorState.lineSeparator)||`
`}get readOnly(){return this.facet(readOnly)}phrase(lt,...dt){for(let vt of this.facet(EditorState.phrases))if(Object.prototype.hasOwnProperty.call(vt,lt)){lt=vt[lt];break}return dt.length&&(lt=lt.replace(/\$(\$|\d*)/g,(vt,Tt)=>{if(Tt=="$")return"$";let Et=+(Tt||1);return!Et||Et>dt.length?vt:dt[Et-1]})),lt}languageDataAt(lt,dt,vt=-1){let Tt=[];for(let Et of this.facet(languageData))for(let Ct of Et(this,dt,vt))Object.prototype.hasOwnProperty.call(Ct,lt)&&Tt.push(Ct[lt]);return Tt}charCategorizer(lt){return makeCategorizer(this.languageDataAt("wordChars",lt).join(""))}wordAt(lt){let{text:dt,from:vt,length:Tt}=this.doc.lineAt(lt),Et=this.charCategorizer(lt),Ct=lt-vt,Rt=lt-vt;for(;Ct>0;){let kt=findClusterBreak(dt,Ct,!1);if(Et(dt.slice(kt,Ct))!=CharCategory.Word)break;Ct=kt}for(;Rt<Tt;){let kt=findClusterBreak(dt,Rt);if(Et(dt.slice(Rt,kt))!=CharCategory.Word)break;Rt=kt}return Ct==Rt?null:EditorSelection.range(Ct+vt,Rt+vt)}}EditorState.allowMultipleSelections=allowMultipleSelections;EditorState.tabSize=Facet.define({combine:ft=>ft.length?ft[0]:4});EditorState.lineSeparator=lineSeparator;EditorState.readOnly=readOnly;EditorState.phrases=Facet.define({compare(ft,lt){let dt=Object.keys(ft),vt=Object.keys(lt);return dt.length==vt.length&&dt.every(Tt=>ft[Tt]==lt[Tt])}});EditorState.languageData=languageData;EditorState.changeFilter=changeFilter;EditorState.transactionFilter=transactionFilter;EditorState.transactionExtender=transactionExtender;Compartment.reconfigure=StateEffect.define();function combineConfig(ft,lt,dt={}){let vt={};for(let Tt of ft)for(let Et of Object.keys(Tt)){let Ct=Tt[Et],Rt=vt[Et];if(Rt===void 0)vt[Et]=Ct;else if(!(Rt===Ct||Ct===void 0))if(Object.hasOwnProperty.call(dt,Et))vt[Et]=dt[Et](Rt,Ct);else throw new Error("Config merge conflict for field "+Et)}for(let Tt in lt)vt[Tt]===void 0&&(vt[Tt]=lt[Tt]);return vt}class RangeValue{eq(lt){return this==lt}range(lt,dt=lt){return Range.create(lt,dt,this)}}RangeValue.prototype.startSide=RangeValue.prototype.endSide=0;RangeValue.prototype.point=!1;RangeValue.prototype.mapMode=MapMode.TrackDel;class Range{constructor(lt,dt,vt){this.from=lt,this.to=dt,this.value=vt}static create(lt,dt,vt){return new Range(lt,dt,vt)}}function cmpRange(ft,lt){return ft.from-lt.from||ft.value.startSide-lt.value.startSide}class Chunk{constructor(lt,dt,vt,Tt){this.from=lt,this.to=dt,this.value=vt,this.maxPoint=Tt}get length(){return this.to[this.to.length-1]}findIndex(lt,dt,vt,Tt=0){let Et=vt?this.to:this.from;for(let Ct=Tt,Rt=Et.length;;){if(Ct==Rt)return Ct;let kt=Ct+Rt>>1,Dt=Et[kt]-lt||(vt?this.value[kt].endSide:this.value[kt].startSide)-dt;if(kt==Ct)return Dt>=0?Ct:Rt;Dt>=0?Rt=kt:Ct=kt+1}}between(lt,dt,vt,Tt){for(let Et=this.findIndex(dt,-1e9,!0),Ct=this.findIndex(vt,1e9,!1,Et);Et<Ct;Et++)if(Tt(this.from[Et]+lt,this.to[Et]+lt,this.value[Et])===!1)return!1}map(lt,dt){let vt=[],Tt=[],Et=[],Ct=-1,Rt=-1;for(let kt=0;kt<this.value.length;kt++){let Dt=this.value[kt],Bt=this.from[kt]+lt,Ft=this.to[kt]+lt,Ut,Zt;if(Bt==Ft){let Kt=dt.mapPos(Bt,Dt.startSide,Dt.mapMode);if(Kt==null||(Ut=Zt=Kt,Dt.startSide!=Dt.endSide&&(Zt=dt.mapPos(Bt,Dt.endSide),Zt<Ut)))continue}else if(Ut=dt.mapPos(Bt,Dt.startSide),Zt=dt.mapPos(Ft,Dt.endSide),Ut>Zt||Ut==Zt&&Dt.startSide>0&&Dt.endSide<=0)continue;(Zt-Ut||Dt.endSide-Dt.startSide)<0||(Ct<0&&(Ct=Ut),Dt.point&&(Rt=Math.max(Rt,Zt-Ut)),vt.push(Dt),Tt.push(Ut-Ct),Et.push(Zt-Ct))}return{mapped:vt.length?new Chunk(Tt,Et,vt,Rt):null,pos:Ct}}}class RangeSet{constructor(lt,dt,vt,Tt){this.chunkPos=lt,this.chunk=dt,this.nextLayer=vt,this.maxPoint=Tt}static create(lt,dt,vt,Tt){return new RangeSet(lt,dt,vt,Tt)}get length(){let lt=this.chunk.length-1;return lt<0?0:Math.max(this.chunkEnd(lt),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let lt=this.nextLayer.size;for(let dt of this.chunk)lt+=dt.value.length;return lt}chunkEnd(lt){return this.chunkPos[lt]+this.chunk[lt].length}update(lt){let{add:dt=[],sort:vt=!1,filterFrom:Tt=0,filterTo:Et=this.length}=lt,Ct=lt.filter;if(dt.length==0&&!Ct)return this;if(vt&&(dt=dt.slice().sort(cmpRange)),this.isEmpty)return dt.length?RangeSet.of(dt):this;let Rt=new LayerCursor(this,null,-1).goto(0),kt=0,Dt=[],Bt=new RangeSetBuilder;for(;Rt.value||kt<dt.length;)if(kt<dt.length&&(Rt.from-dt[kt].from||Rt.startSide-dt[kt].value.startSide)>=0){let Ft=dt[kt++];Bt.addInner(Ft.from,Ft.to,Ft.value)||Dt.push(Ft)}else Rt.rangeIndex==1&&Rt.chunkIndex<this.chunk.length&&(kt==dt.length||this.chunkEnd(Rt.chunkIndex)<dt[kt].from)&&(!Ct||Tt>this.chunkEnd(Rt.chunkIndex)||Et<this.chunkPos[Rt.chunkIndex])&&Bt.addChunk(this.chunkPos[Rt.chunkIndex],this.chunk[Rt.chunkIndex])?Rt.nextChunk():((!Ct||Tt>Rt.to||Et<Rt.from||Ct(Rt.from,Rt.to,Rt.value))&&(Bt.addInner(Rt.from,Rt.to,Rt.value)||Dt.push(Range.create(Rt.from,Rt.to,Rt.value))),Rt.next());return Bt.finishInner(this.nextLayer.isEmpty&&!Dt.length?RangeSet.empty:this.nextLayer.update({add:Dt,filter:Ct,filterFrom:Tt,filterTo:Et}))}map(lt){if(lt.empty||this.isEmpty)return this;let dt=[],vt=[],Tt=-1;for(let Ct=0;Ct<this.chunk.length;Ct++){let Rt=this.chunkPos[Ct],kt=this.chunk[Ct],Dt=lt.touchesRange(Rt,Rt+kt.length);if(Dt===!1)Tt=Math.max(Tt,kt.maxPoint),dt.push(kt),vt.push(lt.mapPos(Rt));else if(Dt===!0){let{mapped:Bt,pos:Ft}=kt.map(Rt,lt);Bt&&(Tt=Math.max(Tt,Bt.maxPoint),dt.push(Bt),vt.push(Ft))}}let Et=this.nextLayer.map(lt);return dt.length==0?Et:new RangeSet(vt,dt,Et||RangeSet.empty,Tt)}between(lt,dt,vt){if(!this.isEmpty){for(let Tt=0;Tt<this.chunk.length;Tt++){let Et=this.chunkPos[Tt],Ct=this.chunk[Tt];if(dt>=Et&&lt<=Et+Ct.length&&Ct.between(Et,lt-Et,dt-Et,vt)===!1)return}this.nextLayer.between(lt,dt,vt)}}iter(lt=0){return HeapCursor.from([this]).goto(lt)}get isEmpty(){return this.nextLayer==this}static iter(lt,dt=0){return HeapCursor.from(lt).goto(dt)}static compare(lt,dt,vt,Tt,Et=-1){let Ct=lt.filter(Ft=>Ft.maxPoint>0||!Ft.isEmpty&&Ft.maxPoint>=Et),Rt=dt.filter(Ft=>Ft.maxPoint>0||!Ft.isEmpty&&Ft.maxPoint>=Et),kt=findSharedChunks(Ct,Rt,vt),Dt=new SpanCursor(Ct,kt,Et),Bt=new SpanCursor(Rt,kt,Et);vt.iterGaps((Ft,Ut,Zt)=>compare(Dt,Ft,Bt,Ut,Zt,Tt)),vt.empty&&vt.length==0&&compare(Dt,0,Bt,0,0,Tt)}static eq(lt,dt,vt=0,Tt){Tt==null&&(Tt=1e9-1);let Et=lt.filter(Bt=>!Bt.isEmpty&&dt.indexOf(Bt)<0),Ct=dt.filter(Bt=>!Bt.isEmpty&&lt.indexOf(Bt)<0);if(Et.length!=Ct.length)return!1;if(!Et.length)return!0;let Rt=findSharedChunks(Et,Ct),kt=new SpanCursor(Et,Rt,0).goto(vt),Dt=new SpanCursor(Ct,Rt,0).goto(vt);for(;;){if(kt.to!=Dt.to||!sameValues(kt.active,Dt.active)||kt.point&&(!Dt.point||!kt.point.eq(Dt.point)))return!1;if(kt.to>Tt)return!0;kt.next(),Dt.next()}}static spans(lt,dt,vt,Tt,Et=-1){let Ct=new SpanCursor(lt,null,Et).goto(dt),Rt=dt,kt=Ct.openStart;for(;;){let Dt=Math.min(Ct.to,vt);if(Ct.point){let Bt=Ct.activeForPoint(Ct.to),Ft=Ct.pointFrom<dt?Bt.length+1:Math.min(Bt.length,kt);Tt.point(Rt,Dt,Ct.point,Bt,Ft,Ct.pointRank),kt=Math.min(Ct.openEnd(Dt),Bt.length)}else Dt>Rt&&(Tt.span(Rt,Dt,Ct.active,kt),kt=Ct.openEnd(Dt));if(Ct.to>vt)return kt+(Ct.point&&Ct.to>vt?1:0);Rt=Ct.to,Ct.next()}}static of(lt,dt=!1){let vt=new RangeSetBuilder;for(let Tt of lt instanceof Range?[lt]:dt?lazySort(lt):lt)vt.add(Tt.from,Tt.to,Tt.value);return vt.finish()}}RangeSet.empty=new RangeSet([],[],null,-1);function lazySort(ft){if(ft.length>1)for(let lt=ft[0],dt=1;dt<ft.length;dt++){let vt=ft[dt];if(cmpRange(lt,vt)>0)return ft.slice().sort(cmpRange);lt=vt}return ft}RangeSet.empty.nextLayer=RangeSet.empty;class RangeSetBuilder{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(lt){this.chunks.push(new Chunk(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,lt&&(this.from=[],this.to=[],this.value=[])}add(lt,dt,vt){this.addInner(lt,dt,vt)||(this.nextLayer||(this.nextLayer=new RangeSetBuilder)).add(lt,dt,vt)}addInner(lt,dt,vt){let Tt=lt-this.lastTo||vt.startSide-this.last.endSide;if(Tt<=0&&(lt-this.lastFrom||vt.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return Tt<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=lt),this.from.push(lt-this.chunkStart),this.to.push(dt-this.chunkStart),this.last=vt,this.lastFrom=lt,this.lastTo=dt,this.value.push(vt),vt.point&&(this.maxPoint=Math.max(this.maxPoint,dt-lt)),!0)}addChunk(lt,dt){if((lt-this.lastTo||dt.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,dt.maxPoint),this.chunks.push(dt),this.chunkPos.push(lt);let vt=dt.value.length-1;return this.last=dt.value[vt],this.lastFrom=dt.from[vt]+lt,this.lastTo=dt.to[vt]+lt,!0}finish(){return this.finishInner(RangeSet.empty)}finishInner(lt){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return lt;let dt=RangeSet.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(lt):lt,this.setMaxPoint);return this.from=null,dt}}function findSharedChunks(ft,lt,dt){let vt=new Map;for(let Et of ft)for(let Ct=0;Ct<Et.chunk.length;Ct++)Et.chunk[Ct].maxPoint<=0&&vt.set(Et.chunk[Ct],Et.chunkPos[Ct]);let Tt=new Set;for(let Et of lt)for(let Ct=0;Ct<Et.chunk.length;Ct++){let Rt=vt.get(Et.chunk[Ct]);Rt!=null&&(dt?dt.mapPos(Rt):Rt)==Et.chunkPos[Ct]&&!(dt!=null&&dt.touchesRange(Rt,Rt+Et.chunk[Ct].length))&&Tt.add(Et.chunk[Ct])}return Tt}class LayerCursor{constructor(lt,dt,vt,Tt=0){this.layer=lt,this.skip=dt,this.minPoint=vt,this.rank=Tt}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(lt,dt=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(lt,dt,!1),this}gotoInner(lt,dt,vt){for(;this.chunkIndex<this.layer.chunk.length;){let Tt=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(Tt)||this.layer.chunkEnd(this.chunkIndex)<lt||Tt.maxPoint<this.minPoint))break;this.chunkIndex++,vt=!1}if(this.chunkIndex<this.layer.chunk.length){let Tt=this.layer.chunk[this.chunkIndex].findIndex(lt-this.layer.chunkPos[this.chunkIndex],dt,!0);(!vt||this.rangeIndex<Tt)&&this.setRangeIndex(Tt)}this.next()}forward(lt,dt){(this.to-lt||this.endSide-dt)<0&&this.gotoInner(lt,dt,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let lt=this.layer.chunkPos[this.chunkIndex],dt=this.layer.chunk[this.chunkIndex],vt=lt+dt.from[this.rangeIndex];if(this.from=vt,this.to=lt+dt.to[this.rangeIndex],this.value=dt.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(lt){if(lt==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=lt}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(lt){return this.from-lt.from||this.startSide-lt.startSide||this.rank-lt.rank||this.to-lt.to||this.endSide-lt.endSide}}class HeapCursor{constructor(lt){this.heap=lt}static from(lt,dt=null,vt=-1){let Tt=[];for(let Et=0;Et<lt.length;Et++)for(let Ct=lt[Et];!Ct.isEmpty;Ct=Ct.nextLayer)Ct.maxPoint>=vt&&Tt.push(new LayerCursor(Ct,dt,vt,Et));return Tt.length==1?Tt[0]:new HeapCursor(Tt)}get startSide(){return this.value?this.value.startSide:0}goto(lt,dt=-1e9){for(let vt of this.heap)vt.goto(lt,dt);for(let vt=this.heap.length>>1;vt>=0;vt--)heapBubble(this.heap,vt);return this.next(),this}forward(lt,dt){for(let vt of this.heap)vt.forward(lt,dt);for(let vt=this.heap.length>>1;vt>=0;vt--)heapBubble(this.heap,vt);(this.to-lt||this.value.endSide-dt)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let lt=this.heap[0];this.from=lt.from,this.to=lt.to,this.value=lt.value,this.rank=lt.rank,lt.value&&lt.next(),heapBubble(this.heap,0)}}}function heapBubble(ft,lt){for(let dt=ft[lt];;){let vt=(lt<<1)+1;if(vt>=ft.length)break;let Tt=ft[vt];if(vt+1<ft.length&&Tt.compare(ft[vt+1])>=0&&(Tt=ft[vt+1],vt++),dt.compare(Tt)<0)break;ft[vt]=dt,ft[lt]=Tt,lt=vt}}class SpanCursor{constructor(lt,dt,vt){this.minPoint=vt,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=HeapCursor.from(lt,dt,vt)}goto(lt,dt=-1e9){return this.cursor.goto(lt,dt),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=lt,this.endSide=dt,this.openStart=-1,this.next(),this}forward(lt,dt){for(;this.minActive>-1&&(this.activeTo[this.minActive]-lt||this.active[this.minActive].endSide-dt)<0;)this.removeActive(this.minActive);this.cursor.forward(lt,dt)}removeActive(lt){remove(this.active,lt),remove(this.activeTo,lt),remove(this.activeRank,lt),this.minActive=findMinIndex(this.active,this.activeTo)}addActive(lt){let dt=0,{value:vt,to:Tt,rank:Et}=this.cursor;for(;dt<this.activeRank.length&&this.activeRank[dt]<=Et;)dt++;insert(this.active,dt,vt),insert(this.activeTo,dt,Tt),insert(this.activeRank,dt,Et),lt&&insert(lt,dt,this.cursor.from),this.minActive=findMinIndex(this.active,this.activeTo)}next(){let lt=this.to,dt=this.point;this.point=null;let vt=this.openStart<0?[]:null;for(;;){let Tt=this.minActive;if(Tt>-1&&(this.activeTo[Tt]-this.cursor.from||this.active[Tt].endSide-this.cursor.startSide)<0){if(this.activeTo[Tt]>lt){this.to=this.activeTo[Tt],this.endSide=this.active[Tt].endSide;break}this.removeActive(Tt),vt&&remove(vt,Tt)}else if(this.cursor.value)if(this.cursor.from>lt){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let Et=this.cursor.value;if(!Et.point)this.addActive(vt),this.cursor.next();else if(dt&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=Et,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=Et.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(vt){this.openStart=0;for(let Tt=vt.length-1;Tt>=0&&vt[Tt]<lt;Tt--)this.openStart++}}activeForPoint(lt){if(!this.active.length)return this.active;let dt=[];for(let vt=this.active.length-1;vt>=0&&!(this.activeRank[vt]<this.pointRank);vt--)(this.activeTo[vt]>lt||this.activeTo[vt]==lt&&this.active[vt].endSide>=this.point.endSide)&&dt.push(this.active[vt]);return dt.reverse()}openEnd(lt){let dt=0;for(let vt=this.activeTo.length-1;vt>=0&&this.activeTo[vt]>lt;vt--)dt++;return dt}}function compare(ft,lt,dt,vt,Tt,Et){ft.goto(lt),dt.goto(vt);let Ct=vt+Tt,Rt=vt,kt=vt-lt;for(;;){let Dt=ft.to+kt-dt.to||ft.endSide-dt.endSide,Bt=Dt<0?ft.to+kt:dt.to,Ft=Math.min(Bt,Ct);if(ft.point||dt.point?ft.point&&dt.point&&(ft.point==dt.point||ft.point.eq(dt.point))&&sameValues(ft.activeForPoint(ft.to+kt),dt.activeForPoint(dt.to))||Et.comparePoint(Rt,Ft,ft.point,dt.point):Ft>Rt&&!sameValues(ft.active,dt.active)&&Et.compareRange(Rt,Ft,ft.active,dt.active),Bt>Ct)break;Rt=Bt,Dt<=0&&ft.next(),Dt>=0&&dt.next()}}function sameValues(ft,lt){if(ft.length!=lt.length)return!1;for(let dt=0;dt<ft.length;dt++)if(ft[dt]!=lt[dt]&&!ft[dt].eq(lt[dt]))return!1;return!0}function remove(ft,lt){for(let dt=lt,vt=ft.length-1;dt<vt;dt++)ft[dt]=ft[dt+1];ft.pop()}function insert(ft,lt,dt){for(let vt=ft.length-1;vt>=lt;vt--)ft[vt+1]=ft[vt];ft[lt]=dt}function findMinIndex(ft,lt){let dt=-1,vt=1e9;for(let Tt=0;Tt<lt.length;Tt++)(lt[Tt]-vt||ft[Tt].endSide-ft[dt].endSide)<0&&(dt=Tt,vt=lt[Tt]);return dt}function countColumn(ft,lt,dt=ft.length){let vt=0;for(let Tt=0;Tt<dt;)ft.charCodeAt(Tt)==9?(vt+=lt-vt%lt,Tt++):(vt++,Tt=findClusterBreak(ft,Tt));return vt}function findColumn(ft,lt,dt,vt){for(let Tt=0,Et=0;;){if(Et>=lt)return Tt;if(Tt==ft.length)break;Et+=ft.charCodeAt(Tt)==9?dt-Et%dt:1,Tt=findClusterBreak(ft,Tt)}return vt===!0?-1:ft.length}const C="ͼ",COUNT=typeof Symbol>"u"?"__"+C:Symbol.for(C),SET=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),top=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class StyleModule{constructor(lt,dt){this.rules=[];let{finish:vt}=dt||{};function Tt(Ct){return/^@/.test(Ct)?[Ct]:Ct.split(/,\s*/)}function Et(Ct,Rt,kt,Dt){let Bt=[],Ft=/^@(\w+)\b/.exec(Ct[0]),Ut=Ft&&Ft[1]=="keyframes";if(Ft&&Rt==null)return kt.push(Ct[0]+";");for(let Zt in Rt){let Kt=Rt[Zt];if(/&/.test(Zt))Et(Zt.split(/,\s*/).map(ln=>Ct.map(hn=>ln.replace(/&/,hn))).reduce((ln,hn)=>ln.concat(hn)),Kt,kt);else if(Kt&&typeof Kt=="object"){if(!Ft)throw new RangeError("The value of a property ("+Zt+") should be a primitive value.");Et(Tt(Zt),Kt,Bt,Ut)}else Kt!=null&&Bt.push(Zt.replace(/_.*/,"").replace(/[A-Z]/g,ln=>"-"+ln.toLowerCase())+": "+Kt+";")}(Bt.length||Ut)&&kt.push((vt&&!Ft&&!Dt?Ct.map(vt):Ct).join(", ")+" {"+Bt.join(" ")+"}")}for(let Ct in lt)Et(Tt(Ct),lt[Ct],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let lt=top[COUNT]||1;return top[COUNT]=lt+1,C+lt.toString(36)}static mount(lt,dt){(lt[SET]||new StyleSet(lt)).mount(Array.isArray(dt)?dt:[dt])}}let adoptedSet=null;class StyleSet{constructor(lt){if(!lt.head&&lt.adoptedStyleSheets&&typeof CSSStyleSheet<"u"){if(adoptedSet)return lt.adoptedStyleSheets=[adoptedSet.sheet].concat(lt.adoptedStyleSheets),lt[SET]=adoptedSet;this.sheet=new CSSStyleSheet,lt.adoptedStyleSheets=[this.sheet].concat(lt.adoptedStyleSheets),adoptedSet=this}else{this.styleTag=(lt.ownerDocument||lt).createElement("style");let dt=lt.head||lt;dt.insertBefore(this.styleTag,dt.firstChild)}this.modules=[],lt[SET]=this}mount(lt){let dt=this.sheet,vt=0,Tt=0;for(let Et=0;Et<lt.length;Et++){let Ct=lt[Et],Rt=this.modules.indexOf(Ct);if(Rt<Tt&&Rt>-1&&(this.modules.splice(Rt,1),Tt--,Rt=-1),Rt==-1){if(this.modules.splice(Tt++,0,Ct),dt)for(let kt=0;kt<Ct.rules.length;kt++)dt.insertRule(Ct.rules[kt],vt++)}else{for(;Tt<Rt;)vt+=this.modules[Tt++].rules.length;vt+=Ct.rules.length,Tt++}}if(!dt){let Et="";for(let Ct=0;Ct<this.modules.length;Ct++)Et+=this.modules[Ct].getRules()+`
`;this.styleTag.textContent=Et}}}var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},chrome$1=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent),mac=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie$1=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),brokenModifierNames=mac||chrome$1&&+chrome$1[1]<57;for(var i=0;i<10;i++)base[48+i]=base[96+i]=String(i);for(var i=1;i<=24;i++)base[i+111]="F"+i;for(var i=65;i<=90;i++)base[i]=String.fromCharCode(i+32),shift[i]=String.fromCharCode(i);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(ft){var lt=brokenModifierNames&&(ft.ctrlKey||ft.altKey||ft.metaKey)||ie$1&&ft.shiftKey&&ft.key&&ft.key.length==1||ft.key=="Unidentified",dt=!lt&&ft.key||(ft.shiftKey?shift:base)[ft.keyCode]||ft.key||"Unidentified";return dt=="Esc"&&(dt="Escape"),dt=="Del"&&(dt="Delete"),dt=="Left"&&(dt="ArrowLeft"),dt=="Up"&&(dt="ArrowUp"),dt=="Right"&&(dt="ArrowRight"),dt=="Down"&&(dt="ArrowDown"),dt}function getSelection(ft){let lt;return ft.nodeType==11?lt=ft.getSelection?ft:ft.ownerDocument:lt=ft,lt.getSelection()}function contains(ft,lt){return lt?ft==lt||ft.contains(lt.nodeType!=1?lt.parentNode:lt):!1}function deepActiveElement(ft){let lt=ft.activeElement;for(;lt&&lt.shadowRoot;)lt=lt.shadowRoot.activeElement;return lt}function hasSelection(ft,lt){if(!lt.anchorNode)return!1;try{return contains(ft,lt.anchorNode)}catch{return!1}}function clientRectsFor(ft){return ft.nodeType==3?textRange(ft,0,ft.nodeValue.length).getClientRects():ft.nodeType==1?ft.getClientRects():[]}function isEquivalentPosition(ft,lt,dt,vt){return dt?scanFor(ft,lt,dt,vt,-1)||scanFor(ft,lt,dt,vt,1):!1}function domIndex(ft){for(var lt=0;;lt++)if(ft=ft.previousSibling,!ft)return lt}function scanFor(ft,lt,dt,vt,Tt){for(;;){if(ft==dt&&lt==vt)return!0;if(lt==(Tt<0?0:maxOffset(ft))){if(ft.nodeName=="DIV")return!1;let Et=ft.parentNode;if(!Et||Et.nodeType!=1)return!1;lt=domIndex(ft)+(Tt<0?0:1),ft=Et}else if(ft.nodeType==1){if(ft=ft.childNodes[lt+(Tt<0?-1:0)],ft.nodeType==1&&ft.contentEditable=="false")return!1;lt=Tt<0?maxOffset(ft):0}else return!1}}function maxOffset(ft){return ft.nodeType==3?ft.nodeValue.length:ft.childNodes.length}const Rect0={left:0,right:0,top:0,bottom:0};function flattenRect(ft,lt){let dt=lt?ft.left:ft.right;return{left:dt,right:dt,top:ft.top,bottom:ft.bottom}}function windowRect(ft){return{left:0,right:ft.innerWidth,top:0,bottom:ft.innerHeight}}function scrollRectIntoView(ft,lt,dt,vt,Tt,Et,Ct,Rt){let kt=ft.ownerDocument,Dt=kt.defaultView||window;for(let Bt=ft;Bt;)if(Bt.nodeType==1){let Ft,Ut=Bt==kt.body;if(Ut)Ft=windowRect(Dt);else{if(Bt.scrollHeight<=Bt.clientHeight&&Bt.scrollWidth<=Bt.clientWidth){Bt=Bt.assignedSlot||Bt.parentNode;continue}let ln=Bt.getBoundingClientRect();Ft={left:ln.left,right:ln.left+Bt.clientWidth,top:ln.top,bottom:ln.top+Bt.clientHeight}}let Zt=0,Kt=0;if(Tt=="nearest")lt.top<Ft.top?(Kt=-(Ft.top-lt.top+Ct),dt>0&&lt.bottom>Ft.bottom+Kt&&(Kt=lt.bottom-Ft.bottom+Kt+Ct)):lt.bottom>Ft.bottom&&(Kt=lt.bottom-Ft.bottom+Ct,dt<0&&lt.top-Kt<Ft.top&&(Kt=-(Ft.top+Kt-lt.top+Ct)));else{let ln=lt.bottom-lt.top,hn=Ft.bottom-Ft.top;Kt=(Tt=="center"&&ln<=hn?lt.top+ln/2-hn/2:Tt=="start"||Tt=="center"&&dt<0?lt.top-Ct:lt.bottom-hn+Ct)-Ft.top}if(vt=="nearest"?lt.left<Ft.left?(Zt=-(Ft.left-lt.left+Et),dt>0&&lt.right>Ft.right+Zt&&(Zt=lt.right-Ft.right+Zt+Et)):lt.right>Ft.right&&(Zt=lt.right-Ft.right+Et,dt<0&&lt.left<Ft.left+Zt&&(Zt=-(Ft.left+Zt-lt.left+Et))):Zt=(vt=="center"?lt.left+(lt.right-lt.left)/2-(Ft.right-Ft.left)/2:vt=="start"==Rt?lt.left-Et:lt.right-(Ft.right-Ft.left)+Et)-Ft.left,Zt||Kt)if(Ut)Dt.scrollBy(Zt,Kt);else{let ln=0,hn=0;if(Kt){let dn=Bt.scrollTop;Bt.scrollTop+=Kt,hn=Bt.scrollTop-dn}if(Zt){let dn=Bt.scrollLeft;Bt.scrollLeft+=Zt,ln=Bt.scrollLeft-dn}lt={left:lt.left-ln,top:lt.top-hn,right:lt.right-ln,bottom:lt.bottom-hn},ln&&Math.abs(ln-Zt)<1&&(vt="nearest"),hn&&Math.abs(hn-Kt)<1&&(Tt="nearest")}if(Ut)break;Bt=Bt.assignedSlot||Bt.parentNode}else if(Bt.nodeType==11)Bt=Bt.host;else break}function scrollableParent(ft){let lt=ft.ownerDocument;for(let dt=ft.parentNode;dt&&dt!=lt.body;)if(dt.nodeType==1){if(dt.scrollHeight>dt.clientHeight||dt.scrollWidth>dt.clientWidth)return dt;dt=dt.assignedSlot||dt.parentNode}else if(dt.nodeType==11)dt=dt.host;else break;return null}class DOMSelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(lt){return this.anchorNode==lt.anchorNode&&this.anchorOffset==lt.anchorOffset&&this.focusNode==lt.focusNode&&this.focusOffset==lt.focusOffset}setRange(lt){this.set(lt.anchorNode,lt.anchorOffset,lt.focusNode,lt.focusOffset)}set(lt,dt,vt,Tt){this.anchorNode=lt,this.anchorOffset=dt,this.focusNode=vt,this.focusOffset=Tt}}let preventScrollSupported=null;function focusPreventScroll(ft){if(ft.setActive)return ft.setActive();if(preventScrollSupported)return ft.focus(preventScrollSupported);let lt=[];for(let dt=ft;dt&&(lt.push(dt,dt.scrollTop,dt.scrollLeft),dt!=dt.ownerDocument);dt=dt.parentNode);if(ft.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),!preventScrollSupported){preventScrollSupported=!1;for(let dt=0;dt<lt.length;){let vt=lt[dt++],Tt=lt[dt++],Et=lt[dt++];vt.scrollTop!=Tt&&(vt.scrollTop=Tt),vt.scrollLeft!=Et&&(vt.scrollLeft=Et)}}}let scratchRange;function textRange(ft,lt,dt=lt){let vt=scratchRange||(scratchRange=document.createRange());return vt.setEnd(ft,dt),vt.setStart(ft,lt),vt}function dispatchKey(ft,lt,dt){let vt={key:lt,code:lt,keyCode:dt,which:dt,cancelable:!0},Tt=new KeyboardEvent("keydown",vt);Tt.synthetic=!0,ft.dispatchEvent(Tt);let Et=new KeyboardEvent("keyup",vt);return Et.synthetic=!0,ft.dispatchEvent(Et),Tt.defaultPrevented||Et.defaultPrevented}function getRoot(ft){for(;ft;){if(ft&&(ft.nodeType==9||ft.nodeType==11&&ft.host))return ft;ft=ft.assignedSlot||ft.parentNode}return null}function clearAttributes(ft){for(;ft.attributes.length;)ft.removeAttributeNode(ft.attributes[0])}function atElementStart(ft,lt){let dt=lt.focusNode,vt=lt.focusOffset;if(!dt||lt.anchorNode!=dt||lt.anchorOffset!=vt)return!1;for(;;)if(vt){if(dt.nodeType!=1)return!1;let Tt=dt.childNodes[vt-1];Tt.contentEditable=="false"?vt--:(dt=Tt,vt=maxOffset(dt))}else{if(dt==ft)return!0;vt=domIndex(dt),dt=dt.parentNode}}class DOMPos{constructor(lt,dt,vt=!0){this.node=lt,this.offset=dt,this.precise=vt}static before(lt,dt){return new DOMPos(lt.parentNode,domIndex(lt),dt)}static after(lt,dt){return new DOMPos(lt.parentNode,domIndex(lt)+1,dt)}}const noChildren=[];class ContentView{constructor(){this.parent=null,this.dom=null,this.dirty=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(lt){let dt=this.posAtStart;for(let vt of this.children){if(vt==lt)return dt;dt+=vt.length+vt.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(lt){return this.posBefore(lt)+lt.length}coordsAt(lt,dt){return null}sync(lt,dt){if(this.dirty&2){let vt=this.dom,Tt=null,Et;for(let Ct of this.children){if(Ct.dirty){if(!Ct.dom&&(Et=Tt?Tt.nextSibling:vt.firstChild)){let Rt=ContentView.get(Et);(!Rt||!Rt.parent&&Rt.canReuseDOM(Ct))&&Ct.reuseDOM(Et)}Ct.sync(lt,dt),Ct.dirty=0}if(Et=Tt?Tt.nextSibling:vt.firstChild,dt&&!dt.written&&dt.node==vt&&Et!=Ct.dom&&(dt.written=!0),Ct.dom.parentNode==vt)for(;Et&&Et!=Ct.dom;)Et=rm$1(Et);else vt.insertBefore(Ct.dom,Et);Tt=Ct.dom}for(Et=Tt?Tt.nextSibling:vt.firstChild,Et&&dt&&dt.node==vt&&(dt.written=!0);Et;)Et=rm$1(Et)}else if(this.dirty&1)for(let vt of this.children)vt.dirty&&(vt.sync(lt,dt),vt.dirty=0)}reuseDOM(lt){}localPosFromDOM(lt,dt){let vt;if(lt==this.dom)vt=this.dom.childNodes[dt];else{let Tt=maxOffset(lt)==0?0:dt==0?-1:1;for(;;){let Et=lt.parentNode;if(Et==this.dom)break;Tt==0&&Et.firstChild!=Et.lastChild&&(lt==Et.firstChild?Tt=-1:Tt=1),lt=Et}Tt<0?vt=lt:vt=lt.nextSibling}if(vt==this.dom.firstChild)return 0;for(;vt&&!ContentView.get(vt);)vt=vt.nextSibling;if(!vt)return this.length;for(let Tt=0,Et=0;;Tt++){let Ct=this.children[Tt];if(Ct.dom==vt)return Et;Et+=Ct.length+Ct.breakAfter}}domBoundsAround(lt,dt,vt=0){let Tt=-1,Et=-1,Ct=-1,Rt=-1;for(let kt=0,Dt=vt,Bt=vt;kt<this.children.length;kt++){let Ft=this.children[kt],Ut=Dt+Ft.length;if(Dt<lt&&Ut>dt)return Ft.domBoundsAround(lt,dt,Dt);if(Ut>=lt&&Tt==-1&&(Tt=kt,Et=Dt),Dt>dt&&Ft.dom.parentNode==this.dom){Ct=kt,Rt=Bt;break}Bt=Ut,Dt=Ut+Ft.breakAfter}return{from:Et,to:Rt<0?vt+this.length:Rt,startDOM:(Tt?this.children[Tt-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:Ct<this.children.length&&Ct>=0?this.children[Ct].dom:null}}markDirty(lt=!1){this.dirty|=2,this.markParentsDirty(lt)}markParentsDirty(lt){for(let dt=this.parent;dt;dt=dt.parent){if(lt&&(dt.dirty|=2),dt.dirty&1)return;dt.dirty|=1,lt=!1}}setParent(lt){this.parent!=lt&&(this.parent=lt,this.dirty&&this.markParentsDirty(!0))}setDOM(lt){this.dom&&(this.dom.cmView=null),this.dom=lt,lt.cmView=this}get rootView(){for(let lt=this;;){let dt=lt.parent;if(!dt)return lt;lt=dt}}replaceChildren(lt,dt,vt=noChildren){this.markDirty();for(let Tt=lt;Tt<dt;Tt++){let Et=this.children[Tt];Et.parent==this&&Et.destroy()}this.children.splice(lt,dt-lt,...vt);for(let Tt=0;Tt<vt.length;Tt++)vt[Tt].setParent(this)}ignoreMutation(lt){return!1}ignoreEvent(lt){return!1}childCursor(lt=this.length){return new ChildCursor(this.children,lt,this.children.length)}childPos(lt,dt=1){return this.childCursor().findPos(lt,dt)}toString(){let lt=this.constructor.name.replace("View","");return lt+(this.children.length?"("+this.children.join()+")":this.length?"["+(lt=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(lt){return lt.cmView}get isEditable(){return!0}get isWidget(){return!1}merge(lt,dt,vt,Tt,Et,Ct){return!1}become(lt){return!1}canReuseDOM(lt){return lt.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}}ContentView.prototype.breakAfter=0;function rm$1(ft){let lt=ft.nextSibling;return ft.parentNode.removeChild(ft),lt}class ChildCursor{constructor(lt,dt,vt){this.children=lt,this.pos=dt,this.i=vt,this.off=0}findPos(lt,dt=1){for(;;){if(lt>this.pos||lt==this.pos&&(dt>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=lt-this.pos,this;let vt=this.children[--this.i];this.pos-=vt.length+vt.breakAfter}}}function replaceRange(ft,lt,dt,vt,Tt,Et,Ct,Rt,kt){let{children:Dt}=ft,Bt=Dt.length?Dt[lt]:null,Ft=Et.length?Et[Et.length-1]:null,Ut=Ft?Ft.breakAfter:Ct;if(!(lt==vt&&Bt&&!Ct&&!Ut&&Et.length<2&&Bt.merge(dt,Tt,Et.length?Ft:null,dt==0,Rt,kt))){if(vt<Dt.length){let Zt=Dt[vt];Zt&&Tt<Zt.length?(lt==vt&&(Zt=Zt.split(Tt),Tt=0),!Ut&&Ft&&Zt.merge(0,Tt,Ft,!0,0,kt)?Et[Et.length-1]=Zt:(Tt&&Zt.merge(0,Tt,null,!1,0,kt),Et.push(Zt))):Zt!=null&&Zt.breakAfter&&(Ft?Ft.breakAfter=1:Ct=1),vt++}for(Bt&&(Bt.breakAfter=Ct,dt>0&&(!Ct&&Et.length&&Bt.merge(dt,Bt.length,Et[0],!1,Rt,0)?Bt.breakAfter=Et.shift().breakAfter:(dt<Bt.length||Bt.children.length&&Bt.children[Bt.children.length-1].length==0)&&Bt.merge(dt,Bt.length,null,!1,Rt,0),lt++));lt<vt&&Et.length;)if(Dt[vt-1].become(Et[Et.length-1]))vt--,Et.pop(),kt=Et.length?0:Rt;else if(Dt[lt].become(Et[0]))lt++,Et.shift(),Rt=Et.length?0:kt;else break;!Et.length&&lt&&vt<Dt.length&&!Dt[lt-1].breakAfter&&Dt[vt].merge(0,0,Dt[lt-1],!1,Rt,kt)&&lt--,(lt<vt||Et.length)&&ft.replaceChildren(lt,vt,Et)}}function mergeChildrenInto(ft,lt,dt,vt,Tt,Et){let Ct=ft.childCursor(),{i:Rt,off:kt}=Ct.findPos(dt,1),{i:Dt,off:Bt}=Ct.findPos(lt,-1),Ft=lt-dt;for(let Ut of vt)Ft+=Ut.length;ft.length+=Ft,replaceRange(ft,Dt,Bt,Rt,kt,vt,0,Tt,Et)}let nav=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},doc=typeof document<"u"?document:{documentElement:{style:{}}};const ie_edge=/Edge\/(\d+)/.exec(nav.userAgent),ie_upto10=/MSIE \d/.test(nav.userAgent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nav.userAgent),ie=!!(ie_upto10||ie_11up||ie_edge),gecko=!ie&&/gecko\/(\d+)/i.test(nav.userAgent),chrome=!ie&&/Chrome\/(\d+)/.exec(nav.userAgent),webkit="webkitFontSmoothing"in doc.documentElement.style,safari=!ie&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(nav.userAgent)||nav.maxTouchPoints>2);var browser={mac:ios||/Mac/.test(nav.platform),windows:/Win/.test(nav.platform),linux:/Linux|X11/.test(nav.platform),ie,ie_version:ie_upto10?doc.documentMode||6:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko,gecko_version:gecko?+(/Firefox\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,chrome:!!chrome,chrome_version:chrome?+chrome[1]:0,ios,android:/Android\b/.test(nav.userAgent),webkit,safari,webkit_version:webkit?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:doc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const MaxJoinLen=256;class TextView extends ContentView{constructor(lt){super(),this.text=lt}get length(){return this.text.length}createDOM(lt){this.setDOM(lt||document.createTextNode(this.text))}sync(lt,dt){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(dt&&dt.node==this.dom&&(dt.written=!0),this.dom.nodeValue=this.text)}reuseDOM(lt){lt.nodeType==3&&this.createDOM(lt)}merge(lt,dt,vt){return vt&&(!(vt instanceof TextView)||this.length-(dt-lt)+vt.length>MaxJoinLen)?!1:(this.text=this.text.slice(0,lt)+(vt?vt.text:"")+this.text.slice(dt),this.markDirty(),!0)}split(lt){let dt=new TextView(this.text.slice(lt));return this.text=this.text.slice(0,lt),this.markDirty(),dt}localPosFromDOM(lt,dt){return lt==this.dom?dt:dt?this.text.length:0}domAtPos(lt){return new DOMPos(this.dom,lt)}domBoundsAround(lt,dt,vt){return{from:vt,to:vt+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(lt,dt){return textCoords(this.dom,lt,dt)}}class MarkView extends ContentView{constructor(lt,dt=[],vt=0){super(),this.mark=lt,this.children=dt,this.length=vt;for(let Tt of dt)Tt.setParent(this)}setAttrs(lt){if(clearAttributes(lt),this.mark.class&&(lt.className=this.mark.class),this.mark.attrs)for(let dt in this.mark.attrs)lt.setAttribute(dt,this.mark.attrs[dt]);return lt}reuseDOM(lt){lt.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(lt),this.dirty|=6)}sync(lt,dt){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(lt,dt)}merge(lt,dt,vt,Tt,Et,Ct){return vt&&(!(vt instanceof MarkView&&vt.mark.eq(this.mark))||lt&&Et<=0||dt<this.length&&Ct<=0)?!1:(mergeChildrenInto(this,lt,dt,vt?vt.children:[],Et-1,Ct-1),this.markDirty(),!0)}split(lt){let dt=[],vt=0,Tt=-1,Et=0;for(let Rt of this.children){let kt=vt+Rt.length;kt>lt&&dt.push(vt<lt?Rt.split(lt-vt):Rt),Tt<0&&vt>=lt&&(Tt=Et),vt=kt,Et++}let Ct=this.length-lt;return this.length=lt,Tt>-1&&(this.children.length=Tt,this.markDirty()),new MarkView(this.mark,dt,Ct)}domAtPos(lt){return inlineDOMAtPos(this,lt)}coordsAt(lt,dt){return coordsInChildren(this,lt,dt)}}function textCoords(ft,lt,dt){let vt=ft.nodeValue.length;lt>vt&&(lt=vt);let Tt=lt,Et=lt,Ct=0;lt==0&&dt<0||lt==vt&&dt>=0?browser.chrome||browser.gecko||(lt?(Tt--,Ct=1):Et<vt&&(Et++,Ct=-1)):dt<0?Tt--:Et<vt&&Et++;let Rt=textRange(ft,Tt,Et).getClientRects();if(!Rt.length)return Rect0;let kt=Rt[(Ct?Ct<0:dt>=0)?0:Rt.length-1];return browser.safari&&!Ct&&kt.width==0&&(kt=Array.prototype.find.call(Rt,Dt=>Dt.width)||kt),Ct?flattenRect(kt,Ct<0):kt||null}class WidgetView extends ContentView{constructor(lt,dt,vt){super(),this.widget=lt,this.length=dt,this.side=vt,this.prevWidget=null}static create(lt,dt,vt){return new(lt.customView||WidgetView)(lt,dt,vt)}split(lt){let dt=WidgetView.create(this.widget,this.length-lt,this.side);return this.length-=lt,dt}sync(lt){(!this.dom||!this.widget.updateDOM(this.dom,lt))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(lt)),this.dom.contentEditable="false")}getSide(){return this.side}merge(lt,dt,vt,Tt,Et,Ct){return vt&&(!(vt instanceof WidgetView)||!this.widget.compare(vt.widget)||lt>0&&Et<=0||dt<this.length&&Ct<=0)?!1:(this.length=lt+(vt?vt.length:0)+(this.length-dt),!0)}become(lt){return lt.length==this.length&&lt instanceof WidgetView&&lt.side==this.side&&this.widget.constructor==lt.widget.constructor?(this.widget.eq(lt.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=lt.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(lt){return this.widget.ignoreEvent(lt)}get overrideDOMText(){if(this.length==0)return Text.empty;let lt=this;for(;lt.parent;)lt=lt.parent;let{view:dt}=lt,vt=dt&&dt.state.doc,Tt=this.posAtStart;return vt?vt.slice(Tt,Tt+this.length):Text.empty}domAtPos(lt){return lt==0?DOMPos.before(this.dom):DOMPos.after(this.dom,lt==this.length)}domBoundsAround(){return null}coordsAt(lt,dt){let vt=this.dom.getClientRects(),Tt=null;if(!vt.length)return Rect0;for(let Et=lt>0?vt.length-1:0;Tt=vt[Et],!(lt>0?Et==0:Et==vt.length-1||Tt.top<Tt.bottom);Et+=lt>0?-1:1);return this.length?Tt:flattenRect(Tt,this.side>0)}get isEditable(){return!1}get isWidget(){return!0}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class CompositionView extends WidgetView{domAtPos(lt){let{topView:dt,text:vt}=this.widget;return dt?scanCompositionTree(lt,0,dt,vt,(Tt,Et)=>Tt.domAtPos(Et),Tt=>new DOMPos(vt,Math.min(Tt,vt.nodeValue.length))):new DOMPos(vt,Math.min(lt,vt.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(lt,dt){let{topView:vt,text:Tt}=this.widget;return vt?posFromDOMInCompositionTree(lt,dt,vt,Tt):Math.min(dt,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(lt,dt){let{topView:vt,text:Tt}=this.widget;return vt?scanCompositionTree(lt,dt,vt,Tt,(Et,Ct,Rt)=>Et.coordsAt(Ct,Rt),(Et,Ct)=>textCoords(Tt,Et,Ct)):textCoords(Tt,lt,dt)}destroy(){var lt;super.destroy(),(lt=this.widget.topView)===null||lt===void 0||lt.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}}function scanCompositionTree(ft,lt,dt,vt,Tt,Et){if(dt instanceof MarkView){for(let Ct=dt.dom.firstChild;Ct;Ct=Ct.nextSibling){let Rt=ContentView.get(Ct);if(!Rt)return Et(ft,lt);let kt=contains(Ct,vt),Dt=Rt.length+(kt?vt.nodeValue.length:0);if(ft<Dt||ft==Dt&&Rt.getSide()<=0)return kt?scanCompositionTree(ft,lt,Rt,vt,Tt,Et):Tt(Rt,ft,lt);ft-=Dt}return Tt(dt,dt.length,-1)}else return dt.dom==vt?Et(ft,lt):Tt(dt,ft,lt)}function posFromDOMInCompositionTree(ft,lt,dt,vt){if(dt instanceof MarkView)for(let Tt of dt.children){let Et=0,Ct=contains(Tt.dom,vt);if(contains(Tt.dom,ft))return Et+(Ct?posFromDOMInCompositionTree(ft,lt,Tt,vt):Tt.localPosFromDOM(ft,lt));Et+=Ct?vt.nodeValue.length:Tt.length}else if(dt.dom==vt)return Math.min(lt,vt.nodeValue.length);return dt.localPosFromDOM(ft,lt)}class WidgetBufferView extends ContentView{constructor(lt){super(),this.side=lt}get length(){return 0}merge(){return!1}become(lt){return lt instanceof WidgetBufferView&&lt.side==this.side}split(){return new WidgetBufferView(this.side)}sync(){if(!this.dom){let lt=document.createElement("img");lt.className="cm-widgetBuffer",lt.setAttribute("aria-hidden","true"),this.setDOM(lt)}}getSide(){return this.side}domAtPos(lt){return DOMPos.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(lt){let dt=this.dom.getBoundingClientRect(),vt=inlineSiblingRect(this,this.side>0?-1:1);return vt&&vt.top<dt.bottom&&vt.bottom>dt.top?{left:dt.left,right:dt.right,top:vt.top,bottom:vt.bottom}:dt}get overrideDOMText(){return Text.empty}}TextView.prototype.children=WidgetView.prototype.children=WidgetBufferView.prototype.children=noChildren;function inlineSiblingRect(ft,lt){let dt=ft.parent,vt=dt?dt.children.indexOf(ft):-1;for(;dt&&vt>=0;)if(lt<0?vt>0:vt<dt.children.length){let Tt=dt.children[vt+lt];if(Tt instanceof TextView){let Et=Tt.coordsAt(lt<0?Tt.length:0,lt);if(Et)return Et}vt+=lt}else if(dt instanceof MarkView&&dt.parent)vt=dt.parent.children.indexOf(dt)+(lt<0?0:1),dt=dt.parent;else{let Tt=dt.dom.lastChild;if(Tt&&Tt.nodeName=="BR")return Tt.getClientRects()[0];break}}function inlineDOMAtPos(ft,lt){let dt=ft.dom,{children:vt}=ft,Tt=0;for(let Et=0;Tt<vt.length;Tt++){let Ct=vt[Tt],Rt=Et+Ct.length;if(!(Rt==Et&&Ct.getSide()<=0)){if(lt>Et&&lt<Rt&&Ct.dom.parentNode==dt)return Ct.domAtPos(lt-Et);if(lt<=Et)break;Et=Rt}}for(let Et=Tt;Et>0;Et--){let Ct=vt[Et-1];if(Ct.dom.parentNode==dt)return Ct.domAtPos(Ct.length)}for(let Et=Tt;Et<vt.length;Et++){let Ct=vt[Et];if(Ct.dom.parentNode==dt)return Ct.domAtPos(0)}return new DOMPos(dt,0)}function joinInlineInto(ft,lt,dt){let vt,{children:Tt}=ft;dt>0&&lt instanceof MarkView&&Tt.length&&(vt=Tt[Tt.length-1])instanceof MarkView&&vt.mark.eq(lt.mark)?joinInlineInto(vt,lt.children[0],dt-1):(Tt.push(lt),lt.setParent(ft)),ft.length+=lt.length}function coordsInChildren(ft,lt,dt){let vt=null,Tt=-1,Et=null,Ct=-1;function Rt(Dt,Bt){for(let Ft=0,Ut=0;Ft<Dt.children.length&&Ut<=Bt;Ft++){let Zt=Dt.children[Ft],Kt=Ut+Zt.length;Kt>=Bt&&(Zt.children.length?Rt(Zt,Bt-Ut):!Et&&(Kt>Bt||Ut==Kt&&Zt.getSide()>0)?(Et=Zt,Ct=Bt-Ut):(Ut<Bt||Ut==Kt&&Zt.getSide()<0)&&(vt=Zt,Tt=Bt-Ut)),Ut=Kt}}Rt(ft,lt);let kt=(dt<0?vt:Et)||vt||Et;return kt?kt.coordsAt(Math.max(0,kt==vt?Tt:Ct),dt):fallbackRect(ft)}function fallbackRect(ft){let lt=ft.dom.lastChild;if(!lt)return ft.dom.getBoundingClientRect();let dt=clientRectsFor(lt);return dt[dt.length-1]||null}function combineAttrs(ft,lt){for(let dt in ft)dt=="class"&&lt.class?lt.class+=" "+ft.class:dt=="style"&&lt.style?lt.style+=";"+ft.style:lt[dt]=ft[dt];return lt}function attrsEq(ft,lt){if(ft==lt)return!0;if(!ft||!lt)return!1;let dt=Object.keys(ft),vt=Object.keys(lt);if(dt.length!=vt.length)return!1;for(let Tt of dt)if(vt.indexOf(Tt)==-1||ft[Tt]!==lt[Tt])return!1;return!0}function updateAttrs(ft,lt,dt){let vt=null;if(lt)for(let Tt in lt)dt&&Tt in dt||ft.removeAttribute(vt=Tt);if(dt)for(let Tt in dt)lt&&lt[Tt]==dt[Tt]||ft.setAttribute(vt=Tt,dt[Tt]);return!!vt}class WidgetType{eq(lt){return!1}updateDOM(lt,dt){return!1}compare(lt){return this==lt||this.constructor==lt.constructor&&this.eq(lt)}get estimatedHeight(){return-1}ignoreEvent(lt){return!0}get customView(){return null}destroy(lt){}}var BlockType=function(ft){return ft[ft.Text=0]="Text",ft[ft.WidgetBefore=1]="WidgetBefore",ft[ft.WidgetAfter=2]="WidgetAfter",ft[ft.WidgetRange=3]="WidgetRange",ft}(BlockType||(BlockType={}));class Decoration extends RangeValue{constructor(lt,dt,vt,Tt){super(),this.startSide=lt,this.endSide=dt,this.widget=vt,this.spec=Tt}get heightRelevant(){return!1}static mark(lt){return new MarkDecoration(lt)}static widget(lt){let dt=lt.side||0,vt=!!lt.block;return dt+=vt?dt>0?3e8:-4e8:dt>0?1e8:-1e8,new PointDecoration(lt,dt,dt,vt,lt.widget||null,!1)}static replace(lt){let dt=!!lt.block,vt,Tt;if(lt.isBlockGap)vt=-5e8,Tt=4e8;else{let{start:Et,end:Ct}=getInclusive(lt,dt);vt=(Et?dt?-3e8:-1:5e8)-1,Tt=(Ct?dt?2e8:1:-6e8)+1}return new PointDecoration(lt,vt,Tt,dt,lt.widget||null,!0)}static line(lt){return new LineDecoration(lt)}static set(lt,dt=!1){return RangeSet.of(lt,dt)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Decoration.none=RangeSet.empty;class MarkDecoration extends Decoration{constructor(lt){let{start:dt,end:vt}=getInclusive(lt);super(dt?-1:5e8,vt?1:-6e8,null,lt),this.tagName=lt.tagName||"span",this.class=lt.class||"",this.attrs=lt.attributes||null}eq(lt){return this==lt||lt instanceof MarkDecoration&&this.tagName==lt.tagName&&this.class==lt.class&&attrsEq(this.attrs,lt.attrs)}range(lt,dt=lt){if(lt>=dt)throw new RangeError("Mark decorations may not be empty");return super.range(lt,dt)}}MarkDecoration.prototype.point=!1;class LineDecoration extends Decoration{constructor(lt){super(-2e8,-2e8,null,lt)}eq(lt){return lt instanceof LineDecoration&&this.spec.class==lt.spec.class&&attrsEq(this.spec.attributes,lt.spec.attributes)}range(lt,dt=lt){if(dt!=lt)throw new RangeError("Line decoration ranges must be zero-length");return super.range(lt,dt)}}LineDecoration.prototype.mapMode=MapMode.TrackBefore;LineDecoration.prototype.point=!0;class PointDecoration extends Decoration{constructor(lt,dt,vt,Tt,Et,Ct){super(dt,vt,Et,lt),this.block=Tt,this.isReplace=Ct,this.mapMode=Tt?dt<=0?MapMode.TrackBefore:MapMode.TrackAfter:MapMode.TrackDel}get type(){return this.startSide<this.endSide?BlockType.WidgetRange:this.startSide<=0?BlockType.WidgetBefore:BlockType.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(lt){return lt instanceof PointDecoration&&widgetsEq(this.widget,lt.widget)&&this.block==lt.block&&this.startSide==lt.startSide&&this.endSide==lt.endSide}range(lt,dt=lt){if(this.isReplace&&(lt>dt||lt==dt&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&dt!=lt)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(lt,dt)}}PointDecoration.prototype.point=!0;function getInclusive(ft,lt=!1){let{inclusiveStart:dt,inclusiveEnd:vt}=ft;return dt==null&&(dt=ft.inclusive),vt==null&&(vt=ft.inclusive),{start:dt??lt,end:vt??lt}}function widgetsEq(ft,lt){return ft==lt||!!(ft&&lt&&ft.compare(lt))}function addRange(ft,lt,dt,vt=0){let Tt=dt.length-1;Tt>=0&&dt[Tt]+vt>=ft?dt[Tt]=Math.max(dt[Tt],lt):dt.push(ft,lt)}class LineView extends ContentView{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(lt,dt,vt,Tt,Et,Ct){if(vt){if(!(vt instanceof LineView))return!1;this.dom||vt.transferDOM(this)}return Tt&&this.setDeco(vt?vt.attrs:null),mergeChildrenInto(this,lt,dt,vt?vt.children:[],Et,Ct),!0}split(lt){let dt=new LineView;if(dt.breakAfter=this.breakAfter,this.length==0)return dt;let{i:vt,off:Tt}=this.childPos(lt);Tt&&(dt.append(this.children[vt].split(Tt),0),this.children[vt].merge(Tt,this.children[vt].length,null,!1,0,0),vt++);for(let Et=vt;Et<this.children.length;Et++)dt.append(this.children[Et],0);for(;vt>0&&this.children[vt-1].length==0;)this.children[--vt].destroy();return this.children.length=vt,this.markDirty(),this.length=lt,dt}transferDOM(lt){this.dom&&(this.markDirty(),lt.setDOM(this.dom),lt.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(lt){attrsEq(this.attrs,lt)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=lt)}append(lt,dt){joinInlineInto(this,lt,dt)}addLineDeco(lt){let dt=lt.spec.attributes,vt=lt.spec.class;dt&&(this.attrs=combineAttrs(dt,this.attrs||{})),vt&&(this.attrs=combineAttrs({class:vt},this.attrs||{}))}domAtPos(lt){return inlineDOMAtPos(this,lt)}reuseDOM(lt){lt.nodeName=="DIV"&&(this.setDOM(lt),this.dirty|=6)}sync(lt,dt){var vt;this.dom?this.dirty&4&&(clearAttributes(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(updateAttrs(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(lt,dt);let Tt=this.dom.lastChild;for(;Tt&&ContentView.get(Tt)instanceof MarkView;)Tt=Tt.lastChild;if(!Tt||!this.length||Tt.nodeName!="BR"&&((vt=ContentView.get(Tt))===null||vt===void 0?void 0:vt.isEditable)==!1&&(!browser.ios||!this.children.some(Et=>Et instanceof TextView))){let Et=document.createElement("BR");Et.cmIgnore=!0,this.dom.appendChild(Et)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let lt=0;for(let dt of this.children){if(!(dt instanceof TextView)||/[^ -~]/.test(dt.text))return null;let vt=clientRectsFor(dt.dom);if(vt.length!=1)return null;lt+=vt[0].width}return lt?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:lt/this.length}:null}coordsAt(lt,dt){return coordsInChildren(this,lt,dt)}become(lt){return!1}get type(){return BlockType.Text}static find(lt,dt){for(let vt=0,Tt=0;vt<lt.children.length;vt++){let Et=lt.children[vt],Ct=Tt+Et.length;if(Ct>=dt){if(Et instanceof LineView)return Et;if(Ct>dt)break}Tt=Ct+Et.breakAfter}return null}}class BlockWidgetView extends ContentView{constructor(lt,dt,vt){super(),this.widget=lt,this.length=dt,this.type=vt,this.breakAfter=0,this.prevWidget=null}merge(lt,dt,vt,Tt,Et,Ct){return vt&&(!(vt instanceof BlockWidgetView)||!this.widget.compare(vt.widget)||lt>0&&Et<=0||dt<this.length&&Ct<=0)?!1:(this.length=lt+(vt?vt.length:0)+(this.length-dt),!0)}domAtPos(lt){return lt==0?DOMPos.before(this.dom):DOMPos.after(this.dom,lt==this.length)}split(lt){let dt=this.length-lt;this.length=lt;let vt=new BlockWidgetView(this.widget,dt,this.type);return vt.breakAfter=this.breakAfter,vt}get children(){return noChildren}sync(lt){(!this.dom||!this.widget.updateDOM(this.dom,lt))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(lt)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Text.empty}domBoundsAround(){return null}become(lt){return lt instanceof BlockWidgetView&&lt.type==this.type&&lt.widget.constructor==this.widget.constructor?(lt.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=lt.widget,this.length=lt.length,this.breakAfter=lt.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(lt){return this.widget.ignoreEvent(lt)}get isEditable(){return!1}get isWidget(){return!0}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class ContentBuilder{constructor(lt,dt,vt,Tt){this.doc=lt,this.pos=dt,this.end=vt,this.disallowBlockEffectsFor=Tt,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=lt.iter(),this.skip=dt}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let lt=this.content[this.content.length-1];return!lt.breakAfter&&!(lt instanceof BlockWidgetView&&lt.type==BlockType.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new LineView),this.atCursorPos=!0),this.curLine}flushBuffer(lt=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(wrapMarks(new WidgetBufferView(-1),lt),lt.length),this.pendingBuffer=0)}addBlockWidget(lt){this.flushBuffer(),this.curLine=null,this.content.push(lt)}finish(lt){this.pendingBuffer&&lt<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(lt,dt,vt){for(;lt>0;){if(this.textOff==this.text.length){let{value:Et,lineBreak:Ct,done:Rt}=this.cursor.next(this.skip);if(this.skip=0,Rt)throw new Error("Ran out of text content when drawing inline views");if(Ct){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,lt--;continue}else this.text=Et,this.textOff=0}let Tt=Math.min(this.text.length-this.textOff,lt,512);this.flushBuffer(dt.slice(dt.length-vt)),this.getLine().append(wrapMarks(new TextView(this.text.slice(this.textOff,this.textOff+Tt)),dt),vt),this.atCursorPos=!0,this.textOff+=Tt,lt-=Tt,vt=0}}span(lt,dt,vt,Tt){this.buildText(dt-lt,vt,Tt),this.pos=dt,this.openStart<0&&(this.openStart=Tt)}point(lt,dt,vt,Tt,Et,Ct){if(this.disallowBlockEffectsFor[Ct]&&vt instanceof PointDecoration){if(vt.block)throw new RangeError("Block decorations may not be specified via plugins");if(dt>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let Rt=dt-lt;if(vt instanceof PointDecoration)if(vt.block){let{type:kt}=vt;kt==BlockType.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new BlockWidgetView(vt.widget||new NullWidget("div"),Rt,kt))}else{let kt=WidgetView.create(vt.widget||new NullWidget("span"),Rt,Rt?0:vt.startSide),Dt=this.atCursorPos&&!kt.isEditable&&Et<=Tt.length&&(lt<dt||vt.startSide>0),Bt=!kt.isEditable&&(lt<dt||Et>Tt.length||vt.startSide<=0),Ft=this.getLine();this.pendingBuffer==2&&!Dt&&(this.pendingBuffer=0),this.flushBuffer(Tt),Dt&&(Ft.append(wrapMarks(new WidgetBufferView(1),Tt),Et),Et=Tt.length+Math.max(0,Et-Tt.length)),Ft.append(wrapMarks(kt,Tt),Et),this.atCursorPos=Bt,this.pendingBuffer=Bt?lt<dt||Et>Tt.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=Tt.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(vt);Rt&&(this.textOff+Rt<=this.text.length?this.textOff+=Rt:(this.skip+=Rt-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=dt),this.openStart<0&&(this.openStart=Et)}static build(lt,dt,vt,Tt,Et){let Ct=new ContentBuilder(lt,dt,vt,Et);return Ct.openEnd=RangeSet.spans(Tt,dt,vt,Ct),Ct.openStart<0&&(Ct.openStart=Ct.openEnd),Ct.finish(Ct.openEnd),Ct}}function wrapMarks(ft,lt){for(let dt of lt)ft=new MarkView(dt,[ft],ft.length);return ft}class NullWidget extends WidgetType{constructor(lt){super(),this.tag=lt}eq(lt){return lt.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(lt){return lt.nodeName.toLowerCase()==this.tag}}const clickAddsSelectionRange=Facet.define(),dragMovesSelection$1=Facet.define(),mouseSelectionStyle=Facet.define(),exceptionSink=Facet.define(),updateListener=Facet.define(),inputHandler$1=Facet.define(),focusChangeEffect=Facet.define(),perLineTextDirection=Facet.define({combine:ft=>ft.some(lt=>lt)}),nativeSelectionHidden=Facet.define({combine:ft=>ft.some(lt=>lt)});class ScrollTarget{constructor(lt,dt="nearest",vt="nearest",Tt=5,Et=5){this.range=lt,this.y=dt,this.x=vt,this.yMargin=Tt,this.xMargin=Et}map(lt){return lt.empty?this:new ScrollTarget(this.range.map(lt),this.y,this.x,this.yMargin,this.xMargin)}}const scrollIntoView$1=StateEffect.define({map:(ft,lt)=>ft.map(lt)});function logException(ft,lt,dt){let vt=ft.facet(exceptionSink);vt.length?vt[0](lt):window.onerror?window.onerror(String(lt),dt,void 0,void 0,lt):dt?console.error(dt+":",lt):console.error(lt)}const editable=Facet.define({combine:ft=>ft.length?ft[0]:!0});let nextPluginID=0;const viewPlugin=Facet.define();class ViewPlugin{constructor(lt,dt,vt,Tt){this.id=lt,this.create=dt,this.domEventHandlers=vt,this.extension=Tt(this)}static define(lt,dt){const{eventHandlers:vt,provide:Tt,decorations:Et}=dt||{};return new ViewPlugin(nextPluginID++,lt,vt,Ct=>{let Rt=[viewPlugin.of(Ct)];return Et&&Rt.push(decorations.of(kt=>{let Dt=kt.plugin(Ct);return Dt?Et(Dt):Decoration.none})),Tt&&Rt.push(Tt(Ct)),Rt})}static fromClass(lt,dt){return ViewPlugin.define(vt=>new lt(vt),dt)}}class PluginInstance{constructor(lt){this.spec=lt,this.mustUpdate=null,this.value=null}update(lt){if(this.value){if(this.mustUpdate){let dt=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(dt)}catch(vt){if(logException(dt.state,vt,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(lt)}catch(dt){logException(lt.state,dt,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(lt){var dt;if(!((dt=this.value)===null||dt===void 0)&&dt.destroy)try{this.value.destroy()}catch(vt){logException(lt.state,vt,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const editorAttributes=Facet.define(),contentAttributes=Facet.define(),decorations=Facet.define(),atomicRanges=Facet.define(),scrollMargins=Facet.define(),styleModule=Facet.define();class ChangedRange{constructor(lt,dt,vt,Tt){this.fromA=lt,this.toA=dt,this.fromB=vt,this.toB=Tt}join(lt){return new ChangedRange(Math.min(this.fromA,lt.fromA),Math.max(this.toA,lt.toA),Math.min(this.fromB,lt.fromB),Math.max(this.toB,lt.toB))}addToSet(lt){let dt=lt.length,vt=this;for(;dt>0;dt--){let Tt=lt[dt-1];if(!(Tt.fromA>vt.toA)){if(Tt.toA<vt.fromA)break;vt=vt.join(Tt),lt.splice(dt-1,1)}}return lt.splice(dt,0,vt),lt}static extendWithRanges(lt,dt){if(dt.length==0)return lt;let vt=[];for(let Tt=0,Et=0,Ct=0,Rt=0;;Tt++){let kt=Tt==lt.length?null:lt[Tt],Dt=Ct-Rt,Bt=kt?kt.fromB:1e9;for(;Et<dt.length&&dt[Et]<Bt;){let Ft=dt[Et],Ut=dt[Et+1],Zt=Math.max(Rt,Ft),Kt=Math.min(Bt,Ut);if(Zt<=Kt&&new ChangedRange(Zt+Dt,Kt+Dt,Zt,Kt).addToSet(vt),Ut>Bt)break;Et+=2}if(!kt)return vt;new ChangedRange(kt.fromA,kt.toA,kt.fromB,kt.toB).addToSet(vt),Ct=kt.toA,Rt=kt.toB}}}class ViewUpdate{constructor(lt,dt,vt){this.view=lt,this.state=dt,this.transactions=vt,this.flags=0,this.startState=lt.state,this.changes=ChangeSet.empty(this.startState.doc.length);for(let Et of vt)this.changes=this.changes.compose(Et.changes);let Tt=[];this.changes.iterChangedRanges((Et,Ct,Rt,kt)=>Tt.push(new ChangedRange(Et,Ct,Rt,kt))),this.changedRanges=Tt}static create(lt,dt,vt){return new ViewUpdate(lt,dt,vt)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(lt=>lt.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var Direction=function(ft){return ft[ft.LTR=0]="LTR",ft[ft.RTL=1]="RTL",ft}(Direction||(Direction={}));const LTR=Direction.LTR,RTL=Direction.RTL;function dec(ft){let lt=[];for(let dt=0;dt<ft.length;dt++)lt.push(1<<+ft[dt]);return lt}const LowTypes=dec("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ArabicTypes=dec("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Brackets=Object.create(null),BracketStack=[];for(let ft of["()","[]","{}"]){let lt=ft.charCodeAt(0),dt=ft.charCodeAt(1);Brackets[lt]=dt,Brackets[dt]=-lt}function charType(ft){return ft<=247?LowTypes[ft]:1424<=ft&&ft<=1524?2:1536<=ft&&ft<=1785?ArabicTypes[ft-1536]:1774<=ft&&ft<=2220?4:8192<=ft&&ft<=8203?256:64336<=ft&&ft<=65023?4:ft==8204?256:1}const BidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class BidiSpan{constructor(lt,dt,vt){this.from=lt,this.to=dt,this.level=vt}get dir(){return this.level%2?RTL:LTR}side(lt,dt){return this.dir==dt==lt?this.to:this.from}static find(lt,dt,vt,Tt){let Et=-1;for(let Ct=0;Ct<lt.length;Ct++){let Rt=lt[Ct];if(Rt.from<=dt&&Rt.to>=dt){if(Rt.level==vt)return Ct;(Et<0||(Tt!=0?Tt<0?Rt.from<dt:Rt.to>dt:lt[Et].level>Rt.level))&&(Et=Ct)}}if(Et<0)throw new RangeError("Index out of range");return Et}}const types=[];function computeOrder(ft,lt){let dt=ft.length,vt=lt==LTR?1:2,Tt=lt==LTR?2:1;if(!ft||vt==1&&!BidiRE.test(ft))return trivialOrder(dt);for(let Ct=0,Rt=vt,kt=vt;Ct<dt;Ct++){let Dt=charType(ft.charCodeAt(Ct));Dt==512?Dt=Rt:Dt==8&&kt==4&&(Dt=16),types[Ct]=Dt==4?2:Dt,Dt&7&&(kt=Dt),Rt=Dt}for(let Ct=0,Rt=vt,kt=vt;Ct<dt;Ct++){let Dt=types[Ct];if(Dt==128)Ct<dt-1&&Rt==types[Ct+1]&&Rt&24?Dt=types[Ct]=Rt:types[Ct]=256;else if(Dt==64){let Bt=Ct+1;for(;Bt<dt&&types[Bt]==64;)Bt++;let Ft=Ct&&Rt==8||Bt<dt&&types[Bt]==8?kt==1?1:8:256;for(let Ut=Ct;Ut<Bt;Ut++)types[Ut]=Ft;Ct=Bt-1}else Dt==8&&kt==1&&(types[Ct]=1);Rt=Dt,Dt&7&&(kt=Dt)}for(let Ct=0,Rt=0,kt=0,Dt,Bt,Ft;Ct<dt;Ct++)if(Bt=Brackets[Dt=ft.charCodeAt(Ct)])if(Bt<0){for(let Ut=Rt-3;Ut>=0;Ut-=3)if(BracketStack[Ut+1]==-Bt){let Zt=BracketStack[Ut+2],Kt=Zt&2?vt:Zt&4?Zt&1?Tt:vt:0;Kt&&(types[Ct]=types[BracketStack[Ut]]=Kt),Rt=Ut;break}}else{if(BracketStack.length==189)break;BracketStack[Rt++]=Ct,BracketStack[Rt++]=Dt,BracketStack[Rt++]=kt}else if((Ft=types[Ct])==2||Ft==1){let Ut=Ft==vt;kt=Ut?0:1;for(let Zt=Rt-3;Zt>=0;Zt-=3){let Kt=BracketStack[Zt+2];if(Kt&2)break;if(Ut)BracketStack[Zt+2]|=2;else{if(Kt&4)break;BracketStack[Zt+2]|=4}}}for(let Ct=0;Ct<dt;Ct++)if(types[Ct]==256){let Rt=Ct+1;for(;Rt<dt&&types[Rt]==256;)Rt++;let kt=(Ct?types[Ct-1]:vt)==1,Dt=(Rt<dt?types[Rt]:vt)==1,Bt=kt==Dt?kt?1:2:vt;for(let Ft=Ct;Ft<Rt;Ft++)types[Ft]=Bt;Ct=Rt-1}let Et=[];if(vt==1)for(let Ct=0;Ct<dt;){let Rt=Ct,kt=types[Ct++]!=1;for(;Ct<dt&&kt==(types[Ct]!=1);)Ct++;if(kt)for(let Dt=Ct;Dt>Rt;){let Bt=Dt,Ft=types[--Dt]!=2;for(;Dt>Rt&&Ft==(types[Dt-1]!=2);)Dt--;Et.push(new BidiSpan(Dt,Bt,Ft?2:1))}else Et.push(new BidiSpan(Rt,Ct,0))}else for(let Ct=0;Ct<dt;){let Rt=Ct,kt=types[Ct++]==2;for(;Ct<dt&&kt==(types[Ct]==2);)Ct++;Et.push(new BidiSpan(Rt,Ct,kt?1:2))}return Et}function trivialOrder(ft){return[new BidiSpan(0,ft,0)]}let movedOver="";function moveVisually(ft,lt,dt,vt,Tt){var Et;let Ct=vt.head-ft.from,Rt=-1;if(Ct==0){if(!Tt||!ft.length)return null;lt[0].level!=dt&&(Ct=lt[0].side(!1,dt),Rt=0)}else if(Ct==ft.length){if(Tt)return null;let Ut=lt[lt.length-1];Ut.level!=dt&&(Ct=Ut.side(!0,dt),Rt=lt.length-1)}Rt<0&&(Rt=BidiSpan.find(lt,Ct,(Et=vt.bidiLevel)!==null&&Et!==void 0?Et:-1,vt.assoc));let kt=lt[Rt];Ct==kt.side(Tt,dt)&&(kt=lt[Rt+=Tt?1:-1],Ct=kt.side(!Tt,dt));let Dt=Tt==(kt.dir==dt),Bt=findClusterBreak(ft.text,Ct,Dt);if(movedOver=ft.text.slice(Math.min(Ct,Bt),Math.max(Ct,Bt)),Bt!=kt.side(Tt,dt))return EditorSelection.cursor(Bt+ft.from,Dt?-1:1,kt.level);let Ft=Rt==(Tt?lt.length-1:0)?null:lt[Rt+(Tt?1:-1)];return!Ft&&kt.level!=dt?EditorSelection.cursor(Tt?ft.to:ft.from,Tt?-1:1,dt):Ft&&Ft.level<kt.level?EditorSelection.cursor(Ft.side(!Tt,dt)+ft.from,Tt?1:-1,Ft.level):EditorSelection.cursor(Bt+ft.from,Tt?-1:1,kt.level)}const LineBreakPlaceholder="￿";class DOMReader{constructor(lt,dt){this.points=lt,this.text="",this.lineSeparator=dt.facet(EditorState.lineSeparator)}append(lt){this.text+=lt}lineBreak(){this.text+=LineBreakPlaceholder}readRange(lt,dt){if(!lt)return this;let vt=lt.parentNode;for(let Tt=lt;;){this.findPointBefore(vt,Tt),this.readNode(Tt);let Et=Tt.nextSibling;if(Et==dt)break;let Ct=ContentView.get(Tt),Rt=ContentView.get(Et);(Ct&&Rt?Ct.breakAfter:(Ct?Ct.breakAfter:isBlockElement(Tt))||isBlockElement(Et)&&(Tt.nodeName!="BR"||Tt.cmIgnore))&&this.lineBreak(),Tt=Et}return this.findPointBefore(vt,dt),this}readTextNode(lt){let dt=lt.nodeValue;for(let vt of this.points)vt.node==lt&&(vt.pos=this.text.length+Math.min(vt.offset,dt.length));for(let vt=0,Tt=this.lineSeparator?null:/\r\n?|\n/g;;){let Et=-1,Ct=1,Rt;if(this.lineSeparator?(Et=dt.indexOf(this.lineSeparator,vt),Ct=this.lineSeparator.length):(Rt=Tt.exec(dt))&&(Et=Rt.index,Ct=Rt[0].length),this.append(dt.slice(vt,Et<0?dt.length:Et)),Et<0)break;if(this.lineBreak(),Ct>1)for(let kt of this.points)kt.node==lt&&kt.pos>this.text.length&&(kt.pos-=Ct-1);vt=Et+Ct}}readNode(lt){if(lt.cmIgnore)return;let dt=ContentView.get(lt),vt=dt&&dt.overrideDOMText;if(vt!=null){this.findPointInside(lt,vt.length);for(let Tt=vt.iter();!Tt.next().done;)Tt.lineBreak?this.lineBreak():this.append(Tt.value)}else lt.nodeType==3?this.readTextNode(lt):lt.nodeName=="BR"?lt.nextSibling&&this.lineBreak():lt.nodeType==1&&this.readRange(lt.firstChild,null)}findPointBefore(lt,dt){for(let vt of this.points)vt.node==lt&&lt.childNodes[vt.offset]==dt&&(vt.pos=this.text.length)}findPointInside(lt,dt){for(let vt of this.points)(lt.nodeType==3?vt.node==lt:lt.contains(vt.node))&&(vt.pos=this.text.length+Math.min(dt,vt.offset))}}function isBlockElement(ft){return ft.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(ft.nodeName)}class DOMPoint{constructor(lt,dt){this.node=lt,this.offset=dt,this.pos=-1}}class DocView extends ContentView{constructor(lt){super(),this.view=lt,this.compositionDeco=Decoration.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(lt.contentDOM),this.children=[new LineView],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ChangedRange(0,0,0,lt.state.doc.length)],0)}get length(){return this.view.state.doc.length}update(lt){let dt=lt.changedRanges;this.minWidth>0&&dt.length&&(dt.every(({fromA:Ct,toA:Rt})=>Rt<this.minWidthFrom||Ct>this.minWidthTo)?(this.minWidthFrom=lt.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=lt.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=Decoration.none:(lt.transactions.length||this.dirty)&&(this.compositionDeco=computeCompositionDeco(this.view,lt.changes)),(browser.ie||browser.chrome)&&!this.compositionDeco.size&&lt&&lt.state.doc.lines!=lt.startState.doc.lines&&(this.forceSelection=!0);let vt=this.decorations,Tt=this.updateDeco(),Et=findChangedDeco(vt,Tt,lt.changes);return dt=ChangedRange.extendWithRanges(dt,Et),this.dirty==0&&dt.length==0?!1:(this.updateInner(dt,lt.startState.doc.length),lt.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(lt,dt){this.view.viewState.mustMeasureContent=!0,this.updateChildren(lt,dt);let{observer:vt}=this.view;vt.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let Et=browser.chrome||browser.ios?{node:vt.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,Et),this.dirty=0,Et&&(Et.written||vt.selectionRange.focusNode!=Et.node)&&(this.forceSelection=!0),this.dom.style.height=""});let Tt=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let Et of this.children)Et instanceof BlockWidgetView&&Et.widget instanceof BlockGapWidget&&Tt.push(Et.dom);vt.updateGaps(Tt)}updateChildren(lt,dt){let vt=this.childCursor(dt);for(let Tt=lt.length-1;;Tt--){let Et=Tt>=0?lt[Tt]:null;if(!Et)break;let{fromA:Ct,toA:Rt,fromB:kt,toB:Dt}=Et,{content:Bt,breakAtStart:Ft,openStart:Ut,openEnd:Zt}=ContentBuilder.build(this.view.state.doc,kt,Dt,this.decorations,this.dynamicDecorationMap),{i:Kt,off:ln}=vt.findPos(Rt,1),{i:hn,off:dn}=vt.findPos(Ct,-1);replaceRange(this,hn,dn,Kt,ln,Bt,Ft,Ut,Zt)}}updateSelection(lt=!1,dt=!1){if((lt||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange(),!(dt||this.mayControlSelection()))return;let vt=this.forceSelection;this.forceSelection=!1;let Tt=this.view.state.selection.main,Et=this.domAtPos(Tt.anchor),Ct=Tt.empty?Et:this.domAtPos(Tt.head);if(browser.gecko&&Tt.empty&&betweenUneditable(Et)){let kt=document.createTextNode("");this.view.observer.ignore(()=>Et.node.insertBefore(kt,Et.node.childNodes[Et.offset]||null)),Et=Ct=new DOMPos(kt,0),vt=!0}let Rt=this.view.observer.selectionRange;(vt||!Rt.focusNode||!isEquivalentPosition(Et.node,Et.offset,Rt.anchorNode,Rt.anchorOffset)||!isEquivalentPosition(Ct.node,Ct.offset,Rt.focusNode,Rt.focusOffset))&&(this.view.observer.ignore(()=>{browser.android&&browser.chrome&&this.dom.contains(Rt.focusNode)&&inUneditable(Rt.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let kt=getSelection(this.view.root);if(kt)if(Tt.empty){if(browser.gecko){let Dt=nextToUneditable(Et.node,Et.offset);if(Dt&&Dt!=3){let Bt=nearbyTextNode(Et.node,Et.offset,Dt==1?1:-1);Bt&&(Et=new DOMPos(Bt,Dt==1?0:Bt.nodeValue.length))}}kt.collapse(Et.node,Et.offset),Tt.bidiLevel!=null&&Rt.cursorBidiLevel!=null&&(Rt.cursorBidiLevel=Tt.bidiLevel)}else if(kt.extend){kt.collapse(Et.node,Et.offset);try{kt.extend(Ct.node,Ct.offset)}catch{}}else{let Dt=document.createRange();Tt.anchor>Tt.head&&([Et,Ct]=[Ct,Et]),Dt.setEnd(Ct.node,Ct.offset),Dt.setStart(Et.node,Et.offset),kt.removeAllRanges(),kt.addRange(Dt)}}),this.view.observer.setSelectionRange(Et,Ct)),this.impreciseAnchor=Et.precise?null:new DOMPos(Rt.anchorNode,Rt.anchorOffset),this.impreciseHead=Ct.precise?null:new DOMPos(Rt.focusNode,Rt.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let{view:lt}=this,dt=lt.state.selection.main,vt=getSelection(lt.root),{anchorNode:Tt,anchorOffset:Et}=lt.observer.selectionRange;if(!vt||!dt.empty||!dt.assoc||!vt.modify)return;let Ct=LineView.find(this,dt.head);if(!Ct)return;let Rt=Ct.posAtStart;if(dt.head==Rt||dt.head==Rt+Ct.length)return;let kt=this.coordsAt(dt.head,-1),Dt=this.coordsAt(dt.head,1);if(!kt||!Dt||kt.bottom>Dt.top)return;let Bt=this.domAtPos(dt.head+dt.assoc);vt.collapse(Bt.node,Bt.offset),vt.modify("move",dt.assoc<0?"forward":"backward","lineboundary"),lt.observer.readSelectionRange();let Ft=lt.observer.selectionRange;lt.docView.posFromDOM(Ft.anchorNode,Ft.anchorOffset)!=dt.from&&vt.collapse(Tt,Et)}mayControlSelection(){let lt=this.view.root.activeElement;return lt==this.dom||hasSelection(this.dom,this.view.observer.selectionRange)&&!(lt&&this.dom.contains(lt))}nearest(lt){for(let dt=lt;dt;){let vt=ContentView.get(dt);if(vt&&vt.rootView==this)return vt;dt=dt.parentNode}return null}posFromDOM(lt,dt){let vt=this.nearest(lt);if(!vt)throw new RangeError("Trying to find position for a DOM position outside of the document");return vt.localPosFromDOM(lt,dt)+vt.posAtStart}domAtPos(lt){let{i:dt,off:vt}=this.childCursor().findPos(lt,-1);for(;dt<this.children.length-1;){let Tt=this.children[dt];if(vt<Tt.length||Tt instanceof LineView)break;dt++,vt=0}return this.children[dt].domAtPos(vt)}coordsAt(lt,dt){for(let vt=this.length,Tt=this.children.length-1;;Tt--){let Et=this.children[Tt],Ct=vt-Et.breakAfter-Et.length;if(lt>Ct||lt==Ct&&Et.type!=BlockType.WidgetBefore&&Et.type!=BlockType.WidgetAfter&&(!Tt||dt==2||this.children[Tt-1].breakAfter||this.children[Tt-1].type==BlockType.WidgetBefore&&dt>-2))return Et.coordsAt(lt-Ct,dt);vt=Ct}}measureVisibleLineHeights(lt){let dt=[],{from:vt,to:Tt}=lt,Et=this.view.contentDOM.clientWidth,Ct=Et>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,Rt=-1,kt=this.view.textDirection==Direction.LTR;for(let Dt=0,Bt=0;Bt<this.children.length;Bt++){let Ft=this.children[Bt],Ut=Dt+Ft.length;if(Ut>Tt)break;if(Dt>=vt){let Zt=Ft.dom.getBoundingClientRect();if(dt.push(Zt.height),Ct){let Kt=Ft.dom.lastChild,ln=Kt?clientRectsFor(Kt):[];if(ln.length){let hn=ln[ln.length-1],dn=kt?hn.right-Zt.left:Zt.right-hn.left;dn>Rt&&(Rt=dn,this.minWidth=Et,this.minWidthFrom=Dt,this.minWidthTo=Ut)}}}Dt=Ut+Ft.breakAfter}return dt}textDirectionAt(lt){let{i:dt}=this.childPos(lt,1);return getComputedStyle(this.children[dt].dom).direction=="rtl"?Direction.RTL:Direction.LTR}measureTextSize(){for(let Tt of this.children)if(Tt instanceof LineView){let Et=Tt.measureTextSize();if(Et)return Et}let lt=document.createElement("div"),dt,vt;return lt.className="cm-line",lt.style.width="99999px",lt.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(lt);let Tt=clientRectsFor(lt.firstChild)[0];dt=lt.getBoundingClientRect().height,vt=Tt?Tt.width/27:7,lt.remove()}),{lineHeight:dt,charWidth:vt}}childCursor(lt=this.length){let dt=this.children.length;return dt&&(lt-=this.children[--dt].length),new ChildCursor(this.children,lt,dt)}computeBlockGapDeco(){let lt=[],dt=this.view.viewState;for(let vt=0,Tt=0;;Tt++){let Et=Tt==dt.viewports.length?null:dt.viewports[Tt],Ct=Et?Et.from-1:this.length;if(Ct>vt){let Rt=dt.lineBlockAt(Ct).bottom-dt.lineBlockAt(vt).top;lt.push(Decoration.replace({widget:new BlockGapWidget(Rt),block:!0,inclusive:!0,isBlockGap:!0}).range(vt,Ct))}if(!Et)break;vt=Et.to+1}return Decoration.set(lt)}updateDeco(){let lt=this.view.state.facet(decorations).map((dt,vt)=>(this.dynamicDecorationMap[vt]=typeof dt=="function")?dt(this.view):dt);for(let dt=lt.length;dt<lt.length+3;dt++)this.dynamicDecorationMap[dt]=!1;return this.decorations=[...lt,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(lt){let{range:dt}=lt,vt=this.coordsAt(dt.head,dt.empty?dt.assoc:dt.head>dt.anchor?-1:1),Tt;if(!vt)return;!dt.empty&&(Tt=this.coordsAt(dt.anchor,dt.anchor>dt.head?-1:1))&&(vt={left:Math.min(vt.left,Tt.left),top:Math.min(vt.top,Tt.top),right:Math.max(vt.right,Tt.right),bottom:Math.max(vt.bottom,Tt.bottom)});let Et=0,Ct=0,Rt=0,kt=0;for(let Bt of this.view.state.facet(scrollMargins).map(Ft=>Ft(this.view)))if(Bt){let{left:Ft,right:Ut,top:Zt,bottom:Kt}=Bt;Ft!=null&&(Et=Math.max(Et,Ft)),Ut!=null&&(Ct=Math.max(Ct,Ut)),Zt!=null&&(Rt=Math.max(Rt,Zt)),Kt!=null&&(kt=Math.max(kt,Kt))}let Dt={left:vt.left-Et,top:vt.top-Rt,right:vt.right+Ct,bottom:vt.bottom+kt};scrollRectIntoView(this.view.scrollDOM,Dt,dt.head<dt.anchor?-1:1,lt.x,lt.y,lt.xMargin,lt.yMargin,this.view.textDirection==Direction.LTR)}}function betweenUneditable(ft){return ft.node.nodeType==1&&ft.node.firstChild&&(ft.offset==0||ft.node.childNodes[ft.offset-1].contentEditable=="false")&&(ft.offset==ft.node.childNodes.length||ft.node.childNodes[ft.offset].contentEditable=="false")}class BlockGapWidget extends WidgetType{constructor(lt){super(),this.height=lt}toDOM(){let lt=document.createElement("div");return this.updateDOM(lt),lt}eq(lt){return lt.height==this.height}updateDOM(lt){return lt.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function compositionSurroundingNode(ft){let lt=ft.observer.selectionRange,dt=lt.focusNode&&nearbyTextNode(lt.focusNode,lt.focusOffset,0);if(!dt)return null;let vt=ft.docView.nearest(dt);if(!vt)return null;if(vt instanceof LineView){let Tt=dt;for(;Tt.parentNode!=vt.dom;)Tt=Tt.parentNode;let Et=Tt.previousSibling;for(;Et&&!ContentView.get(Et);)Et=Et.previousSibling;let Ct=Et?ContentView.get(Et).posAtEnd:vt.posAtStart;return{from:Ct,to:Ct,node:Tt,text:dt}}else{for(;;){let{parent:Et}=vt;if(!Et)return null;if(Et instanceof LineView)break;vt=Et}let Tt=vt.posAtStart;return{from:Tt,to:Tt+vt.length,node:vt.dom,text:dt}}}function computeCompositionDeco(ft,lt){let dt=compositionSurroundingNode(ft);if(!dt)return Decoration.none;let{from:vt,to:Tt,node:Et,text:Ct}=dt,Rt=lt.mapPos(vt,1),kt=Math.max(Rt,lt.mapPos(Tt,-1)),{state:Dt}=ft,Bt=Et.nodeType==3?Et.nodeValue:new DOMReader([],Dt).readRange(Et.firstChild,null).text;if(kt-Rt<Bt.length)if(Dt.doc.sliceString(Rt,Math.min(Dt.doc.length,Rt+Bt.length),LineBreakPlaceholder)==Bt)kt=Rt+Bt.length;else if(Dt.doc.sliceString(Math.max(0,kt-Bt.length),kt,LineBreakPlaceholder)==Bt)Rt=kt-Bt.length;else return Decoration.none;else if(Dt.doc.sliceString(Rt,kt,LineBreakPlaceholder)!=Bt)return Decoration.none;let Ft=ContentView.get(Et);return Ft instanceof CompositionView?Ft=Ft.widget.topView:Ft&&(Ft.parent=null),Decoration.set(Decoration.replace({widget:new CompositionWidget(Et,Ct,Ft),inclusive:!0}).range(Rt,kt))}class CompositionWidget extends WidgetType{constructor(lt,dt,vt){super(),this.top=lt,this.text=dt,this.topView=vt}eq(lt){return this.top==lt.top&&this.text==lt.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return CompositionView}}function nearbyTextNode(ft,lt,dt){for(;;){if(ft.nodeType==3)return ft;if(ft.nodeType==1&&lt>0&&dt<=0)ft=ft.childNodes[lt-1],lt=maxOffset(ft);else if(ft.nodeType==1&&lt<ft.childNodes.length&&dt>=0)ft=ft.childNodes[lt],lt=0;else return null}}function nextToUneditable(ft,lt){return ft.nodeType!=1?0:(lt&&ft.childNodes[lt-1].contentEditable=="false"?1:0)|(lt<ft.childNodes.length&&ft.childNodes[lt].contentEditable=="false"?2:0)}class DecorationComparator$1{constructor(){this.changes=[]}compareRange(lt,dt){addRange(lt,dt,this.changes)}comparePoint(lt,dt){addRange(lt,dt,this.changes)}}function findChangedDeco(ft,lt,dt){let vt=new DecorationComparator$1;return RangeSet.compare(ft,lt,dt,vt),vt.changes}function inUneditable(ft,lt){for(let dt=ft;dt&&dt!=lt;dt=dt.assignedSlot||dt.parentNode)if(dt.nodeType==1&&dt.contentEditable=="false")return!0;return!1}function groupAt(ft,lt,dt=1){let vt=ft.charCategorizer(lt),Tt=ft.doc.lineAt(lt),Et=lt-Tt.from;if(Tt.length==0)return EditorSelection.cursor(lt);Et==0?dt=1:Et==Tt.length&&(dt=-1);let Ct=Et,Rt=Et;dt<0?Ct=findClusterBreak(Tt.text,Et,!1):Rt=findClusterBreak(Tt.text,Et);let kt=vt(Tt.text.slice(Ct,Rt));for(;Ct>0;){let Dt=findClusterBreak(Tt.text,Ct,!1);if(vt(Tt.text.slice(Dt,Ct))!=kt)break;Ct=Dt}for(;Rt<Tt.length;){let Dt=findClusterBreak(Tt.text,Rt);if(vt(Tt.text.slice(Rt,Dt))!=kt)break;Rt=Dt}return EditorSelection.range(Ct+Tt.from,Rt+Tt.from)}function getdx(ft,lt){return lt.left>ft?lt.left-ft:Math.max(0,ft-lt.right)}function getdy(ft,lt){return lt.top>ft?lt.top-ft:Math.max(0,ft-lt.bottom)}function yOverlap(ft,lt){return ft.top<lt.bottom-1&&ft.bottom>lt.top+1}function upTop(ft,lt){return lt<ft.top?{top:lt,left:ft.left,right:ft.right,bottom:ft.bottom}:ft}function upBot(ft,lt){return lt>ft.bottom?{top:ft.top,left:ft.left,right:ft.right,bottom:lt}:ft}function domPosAtCoords(ft,lt,dt){let vt,Tt,Et,Ct,Rt=!1,kt,Dt,Bt,Ft;for(let Kt=ft.firstChild;Kt;Kt=Kt.nextSibling){let ln=clientRectsFor(Kt);for(let hn=0;hn<ln.length;hn++){let dn=ln[hn];Tt&&yOverlap(Tt,dn)&&(dn=upTop(upBot(dn,Tt.bottom),Tt.top));let pn=getdx(lt,dn),mn=getdy(dt,dn);if(pn==0&&mn==0)return Kt.nodeType==3?domPosInText(Kt,lt,dt):domPosAtCoords(Kt,lt,dt);if(!vt||Ct>mn||Ct==mn&&Et>pn){vt=Kt,Tt=dn,Et=pn,Ct=mn;let On=mn?dt<dn.top?-1:1:pn?lt<dn.left?-1:1:0;Rt=!On||(On>0?hn<ln.length-1:hn>0)}pn==0?dt>dn.bottom&&(!Bt||Bt.bottom<dn.bottom)?(kt=Kt,Bt=dn):dt<dn.top&&(!Ft||Ft.top>dn.top)&&(Dt=Kt,Ft=dn):Bt&&yOverlap(Bt,dn)?Bt=upBot(Bt,dn.bottom):Ft&&yOverlap(Ft,dn)&&(Ft=upTop(Ft,dn.top))}}if(Bt&&Bt.bottom>=dt?(vt=kt,Tt=Bt):Ft&&Ft.top<=dt&&(vt=Dt,Tt=Ft),!vt)return{node:ft,offset:0};let Ut=Math.max(Tt.left,Math.min(Tt.right,lt));if(vt.nodeType==3)return domPosInText(vt,Ut,dt);if(Rt&&vt.contentEditable!="false")return domPosAtCoords(vt,Ut,dt);let Zt=Array.prototype.indexOf.call(ft.childNodes,vt)+(lt>=(Tt.left+Tt.right)/2?1:0);return{node:ft,offset:Zt}}function domPosInText(ft,lt,dt){let vt=ft.nodeValue.length,Tt=-1,Et=1e9,Ct=0;for(let Rt=0;Rt<vt;Rt++){let kt=textRange(ft,Rt,Rt+1).getClientRects();for(let Dt=0;Dt<kt.length;Dt++){let Bt=kt[Dt];if(Bt.top==Bt.bottom)continue;Ct||(Ct=lt-Bt.left);let Ft=(Bt.top>dt?Bt.top-dt:dt-Bt.bottom)-1;if(Bt.left-1<=lt&&Bt.right+1>=lt&&Ft<Et){let Ut=lt>=(Bt.left+Bt.right)/2,Zt=Ut;if((browser.chrome||browser.gecko)&&textRange(ft,Rt).getBoundingClientRect().left==Bt.right&&(Zt=!Ut),Ft<=0)return{node:ft,offset:Rt+(Zt?1:0)};Tt=Rt+(Zt?1:0),Et=Ft}}}return{node:ft,offset:Tt>-1?Tt:Ct>0?ft.nodeValue.length:0}}function posAtCoords(ft,lt,dt,vt=-1){var Tt;let Et=ft.contentDOM.getBoundingClientRect(),Ct=Et.top+ft.viewState.paddingTop,Rt,{docHeight:kt}=ft.viewState,{x:Dt,y:Bt}=lt,Ft=Bt-Ct;if(Ft<0)return 0;if(Ft>kt)return ft.state.doc.length;for(let mn=ft.defaultLineHeight/2,On=!1;Rt=ft.elementAtHeight(Ft),Rt.type!=BlockType.Text;)for(;Ft=vt>0?Rt.bottom+mn:Rt.top-mn,!(Ft>=0&&Ft<=kt);){if(On)return dt?null:0;On=!0,vt=-vt}Bt=Ct+Ft;let Ut=Rt.from;if(Ut<ft.viewport.from)return ft.viewport.from==0?0:dt?null:posAtCoordsImprecise(ft,Et,Rt,Dt,Bt);if(Ut>ft.viewport.to)return ft.viewport.to==ft.state.doc.length?ft.state.doc.length:dt?null:posAtCoordsImprecise(ft,Et,Rt,Dt,Bt);let Zt=ft.dom.ownerDocument,Kt=ft.root.elementFromPoint?ft.root:Zt,ln=Kt.elementFromPoint(Dt,Bt);ln&&!ft.contentDOM.contains(ln)&&(ln=null),ln||(Dt=Math.max(Et.left+1,Math.min(Et.right-1,Dt)),ln=Kt.elementFromPoint(Dt,Bt),ln&&!ft.contentDOM.contains(ln)&&(ln=null));let hn,dn=-1;if(ln&&((Tt=ft.docView.nearest(ln))===null||Tt===void 0?void 0:Tt.isEditable)!=!1){if(Zt.caretPositionFromPoint){let mn=Zt.caretPositionFromPoint(Dt,Bt);mn&&({offsetNode:hn,offset:dn}=mn)}else if(Zt.caretRangeFromPoint){let mn=Zt.caretRangeFromPoint(Dt,Bt);mn&&({startContainer:hn,startOffset:dn}=mn,(!ft.contentDOM.contains(hn)||browser.safari&&isSuspiciousSafariCaretResult(hn,dn,Dt)||browser.chrome&&isSuspiciousChromeCaretResult(hn,dn,Dt))&&(hn=void 0))}}if(!hn||!ft.docView.dom.contains(hn)){let mn=LineView.find(ft.docView,Ut);if(!mn)return Ft>Rt.top+Rt.height/2?Rt.to:Rt.from;({node:hn,offset:dn}=domPosAtCoords(mn.dom,Dt,Bt))}let pn=ft.docView.nearest(hn);if(!pn)return null;if(pn.isWidget){let mn=pn.dom.getBoundingClientRect();return lt.y<mn.top||lt.y<=mn.bottom&&lt.x<=(mn.left+mn.right)/2?pn.posAtStart:pn.posAtEnd}else return pn.localPosFromDOM(hn,dn)+pn.posAtStart}function posAtCoordsImprecise(ft,lt,dt,vt,Tt){let Et=Math.round((vt-lt.left)*ft.defaultCharacterWidth);if(ft.lineWrapping&&dt.height>ft.defaultLineHeight*1.5){let Rt=Math.floor((Tt-dt.top)/ft.defaultLineHeight);Et+=Rt*ft.viewState.heightOracle.lineLength}let Ct=ft.state.sliceDoc(dt.from,dt.to);return dt.from+findColumn(Ct,Et,ft.state.tabSize)}function isSuspiciousSafariCaretResult(ft,lt,dt){let vt;if(ft.nodeType!=3||lt!=(vt=ft.nodeValue.length))return!1;for(let Tt=ft.nextSibling;Tt;Tt=Tt.nextSibling)if(Tt.nodeType!=1||Tt.nodeName!="BR")return!1;return textRange(ft,vt-1,vt).getBoundingClientRect().left>dt}function isSuspiciousChromeCaretResult(ft,lt,dt){if(lt!=0)return!1;for(let Tt=ft;;){let Et=Tt.parentNode;if(!Et||Et.nodeType!=1||Et.firstChild!=Tt)return!1;if(Et.classList.contains("cm-line"))break;Tt=Et}let vt=ft.nodeType==1?ft.getBoundingClientRect():textRange(ft,0,Math.max(ft.nodeValue.length,1)).getBoundingClientRect();return dt-vt.left>5}function moveToLineBoundary(ft,lt,dt,vt){let Tt=ft.state.doc.lineAt(lt.head),Et=!vt||!ft.lineWrapping?null:ft.coordsAtPos(lt.assoc<0&&lt.head>Tt.from?lt.head-1:lt.head);if(Et){let kt=ft.dom.getBoundingClientRect(),Dt=ft.textDirectionAt(Tt.from),Bt=ft.posAtCoords({x:dt==(Dt==Direction.LTR)?kt.right-1:kt.left+1,y:(Et.top+Et.bottom)/2});if(Bt!=null)return EditorSelection.cursor(Bt,dt?-1:1)}let Ct=LineView.find(ft.docView,lt.head),Rt=Ct?dt?Ct.posAtEnd:Ct.posAtStart:dt?Tt.to:Tt.from;return EditorSelection.cursor(Rt,dt?-1:1)}function moveByChar(ft,lt,dt,vt){let Tt=ft.state.doc.lineAt(lt.head),Et=ft.bidiSpans(Tt),Ct=ft.textDirectionAt(Tt.from);for(let Rt=lt,kt=null;;){let Dt=moveVisually(Tt,Et,Ct,Rt,dt),Bt=movedOver;if(!Dt){if(Tt.number==(dt?ft.state.doc.lines:1))return Rt;Bt=`
`,Tt=ft.state.doc.line(Tt.number+(dt?1:-1)),Et=ft.bidiSpans(Tt),Dt=EditorSelection.cursor(dt?Tt.from:Tt.to)}if(kt){if(!kt(Bt))return Rt}else{if(!vt)return Dt;kt=vt(Bt)}Rt=Dt}}function byGroup(ft,lt,dt){let vt=ft.state.charCategorizer(lt),Tt=vt(dt);return Et=>{let Ct=vt(Et);return Tt==CharCategory.Space&&(Tt=Ct),Tt==Ct}}function moveVertically(ft,lt,dt,vt){let Tt=lt.head,Et=dt?1:-1;if(Tt==(dt?ft.state.doc.length:0))return EditorSelection.cursor(Tt,lt.assoc);let Ct=lt.goalColumn,Rt,kt=ft.contentDOM.getBoundingClientRect(),Dt=ft.coordsAtPos(Tt),Bt=ft.documentTop;if(Dt)Ct==null&&(Ct=Dt.left-kt.left),Rt=Et<0?Dt.top:Dt.bottom;else{let Zt=ft.viewState.lineBlockAt(Tt);Ct==null&&(Ct=Math.min(kt.right-kt.left,ft.defaultCharacterWidth*(Tt-Zt.from))),Rt=(Et<0?Zt.top:Zt.bottom)+Bt}let Ft=kt.left+Ct,Ut=vt??ft.defaultLineHeight>>1;for(let Zt=0;;Zt+=10){let Kt=Rt+(Ut+Zt)*Et,ln=posAtCoords(ft,{x:Ft,y:Kt},!1,Et);if(Kt<kt.top||Kt>kt.bottom||(Et<0?ln<Tt:ln>Tt))return EditorSelection.cursor(ln,lt.assoc,void 0,Ct)}}function skipAtoms(ft,lt,dt){let vt=ft.state.facet(atomicRanges).map(Tt=>Tt(ft));for(;;){let Tt=!1;for(let Et of vt)Et.between(dt.from-1,dt.from+1,(Ct,Rt,kt)=>{dt.from>Ct&&dt.from<Rt&&(dt=lt.head>dt.from?EditorSelection.cursor(Ct,1):EditorSelection.cursor(Rt,-1),Tt=!0)});if(!Tt)return dt}}class InputState{constructor(lt){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.mouseSelection=null;let dt=(vt,Tt)=>{this.ignoreDuringComposition(Tt)||Tt.type=="keydown"&&this.keydown(lt,Tt)||(this.mustFlushObserver(Tt)&&lt.observer.forceFlush(),this.runCustomHandlers(Tt.type,lt,Tt)?Tt.preventDefault():vt(lt,Tt))};for(let vt in handlers){let Tt=handlers[vt];lt.contentDOM.addEventListener(vt,Et=>{eventBelongsToEditor(lt,Et)&&dt(Tt,Et)},handlerOptions[vt]),this.registeredEvents.push(vt)}lt.scrollDOM.addEventListener("mousedown",vt=>{vt.target==lt.scrollDOM&&vt.clientY>lt.contentDOM.getBoundingClientRect().bottom&&dt(handlers.mousedown,vt)}),browser.chrome&&browser.chrome_version==102&&lt.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?lt.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,lt.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=lt.hasFocus,browser.safari&&lt.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(lt){this.lastSelectionOrigin=lt,this.lastSelectionTime=Date.now()}ensureHandlers(lt,dt){var vt;let Tt;this.customHandlers=[];for(let Et of dt)if(Tt=(vt=Et.update(lt).spec)===null||vt===void 0?void 0:vt.domEventHandlers){this.customHandlers.push({plugin:Et.value,handlers:Tt});for(let Ct in Tt)this.registeredEvents.indexOf(Ct)<0&&Ct!="scroll"&&(this.registeredEvents.push(Ct),lt.contentDOM.addEventListener(Ct,Rt=>{eventBelongsToEditor(lt,Rt)&&this.runCustomHandlers(Ct,lt,Rt)&&Rt.preventDefault()}))}}runCustomHandlers(lt,dt,vt){for(let Tt of this.customHandlers){let Et=Tt.handlers[lt];if(Et)try{if(Et.call(Tt.plugin,vt,dt)||vt.defaultPrevented)return!0}catch(Ct){logException(dt.state,Ct)}}return!1}runScrollHandlers(lt,dt){this.lastScrollTop=lt.scrollDOM.scrollTop,this.lastScrollLeft=lt.scrollDOM.scrollLeft;for(let vt of this.customHandlers){let Tt=vt.handlers.scroll;if(Tt)try{Tt.call(vt.plugin,dt,lt)}catch(Et){logException(lt.state,Et)}}}keydown(lt,dt){if(this.lastKeyCode=dt.keyCode,this.lastKeyTime=Date.now(),dt.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(browser.android&&browser.chrome&&!dt.synthetic&&(dt.keyCode==13||dt.keyCode==8))return lt.observer.delayAndroidKey(dt.key,dt.keyCode),!0;let vt;return browser.ios&&!dt.synthetic&&!dt.altKey&&!dt.metaKey&&((vt=PendingKeys.find(Tt=>Tt.keyCode==dt.keyCode))&&!dt.ctrlKey||EmacsyPendingKeys.indexOf(dt.key)>-1&&dt.ctrlKey&&!dt.shiftKey)?(this.pendingIOSKey=vt||dt,setTimeout(()=>this.flushIOSKey(lt),250),!0):!1}flushIOSKey(lt){let dt=this.pendingIOSKey;return dt?(this.pendingIOSKey=void 0,dispatchKey(lt.contentDOM,dt.key,dt.keyCode)):!1}ignoreDuringComposition(lt){return/^key/.test(lt.type)?this.composing>0?!0:browser.safari&&!browser.ios&&Date.now()-this.compositionEndedAt<100?(this.compositionEndedAt=0,!0):!1:!1}mustFlushObserver(lt){return lt.type=="keydown"&&lt.keyCode!=229}startMouseSelection(lt){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=lt}update(lt){this.mouseSelection&&this.mouseSelection.update(lt),lt.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const PendingKeys=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],EmacsyPendingKeys="dthko",modifierCodes=[16,17,18,20,91,92,224,225];function dragScrollSpeed(ft){return ft*.7+8}class MouseSelection{constructor(lt,dt,vt,Tt){this.view=lt,this.style=vt,this.mustSelect=Tt,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=dt,this.scrollParent=scrollableParent(lt.contentDOM);let Et=lt.contentDOM.ownerDocument;Et.addEventListener("mousemove",this.move=this.move.bind(this)),Et.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=dt.shiftKey,this.multiple=lt.state.facet(EditorState.allowMultipleSelections)&&addsSelectionRange(lt,dt),this.dragMove=dragMovesSelection(lt,dt),this.dragging=isInPrimarySelection(lt,dt)&&getClickType(dt)==1?null:!1}start(lt){this.dragging===!1&&(lt.preventDefault(),this.select(lt))}move(lt){var dt;if(lt.buttons==0)return this.destroy();if(this.dragging!==!1)return;this.select(this.lastEvent=lt);let vt=0,Tt=0,Et=((dt=this.scrollParent)===null||dt===void 0?void 0:dt.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight};lt.clientX<=Et.left?vt=-dragScrollSpeed(Et.left-lt.clientX):lt.clientX>=Et.right&&(vt=dragScrollSpeed(lt.clientX-Et.right)),lt.clientY<=Et.top?Tt=-dragScrollSpeed(Et.top-lt.clientY):lt.clientY>=Et.bottom&&(Tt=dragScrollSpeed(lt.clientY-Et.bottom)),this.setScrollSpeed(vt,Tt)}up(lt){this.dragging==null&&this.select(this.lastEvent),this.dragging||lt.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let lt=this.view.contentDOM.ownerDocument;lt.removeEventListener("mousemove",this.move),lt.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(lt,dt){this.scrollSpeed={x:lt,y:dt},lt||dt?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}select(lt){let dt=this.style.get(lt,this.extend,this.multiple);(this.mustSelect||!dt.eq(this.view.state.selection)||dt.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:dt,userEvent:"select.pointer"}),this.mustSelect=!1}update(lt){lt.docChanged&&this.dragging&&(this.dragging=this.dragging.map(lt.changes)),this.style.update(lt)&&setTimeout(()=>this.select(this.lastEvent),20)}}function addsSelectionRange(ft,lt){let dt=ft.state.facet(clickAddsSelectionRange);return dt.length?dt[0](lt):browser.mac?lt.metaKey:lt.ctrlKey}function dragMovesSelection(ft,lt){let dt=ft.state.facet(dragMovesSelection$1);return dt.length?dt[0](lt):browser.mac?!lt.altKey:!lt.ctrlKey}function isInPrimarySelection(ft,lt){let{main:dt}=ft.state.selection;if(dt.empty)return!1;let vt=getSelection(ft.root);if(!vt||vt.rangeCount==0)return!0;let Tt=vt.getRangeAt(0).getClientRects();for(let Et=0;Et<Tt.length;Et++){let Ct=Tt[Et];if(Ct.left<=lt.clientX&&Ct.right>=lt.clientX&&Ct.top<=lt.clientY&&Ct.bottom>=lt.clientY)return!0}return!1}function eventBelongsToEditor(ft,lt){if(!lt.bubbles)return!0;if(lt.defaultPrevented)return!1;for(let dt=lt.target,vt;dt!=ft.contentDOM;dt=dt.parentNode)if(!dt||dt.nodeType==11||(vt=ContentView.get(dt))&&vt.ignoreEvent(lt))return!1;return!0}const handlers=Object.create(null),handlerOptions=Object.create(null),brokenClipboardAPI=browser.ie&&browser.ie_version<15||browser.ios&&browser.webkit_version<604;function capturePaste(ft){let lt=ft.dom.parentNode;if(!lt)return;let dt=lt.appendChild(document.createElement("textarea"));dt.style.cssText="position: fixed; left: -10000px; top: 10px",dt.focus(),setTimeout(()=>{ft.focus(),dt.remove(),doPaste(ft,dt.value)},50)}function doPaste(ft,lt){let{state:dt}=ft,vt,Tt=1,Et=dt.toText(lt),Ct=Et.lines==dt.selection.ranges.length;if(lastLinewiseCopy!=null&&dt.selection.ranges.every(kt=>kt.empty)&&lastLinewiseCopy==Et.toString()){let kt=-1;vt=dt.changeByRange(Dt=>{let Bt=dt.doc.lineAt(Dt.from);if(Bt.from==kt)return{range:Dt};kt=Bt.from;let Ft=dt.toText((Ct?Et.line(Tt++).text:lt)+dt.lineBreak);return{changes:{from:Bt.from,insert:Ft},range:EditorSelection.cursor(Dt.from+Ft.length)}})}else Ct?vt=dt.changeByRange(kt=>{let Dt=Et.line(Tt++);return{changes:{from:kt.from,to:kt.to,insert:Dt.text},range:EditorSelection.cursor(kt.from+Dt.length)}}):vt=dt.replaceSelection(Et);ft.dispatch(vt,{userEvent:"input.paste",scrollIntoView:!0})}handlers.keydown=(ft,lt)=>{ft.inputState.setSelectionOrigin("select"),lt.keyCode==27?ft.inputState.lastEscPress=Date.now():modifierCodes.indexOf(lt.keyCode)<0&&(ft.inputState.lastEscPress=0)};handlers.touchstart=(ft,lt)=>{ft.inputState.lastTouchTime=Date.now(),ft.inputState.setSelectionOrigin("select.pointer")};handlers.touchmove=ft=>{ft.inputState.setSelectionOrigin("select.pointer")};handlerOptions.touchstart=handlerOptions.touchmove={passive:!0};handlers.mousedown=(ft,lt)=>{if(ft.observer.flush(),ft.inputState.lastTouchTime>Date.now()-2e3)return;let dt=null;for(let vt of ft.state.facet(mouseSelectionStyle))if(dt=vt(ft,lt),dt)break;if(!dt&&lt.button==0&&(dt=basicMouseSelection(ft,lt)),dt){let vt=ft.root.activeElement!=ft.contentDOM;ft.inputState.startMouseSelection(new MouseSelection(ft,lt,dt,vt)),vt&&ft.observer.ignore(()=>focusPreventScroll(ft.contentDOM)),ft.inputState.mouseSelection&&ft.inputState.mouseSelection.start(lt)}};function rangeForClick(ft,lt,dt,vt){if(vt==1)return EditorSelection.cursor(lt,dt);if(vt==2)return groupAt(ft.state,lt,dt);{let Tt=LineView.find(ft.docView,lt),Et=ft.state.doc.lineAt(Tt?Tt.posAtEnd:lt),Ct=Tt?Tt.posAtStart:Et.from,Rt=Tt?Tt.posAtEnd:Et.to;return Rt<ft.state.doc.length&&Rt==Et.to&&Rt++,EditorSelection.range(Ct,Rt)}}let insideY=(ft,lt)=>ft>=lt.top&&ft<=lt.bottom,inside=(ft,lt,dt)=>insideY(lt,dt)&&ft>=dt.left&&ft<=dt.right;function findPositionSide(ft,lt,dt,vt){let Tt=LineView.find(ft.docView,lt);if(!Tt)return 1;let Et=lt-Tt.posAtStart;if(Et==0)return 1;if(Et==Tt.length)return-1;let Ct=Tt.coordsAt(Et,-1);if(Ct&&inside(dt,vt,Ct))return-1;let Rt=Tt.coordsAt(Et,1);return Rt&&inside(dt,vt,Rt)?1:Ct&&insideY(vt,Ct)?-1:1}function queryPos(ft,lt){let dt=ft.posAtCoords({x:lt.clientX,y:lt.clientY},!1);return{pos:dt,bias:findPositionSide(ft,dt,lt.clientX,lt.clientY)}}const BadMouseDetail=browser.ie&&browser.ie_version<=11;let lastMouseDown=null,lastMouseDownCount=0,lastMouseDownTime=0;function getClickType(ft){if(!BadMouseDetail)return ft.detail;let lt=lastMouseDown,dt=lastMouseDownTime;return lastMouseDown=ft,lastMouseDownTime=Date.now(),lastMouseDownCount=!lt||dt>Date.now()-400&&Math.abs(lt.clientX-ft.clientX)<2&&Math.abs(lt.clientY-ft.clientY)<2?(lastMouseDownCount+1)%3:1}function basicMouseSelection(ft,lt){let dt=queryPos(ft,lt),vt=getClickType(lt),Tt=ft.state.selection;return{update(Et){Et.docChanged&&(dt.pos=Et.changes.mapPos(dt.pos),Tt=Tt.map(Et.changes))},get(Et,Ct,Rt){let kt=queryPos(ft,Et),Dt=rangeForClick(ft,kt.pos,kt.bias,vt);if(dt.pos!=kt.pos&&!Ct){let Bt=rangeForClick(ft,dt.pos,dt.bias,vt),Ft=Math.min(Bt.from,Dt.from),Ut=Math.max(Bt.to,Dt.to);Dt=Ft<Dt.from?EditorSelection.range(Ft,Ut):EditorSelection.range(Ut,Ft)}return Ct?Tt.replaceRange(Tt.main.extend(Dt.from,Dt.to)):Rt&&Tt.ranges.length>1&&Tt.ranges.some(Bt=>Bt.eq(Dt))?removeRange(Tt,Dt):Rt?Tt.addRange(Dt):EditorSelection.create([Dt])}}}function removeRange(ft,lt){for(let dt=0;;dt++)if(ft.ranges[dt].eq(lt))return EditorSelection.create(ft.ranges.slice(0,dt).concat(ft.ranges.slice(dt+1)),ft.mainIndex==dt?0:ft.mainIndex-(ft.mainIndex>dt?1:0))}handlers.dragstart=(ft,lt)=>{let{selection:{main:dt}}=ft.state,{mouseSelection:vt}=ft.inputState;vt&&(vt.dragging=dt),lt.dataTransfer&&(lt.dataTransfer.setData("Text",ft.state.sliceDoc(dt.from,dt.to)),lt.dataTransfer.effectAllowed="copyMove")};function dropText(ft,lt,dt,vt){if(!dt)return;let Tt=ft.posAtCoords({x:lt.clientX,y:lt.clientY},!1);lt.preventDefault();let{mouseSelection:Et}=ft.inputState,Ct=vt&&Et&&Et.dragging&&Et.dragMove?{from:Et.dragging.from,to:Et.dragging.to}:null,Rt={from:Tt,insert:dt},kt=ft.state.changes(Ct?[Ct,Rt]:Rt);ft.focus(),ft.dispatch({changes:kt,selection:{anchor:kt.mapPos(Tt,-1),head:kt.mapPos(Tt,1)},userEvent:Ct?"move.drop":"input.drop"})}handlers.drop=(ft,lt)=>{if(!lt.dataTransfer)return;if(ft.state.readOnly)return lt.preventDefault();let dt=lt.dataTransfer.files;if(dt&&dt.length){lt.preventDefault();let vt=Array(dt.length),Tt=0,Et=()=>{++Tt==dt.length&&dropText(ft,lt,vt.filter(Ct=>Ct!=null).join(ft.state.lineBreak),!1)};for(let Ct=0;Ct<dt.length;Ct++){let Rt=new FileReader;Rt.onerror=Et,Rt.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(Rt.result)||(vt[Ct]=Rt.result),Et()},Rt.readAsText(dt[Ct])}}else dropText(ft,lt,lt.dataTransfer.getData("Text"),!0)};handlers.paste=(ft,lt)=>{if(ft.state.readOnly)return lt.preventDefault();ft.observer.flush();let dt=brokenClipboardAPI?null:lt.clipboardData;dt?(doPaste(ft,dt.getData("text/plain")),lt.preventDefault()):capturePaste(ft)};function captureCopy(ft,lt){let dt=ft.dom.parentNode;if(!dt)return;let vt=dt.appendChild(document.createElement("textarea"));vt.style.cssText="position: fixed; left: -10000px; top: 10px",vt.value=lt,vt.focus(),vt.selectionEnd=lt.length,vt.selectionStart=0,setTimeout(()=>{vt.remove(),ft.focus()},50)}function copiedRange(ft){let lt=[],dt=[],vt=!1;for(let Tt of ft.selection.ranges)Tt.empty||(lt.push(ft.sliceDoc(Tt.from,Tt.to)),dt.push(Tt));if(!lt.length){let Tt=-1;for(let{from:Et}of ft.selection.ranges){let Ct=ft.doc.lineAt(Et);Ct.number>Tt&&(lt.push(Ct.text),dt.push({from:Ct.from,to:Math.min(ft.doc.length,Ct.to+1)})),Tt=Ct.number}vt=!0}return{text:lt.join(ft.lineBreak),ranges:dt,linewise:vt}}let lastLinewiseCopy=null;handlers.copy=handlers.cut=(ft,lt)=>{let{text:dt,ranges:vt,linewise:Tt}=copiedRange(ft.state);if(!dt&&!Tt)return;lastLinewiseCopy=Tt?dt:null;let Et=brokenClipboardAPI?null:lt.clipboardData;Et?(lt.preventDefault(),Et.clearData(),Et.setData("text/plain",dt)):captureCopy(ft,dt),lt.type=="cut"&&!ft.state.readOnly&&ft.dispatch({changes:vt,scrollIntoView:!0,userEvent:"delete.cut"})};const isFocusChange=Annotation.define();function focusChangeTransaction(ft,lt){let dt=[];for(let vt of ft.facet(focusChangeEffect)){let Tt=vt(ft,lt);Tt&&dt.push(Tt)}return dt?ft.update({effects:dt,annotations:isFocusChange.of(!0)}):null}function updateForFocusChange(ft){setTimeout(()=>{let lt=ft.hasFocus;if(lt!=ft.inputState.notifiedFocused){let dt=focusChangeTransaction(ft.state,lt);dt?ft.dispatch(dt):ft.update([])}},10)}handlers.focus=ft=>{ft.inputState.lastFocusTime=Date.now(),!ft.scrollDOM.scrollTop&&(ft.inputState.lastScrollTop||ft.inputState.lastScrollLeft)&&(ft.scrollDOM.scrollTop=ft.inputState.lastScrollTop,ft.scrollDOM.scrollLeft=ft.inputState.lastScrollLeft),updateForFocusChange(ft)};handlers.blur=ft=>{ft.observer.clearSelectionRange(),updateForFocusChange(ft)};handlers.compositionstart=handlers.compositionupdate=ft=>{ft.inputState.compositionFirstChange==null&&(ft.inputState.compositionFirstChange=!0),ft.inputState.composing<0&&(ft.inputState.composing=0)};handlers.compositionend=ft=>{ft.inputState.composing=-1,ft.inputState.compositionEndedAt=Date.now(),ft.inputState.compositionFirstChange=null,browser.chrome&&browser.android&&ft.observer.flushSoon(),setTimeout(()=>{ft.inputState.composing<0&&ft.docView.compositionDeco.size&&ft.update([])},50)};handlers.contextmenu=ft=>{ft.inputState.lastContextMenu=Date.now()};handlers.beforeinput=(ft,lt)=>{var dt;let vt;if(browser.chrome&&browser.android&&(vt=PendingKeys.find(Tt=>Tt.inputType==lt.inputType))&&(ft.observer.delayAndroidKey(vt.key,vt.keyCode),vt.key=="Backspace"||vt.key=="Delete")){let Tt=((dt=window.visualViewport)===null||dt===void 0?void 0:dt.height)||0;setTimeout(()=>{var Et;(((Et=window.visualViewport)===null||Et===void 0?void 0:Et.height)||0)>Tt+10&&ft.hasFocus&&(ft.contentDOM.blur(),ft.focus())},100)}};const wrappingWhiteSpace=["pre-wrap","normal","pre-line","break-spaces"];class HeightOracle{constructor(lt){this.lineWrapping=lt,this.doc=Text.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(lt,dt){let vt=this.doc.lineAt(dt).number-this.doc.lineAt(lt).number+1;return this.lineWrapping&&(vt+=Math.max(0,Math.ceil((dt-lt-vt*this.lineLength*.5)/this.lineLength))),this.lineHeight*vt}heightForLine(lt){return this.lineWrapping?(1+Math.max(0,Math.ceil((lt-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(lt){return this.doc=lt,this}mustRefreshForWrapping(lt){return wrappingWhiteSpace.indexOf(lt)>-1!=this.lineWrapping}mustRefreshForHeights(lt){let dt=!1;for(let vt=0;vt<lt.length;vt++){let Tt=lt[vt];Tt<0?vt++:this.heightSamples[Math.floor(Tt*10)]||(dt=!0,this.heightSamples[Math.floor(Tt*10)]=!0)}return dt}refresh(lt,dt,vt,Tt,Et){let Ct=wrappingWhiteSpace.indexOf(lt)>-1,Rt=Math.round(dt)!=Math.round(this.lineHeight)||this.lineWrapping!=Ct;if(this.lineWrapping=Ct,this.lineHeight=dt,this.charWidth=vt,this.lineLength=Tt,Rt){this.heightSamples={};for(let kt=0;kt<Et.length;kt++){let Dt=Et[kt];Dt<0?kt++:this.heightSamples[Math.floor(Dt*10)]=!0}}return Rt}}class MeasuredHeights{constructor(lt,dt){this.from=lt,this.heights=dt,this.index=0}get more(){return this.index<this.heights.length}}class BlockInfo{constructor(lt,dt,vt,Tt,Et){this.from=lt,this.length=dt,this.top=vt,this.height=Tt,this.type=Et}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(lt){let dt=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(lt.type)?lt.type:[lt]);return new BlockInfo(this.from,this.length+lt.length,this.top,this.height+lt.height,dt)}}var QueryType$1=function(ft){return ft[ft.ByPos=0]="ByPos",ft[ft.ByHeight=1]="ByHeight",ft[ft.ByPosNoHeight=2]="ByPosNoHeight",ft}(QueryType$1||(QueryType$1={}));const Epsilon=.001;class HeightMap{constructor(lt,dt,vt=2){this.length=lt,this.height=dt,this.flags=vt}get outdated(){return(this.flags&2)>0}set outdated(lt){this.flags=(lt?2:0)|this.flags&-3}setHeight(lt,dt){this.height!=dt&&(Math.abs(this.height-dt)>Epsilon&&(lt.heightChanged=!0),this.height=dt)}replace(lt,dt,vt){return HeightMap.of(vt)}decomposeLeft(lt,dt){dt.push(this)}decomposeRight(lt,dt){dt.push(this)}applyChanges(lt,dt,vt,Tt){let Et=this,Ct=vt.doc;for(let Rt=Tt.length-1;Rt>=0;Rt--){let{fromA:kt,toA:Dt,fromB:Bt,toB:Ft}=Tt[Rt],Ut=Et.lineAt(kt,QueryType$1.ByPosNoHeight,vt.setDoc(dt),0,0),Zt=Ut.to>=Dt?Ut:Et.lineAt(Dt,QueryType$1.ByPosNoHeight,vt,0,0);for(Ft+=Zt.to-Dt,Dt=Zt.to;Rt>0&&Ut.from<=Tt[Rt-1].toA;)kt=Tt[Rt-1].fromA,Bt=Tt[Rt-1].fromB,Rt--,kt<Ut.from&&(Ut=Et.lineAt(kt,QueryType$1.ByPosNoHeight,vt,0,0));Bt+=Ut.from-kt,kt=Ut.from;let Kt=NodeBuilder.build(vt.setDoc(Ct),lt,Bt,Ft);Et=Et.replace(kt,Dt,Kt)}return Et.updateHeight(vt,0)}static empty(){return new HeightMapText(0,0)}static of(lt){if(lt.length==1)return lt[0];let dt=0,vt=lt.length,Tt=0,Et=0;for(;;)if(dt==vt)if(Tt>Et*2){let Rt=lt[dt-1];Rt.break?lt.splice(--dt,1,Rt.left,null,Rt.right):lt.splice(--dt,1,Rt.left,Rt.right),vt+=1+Rt.break,Tt-=Rt.size}else if(Et>Tt*2){let Rt=lt[vt];Rt.break?lt.splice(vt,1,Rt.left,null,Rt.right):lt.splice(vt,1,Rt.left,Rt.right),vt+=2+Rt.break,Et-=Rt.size}else break;else if(Tt<Et){let Rt=lt[dt++];Rt&&(Tt+=Rt.size)}else{let Rt=lt[--vt];Rt&&(Et+=Rt.size)}let Ct=0;return lt[dt-1]==null?(Ct=1,dt--):lt[dt]==null&&(Ct=1,vt++),new HeightMapBranch(HeightMap.of(lt.slice(0,dt)),Ct,HeightMap.of(lt.slice(vt)))}}HeightMap.prototype.size=1;class HeightMapBlock extends HeightMap{constructor(lt,dt,vt){super(lt,dt),this.type=vt}blockAt(lt,dt,vt,Tt){return new BlockInfo(Tt,this.length,vt,this.height,this.type)}lineAt(lt,dt,vt,Tt,Et){return this.blockAt(0,vt,Tt,Et)}forEachLine(lt,dt,vt,Tt,Et,Ct){lt<=Et+this.length&&dt>=Et&&Ct(this.blockAt(0,vt,Tt,Et))}updateHeight(lt,dt=0,vt=!1,Tt){return Tt&&Tt.from<=dt&&Tt.more&&this.setHeight(lt,Tt.heights[Tt.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class HeightMapText extends HeightMapBlock{constructor(lt,dt){super(lt,dt,BlockType.Text),this.collapsed=0,this.widgetHeight=0}replace(lt,dt,vt){let Tt=vt[0];return vt.length==1&&(Tt instanceof HeightMapText||Tt instanceof HeightMapGap&&Tt.flags&4)&&Math.abs(this.length-Tt.length)<10?(Tt instanceof HeightMapGap?Tt=new HeightMapText(Tt.length,this.height):Tt.height=this.height,this.outdated||(Tt.outdated=!1),Tt):HeightMap.of(vt)}updateHeight(lt,dt=0,vt=!1,Tt){return Tt&&Tt.from<=dt&&Tt.more?this.setHeight(lt,Tt.heights[Tt.index++]):(vt||this.outdated)&&this.setHeight(lt,Math.max(this.widgetHeight,lt.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class HeightMapGap extends HeightMap{constructor(lt){super(lt,0)}heightMetrics(lt,dt){let vt=lt.doc.lineAt(dt).number,Tt=lt.doc.lineAt(dt+this.length).number,Et=Tt-vt+1,Ct,Rt=0;if(lt.lineWrapping){let kt=Math.min(this.height,lt.lineHeight*Et);Ct=kt/Et,Rt=(this.height-kt)/(this.length-Et-1)}else Ct=this.height/Et;return{firstLine:vt,lastLine:Tt,perLine:Ct,perChar:Rt}}blockAt(lt,dt,vt,Tt){let{firstLine:Et,lastLine:Ct,perLine:Rt,perChar:kt}=this.heightMetrics(dt,Tt);if(dt.lineWrapping){let Dt=Tt+Math.round(Math.max(0,Math.min(1,(lt-vt)/this.height))*this.length),Bt=dt.doc.lineAt(Dt),Ft=Rt+Bt.length*kt,Ut=Math.max(vt,lt-Ft/2);return new BlockInfo(Bt.from,Bt.length,Ut,Ft,BlockType.Text)}else{let Dt=Math.max(0,Math.min(Ct-Et,Math.floor((lt-vt)/Rt))),{from:Bt,length:Ft}=dt.doc.line(Et+Dt);return new BlockInfo(Bt,Ft,vt+Rt*Dt,Rt,BlockType.Text)}}lineAt(lt,dt,vt,Tt,Et){if(dt==QueryType$1.ByHeight)return this.blockAt(lt,vt,Tt,Et);if(dt==QueryType$1.ByPosNoHeight){let{from:Zt,to:Kt}=vt.doc.lineAt(lt);return new BlockInfo(Zt,Kt-Zt,0,0,BlockType.Text)}let{firstLine:Ct,perLine:Rt,perChar:kt}=this.heightMetrics(vt,Et),Dt=vt.doc.lineAt(lt),Bt=Rt+Dt.length*kt,Ft=Dt.number-Ct,Ut=Tt+Rt*Ft+kt*(Dt.from-Et-Ft);return new BlockInfo(Dt.from,Dt.length,Math.max(Tt,Math.min(Ut,Tt+this.height-Bt)),Bt,BlockType.Text)}forEachLine(lt,dt,vt,Tt,Et,Ct){lt=Math.max(lt,Et),dt=Math.min(dt,Et+this.length);let{firstLine:Rt,perLine:kt,perChar:Dt}=this.heightMetrics(vt,Et);for(let Bt=lt,Ft=Tt;Bt<=dt;){let Ut=vt.doc.lineAt(Bt);if(Bt==lt){let Kt=Ut.number-Rt;Ft+=kt*Kt+Dt*(lt-Et-Kt)}let Zt=kt+Dt*Ut.length;Ct(new BlockInfo(Ut.from,Ut.length,Ft,Zt,BlockType.Text)),Ft+=Zt,Bt=Ut.to+1}}replace(lt,dt,vt){let Tt=this.length-dt;if(Tt>0){let Et=vt[vt.length-1];Et instanceof HeightMapGap?vt[vt.length-1]=new HeightMapGap(Et.length+Tt):vt.push(null,new HeightMapGap(Tt-1))}if(lt>0){let Et=vt[0];Et instanceof HeightMapGap?vt[0]=new HeightMapGap(lt+Et.length):vt.unshift(new HeightMapGap(lt-1),null)}return HeightMap.of(vt)}decomposeLeft(lt,dt){dt.push(new HeightMapGap(lt-1),null)}decomposeRight(lt,dt){dt.push(null,new HeightMapGap(this.length-lt-1))}updateHeight(lt,dt=0,vt=!1,Tt){let Et=dt+this.length;if(Tt&&Tt.from<=dt+this.length&&Tt.more){let Ct=[],Rt=Math.max(dt,Tt.from),kt=-1;for(Tt.from>dt&&Ct.push(new HeightMapGap(Tt.from-dt-1).updateHeight(lt,dt));Rt<=Et&&Tt.more;){let Bt=lt.doc.lineAt(Rt).length;Ct.length&&Ct.push(null);let Ft=Tt.heights[Tt.index++];kt==-1?kt=Ft:Math.abs(Ft-kt)>=Epsilon&&(kt=-2);let Ut=new HeightMapText(Bt,Ft);Ut.outdated=!1,Ct.push(Ut),Rt+=Bt+1}Rt<=Et&&Ct.push(null,new HeightMapGap(Et-Rt).updateHeight(lt,Rt));let Dt=HeightMap.of(Ct);return(kt<0||Math.abs(Dt.height-this.height)>=Epsilon||Math.abs(kt-this.heightMetrics(lt,dt).perLine)>=Epsilon)&&(lt.heightChanged=!0),Dt}else(vt||this.outdated)&&(this.setHeight(lt,lt.heightForGap(dt,dt+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class HeightMapBranch extends HeightMap{constructor(lt,dt,vt){super(lt.length+dt+vt.length,lt.height+vt.height,dt|(lt.outdated||vt.outdated?2:0)),this.left=lt,this.right=vt,this.size=lt.size+vt.size}get break(){return this.flags&1}blockAt(lt,dt,vt,Tt){let Et=vt+this.left.height;return lt<Et?this.left.blockAt(lt,dt,vt,Tt):this.right.blockAt(lt,dt,Et,Tt+this.left.length+this.break)}lineAt(lt,dt,vt,Tt,Et){let Ct=Tt+this.left.height,Rt=Et+this.left.length+this.break,kt=dt==QueryType$1.ByHeight?lt<Ct:lt<Rt,Dt=kt?this.left.lineAt(lt,dt,vt,Tt,Et):this.right.lineAt(lt,dt,vt,Ct,Rt);if(this.break||(kt?Dt.to<Rt:Dt.from>Rt))return Dt;let Bt=dt==QueryType$1.ByPosNoHeight?QueryType$1.ByPosNoHeight:QueryType$1.ByPos;return kt?Dt.join(this.right.lineAt(Rt,Bt,vt,Ct,Rt)):this.left.lineAt(Rt,Bt,vt,Tt,Et).join(Dt)}forEachLine(lt,dt,vt,Tt,Et,Ct){let Rt=Tt+this.left.height,kt=Et+this.left.length+this.break;if(this.break)lt<kt&&this.left.forEachLine(lt,dt,vt,Tt,Et,Ct),dt>=kt&&this.right.forEachLine(lt,dt,vt,Rt,kt,Ct);else{let Dt=this.lineAt(kt,QueryType$1.ByPos,vt,Tt,Et);lt<Dt.from&&this.left.forEachLine(lt,Dt.from-1,vt,Tt,Et,Ct),Dt.to>=lt&&Dt.from<=dt&&Ct(Dt),dt>Dt.to&&this.right.forEachLine(Dt.to+1,dt,vt,Rt,kt,Ct)}}replace(lt,dt,vt){let Tt=this.left.length+this.break;if(dt<Tt)return this.balanced(this.left.replace(lt,dt,vt),this.right);if(lt>this.left.length)return this.balanced(this.left,this.right.replace(lt-Tt,dt-Tt,vt));let Et=[];lt>0&&this.decomposeLeft(lt,Et);let Ct=Et.length;for(let Rt of vt)Et.push(Rt);if(lt>0&&mergeGaps(Et,Ct-1),dt<this.length){let Rt=Et.length;this.decomposeRight(dt,Et),mergeGaps(Et,Rt)}return HeightMap.of(Et)}decomposeLeft(lt,dt){let vt=this.left.length;if(lt<=vt)return this.left.decomposeLeft(lt,dt);dt.push(this.left),this.break&&(vt++,lt>=vt&&dt.push(null)),lt>vt&&this.right.decomposeLeft(lt-vt,dt)}decomposeRight(lt,dt){let vt=this.left.length,Tt=vt+this.break;if(lt>=Tt)return this.right.decomposeRight(lt-Tt,dt);lt<vt&&this.left.decomposeRight(lt,dt),this.break&&lt<Tt&&dt.push(null),dt.push(this.right)}balanced(lt,dt){return lt.size>2*dt.size||dt.size>2*lt.size?HeightMap.of(this.break?[lt,null,dt]:[lt,dt]):(this.left=lt,this.right=dt,this.height=lt.height+dt.height,this.outdated=lt.outdated||dt.outdated,this.size=lt.size+dt.size,this.length=lt.length+this.break+dt.length,this)}updateHeight(lt,dt=0,vt=!1,Tt){let{left:Et,right:Ct}=this,Rt=dt+Et.length+this.break,kt=null;return Tt&&Tt.from<=dt+Et.length&&Tt.more?kt=Et=Et.updateHeight(lt,dt,vt,Tt):Et.updateHeight(lt,dt,vt),Tt&&Tt.from<=Rt+Ct.length&&Tt.more?kt=Ct=Ct.updateHeight(lt,Rt,vt,Tt):Ct.updateHeight(lt,Rt,vt),kt?this.balanced(Et,Ct):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function mergeGaps(ft,lt){let dt,vt;ft[lt]==null&&(dt=ft[lt-1])instanceof HeightMapGap&&(vt=ft[lt+1])instanceof HeightMapGap&&ft.splice(lt-1,3,new HeightMapGap(dt.length+1+vt.length))}const relevantWidgetHeight=5;class NodeBuilder{constructor(lt,dt){this.pos=lt,this.oracle=dt,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=lt}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(lt,dt){if(this.lineStart>-1){let vt=Math.min(dt,this.lineEnd),Tt=this.nodes[this.nodes.length-1];Tt instanceof HeightMapText?Tt.length+=vt-this.pos:(vt>this.pos||!this.isCovered)&&this.nodes.push(new HeightMapText(vt-this.pos,-1)),this.writtenTo=vt,dt>vt&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=dt}point(lt,dt,vt){if(lt<dt||vt.heightRelevant){let Tt=vt.widget?vt.widget.estimatedHeight:0;Tt<0&&(Tt=this.oracle.lineHeight);let Et=dt-lt;vt.block?this.addBlock(new HeightMapBlock(Et,Tt,vt.type)):(Et||Tt>=relevantWidgetHeight)&&this.addLineDeco(Tt,Et)}else dt>lt&&this.span(lt,dt);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:lt,to:dt}=this.oracle.doc.lineAt(this.pos);this.lineStart=lt,this.lineEnd=dt,this.writtenTo<lt&&((this.writtenTo<lt-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,lt-1)),this.nodes.push(null)),this.pos>lt&&this.nodes.push(new HeightMapText(this.pos-lt,-1)),this.writtenTo=this.pos}blankContent(lt,dt){let vt=new HeightMapGap(dt-lt);return this.oracle.doc.lineAt(lt).to==dt&&(vt.flags|=4),vt}ensureLine(){this.enterLine();let lt=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(lt instanceof HeightMapText)return lt;let dt=new HeightMapText(0,-1);return this.nodes.push(dt),dt}addBlock(lt){this.enterLine(),lt.type==BlockType.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(lt),this.writtenTo=this.pos=this.pos+lt.length,lt.type!=BlockType.WidgetBefore&&(this.covering=lt)}addLineDeco(lt,dt){let vt=this.ensureLine();vt.length+=dt,vt.collapsed+=dt,vt.widgetHeight=Math.max(vt.widgetHeight,lt),this.writtenTo=this.pos=this.pos+dt}finish(lt){let dt=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(dt instanceof HeightMapText)&&!this.isCovered?this.nodes.push(new HeightMapText(0,-1)):(this.writtenTo<this.pos||dt==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let vt=lt;for(let Tt of this.nodes)Tt instanceof HeightMapText&&Tt.updateHeight(this.oracle,vt),vt+=Tt?Tt.length:1;return this.nodes}static build(lt,dt,vt,Tt){let Et=new NodeBuilder(vt,lt);return RangeSet.spans(dt,vt,Tt,Et,0),Et.finish(vt)}}function heightRelevantDecoChanges(ft,lt,dt){let vt=new DecorationComparator;return RangeSet.compare(ft,lt,dt,vt,0),vt.changes}class DecorationComparator{constructor(){this.changes=[]}compareRange(){}comparePoint(lt,dt,vt,Tt){(lt<dt||vt&&vt.heightRelevant||Tt&&Tt.heightRelevant)&&addRange(lt,dt,this.changes,5)}}function visiblePixelRange(ft,lt){let dt=ft.getBoundingClientRect(),vt=ft.ownerDocument,Tt=vt.defaultView||window,Et=Math.max(0,dt.left),Ct=Math.min(Tt.innerWidth,dt.right),Rt=Math.max(0,dt.top),kt=Math.min(Tt.innerHeight,dt.bottom);for(let Dt=ft.parentNode;Dt&&Dt!=vt.body;)if(Dt.nodeType==1){let Bt=Dt,Ft=window.getComputedStyle(Bt);if((Bt.scrollHeight>Bt.clientHeight||Bt.scrollWidth>Bt.clientWidth)&&Ft.overflow!="visible"){let Ut=Bt.getBoundingClientRect();Et=Math.max(Et,Ut.left),Ct=Math.min(Ct,Ut.right),Rt=Math.max(Rt,Ut.top),kt=Dt==ft.parentNode?Ut.bottom:Math.min(kt,Ut.bottom)}Dt=Ft.position=="absolute"||Ft.position=="fixed"?Bt.offsetParent:Bt.parentNode}else if(Dt.nodeType==11)Dt=Dt.host;else break;return{left:Et-dt.left,right:Math.max(Et,Ct)-dt.left,top:Rt-(dt.top+lt),bottom:Math.max(Rt,kt)-(dt.top+lt)}}function fullPixelRange(ft,lt){let dt=ft.getBoundingClientRect();return{left:0,right:dt.right-dt.left,top:lt,bottom:dt.bottom-(dt.top+lt)}}class LineGap{constructor(lt,dt,vt){this.from=lt,this.to=dt,this.size=vt}static same(lt,dt){if(lt.length!=dt.length)return!1;for(let vt=0;vt<lt.length;vt++){let Tt=lt[vt],Et=dt[vt];if(Tt.from!=Et.from||Tt.to!=Et.to||Tt.size!=Et.size)return!1}return!0}draw(lt){return Decoration.replace({widget:new LineGapWidget(this.size,lt)}).range(this.from,this.to)}}class LineGapWidget extends WidgetType{constructor(lt,dt){super(),this.size=lt,this.vertical=dt}eq(lt){return lt.size==this.size&&lt.vertical==this.vertical}toDOM(){let lt=document.createElement("div");return this.vertical?lt.style.height=this.size+"px":(lt.style.width=this.size+"px",lt.style.height="2px",lt.style.display="inline-block"),lt}get estimatedHeight(){return this.vertical?this.size:-1}}class ViewState{constructor(lt){this.state=lt,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scaler=IdScaler,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Direction.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let dt=lt.facet(contentAttributes).some(vt=>typeof vt!="function"&&vt.class=="cm-lineWrapping");this.heightOracle=new HeightOracle(dt),this.stateDeco=lt.facet(decorations).filter(vt=>typeof vt!="function"),this.heightMap=HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle.setDoc(lt.doc),[new ChangedRange(0,0,0,lt.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Decoration.set(this.lineGaps.map(vt=>vt.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let lt=[this.viewport],{main:dt}=this.state.selection;for(let vt=0;vt<=1;vt++){let Tt=vt?dt.head:dt.anchor;if(!lt.some(({from:Et,to:Ct})=>Tt>=Et&&Tt<=Ct)){let{from:Et,to:Ct}=this.lineBlockAt(Tt);lt.push(new Viewport(Et,Ct))}}this.viewports=lt.sort((vt,Tt)=>vt.from-Tt.from),this.scaler=this.heightMap.height<=7e6?IdScaler:new BigScaler(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,lt=>{this.viewportLines.push(this.scaler.scale==1?lt:scaleBlock(lt,this.scaler))})}update(lt,dt=null){this.state=lt.state;let vt=this.stateDeco;this.stateDeco=this.state.facet(decorations).filter(Dt=>typeof Dt!="function");let Tt=lt.changedRanges,Et=ChangedRange.extendWithRanges(Tt,heightRelevantDecoChanges(vt,this.stateDeco,lt?lt.changes:ChangeSet.empty(this.state.doc.length))),Ct=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,lt.startState.doc,this.heightOracle.setDoc(this.state.doc),Et),this.heightMap.height!=Ct&&(lt.flags|=2);let Rt=Et.length?this.mapViewport(this.viewport,lt.changes):this.viewport;(dt&&(dt.range.head<Rt.from||dt.range.head>Rt.to)||!this.viewportIsAppropriate(Rt))&&(Rt=this.getViewport(0,dt));let kt=!lt.changes.empty||lt.flags&2||Rt.from!=this.viewport.from||Rt.to!=this.viewport.to;this.viewport=Rt,this.updateForViewport(),kt&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,lt.changes))),lt.flags|=this.computeVisibleRanges(),dt&&(this.scrollTarget=dt),!this.mustEnforceCursorAssoc&&lt.selectionSet&&lt.view.lineWrapping&&lt.state.selection.main.empty&&lt.state.selection.main.assoc&&!lt.state.facet(nativeSelectionHidden)&&(this.mustEnforceCursorAssoc=!0)}measure(lt){let dt=lt.contentDOM,vt=window.getComputedStyle(dt),Tt=this.heightOracle,Et=vt.whiteSpace;this.defaultTextDirection=vt.direction=="rtl"?Direction.RTL:Direction.LTR;let Ct=this.heightOracle.mustRefreshForWrapping(Et),Rt=dt.getBoundingClientRect(),kt=Ct||this.mustMeasureContent||this.contentDOMHeight!=Rt.height;this.contentDOMHeight=Rt.height,this.mustMeasureContent=!1;let Dt=0,Bt=0,Ft=parseInt(vt.paddingTop)||0,Ut=parseInt(vt.paddingBottom)||0;(this.paddingTop!=Ft||this.paddingBottom!=Ut)&&(this.paddingTop=Ft,this.paddingBottom=Ut,Dt|=10),this.editorWidth!=lt.scrollDOM.clientWidth&&(Tt.lineWrapping&&(kt=!0),this.editorWidth=lt.scrollDOM.clientWidth,Dt|=8);let Zt=(this.printing?fullPixelRange:visiblePixelRange)(dt,this.paddingTop),Kt=Zt.top-this.pixelViewport.top,ln=Zt.bottom-this.pixelViewport.bottom;this.pixelViewport=Zt;let hn=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(hn!=this.inView&&(this.inView=hn,hn&&(kt=!0)),!this.inView&&!this.scrollTarget)return 0;let dn=Rt.width;if((this.contentDOMWidth!=dn||this.editorHeight!=lt.scrollDOM.clientHeight)&&(this.contentDOMWidth=Rt.width,this.editorHeight=lt.scrollDOM.clientHeight,Dt|=8),kt){let mn=lt.docView.measureVisibleLineHeights(this.viewport);if(Tt.mustRefreshForHeights(mn)&&(Ct=!0),Ct||Tt.lineWrapping&&Math.abs(dn-this.contentDOMWidth)>Tt.charWidth){let{lineHeight:On,charWidth:bn}=lt.docView.measureTextSize();Ct=On>0&&Tt.refresh(Et,On,bn,dn/bn,mn),Ct&&(lt.docView.minWidth=0,Dt|=8)}Kt>0&&ln>0?Bt=Math.max(Kt,ln):Kt<0&&ln<0&&(Bt=Math.min(Kt,ln)),Tt.heightChanged=!1;for(let On of this.viewports){let bn=On.from==this.viewport.from?mn:lt.docView.measureVisibleLineHeights(On);this.heightMap=(Ct?HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle,[new ChangedRange(0,0,0,lt.state.doc.length)]):this.heightMap).updateHeight(Tt,0,Ct,new MeasuredHeights(On.from,bn))}Tt.heightChanged&&(Dt|=2)}let pn=!this.viewportIsAppropriate(this.viewport,Bt)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return pn&&(this.viewport=this.getViewport(Bt,this.scrollTarget)),this.updateForViewport(),(Dt&2||pn)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(Ct?[]:this.lineGaps,lt)),Dt|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,lt.docView.enforceCursorAssoc()),Dt}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(lt,dt){let vt=.5-Math.max(-.5,Math.min(.5,lt/1e3/2)),Tt=this.heightMap,Et=this.heightOracle,{visibleTop:Ct,visibleBottom:Rt}=this,kt=new Viewport(Tt.lineAt(Ct-vt*1e3,QueryType$1.ByHeight,Et,0,0).from,Tt.lineAt(Rt+(1-vt)*1e3,QueryType$1.ByHeight,Et,0,0).to);if(dt){let{head:Dt}=dt.range;if(Dt<kt.from||Dt>kt.to){let Bt=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),Ft=Tt.lineAt(Dt,QueryType$1.ByPos,Et,0,0),Ut;dt.y=="center"?Ut=(Ft.top+Ft.bottom)/2-Bt/2:dt.y=="start"||dt.y=="nearest"&&Dt<kt.from?Ut=Ft.top:Ut=Ft.bottom-Bt,kt=new Viewport(Tt.lineAt(Ut-1e3/2,QueryType$1.ByHeight,Et,0,0).from,Tt.lineAt(Ut+Bt+1e3/2,QueryType$1.ByHeight,Et,0,0).to)}}return kt}mapViewport(lt,dt){let vt=dt.mapPos(lt.from,-1),Tt=dt.mapPos(lt.to,1);return new Viewport(this.heightMap.lineAt(vt,QueryType$1.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(Tt,QueryType$1.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:lt,to:dt},vt=0){if(!this.inView)return!0;let{top:Tt}=this.heightMap.lineAt(lt,QueryType$1.ByPos,this.heightOracle,0,0),{bottom:Et}=this.heightMap.lineAt(dt,QueryType$1.ByPos,this.heightOracle,0,0),{visibleTop:Ct,visibleBottom:Rt}=this;return(lt==0||Tt<=Ct-Math.max(10,Math.min(-vt,250)))&&(dt==this.state.doc.length||Et>=Rt+Math.max(10,Math.min(vt,250)))&&Tt>Ct-2*1e3&&Et<Rt+2*1e3}mapLineGaps(lt,dt){if(!lt.length||dt.empty)return lt;let vt=[];for(let Tt of lt)dt.touchesRange(Tt.from,Tt.to)||vt.push(new LineGap(dt.mapPos(Tt.from),dt.mapPos(Tt.to),Tt.size));return vt}ensureLineGaps(lt,dt){let vt=this.heightOracle.lineWrapping,Tt=vt?1e4:2e3,Et=Tt>>1,Ct=Tt<<1;if(this.defaultTextDirection!=Direction.LTR&&!vt)return[];let Rt=[],kt=(Dt,Bt,Ft,Ut)=>{if(Bt-Dt<Et)return;let Zt=this.state.selection.main,Kt=[Zt.from];Zt.empty||Kt.push(Zt.to);for(let hn of Kt)if(hn>Dt&&hn<Bt){kt(Dt,hn-10,Ft,Ut),kt(hn+10,Bt,Ft,Ut);return}let ln=find(lt,hn=>hn.from>=Ft.from&&hn.to<=Ft.to&&Math.abs(hn.from-Dt)<Et&&Math.abs(hn.to-Bt)<Et&&!Kt.some(dn=>hn.from<dn&&hn.to>dn));if(!ln){if(Bt<Ft.to&&dt&&vt&&dt.visibleRanges.some(hn=>hn.from<=Bt&&hn.to>=Bt)){let hn=dt.moveToLineBoundary(EditorSelection.cursor(Bt),!1,!0).head;hn>Dt&&(Bt=hn)}ln=new LineGap(Dt,Bt,this.gapSize(Ft,Dt,Bt,Ut))}Rt.push(ln)};for(let Dt of this.viewportLines){if(Dt.length<Ct)continue;let Bt=lineStructure(Dt.from,Dt.to,this.stateDeco);if(Bt.total<Ct)continue;let Ft=this.scrollTarget?this.scrollTarget.range.head:null,Ut,Zt;if(vt){let Kt=Tt/this.heightOracle.lineLength*this.heightOracle.lineHeight,ln,hn;if(Ft!=null){let dn=findFraction(Bt,Ft),pn=((this.visibleBottom-this.visibleTop)/2+Kt)/Dt.height;ln=dn-pn,hn=dn+pn}else ln=(this.visibleTop-Dt.top-Kt)/Dt.height,hn=(this.visibleBottom-Dt.top+Kt)/Dt.height;Ut=findPosition(Bt,ln),Zt=findPosition(Bt,hn)}else{let Kt=Bt.total*this.heightOracle.charWidth,ln=Tt*this.heightOracle.charWidth,hn,dn;if(Ft!=null){let pn=findFraction(Bt,Ft),mn=((this.pixelViewport.right-this.pixelViewport.left)/2+ln)/Kt;hn=pn-mn,dn=pn+mn}else hn=(this.pixelViewport.left-ln)/Kt,dn=(this.pixelViewport.right+ln)/Kt;Ut=findPosition(Bt,hn),Zt=findPosition(Bt,dn)}Ut>Dt.from&&kt(Dt.from,Ut,Dt,Bt),Zt<Dt.to&&kt(Zt,Dt.to,Dt,Bt)}return Rt}gapSize(lt,dt,vt,Tt){let Et=findFraction(Tt,vt)-findFraction(Tt,dt);return this.heightOracle.lineWrapping?lt.height*Et:Tt.total*this.heightOracle.charWidth*Et}updateLineGaps(lt){LineGap.same(lt,this.lineGaps)||(this.lineGaps=lt,this.lineGapDeco=Decoration.set(lt.map(dt=>dt.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let lt=this.stateDeco;this.lineGaps.length&&(lt=lt.concat(this.lineGapDeco));let dt=[];RangeSet.spans(lt,this.viewport.from,this.viewport.to,{span(Tt,Et){dt.push({from:Tt,to:Et})},point(){}},20);let vt=dt.length!=this.visibleRanges.length||this.visibleRanges.some((Tt,Et)=>Tt.from!=dt[Et].from||Tt.to!=dt[Et].to);return this.visibleRanges=dt,vt?4:0}lineBlockAt(lt){return lt>=this.viewport.from&&lt<=this.viewport.to&&this.viewportLines.find(dt=>dt.from<=lt&&dt.to>=lt)||scaleBlock(this.heightMap.lineAt(lt,QueryType$1.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(lt){return scaleBlock(this.heightMap.lineAt(this.scaler.fromDOM(lt),QueryType$1.ByHeight,this.heightOracle,0,0),this.scaler)}elementAtHeight(lt){return scaleBlock(this.heightMap.blockAt(this.scaler.fromDOM(lt),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Viewport{constructor(lt,dt){this.from=lt,this.to=dt}}function lineStructure(ft,lt,dt){let vt=[],Tt=ft,Et=0;return RangeSet.spans(dt,ft,lt,{span(){},point(Ct,Rt){Ct>Tt&&(vt.push({from:Tt,to:Ct}),Et+=Ct-Tt),Tt=Rt}},20),Tt<lt&&(vt.push({from:Tt,to:lt}),Et+=lt-Tt),{total:Et,ranges:vt}}function findPosition({total:ft,ranges:lt},dt){if(dt<=0)return lt[0].from;if(dt>=1)return lt[lt.length-1].to;let vt=Math.floor(ft*dt);for(let Tt=0;;Tt++){let{from:Et,to:Ct}=lt[Tt],Rt=Ct-Et;if(vt<=Rt)return Et+vt;vt-=Rt}}function findFraction(ft,lt){let dt=0;for(let{from:vt,to:Tt}of ft.ranges){if(lt<=Tt){dt+=lt-vt;break}dt+=Tt-vt}return dt/ft.total}function find(ft,lt){for(let dt of ft)if(lt(dt))return dt}const IdScaler={toDOM(ft){return ft},fromDOM(ft){return ft},scale:1};class BigScaler{constructor(lt,dt,vt){let Tt=0,Et=0,Ct=0;this.viewports=vt.map(({from:Rt,to:kt})=>{let Dt=dt.lineAt(Rt,QueryType$1.ByPos,lt,0,0).top,Bt=dt.lineAt(kt,QueryType$1.ByPos,lt,0,0).bottom;return Tt+=Bt-Dt,{from:Rt,to:kt,top:Dt,bottom:Bt,domTop:0,domBottom:0}}),this.scale=(7e6-Tt)/(dt.height-Tt);for(let Rt of this.viewports)Rt.domTop=Ct+(Rt.top-Et)*this.scale,Ct=Rt.domBottom=Rt.domTop+(Rt.bottom-Rt.top),Et=Rt.bottom}toDOM(lt){for(let dt=0,vt=0,Tt=0;;dt++){let Et=dt<this.viewports.length?this.viewports[dt]:null;if(!Et||lt<Et.top)return Tt+(lt-vt)*this.scale;if(lt<=Et.bottom)return Et.domTop+(lt-Et.top);vt=Et.bottom,Tt=Et.domBottom}}fromDOM(lt){for(let dt=0,vt=0,Tt=0;;dt++){let Et=dt<this.viewports.length?this.viewports[dt]:null;if(!Et||lt<Et.domTop)return vt+(lt-Tt)/this.scale;if(lt<=Et.domBottom)return Et.top+(lt-Et.domTop);vt=Et.bottom,Tt=Et.domBottom}}}function scaleBlock(ft,lt){if(lt.scale==1)return ft;let dt=lt.toDOM(ft.top),vt=lt.toDOM(ft.bottom);return new BlockInfo(ft.from,ft.length,dt,vt-dt,Array.isArray(ft.type)?ft.type.map(Tt=>scaleBlock(Tt,lt)):ft.type)}const theme=Facet.define({combine:ft=>ft.join(" ")}),darkTheme=Facet.define({combine:ft=>ft.indexOf(!0)>-1}),baseThemeID=StyleModule.newName(),baseLightID=StyleModule.newName(),baseDarkID=StyleModule.newName(),lightDarkIDs={"&light":"."+baseLightID,"&dark":"."+baseDarkID};function buildTheme(ft,lt,dt){return new StyleModule(lt,{finish(vt){return/&/.test(vt)?vt.replace(/&\w*/,Tt=>{if(Tt=="&")return ft;if(!dt||!dt[Tt])throw new RangeError(`Unsupported selector: ${Tt}`);return dt[Tt]}):ft+" "+vt}})}const baseTheme$1$2=buildTheme("."+baseThemeID,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},lightDarkIDs);class DOMChange{constructor(lt,dt,vt,Tt){this.typeOver=Tt,this.bounds=null,this.text="";let{impreciseHead:Et,impreciseAnchor:Ct}=lt.docView;if(lt.state.readOnly&&dt>-1)this.newSel=null;else if(dt>-1&&(this.bounds=lt.docView.domBoundsAround(dt,vt,0))){let Rt=Et||Ct?[]:selectionPoints(lt),kt=new DOMReader(Rt,lt.state);kt.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=kt.text,this.newSel=selectionFromPoints(Rt,this.bounds.from)}else{let Rt=lt.observer.selectionRange,kt=Et&&Et.node==Rt.focusNode&&Et.offset==Rt.focusOffset||!contains(lt.contentDOM,Rt.focusNode)?lt.state.selection.main.head:lt.docView.posFromDOM(Rt.focusNode,Rt.focusOffset),Dt=Ct&&Ct.node==Rt.anchorNode&&Ct.offset==Rt.anchorOffset||!contains(lt.contentDOM,Rt.anchorNode)?lt.state.selection.main.anchor:lt.docView.posFromDOM(Rt.anchorNode,Rt.anchorOffset);this.newSel=EditorSelection.single(Dt,kt)}}}function applyDOMChange(ft,lt){let dt,{newSel:vt}=lt,Tt=ft.state.selection.main;if(lt.bounds){let{from:Et,to:Ct}=lt.bounds,Rt=Tt.from,kt=null;(ft.inputState.lastKeyCode===8&&ft.inputState.lastKeyTime>Date.now()-100||browser.android&&lt.text.length<Ct-Et)&&(Rt=Tt.to,kt="end");let Dt=findDiff(ft.state.doc.sliceString(Et,Ct,LineBreakPlaceholder),lt.text,Rt-Et,kt);Dt&&(browser.chrome&&ft.inputState.lastKeyCode==13&&Dt.toB==Dt.from+2&&lt.text.slice(Dt.from,Dt.toB)==LineBreakPlaceholder+LineBreakPlaceholder&&Dt.toB--,dt={from:Et+Dt.from,to:Et+Dt.toA,insert:Text.of(lt.text.slice(Dt.from,Dt.toB).split(LineBreakPlaceholder))})}else vt&&(!ft.hasFocus&&ft.state.facet(editable)||vt.main.eq(Tt))&&(vt=null);if(!dt&&!vt)return!1;if(!dt&&lt.typeOver&&!Tt.empty&&vt&&vt.main.empty?dt={from:Tt.from,to:Tt.to,insert:ft.state.doc.slice(Tt.from,Tt.to)}:dt&&dt.from>=Tt.from&&dt.to<=Tt.to&&(dt.from!=Tt.from||dt.to!=Tt.to)&&Tt.to-Tt.from-(dt.to-dt.from)<=4?dt={from:Tt.from,to:Tt.to,insert:ft.state.doc.slice(Tt.from,dt.from).append(dt.insert).append(ft.state.doc.slice(dt.to,Tt.to))}:(browser.mac||browser.android)&&dt&&dt.from==dt.to&&dt.from==Tt.head-1&&/^\. ?$/.test(dt.insert.toString())&&ft.contentDOM.getAttribute("autocorrect")=="off"?(vt&&dt.insert.length==2&&(vt=EditorSelection.single(vt.main.anchor-1,vt.main.head-1)),dt={from:Tt.from,to:Tt.to,insert:Text.of([" "])}):browser.chrome&&dt&&dt.from==dt.to&&dt.from==Tt.head&&dt.insert.toString()==`
 `&&ft.lineWrapping&&(vt&&(vt=EditorSelection.single(vt.main.anchor-1,vt.main.head-1)),dt={from:Tt.from,to:Tt.to,insert:Text.of([" "])}),dt){let Et=ft.state;if(browser.ios&&ft.inputState.flushIOSKey(ft)||browser.android&&(dt.from==Tt.from&&dt.to==Tt.to&&dt.insert.length==1&&dt.insert.lines==2&&dispatchKey(ft.contentDOM,"Enter",13)||dt.from==Tt.from-1&&dt.to==Tt.to&&dt.insert.length==0&&dispatchKey(ft.contentDOM,"Backspace",8)||dt.from==Tt.from&&dt.to==Tt.to+1&&dt.insert.length==0&&dispatchKey(ft.contentDOM,"Delete",46)))return!0;let Ct=dt.insert.toString();if(ft.state.facet(inputHandler$1).some(Dt=>Dt(ft,dt.from,dt.to,Ct)))return!0;ft.inputState.composing>=0&&ft.inputState.composing++;let Rt;if(dt.from>=Tt.from&&dt.to<=Tt.to&&dt.to-dt.from>=(Tt.to-Tt.from)/3&&(!vt||vt.main.empty&&vt.main.from==dt.from+dt.insert.length)&&ft.inputState.composing<0){let Dt=Tt.from<dt.from?Et.sliceDoc(Tt.from,dt.from):"",Bt=Tt.to>dt.to?Et.sliceDoc(dt.to,Tt.to):"";Rt=Et.replaceSelection(ft.state.toText(Dt+dt.insert.sliceString(0,void 0,ft.state.lineBreak)+Bt))}else{let Dt=Et.changes(dt),Bt=vt&&!Et.selection.main.eq(vt.main)&&vt.main.to<=Dt.newLength?vt.main:void 0;if(Et.selection.ranges.length>1&&ft.inputState.composing>=0&&dt.to<=Tt.to&&dt.to>=Tt.to-10){let Ft=ft.state.sliceDoc(dt.from,dt.to),Ut=compositionSurroundingNode(ft)||ft.state.doc.lineAt(Tt.head),Zt=Tt.to-dt.to,Kt=Tt.to-Tt.from;Rt=Et.changeByRange(ln=>{if(ln.from==Tt.from&&ln.to==Tt.to)return{changes:Dt,range:Bt||ln.map(Dt)};let hn=ln.to-Zt,dn=hn-Ft.length;if(ln.to-ln.from!=Kt||ft.state.sliceDoc(dn,hn)!=Ft||Ut&&ln.to>=Ut.from&&ln.from<=Ut.to)return{range:ln};let pn=Et.changes({from:dn,to:hn,insert:dt.insert}),mn=ln.to-Tt.to;return{changes:pn,range:Bt?EditorSelection.range(Math.max(0,Bt.anchor+mn),Math.max(0,Bt.head+mn)):ln.map(pn)}})}else Rt={changes:Dt,selection:Bt&&Et.selection.replaceRange(Bt)}}let kt="input.type";return ft.composing&&(kt+=".compose",ft.inputState.compositionFirstChange&&(kt+=".start",ft.inputState.compositionFirstChange=!1)),ft.dispatch(Rt,{scrollIntoView:!0,userEvent:kt}),!0}else if(vt&&!vt.main.eq(Tt)){let Et=!1,Ct="select";return ft.inputState.lastSelectionTime>Date.now()-50&&(ft.inputState.lastSelectionOrigin=="select"&&(Et=!0),Ct=ft.inputState.lastSelectionOrigin),ft.dispatch({selection:vt,scrollIntoView:Et,userEvent:Ct}),!0}else return!1}function findDiff(ft,lt,dt,vt){let Tt=Math.min(ft.length,lt.length),Et=0;for(;Et<Tt&&ft.charCodeAt(Et)==lt.charCodeAt(Et);)Et++;if(Et==Tt&&ft.length==lt.length)return null;let Ct=ft.length,Rt=lt.length;for(;Ct>0&&Rt>0&&ft.charCodeAt(Ct-1)==lt.charCodeAt(Rt-1);)Ct--,Rt--;if(vt=="end"){let kt=Math.max(0,Et-Math.min(Ct,Rt));dt-=Ct+kt-Et}if(Ct<Et&&ft.length<lt.length){let kt=dt<=Et&&dt>=Ct?Et-dt:0;Et-=kt,Rt=Et+(Rt-Ct),Ct=Et}else if(Rt<Et){let kt=dt<=Et&&dt>=Rt?Et-dt:0;Et-=kt,Ct=Et+(Ct-Rt),Rt=Et}return{from:Et,toA:Ct,toB:Rt}}function selectionPoints(ft){let lt=[];if(ft.root.activeElement!=ft.contentDOM)return lt;let{anchorNode:dt,anchorOffset:vt,focusNode:Tt,focusOffset:Et}=ft.observer.selectionRange;return dt&&(lt.push(new DOMPoint(dt,vt)),(Tt!=dt||Et!=vt)&&lt.push(new DOMPoint(Tt,Et))),lt}function selectionFromPoints(ft,lt){if(ft.length==0)return null;let dt=ft[0].pos,vt=ft.length==2?ft[1].pos:dt;return dt>-1&&vt>-1?EditorSelection.single(dt+lt,vt+lt):null}const observeOptions={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},useCharData=browser.ie&&browser.ie_version<=11;class DOMObserver{constructor(lt){this.view=lt,this.active=!1,this.selectionRange=new DOMSelectionState,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=lt.contentDOM,this.observer=new MutationObserver(dt=>{for(let vt of dt)this.queue.push(vt);(browser.ie&&browser.ie_version<=11||browser.ios&&lt.composing)&&dt.some(vt=>vt.type=="childList"&&vt.removedNodes.length||vt.type=="characterData"&&vt.oldValue.length>vt.target.nodeValue.length)?this.flushSoon():this.flush()}),useCharData&&(this.onCharData=dt=>{this.queue.push({target:dt.target,type:"characterData",oldValue:dt.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var dt;((dt=this.view.docView)===null||dt===void 0?void 0:dt.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(lt.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(lt.contentDOM)),this.addWindowListeners(this.win=lt.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(dt=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),dt.length>0&&dt[dt.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(dt=>{dt.length>0&&dt[dt.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(lt){this.view.inputState.runScrollHandlers(this.view,lt),this.intersecting&&this.view.measure()}onScroll(lt){this.intersecting&&this.flush(!1),this.onScrollChanged(lt)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(lt){if(this.gapIntersection&&(lt.length!=this.gaps.length||this.gaps.some((dt,vt)=>dt!=lt[vt]))){this.gapIntersection.disconnect();for(let dt of lt)this.gapIntersection.observe(dt);this.gaps=lt}}onSelectionChange(lt){let dt=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:vt}=this,Tt=this.selectionRange;if(vt.state.facet(editable)?vt.root.activeElement!=this.dom:!hasSelection(vt.dom,Tt))return;let Et=Tt.anchorNode&&vt.docView.nearest(Tt.anchorNode);if(Et&&Et.ignoreEvent(lt)){dt||(this.selectionChanged=!1);return}(browser.ie&&browser.ie_version<=11||browser.android&&browser.chrome)&&!vt.state.selection.main.empty&&Tt.focusNode&&isEquivalentPosition(Tt.focusNode,Tt.focusOffset,Tt.anchorNode,Tt.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:lt}=this,dt=browser.safari&&lt.root.nodeType==11&&deepActiveElement(this.dom.ownerDocument)==this.dom&&safariSelectionRangeHack(this.view)||getSelection(lt.root);if(!dt||this.selectionRange.eq(dt))return!1;let vt=hasSelection(this.dom,dt);return vt&&!this.selectionChanged&&lt.inputState.lastFocusTime>Date.now()-200&&lt.inputState.lastTouchTime<Date.now()-300&&atElementStart(this.dom,dt)?(this.view.inputState.lastFocusTime=0,lt.docView.updateSelection(),!1):(this.selectionRange.setRange(dt),vt&&(this.selectionChanged=!0),!0)}setSelectionRange(lt,dt){this.selectionRange.set(lt.node,lt.offset,dt.node,dt.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let lt=0,dt=null;for(let vt=this.dom;vt;)if(vt.nodeType==1)!dt&&lt<this.scrollTargets.length&&this.scrollTargets[lt]==vt?lt++:dt||(dt=this.scrollTargets.slice(0,lt)),dt&&dt.push(vt),vt=vt.assignedSlot||vt.parentNode;else if(vt.nodeType==11)vt=vt.host;else break;if(lt<this.scrollTargets.length&&!dt&&(dt=this.scrollTargets.slice(0,lt)),dt){for(let vt of this.scrollTargets)vt.removeEventListener("scroll",this.onScroll);for(let vt of this.scrollTargets=dt)vt.addEventListener("scroll",this.onScroll)}}ignore(lt){if(!this.active)return lt();try{return this.stop(),lt()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,observeOptions),useCharData&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),useCharData&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(lt,dt){var vt;if(!this.delayedAndroidKey){let Tt=()=>{let Et=this.delayedAndroidKey;Et&&(this.clearDelayedAndroidKey(),!this.flush()&&Et.force&&dispatchKey(this.dom,Et.key,Et.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(Tt)}(!this.delayedAndroidKey||lt=="Enter")&&(this.delayedAndroidKey={key:lt,keyCode:dt,force:this.lastChange<Date.now()-50||!!(!((vt=this.delayedAndroidKey)===null||vt===void 0)&&vt.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}processRecords(){let lt=this.queue;for(let Et of this.observer.takeRecords())lt.push(Et);lt.length&&(this.queue=[]);let dt=-1,vt=-1,Tt=!1;for(let Et of lt){let Ct=this.readMutation(Et);Ct&&(Ct.typeOver&&(Tt=!0),dt==-1?{from:dt,to:vt}=Ct:(dt=Math.min(Ct.from,dt),vt=Math.max(Ct.to,vt)))}return{from:dt,to:vt,typeOver:Tt}}readChange(){let{from:lt,to:dt,typeOver:vt}=this.processRecords(),Tt=this.selectionChanged&&hasSelection(this.dom,this.selectionRange);return lt<0&&!Tt?null:(lt>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new DOMChange(this.view,lt,dt,vt))}flush(lt=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;lt&&this.readSelectionRange();let dt=this.readChange();if(!dt)return!1;let vt=this.view.state,Tt=applyDOMChange(this.view,dt);return this.view.state==vt&&this.view.update([]),Tt}readMutation(lt){let dt=this.view.docView.nearest(lt.target);if(!dt||dt.ignoreMutation(lt))return null;if(dt.markDirty(lt.type=="attributes"),lt.type=="attributes"&&(dt.dirty|=4),lt.type=="childList"){let vt=findChild(dt,lt.previousSibling||lt.target.previousSibling,-1),Tt=findChild(dt,lt.nextSibling||lt.target.nextSibling,1);return{from:vt?dt.posAfter(vt):dt.posAtStart,to:Tt?dt.posBefore(Tt):dt.posAtEnd,typeOver:!1}}else return lt.type=="characterData"?{from:dt.posAtStart,to:dt.posAtEnd,typeOver:lt.target.nodeValue==lt.oldValue}:null}setWindow(lt){lt!=this.win&&(this.removeWindowListeners(this.win),this.win=lt,this.addWindowListeners(this.win))}addWindowListeners(lt){lt.addEventListener("resize",this.onResize),lt.addEventListener("beforeprint",this.onPrint),lt.addEventListener("scroll",this.onScroll),lt.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(lt){lt.removeEventListener("scroll",this.onScroll),lt.removeEventListener("resize",this.onResize),lt.removeEventListener("beforeprint",this.onPrint),lt.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var lt,dt,vt,Tt;this.stop(),(lt=this.intersection)===null||lt===void 0||lt.disconnect(),(dt=this.gapIntersection)===null||dt===void 0||dt.disconnect(),(vt=this.resizeScroll)===null||vt===void 0||vt.disconnect(),(Tt=this.resizeContent)===null||Tt===void 0||Tt.disconnect();for(let Et of this.scrollTargets)Et.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function findChild(ft,lt,dt){for(;lt;){let vt=ContentView.get(lt);if(vt&&vt.parent==ft)return vt;let Tt=lt.parentNode;lt=Tt!=ft.dom?Tt:dt>0?lt.nextSibling:lt.previousSibling}return null}function safariSelectionRangeHack(ft){let lt=null;function dt(kt){kt.preventDefault(),kt.stopImmediatePropagation(),lt=kt.getTargetRanges()[0]}if(ft.contentDOM.addEventListener("beforeinput",dt,!0),ft.dom.ownerDocument.execCommand("indent"),ft.contentDOM.removeEventListener("beforeinput",dt,!0),!lt)return null;let vt=lt.startContainer,Tt=lt.startOffset,Et=lt.endContainer,Ct=lt.endOffset,Rt=ft.docView.domAtPos(ft.state.selection.main.anchor);return isEquivalentPosition(Rt.node,Rt.offset,Et,Ct)&&([vt,Tt,Et,Ct]=[Et,Ct,vt,Tt]),{anchorNode:vt,anchorOffset:Tt,focusNode:Et,focusOffset:Ct}}class EditorView{constructor(lt={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=lt.dispatch||(dt=>this.update([dt])),this.dispatch=this.dispatch.bind(this),this._root=lt.root||getRoot(lt.parent)||document,this.viewState=new ViewState(lt.state||EditorState.create(lt)),this.plugins=this.state.facet(viewPlugin).map(dt=>new PluginInstance(dt));for(let dt of this.plugins)dt.update(this);this.observer=new DOMObserver(this),this.inputState=new InputState(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new DocView(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),lt.parent&&lt.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...lt){this._dispatch(lt.length==1&&lt[0]instanceof Transaction?lt[0]:this.state.update(...lt))}update(lt){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let dt=!1,vt=!1,Tt,Et=this.state;for(let Ut of lt){if(Ut.startState!=Et)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");Et=Ut.state}if(this.destroyed){this.viewState.state=Et;return}let Ct=this.hasFocus,Rt=0,kt=null;lt.some(Ut=>Ut.annotation(isFocusChange))?(this.inputState.notifiedFocused=Ct,Rt=1):Ct!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=Ct,kt=focusChangeTransaction(Et,Ct),kt||(Rt=1));let Dt=this.observer.delayedAndroidKey,Bt=null;if(Dt?(this.observer.clearDelayedAndroidKey(),Bt=this.observer.readChange(),(Bt&&!this.state.doc.eq(Et.doc)||!this.state.selection.eq(Et.selection))&&(Bt=null)):this.observer.clear(),Et.facet(EditorState.phrases)!=this.state.facet(EditorState.phrases))return this.setState(Et);Tt=ViewUpdate.create(this,Et,lt),Tt.flags|=Rt;let Ft=this.viewState.scrollTarget;try{this.updateState=2;for(let Ut of lt){if(Ft&&(Ft=Ft.map(Ut.changes)),Ut.scrollIntoView){let{main:Zt}=Ut.state.selection;Ft=new ScrollTarget(Zt.empty?Zt:EditorSelection.cursor(Zt.head,Zt.head>Zt.anchor?-1:1))}for(let Zt of Ut.effects)Zt.is(scrollIntoView$1)&&(Ft=Zt.value)}this.viewState.update(Tt,Ft),this.bidiCache=CachedOrder.update(this.bidiCache,Tt.changes),Tt.empty||(this.updatePlugins(Tt),this.inputState.update(Tt)),dt=this.docView.update(Tt),this.state.facet(styleModule)!=this.styleModules&&this.mountStyles(),vt=this.updateAttrs(),this.showAnnouncements(lt),this.docView.updateSelection(dt,lt.some(Ut=>Ut.isUserEvent("select.pointer")))}finally{this.updateState=0}if(Tt.startState.facet(theme)!=Tt.state.facet(theme)&&(this.viewState.mustMeasureContent=!0),(dt||vt||Ft||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!Tt.empty)for(let Ut of this.state.facet(updateListener))Ut(Tt);(kt||Bt)&&Promise.resolve().then(()=>{kt&&this.state==kt.startState&&this.dispatch(kt),Bt&&!applyDOMChange(this,Bt)&&Dt.force&&dispatchKey(this.contentDOM,Dt.key,Dt.keyCode)})}setState(lt){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=lt;return}this.updateState=2;let dt=this.hasFocus;try{for(let vt of this.plugins)vt.destroy(this);this.viewState=new ViewState(lt),this.plugins=lt.facet(viewPlugin).map(vt=>new PluginInstance(vt)),this.pluginMap.clear();for(let vt of this.plugins)vt.update(this);this.docView=new DocView(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}dt&&this.focus(),this.requestMeasure()}updatePlugins(lt){let dt=lt.startState.facet(viewPlugin),vt=lt.state.facet(viewPlugin);if(dt!=vt){let Tt=[];for(let Et of vt){let Ct=dt.indexOf(Et);if(Ct<0)Tt.push(new PluginInstance(Et));else{let Rt=this.plugins[Ct];Rt.mustUpdate=lt,Tt.push(Rt)}}for(let Et of this.plugins)Et.mustUpdate!=lt&&Et.destroy(this);this.plugins=Tt,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let Tt of this.plugins)Tt.mustUpdate=lt;for(let Tt=0;Tt<this.plugins.length;Tt++)this.plugins[Tt].update(this)}measure(lt=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,lt&&this.observer.forceFlush();let dt=null,{scrollHeight:vt,scrollTop:Tt,clientHeight:Et}=this.scrollDOM,Ct=Tt>vt-Et-4?vt:Tt;try{for(let Rt=0;;Rt++){this.updateState=1;let kt=this.viewport,Dt=this.viewState.lineBlockAtHeight(Ct),Bt=this.viewState.measure(this);if(!Bt&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(Rt>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let Ft=[];Bt&4||([this.measureRequests,Ft]=[Ft,this.measureRequests]);let Ut=Ft.map(hn=>{try{return hn.read(this)}catch(dn){return logException(this.state,dn),BadMeasure}}),Zt=ViewUpdate.create(this,this.state,[]),Kt=!1,ln=!1;Zt.flags|=Bt,dt?dt.flags|=Bt:dt=Zt,this.updateState=2,Zt.empty||(this.updatePlugins(Zt),this.inputState.update(Zt),this.updateAttrs(),Kt=this.docView.update(Zt));for(let hn=0;hn<Ft.length;hn++)if(Ut[hn]!=BadMeasure)try{let dn=Ft[hn];dn.write&&dn.write(Ut[hn],this)}catch(dn){logException(this.state,dn)}if(this.viewState.editorHeight)if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,ln=!0;else{let hn=this.viewState.lineBlockAt(Dt.from).top-Dt.top;(hn>1||hn<-1)&&(this.scrollDOM.scrollTop+=hn,ln=!0)}if(Kt&&this.docView.updateSelection(!0),this.viewport.from==kt.from&&this.viewport.to==kt.to&&!ln&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(dt&&!dt.empty)for(let Rt of this.state.facet(updateListener))Rt(dt)}get themeClasses(){return baseThemeID+" "+(this.state.facet(darkTheme)?baseDarkID:baseLightID)+" "+this.state.facet(theme)}updateAttrs(){let lt=attrsFromFacet(this,editorAttributes,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),dt={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(editable)?"true":"false",class:"cm-content",style:`${browser.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(dt["aria-readonly"]="true"),attrsFromFacet(this,contentAttributes,dt);let vt=this.observer.ignore(()=>{let Tt=updateAttrs(this.contentDOM,this.contentAttrs,dt),Et=updateAttrs(this.dom,this.editorAttrs,lt);return Tt||Et});return this.editorAttrs=lt,this.contentAttrs=dt,vt}showAnnouncements(lt){let dt=!0;for(let vt of lt)for(let Tt of vt.effects)if(Tt.is(EditorView.announce)){dt&&(this.announceDOM.textContent=""),dt=!1;let Et=this.announceDOM.appendChild(document.createElement("div"));Et.textContent=Tt.value}}mountStyles(){this.styleModules=this.state.facet(styleModule),StyleModule.mount(this.root,this.styleModules.concat(baseTheme$1$2).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(lt){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),lt){if(this.measureRequests.indexOf(lt)>-1)return;if(lt.key!=null){for(let dt=0;dt<this.measureRequests.length;dt++)if(this.measureRequests[dt].key===lt.key){this.measureRequests[dt]=lt;return}}this.measureRequests.push(lt)}}plugin(lt){let dt=this.pluginMap.get(lt);return(dt===void 0||dt&&dt.spec!=lt)&&this.pluginMap.set(lt,dt=this.plugins.find(vt=>vt.spec==lt)||null),dt&&dt.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(lt){return this.readMeasured(),this.viewState.elementAtHeight(lt)}lineBlockAtHeight(lt){return this.readMeasured(),this.viewState.lineBlockAtHeight(lt)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(lt){return this.viewState.lineBlockAt(lt)}get contentHeight(){return this.viewState.contentHeight}moveByChar(lt,dt,vt){return skipAtoms(this,lt,moveByChar(this,lt,dt,vt))}moveByGroup(lt,dt){return skipAtoms(this,lt,moveByChar(this,lt,dt,vt=>byGroup(this,lt.head,vt)))}moveToLineBoundary(lt,dt,vt=!0){return moveToLineBoundary(this,lt,dt,vt)}moveVertically(lt,dt,vt){return skipAtoms(this,lt,moveVertically(this,lt,dt,vt))}domAtPos(lt){return this.docView.domAtPos(lt)}posAtDOM(lt,dt=0){return this.docView.posFromDOM(lt,dt)}posAtCoords(lt,dt=!0){return this.readMeasured(),posAtCoords(this,lt,dt)}coordsAtPos(lt,dt=1){this.readMeasured();let vt=this.docView.coordsAt(lt,dt);if(!vt||vt.left==vt.right)return vt;let Tt=this.state.doc.lineAt(lt),Et=this.bidiSpans(Tt),Ct=Et[BidiSpan.find(Et,lt-Tt.from,-1,dt)];return flattenRect(vt,Ct.dir==Direction.LTR==dt>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(lt){return!this.state.facet(perLineTextDirection)||lt<this.viewport.from||lt>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(lt))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(lt){if(lt.length>MaxBidiLine)return trivialOrder(lt.length);let dt=this.textDirectionAt(lt.from);for(let Tt of this.bidiCache)if(Tt.from==lt.from&&Tt.dir==dt)return Tt.order;let vt=computeOrder(lt.text,dt);return this.bidiCache.push(new CachedOrder(lt.from,lt.to,dt,vt)),vt}get hasFocus(){var lt;return(this.dom.ownerDocument.hasFocus()||browser.safari&&((lt=this.inputState)===null||lt===void 0?void 0:lt.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{focusPreventScroll(this.contentDOM),this.docView.updateSelection()})}setRoot(lt){this._root!=lt&&(this._root=lt,this.observer.setWindow((lt.nodeType==9?lt:lt.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let lt of this.plugins)lt.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(lt,dt={}){return scrollIntoView$1.of(new ScrollTarget(typeof lt=="number"?EditorSelection.cursor(lt):lt,dt.y,dt.x,dt.yMargin,dt.xMargin))}static domEventHandlers(lt){return ViewPlugin.define(()=>({}),{eventHandlers:lt})}static theme(lt,dt){let vt=StyleModule.newName(),Tt=[theme.of(vt),styleModule.of(buildTheme(`.${vt}`,lt))];return dt&&dt.dark&&Tt.push(darkTheme.of(!0)),Tt}static baseTheme(lt){return Prec.lowest(styleModule.of(buildTheme("."+baseThemeID,lt,lightDarkIDs)))}static findFromDOM(lt){var dt;let vt=lt.querySelector(".cm-content"),Tt=vt&&ContentView.get(vt)||ContentView.get(lt);return((dt=Tt==null?void 0:Tt.rootView)===null||dt===void 0?void 0:dt.view)||null}}EditorView.styleModule=styleModule;EditorView.inputHandler=inputHandler$1;EditorView.focusChangeEffect=focusChangeEffect;EditorView.perLineTextDirection=perLineTextDirection;EditorView.exceptionSink=exceptionSink;EditorView.updateListener=updateListener;EditorView.editable=editable;EditorView.mouseSelectionStyle=mouseSelectionStyle;EditorView.dragMovesSelection=dragMovesSelection$1;EditorView.clickAddsSelectionRange=clickAddsSelectionRange;EditorView.decorations=decorations;EditorView.atomicRanges=atomicRanges;EditorView.scrollMargins=scrollMargins;EditorView.darkTheme=darkTheme;EditorView.contentAttributes=contentAttributes;EditorView.editorAttributes=editorAttributes;EditorView.lineWrapping=EditorView.contentAttributes.of({class:"cm-lineWrapping"});EditorView.announce=StateEffect.define();const MaxBidiLine=4096,BadMeasure={};class CachedOrder{constructor(lt,dt,vt,Tt){this.from=lt,this.to=dt,this.dir=vt,this.order=Tt}static update(lt,dt){if(dt.empty)return lt;let vt=[],Tt=lt.length?lt[lt.length-1].dir:Direction.LTR;for(let Et=Math.max(0,lt.length-10);Et<lt.length;Et++){let Ct=lt[Et];Ct.dir==Tt&&!dt.touchesRange(Ct.from,Ct.to)&&vt.push(new CachedOrder(dt.mapPos(Ct.from,1),dt.mapPos(Ct.to,-1),Ct.dir,Ct.order))}return vt}}function attrsFromFacet(ft,lt,dt){for(let vt=ft.state.facet(lt),Tt=vt.length-1;Tt>=0;Tt--){let Et=vt[Tt],Ct=typeof Et=="function"?Et(ft):Et;Ct&&combineAttrs(Ct,dt)}return dt}const currentPlatform=browser.mac?"mac":browser.windows?"win":browser.linux?"linux":"key";function normalizeKeyName(ft,lt){const dt=ft.split(/-(?!$)/);let vt=dt[dt.length-1];vt=="Space"&&(vt=" ");let Tt,Et,Ct,Rt;for(let kt=0;kt<dt.length-1;++kt){const Dt=dt[kt];if(/^(cmd|meta|m)$/i.test(Dt))Rt=!0;else if(/^a(lt)?$/i.test(Dt))Tt=!0;else if(/^(c|ctrl|control)$/i.test(Dt))Et=!0;else if(/^s(hift)?$/i.test(Dt))Ct=!0;else if(/^mod$/i.test(Dt))lt=="mac"?Rt=!0:Et=!0;else throw new Error("Unrecognized modifier name: "+Dt)}return Tt&&(vt="Alt-"+vt),Et&&(vt="Ctrl-"+vt),Rt&&(vt="Meta-"+vt),Ct&&(vt="Shift-"+vt),vt}function modifiers(ft,lt,dt){return lt.altKey&&(ft="Alt-"+ft),lt.ctrlKey&&(ft="Ctrl-"+ft),lt.metaKey&&(ft="Meta-"+ft),dt!==!1&&lt.shiftKey&&(ft="Shift-"+ft),ft}const handleKeyEvents=Prec.default(EditorView.domEventHandlers({keydown(ft,lt){return runHandlers(getKeymap(lt.state),ft,lt,"editor")}})),keymap=Facet.define({enables:handleKeyEvents}),Keymaps=new WeakMap;function getKeymap(ft){let lt=ft.facet(keymap),dt=Keymaps.get(lt);return dt||Keymaps.set(lt,dt=buildKeymap(lt.reduce((vt,Tt)=>vt.concat(Tt),[]))),dt}function runScopeHandlers(ft,lt,dt){return runHandlers(getKeymap(ft.state),lt,ft,dt)}let storedPrefix=null;const PrefixTimeout=4e3;function buildKeymap(ft,lt=currentPlatform){let dt=Object.create(null),vt=Object.create(null),Tt=(Ct,Rt)=>{let kt=vt[Ct];if(kt==null)vt[Ct]=Rt;else if(kt!=Rt)throw new Error("Key binding "+Ct+" is used both as a regular binding and as a multi-stroke prefix")},Et=(Ct,Rt,kt,Dt)=>{var Bt,Ft;let Ut=dt[Ct]||(dt[Ct]=Object.create(null)),Zt=Rt.split(/ (?!$)/).map(hn=>normalizeKeyName(hn,lt));for(let hn=1;hn<Zt.length;hn++){let dn=Zt.slice(0,hn).join(" ");Tt(dn,!0),Ut[dn]||(Ut[dn]={preventDefault:!0,run:[pn=>{let mn=storedPrefix={view:pn,prefix:dn,scope:Ct};return setTimeout(()=>{storedPrefix==mn&&(storedPrefix=null)},PrefixTimeout),!0}]})}let Kt=Zt.join(" ");Tt(Kt,!1);let ln=Ut[Kt]||(Ut[Kt]={preventDefault:!1,run:((Ft=(Bt=Ut._any)===null||Bt===void 0?void 0:Bt.run)===null||Ft===void 0?void 0:Ft.slice())||[]});kt&&ln.run.push(kt),Dt&&(ln.preventDefault=!0)};for(let Ct of ft){let Rt=Ct.scope?Ct.scope.split(" "):["editor"];if(Ct.any)for(let Dt of Rt){let Bt=dt[Dt]||(dt[Dt]=Object.create(null));Bt._any||(Bt._any={preventDefault:!1,run:[]});for(let Ft in Bt)Bt[Ft].run.push(Ct.any)}let kt=Ct[lt]||Ct.key;if(kt)for(let Dt of Rt)Et(Dt,kt,Ct.run,Ct.preventDefault),Ct.shift&&Et(Dt,"Shift-"+kt,Ct.shift,Ct.preventDefault)}return dt}function runHandlers(ft,lt,dt,vt){let Tt=keyName(lt),Et=codePointAt(Tt,0),Ct=codePointSize(Et)==Tt.length&&Tt!=" ",Rt="",kt=!1;storedPrefix&&storedPrefix.view==dt&&storedPrefix.scope==vt&&(Rt=storedPrefix.prefix+" ",(kt=modifierCodes.indexOf(lt.keyCode)<0)&&(storedPrefix=null));let Dt=new Set,Bt=Kt=>{if(Kt){for(let ln of Kt.run)if(!Dt.has(ln)&&(Dt.add(ln),ln(dt,lt)))return!0;Kt.preventDefault&&(kt=!0)}return!1},Ft=ft[vt],Ut,Zt;if(Ft){if(Bt(Ft[Rt+modifiers(Tt,lt,!Ct)]))return!0;if(Ct&&(lt.altKey||lt.metaKey||lt.ctrlKey)&&!(browser.windows&&lt.ctrlKey&&lt.altKey)&&(Ut=base[lt.keyCode])&&Ut!=Tt){if(Bt(Ft[Rt+modifiers(Ut,lt,!0)]))return!0;if(lt.shiftKey&&(Zt=shift[lt.keyCode])!=Tt&&Zt!=Ut&&Bt(Ft[Rt+modifiers(Zt,lt,!1)]))return!0}else if(Ct&&lt.shiftKey&&Bt(Ft[Rt+modifiers(Tt,lt,!0)]))return!0;if(Bt(Ft._any))return!0}return kt}class RectangleMarker{constructor(lt,dt,vt,Tt,Et){this.className=lt,this.left=dt,this.top=vt,this.width=Tt,this.height=Et}draw(){let lt=document.createElement("div");return lt.className=this.className,this.adjust(lt),lt}update(lt,dt){return dt.className!=this.className?!1:(this.adjust(lt),!0)}adjust(lt){lt.style.left=this.left+"px",lt.style.top=this.top+"px",this.width!=null&&(lt.style.width=this.width+"px"),lt.style.height=this.height+"px"}eq(lt){return this.left==lt.left&&this.top==lt.top&&this.width==lt.width&&this.height==lt.height&&this.className==lt.className}static forRange(lt,dt,vt){if(vt.empty){let Tt=lt.coordsAtPos(vt.head,vt.assoc||1);if(!Tt)return[];let Et=getBase(lt);return[new RectangleMarker(dt,Tt.left-Et.left,Tt.top-Et.top,null,Tt.bottom-Tt.top)]}else return rectanglesForRange(lt,dt,vt)}}function getBase(ft){let lt=ft.scrollDOM.getBoundingClientRect();return{left:(ft.textDirection==Direction.LTR?lt.left:lt.right-ft.scrollDOM.clientWidth)-ft.scrollDOM.scrollLeft,top:lt.top-ft.scrollDOM.scrollTop}}function wrappedLine(ft,lt,dt){let vt=EditorSelection.cursor(lt);return{from:Math.max(dt.from,ft.moveToLineBoundary(vt,!1,!0).from),to:Math.min(dt.to,ft.moveToLineBoundary(vt,!0,!0).from),type:BlockType.Text}}function blockAt(ft,lt){let dt=ft.lineBlockAt(lt);if(Array.isArray(dt.type)){for(let vt of dt.type)if(vt.to>lt||vt.to==lt&&(vt.to==dt.to||vt.type==BlockType.Text))return vt}return dt}function rectanglesForRange(ft,lt,dt){if(dt.to<=ft.viewport.from||dt.from>=ft.viewport.to)return[];let vt=Math.max(dt.from,ft.viewport.from),Tt=Math.min(dt.to,ft.viewport.to),Et=ft.textDirection==Direction.LTR,Ct=ft.contentDOM,Rt=Ct.getBoundingClientRect(),kt=getBase(ft),Dt=window.getComputedStyle(Ct.firstChild),Bt=Rt.left+parseInt(Dt.paddingLeft)+Math.min(0,parseInt(Dt.textIndent)),Ft=Rt.right-parseInt(Dt.paddingRight),Ut=blockAt(ft,vt),Zt=blockAt(ft,Tt),Kt=Ut.type==BlockType.Text?Ut:null,ln=Zt.type==BlockType.Text?Zt:null;if(ft.lineWrapping&&(Kt&&(Kt=wrappedLine(ft,vt,Kt)),ln&&(ln=wrappedLine(ft,Tt,ln))),Kt&&ln&&Kt.from==ln.from)return dn(pn(dt.from,dt.to,Kt));{let On=Kt?pn(dt.from,null,Kt):mn(Ut,!1),bn=ln?pn(null,dt.to,ln):mn(Zt,!0),En=[];return(Kt||Ut).to<(ln||Zt).from-1?En.push(hn(Bt,On.bottom,Ft,bn.top)):On.bottom<bn.top&&ft.elementAtHeight((On.bottom+bn.top)/2).type==BlockType.Text&&(On.bottom=bn.top=(On.bottom+bn.top)/2),dn(On).concat(En).concat(dn(bn))}function hn(On,bn,En,An){return new RectangleMarker(lt,On-kt.left,bn-kt.top-.01,En-On,An-bn+.01)}function dn({top:On,bottom:bn,horizontal:En}){let An=[];for(let Tn=0;Tn<En.length;Tn+=2)An.push(hn(En[Tn],On,En[Tn+1],bn));return An}function pn(On,bn,En){let An=1e9,Tn=-1e9,In=[];function Rn(Hn,jn,Kn,zn,lr){let Ln=ft.coordsAtPos(Hn,Hn==En.to?-2:2),Vn=ft.coordsAtPos(Kn,Kn==En.from?2:-2);An=Math.min(Ln.top,Vn.top,An),Tn=Math.max(Ln.bottom,Vn.bottom,Tn),lr==Direction.LTR?In.push(Et&&jn?Bt:Ln.left,Et&&zn?Ft:Vn.right):In.push(!Et&&zn?Bt:Vn.left,!Et&&jn?Ft:Ln.right)}let Dn=On??En.from,Bn=bn??En.to;for(let Hn of ft.visibleRanges)if(Hn.to>Dn&&Hn.from<Bn)for(let jn=Math.max(Hn.from,Dn),Kn=Math.min(Hn.to,Bn);;){let zn=ft.state.doc.lineAt(jn);for(let lr of ft.bidiSpans(zn)){let Ln=lr.from+zn.from,Vn=lr.to+zn.from;if(Ln>=Kn)break;Vn>jn&&Rn(Math.max(Ln,jn),On==null&&Ln<=Dn,Math.min(Vn,Kn),bn==null&&Vn>=Bn,lr.dir)}if(jn=zn.to+1,jn>=Kn)break}return In.length==0&&Rn(Dn,On==null,Bn,bn==null,ft.textDirection),{top:An,bottom:Tn,horizontal:In}}function mn(On,bn){let En=Rt.top+(bn?On.top:On.bottom);return{top:En,bottom:En,horizontal:[]}}}function sameMarker(ft,lt){return ft.constructor==lt.constructor&&ft.eq(lt)}class LayerView{constructor(lt,dt){this.view=lt,this.layer=dt,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=lt.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),dt.above&&this.dom.classList.add("cm-layer-above"),dt.class&&this.dom.classList.add(dt.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(lt.state),lt.requestMeasure(this.measureReq),dt.mount&&dt.mount(this.dom,lt)}update(lt){lt.startState.facet(layerOrder)!=lt.state.facet(layerOrder)&&this.setOrder(lt.state),(this.layer.update(lt,this.dom)||lt.geometryChanged)&&lt.view.requestMeasure(this.measureReq)}setOrder(lt){let dt=0,vt=lt.facet(layerOrder);for(;dt<vt.length&&vt[dt]!=this.layer;)dt++;this.dom.style.zIndex=String((this.layer.above?150:-1)-dt)}measure(){return this.layer.markers(this.view)}draw(lt){if(lt.length!=this.drawn.length||lt.some((dt,vt)=>!sameMarker(dt,this.drawn[vt]))){let dt=this.dom.firstChild,vt=0;for(let Tt of lt)Tt.update&&dt&&Tt.constructor&&this.drawn[vt].constructor&&Tt.update(dt,this.drawn[vt])?(dt=dt.nextSibling,vt++):this.dom.insertBefore(Tt.draw(),dt);for(;dt;){let Tt=dt.nextSibling;dt.remove(),dt=Tt}this.drawn=lt}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const layerOrder=Facet.define();function layer(ft){return[ViewPlugin.define(lt=>new LayerView(lt,ft)),layerOrder.of(ft)]}const CanHidePrimary=!browser.ios,selectionConfig=Facet.define({combine(ft){return combineConfig(ft,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(lt,dt)=>Math.min(lt,dt),drawRangeCursor:(lt,dt)=>lt||dt})}});function drawSelection(ft={}){return[selectionConfig.of(ft),cursorLayer,selectionLayer,hideNativeSelection,nativeSelectionHidden.of(!0)]}function configChanged(ft){return ft.startState.facet(selectionConfig)!=ft.state.facet(selectionConfig)}const cursorLayer=layer({above:!0,markers(ft){let{state:lt}=ft,dt=lt.facet(selectionConfig),vt=[];for(let Tt of lt.selection.ranges){let Et=Tt==lt.selection.main;if(Tt.empty?!Et||CanHidePrimary:dt.drawRangeCursor){let Ct=Et?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",Rt=Tt.empty?Tt:EditorSelection.cursor(Tt.head,Tt.head>Tt.anchor?-1:1);for(let kt of RectangleMarker.forRange(ft,Ct,Rt))vt.push(kt)}}return vt},update(ft,lt){ft.transactions.some(vt=>vt.selection)&&(lt.style.animationName=lt.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let dt=configChanged(ft);return dt&&setBlinkRate(ft.state,lt),ft.docChanged||ft.selectionSet||dt},mount(ft,lt){setBlinkRate(lt.state,ft)},class:"cm-cursorLayer"});function setBlinkRate(ft,lt){lt.style.animationDuration=ft.facet(selectionConfig).cursorBlinkRate+"ms"}const selectionLayer=layer({above:!1,markers(ft){return ft.state.selection.ranges.map(lt=>lt.empty?[]:RectangleMarker.forRange(ft,"cm-selectionBackground",lt)).reduce((lt,dt)=>lt.concat(dt))},update(ft,lt){return ft.docChanged||ft.selectionSet||ft.viewportChanged||configChanged(ft)},class:"cm-selectionLayer"}),themeSpec={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};CanHidePrimary&&(themeSpec[".cm-line"].caretColor="transparent !important");const hideNativeSelection=Prec.highest(EditorView.theme(themeSpec)),setDropCursorPos=StateEffect.define({map(ft,lt){return ft==null?null:lt.mapPos(ft)}}),dropCursorPos=StateField.define({create(){return null},update(ft,lt){return ft!=null&&(ft=lt.changes.mapPos(ft)),lt.effects.reduce((dt,vt)=>vt.is(setDropCursorPos)?vt.value:dt,ft)}}),drawDropCursor=ViewPlugin.fromClass(class{constructor(ft){this.view=ft,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(ft){var lt;let dt=ft.state.field(dropCursorPos);dt==null?this.cursor!=null&&((lt=this.cursor)===null||lt===void 0||lt.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(ft.startState.field(dropCursorPos)!=dt||ft.docChanged||ft.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let ft=this.view.state.field(dropCursorPos),lt=ft!=null&&this.view.coordsAtPos(ft);if(!lt)return null;let dt=this.view.scrollDOM.getBoundingClientRect();return{left:lt.left-dt.left+this.view.scrollDOM.scrollLeft,top:lt.top-dt.top+this.view.scrollDOM.scrollTop,height:lt.bottom-lt.top}}drawCursor(ft){this.cursor&&(ft?(this.cursor.style.left=ft.left+"px",this.cursor.style.top=ft.top+"px",this.cursor.style.height=ft.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(ft){this.view.state.field(dropCursorPos)!=ft&&this.view.dispatch({effects:setDropCursorPos.of(ft)})}},{eventHandlers:{dragover(ft){this.setDropPos(this.view.posAtCoords({x:ft.clientX,y:ft.clientY}))},dragleave(ft){(ft.target==this.view.contentDOM||!this.view.contentDOM.contains(ft.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function dropCursor(){return[dropCursorPos,drawDropCursor]}function iterMatches(ft,lt,dt,vt,Tt){lt.lastIndex=0;for(let Et=ft.iterRange(dt,vt),Ct=dt,Rt;!Et.next().done;Ct+=Et.value.length)if(!Et.lineBreak)for(;Rt=lt.exec(Et.value);)Tt(Ct+Rt.index,Rt)}function matchRanges(ft,lt){let dt=ft.visibleRanges;if(dt.length==1&&dt[0].from==ft.viewport.from&&dt[0].to==ft.viewport.to)return dt;let vt=[];for(let{from:Tt,to:Et}of dt)Tt=Math.max(ft.state.doc.lineAt(Tt).from,Tt-lt),Et=Math.min(ft.state.doc.lineAt(Et).to,Et+lt),vt.length&&vt[vt.length-1].to>=Tt?vt[vt.length-1].to=Et:vt.push({from:Tt,to:Et});return vt}class MatchDecorator{constructor(lt){const{regexp:dt,decoration:vt,decorate:Tt,boundary:Et,maxLength:Ct=1e3}=lt;if(!dt.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=dt,Tt)this.addMatch=(Rt,kt,Dt,Bt)=>Tt(Bt,Dt,Dt+Rt[0].length,Rt,kt);else if(typeof vt=="function")this.addMatch=(Rt,kt,Dt,Bt)=>{let Ft=vt(Rt,kt,Dt);Ft&&Bt(Dt,Dt+Rt[0].length,Ft)};else if(vt)this.addMatch=(Rt,kt,Dt,Bt)=>Bt(Dt,Dt+Rt[0].length,vt);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=Et,this.maxLength=Ct}createDeco(lt){let dt=new RangeSetBuilder,vt=dt.add.bind(dt);for(let{from:Tt,to:Et}of matchRanges(lt,this.maxLength))iterMatches(lt.state.doc,this.regexp,Tt,Et,(Ct,Rt)=>this.addMatch(Rt,lt,Ct,vt));return dt.finish()}updateDeco(lt,dt){let vt=1e9,Tt=-1;return lt.docChanged&&lt.changes.iterChanges((Et,Ct,Rt,kt)=>{kt>lt.view.viewport.from&&Rt<lt.view.viewport.to&&(vt=Math.min(Rt,vt),Tt=Math.max(kt,Tt))}),lt.viewportChanged||Tt-vt>1e3?this.createDeco(lt.view):Tt>-1?this.updateRange(lt.view,dt.map(lt.changes),vt,Tt):dt}updateRange(lt,dt,vt,Tt){for(let Et of lt.visibleRanges){let Ct=Math.max(Et.from,vt),Rt=Math.min(Et.to,Tt);if(Rt>Ct){let kt=lt.state.doc.lineAt(Ct),Dt=kt.to<Rt?lt.state.doc.lineAt(Rt):kt,Bt=Math.max(Et.from,kt.from),Ft=Math.min(Et.to,Dt.to);if(this.boundary){for(;Ct>kt.from;Ct--)if(this.boundary.test(kt.text[Ct-1-kt.from])){Bt=Ct;break}for(;Rt<Dt.to;Rt++)if(this.boundary.test(Dt.text[Rt-Dt.from])){Ft=Rt;break}}let Ut=[],Zt,Kt=(ln,hn,dn)=>Ut.push(dn.range(ln,hn));if(kt==Dt)for(this.regexp.lastIndex=Bt-kt.from;(Zt=this.regexp.exec(kt.text))&&Zt.index<Ft-kt.from;)this.addMatch(Zt,lt,Zt.index+kt.from,Kt);else iterMatches(lt.state.doc,this.regexp,Bt,Ft,(ln,hn)=>this.addMatch(hn,lt,ln,Kt));dt=dt.update({filterFrom:Bt,filterTo:Ft,filter:(ln,hn)=>ln<Bt||hn>Ft,add:Ut})}}return dt}}const UnicodeRegexpSupport=/x/.unicode!=null?"gu":"g",Specials=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,UnicodeRegexpSupport),Names={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let _supportsTabSize=null;function supportsTabSize(){var ft;if(_supportsTabSize==null&&typeof document<"u"&&document.body){let lt=document.body.style;_supportsTabSize=((ft=lt.tabSize)!==null&&ft!==void 0?ft:lt.MozTabSize)!=null}return _supportsTabSize||!1}const specialCharConfig=Facet.define({combine(ft){let lt=combineConfig(ft,{render:null,specialChars:Specials,addSpecialChars:null});return(lt.replaceTabs=!supportsTabSize())&&(lt.specialChars=new RegExp("	|"+lt.specialChars.source,UnicodeRegexpSupport)),lt.addSpecialChars&&(lt.specialChars=new RegExp(lt.specialChars.source+"|"+lt.addSpecialChars.source,UnicodeRegexpSupport)),lt}});function highlightSpecialChars(ft={}){return[specialCharConfig.of(ft),specialCharPlugin()]}let _plugin=null;function specialCharPlugin(){return _plugin||(_plugin=ViewPlugin.fromClass(class{constructor(ft){this.view=ft,this.decorations=Decoration.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(ft.state.facet(specialCharConfig)),this.decorations=this.decorator.createDeco(ft)}makeDecorator(ft){return new MatchDecorator({regexp:ft.specialChars,decoration:(lt,dt,vt)=>{let{doc:Tt}=dt.state,Et=codePointAt(lt[0],0);if(Et==9){let Ct=Tt.lineAt(vt),Rt=dt.state.tabSize,kt=countColumn(Ct.text,Rt,vt-Ct.from);return Decoration.replace({widget:new TabWidget((Rt-kt%Rt)*this.view.defaultCharacterWidth)})}return this.decorationCache[Et]||(this.decorationCache[Et]=Decoration.replace({widget:new SpecialCharWidget(ft,Et)}))},boundary:ft.replaceTabs?void 0:/[^]/})}update(ft){let lt=ft.state.facet(specialCharConfig);ft.startState.facet(specialCharConfig)!=lt?(this.decorator=this.makeDecorator(lt),this.decorations=this.decorator.createDeco(ft.view)):this.decorations=this.decorator.updateDeco(ft,this.decorations)}},{decorations:ft=>ft.decorations}))}const DefaultPlaceholder="•";function placeholder$1(ft){return ft>=32?DefaultPlaceholder:ft==10?"␤":String.fromCharCode(9216+ft)}class SpecialCharWidget extends WidgetType{constructor(lt,dt){super(),this.options=lt,this.code=dt}eq(lt){return lt.code==this.code}toDOM(lt){let dt=placeholder$1(this.code),vt=lt.state.phrase("Control character")+" "+(Names[this.code]||"0x"+this.code.toString(16)),Tt=this.options.render&&this.options.render(this.code,vt,dt);if(Tt)return Tt;let Et=document.createElement("span");return Et.textContent=dt,Et.title=vt,Et.setAttribute("aria-label",vt),Et.className="cm-specialChar",Et}ignoreEvent(){return!1}}class TabWidget extends WidgetType{constructor(lt){super(),this.width=lt}eq(lt){return lt.width==this.width}toDOM(){let lt=document.createElement("span");return lt.textContent="	",lt.className="cm-tab",lt.style.width=this.width+"px",lt}ignoreEvent(){return!1}}function highlightActiveLine(){return activeLineHighlighter}const lineDeco=Decoration.line({class:"cm-activeLine"}),activeLineHighlighter=ViewPlugin.fromClass(class{constructor(ft){this.decorations=this.getDeco(ft)}update(ft){(ft.docChanged||ft.selectionSet)&&(this.decorations=this.getDeco(ft.view))}getDeco(ft){let lt=-1,dt=[];for(let vt of ft.state.selection.ranges){let Tt=ft.lineBlockAt(vt.head);Tt.from>lt&&(dt.push(lineDeco.range(Tt.from)),lt=Tt.from)}return Decoration.set(dt)}},{decorations:ft=>ft.decorations});class Placeholder extends WidgetType{constructor(lt){super(),this.content=lt}toDOM(){let lt=document.createElement("span");return lt.className="cm-placeholder",lt.style.pointerEvents="none",lt.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?lt.setAttribute("aria-label","placeholder "+this.content):lt.setAttribute("aria-hidden","true"),lt}ignoreEvent(){return!1}}function placeholder(ft){return ViewPlugin.fromClass(class{constructor(lt){this.view=lt,this.placeholder=Decoration.set([Decoration.widget({widget:new Placeholder(ft),side:1}).range(0)])}get decorations(){return this.view.state.doc.length?Decoration.none:this.placeholder}},{decorations:lt=>lt.decorations})}const MaxOff=2e3;function rectangleFor(ft,lt,dt){let vt=Math.min(lt.line,dt.line),Tt=Math.max(lt.line,dt.line),Et=[];if(lt.off>MaxOff||dt.off>MaxOff||lt.col<0||dt.col<0){let Ct=Math.min(lt.off,dt.off),Rt=Math.max(lt.off,dt.off);for(let kt=vt;kt<=Tt;kt++){let Dt=ft.doc.line(kt);Dt.length<=Rt&&Et.push(EditorSelection.range(Dt.from+Ct,Dt.to+Rt))}}else{let Ct=Math.min(lt.col,dt.col),Rt=Math.max(lt.col,dt.col);for(let kt=vt;kt<=Tt;kt++){let Dt=ft.doc.line(kt),Bt=findColumn(Dt.text,Ct,ft.tabSize,!0);if(Bt<0)Et.push(EditorSelection.cursor(Dt.to));else{let Ft=findColumn(Dt.text,Rt,ft.tabSize);Et.push(EditorSelection.range(Dt.from+Bt,Dt.from+Ft))}}}return Et}function absoluteColumn(ft,lt){let dt=ft.coordsAtPos(ft.viewport.from);return dt?Math.round(Math.abs((dt.left-lt)/ft.defaultCharacterWidth)):-1}function getPos(ft,lt){let dt=ft.posAtCoords({x:lt.clientX,y:lt.clientY},!1),vt=ft.state.doc.lineAt(dt),Tt=dt-vt.from,Et=Tt>MaxOff?-1:Tt==vt.length?absoluteColumn(ft,lt.clientX):countColumn(vt.text,ft.state.tabSize,dt-vt.from);return{line:vt.number,col:Et,off:Tt}}function rectangleSelectionStyle(ft,lt){let dt=getPos(ft,lt),vt=ft.state.selection;return dt?{update(Tt){if(Tt.docChanged){let Et=Tt.changes.mapPos(Tt.startState.doc.line(dt.line).from),Ct=Tt.state.doc.lineAt(Et);dt={line:Ct.number,col:dt.col,off:Math.min(dt.off,Ct.length)},vt=vt.map(Tt.changes)}},get(Tt,Et,Ct){let Rt=getPos(ft,Tt);if(!Rt)return vt;let kt=rectangleFor(ft.state,dt,Rt);return kt.length?Ct?EditorSelection.create(kt.concat(vt.ranges)):EditorSelection.create(kt):vt}}:null}function rectangularSelection(ft){let lt=(ft==null?void 0:ft.eventFilter)||(dt=>dt.altKey&&dt.button==0);return EditorView.mouseSelectionStyle.of((dt,vt)=>lt(vt)?rectangleSelectionStyle(dt,vt):null)}const keys={Alt:[18,ft=>ft.altKey],Control:[17,ft=>ft.ctrlKey],Shift:[16,ft=>ft.shiftKey],Meta:[91,ft=>ft.metaKey]},showCrosshair={style:"cursor: crosshair"};function crosshairCursor(ft={}){let[lt,dt]=keys[ft.key||"Alt"],vt=ViewPlugin.fromClass(class{constructor(Tt){this.view=Tt,this.isDown=!1}set(Tt){this.isDown!=Tt&&(this.isDown=Tt,this.view.update([]))}},{eventHandlers:{keydown(Tt){this.set(Tt.keyCode==lt||dt(Tt))},keyup(Tt){(Tt.keyCode==lt||!dt(Tt))&&this.set(!1)},mousemove(Tt){this.set(dt(Tt))}}});return[vt,EditorView.contentAttributes.of(Tt=>{var Et;return!((Et=Tt.plugin(vt))===null||Et===void 0)&&Et.isDown?showCrosshair:null})]}const Outside="-10000px";class TooltipViewManager{constructor(lt,dt,vt){this.facet=dt,this.createTooltipView=vt,this.input=lt.state.facet(dt),this.tooltips=this.input.filter(Tt=>Tt),this.tooltipViews=this.tooltips.map(vt)}update(lt){var dt;let vt=lt.state.facet(this.facet),Tt=vt.filter(Ct=>Ct);if(vt===this.input){for(let Ct of this.tooltipViews)Ct.update&&Ct.update(lt);return!1}let Et=[];for(let Ct=0;Ct<Tt.length;Ct++){let Rt=Tt[Ct],kt=-1;if(Rt){for(let Dt=0;Dt<this.tooltips.length;Dt++){let Bt=this.tooltips[Dt];Bt&&Bt.create==Rt.create&&(kt=Dt)}if(kt<0)Et[Ct]=this.createTooltipView(Rt);else{let Dt=Et[Ct]=this.tooltipViews[kt];Dt.update&&Dt.update(lt)}}}for(let Ct of this.tooltipViews)Et.indexOf(Ct)<0&&(Ct.dom.remove(),(dt=Ct.destroy)===null||dt===void 0||dt.call(Ct));return this.input=vt,this.tooltips=Tt,this.tooltipViews=Et,!0}}function windowSpace(ft){let{win:lt}=ft;return{top:0,left:0,bottom:lt.innerHeight,right:lt.innerWidth}}const tooltipConfig=Facet.define({combine:ft=>{var lt,dt,vt;return{position:browser.ios?"absolute":((lt=ft.find(Tt=>Tt.position))===null||lt===void 0?void 0:lt.position)||"fixed",parent:((dt=ft.find(Tt=>Tt.parent))===null||dt===void 0?void 0:dt.parent)||null,tooltipSpace:((vt=ft.find(Tt=>Tt.tooltipSpace))===null||vt===void 0?void 0:vt.tooltipSpace)||windowSpace}}}),knownHeight=new WeakMap,tooltipPlugin=ViewPlugin.fromClass(class{constructor(ft){this.view=ft,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let lt=ft.state.facet(tooltipConfig);this.position=lt.position,this.parent=lt.parent,this.classes=ft.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new TooltipViewManager(ft,showTooltip,dt=>this.createTooltip(dt)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(dt=>{Date.now()>this.lastTransaction-50&&dt.length>0&&dt[dt.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),ft.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let ft of this.manager.tooltipViews)this.intersectionObserver.observe(ft.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(ft){ft.transactions.length&&(this.lastTransaction=Date.now());let lt=this.manager.update(ft);lt&&this.observeIntersection();let dt=lt||ft.geometryChanged,vt=ft.state.facet(tooltipConfig);if(vt.position!=this.position){this.position=vt.position;for(let Tt of this.manager.tooltipViews)Tt.dom.style.position=this.position;dt=!0}if(vt.parent!=this.parent){this.parent&&this.container.remove(),this.parent=vt.parent,this.createContainer();for(let Tt of this.manager.tooltipViews)this.container.appendChild(Tt.dom);dt=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);dt&&this.maybeMeasure()}createTooltip(ft){let lt=ft.create(this.view);if(lt.dom.classList.add("cm-tooltip"),ft.arrow&&!lt.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let dt=document.createElement("div");dt.className="cm-tooltip-arrow",lt.dom.appendChild(dt)}return lt.dom.style.position=this.position,lt.dom.style.top=Outside,this.container.appendChild(lt.dom),lt.mount&&lt.mount(this.view),lt}destroy(){var ft,lt;this.view.win.removeEventListener("resize",this.measureSoon);for(let dt of this.manager.tooltipViews)dt.dom.remove(),(ft=dt.destroy)===null||ft===void 0||ft.call(dt);(lt=this.intersectionObserver)===null||lt===void 0||lt.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let ft=this.view.dom.getBoundingClientRect();return{editor:ft,parent:this.parent?this.container.getBoundingClientRect():ft,pos:this.manager.tooltips.map((lt,dt)=>{let vt=this.manager.tooltipViews[dt];return vt.getCoords?vt.getCoords(lt.pos):this.view.coordsAtPos(lt.pos)}),size:this.manager.tooltipViews.map(({dom:lt})=>lt.getBoundingClientRect()),space:this.view.state.facet(tooltipConfig).tooltipSpace(this.view)}}writeMeasure(ft){var lt;let{editor:dt,space:vt}=ft,Tt=[];for(let Et=0;Et<this.manager.tooltips.length;Et++){let Ct=this.manager.tooltips[Et],Rt=this.manager.tooltipViews[Et],{dom:kt}=Rt,Dt=ft.pos[Et],Bt=ft.size[Et];if(!Dt||Dt.bottom<=Math.max(dt.top,vt.top)||Dt.top>=Math.min(dt.bottom,vt.bottom)||Dt.right<Math.max(dt.left,vt.left)-.1||Dt.left>Math.min(dt.right,vt.right)+.1){kt.style.top=Outside;continue}let Ft=Ct.arrow?Rt.dom.querySelector(".cm-tooltip-arrow"):null,Ut=Ft?7:0,Zt=Bt.right-Bt.left,Kt=(lt=knownHeight.get(Rt))!==null&&lt!==void 0?lt:Bt.bottom-Bt.top,ln=Rt.offset||noOffset,hn=this.view.textDirection==Direction.LTR,dn=Bt.width>vt.right-vt.left?hn?vt.left:vt.right-Bt.width:hn?Math.min(Dt.left-(Ft?14:0)+ln.x,vt.right-Zt):Math.max(vt.left,Dt.left-Zt+(Ft?14:0)-ln.x),pn=!!Ct.above;!Ct.strictSide&&(pn?Dt.top-(Bt.bottom-Bt.top)-ln.y<vt.top:Dt.bottom+(Bt.bottom-Bt.top)+ln.y>vt.bottom)&&pn==vt.bottom-Dt.bottom>Dt.top-vt.top&&(pn=!pn);let mn=(pn?Dt.top-vt.top:vt.bottom-Dt.bottom)-Ut;if(mn<Kt&&Rt.resize!==!1){if(mn<this.view.defaultLineHeight){kt.style.top=Outside;continue}knownHeight.set(Rt,Kt),kt.style.height=(Kt=mn)+"px"}else kt.style.height&&(kt.style.height="");let On=pn?Dt.top-Kt-Ut-ln.y:Dt.bottom+Ut+ln.y,bn=dn+Zt;if(Rt.overlap!==!0)for(let En of Tt)En.left<bn&&En.right>dn&&En.top<On+Kt&&En.bottom>On&&(On=pn?En.top-Kt-2-Ut:En.bottom+Ut+2);this.position=="absolute"?(kt.style.top=On-ft.parent.top+"px",kt.style.left=dn-ft.parent.left+"px"):(kt.style.top=On+"px",kt.style.left=dn+"px"),Ft&&(Ft.style.left=`${Dt.left+(hn?ln.x:-ln.x)-(dn+14-7)}px`),Rt.overlap!==!0&&Tt.push({left:dn,top:On,right:bn,bottom:On+Kt}),kt.classList.toggle("cm-tooltip-above",pn),kt.classList.toggle("cm-tooltip-below",!pn),Rt.positioned&&Rt.positioned(ft.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let ft of this.manager.tooltipViews)ft.dom.style.top=Outside}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),baseTheme$5=EditorView.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),noOffset={x:0,y:0},showTooltip=Facet.define({enables:[tooltipPlugin,baseTheme$5]}),showHoverTooltip=Facet.define();class HoverTooltipHost{constructor(lt){this.view=lt,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new TooltipViewManager(lt,showHoverTooltip,dt=>this.createHostedView(dt))}static create(lt){return new HoverTooltipHost(lt)}createHostedView(lt){let dt=lt.create(this.view);return dt.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(dt.dom),this.mounted&&dt.mount&&dt.mount(this.view),dt}mount(lt){for(let dt of this.manager.tooltipViews)dt.mount&&dt.mount(lt);this.mounted=!0}positioned(lt){for(let dt of this.manager.tooltipViews)dt.positioned&&dt.positioned(lt)}update(lt){this.manager.update(lt)}}const showHoverTooltipHost=showTooltip.compute([showHoverTooltip],ft=>{let lt=ft.facet(showHoverTooltip).filter(dt=>dt);return lt.length===0?null:{pos:Math.min(...lt.map(dt=>dt.pos)),end:Math.max(...lt.filter(dt=>dt.end!=null).map(dt=>dt.end)),create:HoverTooltipHost.create,above:lt[0].above,arrow:lt.some(dt=>dt.arrow)}});class HoverPlugin{constructor(lt,dt,vt,Tt,Et){this.view=lt,this.source=dt,this.field=vt,this.setHover=Tt,this.hoverTime=Et,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:lt.dom,time:0},this.checkHover=this.checkHover.bind(this),lt.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),lt.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let lt=Date.now()-this.lastMove.time;lt<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-lt):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:lt}=this,dt=this.view.contentDOM.contains(lt.target)?this.view.posAtCoords(lt):null;if(dt==null)return;let vt=this.view.coordsAtPos(dt);if(vt==null||lt.y<vt.top||lt.y>vt.bottom||lt.x<vt.left-this.view.defaultCharacterWidth||lt.x>vt.right+this.view.defaultCharacterWidth)return;let Tt=this.view.bidiSpans(this.view.state.doc.lineAt(dt)).find(Rt=>Rt.from<=dt&&Rt.to>=dt),Et=Tt&&Tt.dir==Direction.RTL?-1:1,Ct=this.source(this.view,dt,lt.x<vt.left?-Et:Et);if(Ct!=null&&Ct.then){let Rt=this.pending={pos:dt};Ct.then(kt=>{this.pending==Rt&&(this.pending=null,kt&&this.view.dispatch({effects:this.setHover.of(kt)}))},kt=>logException(this.view.state,kt,"hover tooltip"))}else Ct&&this.view.dispatch({effects:this.setHover.of(Ct)})}mousemove(lt){var dt;this.lastMove={x:lt.clientX,y:lt.clientY,target:lt.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let vt=this.active;if(vt&&!isInTooltip(this.lastMove.target)||this.pending){let{pos:Tt}=vt||this.pending,Et=(dt=vt==null?void 0:vt.end)!==null&&dt!==void 0?dt:Tt;(Tt==Et?this.view.posAtCoords(this.lastMove)!=Tt:!isOverRange(this.view,Tt,Et,lt.clientX,lt.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(lt){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!isInTooltip(lt.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function isInTooltip(ft){for(let lt=ft;lt;lt=lt.parentNode)if(lt.nodeType==1&&lt.classList.contains("cm-tooltip"))return!0;return!1}function isOverRange(ft,lt,dt,vt,Tt,Et){let Ct=document.createRange(),Rt=ft.domAtPos(lt),kt=ft.domAtPos(dt);Ct.setEnd(kt.node,kt.offset),Ct.setStart(Rt.node,Rt.offset);let Dt=Ct.getClientRects();Ct.detach();for(let Bt=0;Bt<Dt.length;Bt++){let Ft=Dt[Bt];if(Math.max(Ft.top-Tt,Tt-Ft.bottom,Ft.left-vt,vt-Ft.right)<=Et)return!0}return!1}function hoverTooltip(ft,lt={}){let dt=StateEffect.define(),vt=StateField.define({create(){return null},update(Tt,Et){if(Tt&&(lt.hideOnChange&&(Et.docChanged||Et.selection)||lt.hideOn&&lt.hideOn(Et,Tt)))return null;if(Tt&&Et.docChanged){let Ct=Et.changes.mapPos(Tt.pos,-1,MapMode.TrackDel);if(Ct==null)return null;let Rt=Object.assign(Object.create(null),Tt);Rt.pos=Ct,Tt.end!=null&&(Rt.end=Et.changes.mapPos(Tt.end)),Tt=Rt}for(let Ct of Et.effects)Ct.is(dt)&&(Tt=Ct.value),Ct.is(closeHoverTooltipEffect)&&(Tt=null);return Tt},provide:Tt=>showHoverTooltip.from(Tt)});return[vt,ViewPlugin.define(Tt=>new HoverPlugin(Tt,ft,vt,dt,lt.hoverTime||300)),showHoverTooltipHost]}function getTooltip(ft,lt){let dt=ft.plugin(tooltipPlugin);if(!dt)return null;let vt=dt.manager.tooltips.indexOf(lt);return vt<0?null:dt.manager.tooltipViews[vt]}const closeHoverTooltipEffect=StateEffect.define(),panelConfig=Facet.define({combine(ft){let lt,dt;for(let vt of ft)lt=lt||vt.topContainer,dt=dt||vt.bottomContainer;return{topContainer:lt,bottomContainer:dt}}});function getPanel(ft,lt){let dt=ft.plugin(panelPlugin),vt=dt?dt.specs.indexOf(lt):-1;return vt>-1?dt.panels[vt]:null}const panelPlugin=ViewPlugin.fromClass(class{constructor(ft){this.input=ft.state.facet(showPanel),this.specs=this.input.filter(dt=>dt),this.panels=this.specs.map(dt=>dt(ft));let lt=ft.state.facet(panelConfig);this.top=new PanelGroup(ft,!0,lt.topContainer),this.bottom=new PanelGroup(ft,!1,lt.bottomContainer),this.top.sync(this.panels.filter(dt=>dt.top)),this.bottom.sync(this.panels.filter(dt=>!dt.top));for(let dt of this.panels)dt.dom.classList.add("cm-panel"),dt.mount&&dt.mount()}update(ft){let lt=ft.state.facet(panelConfig);this.top.container!=lt.topContainer&&(this.top.sync([]),this.top=new PanelGroup(ft.view,!0,lt.topContainer)),this.bottom.container!=lt.bottomContainer&&(this.bottom.sync([]),this.bottom=new PanelGroup(ft.view,!1,lt.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let dt=ft.state.facet(showPanel);if(dt!=this.input){let vt=dt.filter(kt=>kt),Tt=[],Et=[],Ct=[],Rt=[];for(let kt of vt){let Dt=this.specs.indexOf(kt),Bt;Dt<0?(Bt=kt(ft.view),Rt.push(Bt)):(Bt=this.panels[Dt],Bt.update&&Bt.update(ft)),Tt.push(Bt),(Bt.top?Et:Ct).push(Bt)}this.specs=vt,this.panels=Tt,this.top.sync(Et),this.bottom.sync(Ct);for(let kt of Rt)kt.dom.classList.add("cm-panel"),kt.mount&&kt.mount()}else for(let vt of this.panels)vt.update&&vt.update(ft)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:ft=>EditorView.scrollMargins.of(lt=>{let dt=lt.plugin(ft);return dt&&{top:dt.top.scrollMargin(),bottom:dt.bottom.scrollMargin()}})});class PanelGroup{constructor(lt,dt,vt){this.view=lt,this.top=dt,this.container=vt,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(lt){for(let dt of this.panels)dt.destroy&&lt.indexOf(dt)<0&&dt.destroy();this.panels=lt,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let dt=this.container||this.view.dom;dt.insertBefore(this.dom,this.top?dt.firstChild:null)}let lt=this.dom.firstChild;for(let dt of this.panels)if(dt.dom.parentNode==this.dom){for(;lt!=dt.dom;)lt=rm(lt);lt=lt.nextSibling}else this.dom.insertBefore(dt.dom,lt);for(;lt;)lt=rm(lt)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let lt of this.classes.split(" "))lt&&this.container.classList.remove(lt);for(let lt of(this.classes=this.view.themeClasses).split(" "))lt&&this.container.classList.add(lt)}}}function rm(ft){let lt=ft.nextSibling;return ft.remove(),lt}const showPanel=Facet.define({enables:panelPlugin});class GutterMarker extends RangeValue{compare(lt){return this==lt||this.constructor==lt.constructor&&this.eq(lt)}eq(lt){return!1}destroy(lt){}}GutterMarker.prototype.elementClass="";GutterMarker.prototype.toDOM=void 0;GutterMarker.prototype.mapMode=MapMode.TrackBefore;GutterMarker.prototype.startSide=GutterMarker.prototype.endSide=-1;GutterMarker.prototype.point=!0;const gutterLineClass=Facet.define(),defaults$1={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>RangeSet.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},activeGutters=Facet.define();function gutter(ft){return[gutters(),activeGutters.of(Object.assign(Object.assign({},defaults$1),ft))]}const unfixGutters=Facet.define({combine:ft=>ft.some(lt=>lt)});function gutters(ft){let lt=[gutterView];return ft&&ft.fixed===!1&&lt.push(unfixGutters.of(!0)),lt}const gutterView=ViewPlugin.fromClass(class{constructor(ft){this.view=ft,this.prevViewport=ft.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=ft.state.facet(activeGutters).map(lt=>new SingleGutterView(ft,lt));for(let lt of this.gutters)this.dom.appendChild(lt.dom);this.fixed=!ft.state.facet(unfixGutters),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),ft.scrollDOM.insertBefore(this.dom,ft.contentDOM)}update(ft){if(this.updateGutters(ft)){let lt=this.prevViewport,dt=ft.view.viewport,vt=Math.min(lt.to,dt.to)-Math.max(lt.from,dt.from);this.syncGutters(vt<(dt.to-dt.from)*.8)}ft.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(unfixGutters)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=ft.view.viewport}syncGutters(ft){let lt=this.dom.nextSibling;ft&&this.dom.remove();let dt=RangeSet.iter(this.view.state.facet(gutterLineClass),this.view.viewport.from),vt=[],Tt=this.gutters.map(Et=>new UpdateContext(Et,this.view.viewport,-this.view.documentPadding.top));for(let Et of this.view.viewportLineBlocks){let Ct;if(Array.isArray(Et.type)){for(let Rt of Et.type)if(Rt.type==BlockType.Text){Ct=Rt;break}}else Ct=Et.type==BlockType.Text?Et:void 0;if(Ct){vt.length&&(vt=[]),advanceCursor(dt,vt,Et.from);for(let Rt of Tt)Rt.line(this.view,Ct,vt)}}for(let Et of Tt)Et.finish();ft&&this.view.scrollDOM.insertBefore(this.dom,lt)}updateGutters(ft){let lt=ft.startState.facet(activeGutters),dt=ft.state.facet(activeGutters),vt=ft.docChanged||ft.heightChanged||ft.viewportChanged||!RangeSet.eq(ft.startState.facet(gutterLineClass),ft.state.facet(gutterLineClass),ft.view.viewport.from,ft.view.viewport.to);if(lt==dt)for(let Tt of this.gutters)Tt.update(ft)&&(vt=!0);else{vt=!0;let Tt=[];for(let Et of dt){let Ct=lt.indexOf(Et);Ct<0?Tt.push(new SingleGutterView(this.view,Et)):(this.gutters[Ct].update(ft),Tt.push(this.gutters[Ct]))}for(let Et of this.gutters)Et.dom.remove(),Tt.indexOf(Et)<0&&Et.destroy();for(let Et of Tt)this.dom.appendChild(Et.dom);this.gutters=Tt}return vt}destroy(){for(let ft of this.gutters)ft.destroy();this.dom.remove()}},{provide:ft=>EditorView.scrollMargins.of(lt=>{let dt=lt.plugin(ft);return!dt||dt.gutters.length==0||!dt.fixed?null:lt.textDirection==Direction.LTR?{left:dt.dom.offsetWidth}:{right:dt.dom.offsetWidth}})});function asArray(ft){return Array.isArray(ft)?ft:[ft]}function advanceCursor(ft,lt,dt){for(;ft.value&&ft.from<=dt;)ft.from==dt&&lt.push(ft.value),ft.next()}class UpdateContext{constructor(lt,dt,vt){this.gutter=lt,this.height=vt,this.i=0,this.cursor=RangeSet.iter(lt.markers,dt.from)}line(lt,dt,vt){let Tt=[];advanceCursor(this.cursor,Tt,dt.from),vt.length&&(Tt=Tt.concat(vt));let Et=this.gutter.config.lineMarker(lt,dt,Tt);Et&&Tt.unshift(Et);let Ct=this.gutter;if(Tt.length==0&&!Ct.config.renderEmptyElements)return;let Rt=dt.top-this.height;if(this.i==Ct.elements.length){let kt=new GutterElement(lt,dt.height,Rt,Tt);Ct.elements.push(kt),Ct.dom.appendChild(kt.dom)}else Ct.elements[this.i].update(lt,dt.height,Rt,Tt);this.height=dt.bottom,this.i++}finish(){let lt=this.gutter;for(;lt.elements.length>this.i;){let dt=lt.elements.pop();lt.dom.removeChild(dt.dom),dt.destroy()}}}class SingleGutterView{constructor(lt,dt){this.view=lt,this.config=dt,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let vt in dt.domEventHandlers)this.dom.addEventListener(vt,Tt=>{let Et=Tt.target,Ct;if(Et!=this.dom&&this.dom.contains(Et)){for(;Et.parentNode!=this.dom;)Et=Et.parentNode;let kt=Et.getBoundingClientRect();Ct=(kt.top+kt.bottom)/2}else Ct=Tt.clientY;let Rt=lt.lineBlockAtHeight(Ct-lt.documentTop);dt.domEventHandlers[vt](lt,Rt,Tt)&&Tt.preventDefault()});this.markers=asArray(dt.markers(lt)),dt.initialSpacer&&(this.spacer=new GutterElement(lt,0,0,[dt.initialSpacer(lt)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(lt){let dt=this.markers;if(this.markers=asArray(this.config.markers(lt.view)),this.spacer&&this.config.updateSpacer){let Tt=this.config.updateSpacer(this.spacer.markers[0],lt);Tt!=this.spacer.markers[0]&&this.spacer.update(lt.view,0,0,[Tt])}let vt=lt.view.viewport;return!RangeSet.eq(this.markers,dt,vt.from,vt.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(lt):!1)}destroy(){for(let lt of this.elements)lt.destroy()}}class GutterElement{constructor(lt,dt,vt,Tt){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(lt,dt,vt,Tt)}update(lt,dt,vt,Tt){this.height!=dt&&(this.dom.style.height=(this.height=dt)+"px"),this.above!=vt&&(this.dom.style.marginTop=(this.above=vt)?vt+"px":""),sameMarkers(this.markers,Tt)||this.setMarkers(lt,Tt)}setMarkers(lt,dt){let vt="cm-gutterElement",Tt=this.dom.firstChild;for(let Et=0,Ct=0;;){let Rt=Ct,kt=Et<dt.length?dt[Et++]:null,Dt=!1;if(kt){let Bt=kt.elementClass;Bt&&(vt+=" "+Bt);for(let Ft=Ct;Ft<this.markers.length;Ft++)if(this.markers[Ft].compare(kt)){Rt=Ft,Dt=!0;break}}else Rt=this.markers.length;for(;Ct<Rt;){let Bt=this.markers[Ct++];if(Bt.toDOM){Bt.destroy(Tt);let Ft=Tt.nextSibling;Tt.remove(),Tt=Ft}}if(!kt)break;kt.toDOM&&(Dt?Tt=Tt.nextSibling:this.dom.insertBefore(kt.toDOM(lt),Tt)),Dt&&Ct++}this.dom.className=vt,this.markers=dt}destroy(){this.setMarkers(null,[])}}function sameMarkers(ft,lt){if(ft.length!=lt.length)return!1;for(let dt=0;dt<ft.length;dt++)if(!ft[dt].compare(lt[dt]))return!1;return!0}const lineNumberMarkers=Facet.define(),lineNumberConfig=Facet.define({combine(ft){return combineConfig(ft,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(lt,dt){let vt=Object.assign({},lt);for(let Tt in dt){let Et=vt[Tt],Ct=dt[Tt];vt[Tt]=Et?(Rt,kt,Dt)=>Et(Rt,kt,Dt)||Ct(Rt,kt,Dt):Ct}return vt}})}});class NumberMarker extends GutterMarker{constructor(lt){super(),this.number=lt}eq(lt){return this.number==lt.number}toDOM(){return document.createTextNode(this.number)}}function formatNumber(ft,lt){return ft.state.facet(lineNumberConfig).formatNumber(lt,ft.state)}const lineNumberGutter=activeGutters.compute([lineNumberConfig],ft=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(lt){return lt.state.facet(lineNumberMarkers)},lineMarker(lt,dt,vt){return vt.some(Tt=>Tt.toDOM)?null:new NumberMarker(formatNumber(lt,lt.state.doc.lineAt(dt.from).number))},lineMarkerChange:lt=>lt.startState.facet(lineNumberConfig)!=lt.state.facet(lineNumberConfig),initialSpacer(lt){return new NumberMarker(formatNumber(lt,maxLineNumber(lt.state.doc.lines)))},updateSpacer(lt,dt){let vt=formatNumber(dt.view,maxLineNumber(dt.view.state.doc.lines));return vt==lt.number?lt:new NumberMarker(vt)},domEventHandlers:ft.facet(lineNumberConfig).domEventHandlers}));function lineNumbers(ft={}){return[lineNumberConfig.of(ft),gutters(),lineNumberGutter]}function maxLineNumber(ft){let lt=9;for(;lt<ft;)lt=lt*10+9;return lt}const activeLineGutterMarker=new class extends GutterMarker{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},activeLineGutterHighlighter=gutterLineClass.compute(["selection"],ft=>{let lt=[],dt=-1;for(let vt of ft.selection.ranges){let Tt=ft.doc.lineAt(vt.head).from;Tt>dt&&(dt=Tt,lt.push(activeLineGutterMarker.range(Tt)))}return RangeSet.of(lt)});function highlightActiveLineGutter(){return activeLineGutterHighlighter}var _a;const languageDataProp=new NodeProp;function defineLanguageFacet(ft){return Facet.define({combine:ft?lt=>lt.concat(ft):void 0})}const sublanguageProp=new NodeProp;class Language{constructor(lt,dt,vt=[],Tt=""){this.data=lt,this.name=Tt,EditorState.prototype.hasOwnProperty("tree")||Object.defineProperty(EditorState.prototype,"tree",{get(){return syntaxTree(this)}}),this.parser=dt,this.extension=[language.of(this),EditorState.languageData.of((Et,Ct,Rt)=>{let kt=topNodeAt(Et,Ct,Rt),Dt=kt.type.prop(languageDataProp);if(!Dt)return[];let Bt=Et.facet(Dt),Ft=kt.type.prop(sublanguageProp);if(Ft){let Ut=kt.resolve(Ct-kt.from,Rt);for(let Zt of Ft)if(Zt.test(Ut,Et)){let Kt=Et.facet(Zt.facet);return Zt.type=="replace"?Kt:Kt.concat(Bt)}}return Bt})].concat(vt)}isActiveAt(lt,dt,vt=-1){return topNodeAt(lt,dt,vt).type.prop(languageDataProp)==this.data}findRegions(lt){let dt=lt.facet(language);if((dt==null?void 0:dt.data)==this.data)return[{from:0,to:lt.doc.length}];if(!dt||!dt.allowsNesting)return[];let vt=[],Tt=(Et,Ct)=>{if(Et.prop(languageDataProp)==this.data){vt.push({from:Ct,to:Ct+Et.length});return}let Rt=Et.prop(NodeProp.mounted);if(Rt){if(Rt.tree.prop(languageDataProp)==this.data){if(Rt.overlay)for(let kt of Rt.overlay)vt.push({from:kt.from+Ct,to:kt.to+Ct});else vt.push({from:Ct,to:Ct+Et.length});return}else if(Rt.overlay){let kt=vt.length;if(Tt(Rt.tree,Rt.overlay[0].from+Ct),vt.length>kt)return}}for(let kt=0;kt<Et.children.length;kt++){let Dt=Et.children[kt];Dt instanceof Tree&&Tt(Dt,Et.positions[kt]+Ct)}};return Tt(syntaxTree(lt),0),vt}get allowsNesting(){return!0}}Language.setState=StateEffect.define();function topNodeAt(ft,lt,dt){let vt=ft.facet(language),Tt=syntaxTree(ft).topNode;if(!vt||vt.allowsNesting)for(let Et=Tt;Et;Et=Et.enter(lt,dt,IterMode.ExcludeBuffers))Et.type.isTop&&(Tt=Et);return Tt}class LRLanguage extends Language{constructor(lt,dt,vt){super(lt,dt,[],vt),this.parser=dt}static define(lt){let dt=defineLanguageFacet(lt.languageData);return new LRLanguage(dt,lt.parser.configure({props:[languageDataProp.add(vt=>vt.isTop?dt:void 0)]}),lt.name)}configure(lt,dt){return new LRLanguage(this.data,this.parser.configure(lt),dt||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function syntaxTree(ft){let lt=ft.field(Language.state,!1);return lt?lt.tree:Tree.empty}class DocInput{constructor(lt){this.doc=lt,this.cursorPos=0,this.string="",this.cursor=lt.iter()}get length(){return this.doc.length}syncTo(lt){return this.string=this.cursor.next(lt-this.cursorPos).value,this.cursorPos=lt+this.string.length,this.cursorPos-this.string.length}chunk(lt){return this.syncTo(lt),this.string}get lineChunks(){return!0}read(lt,dt){let vt=this.cursorPos-this.string.length;return lt<vt||dt>=this.cursorPos?this.doc.sliceString(lt,dt):this.string.slice(lt-vt,dt-vt)}}let currentContext=null;class ParseContext{constructor(lt,dt,vt=[],Tt,Et,Ct,Rt,kt){this.parser=lt,this.state=dt,this.fragments=vt,this.tree=Tt,this.treeLen=Et,this.viewport=Ct,this.skipped=Rt,this.scheduleOn=kt,this.parse=null,this.tempSkipped=[]}static create(lt,dt,vt){return new ParseContext(lt,dt,[],Tree.empty,0,vt,[],null)}startParse(){return this.parser.startParse(new DocInput(this.state.doc),this.fragments)}work(lt,dt){return dt!=null&&dt>=this.state.doc.length&&(dt=void 0),this.tree!=Tree.empty&&this.isDone(dt??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var vt;if(typeof lt=="number"){let Tt=Date.now()+lt;lt=()=>Date.now()>Tt}for(this.parse||(this.parse=this.startParse()),dt!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>dt)&&dt<this.state.doc.length&&this.parse.stopAt(dt);;){let Tt=this.parse.advance();if(Tt)if(this.fragments=this.withoutTempSkipped(TreeFragment.addTree(Tt,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(vt=this.parse.stoppedAt)!==null&&vt!==void 0?vt:this.state.doc.length,this.tree=Tt,this.parse=null,this.treeLen<(dt??this.state.doc.length))this.parse=this.startParse();else return!0;if(lt())return!1}})}takeTree(){let lt,dt;this.parse&&(lt=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>lt)&&this.parse.stopAt(lt),this.withContext(()=>{for(;!(dt=this.parse.advance()););}),this.treeLen=lt,this.tree=dt,this.fragments=this.withoutTempSkipped(TreeFragment.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(lt){let dt=currentContext;currentContext=this;try{return lt()}finally{currentContext=dt}}withoutTempSkipped(lt){for(let dt;dt=this.tempSkipped.pop();)lt=cutFragments(lt,dt.from,dt.to);return lt}changes(lt,dt){let{fragments:vt,tree:Tt,treeLen:Et,viewport:Ct,skipped:Rt}=this;if(this.takeTree(),!lt.empty){let kt=[];if(lt.iterChangedRanges((Dt,Bt,Ft,Ut)=>kt.push({fromA:Dt,toA:Bt,fromB:Ft,toB:Ut})),vt=TreeFragment.applyChanges(vt,kt),Tt=Tree.empty,Et=0,Ct={from:lt.mapPos(Ct.from,-1),to:lt.mapPos(Ct.to,1)},this.skipped.length){Rt=[];for(let Dt of this.skipped){let Bt=lt.mapPos(Dt.from,1),Ft=lt.mapPos(Dt.to,-1);Bt<Ft&&Rt.push({from:Bt,to:Ft})}}}return new ParseContext(this.parser,dt,vt,Tt,Et,Ct,Rt,this.scheduleOn)}updateViewport(lt){if(this.viewport.from==lt.from&&this.viewport.to==lt.to)return!1;this.viewport=lt;let dt=this.skipped.length;for(let vt=0;vt<this.skipped.length;vt++){let{from:Tt,to:Et}=this.skipped[vt];Tt<lt.to&&Et>lt.from&&(this.fragments=cutFragments(this.fragments,Tt,Et),this.skipped.splice(vt--,1))}return this.skipped.length>=dt?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(lt,dt){this.skipped.push({from:lt,to:dt})}static getSkippingParser(lt){return new class extends Parser{createParse(dt,vt,Tt){let Et=Tt[0].from,Ct=Tt[Tt.length-1].to;return{parsedPos:Et,advance(){let kt=currentContext;if(kt){for(let Dt of Tt)kt.tempSkipped.push(Dt);lt&&(kt.scheduleOn=kt.scheduleOn?Promise.all([kt.scheduleOn,lt]):lt)}return this.parsedPos=Ct,new Tree(NodeType.none,[],[],Ct-Et)},stoppedAt:null,stopAt(){}}}}}isDone(lt){lt=Math.min(lt,this.state.doc.length);let dt=this.fragments;return this.treeLen>=lt&&dt.length&&dt[0].from==0&&dt[0].to>=lt}static get(){return currentContext}}function cutFragments(ft,lt,dt){return TreeFragment.applyChanges(ft,[{fromA:lt,toA:dt,fromB:lt,toB:dt}])}class LanguageState{constructor(lt){this.context=lt,this.tree=lt.tree}apply(lt){if(!lt.docChanged&&this.tree==this.context.tree)return this;let dt=this.context.changes(lt.changes,lt.state),vt=this.context.treeLen==lt.startState.doc.length?void 0:Math.max(lt.changes.mapPos(this.context.treeLen),dt.viewport.to);return dt.work(20,vt)||dt.takeTree(),new LanguageState(dt)}static init(lt){let dt=Math.min(3e3,lt.doc.length),vt=ParseContext.create(lt.facet(language).parser,lt,{from:0,to:dt});return vt.work(20,dt)||vt.takeTree(),new LanguageState(vt)}}Language.state=StateField.define({create:LanguageState.init,update(ft,lt){for(let dt of lt.effects)if(dt.is(Language.setState))return dt.value;return lt.startState.facet(language)!=lt.state.facet(language)?LanguageState.init(lt.state):ft.apply(lt)}});let requestIdle=ft=>{let lt=setTimeout(()=>ft(),500);return()=>clearTimeout(lt)};typeof requestIdleCallback<"u"&&(requestIdle=ft=>{let lt=-1,dt=setTimeout(()=>{lt=requestIdleCallback(ft,{timeout:500-100})},100);return()=>lt<0?clearTimeout(dt):cancelIdleCallback(lt)});const isInputPending=typeof navigator<"u"&&(!((_a=navigator.scheduling)===null||_a===void 0)&&_a.isInputPending)?()=>navigator.scheduling.isInputPending():null,parseWorker=ViewPlugin.fromClass(class{constructor(lt){this.view=lt,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(lt){let dt=this.view.state.field(Language.state).context;(dt.updateViewport(lt.view.viewport)||this.view.viewport.to>dt.treeLen)&&this.scheduleWork(),lt.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(dt)}scheduleWork(){if(this.working)return;let{state:lt}=this.view,dt=lt.field(Language.state);(dt.tree!=dt.context.tree||!dt.context.isDone(lt.doc.length))&&(this.working=requestIdle(this.work))}work(lt){this.working=null;let dt=Date.now();if(this.chunkEnd<dt&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=dt+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:vt,viewport:{to:Tt}}=this.view,Et=vt.field(Language.state);if(Et.tree==Et.context.tree&&Et.context.isDone(Tt+1e5))return;let Ct=Date.now()+Math.min(this.chunkBudget,100,lt&&!isInputPending?Math.max(25,lt.timeRemaining()-5):1e9),Rt=Et.context.treeLen<Tt&&vt.doc.length>Tt+1e3,kt=Et.context.work(()=>isInputPending&&isInputPending()||Date.now()>Ct,Tt+(Rt?0:1e5));this.chunkBudget-=Date.now()-dt,(kt||this.chunkBudget<=0)&&(Et.context.takeTree(),this.view.dispatch({effects:Language.setState.of(new LanguageState(Et.context))})),this.chunkBudget>0&&!(kt&&!Rt)&&this.scheduleWork(),this.checkAsyncSchedule(Et.context)}checkAsyncSchedule(lt){lt.scheduleOn&&(this.workScheduled++,lt.scheduleOn.then(()=>this.scheduleWork()).catch(dt=>logException(this.view.state,dt)).then(()=>this.workScheduled--),lt.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),language=Facet.define({combine(ft){return ft.length?ft[0]:null},enables:ft=>[Language.state,parseWorker,EditorView.contentAttributes.compute([ft],lt=>{let dt=lt.facet(ft);return dt&&dt.name?{"data-language":dt.name}:{}})]});class LanguageSupport{constructor(lt,dt=[]){this.language=lt,this.support=dt,this.extension=[lt,dt]}}const indentService=Facet.define(),indentUnit=Facet.define({combine:ft=>{if(!ft.length)return"  ";let lt=ft[0];if(!lt||/\S/.test(lt)||Array.from(lt).some(dt=>dt!=lt[0]))throw new Error("Invalid indent unit: "+JSON.stringify(ft[0]));return lt}});function getIndentUnit(ft){let lt=ft.facet(indentUnit);return lt.charCodeAt(0)==9?ft.tabSize*lt.length:lt.length}function indentString(ft,lt){let dt="",vt=ft.tabSize,Tt=ft.facet(indentUnit)[0];if(Tt=="	"){for(;lt>=vt;)dt+="	",lt-=vt;Tt=" "}for(let Et=0;Et<lt;Et++)dt+=Tt;return dt}function getIndentation(ft,lt){ft instanceof EditorState&&(ft=new IndentContext(ft));for(let vt of ft.state.facet(indentService)){let Tt=vt(ft,lt);if(Tt!==void 0)return Tt}let dt=syntaxTree(ft.state);return dt?syntaxIndentation(ft,dt,lt):null}class IndentContext{constructor(lt,dt={}){this.state=lt,this.options=dt,this.unit=getIndentUnit(lt)}lineAt(lt,dt=1){let vt=this.state.doc.lineAt(lt),{simulateBreak:Tt,simulateDoubleBreak:Et}=this.options;return Tt!=null&&Tt>=vt.from&&Tt<=vt.to?Et&&Tt==lt?{text:"",from:lt}:(dt<0?Tt<lt:Tt<=lt)?{text:vt.text.slice(Tt-vt.from),from:Tt}:{text:vt.text.slice(0,Tt-vt.from),from:vt.from}:vt}textAfterPos(lt,dt=1){if(this.options.simulateDoubleBreak&&lt==this.options.simulateBreak)return"";let{text:vt,from:Tt}=this.lineAt(lt,dt);return vt.slice(lt-Tt,Math.min(vt.length,lt+100-Tt))}column(lt,dt=1){let{text:vt,from:Tt}=this.lineAt(lt,dt),Et=this.countColumn(vt,lt-Tt),Ct=this.options.overrideIndentation?this.options.overrideIndentation(Tt):-1;return Ct>-1&&(Et+=Ct-this.countColumn(vt,vt.search(/\S|$/))),Et}countColumn(lt,dt=lt.length){return countColumn(lt,this.state.tabSize,dt)}lineIndent(lt,dt=1){let{text:vt,from:Tt}=this.lineAt(lt,dt),Et=this.options.overrideIndentation;if(Et){let Ct=Et(Tt);if(Ct>-1)return Ct}return this.countColumn(vt,vt.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const indentNodeProp=new NodeProp;function syntaxIndentation(ft,lt,dt){return indentFrom(lt.resolveInner(dt).enterUnfinishedNodesBefore(dt),dt,ft)}function ignoreClosed(ft){return ft.pos==ft.options.simulateBreak&&ft.options.simulateDoubleBreak}function indentStrategy(ft){let lt=ft.type.prop(indentNodeProp);if(lt)return lt;let dt=ft.firstChild,vt;if(dt&&(vt=dt.type.prop(NodeProp.closedBy))){let Tt=ft.lastChild,Et=Tt&&vt.indexOf(Tt.name)>-1;return Ct=>delimitedStrategy(Ct,!0,1,void 0,Et&&!ignoreClosed(Ct)?Tt.from:void 0)}return ft.parent==null?topIndent:null}function indentFrom(ft,lt,dt){for(;ft;ft=ft.parent){let vt=indentStrategy(ft);if(vt)return vt(TreeIndentContext.create(dt,lt,ft))}return null}function topIndent(){return 0}class TreeIndentContext extends IndentContext{constructor(lt,dt,vt){super(lt.state,lt.options),this.base=lt,this.pos=dt,this.node=vt}static create(lt,dt,vt){return new TreeIndentContext(lt,dt,vt)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let lt=this.state.doc.lineAt(this.node.from);for(;;){let dt=this.node.resolve(lt.from);for(;dt.parent&&dt.parent.from==dt.from;)dt=dt.parent;if(isParent(dt,this.node))break;lt=this.state.doc.lineAt(dt.from)}return this.lineIndent(lt.from)}continue(){let lt=this.node.parent;return lt?indentFrom(lt,this.pos,this.base):0}}function isParent(ft,lt){for(let dt=lt;dt;dt=dt.parent)if(ft==dt)return!0;return!1}function bracketedAligned(ft){let lt=ft.node,dt=lt.childAfter(lt.from),vt=lt.lastChild;if(!dt)return null;let Tt=ft.options.simulateBreak,Et=ft.state.doc.lineAt(dt.from),Ct=Tt==null||Tt<=Et.from?Et.to:Math.min(Et.to,Tt);for(let Rt=dt.to;;){let kt=lt.childAfter(Rt);if(!kt||kt==vt)return null;if(!kt.type.isSkipped)return kt.from<Ct?dt:null;Rt=kt.to}}function delimitedIndent({closing:ft,align:lt=!0,units:dt=1}){return vt=>delimitedStrategy(vt,lt,dt,ft)}function delimitedStrategy(ft,lt,dt,vt,Tt){let Et=ft.textAfter,Ct=Et.match(/^\s*/)[0].length,Rt=vt&&Et.slice(Ct,Ct+vt.length)==vt||Tt==ft.pos+Ct,kt=lt?bracketedAligned(ft):null;return kt?Rt?ft.column(kt.from):ft.column(kt.to):ft.baseIndent+(Rt?0:ft.unit*dt)}const flatIndent=ft=>ft.baseIndent;function continuedIndent({except:ft,units:lt=1}={}){return dt=>{let vt=ft&&ft.test(dt.textAfter);return dt.baseIndent+(vt?0:lt*dt.unit)}}const DontIndentBeyond=200;function indentOnInput(){return EditorState.transactionFilter.of(ft=>{if(!ft.docChanged||!ft.isUserEvent("input.type")&&!ft.isUserEvent("input.complete"))return ft;let lt=ft.startState.languageDataAt("indentOnInput",ft.startState.selection.main.head);if(!lt.length)return ft;let dt=ft.newDoc,{head:vt}=ft.newSelection.main,Tt=dt.lineAt(vt);if(vt>Tt.from+DontIndentBeyond)return ft;let Et=dt.sliceString(Tt.from,vt);if(!lt.some(Dt=>Dt.test(Et)))return ft;let{state:Ct}=ft,Rt=-1,kt=[];for(let{head:Dt}of Ct.selection.ranges){let Bt=Ct.doc.lineAt(Dt);if(Bt.from==Rt)continue;Rt=Bt.from;let Ft=getIndentation(Ct,Bt.from);if(Ft==null)continue;let Ut=/^\s*/.exec(Bt.text)[0],Zt=indentString(Ct,Ft);Ut!=Zt&&kt.push({from:Bt.from,to:Bt.from+Ut.length,insert:Zt})}return kt.length?[ft,{changes:kt,sequential:!0}]:ft})}const foldService=Facet.define(),foldNodeProp=new NodeProp;function foldInside(ft){let lt=ft.firstChild,dt=ft.lastChild;return lt&&lt.to<dt.from?{from:lt.to,to:dt.type.isError?ft.to:dt.from}:null}function syntaxFolding(ft,lt,dt){let vt=syntaxTree(ft);if(vt.length<dt)return null;let Tt=vt.resolveInner(dt,1),Et=null;for(let Ct=Tt;Ct;Ct=Ct.parent){if(Ct.to<=dt||Ct.from>dt)continue;if(Et&&Ct.from<lt)break;let Rt=Ct.type.prop(foldNodeProp);if(Rt&&(Ct.to<vt.length-50||vt.length==ft.doc.length||!isUnfinished(Ct))){let kt=Rt(Ct,ft);kt&&kt.from<=dt&&kt.from>=lt&&kt.to>dt&&(Et=kt)}}return Et}function isUnfinished(ft){let lt=ft.lastChild;return lt&&lt.to==ft.to&&lt.type.isError}function foldable(ft,lt,dt){for(let vt of ft.facet(foldService)){let Tt=vt(ft,lt,dt);if(Tt)return Tt}return syntaxFolding(ft,lt,dt)}function mapRange(ft,lt){let dt=lt.mapPos(ft.from,1),vt=lt.mapPos(ft.to,-1);return dt>=vt?void 0:{from:dt,to:vt}}const foldEffect=StateEffect.define({map:mapRange}),unfoldEffect=StateEffect.define({map:mapRange});function selectedLines(ft){let lt=[];for(let{head:dt}of ft.state.selection.ranges)lt.some(vt=>vt.from<=dt&&vt.to>=dt)||lt.push(ft.lineBlockAt(dt));return lt}const foldState=StateField.define({create(){return Decoration.none},update(ft,lt){ft=ft.map(lt.changes);for(let dt of lt.effects)dt.is(foldEffect)&&!foldExists(ft,dt.value.from,dt.value.to)?ft=ft.update({add:[foldWidget.range(dt.value.from,dt.value.to)]}):dt.is(unfoldEffect)&&(ft=ft.update({filter:(vt,Tt)=>dt.value.from!=vt||dt.value.to!=Tt,filterFrom:dt.value.from,filterTo:dt.value.to}));if(lt.selection){let dt=!1,{head:vt}=lt.selection.main;ft.between(vt,vt,(Tt,Et)=>{Tt<vt&&Et>vt&&(dt=!0)}),dt&&(ft=ft.update({filterFrom:vt,filterTo:vt,filter:(Tt,Et)=>Et<=vt||Tt>=vt}))}return ft},provide:ft=>EditorView.decorations.from(ft),toJSON(ft,lt){let dt=[];return ft.between(0,lt.doc.length,(vt,Tt)=>{dt.push(vt,Tt)}),dt},fromJSON(ft){if(!Array.isArray(ft)||ft.length%2)throw new RangeError("Invalid JSON for fold state");let lt=[];for(let dt=0;dt<ft.length;){let vt=ft[dt++],Tt=ft[dt++];if(typeof vt!="number"||typeof Tt!="number")throw new RangeError("Invalid JSON for fold state");lt.push(foldWidget.range(vt,Tt))}return Decoration.set(lt,!0)}});function findFold(ft,lt,dt){var vt;let Tt=null;return(vt=ft.field(foldState,!1))===null||vt===void 0||vt.between(lt,dt,(Et,Ct)=>{(!Tt||Tt.from>Et)&&(Tt={from:Et,to:Ct})}),Tt}function foldExists(ft,lt,dt){let vt=!1;return ft.between(lt,lt,(Tt,Et)=>{Tt==lt&&Et==dt&&(vt=!0)}),vt}function maybeEnable(ft,lt){return ft.field(foldState,!1)?lt:lt.concat(StateEffect.appendConfig.of(codeFolding()))}const foldCode=ft=>{for(let lt of selectedLines(ft)){let dt=foldable(ft.state,lt.from,lt.to);if(dt)return ft.dispatch({effects:maybeEnable(ft.state,[foldEffect.of(dt),announceFold(ft,dt)])}),!0}return!1},unfoldCode=ft=>{if(!ft.state.field(foldState,!1))return!1;let lt=[];for(let dt of selectedLines(ft)){let vt=findFold(ft.state,dt.from,dt.to);vt&&lt.push(unfoldEffect.of(vt),announceFold(ft,vt,!1))}return lt.length&&ft.dispatch({effects:lt}),lt.length>0};function announceFold(ft,lt,dt=!0){let vt=ft.state.doc.lineAt(lt.from).number,Tt=ft.state.doc.lineAt(lt.to).number;return EditorView.announce.of(`${ft.state.phrase(dt?"Folded lines":"Unfolded lines")} ${vt} ${ft.state.phrase("to")} ${Tt}.`)}const foldAll=ft=>{let{state:lt}=ft,dt=[];for(let vt=0;vt<lt.doc.length;){let Tt=ft.lineBlockAt(vt),Et=foldable(lt,Tt.from,Tt.to);Et&&dt.push(foldEffect.of(Et)),vt=(Et?ft.lineBlockAt(Et.to):Tt).to+1}return dt.length&&ft.dispatch({effects:maybeEnable(ft.state,dt)}),!!dt.length},unfoldAll=ft=>{let lt=ft.state.field(foldState,!1);if(!lt||!lt.size)return!1;let dt=[];return lt.between(0,ft.state.doc.length,(vt,Tt)=>{dt.push(unfoldEffect.of({from:vt,to:Tt}))}),ft.dispatch({effects:dt}),!0},foldKeymap=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:foldCode},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:unfoldCode},{key:"Ctrl-Alt-[",run:foldAll},{key:"Ctrl-Alt-]",run:unfoldAll}],defaultConfig={placeholderDOM:null,placeholderText:"…"},foldConfig=Facet.define({combine(ft){return combineConfig(ft,defaultConfig)}});function codeFolding(ft){let lt=[foldState,baseTheme$1$1];return ft&&lt.push(foldConfig.of(ft)),lt}const foldWidget=Decoration.replace({widget:new class extends WidgetType{toDOM(ft){let{state:lt}=ft,dt=lt.facet(foldConfig),vt=Et=>{let Ct=ft.lineBlockAt(ft.posAtDOM(Et.target)),Rt=findFold(ft.state,Ct.from,Ct.to);Rt&&ft.dispatch({effects:unfoldEffect.of(Rt)}),Et.preventDefault()};if(dt.placeholderDOM)return dt.placeholderDOM(ft,vt);let Tt=document.createElement("span");return Tt.textContent=dt.placeholderText,Tt.setAttribute("aria-label",lt.phrase("folded code")),Tt.title=lt.phrase("unfold"),Tt.className="cm-foldPlaceholder",Tt.onclick=vt,Tt}}}),foldGutterDefaults={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class FoldMarker extends GutterMarker{constructor(lt,dt){super(),this.config=lt,this.open=dt}eq(lt){return this.config==lt.config&&this.open==lt.open}toDOM(lt){if(this.config.markerDOM)return this.config.markerDOM(this.open);let dt=document.createElement("span");return dt.textContent=this.open?this.config.openText:this.config.closedText,dt.title=lt.state.phrase(this.open?"Fold line":"Unfold line"),dt}}function foldGutter(ft={}){let lt=Object.assign(Object.assign({},foldGutterDefaults),ft),dt=new FoldMarker(lt,!0),vt=new FoldMarker(lt,!1),Tt=ViewPlugin.fromClass(class{constructor(Ct){this.from=Ct.viewport.from,this.markers=this.buildMarkers(Ct)}update(Ct){(Ct.docChanged||Ct.viewportChanged||Ct.startState.facet(language)!=Ct.state.facet(language)||Ct.startState.field(foldState,!1)!=Ct.state.field(foldState,!1)||syntaxTree(Ct.startState)!=syntaxTree(Ct.state)||lt.foldingChanged(Ct))&&(this.markers=this.buildMarkers(Ct.view))}buildMarkers(Ct){let Rt=new RangeSetBuilder;for(let kt of Ct.viewportLineBlocks){let Dt=findFold(Ct.state,kt.from,kt.to)?vt:foldable(Ct.state,kt.from,kt.to)?dt:null;Dt&&Rt.add(kt.from,kt.from,Dt)}return Rt.finish()}}),{domEventHandlers:Et}=lt;return[Tt,gutter({class:"cm-foldGutter",markers(Ct){var Rt;return((Rt=Ct.plugin(Tt))===null||Rt===void 0?void 0:Rt.markers)||RangeSet.empty},initialSpacer(){return new FoldMarker(lt,!1)},domEventHandlers:Object.assign(Object.assign({},Et),{click:(Ct,Rt,kt)=>{if(Et.click&&Et.click(Ct,Rt,kt))return!0;let Dt=findFold(Ct.state,Rt.from,Rt.to);if(Dt)return Ct.dispatch({effects:unfoldEffect.of(Dt)}),!0;let Bt=foldable(Ct.state,Rt.from,Rt.to);return Bt?(Ct.dispatch({effects:foldEffect.of(Bt)}),!0):!1}})}),codeFolding()]}const baseTheme$1$1=EditorView.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class HighlightStyle{constructor(lt,dt){this.specs=lt;let vt;function Tt(Rt){let kt=StyleModule.newName();return(vt||(vt=Object.create(null)))["."+kt]=Rt,kt}const Et=typeof dt.all=="string"?dt.all:dt.all?Tt(dt.all):void 0,Ct=dt.scope;this.scope=Ct instanceof Language?Rt=>Rt.prop(languageDataProp)==Ct.data:Ct?Rt=>Rt==Ct:void 0,this.style=tagHighlighter(lt.map(Rt=>({tag:Rt.tag,class:Rt.class||Tt(Object.assign({},Rt,{tag:null}))})),{all:Et}).style,this.module=vt?new StyleModule(vt):null,this.themeType=dt.themeType}static define(lt,dt){return new HighlightStyle(lt,dt||{})}}const highlighterFacet=Facet.define(),fallbackHighlighter=Facet.define({combine(ft){return ft.length?[ft[0]]:null}});function getHighlighters(ft){let lt=ft.facet(highlighterFacet);return lt.length?lt:ft.facet(fallbackHighlighter)}function syntaxHighlighting(ft,lt){let dt=[treeHighlighter],vt;return ft instanceof HighlightStyle&&(ft.module&&dt.push(EditorView.styleModule.of(ft.module)),vt=ft.themeType),lt!=null&&lt.fallback?dt.push(fallbackHighlighter.of(ft)):vt?dt.push(highlighterFacet.computeN([EditorView.darkTheme],Tt=>Tt.facet(EditorView.darkTheme)==(vt=="dark")?[ft]:[])):dt.push(highlighterFacet.of(ft)),dt}class TreeHighlighter{constructor(lt){this.markCache=Object.create(null),this.tree=syntaxTree(lt.state),this.decorations=this.buildDeco(lt,getHighlighters(lt.state))}update(lt){let dt=syntaxTree(lt.state),vt=getHighlighters(lt.state),Tt=vt!=getHighlighters(lt.startState);dt.length<lt.view.viewport.to&&!Tt&&dt.type==this.tree.type?this.decorations=this.decorations.map(lt.changes):(dt!=this.tree||lt.viewportChanged||Tt)&&(this.tree=dt,this.decorations=this.buildDeco(lt.view,vt))}buildDeco(lt,dt){if(!dt||!this.tree.length)return Decoration.none;let vt=new RangeSetBuilder;for(let{from:Tt,to:Et}of lt.visibleRanges)highlightTree(this.tree,dt,(Ct,Rt,kt)=>{vt.add(Ct,Rt,this.markCache[kt]||(this.markCache[kt]=Decoration.mark({class:kt})))},Tt,Et);return vt.finish()}}const treeHighlighter=Prec.high(ViewPlugin.fromClass(TreeHighlighter,{decorations:ft=>ft.decorations})),defaultHighlightStyle=HighlightStyle.define([{tag:tags.meta,color:"#404740"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,textDecoration:"underline",fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.keyword,color:"#708"},{tag:[tags.atom,tags.bool,tags.url,tags.contentSeparator,tags.labelName],color:"#219"},{tag:[tags.literal,tags.inserted],color:"#164"},{tag:[tags.string,tags.deleted],color:"#a11"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],color:"#e40"},{tag:tags.definition(tags.variableName),color:"#00f"},{tag:tags.local(tags.variableName),color:"#30a"},{tag:[tags.typeName,tags.namespace],color:"#085"},{tag:tags.className,color:"#167"},{tag:[tags.special(tags.variableName),tags.macroName],color:"#256"},{tag:tags.definition(tags.propertyName),color:"#00c"},{tag:tags.comment,color:"#940"},{tag:tags.invalid,color:"#f00"}]),baseTheme$4=EditorView.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),DefaultScanDist=1e4,DefaultBrackets="()[]{}",bracketMatchingConfig=Facet.define({combine(ft){return combineConfig(ft,{afterCursor:!0,brackets:DefaultBrackets,maxScanDistance:DefaultScanDist,renderMatch:defaultRenderMatch})}}),matchingMark=Decoration.mark({class:"cm-matchingBracket"}),nonmatchingMark=Decoration.mark({class:"cm-nonmatchingBracket"});function defaultRenderMatch(ft){let lt=[],dt=ft.matched?matchingMark:nonmatchingMark;return lt.push(dt.range(ft.start.from,ft.start.to)),ft.end&&lt.push(dt.range(ft.end.from,ft.end.to)),lt}const bracketMatchingState=StateField.define({create(){return Decoration.none},update(ft,lt){if(!lt.docChanged&&!lt.selection)return ft;let dt=[],vt=lt.state.facet(bracketMatchingConfig);for(let Tt of lt.state.selection.ranges){if(!Tt.empty)continue;let Et=matchBrackets(lt.state,Tt.head,-1,vt)||Tt.head>0&&matchBrackets(lt.state,Tt.head-1,1,vt)||vt.afterCursor&&(matchBrackets(lt.state,Tt.head,1,vt)||Tt.head<lt.state.doc.length&&matchBrackets(lt.state,Tt.head+1,-1,vt));Et&&(dt=dt.concat(vt.renderMatch(Et,lt.state)))}return Decoration.set(dt,!0)},provide:ft=>EditorView.decorations.from(ft)}),bracketMatchingUnique=[bracketMatchingState,baseTheme$4];function bracketMatching(ft={}){return[bracketMatchingConfig.of(ft),bracketMatchingUnique]}const bracketMatchingHandle=new NodeProp;function matchingNodes(ft,lt,dt){let vt=ft.prop(lt<0?NodeProp.openedBy:NodeProp.closedBy);if(vt)return vt;if(ft.name.length==1){let Tt=dt.indexOf(ft.name);if(Tt>-1&&Tt%2==(lt<0?1:0))return[dt[Tt+lt]]}return null}function findHandle(ft){let lt=ft.type.prop(bracketMatchingHandle);return lt?lt(ft.node):ft}function matchBrackets(ft,lt,dt,vt={}){let Tt=vt.maxScanDistance||DefaultScanDist,Et=vt.brackets||DefaultBrackets,Ct=syntaxTree(ft),Rt=Ct.resolveInner(lt,dt);for(let kt=Rt;kt;kt=kt.parent){let Dt=matchingNodes(kt.type,dt,Et);if(Dt&&kt.from<kt.to){let Bt=findHandle(kt);if(Bt&&(dt>0?lt>=Bt.from&&lt<Bt.to:lt>Bt.from&&lt<=Bt.to))return matchMarkedBrackets(ft,lt,dt,kt,Bt,Dt,Et)}}return matchPlainBrackets(ft,lt,dt,Ct,Rt.type,Tt,Et)}function matchMarkedBrackets(ft,lt,dt,vt,Tt,Et,Ct){let Rt=vt.parent,kt={from:Tt.from,to:Tt.to},Dt=0,Bt=Rt==null?void 0:Rt.cursor();if(Bt&&(dt<0?Bt.childBefore(vt.from):Bt.childAfter(vt.to)))do if(dt<0?Bt.to<=vt.from:Bt.from>=vt.to){if(Dt==0&&Et.indexOf(Bt.type.name)>-1&&Bt.from<Bt.to){let Ft=findHandle(Bt);return{start:kt,end:Ft?{from:Ft.from,to:Ft.to}:void 0,matched:!0}}else if(matchingNodes(Bt.type,dt,Ct))Dt++;else if(matchingNodes(Bt.type,-dt,Ct)){if(Dt==0){let Ft=findHandle(Bt);return{start:kt,end:Ft&&Ft.from<Ft.to?{from:Ft.from,to:Ft.to}:void 0,matched:!1}}Dt--}}while(dt<0?Bt.prevSibling():Bt.nextSibling());return{start:kt,matched:!1}}function matchPlainBrackets(ft,lt,dt,vt,Tt,Et,Ct){let Rt=dt<0?ft.sliceDoc(lt-1,lt):ft.sliceDoc(lt,lt+1),kt=Ct.indexOf(Rt);if(kt<0||kt%2==0!=dt>0)return null;let Dt={from:dt<0?lt-1:lt,to:dt>0?lt+1:lt},Bt=ft.doc.iterRange(lt,dt>0?ft.doc.length:0),Ft=0;for(let Ut=0;!Bt.next().done&&Ut<=Et;){let Zt=Bt.value;dt<0&&(Ut+=Zt.length);let Kt=lt+Ut*dt;for(let ln=dt>0?0:Zt.length-1,hn=dt>0?Zt.length:-1;ln!=hn;ln+=dt){let dn=Ct.indexOf(Zt[ln]);if(!(dn<0||vt.resolveInner(Kt+ln,1).type!=Tt))if(dn%2==0==dt>0)Ft++;else{if(Ft==1)return{start:Dt,end:{from:Kt+ln,to:Kt+ln+1},matched:dn>>1==kt>>1};Ft--}}dt>0&&(Ut+=Zt.length)}return Bt.done?{start:Dt,matched:!1}:null}const noTokens=Object.create(null),typeArray=[NodeType.none],warned=[],defaultTable=Object.create(null);for(let[ft,lt]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])defaultTable[ft]=createTokenType(noTokens,lt);function warnForPart(ft,lt){warned.indexOf(ft)>-1||(warned.push(ft),console.warn(lt))}function createTokenType(ft,lt){let dt=null;for(let Et of lt.split(".")){let Ct=ft[Et]||tags[Et];Ct?typeof Ct=="function"?dt?dt=Ct(dt):warnForPart(Et,`Modifier ${Et} used at start of tag`):dt?warnForPart(Et,`Tag ${Et} used as modifier`):dt=Ct:warnForPart(Et,`Unknown highlighting tag ${Et}`)}if(!dt)return 0;let vt=lt.replace(/ /g,"_"),Tt=NodeType.define({id:typeArray.length,name:vt,props:[styleTags({[vt]:dt})]});return typeArray.push(Tt),Tt.id}class CompletionContext{constructor(lt,dt,vt){this.state=lt,this.pos=dt,this.explicit=vt,this.abortListeners=[]}tokenBefore(lt){let dt=syntaxTree(this.state).resolveInner(this.pos,-1);for(;dt&&lt.indexOf(dt.name)<0;)dt=dt.parent;return dt?{from:dt.from,to:this.pos,text:this.state.sliceDoc(dt.from,this.pos),type:dt.type}:null}matchBefore(lt){let dt=this.state.doc.lineAt(this.pos),vt=Math.max(dt.from,this.pos-250),Tt=dt.text.slice(vt-dt.from,this.pos-dt.from),Et=Tt.search(ensureAnchor(lt,!1));return Et<0?null:{from:vt+Et,to:this.pos,text:Tt.slice(Et)}}get aborted(){return this.abortListeners==null}addEventListener(lt,dt){lt=="abort"&&this.abortListeners&&this.abortListeners.push(dt)}}function toSet(ft){let lt=Object.keys(ft).join(""),dt=/\w/.test(lt);return dt&&(lt=lt.replace(/\w/g,"")),`[${dt?"\\w":""}${lt.replace(/[^\w\s]/g,"\\$&")}]`}function prefixMatch(ft){let lt=Object.create(null),dt=Object.create(null);for(let{label:Tt}of ft){lt[Tt[0]]=!0;for(let Et=1;Et<Tt.length;Et++)dt[Tt[Et]]=!0}let vt=toSet(lt)+toSet(dt)+"*$";return[new RegExp("^"+vt),new RegExp(vt)]}function completeFromList(ft){let lt=ft.map(Tt=>typeof Tt=="string"?{label:Tt}:Tt),[dt,vt]=lt.every(Tt=>/^\w+$/.test(Tt.label))?[/\w*$/,/\w+$/]:prefixMatch(lt);return Tt=>{let Et=Tt.matchBefore(vt);return Et||Tt.explicit?{from:Et?Et.from:Tt.pos,options:lt,validFor:dt}:null}}function ifNotIn(ft,lt){return dt=>{for(let vt=syntaxTree(dt.state).resolveInner(dt.pos,-1);vt;vt=vt.parent){if(ft.indexOf(vt.name)>-1)return null;if(vt.type.isTop)break}return lt(dt)}}class Option{constructor(lt,dt,vt){this.completion=lt,this.source=dt,this.match=vt}}function cur(ft){return ft.selection.main.head}function ensureAnchor(ft,lt){var dt;let{source:vt}=ft,Tt=lt&&vt[0]!="^",Et=vt[vt.length-1]!="$";return!Tt&&!Et?ft:new RegExp(`${Tt?"^":""}(?:${vt})${Et?"$":""}`,(dt=ft.flags)!==null&&dt!==void 0?dt:ft.ignoreCase?"i":"")}const pickedCompletion=Annotation.define();function insertCompletionText(ft,lt,dt,vt){return Object.assign(Object.assign({},ft.changeByRange(Tt=>{if(Tt==ft.selection.main)return{changes:{from:dt,to:vt,insert:lt},range:EditorSelection.cursor(dt+lt.length)};let Et=vt-dt;return!Tt.empty||Et&&ft.sliceDoc(Tt.from-Et,Tt.from)!=ft.sliceDoc(dt,vt)?{range:Tt}:{changes:{from:Tt.from-Et,to:Tt.from,insert:lt},range:EditorSelection.cursor(Tt.from-Et+lt.length)}})),{userEvent:"input.complete"})}function applyCompletion(ft,lt){const dt=lt.completion.apply||lt.completion.label;let vt=lt.source;typeof dt=="string"?ft.dispatch(Object.assign(Object.assign({},insertCompletionText(ft.state,dt,vt.from,vt.to)),{annotations:pickedCompletion.of(lt.completion)})):dt(ft,lt.completion,vt.from,vt.to)}const SourceCache=new WeakMap;function asSource(ft){if(!Array.isArray(ft))return ft;let lt=SourceCache.get(ft);return lt||SourceCache.set(ft,lt=completeFromList(ft)),lt}class FuzzyMatcher{constructor(lt){this.pattern=lt,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let dt=0;dt<lt.length;){let vt=codePointAt(lt,dt),Tt=codePointSize(vt);this.chars.push(vt);let Et=lt.slice(dt,dt+Tt),Ct=Et.toUpperCase();this.folded.push(codePointAt(Ct==Et?Et.toLowerCase():Ct,0)),dt+=Tt}this.astral=lt.length!=this.chars.length}match(lt){if(this.pattern.length==0)return[0];if(lt.length<this.pattern.length)return null;let{chars:dt,folded:vt,any:Tt,precise:Et,byWord:Ct}=this;if(dt.length==1){let pn=codePointAt(lt,0),mn=codePointSize(pn),On=mn==lt.length?0:-100;if(pn!=dt[0])if(pn==vt[0])On+=-200;else return null;return[On,0,mn]}let Rt=lt.indexOf(this.pattern);if(Rt==0)return[lt.length==this.pattern.length?0:-100,0,this.pattern.length];let kt=dt.length,Dt=0;if(Rt<0){for(let pn=0,mn=Math.min(lt.length,200);pn<mn&&Dt<kt;){let On=codePointAt(lt,pn);(On==dt[Dt]||On==vt[Dt])&&(Tt[Dt++]=pn),pn+=codePointSize(On)}if(Dt<kt)return null}let Bt=0,Ft=0,Ut=!1,Zt=0,Kt=-1,ln=-1,hn=/[a-z]/.test(lt),dn=!0;for(let pn=0,mn=Math.min(lt.length,200),On=0;pn<mn&&Ft<kt;){let bn=codePointAt(lt,pn);Rt<0&&(Bt<kt&&bn==dt[Bt]&&(Et[Bt++]=pn),Zt<kt&&(bn==dt[Zt]||bn==vt[Zt]?(Zt==0&&(Kt=pn),ln=pn+1,Zt++):Zt=0));let En,An=bn<255?bn>=48&&bn<=57||bn>=97&&bn<=122?2:bn>=65&&bn<=90?1:0:(En=fromCodePoint(bn))!=En.toLowerCase()?1:En!=En.toUpperCase()?2:0;(!pn||An==1&&hn||On==0&&An!=0)&&(dt[Ft]==bn||vt[Ft]==bn&&(Ut=!0)?Ct[Ft++]=pn:Ct.length&&(dn=!1)),On=An,pn+=codePointSize(bn)}return Ft==kt&&Ct[0]==0&&dn?this.result(-100+(Ut?-200:0),Ct,lt):Zt==kt&&Kt==0?[-200-lt.length+(ln==lt.length?0:-100),0,ln]:Rt>-1?[-700-lt.length,Rt,Rt+this.pattern.length]:Zt==kt?[-200+-700-lt.length,Kt,ln]:Ft==kt?this.result(-100+(Ut?-200:0)+-700+(dn?0:-1100),Ct,lt):dt.length==2?null:this.result((Tt[0]?-700:0)+-200+-1100,Tt,lt)}result(lt,dt,vt){let Tt=[lt-vt.length],Et=1;for(let Ct of dt){let Rt=Ct+(this.astral?codePointSize(codePointAt(vt,Ct)):1);Et>1&&Tt[Et-1]==Ct?Tt[Et-1]=Rt:(Tt[Et++]=Ct,Tt[Et++]=Rt)}return Tt}}const completionConfig=Facet.define({combine(ft){return combineConfig(ft,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],compareCompletions:(lt,dt)=>lt.label.localeCompare(dt.label),interactionDelay:75},{defaultKeymap:(lt,dt)=>lt&&dt,closeOnBlur:(lt,dt)=>lt&&dt,icons:(lt,dt)=>lt&&dt,tooltipClass:(lt,dt)=>vt=>joinClass(lt(vt),dt(vt)),optionClass:(lt,dt)=>vt=>joinClass(lt(vt),dt(vt)),addToOptions:(lt,dt)=>lt.concat(dt)})}});function joinClass(ft,lt){return ft?lt?ft+" "+lt:ft:lt}function optionContent(ft){let lt=ft.addToOptions.slice();return ft.icons&&lt.push({render(dt){let vt=document.createElement("div");return vt.classList.add("cm-completionIcon"),dt.type&&vt.classList.add(...dt.type.split(/\s+/g).map(Tt=>"cm-completionIcon-"+Tt)),vt.setAttribute("aria-hidden","true"),vt},position:20}),lt.push({render(dt,vt,Tt){let Et=document.createElement("span");Et.className="cm-completionLabel";let{label:Ct}=dt,Rt=0;for(let kt=1;kt<Tt.length;){let Dt=Tt[kt++],Bt=Tt[kt++];Dt>Rt&&Et.appendChild(document.createTextNode(Ct.slice(Rt,Dt)));let Ft=Et.appendChild(document.createElement("span"));Ft.appendChild(document.createTextNode(Ct.slice(Dt,Bt))),Ft.className="cm-completionMatchedText",Rt=Bt}return Rt<Ct.length&&Et.appendChild(document.createTextNode(Ct.slice(Rt))),Et},position:50},{render(dt){if(!dt.detail)return null;let vt=document.createElement("span");return vt.className="cm-completionDetail",vt.textContent=dt.detail,vt},position:80}),lt.sort((dt,vt)=>dt.position-vt.position).map(dt=>dt.render)}function rangeAroundSelected(ft,lt,dt){if(ft<=dt)return{from:0,to:ft};if(lt<0&&(lt=0),lt<=ft>>1){let Tt=Math.floor(lt/dt);return{from:Tt*dt,to:(Tt+1)*dt}}let vt=Math.floor((ft-lt)/dt);return{from:ft-(vt+1)*dt,to:ft-vt*dt}}class CompletionTooltip{constructor(lt,dt){this.view=lt,this.stateField=dt,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:Rt=>this.positionInfo(Rt),key:this},this.space=null,this.currentClass="";let vt=lt.state.field(dt),{options:Tt,selected:Et}=vt.open,Ct=lt.state.facet(completionConfig);this.optionContent=optionContent(Ct),this.optionClass=Ct.optionClass,this.tooltipClass=Ct.tooltipClass,this.range=rangeAroundSelected(Tt.length,Et,Ct.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(lt.state),this.dom.addEventListener("mousedown",Rt=>{for(let kt=Rt.target,Dt;kt&&kt!=this.dom;kt=kt.parentNode)if(kt.nodeName=="LI"&&(Dt=/-(\d+)$/.exec(kt.id))&&+Dt[1]<Tt.length){applyCompletion(lt,Tt[+Dt[1]]),Rt.preventDefault();return}}),this.list=this.dom.appendChild(this.createListBox(Tt,vt.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(lt){var dt,vt,Tt;let Et=lt.state.field(this.stateField),Ct=lt.startState.field(this.stateField);this.updateTooltipClass(lt.state),Et!=Ct&&(this.updateSel(),((dt=Et.open)===null||dt===void 0?void 0:dt.disabled)!=((vt=Ct.open)===null||vt===void 0?void 0:vt.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(!((Tt=Et.open)===null||Tt===void 0)&&Tt.disabled)))}updateTooltipClass(lt){let dt=this.tooltipClass(lt);if(dt!=this.currentClass){for(let vt of this.currentClass.split(" "))vt&&this.dom.classList.remove(vt);for(let vt of dt.split(" "))vt&&this.dom.classList.add(vt);this.currentClass=dt}}positioned(lt){this.space=lt,this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let lt=this.view.state.field(this.stateField),dt=lt.open;if((dt.selected>-1&&dt.selected<this.range.from||dt.selected>=this.range.to)&&(this.range=rangeAroundSelected(dt.options.length,dt.selected,this.view.state.facet(completionConfig).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(dt.options,lt.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(dt.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:vt}=dt.options[dt.selected],{info:Tt}=vt;if(!Tt)return;let Et=typeof Tt=="string"?document.createTextNode(Tt):Tt(vt);if(!Et)return;"then"in Et?Et.then(Ct=>{Ct&&this.view.state.field(this.stateField,!1)==lt&&this.addInfoPane(Ct)}).catch(Ct=>logException(this.view.state,Ct,"completion info")):this.addInfoPane(Et)}}addInfoPane(lt){let dt=this.info=document.createElement("div");dt.className="cm-tooltip cm-completionInfo",dt.appendChild(lt),this.dom.appendChild(dt),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(lt){let dt=null;for(let vt=this.list.firstChild,Tt=this.range.from;vt;vt=vt.nextSibling,Tt++)Tt==lt?vt.hasAttribute("aria-selected")||(vt.setAttribute("aria-selected","true"),dt=vt):vt.hasAttribute("aria-selected")&&vt.removeAttribute("aria-selected");return dt&&scrollIntoView(this.list,dt),dt}measureInfo(){let lt=this.dom.querySelector("[aria-selected]");if(!lt||!this.info)return null;let dt=this.dom.getBoundingClientRect(),vt=this.info.getBoundingClientRect(),Tt=lt.getBoundingClientRect(),Et=this.space;if(!Et){let Kt=this.dom.ownerDocument.defaultView||window;Et={left:0,top:0,right:Kt.innerWidth,bottom:Kt.innerHeight}}if(Tt.top>Math.min(Et.bottom,dt.bottom)-10||Tt.bottom<Math.max(Et.top,dt.top)+10)return null;let Ct=this.view.textDirection==Direction.RTL,Rt=Ct,kt=!1,Dt,Bt="",Ft="",Ut=dt.left-Et.left,Zt=Et.right-dt.right;if(Rt&&Ut<Math.min(vt.width,Zt)?Rt=!1:!Rt&&Zt<Math.min(vt.width,Ut)&&(Rt=!0),vt.width<=(Rt?Ut:Zt))Bt=Math.max(Et.top,Math.min(Tt.top,Et.bottom-vt.height))-dt.top+"px",Dt=Math.min(400,Rt?Ut:Zt)+"px";else{kt=!0,Dt=Math.min(400,(Ct?dt.right:Et.right-dt.left)-30)+"px";let Kt=Et.bottom-dt.bottom;Kt>=vt.height||Kt>dt.top?Bt=Tt.bottom-dt.top+"px":Ft=dt.bottom-Tt.top+"px"}return{top:Bt,bottom:Ft,maxWidth:Dt,class:kt?Ct?"left-narrow":"right-narrow":Rt?"left":"right"}}positionInfo(lt){this.info&&(lt?(this.info.style.top=lt.top,this.info.style.bottom=lt.bottom,this.info.style.maxWidth=lt.maxWidth,this.info.className="cm-tooltip cm-completionInfo cm-completionInfo-"+lt.class):this.info.style.top="-1e6px")}createListBox(lt,dt,vt){const Tt=document.createElement("ul");Tt.id=dt,Tt.setAttribute("role","listbox"),Tt.setAttribute("aria-expanded","true"),Tt.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let Et=vt.from;Et<vt.to;Et++){let{completion:Ct,match:Rt}=lt[Et];const kt=Tt.appendChild(document.createElement("li"));kt.id=dt+"-"+Et,kt.setAttribute("role","option");let Dt=this.optionClass(Ct);Dt&&(kt.className=Dt);for(let Bt of this.optionContent){let Ft=Bt(Ct,this.view.state,Rt);Ft&&kt.appendChild(Ft)}}return vt.from&&Tt.classList.add("cm-completionListIncompleteTop"),vt.to<lt.length&&Tt.classList.add("cm-completionListIncompleteBottom"),Tt}}function completionTooltip(ft){return lt=>new CompletionTooltip(lt,ft)}function scrollIntoView(ft,lt){let dt=ft.getBoundingClientRect(),vt=lt.getBoundingClientRect();vt.top<dt.top?ft.scrollTop-=dt.top-vt.top:vt.bottom>dt.bottom&&(ft.scrollTop+=vt.bottom-dt.bottom)}function score(ft){return(ft.boost||0)*100+(ft.apply?10:0)+(ft.info?5:0)+(ft.type?1:0)}function sortOptions(ft,lt){let dt=[],vt=0;for(let Rt of ft)if(Rt.hasResult())if(Rt.result.filter===!1){let kt=Rt.result.getMatch;for(let Dt of Rt.result.options){let Bt=[1e9-vt++];if(kt)for(let Ft of kt(Dt))Bt.push(Ft);dt.push(new Option(Dt,Rt,Bt))}}else{let kt=new FuzzyMatcher(lt.sliceDoc(Rt.from,Rt.to)),Dt;for(let Bt of Rt.result.options)(Dt=kt.match(Bt.label))&&(Bt.boost!=null&&(Dt[0]+=Bt.boost),dt.push(new Option(Bt,Rt,Dt)))}let Tt=[],Et=null,Ct=lt.facet(completionConfig).compareCompletions;for(let Rt of dt.sort((kt,Dt)=>Dt.match[0]-kt.match[0]||Ct(kt.completion,Dt.completion)))!Et||Et.label!=Rt.completion.label||Et.detail!=Rt.completion.detail||Et.type!=null&&Rt.completion.type!=null&&Et.type!=Rt.completion.type||Et.apply!=Rt.completion.apply?Tt.push(Rt):score(Rt.completion)>score(Et)&&(Tt[Tt.length-1]=Rt),Et=Rt.completion;return Tt}class CompletionDialog{constructor(lt,dt,vt,Tt,Et,Ct){this.options=lt,this.attrs=dt,this.tooltip=vt,this.timestamp=Tt,this.selected=Et,this.disabled=Ct}setSelected(lt,dt){return lt==this.selected||lt>=this.options.length?this:new CompletionDialog(this.options,makeAttrs(dt,lt),this.tooltip,this.timestamp,lt,this.disabled)}static build(lt,dt,vt,Tt,Et){let Ct=sortOptions(lt,dt);if(!Ct.length)return Tt&&lt.some(kt=>kt.state==1)?new CompletionDialog(Tt.options,Tt.attrs,Tt.tooltip,Tt.timestamp,Tt.selected,!0):null;let Rt=dt.facet(completionConfig).selectOnOpen?0:-1;if(Tt&&Tt.selected!=Rt&&Tt.selected!=-1){let kt=Tt.options[Tt.selected].completion;for(let Dt=0;Dt<Ct.length;Dt++)if(Ct[Dt].completion==kt){Rt=Dt;break}}return new CompletionDialog(Ct,makeAttrs(vt,Rt),{pos:lt.reduce((kt,Dt)=>Dt.hasResult()?Math.min(kt,Dt.from):kt,1e8),create:completionTooltip(completionState),above:Et.aboveCursor},Tt?Tt.timestamp:Date.now(),Rt,!1)}map(lt){return new CompletionDialog(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:lt.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class CompletionState{constructor(lt,dt,vt){this.active=lt,this.id=dt,this.open=vt}static start(){return new CompletionState(none$1,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(lt){let{state:dt}=lt,vt=dt.facet(completionConfig),Et=(vt.override||dt.languageDataAt("autocomplete",cur(dt)).map(asSource)).map(Rt=>(this.active.find(Dt=>Dt.source==Rt)||new ActiveSource(Rt,this.active.some(Dt=>Dt.state!=0)?1:0)).update(lt,vt));Et.length==this.active.length&&Et.every((Rt,kt)=>Rt==this.active[kt])&&(Et=this.active);let Ct=this.open;Ct&&lt.docChanged&&(Ct=Ct.map(lt.changes)),lt.selection||Et.some(Rt=>Rt.hasResult()&&lt.changes.touchesRange(Rt.from,Rt.to))||!sameResults(Et,this.active)?Ct=CompletionDialog.build(Et,dt,this.id,Ct,vt):Ct&&Ct.disabled&&!Et.some(Rt=>Rt.state==1)&&(Ct=null),!Ct&&Et.every(Rt=>Rt.state!=1)&&Et.some(Rt=>Rt.hasResult())&&(Et=Et.map(Rt=>Rt.hasResult()?new ActiveSource(Rt.source,0):Rt));for(let Rt of lt.effects)Rt.is(setSelectedEffect)&&(Ct=Ct&&Ct.setSelected(Rt.value,this.id));return Et==this.active&&Ct==this.open?this:new CompletionState(Et,this.id,Ct)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:baseAttrs}}function sameResults(ft,lt){if(ft==lt)return!0;for(let dt=0,vt=0;;){for(;dt<ft.length&&!ft[dt].hasResult;)dt++;for(;vt<lt.length&&!lt[vt].hasResult;)vt++;let Tt=dt==ft.length,Et=vt==lt.length;if(Tt||Et)return Tt==Et;if(ft[dt++].result!=lt[vt++].result)return!1}}const baseAttrs={"aria-autocomplete":"list"};function makeAttrs(ft,lt){let dt={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":ft};return lt>-1&&(dt["aria-activedescendant"]=ft+"-"+lt),dt}const none$1=[];function getUserEvent(ft){return ft.isUserEvent("input.type")?"input":ft.isUserEvent("delete.backward")?"delete":null}class ActiveSource{constructor(lt,dt,vt=-1){this.source=lt,this.state=dt,this.explicitPos=vt}hasResult(){return!1}update(lt,dt){let vt=getUserEvent(lt),Tt=this;vt?Tt=Tt.handleUserEvent(lt,vt,dt):lt.docChanged?Tt=Tt.handleChange(lt):lt.selection&&Tt.state!=0&&(Tt=new ActiveSource(Tt.source,0));for(let Et of lt.effects)if(Et.is(startCompletionEffect))Tt=new ActiveSource(Tt.source,1,Et.value?cur(lt.state):-1);else if(Et.is(closeCompletionEffect))Tt=new ActiveSource(Tt.source,0);else if(Et.is(setActiveEffect))for(let Ct of Et.value)Ct.source==Tt.source&&(Tt=Ct);return Tt}handleUserEvent(lt,dt,vt){return dt=="delete"||!vt.activateOnTyping?this.map(lt.changes):new ActiveSource(this.source,1)}handleChange(lt){return lt.changes.touchesRange(cur(lt.startState))?new ActiveSource(this.source,0):this.map(lt.changes)}map(lt){return lt.empty||this.explicitPos<0?this:new ActiveSource(this.source,this.state,lt.mapPos(this.explicitPos))}}class ActiveResult extends ActiveSource{constructor(lt,dt,vt,Tt,Et){super(lt,2,dt),this.result=vt,this.from=Tt,this.to=Et}hasResult(){return!0}handleUserEvent(lt,dt,vt){var Tt;let Et=lt.changes.mapPos(this.from),Ct=lt.changes.mapPos(this.to,1),Rt=cur(lt.state);if((this.explicitPos<0?Rt<=Et:Rt<this.from)||Rt>Ct||dt=="delete"&&cur(lt.startState)==this.from)return new ActiveSource(this.source,dt=="input"&&vt.activateOnTyping?1:0);let kt=this.explicitPos<0?-1:lt.changes.mapPos(this.explicitPos),Dt;return checkValid(this.result.validFor,lt.state,Et,Ct)?new ActiveResult(this.source,kt,this.result,Et,Ct):this.result.update&&(Dt=this.result.update(this.result,Et,Ct,new CompletionContext(lt.state,Rt,kt>=0)))?new ActiveResult(this.source,kt,Dt,Dt.from,(Tt=Dt.to)!==null&&Tt!==void 0?Tt:cur(lt.state)):new ActiveSource(this.source,1,kt)}handleChange(lt){return lt.changes.touchesRange(this.from,this.to)?new ActiveSource(this.source,0):this.map(lt.changes)}map(lt){return lt.empty?this:new ActiveResult(this.source,this.explicitPos<0?-1:lt.mapPos(this.explicitPos),this.result,lt.mapPos(this.from),lt.mapPos(this.to,1))}}function checkValid(ft,lt,dt,vt){if(!ft)return!1;let Tt=lt.sliceDoc(dt,vt);return typeof ft=="function"?ft(Tt,dt,vt,lt):ensureAnchor(ft,!0).test(Tt)}const startCompletionEffect=StateEffect.define(),closeCompletionEffect=StateEffect.define(),setActiveEffect=StateEffect.define({map(ft,lt){return ft.map(dt=>dt.map(lt))}}),setSelectedEffect=StateEffect.define(),completionState=StateField.define({create(){return CompletionState.start()},update(ft,lt){return ft.update(lt)},provide:ft=>[showTooltip.from(ft,lt=>lt.tooltip),EditorView.contentAttributes.from(ft,lt=>lt.attrs)]});function moveCompletionSelection(ft,lt="option"){return dt=>{let vt=dt.state.field(completionState,!1);if(!vt||!vt.open||vt.open.disabled||Date.now()-vt.open.timestamp<dt.state.facet(completionConfig).interactionDelay)return!1;let Tt=1,Et;lt=="page"&&(Et=getTooltip(dt,vt.open.tooltip))&&(Tt=Math.max(2,Math.floor(Et.dom.offsetHeight/Et.dom.querySelector("li").offsetHeight)-1));let{length:Ct}=vt.open.options,Rt=vt.open.selected>-1?vt.open.selected+Tt*(ft?1:-1):ft?0:Ct-1;return Rt<0?Rt=lt=="page"?0:Ct-1:Rt>=Ct&&(Rt=lt=="page"?Ct-1:0),dt.dispatch({effects:setSelectedEffect.of(Rt)}),!0}}const acceptCompletion=ft=>{let lt=ft.state.field(completionState,!1);return ft.state.readOnly||!lt||!lt.open||lt.open.selected<0||Date.now()-lt.open.timestamp<ft.state.facet(completionConfig).interactionDelay?!1:(lt.open.disabled||applyCompletion(ft,lt.open.options[lt.open.selected]),!0)},startCompletion=ft=>ft.state.field(completionState,!1)?(ft.dispatch({effects:startCompletionEffect.of(!0)}),!0):!1,closeCompletion=ft=>{let lt=ft.state.field(completionState,!1);return!lt||!lt.active.some(dt=>dt.state!=0)?!1:(ft.dispatch({effects:closeCompletionEffect.of(null)}),!0)};class RunningQuery{constructor(lt,dt){this.active=lt,this.context=dt,this.time=Date.now(),this.updates=[],this.done=void 0}}const DebounceTime=50,MaxUpdateCount=50,MinAbortTime=1e3,completionPlugin=ViewPlugin.fromClass(class{constructor(ft){this.view=ft,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let lt of ft.state.field(completionState).active)lt.state==1&&this.startQuery(lt)}update(ft){let lt=ft.state.field(completionState);if(!ft.selectionSet&&!ft.docChanged&&ft.startState.field(completionState)==lt)return;let dt=ft.transactions.some(vt=>(vt.selection||vt.docChanged)&&!getUserEvent(vt));for(let vt=0;vt<this.running.length;vt++){let Tt=this.running[vt];if(dt||Tt.updates.length+ft.transactions.length>MaxUpdateCount&&Date.now()-Tt.time>MinAbortTime){for(let Et of Tt.context.abortListeners)try{Et()}catch(Ct){logException(this.view.state,Ct)}Tt.context.abortListeners=null,this.running.splice(vt--,1)}else Tt.updates.push(...ft.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=lt.active.some(vt=>vt.state==1&&!this.running.some(Tt=>Tt.active.source==vt.source))?setTimeout(()=>this.startUpdate(),DebounceTime):-1,this.composing!=0)for(let vt of ft.transactions)getUserEvent(vt)=="input"?this.composing=2:this.composing==2&&vt.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:ft}=this.view,lt=ft.field(completionState);for(let dt of lt.active)dt.state==1&&!this.running.some(vt=>vt.active.source==dt.source)&&this.startQuery(dt)}startQuery(ft){let{state:lt}=this.view,dt=cur(lt),vt=new CompletionContext(lt,dt,ft.explicitPos==dt),Tt=new RunningQuery(ft,vt);this.running.push(Tt),Promise.resolve(ft.source(vt)).then(Et=>{Tt.context.aborted||(Tt.done=Et||null,this.scheduleAccept())},Et=>{this.view.dispatch({effects:closeCompletionEffect.of(null)}),logException(this.view.state,Et)})}scheduleAccept(){this.running.every(ft=>ft.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),DebounceTime))}accept(){var ft;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let lt=[],dt=this.view.state.facet(completionConfig);for(let vt=0;vt<this.running.length;vt++){let Tt=this.running[vt];if(Tt.done===void 0)continue;if(this.running.splice(vt--,1),Tt.done){let Ct=new ActiveResult(Tt.active.source,Tt.active.explicitPos,Tt.done,Tt.done.from,(ft=Tt.done.to)!==null&&ft!==void 0?ft:cur(Tt.updates.length?Tt.updates[0].startState:this.view.state));for(let Rt of Tt.updates)Ct=Ct.update(Rt,dt);if(Ct.hasResult()){lt.push(Ct);continue}}let Et=this.view.state.field(completionState).active.find(Ct=>Ct.source==Tt.active.source);if(Et&&Et.state==1)if(Tt.done==null){let Ct=new ActiveSource(Tt.active.source,0);for(let Rt of Tt.updates)Ct=Ct.update(Rt,dt);Ct.state!=1&&lt.push(Ct)}else this.startQuery(Et)}lt.length&&this.view.dispatch({effects:setActiveEffect.of(lt)})}},{eventHandlers:{blur(){let ft=this.view.state.field(completionState,!1);ft&&ft.tooltip&&this.view.state.facet(completionConfig).closeOnBlur&&this.view.dispatch({effects:closeCompletionEffect.of(null)})},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:startCompletionEffect.of(!1)}),20),this.composing=0}}}),baseTheme$3=EditorView.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class FieldPos{constructor(lt,dt,vt,Tt){this.field=lt,this.line=dt,this.from=vt,this.to=Tt}}class FieldRange{constructor(lt,dt,vt){this.field=lt,this.from=dt,this.to=vt}map(lt){let dt=lt.mapPos(this.from,-1,MapMode.TrackDel),vt=lt.mapPos(this.to,1,MapMode.TrackDel);return dt==null||vt==null?null:new FieldRange(this.field,dt,vt)}}class Snippet{constructor(lt,dt){this.lines=lt,this.fieldPositions=dt}instantiate(lt,dt){let vt=[],Tt=[dt],Et=lt.doc.lineAt(dt),Ct=/^\s*/.exec(Et.text)[0];for(let kt of this.lines){if(vt.length){let Dt=Ct,Bt=/^\t*/.exec(kt)[0].length;for(let Ft=0;Ft<Bt;Ft++)Dt+=lt.facet(indentUnit);Tt.push(dt+Dt.length-Bt),kt=Dt+kt.slice(Bt)}vt.push(kt),dt+=kt.length+1}let Rt=this.fieldPositions.map(kt=>new FieldRange(kt.field,Tt[kt.line]+kt.from,Tt[kt.line]+kt.to));return{text:vt,ranges:Rt}}static parse(lt){let dt=[],vt=[],Tt=[],Et;for(let Ct of lt.split(/\r\n?|\n/)){for(;Et=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(Ct);){let Rt=Et[1]?+Et[1]:null,kt=Et[2]||Et[3]||"",Dt=-1;for(let Bt=0;Bt<dt.length;Bt++)(Rt!=null?dt[Bt].seq==Rt:kt&&dt[Bt].name==kt)&&(Dt=Bt);if(Dt<0){let Bt=0;for(;Bt<dt.length&&(Rt==null||dt[Bt].seq!=null&&dt[Bt].seq<Rt);)Bt++;dt.splice(Bt,0,{seq:Rt,name:kt}),Dt=Bt;for(let Ft of Tt)Ft.field>=Dt&&Ft.field++}Tt.push(new FieldPos(Dt,vt.length,Et.index,Et.index+kt.length)),Ct=Ct.slice(0,Et.index)+kt+Ct.slice(Et.index+Et[0].length)}for(let Rt;Rt=/\\([{}])/.exec(Ct);){Ct=Ct.slice(0,Rt.index)+Rt[1]+Ct.slice(Rt.index+Rt[0].length);for(let kt of Tt)kt.line==vt.length&&kt.from>Rt.index&&(kt.from--,kt.to--)}vt.push(Ct)}return new Snippet(vt,Tt)}}let fieldMarker=Decoration.widget({widget:new class extends WidgetType{toDOM(){let ft=document.createElement("span");return ft.className="cm-snippetFieldPosition",ft}ignoreEvent(){return!1}}}),fieldRange=Decoration.mark({class:"cm-snippetField"});class ActiveSnippet{constructor(lt,dt){this.ranges=lt,this.active=dt,this.deco=Decoration.set(lt.map(vt=>(vt.from==vt.to?fieldMarker:fieldRange).range(vt.from,vt.to)))}map(lt){let dt=[];for(let vt of this.ranges){let Tt=vt.map(lt);if(!Tt)return null;dt.push(Tt)}return new ActiveSnippet(dt,this.active)}selectionInsideField(lt){return lt.ranges.every(dt=>this.ranges.some(vt=>vt.field==this.active&&vt.from<=dt.from&&vt.to>=dt.to))}}const setActive=StateEffect.define({map(ft,lt){return ft&&ft.map(lt)}}),moveToField=StateEffect.define(),snippetState=StateField.define({create(){return null},update(ft,lt){for(let dt of lt.effects){if(dt.is(setActive))return dt.value;if(dt.is(moveToField)&&ft)return new ActiveSnippet(ft.ranges,dt.value)}return ft&&lt.docChanged&&(ft=ft.map(lt.changes)),ft&&lt.selection&&!ft.selectionInsideField(lt.selection)&&(ft=null),ft},provide:ft=>EditorView.decorations.from(ft,lt=>lt?lt.deco:Decoration.none)});function fieldSelection(ft,lt){return EditorSelection.create(ft.filter(dt=>dt.field==lt).map(dt=>EditorSelection.range(dt.from,dt.to)))}function snippet(ft){let lt=Snippet.parse(ft);return(dt,vt,Tt,Et)=>{let{text:Ct,ranges:Rt}=lt.instantiate(dt.state,Tt),kt={changes:{from:Tt,to:Et,insert:Text.of(Ct)},scrollIntoView:!0,annotations:pickedCompletion.of(vt)};if(Rt.length&&(kt.selection=fieldSelection(Rt,0)),Rt.length>1){let Dt=new ActiveSnippet(Rt,0),Bt=kt.effects=[setActive.of(Dt)];dt.state.field(snippetState,!1)===void 0&&Bt.push(StateEffect.appendConfig.of([snippetState,addSnippetKeymap,snippetPointerHandler,baseTheme$3]))}dt.dispatch(dt.state.update(kt))}}function moveField(ft){return({state:lt,dispatch:dt})=>{let vt=lt.field(snippetState,!1);if(!vt||ft<0&&vt.active==0)return!1;let Tt=vt.active+ft,Et=ft>0&&!vt.ranges.some(Ct=>Ct.field==Tt+ft);return dt(lt.update({selection:fieldSelection(vt.ranges,Tt),effects:setActive.of(Et?null:new ActiveSnippet(vt.ranges,Tt))})),!0}}const clearSnippet=({state:ft,dispatch:lt})=>ft.field(snippetState,!1)?(lt(ft.update({effects:setActive.of(null)})),!0):!1,nextSnippetField=moveField(1),prevSnippetField=moveField(-1),defaultSnippetKeymap=[{key:"Tab",run:nextSnippetField,shift:prevSnippetField},{key:"Escape",run:clearSnippet}],snippetKeymap=Facet.define({combine(ft){return ft.length?ft[0]:defaultSnippetKeymap}}),addSnippetKeymap=Prec.highest(keymap.compute([snippetKeymap],ft=>ft.facet(snippetKeymap)));function snippetCompletion(ft,lt){return Object.assign(Object.assign({},lt),{apply:snippet(ft)})}const snippetPointerHandler=EditorView.domEventHandlers({mousedown(ft,lt){let dt=lt.state.field(snippetState,!1),vt;if(!dt||(vt=lt.posAtCoords({x:ft.clientX,y:ft.clientY}))==null)return!1;let Tt=dt.ranges.find(Et=>Et.from<=vt&&Et.to>=vt);return!Tt||Tt.field==dt.active?!1:(lt.dispatch({selection:fieldSelection(dt.ranges,Tt.field),effects:setActive.of(dt.ranges.some(Et=>Et.field>Tt.field)?new ActiveSnippet(dt.ranges,Tt.field):null)}),!0)}}),defaults={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},closeBracketEffect=StateEffect.define({map(ft,lt){let dt=lt.mapPos(ft,-1,MapMode.TrackAfter);return dt??void 0}}),skipBracketEffect=StateEffect.define({map(ft,lt){return lt.mapPos(ft)}}),closedBracket=new class extends RangeValue{};closedBracket.startSide=1;closedBracket.endSide=-1;const bracketState=StateField.define({create(){return RangeSet.empty},update(ft,lt){if(lt.selection){let dt=lt.state.doc.lineAt(lt.selection.main.head).from,vt=lt.startState.doc.lineAt(lt.startState.selection.main.head).from;dt!=lt.changes.mapPos(vt,-1)&&(ft=RangeSet.empty)}ft=ft.map(lt.changes);for(let dt of lt.effects)dt.is(closeBracketEffect)?ft=ft.update({add:[closedBracket.range(dt.value,dt.value+1)]}):dt.is(skipBracketEffect)&&(ft=ft.update({filter:vt=>vt!=dt.value}));return ft}});function closeBrackets(){return[inputHandler,bracketState]}const definedClosing="()[]{}<>";function closing(ft){for(let lt=0;lt<definedClosing.length;lt+=2)if(definedClosing.charCodeAt(lt)==ft)return definedClosing.charAt(lt+1);return fromCodePoint(ft<128?ft:ft+1)}function config(ft,lt){return ft.languageDataAt("closeBrackets",lt)[0]||defaults}const android$1=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),inputHandler=EditorView.inputHandler.of((ft,lt,dt,vt)=>{if((android$1?ft.composing:ft.compositionStarted)||ft.state.readOnly)return!1;let Tt=ft.state.selection.main;if(vt.length>2||vt.length==2&&codePointSize(codePointAt(vt,0))==1||lt!=Tt.from||dt!=Tt.to)return!1;let Et=insertBracket(ft.state,vt);return Et?(ft.dispatch(Et),!0):!1}),deleteBracketPair=({state:ft,dispatch:lt})=>{if(ft.readOnly)return!1;let vt=config(ft,ft.selection.main.head).brackets||defaults.brackets,Tt=null,Et=ft.changeByRange(Ct=>{if(Ct.empty){let Rt=prevChar(ft.doc,Ct.head);for(let kt of vt)if(kt==Rt&&nextChar(ft.doc,Ct.head)==closing(codePointAt(kt,0)))return{changes:{from:Ct.head-kt.length,to:Ct.head+kt.length},range:EditorSelection.cursor(Ct.head-kt.length)}}return{range:Tt=Ct}});return Tt||lt(ft.update(Et,{scrollIntoView:!0,userEvent:"delete.backward"})),!Tt},closeBracketsKeymap=[{key:"Backspace",run:deleteBracketPair}];function insertBracket(ft,lt){let dt=config(ft,ft.selection.main.head),vt=dt.brackets||defaults.brackets;for(let Tt of vt){let Et=closing(codePointAt(Tt,0));if(lt==Tt)return Et==Tt?handleSame(ft,Tt,vt.indexOf(Tt+Tt+Tt)>-1,dt):handleOpen(ft,Tt,Et,dt.before||defaults.before);if(lt==Et&&closedBracketAt(ft,ft.selection.main.from))return handleClose(ft,Tt,Et)}return null}function closedBracketAt(ft,lt){let dt=!1;return ft.field(bracketState).between(0,ft.doc.length,vt=>{vt==lt&&(dt=!0)}),dt}function nextChar(ft,lt){let dt=ft.sliceString(lt,lt+2);return dt.slice(0,codePointSize(codePointAt(dt,0)))}function prevChar(ft,lt){let dt=ft.sliceString(lt-2,lt);return codePointSize(codePointAt(dt,0))==dt.length?dt:dt.slice(1)}function handleOpen(ft,lt,dt,vt){let Tt=null,Et=ft.changeByRange(Ct=>{if(!Ct.empty)return{changes:[{insert:lt,from:Ct.from},{insert:dt,from:Ct.to}],effects:closeBracketEffect.of(Ct.to+lt.length),range:EditorSelection.range(Ct.anchor+lt.length,Ct.head+lt.length)};let Rt=nextChar(ft.doc,Ct.head);return!Rt||/\s/.test(Rt)||vt.indexOf(Rt)>-1?{changes:{insert:lt+dt,from:Ct.head},effects:closeBracketEffect.of(Ct.head+lt.length),range:EditorSelection.cursor(Ct.head+lt.length)}:{range:Tt=Ct}});return Tt?null:ft.update(Et,{scrollIntoView:!0,userEvent:"input.type"})}function handleClose(ft,lt,dt){let vt=null,Tt=ft.selection.ranges.map(Et=>Et.empty&&nextChar(ft.doc,Et.head)==dt?EditorSelection.cursor(Et.head+dt.length):vt=Et);return vt?null:ft.update({selection:EditorSelection.create(Tt,ft.selection.mainIndex),scrollIntoView:!0,effects:ft.selection.ranges.map(({from:Et})=>skipBracketEffect.of(Et))})}function handleSame(ft,lt,dt,vt){let Tt=vt.stringPrefixes||defaults.stringPrefixes,Et=null,Ct=ft.changeByRange(Rt=>{if(!Rt.empty)return{changes:[{insert:lt,from:Rt.from},{insert:lt,from:Rt.to}],effects:closeBracketEffect.of(Rt.to+lt.length),range:EditorSelection.range(Rt.anchor+lt.length,Rt.head+lt.length)};let kt=Rt.head,Dt=nextChar(ft.doc,kt),Bt;if(Dt==lt){if(nodeStart(ft,kt))return{changes:{insert:lt+lt,from:kt},effects:closeBracketEffect.of(kt+lt.length),range:EditorSelection.cursor(kt+lt.length)};if(closedBracketAt(ft,kt)){let Ft=dt&&ft.sliceDoc(kt,kt+lt.length*3)==lt+lt+lt;return{range:EditorSelection.cursor(kt+lt.length*(Ft?3:1)),effects:skipBracketEffect.of(kt)}}}else{if(dt&&ft.sliceDoc(kt-2*lt.length,kt)==lt+lt&&(Bt=canStartStringAt(ft,kt-2*lt.length,Tt))>-1&&nodeStart(ft,Bt))return{changes:{insert:lt+lt+lt+lt,from:kt},effects:closeBracketEffect.of(kt+lt.length),range:EditorSelection.cursor(kt+lt.length)};if(ft.charCategorizer(kt)(Dt)!=CharCategory.Word&&canStartStringAt(ft,kt,Tt)>-1&&!probablyInString(ft,kt,lt,Tt))return{changes:{insert:lt+lt,from:kt},effects:closeBracketEffect.of(kt+lt.length),range:EditorSelection.cursor(kt+lt.length)}}return{range:Et=Rt}});return Et?null:ft.update(Ct,{scrollIntoView:!0,userEvent:"input.type"})}function nodeStart(ft,lt){let dt=syntaxTree(ft).resolveInner(lt+1);return dt.parent&&dt.from==lt}function probablyInString(ft,lt,dt,vt){let Tt=syntaxTree(ft).resolveInner(lt,-1),Et=vt.reduce((Ct,Rt)=>Math.max(Ct,Rt.length),0);for(let Ct=0;Ct<5;Ct++){let Rt=ft.sliceDoc(Tt.from,Math.min(Tt.to,Tt.from+dt.length+Et)),kt=Rt.indexOf(dt);if(!kt||kt>-1&&vt.indexOf(Rt.slice(0,kt))>-1){let Bt=Tt.firstChild;for(;Bt&&Bt.from==Tt.from&&Bt.to-Bt.from>dt.length+kt;){if(ft.sliceDoc(Bt.to-dt.length,Bt.to)==dt)return!1;Bt=Bt.firstChild}return!0}let Dt=Tt.to==lt&&Tt.parent;if(!Dt)break;Tt=Dt}return!1}function canStartStringAt(ft,lt,dt){let vt=ft.charCategorizer(lt);if(vt(ft.sliceDoc(lt-1,lt))!=CharCategory.Word)return lt;for(let Tt of dt){let Et=lt-Tt.length;if(ft.sliceDoc(Et,lt)==Tt&&vt(ft.sliceDoc(Et-1,Et))!=CharCategory.Word)return Et}return-1}function autocompletion(ft={}){return[completionState,completionConfig.of(ft),completionPlugin,completionKeymapExt,baseTheme$3]}const completionKeymap=[{key:"Ctrl-Space",run:startCompletion},{key:"Escape",run:closeCompletion},{key:"ArrowDown",run:moveCompletionSelection(!0)},{key:"ArrowUp",run:moveCompletionSelection(!1)},{key:"PageDown",run:moveCompletionSelection(!0,"page")},{key:"PageUp",run:moveCompletionSelection(!1,"page")},{key:"Enter",run:acceptCompletion}],completionKeymapExt=Prec.highest(keymap.computeN([completionConfig],ft=>ft.facet(completionConfig).defaultKeymap?[completionKeymap]:[])),cache$1=new NodeWeakMap,ScopeNodes$1=new Set(["Script","Body","FunctionDefinition","ClassDefinition","LambdaExpression","ForStatement","MatchClause"]);function defID$1(ft){return(lt,dt,vt)=>{if(vt)return!1;let Tt=lt.node.getChild("VariableName");return Tt&&dt(Tt,ft),!0}}const gatherCompletions$1={FunctionDefinition:defID$1("function"),ClassDefinition:defID$1("class"),ForStatement(ft,lt,dt){if(dt){for(let vt=ft.node.firstChild;vt;vt=vt.nextSibling)if(vt.name=="VariableName")lt(vt,"variable");else if(vt.name=="in")break}},ImportStatement(ft,lt){var dt,vt;let{node:Tt}=ft,Et=((dt=Tt.firstChild)===null||dt===void 0?void 0:dt.name)=="from";for(let Ct=Tt.getChild("import");Ct;Ct=Ct.nextSibling)Ct.name=="VariableName"&&((vt=Ct.nextSibling)===null||vt===void 0?void 0:vt.name)!="as"&&lt(Ct,Et?"variable":"namespace")},AssignStatement(ft,lt){for(let dt=ft.node.firstChild;dt;dt=dt.nextSibling)if(dt.name=="VariableName")lt(dt,"variable");else if(dt.name==":"||dt.name=="AssignOp")break},ParamList(ft,lt){for(let dt=null,vt=ft.node.firstChild;vt;vt=vt.nextSibling)vt.name=="VariableName"&&(!dt||!/\*|AssignOp/.test(dt.name))&&lt(vt,"variable"),dt=vt},CapturePattern:defID$1("variable"),AsPattern:defID$1("variable"),__proto__:null};function getScope$1(ft,lt){let dt=cache$1.get(lt);if(dt)return dt;let vt=[],Tt=!0;function Et(Ct,Rt){let kt=ft.sliceString(Ct.from,Ct.to);vt.push({label:kt,type:Rt})}return lt.cursor(IterMode.IncludeAnonymous).iterate(Ct=>{if(Ct.name){let Rt=gatherCompletions$1[Ct.name];if(Rt&&Rt(Ct,Et,Tt)||!Tt&&ScopeNodes$1.has(Ct.name))return!1;Tt=!1}else if(Ct.to-Ct.from>8192){for(let Rt of getScope$1(ft,Ct.node))vt.push(Rt);return!1}}),cache$1.set(lt,vt),vt}const Identifier$1=/^[\w\xa1-\uffff][\w\d\xa1-\uffff]*$/,dontComplete$1=["String","FormatString","Comment","PropertyName"];function localCompletionSource$1(ft){let lt=syntaxTree(ft.state).resolveInner(ft.pos,-1);if(dontComplete$1.indexOf(lt.name)>-1)return null;let dt=lt.name=="VariableName"||lt.to-lt.from<20&&Identifier$1.test(ft.state.sliceDoc(lt.from,lt.to));if(!dt&&!ft.explicit)return null;let vt=[];for(let Tt=lt;Tt;Tt=Tt.parent)ScopeNodes$1.has(Tt.name)&&(vt=vt.concat(getScope$1(ft.state.doc,Tt)));return{options:vt,from:dt?lt.from:ft.pos,validFor:Identifier$1}}const globals=["__annotations__","__builtins__","__debug__","__doc__","__import__","__name__","__loader__","__package__","__spec__","False","None","True"].map(ft=>({label:ft,type:"constant"})).concat(["ArithmeticError","AssertionError","AttributeError","BaseException","BlockingIOError","BrokenPipeError","BufferError","BytesWarning","ChildProcessError","ConnectionAbortedError","ConnectionError","ConnectionRefusedError","ConnectionResetError","DeprecationWarning","EOFError","Ellipsis","EncodingWarning","EnvironmentError","Exception","FileExistsError","FileNotFoundError","FloatingPointError","FutureWarning","GeneratorExit","IOError","ImportError","ImportWarning","IndentationError","IndexError","InterruptedError","IsADirectoryError","KeyError","KeyboardInterrupt","LookupError","MemoryError","ModuleNotFoundError","NameError","NotADirectoryError","NotImplemented","NotImplementedError","OSError","OverflowError","PendingDeprecationWarning","PermissionError","ProcessLookupError","RecursionError","ReferenceError","ResourceWarning","RuntimeError","RuntimeWarning","StopAsyncIteration","StopIteration","SyntaxError","SyntaxWarning","SystemError","SystemExit","TabError","TimeoutError","TypeError","UnboundLocalError","UnicodeDecodeError","UnicodeEncodeError","UnicodeError","UnicodeTranslateError","UnicodeWarning","UserWarning","ValueError","Warning","ZeroDivisionError"].map(ft=>({label:ft,type:"type"}))).concat(["bool","bytearray","bytes","classmethod","complex","float","frozenset","int","list","map","memoryview","object","range","set","staticmethod","str","super","tuple","type"].map(ft=>({label:ft,type:"class"}))).concat(["abs","aiter","all","anext","any","ascii","bin","breakpoint","callable","chr","compile","delattr","dict","dir","divmod","enumerate","eval","exec","exit","filter","format","getattr","globals","hasattr","hash","help","hex","id","input","isinstance","issubclass","iter","len","license","locals","max","min","next","oct","open","ord","pow","print","property","quit","repr","reversed","round","setattr","slice","sorted","sum","vars","zip"].map(ft=>({label:ft,type:"function"}))),snippets$1=[snippetCompletion("def ${name}(${params}):\n	${}",{label:"def",detail:"function",type:"keyword"}),snippetCompletion("for ${name} in ${collection}:\n	${}",{label:"for",detail:"loop",type:"keyword"}),snippetCompletion("while ${}:\n	${}",{label:"while",detail:"loop",type:"keyword"}),snippetCompletion("try:\n	${}\nexcept ${error}:\n	${}",{label:"try",detail:"/ except block",type:"keyword"}),snippetCompletion(`if \${}:
	
`,{label:"if",detail:"block",type:"keyword"}),snippetCompletion("if ${}:\n	${}\nelse:\n	${}",{label:"if",detail:"/ else block",type:"keyword"}),snippetCompletion("class ${name}:\n	def __init__(self, ${params}):\n			${}",{label:"class",detail:"definition",type:"keyword"}),snippetCompletion("import ${module}",{label:"import",detail:"statement",type:"keyword"}),snippetCompletion("from ${module} import ${names}",{label:"from",detail:"import",type:"keyword"})],globalCompletion=ifNotIn(dontComplete$1,completeFromList(globals.concat(snippets$1)));function indentBody(ft,lt){let dt=ft.lineIndent(lt.from),vt=ft.lineAt(ft.pos,-1),Tt=vt.from+vt.text.length;return!/\S/.test(vt.text)&&ft.node.to<Tt+100&&!/\S/.test(ft.state.sliceDoc(Tt,ft.node.to))&&ft.lineIndent(ft.pos,-1)<=dt||/^\s*(else:|elif |except |finally:)/.test(ft.textAfter)&&ft.lineIndent(ft.pos,-1)>dt?null:dt+ft.unit}const pythonLanguage=LRLanguage.define({name:"python",parser:parser$1.configure({props:[indentNodeProp.add({Body:ft=>{var lt;return(lt=indentBody(ft,ft.node))!==null&&lt!==void 0?lt:ft.continue()},IfStatement:ft=>/^\s*(else:|elif )/.test(ft.textAfter)?ft.baseIndent:ft.continue(),TryStatement:ft=>/^\s*(except |finally:|else:)/.test(ft.textAfter)?ft.baseIndent:ft.continue(),"TupleExpression ComprehensionExpression ParamList ArgList ParenthesizedExpression":delimitedIndent({closing:")"}),"DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression":delimitedIndent({closing:"}"}),"ArrayExpression ArrayComprehensionExpression":delimitedIndent({closing:"]"}),"String FormatString":()=>null,Script:ft=>{if(ft.pos+/\s*/.exec(ft.textAfter)[0].length>=ft.node.to){let lt=null;for(let dt=ft.node,vt=dt.to;dt=dt.lastChild,!(!dt||dt.to!=vt);)dt.type.name=="Body"&&(lt=dt);if(lt){let dt=indentBody(ft,lt);if(dt!=null)return dt}}return ft.continue()}}),foldNodeProp.add({"ArrayExpression DictionaryExpression SetExpression TupleExpression":foldInside,Body:(ft,lt)=>({from:ft.from+1,to:ft.to-(ft.to==lt.doc.length?0:1)})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"'''",'"""'],stringPrefixes:["f","fr","rf","r","u","b","br","rb","F","FR","RF","R","U","B","BR","RB"]},commentTokens:{line:"#"},indentOnInput:/^\s*([\}\]\)]|else:|elif |except |finally:)$/}});function python(){return new LanguageSupport(pythonLanguage,[pythonLanguage.data.of({autocomplete:localCompletionSource$1}),pythonLanguage.data.of({autocomplete:globalCompletion})])}function _objectWithoutPropertiesLoose(ft,lt){if(ft==null)return{};var dt={},vt=Object.keys(ft),Tt,Et;for(Et=0;Et<vt.length;Et++)Tt=vt[Et],!(lt.indexOf(Tt)>=0)&&(dt[Tt]=ft[Tt]);return dt}const toggleComment=ft=>{let{state:lt}=ft,dt=lt.doc.lineAt(lt.selection.main.head),vt=getConfig(ft.state,dt.from);return vt.line?toggleLineComment(ft):vt.block?toggleBlockCommentByLine(ft):!1};function command(ft,lt){return({state:dt,dispatch:vt})=>{if(dt.readOnly)return!1;let Tt=ft(lt,dt);return Tt?(vt(dt.update(Tt)),!0):!1}}const toggleLineComment=command(changeLineComment,0),toggleBlockComment=command(changeBlockComment,0),toggleBlockCommentByLine=command((ft,lt)=>changeBlockComment(ft,lt,selectedLineRanges(lt)),0);function getConfig(ft,lt){let dt=ft.languageDataAt("commentTokens",lt);return dt.length?dt[0]:{}}const SearchMargin=50;function findBlockComment(ft,{open:lt,close:dt},vt,Tt){let Et=ft.sliceDoc(vt-SearchMargin,vt),Ct=ft.sliceDoc(Tt,Tt+SearchMargin),Rt=/\s*$/.exec(Et)[0].length,kt=/^\s*/.exec(Ct)[0].length,Dt=Et.length-Rt;if(Et.slice(Dt-lt.length,Dt)==lt&&Ct.slice(kt,kt+dt.length)==dt)return{open:{pos:vt-Rt,margin:Rt&&1},close:{pos:Tt+kt,margin:kt&&1}};let Bt,Ft;Tt-vt<=2*SearchMargin?Bt=Ft=ft.sliceDoc(vt,Tt):(Bt=ft.sliceDoc(vt,vt+SearchMargin),Ft=ft.sliceDoc(Tt-SearchMargin,Tt));let Ut=/^\s*/.exec(Bt)[0].length,Zt=/\s*$/.exec(Ft)[0].length,Kt=Ft.length-Zt-dt.length;return Bt.slice(Ut,Ut+lt.length)==lt&&Ft.slice(Kt,Kt+dt.length)==dt?{open:{pos:vt+Ut+lt.length,margin:/\s/.test(Bt.charAt(Ut+lt.length))?1:0},close:{pos:Tt-Zt-dt.length,margin:/\s/.test(Ft.charAt(Kt-1))?1:0}}:null}function selectedLineRanges(ft){let lt=[];for(let dt of ft.selection.ranges){let vt=ft.doc.lineAt(dt.from),Tt=dt.to<=vt.to?vt:ft.doc.lineAt(dt.to),Et=lt.length-1;Et>=0&&lt[Et].to>vt.from?lt[Et].to=Tt.to:lt.push({from:vt.from,to:Tt.to})}return lt}function changeBlockComment(ft,lt,dt=lt.selection.ranges){let vt=dt.map(Et=>getConfig(lt,Et.from).block);if(!vt.every(Et=>Et))return null;let Tt=dt.map((Et,Ct)=>findBlockComment(lt,vt[Ct],Et.from,Et.to));if(ft!=2&&!Tt.every(Et=>Et))return{changes:lt.changes(dt.map((Et,Ct)=>Tt[Ct]?[]:[{from:Et.from,insert:vt[Ct].open+" "},{from:Et.to,insert:" "+vt[Ct].close}]))};if(ft!=1&&Tt.some(Et=>Et)){let Et=[];for(let Ct=0,Rt;Ct<Tt.length;Ct++)if(Rt=Tt[Ct]){let kt=vt[Ct],{open:Dt,close:Bt}=Rt;Et.push({from:Dt.pos-kt.open.length,to:Dt.pos+Dt.margin},{from:Bt.pos-Bt.margin,to:Bt.pos+kt.close.length})}return{changes:Et}}return null}function changeLineComment(ft,lt,dt=lt.selection.ranges){let vt=[],Tt=-1;for(let{from:Et,to:Ct}of dt){let Rt=vt.length,kt=1e9;for(let Dt=Et;Dt<=Ct;){let Bt=lt.doc.lineAt(Dt);if(Bt.from>Tt&&(Et==Ct||Ct>Bt.from)){Tt=Bt.from;let Ft=getConfig(lt,Bt.from).line;if(!Ft)continue;let Ut=/^\s*/.exec(Bt.text)[0].length,Zt=Ut==Bt.length,Kt=Bt.text.slice(Ut,Ut+Ft.length)==Ft?Ut:-1;Ut<Bt.text.length&&Ut<kt&&(kt=Ut),vt.push({line:Bt,comment:Kt,token:Ft,indent:Ut,empty:Zt,single:!1})}Dt=Bt.to+1}if(kt<1e9)for(let Dt=Rt;Dt<vt.length;Dt++)vt[Dt].indent<vt[Dt].line.text.length&&(vt[Dt].indent=kt);vt.length==Rt+1&&(vt[Rt].single=!0)}if(ft!=2&&vt.some(Et=>Et.comment<0&&(!Et.empty||Et.single))){let Et=[];for(let{line:Rt,token:kt,indent:Dt,empty:Bt,single:Ft}of vt)(Ft||!Bt)&&Et.push({from:Rt.from+Dt,insert:kt+" "});let Ct=lt.changes(Et);return{changes:Ct,selection:lt.selection.map(Ct,1)}}else if(ft!=1&&vt.some(Et=>Et.comment>=0)){let Et=[];for(let{line:Ct,comment:Rt,token:kt}of vt)if(Rt>=0){let Dt=Ct.from+Rt,Bt=Dt+kt.length;Ct.text[Bt-Ct.from]==" "&&Bt++,Et.push({from:Dt,to:Bt})}return{changes:Et}}return null}const fromHistory=Annotation.define(),isolateHistory=Annotation.define(),invertedEffects=Facet.define(),historyConfig=Facet.define({combine(ft){return combineConfig(ft,{minDepth:100,newGroupDelay:500,joinToEvent:(lt,dt)=>dt},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(lt,dt)=>(vt,Tt)=>lt(vt,Tt)||dt(vt,Tt)})}});function changeEnd(ft){let lt=0;return ft.iterChangedRanges((dt,vt)=>lt=vt),lt}const historyField_=StateField.define({create(){return HistoryState.empty},update(ft,lt){let dt=lt.state.facet(historyConfig),vt=lt.annotation(fromHistory);if(vt){let kt=lt.docChanged?EditorSelection.single(changeEnd(lt.changes)):void 0,Dt=HistEvent.fromTransaction(lt,kt),Bt=vt.side,Ft=Bt==0?ft.undone:ft.done;return Dt?Ft=updateBranch(Ft,Ft.length,dt.minDepth,Dt):Ft=addSelection(Ft,lt.startState.selection),new HistoryState(Bt==0?vt.rest:Ft,Bt==0?Ft:vt.rest)}let Tt=lt.annotation(isolateHistory);if((Tt=="full"||Tt=="before")&&(ft=ft.isolate()),lt.annotation(Transaction.addToHistory)===!1)return lt.changes.empty?ft:ft.addMapping(lt.changes.desc);let Et=HistEvent.fromTransaction(lt),Ct=lt.annotation(Transaction.time),Rt=lt.annotation(Transaction.userEvent);return Et?ft=ft.addChanges(Et,Ct,Rt,dt,lt):lt.selection&&(ft=ft.addSelection(lt.startState.selection,Ct,Rt,dt.newGroupDelay)),(Tt=="full"||Tt=="after")&&(ft=ft.isolate()),ft},toJSON(ft){return{done:ft.done.map(lt=>lt.toJSON()),undone:ft.undone.map(lt=>lt.toJSON())}},fromJSON(ft){return new HistoryState(ft.done.map(HistEvent.fromJSON),ft.undone.map(HistEvent.fromJSON))}});function history(ft={}){return[historyField_,historyConfig.of(ft),EditorView.domEventHandlers({beforeinput(lt,dt){let vt=lt.inputType=="historyUndo"?undo:lt.inputType=="historyRedo"?redo:null;return vt?(lt.preventDefault(),vt(dt)):!1}})]}function cmd(ft,lt){return function({state:dt,dispatch:vt}){if(!lt&&dt.readOnly)return!1;let Tt=dt.field(historyField_,!1);if(!Tt)return!1;let Et=Tt.pop(ft,dt,lt);return Et?(vt(Et),!0):!1}}const undo=cmd(0,!1),redo=cmd(1,!1),undoSelection=cmd(0,!0),redoSelection=cmd(1,!0);class HistEvent{constructor(lt,dt,vt,Tt,Et){this.changes=lt,this.effects=dt,this.mapped=vt,this.startSelection=Tt,this.selectionsAfter=Et}setSelAfter(lt){return new HistEvent(this.changes,this.effects,this.mapped,this.startSelection,lt)}toJSON(){var lt,dt,vt;return{changes:(lt=this.changes)===null||lt===void 0?void 0:lt.toJSON(),mapped:(dt=this.mapped)===null||dt===void 0?void 0:dt.toJSON(),startSelection:(vt=this.startSelection)===null||vt===void 0?void 0:vt.toJSON(),selectionsAfter:this.selectionsAfter.map(Tt=>Tt.toJSON())}}static fromJSON(lt){return new HistEvent(lt.changes&&ChangeSet.fromJSON(lt.changes),[],lt.mapped&&ChangeDesc.fromJSON(lt.mapped),lt.startSelection&&EditorSelection.fromJSON(lt.startSelection),lt.selectionsAfter.map(EditorSelection.fromJSON))}static fromTransaction(lt,dt){let vt=none;for(let Tt of lt.startState.facet(invertedEffects)){let Et=Tt(lt);Et.length&&(vt=vt.concat(Et))}return!vt.length&&lt.changes.empty?null:new HistEvent(lt.changes.invert(lt.startState.doc),vt,void 0,dt||lt.startState.selection,none)}static selection(lt){return new HistEvent(void 0,none,void 0,void 0,lt)}}function updateBranch(ft,lt,dt,vt){let Tt=lt+1>dt+20?lt-dt-1:0,Et=ft.slice(Tt,lt);return Et.push(vt),Et}function isAdjacent(ft,lt){let dt=[],vt=!1;return ft.iterChangedRanges((Tt,Et)=>dt.push(Tt,Et)),lt.iterChangedRanges((Tt,Et,Ct,Rt)=>{for(let kt=0;kt<dt.length;){let Dt=dt[kt++],Bt=dt[kt++];Rt>=Dt&&Ct<=Bt&&(vt=!0)}}),vt}function eqSelectionShape(ft,lt){return ft.ranges.length==lt.ranges.length&&ft.ranges.filter((dt,vt)=>dt.empty!=lt.ranges[vt].empty).length===0}function conc(ft,lt){return ft.length?lt.length?ft.concat(lt):ft:lt}const none=[],MaxSelectionsPerEvent=200;function addSelection(ft,lt){if(ft.length){let dt=ft[ft.length-1],vt=dt.selectionsAfter.slice(Math.max(0,dt.selectionsAfter.length-MaxSelectionsPerEvent));return vt.length&&vt[vt.length-1].eq(lt)?ft:(vt.push(lt),updateBranch(ft,ft.length-1,1e9,dt.setSelAfter(vt)))}else return[HistEvent.selection([lt])]}function popSelection(ft){let lt=ft[ft.length-1],dt=ft.slice();return dt[ft.length-1]=lt.setSelAfter(lt.selectionsAfter.slice(0,lt.selectionsAfter.length-1)),dt}function addMappingToBranch(ft,lt){if(!ft.length)return ft;let dt=ft.length,vt=none;for(;dt;){let Tt=mapEvent(ft[dt-1],lt,vt);if(Tt.changes&&!Tt.changes.empty||Tt.effects.length){let Et=ft.slice(0,dt);return Et[dt-1]=Tt,Et}else lt=Tt.mapped,dt--,vt=Tt.selectionsAfter}return vt.length?[HistEvent.selection(vt)]:none}function mapEvent(ft,lt,dt){let vt=conc(ft.selectionsAfter.length?ft.selectionsAfter.map(Rt=>Rt.map(lt)):none,dt);if(!ft.changes)return HistEvent.selection(vt);let Tt=ft.changes.map(lt),Et=lt.mapDesc(ft.changes,!0),Ct=ft.mapped?ft.mapped.composeDesc(Et):Et;return new HistEvent(Tt,StateEffect.mapEffects(ft.effects,lt),Ct,ft.startSelection.map(Et),vt)}const joinableUserEvent=/^(input\.type|delete)($|\.)/;class HistoryState{constructor(lt,dt,vt=0,Tt=void 0){this.done=lt,this.undone=dt,this.prevTime=vt,this.prevUserEvent=Tt}isolate(){return this.prevTime?new HistoryState(this.done,this.undone):this}addChanges(lt,dt,vt,Tt,Et){let Ct=this.done,Rt=Ct[Ct.length-1];return Rt&&Rt.changes&&!Rt.changes.empty&&lt.changes&&(!vt||joinableUserEvent.test(vt))&&(!Rt.selectionsAfter.length&&dt-this.prevTime<Tt.newGroupDelay&&Tt.joinToEvent(Et,isAdjacent(Rt.changes,lt.changes))||vt=="input.type.compose")?Ct=updateBranch(Ct,Ct.length-1,Tt.minDepth,new HistEvent(lt.changes.compose(Rt.changes),conc(lt.effects,Rt.effects),Rt.mapped,Rt.startSelection,none)):Ct=updateBranch(Ct,Ct.length,Tt.minDepth,lt),new HistoryState(Ct,none,dt,vt)}addSelection(lt,dt,vt,Tt){let Et=this.done.length?this.done[this.done.length-1].selectionsAfter:none;return Et.length>0&&dt-this.prevTime<Tt&&vt==this.prevUserEvent&&vt&&/^select($|\.)/.test(vt)&&eqSelectionShape(Et[Et.length-1],lt)?this:new HistoryState(addSelection(this.done,lt),this.undone,dt,vt)}addMapping(lt){return new HistoryState(addMappingToBranch(this.done,lt),addMappingToBranch(this.undone,lt),this.prevTime,this.prevUserEvent)}pop(lt,dt,vt){let Tt=lt==0?this.done:this.undone;if(Tt.length==0)return null;let Et=Tt[Tt.length-1];if(vt&&Et.selectionsAfter.length)return dt.update({selection:Et.selectionsAfter[Et.selectionsAfter.length-1],annotations:fromHistory.of({side:lt,rest:popSelection(Tt)}),userEvent:lt==0?"select.undo":"select.redo",scrollIntoView:!0});if(Et.changes){let Ct=Tt.length==1?none:Tt.slice(0,Tt.length-1);return Et.mapped&&(Ct=addMappingToBranch(Ct,Et.mapped)),dt.update({changes:Et.changes,selection:Et.startSelection,effects:Et.effects,annotations:fromHistory.of({side:lt,rest:Ct}),filter:!1,userEvent:lt==0?"undo":"redo",scrollIntoView:!0})}else return null}}HistoryState.empty=new HistoryState(none,none);const historyKeymap=[{key:"Mod-z",run:undo,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:redo,preventDefault:!0},{linux:"Ctrl-Shift-z",run:redo,preventDefault:!0},{key:"Mod-u",run:undoSelection,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:redoSelection,preventDefault:!0}];function updateSel(ft,lt){return EditorSelection.create(ft.ranges.map(lt),ft.mainIndex)}function setSel(ft,lt){return ft.update({selection:lt,scrollIntoView:!0,userEvent:"select"})}function moveSel({state:ft,dispatch:lt},dt){let vt=updateSel(ft.selection,dt);return vt.eq(ft.selection)?!1:(lt(setSel(ft,vt)),!0)}function rangeEnd(ft,lt){return EditorSelection.cursor(lt?ft.to:ft.from)}function cursorByChar(ft,lt){return moveSel(ft,dt=>dt.empty?ft.moveByChar(dt,lt):rangeEnd(dt,lt))}function ltrAtCursor(ft){return ft.textDirectionAt(ft.state.selection.main.head)==Direction.LTR}const cursorCharLeft=ft=>cursorByChar(ft,!ltrAtCursor(ft)),cursorCharRight=ft=>cursorByChar(ft,ltrAtCursor(ft));function cursorByGroup(ft,lt){return moveSel(ft,dt=>dt.empty?ft.moveByGroup(dt,lt):rangeEnd(dt,lt))}const cursorGroupLeft=ft=>cursorByGroup(ft,!ltrAtCursor(ft)),cursorGroupRight=ft=>cursorByGroup(ft,ltrAtCursor(ft));function interestingNode(ft,lt,dt){if(lt.type.prop(dt))return!0;let vt=lt.to-lt.from;return vt&&(vt>2||/[^\s,.;:]/.test(ft.sliceDoc(lt.from,lt.to)))||lt.firstChild}function moveBySyntax(ft,lt,dt){let vt=syntaxTree(ft).resolveInner(lt.head),Tt=dt?NodeProp.closedBy:NodeProp.openedBy;for(let kt=lt.head;;){let Dt=dt?vt.childAfter(kt):vt.childBefore(kt);if(!Dt)break;interestingNode(ft,Dt,Tt)?vt=Dt:kt=dt?Dt.to:Dt.from}let Et=vt.type.prop(Tt),Ct,Rt;return Et&&(Ct=dt?matchBrackets(ft,vt.from,1):matchBrackets(ft,vt.to,-1))&&Ct.matched?Rt=dt?Ct.end.to:Ct.end.from:Rt=dt?vt.to:vt.from,EditorSelection.cursor(Rt,dt?-1:1)}const cursorSyntaxLeft=ft=>moveSel(ft,lt=>moveBySyntax(ft.state,lt,!ltrAtCursor(ft))),cursorSyntaxRight=ft=>moveSel(ft,lt=>moveBySyntax(ft.state,lt,ltrAtCursor(ft)));function cursorByLine(ft,lt){return moveSel(ft,dt=>{if(!dt.empty)return rangeEnd(dt,lt);let vt=ft.moveVertically(dt,lt);return vt.head!=dt.head?vt:ft.moveToLineBoundary(dt,lt)})}const cursorLineUp=ft=>cursorByLine(ft,!1),cursorLineDown=ft=>cursorByLine(ft,!0);function pageInfo(ft){let lt=ft.scrollDOM.clientHeight<ft.scrollDOM.scrollHeight-2,dt=0,vt=0,Tt;if(lt){for(let Et of ft.state.facet(EditorView.scrollMargins)){let Ct=Et(ft);Ct!=null&&Ct.top&&(dt=Math.max(Ct==null?void 0:Ct.top,dt)),Ct!=null&&Ct.bottom&&(vt=Math.max(Ct==null?void 0:Ct.bottom,vt))}Tt=ft.scrollDOM.clientHeight-dt-vt}else Tt=(ft.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:dt,marginBottom:vt,selfScroll:lt,height:Math.max(ft.defaultLineHeight,Tt-5)}}function cursorByPage(ft,lt){let dt=pageInfo(ft),{state:vt}=ft,Tt=updateSel(vt.selection,Ct=>Ct.empty?ft.moveVertically(Ct,lt,dt.height):rangeEnd(Ct,lt));if(Tt.eq(vt.selection))return!1;let Et;if(dt.selfScroll){let Ct=ft.coordsAtPos(vt.selection.main.head),Rt=ft.scrollDOM.getBoundingClientRect(),kt=Rt.top+dt.marginTop,Dt=Rt.bottom-dt.marginBottom;Ct&&Ct.top>kt&&Ct.bottom<Dt&&(Et=EditorView.scrollIntoView(Tt.main.head,{y:"start",yMargin:Ct.top-kt}))}return ft.dispatch(setSel(vt,Tt),{effects:Et}),!0}const cursorPageUp=ft=>cursorByPage(ft,!1),cursorPageDown=ft=>cursorByPage(ft,!0);function moveByLineBoundary(ft,lt,dt){let vt=ft.lineBlockAt(lt.head),Tt=ft.moveToLineBoundary(lt,dt);if(Tt.head==lt.head&&Tt.head!=(dt?vt.to:vt.from)&&(Tt=ft.moveToLineBoundary(lt,dt,!1)),!dt&&Tt.head==vt.from&&vt.length){let Et=/^\s*/.exec(ft.state.sliceDoc(vt.from,Math.min(vt.from+100,vt.to)))[0].length;Et&&lt.head!=vt.from+Et&&(Tt=EditorSelection.cursor(vt.from+Et))}return Tt}const cursorLineBoundaryForward=ft=>moveSel(ft,lt=>moveByLineBoundary(ft,lt,!0)),cursorLineBoundaryBackward=ft=>moveSel(ft,lt=>moveByLineBoundary(ft,lt,!1)),cursorLineBoundaryLeft=ft=>moveSel(ft,lt=>moveByLineBoundary(ft,lt,!ltrAtCursor(ft))),cursorLineBoundaryRight=ft=>moveSel(ft,lt=>moveByLineBoundary(ft,lt,ltrAtCursor(ft))),cursorLineStart=ft=>moveSel(ft,lt=>EditorSelection.cursor(ft.lineBlockAt(lt.head).from,1)),cursorLineEnd=ft=>moveSel(ft,lt=>EditorSelection.cursor(ft.lineBlockAt(lt.head).to,-1));function toMatchingBracket(ft,lt,dt){let vt=!1,Tt=updateSel(ft.selection,Et=>{let Ct=matchBrackets(ft,Et.head,-1)||matchBrackets(ft,Et.head,1)||Et.head>0&&matchBrackets(ft,Et.head-1,1)||Et.head<ft.doc.length&&matchBrackets(ft,Et.head+1,-1);if(!Ct||!Ct.end)return Et;vt=!0;let Rt=Ct.start.from==Et.head?Ct.end.to:Ct.end.from;return dt?EditorSelection.range(Et.anchor,Rt):EditorSelection.cursor(Rt)});return vt?(lt(setSel(ft,Tt)),!0):!1}const cursorMatchingBracket=({state:ft,dispatch:lt})=>toMatchingBracket(ft,lt,!1);function extendSel(ft,lt){let dt=updateSel(ft.state.selection,vt=>{let Tt=lt(vt);return EditorSelection.range(vt.anchor,Tt.head,Tt.goalColumn,Tt.bidiLevel||void 0)});return dt.eq(ft.state.selection)?!1:(ft.dispatch(setSel(ft.state,dt)),!0)}function selectByChar(ft,lt){return extendSel(ft,dt=>ft.moveByChar(dt,lt))}const selectCharLeft=ft=>selectByChar(ft,!ltrAtCursor(ft)),selectCharRight=ft=>selectByChar(ft,ltrAtCursor(ft));function selectByGroup(ft,lt){return extendSel(ft,dt=>ft.moveByGroup(dt,lt))}const selectGroupLeft=ft=>selectByGroup(ft,!ltrAtCursor(ft)),selectGroupRight=ft=>selectByGroup(ft,ltrAtCursor(ft)),selectSyntaxLeft=ft=>extendSel(ft,lt=>moveBySyntax(ft.state,lt,!ltrAtCursor(ft))),selectSyntaxRight=ft=>extendSel(ft,lt=>moveBySyntax(ft.state,lt,ltrAtCursor(ft)));function selectByLine(ft,lt){return extendSel(ft,dt=>ft.moveVertically(dt,lt))}const selectLineUp=ft=>selectByLine(ft,!1),selectLineDown=ft=>selectByLine(ft,!0);function selectByPage(ft,lt){return extendSel(ft,dt=>ft.moveVertically(dt,lt,pageInfo(ft).height))}const selectPageUp=ft=>selectByPage(ft,!1),selectPageDown=ft=>selectByPage(ft,!0),selectLineBoundaryForward=ft=>extendSel(ft,lt=>moveByLineBoundary(ft,lt,!0)),selectLineBoundaryBackward=ft=>extendSel(ft,lt=>moveByLineBoundary(ft,lt,!1)),selectLineBoundaryLeft=ft=>extendSel(ft,lt=>moveByLineBoundary(ft,lt,!ltrAtCursor(ft))),selectLineBoundaryRight=ft=>extendSel(ft,lt=>moveByLineBoundary(ft,lt,ltrAtCursor(ft))),selectLineStart=ft=>extendSel(ft,lt=>EditorSelection.cursor(ft.lineBlockAt(lt.head).from)),selectLineEnd=ft=>extendSel(ft,lt=>EditorSelection.cursor(ft.lineBlockAt(lt.head).to)),cursorDocStart=({state:ft,dispatch:lt})=>(lt(setSel(ft,{anchor:0})),!0),cursorDocEnd=({state:ft,dispatch:lt})=>(lt(setSel(ft,{anchor:ft.doc.length})),!0),selectDocStart=({state:ft,dispatch:lt})=>(lt(setSel(ft,{anchor:ft.selection.main.anchor,head:0})),!0),selectDocEnd=({state:ft,dispatch:lt})=>(lt(setSel(ft,{anchor:ft.selection.main.anchor,head:ft.doc.length})),!0),selectAll=({state:ft,dispatch:lt})=>(lt(ft.update({selection:{anchor:0,head:ft.doc.length},userEvent:"select"})),!0),selectLine=({state:ft,dispatch:lt})=>{let dt=selectedLineBlocks(ft).map(({from:vt,to:Tt})=>EditorSelection.range(vt,Math.min(Tt+1,ft.doc.length)));return lt(ft.update({selection:EditorSelection.create(dt),userEvent:"select"})),!0},selectParentSyntax=({state:ft,dispatch:lt})=>{let dt=updateSel(ft.selection,vt=>{var Tt;let Et=syntaxTree(ft).resolveInner(vt.head,1);for(;!(Et.from<vt.from&&Et.to>=vt.to||Et.to>vt.to&&Et.from<=vt.from||!(!((Tt=Et.parent)===null||Tt===void 0)&&Tt.parent));)Et=Et.parent;return EditorSelection.range(Et.to,Et.from)});return lt(setSel(ft,dt)),!0},simplifySelection=({state:ft,dispatch:lt})=>{let dt=ft.selection,vt=null;return dt.ranges.length>1?vt=EditorSelection.create([dt.main]):dt.main.empty||(vt=EditorSelection.create([EditorSelection.cursor(dt.main.head)])),vt?(lt(setSel(ft,vt)),!0):!1};function deleteBy(ft,lt){if(ft.state.readOnly)return!1;let dt="delete.selection",{state:vt}=ft,Tt=vt.changeByRange(Et=>{let{from:Ct,to:Rt}=Et;if(Ct==Rt){let kt=lt(Ct);kt<Ct?(dt="delete.backward",kt=skipAtomic(ft,kt,!1)):kt>Ct&&(dt="delete.forward",kt=skipAtomic(ft,kt,!0)),Ct=Math.min(Ct,kt),Rt=Math.max(Rt,kt)}else Ct=skipAtomic(ft,Ct,!1),Rt=skipAtomic(ft,Rt,!0);return Ct==Rt?{range:Et}:{changes:{from:Ct,to:Rt},range:EditorSelection.cursor(Ct)}});return Tt.changes.empty?!1:(ft.dispatch(vt.update(Tt,{scrollIntoView:!0,userEvent:dt,effects:dt=="delete.selection"?EditorView.announce.of(vt.phrase("Selection deleted")):void 0})),!0)}function skipAtomic(ft,lt,dt){if(ft instanceof EditorView)for(let vt of ft.state.facet(EditorView.atomicRanges).map(Tt=>Tt(ft)))vt.between(lt,lt,(Tt,Et)=>{Tt<lt&&Et>lt&&(lt=dt?Et:Tt)});return lt}const deleteByChar=(ft,lt)=>deleteBy(ft,dt=>{let{state:vt}=ft,Tt=vt.doc.lineAt(dt),Et,Ct;if(!lt&&dt>Tt.from&&dt<Tt.from+200&&!/[^ \t]/.test(Et=Tt.text.slice(0,dt-Tt.from))){if(Et[Et.length-1]=="	")return dt-1;let Rt=countColumn(Et,vt.tabSize),kt=Rt%getIndentUnit(vt)||getIndentUnit(vt);for(let Dt=0;Dt<kt&&Et[Et.length-1-Dt]==" ";Dt++)dt--;Ct=dt}else Ct=findClusterBreak(Tt.text,dt-Tt.from,lt,lt)+Tt.from,Ct==dt&&Tt.number!=(lt?vt.doc.lines:1)&&(Ct+=lt?1:-1);return Ct}),deleteCharBackward=ft=>deleteByChar(ft,!1),deleteCharForward=ft=>deleteByChar(ft,!0),deleteByGroup=(ft,lt)=>deleteBy(ft,dt=>{let vt=dt,{state:Tt}=ft,Et=Tt.doc.lineAt(vt),Ct=Tt.charCategorizer(vt);for(let Rt=null;;){if(vt==(lt?Et.to:Et.from)){vt==dt&&Et.number!=(lt?Tt.doc.lines:1)&&(vt+=lt?1:-1);break}let kt=findClusterBreak(Et.text,vt-Et.from,lt)+Et.from,Dt=Et.text.slice(Math.min(vt,kt)-Et.from,Math.max(vt,kt)-Et.from),Bt=Ct(Dt);if(Rt!=null&&Bt!=Rt)break;(Dt!=" "||vt!=dt)&&(Rt=Bt),vt=kt}return vt}),deleteGroupBackward=ft=>deleteByGroup(ft,!1),deleteGroupForward=ft=>deleteByGroup(ft,!0),deleteToLineEnd=ft=>deleteBy(ft,lt=>{let dt=ft.lineBlockAt(lt).to;return lt<dt?dt:Math.min(ft.state.doc.length,lt+1)}),deleteToLineStart=ft=>deleteBy(ft,lt=>{let dt=ft.lineBlockAt(lt).from;return lt>dt?dt:Math.max(0,lt-1)}),splitLine=({state:ft,dispatch:lt})=>{if(ft.readOnly)return!1;let dt=ft.changeByRange(vt=>({changes:{from:vt.from,to:vt.to,insert:Text.of(["",""])},range:EditorSelection.cursor(vt.from)}));return lt(ft.update(dt,{scrollIntoView:!0,userEvent:"input"})),!0},transposeChars=({state:ft,dispatch:lt})=>{if(ft.readOnly)return!1;let dt=ft.changeByRange(vt=>{if(!vt.empty||vt.from==0||vt.from==ft.doc.length)return{range:vt};let Tt=vt.from,Et=ft.doc.lineAt(Tt),Ct=Tt==Et.from?Tt-1:findClusterBreak(Et.text,Tt-Et.from,!1)+Et.from,Rt=Tt==Et.to?Tt+1:findClusterBreak(Et.text,Tt-Et.from,!0)+Et.from;return{changes:{from:Ct,to:Rt,insert:ft.doc.slice(Tt,Rt).append(ft.doc.slice(Ct,Tt))},range:EditorSelection.cursor(Rt)}});return dt.changes.empty?!1:(lt(ft.update(dt,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function selectedLineBlocks(ft){let lt=[],dt=-1;for(let vt of ft.selection.ranges){let Tt=ft.doc.lineAt(vt.from),Et=ft.doc.lineAt(vt.to);if(!vt.empty&&vt.to==Et.from&&(Et=ft.doc.lineAt(vt.to-1)),dt>=Tt.number){let Ct=lt[lt.length-1];Ct.to=Et.to,Ct.ranges.push(vt)}else lt.push({from:Tt.from,to:Et.to,ranges:[vt]});dt=Et.number+1}return lt}function moveLine(ft,lt,dt){if(ft.readOnly)return!1;let vt=[],Tt=[];for(let Et of selectedLineBlocks(ft)){if(dt?Et.to==ft.doc.length:Et.from==0)continue;let Ct=ft.doc.lineAt(dt?Et.to+1:Et.from-1),Rt=Ct.length+1;if(dt){vt.push({from:Et.to,to:Ct.to},{from:Et.from,insert:Ct.text+ft.lineBreak});for(let kt of Et.ranges)Tt.push(EditorSelection.range(Math.min(ft.doc.length,kt.anchor+Rt),Math.min(ft.doc.length,kt.head+Rt)))}else{vt.push({from:Ct.from,to:Et.from},{from:Et.to,insert:ft.lineBreak+Ct.text});for(let kt of Et.ranges)Tt.push(EditorSelection.range(kt.anchor-Rt,kt.head-Rt))}}return vt.length?(lt(ft.update({changes:vt,scrollIntoView:!0,selection:EditorSelection.create(Tt,ft.selection.mainIndex),userEvent:"move.line"})),!0):!1}const moveLineUp=({state:ft,dispatch:lt})=>moveLine(ft,lt,!1),moveLineDown=({state:ft,dispatch:lt})=>moveLine(ft,lt,!0);function copyLine(ft,lt,dt){if(ft.readOnly)return!1;let vt=[];for(let Tt of selectedLineBlocks(ft))dt?vt.push({from:Tt.from,insert:ft.doc.slice(Tt.from,Tt.to)+ft.lineBreak}):vt.push({from:Tt.to,insert:ft.lineBreak+ft.doc.slice(Tt.from,Tt.to)});return lt(ft.update({changes:vt,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const copyLineUp=({state:ft,dispatch:lt})=>copyLine(ft,lt,!1),copyLineDown=({state:ft,dispatch:lt})=>copyLine(ft,lt,!0),deleteLine=ft=>{if(ft.state.readOnly)return!1;let{state:lt}=ft,dt=lt.changes(selectedLineBlocks(lt).map(({from:Tt,to:Et})=>(Tt>0?Tt--:Et<lt.doc.length&&Et++,{from:Tt,to:Et}))),vt=updateSel(lt.selection,Tt=>ft.moveVertically(Tt,!0)).map(dt);return ft.dispatch({changes:dt,selection:vt,scrollIntoView:!0,userEvent:"delete.line"}),!0};function isBetweenBrackets(ft,lt){if(/\(\)|\[\]|\{\}/.test(ft.sliceDoc(lt-1,lt+1)))return{from:lt,to:lt};let dt=syntaxTree(ft).resolveInner(lt),vt=dt.childBefore(lt),Tt=dt.childAfter(lt),Et;return vt&&Tt&&vt.to<=lt&&Tt.from>=lt&&(Et=vt.type.prop(NodeProp.closedBy))&&Et.indexOf(Tt.name)>-1&&ft.doc.lineAt(vt.to).from==ft.doc.lineAt(Tt.from).from?{from:vt.to,to:Tt.from}:null}const insertNewlineAndIndent=newlineAndIndent(!1),insertBlankLine=newlineAndIndent(!0);function newlineAndIndent(ft){return({state:lt,dispatch:dt})=>{if(lt.readOnly)return!1;let vt=lt.changeByRange(Tt=>{let{from:Et,to:Ct}=Tt,Rt=lt.doc.lineAt(Et),kt=!ft&&Et==Ct&&isBetweenBrackets(lt,Et);ft&&(Et=Ct=(Ct<=Rt.to?Rt:lt.doc.lineAt(Ct)).to);let Dt=new IndentContext(lt,{simulateBreak:Et,simulateDoubleBreak:!!kt}),Bt=getIndentation(Dt,Et);for(Bt==null&&(Bt=/^\s*/.exec(lt.doc.lineAt(Et).text)[0].length);Ct<Rt.to&&/\s/.test(Rt.text[Ct-Rt.from]);)Ct++;kt?{from:Et,to:Ct}=kt:Et>Rt.from&&Et<Rt.from+100&&!/\S/.test(Rt.text.slice(0,Et))&&(Et=Rt.from);let Ft=["",indentString(lt,Bt)];return kt&&Ft.push(indentString(lt,Dt.lineIndent(Rt.from,-1))),{changes:{from:Et,to:Ct,insert:Text.of(Ft)},range:EditorSelection.cursor(Et+1+Ft[1].length)}});return dt(lt.update(vt,{scrollIntoView:!0,userEvent:"input"})),!0}}function changeBySelectedLine(ft,lt){let dt=-1;return ft.changeByRange(vt=>{let Tt=[];for(let Ct=vt.from;Ct<=vt.to;){let Rt=ft.doc.lineAt(Ct);Rt.number>dt&&(vt.empty||vt.to>Rt.from)&&(lt(Rt,Tt,vt),dt=Rt.number),Ct=Rt.to+1}let Et=ft.changes(Tt);return{changes:Tt,range:EditorSelection.range(Et.mapPos(vt.anchor,1),Et.mapPos(vt.head,1))}})}const indentSelection=({state:ft,dispatch:lt})=>{if(ft.readOnly)return!1;let dt=Object.create(null),vt=new IndentContext(ft,{overrideIndentation:Et=>{let Ct=dt[Et];return Ct??-1}}),Tt=changeBySelectedLine(ft,(Et,Ct,Rt)=>{let kt=getIndentation(vt,Et.from);if(kt==null)return;/\S/.test(Et.text)||(kt=0);let Dt=/^\s*/.exec(Et.text)[0],Bt=indentString(ft,kt);(Dt!=Bt||Rt.from<Et.from+Dt.length)&&(dt[Et.from]=kt,Ct.push({from:Et.from,to:Et.from+Dt.length,insert:Bt}))});return Tt.changes.empty||lt(ft.update(Tt,{userEvent:"indent"})),!0},indentMore=({state:ft,dispatch:lt})=>ft.readOnly?!1:(lt(ft.update(changeBySelectedLine(ft,(dt,vt)=>{vt.push({from:dt.from,insert:ft.facet(indentUnit)})}),{userEvent:"input.indent"})),!0),indentLess=({state:ft,dispatch:lt})=>ft.readOnly?!1:(lt(ft.update(changeBySelectedLine(ft,(dt,vt)=>{let Tt=/^\s*/.exec(dt.text)[0];if(!Tt)return;let Et=countColumn(Tt,ft.tabSize),Ct=0,Rt=indentString(ft,Math.max(0,Et-getIndentUnit(ft)));for(;Ct<Tt.length&&Ct<Rt.length&&Tt.charCodeAt(Ct)==Rt.charCodeAt(Ct);)Ct++;vt.push({from:dt.from+Ct,to:dt.from+Tt.length,insert:Rt.slice(Ct)})}),{userEvent:"delete.dedent"})),!0),emacsStyleKeymap=[{key:"Ctrl-b",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Ctrl-f",run:cursorCharRight,shift:selectCharRight},{key:"Ctrl-p",run:cursorLineUp,shift:selectLineUp},{key:"Ctrl-n",run:cursorLineDown,shift:selectLineDown},{key:"Ctrl-a",run:cursorLineStart,shift:selectLineStart},{key:"Ctrl-e",run:cursorLineEnd,shift:selectLineEnd},{key:"Ctrl-d",run:deleteCharForward},{key:"Ctrl-h",run:deleteCharBackward},{key:"Ctrl-k",run:deleteToLineEnd},{key:"Ctrl-Alt-h",run:deleteGroupBackward},{key:"Ctrl-o",run:splitLine},{key:"Ctrl-t",run:transposeChars},{key:"Ctrl-v",run:cursorPageDown}],standardKeymap=[{key:"ArrowLeft",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cursorGroupLeft,shift:selectGroupLeft,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:cursorLineBoundaryLeft,shift:selectLineBoundaryLeft,preventDefault:!0},{key:"ArrowRight",run:cursorCharRight,shift:selectCharRight,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cursorGroupRight,shift:selectGroupRight,preventDefault:!0},{mac:"Cmd-ArrowRight",run:cursorLineBoundaryRight,shift:selectLineBoundaryRight,preventDefault:!0},{key:"ArrowUp",run:cursorLineUp,shift:selectLineUp,preventDefault:!0},{mac:"Cmd-ArrowUp",run:cursorDocStart,shift:selectDocStart},{mac:"Ctrl-ArrowUp",run:cursorPageUp,shift:selectPageUp},{key:"ArrowDown",run:cursorLineDown,shift:selectLineDown,preventDefault:!0},{mac:"Cmd-ArrowDown",run:cursorDocEnd,shift:selectDocEnd},{mac:"Ctrl-ArrowDown",run:cursorPageDown,shift:selectPageDown},{key:"PageUp",run:cursorPageUp,shift:selectPageUp},{key:"PageDown",run:cursorPageDown,shift:selectPageDown},{key:"Home",run:cursorLineBoundaryBackward,shift:selectLineBoundaryBackward,preventDefault:!0},{key:"Mod-Home",run:cursorDocStart,shift:selectDocStart},{key:"End",run:cursorLineBoundaryForward,shift:selectLineBoundaryForward,preventDefault:!0},{key:"Mod-End",run:cursorDocEnd,shift:selectDocEnd},{key:"Enter",run:insertNewlineAndIndent},{key:"Mod-a",run:selectAll},{key:"Backspace",run:deleteCharBackward,shift:deleteCharBackward},{key:"Delete",run:deleteCharForward},{key:"Mod-Backspace",mac:"Alt-Backspace",run:deleteGroupBackward},{key:"Mod-Delete",mac:"Alt-Delete",run:deleteGroupForward},{mac:"Mod-Backspace",run:deleteToLineStart},{mac:"Mod-Delete",run:deleteToLineEnd}].concat(emacsStyleKeymap.map(ft=>({mac:ft.key,run:ft.run,shift:ft.shift}))),defaultKeymap=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:cursorSyntaxLeft,shift:selectSyntaxLeft},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:cursorSyntaxRight,shift:selectSyntaxRight},{key:"Alt-ArrowUp",run:moveLineUp},{key:"Shift-Alt-ArrowUp",run:copyLineUp},{key:"Alt-ArrowDown",run:moveLineDown},{key:"Shift-Alt-ArrowDown",run:copyLineDown},{key:"Escape",run:simplifySelection},{key:"Mod-Enter",run:insertBlankLine},{key:"Alt-l",mac:"Ctrl-l",run:selectLine},{key:"Mod-i",run:selectParentSyntax,preventDefault:!0},{key:"Mod-[",run:indentLess},{key:"Mod-]",run:indentMore},{key:"Mod-Alt-\\",run:indentSelection},{key:"Shift-Mod-k",run:deleteLine},{key:"Shift-Mod-\\",run:cursorMatchingBracket},{key:"Mod-/",run:toggleComment},{key:"Alt-A",run:toggleBlockComment}].concat(standardKeymap),indentWithTab={key:"Tab",run:indentMore,shift:indentLess};function crelt(){var ft=arguments[0];typeof ft=="string"&&(ft=document.createElement(ft));var lt=1,dt=arguments[1];if(dt&&typeof dt=="object"&&dt.nodeType==null&&!Array.isArray(dt)){for(var vt in dt)if(Object.prototype.hasOwnProperty.call(dt,vt)){var Tt=dt[vt];typeof Tt=="string"?ft.setAttribute(vt,Tt):Tt!=null&&(ft[vt]=Tt)}lt++}for(;lt<arguments.length;lt++)add(ft,arguments[lt]);return ft}function add(ft,lt){if(typeof lt=="string")ft.appendChild(document.createTextNode(lt));else if(lt!=null)if(lt.nodeType!=null)ft.appendChild(lt);else if(Array.isArray(lt))for(var dt=0;dt<lt.length;dt++)add(ft,lt[dt]);else throw new RangeError("Unsupported child node: "+lt)}const basicNormalize=typeof String.prototype.normalize=="function"?ft=>ft.normalize("NFKD"):ft=>ft;class SearchCursor{constructor(lt,dt,vt=0,Tt=lt.length,Et,Ct){this.test=Ct,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=lt.iterRange(vt,Tt),this.bufferStart=vt,this.normalize=Et?Rt=>Et(basicNormalize(Rt)):basicNormalize,this.query=this.normalize(dt)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return codePointAt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let lt=this.peek();if(lt<0)return this.done=!0,this;let dt=fromCodePoint(lt),vt=this.bufferStart+this.bufferPos;this.bufferPos+=codePointSize(lt);let Tt=this.normalize(dt);for(let Et=0,Ct=vt;;Et++){let Rt=Tt.charCodeAt(Et),kt=this.match(Rt,Ct);if(kt)return this.value=kt,this;if(Et==Tt.length-1)break;Ct==vt&&Et<dt.length&&dt.charCodeAt(Et)==Rt&&Ct++}}}match(lt,dt){let vt=null;for(let Tt=0;Tt<this.matches.length;Tt+=2){let Et=this.matches[Tt],Ct=!1;this.query.charCodeAt(Et)==lt&&(Et==this.query.length-1?vt={from:this.matches[Tt+1],to:dt+1}:(this.matches[Tt]++,Ct=!0)),Ct||(this.matches.splice(Tt,2),Tt-=2)}return this.query.charCodeAt(0)==lt&&(this.query.length==1?vt={from:dt,to:dt+1}:this.matches.push(1,dt)),vt&&this.test&&!this.test(vt.from,vt.to,this.buffer,this.bufferPos)&&(vt=null),vt}}typeof Symbol<"u"&&(SearchCursor.prototype[Symbol.iterator]=function(){return this});const empty={from:-1,to:-1,match:/.*/.exec("")},baseFlags="gm"+(/x/.unicode==null?"":"u");class RegExpCursor{constructor(lt,dt,vt,Tt=0,Et=lt.length){if(this.text=lt,this.to=Et,this.curLine="",this.done=!1,this.value=empty,/\\[sWDnr]|\n|\r|\[\^/.test(dt))return new MultilineRegExpCursor(lt,dt,vt,Tt,Et);this.re=new RegExp(dt,baseFlags+(vt!=null&&vt.ignoreCase?"i":"")),this.test=vt==null?void 0:vt.test,this.iter=lt.iter();let Ct=lt.lineAt(Tt);this.curLineStart=Ct.from,this.matchPos=toCharEnd(lt,Tt),this.getLine(this.curLineStart)}getLine(lt){this.iter.next(lt),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let lt=this.matchPos-this.curLineStart;;){this.re.lastIndex=lt;let dt=this.matchPos<=this.to&&this.re.exec(this.curLine);if(dt){let vt=this.curLineStart+dt.index,Tt=vt+dt[0].length;if(this.matchPos=toCharEnd(this.text,Tt+(vt==Tt?1:0)),vt==this.curLineStart+this.curLine.length&&this.nextLine(),(vt<Tt||vt>this.value.to)&&(!this.test||this.test(vt,Tt,dt)))return this.value={from:vt,to:Tt,match:dt},this;lt=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),lt=0;else return this.done=!0,this}}}const flattened=new WeakMap;class FlattenedDoc{constructor(lt,dt){this.from=lt,this.text=dt}get to(){return this.from+this.text.length}static get(lt,dt,vt){let Tt=flattened.get(lt);if(!Tt||Tt.from>=vt||Tt.to<=dt){let Rt=new FlattenedDoc(dt,lt.sliceString(dt,vt));return flattened.set(lt,Rt),Rt}if(Tt.from==dt&&Tt.to==vt)return Tt;let{text:Et,from:Ct}=Tt;return Ct>dt&&(Et=lt.sliceString(dt,Ct)+Et,Ct=dt),Tt.to<vt&&(Et+=lt.sliceString(Tt.to,vt)),flattened.set(lt,new FlattenedDoc(Ct,Et)),new FlattenedDoc(dt,Et.slice(dt-Ct,vt-Ct))}}class MultilineRegExpCursor{constructor(lt,dt,vt,Tt,Et){this.text=lt,this.to=Et,this.done=!1,this.value=empty,this.matchPos=toCharEnd(lt,Tt),this.re=new RegExp(dt,baseFlags+(vt!=null&&vt.ignoreCase?"i":"")),this.test=vt==null?void 0:vt.test,this.flat=FlattenedDoc.get(lt,Tt,this.chunkEnd(Tt+5e3))}chunkEnd(lt){return lt>=this.to?this.to:this.text.lineAt(lt).to}next(){for(;;){let lt=this.re.lastIndex=this.matchPos-this.flat.from,dt=this.re.exec(this.flat.text);if(dt&&!dt[0]&&dt.index==lt&&(this.re.lastIndex=lt+1,dt=this.re.exec(this.flat.text)),dt){let vt=this.flat.from+dt.index,Tt=vt+dt[0].length;if((this.flat.to>=this.to||dt.index+dt[0].length<=this.flat.text.length-10)&&(!this.test||this.test(vt,Tt,dt)))return this.value={from:vt,to:Tt,match:dt},this.matchPos=toCharEnd(this.text,Tt+(vt==Tt?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=FlattenedDoc.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(RegExpCursor.prototype[Symbol.iterator]=MultilineRegExpCursor.prototype[Symbol.iterator]=function(){return this});function validRegExp(ft){try{return new RegExp(ft,baseFlags),!0}catch{return!1}}function toCharEnd(ft,lt){if(lt>=ft.length)return lt;let dt=ft.lineAt(lt),vt;for(;lt<dt.to&&(vt=dt.text.charCodeAt(lt-dt.from))>=56320&&vt<57344;)lt++;return lt}function createLineDialog(ft){let lt=crelt("input",{class:"cm-textfield",name:"line"}),dt=crelt("form",{class:"cm-gotoLine",onkeydown:Tt=>{Tt.keyCode==27?(Tt.preventDefault(),ft.dispatch({effects:dialogEffect.of(!1)}),ft.focus()):Tt.keyCode==13&&(Tt.preventDefault(),vt())},onsubmit:Tt=>{Tt.preventDefault(),vt()}},crelt("label",ft.state.phrase("Go to line"),": ",lt)," ",crelt("button",{class:"cm-button",type:"submit"},ft.state.phrase("go")));function vt(){let Tt=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(lt.value);if(!Tt)return;let{state:Et}=ft,Ct=Et.doc.lineAt(Et.selection.main.head),[,Rt,kt,Dt,Bt]=Tt,Ft=Dt?+Dt.slice(1):0,Ut=kt?+kt:Ct.number;if(kt&&Bt){let Kt=Ut/100;Rt&&(Kt=Kt*(Rt=="-"?-1:1)+Ct.number/Et.doc.lines),Ut=Math.round(Et.doc.lines*Kt)}else kt&&Rt&&(Ut=Ut*(Rt=="-"?-1:1)+Ct.number);let Zt=Et.doc.line(Math.max(1,Math.min(Et.doc.lines,Ut)));ft.dispatch({effects:dialogEffect.of(!1),selection:EditorSelection.cursor(Zt.from+Math.max(0,Math.min(Ft,Zt.length))),scrollIntoView:!0}),ft.focus()}return{dom:dt}}const dialogEffect=StateEffect.define(),dialogField=StateField.define({create(){return!0},update(ft,lt){for(let dt of lt.effects)dt.is(dialogEffect)&&(ft=dt.value);return ft},provide:ft=>showPanel.from(ft,lt=>lt?createLineDialog:null)}),gotoLine=ft=>{let lt=getPanel(ft,createLineDialog);if(!lt){let dt=[dialogEffect.of(!0)];ft.state.field(dialogField,!1)==null&&dt.push(StateEffect.appendConfig.of([dialogField,baseTheme$1])),ft.dispatch({effects:dt}),lt=getPanel(ft,createLineDialog)}return lt&&lt.dom.querySelector("input").focus(),!0},baseTheme$1=EditorView.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),defaultHighlightOptions={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},highlightConfig=Facet.define({combine(ft){return combineConfig(ft,defaultHighlightOptions,{highlightWordAroundCursor:(lt,dt)=>lt||dt,minSelectionLength:Math.min,maxMatches:Math.min})}});function highlightSelectionMatches(ft){let lt=[defaultTheme,matchHighlighter];return ft&&lt.push(highlightConfig.of(ft)),lt}const matchDeco=Decoration.mark({class:"cm-selectionMatch"}),mainMatchDeco=Decoration.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function insideWordBoundaries(ft,lt,dt,vt){return(dt==0||ft(lt.sliceDoc(dt-1,dt))!=CharCategory.Word)&&(vt==lt.doc.length||ft(lt.sliceDoc(vt,vt+1))!=CharCategory.Word)}function insideWord(ft,lt,dt,vt){return ft(lt.sliceDoc(dt,dt+1))==CharCategory.Word&&ft(lt.sliceDoc(vt-1,vt))==CharCategory.Word}const matchHighlighter=ViewPlugin.fromClass(class{constructor(ft){this.decorations=this.getDeco(ft)}update(ft){(ft.selectionSet||ft.docChanged||ft.viewportChanged)&&(this.decorations=this.getDeco(ft.view))}getDeco(ft){let lt=ft.state.facet(highlightConfig),{state:dt}=ft,vt=dt.selection;if(vt.ranges.length>1)return Decoration.none;let Tt=vt.main,Et,Ct=null;if(Tt.empty){if(!lt.highlightWordAroundCursor)return Decoration.none;let kt=dt.wordAt(Tt.head);if(!kt)return Decoration.none;Ct=dt.charCategorizer(Tt.head),Et=dt.sliceDoc(kt.from,kt.to)}else{let kt=Tt.to-Tt.from;if(kt<lt.minSelectionLength||kt>200)return Decoration.none;if(lt.wholeWords){if(Et=dt.sliceDoc(Tt.from,Tt.to),Ct=dt.charCategorizer(Tt.head),!(insideWordBoundaries(Ct,dt,Tt.from,Tt.to)&&insideWord(Ct,dt,Tt.from,Tt.to)))return Decoration.none}else if(Et=dt.sliceDoc(Tt.from,Tt.to).trim(),!Et)return Decoration.none}let Rt=[];for(let kt of ft.visibleRanges){let Dt=new SearchCursor(dt.doc,Et,kt.from,kt.to);for(;!Dt.next().done;){let{from:Bt,to:Ft}=Dt.value;if((!Ct||insideWordBoundaries(Ct,dt,Bt,Ft))&&(Tt.empty&&Bt<=Tt.from&&Ft>=Tt.to?Rt.push(mainMatchDeco.range(Bt,Ft)):(Bt>=Tt.to||Ft<=Tt.from)&&Rt.push(matchDeco.range(Bt,Ft)),Rt.length>lt.maxMatches))return Decoration.none}}return Decoration.set(Rt)}},{decorations:ft=>ft.decorations}),defaultTheme=EditorView.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),selectWord=({state:ft,dispatch:lt})=>{let{selection:dt}=ft,vt=EditorSelection.create(dt.ranges.map(Tt=>ft.wordAt(Tt.head)||EditorSelection.cursor(Tt.head)),dt.mainIndex);return vt.eq(dt)?!1:(lt(ft.update({selection:vt})),!0)};function findNextOccurrence(ft,lt){let{main:dt,ranges:vt}=ft.selection,Tt=ft.wordAt(dt.head),Et=Tt&&Tt.from==dt.from&&Tt.to==dt.to;for(let Ct=!1,Rt=new SearchCursor(ft.doc,lt,vt[vt.length-1].to);;)if(Rt.next(),Rt.done){if(Ct)return null;Rt=new SearchCursor(ft.doc,lt,0,Math.max(0,vt[vt.length-1].from-1)),Ct=!0}else{if(Ct&&vt.some(kt=>kt.from==Rt.value.from))continue;if(Et){let kt=ft.wordAt(Rt.value.from);if(!kt||kt.from!=Rt.value.from||kt.to!=Rt.value.to)continue}return Rt.value}}const selectNextOccurrence=({state:ft,dispatch:lt})=>{let{ranges:dt}=ft.selection;if(dt.some(Et=>Et.from===Et.to))return selectWord({state:ft,dispatch:lt});let vt=ft.sliceDoc(dt[0].from,dt[0].to);if(ft.selection.ranges.some(Et=>ft.sliceDoc(Et.from,Et.to)!=vt))return!1;let Tt=findNextOccurrence(ft,vt);return Tt?(lt(ft.update({selection:ft.selection.addRange(EditorSelection.range(Tt.from,Tt.to),!1),effects:EditorView.scrollIntoView(Tt.to)})),!0):!1},searchConfigFacet=Facet.define({combine(ft){return combineConfig(ft,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:lt=>new SearchPanel(lt)})}});class SearchQuery{constructor(lt){this.search=lt.search,this.caseSensitive=!!lt.caseSensitive,this.literal=!!lt.literal,this.regexp=!!lt.regexp,this.replace=lt.replace||"",this.valid=!!this.search&&(!this.regexp||validRegExp(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!lt.wholeWord}unquote(lt){return this.literal?lt:lt.replace(/\\([nrt\\])/g,(dt,vt)=>vt=="n"?`
`:vt=="r"?"\r":vt=="t"?"	":"\\")}eq(lt){return this.search==lt.search&&this.replace==lt.replace&&this.caseSensitive==lt.caseSensitive&&this.regexp==lt.regexp&&this.wholeWord==lt.wholeWord}create(){return this.regexp?new RegExpQuery(this):new StringQuery(this)}getCursor(lt,dt=0,vt){let Tt=lt.doc?lt:EditorState.create({doc:lt});return vt==null&&(vt=Tt.doc.length),this.regexp?regexpCursor(this,Tt,dt,vt):stringCursor(this,Tt,dt,vt)}}class QueryType{constructor(lt){this.spec=lt}}function stringCursor(ft,lt,dt,vt){return new SearchCursor(lt.doc,ft.unquoted,dt,vt,ft.caseSensitive?void 0:Tt=>Tt.toLowerCase(),ft.wholeWord?stringWordTest(lt.doc,lt.charCategorizer(lt.selection.main.head)):void 0)}function stringWordTest(ft,lt){return(dt,vt,Tt,Et)=>((Et>dt||Et+Tt.length<vt)&&(Et=Math.max(0,dt-2),Tt=ft.sliceString(Et,Math.min(ft.length,vt+2))),(lt(charBefore(Tt,dt-Et))!=CharCategory.Word||lt(charAfter(Tt,dt-Et))!=CharCategory.Word)&&(lt(charAfter(Tt,vt-Et))!=CharCategory.Word||lt(charBefore(Tt,vt-Et))!=CharCategory.Word))}class StringQuery extends QueryType{constructor(lt){super(lt)}nextMatch(lt,dt,vt){let Tt=stringCursor(this.spec,lt,vt,lt.doc.length).nextOverlapping();return Tt.done&&(Tt=stringCursor(this.spec,lt,0,dt).nextOverlapping()),Tt.done?null:Tt.value}prevMatchInRange(lt,dt,vt){for(let Tt=vt;;){let Et=Math.max(dt,Tt-1e4-this.spec.unquoted.length),Ct=stringCursor(this.spec,lt,Et,Tt),Rt=null;for(;!Ct.nextOverlapping().done;)Rt=Ct.value;if(Rt)return Rt;if(Et==dt)return null;Tt-=1e4}}prevMatch(lt,dt,vt){return this.prevMatchInRange(lt,0,dt)||this.prevMatchInRange(lt,vt,lt.doc.length)}getReplacement(lt){return this.spec.unquote(this.spec.replace)}matchAll(lt,dt){let vt=stringCursor(this.spec,lt,0,lt.doc.length),Tt=[];for(;!vt.next().done;){if(Tt.length>=dt)return null;Tt.push(vt.value)}return Tt}highlight(lt,dt,vt,Tt){let Et=stringCursor(this.spec,lt,Math.max(0,dt-this.spec.unquoted.length),Math.min(vt+this.spec.unquoted.length,lt.doc.length));for(;!Et.next().done;)Tt(Et.value.from,Et.value.to)}}function regexpCursor(ft,lt,dt,vt){return new RegExpCursor(lt.doc,ft.search,{ignoreCase:!ft.caseSensitive,test:ft.wholeWord?regexpWordTest(lt.charCategorizer(lt.selection.main.head)):void 0},dt,vt)}function charBefore(ft,lt){return ft.slice(findClusterBreak(ft,lt,!1),lt)}function charAfter(ft,lt){return ft.slice(lt,findClusterBreak(ft,lt))}function regexpWordTest(ft){return(lt,dt,vt)=>!vt[0].length||(ft(charBefore(vt.input,vt.index))!=CharCategory.Word||ft(charAfter(vt.input,vt.index))!=CharCategory.Word)&&(ft(charAfter(vt.input,vt.index+vt[0].length))!=CharCategory.Word||ft(charBefore(vt.input,vt.index+vt[0].length))!=CharCategory.Word)}class RegExpQuery extends QueryType{nextMatch(lt,dt,vt){let Tt=regexpCursor(this.spec,lt,vt,lt.doc.length).next();return Tt.done&&(Tt=regexpCursor(this.spec,lt,0,dt).next()),Tt.done?null:Tt.value}prevMatchInRange(lt,dt,vt){for(let Tt=1;;Tt++){let Et=Math.max(dt,vt-Tt*1e4),Ct=regexpCursor(this.spec,lt,Et,vt),Rt=null;for(;!Ct.next().done;)Rt=Ct.value;if(Rt&&(Et==dt||Rt.from>Et+10))return Rt;if(Et==dt)return null}}prevMatch(lt,dt,vt){return this.prevMatchInRange(lt,0,dt)||this.prevMatchInRange(lt,vt,lt.doc.length)}getReplacement(lt){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(dt,vt)=>vt=="$"?"$":vt=="&"?lt.match[0]:vt!="0"&&+vt<lt.match.length?lt.match[vt]:dt))}matchAll(lt,dt){let vt=regexpCursor(this.spec,lt,0,lt.doc.length),Tt=[];for(;!vt.next().done;){if(Tt.length>=dt)return null;Tt.push(vt.value)}return Tt}highlight(lt,dt,vt,Tt){let Et=regexpCursor(this.spec,lt,Math.max(0,dt-250),Math.min(vt+250,lt.doc.length));for(;!Et.next().done;)Tt(Et.value.from,Et.value.to)}}const setSearchQuery=StateEffect.define(),togglePanel$1=StateEffect.define(),searchState=StateField.define({create(ft){return new SearchState(defaultQuery(ft).create(),null)},update(ft,lt){for(let dt of lt.effects)dt.is(setSearchQuery)?ft=new SearchState(dt.value.create(),ft.panel):dt.is(togglePanel$1)&&(ft=new SearchState(ft.query,dt.value?createSearchPanel:null));return ft},provide:ft=>showPanel.from(ft,lt=>lt.panel)});class SearchState{constructor(lt,dt){this.query=lt,this.panel=dt}}const matchMark=Decoration.mark({class:"cm-searchMatch"}),selectedMatchMark=Decoration.mark({class:"cm-searchMatch cm-searchMatch-selected"}),searchHighlighter=ViewPlugin.fromClass(class{constructor(ft){this.view=ft,this.decorations=this.highlight(ft.state.field(searchState))}update(ft){let lt=ft.state.field(searchState);(lt!=ft.startState.field(searchState)||ft.docChanged||ft.selectionSet||ft.viewportChanged)&&(this.decorations=this.highlight(lt))}highlight({query:ft,panel:lt}){if(!lt||!ft.spec.valid)return Decoration.none;let{view:dt}=this,vt=new RangeSetBuilder;for(let Tt=0,Et=dt.visibleRanges,Ct=Et.length;Tt<Ct;Tt++){let{from:Rt,to:kt}=Et[Tt];for(;Tt<Ct-1&&kt>Et[Tt+1].from-2*250;)kt=Et[++Tt].to;ft.highlight(dt.state,Rt,kt,(Dt,Bt)=>{let Ft=dt.state.selection.ranges.some(Ut=>Ut.from==Dt&&Ut.to==Bt);vt.add(Dt,Bt,Ft?selectedMatchMark:matchMark)})}return vt.finish()}},{decorations:ft=>ft.decorations});function searchCommand(ft){return lt=>{let dt=lt.state.field(searchState,!1);return dt&&dt.query.spec.valid?ft(lt,dt):openSearchPanel(lt)}}const findNext=searchCommand((ft,{query:lt})=>{let{to:dt}=ft.state.selection.main,vt=lt.nextMatch(ft.state,dt,dt);return vt?(ft.dispatch({selection:{anchor:vt.from,head:vt.to},scrollIntoView:!0,effects:announceMatch(ft,vt),userEvent:"select.search"}),!0):!1}),findPrevious=searchCommand((ft,{query:lt})=>{let{state:dt}=ft,{from:vt}=dt.selection.main,Tt=lt.prevMatch(dt,vt,vt);return Tt?(ft.dispatch({selection:{anchor:Tt.from,head:Tt.to},scrollIntoView:!0,effects:announceMatch(ft,Tt),userEvent:"select.search"}),!0):!1}),selectMatches=searchCommand((ft,{query:lt})=>{let dt=lt.matchAll(ft.state,1e3);return!dt||!dt.length?!1:(ft.dispatch({selection:EditorSelection.create(dt.map(vt=>EditorSelection.range(vt.from,vt.to))),userEvent:"select.search.matches"}),!0)}),selectSelectionMatches=({state:ft,dispatch:lt})=>{let dt=ft.selection;if(dt.ranges.length>1||dt.main.empty)return!1;let{from:vt,to:Tt}=dt.main,Et=[],Ct=0;for(let Rt=new SearchCursor(ft.doc,ft.sliceDoc(vt,Tt));!Rt.next().done;){if(Et.length>1e3)return!1;Rt.value.from==vt&&(Ct=Et.length),Et.push(EditorSelection.range(Rt.value.from,Rt.value.to))}return lt(ft.update({selection:EditorSelection.create(Et,Ct),userEvent:"select.search.matches"})),!0},replaceNext=searchCommand((ft,{query:lt})=>{let{state:dt}=ft,{from:vt,to:Tt}=dt.selection.main;if(dt.readOnly)return!1;let Et=lt.nextMatch(dt,vt,vt);if(!Et)return!1;let Ct=[],Rt,kt,Dt=[];if(Et.from==vt&&Et.to==Tt&&(kt=dt.toText(lt.getReplacement(Et)),Ct.push({from:Et.from,to:Et.to,insert:kt}),Et=lt.nextMatch(dt,Et.from,Et.to),Dt.push(EditorView.announce.of(dt.phrase("replaced match on line $",dt.doc.lineAt(vt).number)+"."))),Et){let Bt=Ct.length==0||Ct[0].from>=Et.to?0:Et.to-Et.from-kt.length;Rt={anchor:Et.from-Bt,head:Et.to-Bt},Dt.push(announceMatch(ft,Et))}return ft.dispatch({changes:Ct,selection:Rt,scrollIntoView:!!Rt,effects:Dt,userEvent:"input.replace"}),!0}),replaceAll=searchCommand((ft,{query:lt})=>{if(ft.state.readOnly)return!1;let dt=lt.matchAll(ft.state,1e9).map(Tt=>{let{from:Et,to:Ct}=Tt;return{from:Et,to:Ct,insert:lt.getReplacement(Tt)}});if(!dt.length)return!1;let vt=ft.state.phrase("replaced $ matches",dt.length)+".";return ft.dispatch({changes:dt,effects:EditorView.announce.of(vt),userEvent:"input.replace.all"}),!0});function createSearchPanel(ft){return ft.state.facet(searchConfigFacet).createPanel(ft)}function defaultQuery(ft,lt){var dt,vt,Tt,Et;let Ct=ft.selection.main,Rt=Ct.empty||Ct.to>Ct.from+100?"":ft.sliceDoc(Ct.from,Ct.to);if(lt&&!Rt)return lt;let kt=ft.facet(searchConfigFacet);return new SearchQuery({search:((dt=lt==null?void 0:lt.literal)!==null&&dt!==void 0?dt:kt.literal)?Rt:Rt.replace(/\n/g,"\\n"),caseSensitive:(vt=lt==null?void 0:lt.caseSensitive)!==null&&vt!==void 0?vt:kt.caseSensitive,literal:(Tt=lt==null?void 0:lt.literal)!==null&&Tt!==void 0?Tt:kt.literal,wholeWord:(Et=lt==null?void 0:lt.wholeWord)!==null&&Et!==void 0?Et:kt.wholeWord})}const openSearchPanel=ft=>{let lt=ft.state.field(searchState,!1);if(lt&&lt.panel){let dt=getPanel(ft,createSearchPanel);if(!dt)return!1;let vt=dt.dom.querySelector("[main-field]");if(vt&&vt!=ft.root.activeElement){let Tt=defaultQuery(ft.state,lt.query.spec);Tt.valid&&ft.dispatch({effects:setSearchQuery.of(Tt)}),vt.focus(),vt.select()}}else ft.dispatch({effects:[togglePanel$1.of(!0),lt?setSearchQuery.of(defaultQuery(ft.state,lt.query.spec)):StateEffect.appendConfig.of(searchExtensions)]});return!0},closeSearchPanel=ft=>{let lt=ft.state.field(searchState,!1);if(!lt||!lt.panel)return!1;let dt=getPanel(ft,createSearchPanel);return dt&&dt.dom.contains(ft.root.activeElement)&&ft.focus(),ft.dispatch({effects:togglePanel$1.of(!1)}),!0},searchKeymap=[{key:"Mod-f",run:openSearchPanel,scope:"editor search-panel"},{key:"F3",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:closeSearchPanel,scope:"editor search-panel"},{key:"Mod-Shift-l",run:selectSelectionMatches},{key:"Alt-g",run:gotoLine},{key:"Mod-d",run:selectNextOccurrence,preventDefault:!0}];class SearchPanel{constructor(lt){this.view=lt;let dt=this.query=lt.state.field(searchState).query.spec;this.commit=this.commit.bind(this),this.searchField=crelt("input",{value:dt.search,placeholder:phrase(lt,"Find"),"aria-label":phrase(lt,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=crelt("input",{value:dt.replace,placeholder:phrase(lt,"Replace"),"aria-label":phrase(lt,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=crelt("input",{type:"checkbox",name:"case",form:"",checked:dt.caseSensitive,onchange:this.commit}),this.reField=crelt("input",{type:"checkbox",name:"re",form:"",checked:dt.regexp,onchange:this.commit}),this.wordField=crelt("input",{type:"checkbox",name:"word",form:"",checked:dt.wholeWord,onchange:this.commit});function vt(Tt,Et,Ct){return crelt("button",{class:"cm-button",name:Tt,onclick:Et,type:"button"},Ct)}this.dom=crelt("div",{onkeydown:Tt=>this.keydown(Tt),class:"cm-search"},[this.searchField,vt("next",()=>findNext(lt),[phrase(lt,"next")]),vt("prev",()=>findPrevious(lt),[phrase(lt,"previous")]),vt("select",()=>selectMatches(lt),[phrase(lt,"all")]),crelt("label",null,[this.caseField,phrase(lt,"match case")]),crelt("label",null,[this.reField,phrase(lt,"regexp")]),crelt("label",null,[this.wordField,phrase(lt,"by word")]),...lt.state.readOnly?[]:[crelt("br"),this.replaceField,vt("replace",()=>replaceNext(lt),[phrase(lt,"replace")]),vt("replaceAll",()=>replaceAll(lt),[phrase(lt,"replace all")])],crelt("button",{name:"close",onclick:()=>closeSearchPanel(lt),"aria-label":phrase(lt,"close"),type:"button"},["×"])])}commit(){let lt=new SearchQuery({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});lt.eq(this.query)||(this.query=lt,this.view.dispatch({effects:setSearchQuery.of(lt)}))}keydown(lt){runScopeHandlers(this.view,lt,"search-panel")?lt.preventDefault():lt.keyCode==13&&lt.target==this.searchField?(lt.preventDefault(),(lt.shiftKey?findPrevious:findNext)(this.view)):lt.keyCode==13&&lt.target==this.replaceField&&(lt.preventDefault(),replaceNext(this.view))}update(lt){for(let dt of lt.transactions)for(let vt of dt.effects)vt.is(setSearchQuery)&&!vt.value.eq(this.query)&&this.setQuery(vt.value)}setQuery(lt){this.query=lt,this.searchField.value=lt.search,this.replaceField.value=lt.replace,this.caseField.checked=lt.caseSensitive,this.reField.checked=lt.regexp,this.wordField.checked=lt.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(searchConfigFacet).top}}function phrase(ft,lt){return ft.state.phrase(lt)}const AnnounceMargin=30,Break=/[\s\.,:;?!]/;function announceMatch(ft,{from:lt,to:dt}){let vt=ft.state.doc.lineAt(lt),Tt=ft.state.doc.lineAt(dt).to,Et=Math.max(vt.from,lt-AnnounceMargin),Ct=Math.min(Tt,dt+AnnounceMargin),Rt=ft.state.sliceDoc(Et,Ct);if(Et!=vt.from){for(let kt=0;kt<AnnounceMargin;kt++)if(!Break.test(Rt[kt+1])&&Break.test(Rt[kt])){Rt=Rt.slice(kt);break}}if(Ct!=Tt){for(let kt=Rt.length-1;kt>Rt.length-AnnounceMargin;kt--)if(!Break.test(Rt[kt-1])&&Break.test(Rt[kt])){Rt=Rt.slice(0,kt);break}}return EditorView.announce.of(`${ft.state.phrase("current match")}. ${Rt} ${ft.state.phrase("on line")} ${vt.number}.`)}const baseTheme$2=EditorView.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),searchExtensions=[searchState,Prec.lowest(searchHighlighter),baseTheme$2];class SelectedDiagnostic{constructor(lt,dt,vt){this.from=lt,this.to=dt,this.diagnostic=vt}}class LintState{constructor(lt,dt,vt){this.diagnostics=lt,this.panel=dt,this.selected=vt}static init(lt,dt,vt){let Tt=lt,Et=vt.facet(lintConfig).markerFilter;Et&&(Tt=Et(Tt));let Ct=Decoration.set(Tt.map(Rt=>Rt.from==Rt.to||Rt.from==Rt.to-1&&vt.doc.lineAt(Rt.from).to==Rt.from?Decoration.widget({widget:new DiagnosticWidget(Rt),diagnostic:Rt}).range(Rt.from):Decoration.mark({attributes:{class:"cm-lintRange cm-lintRange-"+Rt.severity},diagnostic:Rt}).range(Rt.from,Rt.to)),!0);return new LintState(Ct,dt,findDiagnostic(Ct))}}function findDiagnostic(ft,lt=null,dt=0){let vt=null;return ft.between(dt,1e9,(Tt,Et,{spec:Ct})=>{if(!(lt&&Ct.diagnostic!=lt))return vt=new SelectedDiagnostic(Tt,Et,Ct.diagnostic),!1}),vt}function hideTooltip(ft,lt){return!!(ft.effects.some(dt=>dt.is(setDiagnosticsEffect))||ft.changes.touchesRange(lt.pos))}function maybeEnableLint(ft,lt){return ft.field(lintState,!1)?lt:lt.concat(StateEffect.appendConfig.of([lintState,EditorView.decorations.compute([lintState],dt=>{let{selected:vt,panel:Tt}=dt.field(lintState);return!vt||!Tt||vt.from==vt.to?Decoration.none:Decoration.set([activeMark.range(vt.from,vt.to)])}),hoverTooltip(lintTooltip,{hideOn:hideTooltip}),baseTheme]))}function setDiagnostics(ft,lt){return{effects:maybeEnableLint(ft,[setDiagnosticsEffect.of(lt)])}}const setDiagnosticsEffect=StateEffect.define(),togglePanel=StateEffect.define(),movePanelSelection=StateEffect.define(),lintState=StateField.define({create(){return new LintState(Decoration.none,null,null)},update(ft,lt){if(lt.docChanged){let dt=ft.diagnostics.map(lt.changes),vt=null;if(ft.selected){let Tt=lt.changes.mapPos(ft.selected.from,1);vt=findDiagnostic(dt,ft.selected.diagnostic,Tt)||findDiagnostic(dt,null,Tt)}ft=new LintState(dt,ft.panel,vt)}for(let dt of lt.effects)dt.is(setDiagnosticsEffect)?ft=LintState.init(dt.value,ft.panel,lt.state):dt.is(togglePanel)?ft=new LintState(ft.diagnostics,dt.value?LintPanel.open:null,ft.selected):dt.is(movePanelSelection)&&(ft=new LintState(ft.diagnostics,ft.panel,dt.value));return ft},provide:ft=>[showPanel.from(ft,lt=>lt.panel),EditorView.decorations.from(ft,lt=>lt.diagnostics)]}),activeMark=Decoration.mark({class:"cm-lintRange cm-lintRange-active"});function lintTooltip(ft,lt,dt){let{diagnostics:vt}=ft.state.field(lintState),Tt=[],Et=2e8,Ct=0;vt.between(lt-(dt<0?1:0),lt+(dt>0?1:0),(kt,Dt,{spec:Bt})=>{lt>=kt&&lt<=Dt&&(kt==Dt||(lt>kt||dt>0)&&(lt<Dt||dt<0))&&(Tt.push(Bt.diagnostic),Et=Math.min(kt,Et),Ct=Math.max(Dt,Ct))});let Rt=ft.state.facet(lintConfig).tooltipFilter;return Rt&&(Tt=Rt(Tt)),Tt.length?{pos:Et,end:Ct,above:ft.state.doc.lineAt(Et).to<Ct,create(){return{dom:diagnosticsTooltip(ft,Tt)}}}:null}function diagnosticsTooltip(ft,lt){return crelt("ul",{class:"cm-tooltip-lint"},lt.map(dt=>renderDiagnostic(ft,dt,!1)))}const openLintPanel=ft=>{let lt=ft.state.field(lintState,!1);(!lt||!lt.panel)&&ft.dispatch({effects:maybeEnableLint(ft.state,[togglePanel.of(!0)])});let dt=getPanel(ft,LintPanel.open);return dt&&dt.dom.querySelector(".cm-panel-lint ul").focus(),!0},closeLintPanel=ft=>{let lt=ft.state.field(lintState,!1);return!lt||!lt.panel?!1:(ft.dispatch({effects:togglePanel.of(!1)}),!0)},nextDiagnostic=ft=>{let lt=ft.state.field(lintState,!1);if(!lt)return!1;let dt=ft.state.selection.main,vt=lt.diagnostics.iter(dt.to+1);return!vt.value&&(vt=lt.diagnostics.iter(0),!vt.value||vt.from==dt.from&&vt.to==dt.to)?!1:(ft.dispatch({selection:{anchor:vt.from,head:vt.to},scrollIntoView:!0}),!0)},lintKeymap=[{key:"Mod-Shift-m",run:openLintPanel,preventDefault:!0},{key:"F8",run:nextDiagnostic}],lintPlugin=ViewPlugin.fromClass(class{constructor(ft){this.view=ft,this.timeout=-1,this.set=!0;let{delay:lt}=ft.state.facet(lintConfig);this.lintTime=Date.now()+lt,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,lt)}run(){let ft=Date.now();if(ft<this.lintTime-10)setTimeout(this.run,this.lintTime-ft);else{this.set=!1;let{state:lt}=this.view,{sources:dt}=lt.facet(lintConfig);Promise.all(dt.map(vt=>Promise.resolve(vt(this.view)))).then(vt=>{let Tt=vt.reduce((Et,Ct)=>Et.concat(Ct));this.view.state.doc==lt.doc&&this.view.dispatch(setDiagnostics(this.view.state,Tt))},vt=>{logException(this.view.state,vt)})}}update(ft){let lt=ft.state.facet(lintConfig);(ft.docChanged||lt!=ft.startState.facet(lintConfig)||lt.needsRefresh&&lt.needsRefresh(ft))&&(this.lintTime=Date.now()+lt.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,lt.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),lintConfig=Facet.define({combine(ft){return Object.assign({sources:ft.map(lt=>lt.source)},combineConfig(ft.map(lt=>lt.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(lt,dt)=>lt?dt?vt=>lt(vt)||dt(vt):lt:dt}))},enables:lintPlugin});function assignKeys(ft){let lt=[];if(ft)e:for(let{name:dt}of ft){for(let vt=0;vt<dt.length;vt++){let Tt=dt[vt];if(/[a-zA-Z]/.test(Tt)&&!lt.some(Et=>Et.toLowerCase()==Tt.toLowerCase())){lt.push(Tt);continue e}}lt.push("")}return lt}function renderDiagnostic(ft,lt,dt){var vt;let Tt=dt?assignKeys(lt.actions):[];return crelt("li",{class:"cm-diagnostic cm-diagnostic-"+lt.severity},crelt("span",{class:"cm-diagnosticText"},lt.renderMessage?lt.renderMessage():lt.message),(vt=lt.actions)===null||vt===void 0?void 0:vt.map((Et,Ct)=>{let Rt=!1,kt=Ut=>{if(Ut.preventDefault(),Rt)return;Rt=!0;let Zt=findDiagnostic(ft.state.field(lintState).diagnostics,lt);Zt&&Et.apply(ft,Zt.from,Zt.to)},{name:Dt}=Et,Bt=Tt[Ct]?Dt.indexOf(Tt[Ct]):-1,Ft=Bt<0?Dt:[Dt.slice(0,Bt),crelt("u",Dt.slice(Bt,Bt+1)),Dt.slice(Bt+1)];return crelt("button",{type:"button",class:"cm-diagnosticAction",onclick:kt,onmousedown:kt,"aria-label":` Action: ${Dt}${Bt<0?"":` (access key "${Tt[Ct]})"`}.`},Ft)}),lt.source&&crelt("div",{class:"cm-diagnosticSource"},lt.source))}class DiagnosticWidget extends WidgetType{constructor(lt){super(),this.diagnostic=lt}eq(lt){return lt.diagnostic==this.diagnostic}toDOM(){return crelt("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class PanelItem{constructor(lt,dt){this.diagnostic=dt,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=renderDiagnostic(lt,dt,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class LintPanel{constructor(lt){this.view=lt,this.items=[];let dt=Tt=>{if(Tt.keyCode==27)closeLintPanel(this.view),this.view.focus();else if(Tt.keyCode==38||Tt.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(Tt.keyCode==40||Tt.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(Tt.keyCode==36)this.moveSelection(0);else if(Tt.keyCode==35)this.moveSelection(this.items.length-1);else if(Tt.keyCode==13)this.view.focus();else if(Tt.keyCode>=65&&Tt.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:Et}=this.items[this.selectedIndex],Ct=assignKeys(Et.actions);for(let Rt=0;Rt<Ct.length;Rt++)if(Ct[Rt].toUpperCase().charCodeAt(0)==Tt.keyCode){let kt=findDiagnostic(this.view.state.field(lintState).diagnostics,Et);kt&&Et.actions[Rt].apply(lt,kt.from,kt.to)}}else return;Tt.preventDefault()},vt=Tt=>{for(let Et=0;Et<this.items.length;Et++)this.items[Et].dom.contains(Tt.target)&&this.moveSelection(Et)};this.list=crelt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:dt,onclick:vt}),this.dom=crelt("div",{class:"cm-panel-lint"},this.list,crelt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>closeLintPanel(this.view)},"×")),this.update()}get selectedIndex(){let lt=this.view.state.field(lintState).selected;if(!lt)return-1;for(let dt=0;dt<this.items.length;dt++)if(this.items[dt].diagnostic==lt.diagnostic)return dt;return-1}update(){let{diagnostics:lt,selected:dt}=this.view.state.field(lintState),vt=0,Tt=!1,Et=null;for(lt.between(0,this.view.state.doc.length,(Ct,Rt,{spec:kt})=>{let Dt=-1,Bt;for(let Ft=vt;Ft<this.items.length;Ft++)if(this.items[Ft].diagnostic==kt.diagnostic){Dt=Ft;break}Dt<0?(Bt=new PanelItem(this.view,kt.diagnostic),this.items.splice(vt,0,Bt),Tt=!0):(Bt=this.items[Dt],Dt>vt&&(this.items.splice(vt,Dt-vt),Tt=!0)),dt&&Bt.diagnostic==dt.diagnostic?Bt.dom.hasAttribute("aria-selected")||(Bt.dom.setAttribute("aria-selected","true"),Et=Bt):Bt.dom.hasAttribute("aria-selected")&&Bt.dom.removeAttribute("aria-selected"),vt++});vt<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)Tt=!0,this.items.pop();this.items.length==0&&(this.items.push(new PanelItem(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),Tt=!0),Et?(this.list.setAttribute("aria-activedescendant",Et.id),this.view.requestMeasure({key:this,read:()=>({sel:Et.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:Ct,panel:Rt})=>{Ct.top<Rt.top?this.list.scrollTop-=Rt.top-Ct.top:Ct.bottom>Rt.bottom&&(this.list.scrollTop+=Ct.bottom-Rt.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),Tt&&this.sync()}sync(){let lt=this.list.firstChild;function dt(){let vt=lt;lt=vt.nextSibling,vt.remove()}for(let vt of this.items)if(vt.dom.parentNode==this.list){for(;lt!=vt.dom;)dt();lt=vt.dom.nextSibling}else this.list.insertBefore(vt.dom,lt);for(;lt;)dt()}moveSelection(lt){if(this.selectedIndex<0)return;let dt=this.view.state.field(lintState),vt=findDiagnostic(dt.diagnostics,this.items[lt].diagnostic);vt&&this.view.dispatch({selection:{anchor:vt.from,head:vt.to},scrollIntoView:!0,effects:movePanelSelection.of(vt)})}static open(lt){return new LintPanel(lt)}}function svg(ft,lt='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${lt}>${encodeURIComponent(ft)}</svg>')`}function underline(ft){return svg(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${ft}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const baseTheme=EditorView.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:underline("#d11")},".cm-lintRange-warning":{backgroundImage:underline("orange")},".cm-lintRange-info":{backgroundImage:underline("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});var basicSetup=function ft(lt){lt===void 0&&(lt={});var dt=[];lt.closeBracketsKeymap!==!1&&(dt=dt.concat(closeBracketsKeymap)),lt.defaultKeymap!==!1&&(dt=dt.concat(defaultKeymap)),lt.searchKeymap!==!1&&(dt=dt.concat(searchKeymap)),lt.historyKeymap!==!1&&(dt=dt.concat(historyKeymap)),lt.foldKeymap!==!1&&(dt=dt.concat(foldKeymap)),lt.completionKeymap!==!1&&(dt=dt.concat(completionKeymap)),lt.lintKeymap!==!1&&(dt=dt.concat(lintKeymap));var vt=[];return lt.lineNumbers!==!1&&vt.push(lineNumbers()),lt.highlightActiveLineGutter!==!1&&vt.push(highlightActiveLineGutter()),lt.highlightSpecialChars!==!1&&vt.push(highlightSpecialChars()),lt.history!==!1&&vt.push(history()),lt.foldGutter!==!1&&vt.push(foldGutter()),lt.drawSelection!==!1&&vt.push(drawSelection()),lt.dropCursor!==!1&&vt.push(dropCursor()),lt.allowMultipleSelections!==!1&&vt.push(EditorState.allowMultipleSelections.of(!0)),lt.indentOnInput!==!1&&vt.push(indentOnInput()),lt.syntaxHighlighting!==!1&&vt.push(syntaxHighlighting(defaultHighlightStyle,{fallback:!0})),lt.bracketMatching!==!1&&vt.push(bracketMatching()),lt.closeBrackets!==!1&&vt.push(closeBrackets()),lt.autocompletion!==!1&&vt.push(autocompletion()),lt.rectangularSelection!==!1&&vt.push(rectangularSelection()),lt.crosshairCursor!==!1&&vt.push(crosshairCursor()),lt.highlightActiveLine!==!1&&vt.push(highlightActiveLine()),lt.highlightSelectionMatches!==!1&&vt.push(highlightSelectionMatches()),lt.tabSize&&typeof lt.tabSize=="number"&&vt.push(indentUnit.of(" ".repeat(lt.tabSize))),vt.concat([keymap.of(dt.flat())]).filter(Boolean)};const chalky="#e5c07b",coral="#e06c75",cyan="#56b6c2",invalid="#ffffff",ivory="#abb2bf",stone="#7d8799",malibu="#61afef",sage="#98c379",whiskey="#d19a66",violet="#c678dd",darkBackground="#21252b",highlightBackground="#2c313a",background="#282c34",tooltipBackground="#353a42",selection="#3E4451",cursor="#528bff",oneDarkTheme=EditorView.theme({"&":{color:ivory,backgroundColor:background},".cm-content":{caretColor:cursor},".cm-cursor, .cm-dropCursor":{borderLeftColor:cursor},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:selection},".cm-panels":{backgroundColor:darkBackground,color:ivory},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:background,color:stone,border:"none"},".cm-activeLineGutter":{backgroundColor:highlightBackground},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:tooltipBackground},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:tooltipBackground,borderBottomColor:tooltipBackground},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:highlightBackground,color:ivory}}},{dark:!0}),oneDarkHighlightStyle=HighlightStyle.define([{tag:tags.keyword,color:violet},{tag:[tags.name,tags.deleted,tags.character,tags.propertyName,tags.macroName],color:coral},{tag:[tags.function(tags.variableName),tags.labelName],color:malibu},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:whiskey},{tag:[tags.definition(tags.name),tags.separator],color:ivory},{tag:[tags.typeName,tags.className,tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:chalky},{tag:[tags.operator,tags.operatorKeyword,tags.url,tags.escape,tags.regexp,tags.link,tags.special(tags.string)],color:cyan},{tag:[tags.meta,tags.comment],color:stone},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.link,color:stone,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:coral},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:whiskey},{tag:[tags.processingInstruction,tags.string,tags.inserted],color:sage},{tag:tags.invalid,color:invalid}]),oneDark=[oneDarkTheme,syntaxHighlighting(oneDarkHighlightStyle)];var getStatistics=ft=>({line:ft.state.doc.lineAt(ft.state.selection.main.from),lineCount:ft.state.doc.lines,lineBreak:ft.state.lineBreak,length:ft.state.doc.length,readOnly:ft.state.readOnly,tabSize:ft.state.tabSize,selection:ft.state.selection,selectionAsSingle:ft.state.selection.asSingle().main,ranges:ft.state.selection.ranges,selectionCode:ft.state.sliceDoc(ft.state.selection.main.from,ft.state.selection.main.to),selections:ft.state.selection.ranges.map(lt=>ft.state.sliceDoc(lt.from,lt.to)),selectedText:ft.state.selection.ranges.some(lt=>!lt.empty)}),External=Annotation.define();function useCodeMirror(ft){var{value:lt,selection:dt,onChange:vt,onStatistics:Tt,onCreateEditor:Et,onUpdate:Ct,extensions:Rt=[],autoFocus:kt,theme:Dt="light",height:Bt="",minHeight:Ft="",maxHeight:Ut="",placeholder:Zt="",width:Kt="",minWidth:ln="",maxWidth:hn="",editable:dn=!0,readOnly:pn=!1,indentWithTab:mn=!0,basicSetup:On=!0,root:bn,initialState:En}=ft,[An,Tn]=reactExports.useState(),[In,Rn]=reactExports.useState(),[Dn,Bn]=reactExports.useState(),Hn=EditorView.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),jn=EditorView.theme({"&":{height:Bt,minHeight:Ft,maxHeight:Ut,width:Kt,minWidth:ln,maxWidth:hn}}),Kn=EditorView.updateListener.of(lr=>{if(lr.docChanged&&typeof vt=="function"&&!lr.transactions.some(Wn=>Wn.annotation(External))){var Ln=lr.state.doc,Vn=Ln.toString();vt(Vn,lr)}Tt&&Tt(getStatistics(lr))}),zn=[Kn,jn];switch(mn&&zn.unshift(keymap.of([indentWithTab])),On&&(typeof On=="boolean"?zn.unshift(basicSetup()):zn.unshift(basicSetup(On))),Zt&&zn.unshift(placeholder(Zt)),Dt){case"light":zn.push(Hn);break;case"dark":zn.push(oneDark);break;case"none":break;default:zn.push(Dt);break}return dn===!1&&zn.push(EditorView.editable.of(!1)),pn&&zn.push(EditorState.readOnly.of(!0)),Ct&&typeof Ct=="function"&&zn.push(EditorView.updateListener.of(Ct)),zn=zn.concat(Rt),reactExports.useEffect(()=>{if(An&&!Dn){var lr={doc:lt,selection:dt,extensions:zn},Ln=En?EditorState.fromJSON(En.json,lr,En.fields):EditorState.create(lr);if(Bn(Ln),!In){var Vn=new EditorView({state:Ln,parent:An,root:bn});Rn(Vn),Et&&Et(Vn,Ln)}}return()=>{In&&(Bn(void 0),Rn(void 0))}},[An,Dn]),reactExports.useEffect(()=>Tn(ft.container),[ft.container]),reactExports.useEffect(()=>()=>{In&&(In.destroy(),Rn(void 0))},[In]),reactExports.useEffect(()=>{kt&&In&&In.focus()},[kt,In]),reactExports.useEffect(()=>{In&&In.dispatch({effects:StateEffect.reconfigure.of(zn)})},[Dt,Rt,Bt,Ft,Ut,Kt,ln,hn,Zt,dn,pn,mn,On,vt,Ct]),reactExports.useEffect(()=>{if(lt!==void 0){var lr=In?In.state.doc.toString():"";In&&lt!==lr&&In.dispatch({changes:{from:0,to:lr.length,insert:lt||""},annotations:[External.of(!0)]})}},[lt,In]),{state:Dn,setState:Bn,view:In,setView:Rn,container:An,setContainer:Tn}}var _excluded=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],ReactCodeMirror=reactExports.forwardRef((ft,lt)=>{var{className:dt,value:vt="",selection:Tt,extensions:Et=[],onChange:Ct,onStatistics:Rt,onCreateEditor:kt,onUpdate:Dt,autoFocus:Bt,theme:Ft="light",height:Ut,minHeight:Zt,maxHeight:Kt,width:ln,minWidth:hn,maxWidth:dn,basicSetup:pn,placeholder:mn,indentWithTab:On,editable:bn,readOnly:En,root:An,initialState:Tn}=ft,In=_objectWithoutPropertiesLoose(ft,_excluded),Rn=reactExports.useRef(null),{state:Dn,view:Bn,container:Hn,setContainer:jn}=useCodeMirror({container:Rn.current,root:An,value:vt,autoFocus:Bt,theme:Ft,height:Ut,minHeight:Zt,maxHeight:Kt,width:ln,minWidth:hn,maxWidth:dn,basicSetup:pn,placeholder:mn,indentWithTab:On,editable:bn,readOnly:En,selection:Tt,onChange:Ct,onStatistics:Rt,onCreateEditor:kt,onUpdate:Dt,extensions:Et,initialState:Tn});if(reactExports.useImperativeHandle(lt,()=>({editor:Rn.current,state:Dn,view:Bn}),[Rn,Hn,Dn,Bn]),typeof vt!="string")throw new Error("value must be typeof string but got "+typeof vt);var Kn=typeof Ft=="string"?"cm-theme-"+Ft:"cm-theme";return jsx("div",_extends({ref:Rn,className:""+Kn+(dt?" "+dt:"")},In))});ReactCodeMirror.displayName="CodeMirror";const BlockPythonCodePanel=()=>{const ft=useRobartState(dt=>dt.editingBlockId),lt=useRobartState(dt=>dt.blocks[ft??""]);return jsx("div",{className:"h-full w-full",children:jsx(ReactCodeMirror,{value:lt==null?void 0:lt.python,className:"h-full w-full",extensions:[python()],readOnly:!0})})},Simulation=()=>{const ft=reactExports.useRef(null),lt=useSimulator(vt=>vt.robots),dt=useSimulator(vt=>vt.step);return useFrame(({clock:vt})=>{dt()}),jsxs(Fragment,{children:[jsx("color",{attach:"background",args:["black"]}),jsx(OrbitControls,{maxPolarAngle:Math.PI*(1/2-1/20),minPolarAngle:0,minDistance:5,maxDistance:20}),jsx(GizmoHelper,{alignment:"bottom-right",margin:[80,80],children:jsx(GizmoViewport,{labels:["X","Z","Y"],axisColors:["#9d4b4b","#2f7f4f","#3b5b9d"],labelColor:"white"})}),jsx(Grid,{position:[0,-.001,0],args:[10.5,10.5],cellSize:1,cellThickness:1,cellColor:"black",fadeDistance:50,fadeStrength:1.2,infiniteGrid:!0}),jsx(Plane,{args:[1e3,1e3],rotation:[-Math.PI/2,0,0],position:[0,-.02,0],children:jsx("meshStandardMaterial",{color:"black"})}),Object.values(lt).map(vt=>jsx("group",{ref:ft,position:vt.pos,children:jsx(Crazyflie,{robotId:vt.id,renderBoundingBox:!0})},vt.id))]})},SimulationPanel=()=>jsx("div",{className:"h-full w-full",children:jsx(Canvas,{children:jsx(Simulation,{})})}),noSemi=302,incdec=1,incdecPrefix=2,insertSemi=303,spaces=305,newline=306,LineComment=3,BlockComment=4,space=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],braceR=125,semicolon=59,slash=47,star=42,plus=43,minus=45,trackNewline=new ContextTracker({start:!1,shift(ft,lt){return lt==LineComment||lt==BlockComment||lt==spaces?ft:lt==newline},strict:!1}),insertSemicolon=new ExternalTokenizer((ft,lt)=>{let{next:dt}=ft;(dt==braceR||dt==-1||lt.context)&&lt.canShift(insertSemi)&&ft.acceptToken(insertSemi)},{contextual:!0,fallback:!0}),noSemicolon=new ExternalTokenizer((ft,lt)=>{let{next:dt}=ft,vt;space.indexOf(dt)>-1||dt==slash&&((vt=ft.peek(1))==slash||vt==star)||dt!=braceR&&dt!=semicolon&&dt!=-1&&!lt.context&&lt.canShift(noSemi)&&ft.acceptToken(noSemi)},{contextual:!0}),incdecToken=new ExternalTokenizer((ft,lt)=>{let{next:dt}=ft;if((dt==plus||dt==minus)&&(ft.advance(),dt==ft.next)){ft.advance();let vt=!lt.context&&lt.canShift(incdec);ft.acceptToken(vt?incdec:incdecPrefix)}},{contextual:!0}),jsHighlight=styleTags({"get set async static":tags.modifier,"for while do if else switch try catch finally return throw break continue default case":tags.controlKeyword,"in of await yield void typeof delete instanceof":tags.operatorKeyword,"let var const function class extends":tags.definitionKeyword,"import export from":tags.moduleKeyword,"with debugger as new":tags.keyword,TemplateString:tags.special(tags.string),super:tags.atom,BooleanLiteral:tags.bool,this:tags.self,null:tags.null,Star:tags.modifier,VariableName:tags.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":tags.function(tags.variableName),VariableDefinition:tags.definition(tags.variableName),Label:tags.labelName,PropertyName:tags.propertyName,PrivatePropertyName:tags.special(tags.propertyName),"CallExpression/MemberExpression/PropertyName":tags.function(tags.propertyName),"FunctionDeclaration/VariableDefinition":tags.function(tags.definition(tags.variableName)),"ClassDeclaration/VariableDefinition":tags.definition(tags.className),PropertyDefinition:tags.definition(tags.propertyName),PrivatePropertyDefinition:tags.definition(tags.special(tags.propertyName)),UpdateOp:tags.updateOperator,LineComment:tags.lineComment,BlockComment:tags.blockComment,Number:tags.number,String:tags.string,Escape:tags.escape,ArithOp:tags.arithmeticOperator,LogicOp:tags.logicOperator,BitOp:tags.bitwiseOperator,CompareOp:tags.compareOperator,RegExp:tags.regexp,Equals:tags.definitionOperator,Arrow:tags.function(tags.punctuation),": Spread":tags.punctuation,"( )":tags.paren,"[ ]":tags.squareBracket,"{ }":tags.brace,"InterpolationStart InterpolationEnd":tags.special(tags.brace),".":tags.derefOperator,", ;":tags.separator,"@":tags.meta,TypeName:tags.typeName,TypeDefinition:tags.definition(tags.typeName),"type enum interface implements namespace module declare":tags.definitionKeyword,"abstract global Privacy readonly override":tags.modifier,"is keyof unique infer":tags.operatorKeyword,JSXAttributeValue:tags.attributeValue,JSXText:tags.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":tags.angleBracket,"JSXIdentifier JSXNameSpacedName":tags.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":tags.attributeName,"JSXBuiltin/JSXIdentifier":tags.standard(tags.tagName)}),spec_identifier={__proto__:null,export:14,as:19,from:27,default:30,async:35,function:36,extends:46,this:50,true:58,false:58,null:70,void:74,typeof:78,super:96,new:130,delete:146,yield:155,await:159,class:164,public:221,private:221,protected:221,readonly:223,instanceof:242,satisfies:245,in:246,const:248,import:280,keyof:335,unique:339,infer:345,is:381,abstract:401,implements:403,type:405,let:408,var:410,interface:417,enum:421,namespace:427,module:429,declare:433,global:437,for:458,of:467,while:470,with:474,do:478,if:482,else:484,switch:488,case:494,try:500,catch:504,finally:508,return:512,throw:516,break:520,continue:524,debugger:528},spec_word={__proto__:null,async:117,get:119,set:121,declare:181,public:183,private:183,protected:183,static:185,abstract:187,override:189,readonly:195,accessor:197,new:385},spec_LessThan={__proto__:null,"<":137},parser=LRParser.deserialize({version:14,states:"$EnO`QUOOO%QQUOOO'TQWOOP(bOSOOO*pQ(CjO'#CfO*wOpO'#CgO+VO!bO'#CgO+eO07`O'#DZO-vQUO'#DaO.WQUO'#DlO%QQUO'#DvO0_QUO'#EOOOQ(CY'#EW'#EWO0uQSO'#ETOOQO'#I`'#I`O0}QSO'#GkOOQO'#Ei'#EiO1YQSO'#EhO1_QSO'#EhO3aQ(CjO'#JcO6QQ(CjO'#JdO6nQSO'#FWO6sQ#tO'#FoOOQ(CY'#F`'#F`O7OO&jO'#F`O7^Q,UO'#FvO8tQSO'#FuOOQ(CY'#Jd'#JdOOQ(CW'#Jc'#JcOOQQ'#J}'#J}O8yQSO'#IPO9OQ(C[O'#IQOOQQ'#JP'#JPOOQQ'#IU'#IUQ`QUOOO%QQUO'#DnO9WQUO'#DzO%QQUO'#D|O9_QSO'#GkO9dQ,UO'#ClO9rQSO'#EgO9}QSO'#ErO:SQ,UO'#F_O:qQSO'#GkO:vQSO'#GoO;RQSO'#GoO;aQSO'#GrO;aQSO'#GsO;aQSO'#GuO9_QSO'#GxO<QQSO'#G{O=cQSO'#CbO=sQSO'#HYO={QSO'#H`O={QSO'#HbO`QUO'#HdO={QSO'#HfO={QSO'#HiO>QQSO'#HoO>VQ(C]O'#HuO%QQUO'#HwO>bQ(C]O'#HyO>mQ(C]O'#H{O9OQ(C[O'#H}O>xQ(CjO'#CfO?zQWO'#DfQOQSOOO@bQSO'#EPO9dQ,UO'#EgO@mQSO'#EgO@xQ`O'#F_OOQQ'#Cd'#CdOOQ(CW'#Dk'#DkOOQ(CW'#Jg'#JgO%QQUO'#JgOBUQWO'#E`OOQ(CW'#E_'#E_OB`Q(C`O'#E`OBzQWO'#ESOOQO'#Jj'#JjOC`QWO'#ESOCmQWO'#E`ODTQWO'#EfODWQWO'#E`ODqQWO'#E`OAQQWO'#E`OBzQWO'#E`PEbO?MpO'#C`POOO)CDn)CDnOOOO'#IV'#IVOEmOpO,59ROOQ(CY,59R,59ROOOO'#IW'#IWOE{O!bO,59RO%QQUO'#D]OOOO'#IY'#IYOFZO07`O,59uOOQ(CY,59u,59uOFiQUO'#IZOF|QSO'#JeOIOQbO'#JeO+sQUO'#JeOIVQSO,59{OImQSO'#EiOIzQSO'#JrOJVQSO'#JqOJVQSO'#JqOJ_QSO,5;VOJdQSO'#JpOOQ(CY,5:W,5:WOJkQUO,5:WOLlQ(CjO,5:bOM]QSO,5:jOMbQSO'#JnON[Q(C[O'#JoO:vQSO'#JnONcQSO'#JnONkQSO,5;UONpQSO'#JnOOQ(CY'#Cf'#CfO%QQUO'#EOO! dQ`O,5:oOOQO'#Jk'#JkOOQO-E<^-E<^O9_QSO,5=VO! zQSO,5=VO!!PQUO,5;SO!$SQ,UO'#EdO!%gQSO,5;SO!'PQ,UO'#DpO!'WQUO'#DuO!'bQWO,5;]O!'jQWO,5;]O%QQUO,5;]OOQQ'#FO'#FOOOQQ'#FQ'#FQO%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^OOQQ'#FU'#FUO!'xQUO,5;oOOQ(CY,5;t,5;tOOQ(CY,5;u,5;uO!){QSO,5;uOOQ(CY,5;v,5;vO%QQUO'#IfO!*TQ(C[O,5<cO!$SQ,UO,5;^O!*rQ,UO,5;^O%QQUO,5;rO!*yQ#tO'#FeO!+vQ#tO'#JvO!+bQ#tO'#JvO!+}Q#tO'#JvOOQO'#Jv'#JvO!,cQ#tO,5;}OOOO,5<Z,5<ZO!,tQUO'#FqOOOO'#Ie'#IeO7OO&jO,5;zO!,{Q#tO'#FsOOQ(CY,5;z,5;zO!-lQ7[O'#CrOOQ(CY'#Cv'#CvO!.PQSO'#CvO!.UO07`O'#CzO!.rQ,UO,5<`O!.yQSO,5<bO!0`QMhO'#GQO!0mQSO'#GRO!0rQSO'#GRO!0wQMhO'#GVO!1vQWO'#GZO!2iQ7[O'#J^OOQ(CY'#J^'#J^O!2sQSO'#J]O!3RQSO'#J[O!3ZQSO'#CqOOQ(CY'#Ct'#CtOOQ(CY'#DO'#DOOOQ(CY'#DQ'#DQO0xQSO'#DSO!%lQ,UO'#FxO!%lQ,UO'#FzO!3cQSO'#F|O!3hQSO'#F}O!0rQSO'#GTO!%lQ,UO'#GYO!3mQSO'#EjO!4XQSO,5<aO`QUO,5>kOOQQ'#JX'#JXOOQQ,5>l,5>lOOQQ-E<S-E<SO!6WQ(CjO,5:YO!8tQ(CjO,5:fO%QQUO,5:fO!;_Q(CjO,5:hOOQ(CW'#Co'#CoO!<OQ,UO,5=VO!<^Q(C[O'#JYO8tQSO'#JYO!<oQ(C[O,59WO!<zQWO,59WO!=SQ,UO,59WO9dQ,UO,59WO!=_QSO,5;SO!=gQSO'#HXO!=xQSO'#KRO%QQUO,5;wO!>QQWO,5;yO!>VQSO,5=rO!>[QSO,5=rO!>aQSO,5=rO9OQ(C[O,5=rO!>oQSO'#EkO!?iQWO'#ElOOQ(CW'#Jp'#JpO!?pQ(C[O'#KOO9OQ(C[O,5=ZO;aQSO,5=aOOQO'#Cr'#CrO!?{QWO,5=^O!@TQ,UO,5=_O!@`QSO,5=aO!@eQ`O,5=dO>QQSO'#G}O9_QSO'#HPO!@mQSO'#HPO9dQ,UO'#HSO!@rQSO'#HSOOQQ,5=g,5=gO!@wQSO'#HTO!APQSO'#ClO!AUQSO,58|O!A`QSO,58|O!ChQUO,58|OOQQ,58|,58|O!CuQ(C[O,58|O%QQUO,58|O!DQQUO'#H[OOQQ'#H]'#H]OOQQ'#H^'#H^O`QUO,5=tO!DbQSO,5=tO`QUO,5=zO`QUO,5=|O!DgQSO,5>OO`QUO,5>QO!DlQSO,5>TO!DqQUO,5>ZOOQQ,5>a,5>aO%QQUO,5>aO9OQ(C[O,5>cOOQQ,5>e,5>eO!HxQSO,5>eOOQQ,5>g,5>gO!HxQSO,5>gOOQQ,5>i,5>iO!H}QWO'#DXO%QQUO'#JgO!IlQWO'#JgO!JZQWO'#DgO!JlQWO'#DgO!L}QUO'#DgO!MUQSO'#JfO!M^QSO,5:QO!McQSO'#EmO!MqQSO'#JsO!MyQSO,5;WO!NOQWO'#DgO!N]QWO'#EROOQ(CY,5:k,5:kO%QQUO,5:kO!NdQSO,5:kO>QQSO,5;RO!<zQWO,5;RO!=SQ,UO,5;RO9dQ,UO,5;RO!NlQSO,5@RO!NqQ!LQO,5:oO# wQ(C`O,5:zOBzQWO,5:nO#!cQWO,5:nO#!pQWO,5:zO##WQWO,5:zO##qQWO,5:zO#$bQWO,5:zOBzQWO,5:zO!<oQ(C[O,5:nOOQ(CW'#Ec'#EcOOQO,5:z,5:zO%QQUO,5:zO#%UQ(C[O,5:zO#%aQ(C[O,5:zO!<zQWO,5:nOOQO,5;Q,5;QO#%oQ(C[O,5:zPOOO'#IT'#ITP#&TO?MpO,58zPOOO,58z,58zOOOO-E<T-E<TOOQ(CY1G.m1G.mOOOO-E<U-E<UO#&`Q`O,59wOOOO-E<W-E<WOOQ(CY1G/a1G/aO#&eQbO,5>uO+sQUO,5>uOOQO,5>{,5>{O#&oQUO'#IZOOQO-E<X-E<XO#&|QSO,5@PO#'UQbO,5@PO#']QSO,5@]OOQ(CY1G/g1G/gO%QQUO,5@^O#'eQSO'#IaOOQO-E<_-E<_O#']QSO,5@]OOQ(CW1G0q1G0qOOQ(CY1G/r1G/rOOQ(CY1G0U1G0UO#'yQSO,5@YO:vQSO,5@YO#(RQSO,5@YO%QQUO,5@ZO#(aQ(C[O,5@ZO#(rQ(C[O,5@ZO#(yQSO'#IcO#'yQSO,5@YOOQ(CW1G0p1G0pO!'bQWO,5:qO!'mQWO,5:qOOQO,5:s,5:sO#)hQSO,5:sO#)pQ,UO1G2qO9_QSO1G2qOOQ(CY1G0n1G0nO#*OQ(CjO1G0nO#+TQ(ChO,5;OOOQ(CY'#GP'#GPO#+qQ(CjO'#J^O!!PQUO1G0nO#-yQ,UO'#JhO#.TQSO,5:[O#.YQbO'#JiO%QQUO'#JiO#.dQSO,5:aOOQ(CY'#DX'#DXOOQ(CY1G0w1G0wO%QQUO1G0wOOQ(CY1G1a1G1aO#.iQSO1G0wO#1QQ(CjO1G0xO#1XQ(CjO1G0xO#3rQ(CjO1G0xO#3yQ(CjO1G0xO#6TQ(CjO1G0xO#6kQ(CjO1G0xO#9eQ(CjO1G0xO#9lQ(CjO1G0xO#<VQ(CjO1G0xO#<^Q(CjO1G0xO#>UQ(CjO1G0xO#AUQ$IUO'#CfO#CSQ$IUO1G1ZO#EQQ$IUO'#JdO!*OQSO1G1aO#EeQ(CjO,5?QOOQ(CW-E<d-E<dO#FXQ(CjO1G0xOOQ(CY1G0x1G0xO#HdQ(CjO1G1^O#IWQ#tO,5<RO#I`Q#tO,5<SO#IhQ#tO'#FjO#JPQSO'#FiOOQO'#Jw'#JwOOQO'#Id'#IdO#JUQ#tO1G1iOOQ(CY1G1i1G1iOOOO1G1t1G1tO#JgQ$IUO'#JcO#JqQSO,5<]O!'xQUO,5<]OOOO-E<c-E<cOOQ(CY1G1f1G1fO#JvQWO'#JvOOQ(CY,5<_,5<_O#KOQWO,5<_OOQ(CY,59b,59bO!$SQ,UO'#C|OOOO'#IX'#IXO#KTO07`O,59fOOQ(CY,59f,59fO%QQUO1G1zO!3hQSO'#IhO#K`QSO,5<sOOQ(CY,5<p,5<pOOQO'#Gf'#GfO!%lQ,UO,5=POOQO'#Gh'#GhO!%lQ,UO,5=RO!$SQ,UO,5=TOOQO1G1|1G1|O#KnQ`O'#CoO#LRQ`O,5<lO#LYQSO'#JzO9_QSO'#JzO#LhQSO,5<nO!%lQ,UO,5<mO#LmQSO'#GSO#LxQSO,5<mO#L}Q`O'#GPO#M[Q`O'#J{O#MfQSO'#J{O!$SQ,UO'#J{O#MkQSO,5<qO#MpQWO'#G[O!1qQWO'#G[O#NRQSO'#G^O#NWQSO'#G`O!0rQSO'#GcO#N]Q(C[O'#IjO#NhQWO,5<uOOQ(CY,5<u,5<uO#NoQWO'#G[O#N}QWO'#G]O$ VQWO'#G]OOQ(CY,5=U,5=UO!%lQ,UO,5?wO!%lQ,UO,5?wO$ [QSO'#IkO$ gQSO,5?vO$ oQSO,59]O$!`Q,UO,59nOOQ(CY,59n,59nO$#RQ,UO,5<dO$#tQ,UO,5<fO?rQSO,5<hOOQ(CY,5<i,5<iO$$OQSO,5<oO$$TQ,UO,5<tO!!PQUO1G1{O$$eQSO1G1{OOQQ1G4V1G4VOOQ(CY1G/t1G/tO!){QSO1G/tO$&dQ(CjO1G0QOOQQ1G2q1G2qO!$SQ,UO1G2qO%QQUO1G2qO$'TQSO1G2qO$'`Q,UO'#EdOOQ(CW,5?t,5?tO$'jQ(C[O,5?tOOQQ1G.r1G.rO!<oQ(C[O1G.rO!<zQWO1G.rO!=SQ,UO1G.rO$'{QSO1G0nO$(QQSO'#CfO$(]QSO'#KSO$(eQSO,5=sO$(jQSO'#KSO$(oQSO'#KSO$(zQSO'#IsO$)YQSO,5@mO$)bQbO1G1cOOQ(CY1G1e1G1eO9_QSO1G3^O?rQSO1G3^O$)iQSO1G3^O$)nQSO1G3^OOQQ1G3^1G3^O:vQSO'#JqO:vQSO'#EmO%QQUO'#EmO:vQSO'#ImO$)sQ(C[O,5@jOOQQ1G2u1G2uO!@`QSO1G2{O!$SQ,UO1G2xO$*OQSO1G2xOOQQ1G2y1G2yO!$SQ,UO1G2yO$*TQSO1G2yO$*]QWO'#GwOOQQ1G2{1G2{O!1qQWO'#IoO!@eQ`O1G3OOOQQ1G3O1G3OOOQQ,5=i,5=iO$*eQ,UO,5=kO9_QSO,5=kO#NWQSO,5=nO8tQSO,5=nO!<zQWO,5=nO!=SQ,UO,5=nO9dQ,UO,5=nO$*sQSO'#KQO$+OQSO,5=oOOQQ1G.h1G.hO$+TQ(C[O1G.hO?rQSO1G.hO$+`QSO1G.hO9OQ(C[O1G.hO$+kQbO,5@oO$,OQSO,5@oO$,ZQUO,5=vO$,bQSO,5=vO:vQSO,5@oOOQQ1G3`1G3`O`QUO1G3`OOQQ1G3f1G3fOOQQ1G3h1G3hO={QSO1G3jO$,gQUO1G3lO$0hQUO'#HkOOQQ1G3o1G3oO$0uQSO'#HqO>QQSO'#HsOOQQ1G3u1G3uO$0}QUO1G3uO9OQ(C[O1G3{OOQQ1G3}1G3}OOQ(CW'#GW'#GWO9OQ(C[O1G4PO9OQ(C[O1G4RO$5RQSO,5@RO!'xQUO,5;XO:vQSO,5;XO>QQSO,5:RO!'xQUO,5:RO!<zQWO,5:RO$5WQ$IUO,5:ROOQO,5;X,5;XO$5bQWO'#I[O$5xQSO,5@QOOQ(CY1G/l1G/lO$6QQWO'#IbO$6[QSO,5@_OOQ(CW1G0r1G0rO!JlQWO,5:ROOQO'#I_'#I_O$6dQWO,5:mOOQ(CY,5:m,5:mO!NgQSO1G0VOOQ(CY1G0V1G0VO%QQUO1G0VOOQ(CY1G0m1G0mO>QQSO1G0mO!<zQWO1G0mO!=SQ,UO1G0mOOQ(CW1G5m1G5mO!<oQ(C[O1G0YOOQO1G0f1G0fO%QQUO1G0fO$6kQ(C[O1G0fO$6vQ(C[O1G0fO!<zQWO1G0YOBzQWO1G0YO$7UQ(C`O1G0fO$7pQWO1G0YOBzQWO1G0fO$7}QWO1G0fO$8eQWO1G0fO$9OQWO1G0fO$9oQ(C[O1G0fOOQO1G0Y1G0YO$:TQ(CjO1G0fPOOO-E<R-E<RPOOO1G.f1G.fOOOO1G/c1G/cO$:_Q`O,5<cO$:gQbO1G4aOOQO1G4g1G4gO%QQUO,5>uO$:qQSO1G5kO$:yQSO1G5wO$;RQbO1G5xO:vQSO,5>{O$;]QSO1G5tO$;]QSO1G5tO:vQSO1G5tO$;eQ(CjO1G5uO%QQUO1G5uO$;uQ(C[O1G5uO$<WQSO,5>}O:vQSO,5>}OOQO,5>},5>}O$<lQSO,5>}OOQO-E<a-E<aOOQO1G0]1G0]OOQO1G0_1G0_O!*OQSO1G0_OOQQ7+(]7+(]O!$SQ,UO7+(]O%QQUO7+(]O$<zQSO7+(]O$=VQ,UO7+(]O$=eQ(CjO,59nO$?mQ(CjO,5<dO$AxQ(CjO,5<fO$DTQ(CjO,5<tOOQ(CY7+&Y7+&YO$FfQ(CjO7+&YO$GYQ,UO'#I]O$GdQSO,5@SOOQ(CY1G/v1G/vO$GlQUO'#I^O$GyQSO,5@TO$HRQbO,5@TOOQ(CY1G/{1G/{O$H]QSO7+&cOOQ(CY7+&c7+&cO$HbQ$IUO,5:bO%QQUO7+&uO$HlQ$IUO,5:YO$HyQ$IUO,5:fO$ITQ$IUO,5:hOOQ(CY7+&{7+&{OOQO1G1m1G1mOOQO1G1n1G1nO$I_Q#tO,5<UO!'xQUO,5<TOOQO-E<b-E<bOOQ(CY7+'T7+'TOOOO7+'`7+'`OOOO1G1w1G1wO$IjQSO1G1wOOQ(CY1G1y1G1yO$IoQ`O,59hOOOO-E<V-E<VOOQ(CY1G/Q1G/QO$IvQ(CjO7+'fOOQ(CY,5?S,5?SO$JjQSO,5?SOOQ(CY1G2_1G2_P$JoQSO'#IhPOQ(CY-E<f-E<fO$KcQ,UO1G2kO$LUQ,UO1G2mO$L`Q`O1G2oOOQ(CY1G2W1G2WO$LgQSO'#IgO$LuQSO,5@fO$LuQSO,5@fO$L}QSO,5@fO$MYQSO,5@fOOQO1G2Y1G2YO$MhQ,UO1G2XO!%lQ,UO1G2XO$MxQMhO'#IiO$NYQSO,5@gO!$SQ,UO,5@gO$NbQ`O,5@gOOQ(CY1G2]1G2]OOQ(CW,5<v,5<vOOQ(CW,5<w,5<wO$NlQSO,5<wOBuQSO,5<wO!<zQWO,5<vOOQO'#G_'#G_O$NqQSO,5<xOOQ(CW,5<z,5<zO$NlQSO,5<}OOQO,5?U,5?UOOQO-E<h-E<hOOQ(CY1G2a1G2aO!1qQWO,5<vO$NyQSO,5<wO#NRQSO,5<xO!1qQWO,5<wO% UQ,UO1G5cO% `Q,UO1G5cOOQO,5?V,5?VOOQO-E<i-E<iOOQO1G.w1G.wO!>QQWO,59pO%QQUO,59pO% mQSO1G2SO!%lQ,UO1G2ZO% rQ(CjO7+'gOOQ(CY7+'g7+'gO!!PQUO7+'gOOQ(CY7+%`7+%`O%!fQ`O'#J|O!NgQSO7+(]O%!pQbO7+(]O$<}QSO7+(]O%!wQ(ChO'#CfO%#[Q(ChO,5<{O%#|QSO,5<{OOQ(CW1G5`1G5`OOQQ7+$^7+$^O!<oQ(C[O7+$^O!<zQWO7+$^O!!PQUO7+&YO%$RQSO'#IrO%$gQSO,5@nOOQO1G3_1G3_O9_QSO,5@nO%$gQSO,5@nO%$oQSO,5@nOOQO,5?_,5?_OOQO-E<q-E<qOOQ(CY7+&}7+&}O%$tQSO7+(xO9OQ(C[O7+(xO9_QSO7+(xO?rQSO7+(xO%$yQSO,5;XOOQ(CW,5?X,5?XOOQ(CW-E<k-E<kOOQQ7+(g7+(gO%%OQ(ChO7+(dO!$SQ,UO7+(dO%%YQ`O7+(eOOQQ7+(e7+(eO!$SQ,UO7+(eO%%aQSO'#KPO%%lQSO,5=cOOQO,5?Z,5?ZOOQO-E<m-E<mOOQQ7+(j7+(jO%&{QWO'#HQOOQQ1G3V1G3VO!$SQ,UO1G3VO%QQUO1G3VO%'SQSO1G3VO%'_Q,UO1G3VO9OQ(C[O1G3YO#NWQSO1G3YO8tQSO1G3YO!<zQWO1G3YO!=SQ,UO1G3YO%'mQSO'#IqO%'xQSO,5@lO%(QQWO,5@lOOQ(CW1G3Z1G3ZOOQQ7+$S7+$SO?rQSO7+$SO9OQ(C[O7+$SO%(]QSO7+$SO%QQUO1G6ZO%QQUO1G6[O%(bQUO1G3bO%(iQSO1G3bO%(nQUO1G3bO%(uQ(C[O1G6ZOOQQ7+(z7+(zO9OQ(C[O7+)UO`QUO7+)WOOQQ'#KV'#KVOOQQ'#It'#ItO%)PQUO,5>VOOQQ,5>V,5>VO%QQUO'#HlO%)^QSO'#HnOOQQ,5>],5>]O:vQSO,5>]OOQQ,5>_,5>_OOQQ7+)a7+)aOOQQ7+)g7+)gOOQQ7+)k7+)kOOQQ7+)m7+)mO%)cQWO1G5mO%)wQ$IUO1G0sO%*RQSO1G0sOOQO1G/m1G/mO%*^Q$IUO1G/mO>QQSO1G/mO!'xQUO'#DgOOQO,5>v,5>vOOQO-E<Y-E<YOOQO,5>|,5>|OOQO-E<`-E<`O!<zQWO1G/mOOQO-E<]-E<]OOQ(CY1G0X1G0XOOQ(CY7+%q7+%qO!NgQSO7+%qOOQ(CY7+&X7+&XO>QQSO7+&XO!<zQWO7+&XOOQO7+%t7+%tO$:TQ(CjO7+&QOOQO7+&Q7+&QO%QQUO7+&QO%*hQ(C[O7+&QO!<oQ(C[O7+%tO!<zQWO7+%tO%*sQ(C[O7+&QOBzQWO7+%tO%+RQ(C[O7+&QO%+gQ(C`O7+&QO%+qQWO7+%tOBzQWO7+&QO%,OQWO7+&QO%,fQWO7+&QO%-PQSO7++`O%-PQSO7++`O%-XQ(CjO7++aO%QQUO7++aOOQO1G4i1G4iO:vQSO1G4iO%-iQSO1G4iOOQO7+%y7+%yO!NgQSO<<KwO%!pQbO<<KwO%-wQSO<<KwOOQQ<<Kw<<KwO!$SQ,UO<<KwO%QQUO<<KwO%.PQSO<<KwO%.[Q(CjO1G2kO%0gQ(CjO1G2mO%2rQ(CjO1G2XO%5TQ,UO,5>wOOQO-E<Z-E<ZO%5_QbO,5>xO%QQUO,5>xOOQO-E<[-E<[O%5iQSO1G5oOOQ(CY<<I}<<I}O%5qQ$IUO1G0nO%7{Q$IUO1G0xO%8SQ$IUO1G0xO%:WQ$IUO1G0xO%:_Q$IUO1G0xO%<SQ$IUO1G0xO%<jQ$IUO1G0xO%>}Q$IUO1G0xO%?UQ$IUO1G0xO%AYQ$IUO1G0xO%AaQ$IUO1G0xO%CXQ$IUO1G0xO%ClQ(CjO<<JaO%DqQ$IUO1G0xO%FgQ$IUO'#J^O%HjQ$IUO1G1^O%HwQ$IUO1G0QO!'xQUO'#FlOOQO'#Jx'#JxOOQO1G1p1G1pO%IRQSO1G1oO%IWQ$IUO,5?QOOOO7+'c7+'cOOOO1G/S1G/SOOQ(CY1G4n1G4nO!%lQ,UO7+(ZO%IbQSO,5?RO9_QSO,5?ROOQO-E<e-E<eO%IpQSO1G6QO%IpQSO1G6QO%IxQSO1G6QO%JTQ,UO7+'sO%JeQ`O,5?TO%JoQSO,5?TO!$SQ,UO,5?TOOQO-E<g-E<gO%JtQ`O1G6RO%KOQSO1G6ROOQ(CW1G2c1G2cO$NlQSO1G2cOOQ(CW1G2b1G2bO%KWQSO1G2dO!$SQ,UO1G2dOOQ(CW1G2i1G2iO!<zQWO1G2bOBuQSO1G2cO%K]QSO1G2dO%KeQSO1G2cO!%lQ,UO7+*}OOQ(CY1G/[1G/[O%KpQSO1G/[OOQ(CY7+'n7+'nO%KuQ,UO7+'uO%LVQ(CjO<<KROOQ(CY<<KR<<KRO!$SQ,UO'#IlO%LyQSO,5@hO!$SQ,UO1G2gOOQQ<<Gx<<GxO!<oQ(C[O<<GxO%MRQ(CjO<<ItOOQ(CY<<It<<ItOOQO,5?^,5?^O%MuQSO,5?^O$(oQSO,5?^OOQO-E<p-E<pO%MzQSO1G6YO%MzQSO1G6YO9_QSO1G6YO?rQSO<<LdOOQQ<<Ld<<LdO%NSQSO<<LdO9OQ(C[O<<LdO%NXQSO1G0sOOQQ<<LO<<LOO%%OQ(ChO<<LOOOQQ<<LP<<LPO%%YQ`O<<LPO%N^QWO'#InO%NiQSO,5@kO!'xQUO,5@kOOQQ1G2}1G2}O%NqQ(C`O'#JgO& ]QUO'#JgO& dQWO'#E`O&!QQ(C[O'#E`OB`Q(C`O'#E`O(YQWO'#HROOQO'#Ip'#IpO9OQ(C[O'#IpO&!fQWO,5=lOOQQ,5=l,5=lO&#OQWO'#E`O& vQWO'#E`O&#VQWO'#E`O&#pQWO'#E`O& jQWO'#E`O&$aQWO'#HRO&$rQSO7+(qO&$wQSO7+(qOOQQ7+(q7+(qO!$SQ,UO7+(qO%QQUO7+(qO&%PQSO7+(qOOQQ7+(t7+(tO9OQ(C[O7+(tO#NWQSO7+(tO8tQSO7+(tO!<zQWO7+(tO&%[QSO,5?]OOQO-E<o-E<oOOQO'#HU'#HUO&%gQSO1G6WO9OQ(C[O<<GnOOQQ<<Gn<<GnO?rQSO<<GnO&%oQSO7++uO&%tQSO7++vOOQQ7+(|7+(|O&%yQSO7+(|O&&OQUO7+(|O&&VQSO7+(|O%QQUO7++uO%QQUO7++vOOQQ<<Lp<<LpOOQQ<<Lr<<LrOOQQ-E<r-E<rOOQQ1G3q1G3qO&&[QSO,5>WOOQQ,5>Y,5>YO&&aQSO1G3wO:vQSO7+&_O!'xQUO7+&_OOQO7+%X7+%XO&&fQ$IUO1G5xO>QQSO7+%XOOQ(CY<<I]<<I]OOQ(CY<<Is<<IsO>QQSO<<IsOOQO<<Il<<IlO$:TQ(CjO<<IlO%QQUO<<IlOOQO<<I`<<I`O!<oQ(C[O<<I`O&&pQ(C[O<<IlO!<zQWO<<I`O&&{Q(C[O<<IlOBzQWO<<I`O&'ZQ(C[O<<IlO&'oQ(C`O<<IlO&'yQWO<<I`OBzQWO<<IlO&(WQWO<<IlO&(nQSO<<NzO&(vQ(CjO<<N{OOQO7+*T7+*TO:vQSO7+*TOOQQANAcANAcO&)WQSOANAcO!$SQ,UOANAcO!NgQSOANAcO%!pQbOANAcO%QQUOANAcO&)`Q(CjO7+'sO&+qQ(CjO7+'uO&.SQbO1G4dO&.^Q$IUO7+&YO&.kQ$IUO,59nO&0nQ$IUO,5<dO&2qQ$IUO,5<fO&4tQ$IUO,5<tO&6jQ$IUO7+'fO&6wQ$IUO7+'gO&7UQSO,5<WOOQO7+'Z7+'ZO&7ZQ,UO<<KuOOQO1G4m1G4mO&7bQSO1G4mO&7mQSO1G4mO&7{QSO7++lO&7{QSO7++lO!$SQ,UO1G4oO&8TQ`O1G4oO&8_QSO7++mOOQ(CW7+'}7+'}O$NlQSO7+(OO&8gQ`O7+(OOOQ(CW7+'|7+'|O$NlQSO7+'}O&8nQSO7+(OO!$SQ,UO7+(OOBuQSO7+'}O&8sQ,UO<<NiOOQ(CY7+$v7+$vO&8}Q`O,5?WOOQO-E<j-E<jO&9XQ(ChO7+(ROOQQAN=dAN=dO9_QSO1G4xOOQO1G4x1G4xO&9iQSO1G4xO&9nQSO7++tO&9nQSO7++tO9OQ(C[OANBOO?rQSOANBOOOQQANBOANBOOOQQANAjANAjOOQQANAkANAkO&9vQSO,5?YOOQO-E<l-E<lO&:RQ$IUO1G6VO&:]Q(C[O,5=mO8tQSO,5=mO&<nQbO'#CfO&<xQWO,5:zO&=SQWO,5:zO&=aQWO,5:zO&=tQWO,5:zO!<zQWO,5=mOOQO,5?[,5?[OOQO-E<n-E<nOOQQ1G3W1G3WO& ]QUO,5<xO%NqQ(C`O,5=mO# wQ(C`O,5:zO(YQWO,5=mO&>[QWO,5=mO&>mQWO,5:zOOQQ<<L]<<L]O!$SQ,UO<<L]O&$rQSO<<L]O&?WQSO<<L]O%QQUO<<L]OOQQ<<L`<<L`O9OQ(C[O<<L`O#NWQSO<<L`O8tQSO<<L`O&?`QWO1G4wO&?kQSO7++rOOQQAN=YAN=YO9OQ(C[OAN=YOOQQ<= a<= aOOQQ<= b<= bOOQQ<<Lh<<LhO&?sQSO<<LhO&?xQUO<<LhO&@PQSO<= aO&@UQSO<= bOOQQ1G3r1G3rO>QQSO7+)cO&@ZQSO<<IyO&@fQ$IUO<<IyOOQO<<Hs<<HsOOQ(CYAN?_AN?_OOQOAN?WAN?WO$:TQ(CjOAN?WOOQOAN>zAN>zO%QQUOAN?WO!<oQ(C[OAN>zO&@pQ(C[OAN?WO!<zQWOAN>zO&@{Q(C[OAN?WOBzQWOAN>zO&AZQ(C[OAN?WO&AoQ(C`OAN?WO&AyQWOAN>zOBzQWOAN?WOOQO<<Mo<<MoOOQQG26}G26}O!$SQ,UOG26}O!NgQSOG26}O&BWQSOG26}O%!pQbOG26}O&B`Q$IUO<<JaO&BmQ$IUO1G2XO&DcQ$IUO1G2kO&FfQ$IUO1G2mO&HiQ$IUO<<KRO&HvQ$IUO<<ItOOQO1G1r1G1rO!%lQ,UOANAaOOQO7+*X7+*XO&ITQSO7+*XO&I`QSO<= WO&IhQ`O7+*ZOOQ(CW<<Kj<<KjO$NlQSO<<KjOOQ(CW<<Ki<<KiO&IrQ`O<<KjO$NlQSO<<KiOOQO7+*d7+*dO9_QSO7+*dO&IyQSO<= `OOQQG27jG27jO9OQ(C[OG27jO!'xQUO1G4tO&JRQSO7++qOOQO1G3X1G3XO9OQ(C[O1G3XO&:]Q(C[O1G3XO&JZQWO1G0fO&JeQWO1G0fO&JrQWO1G0fO8tQSO1G3XO!<zQWO1G3XO(YQWO1G3XO%NqQ(C`O1G3XO$7UQ(C`O1G0fO&KVQWO1G3XO&$rQSOANAwOOQQANAwANAwO!$SQ,UOANAwO&KhQSOANAwOOQQANAzANAzO9OQ(C[OANAzO#NWQSOANAzOOQO'#HV'#HVOOQO7+*c7+*cOOQQG22tG22tOOQQANBSANBSO&KpQSOANBSOOQQAND{AND{OOQQAND|AND|OOQQ<<L}<<L}O!'xQUOAN?eOOQOG24rG24rO$:TQ(CjOG24rOOQOG24fG24fO%QQUOG24rO!<oQ(C[OG24fO&KuQ(C[OG24rO!<zQWOG24fO&LQQ(C[OG24rOBzQWOG24fO&L`Q(C[OG24rO!NgQSOLD,iOOQQLD,iLD,iO!$SQ,UOLD,iO&LtQSOLD,iO&L|Q$IUO7+'sO&NrQ$IUO7+'uO'!hQ,UOG26{OOQO<<Ms<<MsOOQ(CWANAUANAUO$NlQSOANAUOOQ(CWANATANATOOQO<<NO<<NOOOQQLD-ULD-UO'!xQ$IUO7+*`OOQO7+(s7+(sO9OQ(C[O7+(sO'#SQWO7+&QO'#^QWO7+&QO&:]Q(C[O7+(sO8tQSO7+(sO!<zQWO7+(sO(YQWO7+(sOOQQG27cG27cO&$rQSOG27cO!$SQ,UOG27cOOQQG27fG27fO9OQ(C[OG27fOOQQG27nG27nO'#kQ$IUOG25POOQOLD*^LD*^O$:TQ(CjOLD*^OOQOLD*QLD*QO%QQUOLD*^O!<oQ(C[OLD*QO'#uQ(C[OLD*^O!<zQWOLD*QO'$QQ(C[OLD*^OOQQ!$(!T!$(!TO!NgQSO!$(!TO!$SQ,UO!$(!TO'$`Q(CjOG26{OOQ(CWG26pG26pOOQO<<L_<<L_O'&qQWO<<IlO9OQ(C[O<<L_O&:]Q(C[O<<L_O8tQSO<<L_O!<zQWO<<L_OOQQLD,}LD,}O&$rQSOLD,}OOQQLD-QLD-QOOQO!$'Mx!$'MxO$:TQ(CjO!$'MxOOQO!$'Ml!$'MlO%QQUO!$'MxO!<oQ(C[O!$'MlO'&{Q(C[O!$'MxOOQQ!)9Eo!)9EoO!NgQSO!)9EoOOQOANAyANAyO9OQ(C[OANAyO&:]Q(C[OANAyO8tQSOANAyOOQQ!$(!i!$(!iOOQO!)9Cd!)9CdO$:TQ(CjO!)9CdOOQO!)9CW!)9CWO%QQUO!)9CdOOQQ!.K;Z!.K;ZO''WQ$IUOG26{OOQOG27eG27eO9OQ(C[OG27eO&:]Q(C[OG27eOOQO!.K9O!.K9OO$:TQ(CjO!.K9OOOQOLD-PLD-PO9OQ(C[OLD-POOQO!4/.j!4/.jOOQO!$(!k!$(!kO!'xQUO'#DvO0uQSO'#ETO'(|QbO'#JcO!'xQUO'#DnO')TQUO'#DzO!'xQUO'#D|O')[QbO'#CfO'+rQbO'#CfO',SQUO,5;SO!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO'#IfO'.VQSO,5<cO'._Q,UO,5;^O'/rQ,UO,5;^O!'xQUO,5;rO0xQSO'#DSO0xQSO'#DSO!$SQ,UO'#FxO'._Q,UO'#FxO!$SQ,UO'#FzO'._Q,UO'#FzO!$SQ,UO'#GYO'._Q,UO'#GYO!'xQUO,5:fO!'xQUO,5@^O',SQUO1G0nO'/yQ$IUO'#CfO!'xQUO1G1zO!$SQ,UO,5=PO'._Q,UO,5=PO!$SQ,UO,5=RO'._Q,UO,5=RO!$SQ,UO,5<mO'._Q,UO,5<mO',SQUO1G1{O!'xQUO7+&uO!$SQ,UO1G2XO'._Q,UO1G2XO!$SQ,UO1G2ZO'._Q,UO1G2ZO',SQUO7+'gO',SQUO7+&YO!$SQ,UOANAaO'._Q,UOANAaO'0TQSO'#EhO'0YQSO'#EhO'0bQSO'#FWO'0gQSO'#ErO'0lQSO'#JrO'0wQSO'#JpO'1SQSO,5;SO'1XQ,UO,5<`O'1`QSO'#GRO'1eQSO'#GRO'1jQSO,5<aO'1rQSO,5;SO'1zQ$IUO1G1ZO'2RQSO,5<mO'2WQSO,5<mO'2]QSO,5<oO'2bQSO,5<oO'2gQSO1G1{O'2lQSO1G0nO'2qQ,UO<<KuO'2xQ,UO<<KuO7^Q,UO'#FvO8tQSO'#FuO@mQSO'#EgO!'xQUO,5;oO!0rQSO'#GRO!0rQSO'#GRO!0rQSO'#GTO!0rQSO'#GTO!%lQ,UO7+(ZO!%lQ,UO7+(ZO$L`Q`O1G2oO$L`Q`O1G2oO!$SQ,UO,5=TO!$SQ,UO,5=T",stateData:"'4R~O'mOS'nOSROS'oRQ~OPYOQYOV!TO^pOaxObwOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!XXO!csO!hZO!kYO!lYO!mYO!otO!quO!tvO!x]O#p}O$QzO$UfO%`{O%b!OO%d|O%e|O%h!PO%j!QO%m!RO%n!RO%p!SO%}!UO&T!VO&V!WO&X!XO&Z!YO&^!ZO&d![O&j!]O&l!^O&n!_O&p!`O&r!aO'tSO'vTO'yUO(RVO(`[O(miO~OPYOQYOa!gOb!fOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!X!cO!csO!hZO!kYO!lYO!mYO!otO!quO!t!eO$Q!hO$UfO't!bO'vTO'yUO(RVO(`[O(miO~O^!qOl!kO|!lO![!rO!]!pO!^!pO!x<XO!|!wO!}!vO#O!tO#P!uO#Q!sO#T!xO#U!xO'u!iO'vTO'yUO(U!jO(`!nO~O'o!yO~OPYXXYX^YXkYXyYXzYX|YX!VYX!eYX!fYX!hYX!lYX#XYX#dcX#gYX#hYX#iYX#jYX#kYX#lYX#mYX#nYX#oYX#qYX#sYX#uYX#vYX#{YX'kYX(RYX(aYX(hYX(iYX~O!a$zX~P(gO[!{O'v!}O'w!{O'x!}O~O[#OO'x!}O'y!}O'z#OO~Oq#QO!O#RO(S#RO(T#TO~OPYOQYOa!gOb!fOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!X!cO!csO!hZO!kYO!lYO!mYO!otO!quO!t!eO$Q!hO$UfO't<^O'vTO'yUO(RVO(`[O(miO~O!U#XO!V#UO!S(XP!S(eP~P+sO!W#aO~P`OPYOQYOa!gOb!fOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!X!cO!csO!hZO!kYO!lYO!mYO!otO!quO!t!eO$Q!hO$UfO'vTO'yUO(RVO(`[O(miO~O!U#gO!x]O#b#jO#c#gO't<_O!g(bP~P._O!h#lO't#kO~O!t#pO!x]O%`#qO~O#d#rO~O!a#sO#d#rO~OP$ZOX$bOk$OOy#wOz#xO|#yO!V$_O!e$QO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O#k$PO#l$QO#m$QO#n$aO#o$QO#q$RO#s$TO#u$VO#v$WO(RVO(a$XO(h#zO(i#{O~O^(VX'k(VX'i(VX!g(VX!S(VX!X(VX%a(VX!a(VX~P1gO#X$cO#{$cOP(WXX(WXk(WXy(WXz(WX|(WX!V(WX!e(WX!h(WX!l(WX#g(WX#h(WX#i(WX#j(WX#k(WX#l(WX#m(WX#n(WX#o(WX#q(WX#s(WX#u(WX#v(WX(R(WX(a(WX(h(WX(i(WX!X(WX%a(WX~O^(WX!f(WX'k(WX'i(WX!S(WX!g(WXo(WX!a(WX~P3}O#X$cO~O$W$eO$Y$dO$a$jO~O!X$kO$UfO$d$lO$f$nO~Oi%QOk$rOl$qOm$qOs%ROu%SOw%TO|$yO!X$zO!c%YO!h$vO#c%ZO$Q%WO$m%UO$o%VO$r%XO't$pO'vTO'yUO'}%PO(R$sOd(OP~O!h%[O~O!a%^O~O^%_O'k%_O~O'u!iO~P%QO't%fO~O!h%[O't%fO'u!iO'}%PO~Ob%mO!h%[O't%fO~O#o$QO~Oy%rO!X%oO!h%qO%b%uO't%fO'u!iO'vTO'yUO](uP~O!t#pO~O|%wO!X%xO't%fO~O|%wO!X%xO%j%|O't%fO~O't%}O~O#p}O%b!OO%d|O%e|O%h!PO%j!QO%m!RO%n!RO~Oa&WOb&VO!t&TO%`&UO%r&SO~P;fOa&ZObwO!X&YO!tvO!x]O#p}O%`{O%d|O%e|O%h!PO%j!QO%m!RO%n!RO%p!SO~O_&^O#X&aO%b&[O'u!iO~P<eO!h&bO!q&fO~O!h#lO~O!XXO~O^%_O'j&nO'k%_O~O^%_O'j&qO'k%_O~O^%_O'j&sO'k%_O~O'iYX!SYXoYX!gYX&RYX!XYX%aYX!aYX~P(gO!['QO!]&yO!^&yO'u!iO'vTO'yUO~Ol&wO|&vO!U&zO(U&uO!W(YP!W(gP~P?fOg'TO!X'RO't%fO~Ob'YO!h%[O't%fO~Oy%rO!h%qO~Ol!kO|!lO!['_O!]'^O!^'^O!}'bO#O'aO#P'aO#Q'`O#T'dO#U'dO'u!iO'vTO'yUO(U!jO(`!nO~O!x<XO!|'cO~PAQO^%_O!a#sO!h%[O!l'jO#X'hO'k%_O'}%PO(a'fO~Ol!kO|!lO'vTO'yUO(U!jO(`!nO~O!]'^O!^'^O'u!iO~PBzO!['_O!]'^O!^'^O#T'dO#U'dO'u!iO~PBzO!XXO!['_O!]'^O!^'^O#Q'`O#T'dO#U'dO'u!iO~PBzO!['_O!]'^O!^'^O#O'aO#P'aO#Q'`O#T'dO#U'dO'u!iO~PBzO'p'nO'q'nO'r'pO~O[!{O'v'rO'w!{O'x'rO~O[#OO'x'rO'y'rO'z#OO~Oq#QO!O#RO(S#RO(T'vO~O!U'xO!S&}X!S'TX!V&}X!V'TX~P+sO!V'zO!S(XX~OP$ZOX$bOk$OOy#wOz#xO|#yO!V'zO!e$QO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O#k$PO#l$QO#m$QO#n$aO#o$QO#q$RO#s$TO#u$VO#v$WO(RVO(a$XO(h#zO(i#{O~O!S(XX~PGUO!S(PO~O!S(dX!V(dX!a(dX!g(dX(a(dX~O#X(dX#d#]X!W(dX~PI[O#X(QO!S(fX!V(fX~O!V(RO!S(eX~O!S(UO~O#X$cO~PI[O!W(VO~P`Oy#wOz#xO|#yO!f#uO!h#vO(RVOP!jaX!jak!ja!V!ja!e!ja!l!ja#g!ja#h!ja#i!ja#j!ja#k!ja#l!ja#m!ja#n!ja#o!ja#q!ja#s!ja#u!ja#v!ja(a!ja(h!ja(i!ja~O^!ja'k!ja'i!ja!S!ja!g!jao!ja!X!ja%a!ja!a!ja~PJrO!g(WO~O|%wO!X%xO!x]O#b(ZO#c(YO't%fO~O!a#sO#X([O(a'fO!V(cX^(cX'k(cX~O!g(cX~PMvO!V(_O!g(bX~O!g(aO~O|%wO!X%xO#c(YO't%fO~Oy(bOz(cO!f#uO!h#vO!x!wa|!wa~O!t!wa%`!wa!X!wa#b!wa#c!wa't!wa~P! OO!t(gO~OPYOQYOa!gOb!fOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!XXO!csO!hZO!kYO!lYO!mYO!otO!quO!t!eO$Q!hO$UfO't!bO'vTO'yUO(RVO(`[O(miO~Oi%QOk$rOl$qOm$qOs%ROu%SOw<qO|$yO!X$zO!c={O!h$vO#c<wO$Q%WO$m<sO$o<uO$r%XO't(kO'vTO'yUO'}%PO(R$sO~O#d(mO~Oi%QOk$rOl$qOm$qOs%ROu%SOw%TO|$yO!X$zO!c%YO!h$vO#c%ZO$Q%WO$m%UO$o%VO$r%XO't(kO'vTO'yUO'}%PO(R$sO~Od([P~P!%lO!U(qO!g(]P~P%QO(U(sO(`[O~O|(uO!h#vO(U(sO(`[O~OP<WOQ<WOa=wOb!fOikOk<WOlkOmkOskOu<WOw<WO|WO!QkO!RkO!X!cO!c<ZO!hZO!k<WO!l<WO!m<WO!o<[O!q<]O!t!eO$Q!hO$UfO't)TO'vTO'yUO(RVO(`[O(m=uO~Oz)WO!h#vO~O!V$_O^$ka'k$ka'i$ka!g$ka!S$ka!X$ka%a$ka!a$ka~O#p)[O~P!$SOy)_O!a)^O!X$XX$T$XX$W$XX$Y$XX$a$XX~O!a)^O!X(jX$T(jX$W(jX$Y(jX$a(jX~Oy)_O~P!+bOy)_O!X(jX$T(jX$W(jX$Y(jX$a(jX~O!X)aO$T)eO$W)`O$Y)`O$a)fO~O!U)iO~P!'xO$W$eO$Y$dO$a)mO~Og$sXy$sX|$sX!f$sX(h$sX(i$sX~OdfXd$sXgfX!VfX#XfX~P!-WOl)oO~Oq)pO(S)qO(T)sO~Og)|Oy)uO|)vO(h)xO(i)zO~Od)tO~P!.aOd)}O~Oi%QOk$rOl$qOm$qOs%ROu%SOw<qO|$yO!X$zO!c={O!h$vO#c<wO$Q%WO$m<sO$o<uO$r%XO'vTO'yUO'}%PO(R$sO~O!U*RO't*OO!g(nP~P!/OO#d*TO~O!h*UO~O!U*ZO't*WO!S(oP~P!/OOk*gO|*_O![*eO!]*^O!^*^O!h*UO#T*fO%W*aO'u!iO(U!jO~O!W*dO~P!1UO!f#uOg(QXy(QX|(QX(h(QX(i(QX!V(QX#X(QX~Od(QX#y(QX~P!1}Og*jO#X*iOd(PX!V(PX~O!V*kOd(OX~O't%}Od(OP~O!h*rO~O't(kO~O|%wO!U#gO!X%xO!x]O#b#jO#c#gO't%fO!g(bP~O!a#sO#d*vO~OP$ZOX$bOk$OOy#wOz#xO|#yO!e$QO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O#k$PO#l$QO#m$QO#n$aO#o$QO#q$RO#s$TO#u$VO#v$WO(RVO(a$XO(h#zO(i#{O~O^!ba!V!ba'k!ba'i!ba!S!ba!g!bao!ba!X!ba%a!ba!a!ba~P!4aOy#wOz#xO|#yO!f#uO!h#vO(RVOP!naX!nak!na!V!na!e!na!l!na#g!na#h!na#i!na#j!na#k!na#l!na#m!na#n!na#o!na#q!na#s!na#u!na#v!na(a!na(h!na(i!na~O^!na'k!na'i!na!S!na!g!nao!na!X!na%a!na!a!na~P!6zOy#wOz#xO|#yO!f#uO!h#vO(RVOP!paX!pak!pa!V!pa!e!pa!l!pa#g!pa#h!pa#i!pa#j!pa#k!pa#l!pa#m!pa#n!pa#o!pa#q!pa#s!pa#u!pa#v!pa(a!pa(h!pa(i!pa~O^!pa'k!pa'i!pa!S!pa!g!pao!pa!X!pa%a!pa!a!pa~P!9eOg+OO!X'RO%a*}O'}%PO~O!a+QO^'|X!X'|X'k'|X!V'|X~O^%_O!XXO'k%_O~O!h%[O'}%PO~O!h%[O't%fO'}%PO~O!a#sO#d(mO~O%b+^O't+YO'vTO'yUO!W(vP~O!V+_O](uX~O(U(sO~OX+cO~O]+dO~O!X%oO't%fO'u!iO](uP~O|%wO!U+hO!V(RO!X%xO't%fO!S(eP~Ol&}O|+jO!U+iO'vTO'yUO(U(sO~O!W(gP~P!?TO!V+kO^(rX'k(rX~O#X+oO'}%PO~Og+rO!X$zO'}%PO~O!X+tO~Oy+vO!XXO~O!t+{O~Ob,QO~O't#kO!W(tP~Ob%mO~O%b!OO't%}O~P<eOX,WO],VO~OPYOQYOaxObwOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!csO!hZO!kYO!lYO!mYO!otO!quO!tvO!x]O$UfO%`{O'vTO'yUO(RVO(`[O(miO~O!X!cO$Q!hO't!bO~P!AhO],VO^%_O'k%_O~O^,[O#p,^O%d,^O%e,^O~P%QO!h&bO~O&T,cO~O!X,eO~O&f,gO&h,hOP&caQ&caV&ca^&caa&cab&cai&cak&cal&cam&cas&cau&caw&ca|&ca!Q&ca!R&ca!X&ca!c&ca!h&ca!k&ca!l&ca!m&ca!o&ca!q&ca!t&ca!x&ca#p&ca$Q&ca$U&ca%`&ca%b&ca%d&ca%e&ca%h&ca%j&ca%m&ca%n&ca%p&ca%}&ca&T&ca&V&ca&X&ca&Z&ca&^&ca&d&ca&j&ca&l&ca&n&ca&p&ca&r&ca'i&ca't&ca'v&ca'y&ca(R&ca(`&ca(m&ca!W&ca&[&ca_&ca&a&ca~O't,mO~O!V{X!V!_X!W{X!W!_X!a{X!a!_X!h!_X#X{X'}!_X~O!a,rO#X,qO!V#aX!V(ZX!W#aX!W(ZX!a(ZX!h(ZX'}(ZX~O!a,tO!h%[O'}%PO!V!ZX!W!ZX~Ol!kO|!lO'vTO'yUO(U!jO~OP<WOQ<WOa=wOb!fOikOk<WOlkOmkOskOu<WOw<WO|WO!QkO!RkO!X!cO!c<ZO!hZO!k<WO!l<WO!m<WO!o<[O!q<]O!t!eO$Q!hO$UfO'vTO'yUO(RVO(`[O(m=uO~O't<|O~P!J}O!V,xO!W(YX~O!W,zO~O!a,rO#X,qO!V#aX!W#aX~O!V,{O!W(gX~O!W,}O~O!]-OO!^-OO'u!iO~P!JlO!W-RO~P'TOg-UO!X'RO~O!S-ZO~Ol!wa![!wa!]!wa!^!wa!|!wa!}!wa#O!wa#P!wa#Q!wa#T!wa#U!wa'u!wa'v!wa'y!wa(U!wa(`!wa~P! OO^%_O!a#sO!h%[O!l-`O#X-^O'k%_O'}%PO(a'fO~O!]-bO!^-bO'u!iO~PBzO![-dO!]-bO!^-bO#T-eO#U-eO'u!iO~PBzO![-dO!]-bO!^-bO#Q-fO#T-eO#U-eO'u!iO~PBzO![-dO!]-bO!^-bO#O-gO#P-gO#Q-fO#T-eO#U-eO'u!iO~PBzO![-dO!]-bO!^-bO!}-hO#O-gO#P-gO#Q-fO#T-eO#U-eO'u!iO~PBzO^%_O#X-^O'k%_O~O^%_O!a#sO#X-^O'k%_O~O^%_O!a#sO!l-`O#X-^O'k%_O(a'fO~O'p'nO'q'nO'r-mO~Oo-nO~O!S&}a!V&}a~P!4aO!U-rO!S&}X!V&}X~P%QO!V'zO!S(Xa~O!S(Xa~PGUO!V(RO!S(ea~O|%wO!U-vO!X%xO't%fO!S'TX!V'TX~O!V(_O!g(ba~O|%wO!X%xO#c-yO't%fO~O#X-{O!V(ca!g(ca^(ca'k(ca~O!a#sO~P#(aO|%wO!U.OO!X%xO!x]O#b.QO#c.OO't%fO!V'VX!g'VX~Oz.UO!h#vO~Og.XO!X'RO%a.WO'}%PO~O^#[i!V#[i'k#[i'i#[i!S#[i!g#[io#[i!X#[i%a#[i!a#[i~P!4aOg>ROy)uO|)vO(h)xO(i)zO~O#d#Wa^#Wa#X#Wa'k#Wa!V#Wa!g#Wa!X#Wa!S#Wa~P#*rO#d(QXP(QXX(QX^(QXk(QXz(QX!e(QX!h(QX!l(QX#g(QX#h(QX#i(QX#j(QX#k(QX#l(QX#m(QX#n(QX#o(QX#q(QX#s(QX#u(QX#v(QX'k(QX(R(QX(a(QX!g(QX!S(QX'i(QXo(QX!X(QX%a(QX!a(QX~P!1}O!V.bOd([X~P!.aOd.dO~O!V.eO!g(]X~P!4aO!g.hO~O!S.jO~OP$ZOy#wOz#xO|#yO!f#uO!h#vO!l$ZO(RVOX#fi^#fik#fi!V#fi!e#fi#h#fi#i#fi#j#fi#k#fi#l#fi#m#fi#n#fi#o#fi#q#fi#s#fi#u#fi#v#fi'k#fi(a#fi(h#fi(i#fi'i#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~O#g#fi~P#.nO#g#|O~P#.nOP$ZOy#wOz#xO|#yO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O(RVOX#fi^#fi!V#fi!e#fi#k#fi#l#fi#m#fi#n#fi#o#fi#q#fi#s#fi#u#fi#v#fi'k#fi(a#fi(h#fi(i#fi'i#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~Ok#fi~P#1`Ok$OO~P#1`OP$ZOk$OOy#wOz#xO|#yO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O#k$PO(RVO^#fi!V#fi#q#fi#s#fi#u#fi#v#fi'k#fi(a#fi(h#fi(i#fi'i#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~OX#fi!e#fi#l#fi#m#fi#n#fi#o#fi~P#4QOX$bO!e$QO#l$QO#m$QO#n$aO#o$QO~P#4QOP$ZOX$bOk$OOy#wOz#xO|#yO!e$QO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O#k$PO#l$QO#m$QO#n$aO#o$QO#q$RO(RVO^#fi!V#fi#s#fi#u#fi#v#fi'k#fi(a#fi(i#fi'i#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~O(h#fi~P#7RO(h#zO~P#7ROP$ZOX$bOk$OOy#wOz#xO|#yO!e$QO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O#k$PO#l$QO#m$QO#n$aO#o$QO#q$RO#s$TO(RVO(h#zO^#fi!V#fi#u#fi#v#fi'k#fi(a#fi'i#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~O(i#fi~P#9sO(i#{O~P#9sOP$ZOX$bOk$OOy#wOz#xO|#yO!e$QO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O#k$PO#l$QO#m$QO#n$aO#o$QO#q$RO#s$TO#u$VO(RVO(h#zO(i#{O~O^#fi!V#fi#v#fi'k#fi(a#fi'i#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~P#<eOPYXXYXkYXyYXzYX|YX!eYX!fYX!hYX!lYX#XYX#dcX#gYX#hYX#iYX#jYX#kYX#lYX#mYX#nYX#oYX#qYX#sYX#uYX#vYX#{YX(RYX(aYX(hYX(iYX!VYX!WYX~O#yYX~P#?OOP$ZOX<oOk<cOy#wOz#xO|#yO!e<eO!f#uO!h#vO!l$ZO#g<aO#h<bO#i<bO#j<bO#k<dO#l<eO#m<eO#n<nO#o<eO#q<fO#s<hO#u<jO#v<kO(RVO(a$XO(h#zO(i#{O~O#y.lO~P#A]OP(WXX(WXk(WXy(WXz(WX|(WX!e(WX!f(WX!h(WX!l(WX#g(WX#h(WX#i(WX#j(WX#k(WX#l(WX#m(WX#n(WX#q(WX#s(WX#u(WX#v(WX(R(WX(a(WX(h(WX(i(WX!V(WX~O#X<pO#{<pO#o(WX#y(WX!W(WX~P#CZO^'Ya!V'Ya'k'Ya'i'Ya!g'Ya!S'Yao'Ya!X'Ya%a'Ya!a'Ya~P!4aOP#fiX#fi^#fik#fiz#fi!V#fi!e#fi!f#fi!h#fi!l#fi#g#fi#h#fi#i#fi#j#fi#k#fi#l#fi#m#fi#n#fi#o#fi#q#fi#s#fi#u#fi#v#fi'k#fi(R#fi(a#fi'i#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~P#*rO^#zi!V#zi'k#zi'i#zi!S#zi!g#zio#zi!X#zi%a#zi!a#zi~P!4aO$W.qO$Y.qO~O$W.rO$Y.rO~O!a)^O#X.sO!X$^X$T$^X$W$^X$Y$^X$a$^X~O!U.tO~O!X)aO$T.vO$W)`O$Y)`O$a.wO~O!V<lO!W(VX~P#A]O!W.xO~O!a)^O$a(jX~O$a.zO~Oq)pO(S)qO(T.}O~Ol/QO!S/RO'vTO'yUO~O!VcX!acX!gcX!g$sX(acX~P!-WO!g/XO~P#*rO!V/YO!a#sO(a'fO!g(nX~O!g/_O~O!U*RO't%fO!g(nP~O#d/aO~O!S$sX!V$sX!a$zX~P!-WO!V/bO!S(oX~P#*rO!a/dO~O!S/fO~Ok/jO!a#sO!h%[O'}%PO(a'fO~O't/lO~O!a+QO~O^%_O!V/pO'k%_O~O!W/rO~P!1UO!]/sO!^/sO'u!iO(U!jO~O|/uO(U!jO~O#T/vO~O't%}Od'_X!V'_X~O!V*kOd(Oa~Od/{O~Oy/|Oz/|O|/}Ogva(hva(iva!Vva#Xva~Odva#yva~P$ tOy)uO|)vOg$la(h$la(i$la!V$la#X$la~Od$la#y$la~P$!jOy)uO|)vOg$na(h$na(i$na!V$na#X$na~Od$na#y$na~P$#]O#d0PO~Od$|a!V$|a#X$|a#y$|a~P!.aO#d0SO~Oy#wOz#xO|#yO!f#uO!h#vO(RVOP!niX!nik!ni!V!ni!e!ni!l!ni#g!ni#h!ni#i!ni#j!ni#k!ni#l!ni#m!ni#n!ni#o!ni#q!ni#s!ni#u!ni#v!ni(a!ni(h!ni(i!ni~O^!ni'k!ni'i!ni!S!ni!g!nio!ni!X!ni%a!ni!a!ni~P$$jOg.XO!X'RO%a.WO~Oi0ZO't0YO~P!/RO!a+QO^'|a!X'|a'k'|a!V'|a~O#d0aO~OXYX!VcX!WcX~O!V0bO!W(vX~O!W0dO~OX0eO~O't+YO'vTO'yUO~O!X%oO't%fO]'gX!V'gX~O!V+_O](ua~O!g0jO~P!4aOX0mO~O]0nO~O!V+kO^(ra'k(ra~O#X0tO~Og0wO!X$zO~O(U(sO!W(sP~Og1QO!X0}O%a1PO'}%PO~OX1[O!V1YO!W(tX~O!W1]O~O]1_O^%_O'k%_O~O't#kO'vTO'yUO~O#X$cO#o1bO#{$cO&R1cO^(WX~P#CZO#X$cO#o1bO&R1cO~O^1dO~P%QO^1fO~O&[1jOP&YiQ&YiV&Yi^&Yia&Yib&Yii&Yik&Yil&Yim&Yis&Yiu&Yiw&Yi|&Yi!Q&Yi!R&Yi!X&Yi!c&Yi!h&Yi!k&Yi!l&Yi!m&Yi!o&Yi!q&Yi!t&Yi!x&Yi#p&Yi$Q&Yi$U&Yi%`&Yi%b&Yi%d&Yi%e&Yi%h&Yi%j&Yi%m&Yi%n&Yi%p&Yi%}&Yi&T&Yi&V&Yi&X&Yi&Z&Yi&^&Yi&d&Yi&j&Yi&l&Yi&n&Yi&p&Yi&r&Yi'i&Yi't&Yi'v&Yi'y&Yi(R&Yi(`&Yi(m&Yi!W&Yi_&Yi&a&Yi~O_1pO!W1nO&a1oO~P`O!XXO!h1rO~O&h,hOP&ciQ&ciV&ci^&cia&cib&cii&cik&cil&cim&cis&ciu&ciw&ci|&ci!Q&ci!R&ci!X&ci!c&ci!h&ci!k&ci!l&ci!m&ci!o&ci!q&ci!t&ci!x&ci#p&ci$Q&ci$U&ci%`&ci%b&ci%d&ci%e&ci%h&ci%j&ci%m&ci%n&ci%p&ci%}&ci&T&ci&V&ci&X&ci&Z&ci&^&ci&d&ci&j&ci&l&ci&n&ci&p&ci&r&ci'i&ci't&ci'v&ci'y&ci(R&ci(`&ci(m&ci!W&ci&[&ci_&ci&a&ci~O!S1xO~O!V!Za!W!Za~P#A]Ol!kO|!lO!U2OO(U!jO!V'OX!W'OX~P?fO!V,xO!W(Ya~O!V'UX!W'UX~P!?TO!V,{O!W(ga~O!W2VO~P'TO^%_O#X2`O'k%_O~O^%_O!a#sO#X2`O'k%_O~O^%_O!a#sO!h%[O!l2dO#X2`O'k%_O'}%PO(a'fO~O!]2eO!^2eO'u!iO~PBzO![2hO!]2eO!^2eO#T2iO#U2iO'u!iO~PBzO![2hO!]2eO!^2eO#Q2jO#T2iO#U2iO'u!iO~PBzO![2hO!]2eO!^2eO#O2kO#P2kO#Q2jO#T2iO#U2iO'u!iO~PBzO^%_O!a#sO!l2dO#X2`O'k%_O(a'fO~O^%_O'k%_O~P!4aO!V$_Oo$ka~O!S&}i!V&}i~P!4aO!V'zO!S(Xi~O!V(RO!S(ei~O!S(fi!V(fi~P!4aO!V(_O!g(bi~O!V(ci!g(ci^(ci'k(ci~P!4aO#X2oO!V(ci!g(ci^(ci'k(ci~O|%wO!X%xO!x]O#b2rO#c2qO't%fO~O|%wO!X%xO#c2qO't%fO~Og2yO!X'RO%a2xO~Og2yO!X'RO%a2xO'}%PO~O#dvaPvaXva^vakva!eva!fva!hva!lva#gva#hva#iva#jva#kva#lva#mva#nva#ova#qva#sva#uva#vva'kva(Rva(ava!gva!Sva'ivaova!Xva%ava!ava~P$ tO#d$laP$laX$la^$lak$laz$la!e$la!f$la!h$la!l$la#g$la#h$la#i$la#j$la#k$la#l$la#m$la#n$la#o$la#q$la#s$la#u$la#v$la'k$la(R$la(a$la!g$la!S$la'i$lao$la!X$la%a$la!a$la~P$!jO#d$naP$naX$na^$nak$naz$na!e$na!f$na!h$na!l$na#g$na#h$na#i$na#j$na#k$na#l$na#m$na#n$na#o$na#q$na#s$na#u$na#v$na'k$na(R$na(a$na!g$na!S$na'i$nao$na!X$na%a$na!a$na~P$#]O#d$|aP$|aX$|a^$|ak$|az$|a!V$|a!e$|a!f$|a!h$|a!l$|a#g$|a#h$|a#i$|a#j$|a#k$|a#l$|a#m$|a#n$|a#o$|a#q$|a#s$|a#u$|a#v$|a'k$|a(R$|a(a$|a!g$|a!S$|a'i$|a#X$|ao$|a!X$|a%a$|a!a$|a~P#*rO^#[q!V#[q'k#[q'i#[q!S#[q!g#[qo#[q!X#[q%a#[q!a#[q~P!4aOd'PX!V'PX~P!%lO!V.bOd([a~O!U3RO!V'QX!g'QX~P%QO!V.eO!g(]a~O!V.eO!g(]a~P!4aO!S3UO~O#y!ja!W!ja~PJrO#y!ba!V!ba!W!ba~P#A]O#y!na!W!na~P!6zO#y!pa!W!pa~P!9eO!X3hO$UfO$_3iO~O!W3mO~Oo3nO~P#*rO^$hq!V$hq'k$hq'i$hq!S$hq!g$hqo$hq!X$hq%a$hq!a$hq~P!4aO!S3oO~Ol/QO'vTO'yUO~Oy)uO|)vO(i)zOg%Xi(h%Xi!V%Xi#X%Xi~Od%Xi#y%Xi~P$JzOy)uO|)vOg%Zi(h%Zi(i%Zi!V%Zi#X%Zi~Od%Zi#y%Zi~P$KmO(a$XO~P#*rO!U3rO't%fO!V'ZX!g'ZX~O!V/YO!g(na~O!V/YO!a#sO!g(na~O!V/YO!a#sO(a'fO!g(na~Od$ui!V$ui#X$ui#y$ui~P!.aO!U3zO't*WO!S']X!V']X~P!/OO!V/bO!S(oa~O!V/bO!S(oa~P#*rO!a#sO~O!a#sO#o4SO~Ok4VO!a#sO(a'fO~Od(Pi!V(Pi~P!.aO#X4YOd(Pi!V(Pi~P!.aO!g4]O~O^$iq!V$iq'k$iq'i$iq!S$iq!g$iqo$iq!X$iq%a$iq!a$iq~P!4aO!V4aO!X(pX~P#*rO!f#uO~P3}O^$sX!X$sX%UYX'k$sX!V$sX~P!-WO%U4cO^hXghXyhX|hX!XhX'khX(hhX(ihX!VhX~O%U4cO~O%b4jO't+YO'vTO'yUO!V'fX!W'fX~O!V0bO!W(va~OX4nO~O]4oO~O!S4sO~O^%_O'k%_O~P#*rO!X$zO~P#*rO!V4xO#X4zO!W(sX~O!W4{O~Ol!kO|4}O![5]O!]5RO!^5RO!x<XO!|5[O!}5ZO#O5YO#P5YO#Q5XO#T5WO#U!xO'u!iO'vTO'yUO(U!jO(`!nO~O!W5VO~P%%qOg5bO!X0}O%a5aO~Og5bO!X0}O%a5aO'}%PO~O't#kO!V'eX!W'eX~O!V1YO!W(ta~O'vTO'yUO(U5kO~O]5oO~O!g5rO~P%QO^5tO~O^5tO~P%QO#o5vO&R5wO~PMvO_1pO!W5{O&a1oO~P`O!a5}O~O!a6PO!V(Zi!W(Zi!a(Zi!h(Zi'}(Zi~O!V#ai!W#ai~P#A]O#X6QO!V#ai!W#ai~O!V!Zi!W!Zi~P#A]O^%_O#X6ZO'k%_O~O^%_O!a#sO#X6ZO'k%_O~O^%_O!a#sO!l6`O#X6ZO'k%_O(a'fO~O!h%[O'}%PO~P%+RO!]6aO!^6aO'u!iO~PBzO![6dO!]6aO!^6aO#T6eO#U6eO'u!iO~PBzO![6dO!]6aO!^6aO#Q6fO#T6eO#U6eO'u!iO~PBzO!V(_O!g(bq~O!V(cq!g(cq^(cq'k(cq~P!4aO|%wO!X%xO#c6jO't%fO~O!X'RO%a6mO~Og6pO!X'RO%a6mO~O#d%XiP%XiX%Xi^%Xik%Xiz%Xi!e%Xi!f%Xi!h%Xi!l%Xi#g%Xi#h%Xi#i%Xi#j%Xi#k%Xi#l%Xi#m%Xi#n%Xi#o%Xi#q%Xi#s%Xi#u%Xi#v%Xi'k%Xi(R%Xi(a%Xi!g%Xi!S%Xi'i%Xio%Xi!X%Xi%a%Xi!a%Xi~P$JzO#d%ZiP%ZiX%Zi^%Zik%Ziz%Zi!e%Zi!f%Zi!h%Zi!l%Zi#g%Zi#h%Zi#i%Zi#j%Zi#k%Zi#l%Zi#m%Zi#n%Zi#o%Zi#q%Zi#s%Zi#u%Zi#v%Zi'k%Zi(R%Zi(a%Zi!g%Zi!S%Zi'i%Zio%Zi!X%Zi%a%Zi!a%Zi~P$KmO#d$uiP$uiX$ui^$uik$uiz$ui!V$ui!e$ui!f$ui!h$ui!l$ui#g$ui#h$ui#i$ui#j$ui#k$ui#l$ui#m$ui#n$ui#o$ui#q$ui#s$ui#u$ui#v$ui'k$ui(R$ui(a$ui!g$ui!S$ui'i$ui#X$uio$ui!X$ui%a$ui!a$ui~P#*rOd'Pa!V'Pa~P!.aO!V'Qa!g'Qa~P!4aO!V.eO!g(]i~O#y#[i!V#[i!W#[i~P#A]OP$ZOy#wOz#xO|#yO!f#uO!h#vO!l$ZO(RVOX#fik#fi!e#fi#h#fi#i#fi#j#fi#k#fi#l#fi#m#fi#n#fi#o#fi#q#fi#s#fi#u#fi#v#fi#y#fi(a#fi(h#fi(i#fi!V#fi!W#fi~O#g#fi~P%6OO#g<aO~P%6OOP$ZOy#wOz#xO|#yO!f#uO!h#vO!l$ZO#g<aO#h<bO#i<bO#j<bO(RVOX#fi!e#fi#k#fi#l#fi#m#fi#n#fi#o#fi#q#fi#s#fi#u#fi#v#fi#y#fi(a#fi(h#fi(i#fi!V#fi!W#fi~Ok#fi~P%8ZOk<cO~P%8ZOP$ZOk<cOy#wOz#xO|#yO!f#uO!h#vO!l$ZO#g<aO#h<bO#i<bO#j<bO#k<dO(RVO#q#fi#s#fi#u#fi#v#fi#y#fi(a#fi(h#fi(i#fi!V#fi!W#fi~OX#fi!e#fi#l#fi#m#fi#n#fi#o#fi~P%:fOX<oO!e<eO#l<eO#m<eO#n<nO#o<eO~P%:fOP$ZOX<oOk<cOy#wOz#xO|#yO!e<eO!f#uO!h#vO!l$ZO#g<aO#h<bO#i<bO#j<bO#k<dO#l<eO#m<eO#n<nO#o<eO#q<fO(RVO#s#fi#u#fi#v#fi#y#fi(a#fi(i#fi!V#fi!W#fi~O(h#fi~P%=QO(h#zO~P%=QOP$ZOX<oOk<cOy#wOz#xO|#yO!e<eO!f#uO!h#vO!l$ZO#g<aO#h<bO#i<bO#j<bO#k<dO#l<eO#m<eO#n<nO#o<eO#q<fO#s<hO(RVO(h#zO#u#fi#v#fi#y#fi(a#fi!V#fi!W#fi~O(i#fi~P%?]O(i#{O~P%?]OP$ZOX<oOk<cOy#wOz#xO|#yO!e<eO!f#uO!h#vO!l$ZO#g<aO#h<bO#i<bO#j<bO#k<dO#l<eO#m<eO#n<nO#o<eO#q<fO#s<hO#u<jO(RVO(h#zO(i#{O~O#v#fi#y#fi(a#fi!V#fi!W#fi~P%AhO^#wy!V#wy'k#wy'i#wy!S#wy!g#wyo#wy!X#wy%a#wy!a#wy~P!4aOg>SOy)uO|)vO(h)xO(i)zO~OP#fiX#fik#fiz#fi!e#fi!f#fi!h#fi!l#fi#g#fi#h#fi#i#fi#j#fi#k#fi#l#fi#m#fi#n#fi#o#fi#q#fi#s#fi#u#fi#v#fi#y#fi(R#fi(a#fi!V#fi!W#fi~P%D`O!f#uOP(QXX(QXg(QXk(QXy(QXz(QX|(QX!e(QX!h(QX!l(QX#g(QX#h(QX#i(QX#j(QX#k(QX#l(QX#m(QX#n(QX#o(QX#q(QX#s(QX#u(QX#v(QX#y(QX(R(QX(a(QX(h(QX(i(QX!V(QX!W(QX~O#y#zi!V#zi!W#zi~P#A]O#y!ni!W!ni~P$$jO!W6|O~O!V'Ya!W'Ya~P#A]O!a#sO(a'fO!V'Za!g'Za~O!V/YO!g(ni~O!V/YO!a#sO!g(ni~Od$uq!V$uq#X$uq#y$uq~P!.aO!S']a!V']a~P#*rO!a7TO~O!V/bO!S(oi~P#*rO!V/bO!S(oi~O!S7XO~O!a#sO#o7^O~Ok7_O!a#sO(a'fO~O!S7aO~Od$wq!V$wq#X$wq#y$wq~P!.aO^$iy!V$iy'k$iy'i$iy!S$iy!g$iyo$iy!X$iy%a$iy!a$iy~P!4aO!V4aO!X(pa~O^#[y!V#[y'k#[y'i#[y!S#[y!g#[yo#[y!X#[y%a#[y!a#[y~P!4aOX7fO~O!V0bO!W(vi~O]7lO~O!a6PO~O(U(sO!V'bX!W'bX~O!V4xO!W(sa~O!h%[O'}%PO^(ZX!a(ZX!l(ZX#X(ZX'k(ZX(a(ZX~O't7uO~P._O!x<XO!|7yO!}7xO#O7wO#P7wO#Q7vO#T'dO#U'dO~PBzO^%_O!a#sO!l'jO#X'hO'k%_O(a'fO~O!W7}O~P%%qOl!kO'vTO'yUO(U!jO(`!nO~O|8OO~P&!mO![8SO!]8RO!^8RO#Q7vO#T'dO#U'dO'u!iO~PBzO![8SO!]8RO!^8RO#O8TO#P8TO#Q7vO#T'dO#U'dO'u!iO~PBzO!]8RO!^8RO'u!iO(U!jO(`!nO~O!X0}O~O!X0}O%a8VO~Og8YO!X0}O%a8VO~OX8_O!V'ea!W'ea~O!V1YO!W(ti~O!g8cO~O!g8dO~O!g8eO~O!g8eO~P%QO^8gO~O!a8jO~O!g8kO~O!V(fi!W(fi~P#A]O^%_O#X8sO'k%_O~O^%_O!a#sO#X8sO'k%_O~O^%_O!a#sO!l8wO#X8sO'k%_O(a'fO~O!h%[O'}%PO~P&'ZO!]8xO!^8xO'u!iO~PBzO![8{O!]8xO!^8xO#T8|O#U8|O'u!iO~PBzO!V(_O!g(by~O!V(cy!g(cy^(cy'k(cy~P!4aO!X'RO%a9PO~O#d$uqP$uqX$uq^$uqk$uqz$uq!V$uq!e$uq!f$uq!h$uq!l$uq#g$uq#h$uq#i$uq#j$uq#k$uq#l$uq#m$uq#n$uq#o$uq#q$uq#s$uq#u$uq#v$uq'k$uq(R$uq(a$uq!g$uq!S$uq'i$uq#X$uqo$uq!X$uq%a$uq!a$uq~P#*rO#d$wqP$wqX$wq^$wqk$wqz$wq!V$wq!e$wq!f$wq!h$wq!l$wq#g$wq#h$wq#i$wq#j$wq#k$wq#l$wq#m$wq#n$wq#o$wq#q$wq#s$wq#u$wq#v$wq'k$wq(R$wq(a$wq!g$wq!S$wq'i$wq#X$wqo$wq!X$wq%a$wq!a$wq~P#*rO!V'Qi!g'Qi~P!4aO#y#[q!V#[q!W#[q~P#A]Oy/|Oz/|O|/}OPvaXvagvakva!eva!fva!hva!lva#gva#hva#iva#jva#kva#lva#mva#nva#ova#qva#sva#uva#vva#yva(Rva(ava(hva(iva!Vva!Wva~Oy)uO|)vOP$laX$lag$lak$laz$la!e$la!f$la!h$la!l$la#g$la#h$la#i$la#j$la#k$la#l$la#m$la#n$la#o$la#q$la#s$la#u$la#v$la#y$la(R$la(a$la(h$la(i$la!V$la!W$la~Oy)uO|)vOP$naX$nag$nak$naz$na!e$na!f$na!h$na!l$na#g$na#h$na#i$na#j$na#k$na#l$na#m$na#n$na#o$na#q$na#s$na#u$na#v$na#y$na(R$na(a$na(h$na(i$na!V$na!W$na~OP$|aX$|ak$|az$|a!e$|a!f$|a!h$|a!l$|a#g$|a#h$|a#i$|a#j$|a#k$|a#l$|a#m$|a#n$|a#o$|a#q$|a#s$|a#u$|a#v$|a#y$|a(R$|a(a$|a!V$|a!W$|a~P%D`O#y$hq!V$hq!W$hq~P#A]O#y$iq!V$iq!W$iq~P#A]O!W9ZO~O#y9[O~P!.aO!a#sO!V'Zi!g'Zi~O!a#sO(a'fO!V'Zi!g'Zi~O!V/YO!g(nq~O!S']i!V']i~P#*rO!V/bO!S(oq~O!S9bO~P#*rO!S9bO~Od(Py!V(Py~P!.aO!V'`a!X'`a~P#*rO^%Tq!X%Tq'k%Tq!V%Tq~P#*rOX9gO~O!V0bO!W(vq~O#X9kO!V'ba!W'ba~O!V4xO!W(si~P#A]O^%_O!a+QO'k%_O~OPYXXYXkYXyYXzYX|YX!SYX!VYX!eYX!fYX!hYX!lYX#XYX#dcX#gYX#hYX#iYX#jYX#kYX#lYX#mYX#nYX#oYX#qYX#sYX#uYX#vYX#{YX(RYX(aYX(hYX(iYX~O!a%RX#o%RX~P&:hO#T-eO#U-eO~PBzO#Q9pO#T-eO#U-eO~PBzO#O9qO#P9qO#Q9pO#T-eO#U-eO~PBzO!}9rO#O9qO#P9qO#Q9pO#T-eO#U-eO~PBzO!]9uO!^9uO'u!iO(U!jO(`!nO~O![9xO!]9uO!^9uO#Q9pO#T-eO#U-eO'u!iO~PBzO!X0}O%a9{O~O'vTO'yUO(U:QO~O!V1YO!W(tq~O!g:TO~O!g:TO~P%QO!g:VO~O!g:WO~O#X:YO!V#ay!W#ay~O!V#ay!W#ay~P#A]O^%_O#X:^O'k%_O~O^%_O!a#sO#X:^O'k%_O~O^%_O!a#sO!l:bO#X:^O'k%_O(a'fO~O!h%[O'}%PO~P&AZO!]:cO!^:cO'u!iO~PBzO!X'RO%a:gO~O#y#wy!V#wy!W#wy~P#A]OP$uiX$uik$uiz$ui!e$ui!f$ui!h$ui!l$ui#g$ui#h$ui#i$ui#j$ui#k$ui#l$ui#m$ui#n$ui#o$ui#q$ui#s$ui#u$ui#v$ui#y$ui(R$ui(a$ui!V$ui!W$ui~P%D`Oy)uO|)vO(i)zOP%XiX%Xig%Xik%Xiz%Xi!e%Xi!f%Xi!h%Xi!l%Xi#g%Xi#h%Xi#i%Xi#j%Xi#k%Xi#l%Xi#m%Xi#n%Xi#o%Xi#q%Xi#s%Xi#u%Xi#v%Xi#y%Xi(R%Xi(a%Xi(h%Xi!V%Xi!W%Xi~Oy)uO|)vOP%ZiX%Zig%Zik%Ziz%Zi!e%Zi!f%Zi!h%Zi!l%Zi#g%Zi#h%Zi#i%Zi#j%Zi#k%Zi#l%Zi#m%Zi#n%Zi#o%Zi#q%Zi#s%Zi#u%Zi#v%Zi#y%Zi(R%Zi(a%Zi(h%Zi(i%Zi!V%Zi!W%Zi~O#y$iy!V$iy!W$iy~P#A]O#y#[y!V#[y!W#[y~P#A]O!a#sO!V'Zq!g'Zq~O!V/YO!g(ny~O!S']q!V']q~P#*rO!S:nO~P#*rO!V0bO!W(vy~O!V4xO!W(sq~O#T2iO#U2iO~PBzO#Q:uO#T2iO#U2iO~PBzO#O:vO#P:vO#Q:uO#T2iO#U2iO~PBzO!]:zO!^:zO'u!iO(U!jO(`!nO~O!X0}O%a:}O~O!g;QO~O^%_O#X;VO'k%_O~O^%_O!a#sO#X;VO'k%_O~O^%_O!a#sO!l;ZO#X;VO'k%_O(a'fO~O!X'RO%a;^O~OP$uqX$uqk$uqz$uq!e$uq!f$uq!h$uq!l$uq#g$uq#h$uq#i$uq#j$uq#k$uq#l$uq#m$uq#n$uq#o$uq#q$uq#s$uq#u$uq#v$uq#y$uq(R$uq(a$uq!V$uq!W$uq~P%D`OP$wqX$wqk$wqz$wq!e$wq!f$wq!h$wq!l$wq#g$wq#h$wq#i$wq#j$wq#k$wq#l$wq#m$wq#n$wq#o$wq#q$wq#s$wq#u$wq#v$wq#y$wq(R$wq(a$wq!V$wq!W$wq~P%D`Od%]!Z!V%]!Z#X%]!Z#y%]!Z~P!.aO!V'bq!W'bq~P#A]O#T6eO#U6eO~PBzO#Q;bO#T6eO#U6eO~PBzO!V#a!Z!W#a!Z~P#A]O^%_O#X;mO'k%_O~O^%_O!a#sO#X;mO'k%_O~O#d%]!ZP%]!ZX%]!Z^%]!Zk%]!Zz%]!Z!V%]!Z!e%]!Z!f%]!Z!h%]!Z!l%]!Z#g%]!Z#h%]!Z#i%]!Z#j%]!Z#k%]!Z#l%]!Z#m%]!Z#n%]!Z#o%]!Z#q%]!Z#s%]!Z#u%]!Z#v%]!Z'k%]!Z(R%]!Z(a%]!Z!g%]!Z!S%]!Z'i%]!Z#X%]!Zo%]!Z!X%]!Z%a%]!Z!a%]!Z~P#*rO#T8|O#U8|O~PBzO^%_O#X;zO'k%_O~OP%]!ZX%]!Zk%]!Zz%]!Z!e%]!Z!f%]!Z!h%]!Z!l%]!Z#g%]!Z#h%]!Z#i%]!Z#j%]!Z#k%]!Z#l%]!Z#m%]!Z#n%]!Z#o%]!Z#q%]!Z#s%]!Z#u%]!Z#v%]!Z#y%]!Z(R%]!Z(a%]!Z!V%]!Z!W%]!Z~P%D`Oo(VX~P1gO'u!iO~P!'xO!ScX!VcX#XcX~P&:hOPYXXYXkYXyYXzYX|YX!VYX!VcX!eYX!fYX!hYX!lYX#XYX#XcX#dcX#gYX#hYX#iYX#jYX#kYX#lYX#mYX#nYX#oYX#qYX#sYX#uYX#vYX#{YX(RYX(aYX(hYX(iYX~O!acX!gYX!gcX(acX~P')iOP<WOQ<WOa=wOb!fOikOk<WOlkOmkOskOu<WOw<WO|WO!QkO!RkO!XXO!c<ZO!hZO!k<WO!l<WO!m<WO!o<[O!q<]O!t!eO$Q!hO$UfO't)TO'vTO'yUO(RVO(`[O(m=uO~O!V<lO!W$ka~Oi%QOk$rOl$qOm$qOs%ROu%SOw<rO|$yO!X$zO!c=|O!h$vO#c<xO$Q%WO$m<tO$o<vO$r%XO't(kO'vTO'yUO'}%PO(R$sO~O#p)[O~P'._O!WYX!WcX~P')iO#d<`O~O!a#sO#d<`O~O#X<pO~O#o<eO~O#X<zO!V(fX!W(fX~O#X<pO!V(dX!W(dX~O#d<{O~Od<}O~P!.aO#d=SO~O#d=TO~O!a#sO#d=UO~O!a#sO#d<{O~O#y=VO~P#A]O#d=WO~O#d=XO~O#d=YO~O#d=ZO~O#d=[O~O#d=]O~O#y=^O~P!.aO#y=_O~P!.aO$U~!f!|!}#P#Q#T#b#c#n(m$m$o$r%U%`%a%b%h%j%m%n%p%r~'oR$U(m#h!R'm'u#il#g#jky'n(U'n't$W$Y$W~",goto:"$2w(zPPPP({P)OP)`P+j/pPPPP7RPP7hP=gAYPAmPAmPPPAmPC]PAmPAmPAmPCaPPCfPDPPH}PPPIRPPPPIRLUPPPL[NiPIRP!#SPPPP!%fIRPPPIRPIRP!'xIRP!+`!,b!,gP!-X!-]!-XPPPPP!0j!3SPP!3]!4kP!,bIRIR!8S!;`!@l!@l!DePPP!DlIRPPPPPPPPPPP!G{P!IbPPIR!JsPIRPIRIRIRIRPIR!LZPP# eP#$kP#$o#$y#$}#$}P# bP#%R#%RP#(XP#(]IRIR#(c#+hAmPAmPAmAmP#,rAmAm#.lAm#0yAm#2mAmAm#3Z#5V#5V#5Z#5c#5V#5kP#5VPAm#6gAm#7oAmAm7RPPP#8zPP#9d#9dP#9dP#9y#9dPP#:PP#9vP#9v#:c!3X#9v#:}#;T7O)O#;W)OP#;_#;_#;_P)OP)OP)OP)OPP)OP#;e#;hP#;h)OP#;lP#;oP)OP)OP)OP)OP)OP)O)OPP#;u#;{#<V#<]#<c#<i#<o#<}#=T#=Z#=e#=k#>g#>v#>|#?`#?f#?l#?z#@a#Aq#BP#BV#B]#Bc#Bi#Bs#By#CP#CZ#Cm#CsPPPPPPPPPP#CyPPPPPPP#Dm#I^P#J}#KU#K^PPPP$ h$$^$+P$+S$+V$-g$-j$-m$-tPP$-z$.O$.w$/w$/{$0aPP$0e$0k$0oP$0r$0v$0y$1o$2V$2[$2_$2b$2h$2k$2o$2sR!zRmpOXr!X#b%^&e&g&h&j,`,e1j1mU!pQ'R-QQ%dtQ%lwQ%szQ&]!TS&y!c,xQ'X!f^'^!m!r!s!t!u!v!wS*^$z*cQ+W%mQ+e%uQ,P&VQ-O'QQ-Y'YY-b'_'`'a'b'cQ/s*eQ1X,QW2e-d-f-g-hS5R0}5UU6a2h2j2kU8R5Y5Z5]S8x6d6fS9u8S8TQ:c8{Q:z9xR<y<[%SdOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%q&^&a&e&g&h&j&n&v'T'h'x'z(Q([(m(q(u)t*v+j,[,`,e-U-^-r-{.e.l/}0S0a1Q1b1c1d1f1j1m1o2`2o3R4}5b5t5v5w6Z8O8Y8g8s:^;V;m;zS#n]<X!r)V$Y$k&z)i,q,t.t2O3h4z6Q9k:Y<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xQ*n%TQ+]%oQ,R&YQ,Y&bQ.[<qQ0W+OQ0[+QQ0g+^Q1a,WQ2u.XQ4i0bQ5i1YQ6o2yQ6u<rQ7h4jR9S6p'QkOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k%^%d%q&^&a&b&e&g&h&j&n&v&z'T'h'x'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=x#n!kQ!m!p!r!s!t!u!v!w!x&y'Q'R'^'_'`'a'b'c'd,x-O-Q-b-d-e-f-g-h0}2e2h2i2j2k5O5U5W5X5Y5Z5[6a6d6e6f7v7w7x7y8T8x8{8|9p9q9r:c:u:v;b$Y$qi#s#u$a$b$v$y%U%V%Z)p)y){)|*T*Z*i*j*}+Q+o+r.W.b/a/b/d0P0t0w1P2x3p3z4S4Y4a4c5a6m7T7^8V9P9[9{:g:};^<n<o<s<t<u<v<w<x=O=P=Q=R=S=T=W=X=Y=Z=^=_=u=}>O>R>SQ%vzQ&w!cS&}%x,{Q+]%oS/Q)v/SQ0O*rQ0g+^Q0l+dQ1`,VQ1a,WQ4i0bQ4r0nQ5l1[Q5m1_Q7h4jQ7k4oQ8b5oQ9j7lR:R8_pmOXr!T!X#b%^&[&e&g&h&j,`,e1j1mR,T&^&z`OPXYrstux!X!^!g!l#Q#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k%^%d%q&^&a&b&e&g&h&j&n&v'T'h'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=w=x[#ZWZ#U#X&z'xQ%gvQ%kwS%pz%u!U%y|}#e#g#j%[%w(R(Y(Z(_+h+i+k,^,r-v-y-}.O.Q1r2q2r6P6jQ&R!RQ'U!eQ'W!fQ(f#pS*Q$v*US+V%l%mQ+Z%oQ+z&TQ,O&VS-X'X'YQ.Z(gQ/^*RQ0`+WQ0f+^Q0h+_Q0k+cQ1S+{S1W,P,QQ2[-YQ3q/YQ4h0bQ4l0eQ4q0mQ5h1XQ7Q3rQ7g4jQ7j4nQ9f7fR:p9gv$xi#u%U%V%Z)y){*T*i*j.b/a0P3p4Y9[=u=}>O!d%iw!f!o%k%l%m&x'W'X'Y']'k*]+V+W,u-X-Y-a-c/k0`2T2[2c2g4U6_6c8v8z:a;YQ+P%gQ+p&OQ+s&PQ+}&VQ.Y(fQ1R+zU1V,O,P,QQ2z.ZQ5c1SS5g1W1XS7t4|5QQ8^5hU9s7z8P8QU:x9t9v9wQ;e:yQ;u;f!z=y#s$a$b$v$y)p)|*Z*}+Q+o+r.W/b/d0t0w1P2x3z4S4a4c5a6m7T7^8V9P9{:g:};^<s<u<w=O=Q=S=W=Y=^>R>Sg=z<n<o<t<v<x=P=R=T=X=Z=_W$}i%P*k=uS&O!O&[Q&P!PQ&Q!QR+n%|$Z$|i#s#u$a$b$v$y%U%V%Z)p)y){)|*T*Z*i*j*}+Q+o+r.W.b/a/b/d0P0t0w1P2x3p3z4S4Y4a4c5a6m7T7^8V9P9[9{:g:};^<n<o<s<t<u<v<w<x=O=P=Q=R=S=T=W=X=Y=Z=^=_=u=}>O>R>ST)q$s)rV*o%T<q<rU&}!c%x,{S(t#w#xQ+b%rS.S(b(cQ0x+tQ4Z/|R7p4x'QkOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k%^%d%q&^&a&b&e&g&h&j&n&v&z'T'h'x'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=x$q$^c#W#c%b%c%e'w'}(i(p(x(y(z({(|(})O)P)Q)R)S)U)X)])g*{+a,v-k-p-u-z.a.g.k.m.n.o/O0Q1y1|2^2n3Q3V3W3X3Y3Z3[3]3^3_3`3a3b3c3f3g3l4_4f6S6Y6h6s6t6y6z7r8m8q9T9X9Y:[:r;R;T;k;x<R<Y=lT#RV#S'RkOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k%^%d%q&^&a&b&e&g&h&j&n&v&z'T'h'x'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xQ&{!cR2P,x#f!kQ!c!m!p!r!s!t!u!v!w!x&y'Q'R'^'_'`'a'b'c'd,x-O-Q-b-d-e-f-g-h2e2h2i2j2k5O5W5X5[6a6d6e6f7v7w7x7y8x8{8|9p9q9r:c:u:v;bS*]$z*cS/k*^*eQ/t*fQ0z+vQ4U/sQ4X/vS4|0}5US7z5R5]S8P5Y5ZS9t8R8SQ9v8TS:y9u9xR;f:zlpOXr!X#b%^&e&g&h&j,`,e1j1mQ&l![Q'l!tS(h#r<`Q+T%jQ+x&RQ+y&SQ-V'VQ-j'eS.`(m<{S0R*v=UQ0^+UQ0|+wQ1q,gQ1s,hQ1{,sQ2Y-WQ2]-[S4`0S=[Q4d0_S4g0a=]Q6R1}Q6V2ZQ6[2bQ7e4eQ8n6TQ8o6WQ8r6]Q:X8kQ:]8tQ;U:_Q;l;WR;y;n$l$]c#W#c%c%e'w'}(i(p(x(y(z({(|(})O)P)Q)R)S)U)X)])g*{+a,v-k-p-u-z.a.g.k.n.o/O0Q1y1|2^2n3Q3V3W3X3Y3Z3[3]3^3_3`3a3b3c3f3g3l4_4f6S6Y6h6s6t6y6z7r8m8q9T9X9Y:[:r;R;T;k;x<R<Y=lS(e#m'[U*h${(l3eS*z%b.mQ2v0WQ6l2uQ9R6oR:h9S$l$[c#W#c%c%e'w'}(i(p(x(y(z({(|(})O)P)Q)R)S)U)X)])g*{+a,v-k-p-u-z.a.g.k.n.o/O0Q1y1|2^2n3Q3V3W3X3Y3Z3[3]3^3_3`3a3b3c3f3g3l4_4f6S6Y6h6s6t6y6z7r8m8q9T9X9Y:[:r;R;T;k;x<R<Y=lS(d#m'[S(v#x$]S*y%b.mS.T(c(eQ.p)WQ0T*zR2s.U'QkOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k%^%d%q&^&a&b&e&g&h&j&n&v&z'T'h'x'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xS#n]<XQ&g!VQ&h!WQ&j!YQ&k!ZR1i,cQ'S!eQ*|%gQ-T'US.V(f+PQ2W-SW2w.Y.Z0V0XQ6U2XU6k2t2v2zS9O6l6nS:f9Q9RS;[:e:hQ;p;]R;{;qV!qQ'R-Q!_^OQXZ_r!T!X!m#b#e%[%^&[&^&e&g&h&j'R(_,`,e-Q-}0}1j1m5O5UT#n]<X%^yOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%q&^&a&b&e&g&h&j&n&v'T'h'x'z(Q([(m(q(u)t*v+O+j,[,`,e-U-^-r-{.X.e.l/}0S0a1Q1b1c1d1f1j1m1o2`2o2y3R4}5b5t5v5w6Z6p8O8Y8g8s:^;V;m;zS(t#w#xS.S(b(c!s=c$Y$k&z)i,q,t.t2O3h4z6Q9k:Y<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xU!oQ'R-Q[']!m!s!t!u!v!wS'k!p!rY'm!x5O5W5X5[S-a'^'_W-c'`'a'b'cY-i'd7v7w7x7yS2c-b-dW2f-e9p9q9rU2g-f-g-hS5Q0}5US6_2e2hU6b2i:u:vS6c2j2kS7z5R5]S8Q5Y5ZS8v6a6dS8y6e;bQ8z6fS9t8R8SQ9w8TS:a8x8{Q:d8|S:y9u9xQ;Y:cR;f:zU!qQ'R-QT5S0}5UU'j!o5P5QS(^#f1gU-`']'m8QQ/]*QQ/i*]U2d-c-i9wQ3v/^S4P/j/tS6`2f2gQ7P3qS7[4V4XS8w6b6cQ9^7QQ9e7_S:b8y8zR;Z:dQ#tbU'i!o5P5QS(]#f1gQ*w%]Q+R%hQ+X%nW-_']'j'm8QQ-|(^Q/[*QQ/h*]Q/n*`Q0]+SQ1T+|W2a-`-c-i9wS3u/]/^S4O/i/tQ4R/mQ4T/oQ5e1UU6^2d2f2gQ7O3qQ7S3vS7W4P4XQ7]4WQ8[5fU8u6`6b6cS9]7P7QQ9a7XQ9c7[Q9n7sQ:O8]U:`8w8y8zQ:l9^Q:m9bQ:o9eQ:t9oQ;P:PS;X:b:dQ;`:nQ;c:wQ;o;ZQ;s;dQ<O;tQ<T<PQ=f=aQ=q=jR=r=k%^aOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%q&^&a&b&e&g&h&j&n&v'T'h'x'z(Q([(m(q(u)t*v+O+j,[,`,e-U-^-r-{.X.e.l/}0S0a1Q1b1c1d1f1j1m1o2`2o2y3R4}5b5t5v5w6Z6p8O8Y8g8s:^;V;m;zS#tx!g!r=`$Y$k&z)i,q,t.t2O3h4z6Q9k:Y<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xR=f=w%^bOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%q&^&a&b&e&g&h&j&n&v'T'h'x'z(Q([(m(q(u)t*v+O+j,[,`,e-U-^-r-{.X.e.l/}0S0a1Q1b1c1d1f1j1m1o2`2o2y3R4}5b5t5v5w6Z6p8O8Y8g8s:^;V;m;zQ%]j!d%hw!f!o%k%l%m&x'W'X'Y']'k*]+V+W,u-X-Y-a-c/k0`2T2[2c2g4U6_6c8v8z:a;YS%nx!gQ+S%iQ+|&VW1U+},O,P,QU5f1V1W1XS7s4|5QS8]5g5hW9o7t7z8P8QQ:P8^W:w9s9t9v9wS;d:x:yS;t;e;fQ<P;u!r=a$Y$k&z)i,q,t.t2O3h4z6Q9k:Y<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xQ=j=vR=k=w%QeOPXYrstu!X!^!l#Q#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%q&^&a&e&g&h&j&n&v'T'h'z(Q([(m(q(u)t*v+O+j,[,`,e-U-^-r-{.X.e.l/}0S0a1Q1b1c1d1f1j1m1o2`2o2y3R4}5b5t5v5w6Z6p8O8Y8g8s:^;V;m;zY#`WZ#U#X'x!U%y|}#e#g#j%[%w(R(Y(Z(_+h+i+k,^,r-v-y-}.O.Q1r2q2r6P6jQ,Z&b!p=b$Y$k)i,q,t.t2O3h4z6Q9k:Y<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xR=e&zS'O!c%xR2R,{%SdOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%q&^&a&e&g&h&j&n&v'T'h'x'z(Q([(m(q(u)t*v+j,[,`,e-U-^-r-{.e.l/}0S0a1Q1b1c1d1f1j1m1o2`2o3R4}5b5t5v5w6Z8O8Y8g8s:^;V;m;z!r)V$Y$k&z)i,q,t.t2O3h4z6Q9k:Y<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xQ,Y&bQ0W+OQ2u.XQ6o2yR9S6p!n$Sc#W%b'w'}(i(p)P)Q)R)S)X)]+a-k-p-u-z.a.g/O0Q2^2n3Q3c4_4f6Y6h6s8q:[;T;k;x<R<Y!T<g)U)g,v.m1y1|3V3_3`3a3b3f3l6S6t6y6z7r8m9T9X9Y:r;R=l!j$Uc#W%b'w'}(i(p)R)S)X)]+a-k-p-u-z.a.g/O0Q2^2n3Q3c4_4f6Y6h6s8q:[;T;k;x<R<Y!P<i)U)g,v.m1y1|3V3a3b3f3l6S6t6y6z7r8m9T9X9Y:r;R=l!f$Yc#W%b'w'}(i(p)X)]+a-k-p-u-z.a.g/O0Q2^2n3Q3c4_4f6Y6h6s8q:[;T;k;x<R<YQ3p/Wz=x)U)g,v.m1y1|3V3f3l6S6t6y6z7r8m9T9X9Y:r;R=lQ=}>PR>O>Q'QkOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k%^%d%q&^&a&b&e&g&h&j&n&v&z'T'h'x'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xS$lh$mR3i.s'XgOPWXYZhrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k$m%^%d%q&^&a&b&e&g&h&j&n&v&z'T'h'x'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.s.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xT$hf$nQ$ffS)`$i)dR)l$nT$gf$nT)b$i)d'XhOPWXYZhrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k$m%^%d%q&^&a&b&e&g&h&j&n&v&z'T'h'x'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.s.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xT$lh$mQ$ohR)k$m%^jOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%q&^&a&b&e&g&h&j&n&v'T'h'x'z(Q([(m(q(u)t*v+O+j,[,`,e-U-^-r-{.X.e.l/}0S0a1Q1b1c1d1f1j1m1o2`2o2y3R4}5b5t5v5w6Z6p8O8Y8g8s:^;V;m;z!s=v$Y$k&z)i,q,t.t2O3h4z6Q9k:Y<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=x#alOPXZr!X!^!l#Q#b#l#y$k%^&^&a&b&e&g&h&j&n&v'T(u)i+O+j,[,`,e-U.X.t/}1Q1b1c1d1f1j1m1o2y3h4}5b5t5v5w6p8O8Y8gv${i#u%U%V%Z)y){*T*i*j.b/a0P3p4Y9[=u=}>O!z(l#s$a$b$v$y)p)|*Z*}+Q+o+r.W/b/d0t0w1P2x3z4S4a4c5a6m7T7^8V9P9{:g:};^<s<u<w=O=Q=S=W=Y=^>R>SQ*s%XQ/P)ug3e<n<o<t<v<x=P=R=T=X=Z=_v$wi#u%U%V%Z)y){*T*i*j.b/a0P3p4Y9[=u=}>OQ*V$xS*`$z*cQ*t%YQ/o*a!z=h#s$a$b$v$y)p)|*Z*}+Q+o+r.W/b/d0t0w1P2x3z4S4a4c5a6m7T7^8V9P9{:g:};^<s<u<w=O=Q=S=W=Y=^>R>Sf=i<n<o<t<v<x=P=R=T=X=Z=_Q=m=yQ=n=zQ=o={R=p=|v${i#u%U%V%Z)y){*T*i*j.b/a0P3p4Y9[=u=}>O!z(l#s$a$b$v$y)p)|*Z*}+Q+o+r.W/b/d0t0w1P2x3z4S4a4c5a6m7T7^8V9P9{:g:};^<s<u<w=O=Q=S=W=Y=^>R>Sg3e<n<o<t<v<x=P=R=T=X=Z=_lnOXr!X#b%^&e&g&h&j,`,e1j1mQ*Y$yQ,n&qQ,o&sR3y/b$Y$|i#s#u$a$b$v$y%U%V%Z)p)y){)|*T*Z*i*j*}+Q+o+r.W.b/a/b/d0P0t0w1P2x3p3z4S4Y4a4c5a6m7T7^8V9P9[9{:g:};^<n<o<s<t<u<v<w<x=O=P=Q=R=S=T=W=X=Y=Z=^=_=u=}>O>R>SQ+q&PQ0v+sQ4v0uR7o4wT*b$z*cS*b$z*cT5T0}5US/m*_4}T4W/u8OQ+R%hQ/n*`Q0]+SQ1T+|Q5e1UQ8[5fQ9n7sQ:O8]Q:t9oQ;P:PQ;c:wQ;s;dQ<O;tR<T<Pn)y$t(n*u/`/w/x3O3w4^6}7`:k=g=s=t!W=O(j)Z*P*X._.{/W/e0U0s0u2}3x3|4u4w6q6r7U7Y7b7d9`9d;_>P>Q]=P3d6x9U:i:j;|p){$t(n*u/U/`/w/x3O3w4^6}7`:k=g=s=t!Y=Q(j)Z*P*X._.{/W/e0U0s0u2{2}3x3|4u4w6q6r7U7Y7b7d9`9d;_>P>Q_=R3d6x9U9V:i:j;|pmOXr!T!X#b%^&[&e&g&h&j,`,e1j1mQ&X!SR,[&bpmOXr!T!X#b%^&[&e&g&h&j,`,e1j1mR&X!SQ+u&QR0r+nqmOXr!T!X#b%^&[&e&g&h&j,`,e1j1mQ1O+zS5`1R1SU8U5^5_5cS9z8W8XS:{9y9|Q;g:|R;v;hQ&`!TR,U&[R5l1[S%pz%uR0h+_Q&e!UR,`&fR,f&kT1k,e1mR,j&lQ,i&lR1t,jQ'o!yR-l'oQrOQ#bXT%ar#bQ!|TR'q!|Q#PUR's#PQ)r$sR.|)rQ#SVR'u#SQ#VWU'{#V'|-sQ'|#WR-s'}Q,y&{R2Q,yQ.c(nR3P.cQ.f(pS3S.f3TR3T.gQ-Q'RR2U-Qr_OXr!T!X#b%^&[&^&e&g&h&j,`,e1j1mU!mQ'R-QS#eZ%[Y#o_!m#e-}5OQ-}(_T5O0}5US#]W%wU(S#](T-tQ(T#^R-t(OQ,|'OR2S,|Q(`#hQ-w(XW.R(`-w2l6gQ2l-xR6g2mQ)d$iR.u)dQ$mhR)j$mQ$`cU)Y$`-o<mQ-o<YR<m)gQ/Z*QW3s/Z3t7R9_U3t/[/]/^S7R3u3vR9_7S#m)w$t(j(n)Z*P*X*p*q*u.].^._.{/U/V/W/`/e/w/x0U0s0u2{2|2}3O3d3w3x3|4^4u4w6q6r6v6w6x6}7U7Y7`7b7d9U9V9W9`9d:i:j:k;_;|=g=s=t>P>QQ/c*XU3{/c3}7VQ3}/eR7V3|Q*c$zR/q*cQ*l%OR/z*lQ4b0UR7c4bQ+l%zR0q+lQ4y0xS7q4y9lR9l7rQ+w&RR0{+wQ5U0}R7|5UQ1Z,RS5j1Z8`R8`5lQ0c+ZW4k0c4m7i9hQ4m0fQ7i4lR9h7jQ+`%pR0i+`Q1m,eR5z1mWqOXr#bQ&i!XQ*x%^Q,_&eQ,a&gQ,b&hQ,d&jQ1h,`S1k,e1mR5y1jQ%`oQ&m!]Q&p!_Q&r!`Q&t!aU'g!o5P5QQ+T%jQ+g%vQ+m%{Q,T&`Q,l&oY-]']'i'j'm8QQ-j'eQ/p*bQ0^+US1^,U,XQ1u,kQ1v,nQ1w,oQ2]-[[2_-_-`-c-i-k9wQ4d0_Q4p0lQ4t0sQ5d1TQ5n1`Q5x1iY6X2^2a2d2f2gQ6[2bQ7e4eQ7m4rQ7n4uQ7{5TQ8Z5eQ8a5mY8p6Y6^6`6b6cQ8r6]Q9i7kQ9m7sQ9}8[Q:S8bY:Z8q8u8w8y8zQ:]8tQ:q9jS:s9n9oQ;O:OW;S:[:`:b:dQ;U:_S;a:t:wQ;i;PU;j;T;X;ZQ;l;WS;r;c;dS;w;k;oQ;y;nS;};s;tQ<Q;xS<S<O<PQ<U<RR<V<TQ%jwQ'V!fQ'e!oU+U%k%l%mQ,s&xU-W'W'X'YS-[']'kQ/g*]S0_+V+WQ1},uS2Z-X-YS2b-a-cQ4Q/kQ4e0`Q6T2TQ6W2[S6]2c2gQ7Z4US8t6_6cS:_8v8zQ;W:aR;n;YS$ui=uR*m%PU%Oi%P=uR/y*kQ$tiS(j#s+QQ(n#uS)Z$a$bQ*P$vQ*X$yQ*p%UQ*q%VQ*u%ZQ.]<sQ.^<uQ._<wQ.{)pQ/U)yQ/V){Q/W)|Q/`*TQ/e*ZQ/w*iQ/x*jh0U*}.W1P2x5a6m8V9P9{:g:};^Q0s+oQ0u+rQ2{=OQ2|=QQ2}=SQ3O.bS3d<n<oQ3w/aQ3x/bQ3|/dQ4^0PQ4u0tQ4w0wQ6q=WQ6r=YQ6v<tQ6w<vQ6x<xQ6}3pQ7U3zQ7Y4SQ7`4YQ7b4aQ7d4cQ9U=TQ9V=PQ9W=RQ9`7TQ9d7^Q:i=XQ:j=ZQ:k9[Q;_=^Q;|=_Q=g=uQ=s=}Q=t>OQ>P>RR>Q>SloOXr!X#b%^&e&g&h&j,`,e1j1mQ!dPS#dZ#lQ&o!^U'Z!l4}8OQ't#QQ(w#yQ)h$kS,X&^&aQ,]&bQ,k&nQ,p&vQ-S'TQ.i(uQ.y)iQ0X+OQ0o+jQ1e,[Q2X-UQ2v.XQ3k.tQ4[/}Q5_1QQ5p1bQ5q1cQ5s1dQ5u1fQ5|1oQ6l2yQ6{3hQ8X5bQ8f5tQ8h5vQ8i5wQ9R6pQ9|8YR:U8g#UcOPXZr!X!^!l#b#l#y%^&^&a&b&e&g&h&j&n&v'T(u+O+j,[,`,e-U.X/}1Q1b1c1d1f1j1m1o2y4}5b5t5v5w6p8O8Y8gQ#WWQ#cYQ%bsQ%ctQ%euS'w#U'zQ'}#XQ(i#rQ(p#vQ(x#|Q(y#}Q(z$OQ({$PQ(|$QQ(}$RQ)O$SQ)P$TQ)Q$UQ)R$VQ)S$WQ)U$YQ)X$_Q)]$cW)g$k)i.t3hQ*{%dQ+a%qS,v&z2OQ-k'hS-p'x-rQ-u(QQ-z([Q.a(mQ.g(qQ.k<WQ.m<ZQ.n<[Q.o<]Q/O)tQ0Q*vQ1y,qQ1|,tQ2^-^Q2n-{Q3Q.eQ3V<`Q3W<aQ3X<bQ3Y<cQ3Z<dQ3[<eQ3]<fQ3^<gQ3_<hQ3`<iQ3a<jQ3b<kQ3c.lQ3f<pQ3g<yQ3l<lQ4_0SQ4f0aQ6S<zQ6Y2`Q6h2oQ6s3RQ6t<{Q6y<}Q6z=UQ7r4zQ8m6QQ8q6ZQ9T=VQ9X=[Q9Y=]Q:[8sQ:r9kQ;R:YQ;T:^Q;k;VQ;x;mQ<R;zQ<Y#QR=l=xR#YWR&|!cU!oQ'R-QS&x!c,x[']!m!s!t!u!v!wS'k!p!r^'m!x5O5W5X5Y5Z5[S,u&y'QS-a'^'_W-c'`'a'b'c[-i'd7v7w7x7y8TQ2T-OS2c-b-dW2f-e9p9q9rU2g-f-g-hS5P0}5US6_2e2hU6b2i:u:vS6c2j2kS8v6a6dS8y6e;bQ8z6fS:a8x8{Q:d8|R;Y:cR(o#uR(r#vQ!dQT-P'R-QQ#m]R'[<XT#iZ%[S#hZ%[U%z|},^U(X#e#g#jS-x(Y(ZQ.P(_Q0p+kQ2m-yU2p-}.O.QS6i2q2rR8}6j`#[W#U#X%w'x(R+h-vt#fZ|}#e#g#j%[(Y(Z(_+k-y-}.O.Q2q2r6jQ1g,^Q1z,rQ6O1rQ8l6PT=d&z+iT#_W%wS#^W%wS'y#U(RS(O#X+hS,w&z+iT-q'x-vT'P!c%xQ$ifR)n$nT)c$i)dR3j.sT*S$v*UR*[$yQ0V*}Q2t.WQ5^1PQ6n2xQ8W5aQ9Q6mQ9y8VQ:e9PQ:|9{Q;]:gQ;h:}R;q;^lpOXr!X#b%^&e&g&h&j,`,e1j1mQ&_!TR,T&[V%{|},^R0y+tR,S&YQ%tzR+f%uR+[%oT&c!U&fT&d!U&fT1l,e1m",nodeNames:"⚠ ArithOp ArithOp LineComment BlockComment Script ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > TypeParamList TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . ?. PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewExpression new TypeArgList CompareOp < ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXStartTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody MethodDeclaration AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:363,context:trackNewline,nodeProps:[["group",-26,6,14,16,62,199,203,206,207,209,212,215,226,228,234,236,238,240,243,249,255,257,259,261,263,265,266,"Statement",-32,10,11,25,28,29,35,45,48,49,51,56,64,72,76,78,80,81,103,104,113,114,131,134,136,137,138,139,141,142,162,163,165,"Expression",-23,24,26,30,34,36,38,166,168,170,171,173,174,175,177,178,179,181,182,183,193,195,197,198,"Type",-3,84,96,102,"ClassItem"],["openedBy",31,"InterpolationStart",50,"[",54,"{",69,"(",143,"JSXStartTag",155,"JSXStartTag JSXStartCloseTag"],["closedBy",33,"InterpolationEnd",44,"]",55,"}",70,")",144,"JSXSelfCloseEndTag JSXEndTag",160,"JSXEndTag"]],propSources:[jsHighlight],skippedNodes:[0,3,4,269],repeatNodeCount:32,tokenData:"$>y(CSR!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tu>PuvBavwDxwxGgxyMvyz! Qz{!![{|!%O|}!&]}!O!%O!O!P!'g!P!Q!1w!Q!R#0t!R![#3T![!]#@T!]!^#Aa!^!_#Bk!_!`#GS!`!a#In!a!b#N{!b!c$$z!c!}>P!}#O$&U#O#P$'`#P#Q$,w#Q#R$.R#R#S>P#S#T$/`#T#o$0j#o#p$4z#p#q$5p#q#r$7Q#r#s$8^#s$f%Z$f$g+g$g#BY>P#BY#BZ$9h#BZ$IS>P$IS$I_$9h$I_$I|>P$I|$I}$<s$I}$JO$<s$JO$JT>P$JT$JU$9h$JU$KV>P$KV$KW$9h$KW&FU>P&FU&FV$9h&FV;'S>P;'S;=`BZ<%l?HT>P?HT?HU$9h?HUO>P(n%d_$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$d&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$d&j'z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU'z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$d&j'wpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU'wpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX'wp'z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z(CS+rq$d&j'wp'z!b'm(;dOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z(CS.ST'x#S$d&j'n(;dO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c(CS.n_$d&j'wp'z!b'n(;dOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`/x`$d&j!l$Ip'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S1V`#q$Id$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S2d_#q$Id$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$2b3l_'v$(n$d&j'z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k*r4r_$d&j'z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k)`5vX$d&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q)`6jT$_#t$d&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#t6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y#t7bO$_#t#t7eP;=`<%l6y)`7kP;=`<%l5q*r7w]$_#t$d&j'z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}%W8uZ'z!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p%W9oU$_#t'z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}%W:UP;=`<%l8p*r:[P;=`<%l4k#%|:hg$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}st%Ztu<Puw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}<P!}#O%Z#O#P&c#P#R%Z#R#S<P#S#T%Z#T#o<P#o#p*g#p$g%Z$g;'S<P;'S;=`=y<%lO<P#%|<[i$d&j(`!L^'wp'z!bOY%ZYZ&cZr%Zrs&}st%Ztu<Puw%Zwx(rx!Q%Z!Q![<P![!^%Z!^!_*g!_!c%Z!c!}<P!}#O%Z#O#P&c#P#R%Z#R#S<P#S#T%Z#T#o<P#o#p*g#p$g%Z$g;'S<P;'S;=`=y<%lO<P#%|=|P;=`<%l<P(CS>`k$d&j'wp'z!b(U!LY't&;d$W#tOY%ZYZ&cZr%Zrs&}st%Ztu>Puw%Zwx(rx}%Z}!O@T!O!Q%Z!Q![>P![!^%Z!^!_*g!_!c%Z!c!}>P!}#O%Z#O#P&c#P#R%Z#R#S>P#S#T%Z#T#o>P#o#p*g#p$g%Z$g;'S>P;'S;=`BZ<%lO>P+d@`k$d&j'wp'z!b$W#tOY%ZYZ&cZr%Zrs&}st%Ztu@Tuw%Zwx(rx}%Z}!O@T!O!Q%Z!Q![@T![!^%Z!^!_*g!_!c%Z!c!}@T!}#O%Z#O#P&c#P#R%Z#R#S@T#S#T%Z#T#o@T#o#p*g#p$g%Z$g;'S@T;'S;=`BT<%lO@T+dBWP;=`<%l@T(CSB^P;=`<%l>P%#SBl`$d&j'wp'z!b#i$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#SCy_$d&j#{$Id'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%DfETa(i%<v$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sv%ZvwFYwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#SFe`$d&j#u$Id'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$2bGp_'y$)`$d&j'wpOYHoYZIuZrHorsIuswHowxKVx!^Ho!^!_LX!_#OHo#O#PIu#P#oHo#o#pLX#p;'SHo;'S;=`Mp<%lOHo*QHv_$d&j'wpOYHoYZIuZrHorsIuswHowxKVx!^Ho!^!_LX!_#OHo#O#PIu#P#oHo#o#pLX#p;'SHo;'S;=`Mp<%lOHo)`IzX$d&jOwIuwx6cx!^Iu!^!_Jg!_#oIu#o#pJg#p;'SIu;'S;=`KP<%lOIu#tJjTOwJgwx7]x;'SJg;'S;=`Jy<%lOJg#tJ|P;=`<%lJg)`KSP;=`<%lIu*QK`]$_#t$d&j'wpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r$fL^Z'wpOYLXYZJgZrLXrsJgswLXwxMPx#OLX#O#PJg#P;'SLX;'S;=`Mj<%lOLX$fMWU$_#t'wpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r$fMmP;=`<%lLX*QMsP;=`<%lHo(*QNR_!h(!b$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'l! ]_!gM|$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+h!!ib$d&j'wp'z!b'u#)d#j$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!#q{!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S!#|`$d&j'wp'z!b#g$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&-O!%Z`$d&j'wp'z!bk&%`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&C[!&h_!V&;l$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS!'rc$d&j'wp'z!by'<nOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!(}!P!Q%Z!Q![!+g![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'d!)Wa$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!*]!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'d!*h_!UMt$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!+rg$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!+g![!^%Z!^!_*g!_!g%Z!g!h!-Z!h#O%Z#O#P&c#P#R%Z#R#S!+g#S#X%Z#X#Y!-Z#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!-dg$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!.{|}%Z}!O!.{!O!Q%Z!Q![!0a![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!0a#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!/Uc$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!0a![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!0a#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!0lc$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!0a![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!0a#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS!2Sf$d&j'wp'z!b#h$IdOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}xz!3hz{#$s{!P!3h!P!Q#&Y!Q!^!3h!^!_!Mh!_!`#-x!`!a#/_!a!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h(r!3sb$d&j'wp'z!b!RSOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}x!P!3h!P!Q!Kh!Q!^!3h!^!_!Mh!_!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h(Q!5U`$d&j'z!b!RSOY!4{YZ&cZw!4{wx!6Wx!P!4{!P!Q!=o!Q!^!4{!^!_!?g!_!}!4{!}#O!Bn#O#P!<w#P#o!4{#o#p!?g#p;'S!4{;'S;=`!Cw<%lO!4{&n!6_^$d&j!RSOY!6WYZ&cZ!P!6W!P!Q!7Z!Q!^!6W!^!_!8g!_!}!6W!}#O!;U#O#P!<w#P#o!6W#o#p!8g#p;'S!6W;'S;=`!=i<%lO!6W&n!7ba$d&j!RSO!^&c!_#Z&c#Z#[!7Z#[#]&c#]#^!7Z#^#a&c#a#b!7Z#b#g&c#g#h!7Z#h#i&c#i#j!7Z#j#m&c#m#n!7Z#n#o&c#p;'S&c;'S;=`&w<%lO&cS!8lX!RSOY!8gZ!P!8g!P!Q!9X!Q!}!8g!}#O!9p#O#P!:o#P;'S!8g;'S;=`!;O<%lO!8gS!9^U!RS#Z#[!9X#]#^!9X#a#b!9X#g#h!9X#i#j!9X#m#n!9XS!9sVOY!9pZ#O!9p#O#P!:Y#P#Q!8g#Q;'S!9p;'S;=`!:i<%lO!9pS!:]SOY!9pZ;'S!9p;'S;=`!:i<%lO!9pS!:lP;=`<%l!9pS!:rSOY!8gZ;'S!8g;'S;=`!;O<%lO!8gS!;RP;=`<%l!8g&n!;Z[$d&jOY!;UYZ&cZ!^!;U!^!_!9p!_#O!;U#O#P!<P#P#Q!6W#Q#o!;U#o#p!9p#p;'S!;U;'S;=`!<q<%lO!;U&n!<UX$d&jOY!;UYZ&cZ!^!;U!^!_!9p!_#o!;U#o#p!9p#p;'S!;U;'S;=`!<q<%lO!;U&n!<tP;=`<%l!;U&n!<|X$d&jOY!6WYZ&cZ!^!6W!^!_!8g!_#o!6W#o#p!8g#p;'S!6W;'S;=`!=i<%lO!6W&n!=lP;=`<%l!6W(Q!=xi$d&j'z!b!RSOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#Z&}#Z#[!=o#[#]&}#]#^!=o#^#a&}#a#b!=o#b#g&}#g#h!=o#h#i&}#i#j!=o#j#m&}#m#n!=o#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!f!?nZ'z!b!RSOY!?gZw!?gwx!8gx!P!?g!P!Q!@a!Q!}!?g!}#O!Ap#O#P!:o#P;'S!?g;'S;=`!Bh<%lO!?g!f!@hb'z!b!RSOY'}Zw'}x#O'}#P#Z'}#Z#[!@a#[#]'}#]#^!@a#^#a'}#a#b!@a#b#g'}#g#h!@a#h#i'}#i#j!@a#j#m'}#m#n!@a#n;'S'};'S;=`(f<%lO'}!f!AuX'z!bOY!ApZw!Apwx!9px#O!Ap#O#P!:Y#P#Q!?g#Q;'S!Ap;'S;=`!Bb<%lO!Ap!f!BeP;=`<%l!Ap!f!BkP;=`<%l!?g(Q!Bu^$d&j'z!bOY!BnYZ&cZw!Bnwx!;Ux!^!Bn!^!_!Ap!_#O!Bn#O#P!<P#P#Q!4{#Q#o!Bn#o#p!Ap#p;'S!Bn;'S;=`!Cq<%lO!Bn(Q!CtP;=`<%l!Bn(Q!CzP;=`<%l!4{'`!DW`$d&j'wp!RSOY!C}YZ&cZr!C}rs!6Ws!P!C}!P!Q!EY!Q!^!C}!^!_!GQ!_!}!C}!}#O!JX#O#P!<w#P#o!C}#o#p!GQ#p;'S!C};'S;=`!Kb<%lO!C}'`!Eci$d&j'wp!RSOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#Z(r#Z#[!EY#[#](r#]#^!EY#^#a(r#a#b!EY#b#g(r#g#h!EY#h#i(r#i#j!EY#j#m(r#m#n!EY#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rt!GXZ'wp!RSOY!GQZr!GQrs!8gs!P!GQ!P!Q!Gz!Q!}!GQ!}#O!IZ#O#P!:o#P;'S!GQ;'S;=`!JR<%lO!GQt!HRb'wp!RSOY)rZr)rs#O)r#P#Z)r#Z#[!Gz#[#])r#]#^!Gz#^#a)r#a#b!Gz#b#g)r#g#h!Gz#h#i)r#i#j!Gz#j#m)r#m#n!Gz#n;'S)r;'S;=`*Z<%lO)rt!I`X'wpOY!IZZr!IZrs!9ps#O!IZ#O#P!:Y#P#Q!GQ#Q;'S!IZ;'S;=`!I{<%lO!IZt!JOP;=`<%l!IZt!JUP;=`<%l!GQ'`!J`^$d&j'wpOY!JXYZ&cZr!JXrs!;Us!^!JX!^!_!IZ!_#O!JX#O#P!<P#P#Q!C}#Q#o!JX#o#p!IZ#p;'S!JX;'S;=`!K[<%lO!JX'`!K_P;=`<%l!JX'`!KeP;=`<%l!C}(r!Ksk$d&j'wp'z!b!RSOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#Z%Z#Z#[!Kh#[#]%Z#]#^!Kh#^#a%Z#a#b!Kh#b#g%Z#g#h!Kh#h#i%Z#i#j!Kh#j#m%Z#m#n!Kh#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#W!Mq]'wp'z!b!RSOY!MhZr!Mhrs!?gsw!Mhwx!GQx!P!Mh!P!Q!Nj!Q!}!Mh!}#O#!U#O#P!:o#P;'S!Mh;'S;=`##U<%lO!Mh#W!Nse'wp'z!b!RSOY*gZr*grs'}sw*gwx)rx#O*g#P#Z*g#Z#[!Nj#[#]*g#]#^!Nj#^#a*g#a#b!Nj#b#g*g#g#h!Nj#h#i*g#i#j!Nj#j#m*g#m#n!Nj#n;'S*g;'S;=`+Z<%lO*g#W#!]Z'wp'z!bOY#!UZr#!Urs!Apsw#!Uwx!IZx#O#!U#O#P!:Y#P#Q!Mh#Q;'S#!U;'S;=`##O<%lO#!U#W##RP;=`<%l#!U#W##XP;=`<%l!Mh(r##e`$d&j'wp'z!bOY##[YZ&cZr##[rs!Bnsw##[wx!JXx!^##[!^!_#!U!_#O##[#O#P!<P#P#Q!3h#Q#o##[#o#p#!U#p;'S##[;'S;=`#$g<%lO##[(r#$jP;=`<%l##[(r#$pP;=`<%l!3h(CS#%Qb$d&j'wp'z!b'o(;d!RSOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}x!P!3h!P!Q!Kh!Q!^!3h!^!_!Mh!_!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h(CS#&e_$d&j'wp'z!bR(;dOY#&YYZ&cZr#&Yrs#'dsw#&Ywx#*tx!^#&Y!^!_#,s!_#O#&Y#O#P#(f#P#o#&Y#o#p#,s#p;'S#&Y;'S;=`#-r<%lO#&Y(Bb#'m]$d&j'z!bR(;dOY#'dYZ&cZw#'dwx#(fx!^#'d!^!_#)w!_#O#'d#O#P#(f#P#o#'d#o#p#)w#p;'S#'d;'S;=`#*n<%lO#'d(AO#(mX$d&jR(;dOY#(fYZ&cZ!^#(f!^!_#)Y!_#o#(f#o#p#)Y#p;'S#(f;'S;=`#)q<%lO#(f(;d#)_SR(;dOY#)YZ;'S#)Y;'S;=`#)k<%lO#)Y(;d#)nP;=`<%l#)Y(AO#)tP;=`<%l#(f(<v#*OW'z!bR(;dOY#)wZw#)wwx#)Yx#O#)w#O#P#)Y#P;'S#)w;'S;=`#*h<%lO#)w(<v#*kP;=`<%l#)w(Bb#*qP;=`<%l#'d(Ap#*}]$d&j'wpR(;dOY#*tYZ&cZr#*trs#(fs!^#*t!^!_#+v!_#O#*t#O#P#(f#P#o#*t#o#p#+v#p;'S#*t;'S;=`#,m<%lO#*t(<U#+}W'wpR(;dOY#+vZr#+vrs#)Ys#O#+v#O#P#)Y#P;'S#+v;'S;=`#,g<%lO#+v(<U#,jP;=`<%l#+v(Ap#,pP;=`<%l#*t(=h#,|Y'wp'z!bR(;dOY#,sZr#,srs#)wsw#,swx#+vx#O#,s#O#P#)Y#P;'S#,s;'S;=`#-l<%lO#,s(=h#-oP;=`<%l#,s(CS#-uP;=`<%l#&Y%#W#.Vb$d&j#{$Id'wp'z!b!RSOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}x!P!3h!P!Q!Kh!Q!^!3h!^!_!Mh!_!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h+h#/lb$T#t$d&j'wp'z!b!RSOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}x!P!3h!P!Q!Kh!Q!^!3h!^!_!Mh!_!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h$/l#1Pp$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!+g!P!Q%Z!Q![#3T![!^%Z!^!_*g!_!g%Z!g!h!-Z!h#O%Z#O#P&c#P#R%Z#R#S#3T#S#U%Z#U#V#6_#V#X%Z#X#Y!-Z#Y#b%Z#b#c#5T#c#d#9g#d#l%Z#l#m#<i#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#3`k$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!+g!P!Q%Z!Q![#3T![!^%Z!^!_*g!_!g%Z!g!h!-Z!h#O%Z#O#P&c#P#R%Z#R#S#3T#S#X%Z#X#Y!-Z#Y#b%Z#b#c#5T#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#5`_$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#6hd$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#7v!R!S#7v!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#7v#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#8Rf$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#7v!R!S#7v!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#7v#S#b%Z#b#c#5T#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#9pc$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#:{!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#:{#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#;We$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#:{!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#:{#S#b%Z#b#c#5T#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#<rg$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#>Z![!^%Z!^!_*g!_!c%Z!c!i#>Z!i#O%Z#O#P&c#P#R%Z#R#S#>Z#S#T%Z#T#Z#>Z#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#>fi$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#>Z![!^%Z!^!_*g!_!c%Z!c!i#>Z!i#O%Z#O#P&c#P#R%Z#R#S#>Z#S#T%Z#T#Z#>Z#Z#b%Z#b#c#5T#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%Gh#@b_!a$b$d&j#y%<f'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Al_^l$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS#Bz^'}!*v!e'.r'wp'z!b$U)d(mSOY*gZr*grs'}sw*gwx)rx!P*g!P!Q#Cv!Q!^*g!^!_#Dl!_!`#F^!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#DPX$f&j'wp'z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#DuZ#k$Id'wp'z!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Eh!`#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#EqX#{$Id'wp'z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#FgX#l$Id'wp'z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g%Gh#G_a#X%?x$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a#Hd!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#W#Ho_#d$Ih$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%Gh#I}adBf#l$Id$a#|$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`#KS!`!a#L^!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S#K__#l$Id$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S#Lia#k$Id$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`!a#Mn!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S#My`#k$Id$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+h$ Wc(a$Ip$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P$!c!P!^%Z!^!_*g!_!a%Z!a!b$#m!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+`$!n_z'#p$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$#x`$d&j#v$Id'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&^$%V_!x!Ln$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(@^$&a_|(8n$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$'eZ$d&jO!^$(W!^!_$(n!_#i$(W#i#j$(s#j#l$(W#l#m$*f#m#o$(W#o#p$(n#p;'S$(W;'S;=`$,q<%lO$(W(n$(_T[#S$d&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$(sO[#S(n$(x[$d&jO!Q&c!Q![$)n![!^&c!_!c&c!c!i$)n!i#T&c#T#Z$)n#Z#o&c#o#p$,U#p;'S&c;'S;=`&w<%lO&c(n$)sZ$d&jO!Q&c!Q![$*f![!^&c!_!c&c!c!i$*f!i#T&c#T#Z$*f#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$*kZ$d&jO!Q&c!Q![$+^![!^&c!_!c&c!c!i$+^!i#T&c#T#Z$+^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$+cZ$d&jO!Q&c!Q![$(W![!^&c!_!c&c!c!i$(W!i#T&c#T#Z$(W#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$,XR!Q![$,b!c!i$,b#T#Z$,b#S$,eS!Q![$,b!c!i$,b#T#Z$,b#q#r$(n(n$,tP;=`<%l$(W!'l$-S_!SM|$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$.^`#s$Id$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&,v$/k_$d&j'wp'z!b(R&%WOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS$0yk$d&j'wp'z!b(U!LY't&;d$Y#tOY%ZYZ&cZr%Zrs&}st%Ztu$0juw%Zwx(rx}%Z}!O$2n!O!Q%Z!Q![$0j![!^%Z!^!_*g!_!c%Z!c!}$0j!}#O%Z#O#P&c#P#R%Z#R#S$0j#S#T%Z#T#o$0j#o#p*g#p$g%Z$g;'S$0j;'S;=`$4t<%lO$0j+d$2yk$d&j'wp'z!b$Y#tOY%ZYZ&cZr%Zrs&}st%Ztu$2nuw%Zwx(rx}%Z}!O$2n!O!Q%Z!Q![$2n![!^%Z!^!_*g!_!c%Z!c!}$2n!}#O%Z#O#P&c#P#R%Z#R#S$2n#S#T%Z#T#o$2n#o#p*g#p$g%Z$g;'S$2n;'S;=`$4n<%lO$2n+d$4qP;=`<%l$2n(CS$4wP;=`<%l$0j!5p$5TX!X!3l'wp'z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g%Df$5{a(h%<v$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$#m#q;'S%Z;'S;=`+a<%lO%Z%#`$7__!W$I`o`$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(r$8i_!mS$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS$9y|$d&j'wp'z!b'm(;d(U!LY't&;d$W#tOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%Ztu>Puw%Zwx(rx}%Z}!O@T!O!Q%Z!Q![>P![!^%Z!^!_*g!_!c%Z!c!}>P!}#O%Z#O#P&c#P#R%Z#R#S>P#S#T%Z#T#o>P#o#p*g#p$f%Z$f$g+g$g#BY>P#BY#BZ$9h#BZ$IS>P$IS$I_$9h$I_$JT>P$JT$JU$9h$JU$KV>P$KV$KW$9h$KW&FU>P&FU&FV$9h&FV;'S>P;'S;=`BZ<%l?HT>P?HT?HU$9h?HUO>P(CS$=Uk$d&j'wp'z!b'n(;d(U!LY't&;d$W#tOY%ZYZ&cZr%Zrs&}st%Ztu>Puw%Zwx(rx}%Z}!O@T!O!Q%Z!Q![>P![!^%Z!^!_*g!_!c%Z!c!}>P!}#O%Z#O#P&c#P#R%Z#R#S>P#S#T%Z#T#o>P#o#p*g#p$g%Z$g;'S>P;'S;=`BZ<%lO>P",tokenizers:[noSemicolon,incdecToken,2,3,4,5,6,7,8,9,10,11,12,13,insertSemicolon,new LocalTokenGroup("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOq~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!O~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(T~~",141,326),new LocalTokenGroup("j~RQYZXz{^~^O'q~~aP!P!Qd~iO'r~~",25,308)],topRules:{Script:[0,5],SingleExpression:[1,267],SingleClassItem:[2,268]},dialects:{jsx:13525,ts:13527},dynamicPrecedences:{76:1,78:1,163:1,191:1},specialized:[{term:312,get:ft=>spec_identifier[ft]||-1},{term:328,get:ft=>spec_word[ft]||-1},{term:67,get:ft=>spec_LessThan[ft]||-1}],tokenPrec:13551}),snippets=[snippetCompletion("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),snippetCompletion("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),snippetCompletion("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),snippetCompletion("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),snippetCompletion("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),snippetCompletion(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),snippetCompletion("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),snippetCompletion(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),snippetCompletion(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),snippetCompletion('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),snippetCompletion('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],cache=new NodeWeakMap,ScopeNodes=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function defID(ft){return(lt,dt)=>{let vt=lt.node.getChild("VariableDefinition");return vt&&dt(vt,ft),!0}}const functionContext=["FunctionDeclaration"],gatherCompletions={FunctionDeclaration:defID("function"),ClassDeclaration:defID("class"),ClassExpression:()=>!0,EnumDeclaration:defID("constant"),TypeAliasDeclaration:defID("type"),NamespaceDeclaration:defID("namespace"),VariableDefinition(ft,lt){ft.matchContext(functionContext)||lt(ft,"variable")},TypeDefinition(ft,lt){lt(ft,"type")},__proto__:null};function getScope(ft,lt){let dt=cache.get(lt);if(dt)return dt;let vt=[],Tt=!0;function Et(Ct,Rt){let kt=ft.sliceString(Ct.from,Ct.to);vt.push({label:kt,type:Rt})}return lt.cursor(IterMode.IncludeAnonymous).iterate(Ct=>{if(Tt)Tt=!1;else if(Ct.name){let Rt=gatherCompletions[Ct.name];if(Rt&&Rt(Ct,Et)||ScopeNodes.has(Ct.name))return!1}else if(Ct.to-Ct.from>8192){for(let Rt of getScope(ft,Ct.node))vt.push(Rt);return!1}}),cache.set(lt,vt),vt}const Identifier=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,dontComplete=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName"];function localCompletionSource(ft){let lt=syntaxTree(ft.state).resolveInner(ft.pos,-1);if(dontComplete.indexOf(lt.name)>-1)return null;let dt=lt.name=="VariableName"||lt.to-lt.from<20&&Identifier.test(ft.state.sliceDoc(lt.from,lt.to));if(!dt&&!ft.explicit)return null;let vt=[];for(let Tt=lt;Tt;Tt=Tt.parent)ScopeNodes.has(Tt.name)&&(vt=vt.concat(getScope(ft.state.doc,Tt)));return{options:vt,from:dt?lt.from:ft.pos,validFor:Identifier}}const javascriptLanguage=LRLanguage.define({name:"javascript",parser:parser.configure({props:[indentNodeProp.add({IfStatement:continuedIndent({except:/^\s*({|else\b)/}),TryStatement:continuedIndent({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:flatIndent,SwitchBody:ft=>{let lt=ft.textAfter,dt=/^\s*\}/.test(lt),vt=/^\s*(case|default)\b/.test(lt);return ft.baseIndent+(dt?0:vt?1:2)*ft.unit},Block:delimitedIndent({closing:"}"}),ArrowFunction:ft=>ft.baseIndent+ft.unit,"TemplateString BlockComment":()=>null,"Statement Property":continuedIndent({except:/^{/}),JSXElement(ft){let lt=/^\s*<\//.test(ft.textAfter);return ft.lineIndent(ft.node.from)+(lt?0:ft.unit)},JSXEscape(ft){let lt=/\s*\}/.test(ft.textAfter);return ft.lineIndent(ft.node.from)+(lt?0:ft.unit)},"JSXOpenTag JSXSelfClosingTag"(ft){return ft.column(ft.node.from)+ft.unit}}),foldNodeProp.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":foldInside,BlockComment(ft){return{from:ft.from+2,to:ft.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),jsxSublanguage={test:ft=>/^JSX/.test(ft.name),facet:defineLanguageFacet({commentTokens:{block:{open:"{/*",close:"*/}"}}})},typescriptLanguage=javascriptLanguage.configure({dialect:"ts"},"typescript"),jsxLanguage=javascriptLanguage.configure({dialect:"jsx",props:[sublanguageProp.add(ft=>ft.isTop?[jsxSublanguage]:void 0)]}),tsxLanguage=javascriptLanguage.configure({dialect:"jsx ts",props:[sublanguageProp.add(ft=>ft.isTop?[jsxSublanguage]:void 0)]},"typescript"),keywords="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(ft=>({label:ft,type:"keyword"}));function javascript(ft={}){let lt=ft.jsx?ft.typescript?tsxLanguage:jsxLanguage:ft.typescript?typescriptLanguage:javascriptLanguage;return new LanguageSupport(lt,[javascriptLanguage.data.of({autocomplete:ifNotIn(dontComplete,completeFromList(snippets.concat(keywords)))}),javascriptLanguage.data.of({autocomplete:localCompletionSource}),ft.jsx?autoCloseTags:[]])}function findOpenTag(ft){for(;;){if(ft.name=="JSXOpenTag"||ft.name=="JSXSelfClosingTag"||ft.name=="JSXFragmentTag")return ft;if(ft.name=="JSXEscape"||!ft.parent)return null;ft=ft.parent}}function elementName(ft,lt,dt=ft.length){for(let vt=lt==null?void 0:lt.firstChild;vt;vt=vt.nextSibling)if(vt.name=="JSXIdentifier"||vt.name=="JSXBuiltin"||vt.name=="JSXNamespacedName"||vt.name=="JSXMemberExpression")return ft.sliceString(vt.from,Math.min(vt.to,dt));return""}const android=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),autoCloseTags=EditorView.inputHandler.of((ft,lt,dt,vt)=>{if((android?ft.composing:ft.compositionStarted)||ft.state.readOnly||lt!=dt||vt!=">"&&vt!="/"||!javascriptLanguage.isActiveAt(ft.state,lt,-1))return!1;let{state:Tt}=ft,Et=Tt.changeByRange(Ct=>{var Rt,kt;let{head:Dt}=Ct,Bt=syntaxTree(Tt).resolveInner(Dt,-1),Ft;if(Bt.name=="JSXStartTag"&&(Bt=Bt.parent),vt==">"&&Bt.name=="JSXFragmentTag")return{range:EditorSelection.cursor(Dt+1),changes:{from:Dt,insert:"></>"}};if(vt=="/"&&Bt.name=="JSXFragmentTag"){let Ut=Bt.parent,Zt=Ut==null?void 0:Ut.parent;if(Ut.from==Dt-1&&((Rt=Zt.lastChild)===null||Rt===void 0?void 0:Rt.name)!="JSXEndTag"&&(Ft=elementName(Tt.doc,Zt==null?void 0:Zt.firstChild,Dt))){let Kt=`/${Ft}>`;return{range:EditorSelection.cursor(Dt+Kt.length),changes:{from:Dt,insert:Kt}}}}else if(vt==">"){let Ut=findOpenTag(Bt);if(Ut&&((kt=Ut.lastChild)===null||kt===void 0?void 0:kt.name)!="JSXEndTag"&&Tt.sliceDoc(Dt,Dt+2)!="</"&&(Ft=elementName(Tt.doc,Ut,Dt)))return{range:EditorSelection.cursor(Dt+1),changes:{from:Dt,insert:`></${Ft}>`}}}return{range:Ct}});return Et.changes.empty?!1:(ft.dispatch(Et,{userEvent:"input.type",scrollIntoView:!0}),!0)}),BlockJavaScriptCodePanel=()=>{const ft=useRobartState(dt=>dt.editingBlockId),lt=useRobartState(dt=>dt.blocks[ft??""]);return jsx("div",{className:"h-full w-full",children:jsx(ReactCodeMirror,{value:lt==null?void 0:lt.javaScript,className:"h-full w-full",extensions:[javascript()],readOnly:!0})})},RightPanel=()=>{const[ft,lt]=reactExports.useState("simulation");return jsx(Fragment,{children:jsxs("div",{className:"flex flex-col gap-2 h-full",children:[jsx("div",{children:jsxs(Button.Group,{children:[jsx(Button,{color:ft=="simulation"?"blue":"gray",onClick:()=>lt("simulation"),children:"Simulation"}),jsx(Button,{color:ft=="python"?"blue":"gray",onClick:()=>lt("python"),children:"Python Code"}),jsx(Button,{color:ft=="javascript"?"blue":"gray",onClick:()=>lt("javascript"),children:"JavaScript Code"})]})}),jsxs("div",{className:"flex-grow h-full",children:[ft=="simulation"&&jsx(SimulationPanel,{}),ft=="python"&&jsx(BlockPythonCodePanel,{}),ft=="javascript"&&jsx(BlockJavaScriptCodePanel,{})]})]})})},HoverTimelineBlock=({scale:ft,startTime:lt,isOverlapping:dt})=>{const vt=useRobartState(Et=>Et.editingBlockId),Tt=useRobartState(Et=>Et.blocks[vt??""]);return lt===void 0||!vt?jsx(Fragment,{}):jsx("div",{className:clsx("absolute top-1/2 flex h-5/6 -translate-y-1/2 items-center justify-center rounded-xl border border-dashed",dt?"border-red-500/50 bg-red-300/50 text-red-500/50":"border-green-500/50 bg-green-300/50 text-green-500/50"),style:{width:PIXELS_PER_SECOND*ft*Tt.duration,left:PIXELS_PER_SECOND*ft*lt},children:dt?jsx(FontAwesomeIcon,{icon:faXmarkCircle}):jsx(FontAwesomeIcon,{icon:faPlusCircle})})},TimelineBlock=({item:ft,scale:lt})=>{const dt=useRobartState(Bt=>Bt.blocks),vt=useRobartState(Bt=>Bt.removeTimelineItem),Tt=useRobartState(Bt=>Bt.timelineState.groups),Et=useRobartState(Bt=>Bt.updateBlockInTimeline),Ct=useRobartState(Bt=>Bt.timelineState.mode),Rt=dt[ft.blockId],kt=useDrag(({delta:[Bt,Ft]})=>{if(Ct!=="MOVE")return;const Ut=convertPixelsToSeconds(Bt,lt),Zt=ft.startTime+Ut;blockOverlaps(Tt[ft.groupId],dt,Zt,Rt)||Et(ft.groupId,ft.id,Zt)}),Dt=ft.duration;return jsx("div",{className:clsx("absolute top-1/2 flex h-5/6 -translate-y-1/2 items-center justify-center rounded-xl bg-purple-400 touch-none select-none",Ct==="MOVE"?"cursor-move":"",Ct==="ERASE"?"hover:bg-red-400":""),style:{width:PIXELS_PER_SECOND*lt*Dt,left:PIXELS_PER_SECOND*lt*ft.startTime},onClick:()=>Ct==="ERASE"&&vt(ft.groupId,ft.id),...kt(),children:jsx("span",{className:"block overflow-hidden text-ellipsis whitespace-nowrap",children:Rt.name})})},PIXELS_PER_SECOND=25,blockOverlaps=(ft,lt,dt,vt,Tt)=>dt===void 0||dt<0||Object.values(ft.items).some(Et=>{const Ct=Et.startTime,Rt=Et.startTime+lt[Et.blockId].duration,kt=dt,Dt=dt+vt.duration;return Tt!==void 0&&Tt===Et.id?!1:!(Rt<kt||Dt<Ct)}),convertPixelsToSeconds=(ft,lt)=>ft/(PIXELS_PER_SECOND*lt),TimelineGroupBody=({group:ft})=>{const lt=reactExports.useRef(null),dt=useRobartState(Ft=>Ft.timelineState.scale),vt=useRobartState(Ft=>Ft.addBlockToTimeline),Tt=useRobartState(Ft=>Ft.editingBlockId),Et=useRobartState(Ft=>Ft.blocks),Ct=useRobartState(Ft=>Ft.timelineState.mode),[Rt,kt]=reactExports.useState(),Dt=useGesture({onMouseOut:()=>kt(void 0),onMouseMove:({event:{clientX:Ft}})=>{kt(Ft)}}),Bt=Ft=>{var Ut,Zt;if(Ft!==void 0&&lt.current){const Kt=(Ut=lt.current.offsetParent)==null?void 0:Ut.offsetLeft,ln=(Zt=lt.current.parentElement)==null?void 0:Zt.scrollLeft,hn=Ft-Kt;return Tt===void 0||ln===void 0?void 0:(hn+ln)/(PIXELS_PER_SECOND*dt)-Et[Tt].duration/2}};return jsxs("div",{className:"relative h-16 rounded bg-blue-300",style:{width:2e3},ref:lt,onClick:({clientX:Ft})=>{if(Tt===void 0||Ct!=="ADD")return;const Ut=Bt(Ft);Ut!==void 0&&!blockOverlaps(ft,Et,Ut,Et[Tt])&&vt(ft.id,Tt,Ut,!1)},...Dt(),children:[Object.values(ft.items).map((Ft,Ut)=>jsx(TimelineBlock,{scale:dt,item:Ft},Ut)),Ct==="ADD"&&jsx(HoverTimelineBlock,{scale:dt,startTime:Bt(Rt),isOverlapping:blockOverlaps(ft,Et,Bt(Rt),Et[Tt??""])})]})},TimelineMarker=()=>{const ft=useSimulator(lt=>lt.time);return jsx("div",{className:"min-w-1 absolute z-10 h-full w-1 bg-black",style:{left:PIXELS_PER_SECOND*ft}})},TimelineGroupLabel=({group:ft})=>jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded bg-green-400",children:jsx("div",{className:"text-center font-bold",children:ft.name})}),useRobotManager=create$2()(immer((ft,lt)=>({selectedRobotId:void 0,showRenameInput:!1,setSelectedRobotId:dt=>{ft({selectedRobotId:dt})},openRenameInput:()=>{ft({showRenameInput:!0})},closeRenameInput:()=>{ft({showRenameInput:!1})}}))),RobotGroupEditor=()=>{const ft=useRobartState(Tt=>Tt.timelineState.groups),lt=useRobotManager(Tt=>Tt.selectedRobotId),dt=useRobartState(Tt=>Tt.addRobotToGroup),vt=useRobartState(Tt=>Tt.removeRobotFromGroup);return lt===void 0?jsx(Fragment,{}):jsxs("div",{className:"flex flex-col gap-2",children:[jsxs("div",{className:"flex items-center gap-2",children:[jsx("h3",{className:"text-lg font-extrabold",children:"Add Group"}),jsx(Dropdown,{label:jsx(FontAwesomeIcon,{icon:faPlusCircle}),size:"sm",arrowIcon:!1,children:Object.values(ft).filter(Tt=>!(lt in Tt.robots)).map(Tt=>jsx(Dropdown.Item,{onClick:()=>{dt(Tt.id,lt)},children:Tt.name},Tt.id))})]}),jsx("div",{className:"flex items-center gap-2",children:Object.values(ft).filter(Tt=>lt in Tt.robots).map(Tt=>jsx(Badge,{color:"purple",className:"bg-purple-100",onClick:()=>vt(Tt.id,lt),children:ft[Tt.id].name},Tt.id))})]})},StartingPositionEditor=({robotId:ft})=>{const lt=useRobartState(Ct=>Ct.robots[ft]),dt=useRobartState(Ct=>Ct.saveRobot),[vt,Tt]=reactExports.useState([lt.startingPosition[0].toString(),lt.startingPosition[1].toString(),lt.startingPosition[2].toString()]),Et=Ct=>{Ct.preventDefault();const Rt=parseFloat(vt[0]),kt=parseFloat(vt[1]),Dt=parseFloat(vt[2]);isNaN(Rt)||isNaN(kt)||isNaN(Dt)||dt(ft,{startingPosition:[Rt,kt,Dt]})};return jsxs("div",{children:[jsx("h3",{className:"ml-3 mt-3 text-lg font-extrabold",children:"Starting Position:"}),jsx("div",{className:"flex",children:jsxs("form",{onSubmit:Et,className:"flex flex-col gap-2",children:[jsxs("div",{className:clsx("flex flex-col items-center",isNaN(parseFloat(vt[0]))?"border-red-500":""),children:[jsx(TextInput,{id:"x-coordinate",value:vt[0],onChange:Ct=>Tt(([Rt,kt,Dt])=>[Ct.target.value,kt,Dt])}),jsx(Label,{htmlFor:"x-coordinate",className:isNaN(parseFloat(vt[0]))?"text-red-500":"",children:"x"})]}),jsxs("div",{className:clsx("flex flex-col items-center",isNaN(parseFloat(vt[0]))?"text-red-500":""),children:[jsx(TextInput,{id:"y-coordinate",value:vt[1],onChange:Ct=>Tt(([Rt,kt,Dt])=>[Rt,Ct.target.value,Dt])}),jsx(Label,{htmlFor:"y-coordinate",className:isNaN(parseFloat(vt[1]))?"text-red-500":"",children:"y"})]}),jsxs("div",{className:clsx("flex flex-col items-center",isNaN(parseFloat(vt[2]))?"border-red-500":""),children:[jsx(TextInput,{id:"z-coordinate",value:vt[2],onChange:Ct=>Tt(([Rt,kt,Dt])=>[Rt,kt,Ct.target.value])}),jsx(Label,{htmlFor:"z-coordinate",className:isNaN(parseFloat(vt[2]))?"text-red-500":"",children:"z"})]}),jsx(IconButton,{className:"w-full",icon:faArrowsRotate,text:"Update Position",onClick:Et,type:"submit"})]})})]})},RobotEditor=()=>{const ft=useRobartState(Ct=>Ct.robots),lt=useRobartState(Ct=>Ct.saveRobot),dt=useRobartState(Ct=>Ct.deleteRobot),vt=useRobotManager(Ct=>Ct.selectedRobotId),Tt=useRobotManager(Ct=>Ct.setSelectedRobotId);if(reactExports.useEffect(()=>{vt===void 0&&Object.values(ft).length!==0&&Tt(Object.keys(ft)[0])},[vt,ft]),vt===void 0)return jsx(Fragment,{});const Et=ft[vt];return jsxs("div",{className:"relative flex basis-4/5 flex-col p-4",children:[jsx(RenamableText,{text:Et.name,className:"text-4xl font-extrabold",updateText:Ct=>Ct!==""?lt(vt,{name:Ct}):lt(vt,{name:"Unnamed Robot"})}),jsxs("div",{className:"flex flex-col gap-10",children:[jsx(StartingPositionEditor,{robotId:vt}),jsx(RobotGroupEditor,{})]},vt),jsx(IconButton,{className:"absolute bottom-0",onClick:()=>{const Ct=vt;Tt(void 0),dt(Ct)},text:"Delete Robot",icon:faTrash,color:"failure"})]})},RobotSidebar=()=>{const ft=useRobartState(Tt=>Tt.robots),lt=useRobartState(Tt=>Tt.createRobot),dt=useRobotManager(Tt=>Tt.setSelectedRobotId),vt=useRobotManager(Tt=>Tt.closeRenameInput);return jsxs("div",{className:"flex flex-grow-0 basis-[10%] flex-col items-center gap-2 overflow-y-auto p-4",children:[jsx("h2",{className:"text-lg font-extrabold",children:"Robots"}),Object.values(ft).map(Tt=>jsx("button",{className:"flex h-8 w-full cursor-pointer items-center justify-center rounded-lg border-2 border-black px-2 text-center",onClick:()=>{vt(),dt(Tt.id)},children:jsx("span",{className:"overflow-hidden overflow-ellipsis whitespace-nowrap",children:Tt.name})},Tt.id)),jsx(IconButton,{icon:faPlusCircle,text:"",onClick:()=>{const Tt=lt();dt(Tt)}})]})},RobotManager=()=>jsxs("div",{className:"flex h-full",children:[jsx(RobotSidebar,{}),jsx(RobotEditor,{})]}),RobotManagerModal=()=>{const ft=useUIState(dt=>dt.robotManagerModalOpen),lt=useUIState(dt=>dt.toggleRobotManager);return jsxs(Modal,{show:ft,onClose:lt,className:"!w-full",size:"w-full h-5/6",children:[jsx(Modal.Header,{children:"Robot Manager"}),jsx(Modal.Body,{className:"h-[80vh]",children:jsx(RobotManager,{})}),jsx(Modal.Footer,{})]})},Timeline=()=>{const ft=useRobartState(Bt=>Bt.timelineState),lt=Object.values(ft.groups),dt=useRobartState(Bt=>Bt.timelineState.mode),vt=useRobartState(Bt=>Bt.setTimelineMode),Tt=useUIState(Bt=>Bt.toggleRobotManager),Et=useSimulator(Bt=>Bt.status),Ct=useSimulator(Bt=>Bt.play),Rt=useSimulator(Bt=>Bt.halt),kt=useSimulator(Bt=>Bt.pause),Dt=useSimulator(Bt=>Bt.resume);return jsxs("div",{className:"flex h-full w-full flex-col gap-2 rounded bg-blue-100",children:[jsxs("div",{className:"flex",children:[jsx("div",{className:"flex gap-3 pt-2 pl-3",children:jsxs(Button.Group,{children:[jsx(Button,{color:dt==="ADD"?"info":"gray",onClick:()=>vt("ADD"),children:jsx(FontAwesomeIcon,{icon:faPlusCircle})}),jsx(Button,{color:dt==="MOVE"?"info":"gray",onClick:()=>vt("MOVE"),children:jsx(FontAwesomeIcon,{icon:faArrowsLeftRight})}),jsx(Button,{color:dt==="ERASE"?"info":"gray",onClick:()=>vt("ERASE"),children:jsx(FontAwesomeIcon,{icon:faEraser})})]})}),jsx("div",{className:"flex flex-grow"}),jsxs("div",{className:"flex gap-3 pt-2 pr-3",children:[jsx(IconButton,{icon:faRobot,onClick:Tt,text:"Manage Robots"}),jsx(RobotManagerModal,{}),Et==="RUNNING"&&jsx(IconButton,{icon:faPause,onClick:kt,text:"Pause Sim",color:"gray"}),Et==="PAUSED"&&jsx(IconButton,{icon:faPlay,onClick:Dt,text:"Resume Sim",color:"success"}),Et==="STOPPED"&&jsx(IconButton,{icon:faPlay,onClick:Ct,text:"Run Sim",color:"success"}),Et!=="STOPPED"&&jsx(IconButton,{icon:faSquare,onClick:Rt,text:"Stop Sim",color:"failure"})]})]}),jsx("div",{className:"overflow-y-auto",children:jsxs("div",{className:"flex flex-shrink-0 gap-2",children:[jsx("div",{className:"ml-2 flex h-full flex-col gap-2",children:lt.map(Bt=>jsx(TimelineGroupLabel,{group:Bt},Bt.id))}),jsxs("div",{className:"relative flex h-full flex-col gap-2 overflow-x-auto",children:[lt.map(Bt=>jsx(TimelineGroupBody,{group:Bt},Bt.id)),jsx(TimelineMarker,{})]})]})})]})};function App(){return jsx(Fragment,{children:jsxs("div",{className:"flex h-screen w-screen flex-col gap-1",children:[jsx(NavigationBar,{}),jsx("div",{className:"flex flex-grow",children:jsxs($3daa5d4c086ea816$export$1d05749f6f573bb,{direction:"vertical",children:[jsx($c33df6d7c39fd3ee$export$2ddb90ad54e5f587,{defaultSize:60,onResize:()=>window.dispatchEvent(new Event("resize")),children:jsxs($3daa5d4c086ea816$export$1d05749f6f573bb,{direction:"horizontal",children:[jsx($c33df6d7c39fd3ee$export$2ddb90ad54e5f587,{defaultSize:50,onResize:()=>window.dispatchEvent(new Event("resize")),children:jsx(BlockEditorPanel,{})}),jsx($971f2c37f9d2b98e$export$8829ecf6b6b15484,{className:"w-2 bg-blue-50 opacity-30 shadow-lg"}),jsx($c33df6d7c39fd3ee$export$2ddb90ad54e5f587,{defaultSize:50,children:jsx(RightPanel,{})})]})}),jsx($971f2c37f9d2b98e$export$8829ecf6b6b15484,{className:"h-2 bg-blue-50 opacity-30 shadow-lg"}),jsx($c33df6d7c39fd3ee$export$2ddb90ad54e5f587,{defaultSize:40,children:jsxs($3daa5d4c086ea816$export$1d05749f6f573bb,{direction:"horizontal",children:[jsx($c33df6d7c39fd3ee$export$2ddb90ad54e5f587,{defaultSize:20,children:jsx(BlockManagerPanel,{})}),jsx($971f2c37f9d2b98e$export$8829ecf6b6b15484,{className:"w-2 bg-blue-50 opacity-30 shadow-lg"}),jsx($c33df6d7c39fd3ee$export$2ddb90ad54e5f587,{children:jsx(Timeline,{})})]})})]})})]})})}const index="";client.createRoot(document.getElementById("root")).render(jsx(React.StrictMode,{children:jsx(App,{})}));
