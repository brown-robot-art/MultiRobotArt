var Bx=Object.defineProperty;var Fx=(dt,$,lt)=>$ in dt?Bx(dt,$,{enumerable:!0,configurable:!0,writable:!0,value:lt}):dt[$]=lt;var po=(dt,$,lt)=>(Fx(dt,typeof $!="symbol"?$+"":$,lt),lt);function _mergeNamespaces(dt,$){for(var lt=0;lt<$.length;lt++){const ft=$[lt];if(typeof ft!="string"&&!Array.isArray(ft)){for(const St in ft)if(St!=="default"&&!(St in dt)){const Tt=Object.getOwnPropertyDescriptor(ft,St);Tt&&Object.defineProperty(dt,St,Tt.get?Tt:{enumerable:!0,get:()=>ft[St]})}}}return Object.freeze(Object.defineProperty(dt,Symbol.toStringTag,{value:"Module"}))}(function(){const $=document.createElement("link").relList;if($&&$.supports&&$.supports("modulepreload"))return;for(const St of document.querySelectorAll('link[rel="modulepreload"]'))ft(St);new MutationObserver(St=>{for(const Tt of St)if(Tt.type==="childList")for(const Ct of Tt.addedNodes)Ct.tagName==="LINK"&&Ct.rel==="modulepreload"&&ft(Ct)}).observe(document,{childList:!0,subtree:!0});function lt(St){const Tt={};return St.integrity&&(Tt.integrity=St.integrity),St.referrerPolicy&&(Tt.referrerPolicy=St.referrerPolicy),St.crossOrigin==="use-credentials"?Tt.credentials="include":St.crossOrigin==="anonymous"?Tt.credentials="omit":Tt.credentials="same-origin",Tt}function ft(St){if(St.ep)return;St.ep=!0;const Tt=lt(St);fetch(St.href,Tt)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(dt){return dt&&dt.__esModule&&Object.prototype.hasOwnProperty.call(dt,"default")?dt.default:dt}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$9=Symbol.for("react.element"),n$8=Symbol.for("react.portal"),p$a=Symbol.for("react.fragment"),q$5=Symbol.for("react.strict_mode"),r$9=Symbol.for("react.profiler"),t$5=Symbol.for("react.provider"),u$8=Symbol.for("react.context"),v$7=Symbol.for("react.forward_ref"),w$6=Symbol.for("react.suspense"),x$5=Symbol.for("react.memo"),y$6=Symbol.for("react.lazy"),z$5=Symbol.iterator;function A$4(dt){return dt===null||typeof dt!="object"?null:(dt=z$5&&dt[z$5]||dt["@@iterator"],typeof dt=="function"?dt:null)}var B$3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$4=Object.assign,D$6={};function E$7(dt,$,lt){this.props=dt,this.context=$,this.refs=D$6,this.updater=lt||B$3}E$7.prototype.isReactComponent={};E$7.prototype.setState=function(dt,$){if(typeof dt!="object"&&typeof dt!="function"&&dt!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,dt,$,"setState")};E$7.prototype.forceUpdate=function(dt){this.updater.enqueueForceUpdate(this,dt,"forceUpdate")};function F$2(){}F$2.prototype=E$7.prototype;function G$2(dt,$,lt){this.props=dt,this.context=$,this.refs=D$6,this.updater=lt||B$3}var H$5=G$2.prototype=new F$2;H$5.constructor=G$2;C$4(H$5,E$7.prototype);H$5.isPureReactComponent=!0;var I$4=Array.isArray,J$2=Object.prototype.hasOwnProperty,K$2={current:null},L$4={key:!0,ref:!0,__self:!0,__source:!0};function M$3(dt,$,lt){var ft,St={},Tt=null,Ct=null;if($!=null)for(ft in $.ref!==void 0&&(Ct=$.ref),$.key!==void 0&&(Tt=""+$.key),$)J$2.call($,ft)&&!L$4.hasOwnProperty(ft)&&(St[ft]=$[ft]);var At=arguments.length-2;if(At===1)St.children=lt;else if(1<At){for(var Rt=Array(At),kt=0;kt<At;kt++)Rt[kt]=arguments[kt+2];St.children=Rt}if(dt&&dt.defaultProps)for(ft in At=dt.defaultProps,At)St[ft]===void 0&&(St[ft]=At[ft]);return{$$typeof:l$9,type:dt,key:Tt,ref:Ct,props:St,_owner:K$2.current}}function N$3(dt,$){return{$$typeof:l$9,type:dt.type,key:$,ref:dt.ref,props:dt.props,_owner:dt._owner}}function O$5(dt){return typeof dt=="object"&&dt!==null&&dt.$$typeof===l$9}function escape$1(dt){var $={"=":"=0",":":"=2"};return"$"+dt.replace(/[=:]/g,function(lt){return $[lt]})}var P$4=/\/+/g;function Q$5(dt,$){return typeof dt=="object"&&dt!==null&&dt.key!=null?escape$1(""+dt.key):$.toString(36)}function R$4(dt,$,lt,ft,St){var Tt=typeof dt;(Tt==="undefined"||Tt==="boolean")&&(dt=null);var Ct=!1;if(dt===null)Ct=!0;else switch(Tt){case"string":case"number":Ct=!0;break;case"object":switch(dt.$$typeof){case l$9:case n$8:Ct=!0}}if(Ct)return Ct=dt,St=St(Ct),dt=ft===""?"."+Q$5(Ct,0):ft,I$4(St)?(lt="",dt!=null&&(lt=dt.replace(P$4,"$&/")+"/"),R$4(St,$,lt,"",function(kt){return kt})):St!=null&&(O$5(St)&&(St=N$3(St,lt+(!St.key||Ct&&Ct.key===St.key?"":(""+St.key).replace(P$4,"$&/")+"/")+dt)),$.push(St)),1;if(Ct=0,ft=ft===""?".":ft+":",I$4(dt))for(var At=0;At<dt.length;At++){Tt=dt[At];var Rt=ft+Q$5(Tt,At);Ct+=R$4(Tt,$,lt,Rt,St)}else if(Rt=A$4(dt),typeof Rt=="function")for(dt=Rt.call(dt),At=0;!(Tt=dt.next()).done;)Tt=Tt.value,Rt=ft+Q$5(Tt,At++),Ct+=R$4(Tt,$,lt,Rt,St);else if(Tt==="object")throw $=String(dt),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(dt).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return Ct}function S$4(dt,$,lt){if(dt==null)return dt;var ft=[],St=0;return R$4(dt,ft,"","",function(Tt){return $.call(lt,Tt,St++)}),ft}function T$3(dt){if(dt._status===-1){var $=dt._result;$=$(),$.then(function(lt){(dt._status===0||dt._status===-1)&&(dt._status=1,dt._result=lt)},function(lt){(dt._status===0||dt._status===-1)&&(dt._status=2,dt._result=lt)}),dt._status===-1&&(dt._status=0,dt._result=$)}if(dt._status===1)return dt._result.default;throw dt._result}var U$3={current:null},V$4={transition:null},W$5={ReactCurrentDispatcher:U$3,ReactCurrentBatchConfig:V$4,ReactCurrentOwner:K$2};react_production_min.Children={map:S$4,forEach:function(dt,$,lt){S$4(dt,function(){$.apply(this,arguments)},lt)},count:function(dt){var $=0;return S$4(dt,function(){$++}),$},toArray:function(dt){return S$4(dt,function($){return $})||[]},only:function(dt){if(!O$5(dt))throw Error("React.Children.only expected to receive a single React element child.");return dt}};react_production_min.Component=E$7;react_production_min.Fragment=p$a;react_production_min.Profiler=r$9;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$5;react_production_min.Suspense=w$6;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$5;react_production_min.cloneElement=function(dt,$,lt){if(dt==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+dt+".");var ft=C$4({},dt.props),St=dt.key,Tt=dt.ref,Ct=dt._owner;if($!=null){if($.ref!==void 0&&(Tt=$.ref,Ct=K$2.current),$.key!==void 0&&(St=""+$.key),dt.type&&dt.type.defaultProps)var At=dt.type.defaultProps;for(Rt in $)J$2.call($,Rt)&&!L$4.hasOwnProperty(Rt)&&(ft[Rt]=$[Rt]===void 0&&At!==void 0?At[Rt]:$[Rt])}var Rt=arguments.length-2;if(Rt===1)ft.children=lt;else if(1<Rt){At=Array(Rt);for(var kt=0;kt<Rt;kt++)At[kt]=arguments[kt+2];ft.children=At}return{$$typeof:l$9,type:dt.type,key:St,ref:Tt,props:ft,_owner:Ct}};react_production_min.createContext=function(dt){return dt={$$typeof:u$8,_currentValue:dt,_currentValue2:dt,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},dt.Provider={$$typeof:t$5,_context:dt},dt.Consumer=dt};react_production_min.createElement=M$3;react_production_min.createFactory=function(dt){var $=M$3.bind(null,dt);return $.type=dt,$};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(dt){return{$$typeof:v$7,render:dt}};react_production_min.isValidElement=O$5;react_production_min.lazy=function(dt){return{$$typeof:y$6,_payload:{_status:-1,_result:dt},_init:T$3}};react_production_min.memo=function(dt,$){return{$$typeof:x$5,type:dt,compare:$===void 0?null:$}};react_production_min.startTransition=function(dt){var $=V$4.transition;V$4.transition={};try{dt()}finally{V$4.transition=$}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(dt,$){return U$3.current.useCallback(dt,$)};react_production_min.useContext=function(dt){return U$3.current.useContext(dt)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(dt){return U$3.current.useDeferredValue(dt)};react_production_min.useEffect=function(dt,$){return U$3.current.useEffect(dt,$)};react_production_min.useId=function(){return U$3.current.useId()};react_production_min.useImperativeHandle=function(dt,$,lt){return U$3.current.useImperativeHandle(dt,$,lt)};react_production_min.useInsertionEffect=function(dt,$){return U$3.current.useInsertionEffect(dt,$)};react_production_min.useLayoutEffect=function(dt,$){return U$3.current.useLayoutEffect(dt,$)};react_production_min.useMemo=function(dt,$){return U$3.current.useMemo(dt,$)};react_production_min.useReducer=function(dt,$,lt){return U$3.current.useReducer(dt,$,lt)};react_production_min.useRef=function(dt){return U$3.current.useRef(dt)};react_production_min.useState=function(dt){return U$3.current.useState(dt)};react_production_min.useSyncExternalStore=function(dt,$,lt){return U$3.current.useSyncExternalStore(dt,$,lt)};react_production_min.useTransition=function(){return U$3.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$6=reactExports,k$4=Symbol.for("react.element"),l$8=Symbol.for("react.fragment"),m$6=Object.prototype.hasOwnProperty,n$7=f$6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$9={key:!0,ref:!0,__self:!0,__source:!0};function q$4(dt,$,lt){var ft,St={},Tt=null,Ct=null;lt!==void 0&&(Tt=""+lt),$.key!==void 0&&(Tt=""+$.key),$.ref!==void 0&&(Ct=$.ref);for(ft in $)m$6.call($,ft)&&!p$9.hasOwnProperty(ft)&&(St[ft]=$[ft]);if(dt&&dt.defaultProps)for(ft in $=dt.defaultProps,$)St[ft]===void 0&&(St[ft]=$[ft]);return{$$typeof:k$4,type:dt,key:Tt,ref:Ct,props:St,_owner:n$7.current}}reactJsxRuntime_production_min.Fragment=l$8;reactJsxRuntime_production_min.jsx=q$4;reactJsxRuntime_production_min.jsxs=q$4;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports;const Fragment=jsxRuntimeExports.Fragment,jsx=jsxRuntimeExports.jsx,jsxs=jsxRuntimeExports.jsxs;var client={},reactDom={exports:{}},reactDom_production_min={},scheduler$2={exports:{}},scheduler_production_min$2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(dt){function $(Ln,Un){var Vn=Ln.length;Ln.push(Un);e:for(;0<Vn;){var sr=Vn-1>>>1,In=Ln[sr];if(0<St(In,Un))Ln[sr]=Un,Ln[Vn]=In,Vn=sr;else break e}}function lt(Ln){return Ln.length===0?null:Ln[0]}function ft(Ln){if(Ln.length===0)return null;var Un=Ln[0],Vn=Ln.pop();if(Vn!==Un){Ln[0]=Vn;e:for(var sr=0,In=Ln.length,ir=In>>>1;sr<ir;){var pr=2*(sr+1)-1,Jn=Ln[pr],Pr=pr+1,br=Ln[Pr];if(0>St(Jn,Vn))Pr<In&&0>St(br,Jn)?(Ln[sr]=br,Ln[Pr]=Vn,sr=Pr):(Ln[sr]=Jn,Ln[pr]=Vn,sr=pr);else if(Pr<In&&0>St(br,Vn))Ln[sr]=br,Ln[Pr]=Vn,sr=Pr;else break e}}return Un}function St(Ln,Un){var Vn=Ln.sortIndex-Un.sortIndex;return Vn!==0?Vn:Ln.id-Un.id}if(typeof performance=="object"&&typeof performance.now=="function"){var Tt=performance;dt.unstable_now=function(){return Tt.now()}}else{var Ct=Date,At=Ct.now();dt.unstable_now=function(){return Ct.now()-At}}var Rt=[],kt=[],Nt=1,Bt=null,Ut=3,zt=!1,Zt=!1,ln=!1,cn=typeof setTimeout=="function"?setTimeout:null,hn=typeof clearTimeout=="function"?clearTimeout:null,pn=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function dn(Ln){for(var Un=lt(kt);Un!==null;){if(Un.callback===null)ft(kt);else if(Un.startTime<=Ln)ft(kt),Un.sortIndex=Un.expirationTime,$(Rt,Un);else break;Un=lt(kt)}}function gn(Ln){if(ln=!1,dn(Ln),!Zt)if(lt(Rt)!==null)Zt=!0,Qn(vn);else{var Un=lt(kt);Un!==null&&nr(gn,Un.startTime-Ln)}}function vn(Ln,Un){Zt=!1,ln&&(ln=!1,hn($n),$n=-1),zt=!0;var Vn=Ut;try{for(dn(Un),Bt=lt(Rt);Bt!==null&&(!(Bt.expirationTime>Un)||Ln&&!Pn());){var sr=Bt.callback;if(typeof sr=="function"){Bt.callback=null,Ut=Bt.priorityLevel;var In=sr(Bt.expirationTime<=Un);Un=dt.unstable_now(),typeof In=="function"?Bt.callback=In:Bt===lt(Rt)&&ft(Rt),dn(Un)}else ft(Rt);Bt=lt(Rt)}if(Bt!==null)var ir=!0;else{var pr=lt(kt);pr!==null&&nr(gn,pr.startTime-Un),ir=!1}return ir}finally{Bt=null,Ut=Vn,zt=!1}}var Tn=!1,Cn=null,$n=-1,xn=5,Rn=-1;function Pn(){return!(dt.unstable_now()-Rn<xn)}function Nn(){if(Cn!==null){var Ln=dt.unstable_now();Rn=Ln;var Un=!0;try{Un=Cn(!0,Ln)}finally{Un?Wn():(Tn=!1,Cn=null)}}else Tn=!1}var Wn;if(typeof pn=="function")Wn=function(){pn(Nn)};else if(typeof MessageChannel<"u"){var zn=new MessageChannel,Yn=zn.port2;zn.port1.onmessage=Nn,Wn=function(){Yn.postMessage(null)}}else Wn=function(){cn(Nn,0)};function Qn(Ln){Cn=Ln,Tn||(Tn=!0,Wn())}function nr(Ln,Un){$n=cn(function(){Ln(dt.unstable_now())},Un)}dt.unstable_IdlePriority=5,dt.unstable_ImmediatePriority=1,dt.unstable_LowPriority=4,dt.unstable_NormalPriority=3,dt.unstable_Profiling=null,dt.unstable_UserBlockingPriority=2,dt.unstable_cancelCallback=function(Ln){Ln.callback=null},dt.unstable_continueExecution=function(){Zt||zt||(Zt=!0,Qn(vn))},dt.unstable_forceFrameRate=function(Ln){0>Ln||125<Ln?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):xn=0<Ln?Math.floor(1e3/Ln):5},dt.unstable_getCurrentPriorityLevel=function(){return Ut},dt.unstable_getFirstCallbackNode=function(){return lt(Rt)},dt.unstable_next=function(Ln){switch(Ut){case 1:case 2:case 3:var Un=3;break;default:Un=Ut}var Vn=Ut;Ut=Un;try{return Ln()}finally{Ut=Vn}},dt.unstable_pauseExecution=function(){},dt.unstable_requestPaint=function(){},dt.unstable_runWithPriority=function(Ln,Un){switch(Ln){case 1:case 2:case 3:case 4:case 5:break;default:Ln=3}var Vn=Ut;Ut=Ln;try{return Un()}finally{Ut=Vn}},dt.unstable_scheduleCallback=function(Ln,Un,Vn){var sr=dt.unstable_now();switch(typeof Vn=="object"&&Vn!==null?(Vn=Vn.delay,Vn=typeof Vn=="number"&&0<Vn?sr+Vn:sr):Vn=sr,Ln){case 1:var In=-1;break;case 2:In=250;break;case 5:In=1073741823;break;case 4:In=1e4;break;default:In=5e3}return In=Vn+In,Ln={id:Nt++,callback:Un,priorityLevel:Ln,startTime:Vn,expirationTime:In,sortIndex:-1},Vn>sr?(Ln.sortIndex=Vn,$(kt,Ln),lt(Rt)===null&&Ln===lt(kt)&&(ln?(hn($n),$n=-1):ln=!0,nr(gn,Vn-sr))):(Ln.sortIndex=In,$(Rt,Ln),Zt||zt||(Zt=!0,Qn(vn))),Ln},dt.unstable_shouldYield=Pn,dt.unstable_wrapCallback=function(Ln){var Un=Ut;return function(){var Vn=Ut;Ut=Un;try{return Ln.apply(this,arguments)}finally{Ut=Vn}}}})(scheduler_production_min$2);scheduler$2.exports=scheduler_production_min$2;var schedulerExports$1=scheduler$2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports$1;function p$8(dt){for(var $="https://reactjs.org/docs/error-decoder.html?invariant="+dt,lt=1;lt<arguments.length;lt++)$+="&args[]="+encodeURIComponent(arguments[lt]);return"Minified React error #"+dt+"; visit "+$+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(dt,$){ha(dt,$),ha(dt+"Capture",$)}function ha(dt,$){for(ea[dt]=$,dt=0;dt<$.length;dt++)da.add($[dt])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(dt){return ja.call(ma,dt)?!0:ja.call(la,dt)?!1:ka.test(dt)?ma[dt]=!0:(la[dt]=!0,!1)}function pa(dt,$,lt,ft){if(lt!==null&&lt.type===0)return!1;switch(typeof $){case"function":case"symbol":return!0;case"boolean":return ft?!1:lt!==null?!lt.acceptsBooleans:(dt=dt.toLowerCase().slice(0,5),dt!=="data-"&&dt!=="aria-");default:return!1}}function qa(dt,$,lt,ft){if($===null||typeof $>"u"||pa(dt,$,lt,ft))return!0;if(ft)return!1;if(lt!==null)switch(lt.type){case 3:return!$;case 4:return $===!1;case 5:return isNaN($);case 6:return isNaN($)||1>$}return!1}function v$6(dt,$,lt,ft,St,Tt,Ct){this.acceptsBooleans=$===2||$===3||$===4,this.attributeName=ft,this.attributeNamespace=St,this.mustUseProperty=lt,this.propertyName=dt,this.type=$,this.sanitizeURL=Tt,this.removeEmptyString=Ct}var z$4={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(dt){z$4[dt]=new v$6(dt,0,!1,dt,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(dt){var $=dt[0];z$4[$]=new v$6($,1,!1,dt[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(dt){z$4[dt]=new v$6(dt,2,!1,dt.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(dt){z$4[dt]=new v$6(dt,2,!1,dt,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(dt){z$4[dt]=new v$6(dt,3,!1,dt.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(dt){z$4[dt]=new v$6(dt,3,!0,dt,null,!1,!1)});["capture","download"].forEach(function(dt){z$4[dt]=new v$6(dt,4,!1,dt,null,!1,!1)});["cols","rows","size","span"].forEach(function(dt){z$4[dt]=new v$6(dt,6,!1,dt,null,!1,!1)});["rowSpan","start"].forEach(function(dt){z$4[dt]=new v$6(dt,5,!1,dt.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(dt){return dt[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(dt){var $=dt.replace(ra,sa);z$4[$]=new v$6($,1,!1,dt,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(dt){var $=dt.replace(ra,sa);z$4[$]=new v$6($,1,!1,dt,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(dt){var $=dt.replace(ra,sa);z$4[$]=new v$6($,1,!1,dt,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(dt){z$4[dt]=new v$6(dt,1,!1,dt.toLowerCase(),null,!1,!1)});z$4.xlinkHref=new v$6("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(dt){z$4[dt]=new v$6(dt,1,!1,dt.toLowerCase(),null,!0,!0)});function ta(dt,$,lt,ft){var St=z$4.hasOwnProperty($)?z$4[$]:null;(St!==null?St.type!==0:ft||!(2<$.length)||$[0]!=="o"&&$[0]!=="O"||$[1]!=="n"&&$[1]!=="N")&&(qa($,lt,St,ft)&&(lt=null),ft||St===null?oa($)&&(lt===null?dt.removeAttribute($):dt.setAttribute($,""+lt)):St.mustUseProperty?dt[St.propertyName]=lt===null?St.type===3?!1:"":lt:($=St.attributeName,ft=St.attributeNamespace,lt===null?dt.removeAttribute($):(St=St.type,lt=St===3||St===4&&lt===!0?"":""+lt,ft?dt.setAttributeNS(ft,$,lt):dt.setAttribute($,lt))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(dt){return dt===null||typeof dt!="object"?null:(dt=Ja&&dt[Ja]||dt["@@iterator"],typeof dt=="function"?dt:null)}var A$3=Object.assign,La;function Ma(dt){if(La===void 0)try{throw Error()}catch(lt){var $=lt.stack.trim().match(/\n( *(at )?)/);La=$&&$[1]||""}return`
`+La+dt}var Na=!1;function Oa(dt,$){if(!dt||Na)return"";Na=!0;var lt=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if($)if($=function(){throw Error()},Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(kt){var ft=kt}Reflect.construct(dt,[],$)}else{try{$.call()}catch(kt){ft=kt}dt.call($.prototype)}else{try{throw Error()}catch(kt){ft=kt}dt()}}catch(kt){if(kt&&ft&&typeof kt.stack=="string"){for(var St=kt.stack.split(`
`),Tt=ft.stack.split(`
`),Ct=St.length-1,At=Tt.length-1;1<=Ct&&0<=At&&St[Ct]!==Tt[At];)At--;for(;1<=Ct&&0<=At;Ct--,At--)if(St[Ct]!==Tt[At]){if(Ct!==1||At!==1)do if(Ct--,At--,0>At||St[Ct]!==Tt[At]){var Rt=`
`+St[Ct].replace(" at new "," at ");return dt.displayName&&Rt.includes("<anonymous>")&&(Rt=Rt.replace("<anonymous>",dt.displayName)),Rt}while(1<=Ct&&0<=At);break}}}finally{Na=!1,Error.prepareStackTrace=lt}return(dt=dt?dt.displayName||dt.name:"")?Ma(dt):""}function Pa(dt){switch(dt.tag){case 5:return Ma(dt.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return dt=Oa(dt.type,!1),dt;case 11:return dt=Oa(dt.type.render,!1),dt;case 1:return dt=Oa(dt.type,!0),dt;default:return""}}function Qa(dt){if(dt==null)return null;if(typeof dt=="function")return dt.displayName||dt.name||null;if(typeof dt=="string")return dt;switch(dt){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof dt=="object")switch(dt.$$typeof){case Ca:return(dt.displayName||"Context")+".Consumer";case Ba:return(dt._context.displayName||"Context")+".Provider";case Da:var $=dt.render;return dt=dt.displayName,dt||(dt=$.displayName||$.name||"",dt=dt!==""?"ForwardRef("+dt+")":"ForwardRef"),dt;case Ga:return $=dt.displayName||null,$!==null?$:Qa(dt.type)||"Memo";case Ha:$=dt._payload,dt=dt._init;try{return Qa(dt($))}catch{}}return null}function Ra(dt){var $=dt.type;switch(dt.tag){case 24:return"Cache";case 9:return($.displayName||"Context")+".Consumer";case 10:return($._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return dt=$.render,dt=dt.displayName||dt.name||"",$.displayName||(dt!==""?"ForwardRef("+dt+")":"ForwardRef");case 7:return"Fragment";case 5:return $;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa($);case 8:return $===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof $=="function")return $.displayName||$.name||null;if(typeof $=="string")return $}return null}function Sa(dt){switch(typeof dt){case"boolean":case"number":case"string":case"undefined":return dt;case"object":return dt;default:return""}}function Ta(dt){var $=dt.type;return(dt=dt.nodeName)&&dt.toLowerCase()==="input"&&($==="checkbox"||$==="radio")}function Ua(dt){var $=Ta(dt)?"checked":"value",lt=Object.getOwnPropertyDescriptor(dt.constructor.prototype,$),ft=""+dt[$];if(!dt.hasOwnProperty($)&&typeof lt<"u"&&typeof lt.get=="function"&&typeof lt.set=="function"){var St=lt.get,Tt=lt.set;return Object.defineProperty(dt,$,{configurable:!0,get:function(){return St.call(this)},set:function(Ct){ft=""+Ct,Tt.call(this,Ct)}}),Object.defineProperty(dt,$,{enumerable:lt.enumerable}),{getValue:function(){return ft},setValue:function(Ct){ft=""+Ct},stopTracking:function(){dt._valueTracker=null,delete dt[$]}}}}function Va(dt){dt._valueTracker||(dt._valueTracker=Ua(dt))}function Wa(dt){if(!dt)return!1;var $=dt._valueTracker;if(!$)return!0;var lt=$.getValue(),ft="";return dt&&(ft=Ta(dt)?dt.checked?"true":"false":dt.value),dt=ft,dt!==lt?($.setValue(dt),!0):!1}function Xa(dt){if(dt=dt||(typeof document<"u"?document:void 0),typeof dt>"u")return null;try{return dt.activeElement||dt.body}catch{return dt.body}}function Ya(dt,$){var lt=$.checked;return A$3({},$,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:lt??dt._wrapperState.initialChecked})}function Za(dt,$){var lt=$.defaultValue==null?"":$.defaultValue,ft=$.checked!=null?$.checked:$.defaultChecked;lt=Sa($.value!=null?$.value:lt),dt._wrapperState={initialChecked:ft,initialValue:lt,controlled:$.type==="checkbox"||$.type==="radio"?$.checked!=null:$.value!=null}}function ab(dt,$){$=$.checked,$!=null&&ta(dt,"checked",$,!1)}function bb(dt,$){ab(dt,$);var lt=Sa($.value),ft=$.type;if(lt!=null)ft==="number"?(lt===0&&dt.value===""||dt.value!=lt)&&(dt.value=""+lt):dt.value!==""+lt&&(dt.value=""+lt);else if(ft==="submit"||ft==="reset"){dt.removeAttribute("value");return}$.hasOwnProperty("value")?cb(dt,$.type,lt):$.hasOwnProperty("defaultValue")&&cb(dt,$.type,Sa($.defaultValue)),$.checked==null&&$.defaultChecked!=null&&(dt.defaultChecked=!!$.defaultChecked)}function db(dt,$,lt){if($.hasOwnProperty("value")||$.hasOwnProperty("defaultValue")){var ft=$.type;if(!(ft!=="submit"&&ft!=="reset"||$.value!==void 0&&$.value!==null))return;$=""+dt._wrapperState.initialValue,lt||$===dt.value||(dt.value=$),dt.defaultValue=$}lt=dt.name,lt!==""&&(dt.name=""),dt.defaultChecked=!!dt._wrapperState.initialChecked,lt!==""&&(dt.name=lt)}function cb(dt,$,lt){($!=="number"||Xa(dt.ownerDocument)!==dt)&&(lt==null?dt.defaultValue=""+dt._wrapperState.initialValue:dt.defaultValue!==""+lt&&(dt.defaultValue=""+lt))}var eb=Array.isArray;function fb(dt,$,lt,ft){if(dt=dt.options,$){$={};for(var St=0;St<lt.length;St++)$["$"+lt[St]]=!0;for(lt=0;lt<dt.length;lt++)St=$.hasOwnProperty("$"+dt[lt].value),dt[lt].selected!==St&&(dt[lt].selected=St),St&&ft&&(dt[lt].defaultSelected=!0)}else{for(lt=""+Sa(lt),$=null,St=0;St<dt.length;St++){if(dt[St].value===lt){dt[St].selected=!0,ft&&(dt[St].defaultSelected=!0);return}$!==null||dt[St].disabled||($=dt[St])}$!==null&&($.selected=!0)}}function gb(dt,$){if($.dangerouslySetInnerHTML!=null)throw Error(p$8(91));return A$3({},$,{value:void 0,defaultValue:void 0,children:""+dt._wrapperState.initialValue})}function hb(dt,$){var lt=$.value;if(lt==null){if(lt=$.children,$=$.defaultValue,lt!=null){if($!=null)throw Error(p$8(92));if(eb(lt)){if(1<lt.length)throw Error(p$8(93));lt=lt[0]}$=lt}$==null&&($=""),lt=$}dt._wrapperState={initialValue:Sa(lt)}}function ib(dt,$){var lt=Sa($.value),ft=Sa($.defaultValue);lt!=null&&(lt=""+lt,lt!==dt.value&&(dt.value=lt),$.defaultValue==null&&dt.defaultValue!==lt&&(dt.defaultValue=lt)),ft!=null&&(dt.defaultValue=""+ft)}function jb(dt){var $=dt.textContent;$===dt._wrapperState.initialValue&&$!==""&&$!==null&&(dt.value=$)}function kb(dt){switch(dt){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(dt,$){return dt==null||dt==="http://www.w3.org/1999/xhtml"?kb($):dt==="http://www.w3.org/2000/svg"&&$==="foreignObject"?"http://www.w3.org/1999/xhtml":dt}var mb,nb=function(dt){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function($,lt,ft,St){MSApp.execUnsafeLocalFunction(function(){return dt($,lt,ft,St)})}:dt}(function(dt,$){if(dt.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in dt)dt.innerHTML=$;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+$.valueOf().toString()+"</svg>",$=mb.firstChild;dt.firstChild;)dt.removeChild(dt.firstChild);for(;$.firstChild;)dt.appendChild($.firstChild)}});function ob(dt,$){if($){var lt=dt.firstChild;if(lt&&lt===dt.lastChild&&lt.nodeType===3){lt.nodeValue=$;return}}dt.textContent=$}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(dt){qb.forEach(function($){$=$+dt.charAt(0).toUpperCase()+dt.substring(1),pb[$]=pb[dt]})});function rb(dt,$,lt){return $==null||typeof $=="boolean"||$===""?"":lt||typeof $!="number"||$===0||pb.hasOwnProperty(dt)&&pb[dt]?(""+$).trim():$+"px"}function sb(dt,$){dt=dt.style;for(var lt in $)if($.hasOwnProperty(lt)){var ft=lt.indexOf("--")===0,St=rb(lt,$[lt],ft);lt==="float"&&(lt="cssFloat"),ft?dt.setProperty(lt,St):dt[lt]=St}}var tb=A$3({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(dt,$){if($){if(tb[dt]&&($.children!=null||$.dangerouslySetInnerHTML!=null))throw Error(p$8(137,dt));if($.dangerouslySetInnerHTML!=null){if($.children!=null)throw Error(p$8(60));if(typeof $.dangerouslySetInnerHTML!="object"||!("__html"in $.dangerouslySetInnerHTML))throw Error(p$8(61))}if($.style!=null&&typeof $.style!="object")throw Error(p$8(62))}}function vb(dt,$){if(dt.indexOf("-")===-1)return typeof $.is=="string";switch(dt){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(dt){return dt=dt.target||dt.srcElement||window,dt.correspondingUseElement&&(dt=dt.correspondingUseElement),dt.nodeType===3?dt.parentNode:dt}var yb=null,zb=null,Ab=null;function Bb(dt){if(dt=Cb(dt)){if(typeof yb!="function")throw Error(p$8(280));var $=dt.stateNode;$&&($=Db($),yb(dt.stateNode,dt.type,$))}}function Eb(dt){zb?Ab?Ab.push(dt):Ab=[dt]:zb=dt}function Fb(){if(zb){var dt=zb,$=Ab;if(Ab=zb=null,Bb(dt),$)for(dt=0;dt<$.length;dt++)Bb($[dt])}}function Gb(dt,$){return dt($)}function Hb(){}var Ib=!1;function Jb(dt,$,lt){if(Ib)return dt($,lt);Ib=!0;try{return Gb(dt,$,lt)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(dt,$){var lt=dt.stateNode;if(lt===null)return null;var ft=Db(lt);if(ft===null)return null;lt=ft[$];e:switch($){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(ft=!ft.disabled)||(dt=dt.type,ft=!(dt==="button"||dt==="input"||dt==="select"||dt==="textarea")),dt=!ft;break e;default:dt=!1}if(dt)return null;if(lt&&typeof lt!="function")throw Error(p$8(231,$,typeof lt));return lt}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(dt,$,lt,ft,St,Tt,Ct,At,Rt){var kt=Array.prototype.slice.call(arguments,3);try{$.apply(lt,kt)}catch(Nt){this.onError(Nt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(dt){Ob=!0,Pb=dt}};function Tb(dt,$,lt,ft,St,Tt,Ct,At,Rt){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(dt,$,lt,ft,St,Tt,Ct,At,Rt){if(Tb.apply(this,arguments),Ob){if(Ob){var kt=Pb;Ob=!1,Pb=null}else throw Error(p$8(198));Qb||(Qb=!0,Rb=kt)}}function Vb(dt){var $=dt,lt=dt;if(dt.alternate)for(;$.return;)$=$.return;else{dt=$;do $=dt,$.flags&4098&&(lt=$.return),dt=$.return;while(dt)}return $.tag===3?lt:null}function Wb(dt){if(dt.tag===13){var $=dt.memoizedState;if($===null&&(dt=dt.alternate,dt!==null&&($=dt.memoizedState)),$!==null)return $.dehydrated}return null}function Xb(dt){if(Vb(dt)!==dt)throw Error(p$8(188))}function Yb(dt){var $=dt.alternate;if(!$){if($=Vb(dt),$===null)throw Error(p$8(188));return $!==dt?null:dt}for(var lt=dt,ft=$;;){var St=lt.return;if(St===null)break;var Tt=St.alternate;if(Tt===null){if(ft=St.return,ft!==null){lt=ft;continue}break}if(St.child===Tt.child){for(Tt=St.child;Tt;){if(Tt===lt)return Xb(St),dt;if(Tt===ft)return Xb(St),$;Tt=Tt.sibling}throw Error(p$8(188))}if(lt.return!==ft.return)lt=St,ft=Tt;else{for(var Ct=!1,At=St.child;At;){if(At===lt){Ct=!0,lt=St,ft=Tt;break}if(At===ft){Ct=!0,ft=St,lt=Tt;break}At=At.sibling}if(!Ct){for(At=Tt.child;At;){if(At===lt){Ct=!0,lt=Tt,ft=St;break}if(At===ft){Ct=!0,ft=Tt,lt=St;break}At=At.sibling}if(!Ct)throw Error(p$8(189))}}if(lt.alternate!==ft)throw Error(p$8(190))}if(lt.tag!==3)throw Error(p$8(188));return lt.stateNode.current===lt?dt:$}function Zb(dt){return dt=Yb(dt),dt!==null?$b(dt):null}function $b(dt){if(dt.tag===5||dt.tag===6)return dt;for(dt=dt.child;dt!==null;){var $=$b(dt);if($!==null)return $;dt=dt.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$2=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(dt){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,dt,void 0,(dt.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(dt){return dt>>>=0,dt===0?32:31-(pc(dt)/qc|0)|0}var rc=64,sc=4194304;function tc(dt){switch(dt&-dt){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return dt&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return dt&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return dt}}function uc(dt,$){var lt=dt.pendingLanes;if(lt===0)return 0;var ft=0,St=dt.suspendedLanes,Tt=dt.pingedLanes,Ct=lt&268435455;if(Ct!==0){var At=Ct&~St;At!==0?ft=tc(At):(Tt&=Ct,Tt!==0&&(ft=tc(Tt)))}else Ct=lt&~St,Ct!==0?ft=tc(Ct):Tt!==0&&(ft=tc(Tt));if(ft===0)return 0;if($!==0&&$!==ft&&!($&St)&&(St=ft&-ft,Tt=$&-$,St>=Tt||St===16&&(Tt&4194240)!==0))return $;if(ft&4&&(ft|=lt&16),$=dt.entangledLanes,$!==0)for(dt=dt.entanglements,$&=ft;0<$;)lt=31-oc($),St=1<<lt,ft|=dt[lt],$&=~St;return ft}function vc(dt,$){switch(dt){case 1:case 2:case 4:return $+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return $+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(dt,$){for(var lt=dt.suspendedLanes,ft=dt.pingedLanes,St=dt.expirationTimes,Tt=dt.pendingLanes;0<Tt;){var Ct=31-oc(Tt),At=1<<Ct,Rt=St[Ct];Rt===-1?(!(At&lt)||At&ft)&&(St[Ct]=vc(At,$)):Rt<=$&&(dt.expiredLanes|=At),Tt&=~At}}function xc(dt){return dt=dt.pendingLanes&-1073741825,dt!==0?dt:dt&1073741824?1073741824:0}function yc(){var dt=rc;return rc<<=1,!(rc&4194240)&&(rc=64),dt}function zc(dt){for(var $=[],lt=0;31>lt;lt++)$.push(dt);return $}function Ac(dt,$,lt){dt.pendingLanes|=$,$!==536870912&&(dt.suspendedLanes=0,dt.pingedLanes=0),dt=dt.eventTimes,$=31-oc($),dt[$]=lt}function Bc(dt,$){var lt=dt.pendingLanes&~$;dt.pendingLanes=$,dt.suspendedLanes=0,dt.pingedLanes=0,dt.expiredLanes&=$,dt.mutableReadLanes&=$,dt.entangledLanes&=$,$=dt.entanglements;var ft=dt.eventTimes;for(dt=dt.expirationTimes;0<lt;){var St=31-oc(lt),Tt=1<<St;$[St]=0,ft[St]=-1,dt[St]=-1,lt&=~Tt}}function Cc(dt,$){var lt=dt.entangledLanes|=$;for(dt=dt.entanglements;lt;){var ft=31-oc(lt),St=1<<ft;St&$|dt[ft]&$&&(dt[ft]|=$),lt&=~St}}var C$3=0;function Dc(dt){return dt&=-dt,1<dt?4<dt?dt&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(dt,$){switch(dt){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete($.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete($.pointerId)}}function Tc(dt,$,lt,ft,St,Tt){return dt===null||dt.nativeEvent!==Tt?(dt={blockedOn:$,domEventName:lt,eventSystemFlags:ft,nativeEvent:Tt,targetContainers:[St]},$!==null&&($=Cb($),$!==null&&Fc($)),dt):(dt.eventSystemFlags|=ft,$=dt.targetContainers,St!==null&&$.indexOf(St)===-1&&$.push(St),dt)}function Uc(dt,$,lt,ft,St){switch($){case"focusin":return Lc=Tc(Lc,dt,$,lt,ft,St),!0;case"dragenter":return Mc=Tc(Mc,dt,$,lt,ft,St),!0;case"mouseover":return Nc=Tc(Nc,dt,$,lt,ft,St),!0;case"pointerover":var Tt=St.pointerId;return Oc.set(Tt,Tc(Oc.get(Tt)||null,dt,$,lt,ft,St)),!0;case"gotpointercapture":return Tt=St.pointerId,Pc.set(Tt,Tc(Pc.get(Tt)||null,dt,$,lt,ft,St)),!0}return!1}function Vc(dt){var $=Wc(dt.target);if($!==null){var lt=Vb($);if(lt!==null){if($=lt.tag,$===13){if($=Wb(lt),$!==null){dt.blockedOn=$,Ic(dt.priority,function(){Gc(lt)});return}}else if($===3&&lt.stateNode.current.memoizedState.isDehydrated){dt.blockedOn=lt.tag===3?lt.stateNode.containerInfo:null;return}}}dt.blockedOn=null}function Xc(dt){if(dt.blockedOn!==null)return!1;for(var $=dt.targetContainers;0<$.length;){var lt=Yc(dt.domEventName,dt.eventSystemFlags,$[0],dt.nativeEvent);if(lt===null){lt=dt.nativeEvent;var ft=new lt.constructor(lt.type,lt);wb=ft,lt.target.dispatchEvent(ft),wb=null}else return $=Cb(lt),$!==null&&Fc($),dt.blockedOn=lt,!1;$.shift()}return!0}function Zc(dt,$,lt){Xc(dt)&&lt.delete($)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(dt,$){dt.blockedOn===$&&(dt.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(dt){function $(St){return ad(St,dt)}if(0<Kc.length){ad(Kc[0],dt);for(var lt=1;lt<Kc.length;lt++){var ft=Kc[lt];ft.blockedOn===dt&&(ft.blockedOn=null)}}for(Lc!==null&&ad(Lc,dt),Mc!==null&&ad(Mc,dt),Nc!==null&&ad(Nc,dt),Oc.forEach($),Pc.forEach($),lt=0;lt<Qc.length;lt++)ft=Qc[lt],ft.blockedOn===dt&&(ft.blockedOn=null);for(;0<Qc.length&&(lt=Qc[0],lt.blockedOn===null);)Vc(lt),lt.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(dt,$,lt,ft){var St=C$3,Tt=cd.transition;cd.transition=null;try{C$3=1,fd(dt,$,lt,ft)}finally{C$3=St,cd.transition=Tt}}function gd(dt,$,lt,ft){var St=C$3,Tt=cd.transition;cd.transition=null;try{C$3=4,fd(dt,$,lt,ft)}finally{C$3=St,cd.transition=Tt}}function fd(dt,$,lt,ft){if(dd){var St=Yc(dt,$,lt,ft);if(St===null)hd(dt,$,ft,id$2,lt),Sc(dt,ft);else if(Uc(St,dt,$,lt,ft))ft.stopPropagation();else if(Sc(dt,ft),$&4&&-1<Rc.indexOf(dt)){for(;St!==null;){var Tt=Cb(St);if(Tt!==null&&Ec(Tt),Tt=Yc(dt,$,lt,ft),Tt===null&&hd(dt,$,ft,id$2,lt),Tt===St)break;St=Tt}St!==null&&ft.stopPropagation()}else hd(dt,$,ft,null,lt)}}var id$2=null;function Yc(dt,$,lt,ft){if(id$2=null,dt=xb(ft),dt=Wc(dt),dt!==null)if($=Vb(dt),$===null)dt=null;else if(lt=$.tag,lt===13){if(dt=Wb($),dt!==null)return dt;dt=null}else if(lt===3){if($.stateNode.current.memoizedState.isDehydrated)return $.tag===3?$.stateNode.containerInfo:null;dt=null}else $!==dt&&(dt=null);return id$2=dt,null}function jd(dt){switch(dt){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var dt,$=ld,lt=$.length,ft,St="value"in kd?kd.value:kd.textContent,Tt=St.length;for(dt=0;dt<lt&&$[dt]===St[dt];dt++);var Ct=lt-dt;for(ft=1;ft<=Ct&&$[lt-ft]===St[Tt-ft];ft++);return md=St.slice(dt,1<ft?1-ft:void 0)}function od(dt){var $=dt.keyCode;return"charCode"in dt?(dt=dt.charCode,dt===0&&$===13&&(dt=13)):dt=$,dt===10&&(dt=13),32<=dt||dt===13?dt:0}function pd(){return!0}function qd(){return!1}function rd(dt){function $(lt,ft,St,Tt,Ct){this._reactName=lt,this._targetInst=St,this.type=ft,this.nativeEvent=Tt,this.target=Ct,this.currentTarget=null;for(var At in dt)dt.hasOwnProperty(At)&&(lt=dt[At],this[At]=lt?lt(Tt):Tt[At]);return this.isDefaultPrevented=(Tt.defaultPrevented!=null?Tt.defaultPrevented:Tt.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$3($.prototype,{preventDefault:function(){this.defaultPrevented=!0;var lt=this.nativeEvent;lt&&(lt.preventDefault?lt.preventDefault():typeof lt.returnValue!="unknown"&&(lt.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var lt=this.nativeEvent;lt&&(lt.stopPropagation?lt.stopPropagation():typeof lt.cancelBubble!="unknown"&&(lt.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),$}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(dt){return dt.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$3({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$3({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(dt){return dt.relatedTarget===void 0?dt.fromElement===dt.srcElement?dt.toElement:dt.fromElement:dt.relatedTarget},movementX:function(dt){return"movementX"in dt?dt.movementX:(dt!==yd&&(yd&&dt.type==="mousemove"?(wd=dt.screenX-yd.screenX,xd=dt.screenY-yd.screenY):xd=wd=0,yd=dt),wd)},movementY:function(dt){return"movementY"in dt?dt.movementY:xd}}),Bd=rd(Ad),Cd=A$3({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$3({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$3({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$3({},sd,{clipboardData:function(dt){return"clipboardData"in dt?dt.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$3({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(dt){var $=this.nativeEvent;return $.getModifierState?$.getModifierState(dt):(dt=Od[dt])?!!$[dt]:!1}function zd(){return Pd}var Qd=A$3({},ud,{key:function(dt){if(dt.key){var $=Md[dt.key]||dt.key;if($!=="Unidentified")return $}return dt.type==="keypress"?(dt=od(dt),dt===13?"Enter":String.fromCharCode(dt)):dt.type==="keydown"||dt.type==="keyup"?Nd[dt.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(dt){return dt.type==="keypress"?od(dt):0},keyCode:function(dt){return dt.type==="keydown"||dt.type==="keyup"?dt.keyCode:0},which:function(dt){return dt.type==="keypress"?od(dt):dt.type==="keydown"||dt.type==="keyup"?dt.keyCode:0}}),Rd=rd(Qd),Sd=A$3({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$3({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$3({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$3({},Ad,{deltaX:function(dt){return"deltaX"in dt?dt.deltaX:"wheelDeltaX"in dt?-dt.wheelDeltaX:0},deltaY:function(dt){return"deltaY"in dt?dt.deltaY:"wheelDeltaY"in dt?-dt.wheelDeltaY:"wheelDelta"in dt?-dt.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$2=ia&&"CompositionEvent"in window,be$2=null;ia&&"documentMode"in document&&(be$2=document.documentMode);var ce$1=ia&&"TextEvent"in window&&!be$2,de$2=ia&&(!ae$2||be$2&&8<be$2&&11>=be$2),ee$1=String.fromCharCode(32),fe$2=!1;function ge$1(dt,$){switch(dt){case"keyup":return $d.indexOf($.keyCode)!==-1;case"keydown":return $.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$2(dt){return dt=dt.detail,typeof dt=="object"&&"data"in dt?dt.data:null}var ie$3=!1;function je$1(dt,$){switch(dt){case"compositionend":return he$2($);case"keypress":return $.which!==32?null:(fe$2=!0,ee$1);case"textInput":return dt=$.data,dt===ee$1&&fe$2?null:dt;default:return null}}function ke$1(dt,$){if(ie$3)return dt==="compositionend"||!ae$2&&ge$1(dt,$)?(dt=nd(),md=ld=kd=null,ie$3=!1,dt):null;switch(dt){case"paste":return null;case"keypress":if(!($.ctrlKey||$.altKey||$.metaKey)||$.ctrlKey&&$.altKey){if($.char&&1<$.char.length)return $.char;if($.which)return String.fromCharCode($.which)}return null;case"compositionend":return de$2&&$.locale!=="ko"?null:$.data;default:return null}}var le$2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$2(dt){var $=dt&&dt.nodeName&&dt.nodeName.toLowerCase();return $==="input"?!!le$2[dt.type]:$==="textarea"}function ne$3(dt,$,lt,ft){Eb(ft),$=oe$2($,"onChange"),0<$.length&&(lt=new td("onChange","change",null,lt,ft),dt.push({event:lt,listeners:$}))}var pe$1=null,qe$2=null;function re$1(dt){se$2(dt,0)}function te$2(dt){var $=ue$2(dt);if(Wa($))return dt}function ve$1(dt,$){if(dt==="change")return $}var we$2=!1;if(ia){var xe$2;if(ia){var ye$2="oninput"in document;if(!ye$2){var ze$2=document.createElement("div");ze$2.setAttribute("oninput","return;"),ye$2=typeof ze$2.oninput=="function"}xe$2=ye$2}else xe$2=!1;we$2=xe$2&&(!document.documentMode||9<document.documentMode)}function Ae$1(){pe$1&&(pe$1.detachEvent("onpropertychange",Be$1),qe$2=pe$1=null)}function Be$1(dt){if(dt.propertyName==="value"&&te$2(qe$2)){var $=[];ne$3($,qe$2,dt,xb(dt)),Jb(re$1,$)}}function Ce$2(dt,$,lt){dt==="focusin"?(Ae$1(),pe$1=$,qe$2=lt,pe$1.attachEvent("onpropertychange",Be$1)):dt==="focusout"&&Ae$1()}function De$2(dt){if(dt==="selectionchange"||dt==="keyup"||dt==="keydown")return te$2(qe$2)}function Ee$2(dt,$){if(dt==="click")return te$2($)}function Fe(dt,$){if(dt==="input"||dt==="change")return te$2($)}function Ge$2(dt,$){return dt===$&&(dt!==0||1/dt===1/$)||dt!==dt&&$!==$}var He$2=typeof Object.is=="function"?Object.is:Ge$2;function Ie$1(dt,$){if(He$2(dt,$))return!0;if(typeof dt!="object"||dt===null||typeof $!="object"||$===null)return!1;var lt=Object.keys(dt),ft=Object.keys($);if(lt.length!==ft.length)return!1;for(ft=0;ft<lt.length;ft++){var St=lt[ft];if(!ja.call($,St)||!He$2(dt[St],$[St]))return!1}return!0}function Je(dt){for(;dt&&dt.firstChild;)dt=dt.firstChild;return dt}function Ke$2(dt,$){var lt=Je(dt);dt=0;for(var ft;lt;){if(lt.nodeType===3){if(ft=dt+lt.textContent.length,dt<=$&&ft>=$)return{node:lt,offset:$-dt};dt=ft}e:{for(;lt;){if(lt.nextSibling){lt=lt.nextSibling;break e}lt=lt.parentNode}lt=void 0}lt=Je(lt)}}function Le$3(dt,$){return dt&&$?dt===$?!0:dt&&dt.nodeType===3?!1:$&&$.nodeType===3?Le$3(dt,$.parentNode):"contains"in dt?dt.contains($):dt.compareDocumentPosition?!!(dt.compareDocumentPosition($)&16):!1:!1}function Me$1(){for(var dt=window,$=Xa();$ instanceof dt.HTMLIFrameElement;){try{var lt=typeof $.contentWindow.location.href=="string"}catch{lt=!1}if(lt)dt=$.contentWindow;else break;$=Xa(dt.document)}return $}function Ne$2(dt){var $=dt&&dt.nodeName&&dt.nodeName.toLowerCase();return $&&($==="input"&&(dt.type==="text"||dt.type==="search"||dt.type==="tel"||dt.type==="url"||dt.type==="password")||$==="textarea"||dt.contentEditable==="true")}function Oe$1(dt){var $=Me$1(),lt=dt.focusedElem,ft=dt.selectionRange;if($!==lt&&lt&&lt.ownerDocument&&Le$3(lt.ownerDocument.documentElement,lt)){if(ft!==null&&Ne$2(lt)){if($=ft.start,dt=ft.end,dt===void 0&&(dt=$),"selectionStart"in lt)lt.selectionStart=$,lt.selectionEnd=Math.min(dt,lt.value.length);else if(dt=($=lt.ownerDocument||document)&&$.defaultView||window,dt.getSelection){dt=dt.getSelection();var St=lt.textContent.length,Tt=Math.min(ft.start,St);ft=ft.end===void 0?Tt:Math.min(ft.end,St),!dt.extend&&Tt>ft&&(St=ft,ft=Tt,Tt=St),St=Ke$2(lt,Tt);var Ct=Ke$2(lt,ft);St&&Ct&&(dt.rangeCount!==1||dt.anchorNode!==St.node||dt.anchorOffset!==St.offset||dt.focusNode!==Ct.node||dt.focusOffset!==Ct.offset)&&($=$.createRange(),$.setStart(St.node,St.offset),dt.removeAllRanges(),Tt>ft?(dt.addRange($),dt.extend(Ct.node,Ct.offset)):($.setEnd(Ct.node,Ct.offset),dt.addRange($)))}}for($=[],dt=lt;dt=dt.parentNode;)dt.nodeType===1&&$.push({element:dt,left:dt.scrollLeft,top:dt.scrollTop});for(typeof lt.focus=="function"&&lt.focus(),lt=0;lt<$.length;lt++)dt=$[lt],dt.element.scrollLeft=dt.left,dt.element.scrollTop=dt.top}}var Pe$2=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re$1=null,Se=null,Te$1=!1;function Ue$2(dt,$,lt){var ft=lt.window===lt?lt.document:lt.nodeType===9?lt:lt.ownerDocument;Te$1||Qe==null||Qe!==Xa(ft)||(ft=Qe,"selectionStart"in ft&&Ne$2(ft)?ft={start:ft.selectionStart,end:ft.selectionEnd}:(ft=(ft.ownerDocument&&ft.ownerDocument.defaultView||window).getSelection(),ft={anchorNode:ft.anchorNode,anchorOffset:ft.anchorOffset,focusNode:ft.focusNode,focusOffset:ft.focusOffset}),Se&&Ie$1(Se,ft)||(Se=ft,ft=oe$2(Re$1,"onSelect"),0<ft.length&&($=new td("onSelect","select",null,$,lt),dt.push({event:$,listeners:ft}),$.target=Qe)))}function Ve$1(dt,$){var lt={};return lt[dt.toLowerCase()]=$.toLowerCase(),lt["Webkit"+dt]="webkit"+$,lt["Moz"+dt]="moz"+$,lt}var We$1={animationend:Ve$1("Animation","AnimationEnd"),animationiteration:Ve$1("Animation","AnimationIteration"),animationstart:Ve$1("Animation","AnimationStart"),transitionend:Ve$1("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We$1.animationend.animation,delete We$1.animationiteration.animation,delete We$1.animationstart.animation),"TransitionEvent"in window||delete We$1.transitionend.transition);function Ze(dt){if(Xe[dt])return Xe[dt];if(!We$1[dt])return dt;var $=We$1[dt],lt;for(lt in $)if($.hasOwnProperty(lt)&&lt in Ye)return Xe[dt]=$[lt];return dt}var $e$1=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(dt,$){df.set(dt,$),fa($,[dt])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e$1,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(dt,$,lt){var ft=dt.type||"unknown-event";dt.currentTarget=lt,Ub(ft,$,void 0,dt),dt.currentTarget=null}function se$2(dt,$){$=($&4)!==0;for(var lt=0;lt<dt.length;lt++){var ft=dt[lt],St=ft.event;ft=ft.listeners;e:{var Tt=void 0;if($)for(var Ct=ft.length-1;0<=Ct;Ct--){var At=ft[Ct],Rt=At.instance,kt=At.currentTarget;if(At=At.listener,Rt!==Tt&&St.isPropagationStopped())break e;nf(St,At,kt),Tt=Rt}else for(Ct=0;Ct<ft.length;Ct++){if(At=ft[Ct],Rt=At.instance,kt=At.currentTarget,At=At.listener,Rt!==Tt&&St.isPropagationStopped())break e;nf(St,At,kt),Tt=Rt}}}if(Qb)throw dt=Rb,Qb=!1,Rb=null,dt}function D$5(dt,$){var lt=$[of];lt===void 0&&(lt=$[of]=new Set);var ft=dt+"__bubble";lt.has(ft)||(pf($,dt,2,!1),lt.add(ft))}function qf(dt,$,lt){var ft=0;$&&(ft|=4),pf(lt,dt,ft,$)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(dt){if(!dt[rf]){dt[rf]=!0,da.forEach(function(lt){lt!=="selectionchange"&&(mf.has(lt)||qf(lt,!1,dt),qf(lt,!0,dt))});var $=dt.nodeType===9?dt:dt.ownerDocument;$===null||$[rf]||($[rf]=!0,qf("selectionchange",!1,$))}}function pf(dt,$,lt,ft){switch(jd($)){case 1:var St=ed;break;case 4:St=gd;break;default:St=fd}lt=St.bind(null,$,lt,dt),St=void 0,!Lb||$!=="touchstart"&&$!=="touchmove"&&$!=="wheel"||(St=!0),ft?St!==void 0?dt.addEventListener($,lt,{capture:!0,passive:St}):dt.addEventListener($,lt,!0):St!==void 0?dt.addEventListener($,lt,{passive:St}):dt.addEventListener($,lt,!1)}function hd(dt,$,lt,ft,St){var Tt=ft;if(!($&1)&&!($&2)&&ft!==null)e:for(;;){if(ft===null)return;var Ct=ft.tag;if(Ct===3||Ct===4){var At=ft.stateNode.containerInfo;if(At===St||At.nodeType===8&&At.parentNode===St)break;if(Ct===4)for(Ct=ft.return;Ct!==null;){var Rt=Ct.tag;if((Rt===3||Rt===4)&&(Rt=Ct.stateNode.containerInfo,Rt===St||Rt.nodeType===8&&Rt.parentNode===St))return;Ct=Ct.return}for(;At!==null;){if(Ct=Wc(At),Ct===null)return;if(Rt=Ct.tag,Rt===5||Rt===6){ft=Tt=Ct;continue e}At=At.parentNode}}ft=ft.return}Jb(function(){var kt=Tt,Nt=xb(lt),Bt=[];e:{var Ut=df.get(dt);if(Ut!==void 0){var zt=td,Zt=dt;switch(dt){case"keypress":if(od(lt)===0)break e;case"keydown":case"keyup":zt=Rd;break;case"focusin":Zt="focus",zt=Fd;break;case"focusout":Zt="blur",zt=Fd;break;case"beforeblur":case"afterblur":zt=Fd;break;case"click":if(lt.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":zt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":zt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":zt=Vd;break;case $e$1:case af:case bf:zt=Hd;break;case cf:zt=Xd;break;case"scroll":zt=vd;break;case"wheel":zt=Zd;break;case"copy":case"cut":case"paste":zt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":zt=Td}var ln=($&4)!==0,cn=!ln&&dt==="scroll",hn=ln?Ut!==null?Ut+"Capture":null:Ut;ln=[];for(var pn=kt,dn;pn!==null;){dn=pn;var gn=dn.stateNode;if(dn.tag===5&&gn!==null&&(dn=gn,hn!==null&&(gn=Kb(pn,hn),gn!=null&&ln.push(tf(pn,gn,dn)))),cn)break;pn=pn.return}0<ln.length&&(Ut=new zt(Ut,Zt,null,lt,Nt),Bt.push({event:Ut,listeners:ln}))}}if(!($&7)){e:{if(Ut=dt==="mouseover"||dt==="pointerover",zt=dt==="mouseout"||dt==="pointerout",Ut&&lt!==wb&&(Zt=lt.relatedTarget||lt.fromElement)&&(Wc(Zt)||Zt[uf]))break e;if((zt||Ut)&&(Ut=Nt.window===Nt?Nt:(Ut=Nt.ownerDocument)?Ut.defaultView||Ut.parentWindow:window,zt?(Zt=lt.relatedTarget||lt.toElement,zt=kt,Zt=Zt?Wc(Zt):null,Zt!==null&&(cn=Vb(Zt),Zt!==cn||Zt.tag!==5&&Zt.tag!==6)&&(Zt=null)):(zt=null,Zt=kt),zt!==Zt)){if(ln=Bd,gn="onMouseLeave",hn="onMouseEnter",pn="mouse",(dt==="pointerout"||dt==="pointerover")&&(ln=Td,gn="onPointerLeave",hn="onPointerEnter",pn="pointer"),cn=zt==null?Ut:ue$2(zt),dn=Zt==null?Ut:ue$2(Zt),Ut=new ln(gn,pn+"leave",zt,lt,Nt),Ut.target=cn,Ut.relatedTarget=dn,gn=null,Wc(Nt)===kt&&(ln=new ln(hn,pn+"enter",Zt,lt,Nt),ln.target=dn,ln.relatedTarget=cn,gn=ln),cn=gn,zt&&Zt)t:{for(ln=zt,hn=Zt,pn=0,dn=ln;dn;dn=vf(dn))pn++;for(dn=0,gn=hn;gn;gn=vf(gn))dn++;for(;0<pn-dn;)ln=vf(ln),pn--;for(;0<dn-pn;)hn=vf(hn),dn--;for(;pn--;){if(ln===hn||hn!==null&&ln===hn.alternate)break t;ln=vf(ln),hn=vf(hn)}ln=null}else ln=null;zt!==null&&wf(Bt,Ut,zt,ln,!1),Zt!==null&&cn!==null&&wf(Bt,cn,Zt,ln,!0)}}e:{if(Ut=kt?ue$2(kt):window,zt=Ut.nodeName&&Ut.nodeName.toLowerCase(),zt==="select"||zt==="input"&&Ut.type==="file")var vn=ve$1;else if(me$2(Ut))if(we$2)vn=Fe;else{vn=De$2;var Tn=Ce$2}else(zt=Ut.nodeName)&&zt.toLowerCase()==="input"&&(Ut.type==="checkbox"||Ut.type==="radio")&&(vn=Ee$2);if(vn&&(vn=vn(dt,kt))){ne$3(Bt,vn,lt,Nt);break e}Tn&&Tn(dt,Ut,kt),dt==="focusout"&&(Tn=Ut._wrapperState)&&Tn.controlled&&Ut.type==="number"&&cb(Ut,"number",Ut.value)}switch(Tn=kt?ue$2(kt):window,dt){case"focusin":(me$2(Tn)||Tn.contentEditable==="true")&&(Qe=Tn,Re$1=kt,Se=null);break;case"focusout":Se=Re$1=Qe=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue$2(Bt,lt,Nt);break;case"selectionchange":if(Pe$2)break;case"keydown":case"keyup":Ue$2(Bt,lt,Nt)}var Cn;if(ae$2)e:{switch(dt){case"compositionstart":var $n="onCompositionStart";break e;case"compositionend":$n="onCompositionEnd";break e;case"compositionupdate":$n="onCompositionUpdate";break e}$n=void 0}else ie$3?ge$1(dt,lt)&&($n="onCompositionEnd"):dt==="keydown"&&lt.keyCode===229&&($n="onCompositionStart");$n&&(de$2&&lt.locale!=="ko"&&(ie$3||$n!=="onCompositionStart"?$n==="onCompositionEnd"&&ie$3&&(Cn=nd()):(kd=Nt,ld="value"in kd?kd.value:kd.textContent,ie$3=!0)),Tn=oe$2(kt,$n),0<Tn.length&&($n=new Ld($n,dt,null,lt,Nt),Bt.push({event:$n,listeners:Tn}),Cn?$n.data=Cn:(Cn=he$2(lt),Cn!==null&&($n.data=Cn)))),(Cn=ce$1?je$1(dt,lt):ke$1(dt,lt))&&(kt=oe$2(kt,"onBeforeInput"),0<kt.length&&(Nt=new Ld("onBeforeInput","beforeinput",null,lt,Nt),Bt.push({event:Nt,listeners:kt}),Nt.data=Cn))}se$2(Bt,$)})}function tf(dt,$,lt){return{instance:dt,listener:$,currentTarget:lt}}function oe$2(dt,$){for(var lt=$+"Capture",ft=[];dt!==null;){var St=dt,Tt=St.stateNode;St.tag===5&&Tt!==null&&(St=Tt,Tt=Kb(dt,lt),Tt!=null&&ft.unshift(tf(dt,Tt,St)),Tt=Kb(dt,$),Tt!=null&&ft.push(tf(dt,Tt,St))),dt=dt.return}return ft}function vf(dt){if(dt===null)return null;do dt=dt.return;while(dt&&dt.tag!==5);return dt||null}function wf(dt,$,lt,ft,St){for(var Tt=$._reactName,Ct=[];lt!==null&&lt!==ft;){var At=lt,Rt=At.alternate,kt=At.stateNode;if(Rt!==null&&Rt===ft)break;At.tag===5&&kt!==null&&(At=kt,St?(Rt=Kb(lt,Tt),Rt!=null&&Ct.unshift(tf(lt,Rt,At))):St||(Rt=Kb(lt,Tt),Rt!=null&&Ct.push(tf(lt,Rt,At)))),lt=lt.return}Ct.length!==0&&dt.push({event:$,listeners:Ct})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(dt){return(typeof dt=="string"?dt:""+dt).replace(xf,`
`).replace(yf,"")}function Af(dt,$,lt){if($=zf($),zf(dt)!==$&&lt)throw Error(p$8(425))}function Bf(){}var Cf=null,Df=null;function Ef(dt,$){return dt==="textarea"||dt==="noscript"||typeof $.children=="string"||typeof $.children=="number"||typeof $.dangerouslySetInnerHTML=="object"&&$.dangerouslySetInnerHTML!==null&&$.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(dt){return Hf.resolve(null).then(dt).catch(If)}:Ff;function If(dt){setTimeout(function(){throw dt})}function Kf(dt,$){var lt=$,ft=0;do{var St=lt.nextSibling;if(dt.removeChild(lt),St&&St.nodeType===8)if(lt=St.data,lt==="/$"){if(ft===0){dt.removeChild(St),bd($);return}ft--}else lt!=="$"&&lt!=="$?"&&lt!=="$!"||ft++;lt=St}while(lt);bd($)}function Lf(dt){for(;dt!=null;dt=dt.nextSibling){var $=dt.nodeType;if($===1||$===3)break;if($===8){if($=dt.data,$==="$"||$==="$!"||$==="$?")break;if($==="/$")return null}}return dt}function Mf(dt){dt=dt.previousSibling;for(var $=0;dt;){if(dt.nodeType===8){var lt=dt.data;if(lt==="$"||lt==="$!"||lt==="$?"){if($===0)return dt;$--}else lt==="/$"&&$++}dt=dt.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(dt){var $=dt[Of];if($)return $;for(var lt=dt.parentNode;lt;){if($=lt[uf]||lt[Of]){if(lt=$.alternate,$.child!==null||lt!==null&&lt.child!==null)for(dt=Mf(dt);dt!==null;){if(lt=dt[Of])return lt;dt=Mf(dt)}return $}dt=lt,lt=dt.parentNode}return null}function Cb(dt){return dt=dt[Of]||dt[uf],!dt||dt.tag!==5&&dt.tag!==6&&dt.tag!==13&&dt.tag!==3?null:dt}function ue$2(dt){if(dt.tag===5||dt.tag===6)return dt.stateNode;throw Error(p$8(33))}function Db(dt){return dt[Pf]||null}var Sf=[],Tf=-1;function Uf(dt){return{current:dt}}function E$6(dt){0>Tf||(dt.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$1(dt,$){Tf++,Sf[Tf]=dt.current,dt.current=$}var Vf={},H$4=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(dt,$){var lt=dt.type.contextTypes;if(!lt)return Vf;var ft=dt.stateNode;if(ft&&ft.__reactInternalMemoizedUnmaskedChildContext===$)return ft.__reactInternalMemoizedMaskedChildContext;var St={},Tt;for(Tt in lt)St[Tt]=$[Tt];return ft&&(dt=dt.stateNode,dt.__reactInternalMemoizedUnmaskedChildContext=$,dt.__reactInternalMemoizedMaskedChildContext=St),St}function Zf(dt){return dt=dt.childContextTypes,dt!=null}function $f(){E$6(Wf),E$6(H$4)}function ag(dt,$,lt){if(H$4.current!==Vf)throw Error(p$8(168));G$1(H$4,$),G$1(Wf,lt)}function bg(dt,$,lt){var ft=dt.stateNode;if($=$.childContextTypes,typeof ft.getChildContext!="function")return lt;ft=ft.getChildContext();for(var St in ft)if(!(St in $))throw Error(p$8(108,Ra(dt)||"Unknown",St));return A$3({},lt,ft)}function cg(dt){return dt=(dt=dt.stateNode)&&dt.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$4.current,G$1(H$4,dt),G$1(Wf,Wf.current),!0}function dg(dt,$,lt){var ft=dt.stateNode;if(!ft)throw Error(p$8(169));lt?(dt=bg(dt,$,Xf),ft.__reactInternalMemoizedMergedChildContext=dt,E$6(Wf),E$6(H$4),G$1(H$4,dt)):E$6(Wf),G$1(Wf,lt)}var eg=null,fg=!1,gg=!1;function hg(dt){eg===null?eg=[dt]:eg.push(dt)}function ig(dt){fg=!0,hg(dt)}function jg(){if(!gg&&eg!==null){gg=!0;var dt=0,$=C$3;try{var lt=eg;for(C$3=1;dt<lt.length;dt++){var ft=lt[dt];do ft=ft(!0);while(ft!==null)}eg=null,fg=!1}catch(St){throw eg!==null&&(eg=eg.slice(dt+1)),ac(fc,jg),St}finally{C$3=$,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(dt,$){kg[lg++]=ng,kg[lg++]=mg,mg=dt,ng=$}function ug(dt,$,lt){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=dt;var ft=rg;dt=sg;var St=32-oc(ft)-1;ft&=~(1<<St),lt+=1;var Tt=32-oc($)+St;if(30<Tt){var Ct=St-St%5;Tt=(ft&(1<<Ct)-1).toString(32),ft>>=Ct,St-=Ct,rg=1<<32-oc($)+St|lt<<St|ft,sg=Tt+dt}else rg=1<<Tt|lt<<St|ft,sg=dt}function vg(dt){dt.return!==null&&(tg(dt,1),ug(dt,1,0))}function wg(dt){for(;dt===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;dt===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$3=!1,zg=null;function Ag(dt,$){var lt=Bg(5,null,null,0);lt.elementType="DELETED",lt.stateNode=$,lt.return=dt,$=dt.deletions,$===null?(dt.deletions=[lt],dt.flags|=16):$.push(lt)}function Cg(dt,$){switch(dt.tag){case 5:var lt=dt.type;return $=$.nodeType!==1||lt.toLowerCase()!==$.nodeName.toLowerCase()?null:$,$!==null?(dt.stateNode=$,xg=dt,yg=Lf($.firstChild),!0):!1;case 6:return $=dt.pendingProps===""||$.nodeType!==3?null:$,$!==null?(dt.stateNode=$,xg=dt,yg=null,!0):!1;case 13:return $=$.nodeType!==8?null:$,$!==null?(lt=qg!==null?{id:rg,overflow:sg}:null,dt.memoizedState={dehydrated:$,treeContext:lt,retryLane:1073741824},lt=Bg(18,null,null,0),lt.stateNode=$,lt.return=dt,dt.child=lt,xg=dt,yg=null,!0):!1;default:return!1}}function Dg(dt){return(dt.mode&1)!==0&&(dt.flags&128)===0}function Eg(dt){if(I$3){var $=yg;if($){var lt=$;if(!Cg(dt,$)){if(Dg(dt))throw Error(p$8(418));$=Lf(lt.nextSibling);var ft=xg;$&&Cg(dt,$)?Ag(ft,lt):(dt.flags=dt.flags&-4097|2,I$3=!1,xg=dt)}}else{if(Dg(dt))throw Error(p$8(418));dt.flags=dt.flags&-4097|2,I$3=!1,xg=dt}}}function Fg(dt){for(dt=dt.return;dt!==null&&dt.tag!==5&&dt.tag!==3&&dt.tag!==13;)dt=dt.return;xg=dt}function Gg(dt){if(dt!==xg)return!1;if(!I$3)return Fg(dt),I$3=!0,!1;var $;if(($=dt.tag!==3)&&!($=dt.tag!==5)&&($=dt.type,$=$!=="head"&&$!=="body"&&!Ef(dt.type,dt.memoizedProps)),$&&($=yg)){if(Dg(dt))throw Hg(),Error(p$8(418));for(;$;)Ag(dt,$),$=Lf($.nextSibling)}if(Fg(dt),dt.tag===13){if(dt=dt.memoizedState,dt=dt!==null?dt.dehydrated:null,!dt)throw Error(p$8(317));e:{for(dt=dt.nextSibling,$=0;dt;){if(dt.nodeType===8){var lt=dt.data;if(lt==="/$"){if($===0){yg=Lf(dt.nextSibling);break e}$--}else lt!=="$"&&lt!=="$!"&&lt!=="$?"||$++}dt=dt.nextSibling}yg=null}}else yg=xg?Lf(dt.stateNode.nextSibling):null;return!0}function Hg(){for(var dt=yg;dt;)dt=Lf(dt.nextSibling)}function Ig(){yg=xg=null,I$3=!1}function Jg(dt){zg===null?zg=[dt]:zg.push(dt)}var Kg=ua.ReactCurrentBatchConfig;function Lg(dt,$){if(dt&&dt.defaultProps){$=A$3({},$),dt=dt.defaultProps;for(var lt in dt)$[lt]===void 0&&($[lt]=dt[lt]);return $}return $}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(dt){var $=Mg.current;E$6(Mg),dt._currentValue=$}function Sg(dt,$,lt){for(;dt!==null;){var ft=dt.alternate;if((dt.childLanes&$)!==$?(dt.childLanes|=$,ft!==null&&(ft.childLanes|=$)):ft!==null&&(ft.childLanes&$)!==$&&(ft.childLanes|=$),dt===lt)break;dt=dt.return}}function Tg(dt,$){Ng=dt,Pg=Og=null,dt=dt.dependencies,dt!==null&&dt.firstContext!==null&&(dt.lanes&$&&(Ug=!0),dt.firstContext=null)}function Vg(dt){var $=dt._currentValue;if(Pg!==dt)if(dt={context:dt,memoizedValue:$,next:null},Og===null){if(Ng===null)throw Error(p$8(308));Og=dt,Ng.dependencies={lanes:0,firstContext:dt}}else Og=Og.next=dt;return $}var Wg=null;function Xg(dt){Wg===null?Wg=[dt]:Wg.push(dt)}function Yg(dt,$,lt,ft){var St=$.interleaved;return St===null?(lt.next=lt,Xg($)):(lt.next=St.next,St.next=lt),$.interleaved=lt,Zg(dt,ft)}function Zg(dt,$){dt.lanes|=$;var lt=dt.alternate;for(lt!==null&&(lt.lanes|=$),lt=dt,dt=dt.return;dt!==null;)dt.childLanes|=$,lt=dt.alternate,lt!==null&&(lt.childLanes|=$),lt=dt,dt=dt.return;return lt.tag===3?lt.stateNode:null}var $g=!1;function ah(dt){dt.updateQueue={baseState:dt.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(dt,$){dt=dt.updateQueue,$.updateQueue===dt&&($.updateQueue={baseState:dt.baseState,firstBaseUpdate:dt.firstBaseUpdate,lastBaseUpdate:dt.lastBaseUpdate,shared:dt.shared,effects:dt.effects})}function ch(dt,$){return{eventTime:dt,lane:$,tag:0,payload:null,callback:null,next:null}}function dh(dt,$,lt){var ft=dt.updateQueue;if(ft===null)return null;if(ft=ft.shared,K$1&2){var St=ft.pending;return St===null?$.next=$:($.next=St.next,St.next=$),ft.pending=$,Zg(dt,lt)}return St=ft.interleaved,St===null?($.next=$,Xg(ft)):($.next=St.next,St.next=$),ft.interleaved=$,Zg(dt,lt)}function eh(dt,$,lt){if($=$.updateQueue,$!==null&&($=$.shared,(lt&4194240)!==0)){var ft=$.lanes;ft&=dt.pendingLanes,lt|=ft,$.lanes=lt,Cc(dt,lt)}}function fh(dt,$){var lt=dt.updateQueue,ft=dt.alternate;if(ft!==null&&(ft=ft.updateQueue,lt===ft)){var St=null,Tt=null;if(lt=lt.firstBaseUpdate,lt!==null){do{var Ct={eventTime:lt.eventTime,lane:lt.lane,tag:lt.tag,payload:lt.payload,callback:lt.callback,next:null};Tt===null?St=Tt=Ct:Tt=Tt.next=Ct,lt=lt.next}while(lt!==null);Tt===null?St=Tt=$:Tt=Tt.next=$}else St=Tt=$;lt={baseState:ft.baseState,firstBaseUpdate:St,lastBaseUpdate:Tt,shared:ft.shared,effects:ft.effects},dt.updateQueue=lt;return}dt=lt.lastBaseUpdate,dt===null?lt.firstBaseUpdate=$:dt.next=$,lt.lastBaseUpdate=$}function gh(dt,$,lt,ft){var St=dt.updateQueue;$g=!1;var Tt=St.firstBaseUpdate,Ct=St.lastBaseUpdate,At=St.shared.pending;if(At!==null){St.shared.pending=null;var Rt=At,kt=Rt.next;Rt.next=null,Ct===null?Tt=kt:Ct.next=kt,Ct=Rt;var Nt=dt.alternate;Nt!==null&&(Nt=Nt.updateQueue,At=Nt.lastBaseUpdate,At!==Ct&&(At===null?Nt.firstBaseUpdate=kt:At.next=kt,Nt.lastBaseUpdate=Rt))}if(Tt!==null){var Bt=St.baseState;Ct=0,Nt=kt=Rt=null,At=Tt;do{var Ut=At.lane,zt=At.eventTime;if((ft&Ut)===Ut){Nt!==null&&(Nt=Nt.next={eventTime:zt,lane:0,tag:At.tag,payload:At.payload,callback:At.callback,next:null});e:{var Zt=dt,ln=At;switch(Ut=$,zt=lt,ln.tag){case 1:if(Zt=ln.payload,typeof Zt=="function"){Bt=Zt.call(zt,Bt,Ut);break e}Bt=Zt;break e;case 3:Zt.flags=Zt.flags&-65537|128;case 0:if(Zt=ln.payload,Ut=typeof Zt=="function"?Zt.call(zt,Bt,Ut):Zt,Ut==null)break e;Bt=A$3({},Bt,Ut);break e;case 2:$g=!0}}At.callback!==null&&At.lane!==0&&(dt.flags|=64,Ut=St.effects,Ut===null?St.effects=[At]:Ut.push(At))}else zt={eventTime:zt,lane:Ut,tag:At.tag,payload:At.payload,callback:At.callback,next:null},Nt===null?(kt=Nt=zt,Rt=Bt):Nt=Nt.next=zt,Ct|=Ut;if(At=At.next,At===null){if(At=St.shared.pending,At===null)break;Ut=At,At=Ut.next,Ut.next=null,St.lastBaseUpdate=Ut,St.shared.pending=null}}while(1);if(Nt===null&&(Rt=Bt),St.baseState=Rt,St.firstBaseUpdate=kt,St.lastBaseUpdate=Nt,$=St.shared.interleaved,$!==null){St=$;do Ct|=St.lane,St=St.next;while(St!==$)}else Tt===null&&(St.shared.lanes=0);hh|=Ct,dt.lanes=Ct,dt.memoizedState=Bt}}function ih(dt,$,lt){if(dt=$.effects,$.effects=null,dt!==null)for($=0;$<dt.length;$++){var ft=dt[$],St=ft.callback;if(St!==null){if(ft.callback=null,ft=lt,typeof St!="function")throw Error(p$8(191,St));St.call(ft)}}}var jh=new aa.Component().refs;function kh(dt,$,lt,ft){$=dt.memoizedState,lt=lt(ft,$),lt=lt==null?$:A$3({},$,lt),dt.memoizedState=lt,dt.lanes===0&&(dt.updateQueue.baseState=lt)}var nh={isMounted:function(dt){return(dt=dt._reactInternals)?Vb(dt)===dt:!1},enqueueSetState:function(dt,$,lt){dt=dt._reactInternals;var ft=L$3(),St=lh(dt),Tt=ch(ft,St);Tt.payload=$,lt!=null&&(Tt.callback=lt),$=dh(dt,Tt,St),$!==null&&(mh($,dt,St,ft),eh($,dt,St))},enqueueReplaceState:function(dt,$,lt){dt=dt._reactInternals;var ft=L$3(),St=lh(dt),Tt=ch(ft,St);Tt.tag=1,Tt.payload=$,lt!=null&&(Tt.callback=lt),$=dh(dt,Tt,St),$!==null&&(mh($,dt,St,ft),eh($,dt,St))},enqueueForceUpdate:function(dt,$){dt=dt._reactInternals;var lt=L$3(),ft=lh(dt),St=ch(lt,ft);St.tag=2,$!=null&&(St.callback=$),$=dh(dt,St,ft),$!==null&&(mh($,dt,ft,lt),eh($,dt,ft))}};function oh(dt,$,lt,ft,St,Tt,Ct){return dt=dt.stateNode,typeof dt.shouldComponentUpdate=="function"?dt.shouldComponentUpdate(ft,Tt,Ct):$.prototype&&$.prototype.isPureReactComponent?!Ie$1(lt,ft)||!Ie$1(St,Tt):!0}function ph(dt,$,lt){var ft=!1,St=Vf,Tt=$.contextType;return typeof Tt=="object"&&Tt!==null?Tt=Vg(Tt):(St=Zf($)?Xf:H$4.current,ft=$.contextTypes,Tt=(ft=ft!=null)?Yf(dt,St):Vf),$=new $(lt,Tt),dt.memoizedState=$.state!==null&&$.state!==void 0?$.state:null,$.updater=nh,dt.stateNode=$,$._reactInternals=dt,ft&&(dt=dt.stateNode,dt.__reactInternalMemoizedUnmaskedChildContext=St,dt.__reactInternalMemoizedMaskedChildContext=Tt),$}function qh(dt,$,lt,ft){dt=$.state,typeof $.componentWillReceiveProps=="function"&&$.componentWillReceiveProps(lt,ft),typeof $.UNSAFE_componentWillReceiveProps=="function"&&$.UNSAFE_componentWillReceiveProps(lt,ft),$.state!==dt&&nh.enqueueReplaceState($,$.state,null)}function rh(dt,$,lt,ft){var St=dt.stateNode;St.props=lt,St.state=dt.memoizedState,St.refs=jh,ah(dt);var Tt=$.contextType;typeof Tt=="object"&&Tt!==null?St.context=Vg(Tt):(Tt=Zf($)?Xf:H$4.current,St.context=Yf(dt,Tt)),St.state=dt.memoizedState,Tt=$.getDerivedStateFromProps,typeof Tt=="function"&&(kh(dt,$,Tt,lt),St.state=dt.memoizedState),typeof $.getDerivedStateFromProps=="function"||typeof St.getSnapshotBeforeUpdate=="function"||typeof St.UNSAFE_componentWillMount!="function"&&typeof St.componentWillMount!="function"||($=St.state,typeof St.componentWillMount=="function"&&St.componentWillMount(),typeof St.UNSAFE_componentWillMount=="function"&&St.UNSAFE_componentWillMount(),$!==St.state&&nh.enqueueReplaceState(St,St.state,null),gh(dt,lt,St,ft),St.state=dt.memoizedState),typeof St.componentDidMount=="function"&&(dt.flags|=4194308)}function sh(dt,$,lt){if(dt=lt.ref,dt!==null&&typeof dt!="function"&&typeof dt!="object"){if(lt._owner){if(lt=lt._owner,lt){if(lt.tag!==1)throw Error(p$8(309));var ft=lt.stateNode}if(!ft)throw Error(p$8(147,dt));var St=ft,Tt=""+dt;return $!==null&&$.ref!==null&&typeof $.ref=="function"&&$.ref._stringRef===Tt?$.ref:($=function(Ct){var At=St.refs;At===jh&&(At=St.refs={}),Ct===null?delete At[Tt]:At[Tt]=Ct},$._stringRef=Tt,$)}if(typeof dt!="string")throw Error(p$8(284));if(!lt._owner)throw Error(p$8(290,dt))}return dt}function th(dt,$){throw dt=Object.prototype.toString.call($),Error(p$8(31,dt==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":dt))}function uh(dt){var $=dt._init;return $(dt._payload)}function vh(dt){function $(hn,pn){if(dt){var dn=hn.deletions;dn===null?(hn.deletions=[pn],hn.flags|=16):dn.push(pn)}}function lt(hn,pn){if(!dt)return null;for(;pn!==null;)$(hn,pn),pn=pn.sibling;return null}function ft(hn,pn){for(hn=new Map;pn!==null;)pn.key!==null?hn.set(pn.key,pn):hn.set(pn.index,pn),pn=pn.sibling;return hn}function St(hn,pn){return hn=wh(hn,pn),hn.index=0,hn.sibling=null,hn}function Tt(hn,pn,dn){return hn.index=dn,dt?(dn=hn.alternate,dn!==null?(dn=dn.index,dn<pn?(hn.flags|=2,pn):dn):(hn.flags|=2,pn)):(hn.flags|=1048576,pn)}function Ct(hn){return dt&&hn.alternate===null&&(hn.flags|=2),hn}function At(hn,pn,dn,gn){return pn===null||pn.tag!==6?(pn=xh(dn,hn.mode,gn),pn.return=hn,pn):(pn=St(pn,dn),pn.return=hn,pn)}function Rt(hn,pn,dn,gn){var vn=dn.type;return vn===ya?Nt(hn,pn,dn.props.children,gn,dn.key):pn!==null&&(pn.elementType===vn||typeof vn=="object"&&vn!==null&&vn.$$typeof===Ha&&uh(vn)===pn.type)?(gn=St(pn,dn.props),gn.ref=sh(hn,pn,dn),gn.return=hn,gn):(gn=yh(dn.type,dn.key,dn.props,null,hn.mode,gn),gn.ref=sh(hn,pn,dn),gn.return=hn,gn)}function kt(hn,pn,dn,gn){return pn===null||pn.tag!==4||pn.stateNode.containerInfo!==dn.containerInfo||pn.stateNode.implementation!==dn.implementation?(pn=zh(dn,hn.mode,gn),pn.return=hn,pn):(pn=St(pn,dn.children||[]),pn.return=hn,pn)}function Nt(hn,pn,dn,gn,vn){return pn===null||pn.tag!==7?(pn=Ah(dn,hn.mode,gn,vn),pn.return=hn,pn):(pn=St(pn,dn),pn.return=hn,pn)}function Bt(hn,pn,dn){if(typeof pn=="string"&&pn!==""||typeof pn=="number")return pn=xh(""+pn,hn.mode,dn),pn.return=hn,pn;if(typeof pn=="object"&&pn!==null){switch(pn.$$typeof){case va:return dn=yh(pn.type,pn.key,pn.props,null,hn.mode,dn),dn.ref=sh(hn,null,pn),dn.return=hn,dn;case wa:return pn=zh(pn,hn.mode,dn),pn.return=hn,pn;case Ha:var gn=pn._init;return Bt(hn,gn(pn._payload),dn)}if(eb(pn)||Ka(pn))return pn=Ah(pn,hn.mode,dn,null),pn.return=hn,pn;th(hn,pn)}return null}function Ut(hn,pn,dn,gn){var vn=pn!==null?pn.key:null;if(typeof dn=="string"&&dn!==""||typeof dn=="number")return vn!==null?null:At(hn,pn,""+dn,gn);if(typeof dn=="object"&&dn!==null){switch(dn.$$typeof){case va:return dn.key===vn?Rt(hn,pn,dn,gn):null;case wa:return dn.key===vn?kt(hn,pn,dn,gn):null;case Ha:return vn=dn._init,Ut(hn,pn,vn(dn._payload),gn)}if(eb(dn)||Ka(dn))return vn!==null?null:Nt(hn,pn,dn,gn,null);th(hn,dn)}return null}function zt(hn,pn,dn,gn,vn){if(typeof gn=="string"&&gn!==""||typeof gn=="number")return hn=hn.get(dn)||null,At(pn,hn,""+gn,vn);if(typeof gn=="object"&&gn!==null){switch(gn.$$typeof){case va:return hn=hn.get(gn.key===null?dn:gn.key)||null,Rt(pn,hn,gn,vn);case wa:return hn=hn.get(gn.key===null?dn:gn.key)||null,kt(pn,hn,gn,vn);case Ha:var Tn=gn._init;return zt(hn,pn,dn,Tn(gn._payload),vn)}if(eb(gn)||Ka(gn))return hn=hn.get(dn)||null,Nt(pn,hn,gn,vn,null);th(pn,gn)}return null}function Zt(hn,pn,dn,gn){for(var vn=null,Tn=null,Cn=pn,$n=pn=0,xn=null;Cn!==null&&$n<dn.length;$n++){Cn.index>$n?(xn=Cn,Cn=null):xn=Cn.sibling;var Rn=Ut(hn,Cn,dn[$n],gn);if(Rn===null){Cn===null&&(Cn=xn);break}dt&&Cn&&Rn.alternate===null&&$(hn,Cn),pn=Tt(Rn,pn,$n),Tn===null?vn=Rn:Tn.sibling=Rn,Tn=Rn,Cn=xn}if($n===dn.length)return lt(hn,Cn),I$3&&tg(hn,$n),vn;if(Cn===null){for(;$n<dn.length;$n++)Cn=Bt(hn,dn[$n],gn),Cn!==null&&(pn=Tt(Cn,pn,$n),Tn===null?vn=Cn:Tn.sibling=Cn,Tn=Cn);return I$3&&tg(hn,$n),vn}for(Cn=ft(hn,Cn);$n<dn.length;$n++)xn=zt(Cn,hn,$n,dn[$n],gn),xn!==null&&(dt&&xn.alternate!==null&&Cn.delete(xn.key===null?$n:xn.key),pn=Tt(xn,pn,$n),Tn===null?vn=xn:Tn.sibling=xn,Tn=xn);return dt&&Cn.forEach(function(Pn){return $(hn,Pn)}),I$3&&tg(hn,$n),vn}function ln(hn,pn,dn,gn){var vn=Ka(dn);if(typeof vn!="function")throw Error(p$8(150));if(dn=vn.call(dn),dn==null)throw Error(p$8(151));for(var Tn=vn=null,Cn=pn,$n=pn=0,xn=null,Rn=dn.next();Cn!==null&&!Rn.done;$n++,Rn=dn.next()){Cn.index>$n?(xn=Cn,Cn=null):xn=Cn.sibling;var Pn=Ut(hn,Cn,Rn.value,gn);if(Pn===null){Cn===null&&(Cn=xn);break}dt&&Cn&&Pn.alternate===null&&$(hn,Cn),pn=Tt(Pn,pn,$n),Tn===null?vn=Pn:Tn.sibling=Pn,Tn=Pn,Cn=xn}if(Rn.done)return lt(hn,Cn),I$3&&tg(hn,$n),vn;if(Cn===null){for(;!Rn.done;$n++,Rn=dn.next())Rn=Bt(hn,Rn.value,gn),Rn!==null&&(pn=Tt(Rn,pn,$n),Tn===null?vn=Rn:Tn.sibling=Rn,Tn=Rn);return I$3&&tg(hn,$n),vn}for(Cn=ft(hn,Cn);!Rn.done;$n++,Rn=dn.next())Rn=zt(Cn,hn,$n,Rn.value,gn),Rn!==null&&(dt&&Rn.alternate!==null&&Cn.delete(Rn.key===null?$n:Rn.key),pn=Tt(Rn,pn,$n),Tn===null?vn=Rn:Tn.sibling=Rn,Tn=Rn);return dt&&Cn.forEach(function(Nn){return $(hn,Nn)}),I$3&&tg(hn,$n),vn}function cn(hn,pn,dn,gn){if(typeof dn=="object"&&dn!==null&&dn.type===ya&&dn.key===null&&(dn=dn.props.children),typeof dn=="object"&&dn!==null){switch(dn.$$typeof){case va:e:{for(var vn=dn.key,Tn=pn;Tn!==null;){if(Tn.key===vn){if(vn=dn.type,vn===ya){if(Tn.tag===7){lt(hn,Tn.sibling),pn=St(Tn,dn.props.children),pn.return=hn,hn=pn;break e}}else if(Tn.elementType===vn||typeof vn=="object"&&vn!==null&&vn.$$typeof===Ha&&uh(vn)===Tn.type){lt(hn,Tn.sibling),pn=St(Tn,dn.props),pn.ref=sh(hn,Tn,dn),pn.return=hn,hn=pn;break e}lt(hn,Tn);break}else $(hn,Tn);Tn=Tn.sibling}dn.type===ya?(pn=Ah(dn.props.children,hn.mode,gn,dn.key),pn.return=hn,hn=pn):(gn=yh(dn.type,dn.key,dn.props,null,hn.mode,gn),gn.ref=sh(hn,pn,dn),gn.return=hn,hn=gn)}return Ct(hn);case wa:e:{for(Tn=dn.key;pn!==null;){if(pn.key===Tn)if(pn.tag===4&&pn.stateNode.containerInfo===dn.containerInfo&&pn.stateNode.implementation===dn.implementation){lt(hn,pn.sibling),pn=St(pn,dn.children||[]),pn.return=hn,hn=pn;break e}else{lt(hn,pn);break}else $(hn,pn);pn=pn.sibling}pn=zh(dn,hn.mode,gn),pn.return=hn,hn=pn}return Ct(hn);case Ha:return Tn=dn._init,cn(hn,pn,Tn(dn._payload),gn)}if(eb(dn))return Zt(hn,pn,dn,gn);if(Ka(dn))return ln(hn,pn,dn,gn);th(hn,dn)}return typeof dn=="string"&&dn!==""||typeof dn=="number"?(dn=""+dn,pn!==null&&pn.tag===6?(lt(hn,pn.sibling),pn=St(pn,dn),pn.return=hn,hn=pn):(lt(hn,pn),pn=xh(dn,hn.mode,gn),pn.return=hn,hn=pn),Ct(hn)):lt(hn,pn)}return cn}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(dt){if(dt===Dh)throw Error(p$8(174));return dt}function Ih(dt,$){switch(G$1(Gh,$),G$1(Fh,dt),G$1(Eh,Dh),dt=$.nodeType,dt){case 9:case 11:$=($=$.documentElement)?$.namespaceURI:lb(null,"");break;default:dt=dt===8?$.parentNode:$,$=dt.namespaceURI||null,dt=dt.tagName,$=lb($,dt)}E$6(Eh),G$1(Eh,$)}function Jh(){E$6(Eh),E$6(Fh),E$6(Gh)}function Kh(dt){Hh(Gh.current);var $=Hh(Eh.current),lt=lb($,dt.type);$!==lt&&(G$1(Fh,dt),G$1(Eh,lt))}function Lh(dt){Fh.current===dt&&(E$6(Eh),E$6(Fh))}var M$2=Uf(0);function Mh(dt){for(var $=dt;$!==null;){if($.tag===13){var lt=$.memoizedState;if(lt!==null&&(lt=lt.dehydrated,lt===null||lt.data==="$?"||lt.data==="$!"))return $}else if($.tag===19&&$.memoizedProps.revealOrder!==void 0){if($.flags&128)return $}else if($.child!==null){$.child.return=$,$=$.child;continue}if($===dt)break;for(;$.sibling===null;){if($.return===null||$.return===dt)return null;$=$.return}$.sibling.return=$.return,$=$.sibling}return null}var Nh=[];function Oh(){for(var dt=0;dt<Nh.length;dt++)Nh[dt]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua.ReactCurrentDispatcher,Qh=ua.ReactCurrentBatchConfig,Rh=0,N$2=null,O$4=null,P$3=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q$4(){throw Error(p$8(321))}function Wh(dt,$){if($===null)return!1;for(var lt=0;lt<$.length&&lt<dt.length;lt++)if(!He$2(dt[lt],$[lt]))return!1;return!0}function Xh(dt,$,lt,ft,St,Tt){if(Rh=Tt,N$2=$,$.memoizedState=null,$.updateQueue=null,$.lanes=0,Ph.current=dt===null||dt.memoizedState===null?Yh:Zh,dt=lt(ft,St),Th){Tt=0;do{if(Th=!1,Uh=0,25<=Tt)throw Error(p$8(301));Tt+=1,P$3=O$4=null,$.updateQueue=null,Ph.current=$h,dt=lt(ft,St)}while(Th)}if(Ph.current=ai,$=O$4!==null&&O$4.next!==null,Rh=0,P$3=O$4=N$2=null,Sh=!1,$)throw Error(p$8(300));return dt}function bi(){var dt=Uh!==0;return Uh=0,dt}function ci(){var dt={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$3===null?N$2.memoizedState=P$3=dt:P$3=P$3.next=dt,P$3}function di(){if(O$4===null){var dt=N$2.alternate;dt=dt!==null?dt.memoizedState:null}else dt=O$4.next;var $=P$3===null?N$2.memoizedState:P$3.next;if($!==null)P$3=$,O$4=dt;else{if(dt===null)throw Error(p$8(310));O$4=dt,dt={memoizedState:O$4.memoizedState,baseState:O$4.baseState,baseQueue:O$4.baseQueue,queue:O$4.queue,next:null},P$3===null?N$2.memoizedState=P$3=dt:P$3=P$3.next=dt}return P$3}function ei(dt,$){return typeof $=="function"?$(dt):$}function fi(dt){var $=di(),lt=$.queue;if(lt===null)throw Error(p$8(311));lt.lastRenderedReducer=dt;var ft=O$4,St=ft.baseQueue,Tt=lt.pending;if(Tt!==null){if(St!==null){var Ct=St.next;St.next=Tt.next,Tt.next=Ct}ft.baseQueue=St=Tt,lt.pending=null}if(St!==null){Tt=St.next,ft=ft.baseState;var At=Ct=null,Rt=null,kt=Tt;do{var Nt=kt.lane;if((Rh&Nt)===Nt)Rt!==null&&(Rt=Rt.next={lane:0,action:kt.action,hasEagerState:kt.hasEagerState,eagerState:kt.eagerState,next:null}),ft=kt.hasEagerState?kt.eagerState:dt(ft,kt.action);else{var Bt={lane:Nt,action:kt.action,hasEagerState:kt.hasEagerState,eagerState:kt.eagerState,next:null};Rt===null?(At=Rt=Bt,Ct=ft):Rt=Rt.next=Bt,N$2.lanes|=Nt,hh|=Nt}kt=kt.next}while(kt!==null&&kt!==Tt);Rt===null?Ct=ft:Rt.next=At,He$2(ft,$.memoizedState)||(Ug=!0),$.memoizedState=ft,$.baseState=Ct,$.baseQueue=Rt,lt.lastRenderedState=ft}if(dt=lt.interleaved,dt!==null){St=dt;do Tt=St.lane,N$2.lanes|=Tt,hh|=Tt,St=St.next;while(St!==dt)}else St===null&&(lt.lanes=0);return[$.memoizedState,lt.dispatch]}function gi(dt){var $=di(),lt=$.queue;if(lt===null)throw Error(p$8(311));lt.lastRenderedReducer=dt;var ft=lt.dispatch,St=lt.pending,Tt=$.memoizedState;if(St!==null){lt.pending=null;var Ct=St=St.next;do Tt=dt(Tt,Ct.action),Ct=Ct.next;while(Ct!==St);He$2(Tt,$.memoizedState)||(Ug=!0),$.memoizedState=Tt,$.baseQueue===null&&($.baseState=Tt),lt.lastRenderedState=Tt}return[Tt,ft]}function hi(){}function ii(dt,$){var lt=N$2,ft=di(),St=$(),Tt=!He$2(ft.memoizedState,St);if(Tt&&(ft.memoizedState=St,Ug=!0),ft=ft.queue,ji(ki.bind(null,lt,ft,dt),[dt]),ft.getSnapshot!==$||Tt||P$3!==null&&P$3.memoizedState.tag&1){if(lt.flags|=2048,li(9,mi.bind(null,lt,ft,St,$),void 0,null),R$3===null)throw Error(p$8(349));Rh&30||ni(lt,$,St)}return St}function ni(dt,$,lt){dt.flags|=16384,dt={getSnapshot:$,value:lt},$=N$2.updateQueue,$===null?($={lastEffect:null,stores:null},N$2.updateQueue=$,$.stores=[dt]):(lt=$.stores,lt===null?$.stores=[dt]:lt.push(dt))}function mi(dt,$,lt,ft){$.value=lt,$.getSnapshot=ft,oi($)&&pi(dt)}function ki(dt,$,lt){return lt(function(){oi($)&&pi(dt)})}function oi(dt){var $=dt.getSnapshot;dt=dt.value;try{var lt=$();return!He$2(dt,lt)}catch{return!0}}function pi(dt){var $=Zg(dt,1);$!==null&&mh($,dt,1,-1)}function qi(dt){var $=ci();return typeof dt=="function"&&(dt=dt()),$.memoizedState=$.baseState=dt,dt={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:dt},$.queue=dt,dt=dt.dispatch=ri.bind(null,N$2,dt),[$.memoizedState,dt]}function li(dt,$,lt,ft){return dt={tag:dt,create:$,destroy:lt,deps:ft,next:null},$=N$2.updateQueue,$===null?($={lastEffect:null,stores:null},N$2.updateQueue=$,$.lastEffect=dt.next=dt):(lt=$.lastEffect,lt===null?$.lastEffect=dt.next=dt:(ft=lt.next,lt.next=dt,dt.next=ft,$.lastEffect=dt)),dt}function si(){return di().memoizedState}function ti(dt,$,lt,ft){var St=ci();N$2.flags|=dt,St.memoizedState=li(1|$,lt,void 0,ft===void 0?null:ft)}function ui(dt,$,lt,ft){var St=di();ft=ft===void 0?null:ft;var Tt=void 0;if(O$4!==null){var Ct=O$4.memoizedState;if(Tt=Ct.destroy,ft!==null&&Wh(ft,Ct.deps)){St.memoizedState=li($,lt,Tt,ft);return}}N$2.flags|=dt,St.memoizedState=li(1|$,lt,Tt,ft)}function vi(dt,$){return ti(8390656,8,dt,$)}function ji(dt,$){return ui(2048,8,dt,$)}function wi(dt,$){return ui(4,2,dt,$)}function xi(dt,$){return ui(4,4,dt,$)}function yi(dt,$){if(typeof $=="function")return dt=dt(),$(dt),function(){$(null)};if($!=null)return dt=dt(),$.current=dt,function(){$.current=null}}function zi(dt,$,lt){return lt=lt!=null?lt.concat([dt]):null,ui(4,4,yi.bind(null,$,dt),lt)}function Ai(){}function Bi(dt,$){var lt=di();$=$===void 0?null:$;var ft=lt.memoizedState;return ft!==null&&$!==null&&Wh($,ft[1])?ft[0]:(lt.memoizedState=[dt,$],dt)}function Ci(dt,$){var lt=di();$=$===void 0?null:$;var ft=lt.memoizedState;return ft!==null&&$!==null&&Wh($,ft[1])?ft[0]:(dt=dt(),lt.memoizedState=[dt,$],dt)}function Di(dt,$,lt){return Rh&21?(He$2(lt,$)||(lt=yc(),N$2.lanes|=lt,hh|=lt,dt.baseState=!0),$):(dt.baseState&&(dt.baseState=!1,Ug=!0),dt.memoizedState=lt)}function Ei(dt,$){var lt=C$3;C$3=lt!==0&&4>lt?lt:4,dt(!0);var ft=Qh.transition;Qh.transition={};try{dt(!1),$()}finally{C$3=lt,Qh.transition=ft}}function Fi(){return di().memoizedState}function Gi(dt,$,lt){var ft=lh(dt);if(lt={lane:ft,action:lt,hasEagerState:!1,eagerState:null,next:null},Hi(dt))Ii($,lt);else if(lt=Yg(dt,$,lt,ft),lt!==null){var St=L$3();mh(lt,dt,ft,St),Ji(lt,$,ft)}}function ri(dt,$,lt){var ft=lh(dt),St={lane:ft,action:lt,hasEagerState:!1,eagerState:null,next:null};if(Hi(dt))Ii($,St);else{var Tt=dt.alternate;if(dt.lanes===0&&(Tt===null||Tt.lanes===0)&&(Tt=$.lastRenderedReducer,Tt!==null))try{var Ct=$.lastRenderedState,At=Tt(Ct,lt);if(St.hasEagerState=!0,St.eagerState=At,He$2(At,Ct)){var Rt=$.interleaved;Rt===null?(St.next=St,Xg($)):(St.next=Rt.next,Rt.next=St),$.interleaved=St;return}}catch{}finally{}lt=Yg(dt,$,St,ft),lt!==null&&(St=L$3(),mh(lt,dt,ft,St),Ji(lt,$,ft))}}function Hi(dt){var $=dt.alternate;return dt===N$2||$!==null&&$===N$2}function Ii(dt,$){Th=Sh=!0;var lt=dt.pending;lt===null?$.next=$:($.next=lt.next,lt.next=$),dt.pending=$}function Ji(dt,$,lt){if(lt&4194240){var ft=$.lanes;ft&=dt.pendingLanes,lt|=ft,$.lanes=lt,Cc(dt,lt)}}var ai={readContext:Vg,useCallback:Q$4,useContext:Q$4,useEffect:Q$4,useImperativeHandle:Q$4,useInsertionEffect:Q$4,useLayoutEffect:Q$4,useMemo:Q$4,useReducer:Q$4,useRef:Q$4,useState:Q$4,useDebugValue:Q$4,useDeferredValue:Q$4,useTransition:Q$4,useMutableSource:Q$4,useSyncExternalStore:Q$4,useId:Q$4,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(dt,$){return ci().memoizedState=[dt,$===void 0?null:$],dt},useContext:Vg,useEffect:vi,useImperativeHandle:function(dt,$,lt){return lt=lt!=null?lt.concat([dt]):null,ti(4194308,4,yi.bind(null,$,dt),lt)},useLayoutEffect:function(dt,$){return ti(4194308,4,dt,$)},useInsertionEffect:function(dt,$){return ti(4,2,dt,$)},useMemo:function(dt,$){var lt=ci();return $=$===void 0?null:$,dt=dt(),lt.memoizedState=[dt,$],dt},useReducer:function(dt,$,lt){var ft=ci();return $=lt!==void 0?lt($):$,ft.memoizedState=ft.baseState=$,dt={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:dt,lastRenderedState:$},ft.queue=dt,dt=dt.dispatch=Gi.bind(null,N$2,dt),[ft.memoizedState,dt]},useRef:function(dt){var $=ci();return dt={current:dt},$.memoizedState=dt},useState:qi,useDebugValue:Ai,useDeferredValue:function(dt){return ci().memoizedState=dt},useTransition:function(){var dt=qi(!1),$=dt[0];return dt=Ei.bind(null,dt[1]),ci().memoizedState=dt,[$,dt]},useMutableSource:function(){},useSyncExternalStore:function(dt,$,lt){var ft=N$2,St=ci();if(I$3){if(lt===void 0)throw Error(p$8(407));lt=lt()}else{if(lt=$(),R$3===null)throw Error(p$8(349));Rh&30||ni(ft,$,lt)}St.memoizedState=lt;var Tt={value:lt,getSnapshot:$};return St.queue=Tt,vi(ki.bind(null,ft,Tt,dt),[dt]),ft.flags|=2048,li(9,mi.bind(null,ft,Tt,lt,$),void 0,null),lt},useId:function(){var dt=ci(),$=R$3.identifierPrefix;if(I$3){var lt=sg,ft=rg;lt=(ft&~(1<<32-oc(ft)-1)).toString(32)+lt,$=":"+$+"R"+lt,lt=Uh++,0<lt&&($+="H"+lt.toString(32)),$+=":"}else lt=Vh++,$=":"+$+"r"+lt.toString(32)+":";return dt.memoizedState=$},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(dt){var $=di();return Di($,O$4.memoizedState,dt)},useTransition:function(){var dt=fi(ei)[0],$=di().memoizedState;return[dt,$]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(dt){var $=di();return O$4===null?$.memoizedState=dt:Di($,O$4.memoizedState,dt)},useTransition:function(){var dt=gi(ei)[0],$=di().memoizedState;return[dt,$]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(dt,$){try{var lt="",ft=$;do lt+=Pa(ft),ft=ft.return;while(ft);var St=lt}catch(Tt){St=`
Error generating stack: `+Tt.message+`
`+Tt.stack}return{value:dt,source:$,stack:St,digest:null}}function Li(dt,$,lt){return{value:dt,source:null,stack:lt??null,digest:$??null}}function Mi(dt,$){try{console.error($.value)}catch(lt){setTimeout(function(){throw lt})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(dt,$,lt){lt=ch(-1,lt),lt.tag=3,lt.payload={element:null};var ft=$.value;return lt.callback=function(){Pi||(Pi=!0,Qi=ft),Mi(dt,$)},lt}function Ri(dt,$,lt){lt=ch(-1,lt),lt.tag=3;var ft=dt.type.getDerivedStateFromError;if(typeof ft=="function"){var St=$.value;lt.payload=function(){return ft(St)},lt.callback=function(){Mi(dt,$)}}var Tt=dt.stateNode;return Tt!==null&&typeof Tt.componentDidCatch=="function"&&(lt.callback=function(){Mi(dt,$),typeof ft!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var Ct=$.stack;this.componentDidCatch($.value,{componentStack:Ct!==null?Ct:""})}),lt}function Ti(dt,$,lt){var ft=dt.pingCache;if(ft===null){ft=dt.pingCache=new Ni;var St=new Set;ft.set($,St)}else St=ft.get($),St===void 0&&(St=new Set,ft.set($,St));St.has(lt)||(St.add(lt),dt=Ui.bind(null,dt,$,lt),$.then(dt,dt))}function Vi(dt){do{var $;if(($=dt.tag===13)&&($=dt.memoizedState,$=$!==null?$.dehydrated!==null:!0),$)return dt;dt=dt.return}while(dt!==null);return null}function Wi(dt,$,lt,ft,St){return dt.mode&1?(dt.flags|=65536,dt.lanes=St,dt):(dt===$?dt.flags|=65536:(dt.flags|=128,lt.flags|=131072,lt.flags&=-52805,lt.tag===1&&(lt.alternate===null?lt.tag=17:($=ch(-1,1),$.tag=2,dh(lt,$,1))),lt.lanes|=1),dt)}var Xi=ua.ReactCurrentOwner,Ug=!1;function Yi(dt,$,lt,ft){$.child=dt===null?Ch($,null,lt,ft):Bh($,dt.child,lt,ft)}function Zi(dt,$,lt,ft,St){lt=lt.render;var Tt=$.ref;return Tg($,St),ft=Xh(dt,$,lt,ft,Tt,St),lt=bi(),dt!==null&&!Ug?($.updateQueue=dt.updateQueue,$.flags&=-2053,dt.lanes&=~St,$i(dt,$,St)):(I$3&&lt&&vg($),$.flags|=1,Yi(dt,$,ft,St),$.child)}function aj(dt,$,lt,ft,St){if(dt===null){var Tt=lt.type;return typeof Tt=="function"&&!bj(Tt)&&Tt.defaultProps===void 0&&lt.compare===null&&lt.defaultProps===void 0?($.tag=15,$.type=Tt,cj(dt,$,Tt,ft,St)):(dt=yh(lt.type,null,ft,$,$.mode,St),dt.ref=$.ref,dt.return=$,$.child=dt)}if(Tt=dt.child,!(dt.lanes&St)){var Ct=Tt.memoizedProps;if(lt=lt.compare,lt=lt!==null?lt:Ie$1,lt(Ct,ft)&&dt.ref===$.ref)return $i(dt,$,St)}return $.flags|=1,dt=wh(Tt,ft),dt.ref=$.ref,dt.return=$,$.child=dt}function cj(dt,$,lt,ft,St){if(dt!==null){var Tt=dt.memoizedProps;if(Ie$1(Tt,ft)&&dt.ref===$.ref)if(Ug=!1,$.pendingProps=ft=Tt,(dt.lanes&St)!==0)dt.flags&131072&&(Ug=!0);else return $.lanes=dt.lanes,$i(dt,$,St)}return dj(dt,$,lt,ft,St)}function ej(dt,$,lt){var ft=$.pendingProps,St=ft.children,Tt=dt!==null?dt.memoizedState:null;if(ft.mode==="hidden")if(!($.mode&1))$.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(fj,gj),gj|=lt;else{if(!(lt&1073741824))return dt=Tt!==null?Tt.baseLanes|lt:lt,$.lanes=$.childLanes=1073741824,$.memoizedState={baseLanes:dt,cachePool:null,transitions:null},$.updateQueue=null,G$1(fj,gj),gj|=dt,null;$.memoizedState={baseLanes:0,cachePool:null,transitions:null},ft=Tt!==null?Tt.baseLanes:lt,G$1(fj,gj),gj|=ft}else Tt!==null?(ft=Tt.baseLanes|lt,$.memoizedState=null):ft=lt,G$1(fj,gj),gj|=ft;return Yi(dt,$,St,lt),$.child}function hj(dt,$){var lt=$.ref;(dt===null&&lt!==null||dt!==null&&dt.ref!==lt)&&($.flags|=512,$.flags|=2097152)}function dj(dt,$,lt,ft,St){var Tt=Zf(lt)?Xf:H$4.current;return Tt=Yf($,Tt),Tg($,St),lt=Xh(dt,$,lt,ft,Tt,St),ft=bi(),dt!==null&&!Ug?($.updateQueue=dt.updateQueue,$.flags&=-2053,dt.lanes&=~St,$i(dt,$,St)):(I$3&&ft&&vg($),$.flags|=1,Yi(dt,$,lt,St),$.child)}function ij(dt,$,lt,ft,St){if(Zf(lt)){var Tt=!0;cg($)}else Tt=!1;if(Tg($,St),$.stateNode===null)jj(dt,$),ph($,lt,ft),rh($,lt,ft,St),ft=!0;else if(dt===null){var Ct=$.stateNode,At=$.memoizedProps;Ct.props=At;var Rt=Ct.context,kt=lt.contextType;typeof kt=="object"&&kt!==null?kt=Vg(kt):(kt=Zf(lt)?Xf:H$4.current,kt=Yf($,kt));var Nt=lt.getDerivedStateFromProps,Bt=typeof Nt=="function"||typeof Ct.getSnapshotBeforeUpdate=="function";Bt||typeof Ct.UNSAFE_componentWillReceiveProps!="function"&&typeof Ct.componentWillReceiveProps!="function"||(At!==ft||Rt!==kt)&&qh($,Ct,ft,kt),$g=!1;var Ut=$.memoizedState;Ct.state=Ut,gh($,ft,Ct,St),Rt=$.memoizedState,At!==ft||Ut!==Rt||Wf.current||$g?(typeof Nt=="function"&&(kh($,lt,Nt,ft),Rt=$.memoizedState),(At=$g||oh($,lt,At,ft,Ut,Rt,kt))?(Bt||typeof Ct.UNSAFE_componentWillMount!="function"&&typeof Ct.componentWillMount!="function"||(typeof Ct.componentWillMount=="function"&&Ct.componentWillMount(),typeof Ct.UNSAFE_componentWillMount=="function"&&Ct.UNSAFE_componentWillMount()),typeof Ct.componentDidMount=="function"&&($.flags|=4194308)):(typeof Ct.componentDidMount=="function"&&($.flags|=4194308),$.memoizedProps=ft,$.memoizedState=Rt),Ct.props=ft,Ct.state=Rt,Ct.context=kt,ft=At):(typeof Ct.componentDidMount=="function"&&($.flags|=4194308),ft=!1)}else{Ct=$.stateNode,bh(dt,$),At=$.memoizedProps,kt=$.type===$.elementType?At:Lg($.type,At),Ct.props=kt,Bt=$.pendingProps,Ut=Ct.context,Rt=lt.contextType,typeof Rt=="object"&&Rt!==null?Rt=Vg(Rt):(Rt=Zf(lt)?Xf:H$4.current,Rt=Yf($,Rt));var zt=lt.getDerivedStateFromProps;(Nt=typeof zt=="function"||typeof Ct.getSnapshotBeforeUpdate=="function")||typeof Ct.UNSAFE_componentWillReceiveProps!="function"&&typeof Ct.componentWillReceiveProps!="function"||(At!==Bt||Ut!==Rt)&&qh($,Ct,ft,Rt),$g=!1,Ut=$.memoizedState,Ct.state=Ut,gh($,ft,Ct,St);var Zt=$.memoizedState;At!==Bt||Ut!==Zt||Wf.current||$g?(typeof zt=="function"&&(kh($,lt,zt,ft),Zt=$.memoizedState),(kt=$g||oh($,lt,kt,ft,Ut,Zt,Rt)||!1)?(Nt||typeof Ct.UNSAFE_componentWillUpdate!="function"&&typeof Ct.componentWillUpdate!="function"||(typeof Ct.componentWillUpdate=="function"&&Ct.componentWillUpdate(ft,Zt,Rt),typeof Ct.UNSAFE_componentWillUpdate=="function"&&Ct.UNSAFE_componentWillUpdate(ft,Zt,Rt)),typeof Ct.componentDidUpdate=="function"&&($.flags|=4),typeof Ct.getSnapshotBeforeUpdate=="function"&&($.flags|=1024)):(typeof Ct.componentDidUpdate!="function"||At===dt.memoizedProps&&Ut===dt.memoizedState||($.flags|=4),typeof Ct.getSnapshotBeforeUpdate!="function"||At===dt.memoizedProps&&Ut===dt.memoizedState||($.flags|=1024),$.memoizedProps=ft,$.memoizedState=Zt),Ct.props=ft,Ct.state=Zt,Ct.context=Rt,ft=kt):(typeof Ct.componentDidUpdate!="function"||At===dt.memoizedProps&&Ut===dt.memoizedState||($.flags|=4),typeof Ct.getSnapshotBeforeUpdate!="function"||At===dt.memoizedProps&&Ut===dt.memoizedState||($.flags|=1024),ft=!1)}return kj(dt,$,lt,ft,Tt,St)}function kj(dt,$,lt,ft,St,Tt){hj(dt,$);var Ct=($.flags&128)!==0;if(!ft&&!Ct)return St&&dg($,lt,!1),$i(dt,$,Tt);ft=$.stateNode,Xi.current=$;var At=Ct&&typeof lt.getDerivedStateFromError!="function"?null:ft.render();return $.flags|=1,dt!==null&&Ct?($.child=Bh($,dt.child,null,Tt),$.child=Bh($,null,At,Tt)):Yi(dt,$,At,Tt),$.memoizedState=ft.state,St&&dg($,lt,!0),$.child}function lj(dt){var $=dt.stateNode;$.pendingContext?ag(dt,$.pendingContext,$.pendingContext!==$.context):$.context&&ag(dt,$.context,!1),Ih(dt,$.containerInfo)}function mj(dt,$,lt,ft,St){return Ig(),Jg(St),$.flags|=256,Yi(dt,$,lt,ft),$.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(dt){return{baseLanes:dt,cachePool:null,transitions:null}}function pj(dt,$,lt){var ft=$.pendingProps,St=M$2.current,Tt=!1,Ct=($.flags&128)!==0,At;if((At=Ct)||(At=dt!==null&&dt.memoizedState===null?!1:(St&2)!==0),At?(Tt=!0,$.flags&=-129):(dt===null||dt.memoizedState!==null)&&(St|=1),G$1(M$2,St&1),dt===null)return Eg($),dt=$.memoizedState,dt!==null&&(dt=dt.dehydrated,dt!==null)?($.mode&1?dt.data==="$!"?$.lanes=8:$.lanes=1073741824:$.lanes=1,null):(Ct=ft.children,dt=ft.fallback,Tt?(ft=$.mode,Tt=$.child,Ct={mode:"hidden",children:Ct},!(ft&1)&&Tt!==null?(Tt.childLanes=0,Tt.pendingProps=Ct):Tt=qj(Ct,ft,0,null),dt=Ah(dt,ft,lt,null),Tt.return=$,dt.return=$,Tt.sibling=dt,$.child=Tt,$.child.memoizedState=oj(lt),$.memoizedState=nj,dt):rj($,Ct));if(St=dt.memoizedState,St!==null&&(At=St.dehydrated,At!==null))return sj(dt,$,Ct,ft,At,St,lt);if(Tt){Tt=ft.fallback,Ct=$.mode,St=dt.child,At=St.sibling;var Rt={mode:"hidden",children:ft.children};return!(Ct&1)&&$.child!==St?(ft=$.child,ft.childLanes=0,ft.pendingProps=Rt,$.deletions=null):(ft=wh(St,Rt),ft.subtreeFlags=St.subtreeFlags&14680064),At!==null?Tt=wh(At,Tt):(Tt=Ah(Tt,Ct,lt,null),Tt.flags|=2),Tt.return=$,ft.return=$,ft.sibling=Tt,$.child=ft,ft=Tt,Tt=$.child,Ct=dt.child.memoizedState,Ct=Ct===null?oj(lt):{baseLanes:Ct.baseLanes|lt,cachePool:null,transitions:Ct.transitions},Tt.memoizedState=Ct,Tt.childLanes=dt.childLanes&~lt,$.memoizedState=nj,ft}return Tt=dt.child,dt=Tt.sibling,ft=wh(Tt,{mode:"visible",children:ft.children}),!($.mode&1)&&(ft.lanes=lt),ft.return=$,ft.sibling=null,dt!==null&&(lt=$.deletions,lt===null?($.deletions=[dt],$.flags|=16):lt.push(dt)),$.child=ft,$.memoizedState=null,ft}function rj(dt,$){return $=qj({mode:"visible",children:$},dt.mode,0,null),$.return=dt,dt.child=$}function tj(dt,$,lt,ft){return ft!==null&&Jg(ft),Bh($,dt.child,null,lt),dt=rj($,$.pendingProps.children),dt.flags|=2,$.memoizedState=null,dt}function sj(dt,$,lt,ft,St,Tt,Ct){if(lt)return $.flags&256?($.flags&=-257,ft=Li(Error(p$8(422))),tj(dt,$,Ct,ft)):$.memoizedState!==null?($.child=dt.child,$.flags|=128,null):(Tt=ft.fallback,St=$.mode,ft=qj({mode:"visible",children:ft.children},St,0,null),Tt=Ah(Tt,St,Ct,null),Tt.flags|=2,ft.return=$,Tt.return=$,ft.sibling=Tt,$.child=ft,$.mode&1&&Bh($,dt.child,null,Ct),$.child.memoizedState=oj(Ct),$.memoizedState=nj,Tt);if(!($.mode&1))return tj(dt,$,Ct,null);if(St.data==="$!"){if(ft=St.nextSibling&&St.nextSibling.dataset,ft)var At=ft.dgst;return ft=At,Tt=Error(p$8(419)),ft=Li(Tt,ft,void 0),tj(dt,$,Ct,ft)}if(At=(Ct&dt.childLanes)!==0,Ug||At){if(ft=R$3,ft!==null){switch(Ct&-Ct){case 4:St=2;break;case 16:St=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:St=32;break;case 536870912:St=268435456;break;default:St=0}St=St&(ft.suspendedLanes|Ct)?0:St,St!==0&&St!==Tt.retryLane&&(Tt.retryLane=St,Zg(dt,St),mh(ft,dt,St,-1))}return uj(),ft=Li(Error(p$8(421))),tj(dt,$,Ct,ft)}return St.data==="$?"?($.flags|=128,$.child=dt.child,$=vj.bind(null,dt),St._reactRetry=$,null):(dt=Tt.treeContext,yg=Lf(St.nextSibling),xg=$,I$3=!0,zg=null,dt!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=dt.id,sg=dt.overflow,qg=$),$=rj($,ft.children),$.flags|=4096,$)}function wj(dt,$,lt){dt.lanes|=$;var ft=dt.alternate;ft!==null&&(ft.lanes|=$),Sg(dt.return,$,lt)}function xj(dt,$,lt,ft,St){var Tt=dt.memoizedState;Tt===null?dt.memoizedState={isBackwards:$,rendering:null,renderingStartTime:0,last:ft,tail:lt,tailMode:St}:(Tt.isBackwards=$,Tt.rendering=null,Tt.renderingStartTime=0,Tt.last=ft,Tt.tail=lt,Tt.tailMode=St)}function yj(dt,$,lt){var ft=$.pendingProps,St=ft.revealOrder,Tt=ft.tail;if(Yi(dt,$,ft.children,lt),ft=M$2.current,ft&2)ft=ft&1|2,$.flags|=128;else{if(dt!==null&&dt.flags&128)e:for(dt=$.child;dt!==null;){if(dt.tag===13)dt.memoizedState!==null&&wj(dt,lt,$);else if(dt.tag===19)wj(dt,lt,$);else if(dt.child!==null){dt.child.return=dt,dt=dt.child;continue}if(dt===$)break e;for(;dt.sibling===null;){if(dt.return===null||dt.return===$)break e;dt=dt.return}dt.sibling.return=dt.return,dt=dt.sibling}ft&=1}if(G$1(M$2,ft),!($.mode&1))$.memoizedState=null;else switch(St){case"forwards":for(lt=$.child,St=null;lt!==null;)dt=lt.alternate,dt!==null&&Mh(dt)===null&&(St=lt),lt=lt.sibling;lt=St,lt===null?(St=$.child,$.child=null):(St=lt.sibling,lt.sibling=null),xj($,!1,St,lt,Tt);break;case"backwards":for(lt=null,St=$.child,$.child=null;St!==null;){if(dt=St.alternate,dt!==null&&Mh(dt)===null){$.child=St;break}dt=St.sibling,St.sibling=lt,lt=St,St=dt}xj($,!0,lt,null,Tt);break;case"together":xj($,!1,null,null,void 0);break;default:$.memoizedState=null}return $.child}function jj(dt,$){!($.mode&1)&&dt!==null&&(dt.alternate=null,$.alternate=null,$.flags|=2)}function $i(dt,$,lt){if(dt!==null&&($.dependencies=dt.dependencies),hh|=$.lanes,!(lt&$.childLanes))return null;if(dt!==null&&$.child!==dt.child)throw Error(p$8(153));if($.child!==null){for(dt=$.child,lt=wh(dt,dt.pendingProps),$.child=lt,lt.return=$;dt.sibling!==null;)dt=dt.sibling,lt=lt.sibling=wh(dt,dt.pendingProps),lt.return=$;lt.sibling=null}return $.child}function zj(dt,$,lt){switch($.tag){case 3:lj($),Ig();break;case 5:Kh($);break;case 1:Zf($.type)&&cg($);break;case 4:Ih($,$.stateNode.containerInfo);break;case 10:var ft=$.type._context,St=$.memoizedProps.value;G$1(Mg,ft._currentValue),ft._currentValue=St;break;case 13:if(ft=$.memoizedState,ft!==null)return ft.dehydrated!==null?(G$1(M$2,M$2.current&1),$.flags|=128,null):lt&$.child.childLanes?pj(dt,$,lt):(G$1(M$2,M$2.current&1),dt=$i(dt,$,lt),dt!==null?dt.sibling:null);G$1(M$2,M$2.current&1);break;case 19:if(ft=(lt&$.childLanes)!==0,dt.flags&128){if(ft)return yj(dt,$,lt);$.flags|=128}if(St=$.memoizedState,St!==null&&(St.rendering=null,St.tail=null,St.lastEffect=null),G$1(M$2,M$2.current),ft)break;return null;case 22:case 23:return $.lanes=0,ej(dt,$,lt)}return $i(dt,$,lt)}var Aj,Bj,Cj,Dj;Aj=function(dt,$){for(var lt=$.child;lt!==null;){if(lt.tag===5||lt.tag===6)dt.appendChild(lt.stateNode);else if(lt.tag!==4&&lt.child!==null){lt.child.return=lt,lt=lt.child;continue}if(lt===$)break;for(;lt.sibling===null;){if(lt.return===null||lt.return===$)return;lt=lt.return}lt.sibling.return=lt.return,lt=lt.sibling}};Bj=function(){};Cj=function(dt,$,lt,ft){var St=dt.memoizedProps;if(St!==ft){dt=$.stateNode,Hh(Eh.current);var Tt=null;switch(lt){case"input":St=Ya(dt,St),ft=Ya(dt,ft),Tt=[];break;case"select":St=A$3({},St,{value:void 0}),ft=A$3({},ft,{value:void 0}),Tt=[];break;case"textarea":St=gb(dt,St),ft=gb(dt,ft),Tt=[];break;default:typeof St.onClick!="function"&&typeof ft.onClick=="function"&&(dt.onclick=Bf)}ub(lt,ft);var Ct;lt=null;for(kt in St)if(!ft.hasOwnProperty(kt)&&St.hasOwnProperty(kt)&&St[kt]!=null)if(kt==="style"){var At=St[kt];for(Ct in At)At.hasOwnProperty(Ct)&&(lt||(lt={}),lt[Ct]="")}else kt!=="dangerouslySetInnerHTML"&&kt!=="children"&&kt!=="suppressContentEditableWarning"&&kt!=="suppressHydrationWarning"&&kt!=="autoFocus"&&(ea.hasOwnProperty(kt)?Tt||(Tt=[]):(Tt=Tt||[]).push(kt,null));for(kt in ft){var Rt=ft[kt];if(At=St!=null?St[kt]:void 0,ft.hasOwnProperty(kt)&&Rt!==At&&(Rt!=null||At!=null))if(kt==="style")if(At){for(Ct in At)!At.hasOwnProperty(Ct)||Rt&&Rt.hasOwnProperty(Ct)||(lt||(lt={}),lt[Ct]="");for(Ct in Rt)Rt.hasOwnProperty(Ct)&&At[Ct]!==Rt[Ct]&&(lt||(lt={}),lt[Ct]=Rt[Ct])}else lt||(Tt||(Tt=[]),Tt.push(kt,lt)),lt=Rt;else kt==="dangerouslySetInnerHTML"?(Rt=Rt?Rt.__html:void 0,At=At?At.__html:void 0,Rt!=null&&At!==Rt&&(Tt=Tt||[]).push(kt,Rt)):kt==="children"?typeof Rt!="string"&&typeof Rt!="number"||(Tt=Tt||[]).push(kt,""+Rt):kt!=="suppressContentEditableWarning"&&kt!=="suppressHydrationWarning"&&(ea.hasOwnProperty(kt)?(Rt!=null&&kt==="onScroll"&&D$5("scroll",dt),Tt||At===Rt||(Tt=[])):(Tt=Tt||[]).push(kt,Rt))}lt&&(Tt=Tt||[]).push("style",lt);var kt=Tt;($.updateQueue=kt)&&($.flags|=4)}};Dj=function(dt,$,lt,ft){lt!==ft&&($.flags|=4)};function Ej(dt,$){if(!I$3)switch(dt.tailMode){case"hidden":$=dt.tail;for(var lt=null;$!==null;)$.alternate!==null&&(lt=$),$=$.sibling;lt===null?dt.tail=null:lt.sibling=null;break;case"collapsed":lt=dt.tail;for(var ft=null;lt!==null;)lt.alternate!==null&&(ft=lt),lt=lt.sibling;ft===null?$||dt.tail===null?dt.tail=null:dt.tail.sibling=null:ft.sibling=null}}function S$3(dt){var $=dt.alternate!==null&&dt.alternate.child===dt.child,lt=0,ft=0;if($)for(var St=dt.child;St!==null;)lt|=St.lanes|St.childLanes,ft|=St.subtreeFlags&14680064,ft|=St.flags&14680064,St.return=dt,St=St.sibling;else for(St=dt.child;St!==null;)lt|=St.lanes|St.childLanes,ft|=St.subtreeFlags,ft|=St.flags,St.return=dt,St=St.sibling;return dt.subtreeFlags|=ft,dt.childLanes=lt,$}function Fj(dt,$,lt){var ft=$.pendingProps;switch(wg($),$.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$3($),null;case 1:return Zf($.type)&&$f(),S$3($),null;case 3:return ft=$.stateNode,Jh(),E$6(Wf),E$6(H$4),Oh(),ft.pendingContext&&(ft.context=ft.pendingContext,ft.pendingContext=null),(dt===null||dt.child===null)&&(Gg($)?$.flags|=4:dt===null||dt.memoizedState.isDehydrated&&!($.flags&256)||($.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(dt,$),S$3($),null;case 5:Lh($);var St=Hh(Gh.current);if(lt=$.type,dt!==null&&$.stateNode!=null)Cj(dt,$,lt,ft,St),dt.ref!==$.ref&&($.flags|=512,$.flags|=2097152);else{if(!ft){if($.stateNode===null)throw Error(p$8(166));return S$3($),null}if(dt=Hh(Eh.current),Gg($)){ft=$.stateNode,lt=$.type;var Tt=$.memoizedProps;switch(ft[Of]=$,ft[Pf]=Tt,dt=($.mode&1)!==0,lt){case"dialog":D$5("cancel",ft),D$5("close",ft);break;case"iframe":case"object":case"embed":D$5("load",ft);break;case"video":case"audio":for(St=0;St<lf.length;St++)D$5(lf[St],ft);break;case"source":D$5("error",ft);break;case"img":case"image":case"link":D$5("error",ft),D$5("load",ft);break;case"details":D$5("toggle",ft);break;case"input":Za(ft,Tt),D$5("invalid",ft);break;case"select":ft._wrapperState={wasMultiple:!!Tt.multiple},D$5("invalid",ft);break;case"textarea":hb(ft,Tt),D$5("invalid",ft)}ub(lt,Tt),St=null;for(var Ct in Tt)if(Tt.hasOwnProperty(Ct)){var At=Tt[Ct];Ct==="children"?typeof At=="string"?ft.textContent!==At&&(Tt.suppressHydrationWarning!==!0&&Af(ft.textContent,At,dt),St=["children",At]):typeof At=="number"&&ft.textContent!==""+At&&(Tt.suppressHydrationWarning!==!0&&Af(ft.textContent,At,dt),St=["children",""+At]):ea.hasOwnProperty(Ct)&&At!=null&&Ct==="onScroll"&&D$5("scroll",ft)}switch(lt){case"input":Va(ft),db(ft,Tt,!0);break;case"textarea":Va(ft),jb(ft);break;case"select":case"option":break;default:typeof Tt.onClick=="function"&&(ft.onclick=Bf)}ft=St,$.updateQueue=ft,ft!==null&&($.flags|=4)}else{Ct=St.nodeType===9?St:St.ownerDocument,dt==="http://www.w3.org/1999/xhtml"&&(dt=kb(lt)),dt==="http://www.w3.org/1999/xhtml"?lt==="script"?(dt=Ct.createElement("div"),dt.innerHTML="<script><\/script>",dt=dt.removeChild(dt.firstChild)):typeof ft.is=="string"?dt=Ct.createElement(lt,{is:ft.is}):(dt=Ct.createElement(lt),lt==="select"&&(Ct=dt,ft.multiple?Ct.multiple=!0:ft.size&&(Ct.size=ft.size))):dt=Ct.createElementNS(dt,lt),dt[Of]=$,dt[Pf]=ft,Aj(dt,$,!1,!1),$.stateNode=dt;e:{switch(Ct=vb(lt,ft),lt){case"dialog":D$5("cancel",dt),D$5("close",dt),St=ft;break;case"iframe":case"object":case"embed":D$5("load",dt),St=ft;break;case"video":case"audio":for(St=0;St<lf.length;St++)D$5(lf[St],dt);St=ft;break;case"source":D$5("error",dt),St=ft;break;case"img":case"image":case"link":D$5("error",dt),D$5("load",dt),St=ft;break;case"details":D$5("toggle",dt),St=ft;break;case"input":Za(dt,ft),St=Ya(dt,ft),D$5("invalid",dt);break;case"option":St=ft;break;case"select":dt._wrapperState={wasMultiple:!!ft.multiple},St=A$3({},ft,{value:void 0}),D$5("invalid",dt);break;case"textarea":hb(dt,ft),St=gb(dt,ft),D$5("invalid",dt);break;default:St=ft}ub(lt,St),At=St;for(Tt in At)if(At.hasOwnProperty(Tt)){var Rt=At[Tt];Tt==="style"?sb(dt,Rt):Tt==="dangerouslySetInnerHTML"?(Rt=Rt?Rt.__html:void 0,Rt!=null&&nb(dt,Rt)):Tt==="children"?typeof Rt=="string"?(lt!=="textarea"||Rt!=="")&&ob(dt,Rt):typeof Rt=="number"&&ob(dt,""+Rt):Tt!=="suppressContentEditableWarning"&&Tt!=="suppressHydrationWarning"&&Tt!=="autoFocus"&&(ea.hasOwnProperty(Tt)?Rt!=null&&Tt==="onScroll"&&D$5("scroll",dt):Rt!=null&&ta(dt,Tt,Rt,Ct))}switch(lt){case"input":Va(dt),db(dt,ft,!1);break;case"textarea":Va(dt),jb(dt);break;case"option":ft.value!=null&&dt.setAttribute("value",""+Sa(ft.value));break;case"select":dt.multiple=!!ft.multiple,Tt=ft.value,Tt!=null?fb(dt,!!ft.multiple,Tt,!1):ft.defaultValue!=null&&fb(dt,!!ft.multiple,ft.defaultValue,!0);break;default:typeof St.onClick=="function"&&(dt.onclick=Bf)}switch(lt){case"button":case"input":case"select":case"textarea":ft=!!ft.autoFocus;break e;case"img":ft=!0;break e;default:ft=!1}}ft&&($.flags|=4)}$.ref!==null&&($.flags|=512,$.flags|=2097152)}return S$3($),null;case 6:if(dt&&$.stateNode!=null)Dj(dt,$,dt.memoizedProps,ft);else{if(typeof ft!="string"&&$.stateNode===null)throw Error(p$8(166));if(lt=Hh(Gh.current),Hh(Eh.current),Gg($)){if(ft=$.stateNode,lt=$.memoizedProps,ft[Of]=$,(Tt=ft.nodeValue!==lt)&&(dt=xg,dt!==null))switch(dt.tag){case 3:Af(ft.nodeValue,lt,(dt.mode&1)!==0);break;case 5:dt.memoizedProps.suppressHydrationWarning!==!0&&Af(ft.nodeValue,lt,(dt.mode&1)!==0)}Tt&&($.flags|=4)}else ft=(lt.nodeType===9?lt:lt.ownerDocument).createTextNode(ft),ft[Of]=$,$.stateNode=ft}return S$3($),null;case 13:if(E$6(M$2),ft=$.memoizedState,dt===null||dt.memoizedState!==null&&dt.memoizedState.dehydrated!==null){if(I$3&&yg!==null&&$.mode&1&&!($.flags&128))Hg(),Ig(),$.flags|=98560,Tt=!1;else if(Tt=Gg($),ft!==null&&ft.dehydrated!==null){if(dt===null){if(!Tt)throw Error(p$8(318));if(Tt=$.memoizedState,Tt=Tt!==null?Tt.dehydrated:null,!Tt)throw Error(p$8(317));Tt[Of]=$}else Ig(),!($.flags&128)&&($.memoizedState=null),$.flags|=4;S$3($),Tt=!1}else zg!==null&&(Gj(zg),zg=null),Tt=!0;if(!Tt)return $.flags&65536?$:null}return $.flags&128?($.lanes=lt,$):(ft=ft!==null,ft!==(dt!==null&&dt.memoizedState!==null)&&ft&&($.child.flags|=8192,$.mode&1&&(dt===null||M$2.current&1?T$2===0&&(T$2=3):uj())),$.updateQueue!==null&&($.flags|=4),S$3($),null);case 4:return Jh(),Bj(dt,$),dt===null&&sf($.stateNode.containerInfo),S$3($),null;case 10:return Rg($.type._context),S$3($),null;case 17:return Zf($.type)&&$f(),S$3($),null;case 19:if(E$6(M$2),Tt=$.memoizedState,Tt===null)return S$3($),null;if(ft=($.flags&128)!==0,Ct=Tt.rendering,Ct===null)if(ft)Ej(Tt,!1);else{if(T$2!==0||dt!==null&&dt.flags&128)for(dt=$.child;dt!==null;){if(Ct=Mh(dt),Ct!==null){for($.flags|=128,Ej(Tt,!1),ft=Ct.updateQueue,ft!==null&&($.updateQueue=ft,$.flags|=4),$.subtreeFlags=0,ft=lt,lt=$.child;lt!==null;)Tt=lt,dt=ft,Tt.flags&=14680066,Ct=Tt.alternate,Ct===null?(Tt.childLanes=0,Tt.lanes=dt,Tt.child=null,Tt.subtreeFlags=0,Tt.memoizedProps=null,Tt.memoizedState=null,Tt.updateQueue=null,Tt.dependencies=null,Tt.stateNode=null):(Tt.childLanes=Ct.childLanes,Tt.lanes=Ct.lanes,Tt.child=Ct.child,Tt.subtreeFlags=0,Tt.deletions=null,Tt.memoizedProps=Ct.memoizedProps,Tt.memoizedState=Ct.memoizedState,Tt.updateQueue=Ct.updateQueue,Tt.type=Ct.type,dt=Ct.dependencies,Tt.dependencies=dt===null?null:{lanes:dt.lanes,firstContext:dt.firstContext}),lt=lt.sibling;return G$1(M$2,M$2.current&1|2),$.child}dt=dt.sibling}Tt.tail!==null&&B$2()>Hj&&($.flags|=128,ft=!0,Ej(Tt,!1),$.lanes=4194304)}else{if(!ft)if(dt=Mh(Ct),dt!==null){if($.flags|=128,ft=!0,lt=dt.updateQueue,lt!==null&&($.updateQueue=lt,$.flags|=4),Ej(Tt,!0),Tt.tail===null&&Tt.tailMode==="hidden"&&!Ct.alternate&&!I$3)return S$3($),null}else 2*B$2()-Tt.renderingStartTime>Hj&&lt!==1073741824&&($.flags|=128,ft=!0,Ej(Tt,!1),$.lanes=4194304);Tt.isBackwards?(Ct.sibling=$.child,$.child=Ct):(lt=Tt.last,lt!==null?lt.sibling=Ct:$.child=Ct,Tt.last=Ct)}return Tt.tail!==null?($=Tt.tail,Tt.rendering=$,Tt.tail=$.sibling,Tt.renderingStartTime=B$2(),$.sibling=null,lt=M$2.current,G$1(M$2,ft?lt&1|2:lt&1),$):(S$3($),null);case 22:case 23:return Ij(),ft=$.memoizedState!==null,dt!==null&&dt.memoizedState!==null!==ft&&($.flags|=8192),ft&&$.mode&1?gj&1073741824&&(S$3($),$.subtreeFlags&6&&($.flags|=8192)):S$3($),null;case 24:return null;case 25:return null}throw Error(p$8(156,$.tag))}function Jj(dt,$){switch(wg($),$.tag){case 1:return Zf($.type)&&$f(),dt=$.flags,dt&65536?($.flags=dt&-65537|128,$):null;case 3:return Jh(),E$6(Wf),E$6(H$4),Oh(),dt=$.flags,dt&65536&&!(dt&128)?($.flags=dt&-65537|128,$):null;case 5:return Lh($),null;case 13:if(E$6(M$2),dt=$.memoizedState,dt!==null&&dt.dehydrated!==null){if($.alternate===null)throw Error(p$8(340));Ig()}return dt=$.flags,dt&65536?($.flags=dt&-65537|128,$):null;case 19:return E$6(M$2),null;case 4:return Jh(),null;case 10:return Rg($.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U$2=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V$3=null;function Mj(dt,$){var lt=dt.ref;if(lt!==null)if(typeof lt=="function")try{lt(null)}catch(ft){W$4(dt,$,ft)}else lt.current=null}function Nj(dt,$,lt){try{lt()}catch(ft){W$4(dt,$,ft)}}var Oj=!1;function Pj(dt,$){if(Cf=dd,dt=Me$1(),Ne$2(dt)){if("selectionStart"in dt)var lt={start:dt.selectionStart,end:dt.selectionEnd};else e:{lt=(lt=dt.ownerDocument)&&lt.defaultView||window;var ft=lt.getSelection&&lt.getSelection();if(ft&&ft.rangeCount!==0){lt=ft.anchorNode;var St=ft.anchorOffset,Tt=ft.focusNode;ft=ft.focusOffset;try{lt.nodeType,Tt.nodeType}catch{lt=null;break e}var Ct=0,At=-1,Rt=-1,kt=0,Nt=0,Bt=dt,Ut=null;t:for(;;){for(var zt;Bt!==lt||St!==0&&Bt.nodeType!==3||(At=Ct+St),Bt!==Tt||ft!==0&&Bt.nodeType!==3||(Rt=Ct+ft),Bt.nodeType===3&&(Ct+=Bt.nodeValue.length),(zt=Bt.firstChild)!==null;)Ut=Bt,Bt=zt;for(;;){if(Bt===dt)break t;if(Ut===lt&&++kt===St&&(At=Ct),Ut===Tt&&++Nt===ft&&(Rt=Ct),(zt=Bt.nextSibling)!==null)break;Bt=Ut,Ut=Bt.parentNode}Bt=zt}lt=At===-1||Rt===-1?null:{start:At,end:Rt}}else lt=null}lt=lt||{start:0,end:0}}else lt=null;for(Df={focusedElem:dt,selectionRange:lt},dd=!1,V$3=$;V$3!==null;)if($=V$3,dt=$.child,($.subtreeFlags&1028)!==0&&dt!==null)dt.return=$,V$3=dt;else for(;V$3!==null;){$=V$3;try{var Zt=$.alternate;if($.flags&1024)switch($.tag){case 0:case 11:case 15:break;case 1:if(Zt!==null){var ln=Zt.memoizedProps,cn=Zt.memoizedState,hn=$.stateNode,pn=hn.getSnapshotBeforeUpdate($.elementType===$.type?ln:Lg($.type,ln),cn);hn.__reactInternalSnapshotBeforeUpdate=pn}break;case 3:var dn=$.stateNode.containerInfo;dn.nodeType===1?dn.textContent="":dn.nodeType===9&&dn.documentElement&&dn.removeChild(dn.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$8(163))}}catch(gn){W$4($,$.return,gn)}if(dt=$.sibling,dt!==null){dt.return=$.return,V$3=dt;break}V$3=$.return}return Zt=Oj,Oj=!1,Zt}function Qj(dt,$,lt){var ft=$.updateQueue;if(ft=ft!==null?ft.lastEffect:null,ft!==null){var St=ft=ft.next;do{if((St.tag&dt)===dt){var Tt=St.destroy;St.destroy=void 0,Tt!==void 0&&Nj($,lt,Tt)}St=St.next}while(St!==ft)}}function Rj(dt,$){if($=$.updateQueue,$=$!==null?$.lastEffect:null,$!==null){var lt=$=$.next;do{if((lt.tag&dt)===dt){var ft=lt.create;lt.destroy=ft()}lt=lt.next}while(lt!==$)}}function Sj(dt){var $=dt.ref;if($!==null){var lt=dt.stateNode;switch(dt.tag){case 5:dt=lt;break;default:dt=lt}typeof $=="function"?$(dt):$.current=dt}}function Tj(dt){var $=dt.alternate;$!==null&&(dt.alternate=null,Tj($)),dt.child=null,dt.deletions=null,dt.sibling=null,dt.tag===5&&($=dt.stateNode,$!==null&&(delete $[Of],delete $[Pf],delete $[of],delete $[Qf],delete $[Rf])),dt.stateNode=null,dt.return=null,dt.dependencies=null,dt.memoizedProps=null,dt.memoizedState=null,dt.pendingProps=null,dt.stateNode=null,dt.updateQueue=null}function Uj(dt){return dt.tag===5||dt.tag===3||dt.tag===4}function Vj(dt){e:for(;;){for(;dt.sibling===null;){if(dt.return===null||Uj(dt.return))return null;dt=dt.return}for(dt.sibling.return=dt.return,dt=dt.sibling;dt.tag!==5&&dt.tag!==6&&dt.tag!==18;){if(dt.flags&2||dt.child===null||dt.tag===4)continue e;dt.child.return=dt,dt=dt.child}if(!(dt.flags&2))return dt.stateNode}}function Wj(dt,$,lt){var ft=dt.tag;if(ft===5||ft===6)dt=dt.stateNode,$?lt.nodeType===8?lt.parentNode.insertBefore(dt,$):lt.insertBefore(dt,$):(lt.nodeType===8?($=lt.parentNode,$.insertBefore(dt,lt)):($=lt,$.appendChild(dt)),lt=lt._reactRootContainer,lt!=null||$.onclick!==null||($.onclick=Bf));else if(ft!==4&&(dt=dt.child,dt!==null))for(Wj(dt,$,lt),dt=dt.sibling;dt!==null;)Wj(dt,$,lt),dt=dt.sibling}function Xj(dt,$,lt){var ft=dt.tag;if(ft===5||ft===6)dt=dt.stateNode,$?lt.insertBefore(dt,$):lt.appendChild(dt);else if(ft!==4&&(dt=dt.child,dt!==null))for(Xj(dt,$,lt),dt=dt.sibling;dt!==null;)Xj(dt,$,lt),dt=dt.sibling}var X$2=null,Yj=!1;function Zj(dt,$,lt){for(lt=lt.child;lt!==null;)ak(dt,$,lt),lt=lt.sibling}function ak(dt,$,lt){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,lt)}catch{}switch(lt.tag){case 5:U$2||Mj(lt,$);case 6:var ft=X$2,St=Yj;X$2=null,Zj(dt,$,lt),X$2=ft,Yj=St,X$2!==null&&(Yj?(dt=X$2,lt=lt.stateNode,dt.nodeType===8?dt.parentNode.removeChild(lt):dt.removeChild(lt)):X$2.removeChild(lt.stateNode));break;case 18:X$2!==null&&(Yj?(dt=X$2,lt=lt.stateNode,dt.nodeType===8?Kf(dt.parentNode,lt):dt.nodeType===1&&Kf(dt,lt),bd(dt)):Kf(X$2,lt.stateNode));break;case 4:ft=X$2,St=Yj,X$2=lt.stateNode.containerInfo,Yj=!0,Zj(dt,$,lt),X$2=ft,Yj=St;break;case 0:case 11:case 14:case 15:if(!U$2&&(ft=lt.updateQueue,ft!==null&&(ft=ft.lastEffect,ft!==null))){St=ft=ft.next;do{var Tt=St,Ct=Tt.destroy;Tt=Tt.tag,Ct!==void 0&&(Tt&2||Tt&4)&&Nj(lt,$,Ct),St=St.next}while(St!==ft)}Zj(dt,$,lt);break;case 1:if(!U$2&&(Mj(lt,$),ft=lt.stateNode,typeof ft.componentWillUnmount=="function"))try{ft.props=lt.memoizedProps,ft.state=lt.memoizedState,ft.componentWillUnmount()}catch(At){W$4(lt,$,At)}Zj(dt,$,lt);break;case 21:Zj(dt,$,lt);break;case 22:lt.mode&1?(U$2=(ft=U$2)||lt.memoizedState!==null,Zj(dt,$,lt),U$2=ft):Zj(dt,$,lt);break;default:Zj(dt,$,lt)}}function bk(dt){var $=dt.updateQueue;if($!==null){dt.updateQueue=null;var lt=dt.stateNode;lt===null&&(lt=dt.stateNode=new Lj),$.forEach(function(ft){var St=ck.bind(null,dt,ft);lt.has(ft)||(lt.add(ft),ft.then(St,St))})}}function dk(dt,$){var lt=$.deletions;if(lt!==null)for(var ft=0;ft<lt.length;ft++){var St=lt[ft];try{var Tt=dt,Ct=$,At=Ct;e:for(;At!==null;){switch(At.tag){case 5:X$2=At.stateNode,Yj=!1;break e;case 3:X$2=At.stateNode.containerInfo,Yj=!0;break e;case 4:X$2=At.stateNode.containerInfo,Yj=!0;break e}At=At.return}if(X$2===null)throw Error(p$8(160));ak(Tt,Ct,St),X$2=null,Yj=!1;var Rt=St.alternate;Rt!==null&&(Rt.return=null),St.return=null}catch(kt){W$4(St,$,kt)}}if($.subtreeFlags&12854)for($=$.child;$!==null;)ek($,dt),$=$.sibling}function ek(dt,$){var lt=dt.alternate,ft=dt.flags;switch(dt.tag){case 0:case 11:case 14:case 15:if(dk($,dt),fk(dt),ft&4){try{Qj(3,dt,dt.return),Rj(3,dt)}catch(ln){W$4(dt,dt.return,ln)}try{Qj(5,dt,dt.return)}catch(ln){W$4(dt,dt.return,ln)}}break;case 1:dk($,dt),fk(dt),ft&512&&lt!==null&&Mj(lt,lt.return);break;case 5:if(dk($,dt),fk(dt),ft&512&&lt!==null&&Mj(lt,lt.return),dt.flags&32){var St=dt.stateNode;try{ob(St,"")}catch(ln){W$4(dt,dt.return,ln)}}if(ft&4&&(St=dt.stateNode,St!=null)){var Tt=dt.memoizedProps,Ct=lt!==null?lt.memoizedProps:Tt,At=dt.type,Rt=dt.updateQueue;if(dt.updateQueue=null,Rt!==null)try{At==="input"&&Tt.type==="radio"&&Tt.name!=null&&ab(St,Tt),vb(At,Ct);var kt=vb(At,Tt);for(Ct=0;Ct<Rt.length;Ct+=2){var Nt=Rt[Ct],Bt=Rt[Ct+1];Nt==="style"?sb(St,Bt):Nt==="dangerouslySetInnerHTML"?nb(St,Bt):Nt==="children"?ob(St,Bt):ta(St,Nt,Bt,kt)}switch(At){case"input":bb(St,Tt);break;case"textarea":ib(St,Tt);break;case"select":var Ut=St._wrapperState.wasMultiple;St._wrapperState.wasMultiple=!!Tt.multiple;var zt=Tt.value;zt!=null?fb(St,!!Tt.multiple,zt,!1):Ut!==!!Tt.multiple&&(Tt.defaultValue!=null?fb(St,!!Tt.multiple,Tt.defaultValue,!0):fb(St,!!Tt.multiple,Tt.multiple?[]:"",!1))}St[Pf]=Tt}catch(ln){W$4(dt,dt.return,ln)}}break;case 6:if(dk($,dt),fk(dt),ft&4){if(dt.stateNode===null)throw Error(p$8(162));St=dt.stateNode,Tt=dt.memoizedProps;try{St.nodeValue=Tt}catch(ln){W$4(dt,dt.return,ln)}}break;case 3:if(dk($,dt),fk(dt),ft&4&&lt!==null&&lt.memoizedState.isDehydrated)try{bd($.containerInfo)}catch(ln){W$4(dt,dt.return,ln)}break;case 4:dk($,dt),fk(dt);break;case 13:dk($,dt),fk(dt),St=dt.child,St.flags&8192&&(Tt=St.memoizedState!==null,St.stateNode.isHidden=Tt,!Tt||St.alternate!==null&&St.alternate.memoizedState!==null||(gk=B$2())),ft&4&&bk(dt);break;case 22:if(Nt=lt!==null&&lt.memoizedState!==null,dt.mode&1?(U$2=(kt=U$2)||Nt,dk($,dt),U$2=kt):dk($,dt),fk(dt),ft&8192){if(kt=dt.memoizedState!==null,(dt.stateNode.isHidden=kt)&&!Nt&&dt.mode&1)for(V$3=dt,Nt=dt.child;Nt!==null;){for(Bt=V$3=Nt;V$3!==null;){switch(Ut=V$3,zt=Ut.child,Ut.tag){case 0:case 11:case 14:case 15:Qj(4,Ut,Ut.return);break;case 1:Mj(Ut,Ut.return);var Zt=Ut.stateNode;if(typeof Zt.componentWillUnmount=="function"){ft=Ut,lt=Ut.return;try{$=ft,Zt.props=$.memoizedProps,Zt.state=$.memoizedState,Zt.componentWillUnmount()}catch(ln){W$4(ft,lt,ln)}}break;case 5:Mj(Ut,Ut.return);break;case 22:if(Ut.memoizedState!==null){hk(Bt);continue}}zt!==null?(zt.return=Ut,V$3=zt):hk(Bt)}Nt=Nt.sibling}e:for(Nt=null,Bt=dt;;){if(Bt.tag===5){if(Nt===null){Nt=Bt;try{St=Bt.stateNode,kt?(Tt=St.style,typeof Tt.setProperty=="function"?Tt.setProperty("display","none","important"):Tt.display="none"):(At=Bt.stateNode,Rt=Bt.memoizedProps.style,Ct=Rt!=null&&Rt.hasOwnProperty("display")?Rt.display:null,At.style.display=rb("display",Ct))}catch(ln){W$4(dt,dt.return,ln)}}}else if(Bt.tag===6){if(Nt===null)try{Bt.stateNode.nodeValue=kt?"":Bt.memoizedProps}catch(ln){W$4(dt,dt.return,ln)}}else if((Bt.tag!==22&&Bt.tag!==23||Bt.memoizedState===null||Bt===dt)&&Bt.child!==null){Bt.child.return=Bt,Bt=Bt.child;continue}if(Bt===dt)break e;for(;Bt.sibling===null;){if(Bt.return===null||Bt.return===dt)break e;Nt===Bt&&(Nt=null),Bt=Bt.return}Nt===Bt&&(Nt=null),Bt.sibling.return=Bt.return,Bt=Bt.sibling}}break;case 19:dk($,dt),fk(dt),ft&4&&bk(dt);break;case 21:break;default:dk($,dt),fk(dt)}}function fk(dt){var $=dt.flags;if($&2){try{e:{for(var lt=dt.return;lt!==null;){if(Uj(lt)){var ft=lt;break e}lt=lt.return}throw Error(p$8(160))}switch(ft.tag){case 5:var St=ft.stateNode;ft.flags&32&&(ob(St,""),ft.flags&=-33);var Tt=Vj(dt);Xj(dt,Tt,St);break;case 3:case 4:var Ct=ft.stateNode.containerInfo,At=Vj(dt);Wj(dt,At,Ct);break;default:throw Error(p$8(161))}}catch(Rt){W$4(dt,dt.return,Rt)}dt.flags&=-3}$&4096&&(dt.flags&=-4097)}function ik(dt,$,lt){V$3=dt,jk(dt)}function jk(dt,$,lt){for(var ft=(dt.mode&1)!==0;V$3!==null;){var St=V$3,Tt=St.child;if(St.tag===22&&ft){var Ct=St.memoizedState!==null||Kj;if(!Ct){var At=St.alternate,Rt=At!==null&&At.memoizedState!==null||U$2;At=Kj;var kt=U$2;if(Kj=Ct,(U$2=Rt)&&!kt)for(V$3=St;V$3!==null;)Ct=V$3,Rt=Ct.child,Ct.tag===22&&Ct.memoizedState!==null?kk(St):Rt!==null?(Rt.return=Ct,V$3=Rt):kk(St);for(;Tt!==null;)V$3=Tt,jk(Tt),Tt=Tt.sibling;V$3=St,Kj=At,U$2=kt}lk(dt)}else St.subtreeFlags&8772&&Tt!==null?(Tt.return=St,V$3=Tt):lk(dt)}}function lk(dt){for(;V$3!==null;){var $=V$3;if($.flags&8772){var lt=$.alternate;try{if($.flags&8772)switch($.tag){case 0:case 11:case 15:U$2||Rj(5,$);break;case 1:var ft=$.stateNode;if($.flags&4&&!U$2)if(lt===null)ft.componentDidMount();else{var St=$.elementType===$.type?lt.memoizedProps:Lg($.type,lt.memoizedProps);ft.componentDidUpdate(St,lt.memoizedState,ft.__reactInternalSnapshotBeforeUpdate)}var Tt=$.updateQueue;Tt!==null&&ih($,Tt,ft);break;case 3:var Ct=$.updateQueue;if(Ct!==null){if(lt=null,$.child!==null)switch($.child.tag){case 5:lt=$.child.stateNode;break;case 1:lt=$.child.stateNode}ih($,Ct,lt)}break;case 5:var At=$.stateNode;if(lt===null&&$.flags&4){lt=At;var Rt=$.memoizedProps;switch($.type){case"button":case"input":case"select":case"textarea":Rt.autoFocus&&lt.focus();break;case"img":Rt.src&&(lt.src=Rt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if($.memoizedState===null){var kt=$.alternate;if(kt!==null){var Nt=kt.memoizedState;if(Nt!==null){var Bt=Nt.dehydrated;Bt!==null&&bd(Bt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$8(163))}U$2||$.flags&512&&Sj($)}catch(Ut){W$4($,$.return,Ut)}}if($===dt){V$3=null;break}if(lt=$.sibling,lt!==null){lt.return=$.return,V$3=lt;break}V$3=$.return}}function hk(dt){for(;V$3!==null;){var $=V$3;if($===dt){V$3=null;break}var lt=$.sibling;if(lt!==null){lt.return=$.return,V$3=lt;break}V$3=$.return}}function kk(dt){for(;V$3!==null;){var $=V$3;try{switch($.tag){case 0:case 11:case 15:var lt=$.return;try{Rj(4,$)}catch(Rt){W$4($,lt,Rt)}break;case 1:var ft=$.stateNode;if(typeof ft.componentDidMount=="function"){var St=$.return;try{ft.componentDidMount()}catch(Rt){W$4($,St,Rt)}}var Tt=$.return;try{Sj($)}catch(Rt){W$4($,Tt,Rt)}break;case 5:var Ct=$.return;try{Sj($)}catch(Rt){W$4($,Ct,Rt)}}}catch(Rt){W$4($,$.return,Rt)}if($===dt){V$3=null;break}var At=$.sibling;if(At!==null){At.return=$.return,V$3=At;break}V$3=$.return}}var mk=Math.ceil,nk=ua.ReactCurrentDispatcher,ok=ua.ReactCurrentOwner,pk=ua.ReactCurrentBatchConfig,K$1=0,R$3=null,Y$1=null,Z$2=0,gj=0,fj=Uf(0),T$2=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L$3(){return K$1&6?B$2():Bk!==-1?Bk:Bk=B$2()}function lh(dt){return dt.mode&1?K$1&2&&Z$2!==0?Z$2&-Z$2:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):(dt=C$3,dt!==0||(dt=window.event,dt=dt===void 0?16:jd(dt.type)),dt):1}function mh(dt,$,lt,ft){if(50<zk)throw zk=0,Ak=null,Error(p$8(185));Ac(dt,lt,ft),(!(K$1&2)||dt!==R$3)&&(dt===R$3&&(!(K$1&2)&&(rk|=lt),T$2===4&&Dk(dt,Z$2)),Ek(dt,ft),lt===1&&K$1===0&&!($.mode&1)&&(Hj=B$2()+500,fg&&jg()))}function Ek(dt,$){var lt=dt.callbackNode;wc(dt,$);var ft=uc(dt,dt===R$3?Z$2:0);if(ft===0)lt!==null&&bc(lt),dt.callbackNode=null,dt.callbackPriority=0;else if($=ft&-ft,dt.callbackPriority!==$){if(lt!=null&&bc(lt),$===1)dt.tag===0?ig(Fk.bind(null,dt)):hg(Fk.bind(null,dt)),Jf(function(){!(K$1&6)&&jg()}),lt=null;else{switch(Dc(ft)){case 1:lt=fc;break;case 4:lt=gc;break;case 16:lt=hc;break;case 536870912:lt=jc;break;default:lt=hc}lt=Gk(lt,Hk.bind(null,dt))}dt.callbackPriority=$,dt.callbackNode=lt}}function Hk(dt,$){if(Bk=-1,Ck=0,K$1&6)throw Error(p$8(327));var lt=dt.callbackNode;if(Ik()&&dt.callbackNode!==lt)return null;var ft=uc(dt,dt===R$3?Z$2:0);if(ft===0)return null;if(ft&30||ft&dt.expiredLanes||$)$=Jk(dt,ft);else{$=ft;var St=K$1;K$1|=2;var Tt=Kk();(R$3!==dt||Z$2!==$)&&(vk=null,Hj=B$2()+500,Lk(dt,$));do try{Mk();break}catch(At){Nk(dt,At)}while(1);Qg(),nk.current=Tt,K$1=St,Y$1!==null?$=0:(R$3=null,Z$2=0,$=T$2)}if($!==0){if($===2&&(St=xc(dt),St!==0&&(ft=St,$=Ok(dt,St))),$===1)throw lt=qk,Lk(dt,0),Dk(dt,ft),Ek(dt,B$2()),lt;if($===6)Dk(dt,ft);else{if(St=dt.current.alternate,!(ft&30)&&!Pk(St)&&($=Jk(dt,ft),$===2&&(Tt=xc(dt),Tt!==0&&(ft=Tt,$=Ok(dt,Tt))),$===1))throw lt=qk,Lk(dt,0),Dk(dt,ft),Ek(dt,B$2()),lt;switch(dt.finishedWork=St,dt.finishedLanes=ft,$){case 0:case 1:throw Error(p$8(345));case 2:Qk(dt,uk,vk);break;case 3:if(Dk(dt,ft),(ft&130023424)===ft&&($=gk+500-B$2(),10<$)){if(uc(dt,0)!==0)break;if(St=dt.suspendedLanes,(St&ft)!==ft){L$3(),dt.pingedLanes|=dt.suspendedLanes&St;break}dt.timeoutHandle=Ff(Qk.bind(null,dt,uk,vk),$);break}Qk(dt,uk,vk);break;case 4:if(Dk(dt,ft),(ft&4194240)===ft)break;for($=dt.eventTimes,St=-1;0<ft;){var Ct=31-oc(ft);Tt=1<<Ct,Ct=$[Ct],Ct>St&&(St=Ct),ft&=~Tt}if(ft=St,ft=B$2()-ft,ft=(120>ft?120:480>ft?480:1080>ft?1080:1920>ft?1920:3e3>ft?3e3:4320>ft?4320:1960*mk(ft/1960))-ft,10<ft){dt.timeoutHandle=Ff(Qk.bind(null,dt,uk,vk),ft);break}Qk(dt,uk,vk);break;case 5:Qk(dt,uk,vk);break;default:throw Error(p$8(329))}}}return Ek(dt,B$2()),dt.callbackNode===lt?Hk.bind(null,dt):null}function Ok(dt,$){var lt=tk;return dt.current.memoizedState.isDehydrated&&(Lk(dt,$).flags|=256),dt=Jk(dt,$),dt!==2&&($=uk,uk=lt,$!==null&&Gj($)),dt}function Gj(dt){uk===null?uk=dt:uk.push.apply(uk,dt)}function Pk(dt){for(var $=dt;;){if($.flags&16384){var lt=$.updateQueue;if(lt!==null&&(lt=lt.stores,lt!==null))for(var ft=0;ft<lt.length;ft++){var St=lt[ft],Tt=St.getSnapshot;St=St.value;try{if(!He$2(Tt(),St))return!1}catch{return!1}}}if(lt=$.child,$.subtreeFlags&16384&&lt!==null)lt.return=$,$=lt;else{if($===dt)break;for(;$.sibling===null;){if($.return===null||$.return===dt)return!0;$=$.return}$.sibling.return=$.return,$=$.sibling}}return!0}function Dk(dt,$){for($&=~sk,$&=~rk,dt.suspendedLanes|=$,dt.pingedLanes&=~$,dt=dt.expirationTimes;0<$;){var lt=31-oc($),ft=1<<lt;dt[lt]=-1,$&=~ft}}function Fk(dt){if(K$1&6)throw Error(p$8(327));Ik();var $=uc(dt,0);if(!($&1))return Ek(dt,B$2()),null;var lt=Jk(dt,$);if(dt.tag!==0&&lt===2){var ft=xc(dt);ft!==0&&($=ft,lt=Ok(dt,ft))}if(lt===1)throw lt=qk,Lk(dt,0),Dk(dt,$),Ek(dt,B$2()),lt;if(lt===6)throw Error(p$8(345));return dt.finishedWork=dt.current.alternate,dt.finishedLanes=$,Qk(dt,uk,vk),Ek(dt,B$2()),null}function Rk(dt,$){var lt=K$1;K$1|=1;try{return dt($)}finally{K$1=lt,K$1===0&&(Hj=B$2()+500,fg&&jg())}}function Sk(dt){xk!==null&&xk.tag===0&&!(K$1&6)&&Ik();var $=K$1;K$1|=1;var lt=pk.transition,ft=C$3;try{if(pk.transition=null,C$3=1,dt)return dt()}finally{C$3=ft,pk.transition=lt,K$1=$,!(K$1&6)&&jg()}}function Ij(){gj=fj.current,E$6(fj)}function Lk(dt,$){dt.finishedWork=null,dt.finishedLanes=0;var lt=dt.timeoutHandle;if(lt!==-1&&(dt.timeoutHandle=-1,Gf(lt)),Y$1!==null)for(lt=Y$1.return;lt!==null;){var ft=lt;switch(wg(ft),ft.tag){case 1:ft=ft.type.childContextTypes,ft!=null&&$f();break;case 3:Jh(),E$6(Wf),E$6(H$4),Oh();break;case 5:Lh(ft);break;case 4:Jh();break;case 13:E$6(M$2);break;case 19:E$6(M$2);break;case 10:Rg(ft.type._context);break;case 22:case 23:Ij()}lt=lt.return}if(R$3=dt,Y$1=dt=wh(dt.current,null),Z$2=gj=$,T$2=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for($=0;$<Wg.length;$++)if(lt=Wg[$],ft=lt.interleaved,ft!==null){lt.interleaved=null;var St=ft.next,Tt=lt.pending;if(Tt!==null){var Ct=Tt.next;Tt.next=St,ft.next=Ct}lt.pending=ft}Wg=null}return dt}function Nk(dt,$){do{var lt=Y$1;try{if(Qg(),Ph.current=ai,Sh){for(var ft=N$2.memoizedState;ft!==null;){var St=ft.queue;St!==null&&(St.pending=null),ft=ft.next}Sh=!1}if(Rh=0,P$3=O$4=N$2=null,Th=!1,Uh=0,ok.current=null,lt===null||lt.return===null){T$2=1,qk=$,Y$1=null;break}e:{var Tt=dt,Ct=lt.return,At=lt,Rt=$;if($=Z$2,At.flags|=32768,Rt!==null&&typeof Rt=="object"&&typeof Rt.then=="function"){var kt=Rt,Nt=At,Bt=Nt.tag;if(!(Nt.mode&1)&&(Bt===0||Bt===11||Bt===15)){var Ut=Nt.alternate;Ut?(Nt.updateQueue=Ut.updateQueue,Nt.memoizedState=Ut.memoizedState,Nt.lanes=Ut.lanes):(Nt.updateQueue=null,Nt.memoizedState=null)}var zt=Vi(Ct);if(zt!==null){zt.flags&=-257,Wi(zt,Ct,At,Tt,$),zt.mode&1&&Ti(Tt,kt,$),$=zt,Rt=kt;var Zt=$.updateQueue;if(Zt===null){var ln=new Set;ln.add(Rt),$.updateQueue=ln}else Zt.add(Rt);break e}else{if(!($&1)){Ti(Tt,kt,$),uj();break e}Rt=Error(p$8(426))}}else if(I$3&&At.mode&1){var cn=Vi(Ct);if(cn!==null){!(cn.flags&65536)&&(cn.flags|=256),Wi(cn,Ct,At,Tt,$),Jg(Ki(Rt,At));break e}}Tt=Rt=Ki(Rt,At),T$2!==4&&(T$2=2),tk===null?tk=[Tt]:tk.push(Tt),Tt=Ct;do{switch(Tt.tag){case 3:Tt.flags|=65536,$&=-$,Tt.lanes|=$;var hn=Oi(Tt,Rt,$);fh(Tt,hn);break e;case 1:At=Rt;var pn=Tt.type,dn=Tt.stateNode;if(!(Tt.flags&128)&&(typeof pn.getDerivedStateFromError=="function"||dn!==null&&typeof dn.componentDidCatch=="function"&&(Si===null||!Si.has(dn)))){Tt.flags|=65536,$&=-$,Tt.lanes|=$;var gn=Ri(Tt,At,$);fh(Tt,gn);break e}}Tt=Tt.return}while(Tt!==null)}Tk(lt)}catch(vn){$=vn,Y$1===lt&&lt!==null&&(Y$1=lt=lt.return);continue}break}while(1)}function Kk(){var dt=nk.current;return nk.current=ai,dt===null?ai:dt}function uj(){(T$2===0||T$2===3||T$2===2)&&(T$2=4),R$3===null||!(hh&268435455)&&!(rk&268435455)||Dk(R$3,Z$2)}function Jk(dt,$){var lt=K$1;K$1|=2;var ft=Kk();(R$3!==dt||Z$2!==$)&&(vk=null,Lk(dt,$));do try{Uk();break}catch(St){Nk(dt,St)}while(1);if(Qg(),K$1=lt,nk.current=ft,Y$1!==null)throw Error(p$8(261));return R$3=null,Z$2=0,T$2}function Uk(){for(;Y$1!==null;)Vk(Y$1)}function Mk(){for(;Y$1!==null&&!cc();)Vk(Y$1)}function Vk(dt){var $=Wk(dt.alternate,dt,gj);dt.memoizedProps=dt.pendingProps,$===null?Tk(dt):Y$1=$,ok.current=null}function Tk(dt){var $=dt;do{var lt=$.alternate;if(dt=$.return,$.flags&32768){if(lt=Jj(lt,$),lt!==null){lt.flags&=32767,Y$1=lt;return}if(dt!==null)dt.flags|=32768,dt.subtreeFlags=0,dt.deletions=null;else{T$2=6,Y$1=null;return}}else if(lt=Fj(lt,$,gj),lt!==null){Y$1=lt;return}if($=$.sibling,$!==null){Y$1=$;return}Y$1=$=dt}while($!==null);T$2===0&&(T$2=5)}function Qk(dt,$,lt){var ft=C$3,St=pk.transition;try{pk.transition=null,C$3=1,Xk(dt,$,lt,ft)}finally{pk.transition=St,C$3=ft}return null}function Xk(dt,$,lt,ft){do Ik();while(xk!==null);if(K$1&6)throw Error(p$8(327));lt=dt.finishedWork;var St=dt.finishedLanes;if(lt===null)return null;if(dt.finishedWork=null,dt.finishedLanes=0,lt===dt.current)throw Error(p$8(177));dt.callbackNode=null,dt.callbackPriority=0;var Tt=lt.lanes|lt.childLanes;if(Bc(dt,Tt),dt===R$3&&(Y$1=R$3=null,Z$2=0),!(lt.subtreeFlags&2064)&&!(lt.flags&2064)||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),Tt=(lt.flags&15990)!==0,lt.subtreeFlags&15990||Tt){Tt=pk.transition,pk.transition=null;var Ct=C$3;C$3=1;var At=K$1;K$1|=4,ok.current=null,Pj(dt,lt),ek(lt,dt),Oe$1(Df),dd=!!Cf,Df=Cf=null,dt.current=lt,ik(lt),dc(),K$1=At,C$3=Ct,pk.transition=Tt}else dt.current=lt;if(wk&&(wk=!1,xk=dt,yk=St),Tt=dt.pendingLanes,Tt===0&&(Si=null),mc(lt.stateNode),Ek(dt,B$2()),$!==null)for(ft=dt.onRecoverableError,lt=0;lt<$.length;lt++)St=$[lt],ft(St.value,{componentStack:St.stack,digest:St.digest});if(Pi)throw Pi=!1,dt=Qi,Qi=null,dt;return yk&1&&dt.tag!==0&&Ik(),Tt=dt.pendingLanes,Tt&1?dt===Ak?zk++:(zk=0,Ak=dt):zk=0,jg(),null}function Ik(){if(xk!==null){var dt=Dc(yk),$=pk.transition,lt=C$3;try{if(pk.transition=null,C$3=16>dt?16:dt,xk===null)var ft=!1;else{if(dt=xk,xk=null,yk=0,K$1&6)throw Error(p$8(331));var St=K$1;for(K$1|=4,V$3=dt.current;V$3!==null;){var Tt=V$3,Ct=Tt.child;if(V$3.flags&16){var At=Tt.deletions;if(At!==null){for(var Rt=0;Rt<At.length;Rt++){var kt=At[Rt];for(V$3=kt;V$3!==null;){var Nt=V$3;switch(Nt.tag){case 0:case 11:case 15:Qj(8,Nt,Tt)}var Bt=Nt.child;if(Bt!==null)Bt.return=Nt,V$3=Bt;else for(;V$3!==null;){Nt=V$3;var Ut=Nt.sibling,zt=Nt.return;if(Tj(Nt),Nt===kt){V$3=null;break}if(Ut!==null){Ut.return=zt,V$3=Ut;break}V$3=zt}}}var Zt=Tt.alternate;if(Zt!==null){var ln=Zt.child;if(ln!==null){Zt.child=null;do{var cn=ln.sibling;ln.sibling=null,ln=cn}while(ln!==null)}}V$3=Tt}}if(Tt.subtreeFlags&2064&&Ct!==null)Ct.return=Tt,V$3=Ct;else e:for(;V$3!==null;){if(Tt=V$3,Tt.flags&2048)switch(Tt.tag){case 0:case 11:case 15:Qj(9,Tt,Tt.return)}var hn=Tt.sibling;if(hn!==null){hn.return=Tt.return,V$3=hn;break e}V$3=Tt.return}}var pn=dt.current;for(V$3=pn;V$3!==null;){Ct=V$3;var dn=Ct.child;if(Ct.subtreeFlags&2064&&dn!==null)dn.return=Ct,V$3=dn;else e:for(Ct=pn;V$3!==null;){if(At=V$3,At.flags&2048)try{switch(At.tag){case 0:case 11:case 15:Rj(9,At)}}catch(vn){W$4(At,At.return,vn)}if(At===Ct){V$3=null;break e}var gn=At.sibling;if(gn!==null){gn.return=At.return,V$3=gn;break e}V$3=At.return}}if(K$1=St,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,dt)}catch{}ft=!0}return ft}finally{C$3=lt,pk.transition=$}}return!1}function Yk(dt,$,lt){$=Ki(lt,$),$=Oi(dt,$,1),dt=dh(dt,$,1),$=L$3(),dt!==null&&(Ac(dt,1,$),Ek(dt,$))}function W$4(dt,$,lt){if(dt.tag===3)Yk(dt,dt,lt);else for(;$!==null;){if($.tag===3){Yk($,dt,lt);break}else if($.tag===1){var ft=$.stateNode;if(typeof $.type.getDerivedStateFromError=="function"||typeof ft.componentDidCatch=="function"&&(Si===null||!Si.has(ft))){dt=Ki(lt,dt),dt=Ri($,dt,1),$=dh($,dt,1),dt=L$3(),$!==null&&(Ac($,1,dt),Ek($,dt));break}}$=$.return}}function Ui(dt,$,lt){var ft=dt.pingCache;ft!==null&&ft.delete($),$=L$3(),dt.pingedLanes|=dt.suspendedLanes&lt,R$3===dt&&(Z$2&lt)===lt&&(T$2===4||T$2===3&&(Z$2&130023424)===Z$2&&500>B$2()-gk?Lk(dt,0):sk|=lt),Ek(dt,$)}function Zk(dt,$){$===0&&(dt.mode&1?($=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):$=1);var lt=L$3();dt=Zg(dt,$),dt!==null&&(Ac(dt,$,lt),Ek(dt,lt))}function vj(dt){var $=dt.memoizedState,lt=0;$!==null&&(lt=$.retryLane),Zk(dt,lt)}function ck(dt,$){var lt=0;switch(dt.tag){case 13:var ft=dt.stateNode,St=dt.memoizedState;St!==null&&(lt=St.retryLane);break;case 19:ft=dt.stateNode;break;default:throw Error(p$8(314))}ft!==null&&ft.delete($),Zk(dt,lt)}var Wk;Wk=function(dt,$,lt){if(dt!==null)if(dt.memoizedProps!==$.pendingProps||Wf.current)Ug=!0;else{if(!(dt.lanes&lt)&&!($.flags&128))return Ug=!1,zj(dt,$,lt);Ug=!!(dt.flags&131072)}else Ug=!1,I$3&&$.flags&1048576&&ug($,ng,$.index);switch($.lanes=0,$.tag){case 2:var ft=$.type;jj(dt,$),dt=$.pendingProps;var St=Yf($,H$4.current);Tg($,lt),St=Xh(null,$,ft,dt,St,lt);var Tt=bi();return $.flags|=1,typeof St=="object"&&St!==null&&typeof St.render=="function"&&St.$$typeof===void 0?($.tag=1,$.memoizedState=null,$.updateQueue=null,Zf(ft)?(Tt=!0,cg($)):Tt=!1,$.memoizedState=St.state!==null&&St.state!==void 0?St.state:null,ah($),St.updater=nh,$.stateNode=St,St._reactInternals=$,rh($,ft,dt,lt),$=kj(null,$,ft,!0,Tt,lt)):($.tag=0,I$3&&Tt&&vg($),Yi(null,$,St,lt),$=$.child),$;case 16:ft=$.elementType;e:{switch(jj(dt,$),dt=$.pendingProps,St=ft._init,ft=St(ft._payload),$.type=ft,St=$.tag=$k(ft),dt=Lg(ft,dt),St){case 0:$=dj(null,$,ft,dt,lt);break e;case 1:$=ij(null,$,ft,dt,lt);break e;case 11:$=Zi(null,$,ft,dt,lt);break e;case 14:$=aj(null,$,ft,Lg(ft.type,dt),lt);break e}throw Error(p$8(306,ft,""))}return $;case 0:return ft=$.type,St=$.pendingProps,St=$.elementType===ft?St:Lg(ft,St),dj(dt,$,ft,St,lt);case 1:return ft=$.type,St=$.pendingProps,St=$.elementType===ft?St:Lg(ft,St),ij(dt,$,ft,St,lt);case 3:e:{if(lj($),dt===null)throw Error(p$8(387));ft=$.pendingProps,Tt=$.memoizedState,St=Tt.element,bh(dt,$),gh($,ft,null,lt);var Ct=$.memoizedState;if(ft=Ct.element,Tt.isDehydrated)if(Tt={element:ft,isDehydrated:!1,cache:Ct.cache,pendingSuspenseBoundaries:Ct.pendingSuspenseBoundaries,transitions:Ct.transitions},$.updateQueue.baseState=Tt,$.memoizedState=Tt,$.flags&256){St=Ki(Error(p$8(423)),$),$=mj(dt,$,ft,lt,St);break e}else if(ft!==St){St=Ki(Error(p$8(424)),$),$=mj(dt,$,ft,lt,St);break e}else for(yg=Lf($.stateNode.containerInfo.firstChild),xg=$,I$3=!0,zg=null,lt=Ch($,null,ft,lt),$.child=lt;lt;)lt.flags=lt.flags&-3|4096,lt=lt.sibling;else{if(Ig(),ft===St){$=$i(dt,$,lt);break e}Yi(dt,$,ft,lt)}$=$.child}return $;case 5:return Kh($),dt===null&&Eg($),ft=$.type,St=$.pendingProps,Tt=dt!==null?dt.memoizedProps:null,Ct=St.children,Ef(ft,St)?Ct=null:Tt!==null&&Ef(ft,Tt)&&($.flags|=32),hj(dt,$),Yi(dt,$,Ct,lt),$.child;case 6:return dt===null&&Eg($),null;case 13:return pj(dt,$,lt);case 4:return Ih($,$.stateNode.containerInfo),ft=$.pendingProps,dt===null?$.child=Bh($,null,ft,lt):Yi(dt,$,ft,lt),$.child;case 11:return ft=$.type,St=$.pendingProps,St=$.elementType===ft?St:Lg(ft,St),Zi(dt,$,ft,St,lt);case 7:return Yi(dt,$,$.pendingProps,lt),$.child;case 8:return Yi(dt,$,$.pendingProps.children,lt),$.child;case 12:return Yi(dt,$,$.pendingProps.children,lt),$.child;case 10:e:{if(ft=$.type._context,St=$.pendingProps,Tt=$.memoizedProps,Ct=St.value,G$1(Mg,ft._currentValue),ft._currentValue=Ct,Tt!==null)if(He$2(Tt.value,Ct)){if(Tt.children===St.children&&!Wf.current){$=$i(dt,$,lt);break e}}else for(Tt=$.child,Tt!==null&&(Tt.return=$);Tt!==null;){var At=Tt.dependencies;if(At!==null){Ct=Tt.child;for(var Rt=At.firstContext;Rt!==null;){if(Rt.context===ft){if(Tt.tag===1){Rt=ch(-1,lt&-lt),Rt.tag=2;var kt=Tt.updateQueue;if(kt!==null){kt=kt.shared;var Nt=kt.pending;Nt===null?Rt.next=Rt:(Rt.next=Nt.next,Nt.next=Rt),kt.pending=Rt}}Tt.lanes|=lt,Rt=Tt.alternate,Rt!==null&&(Rt.lanes|=lt),Sg(Tt.return,lt,$),At.lanes|=lt;break}Rt=Rt.next}}else if(Tt.tag===10)Ct=Tt.type===$.type?null:Tt.child;else if(Tt.tag===18){if(Ct=Tt.return,Ct===null)throw Error(p$8(341));Ct.lanes|=lt,At=Ct.alternate,At!==null&&(At.lanes|=lt),Sg(Ct,lt,$),Ct=Tt.sibling}else Ct=Tt.child;if(Ct!==null)Ct.return=Tt;else for(Ct=Tt;Ct!==null;){if(Ct===$){Ct=null;break}if(Tt=Ct.sibling,Tt!==null){Tt.return=Ct.return,Ct=Tt;break}Ct=Ct.return}Tt=Ct}Yi(dt,$,St.children,lt),$=$.child}return $;case 9:return St=$.type,ft=$.pendingProps.children,Tg($,lt),St=Vg(St),ft=ft(St),$.flags|=1,Yi(dt,$,ft,lt),$.child;case 14:return ft=$.type,St=Lg(ft,$.pendingProps),St=Lg(ft.type,St),aj(dt,$,ft,St,lt);case 15:return cj(dt,$,$.type,$.pendingProps,lt);case 17:return ft=$.type,St=$.pendingProps,St=$.elementType===ft?St:Lg(ft,St),jj(dt,$),$.tag=1,Zf(ft)?(dt=!0,cg($)):dt=!1,Tg($,lt),ph($,ft,St),rh($,ft,St,lt),kj(null,$,ft,!0,dt,lt);case 19:return yj(dt,$,lt);case 22:return ej(dt,$,lt)}throw Error(p$8(156,$.tag))};function Gk(dt,$){return ac(dt,$)}function al(dt,$,lt,ft){this.tag=dt,this.key=lt,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=$,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=ft,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(dt,$,lt,ft){return new al(dt,$,lt,ft)}function bj(dt){return dt=dt.prototype,!(!dt||!dt.isReactComponent)}function $k(dt){if(typeof dt=="function")return bj(dt)?1:0;if(dt!=null){if(dt=dt.$$typeof,dt===Da)return 11;if(dt===Ga)return 14}return 2}function wh(dt,$){var lt=dt.alternate;return lt===null?(lt=Bg(dt.tag,$,dt.key,dt.mode),lt.elementType=dt.elementType,lt.type=dt.type,lt.stateNode=dt.stateNode,lt.alternate=dt,dt.alternate=lt):(lt.pendingProps=$,lt.type=dt.type,lt.flags=0,lt.subtreeFlags=0,lt.deletions=null),lt.flags=dt.flags&14680064,lt.childLanes=dt.childLanes,lt.lanes=dt.lanes,lt.child=dt.child,lt.memoizedProps=dt.memoizedProps,lt.memoizedState=dt.memoizedState,lt.updateQueue=dt.updateQueue,$=dt.dependencies,lt.dependencies=$===null?null:{lanes:$.lanes,firstContext:$.firstContext},lt.sibling=dt.sibling,lt.index=dt.index,lt.ref=dt.ref,lt}function yh(dt,$,lt,ft,St,Tt){var Ct=2;if(ft=dt,typeof dt=="function")bj(dt)&&(Ct=1);else if(typeof dt=="string")Ct=5;else e:switch(dt){case ya:return Ah(lt.children,St,Tt,$);case za:Ct=8,St|=8;break;case Aa:return dt=Bg(12,lt,$,St|2),dt.elementType=Aa,dt.lanes=Tt,dt;case Ea:return dt=Bg(13,lt,$,St),dt.elementType=Ea,dt.lanes=Tt,dt;case Fa:return dt=Bg(19,lt,$,St),dt.elementType=Fa,dt.lanes=Tt,dt;case Ia:return qj(lt,St,Tt,$);default:if(typeof dt=="object"&&dt!==null)switch(dt.$$typeof){case Ba:Ct=10;break e;case Ca:Ct=9;break e;case Da:Ct=11;break e;case Ga:Ct=14;break e;case Ha:Ct=16,ft=null;break e}throw Error(p$8(130,dt==null?dt:typeof dt,""))}return $=Bg(Ct,lt,$,St),$.elementType=dt,$.type=ft,$.lanes=Tt,$}function Ah(dt,$,lt,ft){return dt=Bg(7,dt,ft,$),dt.lanes=lt,dt}function qj(dt,$,lt,ft){return dt=Bg(22,dt,ft,$),dt.elementType=Ia,dt.lanes=lt,dt.stateNode={isHidden:!1},dt}function xh(dt,$,lt){return dt=Bg(6,dt,null,$),dt.lanes=lt,dt}function zh(dt,$,lt){return $=Bg(4,dt.children!==null?dt.children:[],dt.key,$),$.lanes=lt,$.stateNode={containerInfo:dt.containerInfo,pendingChildren:null,implementation:dt.implementation},$}function bl(dt,$,lt,ft,St){this.tag=$,this.containerInfo=dt,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=ft,this.onRecoverableError=St,this.mutableSourceEagerHydrationData=null}function cl(dt,$,lt,ft,St,Tt,Ct,At,Rt){return dt=new bl(dt,$,lt,At,Rt),$===1?($=1,Tt===!0&&($|=8)):$=0,Tt=Bg(3,null,null,$),dt.current=Tt,Tt.stateNode=dt,Tt.memoizedState={element:ft,isDehydrated:lt,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(Tt),dt}function dl(dt,$,lt){var ft=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:ft==null?null:""+ft,children:dt,containerInfo:$,implementation:lt}}function el(dt){if(!dt)return Vf;dt=dt._reactInternals;e:{if(Vb(dt)!==dt||dt.tag!==1)throw Error(p$8(170));var $=dt;do{switch($.tag){case 3:$=$.stateNode.context;break e;case 1:if(Zf($.type)){$=$.stateNode.__reactInternalMemoizedMergedChildContext;break e}}$=$.return}while($!==null);throw Error(p$8(171))}if(dt.tag===1){var lt=dt.type;if(Zf(lt))return bg(dt,lt,$)}return $}function fl(dt,$,lt,ft,St,Tt,Ct,At,Rt){return dt=cl(lt,ft,!0,dt,St,Tt,Ct,At,Rt),dt.context=el(null),lt=dt.current,ft=L$3(),St=lh(lt),Tt=ch(ft,St),Tt.callback=$??null,dh(lt,Tt,St),dt.current.lanes=St,Ac(dt,St,ft),Ek(dt,ft),dt}function gl(dt,$,lt,ft){var St=$.current,Tt=L$3(),Ct=lh(St);return lt=el(lt),$.context===null?$.context=lt:$.pendingContext=lt,$=ch(Tt,Ct),$.payload={element:dt},ft=ft===void 0?null:ft,ft!==null&&($.callback=ft),dt=dh(St,$,Ct),dt!==null&&(mh(dt,St,Ct,Tt),eh(dt,St,Ct)),Ct}function hl(dt){if(dt=dt.current,!dt.child)return null;switch(dt.child.tag){case 5:return dt.child.stateNode;default:return dt.child.stateNode}}function il(dt,$){if(dt=dt.memoizedState,dt!==null&&dt.dehydrated!==null){var lt=dt.retryLane;dt.retryLane=lt!==0&&lt<$?lt:$}}function jl(dt,$){il(dt,$),(dt=dt.alternate)&&il(dt,$)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(dt){console.error(dt)};function ml(dt){this._internalRoot=dt}nl.prototype.render=ml.prototype.render=function(dt){var $=this._internalRoot;if($===null)throw Error(p$8(409));gl(dt,$,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var dt=this._internalRoot;if(dt!==null){this._internalRoot=null;var $=dt.containerInfo;Sk(function(){gl(null,dt,null,null)}),$[uf]=null}};function nl(dt){this._internalRoot=dt}nl.prototype.unstable_scheduleHydration=function(dt){if(dt){var $=Hc();dt={blockedOn:null,target:dt,priority:$};for(var lt=0;lt<Qc.length&&$!==0&&$<Qc[lt].priority;lt++);Qc.splice(lt,0,dt),lt===0&&Vc(dt)}};function ol(dt){return!(!dt||dt.nodeType!==1&&dt.nodeType!==9&&dt.nodeType!==11)}function pl(dt){return!(!dt||dt.nodeType!==1&&dt.nodeType!==9&&dt.nodeType!==11&&(dt.nodeType!==8||dt.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(dt,$,lt,ft,St){if(St){if(typeof ft=="function"){var Tt=ft;ft=function(){var kt=hl(Ct);Tt.call(kt)}}var Ct=fl($,ft,dt,0,null,!1,!1,"",ql);return dt._reactRootContainer=Ct,dt[uf]=Ct.current,sf(dt.nodeType===8?dt.parentNode:dt),Sk(),Ct}for(;St=dt.lastChild;)dt.removeChild(St);if(typeof ft=="function"){var At=ft;ft=function(){var kt=hl(Rt);At.call(kt)}}var Rt=cl(dt,0,!1,null,null,!1,!1,"",ql);return dt._reactRootContainer=Rt,dt[uf]=Rt.current,sf(dt.nodeType===8?dt.parentNode:dt),Sk(function(){gl($,Rt,lt,ft)}),Rt}function sl(dt,$,lt,ft,St){var Tt=lt._reactRootContainer;if(Tt){var Ct=Tt;if(typeof St=="function"){var At=St;St=function(){var Rt=hl(Ct);At.call(Rt)}}gl($,Ct,dt,St)}else Ct=rl(lt,$,dt,St,ft);return hl(Ct)}Ec=function(dt){switch(dt.tag){case 3:var $=dt.stateNode;if($.current.memoizedState.isDehydrated){var lt=tc($.pendingLanes);lt!==0&&(Cc($,lt|1),Ek($,B$2()),!(K$1&6)&&(Hj=B$2()+500,jg()))}break;case 13:Sk(function(){var ft=Zg(dt,1);if(ft!==null){var St=L$3();mh(ft,dt,1,St)}}),jl(dt,1)}};Fc=function(dt){if(dt.tag===13){var $=Zg(dt,134217728);if($!==null){var lt=L$3();mh($,dt,134217728,lt)}jl(dt,134217728)}};Gc=function(dt){if(dt.tag===13){var $=lh(dt),lt=Zg(dt,$);if(lt!==null){var ft=L$3();mh(lt,dt,$,ft)}jl(dt,$)}};Hc=function(){return C$3};Ic=function(dt,$){var lt=C$3;try{return C$3=dt,$()}finally{C$3=lt}};yb=function(dt,$,lt){switch($){case"input":if(bb(dt,lt),$=lt.name,lt.type==="radio"&&$!=null){for(lt=dt;lt.parentNode;)lt=lt.parentNode;for(lt=lt.querySelectorAll("input[name="+JSON.stringify(""+$)+'][type="radio"]'),$=0;$<lt.length;$++){var ft=lt[$];if(ft!==dt&&ft.form===dt.form){var St=Db(ft);if(!St)throw Error(p$8(90));Wa(ft),bb(ft,St)}}}break;case"textarea":ib(dt,lt);break;case"select":$=lt.value,$!=null&&fb(dt,!!lt.multiple,$,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue$2,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(dt){return dt=Zb(dt),dt===null?null:dt.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(dt,$){var lt=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol($))throw Error(p$8(200));return dl(dt,$,null,lt)};reactDom_production_min.createRoot=function(dt,$){if(!ol(dt))throw Error(p$8(299));var lt=!1,ft="",St=ll;return $!=null&&($.unstable_strictMode===!0&&(lt=!0),$.identifierPrefix!==void 0&&(ft=$.identifierPrefix),$.onRecoverableError!==void 0&&(St=$.onRecoverableError)),$=cl(dt,1,!1,null,null,lt,!1,ft,St),dt[uf]=$.current,sf(dt.nodeType===8?dt.parentNode:dt),new ml($)};reactDom_production_min.findDOMNode=function(dt){if(dt==null)return null;if(dt.nodeType===1)return dt;var $=dt._reactInternals;if($===void 0)throw typeof dt.render=="function"?Error(p$8(188)):(dt=Object.keys(dt).join(","),Error(p$8(268,dt)));return dt=Zb($),dt=dt===null?null:dt.stateNode,dt};reactDom_production_min.flushSync=function(dt){return Sk(dt)};reactDom_production_min.hydrate=function(dt,$,lt){if(!pl($))throw Error(p$8(200));return sl(null,dt,$,!0,lt)};reactDom_production_min.hydrateRoot=function(dt,$,lt){if(!ol(dt))throw Error(p$8(405));var ft=lt!=null&&lt.hydratedSources||null,St=!1,Tt="",Ct=ll;if(lt!=null&&(lt.unstable_strictMode===!0&&(St=!0),lt.identifierPrefix!==void 0&&(Tt=lt.identifierPrefix),lt.onRecoverableError!==void 0&&(Ct=lt.onRecoverableError)),$=fl($,null,dt,1,lt??null,St,!1,Tt,Ct),dt[uf]=$.current,sf(dt),ft)for(dt=0;dt<ft.length;dt++)lt=ft[dt],St=lt._getVersion,St=St(lt._source),$.mutableSourceEagerHydrationData==null?$.mutableSourceEagerHydrationData=[lt,St]:$.mutableSourceEagerHydrationData.push(lt,St);return new nl($)};reactDom_production_min.render=function(dt,$,lt){if(!pl($))throw Error(p$8(200));return sl(null,dt,$,!1,lt)};reactDom_production_min.unmountComponentAtNode=function(dt){if(!pl(dt))throw Error(p$8(40));return dt._reactRootContainer?(Sk(function(){sl(null,null,dt,!1,function(){dt._reactRootContainer=null,dt[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(dt,$,lt,ft){if(!pl(lt))throw Error(p$8(200));if(dt==null||dt._reactInternals===void 0)throw Error(p$8(38));return sl(dt,$,lt,!1,ft)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(dt){console.error(dt)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m$5=reactDomExports;client.createRoot=m$5.createRoot,client.hydrateRoot=m$5.hydrateRoot;const $3f95d3e171760903$var$canUseEffectHooks=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$3f95d3e171760903$var$useIsomorphicLayoutEffect=$3f95d3e171760903$var$canUseEffectHooks?reactExports.useLayoutEffect:()=>{};var $3f95d3e171760903$export$2e2bcd8739ae039=$3f95d3e171760903$var$useIsomorphicLayoutEffect;let $e504a2438473eda9$var$counter=0;function $e504a2438473eda9$export$2e2bcd8739ae039(dt=null){const $=typeof reactExports.useId=="function"?reactExports.useId():null,lt=reactExports.useRef(dt||$||null);return lt.current===null&&(lt.current=""+$e504a2438473eda9$var$counter++),lt.current}const $af466b485b9d515d$export$7d8c6d083caec74a=reactExports.createContext(null);$af466b485b9d515d$export$7d8c6d083caec74a.displayName="PanelGroupContext";function $c33df6d7c39fd3ee$var$PanelWithForwardedRef({children:dt=null,className:$="",collapsible:lt=!1,defaultSize:ft=null,forwardedRef:St,id:Tt=null,maxSize:Ct=100,minSize:At=10,onCollapse:Rt=null,onResize:kt=null,order:Nt=null,style:Bt={},tagName:Ut="div"}){const zt=reactExports.useContext($af466b485b9d515d$export$7d8c6d083caec74a);if(zt===null)throw Error("Panel components must be rendered within a PanelGroup container");const Zt=$e504a2438473eda9$export$2e2bcd8739ae039(Tt),{collapsePanel:ln,expandPanel:cn,getPanelStyle:hn,registerPanel:pn,resizePanel:dn,unregisterPanel:gn}=zt,vn=reactExports.useRef({onCollapse:Rt,onResize:kt});if(reactExports.useEffect(()=>{vn.current.onCollapse=Rt,vn.current.onResize=kt}),At<0||At>100)throw Error(`Panel minSize must be between 0 and 100, but was ${At}`);if(Ct<0||Ct>100)throw Error(`Panel maxSize must be between 0 and 100, but was ${Ct}`);if(ft!==null){if(ft<0||ft>100)throw Error(`Panel defaultSize must be between 0 and 100, but was ${ft}`);At>ft&&!lt&&(console.error(`Panel minSize ${At} cannot be greater than defaultSize ${ft}`),ft=At)}$3f95d3e171760903$export$2e2bcd8739ae039(()=>(pn(Zt,{callbacksRef:vn,collapsible:lt,defaultSize:ft,id:Zt,maxSize:Ct,minSize:At,order:Nt}),()=>{gn(Zt)}),[lt,ft,Zt,Ct,At,Nt,pn,gn]);const Tn=hn(Zt),Cn=reactExports.useRef({size:$c33df6d7c39fd3ee$var$parseSizeFromStyle(Tn)});return $3f95d3e171760903$export$2e2bcd8739ae039(()=>{Cn.current.size=$c33df6d7c39fd3ee$var$parseSizeFromStyle(Tn)}),reactExports.useImperativeHandle(St,()=>({collapse:()=>ln(Zt),expand:()=>cn(Zt),getCollapsed(){return Cn.current.size===0},getSize(){return Cn.current.size},resize:$n=>dn(Zt,$n)}),[ln,cn,Zt,dn]),reactExports.createElement(Ut,{children:dt,className:$,"data-panel":"","data-panel-collapsible":lt||void 0,"data-panel-id":Zt,"data-panel-size":parseFloat(""+Tn.flexGrow).toFixed(1),id:`data-panel-id-${Zt}`,style:{...Tn,...Bt}})}const $c33df6d7c39fd3ee$export$2ddb90ad54e5f587=reactExports.forwardRef((dt,$)=>reactExports.createElement($c33df6d7c39fd3ee$var$PanelWithForwardedRef,{...dt,forwardedRef:$}));$c33df6d7c39fd3ee$var$PanelWithForwardedRef.displayName="Panel";$c33df6d7c39fd3ee$export$2ddb90ad54e5f587.displayName="forwardRef(Panel)";function $c33df6d7c39fd3ee$var$parseSizeFromStyle(dt){const{flexGrow:$}=dt;return typeof $=="string"?parseFloat($):$}function $6889c3a3ed41cfd1$var$getSerializationKey(dt){return dt.map($=>{const{minSize:lt,order:ft}=$;return ft?`${ft}:${lt}`:`${lt}`}).sort(($,lt)=>$.localeCompare(lt)).join(",")}function $6889c3a3ed41cfd1$var$loadSerializedPanelGroupState(dt,$){try{const lt=$.getItem(`PanelGroup:sizes:${dt}`);if(lt){const ft=JSON.parse(lt);if(typeof ft=="object"&&ft!=null)return ft}}catch{}return null}function $6889c3a3ed41cfd1$export$9c80c6617f0386da(dt,$,lt){const ft=$6889c3a3ed41cfd1$var$loadSerializedPanelGroupState(dt,lt);if(ft){const Tt=$6889c3a3ed41cfd1$var$getSerializationKey($);var St;return(St=ft[Tt])!==null&&St!==void 0?St:null}return null}function $6889c3a3ed41cfd1$export$af183b313c61be4f(dt,$,lt,ft){const St=$6889c3a3ed41cfd1$var$getSerializationKey($),Tt=$6889c3a3ed41cfd1$var$loadSerializedPanelGroupState(dt,ft)||{};Tt[St]=lt;try{ft.setItem(`PanelGroup:sizes:${dt}`,JSON.stringify(Tt))}catch(Ct){console.error(Ct)}}const $a8e83be196252871$export$d6d3992f3becc879=10;function $d6f7e4c3aa9e02d7$export$f50bae335f53943c(dt,$,lt,ft,St,Tt,Ct,At){const{sizes:Rt}=At||{},kt=Rt||Tt;if(St===0)return kt;const Nt=$d6f7e4c3aa9e02d7$export$a861c0ad45885494($),Bt=kt.concat();let Ut=0;{const ln=St<0?ft:lt,cn=Nt.findIndex(gn=>gn.id===ln),hn=Nt[cn],pn=kt[cn],dn=$d6f7e4c3aa9e02d7$var$safeResizePanel(hn,Math.abs(St),pn,dt);if(pn===dn)return kt;dn===0&&pn>0&&Ct.set(ln,pn),St=St<0?pn-dn:dn-pn}let zt=St<0?lt:ft,Zt=Nt.findIndex(ln=>ln.id===zt);for(;;){const ln=Nt[Zt],cn=kt[Zt],hn=Math.abs(St)-Math.abs(Ut),pn=$d6f7e4c3aa9e02d7$var$safeResizePanel(ln,0-hn,cn,dt);if(cn!==pn&&(pn===0&&cn>0&&Ct.set(ln.id,cn),Ut+=cn-pn,Bt[Zt]=pn,Ut.toPrecision($a8e83be196252871$export$d6d3992f3becc879).localeCompare(Math.abs(St).toPrecision($a8e83be196252871$export$d6d3992f3becc879),void 0,{numeric:!0})>=0))break;if(St<0){if(--Zt<0)break}else if(++Zt>=Nt.length)break}return Ut===0?kt:(zt=St<0?ft:lt,Zt=Nt.findIndex(ln=>ln.id===zt),Bt[Zt]=kt[Zt]+Ut,Bt)}function $d6f7e4c3aa9e02d7$export$b8e48269e4faa934(dt,$,lt){lt.forEach((ft,St)=>{const Tt=$[St];if(Tt!==ft){const{callbacksRef:Ct,collapsible:At}=dt[St],{onCollapse:Rt,onResize:kt}=Ct.current;kt&&kt(ft),At&&Rt&&(!Tt&&ft!==0?Rt(!1):Tt!==0&&ft===0&&Rt(!0))}})}function $d6f7e4c3aa9e02d7$export$5a5b0c1d38c23c3b(dt,$){if($.length<2)return[null,null];const lt=$.findIndex(Ct=>Ct.id===dt);if(lt<0)return[null,null];const ft=lt===$.length-1,St=ft?$[lt-1].id:dt,Tt=ft?dt:$[lt+1].id;return[St,Tt]}function $d6f7e4c3aa9e02d7$export$6f43503e166de6fb(dt,$,lt){if(dt.size===1)return"100";const St=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(dt).findIndex(Ct=>Ct.id===$),Tt=lt[St];return Tt==null?"0":Tt.toPrecision($a8e83be196252871$export$d6d3992f3becc879)}function $d6f7e4c3aa9e02d7$export$7361ed18ff57179e(dt){const $=document.querySelector(`[data-panel-id="${dt}"]`);return $||null}function $d6f7e4c3aa9e02d7$export$5e67632cf3550a9c(dt){const $=document.querySelector(`[data-panel-group-id="${dt}"]`);return $||null}function $d6f7e4c3aa9e02d7$export$2e27d3a347680388(dt){const $=document.querySelector(`[data-panel-resize-handle-id="${dt}"]`);return $||null}function $d6f7e4c3aa9e02d7$export$96a40be80fb6c3c8(dt){const lt=$d6f7e4c3aa9e02d7$export$8d0cd3c32ddc045e().findIndex(ft=>ft.getAttribute("data-panel-resize-handle-id")===dt);return lt??null}function $d6f7e4c3aa9e02d7$export$8d0cd3c32ddc045e(){return Array.from(document.querySelectorAll("[data-panel-resize-handle-id]"))}function $d6f7e4c3aa9e02d7$export$ae14931f0a0256a3(dt){return Array.from(document.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${dt}"]`))}function $d6f7e4c3aa9e02d7$export$68d3a33c21dfbe27(dt,$,lt){var ft,St;const Tt=$d6f7e4c3aa9e02d7$export$2e27d3a347680388($),At=$d6f7e4c3aa9e02d7$export$ae14931f0a0256a3(dt).indexOf(Tt);var Rt;const kt=(Rt=(ft=lt[At])===null||ft===void 0?void 0:ft.id)!==null&&Rt!==void 0?Rt:null;var Nt;const Bt=(Nt=(St=lt[At+1])===null||St===void 0?void 0:St.id)!==null&&Nt!==void 0?Nt:null;return[kt,Bt]}function $d6f7e4c3aa9e02d7$export$a861c0ad45885494(dt){return Array.from(dt.values()).sort(($,lt)=>$.order-lt.order)}function $d6f7e4c3aa9e02d7$var$safeResizePanel(dt,$,lt,ft){const St=lt+$;if(dt.collapsible)if(lt>0){if(St<=0)return 0}else{var Tt;if(!(ft==null||(Tt=ft.type)===null||Tt===void 0?void 0:Tt.startsWith("key"))&&St<dt.minSize)return 0}return Math.min(dt.maxSize,Math.max(dt.minSize,St))}function $8f51c2d77bf1da88$export$ec391ce65b083ed4(dt,$,lt,ft=0,St=null){const Tt=lt==="horizontal";let Ct=0;if($8f51c2d77bf1da88$export$764db16956f554f8(dt))Ct=Tt?dt.clientX:dt.clientY;else if($8f51c2d77bf1da88$export$c4dfce035d43d1e0(dt)){const Nt=dt.touches[0];Ct=Tt?Nt.screenX:Nt.screenY}else return 0;const At=$d6f7e4c3aa9e02d7$export$2e27d3a347680388($),Rt=St||At.getBoundingClientRect(),kt=Tt?Rt.left:Rt.top;return Ct-kt-ft}function $8f51c2d77bf1da88$export$354b17c0684607ed(dt,$,lt,ft,St,Tt,Ct){const{dragOffset:At=0,dragHandleRect:Rt,sizes:kt}=Ct||{},Nt=kt||Tt;if($8f51c2d77bf1da88$export$e7bf60a870f429b0(dt)){const Bt=St==="horizontal",zt=$d6f7e4c3aa9e02d7$export$5e67632cf3550a9c($).getBoundingClientRect(),Zt=Bt?zt.width:zt.height,ln=dt.shiftKey?10:100,cn=Zt/ln;let hn=0;switch(dt.key){case"ArrowDown":hn=Bt?0:cn;break;case"ArrowLeft":hn=Bt?-cn:0;break;case"ArrowRight":hn=Bt?cn:0;break;case"ArrowUp":hn=Bt?0:-cn;break;case"End":hn=Zt;break;case"Home":hn=-Zt;break}const[pn,dn]=$d6f7e4c3aa9e02d7$export$68d3a33c21dfbe27($,lt,ft),gn=hn<0?pn:dn,vn=ft.findIndex(Cn=>Cn.id===gn),Tn=ft[vn];if(Tn.collapsible){const Cn=Nt[vn];(Cn===0||Cn.toPrecision($a8e83be196252871$export$d6d3992f3becc879)===Tn.minSize.toPrecision($a8e83be196252871$export$d6d3992f3becc879))&&(hn=hn<0?-Tn.minSize*Zt:Tn.minSize*Zt)}return hn}else return $8f51c2d77bf1da88$export$ec391ce65b083ed4(dt,lt,St,At,Rt)}function $8f51c2d77bf1da88$export$e7bf60a870f429b0(dt){return dt.type==="keydown"}function $8f51c2d77bf1da88$export$764db16956f554f8(dt){return dt.type.startsWith("mouse")}function $8f51c2d77bf1da88$export$c4dfce035d43d1e0(dt){return dt.type.startsWith("touch")}function $4a90471e7083b52f$export$d9fcbe062527d159({committedValuesRef:dt,groupId:$,panels:lt,setSizes:ft,sizes:St,panelSizeBeforeCollapse:Tt}){reactExports.useEffect(()=>{const{direction:Ct,panels:At}=dt.current,Rt=$d6f7e4c3aa9e02d7$export$5e67632cf3550a9c($),{height:kt,width:Nt}=Rt.getBoundingClientRect(),Ut=$d6f7e4c3aa9e02d7$export$ae14931f0a0256a3($).map(zt=>{const Zt=zt.getAttribute("data-panel-resize-handle-id"),ln=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(At),[cn,hn]=$d6f7e4c3aa9e02d7$export$68d3a33c21dfbe27($,Zt,ln);if(cn==null||hn==null)return()=>{};let pn=0,dn=100,gn=0,vn=0;ln.forEach(Pn=>{Pn.id===cn?(dn=Pn.maxSize,pn=Pn.minSize):(gn+=Pn.minSize,vn+=Pn.maxSize)});const Tn=Math.min(dn,100-gn),Cn=Math.max(pn,(ln.length-1)*100-vn),$n=$d6f7e4c3aa9e02d7$export$6f43503e166de6fb(At,cn,St);zt.setAttribute("aria-valuemax",""+Math.round(Tn)),zt.setAttribute("aria-valuemin",""+Math.round(Cn)),zt.setAttribute("aria-valuenow",""+Math.round(parseInt($n)));const xn=Pn=>{switch(Pn.key){case"Enter":{const Nn=ln.findIndex(Wn=>Wn.id===cn);if(Nn>=0){const Wn=ln[Nn],zn=St[Nn];if(zn!=null){let Yn=0;zn.toPrecision($a8e83be196252871$export$d6d3992f3becc879)<=Wn.minSize.toPrecision($a8e83be196252871$export$d6d3992f3becc879)?Yn=Ct==="horizontal"?Nt:kt:Yn=-(Ct==="horizontal"?Nt:kt);const Qn=$d6f7e4c3aa9e02d7$export$f50bae335f53943c(Pn,At,cn,hn,Yn,St,Tt.current,null);St!==Qn&&ft(Qn)}}break}}};zt.addEventListener("keydown",xn);const Rn=$d6f7e4c3aa9e02d7$export$7361ed18ff57179e(cn);return Rn!=null&&zt.setAttribute("aria-controls",Rn.id),()=>{zt.removeAttribute("aria-valuemax"),zt.removeAttribute("aria-valuemin"),zt.removeAttribute("aria-valuenow"),zt.removeEventListener("keydown",xn),Rn!=null&&zt.removeAttribute("aria-controls")}});return()=>{Ut.forEach(zt=>zt())}},[$,lt,St])}function $4a90471e7083b52f$export$33b0bea6ac3ffb03({disabled:dt,handleId:$,resizeHandler:lt}){reactExports.useEffect(()=>{if(dt||lt==null)return;const ft=$d6f7e4c3aa9e02d7$export$2e27d3a347680388($);if(ft==null)return;const St=Tt=>{switch(Tt.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":lt(Tt);break;case"F6":{const Ct=$d6f7e4c3aa9e02d7$export$8d0cd3c32ddc045e(),At=$d6f7e4c3aa9e02d7$export$96a40be80fb6c3c8($),Rt=Tt.shiftKey?At>0?At-1:Ct.length-1:At+1<Ct.length?At+1:0;Ct[Rt].focus();break}}};return ft.addEventListener("keydown",St),()=>{ft.removeEventListener("keydown",St)}},[dt,$,lt])}let $8d9d88bebf1a8ace$var$currentState=null,$8d9d88bebf1a8ace$var$element=null;function $8d9d88bebf1a8ace$export$fa35f3322c52262f(dt){switch(dt){case"horizontal":return"col-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"row-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function $8d9d88bebf1a8ace$export$b61932ee18f96e08(){$8d9d88bebf1a8ace$var$element!==null&&(document.head.removeChild($8d9d88bebf1a8ace$var$element),$8d9d88bebf1a8ace$var$currentState=null,$8d9d88bebf1a8ace$var$element=null)}function $8d9d88bebf1a8ace$export$d395b5dfd066a659(dt){if($8d9d88bebf1a8ace$var$currentState===dt)return;$8d9d88bebf1a8ace$var$currentState=dt;const $=$8d9d88bebf1a8ace$export$fa35f3322c52262f(dt);$8d9d88bebf1a8ace$var$element===null&&($8d9d88bebf1a8ace$var$element=document.createElement("style"),document.head.appendChild($8d9d88bebf1a8ace$var$element)),$8d9d88bebf1a8ace$var$element.innerHTML=`*{cursor: ${$}!important;}`}function $f7d932e9304c1581$export$2e2bcd8739ae039(dt,$=10){let lt=null;return(...St)=>{clearTimeout(lt),lt=setTimeout(()=>{dt(...St)},$)}}function $c892f0f705e6ded5$export$b141efd0b0fb9174(dt,$){if(dt.length!==$.length)return!1;for(let lt=0;lt<dt.length;lt++)if(dt[lt]!==$[lt])return!1;return!0}const $3daa5d4c086ea816$var$savePanelGroupLayoutDebounced=$f7d932e9304c1581$export$2e2bcd8739ae039($6889c3a3ed41cfd1$export$af183b313c61be4f,100);function $3daa5d4c086ea816$var$throwServerError(){throw new Error('PanelGroup "storage" prop required for server rendering.')}const $3daa5d4c086ea816$var$defaultStorage={getItem:typeof localStorage<"u"?dt=>localStorage.getItem(dt):$3daa5d4c086ea816$var$throwServerError,setItem:typeof localStorage<"u"?(dt,$)=>localStorage.setItem(dt,$):$3daa5d4c086ea816$var$throwServerError};function $3daa5d4c086ea816$export$1d05749f6f573bb({autoSaveId:dt,children:$=null,className:lt="",direction:ft,disablePointerEventsDuringResize:St=!1,id:Tt=null,onLayout:Ct=null,storage:At=$3daa5d4c086ea816$var$defaultStorage,style:Rt={},tagName:kt="div"}){const Nt=$e504a2438473eda9$export$2e2bcd8739ae039(Tt),[Bt,Ut]=reactExports.useState(null),[zt,Zt]=reactExports.useState(new Map),ln=reactExports.useRef(null),cn=reactExports.useRef({onLayout:Ct});reactExports.useEffect(()=>{cn.current.onLayout=Ct});const[hn,pn]=reactExports.useState([]),dn=reactExports.useRef(new Map),gn=reactExports.useRef(0),vn=reactExports.useRef({direction:ft,panels:zt,sizes:hn});$3f95d3e171760903$export$2e2bcd8739ae039(()=>{vn.current.direction=ft,vn.current.panels=zt,vn.current.sizes=hn}),$4a90471e7083b52f$export$d9fcbe062527d159({committedValuesRef:vn,groupId:Nt,panels:zt,setSizes:pn,sizes:hn,panelSizeBeforeCollapse:dn}),reactExports.useEffect(()=>{const{onLayout:Qn}=cn.current;if(Qn){const{sizes:nr}=vn.current;nr.length>0&&Qn(nr)}},[hn]);const Tn=reactExports.useRef(!1);$3f95d3e171760903$export$2e2bcd8739ae039(()=>{if(Tn.current)return;const{panels:Qn,sizes:nr}=vn.current;if(nr.length>0){Tn.current=!0;const Ln=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(Qn);$d6f7e4c3aa9e02d7$export$b8e48269e4faa934(Ln,[],nr)}},[hn]),$3f95d3e171760903$export$2e2bcd8739ae039(()=>{if(vn.current.sizes.length===zt.size)return;let nr;if(dt){const Ln=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(zt);nr=$6889c3a3ed41cfd1$export$9c80c6617f0386da(dt,Ln,At)}if(nr!=null)pn(nr);else{const Ln=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(zt);let Un=0,Vn=0,sr=0;if(Ln.forEach(In=>{sr+=In.minSize,In.defaultSize===null?Un++:Vn+=In.defaultSize}),Vn>100)throw new Error("The sum of the defaultSize of all panels in a group cannot exceed 100.");if(sr>100)throw new Error("The sum of the minSize of all panels in a group cannot exceed 100.");pn(Ln.map(In=>In.defaultSize===null?(100-Vn)/Un:In.defaultSize))}},[dt,zt]),reactExports.useEffect(()=>{if(dt){if(hn.length===0||hn.length!==zt.size)return;const Qn=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(zt);$3daa5d4c086ea816$var$savePanelGroupLayoutDebounced(dt,Qn,hn,At)}},[dt,zt,hn]);const Cn=reactExports.useCallback(Qn=>{const{panels:nr}=vn.current;return nr.size===0?{flexBasis:"auto",flexGrow:1,flexShrink:1,overflow:"hidden"}:{flexBasis:0,flexGrow:$d6f7e4c3aa9e02d7$export$6f43503e166de6fb(nr,Qn,hn),flexShrink:1,overflow:"hidden",pointerEvents:St&&Bt!==null?"none":void 0}},[Bt,ft,hn]),$n=reactExports.useCallback((Qn,nr)=>{Zt(Ln=>{if(Ln.has(Qn))return Ln;const Un=new Map(Ln);return Un.set(Qn,nr),Un})},[]),xn=reactExports.useCallback(Qn=>Ln=>{Ln.preventDefault();const{direction:Un,panels:Vn,sizes:sr}=vn.current,In=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(Vn),[ir,pr]=$d6f7e4c3aa9e02d7$export$68d3a33c21dfbe27(Nt,Qn,In);if(ir==null||pr==null)return;const Jn=$8f51c2d77bf1da88$export$354b17c0684607ed(Ln,Nt,Qn,In,Un,sr,ln.current);if(Jn===0)return;const br=$d6f7e4c3aa9e02d7$export$5e67632cf3550a9c(Nt).getBoundingClientRect(),Gr=Un==="horizontal",Kr=Gr?br.width:br.height,Xr=Jn/Kr*100,Jr=$d6f7e4c3aa9e02d7$export$f50bae335f53943c(Ln,Vn,ir,pr,Xr,sr,dn.current,ln.current),Tr=!$c892f0f705e6ded5$export$b141efd0b0fb9174(sr,Jr);($8f51c2d77bf1da88$export$764db16956f554f8(Ln)||$8f51c2d77bf1da88$export$c4dfce035d43d1e0(Ln))&&gn.current!=Xr&&$8d9d88bebf1a8ace$export$d395b5dfd066a659(Tr?Gr?"horizontal":"vertical":Gr?Jn<0?"horizontal-min":"horizontal-max":Jn<0?"vertical-min":"vertical-max"),Tr&&($d6f7e4c3aa9e02d7$export$b8e48269e4faa934(In,sr,Jr),pn(Jr)),gn.current=Xr},[Nt]),Rn=reactExports.useCallback(Qn=>{Zt(nr=>{if(!nr.has(Qn))return nr;const Ln=new Map(nr);return Ln.delete(Qn),Ln})},[]),Pn=reactExports.useCallback(Qn=>{const{panels:nr,sizes:Ln}=vn.current,Un=nr.get(Qn);if(Un==null||!Un.collapsible)return;const Vn=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(nr),sr=Vn.indexOf(Un);if(sr<0)return;const In=Ln[sr];if(In===0)return;dn.current.set(Qn,In);const[ir,pr]=$d6f7e4c3aa9e02d7$export$5a5b0c1d38c23c3b(Qn,Vn);if(ir==null||pr==null)return;const Pr=sr===Vn.length-1?In:0-In,br=$d6f7e4c3aa9e02d7$export$f50bae335f53943c(null,nr,ir,pr,Pr,Ln,dn.current,null);Ln!==br&&($d6f7e4c3aa9e02d7$export$b8e48269e4faa934(Vn,Ln,br),pn(br))},[]),Nn=reactExports.useCallback(Qn=>{const{panels:nr,sizes:Ln}=vn.current,Un=nr.get(Qn);if(Un==null)return;const Vn=dn.current.get(Qn)||Un.minSize;if(!Vn)return;const sr=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(nr),In=sr.indexOf(Un);if(In<0||Ln[In]!==0)return;const[pr,Jn]=$d6f7e4c3aa9e02d7$export$5a5b0c1d38c23c3b(Qn,sr);if(pr==null||Jn==null)return;const br=In===sr.length-1?0-Vn:Vn,Gr=$d6f7e4c3aa9e02d7$export$f50bae335f53943c(null,nr,pr,Jn,br,Ln,dn.current,null);Ln!==Gr&&($d6f7e4c3aa9e02d7$export$b8e48269e4faa934(sr,Ln,Gr),pn(Gr))},[]),Wn=reactExports.useCallback((Qn,nr)=>{const{panels:Ln,sizes:Un}=vn.current,Vn=Ln.get(Qn);if(Vn==null)return;const sr=$d6f7e4c3aa9e02d7$export$a861c0ad45885494(Ln),In=sr.indexOf(Vn);if(In<0)return;const ir=Un[In];if(ir===nr)return;Vn.collapsible&&nr===0||(nr=Math.min(Vn.maxSize,Math.max(Vn.minSize,nr)));const[pr,Jn]=$d6f7e4c3aa9e02d7$export$5a5b0c1d38c23c3b(Qn,sr);if(pr==null||Jn==null)return;const br=In===sr.length-1?ir-nr:nr-ir,Gr=$d6f7e4c3aa9e02d7$export$f50bae335f53943c(null,Ln,pr,Jn,br,Un,dn.current,null);Un!==Gr&&($d6f7e4c3aa9e02d7$export$b8e48269e4faa934(sr,Un,Gr),pn(Gr))},[]),zn=reactExports.useMemo(()=>({activeHandleId:Bt,collapsePanel:Pn,direction:ft,expandPanel:Nn,getPanelStyle:Cn,groupId:Nt,registerPanel:$n,registerResizeHandle:xn,resizePanel:Wn,startDragging:(Qn,nr)=>{if(Ut(Qn),$8f51c2d77bf1da88$export$764db16956f554f8(nr)||$8f51c2d77bf1da88$export$c4dfce035d43d1e0(nr)){const Ln=$d6f7e4c3aa9e02d7$export$2e27d3a347680388(Qn);ln.current={dragHandleRect:Ln.getBoundingClientRect(),dragOffset:$8f51c2d77bf1da88$export$ec391ce65b083ed4(nr,Qn,ft),sizes:vn.current.sizes}}},stopDragging:()=>{$8d9d88bebf1a8ace$export$b61932ee18f96e08(),Ut(null),ln.current=null},unregisterPanel:Rn}),[Bt,Pn,ft,Nn,Cn,Nt,$n,xn,Wn,Rn]),Yn={display:"flex",flexDirection:ft==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return reactExports.createElement($af466b485b9d515d$export$7d8c6d083caec74a.Provider,{children:reactExports.createElement(kt,{children:$,className:lt,"data-panel-group":"","data-panel-group-direction":ft,"data-panel-group-id":Nt,style:{...Yn,...Rt}}),value:zn})}$3daa5d4c086ea816$export$1d05749f6f573bb.displayName="PanelGroup";function $971f2c37f9d2b98e$export$8829ecf6b6b15484({children:dt=null,className:$="",disabled:lt=!1,id:ft=null,style:St={},tagName:Tt="div"}){const Ct=reactExports.useRef(null),At=reactExports.useContext($af466b485b9d515d$export$7d8c6d083caec74a);if(At===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{activeHandleId:Rt,direction:kt,groupId:Nt,registerResizeHandle:Bt,startDragging:Ut,stopDragging:zt}=At,Zt=$e504a2438473eda9$export$2e2bcd8739ae039(ft),ln=Rt===Zt,[cn,hn]=reactExports.useState(!1),[pn,dn]=reactExports.useState(null),gn=reactExports.useCallback(()=>{Ct.current.blur(),zt()},[zt]);reactExports.useEffect(()=>{if(lt)dn(null);else{const Tn=Bt(Zt);dn(()=>Tn)}},[lt,Zt,Bt]),reactExports.useEffect(()=>{if(lt||pn==null||!ln)return;const Tn=Cn=>{pn(Cn)};return document.body.addEventListener("contextmenu",gn),document.body.addEventListener("mousemove",Tn),document.body.addEventListener("touchmove",Tn),window.addEventListener("mouseup",gn),window.addEventListener("touchend",gn),()=>{document.body.removeEventListener("contextmenu",gn),document.body.removeEventListener("mousemove",Tn),document.body.removeEventListener("touchmove",Tn),window.removeEventListener("mouseup",gn),window.removeEventListener("touchend",gn)}},[kt,lt,ln,pn,gn]),$4a90471e7083b52f$export$33b0bea6ac3ffb03({disabled:lt,handleId:Zt,resizeHandler:pn});const vn={cursor:$8d9d88bebf1a8ace$export$fa35f3322c52262f(kt),touchAction:"none",userSelect:"none"};return reactExports.createElement(Tt,{children:dt,className:$,"data-resize-handle-active":ln?"pointer":cn?"keyboard":void 0,"data-panel-group-direction":kt,"data-panel-group-id":Nt,"data-panel-resize-handle-enabled":!lt,"data-panel-resize-handle-id":Zt,onBlur:()=>hn(!1),onFocus:()=>hn(!0),onMouseDown:Tn=>Ut(Zt,Tn.nativeEvent),onMouseUp:gn,onTouchCancel:gn,onTouchEnd:gn,onTouchStart:Tn=>Ut(Zt,Tn.nativeEvent),ref:Ct,role:"separator",style:{...vn,...St},tabIndex:0})}$971f2c37f9d2b98e$export$8829ecf6b6b15484.displayName="PanelResizeHandle";var blockly$1={exports:{}},browser$1={exports:{}},coreBrowser={exports:{}},blockly={exports:{}},blockly_compressed={exports:{}},hasRequiredBlockly_compressed;function requireBlockly_compressed(){return hasRequiredBlockly_compressed||(hasRequiredBlockly_compressed=1,function(dt,$){(function(lt,ft){dt.exports=ft()})(commonjsGlobal,function(){var lt={},ft=function(vt,Et,Dt,Ft){vt=vt+" was deprecated in "+Et+" and will be deleted in "+Dt+".",Ft&&(vt+=`
Use `+Ft+" instead."),console.warn(vt)},St=function(vt,Et){Tt(),o_=setTimeout(function(){Et&&Et.handleRightClick(vt)},OS)},Tt=function(){o_&&(clearTimeout(o_),o_=0)},Ct=function(){i_=null},At=function(vt){return!vt.type.startsWith("pointer")||vt instanceof PointerEvent&&kt(vt)},Rt=function(vt){return`${vt.pointerId}`},kt=function(vt){const Et=Rt(vt);return i_?i_===Et:vt.type==="pointerdown"?(i_=Et,!0):!1},Nt=function(vt){if(ft("setClientFromTouch()","version 9","version 10"),vt.type.startsWith("touch")&&vt.changedTouches){const Et=vt.changedTouches[0];vt.clientX=Et.clientX,vt.clientY=Et.clientY}},Bt=function(vt){return ft("isMouseOrTouchEvent()","version 9","version 10"),vt.type.startsWith("touch")||vt.type.startsWith("mouse")||vt.type.startsWith("pointer")},Ut=function(vt){return ft("isTouchEvent()","version 9","version 10"),vt.type.startsWith("touch")||vt.type.startsWith("pointer")},zt=function(vt){ft("splitEventByTouches()","version 9","version 10");const Et=[];if(vt.changedTouches)for(let Dt=0;Dt<vt.changedTouches.length;Dt++)Et[Dt]={type:vt.type,changedTouches:[vt.changedTouches[Dt]],target:vt.target,stopPropagation(){vt.stopPropagation()},preventDefault(){vt.preventDefault()}};else Et.push(vt);return Et},Zt=function(vt,Et,Dt,Ft,Kt,yn){function Mn(qn){(Kt||At(qn))&&(Dt?Ft.call(Dt,qn):Ft(qn))}if(yn!==void 0&&ft("The opt_noPreventDefault argument of conditionalBind","version 9","version 10"),yn=[],Et in hp)for(let qn=0;qn<hp[Et].length;qn++){const Cr=hp[Et][qn];vt.addEventListener(Cr,Mn,!1),yn.push([vt,Cr,Mn])}else vt.addEventListener(Et,Mn,!1),yn.push([vt,Et,Mn]);return yn},ln=function(vt,Et,Dt,Ft){function Kt(Mn){Dt?Ft.call(Dt,Mn):Ft(Mn)}const yn=[];if(Et in hp)for(let Mn=0;Mn<hp[Et].length;Mn++){const qn=hp[Et][Mn];vt.addEventListener(qn,Kt,!1),yn.push([vt,qn,Kt])}else vt.addEventListener(Et,Kt,!1),yn.push([vt,Et,Kt]);return yn},cn=function(vt){const Et=vt[vt.length-1][2];for(;vt.length;){const Dt=vt.pop();Dt[0].removeEventListener(Dt[1],Dt[2],!1)}return Et},hn=function(vt){if(vt.target instanceof HTMLElement){if(vt.target.isContentEditable||vt.target.getAttribute("data-is-text-input")==="true")return!0;if(vt.target instanceof HTMLInputElement)return vt=vt.target,vt.type==="text"||vt.type==="number"||vt.type==="email"||vt.type==="password"||vt.type==="search"||vt.type==="tel"||vt.type==="url";if(vt.target instanceof HTMLTextAreaElement)return!0}return!1},pn=function(vt){return vt.ctrlKey&&Oo?!0:vt.button===2},dn=function(vt,Et,Dt){const Ft=Et.createSVGPoint();return Ft.x=vt.clientX,Ft.y=vt.clientY,Dt||(Dt=Et.getScreenCTM().inverse()),Ft.matrixTransform(Dt)},gn=function(vt){switch(vt.deltaMode){default:return{x:vt.deltaX,y:vt.deltaY};case 1:return{x:vt.deltaX*gr,y:vt.deltaY*gr};case 2:return{x:vt.deltaX*cr,y:vt.deltaY*cr}}},vn=function(vt){return fo[vt]||null},Tn=function(){const vt=[];for(const Et in fo)vt.push(fo[Et]);return vt},Cn=function(vt){fo[vt.id]=vt},$n=function(vt){delete fo[vt.id]},xn=function(){return Fo},Rn=function(vt){Fo=vt},Pn=function(){return Po},Nn=function(vt){Po=vt},Wn=function(){return Xo},zn=function(vt){Xo=vt},Yn=function(vt){for(;vt.options.parentWorkspace;)vt=vt.options.parentWorkspace;const Et=vt.getParentSvg(),Dt=vt.getCachedParentSvgSize();var Ft=Et.parentElement;if(Ft instanceof HTMLElement){var Kt=Ft.offsetWidth;Ft=Ft.offsetHeight,Dt.width!==Kt&&(Et.setAttribute("width",Kt+"px"),vt.setCachedParentSvgSize(Kt,null)),Dt.height!==Ft&&(Et.setAttribute("height",Ft+"px"),vt.setCachedParentSvgSize(null,Ft)),vt.resize()}},Qn=function(vt,Et){const Dt=Object.create(null),Ft=vt.getDescendants(!0);Et&&(vt=vt.getNextBlock())&&(vt=Ft.indexOf(vt),Ft.splice(vt,Ft.length-vt));for(let Kt=0,yn;yn=Ft[Kt];Kt++)Dt[yn.type]?Dt[yn.type]++:Dt[yn.type]=1;return Dt},nr=function(vt){return function(){this.jsonInit(vt)}},Ln=function(vt){zo.defineBlocksWithJsonArrayInternal(vt)},Un=function(vt){sr(Vn(vt))},Vn=function(vt){const Et={};for(let Dt=0;Dt<vt.length;Dt++){const Ft=vt[Dt];if(!Ft){console.warn(`Block definition #${Dt} in JSON array is ${Ft}. Skipping`);continue}const Kt=Ft.type;Kt?Et[Kt]={init:nr(Ft)}:console.warn(`Block definition #${Dt} in JSON array is missing a type attribute. Skipping.`)}return Et},sr=function(vt){for(const Et of Object.keys(vt)){const Dt=vt[Et];Et in jr&&console.warn(`Block definiton "${Et}" overwrites previous definition.`),jr[Et]=Dt}},In=function(vt,Et,Dt){vt=document.createElementNS(Vl,String(vt));for(const Ft in Et)vt.setAttribute(Ft,`${Et[Ft]}`);return Dt&&Dt.appendChild(vt),vt},ir=function(vt,Et){return Et=Et.split(" "),Et.every(Dt=>vt.classList.contains(Dt))?!1:(vt.classList.add(...Et),!0)},pr=function(vt,Et){vt.classList.remove(...Et.split(" "))},Jn=function(vt,Et){return Et=Et.split(" "),Et.every(Dt=>!vt.classList.contains(Dt))?!1:(vt.classList.remove(...Et),!0)},Pr=function(vt,Et){return vt.classList.contains(Et)},br=function(vt){return vt&&vt.parentNode?vt.parentNode.removeChild(vt):null},Gr=function(vt,Et){const Dt=Et.nextSibling;if(Et=Et.parentNode,!Et)throw Error("Reference node has no parent.");Dt?Et.insertBefore(vt,Dt):Et.appendChild(vt)},Kr=function(vt,Et){return!!(vt.compareDocumentPosition(Et)&dp.DOCUMENT_POSITION_CONTAINED_BY)},Xr=function(vt,Et){vt.style.transform=Et,vt.style["-webkit-transform"]=Et},Jr=function(){yS++,ju||(ju=Object.create(null))},Tr=function(){yS--,yS||(ju=null)},Ir=function(vt){const Et=vt.textContent+`
`+vt.className.baseVal;let Dt;if(ju&&(Dt=ju[Et]))return Dt;try{Dt=vt.getComputedTextLength()}catch{return 8*vt.textContent.length}return ju&&(ju[Et]=Dt),Dt},Qr=function(vt,Et,Dt,Ft){return oo(vt,Et+"pt",Dt,Ft)},oo=function(vt,Et,Dt,Ft){const Kt=vt.textContent;vt=Kt+`
`+vt.className.baseVal;var yn;return ju&&(yn=ju[vt])||(bv||(yn=document.createElement("canvas"),yn.className="blocklyComputeCanvas",document.body.appendChild(yn),bv=yn.getContext("2d")),bv.font=Dt+" "+Et+" "+Ft,yn=Kt?bv.measureText(Kt).width:0,ju&&(ju[vt]=yn)),yn},zr=function(vt,Et,Dt,Ft){const Kt=document.createElement("span");Kt.style.font=Dt+" "+Et+" "+Ft,Kt.textContent=vt,vt=document.createElement("div"),vt.style.width="1px",vt.style.height="0",Et=document.createElement("div"),Et.setAttribute("style","position: fixed; top: 0; left: 0; display: flex;"),Et.appendChild(Kt),Et.appendChild(vt),document.body.appendChild(Et),Dt={height:0,baseline:0};try{Et.style.alignItems="baseline",Dt.baseline=vt.offsetTop-Kt.offsetTop,Et.style.alignItems="flex-end",Dt.height=vt.offsetTop-Kt.offsetTop}finally{document.body.removeChild(Et)}return Dt},to=function(vt){return vt*Math.PI/180},co=function(vt){return 180*vt/Math.PI},uo=function(vt,Et,Dt){if(Dt<vt){const Ft=Dt;Dt=vt,vt=Ft}return Math.max(vt,Math.min(Et,Dt))},Mo=function(vt){return J$.getSizeInternal(vt)},Vo=function(vt){if(Gn(vt,"display")!=="none")return jn(vt);const Et=vt.style,Dt=Et.display,Ft=Et.visibility,Kt=Et.position;Et.visibility="hidden",Et.position="absolute",Et.display="inline";const yn=vt.offsetWidth;return vt=vt.offsetHeight,Et.display=Dt,Et.position=Kt,Et.visibility=Ft,new qs(yn,vt)},jn=function(vt){return new qs(vt.offsetWidth,vt.offsetHeight)},Gn=function(vt,Et){return vt=window.getComputedStyle(vt),vt[Et]||vt.getPropertyValue(Et)},rr=function(vt,Et){return ft("Blockly.utils.style.getCascadedStyle","version 9","version 10"),vt.currentStyle?vt.currentStyle[Et]:""},Or=function(vt){const Et=new Zr(0,0);vt=vt.getBoundingClientRect();var Dt=document.documentElement;return Dt=new Zr(window.pageXOffset||Dt.scrollLeft,window.pageYOffset||Dt.scrollTop),Et.x=vt.left+Dt.x,Et.y=vt.top+Dt.y,Et},Ar=function(){const vt=document.body,Et=document.documentElement;return new Zr(vt.scrollLeft||Et.scrollLeft,vt.scrollTop||Et.scrollTop)},Br=function(vt){const Et=parseFloat(Gn(vt,"borderLeftWidth")),Dt=parseFloat(Gn(vt,"borderRightWidth")),Ft=parseFloat(Gn(vt,"borderTopWidth"));return vt=parseFloat(Gn(vt,"borderBottomWidth")),new xs(Ft,vt,Et,Dt)},fr=function(vt,Et,Dt){vt=Yr(vt,Et,Dt),Et.scrollLeft=vt.x,Et.scrollTop=vt.y},Yr=function(vt,Et,Dt){var Ft=Or(vt),Kt=Or(Et),yn=Br(Et);const Mn=Ft.x-Kt.x-yn.left;return Ft=Ft.y-Kt.y-yn.top,Kt=jn(vt),vt=Et.clientWidth-Kt.width,Kt=Et.clientHeight-Kt.height,yn=Et.scrollLeft,Et=Et.scrollTop,Dt?(yn+=Mn-vt/2,Et+=Ft-Kt/2):(yn+=Math.min(Mn,Math.max(Mn-vt,0)),Et+=Math.min(Ft,Math.max(Ft-Kt,0))),new Zr(yn,Et)},wr=function(){Zo||(Zo=document.createElement("div"),Zo.className="blocklyDropDownDiv",(Wn()||document.body).appendChild(Zo),hO=document.createElement("div"),hO.className="blocklyDropDownContent",Zo.appendChild(hO),a_=document.createElement("div"),a_.className="blocklyDropDownArrow",Zo.appendChild(a_),Zo.style.opacity="0",Zo.style.transition="transform "+$v+"s, opacity "+$v+"s",Zo.addEventListener("focusin",function(){ir(Zo,"blocklyFocused")}),Zo.addEventListener("focusout",function(){Jn(Zo,"blocklyFocused")}))},ao=function(vt){$S=vt},Kn=function(){return _m},Sr=function(){return hO},Dr=function(){hO.textContent="",hO.style.width=""},En=function(vt,Et){Zo.style.backgroundColor=vt,Zo.style.borderColor=Et},Dn=function(vt,Et,Dt,Ft){return hr(ur(Et),vt,Dt,Ft)},Zn=function(vt,Et,Dt){return tT=!0,hr(Bn(vt),vt,Et,Dt)},ur=function(vt){var Et=vt.getSvgRoot();const Dt=vt.workspace.scale,Ft=vt.height*Dt;return vt=vt.width*Dt,Et=Or(Et),new xs(Et.y,Et.y+Ft,Et.x,Et.x+vt)},Bn=function(vt){return vt=vt.getScaledBBox(),new xs(vt.top,vt.bottom,vt.left,vt.right)},hr=function(vt,Et,Dt,Ft){const Kt=vt.left+(vt.right-vt.left)/2,yn=vt.bottom;vt=vt.top,Ft&&(vt+=Ft),Ft=Et.getSourceBlock();let Mn=Ft.workspace;for(;Mn.options.parentWorkspace;)Mn=Mn.options.parentWorkspace;return ao(Mn.getParentSvg().parentNode),Nr(Et,Ft.RTL,Kt,yn,Kt,vt,Dt)},Nr=function(vt,Et,Dt,Ft,Kt,yn,Mn){return _m=vt,s_=Mn||null,Zo.style.direction=Et?"rtl":"ltr",vt=xn(),cO=vt.getRenderer().getClassName(),uO=vt.getTheme().getClassName(),cO&&ir(Zo,cO),uO&&ir(Zo,uO),Il(Dt,Ft,Kt,yn)},ro=function(vt,Et,Dt,Ft){return vt=ls(vt,Dt.left,Dt.right,Ft.width),{initialX:vt.divX,initialY:Et,finalX:vt.divX,finalY:Et+bS,arrowX:vt.arrowX,arrowY:-(By/2+vS),arrowAtTop:!0,arrowVisible:!0}},ho=function(vt,Et,Dt,Ft){return vt=ls(vt,Dt.left,Dt.right,Ft.width),{initialX:vt.divX,initialY:Et-Ft.height,finalX:vt.divX,finalY:Et-Ft.height-bS,arrowX:vt.arrowX,arrowY:Ft.height-2*vS-By/2,arrowAtTop:!1,arrowVisible:!0}},ns=function(vt,Et,Dt){return vt=ls(vt,Et.left,Et.right,Dt.width),{initialX:vt.divX,initialY:0,finalX:vt.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},ls=function(vt,Et,Dt,Ft){return Et=uo(Et,vt-Ft/2,Dt-Ft),vt=vt-By/2-Et,Dt=eT,vt=uo(Dt,vt,Ft-Dt-By),{arrowX:vt,divX:Et}},Ds=function(){return!!_m},Gs=function(vt,Et){return _m===vt?(Et?cs():ss(),!0):!1},ss=function(){Zo.style.transform="translate(0, 0)",Zo.style.opacity="0",SS=setTimeout(function(){cs()},1e3*$v),s_&&(s_(),s_=null)},cs=function(){Ds()&&(SS&&clearTimeout(SS),Zo.style.transform="",Zo.style.left="",Zo.style.top="",Zo.style.opacity="0",Zo.style.display="none",Zo.style.backgroundColor="",Zo.style.borderColor="",s_&&(s_(),s_=null),Dr(),_m=null,cO&&(Jn(Zo,cO),cO=""),uO&&(Jn(Zo,uO),uO=""),xn().markFocused())},Il=function(vt,Et,Dt,Ft){vt=TS.getPositionMetrics(vt,Et,Dt,Ft),vt.arrowVisible?(a_.style.display="",a_.style.transform="translate("+vt.arrowX+"px,"+vt.arrowY+"px) rotate(45deg)",a_.setAttribute("class",vt.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):a_.style.display="none",Et=Math.floor(vt.initialX),Dt=Math.floor(vt.initialY),Ft=Math.floor(vt.finalX);const Kt=Math.floor(vt.finalY);return Zo.style.left=Et+"px",Zo.style.top=Dt+"px",Zo.style.display="block",Zo.style.opacity="1",Zo.style.transform="translate("+(Ft-Et)+"px,"+(Kt-Dt)+"px)",!!vt.arrowAtTop},PO=function(){if(_m){var vt=_m.getSourceBlock();vt=tT?Bn(_m):ur(vt);const Et=vt.left+(vt.right-vt.left)/2;Il(Et,vt.bottom,Et,vt.top)}else ss()},xo=function(vt,Et,Dt,Ft){if(!(vt instanceof Wr)&&typeof vt!="string"||String(vt).trim()==="")throw Error('Invalid type "'+vt+'". The type must be a non-empty string or a Blockly.registry.Type.');if(vt=String(vt).toLowerCase(),typeof Et!="string"||Et.trim()==="")throw Error('Invalid name "'+Et+'". The name must be a non-empty string.');const Kt=Et.toLowerCase();if(!Dt)throw Error("Can not register a null value");let yn=Om[vt],Mn=Tv[vt];if(yn||(yn=Om[vt]=Object.create(null),Mn=Tv[vt]=Object.create(null)),b_(vt,Dt),!Ft&&yn[Kt])throw Error('Name "'+Kt+'" with type "'+vt+'" already registered.');yn[Kt]=Dt,Mn[Kt]=Et},b_=function(vt,Et){switch(vt){case String(Wr.FIELD):if(typeof Et.fromJson!="function")throw Error('Type "'+vt+'" must have a fromJson function')}},Hn=function(vt,Et){vt=String(vt).toLowerCase(),Et=Et.toLowerCase();const Dt=Om[vt];Dt&&Dt[Et]?(delete Om[vt][Et],delete Tv[vt][Et]):console.warn("Unable to unregister ["+Et+"]["+vt+"] from the registry.")},_r=function(vt,Et,Dt){vt=String(vt).toLowerCase(),Et=Et.toLowerCase();const Ft=Om[vt];if(!Ft||!Ft[Et]){if(Et="Unable to find ["+Et+"]["+vt+"] in the registry.",Dt)throw Error(Et+" You must require or register a "+vt+" plugin.");return console.warn(Et),null}return Ft[Et]},xr=function(vt,Et){return vt=String(vt).toLowerCase(),Et=Et.toLowerCase(),(vt=Om[vt])?!!vt[Et]:!1},dr=function(vt,Et,Dt){return _r(vt,Et,Dt)},Rr=function(vt,Et,Dt){return _r(vt,Et,Dt)},So=function(vt,Et,Dt){vt=String(vt).toLowerCase();var Ft=Om[vt];if(!Ft){if(Ft=`Unable to find [${vt}] in the registry.`,Dt)throw Error(`${Ft} You must require or register a ${vt} plugin.`);return console.warn(Ft),null}if(!Et)return Ft;vt=Tv[vt],Dt=Object.create(null),Et=Object.keys(Ft);for(let Kt=0;Kt<Et.length;Kt++){const yn=Et[Kt];Dt[vt[yn]]=Ft[yn]}return Dt},bo=function(vt,Et,Dt){return Et=Et.plugins[vt.toString()]||Bp,typeof Et=="function"?Et:dr(vt,Et,Dt)},Lo=function(){return"blockly-"+(HE++).toString(36)},Eo=function(){return rT.genUid()},Ao=function(vt){Fy=vt},wo=function(){return Fy},Fr=function(vt){wS.fireInternal(vt)},_s=function(vt){os()&&(gO.length||setTimeout(Hs,0),gO.push(vt))},Hs=function(){const vt=El(gO,!0);gO.length=0;for(let Et=0,Dt;Dt=vt[Et];Et++){if(!Dt.workspaceId)continue;const Ft=vn(Dt.workspaceId);Ft&&Ft.fireChangeListener(Dt)}},El=function(vt,Et){vt=vt.slice(),Et||vt.reverse();const Dt=[],Ft=Object.create(null);for(let Mn=0,qn;qn=vt[Mn];Mn++)if(!qn.isNull()){var Kt=[qn.isUiEvent?Uy:qn.type,qn.blockId,qn.workspaceId].join(" "),yn=Ft[Kt];const Cr=yn?yn.event:null;yn?qn.type===Wl&&yn.index===Mn-1?(Kt=qn,Cr.newParentId=Kt.newParentId,Cr.newInputName=Kt.newInputName,Cr.newCoordinate=Kt.newCoordinate,yn.index=Mn):qn.type===Qs&&qn.element===Cr.element&&qn.name===Cr.name?Cr.newValue=qn.newValue:qn.type===c_?(yn=qn,Cr.viewTop=yn.viewTop,Cr.viewLeft=yn.viewLeft,Cr.scale=yn.scale,Cr.oldScale=yn.oldScale):(qn.type!==vm||Cr.type!==Fp)&&(Ft[Kt]={event:qn,index:Mn},Dt.push(qn)):(Ft[Kt]={event:qn,index:Mn},Dt.push(qn))}vt=Dt.filter(function(Mn){return!Mn.isNull()}),Et||vt.reverse();for(let Mn=1,qn;qn=vt[Mn];Mn++)qn.type===Qs&&qn.element==="mutation"&&vt.unshift(vt.splice(Mn,1)[0]);return vt},au=function(){for(let vt=0,Et;Et=gO[vt];vt++)Et.recordUndo=!1},Bo=function(){ES++},yo=function(){ES--},os=function(){return ES===0},Ro=function(){return iT},io=function(vt){wS.setGroupInternal(vt)},S_=function(vt){iT=typeof vt=="boolean"?vt?Eo():"":vt},Xl=function(vt){const Et=[];vt=vt.getDescendants(!1);for(let Dt=0,Ft;Ft=vt[Dt];Dt++)Et[Dt]=Ft.id;return Et},lu=function(vt,Et){var Dt=Vr(vt.type);if(!Dt)throw Error("Unknown event type.");return us(Dt)?Dt.fromJson(vt,Et):(Dt=new Dt,Dt.fromJson(vt),Dt.workspaceId=Et.id,Dt)},us=function(vt){return Object.getOwnPropertyDescriptors(vt).fromJson&&typeof vt.fromJson=="function"},Vr=function(vt){const Et=dr(Wr.EVENT,vt);if(!Et)throw Error(`Event type ${vt} not found in registry.`);return Et},Yo=function(vt){if((vt.type===Wl||vt.type===$l)&&vt.workspaceId){var Et=vn(vt.workspaceId);if(!vt.blockId)throw Error("Encountered a blockEvent without a proper blockId");if(vt=Et.getBlockById(vt.blockId)){const Dt=Fy;try{Fy=!1;const Ft=vt.getParent();if(Ft&&Ft.isEnabled()){const Kt=vt.getDescendants(!1);for(let yn=0,Mn;Mn=Kt[yn];yn++)Mn.setEnabled(!0)}else if((vt.outputConnection||vt.previousConnection)&&!Et.isDragging())do vt.setEnabled(!1),vt=vt.getNextBlock();while(vt)}finally{Fy=Dt}}}},Os=function(vt){({document:h_=h_,DOMParser:Mv=Mv,XMLSerializer:Pv=Pv}=vt)},ws=function(){return ft("Blockly.utils.xml.getDocument","version 9","version 10"),h_},zs=function(vt){ft("Blockly.utils.xml.setDocument","version 9","version 10"),h_=vt},No=function(vt){return h_.createElementNS(CS,vt)},Ml=function(vt){return h_.createTextNode(vt)},Js=function(vt){return new Mv().parseFromString(vt,"text/xml")},xm=function(vt){return new Pv().serializeToString(vt)},wm=function(vt,Et){oT(vt,Et)},w0=function(vt){oT=vt},jp=function(vt,Et){lT.confirmInternal(vt,Et)},C0=function(vt,Et){sT(vt,Et)},cu=function(vt){sT=vt},LO=function(vt,Et,Dt){aT(vt,Et,Dt)},tS=function(vt){aT=vt},DO=function(vt){vt=vt.getAllBlocks(!1);const Et=new Set;for(let Dt=0;Dt<vt.length;Dt++){const Ft=vt[Dt].getVarModels();if(Ft)for(let Kt=0;Kt<Ft.length;Kt++){const yn=Ft[Kt];yn.getId()&&Et.add(yn)}}return Array.from(Et.values())},$_=function(vt){vt=vt.getAllBlocks(!1);const Et=new Set;for(let Ft=0,Kt;Kt=vt[Ft];Ft++){var Dt=Kt.getDeveloperVariables;if(Dt){Dt=Dt();for(let yn=0;yn<Dt.length;yn++)Et.add(Dt[yn])}}return Array.from(Et.values())},Xp=function(vt){let Et=[];const Dt=document.createElement("button");return Dt.setAttribute("text","%{BKY_NEW_VARIABLE}"),Dt.setAttribute("callbackKey","CREATE_VARIABLE"),vt.registerButtonCallback("CREATE_VARIABLE",function(Ft){bp(Ft.getTargetWorkspace())}),Et.push(Dt),vt=Yp(vt),Et=Et.concat(vt)},Yp=function(vt){vt=vt.getVariablesOfType("");const Et=[];if(0<vt.length){var Dt=vt[vt.length-1];if(jr.variables_set){var Ft=No("block");Ft.setAttribute("type","variables_set"),Ft.setAttribute("gap",jr.math_change?"8":"24"),Ft.appendChild(Wo(Dt)),Et.push(Ft)}if(jr.math_change&&(Ft=No("block"),Ft.setAttribute("type","math_change"),Ft.setAttribute("gap",jr.variables_get?"20":"8"),Ft.appendChild(Wo(Dt)),Dt=na('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),Ft.appendChild(Dt),Et.push(Ft)),jr.variables_get){vt.sort(Yy.compareByName);for(let Kt=0,yn;yn=vt[Kt];Kt++)Dt=No("block"),Dt.setAttribute("type","variables_get"),Dt.setAttribute("gap","8"),Dt.appendChild(Wo(yn)),Et.push(Dt)}}return Et},Cm=function(vt){return IS.generateUniqueNameInternal(vt)},nS=function(vt){return NO(Dv.charAt(0),vt.getAllVariableNames())},NO=function(vt,Et){if(!Et.length)return vt;const Dt=Dv;let Ft="",Kt=Dt.indexOf(vt);for(;;){let yn=!1;for(let Mn=0;Mn<Et.length;Mn++)if(Et[Mn].toLowerCase()===vt){yn=!0;break}if(!yn)break;Kt++,Kt===Dt.length&&(Kt=0,Ft=`${Number(Ft)+1}`),vt=Dt.charAt(Kt)+Ft}return vt},bp=function(vt,Et,Dt){function Ft(yn){Sp($o.NEW_VARIABLE_TITLE,yn,function(Mn){if(Mn){const qn=E_(Mn,vt);if(qn){let Cr;qn.type===Kt?Cr=$o.VARIABLE_ALREADY_EXISTS.replace("%1",qn.name):(Cr=$o.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,Cr=Cr.replace("%1",qn.name).replace("%2",qn.type)),wm(Cr,function(){Ft(Mn)})}else vt.createVariable(Mn,Kt),Et&&Et(Mn)}else Et&&Et(null)})}const Kt=Dt||"";Ft("")},T_=function(vt,Et,Dt){function Ft(Kt){const yn=$o.RENAME_VARIABLE_TITLE.replace("%1",Et.name);Sp(yn,Kt,function(Mn){if(Mn){var qn=rS(Mn,Et.type,vt);qn?(qn=$o.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",qn.name).replace("%2",qn.type),wm(qn,function(){Ft(Mn)})):(vt.renameVariableById(Et.getId(),Mn),Dt&&Dt(Mn))}else Dt&&Dt(null)})}Ft("")},Sp=function(vt,Et,Dt){LO(vt,Et,function(Ft){Ft&&(Ft=Ft.replace(/[\s\xa0]+/g," ").trim(),Ft===$o.RENAME_VARIABLE||Ft===$o.NEW_VARIABLE)&&(Ft=null),Dt(Ft)})},rS=function(vt,Et,Dt){Dt=Dt.getVariableMap().getAllVariables(),vt=vt.toLowerCase();for(let Ft=0,Kt;Kt=Dt[Ft];Ft++)if(Kt.name.toLowerCase()===vt&&Kt.type!==Et)return Kt;return null},E_=function(vt,Et){Et=Et.getVariableMap().getAllVariables(),vt=vt.toLowerCase();for(let Dt=0,Ft;Ft=Et[Dt];Dt++)if(Ft.name.toLowerCase()===vt)return Ft;return null},Wo=function(vt){const Et=No("field");return Et.setAttribute("name","VAR"),Et.setAttribute("id",vt.getId()),Et.setAttribute("variabletype",vt.type),vt=Ml(vt.name),Et.appendChild(vt),Et},Am=function(vt,Et,Dt,Ft){let Kt=Zp(vt,Et,Dt,Ft);return Kt||(Kt=A0(vt,Et,Dt,Ft)),Kt},Zp=function(vt,Et,Dt,Ft){const Kt=vt.getPotentialVariableMap();let yn=null;if(Et&&(yn=vt.getVariableById(Et),!yn&&Kt&&(yn=Kt.getVariableById(Et)),yn))return yn;if(Dt){if(Ft===void 0)throw Error("Tried to look up a variable by name without a type");yn=vt.getVariable(Dt,Ft),!yn&&Kt&&(yn=Kt.getVariable(Dt,Ft))}return yn},A0=function(vt,Et,Dt,Ft){const Kt=vt.getPotentialVariableMap();return Dt||(Dt=Cm(vt.isFlyout?vt.targetWorkspace:vt)),Kt?Kt.createVariable(Dt,Ft,Et):vt.createVariable(Dt,Ft,Et)},BO=function(vt,Et){vt=vt.getAllVariables();const Dt=[];if(Et.length!==vt.length)for(let Ft=0;Ft<vt.length;Ft++){const Kt=vt[Ft];Et.indexOf(Kt)===-1&&Dt.push(Kt)}return Dt},uu=function(vt){if(MS)throw Error("CSS already injected");PS+=`
`+vt},ks=function(vt,Et){MS||(MS=!0,vt&&(vt=Et.replace(/[\\/]$/,""),Et=PS.replace(/<<<PATH>>>/g,vt),PS="",vt=document.createElement("style"),vt.id="blockly-common-style",Et=document.createTextNode(Et),vt.appendChild(Et),document.head.insertBefore(vt,document.head.firstChild)))},Pl=function(vt){const Et=new Zr(0,0);var Dt=vt.x&&vt.getAttribute("x");const Ft=vt.y&&vt.getAttribute("y");return Dt&&(Et.x=parseInt(Dt)),Ft&&(Et.y=parseInt(Ft)),(Dt=(Dt=vt.getAttribute("transform"))&&Dt.match(cT))&&(Et.x+=Number(Dt[1]),Dt[3]&&(Et.y+=Number(Dt[3]))),(vt=vt.getAttribute("style"))&&-1<vt.indexOf("translate")&&(vt=vt.match(uT))&&(Et.x+=Number(vt[1]),vt[3]&&(Et.y+=Number(vt[3]))),Et},x_=function(vt){let Et=0,Dt=0;for(;vt;){const Ft=Pl(vt);if(Et+=Ft.x,Dt+=Ft.y,(" "+(vt.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!==-1)break;vt=vt.parentNode}return new Zr(Et,Dt)},w_=function(){return ft("Blockly.utils.svgMath.is3dSupported","version 9","version 10"),!0},FO=function(){const vt=Ar();return new xs(vt.y,document.documentElement.clientHeight+vt.y,vt.x,document.documentElement.clientWidth+vt.x)},qp=function(){const vt=document.documentElement,Et=window;return new Zr(Et.pageXOffset||vt.scrollLeft,Et.pageYOffset||vt.scrollTop)},hu=function(vt,Et){var Dt=Et.x;Et=Et.y;const Ft=vt.getInjectionDiv().getBoundingClientRect();return Dt=new Zr(Dt-Ft.left,Et-Ft.top),Et=vt.getOriginOffsetInPixels(),Zr.difference(Dt,Et).scale(1/vt.scale)},iS=function(vt,Et){const Dt=No("xml");var Ft=R0(DO(vt));Ft.hasChildNodes()&&Dt.appendChild(Ft),Ft=vt.getTopComments(!0);for(let Kt=0;Kt<Ft.length;Kt++)Dt.appendChild(Ft[Kt].toXmlWithXY(Et));for(vt=vt.getTopBlocks(!0),Ft=0;Ft<vt.length;Ft++)Dt.appendChild(Ll(vt[Ft],Et));return Dt},R0=function(vt){const Et=No("variables");for(let Dt=0;Dt<vt.length;Dt++){const Ft=vt[Dt],Kt=No("variable");Kt.appendChild(Ml(Ft.name)),Ft.type&&Kt.setAttribute("type",Ft.type),Kt.id=Ft.getId(),Et.appendChild(Kt)}return Et},Ll=function(vt,Et){if(vt.isInsertionMarker()&&(vt=vt.getChildren(!1)[0],!vt))return new DocumentFragment;let Dt=0;vt.workspace.RTL&&(Dt=vt.workspace.getWidth()),Et=Bu(vt,Et);const Ft=vt.getRelativeToSurfaceXY();return Et.setAttribute("x",Math.round(vt.workspace.RTL?Dt-Ft.x:Ft.x)),Et.setAttribute("y",Math.round(Ft.y)),Et},Nu=function(vt){if(vt.isSerializable()){const Et=No("field");return Et.setAttribute("name",vt.name||""),vt.toXml(Et)}return null},C_=function(vt,Et){for(let Dt=0;Dt<vt.inputList.length;Dt++){const Ft=vt.inputList[Dt];for(let Kt=0;Kt<Ft.fieldRow.length;Kt++){const yn=Nu(Ft.fieldRow[Kt]);yn&&Et.appendChild(yn)}}},Bu=function(vt,Et){if(vt.isInsertionMarker())return(Et=vt.getChildren(!1)[0])?Bu(Et):new DocumentFragment;const Dt=No(vt.isShadow()?"shadow":"block");if(Dt.setAttribute("type",vt.type),Et||Dt.setAttribute("id",vt.id),vt.mutationToDom){var Ft=vt.mutationToDom();Ft&&(Ft.hasChildNodes()||Ft.hasAttributes())&&Dt.appendChild(Ft)}if(C_(vt,Dt),Ft=vt.getCommentText()){var Kt=vt.commentModel.size,yn=vt.commentModel.pinned,Mn=No("comment");Mn.appendChild(Ml(Ft)),Mn.setAttribute("pinned",yn),Mn.setAttribute("h",Kt.height),Mn.setAttribute("w",Kt.width),Dt.appendChild(Mn)}for(vt.data&&(Ft=No("data"),Ft.appendChild(Ml(vt.data)),Dt.appendChild(Ft)),Ft=0;Ft<vt.inputList.length;Ft++){Kt=vt.inputList[Ft];var qn=void 0;if(yn=!0,Kt.type!==Do.DUMMY){Mn=Kt.connection.targetBlock(),Kt.type===Do.VALUE?qn=No("value"):Kt.type===Do.STATEMENT&&(qn=No("statement"));const qr=Kt.connection.getShadowDom();!qr||Mn&&Mn.isShadow()||qn.appendChild(GO(qr,Et)),Mn&&(Mn=Bu(Mn,Et),Mn.nodeType===dp.ELEMENT_NODE&&(qn.appendChild(Mn),yn=!1)),qn.setAttribute("name",Kt.name),yn||Dt.appendChild(qn)}}vt.inputsInline!==void 0&&vt.inputsInline!==vt.inputsInlineDefault&&Dt.setAttribute("inline",vt.inputsInline.toString()),vt.isCollapsed()&&Dt.setAttribute("collapsed","true"),vt.isEnabled()||Dt.setAttribute("disabled","true"),vt.isDeletable()||vt.isShadow()||Dt.setAttribute("deletable","false"),vt.isMovable()||vt.isShadow()||Dt.setAttribute("movable","false"),vt.isEditable()||Dt.setAttribute("editable","false"),qn=vt.getNextBlock();let Cr;return qn&&(Ft=Bu(qn,Et),Ft.nodeType===dp.ELEMENT_NODE&&(Cr=No("next"),Cr.appendChild(Ft),Dt.appendChild(Cr))),vt=vt.nextConnection&&vt.nextConnection.getShadowDom(),!vt||qn&&qn.isShadow()||Cr.appendChild(GO(vt,Et)),Dt},GO=function(vt,Et){let Dt=vt=vt.cloneNode(!0),Ft;for(;Dt;)if(Et&&Dt.nodeName==="shadow"&&Dt.removeAttribute("id"),Dt.firstChild)Dt=Dt.firstChild;else{for(;Dt&&!Dt.nextSibling;){Ft=Dt,Dt=Dt.parentNode;let Kt;Ft.nodeType===dp.TEXT_NODE&&Ft.data.trim()===""&&((Kt=Dt)==null?void 0:Kt.firstChild)!==Ft&&br(Ft)}Dt&&(Ft=Dt,Dt=Dt.nextSibling,Ft.nodeType===dp.TEXT_NODE&&Ft.data.trim()===""&&br(Ft))}return vt},Yl=function(vt){return xm(vt).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},Eu=function(vt){vt=Yl(vt).split("<");let Et="";for(let Dt=1;Dt<vt.length;Dt++){const Ft=vt[Dt];Ft[0]==="/"&&(Et=Et.substring(2)),vt[Dt]=Et+"<"+Ft,Ft[0]!=="/"&&Ft.slice(-2)!=="/>"&&(Et+="  ")}return vt=vt.join(`
`),vt=vt.replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>"),vt.replace(/^\n/,"")},na=function(vt){const Et=Js(vt);if(!Et||!Et.documentElement||Et.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+vt);return Et.documentElement},A_=function(vt,Et){return Et.setResizesEnabled(!1),Et.clear(),vt=Rm(vt,Et),Et.setResizesEnabled(!0),vt},Rm=function(vt,Et){let Dt=0;Et.RTL&&(Dt=Et.getWidth());const Ft=[];Jr();const Kt=Ro();Kt||io(!0),Et.setResizesEnabled&&Et.setResizesEnabled(!1);let yn=!0;try{for(let Mn=0,qn;qn=vt.childNodes[Mn];Mn++){const Cr=qn.nodeName.toLowerCase(),qr=qn;if(Cr==="block"||Cr==="shadow"&&!wo()){const jo=Fu(qr,Et);Ft.push(jo.id);const gs=qr.hasAttribute("x")?parseInt(qr.getAttribute("x")):10,Tu=qr.hasAttribute("y")?parseInt(qr.getAttribute("y")):10;isNaN(gs)||isNaN(Tu)||jo.moveBy(Et.RTL?Dt-gs:gs,Tu),yn=!1}else{if(Cr==="shadow")throw TypeError("Shadow block cannot be a top-level block.");if(Cr==="comment")Et.rendered?Al.fromXmlRendered(qr,Et,Dt):mp.fromXml(qr,Et);else if(Cr==="variables"){if(yn)Im(qr,Et);else throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");yn=!1}}}}finally{Kt||io(!1),Tr()}return Et.setResizesEnabled&&Et.setResizesEnabled(!0),Fr(new(Vr(mO))(Et)),Ft},du=function(vt,Et){if(!Et.getBlocksBoundingBox)return Rm(vt,Et);var Dt=Et.getBlocksBoundingBox();if(vt=Rm(vt,Et),Dt&&Dt.top!==Dt.bottom){var Ft=Dt.bottom;Dt=Et.RTL?Dt.right:Dt.left;var Kt=1/0;let yn=-1/0,Mn=1/0;for(let qn=0;qn<vt.length;qn++){const Cr=Et.getBlockById(vt[qn]).getRelativeToSurfaceXY();Cr.y<Mn&&(Mn=Cr.y),Cr.x<Kt&&(Kt=Cr.x),Cr.x>yn&&(yn=Cr.x)}for(Ft=Ft-Mn+10,Dt=Et.RTL?Dt-yn:Dt-Kt,Kt=0;Kt<vt.length;Kt++)Et.getBlockById(vt[Kt]).moveBy(Dt,Ft)}return vt},Fu=function(vt,Et){Bo();var Dt=Et.getAllVariables();let Ft;try{if(Ft=Kl(vt,Et),Et.rendered){const Kt=Ft,yn=Ft.getDescendants(!1);Kt.setConnectionTracking(!1);for(let Mn=yn.length-1;0<=Mn;Mn--)yn[Mn].initSvg();for(let Mn=yn.length-1;0<=Mn;Mn--)yn[Mn].render(!1);setTimeout(function(){Kt.disposed||Kt.setConnectionTracking(!0)},1),Kt.updateDisabled(),Et.resizeContents()}else{const Kt=Ft.getDescendants(!1);for(let yn=Kt.length-1;0<=yn;yn--)Kt[yn].initModel()}}finally{yo()}if(os()){for(vt=BO(Et,Dt),Et=0;Et<vt.length;Et++)Dt=vt[Et],Fr(new(Vr(l_))(Dt));Fr(new(Vr($l))(Ft))}return Ft},Im=function(vt,Et){for(let Dt=0;Dt<vt.children.length;Dt++){const Ft=vt.children[Dt],Kt=Ft.getAttribute("type"),yn=Ft.getAttribute("id");Et.createVariable(Ft.textContent,Kt,yn)}},Kp=function(vt){const Et={mutation:[],comment:[],data:[],field:[],input:[],next:[]};for(let Dt=0;Dt<vt.children.length;Dt++){const Ft=vt.children[Dt];if(Ft.nodeType!==dp.TEXT_NODE)switch(Ft.nodeName.toLowerCase()){case"mutation":Et.mutation.push(Ft);break;case"comment":Et.comment.push(Ft);break;case"data":Et.data.push(Ft);break;case"title":case"field":Et.field.push(Ft);break;case"value":case"statement":Et.input.push(Ft);break;case"next":Et.next.push(Ft);break;default:console.warn("Ignoring unknown tag: "+Ft.nodeName)}}return Et},UO=function(vt,Et){let Dt=!1;for(let Ft=0;Ft<vt.length;Ft++){const Kt=vt[Ft];Et.domToMutation&&(Et.domToMutation(Kt),Et.initSvg&&(Dt=!0))}return Dt},VO=function(vt,Et){for(let Ft=0;Ft<vt.length;Ft++){var Dt=vt[Ft];const Kt=Dt.textContent,yn=Dt.getAttribute("pinned")==="true",Mn=parseInt(Dt.getAttribute("w"));if(Dt=parseInt(Dt.getAttribute("h")),Et.setCommentText(Kt),Et.commentModel.pinned=yn,isNaN(Mn)||isNaN(Dt)||(Et.commentModel.size=new qs(Mn,Dt)),yn&&Et.getCommentIcon&&!Et.isInFlyout){const qn=Et;setTimeout(function(){qn.getCommentIcon().setVisible(!0)},1)}}},I0=function(vt,Et){for(let Dt=0;Dt<vt.length;Dt++)Et.data=vt[Dt].textContent},WO=function(vt,Et){for(let Dt=0;Dt<vt.length;Dt++){const Ft=vt[Dt],Kt=Ft.getAttribute("name");ep(Et,Kt,Ft)}},R_=function(vt){const Et={childBlockElement:null,childShadowElement:null};for(let Dt=0;Dt<vt.childNodes.length;Dt++){const Ft=vt.childNodes[Dt];Ft.nodeType===dp.ELEMENT_NODE&&(Ft.nodeName.toLowerCase()==="block"?Et.childBlockElement=Ft:Ft.nodeName.toLowerCase()==="shadow"&&(Et.childShadowElement=Ft))}return Et},Jp=function(vt,Et,Dt,Ft){for(let yn=0;yn<vt.length;yn++){var Kt=vt[yn];const Mn=Kt.getAttribute("name"),qn=Dt.getInput(Mn);if(!qn){console.warn("Ignoring non-existent input "+Mn+" in block "+Ft);break}if(Kt=R_(Kt),Kt.childBlockElement){if(!qn.connection)throw TypeError("Input connection does not exist.");Kl(Kt.childBlockElement,Et,qn.connection,!1)}if(Kt.childShadowElement){let Cr;(Cr=qn.connection)==null||Cr.setShadowDom(Kt.childShadowElement)}}},Zl=function(vt,Et,Dt){for(let Ft=0;Ft<vt.length;Ft++){const Kt=R_(vt[Ft]);if(Kt.childBlockElement){if(!Dt.nextConnection)throw TypeError("Next statement does not exist.");if(Dt.nextConnection.isConnected())throw TypeError("Next statement is already connected.");Kl(Kt.childBlockElement,Et,Dt.nextConnection,!0)}Kt.childShadowElement&&Dt.nextConnection&&Dt.nextConnection.setShadowDom(Kt.childShadowElement)}},Kl=function(vt,Et,Dt,Ft){const Kt=vt.getAttribute("type");if(!Kt)throw TypeError("Block type unspecified: "+vt.outerHTML);var yn=vt.getAttribute("id");yn=Et.newBlock(Kt,yn);const Mn=Kp(vt),qn=UO(Mn.mutation,yn);if(VO(Mn.comment,yn),I0(Mn.data,yn),Dt)if(Ft)if(yn.previousConnection)Dt.connect(yn.previousConnection);else throw TypeError("Next block does not have previous statement.");else if(yn.outputConnection)Dt.connect(yn.outputConnection);else if(yn.previousConnection)Dt.connect(yn.previousConnection);else throw TypeError("Child block does not have output or previous statement.");if(WO(Mn.field,yn),Jp(Mn.input,Et,yn,Kt),Zl(Mn.next,Et,yn),qn&&yn.initSvg(),(Et=vt.getAttribute("inline"))&&yn.setInputsInline(Et==="true"),(Et=vt.getAttribute("disabled"))&&yn.setEnabled(Et!=="true"&&Et!=="disabled"),(Et=vt.getAttribute("deletable"))&&yn.setDeletable(Et==="true"),(Et=vt.getAttribute("movable"))&&yn.setMovable(Et==="true"),(Et=vt.getAttribute("editable"))&&yn.setEditable(Et==="true"),(Et=vt.getAttribute("collapsed"))&&yn.setCollapsed(Et==="true"),vt.nodeName.toLowerCase()==="shadow"){for(vt=yn.getChildren(!1),Et=0;Et<vt.length;Et++)if(!vt[Et].isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(yn.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");yn.setShadow(!0)}return yn},ep=function(vt,Et,Dt){const Ft=vt.getField(Et);Ft?Ft.fromXml(Dt):console.warn("Ignoring non-existent field "+Et+" in block "+vt.type)},QO=function(vt){for(let Et=0;Et<vt.childNodes.length;Et++){const Dt=vt.childNodes[Et];if(Dt.nodeName.toLowerCase()==="next"){vt.removeChild(Dt);break}}},k0=function(vt,Et){return ft("Blockly.utils.string.startsWith()","April 2022","April 2023","Use built-in string.startsWith"),vt.startsWith(Et)},Jl=function(vt){return vt.length?vt.reduce(function(Et,Dt){return Et.length<Dt.length?Et:Dt}).length:0},Gu=function(vt,Et){if(!vt.length)return 0;if(vt.length===1)return vt[0].length;let Dt=0;Et=Et||Jl(vt);let Ft;for(Ft=0;Ft<Et;Ft++){for(var Kt=vt[0][Ft],yn=1;yn<vt.length;yn++)if(Kt!==vt[yn][Ft])return Dt;Kt===" "&&(Dt=Ft+1)}for(Kt=1;Kt<vt.length;Kt++)if((yn=vt[Kt][Ft])&&yn!==" ")return Dt;return Et},km=function(vt,Et){if(!vt.length)return 0;if(vt.length===1)return vt[0].length;let Dt=0;Et=Et||Jl(vt);let Ft;for(Ft=0;Ft<Et;Ft++){for(var Kt=vt[0].substr(-Ft-1,1),yn=1;yn<vt.length;yn++)if(Kt!==vt[yn].substr(-Ft-1,1))return Dt;Kt===" "&&(Dt=Ft+1)}for(Kt=1;Kt<vt.length;Kt++)if((yn=vt[Kt].charAt(vt[Kt].length-Ft-1))&&yn!==" ")return Dt;return Et},HO=function(vt,Et){vt=vt.split(`
`);for(let Dt=0;Dt<vt.length;Dt++)vt[Dt]=I_(vt[Dt],Et);return vt.join(`
`)},I_=function(vt,Et){if(vt.length<=Et)return vt;const Dt=vt.trim().split(/\s+/);for(var Ft=0;Ft<Dt.length;Ft++)Dt[Ft].length>Et&&(Et=Dt[Ft].length);var Kt=-1/0;let yn,Mn=1;do{Ft=Kt,yn=vt,vt=[],Kt=Dt.length/Mn;let qn=1;for(let Cr=0;Cr<Dt.length-1;Cr++)qn<(Cr+1.5)/Kt?(qn++,vt[Cr]=!0):vt[Cr]=!1;vt=zO(Dt,vt,Et),Kt=k_(Dt,vt,Et),vt=jO(Dt,vt),Mn++}while(Kt>Ft);return yn},k_=function(vt,Et,Dt){const Ft=[0],Kt=[];for(var yn=0;yn<vt.length;yn++)Ft[Ft.length-1]+=vt[yn].length,Et[yn]===!0?(Ft.push(0),Kt.push(vt[yn].charAt(vt[yn].length-1))):Et[yn]===!1&&Ft[Ft.length-1]++;for(vt=Math.max(...Ft),Et=0,yn=0;yn<Ft.length;yn++)Et-=2*Math.pow(Math.abs(Dt-Ft[yn]),1.5),Et-=Math.pow(vt-Ft[yn],1.5),".?!".indexOf(Kt[yn])!==-1?Et+=Dt/3:",;)]}".indexOf(Kt[yn])!==-1&&(Et+=Dt/4);return 1<Ft.length&&Ft[Ft.length-1]<=Ft[Ft.length-2]&&(Et+=.5),Et},zO=function(vt,Et,Dt){let Ft=k_(vt,Et,Dt),Kt;for(let yn=0;yn<Et.length-1;yn++){if(Et[yn]===Et[yn+1])continue;const Mn=[].concat(Et);Mn[yn]=!Mn[yn],Mn[yn+1]=!Mn[yn+1];const qn=k_(vt,Mn,Dt);qn>Ft&&(Ft=qn,Kt=Mn)}return Kt?zO(vt,Kt,Dt):Et},jO=function(vt,Et){const Dt=[];for(let Ft=0;Ft<vt.length;Ft++)Dt.push(vt[Ft]),Et[Ft]!==void 0&&Dt.push(Et[Ft]?`
`:" ");return Dt.join("")},Mm=function(vt){return/^\s*-?\d+(\.\d+)?\s*$/.test(vt)},M0=function(vt){Bv=vt},P0=function(){return Bv},L0=function(){return qy},XO=function(){return Ps},xu=function(vt){if(vt=$p(vt)){for(vt=vt.tooltip;typeof vt=="function";)vt=vt();if(typeof vt!="string")throw Error("Tooltip function must return a string.");return vt}return""},$p=function(vt){for(;vt&&vt.tooltip;){if(typeof vt.tooltip=="string"||typeof vt.tooltip=="function")return vt;vt=vt.tooltip}return null},Pm=function(){Ps||(Ps=document.createElement("div"),Ps.className="blocklyTooltipDiv",(Wn()||document.body).appendChild(Ps))},Tp=function(vt){vt.mouseOverWrapper_=ln(vt,"pointerover",null,_c),vt.mouseOutWrapper_=ln(vt,"pointerout",null,Ep),vt.addEventListener("pointermove",wu,!1)},ga=function(vt){vt&&(cn(vt.mouseOverWrapper_),cn(vt.mouseOutWrapper_),vt.removeEventListener("pointermove",wu))},_c=function(vt){OO||(vt=$p(vt.currentTarget),Pu!==vt&&(Dl(),Jy=null,Pu=vt),clearTimeout(dT))},Ep=function(vt){OO||(dT=setTimeout(function(){Jy=Pu=null,Dl()},1),clearTimeout(Ky))},wu=function(vt){if(Pu&&Pu.tooltip&&!OO)if(qy){const Et=DS-vt.pageX;vt=NS-vt.pageY,Math.sqrt(Et*Et+vt*vt)>fT&&Dl()}else Jy!==Pu&&(clearTimeout(Ky),DS=vt.pageX,NS=vt.pageY,Ky=setTimeout(hs,pT))},Cu=function(){Jy=Pu=null,Dl()},Dl=function(){qy&&(qy=!1,Ps&&(Ps.style.display="none")),Ky&&clearTimeout(Ky)},YO=function(){Dl(),OO=!0},M_=function(){OO=!1},ZO=function(){Ps&&Pu&&(typeof Bv=="function"?Bv(Ps,Pu):Nl())},Nl=function(){var vt=xu(Pu);vt=HO(vt,hT),vt=vt.split(`
`);for(let Et=0;Et<vt.length;Et++){const Dt=document.createElement("div");Dt.appendChild(document.createTextNode(vt[Et])),Ps.appendChild(Dt)}},Bl=function(vt){const Et=document.documentElement.clientWidth,Dt=document.documentElement.clientHeight;let Ft=DS;Ft=vt?Ft-(BS+Ps.offsetWidth):Ft+BS;let Kt=NS+FS;return Kt+Ps.offsetHeight>Dt+window.scrollY&&(Kt-=Ps.offsetHeight+2*FS),vt?Ft=Math.max(Fv-window.scrollX,Ft):Ft+Ps.offsetWidth>Et+window.scrollX-2*Fv&&(Ft=Et-Ps.offsetWidth-2*Fv),{x:Ft,y:Kt}},hs=function(){if(!OO&&(Jy=Pu,Ps)){Ps.textContent="",ZO();var vt=Pu.RTL;Ps.style.direction=vt?"rtl":"ltr",Ps.style.display="block",qy=!0;var{x:Et,y:Dt}=Bl(vt);Ps.style.left=Et+"px",Ps.style.top=Dt+"px"}},em=function(){return GS},fu=function(vt){GS=vt},qO=function(){return US},D0=function(vt){US=vt},Uu=function(vt){vt=String(vt).toLowerCase().trim();var Et=mT[vt];if(Et||(Et=vt.substring(0,2)==="0x"?"#"+vt.substring(2):vt,Et=Et[0]==="#"?Et:"#"+Et,/^#[0-9a-f]{6}$/.test(Et)))return Et;if(/^#[0-9a-f]{3}$/.test(Et))return["#",Et[1],Et[1],Et[2],Et[2],Et[3],Et[3]].join("");var Dt=vt.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return Dt&&(vt=Number(Dt[1]),Et=Number(Dt[2]),Dt=Number(Dt[3]),0<=vt&&256>vt&&0<=Et&&256>Et&&0<=Dt&&256>Dt)?tm(vt,Et,Dt):null},tm=function(vt,Et,Dt){return Et=vt<<16|Et<<8|Dt,16>vt?"#"+(16777216|Et).toString(16).substr(1):"#"+Et.toString(16)},P_=function(vt){return vt=Uu(vt),vt?(vt=parseInt(vt.substr(1),16),[vt>>16,vt>>8&255,vt&255]):[0,0,0]},xp=function(vt,Et,Dt){let Ft=0,Kt=0,yn=0;if(Et===0)yn=Kt=Ft=Dt;else{const Mn=Math.floor(vt/60),qn=vt/60-Mn;vt=Dt*(1-Et);const Cr=Dt*(1-Et*qn);switch(Et=Dt*(1-Et*(1-qn)),Mn){case 1:Ft=Cr,Kt=Dt,yn=vt;break;case 2:Ft=vt,Kt=Dt,yn=Et;break;case 3:Ft=vt,Kt=Cr,yn=Dt;break;case 4:Ft=Et,Kt=vt,yn=Dt;break;case 5:Ft=Dt,Kt=vt,yn=Cr;break;case 6:case 0:Ft=Dt,Kt=Et,yn=vt}}return tm(Math.floor(Ft),Math.floor(Kt),Math.floor(yn))},pu=function(vt,Et,Dt){return vt=Uu(vt),!vt||(Et=Uu(Et),!Et)?null:(vt=P_(vt),Et=P_(Et),tm(Math.round(Et[0]+Dt*(vt[0]-Et[0])),Math.round(Et[1]+Dt*(vt[1]-Et[1])),Math.round(Et[2]+Dt*(vt[2]-Et[2]))))},Lm=function(vt){return xp(vt,GS,255*US)},wp=function(vt,Et){const Dt=[];var Ft=vt.split("");Ft.push("");var Kt=0;vt=[];let yn=null;for(let Cr=0;Cr<Ft.length;Cr++){var Mn=Ft[Cr];if(Kt===0)Mn==="%"?((Kt=vt.join(""))&&Dt.push(Kt),vt.length=0,Kt=1):vt.push(Mn);else if(Kt===1)Mn==="%"?(vt.push(Mn),Kt=0):Et&&"0"<=Mn&&"9">=Mn?(Kt=2,yn=Mn,(Mn=vt.join(""))&&Dt.push(Mn),vt.length=0):Mn==="{"?Kt=3:(vt.push("%",Mn),Kt=0);else if(Kt===2)if("0"<=Mn&&"9">=Mn)yn+=Mn;else{var qn=void 0;Dt.push(parseInt((qn=yn)!=null?qn:"",10)),Cr--,Kt=0}else Kt===3&&(Mn===""?(vt.splice(0,0,"%{"),Cr--,Kt=0):Mn!=="}"?vt.push(Mn):(Kt=vt.join(""),/[A-Z]\w*/i.test(Kt)?(Mn=Kt.toUpperCase(),(Mn=Mn.startsWith("BKY_")?Mn.substring(4):null)&&Mn in $o?(Kt=$o[Mn],typeof Kt=="string"?Array.prototype.push.apply(Dt,wp(Kt,Et)):Et?Dt.push(String(Kt)):Dt.push(Kt)):Dt.push("%{"+Kt+"}")):Dt.push("%{"+Kt+"}"),Kt=vt.length=0))}for((Et=vt.join(""))&&Dt.push(Et),qn=[],vt.length=0,Ft=0;Ft<Dt.length;Ft++)typeof Dt[Ft]=="string"?vt.push(Dt[Ft]):((Et=vt.join(""))&&qn.push(Et),vt.length=0,qn.push(Dt[Ft]));return(Et=vt.join(""))&&qn.push(Et),vt.length=0,qn},nm=function(vt){return wp(vt,!0)},ds=function(vt){return typeof vt!="string"?vt:(vt=wp(vt,!1),vt.length?String(vt[0]):"")},Dm=function(vt){let Et=!0;const Dt=$o,Ft=vt.match(/%{BKY_[A-Z]\w*}/ig);if(Ft)for(let Kt=0;Kt<Ft.length;Kt++){const yn=Ft[Kt].toUpperCase();Dt[yn.slice(6,-1)]===void 0&&(console.warn("No message string for "+Ft[Kt]+" in "+vt),Et=!1)}return Et},mu=function(vt){const Et=typeof vt=="string"?ds(vt):vt;var Dt=Number(Et);if(!isNaN(Dt)&&0<=Dt&&360>=Dt)return{hue:Dt,hex:xp(Dt,em(),255*qO())};if(Dt=Uu(Et))return{hue:null,hex:Dt};throw Dt='Invalid colour: "'+Et+'"',vt!==Et&&(Dt+=' (from "'+vt+'")'),Error(Dt)},Cp=function(){return Zu},Nm=function(vt){Zu=vt},Fl=function(){Zu||(Zu=document.createElement("div"),Zu.className="blocklyWidgetDiv",(Wn()||document.body).appendChild(Zu))},Ap=function(vt,Et,Dt){ba(),Gv=vt,Uv=Dt,(vt=Zu)&&(vt.style.direction=Et?"rtl":"ltr",vt.style.display="block",Et=xn(),yO=Et.getRenderer().getClassName(),vO=Et.getTheme().getClassName(),yO&&ir(vt,yO),vO&&ir(vt,vO))},ba=function(){if(gu()){Gv=null;var vt=Zu;vt&&(vt.style.display="none",vt.style.left="",vt.style.top="",Uv&&Uv(),Uv=null,vt.textContent="",yO&&(Jn(vt,yO),yO=""),vO&&(Jn(vt,vO),vO=""),xn().markFocused())}},gu=function(){return!!Gv},Bm=function(vt){Gv===vt&&ba()},Rp=function(vt,Et,Dt){Zu.style.left=vt+"px",Zu.style.top=Et+"px",Zu.style.height=Dt+"px"},KO=function(vt,Et,Dt,Ft){const Kt=ms(vt,Et,Dt);vt=JO(vt,Et,Dt,Ft),0>Kt?Rp(vt,0,Dt.height+Kt):Rp(vt,Kt,Dt.height)},JO=function(vt,Et,Dt,Ft){return Ft?Math.min(Math.max(Et.right-Dt.width,vt.left),vt.right-Dt.width):Math.max(Math.min(Et.left,vt.right-Dt.width),vt.left)},ms=function(vt,Et,Dt){return Et.bottom+Dt.height>=vt.bottom?Et.top-Dt.height:Et.bottom},$a=function(vt,Et){xo(Wr.FIELD,vt,Et)},ey=function(vt){Hn(Wr.FIELD,vt)},Fm=function(vt){return gT.fromJsonInternal(vt)},L_=function(vt){const Et=Rr(Wr.FIELD,vt.type);if(Et){if(typeof Et.fromJson!="function")throw new TypeError("returned Field was not a IRegistrableField");return Et.fromJson(vt)}return console.warn("Blockly could not create a field of type "+vt.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null},Ss=function(vt,Et){vt.setAttribute(ZE,Et)},ts=function(vt,Et,Dt){Array.isArray(Dt)&&(Dt=Dt.join(" ")),vt.setAttribute(YE+Et,`${Dt}`)},ys=function(vt){return vt!==Qo.SKIP_SETUP},js=function(vt){let Et=!1;const Dt=vt.map(([Mn,qn])=>typeof Mn=="string"?[ds(Mn),qn]:(Et=!0,[Mn.alt!==null?Object.assign({},Mn,{alt:ds(Mn.alt)}):Object.assign({},Mn),qn]));if(Et||2>vt.length)return{options:Dt};var Ft=Dt.map(([Mn])=>Mn),Kt=Jl(Ft);vt=Gu(Ft,Kt);const yn=km(Ft,Kt);return!vt&&!yn||Kt<=vt+yn?{options:Dt}:(Kt=vt?Ft[0].substring(0,vt-1):void 0,Ft=yn?Ft[0].substr(1-yn):void 0,{options:Ns(Dt,vt,yn),prefix:Kt,suffix:Ft})},Ns=function(vt,Et,Dt){return vt.map(([Ft,Kt])=>[Ft.substring(Et,Ft.length-Dt),Kt])},Gm=function(vt){if(!Array.isArray(vt))throw TypeError("FieldDropdown options must be an array.");if(!vt.length)throw TypeError("FieldDropdown options must not be an empty array.");let Et=!1;for(let Dt=0;Dt<vt.length;Dt++){const Ft=vt[Dt];Array.isArray(Ft)?typeof Ft[1]!="string"?(Et=!0,console.error("Invalid option["+Dt+"]: Each FieldDropdown option id must be a string. Found "+Ft[1]+" in: ",Ft)):Ft[0]&&typeof Ft[0]!="string"&&typeof Ft[0].src!="string"&&(Et=!0,console.error("Invalid option["+Dt+"]: Each FieldDropdown option must have a string label or image description. Found"+Ft[0]+" in: ",Ft)):(Et=!0,console.error("Invalid option["+Dt+"]: Each FieldDropdown option must be an array. Found: ",Ft))}if(Et)throw TypeError("Found invalid FieldDropdown options.")},Um=function(vt,Et){ft("Blockly.utils.object.inherits","version 9","version 10"),vt.superClass_=Et.prototype,Object.setPrototypeOf(vt,Et),vt.prototype=Object.create(Et.prototype),vt.prototype.constructor=vt},Vm=function(vt,Et){ft("Blockly.utils.object.mixin","May 2022","May 2023","Object.assign");for(const Dt in Et)vt[Dt]=Et[Dt]},tp=function(vt,Et){for(const Dt in Et)vt[Dt]=Et[Dt]!==null&&typeof Et[Dt]=="object"?tp(vt[Dt]||Object.create(null),Et[Dt]):Et[Dt];return vt},Xs=function(vt){return ft("Blockly.utils.object.values","version 9","version 10","Object.values"),Object.values(vt)},im=function(vt){return vt?((vt instanceof Element||typeof vt=="string")&&(vt=ry(vt),vt=D_(vt)),ty(vt),vt):null},ty=function(vt){const Et=vt.kind;if(vt=vt.contents,Et&&Et!==OT&&Et!==jS)throw Error("Invalid toolbox kind "+Et+". Please supply either "+OT+" or "+jS);if(!vt)throw Error("Toolbox must have a contents attribute.")},om=function(vt){return vt?vt.contents?vt.contents:Array.isArray(vt)&&0<vt.length&&!vt[0].nodeType?vt:sm(vt):[]},_u=function(vt){return yT.hasCategoriesInternal(vt)},Au=function(vt){if(!vt)return!1;const Et=vt.kind;return Et?Et===jS:!!vt.contents.filter(function(Dt){return Dt.kind.toUpperCase()==="CATEGORY"}).length},Vu=function(vt){return vt&&vt.contents?!!vt.contents.filter(function(Et){return Et.kind.toUpperCase()==="CATEGORY"}).length:!1},D_=function(vt){const Et={contents:sm(vt)};return vt instanceof Node&&ny(vt,Et),Et},sm=function(vt){const Et=[];let Dt=vt.childNodes;Dt||(Dt=vt);for(let Ft=0,Kt;Kt=Dt[Ft];Ft++){if(!Kt.tagName)continue;vt={};const yn=Kt.tagName.toUpperCase();vt.kind=yn,yn==="BLOCK"?vt.blockxml=Kt:Kt.childNodes&&0<Kt.childNodes.length&&(vt.contents=sm(Kt)),ny(Kt,vt),Et.push(vt)}return Et},ny=function(vt,Et){for(let Dt=0;Dt<vt.attributes.length;Dt++){const Ft=vt.attributes[Dt];-1<Ft.nodeName.indexOf("css-")?(Et.cssconfig=Et.cssconfig||{},Et.cssconfig[Ft.nodeName.replace("css-","")]=Ft.value):Et[Ft.nodeName]=Ft.value}},ry=function(vt){let Et=null;if(vt)if(typeof vt=="string"){if(Et=na(vt),Et.nodeName.toLowerCase()!=="xml")throw TypeError("Toolbox should be an <xml> document.")}else vt instanceof Element&&(Et=vt);return Et},Wm=function(vt,Et){if(typeof vt!="string"||vt.trim()==="")throw Error('Error: Invalid extension name "'+vt+'"');if(bO[vt])throw Error('Error: Extension "'+vt+'" is already registered.');if(typeof Et!="function")throw Error('Error: Extension "'+vt+'" must be a function');bO[vt]=Et},N0=function(vt,Et){if(!Et||typeof Et!="object")throw Error('Error: Mixin "'+vt+'" must be a object');Wm(vt,function(){this.mixin(Et)})},B0=function(vt,Et,Dt,Ft){const Kt='Error when registering mutator "'+vt+'": ';iy(Kt,Et);const yn=G_(Et,Kt);if(Dt&&typeof Dt!="function")throw Error(Kt+'Extension "'+vt+'" is not a function');Wm(vt,function(){yn&&this.setMutator(new lt.Mutator$$module$build$src$core$mutator(Ft||[],this)),this.mixin(Et),Dt&&Dt.apply(this)})},F0=function(vt){N_(vt)?delete bO[vt]:console.warn('No extension mapping for name "'+vt+'" found to unregister')},N_=function(vt){return!!bO[vt]},Ip=function(vt,Et,Dt){const Ft=bO[vt];if(typeof Ft!="function")throw Error('Error: Extension "'+vt+'" not found.');let Kt;if(Dt?G0(vt,Et):Kt=U_(Et),Ft.apply(Et),Dt)iy('Error after applying mutator "'+vt+'": ',Et);else if(!U0(Kt,Et))throw Error('Error when applying extension "'+vt+'": mutation properties changed when applying a non-mutator extension.')},G0=function(vt,Et){if(U_(Et).length)throw Error('Error: tried to apply mutation "'+vt+'" to a block that already has mutator functions.  Block id: '+Et.id)},B_=function(vt,Et){return kp(vt.mutationToDom,vt.domToMutation,Et+" mutationToDom/domToMutation")},F_=function(vt,Et){return kp(vt.saveExtraState,vt.loadExtraState,Et+" saveExtraState/loadExtraState")},G_=function(vt,Et){return kp(vt.compose,vt.decompose,Et+" compose/decompose")},kp=function(vt,Et,Dt){if(vt&&Et){if(typeof vt!="function"||typeof Et!="function")throw Error(Dt+" must be a function");return!0}if(!vt&&!Et)return!1;throw Error(Dt+"Must have both or neither functions")},iy=function(vt,Et){const Dt=B_(Et,vt),Ft=F_(Et,vt);if(!Dt&&!Ft)throw Error(vt+"Mutations must contain either XML hooks, or JSON hooks, or both");G_(Et,vt)},U_=function(vt){const Et=[];return vt.domToMutation!==void 0&&Et.push(vt.domToMutation),vt.mutationToDom!==void 0&&Et.push(vt.mutationToDom),vt.saveExtraState!==void 0&&Et.push(vt.saveExtraState),vt.loadExtraState!==void 0&&Et.push(vt.loadExtraState),vt.compose!==void 0&&Et.push(vt.compose),vt.decompose!==void 0&&Et.push(vt.decompose),Et},U0=function(vt,Et){if(Et=U_(Et),Et.length!==vt.length)return!1;for(let Dt=0;Dt<Et.length;Dt++)if(vt[Dt]!==Et[Dt])return!1;return!0},Qm=function(vt){if(typeof document!="object")throw Error("runAfterPageLoad() requires browser document.");if(document.readyState==="complete")vt();else{const Et=setInterval(function(){document.readyState==="complete"&&(clearInterval(Et),vt())},10)}},oy=function(vt,Et){const Dt=[];return typeof document=="object"&&Qm(function(){for(const Ft in Et)Dm(Et[Ft])}),function(){this.type&&Dt.indexOf(this.type)===-1&&(V0(this,vt,Et),Dt.push(this.type)),this.setTooltip(function(){var Ft=String(this.getFieldValue(vt));let Kt=Et[Ft];return Kt===null?Dt.indexOf(this.type)===-1&&(Ft="No tooltip mapping for value "+Ft+" of field "+vt,this.type!==null&&(Ft+=" of block type "+this.type),console.warn(Ft+".")):Kt=ds(Kt),Kt}.bind(this))}},V0=function(vt,Et,Dt){var Ft=vt.getField(Et);if(Ft instanceof Ku&&!Ft.isOptionListDynamic()){Ft=Ft.getOptions();for(let Kt=0;Kt<Ft.length;Kt++){const yn=Ft[Kt][1];Dt[yn]===null&&console.warn("No tooltip mapping for value "+yn+" of field "+Et+" of block type "+vt.type)}}},W0=function(vt,Et){return typeof document=="object"&&Qm(function(){Dm(vt)}),function(){this.setTooltip(function(){const Dt=this.getField(Et);return ds(vt).replace("%1",Dt?Dt.getText():"")}.bind(this))}},oS=function(){const vt=this.tooltip;this.setTooltip(function(){const Et=this.getParent();return Et&&Et.getInputsInline()&&Et.tooltip||vt}.bind(this))},xa=function(vt,Et){return Et=vt.indexOf(Et),Et===-1?!1:(vt.splice(Et,1),!0)},go=function(vt,Et){return" "+vt+","+Et+" "},Gl=function(vt,Et){return" "+vt+Et.join("")},Us=function(vt,Et){return" M "+vt+","+Et+" "},as=function(vt,Et){return" m "+vt+","+Et+" "},Ru=function(vt,Et){return" l "+vt+","+Et+" "},am=function(vt){return" l"+vt.join("")},_i=function(vt,Et){return" "+vt+" "+Et+" "},$s=function(vt,Et,Dt,Ft){return vt+" "+Dt+" "+Dt+" "+Et+Ft},sS=function(vt){return ft("Blockly.utils.getRelativeXY","December 2021","December 2022","Blockly.utils.svgMath.getRelativeXY"),Pl(vt)},aS=function(vt){return ft("Blockly.utils.getInjectionDivXY_","December 2021","December 2022","Blockly.utils.svgMath.getInjectionDivXY"),x_(vt)},sy=function(vt){return ft("Blockly.utils.tokenizeInterpolation","December 2021","December 2022","Blockly.utils.parsing.tokenizeInterpolation"),nm(vt)},ay=function(vt){return ft("Blockly.utils.replaceMessageReferences","December 2021","December 2022","Blockly.utils.parsing.replaceMessageReferences"),ds(vt)},lS=function(vt){return ft("Blockly.utils.checkMessageReferences","December 2021","December 2022","Blockly.utils.parsing.checkMessageReferences"),Dm(vt)},Q0=function(){return ft("Blockly.utils.is3dSupported","December 2021","December 2022","Blockly.utils.svgMath.is3dSupported"),w_()},H0=function(){return ft("Blockly.utils.getViewportBBox","December 2021","December 2022","Blockly.utils.svgMath.getViewportBBox"),FO()},z0=function(vt,Et){return ft("Blockly.utils.arrayRemove","December 2021","December 2022","Blockly.array.removeElem"),xa(vt,Et)},j0=function(){return ft("Blockly.utils.getDocumentScroll","December 2021","December 2022","Blockly.utils.svgMath.getDocumentScroll"),qp()},X0=function(vt,Et){return ft("Blockly.utils.getBlockTypeCounts","December 2021","December 2022","Blockly.common.getBlockTypeCounts"),Qn(vt,Et)},Iu=function(vt,Et){return ft("Blockly.utils.screenToWsCoordinates","December 2021","December 2022","Blockly.utils.svgMath.screenToWsCoordinates"),hu(vt,Et)},Y0=function(vt){return ft("Blockly.utils.parseBlockColour","December 2021","December 2022","Blockly.utils.parsing.parseBlockColour"),mu(vt)},Hm=function(vt){ft("Blockly.utils.runAfterPageLoad","December 2021","December 2022"),Qm(vt)},Mp=function(vt,Et){xo(Wr.SERIALIZER,vt,Et)},V_=function(vt){Hn(Wr.SERIALIZER,vt)},eu=function(vt,{addCoordinates:Et=!1,addInputBlocks:Dt=!0,addNextBlocks:Ft=!0,doFullSerialization:Kt=!0}={}){if(vt.isInsertionMarker())return null;const yn={type:vt.type,id:vt.id};return Et&&zm(vt,yn),Z0(vt,yn),Ys(vt,yn),cS(vt,yn),uS(vt,yn,Kt),Dt&&Ul(vt,yn,Kt),Ft&&_l(vt,yn,Kt),yn},Z0=function(vt,Et){vt.isCollapsed()&&(Et.collapsed=!0),vt.isEnabled()||(Et.enabled=!1),vt.inputsInline!==void 0&&vt.inputsInline!==vt.inputsInlineDefault&&(Et.inline=vt.inputsInline),vt.data&&(Et.data=vt.data)},zm=function(vt,Et){const Dt=vt.workspace;vt=vt.getRelativeToSurfaceXY(),Et.x=Math.round(Dt.RTL?Dt.getWidth()-vt.x:vt.x),Et.y=Math.round(vt.y)},Ys=function(vt,Et){vt.saveExtraState?(vt=vt.saveExtraState(),vt!==null&&(Et.extraState=vt)):vt.mutationToDom&&(vt=vt.mutationToDom(),vt!==null&&(Et.extraState=Yl(vt).replace(' xmlns="https://developers.google.com/blockly/xml"',"")))},cS=function(vt,Et){vt.getCommentText()&&(Et.icons={comment:{text:vt.getCommentText(),pinned:vt.commentModel.pinned,height:Math.round(vt.commentModel.size.height),width:Math.round(vt.commentModel.size.width)}})},uS=function(vt,Et,Dt){const Ft=Object.create(null);for(let Kt=0;Kt<vt.inputList.length;Kt++){const yn=vt.inputList[Kt];for(let Mn=0;Mn<yn.fieldRow.length;Mn++){const qn=yn.fieldRow[Mn];qn.isSerializable()&&(Ft[qn.name]=qn.saveState(Dt))}}Object.keys(Ft).length&&(Et.fields=Ft)},Ul=function(vt,Et,Dt){const Ft=Object.create(null);for(let Kt=0;Kt<vt.inputList.length;Kt++){const yn=vt.inputList[Kt];if(yn.type===Do.DUMMY)continue;const Mn=ly(yn.connection,Dt);Mn&&(Ft[yn.name]=Mn)}Object.keys(Ft).length&&(Et.inputs=Ft)},_l=function(vt,Et,Dt){vt.nextConnection&&(vt=ly(vt.nextConnection,Dt))&&(Et.next=vt)},ly=function(vt,Et){const Dt=vt.getShadowState(!0);if(vt=vt.targetBlock(),!Dt&&!vt)return null;const Ft=Object.create(null);return Dt&&(Ft.shadow=Dt),vt&&!vt.isShadow()&&(Ft.block=eu(vt,{doFullSerialization:Et})),Ft},np=function(vt,Et,{recordUndo:Dt=!1}={}){return W_(vt,Et,{recordUndo:Dt})},W_=function(vt,Et,{parentConnection:Dt,isShadow:Ft=!1,recordUndo:Kt=!1}={}){const yn=wo();Ao(Kt),(Kt=Ro())||io(!0),Bo();const Mn=cy(vt,Et,{parentConnection:Dt,isShadow:Ft});return yo(),Fr(new(Vr($l))(Mn)),io(Kt),Ao(yn),Et.rendered&&setTimeout(()=>{Mn.disposed||Mn.setConnectionTracking(!0)},1),Mn},cy=function(vt,Et,{parentConnection:Dt,isShadow:Ft=!1}={}){if(!vt.type)throw new ST(vt);const Kt=Et.newBlock(vt.type,vt.id);return Kt.setShadow(Ft),q0(Kt,vt),uy(Kt,vt),K0(Kt,vt),hy(Dt,Kt,vt),J0(Kt,vt),ev(Kt,vt),Q_(Kt,vt),H_(Kt,vt),fy(Kt,Et.rendered),Kt},q0=function(vt,Et){let Dt=Et.x===void 0?0:Et.x;Et=Et.y===void 0?0:Et.y;const Ft=vt.workspace;Dt=Ft.RTL?Ft.getWidth()-Dt:Dt,vt.moveBy(Dt,Et)},uy=function(vt,Et){Et.collapsed&&vt.setCollapsed(!0),Et.enabled===!1&&vt.setEnabled(!1),Et.inline!==void 0&&vt.setInputsInline(Et.inline),Et.data!==void 0&&(vt.data=Et.data)},K0=function(vt,Et){Et.extraState&&(vt.loadExtraState?vt.loadExtraState(Et.extraState):vt.domToMutation&&vt.domToMutation(na(Et.extraState)))},hy=function(vt,Et,Dt){if(vt){if(vt.getSourceBlock().isShadow()&&!Et.isShadow())throw new TT(Dt);if(vt.type===Do.VALUE){var Ft=Et.outputConnection;if(!Ft)throw new o0("output",Et,Dt)}else if(Ft=Et.previousConnection,!Ft)throw new o0("previous",Et,Dt);if(!vt.connect(Ft)){const Kt=Et.workspace.connectionChecker;throw new $T(Kt.getErrorMessage(Kt.canConnectWithReason(Ft,vt,!1),Ft,vt),vt.type===Do.VALUE?"output connection":"previous connection",Et,Dt)}}},J0=function(vt,Et){Et.icons&&(Et=Et.icons.comment)&&(vt.setCommentText(Et.text),"pinned"in Et&&(vt.commentModel.pinned=Et.pinned),"width"in Et&&"height"in Et&&(vt.commentModel.size=new qs(Et.width,Et.height)),Et.pinned&&vt.rendered&&!vt.isInFlyout&&setTimeout(()=>vt.getCommentIcon().setVisible(!0),1))},ev=function(vt,Et){if(Et.fields){var Dt=Object.keys(Et.fields);for(let Ft=0;Ft<Dt.length;Ft++){const Kt=Dt[Ft],yn=Et.fields[Kt],Mn=vt.getField(Kt);Mn?Mn.loadState(yn):console.warn(`Ignoring non-existant field ${Kt} in block ${vt.type}`)}}},Q_=function(vt,Et){if(Et.inputs){var Dt=Object.keys(Et.inputs);for(let Ft=0;Ft<Dt.length;Ft++){const Kt=Dt[Ft],yn=vt.getInput(Kt);if(!yn||!yn.connection)throw new o0(Kt,vt,Et);dy(yn.connection,Et.inputs[Kt])}}},H_=function(vt,Et){if(Et.next){if(!vt.nextConnection)throw new o0("next",vt,Et);dy(vt.nextConnection,Et.next)}},dy=function(vt,Et){Et.shadow&&vt.setShadowState(Et.shadow),Et.block&&cy(Et.block,vt.getSourceBlock().workspace,{parentConnection:vt})},fy=function(vt,Et){if(Et)for(vt.setConnectionTracking(!1),vt.initSvg(),vt.render(!1),vt=vt.getIcons(),Et=0;Et<vt.length;Et++)vt[Et].computeIconLocation();else vt.initModel()},tv=function(vt,Et){if(!vt||!Et)throw Error("Cannot connect null connections.");vt.targetConnection=Et,Et.targetConnection=vt},nv=function(vt,Et){let Dt=null;Et=Et.outputConnection;const Ft=Et.getConnectionChecker();for(let Kt=0,yn;yn=vt.inputList[Kt];Kt++){const Mn=yn.connection;if(Mn&&Ft.canConnect(Et,Mn,!1)){if(Dt)return null;Dt=Mn}}return Dt},z_=function(vt,Et){let Dt;for(;Dt=nv(vt,Et);)if(vt=Dt.targetBlock(),!vt||vt.isShadow())return Dt;return null},jm=function(vt){let Et=vt.outputConnection;return(!Et||vt.previousConnection&&vt.previousConnection.isConnected())&&(Et=vt.previousConnection),Et},j_=function(vt){const Et=vt.workspace;var Dt=vt.getSvgRoot();Et.getAudioManager().play("delete");const Ft=Et.getSvgXY(Dt);Dt=Dt.cloneNode(!0),Dt.setAttribute("transform","translate("+Ft.x+","+Ft.y+")"),Et.getParentSvg().appendChild(Dt),my(Dt,{x:Ft.x,y:Ft.y,width:vt.width,height:vt.height},Et.RTL,new Date,Et.scale)},my=function(vt,Et,Dt,Ft,Kt){const yn=(new Date().getTime()-Ft.getTime())/150;1<yn?br(vt):(vt.setAttribute("transform","translate("+(Et.x+(Dt?-1:1)*Et.width*Kt/2*yn)+","+(Et.y+Et.height*Kt*yn)+") scale("+(1-yn)*Kt+")"),setTimeout(my,10,vt,Et,Dt,Ft,Kt))},ku=function(vt){const Et=vt.workspace,Dt=Et.scale;if(Et.getAudioManager().play("click"),!(1>Dt)){var Ft=Et.getSvgXY(vt.getSvgRoot());vt.outputConnection?(Ft.x+=(vt.RTL?3:-3)*Dt,Ft.y+=13*Dt):vt.previousConnection&&(Ft.x+=(vt.RTL?-23:23)*Dt,Ft.y+=3*Dt),vt=In(ar.CIRCLE,{cx:Ft.x,cy:Ft.y,r:0,fill:"none",stroke:"#888","stroke-width":10},Et.getParentSvg()),rv(vt,new Date,Dt)}},rv=function(vt,Et,Dt){const Ft=(new Date().getTime()-Et.getTime())/150;1<Ft?br(vt):(vt.setAttribute("r",(25*Ft*Dt).toString()),vt.style.opacity=(1-Ft).toString(),Hv=setTimeout(rv,10,vt,Et,Dt))},iv=function(vt){if(Ou(),vt.workspace.getAudioManager().play("disconnect"),!(1>vt.workspace.scale)){var Et=vt.getHeightWidth().height;Et=Math.atan(10/Et)/Math.PI*180,vt.RTL||(Et*=-1),c0=vt.getSvgRoot(),Xm(c0,Et,new Date)}},Xm=function(vt,Et,Dt){const Ft=(new Date().getTime()-Dt.getTime())/200;let Kt="";1>=Ft&&(Kt=`skewX(${Math.round(Math.sin(Ft*Math.PI*3)*(1-Ft)*Et)})`,Hv=setTimeout(Xm,10,vt,Et,Dt)),vt.skew_=Kt,vt.setAttribute("transform",vt.translate_+vt.skew_)},Ou=function(){if(c0){Hv&&clearTimeout(Hv);const vt=c0;vt.skew_="",vt.setAttribute("transform",vt.translate_),c0=null}},Ym=function(vt){e$.copyInternal(vt)},eo=function(vt){Wp=vt.toCopyData()},lm=function(){if(!Wp)return null;let vt=Wp.source;return vt.isFlyout&&(vt=vt.targetWorkspace),Wp.typeCounts&&vt.isCapacityAvailable(Wp.typeCounts)?vt.paste(Wp.saveInfo):null},cm=function(vt){return e$.duplicateInternal(vt)},ov=function(vt){const Et=Wp;Ym(vt);let Dt,Ft,Kt;return vt=(Kt=(Dt=vt.toCopyData())==null||(Ft=Dt.source)==null?void 0:Ft.paste(Wp.saveInfo))!=null?Kt:null,Wp=Et,vt},sv=function(){return d0},rp=function(vt){d0=vt},ip=function(vt,Et,Dt){if(Ap(t$,Dt,Oy),Et.length){var Ft=gy(Et,Dt);f0=Ft,av(Ft,vt,Dt),setTimeout(function(){Ft.focus()},1),d0=null}else Zm()},gy=function(vt,Et){const Dt=new VS;Dt.setRole(su.MENU);for(let Ft=0;Ft<vt.length;Ft++){const Kt=vt[Ft],yn=new WS(Kt.text);yn.setRightToLeft(Et),yn.setRole(su.MENUITEM),Dt.addChild(yn),yn.setEnabled(Kt.enabled),Kt.enabled&&yn.onAction(function(){Zm(),Kt.callback(Kt.scope)},{})}return Dt},av=function(vt,Et,Dt){const Ft=FO();Et=new xs(Et.clientY+Ft.top,Et.clientY+Ft.top,Et.clientX+Ft.left,Et.clientX+Ft.left),lv(vt);const Kt=vt.getSize();Dt&&(Et.left+=Kt.width,Et.right+=Kt.width,Ft.left+=Kt.width,Ft.right+=Kt.width),KO(Ft,Et,Kt,Dt),vt.focus()},lv=function(vt){var Et=Cp();if(!Et)throw Error("Attempting to create a context menu when widget div is null");Et=vt.render(Et),ir(Et,"blocklyContextMenu"),Zt(Et,"contextmenu",null,cv),vt.focus()},cv=function(vt){vt.preventDefault(),vt.stopPropagation()},Zm=function(){Bm(t$),d0=null},Oy=function(){f0&&(f0.dispose(),f0=null)},uv=function(vt,Et){return()=>{Bo();let Dt;try{Dt=Fu(Et,vt.workspace);const Ft=vt.getRelativeToSurfaceXY();Ft.x=vt.RTL?Ft.x-lt.config$$module$build$src$core$config.snapRadius:Ft.x+lt.config$$module$build$src$core$config.snapRadius,Ft.y+=2*lt.config$$module$build$src$core$config.snapRadius,Dt.moveBy(Ft.x,Ft.y)}finally{yo()}os()&&!Dt.isShadow()&&Fr(new(Vr($l))(Dt)),Dt.select()}},X_=function(vt){return{text:$o.REMOVE_COMMENT,enabled:!0,callback:function(){io(!0),vt.dispose(),io(!1)}}},Y_=function(vt){return{text:$o.DUPLICATE_COMMENT,enabled:!0,callback:function(){cm(vt)}}},hv=function(vt,Et){const Dt={enabled:!0};return Dt.text=$o.ADD_COMMENT,Dt.callback=function(){const Ft=new Al(vt,$o.WORKSPACE_COMMENT_DEFAULT_TEXT,Al.DEFAULT_SIZE,Al.DEFAULT_SIZE);var Kt=vt.getInjectionDiv().getBoundingClientRect();Kt=new Zr(Et.clientX-Kt.left,Et.clientY-Kt.top);const yn=vt.getOriginOffsetInPixels();Kt=Zr.difference(Kt,yn),Kt.scale(1/vt.scale),Ft.moveBy(Kt.x,Kt.y),vt.rendered&&(Ft.initSvg(),Ft.render(),Ft.select())},Dt},qm=function(vt,Et,Dt,Ft,Kt,yn){const Mn=yn.scrollbar&&yn.scrollbar.canScrollVertically();return vt.horizontal===EO.LEFT?(Dt=Kt.absoluteMetrics.left+Dt,Mn&&yn.RTL&&(Dt+=bs.scrollbarThickness)):(Dt=Kt.absoluteMetrics.left+Kt.viewMetrics.width-Et.width-Dt,Mn&&!yn.RTL&&(Dt-=bs.scrollbarThickness)),vt.vertical===Qp.TOP?vt=Kt.absoluteMetrics.top+Ft:(vt=Kt.absoluteMetrics.top+Kt.viewMetrics.height-Et.height-Ft,yn.scrollbar&&yn.scrollbar.canScrollHorizontally()&&(vt-=bs.scrollbarThickness)),new xs(vt,vt+Et.height,Dt,Dt+Et.width)},um=function(vt,Et){return{horizontal:Et.toolboxMetrics.position===Co.LEFT||vt.horizontalLayout&&!vt.RTL?EO.RIGHT:EO.LEFT,vertical:Et.toolboxMetrics.position===Co.BOTTOM?Qp.TOP:Qp.BOTTOM}},yy=function(vt,Et,Dt,Ft){const Kt=vt.left,yn=vt.right-vt.left,Mn=vt.bottom-vt.top;for(let qn=0;qn<Ft.length;qn++){const Cr=Ft[qn];vt.intersects(Cr)&&(vt=Dt===$m.UP?Cr.top-Mn-Et:Cr.bottom+Et,vt=new xs(vt,vt+Mn,Kt,Kt+yn),qn=-1)}return vt},dv=function(){es.registry.register({name:_p.ESCAPE,preconditionFn(vt){return!vt.options.readOnly},callback(vt){return vt.hideChaff(),!0},keyCodes:[lo.ESC]})},vy=function(){es.registry.register({name:_p.DELETE,preconditionFn(vt){const Et=Pn();return!vt.options.readOnly&&Et!=null&&Et.isDeletable()},callback(vt,Et){return Et.preventDefault(),gp.inProgress()?!1:(Pn().checkAndDelete(),!0)},keyCodes:[lo.DELETE,lo.BACKSPACE]})},by=function(){const vt=es.registry.createSerializedKey(lo.C,[lo.CTRL]),Et=es.registry.createSerializedKey(lo.C,[lo.ALT]),Dt=es.registry.createSerializedKey(lo.C,[lo.META]);es.registry.register({name:_p.COPY,preconditionFn(Ft){const Kt=Pn();return!Ft.options.readOnly&&!gp.inProgress()&&Kt!=null&&Kt.isDeletable()&&Kt.isMovable()},callback(Ft,Kt){return Kt.preventDefault(),Ft.hideChaff(),Ym(Pn()),!0},keyCodes:[vt,Et,Dt]})},Sy=function(){const vt=es.registry.createSerializedKey(lo.X,[lo.CTRL]),Et=es.registry.createSerializedKey(lo.X,[lo.ALT]),Dt=es.registry.createSerializedKey(lo.X,[lo.META]);es.registry.register({name:_p.CUT,preconditionFn(Ft){const Kt=Pn();return!Ft.options.readOnly&&!gp.inProgress()&&Kt!=null&&Kt instanceof Lu&&Kt.isDeletable()&&Kt.isMovable()&&!Kt.workspace.isFlyout},callback(){const Ft=Pn();return Ft?(Ym(Ft),Ft.checkAndDelete(),!0):!1},keyCodes:[vt,Et,Dt]})},$y=function(){const vt=es.registry.createSerializedKey(lo.V,[lo.CTRL]),Et=es.registry.createSerializedKey(lo.V,[lo.ALT]),Dt=es.registry.createSerializedKey(lo.V,[lo.META]);es.registry.register({name:_p.PASTE,preconditionFn(Ft){return!Ft.options.readOnly&&!gp.inProgress()},callback(){return!!lm()},keyCodes:[vt,Et,Dt]})},Km=function(){const vt=es.registry.createSerializedKey(lo.Z,[lo.CTRL]),Et=es.registry.createSerializedKey(lo.Z,[lo.ALT]),Dt=es.registry.createSerializedKey(lo.Z,[lo.META]);es.registry.register({name:_p.UNDO,preconditionFn(Ft){return!Ft.options.readOnly&&!gp.inProgress()},callback(Ft){return Ft.hideChaff(),Ft.undo(!1),!0},keyCodes:[vt,Et,Dt]})},Jm=function(){const vt=es.registry.createSerializedKey(lo.Z,[lo.SHIFT,lo.CTRL]),Et=es.registry.createSerializedKey(lo.Z,[lo.SHIFT,lo.ALT]),Dt=es.registry.createSerializedKey(lo.Z,[lo.SHIFT,lo.META]),Ft=es.registry.createSerializedKey(lo.Y,[lo.CTRL]);es.registry.register({name:_p.REDO,preconditionFn(Kt){return!gp.inProgress()&&!Kt.options.readOnly},callback(Kt){return Kt.hideChaff(),Kt.undo(!0),!0},keyCodes:[vt,Et,Dt,Ft]})},_g=function(){dv(),vy(),by(),Sy(),$y(),Km(),Jm()},Wu=function(vt){return vt.startPublishing!==void 0&&vt.stopPublishing!==void 0},Z_=function(vt){return vt.doProcedureUpdate!==void 0},tu=function(vt){for(const Et of vt.getAllBlocks(!1))Z_(Et)&&Et.doProcedureUpdate()},e_=function(vt){const Et=vt.getBlocksByType("procedures_defnoreturn",!1).map(function(Dt){return Dt.getProcedureDef()});return vt=vt.getBlocksByType("procedures_defreturn",!1).map(function(Dt){return Dt.getProcedureDef()}),Et.sort(q_),vt.sort(q_),[Et,vt]},q_=function(vt,Et){return vt[0].localeCompare(Et[0],void 0,{sensitivity:"base"})},K_=function(vt,Et){if(Et.isInFlyout)return vt;for(vt=vt||$o.UNNAMED_KEY||"unnamed";!fv(vt,Et.workspace,Et);){const Dt=vt.match(/^(.*?)(\d+)$/);vt=Dt?Dt[1]+(parseInt(Dt[2])+1):vt+"2"}return vt},fv=function(vt,Et,Dt){return!J_(vt,Et,Dt)},J_=function(vt,Et,Dt){Et=Et.getAllBlocks(!1);for(let Kt=0;Kt<Et.length;Kt++)if(Et[Kt]!==Dt){var Ft=Et[Kt];if(Ft.getProcedureDef&&(Ft=Ft.getProcedureDef(),Du.equals(Ft[0],vt)))return!0}return!1},hS=function(vt){var Et=this.getSourceBlock();if(!Et)throw new Ls;vt=vt.trim();const Dt=K_(vt,Et),Ft=this.getValue();if(Ft!==vt&&Ft!==Dt)for(vt=Et.workspace.getAllBlocks(!1),Et=0;Et<vt.length;Et++){const Kt=vt[Et];Kt.renameProcedure&&Kt.renameProcedure(Ft,Dt)}return Dt},hm=function(vt){function Et(yn,Mn){for(let Cr=0;Cr<yn.length;Cr++){var qn=yn[Cr][0];const qr=yn[Cr][1],jo=No("block");jo.setAttribute("type",Mn),jo.setAttribute("gap","16");const gs=No("mutation");for(gs.setAttribute("name",qn),jo.appendChild(gs),qn=0;qn<qr.length;qn++){const Tu=No("arg");Tu.setAttribute("name",qr[qn]),gs.appendChild(Tu)}Dt.push(jo)}}const Dt=[];if(jr.procedures_defnoreturn){var Ft=No("block");Ft.setAttribute("type","procedures_defnoreturn"),Ft.setAttribute("gap","16");var Kt=No("field");Kt.setAttribute("name","NAME"),Kt.appendChild(Ml($o.PROCEDURES_DEFNORETURN_PROCEDURE)),Ft.appendChild(Kt),Dt.push(Ft)}return jr.procedures_defreturn&&(Ft=No("block"),Ft.setAttribute("type","procedures_defreturn"),Ft.setAttribute("gap","16"),Kt=No("field"),Kt.setAttribute("name","NAME"),Kt.appendChild(Ml($o.PROCEDURES_DEFRETURN_PROCEDURE)),Ft.appendChild(Kt),Dt.push(Ft)),jr.procedures_ifreturn&&(Ft=No("block"),Ft.setAttribute("type","procedures_ifreturn"),Ft.setAttribute("gap","16"),Dt.push(Ft)),Dt.length&&Dt[Dt.length-1].setAttribute("gap","24"),vt=e_(vt),Et(vt[0],"procedures_callnoreturn"),Et(vt[1],"procedures_callreturn"),Dt},eO=function(vt){var Et=[],Dt=vt.getBlocksByType("procedures_mutatorarg",!1);for(let yn=0,Mn;Mn=Dt[yn];yn++)Et.push(Mn.getFieldValue("NAME"));Dt=No("xml");const Ft=No("block");Ft.setAttribute("type","procedures_mutatorarg");const Kt=No("field");Kt.setAttribute("name","NAME"),Et=NO(g$,Et),Et=Ml(Et),Kt.appendChild(Et),Ft.appendChild(Kt),Dt.appendChild(Ft),vt.updateToolbox(Dt)},vs=function(vt){if(vt.type===Fp&&vt.bubbleType==="mutator"&&vt.isOpen&&vt.blockId){vt=vn(vt.workspaceId).getBlockById(vt.blockId);var Et=vt.type;(Et==="procedures_defnoreturn"||Et==="procedures_defreturn")&&(vt=vt.mutator.getWorkspace(),eO(vt),vt.addChangeListener(Go))}},Go=function(vt){(vt.type===$l||vt.type===pp||vt.type===Qs)&&(vt=vn(vt.workspaceId),eO(vt))},Ts=function(vt,Et){const Dt=[];Et=Et.getAllBlocks(!1);for(let Kt=0;Kt<Et.length;Kt++){var Ft=Et[Kt];Ft.getProcedureCall&&(Ft=Ft.getProcedureCall())&&Du.equals(Ft,vt)&&Dt.push(Et[Kt])}return Dt},Cs=function(vt){const Et=wo();var Dt=vt.getProcedureDef()[0];const Ft=vt.mutationToDom(!0);vt=Ts(Dt,vt.workspace);for(let yn=0,Mn;Mn=vt[yn];yn++){Dt=(Dt=Mn.mutationToDom())&&Yl(Dt),Mn.domToMutation&&Mn.domToMutation(Ft);var Kt=Mn.mutationToDom();Kt=Kt&&Yl(Kt),Dt!==Kt&&(Ao(!1),Fr(new(Vr(Qs))(Mn,"mutation",null,Dt,Kt)),Ao(Et))}},Vs=function(vt,Et){Et=Et.getAllBlocks(!1);for(let Ft=0;Ft<Et.length;Ft++){var Dt=Et[Ft];if(Dt.getProcedureDef&&(Dt=Dt.getProcedureDef())&&Du.equals(Dt[0],vt))return Et[Ft]}return null},xl=function(vt){return vt.isDynamic},Qu=function(){return YT},Ms=function(){ft("Blockly.blockRendering.debug.stopDebugger()","version 8","version 10","the debug renderer in @blockly/dev-tools (See https://www.npmjs.com/package/@blockly/dev-tools.)"),YT=!1},Hu=function(vt,Et){xo(Wr.RENDERER,vt,Et)},dm=function(vt){Hn(Wr.RENDERER,vt)},tO=function(){ft("Blockly.blockRendering.stopDebugger()","September 2021","September 2022","the debug renderer in @blockly/dev-tools (See https://www.npmjs.com/package/@blockly/dev-tools.)"),Ms()},nO=function(vt,Et,Dt){return vt=new(dr(Wr.RENDERER,vt))(vt),vt.init(Et,Dt),vt},fm=function(vt){bp(vt.getTargetWorkspace(),void 0,"String")},Ol=function(vt){bp(vt.getTargetWorkspace(),void 0,"Number")},rO=function(vt){bp(vt.getTargetWorkspace(),void 0,"Colour")},t_=function(vt){let Et=[],Dt=document.createElement("button");return Dt.setAttribute("text",$o.NEW_STRING_VARIABLE),Dt.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),Et.push(Dt),Dt=document.createElement("button"),Dt.setAttribute("text",$o.NEW_NUMBER_VARIABLE),Dt.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),Et.push(Dt),Dt=document.createElement("button"),Dt.setAttribute("text",$o.NEW_COLOUR_VARIABLE),Dt.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),Et.push(Dt),vt.registerButtonCallback("CREATE_VARIABLE_STRING",fm),vt.registerButtonCallback("CREATE_VARIABLE_NUMBER",Ol),vt.registerButtonCallback("CREATE_VARIABLE_COLOUR",rO),vt=Pp(vt),Et=Et.concat(vt)},Pp=function(vt){vt=vt.getAllVariables();const Et=[];if(0<vt.length){if(jr.variables_set_dynamic){var Dt=vt[vt.length-1];const Ft=No("block");Ft.setAttribute("type","variables_set_dynamic"),Ft.setAttribute("gap","24"),Ft.appendChild(Wo(Dt)),Et.push(Ft)}if(jr.variables_get_dynamic){vt.sort(Yy.compareByName);for(let Ft=0,Kt;Kt=vt[Ft];Ft++)Dt=No("block"),Dt.setAttribute("type","variables_get_dynamic"),Dt.setAttribute("gap","8"),Dt.appendChild(Wo(Kt)),Et.push(Dt)}}return Et},iO=function(vt){vt.resizeContents()},Ty=function(vt){const Et=Object.create(null),Dt=So(Wr.SERIALIZER,!0);for(const Ft in Dt){let Kt;const yn=(Kt=Dt[Ft])==null?void 0:Kt.save(vt);yn&&(Et[Ft]=yn)}return Et},op=function(vt,Et,{recordUndo:Dt=!1}={}){var Ft=So(Wr.SERIALIZER,!0);if(Ft){Ft=Object.entries(Ft).sort((yn,Mn)=>Mn[1].priority-yn[1].priority);var Kt=wo();Ao(Dt),(Dt=Ro())||io(!0),Jr(),Et instanceof _d&&Et.setResizesEnabled(!1);for(const[,yn]of Ft.reverse()){let Mn;(Mn=yn)==null||Mn.clear(Et)}for(let[yn,Mn]of Ft.reverse())if(vt[yn]){let qn;(qn=Mn)==null||qn.load(vt[yn],Et)}Et instanceof _d&&Et.setResizesEnabled(!0),Tr(),Fr(new(Vr(mO))(Et)),io(Dt),Ao(Kt)}},pm=function(vt){const Et={id:vt.getId(),name:vt.getName(),returnTypes:vt.getReturnTypes()};return vt.getParameters().length&&(Et.parameters=vt.getParameters().map(Dt=>Mu(Dt))),Et},Mu=function(vt){const Et={id:vt.getId(),name:vt.getName()};return vt.getTypes().length&&(Et.types=vt.getTypes()),Et},mm=function(vt,Et,Dt,Ft){if(vt=new vt(Ft,Dt.name,Dt.id).setReturnTypes(Dt.returnTypes),!Dt.parameters)return vt;for(const[Kt,yn]of Dt.parameters.entries())vt.insertParameter(Lp(Et,yn,Ft),Kt);return vt},Lp=function(vt,Et,Dt){return vt=new vt(Dt,Et.name,Et.id),Et.types&&vt.setTypes(Et.types),vt},gm=function(vt,Et,Dt){const Ft=Dt.getBoundingRectangle(),Kt=Ft.right-Ft.left,yn=uo(Et.top,Ft.top,Et.top+Et.height-(Ft.bottom-Ft.top))-Ft.top;let Mn=Et.left;return Et=Et.left+Et.width-Kt,vt.RTL?Mn=Math.min(Et,Mn):Et=Math.max(Mn,Et),(vt=uo(Mn,Ft.left,Et)-Ft.left)||yn?(Dt.moveBy(vt,yn),!0):!1},n_=function(vt){return Et=>{var Dt=vt.getMetricsManager();if(Dt.hasFixedEdges()&&!vt.isDragging()){var Ft;if(xS.indexOf((Ft=Et.type)!=null?Ft:"")!==-1){Ft=Dt.getScrollMetrics(!0);const Kt=oO(vt,Et);Kt&&(Dt=Ro(),io(Et.group),gm(vt,Ft,Kt)&&!Et.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),Dt!==null&&io(Dt))}else Et.type===c_&&Et.scale&&Et.oldScale&&Et.scale>Et.oldScale&&Ws(vt)}}},oO=function(vt,Et){let Dt=null;switch(Et.type){case $l:case Wl:(Dt=vt.getBlockById(Et.blockId))&&(Dt=Dt.getRootBlock());break;case u_:case Gp:Dt=vt.getCommentById(Et.commentId)}return Dt},Ws=function(vt){var Et=vt.getMetricsManager();if(Et.hasFixedEdges()&&!vt.isDragging()){Et=Et.getScrollMetrics(!0);var Dt=vt.getTopBoundedElements();for(let Ft=0,Kt;Kt=Dt[Ft];Ft++)gm(vt,Et,Kt)}},sp=function(vt,Et){if(typeof vt=="string"&&(vt=document.getElementById(vt)||document.querySelector(vt)),!vt||!Kr(document,vt))throw Error("Error: container is not in current document.");Et=new Ju(Et||{});const Dt=document.createElement("div");Dt.className="injectionDiv",Dt.tabIndex=0,ts(Dt,ps.LABEL,$o.WORKSPACE_ARIA_LABEL),vt.appendChild(Dt),vt=nu(Dt,Et);const Ft=new RE(Dt),Kt=new AE(Dt),yn=sO(vt,Et,Ft,Kt);return Cl(yn),Rn(yn),Yn(yn),Dt.addEventListener("focusin",function(){Rn(yn)}),yn},nu=function(vt,Et){vt.setAttribute("dir","LTR"),ks(Et.hasCss,Et.pathToMedia),vt=In(ar.SVG,{xmlns:Vl,"xmlns:html":yu,"xmlns:xlink":iu,version:"1.1",class:"blocklySvg",tabindex:"0"},vt);const Dt=In(ar.DEFS,{},vt),Ft=String(Math.random()).substring(2);return Et.gridPattern=m$.createDom(Ft,Et.gridOptions,Dt),vt},sO=function(vt,Et,Dt,Ft){Et.parentWorkspace=null,Et=new _d(Et,Dt,Ft),Dt=Et.options,Et.scale=Dt.zoomOptions.startScale,vt.appendChild(Et.createDom("blocklyMainBackground")),Ft=Et.getInjectionDiv();var Kt=Et.getRenderer().getClassName();return Kt&&ir(Ft,Kt),(Kt=Et.getTheme().getClassName())&&ir(Ft,Kt),!Dt.hasCategories&&Dt.languageTree&&(Ft=Et.addFlyout(ar.SVG),Gr(Ft,vt)),Dt.hasTrashcan&&Et.addTrashcan(),Dt.zoomOptions&&Dt.zoomOptions.controls&&Et.addZoomControls(),Et.getThemeManager().subscribe(vt,"workspaceBackgroundColour","background-color"),Et.translate(0,0),Et.addChangeListener(n_(Et)),Yn(Et),Fl(),wr(),Pm(),Et},Cl=function(vt){const Et=vt.options;var Dt=vt.getParentSvg();if(Zt(Dt.parentNode,"contextmenu",null,function(Ft){hn(Ft)||Ft.preventDefault()}),Dt=Zt(window,"resize",null,function(){vt.hideChaff(!0),Yn(vt),Ws(vt)}),vt.setResizeHandlerWrapper(Dt),Ey(),Et.languageTree){Dt=vt.getToolbox();const Ft=vt.getFlyout(!0);Dt?Dt.init():Ft&&(Ft.init(vt),Ft.show(Et.languageTree),typeof Ft.scrollToStart=="function"&&Ft.scrollToStart())}Et.hasTrashcan&&vt.trashcan.init(),Et.zoomOptions&&Et.zoomOptions.controls&&vt.zoomControls_.init(),Et.moveOptions&&Et.moveOptions.scrollbars?(vt.scrollbar=new I$(vt,Et.moveOptions.scrollbars===!0||!!Et.moveOptions.scrollbars.horizontal,Et.moveOptions.scrollbars===!0||!!Et.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),vt.scrollbar.resize()):vt.setMetrics({x:.5,y:.5}),Et.hasSounds&&xy(Et.pathToMedia,vt)},pv=function(vt){const Et=xn();Et&&!(hn(vt)||Et.rendered&&!Et.isVisible())&&es.registry.onKeyDown(Et,vt)},Ey=function(){IE||(Zt(document,"scroll",null,function(){const vt=Tn();for(let Et=0,Dt;Dt=vt[Et];Et++)Dt instanceof _d&&Dt.updateInverseScreenCTM()}),Zt(document,"keydown",null,pv),ln(document,"touchend",null,Tt),ln(document,"touchcancel",null,Tt),vo&&Zt(window,"orientationchange",document,function(){Yn(xn())})),IE=!0},xy=function(vt,Et){function Dt(){for(;Kt.length;)cn(Kt.pop());Ft.preload()}const Ft=Et.getAudioManager();Ft.load([vt+"click.mp3",vt+"click.wav",vt+"click.ogg"],"click"),Ft.load([vt+"disconnect.wav",vt+"disconnect.mp3",vt+"disconnect.ogg"],"disconnect"),Ft.load([vt+"delete.mp3",vt+"delete.ogg",vt+"delete.wav"],"delete");const Kt=[];Kt.push(Zt(document,"pointermove",null,Dt,!0)),Kt.push(Zt(document,"touchstart",null,Dt,!0))},mv=function(vt,Et,Dt){if(vt=vt.getProcedureMap().get(Et),!vt)throw Error("Cannot rename the parameter of a procedure that does not exist in the procedure map");return vt.getParameters().find(Ft=>Ft.getId()===Dt)},zu=function(){Ko.registry.register({displayText(){return $o.UNDO},preconditionFn(vt){return 0<vt.workspace.getUndoStack().length?"enabled":"disabled"},callback(vt){vt.workspace.undo(!1)},scopeType:Ko.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},wy=function(){Ko.registry.register({displayText(){return $o.REDO},preconditionFn(vt){return 0<vt.workspace.getRedoStack().length?"enabled":"disabled"},callback(vt){vt.workspace.undo(!0)},scopeType:Ko.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},Cy=function(){Ko.registry.register({displayText(){return $o.CLEAN_UP},preconditionFn(vt){return vt.workspace.isMovable()?1<vt.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback(vt){vt.workspace.cleanUp()},scopeType:Ko.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},aO=function(vt,Et){function Dt(yn){Kt--,yn.setCollapsed(vt),Kt===0&&io(!1)}let Ft=0,Kt=0;io(!0);for(let yn=0;yn<Et.length;yn++){let Mn=Et[yn];for(;Mn;)Kt++,setTimeout(Dt.bind(null,Mn),Ft),Mn=Mn.getNextBlock(),Ft+=10}},ap=function(){Ko.registry.register({displayText(){return $o.COLLAPSE_ALL},preconditionFn(vt){if(vt.workspace.options.collapse){vt=vt.workspace.getTopBlocks(!1);for(let Et=0;Et<vt.length;Et++){let Dt=vt[Et];for(;Dt;){if(!Dt.isCollapsed())return"enabled";Dt=Dt.getNextBlock()}}return"disabled"}return"hidden"},callback(vt){aO(!0,vt.workspace.getTopBlocks(!0))},scopeType:Ko.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},Ay=function(){Ko.registry.register({displayText(){return $o.EXPAND_ALL},preconditionFn(vt){if(vt.workspace.options.collapse){vt=vt.workspace.getTopBlocks(!1);for(let Et=0;Et<vt.length;Et++){let Dt=vt[Et];for(;Dt;){if(Dt.isCollapsed())return"enabled";Dt=Dt.getNextBlock()}}return"disabled"}return"hidden"},callback(vt){aO(!1,vt.workspace.getTopBlocks(!0))},scopeType:Ko.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},Ry=function(vt,Et){if(vt.isDeletable())Array.prototype.push.apply(Et,vt.getDescendants(!1));else{vt=vt.getChildren(!1);for(let Dt=0;Dt<vt.length;Dt++)Ry(vt[Dt],Et)}},r_=function(vt){const Et=[];vt=vt.getTopBlocks(!0);for(let Dt=0;Dt<vt.length;Dt++)Ry(vt[Dt],Et);return Et},Dp=function(vt,Et){io(Et);const Dt=vt.shift();Dt&&(Dt.isDeadOrDying()?Dp(vt,Et):(Dt.dispose(!1,!0),setTimeout(Dp,10,vt,Et))),io(!1)},gv=function(){Ko.registry.register({displayText(vt){return vt.workspace?(vt=r_(vt.workspace).length,vt===1?$o.DELETE_BLOCK:$o.DELETE_X_BLOCKS.replace("%1",String(vt))):""},preconditionFn(vt){return vt.workspace&&0<r_(vt.workspace).length?"enabled":"disabled"},callback(vt){if(vt.workspace){vt.workspace.cancelCurrentGesture();var Et=r_(vt.workspace),Dt=Eo();2>Et.length?Dp(Et,Dt):jp($o.DELETE_ALL_BLOCKS.replace("%1",String(Et.length)),function(Ft){Ft&&Dp(Et,Dt)})}},scopeType:Ko.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},dS=function(){zu(),wy(),Cy(),ap(),Ay(),gv()},Iy=function(){Ko.registry.register({displayText(){return $o.DUPLICATE_BLOCK},preconditionFn(vt){return vt=vt.block,!vt.isInFlyout&&vt.isDeletable()&&vt.isMovable()?vt.isDuplicatable()?"enabled":"disabled":"hidden"},callback(vt){vt.block&&cm(vt.block)},scopeType:Ko.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},ky=function(){Ko.registry.register({displayText(vt){return vt.block.getCommentIcon()?$o.REMOVE_COMMENT:$o.ADD_COMMENT},preconditionFn(vt){return vt=vt.block,!vt.isInFlyout&&vt.workspace.options.comments&&!vt.isCollapsed()&&vt.isEditable()?"enabled":"hidden"},callback(vt){vt=vt.block,vt.getCommentIcon()?vt.setCommentText(null):vt.setCommentText("")},scopeType:Ko.ScopeType.BLOCK,id:"blockComment",weight:2})},lp=function(){Ko.registry.register({displayText(vt){return vt.block.getInputsInline()?$o.EXTERNAL_INPUTS:$o.INLINE_INPUTS},preconditionFn(vt){if(vt=vt.block,!vt.isInFlyout&&vt.isMovable()&&!vt.isCollapsed()){for(let Et=1;Et<vt.inputList.length;Et++)if(vt.inputList[Et-1].type!==Do.STATEMENT&&vt.inputList[Et].type!==Do.STATEMENT)return"enabled"}return"hidden"},callback(vt){vt.block.setInputsInline(!vt.block.getInputsInline())},scopeType:Ko.ScopeType.BLOCK,id:"blockInline",weight:3})},_v=function(){Ko.registry.register({displayText(vt){return vt.block.isCollapsed()?$o.EXPAND_BLOCK:$o.COLLAPSE_BLOCK},preconditionFn(vt){return vt=vt.block,!vt.isInFlyout&&vt.isMovable()&&vt.workspace.options.collapse?"enabled":"hidden"},callback(vt){vt.block.setCollapsed(!vt.block.isCollapsed())},scopeType:Ko.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},cp=function(){Ko.registry.register({displayText(vt){return vt.block.isEnabled()?$o.DISABLE_BLOCK:$o.ENABLE_BLOCK},preconditionFn(vt){return vt=vt.block,!vt.isInFlyout&&vt.workspace.options.disable&&vt.isEditable()?vt.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback(vt){vt=vt.block;const Et=Ro();Et||io(!0),vt.setEnabled(!vt.isEnabled()),Et||io(!1)},scopeType:Ko.ScopeType.BLOCK,id:"blockDisable",weight:5})},My=function(){Ko.registry.register({displayText(vt){var Et=vt.block;return vt=Et.getDescendants(!1).length,(Et=Et.getNextBlock())&&(vt-=Et.getDescendants(!1).length),vt===1?$o.DELETE_BLOCK:$o.DELETE_X_BLOCKS.replace("%1",String(vt))},preconditionFn(vt){return!vt.block.isInFlyout&&vt.block.isDeletable()?"enabled":"hidden"},callback(vt){vt.block&&vt.block.checkAndDelete()},scopeType:Ko.ScopeType.BLOCK,id:"blockDelete",weight:6})},yl=function(){Ko.registry.register({displayText(){return $o.HELP},preconditionFn(vt){return vt=vt.block,(typeof vt.helpUrl=="function"?vt.helpUrl():vt.helpUrl)?"enabled":"hidden"},callback(vt){vt.block.showHelp()},scopeType:Ko.ScopeType.BLOCK,id:"blockHelp",weight:7})},fS=function(){Iy(),ky(),lp(),_v(),cp(),My(),yl()},Py=function(){dS(),fS()},pS=function(vt){const Et=[];vt=vt.getDescendants(!1);for(let Dt=0,Ft;Ft=vt[Dt];Dt++){const Kt=Ft.getIcons();for(let yn=0;yn<Kt.length;yn++){const Mn={location:Kt[yn].getIconLocation(),icon:Kt[yn]};Et.push(Mn)}}return Et},mS=function(vt){xn().hideChaff(vt)},Ov=function(vt){ft("Blockly.resizeSvgContents","December 2021","December 2022","Blockly.WorkspaceSvg.resizeSvgContents"),iO(vt)},yv=function(vt){ft("Blockly.copy","December 2021","December 2022","Blockly.clipboard.copy"),Ym(vt)},gS=function(){return ft("Blockly.paste","December 2021","December 2022","Blockly.clipboard.paste"),!!lm()},ru=function(vt){ft("Blockly.duplicate","December 2021","December 2022","Blockly.clipboard.duplicate"),cm(vt)},Ly=function(vt){return ft("Blockly.isNumber","December 2021","December 2022","Blockly.utils.string.isNumber"),Mm(vt)},_S=function(vt){return ft("Blockly.hueToHex","December 2021","December 2022","Blockly.utils.colour.hueToHex"),Lm(vt)},up=function(vt,Et,Dt,Ft){return ft("Blockly.bindEvent_","December 2021","December 2022","Blockly.browserEvents.bind"),ln(vt,Et,Dt,Ft)},lO=function(vt){return ft("Blockly.unbindEvent_","December 2021","December 2022","Blockly.browserEvents.unbind"),cn(vt)},Np=function(vt,Et,Dt,Ft,Kt,yn){return ft("Blockly.bindEventWithChecks_","December 2021","December 2022","Blockly.browserEvents.conditionalBind"),Zt(vt,Et,Dt,Ft,Kt)},_o=_o||{};_o.scope={},_o.ASSUME_ES5=!1,_o.ASSUME_NO_NATIVE_MAP=!1,_o.ASSUME_NO_NATIVE_SET=!1,_o.SIMPLE_FROUND_POLYFILL=!1,_o.ISOLATE_POLYFILLS=!1,_o.FORCE_POLYFILL_PROMISE=!1,_o.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,_o.defineProperty=_o.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(vt,Et,Dt){return vt==Array.prototype||vt==Object.prototype||(vt[Et]=Dt.value),vt},_o.getGlobal=function(vt){vt=[typeof globalThis=="object"&&globalThis,vt,typeof window=="object"&&window,typeof self=="object"&&self,typeof commonjsGlobal=="object"&&commonjsGlobal];for(var Et=0;Et<vt.length;++Et){var Dt=vt[Et];if(Dt&&Dt.Math==Math)return Dt}throw Error("Cannot find global object")},_o.global=_o.getGlobal(this),_o.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",_o.TRUST_ES6_POLYFILLS=!_o.ISOLATE_POLYFILLS||_o.IS_SYMBOL_NATIVE,_o.polyfills={},_o.propertyToPolyfillSymbol={},_o.POLYFILL_PREFIX="$jscp$",_o.polyfill=function(vt,Et,Dt,Ft){Et&&(_o.ISOLATE_POLYFILLS?_o.polyfillIsolated(vt,Et,Dt,Ft):_o.polyfillUnisolated(vt,Et,Dt,Ft))},_o.polyfillUnisolated=function(vt,Et,Dt,Ft){for(Dt=_o.global,vt=vt.split("."),Ft=0;Ft<vt.length-1;Ft++){var Kt=vt[Ft];if(!(Kt in Dt))return;Dt=Dt[Kt]}vt=vt[vt.length-1],Ft=Dt[vt],Et=Et(Ft),Et!=Ft&&Et!=null&&_o.defineProperty(Dt,vt,{configurable:!0,writable:!0,value:Et})},_o.polyfillIsolated=function(vt,Et,Dt,Ft){var Kt=vt.split(".");vt=Kt.length===1,Ft=Kt[0],Ft=!vt&&Ft in _o.polyfills?_o.polyfills:_o.global;for(var yn=0;yn<Kt.length-1;yn++){var Mn=Kt[yn];if(!(Mn in Ft))return;Ft=Ft[Mn]}Kt=Kt[Kt.length-1],Dt=_o.IS_SYMBOL_NATIVE&&Dt==="es6"?Ft[Kt]:null,Et=Et(Dt),Et!=null&&(vt?_o.defineProperty(_o.polyfills,Kt,{configurable:!0,writable:!0,value:Et}):Et!==Dt&&(_o.propertyToPolyfillSymbol[Kt]===void 0&&(Dt=1e9*Math.random()>>>0,_o.propertyToPolyfillSymbol[Kt]=_o.IS_SYMBOL_NATIVE?_o.global.Symbol(Kt):_o.POLYFILL_PREFIX+Dt+"$"+Kt),_o.defineProperty(Ft,_o.propertyToPolyfillSymbol[Kt],{configurable:!0,writable:!0,value:Et})))},_o.polyfill("globalThis",function(vt){return vt||_o.global},"es_2020","es3"),_o.polyfill("Object.getOwnPropertyDescriptors",function(vt){return vt||function(Et){for(var Dt={},Ft=Reflect.ownKeys(Et),Kt=0;Kt<Ft.length;Kt++)Dt[Ft[Kt]]=Object.getOwnPropertyDescriptor(Et,Ft[Kt]);return Dt}},"es8","es5"),_o.arrayIteratorImpl=function(vt){var Et=0;return function(){return Et<vt.length?{done:!1,value:vt[Et++]}:{done:!0}}},_o.arrayIterator=function(vt){return{next:_o.arrayIteratorImpl(vt)}},_o.initSymbol=function(){},_o.iteratorPrototype=function(vt){return vt={next:vt},vt[Symbol.iterator]=function(){return this},vt},_o.iteratorFromArray=function(vt,Et){vt instanceof String&&(vt+="");var Dt=0,Ft=!1,Kt={next:function(){if(!Ft&&Dt<vt.length){var yn=Dt++;return{value:Et(yn,vt[yn]),done:!1}}return Ft=!0,{done:!0,value:void 0}}};return Kt[Symbol.iterator]=function(){return Kt},Kt},_o.polyfill("Array.prototype.values",function(vt){return vt||function(){return _o.iteratorFromArray(this,function(Et,Dt){return Dt})}},"es8","es3"),_o.owns=function(vt,Et){return Object.prototype.hasOwnProperty.call(vt,Et)},_o.polyfill("Object.values",function(vt){return vt||function(Et){var Dt=[],Ft;for(Ft in Et)_o.owns(Et,Ft)&&Dt.push(Et[Ft]);return Dt}},"es8","es3"),_o.polyfill("Array.prototype.flat",function(vt){return vt||function(Et){Et=Et===void 0?1:Et;for(var Dt=[],Ft=0;Ft<this.length;Ft++){var Kt=this[Ft];Array.isArray(Kt)&&0<Et?(Kt=Array.prototype.flat.call(Kt,Et-1),Dt.push.apply(Dt,Kt)):Dt.push(Kt)}return Dt}},"es9","es5"),_o.polyfill("Object.entries",function(vt){return vt||function(Et){var Dt=[],Ft;for(Ft in Et)_o.owns(Et,Ft)&&Dt.push([Ft,Et[Ft]]);return Dt}},"es8","es3");var Zs=Zs||{};Zs.global=globalThis||root,Zs.define=function(vt,Et){return Et},Zs.DEBUG=!1,Zs.DISALLOW_TEST_ONLY_CODE=!Zs.DEBUG,Zs.provide=function(vt){},Zs.module=function(vt){},Zs.module.get=function(vt){},Zs.module.declareLegacyNamespace=function(){},Zs.setTestOnly=function(vt){if(Zs.DISALLOW_TEST_ONLY_CODE)throw vt=vt||"",Error("Importing test-only code into non-debug environment"+(vt?": "+vt:"."))},Zs.require=function(vt){},Zs.requireType=function(vt){};var Es={};Es.warn=ft;var OS=750,Dy="ontouchstart"in globalThis||!!(globalThis.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!globalThis.navigator||!globalThis.navigator.maxTouchPoints&&!globalThis.navigator.msMaxTouchPoints),i_=null,hp={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]},o_=0,Sl={};Sl.TOUCH_ENABLED=Dy,Sl.TOUCH_MAP=hp,Sl.checkTouchIdentifier=kt,Sl.clearTouchIdentifier=Ct,Sl.getTouchIdentifierFromEvent=Rt,Sl.isMouseOrTouchEvent=Bt,Sl.isTouchEvent=Ut,Sl.longStart=St,Sl.longStop=Tt,Sl.setClientFromTouch=Nt,Sl.shouldHandleEvent=At,Sl.splitEventByTouches=zt;var Ny,vv,Wt,Ht,mn,On,bn,An,Xn,lr;(function(vt){function Et(Ft){return Dt.indexOf(Ft.toUpperCase())!==-1}Ny=vt;const Dt=Ny.toUpperCase();vv=Et("JavaFX"),Wt=Et("WebKit"),Ht=Et("Gecko")&&!Wt,mn=Et("Android"),vt=globalThis.navigator&&globalThis.navigator.maxTouchPoints,On=Et("iPad")||Et("Macintosh")&&0<vt,bn=Et("iPhone")&&!On,An=Et("Macintosh"),Xn=On||mn&&!Et("Mobile")||Et("Silk"),lr=!Xn&&(bn||mn)})(globalThis.navigator&&globalThis.navigator.userAgent||"");var Er=Ny,Hr=vv,so=Ht,Io=mn,vo=On,rs=bn,Oo=An,Bs=lr,As={};As.ANDROID=Io,As.GECKO=so,As.IPAD=vo,As.IPHONE=rs,As.JavaFx=Hr,As.MAC=Oo,As.MOBILE=Bs,As.raw=Er;var gr=40,cr=125,yr={};yr.bind=ln,yr.conditionalBind=Zt,yr.getScrollDeltaPixels=gn,yr.isRightButton=pn,yr.isTargetInput=hn,yr.mouseToSvg=dn,yr.unbind=cn;var jr=Object.create(null),fo,Fo,Po,Xo,fs,zo;fo=Object.create(null),Po=null,fs=[],zo={defineBlocksWithJsonArrayInternal:Un},lt.module$build$src$core$common={},lt.module$build$src$core$common.TEST_ONLY=zo,lt.module$build$src$core$common.createBlockDefinitionsFromJsonArray=Vn,lt.module$build$src$core$common.defineBlocks=sr,lt.module$build$src$core$common.defineBlocksWithJsonArray=Ln,lt.module$build$src$core$common.draggingConnections=fs,lt.module$build$src$core$common.getAllWorkspaces=Tn,lt.module$build$src$core$common.getBlockTypeCounts=Qn,lt.module$build$src$core$common.getMainWorkspace=xn,lt.module$build$src$core$common.getParentContainer=Wn,lt.module$build$src$core$common.getSelected=Pn,lt.module$build$src$core$common.getWorkspaceById=vn,lt.module$build$src$core$common.registerWorkspace=Cn,lt.module$build$src$core$common.setMainWorkspace=Rn,lt.module$build$src$core$common.setParentContainer=zn,lt.module$build$src$core$common.setSelected=Nn,lt.module$build$src$core$common.svgResize=Yn,lt.module$build$src$core$common.unregisterWorkpace=$n;var Vl="http://www.w3.org/2000/svg",yu="http://www.w3.org/1999/xhtml",iu="http://www.w3.org/1999/xlink",dp;(function(vt){vt[vt.ELEMENT_NODE=1]="ELEMENT_NODE",vt[vt.TEXT_NODE=3]="TEXT_NODE",vt[vt.COMMENT_NODE=8]="COMMENT_NODE",vt[vt.DOCUMENT_POSITION_CONTAINED_BY=16]="DOCUMENT_POSITION_CONTAINED_BY"})(dp||(dp={}));var ju=null,yS=0,bv=null,Fs={};Fs.HTML_NS=yu,Fs.NodeType=dp,Fs.SVG_NS=Vl,Fs.XLINK_NS=iu,Fs.addClass=ir,Fs.containsNode=Kr,Fs.createSvgElement=In,Fs.getFastTextWidth=Qr,Fs.getFastTextWidthWithSizeString=oo,Fs.getTextWidth=Ir,Fs.hasClass=Pr,Fs.insertAfter=Gr,Fs.measureFontMetrics=zr,Fs.removeClass=Jn,Fs.removeClasses=pr,Fs.removeNode=br,Fs.setCssTransform=Xr,Fs.startTextWidthCache=Jr,Fs.stopTextWidthCache=Tr;var Sv={};Sv.clamp=uo,Sv.toDegrees=co,Sv.toRadians=to;var xs=class{constructor(vt,Et,Dt,Ft){this.top=vt,this.bottom=Et,this.left=Dt,this.right=Ft}contains(vt,Et){return vt>=this.left&&vt<=this.right&&Et>=this.top&&Et<=this.bottom}intersects(vt){return!(this.left>vt.right||this.right<vt.left||this.top>vt.bottom||this.bottom<vt.top)}},Zr=class{constructor(vt,Et){this.x=vt,this.y=Et}clone(){return new Zr(this.x,this.y)}scale(vt){return this.x*=vt,this.y*=vt,this}translate(vt,Et){return this.x+=vt,this.y+=Et,this}static equals(vt,Et){return vt===Et?!0:vt&&Et?vt.x===Et.x&&vt.y===Et.y:!1}static distance(vt,Et){const Dt=vt.x-Et.x;return vt=vt.y-Et.y,Math.sqrt(Dt*Dt+vt*vt)}static magnitude(vt){return Math.sqrt(vt.x*vt.x+vt.y*vt.y)}static difference(vt,Et){return new Zr(vt.x-Et.x,vt.y-Et.y)}static sum(vt,Et){return new Zr(vt.x+Et.x,vt.y+Et.y)}},qs=class{constructor(vt,Et){this.width=vt,this.height=Et}static equals(vt,Et){return vt===Et?!0:vt&&Et?vt.width===Et.width&&vt.height===Et.height:!1}},J$={getSizeInternal:Vo},fp={};fp.TEST_ONLY=J$,fp.getBorderBox=Br,fp.getCascadedStyle=rr,fp.getComputedStyle=Gn,fp.getContainerOffsetToScrollInto=Yr,fp.getPageOffset=Or,fp.getSize=Mo,fp.getViewportPageOffset=Ar,fp.scrollIntoContainerView=fr;var By=16,vS=1,eT=12,bS=16,$v=.25,SS=null,s_=null,cO="",uO="",Zo,hO,a_,$S=null,_m=null,tT=null,TS={getBoundsInfo:function(){const vt=Or($S),Et=Mo($S);return{left:vt.x,right:vt.x+Et.width,top:vt.y,bottom:vt.y+Et.height,width:Et.width,height:Et.height}},getPositionMetrics:function(vt,Et,Dt,Ft){const Kt=TS.getBoundsInfo(),yn=Mo(Zo);return Et+yn.height<Kt.bottom?ro(vt,Et,Kt,yn):Ft-yn.height>Kt.top?ho(Dt,Ft,Kt,yn):Et+yn.height<document.documentElement.clientHeight?ro(vt,Et,Kt,yn):Ft-yn.height>document.documentElement.clientTop?ho(Dt,Ft,Kt,yn):ns(vt,Kt,yn)}},Rs={};Rs.ANIMATION_TIME=$v,Rs.ARROW_HORIZONTAL_PADDING=eT,Rs.ARROW_SIZE=By,Rs.BORDER_SIZE=vS,Rs.PADDING_Y=bS,Rs.TEST_ONLY=TS,Rs.clearContent=Dr,Rs.createDom=wr,Rs.getContentDiv=Sr,Rs.getOwner=Kn,Rs.getPositionX=ls,Rs.hide=ss,Rs.hideIfOwner=Gs,Rs.hideWithoutAnimation=cs,Rs.isVisible=Ds,Rs.repositionForWindowResize=PO,Rs.setBoundsElement=ao,Rs.setColour=En,Rs.show=Nr,Rs.showPositionedByBlock=Dn,Rs.showPositionedByField=Zn;var Om=Object.create(null),QE={typeMap:Om},Tv=Object.create(null),Bp="default",Wr=class{constructor(vt){this.name=vt}toString(){return this.name}};Wr.CONNECTION_CHECKER=new Wr("connectionChecker"),Wr.CURSOR=new Wr("cursor"),Wr.EVENT=new Wr("event"),Wr.FIELD=new Wr("field"),Wr.RENDERER=new Wr("renderer"),Wr.TOOLBOX=new Wr("toolbox"),Wr.THEME=new Wr("theme"),Wr.TOOLBOX_ITEM=new Wr("toolboxItem"),Wr.FLYOUTS_VERTICAL_TOOLBOX=new Wr("flyoutsVerticalToolbox"),Wr.FLYOUTS_HORIZONTAL_TOOLBOX=new Wr("flyoutsHorizontalToolbox"),Wr.METRICS_MANAGER=new Wr("metricsManager"),Wr.BLOCK_DRAGGER=new Wr("blockDragger"),Wr.SERIALIZER=new Wr("serializer");var Xu={};Xu.DEFAULT=Bp,Xu.TEST_ONLY=QE,Xu.Type=Wr,Xu.getAllItems=So,Xu.getClass=dr,Xu.getClassFromOptions=bo,Xu.getObject=Rr,Xu.hasItem=xr,Xu.register=xo,Xu.unregister=Hn;var nT="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",rT={genUid:()=>{const vt=nT.length,Et=[];for(let Dt=0;20>Dt;Dt++)Et[Dt]=nT.charAt(Math.random()*vt);return Et.join("")}},HE=0,Ev={};Ev.TEST_ONLY=rT,Ev.genUid=Eo,Ev.getNextUniqueId=Lo;var iT="",Fy=!0,ES=0,$l="create",pp="delete",Qs="change",Wl="move",l_="var_create",dO="var_delete",Gy="var_rename",Uy="ui",fO="drag",ym="selected",vm="click",Vy="marker_move",Fp="bubble_open",Wy="trashcan_open",Qy="toolbox_item_select",Hy="theme_change",c_="viewport_change",u_="comment_create",pO="comment_delete",zy="comment_change",Gp="comment_move",mO="finished_loading",xv="procedure_create",jy="procedure_delete",wv="procedure_rename",Cv="procedure_enable",Av="procedure_change_return",Rv="procedure_parameter_create",Iv="procedure_parameter_delete",kv="procedure_parameter_rename",xS=[$l,Wl,u_,Gp],gO=[],wS={FIRE_QUEUE:gO,fireNow:Hs,fireInternal:_s,setGroupInternal:S_},To={};To.BLOCK_CHANGE=Qs,To.BLOCK_CREATE=$l,To.BLOCK_DELETE=pp,To.BLOCK_DRAG=fO,To.BLOCK_MOVE=Wl,To.BUBBLE_OPEN=Fp,To.BUMP_EVENTS=xS,To.CHANGE=Qs,To.CLICK=vm,To.COMMENT_CHANGE=zy,To.COMMENT_CREATE=u_,To.COMMENT_DELETE=pO,To.COMMENT_MOVE=Gp,To.CREATE=$l,To.DELETE=pp,To.FINISHED_LOADING=mO,To.MARKER_MOVE=Vy,To.MOVE=Wl,To.PROCEDURE_CHANGE_RETURN=Av,To.PROCEDURE_CREATE=xv,To.PROCEDURE_DELETE=jy,To.PROCEDURE_ENABLE=Cv,To.PROCEDURE_PARAMETER_CREATE=Rv,To.PROCEDURE_PARAMETER_DELETE=Iv,To.PROCEDURE_PARAMETER_RENAME=kv,To.PROCEDURE_RENAME=wv,To.SELECTED=ym,To.TEST_ONLY=wS,To.THEME_CHANGE=Hy,To.TOOLBOX_ITEM_SELECT=Qy,To.TRASHCAN_OPEN=Wy,To.UI=Uy,To.VAR_CREATE=l_,To.VAR_DELETE=dO,To.VAR_RENAME=Gy,To.VIEWPORT_CHANGE=c_,To.clearPendingUndo=au,To.disable=Bo,To.disableOrphans=Yo,To.enable=yo,To.filter=El,To.fire=Fr,To.fromJson=lu,To.get=Vr,To.getDescendantIds=Xl,To.getGroup=Ro,To.getRecordUndo=wo,To.isEnabled=os,To.setGroup=io,To.setRecordUndo=Ao;var Do;(function(vt){vt[vt.VALUE=1]="VALUE",vt[vt.STATEMENT=3]="STATEMENT",vt[vt.DUMMY=5]="DUMMY"})(Do||(Do={})),lt.module$build$src$core$input_types={},lt.module$build$src$core$input_types.inputTypes=Do;var h_,Mv,Pv,CS;({document:h_,DOMParser:Mv,XMLSerializer:Pv}=globalThis),CS="https://developers.google.com/blockly/xml",lt.module$build$src$core$utils$xml={},lt.module$build$src$core$utils$xml.NAME_SPACE=CS,lt.module$build$src$core$utils$xml.createElement=No,lt.module$build$src$core$utils$xml.createTextNode=Ml,lt.module$build$src$core$utils$xml.domToText=xm,lt.module$build$src$core$utils$xml.getDocument=ws,lt.module$build$src$core$utils$xml.injectDependencies=Os,lt.module$build$src$core$utils$xml.setDocument=zs,lt.module$build$src$core$utils$xml.textToDomDocument=Js;var oT=function(vt,Et){window.alert(vt),Et&&Et()},sT=function(vt,Et){Et(window.confirm(vt))},aT=function(vt,Et,Dt){Dt(window.prompt(vt,Et))},lT={confirmInternal:C0},ou={};ou.TEST_ONLY=lT,ou.alert=wm,ou.confirm=jp,ou.prompt=LO,ou.setAlert=w0,ou.setConfirm=cu,ou.setPrompt=tS;var $o,AS;$o=Object.create(null),AS=function(vt){Object.keys(vt).forEach(function(Et){$o[Et]=vt[Et]})},lt.module$build$src$core$msg={},lt.module$build$src$core$msg.Msg=$o,lt.module$build$src$core$msg.setLocale=AS;var d_=class{constructor(){this.workspaceId=void 0,this.isUiEvent=!1,this.type="",this.group=Ro(),this.recordUndo=wo()}toJson(){return{type:this.type,group:this.group}}fromJson(vt){this.isBlank=!1,this.group=vt.group||""}static fromJson(vt,Et,Dt){return ft("Blockly.Events.Abstract.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),Dt.isBlank=!1,Dt.group=vt.group||"",Dt.workspaceId=Et.id,Dt}isNull(){return!1}run(vt){}getEventWorkspace_(){let vt;if(this.workspaceId&&(vt=vn(this.workspaceId)),!vt)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return vt}},Xy=class extends d_{constructor(vt){super(),this.isBlank=typeof vt>"u",vt&&(this.varId=vt.getId(),this.workspaceId=vt.workspace.id)}toJson(){const vt=super.toJson();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");return vt.varId=this.varId,vt}fromJson(vt){ft("Blockly.Events.VarBase.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(vt),this.varId=vt.varId}static fromJson(vt,Et,Dt){return Et=super.fromJson(vt,Et,Dt??new Xy),Et.varId=vt.varId,Et}},RS=class extends Xy{constructor(vt){super(vt),this.type=l_,vt&&(this.varType=vt.type,this.varName=vt.name)}toJson(){const vt=super.toJson();if(!this.varType)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return vt.varType=this.varType,vt.varName=this.varName,vt}fromJson(vt){ft("Blockly.Events.VarCreate.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(vt),this.varType=vt.varType,this.varName=vt.varName}static fromJson(vt,Et,Dt){return Et=super.fromJson(vt,Et,Dt??new RS),Et.varType=vt.varType,Et.varName=vt.varName,Et}run(vt){const Et=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");vt?Et.createVariable(this.varName,this.varType,this.varId):Et.deleteVariableById(this.varId)}};xo(Wr.EVENT,l_,RS);var Yy=class{constructor(vt,Et,Dt,Ft){this.workspace=vt,this.name=Et,this.type=Dt||"",this.id_=Ft||Eo()}getId(){return this.id_}static compareByName(vt,Et){return vt.name.localeCompare(Et.name,void 0,{sensitivity:"base"})}},Lv,Dv,IS;Lv="VARIABLE",Dv="ijkmnopqrstuvwxyzabcdefgh",IS={generateUniqueNameInternal:nS},lt.module$build$src$core$variables={},lt.module$build$src$core$variables.CATEGORY_NAME=Lv,lt.module$build$src$core$variables.TEST_ONLY=IS,lt.module$build$src$core$variables.VAR_LETTER_OPTIONS=Dv,lt.module$build$src$core$variables.allDeveloperVariables=$_,lt.module$build$src$core$variables.allUsedVarModels=DO,lt.module$build$src$core$variables.createVariableButtonHandler=bp,lt.module$build$src$core$variables.flyoutCategory=Xp,lt.module$build$src$core$variables.flyoutCategoryBlocks=Yp,lt.module$build$src$core$variables.generateUniqueName=Cm,lt.module$build$src$core$variables.generateUniqueNameFromOptions=NO,lt.module$build$src$core$variables.generateVariableFieldDom=Wo,lt.module$build$src$core$variables.getAddedVariables=BO,lt.module$build$src$core$variables.getOrCreateVariablePackage=Am,lt.module$build$src$core$variables.getVariable=Zp,lt.module$build$src$core$variables.nameUsedWithAnyType=E_,lt.module$build$src$core$variables.promptName=Sp,lt.module$build$src$core$variables.renameVariable=T_;var mp=class{constructor(vt,Et,Dt,Ft,Kt){this.workspace=vt,this.editable_=this.movable_=this.deletable_=!0,this.disposed_=!1,this.isComment=!0,this.id=Kt&&!vt.getCommentById(Kt)?Kt:Eo(),vt.addTopComment(this),this.xy_=new Zr(0,0),this.height_=Dt,this.width_=Ft,this.RTL=vt.RTL,this.content_=Et,mp.fireCreateEvent(this)}dispose(){this.disposed_||(os()&&Fr(new(Vr(pO))(this)),this.workspace.removeTopComment(this),this.disposed_=!0)}getHeight(){return this.height_}setHeight(vt){this.height_=vt}getWidth(){return this.width_}setWidth(vt){this.width_=vt}getXY(){return new Zr(this.xy_.x,this.xy_.y)}moveBy(vt,Et){const Dt=new(Vr(Gp))(this);this.xy_.translate(vt,Et),Dt.recordNew(),Fr(Dt)}isDeletable(){return this.deletable_&&!(this.workspace&&this.workspace.options.readOnly)}setDeletable(vt){this.deletable_=vt}isMovable(){return this.movable_&&!(this.workspace&&this.workspace.options.readOnly)}setMovable(vt){this.movable_=vt}isEditable(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)}setEditable(vt){this.editable_=vt}getContent(){return this.content_}setContent(vt){this.content_!==vt&&(Fr(new(Vr(zy))(this,this.content_,vt)),this.content_=vt)}toXmlWithXY(vt){return vt=this.toXml(vt),vt.setAttribute("x",`${Math.round(this.xy_.x)}`),vt.setAttribute("y",`${Math.round(this.xy_.y)}`),vt.setAttribute("h",`${this.height_}`),vt.setAttribute("w",`${this.width_}`),vt}toXml(vt){const Et=No("comment");return vt||(Et.id=this.id),Et.textContent=this.getContent(),Et}static fireCreateEvent(vt){if(os()){const Et=Ro();Et||io(!0);try{Fr(new(Vr(u_))(vt))}finally{Et||io(!1)}}}static fromXml(vt,Et){var Dt=mp.parseAttributes(vt);return Et=new mp(Et,Dt.content,Dt.h,Dt.w,Dt.id),Dt=vt.getAttribute("x"),vt=vt.getAttribute("y"),Dt=Dt?parseInt(Dt,10):NaN,vt=vt?parseInt(vt,10):NaN,isNaN(Dt)||isNaN(vt)||Et.moveBy(Dt,vt),mp.fireCreateEvent(Et),Et}static parseAttributes(vt){const Et=vt.getAttribute("h"),Dt=vt.getAttribute("w"),Ft=vt.getAttribute("x"),Kt=vt.getAttribute("y"),yn=vt.getAttribute("id");if(!yn)throw Error("No ID present in XML comment definition.");let Mn;return{id:yn,h:Et?parseInt(Et):100,w:Dt?parseInt(Dt):100,x:Ft?parseInt(Ft):NaN,y:Kt?parseInt(Kt):NaN,content:(Mn=vt.textContent)!=null?Mn:""}}},Yu=class extends d_{constructor(vt){super(),this.isBlank=!0,this.recordUndo=!1,this.isUiEvent=!0,this.isBlank=typeof vt>"u",this.workspaceId=vt||""}},kS=class extends Yu{constructor(vt,Et,Dt){super(Dt),this.type=ym,this.oldElementId=vt??void 0,this.newElementId=Et??void 0}toJson(){const vt=super.toJson();return vt.oldElementId=this.oldElementId,vt.newElementId=this.newElementId,vt}fromJson(vt){ft("Blockly.Events.Selected.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(vt),this.oldElementId=vt.oldElementId,this.newElementId=vt.newElementId}static fromJson(vt,Et,Dt){return Et=super.fromJson(vt,Et,Dt??new kS),Et.oldElementId=vt.oldElementId,Et.newElementId=vt.newElementId,Et}};xo(Wr.EVENT,ym,kS);var MS=!1,PS=`
.blocklySvg {
  background-color: #fff;
  outline: none;
  overflow: hidden;  /* IE overflows by default. */
  position: absolute;
  display: block;
}

.blocklyWidgetDiv {
  display: none;
  position: absolute;
  z-index: 99999;  /* big value for bootstrap3 compatibility */
}

.injectionDiv {
  height: 100%;
  position: relative;
  overflow: hidden;  /* So blocks in drag surface disappear at edges */
  touch-action: none;
}

.blocklyNonSelectable {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
}

.blocklyWsDragSurface {
  display: none;
  position: absolute;
  top: 0;
  left: 0;
}

/* Added as a separate rule with multiple classes to make it more specific
   than a bootstrap rule that selects svg:root. See issue #1275 for context.
*/
.blocklyWsDragSurface.blocklyOverflowVisible {
  overflow: visible;
}

.blocklyBlockDragSurface {
  display: none;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: visible !important;
  z-index: 50;  /* Display below toolbox, but above everything else. */
}

.blocklyBlockCanvas.blocklyCanvasTransitioning,
.blocklyBubbleCanvas.blocklyCanvasTransitioning {
  transition: transform .5s;
}

.blocklyTooltipDiv {
  background-color: #ffffc7;
  border: 1px solid #ddc;
  box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);
  color: #000;
  display: none;
  font: 9pt sans-serif;
  opacity: .9;
  padding: 2px;
  position: absolute;
  z-index: 100000;  /* big value for bootstrap3 compatibility */
}

.blocklyDropDownDiv {
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1000;
  display: none;
  border: 1px solid;
  border-color: #dadce0;
  background-color: #fff;
  border-radius: 2px;
  padding: 4px;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownContent {
  max-height: 300px;  /* @todo: spec for maximum height. */
  overflow: auto;
  overflow-x: hidden;
  position: relative;
}

.blocklyDropDownArrow {
  position: absolute;
  left: 0;
  top: 0;
  width: 16px;
  height: 16px;
  z-index: -1;
  background-color: inherit;
  border-color: inherit;
}

.blocklyDropDownButton {
  display: inline-block;
  float: left;
  padding: 0;
  margin: 4px;
  border-radius: 4px;
  outline: none;
  border: 1px solid;
  transition: box-shadow .1s;
  cursor: pointer;
}

.blocklyArrowTop {
  border-top: 1px solid;
  border-left: 1px solid;
  border-top-left-radius: 4px;
  border-color: inherit;
}

.blocklyArrowBottom {
  border-bottom: 1px solid;
  border-right: 1px solid;
  border-bottom-right-radius: 4px;
  border-color: inherit;
}

.blocklyResizeSE {
  cursor: se-resize;
  fill: #aaa;
}

.blocklyResizeSW {
  cursor: sw-resize;
  fill: #aaa;
}

.blocklyResizeLine {
  stroke: #515A5A;
  stroke-width: 1;
}

.blocklyHighlightedConnectionPath {
  fill: none;
  stroke: #fc3;
  stroke-width: 4px;
}

.blocklyPathLight {
  fill: none;
  stroke-linecap: round;
  stroke-width: 1;
}

.blocklySelected>.blocklyPathLight {
  display: none;
}

.blocklyDraggable {
  /* backup for browsers (e.g. IE11) that don't support grab */
  cursor: url("<<<PATH>>>/handopen.cur"), auto;
  cursor: grab;
  cursor: -webkit-grab;
}

  /* backup for browsers (e.g. IE11) that don't support grabbing */
.blocklyDragging {
  /* backup for browsers (e.g. IE11) that don't support grabbing */
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

  /* Changes cursor on mouse down. Not effective in Firefox because of
     https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */
.blocklyDraggable:active {
  /* backup for browsers (e.g. IE11) that don't support grabbing */
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

/* Change the cursor on the whole drag surface in case the mouse gets
   ahead of block during a drag. This way the cursor is still a closed hand.
  */
.blocklyBlockDragSurface .blocklyDraggable {
  /* backup for browsers (e.g. IE11) that don't support grabbing */
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

.blocklyDragging.blocklyDraggingDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyDragging>.blocklyPath,
.blocklyDragging>.blocklyPathLight {
  fill-opacity: .8;
  stroke-opacity: .8;
}

.blocklyDragging>.blocklyPathDark {
  display: none;
}

.blocklyDisabled>.blocklyPath {
  fill-opacity: .5;
  stroke-opacity: .5;
}

.blocklyDisabled>.blocklyPathLight,
.blocklyDisabled>.blocklyPathDark {
  display: none;
}

.blocklyInsertionMarker>.blocklyPath,
.blocklyInsertionMarker>.blocklyPathLight,
.blocklyInsertionMarker>.blocklyPathDark {
  fill-opacity: .2;
  stroke: none;
}

.blocklyMultilineText {
  font-family: monospace;
}

.blocklyNonEditableText>text {
  pointer-events: none;
}

.blocklyFlyout {
  position: absolute;
  z-index: 20;
}

.blocklyText text {
  cursor: default;
}

/*
  Don't allow users to select text.  It gets annoying when trying to
  drag a block and selected text moves instead.
*/
.blocklySvg text,
.blocklyBlockDragSurface text {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  cursor: inherit;
}

.blocklyHidden {
  display: none;
}

.blocklyFieldDropdown:not(.blocklyHidden) {
  display: block;
}

.blocklyIconGroup {
  cursor: default;
}

.blocklyIconGroup:not(:hover),
.blocklyIconGroupReadonly {
  opacity: .6;
}

.blocklyIconShape {
  fill: #00f;
  stroke: #fff;
  stroke-width: 1px;
}

.blocklyIconSymbol {
  fill: #fff;
}

.blocklyMinimalBody {
  margin: 0;
  padding: 0;
}

.blocklyHtmlInput {
  border: none;
  border-radius: 4px;
  height: 100%;
  margin: 0;
  outline: none;
  padding: 0;
  width: 100%;
  text-align: center;
  display: block;
  box-sizing: border-box;
}

/* Edge and IE introduce a close icon when the input value is longer than a
   certain length. This affects our sizing calculations of the text input.
   Hiding the close icon to avoid that. */
.blocklyHtmlInput::-ms-clear {
  display: none;
}

.blocklyMainBackground {
  stroke-width: 1;
  stroke: #c6c6c6;  /* Equates to #ddd due to border being off-pixel. */
}

.blocklyMutatorBackground {
  fill: #fff;
  stroke: #ddd;
  stroke-width: 1;
}

.blocklyFlyoutBackground {
  fill: #ddd;
  fill-opacity: .8;
}

.blocklyMainWorkspaceScrollbar {
  z-index: 20;
}

.blocklyFlyoutScrollbar {
  z-index: 30;
}

.blocklyScrollbarHorizontal,
.blocklyScrollbarVertical {
  position: absolute;
  outline: none;
}

.blocklyScrollbarBackground {
  opacity: 0;
}

.blocklyScrollbarHandle {
  fill: #ccc;
}

.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyScrollbarHandle:hover {
  fill: #bbb;
}

/* Darken flyout scrollbars due to being on a grey background. */
/* By contrast, workspace scrollbars are on a white background. */
.blocklyFlyout .blocklyScrollbarHandle {
  fill: #bbb;
}

.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyFlyout .blocklyScrollbarHandle:hover {
  fill: #aaa;
}

.blocklyInvalidInput {
  background: #faa;
}

.blocklyVerticalMarker {
  stroke-width: 3px;
  fill: rgba(255,255,255,.5);
  pointer-events: none;
}

.blocklyComputeCanvas {
  position: absolute;
  width: 0;
  height: 0;
}

.blocklyNoPointerEvents {
  pointer-events: none;
}

.blocklyContextMenu {
  border-radius: 4px;
  max-height: 100%;
}

.blocklyDropdownMenu {
  border-radius: 2px;
  padding: 0 !important;
}

.blocklyDropdownMenu .blocklyMenuItem {
  /* 28px on the left for icon or checkbox. */
  padding-left: 28px;
}

/* BiDi override for the resting state. */
.blocklyDropdownMenu .blocklyMenuItemRtl {
  /* Flip left/right padding for BiDi. */
  padding-left: 5px;
  padding-right: 28px;
}

.blocklyWidgetDiv .blocklyMenu {
  background: #fff;
  border: 1px solid transparent;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
  font: normal 13px Arial, sans-serif;
  margin: 0;
  outline: none;
  padding: 4px 0;
  position: absolute;
  overflow-y: auto;
  overflow-x: hidden;
  max-height: 100%;
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

.blocklyWidgetDiv .blocklyMenu.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv .blocklyMenu {
  background: inherit;  /* Compatibility with gapi, reset from goog-menu */
  border: inherit;  /* Compatibility with gapi, reset from goog-menu */
  font: normal 13px "Helvetica Neue", Helvetica, sans-serif;
  outline: none;
  position: relative;  /* Compatibility with gapi, reset from goog-menu */
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

/* State: resting. */
.blocklyMenuItem {
  border: none;
  color: #000;
  cursor: pointer;
  list-style: none;
  margin: 0;
  /* 7em on the right for shortcut. */
  min-width: 7em;
  padding: 6px 15px;
  white-space: nowrap;
}

/* State: disabled. */
.blocklyMenuItemDisabled {
  color: #ccc;
  cursor: inherit;
}

/* State: hover. */
.blocklyMenuItemHighlight {
  background-color: rgba(0,0,0,.1);
}

/* State: selected/checked. */
.blocklyMenuItemCheckbox {
  height: 16px;
  position: absolute;
  width: 16px;
}

.blocklyMenuItemSelected .blocklyMenuItemCheckbox {
  background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;
  float: left;
  margin-left: -24px;
  position: static;  /* Scroll with the menu. */
}

.blocklyMenuItemRtl .blocklyMenuItemCheckbox {
  float: right;
  margin-right: -24px;
}
`,LS={};LS.inject=ks,LS.register=uu;var ar=class{constructor(vt){this.tagName=vt}toString(){return this.tagName}};ar.ANIMATE=new ar("animate"),ar.CIRCLE=new ar("circle"),ar.CLIPPATH=new ar("clipPath"),ar.DEFS=new ar("defs"),ar.FECOMPOSITE=new ar("feComposite"),ar.FECOMPONENTTRANSFER=new ar("feComponentTransfer"),ar.FEFLOOD=new ar("feFlood"),ar.FEFUNCA=new ar("feFuncA"),ar.FEGAUSSIANBLUR=new ar("feGaussianBlur"),ar.FEPOINTLIGHT=new ar("fePointLight"),ar.FESPECULARLIGHTING=new ar("feSpecularLighting"),ar.FILTER=new ar("filter"),ar.FOREIGNOBJECT=new ar("foreignObject"),ar.G=new ar("g"),ar.IMAGE=new ar("image"),ar.LINE=new ar("line"),ar.PATH=new ar("path"),ar.PATTERN=new ar("pattern"),ar.POLYGON=new ar("polygon"),ar.RECT=new ar("rect"),ar.SVG=new ar("svg"),ar.TEXT=new ar("text"),ar.TSPAN=new ar("tspan");var cT=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,uT=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,zE={XY_REGEX:cT,XY_STYLE_REGEX:uT},bm={};bm.TEST_ONLY=zE,bm.getDocumentScroll=qp,bm.getInjectionDivXY=x_,bm.getRelativeXY=Pl,bm.getViewportBBox=FO,bm.is3dSupported=w_,bm.screenToWsCoordinates=hu;var Tl=8,Nv=3,jE=2,Al=class extends mp{constructor(vt,Et,Dt,Ft,Kt){super(vt,Et,Dt,Ft,Kt),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.eventsInit_=!1,this.deleteIconBorder_=this.deleteGroup_=this.resizeGroup_=this.foreignObject_=this.svgHandleTarget_=this.svgRectTarget_=this.textarea_=null,this.rendered_=this.autoLayout_=this.focused_=!1,this.svgGroup_=In(ar.G,{class:"blocklyComment"}),this.svgGroup_.translate_="",this.workspace=vt,this.svgRect_=In(ar.RECT,{class:"blocklyCommentRect",x:0,y:0,rx:Nv,ry:Nv}),this.svgGroup_.appendChild(this.svgRect_),this.useDragSurface_=!!vt.getBlockDragSurface(),this.render()}dispose(){this.disposed_||(Pn()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),os()&&Fr(new(Vr(pO))(this)),br(this.svgGroup_),this.disposeInternal_(),Bo(),super.dispose(),yo())}initSvg(vt){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");this.workspace.options.readOnly||this.eventsInit_||(Zt(this.svgRectTarget_,"pointerdown",this,this.pathMouseDown_),Zt(this.svgHandleTarget_,"pointerdown",this,this.pathMouseDown_)),this.eventsInit_=!0,this.updateMovable(),this.getSvgRoot().parentNode||this.workspace.getBubbleCanvas().appendChild(this.getSvgRoot()),!vt&&this.textarea_&&this.textarea_.select()}pathMouseDown_(vt){const Et=this.workspace.getGesture(vt);Et&&Et.handleBubbleStart(vt,this)}showContextMenu(vt){throw Error("The implementation of showContextMenu should be monkey-patched in by blockly.ts")}select(){if(Pn()!==this){var vt=null;if(Pn()){vt=Pn().id,Bo();try{Pn().unselect()}finally{yo()}}vt=new(Vr(ym))(vt,this.id,this.workspace.id),Fr(vt),Nn(this),this.addSelect()}}unselect(){if(Pn()===this){var vt=new(Vr(ym))(this.id,null,this.workspace.id);Fr(vt),Nn(null),this.removeSelect(),this.blurFocus()}}addSelect(){ir(this.svgGroup_,"blocklySelected"),this.setFocus()}removeSelect(){ir(this.svgGroup_,"blocklySelected"),this.blurFocus()}addFocus(){ir(this.svgGroup_,"blocklyFocused")}removeFocus(){Jn(this.svgGroup_,"blocklyFocused")}getRelativeToSurfaceXY(){let vt=0,Et=0;const Dt=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null;let Ft=this.getSvgRoot();if(Ft)do{var Kt=Pl(Ft);vt+=Kt.x,Et+=Kt.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()===Ft&&(Kt=this.workspace.getBlockDragSurface().getSurfaceTranslation(),vt+=Kt.x,Et+=Kt.y),Ft=Ft.parentNode}while(Ft&&Ft!==this.workspace.getBubbleCanvas()&&Ft!==Dt);return this.xy_=new Zr(vt,Et)}moveBy(vt,Et){const Dt=new(Vr(Gp))(this),Ft=this.getRelativeToSurfaceXY();this.translate(Ft.x+vt,Ft.y+Et),this.xy_=new Zr(Ft.x+vt,Ft.y+Et),Dt.recordNew(),Fr(Dt),this.workspace.resizeContents()}translate(vt,Et){this.xy_=new Zr(vt,Et),this.getSvgRoot().setAttribute("transform","translate("+vt+","+Et+")")}moveToDragSurface(){if(this.useDragSurface_){var vt=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(vt.x,vt.y),this.workspace.getBlockDragSurface().setBlocksAndShow(this.getSvgRoot())}}moveDuringDrag(vt,Et){vt?vt.translateSurface(Et.x,Et.y):(this.svgGroup_.translate_="translate("+Et.x+","+Et.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))}moveTo(vt,Et){this.translate(vt,Et)}clearTransformAttributes_(){this.getSvgRoot().removeAttribute("transform")}getBoundingRectangle(){var vt=this.getRelativeToSurfaceXY();const Et=this.getHeightWidth(),Dt=vt.y,Ft=vt.y+Et.height;let Kt;return this.RTL?(Kt=vt.x-Et.width,vt=vt.x):(Kt=vt.x,vt=vt.x+Et.width),new xs(Dt,Ft,Kt,vt)}updateMovable(){this.isMovable()?ir(this.svgGroup_,"blocklyDraggable"):Jn(this.svgGroup_,"blocklyDraggable")}setMovable(vt){super.setMovable(vt),this.updateMovable()}setEditable(vt){super.setEditable(vt),this.textarea_&&(this.textarea_.readOnly=!vt)}setDragging(vt){vt?(vt=this.getSvgRoot(),vt.translate_="",vt.skew_="",ir(this.svgGroup_,"blocklyDragging")):Jn(this.svgGroup_,"blocklyDragging")}getSvgRoot(){return this.svgGroup_}getContent(){return this.textarea_?this.textarea_.value:this.content_}setContent(vt){super.setContent(vt),this.textarea_&&(this.textarea_.value=vt)}setDeleteStyle(vt){vt?ir(this.svgGroup_,"blocklyDraggingDelete"):Jn(this.svgGroup_,"blocklyDraggingDelete")}setAutoLayout(vt){}toXmlWithXY(vt){let Et=0;this.workspace.RTL&&(Et=this.workspace.getWidth()),vt=this.toXml(vt);const Dt=this.getRelativeToSurfaceXY();return vt.setAttribute("x",Math.round(this.workspace.RTL?Et-Dt.x:Dt.x)),vt.setAttribute("y",Math.round(Dt.y)),vt.setAttribute("h",this.getHeight()),vt.setAttribute("w",this.getWidth()),vt}toCopyData(){return{saveInfo:this.toXmlWithXY(),source:this.workspace,typeCounts:null}}getHeightWidth(){return{width:this.getWidth(),height:this.getHeight()}}render(){if(!this.rendered_){var vt=this.getHeightWidth();this.createEditor_(),this.svgGroup_.appendChild(this.foreignObject_),this.svgHandleTarget_=In(ar.RECT,{class:"blocklyCommentHandleTarget",x:0,y:0}),this.svgGroup_.appendChild(this.svgHandleTarget_),this.svgRectTarget_=In(ar.RECT,{class:"blocklyCommentTarget",x:0,y:0,rx:Nv,ry:Nv}),this.svgGroup_.appendChild(this.svgRectTarget_),this.addResizeDom_(),this.isDeletable()&&this.addDeleteDom_(),this.setSize_(vt.width,vt.height),this.textarea_.value=this.content_,this.rendered_=!0,this.resizeGroup_&&Zt(this.resizeGroup_,"pointerdown",this,this.resizeMouseDown_),this.isDeletable()&&(Zt(this.deleteGroup_,"pointerdown",this,this.deleteMouseDown_),Zt(this.deleteGroup_,"pointerout",this,this.deleteMouseOut_),Zt(this.deleteGroup_,"pointerup",this,this.deleteMouseUp_))}}createEditor_(){this.foreignObject_=In(ar.FOREIGNOBJECT,{x:0,y:Al.TOP_OFFSET,class:"blocklyCommentForeignObject"});const vt=document.createElementNS(yu,"body");vt.setAttribute("xmlns",yu),vt.className="blocklyMinimalBody";const Et=document.createElementNS(yu,"textarea");return Et.className="blocklyCommentTextarea",Et.setAttribute("dir",this.RTL?"RTL":"LTR"),Et.readOnly=!this.isEditable(),vt.appendChild(Et),this.textarea_=Et,this.foreignObject_.appendChild(vt),Zt(Et,"wheel",this,function(Dt){Dt.stopPropagation()}),Zt(Et,"change",this,function(Dt){this.setContent(Et.value)}),this.foreignObject_}addResizeDom_(){this.resizeGroup_=In(ar.G,{class:this.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.svgGroup_),In(ar.POLYGON,{points:"0,x x,x x,0".replace(/x/g,Tl.toString())},this.resizeGroup_),In(ar.LINE,{class:"blocklyResizeLine",x1:Tl/3,y1:Tl-1,x2:Tl-1,y2:Tl/3},this.resizeGroup_),In(ar.LINE,{class:"blocklyResizeLine",x1:2*Tl/3,y1:Tl-1,x2:Tl-1,y2:2*Tl/3},this.resizeGroup_)}addDeleteDom_(){this.deleteGroup_=In(ar.G,{class:"blocklyCommentDeleteIcon"},this.svgGroup_),this.deleteIconBorder_=In(ar.CIRCLE,{class:"blocklyDeleteIconShape",r:"7",cx:"7.5",cy:"7.5"},this.deleteGroup_),In(ar.LINE,{x1:"5",y1:"10",x2:"10",y2:"5",stroke:"#fff","stroke-width":"2"},this.deleteGroup_),In(ar.LINE,{x1:"5",y1:"5",x2:"10",y2:"10",stroke:"#fff","stroke-width":"2"},this.deleteGroup_)}resizeMouseDown_(vt){this.unbindDragEvents_(),pn(vt)||(this.workspace.startDrag(vt,new Zr(this.workspace.RTL?-this.width_:this.width_,this.height_)),this.onMouseUpWrapper_=Zt(document,"pointerup",this,this.resizeMouseUp_),this.onMouseMoveWrapper_=Zt(document,"pointermove",this,this.resizeMouseMove_),this.workspace.hideChaff()),vt.stopPropagation()}deleteMouseDown_(vt){this.deleteIconBorder_&&ir(this.deleteIconBorder_,"blocklyDeleteIconHighlighted"),vt.stopPropagation()}deleteMouseOut_(vt){this.deleteIconBorder_&&Jn(this.deleteIconBorder_,"blocklyDeleteIconHighlighted")}deleteMouseUp_(vt){this.dispose(),vt.stopPropagation()}unbindDragEvents_(){this.onMouseUpWrapper_&&(cn(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(cn(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}resizeMouseUp_(vt){Ct(),this.unbindDragEvents_()}resizeMouseMove_(vt){this.autoLayout_=!1,vt=this.workspace.moveDrag(vt),this.setSize_(this.RTL?-vt.x:vt.x,vt.y)}resizeComment_(){const vt=this.getHeightWidth(),Et=Al.TOP_OFFSET,Dt=2*jE;this.foreignObject_.setAttribute("width",vt.width),this.foreignObject_.setAttribute("height",(vt.height-Et).toString()),this.RTL&&this.foreignObject_.setAttribute("x",(-vt.width).toString()),this.textarea_.style.width=vt.width-Dt+"px",this.textarea_.style.height=vt.height-Dt-Et+"px"}setSize_(vt,Et){vt=Math.max(vt,45),Et=Math.max(Et,20+Al.TOP_OFFSET),this.width_=vt,this.height_=Et,this.svgRect_.setAttribute("width",vt),this.svgRect_.setAttribute("height",Et),this.svgRectTarget_.setAttribute("width",vt),this.svgRectTarget_.setAttribute("height",Et),this.svgHandleTarget_.setAttribute("width",vt),this.svgHandleTarget_.setAttribute("height",Al.TOP_OFFSET),this.RTL&&(this.svgRect_.setAttribute("transform","scale(-1 1)"),this.svgRectTarget_.setAttribute("transform","scale(-1 1)")),this.resizeGroup_&&(this.RTL?(this.resizeGroup_.setAttribute("transform","translate("+(-vt+Tl)+","+(Et-Tl)+") scale(-1 1)"),this.deleteGroup_.setAttribute("transform","translate("+(-vt+Tl)+","+-Tl+") scale(-1 1)")):(this.resizeGroup_.setAttribute("transform","translate("+(vt-Tl)+","+(Et-Tl)+")"),this.deleteGroup_.setAttribute("transform","translate("+(vt-Tl)+","+-Tl+")"))),this.resizeComment_()}disposeInternal_(){this.svgHandleTarget_=this.svgRectTarget_=this.foreignObject_=this.textarea_=null,this.disposed_=!0}setFocus(){this.focused_=!0,setTimeout(()=>{this.disposed_||(this.textarea_.focus(),this.addFocus(),this.svgRectTarget_&&ir(this.svgRectTarget_,"blocklyCommentTargetFocused"),this.svgHandleTarget_&&ir(this.svgHandleTarget_,"blocklyCommentHandleTargetFocused"))},0)}blurFocus(){this.focused_=!1,setTimeout(()=>{this.disposed_||(this.textarea_.blur(),this.removeFocus(),this.svgRectTarget_&&Jn(this.svgRectTarget_,"blocklyCommentTargetFocused"),this.svgHandleTarget_&&Jn(this.svgHandleTarget_,"blocklyCommentHandleTargetFocused"))},0)}static fromXmlRendered(vt,Et,Dt){Bo();let Ft;try{const Kt=mp.parseAttributes(vt);if(Ft=new Al(Et,Kt.content,Kt.h,Kt.w,Kt.id),Et.rendered&&(Ft.initSvg(!0),Ft.render()),!isNaN(Kt.x)&&!isNaN(Kt.y))if(Et.RTL){const yn=Dt||Et.getWidth();Ft.moveBy(yn-Kt.x,Kt.y)}else Ft.moveBy(Kt.x,Kt.y)}finally{yo()}return mp.fireCreateEvent(Ft),Ft}};Al.DEFAULT_SIZE=100,Al.TOP_OFFSET=10,uu(`
.blocklyCommentForeignObject {
  position: relative;
  z-index: 0;
}

.blocklyCommentRect {
  fill: #E7DE8E;
  stroke: #bcA903;
  stroke-width: 1px;
}

.blocklyCommentTarget {
  fill: transparent;
  stroke: #bcA903;
}

.blocklyCommentTargetFocused {
  fill: none;
}

.blocklyCommentHandleTarget {
  fill: none;
}

.blocklyCommentHandleTargetFocused {
  fill: transparent;
}

.blocklyFocused>.blocklyCommentRect {
  fill: #B9B272;
  stroke: #B9B272;
}

.blocklySelected>.blocklyCommentTarget {
  stroke: #fc3;
  stroke-width: 3px;
}

.blocklyCommentDeleteIcon {
  cursor: pointer;
  fill: #000;
  display: none;
}

.blocklySelected > .blocklyCommentDeleteIcon {
  display: block;
}

.blocklyDeleteIconShape {
  fill: #000;
  stroke: #000;
  stroke-width: 1px;
}

.blocklyDeleteIconShape.blocklyDeleteIconHighlighted {
  stroke: #fc3;
}
`),lt.module$build$src$core$xml={},lt.module$build$src$core$xml.appendDomToWorkspace=du,lt.module$build$src$core$xml.blockToDom=Bu,lt.module$build$src$core$xml.blockToDomWithXY=Ll,lt.module$build$src$core$xml.clearWorkspaceAndLoadFromXml=A_,lt.module$build$src$core$xml.deleteNext=QO,lt.module$build$src$core$xml.domToBlock=Fu,lt.module$build$src$core$xml.domToPrettyText=Eu,lt.module$build$src$core$xml.domToText=Yl,lt.module$build$src$core$xml.domToVariables=Im,lt.module$build$src$core$xml.domToWorkspace=Rm,lt.module$build$src$core$xml.textToDom=na,lt.module$build$src$core$xml.variablesToDom=R0,lt.module$build$src$core$xml.workspaceToDom=iS;var _O=class extends d_{constructor(vt){super(),this.isBlank=!vt,vt&&(this.blockId=vt.id,this.workspaceId=vt.workspace.id)}toJson(){const vt=super.toJson();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return vt.blockId=this.blockId,vt}fromJson(vt){ft("Blockly.Events.BlockBase.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(vt),this.blockId=vt.blockId}static fromJson(vt,Et,Dt){return Et=super.fromJson(vt,Et,Dt??new _O),Et.blockId=vt.blockId,Et}},f_=class extends _O{constructor(vt,Et,Dt,Ft,Kt){super(vt),this.type=Qs,vt&&(this.element=Et,this.name=Dt||void 0,this.oldValue=Ft,this.newValue=Kt)}toJson(){const vt=super.toJson();if(!this.element)throw Error("The changed element is undefined. Either pass an element to the constructor, or call fromJson");return vt.element=this.element,vt.name=this.name,vt.oldValue=this.oldValue,vt.newValue=this.newValue,vt}fromJson(vt){ft("Blockly.Events.BlockChange.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(vt),this.element=vt.element,this.name=vt.name,this.oldValue=vt.oldValue,this.newValue=vt.newValue}static fromJson(vt,Et,Dt){return Et=super.fromJson(vt,Et,Dt??new f_),Et.element=vt.element,Et.name=vt.name,Et.oldValue=vt.oldValue,Et.newValue=vt.newValue,Et}isNull(){return this.oldValue===this.newValue}run(vt){var Et=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(Et=Et.getBlockById(this.blockId),!Et)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");switch(Et.mutator&&Et.mutator.setVisible(!1),vt=vt?this.newValue:this.oldValue,this.element){case"field":(Et=Et.getField(this.name))?Et.setValue(vt):console.warn("Can't set non-existent field: "+this.name);break;case"comment":Et.setCommentText(vt||null);break;case"collapsed":Et.setCollapsed(!!vt);break;case"disabled":Et.setEnabled(!vt);break;case"inline":Et.setInputsInline(!!vt);break;case"mutation":const Dt=f_.getExtraBlockState_(Et);Et.loadExtraState?Et.loadExtraState(JSON.parse(vt||"{}")):Et.domToMutation&&Et.domToMutation(na(vt||"<mutation/>")),Fr(new f_(Et,"mutation",null,Dt,vt));break;default:console.warn("Unknown change type: "+this.element)}}static getExtraBlockState_(vt){return vt.saveExtraState?(vt=vt.saveExtraState())?JSON.stringify(vt):"":vt.mutationToDom&&(vt=vt.mutationToDom())?Yl(vt):""}};xo(Wr.EVENT,Qs,f_);var Zy=class{constructor(vt){this.workspace=vt,this.cursorSvg_=this.cursor_=null,this.markers=new Map,this.markerSvg_=null}registerMarker(vt,Et){this.markers.has(vt)&&this.unregisterMarker(vt),Et.setDrawer(this.workspace.getRenderer().makeMarkerDrawer(this.workspace,Et)),this.setMarkerSvg(Et.getDrawer().createDom()),this.markers.set(vt,Et)}unregisterMarker(vt){const Et=this.markers.get(vt);if(Et)Et.dispose(),this.markers.delete(vt);else throw Error("Marker with ID "+vt+" does not exist. Can only unregister markers that exist.")}getCursor(){return this.cursor_}getMarker(vt){return this.markers.get(vt)||null}setCursor(vt){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=vt)&&(vt=this.workspace.getRenderer().makeMarkerDrawer(this.workspace,this.cursor_),this.cursor_.setDrawer(vt),this.setCursorSvg(this.cursor_.getDrawer().createDom()))}setCursorSvg(vt){vt?(this.workspace.getBlockCanvas().appendChild(vt),this.cursorSvg_=vt):this.cursorSvg_=null}setMarkerSvg(vt){vt?this.workspace.getBlockCanvas()&&(this.cursorSvg_?this.workspace.getBlockCanvas().insertBefore(vt,this.cursorSvg_):this.workspace.getBlockCanvas().appendChild(vt)):this.markerSvg_=null}updateMarkers(){this.workspace.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace.getCursor().draw()}dispose(){const vt=Object.keys(this.markers);for(let Et=0,Dt;Dt=vt[Et];Et++)this.unregisterMarker(Dt);this.markers.clear(),this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)}};Zy.LOCAL_MARKER="local_marker_1",lt.module$build$src$core$utils$string={},lt.module$build$src$core$utils$string.commonWordPrefix=Gu,lt.module$build$src$core$utils$string.commonWordSuffix=km,lt.module$build$src$core$utils$string.isNumber=Mm,lt.module$build$src$core$utils$string.shortestStringLength=Jl,lt.module$build$src$core$utils$string.startsWith=k0,lt.module$build$src$core$utils$string.wrap=HO;var Bv=void 0,qy=!1,OO=!1,hT=50,dT=0,Ky=0,DS=0,NS=0,Pu=null,Jy=null,BS=0,FS=10,fT=10,pT=750,Fv=5,Ps=null,Is={};Is.HOVER_MS=pT,Is.LIMIT=hT,Is.MARGINS=Fv,Is.OFFSET_X=BS,Is.OFFSET_Y=FS,Is.RADIUS_OK=fT,Is.bindMouseEvents=Tp,Is.block=YO,Is.createDom=Pm,Is.dispose=Cu,Is.getCustomTooltip=P0,Is.getDiv=XO,Is.getTooltipOfObject=xu,Is.hide=Dl,Is.isVisible=L0,Is.setCustomTooltip=M0,Is.unbindMouseEvents=ga,Is.unblock=M_;var GS=.45,US=.65,mT={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},Rl={};Rl.blend=pu,Rl.getHsvSaturation=em,Rl.getHsvValue=qO,Rl.hexToRgb=P_,Rl.hsvToHex=xp,Rl.hueToHex=Lm,Rl.names=mT,Rl.parse=Uu,Rl.rgbToHex=tm,Rl.setHsvSaturation=fu,Rl.setHsvValue=D0;var e0={};e0.checkMessageReferences=Dm,e0.parseBlockColour=mu,e0.replaceMessageReferences=ds,e0.tokenizeInterpolation=nm;var XE=class{},Gv=null,Uv=null,yO="",vO="",Zu,qu={};qu.createDom=Fl,qu.getDiv=Cp,qu.hide=ba,qu.hideIfOwner=Bm,qu.isVisible=gu,qu.positionWithAnchor=KO,qu.show=Ap,qu.testOnly_setDiv=Nm;var Qo=class{constructor(vt,Et,Dt){this.DEFAULT_VALUE=null,this.name=void 0,this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=this.tooltip_=this.validator_=null,this.disposed=!1,this.maxDisplayLength=50,this.sourceBlock_=null,this.enabled_=this.visible_=this.isDirty_=!0,this.suffixField=this.prefixField=this.clickTarget_=null,this.EDITABLE=!0,this.SERIALIZABLE=!1,this.CURSOR="",this.value_="DEFAULT_VALUE"in new.target.prototype?new.target.prototype.DEFAULT_VALUE:this.DEFAULT_VALUE,this.size_=new qs(0,0),vt!==Qo.SKIP_SETUP&&(Dt&&this.configure_(Dt),this.setValue(vt),Et&&this.setValidator(Et))}configure_(vt){vt.tooltip&&this.setTooltip(ds(vt.tooltip))}setSourceBlock(vt){if(this.sourceBlock_)throw Error("Field already bound to a block");this.sourceBlock_=vt}getConstants(){return!this.constants_&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_}getSourceBlock(){return this.sourceBlock_}init(){this.fieldGroup_||(this.fieldGroup_=In(ar.G,{}),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())}initView(){this.createBorderRect_(),this.createTextElement_()}initModel(){}createBorderRect_(){this.borderRect_=In(ar.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)}createTextElement_(){this.textElement_=In(ar.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)}bindEvents_(){const vt=this.getClickTarget_();if(!vt)throw Error("A click target has not been set.");Tp(vt),this.mouseDownWrapper_=Zt(vt,"pointerdown",this,this.onMouseDown_)}fromXml(vt){this.setValue(vt.textContent)}toXml(vt){return vt.textContent=this.getValue(),vt}saveState(vt){return vt=this.saveLegacyState(Qo),vt!==null?vt:this.getValue()}loadState(vt){this.loadLegacyState(Qo,vt)||this.setValue(vt)}saveLegacyState(vt){return vt.prototype.saveState===this.saveState&&vt.prototype.toXml!==this.toXml?(vt=No("field"),vt.setAttribute("name",this.name||""),Yl(this.toXml(vt)).replace(' xmlns="https://developers.google.com/blockly/xml"',"")):null}loadLegacyState(vt,Et){return vt.prototype.loadState===this.loadState&&vt.prototype.fromXml!==this.fromXml?(this.fromXml(na(Et)),!0):!1}dispose(){Gs(this),Bm(this),ga(this.getClickTarget_()),this.mouseDownWrapper_&&cn(this.mouseDownWrapper_),br(this.fieldGroup_),this.disposed=!0}updateEditable(){const vt=this.fieldGroup_,Et=this.getSourceBlock();this.EDITABLE&&vt&&Et&&(this.enabled_&&Et.isEditable()?(ir(vt,"blocklyEditableText"),Jn(vt,"blocklyNonEditableText"),vt.style.cursor=this.CURSOR):(ir(vt,"blocklyNonEditableText"),Jn(vt,"blocklyEditableText"),vt.style.cursor=""))}setEnabled(vt){this.enabled_=vt,this.updateEditable()}isEnabled(){return this.enabled_}isClickable(){return this.enabled_&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&this.showEditor_!==Qo.prototype.showEditor_}isCurrentlyEditable(){return this.enabled_&&this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()}isSerializable(){let vt=!1;return this.name&&(this.SERIALIZABLE?vt=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),vt=!0)),vt}isVisible(){return this.visible_}setVisible(vt){if(this.visible_!==vt){this.visible_=vt;var Et=this.fieldGroup_;Et&&(Et.style.display=vt?"block":"none")}}setValidator(vt){this.validator_=vt}getValidator(){return this.validator_}getSvgRoot(){return this.fieldGroup_}getBorderRect(){if(!this.borderRect_)throw Error(`The border rectangle is ${this.borderRect_}.`);return this.borderRect_}getTextElement(){if(!this.textElement_)throw Error(`The text element is ${this.textElement_}.`);return this.textElement_}getTextContent(){if(!this.textContent_)throw Error(`The text content is ${this.textContent_}.`);return this.textContent_}applyColour(){}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()}showEditor(vt){this.isClickable()&&this.showEditor_(vt)}showEditor_(vt){}updateSize_(vt){const Et=this.getConstants();vt=vt!==void 0?vt:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let Dt=2*vt,Ft=Et.FIELD_TEXT_HEIGHT,Kt=0;this.textElement_&&(Kt=Qr(this.textElement_,Et.FIELD_TEXT_FONTSIZE,Et.FIELD_TEXT_FONTWEIGHT,Et.FIELD_TEXT_FONTFAMILY),Dt+=Kt),this.borderRect_&&(Ft=Math.max(Ft,Et.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=Ft,this.size_.width=Dt,this.positionTextElement_(vt,Kt),this.positionBorderRect_()}positionTextElement_(vt,Et){if(this.textElement_){var Dt=this.getConstants(),Ft=this.size_.height/2,Kt;this.textElement_.setAttribute("x",`${(Kt=this.getSourceBlock())!=null&&Kt.RTL?this.size_.width-Et-vt:vt}`),this.textElement_.setAttribute("y",`${Dt.FIELD_TEXT_BASELINE_CENTER?Ft:Ft-Dt.FIELD_TEXT_HEIGHT/2+Dt.FIELD_TEXT_BASELINE}`)}}positionBorderRect_(){this.borderRect_&&(this.borderRect_.setAttribute("width",`${this.size_.width}`),this.borderRect_.setAttribute("height",`${this.size_.height}`),this.borderRect_.setAttribute("rx",`${this.getConstants().FIELD_BORDER_RECT_RADIUS}`),this.borderRect_.setAttribute("ry",`${this.getConstants().FIELD_BORDER_RECT_RADIUS}`))}getSize(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&this.size_.width===0&&(this.render_(),this.size_.width!==0&&console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead.")),this.size_):new qs(0,0)}getScaledBBox(){let vt;var Et=this.getSourceBlock();if(!Et)throw new Ls;if(this.borderRect_){var Dt=this.borderRect_.getBoundingClientRect();vt=Or(this.borderRect_),Et=Dt.width,Dt=Dt.height}else{Dt=this.sourceBlock_.getHeightWidth();const Ft=Et.workspace.scale;vt=this.getAbsoluteXY_(),Et=(Dt.width+1)*Ft,Dt=(Dt.height+1)*Ft,so?(vt.x+=1.5*Ft,vt.y+=1.5*Ft):(vt.x-=.5*Ft,vt.y-=.5*Ft)}return new xs(vt.y,vt.y+Dt,vt.x,vt.x+Et)}getDisplayText_(){let vt=this.getText();return vt?(vt.length>this.maxDisplayLength&&(vt=vt.substring(0,this.maxDisplayLength-2)+""),vt=vt.replace(/\s/g,Qo.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(vt+=""),vt):Qo.NBSP}getText(){const vt=this.getText_();return String(vt!==null?vt:this.getValue())}getText_(){return null}markDirty(){this.isDirty_=!0,this.constants_=null}forceRerender(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours(),this.updateMarkers_())}setValue(vt){if(vt!==null){var Et=this.doClassValidation_(vt);if(vt=this.processValidation_(vt,Et),!(vt instanceof Error)){if((Et=this.getValidator())&&(Et=Et.call(this,vt),vt=this.processValidation_(vt,Et),vt instanceof Error))return;if(Et=this.sourceBlock_,!Et||!Et.disposed){var Dt=this.getValue();Dt===vt?this.doValueUpdate_(vt):(this.doValueUpdate_(vt),Et&&os()&&Fr(new(Vr(Qs))(Et,"field",this.name||null,Dt,vt)),this.isDirty_&&this.forceRerender())}}}}processValidation_(vt,Et){return Et===null?(this.doValueInvalid_(vt),this.isDirty_&&this.forceRerender(),Error()):(Et!==void 0&&(vt=Et),vt)}getValue(){return this.value_}doClassValidation_(vt){return vt??null}doValueUpdate_(vt){this.value_=vt,this.isDirty_=!0}doValueInvalid_(vt){}onMouseDown_(vt){this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&(vt=this.sourceBlock_.workspace.getGesture(vt))&&vt.setStartField(this)}setTooltip(vt){vt||vt===""||(vt=this.sourceBlock_);const Et=this.getClickTarget_();Et?Et.tooltip=vt:this.tooltip_=vt}getTooltip(){const vt=this.getClickTarget_();return xu(vt||{tooltip:this.tooltip_})}getClickTarget_(){return this.clickTarget_||this.getSvgRoot()}getAbsoluteXY_(){return Or(this.getClickTarget_())}referencesVariables(){return!1}refreshVariableName(){}getParentInput(){let vt=null;const Et=this.getSourceBlock();if(!Et)throw new Ls;const Dt=Et.inputList;for(let Ft=0;Ft<Et.inputList.length;Ft++){const Kt=Dt[Ft],yn=Kt.fieldRow;for(let Mn=0;Mn<yn.length;Mn++)if(yn[Mn]===this){vt=Kt;break}}return vt}getFlipRtl(){return!1}isTabNavigable(){return!1}onShortcut(vt){return!1}setCursorSvg(vt){if(vt){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(vt),this.cursorSvg_=vt}else this.cursorSvg_=null}setMarkerSvg(vt){if(vt){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(vt),this.markerSvg_=vt}else this.markerSvg_=null}updateMarkers_(){var vt=this.getSourceBlock();if(!vt)throw new Ls;vt=vt.workspace,vt.keyboardAccessibilityMode&&this.cursorSvg_&&vt.getCursor().draw(),vt.keyboardAccessibilityMode&&this.markerSvg_&&vt.getMarker(Zy.LOCAL_MARKER).draw()}};Qo.NBSP="",Qo.SKIP_SETUP=new XE;var Ls=class extends Error{constructor(){super("The field has not yet been attached to its input. Call appendField to attach it.")}},gT={fromJsonInternal:L_},t0={};t0.TEST_ONLY=gT,t0.fromJson=Fm,t0.register=$a,t0.unregister=ey;var YE="aria-",ZE="role",su;(function(vt){vt.GRID="grid",vt.GRIDCELL="gridcell",vt.GROUP="group",vt.LISTBOX="listbox",vt.MENU="menu",vt.MENUITEM="menuitem",vt.MENUITEMCHECKBOX="menuitemcheckbox",vt.OPTION="option",vt.PRESENTATION="presentation",vt.ROW="row",vt.TREE="tree",vt.TREEITEM="treeitem"})(su||(su={}));var ps;(function(vt){vt.ACTIVEDESCENDANT="activedescendant",vt.COLCOUNT="colcount",vt.DISABLED="disabled",vt.EXPANDED="expanded",vt.INVALID="invalid",vt.LABEL="label",vt.LABELLEDBY="labelledby",vt.LEVEL="level",vt.ORIENTATION="orientation",vt.POSINSET="posinset",vt.ROWCOUNT="rowcount",vt.SELECTED="selected",vt.SETSIZE="setsize",vt.VALUEMAX="valuemax",vt.VALUEMIN="valuemin"})(ps||(ps={}));var n0={};n0.Role=su,n0.State=ps,n0.setRole=Ss,n0.setState=ts;var lo;(function(vt){vt[vt.WIN_KEY_FF_LINUX=0]="WIN_KEY_FF_LINUX",vt[vt.MAC_ENTER=3]="MAC_ENTER",vt[vt.BACKSPACE=8]="BACKSPACE",vt[vt.TAB=9]="TAB",vt[vt.NUM_CENTER=12]="NUM_CENTER",vt[vt.ENTER=13]="ENTER",vt[vt.SHIFT=16]="SHIFT",vt[vt.CTRL=17]="CTRL",vt[vt.ALT=18]="ALT",vt[vt.PAUSE=19]="PAUSE",vt[vt.CAPS_LOCK=20]="CAPS_LOCK",vt[vt.ESC=27]="ESC",vt[vt.SPACE=32]="SPACE",vt[vt.PAGE_UP=33]="PAGE_UP",vt[vt.PAGE_DOWN=34]="PAGE_DOWN",vt[vt.END=35]="END",vt[vt.HOME=36]="HOME",vt[vt.LEFT=37]="LEFT",vt[vt.UP=38]="UP",vt[vt.RIGHT=39]="RIGHT",vt[vt.DOWN=40]="DOWN",vt[vt.PLUS_SIGN=43]="PLUS_SIGN",vt[vt.PRINT_SCREEN=44]="PRINT_SCREEN",vt[vt.INSERT=45]="INSERT",vt[vt.DELETE=46]="DELETE",vt[vt.ZERO=48]="ZERO",vt[vt.ONE=49]="ONE",vt[vt.TWO=50]="TWO",vt[vt.THREE=51]="THREE",vt[vt.FOUR=52]="FOUR",vt[vt.FIVE=53]="FIVE",vt[vt.SIX=54]="SIX",vt[vt.SEVEN=55]="SEVEN",vt[vt.EIGHT=56]="EIGHT",vt[vt.NINE=57]="NINE",vt[vt.FF_SEMICOLON=59]="FF_SEMICOLON",vt[vt.FF_EQUALS=61]="FF_EQUALS",vt[vt.FF_DASH=173]="FF_DASH",vt[vt.FF_HASH=163]="FF_HASH",vt[vt.QUESTION_MARK=63]="QUESTION_MARK",vt[vt.AT_SIGN=64]="AT_SIGN",vt[vt.A=65]="A",vt[vt.B=66]="B",vt[vt.C=67]="C",vt[vt.D=68]="D",vt[vt.E=69]="E",vt[vt.F=70]="F",vt[vt.G=71]="G",vt[vt.H=72]="H",vt[vt.I=73]="I",vt[vt.J=74]="J",vt[vt.K=75]="K",vt[vt.L=76]="L",vt[vt.M=77]="M",vt[vt.N=78]="N",vt[vt.O=79]="O",vt[vt.P=80]="P",vt[vt.Q=81]="Q",vt[vt.R=82]="R",vt[vt.S=83]="S",vt[vt.T=84]="T",vt[vt.U=85]="U",vt[vt.V=86]="V",vt[vt.W=87]="W",vt[vt.X=88]="X",vt[vt.Y=89]="Y",vt[vt.Z=90]="Z",vt[vt.META=91]="META",vt[vt.WIN_KEY_RIGHT=92]="WIN_KEY_RIGHT",vt[vt.CONTEXT_MENU=93]="CONTEXT_MENU",vt[vt.NUM_ZERO=96]="NUM_ZERO",vt[vt.NUM_ONE=97]="NUM_ONE",vt[vt.NUM_TWO=98]="NUM_TWO",vt[vt.NUM_THREE=99]="NUM_THREE",vt[vt.NUM_FOUR=100]="NUM_FOUR",vt[vt.NUM_FIVE=101]="NUM_FIVE",vt[vt.NUM_SIX=102]="NUM_SIX",vt[vt.NUM_SEVEN=103]="NUM_SEVEN",vt[vt.NUM_EIGHT=104]="NUM_EIGHT",vt[vt.NUM_NINE=105]="NUM_NINE",vt[vt.NUM_MULTIPLY=106]="NUM_MULTIPLY",vt[vt.NUM_PLUS=107]="NUM_PLUS",vt[vt.NUM_MINUS=109]="NUM_MINUS",vt[vt.NUM_PERIOD=110]="NUM_PERIOD",vt[vt.NUM_DIVISION=111]="NUM_DIVISION",vt[vt.F1=112]="F1",vt[vt.F2=113]="F2",vt[vt.F3=114]="F3",vt[vt.F4=115]="F4",vt[vt.F5=116]="F5",vt[vt.F6=117]="F6",vt[vt.F7=118]="F7",vt[vt.F8=119]="F8",vt[vt.F9=120]="F9",vt[vt.F10=121]="F10",vt[vt.F11=122]="F11",vt[vt.F12=123]="F12",vt[vt.NUMLOCK=144]="NUMLOCK",vt[vt.SCROLL_LOCK=145]="SCROLL_LOCK",vt[vt.FIRST_MEDIA_KEY=166]="FIRST_MEDIA_KEY",vt[vt.LAST_MEDIA_KEY=183]="LAST_MEDIA_KEY",vt[vt.SEMICOLON=186]="SEMICOLON",vt[vt.DASH=189]="DASH",vt[vt.EQUALS=187]="EQUALS",vt[vt.COMMA=188]="COMMA",vt[vt.PERIOD=190]="PERIOD",vt[vt.SLASH=191]="SLASH",vt[vt.APOSTROPHE=192]="APOSTROPHE",vt[vt.TILDE=192]="TILDE",vt[vt.SINGLE_QUOTE=222]="SINGLE_QUOTE",vt[vt.OPEN_SQUARE_BRACKET=219]="OPEN_SQUARE_BRACKET",vt[vt.BACKSLASH=220]="BACKSLASH",vt[vt.CLOSE_SQUARE_BRACKET=221]="CLOSE_SQUARE_BRACKET",vt[vt.WIN_KEY=224]="WIN_KEY",vt[vt.MAC_FF_META=224]="MAC_FF_META",vt[vt.MAC_WK_CMD_LEFT=91]="MAC_WK_CMD_LEFT",vt[vt.MAC_WK_CMD_RIGHT=93]="MAC_WK_CMD_RIGHT",vt[vt.WIN_IME=229]="WIN_IME",vt[vt.VK_NONAME=252]="VK_NONAME",vt[vt.PHANTOM=255]="PHANTOM"})(lo||(lo={}));var VS=class{constructor(){this.menuItems=[],this.roleName=this.element=this.onKeyDownHandler=this.mouseLeaveHandler=this.mouseEnterHandler=this.clickHandler=this.mouseOverHandler=this.highlightedItem=this.openingCoords=null}addChild(vt){this.menuItems.push(vt)}render(vt){const Et=document.createElement("div");Et.className="blocklyMenu goog-menu blocklyNonSelectable",Et.tabIndex=0,this.roleName&&Ss(Et,this.roleName),this.element=Et;for(let Dt=0,Ft;Ft=this.menuItems[Dt];Dt++)Et.appendChild(Ft.createDom());return this.mouseOverHandler=Zt(Et,"pointerover",this,this.handleMouseOver,!0),this.clickHandler=Zt(Et,"pointerdown",this,this.handleClick,!0),this.mouseEnterHandler=Zt(Et,"pointerenter",this,this.handleMouseEnter,!0),this.mouseLeaveHandler=Zt(Et,"pointerleave",this,this.handleMouseLeave,!0),this.onKeyDownHandler=Zt(Et,"keydown",this,this.handleKeyEvent),vt.appendChild(Et),Et}getElement(){return this.element}focus(){const vt=this.getElement();vt&&(vt.focus({preventScroll:!0}),ir(vt,"blocklyFocused"))}blur(){const vt=this.getElement();vt&&(vt.blur(),Jn(vt,"blocklyFocused"))}setRole(vt){this.roleName=vt}dispose(){this.mouseOverHandler&&(cn(this.mouseOverHandler),this.mouseOverHandler=null),this.clickHandler&&(cn(this.clickHandler),this.clickHandler=null),this.mouseEnterHandler&&(cn(this.mouseEnterHandler),this.mouseEnterHandler=null),this.mouseLeaveHandler&&(cn(this.mouseLeaveHandler),this.mouseLeaveHandler=null),this.onKeyDownHandler&&(cn(this.onKeyDownHandler),this.onKeyDownHandler=null);for(let vt=0,Et;Et=this.menuItems[vt];vt++)Et.dispose();this.element=null}getMenuItem(vt){const Et=this.getElement();for(;vt&&vt!==Et;){if(vt.classList.contains("blocklyMenuItem")){for(let Dt=0,Ft;Ft=this.menuItems[Dt];Dt++)if(Ft.getElement()===vt)return Ft}vt=vt.parentElement}return null}setHighlighted(vt){var Et=this.highlightedItem;Et&&(Et.setHighlighted(!1),this.highlightedItem=null),vt&&(vt.setHighlighted(!0),this.highlightedItem=vt,Et=this.getElement(),fr(vt.getElement(),Et),ts(Et,ps.ACTIVEDESCENDANT,vt.getId()))}highlightNext(){const vt=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(vt,1)}highlightPrevious(){const vt=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(0>vt?this.menuItems.length:vt,-1)}highlightFirst(){this.highlightHelper(-1,1)}highlightLast(){this.highlightHelper(this.menuItems.length,-1)}highlightHelper(vt,Et){vt+=Et;let Dt;for(;Dt=this.menuItems[vt];){if(Dt.isEnabled()){this.setHighlighted(Dt);break}vt+=Et}}handleMouseOver(vt){(vt=this.getMenuItem(vt.target))&&(vt.isEnabled()?this.highlightedItem!==vt&&this.setHighlighted(vt):this.setHighlighted(null))}handleClick(vt){const Et=this.openingCoords;if(this.openingCoords=null,Et&&typeof vt.clientX=="number"){const Dt=new Zr(vt.clientX,vt.clientY);if(1>Zr.distance(Et,Dt))return}(vt=this.getMenuItem(vt.target))&&vt.performAction()}handleMouseEnter(vt){this.focus()}handleMouseLeave(vt){this.getElement()&&(this.blur(),this.setHighlighted(null))}handleKeyEvent(vt){if(this.menuItems.length&&!(vt.shiftKey||vt.ctrlKey||vt.metaKey||vt.altKey)){var Et=this.highlightedItem;switch(vt.keyCode){case lo.ENTER:case lo.SPACE:Et&&Et.performAction();break;case lo.UP:this.highlightPrevious();break;case lo.DOWN:this.highlightNext();break;case lo.PAGE_UP:case lo.HOME:this.highlightFirst();break;case lo.PAGE_DOWN:case lo.END:this.highlightLast();break;default:return}vt.preventDefault(),vt.stopPropagation()}}getSize(){const vt=this.getElement(),Et=Mo(vt);return Et.height=vt.scrollHeight,Et}},WS=class{constructor(vt,Et){this.content=vt,this.opt_value=Et,this.enabled=!0,this.element=null,this.rightToLeft=!1,this.roleName=null,this.highlight=this.checked=this.checkable=!1,this.actionHandler=null}createDom(){const vt=document.createElement("div");vt.id=Lo(),this.element=vt,vt.className="blocklyMenuItem goog-menuitem "+(this.enabled?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft?"blocklyMenuItemRtl goog-menuitem-rtl ":"");const Et=document.createElement("div");if(Et.className="blocklyMenuItemContent goog-menuitem-content",this.checkable){var Dt=document.createElement("div");Dt.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",Et.appendChild(Dt)}return Dt=this.content,typeof this.content=="string"&&(Dt=document.createTextNode(this.content)),Et.appendChild(Dt),vt.appendChild(Et),this.roleName&&Ss(vt,this.roleName),ts(vt,ps.SELECTED,this.checkable&&this.checked||!1),ts(vt,ps.DISABLED,!this.enabled),vt}dispose(){this.element=null}getElement(){return this.element}getId(){return this.element.id}getValue(){let vt;return(vt=this.opt_value)!=null?vt:null}setRightToLeft(vt){this.rightToLeft=vt}setRole(vt){this.roleName=vt}setCheckable(vt){this.checkable=vt}setChecked(vt){this.checked=vt}setHighlighted(vt){this.highlight=vt;const Et=this.getElement();Et&&this.isEnabled()&&(vt?(ir(Et,"blocklyMenuItemHighlight"),ir(Et,"goog-menuitem-highlight")):(Jn(Et,"blocklyMenuItemHighlight"),Jn(Et,"goog-menuitem-highlight")))}isEnabled(){return this.enabled}setEnabled(vt){this.enabled=vt}performAction(){this.isEnabled()&&this.actionHandler&&this.actionHandler(this)}onAction(vt,Et){this.actionHandler=vt.bind(Et)}},Ku=class extends Qo{constructor(vt,Et,Dt){super(Qo.SKIP_SETUP),this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null,this.SERIALIZABLE=!0,this.CURSOR="default",this.clickTarget_=this.suffixField=this.prefixField=this.generatedOptions_=null,ys(vt)&&(Array.isArray(vt)?(Gm(vt),vt=js(vt),this.menuGenerator_=vt.options,this.prefixField=vt.prefix||null,this.suffixField=vt.suffix||null):this.menuGenerator_=vt,this.selectedOption_=this.getOptions(!1)[0],Dt&&this.configure_(Dt),this.setValue(this.selectedOption_[1]),Et&&this.setValidator(Et))}fromXml(vt){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(vt.textContent)}loadState(vt){this.loadLegacyState(Ku,vt)||(this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(vt))}initView(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement_=In(ar.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&ir(this.borderRect_,"blocklyDropdownRect")}shouldAddBorderRect_(){let vt;return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!((vt=this.getSourceBlock())!=null&&vt.isShadow())}createTextArrow_(){this.arrow_=In(ar.TSPAN,{},this.textElement_);let vt;this.arrow_.appendChild(document.createTextNode((vt=this.getSourceBlock())!=null&&vt.RTL?Ku.ARROW_CHAR+" ":" "+Ku.ARROW_CHAR));let Et;(Et=this.getSourceBlock())!=null&&Et.RTL?this.getTextElement().insertBefore(this.arrow_,this.textContent_):this.getTextElement().appendChild(this.arrow_)}createSVGArrow_(){this.svgArrow_=In(ar.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(iu,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)}showEditor_(vt){var Et=this.getSourceBlock();if(!Et)throw new Ls;this.dropdownCreate_(),this.menu_.openingCoords=vt&&typeof vt.clientX=="number"?new Zr(vt.clientX,vt.clientY):null,Dr(),vt=this.menu_.render(Sr()),ir(vt,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV&&(vt=Et.isShadow()?Et.getParent().getColour():Et.getColour(),Et=Et.isShadow()?Et.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary,En(vt,Et)),Zn(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&this.menu_.setHighlighted(this.selectedMenuItem_),this.applyColour()}dropdownCreate_(){const vt=this.getSourceBlock();if(!vt)throw new Ls;const Et=new VS;Et.setRole(su.LISTBOX),this.menu_=Et;const Dt=this.getOptions(!1);this.selectedMenuItem_=null;for(let Kt=0;Kt<Dt.length;Kt++){const[yn,Mn]=Dt[Kt];if(typeof yn=="object"){var Ft=new Image(yn.width,yn.height);Ft.src=yn.src,Ft.alt=yn.alt||""}else Ft=yn;Ft=new WS(Ft,Mn),Ft.setRole(su.OPTION),Ft.setRightToLeft(vt.RTL),Ft.setCheckable(!0),Et.addChild(Ft),Ft.setChecked(Mn===this.value_),Mn===this.value_&&(this.selectedMenuItem_=Ft),Ft.onAction(this.handleMenuActionEvent_,this)}}dropdownDispose_(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem_=this.menu_=null,this.applyColour()}handleMenuActionEvent_(vt){Gs(this,!0),this.onItemSelected_(this.menu_,vt)}onItemSelected_(vt,Et){this.setValue(Et.getValue())}isOptionListDynamic(){return typeof this.menuGenerator_=="function"}getOptions(vt){if(!this.menuGenerator_)throw TypeError("A menu generator was never defined.");return Array.isArray(this.menuGenerator_)?this.menuGenerator_:vt&&this.generatedOptions_?this.generatedOptions_:(this.generatedOptions_=this.menuGenerator_(),Gm(this.generatedOptions_),this.generatedOptions_)}doClassValidation_(vt){return this.getOptions(!0).some(Et=>Et[1]===vt)?vt:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+vt),null)}doValueUpdate_(vt){super.doValueUpdate_(vt),vt=this.getOptions(!0);for(let Et=0,Dt;Dt=vt[Et];Et++)Dt[1]===this.value_&&(this.selectedOption_=Dt)}applyColour(){const vt=this.sourceBlock_.style;this.borderRect_&&(this.borderRect_.setAttribute("stroke",vt.colourTertiary),this.menu_?this.borderRect_.setAttribute("fill",vt.colourTertiary):this.borderRect_.setAttribute("fill","transparent")),this.sourceBlock_&&this.arrow_&&(this.sourceBlock_.isShadow()?this.arrow_.style.fill=vt.colourSecondary:this.arrow_.style.fill=vt.colourPrimary)}render_(){this.getTextContent().nodeValue="",this.imageElement_.style.display="none";const vt=this.selectedOption_&&this.selectedOption_[0];vt&&typeof vt=="object"?this.renderSelectedImage_(vt):this.renderSelectedText_(),this.positionBorderRect_()}renderSelectedImage_(vt){const Et=this.getSourceBlock();if(!Et)throw new Ls;this.imageElement_.style.display="",this.imageElement_.setAttributeNS(iu,"xlink:href",vt.src),this.imageElement_.setAttribute("height",`${vt.height}`),this.imageElement_.setAttribute("width",`${vt.width}`);const Dt=Number(vt.height);vt=Number(vt.width);var Ft=!!this.borderRect_;const Kt=Math.max(Ft?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,Dt+KE);Ft=Ft?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let yn;yn=this.svgArrow_?this.positionSVGArrow_(vt+Ft,Kt/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):Qr(this.arrow_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY),this.size_.width=vt+yn+2*Ft,this.size_.height=Kt;let Mn=0;Et.RTL?this.imageElement_.setAttribute("x",(Ft+yn).toString()):(Mn=vt+yn,this.getTextElement().setAttribute("text-anchor","end"),this.imageElement_.setAttribute("x",Ft.toString())),this.imageElement_.setAttribute("y",(Kt/2-Dt/2).toString()),this.positionTextElement_(Mn+Ft,vt+yn)}renderSelectedText_(){this.getTextContent().nodeValue=this.getDisplayText_();var vt=this.getTextElement();ir(vt,"blocklyDropdownText"),vt.setAttribute("text-anchor","start");var Et=!!this.borderRect_;vt=Math.max(Et?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT);const Dt=Qr(this.getTextElement(),this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);Et=Et?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let Ft=0;this.svgArrow_&&(Ft=this.positionSVGArrow_(Dt+Et,vt/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=Dt+Ft+2*Et,this.size_.height=vt,this.positionTextElement_(Et,Dt)}positionSVGArrow_(vt,Et){if(!this.svgArrow_)return 0;const Dt=this.getSourceBlock();if(!Dt)throw new Ls;const Ft=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,Kt=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,yn=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow_.setAttribute("transform","translate("+(Dt.RTL?Ft:vt+Kt)+","+Et+")"),yn+Kt}getText_(){if(!this.selectedOption_)return null;const vt=this.selectedOption_[0];return typeof vt=="object"?vt.alt:vt}static fromJson(vt){if(!vt.options)throw Error("options are required for the dropdown field. The options property must be assigned an array of [humanReadableValue, languageNeutralValue] tuples.");return new this(vt.options,void 0,vt)}};Ku.CHECKMARK_OVERHANG=25,Ku.MAX_MENU_HEIGHT_VH=.45,Ku.ARROW_CHAR="";var qE=5,KE=2*qE;$a("field_dropdown",Ku),lt.module$build$src$core$field_dropdown={},lt.module$build$src$core$field_dropdown.FieldDropdown=Ku;var QS=class extends Yu{constructor(vt,Et,Dt){super(vt?vt.workspace.id:void 0),this.type=Fp,vt&&(this.blockId=vt.id,this.isOpen=Et,this.bubbleType=Dt)}toJson(){const vt=super.toJson();if(this.isOpen===void 0)throw Error("Whether this event is for opening the bubble is undefined. Either pass the value to the constructor, or call fromJson");if(!this.bubbleType)throw Error("The type of bubble is undefined. Either pass the value to the constructor, or call fromJson");return vt.isOpen=this.isOpen,vt.bubbleType=this.bubbleType,vt.blockId=this.blockId||"",vt}fromJson(vt){ft("Blockly.Events.BubbleOpen.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(vt),this.isOpen=vt.isOpen,this.bubbleType=vt.bubbleType,this.blockId=vt.blockId}static fromJson(vt,Et,Dt){return Et=super.fromJson(vt,Et,Dt??new QS),Et.isOpen=vt.isOpen,Et.bubbleType=vt.bubbleType,Et.blockId=vt.blockId,Et}},HS;(function(vt){vt.MUTATOR="mutator",vt.COMMENT="comment",vt.WARNING="warning"})(HS||(HS={})),xo(Wr.EVENT,Fp,QS);var bs=class{constructor(vt,Et,Dt,Ft,Kt){this.workspace=vt,this.horizontal=Et,this.oldHostMetrics=null,this.ratio=1,this.origin=new Zr(0,0),this.startDragHandle=this.handlePosition=this.handleLength=this.scrollbarLength=this.startDragMouse=0,this.containerVisible=this.isHandleVisible=!0,this.position=new Zr(0,0),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.pair=Dt||!1,this.margin=Kt!==void 0?Kt:bs.DEFAULT_SCROLLBAR_MARGIN,vt="blocklyScrollbar"+(this.horizontal?"Horizontal":"Vertical"),Ft&&(vt+=" "+Ft),this.outerSvg=In(ar.SVG,{class:vt}),Ft=In(ar.G,{},this.outerSvg),this.svgBackground=In(ar.RECT,{class:"blocklyScrollbarBackground"},Ft),vt=Math.floor((bs.scrollbarThickness-5)/2),this.svgHandle=In(ar.RECT,{class:"blocklyScrollbarHandle",rx:vt,ry:vt},Ft),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarColour","fill"),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarOpacity","fill-opacity"),Gr(this.outerSvg,this.workspace.getParentSvg()),this.setInitialThickness(),Et?(this.lengthAttribute_="width",this.positionAttribute_="x"):(this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=Zt(this.svgBackground,"pointerdown",this,this.onMouseDownBar),this.onMouseDownHandleWrapper_=Zt(this.svgHandle,"pointerdown",this,this.onMouseDownHandle)}setInitialThickness(){const vt=bs.scrollbarThickness;this.horizontal?(this.svgBackground.setAttribute("height",String(vt)),this.outerSvg.setAttribute("height",String(vt)),this.svgHandle.setAttribute("height",String(vt-5)),this.svgHandle.setAttribute("y","2.5")):(this.svgBackground.setAttribute("width",String(vt)),this.outerSvg.setAttribute("width",String(vt)),this.svgHandle.setAttribute("width",String(vt-5)),this.svgHandle.setAttribute("x","2.5"))}dispose(){this.cleanUp(),cn(this.onMouseDownBarWrapper_),cn(this.onMouseDownHandleWrapper_),br(this.outerSvg),this.workspace.getThemeManager().unsubscribe(this.svgHandle)}constrainHandleLength(vt){return vt=0>=vt||isNaN(vt)?0:Math.min(vt,this.scrollbarLength)}setHandleLength(vt){this.handleLength=vt,this.svgHandle.setAttribute(this.lengthAttribute_,String(this.handleLength))}constrainHandlePosition(vt){return vt=0>=vt||isNaN(vt)?0:Math.min(vt,this.scrollbarLength-this.handleLength)}setHandlePosition(vt){this.handlePosition=vt,this.svgHandle.setAttribute(this.positionAttribute_,String(this.handlePosition))}setScrollbarLength(vt){this.scrollbarLength=vt,this.outerSvg.setAttribute(this.lengthAttribute_,String(this.scrollbarLength)),this.svgBackground.setAttribute(this.lengthAttribute_,String(this.scrollbarLength))}setPosition(vt,Et){this.position.x=vt,this.position.y=Et,Xr(this.outerSvg,"translate("+(this.position.x+this.origin.x)+"px,"+(this.position.y+this.origin.y)+"px)")}resize(vt){!vt&&(vt=this.workspace.getMetrics(),!vt)||this.oldHostMetrics&&bs.metricsAreEquivalent(vt,this.oldHostMetrics)||(this.horizontal?this.resizeHorizontal(vt):this.resizeVertical(vt),this.oldHostMetrics=vt,this.updateMetrics())}requiresViewResize(vt){return this.oldHostMetrics?this.oldHostMetrics.viewWidth!==vt.viewWidth||this.oldHostMetrics.viewHeight!==vt.viewHeight||this.oldHostMetrics.absoluteLeft!==vt.absoluteLeft||this.oldHostMetrics.absoluteTop!==vt.absoluteTop:!0}resizeHorizontal(vt){this.requiresViewResize(vt)?this.resizeViewHorizontal(vt):this.resizeContentHorizontal(vt)}resizeViewHorizontal(vt){var Et=vt.viewWidth-2*this.margin;this.pair&&(Et-=bs.scrollbarThickness),this.setScrollbarLength(Math.max(0,Et)),Et=vt.absoluteLeft+this.margin,this.pair&&this.workspace.RTL&&(Et+=bs.scrollbarThickness),this.setPosition(Et,vt.absoluteTop+vt.viewHeight-bs.scrollbarThickness-this.margin),this.resizeContentHorizontal(vt)}resizeContentHorizontal(vt){if(vt.viewWidth>=vt.scrollWidth)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var Et=this.scrollbarLength*vt.viewWidth/vt.scrollWidth;Et=this.constrainHandleLength(Et),this.setHandleLength(Et),Et=vt.scrollWidth-vt.viewWidth;var Dt=this.scrollbarLength-this.handleLength;vt=(vt.viewLeft-vt.scrollLeft)/Et*Dt,vt=this.constrainHandlePosition(vt),this.setHandlePosition(vt),this.ratio=Dt/Et}}resizeVertical(vt){this.requiresViewResize(vt)?this.resizeViewVertical(vt):this.resizeContentVertical(vt)}resizeViewVertical(vt){let Et=vt.viewHeight-2*this.margin;this.pair&&(Et-=bs.scrollbarThickness),this.setScrollbarLength(Math.max(0,Et)),this.setPosition(this.workspace.RTL?vt.absoluteLeft+this.margin:vt.absoluteLeft+vt.viewWidth-bs.scrollbarThickness-this.margin,vt.absoluteTop+this.margin),this.resizeContentVertical(vt)}resizeContentVertical(vt){if(vt.viewHeight>=vt.scrollHeight)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var Et=this.scrollbarLength*vt.viewHeight/vt.scrollHeight;Et=this.constrainHandleLength(Et),this.setHandleLength(Et),Et=vt.scrollHeight-vt.viewHeight;var Dt=this.scrollbarLength-this.handleLength;vt=(vt.viewTop-vt.scrollTop)/Et*Dt,vt=this.constrainHandlePosition(vt),this.setHandlePosition(vt),this.ratio=Dt/Et}}isVisible(){return this.isHandleVisible}setContainerVisible(vt){const Et=vt!==this.containerVisible;this.containerVisible=vt,Et&&this.updateDisplay_()}setVisible(vt){const Et=vt!==this.isVisible();if(this.pair)throw Error("Unable to toggle visibility of paired scrollbars.");this.isHandleVisible=vt,Et&&this.updateDisplay_()}updateDisplay_(){this.containerVisible&&this.isVisible()?this.outerSvg.setAttribute("display","block"):this.outerSvg.setAttribute("display","none")}onMouseDownBar(vt){if(this.workspace.markFocused(),Ct(),this.cleanUp(),pn(vt))vt.stopPropagation();else{var Et=dn(vt,this.workspace.getParentSvg(),this.workspace.getInverseScreenCTM());Et=this.horizontal?Et.x:Et.y;var Dt=x_(this.svgHandle);Dt=this.horizontal?Dt.x:Dt.y;var Ft=this.handlePosition,Kt=.95*this.handleLength;Et<=Dt?Ft-=Kt:Et>=Dt+this.handleLength&&(Ft+=Kt),this.setHandlePosition(this.constrainHandlePosition(Ft)),this.updateMetrics(),vt.stopPropagation(),vt.preventDefault()}}onMouseDownHandle(vt){this.workspace.markFocused(),this.cleanUp(),pn(vt)?vt.stopPropagation():(this.startDragHandle=this.handlePosition,this.workspace.setupDragSurface(),this.startDragMouse=this.horizontal?vt.clientX:vt.clientY,this.onMouseUpWrapper_=Zt(document,"pointerup",this,this.onMouseUpHandle),this.onMouseMoveWrapper_=Zt(document,"pointermove",this,this.onMouseMoveHandle),vt.stopPropagation(),vt.preventDefault())}onMouseMoveHandle(vt){this.setHandlePosition(this.constrainHandlePosition(this.startDragHandle+((this.horizontal?vt.clientX:vt.clientY)-this.startDragMouse))),this.updateMetrics()}onMouseUpHandle(){this.workspace.resetDragSurface(),Ct(),this.cleanUp()}cleanUp(){this.workspace.hideChaff(!0),this.onMouseUpWrapper_&&(cn(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(cn(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}getRatio_(){let vt=this.handlePosition/(this.scrollbarLength-this.handleLength);return isNaN(vt)&&(vt=0),vt}updateMetrics(){const vt=this.getRatio_();this.horizontal?this.workspace.setMetrics({x:vt}):this.workspace.setMetrics({y:vt})}set(vt,Et){this.setHandlePosition(this.constrainHandlePosition(vt*this.ratio)),(Et||Et===void 0)&&this.updateMetrics()}setOrigin(vt,Et){this.origin=new Zr(vt,Et)}static metricsAreEquivalent(vt,Et){return vt.viewWidth===Et.viewWidth&&vt.viewHeight===Et.viewHeight&&vt.viewLeft===Et.viewLeft&&vt.viewTop===Et.viewTop&&vt.absoluteTop===Et.absoluteTop&&vt.absoluteLeft===Et.absoluteLeft&&vt.scrollWidth===Et.scrollWidth&&vt.scrollHeight===Et.scrollHeight&&vt.scrollLeft===Et.scrollLeft&&vt.scrollTop===Et.scrollTop}};bs.scrollbarThickness=Dy?25:15,bs.DEFAULT_SCROLLBAR_MARGIN=.5;var ko=class{constructor(vt,Et,Dt,Ft,Kt,yn){this.resizeGroup=this.bubbleBack=this.bubbleArrow=this.bubbleGroup=null,this.height=this.width=this.relativeTop=this.relativeLeft=0,this.autoLayout=!0,this.onMouseDownResizeWrapper=this.onMouseDownBubbleWrapper=this.moveCallback=this.resizeCallback=null,this.rendered=this.disposed=!1,this.workspace_=vt,this.content_=Et,this.shape_=Dt,Dt=ko.ARROW_ANGLE,this.workspace_.RTL&&(Dt=-Dt),this.arrowRadians=to(Dt),vt.getBubbleCanvas().appendChild(this.createDom(Et,!(!Kt||!yn))),this.setAnchorLocation(Ft),Kt&&yn||(vt=this.content_.getBBox(),Kt=vt.width+2*ko.BORDER_WIDTH,yn=vt.height+2*ko.BORDER_WIDTH),this.setBubbleSize(Kt,yn),this.positionBubble(),this.renderArrow(),this.rendered=!0}createDom(vt,Et){this.bubbleGroup=In(ar.G,{});var Dt={filter:"url(#"+this.workspace_.getRenderer().getConstants().embossFilterId+")"};return Hr&&(Dt={}),Dt=In(ar.G,Dt,this.bubbleGroup),this.bubbleArrow=In(ar.PATH,{},Dt),this.bubbleBack=In(ar.RECT,{class:"blocklyDraggable",x:0,y:0,rx:ko.BORDER_WIDTH,ry:ko.BORDER_WIDTH},Dt),Et?(this.resizeGroup=In(ar.G,{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup),Et=2*ko.BORDER_WIDTH,In(ar.POLYGON,{points:"0,x x,x x,0".replace(/x/g,Et.toString())},this.resizeGroup),In(ar.LINE,{class:"blocklyResizeLine",x1:Et/3,y1:Et-1,x2:Et-1,y2:Et/3},this.resizeGroup),In(ar.LINE,{class:"blocklyResizeLine",x1:2*Et/3,y1:Et-1,x2:Et-1,y2:2*Et/3},this.resizeGroup)):this.resizeGroup=null,this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper=Zt(this.bubbleBack,"pointerdown",this,this.bubbleMouseDown),this.resizeGroup&&(this.onMouseDownResizeWrapper=Zt(this.resizeGroup,"pointerdown",this,this.resizeMouseDown))),this.bubbleGroup.appendChild(vt),this.bubbleGroup}getSvgRoot(){return this.bubbleGroup}setSvgId(vt){let Et;(Et=this.bubbleGroup)==null||Et.setAttribute("data-block-id",vt)}bubbleMouseDown(vt){const Et=this.workspace_.getGesture(vt);Et&&Et.handleBubbleStart(vt,this)}showContextMenu(vt){}isDeletable(){return!1}setDeleteStyle(vt){}resizeMouseDown(vt){this.promote(),ko.unbindDragEvents(),pn(vt)||(this.workspace_.startDrag(vt,new Zr(this.workspace_.RTL?-this.width:this.width,this.height)),ko.onMouseUpWrapper=Zt(document,"pointerup",this,ko.bubbleMouseUp),ko.onMouseMoveWrapper=Zt(document,"pointermove",this,this.resizeMouseMove),this.workspace_.hideChaff()),vt.stopPropagation()}resizeMouseMove(vt){this.autoLayout=!1,vt=this.workspace_.moveDrag(vt),this.setBubbleSize(this.workspace_.RTL?-vt.x:vt.x,vt.y),this.workspace_.RTL&&this.positionBubble()}registerResizeEvent(vt){this.resizeCallback=vt}registerMoveEvent(vt){this.moveCallback=vt}promote(){let vt;const Et=(vt=this.bubbleGroup)==null?void 0:vt.parentNode;return(Et==null?void 0:Et.lastChild)!==this.bubbleGroup&&this.bubbleGroup?(Et==null||Et.appendChild(this.bubbleGroup),!0):!1}setAnchorLocation(vt){this.anchorXY=vt,this.rendered&&this.positionBubble()}layoutBubble(){var vt=this.workspace_.getMetricsManager().getViewMetrics(!0),Et=this.getOptimalRelativeLeft(vt),Dt=this.getOptimalRelativeTop(vt),Ft=this.shape_.getBBox();const Kt={x:Et,y:-this.height-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},yn={x:-this.width-30,y:Dt};Dt={x:Ft.width,y:Dt};var Mn={x:Et,y:Ft.height};Et=Ft.width<Ft.height?Dt:Mn,Ft=Ft.width<Ft.height?Mn:Dt,Dt=this.getOverlap(Kt,vt),Mn=this.getOverlap(yn,vt);const qn=this.getOverlap(Et,vt);vt=this.getOverlap(Ft,vt),vt=Math.max(Dt,Mn,qn,vt),Dt===vt?(this.relativeLeft=Kt.x,this.relativeTop=Kt.y):Mn===vt?(this.relativeLeft=yn.x,this.relativeTop=yn.y):qn===vt?(this.relativeLeft=Et.x,this.relativeTop=Et.y):(this.relativeLeft=Ft.x,this.relativeTop=Ft.y)}getOverlap(vt,Et){var Dt=this.workspace_.RTL?this.anchorXY.x-vt.x-this.width:vt.x+this.anchorXY.x;return vt=vt.y+this.anchorXY.y,Math.max(0,Math.min(1,(Math.min(Dt+this.width,Et.left+Et.width)-Math.max(Dt,Et.left))*(Math.min(vt+this.height,Et.top+Et.height)-Math.max(vt,Et.top))/(this.width*this.height)))}getOptimalRelativeLeft(vt){let Et=-this.width/4;if(this.width>vt.width)return Et;if(this.workspace_.RTL){var Dt=this.anchorXY.x-Et,Ft=vt.left+vt.width;vt=vt.left+bs.scrollbarThickness/this.workspace_.scale,Dt-this.width<vt?Et=-(vt-this.anchorXY.x+this.width):Dt>Ft&&(Et=-(Ft-this.anchorXY.x))}else{Dt=Et+this.anchorXY.x,Ft=Dt+this.width;const Kt=vt.left;vt=vt.left+vt.width-bs.scrollbarThickness/this.workspace_.scale,Dt<Kt?Et=Kt-this.anchorXY.x:Ft>vt&&(Et=vt-this.anchorXY.x-this.width)}return Et}getOptimalRelativeTop(vt){let Et=-this.height/4;if(this.height>vt.height)return Et;const Dt=this.anchorXY.y+Et,Ft=Dt+this.height,Kt=vt.top;vt=vt.top+vt.height-bs.scrollbarThickness/this.workspace_.scale;const yn=this.anchorXY.y;return Dt<Kt?Et=Kt-yn:Ft>vt&&(Et=vt-yn-this.height),Et}positionBubble(){let vt=this.anchorXY.x;vt=this.workspace_.RTL?vt-(this.relativeLeft+this.width):vt+this.relativeLeft,this.moveTo(vt,this.relativeTop+this.anchorXY.y)}moveTo(vt,Et){let Dt;(Dt=this.bubbleGroup)==null||Dt.setAttribute("transform","translate("+vt+","+Et+")")}setDragging(vt){!vt&&this.moveCallback&&this.moveCallback()}getBubbleSize(){return new qs(this.width,this.height)}setBubbleSize(vt,Et){const Dt=2*ko.BORDER_WIDTH;vt=Math.max(vt,Dt+45),Et=Math.max(Et,Dt+20),this.width=vt,this.height=Et;let Ft;(Ft=this.bubbleBack)==null||Ft.setAttribute("width",vt.toString());let Kt;(Kt=this.bubbleBack)==null||Kt.setAttribute("height",Et.toString()),this.resizeGroup&&(this.workspace_.RTL?this.resizeGroup.setAttribute("transform","translate("+2*ko.BORDER_WIDTH+","+(Et-Dt)+") scale(-1 1)"):this.resizeGroup.setAttribute("transform","translate("+(vt-Dt)+","+(Et-Dt)+")")),this.autoLayout&&this.layoutBubble(),this.positionBubble(),this.renderArrow(),this.resizeCallback&&this.resizeCallback()}renderArrow(){const vt=[];var Et=this.width/2,Dt=this.height/2,Ft=-this.relativeLeft,Kt=-this.relativeTop;if(Et===Ft&&Dt===Kt)vt.push("M "+Et+","+Dt);else{Kt-=Dt,Ft-=Et,this.workspace_.RTL&&(Ft*=-1);var yn=Math.sqrt(Kt*Kt+Ft*Ft),Mn=Math.acos(Ft/yn);0>Kt&&(Mn=2*Math.PI-Mn);var qn=Mn+Math.PI/2;qn>2*Math.PI&&(qn-=2*Math.PI);var Cr=Math.sin(qn);const gs=Math.cos(qn);var qr=this.getBubbleSize();qn=(qr.width+qr.height)/ko.ARROW_THICKNESS,qn=Math.min(qn,qr.width,qr.height)/4,qr=1-ko.ANCHOR_RADIUS/yn,Ft=Et+qr*Ft,Kt=Dt+qr*Kt,qr=Et+qn*gs;const Tu=Dt+qn*Cr;Et-=qn*gs,Dt-=qn*Cr,Cr=Mn+this.arrowRadians,Cr>2*Math.PI&&(Cr-=2*Math.PI),Mn=Math.sin(Cr)*yn/ko.ARROW_BEND,yn=Math.cos(Cr)*yn/ko.ARROW_BEND,vt.push("M"+qr+","+Tu),vt.push("C"+(qr+yn)+","+(Tu+Mn)+" "+Ft+","+Kt+" "+Ft+","+Kt),vt.push("C"+Ft+","+Kt+" "+(Et+yn)+","+(Dt+Mn)+" "+Et+","+Dt)}vt.push("z");let jo;(jo=this.bubbleArrow)==null||jo.setAttribute("d",vt.join(" "))}setColour(vt){let Et;(Et=this.bubbleBack)==null||Et.setAttribute("fill",vt);let Dt;(Dt=this.bubbleArrow)==null||Dt.setAttribute("fill",vt)}dispose(){this.onMouseDownBubbleWrapper&&cn(this.onMouseDownBubbleWrapper),this.onMouseDownResizeWrapper&&cn(this.onMouseDownResizeWrapper),ko.unbindDragEvents(),br(this.bubbleGroup),this.disposed=!0}moveDuringDrag(vt,Et){vt?vt.translateSurface(Et.x,Et.y):this.moveTo(Et.x,Et.y),this.relativeLeft=this.workspace_.RTL?this.anchorXY.x-Et.x-this.width:Et.x-this.anchorXY.x,this.relativeTop=Et.y-this.anchorXY.y,this.renderArrow()}getRelativeToSurfaceXY(){return new Zr(this.workspace_.RTL?-this.relativeLeft+this.anchorXY.x-this.width:this.anchorXY.x+this.relativeLeft,this.anchorXY.y+this.relativeTop)}setAutoLayout(vt){this.autoLayout=vt}static unbindDragEvents(){ko.onMouseUpWrapper&&(cn(ko.onMouseUpWrapper),ko.onMouseUpWrapper=null),ko.onMouseMoveWrapper&&(cn(ko.onMouseMoveWrapper),ko.onMouseMoveWrapper=null)}static bubbleMouseUp(vt){Ct(),ko.unbindDragEvents()}static textToDom(vt){const Et=In(ar.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:ko.BORDER_WIDTH});vt=vt.split(`
`);for(let Dt=0;Dt<vt.length;Dt++){const Ft=In(ar.TSPAN,{dy:"1em",x:ko.BORDER_WIDTH},Et),Kt=document.createTextNode(vt[Dt]);Ft.appendChild(Kt)}return Et}static createNonEditableBubble(vt,Et,Dt){if(Dt=new ko(Et.workspace,vt,Et.pathObject.svgPath,Dt,null,null),Dt.setSvgId(Et.id),Et.RTL){Et=vt.getBBox().width;for(let Ft=0,Kt;Kt=vt.childNodes[Ft];Ft++)Kt.setAttribute("text-anchor","end"),Kt.setAttribute("x",(Et+ko.BORDER_WIDTH).toString())}return Dt}};ko.BORDER_WIDTH=6,ko.ARROW_THICKNESS=5,ko.ARROW_ANGLE=20,ko.ARROW_BEND=4,ko.ANCHOR_RADIUS=8,ko.onMouseUpWrapper=null,ko.onMouseMoveWrapper=null;var zS,_T;zS=28,lt.config$$module$build$src$core$config={dragRadius:5,flyoutDragRadius:10,snapRadius:zS,connectingSnapRadius:zS,currentConnectionPreference:8,bumpDelay:250},_T={},_T.config=lt.config$$module$build$src$core$config;var Vv=class{constructor(vt){this.iconGroup_=null,this.collapseHidden=!0,this.SIZE=17,this.iconXY_=this.bubble_=null,vt||ft("Calling the Icon constructor with a null block","version 9","version 10","a non-null block"),this.block_=vt}createIcon(){this.iconGroup_||(this.iconGroup_=In(ar.G,{class:"blocklyIconGroup"}),this.getBlock().isInFlyout&&ir(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.getBlock().getSvgRoot().appendChild(this.iconGroup_),Zt(this.iconGroup_,"pointerup",this,this.iconClick_),this.updateEditable())}dispose(){br(this.iconGroup_),this.setVisible(!1)}updateEditable(){}isVisible(){return!!this.bubble_}iconClick_(vt){this.getBlock().workspace.isDragging()||this.getBlock().isInFlyout||pn(vt)||this.setVisible(!this.isVisible())}applyColour(){this.bubble_&&this.isVisible()&&this.bubble_.setColour(this.getBlock().style.colourPrimary)}setIconLocation(vt){this.iconXY_=vt,this.bubble_&&this.isVisible()&&this.bubble_.setAnchorLocation(vt)}computeIconLocation(){var vt=this.getBlock().getRelativeToSurfaceXY();const Et=Pl(this.iconGroup_);vt=new Zr(vt.x+Et.x+this.SIZE/2,vt.y+Et.y+this.SIZE/2),Zr.equals(this.getIconLocation(),vt)||this.setIconLocation(vt)}getIconLocation(){return this.iconXY_}getCorrectedSize(){return new qs(this.SIZE,this.SIZE-2)}drawIcon_(vt){}setVisible(vt){}getBlock(){if(!this.block_)throw Error("Block is not set for this icon.");return this.block_}},r0={};r0.deepMerge=tp,r0.inherits=Um,r0.mixin=Vm,r0.values=Xs;var p_=class{constructor(vt,Et,Dt,Ft){this.name=vt,this.startHats=!1,this.blockStyles=Et||Object.create(null),this.categoryStyles=Dt||Object.create(null),this.componentStyles=Ft||Object.create(null),this.fontStyle=Object.create(null),xo(Wr.THEME,vt,this)}getClassName(){return this.name+"-theme"}setBlockStyle(vt,Et){this.blockStyles[vt]=Et}setCategoryStyle(vt,Et){this.categoryStyles[vt]=Et}getComponentStyle(vt){return(vt=this.componentStyles[vt])&&typeof vt=="string"&&this.getComponentStyle(vt)?this.getComponentStyle(vt):vt?String(vt):null}setComponentStyle(vt,Et){this.componentStyles[vt]=Et}setFontStyle(vt){this.fontStyle=vt}setStartHats(vt){this.startHats=vt}static defineTheme(vt,Et){vt=vt.toLowerCase();const Dt=new p_(vt);let Ft=Et.base;if(Ft){if(typeof Ft=="string"){let Kt;Ft=(Kt=Rr(Wr.THEME,Ft))!=null?Kt:void 0}Ft instanceof p_&&(tp(Dt,Ft),Dt.name=vt)}return tp(Dt.blockStyles,Et.blockStyles),tp(Dt.categoryStyles,Et.categoryStyles),tp(Dt.componentStyles,Et.componentStyles),tp(Dt.fontStyle,Et.fontStyle),Et.startHats!==null&&(Dt.startHats=Et.startHats),Dt}},JE={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},ex={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},Wv=new p_("classic",JE,ex),jS="categoryToolbox",OT="flyoutToolbox",Co;(function(vt){vt[vt.TOP=0]="TOP",vt[vt.BOTTOM=1]="BOTTOM",vt[vt.LEFT=2]="LEFT",vt[vt.RIGHT=3]="RIGHT"})(Co||(Co={}));var yT={hasCategoriesInternal:Au},Sm={};Sm.Position=Co,Sm.TEST_ONLY=yT,Sm.convertFlyoutDefToJsonArray=om,Sm.convertToolboxDefToJson=im,Sm.hasCategories=_u,Sm.isCategoryCollapsible=Vu,Sm.parseToolboxTree=ry;var Ju=class{constructor(vt){this.gridPattern=null,this.getMetrics=this.setMetrics=void 0;let Et=null,Dt=!1;var Ft=!1,Kt=!1,yn=!1,Mn=!1,qn=!1;const Cr=!!vt.readOnly;if(!Cr){var qr;Et=im((qr=vt.toolbox)!=null?qr:null),Dt=_u(Et),Ft=vt.trashcan,Ft=Ft===void 0?Dt:Ft,Kt=vt.collapse,Kt=Kt===void 0?Dt:Kt,yn=vt.comments,yn=yn===void 0?Dt:yn,Mn=vt.disable,Mn=Mn===void 0?Dt:Mn,qn=vt.sounds,qn=qn===void 0?!0:qn}qr=vt.maxTrashcanContents,Ft?qr===void 0&&(qr=32):qr=0;const jo=!!vt.rtl;let gs=vt.horizontalLayout;gs===void 0&&(gs=!1);var Tu=vt.toolboxPosition!=="end";Tu=gs?Tu?Co.TOP:Co.BOTTOM:Tu===jo?Co.RIGHT:Co.LEFT;let Z$=vt.css;Z$===void 0&&(Z$=!0);let q$="https://blockly-demo.appspot.com/static/media/";vt.media?q$=vt.media.endsWith("/")?vt.media:vt.media+"/":"path"in vt&&(ft("path","Nov 2014","Jul 2023","media"),q$=vt.path+"media/");const BE=vt.oneBasedIndex,Dx=vt.renderer||"geras",Nx=vt.plugins||{};let K$=vt.modalInputs;K$===void 0&&(K$=!0),this.RTL=jo,this.oneBasedIndex=BE===void 0?!0:BE,this.collapse=Kt,this.comments=yn,this.disable=Mn,this.readOnly=Cr,this.maxBlocks=vt.maxBlocks||1/0;let FE;this.maxInstances=(FE=vt.maxInstances)!=null?FE:null,this.modalInputs=K$,this.pathToMedia=q$,this.hasCategories=Dt,this.moveOptions=Ju.parseMoveOptions_(vt,Dt),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=Ft,this.maxTrashcanContents=qr,this.hasSounds=qn,this.hasCss=Z$,this.horizontalLayout=gs,this.languageTree=Et,this.gridOptions=Ju.parseGridOptions_(vt),this.zoomOptions=Ju.parseZoomOptions_(vt),this.toolboxPosition=Tu,this.theme=Ju.parseThemeOptions_(vt),this.renderer=Dx;let GE;this.rendererOverrides=(GE=vt.rendererOverrides)!=null?GE:null;let UE;this.parentWorkspace=(UE=vt.parentWorkspace)!=null?UE:null,this.plugins=Nx}static parseMoveOptions_(vt,Et){const Dt=vt.move||{},Ft={};return Dt.scrollbars===void 0&&vt.scrollbars===void 0?Ft.scrollbars=Et:typeof Dt.scrollbars=="object"?(Ft.scrollbars={horizontal:!!Dt.scrollbars.horizontal,vertical:!!Dt.scrollbars.vertical},Ft.scrollbars.horizontal&&Ft.scrollbars.vertical?Ft.scrollbars=!0:Ft.scrollbars.horizontal||Ft.scrollbars.vertical||(Ft.scrollbars=!1)):Ft.scrollbars=!!Dt.scrollbars||!!vt.scrollbars,Ft.wheel=Ft.scrollbars&&Dt.wheel!==void 0?!!Dt.wheel:typeof Ft.scrollbars=="object",Ft.drag=Ft.scrollbars?Dt.drag===void 0?!0:!!Dt.drag:!1,Ft}static parseZoomOptions_(vt){vt=vt.zoom||{};const Et={};return Et.controls=vt.controls===void 0?!1:!!vt.controls,Et.wheel=vt.wheel===void 0?!1:!!vt.wheel,Et.startScale=vt.startScale===void 0?1:Number(vt.startScale),Et.maxScale=vt.maxScale===void 0?3:Number(vt.maxScale),Et.minScale=vt.minScale===void 0?.3:Number(vt.minScale),Et.scaleSpeed=vt.scaleSpeed===void 0?1.2:Number(vt.scaleSpeed),Et.pinch=vt.pinch===void 0?Et.wheel||Et.controls:!!vt.pinch,Et}static parseGridOptions_(vt){vt=vt.grid||{};const Et={};return Et.spacing=Number(vt.spacing)||0,Et.colour=vt.colour||"#888",Et.length=vt.length===void 0?1:Number(vt.length),Et.snap=0<Et.spacing&&!!vt.snap,Et}static parseThemeOptions_(vt){return vt=vt.theme||Wv,typeof vt=="string"?Rr(Wr.THEME,vt):vt instanceof p_?vt:p_.defineTheme(vt.name||"builtin"+Lo(),vt)}},vT;lt.Mutator$$module$build$src$core$mutator=class extends Vv{constructor(vt,Et){Et||ft("Calling the Mutator constructor without passing the block it is attached to","version 9","version 10","the constructor by passing the list of subblocks and the block instance to attach the mutator to"),super(Et??null),this.workspace_=null,this.workspaceHeight=this.workspaceWidth=0,this.updateWorkspacePid=this.sourceListener=this.rootBlock=this.svgDialog=null,this.quarkNames=vt}setBlock(vt){this.block_=vt}getWorkspace(){return this.workspace_}drawIcon_(vt){In(ar.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},vt),In(ar.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},vt),In(ar.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},vt)}iconClick_(vt){this.getBlock().isEditable()&&super.iconClick_(vt)}createEditor(){if(this.svgDialog=In(ar.SVG,{x:ko.BORDER_WIDTH,y:ko.BORDER_WIDTH}),this.quarkNames.length){var vt=No("xml");for(let Ft=0,Kt;Kt=this.quarkNames[Ft];Ft++){var Et=No("block");Et.setAttribute("type",Kt),vt.appendChild(Et)}}else vt=null;var Dt=this.getBlock();return Et=new Ju({disable:!1,parentWorkspace:Dt.workspace,media:Dt.workspace.options.pathToMedia,rtl:Dt.RTL,horizontalLayout:!1,renderer:Dt.workspace.options.renderer,rendererOverrides:Dt.workspace.options.rendererOverrides}),Et.toolboxPosition=Dt.RTL?Co.RIGHT:Co.LEFT,(Dt=!!vt)&&(Et.languageTree=im(vt)),this.workspace_=this.newWorkspaceSvg(Et),this.workspace_.internalIsMutator=!0,this.workspace_.addChangeListener(Yo),vt=Dt?this.workspace_.addFlyout(ar.G):null,Et=this.workspace_.createDom("blocklyMutatorBackground"),vt&&Et.insertBefore(vt,this.workspace_.svgBlockCanvas_),this.svgDialog.appendChild(Et),this.svgDialog}newWorkspaceSvg(vt){throw Error("The implementation of newWorkspaceSvg should be monkey-patched in by blockly.ts")}updateEditable(){super.updateEditable(),this.getBlock().isInFlyout||(this.getBlock().isEditable()?this.iconGroup_&&Jn(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&ir(this.iconGroup_,"blocklyIconGroupReadonly")))}resizeBubble(){if(this.workspace_){var vt=2*ko.BORDER_WIDTH,Et=this.workspace_.getCanvas(),Dt=Et.getBBox(),Ft=Dt.width+Dt.x,Kt=Dt.height+3*vt,yn=this.workspace_.getFlyout();if(yn){const Mn=yn.getWorkspace().getMetricsManager().getScrollMetrics();Kt=Math.max(Kt,Mn.height+20),Ft+=yn.getWidth()}(yn=this.getBlock().RTL)&&(Ft=-Dt.x),Ft+=3*vt,(Math.abs(this.workspaceWidth-Ft)>vt||Math.abs(this.workspaceHeight-Kt)>vt)&&(this.workspaceWidth=Ft,this.workspaceHeight=Kt,this.bubble_.setBubbleSize(Ft+vt,Kt+vt),this.svgDialog.setAttribute("width",`${Ft}`),this.svgDialog.setAttribute("height",`${Kt}`),this.workspace_.setCachedParentSvgSize(Ft,Kt)),yn&&Et.setAttribute("transform",`translate(${this.workspaceWidth}, 0)`),this.workspace_.resize()}}onBubbleMove(){this.workspace_&&this.workspace_.recordDragTargets()}setVisible(vt){if(vt!==this.isVisible()){var Et=this.getBlock();if(Fr(new(Vr(Fp))(Et,vt,"mutator")),vt){this.bubble_=new ko(Et.workspace,this.createEditor(),Et.pathObject.svgPath,this.iconXY_,null,null),vt=this.workspace_,this.bubble_.setSvgId(Et.id),this.bubble_.registerMoveEvent(this.onBubbleMove.bind(this));var Dt=vt.options.languageTree,Ft=vt.getFlyout();Dt&&(Ft.init(vt),Ft.show(Dt)),this.rootBlock=Et.decompose(vt),Dt=this.rootBlock.getDescendants(!1);for(let Kt=0,yn;yn=Dt[Kt];Kt++)yn.render();if(this.rootBlock.setMovable(!1),this.rootBlock.setDeletable(!1),Ft?(Dt=2*Ft.CORNER_RADIUS,Ft=this.rootBlock.RTL?Ft.getWidth()+Dt:Dt):Ft=Dt=16,Et.RTL&&(Ft=-Ft),this.rootBlock.moveBy(Ft,Dt),Et.saveConnections){const Kt=this.rootBlock;Et.saveConnections(Kt),this.sourceListener=()=>{const yn=this.getBlock();yn.saveConnections&&yn.saveConnections(Kt)},Et.workspace.addChangeListener(this.sourceListener)}this.resizeBubble(),vt.addChangeListener(this.workspaceChanged.bind(this)),this.updateWorkspace(),this.applyColour()}else this.svgDialog=null,this.workspace_.dispose(),this.rootBlock=this.workspace_=null,(Ft=this.bubble_)==null||Ft.dispose(),this.bubble_=null,this.workspaceHeight=this.workspaceWidth=0,this.sourceListener&&(Et.workspace.removeChangeListener(this.sourceListener),this.sourceListener=null)}}workspaceChanged(vt){this.shouldIgnoreMutatorEvent_(vt)||this.updateWorkspacePid||(this.updateWorkspacePid=setTimeout(()=>{this.updateWorkspacePid=null,this.updateWorkspace()},0))}shouldIgnoreMutatorEvent_(vt){return vt.isUiEvent||vt.type===$l||vt.type===Qs&&vt.element==="disabled"}updateWorkspace(){if(!this.workspace_.isDragging()){var vt=this.workspace_.getTopBlocks(!1);for(let Ft=0,Kt;Kt=vt[Ft];Ft++){var Et=Kt.getRelativeToSurfaceXY();if(20>Et.y&&Kt.moveBy(0,20-Et.y),Kt.RTL){var Dt=-20;const yn=this.workspace_.getFlyout();yn&&(Dt-=yn.getWidth()),Et.x>Dt&&Kt.moveBy(Dt-Et.x,0)}else 20>Et.x&&Kt.moveBy(20-Et.x,0)}}if(this.rootBlock&&this.rootBlock.workspace===this.workspace_){(vt=Ro())||io(!0);const Ft=this.getBlock();if(Et=f_.getExtraBlockState_(Ft),Dt=Ft.rendered,Ft.rendered=!1,Ft.compose(this.rootBlock),Ft.rendered=Dt,Ft.initSvg(),Ft.rendered&&Ft.render(),Dt=f_.getExtraBlockState_(Ft),Et!==Dt){Fr(new(Vr(Qs))(Ft,"mutation",null,Et,Dt));const Kt=Ro();setTimeout(function(){const yn=Ro();io(Kt),Ft.bumpNeighbours(),io(yn)},lt.config$$module$build$src$core$config.bumpDelay)}this.workspace_.isDragging()||setTimeout(()=>this.resizeBubble(),0),io(vt)}}dispose(){this.getBlock().mutator=null,super.dispose()}updateBlockStyle(){var vt=this.workspace_;if(vt&&vt.getAllBlocks(!1)){const Et=vt.getAllBlocks(!1);for(let Dt=0,Ft;Ft=Et[Dt];Dt++)Ft.setStyle(Ft.getStyleName());if(vt=vt.getFlyout()){vt=vt.getWorkspace().getAllBlocks(!1);for(let Dt=0,Ft;Ft=vt[Dt];Dt++)Ft.setStyle(Ft.getStyleName())}}}static reconnect(vt,Et,Dt){if(!vt||!vt.getSourceBlock().workspace)return!1;Dt=Et.getInput(Dt).connection;const Ft=vt.targetBlock();return Ft&&Ft!==Et||!Dt||Dt.targetConnection===vt?!1:(Dt.isConnected()&&Dt.disconnect(),Dt.connect(vt),!0)}static findParentWs(vt){let Et=null;if(vt&&vt.options){const Dt=vt.options.parentWorkspace;vt.isFlyout?Dt&&Dt.options&&(Et=Dt.options.parentWorkspace):Dt&&(Et=Dt)}return Et}},vT={},vT.Mutator=lt.Mutator$$module$build$src$core$mutator;var bO=Object.create(null),tx={allExtensions:bO};Wm("parent_tooltip_when_inline",oS),lt.module$build$src$core$extensions={},lt.module$build$src$core$extensions.TEST_ONLY=tx,lt.module$build$src$core$extensions.apply=Ip,lt.module$build$src$core$extensions.buildTooltipForDropdown=oy,lt.module$build$src$core$extensions.buildTooltipWithFieldText=W0,lt.module$build$src$core$extensions.isRegistered=N_,lt.module$build$src$core$extensions.register=Wm,lt.module$build$src$core$extensions.registerMixin=N0,lt.module$build$src$core$extensions.registerMutator=B0,lt.module$build$src$core$extensions.runAfterPageLoad=Qm,lt.module$build$src$core$extensions.unregister=F0;var bT={};bT.removeElem=xa;var Up={};Up.arc=$s,Up.curve=Gl,Up.line=am,Up.lineOnAxis=_i,Up.lineTo=Ru,Up.moveBy=as,Up.moveTo=Us,Up.point=go;var Ho={};Ho.Coordinate=Zr,Ho.KeyCodes=lo,Ho.Rect=xs,Ho.Size=qs,Ho.Svg=ar,Ho.aria=n0,Ho.array=bT,Ho.arrayRemove=z0,Ho.browserEvents=yr,Ho.checkMessageReferences=lS,Ho.colour=Rl,Ho.deprecation=Es,Ho.dom=Fs,Ho.extensions=lt.module$build$src$core$extensions,Ho.getBlockTypeCounts=X0,Ho.getDocumentScroll=j0,Ho.getInjectionDivXY_=aS,Ho.getRelativeXY=sS,Ho.getViewportBBox=H0,Ho.idGenerator=Ev,Ho.is3dSupported=Q0,Ho.math=Sv,Ho.object=r0,Ho.parseBlockColour=Y0,Ho.parsing=e0,Ho.replaceMessageReferences=ay,Ho.runAfterPageLoad=Hm,Ho.screenToWsCoordinates=Iu,Ho.string=lt.module$build$src$core$utils$string,Ho.style=fp,Ho.svgMath=bm,Ho.svgPaths=Up,Ho.tokenizeInterpolation=sy,Ho.toolbox=Sm,Ho.userAgent=As,Ho.xml=lt.module$build$src$core$utils$xml;var XS=class extends Yu{constructor(vt,Et){super(Et),this.type=Wy,this.isOpen=vt}toJson(){const vt=super.toJson();if(this.isOpen===void 0)throw Error("Whether this is already open or not is undefined. Either pass a value to the constructor, or call fromJson");return vt.isOpen=this.isOpen,vt}fromJson(vt){ft("Blockly.Events.TrashcanOpen.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(vt),this.isOpen=vt.isOpen}static fromJson(vt,Et,Dt){return Et=super.fromJson(vt,Et,Dt??new XS),Et.isOpen=vt.isOpen,Et}};xo(Wr.EVENT,Wy,XS);var Vp=class{constructor(vt){this.name_=vt}toString(){return this.name_}};Vp.POSITIONABLE=new Vp("positionable"),Vp.DRAG_TARGET=new Vp("drag_target"),Vp.DELETE_AREA=new Vp("delete_area"),Vp.AUTOHIDEABLE=new Vp("autohideable");var Ks=class{constructor(){this.componentData=new Map,this.capabilityToComponentIds=new Map}addComponent(vt,Et){const Dt=vt.component.id;if(!Et&&this.componentData.has(Dt)){var Ft;throw Error('Plugin "'+Dt+'" with capabilities "'+((Ft=this.componentData.get(Dt))==null?void 0:Ft.capabilities)+'" already added.')}for(this.componentData.set(Dt,vt),Et=[],Ft=0;Ft<vt.capabilities.length;Ft++){const Kt=String(vt.capabilities[Ft]).toLowerCase();if(Et.push(Kt),this.capabilityToComponentIds.has(Kt)){let yn;(yn=this.capabilityToComponentIds.get(Kt))==null||yn.push(Dt)}else this.capabilityToComponentIds.set(Kt,[Dt])}this.componentData.get(Dt).capabilities=Et}removeComponent(vt){const Et=this.componentData.get(vt);if(Et){for(let Dt=0;Dt<Et.capabilities.length;Dt++){const Ft=String(Et.capabilities[Dt]).toLowerCase();xa(this.capabilityToComponentIds.get(Ft),vt)}this.componentData.delete(vt)}}addCapability(vt,Et){if(!this.getComponent(vt))throw Error('Cannot add capability, "'+Et+'". Plugin "'+vt+'" has not been added to the ComponentManager');if(this.hasCapability(vt,Et))console.warn('Plugin "'+vt+'already has capability "'+Et+'"');else{Et=String(Et).toLowerCase();var Dt;(Dt=this.componentData.get(vt))==null||Dt.capabilities.push(Et);var Ft;(Ft=this.capabilityToComponentIds.get(Et))==null||Ft.push(vt)}}removeCapability(vt,Et){if(!this.getComponent(vt))throw Error('Cannot remove capability, "'+Et+'". Plugin "'+vt+'" has not been added to the ComponentManager');this.hasCapability(vt,Et)?(Et=String(Et).toLowerCase(),xa(this.componentData.get(vt).capabilities,Et),xa(this.capabilityToComponentIds.get(Et),vt)):console.warn('Plugin "'+vt+`doesn't have capability "`+Et+'" to remove')}hasCapability(vt,Et){return Et=String(Et).toLowerCase(),this.componentData.has(vt)&&this.componentData.get(vt).capabilities.indexOf(Et)!==-1}getComponent(vt){let Et;return(Et=this.componentData.get(vt))==null?void 0:Et.component}getComponents(vt,Et){if(vt=String(vt).toLowerCase(),vt=this.capabilityToComponentIds.get(vt),!vt)return[];const Dt=[];if(Et){const Ft=[];vt.forEach(Kt=>{Ft.push(this.componentData.get(Kt))}),Ft.sort(function(Kt,yn){return Kt.weight-yn.weight}),Ft.forEach(function(Kt){Dt.push(Kt.component)})}else vt.forEach(Ft=>{Dt.push(this.componentData.get(Ft).component)});return Dt}};Ks.Capability=Vp;var i0=class extends Error{},ST=class extends i0{constructor(vt){super("Expected to find a 'type' property, defining the block type"),this.state=vt}},o0=class extends i0{constructor(vt,Et,Dt){super(`The block ${Et.toDevString()} is missing a(n) ${vt}
connection`),this.block=Et,this.state=Dt}},$T=class extends i0{constructor(vt,Et,Dt,Ft){super(`The block ${Dt.toDevString()} could not connect its
${Et} to its parent, because: ${vt}`),this.childBlock=Dt,this.childState=Ft}},TT=class extends i0{constructor(vt){super(`Encountered a real block which is defined as a child of a shadow
block. It is an invariant of Blockly that shadow blocks only have shadow
children`),this.state=vt}},SO={};SO.BadConnectionCheck=$T,SO.DeserializationError=i0,SO.MissingBlockType=ST,SO.MissingConnection=o0,SO.RealChildOfShadow=TT;var ET=100,xT=75,wT=50,Qv={};Qv.BLOCKS=wT,Qv.PROCEDURES=xT,Qv.VARIABLES=ET;var YS={};YS.register=Mp,YS.unregister=V_;var CT=class{constructor(){this.priority=wT}save(vt){const Et=[];for(const Dt of vt.getTopBlocks(!1))(vt=eu(Dt,{addCoordinates:!0,doFullSerialization:!1}))&&Et.push(vt);return Et.length?{languageVersion:0,blocks:Et}:null}load(vt,Et){vt=vt.blocks;for(const Dt of vt)np(Dt,Et,{recordUndo:wo()})}clear(vt){for(const Et of vt.getTopBlocks(!1))Et.dispose(!1)}};Mp("blocks",new CT);var s0={};s0.BlockSerializer=CT,s0.append=np,s0.appendInternal=W_,s0.save=eu;var ZS=class extends _O{constructor(vt){super(vt),this.type=$l,vt&&(vt.isShadow()&&(this.recordUndo=!1),this.xml=Ll(vt),this.ids=Xl(vt),this.json=eu(vt,{addCoordinates:!0}))}toJson(){const vt=super.toJson();if(!this.xml)throw Error("The block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");return vt.xml=Yl(this.xml),vt.ids=this.ids,vt.json=this.json,this.recordUndo||(vt.recordUndo=this.recordUndo),vt}fromJson(vt){ft("Blockly.Events.BlockCreate.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(vt),this.xml=na(vt.xml),this.ids=vt.ids,this.json=vt.json,vt.recordUndo!==void 0&&(this.recordUndo=vt.recordUndo)}static fromJson(vt,Et,Dt){return Et=super.fromJson(vt,Et,Dt??new ZS),Et.xml=na(vt.xml),Et.ids=vt.ids,Et.json=vt.json,vt.recordUndo!==void 0&&(Et.recordUndo=vt.recordUndo),Et}run(vt){const Et=this.getEventWorkspace_();if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(vt)np(this.json,Et);else for(vt=0;vt<this.ids.length;vt++){const Dt=this.ids[vt],Ft=Et.getBlockById(Dt);Ft?Ft.dispose(!1):Dt===this.blockId&&console.warn("Can't uncreate non-existent block: "+Dt)}}};xo(Wr.EVENT,$l,ZS);var qS=class extends _O{constructor(vt){if(super(vt),this.type=pp,vt){if(vt.getParent())throw Error("Connected blocks cannot be deleted.");vt.isShadow()&&(this.recordUndo=!1),this.oldXml=Ll(vt),this.ids=Xl(vt),this.wasShadow=vt.isShadow(),this.oldJson=eu(vt,{addCoordinates:!0})}}toJson(){const vt=super.toJson();if(!this.oldXml)throw Error("The old block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(this.wasShadow===void 0)throw Error("Whether the block was a shadow is undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");return vt.oldXml=Yl(this.oldXml),vt.ids=this.ids,vt.wasShadow=this.wasShadow,vt.oldJson=this.oldJson,this.recordUndo||(vt.recordUndo=this.recordUndo),vt}fromJson(vt){ft("Blockly.Events.BlockDelete.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(vt),this.oldXml=na(vt.oldXml),this.ids=vt.ids,this.wasShadow=vt.wasShadow||this.oldXml.tagName.toLowerCase()==="shadow",this.oldJson=vt.oldJson,vt.recordUndo!==void 0&&(this.recordUndo=vt.recordUndo)}static fromJson(vt,Et,Dt){return Et=super.fromJson(vt,Et,Dt??new qS),Et.oldXml=na(vt.oldXml),Et.ids=vt.ids,Et.wasShadow=vt.wasShadow||Et.oldXml.tagName.toLowerCase()==="shadow",Et.oldJson=vt.oldJson,vt.recordUndo!==void 0&&(Et.recordUndo=vt.recordUndo),Et}run(vt){const Et=this.getEventWorkspace_();if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(vt)for(vt=0;vt<this.ids.length;vt++){const Dt=this.ids[vt],Ft=Et.getBlockById(Dt);Ft?Ft.dispose(!1):Dt===this.blockId&&console.warn("Can't delete non-existent block: "+Dt)}else np(this.oldJson,Et)}};xo(Wr.EVENT,pp,qS);var no;(function(vt){vt[vt.INPUT_VALUE=1]="INPUT_VALUE",vt[vt.OUTPUT_VALUE=2]="OUTPUT_VALUE",vt[vt.NEXT_STATEMENT=3]="NEXT_STATEMENT",vt[vt.PREVIOUS_STATEMENT=4]="PREVIOUS_STATEMENT"})(no||(no={})),lt.module$build$src$core$connection_type={},lt.module$build$src$core$connection_type.ConnectionType=no;var qo=class{constructor(vt,Et){this.type=Et,this.targetConnection=null,this.disposed=!1,this.shadowDom_=this.check_=null,this.y=this.x=0,this.shadowState_=null,this.sourceBlock_=vt}connect_(vt){const Et=no.INPUT_VALUE,Dt=this.getSourceBlock();var Ft=vt.getSourceBlock();vt.isConnected()&&vt.disconnect();let Kt;if(this.isConnected()){const Mn=this.stashShadowState_(),qn=this.targetBlock();qn.isShadow()?qn.dispose(!1):(this.disconnect(),Kt=qn),this.applyShadowState_(Mn)}let yn;os()&&(yn=new(Vr(Wl))(Ft)),tv(this,vt),Ft.setParent(Dt),yn&&(yn.recordNew(),Fr(yn)),Kt&&(vt=this.type===Et?Kt.outputConnection:Kt.previousConnection,(Ft=qo.getConnectionForOrphanedConnection(Ft,vt))?vt.connect(Ft):vt.onFailedConnect(this))}dispose(){if(this.isConnected()){this.setShadowStateInternal_();const vt=this.targetBlock();vt&&vt.unplug()}this.disposed=!0}getSourceBlock(){return this.sourceBlock_}isSuperior(){return this.type===no.INPUT_VALUE||this.type===no.NEXT_STATEMENT}isConnected(){return!!this.targetConnection}getConnectionChecker(){return this.sourceBlock_.workspace.connectionChecker}onFailedConnect(vt){}connect(vt){if(this.targetConnection===vt)return!0;if(this.getConnectionChecker().canConnect(this,vt,!1)){const Et=Ro();Et||io(!0),this.isSuperior()?this.connect_(vt):vt.connect_(this),Et||io(!1)}return this.isConnected()}disconnect(){var vt=this.targetConnection;if(!vt)throw Error("Source connection not connected.");if(vt.targetConnection!==this)throw Error("Target connection not connected to source connection.");let Et,Dt;this.isSuperior()?(Et=this.sourceBlock_,Dt=vt.getSourceBlock(),vt=this):(Et=vt.getSourceBlock(),Dt=this.sourceBlock_);const Ft=Ro();Ft||io(!0),this.disconnectInternal_(Et,Dt),Dt.isShadow()||vt.respawnShadow_(),Ft||io(!1)}disconnectInternal_(vt,Et){let Dt;os()&&(Dt=new(Vr(Wl))(Et)),(vt=this.targetConnection)&&(vt.targetConnection=null),this.targetConnection=null,Et.setParent(null),Dt&&(Dt.recordNew(),Fr(Dt))}respawnShadow_(){this.createShadowBlock_(!0)}targetBlock(){if(this.isConnected()){let vt,Et;return(Et=(vt=this.targetConnection)==null?void 0:vt.getSourceBlock())!=null?Et:null}return null}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(vt){return vt?(Array.isArray(vt)||(vt=[vt]),this.check_=vt,this.onCheckChanged_()):this.check_=null,this}getCheck(){return this.check_}setShadowDom(vt){this.setShadowStateInternal_({shadowDom:vt})}getShadowDom(vt){return vt&&this.targetBlock().isShadow()?Bu(this.targetBlock()):this.shadowDom_}setShadowState(vt){this.setShadowStateInternal_({shadowState:vt})}getShadowState(vt){return vt&&this.targetBlock()&&this.targetBlock().isShadow()?eu(this.targetBlock()):this.shadowState_}neighbours(vt){return[]}getParentInput(){let vt=null;const Et=this.sourceBlock_.inputList;for(let Dt=0;Dt<Et.length;Dt++)if(Et[Dt].connection===this){vt=Et[Dt];break}return vt}toString(){const vt=this.sourceBlock_;if(!vt)return"Orphan Connection";if(vt.outputConnection===this)var Et="Output Connection of ";else if(vt.previousConnection===this)Et="Previous Connection of ";else if(vt.nextConnection===this)Et="Next Connection of ";else{Et=null;for(let Dt=0,Ft;Ft=vt.inputList[Dt];Dt++)if(Ft.connection===this){Et=Ft;break}if(Et)Et='Input "'+Et.name+'" connection on ';else return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection"}return Et+vt.toDevString()}stashShadowState_(){const vt=this.getShadowDom(!0),Et=this.getShadowState(!0);return this.shadowState_=this.shadowDom_=null,{shadowDom:vt,shadowState:Et}}applyShadowState_({shadowDom:vt,shadowState:Et}){this.shadowDom_=vt,this.shadowState_=Et}setShadowStateInternal_({shadowDom:vt=null,shadowState:Et=null}={}){this.shadowDom_=vt,this.shadowState_=Et,(vt=this.targetBlock())?vt.isShadow()?(vt.dispose(!1),this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow_(this.targetBlock())):(vt=this.createShadowBlock_(!1),this.serializeShadow_(vt),vt&&vt.dispose(!1)):(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow_(this.targetBlock()))}createShadowBlock_(vt){var Et=this.getSourceBlock();const Dt=this.getShadowState(),Ft=this.getShadowDom();if(Et.isDeadOrDying()||!Dt&&!Ft)return null;if(Dt)return Et=W_(Dt,Et.workspace,{parentConnection:vt?this:void 0,isShadow:!0,recordUndo:!1});if(Ft){if(Et=Fu(Ft,Et.workspace),vt)if(this.type===no.INPUT_VALUE){if(!Et.outputConnection)throw Error("Shadow block is missing an output connection");if(!this.connect(Et.outputConnection))throw Error("Could not connect shadow block to connection")}else if(this.type===no.NEXT_STATEMENT){if(!Et.previousConnection)throw Error("Shadow block is missing previous connection");if(!this.connect(Et.previousConnection))throw Error("Could not connect shadow block to connection")}else throw Error("Cannot connect a shadow block to a previous/output connection");return Et}return null}serializeShadow_(vt){vt&&(this.shadowDom_=Bu(vt),this.shadowState_=eu(vt))}static getConnectionForOrphanedConnection(vt,Et){if(Et.type===no.OUTPUT_VALUE)return z_(vt,Et.getSourceBlock());vt=vt.lastConnectionInStack(!0);const Dt=Et.getConnectionChecker();return vt&&Dt.canConnect(Et,vt,!1)?vt:null}};qo.CAN_CONNECT=0,qo.REASON_SELF_CONNECTION=1,qo.REASON_WRONG_TYPE=2,qo.REASON_TARGET_NULL=3,qo.REASON_CHECKS_FAILED=4,qo.REASON_DIFFERENT_WORKSPACES=5,qo.REASON_SHADOW_PARENT=6,qo.REASON_DRAG_CHECKS_FAILED=7,qo.REASON_PREVIOUS_AND_OUTPUT=8;var a0="_TEMP_COLLAPSED_INPUT",l0="_TEMP_COLLAPSED_FIELD",KS={};KS.COLLAPSED_FIELD_NAME=l0,KS.COLLAPSED_INPUT_NAME=a0,lt.FieldLabel$$module$build$src$core$field_label=class extends Qo{constructor(vt,Et,Dt){super(Qo.SKIP_SETUP),this.class_=null,this.EDITABLE=!1,vt!==Qo.SKIP_SETUP&&(Dt?this.configure_(Dt):this.class_=Et||null,this.setValue(vt))}configure_(vt){super.configure_(vt),vt.class&&(this.class_=vt.class)}initView(){this.createTextElement_(),this.class_&&ir(this.getTextElement(),this.class_)}doClassValidation_(vt){return vt==null?null:String(vt)}setClass(vt){this.textElement_&&(this.class_&&Jn(this.textElement_,this.class_),vt&&ir(this.textElement_,vt)),this.class_=vt}static fromJson(vt){return new this(ds(vt.text),void 0,vt)}},$a("field_label",lt.FieldLabel$$module$build$src$core$field_label),lt.FieldLabel$$module$build$src$core$field_label.prototype.DEFAULT_VALUE="",lt.FieldLabel$$module$build$src$core$field_label;var $O=class{constructor(vt,Et,Dt,Ft){if(this.type=vt,this.name=Et,this.connection=Ft,this.fieldRow=[],this.align=lt.Align$$module$build$src$core$input.LEFT,this.visible=!0,vt!==Do.DUMMY&&!Et)throw Error("Value inputs and statement inputs must have non-empty name.");this.sourceBlock=Dt}getSourceBlock(){return this.sourceBlock}appendField(vt,Et){return this.insertFieldAt(this.fieldRow.length,vt,Et),this}insertFieldAt(vt,Et,Dt){if(0>vt||vt>this.fieldRow.length)throw Error("index "+vt+" out of bounds.");return(Et||Et===""&&Dt)&&(typeof Et=="string"&&(Et=Fm({type:"field_label",text:Et})),Et.setSourceBlock(this.sourceBlock),this.sourceBlock.rendered&&(Et.init(),Et.applyColour()),Et.name=Dt,Et.setVisible(this.isVisible()),Et.prefixField&&(vt=this.insertFieldAt(vt,Et.prefixField)),this.fieldRow.splice(vt,0,Et),vt++,Et.suffixField&&(vt=this.insertFieldAt(vt,Et.suffixField)),this.sourceBlock.rendered&&(this.sourceBlock.render(),this.sourceBlock.bumpNeighbours())),vt}removeField(vt,Et){for(let Dt=0,Ft;Ft=this.fieldRow[Dt];Dt++)if(Ft.name===vt)return Ft.dispose(),this.fieldRow.splice(Dt,1),this.sourceBlock.rendered&&(this.sourceBlock.render(),this.sourceBlock.bumpNeighbours()),!0;if(Et)return!1;throw Error('Field "'+vt+'" not found.')}isVisible(){return this.visible}setVisible(vt){let Et=[];if(this.visible===vt)return Et;this.visible=vt;for(let Ft=0,Kt;Kt=this.fieldRow[Ft];Ft++)Kt.setVisible(vt);if(this.connection){var Dt=this.connection;vt?Et=Dt.startTrackingAll():Dt.stopTrackingAll(),(Dt=Dt.targetBlock())&&(Dt.getSvgRoot().style.display=vt?"block":"none")}return Et}markDirty(){for(let vt=0,Et;Et=this.fieldRow[vt];vt++)Et.markDirty()}setCheck(vt){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(vt),this}setAlign(vt){return this.align=vt,this.sourceBlock.rendered&&this.sourceBlock.render(),this}setShadowDom(vt){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(vt),this}getShadowDom(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()}init(){if(this.sourceBlock.workspace.rendered)for(let vt=0;vt<this.fieldRow.length;vt++)this.fieldRow[vt].init()}dispose(){for(let vt=0,Et;Et=this.fieldRow[vt];vt++)Et.dispose();this.connection&&this.connection.dispose()}},JS;(function(vt){vt=vt.Align||(vt.Align={}),vt[vt.LEFT=-1]="LEFT",vt[vt.CENTRE=0]="CENTRE",vt[vt.RIGHT=1]="RIGHT"})($O||($O={})),lt.Align$$module$build$src$core$input=$O.Align,JS={},JS.Align=lt.Align$$module$build$src$core$input,JS.Input=$O;var kr=class{constructor(vt,Et,Dt){if(this.wsCoordinate_=null,!Et)throw Error("Cannot create a node without a location.");this.type_=vt,this.isConnection_=kr.isConnectionType_(vt),this.location_=Et,this.processParams_(Dt||null)}processParams_(vt){vt&&vt.wsCoordinate&&(this.wsCoordinate_=vt.wsCoordinate)}getLocation(){return this.location_}getType(){return this.type_}getWsCoordinate(){return this.wsCoordinate_}isConnection(){return this.isConnection_}findNextForInput_(){var vt=this.location_.getParentInput();const Et=vt.getSourceBlock();for(vt=Et.inputList.indexOf(vt),vt+=1;vt<Et.inputList.length;vt++){const Dt=Et.inputList[vt],Ft=Dt.fieldRow;for(let Kt=0;Kt<Ft.length;Kt++){const yn=Ft[Kt];if(yn.isClickable()||kr.NAVIGATE_ALL_FIELDS)return kr.createFieldNode(yn)}if(Dt.connection)return kr.createInputNode(Dt)}return null}findNextForField_(){var vt=this.location_,Et=vt.getParentInput();const Dt=vt.getSourceBlock();if(!Dt)throw Error("The current AST location is not associated with a block");var Ft=Dt.inputList.indexOf(Et);for(vt=Et.fieldRow.indexOf(vt)+1;Ft<Dt.inputList.length;Ft++){Et=Dt.inputList[Ft];const Kt=Et.fieldRow;for(;vt<Kt.length;){if(Kt[vt].isClickable()||kr.NAVIGATE_ALL_FIELDS)return kr.createFieldNode(Kt[vt]);vt++}if(vt=0,Et.connection)return kr.createInputNode(Et)}return null}findPrevForInput_(){const vt=this.location_.getParentInput(),Et=vt.getSourceBlock();for(var Dt=Et.inputList.indexOf(vt);0<=Dt;Dt--){var Ft=Et.inputList[Dt];if(Ft.connection&&Ft!==vt)return kr.createInputNode(Ft);Ft=Ft.fieldRow;for(let Kt=Ft.length-1;0<=Kt;Kt--){const yn=Ft[Kt];if(yn.isClickable()||kr.NAVIGATE_ALL_FIELDS)return kr.createFieldNode(yn)}}return null}findPrevForField_(){var vt=this.location_;const Et=vt.getParentInput(),Dt=vt.getSourceBlock();if(!Dt)throw Error("The current AST location is not associated with a block");var Ft=Dt.inputList.indexOf(Et);for(vt=Et.fieldRow.indexOf(vt)-1;0<=Ft;Ft--){var Kt=Dt.inputList[Ft];if(Kt.connection&&Kt!==Et)return kr.createInputNode(Kt);for(Kt=Kt.fieldRow;-1<vt;){if(Kt[vt].isClickable()||kr.NAVIGATE_ALL_FIELDS)return kr.createFieldNode(Kt[vt]);vt--}0<=Ft-1&&(vt=Dt.inputList[Ft-1].fieldRow.length-1)}return null}navigateBetweenStacks_(vt){var Et=this.getLocation();if(Et.getSourceBlock){var Dt=Et.getSourceBlock();Dt&&(Et=Dt)}if(!Et||Et.isDeadOrDying())return null;Dt=Et.getRootBlock(),Et=Dt.workspace.getTopBlocks(!0);for(let Ft=0;Ft<Et.length;Ft++)if(Dt.id===Et[Ft].id)return vt=Ft+(vt?1:-1),vt===-1||vt===Et.length?null:kr.createStackNode(Et[vt]);throw Error("Couldn't find "+(vt?"next":"previous")+" stack?!")}findTopASTNodeForBlock_(vt){const Et=jm(vt);return Et?kr.createConnectionNode(Et):kr.createBlockNode(vt)}getOutAstNodeForBlock_(vt){if(!vt)return null;vt=vt.getTopStackBlock();const Et=jm(vt);return Et&&Et.targetConnection&&Et.targetConnection.getParentInput()?kr.createInputNode(Et.targetConnection.getParentInput()):kr.createStackNode(vt)}findFirstFieldOrInput_(vt){vt=vt.inputList;for(let Et=0;Et<vt.length;Et++){const Dt=vt[Et],Ft=Dt.fieldRow;for(let Kt=0;Kt<Ft.length;Kt++){const yn=Ft[Kt];if(yn.isClickable()||kr.NAVIGATE_ALL_FIELDS)return kr.createFieldNode(yn)}if(Dt.connection)return kr.createInputNode(Dt)}return null}getSourceBlock(){return this.getType()===kr.types.BLOCK?this.getLocation():this.getType()===kr.types.STACK?this.getLocation():this.getType()===kr.types.WORKSPACE?null:this.getLocation().getSourceBlock()}next(){switch(this.type_){case kr.types.STACK:return this.navigateBetweenStacks_(!0);case kr.types.OUTPUT:return kr.createBlockNode(this.location_.getSourceBlock());case kr.types.FIELD:return this.findNextForField_();case kr.types.INPUT:return this.findNextForInput_();case kr.types.BLOCK:return kr.createConnectionNode(this.location_.nextConnection);case kr.types.PREVIOUS:return kr.createBlockNode(this.location_.getSourceBlock());case kr.types.NEXT:return kr.createConnectionNode(this.location_.targetConnection)}return null}in(){switch(this.type_){case kr.types.WORKSPACE:const vt=this.location_.getTopBlocks(!0);if(0<vt.length)return kr.createStackNode(vt[0]);break;case kr.types.STACK:return this.findTopASTNodeForBlock_(this.location_);case kr.types.BLOCK:return this.findFirstFieldOrInput_(this.location_);case kr.types.INPUT:return kr.createConnectionNode(this.location_.targetConnection)}return null}prev(){switch(this.type_){case kr.types.STACK:return this.navigateBetweenStacks_(!1);case kr.types.FIELD:return this.findPrevForField_();case kr.types.INPUT:return this.findPrevForInput_();case kr.types.BLOCK:var vt=jm(this.location_);return kr.createConnectionNode(vt);case kr.types.PREVIOUS:if((vt=this.location_.targetConnection)&&!vt.getParentInput())return kr.createConnectionNode(vt);break;case kr.types.NEXT:return kr.createBlockNode(this.location_.getSourceBlock())}return null}out(){switch(this.type_){case kr.types.STACK:var vt=this.location_,Et=vt.getRelativeToSurfaceXY();return Et=new Zr(Et.x,Et.y+kr.DEFAULT_OFFSET_Y),kr.createWorkspaceNode(vt.workspace,Et);case kr.types.OUTPUT:return vt=this.location_,(Et=vt.targetConnection)?kr.createConnectionNode(Et):kr.createStackNode(vt.getSourceBlock());case kr.types.FIELD:if(vt=this.location_.getSourceBlock(),!vt)throw Error("The current AST location is not associated with a block");return kr.createBlockNode(vt);case kr.types.INPUT:return kr.createBlockNode(this.location_.getSourceBlock());case kr.types.BLOCK:return this.getOutAstNodeForBlock_(this.location_);case kr.types.PREVIOUS:return this.getOutAstNodeForBlock_(this.location_.getSourceBlock());case kr.types.NEXT:return this.getOutAstNodeForBlock_(this.location_.getSourceBlock())}return null}static isConnectionType_(vt){switch(vt){case kr.types.PREVIOUS:case kr.types.NEXT:case kr.types.INPUT:case kr.types.OUTPUT:return!0}return!1}static createFieldNode(vt){return vt?new kr(kr.types.FIELD,vt):null}static createConnectionNode(vt){if(!vt)return null;const Et=vt.type;return Et===no.INPUT_VALUE||Et===no.NEXT_STATEMENT&&vt.getParentInput()?kr.createInputNode(vt.getParentInput()):Et===no.NEXT_STATEMENT?new kr(kr.types.NEXT,vt):Et===no.OUTPUT_VALUE?new kr(kr.types.OUTPUT,vt):Et===no.PREVIOUS_STATEMENT?new kr(kr.types.PREVIOUS,vt):null}static createInputNode(vt){return vt&&vt.connection?new kr(kr.types.INPUT,vt.connection):null}static createBlockNode(vt){return vt?new kr(kr.types.BLOCK,vt):null}static createStackNode(vt){return vt?new kr(kr.types.STACK,vt):null}static createWorkspaceNode(vt,Et){return Et&&vt?new kr(kr.types.WORKSPACE,vt,{wsCoordinate:Et}):null}static createTopNode(vt){const Et=jm(vt);return Et?kr.createConnectionNode(Et):kr.createBlockNode(vt)}};kr.NAVIGATE_ALL_FIELDS=!1,kr.DEFAULT_OFFSET_Y=-20,function(vt){vt=vt.types||(vt.types={}),vt.FIELD="field",vt.BLOCK="block",vt.INPUT="input",vt.OUTPUT="output",vt.NEXT="next",vt.PREVIOUS="previous",vt.STACK="stack",vt.WORKSPACE="workspace"}(kr||(kr={}));var TO=class{constructor(vt,Et,Dt){if(this.data=null,this.disposed=!1,this.hue_=null,this.colour_="#000000",this.styleName_="",this.loadExtraState=this.saveExtraState=this.domToMutation=this.mutationToDom=this.destroy=this.init=void 0,this.suppressPrefixSuffix=!1,this.decompose=this.compose=this.getDeveloperVariables=void 0,this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.outputShape_=null,this.disposing=!1,this.comment=null,this.isInsertionMarker_=!1,this.hat=void 0,this.onchangeWrapper_=this.helpUrl=this.rendered=null,this.statementInputCount=0,this.workspace=vt,this.id=Dt&&!vt.getBlockById(Dt)?Dt:Eo(),vt.setBlockById(this.id,this),this.commentModel={text:null,pinned:!1,size:new qs(160,80)},this.xy_=new Zr(0,0),this.isInFlyout=vt.isFlyout,this.isInMutator=vt.isMutator,this.RTL=vt.RTL,Et){if(this.type=Et,Dt=jr[Et],!Dt||typeof Dt!="object")throw TypeError("Invalid block definition for type: "+Et);Object.assign(this,Dt)}vt.addTopBlock(this),vt.addTypedBlock(this),new.target===TO&&this.doInit_()}doInit_(){const vt=Ro();vt||io(!0);const Et=wo();try{typeof this.init=="function"&&(Ao(!1),this.init(),Ao(Et)),os()&&Fr(new(Vr($l))(this))}finally{vt||io(!1),Ao(Et)}this.inputsInlineDefault=this.inputsInline,typeof this.onchange=="function"&&this.setOnChange(this.onchange)}dispose(vt){if(!this.isDeadOrDying()){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(vt),os()&&Fr(new(Vr(pp))(this)),Bo();try{this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.disposing=!0;for(let Dt=this.childBlocks_.length-1;0<=Dt;Dt--)this.childBlocks_[Dt].dispose(!1);for(let Dt=0,Ft;Ft=this.inputList[Dt];Dt++)Ft.dispose();this.inputList.length=0;const Et=this.getConnections_(!0);for(let Dt=0,Ft;Ft=Et[Dt];Dt++)Ft.dispose()}finally{yo(),typeof this.destroy=="function"&&this.destroy(),this.disposed=!0}}}isDeadOrDying(){return this.disposing||this.disposed}initModel(){for(let vt=0,Et;Et=this.inputList[vt];vt++)for(let Dt=0,Ft;Ft=Et.fieldRow[Dt];Dt++)Ft.initModel&&Ft.initModel()}unplug(vt){this.outputConnection&&this.unplugFromRow_(vt),this.previousConnection&&this.unplugFromStack_(vt)}unplugFromRow_(vt){let Et=null;this.outputConnection.isConnected()&&(Et=this.outputConnection.targetConnection,this.outputConnection.disconnect()),Et&&vt&&(vt=this.getOnlyValueConnection_())&&vt.isConnected()&&!vt.targetBlock().isShadow()&&(vt=vt.targetConnection,vt==null||vt.disconnect(),this.workspace.connectionChecker.canConnect(vt,Et,!1)?Et.connect(vt):vt==null||vt.onFailedConnect(Et))}getOnlyValueConnection_(){let vt=null;for(let Et=0;Et<this.inputList.length;Et++){const Dt=this.inputList[Et].connection;if(Dt&&Dt.type===no.INPUT_VALUE&&Dt.targetConnection){if(vt)return null;vt=Dt}}return vt}unplugFromStack_(vt){let Et=null;this.previousConnection.isConnected()&&(Et=this.previousConnection.targetConnection,this.previousConnection.disconnect());const Dt=this.getNextBlock();vt&&Dt&&!Dt.isShadow()&&(vt=this.nextConnection.targetConnection,vt==null||vt.disconnect(),Et&&this.workspace.connectionChecker.canConnect(Et,vt,!1)&&Et.connect(vt))}getConnections_(vt){vt=[],this.outputConnection&&vt.push(this.outputConnection),this.previousConnection&&vt.push(this.previousConnection),this.nextConnection&&vt.push(this.nextConnection);for(let Et=0,Dt;Dt=this.inputList[Et];Et++)Dt.connection&&vt.push(Dt.connection);return vt}lastConnectionInStack(vt){let Et=this.nextConnection;for(;Et;){const Dt=Et.targetBlock();if(!Dt||vt&&Dt.isShadow())return Et;Et=Dt.nextConnection}return null}bumpNeighbours(){}getParent(){return this.parentBlock_}getInputWithBlock(vt){for(let Et=0,Dt;Dt=this.inputList[Et];Et++)if(Dt.connection&&Dt.connection.targetBlock()===vt)return Dt;return null}getSurroundParent(){let vt=this,Et;do if(Et=vt,vt=vt.getParent(),!vt)return null;while(vt.getNextBlock()===Et);return vt}getNextBlock(){return this.nextConnection&&this.nextConnection.targetBlock()}getPreviousBlock(){return this.previousConnection&&this.previousConnection.targetBlock()}getFirstStatementConnection(){for(let vt=0,Et;Et=this.inputList[vt];vt++)if(Et.connection&&Et.connection.type===no.NEXT_STATEMENT)return Et.connection;return null}getRootBlock(){let vt,Et=this;do vt=Et,Et=vt.parentBlock_;while(Et);return vt}getTopStackBlock(){let vt=this,Et;do Et=vt.getPreviousBlock();while(Et&&Et.getNextBlock()===vt&&(vt=Et));return vt}getChildren(vt){if(!vt)return this.childBlocks_;vt=[];for(let Dt=0,Ft;Ft=this.inputList[Dt];Dt++)if(Ft.connection){var Et=Ft.connection.targetBlock();Et&&vt.push(Et)}return(Et=this.getNextBlock())&&vt.push(Et),vt}setParent(vt){if(vt!==this.parentBlock_){var Et=this.previousConnection&&this.previousConnection.targetBlock()||this.outputConnection&&this.outputConnection.targetBlock(),Dt=!!Et;if(Dt&&vt&&Et!==vt)throw Error("Block connected to superior one that is not new parent.");if(!Dt&&vt)throw Error("Block not connected to new parent.");if(Dt&&!vt)throw Error("Cannot set parent to null while block is still connected to superior block.");this.parentBlock_?xa(this.parentBlock_.childBlocks_,this):this.workspace.removeTopBlock(this),(this.parentBlock_=vt)?vt.childBlocks_.push(this):this.workspace.addTopBlock(this)}}getDescendants(vt){const Et=[this],Dt=this.getChildren(vt);for(let Ft,Kt=0;Ft=Dt[Kt];Kt++)Et.push(...Ft.getDescendants(vt));return Et}isDeletable(){return this.deletable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}setDeletable(vt){this.deletable_=vt}isMovable(){return this.movable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}setMovable(vt){this.movable_=vt}isDuplicatable(){return this.workspace.hasBlockLimits()?this.workspace.isCapacityAvailable(Qn(this,!0)):!0}isShadow(){return this.isShadow_}setShadow(vt){this.isShadow_=vt}isInsertionMarker(){return this.isInsertionMarker_}setInsertionMarker(vt){this.isInsertionMarker_=vt}isEditable(){return this.editable_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}setEditable(vt){this.editable_=vt;for(let Et=0,Dt;Dt=this.inputList[Et];Et++)for(let Ft=0,Kt;Kt=Dt.fieldRow[Ft];Ft++)Kt.updateEditable()}isDisposed(){return this.disposed}getMatchingConnection(vt,Et){const Dt=this.getConnections_(!0);if(vt=vt.getConnections_(!0),Dt.length!==vt.length)throw Error("Connection lists did not match in length.");for(let Ft=0;Ft<vt.length;Ft++)if(vt[Ft]===Et)return Dt[Ft];return null}setHelpUrl(vt){this.helpUrl=vt}setTooltip(vt){this.tooltip=vt}getTooltip(){return xu(this)}getColour(){return this.colour_}getStyleName(){return this.styleName_}getHue(){return this.hue_}setColour(vt){vt=mu(vt),this.hue_=vt.hue,this.colour_=vt.hex}setStyle(vt){this.styleName_=vt}setOnChange(vt){if(vt&&typeof vt!="function")throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.onchange=vt,this.onchangeWrapper_=vt.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_)}getField(vt){if(typeof vt!="string")throw TypeError("Block.prototype.getField expects a string with the field name but received "+(vt===void 0?"nothing":vt+" of type "+typeof vt)+" instead");for(let Et=0,Dt;Dt=this.inputList[Et];Et++)for(let Ft=0,Kt;Kt=Dt.fieldRow[Ft];Ft++)if(Kt.name===vt)return Kt;return null}getVars(){const vt=[];for(let Et=0,Dt;Dt=this.inputList[Et];Et++)for(let Ft=0,Kt;Kt=Dt.fieldRow[Ft];Ft++)Kt.referencesVariables()&&vt.push(Kt.getValue());return vt}getVarModels(){const vt=[];for(let Et=0,Dt;Dt=this.inputList[Et];Et++)for(let Ft=0,Kt;Kt=Dt.fieldRow[Ft];Ft++)if(Kt.referencesVariables()){const yn=this.workspace.getVariableById(Kt.getValue());yn&&vt.push(yn)}return vt}updateVarName(vt){for(let Et=0,Dt;Dt=this.inputList[Et];Et++)for(let Ft=0,Kt;Kt=Dt.fieldRow[Ft];Ft++)Kt.referencesVariables()&&vt.getId()===Kt.getValue()&&Kt.refreshVariableName()}renameVarById(vt,Et){for(let Dt=0,Ft;Ft=this.inputList[Dt];Dt++)for(let Kt=0,yn;yn=Ft.fieldRow[Kt];Kt++)yn.referencesVariables()&&vt===yn.getValue()&&yn.setValue(Et)}getFieldValue(vt){return(vt=this.getField(vt))?vt.getValue():null}setFieldValue(vt,Et){const Dt=this.getField(Et);if(!Dt)throw Error('Field "'+Et+'" not found.');Dt.setValue(vt)}setPreviousStatement(vt,Et){if(vt)Et===void 0&&(Et=null),this.previousConnection||(this.previousConnection=this.makeConnection_(no.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(Et);else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}}setNextStatement(vt,Et){if(vt)Et===void 0&&(Et=null),this.nextConnection||(this.nextConnection=this.makeConnection_(no.NEXT_STATEMENT)),this.nextConnection.setCheck(Et);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}}setOutput(vt,Et){if(vt)Et===void 0&&(Et=null),this.outputConnection||(this.outputConnection=this.makeConnection_(no.OUTPUT_VALUE)),this.outputConnection.setCheck(Et);else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}}setInputsInline(vt){this.inputsInline!==vt&&(Fr(new(Vr(Qs))(this,"inline",null,this.inputsInline,vt)),this.inputsInline=vt)}getInputsInline(){if(this.inputsInline!==void 0)return this.inputsInline;for(var vt=1;vt<this.inputList.length;vt++)if(this.inputList[vt-1].type===Do.DUMMY&&this.inputList[vt].type===Do.DUMMY)return!1;for(vt=1;vt<this.inputList.length;vt++)if(this.inputList[vt-1].type===Do.VALUE&&this.inputList[vt].type===Do.DUMMY)return!0;return!1}setOutputShape(vt){this.outputShape_=vt}getOutputShape(){return this.outputShape_}isEnabled(){return!this.disabled}setEnabled(vt){if(this.isEnabled()!==vt){const Et=this.disabled;this.disabled=!vt,Fr(new(Vr(Qs))(this,"disabled",null,Et,!vt))}}getInheritedDisabled(){let vt=this.getSurroundParent();for(;vt;){if(vt.disabled)return!0;vt=vt.getSurroundParent()}return!1}isCollapsed(){return this.collapsed_}setCollapsed(vt){this.collapsed_!==vt&&(Fr(new(Vr(Qs))(this,"collapsed",null,this.collapsed_,vt)),this.collapsed_=vt)}toString(vt,Et){function Dt(qr){let jo=qr.getCheck();return!jo&&qr.targetConnection&&(jo=qr.targetConnection.getCheck()),!!jo&&(jo.indexOf("Boolean")!==-1||jo.indexOf("Number")!==-1)}function Ft(){let qr,jo;Mn&&Mn.getType()===((qr=qn)==null?void 0:qr.getType())&&Mn.getLocation()===((jo=qn)==null?void 0:jo.getLocation())&&(Mn=null)}var Kt=[];Et=Et||"?";const yn=kr.NAVIGATE_ALL_FIELDS;kr.NAVIGATE_ALL_FIELDS=!0;let Mn=kr.createBlockNode(this);const qn=Mn;for(;Mn;){switch(Mn.getType()){case kr.types.INPUT:var Cr=Mn.getLocation();Mn.in()?Dt(Cr)&&Kt.push("("):Kt.push(Et);break;case kr.types.FIELD:Cr=Mn.getLocation(),Cr.name!==l0&&Kt.push(Cr.getText())}if(Cr=Mn,Mn=Cr.in()||Cr.next(),!Mn){for(Mn=Cr.out(),Ft();Mn&&!Mn.next();)Mn=Mn.out(),Ft(),Mn&&Mn.getType()===kr.types.INPUT&&Dt(Mn.getLocation())&&Kt.push(")");Mn&&(Mn=Mn.next())}}for(kr.NAVIGATE_ALL_FIELDS=yn,Et=2;Et<Kt.length;Et++)Kt[Et-2]==="("&&Kt[Et]===")"&&(Kt[Et-2]=Kt[Et-1],Kt.splice(Et-1,2));return Kt=Kt.reduce(function(qr,jo){return qr+(qr.substr(-1)==="("||jo===")"?"":" ")+jo},""),Kt=Kt.trim()||"???",vt&&Kt.length>vt&&(Kt=Kt.substring(0,vt-3)+"..."),Kt}appendValueInput(vt){return this.appendInput_(Do.VALUE,vt)}appendStatementInput(vt){return this.appendInput_(Do.STATEMENT,vt)}appendDummyInput(vt){return this.appendInput_(Do.DUMMY,vt||"")}jsonInit(vt){var Et=vt.type?'Block "'+vt.type+'": ':"";if(vt.output&&vt.previousStatement)throw Error(Et+"Must not have both an output and a previousStatement.");if(vt.style&&vt.style.hat&&(this.hat=vt.style.hat,vt.style=null),vt.style&&vt.colour)throw Error(Et+"Must not have both a colour and a style.");vt.style?this.jsonInitStyle_(vt,Et):this.jsonInitColour_(vt,Et);for(var Dt=0;vt["message"+Dt]!==void 0;)this.interpolate_(vt["message"+Dt],vt["args"+Dt]||[],vt["lastDummyAlign"+Dt],Et),Dt++;if(vt.inputsInline!==void 0&&this.setInputsInline(vt.inputsInline),vt.output!==void 0&&this.setOutput(!0,vt.output),vt.outputShape!==void 0&&this.setOutputShape(vt.outputShape),vt.previousStatement!==void 0&&this.setPreviousStatement(!0,vt.previousStatement),vt.nextStatement!==void 0&&this.setNextStatement(!0,vt.nextStatement),vt.tooltip!==void 0&&(Dt=ds(vt.tooltip),this.setTooltip(Dt)),vt.enableContextMenu!==void 0&&(this.contextMenu=!!vt.enableContextMenu),vt.suppressPrefixSuffix!==void 0&&(this.suppressPrefixSuffix=!!vt.suppressPrefixSuffix),vt.helpUrl!==void 0&&(Dt=ds(vt.helpUrl),this.setHelpUrl(Dt)),typeof vt.extensions=="string"&&(console.warn(Et+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+vt.type+"' block."),vt.extensions=[vt.extensions]),vt.mutator!==void 0&&Ip(vt.mutator,this,!0),vt=vt.extensions,Array.isArray(vt))for(Et=0;Et<vt.length;Et++)Ip(vt[Et],this,!1)}jsonInitColour_(vt,Et){if("colour"in vt)if(vt.colour===void 0)console.warn(Et+"Undefined colour value.");else{vt=vt.colour;try{this.setColour(vt)}catch{console.warn(Et+"Illegal colour value: ",vt)}}}jsonInitStyle_(vt,Et){vt=vt.style;try{this.setStyle(vt)}catch{console.warn(Et+"Style does not exist: ",vt)}}mixin(vt,Et){if(Et!==void 0&&typeof Et!="boolean")throw Error("opt_disableCheck must be a boolean if provided");if(!Et){Et=[];for(const Dt in vt)this[Dt]!==void 0&&Et.push(Dt);if(Et.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(Et))}Object.assign(this,vt)}interpolate_(vt,Et,Dt,Ft){vt=nm(vt),this.validateTokens_(vt,Et.length),Et=this.interpolateArguments_(vt,Et,Dt),Dt=[];for(let Kt=0,yn;yn=Et[Kt];Kt++)if(this.isInputKeyword_(yn.type)){if(vt=this.inputFromJson_(yn,Ft)){for(let Mn=0,qn;qn=Dt[Mn];Mn++)vt.appendField(qn[0],qn[1]);Dt.length=0}}else(vt=this.fieldFromJson_(yn))&&Dt.push([vt,yn.name])}validateTokens_(vt,Et){const Dt=[];let Ft=0;for(let Kt=0;Kt<vt.length;Kt++){const yn=vt[Kt];if(typeof yn=="number"){if(1>yn||yn>Et)throw Error('Block "'+this.type+'": Message index %'+yn+" out of range.");if(Dt[yn])throw Error('Block "'+this.type+'": Message index %'+yn+" duplicated.");Dt[yn]=!0,Ft++}}if(Ft!==Et)throw Error('Block "'+this.type+'": Message does not reference all '+Et+" arg(s).")}interpolateArguments_(vt,Et,Dt){const Ft=[];for(let Kt=0;Kt<vt.length;Kt++){let yn=vt[Kt];typeof yn=="number"&&(yn=Et[yn-1]),!(typeof yn=="string"&&(yn=this.stringToFieldJson_(yn),!yn))&&Ft.push(yn)}return(vt=Ft.length)&&!this.isInputKeyword_(Ft[vt-1].type)&&(vt={type:"input_dummy"},Dt&&(vt.align=Dt),Ft.push(vt)),Ft}fieldFromJson_(vt){const Et=Fm(vt);return!Et&&vt.alt?typeof vt.alt=="string"?(vt=this.stringToFieldJson_(vt.alt))?this.fieldFromJson_(vt):null:this.fieldFromJson_(vt.alt):Et}inputFromJson_(vt,Et){var Dt={LEFT:lt.Align$$module$build$src$core$input.LEFT,RIGHT:lt.Align$$module$build$src$core$input.RIGHT,CENTRE:lt.Align$$module$build$src$core$input.CENTRE,CENTER:lt.Align$$module$build$src$core$input.CENTRE};let Ft=null;switch(vt.type){case"input_value":Ft=this.appendValueInput(vt.name);break;case"input_statement":Ft=this.appendStatementInput(vt.name);break;case"input_dummy":Ft=this.appendDummyInput(vt.name)}return Ft?(vt.check&&Ft.setCheck(vt.check),vt.align&&(Dt=Dt[vt.align.toUpperCase()],Dt===void 0?console.warn(Et+"Illegal align value: ",vt.align):Ft.setAlign(Dt)),Ft):null}isInputKeyword_(vt){return vt==="input_value"||vt==="input_statement"||vt==="input_dummy"}stringToFieldJson_(vt){return(vt=vt.trim())?{type:"field_label",text:vt}:null}appendInput_(vt,Et){let Dt=null;return(vt===Do.VALUE||vt===Do.STATEMENT)&&(Dt=this.makeConnection_(vt)),vt===Do.STATEMENT&&this.statementInputCount++,vt=new $O(vt,Et,this,Dt),this.inputList.push(vt),vt}moveInputBefore(vt,Et){if(vt!==Et){var Dt=-1,Ft=Et?-1:this.inputList.length;for(let Kt=0,yn;yn=this.inputList[Kt];Kt++)if(yn.name===vt){if(Dt=Kt,Ft!==-1)break}else if(Et&&yn.name===Et&&(Ft=Kt,Dt!==-1))break;if(Dt===-1)throw Error('Named input "'+vt+'" not found.');if(Ft===-1)throw Error('Reference input "'+Et+'" not found.');this.moveNumberedInputBefore(Dt,Ft)}}moveNumberedInputBefore(vt,Et){if(vt===Et)throw Error("Can't move input to itself.");if(vt>=this.inputList.length)throw RangeError("Input index "+vt+" out of bounds.");if(Et>this.inputList.length)throw RangeError("Reference input "+Et+" out of bounds.");const Dt=this.inputList[vt];this.inputList.splice(vt,1),vt<Et&&Et--,this.inputList.splice(Et,0,Dt)}removeInput(vt,Et){for(let Dt=0,Ft;Ft=this.inputList[Dt];Dt++)if(Ft.name===vt)return Ft.type===Do.STATEMENT&&this.statementInputCount--,Ft.dispose(),this.inputList.splice(Dt,1),!0;if(Et)return!1;throw Error("Input not found: "+vt)}getInput(vt){for(let Et=0,Dt;Dt=this.inputList[Et];Et++)if(Dt.name===vt)return Dt;return null}getInputTargetBlock(vt){return(vt=this.getInput(vt))&&vt.connection&&vt.connection.targetBlock()}getCommentText(){return this.commentModel.text}setCommentText(vt){this.commentModel.text!==vt&&(Fr(new(Vr(Qs))(this,"comment",null,this.commentModel.text,vt)),this.comment=this.commentModel.text=vt)}setWarningText(vt,Et){}setMutator(vt){}getRelativeToSurfaceXY(){return this.xy_}moveBy(vt,Et){if(this.parentBlock_)throw Error("Block has parent.");const Dt=new(Vr(Wl))(this);this.xy_.translate(vt,Et),Dt.recordNew(),Fr(Dt)}makeConnection_(vt){return new qo(this,vt)}allInputsFilled(vt){if(vt===void 0&&(vt=!0),!vt&&this.isShadow())return!1;for(let Dt=0,Ft;Ft=this.inputList[Dt];Dt++)if(Ft.connection){var Et=Ft.connection.targetBlock();if(!Et||!Et.allInputsFilled(vt))return!1}return(Et=this.getNextBlock())?Et.allInputsFilled(vt):!0}toDevString(){let vt=this.type?'"'+this.type+'" block':"Block";return this.id&&(vt+=' (id="'+this.id+'")'),vt}};TO.COLLAPSED_INPUT_NAME=a0,TO.COLLAPSED_FIELD_NAME=l0;var Hv=null,c0=null,u0={};u0.connectionUiEffect=ku,u0.disconnectUiEffect=iv,u0.disconnectUiStop=Ou,u0.disposeUiEffect=j_;var AT=class extends Vv{constructor(vt){super(vt),this.cachedText="",this.paragraphElement_=this.textarea_=this.foreignObject=this.onInputWrapper=this.onChangeWrapper=this.onWheelWrapper=this.onMouseUpWrapper=null,this.model=vt.commentModel;let Et;this.model.text=(Et=this.model.text)!=null?Et:"",this.createIcon()}drawIcon_(vt){In(ar.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},vt),In(ar.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},vt),In(ar.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},vt)}createEditor(){this.foreignObject=In(ar.FOREIGNOBJECT,{x:ko.BORDER_WIDTH,y:ko.BORDER_WIDTH});const vt=document.createElementNS(yu,"body");vt.setAttribute("xmlns",yu),vt.className="blocklyMinimalBody";const Et=this.textarea_=document.createElementNS(yu,"textarea");Et.className="blocklyCommentTextarea",Et.setAttribute("dir",this.getBlock().RTL?"RTL":"LTR");let Dt;return Et.value=(Dt=this.model.text)!=null?Dt:"",this.resizeTextarea(),vt.appendChild(Et),this.foreignObject.appendChild(vt),this.onMouseUpWrapper=Zt(Et,"focus",this,this.startEdit,!0),this.onWheelWrapper=Zt(Et,"wheel",this,function(Ft){Ft.stopPropagation()}),this.onChangeWrapper=Zt(Et,"change",this,function(Ft){this.cachedText!==this.model.text&&Fr(new(Vr(Qs))(this.getBlock(),"comment",null,this.cachedText,this.model.text))}),this.onInputWrapper=Zt(Et,"input",this,function(Ft){this.model.text=Et.value}),setTimeout(Et.focus.bind(Et),0),this.foreignObject}updateEditable(){super.updateEditable(),this.isVisible()&&(this.disposeBubble(),this.createBubble())}onBubbleResize(){this.isVisible()&&this.bubble_&&(this.model.size=this.bubble_.getBubbleSize(),this.resizeTextarea())}resizeTextarea(){if(this.textarea_&&this.foreignObject){var vt=this.model.size,Et=2*ko.BORDER_WIDTH,Dt=vt.width-Et;vt=vt.height-Et,this.foreignObject.setAttribute("width",`${Dt}`),this.foreignObject.setAttribute("height",`${vt}`),this.textarea_.style.width=Dt-4+"px",this.textarea_.style.height=vt-4+"px"}}setVisible(vt){vt!==this.isVisible()&&(Fr(new(Vr(Fp))(this.getBlock(),vt,"comment")),(this.model.pinned=vt)?this.createBubble():this.disposeBubble())}createBubble(){this.getBlock().isEditable()?this.createEditableBubble():this.createNonEditableBubble()}createEditableBubble(){const vt=this.getBlock();this.bubble_=new ko(vt.workspace,this.createEditor(),vt.pathObject.svgPath,this.iconXY_,this.model.size.width,this.model.size.height),this.bubble_.setSvgId(vt.id),this.bubble_.registerResizeEvent(this.onBubbleResize.bind(this)),this.applyColour()}createNonEditableBubble(){let vt;this.paragraphElement_=ko.textToDom((vt=this.model.text)!=null?vt:""),this.bubble_=ko.createNonEditableBubble(this.paragraphElement_,this.getBlock(),this.iconXY_),this.applyColour()}disposeBubble(){this.onMouseUpWrapper&&(cn(this.onMouseUpWrapper),this.onMouseUpWrapper=null),this.onWheelWrapper&&(cn(this.onWheelWrapper),this.onWheelWrapper=null),this.onChangeWrapper&&(cn(this.onChangeWrapper),this.onChangeWrapper=null),this.onInputWrapper&&(cn(this.onInputWrapper),this.onInputWrapper=null),this.bubble_&&(this.bubble_.dispose(),this.bubble_=null),this.paragraphElement_=this.foreignObject=this.textarea_=null}startEdit(vt){let Et;(Et=this.bubble_)!=null&&Et.promote()&&this.textarea_.focus(),this.cachedText=this.model.text}getBubbleSize(){return this.model.size}setBubbleSize(vt,Et){this.bubble_?this.bubble_.setBubbleSize(vt,Et):(this.model.size.width=vt,this.model.size.height=Et)}updateText(){if(this.textarea_){let vt;this.textarea_.value=(vt=this.model.text)!=null?vt:""}else this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model.text)}dispose(){this.getBlock().comment=null,super.dispose()}};uu(`
.blocklyCommentTextarea {
  background-color: #fef49c;
  border: 0;
  display: block;
  margin: 0;
  outline: 0;
  padding: 3px;
  resize: none;
  text-overflow: hidden;
}
`);var Wp=null,e$={duplicateInternal:ov,copyInternal:eo},h0={};h0.TEST_ONLY=e$,h0.copy=Ym,h0.duplicate=cm,h0.paste=lm;var d0,t$,f0;d0=null,t$={},f0=null,lt.module$build$src$core$contextmenu={},lt.module$build$src$core$contextmenu.callbackFactory=uv,lt.module$build$src$core$contextmenu.commentDeleteOption=X_,lt.module$build$src$core$contextmenu.commentDuplicateOption=Y_,lt.module$build$src$core$contextmenu.dispose=Oy,lt.module$build$src$core$contextmenu.getCurrentBlock=sv,lt.module$build$src$core$contextmenu.hide=Zm,lt.module$build$src$core$contextmenu.setCurrentBlock=rp,lt.module$build$src$core$contextmenu.show=ip,lt.module$build$src$core$contextmenu.workspaceCommentOption=hv;var Ko=class{constructor(){this.registry_=new Map,this.reset()}reset(){this.registry_.clear()}register(vt){if(this.registry_.has(vt.id))throw Error('Menu item with ID "'+vt.id+'" is already registered.');this.registry_.set(vt.id,vt)}unregister(vt){if(!this.registry_.has(vt))throw Error('Menu item with ID "'+vt+'" not found.');this.registry_.delete(vt)}getItem(vt){let Et;return(Et=this.registry_.get(vt))!=null?Et:null}getContextMenuOptions(vt,Et){const Dt=[];for(const Kt of this.registry_.values())if(vt===Kt.scopeType){var Ft=Kt.preconditionFn(Et);Ft!=="hidden"&&(Ft={text:typeof Kt.displayText=="function"?Kt.displayText(Et):Kt.displayText,enabled:Ft==="enabled",callback:Kt.callback,scope:Et,weight:Kt.weight},Dt.push(Ft))}return Dt.sort(function(Kt,yn){return Kt.weight-yn.weight}),Dt}};(function(vt){var Et=vt.ScopeType||(vt.ScopeType={});Et.BLOCK="block",Et.WORKSPACE="workspace",vt.registry=new vt})(Ko||(Ko={})),Ko.ScopeType;var RT=30,IT=!0,m_=[];m_[no.INPUT_VALUE]=no.OUTPUT_VALUE,m_[no.OUTPUT_VALUE]=no.INPUT_VALUE,m_[no.NEXT_STATEMENT]=no.PREVIOUS_STATEMENT,m_[no.PREVIOUS_STATEMENT]=no.NEXT_STATEMENT;var n$="RENAME_VARIABLE_ID",r$="DELETE_VARIABLE_ID",kT=class{constructor(){this.drawer_=this.curNode_=this.colour=null,this.type="marker"}setDrawer(vt){this.drawer_=vt}getDrawer(){return this.drawer_}getCurNode(){return this.curNode_}setCurNode(vt){const Et=this.curNode_;this.curNode_=vt,this.drawer_&&this.drawer_.draw(Et,this.curNode_)}draw(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)}hide(){this.drawer_&&this.drawer_.hide()}dispose(){this.getDrawer()&&this.getDrawer().dispose()}},i$=class extends kT{constructor(){super(),this.type="cursor"}next(){var vt=this.getCurNode();if(!vt)return null;for(vt=vt.next();vt&&vt.next()&&(vt.getType()===kr.types.NEXT||vt.getType()===kr.types.BLOCK);)vt=vt.next();return vt&&this.setCurNode(vt),vt}in(){var vt=this.getCurNode();if(!vt)return null;(vt.getType()===kr.types.PREVIOUS||vt.getType()===kr.types.OUTPUT)&&(vt=vt.next());let Et,Dt;return(vt=(Dt=(Et=vt)==null?void 0:Et.in())!=null?Dt:null)&&this.setCurNode(vt),vt}prev(){var vt=this.getCurNode();if(!vt)return null;for(vt=vt.prev();vt&&vt.prev()&&(vt.getType()===kr.types.NEXT||vt.getType()===kr.types.BLOCK);)vt=vt.prev();return vt&&this.setCurNode(vt),vt}out(){var vt=this.getCurNode();return vt?((vt=vt.out())&&vt.getType()===kr.types.BLOCK&&(vt=vt.prev()||vt),vt&&this.setCurNode(vt),vt):null}};xo(Wr.CURSOR,Bp,i$);var p0=class extends i${constructor(){super()}next(){var vt=this.getCurNode();return vt?((vt=this.getNextNode_(vt,this.validNode_))&&this.setCurNode(vt),vt):null}in(){return this.next()}prev(){var vt=this.getCurNode();return vt?((vt=this.getPreviousNode_(vt,this.validNode_))&&this.setCurNode(vt),vt):null}out(){return this.prev()}getNextNode_(vt,Et){if(!vt)return null;const Dt=vt.in()||vt.next();return Et(Dt)?Dt:Dt?this.getNextNode_(Dt,Et):(vt=this.findSiblingOrParent_(vt.out()),Et(vt)?vt:vt?this.getNextNode_(vt,Et):null)}getPreviousNode_(vt,Et){if(!vt)return null;let Dt=vt.prev();return Dt=Dt?this.getRightMostChild_(Dt):vt.out(),Et(Dt)?Dt:Dt?this.getPreviousNode_(Dt,Et):null}validNode_(vt){let Et=!1;return vt=vt&&vt.getType(),(vt===kr.types.OUTPUT||vt===kr.types.INPUT||vt===kr.types.FIELD||vt===kr.types.NEXT||vt===kr.types.PREVIOUS||vt===kr.types.WORKSPACE)&&(Et=!0),Et}findSiblingOrParent_(vt){if(!vt)return null;const Et=vt.next();return Et||this.findSiblingOrParent_(vt.out())}getRightMostChild_(vt){if(!vt.in())return vt;for(vt=vt.in();vt&&vt.next();)vt=vt.next();return this.getRightMostChild_(vt)}};p0.registrationName="basicCursor",xo(Wr.CURSOR,p0.registrationName,p0);var MT=class extends p0{validNode_(vt){let Et=!1;const Dt=vt&&vt.getType();return vt&&(vt=vt.getLocation(),Dt===kr.types.FIELD&&vt&&vt.isTabNavigable()&&vt.isClickable()&&(Et=!0)),Et}},o$=10,Ql=class extends qo{constructor(vt,Et){super(vt,Et),this.targetConnection=this.highlightPath=null,this.db_=vt.workspace.connectionDBList[Et],this.dbOpposite_=vt.workspace.connectionDBList[m_[Et]],this.offsetInBlock_=new Zr(0,0),this.trackedState_=Ql.TrackedState.WILL_TRACK}dispose(){super.dispose(),this.trackedState_===Ql.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)}getSourceBlock(){return super.getSourceBlock()}targetBlock(){return super.targetBlock()}distanceFrom(vt){const Et=this.x-vt.x;return vt=this.y-vt.y,Math.sqrt(Et*Et+vt*vt)}bumpAwayFrom(vt){if(!this.sourceBlock_.workspace.isDragging()){var Et=this.sourceBlock_.getRootBlock();if(!Et.isInFlyout){var Dt=!1;if(!Et.isMovable()){if(Et=vt.getSourceBlock().getRootBlock(),!Et.isMovable())return;vt=this,Dt=!0}var Ft=Pn()==Et;Ft||Et.addSelect();var Kt=vt.x+lt.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*o$)-this.x,yn=vt.y+lt.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*o$)-this.y;Dt&&(yn=-yn),Et.RTL&&(Kt=vt.x-lt.config$$module$build$src$core$config.snapRadius-Math.floor(Math.random()*o$)-this.x),Et.moveBy(Kt,yn),Ft||Et.removeSelect()}}}moveTo(vt,Et){this.trackedState_===Ql.TrackedState.WILL_TRACK?(this.db_.addConnection(this,Et),this.trackedState_=Ql.TrackedState.TRACKED):this.trackedState_===Ql.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,Et)),this.x=vt,this.y=Et}moveBy(vt,Et){this.moveTo(this.x+vt,this.y+Et)}moveToOffset(vt){this.moveTo(vt.x+this.offsetInBlock_.x,vt.y+this.offsetInBlock_.y)}setOffsetInBlock(vt,Et){this.offsetInBlock_.x=vt,this.offsetInBlock_.y=Et}getOffsetInBlock(){return this.offsetInBlock_}tighten(){const vt=this.targetConnection.x-this.x,Et=this.targetConnection.y-this.y;if(vt!==0||Et!==0){const Ft=this.targetBlock();var Dt=Ft.getSvgRoot();if(!Dt)throw Error("block is not rendered.");Dt=Pl(Dt),Ft.getSvgRoot().setAttribute("transform","translate("+(Dt.x-vt)+","+(Dt.y-Et)+")"),Ft.moveConnections(-vt,-Et)}}closest(vt,Et){return this.dbOpposite_.searchForClosest(this,vt,Et)}highlight(){if(!this.highlightPath){var vt=this.sourceBlock_.workspace.getRenderer().getConstants(),Et=vt.shapeFor(this);this.type===no.INPUT_VALUE||this.type===no.OUTPUT_VALUE?(vt=vt.TAB_OFFSET_FROM_TOP,Et=as(0,-vt)+_i("v",vt)+Et.pathDown+_i("v",vt)):(vt=vt.NOTCH_OFFSET_LEFT-vt.CORNER_RADIUS,Et=as(-vt,0)+_i("h",vt)+Et.pathLeft+_i("h",vt)),vt=this.sourceBlock_.getRelativeToSurfaceXY(),this.highlightPath=In(ar.PATH,{class:"blocklyHighlightedConnectionPath",d:Et,transform:"translate("+(this.x-vt.x)+","+(this.y-vt.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())}}unhighlight(){this.highlightPath&&(br(this.highlightPath),this.highlightPath=null)}setTracking(vt){vt&&this.trackedState_===Ql.TrackedState.TRACKED||!vt&&this.trackedState_===Ql.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(vt?(this.db_.addConnection(this,this.y),this.trackedState_=Ql.TrackedState.TRACKED):(this.trackedState_===Ql.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=Ql.TrackedState.UNTRACKED))}stopTrackingAll(){if(this.setTracking(!1),this.targetConnection){const Dt=this.targetBlock().getDescendants(!1);for(let Ft=0;Ft<Dt.length;Ft++){var vt=Dt[Ft],Et=vt.getConnections_(!0);for(let Kt=0;Kt<Et.length;Kt++)Et[Kt].setTracking(!1);for(vt=vt.getIcons(),Et=0;Et<vt.length;Et++)vt[Et].setVisible(!1)}}}startTrackingAll(){this.setTracking(!0);let vt=[];if(this.type!==no.INPUT_VALUE&&this.type!==no.NEXT_STATEMENT)return vt;const Et=this.targetBlock();if(Et){let Dt;Et.isCollapsed()?(Dt=[],Et.outputConnection&&Dt.push(Et.outputConnection),Et.nextConnection&&Dt.push(Et.nextConnection),Et.previousConnection&&Dt.push(Et.previousConnection)):Dt=Et.getConnections_(!0);for(let Ft=0;Ft<Dt.length;Ft++)vt.push(...Dt[Ft].startTrackingAll());vt.length||(vt=[Et])}return vt}onFailedConnect(vt){const Et=this.getSourceBlock();if(wo()){const Dt=Ro();setTimeout(function(){Et.isDisposed()||Et.getParent()||(io(Dt),this.bumpAwayFrom(vt),io(!1))}.bind(this),lt.config$$module$build$src$core$config.bumpDelay)}}disconnectInternal_(vt,Et){super.disconnectInternal_(vt,Et),vt.rendered&&vt.render(),Et.rendered&&(Et.updateDisabled(),Et.render(),Et.getSvgRoot().style.display="block")}respawnShadow_(){super.respawnShadow_();var vt=this.targetBlock();vt&&(vt.initSvg(),vt.render(!1),vt=this.getSourceBlock(),vt.rendered&&vt.render())}neighbours(vt){return this.dbOpposite_.getNeighbours(this,vt)}connect_(vt){super.connect_(vt);var Et=this.getSourceBlock();vt=vt.getSourceBlock();const Dt=Et.rendered,Ft=vt.rendered;Dt&&Et.updateDisabled(),Ft&&vt.updateDisabled(),Dt&&Ft&&(this.type===no.NEXT_STATEMENT||this.type===no.PREVIOUS_STATEMENT?vt.render():Et.render()),(Et=Et.getInputWithBlock(vt))&&(Et=Et.isVisible(),vt.getSvgRoot().style.display=Et?"block":"none")}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())}};(function(vt){vt=vt.TrackedState||(vt.TrackedState={}),vt[vt.WILL_TRACK=-1]="WILL_TRACK",vt[vt.UNTRACKED=0]="UNTRACKED",vt[vt.TRACKED=1]="TRACKED"})(Ql||(Ql={})),Ql.TrackedState;var PT=class extends Vv{constructor(vt){super(vt),this.paragraphElement=null,this.collapseHidden=!1,this.createIcon(),this.text=Object.create(null)}drawIcon_(vt){In(ar.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},vt),In(ar.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},vt),In(ar.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},vt)}setVisible(vt){vt!==this.isVisible()&&(Fr(new(Vr(Fp))(this.getBlock(),vt,"warning")),vt?this.createBubble():this.disposeBubble())}createBubble(){this.paragraphElement=ko.textToDom(this.getText()),this.bubble_=ko.createNonEditableBubble(this.paragraphElement,this.getBlock(),this.iconXY_),this.applyColour()}disposeBubble(){this.bubble_&&(this.bubble_.dispose(),this.bubble_=null),this.paragraphElement=null}setText(vt,Et){this.text[Et]!==vt&&(vt?this.text[Et]=vt:delete this.text[Et],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))}getText(){const vt=[];for(const Et in this.text)vt.push(this.text[Et]);return vt.join(`
`)}dispose(){this.getBlock().warning=null,super.dispose()}},Lu=class extends TO{constructor(vt,Et,Dt){super(vt,Et,Dt),this.renderingDebugger=null,this.width=this.height=0,this.warningTextDb=new Map,this.warning=this.commentIcon_=this.mutator=null,this.eventsInit_=this.renderIsInProgress_=this.rendered=!1,this.workspace=vt,this.decompose=this.decompose,this.compose=this.compose,this.saveConnections=this.saveConnections,this.customContextMenu=this.customContextMenu,this.svgGroup_=In(ar.G,{}),this.svgGroup_.translate_="",this.style=vt.getRenderer().getConstants().getBlockStyle(null),this.pathObject=vt.getRenderer().makePathObject(this.svgGroup_,this.style),this.useDragSurface_=!!vt.getBlockDragSurface(),vt=this.pathObject.svgPath,vt.tooltip=this,Tp(vt),this.svgGroup_.setAttribute("data-id",this.id),this.doInit_()}initSvg(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(let Et=0,Dt;Dt=this.inputList[Et];Et++)Dt.init();var vt=this.getIcons();for(let Et=0;Et<vt.length;Et++)vt[Et].createIcon();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),vt=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!vt||Zt(vt,"pointerdown",this,this.onMouseDown_),this.eventsInit_=!0,vt.parentNode||this.workspace.getCanvas().appendChild(vt)}getColourSecondary(){return this.style.colourSecondary}getColourTertiary(){return this.style.colourTertiary}select(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(Pn()!==this){var vt=null;if(Pn()){vt=Pn().id,Bo();try{Pn().unselect()}finally{yo()}}vt=new(Vr(ym))(vt,this.id,this.workspace.id),Fr(vt),Nn(this),this.addSelect()}}unselect(){if(Pn()===this){var vt=new(Vr(ym))(this.id,null,this.workspace.id);vt.workspaceId=this.workspace.id,Fr(vt),Nn(null),this.removeSelect()}}getIcons(){const vt=[];return this.mutator&&vt.push(this.mutator),this.commentIcon_&&vt.push(this.commentIcon_),this.warning&&vt.push(this.warning),vt}setParent(vt){const Et=this.parentBlock_;if(vt!==Et){Jr(),super.setParent(vt),Tr();var Dt=this.getSvgRoot();if(!this.workspace.isClearing&&Dt){var Ft=this.getRelativeToSurfaceXY();vt?(vt.getSvgRoot().appendChild(Dt),vt=this.getRelativeToSurfaceXY(),this.moveConnections(vt.x-Ft.x,vt.y-Ft.y)):Et&&(this.workspace.getCanvas().appendChild(Dt),this.translate(Ft.x,Ft.y)),this.applyColour()}}}getRelativeToSurfaceXY(){let vt=0,Et=0;const Dt=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null;let Ft=this.getSvgRoot();if(Ft)do{var Kt=Pl(Ft);vt+=Kt.x,Et+=Kt.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()===Ft&&(Kt=this.workspace.getBlockDragSurface().getSurfaceTranslation(),vt+=Kt.x,Et+=Kt.y),Ft=Ft.parentNode}while(Ft&&Ft!==this.workspace.getCanvas()&&Ft!==Dt);return new Zr(vt,Et)}moveBy(vt,Et){if(this.parentBlock_)throw Error("Block has parent.");const Dt=os();let Ft=null;Dt&&(Ft=new(Vr(Wl))(this));const Kt=this.getRelativeToSurfaceXY();this.translate(Kt.x+vt,Kt.y+Et),this.moveConnections(vt,Et),Dt&&Ft&&(Ft.recordNew(),Fr(Ft)),this.workspace.resizeContents()}translate(vt,Et){this.getSvgRoot().setAttribute("transform","translate("+vt+","+Et+")")}moveToDragSurface(){if(this.useDragSurface_){var vt=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(vt.x,vt.y),(vt=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow(vt)}}moveTo(vt){const Et=this.getRelativeToSurfaceXY();this.moveBy(vt.x-Et.x,vt.y-Et.y)}moveOffDragSurface(vt){this.useDragSurface_&&(this.translate(vt.x,vt.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))}moveDuringDrag(vt){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface(vt.x,vt.y):(this.svgGroup_.translate_="translate("+vt.x+","+vt.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))}clearTransformAttributes_(){this.getSvgRoot().removeAttribute("transform")}snapToGrid(){if(!(this.isDeadOrDying()||this.workspace.isDragging()||this.getParent()||this.isInFlyout)){var vt=this.workspace.getGrid();if(vt&&vt.shouldSnap()){var Et=vt.getSpacing(),Dt=Et/2,Ft=this.getRelativeToSurfaceXY();vt=Math.round(Math.round((Ft.x-Dt)/Et)*Et+Dt-Ft.x),Et=Math.round(Math.round((Ft.y-Dt)/Et)*Et+Dt-Ft.y),(vt||Et)&&this.moveBy(vt,Et)}}}getBoundingRectangle(){const vt=this.getRelativeToSurfaceXY(),Et=this.getHeightWidth();let Dt,Ft;return this.RTL?(Dt=vt.x-Et.width,Ft=vt.x):(Dt=vt.x,Ft=vt.x+Et.width),new xs(vt.y,vt.y+Et.height,Dt,Ft)}markDirty(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(let vt=0,Et;Et=this.inputList[vt];vt++)Et.markDirty()}setCollapsed(vt){this.collapsed_!==vt&&(super.setCollapsed(vt),vt?this.rendered&&this.render():this.updateCollapsed_())}updateCollapsed_(){var vt=this.isCollapsed();const Et=a0,Dt=l0;for(let Kt=0,yn;yn=this.inputList[Kt];Kt++)yn.name!==Et&&yn.setVisible(!vt);if(vt){vt=this.getIcons();for(let Kt=0,yn;yn=vt[Kt];Kt++)yn.setVisible(!1);vt=this.toString(RT);var Ft=this.getField(Dt);Ft?Ft.setValue(vt):(this.getInput(Et)||this.appendDummyInput(Et)).appendField(new lt.FieldLabel$$module$build$src$core$field_label(vt),Dt)}else this.updateDisabled(),this.removeInput(Et)}tab(vt,Et){const Dt=new MT;Dt.setCurNode(kr.createFieldNode(vt)),vt=Dt.getCurNode(),Et?Dt.next():Dt.prev(),(Et=Dt.getCurNode())&&Et!==vt&&(Et.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(Et))}onMouseDown_(vt){const Et=this.workspace.getGesture(vt);Et&&Et.handleBlockStart(vt,this)}showHelp(){const vt=typeof this.helpUrl=="function"?this.helpUrl():this.helpUrl;vt&&window.open(vt)}generateContextMenu(){if(this.workspace.options.readOnly||!this.contextMenu)return null;const vt=Ko.registry.getContextMenuOptions(Ko.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(vt),vt}showContextMenu(vt){const Et=this.generateContextMenu();Et&&Et.length&&(ip(vt,Et,this.RTL),rp(this))}moveConnections(vt,Et){if(this.rendered){for(var Dt=this.getConnections_(!1),Ft=0;Ft<Dt.length;Ft++)Dt[Ft].moveBy(vt,Et);for(Dt=this.getIcons(),Ft=0;Ft<Dt.length;Ft++)Dt[Ft].computeIconLocation();for(Dt=0;Dt<this.childBlocks_.length;Dt++)this.childBlocks_[Dt].moveConnections(vt,Et)}}setDragging(vt){if(vt){var Et=this.getSvgRoot();Et.translate_="",Et.skew_="",fs.push(...this.getConnections_(!0)),ir(this.svgGroup_,"blocklyDragging")}else fs.length=0,Jn(this.svgGroup_,"blocklyDragging");for(Et=0;Et<this.childBlocks_.length;Et++)this.childBlocks_[Et].setDragging(vt)}setMovable(vt){super.setMovable(vt),this.pathObject.updateMovable(vt)}setEditable(vt){super.setEditable(vt),vt=this.getIcons();for(let Et=0;Et<vt.length;Et++)vt[Et].updateEditable()}setShadow(vt){super.setShadow(vt),this.applyColour()}setInsertionMarker(vt){this.isInsertionMarker_!==vt&&(this.isInsertionMarker_=vt)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))}getSvgRoot(){return this.svgGroup_}dispose(vt,Et){if(!this.isDeadOrDying()){Cu(),ga(this.pathObject.svgPath),Jr();var Dt=this.workspace;Pn()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),sv()===this&&Zm(),Et&&this.rendered&&(this.unplug(vt),j_(this)),this.rendered=!1;for(var Ft of this.warningTextDb.values())clearTimeout(Ft);for(this.warningTextDb.clear(),Et=this.getIcons(),Ft=0;Ft<Et.length;Ft++)Et[Ft].dispose();Pn()===this&&Nn(null),super.dispose(!!vt),br(this.svgGroup_),Dt.resizeContents(),this.svgGroup_=null,Tr()}}checkAndDelete(){this.workspace.isFlyout||(io(!0),this.workspace.hideChaff(),this.outputConnection?this.dispose(!1,!0):this.dispose(!0,!0),io(!1))}toCopyData(){return this.isInsertionMarker_?null:{saveInfo:eu(this,{addCoordinates:!0,addNextBlocks:!1}),source:this.workspace,typeCounts:Qn(this,!0)}}applyColour(){this.pathObject.applyColour(this);const vt=this.getIcons();for(let Et=0;Et<vt.length;Et++)vt[Et].applyColour();for(let Et=0,Dt;Dt=this.inputList[Et];Et++)for(let Ft=0,Kt;Kt=Dt.fieldRow[Ft];Ft++)Kt.applyColour()}updateDisabled(){const vt=this.getChildren(!1);if(this.applyColour(),!this.isCollapsed())for(let Et=0,Dt;Dt=vt[Et];Et++)Dt.rendered&&Dt.updateDisabled()}getCommentIcon(){return this.commentIcon_}setCommentText(vt){this.commentModel.text!==vt&&(super.setCommentText(vt),vt=vt!==null,!!this.commentIcon_===vt?this.commentIcon_.updateText():(vt?this.comment=this.commentIcon_=new AT(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))}setWarningText(vt,Et){const Dt=Et||"";if(Dt)this.warningTextDb.has(Dt)&&(clearTimeout(this.warningTextDb.get(Dt)),this.warningTextDb.delete(Dt));else{for(var Ft of this.warningTextDb.values())clearTimeout(Ft);this.warningTextDb.clear()}if(this.workspace.isDragging())this.warningTextDb.set(Dt,setTimeout(()=>{this.isDeadOrDying()||(this.warningTextDb.delete(Dt),this.setWarningText(vt,Dt))},100));else{if(this.isInFlyout&&(vt=null),Et=!1,typeof vt=="string"){Ft=this.getSurroundParent();let Kt=null;for(;Ft;)Ft.isCollapsed()&&(Kt=Ft),Ft=Ft.getSurroundParent();Kt&&Kt.setWarningText($o.COLLAPSED_WARNINGS_WARNING,Lu.COLLAPSED_WARNING_ID),this.warning||(this.warning=new PT(this),Et=!0),this.warning.setText(vt,Dt)}else this.warning&&!Dt?(this.warning.dispose(),Et=!0):this.warning&&(Et=this.warning.getText(),this.warning.setText("",Dt),(Ft=this.warning.getText())||this.warning.dispose(),Et=Et!==Ft);Et&&this.rendered&&(this.render(),this.bumpNeighbours())}}setMutator(vt){this.mutator&&this.mutator!==vt&&this.mutator.dispose(),vt&&(vt.setBlock(this),this.mutator=vt,vt.createIcon()),this.rendered&&(this.render(),this.bumpNeighbours())}setEnabled(vt){this.isEnabled()!==vt&&(super.setEnabled(vt),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())}setHighlighted(vt){this.rendered&&this.pathObject.updateHighlighted(vt)}addSelect(){this.pathObject.updateSelected(!0)}removeSelect(){this.pathObject.updateSelected(!1)}setDeleteStyle(vt){this.pathObject.updateDraggingDelete(vt)}getColour(){return this.style.colourPrimary}setColour(vt){super.setColour(vt),vt=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(vt.style),this.style=vt.style,this.styleName_=vt.name,this.applyColour()}setStyle(vt){const Et=this.workspace.getRenderer().getConstants().getBlockStyle(vt);if(this.styleName_=vt,Et)this.hat=Et.hat,this.pathObject.setStyle(Et),this.colour_=Et.colourPrimary,this.style=Et,this.applyColour();else throw Error("Invalid style name: "+vt)}bringToFront(){let vt=this;do{const Et=vt.getSvgRoot(),Dt=Et.parentNode,Ft=Dt.childNodes;Ft[Ft.length-1]!==Et&&Dt.appendChild(Et),vt=vt.getParent()}while(vt)}setPreviousStatement(vt,Et){super.setPreviousStatement(vt,Et),this.rendered&&(this.render(),this.bumpNeighbours())}setNextStatement(vt,Et){super.setNextStatement(vt,Et),this.rendered&&(this.render(),this.bumpNeighbours())}setOutput(vt,Et){super.setOutput(vt,Et),this.rendered&&(this.render(),this.bumpNeighbours())}setInputsInline(vt){super.setInputsInline(vt),this.rendered&&(this.render(),this.bumpNeighbours())}removeInput(vt,Et){return vt=super.removeInput(vt,Et),this.rendered&&(this.render(),this.bumpNeighbours()),vt}moveNumberedInputBefore(vt,Et){super.moveNumberedInputBefore(vt,Et),this.rendered&&(this.render(),this.bumpNeighbours())}appendInput_(vt,Et){return vt=super.appendInput_(vt,Et),this.rendered&&(this.render(),this.bumpNeighbours()),vt}setConnectionTracking(vt){if(this.previousConnection&&this.previousConnection.setTracking(vt),this.outputConnection&&this.outputConnection.setTracking(vt),this.nextConnection){this.nextConnection.setTracking(vt);var Et=this.nextConnection.targetBlock();Et&&Et.setConnectionTracking(vt)}if(!this.collapsed_)for(Et=0;Et<this.inputList.length;Et++){var Dt=this.inputList[Et].connection;Dt&&(Dt.setTracking(vt),(Dt=Dt.targetBlock())&&Dt.setConnectionTracking(vt))}}getConnections_(vt){const Et=[];if((vt||this.rendered)&&(this.outputConnection&&Et.push(this.outputConnection),this.previousConnection&&Et.push(this.previousConnection),this.nextConnection&&Et.push(this.nextConnection),vt||!this.collapsed_))for(let Dt=0,Ft;Ft=this.inputList[Dt];Dt++)Ft.connection&&Et.push(Ft.connection);return Et}lastConnectionInStack(vt){return super.lastConnectionInStack(vt)}getMatchingConnection(vt,Et){return super.getMatchingConnection(vt,Et)}makeConnection_(vt){return new Ql(this,vt)}getNextBlock(){return super.getNextBlock()}getPreviousBlock(){return super.getPreviousBlock()}bumpNeighbours(){this.getRootBlock().bumpNeighboursInternal()}bumpNeighboursInternal(){const vt=this.getRootBlock();if(!(this.isDeadOrDying()||this.workspace.isDragging()||vt.isInFlyout))for(const Et of this.getConnections_(!1)){if(Et.isSuperior()){let Dt;(Dt=Et.targetBlock())==null||Dt.bumpNeighboursInternal()}for(const Dt of Et.neighbours(lt.config$$module$build$src$core$config.snapRadius))Dt.getSourceBlock().getRootBlock()!==vt&&(Et.isConnected()&&Dt.isConnected()||(Et.isSuperior()?Dt.bumpAwayFrom(Et):Et.bumpAwayFrom(Dt)))}}scheduleSnapAndBump(){const vt=Ro();setTimeout(()=>{io(vt),this.snapToGrid(),io(!1)},lt.config$$module$build$src$core$config.bumpDelay/2),setTimeout(()=>{io(vt),this.bumpNeighbours(),io(!1)},lt.config$$module$build$src$core$config.bumpDelay)}positionNearConnection(vt,Et){vt.type!==no.NEXT_STATEMENT&&vt.type!==no.INPUT_VALUE||this.moveBy(Et.x-vt.x,Et.y-vt.y)}getFirstStatementConnection(){return super.getFirstStatementConnection()}getChildren(vt){return super.getChildren(vt)}render(vt){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{if(this.rendered=!0,Jr(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),vt!==!1){const Et=this.getParent();Et?Et.render(!0):this.workspace.resizeContents()}Tr(),this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}}updateMarkers_(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(Zy.LOCAL_MARKER).draw()}updateConnectionLocations_(){const vt=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(vt),this.outputConnection&&this.outputConnection.moveToOffset(vt);for(let Et=0;Et<this.inputList.length;Et++){const Dt=this.inputList[Et].connection;Dt&&(Dt.moveToOffset(vt),Dt.isConnected()&&Dt.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset(vt),this.nextConnection.isConnected()&&this.nextConnection.tighten())}setCursorSvg(vt){this.pathObject.setCursorSvg(vt)}setMarkerSvg(vt){this.pathObject.setMarkerSvg(vt)}getHeightWidth(){let vt=this.height,Et=this.width;var Dt=this.getNextBlock();if(Dt){Dt=Dt.getHeightWidth();const Ft=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;vt+=Dt.height-Ft,Et=Math.max(Et,Dt.width)}return{height:vt,width:Et}}fadeForReplacement(vt){this.pathObject.updateReplacementFade(vt)}highlightShapeForInput(vt,Et){this.pathObject.updateShapeForInputHighlight(vt,Et)}};Lu.INLINE=-1,Lu.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_";var LT=class{constructor(){}onDragEnter(vt){}onDragOver(vt){}onDragExit(vt){}onDrop(vt){}getClientRect(){return null}shouldPreventMove(vt){return!1}},zv=class extends LT{constructor(){super(),this.wouldDelete_=!1}wouldDelete(vt,Et){return vt instanceof Lu?(vt=!vt.getParent()&&vt.isDeletable(),this.updateWouldDelete_(vt&&!Et)):this.updateWouldDelete_(vt.isDeletable()),this.wouldDelete_}updateWouldDelete_(vt){this.wouldDelete_=vt}},Qp;(function(vt){vt[vt.TOP=0]="TOP",vt[vt.BOTTOM=1]="BOTTOM"})(Qp||(Qp={}));var EO;(function(vt){vt[vt.LEFT=0]="LEFT",vt[vt.RIGHT=1]="RIGHT"})(EO||(EO={}));var $m;(function(vt){vt[vt.UP=0]="UP",vt[vt.DOWN=1]="DOWN"})($m||($m={}));var g_={};g_.bumpDirection=$m,g_.bumpPositionRect=yy,g_.getCornerOppositeToolbox=um,g_.getStartPositionRect=qm,g_.horizontalPosition=EO,g_.verticalPosition=Qp;var Hl={width:96,height:124,url:"sprites.png"},DT=class extends zv{constructor(vt){super(),this.workspace=vt,this.id="trashcan",this.contents_=[],this.flyout=null,this.isLidOpen=!1,this.minOpenness_=0,this.lidTask_=this.svgLid_=this.svgGroup_=null,this.top_=this.left_=this.lidOpen_=0,this.initialized_=!1,0>=this.workspace.options.maxTrashcanContents||(vt=new Ju({scrollbars:!0,parentWorkspace:this.workspace,rtl:this.workspace.RTL,oneBasedIndex:this.workspace.options.oneBasedIndex,renderer:this.workspace.options.renderer,rendererOverrides:this.workspace.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace.horizontalLayout?(vt.toolboxPosition=this.workspace.toolboxPosition===Co.TOP?Co.BOTTOM:Co.TOP,this.flyout=new(bo(Wr.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace.options,!0))(vt)):(vt.toolboxPosition=this.workspace.toolboxPosition===Co.RIGHT?Co.LEFT:Co.RIGHT,this.flyout=new(bo(Wr.FLYOUTS_VERTICAL_TOOLBOX,this.workspace.options,!0))(vt)),this.workspace.addChangeListener(this.onDelete_.bind(this)))}createDom(){this.svgGroup_=In(ar.G,{class:"blocklyTrash"});let vt;const Et=String(Math.random()).substring(2);vt=In(ar.CLIPPATH,{id:"blocklyTrashBodyClipPath"+Et},this.svgGroup_),In(ar.RECT,{width:xO,height:jv,y:wO},vt);const Dt=In(ar.IMAGE,{width:Hl.width,x:-s$,height:Hl.height,y:-a$,"clip-path":"url(#blocklyTrashBodyClipPath"+Et+")"},this.svgGroup_);return Dt.setAttributeNS(iu,"xlink:href",this.workspace.options.pathToMedia+Hl.url),vt=In(ar.CLIPPATH,{id:"blocklyTrashLidClipPath"+Et},this.svgGroup_),In(ar.RECT,{width:xO,height:wO},vt),this.svgLid_=In(ar.IMAGE,{width:Hl.width,x:-s$,height:Hl.height,y:-a$,"clip-path":"url(#blocklyTrashLidClipPath"+Et+")"},this.svgGroup_),this.svgLid_.setAttributeNS(iu,"xlink:href",this.workspace.options.pathToMedia+Hl.url),ln(this.svgGroup_,"pointerdown",this,this.blockMouseDownWhenOpenable_),ln(this.svgGroup_,"pointerup",this,this.click),ln(Dt,"pointerover",this,this.mouseOver_),ln(Dt,"pointerout",this,this.mouseOut_),this.animateLid_(),this.svgGroup_}init(){0<this.workspace.options.maxTrashcanContents&&(Gr(this.flyout.createDom(ar.SVG),this.workspace.getParentSvg()),this.flyout.init(this.workspace)),this.workspace.getComponentManager().addComponent({component:this,weight:1,capabilities:[Ks.Capability.AUTOHIDEABLE,Ks.Capability.DELETE_AREA,Ks.Capability.DRAG_TARGET,Ks.Capability.POSITIONABLE]}),this.initialized_=!0,this.setLidOpen(!1)}dispose(){this.workspace.getComponentManager().removeComponent("trashcan"),this.svgGroup_&&(br(this.svgGroup_),this.svgGroup_=null),this.svgLid_=null,this.lidTask_&&clearTimeout(this.lidTask_)}hasContents_(){return!!this.contents_.length}contentsIsOpen(){return!!this.flyout&&this.flyout.isVisible()}openFlyout(){if(!this.contentsIsOpen()){var vt=this.contents_.map(function(Dt){return JSON.parse(Dt)}),Et=this.workspace.getParentSvg().style;Et.cursor="wait",setTimeout(()=>{let Dt;(Dt=this.flyout)==null||Dt.show(vt),Et.cursor=""},10),this.fireUiEvent_(!0)}}closeFlyout(){if(this.contentsIsOpen()){var vt;(vt=this.flyout)==null||vt.hide(),this.fireUiEvent_(!1),this.workspace.recordDragTargets()}}autoHide(vt){!vt&&this.flyout&&this.closeFlyout()}emptyContents(){this.hasContents_()&&(this.contents_.length=0,this.setMinOpenness_(0),this.closeFlyout())}position(vt,Et){if(this.initialized_){var Dt=um(this.workspace,vt);vt=qm(Dt,new qs(xO,jv+wO),nx,NT,vt,this.workspace),Et=yy(vt,NT,Dt.vertical===Qp.TOP?$m.DOWN:$m.UP,Et),this.top_=Et.top,this.left_=Et.left;var Ft;(Ft=this.svgGroup_)==null||Ft.setAttribute("transform","translate("+this.left_+","+this.top_+")")}}getBoundingRectangle(){return new xs(this.top_,this.top_+jv+wO,this.left_,this.left_+xO)}getClientRect(){if(!this.svgGroup_)return null;var vt=this.svgGroup_.getBoundingClientRect();const Et=vt.top+a$-Xv;return vt=vt.left+s$-Xv,new xs(Et,Et+wO+jv+2*Xv,vt,vt+xO+2*Xv)}onDragOver(vt){this.setLidOpen(this.wouldDelete_)}onDragExit(vt){this.setLidOpen(!1)}onDrop(vt){setTimeout(this.setLidOpen.bind(this,!1),100)}setLidOpen(vt){this.isLidOpen!==vt&&(this.lidTask_&&clearTimeout(this.lidTask_),this.isLidOpen=vt,this.animateLid_())}animateLid_(){const vt=ox;var Et=1/(vt+1);this.lidOpen_+=this.isLidOpen?Et:-Et,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(this.lidOpen_*FT),Et=BT+this.lidOpen_*(sx-BT),this.svgGroup_&&(this.svgGroup_.style.opacity=Et.toString()),this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),ix/vt))}setLidAngle_(vt){const Et=this.workspace.toolboxPosition===Co.RIGHT||this.workspace.horizontalLayout&&this.workspace.RTL;let Dt;(Dt=this.svgLid_)==null||Dt.setAttribute("transform","rotate("+(Et?-vt:vt)+","+(Et?4:xO-4)+","+(wO-2)+")")}setMinOpenness_(vt){this.minOpenness_=vt,this.isLidOpen||this.setLidAngle_(vt*FT)}closeLid(){this.setLidOpen(!1)}click(){this.hasContents_()&&this.openFlyout()}fireUiEvent_(vt){vt=new(Vr(Wy))(vt,this.workspace.id),Fr(vt)}blockMouseDownWhenOpenable_(vt){!this.contentsIsOpen()&&this.hasContents_()&&vt.stopPropagation()}mouseOver_(){this.hasContents_()&&this.setLidOpen(!0)}mouseOut_(){this.setLidOpen(!1)}onDelete_(vt){if(!(0>=this.workspace.options.maxTrashcanContents||vt.type!==pp||vt.type!==pp||vt.wasShadow)){if(!vt.oldJson)throw Error("Encountered a delete event without proper oldJson");if(vt=JSON.stringify(this.cleanBlockJson_(vt.oldJson)),this.contents_.indexOf(vt)===-1){for(this.contents_.unshift(vt);this.contents_.length>this.workspace.options.maxTrashcanContents;)this.contents_.pop();this.setMinOpenness_(rx)}}}cleanBlockJson_(vt){function Et(Dt){if(Dt){if(delete Dt.id,delete Dt.x,delete Dt.y,delete Dt.enabled,Dt.icons&&Dt.icons.comment){var Ft=Dt.icons.comment;delete Ft.height,delete Ft.width,delete Ft.pinned}Ft=Dt.inputs;for(var Kt in Ft){var yn=Ft[Kt];const Mn=yn.block;yn=yn.shadow,Mn&&Et(Mn),yn&&Et(yn)}Dt.next&&(Kt=Dt.next,Dt=Kt.block,Kt=Kt.shadow,Dt&&Et(Dt),Kt&&Et(Kt))}}return vt=JSON.parse(JSON.stringify(vt)),Et(vt),Object.assign({},{kind:"BLOCK"},vt)}},xO=47,jv=44,wO=16,NT=20,nx=20,Xv=10,s$=0,a$=32,rx=.1,ix=80,ox=4,BT=.4,sx=.8,FT=45,l$=class extends Yu{constructor(vt,Et,Dt){super(Dt),this.type=Qy,this.oldItem=vt??void 0,this.newItem=Et??void 0}toJson(){const vt=super.toJson();return vt.oldItem=this.oldItem,vt.newItem=this.newItem,vt}fromJson(vt){ft("Blockly.Events.ToolboxItemSelect.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(vt),this.oldItem=vt.oldItem,this.newItem=vt.newItem}static fromJson(vt,Et,Dt){return Et=super.fromJson(vt,Et,Dt??new l$),Et.oldItem=vt.oldItem,Et.newItem=vt.newItem,Et}};xo(Wr.EVENT,Qy,l$);var c$=class{constructor(vt,Et,Dt){this.id_=vt.toolboxitemid||Lo(),this.level_=(this.parent_=Dt||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=vt,this.parentToolbox_=Et,this.workspace_=this.parentToolbox_.getWorkspace()}init(){}getDiv(){return null}getClickTarget(){return null}getId(){return this.id_}getParent(){return null}getLevel(){return this.level_}isSelectable(){return!1}isCollapsible(){return!1}dispose(){}setVisible_(vt){}},_h=class extends c${constructor(vt,Et,Dt){super(vt,Et,Dt),this.colour_=this.name_="",this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.cssConfig_=this.makeDefaultCssConfig_()}init(){this.parseCategoryDef_(this.toolboxItemDef_),this.parseContents_(this.toolboxItemDef_),this.createDom_(),this.toolboxItemDef_.hidden==="true"&&this.hide()}makeDefaultCssConfig_(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}}parseContents_(vt){if("custom"in vt)this.flyoutItems_=vt.custom;else if(vt=vt.contents)for(let Et=0;Et<vt.length;Et++){const Dt=vt[Et];Array.isArray(this.flyoutItems_)&&this.flyoutItems_.push(Dt)}}parseCategoryDef_(vt){this.name_="name"in vt?ds(vt.name):"",this.colour_=this.getColour_(vt),Object.assign(this.cssConfig_,vt.cssconfig||vt.cssConfig)}createDom_(){this.htmlDiv_=this.createContainer_(),Ss(this.htmlDiv_,su.TREEITEM),ts(this.htmlDiv_,ps.SELECTED,!1),ts(this.htmlDiv_,ps.LEVEL,this.level_),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),Ss(this.iconDom_,su.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_);const vt=this.labelDom_.getAttribute("id");return vt&&ts(this.htmlDiv_,ps.LABELLEDBY,vt),this.addColourBorder_(this.colour_),this.htmlDiv_}createContainer_(){const vt=document.createElement("div"),Et=this.cssConfig_.container;return Et&&ir(vt,Et),vt}createRowContainer_(){const vt=document.createElement("div");var Et=this.cssConfig_.row;return Et&&ir(vt,Et),Et=`${_h.nestedPadding*this.getLevel()}px`,this.workspace_.RTL?vt.style.paddingRight=Et:vt.style.paddingLeft=Et,vt}createRowContentsContainer_(){const vt=document.createElement("div"),Et=this.cssConfig_.rowcontentcontainer;return Et&&ir(vt,Et),vt}createIconDom_(){const vt=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const Et=this.cssConfig_.icon;Et&&ir(vt,Et)}return vt.style.display="inline-block",vt}createLabelDom_(vt){const Et=document.createElement("span");return Et.setAttribute("id",this.getId()+".label"),Et.textContent=vt,(vt=this.cssConfig_.label)&&ir(Et,vt),Et}refreshTheme(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)}addColourBorder_(vt){vt&&(vt=_h.borderWidth+"px solid "+(vt||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=vt:this.rowDiv_.style.borderLeft=vt)}getColour_(vt){const Et=vt.categorystyle||vt.categoryStyle;if((vt=vt.colour)&&Et)console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour');else{if(Et)return this.getColourfromStyle_(Et);if(vt)return this.parseColour_(vt)}return""}getColourfromStyle_(vt){var Et=this.workspace_.getTheme();if(vt&&Et){if((Et=Et.categoryStyles[vt])&&Et.colour)return this.parseColour_(Et.colour);console.warn('Style "'+vt+'" must exist and contain a colour value')}return""}getClickTarget(){return this.rowDiv_}parseColour_(vt){if(vt=ds(vt),vt==null||vt==="")return"";var Et=Number(vt);return isNaN(Et)?(Et=Uu(vt))?Et:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+vt),""):Lm(Et)}openIcon_(vt){if(vt){var Et=this.cssConfig_.closedicon;Et&&pr(vt,Et),(Et=this.cssConfig_.openicon)&&ir(vt,Et)}}closeIcon_(vt){if(vt){var Et=this.cssConfig_.openicon;Et&&pr(vt,Et),(Et=this.cssConfig_.closedicon)&&ir(vt,Et)}}setVisible_(vt){this.htmlDiv_.style.display=vt?"block":"none",this.isHidden_=!vt,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}hide(){this.setVisible_(!1)}show(){this.setVisible_(!0)}isVisible(){return!this.isHidden_&&this.allAncestorsExpanded_()}allAncestorsExpanded_(){let vt=this;for(;vt.getParent();)if(vt=vt.getParent(),!vt.isExpanded())return!1;return!0}isSelectable(){return this.isVisible()&&!this.isDisabled_}onClick(vt){}setSelected(vt){if(this.rowDiv_){var Et=this.cssConfig_.selected;if(vt){const Dt=this.parseColour_(_h.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||Dt,Et&&ir(this.rowDiv_,Et)}else this.rowDiv_.style.backgroundColor="",Et&&Jn(this.rowDiv_,Et);ts(this.htmlDiv_,ps.SELECTED,vt)}}setDisabled(vt){this.isDisabled_=vt,this.getDiv().setAttribute("disabled",`${vt}`),vt?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")}getName(){return this.name_}getParent(){return this.parent_}getDiv(){return this.htmlDiv_}getContents(){return this.flyoutItems_}updateFlyoutContents(vt){this.flyoutItems_=[],this.toolboxItemDef_=typeof vt=="string"?{kind:this.toolboxItemDef_.kind,custom:vt,id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden}:{kind:this.toolboxItemDef_.kind,name:"name"in this.toolboxItemDef_?this.toolboxItemDef_.name:"",contents:om(vt),id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden},this.parseContents_(this.toolboxItemDef_)}dispose(){br(this.htmlDiv_)}};_h.registrationName="category",_h.nestedPadding=19,_h.borderWidth=8,_h.defaultBackgroundColour="#57e",uu(`
.blocklyTreeRow:not(.blocklyTreeSelected):hover {
  background-color: rgba(255, 255, 255, .2);
}

.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {
  margin: 1px 5px 1px 0;
}

.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {
  margin: 1px 0 1px 5px;
}

.blocklyTreeRow {
  height: 22px;
  line-height: 22px;
  margin-bottom: 3px;
  padding-right: 8px;
  white-space: nowrap;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {
  margin-left: 8px;
  padding-right: 0;
}

.blocklyTreeIcon {
  background-image: url(<<<PATH>>>/sprites.png);
  height: 16px;
  vertical-align: middle;
  visibility: hidden;
  width: 16px;
}

.blocklyTreeIconClosed {
  background-position: -32px -1px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {
  background-position: 0 -1px;
}

.blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: -32px -17px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: 0 -17px;
}

.blocklyTreeIconOpen {
  background-position: -16px -1px;
}

.blocklyTreeSelected>.blocklyTreeIconOpen {
  background-position: -16px -17px;
}

.blocklyTreeLabel {
  cursor: default;
  font: 16px sans-serif;
  padding: 0 3px;
  vertical-align: middle;
}

.blocklyToolboxDelete .blocklyTreeLabel {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyTreeSelected .blocklyTreeLabel {
  color: #fff;
}
`),xo(Wr.TOOLBOX_ITEM,_h.registrationName,_h);var m0=class extends c${constructor(vt,Et){super(vt,Et),this.cssConfig_={container:"blocklyTreeSeparator"},this.htmlDiv_=null,Object.assign(this.cssConfig_,vt.cssconfig||vt.cssConfig)}init(){this.createDom_()}createDom_(){const vt=document.createElement("div"),Et=this.cssConfig_.container;return Et&&ir(vt,Et),this.htmlDiv_=vt}getDiv(){return this.htmlDiv_}dispose(){br(this.htmlDiv_)}};m0.registrationName="sep",uu(`
.blocklyTreeSeparator {
  border-bottom: solid #e5e5e5 1px;
  height: 0;
  margin: 5px 0;
}

.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {
  border-right: solid #e5e5e5 1px;
  border-bottom: none;
  height: auto;
  margin: 0 5px 0 5px;
  padding: 5px 0;
  width: 0;
}
`),xo(Wr.TOOLBOX_ITEM,m0.registrationName,m0);var CO=class extends _h{constructor(vt,Et,Dt){super(vt,Et,Dt),this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[]}makeDefaultCssConfig_(){const vt=super.makeDefaultCssConfig_();return vt.contents="blocklyToolboxContents",vt}parseContents_(vt){const Et=vt.contents;let Dt=!0;if(vt.custom)this.flyoutItems_=vt.custom;else if(Et)for(vt=0;vt<Et.length;vt++){const Ft=Et[vt];!xr(Wr.TOOLBOX_ITEM,Ft.kind)||Ft.kind.toLowerCase()===m0.registrationName&&Dt?(this.flyoutItems_.push(Ft),Dt=!0):(this.createToolboxItem_(Ft),Dt=!1)}}createToolboxItem_(vt){let Et=vt.kind;Et.toUpperCase()==="CATEGORY"&&Vu(vt)&&(Et=CO.registrationName),vt=new(dr(Wr.TOOLBOX_ITEM,Et))(vt,this.parentToolbox_,this),this.toolboxItems_.push(vt)}init(){super.init(),this.setExpanded(this.toolboxItemDef_.expanded==="true"||this.toolboxItemDef_.expanded)}createDom_(){super.createDom_();const vt=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(vt),Ss(this.subcategoriesDiv_,su.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.htmlDiv_}createIconDom_(){const vt=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const Et=this.cssConfig_.icon;Et&&ir(vt,Et),vt.style.visibility="visible"}return vt.style.display="inline-block",vt}createSubCategoriesDom_(vt){const Et=document.createElement("div");var Dt=this.cssConfig_.contents;for(Dt&&ir(Et,Dt),Dt=0;Dt<vt.length;Dt++){const Ft=vt[Dt];Ft.init();const Kt=Ft.getDiv();if(Et.appendChild(Kt),Ft.getClickTarget){let yn;(yn=Ft.getClickTarget())==null||yn.setAttribute("id",Ft.getId())}}return Et}setExpanded(vt){this.expanded_!==vt&&((this.expanded_=vt)?(this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)),ts(this.htmlDiv_,ps.EXPANDED,vt),this.parentToolbox_.handleToolboxItemResize())}setVisible_(vt){this.htmlDiv_.style.display=vt?"block":"none";const Et=this.getChildToolboxItems();for(let Dt=0;Dt<Et.length;Dt++)Et[Dt].setVisible_(vt);this.isHidden_=!vt,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}isExpanded(){return this.expanded_}isCollapsible(){return!0}onClick(vt){this.toggleExpanded()}toggleExpanded(){this.setExpanded(!this.expanded_)}getDiv(){return this.htmlDiv_}getChildToolboxItems(){return this.toolboxItems_}};CO.registrationName="collapsibleCategory",xo(Wr.TOOLBOX_ITEM,CO.registrationName,CO);var GT=class extends zv{constructor(vt){super(),this.id="toolbox",this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.previouslySelectedItem_=this.selectedItem_=this.flyout_=null,this.boundEvents_=[],this.workspace_=vt,this.toolboxDef_=vt.options.languageTree||{contents:[]},this.horizontalLayout_=vt.options.horizontalLayout,this.RTL=vt.options.RTL,this.contentMap_=Object.create(null),this.toolboxPosition=vt.options.toolboxPosition}onShortcut(vt){return!1}init(){var vt=this.workspace_;const Et=vt.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),Gr(this.flyout_.createDom("svg"),Et),this.setVisible(!0),this.flyout_.init(vt),this.render(this.toolboxDef_),vt=vt.getThemeManager(),vt.subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),vt.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[Ks.Capability.AUTOHIDEABLE,Ks.Capability.DELETE_AREA,Ks.Capability.DRAG_TARGET]})}createDom_(vt){vt=vt.getParentSvg();const Et=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,Ss(this.contentsDiv_,su.TREE),Et.appendChild(this.contentsDiv_),vt.parentNode.insertBefore(Et,vt),this.attachEvents_(Et,this.contentsDiv_),Et}createContainer_(){const vt=document.createElement("div");return vt.setAttribute("layout",this.isHorizontal()?"h":"v"),ir(vt,"blocklyToolboxDiv"),ir(vt,"blocklyNonSelectable"),vt.setAttribute("dir",this.RTL?"RTL":"LTR"),vt}createContentsContainer_(){const vt=document.createElement("div");return ir(vt,"blocklyToolboxContents"),this.isHorizontal()&&(vt.style.flexDirection="row"),vt}attachEvents_(vt,Et){vt=Zt(vt,"pointerdown",this,this.onClick_,!1),this.boundEvents_.push(vt),Et=Zt(Et,"keydown",this,this.onKeyDown_,!1),this.boundEvents_.push(Et)}onClick_(vt){if(pn(vt)||vt.target===this.HtmlDiv)xn().hideChaff(!1);else{var Et=vt.target.getAttribute("id");Et&&(Et=this.getToolboxItemById(Et),Et.isSelectable()&&(this.setSelectedItem(Et),Et.onClick(vt))),xn().hideChaff(!0)}Ct()}onKeyDown_(vt){let Et=!1;switch(vt.keyCode){case lo.DOWN:Et=this.selectNext_();break;case lo.UP:Et=this.selectPrevious_();break;case lo.LEFT:Et=this.selectParent_();break;case lo.RIGHT:Et=this.selectChild_();break;case lo.ENTER:case lo.SPACE:this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),Et=!0);break;default:Et=!1}if(!Et&&this.selectedItem_){const Dt=this.selectedItem_;Dt.onKeyDown&&(Et=Dt.onKeyDown(vt))}Et&&vt.preventDefault()}createFlyout_(){const vt=this.workspace_,Et=new Ju({parentWorkspace:vt,rtl:vt.RTL,oneBasedIndex:vt.options.oneBasedIndex,horizontalLayout:vt.horizontalLayout,renderer:vt.options.renderer,rendererOverrides:vt.options.rendererOverrides,move:{scrollbars:!0}});return Et.toolboxPosition=vt.options.toolboxPosition,new(vt.horizontalLayout?bo(Wr.FLYOUTS_HORIZONTAL_TOOLBOX,vt.options,!0):bo(Wr.FLYOUTS_VERTICAL_TOOLBOX,vt.options,!0))(Et)}render(vt){this.toolboxDef_=vt;for(let Et=0;Et<this.contents_.length;Et++){const Dt=this.contents_[Et];Dt&&Dt.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(vt.contents),this.position(),this.handleToolboxItemResize()}renderContents_(vt){const Et=document.createDocumentFragment();for(let Dt=0;Dt<vt.length;Dt++)this.createToolboxItem_(vt[Dt],Et);this.contentsDiv_.appendChild(Et)}createToolboxItem_(vt,Et){var Dt=vt.kind;Dt.toUpperCase()==="CATEGORY"&&Vu(vt)&&(Dt=CO.registrationName),(Dt=dr(Wr.TOOLBOX_ITEM,Dt.toLowerCase()))&&(vt=new Dt(vt,this),vt.init(),this.addToolboxItem_(vt),(Dt=vt.getDiv())&&Et.appendChild(Dt),vt.getClickTarget()&&vt.getClickTarget().setAttribute("id",vt.getId()))}addToolboxItem_(vt){if(this.contents_.push(vt),this.contentMap_[vt.getId()]=vt,vt.isCollapsible()){vt=vt.getChildToolboxItems();for(let Et=0;Et<vt.length;Et++)this.addToolboxItem_(vt[Et])}}getToolboxItems(){return this.contents_}addStyle(vt){vt&&this.HtmlDiv&&ir(this.HtmlDiv,vt)}removeStyle(vt){vt&&this.HtmlDiv&&Jn(this.HtmlDiv,vt)}getClientRect(){if(!this.HtmlDiv||!this.isVisible_)return null;var vt=this.HtmlDiv.getBoundingClientRect();const Et=vt.top,Dt=Et+vt.height,Ft=vt.left;return vt=Ft+vt.width,this.toolboxPosition===Co.TOP?new xs(-1e7,Dt,-1e7,1e7):this.toolboxPosition===Co.BOTTOM?new xs(Et,1e7,-1e7,1e7):this.toolboxPosition===Co.LEFT?new xs(-1e7,1e7,-1e7,vt):new xs(-1e7,1e7,Ft,1e7)}wouldDelete(vt,Et){return vt instanceof Lu?this.updateWouldDelete_(!vt.getParent()&&vt.isDeletable()):this.updateWouldDelete_(vt.isDeletable()),this.wouldDelete_}onDragEnter(vt){this.updateCursorDeleteStyle_(!0)}onDragExit(vt){this.updateCursorDeleteStyle_(!1)}onDrop(vt){this.updateCursorDeleteStyle_(!1)}updateWouldDelete_(vt){vt!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=vt,this.updateCursorDeleteStyle_(!0))}updateCursorDeleteStyle_(vt){const Et=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";vt?this.addStyle(Et):this.removeStyle(Et)}getToolboxItemById(vt){return this.contentMap_[vt]||null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyout(){return this.flyout_}getWorkspace(){return this.workspace_}getSelectedItem(){return this.selectedItem_}getPreviouslySelectedItem(){return this.previouslySelectedItem_}isHorizontal(){return this.horizontalLayout_}position(){const vt=this.workspace_.getMetrics(),Et=this.HtmlDiv;Et&&(this.horizontalLayout_?(Et.style.left="0",Et.style.height="auto",Et.style.width="100%",this.height_=Et.offsetHeight,this.width_=vt.viewWidth,this.toolboxPosition===Co.TOP?Et.style.top="0":Et.style.bottom="0"):(this.toolboxPosition===Co.RIGHT?Et.style.right="0":Et.style.left="0",Et.style.height="100%",this.width_=Et.offsetWidth,this.height_=vt.viewHeight),this.flyout_.position())}handleToolboxItemResize(){const vt=this.workspace_,Et=this.HtmlDiv.getBoundingClientRect();vt.translate(this.toolboxPosition===Co.LEFT?vt.scrollX+Et.width:vt.scrollX,this.toolboxPosition===Co.TOP?vt.scrollY+Et.height:vt.scrollY),Yn(vt)}clearSelection(){this.setSelectedItem(null)}refreshTheme(){for(let vt=0;vt<this.contents_.length;vt++){const Et=this.contents_[vt];Et.refreshTheme&&Et.refreshTheme()}}refreshSelection(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())}setVisible(vt){this.isVisible_!==vt&&(this.HtmlDiv.style.display=vt?"block":"none",this.isVisible_=vt,this.workspace_.recordDragTargets())}autoHide(vt){!vt&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()}setSelectedItem(vt){const Et=this.selectedItem_;!vt&&!Et||vt&&!vt.isSelectable()||(this.shouldDeselectItem_(Et,vt)&&Et!==null&&this.deselectItem_(Et),this.shouldSelectItem_(Et,vt)&&vt!==null&&this.selectItem_(Et,vt),this.updateFlyout_(Et,vt),this.fireSelectEvent_(Et,vt))}shouldDeselectItem_(vt,Et){return vt!==null&&(!vt.isCollapsible()||vt!==Et)}shouldSelectItem_(vt,Et){return Et!==null&&Et!==vt}deselectItem_(vt){this.selectedItem_=null,this.previouslySelectedItem_=vt,vt.setSelected(!1),ts(this.contentsDiv_,ps.ACTIVEDESCENDANT,"")}selectItem_(vt,Et){this.selectedItem_=Et,this.previouslySelectedItem_=vt,Et.setSelected(!0),ts(this.contentsDiv_,ps.ACTIVEDESCENDANT,Et.getId())}selectItemByPosition(vt){-1<vt&&vt<this.contents_.length&&(vt=this.contents_[vt],vt.isSelectable()&&this.setSelectedItem(vt))}updateFlyout_(vt,Et){Et&&(vt!==Et||Et.isCollapsible())&&Et.getContents().length?(this.flyout_.show(Et.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()}fireSelectEvent_(vt,Et){const Dt=vt&&vt.getName();let Ft=Et&&Et.getName();vt===Et&&(Ft=null),vt=new(Vr(Qy))(Dt,Ft,this.workspace_.id),Fr(vt)}selectParent_(){return this.selectedItem_?this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.toggleExpanded(),!0):this.selectedItem_.getParent()&&this.selectedItem_.getParent().isSelectable()?(this.setSelectedItem(this.selectedItem_.getParent()),!0):!1:!1}selectChild_(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;const vt=this.selectedItem_;return vt.isExpanded()?this.selectNext_():vt.toggleExpanded(),!0}selectNext_(){if(!this.selectedItem_)return!1;let vt=this.contents_.indexOf(this.selectedItem_)+1;if(-1<vt&&vt<this.contents_.length){let Et=this.contents_[vt];for(;Et&&!Et.isSelectable();)Et=this.contents_[++vt];if(Et&&Et.isSelectable())return this.setSelectedItem(Et),!0}return!1}selectPrevious_(){if(!this.selectedItem_)return!1;let vt=this.contents_.indexOf(this.selectedItem_)-1;if(-1<vt&&vt<this.contents_.length){let Et=this.contents_[vt];for(;Et&&!Et.isSelectable();)Et=this.contents_[--vt];if(Et&&Et.isSelectable())return this.setSelectedItem(Et),!0}return!1}dispose(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var vt=0;vt<this.contents_.length;vt++)this.contents_[vt].dispose();for(vt=0;vt<this.boundEvents_.length;vt++)cn(this.boundEvents_[vt]);this.boundEvents_=[],this.contents_=[],this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),br(this.HtmlDiv)}};uu(`
.blocklyToolboxDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyToolboxGrab {
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

/* Category tree in Toolbox. */
.blocklyToolboxDiv {
  background-color: #ddd;
  overflow-x: visible;
  overflow-y: auto;
  padding: 4px 0 4px 0;
  position: absolute;
  z-index: 70;  /* so blocks go under toolbox when dragging */
  -webkit-tap-highlight-color: transparent;  /* issue #1345 */
}

.blocklyToolboxContents {
  display: flex;
  flex-wrap: wrap;
  flex-direction: column;
}

.blocklyToolboxContents:focus {
  outline: none;
}
`),xo(Wr.TOOLBOX,Bp,GT);var ax={colour_blocks:{colourPrimary:"#CF63CF",colourSecondary:"#C94FC9",colourTertiary:"#BD42BD"},list_blocks:{colourPrimary:"#9966FF",colourSecondary:"#855CD6",colourTertiary:"#774DCB"},logic_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC"},loop_blocks:{colourPrimary:"#0fBD8C",colourSecondary:"#0DA57A",colourTertiary:"#0B8E69"},math_blocks:{colourPrimary:"#59C059",colourSecondary:"#46B946",colourTertiary:"#389438"},procedure_blocks:{colourPrimary:"#FF6680",colourSecondary:"#FF4D6A",colourTertiary:"#FF3355"},text_blocks:{colourPrimary:"#FFBF00",colourSecondary:"#E6AC00",colourTertiary:"#CC9900"},variable_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}},lx={colour_category:{colour:"#CF63CF"},list_category:{colour:"#9966FF"},logic_category:{colour:"#4C97FF"},loop_category:{colour:"#0fBD8C"},math_category:{colour:"#59C059"},procedure_category:{colour:"#FF6680"},text_category:{colour:"#FFBF00"},variable_category:{colour:"#FF8C1A"},variable_dynamic_category:{colour:"#FF8C1A"}},cx=new p_("zelos",ax,lx),u$={};u$.Classic=Wv,u$.Zelos=cx;var h$=class extends Yu{constructor(vt,Et,Dt){Et=vt?vt.workspace.id:Et,Et===null&&(Et=void 0),super(Et),this.type=vm,this.blockId=vt?vt.id:void 0,this.targetType=Dt}toJson(){const vt=super.toJson();if(!this.targetType)throw Error("The click target type is undefined. Either pass a block to the constructor, or call fromJson");return vt.targetType=this.targetType,vt.blockId=this.blockId,vt}fromJson(vt){ft("Blockly.Events.Click.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(vt),this.targetType=vt.targetType,this.blockId=vt.blockId}static fromJson(vt,Et,Dt){return Et=super.fromJson(vt,Et,Dt??new h$),Et.targetType=vt.targetType,Et.blockId=vt.blockId,Et}},d$;(function(vt){vt.BLOCK="block",vt.WORKSPACE="workspace",vt.ZOOM_CONTROLS="zoom_controls"})(d$||(d$={})),xo(Wr.EVENT,vm,h$);var UT=class{constructor(vt,Et){this.bubble=vt,this.workspace=Et,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.bubble.getRelativeToSurfaceXY(),this.dragSurface_=Et.getBlockDragSurface()}startBubbleDrag(){Ro()||io(!0),this.workspace.setResizesEnabled(!1),this.bubble.setAutoLayout(!1),this.dragSurface_&&(this.bubble.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.bubble.getSvgRoot())),this.bubble.setDragging&&this.bubble.setDragging(!0)}dragBubble(vt,Et){Et=this.pixelsToWorkspaceUnits_(Et),Et=Zr.sum(this.startXY_,Et),this.bubble.moveDuringDrag(this.dragSurface_,Et),Et=this.dragTarget_,this.dragTarget_=this.workspace.getDragTarget(vt),vt=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),vt!==this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==Et&&(Et&&Et.onDragExit(this.bubble),this.dragTarget_&&this.dragTarget_.onDragEnter(this.bubble)),this.dragTarget_&&this.dragTarget_.onDragOver(this.bubble)}shouldDelete_(vt){return vt&&this.workspace.getComponentManager().hasCapability(vt.id,Ks.Capability.DELETE_AREA)?vt.wouldDelete(this.bubble,!1):!1}updateCursorDuringBubbleDrag_(){this.bubble.setDeleteStyle(this.wouldDeleteBubble_)}endBubbleDrag(vt,Et){this.dragBubble(vt,Et),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.bubble)?vt=this.startXY_:(vt=this.pixelsToWorkspaceUnits_(Et),vt=Zr.sum(this.startXY_,vt)),this.bubble.moveTo(vt.x,vt.y),this.dragTarget_&&this.dragTarget_.onDrop(this.bubble),this.wouldDeleteBubble_?(this.fireMoveEvent_(),this.bubble.dispose()):(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace.getBubbleCanvas()),this.bubble.setDragging&&this.bubble.setDragging(!1),this.fireMoveEvent_()),this.workspace.setResizesEnabled(!0),io(!1)}fireMoveEvent_(){if(this.bubble instanceof Al){const vt=new(Vr(Gp))(this.bubble);vt.setOldCoordinate(this.startXY_),vt.recordNew(),Fr(vt)}}pixelsToWorkspaceUnits_(vt){return vt=new Zr(vt.x/this.workspace.scale,vt.y/this.workspace.scale),this.workspace.isMutator&&vt.scale(1/this.workspace.options.parentWorkspace.scale),vt}},VT=class{constructor(vt){this.workspace=vt,this.horizontalScrollEnabled_=this.workspace.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace.isMovableVertically(),this.startScrollXY_=new Zr(vt.scrollX,vt.scrollY)}dispose(){this.workspace=null}startDrag(){Pn()&&Pn().unselect(),this.workspace.setupDragSurface()}endDrag(vt){this.drag(vt),this.workspace.resetDragSurface()}drag(vt){if(vt=Zr.sum(this.startScrollXY_,vt),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace.scroll(vt.x,vt.y);else if(this.horizontalScrollEnabled_)this.workspace.scroll(vt.x,this.workspace.scrollY);else if(this.verticalScrollEnabled_)this.workspace.scroll(this.workspace.scrollX,vt.y);else throw new TypeError("Invalid state.")}},ux=5,hx=6,gp=class{constructor(vt,Et){this.creatorWorkspace=Et,this.mouseDownXY_=new Zr(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.hasExceededDragRadius_=!1,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.isMultiTouch_=this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.cachedPoints=new Map,this.startDistance_=this.previousScale_=0,this.currentDropdownOwner=this.isPinchZoomEnabled_=this.onStartWrapper_=null,this.mostRecentEvent_=vt,this.currentDragDeltaXY_=new Zr(0,0),this.healStack_=!IT}dispose(){Ct(),M_(),this.creatorWorkspace.clearGesture(),this.onMoveWrapper_&&cn(this.onMoveWrapper_),this.onUpWrapper_&&cn(this.onUpWrapper_),this.blockDragger_&&this.blockDragger_.dispose(),this.workspaceDragger_&&this.workspaceDragger_.dispose(),this.onStartWrapper_&&cn(this.onStartWrapper_)}updateFromEvent_(vt){const Et=new Zr(vt.clientX,vt.clientY);this.updateDragDelta_(Et)&&(this.updateIsDragging_(),Tt()),this.mostRecentEvent_=vt}updateDragDelta_(vt){return this.currentDragDeltaXY_=Zr.difference(vt,this.mouseDownXY_),this.hasExceededDragRadius_?!1:this.hasExceededDragRadius_=Zr.magnitude(this.currentDragDeltaXY_)>(this.flyout_?lt.config$$module$build$src$core$config.flyoutDragRadius:lt.config$$module$build$src$core$config.dragRadius)}updateIsDraggingFromFlyout_(){let vt;if(!this.targetBlock_||(vt=this.flyout_)==null||!vt.isBlockCreatable(this.targetBlock_))return!1;if(!this.flyout_.targetWorkspace)throw Error(`Cannot update dragging from the flyout because the ' +
          'flyout's target workspace is undefined`);return!this.flyout_.isScrollable()||this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)?(this.startWorkspace_=this.flyout_.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),Ro()||io(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),!0):!1}updateIsDraggingBubble_(){return this.startBubble_?(this.startDraggingBubble_(),!0):!1}updateIsDraggingBlock_(){if(!this.targetBlock_)return!1;if(this.flyout_){if(this.updateIsDraggingFromFlyout_())return this.startDraggingBlock_(),!0}else if(this.targetBlock_.isMovable())return this.startDraggingBlock_(),!0;return!1}updateIsDraggingWorkspace_(){if(!this.startWorkspace_)throw Error("Cannot update dragging the workspace because the start workspace is undefined");(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=new VT(this.startWorkspace_),this.workspaceDragger_.startDrag())}updateIsDragging_(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()}startDraggingBlock_(){this.blockDragger_=new(bo(Wr.BLOCK_DRAGGER,this.creatorWorkspace.options,!0))(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_)}startDraggingBubble_(){if(!this.startBubble_)throw Error("Cannot update dragging the bubble because the start bubble is undefined");if(!this.startWorkspace_)throw Error("Cannot update dragging the bubble because the start workspace is undefined");this.bubbleDragger_=new UT(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)}doStart(vt){if(!this.startWorkspace_)throw Error("Cannot start the touch gesture becauase the start workspace is undefined");this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,hn(vt)?this.cancel():(this.hasStarted_=!0,Ou(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.currentDropdownOwner=Kn(),this.startWorkspace_.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=vt,YO(),this.targetBlock_&&this.targetBlock_.select(),pn(vt)?this.handleRightClick(vt):(vt.type.toLowerCase()==="pointerdown"&&vt.pointerType!=="mouse"&&St(vt,this),this.mouseDownXY_=new Zr(vt.clientX,vt.clientY),this.healStack_=vt.altKey||vt.ctrlKey||vt.metaKey,this.bindMouseEvents(vt),this.isEnding_||this.handleTouchStart(vt)))}bindMouseEvents(vt){this.onStartWrapper_=Zt(document,"pointerdown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=Zt(document,"pointermove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=Zt(document,"pointerup",null,this.handleUp.bind(this),!0),vt.preventDefault(),vt.stopPropagation()}handleStart(vt){this.isDragging()||(this.handleTouchStart(vt),this.isMultiTouch()&&Tt())}handleMove(vt){this.isDragging()&&At(vt)||!this.isMultiTouch()?(this.updateFromEvent_(vt),this.workspaceDragger_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.blockDragger_?this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.bubbleDragger_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),vt.preventDefault(),vt.stopPropagation()):this.isMultiTouch()&&(this.handleTouchMove(vt),Tt())}handleUp(vt){if(this.isDragging()||this.handleTouchEnd(vt),!this.isMultiTouch()||this.isDragging()){if(!At(vt))return;if(this.updateFromEvent_(vt),Tt(),this.isEnding_){console.log("Trying to end a gesture recursively.");return}this.isEnding_=!0,this.bubbleDragger_?this.bubbleDragger_.endBubbleDrag(vt,this.currentDragDeltaXY_):this.blockDragger_?this.blockDragger_.endDrag(vt,this.currentDragDeltaXY_):this.workspaceDragger_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(vt)}vt.preventDefault(),vt.stopPropagation(),this.dispose()}handleTouchStart(vt){var Et=Rt(vt);this.cachedPoints.set(Et,this.getTouchPoint(vt));var Dt=Array.from(this.cachedPoints.keys());Dt.length===2&&(Et=this.cachedPoints.get(Dt[0]),Dt=this.cachedPoints.get(Dt[1]),this.startDistance_=Zr.distance(Et,Dt),this.isMultiTouch_=!0,vt.preventDefault())}handleTouchMove(vt){const Et=Rt(vt);this.cachedPoints.set(Et,this.getTouchPoint(vt)),this.isPinchZoomEnabled_&&this.cachedPoints.size===2?this.handlePinch_(vt):this.handleMove(vt)}handlePinch_(vt){var Et=Array.from(this.cachedPoints.keys()),Dt=this.cachedPoints.get(Et[0]);if(Et=this.cachedPoints.get(Et[1]),Dt=Zr.distance(Dt,Et)/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){if(Et=Dt-this.previousScale_,Et=0<Et?Et*ux:Et*hx,!this.startWorkspace_)throw Error("Cannot handle a pinch because the start workspace is undefined");const Ft=this.startWorkspace_,Kt=dn(vt,Ft.getParentSvg(),Ft.getInverseScreenCTM());Ft.zoom(Kt.x,Kt.y,Et)}this.previousScale_=Dt,vt.preventDefault()}handleTouchEnd(vt){vt=Rt(vt),this.cachedPoints.has(vt)&&this.cachedPoints.delete(vt),2>this.cachedPoints.size&&(this.cachedPoints.clear(),this.previousScale_=0)}getTouchPoint(vt){return this.startWorkspace_?new Zr(vt.pageX,vt.pageY):null}isMultiTouch(){return this.isMultiTouch_}cancel(){this.isEnding_||(Tt(),this.bubbleDragger_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.blockDragger_?this.blockDragger_.endDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.workspaceDragger_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())}handleRightClick(vt){this.targetBlock_?(this.bringBlockToFront_(),this.targetBlock_.workspace.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu(vt)):this.startBubble_?this.startBubble_.showContextMenu(vt):this.startWorkspace_&&!this.flyout_&&(this.startWorkspace_.hideChaff(),this.startWorkspace_.showContextMenu(vt)),vt.preventDefault(),vt.stopPropagation(),this.dispose()}handleWsStart(vt,Et){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(Et),this.mostRecentEvent_=vt,this.doStart(vt)}fireWorkspaceClick_(vt){Fr(new(Vr(vm))(null,vt.id,"workspace"))}handleFlyoutStart(vt,Et){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(Et),this.handleWsStart(vt,Et.getWorkspace())}handleBlockStart(vt,Et){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(Et),this.mostRecentEvent_=vt}handleBubbleStart(vt,Et){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(Et),this.mostRecentEvent_=vt}doBubbleClick_(){this.startBubble_ instanceof Al&&(this.startBubble_.setFocus(),this.startBubble_.select())}doFieldClick_(){if(!this.startField_)throw Error("Cannot do a field click because the start field is undefined");this.currentDropdownOwner!==this.startField_&&this.startField_.showEditor(this.mostRecentEvent_),this.bringBlockToFront_()}doBlockClick_(){if(this.flyout_&&this.flyout_.autoClose){if(!this.targetBlock_)throw Error("Cannot do a block click because the target block is undefined");this.targetBlock_.isEnabled()&&(Ro()||io(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump())}else{if(!this.startWorkspace_)throw Error("Cannot do a block click because the start workspace is undefined");const vt=new(Vr(vm))(this.startBlock_,this.startWorkspace_.id,"block");Fr(vt)}this.bringBlockToFront_(),io(!1)}doWorkspaceClick_(vt){vt=this.creatorWorkspace,Pn()&&Pn().unselect(),this.fireWorkspaceClick_(this.startWorkspace_||vt)}bringBlockToFront_(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()}setStartField(vt){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=vt)}setStartBubble(vt){this.startBubble_||(this.startBubble_=vt)}setStartBlock(vt){this.startBlock_||this.startBubble_||(this.startBlock_=vt,vt.isInFlyout&&vt!==vt.getRootBlock()?this.setTargetBlock_(vt.getRootBlock()):this.setTargetBlock_(vt))}setTargetBlock_(vt){vt.isShadow()?this.setTargetBlock_(vt.getParent()):this.targetBlock_=vt}setStartWorkspace_(vt){this.startWorkspace_||(this.startWorkspace_=vt)}setStartFlyout_(vt){this.flyout_||(this.flyout_=vt)}isBubbleClick_(){return!!this.startBubble_&&!this.hasExceededDragRadius_}isBlockClick_(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()}isFieldClick_(){return(this.startField_?this.startField_.isClickable():!1)&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)}isWorkspaceClick_(){return!this.startBlock_&&!this.startBubble_&&!this.startField_&&!this.hasExceededDragRadius_}isDragging(){return!!this.workspaceDragger_||!!this.blockDragger_||!!this.bubbleDragger_}hasStarted(){return this.hasStarted_}getInsertionMarkers(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]}getCurrentDragger(){let vt,Et;return(Et=(vt=this.blockDragger_)!=null?vt:this.workspaceDragger_)!=null?Et:this.bubbleDragger_}static inProgress(){const vt=Tn();for(let Et=0,Dt;Dt=vt[Et];Et++)if(Dt.currentGesture_)return!0;return!1}},es=class{constructor(){this.shortcuts=new Map,this.keyMap=new Map,this.reset()}reset(){this.shortcuts.clear(),this.keyMap.clear()}register(vt,Et){if(this.shortcuts.get(vt.name)&&!Et)throw Error(`Shortcut named "${vt.name}" already exists.`);if(this.shortcuts.set(vt.name,vt),(Et=vt.keyCodes)&&0<Et.length)for(let Dt=0;Dt<Et.length;Dt++)this.addKeyMapping(Et[Dt],vt.name,!!vt.allowCollision)}unregister(vt){return this.shortcuts.get(vt)?(this.removeAllKeyMappings(vt),this.shortcuts.delete(vt),!0):(console.warn(`Keyboard shortcut named "${vt}" not found.`),!1)}addKeyMapping(vt,Et,Dt){vt=String(vt);const Ft=this.keyMap.get(vt);if(Ft&&!Dt)throw Error(`Shortcut named "${Et}" collides with shortcuts "${Ft}"`);Ft&&Dt?Ft.unshift(Et):this.keyMap.set(vt,[Et])}removeKeyMapping(vt,Et,Dt){const Ft=this.keyMap.get(vt);if(!Ft)return Dt||console.warn(`No keyboard shortcut named "${Et}" registered with key code "${vt}"`),!1;const Kt=Ft.indexOf(Et);return-1<Kt?(Ft.splice(Kt,1),Ft.length===0&&this.keyMap.delete(vt),!0):(Dt||console.warn(`No keyboard shortcut named "${Et}" registered with key code "${vt}"`),!1)}removeAllKeyMappings(vt){for(const Et of this.keyMap.keys())this.removeKeyMapping(Et,vt,!0)}setKeyMap(vt){this.keyMap.clear();for(const Et in vt)this.keyMap.set(Et,vt[Et])}getKeyMap(){const vt=Object.create(null);for(const[Et,Dt]of this.keyMap)vt[Et]=Dt;return vt}getRegistry(){const vt=Object.create(null);for(const[Et,Dt]of this.shortcuts)vt[Et]=Dt;return tp(Object.create(null),vt)}onKeyDown(vt,Et){var Dt=this.serializeKeyEvent_(Et);if(Dt=this.getShortcutNamesByKeyCode(Dt),!Dt)return!1;for(let Ft=0,Kt;Kt=Dt[Ft];Ft++){const yn=this.shortcuts.get(Kt);let Mn,qn;if((Mn=yn)==null||!Mn.preconditionFn||(qn=yn)!=null&&qn.preconditionFn(vt)){let Cr,qr;if((Cr=yn)!=null&&Cr.callback&&((qr=yn)!=null&&qr.callback(vt,Et,yn)))return!0}}return!1}getShortcutNamesByKeyCode(vt){return this.keyMap.get(vt)||[]}getKeyCodesByShortcutName(vt){const Et=[];for(const[Dt,Ft]of this.keyMap)-1<Ft.indexOf(vt)&&Et.push(Dt);return Et}serializeKeyEvent_(vt){let Et="";for(const Dt in es.modifierKeys)vt.getModifierState(Dt)&&(Et!==""&&(Et+="+"),Et+=Dt);return Et!==""&&vt.keyCode?Et=Et+"+"+vt.keyCode:vt.keyCode&&(Et=vt.keyCode.toString()),Et}checkModifiers_(vt){for(let Et=0,Dt;Dt=vt[Et];Et++)if(!(Dt in es.modifierKeys))throw Error(Dt+" is not a valid modifier key.")}createSerializedKey(vt,Et){let Dt="";if(Et){this.checkModifiers_(Et);for(const Ft in es.modifierKeys)-1<Et.indexOf(es.modifierKeys[Ft])&&(Dt!==""&&(Dt+="+"),Dt+=Ft)}return Dt!==""&&vt?Dt=Dt+"+"+vt:vt&&(Dt=vt.toString()),Dt}};es.registry=new es,function(vt){vt=vt.modifierKeys||(vt.modifierKeys={}),vt[vt.Shift=16]="Shift",vt[vt.Control=17]="Control",vt[vt.Alt=18]="Alt",vt[vt.Meta=91]="Meta"}(es||(es={}));var _p;(function(vt){vt.ESCAPE="escape",vt.DELETE="delete",vt.COPY="copy",vt.CUT="cut",vt.PASTE="paste",vt.UNDO="undo",vt.REDO="redo"})(_p||(_p={})),_g();var Op={};Op.names=_p,Op.registerCopy=by,Op.registerCut=Sy,Op.registerDefaultShortcuts=_g,Op.registerDelete=vy,Op.registerEscape=dv,Op.registerPaste=$y,Op.registerRedo=Jm,Op.registerUndo=Km;var f$=class extends Yu{constructor(vt,Et){super(Et),this.type=Hy,this.themeName=vt}toJson(){const vt=super.toJson();if(!this.themeName)throw Error("The theme name is undefined. Either pass a theme name to the constructor, or call fromJson");return vt.themeName=this.themeName,vt}fromJson(vt){ft("Blockly.Events.ThemeChange.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(vt),this.themeName=vt.themeName}static fromJson(vt,Et,Dt){return Et=super.fromJson(vt,Et,Dt??new f$),Et.themeName=vt.themeName,Et}};xo(Wr.EVENT,Hy,f$);var p$=class extends Yu{constructor(vt,Et,Dt,Ft,Kt){super(Ft),this.type=c_,this.viewTop=vt,this.viewLeft=Et,this.scale=Dt,this.oldScale=Kt}toJson(){const vt=super.toJson();if(this.viewTop===void 0)throw Error("The view top is undefined. Either pass a value to the constructor, or call fromJson");if(this.viewLeft===void 0)throw Error("The view left is undefined. Either pass a value to the constructor, or call fromJson");if(this.scale===void 0)throw Error("The scale is undefined. Either pass a value to the constructor, or call fromJson");if(this.oldScale===void 0)throw Error("The old scale is undefined. Either pass a value to the constructor, or call fromJson");return vt.viewTop=this.viewTop,vt.viewLeft=this.viewLeft,vt.scale=this.scale,vt.oldScale=this.oldScale,vt}fromJson(vt){ft("Blockly.Events.Viewport.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(vt),this.viewTop=vt.viewTop,this.viewLeft=vt.viewLeft,this.scale=vt.scale,this.oldScale=vt.oldScale}static fromJson(vt,Et,Dt){return Et=super.fromJson(vt,Et,Dt??new p$),Et.viewTop=vt.viewTop,Et.viewLeft=vt.viewLeft,Et.scale=vt.scale,Et.oldScale=vt.oldScale,Et}};xo(Wr.EVENT,c_,p$);var AO=class{constructor(vt){this.connectionChecker=vt,this.connections_=[]}addConnection(vt,Et){Et=this.calculateIndexForYPos_(Et),this.connections_.splice(Et,0,vt)}findIndexOfConnection_(vt,Et){if(!this.connections_.length)return-1;const Dt=this.calculateIndexForYPos_(Et);if(Dt>=this.connections_.length)return-1;Et=vt.y;let Ft=Dt;for(;0<=Ft&&this.connections_[Ft].y===Et;){if(this.connections_[Ft]===vt)return Ft;Ft--}for(Ft=Dt;Ft<this.connections_.length&&this.connections_[Ft].y===Et;){if(this.connections_[Ft]===vt)return Ft;Ft++}return-1}calculateIndexForYPos_(vt){if(!this.connections_.length)return 0;let Et=0,Dt=this.connections_.length;for(;Et<Dt;){const Ft=Math.floor((Et+Dt)/2);if(this.connections_[Ft].y<vt)Et=Ft+1;else if(this.connections_[Ft].y>vt)Dt=Ft;else{Et=Ft;break}}return Et}removeConnection(vt,Et){if(vt=this.findIndexOfConnection_(vt,Et),vt===-1)throw Error("Unable to find connection in connectionDB.");this.connections_.splice(vt,1)}getNeighbours(vt,Et){function Dt(qr){const jo=Kt-Ft[qr].x,gs=yn-Ft[qr].y;return Math.sqrt(jo*jo+gs*gs)<=Et&&Cr.push(Ft[qr]),gs<Et}const Ft=this.connections_,Kt=vt.x,yn=vt.y;vt=0;let Mn=Ft.length-2,qn=Mn;for(;vt<qn;)Ft[qn].y<yn?vt=qn:Mn=qn,qn=Math.floor((vt+Mn)/2);const Cr=[];if(Mn=vt=qn,Ft.length){for(;0<=vt&&Dt(vt);)vt--;do Mn++;while(Mn<Ft.length&&Dt(Mn))}return Cr}isInYRange_(vt,Et,Dt){return Math.abs(this.connections_[vt].y-Et)<=Dt}searchForClosest(vt,Et,Dt){if(!this.connections_.length)return{connection:null,radius:Et};const Ft=vt.y,Kt=vt.x;vt.x=Kt+Dt.x,vt.y=Ft+Dt.y;var yn=this.calculateIndexForYPos_(vt.y);Dt=null;let Mn=Et,qn,Cr=yn-1;for(;0<=Cr&&this.isInYRange_(Cr,vt.y,Et);)qn=this.connections_[Cr],this.connectionChecker.canConnect(vt,qn,!0,Mn)&&(Dt=qn,Mn=qn.distanceFrom(vt)),Cr--;for(;yn<this.connections_.length&&this.isInYRange_(yn,vt.y,Et);)qn=this.connections_[yn],this.connectionChecker.canConnect(vt,qn,!0,Mn)&&(Dt=qn,Mn=qn.distanceFrom(vt)),yn++;return vt.x=Kt,vt.y=Ft,{connection:Dt,radius:Mn}}static init(vt){const Et=[];return Et[no.INPUT_VALUE]=new AO(vt),Et[no.OUTPUT_VALUE]=new AO(vt),Et[no.NEXT_STATEMENT]=new AO(vt),Et[no.PREVIOUS_STATEMENT]=new AO(vt),Et}},m$=class{constructor(vt,Et){this.pattern=vt;let Dt;this.spacing=(Dt=Et.spacing)!=null?Dt:0;let Ft;this.length=(Ft=Et.length)!=null?Ft:1,this.line2=(this.line1=vt.firstChild)&&this.line1.nextSibling;let Kt;this.snapToGrid=(Kt=Et.snap)!=null?Kt:!1}shouldSnap(){return this.snapToGrid}getSpacing(){return this.spacing}getPatternId(){return this.pattern.id}update(vt){var Et=this.spacing*vt||100;this.pattern.setAttribute("width",Et.toString()),this.pattern.setAttribute("height",Et.toString()),Et=Math.floor(this.spacing/2)+.5;let Dt=Et-this.length/2,Ft=Et+this.length/2;Et*=vt,Dt*=vt,Ft*=vt,this.setLineAttributes(this.line1,vt,Dt,Ft,Et,Et),this.setLineAttributes(this.line2,vt,Et,Et,Dt,Ft)}setLineAttributes(vt,Et,Dt,Ft,Kt,yn){vt&&(vt.setAttribute("stroke-width",Et.toString()),vt.setAttribute("x1",Dt.toString()),vt.setAttribute("y1",Kt.toString()),vt.setAttribute("x2",Ft.toString()),vt.setAttribute("y2",yn.toString()))}moveTo(vt,Et){this.pattern.setAttribute("x",vt.toString()),this.pattern.setAttribute("y",Et.toString())}static createDom(vt,Et,Dt){vt=In(ar.PATTERN,{id:"blocklyGridPattern"+vt,patternUnits:"userSpaceOnUse"},Dt);let Ft,Kt;if(0<((Ft=Et.length)!=null?Ft:1)&&0<((Kt=Et.spacing)!=null?Kt:0)){In(ar.LINE,{stroke:Et.colour},vt);let yn;(yn=Et.length)!=null&&yn&&In(ar.LINE,{stroke:Et.colour},vt)}else In(ar.LINE,{},vt);return vt}},Du=class{constructor(vt,Et){this.db=new Map,this.dbReverse=new Set,this.variableMap_=null,this.variablePrefix_=Et||"",this.reservedWords=new Set(vt?vt.split(","):[])}reset(){this.db.clear(),this.dbReverse.clear(),this.variableMap_=null}setVariableMap(vt){this.variableMap_=vt}getNameForUserVariable_(vt){return this.variableMap_?(vt=this.variableMap_.getVariableById(vt))?vt.name:null:(console.warn(`Deprecated call to Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:
Blockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());`),null)}populateVariables(vt){vt=DO(vt);for(let Et=0;Et<vt.length;Et++)this.getName(vt[Et].getId(),lt.NameType$$module$build$src$core$names.VARIABLE)}populateProcedures(vt){throw Error("The implementation of populateProcedures should be monkey-patched in by blockly.ts")}getName(vt,Et){let Dt=vt;Et===lt.NameType$$module$build$src$core$names.VARIABLE&&(vt=this.getNameForUserVariable_(vt))&&(Dt=vt),vt=Dt.toLowerCase();const Ft=Et===lt.NameType$$module$build$src$core$names.VARIABLE||Et===lt.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix_:"";this.db.has(Et)||this.db.set(Et,new Map);const Kt=this.db.get(Et);return Kt.has(vt)?Ft+Kt.get(vt):(Et=this.getDistinctName(Dt,Et),Kt.set(vt,Et.substr(Ft.length)),Et)}getUserNames(vt){let Et;return(vt=(Et=this.db.get(vt))==null?void 0:Et.keys())?Array.from(vt):[]}getDistinctName(vt,Et){vt=this.safeName_(vt);let Dt="";for(;this.dbReverse.has(vt+Dt)||this.reservedWords.has(vt+Dt);)Dt=Dt?Dt+1:2;return vt+=Dt,this.dbReverse.add(vt),(Et===lt.NameType$$module$build$src$core$names.VARIABLE||Et===lt.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix_:"")+vt}safeName_(vt){return vt?(vt=encodeURI(vt.replace(/ /g,"_")).replace(/[^\w]/g,"_"),"0123456789".indexOf(vt[0])!==-1&&(vt="my_"+vt)):vt=$o.UNNAMED_KEY||"unnamed",vt}static equals(vt,Et){return vt.toLowerCase()===Et.toLowerCase()}};(function(vt){vt=vt.NameType||(vt.NameType={}),vt.DEVELOPER_VARIABLE="DEVELOPER_VARIABLE",vt.VARIABLE="VARIABLE",vt.PROCEDURE="PROCEDURE"})(Du||(Du={})),lt.NameType$$module$build$src$core$names=Du.NameType,Du.DEVELOPER_VARIABLE_TYPE=lt.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE,lt.module$build$src$core$names={},lt.module$build$src$core$names.NameType=lt.NameType$$module$build$src$core$names,lt.module$build$src$core$names.Names=Du;var WT=class extends Map{constructor(vt){super(),this.workspace=vt}set(vt,Et){return this.get(vt)===Et?this:(super.set(vt,Et),Fr(new(Vr(xv))(this.workspace,Et)),Wu(Et)&&Et.startPublishing(),this)}delete(vt){const Et=this.get(vt);return vt=super.delete(vt),vt&&(tu(this.workspace),Fr(new(Vr(jy))(this.workspace,Et)),Wu(Et)&&Et.stopPublishing(),vt)}clear(){if(this.size){for(const vt of this.keys()){const Et=this.get(vt);super.delete(vt),Fr(new(Vr(jy))(this.workspace,Et))}tu(this.workspace)}}add(vt){return this.set(vt.getId(),vt)}getProcedures(){return[...this.values()]}},g0=class{constructor(vt,Et,Dt){this.workspace=vt,this.parameters=[],this.returnTypes=null,this.enabled=!0,this.shouldFireEvents=!1,this.id=Dt??Eo(),this.name=Et}setName(vt){if(vt===this.name)return this;const Et=this.name;return this.name=vt,tu(this.workspace),this.shouldFireEvents&&Fr(new(Vr(wv))(this.workspace,this,Et)),this}insertParameter(vt,Et){return this.parameters[Et]&&this.parameters[Et].getId()===vt.getId()?this:(this.parameters.splice(Et,0,vt),vt.setProcedureModel(this),Wu(vt)&&(this.shouldFireEvents?vt.startPublishing():vt.stopPublishing()),tu(this.workspace),this.shouldFireEvents&&Fr(new(Vr(Rv))(this.workspace,this,vt,Et)),this)}deleteParameter(vt){if(!this.parameters[vt])return this;const Et=this.parameters[vt];return this.parameters.splice(vt,1),tu(this.workspace),Wu(Et)&&Et.stopPublishing(),this.shouldFireEvents&&Fr(new(Vr(Iv))(this.workspace,this,Et,vt)),this}setReturnTypes(vt){if(vt&&vt.length)throw Error("The built-in ProcedureModel does not support typing. You need to implement your own custom ProcedureModel.");if(!!vt==!!this.returnTypes)return this;const Et=this.returnTypes;return this.returnTypes=vt,tu(this.workspace),this.shouldFireEvents&&Fr(new(Vr(Av))(this.workspace,this,Et)),this}setEnabled(vt){return vt===this.enabled?this:(this.enabled=vt,tu(this.workspace),this.shouldFireEvents&&Fr(new(Vr(Cv))(this.workspace,this)),this)}getId(){return this.id}getName(){return this.name}getParameter(vt){return this.parameters[vt]}getParameters(){return[...this.parameters]}getReturnTypes(){return this.returnTypes}getEnabled(){return this.enabled}startPublishing(){this.shouldFireEvents=!0;for(const vt of this.parameters)Wu(vt)&&vt.startPublishing()}stopPublishing(){this.shouldFireEvents=!1;for(const vt of this.parameters)Wu(vt)&&vt.stopPublishing()}},RO=class{constructor(vt,Et,Dt){this.workspace=vt,this.shouldFireEvents=!1,this.procedureModel=null,this.id=Dt??Eo();let Ft;this.variable=(Ft=this.workspace.getVariable(Et))!=null?Ft:vt.createVariable(Et)}setName(vt){if(vt===this.variable.name)return this;const Et=this.variable.name;let Dt;return this.variable=(Dt=this.workspace.getVariable(vt))!=null?Dt:this.workspace.createVariable(vt),tu(this.workspace),this.shouldFireEvents&&Fr(new(Vr(kv))(this.workspace,this.procedureModel,this,Et)),this}setTypes(vt){throw Error("The built-in ParameterModel does not support typing. You need to implement your own custom ParameterModel.")}getName(){return this.variable.name}getTypes(){return[]}getId(){return this.id}getVariableModel(){return this.variable}startPublishing(){this.shouldFireEvents=!0}stopPublishing(){this.shouldFireEvents=!1}setProcedureModel(vt){return this.procedureModel=vt,this}},Yv,g$;Yv="PROCEDURE",g$="x",lt.module$build$src$core$procedures={},lt.module$build$src$core$procedures.CATEGORY_NAME=Yv,lt.module$build$src$core$procedures.DEFAULT_ARG=g$,lt.module$build$src$core$procedures.ObservableParameterModel=RO,lt.module$build$src$core$procedures.ObservableProcedureMap=WT,lt.module$build$src$core$procedures.ObservableProcedureModel=g0,lt.module$build$src$core$procedures.allProcedures=e_,lt.module$build$src$core$procedures.findLegalName=K_,lt.module$build$src$core$procedures.flyoutCategory=hm,lt.module$build$src$core$procedures.getCallers=Ts,lt.module$build$src$core$procedures.getDefinition=Vs,lt.module$build$src$core$procedures.isNameUsed=J_,lt.module$build$src$core$procedures.mutateCallers=Cs,lt.module$build$src$core$procedures.mutatorOpenListener=vs,lt.module$build$src$core$procedures.rename=hS;var dx=class{constructor(){this.NONE=0,this.FIELD=1,this.HAT=2,this.ICON=4,this.SPACER=8,this.BETWEEN_ROW_SPACER=16,this.IN_ROW_SPACER=32,this.EXTERNAL_VALUE_INPUT=64,this.INPUT=128,this.INLINE_INPUT=256,this.STATEMENT_INPUT=512,this.CONNECTION=1024,this.PREVIOUS_CONNECTION=2048,this.NEXT_CONNECTION=4096,this.OUTPUT_CONNECTION=8192,this.CORNER=16384,this.LEFT_SQUARE_CORNER=32768,this.LEFT_ROUND_CORNER=65536,this.RIGHT_SQUARE_CORNER=131072,this.RIGHT_ROUND_CORNER=262144,this.JAGGED_EDGE=524288,this.ROW=1048576,this.TOP_ROW=2097152,this.BOTTOM_ROW=4194304,this.INPUT_ROW=8388608,this.LEFT_CORNER=this.LEFT_SQUARE_CORNER|this.LEFT_ROUND_CORNER,this.RIGHT_CORNER=this.RIGHT_SQUARE_CORNER|this.RIGHT_ROUND_CORNER,this.nextTypeValue_=16777216}getType(vt){return Object.prototype.hasOwnProperty.call(this,vt)||(this[vt]=this.nextTypeValue_,this.nextTypeValue_<<=1),this[vt]}isField(vt){return vt.type&this.FIELD}isHat(vt){return vt.type&this.HAT}isIcon(vt){return vt.type&this.ICON}isSpacer(vt){return vt.type&this.SPACER}isInRowSpacer(vt){return vt.type&this.IN_ROW_SPACER}isInput(vt){return vt.type&this.INPUT}isExternalInput(vt){return vt.type&this.EXTERNAL_VALUE_INPUT}isInlineInput(vt){return vt.type&this.INLINE_INPUT}isStatementInput(vt){return vt.type&this.STATEMENT_INPUT}isPreviousConnection(vt){return vt.type&this.PREVIOUS_CONNECTION}isNextConnection(vt){return vt.type&this.NEXT_CONNECTION}isPreviousOrNextConnection(vt){return vt.type&(this.PREVIOUS_CONNECTION|this.NEXT_CONNECTION)}isLeftRoundedCorner(vt){return vt.type&this.LEFT_ROUND_CORNER}isRightRoundedCorner(vt){return vt.type&this.RIGHT_ROUND_CORNER}isLeftSquareCorner(vt){return vt.type&this.LEFT_SQUARE_CORNER}isRightSquareCorner(vt){return vt.type&this.RIGHT_SQUARE_CORNER}isCorner(vt){return vt.type&this.CORNER}isJaggedEdge(vt){return vt.type&this.JAGGED_EDGE}isRow(vt){return vt.type&this.ROW}isBetweenRowSpacer(vt){return vt.type&this.BETWEEN_ROW_SPACER}isTopRow(vt){return vt.type&this.TOP_ROW}isBottomRow(vt){return vt.type&this.BOTTOM_ROW}isTopOrBottomRow(vt){return vt.type&(this.TOP_ROW|this.BOTTOM_ROW)}isInputRow(vt){return vt.type&this.INPUT_ROW}},tr=new dx,yp=class{constructor(vt){this.centerline=this.xPos=this.height=this.width=0,this.constants_=vt,this.type=tr.NONE,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}},_0=class{constructor(vt){this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasStatement=this.hasExternalInput=!1,this.statementEdge=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=!1,this.align=null,this.constants_=vt,this.type=tr.ROW,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}getLastInput(){for(let vt=this.elements.length-1;0<=vt;vt--){const Et=this.elements[vt];if(tr.isInput(Et))return Et}return null}measure(){throw Error("Unexpected attempt to measure a base Row.")}startsWithElemSpacer(){return!0}endsWithElemSpacer(){return!0}getFirstSpacer(){for(let vt=0;vt<this.elements.length;vt++){const Et=this.elements[vt];if(tr.isSpacer(Et))return Et}return null}getLastSpacer(){for(let vt=this.elements.length-1;0<=vt;vt--){const Et=this.elements[vt];if(tr.isSpacer(Et))return Et}return null}},_$=class extends _0{constructor(vt){super(vt),this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0,this.type|=tr.BOTTOM_ROW}hasLeftSquareCorner(vt){return!!vt.outputConnection||!!vt.getNextBlock()}hasRightSquareCorner(vt){return!0}measure(){let vt=0,Et=0,Dt=0;for(let Ft=0;Ft<this.elements.length;Ft++){const Kt=this.elements[Ft];Et+=Kt.width,tr.isSpacer(Kt)||(tr.isNextConnection(Kt)?Dt=Math.max(Dt,Kt.height):vt=Math.max(vt,Kt.height))}this.width=Math.max(this.minWidth,Et),this.height=Math.max(this.minHeight,vt)+Dt,this.descenderHeight=Dt,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},__=class extends yp{constructor(vt,Et){super(vt),this.connectionModel=Et,this.shape=this.constants_.shapeFor(Et),this.isDynamicShape="isDynamic"in this.shape&&this.shape.isDynamic,this.type|=tr.CONNECTION}},Hp=class extends __{constructor(vt,Et){super(vt,Et.connection),this.input=Et,this.connectionOffsetY=this.connectionOffsetX=0,this.type|=tr.INPUT,this.align=Et.align,(this.connectedBlock=Et.connection&&Et.connection.targetBlock()?Et.connection.targetBlock():null)?(vt=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=vt.width,this.connectedBlockHeight=vt.height):this.connectedBlockHeight=this.connectedBlockWidth=0}},Zv=class extends Hp{constructor(vt,Et){super(vt,Et),this.height=0,this.type|=tr.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width}},O_=class extends yp{constructor(vt,Et,Dt){super(vt),this.field=Et,this.parentInput=Dt,this.isEditable=Et.EDITABLE,this.flipRtl=Et.getFlipRtl(),this.type|=tr.FIELD,vt=this.field.getSize(),this.height=vt.height,this.width=vt.width}},O$=class extends yp{constructor(vt){super(vt),this.type|=tr.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height}},QT=class extends yp{constructor(vt,Et){super(vt),this.icon=Et,this.flipRtl=!1,this.isVisible=Et.isVisible(),this.type|=tr.ICON,vt=Et.getCorrectedSize(),this.height=vt.height,this.width=vt.width}},vu=class extends yp{constructor(vt,Et){super(vt),this.type=this.type|tr.SPACER|tr.IN_ROW_SPACER,this.width=Et,this.height=this.constants_.SPACER_DEFAULT_HEIGHT}},y$=class extends Hp{constructor(vt,Et){super(vt,Et),this.type|=tr.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY="connectionOffsetY"in this.shape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX="connectionOffsetX"in this.shape?this.shape.connectionOffsetX(this.connectionWidth):0}},O0=class extends Hp{constructor(vt,Et){super(vt,Et),this.type|=tr.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width}},v$=class extends _0{constructor(vt){super(vt),this.connectedBlockWidths=0,this.type|=tr.INPUT_ROW}measure(){this.width=this.minWidth,this.height=this.minHeight;let vt=0;for(let Et=0;Et<this.elements.length;Et++){const Dt=this.elements[Et];this.width+=Dt.width,tr.isInput(Dt)&&Dt instanceof Hp&&(tr.isStatementInput(Dt)&&Dt instanceof O0?vt+=Dt.connectedBlockWidth:tr.isExternalInput(Dt)&&Dt instanceof Zv&&Dt.connectedBlockWidth!==0&&(vt+=Dt.connectedBlockWidth-Dt.connectionWidth)),tr.isSpacer(Dt)||(this.height=Math.max(this.height,Dt.height))}this.connectedBlockWidths=vt,this.widthWithConnectedBlocks=this.width+vt}endsWithElemSpacer(){return!this.hasExternalInput&&!this.hasStatement}},HT=class extends yp{constructor(vt){super(vt),this.type|=tr.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width}},zT=class extends __{constructor(vt,Et){super(vt,Et),this.type|=tr.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},jT=class extends __{constructor(vt,Et){super(vt,Et),this.connectionOffsetX=0,this.type|=tr.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP}},XT=class extends __{constructor(vt,Et){super(vt,Et),this.type|=tr.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},y0=class extends yp{constructor(vt,Et){super(vt),this.type=(Et&&Et!=="left"?tr.RIGHT_ROUND_CORNER:tr.LEFT_ROUND_CORNER)|tr.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2}},b$=class extends _0{constructor(vt,Et,Dt){super(vt),this.height=Et,this.width=Dt,this.precedesStatement=this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.type=this.type|tr.SPACER|tr.BETWEEN_ROW_SPACER,this.elements=[new vu(this.constants_,Dt)]}measure(){}},v0=class extends yp{constructor(vt,Et){super(vt),this.type=(Et&&Et!=="left"?tr.RIGHT_SQUARE_CORNER:tr.LEFT_SQUARE_CORNER)|tr.CORNER,this.width=this.height=this.constants_.NO_PADDING}},S$=class extends _0{constructor(vt){super(vt),this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null,this.type|=tr.TOP_ROW}hasLeftSquareCorner(vt){const Et=(vt.hat?vt.hat==="cap":this.constants_.ADD_START_HATS)&&!vt.outputConnection&&!vt.previousConnection,Dt=vt.getPreviousBlock();return!!vt.outputConnection||Et||(Dt?Dt.getNextBlock()===vt:!1)}hasRightSquareCorner(vt){return!0}measure(){let vt=0,Et=0,Dt=0;for(let Ft=0;Ft<this.elements.length;Ft++){const Kt=this.elements[Ft];Et+=Kt.width,tr.isSpacer(Kt)||(tr.isHat(Kt)&&Kt instanceof O$?Dt=Math.max(Dt,Kt.ascenderHeight):vt=Math.max(vt,Kt.height))}this.width=Math.max(this.minWidth,Et),this.height=Math.max(this.minHeight,vt)+Dt,this.capline=this.ascenderHeight=Dt,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},b0=class{constructor(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.CORNER_RADIUS=8,this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.defs_=null,this.embossFilterId="",this.embossFilter_=null,this.disabledPatternId="",this.disabledPattern_=null,this.debugFilterId="",this.cssNode_=this.debugFilter_=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2},this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=as(0,0),this.FIELD_TEXT_BASELINE_CENTER=!0,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2)}init(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()}setTheme(vt){this.blockStyles=Object.create(null);const Et=vt.blockStyles;for(const Dt in Et)this.blockStyles[Dt]=this.validatedBlockStyle_(Et[Dt]);this.setDynamicProperties_(vt)}setDynamicProperties_(vt){this.setFontConstants_(vt),this.setComponentConstants_(vt),this.ADD_START_HATS=vt.startHats!==void 0?vt.startHats:this.ADD_START_HATS}setFontConstants_(vt){vt.fontStyle&&vt.fontStyle.family&&(this.FIELD_TEXT_FONTFAMILY=vt.fontStyle.family),vt.fontStyle&&vt.fontStyle.weight&&(this.FIELD_TEXT_FONTWEIGHT=vt.fontStyle.weight),vt.fontStyle&&vt.fontStyle.size&&(this.FIELD_TEXT_FONTSIZE=vt.fontStyle.size),vt=zr("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=vt.height,this.FIELD_TEXT_BASELINE=vt.baseline}setComponentConstants_(vt){this.CURSOR_COLOUR=vt.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=vt.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=vt.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(vt.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY}getBlockStyleForColour(vt){const Et="auto_"+vt;return this.blockStyles[Et]||(this.blockStyles[Et]=this.createBlockStyle_(vt)),{style:this.blockStyles[Et],name:Et}}getBlockStyle(vt){return this.blockStyles[vt||""]||(vt&&vt.indexOf("auto_")===0?this.getBlockStyleForColour(vt.substring(5)).style:this.createBlockStyle_("#000000"))}createBlockStyle_(vt){return this.validatedBlockStyle_({colourPrimary:vt})}validatedBlockStyle_(vt){const Et={};return vt&&Object.assign(Et,vt),vt=mu(Et.colourPrimary||"#000"),Et.colourPrimary=vt.hex,Et.colourSecondary=Et.colourSecondary?mu(Et.colourSecondary).hex:this.generateSecondaryColour_(Et.colourPrimary),Et.colourTertiary=Et.colourTertiary?mu(Et.colourTertiary).hex:this.generateTertiaryColour_(Et.colourPrimary),Et.hat=Et.hat||"",Et}generateSecondaryColour_(vt){return pu("#fff",vt,.6)||vt}generateTertiaryColour_(vt){return pu("#fff",vt,.3)||vt}dispose(){this.embossFilter_&&br(this.embossFilter_),this.disabledPattern_&&br(this.disabledPattern_),this.debugFilter_&&br(this.debugFilter_),this.cssNode_=null}makeJaggedTeeth(){const vt=this.JAGGED_TEETH_HEIGHT,Et=this.JAGGED_TEETH_WIDTH,Dt=am([go(Et,vt/4),go(2*-Et,vt/2),go(Et,vt/4)]);return{height:vt,width:Et,path:Dt}}makeStartHat(){const vt=this.START_HAT_HEIGHT,Et=this.START_HAT_WIDTH,Dt=Gl("c",[go(30,-vt),go(70,-vt),go(Et,0)]);return{height:vt,width:Et,path:Dt}}makePuzzleTab(){function vt(yn){yn=yn?-1:1;const Mn=-yn;var qn=Dt/2;const Cr=qn+2.5,qr=qn+.5,jo=go(-Et,yn*qn);return qn=go(Et,yn*qn),Gl("c",[go(0,yn*Cr),go(-Et,Mn*qr),jo])+Gl("s",[go(Et,2.5*Mn),qn])}const Et=this.TAB_WIDTH,Dt=this.TAB_HEIGHT,Ft=vt(!0),Kt=vt(!1);return{type:this.SHAPES.PUZZLE,width:Et,height:Dt,pathDown:Kt,pathUp:Ft}}makeNotch(){function vt(Mn){return am([go(Mn*Ft,Dt),go(3*Mn,0),go(Mn*Ft,-Dt)])}const Et=this.NOTCH_WIDTH,Dt=this.NOTCH_HEIGHT,Ft=(Et-3)/2,Kt=vt(1),yn=vt(-1);return{type:this.SHAPES.NOTCH,width:Et,height:Dt,pathLeft:Kt,pathRight:yn}}makeInsideCorners(){const vt=this.CORNER_RADIUS,Et=$s("a","0 0,0",vt,go(-vt,vt)),Dt=$s("a","0 0,0",vt,go(vt,vt));return{width:vt,height:vt,pathTop:Et,pathBottom:Dt}}makeOutsideCorners(){const vt=this.CORNER_RADIUS,Et=as(0,vt)+$s("a","0 0,1",vt,go(vt,-vt)),Dt=$s("a","0 0,1",vt,go(vt,vt)),Ft=$s("a","0 0,1",vt,go(-vt,-vt)),Kt=$s("a","0 0,1",vt,go(-vt,vt));return{topLeft:Et,topRight:Dt,bottomRight:Kt,bottomLeft:Ft,rightHeight:vt}}shapeFor(vt){switch(vt.type){case no.INPUT_VALUE:case no.OUTPUT_VALUE:return this.PUZZLE_TAB;case no.PREVIOUS_STATEMENT:case no.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}}createDom(vt,Et,Dt){this.injectCSS_(Et,Dt),this.defs_=In(ar.DEFS,{},vt),vt=In(ar.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},this.defs_),In(ar.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},vt),Et=In(ar.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},vt),In(ar.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},Et),In(ar.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},vt),In(ar.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},vt),this.embossFilterId=vt.id,this.embossFilter_=vt,vt=In(ar.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},this.defs_),In(ar.RECT,{width:10,height:10,fill:"#aaa"},vt),In(ar.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},vt),this.disabledPatternId=vt.id,this.disabledPattern_=vt,this.createDebugFilter()}createDebugFilter(){if(!this.debugFilter_){const vt=In(ar.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},this.defs_),Et=In(ar.FECOMPONENTTRANSFER,{result:"outBlur"},vt);In(ar.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},Et),In(ar.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},vt),In(ar.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},vt),this.debugFilterId=vt.id,this.debugFilter_=vt}}injectCSS_(vt,Et){Et=this.getCSS_(Et),vt="blockly-renderer-style-"+vt,this.cssNode_=document.getElementById(vt);const Dt=Et.join(`
`);this.cssNode_?this.cssNode_.firstChild.textContent=Dt:(Et=document.createElement("style"),Et.id=vt,vt=document.createTextNode(Dt),Et.appendChild(vt),document.head.insertBefore(Et,document.head.firstChild),this.cssNode_=Et)}getCSS_(vt){return[`${vt} .blocklyText, `,`${vt} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${vt} .blocklyText {`,"fill: #fff;","}",`${vt} .blocklyNonEditableText>rect,`,`${vt} .blocklyEditableText>rect {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"fill-opacity: .6;","stroke: none;","}",`${vt} .blocklyNonEditableText>text,`,`${vt} .blocklyEditableText>text {`,"fill: #000;","}",`${vt} .blocklyFlyoutLabelText {`,"fill: #000;","}",`${vt} .blocklyText.blocklyBubbleText {`,"fill: #000;","}",`${vt} .blocklyEditableText:not(.editing):hover>rect {`,"stroke: #fff;","stroke-width: 2;","}",`${vt} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"}",`${vt} .blocklySelected>.blocklyPath {`,"stroke: #fc3;","stroke-width: 3px;","}",`${vt} .blocklyHighlightedConnectionPath {`,"stroke: #fc3;","}",`${vt} .blocklyReplaceable .blocklyPath {`,"fill-opacity: .5;","}",`${vt} .blocklyReplaceable .blocklyPathLight,`,`${vt} .blocklyReplaceable .blocklyPathDark {`,"display: none;","}",`${vt} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},YT=!1,bu=class{constructor(vt){this.constants=vt,this.debugElements_=[],this.svgRoot_=null,this.randomColour_=""}clearElems(){for(let vt=0;vt<this.debugElements_.length;vt++)br(this.debugElements_[vt]);this.debugElements_=[]}drawSpacerRow(vt,Et,Dt){if(bu.config.rowSpacers){var Ft=Math.abs(vt.height),Kt=0>vt.height;Kt&&(Et-=Ft),this.debugElements_.push(In(ar.RECT,{class:"rowSpacerRect blockRenderDebug",x:Dt?-(vt.xPos+vt.width):vt.xPos,y:Et,width:vt.width,height:Ft,stroke:Kt?"black":"blue",fill:"blue","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}}drawSpacerElem(vt,Et,Dt){if(bu.config.elemSpacers){Et=Math.abs(vt.width);var Ft=0>vt.width,Kt=Ft?vt.xPos-Et:vt.xPos;Dt&&(Kt=-(Kt+Et)),this.debugElements_.push(In(ar.RECT,{class:"elemSpacerRect blockRenderDebug",x:Kt,y:vt.centerline-vt.height/2,width:Et,height:vt.height,stroke:"pink",fill:Ft?"black":"pink","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}}drawRenderedElem(vt,Et){if(bu.config.elems){let Dt=vt.xPos;Et&&(Dt=-(Dt+vt.width)),Et=vt.centerline-vt.height/2,this.debugElements_.push(In(ar.RECT,{class:"rowRenderingRect blockRenderDebug",x:Dt,y:Et,width:vt.width,height:vt.height,stroke:"black",fill:"none","stroke-width":"1px"},this.svgRoot_)),tr.isField(vt)&&vt instanceof O_&&vt.field instanceof lt.FieldLabel$$module$build$src$core$field_label&&this.debugElements_.push(In(ar.RECT,{class:"rowRenderingRect blockRenderDebug",x:Dt,y:Et+this.constants.FIELD_TEXT_BASELINE,width:vt.width,height:"0.1px",stroke:"red",fill:"none","stroke-width":"0.5px"},this.svgRoot_))}tr.isInput(vt)&&vt instanceof Hp&&bu.config.connections&&this.drawConnection(vt.connectionModel)}drawConnection(vt){if(bu.config.connections){var Et="",Dt=0,Ft="";vt.type===no.INPUT_VALUE?(Dt=4,Et="magenta",Ft="none"):vt.type===no.OUTPUT_VALUE?(Dt=2,Ft=Et="magenta"):vt.type===no.NEXT_STATEMENT?(Dt=4,Et="goldenrod",Ft="none"):vt.type===no.PREVIOUS_STATEMENT&&(Dt=2,Ft=Et="goldenrod"),this.debugElements_.push(In(ar.CIRCLE,{class:"blockRenderDebug",cx:vt.getOffsetInBlock().x,cy:vt.getOffsetInBlock().y,r:Dt,fill:Ft,stroke:Et},this.svgRoot_))}}drawRenderedRow(vt,Et,Dt){bu.config.rows&&(this.debugElements_.push(In(ar.RECT,{class:"elemRenderingRect blockRenderDebug",x:Dt?-(vt.xPos+vt.width):vt.xPos,y:vt.yPos,width:vt.width,height:vt.height,stroke:"red",fill:"none","stroke-width":"1px"},this.svgRoot_)),tr.isTopOrBottomRow(vt)||bu.config.connectedBlockBounds&&this.debugElements_.push(In(ar.RECT,{class:"connectedBlockWidth blockRenderDebug",x:Dt?-(vt.xPos+vt.widthWithConnectedBlocks):vt.xPos,y:vt.yPos,width:vt.widthWithConnectedBlocks,height:vt.height,stroke:this.randomColour_,fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))}drawRowWithElements(vt,Et,Dt){for(let Ft=0;Ft<vt.elements.length;Ft++){const Kt=vt.elements[Ft];Kt?tr.isSpacer(Kt)?this.drawSpacerElem(Kt,vt.height,Dt):this.drawRenderedElem(Kt,Dt):console.warn("A row has an undefined or null element.",vt,Kt)}this.drawRenderedRow(vt,Et,Dt)}drawBoundingBox(vt){if(bu.config.blockBounds){var Et=vt.RTL?-vt.width:0;this.debugElements_.push(In(ar.RECT,{class:"blockBoundingBox blockRenderDebug",x:Et,y:0,width:vt.width,height:vt.height,stroke:"black",fill:"none","stroke-width":"1px","stroke-dasharray":"5,5"},this.svgRoot_)),bu.config.connectedBlockBounds&&(Et=vt.RTL?-vt.widthWithChildren:0,this.debugElements_.push(In(ar.RECT,{class:"blockRenderDebug",x:Et,y:0,width:vt.widthWithChildren,height:vt.height,stroke:"#DF57BC",fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))}}drawDebug(vt,Et){this.clearElems(),this.svgRoot_=vt.getSvgRoot(),this.randomColour_="#"+Math.floor(16777215*Math.random()).toString(16);let Dt=0;for(let Ft=0;Ft<Et.rows.length;Ft++){const Kt=Et.rows[Ft];tr.isBetweenRowSpacer(Kt)?this.drawSpacerRow(Kt,Dt,Et.RTL):this.drawRowWithElements(Kt,Dt,Et.RTL),Dt+=Kt.height}vt.previousConnection&&this.drawConnection(vt.previousConnection),vt.nextConnection&&this.drawConnection(vt.nextConnection),vt.outputConnection&&this.drawConnection(vt.outputConnection),Et.rightSide&&this.drawRenderedElem(Et.rightSide,Et.RTL),this.drawBoundingBox(Et),this.drawRender(vt.pathObject.svgPath)}drawRender(vt){bu.config.render&&(vt.setAttribute("filter","url(#"+this.constants.debugFilterId+")"),setTimeout(function(){vt.setAttribute("filter","")},100))}};bu.config={rowSpacers:!0,elemSpacers:!0,rows:!0,elems:!0,connections:!0,blockBounds:!0,connectedBlockBounds:!0,render:!0};var S0=class{constructor(vt,Et){this.inlinePath_=this.outlinePath_="",this.block_=vt,this.info_=Et,this.topLeft_=vt.getRelativeToSurfaceXY(),this.constants_=Et.getRenderer().getConstants()}draw(){if(this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),Qu()){let vt;(vt=this.block_.renderingDebugger)==null||vt.drawDebug(this.block_,this.info_)}this.recordSizeOnBlock_()}recordSizeOnBlock_(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren}hideHiddenIcons_(){for(let vt=0,Et;Et=this.info_.hiddenIcons[vt];vt++){let Dt;(Dt=Et.icon.iconGroup_)==null||Dt.setAttribute("display","none")}}drawOutline_(){this.drawTop_();for(let vt=1;vt<this.info_.rows.length-1;vt++){const Et=this.info_.rows[vt];Et.hasJaggedEdge?this.drawJaggedEdge_(Et):Et.hasStatement?this.drawStatementInput_(Et):Et.hasExternalInput?this.drawValueInput_(Et):this.drawRightSideRow_(Et)}this.drawBottom_(),this.drawLeft_()}drawTop_(){const vt=this.info_.topRow,Et=vt.elements;this.positionPreviousConnection_(),this.outlinePath_+=as(vt.xPos,this.info_.startY);for(let Dt=0,Ft;Ft=Et[Dt];Dt++)tr.isLeftRoundedCorner(Ft)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:tr.isRightRoundedCorner(Ft)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:tr.isPreviousConnection(Ft)&&Ft instanceof __?this.outlinePath_+=Ft.shape.pathLeft:tr.isHat(Ft)?this.outlinePath_+=this.constants_.START_HAT.path:tr.isSpacer(Ft)&&(this.outlinePath_+=_i("h",Ft.width));this.outlinePath_+=_i("v",vt.height)}drawJaggedEdge_(vt){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+_i("v",vt.height-this.constants_.JAGGED_TEETH.height)}drawValueInput_(vt){const Et=vt.getLastInput();this.positionExternalValueConnection_(vt);const Dt=xl(Et.shape)?Et.shape.pathDown(Et.height):Et.shape.pathDown;this.outlinePath_+=_i("H",Et.xPos+Et.width)+Dt+_i("v",vt.height-Et.connectionHeight)}drawStatementInput_(vt){var Et=vt.getLastInput();if(Et){var Dt=Et.xPos+Et.notchOffset+Et.shape.width;Et=Et.shape.pathRight+_i("h",-(Et.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var Ft=vt.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=_i("H",Dt)+Et+_i("v",Ft)+this.constants_.INSIDE_CORNERS.pathBottom+_i("H",vt.xPos+vt.width),this.positionStatementInputConnection_(vt)}}drawRightSideRow_(vt){this.outlinePath_+=_i("V",vt.yPos+vt.height)}drawBottom_(){const vt=this.info_.bottomRow,Et=vt.elements;this.positionNextConnection_();let Dt=0,Ft="";for(let Kt=Et.length-1,yn;yn=Et[Kt];Kt--)tr.isNextConnection(yn)&&yn instanceof __?Ft+=yn.shape.pathRight:tr.isLeftSquareCorner(yn)?Ft+=_i("H",vt.xPos):tr.isLeftRoundedCorner(yn)?Ft+=this.constants_.OUTSIDE_CORNERS.bottomLeft:tr.isRightRoundedCorner(yn)?(Ft+=this.constants_.OUTSIDE_CORNERS.bottomRight,Dt=this.constants_.OUTSIDE_CORNERS.rightHeight):tr.isSpacer(yn)&&(Ft+=_i("h",-1*yn.width));this.outlinePath_+=_i("V",vt.baseline-Dt),this.outlinePath_+=Ft}drawLeft_(){var vt=this.info_.outputConnection;if(this.positionOutputConnection_(),vt){const Et=vt.connectionOffsetY+vt.height;vt=xl(vt.shape)?vt.shape.pathUp(vt.height):vt.shape.pathUp,this.outlinePath_+=_i("V",Et)+vt}this.outlinePath_+="z"}drawInternals_(){for(let vt=0,Et;Et=this.info_.rows[vt];vt++)for(let Dt=0,Ft;Ft=Et.elements[Dt];Dt++)tr.isInlineInput(Ft)?this.drawInlineInput_(Ft):(tr.isIcon(Ft)||tr.isField(Ft))&&this.layoutField_(Ft)}layoutField_(vt){const Et=tr.isField(vt)?vt.field.getSvgRoot():vt.icon.iconGroup_,Dt=vt.centerline-vt.height/2;let Ft=vt.xPos,Kt="";this.info_.RTL&&(Ft=-(Ft+vt.width),vt.flipRtl&&(Ft+=vt.width,Kt="scale(-1 1)")),tr.isIcon(vt)?(Et.setAttribute("display","block"),Et.setAttribute("transform","translate("+Ft+","+Dt+")"),vt.icon.computeIconLocation()):Et.setAttribute("transform","translate("+Ft+","+Dt+")"+Kt),this.info_.isInsertionMarker&&Et.setAttribute("display","none")}drawInlineInput_(vt){const Et=vt.width,Dt=vt.height,Ft=vt.connectionOffsetY,Kt=vt.connectionHeight+Ft;this.inlinePath_+=Us(vt.xPos+vt.connectionWidth,vt.centerline-Dt/2)+_i("v",Ft)+vt.shape.pathDown+_i("v",Dt-Kt)+_i("h",Et-vt.connectionWidth)+_i("v",-Dt)+"z",this.positionInlineInputConnection_(vt)}positionInlineInputConnection_(vt){const Et=vt.centerline-vt.height/2;if(vt.connectionModel){let Dt=vt.xPos+vt.connectionWidth+vt.connectionOffsetX;this.info_.RTL&&(Dt*=-1),vt.connectionModel.setOffsetInBlock(Dt,Et+vt.connectionOffsetY)}}positionStatementInputConnection_(vt){const Et=vt.getLastInput();if(Et!=null&&Et.connectionModel){let Dt=vt.xPos+vt.statementEdge+Et.notchOffset;this.info_.RTL&&(Dt*=-1),Et.connectionModel.setOffsetInBlock(Dt,vt.yPos)}}positionExternalValueConnection_(vt){const Et=vt.getLastInput();if(Et&&Et.connectionModel){let Dt=vt.xPos+vt.width;this.info_.RTL&&(Dt*=-1),Et.connectionModel.setOffsetInBlock(Dt,vt.yPos)}}positionPreviousConnection_(){const vt=this.info_.topRow;if(vt.connection){const Et=vt.xPos+vt.notchOffset;vt.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-Et:Et,0)}}positionNextConnection_(){const vt=this.info_.bottomRow;if(vt.connection){const Et=vt.connection,Dt=Et.xPos;Et.connectionModel.setOffsetInBlock(this.info_.RTL?-Dt:Dt,vt.baseline)}}positionOutputConnection_(){if(this.info_.outputConnection){const vt=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-vt:vt,this.info_.outputConnection.connectionOffsetY)}}},IO=class{constructor(vt,Et){this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.hiddenIcons=[],this.startY=this.startX=0,this.renderer_=vt,this.block_=Et,this.constants_=this.renderer_.getConstants(),this.outputConnection=Et.outputConnection?new jT(this.constants_,Et.outputConnection):null,this.isInline=Et.getInputsInline()&&!Et.isCollapsed(),this.isCollapsed=Et.isCollapsed(),this.isInsertionMarker=Et.isInsertionMarker(),this.RTL=Et.RTL,this.topRow=new S$(this.constants_),this.bottomRow=new _$(this.constants_)}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}createRows_(){this.populateTopRow_(),this.rows.push(this.topRow);let vt=new v$(this.constants_);this.inputRows.push(vt);var Et=this.block_.getIcons();for(let Dt=0,Ft;Ft=Et[Dt];Dt++){const Kt=new QT(this.constants_,Ft);this.isCollapsed&&Ft.collapseHidden?this.hiddenIcons.push(Kt):vt.elements.push(Kt)}Et=void 0;for(let Dt=0,Ft;Ft=this.block_.inputList[Dt];Dt++)if(Ft.isVisible()){this.shouldStartNewRow_(Ft,Et)&&(this.rows.push(vt),vt=new v$(this.constants_),this.inputRows.push(vt));for(let Kt=0,yn;yn=Ft.fieldRow[Kt];Kt++)vt.elements.push(new O_(this.constants_,yn,Ft));this.addInput_(Ft,vt),Et=Ft}this.isCollapsed&&(vt.hasJaggedEdge=!0,vt.elements.push(new HT(this.constants_))),(vt.elements.length||vt.hasDummyInput)&&this.rows.push(vt),this.populateBottomRow_(),this.rows.push(this.bottomRow)}populateTopRow_(){var vt=!!this.block_.previousConnection;const Et=(this.block_.hat?this.block_.hat==="cap":this.constants_.ADD_START_HATS)&&!this.outputConnection&&!vt;let Dt=this.topRow.hasLeftSquareCorner(this.block_)?v0:y0;this.topRow.elements.push(new Dt(this.constants_)),Et?(vt=new O$(this.constants_),this.topRow.elements.push(vt),this.topRow.capline=vt.ascenderHeight):vt&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new XT(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0].type===Do.STATEMENT&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,Dt=this.topRow.hasRightSquareCorner(this.block_)?v0:y0,this.topRow.elements.push(new Dt(this.constants_,"right"))}populateBottomRow_(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type===Do.STATEMENT?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new v0(this.constants_)):this.bottomRow.elements.push(new y0(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new zT(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new v0(this.constants_,"right")):this.bottomRow.elements.push(new y0(this.constants_,"right"))}addInput_(vt,Et){this.isInline&&vt.type===Do.VALUE?(Et.elements.push(new y$(this.constants_,vt)),Et.hasInlineInput=!0):vt.type===Do.STATEMENT?(Et.elements.push(new O0(this.constants_,vt)),Et.hasStatement=!0):vt.type===Do.VALUE?(Et.elements.push(new Zv(this.constants_,vt)),Et.hasExternalInput=!0):vt.type===Do.DUMMY&&(Et.minHeight=Math.max(Et.minHeight,vt.getSourceBlock()&&vt.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),Et.hasDummyInput=!0),Et.align===null&&(Et.align=vt.align)}shouldStartNewRow_(vt,Et){return Et?vt.type===Do.STATEMENT||Et.type===Do.STATEMENT?!0:vt.type===Do.VALUE||vt.type===Do.DUMMY?!this.isInline:!1:!1}addElemSpacing_(){for(let vt=0,Et;Et=this.rows[vt];vt++){const Dt=Et.elements;if(Et.elements=[],Et.startsWithElemSpacer()&&Et.elements.push(new vu(this.constants_,this.getInRowSpacing_(null,Dt[0]))),Dt.length){for(let Ft=0;Ft<Dt.length-1;Ft++){Et.elements.push(Dt[Ft]);const Kt=this.getInRowSpacing_(Dt[Ft],Dt[Ft+1]);Et.elements.push(new vu(this.constants_,Kt))}Et.elements.push(Dt[Dt.length-1]),Et.endsWithElemSpacer()&&Et.elements.push(new vu(this.constants_,this.getInRowSpacing_(Dt[Dt.length-1],null)))}}}getInRowSpacing_(vt,Et){if(!vt&&Et&&tr.isStatementInput(Et))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(vt&&tr.isInput(vt)&&!Et){if(tr.isExternalInput(vt))return this.constants_.NO_PADDING;if(tr.isInlineInput(vt))return this.constants_.LARGE_PADDING;if(tr.isStatementInput(vt))return this.constants_.NO_PADDING}return vt&&tr.isLeftSquareCorner(vt)&&Et&&(tr.isPreviousConnection(Et)||tr.isNextConnection(Et))?Et.notchOffset:vt&&tr.isLeftRoundedCorner(vt)&&Et&&(tr.isPreviousConnection(Et)||tr.isNextConnection(Et))?Et.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}computeBounds_(){let vt=0,Et=0,Dt=0;for(let Kt=0,yn;yn=this.rows[Kt];Kt++){if(yn.measure(),Et=Math.max(Et,yn.width),yn.hasStatement){var Ft=yn.getLastInput();let Mn,qn;Ft=yn.width-((qn=(Mn=Ft)==null?void 0:Mn.width)!=null?qn:0),vt=Math.max(vt,Ft)}Dt=Math.max(Dt,yn.widthWithConnectedBlocks)}this.statementEdge=vt,this.width=Et;for(let Kt=0,yn;yn=this.rows[Kt];Kt++)yn.hasStatement&&(yn.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(Et,Dt),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)}alignRowElements_(){for(let Et=0,Dt;Dt=this.rows[Et];Et++)if(Dt.hasStatement)this.alignStatementRow_(Dt);else{var vt=Dt.width;vt=this.getDesiredRowWidth_(Dt)-vt,0<vt&&this.addAlignmentPadding_(Dt,vt),tr.isTopOrBottomRow(Dt)&&(Dt.widthWithConnectedBlocks=Dt.width)}}getDesiredRowWidth_(vt){return this.width-this.startX}addAlignmentPadding_(vt,Et){const Dt=vt.getFirstSpacer(),Ft=vt.getLastSpacer();if((vt.hasExternalInput||vt.hasStatement)&&(vt.widthWithConnectedBlocks+=Et),vt.align===lt.Align$$module$build$src$core$input.LEFT&&Ft)Ft.width+=Et;else if(vt.align===lt.Align$$module$build$src$core$input.CENTRE&&Dt&&Ft)Dt.width+=Et/2,Ft.width+=Et/2;else if(vt.align===lt.Align$$module$build$src$core$input.RIGHT&&Dt)Dt.width+=Et;else if(Ft)Ft.width+=Et;else return;vt.width+=Et}alignStatementRow_(vt){const Et=vt.getLastInput();if(Et){var Dt=vt.width-Et.width,Ft=this.statementEdge;Dt=Ft-Dt,0<Dt&&this.addAlignmentPadding_(vt,Dt),Dt=vt.width,Ft=this.getDesiredRowWidth_(vt),Et.width+=Ft-Dt,Et.height=Math.max(Et.height,vt.height),vt.width+=Ft-Dt,vt.widthWithConnectedBlocks=Math.max(vt.width,this.statementEdge+vt.connectedBlockWidths)}}addRowSpacing_(){const vt=this.rows;this.rows=[];for(let Et=0;Et<vt.length;Et++)this.rows.push(vt[Et]),Et!==vt.length-1&&this.rows.push(this.makeSpacerRow_(vt[Et],vt[Et+1]))}makeSpacerRow_(vt,Et){var Dt=this.getSpacerRowHeight_(vt,Et);const Ft=this.getSpacerRowWidth_(vt,Et);return Dt=new b$(this.constants_,Dt,Ft),vt.hasStatement&&(Dt.followsStatement=!0),Et.hasStatement&&(Dt.precedesStatement=!0),Dt}getSpacerRowWidth_(vt,Et){return this.width-this.startX}getSpacerRowHeight_(vt,Et){return this.constants_.MEDIUM_PADDING}getElemCenterline_(vt,Et){return tr.isSpacer(Et)?vt.yPos+Et.height/2:tr.isBottomRow(vt)?(vt=vt.yPos+vt.height-vt.descenderHeight,tr.isNextConnection(Et)?vt+Et.height/2:vt-Et.height/2):tr.isTopRow(vt)?tr.isHat(Et)?vt.capline-Et.height/2:vt.capline+Et.height/2:vt.yPos+vt.height/2}recordElemPositions_(vt){let Et=vt.xPos;for(let Dt=0,Ft;Ft=vt.elements[Dt];Dt++)tr.isSpacer(Ft)&&(Ft.height=vt.height),Ft.xPos=Et,Ft.centerline=this.getElemCenterline_(vt,Ft),Et+=Ft.width}finalize_(){let vt=0,Et=0;for(let Dt=0,Ft;Ft=this.rows[Dt];Dt++)Ft.yPos=Et,Ft.xPos=this.startX,Et+=Ft.height,vt=Math.max(vt,Ft.widthWithConnectedBlocks),this.recordElemPositions_(Ft);if(this.outputConnection&&this.block_.nextConnection){const Dt=this.block_.nextConnection.targetBlock();Dt&&(vt=Math.max(vt,Dt.getHeightWidth().width))}this.widthWithChildren=vt+this.startX,this.height=Et,this.startY=this.topRow.capline,this.bottomRow.baseline=Et-this.bottomRow.descenderHeight}},$$=class extends Yu{constructor(vt,Et,Dt,Ft){let Kt=vt?vt.workspace.id:void 0;Ft&&Ft.getType()===kr.types.WORKSPACE&&(Kt=Ft.getLocation().id),super(Kt),this.type=Vy,this.blockId=vt==null?void 0:vt.id,this.oldNode=Dt||void 0,this.newNode=Ft,this.isCursor=Et}toJson(){const vt=super.toJson();if(this.isCursor===void 0)throw Error("Whether this is a cursor event or not is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newNode)throw Error("The new node is undefined. Either pass a node to the constructor, or call fromJson");return vt.isCursor=this.isCursor,vt.blockId=this.blockId,vt.oldNode=this.oldNode,vt.newNode=this.newNode,vt}fromJson(vt){ft("Blockly.Events.MarkerMove.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(vt),this.isCursor=vt.isCursor,this.blockId=vt.blockId,this.oldNode=vt.oldNode,this.newNode=vt.newNode}static fromJson(vt,Et,Dt){return Et=super.fromJson(vt,Et,Dt??new $$),Et.isCursor=vt.isCursor,Et.blockId=vt.blockId,Et.oldNode=vt.oldNode,Et.newNode=vt.newNode,Et}};xo(Wr.EVENT,Vy,$$);var fx="blocklyCursor",mx="blocklyMarker",gx=.75,T$=class{constructor(vt,Et,Dt){this.workspace=vt,this.marker=Dt,this.markerSvgRect_=this.markerSvgLine_=this.markerInput_=this.markerBlock_=this.svgGroup_=this.markerSvg_=this.currentMarkerSvg=this.parent_=null,this.constants_=Et,vt=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=Dt.colour||vt}getSvgRoot(){return this.svgGroup_}getMarker(){return this.marker}isCursor(){return this.marker.type==="cursor"}createDom(){const vt=this.isCursor()?fx:mx;return this.svgGroup_=In(ar.G,{class:vt}),this.createDomInternal_(),this.svgGroup_}setParent_(vt){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),vt.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),vt.setMarkerSvg(this.getSvgRoot())),this.parent_=vt}draw(vt,Et){if(Et){this.constants_=this.workspace.getRenderer().getConstants();var Dt=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker.colour||Dt,this.applyColour_(Et),this.showAtLocation_(Et),this.fireMarkerEvent_(vt,Et),vt=this.currentMarkerSvg.childNodes[0],vt!==void 0&&vt.beginElement&&vt.beginElement()}else this.hide()}showAtLocation_(vt){const Et=vt.getLocation().type;vt.getType()===kr.types.BLOCK?this.showWithBlock_(vt):vt.getType()===kr.types.OUTPUT?this.showWithOutput_(vt):Et===no.INPUT_VALUE?this.showWithInput_(vt):Et===no.NEXT_STATEMENT?this.showWithNext_(vt):vt.getType()===kr.types.PREVIOUS?this.showWithPrevious_(vt):vt.getType()===kr.types.FIELD?this.showWithField_(vt):vt.getType()===kr.types.WORKSPACE?this.showWithCoordinates_(vt):vt.getType()===kr.types.STACK&&this.showWithStack_(vt)}showWithBlockPrevOutput_(vt){vt=vt.getSourceBlock();const Et=vt.width;var Dt=vt.height,Ft=Dt*gx;const Kt=this.constants_.CURSOR_BLOCK_PADDING;vt.previousConnection?(Dt=this.constants_.shapeFor(vt.previousConnection),this.positionPrevious_(Et,Kt,Ft,Dt)):vt.outputConnection?(Ft=this.constants_.shapeFor(vt.outputConnection),this.positionOutput_(Et,Dt,Ft)):this.positionBlock_(Et,Kt,Ft),this.setParent_(vt),this.showCurrent_()}showWithBlock_(vt){this.showWithBlockPrevOutput_(vt)}showWithPrevious_(vt){this.showWithBlockPrevOutput_(vt)}showWithOutput_(vt){this.showWithBlockPrevOutput_(vt)}showWithCoordinates_(vt){var Et=vt.getWsCoordinate();vt=Et.x,Et=Et.y,this.workspace.RTL&&(vt-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(vt,Et,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace),this.showCurrent_()}showWithField_(vt){vt=vt.getLocation();const Et=vt.getSize().width,Dt=vt.getSize().height;this.positionRect_(0,0,Et,Dt),this.setParent_(vt),this.showCurrent_()}showWithInput_(vt){vt=vt.getLocation();const Et=vt.getSourceBlock();this.positionInput_(vt),this.setParent_(Et),this.showCurrent_()}showWithNext_(vt){var Et=vt.getLocation();vt=Et.getSourceBlock();let Dt=0;Et=Et.getOffsetInBlock().y;const Ft=vt.getHeightWidth().width;this.workspace.RTL&&(Dt=-Ft),this.positionLine_(Dt,Et,Ft),this.setParent_(vt),this.showCurrent_()}showWithStack_(vt){vt=vt.getLocation();var Et=vt.getHeightWidth();const Dt=Et.width+this.constants_.CURSOR_STACK_PADDING;Et=Et.height+this.constants_.CURSOR_STACK_PADDING;const Ft=-this.constants_.CURSOR_STACK_PADDING/2,Kt=-this.constants_.CURSOR_STACK_PADDING/2;let yn=Ft;this.workspace.RTL&&(yn=-(Dt+Ft)),this.positionRect_(yn,Kt,Dt,Et),this.setParent_(vt),this.showCurrent_()}showCurrent_(){this.hide(),this.currentMarkerSvg&&(this.currentMarkerSvg.style.display="")}positionBlock_(vt,Et,Dt){if(vt=as(-Et,Dt)+_i("V",-Et)+_i("H",vt+2*Et)+_i("V",Dt),!this.markerBlock_)throw Error("createDom should be called before positioning the marker");this.markerBlock_.setAttribute("d",vt),this.workspace.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionInput_(vt){const Et=vt.getOffsetInBlock().x,Dt=vt.getOffsetInBlock().y;vt=Us(0,0)+this.constants_.shapeFor(vt).pathDown,this.markerInput_.setAttribute("d",vt),this.markerInput_.setAttribute("transform","translate("+Et+","+Dt+")"+(this.workspace.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_}positionLine_(vt,Et,Dt){if(!this.markerSvgLine_)throw Error("createDom should be called before positioning the line");this.markerSvgLine_.setAttribute("x",`${vt}`),this.markerSvgLine_.setAttribute("y",`${Et}`),this.markerSvgLine_.setAttribute("width",`${Dt}`),this.currentMarkerSvg=this.markerSvgLine_}positionOutput_(vt,Et,Dt){if(!this.markerBlock_)throw Error("createDom should be called before positioning the output");vt=as(vt,0)+_i("h",-(vt-Dt.width))+_i("v",this.constants_.TAB_OFFSET_FROM_TOP)+Dt.pathDown+_i("V",Et)+_i("H",vt),this.markerBlock_.setAttribute("d",vt),this.workspace.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionPrevious_(vt,Et,Dt,Ft){if(!this.markerBlock_)throw Error("createDom should be called before positioning the previous connection marker");vt=as(-Et,Dt)+_i("V",-Et)+_i("H",this.constants_.NOTCH_OFFSET_LEFT)+Ft.pathLeft+_i("H",vt+2*Et)+_i("V",Dt),this.markerBlock_.setAttribute("d",vt),this.workspace.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionRect_(vt,Et,Dt,Ft){if(!this.markerSvgRect_)throw Error("createDom should be called before positioning the rect");this.markerSvgRect_.setAttribute("x",`${vt}`),this.markerSvgRect_.setAttribute("y",`${Et}`),this.markerSvgRect_.setAttribute("width",`${Dt}`),this.markerSvgRect_.setAttribute("height",`${Ft}`),this.currentMarkerSvg=this.markerSvgRect_}flipRtl_(vt){vt.setAttribute("transform","scale(-1 1)")}hide(){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before hiding the marker");this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"}fireMarkerEvent_(vt,Et){const Dt=Et.getSourceBlock();vt=new(Vr(Vy))(Dt,this.isCursor(),vt,Et),Fr(vt)}getBlinkProperties_(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}}createDomInternal_(){if(this.markerSvg_=In(ar.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=In(ar.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=In(ar.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.markerSvg_),this.markerInput_=In(ar.PATH,{transform:"",style:"display: none"},this.markerSvg_),this.markerBlock_=In(ar.PATH,{transform:"",style:"display: none",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){const vt=this.getBlinkProperties_();In(ar.ANIMATE,vt,this.markerSvgLine_),In(ar.ANIMATE,vt,this.markerInput_),In(ar.ANIMATE,Object.assign({},vt,{attributeName:"stroke"}),this.markerBlock_)}return this.markerSvg_}applyColour_(vt){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before applying color to the markerj");this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(vt=this.colour_+";transparent;transparent;",this.markerSvgLine_.firstElementChild.setAttribute("values",vt),this.markerInput_.firstElementChild.setAttribute("values",vt),this.markerBlock_.firstElementChild.setAttribute("values",vt))}dispose(){this.svgGroup_&&br(this.svgGroup_)}},qv=class{constructor(vt,Et,Dt){this.markerSvg=this.cursorSvg=null,this.constants=Dt,this.style=Et,this.svgRoot=vt,this.svgPath=In(ar.PATH,{class:"blocklyPath"},this.svgRoot)}setPath(vt){this.svgPath.setAttribute("d",vt)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)")}setCursorSvg(vt){vt?(this.svgRoot.appendChild(vt),this.cursorSvg=vt):this.cursorSvg=null}setMarkerSvg(vt){vt?(this.cursorSvg?this.svgRoot.insertBefore(vt,this.cursorSvg):this.svgRoot.appendChild(vt),this.markerSvg=vt):this.markerSvg=null}applyColour(vt){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(vt.isShadow()),this.updateDisabled_(!vt.isEnabled()||vt.getInheritedDisabled())}setStyle(vt){this.style=vt}setClass_(vt,Et){vt&&(Et?ir(this.svgRoot,vt):Jn(this.svgRoot,vt))}updateHighlighted(vt){vt?this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"):this.svgPath.setAttribute("filter","none")}updateShadow_(vt){vt&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))}updateDisabled_(vt){this.setClass_("blocklyDisabled",vt),vt&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")}updateSelected(vt){this.setClass_("blocklySelected",vt)}updateDraggingDelete(vt){this.setClass_("blocklyDraggingDelete",vt)}updateInsertionMarker(vt){this.setClass_("blocklyInsertionMarker",vt)}updateMovable(vt){this.setClass_("blocklyDraggable",vt)}updateReplacementFade(vt){this.setClass_("blocklyReplaceable",vt)}updateShapeForInputHighlight(vt,Et){}},ZT="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",Su=class{constructor(vt){this.activeCandidate=this.lastMarker=this.lastOnStack=null,this.wouldDeleteBlock=!1,this.fadedBlock=this.highlightedBlock=this.markerConnection=null,Nn(vt),this.topBlock=vt,this.workspace=vt.workspace,this.firstMarker=this.createMarkerBlock(this.topBlock),this.availableConnections=this.initAvailableConnections()}dispose(){this.availableConnections.length=0,Bo();try{this.firstMarker&&this.firstMarker.dispose(),this.lastMarker&&this.lastMarker.dispose()}finally{yo()}}updateAvailableConnections(){this.availableConnections=this.initAvailableConnections()}wouldConnectBlock(){return!!this.activeCandidate}applyConnections(){if(this.activeCandidate){Bo(),this.hidePreview(),yo();var{local:vt,closest:Et}=this.activeCandidate;if(vt.connect(Et),this.topBlock.rendered){const Dt=vt.isSuperior()?Et:vt;ku(Dt.getSourceBlock()),this.topBlock.getRootBlock().bringToFront()}}}update(vt,Et){const Dt=this.getCandidate(vt);((this.wouldDeleteBlock=this.shouldDelete(!!Dt,Et))||this.shouldUpdatePreviews(Dt,vt))&&(Bo(),this.maybeHidePreview(Dt),this.maybeShowPreview(Dt),yo())}createMarkerBlock(vt){var Et=vt.type;Bo();let Dt;try{if(Dt=this.workspace.newBlock(Et),Dt.setInsertionMarker(!0),vt.saveExtraState){var Ft=vt.saveExtraState();Ft&&Dt.loadExtraState&&Dt.loadExtraState(Ft)}else if(vt.mutationToDom){const Kt=vt.mutationToDom();Kt&&Dt.domToMutation&&Dt.domToMutation(Kt)}for(Et=0;Et<vt.inputList.length;Et++){const Kt=vt.inputList[Et];if(Kt.name===a0)continue;const yn=Dt.inputList[Et];if(!yn)throw Error(ZT.replace("%1","an input"));for(Ft=0;Ft<Kt.fieldRow.length;Ft++){const Mn=Kt.fieldRow[Ft],qn=yn.fieldRow[Ft];if(!qn)throw Error(ZT.replace("%1","a field"));qn.setValue(Mn.getValue())}}Dt.setCollapsed(vt.isCollapsed()),Dt.setInputsInline(vt.getInputsInline()),Dt.initSvg(),Dt.getSvgRoot().setAttribute("visibility","hidden")}finally{yo()}return Dt}initAvailableConnections(){const vt=this.topBlock.getConnections_(!1),Et=this.topBlock.lastConnectionInStack(!0);if(Et&&Et!==this.topBlock.nextConnection){if(vt.push(Et),this.lastOnStack=Et,this.lastMarker){Bo();try{this.lastMarker.dispose()}finally{yo()}}this.lastMarker=this.createMarkerBlock(Et.getSourceBlock())}return vt}shouldUpdatePreviews(vt,Et){if(!vt)return!!this.activeCandidate;if(!this.activeCandidate)return!0;const{local:Dt,closest:Ft}=this.activeCandidate;if(Ft===vt.closest&&Dt===vt.local)return!1;const Kt=Dt.x+Et.x-Ft.x;return Et=Dt.y+Et.y-Ft.y,vt.radius<Math.sqrt(Kt*Kt+Et*Et)-lt.config$$module$build$src$core$config.currentConnectionPreference}getCandidate(vt){this.markerConnection&&this.markerConnection.isConnected()||this.updateAvailableConnections();let Et=this.getStartRadius(),Dt=null;for(let Ft=0;Ft<this.availableConnections.length;Ft++){const Kt=this.availableConnections[Ft],yn=Kt.closest(Et,vt);yn.connection&&(Dt={closest:yn.connection,local:Kt,radius:yn.radius},Et=yn.radius)}return Dt}getStartRadius(){return this.activeCandidate?lt.config$$module$build$src$core$config.connectingSnapRadius:lt.config$$module$build$src$core$config.snapRadius}shouldDelete(vt,Et){return Et&&this.workspace.getComponentManager().hasCapability(Et.id,Ks.Capability.DELETE_AREA)?Et.wouldDelete(this.topBlock,vt):!1}maybeShowPreview(vt){if(!this.wouldDeleteBlock&&vt){var Et=vt.closest,Dt;Et===((Dt=this.activeCandidate)==null?void 0:Dt.closest)||Et.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.activeCandidate=vt,this.showPreview(this.activeCandidate))}}showPreview(vt){const Et=this.workspace.getRenderer();switch(Et.getConnectionPreviewMethod(vt.closest,vt.local,this.topBlock)){case Su.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline(vt);break;case Su.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker(vt);break;case Su.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade(vt)}Et.shouldHighlightConnection(vt.closest)&&vt.closest.highlight()}maybeHidePreview(vt){if(!vt)this.hidePreview();else if(this.activeCandidate){const Et=this.activeCandidate.local!==vt.local;(this.activeCandidate.closest!==vt.closest||Et||this.wouldDeleteBlock)&&this.hidePreview()}this.activeCandidate=this.markerConnection=null}hidePreview(){let vt;const Et=(vt=this.activeCandidate)==null?void 0:vt.closest;Et&&Et.targetBlock()&&this.workspace.getRenderer().shouldHighlightConnection(Et)&&Et.unhighlight(),this.hideReplacementFade(),this.hideInsertionInputOutline(),this.hideInsertionMarker()}showInsertionMarker(vt){const{local:Et,closest:Dt}=vt;let Ft=(vt=this.lastOnStack&&Et===this.lastOnStack)?this.lastMarker:this.firstMarker;if(!Ft)throw Error("Cannot show the insertion marker because there is no insertion marker block");let Kt;try{Kt=Ft.getMatchingConnection(Et.getSourceBlock(),Et)}catch{if(this.firstMarker=this.createMarkerBlock(this.topBlock),Ft=vt?this.lastMarker:this.firstMarker,!Ft)throw Error("Cannot show the insertion marker because there is no insertion marker block");Kt=Ft.getMatchingConnection(Et.getSourceBlock(),Et)}if(!Kt)throw Error("Cannot show the insertion marker because there is no associated connection");if(Kt===this.markerConnection)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");Ft.render(),Ft.rendered=!0,Ft.getSvgRoot().setAttribute("visibility","visible"),Kt&&Dt&&Ft.positionNearConnection(Kt,Dt),Dt&&Kt.connect(Dt),this.markerConnection=Kt}hideInsertionMarker(){if(this.markerConnection){var vt=this.markerConnection,Et=vt.getSourceBlock(),Dt=Et.previousConnection,Ft=Et.outputConnection,Kt=vt===Et.nextConnection;if(Ft=vt.type===no.INPUT_VALUE&&!(Ft&&Ft.targetConnection),Kt&&(!Dt||!Dt.targetConnection)||Ft?vt.targetBlock().unplug(!1):vt.type!==no.NEXT_STATEMENT||Kt?Et.unplug(!0):((Kt=vt.targetConnection)&&Kt.getSourceBlock().unplug(!1),Dt=Dt?Dt.targetConnection:null,Et.unplug(!0),Dt&&Kt&&Dt.connect(Kt)),vt.targetConnection)throw Error("markerConnection still connected at the end of disconnectInsertionMarker");this.markerConnection=null,(vt=Et.getSvgRoot())&&vt.setAttribute("visibility","hidden")}}showInsertionInputOutline(vt){vt=vt.closest,this.highlightedBlock=vt.getSourceBlock(),this.highlightedBlock.highlightShapeForInput(vt,!0)}hideInsertionInputOutline(){if(this.highlightedBlock){if(!this.activeCandidate)throw Error("Cannot hide the insertion marker outline because there is no active candidate");this.highlightedBlock.highlightShapeForInput(this.activeCandidate.closest,!1),this.highlightedBlock=null}}showReplacementFade(vt){if(this.fadedBlock=vt.closest.targetBlock(),!this.fadedBlock)throw Error("Cannot show the replacement fade because the closest connection does not have a target block");this.fadedBlock.fadeForReplacement(!0)}hideReplacementFade(){this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null)}getInsertionMarkers(){const vt=[];return this.firstMarker&&vt.push(this.firstMarker),this.lastMarker&&vt.push(this.lastMarker),vt}};(function(vt){vt=vt.PREVIEW_TYPE||(vt.PREVIEW_TYPE={}),vt[vt.INSERTION_MARKER=0]="INSERTION_MARKER",vt[vt.INPUT_OUTLINE=1]="INPUT_OUTLINE",vt[vt.REPLACEMENT_FADE=2]="REPLACEMENT_FADE"})(Su||(Su={})),Su.PREVIEW_TYPE;var $0=class{constructor(vt){this.overrides=null,this.name=vt}getClassName(){return this.name+"-renderer"}init(vt,Et){this.constants_=this.makeConstants_(),Et&&(this.overrides=Et,Object.assign(this.constants_,Et)),this.constants_.setTheme(vt),this.constants_.init()}createDom(vt,Et){this.constants_.createDom(vt,this.name+"-"+Et.name,"."+this.getClassName()+"."+Et.getClassName())}refreshDom(vt,Et){const Dt=this.getConstants();Dt.dispose(),this.constants_=this.makeConstants_(),this.overrides&&Object.assign(this.constants_,this.overrides),this.constants_.randomIdentifier=Dt.randomIdentifier,this.constants_.setTheme(Et),this.constants_.init(),this.createDom(vt,Et)}dispose(){this.constants_&&this.constants_.dispose()}makeConstants_(){return new b0}makeRenderInfo_(vt){return new IO(this,vt)}makeDrawer_(vt,Et){return new S0(vt,Et)}makeDebugger_(){return new bu(this.getConstants())}makeMarkerDrawer(vt,Et){return new T$(vt,this.getConstants(),Et)}makePathObject(vt,Et){return new qv(vt,Et,this.constants_)}getConstants(){return this.constants_}shouldHighlightConnection(vt){return!0}orphanCanConnectAtEnd(vt,Et,Dt){return!!qo.getConnectionForOrphanedConnection(vt,Dt===no.OUTPUT_VALUE?Et.outputConnection:Et.previousConnection)}getConnectionPreviewMethod(vt,Et,Dt){return Et.type===no.OUTPUT_VALUE||Et.type===no.PREVIOUS_STATEMENT?!vt.isConnected()||this.orphanCanConnectAtEnd(Dt,vt.targetBlock(),Et.type)?Su.PREVIEW_TYPE.INSERTION_MARKER:Su.PREVIEW_TYPE.REPLACEMENT_FADE:Su.PREVIEW_TYPE.INSERTION_MARKER}render(vt){Qu()&&!vt.renderingDebugger&&(vt.renderingDebugger=this.makeDebugger_());const Et=this.makeRenderInfo_(vt);Et.measure(),this.makeDrawer_(vt,Et).draw()}},Jo={};Jo.BottomRow=_$,Jo.Connection=__,Jo.ConstantProvider=b0,Jo.Debug=bu,Jo.Drawer=S0,Jo.ExternalValueInput=Zv,Jo.Field=O_,Jo.Hat=O$,Jo.Icon=QT,Jo.InRowSpacer=vu,Jo.InlineInput=y$,Jo.InputConnection=Hp,Jo.InputRow=v$,Jo.JaggedEdge=HT,Jo.MarkerSvg=T$,Jo.Measurable=yp,Jo.NextConnection=zT,Jo.OutputConnection=jT,Jo.PathObject=qv,Jo.PreviousConnection=XT,Jo.RenderInfo=IO,Jo.Renderer=$0,Jo.RoundCorner=y0,Jo.Row=_0,Jo.SpacerRow=b$,Jo.SquareCorner=v0,Jo.StatementInput=O0,Jo.TopRow=S$,Jo.Types=tr,Jo.init=nO,Jo.register=Hu,Jo.stopDebugger=tO,Jo.unregister=dm;var qT=class{constructor(vt,Et){this.workspace=vt,this.theme=Et,this.subscribedWorkspaces_=[],this.componentDB=new Map}getTheme(){return this.theme}setTheme(vt){var Et=this.theme;this.theme=vt,(vt=this.workspace.getInjectionDiv())&&(Et&&(Et=Et.getClassName())&&Jn(vt,Et),(Et=this.theme.getClassName())&&ir(vt,Et));for(let Dt=0,Ft;Ft=this.subscribedWorkspaces_[Dt];Dt++)Ft.refreshTheme();for(const[Dt,Ft]of this.componentDB)for(const Kt of Ft){vt=Kt.element,Et=Kt.propertyName;const yn=this.theme&&this.theme.getComponentStyle(Dt);vt.style[Et]=yn||""}for(const Dt of this.subscribedWorkspaces_)Dt.hideChaff()}subscribeWorkspace(vt){this.subscribedWorkspaces_.push(vt)}unsubscribeWorkspace(vt){if(!xa(this.subscribedWorkspaces_,vt))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.")}subscribe(vt,Et,Dt){this.componentDB.has(Et)||this.componentDB.set(Et,[]),this.componentDB.get(Et).push({element:vt,propertyName:Dt}),Et=this.theme&&this.theme.getComponentStyle(Et),vt.style[Dt]=Et||""}unsubscribe(vt){if(vt)for(const[Et,Dt]of this.componentDB){for(let Ft=Dt.length-1;0<=Ft;Ft--)Dt[Ft].element===vt&&Dt.splice(Ft,1);Dt.length||this.componentDB.delete(Et)}}dispose(){this.subscribedWorkspaces_=this.theme=this.owner_=null,this.componentDB.clear()}},E$="VARIABLE_DYNAMIC",Tm={};Tm.CATEGORY_NAME=E$,Tm.flyoutCategory=t_,Tm.flyoutCategoryBlocks=Pp,Tm.onCreateVariableButtonClick_Colour=rO,Tm.onCreateVariableButtonClick_Number=Ol,Tm.onCreateVariableButtonClick_String=fm;var KT=class{canConnect(vt,Et,Dt,Ft){return this.canConnectWithReason(vt,Et,Dt,Ft)===qo.CAN_CONNECT}canConnectWithReason(vt,Et,Dt,Ft){const Kt=this.doSafetyChecks(vt,Et);return Kt!==qo.CAN_CONNECT?Kt:this.doTypeChecks(vt,Et)?Dt&&!this.doDragChecks(vt,Et,Ft||0)?qo.REASON_DRAG_CHECKS_FAILED:qo.CAN_CONNECT:qo.REASON_CHECKS_FAILED}getErrorMessage(vt,Et,Dt){switch(vt){case qo.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case qo.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case qo.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case qo.REASON_TARGET_NULL:return"Target connection is null.";case qo.REASON_CHECKS_FAILED:return"Connection checks failed. "+(Et+" expected "+Et.getCheck()+", found "+Dt.getCheck());case qo.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case qo.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";case qo.REASON_PREVIOUS_AND_OUTPUT:return"Block would have an output and a previous connection.";default:return"Unknown connection failure: this should never happen!"}}doSafetyChecks(vt,Et){if(!vt||!Et)return qo.REASON_TARGET_NULL;let Dt,Ft,Kt;return vt.isSuperior()?(Dt=vt.getSourceBlock(),Ft=Et.getSourceBlock(),Kt=Et):(Ft=vt.getSourceBlock(),Dt=Et.getSourceBlock(),Kt=vt,vt=Et),Dt===Ft?qo.REASON_SELF_CONNECTION:Kt.type!==m_[vt.type]?qo.REASON_WRONG_TYPE:Dt.workspace!==Ft.workspace?qo.REASON_DIFFERENT_WORKSPACES:Dt.isShadow()&&!Ft.isShadow()?qo.REASON_SHADOW_PARENT:Kt.type===no.OUTPUT_VALUE&&Ft.previousConnection&&Ft.previousConnection.isConnected()||Kt.type===no.PREVIOUS_STATEMENT&&Ft.outputConnection&&Ft.outputConnection.isConnected()?qo.REASON_PREVIOUS_AND_OUTPUT:qo.CAN_CONNECT}doTypeChecks(vt,Et){if(vt=vt.getCheck(),Et=Et.getCheck(),!vt||!Et)return!0;for(let Dt=0;Dt<vt.length;Dt++)if(Et.indexOf(vt[Dt])!==-1)return!0;return!1}doDragChecks(vt,Et,Dt){if(vt.distanceFrom(Et)>Dt||Et.getSourceBlock().isInsertionMarker())return!1;switch(Et.type){case no.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(vt,Et);case no.OUTPUT_VALUE:if(Et.isConnected()&&!Et.targetBlock().isInsertionMarker()||vt.isConnected())return!1;break;case no.INPUT_VALUE:if(Et.isConnected()&&!Et.targetBlock().isMovable()&&!Et.targetBlock().isShadow())return!1;break;case no.NEXT_STATEMENT:if(Et.isConnected()&&!vt.getSourceBlock().nextConnection&&!Et.targetBlock().isShadow()&&Et.targetBlock().nextConnection)return!1;break;default:return!1}return fs.indexOf(Et)===-1}canConnectToPrevious_(vt,Et){return vt.targetConnection||fs.indexOf(Et)!==-1?!1:Et.targetConnection?(vt=Et.targetBlock(),vt.isInsertionMarker()?!vt.getPreviousBlock():!1):!0}};xo(Wr.CONNECTION_CHECKER,Bp,KT);var x$=class extends Xy{constructor(vt){super(vt),this.type=dO,vt&&(this.varType=vt.type,this.varName=vt.name)}toJson(){const vt=super.toJson();if(!this.varType)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return vt.varType=this.varType,vt.varName=this.varName,vt}fromJson(vt){ft("Blockly.Events.VarDelete.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(vt),this.varType=vt.varType,this.varName=vt.varName}static fromJson(vt,Et,Dt){return Et=super.fromJson(vt,Et,Dt??new x$),Et.varType=vt.varType,Et.varName=vt.varName,Et}run(vt){const Et=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");vt?Et.deleteVariableById(this.varId):Et.createVariable(this.varName,this.varType,this.varId)}};xo(Wr.EVENT,dO,x$);var w$=class extends Xy{constructor(vt,Et){super(vt),this.type=Gy,vt&&(this.oldName=vt.name,this.newName=typeof Et>"u"?"":Et)}toJson(){const vt=super.toJson();if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");return vt.oldName=this.oldName,vt.newName=this.newName,vt}fromJson(vt){ft("Blockly.Events.VarRename.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(vt),this.oldName=vt.oldName,this.newName=vt.newName}static fromJson(vt,Et,Dt){return Et=super.fromJson(vt,Et,Dt??new w$),Et.oldName=vt.oldName,Et.newName=vt.newName,Et}run(vt){const Et=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");vt?Et.renameVariableById(this.varId,this.newName):Et.renameVariableById(this.varId,this.oldName)}};xo(Wr.EVENT,Gy,w$);var C$=class{constructor(vt){this.workspace=vt,this.variableMap=new Map}clear(){this.variableMap.clear()}renameVariable(vt,Et){if(vt.name!==Et){var Dt=this.getVariable(Et,vt.type),Ft=this.workspace.getAllBlocks(!1);io(!0);try{Dt&&Dt.getId()!==vt.getId()?this.renameVariableWithConflict_(vt,Et,Dt,Ft):this.renameVariableAndUses_(vt,Et,Ft)}finally{io(!1)}}}renameVariableById(vt,Et){const Dt=this.getVariableById(vt);if(!Dt)throw Error("Tried to rename a variable that didn't exist. ID: "+vt);this.renameVariable(Dt,Et)}renameVariableAndUses_(vt,Et,Dt){for(Fr(new(Vr(Gy))(vt,Et)),vt.name=Et,Et=0;Et<Dt.length;Et++)Dt[Et].updateVarName(vt)}renameVariableWithConflict_(vt,Et,Dt,Ft){const Kt=vt.type;for(Et!==Dt.name&&this.renameVariableAndUses_(Dt,Et,Ft),Et=0;Et<Ft.length;Et++)Ft[Et].renameVarById(vt.getId(),Dt.getId());Fr(new(Vr(dO))(vt)),xa(this.variableMap.get(Kt),vt)}createVariable(vt,Et,Dt){var Ft=this.getVariable(vt,Et);if(Ft){if(Dt&&Ft.getId()!==Dt)throw Error('Variable "'+vt+'" is already in use and its id is "'+Ft.getId()+'" which conflicts with the passed in id, "'+Dt+'".');return Ft}if(Dt&&this.getVariableById(Dt))throw Error('Variable id, "'+Dt+'", is already in use.');return Ft=Dt||Eo(),Et=Et||"",Ft=new Yy(this.workspace,vt,Et,Ft),vt=this.variableMap.get(Et)||[],vt.push(Ft),this.variableMap.delete(Et),this.variableMap.set(Et,vt),Fr(new(Vr(l_))(Ft)),Ft}deleteVariable(vt){const Et=vt.getId(),Dt=this.variableMap.get(vt.type);if(Dt){for(let Ft=0;Ft<Dt.length;Ft++)if(Dt[Ft].getId()===Et){Dt.splice(Ft,1),Fr(new(Vr(dO))(vt));break}}}deleteVariableById(vt){const Et=this.getVariableById(vt);if(Et){var Dt=Et.name;const Ft=this.getVariableUsesById(vt);for(let Kt=0,yn;yn=Ft[Kt];Kt++)if(yn.type==="procedures_defnoreturn"||yn.type==="procedures_defreturn"){vt=String(yn.getFieldValue("NAME")),Dt=$o.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",Dt).replace("%2",vt),wm(Dt);return}1<Ft.length?(Dt=$o.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(Ft.length)).replace("%2",Dt),jp(Dt,Kt=>{Kt&&Et&&this.deleteVariableInternal(Et,Ft)})):this.deleteVariableInternal(Et,Ft)}else console.warn("Can't delete non-existent variable: "+vt)}deleteVariableInternal(vt,Et){const Dt=Ro();Dt||io(!0);try{for(let Ft=0;Ft<Et.length;Ft++)Et[Ft].dispose(!0);this.deleteVariable(vt)}finally{Dt||io(!1)}}getVariable(vt,Et){if(Et=this.variableMap.get(Et||"")){for(let Dt=0,Ft;Ft=Et[Dt];Dt++)if(Du.equals(Ft.name,vt))return Ft}return null}getVariableById(vt){for(const[,Et]of this.variableMap)for(const Dt of Et)if(Dt.getId()===vt)return Dt;return null}getVariablesOfType(vt){return(vt=this.variableMap.get(vt||""))?vt.slice():[]}getVariableTypes(vt){const Et=new Set(this.variableMap.keys());if(vt&&vt.getPotentialVariableMap())for(const Dt of vt.getPotentialVariableMap().variableMap.keys())Et.add(Dt);return Et.has("")||Et.add(""),Array.from(Et.values())}getAllVariables(){let vt=[];for(const Et of this.variableMap.values())vt=vt.concat(Et);return vt}getAllVariableNames(){return Array.from(this.variableMap.values()).flat().map(vt=>vt.name)}getVariableUsesById(vt){const Et=[],Dt=this.workspace.getAllBlocks(!1);for(let Ft=0;Ft<Dt.length;Ft++){const Kt=Dt[Ft].getVarModels();if(Kt)for(let yn=0;yn<Kt.length;yn++)Kt[yn].getId()===vt&&Et.push(Dt[Ft])}return Et}},zp=class{get isFlyout(){return this.internalIsFlyout}get isMutator(){return this.internalIsMutator}constructor(vt){this.isClearing=this.internalIsMutator=this.internalIsFlyout=this.rendered=!1,this.MAX_UNDO=1024,this.connectionDBList=[],this.topBlocks=[],this.topComments=[],this.commentDB=new Map,this.listeners=[],this.undoStack_=[],this.redoStack_=[],this.blockDB=new Map,this.typedBlocksDB=new Map,this.procedureMap=new WT(this),this.potentialVariableMap=null,this.id=Eo(),Cn(this),this.options=vt||new Ju({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(bo(Wr.CONNECTION_CHECKER,this.options,!0))(this),this.variableMap=new C$(this)}dispose(){this.listeners.length=0,this.clear(),$n(this)}sortObjects_(vt,Et){return vt=vt.getRelativeToSurfaceXY(),Et=Et.getRelativeToSurfaceXY(),vt.y+zp.prototype.sortObjects_.offset*vt.x-(Et.y+zp.prototype.sortObjects_.offset*Et.x)}addTopBlock(vt){this.topBlocks.push(vt)}removeTopBlock(vt){if(!xa(this.topBlocks,vt))throw Error("Block not present in workspace's list of top-most blocks.")}getTopBlocks(vt){const Et=[].concat(this.topBlocks);return vt&&1<Et.length&&(this.sortObjects_.offset=Math.sin(to(zp.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),Et.sort(this.sortObjects_)),Et}addTypedBlock(vt){this.typedBlocksDB.has(vt.type)||this.typedBlocksDB.set(vt.type,[]),this.typedBlocksDB.get(vt.type).push(vt)}removeTypedBlock(vt){xa(this.typedBlocksDB.get(vt.type),vt),this.typedBlocksDB.get(vt.type).length||this.typedBlocksDB.delete(vt.type)}getBlocksByType(vt,Et){return this.typedBlocksDB.has(vt)?(vt=this.typedBlocksDB.get(vt).slice(0),Et&&vt&&1<vt.length&&(this.sortObjects_.offset=Math.sin(to(zp.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),vt.sort(this.sortObjects_)),vt.filter(function(Dt){return!Dt.isInsertionMarker()})):[]}addTopComment(vt){this.topComments.push(vt),this.commentDB.has(vt.id)&&console.warn('Overriding an existing comment on this workspace, with id "'+vt.id+'"'),this.commentDB.set(vt.id,vt)}removeTopComment(vt){if(!xa(this.topComments,vt))throw Error("Comment not present in workspace's list of top-most comments.");this.commentDB.delete(vt.id)}getTopComments(vt){const Et=[].concat(this.topComments);return vt&&1<Et.length&&(this.sortObjects_.offset=Math.sin(to(zp.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),Et.sort(this.sortObjects_)),Et}getAllBlocks(vt){if(vt){var Et=this.getTopBlocks(!0);vt=[];for(let Dt=0;Dt<Et.length;Dt++)vt.push(...Et[Dt].getDescendants(!0))}else for(vt=this.getTopBlocks(!1),Et=0;Et<vt.length;Et++)vt.push(...vt[Et].getChildren(!1));return vt.filter(function(Dt){return!Dt.isInsertionMarker()})}clear(){this.isClearing=!0;try{const vt=Ro();for(vt||io(!0);this.topBlocks.length;)this.topBlocks[0].dispose(!1);for(;this.topComments.length;)this.topComments[this.topComments.length-1].dispose();vt||io(!1),this.variableMap.clear(),this.potentialVariableMap&&this.potentialVariableMap.clear()}finally{this.isClearing=!1}}renameVariableById(vt,Et){this.variableMap.renameVariableById(vt,Et)}createVariable(vt,Et,Dt){return this.variableMap.createVariable(vt,Et,Dt)}getVariableUsesById(vt){return this.variableMap.getVariableUsesById(vt)}deleteVariableById(vt){this.variableMap.deleteVariableById(vt)}getVariable(vt,Et){return this.variableMap.getVariable(vt,Et)}getVariableById(vt){return this.variableMap.getVariableById(vt)}getVariablesOfType(vt){return this.variableMap.getVariablesOfType(vt)}getVariableTypes(){return this.variableMap.getVariableTypes(this)}getAllVariables(){return this.variableMap.getAllVariables()}getAllVariableNames(){return this.variableMap.getAllVariableNames()}getWidth(){return 0}newBlock(vt,Et){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}remainingCapacity(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length}remainingCapacityOfType(vt){return this.options.maxInstances?(this.options.maxInstances[vt]!==void 0?this.options.maxInstances[vt]:1/0)-this.getBlocksByType(vt,!1).length:1/0}isCapacityAvailable(vt){if(!this.hasBlockLimits())return!0;let Et=0;for(const Dt in vt){if(vt[Dt]>this.remainingCapacityOfType(Dt))return!1;Et+=vt[Dt]}return!(Et>this.remainingCapacity())}hasBlockLimits(){return this.options.maxBlocks!==1/0||!!this.options.maxInstances}getUndoStack(){return this.undoStack_}getRedoStack(){return this.redoStack_}undo(vt){var Et=vt?this.redoStack_:this.undoStack_,Dt=vt?this.undoStack_:this.redoStack_;const Ft=Et.pop();if(Ft){for(var Kt=[Ft];Et.length&&Ft.group&&Ft.group===Et[Et.length-1].group;)Kt.push(Et.pop());for(Et=0;Et<Kt.length;Et++)Dt.push(Kt[Et]);Kt=El(Kt,vt),Ao(!1);try{for(Dt=0;Dt<Kt.length;Dt++)Kt[Dt].run(vt)}finally{Ao(!0)}}}clearUndo(){this.undoStack_.length=0,this.redoStack_.length=0,au()}addChangeListener(vt){return this.listeners.push(vt),vt}removeChangeListener(vt){xa(this.listeners,vt)}fireChangeListener(vt){if(vt.recordUndo)for(this.undoStack_.push(vt),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(let Et=0;Et<this.listeners.length;Et++)(0,this.listeners[Et])(vt)}getBlockById(vt){return this.blockDB.get(vt)||null}setBlockById(vt,Et){this.blockDB.set(vt,Et)}removeBlockById(vt){this.blockDB.delete(vt)}getCommentById(vt){let Et;return(Et=this.commentDB.get(vt))!=null?Et:null}allInputsFilled(vt){const Et=this.getTopBlocks(!1);for(let Dt=0;Dt<Et.length;Dt++)if(!Et[Dt].allInputsFilled(vt))return!1;return!0}getPotentialVariableMap(){return this.potentialVariableMap}createPotentialVariableMap(){this.potentialVariableMap=new C$(this)}getVariableMap(){return this.variableMap}setVariableMap(vt){this.variableMap=vt}getProcedureMap(){return this.procedureMap}static getById(vt){return vn(vt)}static getAll(){return Tn()}};zp.SCAN_ANGLE=3;var Ox=100,JT=class{constructor(vt){this.parentWorkspace=vt,this.sounds=new Map,this.lastSound_=null}dispose(){this.sounds.clear()}load(vt,Et){if(vt.length){try{var Dt=new globalThis.Audio}catch{return}for(let Kt=0;Kt<vt.length;Kt++){const yn=vt[Kt],Mn=yn.match(/\.(\w+)$/);if(Mn&&Dt.canPlayType("audio/"+Mn[1])){var Ft=new globalThis.Audio(yn);break}}Ft&&this.sounds.set(Et,Ft)}}preload(){for(const vt of this.sounds.values()){vt.volume=.01;const Et=vt.play();if(Et!==void 0?Et.then(vt.pause).catch(function(){}):vt.pause(),vo||rs)break}}play(vt,Et){var Dt=this.sounds.get(vt);Dt?(vt=new Date,this.lastSound_!==null&&vt.getTime()-this.lastSound_.getTime()<Ox||(this.lastSound_=vt,Dt=vo||Io?Dt:Dt.cloneNode(),Dt.volume=Et===void 0?1:Et,Dt.play())):this.parentWorkspace&&this.parentWorkspace.getAudioManager().play(vt,Et)}},eE=class{constructor(vt){this.workspace=vt,this.id="zoomControls",this.zoomResetGroup=this.zoomOutGroup=this.zoomInGroup=this.onZoomOutWrapper=this.onZoomInWrapper=this.onZoomResetWrapper=null,this.HEIGHT=this.WIDTH=32,this.SMALL_SPACING=2,this.LARGE_SPACING=11,this.MARGIN_HORIZONTAL=this.MARGIN_VERTICAL=20,this.svgGroup=null,this.top=this.left=0,this.initialized=!1}createDom(){this.svgGroup=In(ar.G,{});const vt=String(Math.random()).substring(2);return this.createZoomOutSvg(vt),this.createZoomInSvg(vt),this.workspace.isMovable()&&this.createZoomResetSvg(vt),this.svgGroup}init(){this.workspace.getComponentManager().addComponent({component:this,weight:2,capabilities:[Ks.Capability.POSITIONABLE]}),this.initialized=!0}dispose(){this.workspace.getComponentManager().removeComponent("zoomControls"),this.svgGroup&&br(this.svgGroup),this.onZoomResetWrapper&&cn(this.onZoomResetWrapper),this.onZoomInWrapper&&cn(this.onZoomInWrapper),this.onZoomOutWrapper&&cn(this.onZoomOutWrapper)}getBoundingRectangle(){let vt=this.SMALL_SPACING+2*this.HEIGHT;return this.zoomResetGroup&&(vt+=this.LARGE_SPACING+this.HEIGHT),new xs(this.top,this.top+vt,this.left,this.left+this.WIDTH)}position(vt,Et){if(this.initialized){var Dt=um(this.workspace,vt),Ft=this.SMALL_SPACING+2*this.HEIGHT;if(this.zoomResetGroup&&(Ft+=this.LARGE_SPACING+this.HEIGHT),vt=qm(Dt,new qs(this.WIDTH,Ft),this.MARGIN_HORIZONTAL,this.MARGIN_VERTICAL,vt,this.workspace),Dt=Dt.vertical,Et=yy(vt,this.MARGIN_VERTICAL,Dt===Qp.TOP?$m.DOWN:$m.UP,Et),Dt===Qp.TOP){var Kt=this.SMALL_SPACING+this.HEIGHT,yn;(yn=this.zoomInGroup)==null||yn.setAttribute("transform","translate(0, "+Kt+")"),this.zoomResetGroup&&this.zoomResetGroup.setAttribute("transform","translate(0, "+(Kt+this.LARGE_SPACING+this.HEIGHT)+")")}else{yn=this.zoomResetGroup?this.LARGE_SPACING+this.HEIGHT:0;let qn;(qn=this.zoomInGroup)==null||qn.setAttribute("transform","translate(0, "+yn+")"),yn=yn+this.SMALL_SPACING+this.HEIGHT,(Kt=this.zoomOutGroup)==null||Kt.setAttribute("transform","translate(0, "+yn+")")}this.top=Et.top,this.left=Et.left;var Mn;(Mn=this.svgGroup)==null||Mn.setAttribute("transform","translate("+this.left+","+this.top+")")}}createZoomOutSvg(vt){this.zoomOutGroup=In(ar.G,{class:"blocklyZoom"},this.svgGroup);const Et=In(ar.CLIPPATH,{id:"blocklyZoomoutClipPath"+vt},this.zoomOutGroup);In(ar.RECT,{width:32,height:32},Et),In(ar.IMAGE,{width:Hl.width,height:Hl.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+vt+")"},this.zoomOutGroup).setAttributeNS(iu,"xlink:href",this.workspace.options.pathToMedia+Hl.url),this.onZoomOutWrapper=Zt(this.zoomOutGroup,"pointerdown",null,this.zoom.bind(this,-1))}createZoomInSvg(vt){this.zoomInGroup=In(ar.G,{class:"blocklyZoom"},this.svgGroup);const Et=In(ar.CLIPPATH,{id:"blocklyZoominClipPath"+vt},this.zoomInGroup);In(ar.RECT,{width:32,height:32},Et),In(ar.IMAGE,{width:Hl.width,height:Hl.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+vt+")"},this.zoomInGroup).setAttributeNS(iu,"xlink:href",this.workspace.options.pathToMedia+Hl.url),this.onZoomInWrapper=Zt(this.zoomInGroup,"pointerdown",null,this.zoom.bind(this,1))}zoom(vt,Et){this.workspace.markFocused(),this.workspace.zoomCenter(vt),this.fireZoomEvent(),Ct(),Et.stopPropagation(),Et.preventDefault()}createZoomResetSvg(vt){this.zoomResetGroup=In(ar.G,{class:"blocklyZoom"},this.svgGroup);const Et=In(ar.CLIPPATH,{id:"blocklyZoomresetClipPath"+vt},this.zoomResetGroup);In(ar.RECT,{width:32,height:32},Et),In(ar.IMAGE,{width:Hl.width,height:Hl.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+vt+")"},this.zoomResetGroup).setAttributeNS(iu,"xlink:href",this.workspace.options.pathToMedia+Hl.url),this.onZoomResetWrapper=Zt(this.zoomResetGroup,"pointerdown",null,this.resetZoom.bind(this))}resetZoom(vt){this.workspace.markFocused();const Et=Math.log(this.workspace.options.zoomOptions.startScale/this.workspace.scale)/Math.log(this.workspace.options.zoomOptions.scaleSpeed);this.workspace.beginCanvasTransition(),this.workspace.zoomCenter(Et),this.workspace.scrollCenter(),setTimeout(this.workspace.endCanvasTransition.bind(this.workspace),500),this.fireZoomEvent(),Ct(),vt.stopPropagation(),vt.preventDefault()}fireZoomEvent(){const vt=new(Vr(vm))(null,this.workspace.id,"zoom_controls");Fr(vt)}};uu(`
.blocklyZoom>image, .blocklyZoom>svg>image {
  opacity: .4;
}

.blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {
  opacity: .6;
}

.blocklyZoom>image:active, .blocklyZoom>svg>image:active {
  opacity: .8;
}
`);var yx=20,_d=class extends zp{constructor(vt,Et,Dt){super(vt),this.resizeHandlerWrapper=null,this.resizesEnabled=this.isVisible_=this.rendered=!0,this.startScrollY=this.startScrollX=this.scrollY=this.scrollX=0,this.dragDeltaXY=null,this.oldScale=this.scale=1,this.oldLeft=this.oldTop=0,this.workspaceDragSurface=this.blockDragSurface=this.currentGesture_=this.toolbox_=this.flyout=this.scrollbar=this.trashcan=null,this.isDragSurfaceActive=!1,this.inverseScreenCTM=this.targetWorkspace=this.configureContextMenu=this.lastRecordedPageScroll=this.injectionDiv=null,this.inverseScreenCTMDirty=!0,this.highlightedBlocks=[],this.toolboxCategoryCallbacks=new Map,this.flyoutButtonCallbacks=new Map,this.cachedParentSvg=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements=[],this.dragTargetAreas=[],this.zoomControls_=null,this.metricsManager=new(bo(Wr.METRICS_MANAGER,vt,!0))(this),this.getMetrics=vt.getMetrics||this.metricsManager.getMetrics.bind(this.metricsManager),this.setMetrics=vt.setMetrics||_d.setTopLevelWorkspaceMetrics_,this.componentManager=new Ks,this.connectionDBList=AO.init(this.connectionChecker),Et&&(this.blockDragSurface=Et),Dt&&(this.workspaceDragSurface=Dt),this.useWorkspaceDragSurface=!!this.workspaceDragSurface,this.audioManager=new JT(vt.parentWorkspace),this.grid=this.options.gridPattern?new m$(this.options.gridPattern,vt.gridOptions):null,this.markerManager=new Zy(this),lt.module$build$src$core$variables&&Xp&&this.registerToolboxCategoryCallback(Lv,Xp),Tm&&t_&&this.registerToolboxCategoryCallback(E$,t_),lt.module$build$src$core$procedures&&hm&&(this.registerToolboxCategoryCallback(Yv,hm),this.addChangeListener(vs)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new qT(this,this.options.theme||Wv),this.themeManager_.subscribeWorkspace(this);let Ft;this.renderer=nO(this.options.renderer||"geras",this.getTheme(),(Ft=this.options.rendererOverrides)!=null?Ft:void 0),this.cachedParentSvgSize=new qs(0,0)}getMarkerManager(){return this.markerManager}getMetricsManager(){return this.metricsManager}setMetricsManager(vt){this.metricsManager=vt,this.getMetrics=this.metricsManager.getMetrics.bind(this.metricsManager)}getComponentManager(){return this.componentManager}setCursorSvg(vt){this.markerManager.setCursorSvg(vt)}setMarkerSvg(vt){this.markerManager.setMarkerSvg(vt)}getMarker(vt){return this.markerManager?this.markerManager.getMarker(vt):null}getCursor(){return this.markerManager?this.markerManager.getCursor():null}getRenderer(){return this.renderer}getThemeManager(){return this.themeManager_}getTheme(){return this.themeManager_.getTheme()}setTheme(vt){vt||(vt=Wv),this.themeManager_.setTheme(vt)}refreshTheme(){this.svgGroup_&&this.renderer.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(Et){return!!Et.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);const vt=new(Vr(Hy))(this.getTheme().name,this.id);Fr(vt)}updateBlockStyles_(vt){for(let Et=0,Dt;Dt=vt[Et];Et++){const Ft=Dt.getStyleName();if(Ft){const Kt=Dt;Kt.setStyle(Ft),Kt.mutator&&Kt.mutator.updateBlockStyle()}}}getInverseScreenCTM(){if(this.inverseScreenCTMDirty){const vt=this.getParentSvg().getScreenCTM();vt&&(this.inverseScreenCTM=vt.inverse(),this.inverseScreenCTMDirty=!1)}return this.inverseScreenCTM}updateInverseScreenCTM(){this.inverseScreenCTMDirty=!0}isVisible(){return this.isVisible_}getSvgXY(vt){let Et=0,Dt=0,Ft=1;(Kr(this.getCanvas(),vt)||Kr(this.getBubbleCanvas(),vt))&&(Ft=this.scale);do{const Kt=Pl(vt);(vt===this.getCanvas()||vt===this.getBubbleCanvas())&&(Ft=1),Et+=Kt.x*Ft,Dt+=Kt.y*Ft,vt=vt.parentNode}while(vt&&vt!==this.getParentSvg());return new Zr(Et,Dt)}getCachedParentSvgSize(){const vt=this.cachedParentSvgSize;return new qs(vt.width,vt.height)}getOriginOffsetInPixels(){return x_(this.getCanvas())}getInjectionDiv(){if(!this.injectionDiv){let vt=this.svgGroup_;for(;vt;){if((" "+(vt.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!==-1){this.injectionDiv=vt;break}vt=vt.parentNode}}return this.injectionDiv}getBlockCanvas(){return this.svgBlockCanvas_}setResizeHandlerWrapper(vt){this.resizeHandlerWrapper=vt}createDom(vt){return this.svgGroup_=In(ar.G,{class:"blocklyWorkspace"}),vt&&(this.svgBackground_=In(ar.RECT,{height:"100%",width:"100%",class:vt},this.svgGroup_),vt==="blocklyMainBackground"&&this.grid?this.svgBackground_.style.fill="url(#"+this.grid.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=In(ar.G,{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=In(ar.G,{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||(Zt(this.svgGroup_,"pointerdown",this,this.onMouseDown_,!1),document.body.addEventListener("wheel",function(){}),Zt(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(bo(Wr.TOOLBOX,this.options,!0))(this)),this.grid&&this.grid.update(this.scale),this.recordDragTargets(),(vt=bo(Wr.CURSOR,this.options))&&this.markerManager.setCursor(new vt),this.renderer.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_}dispose(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&br(this.svgGroup_),this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout&&(this.flyout.dispose(),this.flyout=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&this.zoomControls_.dispose(),this.audioManager&&this.audioManager.dispose(),this.grid&&(this.grid=null),this.renderer.dispose(),this.markerManager&&this.markerManager.dispose(),super.dispose(),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||this.themeManager_.dispose()),this.connectionDBList.length=0,this.toolboxCategoryCallbacks.clear(),this.flyoutButtonCallbacks.clear(),!this.options.parentWorkspace){const vt=this.getParentSvg();vt&&vt.parentNode&&br(vt.parentNode)}this.resizeHandlerWrapper&&(cn(this.resizeHandlerWrapper),this.resizeHandlerWrapper=null)}addTrashcan(){this.trashcan=_d.newTrashcan(this);const vt=this.trashcan.createDom();this.svgGroup_.insertBefore(vt,this.svgBlockCanvas_)}static newTrashcan(vt){throw Error("The implementation of newTrashcan should be monkey-patched in by blockly.ts")}addZoomControls(){this.zoomControls_=new eE(this);const vt=this.zoomControls_.createDom();this.svgGroup_.appendChild(vt)}addFlyout(vt){const Et=new Ju({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return Et.toolboxPosition=this.options.toolboxPosition,this.flyout=this.horizontalLayout?new(bo(Wr.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(Et):new(bo(Wr.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(Et),this.flyout.autoClose=!1,this.flyout.getWorkspace().setVisible(!0),this.flyout.createDom(vt)}getFlyout(vt){return this.flyout||vt?this.flyout:this.toolbox_?this.toolbox_.getFlyout():null}getToolbox(){return this.toolbox_}updateScreenCalculations_(){this.updateInverseScreenCTM(),this.recordDragTargets()}resizeContents(){this.resizesEnabled&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())}resize(){this.toolbox_&&this.toolbox_.position(),this.flyout&&this.flyout.position();const vt=this.componentManager.getComponents(Ks.Capability.POSITIONABLE,!0),Et=this.getMetricsManager().getUiMetrics(),Dt=[];for(let Ft=0,Kt;Kt=vt[Ft];Ft++){Kt.position(Et,Dt);const yn=Kt.getBoundingRectangle();yn&&Dt.push(yn)}this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()}updateScreenCalculationsIfScrolled(){const vt=qp();Zr.equals(this.lastRecordedPageScroll,vt)||(this.lastRecordedPageScroll=vt,this.updateScreenCalculations_())}getCanvas(){return this.svgBlockCanvas_}setCachedParentSvgSize(vt,Et){const Dt=this.getParentSvg();vt!=null&&(this.cachedParentSvgSize.width=vt,Dt.setAttribute("data-cached-width",vt.toString())),Et!=null&&(this.cachedParentSvgSize.height=Et,Dt.setAttribute("data-cached-height",Et.toString()))}getBubbleCanvas(){return this.svgBubbleCanvas_}getParentSvg(){if(!this.cachedParentSvg){let vt=this.svgGroup_;for(;vt;){if(vt.tagName==="svg"){this.cachedParentSvg=vt;break}vt=vt.parentNode}}return this.cachedParentSvg}maybeFireViewportChangeEvent(){if(os()){var vt=this.scale,Et=-this.scrollY,Dt=-this.scrollX;if(!(vt===this.oldScale&&1>Math.abs(Et-this.oldTop)&&1>Math.abs(Dt-this.oldLeft))){var Ft=new(Vr(c_))(Et,Dt,vt,this.id,this.oldScale);this.oldScale=vt,this.oldTop=Et,this.oldLeft=Dt,Fr(Ft)}}}translate(vt,Et){if(this.useWorkspaceDragSurface&&this.isDragSurfaceActive){var Dt;(Dt=this.workspaceDragSurface)==null||Dt.translateSurface(vt,Et)}else Dt="translate("+vt+","+Et+") scale("+this.scale+")",this.svgBlockCanvas_.setAttribute("transform",Dt),this.svgBubbleCanvas_.setAttribute("transform",Dt);this.blockDragSurface&&this.blockDragSurface.translateAndScaleGroup(vt,Et,this.scale),this.grid&&this.grid.moveTo(vt,Et),this.maybeFireViewportChangeEvent()}resetDragSurface(){if(this.useWorkspaceDragSurface){this.isDragSurfaceActive=!1;var vt=this.workspaceDragSurface.getSurfaceTranslation();this.workspaceDragSurface.clearAndHide(this.svgGroup_),vt="translate("+vt.x+","+vt.y+") scale("+this.scale+")",this.svgBlockCanvas_.setAttribute("transform",vt),this.svgBubbleCanvas_.setAttribute("transform",vt)}}setupDragSurface(){if(this.useWorkspaceDragSurface&&!this.isDragSurfaceActive){this.isDragSurfaceActive=!0;var vt=this.svgBlockCanvas_.previousSibling,Et,Dt=parseInt((Et=this.getParentSvg().getAttribute("width"))!=null?Et:"0"),Ft;Et=parseInt((Ft=this.getParentSvg().getAttribute("height"))!=null?Ft:"0"),Ft=Pl(this.getCanvas()),this.workspaceDragSurface.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),vt,Dt,Et,this.scale),this.workspaceDragSurface.translateSurface(Ft.x,Ft.y)}}getBlockDragSurface(){return this.blockDragSurface}getWidth(){const vt=this.getMetrics();return vt?vt.viewWidth/this.scale:0}setVisible(vt){if(this.isVisible_=vt,this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible(vt),this.getFlyout()&&this.getFlyout().setContainerVisible(vt),this.getParentSvg().style.display=vt?"block":"none",this.toolbox_&&this.toolbox_.setVisible(vt),vt){vt=this.getAllBlocks(!1);for(let Et=vt.length-1;0<=Et;Et--)vt[Et].markDirty();this.render(),this.toolbox_&&this.toolbox_.position()}else this.hideChaff(!0)}render(){for(var vt=this.getAllBlocks(!1),Et=vt.length-1;0<=Et;Et--)vt[Et].render(!1);if(this.currentGesture_)for(vt=this.currentGesture_.getInsertionMarkers(),Et=0;Et<vt.length;Et++)vt[Et].render(!1);this.markerManager.updateMarkers()}highlightBlock(vt,Et){if(Et===void 0){for(let Dt=0,Ft;Ft=this.highlightedBlocks[Dt];Dt++)Ft.setHighlighted(!1);this.highlightedBlocks.length=0}(vt=vt?this.getBlockById(vt):null)&&((Et=Et===void 0||Et)?this.highlightedBlocks.indexOf(vt)===-1&&this.highlightedBlocks.push(vt):xa(this.highlightedBlocks,vt),vt.setHighlighted(Et))}paste(vt){if(!this.rendered||!vt.type&&!vt.tagName)return null;this.currentGesture_&&this.currentGesture_.cancel();const Et=Ro();return Et||io(!0),vt=vt.type?this.pasteBlock_(null,vt):vt.tagName.toLowerCase()==="comment"?this.pasteWorkspaceComment_(vt):this.pasteBlock_(vt,null),io(Et),vt}pasteBlock_(vt,Et){Bo();let Dt;try{let Ft=0,Kt=0;if(vt){Dt=Fu(vt,this);let yn;Ft=parseInt((yn=vt.getAttribute("x"))!=null?yn:"0"),this.RTL&&(Ft=-Ft);let Mn;Kt=parseInt((Mn=vt.getAttribute("y"))!=null?Mn:"0")}else Et&&(Dt=np(Et,this),Ft=Et.x||10,this.RTL&&(Ft=this.getWidth()-Ft),Kt=Et.y||10);if(!isNaN(Ft)&&!isNaN(Kt)){let yn;do{yn=!1;const Mn=this.getAllBlocks(!1);for(let qn=0,Cr;Cr=Mn[qn];qn++){const qr=Cr.getRelativeToSurfaceXY();if(1>=Math.abs(Ft-qr.x)&&1>=Math.abs(Kt-qr.y)){yn=!0;break}}if(!yn){const qn=Dt.getConnections_(!1);for(let Cr=0,qr;qr=qn[Cr];Cr++)if(qr.closest(lt.config$$module$build$src$core$config.snapRadius,new Zr(Ft,Kt)).connection){yn=!0;break}}yn&&(Ft=this.RTL?Ft-lt.config$$module$build$src$core$config.snapRadius:Ft+lt.config$$module$build$src$core$config.snapRadius,Kt+=2*lt.config$$module$build$src$core$config.snapRadius)}while(yn);Dt.moveTo(new Zr(Ft,Kt))}}finally{yo()}return os()&&!Dt.isShadow()&&Fr(new(Vr($l))(Dt)),Dt.select(),Dt}pasteWorkspaceComment_(vt){Bo();let Et;try{Et=Al.fromXmlRendered(vt,this);let Dt,Ft=parseInt((Dt=vt.getAttribute("x"))!=null?Dt:"0"),Kt,yn=parseInt((Kt=vt.getAttribute("y"))!=null?Kt:"0");isNaN(Ft)||isNaN(yn)||(this.RTL&&(Ft=-Ft),Et.moveBy(Ft+50,yn+50))}finally{yo()}return os()&&mp.fireCreateEvent(Et),Et.select(),Et}refreshToolboxSelection(){const vt=this.isFlyout?this.targetWorkspace:this;vt&&!vt.currentGesture_&&vt.toolbox_&&vt.toolbox_.getFlyout()&&vt.toolbox_.refreshSelection()}renameVariableById(vt,Et){super.renameVariableById(vt,Et),this.refreshToolboxSelection()}deleteVariableById(vt){super.deleteVariableById(vt),this.refreshToolboxSelection()}createVariable(vt,Et,Dt){return vt=super.createVariable(vt,Et,Dt),this.refreshToolboxSelection(),vt}recordDragTargets(){const vt=this.componentManager.getComponents(Ks.Capability.DRAG_TARGET,!0);this.dragTargetAreas=[];for(let Et=0,Dt;Dt=vt[Et];Et++){const Ft=Dt.getClientRect();Ft&&this.dragTargetAreas.push({component:Dt,clientRect:Ft})}}newBlock(vt,Et){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}getDragTarget(vt){for(let Et=0,Dt;Dt=this.dragTargetAreas[Et];Et++)if(Dt.clientRect.contains(vt.clientX,vt.clientY))return Dt.component;return null}onMouseDown_(vt){const Et=this.getGesture(vt);Et&&Et.handleWsStart(vt,this)}startDrag(vt,Et){vt=dn(vt,this.getParentSvg(),this.getInverseScreenCTM()),vt.x/=this.scale,vt.y/=this.scale,this.dragDeltaXY=Zr.difference(Et,vt)}moveDrag(vt){return vt=dn(vt,this.getParentSvg(),this.getInverseScreenCTM()),vt.x/=this.scale,vt.y/=this.scale,Zr.sum(this.dragDeltaXY,vt)}isDragging(){return this.currentGesture_!==null&&this.currentGesture_.isDragging()}isDraggable(){return this.options.moveOptions&&this.options.moveOptions.drag}isMovable(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch}isMovableHorizontally(){const vt=!!this.scrollbar;return this.isMovable()&&(!vt||vt&&this.scrollbar.canScrollHorizontally())}isMovableVertically(){const vt=!!this.scrollbar;return this.isMovable()&&(!vt||vt&&this.scrollbar.canScrollVertically())}onMouseWheel_(vt){if(gp.inProgress())vt.preventDefault(),vt.stopPropagation();else{var Et=this.options.zoomOptions&&this.options.zoomOptions.wheel,Dt=this.options.moveOptions&&this.options.moveOptions.wheel;if(Et||Dt){var Ft=gn(vt);if(Oo)var Kt=vt.metaKey;Et&&(vt.ctrlKey||Kt||!Dt)?(Ft=-Ft.y/50,Et=dn(vt,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(Et.x,Et.y,Ft)):(Et=this.scrollX-Ft.x,Dt=this.scrollY-Ft.y,vt.shiftKey&&!Ft.x&&(Et=this.scrollX-Ft.y,Dt=this.scrollY),this.scroll(Et,Dt)),vt.preventDefault()}}}getBlocksBoundingBox(){const vt=this.getTopBoundedElements();if(!vt.length)return new xs(0,0,0,0);const Et=vt[0].getBoundingRectangle();for(let Ft=1;Ft<vt.length;Ft++){var Dt=vt[Ft];Dt.isInsertionMarker&&Dt.isInsertionMarker()||(Dt=Dt.getBoundingRectangle(),Dt.top<Et.top&&(Et.top=Dt.top),Dt.bottom>Et.bottom&&(Et.bottom=Dt.bottom),Dt.left<Et.left&&(Et.left=Dt.left),Dt.right>Et.right&&(Et.right=Dt.right))}return Et}cleanUp(){this.setResizesEnabled(!1),io(!0);const vt=this.getTopBlocks(!0);let Et=0;for(let Dt=0,Ft;Ft=vt[Dt];Dt++){if(!Ft.isMovable())continue;const Kt=Ft.getRelativeToSurfaceXY();Ft.moveBy(-Kt.x,Et-Kt.y),Ft.snapToGrid(),Et=Ft.getRelativeToSurfaceXY().y+Ft.getHeightWidth().height+this.renderer.getConstants().MIN_BLOCK_HEIGHT}io(!1),this.setResizesEnabled(!0)}showContextMenu(vt){if(!this.options.readOnly&&!this.isFlyout){var Et=Ko.registry.getContextMenuOptions(Ko.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(Et,vt),ip(vt,Et,this.RTL)}}updateToolbox(vt){if(vt=im(vt)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(_u(vt)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=vt,this.toolbox_.render(vt)}else{if(!this.flyout)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=vt,this.flyout.show(vt)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")}markFocused(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(Rn(this),this.setBrowserFocus())}setBrowserFocus(){document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch{try{this.getParentSvg().parentElement.setActive()}catch{this.getParentSvg().parentElement.focus({preventScroll:!0})}}}zoom(vt,Et,Dt){Dt=Math.pow(this.options.zoomOptions.scaleSpeed,Dt);const Ft=this.scale*Dt;if(this.scale!==Ft){Ft>this.options.zoomOptions.maxScale?Dt=this.options.zoomOptions.maxScale/this.scale:Ft<this.options.zoomOptions.minScale&&(Dt=this.options.zoomOptions.minScale/this.scale);var Kt=this.getCanvas().getCTM(),yn=this.getParentSvg().createSVGPoint();yn.x=vt,yn.y=Et,yn=yn.matrixTransform(Kt.inverse()),vt=yn.x,Et=yn.y,Kt=Kt.translate(vt*(1-Dt),Et*(1-Dt)).scale(Dt),this.scrollX=Kt.e,this.scrollY=Kt.f,this.setScale(Ft)}}zoomCenter(vt){var Et=this.getMetrics();let Dt;this.flyout?(Dt=Et.svgWidth?Et.svgWidth/2:0,Et=Et.svgHeight?Et.svgHeight/2:0):(Dt=Et.viewWidth/2+Et.absoluteLeft,Et=Et.viewHeight/2+Et.absoluteTop),this.zoom(Dt,Et,vt)}zoomToFit(){if(this.isMovable()){var vt=this.getMetrics(),Et=vt.viewWidth;vt=vt.viewHeight;var Dt=this.getBlocksBoundingBox(),Ft=2*yx,Kt=Dt.right-Dt.left+Ft;if(Dt=Dt.bottom-Dt.top+Ft,Kt){this.flyout&&(this.horizontalLayout?(vt+=this.flyout.getHeight(),Dt+=this.flyout.getHeight()/this.scale):(Et+=this.flyout.getWidth(),Kt+=this.flyout.getWidth()/this.scale)),Et/=Kt,vt/=Dt,Bo();try{this.setScale(Math.min(Et,vt)),this.scrollCenter()}finally{yo()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}beginCanvasTransition(){ir(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),ir(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")}endCanvasTransition(){Jn(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),Jn(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")}scrollCenter(){if(this.isMovable()){var vt=this.getMetrics(),Et=(vt.scrollWidth-vt.viewWidth)/2,Dt=(vt.scrollHeight-vt.viewHeight)/2;Et=-Et-vt.scrollLeft,Dt=-Dt-vt.scrollTop,this.scroll(Et,Dt)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}centerOnBlock(vt){if(this.isMovable()){if(vt=vt?this.getBlockById(vt):null){var Et=vt.getRelativeToSurfaceXY(),Dt=vt.getHeightWidth(),Ft=this.scale;vt=(Et.x+(this.RTL?-1:1)*Dt.width/2)*Ft,Et=(Et.y+Dt.height/2)*Ft,Dt=this.getMetrics(),this.scroll(-(vt-Dt.viewWidth/2),-(Et-Dt.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}setScale(vt){this.options.zoomOptions.maxScale&&vt>this.options.zoomOptions.maxScale?vt=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&vt<this.options.zoomOptions.minScale&&(vt=this.options.zoomOptions.minScale),this.scale=vt,this.hideChaff(!1),(vt=this.getFlyout(!1))&&vt.isVisible()&&(vt.reflow(),this.recordDragTargets()),this.grid&&this.grid.update(this.scale),vt=this.getMetrics(),this.scrollX-=vt.absoluteLeft,this.scrollY-=vt.absoluteTop,vt.viewLeft+=vt.absoluteLeft,vt.viewTop+=vt.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout?this.scrollbar.resizeView(vt):this.scrollbar.resizeContent(vt))}getScale(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale}scroll(vt,Et){this.hideChaff(!0);const Dt=this.getMetrics();vt=Math.min(vt,-Dt.scrollLeft),Et=Math.min(Et,-Dt.scrollTop);const Ft=Dt.scrollTop+Math.max(0,Dt.scrollHeight-Dt.viewHeight);vt=Math.max(vt,-(Dt.scrollLeft+Math.max(0,Dt.scrollWidth-Dt.viewWidth))),Et=Math.max(Et,-Ft),this.scrollX=vt,this.scrollY=Et,this.scrollbar&&this.scrollbar.set(-(vt+Dt.scrollLeft),-(Et+Dt.scrollTop),!1),vt+=Dt.absoluteLeft,Et+=Dt.absoluteTop,this.translate(vt,Et)}getBlockById(vt){return super.getBlockById(vt)}getAllBlocks(vt){return super.getAllBlocks(vt)}getTopBlocks(vt){return super.getTopBlocks(vt)}addTopBlock(vt){this.addTopBoundedElement(vt),super.addTopBlock(vt)}removeTopBlock(vt){this.removeTopBoundedElement(vt),super.removeTopBlock(vt)}addTopComment(vt){this.addTopBoundedElement(vt),super.addTopComment(vt)}removeTopComment(vt){this.removeTopBoundedElement(vt),super.removeTopComment(vt)}addTopBoundedElement(vt){this.topBoundedElements.push(vt)}removeTopBoundedElement(vt){xa(this.topBoundedElements,vt)}getTopBoundedElements(){return[].concat(this.topBoundedElements)}setResizesEnabled(vt){const Et=!this.resizesEnabled&&vt;this.resizesEnabled=vt,Et&&this.resizeContents()}clear(){this.setResizesEnabled(!1),super.clear(),this.topBoundedElements=[],this.setResizesEnabled(!0)}registerButtonCallback(vt,Et){if(typeof Et!="function")throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks.set(vt,Et)}getButtonCallback(vt){let Et;return(Et=this.flyoutButtonCallbacks.get(vt))!=null?Et:null}removeButtonCallback(vt){this.flyoutButtonCallbacks.delete(vt)}registerToolboxCategoryCallback(vt,Et){if(typeof Et!="function")throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks.set(vt,Et)}getToolboxCategoryCallback(vt){return this.toolboxCategoryCallbacks.get(vt)||null}removeToolboxCategoryCallback(vt){this.toolboxCategoryCallbacks.delete(vt)}getGesture(vt){const Et=vt.type==="pointerdown",Dt=this.currentGesture_;return Dt?Et&&Dt.hasStarted()?(console.warn("Tried to start the same gesture twice."),Dt.cancel(),null):Dt:Et?this.currentGesture_=new gp(vt,this):null}clearGesture(){this.currentGesture_=null}cancelCurrentGesture(){this.currentGesture_&&this.currentGesture_.cancel()}getAudioManager(){return this.audioManager}getGrid(){return this.grid}hideChaff(vt){Dl(),ba(),cs();const Et=!!vt;this.getComponentManager().getComponents(Ks.Capability.AUTOHIDEABLE,!0).forEach(Dt=>Dt.autoHide(Et))}static setTopLevelWorkspaceMetrics_(vt){const Et=this.getMetrics();typeof vt.x=="number"&&(this.scrollX=-(Et.scrollLeft+(Et.scrollWidth-Et.viewWidth)*vt.x)),typeof vt.y=="number"&&(this.scrollY=-(Et.scrollTop+(Et.scrollHeight-Et.viewHeight)*vt.y)),this.translate(this.scrollX+Et.absoluteLeft,this.scrollY+Et.absoluteTop)}},A$={};A$.load=op,A$.save=Ty;var tE=class{constructor(){this.priority=ET}save(vt){const Et=[];for(const Dt of vt.getAllVariables())vt={name:Dt.name,id:Dt.getId()},Dt.type&&(vt.type=Dt.type),Et.push(vt);return Et.length?Et:null}load(vt,Et){for(const Dt of vt)Et.createVariable(Dt.name,Dt.type,Dt.id)}clear(vt){vt.getVariableMap().clear()}};Mp("variables",new tE);var nE={};nE.VariableSerializer=tE;var rE=class{constructor(vt,Et){this.procedureModelClass=vt,this.parameterModelClass=Et,this.priority=xT}save(vt){return vt.getProcedureMap().getProcedures().map(Et=>pm(Et))}load(vt,Et){const Dt=Et.getProcedureMap();for(const Ft of vt)Dt.add(mm(this.procedureModelClass,this.parameterModelClass,Ft,Et))}clear(vt){vt.getProcedureMap().clear()}},vx=new rE(g0,RO),y_={};y_.ProcedureSerializer=rE,y_.loadParameter=Lp,y_.loadProcedure=mm,y_.observableProcedureSerializer=vx,y_.saveParameter=Mu,y_.saveProcedure=pm;var bx={blocks:s0,exceptions:SO,priorities:Qv,procedures:y_,registry:YS,variables:nE,workspaces:A$},iE=class extends b0{constructor(){super(),this.GRID_UNIT=4,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter_=null,this.replacementGlowFilterId="",this.SQUARED=this.ROUNDED=this.HEXAGONAL=this.replacementGlowFilter_=null,this.SMALL_PADDING=this.GRID_UNIT,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT}setFontConstants_(vt){super.setFontConstants_(vt),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING}init(){super.init(),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth}setDynamicProperties_(vt){super.setDynamicProperties_(vt),this.SELECTED_GLOW_COLOUR=vt.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;const Et=Number(vt.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=Et&&!isNaN(Et)?Et:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=vt.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(vt=Number(vt.getComponentStyle("replacementGlowSize")))&&!isNaN(vt)?vt:this.REPLACEMENT_GLOW_SIZE}dispose(){super.dispose(),this.selectedGlowFilter_&&br(this.selectedGlowFilter_),this.replacementGlowFilter_&&br(this.replacementGlowFilter_)}makeStartHat(){const vt=this.START_HAT_HEIGHT,Et=this.START_HAT_WIDTH,Dt=Gl("c",[go(25,-vt),go(71,-vt),go(Et,0)]);return{height:vt,width:Et,path:Dt}}makeHexagonal(){function vt(Dt,Ft,Kt){var yn=Dt/2;return yn=yn>Et?Et:yn,Kt=Kt?-1:1,Dt=(Ft?-1:1)*Dt/2,Ru(-Kt*yn,Dt)+Ru(Kt*yn,Dt)}const Et=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width(Dt){return Dt/=2,Dt>Et?Et:Dt},height(Dt){return Dt},connectionOffsetY(Dt){return Dt/2},connectionOffsetX(Dt){return-Dt},pathDown(Dt){return vt(Dt,!1,!1)},pathUp(Dt){return vt(Dt,!0,!1)},pathRightDown(Dt){return vt(Dt,!1,!0)},pathRightUp(Dt){return vt(Dt,!1,!0)}}}makeRounded(){function vt(Ft,Kt,yn){const Mn=Ft>Dt?Ft-Dt:0;return Ft=(Ft>Dt?Dt:Ft)/2,$s("a","0 0,1",Ft,go((Kt?-1:1)*Ft,(Kt?-1:1)*Ft))+_i("v",(yn?1:-1)*Mn)+$s("a","0 0,1",Ft,go((Kt?1:-1)*Ft,(Kt?-1:1)*Ft))}const Et=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,Dt=2*Et;return{type:this.SHAPES.ROUND,isDynamic:!0,width(Ft){return Ft/=2,Ft>Et?Et:Ft},height(Ft){return Ft},connectionOffsetY(Ft){return Ft/2},connectionOffsetX(Ft){return-Ft},pathDown(Ft){return vt(Ft,!1,!1)},pathUp(Ft){return vt(Ft,!0,!1)},pathRightDown(Ft){return vt(Ft,!1,!0)},pathRightUp(Ft){return vt(Ft,!1,!0)}}}makeSquared(){function vt(Dt,Ft,Kt){return Dt-=2*Et,$s("a","0 0,1",Et,go((Ft?-1:1)*Et,(Ft?-1:1)*Et))+_i("v",(Kt?1:-1)*Dt)+$s("a","0 0,1",Et,go((Ft?1:-1)*Et,(Ft?-1:1)*Et))}const Et=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width(Dt){return Et},height(Dt){return Dt},connectionOffsetY(Dt){return Dt/2},connectionOffsetX(Dt){return-Dt},pathDown(Dt){return vt(Dt,!1,!1)},pathUp(Dt){return vt(Dt,!0,!1)},pathRightDown(Dt){return vt(Dt,!1,!0)},pathRightUp(Dt){return vt(Dt,!1,!0)}}}shapeFor(vt){let Et=vt.getCheck();switch(!Et&&vt.targetConnection&&(Et=vt.targetConnection.getCheck()),vt.type){case no.INPUT_VALUE:case no.OUTPUT_VALUE:if(vt=vt.getSourceBlock().getOutputShape(),vt!==null)switch(vt){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return Et&&Et.indexOf("Boolean")!==-1?this.HEXAGONAL:Et&&Et.indexOf("Number")!==-1?this.ROUNDED:(Et&&Et.indexOf("String"),this.ROUNDED);case no.PREVIOUS_STATEMENT:case no.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}}makeNotch(){function vt(qr){return Gl("c",[go(qr*Kt/2,0),go(qr*Kt*3/4,Mn/2),go(qr*Kt,Mn)])+am([go(qr*Kt,yn)])+Gl("c",[go(qr*Kt/4,Mn/2),go(qr*Kt/2,Mn),go(qr*Kt,Mn)])+_i("h",qr*Ft)+Gl("c",[go(qr*Kt/2,0),go(qr*Kt*3/4,-(Mn/2)),go(qr*Kt,-Mn)])+am([go(qr*Kt,-yn)])+Gl("c",[go(qr*Kt/4,-(Mn/2)),go(qr*Kt/2,-Mn),go(qr*Kt,-Mn)])}const Et=this.NOTCH_WIDTH,Dt=this.NOTCH_HEIGHT,Ft=Et/3,Kt=Ft/3,yn=Dt/2,Mn=yn/2,qn=vt(1),Cr=vt(-1);return{type:this.SHAPES.NOTCH,width:Et,height:Dt,pathLeft:qn,pathRight:Cr}}makeInsideCorners(){const vt=this.CORNER_RADIUS,Et=$s("a","0 0,0",vt,go(-vt,vt)),Dt=$s("a","0 0,1",vt,go(-vt,vt)),Ft=$s("a","0 0,0",vt,go(vt,vt)),Kt=$s("a","0 0,1",vt,go(vt,vt));return{width:vt,height:vt,pathTop:Et,pathBottom:Ft,rightWidth:vt,rightHeight:vt,pathTopRight:Dt,pathBottomRight:Kt}}generateSecondaryColour_(vt){return pu("#000",vt,.15)||vt}generateTertiaryColour_(vt){return pu("#000",vt,.25)||vt}createDom(vt,Et,Dt){super.createDom(vt,Et,Dt),vt=In(ar.DEFS,{},vt),Et=In(ar.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},vt),In(ar.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},Et),Dt=In(ar.FECOMPONENTTRANSFER,{result:"outBlur"},Et),In(ar.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},Dt),In(ar.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},Et),In(ar.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},Et),this.selectedGlowFilterId=Et.id,this.selectedGlowFilter_=Et,vt=In(ar.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},vt),In(ar.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},vt),Et=In(ar.FECOMPONENTTRANSFER,{result:"outBlur"},vt),In(ar.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},Et),In(ar.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},vt),In(ar.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},vt),In(ar.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},vt),this.replacementGlowFilterId=vt.id,this.replacementGlowFilter_=vt}getCSS_(vt){return[`${vt} .blocklyText,`,`${vt} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${vt} .blocklyText {`,"fill: #fff;","}",`${vt} .blocklyNonEditableText>rect:not(.blocklyDropdownRect),`,`${vt} .blocklyEditableText>rect:not(.blocklyDropdownRect) {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"}",`${vt} .blocklyNonEditableText>text,`,`${vt} .blocklyEditableText>text,`,`${vt} .blocklyNonEditableText>g>text,`,`${vt} .blocklyEditableText>g>text {`,"fill: #575E75;","}",`${vt} .blocklyFlyoutLabelText {`,"fill: #575E75;","}",`${vt} .blocklyText.blocklyBubbleText {`,"fill: #575E75;","}",`${vt} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>rect,",`${vt} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",`${vt} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"color: #575E75;","}",`${vt} .blocklyDropdownText {`,"fill: #fff !important;","}",`${vt}.blocklyWidgetDiv .goog-menuitem,`,`${vt}.blocklyDropDownDiv .goog-menuitem {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${vt}.blocklyDropDownDiv .goog-menuitem-content {`,"color: #fff;","}",`${vt} .blocklyHighlightedConnectionPath {`,`stroke: ${this.SELECTED_GLOW_COLOUR};`,"}",`${vt} .blocklyDisabled > .blocklyOutlinePath {`,`fill: url(#blocklyDisabledPattern${this.randomIdentifier})`,"}",`${vt} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},oE=class extends S0{constructor(vt,Et){super(vt,Et)}draw(){const vt=this.block_.pathObject;if(vt.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),vt.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&vt.flipRTL(),Qu()){let Et,Dt;(Et=this.block_)==null||(Dt=Et.renderingDebugger)==null||Dt.drawDebug(this.block_,this.info_)}this.recordSizeOnBlock_(),this.info_.outputConnection&&(vt.outputShapeType=this.info_.outputConnection.shape.type),vt.endDrawing()}drawOutline_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):super.drawOutline_()}drawLeft_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():super.drawLeft_()}drawRightSideRow_(vt){if(!(0>=vt.height))if(tr.isSpacer(vt)&&(vt.precedesStatement||vt.followsStatement)){var Et=this.constants_.INSIDE_CORNERS.rightHeight;Et=vt.height-(vt.precedesStatement?Et:0),this.outlinePath_+=(vt.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(0<Et?_i("V",vt.yPos+Et):"")+(vt.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")}else this.outlinePath_+=_i("V",vt.yPos+vt.height)}drawRightDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)}drawLeftDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"}drawFlatTop_(){const vt=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=as(vt.xPos,this.info_.startY),this.outlinePath_+=_i("h",vt.width)}drawFlatBottom_(){const vt=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=_i("V",vt.baseline),this.outlinePath_+=_i("h",-vt.width)}drawInlineInput_(vt){this.positionInlineInputConnection_(vt);const Et=vt.input.name;if(!vt.connectedBlock&&!this.info_.isInsertionMarker){var Dt=vt.width-2*vt.connectionWidth;vt=Us(vt.xPos+vt.connectionWidth,vt.centerline-vt.height/2)+_i("h",Dt)+vt.shape.pathRightDown(vt.height)+_i("h",-Dt)+vt.shape.pathUp(vt.height)+"z",this.block_.pathObject.setOutlinePath(Et,vt)}}drawStatementInput_(vt){var Et=vt.getLastInput();const Dt=Et.xPos+Et.notchOffset+Et.shape.width,Ft=Et.shape.pathRight+_i("h",-(Et.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,Kt=vt.height-2*this.constants_.INSIDE_CORNERS.height;Et=this.constants_.INSIDE_CORNERS.pathBottom+_i("h",Et.notchOffset-this.constants_.INSIDE_CORNERS.width)+(Et.connectedBottomNextConnection?"":Et.shape.pathLeft),this.outlinePath_+=_i("H",Dt)+Ft+_i("v",Kt)+Et+_i("H",vt.xPos+vt.width),this.positionStatementInputConnection_(vt)}};lt.FieldImage$$module$build$src$core$field_image=class extends Qo{constructor(vt,Et,Dt,Ft,Kt,yn,Mn){if(super(Qo.SKIP_SETUP),this.imageElement_=this.clickHandler_=null,this.flipRtl_=this.isDirty_=this.EDITABLE=!1,this.altText_="",Dt=Number(ds(Dt)),Et=Number(ds(Et)),isNaN(Dt)||isNaN(Et))throw Error("Height and width values of an image field must cast to numbers.");if(0>=Dt||0>=Et)throw Error("Height and width values of an image field must be greater than 0.");this.size_=new qs(Et,Dt+lt.FieldImage$$module$build$src$core$field_image.Y_PADDING),this.imageHeight_=Dt,typeof Kt=="function"&&(this.clickHandler_=Kt),vt!==Qo.SKIP_SETUP&&(Mn?this.configure_(Mn):(this.flipRtl_=!!yn,this.altText_=ds(Ft)||""),this.setValue(ds(vt)))}configure_(vt){super.configure_(vt),vt.flipRtl&&(this.flipRtl_=vt.flipRtl),vt.alt&&(this.altText_=ds(vt.alt))}initView(){this.imageElement_=In(ar.IMAGE,{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(iu,"xlink:href",this.value_),this.clickHandler_&&(this.imageElement_.style.cursor="pointer")}updateSize_(){}doClassValidation_(vt){return typeof vt!="string"?null:vt}doValueUpdate_(vt){this.value_=vt,this.imageElement_&&this.imageElement_.setAttributeNS(iu,"xlink:href",String(this.value_))}getFlipRtl(){return this.flipRtl_}setAlt(vt){vt!==this.altText_&&(this.altText_=vt||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))}showEditor_(){this.clickHandler_&&this.clickHandler_(this)}setOnClickHandler(vt){this.clickHandler_=vt}getText_(){return this.altText_}static fromJson(vt){if(!vt.src||!vt.width||!vt.height)throw Error("src, width, and height values for an image field arerequired. The width and height must be non-zero.");return new this(vt.src,vt.width,vt.height,void 0,void 0,void 0,vt)}},lt.FieldImage$$module$build$src$core$field_image.Y_PADDING=1,$a("field_image",lt.FieldImage$$module$build$src$core$field_image),lt.FieldImage$$module$build$src$core$field_image.prototype.DEFAULT_VALUE="",lt.FieldImage$$module$build$src$core$field_image;var T0=class extends Qo{constructor(vt,Et,Dt){super(Qo.SKIP_SETUP),this.spellcheck_=!0,this.htmlInput_=null,this.isTextValid_=this.isBeingEdited_=!1,this.onKeyInputWrapper_=this.onKeyDownWrapper_=null,this.fullBlockClickTarget_=!1,this.workspace_=null,this.SERIALIZABLE=!0,this.CURSOR="text",vt!==Qo.SKIP_SETUP&&(Dt&&this.configure_(Dt),this.setValue(vt),Et&&this.setValidator(Et))}configure_(vt){super.configure_(vt),vt.spellcheck!==void 0&&(this.spellcheck_=vt.spellcheck)}initView(){const vt=this.getSourceBlock();if(!vt)throw new Ls;if(this.getConstants().FULL_BLOCK_FIELDS){let Et=0,Dt=0;for(let Ft=0,Kt;Kt=vt.inputList[Ft];Ft++){for(let yn=0;Kt.fieldRow[yn];yn++)Et++;Kt.connection&&Dt++}this.fullBlockClickTarget_=1>=Et&&vt.outputConnection&&!Dt}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()}doClassValidation_(vt){return vt==null?null:String(vt)}doValueInvalid_(vt){this.isBeingEdited_&&(this.isDirty_=!0,this.isTextValid_=!1,vt=this.value_,this.value_=this.htmlInput_.getAttribute("data-untyped-default-value"),this.sourceBlock_&&os()&&Fr(new(Vr(Qs))(this.sourceBlock_,"field",this.name||null,vt,this.value_)))}doValueUpdate_(vt){this.isTextValid_=this.isDirty_=!0,this.value_=vt}applyColour(){if(this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS){var vt=this.sourceBlock_;this.borderRect_?this.borderRect_.setAttribute("stroke",vt.style.colourTertiary):vt.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR)}}render_(){if(super.render_(),this.isBeingEdited_){this.resizeEditor_();const vt=this.htmlInput_;this.isTextValid_?(Jn(vt,"blocklyInvalidInput"),ts(vt,ps.INVALID,!1)):(ir(vt,"blocklyInvalidInput"),ts(vt,ps.INVALID,!0))}}setSpellcheck(vt){vt!==this.spellcheck_&&(this.spellcheck_=vt,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))}showEditor_(vt,Et){this.workspace_=this.sourceBlock_.workspace,vt=Et||!1,!vt&&this.workspace_.options.modalInputs&&(Bs||Io||vo)?this.showPromptEditor_():this.showInlineEditor_(vt)}showPromptEditor_(){LO($o.CHANGE_VALUE_TITLE,this.getText(),vt=>{vt!==null&&this.setValue(this.getValueFromEditorText_(vt))})}showInlineEditor_(vt){const Et=this.getSourceBlock();if(!Et)throw new Ls;Ap(this,Et.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,vt||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())}widgetCreate_(){var vt=this.getSourceBlock();if(!vt)throw new Ls;io(!0);const Et=Cp();var Dt=this.getClickTarget_();if(!Dt)throw Error("A click target has not been set.");ir(Dt,"editing"),Dt=document.createElement("input"),Dt.className="blocklyHtmlInput",Dt.setAttribute("spellcheck",this.spellcheck_);const Ft=this.workspace_.getScale();var Kt=this.getConstants().FIELD_TEXT_FONTSIZE*Ft+"pt";return Et.style.fontSize=Kt,Dt.style.fontSize=Kt,Kt=T0.BORDERRADIUS*Ft+"px",this.fullBlockClickTarget_&&(Kt=this.getScaledBBox(),Kt=(Kt.bottom-Kt.top)/2+"px",vt=vt.getParent()?vt.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary,Dt.style.border=1*Ft+"px solid "+vt,Et.style.borderRadius=Kt,Et.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(Et.style.boxShadow="rgba(255, 255, 255, 0.3) 0 0 0 "+4*Ft+"px")),Dt.style.borderRadius=Kt,Et.appendChild(Dt),Dt.value=Dt.defaultValue=this.getEditorText_(this.value_),Dt.setAttribute("data-untyped-default-value",this.value_),this.resizeEditor_(),this.bindInputEvents_(Dt),Dt}widgetDispose_(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_(this.value_),io(!1),this.unbindInputEvents_();var vt=Cp().style;if(vt.width="auto",vt.height="auto",vt.fontSize="",vt.transition="",vt.boxShadow="",this.htmlInput_=null,vt=this.getClickTarget_(),!vt)throw Error("A click target has not been set.");Jn(vt,"editing")}onFinishEditing_(vt){}bindInputEvents_(vt){this.onKeyDownWrapper_=Zt(vt,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=Zt(vt,"input",this,this.onHtmlInputChange_)}unbindInputEvents_(){this.onKeyDownWrapper_&&(cn(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(cn(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)}onHtmlInputKeyDown_(vt){vt.keyCode===lo.ENTER?(ba(),cs()):vt.keyCode===lo.ESC?(this.setValue(this.htmlInput_.getAttribute("data-untyped-default-value")),ba(),cs()):vt.keyCode===lo.TAB&&(ba(),cs(),this.sourceBlock_.tab(this,!vt.shiftKey),vt.preventDefault())}onHtmlInputChange_(vt){this.setValue(this.getValueFromEditorText_(this.htmlInput_.value))}setEditorValue_(vt){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(vt)),this.setValue(vt)}resizeEditor_(){var vt=this.getSourceBlock();if(!vt)throw new Ls;const Et=Cp(),Dt=this.getScaledBBox();Et.style.width=Dt.right-Dt.left+"px",Et.style.height=Dt.bottom-Dt.top+"px",vt=new Zr(vt.RTL?Dt.right-Et.offsetWidth:Dt.left,Dt.top),Et.style.left=vt.x+"px",Et.style.top=vt.y+"px"}isTabNavigable(){return!0}getText_(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null}getEditorText_(vt){return String(vt)}getValueFromEditorText_(vt){return vt}};T0.BORDERRADIUS=4,lt.FieldTextInput$$module$build$src$core$field_textinput=class extends T0{constructor(vt,Et,Dt){super(vt,Et,Dt)}static fromJson(vt){return new this(ds(vt.text),void 0,vt)}},$a("field_input",lt.FieldTextInput$$module$build$src$core$field_textinput),lt.FieldTextInput$$module$build$src$core$field_textinput.prototype.DEFAULT_VALUE="",lt.FieldTextInput$$module$build$src$core$field_textinput;var sE=class extends _${constructor(vt){super(vt)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(vt){return!!vt.outputConnection}hasRightSquareCorner(vt){return!!vt.outputConnection&&!vt.statementInputCount&&!vt.nextConnection}},aE=class extends O0{constructor(vt,Et){if(super(vt,Et),this.connectedBottomNextConnection=!1,this.connectedBlock){for(vt=this.connectedBlock;Et=vt.getNextBlock();)vt=Et;vt.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}}},lE=class extends yp{constructor(vt){super(vt),this.width=this.height=0,this.type|=tr.getType("RIGHT_CONNECTION")}},cE=class extends S${constructor(vt){super(vt)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(vt){const Et=(vt.hat?vt.hat==="cap":this.constants_.ADD_START_HATS)&&!vt.outputConnection&&!vt.previousConnection;return!!vt.outputConnection||Et}hasRightSquareCorner(vt){return!!vt.outputConnection&&!vt.statementInputCount&&!vt.nextConnection}},uE=class extends IO{constructor(vt,Et){super(vt,Et),this.isInline=!0,this.renderer_=vt,this.constants_=this.renderer_.getConstants(),this.topRow=new cE(this.constants_),this.bottomRow=new sE(this.constants_),this.isMultiRow=!Et.getInputsInline()||Et.isCollapsed(),this.hasStatementInput=0<Et.statementInputCount,this.rightSide=this.outputConnection?new lE(this.constants_):null,this.rightAlignedDummyInputs_=new WeakMap}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}shouldStartNewRow_(vt,Et){return Et?vt.type===Do.STATEMENT||Et.type===Do.STATEMENT?!0:vt.type===Do.VALUE||vt.type===Do.DUMMY?!this.isInline||this.isMultiRow:!1:!1}getDesiredRowWidth_(vt){return vt.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):super.getDesiredRowWidth_(vt)}getInRowSpacing_(vt,Et){return vt&&Et||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!vt&&Et&&tr.isStatementInput(Et)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:vt&&tr.isLeftRoundedCorner(vt)&&Et&&(tr.isPreviousConnection(Et)||tr.isNextConnection(Et))?Et.notchOffset-this.constants_.CORNER_RADIUS:vt&&tr.isLeftSquareCorner(vt)&&Et&&tr.isHat(Et)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING}getSpacerRowHeight_(vt,Et){if(tr.isTopRow(vt)&&tr.isBottomRow(Et))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;const Dt=tr.isInputRow(vt)&&vt.hasStatement,Ft=tr.isInputRow(Et)&&Et.hasStatement;return Ft||Dt?(vt=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),Ft&&Dt?Math.max(vt,this.constants_.DUMMY_INPUT_MIN_HEIGHT):vt):tr.isTopRow(vt)?vt.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):tr.isBottomRow(Et)?this.outputConnection?!Et.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}getSpacerRowWidth_(vt,Et){const Dt=this.width-this.startX;return tr.isInputRow(vt)&&vt.hasStatement||tr.isInputRow(Et)&&Et.hasStatement?Math.max(Dt,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):Dt}getElemCenterline_(vt,Et){if(vt.hasStatement&&!tr.isSpacer(Et)&&!tr.isStatementInput(Et))return vt.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(tr.isInlineInput(Et)&&Et instanceof Hp){const Dt=Et.connectedBlock;if(Dt&&Dt.outputConnection&&Dt.nextConnection)return vt.yPos+Dt.height/2}return super.getElemCenterline_(vt,Et)}addInput_(vt,Et){if(vt.type===Do.DUMMY&&Et.hasDummyInput&&Et.align===lt.Align$$module$build$src$core$input.LEFT&&vt.align===lt.Align$$module$build$src$core$input.RIGHT)this.rightAlignedDummyInputs_.set(Et,vt);else if(vt.type===Do.STATEMENT){Et.elements.push(new aE(this.constants_,vt)),Et.hasStatement=!0,Et.align===null&&(Et.align=vt.align);return}super.addInput_(vt,Et)}addAlignmentPadding_(vt,Et){if(this.rightAlignedDummyInputs_.get(vt)){let Dt;for(let Ft=0;Ft<vt.elements.length;Ft++){const Kt=vt.elements[Ft];if(tr.isSpacer(Kt)&&(Dt=Kt),tr.isField(Kt)&&Kt instanceof O_&&Kt.parentInput===this.rightAlignedDummyInputs_.get(vt))break}if(Dt){Dt.width+=Et,vt.width+=Et;return}}super.addAlignmentPadding_(vt,Et)}adjustXPosition_(){const vt=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH;let Et=vt;for(let Kt=2;Kt<this.rows.length-1;Kt+=2){var Dt=this.rows[Kt-1];const yn=this.rows[Kt];var Ft=this.rows[Kt+1];if(Dt=Kt===2?!!this.topRow.hasPreviousConnection:!!Dt.followsStatement,Ft=Kt+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!Ft.precedesStatement,tr.isInputRow(yn)&&yn.hasStatement){yn.measure();let Mn,qn;Et=yn.width-((qn=(Mn=yn.getLastInput())==null?void 0:Mn.width)!=null?qn:0)+vt}else if(Dt&&(Kt===2||Ft)&&tr.isInputRow(yn)&&!yn.hasStatement){Ft=yn.xPos,Dt=null;for(let Mn=0;Mn<yn.elements.length;Mn++){const qn=yn.elements[Mn];tr.isSpacer(qn)&&(Dt=qn),Dt&&(tr.isField(qn)||tr.isInput(qn))&&Ft<Et&&!(tr.isField(qn)&&qn instanceof O_&&(qn.field instanceof lt.FieldLabel$$module$build$src$core$field_label||qn.field instanceof lt.FieldImage$$module$build$src$core$field_image))&&(Dt.width+=Et-Ft),Ft+=qn.width}}}}finalizeOutputConnection_(){if(this.outputConnection&&this.outputConnection.isDynamicShape){var vt=this.outputConnection.shape;if("isDynamic"in vt&&vt.isDynamic){for(var Et=0,Dt=0;Dt<this.rows.length;Dt++){const Ft=this.rows[Dt];Ft.yPos=Et,Et+=Ft.height}this.height=Et,Dt=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,Et=vt.height(Dt),Dt=vt.width(Dt),this.outputConnection.height=Et,this.outputConnection.width=Dt,this.outputConnection.startX=Dt,this.outputConnection.connectionOffsetY=vt.connectionOffsetY(Et),this.outputConnection.connectionOffsetX=vt.connectionOffsetX(Dt),vt=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(vt=Dt,this.rightSide.height=Et,this.rightSide.width=vt,this.rightSide.centerline=Et/2,this.rightSide.xPos=this.width+vt),this.startX=Dt,this.width+=Dt+vt,this.widthWithChildren+=Dt+vt}}}finalizeHorizontalAlignment_(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var vt=0,Et=0;Et<this.rows.length;Et++){var Dt=this.rows[Et];if(!tr.isInputRow(Dt))continue;vt=Dt.elements[Dt.elements.length-2];let Ft=this.getNegativeSpacing_(Dt.elements[1]),Kt=this.getNegativeSpacing_(vt);vt=Ft+Kt;const yn=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-vt<yn&&(vt=this.width-yn,Ft=vt/2,Kt=vt/2),Dt.elements.unshift(new vu(this.constants_,-Ft)),Dt.elements.push(new vu(this.constants_,-Kt))}if(vt)for(this.width-=vt,this.widthWithChildren-=vt,this.rightSide.xPos-=vt,Et=0;Et<this.rows.length;Et++)Dt=this.rows[Et],tr.isTopOrBottomRow(Dt)&&(Dt.elements[1].width-=vt),Dt.width-=vt,Dt.widthWithConnectedBlocks-=vt}}getNegativeSpacing_(vt){if(!vt||!this.outputConnection)return 0;const Et=this.outputConnection.width;var Dt=this.outputConnection.shape.type;const Ft=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)switch(Dt){case Ft.SHAPES.ROUND:return Dt=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,Dt=this.height/2>Dt?Dt:this.height/2,Et-Dt*(1-Math.sin(Math.acos((Dt-this.constants_.SMALL_PADDING)/Dt)));default:return 0}if(tr.isInlineInput(vt)&&vt instanceof Hp){const Kt=vt.connectedBlock;return vt=Kt?Kt.pathObject.outputShapeType:vt.shape.type,vt==null||Kt&&Kt.outputConnection&&(Kt.statementInputCount||Kt.nextConnection)||Dt===Ft.SHAPES.HEXAGONAL&&Dt!==vt?0:Et-this.constants_.SHAPE_IN_SHAPE_PADDING[Dt][vt]}return tr.isField(vt)&&vt instanceof O_?Dt===Ft.SHAPES.ROUND&&vt.field instanceof lt.FieldTextInput$$module$build$src$core$field_textinput?Et-2.75*Ft.GRID_UNIT:Et-this.constants_.SHAPE_IN_SHAPE_PADDING[Dt][0]:tr.isIcon(vt)?this.constants_.SMALL_PADDING:0}finalizeVerticalAlignment_(){if(!this.outputConnection)for(let Ft=2;Ft<this.rows.length-1;Ft+=2){const Kt=this.rows[Ft-1],yn=this.rows[Ft],Mn=this.rows[Ft+1];var vt=Ft===2,Et=Ft+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!Mn.precedesStatement;if(vt?this.topRow.hasPreviousConnection:Kt.followsStatement){var Dt=yn.elements[1];if(Dt=yn.elements.length===3&&Dt instanceof O_&&(Dt.field instanceof lt.FieldLabel$$module$build$src$core$field_label||Dt.field instanceof lt.FieldImage$$module$build$src$core$field_image),!vt&&Dt)Kt.height-=this.constants_.SMALL_PADDING,Mn.height-=this.constants_.SMALL_PADDING,yn.height-=this.constants_.MEDIUM_PADDING;else if(!vt&&!Et)Kt.height+=this.constants_.SMALL_PADDING;else if(Et){for(vt=!1,Et=0;Et<yn.elements.length;Et++)if(Dt=yn.elements[Et],Dt instanceof Hp&&tr.isInlineInput(Dt)&&Dt.connectedBlock&&!Dt.connectedBlock.isShadow()&&40<=Dt.connectedBlock.getHeightWidth().height){vt=!0;break}vt&&(Kt.height-=this.constants_.SMALL_PADDING,Mn.height-=this.constants_.SMALL_PADDING)}}}}finalize_(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),super.finalize_(),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)}},hE=class extends T${constructor(vt,Et,Dt){super(vt,Et,Dt),this.markerCircle_=null}showWithInputOutput_(vt){const Et=vt.getSourceBlock();vt=vt.getLocation().getOffsetInBlock(),this.positionCircle_(vt.x,vt.y),this.setParent_(Et),this.showCurrent_()}showWithOutput_(vt){this.showWithInputOutput_(vt)}showWithInput_(vt){this.showWithInputOutput_(vt)}showWithBlock_(vt){vt=vt.getLocation();const Et=vt.getHeightWidth();this.positionRect_(0,0,Et.width,Et.height),this.setParent_(vt),this.showCurrent_()}positionCircle_(vt,Et){let Dt;(Dt=this.markerCircle_)==null||Dt.setAttribute("cx",vt.toString());let Ft;(Ft=this.markerCircle_)==null||Ft.setAttribute("cy",Et.toString()),this.currentMarkerSvg=this.markerCircle_}hide(){super.hide(),this.markerCircle_&&(this.markerCircle_.style.display="none")}createDomInternal_(){if(super.createDomInternal_(),this.markerCircle_=In(ar.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:"display: none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){const vt=this.getBlinkProperties_();In(ar.ANIMATE,vt,this.markerCircle_)}return this.markerSvg_}applyColour_(vt){super.applyColour_(vt);let Et;(Et=this.markerCircle_)==null||Et.setAttribute("fill",this.colour_);let Dt;if((Dt=this.markerCircle_)==null||Dt.setAttribute("stroke",this.colour_),this.isCursor()){vt=this.colour_+";transparent;transparent;";let Ft;(Ft=this.markerCircle_)==null||Ft.firstElementChild.setAttribute("values",vt)}}},dE=class extends qv{constructor(vt,Et,Dt){super(vt,Et,Dt),this.svgPathSelected_=null,this.outlines=new Map,this.remainingOutlines=new Set,this.outputShapeType=null,this.constants=Dt}setPath(vt){super.setPath(vt),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",vt)}applyColour(vt){super.applyColour(vt);const Et=vt.getParent();vt.isShadow()&&Et&&this.svgPath.setAttribute("stroke",Et.style.colourTertiary);for(const Dt of this.outlines.values())Dt.setAttribute("fill",this.style.colourTertiary)}flipRTL(){super.flipRTL();for(const vt of this.outlines.values())vt.setAttribute("transform","scale(-1 1)")}updateSelected(vt){this.setClass_("blocklySelected",vt),vt?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)}updateReplacementFade(vt){this.setClass_("blocklyReplaceable",vt),vt?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")}updateShapeForInputHighlight(vt,Et){vt=vt.getParentInput().name,(vt=this.getOutlinePath_(vt))&&(Et?vt.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):vt.removeAttribute("filter"))}beginDrawing(){this.remainingOutlines.clear();for(const vt of this.outlines.keys())this.remainingOutlines.add(vt)}endDrawing(){if(this.remainingOutlines.size)for(const vt of this.remainingOutlines)this.removeOutlinePath_(vt);this.remainingOutlines.clear()}setOutlinePath(vt,Et){vt=this.getOutlinePath_(vt),vt.setAttribute("d",Et),vt.setAttribute("fill",this.style.colourTertiary)}getOutlinePath_(vt){return this.outlines.has(vt)||this.outlines.set(vt,In(ar.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines.delete(vt),this.outlines.get(vt)}removeOutlinePath_(vt){let Et,Dt;(Et=this.outlines.get(vt))==null||(Dt=Et.parentNode)==null||Dt.removeChild(this.outlines.get(vt)),this.outlines.delete(vt)}},fE=class extends $0{constructor(vt){super(vt)}makeConstants_(){return new iE}makeRenderInfo_(vt){return new uE(this,vt)}makeDrawer_(vt,Et){return new oE(vt,Et)}makeMarkerDrawer(vt,Et){return new hE(vt,this.getConstants(),Et)}makePathObject(vt,Et){return new dE(vt,Et,this.getConstants())}getConstants(){return this.constants_}shouldHighlightConnection(vt){return vt.type!==no.INPUT_VALUE&&vt.type!==no.OUTPUT_VALUE}getConnectionPreviewMethod(vt,Et,Dt){return Et.type===no.OUTPUT_VALUE?vt.isConnected()?Su.PREVIEW_TYPE.REPLACEMENT_FADE:Su.PREVIEW_TYPE.INPUT_OUTLINE:super.getConnectionPreviewMethod(vt,Et,Dt)}};Hu("zelos",fE);var _f={};_f.BottomRow=sE,_f.ConstantProvider=iE,_f.Drawer=oE,_f.MarkerSvg=hE,_f.PathObject=dE,_f.RenderInfo=uE,_f.Renderer=fE,_f.RightConnectionShape=lE,_f.StatementInput=aE,_f.TopRow=cE;var pE=class extends IO{constructor(vt,Et){super(vt,Et)}getRenderer(){return this.renderer_}addElemSpacing_(){let vt=!1;for(var Et=0;Et<this.rows.length;Et++)if(this.rows[Et].hasExternalInput){vt=!0;break}for(Et=0;Et<this.rows.length;Et++){const Ft=this.rows[Et];var Dt=Ft.elements;if(Ft.elements=[],Ft.startsWithElemSpacer()&&Ft.elements.push(new vu(this.constants_,this.getInRowSpacing_(null,Dt[0]))),Dt.length){for(let Kt=0;Kt<Dt.length-1;Kt++){Ft.elements.push(Dt[Kt]);const yn=this.getInRowSpacing_(Dt[Kt],Dt[Kt+1]);Ft.elements.push(new vu(this.constants_,yn))}Ft.elements.push(Dt[Dt.length-1]),Ft.endsWithElemSpacer()&&(Dt=this.getInRowSpacing_(Dt[Dt.length-1],null),vt&&Ft.hasDummyInput&&(Dt+=this.constants_.TAB_WIDTH),Ft.elements.push(new vu(this.constants_,Dt)))}}}getInRowSpacing_(vt,Et){if(!vt)return Et&&tr.isField(Et)&&Et.isEditable?this.constants_.MEDIUM_PADDING:Et&&tr.isInlineInput(Et)?this.constants_.MEDIUM_LARGE_PADDING:Et&&tr.isStatementInput(Et)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!tr.isInput(vt)&&!Et)return tr.isField(vt)&&vt.isEditable?this.constants_.MEDIUM_PADDING:tr.isIcon(vt)?2*this.constants_.LARGE_PADDING+1:tr.isHat(vt)?this.constants_.NO_PADDING:tr.isPreviousOrNextConnection(vt)?this.constants_.LARGE_PADDING:tr.isLeftRoundedCorner(vt)?this.constants_.MIN_BLOCK_WIDTH:tr.isJaggedEdge(vt)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(tr.isInput(vt)&&!Et){if(tr.isExternalInput(vt))return this.constants_.NO_PADDING;if(tr.isInlineInput(vt))return this.constants_.LARGE_PADDING;if(tr.isStatementInput(vt))return this.constants_.NO_PADDING}if(!tr.isInput(vt)&&Et&&tr.isInput(Et)){if(tr.isField(vt)&&vt.isEditable){if(tr.isInlineInput(Et)||tr.isExternalInput(Et))return this.constants_.SMALL_PADDING}else{if(tr.isInlineInput(Et)||tr.isExternalInput(Et))return this.constants_.MEDIUM_LARGE_PADDING;if(tr.isStatementInput(Et))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(tr.isIcon(vt)&&Et&&!tr.isInput(Et))return this.constants_.LARGE_PADDING;if(tr.isInlineInput(vt)&&Et&&tr.isField(Et))return Et.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(tr.isLeftSquareCorner(vt)&&Et){if(tr.isHat(Et))return this.constants_.NO_PADDING;if(tr.isPreviousConnection(Et)||tr.isNextConnection(Et))return Et.notchOffset}return tr.isLeftRoundedCorner(vt)&&Et?Et.notchOffset-this.constants_.CORNER_RADIUS:tr.isField(vt)&&Et&&tr.isField(Et)&&vt.isEditable===Et.isEditable||Et&&tr.isJaggedEdge(Et)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(vt,Et){return tr.isTopRow(vt)&&tr.isBottomRow(Et)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:tr.isTopRow(vt)||tr.isBottomRow(Et)?this.constants_.NO_PADDING:vt.hasExternalInput&&Et.hasExternalInput?this.constants_.LARGE_PADDING:!vt.hasStatement&&Et.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:vt.hasStatement&&Et.hasStatement||vt.hasDummyInput||Et.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(vt,Et){if(tr.isSpacer(Et))return vt.yPos+Et.height/2;if(tr.isBottomRow(vt))return vt=vt.yPos+vt.height-vt.descenderHeight,tr.isNextConnection(Et)?vt+Et.height/2:vt-Et.height/2;if(tr.isTopRow(vt))return tr.isHat(Et)?vt.capline-Et.height/2:vt.capline+Et.height/2;let Dt=vt.yPos;return Dt=tr.isField(Et)&&vt.hasStatement?Dt+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+Et.height/2):Dt+vt.height/2}finalize_(){let vt=0,Et=0;for(var Dt=0;Dt<this.rows.length;Dt++){const Kt=this.rows[Dt];Kt.yPos=Et,Kt.xPos=this.startX,Et+=Kt.height,vt=Math.max(vt,Kt.widthWithConnectedBlocks);var Ft=Et-this.topRow.ascenderHeight;Kt===this.bottomRow&&Ft<this.constants_.MIN_BLOCK_HEIGHT&&(Ft=this.constants_.MIN_BLOCK_HEIGHT-Ft,this.bottomRow.height+=Ft,Et+=Ft),this.recordElemPositions_(Kt)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(Dt=this.block_.nextConnection.targetBlock())&&(vt=Math.max(vt,Dt.getHeightWidth().width)),this.bottomRow.baseline=Et-this.bottomRow.descenderHeight,this.widthWithChildren=vt+this.startX,this.height=Et,this.startY=this.topRow.capline}},mE=class extends $0{constructor(vt){super(vt)}makeRenderInfo_(vt){return new pE(this,vt)}};Hu("thrasos",mE);var R$={};R$.RenderInfo=pE,R$.Renderer=mE;var gE=class extends b0{constructor(){super()}},_E=class extends S0{constructor(vt,Et){super(vt,Et)}},OE=class extends IO{constructor(vt,Et){super(vt,Et)}getRenderer(){return this.renderer_}},yE=class extends $0{constructor(vt){super(vt)}makeConstants_(){return new gE}makeRenderInfo_(vt){return new OE(this,vt)}makeDrawer_(vt,Et){return new _E(vt,Et)}};Hu("minimalist",yE);var E0={};E0.ConstantProvider=gE,E0.Drawer=_E,E0.RenderInfo=OE,E0.Renderer=yE;var vE=class extends b0{constructor(){super(),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2}getCSS_(vt){return super.getCSS_(vt).concat([`${vt} .blocklyInsertionMarker>.blocklyPathLight,`,`${vt} .blocklyInsertionMarker>.blocklyPathDark {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"])}},bE=class{constructor(vt){this.inlineSteps_=this.steps_="",this.info_=vt,this.RTL_=this.info_.RTL,vt=vt.getRenderer(),this.constants_=vt.getConstants(),this.highlightConstants_=vt.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH}getPath(){return this.steps_+`
`+this.inlineSteps_}drawTopCorner(vt){this.steps_+=as(vt.xPos,this.info_.startY);for(let Et=0,Dt;Dt=vt.elements[Et];Et++)tr.isLeftSquareCorner(Dt)?this.steps_+=this.highlightConstants_.START_POINT:tr.isLeftRoundedCorner(Dt)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):tr.isPreviousConnection(Dt)?this.steps_+=this.notchPaths_.pathLeft:tr.isHat(Dt)?this.steps_+=this.startPaths_.path(this.RTL_):tr.isSpacer(Dt)&&Dt.width!==0&&(this.steps_+=_i("H",Dt.xPos+Dt.width-this.highlightOffset_));this.steps_+=_i("H",vt.xPos+vt.width-this.highlightOffset_)}drawJaggedEdge_(vt){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+_i("v",vt.height-this.jaggedTeethPaths_.height-this.highlightOffset_))}drawValueInput(vt){const Et=vt.getLastInput();if(this.RTL_){const Dt=vt.height-Et.connectionHeight;this.steps_+=Us(Et.xPos+Et.width-this.highlightOffset_,vt.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+_i("v",Dt)}else this.steps_+=Us(Et.xPos+Et.width,vt.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)}drawStatementInput(vt){const Et=vt.getLastInput();if(Et)if(this.RTL_){const Dt=vt.height-2*this.insideCornerPaths_.height;this.steps_+=Us(Et.xPos,vt.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+_i("v",Dt)+this.insideCornerPaths_.pathBottom(this.RTL_)+Ru(vt.width-Et.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=Us(Et.xPos,vt.yPos+vt.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+Ru(vt.width-Et.xPos-this.insideCornerPaths_.width,0)}drawRightSideRow(vt){const Et=vt.xPos+vt.width-this.highlightOffset_;vt instanceof b$&&vt.followsStatement&&(this.steps_+=_i("H",Et)),this.RTL_&&(this.steps_+=_i("H",Et),vt.height>this.highlightOffset_&&(this.steps_+=_i("V",vt.yPos+vt.height-this.highlightOffset_)))}drawBottomRow(vt){if(this.RTL_)this.steps_+=_i("V",vt.baseline-this.highlightOffset_);else{const Et=this.info_.bottomRow.elements[0];tr.isLeftSquareCorner(Et)?this.steps_+=Us(vt.xPos+this.highlightOffset_,vt.baseline-this.highlightOffset_):tr.isLeftRoundedCorner(Et)&&(this.steps_+=Us(vt.xPos,vt.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}}drawLeft(){var vt=this.info_.outputConnection;vt&&(vt=vt.connectionOffsetY+vt.height,this.RTL_?this.steps_+=Us(this.info_.startX,vt):(this.steps_+=Us(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=_i("V",vt)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(vt=this.info_.topRow,tr.isLeftRoundedCorner(vt.elements[0])?this.steps_+=_i("V",this.outsideCornerPaths_.height):this.steps_+=_i("V",vt.capline+this.highlightOffset_))}drawInlineInput(vt){const Et=this.highlightOffset_,Dt=vt.xPos+vt.connectionWidth;var Ft=vt.centerline-vt.height/2;const Kt=vt.width-vt.connectionWidth,yn=Ft+Et;this.RTL_?(Ft=vt.connectionOffsetY-Et,vt=vt.height-(vt.connectionOffsetY+vt.connectionHeight)+Et,this.inlineSteps_+=Us(Dt-Et,yn)+_i("v",Ft)+this.puzzleTabPaths_.pathDown(this.RTL_)+_i("v",vt)+_i("h",Kt)):this.inlineSteps_+=Us(vt.xPos+vt.width+Et,yn)+_i("v",vt.height)+_i("h",-Kt)+Us(Dt,Ft+vt.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)}},SE=class extends S0{constructor(vt,Et){super(vt,Et),this.highlighter_=new bE(Et)}draw(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();const vt=this.block_.pathObject;if(vt.setPath(this.outlinePath_+`
`+this.inlinePath_),vt.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&vt.flipRTL(),Qu()){let Et,Dt;(Et=this.block_)==null||(Dt=Et.renderingDebugger)==null||Dt.drawDebug(this.block_,this.info_)}this.recordSizeOnBlock_()}drawTop_(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),super.drawTop_()}drawJaggedEdge_(vt){this.highlighter_.drawJaggedEdge_(vt),super.drawJaggedEdge_(vt)}drawValueInput_(vt){this.highlighter_.drawValueInput(vt),super.drawValueInput_(vt)}drawStatementInput_(vt){this.highlighter_.drawStatementInput(vt),super.drawStatementInput_(vt)}drawRightSideRow_(vt){this.highlighter_.drawRightSideRow(vt),this.outlinePath_+=_i("H",vt.xPos+vt.width)+_i("V",vt.yPos+vt.height)}drawBottom_(){this.highlighter_.drawBottomRow(this.info_.bottomRow),super.drawBottom_()}drawLeft_(){this.highlighter_.drawLeft(),super.drawLeft_()}drawInlineInput_(vt){this.highlighter_.drawInlineInput(vt),super.drawInlineInput_(vt)}positionInlineInputConnection_(vt){const Et=vt.centerline-vt.height/2;if(vt.connectionModel){let Dt=vt.xPos+vt.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(Dt*=-1),vt.connectionModel.setOffsetInBlock(Dt,Et+vt.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}}positionStatementInputConnection_(vt){const Et=vt.getLastInput();if(Et!=null&&Et.connectionModel){let Dt=vt.xPos+vt.statementEdge+Et.notchOffset;Dt=this.info_.RTL?-1*Dt:Dt+this.constants_.DARK_PATH_OFFSET,Et.connectionModel.setOffsetInBlock(Dt,vt.yPos+this.constants_.DARK_PATH_OFFSET)}}positionExternalValueConnection_(vt){const Et=vt.getLastInput();if(Et&&Et.connectionModel){let Dt=vt.xPos+vt.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(Dt*=-1),Et.connectionModel.setOffsetInBlock(Dt,vt.yPos)}}positionNextConnection_(){const vt=this.info_.bottomRow;if(vt.connection){const Et=vt.connection,Dt=Et.xPos;Et.connectionModel.setOffsetInBlock((this.info_.RTL?-Dt:Dt)+this.constants_.DARK_PATH_OFFSET/2,vt.baseline+this.constants_.DARK_PATH_OFFSET)}}},$E=class{constructor(vt){this.OFFSET=.5,this.constantProvider=vt,this.START_POINT=as(this.OFFSET,this.OFFSET)}init(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()}makeInsideCorner(){const vt=this.constantProvider.CORNER_RADIUS,Et=this.OFFSET,Dt=(1-Math.SQRT1_2)*(vt+Et)-Et,Ft=as(Dt,Dt)+$s("a","0 0,0",vt,go(-Dt-Et,vt-Dt)),Kt=$s("a","0 0,0",vt+Et,go(vt+Et,vt+Et)),yn=as(Dt,-Dt)+$s("a","0 0,0",vt+Et,go(vt-Dt,Dt+Et));return{width:vt+Et,height:vt,pathTop(Mn){return Mn?Ft:""},pathBottom(Mn){return Mn?Kt:yn}}}makeOutsideCorner(){const vt=this.constantProvider.CORNER_RADIUS,Et=this.OFFSET,Dt=(1-Math.SQRT1_2)*(vt-Et)+Et,Ft=as(Dt,Dt)+$s("a","0 0,1",vt-Et,go(vt-Dt,-Dt+Et)),Kt=as(Et,vt)+$s("a","0 0,1",vt-Et,go(vt,-vt+Et)),yn=-Dt,Mn=as(Dt,yn)+$s("a","0 0,1",vt-Et,go(-Dt+Et,-yn-vt));return{height:vt,topLeft(qn){return qn?Ft:Kt},bottomLeft(){return Mn}}}makePuzzleTab(){const vt=this.constantProvider.TAB_WIDTH,Et=this.constantProvider.TAB_HEIGHT,Dt=as(-2,-Et+3.4)+Ru(-.45*vt,-2.1),Ft=_i("v",2.5)+as(.97*-vt,2.5)+Gl("q",[go(.05*-vt,10),go(.3*vt,9.5)])+as(.67*vt,-1.9)+_i("v",2.5),Kt=_i("v",-1.5)+as(-.92*vt,-.5)+Gl("q",[go(-.19*vt,-5.5),go(0,-11)])+as(.92*vt,1),yn=as(-5,Et-.7)+Ru(.46*vt,-2.1);return{width:vt,height:Et,pathUp(Mn){return Mn?Dt:Kt},pathDown(Mn){return Mn?Ft:yn}}}makeNotch(){return{pathLeft:_i("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}}makeJaggedTeeth(){return{pathLeft:Ru(5.1,2.6)+as(-10.2,6.8)+Ru(5.1,2.6),height:12,width:10.2}}makeStartHat(){const vt=this.constantProvider.START_HAT.height,Et=as(25,-8.7)+Gl("c",[go(29.7,-6.2),go(57.2,-.5),go(75,8.7)]),Dt=Gl("c",[go(17.8,-9.2),go(45.3,-14.9),go(75,-8.7)])+Us(100.5,vt+.5);return{path(Ft){return Ft?Et:Dt}}}},TE=class extends y${constructor(vt,Et){super(vt,Et),this.constants_=vt,this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)}},EE=class extends O0{constructor(vt,Et){super(vt,Et),this.constants_=vt,this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)}},xE=class extends IO{constructor(vt,Et){super(vt,Et),this.renderer_=vt}getRenderer(){return this.renderer_}populateBottomRow_(){super.populateBottomRow_(),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type===Do.STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)}addInput_(vt,Et){this.isInline&&vt.type===Do.VALUE?(Et.elements.push(new TE(this.constants_,vt)),Et.hasInlineInput=!0):vt.type===Do.STATEMENT?(Et.elements.push(new EE(this.constants_,vt)),Et.hasStatement=!0):vt.type===Do.VALUE?(Et.elements.push(new Zv(this.constants_,vt)),Et.hasExternalInput=!0):vt.type===Do.DUMMY&&(Et.minHeight=Math.max(Et.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),Et.hasDummyInput=!0),this.isInline||Et.align!==null||(Et.align=vt.align)}addElemSpacing_(){let vt=!1;for(let Dt=0,Ft;Ft=this.rows[Dt];Dt++)Ft.hasExternalInput&&(vt=!0);for(let Dt=0,Ft;Ft=this.rows[Dt];Dt++){var Et=Ft.elements;if(Ft.elements=[],Ft.startsWithElemSpacer()&&Ft.elements.push(new vu(this.constants_,this.getInRowSpacing_(null,Et[0]))),Et.length){for(let Kt=0;Kt<Et.length-1;Kt++){Ft.elements.push(Et[Kt]);const yn=this.getInRowSpacing_(Et[Kt],Et[Kt+1]);Ft.elements.push(new vu(this.constants_,yn))}Ft.elements.push(Et[Et.length-1]),Ft.endsWithElemSpacer()&&(Et=this.getInRowSpacing_(Et[Et.length-1],null),vt&&Ft.hasDummyInput&&(Et+=this.constants_.TAB_WIDTH),Ft.elements.push(new vu(this.constants_,Et)))}}}getInRowSpacing_(vt,Et){if(!vt)return Et&&tr.isField(Et)&&Et.isEditable?this.constants_.MEDIUM_PADDING:Et&&tr.isInlineInput(Et)?this.constants_.MEDIUM_LARGE_PADDING:Et&&tr.isStatementInput(Et)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!tr.isInput(vt)&&(!Et||tr.isStatementInput(Et)))return tr.isField(vt)&&vt.isEditable?this.constants_.MEDIUM_PADDING:tr.isIcon(vt)?2*this.constants_.LARGE_PADDING+1:tr.isHat(vt)?this.constants_.NO_PADDING:tr.isPreviousOrNextConnection(vt)?this.constants_.LARGE_PADDING:tr.isLeftRoundedCorner(vt)?this.constants_.MIN_BLOCK_WIDTH:tr.isJaggedEdge(vt)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(tr.isInput(vt)&&!Et){if(tr.isExternalInput(vt))return this.constants_.NO_PADDING;if(tr.isInlineInput(vt))return this.constants_.LARGE_PADDING;if(tr.isStatementInput(vt))return this.constants_.NO_PADDING}if(!tr.isInput(vt)&&Et&&tr.isInput(Et)){if(tr.isField(vt)&&vt.isEditable){if(tr.isInlineInput(Et)||tr.isExternalInput(Et))return this.constants_.SMALL_PADDING}else{if(tr.isInlineInput(Et)||tr.isExternalInput(Et))return this.constants_.MEDIUM_LARGE_PADDING;if(tr.isStatementInput(Et))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(tr.isIcon(vt)&&Et&&!tr.isInput(Et))return this.constants_.LARGE_PADDING;if(tr.isInlineInput(vt)&&Et&&tr.isField(Et))return Et.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(tr.isLeftSquareCorner(vt)&&Et){if(tr.isHat(Et))return this.constants_.NO_PADDING;if(tr.isPreviousConnection(Et))return Et.notchOffset;if(tr.isNextConnection(Et))return Et.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(tr.isLeftRoundedCorner(vt)&&Et){if(tr.isPreviousConnection(Et))return Et.notchOffset-this.constants_.CORNER_RADIUS;if(tr.isNextConnection(Et))return Et.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return tr.isField(vt)&&Et&&tr.isField(Et)&&vt.isEditable===Et.isEditable||Et&&tr.isJaggedEdge(Et)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(vt,Et){return tr.isTopRow(vt)&&tr.isBottomRow(Et)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:tr.isTopRow(vt)||tr.isBottomRow(Et)?this.constants_.NO_PADDING:vt.hasExternalInput&&Et.hasExternalInput?this.constants_.LARGE_PADDING:!vt.hasStatement&&Et.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:vt.hasStatement&&Et.hasStatement||!vt.hasStatement&&Et.hasDummyInput||vt.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(vt,Et){if(tr.isSpacer(Et))return vt.yPos+Et.height/2;if(tr.isBottomRow(vt))return vt=vt.yPos+vt.height-vt.descenderHeight,tr.isNextConnection(Et)?vt+Et.height/2:vt-Et.height/2;if(tr.isTopRow(vt))return tr.isHat(Et)?vt.capline-Et.height/2:vt.capline+Et.height/2;let Dt=vt.yPos;return tr.isField(Et)||tr.isIcon(Et)?(Dt+=Et.height/2,(vt.hasInlineInput||vt.hasStatement)&&Et.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=vt.height&&(Dt+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):Dt=tr.isInlineInput(Et)?Dt+Et.height/2:Dt+vt.height/2,Dt}alignRowElements_(){if(this.isInline){var vt=0,Et=new WeakMap,Dt=null;for(let Ft=this.rows.length-1,Kt;Kt=this.rows[Ft];Ft--)Et.set(Kt,vt),tr.isInputRow(Kt)&&(Kt.hasStatement&&this.alignStatementRow_(Kt),Dt&&Dt.hasStatement&&Kt.width<Dt.width?Et.set(Kt,Dt.width):vt=Kt.width,Dt=Kt);vt=0;for(let Ft=0,Kt;Kt=this.rows[Ft];Ft++)Kt.hasStatement?vt=this.getDesiredRowWidth_(Kt):tr.isSpacer(Kt)?Kt.width=Math.max(vt,Et.get(Kt)):(Dt=Kt.width,vt=Math.max(vt,Et.get(Kt))-Dt,0<vt&&this.addAlignmentPadding_(Kt,vt),vt=Kt.width)}else super.alignRowElements_()}getDesiredRowWidth_(vt){return this.isInline&&vt.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:super.getDesiredRowWidth_(vt)}finalize_(){let vt=0,Et=0;for(let Ft=0,Kt;Kt=this.rows[Ft];Ft++){Kt.yPos=Et,Kt.xPos=this.startX,Et+=Kt.height,vt=Math.max(vt,Kt.widthWithConnectedBlocks);var Dt=Et-this.topRow.ascenderHeight;Kt===this.bottomRow&&Dt<this.constants_.MIN_BLOCK_HEIGHT&&(Dt=this.constants_.MIN_BLOCK_HEIGHT-Dt,this.bottomRow.height+=Dt,Et+=Dt),this.recordElemPositions_(Kt)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(Dt=this.block_.nextConnection.targetBlock())&&(vt=Math.max(vt,Dt.getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=Et-this.bottomRow.descenderHeight,this.widthWithChildren=vt+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=Et+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline}},wE=class extends qv{constructor(vt,Et,Dt){super(vt,Et,Dt),this.constants=Dt,this.colourDark="#000000",this.svgPathDark=In(ar.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"}),this.svgRoot.insertBefore(this.svgPathDark,this.svgPath),this.svgPathLight=In(ar.PATH,{class:"blocklyPathLight"},this.svgRoot)}setPath(vt){this.svgPath.setAttribute("d",vt),this.svgPathDark.setAttribute("d",vt)}setHighlightPath(vt){this.svgPathLight.setAttribute("d",vt)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")}applyColour(vt){if(this.svgPathLight.style.display="",this.svgPathDark.style.display="",!this.style.colourTertiary)throw Error("The renderer did not properly initialize the tertiary colour of the block style");this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),super.applyColour(vt),this.svgPath.setAttribute("stroke","none")}setStyle(vt){this.style=vt,this.colourDark=pu("#000",this.style.colourPrimary,.2)||this.colourDark}updateHighlighted(vt){vt?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")}updateShadow_(vt){if(vt){if(this.svgPathLight.style.display="none",!this.style.colourSecondary)throw Error("The renderer did not properly initialize the secondary colour of the block style block style");this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)}}updateDisabled_(vt){super.updateDisabled_(vt),vt&&this.svgPath.setAttribute("stroke","none")}},CE=class extends $0{constructor(vt){super(vt),this.highlightConstants_=null}init(vt,Et){super.init(vt,Et),this.highlightConstants_=this.makeHighlightConstants_(),this.highlightConstants_.init()}refreshDom(vt,Et){super.refreshDom(vt,Et),this.getHighlightConstants().init()}makeConstants_(){return new vE}makeRenderInfo_(vt){return new xE(this,vt)}makeDrawer_(vt,Et){return new SE(vt,Et)}makePathObject(vt,Et){return new wE(vt,Et,this.getConstants())}makeHighlightConstants_(){return new $E(this.getConstants())}getHighlightConstants(){if(!this.highlightConstants_)throw Error("Cannot access the highlight constants because init has not been called");return this.highlightConstants_}};Hu("geras",CE);var vp={};vp.ConstantProvider=vE,vp.Drawer=SE,vp.HighlightConstantProvider=$E,vp.Highlighter=bE,vp.InlineInput=TE,vp.PathObject=wE,vp.RenderInfo=xE,vp.Renderer=CE,vp.StatementInput=EE;var AE=class{constructor(vt){this.container=vt,this.previousSibling=null,this.createDom()}createDom(){this.SVG||(this.SVG=In(ar.SVG,{xmlns:Vl,"xmlns:html":yu,"xmlns:xlink":iu,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"}),this.container.appendChild(this.SVG))}translateSurface(vt,Et){vt=Math.round(vt),Et=Math.round(Et),this.SVG.style.display="block",Xr(this.SVG,"translate3d("+vt+"px, "+Et+"px, 0)")}getSurfaceTranslation(){return Pl(this.SVG)}clearAndHide(vt){if(!vt)throw Error("Couldn't clear and hide the drag surface: missing new surface.");const Et=this.SVG.childNodes[0],Dt=this.SVG.childNodes[1];if(!Et||!Dt||!Et.classList.contains("blocklyBlockCanvas")&&Dt.classList.contains("blocklyBubbleCanvas"))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(this.previousSibling!==null?Gr(Et,this.previousSibling):vt.insertBefore(Et,vt.firstChild),Gr(Dt,Et),this.SVG.style.display="none",this.SVG.childNodes.length)throw Error("Drag surface was not cleared.");Xr(this.SVG,""),this.previousSibling=null}setContentsAndShow(vt,Et,Dt,Ft,Kt,yn){if(this.SVG.childNodes.length)throw Error("Already dragging a block.");this.previousSibling=Dt,vt.setAttribute("transform","translate(0, 0) scale("+yn+")"),Et.setAttribute("transform","translate(0, 0) scale("+yn+")"),this.SVG.setAttribute("width",String(Ft)),this.SVG.setAttribute("height",String(Kt)),this.SVG.appendChild(vt),this.SVG.appendChild(Et),this.SVG.style.display="block"}},RE=class{constructor(vt){this.container=vt,this.scale=1,this.surfaceXY=new Zr(0,0),this.childSurfaceXY=new Zr(0,0),this.svg=In(ar.SVG,{xmlns:Vl,"xmlns:html":yu,"xmlns:xlink":iu,version:"1.1",class:"blocklyBlockDragSurface"},this.container),this.dragGroup=In(ar.G,{},this.svg)}createDom(){ft("BlockDragSurfaceSvg createDom","June 2022","June 2023")}setBlocksAndShow(vt){if(this.dragGroup.childNodes.length)throw Error("Already dragging a block.");this.dragGroup.appendChild(vt),this.svg.style.display="block",this.surfaceXY=new Zr(0,0)}translateAndScaleGroup(vt,Et,Dt){this.scale=Dt,vt=Math.round(vt),Et=Math.round(Et),this.childSurfaceXY.x=vt,this.childSurfaceXY.y=Et,this.dragGroup.setAttribute("transform","translate("+vt+","+Et+") scale("+Dt+")")}translateSurfaceInternal_(){const vt=Math.round(this.surfaceXY.x),Et=Math.round(this.surfaceXY.y);this.svg.style.display="block",Xr(this.svg,"translate3d("+vt+"px, "+Et+"px, 0)")}translateBy(vt,Et){this.surfaceXY=new Zr(this.surfaceXY.x+vt,this.surfaceXY.y+Et),this.translateSurfaceInternal_()}translateSurface(vt,Et){this.surfaceXY=new Zr(vt*this.scale,Et*this.scale),this.translateSurfaceInternal_()}getSurfaceTranslation(){const vt=Pl(this.svg);return new Zr(vt.x/this.scale,vt.y/this.scale)}getGroup(){return this.dragGroup}getSvgRoot(){return this.svg}getCurrentBlock(){return this.dragGroup.firstChild}getWsTranslation(){return this.childSurfaceXY.clone()}clearAndHide(vt){const Et=this.getCurrentBlock();if(Et&&(vt?vt.appendChild(Et):this.dragGroup.removeChild(Et)),this.svg.style.display="none",this.dragGroup.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY=new Zr(0,0)}},Kv={};Kv.bumpIntoBounds=gm,Kv.bumpIntoBoundsHandler=n_,Kv.bumpTopObjectsIntoBounds=Ws;var I$=class{constructor(vt,Et,Dt,Ft,Kt){this.workspace=vt,this.oldHostMetrics_=this.corner_=this.vScroll=this.hScroll=null,Et=Et===void 0?!0:Et,Dt=Dt===void 0?!0:Dt;const yn=Et&&Dt;Et&&(this.hScroll=new bs(vt,!0,yn,Ft,Kt)),Dt&&(this.vScroll=new bs(vt,!1,yn,Ft,Kt)),yn&&(this.corner_=In(ar.RECT,{height:bs.scrollbarThickness,width:bs.scrollbarThickness,class:"blocklyScrollbarBackground"}),Gr(this.corner_,vt.getBubbleCanvas()))}dispose(){br(this.corner_),this.oldHostMetrics_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)}resize(){const vt=this.workspace.getMetrics();if(vt){var Et=!1,Dt=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth===vt.viewWidth&&this.oldHostMetrics_.viewHeight===vt.viewHeight&&this.oldHostMetrics_.absoluteTop===vt.absoluteTop&&this.oldHostMetrics_.absoluteLeft===vt.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth===vt.scrollWidth&&this.oldHostMetrics_.viewLeft===vt.viewLeft&&this.oldHostMetrics_.scrollLeft===vt.scrollLeft||(Et=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight===vt.scrollHeight&&this.oldHostMetrics_.viewTop===vt.viewTop&&this.oldHostMetrics_.scrollTop===vt.scrollTop||(Dt=!0)):Dt=Et=!0,Et||Dt){try{Bo(),this.hScroll&&Et&&this.hScroll.resize(vt),this.vScroll&&Dt&&this.vScroll.resize(vt)}finally{yo()}this.workspace.maybeFireViewportChangeEvent()}if(this.hScroll&&this.vScroll){if(!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==vt.viewWidth||this.oldHostMetrics_.absoluteLeft!==vt.absoluteLeft){let Ft;(Ft=this.corner_)==null||Ft.setAttribute("x",String(this.vScroll.position.x))}if(!this.oldHostMetrics_||this.oldHostMetrics_.viewHeight!==vt.viewHeight||this.oldHostMetrics_.absoluteTop!==vt.absoluteTop){let Ft;(Ft=this.corner_)==null||Ft.setAttribute("y",String(this.hScroll.position.y))}}this.oldHostMetrics_=vt}}canScrollHorizontally(){return!!this.hScroll}canScrollVertically(){return!!this.vScroll}setOrigin(vt,Et){this.hScroll&&this.hScroll.setOrigin(vt,Et),this.vScroll&&this.vScroll.setOrigin(vt,Et)}set(vt,Et,Dt){this.hScroll&&this.hScroll.set(vt,!1),this.vScroll&&this.vScroll.set(Et,!1),(Dt||Dt===void 0)&&(vt={},this.hScroll&&(vt.x=this.hScroll.getRatio_()),this.vScroll&&(vt.y=this.vScroll.getRatio_()),this.workspace.setMetrics(vt))}setX(vt){this.hScroll&&this.hScroll.set(vt,!0)}setY(vt){this.vScroll&&this.vScroll.set(vt,!0)}setContainerVisible(vt){this.hScroll&&this.hScroll.setContainerVisible(vt),this.vScroll&&this.vScroll.setContainerVisible(vt)}isVisible(){let vt=!1;return this.hScroll&&(vt=this.hScroll.isVisible()),this.vScroll&&(vt=vt||this.vScroll.isVisible()),vt}resizeContent(vt){this.hScroll&&this.hScroll.resizeContentHorizontal(vt),this.vScroll&&this.vScroll.resizeContentVertical(vt)}resizeView(vt){this.hScroll&&this.hScroll.resizeViewHorizontal(vt),this.vScroll&&this.vScroll.resizeViewVertical(vt)}},IE=!1;lt.CodeGenerator$$module$build$src$core$generator=class{constructor(vt){this.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",this.STATEMENT_SUFFIX=this.STATEMENT_PREFIX=this.INFINITE_LOOP_TRAP=null,this.INDENT="  ",this.COMMENT_WRAP=60,this.ORDER_OVERRIDES=[],this.isInitialized=null,this.RESERVED_WORDS_="",this.definitions_=Object.create(null),this.functionNames_=Object.create(null),this.nameDB_=void 0,this.name_=vt,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")}workspaceToCode(vt){vt||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),vt=xn());var Et=[];this.init(vt),vt=vt.getTopBlocks(!0);for(let Dt=0,Ft;Ft=vt[Dt];Dt++){let Kt=this.blockToCode(Ft);Array.isArray(Kt)&&(Kt=Kt[0]),Kt&&(Ft.outputConnection&&(Kt=this.scrubNakedValue(Kt),this.STATEMENT_PREFIX&&!Ft.suppressPrefixSuffix&&(Kt=this.injectId(this.STATEMENT_PREFIX,Ft)+Kt),this.STATEMENT_SUFFIX&&!Ft.suppressPrefixSuffix&&(Kt+=this.injectId(this.STATEMENT_SUFFIX,Ft))),Et.push(Kt))}return Et=Et.join(`
`),Et=this.finish(Et),Et=Et.replace(/^\s+\n/,""),Et=Et.replace(/\n\s+$/,`
`),Et=Et.replace(/[ \t]+\n/g,`
`)}prefixLines(vt,Et){return Et+vt.replace(/(?!\n$)\n/g,`
`+Et)}allNestedComments(vt){const Et=[];vt=vt.getDescendants(!0);for(let Dt=0;Dt<vt.length;Dt++){const Ft=vt[Dt].getCommentText();Ft&&Et.push(Ft)}return Et.length&&Et.push(""),Et.join(`
`)}blockToCode(vt,Et){if(this.isInitialized===!1&&console.warn("CodeGenerator init was not called before blockToCode was called."),!vt)return"";if(!vt.isEnabled())return Et?"":this.blockToCode(vt.getNextBlock());if(vt.isInsertionMarker())return Et?"":this.blockToCode(vt.getChildren(!1)[0]);var Dt=this[vt.type];if(typeof Dt!="function")throw Error('Language "'+this.name_+'" does not know how to generate code for block type "'+vt.type+'".');if(Dt=Dt.call(vt,vt),Array.isArray(Dt)){if(!vt.outputConnection)throw TypeError("Expecting string from statement block: "+vt.type);return[this.scrub_(vt,Dt[0],Et),Dt[1]]}if(typeof Dt=="string")return this.STATEMENT_PREFIX&&!vt.suppressPrefixSuffix&&(Dt=this.injectId(this.STATEMENT_PREFIX,vt)+Dt),this.STATEMENT_SUFFIX&&!vt.suppressPrefixSuffix&&(Dt+=this.injectId(this.STATEMENT_SUFFIX,vt)),this.scrub_(vt,Dt,Et);if(Dt===null)return"";throw SyntaxError("Invalid code generated: "+Dt)}valueToCode(vt,Et,Dt){if(isNaN(Dt))throw TypeError("Expecting valid order from block: "+vt.type);var Ft=vt.getInputTargetBlock(Et);if(!Ft||(Et=this.blockToCode(Ft),Et===""))return"";if(!Array.isArray(Et))throw TypeError("Expecting tuple from value block: "+Ft.type);if(vt=Et[0],Et=Et[1],isNaN(Et))throw TypeError("Expecting valid order from value block: "+Ft.type);if(!vt)return"";Ft=!1;var Kt=Math.floor(Dt);const yn=Math.floor(Et);if(Kt<=yn&&(Kt!==yn||Kt!==0&&Kt!==99)){for(Ft=!0,Kt=0;Kt<this.ORDER_OVERRIDES.length;Kt++)if(this.ORDER_OVERRIDES[Kt][0]===Dt&&this.ORDER_OVERRIDES[Kt][1]===Et){Ft=!1;break}}return Ft&&(vt="("+vt+")"),vt}statementToCode(vt,Et){if(vt=vt.getInputTargetBlock(Et),Et=this.blockToCode(vt),typeof Et!="string")throw TypeError("Expecting code from statement block: "+(vt&&vt.type));return Et&&(Et=this.prefixLines(Et,this.INDENT)),Et}addLoopTrap(vt,Et){return this.INFINITE_LOOP_TRAP&&(vt=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,Et),this.INDENT)+vt),this.STATEMENT_SUFFIX&&!Et.suppressPrefixSuffix&&(vt=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,Et),this.INDENT)+vt),this.STATEMENT_PREFIX&&!Et.suppressPrefixSuffix&&(vt+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,Et),this.INDENT)),vt}injectId(vt,Et){return Et=Et.id.replace(/\$/g,"$$$$"),vt.replace(/%1/g,"'"+Et+"'")}addReservedWords(vt){this.RESERVED_WORDS_+=vt+","}provideFunction_(vt,Et){if(!this.definitions_[vt]){const Dt=this.nameDB_.getDistinctName(vt,lt.NameType$$module$build$src$core$names.PROCEDURE);this.functionNames_[vt]=Dt,Array.isArray(Et)&&(Et=Et.join(`
`)),Et=Et.trim().replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,Dt);let Ft;for(;Ft!==Et;)Ft=Et,Et=Et.replace(/^(( {2})*) {2}/gm,"$1\0");Et=Et.replace(/\0/g,this.INDENT),this.definitions_[vt]=Et}return this.functionNames_[vt]}init(vt){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)}scrub_(vt,Et,Dt){return Et}finish(vt){return this.definitions_=Object.create(null),this.functionNames_=Object.create(null),vt}scrubNakedValue(vt){return vt}},Object.defineProperties(lt.CodeGenerator$$module$build$src$core$generator.prototype,{variableDB_:{get(){return ft("variableDB_","version 9","version 10","nameDB_"),this.nameDB_},set(vt){ft("variableDB_","version 9","version 10","nameDB_"),this.nameDB_=vt}}}),lt.CodeGenerator$$module$build$src$core$generator;var kO=class{constructor(vt,Et,Dt,Ft){this.workspace=vt,this.targetWorkspace=Et,this.isLabel_=Ft,this.onMouseUpWrapper_=null,this.height=this.width=0,this.svgText_=this.svgGroup_=null,this.text_=Dt.text,this.position_=new Zr(0,0),this.callbackKey_=Dt.callbackKey||Dt.callbackkey,this.cssClass_=Dt["web-class"]||null,this.info=Dt}createDom(){var vt=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";this.cssClass_&&(vt+=" "+this.cssClass_),this.svgGroup_=In(ar.G,{class:vt},this.workspace.getCanvas());let Et;this.isLabel_||(Et=In(ar.RECT,{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_)),vt=In(ar.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);const Dt=In(ar.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_);var Ft=ds(this.text_);this.workspace.RTL&&(Ft+=""),Dt.textContent=Ft,this.isLabel_&&(this.svgText_=Dt,this.workspace.getThemeManager().subscribe(this.svgText_,"flyoutForegroundColour","fill"));const Kt=Gn(Dt,"fontSize"),yn=Gn(Dt,"fontWeight"),Mn=Gn(Dt,"fontFamily");if(this.width=oo(Dt,Kt,yn,Mn),Ft=zr(Ft,Kt,yn,Mn),this.height=Ft.height,!this.isLabel_){this.width+=2*kO.TEXT_MARGIN_X,this.height+=2*kO.TEXT_MARGIN_Y;let qn;(qn=Et)==null||qn.setAttribute("width",this.width.toString());let Cr;(Cr=Et)==null||Cr.setAttribute("height",this.height.toString())}return vt.setAttribute("width",this.width.toString()),vt.setAttribute("height",this.height.toString()),Dt.setAttribute("x",(this.width/2).toString()),Dt.setAttribute("y",(this.height/2-Ft.height/2+Ft.baseline).toString()),this.updateTransform_(),this.onMouseUpWrapper_=Zt(this.svgGroup_,"pointerup",this,this.onMouseUp_),this.svgGroup_}show(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")}updateTransform_(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")}moveTo(vt,Et){this.position_.x=vt,this.position_.y=Et,this.updateTransform_()}isLabel(){return this.isLabel_}getPosition(){return this.position_}getButtonText(){return this.text_}getTargetWorkspace(){return this.targetWorkspace}dispose(){this.onMouseUpWrapper_&&cn(this.onMouseUpWrapper_),this.svgGroup_&&br(this.svgGroup_),this.svgText_&&this.workspace.getThemeManager().unsubscribe(this.svgText_)}onMouseUp_(vt){(vt=this.targetWorkspace.getGesture(vt))&&vt.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace.getButtonCallback(this.callbackKey_)?this.isLabel_||(vt=this.targetWorkspace.getButtonCallback(this.callbackKey_))&&vt(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)}};kO.TEXT_MARGIN_X=5,kO.TEXT_MARGIN_Y=2,uu(`
.blocklyFlyoutButton {
  fill: #888;
  cursor: default;
}

.blocklyFlyoutButtonShadow {
  fill: #666;
}

.blocklyFlyoutButton:hover {
  fill: #aaa;
}

.blocklyFlyoutLabel {
  cursor: default;
}

.blocklyFlyoutLabelBackground {
  opacity: 0;
}
`);var k$=class{constructor(vt){this.workspace_=vt}getDimensionsPx_(vt){let Et=0,Dt=0;return vt&&(Et=vt.getWidth(),Dt=vt.getHeight()),new qs(Et,Dt)}getFlyoutMetrics(vt){return vt=this.getDimensionsPx_(this.workspace_.getFlyout(vt)),{width:vt.width,height:vt.height,position:this.workspace_.toolboxPosition}}getToolboxMetrics(){const vt=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:vt.width,height:vt.height,position:this.workspace_.toolboxPosition}}getSvgMetrics(){return this.workspace_.getCachedParentSvgSize()}getAbsoluteMetrics(){let vt=0;const Et=this.getToolboxMetrics(),Dt=this.getFlyoutMetrics(!0),Ft=!!this.workspace_.getToolbox(),Kt=!!this.workspace_.getFlyout(!0);var yn=Ft?Et.position:Dt.position,Mn=yn===Co.LEFT;return yn=yn===Co.TOP,Ft&&Mn?vt=Et.width:Kt&&Mn&&(vt=Dt.width),Mn=0,Ft&&yn?Mn=Et.height:Kt&&yn&&(Mn=Dt.height),{top:Mn,left:vt}}getViewMetrics(vt){vt=vt?this.workspace_.scale:1;const Et=this.getSvgMetrics(),Dt=this.getToolboxMetrics(),Ft=this.getFlyoutMetrics(!0),Kt=this.workspace_.getToolbox()?Dt.position:Ft.position;return this.workspace_.getToolbox()?Kt===Co.TOP||Kt===Co.BOTTOM?Et.height-=Dt.height:(Kt===Co.LEFT||Kt===Co.RIGHT)&&(Et.width-=Dt.width):this.workspace_.getFlyout(!0)&&(Kt===Co.TOP||Kt===Co.BOTTOM?Et.height-=Ft.height:(Kt===Co.LEFT||Kt===Co.RIGHT)&&(Et.width-=Ft.width)),{height:Et.height/vt,width:Et.width/vt,top:-this.workspace_.scrollY/vt,left:-this.workspace_.scrollX/vt}}getContentMetrics(vt){vt=vt?1:this.workspace_.scale;const Et=this.workspace_.getBlocksBoundingBox();return{height:(Et.bottom-Et.top)*vt,width:(Et.right-Et.left)*vt,top:Et.top*vt,left:Et.left*vt}}hasFixedEdges(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()}getComputedFixedEdges_(vt){if(!this.hasFixedEdges())return{};const Et=this.workspace_.isMovableHorizontally(),Dt=this.workspace_.isMovableVertically();vt=vt||this.getViewMetrics(!1);const Ft={};return Dt||(Ft.top=vt.top,Ft.bottom=vt.top+vt.height),Et||(Ft.left=vt.left,Ft.right=vt.left+vt.width),Ft}getPaddedContent_(vt,Et){const Dt=Et.top+Et.height,Ft=Et.left+Et.width,Kt=vt.width;vt=vt.height;const yn=Kt/2,Mn=vt/2;return{top:Math.min(Et.top-Mn,Dt-vt),bottom:Math.max(Dt+Mn,Et.top+vt),left:Math.min(Et.left-yn,Ft-Kt),right:Math.max(Ft+yn,Et.left+Kt)}}getScrollMetrics(vt,Et,Dt){vt=vt?this.workspace_.scale:1,Et=Et||this.getViewMetrics(!1);var Ft=Dt||this.getContentMetrics();Dt=this.getComputedFixedEdges_(Et),Et=this.getPaddedContent_(Et,Ft),Ft=Dt.top!==void 0?Dt.top:Et.top;const Kt=Dt.left!==void 0?Dt.left:Et.left;return{top:Ft/vt,left:Kt/vt,width:((Dt.right!==void 0?Dt.right:Et.right)-Kt)/vt,height:((Dt.bottom!==void 0?Dt.bottom:Et.bottom)-Ft)/vt}}getUiMetrics(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}}getMetrics(){const vt=this.getToolboxMetrics(),Et=this.getFlyoutMetrics(!0),Dt=this.getSvgMetrics(),Ft=this.getAbsoluteMetrics(),Kt=this.getViewMetrics(),yn=this.getContentMetrics(),Mn=this.getScrollMetrics(!1,Kt,yn);return{contentHeight:yn.height,contentWidth:yn.width,contentTop:yn.top,contentLeft:yn.left,scrollHeight:Mn.height,scrollWidth:Mn.width,scrollTop:Mn.top,scrollLeft:Mn.left,viewHeight:Kt.height,viewWidth:Kt.width,viewTop:Kt.top,viewLeft:Kt.left,absoluteTop:Ft.top,absoluteLeft:Ft.left,svgHeight:Dt.height,svgWidth:Dt.width,toolboxWidth:vt.width,toolboxHeight:vt.height,toolboxPosition:vt.position,flyoutWidth:Et.width,flyoutHeight:Et.height}}};xo(Wr.METRICS_MANAGER,Bp,k$);var kE=class extends k${constructor(vt,Et){super(vt),this.flyout_=Et}getBoundingBox_(){let vt;try{vt=this.workspace_.getCanvas().getBBox()}catch{vt={height:0,y:0,width:0,x:0}}return vt}getContentMetrics(vt){const Et=this.getBoundingBox_();return vt=vt?1:this.workspace_.scale,{height:Et.height*vt,width:Et.width*vt,top:Et.y*vt,left:Et.x*vt}}getScrollMetrics(vt,Et,Dt){return Et=Dt||this.getContentMetrics(),Dt=this.flyout_.MARGIN*this.workspace_.scale,vt=vt?this.workspace_.scale:1,{height:(Et.height+2*Dt)/vt,width:(Et.width+Et.left+Dt)/vt,top:0,left:0}}},MO;(function(vt){vt.BLOCK="block",vt.BUTTON="button"})(MO||(MO={}));var Jv=class extends zv{constructor(vt){super(),this.horizontalLayout=!1,this.eventWrappers_=[],this.filterWrapper_=this.reflowWrapper_=null,this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.recycledBlocks_=[],this.autoClose=!0,this.isVisible_=!1,this.containerVisible_=!0,this.CORNER_RADIUS=8,this.SCROLLBAR_MARGIN=2.5,this.height_=this.width_=0,this.dragAngleRange_=70,this.svgGroup_=this.svgBackground_=null,vt.setMetrics=this.setMetrics_.bind(this),this.workspace_=new _d(vt),this.workspace_.setMetricsManager(new kE(this.workspace_,this)),this.workspace_.internalIsFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=Eo(),this.RTL=!!vt.RTL,this.toolboxPosition_=vt.toolboxPosition,this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.rectMap_=new WeakMap,this.MARGIN=this.CORNER_RADIUS,this.GAP_X=3*this.MARGIN,this.GAP_Y=3*this.MARGIN}createDom(vt){return this.svgGroup_=In(vt,{class:"blocklyFlyout",style:"display: none"}),this.svgBackground_=In(ar.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_}init(vt){this.targetWorkspace=vt,this.workspace_.targetWorkspace=vt,this.workspace_.scrollbar=new I$(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),Array.prototype.push.apply(this.eventWrappers_,Zt(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,Zt(this.svgBackground_,"pointerdown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),vt.getComponentManager().addComponent({component:this,weight:1,capabilities:[Ks.Capability.DELETE_AREA,Ks.Capability.DRAG_TARGET]})}dispose(){this.hide(),this.workspace_.getComponentManager().removeComponent(this.id),cn(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.dispose()),this.svgGroup_&&(br(this.svgGroup_),this.svgGroup_=null),this.svgBackground_=null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyoutScale(){return this.targetWorkspace.scale}getWorkspace(){return this.workspace_}isVisible(){return this.isVisible_}setVisible(vt){const Et=vt!==this.isVisible();this.isVisible_=vt,Et&&(this.autoClose||this.workspace_.recordDragTargets(),this.updateDisplay_())}setContainerVisible(vt){const Et=vt!==this.containerVisible_;this.containerVisible_=vt,Et&&this.updateDisplay_()}updateDisplay_(){let vt;vt=this.containerVisible_?this.isVisible():!1,this.svgGroup_&&(this.svgGroup_.style.display=vt?"block":"none");let Et;(Et=this.workspace_.scrollbar)==null||Et.setContainerVisible(vt)}positionAt_(vt,Et,Dt,Ft){let Kt;(Kt=this.svgGroup_)==null||Kt.setAttribute("width",vt.toString());let yn;(yn=this.svgGroup_)==null||yn.setAttribute("height",Et.toString()),this.workspace_.setCachedParentSvgSize(vt,Et);let Mn;if(((Mn=this.svgGroup_)==null?void 0:Mn.tagName)==="svg")Xr(this.svgGroup_,"translate("+Dt+"px,"+Ft+"px)");else{let qn;(qn=this.svgGroup_)==null||qn.setAttribute("transform","translate("+Dt+","+Ft+")")}(vt=this.workspace_.scrollbar)&&(vt.setOrigin(Dt,Ft),vt.resize(),vt.hScroll&&vt.hScroll.setPosition(vt.hScroll.position.x,vt.hScroll.position.y),vt.vScroll&&vt.vScroll.setPosition(vt.vScroll.position.x,vt.vScroll.position.y))}hide(){if(this.isVisible()){this.setVisible(!1);for(let vt=0,Et;Et=this.listeners_[vt];vt++)cn(Et);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}}show(vt){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),typeof vt=="string"&&(vt=this.getDynamicCategoryContents_(vt)),this.setVisible(!0),vt=om(vt),vt=this.createFlyoutInfo_(vt),this.layout_(vt.contents,vt.gaps),this.listeners_.push(Zt(this.svgBackground_,"pointerover",this,function(){const Et=this.workspace_.getTopBlocks(!1);for(let Dt=0,Ft;Ft=Et[Dt];Dt++)Ft.removeSelect()})),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_),this.emptyRecycledBlocks_()}createFlyoutInfo_(vt){const Et=[],Dt=[];this.permanentlyDisabled_.length=0;const Ft=this.horizontalLayout?this.GAP_X:this.GAP_Y;for(let yn=0,Mn;Mn=vt[yn];yn++){if("custom"in Mn){var Kt=this.getDynamicCategoryContents_(Mn.custom);Kt=om(Kt),vt.splice.apply(vt,[yn,1,...Kt]),Mn=vt[yn]}switch(Mn.kind.toUpperCase()){case"BLOCK":Kt=Mn;const qn=this.createFlyoutBlock_(Kt);Et.push({type:MO.BLOCK,block:qn}),this.addBlockGap_(Kt,Dt,Ft);break;case"SEP":this.addSeparatorGap_(Mn,Dt,Ft);break;case"LABEL":Kt=this.createButton_(Mn,!0),Et.push({type:MO.BUTTON,button:Kt}),Dt.push(Ft);break;case"BUTTON":Kt=this.createButton_(Mn,!1),Et.push({type:MO.BUTTON,button:Kt}),Dt.push(Ft)}}return{contents:Et,gaps:Dt}}getDynamicCategoryContents_(vt){if(vt=this.workspace_.targetWorkspace.getToolboxCategoryCallback(vt),typeof vt!="function")throw TypeError("Couldn't find a callback function when opening a toolbox category.");return vt(this.workspace_.targetWorkspace)}createButton_(vt,Et){return new kO(this.workspace_,this.targetWorkspace,vt,Et)}createFlyoutBlock_(vt){let Et;return vt.blockxml?(vt=typeof vt.blockxml=="string"?na(vt.blockxml):vt.blockxml,(Et=this.getRecycledBlock_(vt.getAttribute("type")))||(Et=Fu(vt,this.workspace_))):(Et=this.getRecycledBlock_(vt.type),Et||(vt.enabled===void 0&&(vt.enabled=vt.disabled!=="true"&&vt.disabled!==!0),Et=np(vt,this.workspace_))),Et.isEnabled()||this.permanentlyDisabled_.push(Et),Et}getRecycledBlock_(vt){let Et=-1;for(let Dt=0;Dt<this.recycledBlocks_.length;Dt++)if(this.recycledBlocks_[Dt].type===vt){Et=Dt;break}return Et===-1?void 0:this.recycledBlocks_.splice(Et,1)[0]}addBlockGap_(vt,Et,Dt){let Ft;vt.gap?Ft=parseInt(vt.gap.toString()):vt.blockxml&&(vt=typeof vt.blockxml=="string"?na(vt.blockxml):vt.blockxml,Ft=parseInt(vt.getAttribute("gap"))),Et.push(!Ft||isNaN(Ft)?Dt:Ft)}addSeparatorGap_(vt,Et,Dt){vt=parseInt(vt.gap.toString()),!isNaN(vt)&&0<Et.length?Et[Et.length-1]=vt:Et.push(Dt)}clearOldBlocks_(){var vt=this.workspace_.getTopBlocks(!1);for(let Dt=0,Ft;Ft=vt[Dt];Dt++)this.blockIsRecyclable_(Ft)?this.recycleBlock_(Ft):Ft.dispose(!1,!1);for(vt=0;vt<this.mats_.length;vt++){const Dt=this.mats_[vt];Dt&&(ga(Dt),br(Dt))}this.mats_.length=0;for(let Dt=0,Ft;Ft=this.buttons_[Dt];Dt++)Ft.dispose();this.buttons_.length=0;let Et;(Et=this.workspace_.getPotentialVariableMap())==null||Et.clear()}emptyRecycledBlocks_(){for(let vt=0;vt<this.recycledBlocks_.length;vt++)this.recycledBlocks_[vt].dispose();this.recycledBlocks_=[]}blockIsRecyclable_(vt){return!1}recycleBlock_(vt){const Et=vt.getRelativeToSurfaceXY();vt.moveBy(-Et.x,-Et.y),this.recycledBlocks_.push(vt)}addBlockListeners_(vt,Et,Dt){this.listeners_.push(Zt(vt,"pointerdown",null,this.blockMouseDown_(Et))),this.listeners_.push(Zt(Dt,"pointerdown",null,this.blockMouseDown_(Et))),this.listeners_.push(ln(vt,"pointerenter",Et,Et.addSelect)),this.listeners_.push(ln(vt,"pointerleave",Et,Et.removeSelect)),this.listeners_.push(ln(Dt,"pointerenter",Et,Et.addSelect)),this.listeners_.push(ln(Dt,"pointerleave",Et,Et.removeSelect))}blockMouseDown_(vt){return Et=>{const Dt=this.targetWorkspace.getGesture(Et);Dt&&(Dt.setStartBlock(vt),Dt.handleFlyoutStart(Et,this))}}onMouseDown_(vt){const Et=this.targetWorkspace.getGesture(vt);Et&&Et.handleFlyoutStart(vt,this)}isBlockCreatable(vt){return vt.isEnabled()}createBlock(vt){let Et=null;Bo();var Dt=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{Et=this.placeNewBlock_(vt)}finally{yo()}if(this.targetWorkspace.hideChaff(),vt=BO(this.targetWorkspace,Dt),os()){for(io(!0),Dt=0;Dt<vt.length;Dt++){const Ft=vt[Dt];Fr(new(Vr(l_))(Ft))}Fr(new(Vr($l))(Et))}return this.autoClose?this.hide():this.filterForCapacity_(),Et}initFlyoutButton_(vt,Et,Dt){const Ft=vt.createDom();vt.moveTo(Et,Dt),vt.show(),this.listeners_.push(Zt(Ft,"pointerdown",this,this.onMouseDown_)),this.buttons_.push(vt)}createRect_(vt,Et,Dt,Ft,Kt){return Et=In(ar.RECT,{"fill-opacity":0,x:Et,y:Dt,height:Ft.height,width:Ft.width}),Et.tooltip=vt,Tp(Et),this.workspace_.getCanvas().insertBefore(Et,vt.getSvgRoot()),this.rectMap_.set(vt,Et),this.mats_[Kt]=Et}moveRectToBlock_(vt,Et){const Dt=Et.getHeightWidth();vt.setAttribute("width",Dt.width.toString()),vt.setAttribute("height",Dt.height.toString()),Et=Et.getRelativeToSurfaceXY(),vt.setAttribute("y",Et.y.toString()),vt.setAttribute("x",(this.RTL?Et.x-Dt.width:Et.x).toString())}filterForCapacity_(){const vt=this.workspace_.getTopBlocks(!1);for(let Et=0,Dt;Dt=vt[Et];Et++)if(this.permanentlyDisabled_.indexOf(Dt)===-1){const Ft=this.targetWorkspace.isCapacityAvailable(Qn(Dt));for(;Dt;)Dt.setEnabled(Ft),Dt=Dt.getNextBlock()}}reflow(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)}isScrollable(){return this.workspace_.scrollbar?this.workspace_.scrollbar.isVisible():!1}placeNewBlock_(vt){var Et=this.targetWorkspace;if(!vt.getSvgRoot())throw Error("oldBlock is not rendered.");const Dt=eu(vt);return Et.setResizesEnabled(!1),Et=np(Dt,Et),this.positionNewBlock_(vt,Et),Et}positionNewBlock_(vt,Et){const Dt=this.targetWorkspace;var Ft=Dt.getOriginOffsetInPixels(),Kt=this.workspace_.getOriginOffsetInPixels();vt=vt.getRelativeToSurfaceXY(),vt.scale(this.workspace_.scale),Kt=Zr.sum(Kt,vt),Ft=Zr.difference(Kt,Ft),Ft.scale(1/Dt.scale),Et.moveTo(new Zr(Ft.x,Ft.y))}};Jv.FlyoutItemType=MO;var M$=class extends Jv{constructor(vt){super(vt)}setMetrics_(vt){if(this.isVisible()){var Et=this.workspace_.getMetricsManager(),Dt=Et.getScrollMetrics(),Ft=Et.getViewMetrics();Et=Et.getAbsoluteMetrics(),typeof vt.y=="number"&&(this.workspace_.scrollY=-(Dt.top+(Dt.height-Ft.height)*vt.y)),this.workspace_.translate(this.workspace_.scrollX+Et.left,this.workspace_.scrollY+Et.top)}}getX(){if(!this.isVisible())return 0;var vt=this.targetWorkspace.getMetricsManager();const Et=vt.getAbsoluteMetrics(),Dt=vt.getViewMetrics();return vt=vt.getToolboxMetrics(),this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_===Co.LEFT?vt.width:Dt.width-this.width_:this.toolboxPosition_===Co.LEFT?0:Dt.width:this.toolboxPosition_===Co.LEFT?0:Dt.width+Et.left-this.width_}getY(){return 0}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var vt=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=vt.height,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,vt.height-2*this.CORNER_RADIUS),vt=this.getX();var Et=this.getY();this.positionAt_(this.width_,this.height_,vt,Et)}}setBackgroundPath_(vt,Et){const Dt=this.toolboxPosition_===Co.RIGHT;var Ft=vt+this.CORNER_RADIUS;Ft=["M "+(Dt?Ft:0)+",0"],Ft.push("h",Dt?-vt:vt),Ft.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,Dt?0:1,Dt?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),Ft.push("v",Math.max(0,Et)),Ft.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,Dt?0:1,Dt?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),Ft.push("h",Dt?vt:-vt),Ft.push("z"),this.svgBackground_.setAttribute("d",Ft.join(" "))}scrollToStart(){let vt;(vt=this.workspace_.scrollbar)==null||vt.setY(0)}wheel_(vt){var Et=gn(vt);if(Et.y){const Dt=this.workspace_.getMetricsManager(),Ft=Dt.getScrollMetrics();Et=Dt.getViewMetrics().top-Ft.top+Et.y;let Kt;(Kt=this.workspace_.scrollbar)==null||Kt.setY(Et),ba(),cs()}vt.preventDefault(),vt.stopPropagation()}layout_(vt,Et){this.workspace_.scale=this.targetWorkspace.scale;var Dt=this.MARGIN;const Ft=this.RTL?Dt:Dt+this.tabWidth_;for(let qn=0,Cr;Cr=vt[qn];qn++)if(Cr.type==="block"){var Kt=Cr.block,yn=Kt.getDescendants(!1);for(let jo=0,gs;gs=yn[jo];jo++)gs.isInFlyout=!0;Kt.render(),yn=Kt.getSvgRoot();const qr=Kt.getHeightWidth();var Mn=Kt.outputConnection?Ft-this.tabWidth_:Ft;Kt.moveBy(Mn,Dt),Mn=this.createRect_(Kt,this.RTL?Mn-qr.width:Mn,Dt,qr,qn),this.addBlockListeners_(yn,Kt,Mn),Dt+=qr.height+Et[qn]}else Cr.type==="button"&&(Kt=Cr.button,this.initFlyoutButton_(Kt,Ft,Dt),Dt+=Kt.height+Et[qn])}isDragTowardWorkspace(vt){vt=Math.atan2(vt.y,vt.x)/Math.PI*180;const Et=this.dragAngleRange_;return vt<Et&&vt>-Et||vt<-180+Et||vt>180-Et}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const vt=this.svgGroup_.getBoundingClientRect(),Et=vt.left;return this.toolboxPosition_===Co.LEFT?new xs(-1e9,1e9,-1e9,Et+vt.width):new xs(-1e9,1e9,Et,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let vt=0;var Et=this.workspace_.getTopBlocks(!1);for(let Ft=0,Kt;Kt=Et[Ft];Ft++){var Dt=Kt.getHeightWidth().width;Kt.outputConnection&&(Dt-=this.tabWidth_),vt=Math.max(vt,Dt)}for(let Ft=0,Kt;Kt=this.buttons_[Ft];Ft++)vt=Math.max(vt,Kt.width);if(vt+=1.5*this.MARGIN+this.tabWidth_,vt*=this.workspace_.scale,vt+=bs.scrollbarThickness,this.width_!==vt){for(let Ft=0,Kt;Kt=Et[Ft];Ft++){if(this.RTL){Dt=Kt.getRelativeToSurfaceXY().x;let yn=vt/this.workspace_.scale-this.MARGIN;Kt.outputConnection||(yn-=this.tabWidth_),Kt.moveBy(yn-Dt,0)}this.rectMap_.has(Kt)&&this.moveRectToBlock_(this.rectMap_.get(Kt),Kt)}if(this.RTL)for(let Ft=0,Kt;Kt=this.buttons_[Ft];Ft++)Et=Kt.getPosition().y,Kt.moveTo(vt/this.workspace_.scale-Kt.width-this.MARGIN-this.tabWidth_,Et);this.targetWorkspace.toolboxPosition!==this.toolboxPosition_||this.toolboxPosition_!==Co.LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+vt,this.targetWorkspace.scrollY),this.width_=vt,this.position(),this.targetWorkspace.recordDragTargets()}}};M$.registryName="verticalFlyout",xo(Wr.FLYOUTS_VERTICAL_TOOLBOX,Bp,M$);var ME=class extends Jv{constructor(vt){super(vt),this.horizontalLayout=!0}setMetrics_(vt){if(this.isVisible()){var Et=this.workspace_.getMetricsManager(),Dt=Et.getScrollMetrics(),Ft=Et.getViewMetrics();Et=Et.getAbsoluteMetrics(),typeof vt.x=="number"&&(this.workspace_.scrollX=-(Dt.left+(Dt.width-Ft.width)*vt.x)),this.workspace_.translate(this.workspace_.scrollX+Et.left,this.workspace_.scrollY+Et.top)}}getX(){return 0}getY(){if(!this.isVisible())return 0;var vt=this.targetWorkspace.getMetricsManager();const Et=vt.getAbsoluteMetrics(),Dt=vt.getViewMetrics();vt=vt.getToolboxMetrics();const Ft=this.toolboxPosition_===Co.TOP;return this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?Ft?vt.height:Dt.height-this.height_:Ft?0:Dt.height:Ft?0:Dt.height+Et.top-this.height_}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var vt=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=vt.width,this.setBackgroundPath_(vt.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),vt=this.getX();var Et=this.getY();this.positionAt_(this.width_,this.height_,vt,Et)}}setBackgroundPath_(vt,Et){const Dt=this.toolboxPosition_===Co.TOP,Ft=["M 0,"+(Dt?0:this.CORNER_RADIUS)];Dt?(Ft.push("h",vt+2*this.CORNER_RADIUS),Ft.push("v",Et),Ft.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),Ft.push("h",-vt),Ft.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(Ft.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),Ft.push("h",vt),Ft.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),Ft.push("v",Et),Ft.push("h",-vt-2*this.CORNER_RADIUS)),Ft.push("z"),this.svgBackground_.setAttribute("d",Ft.join(" "))}scrollToStart(){let vt;(vt=this.workspace_.scrollbar)==null||vt.setX(this.RTL?1/0:0)}wheel_(vt){var Et=gn(vt);if(Et=Et.x||Et.y){const Dt=this.workspace_.getMetricsManager(),Ft=Dt.getScrollMetrics();Et=Dt.getViewMetrics().left-Ft.left+Et;let Kt;(Kt=this.workspace_.scrollbar)==null||Kt.setX(Et),ba(),cs()}vt.preventDefault(),vt.stopPropagation()}layout_(vt,Et){this.workspace_.scale=this.targetWorkspace.scale;const Dt=this.MARGIN;let Ft=Dt+this.tabWidth_;this.RTL&&(vt=vt.reverse());for(let qn=0,Cr;Cr=vt[qn];qn++)if(Cr.type==="block"){var Kt=Cr.block,yn=Kt.getDescendants(!1);for(let jo=0,gs;gs=yn[jo];jo++)gs.isInFlyout=!0;Kt.render(),yn=Kt.getSvgRoot();const qr=Kt.getHeightWidth();var Mn=Kt.outputConnection?this.tabWidth_:0;Mn=this.RTL?Ft+qr.width:Ft-Mn,Kt.moveBy(Mn,Dt),Mn=this.createRect_(Kt,Mn,Dt,qr,qn),Ft+=qr.width+Et[qn],this.addBlockListeners_(yn,Kt,Mn)}else Cr.type==="button"&&(Kt=Cr.button,this.initFlyoutButton_(Kt,Ft,Dt),Ft+=Kt.width+Et[qn])}isDragTowardWorkspace(vt){vt=Math.atan2(vt.y,vt.x)/Math.PI*180;const Et=this.dragAngleRange_;return vt<90+Et&&vt>90-Et||vt>-90-Et&&vt<-90+Et}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const vt=this.svgGroup_.getBoundingClientRect(),Et=vt.top;return this.toolboxPosition_===Co.TOP?new xs(-1e9,Et+vt.height,-1e9,1e9):new xs(Et,1e9,-1e9,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let vt=0;const Et=this.workspace_.getTopBlocks(!1);for(let Ft=0,Kt;Kt=Et[Ft];Ft++)vt=Math.max(vt,Kt.getHeightWidth().height);const Dt=this.buttons_;for(let Ft=0,Kt;Kt=Dt[Ft];Ft++)vt=Math.max(vt,Kt.height);if(vt+=1.5*this.MARGIN,vt*=this.workspace_.scale,vt+=bs.scrollbarThickness,this.height_!==vt){for(let Ft=0,Kt;Kt=Et[Ft];Ft++)this.rectMap_.has(Kt)&&this.moveRectToBlock_(this.rectMap_.get(Kt),Kt);this.targetWorkspace.toolboxPosition!==this.toolboxPosition_||this.toolboxPosition_!==Co.TOP||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+vt),this.height_=vt,this.position(),this.targetWorkspace.recordDragTargets()}}};xo(Wr.FLYOUTS_HORIZONTAL_TOOLBOX,Bp,ME);var x0=class extends Ku{constructor(vt,Et,Dt,Ft,Kt){super(Qo.SKIP_SETUP),this.defaultType_="",this.variableTypes=[],this.variable_=null,this.SERIALIZABLE=!0,this.menuGenerator_=x0.dropdownCreate,this.defaultVariableName=typeof vt=="string"?vt:"",this.size_=new qs(0,0),vt!==Qo.SKIP_SETUP&&(Kt?this.configure_(Kt):this.setTypes_(Dt,Ft),Et&&this.setValidator(Et))}configure_(vt){super.configure_(vt),this.setTypes_(vt.variableTypes,vt.defaultType)}initModel(){var vt=this.getSourceBlock();if(!vt)throw new Ls;this.variable_||(vt=Am(vt.workspace,null,this.defaultVariableName,this.defaultType_),this.doValueUpdate_(vt.getId()))}shouldAddBorderRect_(){const vt=this.getSourceBlock();if(!vt)throw new Ls;return super.shouldAddBorderRect_()&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||vt.type!=="variables_get")}fromXml(vt){var Et=this.getSourceBlock();if(!Et)throw new Ls;const Dt=vt.getAttribute("id"),Ft=vt.textContent,Kt=vt.getAttribute("variabletype")||vt.getAttribute("variableType")||"";if(Et=Am(Et.workspace,Dt,Ft,Kt),Kt!==null&&Kt!==Et.type)throw Error("Serialized variable type with id '"+Et.getId()+"' had type "+Et.type+", and does not match variable field that references it: "+Yl(vt)+".");this.setValue(Et.getId())}toXml(vt){return this.initModel(),vt.id=this.variable_.getId(),vt.textContent=this.variable_.name,this.variable_.type&&vt.setAttribute("variabletype",this.variable_.type),vt}saveState(vt){var Et=this.saveLegacyState(x0);return Et!==null||(this.initModel(),Et={id:this.variable_.getId()},vt&&(Et.name=this.variable_.name,Et.type=this.variable_.type)),Et}loadState(vt){const Et=this.getSourceBlock();if(!Et)throw new Ls;this.loadLegacyState(x0,vt)||(vt=Am(Et.workspace,vt.id||null,vt.name,vt.type||""),this.setValue(vt.getId()))}setSourceBlock(vt){if(vt.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");super.setSourceBlock(vt)}getValue(){return this.variable_?this.variable_.getId():null}getText(){return this.variable_?this.variable_.name:""}getVariable(){return this.variable_}getValidator(){return this.variable_?this.validator_:null}doClassValidation_(vt){if(vt===null)return null;var Et=this.getSourceBlock();if(!Et)throw new Ls;return Et=Zp(Et.workspace,vt),Et?(Et=Et.type,this.typeIsAllowed_(Et)?vt:(console.warn("Variable type doesn't match this field!  Type was "+Et),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+vt),null)}doValueUpdate_(vt){const Et=this.getSourceBlock();if(!Et)throw new Ls;this.variable_=Zp(Et.workspace,vt),super.doValueUpdate_(vt)}typeIsAllowed_(vt){const Et=this.getVariableTypes_();if(!Et)return!0;for(let Dt=0;Dt<Et.length;Dt++)if(vt===Et[Dt])return!0;return!1}getVariableTypes_(){var vt=this.variableTypes;if(vt===null&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())return this.sourceBlock_.workspace.getVariableTypes();if(vt=vt||[""],vt.length===0)throw vt=this.getText(),Error("'variableTypes' of field variable "+vt+" was an empty list");return vt}setTypes_(vt,Et){if(Et=Et||"",vt==null)vt=null;else if(Array.isArray(vt)){let Dt=!1;for(let Ft=0;Ft<vt.length;Ft++)vt[Ft]===Et&&(Dt=!0);if(!Dt)throw Error("Invalid default type '"+Et+"' in the definition of a FieldVariable")}else throw Error("'variableTypes' was not an array in the definition of a FieldVariable");this.defaultType_=Et,this.variableTypes=vt}refreshVariableName(){this.forceRerender()}onItemSelected_(vt,Et){if(vt=Et.getValue(),this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()){if(vt===n$){T_(this.sourceBlock_.workspace,this.variable_);return}if(vt===r$){this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId());return}}this.setValue(vt)}referencesVariables(){return!0}static fromJson(vt){return new this(ds(vt.variable),void 0,void 0,void 0,vt)}static dropdownCreate(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");const vt=this.getText();let Et=[];if(this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())for(var Dt=this.getVariableTypes_(),Ft=0;Ft<Dt.length;Ft++){const Kt=this.sourceBlock_.workspace.getVariablesOfType(Dt[Ft]);Et=Et.concat(Kt)}for(Et.sort(Yy.compareByName),Dt=[],Ft=0;Ft<Et.length;Ft++)Dt[Ft]=[Et[Ft].name,Et[Ft].getId()];return Dt.push([$o.RENAME_VARIABLE,n$]),$o.DELETE_VARIABLE&&Dt.push([$o.DELETE_VARIABLE.replace("%1",vt),r$]),Dt}};$a("field_variable",x0);var P$=class extends T0{constructor(vt,Et,Dt,Ft,Kt,yn){super(Qo.SKIP_SETUP),this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,this.SERIALIZABLE=!0,this.spellcheck_=!1,vt!==Qo.SKIP_SETUP&&(yn?this.configure_(yn):this.setConstraints(Et,Dt,Ft),this.setValue(vt),Kt&&this.setValidator(Kt))}configure_(vt){super.configure_(vt),this.setMinInternal_(vt.min),this.setMaxInternal_(vt.max),this.setPrecisionInternal_(vt.precision)}setConstraints(vt,Et,Dt){this.setMinInternal_(vt),this.setMaxInternal_(Et),this.setPrecisionInternal_(Dt),this.setValue(this.getValue())}setMin(vt){this.setMinInternal_(vt),this.setValue(this.getValue())}setMinInternal_(vt){vt==null?this.min_=-1/0:(vt=Number(vt),isNaN(vt)||(this.min_=vt))}getMin(){return this.min_}setMax(vt){this.setMaxInternal_(vt),this.setValue(this.getValue())}setMaxInternal_(vt){vt==null?this.max_=1/0:(vt=Number(vt),isNaN(vt)||(this.max_=vt))}getMax(){return this.max_}setPrecision(vt){this.setPrecisionInternal_(vt),this.setValue(this.getValue())}setPrecisionInternal_(vt){this.precision_=Number(vt)||0;let Et=String(this.precision_);Et.indexOf("e")!==-1&&(Et=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));const Dt=Et.indexOf(".");this.decimalPlaces_=Dt===-1?vt?0:null:Et.length-Dt-1}getPrecision(){return this.precision_}doClassValidation_(vt){return vt===null||(vt=String(vt),vt=vt.replace(/O/ig,"0"),vt=vt.replace(/,/g,""),vt=vt.replace(/infinity/i,"Infinity"),vt=Number(vt||0),isNaN(vt))?null:(vt=Math.min(Math.max(vt,this.min_),this.max_),this.precision_&&isFinite(vt)&&(vt=Math.round(vt/this.precision_)*this.precision_),this.decimalPlaces_!==null&&(vt=Number(vt.toFixed(this.decimalPlaces_))),vt)}widgetCreate_(){const vt=super.widgetCreate_();return-1/0<this.min_&&ts(vt,ps.VALUEMIN,this.min_),1/0>this.max_&&ts(vt,ps.VALUEMAX,this.max_),vt}static fromJson(vt){return new this(vt.value,void 0,void 0,void 0,void 0,vt)}};$a("field_number",P$),P$.prototype.DEFAULT_VALUE=0;var L$=class extends lt.FieldTextInput$$module$build$src$core$field_textinput{constructor(vt,Et,Dt){super(Qo.SKIP_SETUP),this.textGroup_=null,this.maxLines_=1/0,this.isOverflowedY_=!1,vt!==Qo.SKIP_SETUP&&(Dt&&this.configure_(Dt),this.setValue(vt),Et&&this.setValidator(Et))}configure_(vt){super.configure_(vt),vt.maxLines&&this.setMaxLines(vt.maxLines)}toXml(vt){return vt.textContent=this.getValue().replace(/\n/g,"&#10;"),vt}fromXml(vt){this.setValue(vt.textContent.replace(/&#10;/g,`
`))}saveState(){const vt=this.saveLegacyState(L$);return vt!==null?vt:this.getValue()}loadState(vt){this.loadLegacyState(Qo,vt)||this.setValue(vt)}initView(){this.createBorderRect_(),this.textGroup_=In(ar.G,{class:"blocklyEditableText"},this.fieldGroup_)}getDisplayText_(){const vt=this.getSourceBlock();if(!vt)throw new Ls;let Et=this.getText();if(!Et)return Qo.NBSP;const Dt=Et.split(`
`);Et="";const Ft=this.isOverflowedY_?this.maxLines_:Dt.length;for(let Kt=0;Kt<Ft;Kt++){let yn=Dt[Kt];yn.length>this.maxDisplayLength?yn=yn.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&Kt===Ft-1&&(yn=yn.substring(0,yn.length-3)+"..."),yn=yn.replace(/\s/g,Qo.NBSP),Et+=yn,Kt!==Ft-1&&(Et+=`
`)}return vt.RTL&&(Et+=""),Et}doValueUpdate_(vt){super.doValueUpdate_(vt),this.isOverflowedY_=this.value_.split(`
`).length>this.maxLines_}render_(){var vt=this.getSourceBlock();if(!vt)throw new Ls;for(var Et;Et=this.textGroup_.firstChild;)this.textGroup_.removeChild(Et);Et=this.getDisplayText_().split(`
`);let Dt=0;for(let Ft=0;Ft<Et.length;Ft++){const Kt=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;In(ar.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:Dt+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},this.textGroup_).appendChild(document.createTextNode(Et[Ft])),Dt+=Kt}this.isBeingEdited_&&(Et=this.htmlInput_,this.isOverflowedY_?ir(Et,"blocklyHtmlTextAreaInputOverflowedY"):Jn(Et,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(vt.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),vt=this.htmlInput_,this.isTextValid_?(Jn(vt,"blocklyInvalidInput"),ts(vt,ps.INVALID,!1)):(ir(vt,"blocklyInvalidInput"),ts(vt,ps.INVALID,!0)))}updateSize_(){var vt=this.textGroup_.childNodes;const Et=this.getConstants().FIELD_TEXT_FONTSIZE,Dt=this.getConstants().FIELD_TEXT_FONTWEIGHT,Ft=this.getConstants().FIELD_TEXT_FONTFAMILY;let Kt=0,yn=0;for(var Mn=0;Mn<vt.length;Mn++){var qn=Qr(vt[Mn],Et,Dt,Ft);qn>Kt&&(Kt=qn),yn+=this.getConstants().FIELD_TEXT_HEIGHT+(0<Mn?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){for(vt=this.value_.split(`
`),Mn=In(ar.TEXT,{class:"blocklyText blocklyMultilineText"}),qn=0;qn<vt.length;qn++){vt[qn].length>this.maxDisplayLength&&(vt[qn]=vt[qn].substring(0,this.maxDisplayLength)),Mn.textContent=vt[qn];const Cr=Qr(Mn,Et,Dt,Ft);Cr>Kt&&(Kt=Cr)}Kt+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(yn+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,Kt+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",Kt),this.borderRect_.setAttribute("height",yn)),this.size_.width=Kt,this.size_.height=yn,this.positionBorderRect_()}showEditor_(vt,Et){super.showEditor_(vt,Et),this.forceRerender()}widgetCreate_(){const vt=Cp(),Et=this.workspace_.getScale(),Dt=document.createElement("textarea");Dt.className="blocklyHtmlInput blocklyHtmlTextAreaInput",Dt.setAttribute("spellcheck",this.spellcheck_);var Ft=this.getConstants().FIELD_TEXT_FONTSIZE*Et+"pt";vt.style.fontSize=Ft,Dt.style.fontSize=Ft,Dt.style.borderRadius=lt.FieldTextInput$$module$build$src$core$field_textinput.BORDERRADIUS*Et+"px",Ft=this.getConstants().FIELD_BORDER_RECT_X_PADDING*Et;const Kt=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*Et/2;return Dt.style.padding=Kt+"px "+Ft+"px "+Kt+"px "+Ft+"px",Ft=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,Dt.style.lineHeight=Ft*Et+"px",vt.appendChild(Dt),Dt.value=Dt.defaultValue=this.getEditorText_(this.value_),Dt.setAttribute("data-untyped-default-value",this.value_),Dt.setAttribute("data-old-value",""),so?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(Dt),Dt}setMaxLines(vt){typeof vt=="number"&&0<vt&&vt!==this.maxLines_&&(this.maxLines_=vt,this.forceRerender())}getMaxLines(){return this.maxLines_}onHtmlInputKeyDown_(vt){vt.keyCode!==lo.ENTER&&super.onHtmlInputKeyDown_(vt)}static fromJson(vt){return new this(ds(vt.text),void 0,vt)}};uu(`
.blocklyHtmlTextAreaInput {
  font-family: monospace;
  resize: none;
  overflow: hidden;
  height: 100%;
  text-align: left;
}

.blocklyHtmlTextAreaInputOverflowedY {
  overflow-y: scroll;
}
`),$a("field_multilinetext",L$);var PE=class extends lt.FieldLabel$$module$build$src$core$field_label{constructor(vt,Et,Dt){super(String(vt??""),Et,Dt),this.EDITABLE=!1,this.SERIALIZABLE=!0}static fromJson(vt){return new this(ds(vt.text),void 0,vt)}};$a("field_label_serializable",PE);var $u=class extends Qo{constructor(vt,Et,Dt){super(Qo.SKIP_SETUP),this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null,this.SERIALIZABLE=!0,this.CURSOR="default",this.isDirty_=!1,this.titles_=this.colours_=null,this.columns_=0,vt!==Qo.SKIP_SETUP&&(Dt&&this.configure_(Dt),this.setValue(vt),Et&&this.setValidator(Et))}configure_(vt){super.configure_(vt),vt.colourOptions&&(this.colours_=vt.colourOptions),vt.colourTitles&&(this.titles_=vt.colourTitles),vt.columns&&(this.columns_=vt.columns)}initView(){this.size_=new qs(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.sourceBlock_ instanceof Lu&&(this.clickTarget_=this.sourceBlock_.getSvgRoot()):(this.createBorderRect_(),this.getBorderRect().style.fillOpacity="1")}applyColour(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.sourceBlock_ instanceof Lu&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())}doClassValidation_(vt){return typeof vt!="string"?null:Uu(vt)}doValueUpdate_(vt){this.value_=vt,this.borderRect_?this.borderRect_.style.fill=vt:this.sourceBlock_&&this.sourceBlock_.rendered&&this.sourceBlock_ instanceof Lu&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",vt),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))}getText(){let vt=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(vt)&&(vt="#"+vt[1]+vt[3]+vt[5]),vt}setColours(vt,Et){return this.colours_=vt,Et&&(this.titles_=Et),this}setColumns(vt){return this.columns_=vt,this}showEditor_(){this.dropdownCreate_(),Sr().appendChild(this.picker_),Zn(this,this.dropdownDispose_.bind(this)),this.picker_.focus({preventScroll:!0})}onClick_(vt){vt=(vt=vt.target)&&vt.getAttribute("data-colour"),vt!==null&&(this.setValue(vt),Gs(this))}onKeyDown_(vt){var Et=!1;vt.keyCode===lo.UP?(this.moveHighlightBy_(0,-1),Et=!0):vt.keyCode===lo.DOWN?(this.moveHighlightBy_(0,1),Et=!0):vt.keyCode===lo.LEFT?(this.moveHighlightBy_(-1,0),Et=!0):vt.keyCode===lo.RIGHT?(this.moveHighlightBy_(1,0),Et=!0):vt.keyCode===lo.ENTER&&((Et=this.getHighlighted_())&&(Et=Et&&Et.getAttribute("data-colour"),Et!==null&&this.setValue(Et)),cs(),Et=!0),Et&&vt.stopPropagation()}moveHighlightBy_(vt,Et){if(this.highlightedIndex_){var Dt=this.colours_||$u.COLOURS,Ft=this.columns_||$u.COLUMNS,Kt=this.highlightedIndex_%Ft,yn=Math.floor(this.highlightedIndex_/Ft);Kt+=vt,yn+=Et,0>vt?0>Kt&&0<yn?(Kt=Ft-1,yn--):0>Kt&&(Kt=0):0<vt?Kt>Ft-1&&yn<Math.floor(Dt.length/Ft)-1?(Kt=0,yn++):Kt>Ft-1&&Kt--:0>Et?0>yn&&(yn=0):0<Et&&yn>Math.floor(Dt.length/Ft)-1&&(yn=Math.floor(Dt.length/Ft)-1),this.setHighlightedCell_(this.picker_.childNodes[yn].childNodes[Kt],yn*Ft+Kt)}}onMouseMove_(vt){const Et=(vt=vt.target)&&Number(vt.getAttribute("data-index"));Et!==null&&Et!==this.highlightedIndex_&&this.setHighlightedCell_(vt,Et)}onMouseEnter_(){this.picker_.focus({preventScroll:!0})}onMouseLeave_(){this.picker_.blur();const vt=this.getHighlighted_();vt&&Jn(vt,"blocklyColourHighlighted")}getHighlighted_(){if(!this.highlightedIndex_)return null;const vt=this.columns_||$u.COLUMNS,Et=this.picker_.childNodes[Math.floor(this.highlightedIndex_/vt)];return Et?Et.childNodes[this.highlightedIndex_%vt]:null}setHighlightedCell_(vt,Et){const Dt=this.getHighlighted_();Dt&&Jn(Dt,"blocklyColourHighlighted"),ir(vt,"blocklyColourHighlighted"),this.highlightedIndex_=Et,ts(this.picker_,ps.ACTIVEDESCENDANT,vt.getAttribute("id"))}dropdownCreate_(){const vt=this.columns_||$u.COLUMNS,Et=this.colours_||$u.COLOURS,Dt=this.titles_||$u.TITLES,Ft=this.getValue(),Kt=document.createElement("table");Kt.className="blocklyColourTable",Kt.tabIndex=0,Kt.dir="ltr",Ss(Kt,su.GRID),ts(Kt,ps.EXPANDED,!0),ts(Kt,ps.ROWCOUNT,Math.floor(Et.length/vt)),ts(Kt,ps.COLCOUNT,vt);let yn;for(let Mn=0;Mn<Et.length;Mn++){Mn%vt===0&&(yn=document.createElement("tr"),Ss(yn,su.ROW),Kt.appendChild(yn));const qn=document.createElement("td");yn.appendChild(qn),qn.setAttribute("data-colour",Et[Mn]),qn.title=Dt[Mn]||Et[Mn],qn.id=Lo(),qn.setAttribute("data-index",Mn),Ss(qn,su.GRIDCELL),ts(qn,ps.LABEL,Et[Mn]),ts(qn,ps.SELECTED,Et[Mn]===Ft),qn.style.backgroundColor=Et[Mn],Et[Mn]===Ft&&(qn.className="blocklyColourSelected",this.highlightedIndex_=Mn)}this.onClickWrapper_=Zt(Kt,"pointerdown",this,this.onClick_,!0),this.onMouseMoveWrapper_=Zt(Kt,"pointermove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=Zt(Kt,"pointerenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=Zt(Kt,"pointerleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=Zt(Kt,"keydown",this,this.onKeyDown_),this.picker_=Kt}dropdownDispose_(){this.onClickWrapper_&&(cn(this.onClickWrapper_),this.onClickWrapper_=null),this.onMouseMoveWrapper_&&(cn(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null),this.onMouseEnterWrapper_&&(cn(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null),this.onMouseLeaveWrapper_&&(cn(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null),this.onKeyDownWrapper_&&(cn(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.highlightedIndex_=this.picker_=null}static fromJson(vt){return new this(vt.colour,void 0,vt)}};$u.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),$u.TITLES=[],$u.COLUMNS=7,$u.prototype.DEFAULT_VALUE=$u.COLOURS[0],uu(`
.blocklyColourTable {
  border-collapse: collapse;
  display: block;
  outline: none;
  padding: 1px;
}

.blocklyColourTable>tr>td {
  border: .5px solid #888;
  box-sizing: border-box;
  cursor: pointer;
  display: inline-block;
  height: 20px;
  padding: 0;
  width: 20px;
}

.blocklyColourTable>tr>td.blocklyColourHighlighted {
  border-color: #eee;
  box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);
  position: relative;
}

.blocklyColourSelected, .blocklyColourSelected:hover {
  border-color: #eee !important;
  outline: 1px solid #333;
  position: relative;
}
`),$a("field_colour",$u),lt.FieldCheckbox$$module$build$src$core$field_checkbox=class extends Qo{constructor(vt,Et,Dt){super(Qo.SKIP_SETUP),this.SERIALIZABLE=!0,this.CURSOR="default",this.checkChar_=lt.FieldCheckbox$$module$build$src$core$field_checkbox.CHECK_CHAR,vt!==Qo.SKIP_SETUP&&(Dt&&this.configure_(Dt),this.setValue(vt),Et&&this.setValidator(Et))}configure_(vt){super.configure_(vt),vt.checkCharacter&&(this.checkChar_=vt.checkCharacter)}saveState(){const vt=this.saveLegacyState(lt.FieldCheckbox$$module$build$src$core$field_checkbox);return vt!==null?vt:this.getValueBoolean()}initView(){super.initView();const vt=this.getTextElement();ir(vt,"blocklyCheckbox"),vt.style.display=this.value_?"block":"none"}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)}getDisplayText_(){return this.checkChar_}setCheckCharacter(vt){this.checkChar_=vt||lt.FieldCheckbox$$module$build$src$core$field_checkbox.CHECK_CHAR,this.forceRerender()}showEditor_(){this.setValue(!this.value_)}doClassValidation_(vt){return vt===!0||vt==="TRUE"?"TRUE":vt===!1||vt==="FALSE"?"FALSE":null}doValueUpdate_(vt){this.value_=this.convertValueToBool_(vt),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")}getValue(){return this.value_?"TRUE":"FALSE"}getValueBoolean(){return this.value_}getText(){return String(this.convertValueToBool_(this.value_))}convertValueToBool_(vt){return typeof vt=="string"?vt==="TRUE":!!vt}static fromJson(vt){return new this(vt.checked,void 0,vt)}},lt.FieldCheckbox$$module$build$src$core$field_checkbox.CHECK_CHAR="",$a("field_checkbox",lt.FieldCheckbox$$module$build$src$core$field_checkbox),lt.FieldCheckbox$$module$build$src$core$field_checkbox.prototype.DEFAULT_VALUE=!1,lt.FieldCheckbox$$module$build$src$core$field_checkbox;var Uo=class extends T0{constructor(vt,Et,Dt){super(Qo.SKIP_SETUP),this.clockwise_=Uo.CLOCKWISE,this.offset_=Uo.OFFSET,this.wrap_=Uo.WRAP,this.round_=Uo.ROUND,this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.symbol_=this.line_=this.gauge_=this.editor_=null,this.SERIALIZABLE=!0,vt!==Qo.SKIP_SETUP&&(Dt&&this.configure_(Dt),this.setValue(vt),Et&&this.setValidator(Et))}configure_(vt){switch(super.configure_(vt),vt.mode){case _b.COMPASS:this.clockwise_=!0,this.offset_=90;break;case _b.PROTRACTOR:this.clockwise_=!1,this.offset_=0}vt.clockwise&&(this.clockwise_=vt.clockwise),vt.offset&&(this.offset_=vt.offset),vt.wrap&&(this.wrap_=vt.wrap),vt.round&&(this.round_=vt.round)}initView(){super.initView(),this.symbol_=In(ar.TSPAN,{}),this.symbol_.appendChild(document.createTextNode("")),this.getTextElement().appendChild(this.symbol_)}render_(){super.render_(),this.updateGraph_()}showEditor_(vt){super.showEditor_(vt,Bs||Io||vo),this.dropdownCreate_(),Sr().appendChild(this.editor_),this.sourceBlock_ instanceof Lu&&En(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),Zn(this,this.dropdownDispose_.bind(this)),this.updateGraph_()}dropdownCreate_(){const vt=In(ar.SVG,{xmlns:Vl,"xmlns:html":yu,"xmlns:xlink":iu,version:"1.1",height:2*Uo.HALF+"px",width:2*Uo.HALF+"px",style:"touch-action: none"}),Et=In(ar.CIRCLE,{cx:Uo.HALF,cy:Uo.HALF,r:Uo.RADIUS,class:"blocklyAngleCircle"},vt);this.gauge_=In(ar.PATH,{class:"blocklyAngleGauge"},vt),this.line_=In(ar.LINE,{x1:Uo.HALF,y1:Uo.HALF,class:"blocklyAngleLine"},vt);for(let Dt=0;360>Dt;Dt+=15)In(ar.LINE,{x1:Uo.HALF+Uo.RADIUS,y1:Uo.HALF,x2:Uo.HALF+Uo.RADIUS-(Dt%45===0?10:5),y2:Uo.HALF,class:"blocklyAngleMarks",transform:"rotate("+Dt+","+Uo.HALF+","+Uo.HALF+")"},vt);this.clickWrapper_=Zt(vt,"click",this,this.hide_),this.clickSurfaceWrapper_=Zt(Et,"pointerdown",this,this.onMouseMove_,!0),this.moveSurfaceWrapper_=Zt(Et,"pointermove",this,this.onMouseMove_,!0),this.editor_=vt}dropdownDispose_(){this.clickWrapper_&&(cn(this.clickWrapper_),this.clickWrapper_=null),this.clickSurfaceWrapper_&&(cn(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null),this.moveSurfaceWrapper_&&(cn(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null),this.line_=this.gauge_=null}hide_(){Gs(this),ba()}onMouseMove_(vt){var Et=this.gauge_.ownerSVGElement.getBoundingClientRect();const Dt=vt.clientX-Et.left-Uo.HALF;vt=vt.clientY-Et.top-Uo.HALF,Et=Math.atan(-vt/Dt),isNaN(Et)||(Et=co(Et),0>Dt?Et+=180:0<vt&&(Et+=360),Et=this.clockwise_?this.offset_+360-Et:360-(this.offset_-Et),this.displayMouseOrKeyboardValue_(Et))}displayMouseOrKeyboardValue_(vt){this.round_&&(vt=Math.round(vt/this.round_)*this.round_),vt=this.wrapValue_(vt),vt!==this.value_&&this.setEditorValue_(vt)}updateGraph_(){if(this.gauge_){var vt=Number(this.getText())+this.offset_,Et=to(vt%360);vt=["M ",Uo.HALF,",",Uo.HALF];var Dt=Uo.HALF,Ft=Uo.HALF;if(!isNaN(Et)){const Kt=Number(this.clockwise_),yn=to(this.offset_),Mn=Math.cos(yn)*Uo.RADIUS,qn=Math.sin(yn)*-Uo.RADIUS;Kt&&(Et=2*yn-Et),Dt+=Math.cos(Et)*Uo.RADIUS,Ft-=Math.sin(Et)*Uo.RADIUS,Et=Math.abs(Math.floor((Et-yn)/Math.PI)%2),Kt&&(Et=1-Et),vt.push(" l ",Mn,",",qn," A ",Uo.RADIUS,",",Uo.RADIUS," 0 ",Et," ",Kt," ",Dt,",",Ft," z")}this.gauge_.setAttribute("d",vt.join("")),this.line_.setAttribute("x2",Dt),this.line_.setAttribute("y2",Ft)}}onHtmlInputKeyDown_(vt){super.onHtmlInputKeyDown_(vt);var Et=this.getSourceBlock();if(!Et)throw new Ls;let Dt;vt.keyCode===lo.LEFT?Dt=Et.RTL?1:-1:vt.keyCode===lo.RIGHT?Dt=Et.RTL?-1:1:vt.keyCode===lo.DOWN?Dt=-1:vt.keyCode===lo.UP&&(Dt=1),Dt&&(Et=this.getValue(),this.displayMouseOrKeyboardValue_(Et+Dt*this.round_),vt.preventDefault(),vt.stopPropagation())}doClassValidation_(vt){return vt=Number(vt),isNaN(vt)||!isFinite(vt)?null:this.wrapValue_(vt)}wrapValue_(vt){return vt%=360,0>vt&&(vt+=360),vt>this.wrap_&&(vt-=360),vt}static fromJson(vt){return new this(vt.angle,void 0,vt)}};Uo.ROUND=15,Uo.HALF=50,Uo.CLOCKWISE=!1,Uo.OFFSET=0,Uo.WRAP=360,Uo.RADIUS=Uo.HALF-1,uu(`
.blocklyAngleCircle {
  stroke: #444;
  stroke-width: 1;
  fill: #ddd;
  fill-opacity: .8;
}

.blocklyAngleMarks {
  stroke: #444;
  stroke-width: 1;
}

.blocklyAngleGauge {
  fill: #f88;
  fill-opacity: .8;
  pointer-events: none;
}

.blocklyAngleLine {
  stroke: #f00;
  stroke-width: 2;
  stroke-linecap: round;
  pointer-events: none;
}
`),$a("field_angle",Uo),Uo.prototype.DEFAULT_VALUE=0;var _b;(function(vt){vt.COMPASS="compass",vt.PROTRACTOR="protractor"})(_b||(_b={}));var D$=class extends _O{constructor(vt){super(vt),this.type=Wl,vt&&(vt.isShadow()&&(this.recordUndo=!1),vt=this.currentLocation_(),this.oldParentId=vt.parentId,this.oldInputName=vt.inputName,this.oldCoordinate=vt.coordinate)}toJson(){const vt=super.toJson();return vt.oldParentId=this.oldParentId,vt.oldInputName=this.oldInputName,this.oldCoordinate&&(vt.oldCoordinate=`${Math.round(this.oldCoordinate.x)}, ${Math.round(this.oldCoordinate.y)}`),vt.newParentId=this.newParentId,vt.newInputName=this.newInputName,this.newCoordinate&&(vt.newCoordinate=`${Math.round(this.newCoordinate.x)}, ${Math.round(this.newCoordinate.y)}`),this.recordUndo||(vt.recordUndo=this.recordUndo),vt}fromJson(vt){if(ft("Blockly.Events.BlockMove.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(vt),this.oldParentId=vt.oldParentId,this.oldInputName=vt.oldInputName,vt.oldCoordinate){var Et=vt.oldCoordinate.split(",");this.oldCoordinate=new Zr(Number(Et[0]),Number(Et[1]))}this.newParentId=vt.newParentId,this.newInputName=vt.newInputName,vt.newCoordinate&&(Et=vt.newCoordinate.split(","),this.newCoordinate=new Zr(Number(Et[0]),Number(Et[1]))),vt.recordUndo!==void 0&&(this.recordUndo=vt.recordUndo)}static fromJson(vt,Et,Dt){return Et=super.fromJson(vt,Et,Dt??new D$),Et.oldParentId=vt.oldParentId,Et.oldInputName=vt.oldInputName,vt.oldCoordinate&&(Dt=vt.oldCoordinate.split(","),Et.oldCoordinate=new Zr(Number(Dt[0]),Number(Dt[1]))),Et.newParentId=vt.newParentId,Et.newInputName=vt.newInputName,vt.newCoordinate&&(Dt=vt.newCoordinate.split(","),Et.newCoordinate=new Zr(Number(Dt[0]),Number(Dt[1]))),vt.recordUndo!==void 0&&(Et.recordUndo=vt.recordUndo),Et}recordNew(){const vt=this.currentLocation_();this.newParentId=vt.parentId,this.newInputName=vt.inputName,this.newCoordinate=vt.coordinate}currentLocation_(){var vt=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var Et=vt.getBlockById(this.blockId);if(!Et)throw Error("The block associated with the block move event could not be found");vt={};const Dt=Et.getParent();return Dt?(vt.parentId=Dt.id,(Et=Dt.getInputWithBlock(Et))&&(vt.inputName=Et.name)):vt.coordinate=Et.getRelativeToSurfaceXY(),vt}isNull(){return this.oldParentId===this.newParentId&&this.oldInputName===this.newInputName&&Zr.equals(this.oldCoordinate,this.newCoordinate)}run(vt){var Et=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var Dt=Et.getBlockById(this.blockId);if(Dt){var Ft=vt?this.newParentId:this.oldParentId,Kt=vt?this.newInputName:this.oldInputName;if(vt=vt?this.newCoordinate:this.oldCoordinate,Ft){var yn=Et.getBlockById(Ft);if(!yn){console.warn("Can't connect to non-existent block: "+Ft);return}}if(Dt.getParent()&&Dt.unplug(),vt)Kt=Dt.getRelativeToSurfaceXY(),Dt.moveBy(vt.x-Kt.x,vt.y-Kt.y);else{Et=Dt.outputConnection,(!Et||Dt.previousConnection&&Dt.previousConnection.isConnected())&&(Et=Dt.previousConnection);let Mn;Dt=Et.type,Kt?(Dt=yn.getInput(Kt))&&(Mn=Dt.connection):Dt===no.PREVIOUS_STATEMENT&&(Mn=yn.nextConnection),Mn?Et.connect(Mn):console.warn("Can't connect to non-existent input: "+Kt)}}else console.warn("Can't move non-existent block: "+this.blockId)}};xo(Wr.EVENT,Wl,D$);var Em=class extends d_{constructor(vt){super(),this.isBlank=!vt,vt&&(this.commentId=vt.id,this.workspaceId=vt.workspace.id,this.group=Ro(),this.recordUndo=wo())}toJson(){const vt=super.toJson();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return vt.commentId=this.commentId,vt}fromJson(vt){ft("Blockly.Events.CommentBase.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(vt),this.commentId=vt.commentId}static fromJson(vt,Et,Dt){return Et=super.fromJson(vt,Et,Dt??new Em),Et.commentId=vt.commentId,Et}static CommentCreateDeleteHelper(vt,Et){var Dt=vt.getEventWorkspace_();if(Et){if(Et=No("xml"),!vt.xml)throw Error("Ecountered a comment event without proper xml");Et.appendChild(vt.xml),Rm(Et,Dt)}else{if(!vt.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(Dt=Dt.getCommentById(vt.commentId))?Dt.dispose():console.warn("Can't uncreate non-existent comment: "+vt.commentId)}}},N$=class extends Em{constructor(vt,Et,Dt){super(vt),this.type=zy,vt&&(this.oldContents_=typeof Et>"u"?"":Et,this.newContents_=typeof Dt>"u"?"":Dt)}toJson(){const vt=super.toJson();if(!this.oldContents_)throw Error("The old contents is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newContents_)throw Error("The new contents is undefined. Either pass a value to the constructor, or call fromJson");return vt.oldContents=this.oldContents_,vt.newContents=this.newContents_,vt}fromJson(vt){ft("Blockly.Events.CommentChange.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(vt),this.oldContents_=vt.oldContents,this.newContents_=vt.newContents}static fromJson(vt,Et,Dt){return Et=super.fromJson(vt,Et,Dt??new N$),Et.oldContents_=vt.oldContents,Et.newContents_=vt.newContents,Et}isNull(){return this.oldContents_===this.newContents_}run(vt){var Et=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(Et=Et.getCommentById(this.commentId)){var Dt=vt?this.newContents_:this.oldContents_;if(!Dt)throw Error(vt?"The new contents is undefined. Either pass a value to the constructor, or call fromJson":"The old contents is undefined. Either pass a value to the constructor, or call fromJson");Et.setContent(Dt)}else console.warn("Can't change non-existent comment: "+this.commentId)}};xo(Wr.EVENT,zy,N$);var B$=class extends Em{constructor(vt){super(vt),this.type=u_,vt&&(this.xml=vt.toXmlWithXY())}toJson(){const vt=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");return vt.xml=Yl(this.xml),vt}fromJson(vt){ft("Blockly.Events.CommentCreate.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(vt),this.xml=na(vt.xml)}static fromJson(vt,Et,Dt){return Et=super.fromJson(vt,Et,Dt??new B$),Et.xml=na(vt.xml),Et}run(vt){Em.CommentCreateDeleteHelper(this,vt)}};xo(Wr.EVENT,u_,B$);var F$=class extends Em{constructor(vt){super(vt),this.type=pO,vt&&(this.xml=vt.toXmlWithXY())}run(vt){Em.CommentCreateDeleteHelper(this,!vt)}toJson(){const vt=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");return vt.xml=Yl(this.xml),vt}static fromJson(vt,Et,Dt){return Et=super.fromJson(vt,Et,Dt??new F$),Et.xml=na(vt.xml),Et}};xo(Wr.EVENT,pO,F$);var G$=class extends Em{constructor(vt){super(vt),this.type=Gp,vt&&(this.comment_=vt,this.oldCoordinate_=vt.getXY())}recordNew(){if(this.newCoordinate_)throw Error("Tried to record the new position of a comment on the same event twice.");if(!this.comment_)throw Error("The comment is undefined. Pass a comment to the constructor if you want to use the record functionality");this.newCoordinate_=this.comment_.getXY()}setOldCoordinate(vt){this.oldCoordinate_=vt}toJson(){const vt=super.toJson();if(!this.oldCoordinate_)throw Error("The old comment position is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newCoordinate_)throw Error("The new comment position is undefined. Either call recordNew, or call fromJson");return vt.oldCoordinate=`${Math.round(this.oldCoordinate_.x)}, ${Math.round(this.oldCoordinate_.y)}`,vt.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y),vt}fromJson(vt){ft("Blockly.Events.CommentMove.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(vt);let Et=vt.oldCoordinate.split(",");this.oldCoordinate_=new Zr(Number(Et[0]),Number(Et[1])),Et=vt.newCoordinate.split(","),this.newCoordinate_=new Zr(Number(Et[0]),Number(Et[1]))}static fromJson(vt,Et,Dt){return Et=super.fromJson(vt,Et,Dt??new G$),Dt=vt.oldCoordinate.split(","),Et.oldCoordinate_=new Zr(Number(Dt[0]),Number(Dt[1])),Dt=vt.newCoordinate.split(","),Et.newCoordinate_=new Zr(Number(Dt[0]),Number(Dt[1])),Et}isNull(){return Zr.equals(this.oldCoordinate_,this.newCoordinate_)}run(vt){var Et=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(Et=Et.getCommentById(this.commentId)){if(vt=vt?this.newCoordinate_:this.oldCoordinate_,!vt)throw Error("Either oldCoordinate_ or newCoordinate_ is undefined. Either pass a comment to the constructor and call recordNew, or call fromJson");var Dt=Et.getXY();Et.moveBy(vt.x-Dt.x,vt.y-Dt.y)}else console.warn("Can't move non-existent comment: "+this.commentId)}};xo(Wr.EVENT,Gp,G$);var v_=class extends d_{constructor(vt,Et){super(),this.model=Et,this.isBlank=!1,this.workspaceId=vt.id}toJson(){const vt=super.toJson();return vt.procedureId=this.model.getId(),vt}},U$=class extends v_{constructor(vt,Et,Dt){super(vt,Et),this.oldTypes=Dt,this.type=Av,this.newTypes=Et.getReturnTypes()}run(vt){const Et=this.getEventWorkspace_().getProcedureMap().get(this.model.getId());if(!Et)throw Error("Cannot change the type of a procedure that does not exist in the procedure map");vt?Et.setReturnTypes(this.newTypes):Et.setReturnTypes(this.oldTypes)}toJson(){const vt=super.toJson();return vt.oldTypes=this.oldTypes,vt}static fromJson(vt,Et){const Dt=Et.getProcedureMap().get(vt.procedureId);if(!Dt)throw Error("Cannot deserialize procedure change return event because the target procedure does not exist");return new U$(Et,Dt,vt.oldTypes)}};xo(Wr.EVENT,Av,U$);var V$=class extends v_{constructor(vt,Et){super(vt,Et),this.type=xv}run(vt){const Et=this.getEventWorkspace_(),Dt=Et.getProcedureMap(),Ft=Dt.get(this.model.getId());vt?Ft||Dt.add(new g0(Et,this.model.getName(),this.model.getId())):Ft&&Dt.delete(this.model.getId())}toJson(){const vt=super.toJson();return vt.model=pm(this.model),vt}static fromJson(vt,Et){return new V$(Et,mm(g0,RO,vt.model,Et))}};xo(Wr.EVENT,xv,V$);var W$=class extends v_{constructor(vt,Et){super(vt,Et),this.type=jy}run(vt){const Et=this.getEventWorkspace_(),Dt=Et.getProcedureMap(),Ft=Dt.get(this.model.getId());vt?Ft&&Dt.delete(this.model.getId()):Ft||Dt.add(new g0(Et,this.model.getName(),this.model.getId()))}toJson(){return super.toJson()}static fromJson(vt,Et){if(vt=Et.getProcedureMap().get(vt.procedureId),!vt)throw Error("Cannot deserialize procedure delete event because the target procedure does not exist");return new W$(Et,vt)}};xo(Wr.EVENT,jy,W$);var Q$=class extends v_{constructor(vt,Et){super(vt,Et),this.type=Cv,this.oldState=!Et.getEnabled(),this.newState=Et.getEnabled()}run(vt){const Et=this.getEventWorkspace_().getProcedureMap().get(this.model.getId());if(!Et)throw Error("Cannot change the enabled state of a procedure that does not exist in the procedure map");vt?Et.setEnabled(this.newState):Et.setEnabled(this.oldState)}toJson(){return super.toJson()}static fromJson(vt,Et){if(vt=Et.getProcedureMap().get(vt.procedureId),!vt)throw Error("Cannot deserialize procedure enable event because the target procedure does not exist");return new Q$(Et,vt)}};xo(Wr.EVENT,Cv,Q$);var H$=class extends v_{constructor(vt,Et,Dt){super(vt,Et),this.oldName=Dt,this.type=wv,this.newName=Et.getName()}run(vt){const Et=this.getEventWorkspace_().getProcedureMap().get(this.model.getId());if(!Et)throw Error("Cannot change the type of a procedure that does not exist in the procedure map");vt?Et.setName(this.newName):Et.setName(this.oldName)}toJson(){const vt=super.toJson();return vt.oldName=this.oldName,vt}static fromJson(vt,Et){const Dt=Et.getProcedureMap().get(vt.procedureId);if(!Dt)throw Error("Cannot deserialize procedure rename event because the target procedure does not exist");return new H$(Et,Dt,vt.oldName)}};xo(Wr.EVENT,wv,H$);var eS=class extends v_{constructor(vt,Et,Dt){super(vt,Et),this.parameter=Dt}toJson(){const vt=super.toJson();return vt.parameterId=this.model.getId(),vt}},z$=class extends eS{constructor(vt,Et,Dt,Ft){super(vt,Et,Dt),this.index=Ft,this.type=Rv}run(vt){const Et=this.getEventWorkspace_(),Dt=Et.getProcedureMap().get(this.model.getId());if(!Dt)throw Error("Cannot add a parameter to a procedure that does not exist in the procedure map");const Ft=Dt.getParameter(this.index);vt?this.parameterMatches(Ft)||Dt.insertParameter(new RO(Et,this.parameter.getName(),this.parameter.getId()),this.index):this.parameterMatches(Ft)&&Dt.deleteParameter(this.index)}parameterMatches(vt){return vt&&vt.getId()===this.parameter.getId()}toJson(){const vt=super.toJson();return vt.parameter=Mu(this.parameter),vt.index=this.index,vt}static fromJson(vt,Et){const Dt=Et.getProcedureMap().get(vt.procedureId);if(!Dt)throw Error("Cannot deserialize parameter create event because the target procedure does not exist");return new z$(Et,Dt,Lp(RO,vt.parameter,Et),vt.index)}};xo(Wr.EVENT,Rv,z$);var j$=class extends eS{constructor(vt,Et,Dt,Ft){super(vt,Et,Dt),this.index=Ft,this.type=Iv}run(vt){const Et=this.getEventWorkspace_(),Dt=Et.getProcedureMap().get(this.model.getId());if(!Dt)throw Error("Cannot add a parameter to a procedure that does not exist in the procedure map");const Ft=Dt.getParameter(this.index);vt?this.parameterMatches(Ft)&&Dt.deleteParameter(this.index):this.parameterMatches(Ft)||Dt.insertParameter(new RO(Et,this.parameter.getName(),this.parameter.getId()),this.index)}parameterMatches(vt){return vt&&vt.getId()===this.parameter.getId()}toJson(){const vt=super.toJson();return vt.index=this.index,vt}static fromJson(vt,Et){const Dt=Et.getProcedureMap().get(vt.procedureId);if(!Dt)throw Error("Cannot deserialize procedure delete event because the target procedure does not exist");const Ft=Dt.getParameter(vt.index);return new j$(Et,Dt,Ft,vt.index)}};xo(Wr.EVENT,Iv,j$);var X$=class extends eS{constructor(vt,Et,Dt,Ft){super(vt,Et,Dt),this.oldName=Ft,this.type=kv,this.newName=Dt.getName()}run(vt){const Et=mv(this.getEventWorkspace_(),this.model.getId(),this.parameter.getId());if(!Et)throw Error("Cannot rename a parameter that does not exist in the procedure map");vt?Et.setName(this.newName):Et.setName(this.oldName)}toJson(){const vt=super.toJson();return vt.oldName=this.oldName,vt}static fromJson(vt,Et){const Dt=Et.getProcedureMap().get(vt.procedureId);if(!Dt)throw Error("Cannot deserialize procedure delete event because the target procedure does not exist");const Ft=mv(Et,vt.procedureId,vt.parameterId);if(!Ft)throw Error("Cannot deserialize parameter rename event because the target parameter does not exist");return new X$(Et,Dt,Ft,vt.oldName)}};xo(Wr.EVENT,kv,X$);var Y$=class extends Yu{constructor(vt,Et,Dt){super(vt?vt.workspace.id:void 0),this.type=fO,vt&&(this.blockId=vt.id,this.isStart=Et,this.blocks=Dt)}toJson(){const vt=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.blockId===void 0)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return vt.isStart=this.isStart,vt.blockId=this.blockId,vt.blocks=this.blocks,vt}fromJson(vt){ft("Blockly.Events.BlockDrag.prototype.fromJson","version 9","version 10","Blockly.Events.fromJson"),super.fromJson(vt),this.isStart=vt.isStart,this.blockId=vt.blockId,this.blocks=vt.blocks}static fromJson(vt,Et,Dt){return Et=super.fromJson(vt,Et,Dt??new Y$),Et.isStart=vt.isStart,Et.blockId=vt.blockId,Et.blocks=vt.blocks,Et}};xo(Wr.EVENT,fO,Y$);var LE=class extends Yu{constructor(vt,Et,Dt,Ft){super(vt?vt.workspace.id:void 0),this.type=Uy,this.blockId=vt?vt.id:null,this.element=typeof Et>"u"?"":Et,this.oldValue=typeof Dt>"u"?"":Dt,this.newValue=typeof Ft>"u"?"":Ft}toJson(){const vt=super.toJson();return vt.element=this.element,this.newValue!==void 0&&(vt.newValue=this.newValue),this.blockId&&(vt.blockId=this.blockId),vt}fromJson(vt){super.fromJson(vt),this.element=vt.element,this.newValue=vt.newValue,this.blockId=vt.blockId}};xo(Wr.EVENT,Uy,LE);var DE=class extends d_{constructor(vt){super(),this.isBlank=!0,this.recordUndo=!1,this.type=mO,this.isBlank=!!vt,vt&&(this.workspaceId=vt.id)}toJson(){const vt=super.toJson();if(!this.workspaceId)throw Error("The workspace ID is undefined. Either pass a workspace to the constructor, or call fromJson");return vt.workspaceId=this.workspaceId,vt}fromJson(vt){super.fromJson(vt),this.workspaceId=vt.workspaceId}};xo(Wr.EVENT,mO,DE),lt.module$build$src$core$events$events={},lt.module$build$src$core$events$events.Abstract=d_,lt.module$build$src$core$events$events.BLOCK_CHANGE=Qs,lt.module$build$src$core$events$events.BLOCK_CREATE=$l,lt.module$build$src$core$events$events.BLOCK_DELETE=pp,lt.module$build$src$core$events$events.BLOCK_DRAG=fO,lt.module$build$src$core$events$events.BLOCK_MOVE=Wl,lt.module$build$src$core$events$events.BUBBLE_OPEN=Fp,lt.module$build$src$core$events$events.BUMP_EVENTS=xS,lt.module$build$src$core$events$events.BlockBase=_O,lt.module$build$src$core$events$events.BlockChange=f_,lt.module$build$src$core$events$events.BlockCreate=ZS,lt.module$build$src$core$events$events.BlockDelete=qS,lt.module$build$src$core$events$events.BlockDrag=Y$,lt.module$build$src$core$events$events.BlockMove=D$,lt.module$build$src$core$events$events.BubbleOpen=QS,lt.module$build$src$core$events$events.BubbleType=HS,lt.module$build$src$core$events$events.CHANGE=Qs,lt.module$build$src$core$events$events.CLICK=vm,lt.module$build$src$core$events$events.COMMENT_CHANGE=zy,lt.module$build$src$core$events$events.COMMENT_CREATE=u_,lt.module$build$src$core$events$events.COMMENT_DELETE=pO,lt.module$build$src$core$events$events.COMMENT_MOVE=Gp,lt.module$build$src$core$events$events.CREATE=$l,lt.module$build$src$core$events$events.Click=h$,lt.module$build$src$core$events$events.ClickTarget=d$,lt.module$build$src$core$events$events.CommentBase=Em,lt.module$build$src$core$events$events.CommentChange=N$,lt.module$build$src$core$events$events.CommentCreate=B$,lt.module$build$src$core$events$events.CommentDelete=F$,lt.module$build$src$core$events$events.CommentMove=G$,lt.module$build$src$core$events$events.DELETE=pp,lt.module$build$src$core$events$events.FINISHED_LOADING=mO,lt.module$build$src$core$events$events.FinishedLoading=DE,lt.module$build$src$core$events$events.MARKER_MOVE=Vy,lt.module$build$src$core$events$events.MOVE=Wl,lt.module$build$src$core$events$events.MarkerMove=$$,lt.module$build$src$core$events$events.ProcedureBase=v_,lt.module$build$src$core$events$events.ProcedureChangeReturn=U$,lt.module$build$src$core$events$events.ProcedureCreate=V$,lt.module$build$src$core$events$events.ProcedureDelete=W$,lt.module$build$src$core$events$events.ProcedureEnable=Q$,lt.module$build$src$core$events$events.ProcedureParameterBase=eS,lt.module$build$src$core$events$events.ProcedureParameterCreate=z$,lt.module$build$src$core$events$events.ProcedureParameterDelete=j$,lt.module$build$src$core$events$events.ProcedureParameterRename=X$,lt.module$build$src$core$events$events.ProcedureRename=H$,lt.module$build$src$core$events$events.SELECTED=ym,lt.module$build$src$core$events$events.Selected=kS,lt.module$build$src$core$events$events.THEME_CHANGE=Hy,lt.module$build$src$core$events$events.TOOLBOX_ITEM_SELECT=Qy,lt.module$build$src$core$events$events.TRASHCAN_OPEN=Wy,lt.module$build$src$core$events$events.ThemeChange=f$,lt.module$build$src$core$events$events.ToolboxItemSelect=l$,lt.module$build$src$core$events$events.TrashcanOpen=XS,lt.module$build$src$core$events$events.UI=Uy,lt.module$build$src$core$events$events.Ui=LE,lt.module$build$src$core$events$events.UiBase=Yu,lt.module$build$src$core$events$events.VAR_CREATE=l_,lt.module$build$src$core$events$events.VAR_DELETE=dO,lt.module$build$src$core$events$events.VAR_RENAME=Gy,lt.module$build$src$core$events$events.VIEWPORT_CHANGE=c_,lt.module$build$src$core$events$events.VarBase=Xy,lt.module$build$src$core$events$events.VarCreate=RS,lt.module$build$src$core$events$events.VarDelete=x$,lt.module$build$src$core$events$events.VarRename=w$,lt.module$build$src$core$events$events.ViewportChange=p$,lt.module$build$src$core$events$events.clearPendingUndo=au,lt.module$build$src$core$events$events.disable=Bo,lt.module$build$src$core$events$events.disableOrphans=Yo,lt.module$build$src$core$events$events.enable=yo,lt.module$build$src$core$events$events.filter=El,lt.module$build$src$core$events$events.fire=Fr,lt.module$build$src$core$events$events.fromJson=lu,lt.module$build$src$core$events$events.get=Vr,lt.module$build$src$core$events$events.getDescendantIds=Xl,lt.module$build$src$core$events$events.getGroup=Ro,lt.module$build$src$core$events$events.getRecordUndo=wo,lt.module$build$src$core$events$events.isEnabled=os,lt.module$build$src$core$events$events.setGroup=io,lt.module$build$src$core$events$events.setRecordUndo=Ao,Py();var zl={};zl.registerCleanup=Cy,zl.registerCollapse=ap,zl.registerCollapseExpandBlock=_v,zl.registerComment=ky,zl.registerDefaultOptions=Py,zl.registerDelete=My,zl.registerDeleteAll=gv,zl.registerDisable=cp,zl.registerDuplicate=Iy,zl.registerExpand=Ay,zl.registerHelp=yl,zl.registerInline=lp,zl.registerRedo=wy,zl.registerUndo=zu;var NE=class{constructor(vt,Et){this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.draggingBlock_=vt,this.draggedConnectionManager_=new Su(this.draggingBlock_),this.workspace_=Et,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=pS(vt)}dispose(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()}startDrag(vt,Et){Ro()||io(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),Jr(),this.workspace_.setResizesEnabled(!1),Ou(),this.shouldDisconnect_(Et)&&this.disconnectBlock_(Et,vt),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface()}shouldDisconnect_(vt){return!!(this.draggingBlock_.getParent()||vt&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())}disconnectBlock_(vt,Et){this.draggingBlock_.unplug(vt),vt=this.pixelsToWorkspaceUnits_(Et),vt=Zr.sum(this.startXY_,vt),this.draggingBlock_.translate(vt.x,vt.y),iv(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections()}fireDragStartEvent_(){const vt=new(Vr(fO))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));Fr(vt)}drag(vt,Et){Et=this.pixelsToWorkspaceUnits_(Et);var Dt=Zr.sum(this.startXY_,Et);this.draggingBlock_.moveDuringDrag(Dt),this.dragIcons_(Et),Dt=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(vt),this.draggedConnectionManager_.update(Et,this.dragTarget_),vt=this.wouldDeleteBlock_,this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock,vt!==this.wouldDeleteBlock_&&this.updateCursorDuringBlockDrag_(),this.dragTarget_!==Dt&&(Dt&&Dt.onDragExit(this.draggingBlock_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBlock_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBlock_)}endDrag(vt,Et){this.drag(vt,Et),this.dragIconData_=[],this.fireDragEndEvent_(),Tr(),Ou(),vt=null,this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_)?Et=this.startXY_:(Et=this.getNewLocationAfterDrag_(Et),vt=Et.delta,Et=Et.newLocation),this.draggingBlock_.moveOffDragSurface(Et),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),this.maybeDeleteBlock_()||(this.draggingBlock_.setDragging(!1),vt?this.updateBlockAfterMove_(vt):gm(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)),this.workspace_.setResizesEnabled(!0),io(!1)}getNewLocationAfterDrag_(vt){vt=this.pixelsToWorkspaceUnits_(vt);const Et=Zr.sum(this.startXY_,vt);return{delta:vt,newLocation:Et}}maybeDeleteBlock_(){return this.wouldDeleteBlock_?(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),fs.length=0,!0):!1}updateBlockAfterMove_(vt){this.draggingBlock_.moveConnections(vt.x,vt.y),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()}fireDragEndEvent_(){const vt=new(Vr(fO))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));Fr(vt)}updateToolboxStyle_(vt){const Et=this.workspace_.getToolbox();if(Et){const Dt=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";vt&&typeof Et.removeStyle=="function"?Et.removeStyle(Dt):vt||typeof Et.addStyle!="function"||Et.addStyle(Dt)}}fireMoveEvent_(){const vt=new(Vr(Wl))(this.draggingBlock_);vt.oldCoordinate=this.startXY_,vt.recordNew(),Fr(vt)}updateCursorDuringBlockDrag_(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)}pixelsToWorkspaceUnits_(vt){return vt=new Zr(vt.x/this.workspace_.scale,vt.y/this.workspace_.scale),this.workspace_.isMutator&&vt.scale(1/this.workspace_.options.parentWorkspace.scale),vt}dragIcons_(vt){for(let Et=0;Et<this.dragIconData_.length;Et++){const Dt=this.dragIconData_[Et];Dt.icon.setIconLocation(Zr.sum(Dt.location,vt))}}getInsertionMarkers(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]}};xo(Wr.BLOCK_DRAGGER,Bp,NE);var Sx="9.2.1",$x=lt.Align$$module$build$src$core$input.LEFT,Tx=lt.Align$$module$build$src$core$input.CENTRE,Ex=lt.Align$$module$build$src$core$input.RIGHT,xx=no.INPUT_VALUE,wx=no.OUTPUT_VALUE,Cx=no.NEXT_STATEMENT,Ax=no.PREVIOUS_STATEMENT,Rx=Do.DUMMY,Ix=Co.TOP,kx=Co.BOTTOM,Mx=Co.LEFT,Px=Co.RIGHT;zp.prototype.newBlock=function(vt,Et){return new TO(this,vt,Et)},_d.prototype.newBlock=function(vt,Et){return new Lu(this,vt,Et)},_d.newTrashcan=function(vt){return new DT(vt)},Al.prototype.showContextMenu=function(vt){if(!this.workspace.options.readOnly){var Et=[];this.isDeletable()&&this.isMovable()&&(Et.push(Y_(this)),Et.push(X_(this))),ip(vt,Et,this.RTL)}},lt.Mutator$$module$build$src$core$mutator.prototype.newWorkspaceSvg=function(vt){return new _d(vt)},Du.prototype.populateProcedures=function(vt){vt=e_(vt),vt=vt[0].concat(vt[1]);for(let Et=0;Et<vt.length;Et++)this.getName(vt[Et][0],Du.NameType.PROCEDURE)};var Lx=no,mr={};return mr.ALIGN_CENTRE=Tx,mr.ALIGN_LEFT=$x,mr.ALIGN_RIGHT=Ex,mr.ASTNode=kr,mr.BasicCursor=p0,mr.Block=TO,mr.BlockDragSurfaceSvg=RE,mr.BlockDragger=NE,mr.BlockSvg=Lu,mr.Blocks=jr,mr.Bubble=ko,mr.BubbleDragger=UT,mr.COLLAPSED_FIELD_NAME=l0,mr.COLLAPSED_INPUT_NAME=a0,mr.COLLAPSE_CHARS=RT,mr.CodeGenerator=lt.CodeGenerator$$module$build$src$core$generator,mr.CollapsibleToolboxCategory=CO,mr.Comment=AT,mr.ComponentManager=Ks,mr.Connection=qo,mr.ConnectionChecker=KT,mr.ConnectionDB=AO,mr.ConnectionType=no,mr.ContextMenu=lt.module$build$src$core$contextmenu,mr.ContextMenuItems=zl,mr.ContextMenuRegistry=Ko,mr.Css=LS,mr.Cursor=i$,mr.DELETE_VARIABLE_ID=r$,mr.DRAG_STACK=IT,mr.DUMMY_INPUT=Rx,mr.DeleteArea=zv,mr.DragTarget=LT,mr.DropDownDiv=Rs,mr.Events=lt.module$build$src$core$events$events,mr.Extensions=lt.module$build$src$core$extensions,mr.Field=Qo,mr.FieldAngle=Uo,mr.FieldCheckbox=lt.FieldCheckbox$$module$build$src$core$field_checkbox,mr.FieldColour=$u,mr.FieldDropdown=Ku,mr.FieldImage=lt.FieldImage$$module$build$src$core$field_image,mr.FieldLabel=lt.FieldLabel$$module$build$src$core$field_label,mr.FieldLabelSerializable=PE,mr.FieldMultilineInput=L$,mr.FieldNumber=P$,mr.FieldTextInput=lt.FieldTextInput$$module$build$src$core$field_textinput,mr.FieldVariable=x0,mr.Flyout=Jv,mr.FlyoutButton=kO,mr.FlyoutMetricsManager=kE,mr.Generator=lt.CodeGenerator$$module$build$src$core$generator,mr.Gesture=gp,mr.Grid=m$,mr.HorizontalFlyout=ME,mr.INPUT_VALUE=xx,mr.Icon=Vv,mr.Input=$O,mr.InsertionMarkerManager=Su,mr.Marker=kT,mr.MarkerManager=Zy,mr.Menu=VS,mr.MenuItem=WS,mr.MetricsManager=k$,mr.Msg=$o,mr.Mutator=lt.Mutator$$module$build$src$core$mutator,mr.NEXT_STATEMENT=Cx,mr.Names=Du,mr.OPPOSITE_TYPE=m_,mr.OUTPUT_VALUE=wx,mr.Options=Ju,mr.PREVIOUS_STATEMENT=Ax,mr.PROCEDURE_CATEGORY_NAME=Yv,mr.Procedures=lt.module$build$src$core$procedures,mr.RENAME_VARIABLE_ID=n$,mr.RenderedConnection=Ql,mr.Scrollbar=bs,mr.ScrollbarPair=I$,mr.ShortcutItems=Op,mr.ShortcutRegistry=es,mr.TOOLBOX_AT_BOTTOM=kx,mr.TOOLBOX_AT_LEFT=Mx,mr.TOOLBOX_AT_RIGHT=Px,mr.TOOLBOX_AT_TOP=Ix,mr.TabNavigateCursor=MT,mr.Theme=p_,mr.ThemeManager=qT,mr.Themes=u$,mr.Toolbox=GT,mr.ToolboxCategory=_h,mr.ToolboxItem=c$,mr.ToolboxSeparator=m0,mr.Tooltip=Is,mr.Touch=Sl,mr.TouchGesture=gp,mr.Trashcan=DT,mr.VARIABLE_CATEGORY_NAME=Lv,mr.VARIABLE_DYNAMIC_CATEGORY_NAME=E$,mr.VERSION=Sx,mr.VariableMap=C$,mr.VariableModel=Yy,mr.Variables=lt.module$build$src$core$variables,mr.VariablesDynamic=Tm,mr.VerticalFlyout=M$,mr.Warning=PT,mr.WidgetDiv=qu,mr.Workspace=zp,mr.WorkspaceAudio=JT,mr.WorkspaceComment=mp,mr.WorkspaceCommentSvg=Al,mr.WorkspaceDragSurfaceSvg=AE,mr.WorkspaceDragger=VT,mr.WorkspaceSvg=_d,mr.Xml=lt.module$build$src$core$xml,mr.ZoomControls=eE,mr.bindEventWithChecks_=Np,mr.bindEvent_=up,mr.blockAnimations=u0,mr.blockRendering=Jo,mr.browserEvents=yr,mr.bumpObjects=Kv,mr.clipboard=h0,mr.common=lt.module$build$src$core$common,mr.config=lt.config$$module$build$src$core$config,mr.connectionTypes=Lx,mr.constants=KS,mr.copy=yv,mr.defineBlocksWithJsonArray=Ln,mr.dialog=ou,mr.duplicate=ru,mr.fieldRegistry=t0,mr.geras=vp,mr.getMainWorkspace=xn,mr.getSelected=Pn,mr.hideChaff=mS,mr.hueToHex=_S,mr.inject=sp,mr.inputTypes=Do,mr.isNumber=Ly,mr.minimalist=E0,mr.paste=gS,mr.procedures=lt.module$build$src$core$procedures,mr.registry=Xu,mr.resizeSvgContents=Ov,mr.serialization=bx,mr.setLocale=AS,mr.setParentContainer=zn,mr.svgResize=Yn,mr.thrasos=R$,mr.uiPosition=g_,mr.unbindEvent_=lO,mr.utils=Ho,mr.zelos=_f,lt.module$build$src$core$contextmenu,lt.module$build$src$core$events$events,lt.module$build$src$core$msg,lt.module$build$src$core$common,Object.defineProperties(mr,{alert:{set:function(vt){Es.warn("Blockly.alert","December 2021","December 2022"),ou.setAlert(vt)},get:function(){return Es.warn("Blockly.alert","December 2021","December 2022","Blockly.dialog.alert()"),ou.alert}},confirm:{set:function(vt){Es.warn("Blockly.confirm","December 2021","December 2022"),ou.setConfirm(vt)},get:function(){return Es.warn("Blockly.confirm","December 2021","December 2022","Blockly.dialog.confirm()"),ou.confirm}},mainWorkspace:{set:function(vt){Es.warn("Blockly.mainWorkspace","version 9","version 10","Blockly.getMainWorkspace"),lt.module$build$src$core$common.setMainWorkspace(vt)},get:function(){return Es.warn("Blockly.mainWorkspace","version 9","version 10","Blockly.getMainWorkspace"),lt.module$build$src$core$common.getMainWorkspace()}},prompt:{set:function(vt){Es.warn("Blockly.prompt","December 2021","December 2022"),ou.setPrompt(vt)},get:function(){return Es.warn("Blockly.prompt","December 2021","December 2022","Blockly.dialog.prompt()"),ou.prompt}},selected:{get:function(){return Es.warn("Blockly.selected","version 9","version 10","Blockly.getSelected"),lt.module$build$src$core$common.getSelected()},set:function(vt){Es.warn("Blockly.selected","version 9","version 10","Blockly.getSelected"),lt.module$build$src$core$common.setSelected(vt)}},HSV_SATURATION:{get:function(){return Rl.getHsvSaturation()},set:function(vt){Rl.setHsvSaturation(vt)}},HSV_VALUE:{get:function(){return Rl.getHsvValue()},set:function(vt){Rl.setHsvValue(vt)}}}),Object.defineProperties(lt.module$build$src$core$contextmenu,{currentBlock:{get:function(){return Es.warn("Blockly.ContextMenu.currentBlock","September 2021","September 2022","Blockly.Tooltip.getCurrentBlock()"),lt.module$build$src$core$contextmenu.getCurrentBlock()},set:function(vt){Es.warn("Blockly.ContextMenu.currentBlock","September 2021","September 2022","Blockly.Tooltip.setCurrentBlock(block)"),lt.module$build$src$core$contextmenu.setCurrentBlock(vt)}}}),Object.defineProperties(lt.module$build$src$core$events$events,{recordUndo:{get:function(){return Es.warn("Blockly.Events.recordUndo","September 2021","September 2022","Blockly.Events.getRecordUndo()"),To.getRecordUndo()},set:function(vt){Es.warn("Blockly.Events.recordUndo","September 2021","September 2022","Blockly.Events.setRecordUndo()"),To.setRecordUndo(vt)}}}),Object.defineProperties(Is,{visible:{get:function(){return Es.warn("Blockly.Tooltip.visible","September 2021","September 2022","Blockly.Tooltip.isVisible()"),Is.isVisible()}},DIV:{get:function(){return Es.warn("Blockly.Tooltip.DIV","September 2021","September 2022","Blockly.Tooltip.getDiv()"),Is.getDiv()}}}),Object.defineProperties(qu,{DIV:{get:function(){return Es.warn("Blockly.WidgetDiv.DIV","September 2021","September 2022","Blockly.WidgetDiv.getDiv()"),qu.getDiv()}}}),"Blockly"in globalThis||(globalThis.Blockly={Msg:lt.module$build$src$core$msg}),mr.__namespace__=lt,mr})}(blockly_compressed)),blockly_compressed.exports}var hasRequiredBlockly;function requireBlockly(){return hasRequiredBlockly||(hasRequiredBlockly=1,function(dt,$){(function(lt,ft){dt.exports=ft(requireBlockly_compressed())})(commonjsGlobal,function(lt){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return lt})}(blockly)),blockly.exports}var hasRequiredCoreBrowser;function requireCoreBrowser(){return hasRequiredCoreBrowser||(hasRequiredCoreBrowser=1,function(dt,$){(function(lt,ft){dt.exports=ft(requireBlockly())})(commonjsGlobal,function(lt){return lt})}(coreBrowser)),coreBrowser.exports}var en$1={exports:{}},hasRequiredEn;function requireEn(){return hasRequiredEn||(hasRequiredEn=1,function(dt,$){(function(lt,ft){dt.exports=ft()})(commonjsGlobal,function(){var lt=lt||{Msg:Object.create(null)};return lt.Msg.ADD_COMMENT="Add Comment",lt.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",lt.Msg.CHANGE_VALUE_TITLE="Change value:",lt.Msg.CLEAN_UP="Clean up Blocks",lt.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",lt.Msg.COLLAPSE_ALL="Collapse Blocks",lt.Msg.COLLAPSE_BLOCK="Collapse Block",lt.Msg.COLOUR_BLEND_COLOUR1="colour 1",lt.Msg.COLOUR_BLEND_COLOUR2="colour 2",lt.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",lt.Msg.COLOUR_BLEND_RATIO="ratio",lt.Msg.COLOUR_BLEND_TITLE="blend",lt.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",lt.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",lt.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",lt.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",lt.Msg.COLOUR_RANDOM_TITLE="random colour",lt.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",lt.Msg.COLOUR_RGB_BLUE="blue",lt.Msg.COLOUR_RGB_GREEN="green",lt.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",lt.Msg.COLOUR_RGB_RED="red",lt.Msg.COLOUR_RGB_TITLE="colour with",lt.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",lt.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",lt.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",lt.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",lt.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",lt.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",lt.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",lt.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",lt.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",lt.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",lt.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",lt.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",lt.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",lt.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",lt.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",lt.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",lt.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",lt.Msg.CONTROLS_IF_MSG_ELSE="else",lt.Msg.CONTROLS_IF_MSG_ELSEIF="else if",lt.Msg.CONTROLS_IF_MSG_IF="if",lt.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",lt.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",lt.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",lt.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",lt.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",lt.Msg.CONTROLS_REPEAT_INPUT_DO="do",lt.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",lt.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",lt.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",lt.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",lt.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",lt.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",lt.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",lt.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",lt.Msg.DELETE_BLOCK="Delete Block",lt.Msg.DELETE_VARIABLE="Delete the '%1' variable",lt.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",lt.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",lt.Msg.DIALOG_CANCEL="Cancel",lt.Msg.DIALOG_OK="OK",lt.Msg.DISABLE_BLOCK="Disable Block",lt.Msg.DUPLICATE_BLOCK="Duplicate",lt.Msg.DUPLICATE_COMMENT="Duplicate Comment",lt.Msg.ENABLE_BLOCK="Enable Block",lt.Msg.EXPAND_ALL="Expand Blocks",lt.Msg.EXPAND_BLOCK="Expand Block",lt.Msg.EXTERNAL_INPUTS="External Inputs",lt.Msg.HELP="Help",lt.Msg.INLINE_INPUTS="Inline Inputs",lt.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",lt.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",lt.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",lt.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",lt.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",lt.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",lt.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",lt.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",lt.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",lt.Msg.LISTS_GET_INDEX_FIRST="first",lt.Msg.LISTS_GET_INDEX_FROM_END="# from end",lt.Msg.LISTS_GET_INDEX_FROM_START="#",lt.Msg.LISTS_GET_INDEX_GET="get",lt.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",lt.Msg.LISTS_GET_INDEX_LAST="last",lt.Msg.LISTS_GET_INDEX_RANDOM="random",lt.Msg.LISTS_GET_INDEX_REMOVE="remove",lt.Msg.LISTS_GET_INDEX_TAIL="",lt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",lt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",lt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",lt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",lt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",lt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",lt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",lt.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",lt.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",lt.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",lt.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",lt.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",lt.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",lt.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",lt.Msg.LISTS_GET_SUBLIST_END_LAST="to last",lt.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",lt.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",lt.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",lt.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",lt.Msg.LISTS_GET_SUBLIST_TAIL="",lt.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",lt.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",lt.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",lt.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",lt.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",lt.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",lt.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",lt.Msg.LISTS_INLIST="in list",lt.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",lt.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",lt.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",lt.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",lt.Msg.LISTS_LENGTH_TITLE="length of %1",lt.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",lt.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",lt.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",lt.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",lt.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",lt.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",lt.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",lt.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",lt.Msg.LISTS_SET_INDEX_INPUT_TO="as",lt.Msg.LISTS_SET_INDEX_INSERT="insert at",lt.Msg.LISTS_SET_INDEX_SET="set",lt.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",lt.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",lt.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",lt.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",lt.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",lt.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",lt.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",lt.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",lt.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",lt.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",lt.Msg.LISTS_SORT_ORDER_DESCENDING="descending",lt.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",lt.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",lt.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",lt.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",lt.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",lt.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",lt.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",lt.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",lt.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",lt.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",lt.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",lt.Msg.LOGIC_BOOLEAN_FALSE="false",lt.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",lt.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",lt.Msg.LOGIC_BOOLEAN_TRUE="true",lt.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",lt.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",lt.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",lt.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",lt.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",lt.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",lt.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",lt.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",lt.Msg.LOGIC_NEGATE_TITLE="not %1",lt.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",lt.Msg.LOGIC_NULL="null",lt.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",lt.Msg.LOGIC_NULL_TOOLTIP="Returns null.",lt.Msg.LOGIC_OPERATION_AND="and",lt.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",lt.Msg.LOGIC_OPERATION_OR="or",lt.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",lt.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",lt.Msg.LOGIC_TERNARY_CONDITION="test",lt.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",lt.Msg.LOGIC_TERNARY_IF_FALSE="if false",lt.Msg.LOGIC_TERNARY_IF_TRUE="if true",lt.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",lt.Msg.MATH_ADDITION_SYMBOL="+",lt.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",lt.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",lt.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",lt.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",lt.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",lt.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",lt.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",lt.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",lt.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",lt.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",lt.Msg.MATH_CHANGE_TITLE="change %1 by %2",lt.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",lt.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",lt.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants:  (3.141), e (2.718),  (1.618), sqrt(2) (1.414), sqrt() (0.707), or  (infinity).",lt.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",lt.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",lt.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",lt.Msg.MATH_DIVISION_SYMBOL="",lt.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",lt.Msg.MATH_IS_EVEN="is even",lt.Msg.MATH_IS_NEGATIVE="is negative",lt.Msg.MATH_IS_ODD="is odd",lt.Msg.MATH_IS_POSITIVE="is positive",lt.Msg.MATH_IS_PRIME="is prime",lt.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",lt.Msg.MATH_IS_WHOLE="is whole",lt.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",lt.Msg.MATH_MODULO_TITLE="remainder of %1  %2",lt.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",lt.Msg.MATH_MULTIPLICATION_SYMBOL="",lt.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",lt.Msg.MATH_NUMBER_TOOLTIP="A number.",lt.Msg.MATH_ONLIST_HELPURL="",lt.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",lt.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",lt.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",lt.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",lt.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",lt.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",lt.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",lt.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",lt.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",lt.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",lt.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",lt.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",lt.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",lt.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",lt.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",lt.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",lt.Msg.MATH_POWER_SYMBOL="^",lt.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",lt.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",lt.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",lt.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",lt.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",lt.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",lt.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",lt.Msg.MATH_ROUND_OPERATOR_ROUND="round",lt.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",lt.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",lt.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",lt.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",lt.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",lt.Msg.MATH_SINGLE_OP_ROOT="square root",lt.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",lt.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",lt.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",lt.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",lt.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",lt.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",lt.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",lt.Msg.MATH_SUBTRACTION_SYMBOL="-",lt.Msg.MATH_TRIG_ACOS="acos",lt.Msg.MATH_TRIG_ASIN="asin",lt.Msg.MATH_TRIG_ATAN="atan",lt.Msg.MATH_TRIG_COS="cos",lt.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",lt.Msg.MATH_TRIG_SIN="sin",lt.Msg.MATH_TRIG_TAN="tan",lt.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",lt.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",lt.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",lt.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",lt.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",lt.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",lt.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",lt.Msg.NEW_NUMBER_VARIABLE="Create number variable...",lt.Msg.NEW_STRING_VARIABLE="Create string variable...",lt.Msg.NEW_VARIABLE="Create variable...",lt.Msg.NEW_VARIABLE_TITLE="New variable name:",lt.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",lt.Msg.ORDINAL_NUMBER_SUFFIX="",lt.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",lt.Msg.PROCEDURES_BEFORE_PARAMS="with:",lt.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",lt.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",lt.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",lt.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",lt.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",lt.Msg.PROCEDURES_CREATE_DO="Create '%1'",lt.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",lt.Msg.PROCEDURES_DEFNORETURN_DO="",lt.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",lt.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",lt.Msg.PROCEDURES_DEFNORETURN_TITLE="to",lt.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",lt.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",lt.Msg.PROCEDURES_DEFRETURN_RETURN="return",lt.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",lt.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",lt.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",lt.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",lt.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",lt.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",lt.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",lt.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",lt.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",lt.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",lt.Msg.REDO="Redo",lt.Msg.REMOVE_COMMENT="Remove Comment",lt.Msg.RENAME_VARIABLE="Rename variable...",lt.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",lt.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",lt.Msg.TEXT_APPEND_TITLE="to %1 append text %2",lt.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",lt.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",lt.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",lt.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",lt.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",lt.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",lt.Msg.TEXT_CHARAT_FIRST="get first letter",lt.Msg.TEXT_CHARAT_FROM_END="get letter # from end",lt.Msg.TEXT_CHARAT_FROM_START="get letter #",lt.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",lt.Msg.TEXT_CHARAT_LAST="get last letter",lt.Msg.TEXT_CHARAT_RANDOM="get random letter",lt.Msg.TEXT_CHARAT_TAIL="",lt.Msg.TEXT_CHARAT_TITLE="in text %1 %2",lt.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",lt.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",lt.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",lt.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",lt.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",lt.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",lt.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",lt.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",lt.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",lt.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",lt.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",lt.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",lt.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",lt.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",lt.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",lt.Msg.TEXT_GET_SUBSTRING_TAIL="",lt.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",lt.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",lt.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",lt.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",lt.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",lt.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",lt.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",lt.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",lt.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",lt.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",lt.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",lt.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",lt.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",lt.Msg.TEXT_LENGTH_TITLE="length of %1",lt.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",lt.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",lt.Msg.TEXT_PRINT_TITLE="print %1",lt.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",lt.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",lt.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",lt.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",lt.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",lt.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",lt.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",lt.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",lt.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",lt.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",lt.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",lt.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",lt.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",lt.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",lt.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",lt.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",lt.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",lt.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",lt.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",lt.Msg.TODAY="Today",lt.Msg.UNDO="Undo",lt.Msg.UNNAMED_KEY="unnamed",lt.Msg.VARIABLES_DEFAULT_NAME="item",lt.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",lt.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",lt.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",lt.Msg.VARIABLES_SET="set %1 to %2",lt.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",lt.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",lt.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",lt.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",lt.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",lt.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",lt.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",lt.Msg.CONTROLS_FOREACH_INPUT_DO=lt.Msg.CONTROLS_REPEAT_INPUT_DO,lt.Msg.CONTROLS_FOR_INPUT_DO=lt.Msg.CONTROLS_REPEAT_INPUT_DO,lt.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=lt.Msg.CONTROLS_IF_MSG_ELSEIF,lt.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=lt.Msg.CONTROLS_IF_MSG_ELSE,lt.Msg.CONTROLS_IF_IF_TITLE_IF=lt.Msg.CONTROLS_IF_MSG_IF,lt.Msg.CONTROLS_IF_MSG_THEN=lt.Msg.CONTROLS_REPEAT_INPUT_DO,lt.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=lt.Msg.CONTROLS_REPEAT_INPUT_DO,lt.Msg.LISTS_CREATE_WITH_ITEM_TITLE=lt.Msg.VARIABLES_DEFAULT_NAME,lt.Msg.LISTS_GET_INDEX_HELPURL=lt.Msg.LISTS_INDEX_OF_HELPURL,lt.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=lt.Msg.LISTS_INLIST,lt.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=lt.Msg.LISTS_INLIST,lt.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=lt.Msg.LISTS_INLIST,lt.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=lt.Msg.LISTS_INLIST,lt.Msg.MATH_CHANGE_TITLE_ITEM=lt.Msg.VARIABLES_DEFAULT_NAME,lt.Msg.PROCEDURES_DEFRETURN_COMMENT=lt.Msg.PROCEDURES_DEFNORETURN_COMMENT,lt.Msg.PROCEDURES_DEFRETURN_DO=lt.Msg.PROCEDURES_DEFNORETURN_DO,lt.Msg.PROCEDURES_DEFRETURN_PROCEDURE=lt.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,lt.Msg.PROCEDURES_DEFRETURN_TITLE=lt.Msg.PROCEDURES_DEFNORETURN_TITLE,lt.Msg.TEXT_APPEND_VARIABLE=lt.Msg.VARIABLES_DEFAULT_NAME,lt.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=lt.Msg.VARIABLES_DEFAULT_NAME,lt.Msg.MATH_HUE="230",lt.Msg.LOOPS_HUE="120",lt.Msg.LISTS_HUE="260",lt.Msg.LOGIC_HUE="210",lt.Msg.VARIABLES_HUE="330",lt.Msg.TEXTS_HUE="160",lt.Msg.PROCEDURES_HUE="290",lt.Msg.COLOUR_HUE="20",lt.Msg.VARIABLES_DYNAMIC_HUE="310",lt.Msg})}(en$1)),en$1.exports}var blocks={exports:{}},blocks_compressed={exports:{}},hasRequiredBlocks_compressed;function requireBlocks_compressed(){return hasRequiredBlocks_compressed||(hasRequiredBlocks_compressed=1,function(dt,$){(function(lt,ft){dt.exports=ft(requireBlockly_compressed())})(commonjsGlobal,function(lt){var ft=lt.__namespace__,St={};ft.module$build$src$core$contextmenu,ft.module$build$src$core$extensions,ft.module$build$src$core$variables,ft.module$build$src$core$utils$xml;var Tt=ft.module$build$src$core$msg.Msg,Ct=ft.module$build$src$core$common.createBlockDefinitionsFromJsonArray,At=ft.module$build$src$core$common.defineBlocks;St.blocks=Ct([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]);var Rt={customContextMenu:function(En){if(this.isInFlyout)(this.type==="variables_get_dynamic"||this.type==="variables_get_reporter_dynamic")&&(Dn={text:Tt.RENAME_VARIABLE,enabled:!0,callback:kt(this)},Bn=this.getField("VAR").getText(),Bn={text:Tt.DELETE_VARIABLE.replace("%1",Bn),enabled:!0,callback:Nt(this)},En.unshift(Dn),En.unshift(Bn));else{var Dn=this.getFieldValue("VAR"),Zn=this.workspace.getVariableById(Dn).type;if(this.type==="variables_get_dynamic"){Dn="variables_set_dynamic";var ur=Tt.VARIABLES_GET_CREATE_SET}else Dn="variables_get_dynamic",ur=Tt.VARIABLES_SET_CREATE_GET;var Bn={enabled:0<this.workspace.remainingCapacity()};const hr=this.getField("VAR").getText();Bn.text=ur.replace("%1",hr),ur=ft.module$build$src$core$utils$xml.createElement("field"),ur.setAttribute("name","VAR"),ur.setAttribute("variabletype",Zn),ur.appendChild(ft.module$build$src$core$utils$xml.createTextNode(hr)),Zn=ft.module$build$src$core$utils$xml.createElement("block"),Zn.setAttribute("type",Dn),Zn.appendChild(ur),Bn.callback=ft.module$build$src$core$contextmenu.callbackFactory(this,Zn),En.push(Bn)}},onchange:function(En){En=this.getFieldValue("VAR"),En=ft.module$build$src$core$variables.getVariable(this.workspace,En),this.type==="variables_get_dynamic"?this.outputConnection.setCheck(En.type):this.getInput("VALUE").connection.setCheck(En.type)}},kt=function(En){return function(){const Dn=En.workspace,Zn=En.getField("VAR").getVariable();ft.module$build$src$core$variables.renameVariable(Dn,Zn)}},Nt=function(En){return function(){const Dn=En.workspace,Zn=En.getField("VAR").getVariable();Dn.deleteVariableById(Zn.getId()),Dn.refreshToolboxSelection()}};ft.module$build$src$core$extensions.registerMixin("contextMenu_variableDynamicSetterGetter",Rt),At(St.blocks);var Bt={};ft.module$build$src$core$contextmenu,ft.module$build$src$core$extensions,ft.module$build$src$core$variables,ft.module$build$src$core$utils$xml;var Ut=ft.module$build$src$core$msg.Msg,zt=ft.module$build$src$core$common.createBlockDefinitionsFromJsonArray,Zt=ft.module$build$src$core$common.defineBlocks;Bt.blocks=zt([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]);var ln={customContextMenu:function(En){if(this.isInFlyout)(this.type==="variables_get"||this.type==="variables_get_reporter")&&(Dn={text:Ut.RENAME_VARIABLE,enabled:!0,callback:cn(this)},ur=this.getField("VAR").getText(),ur={text:Ut.DELETE_VARIABLE.replace("%1",ur),enabled:!0,callback:hn(this)},En.unshift(Dn),En.unshift(ur));else{if(this.type==="variables_get")var Dn="variables_set",Zn=Ut.VARIABLES_GET_CREATE_SET;else Dn="variables_get",Zn=Ut.VARIABLES_SET_CREATE_GET;var ur={enabled:0<this.workspace.remainingCapacity()},Bn=this.getField("VAR").getText();ur.text=Zn.replace("%1",Bn),Zn=ft.module$build$src$core$utils$xml.createElement("field"),Zn.setAttribute("name","VAR"),Zn.appendChild(ft.module$build$src$core$utils$xml.createTextNode(Bn)),Bn=ft.module$build$src$core$utils$xml.createElement("block"),Bn.setAttribute("type",Dn),Bn.appendChild(Zn),ur.callback=ft.module$build$src$core$contextmenu.callbackFactory(this,Bn),En.push(ur)}}},cn=function(En){return function(){const Dn=En.workspace,Zn=En.getField("VAR").getVariable();ft.module$build$src$core$variables.renameVariable(Dn,Zn)}},hn=function(En){return function(){const Dn=En.workspace,Zn=En.getField("VAR").getVariable();Dn.deleteVariableById(Zn.getId()),Dn.refreshToolboxSelection()}};ft.module$build$src$core$extensions.registerMixin("contextMenu_variableSetterGetter",ln),Zt(Bt.blocks);var pn={};ft.module$build$src$core$extensions;var dn=ft.module$build$src$core$msg.Msg;ft.module$build$src$core$utils$xml,ft.Align$$module$build$src$core$input,ft.module$build$src$core$connection_type.ConnectionType;var gn=ft.module$build$src$core$field_dropdown.FieldDropdown;ft.FieldImage$$module$build$src$core$field_image,ft.FieldTextInput$$module$build$src$core$field_textinput,ft.Mutator$$module$build$src$core$mutator;var vn=ft.module$build$src$core$common.createBlockDefinitionsFromJsonArray,Tn=ft.module$build$src$core$common.defineBlocks;pn.blocks=vn([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:""},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),pn.blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[dn.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[dn.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[dn.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[dn.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[dn.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[dn.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(dn.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(dn.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),dn.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(dn.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(dn.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){const En=ft.module$build$src$core$utils$xml.createElement("mutation");var Dn=this.getInput("AT1").type===ft.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return En.setAttribute("at1",Dn),Dn=this.getInput("AT2").type===ft.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE,En.setAttribute("at2",Dn),En},domToMutation:function(En){const Dn=En.getAttribute("at1")==="true";En=En.getAttribute("at2")==="true",this.updateAt_(1,Dn),this.updateAt_(2,En)},updateAt_:function(En,Dn){this.removeInput("AT"+En),this.removeInput("ORDINAL"+En,!0),Dn?(this.appendValueInput("AT"+En).setCheck("Number"),dn.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+En).appendField(dn.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+En),En===2&&dn.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(dn.TEXT_GET_SUBSTRING_TAIL));const Zn=new gn(this["WHERE_OPTIONS_"+En],function(ur){const Bn=ur==="FROM_START"||ur==="FROM_END";if(Bn!==Dn){const hr=this.getSourceBlock();return hr.updateAt_(En,Bn),hr.setFieldValue(ur,"WHERE"+En),null}});this.getInput("AT"+En).appendField(Zn,"WHERE"+En),En===1&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},pn.blocks.text_changeCase={init:function(){const En=[[dn.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[dn.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[dn.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(dn.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new gn(En),"CASE"),this.setOutput(!0,"String"),this.setTooltip(dn.TEXT_CHANGECASE_TOOLTIP)}},pn.blocks.text_trim={init:function(){const En=[[dn.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[dn.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[dn.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(dn.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new gn(En),"MODE"),this.setOutput(!0,"String"),this.setTooltip(dn.TEXT_TRIM_TOOLTIP)}},pn.blocks.text_print={init:function(){this.jsonInit({message0:dn.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:dn.TEXT_PRINT_TOOLTIP,helpUrl:dn.TEXT_PRINT_HELPURL})}};var Cn={updateType_:function(En){this.outputConnection.setCheck(En==="NUMBER"?"Number":"String")},mutationToDom:function(){const En=ft.module$build$src$core$utils$xml.createElement("mutation");return En.setAttribute("type",this.getFieldValue("TYPE")),En},domToMutation:function(En){this.updateType_(En.getAttribute("type"))}};pn.blocks.text_prompt_ext=Object.assign({},Cn,{init:function(){var En=[[dn.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[dn.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(dn.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks");const Dn=this;En=new gn(En,function(Zn){Dn.updateType_(Zn)}),this.appendValueInput("TEXT").appendField(En,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(function(){return Dn.getFieldValue("TYPE")==="TEXT"?dn.TEXT_PROMPT_TOOLTIP_TEXT:dn.TEXT_PROMPT_TOOLTIP_NUMBER})}}),pn.blocks.text_prompt=Object.assign({},Cn,{init:function(){this.mixin($n);var En=[[dn.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[dn.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];const Dn=this;this.setHelpUrl(dn.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),En=new gn(En,function(Zn){Dn.updateType_(Zn)}),this.appendDummyInput().appendField(En,"TYPE").appendField(this.newQuote_(!0)).appendField(new ft.FieldTextInput$$module$build$src$core$field_textinput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(function(){return Dn.getFieldValue("TYPE")==="TEXT"?dn.TEXT_PROMPT_TOOLTIP_TEXT:dn.TEXT_PROMPT_TOOLTIP_NUMBER})}}),pn.blocks.text_count={init:function(){this.jsonInit({message0:dn.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:dn.TEXT_COUNT_TOOLTIP,helpUrl:dn.TEXT_COUNT_HELPURL})}},pn.blocks.text_replace={init:function(){this.jsonInit({message0:dn.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:dn.TEXT_REPLACE_TOOLTIP,helpUrl:dn.TEXT_REPLACE_HELPURL})}},pn.blocks.text_reverse={init:function(){this.jsonInit({message0:dn.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:dn.TEXT_REVERSE_TOOLTIP,helpUrl:dn.TEXT_REVERSE_HELPURL})}};var $n={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(En){for(let Dn=0,Zn;Zn=this.inputList[Dn];Dn++)for(let ur=0,Bn;Bn=Zn.fieldRow[ur];ur++)if(En===Bn.name){Zn.insertFieldAt(ur,this.newQuote_(!0)),Zn.insertFieldAt(ur+2,this.newQuote_(!1));return}console.warn('field named "'+En+'" not found in '+this.toDevString())},newQuote_:function(En){return En=this.RTL?!En:En,new ft.FieldImage$$module$build$src$core$field_image(En?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,En?"":"")}},xn=function(){this.mixin($n),this.quoteField_("TEXT")},Rn={mutationToDom:function(){const En=ft.module$build$src$core$utils$xml.createElement("mutation");return En.setAttribute("items",this.itemCount_),En},domToMutation:function(En){this.itemCount_=parseInt(En.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(En){this.itemCount_=En.itemCount,this.updateShape_()},decompose:function(En){const Dn=En.newBlock("text_create_join_container");Dn.initSvg();let Zn=Dn.getInput("STACK").connection;for(let ur=0;ur<this.itemCount_;ur++){const Bn=En.newBlock("text_create_join_item");Bn.initSvg(),Zn.connect(Bn.previousConnection),Zn=Bn.nextConnection}return Dn},compose:function(En){var Dn=En.getInputTargetBlock("STACK");for(En=[];Dn;)Dn.isInsertionMarker()||En.push(Dn.valueConnection_),Dn=Dn.getNextBlock();for(Dn=0;Dn<this.itemCount_;Dn++){const Zn=this.getInput("ADD"+Dn).connection.targetConnection;Zn&&En.indexOf(Zn)===-1&&Zn.disconnect()}for(this.itemCount_=En.length,this.updateShape_(),Dn=0;Dn<this.itemCount_;Dn++)ft.Mutator$$module$build$src$core$mutator.reconnect(En[Dn],this,"ADD"+Dn)},saveConnections:function(En){En=En.getInputTargetBlock("STACK");let Dn=0;for(;En;){if(En.isInsertionMarker()){En=En.getNextBlock();continue}const Zn=this.getInput("ADD"+Dn);En.valueConnection_=Zn&&Zn.connection.targetConnection,En=En.getNextBlock(),Dn++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var En=0;En<this.itemCount_;En++)if(!this.getInput("ADD"+En)){const Dn=this.appendValueInput("ADD"+En).setAlign(ft.Align$$module$build$src$core$input.RIGHT);En===0&&Dn.appendField(dn.TEXT_JOIN_TITLE_CREATEWITH)}for(En=this.itemCount_;this.getInput("ADD"+En);En++)this.removeInput("ADD"+En)}},Pn=function(){this.mixin($n),this.itemCount_=2,this.updateShape_(),this.setMutator(new ft.Mutator$$module$build$src$core$mutator(["text_create_join_item"],this))};ft.module$build$src$core$extensions.register("text_append_tooltip",ft.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_TEXT_APPEND_TOOLTIP}","VAR"));var Nn=function(){const En=this;this.setTooltip(function(){return dn.TEXT_INDEXOF_TOOLTIP.replace("%1",En.workspace.options.oneBasedIndex?"0":"-1")})},Wn={mutationToDom:function(){const En=ft.module$build$src$core$utils$xml.createElement("mutation");return En.setAttribute("at",!!this.isAt_),En},domToMutation:function(En){En=En.getAttribute("at")!=="false",this.updateAt_(En)},updateAt_:function(En){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),En&&(this.appendValueInput("AT").setCheck("Number"),dn.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(dn.ORDINAL_NUMBER_SUFFIX)),dn.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(dn.TEXT_CHARAT_TAIL)),this.isAt_=En}},zn=function(){this.getField("WHERE").setValidator(function(Dn){Dn=Dn==="FROM_START"||Dn==="FROM_END",Dn!==this.isAt_&&this.getSourceBlock().updateAt_(Dn)}),this.updateAt_(!0);const En=this;this.setTooltip(function(){var Dn=En.getFieldValue("WHERE");let Zn=dn.TEXT_CHARAT_TOOLTIP;return(Dn==="FROM_START"||Dn==="FROM_END")&&(Dn=Dn==="FROM_START"?dn.LISTS_INDEX_FROM_START_TOOLTIP:dn.LISTS_INDEX_FROM_END_TOOLTIP)&&(Zn+="  "+Dn.replace("%1",En.workspace.options.oneBasedIndex?"#1":"#0")),Zn})};ft.module$build$src$core$extensions.register("text_indexOf_tooltip",Nn),ft.module$build$src$core$extensions.register("text_quotes",xn),ft.module$build$src$core$extensions.registerMutator("text_join_mutator",Rn,Pn),ft.module$build$src$core$extensions.registerMutator("text_charAt_mutator",Wn,zn),Tn(pn.blocks);var Yn={};ft.module$build$src$core$contextmenu,ft.module$build$src$core$events$events,ft.module$build$src$core$procedures,ft.module$build$src$core$variables,ft.module$build$src$core$xml,ft.module$build$src$core$utils$xml,ft.Align$$module$build$src$core$input,ft.config$$module$build$src$core$config,ft.FieldCheckbox$$module$build$src$core$field_checkbox,ft.FieldLabel$$module$build$src$core$field_label,ft.FieldTextInput$$module$build$src$core$field_textinput;var Qn=ft.module$build$src$core$msg.Msg;ft.Mutator$$module$build$src$core$mutator,ft.module$build$src$core$names.Names;var nr=ft.module$build$src$core$common.defineBlocks;Yn.blocks={};var Ln={setStatements_:function(En){this.hasStatements_!==En&&(En?(this.appendStatementInput("STACK").appendField(Qn.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=En)},updateParams_:function(){let En="";this.arguments_.length&&(En=Qn.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),ft.module$build$src$core$events$events.disable();try{this.setFieldValue(En,"PARAMS")}finally{ft.module$build$src$core$events$events.enable()}},mutationToDom:function(En){const Dn=ft.module$build$src$core$utils$xml.createElement("mutation");En&&Dn.setAttribute("name",this.getFieldValue("NAME"));for(let Zn=0;Zn<this.argumentVarModels_.length;Zn++){const ur=ft.module$build$src$core$utils$xml.createElement("arg"),Bn=this.argumentVarModels_[Zn];ur.setAttribute("name",Bn.name),ur.setAttribute("varid",Bn.getId()),En&&this.paramIds_&&ur.setAttribute("paramId",this.paramIds_[Zn]),Dn.appendChild(ur)}return this.hasStatements_||Dn.setAttribute("statements","false"),Dn},domToMutation:function(En){this.arguments_=[],this.argumentVarModels_=[];for(let Zn=0,ur;ur=En.childNodes[Zn];Zn++)if(ur.nodeName.toLowerCase()==="arg"){const Bn=ur.getAttribute("name");var Dn=ur.getAttribute("varid")||ur.getAttribute("varId");this.arguments_.push(Bn),Dn=ft.module$build$src$core$variables.getOrCreateVariablePackage(this.workspace,Dn,Bn,""),Dn!==null?this.argumentVarModels_.push(Dn):console.log(`Failed to create a variable named "${Bn}", ignoring.`)}this.updateParams_(),ft.module$build$src$core$procedures.mutateCallers(this),this.setStatements_(En.getAttribute("statements")!=="false")},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;const En=Object.create(null);if(this.argumentVarModels_.length){En.params=[];for(let Dn=0;Dn<this.argumentVarModels_.length;Dn++)En.params.push({name:this.argumentVarModels_[Dn].name,id:this.argumentVarModels_[Dn].getId()})}return this.hasStatements_||(En.hasStatements=!1),En},loadExtraState:function(En){if(this.arguments_=[],this.argumentVarModels_=[],En.params)for(let Zn=0;Zn<En.params.length;Zn++){var Dn=En.params[Zn];Dn=ft.module$build$src$core$variables.getOrCreateVariablePackage(this.workspace,Dn.id,Dn.name,""),this.arguments_.push(Dn.name),this.argumentVarModels_.push(Dn)}this.updateParams_(),ft.module$build$src$core$procedures.mutateCallers(this),this.setStatements_(En.hasStatements!==!1)},decompose:function(En){const Dn=ft.module$build$src$core$utils$xml.createElement("block");Dn.setAttribute("type","procedures_mutatorcontainer");var Zn=ft.module$build$src$core$utils$xml.createElement("statement");Zn.setAttribute("name","STACK"),Dn.appendChild(Zn);for(let Bn=0;Bn<this.arguments_.length;Bn++){const hr=ft.module$build$src$core$utils$xml.createElement("block");hr.setAttribute("type","procedures_mutatorarg");var ur=ft.module$build$src$core$utils$xml.createElement("field");ur.setAttribute("name","NAME");const Nr=ft.module$build$src$core$utils$xml.createTextNode(this.arguments_[Bn]);ur.appendChild(Nr),hr.appendChild(ur),ur=ft.module$build$src$core$utils$xml.createElement("next"),hr.appendChild(ur),Zn.appendChild(hr),Zn=ur}return En=ft.module$build$src$core$xml.domToBlock(Dn,En),this.type==="procedures_defreturn"?En.setFieldValue(this.hasStatements_,"STATEMENTS"):En.removeInput("STATEMENT_INPUT"),ft.module$build$src$core$procedures.mutateCallers(this),En},compose:function(En){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];let Dn=En.getInputTargetBlock("STACK");for(;Dn&&!Dn.isInsertionMarker();){var Zn=Dn.getFieldValue("NAME");this.arguments_.push(Zn),Zn=this.workspace.getVariable(Zn,""),this.argumentVarModels_.push(Zn),this.paramIds_.push(Dn.id),Dn=Dn.nextConnection&&Dn.nextConnection.targetBlock()}this.updateParams_(),ft.module$build$src$core$procedures.mutateCallers(this),En=En.getFieldValue("STATEMENTS"),En!==null&&(En=En==="TRUE",this.hasStatements_!==En)&&(En?(this.setStatements_(!0),ft.Mutator$$module$build$src$core$mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(En=this.getInput("STACK").connection,(this.statementConnection_=En.targetConnection)&&(En=En.targetBlock(),En.unplug(),En.bumpNeighbours()),this.setStatements_(!1)))},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(En,Dn){var Zn=this.workspace.getVariableById(En);if(Zn.type===""){Zn=Zn.name,Dn=this.workspace.getVariableById(Dn);var ur=!1;for(let Bn=0;Bn<this.argumentVarModels_.length;Bn++)this.argumentVarModels_[Bn].getId()===En&&(this.arguments_[Bn]=Dn.name,this.argumentVarModels_[Bn]=Dn,ur=!0);ur&&(this.displayRenamedVar_(Zn,Dn.name),ft.module$build$src$core$procedures.mutateCallers(this))}},updateVarName:function(En){const Dn=En.name;let Zn=!1,ur;for(let Bn=0;Bn<this.argumentVarModels_.length;Bn++)this.argumentVarModels_[Bn].getId()===En.getId()&&(ur=this.arguments_[Bn],this.arguments_[Bn]=Dn,Zn=!0);Zn&&(this.displayRenamedVar_(ur,Dn),ft.module$build$src$core$procedures.mutateCallers(this))},displayRenamedVar_:function(En,Dn){if(this.updateParams_(),this.mutator&&this.mutator.isVisible()){const Zn=this.mutator.workspace_.getAllBlocks(!1);for(let ur=0,Bn;Bn=Zn[ur];ur++)Bn.type==="procedures_mutatorarg"&&ft.module$build$src$core$names.Names.equals(En,Bn.getFieldValue("NAME"))&&Bn.setFieldValue(Dn,"NAME")}},customContextMenu:function(En){if(!this.isInFlyout){var Dn={enabled:!0},Zn=this.getFieldValue("NAME");Dn.text=Qn.PROCEDURES_CREATE_DO.replace("%1",Zn);var ur=ft.module$build$src$core$utils$xml.createElement("mutation");for(ur.setAttribute("name",Zn),Zn=0;Zn<this.arguments_.length;Zn++){var Bn=ft.module$build$src$core$utils$xml.createElement("arg");Bn.setAttribute("name",this.arguments_[Zn]),ur.appendChild(Bn)}if(Zn=ft.module$build$src$core$utils$xml.createElement("block"),Zn.setAttribute("type",this.callType_),Zn.appendChild(ur),Dn.callback=ft.module$build$src$core$contextmenu.callbackFactory(this,Zn),En.push(Dn),!this.isCollapsed())for(Dn=0;Dn<this.argumentVarModels_.length;Dn++)ur={enabled:!0},Zn=this.argumentVarModels_[Dn],ur.text=Qn.VARIABLES_SET_CREATE_GET.replace("%1",Zn.name),Zn=ft.module$build$src$core$variables.generateVariableFieldDom(Zn),Bn=ft.module$build$src$core$utils$xml.createElement("block"),Bn.setAttribute("type","variables_get"),Bn.appendChild(Zn),ur.callback=ft.module$build$src$core$contextmenu.callbackFactory(this,Bn),En.push(ur)}}};Yn.blocks.procedures_defnoreturn=Object.assign({},Ln,{init:function(){var En=ft.module$build$src$core$procedures.findLegalName("",this);En=new ft.FieldTextInput$$module$build$src$core$field_textinput(En,ft.module$build$src$core$procedures.rename),En.setSpellcheck(!1),this.appendDummyInput().appendField(Qn.PROCEDURES_DEFNORETURN_TITLE).appendField(En,"NAME").appendField("","PARAMS"),this.setMutator(new ft.Mutator$$module$build$src$core$mutator(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&Qn.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(Qn.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(Qn.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(Qn.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},callType_:"procedures_callnoreturn"}),Yn.blocks.procedures_defreturn=Object.assign({},Ln,{init:function(){var En=ft.module$build$src$core$procedures.findLegalName("",this);En=new ft.FieldTextInput$$module$build$src$core$field_textinput(En,ft.module$build$src$core$procedures.rename),En.setSpellcheck(!1),this.appendDummyInput().appendField(Qn.PROCEDURES_DEFRETURN_TITLE).appendField(En,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(ft.Align$$module$build$src$core$input.RIGHT).appendField(Qn.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new ft.Mutator$$module$build$src$core$mutator(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&Qn.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(Qn.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(Qn.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(Qn.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},callType_:"procedures_callreturn"}),Yn.blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(Qn.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(Qn.PROCEDURES_ALLOW_STATEMENTS).appendField(new ft.FieldCheckbox$$module$build$src$core$field_checkbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(Qn.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},Yn.blocks.procedures_mutatorarg={init:function(){const En=new ft.FieldTextInput$$module$build$src$core$field_textinput(ft.module$build$src$core$procedures.DEFAULT_ARG,this.validator_);En.oldShowEditorFn_=En.showEditor_,En.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(Qn.PROCEDURES_MUTATORARG_TITLE).appendField(En,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(Qn.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,En.onFinishEditing_=this.deleteIntermediateVars_,En.createdVariables_=[],En.onFinishEditing_("x")},validator_:function(En){var Dn=this.getSourceBlock();const Zn=ft.Mutator$$module$build$src$core$mutator.findParentWs(Dn.workspace);if(En=En.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""),!En)return null;const ur=(Dn.workspace.targetWorkspace||Dn.workspace).getAllBlocks(!1),Bn=En.toLowerCase();for(let hr=0;hr<ur.length;hr++){if(ur[hr].id===this.getSourceBlock().id)continue;const Nr=ur[hr].getFieldValue("NAME");if(Nr&&Nr.toLowerCase()===Bn)return null}return Dn.isInFlyout||((Dn=Zn.getVariable(En,""))&&Dn.name!==En&&Zn.renameVariableById(Dn.getId(),En),Dn||(Dn=Zn.createVariable(En,""))&&this.createdVariables_&&this.createdVariables_.push(Dn)),En},deleteIntermediateVars_:function(En){const Dn=ft.Mutator$$module$build$src$core$mutator.findParentWs(this.getSourceBlock().workspace);if(Dn)for(let Zn=0;Zn<this.createdVariables_.length;Zn++){const ur=this.createdVariables_[Zn];ur.name!==En&&Dn.deleteVariableById(ur.getId())}}};var Un={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(En,Dn){ft.module$build$src$core$names.Names.equals(En,this.getProcedureCall())&&(this.setFieldValue(Dn,"NAME"),this.setTooltip((this.outputConnection?Qn.PROCEDURES_CALLRETURN_TOOLTIP:Qn.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",Dn)))},setProcedureParameters_:function(En,Dn){var Zn=ft.module$build$src$core$procedures.getDefinition(this.getProcedureCall(),this.workspace),ur=Zn&&Zn.mutator&&Zn.mutator.isVisible();if(ur?this.setCollapsed(!1):(this.quarkConnections_={},this.quarkIds_=null),En.join(`
`)===this.arguments_.join(`
`))this.quarkIds_=Dn;else{if(Dn.length!==En.length)throw RangeError("paramNames and paramIds must be the same length.");this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),Zn=this.rendered,this.rendered=!1;for(let hr=0;hr<this.arguments_.length;hr++){var Bn=this.getInput("ARG"+hr);Bn&&(Bn=Bn.connection.targetConnection,this.quarkConnections_[this.quarkIds_[hr]]=Bn,ur&&Bn&&Dn.indexOf(this.quarkIds_[hr])===-1&&(Bn.disconnect(),Bn.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(En),this.argumentVarModels_=[],En=0;En<this.arguments_.length;En++)ur=ft.module$build$src$core$variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[En],""),this.argumentVarModels_.push(ur);if(this.updateShape_(),this.quarkIds_=Dn)for(Dn=0;Dn<this.arguments_.length;Dn++)En=this.quarkIds_[Dn],En in this.quarkConnections_&&(ft.Mutator$$module$build$src$core$mutator.reconnect(this.quarkConnections_[En],this,"ARG"+Dn)||delete this.quarkConnections_[En]);(this.rendered=Zn)&&this.render()}},updateShape_:function(){for(var En=0;En<this.arguments_.length;En++){var Dn=this.getField("ARGNAME"+En);if(Dn){ft.module$build$src$core$events$events.disable();try{Dn.setValue(this.arguments_[En])}finally{ft.module$build$src$core$events$events.enable()}}else Dn=new ft.FieldLabel$$module$build$src$core$field_label(this.arguments_[En]),this.appendValueInput("ARG"+En).setAlign(ft.Align$$module$build$src$core$input.RIGHT).appendField(Dn,"ARGNAME"+En).init()}for(En=this.arguments_.length;this.getInput("ARG"+En);En++)this.removeInput("ARG"+En);(En=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(En.appendField(Qn.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),En.init()):this.getField("WITH")&&En.removeField("WITH"))},mutationToDom:function(){const En=ft.module$build$src$core$utils$xml.createElement("mutation");En.setAttribute("name",this.getProcedureCall());for(let Dn=0;Dn<this.arguments_.length;Dn++){const Zn=ft.module$build$src$core$utils$xml.createElement("arg");Zn.setAttribute("name",this.arguments_[Dn]),En.appendChild(Zn)}return En},domToMutation:function(En){var Dn=En.getAttribute("name");this.renameProcedure(this.getProcedureCall(),Dn),Dn=[];const Zn=[];for(let ur=0,Bn;Bn=En.childNodes[ur];ur++)Bn.nodeName.toLowerCase()==="arg"&&(Dn.push(Bn.getAttribute("name")),Zn.push(Bn.getAttribute("paramId")));this.setProcedureParameters_(Dn,Zn)},saveExtraState:function(){const En=Object.create(null);return En.name=this.getProcedureCall(),this.arguments_.length&&(En.params=this.arguments_),En},loadExtraState:function(En){if(this.renameProcedure(this.getProcedureCall(),En.name),En=En.params){const Dn=[];Dn.length=En.length,Dn.fill(null),this.setProcedureParameters_(En,Dn)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(En){if(this.workspace&&!this.workspace.isFlyout&&En.recordUndo)if(En.type===ft.module$build$src$core$events$events.BLOCK_CREATE&&En.ids.indexOf(this.id)!==-1){var Dn=this.getProcedureCall();if(Dn=ft.module$build$src$core$procedures.getDefinition(Dn,this.workspace),!Dn||Dn.type===this.defType_&&JSON.stringify(Dn.getVars())===JSON.stringify(this.arguments_)||(Dn=null),!Dn){ft.module$build$src$core$events$events.setGroup(En.group),En=ft.module$build$src$core$utils$xml.createElement("xml"),Dn=ft.module$build$src$core$utils$xml.createElement("block"),Dn.setAttribute("type",this.defType_);var Zn=this.getRelativeToSurfaceXY(),ur=Zn.y+2*ft.config$$module$build$src$core$config.snapRadius;Dn.setAttribute("x",Zn.x+ft.config$$module$build$src$core$config.snapRadius*(this.RTL?-1:1)),Dn.setAttribute("y",ur),Zn=this.mutationToDom(),Dn.appendChild(Zn),Zn=ft.module$build$src$core$utils$xml.createElement("field"),Zn.setAttribute("name","NAME"),ur=this.getProcedureCall();const Bn=ft.module$build$src$core$procedures.findLegalName(ur,this);ur!==Bn&&this.renameProcedure(ur,Bn),Zn.appendChild(ft.module$build$src$core$utils$xml.createTextNode(ur)),Dn.appendChild(Zn),En.appendChild(Dn),ft.module$build$src$core$xml.domToWorkspace(En,this.workspace),ft.module$build$src$core$events$events.setGroup(!1)}}else En.type===ft.module$build$src$core$events$events.BLOCK_DELETE?(Dn=this.getProcedureCall(),ft.module$build$src$core$procedures.getDefinition(Dn,this.workspace)||(ft.module$build$src$core$events$events.setGroup(En.group),this.dispose(!0),ft.module$build$src$core$events$events.setGroup(!1))):En.type===ft.module$build$src$core$events$events.CHANGE&&En.element==="disabled"&&(Dn=this.getProcedureCall(),(Dn=ft.module$build$src$core$procedures.getDefinition(Dn,this.workspace))&&Dn.id===En.blockId&&((Dn=ft.module$build$src$core$events$events.getGroup())&&console.log("Saw an existing group while responding to a definition change"),ft.module$build$src$core$events$events.setGroup(En.group),En.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),ft.module$build$src$core$events$events.setGroup(Dn)))},customContextMenu:function(En){if(this.workspace.isMovable()){var Dn={enabled:!0};Dn.text=Qn.PROCEDURES_HIGHLIGHT_DEF;var Zn=this.getProcedureCall(),ur=this.workspace;Dn.callback=function(){const Bn=ft.module$build$src$core$procedures.getDefinition(Zn,ur);Bn&&(ur.centerOnBlock(Bn.id),Bn.select())},En.push(Dn)}}};Yn.blocks.procedures_callnoreturn=Object.assign({},Un,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(Qn.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defnoreturn"}),Yn.blocks.procedures_callreturn=Object.assign({},Un,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(Qn.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defreturn"}),Yn.blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(Qn.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(Qn.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(Qn.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(Qn.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){const En=ft.module$build$src$core$utils$xml.createElement("mutation");return En.setAttribute("value",Number(this.hasReturnValue_)),En},domToMutation:function(En){this.hasReturnValue_=En.getAttribute("value")==="1",this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(Qn.PROCEDURES_DEFRETURN_RETURN))},onchange:function(En){if(!(this.workspace.isDragging&&this.workspace.isDragging()||En.type!==ft.module$build$src$core$events$events.BLOCK_MOVE)){var Dn=!1,Zn=this;do{if(this.FUNCTION_TYPES.indexOf(Zn.type)!==-1){Dn=!0;break}Zn=Zn.getSurroundParent()}while(Zn);Dn?(Zn.type==="procedures_defnoreturn"&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(Qn.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):Zn.type!=="procedures_defreturn"||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(Qn.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null)):this.setWarningText(Qn.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||(Zn=ft.module$build$src$core$events$events.getGroup(),ft.module$build$src$core$events$events.setGroup(En.group),this.setEnabled(Dn),ft.module$build$src$core$events$events.setGroup(Zn))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},nr(Yn.blocks);var Vn={};ft.module$build$src$core$extensions,ft.module$build$src$core$field_dropdown,ft.module$build$src$core$utils$xml;var sr=ft.module$build$src$core$common.createBlockDefinitionsFromJsonArray,In=ft.module$build$src$core$common.defineBlocks;Vn.blocks=sr([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["","PI"],["e","E"],["","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt()","SQRT1_2"],["","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]);var ir={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"};ft.module$build$src$core$extensions.register("math_op_tooltip",ft.module$build$src$core$extensions.buildTooltipForDropdown("OP",ir));var pr={mutationToDom:function(){const En=ft.module$build$src$core$utils$xml.createElement("mutation"),Dn=this.getFieldValue("PROPERTY")==="DIVISIBLE_BY";return En.setAttribute("divisor_input",Dn),En},domToMutation:function(En){En=En.getAttribute("divisor_input")==="true",this.updateShape_(En)},updateShape_:function(En){const Dn=this.getInput("DIVISOR");En?Dn||this.appendValueInput("DIVISOR").setCheck("Number"):Dn&&this.removeInput("DIVISOR")}},Jn=function(){this.getField("PROPERTY").setValidator(function(En){En=En==="DIVISIBLE_BY",this.getSourceBlock().updateShape_(En)})};ft.module$build$src$core$extensions.registerMutator("math_is_divisibleby_mutator",pr,Jn),ft.module$build$src$core$extensions.register("math_change_tooltip",ft.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_MATH_CHANGE_TOOLTIP}","VAR"));var Pr={updateType_:function(En){En==="MODE"?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){const En=ft.module$build$src$core$utils$xml.createElement("mutation");return En.setAttribute("op",this.getFieldValue("OP")),En},domToMutation:function(En){this.updateType_(En.getAttribute("op"))}},br=function(){this.getField("OP").setValidator(function(En){this.updateType_(En)}.bind(this))};ft.module$build$src$core$extensions.registerMutator("math_modes_of_list_mutator",Pr,br),In(Vn.blocks);var Gr={};ft.module$build$src$core$contextmenu,ft.module$build$src$core$events$events,ft.module$build$src$core$extensions,ft.module$build$src$core$variables,ft.module$build$src$core$utils$xml;var Kr=ft.module$build$src$core$msg.Msg,Xr=ft.module$build$src$core$common.createBlockDefinitionsFromJsonArray,Jr=ft.module$build$src$core$common.defineBlocks;Gr.blocks=Xr([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]);var Tr={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"};ft.module$build$src$core$extensions.register("controls_whileUntil_tooltip",ft.module$build$src$core$extensions.buildTooltipForDropdown("MODE",Tr));var Ir={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"};ft.module$build$src$core$extensions.register("controls_flow_tooltip",ft.module$build$src$core$extensions.buildTooltipForDropdown("FLOW",Ir));var Qr={customContextMenu:function(En){if(!this.isInFlyout){var Dn=this.getField("VAR").getVariable(),Zn=Dn.name;if(!this.isCollapsed()&&Zn!==null){const ur={enabled:!0};ur.text=Kr.VARIABLES_SET_CREATE_GET.replace("%1",Zn),Dn=ft.module$build$src$core$variables.generateVariableFieldDom(Dn),Zn=ft.module$build$src$core$utils$xml.createElement("block"),Zn.setAttribute("type","variables_get"),Zn.appendChild(Dn),ur.callback=ft.module$build$src$core$contextmenu.callbackFactory(this,Zn),En.push(ur)}}}};ft.module$build$src$core$extensions.registerMixin("contextMenu_newGetVariableBlock",Qr),ft.module$build$src$core$extensions.register("controls_for_tooltip",ft.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),ft.module$build$src$core$extensions.register("controls_forEach_tooltip",ft.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),Gr.loopTypes=new Set(["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"]);var oo={getSurroundLoop:function(){let En=this;do{if(Gr.loopTypes.has(En.type))return En;En=En.getSurroundParent()}while(En);return null},onchange:function(En){if(this.workspace.isDragging&&!this.workspace.isDragging()&&En.type===ft.module$build$src$core$events$events.BLOCK_MOVE){var Dn=this.getSurroundLoop(this);if(this.setWarningText(Dn?null:Kr.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout){const Zn=ft.module$build$src$core$events$events.getGroup();ft.module$build$src$core$events$events.setGroup(En.group),this.setEnabled(Dn),ft.module$build$src$core$events$events.setGroup(Zn)}}}};ft.module$build$src$core$extensions.registerMixin("controls_flow_in_loop_check",oo),Jr(Gr.blocks);var zr={};ft.module$build$src$core$events$events,ft.module$build$src$core$extensions,ft.module$build$src$core$utils$xml;var to=ft.module$build$src$core$msg.Msg;ft.Mutator$$module$build$src$core$mutator;var co=ft.module$build$src$core$common.createBlockDefinitionsFromJsonArray,uo=ft.module$build$src$core$common.defineBlocks;zr.blocks=co([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["","NEQ"],["<","LT"],["","LTE"],[">","GT"],["","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]);var Mo={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"};ft.module$build$src$core$extensions.register("logic_op_tooltip",ft.module$build$src$core$extensions.buildTooltipForDropdown("OP",Mo));var Vo={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const En=ft.module$build$src$core$utils$xml.createElement("mutation");return this.elseifCount_&&En.setAttribute("elseif",this.elseifCount_),this.elseCount_&&En.setAttribute("else",1),En},domToMutation:function(En){this.elseifCount_=parseInt(En.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(En.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const En=Object.create(null);return this.elseifCount_&&(En.elseIfCount=this.elseifCount_),this.elseCount_&&(En.hasElse=!0),En},loadExtraState:function(En){this.elseifCount_=En.elseIfCount||0,this.elseCount_=En.hasElse?1:0,this.updateShape_()},decompose:function(En){const Dn=En.newBlock("controls_if_if");Dn.initSvg();let Zn=Dn.nextConnection;for(let ur=1;ur<=this.elseifCount_;ur++){const Bn=En.newBlock("controls_if_elseif");Bn.initSvg(),Zn.connect(Bn.previousConnection),Zn=Bn.nextConnection}return this.elseCount_&&(En=En.newBlock("controls_if_else"),En.initSvg(),Zn.connect(En.previousConnection)),Dn},compose:function(En){En=En.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;const Dn=[null],Zn=[null];let ur=null;for(;En;){if(!En.isInsertionMarker())switch(En.type){case"controls_if_elseif":this.elseifCount_++,Dn.push(En.valueConnection_),Zn.push(En.statementConnection_);break;case"controls_if_else":this.elseCount_++,ur=En.statementConnection_;break;default:throw TypeError("Unknown block type: "+En.type)}En=En.getNextBlock()}this.updateShape_(),this.reconnectChildBlocks_(Dn,Zn,ur)},saveConnections:function(En){En=En.nextConnection.targetBlock();let Dn=1;for(;En;){if(!En.isInsertionMarker())switch(En.type){case"controls_if_elseif":var Zn=this.getInput("IF"+Dn);const ur=this.getInput("DO"+Dn);En.valueConnection_=Zn&&Zn.connection.targetConnection,En.statementConnection_=ur&&ur.connection.targetConnection,Dn++;break;case"controls_if_else":Zn=this.getInput("ELSE"),En.statementConnection_=Zn&&Zn.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+En.type)}En=En.getNextBlock()}},rebuildShape_:function(){const En=[null],Dn=[null];let Zn=null;this.getInput("ELSE")&&(Zn=this.getInput("ELSE").connection.targetConnection);for(let ur=1;this.getInput("IF"+ur);ur++){const Bn=this.getInput("IF"+ur),hr=this.getInput("DO"+ur);En.push(Bn.connection.targetConnection),Dn.push(hr.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(En,Dn,Zn)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var En=1;this.getInput("IF"+En);En++)this.removeInput("IF"+En),this.removeInput("DO"+En);for(En=1;En<=this.elseifCount_;En++)this.appendValueInput("IF"+En).setCheck("Boolean").appendField(to.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+En).appendField(to.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(to.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(En,Dn,Zn){for(let ur=1;ur<=this.elseifCount_;ur++)ft.Mutator$$module$build$src$core$mutator.reconnect(En[ur],this,"IF"+ur),ft.Mutator$$module$build$src$core$mutator.reconnect(Dn[ur],this,"DO"+ur);ft.Mutator$$module$build$src$core$mutator.reconnect(Zn,this,"ELSE")}};ft.module$build$src$core$extensions.registerMutator("controls_if_mutator",Vo,null,["controls_if_elseif","controls_if_else"]);var jn=function(){this.setTooltip(function(){if(this.elseifCount_||this.elseCount_){if(!this.elseifCount_&&this.elseCount_)return to.CONTROLS_IF_TOOLTIP_2;if(this.elseifCount_&&!this.elseCount_)return to.CONTROLS_IF_TOOLTIP_3;if(this.elseifCount_&&this.elseCount_)return to.CONTROLS_IF_TOOLTIP_4}else return to.CONTROLS_IF_TOOLTIP_1;return""}.bind(this))};ft.module$build$src$core$extensions.register("controls_if_tooltip",jn);var Gn={onchange:function(En){this.prevBlocks_||(this.prevBlocks_=[null,null]);var Dn=this.getInputTargetBlock("A");const Zn=this.getInputTargetBlock("B");Dn&&Zn&&!this.workspace.connectionChecker.doTypeChecks(Dn.outputConnection,Zn.outputConnection)&&(ft.module$build$src$core$events$events.setGroup(En.group),En=this.prevBlocks_[0],En!==Dn&&(Dn.unplug(),!En||En.isDisposed()||En.isShadow()||this.getInput("A").connection.connect(En.outputConnection)),Dn=this.prevBlocks_[1],Dn!==Zn&&(Zn.unplug(),!Dn||Dn.isDisposed()||Dn.isShadow()||this.getInput("B").connection.connect(Dn.outputConnection)),this.bumpNeighbours(),ft.module$build$src$core$events$events.setGroup(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},rr=function(){this.mixin(Gn)};ft.module$build$src$core$extensions.register("logic_compare",rr);var Or={prevParentConnection_:null,onchange:function(En){const Dn=this.getInputTargetBlock("THEN"),Zn=this.getInputTargetBlock("ELSE"),ur=this.outputConnection.targetConnection;if((Dn||Zn)&&ur)for(let Bn=0;2>Bn;Bn++){const hr=Bn===1?Dn:Zn;hr&&!hr.workspace.connectionChecker.doTypeChecks(hr.outputConnection,ur)&&(ft.module$build$src$core$events$events.setGroup(En.group),ur===this.prevParentConnection_?(this.unplug(),ur.getSourceBlock().bumpNeighbours()):(hr.unplug(),hr.bumpNeighbours()),ft.module$build$src$core$events$events.setGroup(!1))}this.prevParentConnection_=ur}};ft.module$build$src$core$extensions.registerMixin("logic_ternary",Or),uo(zr.blocks);var Ar={};ft.module$build$src$core$utils$xml,ft.module$build$src$core$xml,ft.Align$$module$build$src$core$input,ft.module$build$src$core$connection_type.ConnectionType;var Br=ft.module$build$src$core$field_dropdown.FieldDropdown,fr=ft.module$build$src$core$msg.Msg;ft.Mutator$$module$build$src$core$mutator;var Yr=ft.module$build$src$core$common.createBlockDefinitionsFromJsonArray,wr=ft.module$build$src$core$common.defineBlocks;Ar.blocks=Yr([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),Ar.blocks.lists_create_with={init:function(){this.setHelpUrl(fr.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new ft.Mutator$$module$build$src$core$mutator(["lists_create_with_item"],this)),this.setTooltip(fr.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){const En=ft.module$build$src$core$utils$xml.createElement("mutation");return En.setAttribute("items",this.itemCount_),En},domToMutation:function(En){this.itemCount_=parseInt(En.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(En){this.itemCount_=En.itemCount,this.updateShape_()},decompose:function(En){const Dn=En.newBlock("lists_create_with_container");Dn.initSvg();let Zn=Dn.getInput("STACK").connection;for(let ur=0;ur<this.itemCount_;ur++){const Bn=En.newBlock("lists_create_with_item");Bn.initSvg(),Zn.connect(Bn.previousConnection),Zn=Bn.nextConnection}return Dn},compose:function(En){var Dn=En.getInputTargetBlock("STACK");for(En=[];Dn;)Dn.isInsertionMarker()||En.push(Dn.valueConnection_),Dn=Dn.getNextBlock();for(Dn=0;Dn<this.itemCount_;Dn++){const Zn=this.getInput("ADD"+Dn).connection.targetConnection;Zn&&En.indexOf(Zn)===-1&&Zn.disconnect()}for(this.itemCount_=En.length,this.updateShape_(),Dn=0;Dn<this.itemCount_;Dn++)ft.Mutator$$module$build$src$core$mutator.reconnect(En[Dn],this,"ADD"+Dn)},saveConnections:function(En){En=En.getInputTargetBlock("STACK");let Dn=0;for(;En;){if(En.isInsertionMarker()){En=En.getNextBlock();continue}const Zn=this.getInput("ADD"+Dn);En.valueConnection_=Zn&&Zn.connection.targetConnection,En=En.getNextBlock(),Dn++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(fr.LISTS_CREATE_EMPTY_TITLE);for(var En=0;En<this.itemCount_;En++)if(!this.getInput("ADD"+En)){const Dn=this.appendValueInput("ADD"+En).setAlign(ft.Align$$module$build$src$core$input.RIGHT);En===0&&Dn.appendField(fr.LISTS_CREATE_WITH_INPUT_WITH)}for(En=this.itemCount_;this.getInput("ADD"+En);En++)this.removeInput("ADD"+En)}},Ar.blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(fr.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(fr.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},Ar.blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(fr.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(fr.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},Ar.blocks.lists_indexOf={init:function(){const En=[[fr.LISTS_INDEX_OF_FIRST,"FIRST"],[fr.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(fr.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(fr.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new Br(En),"END"),this.setInputsInline(!0);const Dn=this;this.setTooltip(function(){return fr.LISTS_INDEX_OF_TOOLTIP.replace("%1",Dn.workspace.options.oneBasedIndex?"0":"-1")})}},Ar.blocks.lists_getIndex={init:function(){var En=[[fr.LISTS_GET_INDEX_GET,"GET"],[fr.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[fr.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[fr.LISTS_GET_INDEX_FROM_START,"FROM_START"],[fr.LISTS_GET_INDEX_FROM_END,"FROM_END"],[fr.LISTS_GET_INDEX_FIRST,"FIRST"],[fr.LISTS_GET_INDEX_LAST,"LAST"],[fr.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(fr.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),En=new Br(En,function(Zn){Zn=Zn==="REMOVE",this.getSourceBlock().updateStatement_(Zn)}),this.appendValueInput("VALUE").setCheck("Array").appendField(fr.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(En,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),fr.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(fr.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);const Dn=this;this.setTooltip(function(){const Zn=Dn.getFieldValue("MODE"),ur=Dn.getFieldValue("WHERE");let Bn="";switch(Zn+" "+ur){case"GET FROM_START":case"GET FROM_END":Bn=fr.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":Bn=fr.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":Bn=fr.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":Bn=fr.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":Bn=fr.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":Bn=fr.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":Bn=fr.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":Bn=fr.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":Bn=fr.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":Bn=fr.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":Bn=fr.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":Bn=fr.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return(ur==="FROM_START"||ur==="FROM_END")&&(Bn+="  "+(ur==="FROM_START"?fr.LISTS_INDEX_FROM_START_TOOLTIP:fr.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",Dn.workspace.options.oneBasedIndex?"#1":"#0")),Bn})},mutationToDom:function(){const En=ft.module$build$src$core$utils$xml.createElement("mutation");En.setAttribute("statement",!this.outputConnection);const Dn=this.getInput("AT").type===ft.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return En.setAttribute("at",Dn),En},domToMutation:function(En){const Dn=En.getAttribute("statement")==="true";this.updateStatement_(Dn),En=En.getAttribute("at")!=="false",this.updateAt_(En)},saveExtraState:function(){return this.outputConnection?null:{isStatement:!0}},loadExtraState:function(En){En.isStatement?this.updateStatement_(!0):typeof En=="string"&&this.domToMutation(ft.module$build$src$core$xml.textToDom(En))},updateStatement_:function(En){En!==!this.outputConnection&&(this.unplug(!0,!0),En?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(En){this.removeInput("AT"),this.removeInput("ORDINAL",!0),En?(this.appendValueInput("AT").setCheck("Number"),fr.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(fr.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const Dn=new Br(this.WHERE_OPTIONS,function(Zn){const ur=Zn==="FROM_START"||Zn==="FROM_END";if(ur!==En){const Bn=this.getSourceBlock();return Bn.updateAt_(ur),Bn.setFieldValue(Zn,"WHERE"),null}});this.getInput("AT").appendField(Dn,"WHERE"),fr.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},Ar.blocks.lists_setIndex={init:function(){const En=[[fr.LISTS_SET_INDEX_SET,"SET"],[fr.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[fr.LISTS_GET_INDEX_FROM_START,"FROM_START"],[fr.LISTS_GET_INDEX_FROM_END,"FROM_END"],[fr.LISTS_GET_INDEX_FIRST,"FIRST"],[fr.LISTS_GET_INDEX_LAST,"LAST"],[fr.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(fr.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(fr.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new Br(En),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(fr.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(fr.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);const Dn=this;this.setTooltip(function(){const Zn=Dn.getFieldValue("MODE"),ur=Dn.getFieldValue("WHERE");let Bn="";switch(Zn+" "+ur){case"SET FROM_START":case"SET FROM_END":Bn=fr.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":Bn=fr.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":Bn=fr.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":Bn=fr.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":Bn=fr.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":Bn=fr.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":Bn=fr.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":Bn=fr.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return(ur==="FROM_START"||ur==="FROM_END")&&(Bn+="  "+fr.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",Dn.workspace.options.oneBasedIndex?"#1":"#0")),Bn})},mutationToDom:function(){const En=ft.module$build$src$core$utils$xml.createElement("mutation"),Dn=this.getInput("AT").type===ft.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return En.setAttribute("at",Dn),En},domToMutation:function(En){En=En.getAttribute("at")!=="false",this.updateAt_(En)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(En){this.removeInput("AT"),this.removeInput("ORDINAL",!0),En?(this.appendValueInput("AT").setCheck("Number"),fr.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(fr.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const Dn=new Br(this.WHERE_OPTIONS,function(Zn){const ur=Zn==="FROM_START"||Zn==="FROM_END";if(ur!==En){const Bn=this.getSourceBlock();return Bn.updateAt_(ur),Bn.setFieldValue(Zn,"WHERE"),null}});this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(Dn,"WHERE")}},Ar.blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[fr.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[fr.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[fr.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[fr.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[fr.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[fr.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(fr.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(fr.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),fr.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(fr.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(fr.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){const En=ft.module$build$src$core$utils$xml.createElement("mutation");var Dn=this.getInput("AT1").type===ft.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return En.setAttribute("at1",Dn),Dn=this.getInput("AT2").type===ft.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE,En.setAttribute("at2",Dn),En},domToMutation:function(En){const Dn=En.getAttribute("at1")==="true";En=En.getAttribute("at2")==="true",this.updateAt_(1,Dn),this.updateAt_(2,En)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(En,Dn){this.removeInput("AT"+En),this.removeInput("ORDINAL"+En,!0),Dn?(this.appendValueInput("AT"+En).setCheck("Number"),fr.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+En).appendField(fr.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+En);const Zn=new Br(this["WHERE_OPTIONS_"+En],function(ur){const Bn=ur==="FROM_START"||ur==="FROM_END";if(Bn!==Dn){const hr=this.getSourceBlock();return hr.updateAt_(En,Bn),hr.setFieldValue(ur,"WHERE"+En),null}});this.getInput("AT"+En).appendField(Zn,"WHERE"+En),En===1&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),fr.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},Ar.blocks.lists_sort={init:function(){this.jsonInit({message0:"%{BKY_LISTS_SORT_TITLE}",args0:[{type:"field_dropdown",name:"TYPE",options:[["%{BKY_LISTS_SORT_TYPE_NUMERIC}","NUMERIC"],["%{BKY_LISTS_SORT_TYPE_TEXT}","TEXT"],["%{BKY_LISTS_SORT_TYPE_IGNORECASE}","IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[["%{BKY_LISTS_SORT_ORDER_ASCENDING}","1"],["%{BKY_LISTS_SORT_ORDER_DESCENDING}","-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_SORT_TOOLTIP}",helpUrl:"%{BKY_LISTS_SORT_HELPURL}"})}},Ar.blocks.lists_split={init:function(){const En=this,Dn=new Br([[fr.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[fr.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],function(Zn){En.updateType_(Zn)});this.setHelpUrl(fr.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(Dn,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(fr.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(function(){const Zn=En.getFieldValue("MODE");if(Zn==="SPLIT")return fr.LISTS_SPLIT_TOOLTIP_SPLIT;if(Zn==="JOIN")return fr.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+Zn)})},updateType_:function(En){if(this.getFieldValue("MODE")!==En){const Dn=this.getInput("INPUT").connection;Dn.setShadowDom(null);const Zn=Dn.targetBlock();Zn&&(Dn.disconnect(),Zn.isShadow()?Zn.dispose():this.bumpNeighbours())}En==="SPLIT"?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){const En=ft.module$build$src$core$utils$xml.createElement("mutation");return En.setAttribute("mode",this.getFieldValue("MODE")),En},domToMutation:function(En){this.updateType_(En.getAttribute("mode"))},saveExtraState:function(){return null},loadExtraState:function(){}},wr(Ar.blocks);var ao={},Kn=ft.module$build$src$core$common.createBlockDefinitionsFromJsonArray,Sr=ft.module$build$src$core$common.defineBlocks;ao.blocks=Kn([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),Sr(ao.blocks);var Dr={};return Dr.colour=ao,Dr.lists=Ar,Dr.logic=zr,Dr.loops=Gr,Dr.math=Vn,Dr.procedures=Yn,Dr.texts=pn,Dr.variables=Bt,Dr.variablesDynamic=St,Dr.blocks=Object.assign({},ao.blocks,Ar.blocks,zr.blocks,Gr.blocks,Vn.blocks,Yn.blocks,Bt.blocks,St.blocks),Dr.__namespace__=ft,Dr})}(blocks_compressed)),blocks_compressed.exports}var hasRequiredBlocks;function requireBlocks(){return hasRequiredBlocks||(hasRequiredBlocks=1,function(dt,$){(function(lt,ft){dt.exports=ft(requireBlocks_compressed())})(commonjsGlobal,function(lt){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return lt})}(blocks)),blocks.exports}var javascript$1={exports:{}},javascript_compressed={exports:{}},hasRequiredJavascript_compressed;function requireJavascript_compressed(){return hasRequiredJavascript_compressed||(hasRequiredJavascript_compressed=1,function(dt,$){(function(lt,ft){dt.exports=ft(requireBlockly_compressed())})(commonjsGlobal,function(lt){var ft=lt.__namespace__,St={};ft.module$build$src$core$variables,ft.module$build$src$core$utils$string,ft.CodeGenerator$$module$build$src$core$generator,ft.module$build$src$core$input_types.inputTypes,ft.module$build$src$core$names.Names,ft.NameType$$module$build$src$core$names,St.javascriptGenerator=new ft.CodeGenerator$$module$build$src$core$generator("JavaScript"),St.javascriptGenerator.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(globalThis).join(",")),St.javascriptGenerator.ORDER_ATOMIC=0,St.javascriptGenerator.ORDER_NEW=1.1,St.javascriptGenerator.ORDER_MEMBER=1.2,St.javascriptGenerator.ORDER_FUNCTION_CALL=2,St.javascriptGenerator.ORDER_INCREMENT=3,St.javascriptGenerator.ORDER_DECREMENT=3,St.javascriptGenerator.ORDER_BITWISE_NOT=4.1,St.javascriptGenerator.ORDER_UNARY_PLUS=4.2,St.javascriptGenerator.ORDER_UNARY_NEGATION=4.3,St.javascriptGenerator.ORDER_LOGICAL_NOT=4.4,St.javascriptGenerator.ORDER_TYPEOF=4.5,St.javascriptGenerator.ORDER_VOID=4.6,St.javascriptGenerator.ORDER_DELETE=4.7,St.javascriptGenerator.ORDER_AWAIT=4.8,St.javascriptGenerator.ORDER_EXPONENTIATION=5,St.javascriptGenerator.ORDER_MULTIPLICATION=5.1,St.javascriptGenerator.ORDER_DIVISION=5.2,St.javascriptGenerator.ORDER_MODULUS=5.3,St.javascriptGenerator.ORDER_SUBTRACTION=6.1,St.javascriptGenerator.ORDER_ADDITION=6.2,St.javascriptGenerator.ORDER_BITWISE_SHIFT=7,St.javascriptGenerator.ORDER_RELATIONAL=8,St.javascriptGenerator.ORDER_IN=8,St.javascriptGenerator.ORDER_INSTANCEOF=8,St.javascriptGenerator.ORDER_EQUALITY=9,St.javascriptGenerator.ORDER_BITWISE_AND=10,St.javascriptGenerator.ORDER_BITWISE_XOR=11,St.javascriptGenerator.ORDER_BITWISE_OR=12,St.javascriptGenerator.ORDER_LOGICAL_AND=13,St.javascriptGenerator.ORDER_LOGICAL_OR=14,St.javascriptGenerator.ORDER_CONDITIONAL=15,St.javascriptGenerator.ORDER_ASSIGNMENT=16,St.javascriptGenerator.ORDER_YIELD=17,St.javascriptGenerator.ORDER_COMMA=18,St.javascriptGenerator.ORDER_NONE=99,St.javascriptGenerator.ORDER_OVERRIDES=[[St.javascriptGenerator.ORDER_FUNCTION_CALL,St.javascriptGenerator.ORDER_MEMBER],[St.javascriptGenerator.ORDER_FUNCTION_CALL,St.javascriptGenerator.ORDER_FUNCTION_CALL],[St.javascriptGenerator.ORDER_MEMBER,St.javascriptGenerator.ORDER_MEMBER],[St.javascriptGenerator.ORDER_MEMBER,St.javascriptGenerator.ORDER_FUNCTION_CALL],[St.javascriptGenerator.ORDER_LOGICAL_NOT,St.javascriptGenerator.ORDER_LOGICAL_NOT],[St.javascriptGenerator.ORDER_MULTIPLICATION,St.javascriptGenerator.ORDER_MULTIPLICATION],[St.javascriptGenerator.ORDER_ADDITION,St.javascriptGenerator.ORDER_ADDITION],[St.javascriptGenerator.ORDER_LOGICAL_AND,St.javascriptGenerator.ORDER_LOGICAL_AND],[St.javascriptGenerator.ORDER_LOGICAL_OR,St.javascriptGenerator.ORDER_LOGICAL_OR]],St.javascriptGenerator.isInitialized=!1,St.javascriptGenerator.init=function(kt){Object.getPrototypeOf(this).init.call(this),this.nameDB_?this.nameDB_.reset():this.nameDB_=new ft.module$build$src$core$names.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(kt.getVariableMap()),this.nameDB_.populateVariables(kt),this.nameDB_.populateProcedures(kt);const Nt=[];var Bt=ft.module$build$src$core$variables.allDeveloperVariables(kt);for(let Ut=0;Ut<Bt.length;Ut++)Nt.push(this.nameDB_.getName(Bt[Ut],ft.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));for(kt=ft.module$build$src$core$variables.allUsedVarModels(kt),Bt=0;Bt<kt.length;Bt++)Nt.push(this.nameDB_.getName(kt[Bt].getId(),ft.NameType$$module$build$src$core$names.VARIABLE));Nt.length&&(this.definitions_.variables="var "+Nt.join(", ")+";"),this.isInitialized=!0},St.javascriptGenerator.finish=function(kt){const Nt=Object.values(this.definitions_);return kt=Object.getPrototypeOf(this).finish.call(this,kt),this.isInitialized=!1,this.nameDB_.reset(),Nt.join(`

`)+`


`+kt},St.javascriptGenerator.scrubNakedValue=function(kt){return kt+`;
`},St.javascriptGenerator.quote_=function(kt){return kt=kt.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`).replace(/'/g,"\\'"),"'"+kt+"'"},St.javascriptGenerator.multiline_quote_=function(kt){return kt.split(/\n/g).map(this.quote_).join(` + '\\n' +
`)},St.javascriptGenerator.scrub_=function(kt,Nt,Bt){let Ut="";if(!kt.outputConnection||!kt.outputConnection.targetConnection){var zt=kt.getCommentText();zt&&(zt=ft.module$build$src$core$utils$string.wrap(zt,this.COMMENT_WRAP-3),Ut+=this.prefixLines(zt+`
`,"// "));for(let Zt=0;Zt<kt.inputList.length;Zt++)kt.inputList[Zt].type===ft.module$build$src$core$input_types.inputTypes.VALUE&&(zt=kt.inputList[Zt].connection.targetBlock())&&(zt=this.allNestedComments(zt))&&(Ut+=this.prefixLines(zt,"// "))}return kt=kt.nextConnection&&kt.nextConnection.targetBlock(),Bt=Bt?"":this.blockToCode(kt),Ut+Nt+Bt},St.javascriptGenerator.getAdjusted=function(kt,Nt,Bt,Ut,zt){Bt=Bt||0,zt=zt||this.ORDER_NONE,kt.workspace.options.oneBasedIndex&&Bt--;const Zt=kt.workspace.options.oneBasedIndex?"1":"0";let ln,cn=zt;return 0<Bt?ln=cn=this.ORDER_ADDITION:0>Bt?ln=cn=this.ORDER_SUBTRACTION:Ut&&(ln=cn=this.ORDER_UNARY_NEGATION),kt=this.valueToCode(kt,Nt,cn)||Zt,ft.module$build$src$core$utils$string.isNumber(kt)?(kt=Number(kt)+Bt,Ut&&(kt=-kt)):(0<Bt?kt=kt+" + "+Bt:0>Bt&&(kt=kt+" - "+-Bt),Ut&&(kt=Bt?"-("+kt+")":"-"+kt),ln=Math.floor(ln),zt=Math.floor(zt),ln&&zt>=ln&&(kt="("+kt+")")),kt},ft.NameType$$module$build$src$core$names,St.javascriptGenerator.variables_get=function(kt){return[St.javascriptGenerator.nameDB_.getName(kt.getFieldValue("VAR"),ft.NameType$$module$build$src$core$names.VARIABLE),St.javascriptGenerator.ORDER_ATOMIC]},St.javascriptGenerator.variables_set=function(kt){const Nt=St.javascriptGenerator.valueToCode(kt,"VALUE",St.javascriptGenerator.ORDER_ASSIGNMENT)||"0";return St.javascriptGenerator.nameDB_.getName(kt.getFieldValue("VAR"),ft.NameType$$module$build$src$core$names.VARIABLE)+" = "+Nt+`;
`},St.javascriptGenerator.variables_get_dynamic=St.javascriptGenerator.variables_get,St.javascriptGenerator.variables_set_dynamic=St.javascriptGenerator.variables_set,ft.NameType$$module$build$src$core$names;var Tt=/^\s*'([^']|\\')*'\s*$/,Ct=function(kt){return Tt.test(kt)?[kt,St.javascriptGenerator.ORDER_ATOMIC]:["String("+kt+")",St.javascriptGenerator.ORDER_FUNCTION_CALL]},At=function(kt,Nt,Bt){return Nt==="FIRST"?"0":Nt==="FROM_END"?kt+".length - 1 - "+Bt:Nt==="LAST"?kt+".length - 1":Bt};St.javascriptGenerator.text=function(kt){return[St.javascriptGenerator.quote_(kt.getFieldValue("TEXT")),St.javascriptGenerator.ORDER_ATOMIC]},St.javascriptGenerator.text_multiline=function(kt){kt=St.javascriptGenerator.multiline_quote_(kt.getFieldValue("TEXT"));const Nt=kt.indexOf("+")!==-1?St.javascriptGenerator.ORDER_ADDITION:St.javascriptGenerator.ORDER_ATOMIC;return[kt,Nt]},St.javascriptGenerator.text_join=function(kt){switch(kt.itemCount_){case 0:return["''",St.javascriptGenerator.ORDER_ATOMIC];case 1:return kt=St.javascriptGenerator.valueToCode(kt,"ADD0",St.javascriptGenerator.ORDER_NONE)||"''",Ct(kt);case 2:var Nt=St.javascriptGenerator.valueToCode(kt,"ADD0",St.javascriptGenerator.ORDER_NONE)||"''";return kt=St.javascriptGenerator.valueToCode(kt,"ADD1",St.javascriptGenerator.ORDER_NONE)||"''",[Ct(Nt)[0]+" + "+Ct(kt)[0],St.javascriptGenerator.ORDER_ADDITION];default:Nt=Array(kt.itemCount_);for(let Bt=0;Bt<kt.itemCount_;Bt++)Nt[Bt]=St.javascriptGenerator.valueToCode(kt,"ADD"+Bt,St.javascriptGenerator.ORDER_NONE)||"''";return["["+Nt.join(",")+"].join('')",St.javascriptGenerator.ORDER_FUNCTION_CALL]}},St.javascriptGenerator.text_append=function(kt){const Nt=St.javascriptGenerator.nameDB_.getName(kt.getFieldValue("VAR"),ft.NameType$$module$build$src$core$names.VARIABLE);return kt=St.javascriptGenerator.valueToCode(kt,"TEXT",St.javascriptGenerator.ORDER_NONE)||"''",Nt+" += "+Ct(kt)[0]+`;
`},St.javascriptGenerator.text_length=function(kt){return[(St.javascriptGenerator.valueToCode(kt,"VALUE",St.javascriptGenerator.ORDER_MEMBER)||"''")+".length",St.javascriptGenerator.ORDER_MEMBER]},St.javascriptGenerator.text_isEmpty=function(kt){return["!"+(St.javascriptGenerator.valueToCode(kt,"VALUE",St.javascriptGenerator.ORDER_MEMBER)||"''")+".length",St.javascriptGenerator.ORDER_LOGICAL_NOT]},St.javascriptGenerator.text_indexOf=function(kt){var Nt=kt.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf";const Bt=St.javascriptGenerator.valueToCode(kt,"FIND",St.javascriptGenerator.ORDER_NONE)||"''";return Nt=(St.javascriptGenerator.valueToCode(kt,"VALUE",St.javascriptGenerator.ORDER_MEMBER)||"''")+"."+Nt+"("+Bt+")",kt.workspace.options.oneBasedIndex?[Nt+" + 1",St.javascriptGenerator.ORDER_ADDITION]:[Nt,St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.text_charAt=function(kt){const Nt=kt.getFieldValue("WHERE")||"FROM_START",Bt=St.javascriptGenerator.valueToCode(kt,"VALUE",Nt==="RANDOM"?St.javascriptGenerator.ORDER_NONE:St.javascriptGenerator.ORDER_MEMBER)||"''";switch(Nt){case"FIRST":return[Bt+".charAt(0)",St.javascriptGenerator.ORDER_FUNCTION_CALL];case"LAST":return[Bt+".slice(-1)",St.javascriptGenerator.ORDER_FUNCTION_CALL];case"FROM_START":return kt=St.javascriptGenerator.getAdjusted(kt,"AT"),[Bt+".charAt("+kt+")",St.javascriptGenerator.ORDER_FUNCTION_CALL];case"FROM_END":return kt=St.javascriptGenerator.getAdjusted(kt,"AT",1,!0),[Bt+".slice("+kt+").charAt(0)",St.javascriptGenerator.ORDER_FUNCTION_CALL];case"RANDOM":return[St.javascriptGenerator.provideFunction_("textRandomLetter",`
function ${St.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(text) {
  var x = Math.floor(Math.random() * text.length);
  return text[x];
}
`)+"("+Bt+")",St.javascriptGenerator.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},St.javascriptGenerator.text_getSubstring=function(kt){var Nt=kt.getFieldValue("WHERE1"),Bt=kt.getFieldValue("WHERE2"),Ut=Nt!=="FROM_END"&&Nt!=="LAST"&&Bt!=="FROM_END"&&Bt!=="LAST",zt=St.javascriptGenerator.valueToCode(kt,"STRING",Ut?St.javascriptGenerator.ORDER_MEMBER:St.javascriptGenerator.ORDER_NONE)||"''";if(Nt==="FIRST"&&Bt==="LAST")return[zt,St.javascriptGenerator.ORDER_NONE];if(zt.match(/^'?\w+'?$/)||Ut){switch(Nt){case"FROM_START":Nt=St.javascriptGenerator.getAdjusted(kt,"AT1");break;case"FROM_END":Nt=St.javascriptGenerator.getAdjusted(kt,"AT1",1,!1,St.javascriptGenerator.ORDER_SUBTRACTION),Nt=zt+".length - "+Nt;break;case"FIRST":Nt="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(Bt){case"FROM_START":Bt=St.javascriptGenerator.getAdjusted(kt,"AT2",1);break;case"FROM_END":Bt=St.javascriptGenerator.getAdjusted(kt,"AT2",0,!1,St.javascriptGenerator.ORDER_SUBTRACTION),Bt=zt+".length - "+Bt;break;case"LAST":Bt=zt+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}zt=zt+".slice("+Nt+", "+Bt+")"}else{Ut=St.javascriptGenerator.getAdjusted(kt,"AT1"),kt=St.javascriptGenerator.getAdjusted(kt,"AT2");const Zt={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};zt=St.javascriptGenerator.provideFunction_("subsequence"+Zt[Nt]+Zt[Bt],`
function ${St.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(sequence${Nt==="FROM_END"||Nt==="FROM_START"?", at1":""}${Bt==="FROM_END"||Bt==="FROM_START"?", at2":""}) {
  var start = ${At("sequence",Nt,"at1")};
  var end = ${At("sequence",Bt,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+zt+(Nt==="FROM_END"||Nt==="FROM_START"?", "+Ut:"")+(Bt==="FROM_END"||Bt==="FROM_START"?", "+kt:"")+")"}return[zt,St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.text_changeCase=function(kt){const Nt={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[kt.getFieldValue("CASE")];return kt=St.javascriptGenerator.valueToCode(kt,"TEXT",Nt?St.javascriptGenerator.ORDER_MEMBER:St.javascriptGenerator.ORDER_NONE)||"''",[Nt?kt+Nt:St.javascriptGenerator.provideFunction_("textToTitleCase",`
function ${St.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(str) {
  return str.replace(/\\S+/g,
      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});
}
`)+"("+kt+")",St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.text_trim=function(kt){const Nt={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[kt.getFieldValue("MODE")];return[(St.javascriptGenerator.valueToCode(kt,"TEXT",St.javascriptGenerator.ORDER_MEMBER)||"''")+Nt,St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.text_print=function(kt){return"window.alert("+(St.javascriptGenerator.valueToCode(kt,"TEXT",St.javascriptGenerator.ORDER_NONE)||"''")+`);
`},St.javascriptGenerator.text_prompt_ext=function(kt){let Nt="window.prompt("+(kt.getField("TEXT")?St.javascriptGenerator.quote_(kt.getFieldValue("TEXT")):St.javascriptGenerator.valueToCode(kt,"TEXT",St.javascriptGenerator.ORDER_NONE)||"''")+")";return kt.getFieldValue("TYPE")==="NUMBER"&&(Nt="Number("+Nt+")"),[Nt,St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.text_prompt=St.javascriptGenerator.text_prompt_ext,St.javascriptGenerator.text_count=function(kt){const Nt=St.javascriptGenerator.valueToCode(kt,"TEXT",St.javascriptGenerator.ORDER_NONE)||"''";return kt=St.javascriptGenerator.valueToCode(kt,"SUB",St.javascriptGenerator.ORDER_NONE)||"''",[St.javascriptGenerator.provideFunction_("textCount",`
function ${St.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle) {
  if (needle.length === 0) {
    return haystack.length + 1;
  } else {
    return haystack.split(needle).length - 1;
  }
}
`)+"("+Nt+", "+kt+")",St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.text_replace=function(kt){const Nt=St.javascriptGenerator.valueToCode(kt,"TEXT",St.javascriptGenerator.ORDER_NONE)||"''",Bt=St.javascriptGenerator.valueToCode(kt,"FROM",St.javascriptGenerator.ORDER_NONE)||"''";return kt=St.javascriptGenerator.valueToCode(kt,"TO",St.javascriptGenerator.ORDER_NONE)||"''",[St.javascriptGenerator.provideFunction_("textReplace",`
function ${St.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle, replacement) {
  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g, '\\\\$1')
                 .replace(/\\x08/g, '\\\\x08');
  return haystack.replace(new RegExp(needle, 'g'), replacement);
}
`)+"("+Nt+", "+Bt+", "+kt+")",St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.text_reverse=function(kt){return[(St.javascriptGenerator.valueToCode(kt,"TEXT",St.javascriptGenerator.ORDER_MEMBER)||"''")+".split('').reverse().join('')",St.javascriptGenerator.ORDER_FUNCTION_CALL]},ft.NameType$$module$build$src$core$names,St.javascriptGenerator.procedures_defreturn=function(kt){const Nt=St.javascriptGenerator.nameDB_.getName(kt.getFieldValue("NAME"),ft.NameType$$module$build$src$core$names.PROCEDURE);var Bt="";St.javascriptGenerator.STATEMENT_PREFIX&&(Bt+=St.javascriptGenerator.injectId(St.javascriptGenerator.STATEMENT_PREFIX,kt)),St.javascriptGenerator.STATEMENT_SUFFIX&&(Bt+=St.javascriptGenerator.injectId(St.javascriptGenerator.STATEMENT_SUFFIX,kt)),Bt&&(Bt=St.javascriptGenerator.prefixLines(Bt,St.javascriptGenerator.INDENT));let Ut="";St.javascriptGenerator.INFINITE_LOOP_TRAP&&(Ut=St.javascriptGenerator.prefixLines(St.javascriptGenerator.injectId(St.javascriptGenerator.INFINITE_LOOP_TRAP,kt),St.javascriptGenerator.INDENT));const zt=St.javascriptGenerator.statementToCode(kt,"STACK");let Zt=St.javascriptGenerator.valueToCode(kt,"RETURN",St.javascriptGenerator.ORDER_NONE)||"",ln="";zt&&Zt&&(ln=Bt),Zt&&(Zt=St.javascriptGenerator.INDENT+"return "+Zt+`;
`);const cn=[],hn=kt.getVars();for(let pn=0;pn<hn.length;pn++)cn[pn]=St.javascriptGenerator.nameDB_.getName(hn[pn],ft.NameType$$module$build$src$core$names.VARIABLE);return Bt="function "+Nt+"("+cn.join(", ")+`) {
`+Bt+Ut+zt+ln+Zt+"}",Bt=St.javascriptGenerator.scrub_(kt,Bt),St.javascriptGenerator.definitions_["%"+Nt]=Bt,null},St.javascriptGenerator.procedures_defnoreturn=St.javascriptGenerator.procedures_defreturn,St.javascriptGenerator.procedures_callreturn=function(kt){const Nt=St.javascriptGenerator.nameDB_.getName(kt.getFieldValue("NAME"),ft.NameType$$module$build$src$core$names.PROCEDURE),Bt=[],Ut=kt.getVars();for(let zt=0;zt<Ut.length;zt++)Bt[zt]=St.javascriptGenerator.valueToCode(kt,"ARG"+zt,St.javascriptGenerator.ORDER_NONE)||"null";return[Nt+"("+Bt.join(", ")+")",St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.procedures_callnoreturn=function(kt){return St.javascriptGenerator.procedures_callreturn(kt)[0]+`;
`},St.javascriptGenerator.procedures_ifreturn=function(kt){let Nt="if ("+(St.javascriptGenerator.valueToCode(kt,"CONDITION",St.javascriptGenerator.ORDER_NONE)||"false")+`) {
`;return St.javascriptGenerator.STATEMENT_SUFFIX&&(Nt+=St.javascriptGenerator.prefixLines(St.javascriptGenerator.injectId(St.javascriptGenerator.STATEMENT_SUFFIX,kt),St.javascriptGenerator.INDENT)),kt.hasReturnValue_?(kt=St.javascriptGenerator.valueToCode(kt,"VALUE",St.javascriptGenerator.ORDER_NONE)||"null",Nt+=St.javascriptGenerator.INDENT+"return "+kt+`;
`):Nt+=St.javascriptGenerator.INDENT+`return;
`,Nt+`}
`},ft.NameType$$module$build$src$core$names,St.javascriptGenerator.math_number=function(kt){return kt=Number(kt.getFieldValue("NUM")),[kt,0<=kt?St.javascriptGenerator.ORDER_ATOMIC:St.javascriptGenerator.ORDER_UNARY_NEGATION]},St.javascriptGenerator.math_arithmetic=function(kt){var Nt={ADD:[" + ",St.javascriptGenerator.ORDER_ADDITION],MINUS:[" - ",St.javascriptGenerator.ORDER_SUBTRACTION],MULTIPLY:[" * ",St.javascriptGenerator.ORDER_MULTIPLICATION],DIVIDE:[" / ",St.javascriptGenerator.ORDER_DIVISION],POWER:[null,St.javascriptGenerator.ORDER_NONE]}[kt.getFieldValue("OP")];const Bt=Nt[0];Nt=Nt[1];const Ut=St.javascriptGenerator.valueToCode(kt,"A",Nt)||"0";return kt=St.javascriptGenerator.valueToCode(kt,"B",Nt)||"0",Bt?[Ut+Bt+kt,Nt]:["Math.pow("+Ut+", "+kt+")",St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.math_single=function(kt){const Nt=kt.getFieldValue("OP");let Bt;if(Nt==="NEG")return kt=St.javascriptGenerator.valueToCode(kt,"NUM",St.javascriptGenerator.ORDER_UNARY_NEGATION)||"0",kt[0]==="-"&&(kt=" "+kt),["-"+kt,St.javascriptGenerator.ORDER_UNARY_NEGATION];switch(kt=Nt==="SIN"||Nt==="COS"||Nt==="TAN"?St.javascriptGenerator.valueToCode(kt,"NUM",St.javascriptGenerator.ORDER_DIVISION)||"0":St.javascriptGenerator.valueToCode(kt,"NUM",St.javascriptGenerator.ORDER_NONE)||"0",Nt){case"ABS":Bt="Math.abs("+kt+")";break;case"ROOT":Bt="Math.sqrt("+kt+")";break;case"LN":Bt="Math.log("+kt+")";break;case"EXP":Bt="Math.exp("+kt+")";break;case"POW10":Bt="Math.pow(10,"+kt+")";break;case"ROUND":Bt="Math.round("+kt+")";break;case"ROUNDUP":Bt="Math.ceil("+kt+")";break;case"ROUNDDOWN":Bt="Math.floor("+kt+")";break;case"SIN":Bt="Math.sin("+kt+" / 180 * Math.PI)";break;case"COS":Bt="Math.cos("+kt+" / 180 * Math.PI)";break;case"TAN":Bt="Math.tan("+kt+" / 180 * Math.PI)"}if(Bt)return[Bt,St.javascriptGenerator.ORDER_FUNCTION_CALL];switch(Nt){case"LOG10":Bt="Math.log("+kt+") / Math.log(10)";break;case"ASIN":Bt="Math.asin("+kt+") / Math.PI * 180";break;case"ACOS":Bt="Math.acos("+kt+") / Math.PI * 180";break;case"ATAN":Bt="Math.atan("+kt+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+Nt)}return[Bt,St.javascriptGenerator.ORDER_DIVISION]},St.javascriptGenerator.math_constant=function(kt){return{PI:["Math.PI",St.javascriptGenerator.ORDER_MEMBER],E:["Math.E",St.javascriptGenerator.ORDER_MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",St.javascriptGenerator.ORDER_DIVISION],SQRT2:["Math.SQRT2",St.javascriptGenerator.ORDER_MEMBER],SQRT1_2:["Math.SQRT1_2",St.javascriptGenerator.ORDER_MEMBER],INFINITY:["Infinity",St.javascriptGenerator.ORDER_ATOMIC]}[kt.getFieldValue("CONSTANT")]},St.javascriptGenerator.math_number_property=function(kt){var Nt={EVEN:[" % 2 === 0",St.javascriptGenerator.ORDER_MODULUS,St.javascriptGenerator.ORDER_EQUALITY],ODD:[" % 2 === 1",St.javascriptGenerator.ORDER_MODULUS,St.javascriptGenerator.ORDER_EQUALITY],WHOLE:[" % 1 === 0",St.javascriptGenerator.ORDER_MODULUS,St.javascriptGenerator.ORDER_EQUALITY],POSITIVE:[" > 0",St.javascriptGenerator.ORDER_RELATIONAL,St.javascriptGenerator.ORDER_RELATIONAL],NEGATIVE:[" < 0",St.javascriptGenerator.ORDER_RELATIONAL,St.javascriptGenerator.ORDER_RELATIONAL],DIVISIBLE_BY:[null,St.javascriptGenerator.ORDER_MODULUS,St.javascriptGenerator.ORDER_EQUALITY],PRIME:[null,St.javascriptGenerator.ORDER_NONE,St.javascriptGenerator.ORDER_FUNCTION_CALL]};const Bt=kt.getFieldValue("PROPERTY"),[Ut,zt,Zt]=Nt[Bt];return Nt=St.javascriptGenerator.valueToCode(kt,"NUMBER_TO_CHECK",zt)||"0",Bt==="PRIME"?kt=St.javascriptGenerator.provideFunction_("mathIsPrime",`
function ${St.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(n) {
  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  if (n == 2 || n == 3) {
    return true;
  }
  // False if n is NaN, negative, is 1, or not whole.
  // And false if n is divisible by 2 or 3.
  if (isNaN(n) || n <= 1 || n % 1 !== 0 || n % 2 === 0 || n % 3 === 0) {
    return false;
  }
  // Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {
    if (n % (x - 1) === 0 || n % (x + 1) === 0) {
      return false;
    }
  }
  return true;
}
`)+"("+Nt+")":Bt==="DIVISIBLE_BY"?(kt=St.javascriptGenerator.valueToCode(kt,"DIVISOR",St.javascriptGenerator.ORDER_MODULUS)||"0",kt=Nt+" % "+kt+" === 0"):kt=Nt+Ut,[kt,Zt]},St.javascriptGenerator.math_change=function(kt){const Nt=St.javascriptGenerator.valueToCode(kt,"DELTA",St.javascriptGenerator.ORDER_ADDITION)||"0";return kt=St.javascriptGenerator.nameDB_.getName(kt.getFieldValue("VAR"),ft.NameType$$module$build$src$core$names.VARIABLE),kt+" = (typeof "+kt+" === 'number' ? "+kt+" : 0) + "+Nt+`;
`},St.javascriptGenerator.math_round=St.javascriptGenerator.math_single,St.javascriptGenerator.math_trig=St.javascriptGenerator.math_single,St.javascriptGenerator.math_on_list=function(kt){var Nt=kt.getFieldValue("OP");switch(Nt){case"SUM":kt=St.javascriptGenerator.valueToCode(kt,"LIST",St.javascriptGenerator.ORDER_MEMBER)||"[]",kt+=".reduce(function(x, y) {return x + y;}, 0)";break;case"MIN":kt=St.javascriptGenerator.valueToCode(kt,"LIST",St.javascriptGenerator.ORDER_NONE)||"[]",kt="Math.min.apply(null, "+kt+")";break;case"MAX":kt=St.javascriptGenerator.valueToCode(kt,"LIST",St.javascriptGenerator.ORDER_NONE)||"[]",kt="Math.max.apply(null, "+kt+")";break;case"AVERAGE":Nt=St.javascriptGenerator.provideFunction_("mathMean",`
function ${St.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  return myList.reduce(function(x, y) {return x + y;}, 0) / myList.length;
}
`),kt=St.javascriptGenerator.valueToCode(kt,"LIST",St.javascriptGenerator.ORDER_NONE)||"[]",kt=Nt+"("+kt+")";break;case"MEDIAN":Nt=St.javascriptGenerator.provideFunction_("mathMedian",`
function ${St.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  var localList = myList.filter(function (x) {return typeof x === 'number';});
  if (!localList.length) return null;
  localList.sort(function(a, b) {return b - a;});
  if (localList.length % 2 === 0) {
    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;
  } else {
    return localList[(localList.length - 1) / 2];
  }
}
`),kt=St.javascriptGenerator.valueToCode(kt,"LIST",St.javascriptGenerator.ORDER_NONE)||"[]",kt=Nt+"("+kt+")";break;case"MODE":Nt=St.javascriptGenerator.provideFunction_("mathModes",`
function ${St.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(values) {
  var modes = [];
  var counts = [];
  var maxCount = 0;
  for (var i = 0; i < values.length; i++) {
    var value = values[i];
    var found = false;
    var thisCount;
    for (var j = 0; j < counts.length; j++) {
      if (counts[j][0] === value) {
        thisCount = ++counts[j][1];
        found = true;
        break;
      }
    }
    if (!found) {
      counts.push([value, 1]);
      thisCount = 1;
    }
    maxCount = Math.max(thisCount, maxCount);
  }
  for (var j = 0; j < counts.length; j++) {
    if (counts[j][1] === maxCount) {
        modes.push(counts[j][0]);
    }
  }
  return modes;
}
`),kt=St.javascriptGenerator.valueToCode(kt,"LIST",St.javascriptGenerator.ORDER_NONE)||"[]",kt=Nt+"("+kt+")";break;case"STD_DEV":Nt=St.javascriptGenerator.provideFunction_("mathStandardDeviation",`
function ${St.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(numbers) {
  var n = numbers.length;
  if (!n) return null;
  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;
  var variance = 0;
  for (var j = 0; j < n; j++) {
    variance += Math.pow(numbers[j] - mean, 2);
  }
  variance = variance / n;
  return Math.sqrt(variance);
}
`),kt=St.javascriptGenerator.valueToCode(kt,"LIST",St.javascriptGenerator.ORDER_NONE)||"[]",kt=Nt+"("+kt+")";break;case"RANDOM":Nt=St.javascriptGenerator.provideFunction_("mathRandomList",`
function ${St.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(list) {
  var x = Math.floor(Math.random() * list.length);
  return list[x];
}
`),kt=St.javascriptGenerator.valueToCode(kt,"LIST",St.javascriptGenerator.ORDER_NONE)||"[]",kt=Nt+"("+kt+")";break;default:throw Error("Unknown operator: "+Nt)}return[kt,St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.math_modulo=function(kt){const Nt=St.javascriptGenerator.valueToCode(kt,"DIVIDEND",St.javascriptGenerator.ORDER_MODULUS)||"0";return kt=St.javascriptGenerator.valueToCode(kt,"DIVISOR",St.javascriptGenerator.ORDER_MODULUS)||"0",[Nt+" % "+kt,St.javascriptGenerator.ORDER_MODULUS]},St.javascriptGenerator.math_constrain=function(kt){const Nt=St.javascriptGenerator.valueToCode(kt,"VALUE",St.javascriptGenerator.ORDER_NONE)||"0",Bt=St.javascriptGenerator.valueToCode(kt,"LOW",St.javascriptGenerator.ORDER_NONE)||"0";return kt=St.javascriptGenerator.valueToCode(kt,"HIGH",St.javascriptGenerator.ORDER_NONE)||"Infinity",["Math.min(Math.max("+Nt+", "+Bt+"), "+kt+")",St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.math_random_int=function(kt){const Nt=St.javascriptGenerator.valueToCode(kt,"FROM",St.javascriptGenerator.ORDER_NONE)||"0";return kt=St.javascriptGenerator.valueToCode(kt,"TO",St.javascriptGenerator.ORDER_NONE)||"0",[St.javascriptGenerator.provideFunction_("mathRandomInt",`
function ${St.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(a, b) {
  if (a > b) {
    // Swap a and b to ensure a is smaller.
    var c = a;
    a = b;
    b = c;
  }
  return Math.floor(Math.random() * (b - a + 1) + a);
}
`)+"("+Nt+", "+kt+")",St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.math_random_float=function(kt){return["Math.random()",St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.math_atan2=function(kt){const Nt=St.javascriptGenerator.valueToCode(kt,"X",St.javascriptGenerator.ORDER_NONE)||"0";return["Math.atan2("+(St.javascriptGenerator.valueToCode(kt,"Y",St.javascriptGenerator.ORDER_NONE)||"0")+", "+Nt+") / Math.PI * 180",St.javascriptGenerator.ORDER_DIVISION]},ft.module$build$src$core$utils$string,ft.NameType$$module$build$src$core$names,St.javascriptGenerator.controls_repeat_ext=function(kt){let Nt;Nt=kt.getField("TIMES")?String(Number(kt.getFieldValue("TIMES"))):St.javascriptGenerator.valueToCode(kt,"TIMES",St.javascriptGenerator.ORDER_ASSIGNMENT)||"0";let Bt=St.javascriptGenerator.statementToCode(kt,"DO");Bt=St.javascriptGenerator.addLoopTrap(Bt,kt),kt="";const Ut=St.javascriptGenerator.nameDB_.getDistinctName("count",ft.NameType$$module$build$src$core$names.VARIABLE);let zt=Nt;return Nt.match(/^\w+$/)||ft.module$build$src$core$utils$string.isNumber(Nt)||(zt=St.javascriptGenerator.nameDB_.getDistinctName("repeat_end",ft.NameType$$module$build$src$core$names.VARIABLE),kt+="var "+zt+" = "+Nt+`;
`),kt+("for (var "+Ut+" = 0; "+Ut+" < "+zt+"; "+Ut+`++) {
`+Bt+`}
`)},St.javascriptGenerator.controls_repeat=St.javascriptGenerator.controls_repeat_ext,St.javascriptGenerator.controls_whileUntil=function(kt){const Nt=kt.getFieldValue("MODE")==="UNTIL";let Bt=St.javascriptGenerator.valueToCode(kt,"BOOL",Nt?St.javascriptGenerator.ORDER_LOGICAL_NOT:St.javascriptGenerator.ORDER_NONE)||"false",Ut=St.javascriptGenerator.statementToCode(kt,"DO");return Ut=St.javascriptGenerator.addLoopTrap(Ut,kt),Nt&&(Bt="!"+Bt),"while ("+Bt+`) {
`+Ut+`}
`},St.javascriptGenerator.controls_for=function(kt){var Nt=St.javascriptGenerator.nameDB_.getName(kt.getFieldValue("VAR"),ft.NameType$$module$build$src$core$names.VARIABLE),Bt=St.javascriptGenerator.valueToCode(kt,"FROM",St.javascriptGenerator.ORDER_ASSIGNMENT)||"0",Ut=St.javascriptGenerator.valueToCode(kt,"TO",St.javascriptGenerator.ORDER_ASSIGNMENT)||"0";const zt=St.javascriptGenerator.valueToCode(kt,"BY",St.javascriptGenerator.ORDER_ASSIGNMENT)||"1";let Zt=St.javascriptGenerator.statementToCode(kt,"DO");if(Zt=St.javascriptGenerator.addLoopTrap(Zt,kt),ft.module$build$src$core$utils$string.isNumber(Bt)&&ft.module$build$src$core$utils$string.isNumber(Ut)&&ft.module$build$src$core$utils$string.isNumber(zt)){var ln=Number(Bt)<=Number(Ut);kt="for ("+Nt+" = "+Bt+"; "+Nt+(ln?" <= ":" >= ")+Ut+"; "+Nt,Nt=Math.abs(Number(zt)),kt=Nt===1?kt+(ln?"++":"--"):kt+((ln?" += ":" -= ")+Nt),kt+=`) {
`+Zt+`}
`}else kt="",ln=Bt,Bt.match(/^\w+$/)||ft.module$build$src$core$utils$string.isNumber(Bt)||(ln=St.javascriptGenerator.nameDB_.getDistinctName(Nt+"_start",ft.NameType$$module$build$src$core$names.VARIABLE),kt+="var "+ln+" = "+Bt+`;
`),Bt=Ut,Ut.match(/^\w+$/)||ft.module$build$src$core$utils$string.isNumber(Ut)||(Bt=St.javascriptGenerator.nameDB_.getDistinctName(Nt+"_end",ft.NameType$$module$build$src$core$names.VARIABLE),kt+="var "+Bt+" = "+Ut+`;
`),Ut=St.javascriptGenerator.nameDB_.getDistinctName(Nt+"_inc",ft.NameType$$module$build$src$core$names.VARIABLE),kt+="var "+Ut+" = ",kt=ft.module$build$src$core$utils$string.isNumber(zt)?kt+(Math.abs(zt)+`;
`):kt+("Math.abs("+zt+`);
`),kt+="if ("+ln+" > "+Bt+`) {
`,kt+=St.javascriptGenerator.INDENT+Ut+" = -"+Ut+`;
`,kt=kt+`}
for (`+(Nt+" = "+ln+"; "+Ut+" >= 0 ? "+Nt+" <= "+Bt+" : "+Nt+" >= "+Bt+"; "+Nt+" += "+Ut+`) {
`+Zt+`}
`);return kt},St.javascriptGenerator.controls_forEach=function(kt){const Nt=St.javascriptGenerator.nameDB_.getName(kt.getFieldValue("VAR"),ft.NameType$$module$build$src$core$names.VARIABLE);var Bt=St.javascriptGenerator.valueToCode(kt,"LIST",St.javascriptGenerator.ORDER_ASSIGNMENT)||"[]";let Ut=St.javascriptGenerator.statementToCode(kt,"DO");Ut=St.javascriptGenerator.addLoopTrap(Ut,kt),kt="";let zt=Bt;return Bt.match(/^\w+$/)||(zt=St.javascriptGenerator.nameDB_.getDistinctName(Nt+"_list",ft.NameType$$module$build$src$core$names.VARIABLE),kt+="var "+zt+" = "+Bt+`;
`),Bt=St.javascriptGenerator.nameDB_.getDistinctName(Nt+"_index",ft.NameType$$module$build$src$core$names.VARIABLE),Ut=St.javascriptGenerator.INDENT+Nt+" = "+zt+"["+Bt+`];
`+Ut,kt+("for (var "+Bt+" in "+zt+`) {
`+Ut+`}
`)},St.javascriptGenerator.controls_flow_statements=function(kt){let Nt="";if(St.javascriptGenerator.STATEMENT_PREFIX&&(Nt+=St.javascriptGenerator.injectId(St.javascriptGenerator.STATEMENT_PREFIX,kt)),St.javascriptGenerator.STATEMENT_SUFFIX&&(Nt+=St.javascriptGenerator.injectId(St.javascriptGenerator.STATEMENT_SUFFIX,kt)),St.javascriptGenerator.STATEMENT_PREFIX){const Bt=kt.getSurroundLoop();Bt&&!Bt.suppressPrefixSuffix&&(Nt+=St.javascriptGenerator.injectId(St.javascriptGenerator.STATEMENT_PREFIX,Bt))}switch(kt.getFieldValue("FLOW")){case"BREAK":return Nt+`break;
`;case"CONTINUE":return Nt+`continue;
`}throw Error("Unknown flow statement.")},St.javascriptGenerator.controls_if=function(kt){var Nt=0;let Bt="";St.javascriptGenerator.STATEMENT_PREFIX&&(Bt+=St.javascriptGenerator.injectId(St.javascriptGenerator.STATEMENT_PREFIX,kt));do{const Ut=St.javascriptGenerator.valueToCode(kt,"IF"+Nt,St.javascriptGenerator.ORDER_NONE)||"false";let zt=St.javascriptGenerator.statementToCode(kt,"DO"+Nt);St.javascriptGenerator.STATEMENT_SUFFIX&&(zt=St.javascriptGenerator.prefixLines(St.javascriptGenerator.injectId(St.javascriptGenerator.STATEMENT_SUFFIX,kt),St.javascriptGenerator.INDENT)+zt),Bt+=(0<Nt?" else ":"")+"if ("+Ut+`) {
`+zt+"}",Nt++}while(kt.getInput("IF"+Nt));return(kt.getInput("ELSE")||St.javascriptGenerator.STATEMENT_SUFFIX)&&(Nt=St.javascriptGenerator.statementToCode(kt,"ELSE"),St.javascriptGenerator.STATEMENT_SUFFIX&&(Nt=St.javascriptGenerator.prefixLines(St.javascriptGenerator.injectId(St.javascriptGenerator.STATEMENT_SUFFIX,kt),St.javascriptGenerator.INDENT)+Nt),Bt+=` else {
`+Nt+"}"),Bt+`
`},St.javascriptGenerator.controls_ifelse=St.javascriptGenerator.controls_if,St.javascriptGenerator.logic_compare=function(kt){const Nt={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[kt.getFieldValue("OP")],Bt=Nt==="=="||Nt==="!="?St.javascriptGenerator.ORDER_EQUALITY:St.javascriptGenerator.ORDER_RELATIONAL,Ut=St.javascriptGenerator.valueToCode(kt,"A",Bt)||"0";return kt=St.javascriptGenerator.valueToCode(kt,"B",Bt)||"0",[Ut+" "+Nt+" "+kt,Bt]},St.javascriptGenerator.logic_operation=function(kt){const Nt=kt.getFieldValue("OP")==="AND"?"&&":"||",Bt=Nt==="&&"?St.javascriptGenerator.ORDER_LOGICAL_AND:St.javascriptGenerator.ORDER_LOGICAL_OR;let Ut=St.javascriptGenerator.valueToCode(kt,"A",Bt);if(kt=St.javascriptGenerator.valueToCode(kt,"B",Bt),Ut||kt){const zt=Nt==="&&"?"true":"false";Ut||(Ut=zt),kt||(kt=zt)}else kt=Ut="false";return[Ut+" "+Nt+" "+kt,Bt]},St.javascriptGenerator.logic_negate=function(kt){const Nt=St.javascriptGenerator.ORDER_LOGICAL_NOT;return["!"+(St.javascriptGenerator.valueToCode(kt,"BOOL",Nt)||"true"),Nt]},St.javascriptGenerator.logic_boolean=function(kt){return[kt.getFieldValue("BOOL")==="TRUE"?"true":"false",St.javascriptGenerator.ORDER_ATOMIC]},St.javascriptGenerator.logic_null=function(kt){return["null",St.javascriptGenerator.ORDER_ATOMIC]},St.javascriptGenerator.logic_ternary=function(kt){const Nt=St.javascriptGenerator.valueToCode(kt,"IF",St.javascriptGenerator.ORDER_CONDITIONAL)||"false",Bt=St.javascriptGenerator.valueToCode(kt,"THEN",St.javascriptGenerator.ORDER_CONDITIONAL)||"null";return kt=St.javascriptGenerator.valueToCode(kt,"ELSE",St.javascriptGenerator.ORDER_CONDITIONAL)||"null",[Nt+" ? "+Bt+" : "+kt,St.javascriptGenerator.ORDER_CONDITIONAL]},ft.NameType$$module$build$src$core$names,St.javascriptGenerator.lists_create_empty=function(kt){return["[]",St.javascriptGenerator.ORDER_ATOMIC]},St.javascriptGenerator.lists_create_with=function(kt){const Nt=Array(kt.itemCount_);for(let Bt=0;Bt<kt.itemCount_;Bt++)Nt[Bt]=St.javascriptGenerator.valueToCode(kt,"ADD"+Bt,St.javascriptGenerator.ORDER_NONE)||"null";return["["+Nt.join(", ")+"]",St.javascriptGenerator.ORDER_ATOMIC]},St.javascriptGenerator.lists_repeat=function(kt){const Nt=St.javascriptGenerator.provideFunction_("listsRepeat",`
function ${St.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(value, n) {
  var array = [];
  for (var i = 0; i < n; i++) {
    array[i] = value;
  }
  return array;
}
`),Bt=St.javascriptGenerator.valueToCode(kt,"ITEM",St.javascriptGenerator.ORDER_NONE)||"null";return kt=St.javascriptGenerator.valueToCode(kt,"NUM",St.javascriptGenerator.ORDER_NONE)||"0",[Nt+"("+Bt+", "+kt+")",St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.lists_length=function(kt){return[(St.javascriptGenerator.valueToCode(kt,"VALUE",St.javascriptGenerator.ORDER_MEMBER)||"[]")+".length",St.javascriptGenerator.ORDER_MEMBER]},St.javascriptGenerator.lists_isEmpty=function(kt){return["!"+(St.javascriptGenerator.valueToCode(kt,"VALUE",St.javascriptGenerator.ORDER_MEMBER)||"[]")+".length",St.javascriptGenerator.ORDER_LOGICAL_NOT]},St.javascriptGenerator.lists_indexOf=function(kt){var Nt=kt.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf";const Bt=St.javascriptGenerator.valueToCode(kt,"FIND",St.javascriptGenerator.ORDER_NONE)||"''";return Nt=(St.javascriptGenerator.valueToCode(kt,"VALUE",St.javascriptGenerator.ORDER_MEMBER)||"[]")+"."+Nt+"("+Bt+")",kt.workspace.options.oneBasedIndex?[Nt+" + 1",St.javascriptGenerator.ORDER_ADDITION]:[Nt,St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.lists_getIndex=function(kt){const Nt=kt.getFieldValue("MODE")||"GET",Bt=kt.getFieldValue("WHERE")||"FROM_START";var Ut=St.javascriptGenerator.valueToCode(kt,"VALUE",Bt==="RANDOM"?St.javascriptGenerator.ORDER_NONE:St.javascriptGenerator.ORDER_MEMBER)||"[]";switch(Bt){case"FIRST":if(Nt==="GET")return[Ut+"[0]",St.javascriptGenerator.ORDER_MEMBER];if(Nt==="GET_REMOVE")return[Ut+".shift()",St.javascriptGenerator.ORDER_MEMBER];if(Nt==="REMOVE")return Ut+`.shift();
`;break;case"LAST":if(Nt==="GET")return[Ut+".slice(-1)[0]",St.javascriptGenerator.ORDER_MEMBER];if(Nt==="GET_REMOVE")return[Ut+".pop()",St.javascriptGenerator.ORDER_MEMBER];if(Nt==="REMOVE")return Ut+`.pop();
`;break;case"FROM_START":if(kt=St.javascriptGenerator.getAdjusted(kt,"AT"),Nt==="GET")return[Ut+"["+kt+"]",St.javascriptGenerator.ORDER_MEMBER];if(Nt==="GET_REMOVE")return[Ut+".splice("+kt+", 1)[0]",St.javascriptGenerator.ORDER_FUNCTION_CALL];if(Nt==="REMOVE")return Ut+".splice("+kt+`, 1);
`;break;case"FROM_END":if(kt=St.javascriptGenerator.getAdjusted(kt,"AT",1,!0),Nt==="GET")return[Ut+".slice("+kt+")[0]",St.javascriptGenerator.ORDER_FUNCTION_CALL];if(Nt==="GET_REMOVE")return[Ut+".splice("+kt+", 1)[0]",St.javascriptGenerator.ORDER_FUNCTION_CALL];if(Nt==="REMOVE")return Ut+".splice("+kt+", 1);";break;case"RANDOM":if(Ut=St.javascriptGenerator.provideFunction_("listsGetRandomItem",`
function ${St.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(list, remove) {
  var x = Math.floor(Math.random() * list.length);
  if (remove) {
    return list.splice(x, 1)[0];
  } else {
    return list[x];
  }
}
`)+"("+Ut+", "+(Nt!=="GET")+")",Nt==="GET"||Nt==="GET_REMOVE")return[Ut,St.javascriptGenerator.ORDER_FUNCTION_CALL];if(Nt==="REMOVE")return Ut+`;
`}throw Error("Unhandled combination (lists_getIndex).")},St.javascriptGenerator.lists_setIndex=function(kt){function Nt(){if(Bt.match(/^\w+$/))return"";const ln=St.javascriptGenerator.nameDB_.getDistinctName("tmpList",ft.NameType$$module$build$src$core$names.VARIABLE),cn="var "+ln+" = "+Bt+`;
`;return Bt=ln,cn}let Bt=St.javascriptGenerator.valueToCode(kt,"LIST",St.javascriptGenerator.ORDER_MEMBER)||"[]";const Ut=kt.getFieldValue("MODE")||"GET";var zt=kt.getFieldValue("WHERE")||"FROM_START";const Zt=St.javascriptGenerator.valueToCode(kt,"TO",St.javascriptGenerator.ORDER_ASSIGNMENT)||"null";switch(zt){case"FIRST":if(Ut==="SET")return Bt+"[0] = "+Zt+`;
`;if(Ut==="INSERT")return Bt+".unshift("+Zt+`);
`;break;case"LAST":if(Ut==="SET")return Nt()+(Bt+"["+Bt+".length - 1] = "+Zt+`;
`);if(Ut==="INSERT")return Bt+".push("+Zt+`);
`;break;case"FROM_START":if(kt=St.javascriptGenerator.getAdjusted(kt,"AT"),Ut==="SET")return Bt+"["+kt+"] = "+Zt+`;
`;if(Ut==="INSERT")return Bt+".splice("+kt+", 0, "+Zt+`);
`;break;case"FROM_END":if(kt=St.javascriptGenerator.getAdjusted(kt,"AT",1,!1,St.javascriptGenerator.ORDER_SUBTRACTION),zt=Nt(),Ut==="SET")return zt+(Bt+"["+Bt+".length - "+kt+"] = "+Zt+`;
`);if(Ut==="INSERT")return zt+(Bt+".splice("+Bt+".length - "+kt+", 0, "+Zt+`);
`);break;case"RANDOM":if(kt=Nt(),zt=St.javascriptGenerator.nameDB_.getDistinctName("tmpX",ft.NameType$$module$build$src$core$names.VARIABLE),kt+="var "+zt+" = Math.floor(Math.random() * "+Bt+`.length);
`,Ut==="SET")return kt+(Bt+"["+zt+"] = "+Zt+`;
`);if(Ut==="INSERT")return kt+(Bt+".splice("+zt+", 0, "+Zt+`);
`)}throw Error("Unhandled combination (lists_setIndex).")};var Rt=function(kt,Nt,Bt){return Nt==="FIRST"?"0":Nt==="FROM_END"?kt+".length - 1 - "+Bt:Nt==="LAST"?kt+".length - 1":Bt};return St.javascriptGenerator.lists_getSublist=function(kt){var Nt=St.javascriptGenerator.valueToCode(kt,"LIST",St.javascriptGenerator.ORDER_MEMBER)||"[]",Bt=kt.getFieldValue("WHERE1"),Ut=kt.getFieldValue("WHERE2");if(Bt==="FIRST"&&Ut==="LAST")Nt+=".slice(0)";else if(Nt.match(/^\w+$/)||Bt!=="FROM_END"&&Ut==="FROM_START"){switch(Bt){case"FROM_START":Bt=St.javascriptGenerator.getAdjusted(kt,"AT1");break;case"FROM_END":Bt=St.javascriptGenerator.getAdjusted(kt,"AT1",1,!1,St.javascriptGenerator.ORDER_SUBTRACTION),Bt=Nt+".length - "+Bt;break;case"FIRST":Bt="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(Ut){case"FROM_START":Ut=St.javascriptGenerator.getAdjusted(kt,"AT2",1);break;case"FROM_END":Ut=St.javascriptGenerator.getAdjusted(kt,"AT2",0,!1,St.javascriptGenerator.ORDER_SUBTRACTION),Ut=Nt+".length - "+Ut;break;case"LAST":Ut=Nt+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}Nt=Nt+".slice("+Bt+", "+Ut+")"}else{const zt=St.javascriptGenerator.getAdjusted(kt,"AT1");kt=St.javascriptGenerator.getAdjusted(kt,"AT2");const Zt={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};Nt=St.javascriptGenerator.provideFunction_("subsequence"+Zt[Bt]+Zt[Ut],`
function ${St.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(sequence${Bt==="FROM_END"||Bt==="FROM_START"?", at1":""}${Ut==="FROM_END"||Ut==="FROM_START"?", at2":""}) {
  var start = ${Rt("sequence",Bt,"at1")};
  var end = ${Rt("sequence",Ut,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+Nt+(Bt==="FROM_END"||Bt==="FROM_START"?", "+zt:"")+(Ut==="FROM_END"||Ut==="FROM_START"?", "+kt:"")+")"}return[Nt,St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.lists_sort=function(kt){const Nt=St.javascriptGenerator.valueToCode(kt,"LIST",St.javascriptGenerator.ORDER_FUNCTION_CALL)||"[]",Bt=kt.getFieldValue("DIRECTION")==="1"?1:-1;kt=kt.getFieldValue("TYPE");const Ut=St.javascriptGenerator.provideFunction_("listsGetSortCompare",`
function ${St.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(type, direction) {
  var compareFuncs = {
    'NUMERIC': function(a, b) {
        return Number(a) - Number(b); },
    'TEXT': function(a, b) {
        return a.toString() > b.toString() ? 1 : -1; },
    'IGNORE_CASE': function(a, b) {
        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },
  };
  var compare = compareFuncs[type];
  return function(a, b) { return compare(a, b) * direction; };
}
      `);return[Nt+".slice().sort("+Ut+'("'+kt+'", '+Bt+"))",St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.lists_split=function(kt){let Nt=St.javascriptGenerator.valueToCode(kt,"INPUT",St.javascriptGenerator.ORDER_MEMBER);const Bt=St.javascriptGenerator.valueToCode(kt,"DELIM",St.javascriptGenerator.ORDER_NONE)||"''";if(kt=kt.getFieldValue("MODE"),kt==="SPLIT")Nt||(Nt="''"),kt="split";else if(kt==="JOIN")Nt||(Nt="[]"),kt="join";else throw Error("Unknown mode: "+kt);return[Nt+"."+kt+"("+Bt+")",St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.lists_reverse=function(kt){return[(St.javascriptGenerator.valueToCode(kt,"LIST",St.javascriptGenerator.ORDER_FUNCTION_CALL)||"[]")+".slice().reverse()",St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.colour_picker=function(kt){return[St.javascriptGenerator.quote_(kt.getFieldValue("COLOUR")),St.javascriptGenerator.ORDER_ATOMIC]},St.javascriptGenerator.colour_random=function(kt){return[St.javascriptGenerator.provideFunction_("colourRandom",`
function ${St.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}() {
  var num = Math.floor(Math.random() * Math.pow(2, 24));
  return '#' + ('00000' + num.toString(16)).substr(-6);
}
`)+"()",St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.colour_rgb=function(kt){const Nt=St.javascriptGenerator.valueToCode(kt,"RED",St.javascriptGenerator.ORDER_NONE)||0,Bt=St.javascriptGenerator.valueToCode(kt,"GREEN",St.javascriptGenerator.ORDER_NONE)||0;return kt=St.javascriptGenerator.valueToCode(kt,"BLUE",St.javascriptGenerator.ORDER_NONE)||0,[St.javascriptGenerator.provideFunction_("colourRgb",`
function ${St.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(r, g, b) {
  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;
  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;
  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;
  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);
  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);
  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)+"("+Nt+", "+Bt+", "+kt+")",St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.javascriptGenerator.colour_blend=function(kt){const Nt=St.javascriptGenerator.valueToCode(kt,"COLOUR1",St.javascriptGenerator.ORDER_NONE)||"'#000000'",Bt=St.javascriptGenerator.valueToCode(kt,"COLOUR2",St.javascriptGenerator.ORDER_NONE)||"'#000000'";return kt=St.javascriptGenerator.valueToCode(kt,"RATIO",St.javascriptGenerator.ORDER_NONE)||.5,[St.javascriptGenerator.provideFunction_("colourBlend",`
function ${St.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(c1, c2, ratio) {
  ratio = Math.max(Math.min(Number(ratio), 1), 0);
  var r1 = parseInt(c1.substring(1, 3), 16);
  var g1 = parseInt(c1.substring(3, 5), 16);
  var b1 = parseInt(c1.substring(5, 7), 16);
  var r2 = parseInt(c2.substring(1, 3), 16);
  var g2 = parseInt(c2.substring(3, 5), 16);
  var b2 = parseInt(c2.substring(5, 7), 16);
  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);
  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);
  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);
  r = ('0' + (r || 0).toString(16)).slice(-2);
  g = ('0' + (g || 0).toString(16)).slice(-2);
  b = ('0' + (b || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)+"("+Nt+", "+Bt+", "+kt+")",St.javascriptGenerator.ORDER_FUNCTION_CALL]},St.__namespace__=ft,St})}(javascript_compressed)),javascript_compressed.exports}(function(dt,$){(function(lt,ft){dt.exports=ft(requireCoreBrowser(),requireJavascript_compressed())})(commonjsGlobal,function(lt,ft){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return ft})})(javascript$1);var javascriptExports=javascript$1.exports,hasRequiredBrowser;function requireBrowser(){return hasRequiredBrowser||(hasRequiredBrowser=1,function(dt,$){(function(lt,ft){dt.exports=ft(requireCoreBrowser(),requireEn(),requireBlocks(),javascriptExports)})(commonjsGlobal,function(lt,ft,St,Tt){return lt.setLocale(ft),lt})}(browser$1)),browser$1.exports}(function(dt,$){(function(lt,ft){dt.exports=ft(requireBrowser())})(commonjsGlobal,function(lt){/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return lt})})(blockly$1);var blocklyExports=blockly$1.exports;const Blockly=getDefaultExportFromCjs(blocklyExports);var python$1={exports:{}},python_compressed={exports:{}},hasRequiredPython_compressed;function requirePython_compressed(){return hasRequiredPython_compressed||(hasRequiredPython_compressed=1,function(dt,$){(function(lt,ft){dt.exports=ft(requireBlockly_compressed())})(commonjsGlobal,function(lt){var ft=lt.__namespace__,St={};ft.module$build$src$core$utils$string,ft.module$build$src$core$variables,ft.CodeGenerator$$module$build$src$core$generator,ft.module$build$src$core$input_types.inputTypes,ft.module$build$src$core$names.Names,ft.NameType$$module$build$src$core$names,St.pythonGenerator=new ft.CodeGenerator$$module$build$src$core$generator("Python"),St.pythonGenerator.addReservedWords("False,None,True,and,as,assert,break,class,continue,def,del,elif,else,except,exec,finally,for,from,global,if,import,in,is,lambda,nonlocal,not,or,pass,print,raise,return,try,while,with,yield,NotImplemented,Ellipsis,__debug__,quit,exit,copyright,license,credits,ArithmeticError,AssertionError,AttributeError,BaseException,BlockingIOError,BrokenPipeError,BufferError,BytesWarning,ChildProcessError,ConnectionAbortedError,ConnectionError,ConnectionRefusedError,ConnectionResetError,DeprecationWarning,EOFError,Ellipsis,EnvironmentError,Exception,FileExistsError,FileNotFoundError,FloatingPointError,FutureWarning,GeneratorExit,IOError,ImportError,ImportWarning,IndentationError,IndexError,InterruptedError,IsADirectoryError,KeyError,KeyboardInterrupt,LookupError,MemoryError,ModuleNotFoundError,NameError,NotADirectoryError,NotImplemented,NotImplementedError,OSError,OverflowError,PendingDeprecationWarning,PermissionError,ProcessLookupError,RecursionError,ReferenceError,ResourceWarning,RuntimeError,RuntimeWarning,StandardError,StopAsyncIteration,StopIteration,SyntaxError,SyntaxWarning,SystemError,SystemExit,TabError,TimeoutError,TypeError,UnboundLocalError,UnicodeDecodeError,UnicodeEncodeError,UnicodeError,UnicodeTranslateError,UnicodeWarning,UserWarning,ValueError,Warning,ZeroDivisionError,_,__build_class__,__debug__,__doc__,__import__,__loader__,__name__,__package__,__spec__,abs,all,any,apply,ascii,basestring,bin,bool,buffer,bytearray,bytes,callable,chr,classmethod,cmp,coerce,compile,complex,copyright,credits,delattr,dict,dir,divmod,enumerate,eval,exec,execfile,exit,file,filter,float,format,frozenset,getattr,globals,hasattr,hash,help,hex,id,input,int,intern,isinstance,issubclass,iter,len,license,list,locals,long,map,max,memoryview,min,next,object,oct,open,ord,pow,print,property,quit,range,raw_input,reduce,reload,repr,reversed,round,set,setattr,slice,sorted,staticmethod,str,sum,super,tuple,type,unichr,unicode,vars,xrange,zip"),St.pythonGenerator.ORDER_ATOMIC=0,St.pythonGenerator.ORDER_COLLECTION=1,St.pythonGenerator.ORDER_STRING_CONVERSION=1,St.pythonGenerator.ORDER_MEMBER=2.1,St.pythonGenerator.ORDER_FUNCTION_CALL=2.2,St.pythonGenerator.ORDER_EXPONENTIATION=3,St.pythonGenerator.ORDER_UNARY_SIGN=4,St.pythonGenerator.ORDER_BITWISE_NOT=4,St.pythonGenerator.ORDER_MULTIPLICATIVE=5,St.pythonGenerator.ORDER_ADDITIVE=6,St.pythonGenerator.ORDER_BITWISE_SHIFT=7,St.pythonGenerator.ORDER_BITWISE_AND=8,St.pythonGenerator.ORDER_BITWISE_XOR=9,St.pythonGenerator.ORDER_BITWISE_OR=10,St.pythonGenerator.ORDER_RELATIONAL=11,St.pythonGenerator.ORDER_LOGICAL_NOT=12,St.pythonGenerator.ORDER_LOGICAL_AND=13,St.pythonGenerator.ORDER_LOGICAL_OR=14,St.pythonGenerator.ORDER_CONDITIONAL=15,St.pythonGenerator.ORDER_LAMBDA=16,St.pythonGenerator.ORDER_NONE=99,St.pythonGenerator.ORDER_OVERRIDES=[[St.pythonGenerator.ORDER_FUNCTION_CALL,St.pythonGenerator.ORDER_MEMBER],[St.pythonGenerator.ORDER_FUNCTION_CALL,St.pythonGenerator.ORDER_FUNCTION_CALL],[St.pythonGenerator.ORDER_MEMBER,St.pythonGenerator.ORDER_MEMBER],[St.pythonGenerator.ORDER_MEMBER,St.pythonGenerator.ORDER_FUNCTION_CALL],[St.pythonGenerator.ORDER_LOGICAL_NOT,St.pythonGenerator.ORDER_LOGICAL_NOT],[St.pythonGenerator.ORDER_LOGICAL_AND,St.pythonGenerator.ORDER_LOGICAL_AND],[St.pythonGenerator.ORDER_LOGICAL_OR,St.pythonGenerator.ORDER_LOGICAL_OR]],St.pythonGenerator.isInitialized=!1,St.pythonGenerator.init=function(At){Object.getPrototypeOf(this).init.call(this),this.PASS=this.INDENT+`pass
`,this.nameDB_?this.nameDB_.reset():this.nameDB_=new ft.module$build$src$core$names.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(At.getVariableMap()),this.nameDB_.populateVariables(At),this.nameDB_.populateProcedures(At);const Rt=[];var kt=ft.module$build$src$core$variables.allDeveloperVariables(At);for(let Nt=0;Nt<kt.length;Nt++)Rt.push(this.nameDB_.getName(kt[Nt],ft.module$build$src$core$names.Names.DEVELOPER_VARIABLE_TYPE)+" = None");for(At=ft.module$build$src$core$variables.allUsedVarModels(At),kt=0;kt<At.length;kt++)Rt.push(this.nameDB_.getName(At[kt].getId(),ft.NameType$$module$build$src$core$names.VARIABLE)+" = None");this.definitions_.variables=Rt.join(`
`),this.isInitialized=!0},St.pythonGenerator.finish=function(At){const Rt=[],kt=[];for(let Nt in this.definitions_){const Bt=this.definitions_[Nt];Bt.match(/^(from\s+\S+\s+)?import\s+\S+/)?Rt.push(Bt):kt.push(Bt)}return At=Object.getPrototypeOf(this).finish.call(this,At),this.isInitialized=!1,this.nameDB_.reset(),(Rt.join(`
`)+`

`+kt.join(`

`)).replace(/\n\n+/g,`

`).replace(/\n*$/,`


`)+At},St.pythonGenerator.scrubNakedValue=function(At){return At+`
`},St.pythonGenerator.quote_=function(At){At=At.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`);let Rt="'";return At.indexOf("'")!==-1&&(At.indexOf('"')===-1?Rt='"':At=At.replace(/'/g,"\\'")),Rt+At+Rt},St.pythonGenerator.multiline_quote_=function(At){return At.split(/\n/g).map(this.quote_).join(` + '\\n' + 
`)},St.pythonGenerator.scrub_=function(At,Rt,kt){let Nt="";if(!At.outputConnection||!At.outputConnection.targetConnection){var Bt=At.getCommentText();Bt&&(Bt=ft.module$build$src$core$utils$string.wrap(Bt,this.COMMENT_WRAP-3),Nt+=this.prefixLines(Bt+`
`,"# "));for(let Ut=0;Ut<At.inputList.length;Ut++)At.inputList[Ut].type===ft.module$build$src$core$input_types.inputTypes.VALUE&&(Bt=At.inputList[Ut].connection.targetBlock())&&(Bt=this.allNestedComments(Bt))&&(Nt+=this.prefixLines(Bt,"# "))}return At=At.nextConnection&&At.nextConnection.targetBlock(),kt=kt?"":this.blockToCode(At),Nt+Rt+kt},St.pythonGenerator.getAdjustedInt=function(At,Rt,kt,Nt){kt=kt||0,At.workspace.options.oneBasedIndex&&kt--;const Bt=At.workspace.options.oneBasedIndex?"1":"0";return At=this.valueToCode(At,Rt,kt?this.ORDER_ADDITIVE:this.ORDER_NONE)||Bt,ft.module$build$src$core$utils$string.isNumber(At)?(At=parseInt(At,10)+kt,Nt&&(At=-At)):(At=0<kt?"int("+At+" + "+kt+")":0>kt?"int("+At+" - "+-kt+")":"int("+At+")",Nt&&(At="-"+At)),At},ft.NameType$$module$build$src$core$names,St.pythonGenerator.variables_get=function(At){return[St.pythonGenerator.nameDB_.getName(At.getFieldValue("VAR"),ft.NameType$$module$build$src$core$names.VARIABLE),St.pythonGenerator.ORDER_ATOMIC]},St.pythonGenerator.variables_set=function(At){const Rt=St.pythonGenerator.valueToCode(At,"VALUE",St.pythonGenerator.ORDER_NONE)||"0";return St.pythonGenerator.nameDB_.getName(At.getFieldValue("VAR"),ft.NameType$$module$build$src$core$names.VARIABLE)+" = "+Rt+`
`},St.pythonGenerator.variables_get_dynamic=St.pythonGenerator.variables_get,St.pythonGenerator.variables_set_dynamic=St.pythonGenerator.variables_set,ft.module$build$src$core$utils$string,ft.NameType$$module$build$src$core$names,St.pythonGenerator.text=function(At){return[St.pythonGenerator.quote_(At.getFieldValue("TEXT")),St.pythonGenerator.ORDER_ATOMIC]},St.pythonGenerator.text_multiline=function(At){At=St.pythonGenerator.multiline_quote_(At.getFieldValue("TEXT"));const Rt=At.indexOf("+")!==-1?St.pythonGenerator.ORDER_ADDITIVE:St.pythonGenerator.ORDER_ATOMIC;return[At,Rt]};var Tt=/^\s*'([^']|\\')*'\s*$/,Ct=function(At){return Tt.test(At)?[At,St.pythonGenerator.ORDER_ATOMIC]:["str("+At+")",St.pythonGenerator.ORDER_FUNCTION_CALL]};return St.pythonGenerator.text_join=function(At){switch(At.itemCount_){case 0:return["''",St.pythonGenerator.ORDER_ATOMIC];case 1:return At=St.pythonGenerator.valueToCode(At,"ADD0",St.pythonGenerator.ORDER_NONE)||"''",Ct(At);case 2:var Rt=St.pythonGenerator.valueToCode(At,"ADD0",St.pythonGenerator.ORDER_NONE)||"''";return At=St.pythonGenerator.valueToCode(At,"ADD1",St.pythonGenerator.ORDER_NONE)||"''",[Ct(Rt)[0]+" + "+Ct(At)[0],St.pythonGenerator.ORDER_ADDITIVE];default:Rt=[];for(let kt=0;kt<At.itemCount_;kt++)Rt[kt]=St.pythonGenerator.valueToCode(At,"ADD"+kt,St.pythonGenerator.ORDER_NONE)||"''";return At=St.pythonGenerator.nameDB_.getDistinctName("x",ft.NameType$$module$build$src$core$names.VARIABLE),["''.join([str("+At+") for "+At+" in ["+Rt.join(", ")+"]])",St.pythonGenerator.ORDER_FUNCTION_CALL]}},St.pythonGenerator.text_append=function(At){const Rt=St.pythonGenerator.nameDB_.getName(At.getFieldValue("VAR"),ft.NameType$$module$build$src$core$names.VARIABLE);return At=St.pythonGenerator.valueToCode(At,"TEXT",St.pythonGenerator.ORDER_NONE)||"''",Rt+" = str("+Rt+") + "+Ct(At)[0]+`
`},St.pythonGenerator.text_length=function(At){return["len("+(St.pythonGenerator.valueToCode(At,"VALUE",St.pythonGenerator.ORDER_NONE)||"''")+")",St.pythonGenerator.ORDER_FUNCTION_CALL]},St.pythonGenerator.text_isEmpty=function(At){return["not len("+(St.pythonGenerator.valueToCode(At,"VALUE",St.pythonGenerator.ORDER_NONE)||"''")+")",St.pythonGenerator.ORDER_LOGICAL_NOT]},St.pythonGenerator.text_indexOf=function(At){var Rt=At.getFieldValue("END")==="FIRST"?"find":"rfind";const kt=St.pythonGenerator.valueToCode(At,"FIND",St.pythonGenerator.ORDER_NONE)||"''";return Rt=(St.pythonGenerator.valueToCode(At,"VALUE",St.pythonGenerator.ORDER_MEMBER)||"''")+"."+Rt+"("+kt+")",At.workspace.options.oneBasedIndex?[Rt+" + 1",St.pythonGenerator.ORDER_ADDITIVE]:[Rt,St.pythonGenerator.ORDER_FUNCTION_CALL]},St.pythonGenerator.text_charAt=function(At){const Rt=At.getFieldValue("WHERE")||"FROM_START",kt=St.pythonGenerator.valueToCode(At,"VALUE",Rt==="RANDOM"?St.pythonGenerator.ORDER_NONE:St.pythonGenerator.ORDER_MEMBER)||"''";switch(Rt){case"FIRST":return[kt+"[0]",St.pythonGenerator.ORDER_MEMBER];case"LAST":return[kt+"[-1]",St.pythonGenerator.ORDER_MEMBER];case"FROM_START":return At=St.pythonGenerator.getAdjustedInt(At,"AT"),[kt+"["+At+"]",St.pythonGenerator.ORDER_MEMBER];case"FROM_END":return At=St.pythonGenerator.getAdjustedInt(At,"AT",1,!0),[kt+"["+At+"]",St.pythonGenerator.ORDER_MEMBER];case"RANDOM":return St.pythonGenerator.definitions_.import_random="import random",[St.pythonGenerator.provideFunction_("text_random_letter",`
def ${St.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(text):
  x = int(random.random() * len(text))
  return text[x]
`)+"("+kt+")",St.pythonGenerator.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},St.pythonGenerator.text_getSubstring=function(At){var Rt=At.getFieldValue("WHERE1");const kt=At.getFieldValue("WHERE2"),Nt=St.pythonGenerator.valueToCode(At,"STRING",St.pythonGenerator.ORDER_MEMBER)||"''";switch(Rt){case"FROM_START":Rt=St.pythonGenerator.getAdjustedInt(At,"AT1"),Rt===0&&(Rt="");break;case"FROM_END":Rt=St.pythonGenerator.getAdjustedInt(At,"AT1",1,!0);break;case"FIRST":Rt="";break;default:throw Error("Unhandled option (text_getSubstring)")}switch(kt){case"FROM_START":At=St.pythonGenerator.getAdjustedInt(At,"AT2",1);break;case"FROM_END":At=St.pythonGenerator.getAdjustedInt(At,"AT2",0,!0),ft.module$build$src$core$utils$string.isNumber(String(At))?At===0&&(At=""):(St.pythonGenerator.definitions_.import_sys="import sys",At+=" or sys.maxsize");break;case"LAST":At="";break;default:throw Error("Unhandled option (text_getSubstring)")}return[Nt+"["+Rt+" : "+At+"]",St.pythonGenerator.ORDER_MEMBER]},St.pythonGenerator.text_changeCase=function(At){const Rt={UPPERCASE:".upper()",LOWERCASE:".lower()",TITLECASE:".title()"}[At.getFieldValue("CASE")];return[(St.pythonGenerator.valueToCode(At,"TEXT",St.pythonGenerator.ORDER_MEMBER)||"''")+Rt,St.pythonGenerator.ORDER_FUNCTION_CALL]},St.pythonGenerator.text_trim=function(At){const Rt={LEFT:".lstrip()",RIGHT:".rstrip()",BOTH:".strip()"}[At.getFieldValue("MODE")];return[(St.pythonGenerator.valueToCode(At,"TEXT",St.pythonGenerator.ORDER_MEMBER)||"''")+Rt,St.pythonGenerator.ORDER_FUNCTION_CALL]},St.pythonGenerator.text_print=function(At){return"print("+(St.pythonGenerator.valueToCode(At,"TEXT",St.pythonGenerator.ORDER_NONE)||"''")+`)
`},St.pythonGenerator.text_prompt_ext=function(At){var Rt=St.pythonGenerator.provideFunction_("text_prompt",`
def ${St.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(msg):
  try:
    return raw_input(msg)
  except NameError:
    return input(msg)
`);let kt;return kt=At.getField("TEXT")?St.pythonGenerator.quote_(At.getFieldValue("TEXT")):St.pythonGenerator.valueToCode(At,"TEXT",St.pythonGenerator.ORDER_NONE)||"''",Rt=Rt+"("+kt+")",At.getFieldValue("TYPE")==="NUMBER"&&(Rt="float("+Rt+")"),[Rt,St.pythonGenerator.ORDER_FUNCTION_CALL]},St.pythonGenerator.text_prompt=St.pythonGenerator.text_prompt_ext,St.pythonGenerator.text_count=function(At){const Rt=St.pythonGenerator.valueToCode(At,"TEXT",St.pythonGenerator.ORDER_MEMBER)||"''";return At=St.pythonGenerator.valueToCode(At,"SUB",St.pythonGenerator.ORDER_NONE)||"''",[Rt+".count("+At+")",St.pythonGenerator.ORDER_FUNCTION_CALL]},St.pythonGenerator.text_replace=function(At){const Rt=St.pythonGenerator.valueToCode(At,"TEXT",St.pythonGenerator.ORDER_MEMBER)||"''",kt=St.pythonGenerator.valueToCode(At,"FROM",St.pythonGenerator.ORDER_NONE)||"''";return At=St.pythonGenerator.valueToCode(At,"TO",St.pythonGenerator.ORDER_NONE)||"''",[Rt+".replace("+kt+", "+At+")",St.pythonGenerator.ORDER_MEMBER]},St.pythonGenerator.text_reverse=function(At){return[(St.pythonGenerator.valueToCode(At,"TEXT",St.pythonGenerator.ORDER_MEMBER)||"''")+"[::-1]",St.pythonGenerator.ORDER_MEMBER]},ft.module$build$src$core$variables,ft.NameType$$module$build$src$core$names,St.pythonGenerator.procedures_defreturn=function(At){var Rt=[],kt=At.workspace,Nt=ft.module$build$src$core$variables.allUsedVarModels(kt)||[];for(let hn=0,pn;pn=Nt[hn];hn++){var Bt=pn.name;At.getVars().indexOf(Bt)===-1&&Rt.push(St.pythonGenerator.nameDB_.getName(Bt,ft.NameType$$module$build$src$core$names.VARIABLE))}for(kt=ft.module$build$src$core$variables.allDeveloperVariables(kt),Nt=0;Nt<kt.length;Nt++)Rt.push(St.pythonGenerator.nameDB_.getName(kt[Nt],ft.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));kt=Rt.length?St.pythonGenerator.INDENT+"global "+Rt.join(", ")+`
`:"",Rt=St.pythonGenerator.nameDB_.getName(At.getFieldValue("NAME"),ft.NameType$$module$build$src$core$names.PROCEDURE),Nt="",St.pythonGenerator.STATEMENT_PREFIX&&(Nt+=St.pythonGenerator.injectId(St.pythonGenerator.STATEMENT_PREFIX,At)),St.pythonGenerator.STATEMENT_SUFFIX&&(Nt+=St.pythonGenerator.injectId(St.pythonGenerator.STATEMENT_SUFFIX,At)),Nt&&(Nt=St.pythonGenerator.prefixLines(Nt,St.pythonGenerator.INDENT)),Bt="",St.pythonGenerator.INFINITE_LOOP_TRAP&&(Bt=St.pythonGenerator.prefixLines(St.pythonGenerator.injectId(St.pythonGenerator.INFINITE_LOOP_TRAP,At),St.pythonGenerator.INDENT));let Ut=St.pythonGenerator.statementToCode(At,"STACK"),zt=St.pythonGenerator.valueToCode(At,"RETURN",St.pythonGenerator.ORDER_NONE)||"",Zt="";Ut&&zt&&(Zt=Nt),zt?zt=St.pythonGenerator.INDENT+"return "+zt+`
`:Ut||(Ut=St.pythonGenerator.PASS);const ln=[],cn=At.getVars();for(let hn=0;hn<cn.length;hn++)ln[hn]=St.pythonGenerator.nameDB_.getName(cn[hn],ft.NameType$$module$build$src$core$names.VARIABLE);return kt="def "+Rt+"("+ln.join(", ")+`):
`+kt+Nt+Bt+Ut+Zt+zt,kt=St.pythonGenerator.scrub_(At,kt),St.pythonGenerator.definitions_["%"+Rt]=kt,null},St.pythonGenerator.procedures_defnoreturn=St.pythonGenerator.procedures_defreturn,St.pythonGenerator.procedures_callreturn=function(At){const Rt=St.pythonGenerator.nameDB_.getName(At.getFieldValue("NAME"),ft.NameType$$module$build$src$core$names.PROCEDURE),kt=[],Nt=At.getVars();for(let Bt=0;Bt<Nt.length;Bt++)kt[Bt]=St.pythonGenerator.valueToCode(At,"ARG"+Bt,St.pythonGenerator.ORDER_NONE)||"None";return[Rt+"("+kt.join(", ")+")",St.pythonGenerator.ORDER_FUNCTION_CALL]},St.pythonGenerator.procedures_callnoreturn=function(At){return St.pythonGenerator.procedures_callreturn(At)[0]+`
`},St.pythonGenerator.procedures_ifreturn=function(At){let Rt="if "+(St.pythonGenerator.valueToCode(At,"CONDITION",St.pythonGenerator.ORDER_NONE)||"False")+`:
`;return St.pythonGenerator.STATEMENT_SUFFIX&&(Rt+=St.pythonGenerator.prefixLines(St.pythonGenerator.injectId(St.pythonGenerator.STATEMENT_SUFFIX,At),St.pythonGenerator.INDENT)),At.hasReturnValue_?(At=St.pythonGenerator.valueToCode(At,"VALUE",St.pythonGenerator.ORDER_NONE)||"None",Rt+=St.pythonGenerator.INDENT+"return "+At+`
`):Rt+=St.pythonGenerator.INDENT+`return
`,Rt},ft.NameType$$module$build$src$core$names,St.pythonGenerator.addReservedWords("math,random,Number"),St.pythonGenerator.math_number=function(At){At=Number(At.getFieldValue("NUM"));let Rt;return At===1/0?(At='float("inf")',Rt=St.pythonGenerator.ORDER_FUNCTION_CALL):At===-1/0?(At='-float("inf")',Rt=St.pythonGenerator.ORDER_UNARY_SIGN):Rt=0>At?St.pythonGenerator.ORDER_UNARY_SIGN:St.pythonGenerator.ORDER_ATOMIC,[At,Rt]},St.pythonGenerator.math_arithmetic=function(At){var Rt={ADD:[" + ",St.pythonGenerator.ORDER_ADDITIVE],MINUS:[" - ",St.pythonGenerator.ORDER_ADDITIVE],MULTIPLY:[" * ",St.pythonGenerator.ORDER_MULTIPLICATIVE],DIVIDE:[" / ",St.pythonGenerator.ORDER_MULTIPLICATIVE],POWER:[" ** ",St.pythonGenerator.ORDER_EXPONENTIATION]}[At.getFieldValue("OP")];const kt=Rt[0];Rt=Rt[1];const Nt=St.pythonGenerator.valueToCode(At,"A",Rt)||"0";return At=St.pythonGenerator.valueToCode(At,"B",Rt)||"0",[Nt+kt+At,Rt]},St.pythonGenerator.math_single=function(At){const Rt=At.getFieldValue("OP");let kt;if(Rt==="NEG")return kt=St.pythonGenerator.valueToCode(At,"NUM",St.pythonGenerator.ORDER_UNARY_SIGN)||"0",["-"+kt,St.pythonGenerator.ORDER_UNARY_SIGN];switch(St.pythonGenerator.definitions_.import_math="import math",At=Rt==="SIN"||Rt==="COS"||Rt==="TAN"?St.pythonGenerator.valueToCode(At,"NUM",St.pythonGenerator.ORDER_MULTIPLICATIVE)||"0":St.pythonGenerator.valueToCode(At,"NUM",St.pythonGenerator.ORDER_NONE)||"0",Rt){case"ABS":kt="math.fabs("+At+")";break;case"ROOT":kt="math.sqrt("+At+")";break;case"LN":kt="math.log("+At+")";break;case"LOG10":kt="math.log10("+At+")";break;case"EXP":kt="math.exp("+At+")";break;case"POW10":kt="math.pow(10,"+At+")";break;case"ROUND":kt="round("+At+")";break;case"ROUNDUP":kt="math.ceil("+At+")";break;case"ROUNDDOWN":kt="math.floor("+At+")";break;case"SIN":kt="math.sin("+At+" / 180.0 * math.pi)";break;case"COS":kt="math.cos("+At+" / 180.0 * math.pi)";break;case"TAN":kt="math.tan("+At+" / 180.0 * math.pi)"}if(kt)return[kt,St.pythonGenerator.ORDER_FUNCTION_CALL];switch(Rt){case"ASIN":kt="math.asin("+At+") / math.pi * 180";break;case"ACOS":kt="math.acos("+At+") / math.pi * 180";break;case"ATAN":kt="math.atan("+At+") / math.pi * 180";break;default:throw Error("Unknown math operator: "+Rt)}return[kt,St.pythonGenerator.ORDER_MULTIPLICATIVE]},St.pythonGenerator.math_constant=function(At){const Rt={PI:["math.pi",St.pythonGenerator.ORDER_MEMBER],E:["math.e",St.pythonGenerator.ORDER_MEMBER],GOLDEN_RATIO:["(1 + math.sqrt(5)) / 2",St.pythonGenerator.ORDER_MULTIPLICATIVE],SQRT2:["math.sqrt(2)",St.pythonGenerator.ORDER_MEMBER],SQRT1_2:["math.sqrt(1.0 / 2)",St.pythonGenerator.ORDER_MEMBER],INFINITY:["float('inf')",St.pythonGenerator.ORDER_ATOMIC]};return At=At.getFieldValue("CONSTANT"),At!=="INFINITY"&&(St.pythonGenerator.definitions_.import_math="import math"),Rt[At]},St.pythonGenerator.math_number_property=function(At){var Rt={EVEN:[" % 2 == 0",St.pythonGenerator.ORDER_MULTIPLICATIVE,St.pythonGenerator.ORDER_RELATIONAL],ODD:[" % 2 == 1",St.pythonGenerator.ORDER_MULTIPLICATIVE,St.pythonGenerator.ORDER_RELATIONAL],WHOLE:[" % 1 == 0",St.pythonGenerator.ORDER_MULTIPLICATIVE,St.pythonGenerator.ORDER_RELATIONAL],POSITIVE:[" > 0",St.pythonGenerator.ORDER_RELATIONAL,St.pythonGenerator.ORDER_RELATIONAL],NEGATIVE:[" < 0",St.pythonGenerator.ORDER_RELATIONAL,St.pythonGenerator.ORDER_RELATIONAL],DIVISIBLE_BY:[null,St.pythonGenerator.ORDER_MULTIPLICATIVE,St.pythonGenerator.ORDER_RELATIONAL],PRIME:[null,St.pythonGenerator.ORDER_NONE,St.pythonGenerator.ORDER_FUNCTION_CALL]};const kt=At.getFieldValue("PROPERTY"),[Nt,Bt,Ut]=Rt[kt];if(Rt=St.pythonGenerator.valueToCode(At,"NUMBER_TO_CHECK",Bt)||"0",kt==="PRIME")St.pythonGenerator.definitions_.import_math="import math",St.pythonGenerator.definitions_.from_numbers_import_Number="from numbers import Number",At=St.pythonGenerator.provideFunction_("math_isPrime",`
def ${St.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(n):
  # https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  # If n is not a number but a string, try parsing it.
  if not isinstance(n, Number):
    try:
      n = float(n)
    except:
      return False
  if n == 2 or n == 3:
    return True
  # False if n is negative, is 1, or not whole, or if n is divisible by 2 or 3.
  if n <= 1 or n % 1 != 0 or n % 2 == 0 or n % 3 == 0:
    return False
  # Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for x in range(6, int(math.sqrt(n)) + 2, 6):
    if n % (x - 1) == 0 or n % (x + 1) == 0:
      return False
  return True
`)+"("+Rt+")";else if(kt==="DIVISIBLE_BY"){if(At=St.pythonGenerator.valueToCode(At,"DIVISOR",St.pythonGenerator.ORDER_MULTIPLICATIVE)||"0",At==="0")return["False",St.pythonGenerator.ORDER_ATOMIC];At=Rt+" % "+At+" == 0"}else At=Rt+Nt;return[At,Ut]},St.pythonGenerator.math_change=function(At){St.pythonGenerator.definitions_.from_numbers_import_Number="from numbers import Number";const Rt=St.pythonGenerator.valueToCode(At,"DELTA",St.pythonGenerator.ORDER_ADDITIVE)||"0";return At=St.pythonGenerator.nameDB_.getName(At.getFieldValue("VAR"),ft.NameType$$module$build$src$core$names.VARIABLE),At+" = ("+At+" if isinstance("+At+", Number) else 0) + "+Rt+`
`},St.pythonGenerator.math_round=St.pythonGenerator.math_single,St.pythonGenerator.math_trig=St.pythonGenerator.math_single,St.pythonGenerator.math_on_list=function(At){var Rt=At.getFieldValue("OP");switch(At=St.pythonGenerator.valueToCode(At,"LIST",St.pythonGenerator.ORDER_NONE)||"[]",Rt){case"SUM":Rt="sum("+At+")";break;case"MIN":Rt="min("+At+")";break;case"MAX":Rt="max("+At+")";break;case"AVERAGE":St.pythonGenerator.definitions_.from_numbers_import_Number="from numbers import Number",Rt=St.pythonGenerator.provideFunction_("math_mean",`
def ${St.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(myList):
  localList = [e for e in myList if isinstance(e, Number)]
  if not localList: return
  return float(sum(localList)) / len(localList)
`)+"("+At+")";break;case"MEDIAN":St.pythonGenerator.definitions_.from_numbers_import_Number="from numbers import Number",Rt=St.pythonGenerator.provideFunction_("math_median",`
def ${St.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(myList):
  localList = sorted([e for e in myList if isinstance(e, Number)])
  if not localList: return
  if len(localList) % 2 == 0:
    return (localList[len(localList) // 2 - 1] + localList[len(localList) // 2]) / 2.0
  else:
    return localList[(len(localList) - 1) // 2]
`)+"("+At+")";break;case"MODE":Rt=St.pythonGenerator.provideFunction_("math_modes",`
def ${St.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(some_list):
  modes = []
  # Using a lists of [item, count] to keep count rather than dict
  # to avoid "unhashable" errors when the counted item is itself a list or dict.
  counts = []
  maxCount = 1
  for item in some_list:
    found = False
    for count in counts:
      if count[0] == item:
        count[1] += 1
        maxCount = max(maxCount, count[1])
        found = True
    if not found:
      counts.append([item, 1])
  for counted_item, item_count in counts:
    if item_count == maxCount:
      modes.append(counted_item)
  return modes
`)+"("+At+")";break;case"STD_DEV":St.pythonGenerator.definitions_.import_math="import math",Rt=St.pythonGenerator.provideFunction_("math_standard_deviation",`
def ${St.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(numbers):
  n = len(numbers)
  if n == 0: return
  mean = float(sum(numbers)) / n
  variance = sum((x - mean) ** 2 for x in numbers) / n
  return math.sqrt(variance)
`)+"("+At+")";break;case"RANDOM":St.pythonGenerator.definitions_.import_random="import random",Rt="random.choice("+At+")";break;default:throw Error("Unknown operator: "+Rt)}return[Rt,St.pythonGenerator.ORDER_FUNCTION_CALL]},St.pythonGenerator.math_modulo=function(At){const Rt=St.pythonGenerator.valueToCode(At,"DIVIDEND",St.pythonGenerator.ORDER_MULTIPLICATIVE)||"0";return At=St.pythonGenerator.valueToCode(At,"DIVISOR",St.pythonGenerator.ORDER_MULTIPLICATIVE)||"0",[Rt+" % "+At,St.pythonGenerator.ORDER_MULTIPLICATIVE]},St.pythonGenerator.math_constrain=function(At){const Rt=St.pythonGenerator.valueToCode(At,"VALUE",St.pythonGenerator.ORDER_NONE)||"0",kt=St.pythonGenerator.valueToCode(At,"LOW",St.pythonGenerator.ORDER_NONE)||"0";return At=St.pythonGenerator.valueToCode(At,"HIGH",St.pythonGenerator.ORDER_NONE)||"float('inf')",["min(max("+Rt+", "+kt+"), "+At+")",St.pythonGenerator.ORDER_FUNCTION_CALL]},St.pythonGenerator.math_random_int=function(At){St.pythonGenerator.definitions_.import_random="import random";const Rt=St.pythonGenerator.valueToCode(At,"FROM",St.pythonGenerator.ORDER_NONE)||"0";return At=St.pythonGenerator.valueToCode(At,"TO",St.pythonGenerator.ORDER_NONE)||"0",["random.randint("+Rt+", "+At+")",St.pythonGenerator.ORDER_FUNCTION_CALL]},St.pythonGenerator.math_random_float=function(At){return St.pythonGenerator.definitions_.import_random="import random",["random.random()",St.pythonGenerator.ORDER_FUNCTION_CALL]},St.pythonGenerator.math_atan2=function(At){St.pythonGenerator.definitions_.import_math="import math";const Rt=St.pythonGenerator.valueToCode(At,"X",St.pythonGenerator.ORDER_NONE)||"0";return["math.atan2("+(St.pythonGenerator.valueToCode(At,"Y",St.pythonGenerator.ORDER_NONE)||"0")+", "+Rt+") / math.pi * 180",St.pythonGenerator.ORDER_MULTIPLICATIVE]},ft.module$build$src$core$utils$string,ft.NameType$$module$build$src$core$names,St.pythonGenerator.controls_repeat_ext=function(At){let Rt;Rt=At.getField("TIMES")?String(parseInt(At.getFieldValue("TIMES"),10)):St.pythonGenerator.valueToCode(At,"TIMES",St.pythonGenerator.ORDER_NONE)||"0",Rt=ft.module$build$src$core$utils$string.isNumber(Rt)?parseInt(Rt,10):"int("+Rt+")";let kt=St.pythonGenerator.statementToCode(At,"DO");return kt=St.pythonGenerator.addLoopTrap(kt,At)||St.pythonGenerator.PASS,"for "+St.pythonGenerator.nameDB_.getDistinctName("count",ft.NameType$$module$build$src$core$names.VARIABLE)+" in range("+Rt+`):
`+kt},St.pythonGenerator.controls_repeat=St.pythonGenerator.controls_repeat_ext,St.pythonGenerator.controls_whileUntil=function(At){const Rt=At.getFieldValue("MODE")==="UNTIL";let kt=St.pythonGenerator.valueToCode(At,"BOOL",Rt?St.pythonGenerator.ORDER_LOGICAL_NOT:St.pythonGenerator.ORDER_NONE)||"False",Nt=St.pythonGenerator.statementToCode(At,"DO");return Nt=St.pythonGenerator.addLoopTrap(Nt,At)||St.pythonGenerator.PASS,Rt&&(kt="not "+kt),"while "+kt+`:
`+Nt},St.pythonGenerator.controls_for=function(At){const Rt=St.pythonGenerator.nameDB_.getName(At.getFieldValue("VAR"),ft.NameType$$module$build$src$core$names.VARIABLE);var kt=St.pythonGenerator.valueToCode(At,"FROM",St.pythonGenerator.ORDER_NONE)||"0",Nt=St.pythonGenerator.valueToCode(At,"TO",St.pythonGenerator.ORDER_NONE)||"0",Bt=St.pythonGenerator.valueToCode(At,"BY",St.pythonGenerator.ORDER_NONE)||"1";let Ut=St.pythonGenerator.statementToCode(At,"DO");Ut=St.pythonGenerator.addLoopTrap(Ut,At)||St.pythonGenerator.PASS;let zt="";const Zt=function(){return St.pythonGenerator.provideFunction_("upRange",`
def ${St.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(start, stop, step):
  while start <= stop:
    yield start
    start += abs(step)
`)},ln=function(){return St.pythonGenerator.provideFunction_("downRange",`
def ${St.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(start, stop, step):
  while start >= stop:
    yield start
    start -= abs(step)
`)};if(At=function(cn,hn,pn){return"("+cn+" <= "+hn+") and "+Zt()+"("+cn+", "+hn+", "+pn+") or "+ln()+"("+cn+", "+hn+", "+pn+")"},ft.module$build$src$core$utils$string.isNumber(kt)&&ft.module$build$src$core$utils$string.isNumber(Nt)&&ft.module$build$src$core$utils$string.isNumber(Bt))kt=Number(kt),Nt=Number(Nt),Bt=Math.abs(Number(Bt)),kt%1===0&&Nt%1===0&&Bt%1===0?(kt<=Nt?(Nt++,At=kt===0&&Bt===1?Nt:kt+", "+Nt,Bt!==1&&(At+=", "+Bt)):(Nt--,At=kt+", "+Nt+", -"+Bt),At="range("+At+")"):(At=kt<Nt?Zt():ln(),At+="("+kt+", "+Nt+", "+Bt+")");else{const cn=function(hn,pn){return ft.module$build$src$core$utils$string.isNumber(hn)?hn=Number(hn):hn.match(/^\w+$/)||(pn=St.pythonGenerator.nameDB_.getDistinctName(Rt+pn,ft.NameType$$module$build$src$core$names.VARIABLE),zt+=pn+" = "+hn+`
`,hn=pn),hn};kt=cn(kt,"_start"),Nt=cn(Nt,"_end"),Bt=cn(Bt,"_inc"),typeof kt=="number"&&typeof Nt=="number"?(At=kt<Nt?Zt():ln(),At+="("+kt+", "+Nt+", "+Bt+")"):At=At(kt,Nt,Bt)}return zt+="for "+Rt+" in "+At+`:
`+Ut},St.pythonGenerator.controls_forEach=function(At){const Rt=St.pythonGenerator.nameDB_.getName(At.getFieldValue("VAR"),ft.NameType$$module$build$src$core$names.VARIABLE),kt=St.pythonGenerator.valueToCode(At,"LIST",St.pythonGenerator.ORDER_RELATIONAL)||"[]";let Nt=St.pythonGenerator.statementToCode(At,"DO");return Nt=St.pythonGenerator.addLoopTrap(Nt,At)||St.pythonGenerator.PASS,"for "+Rt+" in "+kt+`:
`+Nt},St.pythonGenerator.controls_flow_statements=function(At){let Rt="";if(St.pythonGenerator.STATEMENT_PREFIX&&(Rt+=St.pythonGenerator.injectId(St.pythonGenerator.STATEMENT_PREFIX,At)),St.pythonGenerator.STATEMENT_SUFFIX&&(Rt+=St.pythonGenerator.injectId(St.pythonGenerator.STATEMENT_SUFFIX,At)),St.pythonGenerator.STATEMENT_PREFIX){const kt=At.getSurroundLoop();kt&&!kt.suppressPrefixSuffix&&(Rt+=St.pythonGenerator.injectId(St.pythonGenerator.STATEMENT_PREFIX,kt))}switch(At.getFieldValue("FLOW")){case"BREAK":return Rt+`break
`;case"CONTINUE":return Rt+`continue
`}throw Error("Unknown flow statement.")},St.pythonGenerator.controls_if=function(At){let Rt=0,kt="",Nt,Bt;St.pythonGenerator.STATEMENT_PREFIX&&(kt+=St.pythonGenerator.injectId(St.pythonGenerator.STATEMENT_PREFIX,At));do Bt=St.pythonGenerator.valueToCode(At,"IF"+Rt,St.pythonGenerator.ORDER_NONE)||"False",Nt=St.pythonGenerator.statementToCode(At,"DO"+Rt)||St.pythonGenerator.PASS,St.pythonGenerator.STATEMENT_SUFFIX&&(Nt=St.pythonGenerator.prefixLines(St.pythonGenerator.injectId(St.pythonGenerator.STATEMENT_SUFFIX,At),St.pythonGenerator.INDENT)+Nt),kt+=(Rt===0?"if ":"elif ")+Bt+`:
`+Nt,Rt++;while(At.getInput("IF"+Rt));return(At.getInput("ELSE")||St.pythonGenerator.STATEMENT_SUFFIX)&&(Nt=St.pythonGenerator.statementToCode(At,"ELSE")||St.pythonGenerator.PASS,St.pythonGenerator.STATEMENT_SUFFIX&&(Nt=St.pythonGenerator.prefixLines(St.pythonGenerator.injectId(St.pythonGenerator.STATEMENT_SUFFIX,At),St.pythonGenerator.INDENT)+Nt),kt+=`else:
`+Nt),kt},St.pythonGenerator.controls_ifelse=St.pythonGenerator.controls_if,St.pythonGenerator.logic_compare=function(At){const Rt={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[At.getFieldValue("OP")],kt=St.pythonGenerator.ORDER_RELATIONAL,Nt=St.pythonGenerator.valueToCode(At,"A",kt)||"0";return At=St.pythonGenerator.valueToCode(At,"B",kt)||"0",[Nt+" "+Rt+" "+At,kt]},St.pythonGenerator.logic_operation=function(At){const Rt=At.getFieldValue("OP")==="AND"?"and":"or",kt=Rt==="and"?St.pythonGenerator.ORDER_LOGICAL_AND:St.pythonGenerator.ORDER_LOGICAL_OR;let Nt=St.pythonGenerator.valueToCode(At,"A",kt);if(At=St.pythonGenerator.valueToCode(At,"B",kt),Nt||At){const Bt=Rt==="and"?"True":"False";Nt||(Nt=Bt),At||(At=Bt)}else At=Nt="False";return[Nt+" "+Rt+" "+At,kt]},St.pythonGenerator.logic_negate=function(At){return["not "+(St.pythonGenerator.valueToCode(At,"BOOL",St.pythonGenerator.ORDER_LOGICAL_NOT)||"True"),St.pythonGenerator.ORDER_LOGICAL_NOT]},St.pythonGenerator.logic_boolean=function(At){return[At.getFieldValue("BOOL")==="TRUE"?"True":"False",St.pythonGenerator.ORDER_ATOMIC]},St.pythonGenerator.logic_null=function(At){return["None",St.pythonGenerator.ORDER_ATOMIC]},St.pythonGenerator.logic_ternary=function(At){const Rt=St.pythonGenerator.valueToCode(At,"IF",St.pythonGenerator.ORDER_CONDITIONAL)||"False",kt=St.pythonGenerator.valueToCode(At,"THEN",St.pythonGenerator.ORDER_CONDITIONAL)||"None";return At=St.pythonGenerator.valueToCode(At,"ELSE",St.pythonGenerator.ORDER_CONDITIONAL)||"None",[kt+" if "+Rt+" else "+At,St.pythonGenerator.ORDER_CONDITIONAL]},ft.module$build$src$core$utils$string,ft.NameType$$module$build$src$core$names,St.pythonGenerator.lists_create_empty=function(At){return["[]",St.pythonGenerator.ORDER_ATOMIC]},St.pythonGenerator.lists_create_with=function(At){const Rt=Array(At.itemCount_);for(let kt=0;kt<At.itemCount_;kt++)Rt[kt]=St.pythonGenerator.valueToCode(At,"ADD"+kt,St.pythonGenerator.ORDER_NONE)||"None";return["["+Rt.join(", ")+"]",St.pythonGenerator.ORDER_ATOMIC]},St.pythonGenerator.lists_repeat=function(At){const Rt=St.pythonGenerator.valueToCode(At,"ITEM",St.pythonGenerator.ORDER_NONE)||"None";return At=St.pythonGenerator.valueToCode(At,"NUM",St.pythonGenerator.ORDER_MULTIPLICATIVE)||"0",["["+Rt+"] * "+At,St.pythonGenerator.ORDER_MULTIPLICATIVE]},St.pythonGenerator.lists_length=function(At){return["len("+(St.pythonGenerator.valueToCode(At,"VALUE",St.pythonGenerator.ORDER_NONE)||"[]")+")",St.pythonGenerator.ORDER_FUNCTION_CALL]},St.pythonGenerator.lists_isEmpty=function(At){return["not len("+(St.pythonGenerator.valueToCode(At,"VALUE",St.pythonGenerator.ORDER_NONE)||"[]")+")",St.pythonGenerator.ORDER_LOGICAL_NOT]},St.pythonGenerator.lists_indexOf=function(At){const Rt=St.pythonGenerator.valueToCode(At,"FIND",St.pythonGenerator.ORDER_NONE)||"[]",kt=St.pythonGenerator.valueToCode(At,"VALUE",St.pythonGenerator.ORDER_NONE)||"''";let Nt=" -1",Bt="",Ut=" - 1";return At.workspace.options.oneBasedIndex&&(Nt=" 0",Bt=" + 1",Ut=""),[(At.getFieldValue("END")==="FIRST"?St.pythonGenerator.provideFunction_("first_index",`
def ${St.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(my_list, elem):
  try: index = my_list.index(elem)${Bt}
  except: index =${Nt}
  return index
`):St.pythonGenerator.provideFunction_("last_index",`
def ${St.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(my_list, elem):
  try: index = len(my_list) - my_list[::-1].index(elem)${Ut}
  except: index =${Nt}
  return index
`))+"("+kt+", "+Rt+")",St.pythonGenerator.ORDER_FUNCTION_CALL]},St.pythonGenerator.lists_getIndex=function(At){const Rt=At.getFieldValue("MODE")||"GET",kt=At.getFieldValue("WHERE")||"FROM_START";var Nt=St.pythonGenerator.valueToCode(At,"VALUE",kt==="RANDOM"?St.pythonGenerator.ORDER_NONE:St.pythonGenerator.ORDER_MEMBER)||"[]";switch(kt){case"FIRST":if(Rt==="GET")return[Nt+"[0]",St.pythonGenerator.ORDER_MEMBER];if(Rt==="GET_REMOVE")return[Nt+".pop(0)",St.pythonGenerator.ORDER_FUNCTION_CALL];if(Rt==="REMOVE")return Nt+`.pop(0)
`;break;case"LAST":if(Rt==="GET")return[Nt+"[-1]",St.pythonGenerator.ORDER_MEMBER];if(Rt==="GET_REMOVE")return[Nt+".pop()",St.pythonGenerator.ORDER_FUNCTION_CALL];if(Rt==="REMOVE")return Nt+`.pop()
`;break;case"FROM_START":if(At=St.pythonGenerator.getAdjustedInt(At,"AT"),Rt==="GET")return[Nt+"["+At+"]",St.pythonGenerator.ORDER_MEMBER];if(Rt==="GET_REMOVE")return[Nt+".pop("+At+")",St.pythonGenerator.ORDER_FUNCTION_CALL];if(Rt==="REMOVE")return Nt+".pop("+At+`)
`;break;case"FROM_END":if(At=St.pythonGenerator.getAdjustedInt(At,"AT",1,!0),Rt==="GET")return[Nt+"["+At+"]",St.pythonGenerator.ORDER_MEMBER];if(Rt==="GET_REMOVE")return[Nt+".pop("+At+")",St.pythonGenerator.ORDER_FUNCTION_CALL];if(Rt==="REMOVE")return Nt+".pop("+At+`)
`;break;case"RANDOM":if(St.pythonGenerator.definitions_.import_random="import random",Rt==="GET")return["random.choice("+Nt+")",St.pythonGenerator.ORDER_FUNCTION_CALL];if(Nt=St.pythonGenerator.provideFunction_("lists_remove_random_item",`
def ${St.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(myList):
  x = int(random.random() * len(myList))
  return myList.pop(x)
`)+"("+Nt+")",Rt==="GET_REMOVE")return[Nt,St.pythonGenerator.ORDER_FUNCTION_CALL];if(Rt==="REMOVE")return Nt+`
`}throw Error("Unhandled combination (lists_getIndex).")},St.pythonGenerator.lists_setIndex=function(At){let Rt=St.pythonGenerator.valueToCode(At,"LIST",St.pythonGenerator.ORDER_MEMBER)||"[]";const kt=At.getFieldValue("MODE")||"GET";var Nt=At.getFieldValue("WHERE")||"FROM_START";const Bt=St.pythonGenerator.valueToCode(At,"TO",St.pythonGenerator.ORDER_NONE)||"None";switch(Nt){case"FIRST":if(kt==="SET")return Rt+"[0] = "+Bt+`
`;if(kt==="INSERT")return Rt+".insert(0, "+Bt+`)
`;break;case"LAST":if(kt==="SET")return Rt+"[-1] = "+Bt+`
`;if(kt==="INSERT")return Rt+".append("+Bt+`)
`;break;case"FROM_START":if(At=St.pythonGenerator.getAdjustedInt(At,"AT"),kt==="SET")return Rt+"["+At+"] = "+Bt+`
`;if(kt==="INSERT")return Rt+".insert("+At+", "+Bt+`)
`;break;case"FROM_END":if(At=St.pythonGenerator.getAdjustedInt(At,"AT",1,!0),kt==="SET")return Rt+"["+At+"] = "+Bt+`
`;if(kt==="INSERT")return Rt+".insert("+At+", "+Bt+`)
`;break;case"RANDOM":if(St.pythonGenerator.definitions_.import_random="import random",Rt.match(/^\w+$/)?At="":(At=St.pythonGenerator.nameDB_.getDistinctName("tmp_list",ft.NameType$$module$build$src$core$names.VARIABLE),Nt=At+" = "+Rt+`
`,Rt=At,At=Nt),Nt=St.pythonGenerator.nameDB_.getDistinctName("tmp_x",ft.NameType$$module$build$src$core$names.VARIABLE),At+=Nt+" = int(random.random() * len("+Rt+`))
`,kt==="SET")return At+(Rt+"["+Nt+"] = "+Bt+`
`);if(kt==="INSERT")return At+(Rt+".insert("+Nt+", "+Bt+`)
`)}throw Error("Unhandled combination (lists_setIndex).")},St.pythonGenerator.lists_getSublist=function(At){const Rt=St.pythonGenerator.valueToCode(At,"LIST",St.pythonGenerator.ORDER_MEMBER)||"[]";var kt=At.getFieldValue("WHERE1");const Nt=At.getFieldValue("WHERE2");switch(kt){case"FROM_START":kt=St.pythonGenerator.getAdjustedInt(At,"AT1"),kt===0&&(kt="");break;case"FROM_END":kt=St.pythonGenerator.getAdjustedInt(At,"AT1",1,!0);break;case"FIRST":kt="";break;default:throw Error("Unhandled option (lists_getSublist)")}switch(Nt){case"FROM_START":At=St.pythonGenerator.getAdjustedInt(At,"AT2",1);break;case"FROM_END":At=St.pythonGenerator.getAdjustedInt(At,"AT2",0,!0),ft.module$build$src$core$utils$string.isNumber(String(At))?At===0&&(At=""):(St.pythonGenerator.definitions_.import_sys="import sys",At+=" or sys.maxsize");break;case"LAST":At="";break;default:throw Error("Unhandled option (lists_getSublist)")}return[Rt+"["+kt+" : "+At+"]",St.pythonGenerator.ORDER_MEMBER]},St.pythonGenerator.lists_sort=function(At){const Rt=St.pythonGenerator.valueToCode(At,"LIST",St.pythonGenerator.ORDER_NONE)||"[]",kt=At.getFieldValue("TYPE");return At=At.getFieldValue("DIRECTION")==="1"?"False":"True",[St.pythonGenerator.provideFunction_("lists_sort",`
def ${St.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(my_list, type, reverse):
  def try_float(s):
    try:
      return float(s)
    except:
      return 0
  key_funcs = {
    "NUMERIC": try_float,
    "TEXT": str,
    "IGNORE_CASE": lambda s: str(s).lower()
  }
  key_func = key_funcs[type]
  list_cpy = list(my_list)
  return sorted(list_cpy, key=key_func, reverse=reverse)
`)+"("+Rt+', "'+kt+'", '+At+")",St.pythonGenerator.ORDER_FUNCTION_CALL]},St.pythonGenerator.lists_split=function(At){var Rt=At.getFieldValue("MODE");if(Rt==="SPLIT")Rt=St.pythonGenerator.valueToCode(At,"INPUT",St.pythonGenerator.ORDER_MEMBER)||"''",At=St.pythonGenerator.valueToCode(At,"DELIM",St.pythonGenerator.ORDER_NONE),At=Rt+".split("+At+")";else if(Rt==="JOIN")Rt=St.pythonGenerator.valueToCode(At,"INPUT",St.pythonGenerator.ORDER_NONE)||"[]",At=(St.pythonGenerator.valueToCode(At,"DELIM",St.pythonGenerator.ORDER_MEMBER)||"''")+".join("+Rt+")";else throw Error("Unknown mode: "+Rt);return[At,St.pythonGenerator.ORDER_FUNCTION_CALL]},St.pythonGenerator.lists_reverse=function(At){return["list(reversed("+(St.pythonGenerator.valueToCode(At,"LIST",St.pythonGenerator.ORDER_NONE)||"[]")+"))",St.pythonGenerator.ORDER_FUNCTION_CALL]},St.pythonGenerator.colour_picker=function(At){return[St.pythonGenerator.quote_(At.getFieldValue("COLOUR")),St.pythonGenerator.ORDER_ATOMIC]},St.pythonGenerator.colour_random=function(At){return St.pythonGenerator.definitions_.import_random="import random",["'#%06x' % random.randint(0, 2**24 - 1)",St.pythonGenerator.ORDER_FUNCTION_CALL]},St.pythonGenerator.colour_rgb=function(At){const Rt=St.pythonGenerator.provideFunction_("colour_rgb",`
def ${St.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(r, g, b):
  r = round(min(100, max(0, r)) * 2.55)
  g = round(min(100, max(0, g)) * 2.55)
  b = round(min(100, max(0, b)) * 2.55)
  return '#%02x%02x%02x' % (r, g, b)
`),kt=St.pythonGenerator.valueToCode(At,"RED",St.pythonGenerator.ORDER_NONE)||0,Nt=St.pythonGenerator.valueToCode(At,"GREEN",St.pythonGenerator.ORDER_NONE)||0;return At=St.pythonGenerator.valueToCode(At,"BLUE",St.pythonGenerator.ORDER_NONE)||0,[Rt+"("+kt+", "+Nt+", "+At+")",St.pythonGenerator.ORDER_FUNCTION_CALL]},St.pythonGenerator.colour_blend=function(At){const Rt=St.pythonGenerator.provideFunction_("colour_blend",`
def ${St.pythonGenerator.FUNCTION_NAME_PLACEHOLDER_}(colour1, colour2, ratio):
  r1, r2 = int(colour1[1:3], 16), int(colour2[1:3], 16)
  g1, g2 = int(colour1[3:5], 16), int(colour2[3:5], 16)
  b1, b2 = int(colour1[5:7], 16), int(colour2[5:7], 16)
  ratio = min(1, max(0, ratio))
  r = round(r1 * (1 - ratio) + r2 * ratio)
  g = round(g1 * (1 - ratio) + g2 * ratio)
  b = round(b1 * (1 - ratio) + b2 * ratio)
  return '#%02x%02x%02x' % (r, g, b)
`),kt=St.pythonGenerator.valueToCode(At,"COLOUR1",St.pythonGenerator.ORDER_NONE)||"'#000000'",Nt=St.pythonGenerator.valueToCode(At,"COLOUR2",St.pythonGenerator.ORDER_NONE)||"'#000000'";return At=St.pythonGenerator.valueToCode(At,"RATIO",St.pythonGenerator.ORDER_NONE)||0,[Rt+"("+kt+", "+Nt+", "+At+")",St.pythonGenerator.ORDER_FUNCTION_CALL]},St.__namespace__=ft,St})}(python_compressed)),python_compressed.exports}(function(dt,$){(function(lt,ft){dt.exports=ft(requireCoreBrowser(),requirePython_compressed())})(commonjsGlobal,function(lt,ft){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return ft})})(python$1);var pythonExports=python$1.exports;function debounce$1(dt,$){var lt=null,ft=null,St=function(){for(var Ct=[],At=0;At<arguments.length;At++)Ct[At]=arguments[At];ft=function(){lt=null,dt.apply(void 0,Ct)},clearTimeout(lt),lt=setTimeout(ft,$)},Tt=function(){lt!==null&&(clearTimeout(lt),ft())};return[St,Tt]}var __assign$1=globalThis&&globalThis.__assign||function(){return __assign$1=Object.assign||function(dt){for(var $,lt=1,ft=arguments.length;lt<ft;lt++){$=arguments[lt];for(var St in $)Object.prototype.hasOwnProperty.call($,St)&&(dt[St]=$[St])}return dt},__assign$1.apply(this,arguments)};function importFromXml(dt,$,lt){try{return Blockly.Xml.domToWorkspace(Blockly.Xml.textToDom(dt),$),!0}catch(ft){return lt&&lt(ft),!1}}var useBlocklyWorkspace=function(dt){var $=dt.ref,lt=dt.initialXml,ft=dt.toolboxConfiguration,St=dt.workspaceConfiguration,Tt=dt.onWorkspaceChange,Ct=dt.onImportXmlError,At=dt.onInject,Rt=dt.onDispose,kt=React.useState(null),Nt=kt[0],Bt=kt[1],Ut=React.useState(lt),zt=Ut[0],Zt=Ut[1],ln=React.useState(!1),cn=ln[0],hn=ln[1],pn=React.useState(!1),dn=pn[0],gn=pn[1],vn=React.useRef(St);React.useEffect(function(){vn.current=St},[St]);var Tn=React.useRef(ft);React.useEffect(function(){Tn.current=ft,ft&&Nt&&Nt.updateToolbox(ft)},[ft,Nt]);var Cn=React.useRef(At),$n=React.useRef(Rt);React.useEffect(function(){Cn.current=At},[At]),React.useEffect(function(){$n.current=Rt},[Rt]);var xn=React.useCallback(function(Rn){Tt&&Tt(Rn)},[Tt]);return React.useEffect(function(){if($.current){var Rn=Blockly.inject($.current,__assign$1(__assign$1({},vn.current),{toolbox:Tn.current}));Bt(Rn),hn(!1),gn(!1),Cn.current&&Cn.current(Rn);var Pn=$n.current;return function(){Rn.dispose(),Pn&&Pn(Rn)}}},[$]),React.useEffect(function(){Nt&&!dn&&xn(Nt)},[xn,dn,Nt]),React.useEffect(function(){if(Nt!=null){var Rn=function(){xn(Nt)};return Nt.addChangeListener(Rn),function(){Nt.removeChangeListener(Rn)}}},[Nt,xn]),React.useEffect(function(){if(Nt!=null){var Rn=debounce$1(function(){var Wn=Blockly.Xml.domToText(Blockly.Xml.workspaceToDom(Nt));Wn!==zt&&Zt(Wn)},200),Pn=Rn[0],Nn=Rn[1];return Nt.addChangeListener(Pn),function(){Nt.removeChangeListener(Pn),Nn()}}},[Nt,zt]),React.useEffect(function(){if(zt&&Nt&&!cn){var Rn=importFromXml(zt,Nt,Ct);Rn||Zt(null),hn(!0)}},[zt,Nt,cn,Ct]),{workspace:Nt,xml:zt}},propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function dt(ft,St,Tt,Ct,At,Rt){if(Rt!==ReactPropTypesSecret){var kt=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw kt.name="Invariant Violation",kt}}dt.isRequired=dt;function $(){return dt}var lt={array:dt,bigint:dt,bool:dt,func:dt,number:dt,object:dt,string:dt,symbol:dt,any:dt,arrayOf:$,element:dt,elementType:dt,instanceOf:$,node:dt,objectOf:$,oneOf:$,oneOfType:$,shape:$,exact:$,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return lt.PropTypes=lt,lt};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports);PropTypes.string,PropTypes.object,PropTypes.object,PropTypes.string,PropTypes.func,PropTypes.func,PropTypes.func,PropTypes.func,PropTypes.func;const block_circle={name:"circle",block:{init:function(){this.appendDummyInput().appendField(new Blockly.FieldLabelSerializable("Go in circle of radius"),"Circular motion").appendField(new Blockly.FieldNumber(0,0),"radius_m").appendField("m"),this.appendDummyInput().appendField("at speed").appendField(new Blockly.FieldNumber(.2),"velocity").appendField("m/s"),this.appendDummyInput().appendField("for").appendField(new Blockly.FieldAngle(90),"angle_degrees").appendField("degrees,"),this.appendDummyInput().appendField(new Blockly.FieldDropdown([["counterclockwise","ccw"],["clockwise","cw"]]),"direction"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(dt,$)=>{var lt=dt.getFieldValue("radius_m"),ft=dt.getFieldValue("velocity"),St=dt.getFieldValue("angle_degrees"),Tt=dt.getFieldValue("direction"),Ct="circle("+lt+","+ft+","+St+","+Tt+`)
`;return Ct},javascriptGenerator:(dt,$)=>"simulator.dummy();"},block_start_linear_motion={name:"start_linear_motion",block:{init:function(){this.appendDummyInput().appendField("Start linear motion with speeds in"),this.appendDummyInput().appendField("x direction:").appendField(new Blockly.FieldNumber(0),"velocity_x_m").appendField("m/s"),this.appendDummyInput().appendField("y direction:").appendField(new Blockly.FieldNumber(0),"velocity_y_m").appendField("m/s"),this.appendDummyInput().appendField("z direction:").appendField(new Blockly.FieldNumber(0),"velocity_z_m").appendField("m/s"),this.appendDummyInput().appendField("yaw:").appendField(new Blockly.FieldAngle(90),"rate_yaw").appendField("/s"),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(dt,$)=>{var lt=dt.getFieldValue("velocity_x_m"),ft=dt.getFieldValue("velocity_y_m"),St=dt.getFieldValue("velocity_z_m"),Tt=dt.getFieldValue("rate_yaw"),Ct="start_linear_motion("+lt+","+ft+","+St+","+Tt+`)
`;return Ct},javascriptGenerator:(dt,$)=>"simulator.dummy();"},block_set_default_height={name:"set_default_height",block:{init:function(){this.appendDummyInput().appendField("set default height to").appendField(new Blockly.FieldNumber(0,0),"default_height").appendField("meters"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(dt,$)=>{var lt=dt.getFieldValue("default_height"),ft="set_default_height("+lt+`)
`;return ft},javascriptGenerator:(dt,$)=>"simulator.dummy();"},block_stop={name:"stop",block:{init:function(){this.appendDummyInput().appendField("stop and hover"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(0),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(dt,$)=>`stop_and_hover(cf)
`,javascriptGenerator:(dt,$)=>"simulator.dummy();"},block_go_to={name:"go_to",block:{init:function(){this.appendDummyInput().appendField("go to X:").appendField(new Blockly.FieldNumber(0),"x_pos").appendField("Y:").appendField(new Blockly.FieldNumber(0),"y_pos").appendField("Z:").appendField(new Blockly.FieldNumber(0),"z_pos").appendField("at").appendField(new Blockly.FieldNumber(0),"speed").appendField("m/s"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(dt,$)=>{var lt=dt.getFieldValue("x_pos"),ft=dt.getFieldValue("y_pos"),St=dt.getFieldValue("z_pos"),Tt=dt.getFieldValue("speed"),Ct="go_to(cf "+lt+","+ft+","+St+","+Tt+`)
`;return Ct},javascriptGenerator:(dt,$)=>{var lt=dt.getFieldValue("x_pos"),ft=dt.getFieldValue("y_pos"),St=dt.getFieldValue("z_pos"),Tt=dt.getFieldValue("speed");return`simulator.go_to_xyz(group_state, ${lt}, ${ft}, ${St}, ${Tt})`}},block_land={name:"land",block:{init:function(){this.appendDummyInput().appendField("land at height").appendField(new Blockly.FieldNumber(0),"height").appendField("over").appendField(new Blockly.FieldNumber(0),"duration").appendField("seconds"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(dt,$)=>{var lt=dt.getFieldValue("height"),ft=dt.getFieldValue("duration"),St="land(cf, "+lt+","+ft+`)
`;return St},javascriptGenerator:(dt,$)=>"simulator.dummy();"},block_move_angles={name:"move_angles",block:{init:function(){this.appendDummyInput().appendField("move towards"),this.appendDummyInput().appendField("horizontal angle").appendField(new Blockly.FieldAngle(90),"horizontal angle"),this.appendDummyInput().appendField("vertical angle").appendField(new Blockly.FieldAngle(90),"vertical angle"),this.appendDummyInput().appendField("distance").appendField(new Blockly.FieldNumber(0),"distance"),this.appendDummyInput().appendField("at").appendField(new Blockly.FieldNumber(0),"NAME").appendField("m/s"),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(dt,$)=>{var lt=dt.getFieldValue("horizontal angle"),ft=dt.getFieldValue("vertical angle"),St=dt.getFieldValue("distance"),Tt=dt.getFieldValue("NAME"),Ct="move_by_angles("+lt+","+ft+","+St+","+Tt+`)
`;return Ct},javascriptGenerator:(dt,$)=>"simulator.dummy()"},block_move_xyz={name:"move_xyz",block:{init:function(){this.appendDummyInput().appendField("move X").appendField(new Blockly.FieldNumber(0),"x").appendField("meters"),this.appendDummyInput().appendField("move Y").appendField(new Blockly.FieldNumber(0),"y").appendField("meters"),this.appendDummyInput().appendField("move Z").appendField(new Blockly.FieldNumber(0),"z").appendField("meters"),this.appendDummyInput().appendField("at").appendField(new Blockly.FieldNumber(0),"speed").appendField("m/s"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(dt,$)=>{var lt=dt.getFieldValue("x"),ft=dt.getFieldValue("y"),St=dt.getFieldValue("z"),Tt=dt.getFieldValue("speed"),Ct="goto_rel_at_speed(cf, "+lt+","+ft+","+St+","+Tt+`)
`;return Ct},javascriptGenerator:(dt,$)=>"simulator.dummy()"},block_move={name:"move",block:{init:function(){this.appendDummyInput().appendField("move").appendField(new Blockly.FieldDropdown([["up","up"],["down","down"],["left","left"],["right","right"],["forward","forward"],["backward","backward"]]),"direction").appendField(new Blockly.FieldNumber(0),"distance").appendField("meters for").appendField(new Blockly.FieldNumber(0),"duration").appendField("seconds"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(dt,$)=>{var lt=dt.getFieldValue("direction"),ft=dt.getFieldValue("distance"),St=dt.getFieldValue("duration"),Tt="move_direction(cf, "+lt+","+ft+","+St+`)
`;return Tt},javascriptGenerator:(dt,$)=>"simulator.dummy()"},block_takeoff={name:"takeoff",block:{init:function(){this.appendDummyInput().appendField("takeoff to").appendField(new Blockly.FieldNumber(0),"height").appendField("meters over").appendField(new Blockly.FieldNumber(0),"duration").appendField("seconds"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(dt,$)=>{var lt=dt.getFieldValue("height"),ft=dt.getFieldValue("duration"),St="takeoff(cf, "+lt+" ,"+ft+`)
`;return St},javascriptGenerator:(dt,$)=>"simulator.dummy();"},block_turn={name:"turn",block:{init:function(){this.appendDummyInput().appendField("turn").appendField(new Blockly.FieldDropdown([["right",`
									right
								`],["left","left"]]),"direction").appendField(new Blockly.FieldAngle(0),"degrees").appendField("at").appendField(new Blockly.FieldAngle(0),"rate").appendField("degrees/s"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(dt,$)=>{var lt=dt.getFieldValue("direction"),ft=dt.getFieldValue("degrees"),St=dt.getFieldValue("rate"),Tt="turn("+lt+","+ft+","+St+`)
`;return Tt},javascriptGenerator:(dt,$)=>"simulator.dummy();"},block_start_circle={name:"start_circle",block:{init:function(){this.appendDummyInput().appendField("start cricling").appendField(new Blockly.FieldNumber(0),"radius").appendField("meter radius").appendField(new Blockly.FieldDropdown([["right","circle_right"],["left","circle_left"]]),"direction"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(dt,$)=>{var lt=dt.getFieldValue("radius"),ft=dt.getFieldValue("direction"),St="start_circle("+lt+","+ft+`)
`;return St},javascriptGenerator:(dt,$)=>"simulator.dummy();"},block_start_move={name:"start_move",block:{init:function(){this.appendDummyInput().appendField("start moving").appendField(new Blockly.FieldDropdown([["up","up"],["down","down"],["left","left"],["right","right"],["forward","forward"],["backward","backward"]]),"direction").appendField("at").appendField(new Blockly.FieldNumber(0),"speed").appendField("m/s"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(dt,$)=>{var lt=dt.getFieldValue("direction"),ft=dt.getFieldValue("speed"),St="start_move("+lt+","+ft+`)
`;return St},javascriptGenerator:(dt,$)=>"simulator.dummy();"},block_start_turn={name:"start_turn",block:{init:function(){this.appendDummyInput().appendField("start turning").appendField(new Blockly.FieldDropdown([["right","right"],["left","left"]]),"direction").appendField("at").appendField(new Blockly.FieldAngle(0),"rate").appendField("degrees/s"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(dt,$)=>{var lt=dt.getFieldValue("direction"),ft=dt.getFieldValue("rate"),St="start_turn("+lt+","+ft+`)
`;return St},javascriptGenerator:(dt,$)=>"simulator.dummy();"},block_get_a_position={name:"get_a_position",block:{init:function(){this.appendDummyInput().appendField(new Blockly.FieldDropdown([["default","default"],["current","current"]]),"which").appendField(new Blockly.FieldDropdown([["x","x position"],["y","y position"],["z","z position"]]),"NAME").appendField("position"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(dt,$)=>{var lt=dt.getFieldValue("which"),ft=dt.getFieldValue("NAME"),St="get_a_position("+lt+","+ft+")";return St},javascriptGenerator:(dt,$)=>"simulator.dummy()"},block_set_default_speed={name:"set_default_speed",block:{init:function(){this.appendDummyInput().appendField("set default speed to").appendField(new Blockly.FieldNumber(0),"speed"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(dt,$)=>{var lt=dt.getFieldValue("speed"),ft="set_default_speed("+lt+`)
`;return ft},javascriptGenerator:(dt,$)=>"simulator.dummy();"},block_set_default_xy={name:"set_default_xy",block:{init:function(){this.appendDummyInput().appendField("set default").appendField(new Blockly.FieldDropdown([["x","x"],["y","y"]]),"xy").appendField("to").appendField(new Blockly.FieldNumber(0),"NAME"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},pythonGenerator:(dt,$)=>{var lt=dt.getFieldValue("xy"),ft=dt.getFieldValue("NAME"),St="set_default_xy("+lt+","+ft+`)
`;return St},javascriptGenerator:(dt,$)=>"simulator.dummy();"},CUSTOM_BLOCKS={block_go_to,block_land,block_move_angles,block_move_xyz,block_move,block_start_linear_motion,block_stop,block_takeoff,block_turn,block_circle,block_start_circle,block_start_move,block_start_turn,block_get_a_position,block_set_default_height,block_set_default_speed,block_set_default_xy};Object.values(CUSTOM_BLOCKS).forEach(dt=>{Blockly.Blocks[dt.name]=dt.block,pythonExports.pythonGenerator[dt.name]=$=>dt.pythonGenerator($,pythonExports.pythonGenerator),javascriptExports.javascriptGenerator[dt.name]=$=>dt.javascriptGenerator($,javascriptExports.javascriptGenerator)});const blockToToolbox=dt=>({kind:"block",type:dt.name}),blocklyToolboxConfiguration={kind:"categoryToolbox",contents:[{kind:"category",name:"Motion",contents:[blockToToolbox(CUSTOM_BLOCKS.block_go_to),blockToToolbox(CUSTOM_BLOCKS.block_land),blockToToolbox(CUSTOM_BLOCKS.block_move_angles),blockToToolbox(CUSTOM_BLOCKS.block_move_xyz),blockToToolbox(CUSTOM_BLOCKS.block_move),blockToToolbox(CUSTOM_BLOCKS.block_start_linear_motion),blockToToolbox(CUSTOM_BLOCKS.block_stop),blockToToolbox(CUSTOM_BLOCKS.block_takeoff),blockToToolbox(CUSTOM_BLOCKS.block_turn)]},{kind:"category",name:"Curves",contents:[blockToToolbox(CUSTOM_BLOCKS.block_circle),blockToToolbox(CUSTOM_BLOCKS.block_start_circle),blockToToolbox(CUSTOM_BLOCKS.block_start_move),blockToToolbox(CUSTOM_BLOCKS.block_start_turn)]},{kind:"category",name:"Config",contents:[blockToToolbox(CUSTOM_BLOCKS.block_get_a_position),blockToToolbox(CUSTOM_BLOCKS.block_set_default_height),blockToToolbox(CUSTOM_BLOCKS.block_set_default_speed),blockToToolbox(CUSTOM_BLOCKS.block_set_default_xy)]},{kind:"category",name:"Logic",colour:"#5C81A6",contents:[{kind:"block",type:"controls_if"},{kind:"block",type:"logic_compare"}]},{kind:"category",name:"Math",colour:"#5CA65C",contents:[{kind:"block",type:"math_round"},{kind:"block",type:"math_number"}]},{kind:"category",name:"Custom",colour:"#5CA699",contents:[{kind:"block",type:"new_boundary_function"},{kind:"block",type:"return"}]}]};function uuid$1(){const dt=["a","b","c","d","e","f","0","1","2","3","4","5","6","7","8","9"];let $=[];for(let lt=0;lt<36;lt++)lt===8||lt===13||lt===18||lt===23?$[lt]="-":$[lt]=dt[Math.ceil(Math.random()*dt.length-1)];return $.join("")}var uuid_1=uuid$1;const uuid$2=getDefaultExportFromCjs(uuid_1),createStoreImpl=dt=>{let $;const lt=new Set,ft=(Rt,kt)=>{const Nt=typeof Rt=="function"?Rt($):Rt;if(!Object.is(Nt,$)){const Bt=$;$=kt??typeof Nt!="object"?Nt:Object.assign({},$,Nt),lt.forEach(Ut=>Ut($,Bt))}},St=()=>$,At={setState:ft,getState:St,subscribe:Rt=>(lt.add(Rt),()=>lt.delete(Rt)),destroy:()=>{({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),lt.clear()}};return $=dt(ft,St,At),At},createStore$2=dt=>dt?createStoreImpl(dt):createStoreImpl;var withSelector={exports:{}},withSelector_production_min={},shim={exports:{}},useSyncExternalStoreShim_production_min={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e$1=reactExports;function h$7(dt,$){return dt===$&&(dt!==0||1/dt===1/$)||dt!==dt&&$!==$}var k$3=typeof Object.is=="function"?Object.is:h$7,l$7=e$1.useState,m$4=e$1.useEffect,n$6=e$1.useLayoutEffect,p$7=e$1.useDebugValue;function q$3(dt,$){var lt=$(),ft=l$7({inst:{value:lt,getSnapshot:$}}),St=ft[0].inst,Tt=ft[1];return n$6(function(){St.value=lt,St.getSnapshot=$,r$8(St)&&Tt({inst:St})},[dt,lt,$]),m$4(function(){return r$8(St)&&Tt({inst:St}),dt(function(){r$8(St)&&Tt({inst:St})})},[dt]),p$7(lt),lt}function r$8(dt){var $=dt.getSnapshot;dt=dt.value;try{var lt=$();return!k$3(dt,lt)}catch{return!0}}function t$4(dt,$){return $()}var u$7=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?t$4:q$3;useSyncExternalStoreShim_production_min.useSyncExternalStore=e$1.useSyncExternalStore!==void 0?e$1.useSyncExternalStore:u$7;shim.exports=useSyncExternalStoreShim_production_min;var shimExports=shim.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h$6=reactExports,n$5=shimExports;function p$6(dt,$){return dt===$&&(dt!==0||1/dt===1/$)||dt!==dt&&$!==$}var q$2=typeof Object.is=="function"?Object.is:p$6,r$7=n$5.useSyncExternalStore,t$3=h$6.useRef,u$6=h$6.useEffect,v$5=h$6.useMemo,w$5=h$6.useDebugValue;withSelector_production_min.useSyncExternalStoreWithSelector=function(dt,$,lt,ft,St){var Tt=t$3(null);if(Tt.current===null){var Ct={hasValue:!1,value:null};Tt.current=Ct}else Ct=Tt.current;Tt=v$5(function(){function Rt(zt){if(!kt){if(kt=!0,Nt=zt,zt=ft(zt),St!==void 0&&Ct.hasValue){var Zt=Ct.value;if(St(Zt,zt))return Bt=Zt}return Bt=zt}if(Zt=Bt,q$2(Nt,zt))return Zt;var ln=ft(zt);return St!==void 0&&St(Zt,ln)?Zt:(Nt=zt,Bt=ln)}var kt=!1,Nt,Bt,Ut=lt===void 0?null:lt;return[function(){return Rt($())},Ut===null?void 0:function(){return Rt(Ut())}]},[$,lt,ft,St]);var At=r$7(dt,Tt[0],Tt[1]);return u$6(function(){Ct.hasValue=!0,Ct.value=At},[At]),w$5(At),At};withSelector.exports=withSelector_production_min;var withSelectorExports=withSelector.exports;const useSyncExternalStoreExports=getDefaultExportFromCjs(withSelectorExports),{useSyncExternalStoreWithSelector}=useSyncExternalStoreExports;function useStore$1(dt,$=dt.getState,lt){const ft=useSyncExternalStoreWithSelector(dt.subscribe,dt.getState,dt.getServerState||dt.getState,$,lt);return reactExports.useDebugValue(ft),ft}const createImpl=dt=>{({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&typeof dt!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const $=typeof dt=="function"?createStore$2(dt):dt,lt=(ft,St)=>useStore$1($,ft,St);return Object.assign(lt,$),lt},create$2=dt=>dt?createImpl(dt):createImpl,subscribeWithSelectorImpl=dt=>($,lt,ft)=>{const St=ft.subscribe;return ft.subscribe=(Ct,At,Rt)=>{let kt=Ct;if(At){const Nt=(Rt==null?void 0:Rt.equalityFn)||Object.is;let Bt=Ct(ft.getState());kt=Ut=>{const zt=Ct(Ut);if(!Nt(Bt,zt)){const Zt=Bt;At(Bt=zt,Zt)}},Rt!=null&&Rt.fireImmediately&&At(Bt,Bt)}return St(kt)},dt($,lt,ft)},subscribeWithSelector=subscribeWithSelectorImpl;function createJSONStorage(dt){let $;try{$=dt()}catch{return}return{getItem:ft=>{var St;const Tt=At=>At===null?null:JSON.parse(At),Ct=(St=$.getItem(ft))!=null?St:null;return Ct instanceof Promise?Ct.then(Tt):Tt(Ct)},setItem:(ft,St)=>$.setItem(ft,JSON.stringify(St)),removeItem:ft=>$.removeItem(ft)}}const toThenable=dt=>$=>{try{const lt=dt($);return lt instanceof Promise?lt:{then(ft){return toThenable(ft)(lt)},catch(ft){return this}}}catch(lt){return{then(ft){return this},catch(ft){return toThenable(ft)(lt)}}}},oldImpl=(dt,$)=>(lt,ft,St)=>{let Tt={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:cn=>cn,version:0,merge:(cn,hn)=>({...hn,...cn}),...$},Ct=!1;const At=new Set,Rt=new Set;let kt;try{kt=Tt.getStorage()}catch{}if(!kt)return dt((...cn)=>{console.warn(`[zustand persist middleware] Unable to update item '${Tt.name}', the given storage is currently unavailable.`),lt(...cn)},ft,St);const Nt=toThenable(Tt.serialize),Bt=()=>{const cn=Tt.partialize({...ft()});let hn;const pn=Nt({state:cn,version:Tt.version}).then(dn=>kt.setItem(Tt.name,dn)).catch(dn=>{hn=dn});if(hn)throw hn;return pn},Ut=St.setState;St.setState=(cn,hn)=>{Ut(cn,hn),Bt()};const zt=dt((...cn)=>{lt(...cn),Bt()},ft,St);let Zt;const ln=()=>{var cn;if(!kt)return;Ct=!1,At.forEach(pn=>pn(ft()));const hn=((cn=Tt.onRehydrateStorage)==null?void 0:cn.call(Tt,ft()))||void 0;return toThenable(kt.getItem.bind(kt))(Tt.name).then(pn=>{if(pn)return Tt.deserialize(pn)}).then(pn=>{if(pn)if(typeof pn.version=="number"&&pn.version!==Tt.version){if(Tt.migrate)return Tt.migrate(pn.state,pn.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return pn.state}).then(pn=>{var dn;return Zt=Tt.merge(pn,(dn=ft())!=null?dn:zt),lt(Zt,!0),Bt()}).then(()=>{hn==null||hn(Zt,void 0),Ct=!0,Rt.forEach(pn=>pn(Zt))}).catch(pn=>{hn==null||hn(void 0,pn)})};return St.persist={setOptions:cn=>{Tt={...Tt,...cn},cn.getStorage&&(kt=cn.getStorage())},clearStorage:()=>{kt==null||kt.removeItem(Tt.name)},getOptions:()=>Tt,rehydrate:()=>ln(),hasHydrated:()=>Ct,onHydrate:cn=>(At.add(cn),()=>{At.delete(cn)}),onFinishHydration:cn=>(Rt.add(cn),()=>{Rt.delete(cn)})},ln(),Zt||zt},newImpl=(dt,$)=>(lt,ft,St)=>{let Tt={storage:createJSONStorage(()=>localStorage),partialize:ln=>ln,version:0,merge:(ln,cn)=>({...cn,...ln}),...$},Ct=!1;const At=new Set,Rt=new Set;let kt=Tt.storage;if(!kt)return dt((...ln)=>{console.warn(`[zustand persist middleware] Unable to update item '${Tt.name}', the given storage is currently unavailable.`),lt(...ln)},ft,St);const Nt=()=>{const ln=Tt.partialize({...ft()});return kt.setItem(Tt.name,{state:ln,version:Tt.version})},Bt=St.setState;St.setState=(ln,cn)=>{Bt(ln,cn),Nt()};const Ut=dt((...ln)=>{lt(...ln),Nt()},ft,St);let zt;const Zt=()=>{var ln;if(!kt)return;Ct=!1,At.forEach(hn=>hn(ft()));const cn=((ln=Tt.onRehydrateStorage)==null?void 0:ln.call(Tt,ft()))||void 0;return toThenable(kt.getItem.bind(kt))(Tt.name).then(hn=>{if(hn)if(typeof hn.version=="number"&&hn.version!==Tt.version){if(Tt.migrate)return Tt.migrate(hn.state,hn.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return hn.state}).then(hn=>{var pn;return zt=Tt.merge(hn,(pn=ft())!=null?pn:Ut),lt(zt,!0),Nt()}).then(()=>{cn==null||cn(zt,void 0),Ct=!0,Rt.forEach(hn=>hn(zt))}).catch(hn=>{cn==null||cn(void 0,hn)})};return St.persist={setOptions:ln=>{Tt={...Tt,...ln},ln.storage&&(kt=ln.storage)},clearStorage:()=>{kt==null||kt.removeItem(Tt.name)},getOptions:()=>Tt,rehydrate:()=>Zt(),hasHydrated:()=>Ct,onHydrate:ln=>(At.add(ln),()=>{At.delete(ln)}),onFinishHydration:ln=>(Rt.add(ln),()=>{Rt.delete(ln)})},Zt(),zt||Ut},persistImpl=(dt,$)=>"getStorage"in $||"serialize"in $||"deserialize"in $?(({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),oldImpl(dt,$)):newImpl(dt,$),persist=persistImpl;function n$4(dt){for(var $=arguments.length,lt=Array($>1?$-1:0),ft=1;ft<$;ft++)lt[ft-1]=arguments[ft];throw Error("[Immer] minified error nr: "+dt+(lt.length?" "+lt.map(function(St){return"'"+St+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function r$6(dt){return!!dt&&!!dt[Q$3]}function t$2(dt){var $;return!!dt&&(function(lt){if(!lt||typeof lt!="object")return!1;var ft=Object.getPrototypeOf(lt);if(ft===null)return!0;var St=Object.hasOwnProperty.call(ft,"constructor")&&ft.constructor;return St===Object||typeof St=="function"&&Function.toString.call(St)===Z$1}(dt)||Array.isArray(dt)||!!dt[L$2]||!!(!(($=dt.constructor)===null||$===void 0)&&$[L$2])||s$3(dt)||v$4(dt))}function i$6(dt,$,lt){lt===void 0&&(lt=!1),o$4(dt)===0?(lt?Object.keys:nn$1)(dt).forEach(function(ft){lt&&typeof ft=="symbol"||$(ft,dt[ft],dt)}):dt.forEach(function(ft,St){return $(St,ft,dt)})}function o$4(dt){var $=dt[Q$3];return $?$.i>3?$.i-4:$.i:Array.isArray(dt)?1:s$3(dt)?2:v$4(dt)?3:0}function u$5(dt,$){return o$4(dt)===2?dt.has($):Object.prototype.hasOwnProperty.call(dt,$)}function a$3(dt,$){return o$4(dt)===2?dt.get($):dt[$]}function f$5(dt,$,lt){var ft=o$4(dt);ft===2?dt.set($,lt):ft===3?dt.add(lt):dt[$]=lt}function c$6(dt,$){return dt===$?dt!==0||1/dt==1/$:dt!=dt&&$!=$}function s$3(dt){return X$1&&dt instanceof Map}function v$4(dt){return q$1&&dt instanceof Set}function p$5(dt){return dt.o||dt.t}function l$6(dt){if(Array.isArray(dt))return Array.prototype.slice.call(dt);var $=rn$1(dt);delete $[Q$3];for(var lt=nn$1($),ft=0;ft<lt.length;ft++){var St=lt[ft],Tt=$[St];Tt.writable===!1&&(Tt.writable=!0,Tt.configurable=!0),(Tt.get||Tt.set)&&($[St]={configurable:!0,writable:!0,enumerable:Tt.enumerable,value:dt[St]})}return Object.create(Object.getPrototypeOf(dt),$)}function d$6(dt,$){return $===void 0&&($=!1),y$5(dt)||r$6(dt)||!t$2(dt)||(o$4(dt)>1&&(dt.set=dt.add=dt.clear=dt.delete=h$5),Object.freeze(dt),$&&i$6(dt,function(lt,ft){return d$6(ft,!0)},!0)),dt}function h$5(){n$4(2)}function y$5(dt){return dt==null||typeof dt!="object"||Object.isFrozen(dt)}function b$5(dt){var $=tn[dt];return $||n$4(18,dt),$}function _$1(){return U$1}function j$2(dt,$){$&&(b$5("Patches"),dt.u=[],dt.s=[],dt.v=$)}function O$3(dt){g$3(dt),dt.p.forEach(S$2),dt.p=null}function g$3(dt){dt===U$1&&(U$1=dt.l)}function w$4(dt){return U$1={p:[],l:U$1,h:dt,m:!0,_:0}}function S$2(dt){var $=dt[Q$3];$.i===0||$.i===1?$.j():$.O=!0}function P$2(dt,$){$._=$.p.length;var lt=$.p[0],ft=dt!==void 0&&dt!==lt;return $.h.g||b$5("ES5").S($,dt,ft),ft?(lt[Q$3].P&&(O$3($),n$4(4)),t$2(dt)&&(dt=M$1($,dt),$.l||x$4($,dt)),$.u&&b$5("Patches").M(lt[Q$3].t,dt,$.u,$.s)):dt=M$1($,lt,[]),O$3($),$.u&&$.v($.u,$.s),dt!==H$3?dt:void 0}function M$1(dt,$,lt){if(y$5($))return $;var ft=$[Q$3];if(!ft)return i$6($,function(At,Rt){return A$2(dt,ft,$,At,Rt,lt)},!0),$;if(ft.A!==dt)return $;if(!ft.P)return x$4(dt,ft.t,!0),ft.t;if(!ft.I){ft.I=!0,ft.A._--;var St=ft.i===4||ft.i===5?ft.o=l$6(ft.k):ft.o,Tt=St,Ct=!1;ft.i===3&&(Tt=new Set(St),St.clear(),Ct=!0),i$6(Tt,function(At,Rt){return A$2(dt,ft,St,At,Rt,lt,Ct)}),x$4(dt,St,!1),lt&&dt.u&&b$5("Patches").N(ft,lt,dt.u,dt.s)}return ft.o}function A$2(dt,$,lt,ft,St,Tt,Ct){if(r$6(St)){var At=M$1(dt,St,Tt&&$&&$.i!==3&&!u$5($.R,ft)?Tt.concat(ft):void 0);if(f$5(lt,ft,At),!r$6(At))return;dt.m=!1}else Ct&&lt.add(St);if(t$2(St)&&!y$5(St)){if(!dt.h.D&&dt._<1)return;M$1(dt,St),$&&$.A.l||x$4(dt,St)}}function x$4(dt,$,lt){lt===void 0&&(lt=!1),!dt.l&&dt.h.D&&dt.m&&d$6($,lt)}function z$3(dt,$){var lt=dt[Q$3];return(lt?p$5(lt):dt)[$]}function I$2(dt,$){if($ in dt)for(var lt=Object.getPrototypeOf(dt);lt;){var ft=Object.getOwnPropertyDescriptor(lt,$);if(ft)return ft;lt=Object.getPrototypeOf(lt)}}function k$2(dt){dt.P||(dt.P=!0,dt.l&&k$2(dt.l))}function E$5(dt){dt.o||(dt.o=l$6(dt.t))}function N$1(dt,$,lt){var ft=s$3($)?b$5("MapSet").F($,lt):v$4($)?b$5("MapSet").T($,lt):dt.g?function(St,Tt){var Ct=Array.isArray(St),At={i:Ct?1:0,A:Tt?Tt.A:_$1(),P:!1,I:!1,R:{},l:Tt,t:St,k:null,o:null,j:null,C:!1},Rt=At,kt=en;Ct&&(Rt=[At],kt=on$1);var Nt=Proxy.revocable(Rt,kt),Bt=Nt.revoke,Ut=Nt.proxy;return At.k=Ut,At.j=Bt,Ut}($,lt):b$5("ES5").J($,lt);return(lt?lt.A:_$1()).p.push(ft),ft}function R$2(dt){return r$6(dt)||n$4(22,dt),function $(lt){if(!t$2(lt))return lt;var ft,St=lt[Q$3],Tt=o$4(lt);if(St){if(!St.P&&(St.i<4||!b$5("ES5").K(St)))return St.t;St.I=!0,ft=D$4(lt,Tt),St.I=!1}else ft=D$4(lt,Tt);return i$6(ft,function(Ct,At){St&&a$3(St.t,Ct)===At||f$5(ft,Ct,$(At))}),Tt===3?new Set(ft):ft}(dt)}function D$4(dt,$){switch($){case 2:return new Map(dt);case 3:return Array.from(dt)}return l$6(dt)}var G,U$1,W$3=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",X$1=typeof Map<"u",q$1=typeof Set<"u",B$1=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",H$3=W$3?Symbol.for("immer-nothing"):((G={})["immer-nothing"]=!0,G),L$2=W$3?Symbol.for("immer-draftable"):"__$immer_draftable",Q$3=W$3?Symbol.for("immer-state"):"__$immer_state",Z$1=""+Object.prototype.constructor,nn$1=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(dt){return Object.getOwnPropertyNames(dt).concat(Object.getOwnPropertySymbols(dt))}:Object.getOwnPropertyNames,rn$1=Object.getOwnPropertyDescriptors||function(dt){var $={};return nn$1(dt).forEach(function(lt){$[lt]=Object.getOwnPropertyDescriptor(dt,lt)}),$},tn={},en={get:function(dt,$){if($===Q$3)return dt;var lt=p$5(dt);if(!u$5(lt,$))return function(St,Tt,Ct){var At,Rt=I$2(Tt,Ct);return Rt?"value"in Rt?Rt.value:(At=Rt.get)===null||At===void 0?void 0:At.call(St.k):void 0}(dt,lt,$);var ft=lt[$];return dt.I||!t$2(ft)?ft:ft===z$3(dt.t,$)?(E$5(dt),dt.o[$]=N$1(dt.A.h,ft,dt)):ft},has:function(dt,$){return $ in p$5(dt)},ownKeys:function(dt){return Reflect.ownKeys(p$5(dt))},set:function(dt,$,lt){var ft=I$2(p$5(dt),$);if(ft!=null&&ft.set)return ft.set.call(dt.k,lt),!0;if(!dt.P){var St=z$3(p$5(dt),$),Tt=St==null?void 0:St[Q$3];if(Tt&&Tt.t===lt)return dt.o[$]=lt,dt.R[$]=!1,!0;if(c$6(lt,St)&&(lt!==void 0||u$5(dt.t,$)))return!0;E$5(dt),k$2(dt)}return dt.o[$]===lt&&(lt!==void 0||$ in dt.o)||Number.isNaN(lt)&&Number.isNaN(dt.o[$])||(dt.o[$]=lt,dt.R[$]=!0),!0},deleteProperty:function(dt,$){return z$3(dt.t,$)!==void 0||$ in dt.t?(dt.R[$]=!1,E$5(dt),k$2(dt)):delete dt.R[$],dt.o&&delete dt.o[$],!0},getOwnPropertyDescriptor:function(dt,$){var lt=p$5(dt),ft=Reflect.getOwnPropertyDescriptor(lt,$);return ft&&{writable:!0,configurable:dt.i!==1||$!=="length",enumerable:ft.enumerable,value:lt[$]}},defineProperty:function(){n$4(11)},getPrototypeOf:function(dt){return Object.getPrototypeOf(dt.t)},setPrototypeOf:function(){n$4(12)}},on$1={};i$6(en,function(dt,$){on$1[dt]=function(){return arguments[0]=arguments[0][0],$.apply(this,arguments)}}),on$1.deleteProperty=function(dt,$){return on$1.set.call(this,dt,$,void 0)},on$1.set=function(dt,$,lt){return en.set.call(this,dt[0],$,lt,dt[0])};var un=function(){function dt(lt){var ft=this;this.g=B$1,this.D=!0,this.produce=function(St,Tt,Ct){if(typeof St=="function"&&typeof Tt!="function"){var At=Tt;Tt=St;var Rt=ft;return function(ln){var cn=this;ln===void 0&&(ln=At);for(var hn=arguments.length,pn=Array(hn>1?hn-1:0),dn=1;dn<hn;dn++)pn[dn-1]=arguments[dn];return Rt.produce(ln,function(gn){var vn;return(vn=Tt).call.apply(vn,[cn,gn].concat(pn))})}}var kt;if(typeof Tt!="function"&&n$4(6),Ct!==void 0&&typeof Ct!="function"&&n$4(7),t$2(St)){var Nt=w$4(ft),Bt=N$1(ft,St,void 0),Ut=!0;try{kt=Tt(Bt),Ut=!1}finally{Ut?O$3(Nt):g$3(Nt)}return typeof Promise<"u"&&kt instanceof Promise?kt.then(function(ln){return j$2(Nt,Ct),P$2(ln,Nt)},function(ln){throw O$3(Nt),ln}):(j$2(Nt,Ct),P$2(kt,Nt))}if(!St||typeof St!="object"){if((kt=Tt(St))===void 0&&(kt=St),kt===H$3&&(kt=void 0),ft.D&&d$6(kt,!0),Ct){var zt=[],Zt=[];b$5("Patches").M(St,kt,zt,Zt),Ct(zt,Zt)}return kt}n$4(21,St)},this.produceWithPatches=function(St,Tt){if(typeof St=="function")return function(kt){for(var Nt=arguments.length,Bt=Array(Nt>1?Nt-1:0),Ut=1;Ut<Nt;Ut++)Bt[Ut-1]=arguments[Ut];return ft.produceWithPatches(kt,function(zt){return St.apply(void 0,[zt].concat(Bt))})};var Ct,At,Rt=ft.produce(St,Tt,function(kt,Nt){Ct=kt,At=Nt});return typeof Promise<"u"&&Rt instanceof Promise?Rt.then(function(kt){return[kt,Ct,At]}):[Rt,Ct,At]},typeof(lt==null?void 0:lt.useProxies)=="boolean"&&this.setUseProxies(lt.useProxies),typeof(lt==null?void 0:lt.autoFreeze)=="boolean"&&this.setAutoFreeze(lt.autoFreeze)}var $=dt.prototype;return $.createDraft=function(lt){t$2(lt)||n$4(8),r$6(lt)&&(lt=R$2(lt));var ft=w$4(this),St=N$1(this,lt,void 0);return St[Q$3].C=!0,g$3(ft),St},$.finishDraft=function(lt,ft){var St=lt&&lt[Q$3],Tt=St.A;return j$2(Tt,ft),P$2(void 0,Tt)},$.setAutoFreeze=function(lt){this.D=lt},$.setUseProxies=function(lt){lt&&!B$1&&n$4(20),this.g=lt},$.applyPatches=function(lt,ft){var St;for(St=ft.length-1;St>=0;St--){var Tt=ft[St];if(Tt.path.length===0&&Tt.op==="replace"){lt=Tt.value;break}}St>-1&&(ft=ft.slice(St+1));var Ct=b$5("Patches").$;return r$6(lt)?Ct(lt,ft):this.produce(lt,function(At){return Ct(At,ft)})},dt}(),an=new un,fn=an.produce;an.produceWithPatches.bind(an);an.setAutoFreeze.bind(an);an.setUseProxies.bind(an);an.applyPatches.bind(an);an.createDraft.bind(an);an.finishDraft.bind(an);const immerImpl=dt=>($,lt,ft)=>(ft.setState=(St,Tt,...Ct)=>{const At=typeof St=="function"?fn(St):St;return $(At,Tt,...Ct)},dt(ft.setState,lt,ft)),immer=immerImpl,ROBART_VERSION=.1,saveToFile=(dt,$)=>{const lt=document.createElement("a"),ft=new Blob([$],{type:"text/plain"});lt.href=URL.createObjectURL(ft),lt.download=dt,document.body.appendChild(lt),lt.click(),document.body.removeChild(lt)},trajLine=42,execBlocksLine=80;var launcherNodeLine=27;const exportToROS=async(dt,$)=>{var lt=launcherNode.split(`
`),ft=0;const St=dt.timelineState.groups;for(let Zt in St){const ln=dt.timelineState.groups[Zt],cn=Object.values(ln.robots);var Tt=[];if(cn.length===0)continue;ft+=1;for(let dn in cn)console.log(cn,dn),cn[dn]!=null&&(Tt.push(dn),console.log("Robot Indices",Tt));var Ct="",At="";if(Object.keys(ln.items).length===0){console.log("No items"+ln);continue}else console.log(ln.items);console.log("Items: "+ln.items);for(let dn in ln.items){console.log(dn);const gn=ln.items[dn],vn=gn.startTime,Tn=dt.blocks[gn.blockId].python;if(gn.isTrajectory)Ct+="        trajectories.append("+Tn+")",At+="        start_time = ${startTime}\n",At+=`        self.wait_until(start_time)
`,At+=`        for cf in self.crazyflies:
`,At+="            cf.startTrajectory(${trajCounter}, 0, 1)\n",At+="        self.wait_until(start_time + self.trajectories[${trajCounter}].duration\n";else{At+=`        start_time = ${vn}
`,At+=`        total_duration = 1
`,At+=`        self.wait_until(start_time)
`;for(var Rt=Tn.split(`
`),kt=0;kt<Rt.length-1;kt++)At+=`        for cf in self.crazyflies:
`,At+=`            block_duration = ${Rt[kt]}
`,At+=`        self.wait(block_duration)
`;At+=`        self.wait_until(start_time + total_duration)
`}}var Nt=workerNodeTemplate.split(`
`);Nt.splice(trajLine,0,Ct),Nt.splice(execBlocksLine,0,At),console.log(Tt);var Bt=`    import ${Zt}_node
`;Bt=`    cfs = []
`;for(let dn in Tt)Bt+=`    cfs.append(crazyflies[${dn}])
`;Bt+=`    description.append(${Zt}_node.worker_node(cfs, counter, ${ft}))
`,lt.splice(launcherNodeLine,0,Bt),launcherNodeLine+=2;const hn=document.createElement("a"),pn=new Blob([Nt.join(`
`)],{type:"text/plain"});hn.href=URL.createObjectURL(pn),hn.download=`${Zt}_node.py`,document.body.appendChild(hn),hn.click(),document.body.removeChild(hn)}const Ut=document.createElement("a"),zt=new Blob([lt.join(`
`)],{type:"text/plain"});Ut.href=URL.createObjectURL(zt),Ut.download="launch_nodes.py",document.body.appendChild(Ut),Ut.click(),document.body.removeChild(Ut)},workerNodeTemplate=`import rclpy
from rclpy.node import Node
from std_msgs.msg import int32
from crazyflie_py import generate_trajectory
import numpy as np

Hz = 100

class worker_node(Node):

    def __init__(self, crazyflies, id=0, num_nodes=1):
        """
        id: a unique id between 0 and num_nodes corresponding to the thread number of this worker
        num_nodes: number of nodes (threads) in total
        """
        self.id = id
        self.num_nodes = num_nodes
        self.crazyflies = crazyflies

        self.execution_ready_subscription(
            int32,
            'ready',
            self.ready_callback,
            num_nodes + 1
        )
        self.execution_ready_publisher(
            int32,
            'ready',
            num_nodes + 1
        )
        self.timer = self.create_timer(1/Hz, self.timer_callback)
        self.ready_ids = set()
        self.executing = False
        self.running = False
    
    def compute_trajectories():
        """
        Inject Trajectory computation code here...
        """
        trajectories = []
        
        #TODO insert trajectories here...

        return trajectories

    def upload_trajectories(crazyflies, trajectories):
        '''
            Upload trajectories to crazyflies one by one
        '''

        # TODO: Currently doesn't support overlapping crazyflies as we will overwrite trajectories...
        for i, traj in enumerate(trajectories):
            for cf in crazyflies:
                cf.uploadTrajectory(traj, i, 0)

    def begin(self):
        """
            Prepare for execution. Pre-compute trajectories and upload them to crazyflies
        """
        trajectories = self.compute_trajectories()
        self.upload_trajectories(trajectories)
        self.execution_ready_publisher.publish(self.id)

    def execute_blocks(self):
        """
        Must be injected into...

        Typical format should be:
        
        start_time = 0.0
        duration = 3.0
        self.wait_until(start_time)
        for cf in self.crazyflies:
            cf.takeoff(1.0, duration)
        self.wait_until(start_time+duration)

        where start_time, duration, and in the inner portion of the for loop are provided.
        """
        # BLOCKS...
        pass

    def ready_callback(self, msg):
        self.ready_ids.add(msg)
    
    def timer_callback(self):
        if not self.running:
            self.begin()
            self.running = True
        if len(self.ready_ids) == self.num_nodes and not self.executing:
            self.running = True
            self.start_time = self.node.get_clock().now().time()
            self.execute_blocks()
            self.destory_node()

    def wait_until(self, end_time):
        while self.get_clock().now() < end_time:
            rclpy.spin_once(self.node, timeout_sec=0)
    
    def wait(self, time):
        end_time = self.get_clock.now() + time
        self.wait_until(end_time)
`,launcherNode=`import yaml
from ament_index_python.packages import get_package_share_directory
from launch import LaunchDescription
from launch_ros.actions import Node
from crazyflie_py import CrazySwarm

#TODO: Inject imports to correctly import nodes
# import test_worker


def generate_launch_description():
    # TODO: Change package name to correct description
    node_config_file = get_package_share_directory('my_package'), 'config', 'node_config.yaml'
    with open(node_config_file, 'r') as f:
        node_configs = yaml.load(f)
    
    # Initialize swarm
    swarm = CrazySwarm()
    all_crazyflies = swarm.allcfs.crazyflies

    # Construct Launch Description from yaml files
    # One node per line in the timeline, linked to a worker node described in the yaml file
    node_configs = node_configs['nodes']
    counter = 0
    description = []
    #TODO Inject append here...
    
    # description.append(test_worker.worker_node(all_crazyflies, counter, len(node_configs)))
    counter += 1
    
    

    # Launch all nodes
    return LaunchDescription(description)`,saveProjectToFile=(dt,$=void 0)=>{const lt=JSON.stringify(dt);$=$??dt.projectName.replaceAll(" ","")+".robart",saveToFile($,lt)},loadProjectFromFile=dt=>JSON.parse(dt),exportROS=(dt,$)=>{exportToROS(dt)};/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const REVISION="150",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,CullFaceFrontBack=3,BasicShadowMap=0,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,TwoPassDoubleSide=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,CineonToneMapping=3,ACESFilmicToneMapping=4,CustomToneMapping=5,UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,CubeUVReflectionMapping=306,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipMapNearestFilter=1004,NearestMipmapLinearFilter=1005,NearestMipMapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipMapNearestFilter=1007,LinearMipmapLinearFilter=1008,LinearMipMapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedInt248Type=1020,AlphaFormat=1021,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,RED_RGTC1_Format=36283,SIGNED_RED_RGTC1_Format=36284,RED_GREEN_RGTC2_Format=36285,SIGNED_RED_GREEN_RGTC2_Format=36286,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,LinearEncoding=3e3,sRGBEncoding=3001,BasicDepthPacking=3200,RGBADepthPacking=3201,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,NoColorSpace="",SRGBColorSpace="srgb",LinearSRGBColorSpace="srgb-linear",DisplayP3ColorSpace="display-p3",ZeroStencilOp=0,KeepStencilOp=7680,ReplaceStencilOp=7681,IncrementStencilOp=7682,DecrementStencilOp=7683,IncrementWrapStencilOp=34055,DecrementWrapStencilOp=34056,InvertStencilOp=5386,NeverStencilFunc=512,LessStencilFunc=513,EqualStencilFunc=514,LessEqualStencilFunc=515,GreaterStencilFunc=516,NotEqualStencilFunc=517,GreaterEqualStencilFunc=518,AlwaysStencilFunc=519,StaticDrawUsage=35044,DynamicDrawUsage=35048,StreamDrawUsage=35040,StaticReadUsage=35045,DynamicReadUsage=35049,StreamReadUsage=35041,StaticCopyUsage=35046,DynamicCopyUsage=35050,StreamCopyUsage=35042,GLSL1="100",GLSL3="300 es",_SRGBAFormat=1035;class EventDispatcher{addEventListener($,lt){this._listeners===void 0&&(this._listeners={});const ft=this._listeners;ft[$]===void 0&&(ft[$]=[]),ft[$].indexOf(lt)===-1&&ft[$].push(lt)}hasEventListener($,lt){if(this._listeners===void 0)return!1;const ft=this._listeners;return ft[$]!==void 0&&ft[$].indexOf(lt)!==-1}removeEventListener($,lt){if(this._listeners===void 0)return;const St=this._listeners[$];if(St!==void 0){const Tt=St.indexOf(lt);Tt!==-1&&St.splice(Tt,1)}}dispatchEvent($){if(this._listeners===void 0)return;const ft=this._listeners[$.type];if(ft!==void 0){$.target=this;const St=ft.slice(0);for(let Tt=0,Ct=St.length;Tt<Ct;Tt++)St[Tt].call(this,$);$.target=null}}}const _lut=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let _seed=1234567;const DEG2RAD=Math.PI/180,RAD2DEG=180/Math.PI;function generateUUID(){const dt=Math.random()*4294967295|0,$=Math.random()*4294967295|0,lt=Math.random()*4294967295|0,ft=Math.random()*4294967295|0;return(_lut[dt&255]+_lut[dt>>8&255]+_lut[dt>>16&255]+_lut[dt>>24&255]+"-"+_lut[$&255]+_lut[$>>8&255]+"-"+_lut[$>>16&15|64]+_lut[$>>24&255]+"-"+_lut[lt&63|128]+_lut[lt>>8&255]+"-"+_lut[lt>>16&255]+_lut[lt>>24&255]+_lut[ft&255]+_lut[ft>>8&255]+_lut[ft>>16&255]+_lut[ft>>24&255]).toLowerCase()}function clamp$1(dt,$,lt){return Math.max($,Math.min(lt,dt))}function euclideanModulo(dt,$){return(dt%$+$)%$}function mapLinear(dt,$,lt,ft,St){return ft+(dt-$)*(St-ft)/(lt-$)}function inverseLerp(dt,$,lt){return dt!==$?(lt-dt)/($-dt):0}function lerp(dt,$,lt){return(1-lt)*dt+lt*$}function damp(dt,$,lt,ft){return lerp(dt,$,1-Math.exp(-lt*ft))}function pingpong(dt,$=1){return $-Math.abs(euclideanModulo(dt,$*2)-$)}function smoothstep(dt,$,lt){return dt<=$?0:dt>=lt?1:(dt=(dt-$)/(lt-$),dt*dt*(3-2*dt))}function smootherstep(dt,$,lt){return dt<=$?0:dt>=lt?1:(dt=(dt-$)/(lt-$),dt*dt*dt*(dt*(dt*6-15)+10))}function randInt(dt,$){return dt+Math.floor(Math.random()*($-dt+1))}function randFloat(dt,$){return dt+Math.random()*($-dt)}function randFloatSpread(dt){return dt*(.5-Math.random())}function seededRandom(dt){dt!==void 0&&(_seed=dt);let $=_seed+=1831565813;return $=Math.imul($^$>>>15,$|1),$^=$+Math.imul($^$>>>7,$|61),(($^$>>>14)>>>0)/4294967296}function degToRad(dt){return dt*DEG2RAD}function radToDeg(dt){return dt*RAD2DEG}function isPowerOfTwo(dt){return(dt&dt-1)===0&&dt!==0}function ceilPowerOfTwo(dt){return Math.pow(2,Math.ceil(Math.log(dt)/Math.LN2))}function floorPowerOfTwo(dt){return Math.pow(2,Math.floor(Math.log(dt)/Math.LN2))}function setQuaternionFromProperEuler(dt,$,lt,ft,St){const Tt=Math.cos,Ct=Math.sin,At=Tt(lt/2),Rt=Ct(lt/2),kt=Tt(($+ft)/2),Nt=Ct(($+ft)/2),Bt=Tt(($-ft)/2),Ut=Ct(($-ft)/2),zt=Tt((ft-$)/2),Zt=Ct((ft-$)/2);switch(St){case"XYX":dt.set(At*Nt,Rt*Bt,Rt*Ut,At*kt);break;case"YZY":dt.set(Rt*Ut,At*Nt,Rt*Bt,At*kt);break;case"ZXZ":dt.set(Rt*Bt,Rt*Ut,At*Nt,At*kt);break;case"XZX":dt.set(At*Nt,Rt*Zt,Rt*zt,At*kt);break;case"YXY":dt.set(Rt*zt,At*Nt,Rt*Zt,At*kt);break;case"ZYZ":dt.set(Rt*Zt,Rt*zt,At*Nt,At*kt);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+St)}}function denormalize(dt,$){switch($.constructor){case Float32Array:return dt;case Uint16Array:return dt/65535;case Uint8Array:return dt/255;case Int16Array:return Math.max(dt/32767,-1);case Int8Array:return Math.max(dt/127,-1);default:throw new Error("Invalid component type.")}}function normalize(dt,$){switch($.constructor){case Float32Array:return dt;case Uint16Array:return Math.round(dt*65535);case Uint8Array:return Math.round(dt*255);case Int16Array:return Math.round(dt*32767);case Int8Array:return Math.round(dt*127);default:throw new Error("Invalid component type.")}}const MathUtils={DEG2RAD,RAD2DEG,generateUUID,clamp:clamp$1,euclideanModulo,mapLinear,inverseLerp,lerp,damp,pingpong,smoothstep,smootherstep,randInt,randFloat,randFloatSpread,seededRandom,degToRad,radToDeg,isPowerOfTwo,ceilPowerOfTwo,floorPowerOfTwo,setQuaternionFromProperEuler,normalize,denormalize};class Vector2{constructor($=0,lt=0){Vector2.prototype.isVector2=!0,this.x=$,this.y=lt}get width(){return this.x}set width($){this.x=$}get height(){return this.y}set height($){this.y=$}set($,lt){return this.x=$,this.y=lt,this}setScalar($){return this.x=$,this.y=$,this}setX($){return this.x=$,this}setY($){return this.y=$,this}setComponent($,lt){switch($){case 0:this.x=lt;break;case 1:this.y=lt;break;default:throw new Error("index is out of range: "+$)}return this}getComponent($){switch($){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+$)}}clone(){return new this.constructor(this.x,this.y)}copy($){return this.x=$.x,this.y=$.y,this}add($){return this.x+=$.x,this.y+=$.y,this}addScalar($){return this.x+=$,this.y+=$,this}addVectors($,lt){return this.x=$.x+lt.x,this.y=$.y+lt.y,this}addScaledVector($,lt){return this.x+=$.x*lt,this.y+=$.y*lt,this}sub($){return this.x-=$.x,this.y-=$.y,this}subScalar($){return this.x-=$,this.y-=$,this}subVectors($,lt){return this.x=$.x-lt.x,this.y=$.y-lt.y,this}multiply($){return this.x*=$.x,this.y*=$.y,this}multiplyScalar($){return this.x*=$,this.y*=$,this}divide($){return this.x/=$.x,this.y/=$.y,this}divideScalar($){return this.multiplyScalar(1/$)}applyMatrix3($){const lt=this.x,ft=this.y,St=$.elements;return this.x=St[0]*lt+St[3]*ft+St[6],this.y=St[1]*lt+St[4]*ft+St[7],this}min($){return this.x=Math.min(this.x,$.x),this.y=Math.min(this.y,$.y),this}max($){return this.x=Math.max(this.x,$.x),this.y=Math.max(this.y,$.y),this}clamp($,lt){return this.x=Math.max($.x,Math.min(lt.x,this.x)),this.y=Math.max($.y,Math.min(lt.y,this.y)),this}clampScalar($,lt){return this.x=Math.max($,Math.min(lt,this.x)),this.y=Math.max($,Math.min(lt,this.y)),this}clampLength($,lt){const ft=this.length();return this.divideScalar(ft||1).multiplyScalar(Math.max($,Math.min(lt,ft)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot($){return this.x*$.x+this.y*$.y}cross($){return this.x*$.y-this.y*$.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo($){return Math.sqrt(this.distanceToSquared($))}distanceToSquared($){const lt=this.x-$.x,ft=this.y-$.y;return lt*lt+ft*ft}manhattanDistanceTo($){return Math.abs(this.x-$.x)+Math.abs(this.y-$.y)}setLength($){return this.normalize().multiplyScalar($)}lerp($,lt){return this.x+=($.x-this.x)*lt,this.y+=($.y-this.y)*lt,this}lerpVectors($,lt,ft){return this.x=$.x+(lt.x-$.x)*ft,this.y=$.y+(lt.y-$.y)*ft,this}equals($){return $.x===this.x&&$.y===this.y}fromArray($,lt=0){return this.x=$[lt],this.y=$[lt+1],this}toArray($=[],lt=0){return $[lt]=this.x,$[lt+1]=this.y,$}fromBufferAttribute($,lt){return this.x=$.getX(lt),this.y=$.getY(lt),this}rotateAround($,lt){const ft=Math.cos(lt),St=Math.sin(lt),Tt=this.x-$.x,Ct=this.y-$.y;return this.x=Tt*ft-Ct*St+$.x,this.y=Tt*St+Ct*ft+$.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Matrix3{constructor(){Matrix3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set($,lt,ft,St,Tt,Ct,At,Rt,kt){const Nt=this.elements;return Nt[0]=$,Nt[1]=St,Nt[2]=At,Nt[3]=lt,Nt[4]=Tt,Nt[5]=Rt,Nt[6]=ft,Nt[7]=Ct,Nt[8]=kt,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy($){const lt=this.elements,ft=$.elements;return lt[0]=ft[0],lt[1]=ft[1],lt[2]=ft[2],lt[3]=ft[3],lt[4]=ft[4],lt[5]=ft[5],lt[6]=ft[6],lt[7]=ft[7],lt[8]=ft[8],this}extractBasis($,lt,ft){return $.setFromMatrix3Column(this,0),lt.setFromMatrix3Column(this,1),ft.setFromMatrix3Column(this,2),this}setFromMatrix4($){const lt=$.elements;return this.set(lt[0],lt[4],lt[8],lt[1],lt[5],lt[9],lt[2],lt[6],lt[10]),this}multiply($){return this.multiplyMatrices(this,$)}premultiply($){return this.multiplyMatrices($,this)}multiplyMatrices($,lt){const ft=$.elements,St=lt.elements,Tt=this.elements,Ct=ft[0],At=ft[3],Rt=ft[6],kt=ft[1],Nt=ft[4],Bt=ft[7],Ut=ft[2],zt=ft[5],Zt=ft[8],ln=St[0],cn=St[3],hn=St[6],pn=St[1],dn=St[4],gn=St[7],vn=St[2],Tn=St[5],Cn=St[8];return Tt[0]=Ct*ln+At*pn+Rt*vn,Tt[3]=Ct*cn+At*dn+Rt*Tn,Tt[6]=Ct*hn+At*gn+Rt*Cn,Tt[1]=kt*ln+Nt*pn+Bt*vn,Tt[4]=kt*cn+Nt*dn+Bt*Tn,Tt[7]=kt*hn+Nt*gn+Bt*Cn,Tt[2]=Ut*ln+zt*pn+Zt*vn,Tt[5]=Ut*cn+zt*dn+Zt*Tn,Tt[8]=Ut*hn+zt*gn+Zt*Cn,this}multiplyScalar($){const lt=this.elements;return lt[0]*=$,lt[3]*=$,lt[6]*=$,lt[1]*=$,lt[4]*=$,lt[7]*=$,lt[2]*=$,lt[5]*=$,lt[8]*=$,this}determinant(){const $=this.elements,lt=$[0],ft=$[1],St=$[2],Tt=$[3],Ct=$[4],At=$[5],Rt=$[6],kt=$[7],Nt=$[8];return lt*Ct*Nt-lt*At*kt-ft*Tt*Nt+ft*At*Rt+St*Tt*kt-St*Ct*Rt}invert(){const $=this.elements,lt=$[0],ft=$[1],St=$[2],Tt=$[3],Ct=$[4],At=$[5],Rt=$[6],kt=$[7],Nt=$[8],Bt=Nt*Ct-At*kt,Ut=At*Rt-Nt*Tt,zt=kt*Tt-Ct*Rt,Zt=lt*Bt+ft*Ut+St*zt;if(Zt===0)return this.set(0,0,0,0,0,0,0,0,0);const ln=1/Zt;return $[0]=Bt*ln,$[1]=(St*kt-Nt*ft)*ln,$[2]=(At*ft-St*Ct)*ln,$[3]=Ut*ln,$[4]=(Nt*lt-St*Rt)*ln,$[5]=(St*Tt-At*lt)*ln,$[6]=zt*ln,$[7]=(ft*Rt-kt*lt)*ln,$[8]=(Ct*lt-ft*Tt)*ln,this}transpose(){let $;const lt=this.elements;return $=lt[1],lt[1]=lt[3],lt[3]=$,$=lt[2],lt[2]=lt[6],lt[6]=$,$=lt[5],lt[5]=lt[7],lt[7]=$,this}getNormalMatrix($){return this.setFromMatrix4($).invert().transpose()}transposeIntoArray($){const lt=this.elements;return $[0]=lt[0],$[1]=lt[3],$[2]=lt[6],$[3]=lt[1],$[4]=lt[4],$[5]=lt[7],$[6]=lt[2],$[7]=lt[5],$[8]=lt[8],this}setUvTransform($,lt,ft,St,Tt,Ct,At){const Rt=Math.cos(Tt),kt=Math.sin(Tt);return this.set(ft*Rt,ft*kt,-ft*(Rt*Ct+kt*At)+Ct+$,-St*kt,St*Rt,-St*(-kt*Ct+Rt*At)+At+lt,0,0,1),this}scale($,lt){return this.premultiply(_m3.makeScale($,lt)),this}rotate($){return this.premultiply(_m3.makeRotation(-$)),this}translate($,lt){return this.premultiply(_m3.makeTranslation($,lt)),this}makeTranslation($,lt){return this.set(1,0,$,0,1,lt,0,0,1),this}makeRotation($){const lt=Math.cos($),ft=Math.sin($);return this.set(lt,-ft,0,ft,lt,0,0,0,1),this}makeScale($,lt){return this.set($,0,0,0,lt,0,0,0,1),this}equals($){const lt=this.elements,ft=$.elements;for(let St=0;St<9;St++)if(lt[St]!==ft[St])return!1;return!0}fromArray($,lt=0){for(let ft=0;ft<9;ft++)this.elements[ft]=$[ft+lt];return this}toArray($=[],lt=0){const ft=this.elements;return $[lt]=ft[0],$[lt+1]=ft[1],$[lt+2]=ft[2],$[lt+3]=ft[3],$[lt+4]=ft[4],$[lt+5]=ft[5],$[lt+6]=ft[6],$[lt+7]=ft[7],$[lt+8]=ft[8],$}clone(){return new this.constructor().fromArray(this.elements)}}const _m3=new Matrix3;function arrayNeedsUint32(dt){for(let $=dt.length-1;$>=0;--$)if(dt[$]>=65535)return!0;return!1}const TYPED_ARRAYS={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function getTypedArray(dt,$){return new TYPED_ARRAYS[dt]($)}function createElementNS$1(dt){return document.createElementNS("http://www.w3.org/1999/xhtml",dt)}class Quaternion{constructor($=0,lt=0,ft=0,St=1){this.isQuaternion=!0,this._x=$,this._y=lt,this._z=ft,this._w=St}static slerpFlat($,lt,ft,St,Tt,Ct,At){let Rt=ft[St+0],kt=ft[St+1],Nt=ft[St+2],Bt=ft[St+3];const Ut=Tt[Ct+0],zt=Tt[Ct+1],Zt=Tt[Ct+2],ln=Tt[Ct+3];if(At===0){$[lt+0]=Rt,$[lt+1]=kt,$[lt+2]=Nt,$[lt+3]=Bt;return}if(At===1){$[lt+0]=Ut,$[lt+1]=zt,$[lt+2]=Zt,$[lt+3]=ln;return}if(Bt!==ln||Rt!==Ut||kt!==zt||Nt!==Zt){let cn=1-At;const hn=Rt*Ut+kt*zt+Nt*Zt+Bt*ln,pn=hn>=0?1:-1,dn=1-hn*hn;if(dn>Number.EPSILON){const vn=Math.sqrt(dn),Tn=Math.atan2(vn,hn*pn);cn=Math.sin(cn*Tn)/vn,At=Math.sin(At*Tn)/vn}const gn=At*pn;if(Rt=Rt*cn+Ut*gn,kt=kt*cn+zt*gn,Nt=Nt*cn+Zt*gn,Bt=Bt*cn+ln*gn,cn===1-At){const vn=1/Math.sqrt(Rt*Rt+kt*kt+Nt*Nt+Bt*Bt);Rt*=vn,kt*=vn,Nt*=vn,Bt*=vn}}$[lt]=Rt,$[lt+1]=kt,$[lt+2]=Nt,$[lt+3]=Bt}static multiplyQuaternionsFlat($,lt,ft,St,Tt,Ct){const At=ft[St],Rt=ft[St+1],kt=ft[St+2],Nt=ft[St+3],Bt=Tt[Ct],Ut=Tt[Ct+1],zt=Tt[Ct+2],Zt=Tt[Ct+3];return $[lt]=At*Zt+Nt*Bt+Rt*zt-kt*Ut,$[lt+1]=Rt*Zt+Nt*Ut+kt*Bt-At*zt,$[lt+2]=kt*Zt+Nt*zt+At*Ut-Rt*Bt,$[lt+3]=Nt*Zt-At*Bt-Rt*Ut-kt*zt,$}get x(){return this._x}set x($){this._x=$,this._onChangeCallback()}get y(){return this._y}set y($){this._y=$,this._onChangeCallback()}get z(){return this._z}set z($){this._z=$,this._onChangeCallback()}get w(){return this._w}set w($){this._w=$,this._onChangeCallback()}set($,lt,ft,St){return this._x=$,this._y=lt,this._z=ft,this._w=St,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy($){return this._x=$.x,this._y=$.y,this._z=$.z,this._w=$.w,this._onChangeCallback(),this}setFromEuler($,lt){const ft=$._x,St=$._y,Tt=$._z,Ct=$._order,At=Math.cos,Rt=Math.sin,kt=At(ft/2),Nt=At(St/2),Bt=At(Tt/2),Ut=Rt(ft/2),zt=Rt(St/2),Zt=Rt(Tt/2);switch(Ct){case"XYZ":this._x=Ut*Nt*Bt+kt*zt*Zt,this._y=kt*zt*Bt-Ut*Nt*Zt,this._z=kt*Nt*Zt+Ut*zt*Bt,this._w=kt*Nt*Bt-Ut*zt*Zt;break;case"YXZ":this._x=Ut*Nt*Bt+kt*zt*Zt,this._y=kt*zt*Bt-Ut*Nt*Zt,this._z=kt*Nt*Zt-Ut*zt*Bt,this._w=kt*Nt*Bt+Ut*zt*Zt;break;case"ZXY":this._x=Ut*Nt*Bt-kt*zt*Zt,this._y=kt*zt*Bt+Ut*Nt*Zt,this._z=kt*Nt*Zt+Ut*zt*Bt,this._w=kt*Nt*Bt-Ut*zt*Zt;break;case"ZYX":this._x=Ut*Nt*Bt-kt*zt*Zt,this._y=kt*zt*Bt+Ut*Nt*Zt,this._z=kt*Nt*Zt-Ut*zt*Bt,this._w=kt*Nt*Bt+Ut*zt*Zt;break;case"YZX":this._x=Ut*Nt*Bt+kt*zt*Zt,this._y=kt*zt*Bt+Ut*Nt*Zt,this._z=kt*Nt*Zt-Ut*zt*Bt,this._w=kt*Nt*Bt-Ut*zt*Zt;break;case"XZY":this._x=Ut*Nt*Bt-kt*zt*Zt,this._y=kt*zt*Bt-Ut*Nt*Zt,this._z=kt*Nt*Zt+Ut*zt*Bt,this._w=kt*Nt*Bt+Ut*zt*Zt;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+Ct)}return lt!==!1&&this._onChangeCallback(),this}setFromAxisAngle($,lt){const ft=lt/2,St=Math.sin(ft);return this._x=$.x*St,this._y=$.y*St,this._z=$.z*St,this._w=Math.cos(ft),this._onChangeCallback(),this}setFromRotationMatrix($){const lt=$.elements,ft=lt[0],St=lt[4],Tt=lt[8],Ct=lt[1],At=lt[5],Rt=lt[9],kt=lt[2],Nt=lt[6],Bt=lt[10],Ut=ft+At+Bt;if(Ut>0){const zt=.5/Math.sqrt(Ut+1);this._w=.25/zt,this._x=(Nt-Rt)*zt,this._y=(Tt-kt)*zt,this._z=(Ct-St)*zt}else if(ft>At&&ft>Bt){const zt=2*Math.sqrt(1+ft-At-Bt);this._w=(Nt-Rt)/zt,this._x=.25*zt,this._y=(St+Ct)/zt,this._z=(Tt+kt)/zt}else if(At>Bt){const zt=2*Math.sqrt(1+At-ft-Bt);this._w=(Tt-kt)/zt,this._x=(St+Ct)/zt,this._y=.25*zt,this._z=(Rt+Nt)/zt}else{const zt=2*Math.sqrt(1+Bt-ft-At);this._w=(Ct-St)/zt,this._x=(Tt+kt)/zt,this._y=(Rt+Nt)/zt,this._z=.25*zt}return this._onChangeCallback(),this}setFromUnitVectors($,lt){let ft=$.dot(lt)+1;return ft<Number.EPSILON?(ft=0,Math.abs($.x)>Math.abs($.z)?(this._x=-$.y,this._y=$.x,this._z=0,this._w=ft):(this._x=0,this._y=-$.z,this._z=$.y,this._w=ft)):(this._x=$.y*lt.z-$.z*lt.y,this._y=$.z*lt.x-$.x*lt.z,this._z=$.x*lt.y-$.y*lt.x,this._w=ft),this.normalize()}angleTo($){return 2*Math.acos(Math.abs(clamp$1(this.dot($),-1,1)))}rotateTowards($,lt){const ft=this.angleTo($);if(ft===0)return this;const St=Math.min(1,lt/ft);return this.slerp($,St),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot($){return this._x*$._x+this._y*$._y+this._z*$._z+this._w*$._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let $=this.length();return $===0?(this._x=0,this._y=0,this._z=0,this._w=1):($=1/$,this._x=this._x*$,this._y=this._y*$,this._z=this._z*$,this._w=this._w*$),this._onChangeCallback(),this}multiply($){return this.multiplyQuaternions(this,$)}premultiply($){return this.multiplyQuaternions($,this)}multiplyQuaternions($,lt){const ft=$._x,St=$._y,Tt=$._z,Ct=$._w,At=lt._x,Rt=lt._y,kt=lt._z,Nt=lt._w;return this._x=ft*Nt+Ct*At+St*kt-Tt*Rt,this._y=St*Nt+Ct*Rt+Tt*At-ft*kt,this._z=Tt*Nt+Ct*kt+ft*Rt-St*At,this._w=Ct*Nt-ft*At-St*Rt-Tt*kt,this._onChangeCallback(),this}slerp($,lt){if(lt===0)return this;if(lt===1)return this.copy($);const ft=this._x,St=this._y,Tt=this._z,Ct=this._w;let At=Ct*$._w+ft*$._x+St*$._y+Tt*$._z;if(At<0?(this._w=-$._w,this._x=-$._x,this._y=-$._y,this._z=-$._z,At=-At):this.copy($),At>=1)return this._w=Ct,this._x=ft,this._y=St,this._z=Tt,this;const Rt=1-At*At;if(Rt<=Number.EPSILON){const zt=1-lt;return this._w=zt*Ct+lt*this._w,this._x=zt*ft+lt*this._x,this._y=zt*St+lt*this._y,this._z=zt*Tt+lt*this._z,this.normalize(),this._onChangeCallback(),this}const kt=Math.sqrt(Rt),Nt=Math.atan2(kt,At),Bt=Math.sin((1-lt)*Nt)/kt,Ut=Math.sin(lt*Nt)/kt;return this._w=Ct*Bt+this._w*Ut,this._x=ft*Bt+this._x*Ut,this._y=St*Bt+this._y*Ut,this._z=Tt*Bt+this._z*Ut,this._onChangeCallback(),this}slerpQuaternions($,lt,ft){return this.copy($).slerp(lt,ft)}random(){const $=Math.random(),lt=Math.sqrt(1-$),ft=Math.sqrt($),St=2*Math.PI*Math.random(),Tt=2*Math.PI*Math.random();return this.set(lt*Math.cos(St),ft*Math.sin(Tt),ft*Math.cos(Tt),lt*Math.sin(St))}equals($){return $._x===this._x&&$._y===this._y&&$._z===this._z&&$._w===this._w}fromArray($,lt=0){return this._x=$[lt],this._y=$[lt+1],this._z=$[lt+2],this._w=$[lt+3],this._onChangeCallback(),this}toArray($=[],lt=0){return $[lt]=this._x,$[lt+1]=this._y,$[lt+2]=this._z,$[lt+3]=this._w,$}fromBufferAttribute($,lt){return this._x=$.getX(lt),this._y=$.getY(lt),this._z=$.getZ(lt),this._w=$.getW(lt),this}_onChange($){return this._onChangeCallback=$,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Vector3{constructor($=0,lt=0,ft=0){Vector3.prototype.isVector3=!0,this.x=$,this.y=lt,this.z=ft}set($,lt,ft){return ft===void 0&&(ft=this.z),this.x=$,this.y=lt,this.z=ft,this}setScalar($){return this.x=$,this.y=$,this.z=$,this}setX($){return this.x=$,this}setY($){return this.y=$,this}setZ($){return this.z=$,this}setComponent($,lt){switch($){case 0:this.x=lt;break;case 1:this.y=lt;break;case 2:this.z=lt;break;default:throw new Error("index is out of range: "+$)}return this}getComponent($){switch($){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+$)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy($){return this.x=$.x,this.y=$.y,this.z=$.z,this}add($){return this.x+=$.x,this.y+=$.y,this.z+=$.z,this}addScalar($){return this.x+=$,this.y+=$,this.z+=$,this}addVectors($,lt){return this.x=$.x+lt.x,this.y=$.y+lt.y,this.z=$.z+lt.z,this}addScaledVector($,lt){return this.x+=$.x*lt,this.y+=$.y*lt,this.z+=$.z*lt,this}sub($){return this.x-=$.x,this.y-=$.y,this.z-=$.z,this}subScalar($){return this.x-=$,this.y-=$,this.z-=$,this}subVectors($,lt){return this.x=$.x-lt.x,this.y=$.y-lt.y,this.z=$.z-lt.z,this}multiply($){return this.x*=$.x,this.y*=$.y,this.z*=$.z,this}multiplyScalar($){return this.x*=$,this.y*=$,this.z*=$,this}multiplyVectors($,lt){return this.x=$.x*lt.x,this.y=$.y*lt.y,this.z=$.z*lt.z,this}applyEuler($){return this.applyQuaternion(_quaternion$4.setFromEuler($))}applyAxisAngle($,lt){return this.applyQuaternion(_quaternion$4.setFromAxisAngle($,lt))}applyMatrix3($){const lt=this.x,ft=this.y,St=this.z,Tt=$.elements;return this.x=Tt[0]*lt+Tt[3]*ft+Tt[6]*St,this.y=Tt[1]*lt+Tt[4]*ft+Tt[7]*St,this.z=Tt[2]*lt+Tt[5]*ft+Tt[8]*St,this}applyNormalMatrix($){return this.applyMatrix3($).normalize()}applyMatrix4($){const lt=this.x,ft=this.y,St=this.z,Tt=$.elements,Ct=1/(Tt[3]*lt+Tt[7]*ft+Tt[11]*St+Tt[15]);return this.x=(Tt[0]*lt+Tt[4]*ft+Tt[8]*St+Tt[12])*Ct,this.y=(Tt[1]*lt+Tt[5]*ft+Tt[9]*St+Tt[13])*Ct,this.z=(Tt[2]*lt+Tt[6]*ft+Tt[10]*St+Tt[14])*Ct,this}applyQuaternion($){const lt=this.x,ft=this.y,St=this.z,Tt=$.x,Ct=$.y,At=$.z,Rt=$.w,kt=Rt*lt+Ct*St-At*ft,Nt=Rt*ft+At*lt-Tt*St,Bt=Rt*St+Tt*ft-Ct*lt,Ut=-Tt*lt-Ct*ft-At*St;return this.x=kt*Rt+Ut*-Tt+Nt*-At-Bt*-Ct,this.y=Nt*Rt+Ut*-Ct+Bt*-Tt-kt*-At,this.z=Bt*Rt+Ut*-At+kt*-Ct-Nt*-Tt,this}project($){return this.applyMatrix4($.matrixWorldInverse).applyMatrix4($.projectionMatrix)}unproject($){return this.applyMatrix4($.projectionMatrixInverse).applyMatrix4($.matrixWorld)}transformDirection($){const lt=this.x,ft=this.y,St=this.z,Tt=$.elements;return this.x=Tt[0]*lt+Tt[4]*ft+Tt[8]*St,this.y=Tt[1]*lt+Tt[5]*ft+Tt[9]*St,this.z=Tt[2]*lt+Tt[6]*ft+Tt[10]*St,this.normalize()}divide($){return this.x/=$.x,this.y/=$.y,this.z/=$.z,this}divideScalar($){return this.multiplyScalar(1/$)}min($){return this.x=Math.min(this.x,$.x),this.y=Math.min(this.y,$.y),this.z=Math.min(this.z,$.z),this}max($){return this.x=Math.max(this.x,$.x),this.y=Math.max(this.y,$.y),this.z=Math.max(this.z,$.z),this}clamp($,lt){return this.x=Math.max($.x,Math.min(lt.x,this.x)),this.y=Math.max($.y,Math.min(lt.y,this.y)),this.z=Math.max($.z,Math.min(lt.z,this.z)),this}clampScalar($,lt){return this.x=Math.max($,Math.min(lt,this.x)),this.y=Math.max($,Math.min(lt,this.y)),this.z=Math.max($,Math.min(lt,this.z)),this}clampLength($,lt){const ft=this.length();return this.divideScalar(ft||1).multiplyScalar(Math.max($,Math.min(lt,ft)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot($){return this.x*$.x+this.y*$.y+this.z*$.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength($){return this.normalize().multiplyScalar($)}lerp($,lt){return this.x+=($.x-this.x)*lt,this.y+=($.y-this.y)*lt,this.z+=($.z-this.z)*lt,this}lerpVectors($,lt,ft){return this.x=$.x+(lt.x-$.x)*ft,this.y=$.y+(lt.y-$.y)*ft,this.z=$.z+(lt.z-$.z)*ft,this}cross($){return this.crossVectors(this,$)}crossVectors($,lt){const ft=$.x,St=$.y,Tt=$.z,Ct=lt.x,At=lt.y,Rt=lt.z;return this.x=St*Rt-Tt*At,this.y=Tt*Ct-ft*Rt,this.z=ft*At-St*Ct,this}projectOnVector($){const lt=$.lengthSq();if(lt===0)return this.set(0,0,0);const ft=$.dot(this)/lt;return this.copy($).multiplyScalar(ft)}projectOnPlane($){return _vector$d.copy(this).projectOnVector($),this.sub(_vector$d)}reflect($){return this.sub(_vector$d.copy($).multiplyScalar(2*this.dot($)))}angleTo($){const lt=Math.sqrt(this.lengthSq()*$.lengthSq());if(lt===0)return Math.PI/2;const ft=this.dot($)/lt;return Math.acos(clamp$1(ft,-1,1))}distanceTo($){return Math.sqrt(this.distanceToSquared($))}distanceToSquared($){const lt=this.x-$.x,ft=this.y-$.y,St=this.z-$.z;return lt*lt+ft*ft+St*St}manhattanDistanceTo($){return Math.abs(this.x-$.x)+Math.abs(this.y-$.y)+Math.abs(this.z-$.z)}setFromSpherical($){return this.setFromSphericalCoords($.radius,$.phi,$.theta)}setFromSphericalCoords($,lt,ft){const St=Math.sin(lt)*$;return this.x=St*Math.sin(ft),this.y=Math.cos(lt)*$,this.z=St*Math.cos(ft),this}setFromCylindrical($){return this.setFromCylindricalCoords($.radius,$.theta,$.y)}setFromCylindricalCoords($,lt,ft){return this.x=$*Math.sin(lt),this.y=ft,this.z=$*Math.cos(lt),this}setFromMatrixPosition($){const lt=$.elements;return this.x=lt[12],this.y=lt[13],this.z=lt[14],this}setFromMatrixScale($){const lt=this.setFromMatrixColumn($,0).length(),ft=this.setFromMatrixColumn($,1).length(),St=this.setFromMatrixColumn($,2).length();return this.x=lt,this.y=ft,this.z=St,this}setFromMatrixColumn($,lt){return this.fromArray($.elements,lt*4)}setFromMatrix3Column($,lt){return this.fromArray($.elements,lt*3)}setFromEuler($){return this.x=$._x,this.y=$._y,this.z=$._z,this}equals($){return $.x===this.x&&$.y===this.y&&$.z===this.z}fromArray($,lt=0){return this.x=$[lt],this.y=$[lt+1],this.z=$[lt+2],this}toArray($=[],lt=0){return $[lt]=this.x,$[lt+1]=this.y,$[lt+2]=this.z,$}fromBufferAttribute($,lt){return this.x=$.getX(lt),this.y=$.getY(lt),this.z=$.getZ(lt),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const $=(Math.random()-.5)*2,lt=Math.random()*Math.PI*2,ft=Math.sqrt(1-$**2);return this.x=ft*Math.cos(lt),this.y=ft*Math.sin(lt),this.z=$,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _vector$d=new Vector3,_quaternion$4=new Quaternion;function SRGBToLinear(dt){return dt<.04045?dt*.0773993808:Math.pow(dt*.9478672986+.0521327014,2.4)}function LinearToSRGB(dt){return dt<.0031308?dt*12.92:1.055*Math.pow(dt,.41666)-.055}const LINEAR_SRGB_TO_LINEAR_DISPLAY_P3=new Matrix3().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),LINEAR_DISPLAY_P3_TO_LINEAR_SRGB=new Matrix3().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),_vector$c=new Vector3;function DisplayP3ToLinearSRGB(dt){return dt.convertSRGBToLinear(),_vector$c.set(dt.r,dt.g,dt.b).applyMatrix3(LINEAR_DISPLAY_P3_TO_LINEAR_SRGB),dt.setRGB(_vector$c.x,_vector$c.y,_vector$c.z)}function LinearSRGBToDisplayP3(dt){return _vector$c.set(dt.r,dt.g,dt.b).applyMatrix3(LINEAR_SRGB_TO_LINEAR_DISPLAY_P3),dt.setRGB(_vector$c.x,_vector$c.y,_vector$c.z).convertLinearToSRGB()}const TO_LINEAR={[LinearSRGBColorSpace]:dt=>dt,[SRGBColorSpace]:dt=>dt.convertSRGBToLinear(),[DisplayP3ColorSpace]:DisplayP3ToLinearSRGB},FROM_LINEAR={[LinearSRGBColorSpace]:dt=>dt,[SRGBColorSpace]:dt=>dt.convertLinearToSRGB(),[DisplayP3ColorSpace]:LinearSRGBToDisplayP3},ColorManagement={enabled:!1,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(dt){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!dt},get workingColorSpace(){return LinearSRGBColorSpace},set workingColorSpace(dt){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(dt,$,lt){if(this.enabled===!1||$===lt||!$||!lt)return dt;const ft=TO_LINEAR[$],St=FROM_LINEAR[lt];if(ft===void 0||St===void 0)throw new Error(`Unsupported color space conversion, "${$}" to "${lt}".`);return St(ft(dt))},fromWorkingColorSpace:function(dt,$){return this.convert(dt,this.workingColorSpace,$)},toWorkingColorSpace:function(dt,$){return this.convert(dt,$,this.workingColorSpace)}};let _canvas;class ImageUtils{static getDataURL($){if(/^data:/i.test($.src)||typeof HTMLCanvasElement>"u")return $.src;let lt;if($ instanceof HTMLCanvasElement)lt=$;else{_canvas===void 0&&(_canvas=createElementNS$1("canvas")),_canvas.width=$.width,_canvas.height=$.height;const ft=_canvas.getContext("2d");$ instanceof ImageData?ft.putImageData($,0,0):ft.drawImage($,0,0,$.width,$.height),lt=_canvas}return lt.width>2048||lt.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",$),lt.toDataURL("image/jpeg",.6)):lt.toDataURL("image/png")}static sRGBToLinear($){if(typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&$ instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&$ instanceof ImageBitmap){const lt=createElementNS$1("canvas");lt.width=$.width,lt.height=$.height;const ft=lt.getContext("2d");ft.drawImage($,0,0,$.width,$.height);const St=ft.getImageData(0,0,$.width,$.height),Tt=St.data;for(let Ct=0;Ct<Tt.length;Ct++)Tt[Ct]=SRGBToLinear(Tt[Ct]/255)*255;return ft.putImageData(St,0,0),lt}else if($.data){const lt=$.data.slice(0);for(let ft=0;ft<lt.length;ft++)lt instanceof Uint8Array||lt instanceof Uint8ClampedArray?lt[ft]=Math.floor(SRGBToLinear(lt[ft]/255)*255):lt[ft]=SRGBToLinear(lt[ft]);return{data:lt,width:$.width,height:$.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),$}}class Source{constructor($=null){this.isSource=!0,this.uuid=generateUUID(),this.data=$,this.version=0}set needsUpdate($){$===!0&&this.version++}toJSON($){const lt=$===void 0||typeof $=="string";if(!lt&&$.images[this.uuid]!==void 0)return $.images[this.uuid];const ft={uuid:this.uuid,url:""},St=this.data;if(St!==null){let Tt;if(Array.isArray(St)){Tt=[];for(let Ct=0,At=St.length;Ct<At;Ct++)St[Ct].isDataTexture?Tt.push(serializeImage(St[Ct].image)):Tt.push(serializeImage(St[Ct]))}else Tt=serializeImage(St);ft.url=Tt}return lt||($.images[this.uuid]=ft),ft}}function serializeImage(dt){return typeof HTMLImageElement<"u"&&dt instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&dt instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&dt instanceof ImageBitmap?ImageUtils.getDataURL(dt):dt.data?{data:Array.from(dt.data),width:dt.width,height:dt.height,type:dt.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let textureId=0;class Texture extends EventDispatcher{constructor($=Texture.DEFAULT_IMAGE,lt=Texture.DEFAULT_MAPPING,ft=ClampToEdgeWrapping,St=ClampToEdgeWrapping,Tt=LinearFilter,Ct=LinearMipmapLinearFilter,At=RGBAFormat,Rt=UnsignedByteType,kt=Texture.DEFAULT_ANISOTROPY,Nt=LinearEncoding){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:textureId++}),this.uuid=generateUUID(),this.name="",this.source=new Source($),this.mipmaps=[],this.mapping=lt,this.wrapS=ft,this.wrapT=St,this.magFilter=Tt,this.minFilter=Ct,this.anisotropy=kt,this.format=At,this.internalFormat=null,this.type=Rt,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=Nt,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image($=null){this.source.data=$}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy($){return this.name=$.name,this.source=$.source,this.mipmaps=$.mipmaps.slice(0),this.mapping=$.mapping,this.wrapS=$.wrapS,this.wrapT=$.wrapT,this.magFilter=$.magFilter,this.minFilter=$.minFilter,this.anisotropy=$.anisotropy,this.format=$.format,this.internalFormat=$.internalFormat,this.type=$.type,this.offset.copy($.offset),this.repeat.copy($.repeat),this.center.copy($.center),this.rotation=$.rotation,this.matrixAutoUpdate=$.matrixAutoUpdate,this.matrix.copy($.matrix),this.generateMipmaps=$.generateMipmaps,this.premultiplyAlpha=$.premultiplyAlpha,this.flipY=$.flipY,this.unpackAlignment=$.unpackAlignment,this.encoding=$.encoding,this.userData=JSON.parse(JSON.stringify($.userData)),this.needsUpdate=!0,this}toJSON($){const lt=$===void 0||typeof $=="string";if(!lt&&$.textures[this.uuid]!==void 0)return $.textures[this.uuid];const ft={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON($).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(ft.userData=this.userData),lt||($.textures[this.uuid]=ft),ft}dispose(){this.dispatchEvent({type:"dispose"})}transformUv($){if(this.mapping!==UVMapping)return $;if($.applyMatrix3(this.matrix),$.x<0||$.x>1)switch(this.wrapS){case RepeatWrapping:$.x=$.x-Math.floor($.x);break;case ClampToEdgeWrapping:$.x=$.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor($.x)%2)===1?$.x=Math.ceil($.x)-$.x:$.x=$.x-Math.floor($.x);break}if($.y<0||$.y>1)switch(this.wrapT){case RepeatWrapping:$.y=$.y-Math.floor($.y);break;case ClampToEdgeWrapping:$.y=$.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor($.y)%2)===1?$.y=Math.ceil($.y)-$.y:$.y=$.y-Math.floor($.y);break}return this.flipY&&($.y=1-$.y),$}set needsUpdate($){$===!0&&(this.version++,this.source.needsUpdate=!0)}}Texture.DEFAULT_IMAGE=null;Texture.DEFAULT_MAPPING=UVMapping;Texture.DEFAULT_ANISOTROPY=1;class Vector4{constructor($=0,lt=0,ft=0,St=1){Vector4.prototype.isVector4=!0,this.x=$,this.y=lt,this.z=ft,this.w=St}get width(){return this.z}set width($){this.z=$}get height(){return this.w}set height($){this.w=$}set($,lt,ft,St){return this.x=$,this.y=lt,this.z=ft,this.w=St,this}setScalar($){return this.x=$,this.y=$,this.z=$,this.w=$,this}setX($){return this.x=$,this}setY($){return this.y=$,this}setZ($){return this.z=$,this}setW($){return this.w=$,this}setComponent($,lt){switch($){case 0:this.x=lt;break;case 1:this.y=lt;break;case 2:this.z=lt;break;case 3:this.w=lt;break;default:throw new Error("index is out of range: "+$)}return this}getComponent($){switch($){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+$)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy($){return this.x=$.x,this.y=$.y,this.z=$.z,this.w=$.w!==void 0?$.w:1,this}add($){return this.x+=$.x,this.y+=$.y,this.z+=$.z,this.w+=$.w,this}addScalar($){return this.x+=$,this.y+=$,this.z+=$,this.w+=$,this}addVectors($,lt){return this.x=$.x+lt.x,this.y=$.y+lt.y,this.z=$.z+lt.z,this.w=$.w+lt.w,this}addScaledVector($,lt){return this.x+=$.x*lt,this.y+=$.y*lt,this.z+=$.z*lt,this.w+=$.w*lt,this}sub($){return this.x-=$.x,this.y-=$.y,this.z-=$.z,this.w-=$.w,this}subScalar($){return this.x-=$,this.y-=$,this.z-=$,this.w-=$,this}subVectors($,lt){return this.x=$.x-lt.x,this.y=$.y-lt.y,this.z=$.z-lt.z,this.w=$.w-lt.w,this}multiply($){return this.x*=$.x,this.y*=$.y,this.z*=$.z,this.w*=$.w,this}multiplyScalar($){return this.x*=$,this.y*=$,this.z*=$,this.w*=$,this}applyMatrix4($){const lt=this.x,ft=this.y,St=this.z,Tt=this.w,Ct=$.elements;return this.x=Ct[0]*lt+Ct[4]*ft+Ct[8]*St+Ct[12]*Tt,this.y=Ct[1]*lt+Ct[5]*ft+Ct[9]*St+Ct[13]*Tt,this.z=Ct[2]*lt+Ct[6]*ft+Ct[10]*St+Ct[14]*Tt,this.w=Ct[3]*lt+Ct[7]*ft+Ct[11]*St+Ct[15]*Tt,this}divideScalar($){return this.multiplyScalar(1/$)}setAxisAngleFromQuaternion($){this.w=2*Math.acos($.w);const lt=Math.sqrt(1-$.w*$.w);return lt<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=$.x/lt,this.y=$.y/lt,this.z=$.z/lt),this}setAxisAngleFromRotationMatrix($){let lt,ft,St,Tt;const Rt=$.elements,kt=Rt[0],Nt=Rt[4],Bt=Rt[8],Ut=Rt[1],zt=Rt[5],Zt=Rt[9],ln=Rt[2],cn=Rt[6],hn=Rt[10];if(Math.abs(Nt-Ut)<.01&&Math.abs(Bt-ln)<.01&&Math.abs(Zt-cn)<.01){if(Math.abs(Nt+Ut)<.1&&Math.abs(Bt+ln)<.1&&Math.abs(Zt+cn)<.1&&Math.abs(kt+zt+hn-3)<.1)return this.set(1,0,0,0),this;lt=Math.PI;const dn=(kt+1)/2,gn=(zt+1)/2,vn=(hn+1)/2,Tn=(Nt+Ut)/4,Cn=(Bt+ln)/4,$n=(Zt+cn)/4;return dn>gn&&dn>vn?dn<.01?(ft=0,St=.707106781,Tt=.707106781):(ft=Math.sqrt(dn),St=Tn/ft,Tt=Cn/ft):gn>vn?gn<.01?(ft=.707106781,St=0,Tt=.707106781):(St=Math.sqrt(gn),ft=Tn/St,Tt=$n/St):vn<.01?(ft=.707106781,St=.707106781,Tt=0):(Tt=Math.sqrt(vn),ft=Cn/Tt,St=$n/Tt),this.set(ft,St,Tt,lt),this}let pn=Math.sqrt((cn-Zt)*(cn-Zt)+(Bt-ln)*(Bt-ln)+(Ut-Nt)*(Ut-Nt));return Math.abs(pn)<.001&&(pn=1),this.x=(cn-Zt)/pn,this.y=(Bt-ln)/pn,this.z=(Ut-Nt)/pn,this.w=Math.acos((kt+zt+hn-1)/2),this}min($){return this.x=Math.min(this.x,$.x),this.y=Math.min(this.y,$.y),this.z=Math.min(this.z,$.z),this.w=Math.min(this.w,$.w),this}max($){return this.x=Math.max(this.x,$.x),this.y=Math.max(this.y,$.y),this.z=Math.max(this.z,$.z),this.w=Math.max(this.w,$.w),this}clamp($,lt){return this.x=Math.max($.x,Math.min(lt.x,this.x)),this.y=Math.max($.y,Math.min(lt.y,this.y)),this.z=Math.max($.z,Math.min(lt.z,this.z)),this.w=Math.max($.w,Math.min(lt.w,this.w)),this}clampScalar($,lt){return this.x=Math.max($,Math.min(lt,this.x)),this.y=Math.max($,Math.min(lt,this.y)),this.z=Math.max($,Math.min(lt,this.z)),this.w=Math.max($,Math.min(lt,this.w)),this}clampLength($,lt){const ft=this.length();return this.divideScalar(ft||1).multiplyScalar(Math.max($,Math.min(lt,ft)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot($){return this.x*$.x+this.y*$.y+this.z*$.z+this.w*$.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength($){return this.normalize().multiplyScalar($)}lerp($,lt){return this.x+=($.x-this.x)*lt,this.y+=($.y-this.y)*lt,this.z+=($.z-this.z)*lt,this.w+=($.w-this.w)*lt,this}lerpVectors($,lt,ft){return this.x=$.x+(lt.x-$.x)*ft,this.y=$.y+(lt.y-$.y)*ft,this.z=$.z+(lt.z-$.z)*ft,this.w=$.w+(lt.w-$.w)*ft,this}equals($){return $.x===this.x&&$.y===this.y&&$.z===this.z&&$.w===this.w}fromArray($,lt=0){return this.x=$[lt],this.y=$[lt+1],this.z=$[lt+2],this.w=$[lt+3],this}toArray($=[],lt=0){return $[lt]=this.x,$[lt+1]=this.y,$[lt+2]=this.z,$[lt+3]=this.w,$}fromBufferAttribute($,lt){return this.x=$.getX(lt),this.y=$.getY(lt),this.z=$.getZ(lt),this.w=$.getW(lt),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class WebGLRenderTarget extends EventDispatcher{constructor($=1,lt=1,ft={}){super(),this.isWebGLRenderTarget=!0,this.width=$,this.height=lt,this.depth=1,this.scissor=new Vector4(0,0,$,lt),this.scissorTest=!1,this.viewport=new Vector4(0,0,$,lt);const St={width:$,height:lt,depth:1};this.texture=new Texture(St,ft.mapping,ft.wrapS,ft.wrapT,ft.magFilter,ft.minFilter,ft.format,ft.type,ft.anisotropy,ft.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=ft.generateMipmaps!==void 0?ft.generateMipmaps:!1,this.texture.internalFormat=ft.internalFormat!==void 0?ft.internalFormat:null,this.texture.minFilter=ft.minFilter!==void 0?ft.minFilter:LinearFilter,this.depthBuffer=ft.depthBuffer!==void 0?ft.depthBuffer:!0,this.stencilBuffer=ft.stencilBuffer!==void 0?ft.stencilBuffer:!1,this.depthTexture=ft.depthTexture!==void 0?ft.depthTexture:null,this.samples=ft.samples!==void 0?ft.samples:0}setSize($,lt,ft=1){(this.width!==$||this.height!==lt||this.depth!==ft)&&(this.width=$,this.height=lt,this.depth=ft,this.texture.image.width=$,this.texture.image.height=lt,this.texture.image.depth=ft,this.dispose()),this.viewport.set(0,0,$,lt),this.scissor.set(0,0,$,lt)}clone(){return new this.constructor().copy(this)}copy($){this.width=$.width,this.height=$.height,this.depth=$.depth,this.viewport.copy($.viewport),this.texture=$.texture.clone(),this.texture.isRenderTargetTexture=!0;const lt=Object.assign({},$.texture.image);return this.texture.source=new Source(lt),this.depthBuffer=$.depthBuffer,this.stencilBuffer=$.stencilBuffer,$.depthTexture!==null&&(this.depthTexture=$.depthTexture.clone()),this.samples=$.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class DataArrayTexture extends Texture{constructor($=null,lt=1,ft=1,St=1){super(null),this.isDataArrayTexture=!0,this.image={data:$,width:lt,height:ft,depth:St},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class WebGLArrayRenderTarget extends WebGLRenderTarget{constructor($=1,lt=1,ft=1){super($,lt),this.isWebGLArrayRenderTarget=!0,this.depth=ft,this.texture=new DataArrayTexture(null,$,lt,ft),this.texture.isRenderTargetTexture=!0}}class Data3DTexture extends Texture{constructor($=null,lt=1,ft=1,St=1){super(null),this.isData3DTexture=!0,this.image={data:$,width:lt,height:ft,depth:St},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class WebGL3DRenderTarget extends WebGLRenderTarget{constructor($=1,lt=1,ft=1){super($,lt),this.isWebGL3DRenderTarget=!0,this.depth=ft,this.texture=new Data3DTexture(null,$,lt,ft),this.texture.isRenderTargetTexture=!0}}class WebGLMultipleRenderTargets extends WebGLRenderTarget{constructor($=1,lt=1,ft=1,St={}){super($,lt,St),this.isWebGLMultipleRenderTargets=!0;const Tt=this.texture;this.texture=[];for(let Ct=0;Ct<ft;Ct++)this.texture[Ct]=Tt.clone(),this.texture[Ct].isRenderTargetTexture=!0}setSize($,lt,ft=1){if(this.width!==$||this.height!==lt||this.depth!==ft){this.width=$,this.height=lt,this.depth=ft;for(let St=0,Tt=this.texture.length;St<Tt;St++)this.texture[St].image.width=$,this.texture[St].image.height=lt,this.texture[St].image.depth=ft;this.dispose()}return this.viewport.set(0,0,$,lt),this.scissor.set(0,0,$,lt),this}copy($){this.dispose(),this.width=$.width,this.height=$.height,this.depth=$.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=$.depthBuffer,this.stencilBuffer=$.stencilBuffer,$.depthTexture!==null&&(this.depthTexture=$.depthTexture.clone()),this.texture.length=0;for(let lt=0,ft=$.texture.length;lt<ft;lt++)this.texture[lt]=$.texture[lt].clone(),this.texture[lt].isRenderTargetTexture=!0;return this}}class Box3{constructor($=new Vector3(1/0,1/0,1/0),lt=new Vector3(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=$,this.max=lt}set($,lt){return this.min.copy($),this.max.copy(lt),this}setFromArray($){let lt=1/0,ft=1/0,St=1/0,Tt=-1/0,Ct=-1/0,At=-1/0;for(let Rt=0,kt=$.length;Rt<kt;Rt+=3){const Nt=$[Rt],Bt=$[Rt+1],Ut=$[Rt+2];Nt<lt&&(lt=Nt),Bt<ft&&(ft=Bt),Ut<St&&(St=Ut),Nt>Tt&&(Tt=Nt),Bt>Ct&&(Ct=Bt),Ut>At&&(At=Ut)}return this.min.set(lt,ft,St),this.max.set(Tt,Ct,At),this}setFromBufferAttribute($){let lt=1/0,ft=1/0,St=1/0,Tt=-1/0,Ct=-1/0,At=-1/0;for(let Rt=0,kt=$.count;Rt<kt;Rt++){const Nt=$.getX(Rt),Bt=$.getY(Rt),Ut=$.getZ(Rt);Nt<lt&&(lt=Nt),Bt<ft&&(ft=Bt),Ut<St&&(St=Ut),Nt>Tt&&(Tt=Nt),Bt>Ct&&(Ct=Bt),Ut>At&&(At=Ut)}return this.min.set(lt,ft,St),this.max.set(Tt,Ct,At),this}setFromPoints($){this.makeEmpty();for(let lt=0,ft=$.length;lt<ft;lt++)this.expandByPoint($[lt]);return this}setFromCenterAndSize($,lt){const ft=_vector$b.copy(lt).multiplyScalar(.5);return this.min.copy($).sub(ft),this.max.copy($).add(ft),this}setFromObject($,lt=!1){return this.makeEmpty(),this.expandByObject($,lt)}clone(){return new this.constructor().copy(this)}copy($){return this.min.copy($.min),this.max.copy($.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter($){return this.isEmpty()?$.set(0,0,0):$.addVectors(this.min,this.max).multiplyScalar(.5)}getSize($){return this.isEmpty()?$.set(0,0,0):$.subVectors(this.max,this.min)}expandByPoint($){return this.min.min($),this.max.max($),this}expandByVector($){return this.min.sub($),this.max.add($),this}expandByScalar($){return this.min.addScalar(-$),this.max.addScalar($),this}expandByObject($,lt=!1){$.updateWorldMatrix(!1,!1);const ft=$.geometry;if(ft!==void 0)if(lt&&ft.attributes!=null&&ft.attributes.position!==void 0){const Tt=ft.attributes.position;for(let Ct=0,At=Tt.count;Ct<At;Ct++)_vector$b.fromBufferAttribute(Tt,Ct).applyMatrix4($.matrixWorld),this.expandByPoint(_vector$b)}else ft.boundingBox===null&&ft.computeBoundingBox(),_box$3.copy(ft.boundingBox),_box$3.applyMatrix4($.matrixWorld),this.union(_box$3);const St=$.children;for(let Tt=0,Ct=St.length;Tt<Ct;Tt++)this.expandByObject(St[Tt],lt);return this}containsPoint($){return!($.x<this.min.x||$.x>this.max.x||$.y<this.min.y||$.y>this.max.y||$.z<this.min.z||$.z>this.max.z)}containsBox($){return this.min.x<=$.min.x&&$.max.x<=this.max.x&&this.min.y<=$.min.y&&$.max.y<=this.max.y&&this.min.z<=$.min.z&&$.max.z<=this.max.z}getParameter($,lt){return lt.set(($.x-this.min.x)/(this.max.x-this.min.x),($.y-this.min.y)/(this.max.y-this.min.y),($.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox($){return!($.max.x<this.min.x||$.min.x>this.max.x||$.max.y<this.min.y||$.min.y>this.max.y||$.max.z<this.min.z||$.min.z>this.max.z)}intersectsSphere($){return this.clampPoint($.center,_vector$b),_vector$b.distanceToSquared($.center)<=$.radius*$.radius}intersectsPlane($){let lt,ft;return $.normal.x>0?(lt=$.normal.x*this.min.x,ft=$.normal.x*this.max.x):(lt=$.normal.x*this.max.x,ft=$.normal.x*this.min.x),$.normal.y>0?(lt+=$.normal.y*this.min.y,ft+=$.normal.y*this.max.y):(lt+=$.normal.y*this.max.y,ft+=$.normal.y*this.min.y),$.normal.z>0?(lt+=$.normal.z*this.min.z,ft+=$.normal.z*this.max.z):(lt+=$.normal.z*this.max.z,ft+=$.normal.z*this.min.z),lt<=-$.constant&&ft>=-$.constant}intersectsTriangle($){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0$2.subVectors($.a,_center),_v1$7.subVectors($.b,_center),_v2$4.subVectors($.c,_center),_f0.subVectors(_v1$7,_v0$2),_f1.subVectors(_v2$4,_v1$7),_f2.subVectors(_v0$2,_v2$4);let lt=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes(lt,_v0$2,_v1$7,_v2$4,_extents)||(lt=[1,0,0,0,1,0,0,0,1],!satForAxes(lt,_v0$2,_v1$7,_v2$4,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),lt=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(lt,_v0$2,_v1$7,_v2$4,_extents))}clampPoint($,lt){return lt.copy($).clamp(this.min,this.max)}distanceToPoint($){return this.clampPoint($,_vector$b).distanceTo($)}getBoundingSphere($){return this.isEmpty()?$.makeEmpty():(this.getCenter($.center),$.radius=this.getSize(_vector$b).length()*.5),$}intersect($){return this.min.max($.min),this.max.min($.max),this.isEmpty()&&this.makeEmpty(),this}union($){return this.min.min($.min),this.max.max($.max),this}applyMatrix4($){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4($),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4($),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4($),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4($),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4($),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4($),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4($),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4($),this.setFromPoints(_points),this)}translate($){return this.min.add($),this.max.add($),this}equals($){return $.min.equals(this.min)&&$.max.equals(this.max)}}const _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$b=new Vector3,_box$3=new Box3,_v0$2=new Vector3,_v1$7=new Vector3,_v2$4=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function satForAxes(dt,$,lt,ft,St){for(let Tt=0,Ct=dt.length-3;Tt<=Ct;Tt+=3){_testAxis.fromArray(dt,Tt);const At=St.x*Math.abs(_testAxis.x)+St.y*Math.abs(_testAxis.y)+St.z*Math.abs(_testAxis.z),Rt=$.dot(_testAxis),kt=lt.dot(_testAxis),Nt=ft.dot(_testAxis);if(Math.max(-Math.max(Rt,kt,Nt),Math.min(Rt,kt,Nt))>At)return!1}return!0}const _box$2=new Box3,_v1$6=new Vector3,_v2$3=new Vector3;let Sphere$1=class{constructor($=new Vector3,lt=-1){this.center=$,this.radius=lt}set($,lt){return this.center.copy($),this.radius=lt,this}setFromPoints($,lt){const ft=this.center;lt!==void 0?ft.copy(lt):_box$2.setFromPoints($).getCenter(ft);let St=0;for(let Tt=0,Ct=$.length;Tt<Ct;Tt++)St=Math.max(St,ft.distanceToSquared($[Tt]));return this.radius=Math.sqrt(St),this}copy($){return this.center.copy($.center),this.radius=$.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint($){return $.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint($){return $.distanceTo(this.center)-this.radius}intersectsSphere($){const lt=this.radius+$.radius;return $.center.distanceToSquared(this.center)<=lt*lt}intersectsBox($){return $.intersectsSphere(this)}intersectsPlane($){return Math.abs($.distanceToPoint(this.center))<=this.radius}clampPoint($,lt){const ft=this.center.distanceToSquared($);return lt.copy($),ft>this.radius*this.radius&&(lt.sub(this.center).normalize(),lt.multiplyScalar(this.radius).add(this.center)),lt}getBoundingBox($){return this.isEmpty()?($.makeEmpty(),$):($.set(this.center,this.center),$.expandByScalar(this.radius),$)}applyMatrix4($){return this.center.applyMatrix4($),this.radius=this.radius*$.getMaxScaleOnAxis(),this}translate($){return this.center.add($),this}expandByPoint($){if(this.isEmpty())return this.center.copy($),this.radius=0,this;_v1$6.subVectors($,this.center);const lt=_v1$6.lengthSq();if(lt>this.radius*this.radius){const ft=Math.sqrt(lt),St=(ft-this.radius)*.5;this.center.addScaledVector(_v1$6,St/ft),this.radius+=St}return this}union($){return $.isEmpty()?this:this.isEmpty()?(this.copy($),this):(this.center.equals($.center)===!0?this.radius=Math.max(this.radius,$.radius):(_v2$3.subVectors($.center,this.center).setLength($.radius),this.expandByPoint(_v1$6.copy($.center).add(_v2$3)),this.expandByPoint(_v1$6.copy($.center).sub(_v2$3))),this)}equals($){return $.center.equals(this.center)&&$.radius===this.radius}clone(){return new this.constructor().copy(this)}};const _vector$a=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal$1=new Vector3;class Ray{constructor($=new Vector3,lt=new Vector3(0,0,-1)){this.origin=$,this.direction=lt}set($,lt){return this.origin.copy($),this.direction.copy(lt),this}copy($){return this.origin.copy($.origin),this.direction.copy($.direction),this}at($,lt){return lt.copy(this.origin).addScaledVector(this.direction,$)}lookAt($){return this.direction.copy($).sub(this.origin).normalize(),this}recast($){return this.origin.copy(this.at($,_vector$a)),this}closestPointToPoint($,lt){lt.subVectors($,this.origin);const ft=lt.dot(this.direction);return ft<0?lt.copy(this.origin):lt.copy(this.origin).addScaledVector(this.direction,ft)}distanceToPoint($){return Math.sqrt(this.distanceSqToPoint($))}distanceSqToPoint($){const lt=_vector$a.subVectors($,this.origin).dot(this.direction);return lt<0?this.origin.distanceToSquared($):(_vector$a.copy(this.origin).addScaledVector(this.direction,lt),_vector$a.distanceToSquared($))}distanceSqToSegment($,lt,ft,St){_segCenter.copy($).add(lt).multiplyScalar(.5),_segDir.copy(lt).sub($).normalize(),_diff.copy(this.origin).sub(_segCenter);const Tt=$.distanceTo(lt)*.5,Ct=-this.direction.dot(_segDir),At=_diff.dot(this.direction),Rt=-_diff.dot(_segDir),kt=_diff.lengthSq(),Nt=Math.abs(1-Ct*Ct);let Bt,Ut,zt,Zt;if(Nt>0)if(Bt=Ct*Rt-At,Ut=Ct*At-Rt,Zt=Tt*Nt,Bt>=0)if(Ut>=-Zt)if(Ut<=Zt){const ln=1/Nt;Bt*=ln,Ut*=ln,zt=Bt*(Bt+Ct*Ut+2*At)+Ut*(Ct*Bt+Ut+2*Rt)+kt}else Ut=Tt,Bt=Math.max(0,-(Ct*Ut+At)),zt=-Bt*Bt+Ut*(Ut+2*Rt)+kt;else Ut=-Tt,Bt=Math.max(0,-(Ct*Ut+At)),zt=-Bt*Bt+Ut*(Ut+2*Rt)+kt;else Ut<=-Zt?(Bt=Math.max(0,-(-Ct*Tt+At)),Ut=Bt>0?-Tt:Math.min(Math.max(-Tt,-Rt),Tt),zt=-Bt*Bt+Ut*(Ut+2*Rt)+kt):Ut<=Zt?(Bt=0,Ut=Math.min(Math.max(-Tt,-Rt),Tt),zt=Ut*(Ut+2*Rt)+kt):(Bt=Math.max(0,-(Ct*Tt+At)),Ut=Bt>0?Tt:Math.min(Math.max(-Tt,-Rt),Tt),zt=-Bt*Bt+Ut*(Ut+2*Rt)+kt);else Ut=Ct>0?-Tt:Tt,Bt=Math.max(0,-(Ct*Ut+At)),zt=-Bt*Bt+Ut*(Ut+2*Rt)+kt;return ft&&ft.copy(this.origin).addScaledVector(this.direction,Bt),St&&St.copy(_segCenter).addScaledVector(_segDir,Ut),zt}intersectSphere($,lt){_vector$a.subVectors($.center,this.origin);const ft=_vector$a.dot(this.direction),St=_vector$a.dot(_vector$a)-ft*ft,Tt=$.radius*$.radius;if(St>Tt)return null;const Ct=Math.sqrt(Tt-St),At=ft-Ct,Rt=ft+Ct;return Rt<0?null:At<0?this.at(Rt,lt):this.at(At,lt)}intersectsSphere($){return this.distanceSqToPoint($.center)<=$.radius*$.radius}distanceToPlane($){const lt=$.normal.dot(this.direction);if(lt===0)return $.distanceToPoint(this.origin)===0?0:null;const ft=-(this.origin.dot($.normal)+$.constant)/lt;return ft>=0?ft:null}intersectPlane($,lt){const ft=this.distanceToPlane($);return ft===null?null:this.at(ft,lt)}intersectsPlane($){const lt=$.distanceToPoint(this.origin);return lt===0||$.normal.dot(this.direction)*lt<0}intersectBox($,lt){let ft,St,Tt,Ct,At,Rt;const kt=1/this.direction.x,Nt=1/this.direction.y,Bt=1/this.direction.z,Ut=this.origin;return kt>=0?(ft=($.min.x-Ut.x)*kt,St=($.max.x-Ut.x)*kt):(ft=($.max.x-Ut.x)*kt,St=($.min.x-Ut.x)*kt),Nt>=0?(Tt=($.min.y-Ut.y)*Nt,Ct=($.max.y-Ut.y)*Nt):(Tt=($.max.y-Ut.y)*Nt,Ct=($.min.y-Ut.y)*Nt),ft>Ct||Tt>St||((Tt>ft||isNaN(ft))&&(ft=Tt),(Ct<St||isNaN(St))&&(St=Ct),Bt>=0?(At=($.min.z-Ut.z)*Bt,Rt=($.max.z-Ut.z)*Bt):(At=($.max.z-Ut.z)*Bt,Rt=($.min.z-Ut.z)*Bt),ft>Rt||At>St)||((At>ft||ft!==ft)&&(ft=At),(Rt<St||St!==St)&&(St=Rt),St<0)?null:this.at(ft>=0?ft:St,lt)}intersectsBox($){return this.intersectBox($,_vector$a)!==null}intersectTriangle($,lt,ft,St,Tt){_edge1.subVectors(lt,$),_edge2.subVectors(ft,$),_normal$1.crossVectors(_edge1,_edge2);let Ct=this.direction.dot(_normal$1),At;if(Ct>0){if(St)return null;At=1}else if(Ct<0)At=-1,Ct=-Ct;else return null;_diff.subVectors(this.origin,$);const Rt=At*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(Rt<0)return null;const kt=At*this.direction.dot(_edge1.cross(_diff));if(kt<0||Rt+kt>Ct)return null;const Nt=-At*_diff.dot(_normal$1);return Nt<0?null:this.at(Nt/Ct,Tt)}applyMatrix4($){return this.origin.applyMatrix4($),this.direction.transformDirection($),this}equals($){return $.origin.equals(this.origin)&&$.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Matrix4{constructor(){Matrix4.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set($,lt,ft,St,Tt,Ct,At,Rt,kt,Nt,Bt,Ut,zt,Zt,ln,cn){const hn=this.elements;return hn[0]=$,hn[4]=lt,hn[8]=ft,hn[12]=St,hn[1]=Tt,hn[5]=Ct,hn[9]=At,hn[13]=Rt,hn[2]=kt,hn[6]=Nt,hn[10]=Bt,hn[14]=Ut,hn[3]=zt,hn[7]=Zt,hn[11]=ln,hn[15]=cn,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Matrix4().fromArray(this.elements)}copy($){const lt=this.elements,ft=$.elements;return lt[0]=ft[0],lt[1]=ft[1],lt[2]=ft[2],lt[3]=ft[3],lt[4]=ft[4],lt[5]=ft[5],lt[6]=ft[6],lt[7]=ft[7],lt[8]=ft[8],lt[9]=ft[9],lt[10]=ft[10],lt[11]=ft[11],lt[12]=ft[12],lt[13]=ft[13],lt[14]=ft[14],lt[15]=ft[15],this}copyPosition($){const lt=this.elements,ft=$.elements;return lt[12]=ft[12],lt[13]=ft[13],lt[14]=ft[14],this}setFromMatrix3($){const lt=$.elements;return this.set(lt[0],lt[3],lt[6],0,lt[1],lt[4],lt[7],0,lt[2],lt[5],lt[8],0,0,0,0,1),this}extractBasis($,lt,ft){return $.setFromMatrixColumn(this,0),lt.setFromMatrixColumn(this,1),ft.setFromMatrixColumn(this,2),this}makeBasis($,lt,ft){return this.set($.x,lt.x,ft.x,0,$.y,lt.y,ft.y,0,$.z,lt.z,ft.z,0,0,0,0,1),this}extractRotation($){const lt=this.elements,ft=$.elements,St=1/_v1$5.setFromMatrixColumn($,0).length(),Tt=1/_v1$5.setFromMatrixColumn($,1).length(),Ct=1/_v1$5.setFromMatrixColumn($,2).length();return lt[0]=ft[0]*St,lt[1]=ft[1]*St,lt[2]=ft[2]*St,lt[3]=0,lt[4]=ft[4]*Tt,lt[5]=ft[5]*Tt,lt[6]=ft[6]*Tt,lt[7]=0,lt[8]=ft[8]*Ct,lt[9]=ft[9]*Ct,lt[10]=ft[10]*Ct,lt[11]=0,lt[12]=0,lt[13]=0,lt[14]=0,lt[15]=1,this}makeRotationFromEuler($){const lt=this.elements,ft=$.x,St=$.y,Tt=$.z,Ct=Math.cos(ft),At=Math.sin(ft),Rt=Math.cos(St),kt=Math.sin(St),Nt=Math.cos(Tt),Bt=Math.sin(Tt);if($.order==="XYZ"){const Ut=Ct*Nt,zt=Ct*Bt,Zt=At*Nt,ln=At*Bt;lt[0]=Rt*Nt,lt[4]=-Rt*Bt,lt[8]=kt,lt[1]=zt+Zt*kt,lt[5]=Ut-ln*kt,lt[9]=-At*Rt,lt[2]=ln-Ut*kt,lt[6]=Zt+zt*kt,lt[10]=Ct*Rt}else if($.order==="YXZ"){const Ut=Rt*Nt,zt=Rt*Bt,Zt=kt*Nt,ln=kt*Bt;lt[0]=Ut+ln*At,lt[4]=Zt*At-zt,lt[8]=Ct*kt,lt[1]=Ct*Bt,lt[5]=Ct*Nt,lt[9]=-At,lt[2]=zt*At-Zt,lt[6]=ln+Ut*At,lt[10]=Ct*Rt}else if($.order==="ZXY"){const Ut=Rt*Nt,zt=Rt*Bt,Zt=kt*Nt,ln=kt*Bt;lt[0]=Ut-ln*At,lt[4]=-Ct*Bt,lt[8]=Zt+zt*At,lt[1]=zt+Zt*At,lt[5]=Ct*Nt,lt[9]=ln-Ut*At,lt[2]=-Ct*kt,lt[6]=At,lt[10]=Ct*Rt}else if($.order==="ZYX"){const Ut=Ct*Nt,zt=Ct*Bt,Zt=At*Nt,ln=At*Bt;lt[0]=Rt*Nt,lt[4]=Zt*kt-zt,lt[8]=Ut*kt+ln,lt[1]=Rt*Bt,lt[5]=ln*kt+Ut,lt[9]=zt*kt-Zt,lt[2]=-kt,lt[6]=At*Rt,lt[10]=Ct*Rt}else if($.order==="YZX"){const Ut=Ct*Rt,zt=Ct*kt,Zt=At*Rt,ln=At*kt;lt[0]=Rt*Nt,lt[4]=ln-Ut*Bt,lt[8]=Zt*Bt+zt,lt[1]=Bt,lt[5]=Ct*Nt,lt[9]=-At*Nt,lt[2]=-kt*Nt,lt[6]=zt*Bt+Zt,lt[10]=Ut-ln*Bt}else if($.order==="XZY"){const Ut=Ct*Rt,zt=Ct*kt,Zt=At*Rt,ln=At*kt;lt[0]=Rt*Nt,lt[4]=-Bt,lt[8]=kt*Nt,lt[1]=Ut*Bt+ln,lt[5]=Ct*Nt,lt[9]=zt*Bt-Zt,lt[2]=Zt*Bt-zt,lt[6]=At*Nt,lt[10]=ln*Bt+Ut}return lt[3]=0,lt[7]=0,lt[11]=0,lt[12]=0,lt[13]=0,lt[14]=0,lt[15]=1,this}makeRotationFromQuaternion($){return this.compose(_zero,$,_one)}lookAt($,lt,ft){const St=this.elements;return _z.subVectors($,lt),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(ft,_z),_x.lengthSq()===0&&(Math.abs(ft.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(ft,_z)),_x.normalize(),_y.crossVectors(_z,_x),St[0]=_x.x,St[4]=_y.x,St[8]=_z.x,St[1]=_x.y,St[5]=_y.y,St[9]=_z.y,St[2]=_x.z,St[6]=_y.z,St[10]=_z.z,this}multiply($){return this.multiplyMatrices(this,$)}premultiply($){return this.multiplyMatrices($,this)}multiplyMatrices($,lt){const ft=$.elements,St=lt.elements,Tt=this.elements,Ct=ft[0],At=ft[4],Rt=ft[8],kt=ft[12],Nt=ft[1],Bt=ft[5],Ut=ft[9],zt=ft[13],Zt=ft[2],ln=ft[6],cn=ft[10],hn=ft[14],pn=ft[3],dn=ft[7],gn=ft[11],vn=ft[15],Tn=St[0],Cn=St[4],$n=St[8],xn=St[12],Rn=St[1],Pn=St[5],Nn=St[9],Wn=St[13],zn=St[2],Yn=St[6],Qn=St[10],nr=St[14],Ln=St[3],Un=St[7],Vn=St[11],sr=St[15];return Tt[0]=Ct*Tn+At*Rn+Rt*zn+kt*Ln,Tt[4]=Ct*Cn+At*Pn+Rt*Yn+kt*Un,Tt[8]=Ct*$n+At*Nn+Rt*Qn+kt*Vn,Tt[12]=Ct*xn+At*Wn+Rt*nr+kt*sr,Tt[1]=Nt*Tn+Bt*Rn+Ut*zn+zt*Ln,Tt[5]=Nt*Cn+Bt*Pn+Ut*Yn+zt*Un,Tt[9]=Nt*$n+Bt*Nn+Ut*Qn+zt*Vn,Tt[13]=Nt*xn+Bt*Wn+Ut*nr+zt*sr,Tt[2]=Zt*Tn+ln*Rn+cn*zn+hn*Ln,Tt[6]=Zt*Cn+ln*Pn+cn*Yn+hn*Un,Tt[10]=Zt*$n+ln*Nn+cn*Qn+hn*Vn,Tt[14]=Zt*xn+ln*Wn+cn*nr+hn*sr,Tt[3]=pn*Tn+dn*Rn+gn*zn+vn*Ln,Tt[7]=pn*Cn+dn*Pn+gn*Yn+vn*Un,Tt[11]=pn*$n+dn*Nn+gn*Qn+vn*Vn,Tt[15]=pn*xn+dn*Wn+gn*nr+vn*sr,this}multiplyScalar($){const lt=this.elements;return lt[0]*=$,lt[4]*=$,lt[8]*=$,lt[12]*=$,lt[1]*=$,lt[5]*=$,lt[9]*=$,lt[13]*=$,lt[2]*=$,lt[6]*=$,lt[10]*=$,lt[14]*=$,lt[3]*=$,lt[7]*=$,lt[11]*=$,lt[15]*=$,this}determinant(){const $=this.elements,lt=$[0],ft=$[4],St=$[8],Tt=$[12],Ct=$[1],At=$[5],Rt=$[9],kt=$[13],Nt=$[2],Bt=$[6],Ut=$[10],zt=$[14],Zt=$[3],ln=$[7],cn=$[11],hn=$[15];return Zt*(+Tt*Rt*Bt-St*kt*Bt-Tt*At*Ut+ft*kt*Ut+St*At*zt-ft*Rt*zt)+ln*(+lt*Rt*zt-lt*kt*Ut+Tt*Ct*Ut-St*Ct*zt+St*kt*Nt-Tt*Rt*Nt)+cn*(+lt*kt*Bt-lt*At*zt-Tt*Ct*Bt+ft*Ct*zt+Tt*At*Nt-ft*kt*Nt)+hn*(-St*At*Nt-lt*Rt*Bt+lt*At*Ut+St*Ct*Bt-ft*Ct*Ut+ft*Rt*Nt)}transpose(){const $=this.elements;let lt;return lt=$[1],$[1]=$[4],$[4]=lt,lt=$[2],$[2]=$[8],$[8]=lt,lt=$[6],$[6]=$[9],$[9]=lt,lt=$[3],$[3]=$[12],$[12]=lt,lt=$[7],$[7]=$[13],$[13]=lt,lt=$[11],$[11]=$[14],$[14]=lt,this}setPosition($,lt,ft){const St=this.elements;return $.isVector3?(St[12]=$.x,St[13]=$.y,St[14]=$.z):(St[12]=$,St[13]=lt,St[14]=ft),this}invert(){const $=this.elements,lt=$[0],ft=$[1],St=$[2],Tt=$[3],Ct=$[4],At=$[5],Rt=$[6],kt=$[7],Nt=$[8],Bt=$[9],Ut=$[10],zt=$[11],Zt=$[12],ln=$[13],cn=$[14],hn=$[15],pn=Bt*cn*kt-ln*Ut*kt+ln*Rt*zt-At*cn*zt-Bt*Rt*hn+At*Ut*hn,dn=Zt*Ut*kt-Nt*cn*kt-Zt*Rt*zt+Ct*cn*zt+Nt*Rt*hn-Ct*Ut*hn,gn=Nt*ln*kt-Zt*Bt*kt+Zt*At*zt-Ct*ln*zt-Nt*At*hn+Ct*Bt*hn,vn=Zt*Bt*Rt-Nt*ln*Rt-Zt*At*Ut+Ct*ln*Ut+Nt*At*cn-Ct*Bt*cn,Tn=lt*pn+ft*dn+St*gn+Tt*vn;if(Tn===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Cn=1/Tn;return $[0]=pn*Cn,$[1]=(ln*Ut*Tt-Bt*cn*Tt-ln*St*zt+ft*cn*zt+Bt*St*hn-ft*Ut*hn)*Cn,$[2]=(At*cn*Tt-ln*Rt*Tt+ln*St*kt-ft*cn*kt-At*St*hn+ft*Rt*hn)*Cn,$[3]=(Bt*Rt*Tt-At*Ut*Tt-Bt*St*kt+ft*Ut*kt+At*St*zt-ft*Rt*zt)*Cn,$[4]=dn*Cn,$[5]=(Nt*cn*Tt-Zt*Ut*Tt+Zt*St*zt-lt*cn*zt-Nt*St*hn+lt*Ut*hn)*Cn,$[6]=(Zt*Rt*Tt-Ct*cn*Tt-Zt*St*kt+lt*cn*kt+Ct*St*hn-lt*Rt*hn)*Cn,$[7]=(Ct*Ut*Tt-Nt*Rt*Tt+Nt*St*kt-lt*Ut*kt-Ct*St*zt+lt*Rt*zt)*Cn,$[8]=gn*Cn,$[9]=(Zt*Bt*Tt-Nt*ln*Tt-Zt*ft*zt+lt*ln*zt+Nt*ft*hn-lt*Bt*hn)*Cn,$[10]=(Ct*ln*Tt-Zt*At*Tt+Zt*ft*kt-lt*ln*kt-Ct*ft*hn+lt*At*hn)*Cn,$[11]=(Nt*At*Tt-Ct*Bt*Tt-Nt*ft*kt+lt*Bt*kt+Ct*ft*zt-lt*At*zt)*Cn,$[12]=vn*Cn,$[13]=(Nt*ln*St-Zt*Bt*St+Zt*ft*Ut-lt*ln*Ut-Nt*ft*cn+lt*Bt*cn)*Cn,$[14]=(Zt*At*St-Ct*ln*St-Zt*ft*Rt+lt*ln*Rt+Ct*ft*cn-lt*At*cn)*Cn,$[15]=(Ct*Bt*St-Nt*At*St+Nt*ft*Rt-lt*Bt*Rt-Ct*ft*Ut+lt*At*Ut)*Cn,this}scale($){const lt=this.elements,ft=$.x,St=$.y,Tt=$.z;return lt[0]*=ft,lt[4]*=St,lt[8]*=Tt,lt[1]*=ft,lt[5]*=St,lt[9]*=Tt,lt[2]*=ft,lt[6]*=St,lt[10]*=Tt,lt[3]*=ft,lt[7]*=St,lt[11]*=Tt,this}getMaxScaleOnAxis(){const $=this.elements,lt=$[0]*$[0]+$[1]*$[1]+$[2]*$[2],ft=$[4]*$[4]+$[5]*$[5]+$[6]*$[6],St=$[8]*$[8]+$[9]*$[9]+$[10]*$[10];return Math.sqrt(Math.max(lt,ft,St))}makeTranslation($,lt,ft){return this.set(1,0,0,$,0,1,0,lt,0,0,1,ft,0,0,0,1),this}makeRotationX($){const lt=Math.cos($),ft=Math.sin($);return this.set(1,0,0,0,0,lt,-ft,0,0,ft,lt,0,0,0,0,1),this}makeRotationY($){const lt=Math.cos($),ft=Math.sin($);return this.set(lt,0,ft,0,0,1,0,0,-ft,0,lt,0,0,0,0,1),this}makeRotationZ($){const lt=Math.cos($),ft=Math.sin($);return this.set(lt,-ft,0,0,ft,lt,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis($,lt){const ft=Math.cos(lt),St=Math.sin(lt),Tt=1-ft,Ct=$.x,At=$.y,Rt=$.z,kt=Tt*Ct,Nt=Tt*At;return this.set(kt*Ct+ft,kt*At-St*Rt,kt*Rt+St*At,0,kt*At+St*Rt,Nt*At+ft,Nt*Rt-St*Ct,0,kt*Rt-St*At,Nt*Rt+St*Ct,Tt*Rt*Rt+ft,0,0,0,0,1),this}makeScale($,lt,ft){return this.set($,0,0,0,0,lt,0,0,0,0,ft,0,0,0,0,1),this}makeShear($,lt,ft,St,Tt,Ct){return this.set(1,ft,Tt,0,$,1,Ct,0,lt,St,1,0,0,0,0,1),this}compose($,lt,ft){const St=this.elements,Tt=lt._x,Ct=lt._y,At=lt._z,Rt=lt._w,kt=Tt+Tt,Nt=Ct+Ct,Bt=At+At,Ut=Tt*kt,zt=Tt*Nt,Zt=Tt*Bt,ln=Ct*Nt,cn=Ct*Bt,hn=At*Bt,pn=Rt*kt,dn=Rt*Nt,gn=Rt*Bt,vn=ft.x,Tn=ft.y,Cn=ft.z;return St[0]=(1-(ln+hn))*vn,St[1]=(zt+gn)*vn,St[2]=(Zt-dn)*vn,St[3]=0,St[4]=(zt-gn)*Tn,St[5]=(1-(Ut+hn))*Tn,St[6]=(cn+pn)*Tn,St[7]=0,St[8]=(Zt+dn)*Cn,St[9]=(cn-pn)*Cn,St[10]=(1-(Ut+ln))*Cn,St[11]=0,St[12]=$.x,St[13]=$.y,St[14]=$.z,St[15]=1,this}decompose($,lt,ft){const St=this.elements;let Tt=_v1$5.set(St[0],St[1],St[2]).length();const Ct=_v1$5.set(St[4],St[5],St[6]).length(),At=_v1$5.set(St[8],St[9],St[10]).length();this.determinant()<0&&(Tt=-Tt),$.x=St[12],$.y=St[13],$.z=St[14],_m1$2.copy(this);const kt=1/Tt,Nt=1/Ct,Bt=1/At;return _m1$2.elements[0]*=kt,_m1$2.elements[1]*=kt,_m1$2.elements[2]*=kt,_m1$2.elements[4]*=Nt,_m1$2.elements[5]*=Nt,_m1$2.elements[6]*=Nt,_m1$2.elements[8]*=Bt,_m1$2.elements[9]*=Bt,_m1$2.elements[10]*=Bt,lt.setFromRotationMatrix(_m1$2),ft.x=Tt,ft.y=Ct,ft.z=At,this}makePerspective($,lt,ft,St,Tt,Ct){const At=this.elements,Rt=2*Tt/(lt-$),kt=2*Tt/(ft-St),Nt=(lt+$)/(lt-$),Bt=(ft+St)/(ft-St),Ut=-(Ct+Tt)/(Ct-Tt),zt=-2*Ct*Tt/(Ct-Tt);return At[0]=Rt,At[4]=0,At[8]=Nt,At[12]=0,At[1]=0,At[5]=kt,At[9]=Bt,At[13]=0,At[2]=0,At[6]=0,At[10]=Ut,At[14]=zt,At[3]=0,At[7]=0,At[11]=-1,At[15]=0,this}makeOrthographic($,lt,ft,St,Tt,Ct){const At=this.elements,Rt=1/(lt-$),kt=1/(ft-St),Nt=1/(Ct-Tt),Bt=(lt+$)*Rt,Ut=(ft+St)*kt,zt=(Ct+Tt)*Nt;return At[0]=2*Rt,At[4]=0,At[8]=0,At[12]=-Bt,At[1]=0,At[5]=2*kt,At[9]=0,At[13]=-Ut,At[2]=0,At[6]=0,At[10]=-2*Nt,At[14]=-zt,At[3]=0,At[7]=0,At[11]=0,At[15]=1,this}equals($){const lt=this.elements,ft=$.elements;for(let St=0;St<16;St++)if(lt[St]!==ft[St])return!1;return!0}fromArray($,lt=0){for(let ft=0;ft<16;ft++)this.elements[ft]=$[ft+lt];return this}toArray($=[],lt=0){const ft=this.elements;return $[lt]=ft[0],$[lt+1]=ft[1],$[lt+2]=ft[2],$[lt+3]=ft[3],$[lt+4]=ft[4],$[lt+5]=ft[5],$[lt+6]=ft[6],$[lt+7]=ft[7],$[lt+8]=ft[8],$[lt+9]=ft[9],$[lt+10]=ft[10],$[lt+11]=ft[11],$[lt+12]=ft[12],$[lt+13]=ft[13],$[lt+14]=ft[14],$[lt+15]=ft[15],$}}const _v1$5=new Vector3,_m1$2=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3,_matrix$1=new Matrix4,_quaternion$3=new Quaternion;class Euler{constructor($=0,lt=0,ft=0,St=Euler.DEFAULT_ORDER){this.isEuler=!0,this._x=$,this._y=lt,this._z=ft,this._order=St}get x(){return this._x}set x($){this._x=$,this._onChangeCallback()}get y(){return this._y}set y($){this._y=$,this._onChangeCallback()}get z(){return this._z}set z($){this._z=$,this._onChangeCallback()}get order(){return this._order}set order($){this._order=$,this._onChangeCallback()}set($,lt,ft,St=this._order){return this._x=$,this._y=lt,this._z=ft,this._order=St,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy($){return this._x=$._x,this._y=$._y,this._z=$._z,this._order=$._order,this._onChangeCallback(),this}setFromRotationMatrix($,lt=this._order,ft=!0){const St=$.elements,Tt=St[0],Ct=St[4],At=St[8],Rt=St[1],kt=St[5],Nt=St[9],Bt=St[2],Ut=St[6],zt=St[10];switch(lt){case"XYZ":this._y=Math.asin(clamp$1(At,-1,1)),Math.abs(At)<.9999999?(this._x=Math.atan2(-Nt,zt),this._z=Math.atan2(-Ct,Tt)):(this._x=Math.atan2(Ut,kt),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp$1(Nt,-1,1)),Math.abs(Nt)<.9999999?(this._y=Math.atan2(At,zt),this._z=Math.atan2(Rt,kt)):(this._y=Math.atan2(-Bt,Tt),this._z=0);break;case"ZXY":this._x=Math.asin(clamp$1(Ut,-1,1)),Math.abs(Ut)<.9999999?(this._y=Math.atan2(-Bt,zt),this._z=Math.atan2(-Ct,kt)):(this._y=0,this._z=Math.atan2(Rt,Tt));break;case"ZYX":this._y=Math.asin(-clamp$1(Bt,-1,1)),Math.abs(Bt)<.9999999?(this._x=Math.atan2(Ut,zt),this._z=Math.atan2(Rt,Tt)):(this._x=0,this._z=Math.atan2(-Ct,kt));break;case"YZX":this._z=Math.asin(clamp$1(Rt,-1,1)),Math.abs(Rt)<.9999999?(this._x=Math.atan2(-Nt,kt),this._y=Math.atan2(-Bt,Tt)):(this._x=0,this._y=Math.atan2(At,zt));break;case"XZY":this._z=Math.asin(-clamp$1(Ct,-1,1)),Math.abs(Ct)<.9999999?(this._x=Math.atan2(Ut,kt),this._y=Math.atan2(At,Tt)):(this._x=Math.atan2(-Nt,zt),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+lt)}return this._order=lt,ft===!0&&this._onChangeCallback(),this}setFromQuaternion($,lt,ft){return _matrix$1.makeRotationFromQuaternion($),this.setFromRotationMatrix(_matrix$1,lt,ft)}setFromVector3($,lt=this._order){return this.set($.x,$.y,$.z,lt)}reorder($){return _quaternion$3.setFromEuler(this),this.setFromQuaternion(_quaternion$3,$)}equals($){return $._x===this._x&&$._y===this._y&&$._z===this._z&&$._order===this._order}fromArray($){return this._x=$[0],this._y=$[1],this._z=$[2],$[3]!==void 0&&(this._order=$[3]),this._onChangeCallback(),this}toArray($=[],lt=0){return $[lt]=this._x,$[lt+1]=this._y,$[lt+2]=this._z,$[lt+3]=this._order,$}_onChange($){return this._onChangeCallback=$,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Euler.DEFAULT_ORDER="XYZ";let Layers$1=class{constructor(){this.mask=1}set($){this.mask=(1<<$|0)>>>0}enable($){this.mask|=1<<$|0}enableAll(){this.mask=-1}toggle($){this.mask^=1<<$|0}disable($){this.mask&=~(1<<$|0)}disableAll(){this.mask=0}test($){return(this.mask&$.mask)!==0}isEnabled($){return(this.mask&(1<<$|0))!==0}},_object3DId=0;const _v1$4=new Vector3,_q1=new Quaternion,_m1$1=new Matrix4,_target=new Vector3,_position$3=new Vector3,_scale$2=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"};class Object3D extends EventDispatcher{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DEFAULT_UP.clone();const $=new Vector3,lt=new Euler,ft=new Quaternion,St=new Vector3(1,1,1);function Tt(){ft.setFromEuler(lt,!1)}function Ct(){lt.setFromQuaternion(ft,void 0,!1)}lt._onChange(Tt),ft._onChange(Ct),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:$},rotation:{configurable:!0,enumerable:!0,value:lt},quaternion:{configurable:!0,enumerable:!0,value:ft},scale:{configurable:!0,enumerable:!0,value:St},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Layers$1,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4($){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply($),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion($){return this.quaternion.premultiply($),this}setRotationFromAxisAngle($,lt){this.quaternion.setFromAxisAngle($,lt)}setRotationFromEuler($){this.quaternion.setFromEuler($,!0)}setRotationFromMatrix($){this.quaternion.setFromRotationMatrix($)}setRotationFromQuaternion($){this.quaternion.copy($)}rotateOnAxis($,lt){return _q1.setFromAxisAngle($,lt),this.quaternion.multiply(_q1),this}rotateOnWorldAxis($,lt){return _q1.setFromAxisAngle($,lt),this.quaternion.premultiply(_q1),this}rotateX($){return this.rotateOnAxis(_xAxis,$)}rotateY($){return this.rotateOnAxis(_yAxis,$)}rotateZ($){return this.rotateOnAxis(_zAxis,$)}translateOnAxis($,lt){return _v1$4.copy($).applyQuaternion(this.quaternion),this.position.add(_v1$4.multiplyScalar(lt)),this}translateX($){return this.translateOnAxis(_xAxis,$)}translateY($){return this.translateOnAxis(_yAxis,$)}translateZ($){return this.translateOnAxis(_zAxis,$)}localToWorld($){return this.updateWorldMatrix(!0,!1),$.applyMatrix4(this.matrixWorld)}worldToLocal($){return this.updateWorldMatrix(!0,!1),$.applyMatrix4(_m1$1.copy(this.matrixWorld).invert())}lookAt($,lt,ft){$.isVector3?_target.copy($):_target.set($,lt,ft);const St=this.parent;this.updateWorldMatrix(!0,!1),_position$3.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1.lookAt(_position$3,_target,this.up):_m1$1.lookAt(_target,_position$3,this.up),this.quaternion.setFromRotationMatrix(_m1$1),St&&(_m1$1.extractRotation(St.matrixWorld),_q1.setFromRotationMatrix(_m1$1),this.quaternion.premultiply(_q1.invert()))}add($){if(arguments.length>1){for(let lt=0;lt<arguments.length;lt++)this.add(arguments[lt]);return this}return $===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",$),this):($&&$.isObject3D?($.parent!==null&&$.parent.remove($),$.parent=this,this.children.push($),$.dispatchEvent(_addedEvent)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",$),this)}remove($){if(arguments.length>1){for(let ft=0;ft<arguments.length;ft++)this.remove(arguments[ft]);return this}const lt=this.children.indexOf($);return lt!==-1&&($.parent=null,this.children.splice(lt,1),$.dispatchEvent(_removedEvent)),this}removeFromParent(){const $=this.parent;return $!==null&&$.remove(this),this}clear(){for(let $=0;$<this.children.length;$++){const lt=this.children[$];lt.parent=null,lt.dispatchEvent(_removedEvent)}return this.children.length=0,this}attach($){return this.updateWorldMatrix(!0,!1),_m1$1.copy(this.matrixWorld).invert(),$.parent!==null&&($.parent.updateWorldMatrix(!0,!1),_m1$1.multiply($.parent.matrixWorld)),$.applyMatrix4(_m1$1),this.add($),$.updateWorldMatrix(!1,!0),this}getObjectById($){return this.getObjectByProperty("id",$)}getObjectByName($){return this.getObjectByProperty("name",$)}getObjectByProperty($,lt){if(this[$]===lt)return this;for(let ft=0,St=this.children.length;ft<St;ft++){const Ct=this.children[ft].getObjectByProperty($,lt);if(Ct!==void 0)return Ct}}getObjectsByProperty($,lt){let ft=[];this[$]===lt&&ft.push(this);for(let St=0,Tt=this.children.length;St<Tt;St++){const Ct=this.children[St].getObjectsByProperty($,lt);Ct.length>0&&(ft=ft.concat(Ct))}return ft}getWorldPosition($){return this.updateWorldMatrix(!0,!1),$.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion($){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,$,_scale$2),$}getWorldScale($){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,_quaternion$2,$),$}getWorldDirection($){this.updateWorldMatrix(!0,!1);const lt=this.matrixWorld.elements;return $.set(lt[8],lt[9],lt[10]).normalize()}raycast(){}traverse($){$(this);const lt=this.children;for(let ft=0,St=lt.length;ft<St;ft++)lt[ft].traverse($)}traverseVisible($){if(this.visible===!1)return;$(this);const lt=this.children;for(let ft=0,St=lt.length;ft<St;ft++)lt[ft].traverseVisible($)}traverseAncestors($){const lt=this.parent;lt!==null&&($(lt),lt.traverseAncestors($))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld($){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||$)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,$=!0);const lt=this.children;for(let ft=0,St=lt.length;ft<St;ft++){const Tt=lt[ft];(Tt.matrixWorldAutoUpdate===!0||$===!0)&&Tt.updateMatrixWorld($)}}updateWorldMatrix($,lt){const ft=this.parent;if($===!0&&ft!==null&&ft.matrixWorldAutoUpdate===!0&&ft.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),lt===!0){const St=this.children;for(let Tt=0,Ct=St.length;Tt<Ct;Tt++){const At=St[Tt];At.matrixWorldAutoUpdate===!0&&At.updateWorldMatrix(!1,!0)}}}toJSON($){const lt=$===void 0||typeof $=="string",ft={};lt&&($={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},ft.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const St={};St.uuid=this.uuid,St.type=this.type,this.name!==""&&(St.name=this.name),this.castShadow===!0&&(St.castShadow=!0),this.receiveShadow===!0&&(St.receiveShadow=!0),this.visible===!1&&(St.visible=!1),this.frustumCulled===!1&&(St.frustumCulled=!1),this.renderOrder!==0&&(St.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(St.userData=this.userData),St.layers=this.layers.mask,St.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(St.matrixAutoUpdate=!1),this.isInstancedMesh&&(St.type="InstancedMesh",St.count=this.count,St.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(St.instanceColor=this.instanceColor.toJSON()));function Tt(At,Rt){return At[Rt.uuid]===void 0&&(At[Rt.uuid]=Rt.toJSON($)),Rt.uuid}if(this.isScene)this.background&&(this.background.isColor?St.background=this.background.toJSON():this.background.isTexture&&(St.background=this.background.toJSON($).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(St.environment=this.environment.toJSON($).uuid);else if(this.isMesh||this.isLine||this.isPoints){St.geometry=Tt($.geometries,this.geometry);const At=this.geometry.parameters;if(At!==void 0&&At.shapes!==void 0){const Rt=At.shapes;if(Array.isArray(Rt))for(let kt=0,Nt=Rt.length;kt<Nt;kt++){const Bt=Rt[kt];Tt($.shapes,Bt)}else Tt($.shapes,Rt)}}if(this.isSkinnedMesh&&(St.bindMode=this.bindMode,St.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(Tt($.skeletons,this.skeleton),St.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const At=[];for(let Rt=0,kt=this.material.length;Rt<kt;Rt++)At.push(Tt($.materials,this.material[Rt]));St.material=At}else St.material=Tt($.materials,this.material);if(this.children.length>0){St.children=[];for(let At=0;At<this.children.length;At++)St.children.push(this.children[At].toJSON($).object)}if(this.animations.length>0){St.animations=[];for(let At=0;At<this.animations.length;At++){const Rt=this.animations[At];St.animations.push(Tt($.animations,Rt))}}if(lt){const At=Ct($.geometries),Rt=Ct($.materials),kt=Ct($.textures),Nt=Ct($.images),Bt=Ct($.shapes),Ut=Ct($.skeletons),zt=Ct($.animations),Zt=Ct($.nodes);At.length>0&&(ft.geometries=At),Rt.length>0&&(ft.materials=Rt),kt.length>0&&(ft.textures=kt),Nt.length>0&&(ft.images=Nt),Bt.length>0&&(ft.shapes=Bt),Ut.length>0&&(ft.skeletons=Ut),zt.length>0&&(ft.animations=zt),Zt.length>0&&(ft.nodes=Zt)}return ft.object=St,ft;function Ct(At){const Rt=[];for(const kt in At){const Nt=At[kt];delete Nt.metadata,Rt.push(Nt)}return Rt}}clone($){return new this.constructor().copy(this,$)}copy($,lt=!0){if(this.name=$.name,this.up.copy($.up),this.position.copy($.position),this.rotation.order=$.rotation.order,this.quaternion.copy($.quaternion),this.scale.copy($.scale),this.matrix.copy($.matrix),this.matrixWorld.copy($.matrixWorld),this.matrixAutoUpdate=$.matrixAutoUpdate,this.matrixWorldNeedsUpdate=$.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=$.matrixWorldAutoUpdate,this.layers.mask=$.layers.mask,this.visible=$.visible,this.castShadow=$.castShadow,this.receiveShadow=$.receiveShadow,this.frustumCulled=$.frustumCulled,this.renderOrder=$.renderOrder,this.userData=JSON.parse(JSON.stringify($.userData)),lt===!0)for(let ft=0;ft<$.children.length;ft++){const St=$.children[ft];this.add(St.clone())}return this}}Object3D.DEFAULT_UP=new Vector3(0,1,0);Object3D.DEFAULT_MATRIX_AUTO_UPDATE=!0;Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const _v0$1=new Vector3,_v1$3=new Vector3,_v2$2=new Vector3,_v3$1=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3;class Triangle{constructor($=new Vector3,lt=new Vector3,ft=new Vector3){this.a=$,this.b=lt,this.c=ft}static getNormal($,lt,ft,St){St.subVectors(ft,lt),_v0$1.subVectors($,lt),St.cross(_v0$1);const Tt=St.lengthSq();return Tt>0?St.multiplyScalar(1/Math.sqrt(Tt)):St.set(0,0,0)}static getBarycoord($,lt,ft,St,Tt){_v0$1.subVectors(St,lt),_v1$3.subVectors(ft,lt),_v2$2.subVectors($,lt);const Ct=_v0$1.dot(_v0$1),At=_v0$1.dot(_v1$3),Rt=_v0$1.dot(_v2$2),kt=_v1$3.dot(_v1$3),Nt=_v1$3.dot(_v2$2),Bt=Ct*kt-At*At;if(Bt===0)return Tt.set(-2,-1,-1);const Ut=1/Bt,zt=(kt*Rt-At*Nt)*Ut,Zt=(Ct*Nt-At*Rt)*Ut;return Tt.set(1-zt-Zt,Zt,zt)}static containsPoint($,lt,ft,St){return this.getBarycoord($,lt,ft,St,_v3$1),_v3$1.x>=0&&_v3$1.y>=0&&_v3$1.x+_v3$1.y<=1}static getUV($,lt,ft,St,Tt,Ct,At,Rt){return this.getBarycoord($,lt,ft,St,_v3$1),Rt.set(0,0),Rt.addScaledVector(Tt,_v3$1.x),Rt.addScaledVector(Ct,_v3$1.y),Rt.addScaledVector(At,_v3$1.z),Rt}static isFrontFacing($,lt,ft,St){return _v0$1.subVectors(ft,lt),_v1$3.subVectors($,lt),_v0$1.cross(_v1$3).dot(St)<0}set($,lt,ft){return this.a.copy($),this.b.copy(lt),this.c.copy(ft),this}setFromPointsAndIndices($,lt,ft,St){return this.a.copy($[lt]),this.b.copy($[ft]),this.c.copy($[St]),this}setFromAttributeAndIndices($,lt,ft,St){return this.a.fromBufferAttribute($,lt),this.b.fromBufferAttribute($,ft),this.c.fromBufferAttribute($,St),this}clone(){return new this.constructor().copy(this)}copy($){return this.a.copy($.a),this.b.copy($.b),this.c.copy($.c),this}getArea(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$1.cross(_v1$3).length()*.5}getMidpoint($){return $.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal($){return Triangle.getNormal(this.a,this.b,this.c,$)}getPlane($){return $.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord($,lt){return Triangle.getBarycoord($,this.a,this.b,this.c,lt)}getUV($,lt,ft,St,Tt){return Triangle.getUV($,this.a,this.b,this.c,lt,ft,St,Tt)}containsPoint($){return Triangle.containsPoint($,this.a,this.b,this.c)}isFrontFacing($){return Triangle.isFrontFacing(this.a,this.b,this.c,$)}intersectsBox($){return $.intersectsTriangle(this)}closestPointToPoint($,lt){const ft=this.a,St=this.b,Tt=this.c;let Ct,At;_vab.subVectors(St,ft),_vac.subVectors(Tt,ft),_vap.subVectors($,ft);const Rt=_vab.dot(_vap),kt=_vac.dot(_vap);if(Rt<=0&&kt<=0)return lt.copy(ft);_vbp.subVectors($,St);const Nt=_vab.dot(_vbp),Bt=_vac.dot(_vbp);if(Nt>=0&&Bt<=Nt)return lt.copy(St);const Ut=Rt*Bt-Nt*kt;if(Ut<=0&&Rt>=0&&Nt<=0)return Ct=Rt/(Rt-Nt),lt.copy(ft).addScaledVector(_vab,Ct);_vcp.subVectors($,Tt);const zt=_vab.dot(_vcp),Zt=_vac.dot(_vcp);if(Zt>=0&&zt<=Zt)return lt.copy(Tt);const ln=zt*kt-Rt*Zt;if(ln<=0&&kt>=0&&Zt<=0)return At=kt/(kt-Zt),lt.copy(ft).addScaledVector(_vac,At);const cn=Nt*Zt-zt*Bt;if(cn<=0&&Bt-Nt>=0&&zt-Zt>=0)return _vbc.subVectors(Tt,St),At=(Bt-Nt)/(Bt-Nt+(zt-Zt)),lt.copy(St).addScaledVector(_vbc,At);const hn=1/(cn+ln+Ut);return Ct=ln*hn,At=Ut*hn,lt.copy(ft).addScaledVector(_vab,Ct).addScaledVector(_vac,At)}equals($){return $.a.equals(this.a)&&$.b.equals(this.b)&&$.c.equals(this.c)}}let materialId=0;class Material extends EventDispatcher{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:materialId++}),this.uuid=generateUUID(),this.name="",this.type="Material",this.blending=NormalBlending,this.side=FrontSide,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest($){this._alphaTest>0!=$>0&&this.version++,this._alphaTest=$}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues($){if($!==void 0)for(const lt in $){const ft=$[lt];if(ft===void 0){console.warn("THREE.Material: '"+lt+"' parameter is undefined.");continue}const St=this[lt];if(St===void 0){console.warn("THREE."+this.type+": '"+lt+"' is not a property of this material.");continue}St&&St.isColor?St.set(ft):St&&St.isVector3&&ft&&ft.isVector3?St.copy(ft):this[lt]=ft}}toJSON($){const lt=$===void 0||typeof $=="string";lt&&($={textures:{},images:{}});const ft={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};ft.uuid=this.uuid,ft.type=this.type,this.name!==""&&(ft.name=this.name),this.color&&this.color.isColor&&(ft.color=this.color.getHex()),this.roughness!==void 0&&(ft.roughness=this.roughness),this.metalness!==void 0&&(ft.metalness=this.metalness),this.sheen!==void 0&&(ft.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(ft.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(ft.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(ft.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(ft.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(ft.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(ft.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(ft.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(ft.shininess=this.shininess),this.clearcoat!==void 0&&(ft.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(ft.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(ft.clearcoatMap=this.clearcoatMap.toJSON($).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(ft.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON($).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(ft.clearcoatNormalMap=this.clearcoatNormalMap.toJSON($).uuid,ft.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(ft.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(ft.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(ft.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(ft.iridescenceMap=this.iridescenceMap.toJSON($).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(ft.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON($).uuid),this.map&&this.map.isTexture&&(ft.map=this.map.toJSON($).uuid),this.matcap&&this.matcap.isTexture&&(ft.matcap=this.matcap.toJSON($).uuid),this.alphaMap&&this.alphaMap.isTexture&&(ft.alphaMap=this.alphaMap.toJSON($).uuid),this.lightMap&&this.lightMap.isTexture&&(ft.lightMap=this.lightMap.toJSON($).uuid,ft.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(ft.aoMap=this.aoMap.toJSON($).uuid,ft.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(ft.bumpMap=this.bumpMap.toJSON($).uuid,ft.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(ft.normalMap=this.normalMap.toJSON($).uuid,ft.normalMapType=this.normalMapType,ft.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(ft.displacementMap=this.displacementMap.toJSON($).uuid,ft.displacementScale=this.displacementScale,ft.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(ft.roughnessMap=this.roughnessMap.toJSON($).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(ft.metalnessMap=this.metalnessMap.toJSON($).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(ft.emissiveMap=this.emissiveMap.toJSON($).uuid),this.specularMap&&this.specularMap.isTexture&&(ft.specularMap=this.specularMap.toJSON($).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(ft.specularIntensityMap=this.specularIntensityMap.toJSON($).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(ft.specularColorMap=this.specularColorMap.toJSON($).uuid),this.envMap&&this.envMap.isTexture&&(ft.envMap=this.envMap.toJSON($).uuid,this.combine!==void 0&&(ft.combine=this.combine)),this.envMapIntensity!==void 0&&(ft.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(ft.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(ft.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(ft.gradientMap=this.gradientMap.toJSON($).uuid),this.transmission!==void 0&&(ft.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(ft.transmissionMap=this.transmissionMap.toJSON($).uuid),this.thickness!==void 0&&(ft.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(ft.thicknessMap=this.thicknessMap.toJSON($).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(ft.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(ft.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(ft.size=this.size),this.shadowSide!==null&&(ft.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(ft.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(ft.blending=this.blending),this.side!==FrontSide&&(ft.side=this.side),this.vertexColors&&(ft.vertexColors=!0),this.opacity<1&&(ft.opacity=this.opacity),this.transparent===!0&&(ft.transparent=this.transparent),ft.depthFunc=this.depthFunc,ft.depthTest=this.depthTest,ft.depthWrite=this.depthWrite,ft.colorWrite=this.colorWrite,ft.stencilWrite=this.stencilWrite,ft.stencilWriteMask=this.stencilWriteMask,ft.stencilFunc=this.stencilFunc,ft.stencilRef=this.stencilRef,ft.stencilFuncMask=this.stencilFuncMask,ft.stencilFail=this.stencilFail,ft.stencilZFail=this.stencilZFail,ft.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(ft.rotation=this.rotation),this.polygonOffset===!0&&(ft.polygonOffset=!0),this.polygonOffsetFactor!==0&&(ft.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(ft.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(ft.linewidth=this.linewidth),this.dashSize!==void 0&&(ft.dashSize=this.dashSize),this.gapSize!==void 0&&(ft.gapSize=this.gapSize),this.scale!==void 0&&(ft.scale=this.scale),this.dithering===!0&&(ft.dithering=!0),this.alphaTest>0&&(ft.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(ft.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(ft.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(ft.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(ft.wireframe=this.wireframe),this.wireframeLinewidth>1&&(ft.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(ft.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(ft.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(ft.flatShading=this.flatShading),this.visible===!1&&(ft.visible=!1),this.toneMapped===!1&&(ft.toneMapped=!1),this.fog===!1&&(ft.fog=!1),Object.keys(this.userData).length>0&&(ft.userData=this.userData);function St(Tt){const Ct=[];for(const At in Tt){const Rt=Tt[At];delete Rt.metadata,Ct.push(Rt)}return Ct}if(lt){const Tt=St($.textures),Ct=St($.images);Tt.length>0&&(ft.textures=Tt),Ct.length>0&&(ft.images=Ct)}return ft}clone(){return new this.constructor().copy(this)}copy($){this.name=$.name,this.blending=$.blending,this.side=$.side,this.vertexColors=$.vertexColors,this.opacity=$.opacity,this.transparent=$.transparent,this.blendSrc=$.blendSrc,this.blendDst=$.blendDst,this.blendEquation=$.blendEquation,this.blendSrcAlpha=$.blendSrcAlpha,this.blendDstAlpha=$.blendDstAlpha,this.blendEquationAlpha=$.blendEquationAlpha,this.depthFunc=$.depthFunc,this.depthTest=$.depthTest,this.depthWrite=$.depthWrite,this.stencilWriteMask=$.stencilWriteMask,this.stencilFunc=$.stencilFunc,this.stencilRef=$.stencilRef,this.stencilFuncMask=$.stencilFuncMask,this.stencilFail=$.stencilFail,this.stencilZFail=$.stencilZFail,this.stencilZPass=$.stencilZPass,this.stencilWrite=$.stencilWrite;const lt=$.clippingPlanes;let ft=null;if(lt!==null){const St=lt.length;ft=new Array(St);for(let Tt=0;Tt!==St;++Tt)ft[Tt]=lt[Tt].clone()}return this.clippingPlanes=ft,this.clipIntersection=$.clipIntersection,this.clipShadows=$.clipShadows,this.shadowSide=$.shadowSide,this.colorWrite=$.colorWrite,this.precision=$.precision,this.polygonOffset=$.polygonOffset,this.polygonOffsetFactor=$.polygonOffsetFactor,this.polygonOffsetUnits=$.polygonOffsetUnits,this.dithering=$.dithering,this.alphaTest=$.alphaTest,this.alphaToCoverage=$.alphaToCoverage,this.premultipliedAlpha=$.premultipliedAlpha,this.forceSinglePass=$.forceSinglePass,this.visible=$.visible,this.toneMapped=$.toneMapped,this.userData=JSON.parse(JSON.stringify($.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate($){$===!0&&this.version++}}const _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function hue2rgb(dt,$,lt){return lt<0&&(lt+=1),lt>1&&(lt-=1),lt<1/6?dt+($-dt)*6*lt:lt<1/2?$:lt<2/3?dt+($-dt)*6*(2/3-lt):dt}class Color{constructor($,lt,ft){return this.isColor=!0,this.r=1,this.g=1,this.b=1,lt===void 0&&ft===void 0?this.set($):this.setRGB($,lt,ft)}set($){return $&&$.isColor?this.copy($):typeof $=="number"?this.setHex($):typeof $=="string"&&this.setStyle($),this}setScalar($){return this.r=$,this.g=$,this.b=$,this}setHex($,lt=SRGBColorSpace){return $=Math.floor($),this.r=($>>16&255)/255,this.g=($>>8&255)/255,this.b=($&255)/255,ColorManagement.toWorkingColorSpace(this,lt),this}setRGB($,lt,ft,St=ColorManagement.workingColorSpace){return this.r=$,this.g=lt,this.b=ft,ColorManagement.toWorkingColorSpace(this,St),this}setHSL($,lt,ft,St=ColorManagement.workingColorSpace){if($=euclideanModulo($,1),lt=clamp$1(lt,0,1),ft=clamp$1(ft,0,1),lt===0)this.r=this.g=this.b=ft;else{const Tt=ft<=.5?ft*(1+lt):ft+lt-ft*lt,Ct=2*ft-Tt;this.r=hue2rgb(Ct,Tt,$+1/3),this.g=hue2rgb(Ct,Tt,$),this.b=hue2rgb(Ct,Tt,$-1/3)}return ColorManagement.toWorkingColorSpace(this,St),this}setStyle($,lt=SRGBColorSpace){function ft(Tt){Tt!==void 0&&parseFloat(Tt)<1&&console.warn("THREE.Color: Alpha component of "+$+" will be ignored.")}let St;if(St=/^(\w+)\(([^\)]*)\)/.exec($)){let Tt;const Ct=St[1],At=St[2];switch(Ct){case"rgb":case"rgba":if(Tt=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(At))return this.r=Math.min(255,parseInt(Tt[1],10))/255,this.g=Math.min(255,parseInt(Tt[2],10))/255,this.b=Math.min(255,parseInt(Tt[3],10))/255,ColorManagement.toWorkingColorSpace(this,lt),ft(Tt[4]),this;if(Tt=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(At))return this.r=Math.min(100,parseInt(Tt[1],10))/100,this.g=Math.min(100,parseInt(Tt[2],10))/100,this.b=Math.min(100,parseInt(Tt[3],10))/100,ColorManagement.toWorkingColorSpace(this,lt),ft(Tt[4]),this;break;case"hsl":case"hsla":if(Tt=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(At)){const Rt=parseFloat(Tt[1])/360,kt=parseFloat(Tt[2])/100,Nt=parseFloat(Tt[3])/100;return ft(Tt[4]),this.setHSL(Rt,kt,Nt,lt)}break;default:console.warn("THREE.Color: Unknown color model "+$)}}else if(St=/^\#([A-Fa-f\d]+)$/.exec($)){const Tt=St[1],Ct=Tt.length;if(Ct===3)return this.r=parseInt(Tt.charAt(0)+Tt.charAt(0),16)/255,this.g=parseInt(Tt.charAt(1)+Tt.charAt(1),16)/255,this.b=parseInt(Tt.charAt(2)+Tt.charAt(2),16)/255,ColorManagement.toWorkingColorSpace(this,lt),this;if(Ct===6)return this.r=parseInt(Tt.charAt(0)+Tt.charAt(1),16)/255,this.g=parseInt(Tt.charAt(2)+Tt.charAt(3),16)/255,this.b=parseInt(Tt.charAt(4)+Tt.charAt(5),16)/255,ColorManagement.toWorkingColorSpace(this,lt),this;console.warn("THREE.Color: Invalid hex color "+$)}else if($&&$.length>0)return this.setColorName($,lt);return this}setColorName($,lt=SRGBColorSpace){const ft=_colorKeywords[$.toLowerCase()];return ft!==void 0?this.setHex(ft,lt):console.warn("THREE.Color: Unknown color "+$),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy($){return this.r=$.r,this.g=$.g,this.b=$.b,this}copySRGBToLinear($){return this.r=SRGBToLinear($.r),this.g=SRGBToLinear($.g),this.b=SRGBToLinear($.b),this}copyLinearToSRGB($){return this.r=LinearToSRGB($.r),this.g=LinearToSRGB($.g),this.b=LinearToSRGB($.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex($=SRGBColorSpace){return ColorManagement.fromWorkingColorSpace(_color.copy(this),$),clamp$1(_color.r*255,0,255)<<16^clamp$1(_color.g*255,0,255)<<8^clamp$1(_color.b*255,0,255)<<0}getHexString($=SRGBColorSpace){return("000000"+this.getHex($).toString(16)).slice(-6)}getHSL($,lt=ColorManagement.workingColorSpace){ColorManagement.fromWorkingColorSpace(_color.copy(this),lt);const ft=_color.r,St=_color.g,Tt=_color.b,Ct=Math.max(ft,St,Tt),At=Math.min(ft,St,Tt);let Rt,kt;const Nt=(At+Ct)/2;if(At===Ct)Rt=0,kt=0;else{const Bt=Ct-At;switch(kt=Nt<=.5?Bt/(Ct+At):Bt/(2-Ct-At),Ct){case ft:Rt=(St-Tt)/Bt+(St<Tt?6:0);break;case St:Rt=(Tt-ft)/Bt+2;break;case Tt:Rt=(ft-St)/Bt+4;break}Rt/=6}return $.h=Rt,$.s=kt,$.l=Nt,$}getRGB($,lt=ColorManagement.workingColorSpace){return ColorManagement.fromWorkingColorSpace(_color.copy(this),lt),$.r=_color.r,$.g=_color.g,$.b=_color.b,$}getStyle($=SRGBColorSpace){ColorManagement.fromWorkingColorSpace(_color.copy(this),$);const lt=_color.r,ft=_color.g,St=_color.b;return $!==SRGBColorSpace?`color(${$} ${lt.toFixed(3)} ${ft.toFixed(3)} ${St.toFixed(3)})`:`rgb(${lt*255|0},${ft*255|0},${St*255|0})`}offsetHSL($,lt,ft){return this.getHSL(_hslA),_hslA.h+=$,_hslA.s+=lt,_hslA.l+=ft,this.setHSL(_hslA.h,_hslA.s,_hslA.l),this}add($){return this.r+=$.r,this.g+=$.g,this.b+=$.b,this}addColors($,lt){return this.r=$.r+lt.r,this.g=$.g+lt.g,this.b=$.b+lt.b,this}addScalar($){return this.r+=$,this.g+=$,this.b+=$,this}sub($){return this.r=Math.max(0,this.r-$.r),this.g=Math.max(0,this.g-$.g),this.b=Math.max(0,this.b-$.b),this}multiply($){return this.r*=$.r,this.g*=$.g,this.b*=$.b,this}multiplyScalar($){return this.r*=$,this.g*=$,this.b*=$,this}lerp($,lt){return this.r+=($.r-this.r)*lt,this.g+=($.g-this.g)*lt,this.b+=($.b-this.b)*lt,this}lerpColors($,lt,ft){return this.r=$.r+(lt.r-$.r)*ft,this.g=$.g+(lt.g-$.g)*ft,this.b=$.b+(lt.b-$.b)*ft,this}lerpHSL($,lt){this.getHSL(_hslA),$.getHSL(_hslB);const ft=lerp(_hslA.h,_hslB.h,lt),St=lerp(_hslA.s,_hslB.s,lt),Tt=lerp(_hslA.l,_hslB.l,lt);return this.setHSL(ft,St,Tt),this}equals($){return $.r===this.r&&$.g===this.g&&$.b===this.b}fromArray($,lt=0){return this.r=$[lt],this.g=$[lt+1],this.b=$[lt+2],this}toArray($=[],lt=0){return $[lt]=this.r,$[lt+1]=this.g,$[lt+2]=this.b,$}fromBufferAttribute($,lt){return this.r=$.getX(lt),this.g=$.getY(lt),this.b=$.getZ(lt),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const _color=new Color;Color.NAMES=_colorKeywords;class MeshBasicMaterial extends Material{constructor($){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues($)}copy($){return super.copy($),this.color.copy($.color),this.map=$.map,this.lightMap=$.lightMap,this.lightMapIntensity=$.lightMapIntensity,this.aoMap=$.aoMap,this.aoMapIntensity=$.aoMapIntensity,this.specularMap=$.specularMap,this.alphaMap=$.alphaMap,this.envMap=$.envMap,this.combine=$.combine,this.reflectivity=$.reflectivity,this.refractionRatio=$.refractionRatio,this.wireframe=$.wireframe,this.wireframeLinewidth=$.wireframeLinewidth,this.wireframeLinecap=$.wireframeLinecap,this.wireframeLinejoin=$.wireframeLinejoin,this.fog=$.fog,this}}const _vector$9=new Vector3,_vector2$1=new Vector2;class BufferAttribute{constructor($,lt,ft=!1){if(Array.isArray($))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=$,this.itemSize=lt,this.count=$!==void 0?$.length/lt:0,this.normalized=ft,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate($){$===!0&&this.version++}setUsage($){return this.usage=$,this}copy($){return this.name=$.name,this.array=new $.array.constructor($.array),this.itemSize=$.itemSize,this.count=$.count,this.normalized=$.normalized,this.usage=$.usage,this}copyAt($,lt,ft){$*=this.itemSize,ft*=lt.itemSize;for(let St=0,Tt=this.itemSize;St<Tt;St++)this.array[$+St]=lt.array[ft+St];return this}copyArray($){return this.array.set($),this}applyMatrix3($){if(this.itemSize===2)for(let lt=0,ft=this.count;lt<ft;lt++)_vector2$1.fromBufferAttribute(this,lt),_vector2$1.applyMatrix3($),this.setXY(lt,_vector2$1.x,_vector2$1.y);else if(this.itemSize===3)for(let lt=0,ft=this.count;lt<ft;lt++)_vector$9.fromBufferAttribute(this,lt),_vector$9.applyMatrix3($),this.setXYZ(lt,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyMatrix4($){for(let lt=0,ft=this.count;lt<ft;lt++)_vector$9.fromBufferAttribute(this,lt),_vector$9.applyMatrix4($),this.setXYZ(lt,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyNormalMatrix($){for(let lt=0,ft=this.count;lt<ft;lt++)_vector$9.fromBufferAttribute(this,lt),_vector$9.applyNormalMatrix($),this.setXYZ(lt,_vector$9.x,_vector$9.y,_vector$9.z);return this}transformDirection($){for(let lt=0,ft=this.count;lt<ft;lt++)_vector$9.fromBufferAttribute(this,lt),_vector$9.transformDirection($),this.setXYZ(lt,_vector$9.x,_vector$9.y,_vector$9.z);return this}set($,lt=0){return this.array.set($,lt),this}getX($){let lt=this.array[$*this.itemSize];return this.normalized&&(lt=denormalize(lt,this.array)),lt}setX($,lt){return this.normalized&&(lt=normalize(lt,this.array)),this.array[$*this.itemSize]=lt,this}getY($){let lt=this.array[$*this.itemSize+1];return this.normalized&&(lt=denormalize(lt,this.array)),lt}setY($,lt){return this.normalized&&(lt=normalize(lt,this.array)),this.array[$*this.itemSize+1]=lt,this}getZ($){let lt=this.array[$*this.itemSize+2];return this.normalized&&(lt=denormalize(lt,this.array)),lt}setZ($,lt){return this.normalized&&(lt=normalize(lt,this.array)),this.array[$*this.itemSize+2]=lt,this}getW($){let lt=this.array[$*this.itemSize+3];return this.normalized&&(lt=denormalize(lt,this.array)),lt}setW($,lt){return this.normalized&&(lt=normalize(lt,this.array)),this.array[$*this.itemSize+3]=lt,this}setXY($,lt,ft){return $*=this.itemSize,this.normalized&&(lt=normalize(lt,this.array),ft=normalize(ft,this.array)),this.array[$+0]=lt,this.array[$+1]=ft,this}setXYZ($,lt,ft,St){return $*=this.itemSize,this.normalized&&(lt=normalize(lt,this.array),ft=normalize(ft,this.array),St=normalize(St,this.array)),this.array[$+0]=lt,this.array[$+1]=ft,this.array[$+2]=St,this}setXYZW($,lt,ft,St,Tt){return $*=this.itemSize,this.normalized&&(lt=normalize(lt,this.array),ft=normalize(ft,this.array),St=normalize(St,this.array),Tt=normalize(Tt,this.array)),this.array[$+0]=lt,this.array[$+1]=ft,this.array[$+2]=St,this.array[$+3]=Tt,this}onUpload($){return this.onUploadCallback=$,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const $={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&($.name=this.name),this.usage!==StaticDrawUsage&&($.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&($.updateRange=this.updateRange),$}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Int8BufferAttribute extends BufferAttribute{constructor($,lt,ft){super(new Int8Array($),lt,ft)}}class Uint8BufferAttribute extends BufferAttribute{constructor($,lt,ft){super(new Uint8Array($),lt,ft)}}class Uint8ClampedBufferAttribute extends BufferAttribute{constructor($,lt,ft){super(new Uint8ClampedArray($),lt,ft)}}class Int16BufferAttribute extends BufferAttribute{constructor($,lt,ft){super(new Int16Array($),lt,ft)}}class Uint16BufferAttribute extends BufferAttribute{constructor($,lt,ft){super(new Uint16Array($),lt,ft)}}class Int32BufferAttribute extends BufferAttribute{constructor($,lt,ft){super(new Int32Array($),lt,ft)}}class Uint32BufferAttribute extends BufferAttribute{constructor($,lt,ft){super(new Uint32Array($),lt,ft)}}class Float16BufferAttribute extends BufferAttribute{constructor($,lt,ft){super(new Uint16Array($),lt,ft),this.isFloat16BufferAttribute=!0}}class Float32BufferAttribute extends BufferAttribute{constructor($,lt,ft){super(new Float32Array($),lt,ft)}}class Float64BufferAttribute extends BufferAttribute{constructor($,lt,ft){super(new Float64Array($),lt,ft)}}let _id$1=0;const _m1=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$1$1=new Box3,_boxMorphTargets=new Box3,_vector$8=new Vector3;class BufferGeometry extends EventDispatcher{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_id$1++}),this.uuid=generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex($){return Array.isArray($)?this.index=new(arrayNeedsUint32($)?Uint32BufferAttribute:Uint16BufferAttribute)($,1):this.index=$,this}getAttribute($){return this.attributes[$]}setAttribute($,lt){return this.attributes[$]=lt,this}deleteAttribute($){return delete this.attributes[$],this}hasAttribute($){return this.attributes[$]!==void 0}addGroup($,lt,ft=0){this.groups.push({start:$,count:lt,materialIndex:ft})}clearGroups(){this.groups=[]}setDrawRange($,lt){this.drawRange.start=$,this.drawRange.count=lt}applyMatrix4($){const lt=this.attributes.position;lt!==void 0&&(lt.applyMatrix4($),lt.needsUpdate=!0);const ft=this.attributes.normal;if(ft!==void 0){const Tt=new Matrix3().getNormalMatrix($);ft.applyNormalMatrix(Tt),ft.needsUpdate=!0}const St=this.attributes.tangent;return St!==void 0&&(St.transformDirection($),St.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion($){return _m1.makeRotationFromQuaternion($),this.applyMatrix4(_m1),this}rotateX($){return _m1.makeRotationX($),this.applyMatrix4(_m1),this}rotateY($){return _m1.makeRotationY($),this.applyMatrix4(_m1),this}rotateZ($){return _m1.makeRotationZ($),this.applyMatrix4(_m1),this}translate($,lt,ft){return _m1.makeTranslation($,lt,ft),this.applyMatrix4(_m1),this}scale($,lt,ft){return _m1.makeScale($,lt,ft),this.applyMatrix4(_m1),this}lookAt($){return _obj.lookAt($),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this}setFromPoints($){const lt=[];for(let ft=0,St=$.length;ft<St;ft++){const Tt=$[ft];lt.push(Tt.x,Tt.y,Tt.z||0)}return this.setAttribute("position",new Float32BufferAttribute(lt,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const $=this.attributes.position,lt=this.morphAttributes.position;if($&&$.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Vector3(-1/0,-1/0,-1/0),new Vector3(1/0,1/0,1/0));return}if($!==void 0){if(this.boundingBox.setFromBufferAttribute($),lt)for(let ft=0,St=lt.length;ft<St;ft++){const Tt=lt[ft];_box$1$1.setFromBufferAttribute(Tt),this.morphTargetsRelative?(_vector$8.addVectors(this.boundingBox.min,_box$1$1.min),this.boundingBox.expandByPoint(_vector$8),_vector$8.addVectors(this.boundingBox.max,_box$1$1.max),this.boundingBox.expandByPoint(_vector$8)):(this.boundingBox.expandByPoint(_box$1$1.min),this.boundingBox.expandByPoint(_box$1$1.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere$1);const $=this.attributes.position,lt=this.morphAttributes.position;if($&&$.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Vector3,1/0);return}if($){const ft=this.boundingSphere.center;if(_box$1$1.setFromBufferAttribute($),lt)for(let Tt=0,Ct=lt.length;Tt<Ct;Tt++){const At=lt[Tt];_boxMorphTargets.setFromBufferAttribute(At),this.morphTargetsRelative?(_vector$8.addVectors(_box$1$1.min,_boxMorphTargets.min),_box$1$1.expandByPoint(_vector$8),_vector$8.addVectors(_box$1$1.max,_boxMorphTargets.max),_box$1$1.expandByPoint(_vector$8)):(_box$1$1.expandByPoint(_boxMorphTargets.min),_box$1$1.expandByPoint(_boxMorphTargets.max))}_box$1$1.getCenter(ft);let St=0;for(let Tt=0,Ct=$.count;Tt<Ct;Tt++)_vector$8.fromBufferAttribute($,Tt),St=Math.max(St,ft.distanceToSquared(_vector$8));if(lt)for(let Tt=0,Ct=lt.length;Tt<Ct;Tt++){const At=lt[Tt],Rt=this.morphTargetsRelative;for(let kt=0,Nt=At.count;kt<Nt;kt++)_vector$8.fromBufferAttribute(At,kt),Rt&&(_offset.fromBufferAttribute($,kt),_vector$8.add(_offset)),St=Math.max(St,ft.distanceToSquared(_vector$8))}this.boundingSphere.radius=Math.sqrt(St),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const $=this.index,lt=this.attributes;if($===null||lt.position===void 0||lt.normal===void 0||lt.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const ft=$.array,St=lt.position.array,Tt=lt.normal.array,Ct=lt.uv.array,At=St.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*At),4));const Rt=this.getAttribute("tangent").array,kt=[],Nt=[];for(let Rn=0;Rn<At;Rn++)kt[Rn]=new Vector3,Nt[Rn]=new Vector3;const Bt=new Vector3,Ut=new Vector3,zt=new Vector3,Zt=new Vector2,ln=new Vector2,cn=new Vector2,hn=new Vector3,pn=new Vector3;function dn(Rn,Pn,Nn){Bt.fromArray(St,Rn*3),Ut.fromArray(St,Pn*3),zt.fromArray(St,Nn*3),Zt.fromArray(Ct,Rn*2),ln.fromArray(Ct,Pn*2),cn.fromArray(Ct,Nn*2),Ut.sub(Bt),zt.sub(Bt),ln.sub(Zt),cn.sub(Zt);const Wn=1/(ln.x*cn.y-cn.x*ln.y);isFinite(Wn)&&(hn.copy(Ut).multiplyScalar(cn.y).addScaledVector(zt,-ln.y).multiplyScalar(Wn),pn.copy(zt).multiplyScalar(ln.x).addScaledVector(Ut,-cn.x).multiplyScalar(Wn),kt[Rn].add(hn),kt[Pn].add(hn),kt[Nn].add(hn),Nt[Rn].add(pn),Nt[Pn].add(pn),Nt[Nn].add(pn))}let gn=this.groups;gn.length===0&&(gn=[{start:0,count:ft.length}]);for(let Rn=0,Pn=gn.length;Rn<Pn;++Rn){const Nn=gn[Rn],Wn=Nn.start,zn=Nn.count;for(let Yn=Wn,Qn=Wn+zn;Yn<Qn;Yn+=3)dn(ft[Yn+0],ft[Yn+1],ft[Yn+2])}const vn=new Vector3,Tn=new Vector3,Cn=new Vector3,$n=new Vector3;function xn(Rn){Cn.fromArray(Tt,Rn*3),$n.copy(Cn);const Pn=kt[Rn];vn.copy(Pn),vn.sub(Cn.multiplyScalar(Cn.dot(Pn))).normalize(),Tn.crossVectors($n,Pn);const Wn=Tn.dot(Nt[Rn])<0?-1:1;Rt[Rn*4]=vn.x,Rt[Rn*4+1]=vn.y,Rt[Rn*4+2]=vn.z,Rt[Rn*4+3]=Wn}for(let Rn=0,Pn=gn.length;Rn<Pn;++Rn){const Nn=gn[Rn],Wn=Nn.start,zn=Nn.count;for(let Yn=Wn,Qn=Wn+zn;Yn<Qn;Yn+=3)xn(ft[Yn+0]),xn(ft[Yn+1]),xn(ft[Yn+2])}}computeVertexNormals(){const $=this.index,lt=this.getAttribute("position");if(lt!==void 0){let ft=this.getAttribute("normal");if(ft===void 0)ft=new BufferAttribute(new Float32Array(lt.count*3),3),this.setAttribute("normal",ft);else for(let Ut=0,zt=ft.count;Ut<zt;Ut++)ft.setXYZ(Ut,0,0,0);const St=new Vector3,Tt=new Vector3,Ct=new Vector3,At=new Vector3,Rt=new Vector3,kt=new Vector3,Nt=new Vector3,Bt=new Vector3;if($)for(let Ut=0,zt=$.count;Ut<zt;Ut+=3){const Zt=$.getX(Ut+0),ln=$.getX(Ut+1),cn=$.getX(Ut+2);St.fromBufferAttribute(lt,Zt),Tt.fromBufferAttribute(lt,ln),Ct.fromBufferAttribute(lt,cn),Nt.subVectors(Ct,Tt),Bt.subVectors(St,Tt),Nt.cross(Bt),At.fromBufferAttribute(ft,Zt),Rt.fromBufferAttribute(ft,ln),kt.fromBufferAttribute(ft,cn),At.add(Nt),Rt.add(Nt),kt.add(Nt),ft.setXYZ(Zt,At.x,At.y,At.z),ft.setXYZ(ln,Rt.x,Rt.y,Rt.z),ft.setXYZ(cn,kt.x,kt.y,kt.z)}else for(let Ut=0,zt=lt.count;Ut<zt;Ut+=3)St.fromBufferAttribute(lt,Ut+0),Tt.fromBufferAttribute(lt,Ut+1),Ct.fromBufferAttribute(lt,Ut+2),Nt.subVectors(Ct,Tt),Bt.subVectors(St,Tt),Nt.cross(Bt),ft.setXYZ(Ut+0,Nt.x,Nt.y,Nt.z),ft.setXYZ(Ut+1,Nt.x,Nt.y,Nt.z),ft.setXYZ(Ut+2,Nt.x,Nt.y,Nt.z);this.normalizeNormals(),ft.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const $=this.attributes.normal;for(let lt=0,ft=$.count;lt<ft;lt++)_vector$8.fromBufferAttribute($,lt),_vector$8.normalize(),$.setXYZ(lt,_vector$8.x,_vector$8.y,_vector$8.z)}toNonIndexed(){function $(At,Rt){const kt=At.array,Nt=At.itemSize,Bt=At.normalized,Ut=new kt.constructor(Rt.length*Nt);let zt=0,Zt=0;for(let ln=0,cn=Rt.length;ln<cn;ln++){At.isInterleavedBufferAttribute?zt=Rt[ln]*At.data.stride+At.offset:zt=Rt[ln]*Nt;for(let hn=0;hn<Nt;hn++)Ut[Zt++]=kt[zt++]}return new BufferAttribute(Ut,Nt,Bt)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const lt=new BufferGeometry,ft=this.index.array,St=this.attributes;for(const At in St){const Rt=St[At],kt=$(Rt,ft);lt.setAttribute(At,kt)}const Tt=this.morphAttributes;for(const At in Tt){const Rt=[],kt=Tt[At];for(let Nt=0,Bt=kt.length;Nt<Bt;Nt++){const Ut=kt[Nt],zt=$(Ut,ft);Rt.push(zt)}lt.morphAttributes[At]=Rt}lt.morphTargetsRelative=this.morphTargetsRelative;const Ct=this.groups;for(let At=0,Rt=Ct.length;At<Rt;At++){const kt=Ct[At];lt.addGroup(kt.start,kt.count,kt.materialIndex)}return lt}toJSON(){const $={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if($.uuid=this.uuid,$.type=this.type,this.name!==""&&($.name=this.name),Object.keys(this.userData).length>0&&($.userData=this.userData),this.parameters!==void 0){const Rt=this.parameters;for(const kt in Rt)Rt[kt]!==void 0&&($[kt]=Rt[kt]);return $}$.data={attributes:{}};const lt=this.index;lt!==null&&($.data.index={type:lt.array.constructor.name,array:Array.prototype.slice.call(lt.array)});const ft=this.attributes;for(const Rt in ft){const kt=ft[Rt];$.data.attributes[Rt]=kt.toJSON($.data)}const St={};let Tt=!1;for(const Rt in this.morphAttributes){const kt=this.morphAttributes[Rt],Nt=[];for(let Bt=0,Ut=kt.length;Bt<Ut;Bt++){const zt=kt[Bt];Nt.push(zt.toJSON($.data))}Nt.length>0&&(St[Rt]=Nt,Tt=!0)}Tt&&($.data.morphAttributes=St,$.data.morphTargetsRelative=this.morphTargetsRelative);const Ct=this.groups;Ct.length>0&&($.data.groups=JSON.parse(JSON.stringify(Ct)));const At=this.boundingSphere;return At!==null&&($.data.boundingSphere={center:At.center.toArray(),radius:At.radius}),$}clone(){return new this.constructor().copy(this)}copy($){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const lt={};this.name=$.name;const ft=$.index;ft!==null&&this.setIndex(ft.clone(lt));const St=$.attributes;for(const kt in St){const Nt=St[kt];this.setAttribute(kt,Nt.clone(lt))}const Tt=$.morphAttributes;for(const kt in Tt){const Nt=[],Bt=Tt[kt];for(let Ut=0,zt=Bt.length;Ut<zt;Ut++)Nt.push(Bt[Ut].clone(lt));this.morphAttributes[kt]=Nt}this.morphTargetsRelative=$.morphTargetsRelative;const Ct=$.groups;for(let kt=0,Nt=Ct.length;kt<Nt;kt++){const Bt=Ct[kt];this.addGroup(Bt.start,Bt.count,Bt.materialIndex)}const At=$.boundingBox;At!==null&&(this.boundingBox=At.clone());const Rt=$.boundingSphere;return Rt!==null&&(this.boundingSphere=Rt.clone()),this.drawRange.start=$.drawRange.start,this.drawRange.count=$.drawRange.count,this.userData=$.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const _inverseMatrix$2=new Matrix4,_ray$2=new Ray,_sphere$3=new Sphere$1,_sphereHitAt=new Vector3,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_tempA=new Vector3,_morphA=new Vector3,_uvA$1=new Vector2,_uvB$1=new Vector2,_uvC$1=new Vector2,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;class Mesh extends Object3D{constructor($=new BufferGeometry,lt=new MeshBasicMaterial){super(),this.isMesh=!0,this.type="Mesh",this.geometry=$,this.material=lt,this.updateMorphTargets()}copy($,lt){return super.copy($,lt),$.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=$.morphTargetInfluences.slice()),$.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},$.morphTargetDictionary)),this.material=$.material,this.geometry=$.geometry,this}updateMorphTargets(){const lt=this.geometry.morphAttributes,ft=Object.keys(lt);if(ft.length>0){const St=lt[ft[0]];if(St!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let Tt=0,Ct=St.length;Tt<Ct;Tt++){const At=St[Tt].name||String(Tt);this.morphTargetInfluences.push(0),this.morphTargetDictionary[At]=Tt}}}}getVertexPosition($,lt){const ft=this.geometry,St=ft.attributes.position,Tt=ft.morphAttributes.position,Ct=ft.morphTargetsRelative;lt.fromBufferAttribute(St,$);const At=this.morphTargetInfluences;if(Tt&&At){_morphA.set(0,0,0);for(let Rt=0,kt=Tt.length;Rt<kt;Rt++){const Nt=At[Rt],Bt=Tt[Rt];Nt!==0&&(_tempA.fromBufferAttribute(Bt,$),Ct?_morphA.addScaledVector(_tempA,Nt):_morphA.addScaledVector(_tempA.sub(lt),Nt))}lt.add(_morphA)}return this.isSkinnedMesh&&this.boneTransform($,lt),lt}raycast($,lt){const ft=this.geometry,St=this.material,Tt=this.matrixWorld;if(St===void 0||(ft.boundingSphere===null&&ft.computeBoundingSphere(),_sphere$3.copy(ft.boundingSphere),_sphere$3.applyMatrix4(Tt),_ray$2.copy($.ray).recast($.near),_sphere$3.containsPoint(_ray$2.origin)===!1&&(_ray$2.intersectSphere(_sphere$3,_sphereHitAt)===null||_ray$2.origin.distanceToSquared(_sphereHitAt)>($.far-$.near)**2))||(_inverseMatrix$2.copy(Tt).invert(),_ray$2.copy($.ray).applyMatrix4(_inverseMatrix$2),ft.boundingBox!==null&&_ray$2.intersectsBox(ft.boundingBox)===!1))return;let Ct;const At=ft.index,Rt=ft.attributes.position,kt=ft.attributes.uv,Nt=ft.attributes.uv2,Bt=ft.groups,Ut=ft.drawRange;if(At!==null)if(Array.isArray(St))for(let zt=0,Zt=Bt.length;zt<Zt;zt++){const ln=Bt[zt],cn=St[ln.materialIndex],hn=Math.max(ln.start,Ut.start),pn=Math.min(At.count,Math.min(ln.start+ln.count,Ut.start+Ut.count));for(let dn=hn,gn=pn;dn<gn;dn+=3){const vn=At.getX(dn),Tn=At.getX(dn+1),Cn=At.getX(dn+2);Ct=checkBufferGeometryIntersection(this,cn,$,_ray$2,kt,Nt,vn,Tn,Cn),Ct&&(Ct.faceIndex=Math.floor(dn/3),Ct.face.materialIndex=ln.materialIndex,lt.push(Ct))}}else{const zt=Math.max(0,Ut.start),Zt=Math.min(At.count,Ut.start+Ut.count);for(let ln=zt,cn=Zt;ln<cn;ln+=3){const hn=At.getX(ln),pn=At.getX(ln+1),dn=At.getX(ln+2);Ct=checkBufferGeometryIntersection(this,St,$,_ray$2,kt,Nt,hn,pn,dn),Ct&&(Ct.faceIndex=Math.floor(ln/3),lt.push(Ct))}}else if(Rt!==void 0)if(Array.isArray(St))for(let zt=0,Zt=Bt.length;zt<Zt;zt++){const ln=Bt[zt],cn=St[ln.materialIndex],hn=Math.max(ln.start,Ut.start),pn=Math.min(Rt.count,Math.min(ln.start+ln.count,Ut.start+Ut.count));for(let dn=hn,gn=pn;dn<gn;dn+=3){const vn=dn,Tn=dn+1,Cn=dn+2;Ct=checkBufferGeometryIntersection(this,cn,$,_ray$2,kt,Nt,vn,Tn,Cn),Ct&&(Ct.faceIndex=Math.floor(dn/3),Ct.face.materialIndex=ln.materialIndex,lt.push(Ct))}}else{const zt=Math.max(0,Ut.start),Zt=Math.min(Rt.count,Ut.start+Ut.count);for(let ln=zt,cn=Zt;ln<cn;ln+=3){const hn=ln,pn=ln+1,dn=ln+2;Ct=checkBufferGeometryIntersection(this,St,$,_ray$2,kt,Nt,hn,pn,dn),Ct&&(Ct.faceIndex=Math.floor(ln/3),lt.push(Ct))}}}}function checkIntersection(dt,$,lt,ft,St,Tt,Ct,At){let Rt;if($.side===BackSide?Rt=ft.intersectTriangle(Ct,Tt,St,!0,At):Rt=ft.intersectTriangle(St,Tt,Ct,$.side===FrontSide,At),Rt===null)return null;_intersectionPointWorld.copy(At),_intersectionPointWorld.applyMatrix4(dt.matrixWorld);const kt=lt.ray.origin.distanceTo(_intersectionPointWorld);return kt<lt.near||kt>lt.far?null:{distance:kt,point:_intersectionPointWorld.clone(),object:dt}}function checkBufferGeometryIntersection(dt,$,lt,ft,St,Tt,Ct,At,Rt){dt.getVertexPosition(Ct,_vA$1),dt.getVertexPosition(At,_vB$1),dt.getVertexPosition(Rt,_vC$1);const kt=checkIntersection(dt,$,lt,ft,_vA$1,_vB$1,_vC$1,_intersectionPoint);if(kt){St&&(_uvA$1.fromBufferAttribute(St,Ct),_uvB$1.fromBufferAttribute(St,At),_uvC$1.fromBufferAttribute(St,Rt),kt.uv=Triangle.getUV(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2)),Tt&&(_uvA$1.fromBufferAttribute(Tt,Ct),_uvB$1.fromBufferAttribute(Tt,At),_uvC$1.fromBufferAttribute(Tt,Rt),kt.uv2=Triangle.getUV(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2));const Nt={a:Ct,b:At,c:Rt,normal:new Vector3,materialIndex:0};Triangle.getNormal(_vA$1,_vB$1,_vC$1,Nt.normal),kt.face=Nt}return kt}class BoxGeometry extends BufferGeometry{constructor($=1,lt=1,ft=1,St=1,Tt=1,Ct=1){super(),this.type="BoxGeometry",this.parameters={width:$,height:lt,depth:ft,widthSegments:St,heightSegments:Tt,depthSegments:Ct};const At=this;St=Math.floor(St),Tt=Math.floor(Tt),Ct=Math.floor(Ct);const Rt=[],kt=[],Nt=[],Bt=[];let Ut=0,zt=0;Zt("z","y","x",-1,-1,ft,lt,$,Ct,Tt,0),Zt("z","y","x",1,-1,ft,lt,-$,Ct,Tt,1),Zt("x","z","y",1,1,$,ft,lt,St,Ct,2),Zt("x","z","y",1,-1,$,ft,-lt,St,Ct,3),Zt("x","y","z",1,-1,$,lt,ft,St,Tt,4),Zt("x","y","z",-1,-1,$,lt,-ft,St,Tt,5),this.setIndex(Rt),this.setAttribute("position",new Float32BufferAttribute(kt,3)),this.setAttribute("normal",new Float32BufferAttribute(Nt,3)),this.setAttribute("uv",new Float32BufferAttribute(Bt,2));function Zt(ln,cn,hn,pn,dn,gn,vn,Tn,Cn,$n,xn){const Rn=gn/Cn,Pn=vn/$n,Nn=gn/2,Wn=vn/2,zn=Tn/2,Yn=Cn+1,Qn=$n+1;let nr=0,Ln=0;const Un=new Vector3;for(let Vn=0;Vn<Qn;Vn++){const sr=Vn*Pn-Wn;for(let In=0;In<Yn;In++){const ir=In*Rn-Nn;Un[ln]=ir*pn,Un[cn]=sr*dn,Un[hn]=zn,kt.push(Un.x,Un.y,Un.z),Un[ln]=0,Un[cn]=0,Un[hn]=Tn>0?1:-1,Nt.push(Un.x,Un.y,Un.z),Bt.push(In/Cn),Bt.push(1-Vn/$n),nr+=1}}for(let Vn=0;Vn<$n;Vn++)for(let sr=0;sr<Cn;sr++){const In=Ut+sr+Yn*Vn,ir=Ut+sr+Yn*(Vn+1),pr=Ut+(sr+1)+Yn*(Vn+1),Jn=Ut+(sr+1)+Yn*Vn;Rt.push(In,ir,Jn),Rt.push(ir,pr,Jn),Ln+=6}At.addGroup(zt,Ln,xn),zt+=Ln,Ut+=nr}}copy($){return super.copy($),this.parameters=Object.assign({},$.parameters),this}static fromJSON($){return new BoxGeometry($.width,$.height,$.depth,$.widthSegments,$.heightSegments,$.depthSegments)}}function cloneUniforms(dt){const $={};for(const lt in dt){$[lt]={};for(const ft in dt[lt]){const St=dt[lt][ft];St&&(St.isColor||St.isMatrix3||St.isMatrix4||St.isVector2||St.isVector3||St.isVector4||St.isTexture||St.isQuaternion)?$[lt][ft]=St.clone():Array.isArray(St)?$[lt][ft]=St.slice():$[lt][ft]=St}}return $}function mergeUniforms(dt){const $={};for(let lt=0;lt<dt.length;lt++){const ft=cloneUniforms(dt[lt]);for(const St in ft)$[St]=ft[St]}return $}function cloneUniformsGroups(dt){const $=[];for(let lt=0;lt<dt.length;lt++)$.push(dt[lt].clone());return $}function getUnlitUniformColorSpace(dt){return dt.getRenderTarget()===null&&dt.outputEncoding===sRGBEncoding?SRGBColorSpace:LinearSRGBColorSpace}const UniformsUtils={clone:cloneUniforms,merge:mergeUniforms};var default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ShaderMaterial extends Material{constructor($){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,$!==void 0&&this.setValues($)}copy($){return super.copy($),this.fragmentShader=$.fragmentShader,this.vertexShader=$.vertexShader,this.uniforms=cloneUniforms($.uniforms),this.uniformsGroups=cloneUniformsGroups($.uniformsGroups),this.defines=Object.assign({},$.defines),this.wireframe=$.wireframe,this.wireframeLinewidth=$.wireframeLinewidth,this.fog=$.fog,this.lights=$.lights,this.clipping=$.clipping,this.extensions=Object.assign({},$.extensions),this.glslVersion=$.glslVersion,this}toJSON($){const lt=super.toJSON($);lt.glslVersion=this.glslVersion,lt.uniforms={};for(const St in this.uniforms){const Ct=this.uniforms[St].value;Ct&&Ct.isTexture?lt.uniforms[St]={type:"t",value:Ct.toJSON($).uuid}:Ct&&Ct.isColor?lt.uniforms[St]={type:"c",value:Ct.getHex()}:Ct&&Ct.isVector2?lt.uniforms[St]={type:"v2",value:Ct.toArray()}:Ct&&Ct.isVector3?lt.uniforms[St]={type:"v3",value:Ct.toArray()}:Ct&&Ct.isVector4?lt.uniforms[St]={type:"v4",value:Ct.toArray()}:Ct&&Ct.isMatrix3?lt.uniforms[St]={type:"m3",value:Ct.toArray()}:Ct&&Ct.isMatrix4?lt.uniforms[St]={type:"m4",value:Ct.toArray()}:lt.uniforms[St]={value:Ct}}Object.keys(this.defines).length>0&&(lt.defines=this.defines),lt.vertexShader=this.vertexShader,lt.fragmentShader=this.fragmentShader;const ft={};for(const St in this.extensions)this.extensions[St]===!0&&(ft[St]=!0);return Object.keys(ft).length>0&&(lt.extensions=ft),lt}}class Camera extends Object3D{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4}copy($,lt){return super.copy($,lt),this.matrixWorldInverse.copy($.matrixWorldInverse),this.projectionMatrix.copy($.projectionMatrix),this.projectionMatrixInverse.copy($.projectionMatrixInverse),this}getWorldDirection($){this.updateWorldMatrix(!0,!1);const lt=this.matrixWorld.elements;return $.set(-lt[8],-lt[9],-lt[10]).normalize()}updateMatrixWorld($){super.updateMatrixWorld($),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix($,lt){super.updateWorldMatrix($,lt),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class PerspectiveCamera extends Camera{constructor($=50,lt=1,ft=.1,St=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=$,this.zoom=1,this.near=ft,this.far=St,this.focus=10,this.aspect=lt,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy($,lt){return super.copy($,lt),this.fov=$.fov,this.zoom=$.zoom,this.near=$.near,this.far=$.far,this.focus=$.focus,this.aspect=$.aspect,this.view=$.view===null?null:Object.assign({},$.view),this.filmGauge=$.filmGauge,this.filmOffset=$.filmOffset,this}setFocalLength($){const lt=.5*this.getFilmHeight()/$;this.fov=RAD2DEG*2*Math.atan(lt),this.updateProjectionMatrix()}getFocalLength(){const $=Math.tan(DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/$}getEffectiveFOV(){return RAD2DEG*2*Math.atan(Math.tan(DEG2RAD*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset($,lt,ft,St,Tt,Ct){this.aspect=$/lt,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=$,this.view.fullHeight=lt,this.view.offsetX=ft,this.view.offsetY=St,this.view.width=Tt,this.view.height=Ct,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const $=this.near;let lt=$*Math.tan(DEG2RAD*.5*this.fov)/this.zoom,ft=2*lt,St=this.aspect*ft,Tt=-.5*St;const Ct=this.view;if(this.view!==null&&this.view.enabled){const Rt=Ct.fullWidth,kt=Ct.fullHeight;Tt+=Ct.offsetX*St/Rt,lt-=Ct.offsetY*ft/kt,St*=Ct.width/Rt,ft*=Ct.height/kt}const At=this.filmOffset;At!==0&&(Tt+=$*At/this.getFilmWidth()),this.projectionMatrix.makePerspective(Tt,Tt+St,lt,lt-ft,$,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON($){const lt=super.toJSON($);return lt.object.fov=this.fov,lt.object.zoom=this.zoom,lt.object.near=this.near,lt.object.far=this.far,lt.object.focus=this.focus,lt.object.aspect=this.aspect,this.view!==null&&(lt.object.view=Object.assign({},this.view)),lt.object.filmGauge=this.filmGauge,lt.object.filmOffset=this.filmOffset,lt}}const fov=-90,aspect=1;class CubeCamera extends Object3D{constructor($,lt,ft){super(),this.type="CubeCamera",this.renderTarget=ft;const St=new PerspectiveCamera(fov,aspect,$,lt);St.layers=this.layers,St.up.set(0,1,0),St.lookAt(1,0,0),this.add(St);const Tt=new PerspectiveCamera(fov,aspect,$,lt);Tt.layers=this.layers,Tt.up.set(0,1,0),Tt.lookAt(-1,0,0),this.add(Tt);const Ct=new PerspectiveCamera(fov,aspect,$,lt);Ct.layers=this.layers,Ct.up.set(0,0,-1),Ct.lookAt(0,1,0),this.add(Ct);const At=new PerspectiveCamera(fov,aspect,$,lt);At.layers=this.layers,At.up.set(0,0,1),At.lookAt(0,-1,0),this.add(At);const Rt=new PerspectiveCamera(fov,aspect,$,lt);Rt.layers=this.layers,Rt.up.set(0,1,0),Rt.lookAt(0,0,1),this.add(Rt);const kt=new PerspectiveCamera(fov,aspect,$,lt);kt.layers=this.layers,kt.up.set(0,1,0),kt.lookAt(0,0,-1),this.add(kt)}update($,lt){this.parent===null&&this.updateMatrixWorld();const ft=this.renderTarget,[St,Tt,Ct,At,Rt,kt]=this.children,Nt=$.getRenderTarget(),Bt=$.toneMapping,Ut=$.xr.enabled;$.toneMapping=NoToneMapping,$.xr.enabled=!1;const zt=ft.texture.generateMipmaps;ft.texture.generateMipmaps=!1,$.setRenderTarget(ft,0),$.render(lt,St),$.setRenderTarget(ft,1),$.render(lt,Tt),$.setRenderTarget(ft,2),$.render(lt,Ct),$.setRenderTarget(ft,3),$.render(lt,At),$.setRenderTarget(ft,4),$.render(lt,Rt),ft.texture.generateMipmaps=zt,$.setRenderTarget(ft,5),$.render(lt,kt),$.setRenderTarget(Nt),$.toneMapping=Bt,$.xr.enabled=Ut,ft.texture.needsPMREMUpdate=!0}}class CubeTexture extends Texture{constructor($,lt,ft,St,Tt,Ct,At,Rt,kt,Nt){$=$!==void 0?$:[],lt=lt!==void 0?lt:CubeReflectionMapping,super($,lt,ft,St,Tt,Ct,At,Rt,kt,Nt),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images($){this.image=$}}class WebGLCubeRenderTarget extends WebGLRenderTarget{constructor($=1,lt={}){super($,$,lt),this.isWebGLCubeRenderTarget=!0;const ft={width:$,height:$,depth:1},St=[ft,ft,ft,ft,ft,ft];this.texture=new CubeTexture(St,lt.mapping,lt.wrapS,lt.wrapT,lt.magFilter,lt.minFilter,lt.format,lt.type,lt.anisotropy,lt.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=lt.generateMipmaps!==void 0?lt.generateMipmaps:!1,this.texture.minFilter=lt.minFilter!==void 0?lt.minFilter:LinearFilter}fromEquirectangularTexture($,lt){this.texture.type=lt.type,this.texture.encoding=lt.encoding,this.texture.generateMipmaps=lt.generateMipmaps,this.texture.minFilter=lt.minFilter,this.texture.magFilter=lt.magFilter;const ft={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},St=new BoxGeometry(5,5,5),Tt=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(ft.uniforms),vertexShader:ft.vertexShader,fragmentShader:ft.fragmentShader,side:BackSide,blending:NoBlending});Tt.uniforms.tEquirect.value=lt;const Ct=new Mesh(St,Tt),At=lt.minFilter;return lt.minFilter===LinearMipmapLinearFilter&&(lt.minFilter=LinearFilter),new CubeCamera(1,10,this).update($,Ct),lt.minFilter=At,Ct.geometry.dispose(),Ct.material.dispose(),this}clear($,lt,ft,St){const Tt=$.getRenderTarget();for(let Ct=0;Ct<6;Ct++)$.setRenderTarget(this,Ct),$.clear(lt,ft,St);$.setRenderTarget(Tt)}}const _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;let Plane$1=class{constructor($=new Vector3(1,0,0),lt=0){this.isPlane=!0,this.normal=$,this.constant=lt}set($,lt){return this.normal.copy($),this.constant=lt,this}setComponents($,lt,ft,St){return this.normal.set($,lt,ft),this.constant=St,this}setFromNormalAndCoplanarPoint($,lt){return this.normal.copy($),this.constant=-lt.dot(this.normal),this}setFromCoplanarPoints($,lt,ft){const St=_vector1.subVectors(ft,lt).cross(_vector2.subVectors($,lt)).normalize();return this.setFromNormalAndCoplanarPoint(St,$),this}copy($){return this.normal.copy($.normal),this.constant=$.constant,this}normalize(){const $=1/this.normal.length();return this.normal.multiplyScalar($),this.constant*=$,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint($){return this.normal.dot($)+this.constant}distanceToSphere($){return this.distanceToPoint($.center)-$.radius}projectPoint($,lt){return lt.copy($).addScaledVector(this.normal,-this.distanceToPoint($))}intersectLine($,lt){const ft=$.delta(_vector1),St=this.normal.dot(ft);if(St===0)return this.distanceToPoint($.start)===0?lt.copy($.start):null;const Tt=-($.start.dot(this.normal)+this.constant)/St;return Tt<0||Tt>1?null:lt.copy($.start).addScaledVector(ft,Tt)}intersectsLine($){const lt=this.distanceToPoint($.start),ft=this.distanceToPoint($.end);return lt<0&&ft>0||ft<0&&lt>0}intersectsBox($){return $.intersectsPlane(this)}intersectsSphere($){return $.intersectsPlane(this)}coplanarPoint($){return $.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4($,lt){const ft=lt||_normalMatrix.getNormalMatrix($),St=this.coplanarPoint(_vector1).applyMatrix4($),Tt=this.normal.applyMatrix3(ft).normalize();return this.constant=-St.dot(Tt),this}translate($){return this.constant-=$.dot(this.normal),this}equals($){return $.normal.equals(this.normal)&&$.constant===this.constant}clone(){return new this.constructor().copy(this)}};const _sphere$2=new Sphere$1,_vector$7=new Vector3;class Frustum{constructor($=new Plane$1,lt=new Plane$1,ft=new Plane$1,St=new Plane$1,Tt=new Plane$1,Ct=new Plane$1){this.planes=[$,lt,ft,St,Tt,Ct]}set($,lt,ft,St,Tt,Ct){const At=this.planes;return At[0].copy($),At[1].copy(lt),At[2].copy(ft),At[3].copy(St),At[4].copy(Tt),At[5].copy(Ct),this}copy($){const lt=this.planes;for(let ft=0;ft<6;ft++)lt[ft].copy($.planes[ft]);return this}setFromProjectionMatrix($){const lt=this.planes,ft=$.elements,St=ft[0],Tt=ft[1],Ct=ft[2],At=ft[3],Rt=ft[4],kt=ft[5],Nt=ft[6],Bt=ft[7],Ut=ft[8],zt=ft[9],Zt=ft[10],ln=ft[11],cn=ft[12],hn=ft[13],pn=ft[14],dn=ft[15];return lt[0].setComponents(At-St,Bt-Rt,ln-Ut,dn-cn).normalize(),lt[1].setComponents(At+St,Bt+Rt,ln+Ut,dn+cn).normalize(),lt[2].setComponents(At+Tt,Bt+kt,ln+zt,dn+hn).normalize(),lt[3].setComponents(At-Tt,Bt-kt,ln-zt,dn-hn).normalize(),lt[4].setComponents(At-Ct,Bt-Nt,ln-Zt,dn-pn).normalize(),lt[5].setComponents(At+Ct,Bt+Nt,ln+Zt,dn+pn).normalize(),this}intersectsObject($){const lt=$.geometry;return lt.boundingSphere===null&&lt.computeBoundingSphere(),_sphere$2.copy(lt.boundingSphere).applyMatrix4($.matrixWorld),this.intersectsSphere(_sphere$2)}intersectsSprite($){return _sphere$2.center.set(0,0,0),_sphere$2.radius=.7071067811865476,_sphere$2.applyMatrix4($.matrixWorld),this.intersectsSphere(_sphere$2)}intersectsSphere($){const lt=this.planes,ft=$.center,St=-$.radius;for(let Tt=0;Tt<6;Tt++)if(lt[Tt].distanceToPoint(ft)<St)return!1;return!0}intersectsBox($){const lt=this.planes;for(let ft=0;ft<6;ft++){const St=lt[ft];if(_vector$7.x=St.normal.x>0?$.max.x:$.min.x,_vector$7.y=St.normal.y>0?$.max.y:$.min.y,_vector$7.z=St.normal.z>0?$.max.z:$.min.z,St.distanceToPoint(_vector$7)<0)return!1}return!0}containsPoint($){const lt=this.planes;for(let ft=0;ft<6;ft++)if(lt[ft].distanceToPoint($)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function WebGLAnimation(){let dt=null,$=!1,lt=null,ft=null;function St(Tt,Ct){lt(Tt,Ct),ft=dt.requestAnimationFrame(St)}return{start:function(){$!==!0&&lt!==null&&(ft=dt.requestAnimationFrame(St),$=!0)},stop:function(){dt.cancelAnimationFrame(ft),$=!1},setAnimationLoop:function(Tt){lt=Tt},setContext:function(Tt){dt=Tt}}}function WebGLAttributes(dt,$){const lt=$.isWebGL2,ft=new WeakMap;function St(kt,Nt){const Bt=kt.array,Ut=kt.usage,zt=dt.createBuffer();dt.bindBuffer(Nt,zt),dt.bufferData(Nt,Bt,Ut),kt.onUploadCallback();let Zt;if(Bt instanceof Float32Array)Zt=5126;else if(Bt instanceof Uint16Array)if(kt.isFloat16BufferAttribute)if(lt)Zt=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else Zt=5123;else if(Bt instanceof Int16Array)Zt=5122;else if(Bt instanceof Uint32Array)Zt=5125;else if(Bt instanceof Int32Array)Zt=5124;else if(Bt instanceof Int8Array)Zt=5120;else if(Bt instanceof Uint8Array)Zt=5121;else if(Bt instanceof Uint8ClampedArray)Zt=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+Bt);return{buffer:zt,type:Zt,bytesPerElement:Bt.BYTES_PER_ELEMENT,version:kt.version}}function Tt(kt,Nt,Bt){const Ut=Nt.array,zt=Nt.updateRange;dt.bindBuffer(Bt,kt),zt.count===-1?dt.bufferSubData(Bt,0,Ut):(lt?dt.bufferSubData(Bt,zt.offset*Ut.BYTES_PER_ELEMENT,Ut,zt.offset,zt.count):dt.bufferSubData(Bt,zt.offset*Ut.BYTES_PER_ELEMENT,Ut.subarray(zt.offset,zt.offset+zt.count)),zt.count=-1),Nt.onUploadCallback()}function Ct(kt){return kt.isInterleavedBufferAttribute&&(kt=kt.data),ft.get(kt)}function At(kt){kt.isInterleavedBufferAttribute&&(kt=kt.data);const Nt=ft.get(kt);Nt&&(dt.deleteBuffer(Nt.buffer),ft.delete(kt))}function Rt(kt,Nt){if(kt.isGLBufferAttribute){const Ut=ft.get(kt);(!Ut||Ut.version<kt.version)&&ft.set(kt,{buffer:kt.buffer,type:kt.type,bytesPerElement:kt.elementSize,version:kt.version});return}kt.isInterleavedBufferAttribute&&(kt=kt.data);const Bt=ft.get(kt);Bt===void 0?ft.set(kt,St(kt,Nt)):Bt.version<kt.version&&(Tt(Bt.buffer,kt,Nt),Bt.version=kt.version)}return{get:Ct,remove:At,update:Rt}}class PlaneGeometry extends BufferGeometry{constructor($=1,lt=1,ft=1,St=1){super(),this.type="PlaneGeometry",this.parameters={width:$,height:lt,widthSegments:ft,heightSegments:St};const Tt=$/2,Ct=lt/2,At=Math.floor(ft),Rt=Math.floor(St),kt=At+1,Nt=Rt+1,Bt=$/At,Ut=lt/Rt,zt=[],Zt=[],ln=[],cn=[];for(let hn=0;hn<Nt;hn++){const pn=hn*Ut-Ct;for(let dn=0;dn<kt;dn++){const gn=dn*Bt-Tt;Zt.push(gn,-pn,0),ln.push(0,0,1),cn.push(dn/At),cn.push(1-hn/Rt)}}for(let hn=0;hn<Rt;hn++)for(let pn=0;pn<At;pn++){const dn=pn+kt*hn,gn=pn+kt*(hn+1),vn=pn+1+kt*(hn+1),Tn=pn+1+kt*hn;zt.push(dn,gn,Tn),zt.push(gn,vn,Tn)}this.setIndex(zt),this.setAttribute("position",new Float32BufferAttribute(Zt,3)),this.setAttribute("normal",new Float32BufferAttribute(ln,3)),this.setAttribute("uv",new Float32BufferAttribute(cn,2))}copy($){return super.copy($),this.parameters=Object.assign({},$.parameters),this}static fromJSON($){return new PlaneGeometry($.width,$.height,$.widthSegments,$.heightSegments)}}var alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,alphatest_pars_fragment=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,begin_vertex="vec3 transformed = vec3( position );",beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,iridescence_fragment=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,color_pars_vertex=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,color_vertex=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,common=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,encodings_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,lightmap_fragment=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_fragment=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,lights_lambert_pars_fragment=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,lights_physical_pars_fragment=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,map_fragment=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphcolor_vertex=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,normal_fragment_begin=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,normal_fragment_maps=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,normal_pars_fragment=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_pars_vertex=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_vertex=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,iridescence_pars_fragment=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,output_fragment=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,shadowmap_pars_vertex=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,transmission_fragment=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,transmission_pars_fragment=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		
		vec2 lodFudge = pow( 1.95, lod ) / fullSize;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec2 fullSize = vec2( textureSize( sampler, 0 ) );
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,uv_pars_fragment=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,uv_pars_vertex=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,uv_vertex=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,uv2_pars_fragment=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,uv2_pars_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,uv2_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const vertex$h=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,fragment$h=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vertex$g=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$g=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vertex$f=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$f=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vertex$e=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,fragment$e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,vertex$d=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,fragment$d=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,vertex$c=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,fragment$c=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vertex$b=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$b=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$a=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,fragment$a=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$9=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$9=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$8=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fragment$8=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$7=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,fragment$7=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,vertex$6=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$6=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$5=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,fragment$5=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$4=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$4=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$3=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,fragment$3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$2=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$2=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,vertex$1=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$1=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,ShaderChunk={alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,alphatest_pars_fragment,aomap_fragment,aomap_pars_fragment,begin_vertex,beginnormal_vertex,bsdfs,iridescence_fragment,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,encodings_fragment,encodings_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_fragment,lightmap_pars_fragment,lights_lambert_fragment,lights_lambert_pars_fragment,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphcolor_vertex,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normal_pars_fragment,normal_pars_vertex,normal_vertex,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,iridescence_pars_fragment,output_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,transmission_fragment,transmission_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,uv2_pars_fragment,uv2_pars_vertex,uv2_vertex,worldpos_vertex,background_vert:vertex$h,background_frag:fragment$h,backgroundCube_vert:vertex$g,backgroundCube_frag:fragment$g,cube_vert:vertex$f,cube_frag:fragment$f,depth_vert:vertex$e,depth_frag:fragment$e,distanceRGBA_vert:vertex$d,distanceRGBA_frag:fragment$d,equirect_vert:vertex$c,equirect_frag:fragment$c,linedashed_vert:vertex$b,linedashed_frag:fragment$b,meshbasic_vert:vertex$a,meshbasic_frag:fragment$a,meshlambert_vert:vertex$9,meshlambert_frag:fragment$9,meshmatcap_vert:vertex$8,meshmatcap_frag:fragment$8,meshnormal_vert:vertex$7,meshnormal_frag:fragment$7,meshphong_vert:vertex$6,meshphong_frag:fragment$6,meshphysical_vert:vertex$5,meshphysical_frag:fragment$5,meshtoon_vert:vertex$4,meshtoon_frag:fragment$4,points_vert:vertex$3,points_frag:fragment$3,shadow_vert:vertex$2,shadow_frag:fragment$2,sprite_vert:vertex$1,sprite_frag:fragment$1},UniformsLib={common:{diffuse:{value:new Color(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Matrix3},uv2Transform:{value:new Matrix3},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Color(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(16777215)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Matrix3}}},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.meshnormal_vert,fragmentShader:ShaderChunk.meshnormal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.backgroundCube_vert,fragmentShader:ShaderChunk.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Color(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Vector2},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Color(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Color(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};const _rgb={r:0,b:0,g:0};function WebGLBackground(dt,$,lt,ft,St,Tt,Ct){const At=new Color(0);let Rt=Tt===!0?0:1,kt,Nt,Bt=null,Ut=0,zt=null;function Zt(cn,hn){let pn=!1,dn=hn.isScene===!0?hn.background:null;dn&&dn.isTexture&&(dn=(hn.backgroundBlurriness>0?lt:$).get(dn));const gn=dt.xr,vn=gn.getSession&&gn.getSession();vn&&vn.environmentBlendMode==="additive"&&(dn=null),dn===null?ln(At,Rt):dn&&dn.isColor&&(ln(dn,1),pn=!0),(dt.autoClear||pn)&&dt.clear(dt.autoClearColor,dt.autoClearDepth,dt.autoClearStencil),dn&&(dn.isCubeTexture||dn.mapping===CubeUVReflectionMapping)?(Nt===void 0&&(Nt=new Mesh(new BoxGeometry(1,1,1),new ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.backgroundCube.uniforms),vertexShader:ShaderLib.backgroundCube.vertexShader,fragmentShader:ShaderLib.backgroundCube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1})),Nt.geometry.deleteAttribute("normal"),Nt.geometry.deleteAttribute("uv"),Nt.onBeforeRender=function(Tn,Cn,$n){this.matrixWorld.copyPosition($n.matrixWorld)},Object.defineProperty(Nt.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),St.update(Nt)),Nt.material.uniforms.envMap.value=dn,Nt.material.uniforms.flipEnvMap.value=dn.isCubeTexture&&dn.isRenderTargetTexture===!1?-1:1,Nt.material.uniforms.backgroundBlurriness.value=hn.backgroundBlurriness,Nt.material.uniforms.backgroundIntensity.value=hn.backgroundIntensity,Nt.material.toneMapped=dn.encoding!==sRGBEncoding,(Bt!==dn||Ut!==dn.version||zt!==dt.toneMapping)&&(Nt.material.needsUpdate=!0,Bt=dn,Ut=dn.version,zt=dt.toneMapping),Nt.layers.enableAll(),cn.unshift(Nt,Nt.geometry,Nt.material,0,0,null)):dn&&dn.isTexture&&(kt===void 0&&(kt=new Mesh(new PlaneGeometry(2,2),new ShaderMaterial({name:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1})),kt.geometry.deleteAttribute("normal"),Object.defineProperty(kt.material,"map",{get:function(){return this.uniforms.t2D.value}}),St.update(kt)),kt.material.uniforms.t2D.value=dn,kt.material.uniforms.backgroundIntensity.value=hn.backgroundIntensity,kt.material.toneMapped=dn.encoding!==sRGBEncoding,dn.matrixAutoUpdate===!0&&dn.updateMatrix(),kt.material.uniforms.uvTransform.value.copy(dn.matrix),(Bt!==dn||Ut!==dn.version||zt!==dt.toneMapping)&&(kt.material.needsUpdate=!0,Bt=dn,Ut=dn.version,zt=dt.toneMapping),kt.layers.enableAll(),cn.unshift(kt,kt.geometry,kt.material,0,0,null))}function ln(cn,hn){cn.getRGB(_rgb,getUnlitUniformColorSpace(dt)),ft.buffers.color.setClear(_rgb.r,_rgb.g,_rgb.b,hn,Ct)}return{getClearColor:function(){return At},setClearColor:function(cn,hn=1){At.set(cn),Rt=hn,ln(At,Rt)},getClearAlpha:function(){return Rt},setClearAlpha:function(cn){Rt=cn,ln(At,Rt)},render:Zt}}function WebGLBindingStates(dt,$,lt,ft){const St=dt.getParameter(34921),Tt=ft.isWebGL2?null:$.get("OES_vertex_array_object"),Ct=ft.isWebGL2||Tt!==null,At={},Rt=cn(null);let kt=Rt,Nt=!1;function Bt(zn,Yn,Qn,nr,Ln){let Un=!1;if(Ct){const Vn=ln(nr,Qn,Yn);kt!==Vn&&(kt=Vn,zt(kt.object)),Un=hn(zn,nr,Qn,Ln),Un&&pn(zn,nr,Qn,Ln)}else{const Vn=Yn.wireframe===!0;(kt.geometry!==nr.id||kt.program!==Qn.id||kt.wireframe!==Vn)&&(kt.geometry=nr.id,kt.program=Qn.id,kt.wireframe=Vn,Un=!0)}Ln!==null&&lt.update(Ln,34963),(Un||Nt)&&(Nt=!1,$n(zn,Yn,Qn,nr),Ln!==null&&dt.bindBuffer(34963,lt.get(Ln).buffer))}function Ut(){return ft.isWebGL2?dt.createVertexArray():Tt.createVertexArrayOES()}function zt(zn){return ft.isWebGL2?dt.bindVertexArray(zn):Tt.bindVertexArrayOES(zn)}function Zt(zn){return ft.isWebGL2?dt.deleteVertexArray(zn):Tt.deleteVertexArrayOES(zn)}function ln(zn,Yn,Qn){const nr=Qn.wireframe===!0;let Ln=At[zn.id];Ln===void 0&&(Ln={},At[zn.id]=Ln);let Un=Ln[Yn.id];Un===void 0&&(Un={},Ln[Yn.id]=Un);let Vn=Un[nr];return Vn===void 0&&(Vn=cn(Ut()),Un[nr]=Vn),Vn}function cn(zn){const Yn=[],Qn=[],nr=[];for(let Ln=0;Ln<St;Ln++)Yn[Ln]=0,Qn[Ln]=0,nr[Ln]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Yn,enabledAttributes:Qn,attributeDivisors:nr,object:zn,attributes:{},index:null}}function hn(zn,Yn,Qn,nr){const Ln=kt.attributes,Un=Yn.attributes;let Vn=0;const sr=Qn.getAttributes();for(const In in sr)if(sr[In].location>=0){const pr=Ln[In];let Jn=Un[In];if(Jn===void 0&&(In==="instanceMatrix"&&zn.instanceMatrix&&(Jn=zn.instanceMatrix),In==="instanceColor"&&zn.instanceColor&&(Jn=zn.instanceColor)),pr===void 0||pr.attribute!==Jn||Jn&&pr.data!==Jn.data)return!0;Vn++}return kt.attributesNum!==Vn||kt.index!==nr}function pn(zn,Yn,Qn,nr){const Ln={},Un=Yn.attributes;let Vn=0;const sr=Qn.getAttributes();for(const In in sr)if(sr[In].location>=0){let pr=Un[In];pr===void 0&&(In==="instanceMatrix"&&zn.instanceMatrix&&(pr=zn.instanceMatrix),In==="instanceColor"&&zn.instanceColor&&(pr=zn.instanceColor));const Jn={};Jn.attribute=pr,pr&&pr.data&&(Jn.data=pr.data),Ln[In]=Jn,Vn++}kt.attributes=Ln,kt.attributesNum=Vn,kt.index=nr}function dn(){const zn=kt.newAttributes;for(let Yn=0,Qn=zn.length;Yn<Qn;Yn++)zn[Yn]=0}function gn(zn){vn(zn,0)}function vn(zn,Yn){const Qn=kt.newAttributes,nr=kt.enabledAttributes,Ln=kt.attributeDivisors;Qn[zn]=1,nr[zn]===0&&(dt.enableVertexAttribArray(zn),nr[zn]=1),Ln[zn]!==Yn&&((ft.isWebGL2?dt:$.get("ANGLE_instanced_arrays"))[ft.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](zn,Yn),Ln[zn]=Yn)}function Tn(){const zn=kt.newAttributes,Yn=kt.enabledAttributes;for(let Qn=0,nr=Yn.length;Qn<nr;Qn++)Yn[Qn]!==zn[Qn]&&(dt.disableVertexAttribArray(Qn),Yn[Qn]=0)}function Cn(zn,Yn,Qn,nr,Ln,Un){ft.isWebGL2===!0&&(Qn===5124||Qn===5125)?dt.vertexAttribIPointer(zn,Yn,Qn,Ln,Un):dt.vertexAttribPointer(zn,Yn,Qn,nr,Ln,Un)}function $n(zn,Yn,Qn,nr){if(ft.isWebGL2===!1&&(zn.isInstancedMesh||nr.isInstancedBufferGeometry)&&$.get("ANGLE_instanced_arrays")===null)return;dn();const Ln=nr.attributes,Un=Qn.getAttributes(),Vn=Yn.defaultAttributeValues;for(const sr in Un){const In=Un[sr];if(In.location>=0){let ir=Ln[sr];if(ir===void 0&&(sr==="instanceMatrix"&&zn.instanceMatrix&&(ir=zn.instanceMatrix),sr==="instanceColor"&&zn.instanceColor&&(ir=zn.instanceColor)),ir!==void 0){const pr=ir.normalized,Jn=ir.itemSize,Pr=lt.get(ir);if(Pr===void 0)continue;const br=Pr.buffer,Gr=Pr.type,Kr=Pr.bytesPerElement;if(ir.isInterleavedBufferAttribute){const Xr=ir.data,Jr=Xr.stride,Tr=ir.offset;if(Xr.isInstancedInterleavedBuffer){for(let Ir=0;Ir<In.locationSize;Ir++)vn(In.location+Ir,Xr.meshPerAttribute);zn.isInstancedMesh!==!0&&nr._maxInstanceCount===void 0&&(nr._maxInstanceCount=Xr.meshPerAttribute*Xr.count)}else for(let Ir=0;Ir<In.locationSize;Ir++)gn(In.location+Ir);dt.bindBuffer(34962,br);for(let Ir=0;Ir<In.locationSize;Ir++)Cn(In.location+Ir,Jn/In.locationSize,Gr,pr,Jr*Kr,(Tr+Jn/In.locationSize*Ir)*Kr)}else{if(ir.isInstancedBufferAttribute){for(let Xr=0;Xr<In.locationSize;Xr++)vn(In.location+Xr,ir.meshPerAttribute);zn.isInstancedMesh!==!0&&nr._maxInstanceCount===void 0&&(nr._maxInstanceCount=ir.meshPerAttribute*ir.count)}else for(let Xr=0;Xr<In.locationSize;Xr++)gn(In.location+Xr);dt.bindBuffer(34962,br);for(let Xr=0;Xr<In.locationSize;Xr++)Cn(In.location+Xr,Jn/In.locationSize,Gr,pr,Jn*Kr,Jn/In.locationSize*Xr*Kr)}}else if(Vn!==void 0){const pr=Vn[sr];if(pr!==void 0)switch(pr.length){case 2:dt.vertexAttrib2fv(In.location,pr);break;case 3:dt.vertexAttrib3fv(In.location,pr);break;case 4:dt.vertexAttrib4fv(In.location,pr);break;default:dt.vertexAttrib1fv(In.location,pr)}}}}Tn()}function xn(){Nn();for(const zn in At){const Yn=At[zn];for(const Qn in Yn){const nr=Yn[Qn];for(const Ln in nr)Zt(nr[Ln].object),delete nr[Ln];delete Yn[Qn]}delete At[zn]}}function Rn(zn){if(At[zn.id]===void 0)return;const Yn=At[zn.id];for(const Qn in Yn){const nr=Yn[Qn];for(const Ln in nr)Zt(nr[Ln].object),delete nr[Ln];delete Yn[Qn]}delete At[zn.id]}function Pn(zn){for(const Yn in At){const Qn=At[Yn];if(Qn[zn.id]===void 0)continue;const nr=Qn[zn.id];for(const Ln in nr)Zt(nr[Ln].object),delete nr[Ln];delete Qn[zn.id]}}function Nn(){Wn(),Nt=!0,kt!==Rt&&(kt=Rt,zt(kt.object))}function Wn(){Rt.geometry=null,Rt.program=null,Rt.wireframe=!1}return{setup:Bt,reset:Nn,resetDefaultState:Wn,dispose:xn,releaseStatesOfGeometry:Rn,releaseStatesOfProgram:Pn,initAttributes:dn,enableAttribute:gn,disableUnusedAttributes:Tn}}function WebGLBufferRenderer(dt,$,lt,ft){const St=ft.isWebGL2;let Tt;function Ct(kt){Tt=kt}function At(kt,Nt){dt.drawArrays(Tt,kt,Nt),lt.update(Nt,Tt,1)}function Rt(kt,Nt,Bt){if(Bt===0)return;let Ut,zt;if(St)Ut=dt,zt="drawArraysInstanced";else if(Ut=$.get("ANGLE_instanced_arrays"),zt="drawArraysInstancedANGLE",Ut===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}Ut[zt](Tt,kt,Nt,Bt),lt.update(Nt,Tt,Bt)}this.setMode=Ct,this.render=At,this.renderInstances=Rt}function WebGLCapabilities(dt,$,lt){let ft;function St(){if(ft!==void 0)return ft;if($.has("EXT_texture_filter_anisotropic")===!0){const Cn=$.get("EXT_texture_filter_anisotropic");ft=dt.getParameter(Cn.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else ft=0;return ft}function Tt(Cn){if(Cn==="highp"){if(dt.getShaderPrecisionFormat(35633,36338).precision>0&&dt.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";Cn="mediump"}return Cn==="mediump"&&dt.getShaderPrecisionFormat(35633,36337).precision>0&&dt.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const Ct=typeof WebGL2RenderingContext<"u"&&dt instanceof WebGL2RenderingContext;let At=lt.precision!==void 0?lt.precision:"highp";const Rt=Tt(At);Rt!==At&&(console.warn("THREE.WebGLRenderer:",At,"not supported, using",Rt,"instead."),At=Rt);const kt=Ct||$.has("WEBGL_draw_buffers"),Nt=lt.logarithmicDepthBuffer===!0,Bt=dt.getParameter(34930),Ut=dt.getParameter(35660),zt=dt.getParameter(3379),Zt=dt.getParameter(34076),ln=dt.getParameter(34921),cn=dt.getParameter(36347),hn=dt.getParameter(36348),pn=dt.getParameter(36349),dn=Ut>0,gn=Ct||$.has("OES_texture_float"),vn=dn&&gn,Tn=Ct?dt.getParameter(36183):0;return{isWebGL2:Ct,drawBuffers:kt,getMaxAnisotropy:St,getMaxPrecision:Tt,precision:At,logarithmicDepthBuffer:Nt,maxTextures:Bt,maxVertexTextures:Ut,maxTextureSize:zt,maxCubemapSize:Zt,maxAttributes:ln,maxVertexUniforms:cn,maxVaryings:hn,maxFragmentUniforms:pn,vertexTextures:dn,floatFragmentTextures:gn,floatVertexTextures:vn,maxSamples:Tn}}function WebGLClipping(dt){const $=this;let lt=null,ft=0,St=!1,Tt=!1;const Ct=new Plane$1,At=new Matrix3,Rt={value:null,needsUpdate:!1};this.uniform=Rt,this.numPlanes=0,this.numIntersection=0,this.init=function(Bt,Ut){const zt=Bt.length!==0||Ut||ft!==0||St;return St=Ut,ft=Bt.length,zt},this.beginShadows=function(){Tt=!0,Nt(null)},this.endShadows=function(){Tt=!1},this.setGlobalState=function(Bt,Ut){lt=Nt(Bt,Ut,0)},this.setState=function(Bt,Ut,zt){const Zt=Bt.clippingPlanes,ln=Bt.clipIntersection,cn=Bt.clipShadows,hn=dt.get(Bt);if(!St||Zt===null||Zt.length===0||Tt&&!cn)Tt?Nt(null):kt();else{const pn=Tt?0:ft,dn=pn*4;let gn=hn.clippingState||null;Rt.value=gn,gn=Nt(Zt,Ut,dn,zt);for(let vn=0;vn!==dn;++vn)gn[vn]=lt[vn];hn.clippingState=gn,this.numIntersection=ln?this.numPlanes:0,this.numPlanes+=pn}};function kt(){Rt.value!==lt&&(Rt.value=lt,Rt.needsUpdate=ft>0),$.numPlanes=ft,$.numIntersection=0}function Nt(Bt,Ut,zt,Zt){const ln=Bt!==null?Bt.length:0;let cn=null;if(ln!==0){if(cn=Rt.value,Zt!==!0||cn===null){const hn=zt+ln*4,pn=Ut.matrixWorldInverse;At.getNormalMatrix(pn),(cn===null||cn.length<hn)&&(cn=new Float32Array(hn));for(let dn=0,gn=zt;dn!==ln;++dn,gn+=4)Ct.copy(Bt[dn]).applyMatrix4(pn,At),Ct.normal.toArray(cn,gn),cn[gn+3]=Ct.constant}Rt.value=cn,Rt.needsUpdate=!0}return $.numPlanes=ln,$.numIntersection=0,cn}}function WebGLCubeMaps(dt){let $=new WeakMap;function lt(Ct,At){return At===EquirectangularReflectionMapping?Ct.mapping=CubeReflectionMapping:At===EquirectangularRefractionMapping&&(Ct.mapping=CubeRefractionMapping),Ct}function ft(Ct){if(Ct&&Ct.isTexture&&Ct.isRenderTargetTexture===!1){const At=Ct.mapping;if(At===EquirectangularReflectionMapping||At===EquirectangularRefractionMapping)if($.has(Ct)){const Rt=$.get(Ct).texture;return lt(Rt,Ct.mapping)}else{const Rt=Ct.image;if(Rt&&Rt.height>0){const kt=new WebGLCubeRenderTarget(Rt.height/2);return kt.fromEquirectangularTexture(dt,Ct),$.set(Ct,kt),Ct.addEventListener("dispose",St),lt(kt.texture,Ct.mapping)}else return null}}return Ct}function St(Ct){const At=Ct.target;At.removeEventListener("dispose",St);const Rt=$.get(At);Rt!==void 0&&($.delete(At),Rt.dispose())}function Tt(){$=new WeakMap}return{get:ft,dispose:Tt}}let OrthographicCamera$1=class extends Camera{constructor($=-1,lt=1,ft=1,St=-1,Tt=.1,Ct=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=$,this.right=lt,this.top=ft,this.bottom=St,this.near=Tt,this.far=Ct,this.updateProjectionMatrix()}copy($,lt){return super.copy($,lt),this.left=$.left,this.right=$.right,this.top=$.top,this.bottom=$.bottom,this.near=$.near,this.far=$.far,this.zoom=$.zoom,this.view=$.view===null?null:Object.assign({},$.view),this}setViewOffset($,lt,ft,St,Tt,Ct){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=$,this.view.fullHeight=lt,this.view.offsetX=ft,this.view.offsetY=St,this.view.width=Tt,this.view.height=Ct,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const $=(this.right-this.left)/(2*this.zoom),lt=(this.top-this.bottom)/(2*this.zoom),ft=(this.right+this.left)/2,St=(this.top+this.bottom)/2;let Tt=ft-$,Ct=ft+$,At=St+lt,Rt=St-lt;if(this.view!==null&&this.view.enabled){const kt=(this.right-this.left)/this.view.fullWidth/this.zoom,Nt=(this.top-this.bottom)/this.view.fullHeight/this.zoom;Tt+=kt*this.view.offsetX,Ct=Tt+kt*this.view.width,At-=Nt*this.view.offsetY,Rt=At-Nt*this.view.height}this.projectionMatrix.makeOrthographic(Tt,Ct,At,Rt,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON($){const lt=super.toJSON($);return lt.object.zoom=this.zoom,lt.object.left=this.left,lt.object.right=this.right,lt.object.top=this.top,lt.object.bottom=this.bottom,lt.object.near=this.near,lt.object.far=this.far,this.view!==null&&(lt.object.view=Object.assign({},this.view)),lt}};const LOD_MIN=4,EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],MAX_SAMPLES=20,_flatCamera=new OrthographicCamera$1,_clearColor=new Color;let _oldTarget=null;const PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(1,1,1),new Vector3(-1,1,1),new Vector3(1,1,-1),new Vector3(-1,1,-1),new Vector3(0,PHI,INV_PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(INV_PHI,0,PHI),new Vector3(-INV_PHI,0,PHI),new Vector3(PHI,INV_PHI,0),new Vector3(-PHI,INV_PHI,0)];class PMREMGenerator{constructor($){this._renderer=$,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene($,lt=0,ft=.1,St=100){_oldTarget=this._renderer.getRenderTarget(),this._setSize(256);const Tt=this._allocateTargets();return Tt.depthBuffer=!0,this._sceneToCubeUV($,ft,St,Tt),lt>0&&this._blur(Tt,0,0,lt),this._applyPMREM(Tt),this._cleanup(Tt),Tt}fromEquirectangular($,lt=null){return this._fromTexture($,lt)}fromCubemap($,lt=null){return this._fromTexture($,lt)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize($){this._lodMax=Math.floor(Math.log2($)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let $=0;$<this._lodPlanes.length;$++)this._lodPlanes[$].dispose()}_cleanup($){this._renderer.setRenderTarget(_oldTarget),$.scissorTest=!1,_setViewport($,0,0,$.width,$.height)}_fromTexture($,lt){$.mapping===CubeReflectionMapping||$.mapping===CubeRefractionMapping?this._setSize($.image.length===0?16:$.image[0].width||$.image[0].image.width):this._setSize($.image.width/4),_oldTarget=this._renderer.getRenderTarget();const ft=lt||this._allocateTargets();return this._textureToCubeUV($,ft),this._applyPMREM(ft),this._cleanup(ft),ft}_allocateTargets(){const $=3*Math.max(this._cubeSize,112),lt=4*this._cubeSize,ft={magFilter:LinearFilter,minFilter:LinearFilter,generateMipmaps:!1,type:HalfFloatType,format:RGBAFormat,encoding:LinearEncoding,depthBuffer:!1},St=_createRenderTarget($,lt,ft);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==$||this._pingPongRenderTarget.height!==lt){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=_createRenderTarget($,lt,ft);const{_lodMax:Tt}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=_createPlanes(Tt)),this._blurMaterial=_getBlurShader(Tt,$,lt)}return St}_compileMaterial($){const lt=new Mesh(this._lodPlanes[0],$);this._renderer.compile(lt,_flatCamera)}_sceneToCubeUV($,lt,ft,St){const At=new PerspectiveCamera(90,1,lt,ft),Rt=[1,-1,1,1,1,1],kt=[1,1,1,-1,-1,-1],Nt=this._renderer,Bt=Nt.autoClear,Ut=Nt.toneMapping;Nt.getClearColor(_clearColor),Nt.toneMapping=NoToneMapping,Nt.autoClear=!1;const zt=new MeshBasicMaterial({name:"PMREM.Background",side:BackSide,depthWrite:!1,depthTest:!1}),Zt=new Mesh(new BoxGeometry,zt);let ln=!1;const cn=$.background;cn?cn.isColor&&(zt.color.copy(cn),$.background=null,ln=!0):(zt.color.copy(_clearColor),ln=!0);for(let hn=0;hn<6;hn++){const pn=hn%3;pn===0?(At.up.set(0,Rt[hn],0),At.lookAt(kt[hn],0,0)):pn===1?(At.up.set(0,0,Rt[hn]),At.lookAt(0,kt[hn],0)):(At.up.set(0,Rt[hn],0),At.lookAt(0,0,kt[hn]));const dn=this._cubeSize;_setViewport(St,pn*dn,hn>2?dn:0,dn,dn),Nt.setRenderTarget(St),ln&&Nt.render(Zt,At),Nt.render($,At)}Zt.geometry.dispose(),Zt.material.dispose(),Nt.toneMapping=Ut,Nt.autoClear=Bt,$.background=cn}_textureToCubeUV($,lt){const ft=this._renderer,St=$.mapping===CubeReflectionMapping||$.mapping===CubeRefractionMapping;St?(this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial()),this._cubemapMaterial.uniforms.flipEnvMap.value=$.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial());const Tt=St?this._cubemapMaterial:this._equirectMaterial,Ct=new Mesh(this._lodPlanes[0],Tt),At=Tt.uniforms;At.envMap.value=$;const Rt=this._cubeSize;_setViewport(lt,0,0,3*Rt,2*Rt),ft.setRenderTarget(lt),ft.render(Ct,_flatCamera)}_applyPMREM($){const lt=this._renderer,ft=lt.autoClear;lt.autoClear=!1;for(let St=1;St<this._lodPlanes.length;St++){const Tt=Math.sqrt(this._sigmas[St]*this._sigmas[St]-this._sigmas[St-1]*this._sigmas[St-1]),Ct=_axisDirections[(St-1)%_axisDirections.length];this._blur($,St-1,St,Tt,Ct)}lt.autoClear=ft}_blur($,lt,ft,St,Tt){const Ct=this._pingPongRenderTarget;this._halfBlur($,Ct,lt,ft,St,"latitudinal",Tt),this._halfBlur(Ct,$,ft,ft,St,"longitudinal",Tt)}_halfBlur($,lt,ft,St,Tt,Ct,At){const Rt=this._renderer,kt=this._blurMaterial;Ct!=="latitudinal"&&Ct!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const Nt=3,Bt=new Mesh(this._lodPlanes[St],kt),Ut=kt.uniforms,zt=this._sizeLods[ft]-1,Zt=isFinite(Tt)?Math.PI/(2*zt):2*Math.PI/(2*MAX_SAMPLES-1),ln=Tt/Zt,cn=isFinite(Tt)?1+Math.floor(Nt*ln):MAX_SAMPLES;cn>MAX_SAMPLES&&console.warn(`sigmaRadians, ${Tt}, is too large and will clip, as it requested ${cn} samples when the maximum is set to ${MAX_SAMPLES}`);const hn=[];let pn=0;for(let Cn=0;Cn<MAX_SAMPLES;++Cn){const $n=Cn/ln,xn=Math.exp(-$n*$n/2);hn.push(xn),Cn===0?pn+=xn:Cn<cn&&(pn+=2*xn)}for(let Cn=0;Cn<hn.length;Cn++)hn[Cn]=hn[Cn]/pn;Ut.envMap.value=$.texture,Ut.samples.value=cn,Ut.weights.value=hn,Ut.latitudinal.value=Ct==="latitudinal",At&&(Ut.poleAxis.value=At);const{_lodMax:dn}=this;Ut.dTheta.value=Zt,Ut.mipInt.value=dn-ft;const gn=this._sizeLods[St],vn=3*gn*(St>dn-LOD_MIN?St-dn+LOD_MIN:0),Tn=4*(this._cubeSize-gn);_setViewport(lt,vn,Tn,3*gn,2*gn),Rt.setRenderTarget(lt),Rt.render(Bt,_flatCamera)}}function _createPlanes(dt){const $=[],lt=[],ft=[];let St=dt;const Tt=dt-LOD_MIN+1+EXTRA_LOD_SIGMA.length;for(let Ct=0;Ct<Tt;Ct++){const At=Math.pow(2,St);lt.push(At);let Rt=1/At;Ct>dt-LOD_MIN?Rt=EXTRA_LOD_SIGMA[Ct-dt+LOD_MIN-1]:Ct===0&&(Rt=0),ft.push(Rt);const kt=1/(At-2),Nt=-kt,Bt=1+kt,Ut=[Nt,Nt,Bt,Nt,Bt,Bt,Nt,Nt,Bt,Bt,Nt,Bt],zt=6,Zt=6,ln=3,cn=2,hn=1,pn=new Float32Array(ln*Zt*zt),dn=new Float32Array(cn*Zt*zt),gn=new Float32Array(hn*Zt*zt);for(let Tn=0;Tn<zt;Tn++){const Cn=Tn%3*2/3-1,$n=Tn>2?0:-1,xn=[Cn,$n,0,Cn+2/3,$n,0,Cn+2/3,$n+1,0,Cn,$n,0,Cn+2/3,$n+1,0,Cn,$n+1,0];pn.set(xn,ln*Zt*Tn),dn.set(Ut,cn*Zt*Tn);const Rn=[Tn,Tn,Tn,Tn,Tn,Tn];gn.set(Rn,hn*Zt*Tn)}const vn=new BufferGeometry;vn.setAttribute("position",new BufferAttribute(pn,ln)),vn.setAttribute("uv",new BufferAttribute(dn,cn)),vn.setAttribute("faceIndex",new BufferAttribute(gn,hn)),$.push(vn),St>LOD_MIN&&St--}return{lodPlanes:$,sizeLods:lt,sigmas:ft}}function _createRenderTarget(dt,$,lt){const ft=new WebGLRenderTarget(dt,$,lt);return ft.texture.mapping=CubeUVReflectionMapping,ft.texture.name="PMREM.cubeUv",ft.scissorTest=!0,ft}function _setViewport(dt,$,lt,ft,St){dt.viewport.set($,lt,ft,St),dt.scissor.set($,lt,ft,St)}function _getBlurShader(dt,$,lt){const ft=new Float32Array(MAX_SAMPLES),St=new Vector3(0,1,0);return new ShaderMaterial({name:"SphericalGaussianBlur",defines:{n:MAX_SAMPLES,CUBEUV_TEXEL_WIDTH:1/$,CUBEUV_TEXEL_HEIGHT:1/lt,CUBEUV_MAX_MIP:`${dt}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:ft},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:St}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getEquirectMaterial(){return new ShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCubemapMaterial(){return new ShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCommonVertexShader(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function WebGLCubeUVMaps(dt){let $=new WeakMap,lt=null;function ft(At){if(At&&At.isTexture){const Rt=At.mapping,kt=Rt===EquirectangularReflectionMapping||Rt===EquirectangularRefractionMapping,Nt=Rt===CubeReflectionMapping||Rt===CubeRefractionMapping;if(kt||Nt)if(At.isRenderTargetTexture&&At.needsPMREMUpdate===!0){At.needsPMREMUpdate=!1;let Bt=$.get(At);return lt===null&&(lt=new PMREMGenerator(dt)),Bt=kt?lt.fromEquirectangular(At,Bt):lt.fromCubemap(At,Bt),$.set(At,Bt),Bt.texture}else{if($.has(At))return $.get(At).texture;{const Bt=At.image;if(kt&&Bt&&Bt.height>0||Nt&&Bt&&St(Bt)){lt===null&&(lt=new PMREMGenerator(dt));const Ut=kt?lt.fromEquirectangular(At):lt.fromCubemap(At);return $.set(At,Ut),At.addEventListener("dispose",Tt),Ut.texture}else return null}}}return At}function St(At){let Rt=0;const kt=6;for(let Nt=0;Nt<kt;Nt++)At[Nt]!==void 0&&Rt++;return Rt===kt}function Tt(At){const Rt=At.target;Rt.removeEventListener("dispose",Tt);const kt=$.get(Rt);kt!==void 0&&($.delete(Rt),kt.dispose())}function Ct(){$=new WeakMap,lt!==null&&(lt.dispose(),lt=null)}return{get:ft,dispose:Ct}}function WebGLExtensions(dt){const $={};function lt(ft){if($[ft]!==void 0)return $[ft];let St;switch(ft){case"WEBGL_depth_texture":St=dt.getExtension("WEBGL_depth_texture")||dt.getExtension("MOZ_WEBGL_depth_texture")||dt.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":St=dt.getExtension("EXT_texture_filter_anisotropic")||dt.getExtension("MOZ_EXT_texture_filter_anisotropic")||dt.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":St=dt.getExtension("WEBGL_compressed_texture_s3tc")||dt.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||dt.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":St=dt.getExtension("WEBGL_compressed_texture_pvrtc")||dt.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:St=dt.getExtension(ft)}return $[ft]=St,St}return{has:function(ft){return lt(ft)!==null},init:function(ft){ft.isWebGL2?lt("EXT_color_buffer_float"):(lt("WEBGL_depth_texture"),lt("OES_texture_float"),lt("OES_texture_half_float"),lt("OES_texture_half_float_linear"),lt("OES_standard_derivatives"),lt("OES_element_index_uint"),lt("OES_vertex_array_object"),lt("ANGLE_instanced_arrays")),lt("OES_texture_float_linear"),lt("EXT_color_buffer_half_float"),lt("WEBGL_multisampled_render_to_texture")},get:function(ft){const St=lt(ft);return St===null&&console.warn("THREE.WebGLRenderer: "+ft+" extension not supported."),St}}}function WebGLGeometries(dt,$,lt,ft){const St={},Tt=new WeakMap;function Ct(Bt){const Ut=Bt.target;Ut.index!==null&&$.remove(Ut.index);for(const Zt in Ut.attributes)$.remove(Ut.attributes[Zt]);Ut.removeEventListener("dispose",Ct),delete St[Ut.id];const zt=Tt.get(Ut);zt&&($.remove(zt),Tt.delete(Ut)),ft.releaseStatesOfGeometry(Ut),Ut.isInstancedBufferGeometry===!0&&delete Ut._maxInstanceCount,lt.memory.geometries--}function At(Bt,Ut){return St[Ut.id]===!0||(Ut.addEventListener("dispose",Ct),St[Ut.id]=!0,lt.memory.geometries++),Ut}function Rt(Bt){const Ut=Bt.attributes;for(const Zt in Ut)$.update(Ut[Zt],34962);const zt=Bt.morphAttributes;for(const Zt in zt){const ln=zt[Zt];for(let cn=0,hn=ln.length;cn<hn;cn++)$.update(ln[cn],34962)}}function kt(Bt){const Ut=[],zt=Bt.index,Zt=Bt.attributes.position;let ln=0;if(zt!==null){const pn=zt.array;ln=zt.version;for(let dn=0,gn=pn.length;dn<gn;dn+=3){const vn=pn[dn+0],Tn=pn[dn+1],Cn=pn[dn+2];Ut.push(vn,Tn,Tn,Cn,Cn,vn)}}else{const pn=Zt.array;ln=Zt.version;for(let dn=0,gn=pn.length/3-1;dn<gn;dn+=3){const vn=dn+0,Tn=dn+1,Cn=dn+2;Ut.push(vn,Tn,Tn,Cn,Cn,vn)}}const cn=new(arrayNeedsUint32(Ut)?Uint32BufferAttribute:Uint16BufferAttribute)(Ut,1);cn.version=ln;const hn=Tt.get(Bt);hn&&$.remove(hn),Tt.set(Bt,cn)}function Nt(Bt){const Ut=Tt.get(Bt);if(Ut){const zt=Bt.index;zt!==null&&Ut.version<zt.version&&kt(Bt)}else kt(Bt);return Tt.get(Bt)}return{get:At,update:Rt,getWireframeAttribute:Nt}}function WebGLIndexedBufferRenderer(dt,$,lt,ft){const St=ft.isWebGL2;let Tt;function Ct(Ut){Tt=Ut}let At,Rt;function kt(Ut){At=Ut.type,Rt=Ut.bytesPerElement}function Nt(Ut,zt){dt.drawElements(Tt,zt,At,Ut*Rt),lt.update(zt,Tt,1)}function Bt(Ut,zt,Zt){if(Zt===0)return;let ln,cn;if(St)ln=dt,cn="drawElementsInstanced";else if(ln=$.get("ANGLE_instanced_arrays"),cn="drawElementsInstancedANGLE",ln===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}ln[cn](Tt,zt,At,Ut*Rt,Zt),lt.update(zt,Tt,Zt)}this.setMode=Ct,this.setIndex=kt,this.render=Nt,this.renderInstances=Bt}function WebGLInfo(dt){const $={geometries:0,textures:0},lt={frame:0,calls:0,triangles:0,points:0,lines:0};function ft(Tt,Ct,At){switch(lt.calls++,Ct){case 4:lt.triangles+=At*(Tt/3);break;case 1:lt.lines+=At*(Tt/2);break;case 3:lt.lines+=At*(Tt-1);break;case 2:lt.lines+=At*Tt;break;case 0:lt.points+=At*Tt;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",Ct);break}}function St(){lt.frame++,lt.calls=0,lt.triangles=0,lt.points=0,lt.lines=0}return{memory:$,render:lt,programs:null,autoReset:!0,reset:St,update:ft}}function numericalSort(dt,$){return dt[0]-$[0]}function absNumericalSort(dt,$){return Math.abs($[1])-Math.abs(dt[1])}function WebGLMorphtargets(dt,$,lt){const ft={},St=new Float32Array(8),Tt=new WeakMap,Ct=new Vector4,At=[];for(let kt=0;kt<8;kt++)At[kt]=[kt,0];function Rt(kt,Nt,Bt){const Ut=kt.morphTargetInfluences;if($.isWebGL2===!0){const Zt=Nt.morphAttributes.position||Nt.morphAttributes.normal||Nt.morphAttributes.color,ln=Zt!==void 0?Zt.length:0;let cn=Tt.get(Nt);if(cn===void 0||cn.count!==ln){let Yn=function(){Wn.dispose(),Tt.delete(Nt),Nt.removeEventListener("dispose",Yn)};var zt=Yn;cn!==void 0&&cn.texture.dispose();const dn=Nt.morphAttributes.position!==void 0,gn=Nt.morphAttributes.normal!==void 0,vn=Nt.morphAttributes.color!==void 0,Tn=Nt.morphAttributes.position||[],Cn=Nt.morphAttributes.normal||[],$n=Nt.morphAttributes.color||[];let xn=0;dn===!0&&(xn=1),gn===!0&&(xn=2),vn===!0&&(xn=3);let Rn=Nt.attributes.position.count*xn,Pn=1;Rn>$.maxTextureSize&&(Pn=Math.ceil(Rn/$.maxTextureSize),Rn=$.maxTextureSize);const Nn=new Float32Array(Rn*Pn*4*ln),Wn=new DataArrayTexture(Nn,Rn,Pn,ln);Wn.type=FloatType,Wn.needsUpdate=!0;const zn=xn*4;for(let Qn=0;Qn<ln;Qn++){const nr=Tn[Qn],Ln=Cn[Qn],Un=$n[Qn],Vn=Rn*Pn*4*Qn;for(let sr=0;sr<nr.count;sr++){const In=sr*zn;dn===!0&&(Ct.fromBufferAttribute(nr,sr),Nn[Vn+In+0]=Ct.x,Nn[Vn+In+1]=Ct.y,Nn[Vn+In+2]=Ct.z,Nn[Vn+In+3]=0),gn===!0&&(Ct.fromBufferAttribute(Ln,sr),Nn[Vn+In+4]=Ct.x,Nn[Vn+In+5]=Ct.y,Nn[Vn+In+6]=Ct.z,Nn[Vn+In+7]=0),vn===!0&&(Ct.fromBufferAttribute(Un,sr),Nn[Vn+In+8]=Ct.x,Nn[Vn+In+9]=Ct.y,Nn[Vn+In+10]=Ct.z,Nn[Vn+In+11]=Un.itemSize===4?Ct.w:1)}}cn={count:ln,texture:Wn,size:new Vector2(Rn,Pn)},Tt.set(Nt,cn),Nt.addEventListener("dispose",Yn)}let hn=0;for(let dn=0;dn<Ut.length;dn++)hn+=Ut[dn];const pn=Nt.morphTargetsRelative?1:1-hn;Bt.getUniforms().setValue(dt,"morphTargetBaseInfluence",pn),Bt.getUniforms().setValue(dt,"morphTargetInfluences",Ut),Bt.getUniforms().setValue(dt,"morphTargetsTexture",cn.texture,lt),Bt.getUniforms().setValue(dt,"morphTargetsTextureSize",cn.size)}else{const Zt=Ut===void 0?0:Ut.length;let ln=ft[Nt.id];if(ln===void 0||ln.length!==Zt){ln=[];for(let gn=0;gn<Zt;gn++)ln[gn]=[gn,0];ft[Nt.id]=ln}for(let gn=0;gn<Zt;gn++){const vn=ln[gn];vn[0]=gn,vn[1]=Ut[gn]}ln.sort(absNumericalSort);for(let gn=0;gn<8;gn++)gn<Zt&&ln[gn][1]?(At[gn][0]=ln[gn][0],At[gn][1]=ln[gn][1]):(At[gn][0]=Number.MAX_SAFE_INTEGER,At[gn][1]=0);At.sort(numericalSort);const cn=Nt.morphAttributes.position,hn=Nt.morphAttributes.normal;let pn=0;for(let gn=0;gn<8;gn++){const vn=At[gn],Tn=vn[0],Cn=vn[1];Tn!==Number.MAX_SAFE_INTEGER&&Cn?(cn&&Nt.getAttribute("morphTarget"+gn)!==cn[Tn]&&Nt.setAttribute("morphTarget"+gn,cn[Tn]),hn&&Nt.getAttribute("morphNormal"+gn)!==hn[Tn]&&Nt.setAttribute("morphNormal"+gn,hn[Tn]),St[gn]=Cn,pn+=Cn):(cn&&Nt.hasAttribute("morphTarget"+gn)===!0&&Nt.deleteAttribute("morphTarget"+gn),hn&&Nt.hasAttribute("morphNormal"+gn)===!0&&Nt.deleteAttribute("morphNormal"+gn),St[gn]=0)}const dn=Nt.morphTargetsRelative?1:1-pn;Bt.getUniforms().setValue(dt,"morphTargetBaseInfluence",dn),Bt.getUniforms().setValue(dt,"morphTargetInfluences",St)}}return{update:Rt}}function WebGLObjects(dt,$,lt,ft){let St=new WeakMap;function Tt(Rt){const kt=ft.render.frame,Nt=Rt.geometry,Bt=$.get(Rt,Nt);return St.get(Bt)!==kt&&($.update(Bt),St.set(Bt,kt)),Rt.isInstancedMesh&&(Rt.hasEventListener("dispose",At)===!1&&Rt.addEventListener("dispose",At),lt.update(Rt.instanceMatrix,34962),Rt.instanceColor!==null&&lt.update(Rt.instanceColor,34962)),Bt}function Ct(){St=new WeakMap}function At(Rt){const kt=Rt.target;kt.removeEventListener("dispose",At),lt.remove(kt.instanceMatrix),kt.instanceColor!==null&&lt.remove(kt.instanceColor)}return{update:Tt,dispose:Ct}}const emptyTexture=new Texture,emptyArrayTexture=new DataArrayTexture,empty3dTexture=new Data3DTexture,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten$2(dt,$,lt){const ft=dt[0];if(ft<=0||ft>0)return dt;const St=$*lt;let Tt=arrayCacheF32[St];if(Tt===void 0&&(Tt=new Float32Array(St),arrayCacheF32[St]=Tt),$!==0){ft.toArray(Tt,0);for(let Ct=1,At=0;Ct!==$;++Ct)At+=lt,dt[Ct].toArray(Tt,At)}return Tt}function arraysEqual(dt,$){if(dt.length!==$.length)return!1;for(let lt=0,ft=dt.length;lt<ft;lt++)if(dt[lt]!==$[lt])return!1;return!0}function copyArray(dt,$){for(let lt=0,ft=$.length;lt<ft;lt++)dt[lt]=$[lt]}function allocTexUnits(dt,$){let lt=arrayCacheI32[$];lt===void 0&&(lt=new Int32Array($),arrayCacheI32[$]=lt);for(let ft=0;ft!==$;++ft)lt[ft]=dt.allocateTextureUnit();return lt}function setValueV1f(dt,$){const lt=this.cache;lt[0]!==$&&(dt.uniform1f(this.addr,$),lt[0]=$)}function setValueV2f(dt,$){const lt=this.cache;if($.x!==void 0)(lt[0]!==$.x||lt[1]!==$.y)&&(dt.uniform2f(this.addr,$.x,$.y),lt[0]=$.x,lt[1]=$.y);else{if(arraysEqual(lt,$))return;dt.uniform2fv(this.addr,$),copyArray(lt,$)}}function setValueV3f(dt,$){const lt=this.cache;if($.x!==void 0)(lt[0]!==$.x||lt[1]!==$.y||lt[2]!==$.z)&&(dt.uniform3f(this.addr,$.x,$.y,$.z),lt[0]=$.x,lt[1]=$.y,lt[2]=$.z);else if($.r!==void 0)(lt[0]!==$.r||lt[1]!==$.g||lt[2]!==$.b)&&(dt.uniform3f(this.addr,$.r,$.g,$.b),lt[0]=$.r,lt[1]=$.g,lt[2]=$.b);else{if(arraysEqual(lt,$))return;dt.uniform3fv(this.addr,$),copyArray(lt,$)}}function setValueV4f(dt,$){const lt=this.cache;if($.x!==void 0)(lt[0]!==$.x||lt[1]!==$.y||lt[2]!==$.z||lt[3]!==$.w)&&(dt.uniform4f(this.addr,$.x,$.y,$.z,$.w),lt[0]=$.x,lt[1]=$.y,lt[2]=$.z,lt[3]=$.w);else{if(arraysEqual(lt,$))return;dt.uniform4fv(this.addr,$),copyArray(lt,$)}}function setValueM2(dt,$){const lt=this.cache,ft=$.elements;if(ft===void 0){if(arraysEqual(lt,$))return;dt.uniformMatrix2fv(this.addr,!1,$),copyArray(lt,$)}else{if(arraysEqual(lt,ft))return;mat2array.set(ft),dt.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(lt,ft)}}function setValueM3(dt,$){const lt=this.cache,ft=$.elements;if(ft===void 0){if(arraysEqual(lt,$))return;dt.uniformMatrix3fv(this.addr,!1,$),copyArray(lt,$)}else{if(arraysEqual(lt,ft))return;mat3array.set(ft),dt.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(lt,ft)}}function setValueM4(dt,$){const lt=this.cache,ft=$.elements;if(ft===void 0){if(arraysEqual(lt,$))return;dt.uniformMatrix4fv(this.addr,!1,$),copyArray(lt,$)}else{if(arraysEqual(lt,ft))return;mat4array.set(ft),dt.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(lt,ft)}}function setValueV1i(dt,$){const lt=this.cache;lt[0]!==$&&(dt.uniform1i(this.addr,$),lt[0]=$)}function setValueV2i(dt,$){const lt=this.cache;if($.x!==void 0)(lt[0]!==$.x||lt[1]!==$.y)&&(dt.uniform2i(this.addr,$.x,$.y),lt[0]=$.x,lt[1]=$.y);else{if(arraysEqual(lt,$))return;dt.uniform2iv(this.addr,$),copyArray(lt,$)}}function setValueV3i(dt,$){const lt=this.cache;if($.x!==void 0)(lt[0]!==$.x||lt[1]!==$.y||lt[2]!==$.z)&&(dt.uniform3i(this.addr,$.x,$.y,$.z),lt[0]=$.x,lt[1]=$.y,lt[2]=$.z);else{if(arraysEqual(lt,$))return;dt.uniform3iv(this.addr,$),copyArray(lt,$)}}function setValueV4i(dt,$){const lt=this.cache;if($.x!==void 0)(lt[0]!==$.x||lt[1]!==$.y||lt[2]!==$.z||lt[3]!==$.w)&&(dt.uniform4i(this.addr,$.x,$.y,$.z,$.w),lt[0]=$.x,lt[1]=$.y,lt[2]=$.z,lt[3]=$.w);else{if(arraysEqual(lt,$))return;dt.uniform4iv(this.addr,$),copyArray(lt,$)}}function setValueV1ui(dt,$){const lt=this.cache;lt[0]!==$&&(dt.uniform1ui(this.addr,$),lt[0]=$)}function setValueV2ui(dt,$){const lt=this.cache;if($.x!==void 0)(lt[0]!==$.x||lt[1]!==$.y)&&(dt.uniform2ui(this.addr,$.x,$.y),lt[0]=$.x,lt[1]=$.y);else{if(arraysEqual(lt,$))return;dt.uniform2uiv(this.addr,$),copyArray(lt,$)}}function setValueV3ui(dt,$){const lt=this.cache;if($.x!==void 0)(lt[0]!==$.x||lt[1]!==$.y||lt[2]!==$.z)&&(dt.uniform3ui(this.addr,$.x,$.y,$.z),lt[0]=$.x,lt[1]=$.y,lt[2]=$.z);else{if(arraysEqual(lt,$))return;dt.uniform3uiv(this.addr,$),copyArray(lt,$)}}function setValueV4ui(dt,$){const lt=this.cache;if($.x!==void 0)(lt[0]!==$.x||lt[1]!==$.y||lt[2]!==$.z||lt[3]!==$.w)&&(dt.uniform4ui(this.addr,$.x,$.y,$.z,$.w),lt[0]=$.x,lt[1]=$.y,lt[2]=$.z,lt[3]=$.w);else{if(arraysEqual(lt,$))return;dt.uniform4uiv(this.addr,$),copyArray(lt,$)}}function setValueT1(dt,$,lt){const ft=this.cache,St=lt.allocateTextureUnit();ft[0]!==St&&(dt.uniform1i(this.addr,St),ft[0]=St),lt.setTexture2D($||emptyTexture,St)}function setValueT3D1(dt,$,lt){const ft=this.cache,St=lt.allocateTextureUnit();ft[0]!==St&&(dt.uniform1i(this.addr,St),ft[0]=St),lt.setTexture3D($||empty3dTexture,St)}function setValueT6(dt,$,lt){const ft=this.cache,St=lt.allocateTextureUnit();ft[0]!==St&&(dt.uniform1i(this.addr,St),ft[0]=St),lt.setTextureCube($||emptyCubeTexture,St)}function setValueT2DArray1(dt,$,lt){const ft=this.cache,St=lt.allocateTextureUnit();ft[0]!==St&&(dt.uniform1i(this.addr,St),ft[0]=St),lt.setTexture2DArray($||emptyArrayTexture,St)}function getSingularSetter(dt){switch(dt){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(dt,$){dt.uniform1fv(this.addr,$)}function setValueV2fArray(dt,$){const lt=flatten$2($,this.size,2);dt.uniform2fv(this.addr,lt)}function setValueV3fArray(dt,$){const lt=flatten$2($,this.size,3);dt.uniform3fv(this.addr,lt)}function setValueV4fArray(dt,$){const lt=flatten$2($,this.size,4);dt.uniform4fv(this.addr,lt)}function setValueM2Array(dt,$){const lt=flatten$2($,this.size,4);dt.uniformMatrix2fv(this.addr,!1,lt)}function setValueM3Array(dt,$){const lt=flatten$2($,this.size,9);dt.uniformMatrix3fv(this.addr,!1,lt)}function setValueM4Array(dt,$){const lt=flatten$2($,this.size,16);dt.uniformMatrix4fv(this.addr,!1,lt)}function setValueV1iArray(dt,$){dt.uniform1iv(this.addr,$)}function setValueV2iArray(dt,$){dt.uniform2iv(this.addr,$)}function setValueV3iArray(dt,$){dt.uniform3iv(this.addr,$)}function setValueV4iArray(dt,$){dt.uniform4iv(this.addr,$)}function setValueV1uiArray(dt,$){dt.uniform1uiv(this.addr,$)}function setValueV2uiArray(dt,$){dt.uniform2uiv(this.addr,$)}function setValueV3uiArray(dt,$){dt.uniform3uiv(this.addr,$)}function setValueV4uiArray(dt,$){dt.uniform4uiv(this.addr,$)}function setValueT1Array(dt,$,lt){const ft=this.cache,St=$.length,Tt=allocTexUnits(lt,St);arraysEqual(ft,Tt)||(dt.uniform1iv(this.addr,Tt),copyArray(ft,Tt));for(let Ct=0;Ct!==St;++Ct)lt.setTexture2D($[Ct]||emptyTexture,Tt[Ct])}function setValueT3DArray(dt,$,lt){const ft=this.cache,St=$.length,Tt=allocTexUnits(lt,St);arraysEqual(ft,Tt)||(dt.uniform1iv(this.addr,Tt),copyArray(ft,Tt));for(let Ct=0;Ct!==St;++Ct)lt.setTexture3D($[Ct]||empty3dTexture,Tt[Ct])}function setValueT6Array(dt,$,lt){const ft=this.cache,St=$.length,Tt=allocTexUnits(lt,St);arraysEqual(ft,Tt)||(dt.uniform1iv(this.addr,Tt),copyArray(ft,Tt));for(let Ct=0;Ct!==St;++Ct)lt.setTextureCube($[Ct]||emptyCubeTexture,Tt[Ct])}function setValueT2DArrayArray(dt,$,lt){const ft=this.cache,St=$.length,Tt=allocTexUnits(lt,St);arraysEqual(ft,Tt)||(dt.uniform1iv(this.addr,Tt),copyArray(ft,Tt));for(let Ct=0;Ct!==St;++Ct)lt.setTexture2DArray($[Ct]||emptyArrayTexture,Tt[Ct])}function getPureArraySetter(dt){switch(dt){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35679:case 36299:case 36307:return setValueT3DArray;case 35680:case 36300:case 36308:case 36293:return setValueT6Array;case 36289:case 36303:case 36311:case 36292:return setValueT2DArrayArray}}class SingleUniform{constructor($,lt,ft){this.id=$,this.addr=ft,this.cache=[],this.setValue=getSingularSetter(lt.type)}}class PureArrayUniform{constructor($,lt,ft){this.id=$,this.addr=ft,this.cache=[],this.size=lt.size,this.setValue=getPureArraySetter(lt.type)}}class StructuredUniform{constructor($){this.id=$,this.seq=[],this.map={}}setValue($,lt,ft){const St=this.seq;for(let Tt=0,Ct=St.length;Tt!==Ct;++Tt){const At=St[Tt];At.setValue($,lt[At.id],ft)}}}const RePathPart=/(\w+)(\])?(\[|\.)?/g;function addUniform(dt,$){dt.seq.push($),dt.map[$.id]=$}function parseUniform(dt,$,lt){const ft=dt.name,St=ft.length;for(RePathPart.lastIndex=0;;){const Tt=RePathPart.exec(ft),Ct=RePathPart.lastIndex;let At=Tt[1];const Rt=Tt[2]==="]",kt=Tt[3];if(Rt&&(At=At|0),kt===void 0||kt==="["&&Ct+2===St){addUniform(lt,kt===void 0?new SingleUniform(At,dt,$):new PureArrayUniform(At,dt,$));break}else{let Bt=lt.map[At];Bt===void 0&&(Bt=new StructuredUniform(At),addUniform(lt,Bt)),lt=Bt}}}class WebGLUniforms{constructor($,lt){this.seq=[],this.map={};const ft=$.getProgramParameter(lt,35718);for(let St=0;St<ft;++St){const Tt=$.getActiveUniform(lt,St),Ct=$.getUniformLocation(lt,Tt.name);parseUniform(Tt,Ct,this)}}setValue($,lt,ft,St){const Tt=this.map[lt];Tt!==void 0&&Tt.setValue($,ft,St)}setOptional($,lt,ft){const St=lt[ft];St!==void 0&&this.setValue($,ft,St)}static upload($,lt,ft,St){for(let Tt=0,Ct=lt.length;Tt!==Ct;++Tt){const At=lt[Tt],Rt=ft[At.id];Rt.needsUpdate!==!1&&At.setValue($,Rt.value,St)}}static seqWithValue($,lt){const ft=[];for(let St=0,Tt=$.length;St!==Tt;++St){const Ct=$[St];Ct.id in lt&&ft.push(Ct)}return ft}}function WebGLShader(dt,$,lt){const ft=dt.createShader($);return dt.shaderSource(ft,lt),dt.compileShader(ft),ft}let programIdCount=0;function handleSource(dt,$){const lt=dt.split(`
`),ft=[],St=Math.max($-6,0),Tt=Math.min($+6,lt.length);for(let Ct=St;Ct<Tt;Ct++){const At=Ct+1;ft.push(`${At===$?">":" "} ${At}: ${lt[Ct]}`)}return ft.join(`
`)}function getEncodingComponents(dt){switch(dt){case LinearEncoding:return["Linear","( value )"];case sRGBEncoding:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",dt),["Linear","( value )"]}}function getShaderErrors(dt,$,lt){const ft=dt.getShaderParameter($,35713),St=dt.getShaderInfoLog($).trim();if(ft&&St==="")return"";const Tt=/ERROR: 0:(\d+)/.exec(St);if(Tt){const Ct=parseInt(Tt[1]);return lt.toUpperCase()+`

`+St+`

`+handleSource(dt.getShaderSource($),Ct)}else return St}function getTexelEncodingFunction(dt,$){const lt=getEncodingComponents($);return"vec4 "+dt+"( vec4 value ) { return LinearTo"+lt[0]+lt[1]+"; }"}function getToneMappingFunction(dt,$){let lt;switch($){case LinearToneMapping:lt="Linear";break;case ReinhardToneMapping:lt="Reinhard";break;case CineonToneMapping:lt="OptimizedCineon";break;case ACESFilmicToneMapping:lt="ACESFilmic";break;case CustomToneMapping:lt="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",$),lt="Linear"}return"vec3 "+dt+"( vec3 color ) { return "+lt+"ToneMapping( color ); }"}function generateExtensions(dt){return[dt.extensionDerivatives||dt.envMapCubeUVHeight||dt.bumpMap||dt.tangentSpaceNormalMap||dt.clearcoatNormalMap||dt.flatShading||dt.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(dt.extensionFragDepth||dt.logarithmicDepthBuffer)&&dt.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",dt.extensionDrawBuffers&&dt.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(dt.extensionShaderTextureLOD||dt.envMap||dt.transmission)&&dt.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(filterEmptyLine).join(`
`)}function generateDefines(dt){const $=[];for(const lt in dt){const ft=dt[lt];ft!==!1&&$.push("#define "+lt+" "+ft)}return $.join(`
`)}function fetchAttributeLocations(dt,$){const lt={},ft=dt.getProgramParameter($,35721);for(let St=0;St<ft;St++){const Tt=dt.getActiveAttrib($,St),Ct=Tt.name;let At=1;Tt.type===35674&&(At=2),Tt.type===35675&&(At=3),Tt.type===35676&&(At=4),lt[Ct]={type:Tt.type,location:dt.getAttribLocation($,Ct),locationSize:At}}return lt}function filterEmptyLine(dt){return dt!==""}function replaceLightNums(dt,$){const lt=$.numSpotLightShadows+$.numSpotLightMaps-$.numSpotLightShadowsWithMaps;return dt.replace(/NUM_DIR_LIGHTS/g,$.numDirLights).replace(/NUM_SPOT_LIGHTS/g,$.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,$.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,lt).replace(/NUM_RECT_AREA_LIGHTS/g,$.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,$.numPointLights).replace(/NUM_HEMI_LIGHTS/g,$.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,$.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,$.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,$.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,$.numPointLightShadows)}function replaceClippingPlaneNums(dt,$){return dt.replace(/NUM_CLIPPING_PLANES/g,$.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,$.numClippingPlanes-$.numClipIntersection)}const includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(dt){return dt.replace(includePattern,includeReplacer)}function includeReplacer(dt,$){const lt=ShaderChunk[$];if(lt===void 0)throw new Error("Can not resolve #include <"+$+">");return resolveIncludes(lt)}const unrollLoopPattern=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(dt){return dt.replace(unrollLoopPattern,loopReplacer)}function loopReplacer(dt,$,lt,ft){let St="";for(let Tt=parseInt($);Tt<parseInt(lt);Tt++)St+=ft.replace(/\[\s*i\s*\]/g,"[ "+Tt+" ]").replace(/UNROLLED_LOOP_INDEX/g,Tt);return St}function generatePrecision(dt){let $="precision "+dt.precision+` float;
precision `+dt.precision+" int;";return dt.precision==="highp"?$+=`
#define HIGH_PRECISION`:dt.precision==="mediump"?$+=`
#define MEDIUM_PRECISION`:dt.precision==="lowp"&&($+=`
#define LOW_PRECISION`),$}function generateShadowMapTypeDefine(dt){let $="SHADOWMAP_TYPE_BASIC";return dt.shadowMapType===PCFShadowMap?$="SHADOWMAP_TYPE_PCF":dt.shadowMapType===PCFSoftShadowMap?$="SHADOWMAP_TYPE_PCF_SOFT":dt.shadowMapType===VSMShadowMap&&($="SHADOWMAP_TYPE_VSM"),$}function generateEnvMapTypeDefine(dt){let $="ENVMAP_TYPE_CUBE";if(dt.envMap)switch(dt.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:$="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:$="ENVMAP_TYPE_CUBE_UV";break}return $}function generateEnvMapModeDefine(dt){let $="ENVMAP_MODE_REFLECTION";if(dt.envMap)switch(dt.envMapMode){case CubeRefractionMapping:$="ENVMAP_MODE_REFRACTION";break}return $}function generateEnvMapBlendingDefine(dt){let $="ENVMAP_BLENDING_NONE";if(dt.envMap)switch(dt.combine){case MultiplyOperation:$="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:$="ENVMAP_BLENDING_MIX";break;case AddOperation:$="ENVMAP_BLENDING_ADD";break}return $}function generateCubeUVSize(dt){const $=dt.envMapCubeUVHeight;if($===null)return null;const lt=Math.log2($)-2,ft=1/$;return{texelWidth:1/(3*Math.max(Math.pow(2,lt),7*16)),texelHeight:ft,maxMip:lt}}function WebGLProgram(dt,$,lt,ft){const St=dt.getContext(),Tt=lt.defines;let Ct=lt.vertexShader,At=lt.fragmentShader;const Rt=generateShadowMapTypeDefine(lt),kt=generateEnvMapTypeDefine(lt),Nt=generateEnvMapModeDefine(lt),Bt=generateEnvMapBlendingDefine(lt),Ut=generateCubeUVSize(lt),zt=lt.isWebGL2?"":generateExtensions(lt),Zt=generateDefines(Tt),ln=St.createProgram();let cn,hn,pn=lt.glslVersion?"#version "+lt.glslVersion+`
`:"";lt.isRawShaderMaterial?(cn=[Zt].filter(filterEmptyLine).join(`
`),cn.length>0&&(cn+=`
`),hn=[zt,Zt].filter(filterEmptyLine).join(`
`),hn.length>0&&(hn+=`
`)):(cn=[generatePrecision(lt),"#define SHADER_NAME "+lt.shaderName,Zt,lt.instancing?"#define USE_INSTANCING":"",lt.instancingColor?"#define USE_INSTANCING_COLOR":"",lt.supportsVertexTextures?"#define VERTEX_TEXTURES":"",lt.useFog&&lt.fog?"#define USE_FOG":"",lt.useFog&&lt.fogExp2?"#define FOG_EXP2":"",lt.map?"#define USE_MAP":"",lt.envMap?"#define USE_ENVMAP":"",lt.envMap?"#define "+Nt:"",lt.lightMap?"#define USE_LIGHTMAP":"",lt.aoMap?"#define USE_AOMAP":"",lt.emissiveMap?"#define USE_EMISSIVEMAP":"",lt.bumpMap?"#define USE_BUMPMAP":"",lt.normalMap?"#define USE_NORMALMAP":"",lt.normalMap&&lt.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",lt.normalMap&&lt.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",lt.clearcoatMap?"#define USE_CLEARCOATMAP":"",lt.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",lt.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",lt.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",lt.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",lt.displacementMap&&lt.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",lt.specularMap?"#define USE_SPECULARMAP":"",lt.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",lt.specularColorMap?"#define USE_SPECULARCOLORMAP":"",lt.roughnessMap?"#define USE_ROUGHNESSMAP":"",lt.metalnessMap?"#define USE_METALNESSMAP":"",lt.alphaMap?"#define USE_ALPHAMAP":"",lt.transmission?"#define USE_TRANSMISSION":"",lt.transmissionMap?"#define USE_TRANSMISSIONMAP":"",lt.thicknessMap?"#define USE_THICKNESSMAP":"",lt.sheenColorMap?"#define USE_SHEENCOLORMAP":"",lt.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",lt.vertexTangents?"#define USE_TANGENT":"",lt.vertexColors?"#define USE_COLOR":"",lt.vertexAlphas?"#define USE_COLOR_ALPHA":"",lt.vertexUvs?"#define USE_UV":"",lt.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",lt.flatShading?"#define FLAT_SHADED":"",lt.skinning?"#define USE_SKINNING":"",lt.morphTargets?"#define USE_MORPHTARGETS":"",lt.morphNormals&&lt.flatShading===!1?"#define USE_MORPHNORMALS":"",lt.morphColors&&lt.isWebGL2?"#define USE_MORPHCOLORS":"",lt.morphTargetsCount>0&&lt.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",lt.morphTargetsCount>0&&lt.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+lt.morphTextureStride:"",lt.morphTargetsCount>0&&lt.isWebGL2?"#define MORPHTARGETS_COUNT "+lt.morphTargetsCount:"",lt.doubleSided?"#define DOUBLE_SIDED":"",lt.flipSided?"#define FLIP_SIDED":"",lt.shadowMapEnabled?"#define USE_SHADOWMAP":"",lt.shadowMapEnabled?"#define "+Rt:"",lt.sizeAttenuation?"#define USE_SIZEATTENUATION":"",lt.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",lt.logarithmicDepthBuffer&&lt.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),hn=[zt,generatePrecision(lt),"#define SHADER_NAME "+lt.shaderName,Zt,lt.useFog&&lt.fog?"#define USE_FOG":"",lt.useFog&&lt.fogExp2?"#define FOG_EXP2":"",lt.map?"#define USE_MAP":"",lt.matcap?"#define USE_MATCAP":"",lt.envMap?"#define USE_ENVMAP":"",lt.envMap?"#define "+kt:"",lt.envMap?"#define "+Nt:"",lt.envMap?"#define "+Bt:"",Ut?"#define CUBEUV_TEXEL_WIDTH "+Ut.texelWidth:"",Ut?"#define CUBEUV_TEXEL_HEIGHT "+Ut.texelHeight:"",Ut?"#define CUBEUV_MAX_MIP "+Ut.maxMip+".0":"",lt.lightMap?"#define USE_LIGHTMAP":"",lt.aoMap?"#define USE_AOMAP":"",lt.emissiveMap?"#define USE_EMISSIVEMAP":"",lt.bumpMap?"#define USE_BUMPMAP":"",lt.normalMap?"#define USE_NORMALMAP":"",lt.normalMap&&lt.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",lt.normalMap&&lt.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",lt.clearcoat?"#define USE_CLEARCOAT":"",lt.clearcoatMap?"#define USE_CLEARCOATMAP":"",lt.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",lt.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",lt.iridescence?"#define USE_IRIDESCENCE":"",lt.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",lt.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",lt.specularMap?"#define USE_SPECULARMAP":"",lt.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",lt.specularColorMap?"#define USE_SPECULARCOLORMAP":"",lt.roughnessMap?"#define USE_ROUGHNESSMAP":"",lt.metalnessMap?"#define USE_METALNESSMAP":"",lt.alphaMap?"#define USE_ALPHAMAP":"",lt.alphaTest?"#define USE_ALPHATEST":"",lt.sheen?"#define USE_SHEEN":"",lt.sheenColorMap?"#define USE_SHEENCOLORMAP":"",lt.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",lt.transmission?"#define USE_TRANSMISSION":"",lt.transmissionMap?"#define USE_TRANSMISSIONMAP":"",lt.thicknessMap?"#define USE_THICKNESSMAP":"",lt.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",lt.vertexTangents?"#define USE_TANGENT":"",lt.vertexColors||lt.instancingColor?"#define USE_COLOR":"",lt.vertexAlphas?"#define USE_COLOR_ALPHA":"",lt.vertexUvs?"#define USE_UV":"",lt.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",lt.gradientMap?"#define USE_GRADIENTMAP":"",lt.flatShading?"#define FLAT_SHADED":"",lt.doubleSided?"#define DOUBLE_SIDED":"",lt.flipSided?"#define FLIP_SIDED":"",lt.shadowMapEnabled?"#define USE_SHADOWMAP":"",lt.shadowMapEnabled?"#define "+Rt:"",lt.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",lt.useLegacyLights?"#define LEGACY_LIGHTS":"",lt.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",lt.logarithmicDepthBuffer&&lt.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",lt.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",lt.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",lt.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",lt.toneMapping):"",lt.dithering?"#define DITHERING":"",lt.opaque?"#define OPAQUE":"",ShaderChunk.encodings_pars_fragment,getTexelEncodingFunction("linearToOutputTexel",lt.outputEncoding),lt.useDepthPacking?"#define DEPTH_PACKING "+lt.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),Ct=resolveIncludes(Ct),Ct=replaceLightNums(Ct,lt),Ct=replaceClippingPlaneNums(Ct,lt),At=resolveIncludes(At),At=replaceLightNums(At,lt),At=replaceClippingPlaneNums(At,lt),Ct=unrollLoops(Ct),At=unrollLoops(At),lt.isWebGL2&&lt.isRawShaderMaterial!==!0&&(pn=`#version 300 es
`,cn=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+cn,hn=["#define varying in",lt.glslVersion===GLSL3?"":"layout(location = 0) out highp vec4 pc_fragColor;",lt.glslVersion===GLSL3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+hn);const dn=pn+cn+Ct,gn=pn+hn+At,vn=WebGLShader(St,35633,dn),Tn=WebGLShader(St,35632,gn);if(St.attachShader(ln,vn),St.attachShader(ln,Tn),lt.index0AttributeName!==void 0?St.bindAttribLocation(ln,0,lt.index0AttributeName):lt.morphTargets===!0&&St.bindAttribLocation(ln,0,"position"),St.linkProgram(ln),dt.debug.checkShaderErrors){const xn=St.getProgramInfoLog(ln).trim(),Rn=St.getShaderInfoLog(vn).trim(),Pn=St.getShaderInfoLog(Tn).trim();let Nn=!0,Wn=!0;if(St.getProgramParameter(ln,35714)===!1){Nn=!1;const zn=getShaderErrors(St,vn,"vertex"),Yn=getShaderErrors(St,Tn,"fragment");console.error("THREE.WebGLProgram: Shader Error "+St.getError()+" - VALIDATE_STATUS "+St.getProgramParameter(ln,35715)+`

Program Info Log: `+xn+`
`+zn+`
`+Yn)}else xn!==""?console.warn("THREE.WebGLProgram: Program Info Log:",xn):(Rn===""||Pn==="")&&(Wn=!1);Wn&&(this.diagnostics={runnable:Nn,programLog:xn,vertexShader:{log:Rn,prefix:cn},fragmentShader:{log:Pn,prefix:hn}})}St.deleteShader(vn),St.deleteShader(Tn);let Cn;this.getUniforms=function(){return Cn===void 0&&(Cn=new WebGLUniforms(St,ln)),Cn};let $n;return this.getAttributes=function(){return $n===void 0&&($n=fetchAttributeLocations(St,ln)),$n},this.destroy=function(){ft.releaseStatesOfProgram(this),St.deleteProgram(ln),this.program=void 0},this.name=lt.shaderName,this.id=programIdCount++,this.cacheKey=$,this.usedTimes=1,this.program=ln,this.vertexShader=vn,this.fragmentShader=Tn,this}let _id=0;class WebGLShaderCache{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update($){const lt=$.vertexShader,ft=$.fragmentShader,St=this._getShaderStage(lt),Tt=this._getShaderStage(ft),Ct=this._getShaderCacheForMaterial($);return Ct.has(St)===!1&&(Ct.add(St),St.usedTimes++),Ct.has(Tt)===!1&&(Ct.add(Tt),Tt.usedTimes++),this}remove($){const lt=this.materialCache.get($);for(const ft of lt)ft.usedTimes--,ft.usedTimes===0&&this.shaderCache.delete(ft.code);return this.materialCache.delete($),this}getVertexShaderID($){return this._getShaderStage($.vertexShader).id}getFragmentShaderID($){return this._getShaderStage($.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial($){const lt=this.materialCache;let ft=lt.get($);return ft===void 0&&(ft=new Set,lt.set($,ft)),ft}_getShaderStage($){const lt=this.shaderCache;let ft=lt.get($);return ft===void 0&&(ft=new WebGLShaderStage($),lt.set($,ft)),ft}}class WebGLShaderStage{constructor($){this.id=_id++,this.code=$,this.usedTimes=0}}function WebGLPrograms(dt,$,lt,ft,St,Tt,Ct){const At=new Layers$1,Rt=new WebGLShaderCache,kt=[],Nt=St.isWebGL2,Bt=St.logarithmicDepthBuffer,Ut=St.vertexTextures;let zt=St.precision;const Zt={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function ln($n,xn,Rn,Pn,Nn){const Wn=Pn.fog,zn=Nn.geometry,Yn=$n.isMeshStandardMaterial?Pn.environment:null,Qn=($n.isMeshStandardMaterial?lt:$).get($n.envMap||Yn),nr=Qn&&Qn.mapping===CubeUVReflectionMapping?Qn.image.height:null,Ln=Zt[$n.type];$n.precision!==null&&(zt=St.getMaxPrecision($n.precision),zt!==$n.precision&&console.warn("THREE.WebGLProgram.getParameters:",$n.precision,"not supported, using",zt,"instead."));const Un=zn.morphAttributes.position||zn.morphAttributes.normal||zn.morphAttributes.color,Vn=Un!==void 0?Un.length:0;let sr=0;zn.morphAttributes.position!==void 0&&(sr=1),zn.morphAttributes.normal!==void 0&&(sr=2),zn.morphAttributes.color!==void 0&&(sr=3);let In,ir,pr,Jn;if(Ln){const Jr=ShaderLib[Ln];In=Jr.vertexShader,ir=Jr.fragmentShader}else In=$n.vertexShader,ir=$n.fragmentShader,Rt.update($n),pr=Rt.getVertexShaderID($n),Jn=Rt.getFragmentShaderID($n);const Pr=dt.getRenderTarget(),br=$n.alphaTest>0,Gr=$n.clearcoat>0,Kr=$n.iridescence>0;return{isWebGL2:Nt,shaderID:Ln,shaderName:$n.type,vertexShader:In,fragmentShader:ir,defines:$n.defines,customVertexShaderID:pr,customFragmentShaderID:Jn,isRawShaderMaterial:$n.isRawShaderMaterial===!0,glslVersion:$n.glslVersion,precision:zt,instancing:Nn.isInstancedMesh===!0,instancingColor:Nn.isInstancedMesh===!0&&Nn.instanceColor!==null,supportsVertexTextures:Ut,outputEncoding:Pr===null?dt.outputEncoding:Pr.isXRRenderTarget===!0?Pr.texture.encoding:LinearEncoding,map:!!$n.map,matcap:!!$n.matcap,envMap:!!Qn,envMapMode:Qn&&Qn.mapping,envMapCubeUVHeight:nr,lightMap:!!$n.lightMap,aoMap:!!$n.aoMap,emissiveMap:!!$n.emissiveMap,bumpMap:!!$n.bumpMap,normalMap:!!$n.normalMap,objectSpaceNormalMap:$n.normalMapType===ObjectSpaceNormalMap,tangentSpaceNormalMap:$n.normalMapType===TangentSpaceNormalMap,decodeVideoTexture:!!$n.map&&$n.map.isVideoTexture===!0&&$n.map.encoding===sRGBEncoding,clearcoat:Gr,clearcoatMap:Gr&&!!$n.clearcoatMap,clearcoatRoughnessMap:Gr&&!!$n.clearcoatRoughnessMap,clearcoatNormalMap:Gr&&!!$n.clearcoatNormalMap,iridescence:Kr,iridescenceMap:Kr&&!!$n.iridescenceMap,iridescenceThicknessMap:Kr&&!!$n.iridescenceThicknessMap,displacementMap:!!$n.displacementMap,roughnessMap:!!$n.roughnessMap,metalnessMap:!!$n.metalnessMap,specularMap:!!$n.specularMap,specularIntensityMap:!!$n.specularIntensityMap,specularColorMap:!!$n.specularColorMap,opaque:$n.transparent===!1&&$n.blending===NormalBlending,alphaMap:!!$n.alphaMap,alphaTest:br,gradientMap:!!$n.gradientMap,sheen:$n.sheen>0,sheenColorMap:!!$n.sheenColorMap,sheenRoughnessMap:!!$n.sheenRoughnessMap,transmission:$n.transmission>0,transmissionMap:!!$n.transmissionMap,thicknessMap:!!$n.thicknessMap,combine:$n.combine,vertexTangents:!!$n.normalMap&&!!zn.attributes.tangent,vertexColors:$n.vertexColors,vertexAlphas:$n.vertexColors===!0&&!!zn.attributes.color&&zn.attributes.color.itemSize===4,vertexUvs:!!$n.map||!!$n.bumpMap||!!$n.normalMap||!!$n.specularMap||!!$n.alphaMap||!!$n.emissiveMap||!!$n.roughnessMap||!!$n.metalnessMap||!!$n.clearcoatMap||!!$n.clearcoatRoughnessMap||!!$n.clearcoatNormalMap||!!$n.iridescenceMap||!!$n.iridescenceThicknessMap||!!$n.displacementMap||!!$n.transmissionMap||!!$n.thicknessMap||!!$n.specularIntensityMap||!!$n.specularColorMap||!!$n.sheenColorMap||!!$n.sheenRoughnessMap,uvsVertexOnly:!($n.map||$n.bumpMap||$n.normalMap||$n.specularMap||$n.alphaMap||$n.emissiveMap||$n.roughnessMap||$n.metalnessMap||$n.clearcoatNormalMap||$n.iridescenceMap||$n.iridescenceThicknessMap||$n.transmission>0||$n.transmissionMap||$n.thicknessMap||$n.specularIntensityMap||$n.specularColorMap||$n.sheen>0||$n.sheenColorMap||$n.sheenRoughnessMap)&&!!$n.displacementMap,fog:!!Wn,useFog:$n.fog===!0,fogExp2:Wn&&Wn.isFogExp2,flatShading:!!$n.flatShading,sizeAttenuation:$n.sizeAttenuation,logarithmicDepthBuffer:Bt,skinning:Nn.isSkinnedMesh===!0,morphTargets:zn.morphAttributes.position!==void 0,morphNormals:zn.morphAttributes.normal!==void 0,morphColors:zn.morphAttributes.color!==void 0,morphTargetsCount:Vn,morphTextureStride:sr,numDirLights:xn.directional.length,numPointLights:xn.point.length,numSpotLights:xn.spot.length,numSpotLightMaps:xn.spotLightMap.length,numRectAreaLights:xn.rectArea.length,numHemiLights:xn.hemi.length,numDirLightShadows:xn.directionalShadowMap.length,numPointLightShadows:xn.pointShadowMap.length,numSpotLightShadows:xn.spotShadowMap.length,numSpotLightShadowsWithMaps:xn.numSpotLightShadowsWithMaps,numClippingPlanes:Ct.numPlanes,numClipIntersection:Ct.numIntersection,dithering:$n.dithering,shadowMapEnabled:dt.shadowMap.enabled&&Rn.length>0,shadowMapType:dt.shadowMap.type,toneMapping:$n.toneMapped?dt.toneMapping:NoToneMapping,useLegacyLights:dt.useLegacyLights,premultipliedAlpha:$n.premultipliedAlpha,doubleSided:$n.side===DoubleSide,flipSided:$n.side===BackSide,useDepthPacking:!!$n.depthPacking,depthPacking:$n.depthPacking||0,index0AttributeName:$n.index0AttributeName,extensionDerivatives:$n.extensions&&$n.extensions.derivatives,extensionFragDepth:$n.extensions&&$n.extensions.fragDepth,extensionDrawBuffers:$n.extensions&&$n.extensions.drawBuffers,extensionShaderTextureLOD:$n.extensions&&$n.extensions.shaderTextureLOD,rendererExtensionFragDepth:Nt||ft.has("EXT_frag_depth"),rendererExtensionDrawBuffers:Nt||ft.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:Nt||ft.has("EXT_shader_texture_lod"),customProgramCacheKey:$n.customProgramCacheKey()}}function cn($n){const xn=[];if($n.shaderID?xn.push($n.shaderID):(xn.push($n.customVertexShaderID),xn.push($n.customFragmentShaderID)),$n.defines!==void 0)for(const Rn in $n.defines)xn.push(Rn),xn.push($n.defines[Rn]);return $n.isRawShaderMaterial===!1&&(hn(xn,$n),pn(xn,$n),xn.push(dt.outputEncoding)),xn.push($n.customProgramCacheKey),xn.join()}function hn($n,xn){$n.push(xn.precision),$n.push(xn.outputEncoding),$n.push(xn.envMapMode),$n.push(xn.envMapCubeUVHeight),$n.push(xn.combine),$n.push(xn.vertexUvs),$n.push(xn.fogExp2),$n.push(xn.sizeAttenuation),$n.push(xn.morphTargetsCount),$n.push(xn.morphAttributeCount),$n.push(xn.numDirLights),$n.push(xn.numPointLights),$n.push(xn.numSpotLights),$n.push(xn.numSpotLightMaps),$n.push(xn.numHemiLights),$n.push(xn.numRectAreaLights),$n.push(xn.numDirLightShadows),$n.push(xn.numPointLightShadows),$n.push(xn.numSpotLightShadows),$n.push(xn.numSpotLightShadowsWithMaps),$n.push(xn.shadowMapType),$n.push(xn.toneMapping),$n.push(xn.numClippingPlanes),$n.push(xn.numClipIntersection),$n.push(xn.depthPacking)}function pn($n,xn){At.disableAll(),xn.isWebGL2&&At.enable(0),xn.supportsVertexTextures&&At.enable(1),xn.instancing&&At.enable(2),xn.instancingColor&&At.enable(3),xn.map&&At.enable(4),xn.matcap&&At.enable(5),xn.envMap&&At.enable(6),xn.lightMap&&At.enable(7),xn.aoMap&&At.enable(8),xn.emissiveMap&&At.enable(9),xn.bumpMap&&At.enable(10),xn.normalMap&&At.enable(11),xn.objectSpaceNormalMap&&At.enable(12),xn.tangentSpaceNormalMap&&At.enable(13),xn.clearcoat&&At.enable(14),xn.clearcoatMap&&At.enable(15),xn.clearcoatRoughnessMap&&At.enable(16),xn.clearcoatNormalMap&&At.enable(17),xn.iridescence&&At.enable(18),xn.iridescenceMap&&At.enable(19),xn.iridescenceThicknessMap&&At.enable(20),xn.displacementMap&&At.enable(21),xn.specularMap&&At.enable(22),xn.roughnessMap&&At.enable(23),xn.metalnessMap&&At.enable(24),xn.gradientMap&&At.enable(25),xn.alphaMap&&At.enable(26),xn.alphaTest&&At.enable(27),xn.vertexColors&&At.enable(28),xn.vertexAlphas&&At.enable(29),xn.vertexUvs&&At.enable(30),xn.vertexTangents&&At.enable(31),xn.uvsVertexOnly&&At.enable(32),$n.push(At.mask),At.disableAll(),xn.fog&&At.enable(0),xn.useFog&&At.enable(1),xn.flatShading&&At.enable(2),xn.logarithmicDepthBuffer&&At.enable(3),xn.skinning&&At.enable(4),xn.morphTargets&&At.enable(5),xn.morphNormals&&At.enable(6),xn.morphColors&&At.enable(7),xn.premultipliedAlpha&&At.enable(8),xn.shadowMapEnabled&&At.enable(9),xn.useLegacyLights&&At.enable(10),xn.doubleSided&&At.enable(11),xn.flipSided&&At.enable(12),xn.useDepthPacking&&At.enable(13),xn.dithering&&At.enable(14),xn.specularIntensityMap&&At.enable(15),xn.specularColorMap&&At.enable(16),xn.transmission&&At.enable(17),xn.transmissionMap&&At.enable(18),xn.thicknessMap&&At.enable(19),xn.sheen&&At.enable(20),xn.sheenColorMap&&At.enable(21),xn.sheenRoughnessMap&&At.enable(22),xn.decodeVideoTexture&&At.enable(23),xn.opaque&&At.enable(24),$n.push(At.mask)}function dn($n){const xn=Zt[$n.type];let Rn;if(xn){const Pn=ShaderLib[xn];Rn=UniformsUtils.clone(Pn.uniforms)}else Rn=$n.uniforms;return Rn}function gn($n,xn){let Rn;for(let Pn=0,Nn=kt.length;Pn<Nn;Pn++){const Wn=kt[Pn];if(Wn.cacheKey===xn){Rn=Wn,++Rn.usedTimes;break}}return Rn===void 0&&(Rn=new WebGLProgram(dt,xn,$n,Tt),kt.push(Rn)),Rn}function vn($n){if(--$n.usedTimes===0){const xn=kt.indexOf($n);kt[xn]=kt[kt.length-1],kt.pop(),$n.destroy()}}function Tn($n){Rt.remove($n)}function Cn(){Rt.dispose()}return{getParameters:ln,getProgramCacheKey:cn,getUniforms:dn,acquireProgram:gn,releaseProgram:vn,releaseShaderCache:Tn,programs:kt,dispose:Cn}}function WebGLProperties(){let dt=new WeakMap;function $(Tt){let Ct=dt.get(Tt);return Ct===void 0&&(Ct={},dt.set(Tt,Ct)),Ct}function lt(Tt){dt.delete(Tt)}function ft(Tt,Ct,At){dt.get(Tt)[Ct]=At}function St(){dt=new WeakMap}return{get:$,remove:lt,update:ft,dispose:St}}function painterSortStable(dt,$){return dt.groupOrder!==$.groupOrder?dt.groupOrder-$.groupOrder:dt.renderOrder!==$.renderOrder?dt.renderOrder-$.renderOrder:dt.material.id!==$.material.id?dt.material.id-$.material.id:dt.z!==$.z?dt.z-$.z:dt.id-$.id}function reversePainterSortStable(dt,$){return dt.groupOrder!==$.groupOrder?dt.groupOrder-$.groupOrder:dt.renderOrder!==$.renderOrder?dt.renderOrder-$.renderOrder:dt.z!==$.z?$.z-dt.z:dt.id-$.id}function WebGLRenderList(){const dt=[];let $=0;const lt=[],ft=[],St=[];function Tt(){$=0,lt.length=0,ft.length=0,St.length=0}function Ct(Bt,Ut,zt,Zt,ln,cn){let hn=dt[$];return hn===void 0?(hn={id:Bt.id,object:Bt,geometry:Ut,material:zt,groupOrder:Zt,renderOrder:Bt.renderOrder,z:ln,group:cn},dt[$]=hn):(hn.id=Bt.id,hn.object=Bt,hn.geometry=Ut,hn.material=zt,hn.groupOrder=Zt,hn.renderOrder=Bt.renderOrder,hn.z=ln,hn.group=cn),$++,hn}function At(Bt,Ut,zt,Zt,ln,cn){const hn=Ct(Bt,Ut,zt,Zt,ln,cn);zt.transmission>0?ft.push(hn):zt.transparent===!0?St.push(hn):lt.push(hn)}function Rt(Bt,Ut,zt,Zt,ln,cn){const hn=Ct(Bt,Ut,zt,Zt,ln,cn);zt.transmission>0?ft.unshift(hn):zt.transparent===!0?St.unshift(hn):lt.unshift(hn)}function kt(Bt,Ut){lt.length>1&&lt.sort(Bt||painterSortStable),ft.length>1&&ft.sort(Ut||reversePainterSortStable),St.length>1&&St.sort(Ut||reversePainterSortStable)}function Nt(){for(let Bt=$,Ut=dt.length;Bt<Ut;Bt++){const zt=dt[Bt];if(zt.id===null)break;zt.id=null,zt.object=null,zt.geometry=null,zt.material=null,zt.group=null}}return{opaque:lt,transmissive:ft,transparent:St,init:Tt,push:At,unshift:Rt,finish:Nt,sort:kt}}function WebGLRenderLists(){let dt=new WeakMap;function $(ft,St){const Tt=dt.get(ft);let Ct;return Tt===void 0?(Ct=new WebGLRenderList,dt.set(ft,[Ct])):St>=Tt.length?(Ct=new WebGLRenderList,Tt.push(Ct)):Ct=Tt[St],Ct}function lt(){dt=new WeakMap}return{get:$,dispose:lt}}function UniformsCache(){const dt={};return{get:function($){if(dt[$.id]!==void 0)return dt[$.id];let lt;switch($.type){case"DirectionalLight":lt={direction:new Vector3,color:new Color};break;case"SpotLight":lt={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":lt={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":lt={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":lt={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return dt[$.id]=lt,lt}}}function ShadowUniformsCache(){const dt={};return{get:function($){if(dt[$.id]!==void 0)return dt[$.id];let lt;switch($.type){case"DirectionalLight":lt={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":lt={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":lt={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return dt[$.id]=lt,lt}}}let nextVersion=0;function shadowCastingAndTexturingLightsFirst(dt,$){return($.castShadow?2:0)-(dt.castShadow?2:0)+($.map?1:0)-(dt.map?1:0)}function WebGLLights(dt,$){const lt=new UniformsCache,ft=ShadowUniformsCache(),St={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let Nt=0;Nt<9;Nt++)St.probe.push(new Vector3);const Tt=new Vector3,Ct=new Matrix4,At=new Matrix4;function Rt(Nt,Bt){let Ut=0,zt=0,Zt=0;for(let Pn=0;Pn<9;Pn++)St.probe[Pn].set(0,0,0);let ln=0,cn=0,hn=0,pn=0,dn=0,gn=0,vn=0,Tn=0,Cn=0,$n=0;Nt.sort(shadowCastingAndTexturingLightsFirst);const xn=Bt===!0?Math.PI:1;for(let Pn=0,Nn=Nt.length;Pn<Nn;Pn++){const Wn=Nt[Pn],zn=Wn.color,Yn=Wn.intensity,Qn=Wn.distance,nr=Wn.shadow&&Wn.shadow.map?Wn.shadow.map.texture:null;if(Wn.isAmbientLight)Ut+=zn.r*Yn*xn,zt+=zn.g*Yn*xn,Zt+=zn.b*Yn*xn;else if(Wn.isLightProbe)for(let Ln=0;Ln<9;Ln++)St.probe[Ln].addScaledVector(Wn.sh.coefficients[Ln],Yn);else if(Wn.isDirectionalLight){const Ln=lt.get(Wn);if(Ln.color.copy(Wn.color).multiplyScalar(Wn.intensity*xn),Wn.castShadow){const Un=Wn.shadow,Vn=ft.get(Wn);Vn.shadowBias=Un.bias,Vn.shadowNormalBias=Un.normalBias,Vn.shadowRadius=Un.radius,Vn.shadowMapSize=Un.mapSize,St.directionalShadow[ln]=Vn,St.directionalShadowMap[ln]=nr,St.directionalShadowMatrix[ln]=Wn.shadow.matrix,gn++}St.directional[ln]=Ln,ln++}else if(Wn.isSpotLight){const Ln=lt.get(Wn);Ln.position.setFromMatrixPosition(Wn.matrixWorld),Ln.color.copy(zn).multiplyScalar(Yn*xn),Ln.distance=Qn,Ln.coneCos=Math.cos(Wn.angle),Ln.penumbraCos=Math.cos(Wn.angle*(1-Wn.penumbra)),Ln.decay=Wn.decay,St.spot[hn]=Ln;const Un=Wn.shadow;if(Wn.map&&(St.spotLightMap[Cn]=Wn.map,Cn++,Un.updateMatrices(Wn),Wn.castShadow&&$n++),St.spotLightMatrix[hn]=Un.matrix,Wn.castShadow){const Vn=ft.get(Wn);Vn.shadowBias=Un.bias,Vn.shadowNormalBias=Un.normalBias,Vn.shadowRadius=Un.radius,Vn.shadowMapSize=Un.mapSize,St.spotShadow[hn]=Vn,St.spotShadowMap[hn]=nr,Tn++}hn++}else if(Wn.isRectAreaLight){const Ln=lt.get(Wn);Ln.color.copy(zn).multiplyScalar(Yn),Ln.halfWidth.set(Wn.width*.5,0,0),Ln.halfHeight.set(0,Wn.height*.5,0),St.rectArea[pn]=Ln,pn++}else if(Wn.isPointLight){const Ln=lt.get(Wn);if(Ln.color.copy(Wn.color).multiplyScalar(Wn.intensity*xn),Ln.distance=Wn.distance,Ln.decay=Wn.decay,Wn.castShadow){const Un=Wn.shadow,Vn=ft.get(Wn);Vn.shadowBias=Un.bias,Vn.shadowNormalBias=Un.normalBias,Vn.shadowRadius=Un.radius,Vn.shadowMapSize=Un.mapSize,Vn.shadowCameraNear=Un.camera.near,Vn.shadowCameraFar=Un.camera.far,St.pointShadow[cn]=Vn,St.pointShadowMap[cn]=nr,St.pointShadowMatrix[cn]=Wn.shadow.matrix,vn++}St.point[cn]=Ln,cn++}else if(Wn.isHemisphereLight){const Ln=lt.get(Wn);Ln.skyColor.copy(Wn.color).multiplyScalar(Yn*xn),Ln.groundColor.copy(Wn.groundColor).multiplyScalar(Yn*xn),St.hemi[dn]=Ln,dn++}}pn>0&&($.isWebGL2||dt.has("OES_texture_float_linear")===!0?(St.rectAreaLTC1=UniformsLib.LTC_FLOAT_1,St.rectAreaLTC2=UniformsLib.LTC_FLOAT_2):dt.has("OES_texture_half_float_linear")===!0?(St.rectAreaLTC1=UniformsLib.LTC_HALF_1,St.rectAreaLTC2=UniformsLib.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),St.ambient[0]=Ut,St.ambient[1]=zt,St.ambient[2]=Zt;const Rn=St.hash;(Rn.directionalLength!==ln||Rn.pointLength!==cn||Rn.spotLength!==hn||Rn.rectAreaLength!==pn||Rn.hemiLength!==dn||Rn.numDirectionalShadows!==gn||Rn.numPointShadows!==vn||Rn.numSpotShadows!==Tn||Rn.numSpotMaps!==Cn)&&(St.directional.length=ln,St.spot.length=hn,St.rectArea.length=pn,St.point.length=cn,St.hemi.length=dn,St.directionalShadow.length=gn,St.directionalShadowMap.length=gn,St.pointShadow.length=vn,St.pointShadowMap.length=vn,St.spotShadow.length=Tn,St.spotShadowMap.length=Tn,St.directionalShadowMatrix.length=gn,St.pointShadowMatrix.length=vn,St.spotLightMatrix.length=Tn+Cn-$n,St.spotLightMap.length=Cn,St.numSpotLightShadowsWithMaps=$n,Rn.directionalLength=ln,Rn.pointLength=cn,Rn.spotLength=hn,Rn.rectAreaLength=pn,Rn.hemiLength=dn,Rn.numDirectionalShadows=gn,Rn.numPointShadows=vn,Rn.numSpotShadows=Tn,Rn.numSpotMaps=Cn,St.version=nextVersion++)}function kt(Nt,Bt){let Ut=0,zt=0,Zt=0,ln=0,cn=0;const hn=Bt.matrixWorldInverse;for(let pn=0,dn=Nt.length;pn<dn;pn++){const gn=Nt[pn];if(gn.isDirectionalLight){const vn=St.directional[Ut];vn.direction.setFromMatrixPosition(gn.matrixWorld),Tt.setFromMatrixPosition(gn.target.matrixWorld),vn.direction.sub(Tt),vn.direction.transformDirection(hn),Ut++}else if(gn.isSpotLight){const vn=St.spot[Zt];vn.position.setFromMatrixPosition(gn.matrixWorld),vn.position.applyMatrix4(hn),vn.direction.setFromMatrixPosition(gn.matrixWorld),Tt.setFromMatrixPosition(gn.target.matrixWorld),vn.direction.sub(Tt),vn.direction.transformDirection(hn),Zt++}else if(gn.isRectAreaLight){const vn=St.rectArea[ln];vn.position.setFromMatrixPosition(gn.matrixWorld),vn.position.applyMatrix4(hn),At.identity(),Ct.copy(gn.matrixWorld),Ct.premultiply(hn),At.extractRotation(Ct),vn.halfWidth.set(gn.width*.5,0,0),vn.halfHeight.set(0,gn.height*.5,0),vn.halfWidth.applyMatrix4(At),vn.halfHeight.applyMatrix4(At),ln++}else if(gn.isPointLight){const vn=St.point[zt];vn.position.setFromMatrixPosition(gn.matrixWorld),vn.position.applyMatrix4(hn),zt++}else if(gn.isHemisphereLight){const vn=St.hemi[cn];vn.direction.setFromMatrixPosition(gn.matrixWorld),vn.direction.transformDirection(hn),cn++}}}return{setup:Rt,setupView:kt,state:St}}function WebGLRenderState(dt,$){const lt=new WebGLLights(dt,$),ft=[],St=[];function Tt(){ft.length=0,St.length=0}function Ct(Bt){ft.push(Bt)}function At(Bt){St.push(Bt)}function Rt(Bt){lt.setup(ft,Bt)}function kt(Bt){lt.setupView(ft,Bt)}return{init:Tt,state:{lightsArray:ft,shadowsArray:St,lights:lt},setupLights:Rt,setupLightsView:kt,pushLight:Ct,pushShadow:At}}function WebGLRenderStates(dt,$){let lt=new WeakMap;function ft(Tt,Ct=0){const At=lt.get(Tt);let Rt;return At===void 0?(Rt=new WebGLRenderState(dt,$),lt.set(Tt,[Rt])):Ct>=At.length?(Rt=new WebGLRenderState(dt,$),At.push(Rt)):Rt=At[Ct],Rt}function St(){lt=new WeakMap}return{get:ft,dispose:St}}class MeshDepthMaterial extends Material{constructor($){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues($)}copy($){return super.copy($),this.depthPacking=$.depthPacking,this.map=$.map,this.alphaMap=$.alphaMap,this.displacementMap=$.displacementMap,this.displacementScale=$.displacementScale,this.displacementBias=$.displacementBias,this.wireframe=$.wireframe,this.wireframeLinewidth=$.wireframeLinewidth,this}}class MeshDistanceMaterial extends Material{constructor($){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Vector3,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues($)}copy($){return super.copy($),this.referencePosition.copy($.referencePosition),this.nearDistance=$.nearDistance,this.farDistance=$.farDistance,this.map=$.map,this.alphaMap=$.alphaMap,this.displacementMap=$.displacementMap,this.displacementScale=$.displacementScale,this.displacementBias=$.displacementBias,this}}const vertex=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fragment=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function WebGLShadowMap(dt,$,lt){let ft=new Frustum;const St=new Vector2,Tt=new Vector2,Ct=new Vector4,At=new MeshDepthMaterial({depthPacking:RGBADepthPacking}),Rt=new MeshDistanceMaterial,kt={},Nt=lt.maxTextureSize,Bt={[FrontSide]:BackSide,[BackSide]:FrontSide,[DoubleSide]:DoubleSide},Ut=new ShaderMaterial({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vertex,fragmentShader:fragment}),zt=Ut.clone();zt.defines.HORIZONTAL_PASS=1;const Zt=new BufferGeometry;Zt.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const ln=new Mesh(Zt,Ut),cn=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap,this.render=function(gn,vn,Tn){if(cn.enabled===!1||cn.autoUpdate===!1&&cn.needsUpdate===!1||gn.length===0)return;const Cn=dt.getRenderTarget(),$n=dt.getActiveCubeFace(),xn=dt.getActiveMipmapLevel(),Rn=dt.state;Rn.setBlending(NoBlending),Rn.buffers.color.setClear(1,1,1,1),Rn.buffers.depth.setTest(!0),Rn.setScissorTest(!1);for(let Pn=0,Nn=gn.length;Pn<Nn;Pn++){const Wn=gn[Pn],zn=Wn.shadow;if(zn===void 0){console.warn("THREE.WebGLShadowMap:",Wn,"has no shadow.");continue}if(zn.autoUpdate===!1&&zn.needsUpdate===!1)continue;St.copy(zn.mapSize);const Yn=zn.getFrameExtents();if(St.multiply(Yn),Tt.copy(zn.mapSize),(St.x>Nt||St.y>Nt)&&(St.x>Nt&&(Tt.x=Math.floor(Nt/Yn.x),St.x=Tt.x*Yn.x,zn.mapSize.x=Tt.x),St.y>Nt&&(Tt.y=Math.floor(Nt/Yn.y),St.y=Tt.y*Yn.y,zn.mapSize.y=Tt.y)),zn.map===null){const nr=this.type!==VSMShadowMap?{minFilter:NearestFilter,magFilter:NearestFilter}:{};zn.map=new WebGLRenderTarget(St.x,St.y,nr),zn.map.texture.name=Wn.name+".shadowMap",zn.camera.updateProjectionMatrix()}dt.setRenderTarget(zn.map),dt.clear();const Qn=zn.getViewportCount();for(let nr=0;nr<Qn;nr++){const Ln=zn.getViewport(nr);Ct.set(Tt.x*Ln.x,Tt.y*Ln.y,Tt.x*Ln.z,Tt.y*Ln.w),Rn.viewport(Ct),zn.updateMatrices(Wn,nr),ft=zn.getFrustum(),dn(vn,Tn,zn.camera,Wn,this.type)}zn.isPointLightShadow!==!0&&this.type===VSMShadowMap&&hn(zn,Tn),zn.needsUpdate=!1}cn.needsUpdate=!1,dt.setRenderTarget(Cn,$n,xn)};function hn(gn,vn){const Tn=$.update(ln);Ut.defines.VSM_SAMPLES!==gn.blurSamples&&(Ut.defines.VSM_SAMPLES=gn.blurSamples,zt.defines.VSM_SAMPLES=gn.blurSamples,Ut.needsUpdate=!0,zt.needsUpdate=!0),gn.mapPass===null&&(gn.mapPass=new WebGLRenderTarget(St.x,St.y)),Ut.uniforms.shadow_pass.value=gn.map.texture,Ut.uniforms.resolution.value=gn.mapSize,Ut.uniforms.radius.value=gn.radius,dt.setRenderTarget(gn.mapPass),dt.clear(),dt.renderBufferDirect(vn,null,Tn,Ut,ln,null),zt.uniforms.shadow_pass.value=gn.mapPass.texture,zt.uniforms.resolution.value=gn.mapSize,zt.uniforms.radius.value=gn.radius,dt.setRenderTarget(gn.map),dt.clear(),dt.renderBufferDirect(vn,null,Tn,zt,ln,null)}function pn(gn,vn,Tn,Cn,$n,xn){let Rn=null;const Pn=Tn.isPointLight===!0?gn.customDistanceMaterial:gn.customDepthMaterial;if(Pn!==void 0)Rn=Pn;else if(Rn=Tn.isPointLight===!0?Rt:At,dt.localClippingEnabled&&vn.clipShadows===!0&&Array.isArray(vn.clippingPlanes)&&vn.clippingPlanes.length!==0||vn.displacementMap&&vn.displacementScale!==0||vn.alphaMap&&vn.alphaTest>0||vn.map&&vn.alphaTest>0){const Nn=Rn.uuid,Wn=vn.uuid;let zn=kt[Nn];zn===void 0&&(zn={},kt[Nn]=zn);let Yn=zn[Wn];Yn===void 0&&(Yn=Rn.clone(),zn[Wn]=Yn),Rn=Yn}return Rn.visible=vn.visible,Rn.wireframe=vn.wireframe,xn===VSMShadowMap?Rn.side=vn.shadowSide!==null?vn.shadowSide:vn.side:Rn.side=vn.shadowSide!==null?vn.shadowSide:Bt[vn.side],Rn.alphaMap=vn.alphaMap,Rn.alphaTest=vn.alphaTest,Rn.map=vn.map,Rn.clipShadows=vn.clipShadows,Rn.clippingPlanes=vn.clippingPlanes,Rn.clipIntersection=vn.clipIntersection,Rn.displacementMap=vn.displacementMap,Rn.displacementScale=vn.displacementScale,Rn.displacementBias=vn.displacementBias,Rn.wireframeLinewidth=vn.wireframeLinewidth,Rn.linewidth=vn.linewidth,Tn.isPointLight===!0&&Rn.isMeshDistanceMaterial===!0&&(Rn.referencePosition.setFromMatrixPosition(Tn.matrixWorld),Rn.nearDistance=Cn,Rn.farDistance=$n),Rn}function dn(gn,vn,Tn,Cn,$n){if(gn.visible===!1)return;if(gn.layers.test(vn.layers)&&(gn.isMesh||gn.isLine||gn.isPoints)&&(gn.castShadow||gn.receiveShadow&&$n===VSMShadowMap)&&(!gn.frustumCulled||ft.intersectsObject(gn))){gn.modelViewMatrix.multiplyMatrices(Tn.matrixWorldInverse,gn.matrixWorld);const Pn=$.update(gn),Nn=gn.material;if(Array.isArray(Nn)){const Wn=Pn.groups;for(let zn=0,Yn=Wn.length;zn<Yn;zn++){const Qn=Wn[zn],nr=Nn[Qn.materialIndex];if(nr&&nr.visible){const Ln=pn(gn,nr,Cn,Tn.near,Tn.far,$n);dt.renderBufferDirect(Tn,null,Pn,Ln,gn,Qn)}}}else if(Nn.visible){const Wn=pn(gn,Nn,Cn,Tn.near,Tn.far,$n);dt.renderBufferDirect(Tn,null,Pn,Wn,gn,null)}}const Rn=gn.children;for(let Pn=0,Nn=Rn.length;Pn<Nn;Pn++)dn(Rn[Pn],vn,Tn,Cn,$n)}}function WebGLState(dt,$,lt){const ft=lt.isWebGL2;function St(){let Bn=!1;const hr=new Vector4;let Nr=null;const ro=new Vector4(0,0,0,0);return{setMask:function(ho){Nr!==ho&&!Bn&&(dt.colorMask(ho,ho,ho,ho),Nr=ho)},setLocked:function(ho){Bn=ho},setClear:function(ho,ns,ls,Ds,Gs){Gs===!0&&(ho*=Ds,ns*=Ds,ls*=Ds),hr.set(ho,ns,ls,Ds),ro.equals(hr)===!1&&(dt.clearColor(ho,ns,ls,Ds),ro.copy(hr))},reset:function(){Bn=!1,Nr=null,ro.set(-1,0,0,0)}}}function Tt(){let Bn=!1,hr=null,Nr=null,ro=null;return{setTest:function(ho){ho?br(2929):Gr(2929)},setMask:function(ho){hr!==ho&&!Bn&&(dt.depthMask(ho),hr=ho)},setFunc:function(ho){if(Nr!==ho){switch(ho){case NeverDepth:dt.depthFunc(512);break;case AlwaysDepth:dt.depthFunc(519);break;case LessDepth:dt.depthFunc(513);break;case LessEqualDepth:dt.depthFunc(515);break;case EqualDepth:dt.depthFunc(514);break;case GreaterEqualDepth:dt.depthFunc(518);break;case GreaterDepth:dt.depthFunc(516);break;case NotEqualDepth:dt.depthFunc(517);break;default:dt.depthFunc(515)}Nr=ho}},setLocked:function(ho){Bn=ho},setClear:function(ho){ro!==ho&&(dt.clearDepth(ho),ro=ho)},reset:function(){Bn=!1,hr=null,Nr=null,ro=null}}}function Ct(){let Bn=!1,hr=null,Nr=null,ro=null,ho=null,ns=null,ls=null,Ds=null,Gs=null;return{setTest:function(ss){Bn||(ss?br(2960):Gr(2960))},setMask:function(ss){hr!==ss&&!Bn&&(dt.stencilMask(ss),hr=ss)},setFunc:function(ss,cs,Il){(Nr!==ss||ro!==cs||ho!==Il)&&(dt.stencilFunc(ss,cs,Il),Nr=ss,ro=cs,ho=Il)},setOp:function(ss,cs,Il){(ns!==ss||ls!==cs||Ds!==Il)&&(dt.stencilOp(ss,cs,Il),ns=ss,ls=cs,Ds=Il)},setLocked:function(ss){Bn=ss},setClear:function(ss){Gs!==ss&&(dt.clearStencil(ss),Gs=ss)},reset:function(){Bn=!1,hr=null,Nr=null,ro=null,ho=null,ns=null,ls=null,Ds=null,Gs=null}}}const At=new St,Rt=new Tt,kt=new Ct,Nt=new WeakMap,Bt=new WeakMap;let Ut={},zt={},Zt=new WeakMap,ln=[],cn=null,hn=!1,pn=null,dn=null,gn=null,vn=null,Tn=null,Cn=null,$n=null,xn=!1,Rn=null,Pn=null,Nn=null,Wn=null,zn=null;const Yn=dt.getParameter(35661);let Qn=!1,nr=0;const Ln=dt.getParameter(7938);Ln.indexOf("WebGL")!==-1?(nr=parseFloat(/^WebGL (\d)/.exec(Ln)[1]),Qn=nr>=1):Ln.indexOf("OpenGL ES")!==-1&&(nr=parseFloat(/^OpenGL ES (\d)/.exec(Ln)[1]),Qn=nr>=2);let Un=null,Vn={};const sr=dt.getParameter(3088),In=dt.getParameter(2978),ir=new Vector4().fromArray(sr),pr=new Vector4().fromArray(In);function Jn(Bn,hr,Nr){const ro=new Uint8Array(4),ho=dt.createTexture();dt.bindTexture(Bn,ho),dt.texParameteri(Bn,10241,9728),dt.texParameteri(Bn,10240,9728);for(let ns=0;ns<Nr;ns++)dt.texImage2D(hr+ns,0,6408,1,1,0,6408,5121,ro);return ho}const Pr={};Pr[3553]=Jn(3553,3553,1),Pr[34067]=Jn(34067,34069,6),At.setClear(0,0,0,1),Rt.setClear(1),kt.setClear(0),br(2929),Rt.setFunc(LessEqualDepth),zr(!1),to(CullFaceBack),br(2884),Qr(NoBlending);function br(Bn){Ut[Bn]!==!0&&(dt.enable(Bn),Ut[Bn]=!0)}function Gr(Bn){Ut[Bn]!==!1&&(dt.disable(Bn),Ut[Bn]=!1)}function Kr(Bn,hr){return zt[Bn]!==hr?(dt.bindFramebuffer(Bn,hr),zt[Bn]=hr,ft&&(Bn===36009&&(zt[36160]=hr),Bn===36160&&(zt[36009]=hr)),!0):!1}function Xr(Bn,hr){let Nr=ln,ro=!1;if(Bn)if(Nr=Zt.get(hr),Nr===void 0&&(Nr=[],Zt.set(hr,Nr)),Bn.isWebGLMultipleRenderTargets){const ho=Bn.texture;if(Nr.length!==ho.length||Nr[0]!==36064){for(let ns=0,ls=ho.length;ns<ls;ns++)Nr[ns]=36064+ns;Nr.length=ho.length,ro=!0}}else Nr[0]!==36064&&(Nr[0]=36064,ro=!0);else Nr[0]!==1029&&(Nr[0]=1029,ro=!0);ro&&(lt.isWebGL2?dt.drawBuffers(Nr):$.get("WEBGL_draw_buffers").drawBuffersWEBGL(Nr))}function Jr(Bn){return cn!==Bn?(dt.useProgram(Bn),cn=Bn,!0):!1}const Tr={[AddEquation]:32774,[SubtractEquation]:32778,[ReverseSubtractEquation]:32779};if(ft)Tr[MinEquation]=32775,Tr[MaxEquation]=32776;else{const Bn=$.get("EXT_blend_minmax");Bn!==null&&(Tr[MinEquation]=Bn.MIN_EXT,Tr[MaxEquation]=Bn.MAX_EXT)}const Ir={[ZeroFactor]:0,[OneFactor]:1,[SrcColorFactor]:768,[SrcAlphaFactor]:770,[SrcAlphaSaturateFactor]:776,[DstColorFactor]:774,[DstAlphaFactor]:772,[OneMinusSrcColorFactor]:769,[OneMinusSrcAlphaFactor]:771,[OneMinusDstColorFactor]:775,[OneMinusDstAlphaFactor]:773};function Qr(Bn,hr,Nr,ro,ho,ns,ls,Ds){if(Bn===NoBlending){hn===!0&&(Gr(3042),hn=!1);return}if(hn===!1&&(br(3042),hn=!0),Bn!==CustomBlending){if(Bn!==pn||Ds!==xn){if((dn!==AddEquation||Tn!==AddEquation)&&(dt.blendEquation(32774),dn=AddEquation,Tn=AddEquation),Ds)switch(Bn){case NormalBlending:dt.blendFuncSeparate(1,771,1,771);break;case AdditiveBlending:dt.blendFunc(1,1);break;case SubtractiveBlending:dt.blendFuncSeparate(0,769,0,1);break;case MultiplyBlending:dt.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Bn);break}else switch(Bn){case NormalBlending:dt.blendFuncSeparate(770,771,1,771);break;case AdditiveBlending:dt.blendFunc(770,1);break;case SubtractiveBlending:dt.blendFuncSeparate(0,769,0,1);break;case MultiplyBlending:dt.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Bn);break}gn=null,vn=null,Cn=null,$n=null,pn=Bn,xn=Ds}return}ho=ho||hr,ns=ns||Nr,ls=ls||ro,(hr!==dn||ho!==Tn)&&(dt.blendEquationSeparate(Tr[hr],Tr[ho]),dn=hr,Tn=ho),(Nr!==gn||ro!==vn||ns!==Cn||ls!==$n)&&(dt.blendFuncSeparate(Ir[Nr],Ir[ro],Ir[ns],Ir[ls]),gn=Nr,vn=ro,Cn=ns,$n=ls),pn=Bn,xn=!1}function oo(Bn,hr){Bn.side===DoubleSide?Gr(2884):br(2884);let Nr=Bn.side===BackSide;hr&&(Nr=!Nr),zr(Nr),Bn.blending===NormalBlending&&Bn.transparent===!1?Qr(NoBlending):Qr(Bn.blending,Bn.blendEquation,Bn.blendSrc,Bn.blendDst,Bn.blendEquationAlpha,Bn.blendSrcAlpha,Bn.blendDstAlpha,Bn.premultipliedAlpha),Rt.setFunc(Bn.depthFunc),Rt.setTest(Bn.depthTest),Rt.setMask(Bn.depthWrite),At.setMask(Bn.colorWrite);const ro=Bn.stencilWrite;kt.setTest(ro),ro&&(kt.setMask(Bn.stencilWriteMask),kt.setFunc(Bn.stencilFunc,Bn.stencilRef,Bn.stencilFuncMask),kt.setOp(Bn.stencilFail,Bn.stencilZFail,Bn.stencilZPass)),uo(Bn.polygonOffset,Bn.polygonOffsetFactor,Bn.polygonOffsetUnits),Bn.alphaToCoverage===!0?br(32926):Gr(32926)}function zr(Bn){Rn!==Bn&&(Bn?dt.frontFace(2304):dt.frontFace(2305),Rn=Bn)}function to(Bn){Bn!==CullFaceNone?(br(2884),Bn!==Pn&&(Bn===CullFaceBack?dt.cullFace(1029):Bn===CullFaceFront?dt.cullFace(1028):dt.cullFace(1032))):Gr(2884),Pn=Bn}function co(Bn){Bn!==Nn&&(Qn&&dt.lineWidth(Bn),Nn=Bn)}function uo(Bn,hr,Nr){Bn?(br(32823),(Wn!==hr||zn!==Nr)&&(dt.polygonOffset(hr,Nr),Wn=hr,zn=Nr)):Gr(32823)}function Mo(Bn){Bn?br(3089):Gr(3089)}function Vo(Bn){Bn===void 0&&(Bn=33984+Yn-1),Un!==Bn&&(dt.activeTexture(Bn),Un=Bn)}function jn(Bn,hr,Nr){Nr===void 0&&(Un===null?Nr=33984+Yn-1:Nr=Un);let ro=Vn[Nr];ro===void 0&&(ro={type:void 0,texture:void 0},Vn[Nr]=ro),(ro.type!==Bn||ro.texture!==hr)&&(Un!==Nr&&(dt.activeTexture(Nr),Un=Nr),dt.bindTexture(Bn,hr||Pr[Bn]),ro.type=Bn,ro.texture=hr)}function Gn(){const Bn=Vn[Un];Bn!==void 0&&Bn.type!==void 0&&(dt.bindTexture(Bn.type,null),Bn.type=void 0,Bn.texture=void 0)}function rr(){try{dt.compressedTexImage2D.apply(dt,arguments)}catch(Bn){console.error("THREE.WebGLState:",Bn)}}function Or(){try{dt.compressedTexImage3D.apply(dt,arguments)}catch(Bn){console.error("THREE.WebGLState:",Bn)}}function Ar(){try{dt.texSubImage2D.apply(dt,arguments)}catch(Bn){console.error("THREE.WebGLState:",Bn)}}function Br(){try{dt.texSubImage3D.apply(dt,arguments)}catch(Bn){console.error("THREE.WebGLState:",Bn)}}function fr(){try{dt.compressedTexSubImage2D.apply(dt,arguments)}catch(Bn){console.error("THREE.WebGLState:",Bn)}}function Yr(){try{dt.compressedTexSubImage3D.apply(dt,arguments)}catch(Bn){console.error("THREE.WebGLState:",Bn)}}function wr(){try{dt.texStorage2D.apply(dt,arguments)}catch(Bn){console.error("THREE.WebGLState:",Bn)}}function ao(){try{dt.texStorage3D.apply(dt,arguments)}catch(Bn){console.error("THREE.WebGLState:",Bn)}}function Kn(){try{dt.texImage2D.apply(dt,arguments)}catch(Bn){console.error("THREE.WebGLState:",Bn)}}function Sr(){try{dt.texImage3D.apply(dt,arguments)}catch(Bn){console.error("THREE.WebGLState:",Bn)}}function Dr(Bn){ir.equals(Bn)===!1&&(dt.scissor(Bn.x,Bn.y,Bn.z,Bn.w),ir.copy(Bn))}function En(Bn){pr.equals(Bn)===!1&&(dt.viewport(Bn.x,Bn.y,Bn.z,Bn.w),pr.copy(Bn))}function Dn(Bn,hr){let Nr=Bt.get(hr);Nr===void 0&&(Nr=new WeakMap,Bt.set(hr,Nr));let ro=Nr.get(Bn);ro===void 0&&(ro=dt.getUniformBlockIndex(hr,Bn.name),Nr.set(Bn,ro))}function Zn(Bn,hr){const ro=Bt.get(hr).get(Bn);Nt.get(hr)!==ro&&(dt.uniformBlockBinding(hr,ro,Bn.__bindingPointIndex),Nt.set(hr,ro))}function ur(){dt.disable(3042),dt.disable(2884),dt.disable(2929),dt.disable(32823),dt.disable(3089),dt.disable(2960),dt.disable(32926),dt.blendEquation(32774),dt.blendFunc(1,0),dt.blendFuncSeparate(1,0,1,0),dt.colorMask(!0,!0,!0,!0),dt.clearColor(0,0,0,0),dt.depthMask(!0),dt.depthFunc(513),dt.clearDepth(1),dt.stencilMask(4294967295),dt.stencilFunc(519,0,4294967295),dt.stencilOp(7680,7680,7680),dt.clearStencil(0),dt.cullFace(1029),dt.frontFace(2305),dt.polygonOffset(0,0),dt.activeTexture(33984),dt.bindFramebuffer(36160,null),ft===!0&&(dt.bindFramebuffer(36009,null),dt.bindFramebuffer(36008,null)),dt.useProgram(null),dt.lineWidth(1),dt.scissor(0,0,dt.canvas.width,dt.canvas.height),dt.viewport(0,0,dt.canvas.width,dt.canvas.height),Ut={},Un=null,Vn={},zt={},Zt=new WeakMap,ln=[],cn=null,hn=!1,pn=null,dn=null,gn=null,vn=null,Tn=null,Cn=null,$n=null,xn=!1,Rn=null,Pn=null,Nn=null,Wn=null,zn=null,ir.set(0,0,dt.canvas.width,dt.canvas.height),pr.set(0,0,dt.canvas.width,dt.canvas.height),At.reset(),Rt.reset(),kt.reset()}return{buffers:{color:At,depth:Rt,stencil:kt},enable:br,disable:Gr,bindFramebuffer:Kr,drawBuffers:Xr,useProgram:Jr,setBlending:Qr,setMaterial:oo,setFlipSided:zr,setCullFace:to,setLineWidth:co,setPolygonOffset:uo,setScissorTest:Mo,activeTexture:Vo,bindTexture:jn,unbindTexture:Gn,compressedTexImage2D:rr,compressedTexImage3D:Or,texImage2D:Kn,texImage3D:Sr,updateUBOMapping:Dn,uniformBlockBinding:Zn,texStorage2D:wr,texStorage3D:ao,texSubImage2D:Ar,texSubImage3D:Br,compressedTexSubImage2D:fr,compressedTexSubImage3D:Yr,scissor:Dr,viewport:En,reset:ur}}function WebGLTextures(dt,$,lt,ft,St,Tt,Ct){const At=St.isWebGL2,Rt=St.maxTextures,kt=St.maxCubemapSize,Nt=St.maxTextureSize,Bt=St.maxSamples,Ut=$.has("WEBGL_multisampled_render_to_texture")?$.get("WEBGL_multisampled_render_to_texture"):null,zt=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),Zt=new WeakMap;let ln;const cn=new WeakMap;let hn=!1;try{hn=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function pn(jn,Gn){return hn?new OffscreenCanvas(jn,Gn):createElementNS$1("canvas")}function dn(jn,Gn,rr,Or){let Ar=1;if((jn.width>Or||jn.height>Or)&&(Ar=Or/Math.max(jn.width,jn.height)),Ar<1||Gn===!0)if(typeof HTMLImageElement<"u"&&jn instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&jn instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&jn instanceof ImageBitmap){const Br=Gn?floorPowerOfTwo:Math.floor,fr=Br(Ar*jn.width),Yr=Br(Ar*jn.height);ln===void 0&&(ln=pn(fr,Yr));const wr=rr?pn(fr,Yr):ln;return wr.width=fr,wr.height=Yr,wr.getContext("2d").drawImage(jn,0,0,fr,Yr),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+jn.width+"x"+jn.height+") to ("+fr+"x"+Yr+")."),wr}else return"data"in jn&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+jn.width+"x"+jn.height+")."),jn;return jn}function gn(jn){return isPowerOfTwo(jn.width)&&isPowerOfTwo(jn.height)}function vn(jn){return At?!1:jn.wrapS!==ClampToEdgeWrapping||jn.wrapT!==ClampToEdgeWrapping||jn.minFilter!==NearestFilter&&jn.minFilter!==LinearFilter}function Tn(jn,Gn){return jn.generateMipmaps&&Gn&&jn.minFilter!==NearestFilter&&jn.minFilter!==LinearFilter}function Cn(jn){dt.generateMipmap(jn)}function $n(jn,Gn,rr,Or,Ar=!1){if(At===!1)return Gn;if(jn!==null){if(dt[jn]!==void 0)return dt[jn];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+jn+"'")}let Br=Gn;return Gn===6403&&(rr===5126&&(Br=33326),rr===5131&&(Br=33325),rr===5121&&(Br=33321)),Gn===33319&&(rr===5126&&(Br=33328),rr===5131&&(Br=33327),rr===5121&&(Br=33323)),Gn===6408&&(rr===5126&&(Br=34836),rr===5131&&(Br=34842),rr===5121&&(Br=Or===sRGBEncoding&&Ar===!1?35907:32856),rr===32819&&(Br=32854),rr===32820&&(Br=32855)),(Br===33325||Br===33326||Br===33327||Br===33328||Br===34842||Br===34836)&&$.get("EXT_color_buffer_float"),Br}function xn(jn,Gn,rr){return Tn(jn,rr)===!0||jn.isFramebufferTexture&&jn.minFilter!==NearestFilter&&jn.minFilter!==LinearFilter?Math.log2(Math.max(Gn.width,Gn.height))+1:jn.mipmaps!==void 0&&jn.mipmaps.length>0?jn.mipmaps.length:jn.isCompressedTexture&&Array.isArray(jn.image)?Gn.mipmaps.length:1}function Rn(jn){return jn===NearestFilter||jn===NearestMipmapNearestFilter||jn===NearestMipmapLinearFilter?9728:9729}function Pn(jn){const Gn=jn.target;Gn.removeEventListener("dispose",Pn),Wn(Gn),Gn.isVideoTexture&&Zt.delete(Gn)}function Nn(jn){const Gn=jn.target;Gn.removeEventListener("dispose",Nn),Yn(Gn)}function Wn(jn){const Gn=ft.get(jn);if(Gn.__webglInit===void 0)return;const rr=jn.source,Or=cn.get(rr);if(Or){const Ar=Or[Gn.__cacheKey];Ar.usedTimes--,Ar.usedTimes===0&&zn(jn),Object.keys(Or).length===0&&cn.delete(rr)}ft.remove(jn)}function zn(jn){const Gn=ft.get(jn);dt.deleteTexture(Gn.__webglTexture);const rr=jn.source,Or=cn.get(rr);delete Or[Gn.__cacheKey],Ct.memory.textures--}function Yn(jn){const Gn=jn.texture,rr=ft.get(jn),Or=ft.get(Gn);if(Or.__webglTexture!==void 0&&(dt.deleteTexture(Or.__webglTexture),Ct.memory.textures--),jn.depthTexture&&jn.depthTexture.dispose(),jn.isWebGLCubeRenderTarget)for(let Ar=0;Ar<6;Ar++)dt.deleteFramebuffer(rr.__webglFramebuffer[Ar]),rr.__webglDepthbuffer&&dt.deleteRenderbuffer(rr.__webglDepthbuffer[Ar]);else{if(dt.deleteFramebuffer(rr.__webglFramebuffer),rr.__webglDepthbuffer&&dt.deleteRenderbuffer(rr.__webglDepthbuffer),rr.__webglMultisampledFramebuffer&&dt.deleteFramebuffer(rr.__webglMultisampledFramebuffer),rr.__webglColorRenderbuffer)for(let Ar=0;Ar<rr.__webglColorRenderbuffer.length;Ar++)rr.__webglColorRenderbuffer[Ar]&&dt.deleteRenderbuffer(rr.__webglColorRenderbuffer[Ar]);rr.__webglDepthRenderbuffer&&dt.deleteRenderbuffer(rr.__webglDepthRenderbuffer)}if(jn.isWebGLMultipleRenderTargets)for(let Ar=0,Br=Gn.length;Ar<Br;Ar++){const fr=ft.get(Gn[Ar]);fr.__webglTexture&&(dt.deleteTexture(fr.__webglTexture),Ct.memory.textures--),ft.remove(Gn[Ar])}ft.remove(Gn),ft.remove(jn)}let Qn=0;function nr(){Qn=0}function Ln(){const jn=Qn;return jn>=Rt&&console.warn("THREE.WebGLTextures: Trying to use "+jn+" texture units while this GPU supports only "+Rt),Qn+=1,jn}function Un(jn){const Gn=[];return Gn.push(jn.wrapS),Gn.push(jn.wrapT),Gn.push(jn.wrapR||0),Gn.push(jn.magFilter),Gn.push(jn.minFilter),Gn.push(jn.anisotropy),Gn.push(jn.internalFormat),Gn.push(jn.format),Gn.push(jn.type),Gn.push(jn.generateMipmaps),Gn.push(jn.premultiplyAlpha),Gn.push(jn.flipY),Gn.push(jn.unpackAlignment),Gn.push(jn.encoding),Gn.join()}function Vn(jn,Gn){const rr=ft.get(jn);if(jn.isVideoTexture&&Mo(jn),jn.isRenderTargetTexture===!1&&jn.version>0&&rr.__version!==jn.version){const Or=jn.image;if(Or===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Or.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Gr(rr,jn,Gn);return}}lt.bindTexture(3553,rr.__webglTexture,33984+Gn)}function sr(jn,Gn){const rr=ft.get(jn);if(jn.version>0&&rr.__version!==jn.version){Gr(rr,jn,Gn);return}lt.bindTexture(35866,rr.__webglTexture,33984+Gn)}function In(jn,Gn){const rr=ft.get(jn);if(jn.version>0&&rr.__version!==jn.version){Gr(rr,jn,Gn);return}lt.bindTexture(32879,rr.__webglTexture,33984+Gn)}function ir(jn,Gn){const rr=ft.get(jn);if(jn.version>0&&rr.__version!==jn.version){Kr(rr,jn,Gn);return}lt.bindTexture(34067,rr.__webglTexture,33984+Gn)}const pr={[RepeatWrapping]:10497,[ClampToEdgeWrapping]:33071,[MirroredRepeatWrapping]:33648},Jn={[NearestFilter]:9728,[NearestMipmapNearestFilter]:9984,[NearestMipmapLinearFilter]:9986,[LinearFilter]:9729,[LinearMipmapNearestFilter]:9985,[LinearMipmapLinearFilter]:9987};function Pr(jn,Gn,rr){if(rr?(dt.texParameteri(jn,10242,pr[Gn.wrapS]),dt.texParameteri(jn,10243,pr[Gn.wrapT]),(jn===32879||jn===35866)&&dt.texParameteri(jn,32882,pr[Gn.wrapR]),dt.texParameteri(jn,10240,Jn[Gn.magFilter]),dt.texParameteri(jn,10241,Jn[Gn.minFilter])):(dt.texParameteri(jn,10242,33071),dt.texParameteri(jn,10243,33071),(jn===32879||jn===35866)&&dt.texParameteri(jn,32882,33071),(Gn.wrapS!==ClampToEdgeWrapping||Gn.wrapT!==ClampToEdgeWrapping)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),dt.texParameteri(jn,10240,Rn(Gn.magFilter)),dt.texParameteri(jn,10241,Rn(Gn.minFilter)),Gn.minFilter!==NearestFilter&&Gn.minFilter!==LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),$.has("EXT_texture_filter_anisotropic")===!0){const Or=$.get("EXT_texture_filter_anisotropic");if(Gn.magFilter===NearestFilter||Gn.minFilter!==NearestMipmapLinearFilter&&Gn.minFilter!==LinearMipmapLinearFilter||Gn.type===FloatType&&$.has("OES_texture_float_linear")===!1||At===!1&&Gn.type===HalfFloatType&&$.has("OES_texture_half_float_linear")===!1)return;(Gn.anisotropy>1||ft.get(Gn).__currentAnisotropy)&&(dt.texParameterf(jn,Or.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Gn.anisotropy,St.getMaxAnisotropy())),ft.get(Gn).__currentAnisotropy=Gn.anisotropy)}}function br(jn,Gn){let rr=!1;jn.__webglInit===void 0&&(jn.__webglInit=!0,Gn.addEventListener("dispose",Pn));const Or=Gn.source;let Ar=cn.get(Or);Ar===void 0&&(Ar={},cn.set(Or,Ar));const Br=Un(Gn);if(Br!==jn.__cacheKey){Ar[Br]===void 0&&(Ar[Br]={texture:dt.createTexture(),usedTimes:0},Ct.memory.textures++,rr=!0),Ar[Br].usedTimes++;const fr=Ar[jn.__cacheKey];fr!==void 0&&(Ar[jn.__cacheKey].usedTimes--,fr.usedTimes===0&&zn(Gn)),jn.__cacheKey=Br,jn.__webglTexture=Ar[Br].texture}return rr}function Gr(jn,Gn,rr){let Or=3553;(Gn.isDataArrayTexture||Gn.isCompressedArrayTexture)&&(Or=35866),Gn.isData3DTexture&&(Or=32879);const Ar=br(jn,Gn),Br=Gn.source;lt.bindTexture(Or,jn.__webglTexture,33984+rr);const fr=ft.get(Br);if(Br.version!==fr.__version||Ar===!0){lt.activeTexture(33984+rr),dt.pixelStorei(37440,Gn.flipY),dt.pixelStorei(37441,Gn.premultiplyAlpha),dt.pixelStorei(3317,Gn.unpackAlignment),dt.pixelStorei(37443,0);const Yr=vn(Gn)&&gn(Gn.image)===!1;let wr=dn(Gn.image,Yr,!1,Nt);wr=Vo(Gn,wr);const ao=gn(wr)||At,Kn=Tt.convert(Gn.format,Gn.encoding);let Sr=Tt.convert(Gn.type),Dr=$n(Gn.internalFormat,Kn,Sr,Gn.encoding,Gn.isVideoTexture);Pr(Or,Gn,ao);let En;const Dn=Gn.mipmaps,Zn=At&&Gn.isVideoTexture!==!0,ur=fr.__version===void 0||Ar===!0,Bn=xn(Gn,wr,ao);if(Gn.isDepthTexture)Dr=6402,At?Gn.type===FloatType?Dr=36012:Gn.type===UnsignedIntType?Dr=33190:Gn.type===UnsignedInt248Type?Dr=35056:Dr=33189:Gn.type===FloatType&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Gn.format===DepthFormat&&Dr===6402&&Gn.type!==UnsignedShortType&&Gn.type!==UnsignedIntType&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Gn.type=UnsignedIntType,Sr=Tt.convert(Gn.type)),Gn.format===DepthStencilFormat&&Dr===6402&&(Dr=34041,Gn.type!==UnsignedInt248Type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Gn.type=UnsignedInt248Type,Sr=Tt.convert(Gn.type))),ur&&(Zn?lt.texStorage2D(3553,1,Dr,wr.width,wr.height):lt.texImage2D(3553,0,Dr,wr.width,wr.height,0,Kn,Sr,null));else if(Gn.isDataTexture)if(Dn.length>0&&ao){Zn&&ur&&lt.texStorage2D(3553,Bn,Dr,Dn[0].width,Dn[0].height);for(let hr=0,Nr=Dn.length;hr<Nr;hr++)En=Dn[hr],Zn?lt.texSubImage2D(3553,hr,0,0,En.width,En.height,Kn,Sr,En.data):lt.texImage2D(3553,hr,Dr,En.width,En.height,0,Kn,Sr,En.data);Gn.generateMipmaps=!1}else Zn?(ur&&lt.texStorage2D(3553,Bn,Dr,wr.width,wr.height),lt.texSubImage2D(3553,0,0,0,wr.width,wr.height,Kn,Sr,wr.data)):lt.texImage2D(3553,0,Dr,wr.width,wr.height,0,Kn,Sr,wr.data);else if(Gn.isCompressedTexture)if(Gn.isCompressedArrayTexture){Zn&&ur&&lt.texStorage3D(35866,Bn,Dr,Dn[0].width,Dn[0].height,wr.depth);for(let hr=0,Nr=Dn.length;hr<Nr;hr++)En=Dn[hr],Gn.format!==RGBAFormat?Kn!==null?Zn?lt.compressedTexSubImage3D(35866,hr,0,0,0,En.width,En.height,wr.depth,Kn,En.data,0,0):lt.compressedTexImage3D(35866,hr,Dr,En.width,En.height,wr.depth,0,En.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Zn?lt.texSubImage3D(35866,hr,0,0,0,En.width,En.height,wr.depth,Kn,Sr,En.data):lt.texImage3D(35866,hr,Dr,En.width,En.height,wr.depth,0,Kn,Sr,En.data)}else{Zn&&ur&&lt.texStorage2D(3553,Bn,Dr,Dn[0].width,Dn[0].height);for(let hr=0,Nr=Dn.length;hr<Nr;hr++)En=Dn[hr],Gn.format!==RGBAFormat?Kn!==null?Zn?lt.compressedTexSubImage2D(3553,hr,0,0,En.width,En.height,Kn,En.data):lt.compressedTexImage2D(3553,hr,Dr,En.width,En.height,0,En.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Zn?lt.texSubImage2D(3553,hr,0,0,En.width,En.height,Kn,Sr,En.data):lt.texImage2D(3553,hr,Dr,En.width,En.height,0,Kn,Sr,En.data)}else if(Gn.isDataArrayTexture)Zn?(ur&&lt.texStorage3D(35866,Bn,Dr,wr.width,wr.height,wr.depth),lt.texSubImage3D(35866,0,0,0,0,wr.width,wr.height,wr.depth,Kn,Sr,wr.data)):lt.texImage3D(35866,0,Dr,wr.width,wr.height,wr.depth,0,Kn,Sr,wr.data);else if(Gn.isData3DTexture)Zn?(ur&&lt.texStorage3D(32879,Bn,Dr,wr.width,wr.height,wr.depth),lt.texSubImage3D(32879,0,0,0,0,wr.width,wr.height,wr.depth,Kn,Sr,wr.data)):lt.texImage3D(32879,0,Dr,wr.width,wr.height,wr.depth,0,Kn,Sr,wr.data);else if(Gn.isFramebufferTexture){if(ur)if(Zn)lt.texStorage2D(3553,Bn,Dr,wr.width,wr.height);else{let hr=wr.width,Nr=wr.height;for(let ro=0;ro<Bn;ro++)lt.texImage2D(3553,ro,Dr,hr,Nr,0,Kn,Sr,null),hr>>=1,Nr>>=1}}else if(Dn.length>0&&ao){Zn&&ur&&lt.texStorage2D(3553,Bn,Dr,Dn[0].width,Dn[0].height);for(let hr=0,Nr=Dn.length;hr<Nr;hr++)En=Dn[hr],Zn?lt.texSubImage2D(3553,hr,0,0,Kn,Sr,En):lt.texImage2D(3553,hr,Dr,Kn,Sr,En);Gn.generateMipmaps=!1}else Zn?(ur&&lt.texStorage2D(3553,Bn,Dr,wr.width,wr.height),lt.texSubImage2D(3553,0,0,0,Kn,Sr,wr)):lt.texImage2D(3553,0,Dr,Kn,Sr,wr);Tn(Gn,ao)&&Cn(Or),fr.__version=Br.version,Gn.onUpdate&&Gn.onUpdate(Gn)}jn.__version=Gn.version}function Kr(jn,Gn,rr){if(Gn.image.length!==6)return;const Or=br(jn,Gn),Ar=Gn.source;lt.bindTexture(34067,jn.__webglTexture,33984+rr);const Br=ft.get(Ar);if(Ar.version!==Br.__version||Or===!0){lt.activeTexture(33984+rr),dt.pixelStorei(37440,Gn.flipY),dt.pixelStorei(37441,Gn.premultiplyAlpha),dt.pixelStorei(3317,Gn.unpackAlignment),dt.pixelStorei(37443,0);const fr=Gn.isCompressedTexture||Gn.image[0].isCompressedTexture,Yr=Gn.image[0]&&Gn.image[0].isDataTexture,wr=[];for(let hr=0;hr<6;hr++)!fr&&!Yr?wr[hr]=dn(Gn.image[hr],!1,!0,kt):wr[hr]=Yr?Gn.image[hr].image:Gn.image[hr],wr[hr]=Vo(Gn,wr[hr]);const ao=wr[0],Kn=gn(ao)||At,Sr=Tt.convert(Gn.format,Gn.encoding),Dr=Tt.convert(Gn.type),En=$n(Gn.internalFormat,Sr,Dr,Gn.encoding),Dn=At&&Gn.isVideoTexture!==!0,Zn=Br.__version===void 0||Or===!0;let ur=xn(Gn,ao,Kn);Pr(34067,Gn,Kn);let Bn;if(fr){Dn&&Zn&&lt.texStorage2D(34067,ur,En,ao.width,ao.height);for(let hr=0;hr<6;hr++){Bn=wr[hr].mipmaps;for(let Nr=0;Nr<Bn.length;Nr++){const ro=Bn[Nr];Gn.format!==RGBAFormat?Sr!==null?Dn?lt.compressedTexSubImage2D(34069+hr,Nr,0,0,ro.width,ro.height,Sr,ro.data):lt.compressedTexImage2D(34069+hr,Nr,En,ro.width,ro.height,0,ro.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Dn?lt.texSubImage2D(34069+hr,Nr,0,0,ro.width,ro.height,Sr,Dr,ro.data):lt.texImage2D(34069+hr,Nr,En,ro.width,ro.height,0,Sr,Dr,ro.data)}}}else{Bn=Gn.mipmaps,Dn&&Zn&&(Bn.length>0&&ur++,lt.texStorage2D(34067,ur,En,wr[0].width,wr[0].height));for(let hr=0;hr<6;hr++)if(Yr){Dn?lt.texSubImage2D(34069+hr,0,0,0,wr[hr].width,wr[hr].height,Sr,Dr,wr[hr].data):lt.texImage2D(34069+hr,0,En,wr[hr].width,wr[hr].height,0,Sr,Dr,wr[hr].data);for(let Nr=0;Nr<Bn.length;Nr++){const ho=Bn[Nr].image[hr].image;Dn?lt.texSubImage2D(34069+hr,Nr+1,0,0,ho.width,ho.height,Sr,Dr,ho.data):lt.texImage2D(34069+hr,Nr+1,En,ho.width,ho.height,0,Sr,Dr,ho.data)}}else{Dn?lt.texSubImage2D(34069+hr,0,0,0,Sr,Dr,wr[hr]):lt.texImage2D(34069+hr,0,En,Sr,Dr,wr[hr]);for(let Nr=0;Nr<Bn.length;Nr++){const ro=Bn[Nr];Dn?lt.texSubImage2D(34069+hr,Nr+1,0,0,Sr,Dr,ro.image[hr]):lt.texImage2D(34069+hr,Nr+1,En,Sr,Dr,ro.image[hr])}}}Tn(Gn,Kn)&&Cn(34067),Br.__version=Ar.version,Gn.onUpdate&&Gn.onUpdate(Gn)}jn.__version=Gn.version}function Xr(jn,Gn,rr,Or,Ar){const Br=Tt.convert(rr.format,rr.encoding),fr=Tt.convert(rr.type),Yr=$n(rr.internalFormat,Br,fr,rr.encoding);ft.get(Gn).__hasExternalTextures||(Ar===32879||Ar===35866?lt.texImage3D(Ar,0,Yr,Gn.width,Gn.height,Gn.depth,0,Br,fr,null):lt.texImage2D(Ar,0,Yr,Gn.width,Gn.height,0,Br,fr,null)),lt.bindFramebuffer(36160,jn),uo(Gn)?Ut.framebufferTexture2DMultisampleEXT(36160,Or,Ar,ft.get(rr).__webglTexture,0,co(Gn)):(Ar===3553||Ar>=34069&&Ar<=34074)&&dt.framebufferTexture2D(36160,Or,Ar,ft.get(rr).__webglTexture,0),lt.bindFramebuffer(36160,null)}function Jr(jn,Gn,rr){if(dt.bindRenderbuffer(36161,jn),Gn.depthBuffer&&!Gn.stencilBuffer){let Or=33189;if(rr||uo(Gn)){const Ar=Gn.depthTexture;Ar&&Ar.isDepthTexture&&(Ar.type===FloatType?Or=36012:Ar.type===UnsignedIntType&&(Or=33190));const Br=co(Gn);uo(Gn)?Ut.renderbufferStorageMultisampleEXT(36161,Br,Or,Gn.width,Gn.height):dt.renderbufferStorageMultisample(36161,Br,Or,Gn.width,Gn.height)}else dt.renderbufferStorage(36161,Or,Gn.width,Gn.height);dt.framebufferRenderbuffer(36160,36096,36161,jn)}else if(Gn.depthBuffer&&Gn.stencilBuffer){const Or=co(Gn);rr&&uo(Gn)===!1?dt.renderbufferStorageMultisample(36161,Or,35056,Gn.width,Gn.height):uo(Gn)?Ut.renderbufferStorageMultisampleEXT(36161,Or,35056,Gn.width,Gn.height):dt.renderbufferStorage(36161,34041,Gn.width,Gn.height),dt.framebufferRenderbuffer(36160,33306,36161,jn)}else{const Or=Gn.isWebGLMultipleRenderTargets===!0?Gn.texture:[Gn.texture];for(let Ar=0;Ar<Or.length;Ar++){const Br=Or[Ar],fr=Tt.convert(Br.format,Br.encoding),Yr=Tt.convert(Br.type),wr=$n(Br.internalFormat,fr,Yr,Br.encoding),ao=co(Gn);rr&&uo(Gn)===!1?dt.renderbufferStorageMultisample(36161,ao,wr,Gn.width,Gn.height):uo(Gn)?Ut.renderbufferStorageMultisampleEXT(36161,ao,wr,Gn.width,Gn.height):dt.renderbufferStorage(36161,wr,Gn.width,Gn.height)}}dt.bindRenderbuffer(36161,null)}function Tr(jn,Gn){if(Gn&&Gn.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(lt.bindFramebuffer(36160,jn),!(Gn.depthTexture&&Gn.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!ft.get(Gn.depthTexture).__webglTexture||Gn.depthTexture.image.width!==Gn.width||Gn.depthTexture.image.height!==Gn.height)&&(Gn.depthTexture.image.width=Gn.width,Gn.depthTexture.image.height=Gn.height,Gn.depthTexture.needsUpdate=!0),Vn(Gn.depthTexture,0);const Or=ft.get(Gn.depthTexture).__webglTexture,Ar=co(Gn);if(Gn.depthTexture.format===DepthFormat)uo(Gn)?Ut.framebufferTexture2DMultisampleEXT(36160,36096,3553,Or,0,Ar):dt.framebufferTexture2D(36160,36096,3553,Or,0);else if(Gn.depthTexture.format===DepthStencilFormat)uo(Gn)?Ut.framebufferTexture2DMultisampleEXT(36160,33306,3553,Or,0,Ar):dt.framebufferTexture2D(36160,33306,3553,Or,0);else throw new Error("Unknown depthTexture format")}function Ir(jn){const Gn=ft.get(jn),rr=jn.isWebGLCubeRenderTarget===!0;if(jn.depthTexture&&!Gn.__autoAllocateDepthBuffer){if(rr)throw new Error("target.depthTexture not supported in Cube render targets");Tr(Gn.__webglFramebuffer,jn)}else if(rr){Gn.__webglDepthbuffer=[];for(let Or=0;Or<6;Or++)lt.bindFramebuffer(36160,Gn.__webglFramebuffer[Or]),Gn.__webglDepthbuffer[Or]=dt.createRenderbuffer(),Jr(Gn.__webglDepthbuffer[Or],jn,!1)}else lt.bindFramebuffer(36160,Gn.__webglFramebuffer),Gn.__webglDepthbuffer=dt.createRenderbuffer(),Jr(Gn.__webglDepthbuffer,jn,!1);lt.bindFramebuffer(36160,null)}function Qr(jn,Gn,rr){const Or=ft.get(jn);Gn!==void 0&&Xr(Or.__webglFramebuffer,jn,jn.texture,36064,3553),rr!==void 0&&Ir(jn)}function oo(jn){const Gn=jn.texture,rr=ft.get(jn),Or=ft.get(Gn);jn.addEventListener("dispose",Nn),jn.isWebGLMultipleRenderTargets!==!0&&(Or.__webglTexture===void 0&&(Or.__webglTexture=dt.createTexture()),Or.__version=Gn.version,Ct.memory.textures++);const Ar=jn.isWebGLCubeRenderTarget===!0,Br=jn.isWebGLMultipleRenderTargets===!0,fr=gn(jn)||At;if(Ar){rr.__webglFramebuffer=[];for(let Yr=0;Yr<6;Yr++)rr.__webglFramebuffer[Yr]=dt.createFramebuffer()}else{if(rr.__webglFramebuffer=dt.createFramebuffer(),Br)if(St.drawBuffers){const Yr=jn.texture;for(let wr=0,ao=Yr.length;wr<ao;wr++){const Kn=ft.get(Yr[wr]);Kn.__webglTexture===void 0&&(Kn.__webglTexture=dt.createTexture(),Ct.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(At&&jn.samples>0&&uo(jn)===!1){const Yr=Br?Gn:[Gn];rr.__webglMultisampledFramebuffer=dt.createFramebuffer(),rr.__webglColorRenderbuffer=[],lt.bindFramebuffer(36160,rr.__webglMultisampledFramebuffer);for(let wr=0;wr<Yr.length;wr++){const ao=Yr[wr];rr.__webglColorRenderbuffer[wr]=dt.createRenderbuffer(),dt.bindRenderbuffer(36161,rr.__webglColorRenderbuffer[wr]);const Kn=Tt.convert(ao.format,ao.encoding),Sr=Tt.convert(ao.type),Dr=$n(ao.internalFormat,Kn,Sr,ao.encoding,jn.isXRRenderTarget===!0),En=co(jn);dt.renderbufferStorageMultisample(36161,En,Dr,jn.width,jn.height),dt.framebufferRenderbuffer(36160,36064+wr,36161,rr.__webglColorRenderbuffer[wr])}dt.bindRenderbuffer(36161,null),jn.depthBuffer&&(rr.__webglDepthRenderbuffer=dt.createRenderbuffer(),Jr(rr.__webglDepthRenderbuffer,jn,!0)),lt.bindFramebuffer(36160,null)}}if(Ar){lt.bindTexture(34067,Or.__webglTexture),Pr(34067,Gn,fr);for(let Yr=0;Yr<6;Yr++)Xr(rr.__webglFramebuffer[Yr],jn,Gn,36064,34069+Yr);Tn(Gn,fr)&&Cn(34067),lt.unbindTexture()}else if(Br){const Yr=jn.texture;for(let wr=0,ao=Yr.length;wr<ao;wr++){const Kn=Yr[wr],Sr=ft.get(Kn);lt.bindTexture(3553,Sr.__webglTexture),Pr(3553,Kn,fr),Xr(rr.__webglFramebuffer,jn,Kn,36064+wr,3553),Tn(Kn,fr)&&Cn(3553)}lt.unbindTexture()}else{let Yr=3553;(jn.isWebGL3DRenderTarget||jn.isWebGLArrayRenderTarget)&&(At?Yr=jn.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),lt.bindTexture(Yr,Or.__webglTexture),Pr(Yr,Gn,fr),Xr(rr.__webglFramebuffer,jn,Gn,36064,Yr),Tn(Gn,fr)&&Cn(Yr),lt.unbindTexture()}jn.depthBuffer&&Ir(jn)}function zr(jn){const Gn=gn(jn)||At,rr=jn.isWebGLMultipleRenderTargets===!0?jn.texture:[jn.texture];for(let Or=0,Ar=rr.length;Or<Ar;Or++){const Br=rr[Or];if(Tn(Br,Gn)){const fr=jn.isWebGLCubeRenderTarget?34067:3553,Yr=ft.get(Br).__webglTexture;lt.bindTexture(fr,Yr),Cn(fr),lt.unbindTexture()}}}function to(jn){if(At&&jn.samples>0&&uo(jn)===!1){const Gn=jn.isWebGLMultipleRenderTargets?jn.texture:[jn.texture],rr=jn.width,Or=jn.height;let Ar=16384;const Br=[],fr=jn.stencilBuffer?33306:36096,Yr=ft.get(jn),wr=jn.isWebGLMultipleRenderTargets===!0;if(wr)for(let ao=0;ao<Gn.length;ao++)lt.bindFramebuffer(36160,Yr.__webglMultisampledFramebuffer),dt.framebufferRenderbuffer(36160,36064+ao,36161,null),lt.bindFramebuffer(36160,Yr.__webglFramebuffer),dt.framebufferTexture2D(36009,36064+ao,3553,null,0);lt.bindFramebuffer(36008,Yr.__webglMultisampledFramebuffer),lt.bindFramebuffer(36009,Yr.__webglFramebuffer);for(let ao=0;ao<Gn.length;ao++){Br.push(36064+ao),jn.depthBuffer&&Br.push(fr);const Kn=Yr.__ignoreDepthValues!==void 0?Yr.__ignoreDepthValues:!1;if(Kn===!1&&(jn.depthBuffer&&(Ar|=256),jn.stencilBuffer&&(Ar|=1024)),wr&&dt.framebufferRenderbuffer(36008,36064,36161,Yr.__webglColorRenderbuffer[ao]),Kn===!0&&(dt.invalidateFramebuffer(36008,[fr]),dt.invalidateFramebuffer(36009,[fr])),wr){const Sr=ft.get(Gn[ao]).__webglTexture;dt.framebufferTexture2D(36009,36064,3553,Sr,0)}dt.blitFramebuffer(0,0,rr,Or,0,0,rr,Or,Ar,9728),zt&&dt.invalidateFramebuffer(36008,Br)}if(lt.bindFramebuffer(36008,null),lt.bindFramebuffer(36009,null),wr)for(let ao=0;ao<Gn.length;ao++){lt.bindFramebuffer(36160,Yr.__webglMultisampledFramebuffer),dt.framebufferRenderbuffer(36160,36064+ao,36161,Yr.__webglColorRenderbuffer[ao]);const Kn=ft.get(Gn[ao]).__webglTexture;lt.bindFramebuffer(36160,Yr.__webglFramebuffer),dt.framebufferTexture2D(36009,36064+ao,3553,Kn,0)}lt.bindFramebuffer(36009,Yr.__webglMultisampledFramebuffer)}}function co(jn){return Math.min(Bt,jn.samples)}function uo(jn){const Gn=ft.get(jn);return At&&jn.samples>0&&$.has("WEBGL_multisampled_render_to_texture")===!0&&Gn.__useRenderToTexture!==!1}function Mo(jn){const Gn=Ct.render.frame;Zt.get(jn)!==Gn&&(Zt.set(jn,Gn),jn.update())}function Vo(jn,Gn){const rr=jn.encoding,Or=jn.format,Ar=jn.type;return jn.isCompressedTexture===!0||jn.isVideoTexture===!0||jn.format===_SRGBAFormat||rr!==LinearEncoding&&(rr===sRGBEncoding?At===!1?$.has("EXT_sRGB")===!0&&Or===RGBAFormat?(jn.format=_SRGBAFormat,jn.minFilter=LinearFilter,jn.generateMipmaps=!1):Gn=ImageUtils.sRGBToLinear(Gn):(Or!==RGBAFormat||Ar!==UnsignedByteType)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",rr)),Gn}this.allocateTextureUnit=Ln,this.resetTextureUnits=nr,this.setTexture2D=Vn,this.setTexture2DArray=sr,this.setTexture3D=In,this.setTextureCube=ir,this.rebindTextures=Qr,this.setupRenderTarget=oo,this.updateRenderTargetMipmap=zr,this.updateMultisampleRenderTarget=to,this.setupDepthRenderbuffer=Ir,this.setupFrameBufferTexture=Xr,this.useMultisampledRTT=uo}function WebGLUtils(dt,$,lt){const ft=lt.isWebGL2;function St(Tt,Ct=null){let At;if(Tt===UnsignedByteType)return 5121;if(Tt===UnsignedShort4444Type)return 32819;if(Tt===UnsignedShort5551Type)return 32820;if(Tt===ByteType)return 5120;if(Tt===ShortType)return 5122;if(Tt===UnsignedShortType)return 5123;if(Tt===IntType)return 5124;if(Tt===UnsignedIntType)return 5125;if(Tt===FloatType)return 5126;if(Tt===HalfFloatType)return ft?5131:(At=$.get("OES_texture_half_float"),At!==null?At.HALF_FLOAT_OES:null);if(Tt===AlphaFormat)return 6406;if(Tt===RGBAFormat)return 6408;if(Tt===LuminanceFormat)return 6409;if(Tt===LuminanceAlphaFormat)return 6410;if(Tt===DepthFormat)return 6402;if(Tt===DepthStencilFormat)return 34041;if(Tt===_SRGBAFormat)return At=$.get("EXT_sRGB"),At!==null?At.SRGB_ALPHA_EXT:null;if(Tt===RedFormat)return 6403;if(Tt===RedIntegerFormat)return 36244;if(Tt===RGFormat)return 33319;if(Tt===RGIntegerFormat)return 33320;if(Tt===RGBAIntegerFormat)return 36249;if(Tt===RGB_S3TC_DXT1_Format||Tt===RGBA_S3TC_DXT1_Format||Tt===RGBA_S3TC_DXT3_Format||Tt===RGBA_S3TC_DXT5_Format)if(Ct===sRGBEncoding)if(At=$.get("WEBGL_compressed_texture_s3tc_srgb"),At!==null){if(Tt===RGB_S3TC_DXT1_Format)return At.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(Tt===RGBA_S3TC_DXT1_Format)return At.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(Tt===RGBA_S3TC_DXT3_Format)return At.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(Tt===RGBA_S3TC_DXT5_Format)return At.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(At=$.get("WEBGL_compressed_texture_s3tc"),At!==null){if(Tt===RGB_S3TC_DXT1_Format)return At.COMPRESSED_RGB_S3TC_DXT1_EXT;if(Tt===RGBA_S3TC_DXT1_Format)return At.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(Tt===RGBA_S3TC_DXT3_Format)return At.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(Tt===RGBA_S3TC_DXT5_Format)return At.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(Tt===RGB_PVRTC_4BPPV1_Format||Tt===RGB_PVRTC_2BPPV1_Format||Tt===RGBA_PVRTC_4BPPV1_Format||Tt===RGBA_PVRTC_2BPPV1_Format)if(At=$.get("WEBGL_compressed_texture_pvrtc"),At!==null){if(Tt===RGB_PVRTC_4BPPV1_Format)return At.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(Tt===RGB_PVRTC_2BPPV1_Format)return At.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(Tt===RGBA_PVRTC_4BPPV1_Format)return At.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(Tt===RGBA_PVRTC_2BPPV1_Format)return At.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(Tt===RGB_ETC1_Format)return At=$.get("WEBGL_compressed_texture_etc1"),At!==null?At.COMPRESSED_RGB_ETC1_WEBGL:null;if(Tt===RGB_ETC2_Format||Tt===RGBA_ETC2_EAC_Format)if(At=$.get("WEBGL_compressed_texture_etc"),At!==null){if(Tt===RGB_ETC2_Format)return Ct===sRGBEncoding?At.COMPRESSED_SRGB8_ETC2:At.COMPRESSED_RGB8_ETC2;if(Tt===RGBA_ETC2_EAC_Format)return Ct===sRGBEncoding?At.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:At.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(Tt===RGBA_ASTC_4x4_Format||Tt===RGBA_ASTC_5x4_Format||Tt===RGBA_ASTC_5x5_Format||Tt===RGBA_ASTC_6x5_Format||Tt===RGBA_ASTC_6x6_Format||Tt===RGBA_ASTC_8x5_Format||Tt===RGBA_ASTC_8x6_Format||Tt===RGBA_ASTC_8x8_Format||Tt===RGBA_ASTC_10x5_Format||Tt===RGBA_ASTC_10x6_Format||Tt===RGBA_ASTC_10x8_Format||Tt===RGBA_ASTC_10x10_Format||Tt===RGBA_ASTC_12x10_Format||Tt===RGBA_ASTC_12x12_Format)if(At=$.get("WEBGL_compressed_texture_astc"),At!==null){if(Tt===RGBA_ASTC_4x4_Format)return Ct===sRGBEncoding?At.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:At.COMPRESSED_RGBA_ASTC_4x4_KHR;if(Tt===RGBA_ASTC_5x4_Format)return Ct===sRGBEncoding?At.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:At.COMPRESSED_RGBA_ASTC_5x4_KHR;if(Tt===RGBA_ASTC_5x5_Format)return Ct===sRGBEncoding?At.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:At.COMPRESSED_RGBA_ASTC_5x5_KHR;if(Tt===RGBA_ASTC_6x5_Format)return Ct===sRGBEncoding?At.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:At.COMPRESSED_RGBA_ASTC_6x5_KHR;if(Tt===RGBA_ASTC_6x6_Format)return Ct===sRGBEncoding?At.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:At.COMPRESSED_RGBA_ASTC_6x6_KHR;if(Tt===RGBA_ASTC_8x5_Format)return Ct===sRGBEncoding?At.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:At.COMPRESSED_RGBA_ASTC_8x5_KHR;if(Tt===RGBA_ASTC_8x6_Format)return Ct===sRGBEncoding?At.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:At.COMPRESSED_RGBA_ASTC_8x6_KHR;if(Tt===RGBA_ASTC_8x8_Format)return Ct===sRGBEncoding?At.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:At.COMPRESSED_RGBA_ASTC_8x8_KHR;if(Tt===RGBA_ASTC_10x5_Format)return Ct===sRGBEncoding?At.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:At.COMPRESSED_RGBA_ASTC_10x5_KHR;if(Tt===RGBA_ASTC_10x6_Format)return Ct===sRGBEncoding?At.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:At.COMPRESSED_RGBA_ASTC_10x6_KHR;if(Tt===RGBA_ASTC_10x8_Format)return Ct===sRGBEncoding?At.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:At.COMPRESSED_RGBA_ASTC_10x8_KHR;if(Tt===RGBA_ASTC_10x10_Format)return Ct===sRGBEncoding?At.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:At.COMPRESSED_RGBA_ASTC_10x10_KHR;if(Tt===RGBA_ASTC_12x10_Format)return Ct===sRGBEncoding?At.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:At.COMPRESSED_RGBA_ASTC_12x10_KHR;if(Tt===RGBA_ASTC_12x12_Format)return Ct===sRGBEncoding?At.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:At.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(Tt===RGBA_BPTC_Format)if(At=$.get("EXT_texture_compression_bptc"),At!==null){if(Tt===RGBA_BPTC_Format)return Ct===sRGBEncoding?At.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:At.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(Tt===RED_RGTC1_Format||Tt===SIGNED_RED_RGTC1_Format||Tt===RED_GREEN_RGTC2_Format||Tt===SIGNED_RED_GREEN_RGTC2_Format)if(At=$.get("EXT_texture_compression_rgtc"),At!==null){if(Tt===RGBA_BPTC_Format)return At.COMPRESSED_RED_RGTC1_EXT;if(Tt===SIGNED_RED_RGTC1_Format)return At.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(Tt===RED_GREEN_RGTC2_Format)return At.COMPRESSED_RED_GREEN_RGTC2_EXT;if(Tt===SIGNED_RED_GREEN_RGTC2_Format)return At.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return Tt===UnsignedInt248Type?ft?34042:(At=$.get("WEBGL_depth_texture"),At!==null?At.UNSIGNED_INT_24_8_WEBGL:null):dt[Tt]!==void 0?dt[Tt]:null}return{convert:St}}class ArrayCamera extends PerspectiveCamera{constructor($=[]){super(),this.isArrayCamera=!0,this.cameras=$}}class Group extends Object3D{constructor(){super(),this.isGroup=!0,this.type="Group"}}const _moveEvent={type:"move"};class WebXRController{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vector3),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vector3),this._grip}dispatchEvent($){return this._targetRay!==null&&this._targetRay.dispatchEvent($),this._grip!==null&&this._grip.dispatchEvent($),this._hand!==null&&this._hand.dispatchEvent($),this}connect($){if($&&$.hand){const lt=this._hand;if(lt)for(const ft of $.hand.values())this._getHandJoint(lt,ft)}return this.dispatchEvent({type:"connected",data:$}),this}disconnect($){return this.dispatchEvent({type:"disconnected",data:$}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update($,lt,ft){let St=null,Tt=null,Ct=null;const At=this._targetRay,Rt=this._grip,kt=this._hand;if($&&lt.session.visibilityState!=="visible-blurred"){if(kt&&$.hand){Ct=!0;for(const ln of $.hand.values()){const cn=lt.getJointPose(ln,ft),hn=this._getHandJoint(kt,ln);cn!==null&&(hn.matrix.fromArray(cn.transform.matrix),hn.matrix.decompose(hn.position,hn.rotation,hn.scale),hn.jointRadius=cn.radius),hn.visible=cn!==null}const Nt=kt.joints["index-finger-tip"],Bt=kt.joints["thumb-tip"],Ut=Nt.position.distanceTo(Bt.position),zt=.02,Zt=.005;kt.inputState.pinching&&Ut>zt+Zt?(kt.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:$.handedness,target:this})):!kt.inputState.pinching&&Ut<=zt-Zt&&(kt.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:$.handedness,target:this}))}else Rt!==null&&$.gripSpace&&(Tt=lt.getPose($.gripSpace,ft),Tt!==null&&(Rt.matrix.fromArray(Tt.transform.matrix),Rt.matrix.decompose(Rt.position,Rt.rotation,Rt.scale),Tt.linearVelocity?(Rt.hasLinearVelocity=!0,Rt.linearVelocity.copy(Tt.linearVelocity)):Rt.hasLinearVelocity=!1,Tt.angularVelocity?(Rt.hasAngularVelocity=!0,Rt.angularVelocity.copy(Tt.angularVelocity)):Rt.hasAngularVelocity=!1));At!==null&&(St=lt.getPose($.targetRaySpace,ft),St===null&&Tt!==null&&(St=Tt),St!==null&&(At.matrix.fromArray(St.transform.matrix),At.matrix.decompose(At.position,At.rotation,At.scale),St.linearVelocity?(At.hasLinearVelocity=!0,At.linearVelocity.copy(St.linearVelocity)):At.hasLinearVelocity=!1,St.angularVelocity?(At.hasAngularVelocity=!0,At.angularVelocity.copy(St.angularVelocity)):At.hasAngularVelocity=!1,this.dispatchEvent(_moveEvent)))}return At!==null&&(At.visible=St!==null),Rt!==null&&(Rt.visible=Tt!==null),kt!==null&&(kt.visible=Ct!==null),this}_getHandJoint($,lt){if($.joints[lt.jointName]===void 0){const ft=new Group;ft.matrixAutoUpdate=!1,ft.visible=!1,$.joints[lt.jointName]=ft,$.add(ft)}return $.joints[lt.jointName]}}class DepthTexture extends Texture{constructor($,lt,ft,St,Tt,Ct,At,Rt,kt,Nt){if(Nt=Nt!==void 0?Nt:DepthFormat,Nt!==DepthFormat&&Nt!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");ft===void 0&&Nt===DepthFormat&&(ft=UnsignedIntType),ft===void 0&&Nt===DepthStencilFormat&&(ft=UnsignedInt248Type),super(null,St,Tt,Ct,At,Rt,Nt,ft,kt),this.isDepthTexture=!0,this.image={width:$,height:lt},this.magFilter=At!==void 0?At:NearestFilter,this.minFilter=Rt!==void 0?Rt:NearestFilter,this.flipY=!1,this.generateMipmaps=!1}}class WebXRManager extends EventDispatcher{constructor($,lt){super();const ft=this;let St=null,Tt=1,Ct=null,At="local-floor",Rt=1,kt=null,Nt=null,Bt=null,Ut=null,zt=null,Zt=null;const ln=lt.getContextAttributes();let cn=null,hn=null;const pn=[],dn=[],gn=new Set,vn=new Map,Tn=new PerspectiveCamera;Tn.layers.enable(1),Tn.viewport=new Vector4;const Cn=new PerspectiveCamera;Cn.layers.enable(2),Cn.viewport=new Vector4;const $n=[Tn,Cn],xn=new ArrayCamera;xn.layers.enable(1),xn.layers.enable(2);let Rn=null,Pn=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(In){let ir=pn[In];return ir===void 0&&(ir=new WebXRController,pn[In]=ir),ir.getTargetRaySpace()},this.getControllerGrip=function(In){let ir=pn[In];return ir===void 0&&(ir=new WebXRController,pn[In]=ir),ir.getGripSpace()},this.getHand=function(In){let ir=pn[In];return ir===void 0&&(ir=new WebXRController,pn[In]=ir),ir.getHandSpace()};function Nn(In){const ir=dn.indexOf(In.inputSource);if(ir===-1)return;const pr=pn[ir];pr!==void 0&&pr.dispatchEvent({type:In.type,data:In.inputSource})}function Wn(){St.removeEventListener("select",Nn),St.removeEventListener("selectstart",Nn),St.removeEventListener("selectend",Nn),St.removeEventListener("squeeze",Nn),St.removeEventListener("squeezestart",Nn),St.removeEventListener("squeezeend",Nn),St.removeEventListener("end",Wn),St.removeEventListener("inputsourceschange",zn);for(let In=0;In<pn.length;In++){const ir=dn[In];ir!==null&&(dn[In]=null,pn[In].disconnect(ir))}Rn=null,Pn=null,$.setRenderTarget(cn),zt=null,Ut=null,Bt=null,St=null,hn=null,sr.stop(),ft.isPresenting=!1,ft.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(In){Tt=In,ft.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(In){At=In,ft.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return kt||Ct},this.setReferenceSpace=function(In){kt=In},this.getBaseLayer=function(){return Ut!==null?Ut:zt},this.getBinding=function(){return Bt},this.getFrame=function(){return Zt},this.getSession=function(){return St},this.setSession=async function(In){if(St=In,St!==null){if(cn=$.getRenderTarget(),St.addEventListener("select",Nn),St.addEventListener("selectstart",Nn),St.addEventListener("selectend",Nn),St.addEventListener("squeeze",Nn),St.addEventListener("squeezestart",Nn),St.addEventListener("squeezeend",Nn),St.addEventListener("end",Wn),St.addEventListener("inputsourceschange",zn),ln.xrCompatible!==!0&&await lt.makeXRCompatible(),St.renderState.layers===void 0||$.capabilities.isWebGL2===!1){const ir={antialias:St.renderState.layers===void 0?ln.antialias:!0,alpha:ln.alpha,depth:ln.depth,stencil:ln.stencil,framebufferScaleFactor:Tt};zt=new XRWebGLLayer(St,lt,ir),St.updateRenderState({baseLayer:zt}),hn=new WebGLRenderTarget(zt.framebufferWidth,zt.framebufferHeight,{format:RGBAFormat,type:UnsignedByteType,encoding:$.outputEncoding,stencilBuffer:ln.stencil})}else{let ir=null,pr=null,Jn=null;ln.depth&&(Jn=ln.stencil?35056:33190,ir=ln.stencil?DepthStencilFormat:DepthFormat,pr=ln.stencil?UnsignedInt248Type:UnsignedIntType);const Pr={colorFormat:32856,depthFormat:Jn,scaleFactor:Tt};Bt=new XRWebGLBinding(St,lt),Ut=Bt.createProjectionLayer(Pr),St.updateRenderState({layers:[Ut]}),hn=new WebGLRenderTarget(Ut.textureWidth,Ut.textureHeight,{format:RGBAFormat,type:UnsignedByteType,depthTexture:new DepthTexture(Ut.textureWidth,Ut.textureHeight,pr,void 0,void 0,void 0,void 0,void 0,void 0,ir),stencilBuffer:ln.stencil,encoding:$.outputEncoding,samples:ln.antialias?4:0});const br=$.properties.get(hn);br.__ignoreDepthValues=Ut.ignoreDepthValues}hn.isXRRenderTarget=!0,this.setFoveation(Rt),kt=null,Ct=await St.requestReferenceSpace(At),sr.setContext(St),sr.start(),ft.isPresenting=!0,ft.dispatchEvent({type:"sessionstart"})}};function zn(In){for(let ir=0;ir<In.removed.length;ir++){const pr=In.removed[ir],Jn=dn.indexOf(pr);Jn>=0&&(dn[Jn]=null,pn[Jn].disconnect(pr))}for(let ir=0;ir<In.added.length;ir++){const pr=In.added[ir];let Jn=dn.indexOf(pr);if(Jn===-1){for(let br=0;br<pn.length;br++)if(br>=dn.length){dn.push(pr),Jn=br;break}else if(dn[br]===null){dn[br]=pr,Jn=br;break}if(Jn===-1)break}const Pr=pn[Jn];Pr&&Pr.connect(pr)}}const Yn=new Vector3,Qn=new Vector3;function nr(In,ir,pr){Yn.setFromMatrixPosition(ir.matrixWorld),Qn.setFromMatrixPosition(pr.matrixWorld);const Jn=Yn.distanceTo(Qn),Pr=ir.projectionMatrix.elements,br=pr.projectionMatrix.elements,Gr=Pr[14]/(Pr[10]-1),Kr=Pr[14]/(Pr[10]+1),Xr=(Pr[9]+1)/Pr[5],Jr=(Pr[9]-1)/Pr[5],Tr=(Pr[8]-1)/Pr[0],Ir=(br[8]+1)/br[0],Qr=Gr*Tr,oo=Gr*Ir,zr=Jn/(-Tr+Ir),to=zr*-Tr;ir.matrixWorld.decompose(In.position,In.quaternion,In.scale),In.translateX(to),In.translateZ(zr),In.matrixWorld.compose(In.position,In.quaternion,In.scale),In.matrixWorldInverse.copy(In.matrixWorld).invert();const co=Gr+zr,uo=Kr+zr,Mo=Qr-to,Vo=oo+(Jn-to),jn=Xr*Kr/uo*co,Gn=Jr*Kr/uo*co;In.projectionMatrix.makePerspective(Mo,Vo,jn,Gn,co,uo)}function Ln(In,ir){ir===null?In.matrixWorld.copy(In.matrix):In.matrixWorld.multiplyMatrices(ir.matrixWorld,In.matrix),In.matrixWorldInverse.copy(In.matrixWorld).invert()}this.updateCamera=function(In){if(St===null)return;xn.near=Cn.near=Tn.near=In.near,xn.far=Cn.far=Tn.far=In.far,(Rn!==xn.near||Pn!==xn.far)&&(St.updateRenderState({depthNear:xn.near,depthFar:xn.far}),Rn=xn.near,Pn=xn.far);const ir=In.parent,pr=xn.cameras;Ln(xn,ir);for(let Pr=0;Pr<pr.length;Pr++)Ln(pr[Pr],ir);xn.matrixWorld.decompose(xn.position,xn.quaternion,xn.scale),In.matrix.copy(xn.matrix),In.matrix.decompose(In.position,In.quaternion,In.scale);const Jn=In.children;for(let Pr=0,br=Jn.length;Pr<br;Pr++)Jn[Pr].updateMatrixWorld(!0);pr.length===2?nr(xn,Tn,Cn):xn.projectionMatrix.copy(Tn.projectionMatrix)},this.getCamera=function(){return xn},this.getFoveation=function(){if(!(Ut===null&&zt===null))return Rt},this.setFoveation=function(In){Rt=In,Ut!==null&&(Ut.fixedFoveation=In),zt!==null&&zt.fixedFoveation!==void 0&&(zt.fixedFoveation=In)},this.getPlanes=function(){return gn};let Un=null;function Vn(In,ir){if(Nt=ir.getViewerPose(kt||Ct),Zt=ir,Nt!==null){const pr=Nt.views;zt!==null&&($.setRenderTargetFramebuffer(hn,zt.framebuffer),$.setRenderTarget(hn));let Jn=!1;pr.length!==xn.cameras.length&&(xn.cameras.length=0,Jn=!0);for(let Pr=0;Pr<pr.length;Pr++){const br=pr[Pr];let Gr=null;if(zt!==null)Gr=zt.getViewport(br);else{const Xr=Bt.getViewSubImage(Ut,br);Gr=Xr.viewport,Pr===0&&($.setRenderTargetTextures(hn,Xr.colorTexture,Ut.ignoreDepthValues?void 0:Xr.depthStencilTexture),$.setRenderTarget(hn))}let Kr=$n[Pr];Kr===void 0&&(Kr=new PerspectiveCamera,Kr.layers.enable(Pr),Kr.viewport=new Vector4,$n[Pr]=Kr),Kr.matrix.fromArray(br.transform.matrix),Kr.projectionMatrix.fromArray(br.projectionMatrix),Kr.viewport.set(Gr.x,Gr.y,Gr.width,Gr.height),Pr===0&&xn.matrix.copy(Kr.matrix),Jn===!0&&xn.cameras.push(Kr)}}for(let pr=0;pr<pn.length;pr++){const Jn=dn[pr],Pr=pn[pr];Jn!==null&&Pr!==void 0&&Pr.update(Jn,ir,kt||Ct)}if(Un&&Un(In,ir),ir.detectedPlanes){ft.dispatchEvent({type:"planesdetected",data:ir.detectedPlanes});let pr=null;for(const Jn of gn)ir.detectedPlanes.has(Jn)||(pr===null&&(pr=[]),pr.push(Jn));if(pr!==null)for(const Jn of pr)gn.delete(Jn),vn.delete(Jn),ft.dispatchEvent({type:"planeremoved",data:Jn});for(const Jn of ir.detectedPlanes)if(!gn.has(Jn))gn.add(Jn),vn.set(Jn,ir.lastChangedTime),ft.dispatchEvent({type:"planeadded",data:Jn});else{const Pr=vn.get(Jn);Jn.lastChangedTime>Pr&&(vn.set(Jn,Jn.lastChangedTime),ft.dispatchEvent({type:"planechanged",data:Jn}))}}Zt=null}const sr=new WebGLAnimation;sr.setAnimationLoop(Vn),this.setAnimationLoop=function(In){Un=In},this.dispose=function(){}}}function WebGLMaterials(dt,$){function lt(ln,cn){cn.color.getRGB(ln.fogColor.value,getUnlitUniformColorSpace(dt)),cn.isFog?(ln.fogNear.value=cn.near,ln.fogFar.value=cn.far):cn.isFogExp2&&(ln.fogDensity.value=cn.density)}function ft(ln,cn,hn,pn,dn){cn.isMeshBasicMaterial||cn.isMeshLambertMaterial?St(ln,cn):cn.isMeshToonMaterial?(St(ln,cn),Nt(ln,cn)):cn.isMeshPhongMaterial?(St(ln,cn),kt(ln,cn)):cn.isMeshStandardMaterial?(St(ln,cn),Bt(ln,cn),cn.isMeshPhysicalMaterial&&Ut(ln,cn,dn)):cn.isMeshMatcapMaterial?(St(ln,cn),zt(ln,cn)):cn.isMeshDepthMaterial?St(ln,cn):cn.isMeshDistanceMaterial?(St(ln,cn),Zt(ln,cn)):cn.isMeshNormalMaterial?St(ln,cn):cn.isLineBasicMaterial?(Tt(ln,cn),cn.isLineDashedMaterial&&Ct(ln,cn)):cn.isPointsMaterial?At(ln,cn,hn,pn):cn.isSpriteMaterial?Rt(ln,cn):cn.isShadowMaterial?(ln.color.value.copy(cn.color),ln.opacity.value=cn.opacity):cn.isShaderMaterial&&(cn.uniformsNeedUpdate=!1)}function St(ln,cn){ln.opacity.value=cn.opacity,cn.color&&ln.diffuse.value.copy(cn.color),cn.emissive&&ln.emissive.value.copy(cn.emissive).multiplyScalar(cn.emissiveIntensity),cn.map&&(ln.map.value=cn.map),cn.alphaMap&&(ln.alphaMap.value=cn.alphaMap),cn.bumpMap&&(ln.bumpMap.value=cn.bumpMap,ln.bumpScale.value=cn.bumpScale,cn.side===BackSide&&(ln.bumpScale.value*=-1)),cn.displacementMap&&(ln.displacementMap.value=cn.displacementMap,ln.displacementScale.value=cn.displacementScale,ln.displacementBias.value=cn.displacementBias),cn.emissiveMap&&(ln.emissiveMap.value=cn.emissiveMap),cn.normalMap&&(ln.normalMap.value=cn.normalMap,ln.normalScale.value.copy(cn.normalScale),cn.side===BackSide&&ln.normalScale.value.negate()),cn.specularMap&&(ln.specularMap.value=cn.specularMap),cn.alphaTest>0&&(ln.alphaTest.value=cn.alphaTest);const hn=$.get(cn).envMap;if(hn&&(ln.envMap.value=hn,ln.flipEnvMap.value=hn.isCubeTexture&&hn.isRenderTargetTexture===!1?-1:1,ln.reflectivity.value=cn.reflectivity,ln.ior.value=cn.ior,ln.refractionRatio.value=cn.refractionRatio),cn.lightMap){ln.lightMap.value=cn.lightMap;const gn=dt.useLegacyLights===!0?Math.PI:1;ln.lightMapIntensity.value=cn.lightMapIntensity*gn}cn.aoMap&&(ln.aoMap.value=cn.aoMap,ln.aoMapIntensity.value=cn.aoMapIntensity);let pn;cn.map?pn=cn.map:cn.specularMap?pn=cn.specularMap:cn.displacementMap?pn=cn.displacementMap:cn.normalMap?pn=cn.normalMap:cn.bumpMap?pn=cn.bumpMap:cn.roughnessMap?pn=cn.roughnessMap:cn.metalnessMap?pn=cn.metalnessMap:cn.alphaMap?pn=cn.alphaMap:cn.emissiveMap?pn=cn.emissiveMap:cn.clearcoatMap?pn=cn.clearcoatMap:cn.clearcoatNormalMap?pn=cn.clearcoatNormalMap:cn.clearcoatRoughnessMap?pn=cn.clearcoatRoughnessMap:cn.iridescenceMap?pn=cn.iridescenceMap:cn.iridescenceThicknessMap?pn=cn.iridescenceThicknessMap:cn.specularIntensityMap?pn=cn.specularIntensityMap:cn.specularColorMap?pn=cn.specularColorMap:cn.transmissionMap?pn=cn.transmissionMap:cn.thicknessMap?pn=cn.thicknessMap:cn.sheenColorMap?pn=cn.sheenColorMap:cn.sheenRoughnessMap&&(pn=cn.sheenRoughnessMap),pn!==void 0&&(pn.isWebGLRenderTarget&&(pn=pn.texture),pn.matrixAutoUpdate===!0&&pn.updateMatrix(),ln.uvTransform.value.copy(pn.matrix));let dn;cn.aoMap?dn=cn.aoMap:cn.lightMap&&(dn=cn.lightMap),dn!==void 0&&(dn.isWebGLRenderTarget&&(dn=dn.texture),dn.matrixAutoUpdate===!0&&dn.updateMatrix(),ln.uv2Transform.value.copy(dn.matrix))}function Tt(ln,cn){ln.diffuse.value.copy(cn.color),ln.opacity.value=cn.opacity}function Ct(ln,cn){ln.dashSize.value=cn.dashSize,ln.totalSize.value=cn.dashSize+cn.gapSize,ln.scale.value=cn.scale}function At(ln,cn,hn,pn){ln.diffuse.value.copy(cn.color),ln.opacity.value=cn.opacity,ln.size.value=cn.size*hn,ln.scale.value=pn*.5,cn.map&&(ln.map.value=cn.map),cn.alphaMap&&(ln.alphaMap.value=cn.alphaMap),cn.alphaTest>0&&(ln.alphaTest.value=cn.alphaTest);let dn;cn.map?dn=cn.map:cn.alphaMap&&(dn=cn.alphaMap),dn!==void 0&&(dn.matrixAutoUpdate===!0&&dn.updateMatrix(),ln.uvTransform.value.copy(dn.matrix))}function Rt(ln,cn){ln.diffuse.value.copy(cn.color),ln.opacity.value=cn.opacity,ln.rotation.value=cn.rotation,cn.map&&(ln.map.value=cn.map),cn.alphaMap&&(ln.alphaMap.value=cn.alphaMap),cn.alphaTest>0&&(ln.alphaTest.value=cn.alphaTest);let hn;cn.map?hn=cn.map:cn.alphaMap&&(hn=cn.alphaMap),hn!==void 0&&(hn.matrixAutoUpdate===!0&&hn.updateMatrix(),ln.uvTransform.value.copy(hn.matrix))}function kt(ln,cn){ln.specular.value.copy(cn.specular),ln.shininess.value=Math.max(cn.shininess,1e-4)}function Nt(ln,cn){cn.gradientMap&&(ln.gradientMap.value=cn.gradientMap)}function Bt(ln,cn){ln.roughness.value=cn.roughness,ln.metalness.value=cn.metalness,cn.roughnessMap&&(ln.roughnessMap.value=cn.roughnessMap),cn.metalnessMap&&(ln.metalnessMap.value=cn.metalnessMap),$.get(cn).envMap&&(ln.envMapIntensity.value=cn.envMapIntensity)}function Ut(ln,cn,hn){ln.ior.value=cn.ior,cn.sheen>0&&(ln.sheenColor.value.copy(cn.sheenColor).multiplyScalar(cn.sheen),ln.sheenRoughness.value=cn.sheenRoughness,cn.sheenColorMap&&(ln.sheenColorMap.value=cn.sheenColorMap),cn.sheenRoughnessMap&&(ln.sheenRoughnessMap.value=cn.sheenRoughnessMap)),cn.clearcoat>0&&(ln.clearcoat.value=cn.clearcoat,ln.clearcoatRoughness.value=cn.clearcoatRoughness,cn.clearcoatMap&&(ln.clearcoatMap.value=cn.clearcoatMap),cn.clearcoatRoughnessMap&&(ln.clearcoatRoughnessMap.value=cn.clearcoatRoughnessMap),cn.clearcoatNormalMap&&(ln.clearcoatNormalScale.value.copy(cn.clearcoatNormalScale),ln.clearcoatNormalMap.value=cn.clearcoatNormalMap,cn.side===BackSide&&ln.clearcoatNormalScale.value.negate())),cn.iridescence>0&&(ln.iridescence.value=cn.iridescence,ln.iridescenceIOR.value=cn.iridescenceIOR,ln.iridescenceThicknessMinimum.value=cn.iridescenceThicknessRange[0],ln.iridescenceThicknessMaximum.value=cn.iridescenceThicknessRange[1],cn.iridescenceMap&&(ln.iridescenceMap.value=cn.iridescenceMap),cn.iridescenceThicknessMap&&(ln.iridescenceThicknessMap.value=cn.iridescenceThicknessMap)),cn.transmission>0&&(ln.transmission.value=cn.transmission,ln.transmissionSamplerMap.value=hn.texture,ln.transmissionSamplerSize.value.set(hn.width,hn.height),cn.transmissionMap&&(ln.transmissionMap.value=cn.transmissionMap),ln.thickness.value=cn.thickness,cn.thicknessMap&&(ln.thicknessMap.value=cn.thicknessMap),ln.attenuationDistance.value=cn.attenuationDistance,ln.attenuationColor.value.copy(cn.attenuationColor)),ln.specularIntensity.value=cn.specularIntensity,ln.specularColor.value.copy(cn.specularColor),cn.specularIntensityMap&&(ln.specularIntensityMap.value=cn.specularIntensityMap),cn.specularColorMap&&(ln.specularColorMap.value=cn.specularColorMap)}function zt(ln,cn){cn.matcap&&(ln.matcap.value=cn.matcap)}function Zt(ln,cn){ln.referencePosition.value.copy(cn.referencePosition),ln.nearDistance.value=cn.nearDistance,ln.farDistance.value=cn.farDistance}return{refreshFogUniforms:lt,refreshMaterialUniforms:ft}}function WebGLUniformsGroups(dt,$,lt,ft){let St={},Tt={},Ct=[];const At=lt.isWebGL2?dt.getParameter(35375):0;function Rt(pn,dn){const gn=dn.program;ft.uniformBlockBinding(pn,gn)}function kt(pn,dn){let gn=St[pn.id];gn===void 0&&(Zt(pn),gn=Nt(pn),St[pn.id]=gn,pn.addEventListener("dispose",cn));const vn=dn.program;ft.updateUBOMapping(pn,vn);const Tn=$.render.frame;Tt[pn.id]!==Tn&&(Ut(pn),Tt[pn.id]=Tn)}function Nt(pn){const dn=Bt();pn.__bindingPointIndex=dn;const gn=dt.createBuffer(),vn=pn.__size,Tn=pn.usage;return dt.bindBuffer(35345,gn),dt.bufferData(35345,vn,Tn),dt.bindBuffer(35345,null),dt.bindBufferBase(35345,dn,gn),gn}function Bt(){for(let pn=0;pn<At;pn++)if(Ct.indexOf(pn)===-1)return Ct.push(pn),pn;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function Ut(pn){const dn=St[pn.id],gn=pn.uniforms,vn=pn.__cache;dt.bindBuffer(35345,dn);for(let Tn=0,Cn=gn.length;Tn<Cn;Tn++){const $n=gn[Tn];if(zt($n,Tn,vn)===!0){const xn=$n.__offset,Rn=Array.isArray($n.value)?$n.value:[$n.value];let Pn=0;for(let Nn=0;Nn<Rn.length;Nn++){const Wn=Rn[Nn],zn=ln(Wn);typeof Wn=="number"?($n.__data[0]=Wn,dt.bufferSubData(35345,xn+Pn,$n.__data)):Wn.isMatrix3?($n.__data[0]=Wn.elements[0],$n.__data[1]=Wn.elements[1],$n.__data[2]=Wn.elements[2],$n.__data[3]=Wn.elements[0],$n.__data[4]=Wn.elements[3],$n.__data[5]=Wn.elements[4],$n.__data[6]=Wn.elements[5],$n.__data[7]=Wn.elements[0],$n.__data[8]=Wn.elements[6],$n.__data[9]=Wn.elements[7],$n.__data[10]=Wn.elements[8],$n.__data[11]=Wn.elements[0]):(Wn.toArray($n.__data,Pn),Pn+=zn.storage/Float32Array.BYTES_PER_ELEMENT)}dt.bufferSubData(35345,xn,$n.__data)}}dt.bindBuffer(35345,null)}function zt(pn,dn,gn){const vn=pn.value;if(gn[dn]===void 0){if(typeof vn=="number")gn[dn]=vn;else{const Tn=Array.isArray(vn)?vn:[vn],Cn=[];for(let $n=0;$n<Tn.length;$n++)Cn.push(Tn[$n].clone());gn[dn]=Cn}return!0}else if(typeof vn=="number"){if(gn[dn]!==vn)return gn[dn]=vn,!0}else{const Tn=Array.isArray(gn[dn])?gn[dn]:[gn[dn]],Cn=Array.isArray(vn)?vn:[vn];for(let $n=0;$n<Tn.length;$n++){const xn=Tn[$n];if(xn.equals(Cn[$n])===!1)return xn.copy(Cn[$n]),!0}}return!1}function Zt(pn){const dn=pn.uniforms;let gn=0;const vn=16;let Tn=0;for(let Cn=0,$n=dn.length;Cn<$n;Cn++){const xn=dn[Cn],Rn={boundary:0,storage:0},Pn=Array.isArray(xn.value)?xn.value:[xn.value];for(let Nn=0,Wn=Pn.length;Nn<Wn;Nn++){const zn=Pn[Nn],Yn=ln(zn);Rn.boundary+=Yn.boundary,Rn.storage+=Yn.storage}if(xn.__data=new Float32Array(Rn.storage/Float32Array.BYTES_PER_ELEMENT),xn.__offset=gn,Cn>0){Tn=gn%vn;const Nn=vn-Tn;Tn!==0&&Nn-Rn.boundary<0&&(gn+=vn-Tn,xn.__offset=gn)}gn+=Rn.storage}return Tn=gn%vn,Tn>0&&(gn+=vn-Tn),pn.__size=gn,pn.__cache={},this}function ln(pn){const dn={boundary:0,storage:0};return typeof pn=="number"?(dn.boundary=4,dn.storage=4):pn.isVector2?(dn.boundary=8,dn.storage=8):pn.isVector3||pn.isColor?(dn.boundary=16,dn.storage=12):pn.isVector4?(dn.boundary=16,dn.storage=16):pn.isMatrix3?(dn.boundary=48,dn.storage=48):pn.isMatrix4?(dn.boundary=64,dn.storage=64):pn.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",pn),dn}function cn(pn){const dn=pn.target;dn.removeEventListener("dispose",cn);const gn=Ct.indexOf(dn.__bindingPointIndex);Ct.splice(gn,1),dt.deleteBuffer(St[dn.id]),delete St[dn.id],delete Tt[dn.id]}function hn(){for(const pn in St)dt.deleteBuffer(St[pn]);Ct=[],St={},Tt={}}return{bind:Rt,update:kt,dispose:hn}}function createCanvasElement(){const dt=createElementNS$1("canvas");return dt.style.display="block",dt}function WebGLRenderer(dt={}){this.isWebGLRenderer=!0;const $=dt.canvas!==void 0?dt.canvas:createCanvasElement(),lt=dt.context!==void 0?dt.context:null,ft=dt.depth!==void 0?dt.depth:!0,St=dt.stencil!==void 0?dt.stencil:!0,Tt=dt.antialias!==void 0?dt.antialias:!1,Ct=dt.premultipliedAlpha!==void 0?dt.premultipliedAlpha:!0,At=dt.preserveDrawingBuffer!==void 0?dt.preserveDrawingBuffer:!1,Rt=dt.powerPreference!==void 0?dt.powerPreference:"default",kt=dt.failIfMajorPerformanceCaveat!==void 0?dt.failIfMajorPerformanceCaveat:!1;let Nt;lt!==null?Nt=lt.getContextAttributes().alpha:Nt=dt.alpha!==void 0?dt.alpha:!1;let Bt=null,Ut=null;const zt=[],Zt=[];this.domElement=$,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=LinearEncoding,this.useLegacyLights=!0,this.toneMapping=NoToneMapping,this.toneMappingExposure=1;const ln=this;let cn=!1,hn=0,pn=0,dn=null,gn=-1,vn=null;const Tn=new Vector4,Cn=new Vector4;let $n=null,xn=$.width,Rn=$.height,Pn=1,Nn=null,Wn=null;const zn=new Vector4(0,0,xn,Rn),Yn=new Vector4(0,0,xn,Rn);let Qn=!1;const nr=new Frustum;let Ln=!1,Un=!1,Vn=null;const sr=new Matrix4,In=new Vector3,ir={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function pr(){return dn===null?Pn:1}let Jn=lt;function Pr(Hn,_r){for(let xr=0;xr<Hn.length;xr++){const dr=Hn[xr],Rr=$.getContext(dr,_r);if(Rr!==null)return Rr}return null}try{const Hn={alpha:!0,depth:ft,stencil:St,antialias:Tt,premultipliedAlpha:Ct,preserveDrawingBuffer:At,powerPreference:Rt,failIfMajorPerformanceCaveat:kt};if("setAttribute"in $&&$.setAttribute("data-engine",`three.js r${REVISION}`),$.addEventListener("webglcontextlost",Sr,!1),$.addEventListener("webglcontextrestored",Dr,!1),$.addEventListener("webglcontextcreationerror",En,!1),Jn===null){const _r=["webgl2","webgl","experimental-webgl"];if(ln.isWebGL1Renderer===!0&&_r.shift(),Jn=Pr(_r,Hn),Jn===null)throw Pr(_r)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}Jn.getShaderPrecisionFormat===void 0&&(Jn.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Hn){throw console.error("THREE.WebGLRenderer: "+Hn.message),Hn}let br,Gr,Kr,Xr,Jr,Tr,Ir,Qr,oo,zr,to,co,uo,Mo,Vo,jn,Gn,rr,Or,Ar,Br,fr,Yr,wr;function ao(){br=new WebGLExtensions(Jn),Gr=new WebGLCapabilities(Jn,br,dt),br.init(Gr),fr=new WebGLUtils(Jn,br,Gr),Kr=new WebGLState(Jn,br,Gr),Xr=new WebGLInfo,Jr=new WebGLProperties,Tr=new WebGLTextures(Jn,br,Kr,Jr,Gr,fr,Xr),Ir=new WebGLCubeMaps(ln),Qr=new WebGLCubeUVMaps(ln),oo=new WebGLAttributes(Jn,Gr),Yr=new WebGLBindingStates(Jn,br,oo,Gr),zr=new WebGLGeometries(Jn,oo,Xr,Yr),to=new WebGLObjects(Jn,zr,oo,Xr),Or=new WebGLMorphtargets(Jn,Gr,Tr),jn=new WebGLClipping(Jr),co=new WebGLPrograms(ln,Ir,Qr,br,Gr,Yr,jn),uo=new WebGLMaterials(ln,Jr),Mo=new WebGLRenderLists,Vo=new WebGLRenderStates(br,Gr),rr=new WebGLBackground(ln,Ir,Qr,Kr,to,Nt,Ct),Gn=new WebGLShadowMap(ln,to,Gr),wr=new WebGLUniformsGroups(Jn,Xr,Gr,Kr),Ar=new WebGLBufferRenderer(Jn,br,Xr,Gr),Br=new WebGLIndexedBufferRenderer(Jn,br,Xr,Gr),Xr.programs=co.programs,ln.capabilities=Gr,ln.extensions=br,ln.properties=Jr,ln.renderLists=Mo,ln.shadowMap=Gn,ln.state=Kr,ln.info=Xr}ao();const Kn=new WebXRManager(ln,Jn);this.xr=Kn,this.getContext=function(){return Jn},this.getContextAttributes=function(){return Jn.getContextAttributes()},this.forceContextLoss=function(){const Hn=br.get("WEBGL_lose_context");Hn&&Hn.loseContext()},this.forceContextRestore=function(){const Hn=br.get("WEBGL_lose_context");Hn&&Hn.restoreContext()},this.getPixelRatio=function(){return Pn},this.setPixelRatio=function(Hn){Hn!==void 0&&(Pn=Hn,this.setSize(xn,Rn,!1))},this.getSize=function(Hn){return Hn.set(xn,Rn)},this.setSize=function(Hn,_r,xr=!0){if(Kn.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}xn=Hn,Rn=_r,$.width=Math.floor(Hn*Pn),$.height=Math.floor(_r*Pn),xr===!0&&($.style.width=Hn+"px",$.style.height=_r+"px"),this.setViewport(0,0,Hn,_r)},this.getDrawingBufferSize=function(Hn){return Hn.set(xn*Pn,Rn*Pn).floor()},this.setDrawingBufferSize=function(Hn,_r,xr){xn=Hn,Rn=_r,Pn=xr,$.width=Math.floor(Hn*xr),$.height=Math.floor(_r*xr),this.setViewport(0,0,Hn,_r)},this.getCurrentViewport=function(Hn){return Hn.copy(Tn)},this.getViewport=function(Hn){return Hn.copy(zn)},this.setViewport=function(Hn,_r,xr,dr){Hn.isVector4?zn.set(Hn.x,Hn.y,Hn.z,Hn.w):zn.set(Hn,_r,xr,dr),Kr.viewport(Tn.copy(zn).multiplyScalar(Pn).floor())},this.getScissor=function(Hn){return Hn.copy(Yn)},this.setScissor=function(Hn,_r,xr,dr){Hn.isVector4?Yn.set(Hn.x,Hn.y,Hn.z,Hn.w):Yn.set(Hn,_r,xr,dr),Kr.scissor(Cn.copy(Yn).multiplyScalar(Pn).floor())},this.getScissorTest=function(){return Qn},this.setScissorTest=function(Hn){Kr.setScissorTest(Qn=Hn)},this.setOpaqueSort=function(Hn){Nn=Hn},this.setTransparentSort=function(Hn){Wn=Hn},this.getClearColor=function(Hn){return Hn.copy(rr.getClearColor())},this.setClearColor=function(){rr.setClearColor.apply(rr,arguments)},this.getClearAlpha=function(){return rr.getClearAlpha()},this.setClearAlpha=function(){rr.setClearAlpha.apply(rr,arguments)},this.clear=function(Hn=!0,_r=!0,xr=!0){let dr=0;Hn&&(dr|=16384),_r&&(dr|=256),xr&&(dr|=1024),Jn.clear(dr)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){$.removeEventListener("webglcontextlost",Sr,!1),$.removeEventListener("webglcontextrestored",Dr,!1),$.removeEventListener("webglcontextcreationerror",En,!1),Mo.dispose(),Vo.dispose(),Jr.dispose(),Ir.dispose(),Qr.dispose(),to.dispose(),Yr.dispose(),wr.dispose(),co.dispose(),Kn.dispose(),Kn.removeEventListener("sessionstart",Nr),Kn.removeEventListener("sessionend",ro),Vn&&(Vn.dispose(),Vn=null),ho.stop()};function Sr(Hn){Hn.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),cn=!0}function Dr(){console.log("THREE.WebGLRenderer: Context Restored."),cn=!1;const Hn=Xr.autoReset,_r=Gn.enabled,xr=Gn.autoUpdate,dr=Gn.needsUpdate,Rr=Gn.type;ao(),Xr.autoReset=Hn,Gn.enabled=_r,Gn.autoUpdate=xr,Gn.needsUpdate=dr,Gn.type=Rr}function En(Hn){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Hn.statusMessage)}function Dn(Hn){const _r=Hn.target;_r.removeEventListener("dispose",Dn),Zn(_r)}function Zn(Hn){ur(Hn),Jr.remove(Hn)}function ur(Hn){const _r=Jr.get(Hn).programs;_r!==void 0&&(_r.forEach(function(xr){co.releaseProgram(xr)}),Hn.isShaderMaterial&&co.releaseShaderCache(Hn))}this.renderBufferDirect=function(Hn,_r,xr,dr,Rr,So){_r===null&&(_r=ir);const bo=Rr.isMesh&&Rr.matrixWorld.determinant()<0,Lo=PO(Hn,_r,xr,dr,Rr);Kr.setMaterial(dr,bo);let Eo=xr.index,Ao=1;dr.wireframe===!0&&(Eo=zr.getWireframeAttribute(xr),Ao=2);const wo=xr.drawRange,Fr=xr.attributes.position;let _s=wo.start*Ao,Hs=(wo.start+wo.count)*Ao;So!==null&&(_s=Math.max(_s,So.start*Ao),Hs=Math.min(Hs,(So.start+So.count)*Ao)),Eo!==null?(_s=Math.max(_s,0),Hs=Math.min(Hs,Eo.count)):Fr!=null&&(_s=Math.max(_s,0),Hs=Math.min(Hs,Fr.count));const El=Hs-_s;if(El<0||El===1/0)return;Yr.setup(Rr,dr,Lo,xr,Eo);let au,Bo=Ar;if(Eo!==null&&(au=oo.get(Eo),Bo=Br,Bo.setIndex(au)),Rr.isMesh)dr.wireframe===!0?(Kr.setLineWidth(dr.wireframeLinewidth*pr()),Bo.setMode(1)):Bo.setMode(4);else if(Rr.isLine){let yo=dr.linewidth;yo===void 0&&(yo=1),Kr.setLineWidth(yo*pr()),Rr.isLineSegments?Bo.setMode(1):Rr.isLineLoop?Bo.setMode(2):Bo.setMode(3)}else Rr.isPoints?Bo.setMode(0):Rr.isSprite&&Bo.setMode(4);if(Rr.isInstancedMesh)Bo.renderInstances(_s,El,Rr.count);else if(xr.isInstancedBufferGeometry){const yo=xr._maxInstanceCount!==void 0?xr._maxInstanceCount:1/0,os=Math.min(xr.instanceCount,yo);Bo.renderInstances(_s,El,os)}else Bo.render(_s,El)},this.compile=function(Hn,_r){function xr(dr,Rr,So){dr.transparent===!0&&dr.side===DoubleSide&&dr.forceSinglePass===!1?(dr.side=BackSide,dr.needsUpdate=!0,cs(dr,Rr,So),dr.side=FrontSide,dr.needsUpdate=!0,cs(dr,Rr,So),dr.side=DoubleSide):cs(dr,Rr,So)}Ut=Vo.get(Hn),Ut.init(),Zt.push(Ut),Hn.traverseVisible(function(dr){dr.isLight&&dr.layers.test(_r.layers)&&(Ut.pushLight(dr),dr.castShadow&&Ut.pushShadow(dr))}),Ut.setupLights(ln.useLegacyLights),Hn.traverse(function(dr){const Rr=dr.material;if(Rr)if(Array.isArray(Rr))for(let So=0;So<Rr.length;So++){const bo=Rr[So];xr(bo,Hn,dr)}else xr(Rr,Hn,dr)}),Zt.pop(),Ut=null};let Bn=null;function hr(Hn){Bn&&Bn(Hn)}function Nr(){ho.stop()}function ro(){ho.start()}const ho=new WebGLAnimation;ho.setAnimationLoop(hr),typeof self<"u"&&ho.setContext(self),this.setAnimationLoop=function(Hn){Bn=Hn,Kn.setAnimationLoop(Hn),Hn===null?ho.stop():ho.start()},Kn.addEventListener("sessionstart",Nr),Kn.addEventListener("sessionend",ro),this.render=function(Hn,_r){if(_r!==void 0&&_r.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(cn===!0)return;Hn.matrixWorldAutoUpdate===!0&&Hn.updateMatrixWorld(),_r.parent===null&&_r.matrixWorldAutoUpdate===!0&&_r.updateMatrixWorld(),Kn.enabled===!0&&Kn.isPresenting===!0&&(Kn.cameraAutoUpdate===!0&&Kn.updateCamera(_r),_r=Kn.getCamera()),Hn.isScene===!0&&Hn.onBeforeRender(ln,Hn,_r,dn),Ut=Vo.get(Hn,Zt.length),Ut.init(),Zt.push(Ut),sr.multiplyMatrices(_r.projectionMatrix,_r.matrixWorldInverse),nr.setFromProjectionMatrix(sr),Un=this.localClippingEnabled,Ln=jn.init(this.clippingPlanes,Un),Bt=Mo.get(Hn,zt.length),Bt.init(),zt.push(Bt),ns(Hn,_r,0,ln.sortObjects),Bt.finish(),ln.sortObjects===!0&&Bt.sort(Nn,Wn),Ln===!0&&jn.beginShadows();const xr=Ut.state.shadowsArray;if(Gn.render(xr,Hn,_r),Ln===!0&&jn.endShadows(),this.info.autoReset===!0&&this.info.reset(),rr.render(Bt,Hn),Ut.setupLights(ln.useLegacyLights),_r.isArrayCamera){const dr=_r.cameras;for(let Rr=0,So=dr.length;Rr<So;Rr++){const bo=dr[Rr];ls(Bt,Hn,bo,bo.viewport)}}else ls(Bt,Hn,_r);dn!==null&&(Tr.updateMultisampleRenderTarget(dn),Tr.updateRenderTargetMipmap(dn)),Hn.isScene===!0&&Hn.onAfterRender(ln,Hn,_r),Yr.resetDefaultState(),gn=-1,vn=null,Zt.pop(),Zt.length>0?Ut=Zt[Zt.length-1]:Ut=null,zt.pop(),zt.length>0?Bt=zt[zt.length-1]:Bt=null};function ns(Hn,_r,xr,dr){if(Hn.visible===!1)return;if(Hn.layers.test(_r.layers)){if(Hn.isGroup)xr=Hn.renderOrder;else if(Hn.isLOD)Hn.autoUpdate===!0&&Hn.update(_r);else if(Hn.isLight)Ut.pushLight(Hn),Hn.castShadow&&Ut.pushShadow(Hn);else if(Hn.isSprite){if(!Hn.frustumCulled||nr.intersectsSprite(Hn)){dr&&In.setFromMatrixPosition(Hn.matrixWorld).applyMatrix4(sr);const bo=to.update(Hn),Lo=Hn.material;Lo.visible&&Bt.push(Hn,bo,Lo,xr,In.z,null)}}else if((Hn.isMesh||Hn.isLine||Hn.isPoints)&&(Hn.isSkinnedMesh&&Hn.skeleton.frame!==Xr.render.frame&&(Hn.skeleton.update(),Hn.skeleton.frame=Xr.render.frame),!Hn.frustumCulled||nr.intersectsObject(Hn))){dr&&In.setFromMatrixPosition(Hn.matrixWorld).applyMatrix4(sr);const bo=to.update(Hn),Lo=Hn.material;if(Array.isArray(Lo)){const Eo=bo.groups;for(let Ao=0,wo=Eo.length;Ao<wo;Ao++){const Fr=Eo[Ao],_s=Lo[Fr.materialIndex];_s&&_s.visible&&Bt.push(Hn,bo,_s,xr,In.z,Fr)}}else Lo.visible&&Bt.push(Hn,bo,Lo,xr,In.z,null)}}const So=Hn.children;for(let bo=0,Lo=So.length;bo<Lo;bo++)ns(So[bo],_r,xr,dr)}function ls(Hn,_r,xr,dr){const Rr=Hn.opaque,So=Hn.transmissive,bo=Hn.transparent;Ut.setupLightsView(xr),Ln===!0&&jn.setGlobalState(ln.clippingPlanes,xr),So.length>0&&Ds(Rr,_r,xr),dr&&Kr.viewport(Tn.copy(dr)),Rr.length>0&&Gs(Rr,_r,xr),So.length>0&&Gs(So,_r,xr),bo.length>0&&Gs(bo,_r,xr),Kr.buffers.depth.setTest(!0),Kr.buffers.depth.setMask(!0),Kr.buffers.color.setMask(!0),Kr.setPolygonOffset(!1)}function Ds(Hn,_r,xr){const dr=Gr.isWebGL2;Vn===null&&(Vn=new WebGLRenderTarget(1024,1024,{generateMipmaps:!0,type:br.has("EXT_color_buffer_half_float")?HalfFloatType:UnsignedByteType,minFilter:LinearMipmapLinearFilter,samples:dr&&Tt===!0?4:0}));const Rr=ln.getRenderTarget();ln.setRenderTarget(Vn),ln.clear();const So=ln.toneMapping;ln.toneMapping=NoToneMapping,Gs(Hn,_r,xr),ln.toneMapping=So,Tr.updateMultisampleRenderTarget(Vn),Tr.updateRenderTargetMipmap(Vn),ln.setRenderTarget(Rr)}function Gs(Hn,_r,xr){const dr=_r.isScene===!0?_r.overrideMaterial:null;for(let Rr=0,So=Hn.length;Rr<So;Rr++){const bo=Hn[Rr],Lo=bo.object,Eo=bo.geometry,Ao=dr===null?bo.material:dr,wo=bo.group;Lo.layers.test(xr.layers)&&ss(Lo,_r,xr,Eo,Ao,wo)}}function ss(Hn,_r,xr,dr,Rr,So){Hn.onBeforeRender(ln,_r,xr,dr,Rr,So),Hn.modelViewMatrix.multiplyMatrices(xr.matrixWorldInverse,Hn.matrixWorld),Hn.normalMatrix.getNormalMatrix(Hn.modelViewMatrix),Rr.onBeforeRender(ln,_r,xr,dr,Hn,So),Rr.transparent===!0&&Rr.side===DoubleSide&&Rr.forceSinglePass===!1?(Rr.side=BackSide,Rr.needsUpdate=!0,ln.renderBufferDirect(xr,_r,dr,Rr,Hn,So),Rr.side=FrontSide,Rr.needsUpdate=!0,ln.renderBufferDirect(xr,_r,dr,Rr,Hn,So),Rr.side=DoubleSide):ln.renderBufferDirect(xr,_r,dr,Rr,Hn,So),Hn.onAfterRender(ln,_r,xr,dr,Rr,So)}function cs(Hn,_r,xr){_r.isScene!==!0&&(_r=ir);const dr=Jr.get(Hn),Rr=Ut.state.lights,So=Ut.state.shadowsArray,bo=Rr.state.version,Lo=co.getParameters(Hn,Rr.state,So,_r,xr),Eo=co.getProgramCacheKey(Lo);let Ao=dr.programs;dr.environment=Hn.isMeshStandardMaterial?_r.environment:null,dr.fog=_r.fog,dr.envMap=(Hn.isMeshStandardMaterial?Qr:Ir).get(Hn.envMap||dr.environment),Ao===void 0&&(Hn.addEventListener("dispose",Dn),Ao=new Map,dr.programs=Ao);let wo=Ao.get(Eo);if(wo!==void 0){if(dr.currentProgram===wo&&dr.lightsStateVersion===bo)return Il(Hn,Lo),wo}else Lo.uniforms=co.getUniforms(Hn),Hn.onBuild(xr,Lo,ln),Hn.onBeforeCompile(Lo,ln),wo=co.acquireProgram(Lo,Eo),Ao.set(Eo,wo),dr.uniforms=Lo.uniforms;const Fr=dr.uniforms;(!Hn.isShaderMaterial&&!Hn.isRawShaderMaterial||Hn.clipping===!0)&&(Fr.clippingPlanes=jn.uniform),Il(Hn,Lo),dr.needsLights=b_(Hn),dr.lightsStateVersion=bo,dr.needsLights&&(Fr.ambientLightColor.value=Rr.state.ambient,Fr.lightProbe.value=Rr.state.probe,Fr.directionalLights.value=Rr.state.directional,Fr.directionalLightShadows.value=Rr.state.directionalShadow,Fr.spotLights.value=Rr.state.spot,Fr.spotLightShadows.value=Rr.state.spotShadow,Fr.rectAreaLights.value=Rr.state.rectArea,Fr.ltc_1.value=Rr.state.rectAreaLTC1,Fr.ltc_2.value=Rr.state.rectAreaLTC2,Fr.pointLights.value=Rr.state.point,Fr.pointLightShadows.value=Rr.state.pointShadow,Fr.hemisphereLights.value=Rr.state.hemi,Fr.directionalShadowMap.value=Rr.state.directionalShadowMap,Fr.directionalShadowMatrix.value=Rr.state.directionalShadowMatrix,Fr.spotShadowMap.value=Rr.state.spotShadowMap,Fr.spotLightMatrix.value=Rr.state.spotLightMatrix,Fr.spotLightMap.value=Rr.state.spotLightMap,Fr.pointShadowMap.value=Rr.state.pointShadowMap,Fr.pointShadowMatrix.value=Rr.state.pointShadowMatrix);const _s=wo.getUniforms(),Hs=WebGLUniforms.seqWithValue(_s.seq,Fr);return dr.currentProgram=wo,dr.uniformsList=Hs,wo}function Il(Hn,_r){const xr=Jr.get(Hn);xr.outputEncoding=_r.outputEncoding,xr.instancing=_r.instancing,xr.skinning=_r.skinning,xr.morphTargets=_r.morphTargets,xr.morphNormals=_r.morphNormals,xr.morphColors=_r.morphColors,xr.morphTargetsCount=_r.morphTargetsCount,xr.numClippingPlanes=_r.numClippingPlanes,xr.numIntersection=_r.numClipIntersection,xr.vertexAlphas=_r.vertexAlphas,xr.vertexTangents=_r.vertexTangents,xr.toneMapping=_r.toneMapping}function PO(Hn,_r,xr,dr,Rr){_r.isScene!==!0&&(_r=ir),Tr.resetTextureUnits();const So=_r.fog,bo=dr.isMeshStandardMaterial?_r.environment:null,Lo=dn===null?ln.outputEncoding:dn.isXRRenderTarget===!0?dn.texture.encoding:LinearEncoding,Eo=(dr.isMeshStandardMaterial?Qr:Ir).get(dr.envMap||bo),Ao=dr.vertexColors===!0&&!!xr.attributes.color&&xr.attributes.color.itemSize===4,wo=!!dr.normalMap&&!!xr.attributes.tangent,Fr=!!xr.morphAttributes.position,_s=!!xr.morphAttributes.normal,Hs=!!xr.morphAttributes.color,El=dr.toneMapped?ln.toneMapping:NoToneMapping,au=xr.morphAttributes.position||xr.morphAttributes.normal||xr.morphAttributes.color,Bo=au!==void 0?au.length:0,yo=Jr.get(dr),os=Ut.state.lights;if(Ln===!0&&(Un===!0||Hn!==vn)){const Os=Hn===vn&&dr.id===gn;jn.setState(dr,Hn,Os)}let Ro=!1;dr.version===yo.__version?(yo.needsLights&&yo.lightsStateVersion!==os.state.version||yo.outputEncoding!==Lo||Rr.isInstancedMesh&&yo.instancing===!1||!Rr.isInstancedMesh&&yo.instancing===!0||Rr.isSkinnedMesh&&yo.skinning===!1||!Rr.isSkinnedMesh&&yo.skinning===!0||yo.envMap!==Eo||dr.fog===!0&&yo.fog!==So||yo.numClippingPlanes!==void 0&&(yo.numClippingPlanes!==jn.numPlanes||yo.numIntersection!==jn.numIntersection)||yo.vertexAlphas!==Ao||yo.vertexTangents!==wo||yo.morphTargets!==Fr||yo.morphNormals!==_s||yo.morphColors!==Hs||yo.toneMapping!==El||Gr.isWebGL2===!0&&yo.morphTargetsCount!==Bo)&&(Ro=!0):(Ro=!0,yo.__version=dr.version);let io=yo.currentProgram;Ro===!0&&(io=cs(dr,_r,Rr));let S_=!1,Xl=!1,lu=!1;const us=io.getUniforms(),Vr=yo.uniforms;if(Kr.useProgram(io.program)&&(S_=!0,Xl=!0,lu=!0),dr.id!==gn&&(gn=dr.id,Xl=!0),S_||vn!==Hn){if(us.setValue(Jn,"projectionMatrix",Hn.projectionMatrix),Gr.logarithmicDepthBuffer&&us.setValue(Jn,"logDepthBufFC",2/(Math.log(Hn.far+1)/Math.LN2)),vn!==Hn&&(vn=Hn,Xl=!0,lu=!0),dr.isShaderMaterial||dr.isMeshPhongMaterial||dr.isMeshToonMaterial||dr.isMeshStandardMaterial||dr.envMap){const Os=us.map.cameraPosition;Os!==void 0&&Os.setValue(Jn,In.setFromMatrixPosition(Hn.matrixWorld))}(dr.isMeshPhongMaterial||dr.isMeshToonMaterial||dr.isMeshLambertMaterial||dr.isMeshBasicMaterial||dr.isMeshStandardMaterial||dr.isShaderMaterial)&&us.setValue(Jn,"isOrthographic",Hn.isOrthographicCamera===!0),(dr.isMeshPhongMaterial||dr.isMeshToonMaterial||dr.isMeshLambertMaterial||dr.isMeshBasicMaterial||dr.isMeshStandardMaterial||dr.isShaderMaterial||dr.isShadowMaterial||Rr.isSkinnedMesh)&&us.setValue(Jn,"viewMatrix",Hn.matrixWorldInverse)}if(Rr.isSkinnedMesh){us.setOptional(Jn,Rr,"bindMatrix"),us.setOptional(Jn,Rr,"bindMatrixInverse");const Os=Rr.skeleton;Os&&(Gr.floatVertexTextures?(Os.boneTexture===null&&Os.computeBoneTexture(),us.setValue(Jn,"boneTexture",Os.boneTexture,Tr),us.setValue(Jn,"boneTextureSize",Os.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Yo=xr.morphAttributes;if((Yo.position!==void 0||Yo.normal!==void 0||Yo.color!==void 0&&Gr.isWebGL2===!0)&&Or.update(Rr,xr,io),(Xl||yo.receiveShadow!==Rr.receiveShadow)&&(yo.receiveShadow=Rr.receiveShadow,us.setValue(Jn,"receiveShadow",Rr.receiveShadow)),dr.isMeshGouraudMaterial&&dr.envMap!==null&&(Vr.envMap.value=Eo,Vr.flipEnvMap.value=Eo.isCubeTexture&&Eo.isRenderTargetTexture===!1?-1:1),Xl&&(us.setValue(Jn,"toneMappingExposure",ln.toneMappingExposure),yo.needsLights&&xo(Vr,lu),So&&dr.fog===!0&&uo.refreshFogUniforms(Vr,So),uo.refreshMaterialUniforms(Vr,dr,Pn,Rn,Vn),WebGLUniforms.upload(Jn,yo.uniformsList,Vr,Tr)),dr.isShaderMaterial&&dr.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(Jn,yo.uniformsList,Vr,Tr),dr.uniformsNeedUpdate=!1),dr.isSpriteMaterial&&us.setValue(Jn,"center",Rr.center),us.setValue(Jn,"modelViewMatrix",Rr.modelViewMatrix),us.setValue(Jn,"normalMatrix",Rr.normalMatrix),us.setValue(Jn,"modelMatrix",Rr.matrixWorld),dr.isShaderMaterial||dr.isRawShaderMaterial){const Os=dr.uniformsGroups;for(let ws=0,zs=Os.length;ws<zs;ws++)if(Gr.isWebGL2){const No=Os[ws];wr.update(No,io),wr.bind(No,io)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return io}function xo(Hn,_r){Hn.ambientLightColor.needsUpdate=_r,Hn.lightProbe.needsUpdate=_r,Hn.directionalLights.needsUpdate=_r,Hn.directionalLightShadows.needsUpdate=_r,Hn.pointLights.needsUpdate=_r,Hn.pointLightShadows.needsUpdate=_r,Hn.spotLights.needsUpdate=_r,Hn.spotLightShadows.needsUpdate=_r,Hn.rectAreaLights.needsUpdate=_r,Hn.hemisphereLights.needsUpdate=_r}function b_(Hn){return Hn.isMeshLambertMaterial||Hn.isMeshToonMaterial||Hn.isMeshPhongMaterial||Hn.isMeshStandardMaterial||Hn.isShadowMaterial||Hn.isShaderMaterial&&Hn.lights===!0}this.getActiveCubeFace=function(){return hn},this.getActiveMipmapLevel=function(){return pn},this.getRenderTarget=function(){return dn},this.setRenderTargetTextures=function(Hn,_r,xr){Jr.get(Hn.texture).__webglTexture=_r,Jr.get(Hn.depthTexture).__webglTexture=xr;const dr=Jr.get(Hn);dr.__hasExternalTextures=!0,dr.__hasExternalTextures&&(dr.__autoAllocateDepthBuffer=xr===void 0,dr.__autoAllocateDepthBuffer||br.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),dr.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Hn,_r){const xr=Jr.get(Hn);xr.__webglFramebuffer=_r,xr.__useDefaultFramebuffer=_r===void 0},this.setRenderTarget=function(Hn,_r=0,xr=0){dn=Hn,hn=_r,pn=xr;let dr=!0,Rr=null,So=!1,bo=!1;if(Hn){const Eo=Jr.get(Hn);Eo.__useDefaultFramebuffer!==void 0?(Kr.bindFramebuffer(36160,null),dr=!1):Eo.__webglFramebuffer===void 0?Tr.setupRenderTarget(Hn):Eo.__hasExternalTextures&&Tr.rebindTextures(Hn,Jr.get(Hn.texture).__webglTexture,Jr.get(Hn.depthTexture).__webglTexture);const Ao=Hn.texture;(Ao.isData3DTexture||Ao.isDataArrayTexture||Ao.isCompressedArrayTexture)&&(bo=!0);const wo=Jr.get(Hn).__webglFramebuffer;Hn.isWebGLCubeRenderTarget?(Rr=wo[_r],So=!0):Gr.isWebGL2&&Hn.samples>0&&Tr.useMultisampledRTT(Hn)===!1?Rr=Jr.get(Hn).__webglMultisampledFramebuffer:Rr=wo,Tn.copy(Hn.viewport),Cn.copy(Hn.scissor),$n=Hn.scissorTest}else Tn.copy(zn).multiplyScalar(Pn).floor(),Cn.copy(Yn).multiplyScalar(Pn).floor(),$n=Qn;if(Kr.bindFramebuffer(36160,Rr)&&Gr.drawBuffers&&dr&&Kr.drawBuffers(Hn,Rr),Kr.viewport(Tn),Kr.scissor(Cn),Kr.setScissorTest($n),So){const Eo=Jr.get(Hn.texture);Jn.framebufferTexture2D(36160,36064,34069+_r,Eo.__webglTexture,xr)}else if(bo){const Eo=Jr.get(Hn.texture),Ao=_r||0;Jn.framebufferTextureLayer(36160,36064,Eo.__webglTexture,xr||0,Ao)}gn=-1},this.readRenderTargetPixels=function(Hn,_r,xr,dr,Rr,So,bo){if(!(Hn&&Hn.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Lo=Jr.get(Hn).__webglFramebuffer;if(Hn.isWebGLCubeRenderTarget&&bo!==void 0&&(Lo=Lo[bo]),Lo){Kr.bindFramebuffer(36160,Lo);try{const Eo=Hn.texture,Ao=Eo.format,wo=Eo.type;if(Ao!==RGBAFormat&&fr.convert(Ao)!==Jn.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Fr=wo===HalfFloatType&&(br.has("EXT_color_buffer_half_float")||Gr.isWebGL2&&br.has("EXT_color_buffer_float"));if(wo!==UnsignedByteType&&fr.convert(wo)!==Jn.getParameter(35738)&&!(wo===FloatType&&(Gr.isWebGL2||br.has("OES_texture_float")||br.has("WEBGL_color_buffer_float")))&&!Fr){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}_r>=0&&_r<=Hn.width-dr&&xr>=0&&xr<=Hn.height-Rr&&Jn.readPixels(_r,xr,dr,Rr,fr.convert(Ao),fr.convert(wo),So)}finally{const Eo=dn!==null?Jr.get(dn).__webglFramebuffer:null;Kr.bindFramebuffer(36160,Eo)}}},this.copyFramebufferToTexture=function(Hn,_r,xr=0){const dr=Math.pow(2,-xr),Rr=Math.floor(_r.image.width*dr),So=Math.floor(_r.image.height*dr);Tr.setTexture2D(_r,0),Jn.copyTexSubImage2D(3553,xr,0,0,Hn.x,Hn.y,Rr,So),Kr.unbindTexture()},this.copyTextureToTexture=function(Hn,_r,xr,dr=0){const Rr=_r.image.width,So=_r.image.height,bo=fr.convert(xr.format),Lo=fr.convert(xr.type);Tr.setTexture2D(xr,0),Jn.pixelStorei(37440,xr.flipY),Jn.pixelStorei(37441,xr.premultiplyAlpha),Jn.pixelStorei(3317,xr.unpackAlignment),_r.isDataTexture?Jn.texSubImage2D(3553,dr,Hn.x,Hn.y,Rr,So,bo,Lo,_r.image.data):_r.isCompressedTexture?Jn.compressedTexSubImage2D(3553,dr,Hn.x,Hn.y,_r.mipmaps[0].width,_r.mipmaps[0].height,bo,_r.mipmaps[0].data):Jn.texSubImage2D(3553,dr,Hn.x,Hn.y,bo,Lo,_r.image),dr===0&&xr.generateMipmaps&&Jn.generateMipmap(3553),Kr.unbindTexture()},this.copyTextureToTexture3D=function(Hn,_r,xr,dr,Rr=0){if(ln.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const So=Hn.max.x-Hn.min.x+1,bo=Hn.max.y-Hn.min.y+1,Lo=Hn.max.z-Hn.min.z+1,Eo=fr.convert(dr.format),Ao=fr.convert(dr.type);let wo;if(dr.isData3DTexture)Tr.setTexture3D(dr,0),wo=32879;else if(dr.isDataArrayTexture)Tr.setTexture2DArray(dr,0),wo=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Jn.pixelStorei(37440,dr.flipY),Jn.pixelStorei(37441,dr.premultiplyAlpha),Jn.pixelStorei(3317,dr.unpackAlignment);const Fr=Jn.getParameter(3314),_s=Jn.getParameter(32878),Hs=Jn.getParameter(3316),El=Jn.getParameter(3315),au=Jn.getParameter(32877),Bo=xr.isCompressedTexture?xr.mipmaps[0]:xr.image;Jn.pixelStorei(3314,Bo.width),Jn.pixelStorei(32878,Bo.height),Jn.pixelStorei(3316,Hn.min.x),Jn.pixelStorei(3315,Hn.min.y),Jn.pixelStorei(32877,Hn.min.z),xr.isDataTexture||xr.isData3DTexture?Jn.texSubImage3D(wo,Rr,_r.x,_r.y,_r.z,So,bo,Lo,Eo,Ao,Bo.data):xr.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Jn.compressedTexSubImage3D(wo,Rr,_r.x,_r.y,_r.z,So,bo,Lo,Eo,Bo.data)):Jn.texSubImage3D(wo,Rr,_r.x,_r.y,_r.z,So,bo,Lo,Eo,Ao,Bo),Jn.pixelStorei(3314,Fr),Jn.pixelStorei(32878,_s),Jn.pixelStorei(3316,Hs),Jn.pixelStorei(3315,El),Jn.pixelStorei(32877,au),Rr===0&&dr.generateMipmaps&&Jn.generateMipmap(wo),Kr.unbindTexture()},this.initTexture=function(Hn){Hn.isCubeTexture?Tr.setTextureCube(Hn,0):Hn.isData3DTexture?Tr.setTexture3D(Hn,0):Hn.isDataArrayTexture||Hn.isCompressedArrayTexture?Tr.setTexture2DArray(Hn,0):Tr.setTexture2D(Hn,0),Kr.unbindTexture()},this.resetState=function(){hn=0,pn=0,dn=null,Kr.reset(),Yr.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Object.defineProperties(WebGLRenderer.prototype,{physicallyCorrectLights:{get:function(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights},set:function(dt){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!dt}}});class WebGL1Renderer extends WebGLRenderer{}WebGL1Renderer.prototype.isWebGL1Renderer=!0;class FogExp2{constructor($,lt=25e-5){this.isFogExp2=!0,this.name="",this.color=new Color($),this.density=lt}clone(){return new FogExp2(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class Fog{constructor($,lt=1,ft=1e3){this.isFog=!0,this.name="",this.color=new Color($),this.near=lt,this.far=ft}clone(){return new Fog(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Scene extends Object3D{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy($,lt){return super.copy($,lt),$.background!==null&&(this.background=$.background.clone()),$.environment!==null&&(this.environment=$.environment.clone()),$.fog!==null&&(this.fog=$.fog.clone()),this.backgroundBlurriness=$.backgroundBlurriness,this.backgroundIntensity=$.backgroundIntensity,$.overrideMaterial!==null&&(this.overrideMaterial=$.overrideMaterial.clone()),this.matrixAutoUpdate=$.matrixAutoUpdate,this}toJSON($){const lt=super.toJSON($);return this.fog!==null&&(lt.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(lt.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(lt.object.backgroundIntensity=this.backgroundIntensity),lt}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate($){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=$}}class InterleavedBuffer{constructor($,lt){this.isInterleavedBuffer=!0,this.array=$,this.stride=lt,this.count=$!==void 0?$.length/lt:0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=generateUUID()}onUploadCallback(){}set needsUpdate($){$===!0&&this.version++}setUsage($){return this.usage=$,this}copy($){return this.array=new $.array.constructor($.array),this.count=$.count,this.stride=$.stride,this.usage=$.usage,this}copyAt($,lt,ft){$*=this.stride,ft*=lt.stride;for(let St=0,Tt=this.stride;St<Tt;St++)this.array[$+St]=lt.array[ft+St];return this}set($,lt=0){return this.array.set($,lt),this}clone($){$.arrayBuffers===void 0&&($.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID()),$.arrayBuffers[this.array.buffer._uuid]===void 0&&($.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const lt=new this.array.constructor($.arrayBuffers[this.array.buffer._uuid]),ft=new this.constructor(lt,this.stride);return ft.setUsage(this.usage),ft}onUpload($){return this.onUploadCallback=$,this}toJSON($){return $.arrayBuffers===void 0&&($.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID()),$.arrayBuffers[this.array.buffer._uuid]===void 0&&($.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const _vector$6=new Vector3;class InterleavedBufferAttribute{constructor($,lt,ft,St=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=$,this.itemSize=lt,this.offset=ft,this.normalized=St}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate($){this.data.needsUpdate=$}applyMatrix4($){for(let lt=0,ft=this.data.count;lt<ft;lt++)_vector$6.fromBufferAttribute(this,lt),_vector$6.applyMatrix4($),this.setXYZ(lt,_vector$6.x,_vector$6.y,_vector$6.z);return this}applyNormalMatrix($){for(let lt=0,ft=this.count;lt<ft;lt++)_vector$6.fromBufferAttribute(this,lt),_vector$6.applyNormalMatrix($),this.setXYZ(lt,_vector$6.x,_vector$6.y,_vector$6.z);return this}transformDirection($){for(let lt=0,ft=this.count;lt<ft;lt++)_vector$6.fromBufferAttribute(this,lt),_vector$6.transformDirection($),this.setXYZ(lt,_vector$6.x,_vector$6.y,_vector$6.z);return this}setX($,lt){return this.normalized&&(lt=normalize(lt,this.array)),this.data.array[$*this.data.stride+this.offset]=lt,this}setY($,lt){return this.normalized&&(lt=normalize(lt,this.array)),this.data.array[$*this.data.stride+this.offset+1]=lt,this}setZ($,lt){return this.normalized&&(lt=normalize(lt,this.array)),this.data.array[$*this.data.stride+this.offset+2]=lt,this}setW($,lt){return this.normalized&&(lt=normalize(lt,this.array)),this.data.array[$*this.data.stride+this.offset+3]=lt,this}getX($){let lt=this.data.array[$*this.data.stride+this.offset];return this.normalized&&(lt=denormalize(lt,this.array)),lt}getY($){let lt=this.data.array[$*this.data.stride+this.offset+1];return this.normalized&&(lt=denormalize(lt,this.array)),lt}getZ($){let lt=this.data.array[$*this.data.stride+this.offset+2];return this.normalized&&(lt=denormalize(lt,this.array)),lt}getW($){let lt=this.data.array[$*this.data.stride+this.offset+3];return this.normalized&&(lt=denormalize(lt,this.array)),lt}setXY($,lt,ft){return $=$*this.data.stride+this.offset,this.normalized&&(lt=normalize(lt,this.array),ft=normalize(ft,this.array)),this.data.array[$+0]=lt,this.data.array[$+1]=ft,this}setXYZ($,lt,ft,St){return $=$*this.data.stride+this.offset,this.normalized&&(lt=normalize(lt,this.array),ft=normalize(ft,this.array),St=normalize(St,this.array)),this.data.array[$+0]=lt,this.data.array[$+1]=ft,this.data.array[$+2]=St,this}setXYZW($,lt,ft,St,Tt){return $=$*this.data.stride+this.offset,this.normalized&&(lt=normalize(lt,this.array),ft=normalize(ft,this.array),St=normalize(St,this.array),Tt=normalize(Tt,this.array)),this.data.array[$+0]=lt,this.data.array[$+1]=ft,this.data.array[$+2]=St,this.data.array[$+3]=Tt,this}clone($){if($===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const lt=[];for(let ft=0;ft<this.count;ft++){const St=ft*this.data.stride+this.offset;for(let Tt=0;Tt<this.itemSize;Tt++)lt.push(this.data.array[St+Tt])}return new BufferAttribute(new this.array.constructor(lt),this.itemSize,this.normalized)}else return $.interleavedBuffers===void 0&&($.interleavedBuffers={}),$.interleavedBuffers[this.data.uuid]===void 0&&($.interleavedBuffers[this.data.uuid]=this.data.clone($)),new InterleavedBufferAttribute($.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON($){if($===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const lt=[];for(let ft=0;ft<this.count;ft++){const St=ft*this.data.stride+this.offset;for(let Tt=0;Tt<this.itemSize;Tt++)lt.push(this.data.array[St+Tt])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:lt,normalized:this.normalized}}else return $.interleavedBuffers===void 0&&($.interleavedBuffers={}),$.interleavedBuffers[this.data.uuid]===void 0&&($.interleavedBuffers[this.data.uuid]=this.data.toJSON($)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class SpriteMaterial extends Material{constructor($){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues($)}copy($){return super.copy($),this.color.copy($.color),this.map=$.map,this.alphaMap=$.alphaMap,this.rotation=$.rotation,this.sizeAttenuation=$.sizeAttenuation,this.fog=$.fog,this}}let _geometry;const _intersectPoint=new Vector3,_worldScale=new Vector3,_mvPosition=new Vector3,_alignedPosition=new Vector2,_rotatedPosition=new Vector2,_viewWorldMatrix=new Matrix4,_vA=new Vector3,_vB=new Vector3,_vC=new Vector3,_uvA=new Vector2,_uvB=new Vector2,_uvC=new Vector2;class Sprite extends Object3D{constructor($){if(super(),this.isSprite=!0,this.type="Sprite",_geometry===void 0){_geometry=new BufferGeometry;const lt=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),ft=new InterleavedBuffer(lt,5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(ft,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(ft,2,3,!1))}this.geometry=_geometry,this.material=$!==void 0?$:new SpriteMaterial,this.center=new Vector2(.5,.5)}raycast($,lt){$.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy($.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices($.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),$.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_worldScale.multiplyScalar(-_mvPosition.z);const ft=this.material.rotation;let St,Tt;ft!==0&&(Tt=Math.cos(ft),St=Math.sin(ft));const Ct=this.center;transformVertex(_vA.set(-.5,-.5,0),_mvPosition,Ct,_worldScale,St,Tt),transformVertex(_vB.set(.5,-.5,0),_mvPosition,Ct,_worldScale,St,Tt),transformVertex(_vC.set(.5,.5,0),_mvPosition,Ct,_worldScale,St,Tt),_uvA.set(0,0),_uvB.set(1,0),_uvC.set(1,1);let At=$.ray.intersectTriangle(_vA,_vB,_vC,!1,_intersectPoint);if(At===null&&(transformVertex(_vB.set(-.5,.5,0),_mvPosition,Ct,_worldScale,St,Tt),_uvB.set(0,1),At=$.ray.intersectTriangle(_vA,_vC,_vB,!1,_intersectPoint),At===null))return;const Rt=$.ray.origin.distanceTo(_intersectPoint);Rt<$.near||Rt>$.far||lt.push({distance:Rt,point:_intersectPoint.clone(),uv:Triangle.getUV(_intersectPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2),face:null,object:this})}copy($,lt){return super.copy($,lt),$.center!==void 0&&this.center.copy($.center),this.material=$.material,this}}function transformVertex(dt,$,lt,ft,St,Tt){_alignedPosition.subVectors(dt,lt).addScalar(.5).multiply(ft),St!==void 0?(_rotatedPosition.x=Tt*_alignedPosition.x-St*_alignedPosition.y,_rotatedPosition.y=St*_alignedPosition.x+Tt*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),dt.copy($),dt.x+=_rotatedPosition.x,dt.y+=_rotatedPosition.y,dt.applyMatrix4(_viewWorldMatrix)}const _v1$2=new Vector3,_v2$1=new Vector3;class LOD extends Object3D{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy($){super.copy($,!1);const lt=$.levels;for(let ft=0,St=lt.length;ft<St;ft++){const Tt=lt[ft];this.addLevel(Tt.object.clone(),Tt.distance,Tt.hysteresis)}return this.autoUpdate=$.autoUpdate,this}addLevel($,lt=0,ft=0){lt=Math.abs(lt);const St=this.levels;let Tt;for(Tt=0;Tt<St.length&&!(lt<St[Tt].distance);Tt++);return St.splice(Tt,0,{distance:lt,hysteresis:ft,object:$}),this.add($),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance($){const lt=this.levels;if(lt.length>0){let ft,St;for(ft=1,St=lt.length;ft<St;ft++){let Tt=lt[ft].distance;if(lt[ft].object.visible&&(Tt-=Tt*lt[ft].hysteresis),$<Tt)break}return lt[ft-1].object}return null}raycast($,lt){if(this.levels.length>0){_v1$2.setFromMatrixPosition(this.matrixWorld);const St=$.ray.origin.distanceTo(_v1$2);this.getObjectForDistance(St).raycast($,lt)}}update($){const lt=this.levels;if(lt.length>1){_v1$2.setFromMatrixPosition($.matrixWorld),_v2$1.setFromMatrixPosition(this.matrixWorld);const ft=_v1$2.distanceTo(_v2$1)/$.zoom;lt[0].object.visible=!0;let St,Tt;for(St=1,Tt=lt.length;St<Tt;St++){let Ct=lt[St].distance;if(lt[St].object.visible&&(Ct-=Ct*lt[St].hysteresis),ft>=Ct)lt[St-1].object.visible=!1,lt[St].object.visible=!0;else break}for(this._currentLevel=St-1;St<Tt;St++)lt[St].object.visible=!1}}toJSON($){const lt=super.toJSON($);this.autoUpdate===!1&&(lt.object.autoUpdate=!1),lt.object.levels=[];const ft=this.levels;for(let St=0,Tt=ft.length;St<Tt;St++){const Ct=ft[St];lt.object.levels.push({object:Ct.object.uuid,distance:Ct.distance,hysteresis:Ct.hysteresis})}return lt}}const _basePosition=new Vector3,_skinIndex=new Vector4,_skinWeight=new Vector4,_vector$5=new Vector3,_matrix=new Matrix4;class SkinnedMesh extends Mesh{constructor($,lt){super($,lt),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4}copy($,lt){return super.copy($,lt),this.bindMode=$.bindMode,this.bindMatrix.copy($.bindMatrix),this.bindMatrixInverse.copy($.bindMatrixInverse),this.skeleton=$.skeleton,this}bind($,lt){this.skeleton=$,lt===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),lt=this.matrixWorld),this.bindMatrix.copy(lt),this.bindMatrixInverse.copy(lt).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const $=new Vector4,lt=this.geometry.attributes.skinWeight;for(let ft=0,St=lt.count;ft<St;ft++){$.fromBufferAttribute(lt,ft);const Tt=1/$.manhattanLength();Tt!==1/0?$.multiplyScalar(Tt):$.set(1,0,0,0),lt.setXYZW(ft,$.x,$.y,$.z,$.w)}}updateMatrixWorld($){super.updateMatrixWorld($),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform($,lt){const ft=this.skeleton,St=this.geometry;_skinIndex.fromBufferAttribute(St.attributes.skinIndex,$),_skinWeight.fromBufferAttribute(St.attributes.skinWeight,$),_basePosition.copy(lt).applyMatrix4(this.bindMatrix),lt.set(0,0,0);for(let Tt=0;Tt<4;Tt++){const Ct=_skinWeight.getComponent(Tt);if(Ct!==0){const At=_skinIndex.getComponent(Tt);_matrix.multiplyMatrices(ft.bones[At].matrixWorld,ft.boneInverses[At]),lt.addScaledVector(_vector$5.copy(_basePosition).applyMatrix4(_matrix),Ct)}}return lt.applyMatrix4(this.bindMatrixInverse)}}class Bone extends Object3D{constructor(){super(),this.isBone=!0,this.type="Bone"}}class DataTexture extends Texture{constructor($=null,lt=1,ft=1,St,Tt,Ct,At,Rt,kt=NearestFilter,Nt=NearestFilter,Bt,Ut){super(null,Ct,At,Rt,kt,Nt,St,Tt,Bt,Ut),this.isDataTexture=!0,this.image={data:$,width:lt,height:ft},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const _offsetMatrix=new Matrix4,_identityMatrix=new Matrix4;class Skeleton{constructor($=[],lt=[]){this.uuid=generateUUID(),this.bones=$.slice(0),this.boneInverses=lt,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const $=this.bones,lt=this.boneInverses;if(this.boneMatrices=new Float32Array($.length*16),lt.length===0)this.calculateInverses();else if($.length!==lt.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let ft=0,St=this.bones.length;ft<St;ft++)this.boneInverses.push(new Matrix4)}}calculateInverses(){this.boneInverses.length=0;for(let $=0,lt=this.bones.length;$<lt;$++){const ft=new Matrix4;this.bones[$]&&ft.copy(this.bones[$].matrixWorld).invert(),this.boneInverses.push(ft)}}pose(){for(let $=0,lt=this.bones.length;$<lt;$++){const ft=this.bones[$];ft&&ft.matrixWorld.copy(this.boneInverses[$]).invert()}for(let $=0,lt=this.bones.length;$<lt;$++){const ft=this.bones[$];ft&&(ft.parent&&ft.parent.isBone?(ft.matrix.copy(ft.parent.matrixWorld).invert(),ft.matrix.multiply(ft.matrixWorld)):ft.matrix.copy(ft.matrixWorld),ft.matrix.decompose(ft.position,ft.quaternion,ft.scale))}}update(){const $=this.bones,lt=this.boneInverses,ft=this.boneMatrices,St=this.boneTexture;for(let Tt=0,Ct=$.length;Tt<Ct;Tt++){const At=$[Tt]?$[Tt].matrixWorld:_identityMatrix;_offsetMatrix.multiplyMatrices(At,lt[Tt]),_offsetMatrix.toArray(ft,Tt*16)}St!==null&&(St.needsUpdate=!0)}clone(){return new Skeleton(this.bones,this.boneInverses)}computeBoneTexture(){let $=Math.sqrt(this.bones.length*4);$=ceilPowerOfTwo($),$=Math.max($,4);const lt=new Float32Array($*$*4);lt.set(this.boneMatrices);const ft=new DataTexture(lt,$,$,RGBAFormat,FloatType);return ft.needsUpdate=!0,this.boneMatrices=lt,this.boneTexture=ft,this.boneTextureSize=$,this}getBoneByName($){for(let lt=0,ft=this.bones.length;lt<ft;lt++){const St=this.bones[lt];if(St.name===$)return St}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON($,lt){this.uuid=$.uuid;for(let ft=0,St=$.bones.length;ft<St;ft++){const Tt=$.bones[ft];let Ct=lt[Tt];Ct===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",Tt),Ct=new Bone),this.bones.push(Ct),this.boneInverses.push(new Matrix4().fromArray($.boneInverses[ft]))}return this.init(),this}toJSON(){const $={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};$.uuid=this.uuid;const lt=this.bones,ft=this.boneInverses;for(let St=0,Tt=lt.length;St<Tt;St++){const Ct=lt[St];$.bones.push(Ct.uuid);const At=ft[St];$.boneInverses.push(At.toArray())}return $}}class InstancedBufferAttribute extends BufferAttribute{constructor($,lt,ft,St=1){super($,lt,ft),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=St}copy($){return super.copy($),this.meshPerAttribute=$.meshPerAttribute,this}toJSON(){const $=super.toJSON();return $.meshPerAttribute=this.meshPerAttribute,$.isInstancedBufferAttribute=!0,$}}const _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_identity=new Matrix4,_mesh=new Mesh;class InstancedMesh extends Mesh{constructor($,lt,ft){super($,lt),this.isInstancedMesh=!0,this.instanceMatrix=new InstancedBufferAttribute(new Float32Array(ft*16),16),this.instanceColor=null,this.count=ft,this.frustumCulled=!1;for(let St=0;St<ft;St++)this.setMatrixAt(St,_identity)}copy($,lt){return super.copy($,lt),this.instanceMatrix.copy($.instanceMatrix),$.instanceColor!==null&&(this.instanceColor=$.instanceColor.clone()),this.count=$.count,this}getColorAt($,lt){lt.fromArray(this.instanceColor.array,$*3)}getMatrixAt($,lt){lt.fromArray(this.instanceMatrix.array,$*16)}raycast($,lt){const ft=this.matrixWorld,St=this.count;if(_mesh.geometry=this.geometry,_mesh.material=this.material,_mesh.material!==void 0)for(let Tt=0;Tt<St;Tt++){this.getMatrixAt(Tt,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(ft,_instanceLocalMatrix),_mesh.matrixWorld=_instanceWorldMatrix,_mesh.raycast($,_instanceIntersects);for(let Ct=0,At=_instanceIntersects.length;Ct<At;Ct++){const Rt=_instanceIntersects[Ct];Rt.instanceId=Tt,Rt.object=this,lt.push(Rt)}_instanceIntersects.length=0}}setColorAt($,lt){this.instanceColor===null&&(this.instanceColor=new InstancedBufferAttribute(new Float32Array(this.instanceMatrix.count*3),3)),lt.toArray(this.instanceColor.array,$*3)}setMatrixAt($,lt){lt.toArray(this.instanceMatrix.array,$*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class LineBasicMaterial extends Material{constructor($){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues($)}copy($){return super.copy($),this.color.copy($.color),this.linewidth=$.linewidth,this.linecap=$.linecap,this.linejoin=$.linejoin,this.fog=$.fog,this}}const _start$1=new Vector3,_end$1=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray,_sphere$1=new Sphere$1;let Line$2=class extends Object3D{constructor($=new BufferGeometry,lt=new LineBasicMaterial){super(),this.isLine=!0,this.type="Line",this.geometry=$,this.material=lt,this.updateMorphTargets()}copy($,lt){return super.copy($,lt),this.material=$.material,this.geometry=$.geometry,this}computeLineDistances(){const $=this.geometry;if($.index===null){const lt=$.attributes.position,ft=[0];for(let St=1,Tt=lt.count;St<Tt;St++)_start$1.fromBufferAttribute(lt,St-1),_end$1.fromBufferAttribute(lt,St),ft[St]=ft[St-1],ft[St]+=_start$1.distanceTo(_end$1);$.setAttribute("lineDistance",new Float32BufferAttribute(ft,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast($,lt){const ft=this.geometry,St=this.matrixWorld,Tt=$.params.Line.threshold,Ct=ft.drawRange;if(ft.boundingSphere===null&&ft.computeBoundingSphere(),_sphere$1.copy(ft.boundingSphere),_sphere$1.applyMatrix4(St),_sphere$1.radius+=Tt,$.ray.intersectsSphere(_sphere$1)===!1)return;_inverseMatrix$1.copy(St).invert(),_ray$1.copy($.ray).applyMatrix4(_inverseMatrix$1);const At=Tt/((this.scale.x+this.scale.y+this.scale.z)/3),Rt=At*At,kt=new Vector3,Nt=new Vector3,Bt=new Vector3,Ut=new Vector3,zt=this.isLineSegments?2:1,Zt=ft.index,cn=ft.attributes.position;if(Zt!==null){const hn=Math.max(0,Ct.start),pn=Math.min(Zt.count,Ct.start+Ct.count);for(let dn=hn,gn=pn-1;dn<gn;dn+=zt){const vn=Zt.getX(dn),Tn=Zt.getX(dn+1);if(kt.fromBufferAttribute(cn,vn),Nt.fromBufferAttribute(cn,Tn),_ray$1.distanceSqToSegment(kt,Nt,Ut,Bt)>Rt)continue;Ut.applyMatrix4(this.matrixWorld);const $n=$.ray.origin.distanceTo(Ut);$n<$.near||$n>$.far||lt.push({distance:$n,point:Bt.clone().applyMatrix4(this.matrixWorld),index:dn,face:null,faceIndex:null,object:this})}}else{const hn=Math.max(0,Ct.start),pn=Math.min(cn.count,Ct.start+Ct.count);for(let dn=hn,gn=pn-1;dn<gn;dn+=zt){if(kt.fromBufferAttribute(cn,dn),Nt.fromBufferAttribute(cn,dn+1),_ray$1.distanceSqToSegment(kt,Nt,Ut,Bt)>Rt)continue;Ut.applyMatrix4(this.matrixWorld);const Tn=$.ray.origin.distanceTo(Ut);Tn<$.near||Tn>$.far||lt.push({distance:Tn,point:Bt.clone().applyMatrix4(this.matrixWorld),index:dn,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const lt=this.geometry.morphAttributes,ft=Object.keys(lt);if(ft.length>0){const St=lt[ft[0]];if(St!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let Tt=0,Ct=St.length;Tt<Ct;Tt++){const At=St[Tt].name||String(Tt);this.morphTargetInfluences.push(0),this.morphTargetDictionary[At]=Tt}}}}};const _start$2=new Vector3,_end$2=new Vector3;class LineSegments extends Line$2{constructor($,lt){super($,lt),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const $=this.geometry;if($.index===null){const lt=$.attributes.position,ft=[];for(let St=0,Tt=lt.count;St<Tt;St+=2)_start$2.fromBufferAttribute(lt,St),_end$2.fromBufferAttribute(lt,St+1),ft[St]=St===0?0:ft[St-1],ft[St+1]=ft[St]+_start$2.distanceTo(_end$2);$.setAttribute("lineDistance",new Float32BufferAttribute(ft,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class LineLoop extends Line$2{constructor($,lt){super($,lt),this.isLineLoop=!0,this.type="LineLoop"}}class PointsMaterial extends Material{constructor($){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues($)}copy($){return super.copy($),this.color.copy($.color),this.map=$.map,this.alphaMap=$.alphaMap,this.size=$.size,this.sizeAttenuation=$.sizeAttenuation,this.fog=$.fog,this}}const _inverseMatrix=new Matrix4,_ray$3=new Ray,_sphere$4=new Sphere$1,_position$2=new Vector3;class Points extends Object3D{constructor($=new BufferGeometry,lt=new PointsMaterial){super(),this.isPoints=!0,this.type="Points",this.geometry=$,this.material=lt,this.updateMorphTargets()}copy($,lt){return super.copy($,lt),this.material=$.material,this.geometry=$.geometry,this}raycast($,lt){const ft=this.geometry,St=this.matrixWorld,Tt=$.params.Points.threshold,Ct=ft.drawRange;if(ft.boundingSphere===null&&ft.computeBoundingSphere(),_sphere$4.copy(ft.boundingSphere),_sphere$4.applyMatrix4(St),_sphere$4.radius+=Tt,$.ray.intersectsSphere(_sphere$4)===!1)return;_inverseMatrix.copy(St).invert(),_ray$3.copy($.ray).applyMatrix4(_inverseMatrix);const At=Tt/((this.scale.x+this.scale.y+this.scale.z)/3),Rt=At*At,kt=ft.index,Bt=ft.attributes.position;if(kt!==null){const Ut=Math.max(0,Ct.start),zt=Math.min(kt.count,Ct.start+Ct.count);for(let Zt=Ut,ln=zt;Zt<ln;Zt++){const cn=kt.getX(Zt);_position$2.fromBufferAttribute(Bt,cn),testPoint(_position$2,cn,Rt,St,$,lt,this)}}else{const Ut=Math.max(0,Ct.start),zt=Math.min(Bt.count,Ct.start+Ct.count);for(let Zt=Ut,ln=zt;Zt<ln;Zt++)_position$2.fromBufferAttribute(Bt,Zt),testPoint(_position$2,Zt,Rt,St,$,lt,this)}}updateMorphTargets(){const lt=this.geometry.morphAttributes,ft=Object.keys(lt);if(ft.length>0){const St=lt[ft[0]];if(St!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let Tt=0,Ct=St.length;Tt<Ct;Tt++){const At=St[Tt].name||String(Tt);this.morphTargetInfluences.push(0),this.morphTargetDictionary[At]=Tt}}}}}function testPoint(dt,$,lt,ft,St,Tt,Ct){const At=_ray$3.distanceSqToPoint(dt);if(At<lt){const Rt=new Vector3;_ray$3.closestPointToPoint(dt,Rt),Rt.applyMatrix4(ft);const kt=St.ray.origin.distanceTo(Rt);if(kt<St.near||kt>St.far)return;Tt.push({distance:kt,distanceToRay:Math.sqrt(At),point:Rt,index:$,face:null,object:Ct})}}class VideoTexture extends Texture{constructor($,lt,ft,St,Tt,Ct,At,Rt,kt){super($,lt,ft,St,Tt,Ct,At,Rt,kt),this.isVideoTexture=!0,this.minFilter=Ct!==void 0?Ct:LinearFilter,this.magFilter=Tt!==void 0?Tt:LinearFilter,this.generateMipmaps=!1;const Nt=this;function Bt(){Nt.needsUpdate=!0,$.requestVideoFrameCallback(Bt)}"requestVideoFrameCallback"in $&&$.requestVideoFrameCallback(Bt)}clone(){return new this.constructor(this.image).copy(this)}update(){const $=this.image;"requestVideoFrameCallback"in $===!1&&$.readyState>=$.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class FramebufferTexture extends Texture{constructor($,lt,ft){super({width:$,height:lt}),this.isFramebufferTexture=!0,this.format=ft,this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.generateMipmaps=!1,this.needsUpdate=!0}}class CompressedTexture extends Texture{constructor($,lt,ft,St,Tt,Ct,At,Rt,kt,Nt,Bt,Ut){super(null,Ct,At,Rt,kt,Nt,St,Tt,Bt,Ut),this.isCompressedTexture=!0,this.image={width:lt,height:ft},this.mipmaps=$,this.flipY=!1,this.generateMipmaps=!1}}class CompressedArrayTexture extends CompressedTexture{constructor($,lt,ft,St,Tt,Ct){super($,lt,ft,Tt,Ct),this.isCompressedArrayTexture=!0,this.image.depth=St,this.wrapR=ClampToEdgeWrapping}}class CanvasTexture extends Texture{constructor($,lt,ft,St,Tt,Ct,At,Rt,kt){super($,lt,ft,St,Tt,Ct,At,Rt,kt),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Curve{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt($,lt){const ft=this.getUtoTmapping($);return this.getPoint(ft,lt)}getPoints($=5){const lt=[];for(let ft=0;ft<=$;ft++)lt.push(this.getPoint(ft/$));return lt}getSpacedPoints($=5){const lt=[];for(let ft=0;ft<=$;ft++)lt.push(this.getPointAt(ft/$));return lt}getLength(){const $=this.getLengths();return $[$.length-1]}getLengths($=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===$+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const lt=[];let ft,St=this.getPoint(0),Tt=0;lt.push(0);for(let Ct=1;Ct<=$;Ct++)ft=this.getPoint(Ct/$),Tt+=ft.distanceTo(St),lt.push(Tt),St=ft;return this.cacheArcLengths=lt,lt}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping($,lt){const ft=this.getLengths();let St=0;const Tt=ft.length;let Ct;lt?Ct=lt:Ct=$*ft[Tt-1];let At=0,Rt=Tt-1,kt;for(;At<=Rt;)if(St=Math.floor(At+(Rt-At)/2),kt=ft[St]-Ct,kt<0)At=St+1;else if(kt>0)Rt=St-1;else{Rt=St;break}if(St=Rt,ft[St]===Ct)return St/(Tt-1);const Nt=ft[St],Ut=ft[St+1]-Nt,zt=(Ct-Nt)/Ut;return(St+zt)/(Tt-1)}getTangent($,lt){let St=$-1e-4,Tt=$+1e-4;St<0&&(St=0),Tt>1&&(Tt=1);const Ct=this.getPoint(St),At=this.getPoint(Tt),Rt=lt||(Ct.isVector2?new Vector2:new Vector3);return Rt.copy(At).sub(Ct).normalize(),Rt}getTangentAt($,lt){const ft=this.getUtoTmapping($);return this.getTangent(ft,lt)}computeFrenetFrames($,lt){const ft=new Vector3,St=[],Tt=[],Ct=[],At=new Vector3,Rt=new Matrix4;for(let zt=0;zt<=$;zt++){const Zt=zt/$;St[zt]=this.getTangentAt(Zt,new Vector3)}Tt[0]=new Vector3,Ct[0]=new Vector3;let kt=Number.MAX_VALUE;const Nt=Math.abs(St[0].x),Bt=Math.abs(St[0].y),Ut=Math.abs(St[0].z);Nt<=kt&&(kt=Nt,ft.set(1,0,0)),Bt<=kt&&(kt=Bt,ft.set(0,1,0)),Ut<=kt&&ft.set(0,0,1),At.crossVectors(St[0],ft).normalize(),Tt[0].crossVectors(St[0],At),Ct[0].crossVectors(St[0],Tt[0]);for(let zt=1;zt<=$;zt++){if(Tt[zt]=Tt[zt-1].clone(),Ct[zt]=Ct[zt-1].clone(),At.crossVectors(St[zt-1],St[zt]),At.length()>Number.EPSILON){At.normalize();const Zt=Math.acos(clamp$1(St[zt-1].dot(St[zt]),-1,1));Tt[zt].applyMatrix4(Rt.makeRotationAxis(At,Zt))}Ct[zt].crossVectors(St[zt],Tt[zt])}if(lt===!0){let zt=Math.acos(clamp$1(Tt[0].dot(Tt[$]),-1,1));zt/=$,St[0].dot(At.crossVectors(Tt[0],Tt[$]))>0&&(zt=-zt);for(let Zt=1;Zt<=$;Zt++)Tt[Zt].applyMatrix4(Rt.makeRotationAxis(St[Zt],zt*Zt)),Ct[Zt].crossVectors(St[Zt],Tt[Zt])}return{tangents:St,normals:Tt,binormals:Ct}}clone(){return new this.constructor().copy(this)}copy($){return this.arcLengthDivisions=$.arcLengthDivisions,this}toJSON(){const $={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return $.arcLengthDivisions=this.arcLengthDivisions,$.type=this.type,$}fromJSON($){return this.arcLengthDivisions=$.arcLengthDivisions,this}}class EllipseCurve extends Curve{constructor($=0,lt=0,ft=1,St=1,Tt=0,Ct=Math.PI*2,At=!1,Rt=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=$,this.aY=lt,this.xRadius=ft,this.yRadius=St,this.aStartAngle=Tt,this.aEndAngle=Ct,this.aClockwise=At,this.aRotation=Rt}getPoint($,lt){const ft=lt||new Vector2,St=Math.PI*2;let Tt=this.aEndAngle-this.aStartAngle;const Ct=Math.abs(Tt)<Number.EPSILON;for(;Tt<0;)Tt+=St;for(;Tt>St;)Tt-=St;Tt<Number.EPSILON&&(Ct?Tt=0:Tt=St),this.aClockwise===!0&&!Ct&&(Tt===St?Tt=-St:Tt=Tt-St);const At=this.aStartAngle+$*Tt;let Rt=this.aX+this.xRadius*Math.cos(At),kt=this.aY+this.yRadius*Math.sin(At);if(this.aRotation!==0){const Nt=Math.cos(this.aRotation),Bt=Math.sin(this.aRotation),Ut=Rt-this.aX,zt=kt-this.aY;Rt=Ut*Nt-zt*Bt+this.aX,kt=Ut*Bt+zt*Nt+this.aY}return ft.set(Rt,kt)}copy($){return super.copy($),this.aX=$.aX,this.aY=$.aY,this.xRadius=$.xRadius,this.yRadius=$.yRadius,this.aStartAngle=$.aStartAngle,this.aEndAngle=$.aEndAngle,this.aClockwise=$.aClockwise,this.aRotation=$.aRotation,this}toJSON(){const $=super.toJSON();return $.aX=this.aX,$.aY=this.aY,$.xRadius=this.xRadius,$.yRadius=this.yRadius,$.aStartAngle=this.aStartAngle,$.aEndAngle=this.aEndAngle,$.aClockwise=this.aClockwise,$.aRotation=this.aRotation,$}fromJSON($){return super.fromJSON($),this.aX=$.aX,this.aY=$.aY,this.xRadius=$.xRadius,this.yRadius=$.yRadius,this.aStartAngle=$.aStartAngle,this.aEndAngle=$.aEndAngle,this.aClockwise=$.aClockwise,this.aRotation=$.aRotation,this}}class ArcCurve extends EllipseCurve{constructor($,lt,ft,St,Tt,Ct){super($,lt,ft,ft,St,Tt,Ct),this.isArcCurve=!0,this.type="ArcCurve"}}function CubicPoly(){let dt=0,$=0,lt=0,ft=0;function St(Tt,Ct,At,Rt){dt=Tt,$=At,lt=-3*Tt+3*Ct-2*At-Rt,ft=2*Tt-2*Ct+At+Rt}return{initCatmullRom:function(Tt,Ct,At,Rt,kt){St(Ct,At,kt*(At-Tt),kt*(Rt-Ct))},initNonuniformCatmullRom:function(Tt,Ct,At,Rt,kt,Nt,Bt){let Ut=(Ct-Tt)/kt-(At-Tt)/(kt+Nt)+(At-Ct)/Nt,zt=(At-Ct)/Nt-(Rt-Ct)/(Nt+Bt)+(Rt-At)/Bt;Ut*=Nt,zt*=Nt,St(Ct,At,Ut,zt)},calc:function(Tt){const Ct=Tt*Tt,At=Ct*Tt;return dt+$*Tt+lt*Ct+ft*At}}}const tmp=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;class CatmullRomCurve3 extends Curve{constructor($=[],lt=!1,ft="centripetal",St=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=$,this.closed=lt,this.curveType=ft,this.tension=St}getPoint($,lt=new Vector3){const ft=lt,St=this.points,Tt=St.length,Ct=(Tt-(this.closed?0:1))*$;let At=Math.floor(Ct),Rt=Ct-At;this.closed?At+=At>0?0:(Math.floor(Math.abs(At)/Tt)+1)*Tt:Rt===0&&At===Tt-1&&(At=Tt-2,Rt=1);let kt,Nt;this.closed||At>0?kt=St[(At-1)%Tt]:(tmp.subVectors(St[0],St[1]).add(St[0]),kt=tmp);const Bt=St[At%Tt],Ut=St[(At+1)%Tt];if(this.closed||At+2<Tt?Nt=St[(At+2)%Tt]:(tmp.subVectors(St[Tt-1],St[Tt-2]).add(St[Tt-1]),Nt=tmp),this.curveType==="centripetal"||this.curveType==="chordal"){const zt=this.curveType==="chordal"?.5:.25;let Zt=Math.pow(kt.distanceToSquared(Bt),zt),ln=Math.pow(Bt.distanceToSquared(Ut),zt),cn=Math.pow(Ut.distanceToSquared(Nt),zt);ln<1e-4&&(ln=1),Zt<1e-4&&(Zt=ln),cn<1e-4&&(cn=ln),px.initNonuniformCatmullRom(kt.x,Bt.x,Ut.x,Nt.x,Zt,ln,cn),py.initNonuniformCatmullRom(kt.y,Bt.y,Ut.y,Nt.y,Zt,ln,cn),pz.initNonuniformCatmullRom(kt.z,Bt.z,Ut.z,Nt.z,Zt,ln,cn)}else this.curveType==="catmullrom"&&(px.initCatmullRom(kt.x,Bt.x,Ut.x,Nt.x,this.tension),py.initCatmullRom(kt.y,Bt.y,Ut.y,Nt.y,this.tension),pz.initCatmullRom(kt.z,Bt.z,Ut.z,Nt.z,this.tension));return ft.set(px.calc(Rt),py.calc(Rt),pz.calc(Rt)),ft}copy($){super.copy($),this.points=[];for(let lt=0,ft=$.points.length;lt<ft;lt++){const St=$.points[lt];this.points.push(St.clone())}return this.closed=$.closed,this.curveType=$.curveType,this.tension=$.tension,this}toJSON(){const $=super.toJSON();$.points=[];for(let lt=0,ft=this.points.length;lt<ft;lt++){const St=this.points[lt];$.points.push(St.toArray())}return $.closed=this.closed,$.curveType=this.curveType,$.tension=this.tension,$}fromJSON($){super.fromJSON($),this.points=[];for(let lt=0,ft=$.points.length;lt<ft;lt++){const St=$.points[lt];this.points.push(new Vector3().fromArray(St))}return this.closed=$.closed,this.curveType=$.curveType,this.tension=$.tension,this}}function CatmullRom(dt,$,lt,ft,St){const Tt=(ft-$)*.5,Ct=(St-lt)*.5,At=dt*dt,Rt=dt*At;return(2*lt-2*ft+Tt+Ct)*Rt+(-3*lt+3*ft-2*Tt-Ct)*At+Tt*dt+lt}function QuadraticBezierP0(dt,$){const lt=1-dt;return lt*lt*$}function QuadraticBezierP1(dt,$){return 2*(1-dt)*dt*$}function QuadraticBezierP2(dt,$){return dt*dt*$}function QuadraticBezier(dt,$,lt,ft){return QuadraticBezierP0(dt,$)+QuadraticBezierP1(dt,lt)+QuadraticBezierP2(dt,ft)}function CubicBezierP0(dt,$){const lt=1-dt;return lt*lt*lt*$}function CubicBezierP1(dt,$){const lt=1-dt;return 3*lt*lt*dt*$}function CubicBezierP2(dt,$){return 3*(1-dt)*dt*dt*$}function CubicBezierP3(dt,$){return dt*dt*dt*$}function CubicBezier(dt,$,lt,ft,St){return CubicBezierP0(dt,$)+CubicBezierP1(dt,lt)+CubicBezierP2(dt,ft)+CubicBezierP3(dt,St)}class CubicBezierCurve extends Curve{constructor($=new Vector2,lt=new Vector2,ft=new Vector2,St=new Vector2){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=$,this.v1=lt,this.v2=ft,this.v3=St}getPoint($,lt=new Vector2){const ft=lt,St=this.v0,Tt=this.v1,Ct=this.v2,At=this.v3;return ft.set(CubicBezier($,St.x,Tt.x,Ct.x,At.x),CubicBezier($,St.y,Tt.y,Ct.y,At.y)),ft}copy($){return super.copy($),this.v0.copy($.v0),this.v1.copy($.v1),this.v2.copy($.v2),this.v3.copy($.v3),this}toJSON(){const $=super.toJSON();return $.v0=this.v0.toArray(),$.v1=this.v1.toArray(),$.v2=this.v2.toArray(),$.v3=this.v3.toArray(),$}fromJSON($){return super.fromJSON($),this.v0.fromArray($.v0),this.v1.fromArray($.v1),this.v2.fromArray($.v2),this.v3.fromArray($.v3),this}}class CubicBezierCurve3 extends Curve{constructor($=new Vector3,lt=new Vector3,ft=new Vector3,St=new Vector3){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=$,this.v1=lt,this.v2=ft,this.v3=St}getPoint($,lt=new Vector3){const ft=lt,St=this.v0,Tt=this.v1,Ct=this.v2,At=this.v3;return ft.set(CubicBezier($,St.x,Tt.x,Ct.x,At.x),CubicBezier($,St.y,Tt.y,Ct.y,At.y),CubicBezier($,St.z,Tt.z,Ct.z,At.z)),ft}copy($){return super.copy($),this.v0.copy($.v0),this.v1.copy($.v1),this.v2.copy($.v2),this.v3.copy($.v3),this}toJSON(){const $=super.toJSON();return $.v0=this.v0.toArray(),$.v1=this.v1.toArray(),$.v2=this.v2.toArray(),$.v3=this.v3.toArray(),$}fromJSON($){return super.fromJSON($),this.v0.fromArray($.v0),this.v1.fromArray($.v1),this.v2.fromArray($.v2),this.v3.fromArray($.v3),this}}class LineCurve extends Curve{constructor($=new Vector2,lt=new Vector2){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=$,this.v2=lt}getPoint($,lt=new Vector2){const ft=lt;return $===1?ft.copy(this.v2):(ft.copy(this.v2).sub(this.v1),ft.multiplyScalar($).add(this.v1)),ft}getPointAt($,lt){return this.getPoint($,lt)}getTangent($,lt=new Vector2){return lt.subVectors(this.v2,this.v1).normalize()}getTangentAt($,lt){return this.getTangent($,lt)}copy($){return super.copy($),this.v1.copy($.v1),this.v2.copy($.v2),this}toJSON(){const $=super.toJSON();return $.v1=this.v1.toArray(),$.v2=this.v2.toArray(),$}fromJSON($){return super.fromJSON($),this.v1.fromArray($.v1),this.v2.fromArray($.v2),this}}class LineCurve3 extends Curve{constructor($=new Vector3,lt=new Vector3){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=$,this.v2=lt}getPoint($,lt=new Vector3){const ft=lt;return $===1?ft.copy(this.v2):(ft.copy(this.v2).sub(this.v1),ft.multiplyScalar($).add(this.v1)),ft}getPointAt($,lt){return this.getPoint($,lt)}getTangent($,lt=new Vector3){return lt.subVectors(this.v2,this.v1).normalize()}getTangentAt($,lt){return this.getTangent($,lt)}copy($){return super.copy($),this.v1.copy($.v1),this.v2.copy($.v2),this}toJSON(){const $=super.toJSON();return $.v1=this.v1.toArray(),$.v2=this.v2.toArray(),$}fromJSON($){return super.fromJSON($),this.v1.fromArray($.v1),this.v2.fromArray($.v2),this}}class QuadraticBezierCurve extends Curve{constructor($=new Vector2,lt=new Vector2,ft=new Vector2){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=$,this.v1=lt,this.v2=ft}getPoint($,lt=new Vector2){const ft=lt,St=this.v0,Tt=this.v1,Ct=this.v2;return ft.set(QuadraticBezier($,St.x,Tt.x,Ct.x),QuadraticBezier($,St.y,Tt.y,Ct.y)),ft}copy($){return super.copy($),this.v0.copy($.v0),this.v1.copy($.v1),this.v2.copy($.v2),this}toJSON(){const $=super.toJSON();return $.v0=this.v0.toArray(),$.v1=this.v1.toArray(),$.v2=this.v2.toArray(),$}fromJSON($){return super.fromJSON($),this.v0.fromArray($.v0),this.v1.fromArray($.v1),this.v2.fromArray($.v2),this}}class QuadraticBezierCurve3 extends Curve{constructor($=new Vector3,lt=new Vector3,ft=new Vector3){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=$,this.v1=lt,this.v2=ft}getPoint($,lt=new Vector3){const ft=lt,St=this.v0,Tt=this.v1,Ct=this.v2;return ft.set(QuadraticBezier($,St.x,Tt.x,Ct.x),QuadraticBezier($,St.y,Tt.y,Ct.y),QuadraticBezier($,St.z,Tt.z,Ct.z)),ft}copy($){return super.copy($),this.v0.copy($.v0),this.v1.copy($.v1),this.v2.copy($.v2),this}toJSON(){const $=super.toJSON();return $.v0=this.v0.toArray(),$.v1=this.v1.toArray(),$.v2=this.v2.toArray(),$}fromJSON($){return super.fromJSON($),this.v0.fromArray($.v0),this.v1.fromArray($.v1),this.v2.fromArray($.v2),this}}class SplineCurve extends Curve{constructor($=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=$}getPoint($,lt=new Vector2){const ft=lt,St=this.points,Tt=(St.length-1)*$,Ct=Math.floor(Tt),At=Tt-Ct,Rt=St[Ct===0?Ct:Ct-1],kt=St[Ct],Nt=St[Ct>St.length-2?St.length-1:Ct+1],Bt=St[Ct>St.length-3?St.length-1:Ct+2];return ft.set(CatmullRom(At,Rt.x,kt.x,Nt.x,Bt.x),CatmullRom(At,Rt.y,kt.y,Nt.y,Bt.y)),ft}copy($){super.copy($),this.points=[];for(let lt=0,ft=$.points.length;lt<ft;lt++){const St=$.points[lt];this.points.push(St.clone())}return this}toJSON(){const $=super.toJSON();$.points=[];for(let lt=0,ft=this.points.length;lt<ft;lt++){const St=this.points[lt];$.points.push(St.toArray())}return $}fromJSON($){super.fromJSON($),this.points=[];for(let lt=0,ft=$.points.length;lt<ft;lt++){const St=$.points[lt];this.points.push(new Vector2().fromArray(St))}return this}}var Curves=Object.freeze({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve});class CurvePath extends Curve{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add($){this.curves.push($)}closePath(){const $=this.curves[0].getPoint(0),lt=this.curves[this.curves.length-1].getPoint(1);$.equals(lt)||this.curves.push(new LineCurve(lt,$))}getPoint($,lt){const ft=$*this.getLength(),St=this.getCurveLengths();let Tt=0;for(;Tt<St.length;){if(St[Tt]>=ft){const Ct=St[Tt]-ft,At=this.curves[Tt],Rt=At.getLength(),kt=Rt===0?0:1-Ct/Rt;return At.getPointAt(kt,lt)}Tt++}return null}getLength(){const $=this.getCurveLengths();return $[$.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const $=[];let lt=0;for(let ft=0,St=this.curves.length;ft<St;ft++)lt+=this.curves[ft].getLength(),$.push(lt);return this.cacheLengths=$,$}getSpacedPoints($=40){const lt=[];for(let ft=0;ft<=$;ft++)lt.push(this.getPoint(ft/$));return this.autoClose&&lt.push(lt[0]),lt}getPoints($=12){const lt=[];let ft;for(let St=0,Tt=this.curves;St<Tt.length;St++){const Ct=Tt[St],At=Ct.isEllipseCurve?$*2:Ct.isLineCurve||Ct.isLineCurve3?1:Ct.isSplineCurve?$*Ct.points.length:$,Rt=Ct.getPoints(At);for(let kt=0;kt<Rt.length;kt++){const Nt=Rt[kt];ft&&ft.equals(Nt)||(lt.push(Nt),ft=Nt)}}return this.autoClose&&lt.length>1&&!lt[lt.length-1].equals(lt[0])&&lt.push(lt[0]),lt}copy($){super.copy($),this.curves=[];for(let lt=0,ft=$.curves.length;lt<ft;lt++){const St=$.curves[lt];this.curves.push(St.clone())}return this.autoClose=$.autoClose,this}toJSON(){const $=super.toJSON();$.autoClose=this.autoClose,$.curves=[];for(let lt=0,ft=this.curves.length;lt<ft;lt++){const St=this.curves[lt];$.curves.push(St.toJSON())}return $}fromJSON($){super.fromJSON($),this.autoClose=$.autoClose,this.curves=[];for(let lt=0,ft=$.curves.length;lt<ft;lt++){const St=$.curves[lt];this.curves.push(new Curves[St.type]().fromJSON(St))}return this}}class Path extends CurvePath{constructor($){super(),this.type="Path",this.currentPoint=new Vector2,$&&this.setFromPoints($)}setFromPoints($){this.moveTo($[0].x,$[0].y);for(let lt=1,ft=$.length;lt<ft;lt++)this.lineTo($[lt].x,$[lt].y);return this}moveTo($,lt){return this.currentPoint.set($,lt),this}lineTo($,lt){const ft=new LineCurve(this.currentPoint.clone(),new Vector2($,lt));return this.curves.push(ft),this.currentPoint.set($,lt),this}quadraticCurveTo($,lt,ft,St){const Tt=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2($,lt),new Vector2(ft,St));return this.curves.push(Tt),this.currentPoint.set(ft,St),this}bezierCurveTo($,lt,ft,St,Tt,Ct){const At=new CubicBezierCurve(this.currentPoint.clone(),new Vector2($,lt),new Vector2(ft,St),new Vector2(Tt,Ct));return this.curves.push(At),this.currentPoint.set(Tt,Ct),this}splineThru($){const lt=[this.currentPoint.clone()].concat($),ft=new SplineCurve(lt);return this.curves.push(ft),this.currentPoint.copy($[$.length-1]),this}arc($,lt,ft,St,Tt,Ct){const At=this.currentPoint.x,Rt=this.currentPoint.y;return this.absarc($+At,lt+Rt,ft,St,Tt,Ct),this}absarc($,lt,ft,St,Tt,Ct){return this.absellipse($,lt,ft,ft,St,Tt,Ct),this}ellipse($,lt,ft,St,Tt,Ct,At,Rt){const kt=this.currentPoint.x,Nt=this.currentPoint.y;return this.absellipse($+kt,lt+Nt,ft,St,Tt,Ct,At,Rt),this}absellipse($,lt,ft,St,Tt,Ct,At,Rt){const kt=new EllipseCurve($,lt,ft,St,Tt,Ct,At,Rt);if(this.curves.length>0){const Bt=kt.getPoint(0);Bt.equals(this.currentPoint)||this.lineTo(Bt.x,Bt.y)}this.curves.push(kt);const Nt=kt.getPoint(1);return this.currentPoint.copy(Nt),this}copy($){return super.copy($),this.currentPoint.copy($.currentPoint),this}toJSON(){const $=super.toJSON();return $.currentPoint=this.currentPoint.toArray(),$}fromJSON($){return super.fromJSON($),this.currentPoint.fromArray($.currentPoint),this}}class LatheGeometry extends BufferGeometry{constructor($=[new Vector2(0,-.5),new Vector2(.5,0),new Vector2(0,.5)],lt=12,ft=0,St=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:$,segments:lt,phiStart:ft,phiLength:St},lt=Math.floor(lt),St=clamp$1(St,0,Math.PI*2);const Tt=[],Ct=[],At=[],Rt=[],kt=[],Nt=1/lt,Bt=new Vector3,Ut=new Vector2,zt=new Vector3,Zt=new Vector3,ln=new Vector3;let cn=0,hn=0;for(let pn=0;pn<=$.length-1;pn++)switch(pn){case 0:cn=$[pn+1].x-$[pn].x,hn=$[pn+1].y-$[pn].y,zt.x=hn*1,zt.y=-cn,zt.z=hn*0,ln.copy(zt),zt.normalize(),Rt.push(zt.x,zt.y,zt.z);break;case $.length-1:Rt.push(ln.x,ln.y,ln.z);break;default:cn=$[pn+1].x-$[pn].x,hn=$[pn+1].y-$[pn].y,zt.x=hn*1,zt.y=-cn,zt.z=hn*0,Zt.copy(zt),zt.x+=ln.x,zt.y+=ln.y,zt.z+=ln.z,zt.normalize(),Rt.push(zt.x,zt.y,zt.z),ln.copy(Zt)}for(let pn=0;pn<=lt;pn++){const dn=ft+pn*Nt*St,gn=Math.sin(dn),vn=Math.cos(dn);for(let Tn=0;Tn<=$.length-1;Tn++){Bt.x=$[Tn].x*gn,Bt.y=$[Tn].y,Bt.z=$[Tn].x*vn,Ct.push(Bt.x,Bt.y,Bt.z),Ut.x=pn/lt,Ut.y=Tn/($.length-1),At.push(Ut.x,Ut.y);const Cn=Rt[3*Tn+0]*gn,$n=Rt[3*Tn+1],xn=Rt[3*Tn+0]*vn;kt.push(Cn,$n,xn)}}for(let pn=0;pn<lt;pn++)for(let dn=0;dn<$.length-1;dn++){const gn=dn+pn*$.length,vn=gn,Tn=gn+$.length,Cn=gn+$.length+1,$n=gn+1;Tt.push(vn,Tn,$n),Tt.push(Cn,$n,Tn)}this.setIndex(Tt),this.setAttribute("position",new Float32BufferAttribute(Ct,3)),this.setAttribute("uv",new Float32BufferAttribute(At,2)),this.setAttribute("normal",new Float32BufferAttribute(kt,3))}copy($){return super.copy($),this.parameters=Object.assign({},$.parameters),this}static fromJSON($){return new LatheGeometry($.points,$.segments,$.phiStart,$.phiLength)}}class CapsuleGeometry extends LatheGeometry{constructor($=1,lt=1,ft=4,St=8){const Tt=new Path;Tt.absarc(0,-lt/2,$,Math.PI*1.5,0),Tt.absarc(0,lt/2,$,0,Math.PI*.5),super(Tt.getPoints(ft),St),this.type="CapsuleGeometry",this.parameters={radius:$,height:lt,capSegments:ft,radialSegments:St}}static fromJSON($){return new CapsuleGeometry($.radius,$.length,$.capSegments,$.radialSegments)}}class CircleGeometry extends BufferGeometry{constructor($=1,lt=32,ft=0,St=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:$,segments:lt,thetaStart:ft,thetaLength:St},lt=Math.max(3,lt);const Tt=[],Ct=[],At=[],Rt=[],kt=new Vector3,Nt=new Vector2;Ct.push(0,0,0),At.push(0,0,1),Rt.push(.5,.5);for(let Bt=0,Ut=3;Bt<=lt;Bt++,Ut+=3){const zt=ft+Bt/lt*St;kt.x=$*Math.cos(zt),kt.y=$*Math.sin(zt),Ct.push(kt.x,kt.y,kt.z),At.push(0,0,1),Nt.x=(Ct[Ut]/$+1)/2,Nt.y=(Ct[Ut+1]/$+1)/2,Rt.push(Nt.x,Nt.y)}for(let Bt=1;Bt<=lt;Bt++)Tt.push(Bt,Bt+1,0);this.setIndex(Tt),this.setAttribute("position",new Float32BufferAttribute(Ct,3)),this.setAttribute("normal",new Float32BufferAttribute(At,3)),this.setAttribute("uv",new Float32BufferAttribute(Rt,2))}copy($){return super.copy($),this.parameters=Object.assign({},$.parameters),this}static fromJSON($){return new CircleGeometry($.radius,$.segments,$.thetaStart,$.thetaLength)}}class CylinderGeometry extends BufferGeometry{constructor($=1,lt=1,ft=1,St=32,Tt=1,Ct=!1,At=0,Rt=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:$,radiusBottom:lt,height:ft,radialSegments:St,heightSegments:Tt,openEnded:Ct,thetaStart:At,thetaLength:Rt};const kt=this;St=Math.floor(St),Tt=Math.floor(Tt);const Nt=[],Bt=[],Ut=[],zt=[];let Zt=0;const ln=[],cn=ft/2;let hn=0;pn(),Ct===!1&&($>0&&dn(!0),lt>0&&dn(!1)),this.setIndex(Nt),this.setAttribute("position",new Float32BufferAttribute(Bt,3)),this.setAttribute("normal",new Float32BufferAttribute(Ut,3)),this.setAttribute("uv",new Float32BufferAttribute(zt,2));function pn(){const gn=new Vector3,vn=new Vector3;let Tn=0;const Cn=(lt-$)/ft;for(let $n=0;$n<=Tt;$n++){const xn=[],Rn=$n/Tt,Pn=Rn*(lt-$)+$;for(let Nn=0;Nn<=St;Nn++){const Wn=Nn/St,zn=Wn*Rt+At,Yn=Math.sin(zn),Qn=Math.cos(zn);vn.x=Pn*Yn,vn.y=-Rn*ft+cn,vn.z=Pn*Qn,Bt.push(vn.x,vn.y,vn.z),gn.set(Yn,Cn,Qn).normalize(),Ut.push(gn.x,gn.y,gn.z),zt.push(Wn,1-Rn),xn.push(Zt++)}ln.push(xn)}for(let $n=0;$n<St;$n++)for(let xn=0;xn<Tt;xn++){const Rn=ln[xn][$n],Pn=ln[xn+1][$n],Nn=ln[xn+1][$n+1],Wn=ln[xn][$n+1];Nt.push(Rn,Pn,Wn),Nt.push(Pn,Nn,Wn),Tn+=6}kt.addGroup(hn,Tn,0),hn+=Tn}function dn(gn){const vn=Zt,Tn=new Vector2,Cn=new Vector3;let $n=0;const xn=gn===!0?$:lt,Rn=gn===!0?1:-1;for(let Nn=1;Nn<=St;Nn++)Bt.push(0,cn*Rn,0),Ut.push(0,Rn,0),zt.push(.5,.5),Zt++;const Pn=Zt;for(let Nn=0;Nn<=St;Nn++){const zn=Nn/St*Rt+At,Yn=Math.cos(zn),Qn=Math.sin(zn);Cn.x=xn*Qn,Cn.y=cn*Rn,Cn.z=xn*Yn,Bt.push(Cn.x,Cn.y,Cn.z),Ut.push(0,Rn,0),Tn.x=Yn*.5+.5,Tn.y=Qn*.5*Rn+.5,zt.push(Tn.x,Tn.y),Zt++}for(let Nn=0;Nn<St;Nn++){const Wn=vn+Nn,zn=Pn+Nn;gn===!0?Nt.push(zn,zn+1,Wn):Nt.push(zn+1,zn,Wn),$n+=3}kt.addGroup(hn,$n,gn===!0?1:2),hn+=$n}}copy($){return super.copy($),this.parameters=Object.assign({},$.parameters),this}static fromJSON($){return new CylinderGeometry($.radiusTop,$.radiusBottom,$.height,$.radialSegments,$.heightSegments,$.openEnded,$.thetaStart,$.thetaLength)}}class ConeGeometry extends CylinderGeometry{constructor($=1,lt=1,ft=32,St=1,Tt=!1,Ct=0,At=Math.PI*2){super(0,$,lt,ft,St,Tt,Ct,At),this.type="ConeGeometry",this.parameters={radius:$,height:lt,radialSegments:ft,heightSegments:St,openEnded:Tt,thetaStart:Ct,thetaLength:At}}static fromJSON($){return new ConeGeometry($.radius,$.height,$.radialSegments,$.heightSegments,$.openEnded,$.thetaStart,$.thetaLength)}}class PolyhedronGeometry extends BufferGeometry{constructor($=[],lt=[],ft=1,St=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:$,indices:lt,radius:ft,detail:St};const Tt=[],Ct=[];At(St),kt(ft),Nt(),this.setAttribute("position",new Float32BufferAttribute(Tt,3)),this.setAttribute("normal",new Float32BufferAttribute(Tt.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(Ct,2)),St===0?this.computeVertexNormals():this.normalizeNormals();function At(pn){const dn=new Vector3,gn=new Vector3,vn=new Vector3;for(let Tn=0;Tn<lt.length;Tn+=3)zt(lt[Tn+0],dn),zt(lt[Tn+1],gn),zt(lt[Tn+2],vn),Rt(dn,gn,vn,pn)}function Rt(pn,dn,gn,vn){const Tn=vn+1,Cn=[];for(let $n=0;$n<=Tn;$n++){Cn[$n]=[];const xn=pn.clone().lerp(gn,$n/Tn),Rn=dn.clone().lerp(gn,$n/Tn),Pn=Tn-$n;for(let Nn=0;Nn<=Pn;Nn++)Nn===0&&$n===Tn?Cn[$n][Nn]=xn:Cn[$n][Nn]=xn.clone().lerp(Rn,Nn/Pn)}for(let $n=0;$n<Tn;$n++)for(let xn=0;xn<2*(Tn-$n)-1;xn++){const Rn=Math.floor(xn/2);xn%2===0?(Ut(Cn[$n][Rn+1]),Ut(Cn[$n+1][Rn]),Ut(Cn[$n][Rn])):(Ut(Cn[$n][Rn+1]),Ut(Cn[$n+1][Rn+1]),Ut(Cn[$n+1][Rn]))}}function kt(pn){const dn=new Vector3;for(let gn=0;gn<Tt.length;gn+=3)dn.x=Tt[gn+0],dn.y=Tt[gn+1],dn.z=Tt[gn+2],dn.normalize().multiplyScalar(pn),Tt[gn+0]=dn.x,Tt[gn+1]=dn.y,Tt[gn+2]=dn.z}function Nt(){const pn=new Vector3;for(let dn=0;dn<Tt.length;dn+=3){pn.x=Tt[dn+0],pn.y=Tt[dn+1],pn.z=Tt[dn+2];const gn=cn(pn)/2/Math.PI+.5,vn=hn(pn)/Math.PI+.5;Ct.push(gn,1-vn)}Zt(),Bt()}function Bt(){for(let pn=0;pn<Ct.length;pn+=6){const dn=Ct[pn+0],gn=Ct[pn+2],vn=Ct[pn+4],Tn=Math.max(dn,gn,vn),Cn=Math.min(dn,gn,vn);Tn>.9&&Cn<.1&&(dn<.2&&(Ct[pn+0]+=1),gn<.2&&(Ct[pn+2]+=1),vn<.2&&(Ct[pn+4]+=1))}}function Ut(pn){Tt.push(pn.x,pn.y,pn.z)}function zt(pn,dn){const gn=pn*3;dn.x=$[gn+0],dn.y=$[gn+1],dn.z=$[gn+2]}function Zt(){const pn=new Vector3,dn=new Vector3,gn=new Vector3,vn=new Vector3,Tn=new Vector2,Cn=new Vector2,$n=new Vector2;for(let xn=0,Rn=0;xn<Tt.length;xn+=9,Rn+=6){pn.set(Tt[xn+0],Tt[xn+1],Tt[xn+2]),dn.set(Tt[xn+3],Tt[xn+4],Tt[xn+5]),gn.set(Tt[xn+6],Tt[xn+7],Tt[xn+8]),Tn.set(Ct[Rn+0],Ct[Rn+1]),Cn.set(Ct[Rn+2],Ct[Rn+3]),$n.set(Ct[Rn+4],Ct[Rn+5]),vn.copy(pn).add(dn).add(gn).divideScalar(3);const Pn=cn(vn);ln(Tn,Rn+0,pn,Pn),ln(Cn,Rn+2,dn,Pn),ln($n,Rn+4,gn,Pn)}}function ln(pn,dn,gn,vn){vn<0&&pn.x===1&&(Ct[dn]=pn.x-1),gn.x===0&&gn.z===0&&(Ct[dn]=vn/2/Math.PI+.5)}function cn(pn){return Math.atan2(pn.z,-pn.x)}function hn(pn){return Math.atan2(-pn.y,Math.sqrt(pn.x*pn.x+pn.z*pn.z))}}copy($){return super.copy($),this.parameters=Object.assign({},$.parameters),this}static fromJSON($){return new PolyhedronGeometry($.vertices,$.indices,$.radius,$.details)}}class DodecahedronGeometry extends PolyhedronGeometry{constructor($=1,lt=0){const ft=(1+Math.sqrt(5))/2,St=1/ft,Tt=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-St,-ft,0,-St,ft,0,St,-ft,0,St,ft,-St,-ft,0,-St,ft,0,St,-ft,0,St,ft,0,-ft,0,-St,ft,0,-St,-ft,0,St,ft,0,St],Ct=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(Tt,Ct,$,lt),this.type="DodecahedronGeometry",this.parameters={radius:$,detail:lt}}static fromJSON($){return new DodecahedronGeometry($.radius,$.detail)}}const _v0=new Vector3,_v1$1=new Vector3,_normal=new Vector3,_triangle=new Triangle;class EdgesGeometry extends BufferGeometry{constructor($=null,lt=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:$,thresholdAngle:lt},$!==null){const St=Math.pow(10,4),Tt=Math.cos(DEG2RAD*lt),Ct=$.getIndex(),At=$.getAttribute("position"),Rt=Ct?Ct.count:At.count,kt=[0,0,0],Nt=["a","b","c"],Bt=new Array(3),Ut={},zt=[];for(let Zt=0;Zt<Rt;Zt+=3){Ct?(kt[0]=Ct.getX(Zt),kt[1]=Ct.getX(Zt+1),kt[2]=Ct.getX(Zt+2)):(kt[0]=Zt,kt[1]=Zt+1,kt[2]=Zt+2);const{a:ln,b:cn,c:hn}=_triangle;if(ln.fromBufferAttribute(At,kt[0]),cn.fromBufferAttribute(At,kt[1]),hn.fromBufferAttribute(At,kt[2]),_triangle.getNormal(_normal),Bt[0]=`${Math.round(ln.x*St)},${Math.round(ln.y*St)},${Math.round(ln.z*St)}`,Bt[1]=`${Math.round(cn.x*St)},${Math.round(cn.y*St)},${Math.round(cn.z*St)}`,Bt[2]=`${Math.round(hn.x*St)},${Math.round(hn.y*St)},${Math.round(hn.z*St)}`,!(Bt[0]===Bt[1]||Bt[1]===Bt[2]||Bt[2]===Bt[0]))for(let pn=0;pn<3;pn++){const dn=(pn+1)%3,gn=Bt[pn],vn=Bt[dn],Tn=_triangle[Nt[pn]],Cn=_triangle[Nt[dn]],$n=`${gn}_${vn}`,xn=`${vn}_${gn}`;xn in Ut&&Ut[xn]?(_normal.dot(Ut[xn].normal)<=Tt&&(zt.push(Tn.x,Tn.y,Tn.z),zt.push(Cn.x,Cn.y,Cn.z)),Ut[xn]=null):$n in Ut||(Ut[$n]={index0:kt[pn],index1:kt[dn],normal:_normal.clone()})}}for(const Zt in Ut)if(Ut[Zt]){const{index0:ln,index1:cn}=Ut[Zt];_v0.fromBufferAttribute(At,ln),_v1$1.fromBufferAttribute(At,cn),zt.push(_v0.x,_v0.y,_v0.z),zt.push(_v1$1.x,_v1$1.y,_v1$1.z)}this.setAttribute("position",new Float32BufferAttribute(zt,3))}}copy($){return super.copy($),this.parameters=Object.assign({},$.parameters),this}}class Shape extends Path{constructor($){super($),this.uuid=generateUUID(),this.type="Shape",this.holes=[]}getPointsHoles($){const lt=[];for(let ft=0,St=this.holes.length;ft<St;ft++)lt[ft]=this.holes[ft].getPoints($);return lt}extractPoints($){return{shape:this.getPoints($),holes:this.getPointsHoles($)}}copy($){super.copy($),this.holes=[];for(let lt=0,ft=$.holes.length;lt<ft;lt++){const St=$.holes[lt];this.holes.push(St.clone())}return this}toJSON(){const $=super.toJSON();$.uuid=this.uuid,$.holes=[];for(let lt=0,ft=this.holes.length;lt<ft;lt++){const St=this.holes[lt];$.holes.push(St.toJSON())}return $}fromJSON($){super.fromJSON($),this.uuid=$.uuid,this.holes=[];for(let lt=0,ft=$.holes.length;lt<ft;lt++){const St=$.holes[lt];this.holes.push(new Path().fromJSON(St))}return this}}const Earcut={triangulate:function(dt,$,lt=2){const ft=$&&$.length,St=ft?$[0]*lt:dt.length;let Tt=linkedList(dt,0,St,lt,!0);const Ct=[];if(!Tt||Tt.next===Tt.prev)return Ct;let At,Rt,kt,Nt,Bt,Ut,zt;if(ft&&(Tt=eliminateHoles(dt,$,Tt,lt)),dt.length>80*lt){At=kt=dt[0],Rt=Nt=dt[1];for(let Zt=lt;Zt<St;Zt+=lt)Bt=dt[Zt],Ut=dt[Zt+1],Bt<At&&(At=Bt),Ut<Rt&&(Rt=Ut),Bt>kt&&(kt=Bt),Ut>Nt&&(Nt=Ut);zt=Math.max(kt-At,Nt-Rt),zt=zt!==0?32767/zt:0}return earcutLinked(Tt,Ct,lt,At,Rt,zt,0),Ct}};function linkedList(dt,$,lt,ft,St){let Tt,Ct;if(St===signedArea(dt,$,lt,ft)>0)for(Tt=$;Tt<lt;Tt+=ft)Ct=insertNode(Tt,dt[Tt],dt[Tt+1],Ct);else for(Tt=lt-ft;Tt>=$;Tt-=ft)Ct=insertNode(Tt,dt[Tt],dt[Tt+1],Ct);return Ct&&equals(Ct,Ct.next)&&(removeNode(Ct),Ct=Ct.next),Ct}function filterPoints(dt,$){if(!dt)return dt;$||($=dt);let lt=dt,ft;do if(ft=!1,!lt.steiner&&(equals(lt,lt.next)||area(lt.prev,lt,lt.next)===0)){if(removeNode(lt),lt=$=lt.prev,lt===lt.next)break;ft=!0}else lt=lt.next;while(ft||lt!==$);return $}function earcutLinked(dt,$,lt,ft,St,Tt,Ct){if(!dt)return;!Ct&&Tt&&indexCurve(dt,ft,St,Tt);let At=dt,Rt,kt;for(;dt.prev!==dt.next;){if(Rt=dt.prev,kt=dt.next,Tt?isEarHashed(dt,ft,St,Tt):isEar(dt)){$.push(Rt.i/lt|0),$.push(dt.i/lt|0),$.push(kt.i/lt|0),removeNode(dt),dt=kt.next,At=kt.next;continue}if(dt=kt,dt===At){Ct?Ct===1?(dt=cureLocalIntersections(filterPoints(dt),$,lt),earcutLinked(dt,$,lt,ft,St,Tt,2)):Ct===2&&splitEarcut(dt,$,lt,ft,St,Tt):earcutLinked(filterPoints(dt),$,lt,ft,St,Tt,1);break}}}function isEar(dt){const $=dt.prev,lt=dt,ft=dt.next;if(area($,lt,ft)>=0)return!1;const St=$.x,Tt=lt.x,Ct=ft.x,At=$.y,Rt=lt.y,kt=ft.y,Nt=St<Tt?St<Ct?St:Ct:Tt<Ct?Tt:Ct,Bt=At<Rt?At<kt?At:kt:Rt<kt?Rt:kt,Ut=St>Tt?St>Ct?St:Ct:Tt>Ct?Tt:Ct,zt=At>Rt?At>kt?At:kt:Rt>kt?Rt:kt;let Zt=ft.next;for(;Zt!==$;){if(Zt.x>=Nt&&Zt.x<=Ut&&Zt.y>=Bt&&Zt.y<=zt&&pointInTriangle(St,At,Tt,Rt,Ct,kt,Zt.x,Zt.y)&&area(Zt.prev,Zt,Zt.next)>=0)return!1;Zt=Zt.next}return!0}function isEarHashed(dt,$,lt,ft){const St=dt.prev,Tt=dt,Ct=dt.next;if(area(St,Tt,Ct)>=0)return!1;const At=St.x,Rt=Tt.x,kt=Ct.x,Nt=St.y,Bt=Tt.y,Ut=Ct.y,zt=At<Rt?At<kt?At:kt:Rt<kt?Rt:kt,Zt=Nt<Bt?Nt<Ut?Nt:Ut:Bt<Ut?Bt:Ut,ln=At>Rt?At>kt?At:kt:Rt>kt?Rt:kt,cn=Nt>Bt?Nt>Ut?Nt:Ut:Bt>Ut?Bt:Ut,hn=zOrder(zt,Zt,$,lt,ft),pn=zOrder(ln,cn,$,lt,ft);let dn=dt.prevZ,gn=dt.nextZ;for(;dn&&dn.z>=hn&&gn&&gn.z<=pn;){if(dn.x>=zt&&dn.x<=ln&&dn.y>=Zt&&dn.y<=cn&&dn!==St&&dn!==Ct&&pointInTriangle(At,Nt,Rt,Bt,kt,Ut,dn.x,dn.y)&&area(dn.prev,dn,dn.next)>=0||(dn=dn.prevZ,gn.x>=zt&&gn.x<=ln&&gn.y>=Zt&&gn.y<=cn&&gn!==St&&gn!==Ct&&pointInTriangle(At,Nt,Rt,Bt,kt,Ut,gn.x,gn.y)&&area(gn.prev,gn,gn.next)>=0))return!1;gn=gn.nextZ}for(;dn&&dn.z>=hn;){if(dn.x>=zt&&dn.x<=ln&&dn.y>=Zt&&dn.y<=cn&&dn!==St&&dn!==Ct&&pointInTriangle(At,Nt,Rt,Bt,kt,Ut,dn.x,dn.y)&&area(dn.prev,dn,dn.next)>=0)return!1;dn=dn.prevZ}for(;gn&&gn.z<=pn;){if(gn.x>=zt&&gn.x<=ln&&gn.y>=Zt&&gn.y<=cn&&gn!==St&&gn!==Ct&&pointInTriangle(At,Nt,Rt,Bt,kt,Ut,gn.x,gn.y)&&area(gn.prev,gn,gn.next)>=0)return!1;gn=gn.nextZ}return!0}function cureLocalIntersections(dt,$,lt){let ft=dt;do{const St=ft.prev,Tt=ft.next.next;!equals(St,Tt)&&intersects(St,ft,ft.next,Tt)&&locallyInside(St,Tt)&&locallyInside(Tt,St)&&($.push(St.i/lt|0),$.push(ft.i/lt|0),$.push(Tt.i/lt|0),removeNode(ft),removeNode(ft.next),ft=dt=Tt),ft=ft.next}while(ft!==dt);return filterPoints(ft)}function splitEarcut(dt,$,lt,ft,St,Tt){let Ct=dt;do{let At=Ct.next.next;for(;At!==Ct.prev;){if(Ct.i!==At.i&&isValidDiagonal(Ct,At)){let Rt=splitPolygon(Ct,At);Ct=filterPoints(Ct,Ct.next),Rt=filterPoints(Rt,Rt.next),earcutLinked(Ct,$,lt,ft,St,Tt,0),earcutLinked(Rt,$,lt,ft,St,Tt,0);return}At=At.next}Ct=Ct.next}while(Ct!==dt)}function eliminateHoles(dt,$,lt,ft){const St=[];let Tt,Ct,At,Rt,kt;for(Tt=0,Ct=$.length;Tt<Ct;Tt++)At=$[Tt]*ft,Rt=Tt<Ct-1?$[Tt+1]*ft:dt.length,kt=linkedList(dt,At,Rt,ft,!1),kt===kt.next&&(kt.steiner=!0),St.push(getLeftmost(kt));for(St.sort(compareX),Tt=0;Tt<St.length;Tt++)lt=eliminateHole(St[Tt],lt);return lt}function compareX(dt,$){return dt.x-$.x}function eliminateHole(dt,$){const lt=findHoleBridge(dt,$);if(!lt)return $;const ft=splitPolygon(lt,dt);return filterPoints(ft,ft.next),filterPoints(lt,lt.next)}function findHoleBridge(dt,$){let lt=$,ft=-1/0,St;const Tt=dt.x,Ct=dt.y;do{if(Ct<=lt.y&&Ct>=lt.next.y&&lt.next.y!==lt.y){const Ut=lt.x+(Ct-lt.y)*(lt.next.x-lt.x)/(lt.next.y-lt.y);if(Ut<=Tt&&Ut>ft&&(ft=Ut,St=lt.x<lt.next.x?lt:lt.next,Ut===Tt))return St}lt=lt.next}while(lt!==$);if(!St)return null;const At=St,Rt=St.x,kt=St.y;let Nt=1/0,Bt;lt=St;do Tt>=lt.x&&lt.x>=Rt&&Tt!==lt.x&&pointInTriangle(Ct<kt?Tt:ft,Ct,Rt,kt,Ct<kt?ft:Tt,Ct,lt.x,lt.y)&&(Bt=Math.abs(Ct-lt.y)/(Tt-lt.x),locallyInside(lt,dt)&&(Bt<Nt||Bt===Nt&&(lt.x>St.x||lt.x===St.x&&sectorContainsSector(St,lt)))&&(St=lt,Nt=Bt)),lt=lt.next;while(lt!==At);return St}function sectorContainsSector(dt,$){return area(dt.prev,dt,$.prev)<0&&area($.next,dt,dt.next)<0}function indexCurve(dt,$,lt,ft){let St=dt;do St.z===0&&(St.z=zOrder(St.x,St.y,$,lt,ft)),St.prevZ=St.prev,St.nextZ=St.next,St=St.next;while(St!==dt);St.prevZ.nextZ=null,St.prevZ=null,sortLinked(St)}function sortLinked(dt){let $,lt,ft,St,Tt,Ct,At,Rt,kt=1;do{for(lt=dt,dt=null,Tt=null,Ct=0;lt;){for(Ct++,ft=lt,At=0,$=0;$<kt&&(At++,ft=ft.nextZ,!!ft);$++);for(Rt=kt;At>0||Rt>0&&ft;)At!==0&&(Rt===0||!ft||lt.z<=ft.z)?(St=lt,lt=lt.nextZ,At--):(St=ft,ft=ft.nextZ,Rt--),Tt?Tt.nextZ=St:dt=St,St.prevZ=Tt,Tt=St;lt=ft}Tt.nextZ=null,kt*=2}while(Ct>1);return dt}function zOrder(dt,$,lt,ft,St){return dt=(dt-lt)*St|0,$=($-ft)*St|0,dt=(dt|dt<<8)&16711935,dt=(dt|dt<<4)&252645135,dt=(dt|dt<<2)&858993459,dt=(dt|dt<<1)&1431655765,$=($|$<<8)&16711935,$=($|$<<4)&252645135,$=($|$<<2)&858993459,$=($|$<<1)&1431655765,dt|$<<1}function getLeftmost(dt){let $=dt,lt=dt;do($.x<lt.x||$.x===lt.x&&$.y<lt.y)&&(lt=$),$=$.next;while($!==dt);return lt}function pointInTriangle(dt,$,lt,ft,St,Tt,Ct,At){return(St-Ct)*($-At)>=(dt-Ct)*(Tt-At)&&(dt-Ct)*(ft-At)>=(lt-Ct)*($-At)&&(lt-Ct)*(Tt-At)>=(St-Ct)*(ft-At)}function isValidDiagonal(dt,$){return dt.next.i!==$.i&&dt.prev.i!==$.i&&!intersectsPolygon(dt,$)&&(locallyInside(dt,$)&&locallyInside($,dt)&&middleInside(dt,$)&&(area(dt.prev,dt,$.prev)||area(dt,$.prev,$))||equals(dt,$)&&area(dt.prev,dt,dt.next)>0&&area($.prev,$,$.next)>0)}function area(dt,$,lt){return($.y-dt.y)*(lt.x-$.x)-($.x-dt.x)*(lt.y-$.y)}function equals(dt,$){return dt.x===$.x&&dt.y===$.y}function intersects(dt,$,lt,ft){const St=sign(area(dt,$,lt)),Tt=sign(area(dt,$,ft)),Ct=sign(area(lt,ft,dt)),At=sign(area(lt,ft,$));return!!(St!==Tt&&Ct!==At||St===0&&onSegment(dt,lt,$)||Tt===0&&onSegment(dt,ft,$)||Ct===0&&onSegment(lt,dt,ft)||At===0&&onSegment(lt,$,ft))}function onSegment(dt,$,lt){return $.x<=Math.max(dt.x,lt.x)&&$.x>=Math.min(dt.x,lt.x)&&$.y<=Math.max(dt.y,lt.y)&&$.y>=Math.min(dt.y,lt.y)}function sign(dt){return dt>0?1:dt<0?-1:0}function intersectsPolygon(dt,$){let lt=dt;do{if(lt.i!==dt.i&&lt.next.i!==dt.i&&lt.i!==$.i&&lt.next.i!==$.i&&intersects(lt,lt.next,dt,$))return!0;lt=lt.next}while(lt!==dt);return!1}function locallyInside(dt,$){return area(dt.prev,dt,dt.next)<0?area(dt,$,dt.next)>=0&&area(dt,dt.prev,$)>=0:area(dt,$,dt.prev)<0||area(dt,dt.next,$)<0}function middleInside(dt,$){let lt=dt,ft=!1;const St=(dt.x+$.x)/2,Tt=(dt.y+$.y)/2;do lt.y>Tt!=lt.next.y>Tt&&lt.next.y!==lt.y&&St<(lt.next.x-lt.x)*(Tt-lt.y)/(lt.next.y-lt.y)+lt.x&&(ft=!ft),lt=lt.next;while(lt!==dt);return ft}function splitPolygon(dt,$){const lt=new Node$1(dt.i,dt.x,dt.y),ft=new Node$1($.i,$.x,$.y),St=dt.next,Tt=$.prev;return dt.next=$,$.prev=dt,lt.next=St,St.prev=lt,ft.next=lt,lt.prev=ft,Tt.next=ft,ft.prev=Tt,ft}function insertNode(dt,$,lt,ft){const St=new Node$1(dt,$,lt);return ft?(St.next=ft.next,St.prev=ft,ft.next.prev=St,ft.next=St):(St.prev=St,St.next=St),St}function removeNode(dt){dt.next.prev=dt.prev,dt.prev.next=dt.next,dt.prevZ&&(dt.prevZ.nextZ=dt.nextZ),dt.nextZ&&(dt.nextZ.prevZ=dt.prevZ)}function Node$1(dt,$,lt){this.i=dt,this.x=$,this.y=lt,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(dt,$,lt,ft){let St=0;for(let Tt=$,Ct=lt-ft;Tt<lt;Tt+=ft)St+=(dt[Ct]-dt[Tt])*(dt[Tt+1]+dt[Ct+1]),Ct=Tt;return St}class ShapeUtils{static area($){const lt=$.length;let ft=0;for(let St=lt-1,Tt=0;Tt<lt;St=Tt++)ft+=$[St].x*$[Tt].y-$[Tt].x*$[St].y;return ft*.5}static isClockWise($){return ShapeUtils.area($)<0}static triangulateShape($,lt){const ft=[],St=[],Tt=[];removeDupEndPts($),addContour(ft,$);let Ct=$.length;lt.forEach(removeDupEndPts);for(let Rt=0;Rt<lt.length;Rt++)St.push(Ct),Ct+=lt[Rt].length,addContour(ft,lt[Rt]);const At=Earcut.triangulate(ft,St);for(let Rt=0;Rt<At.length;Rt+=3)Tt.push(At.slice(Rt,Rt+3));return Tt}}function removeDupEndPts(dt){const $=dt.length;$>2&&dt[$-1].equals(dt[0])&&dt.pop()}function addContour(dt,$){for(let lt=0;lt<$.length;lt++)dt.push($[lt].x),dt.push($[lt].y)}class ExtrudeGeometry extends BufferGeometry{constructor($=new Shape([new Vector2(.5,.5),new Vector2(-.5,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),lt={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:$,options:lt},$=Array.isArray($)?$:[$];const ft=this,St=[],Tt=[];for(let At=0,Rt=$.length;At<Rt;At++){const kt=$[At];Ct(kt)}this.setAttribute("position",new Float32BufferAttribute(St,3)),this.setAttribute("uv",new Float32BufferAttribute(Tt,2)),this.computeVertexNormals();function Ct(At){const Rt=[],kt=lt.curveSegments!==void 0?lt.curveSegments:12,Nt=lt.steps!==void 0?lt.steps:1,Bt=lt.depth!==void 0?lt.depth:1;let Ut=lt.bevelEnabled!==void 0?lt.bevelEnabled:!0,zt=lt.bevelThickness!==void 0?lt.bevelThickness:.2,Zt=lt.bevelSize!==void 0?lt.bevelSize:zt-.1,ln=lt.bevelOffset!==void 0?lt.bevelOffset:0,cn=lt.bevelSegments!==void 0?lt.bevelSegments:3;const hn=lt.extrudePath,pn=lt.UVGenerator!==void 0?lt.UVGenerator:WorldUVGenerator;let dn,gn=!1,vn,Tn,Cn,$n;hn&&(dn=hn.getSpacedPoints(Nt),gn=!0,Ut=!1,vn=hn.computeFrenetFrames(Nt,!1),Tn=new Vector3,Cn=new Vector3,$n=new Vector3),Ut||(cn=0,zt=0,Zt=0,ln=0);const xn=At.extractPoints(kt);let Rn=xn.shape;const Pn=xn.holes;if(!ShapeUtils.isClockWise(Rn)){Rn=Rn.reverse();for(let Tr=0,Ir=Pn.length;Tr<Ir;Tr++){const Qr=Pn[Tr];ShapeUtils.isClockWise(Qr)&&(Pn[Tr]=Qr.reverse())}}const Wn=ShapeUtils.triangulateShape(Rn,Pn),zn=Rn;for(let Tr=0,Ir=Pn.length;Tr<Ir;Tr++){const Qr=Pn[Tr];Rn=Rn.concat(Qr)}function Yn(Tr,Ir,Qr){return Ir||console.error("THREE.ExtrudeGeometry: vec does not exist"),Tr.clone().addScaledVector(Ir,Qr)}const Qn=Rn.length,nr=Wn.length;function Ln(Tr,Ir,Qr){let oo,zr,to;const co=Tr.x-Ir.x,uo=Tr.y-Ir.y,Mo=Qr.x-Tr.x,Vo=Qr.y-Tr.y,jn=co*co+uo*uo,Gn=co*Vo-uo*Mo;if(Math.abs(Gn)>Number.EPSILON){const rr=Math.sqrt(jn),Or=Math.sqrt(Mo*Mo+Vo*Vo),Ar=Ir.x-uo/rr,Br=Ir.y+co/rr,fr=Qr.x-Vo/Or,Yr=Qr.y+Mo/Or,wr=((fr-Ar)*Vo-(Yr-Br)*Mo)/(co*Vo-uo*Mo);oo=Ar+co*wr-Tr.x,zr=Br+uo*wr-Tr.y;const ao=oo*oo+zr*zr;if(ao<=2)return new Vector2(oo,zr);to=Math.sqrt(ao/2)}else{let rr=!1;co>Number.EPSILON?Mo>Number.EPSILON&&(rr=!0):co<-Number.EPSILON?Mo<-Number.EPSILON&&(rr=!0):Math.sign(uo)===Math.sign(Vo)&&(rr=!0),rr?(oo=-uo,zr=co,to=Math.sqrt(jn)):(oo=co,zr=uo,to=Math.sqrt(jn/2))}return new Vector2(oo/to,zr/to)}const Un=[];for(let Tr=0,Ir=zn.length,Qr=Ir-1,oo=Tr+1;Tr<Ir;Tr++,Qr++,oo++)Qr===Ir&&(Qr=0),oo===Ir&&(oo=0),Un[Tr]=Ln(zn[Tr],zn[Qr],zn[oo]);const Vn=[];let sr,In=Un.concat();for(let Tr=0,Ir=Pn.length;Tr<Ir;Tr++){const Qr=Pn[Tr];sr=[];for(let oo=0,zr=Qr.length,to=zr-1,co=oo+1;oo<zr;oo++,to++,co++)to===zr&&(to=0),co===zr&&(co=0),sr[oo]=Ln(Qr[oo],Qr[to],Qr[co]);Vn.push(sr),In=In.concat(sr)}for(let Tr=0;Tr<cn;Tr++){const Ir=Tr/cn,Qr=zt*Math.cos(Ir*Math.PI/2),oo=Zt*Math.sin(Ir*Math.PI/2)+ln;for(let zr=0,to=zn.length;zr<to;zr++){const co=Yn(zn[zr],Un[zr],oo);br(co.x,co.y,-Qr)}for(let zr=0,to=Pn.length;zr<to;zr++){const co=Pn[zr];sr=Vn[zr];for(let uo=0,Mo=co.length;uo<Mo;uo++){const Vo=Yn(co[uo],sr[uo],oo);br(Vo.x,Vo.y,-Qr)}}}const ir=Zt+ln;for(let Tr=0;Tr<Qn;Tr++){const Ir=Ut?Yn(Rn[Tr],In[Tr],ir):Rn[Tr];gn?(Cn.copy(vn.normals[0]).multiplyScalar(Ir.x),Tn.copy(vn.binormals[0]).multiplyScalar(Ir.y),$n.copy(dn[0]).add(Cn).add(Tn),br($n.x,$n.y,$n.z)):br(Ir.x,Ir.y,0)}for(let Tr=1;Tr<=Nt;Tr++)for(let Ir=0;Ir<Qn;Ir++){const Qr=Ut?Yn(Rn[Ir],In[Ir],ir):Rn[Ir];gn?(Cn.copy(vn.normals[Tr]).multiplyScalar(Qr.x),Tn.copy(vn.binormals[Tr]).multiplyScalar(Qr.y),$n.copy(dn[Tr]).add(Cn).add(Tn),br($n.x,$n.y,$n.z)):br(Qr.x,Qr.y,Bt/Nt*Tr)}for(let Tr=cn-1;Tr>=0;Tr--){const Ir=Tr/cn,Qr=zt*Math.cos(Ir*Math.PI/2),oo=Zt*Math.sin(Ir*Math.PI/2)+ln;for(let zr=0,to=zn.length;zr<to;zr++){const co=Yn(zn[zr],Un[zr],oo);br(co.x,co.y,Bt+Qr)}for(let zr=0,to=Pn.length;zr<to;zr++){const co=Pn[zr];sr=Vn[zr];for(let uo=0,Mo=co.length;uo<Mo;uo++){const Vo=Yn(co[uo],sr[uo],oo);gn?br(Vo.x,Vo.y+dn[Nt-1].y,dn[Nt-1].x+Qr):br(Vo.x,Vo.y,Bt+Qr)}}}pr(),Jn();function pr(){const Tr=St.length/3;if(Ut){let Ir=0,Qr=Qn*Ir;for(let oo=0;oo<nr;oo++){const zr=Wn[oo];Gr(zr[2]+Qr,zr[1]+Qr,zr[0]+Qr)}Ir=Nt+cn*2,Qr=Qn*Ir;for(let oo=0;oo<nr;oo++){const zr=Wn[oo];Gr(zr[0]+Qr,zr[1]+Qr,zr[2]+Qr)}}else{for(let Ir=0;Ir<nr;Ir++){const Qr=Wn[Ir];Gr(Qr[2],Qr[1],Qr[0])}for(let Ir=0;Ir<nr;Ir++){const Qr=Wn[Ir];Gr(Qr[0]+Qn*Nt,Qr[1]+Qn*Nt,Qr[2]+Qn*Nt)}}ft.addGroup(Tr,St.length/3-Tr,0)}function Jn(){const Tr=St.length/3;let Ir=0;Pr(zn,Ir),Ir+=zn.length;for(let Qr=0,oo=Pn.length;Qr<oo;Qr++){const zr=Pn[Qr];Pr(zr,Ir),Ir+=zr.length}ft.addGroup(Tr,St.length/3-Tr,1)}function Pr(Tr,Ir){let Qr=Tr.length;for(;--Qr>=0;){const oo=Qr;let zr=Qr-1;zr<0&&(zr=Tr.length-1);for(let to=0,co=Nt+cn*2;to<co;to++){const uo=Qn*to,Mo=Qn*(to+1),Vo=Ir+oo+uo,jn=Ir+zr+uo,Gn=Ir+zr+Mo,rr=Ir+oo+Mo;Kr(Vo,jn,Gn,rr)}}}function br(Tr,Ir,Qr){Rt.push(Tr),Rt.push(Ir),Rt.push(Qr)}function Gr(Tr,Ir,Qr){Xr(Tr),Xr(Ir),Xr(Qr);const oo=St.length/3,zr=pn.generateTopUV(ft,St,oo-3,oo-2,oo-1);Jr(zr[0]),Jr(zr[1]),Jr(zr[2])}function Kr(Tr,Ir,Qr,oo){Xr(Tr),Xr(Ir),Xr(oo),Xr(Ir),Xr(Qr),Xr(oo);const zr=St.length/3,to=pn.generateSideWallUV(ft,St,zr-6,zr-3,zr-2,zr-1);Jr(to[0]),Jr(to[1]),Jr(to[3]),Jr(to[1]),Jr(to[2]),Jr(to[3])}function Xr(Tr){St.push(Rt[Tr*3+0]),St.push(Rt[Tr*3+1]),St.push(Rt[Tr*3+2])}function Jr(Tr){Tt.push(Tr.x),Tt.push(Tr.y)}}}copy($){return super.copy($),this.parameters=Object.assign({},$.parameters),this}toJSON(){const $=super.toJSON(),lt=this.parameters.shapes,ft=this.parameters.options;return toJSON$1(lt,ft,$)}static fromJSON($,lt){const ft=[];for(let Tt=0,Ct=$.shapes.length;Tt<Ct;Tt++){const At=lt[$.shapes[Tt]];ft.push(At)}const St=$.options.extrudePath;return St!==void 0&&($.options.extrudePath=new Curves[St.type]().fromJSON(St)),new ExtrudeGeometry(ft,$.options)}}const WorldUVGenerator={generateTopUV:function(dt,$,lt,ft,St){const Tt=$[lt*3],Ct=$[lt*3+1],At=$[ft*3],Rt=$[ft*3+1],kt=$[St*3],Nt=$[St*3+1];return[new Vector2(Tt,Ct),new Vector2(At,Rt),new Vector2(kt,Nt)]},generateSideWallUV:function(dt,$,lt,ft,St,Tt){const Ct=$[lt*3],At=$[lt*3+1],Rt=$[lt*3+2],kt=$[ft*3],Nt=$[ft*3+1],Bt=$[ft*3+2],Ut=$[St*3],zt=$[St*3+1],Zt=$[St*3+2],ln=$[Tt*3],cn=$[Tt*3+1],hn=$[Tt*3+2];return Math.abs(At-Nt)<Math.abs(Ct-kt)?[new Vector2(Ct,1-Rt),new Vector2(kt,1-Bt),new Vector2(Ut,1-Zt),new Vector2(ln,1-hn)]:[new Vector2(At,1-Rt),new Vector2(Nt,1-Bt),new Vector2(zt,1-Zt),new Vector2(cn,1-hn)]}};function toJSON$1(dt,$,lt){if(lt.shapes=[],Array.isArray(dt))for(let ft=0,St=dt.length;ft<St;ft++){const Tt=dt[ft];lt.shapes.push(Tt.uuid)}else lt.shapes.push(dt.uuid);return lt.options=Object.assign({},$),$.extrudePath!==void 0&&(lt.options.extrudePath=$.extrudePath.toJSON()),lt}class IcosahedronGeometry extends PolyhedronGeometry{constructor($=1,lt=0){const ft=(1+Math.sqrt(5))/2,St=[-1,ft,0,1,ft,0,-1,-ft,0,1,-ft,0,0,-1,ft,0,1,ft,0,-1,-ft,0,1,-ft,ft,0,-1,ft,0,1,-ft,0,-1,-ft,0,1],Tt=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(St,Tt,$,lt),this.type="IcosahedronGeometry",this.parameters={radius:$,detail:lt}}static fromJSON($){return new IcosahedronGeometry($.radius,$.detail)}}class OctahedronGeometry extends PolyhedronGeometry{constructor($=1,lt=0){const ft=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],St=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(ft,St,$,lt),this.type="OctahedronGeometry",this.parameters={radius:$,detail:lt}}static fromJSON($){return new OctahedronGeometry($.radius,$.detail)}}class RingGeometry extends BufferGeometry{constructor($=.5,lt=1,ft=32,St=1,Tt=0,Ct=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:$,outerRadius:lt,thetaSegments:ft,phiSegments:St,thetaStart:Tt,thetaLength:Ct},ft=Math.max(3,ft),St=Math.max(1,St);const At=[],Rt=[],kt=[],Nt=[];let Bt=$;const Ut=(lt-$)/St,zt=new Vector3,Zt=new Vector2;for(let ln=0;ln<=St;ln++){for(let cn=0;cn<=ft;cn++){const hn=Tt+cn/ft*Ct;zt.x=Bt*Math.cos(hn),zt.y=Bt*Math.sin(hn),Rt.push(zt.x,zt.y,zt.z),kt.push(0,0,1),Zt.x=(zt.x/lt+1)/2,Zt.y=(zt.y/lt+1)/2,Nt.push(Zt.x,Zt.y)}Bt+=Ut}for(let ln=0;ln<St;ln++){const cn=ln*(ft+1);for(let hn=0;hn<ft;hn++){const pn=hn+cn,dn=pn,gn=pn+ft+1,vn=pn+ft+2,Tn=pn+1;At.push(dn,gn,Tn),At.push(gn,vn,Tn)}}this.setIndex(At),this.setAttribute("position",new Float32BufferAttribute(Rt,3)),this.setAttribute("normal",new Float32BufferAttribute(kt,3)),this.setAttribute("uv",new Float32BufferAttribute(Nt,2))}copy($){return super.copy($),this.parameters=Object.assign({},$.parameters),this}static fromJSON($){return new RingGeometry($.innerRadius,$.outerRadius,$.thetaSegments,$.phiSegments,$.thetaStart,$.thetaLength)}}class ShapeGeometry extends BufferGeometry{constructor($=new Shape([new Vector2(0,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),lt=12){super(),this.type="ShapeGeometry",this.parameters={shapes:$,curveSegments:lt};const ft=[],St=[],Tt=[],Ct=[];let At=0,Rt=0;if(Array.isArray($)===!1)kt($);else for(let Nt=0;Nt<$.length;Nt++)kt($[Nt]),this.addGroup(At,Rt,Nt),At+=Rt,Rt=0;this.setIndex(ft),this.setAttribute("position",new Float32BufferAttribute(St,3)),this.setAttribute("normal",new Float32BufferAttribute(Tt,3)),this.setAttribute("uv",new Float32BufferAttribute(Ct,2));function kt(Nt){const Bt=St.length/3,Ut=Nt.extractPoints(lt);let zt=Ut.shape;const Zt=Ut.holes;ShapeUtils.isClockWise(zt)===!1&&(zt=zt.reverse());for(let cn=0,hn=Zt.length;cn<hn;cn++){const pn=Zt[cn];ShapeUtils.isClockWise(pn)===!0&&(Zt[cn]=pn.reverse())}const ln=ShapeUtils.triangulateShape(zt,Zt);for(let cn=0,hn=Zt.length;cn<hn;cn++){const pn=Zt[cn];zt=zt.concat(pn)}for(let cn=0,hn=zt.length;cn<hn;cn++){const pn=zt[cn];St.push(pn.x,pn.y,0),Tt.push(0,0,1),Ct.push(pn.x,pn.y)}for(let cn=0,hn=ln.length;cn<hn;cn++){const pn=ln[cn],dn=pn[0]+Bt,gn=pn[1]+Bt,vn=pn[2]+Bt;ft.push(dn,gn,vn),Rt+=3}}}copy($){return super.copy($),this.parameters=Object.assign({},$.parameters),this}toJSON(){const $=super.toJSON(),lt=this.parameters.shapes;return toJSON(lt,$)}static fromJSON($,lt){const ft=[];for(let St=0,Tt=$.shapes.length;St<Tt;St++){const Ct=lt[$.shapes[St]];ft.push(Ct)}return new ShapeGeometry(ft,$.curveSegments)}}function toJSON(dt,$){if($.shapes=[],Array.isArray(dt))for(let lt=0,ft=dt.length;lt<ft;lt++){const St=dt[lt];$.shapes.push(St.uuid)}else $.shapes.push(dt.uuid);return $}class SphereGeometry extends BufferGeometry{constructor($=1,lt=32,ft=16,St=0,Tt=Math.PI*2,Ct=0,At=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:$,widthSegments:lt,heightSegments:ft,phiStart:St,phiLength:Tt,thetaStart:Ct,thetaLength:At},lt=Math.max(3,Math.floor(lt)),ft=Math.max(2,Math.floor(ft));const Rt=Math.min(Ct+At,Math.PI);let kt=0;const Nt=[],Bt=new Vector3,Ut=new Vector3,zt=[],Zt=[],ln=[],cn=[];for(let hn=0;hn<=ft;hn++){const pn=[],dn=hn/ft;let gn=0;hn==0&&Ct==0?gn=.5/lt:hn==ft&&Rt==Math.PI&&(gn=-.5/lt);for(let vn=0;vn<=lt;vn++){const Tn=vn/lt;Bt.x=-$*Math.cos(St+Tn*Tt)*Math.sin(Ct+dn*At),Bt.y=$*Math.cos(Ct+dn*At),Bt.z=$*Math.sin(St+Tn*Tt)*Math.sin(Ct+dn*At),Zt.push(Bt.x,Bt.y,Bt.z),Ut.copy(Bt).normalize(),ln.push(Ut.x,Ut.y,Ut.z),cn.push(Tn+gn,1-dn),pn.push(kt++)}Nt.push(pn)}for(let hn=0;hn<ft;hn++)for(let pn=0;pn<lt;pn++){const dn=Nt[hn][pn+1],gn=Nt[hn][pn],vn=Nt[hn+1][pn],Tn=Nt[hn+1][pn+1];(hn!==0||Ct>0)&&zt.push(dn,gn,Tn),(hn!==ft-1||Rt<Math.PI)&&zt.push(gn,vn,Tn)}this.setIndex(zt),this.setAttribute("position",new Float32BufferAttribute(Zt,3)),this.setAttribute("normal",new Float32BufferAttribute(ln,3)),this.setAttribute("uv",new Float32BufferAttribute(cn,2))}copy($){return super.copy($),this.parameters=Object.assign({},$.parameters),this}static fromJSON($){return new SphereGeometry($.radius,$.widthSegments,$.heightSegments,$.phiStart,$.phiLength,$.thetaStart,$.thetaLength)}}class TetrahedronGeometry extends PolyhedronGeometry{constructor($=1,lt=0){const ft=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],St=[2,1,0,0,3,2,1,3,0,2,3,1];super(ft,St,$,lt),this.type="TetrahedronGeometry",this.parameters={radius:$,detail:lt}}static fromJSON($){return new TetrahedronGeometry($.radius,$.detail)}}class TorusGeometry extends BufferGeometry{constructor($=1,lt=.4,ft=12,St=48,Tt=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:$,tube:lt,radialSegments:ft,tubularSegments:St,arc:Tt},ft=Math.floor(ft),St=Math.floor(St);const Ct=[],At=[],Rt=[],kt=[],Nt=new Vector3,Bt=new Vector3,Ut=new Vector3;for(let zt=0;zt<=ft;zt++)for(let Zt=0;Zt<=St;Zt++){const ln=Zt/St*Tt,cn=zt/ft*Math.PI*2;Bt.x=($+lt*Math.cos(cn))*Math.cos(ln),Bt.y=($+lt*Math.cos(cn))*Math.sin(ln),Bt.z=lt*Math.sin(cn),At.push(Bt.x,Bt.y,Bt.z),Nt.x=$*Math.cos(ln),Nt.y=$*Math.sin(ln),Ut.subVectors(Bt,Nt).normalize(),Rt.push(Ut.x,Ut.y,Ut.z),kt.push(Zt/St),kt.push(zt/ft)}for(let zt=1;zt<=ft;zt++)for(let Zt=1;Zt<=St;Zt++){const ln=(St+1)*zt+Zt-1,cn=(St+1)*(zt-1)+Zt-1,hn=(St+1)*(zt-1)+Zt,pn=(St+1)*zt+Zt;Ct.push(ln,cn,pn),Ct.push(cn,hn,pn)}this.setIndex(Ct),this.setAttribute("position",new Float32BufferAttribute(At,3)),this.setAttribute("normal",new Float32BufferAttribute(Rt,3)),this.setAttribute("uv",new Float32BufferAttribute(kt,2))}copy($){return super.copy($),this.parameters=Object.assign({},$.parameters),this}static fromJSON($){return new TorusGeometry($.radius,$.tube,$.radialSegments,$.tubularSegments,$.arc)}}class TorusKnotGeometry extends BufferGeometry{constructor($=1,lt=.4,ft=64,St=8,Tt=2,Ct=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:$,tube:lt,tubularSegments:ft,radialSegments:St,p:Tt,q:Ct},ft=Math.floor(ft),St=Math.floor(St);const At=[],Rt=[],kt=[],Nt=[],Bt=new Vector3,Ut=new Vector3,zt=new Vector3,Zt=new Vector3,ln=new Vector3,cn=new Vector3,hn=new Vector3;for(let dn=0;dn<=ft;++dn){const gn=dn/ft*Tt*Math.PI*2;pn(gn,Tt,Ct,$,zt),pn(gn+.01,Tt,Ct,$,Zt),cn.subVectors(Zt,zt),hn.addVectors(Zt,zt),ln.crossVectors(cn,hn),hn.crossVectors(ln,cn),ln.normalize(),hn.normalize();for(let vn=0;vn<=St;++vn){const Tn=vn/St*Math.PI*2,Cn=-lt*Math.cos(Tn),$n=lt*Math.sin(Tn);Bt.x=zt.x+(Cn*hn.x+$n*ln.x),Bt.y=zt.y+(Cn*hn.y+$n*ln.y),Bt.z=zt.z+(Cn*hn.z+$n*ln.z),Rt.push(Bt.x,Bt.y,Bt.z),Ut.subVectors(Bt,zt).normalize(),kt.push(Ut.x,Ut.y,Ut.z),Nt.push(dn/ft),Nt.push(vn/St)}}for(let dn=1;dn<=ft;dn++)for(let gn=1;gn<=St;gn++){const vn=(St+1)*(dn-1)+(gn-1),Tn=(St+1)*dn+(gn-1),Cn=(St+1)*dn+gn,$n=(St+1)*(dn-1)+gn;At.push(vn,Tn,$n),At.push(Tn,Cn,$n)}this.setIndex(At),this.setAttribute("position",new Float32BufferAttribute(Rt,3)),this.setAttribute("normal",new Float32BufferAttribute(kt,3)),this.setAttribute("uv",new Float32BufferAttribute(Nt,2));function pn(dn,gn,vn,Tn,Cn){const $n=Math.cos(dn),xn=Math.sin(dn),Rn=vn/gn*dn,Pn=Math.cos(Rn);Cn.x=Tn*(2+Pn)*.5*$n,Cn.y=Tn*(2+Pn)*xn*.5,Cn.z=Tn*Math.sin(Rn)*.5}}copy($){return super.copy($),this.parameters=Object.assign({},$.parameters),this}static fromJSON($){return new TorusKnotGeometry($.radius,$.tube,$.tubularSegments,$.radialSegments,$.p,$.q)}}class TubeGeometry extends BufferGeometry{constructor($=new QuadraticBezierCurve3(new Vector3(-1,-1,0),new Vector3(-1,1,0),new Vector3(1,1,0)),lt=64,ft=1,St=8,Tt=!1){super(),this.type="TubeGeometry",this.parameters={path:$,tubularSegments:lt,radius:ft,radialSegments:St,closed:Tt};const Ct=$.computeFrenetFrames(lt,Tt);this.tangents=Ct.tangents,this.normals=Ct.normals,this.binormals=Ct.binormals;const At=new Vector3,Rt=new Vector3,kt=new Vector2;let Nt=new Vector3;const Bt=[],Ut=[],zt=[],Zt=[];ln(),this.setIndex(Zt),this.setAttribute("position",new Float32BufferAttribute(Bt,3)),this.setAttribute("normal",new Float32BufferAttribute(Ut,3)),this.setAttribute("uv",new Float32BufferAttribute(zt,2));function ln(){for(let dn=0;dn<lt;dn++)cn(dn);cn(Tt===!1?lt:0),pn(),hn()}function cn(dn){Nt=$.getPointAt(dn/lt,Nt);const gn=Ct.normals[dn],vn=Ct.binormals[dn];for(let Tn=0;Tn<=St;Tn++){const Cn=Tn/St*Math.PI*2,$n=Math.sin(Cn),xn=-Math.cos(Cn);Rt.x=xn*gn.x+$n*vn.x,Rt.y=xn*gn.y+$n*vn.y,Rt.z=xn*gn.z+$n*vn.z,Rt.normalize(),Ut.push(Rt.x,Rt.y,Rt.z),At.x=Nt.x+ft*Rt.x,At.y=Nt.y+ft*Rt.y,At.z=Nt.z+ft*Rt.z,Bt.push(At.x,At.y,At.z)}}function hn(){for(let dn=1;dn<=lt;dn++)for(let gn=1;gn<=St;gn++){const vn=(St+1)*(dn-1)+(gn-1),Tn=(St+1)*dn+(gn-1),Cn=(St+1)*dn+gn,$n=(St+1)*(dn-1)+gn;Zt.push(vn,Tn,$n),Zt.push(Tn,Cn,$n)}}function pn(){for(let dn=0;dn<=lt;dn++)for(let gn=0;gn<=St;gn++)kt.x=dn/lt,kt.y=gn/St,zt.push(kt.x,kt.y)}}copy($){return super.copy($),this.parameters=Object.assign({},$.parameters),this}toJSON(){const $=super.toJSON();return $.path=this.parameters.path.toJSON(),$}static fromJSON($){return new TubeGeometry(new Curves[$.path.type]().fromJSON($.path),$.tubularSegments,$.radius,$.radialSegments,$.closed)}}class WireframeGeometry extends BufferGeometry{constructor($=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:$},$!==null){const lt=[],ft=new Set,St=new Vector3,Tt=new Vector3;if($.index!==null){const Ct=$.attributes.position,At=$.index;let Rt=$.groups;Rt.length===0&&(Rt=[{start:0,count:At.count,materialIndex:0}]);for(let kt=0,Nt=Rt.length;kt<Nt;++kt){const Bt=Rt[kt],Ut=Bt.start,zt=Bt.count;for(let Zt=Ut,ln=Ut+zt;Zt<ln;Zt+=3)for(let cn=0;cn<3;cn++){const hn=At.getX(Zt+cn),pn=At.getX(Zt+(cn+1)%3);St.fromBufferAttribute(Ct,hn),Tt.fromBufferAttribute(Ct,pn),isUniqueEdge(St,Tt,ft)===!0&&(lt.push(St.x,St.y,St.z),lt.push(Tt.x,Tt.y,Tt.z))}}}else{const Ct=$.attributes.position;for(let At=0,Rt=Ct.count/3;At<Rt;At++)for(let kt=0;kt<3;kt++){const Nt=3*At+kt,Bt=3*At+(kt+1)%3;St.fromBufferAttribute(Ct,Nt),Tt.fromBufferAttribute(Ct,Bt),isUniqueEdge(St,Tt,ft)===!0&&(lt.push(St.x,St.y,St.z),lt.push(Tt.x,Tt.y,Tt.z))}}this.setAttribute("position",new Float32BufferAttribute(lt,3))}}copy($){return super.copy($),this.parameters=Object.assign({},$.parameters),this}}function isUniqueEdge(dt,$,lt){const ft=`${dt.x},${dt.y},${dt.z}-${$.x},${$.y},${$.z}`,St=`${$.x},${$.y},${$.z}-${dt.x},${dt.y},${dt.z}`;return lt.has(ft)===!0||lt.has(St)===!0?!1:(lt.add(ft),lt.add(St),!0)}var Geometries=Object.freeze({__proto__:null,BoxGeometry,CapsuleGeometry,CircleGeometry,ConeGeometry,CylinderGeometry,DodecahedronGeometry,EdgesGeometry,ExtrudeGeometry,IcosahedronGeometry,LatheGeometry,OctahedronGeometry,PlaneGeometry,PolyhedronGeometry,RingGeometry,ShapeGeometry,SphereGeometry,TetrahedronGeometry,TorusGeometry,TorusKnotGeometry,TubeGeometry,WireframeGeometry});class ShadowMaterial extends Material{constructor($){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Color(0),this.transparent=!0,this.fog=!0,this.setValues($)}copy($){return super.copy($),this.color.copy($.color),this.fog=$.fog,this}}class RawShaderMaterial extends ShaderMaterial{constructor($){super($),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class MeshStandardMaterial extends Material{constructor($){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues($)}copy($){return super.copy($),this.defines={STANDARD:""},this.color.copy($.color),this.roughness=$.roughness,this.metalness=$.metalness,this.map=$.map,this.lightMap=$.lightMap,this.lightMapIntensity=$.lightMapIntensity,this.aoMap=$.aoMap,this.aoMapIntensity=$.aoMapIntensity,this.emissive.copy($.emissive),this.emissiveMap=$.emissiveMap,this.emissiveIntensity=$.emissiveIntensity,this.bumpMap=$.bumpMap,this.bumpScale=$.bumpScale,this.normalMap=$.normalMap,this.normalMapType=$.normalMapType,this.normalScale.copy($.normalScale),this.displacementMap=$.displacementMap,this.displacementScale=$.displacementScale,this.displacementBias=$.displacementBias,this.roughnessMap=$.roughnessMap,this.metalnessMap=$.metalnessMap,this.alphaMap=$.alphaMap,this.envMap=$.envMap,this.envMapIntensity=$.envMapIntensity,this.wireframe=$.wireframe,this.wireframeLinewidth=$.wireframeLinewidth,this.wireframeLinecap=$.wireframeLinecap,this.wireframeLinejoin=$.wireframeLinejoin,this.flatShading=$.flatShading,this.fog=$.fog,this}}class MeshPhysicalMaterial extends MeshStandardMaterial{constructor($){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return clamp$1(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(lt){this.ior=(1+.4*lt)/(1-.4*lt)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Color(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Color(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Color(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues($)}get sheen(){return this._sheen}set sheen($){this._sheen>0!=$>0&&this.version++,this._sheen=$}get clearcoat(){return this._clearcoat}set clearcoat($){this._clearcoat>0!=$>0&&this.version++,this._clearcoat=$}get iridescence(){return this._iridescence}set iridescence($){this._iridescence>0!=$>0&&this.version++,this._iridescence=$}get transmission(){return this._transmission}set transmission($){this._transmission>0!=$>0&&this.version++,this._transmission=$}copy($){return super.copy($),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=$.clearcoat,this.clearcoatMap=$.clearcoatMap,this.clearcoatRoughness=$.clearcoatRoughness,this.clearcoatRoughnessMap=$.clearcoatRoughnessMap,this.clearcoatNormalMap=$.clearcoatNormalMap,this.clearcoatNormalScale.copy($.clearcoatNormalScale),this.ior=$.ior,this.iridescence=$.iridescence,this.iridescenceMap=$.iridescenceMap,this.iridescenceIOR=$.iridescenceIOR,this.iridescenceThicknessRange=[...$.iridescenceThicknessRange],this.iridescenceThicknessMap=$.iridescenceThicknessMap,this.sheen=$.sheen,this.sheenColor.copy($.sheenColor),this.sheenColorMap=$.sheenColorMap,this.sheenRoughness=$.sheenRoughness,this.sheenRoughnessMap=$.sheenRoughnessMap,this.transmission=$.transmission,this.transmissionMap=$.transmissionMap,this.thickness=$.thickness,this.thicknessMap=$.thicknessMap,this.attenuationDistance=$.attenuationDistance,this.attenuationColor.copy($.attenuationColor),this.specularIntensity=$.specularIntensity,this.specularIntensityMap=$.specularIntensityMap,this.specularColor.copy($.specularColor),this.specularColorMap=$.specularColorMap,this}}class MeshPhongMaterial extends Material{constructor($){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues($)}copy($){return super.copy($),this.color.copy($.color),this.specular.copy($.specular),this.shininess=$.shininess,this.map=$.map,this.lightMap=$.lightMap,this.lightMapIntensity=$.lightMapIntensity,this.aoMap=$.aoMap,this.aoMapIntensity=$.aoMapIntensity,this.emissive.copy($.emissive),this.emissiveMap=$.emissiveMap,this.emissiveIntensity=$.emissiveIntensity,this.bumpMap=$.bumpMap,this.bumpScale=$.bumpScale,this.normalMap=$.normalMap,this.normalMapType=$.normalMapType,this.normalScale.copy($.normalScale),this.displacementMap=$.displacementMap,this.displacementScale=$.displacementScale,this.displacementBias=$.displacementBias,this.specularMap=$.specularMap,this.alphaMap=$.alphaMap,this.envMap=$.envMap,this.combine=$.combine,this.reflectivity=$.reflectivity,this.refractionRatio=$.refractionRatio,this.wireframe=$.wireframe,this.wireframeLinewidth=$.wireframeLinewidth,this.wireframeLinecap=$.wireframeLinecap,this.wireframeLinejoin=$.wireframeLinejoin,this.flatShading=$.flatShading,this.fog=$.fog,this}}class MeshToonMaterial extends Material{constructor($){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues($)}copy($){return super.copy($),this.color.copy($.color),this.map=$.map,this.gradientMap=$.gradientMap,this.lightMap=$.lightMap,this.lightMapIntensity=$.lightMapIntensity,this.aoMap=$.aoMap,this.aoMapIntensity=$.aoMapIntensity,this.emissive.copy($.emissive),this.emissiveMap=$.emissiveMap,this.emissiveIntensity=$.emissiveIntensity,this.bumpMap=$.bumpMap,this.bumpScale=$.bumpScale,this.normalMap=$.normalMap,this.normalMapType=$.normalMapType,this.normalScale.copy($.normalScale),this.displacementMap=$.displacementMap,this.displacementScale=$.displacementScale,this.displacementBias=$.displacementBias,this.alphaMap=$.alphaMap,this.wireframe=$.wireframe,this.wireframeLinewidth=$.wireframeLinewidth,this.wireframeLinecap=$.wireframeLinecap,this.wireframeLinejoin=$.wireframeLinejoin,this.fog=$.fog,this}}class MeshNormalMaterial extends Material{constructor($){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues($)}copy($){return super.copy($),this.bumpMap=$.bumpMap,this.bumpScale=$.bumpScale,this.normalMap=$.normalMap,this.normalMapType=$.normalMapType,this.normalScale.copy($.normalScale),this.displacementMap=$.displacementMap,this.displacementScale=$.displacementScale,this.displacementBias=$.displacementBias,this.wireframe=$.wireframe,this.wireframeLinewidth=$.wireframeLinewidth,this.flatShading=$.flatShading,this}}class MeshLambertMaterial extends Material{constructor($){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues($)}copy($){return super.copy($),this.color.copy($.color),this.map=$.map,this.lightMap=$.lightMap,this.lightMapIntensity=$.lightMapIntensity,this.aoMap=$.aoMap,this.aoMapIntensity=$.aoMapIntensity,this.emissive.copy($.emissive),this.emissiveMap=$.emissiveMap,this.emissiveIntensity=$.emissiveIntensity,this.bumpMap=$.bumpMap,this.bumpScale=$.bumpScale,this.normalMap=$.normalMap,this.normalMapType=$.normalMapType,this.normalScale.copy($.normalScale),this.displacementMap=$.displacementMap,this.displacementScale=$.displacementScale,this.displacementBias=$.displacementBias,this.specularMap=$.specularMap,this.alphaMap=$.alphaMap,this.envMap=$.envMap,this.combine=$.combine,this.reflectivity=$.reflectivity,this.refractionRatio=$.refractionRatio,this.wireframe=$.wireframe,this.wireframeLinewidth=$.wireframeLinewidth,this.wireframeLinecap=$.wireframeLinecap,this.wireframeLinejoin=$.wireframeLinejoin,this.flatShading=$.flatShading,this.fog=$.fog,this}}class MeshMatcapMaterial extends Material{constructor($){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues($)}copy($){return super.copy($),this.defines={MATCAP:""},this.color.copy($.color),this.matcap=$.matcap,this.map=$.map,this.bumpMap=$.bumpMap,this.bumpScale=$.bumpScale,this.normalMap=$.normalMap,this.normalMapType=$.normalMapType,this.normalScale.copy($.normalScale),this.displacementMap=$.displacementMap,this.displacementScale=$.displacementScale,this.displacementBias=$.displacementBias,this.alphaMap=$.alphaMap,this.flatShading=$.flatShading,this.fog=$.fog,this}}class LineDashedMaterial extends LineBasicMaterial{constructor($){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues($)}copy($){return super.copy($),this.scale=$.scale,this.dashSize=$.dashSize,this.gapSize=$.gapSize,this}}function arraySlice(dt,$,lt){return isTypedArray(dt)?new dt.constructor(dt.subarray($,lt!==void 0?lt:dt.length)):dt.slice($,lt)}function convertArray(dt,$,lt){return!dt||!lt&&dt.constructor===$?dt:typeof $.BYTES_PER_ELEMENT=="number"?new $(dt):Array.prototype.slice.call(dt)}function isTypedArray(dt){return ArrayBuffer.isView(dt)&&!(dt instanceof DataView)}function getKeyframeOrder(dt){function $(St,Tt){return dt[St]-dt[Tt]}const lt=dt.length,ft=new Array(lt);for(let St=0;St!==lt;++St)ft[St]=St;return ft.sort($),ft}function sortedArray(dt,$,lt){const ft=dt.length,St=new dt.constructor(ft);for(let Tt=0,Ct=0;Ct!==ft;++Tt){const At=lt[Tt]*$;for(let Rt=0;Rt!==$;++Rt)St[Ct++]=dt[At+Rt]}return St}function flattenJSON(dt,$,lt,ft){let St=1,Tt=dt[0];for(;Tt!==void 0&&Tt[ft]===void 0;)Tt=dt[St++];if(Tt===void 0)return;let Ct=Tt[ft];if(Ct!==void 0)if(Array.isArray(Ct))do Ct=Tt[ft],Ct!==void 0&&($.push(Tt.time),lt.push.apply(lt,Ct)),Tt=dt[St++];while(Tt!==void 0);else if(Ct.toArray!==void 0)do Ct=Tt[ft],Ct!==void 0&&($.push(Tt.time),Ct.toArray(lt,lt.length)),Tt=dt[St++];while(Tt!==void 0);else do Ct=Tt[ft],Ct!==void 0&&($.push(Tt.time),lt.push(Ct)),Tt=dt[St++];while(Tt!==void 0)}function subclip(dt,$,lt,ft,St=30){const Tt=dt.clone();Tt.name=$;const Ct=[];for(let Rt=0;Rt<Tt.tracks.length;++Rt){const kt=Tt.tracks[Rt],Nt=kt.getValueSize(),Bt=[],Ut=[];for(let zt=0;zt<kt.times.length;++zt){const Zt=kt.times[zt]*St;if(!(Zt<lt||Zt>=ft)){Bt.push(kt.times[zt]);for(let ln=0;ln<Nt;++ln)Ut.push(kt.values[zt*Nt+ln])}}Bt.length!==0&&(kt.times=convertArray(Bt,kt.times.constructor),kt.values=convertArray(Ut,kt.values.constructor),Ct.push(kt))}Tt.tracks=Ct;let At=1/0;for(let Rt=0;Rt<Tt.tracks.length;++Rt)At>Tt.tracks[Rt].times[0]&&(At=Tt.tracks[Rt].times[0]);for(let Rt=0;Rt<Tt.tracks.length;++Rt)Tt.tracks[Rt].shift(-1*At);return Tt.resetDuration(),Tt}function makeClipAdditive(dt,$=0,lt=dt,ft=30){ft<=0&&(ft=30);const St=lt.tracks.length,Tt=$/ft;for(let Ct=0;Ct<St;++Ct){const At=lt.tracks[Ct],Rt=At.ValueTypeName;if(Rt==="bool"||Rt==="string")continue;const kt=dt.tracks.find(function(hn){return hn.name===At.name&&hn.ValueTypeName===Rt});if(kt===void 0)continue;let Nt=0;const Bt=At.getValueSize();At.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(Nt=Bt/3);let Ut=0;const zt=kt.getValueSize();kt.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(Ut=zt/3);const Zt=At.times.length-1;let ln;if(Tt<=At.times[0]){const hn=Nt,pn=Bt-Nt;ln=arraySlice(At.values,hn,pn)}else if(Tt>=At.times[Zt]){const hn=Zt*Bt+Nt,pn=hn+Bt-Nt;ln=arraySlice(At.values,hn,pn)}else{const hn=At.createInterpolant(),pn=Nt,dn=Bt-Nt;hn.evaluate(Tt),ln=arraySlice(hn.resultBuffer,pn,dn)}Rt==="quaternion"&&new Quaternion().fromArray(ln).normalize().conjugate().toArray(ln);const cn=kt.times.length;for(let hn=0;hn<cn;++hn){const pn=hn*zt+Ut;if(Rt==="quaternion")Quaternion.multiplyQuaternionsFlat(kt.values,pn,ln,0,kt.values,pn);else{const dn=zt-Ut*2;for(let gn=0;gn<dn;++gn)kt.values[pn+gn]-=ln[gn]}}}return dt.blendMode=AdditiveAnimationBlendMode,dt}const AnimationUtils={arraySlice,convertArray,isTypedArray,getKeyframeOrder,sortedArray,flattenJSON,subclip,makeClipAdditive};class Interpolant{constructor($,lt,ft,St){this.parameterPositions=$,this._cachedIndex=0,this.resultBuffer=St!==void 0?St:new lt.constructor(ft),this.sampleValues=lt,this.valueSize=ft,this.settings=null,this.DefaultSettings_={}}evaluate($){const lt=this.parameterPositions;let ft=this._cachedIndex,St=lt[ft],Tt=lt[ft-1];e:{t:{let Ct;n:{r:if(!($<St)){for(let At=ft+2;;){if(St===void 0){if($<Tt)break r;return ft=lt.length,this._cachedIndex=ft,this.copySampleValue_(ft-1)}if(ft===At)break;if(Tt=St,St=lt[++ft],$<St)break t}Ct=lt.length;break n}if(!($>=Tt)){const At=lt[1];$<At&&(ft=2,Tt=At);for(let Rt=ft-2;;){if(Tt===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(ft===Rt)break;if(St=Tt,Tt=lt[--ft-1],$>=Tt)break t}Ct=ft,ft=0;break n}break e}for(;ft<Ct;){const At=ft+Ct>>>1;$<lt[At]?Ct=At:ft=At+1}if(St=lt[ft],Tt=lt[ft-1],Tt===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(St===void 0)return ft=lt.length,this._cachedIndex=ft,this.copySampleValue_(ft-1)}this._cachedIndex=ft,this.intervalChanged_(ft,Tt,St)}return this.interpolate_(ft,Tt,$,St)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_($){const lt=this.resultBuffer,ft=this.sampleValues,St=this.valueSize,Tt=$*St;for(let Ct=0;Ct!==St;++Ct)lt[Ct]=ft[Tt+Ct];return lt}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class CubicInterpolant extends Interpolant{constructor($,lt,ft,St){super($,lt,ft,St),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding}}intervalChanged_($,lt,ft){const St=this.parameterPositions;let Tt=$-2,Ct=$+1,At=St[Tt],Rt=St[Ct];if(At===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:Tt=$,At=2*lt-ft;break;case WrapAroundEnding:Tt=St.length-2,At=lt+St[Tt]-St[Tt+1];break;default:Tt=$,At=ft}if(Rt===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:Ct=$,Rt=2*ft-lt;break;case WrapAroundEnding:Ct=1,Rt=ft+St[1]-St[0];break;default:Ct=$-1,Rt=lt}const kt=(ft-lt)*.5,Nt=this.valueSize;this._weightPrev=kt/(lt-At),this._weightNext=kt/(Rt-ft),this._offsetPrev=Tt*Nt,this._offsetNext=Ct*Nt}interpolate_($,lt,ft,St){const Tt=this.resultBuffer,Ct=this.sampleValues,At=this.valueSize,Rt=$*At,kt=Rt-At,Nt=this._offsetPrev,Bt=this._offsetNext,Ut=this._weightPrev,zt=this._weightNext,Zt=(ft-lt)/(St-lt),ln=Zt*Zt,cn=ln*Zt,hn=-Ut*cn+2*Ut*ln-Ut*Zt,pn=(1+Ut)*cn+(-1.5-2*Ut)*ln+(-.5+Ut)*Zt+1,dn=(-1-zt)*cn+(1.5+zt)*ln+.5*Zt,gn=zt*cn-zt*ln;for(let vn=0;vn!==At;++vn)Tt[vn]=hn*Ct[Nt+vn]+pn*Ct[kt+vn]+dn*Ct[Rt+vn]+gn*Ct[Bt+vn];return Tt}}class LinearInterpolant extends Interpolant{constructor($,lt,ft,St){super($,lt,ft,St)}interpolate_($,lt,ft,St){const Tt=this.resultBuffer,Ct=this.sampleValues,At=this.valueSize,Rt=$*At,kt=Rt-At,Nt=(ft-lt)/(St-lt),Bt=1-Nt;for(let Ut=0;Ut!==At;++Ut)Tt[Ut]=Ct[kt+Ut]*Bt+Ct[Rt+Ut]*Nt;return Tt}}class DiscreteInterpolant extends Interpolant{constructor($,lt,ft,St){super($,lt,ft,St)}interpolate_($){return this.copySampleValue_($-1)}}class KeyframeTrack{constructor($,lt,ft,St){if($===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(lt===void 0||lt.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+$);this.name=$,this.times=convertArray(lt,this.TimeBufferType),this.values=convertArray(ft,this.ValueBufferType),this.setInterpolation(St||this.DefaultInterpolation)}static toJSON($){const lt=$.constructor;let ft;if(lt.toJSON!==this.toJSON)ft=lt.toJSON($);else{ft={name:$.name,times:convertArray($.times,Array),values:convertArray($.values,Array)};const St=$.getInterpolation();St!==$.DefaultInterpolation&&(ft.interpolation=St)}return ft.type=$.ValueTypeName,ft}InterpolantFactoryMethodDiscrete($){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),$)}InterpolantFactoryMethodLinear($){return new LinearInterpolant(this.times,this.values,this.getValueSize(),$)}InterpolantFactoryMethodSmooth($){return new CubicInterpolant(this.times,this.values,this.getValueSize(),$)}setInterpolation($){let lt;switch($){case InterpolateDiscrete:lt=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:lt=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:lt=this.InterpolantFactoryMethodSmooth;break}if(lt===void 0){const ft="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if($!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(ft);return console.warn("THREE.KeyframeTrack:",ft),this}return this.createInterpolant=lt,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}}getValueSize(){return this.values.length/this.times.length}shift($){if($!==0){const lt=this.times;for(let ft=0,St=lt.length;ft!==St;++ft)lt[ft]+=$}return this}scale($){if($!==1){const lt=this.times;for(let ft=0,St=lt.length;ft!==St;++ft)lt[ft]*=$}return this}trim($,lt){const ft=this.times,St=ft.length;let Tt=0,Ct=St-1;for(;Tt!==St&&ft[Tt]<$;)++Tt;for(;Ct!==-1&&ft[Ct]>lt;)--Ct;if(++Ct,Tt!==0||Ct!==St){Tt>=Ct&&(Ct=Math.max(Ct,1),Tt=Ct-1);const At=this.getValueSize();this.times=arraySlice(ft,Tt,Ct),this.values=arraySlice(this.values,Tt*At,Ct*At)}return this}validate(){let $=!0;const lt=this.getValueSize();lt-Math.floor(lt)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),$=!1);const ft=this.times,St=this.values,Tt=ft.length;Tt===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),$=!1);let Ct=null;for(let At=0;At!==Tt;At++){const Rt=ft[At];if(typeof Rt=="number"&&isNaN(Rt)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,At,Rt),$=!1;break}if(Ct!==null&&Ct>Rt){console.error("THREE.KeyframeTrack: Out of order keys.",this,At,Rt,Ct),$=!1;break}Ct=Rt}if(St!==void 0&&isTypedArray(St))for(let At=0,Rt=St.length;At!==Rt;++At){const kt=St[At];if(isNaN(kt)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,At,kt),$=!1;break}}return $}optimize(){const $=arraySlice(this.times),lt=arraySlice(this.values),ft=this.getValueSize(),St=this.getInterpolation()===InterpolateSmooth,Tt=$.length-1;let Ct=1;for(let At=1;At<Tt;++At){let Rt=!1;const kt=$[At],Nt=$[At+1];if(kt!==Nt&&(At!==1||kt!==$[0]))if(St)Rt=!0;else{const Bt=At*ft,Ut=Bt-ft,zt=Bt+ft;for(let Zt=0;Zt!==ft;++Zt){const ln=lt[Bt+Zt];if(ln!==lt[Ut+Zt]||ln!==lt[zt+Zt]){Rt=!0;break}}}if(Rt){if(At!==Ct){$[Ct]=$[At];const Bt=At*ft,Ut=Ct*ft;for(let zt=0;zt!==ft;++zt)lt[Ut+zt]=lt[Bt+zt]}++Ct}}if(Tt>0){$[Ct]=$[Tt];for(let At=Tt*ft,Rt=Ct*ft,kt=0;kt!==ft;++kt)lt[Rt+kt]=lt[At+kt];++Ct}return Ct!==$.length?(this.times=arraySlice($,0,Ct),this.values=arraySlice(lt,0,Ct*ft)):(this.times=$,this.values=lt),this}clone(){const $=arraySlice(this.times,0),lt=arraySlice(this.values,0),ft=this.constructor,St=new ft(this.name,$,lt);return St.createInterpolant=this.createInterpolant,St}}KeyframeTrack.prototype.TimeBufferType=Float32Array;KeyframeTrack.prototype.ValueBufferType=Float32Array;KeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear;class BooleanKeyframeTrack extends KeyframeTrack{}BooleanKeyframeTrack.prototype.ValueTypeName="bool";BooleanKeyframeTrack.prototype.ValueBufferType=Array;BooleanKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class ColorKeyframeTrack extends KeyframeTrack{}ColorKeyframeTrack.prototype.ValueTypeName="color";class NumberKeyframeTrack extends KeyframeTrack{}NumberKeyframeTrack.prototype.ValueTypeName="number";class QuaternionLinearInterpolant extends Interpolant{constructor($,lt,ft,St){super($,lt,ft,St)}interpolate_($,lt,ft,St){const Tt=this.resultBuffer,Ct=this.sampleValues,At=this.valueSize,Rt=(ft-lt)/(St-lt);let kt=$*At;for(let Nt=kt+At;kt!==Nt;kt+=4)Quaternion.slerpFlat(Tt,0,Ct,kt-At,Ct,kt,Rt);return Tt}}class QuaternionKeyframeTrack extends KeyframeTrack{InterpolantFactoryMethodLinear($){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),$)}}QuaternionKeyframeTrack.prototype.ValueTypeName="quaternion";QuaternionKeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear;QuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class StringKeyframeTrack extends KeyframeTrack{}StringKeyframeTrack.prototype.ValueTypeName="string";StringKeyframeTrack.prototype.ValueBufferType=Array;StringKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;StringKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;StringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class VectorKeyframeTrack extends KeyframeTrack{}VectorKeyframeTrack.prototype.ValueTypeName="vector";class AnimationClip{constructor($,lt=-1,ft,St=NormalAnimationBlendMode){this.name=$,this.tracks=ft,this.duration=lt,this.blendMode=St,this.uuid=generateUUID(),this.duration<0&&this.resetDuration()}static parse($){const lt=[],ft=$.tracks,St=1/($.fps||1);for(let Ct=0,At=ft.length;Ct!==At;++Ct)lt.push(parseKeyframeTrack(ft[Ct]).scale(St));const Tt=new this($.name,$.duration,lt,$.blendMode);return Tt.uuid=$.uuid,Tt}static toJSON($){const lt=[],ft=$.tracks,St={name:$.name,duration:$.duration,tracks:lt,uuid:$.uuid,blendMode:$.blendMode};for(let Tt=0,Ct=ft.length;Tt!==Ct;++Tt)lt.push(KeyframeTrack.toJSON(ft[Tt]));return St}static CreateFromMorphTargetSequence($,lt,ft,St){const Tt=lt.length,Ct=[];for(let At=0;At<Tt;At++){let Rt=[],kt=[];Rt.push((At+Tt-1)%Tt,At,(At+1)%Tt),kt.push(0,1,0);const Nt=getKeyframeOrder(Rt);Rt=sortedArray(Rt,1,Nt),kt=sortedArray(kt,1,Nt),!St&&Rt[0]===0&&(Rt.push(Tt),kt.push(kt[0])),Ct.push(new NumberKeyframeTrack(".morphTargetInfluences["+lt[At].name+"]",Rt,kt).scale(1/ft))}return new this($,-1,Ct)}static findByName($,lt){let ft=$;if(!Array.isArray($)){const St=$;ft=St.geometry&&St.geometry.animations||St.animations}for(let St=0;St<ft.length;St++)if(ft[St].name===lt)return ft[St];return null}static CreateClipsFromMorphTargetSequences($,lt,ft){const St={},Tt=/^([\w-]*?)([\d]+)$/;for(let At=0,Rt=$.length;At<Rt;At++){const kt=$[At],Nt=kt.name.match(Tt);if(Nt&&Nt.length>1){const Bt=Nt[1];let Ut=St[Bt];Ut||(St[Bt]=Ut=[]),Ut.push(kt)}}const Ct=[];for(const At in St)Ct.push(this.CreateFromMorphTargetSequence(At,St[At],lt,ft));return Ct}static parseAnimation($,lt){if(!$)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const ft=function(Bt,Ut,zt,Zt,ln){if(zt.length!==0){const cn=[],hn=[];flattenJSON(zt,cn,hn,Zt),cn.length!==0&&ln.push(new Bt(Ut,cn,hn))}},St=[],Tt=$.name||"default",Ct=$.fps||30,At=$.blendMode;let Rt=$.length||-1;const kt=$.hierarchy||[];for(let Bt=0;Bt<kt.length;Bt++){const Ut=kt[Bt].keys;if(!(!Ut||Ut.length===0))if(Ut[0].morphTargets){const zt={};let Zt;for(Zt=0;Zt<Ut.length;Zt++)if(Ut[Zt].morphTargets)for(let ln=0;ln<Ut[Zt].morphTargets.length;ln++)zt[Ut[Zt].morphTargets[ln]]=-1;for(const ln in zt){const cn=[],hn=[];for(let pn=0;pn!==Ut[Zt].morphTargets.length;++pn){const dn=Ut[Zt];cn.push(dn.time),hn.push(dn.morphTarget===ln?1:0)}St.push(new NumberKeyframeTrack(".morphTargetInfluence["+ln+"]",cn,hn))}Rt=zt.length*Ct}else{const zt=".bones["+lt[Bt].name+"]";ft(VectorKeyframeTrack,zt+".position",Ut,"pos",St),ft(QuaternionKeyframeTrack,zt+".quaternion",Ut,"rot",St),ft(VectorKeyframeTrack,zt+".scale",Ut,"scl",St)}}return St.length===0?null:new this(Tt,Rt,St,At)}resetDuration(){const $=this.tracks;let lt=0;for(let ft=0,St=$.length;ft!==St;++ft){const Tt=this.tracks[ft];lt=Math.max(lt,Tt.times[Tt.times.length-1])}return this.duration=lt,this}trim(){for(let $=0;$<this.tracks.length;$++)this.tracks[$].trim(0,this.duration);return this}validate(){let $=!0;for(let lt=0;lt<this.tracks.length;lt++)$=$&&this.tracks[lt].validate();return $}optimize(){for(let $=0;$<this.tracks.length;$++)this.tracks[$].optimize();return this}clone(){const $=[];for(let lt=0;lt<this.tracks.length;lt++)$.push(this.tracks[lt].clone());return new this.constructor(this.name,this.duration,$,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function getTrackTypeForValueTypeName(dt){switch(dt.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+dt)}function parseKeyframeTrack(dt){if(dt.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const $=getTrackTypeForValueTypeName(dt.type);if(dt.times===void 0){const lt=[],ft=[];flattenJSON(dt.keys,lt,ft,"value"),dt.times=lt,dt.values=ft}return $.parse!==void 0?$.parse(dt):new $(dt.name,dt.times,dt.values,dt.interpolation)}const Cache={enabled:!1,files:{},add:function(dt,$){this.enabled!==!1&&(this.files[dt]=$)},get:function(dt){if(this.enabled!==!1)return this.files[dt]},remove:function(dt){delete this.files[dt]},clear:function(){this.files={}}};class LoadingManager{constructor($,lt,ft){const St=this;let Tt=!1,Ct=0,At=0,Rt;const kt=[];this.onStart=void 0,this.onLoad=$,this.onProgress=lt,this.onError=ft,this.itemStart=function(Nt){At++,Tt===!1&&St.onStart!==void 0&&St.onStart(Nt,Ct,At),Tt=!0},this.itemEnd=function(Nt){Ct++,St.onProgress!==void 0&&St.onProgress(Nt,Ct,At),Ct===At&&(Tt=!1,St.onLoad!==void 0&&St.onLoad())},this.itemError=function(Nt){St.onError!==void 0&&St.onError(Nt)},this.resolveURL=function(Nt){return Rt?Rt(Nt):Nt},this.setURLModifier=function(Nt){return Rt=Nt,this},this.addHandler=function(Nt,Bt){return kt.push(Nt,Bt),this},this.removeHandler=function(Nt){const Bt=kt.indexOf(Nt);return Bt!==-1&&kt.splice(Bt,2),this},this.getHandler=function(Nt){for(let Bt=0,Ut=kt.length;Bt<Ut;Bt+=2){const zt=kt[Bt],Zt=kt[Bt+1];if(zt.global&&(zt.lastIndex=0),zt.test(Nt))return Zt}return null}}}const DefaultLoadingManager=new LoadingManager;class Loader{constructor($){this.manager=$!==void 0?$:DefaultLoadingManager,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync($,lt){const ft=this;return new Promise(function(St,Tt){ft.load($,St,lt,Tt)})}parse(){}setCrossOrigin($){return this.crossOrigin=$,this}setWithCredentials($){return this.withCredentials=$,this}setPath($){return this.path=$,this}setResourcePath($){return this.resourcePath=$,this}setRequestHeader($){return this.requestHeader=$,this}}const loading={};class HttpError extends Error{constructor($,lt){super($),this.response=lt}}class FileLoader extends Loader{constructor($){super($)}load($,lt,ft,St){$===void 0&&($=""),this.path!==void 0&&($=this.path+$),$=this.manager.resolveURL($);const Tt=Cache.get($);if(Tt!==void 0)return this.manager.itemStart($),setTimeout(()=>{lt&&lt(Tt),this.manager.itemEnd($)},0),Tt;if(loading[$]!==void 0){loading[$].push({onLoad:lt,onProgress:ft,onError:St});return}loading[$]=[],loading[$].push({onLoad:lt,onProgress:ft,onError:St});const Ct=new Request($,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),At=this.mimeType,Rt=this.responseType;fetch(Ct).then(kt=>{if(kt.status===200||kt.status===0){if(kt.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||kt.body===void 0||kt.body.getReader===void 0)return kt;const Nt=loading[$],Bt=kt.body.getReader(),Ut=kt.headers.get("Content-Length")||kt.headers.get("X-File-Size"),zt=Ut?parseInt(Ut):0,Zt=zt!==0;let ln=0;const cn=new ReadableStream({start(hn){pn();function pn(){Bt.read().then(({done:dn,value:gn})=>{if(dn)hn.close();else{ln+=gn.byteLength;const vn=new ProgressEvent("progress",{lengthComputable:Zt,loaded:ln,total:zt});for(let Tn=0,Cn=Nt.length;Tn<Cn;Tn++){const $n=Nt[Tn];$n.onProgress&&$n.onProgress(vn)}hn.enqueue(gn),pn()}})}}});return new Response(cn)}else throw new HttpError(`fetch for "${kt.url}" responded with ${kt.status}: ${kt.statusText}`,kt)}).then(kt=>{switch(Rt){case"arraybuffer":return kt.arrayBuffer();case"blob":return kt.blob();case"document":return kt.text().then(Nt=>new DOMParser().parseFromString(Nt,At));case"json":return kt.json();default:if(At===void 0)return kt.text();{const Bt=/charset="?([^;"\s]*)"?/i.exec(At),Ut=Bt&&Bt[1]?Bt[1].toLowerCase():void 0,zt=new TextDecoder(Ut);return kt.arrayBuffer().then(Zt=>zt.decode(Zt))}}}).then(kt=>{Cache.add($,kt);const Nt=loading[$];delete loading[$];for(let Bt=0,Ut=Nt.length;Bt<Ut;Bt++){const zt=Nt[Bt];zt.onLoad&&zt.onLoad(kt)}}).catch(kt=>{const Nt=loading[$];if(Nt===void 0)throw this.manager.itemError($),kt;delete loading[$];for(let Bt=0,Ut=Nt.length;Bt<Ut;Bt++){const zt=Nt[Bt];zt.onError&&zt.onError(kt)}this.manager.itemError($)}).finally(()=>{this.manager.itemEnd($)}),this.manager.itemStart($)}setResponseType($){return this.responseType=$,this}setMimeType($){return this.mimeType=$,this}}class AnimationLoader extends Loader{constructor($){super($)}load($,lt,ft,St){const Tt=this,Ct=new FileLoader(this.manager);Ct.setPath(this.path),Ct.setRequestHeader(this.requestHeader),Ct.setWithCredentials(this.withCredentials),Ct.load($,function(At){try{lt(Tt.parse(JSON.parse(At)))}catch(Rt){St?St(Rt):console.error(Rt),Tt.manager.itemError($)}},ft,St)}parse($){const lt=[];for(let ft=0;ft<$.length;ft++){const St=AnimationClip.parse($[ft]);lt.push(St)}return lt}}class CompressedTextureLoader extends Loader{constructor($){super($)}load($,lt,ft,St){const Tt=this,Ct=[],At=new CompressedTexture,Rt=new FileLoader(this.manager);Rt.setPath(this.path),Rt.setResponseType("arraybuffer"),Rt.setRequestHeader(this.requestHeader),Rt.setWithCredentials(Tt.withCredentials);let kt=0;function Nt(Bt){Rt.load($[Bt],function(Ut){const zt=Tt.parse(Ut,!0);Ct[Bt]={width:zt.width,height:zt.height,format:zt.format,mipmaps:zt.mipmaps},kt+=1,kt===6&&(zt.mipmapCount===1&&(At.minFilter=LinearFilter),At.image=Ct,At.format=zt.format,At.needsUpdate=!0,lt&&lt(At))},ft,St)}if(Array.isArray($))for(let Bt=0,Ut=$.length;Bt<Ut;++Bt)Nt(Bt);else Rt.load($,function(Bt){const Ut=Tt.parse(Bt,!0);if(Ut.isCubemap){const zt=Ut.mipmaps.length/Ut.mipmapCount;for(let Zt=0;Zt<zt;Zt++){Ct[Zt]={mipmaps:[]};for(let ln=0;ln<Ut.mipmapCount;ln++)Ct[Zt].mipmaps.push(Ut.mipmaps[Zt*Ut.mipmapCount+ln]),Ct[Zt].format=Ut.format,Ct[Zt].width=Ut.width,Ct[Zt].height=Ut.height}At.image=Ct}else At.image.width=Ut.width,At.image.height=Ut.height,At.mipmaps=Ut.mipmaps;Ut.mipmapCount===1&&(At.minFilter=LinearFilter),At.format=Ut.format,At.needsUpdate=!0,lt&&lt(At)},ft,St);return At}}class ImageLoader extends Loader{constructor($){super($)}load($,lt,ft,St){this.path!==void 0&&($=this.path+$),$=this.manager.resolveURL($);const Tt=this,Ct=Cache.get($);if(Ct!==void 0)return Tt.manager.itemStart($),setTimeout(function(){lt&&lt(Ct),Tt.manager.itemEnd($)},0),Ct;const At=createElementNS$1("img");function Rt(){Nt(),Cache.add($,this),lt&&lt(this),Tt.manager.itemEnd($)}function kt(Bt){Nt(),St&&St(Bt),Tt.manager.itemError($),Tt.manager.itemEnd($)}function Nt(){At.removeEventListener("load",Rt,!1),At.removeEventListener("error",kt,!1)}return At.addEventListener("load",Rt,!1),At.addEventListener("error",kt,!1),$.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(At.crossOrigin=this.crossOrigin),Tt.manager.itemStart($),At.src=$,At}}class CubeTextureLoader extends Loader{constructor($){super($)}load($,lt,ft,St){const Tt=new CubeTexture,Ct=new ImageLoader(this.manager);Ct.setCrossOrigin(this.crossOrigin),Ct.setPath(this.path);let At=0;function Rt(kt){Ct.load($[kt],function(Nt){Tt.images[kt]=Nt,At++,At===6&&(Tt.needsUpdate=!0,lt&&lt(Tt))},void 0,St)}for(let kt=0;kt<$.length;++kt)Rt(kt);return Tt}}class DataTextureLoader extends Loader{constructor($){super($)}load($,lt,ft,St){const Tt=this,Ct=new DataTexture,At=new FileLoader(this.manager);return At.setResponseType("arraybuffer"),At.setRequestHeader(this.requestHeader),At.setPath(this.path),At.setWithCredentials(Tt.withCredentials),At.load($,function(Rt){const kt=Tt.parse(Rt);kt&&(kt.image!==void 0?Ct.image=kt.image:kt.data!==void 0&&(Ct.image.width=kt.width,Ct.image.height=kt.height,Ct.image.data=kt.data),Ct.wrapS=kt.wrapS!==void 0?kt.wrapS:ClampToEdgeWrapping,Ct.wrapT=kt.wrapT!==void 0?kt.wrapT:ClampToEdgeWrapping,Ct.magFilter=kt.magFilter!==void 0?kt.magFilter:LinearFilter,Ct.minFilter=kt.minFilter!==void 0?kt.minFilter:LinearFilter,Ct.anisotropy=kt.anisotropy!==void 0?kt.anisotropy:1,kt.encoding!==void 0&&(Ct.encoding=kt.encoding),kt.flipY!==void 0&&(Ct.flipY=kt.flipY),kt.format!==void 0&&(Ct.format=kt.format),kt.type!==void 0&&(Ct.type=kt.type),kt.mipmaps!==void 0&&(Ct.mipmaps=kt.mipmaps,Ct.minFilter=LinearMipmapLinearFilter),kt.mipmapCount===1&&(Ct.minFilter=LinearFilter),kt.generateMipmaps!==void 0&&(Ct.generateMipmaps=kt.generateMipmaps),Ct.needsUpdate=!0,lt&&lt(Ct,kt))},ft,St),Ct}}class TextureLoader extends Loader{constructor($){super($)}load($,lt,ft,St){const Tt=new Texture,Ct=new ImageLoader(this.manager);return Ct.setCrossOrigin(this.crossOrigin),Ct.setPath(this.path),Ct.load($,function(At){Tt.image=At,Tt.needsUpdate=!0,lt!==void 0&&lt(Tt)},ft,St),Tt}}class Light extends Object3D{constructor($,lt=1){super(),this.isLight=!0,this.type="Light",this.color=new Color($),this.intensity=lt}dispose(){}copy($,lt){return super.copy($,lt),this.color.copy($.color),this.intensity=$.intensity,this}toJSON($){const lt=super.toJSON($);return lt.object.color=this.color.getHex(),lt.object.intensity=this.intensity,this.groundColor!==void 0&&(lt.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(lt.object.distance=this.distance),this.angle!==void 0&&(lt.object.angle=this.angle),this.decay!==void 0&&(lt.object.decay=this.decay),this.penumbra!==void 0&&(lt.object.penumbra=this.penumbra),this.shadow!==void 0&&(lt.object.shadow=this.shadow.toJSON()),lt}}class HemisphereLight extends Light{constructor($,lt,ft){super($,ft),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Color(lt)}copy($,lt){return super.copy($,lt),this.groundColor.copy($.groundColor),this}}const _projScreenMatrix$1=new Matrix4,_lightPositionWorld$1=new Vector3,_lookTarget$1=new Vector3;class LightShadow{constructor($){this.camera=$,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices($){const lt=this.camera,ft=this.matrix;_lightPositionWorld$1.setFromMatrixPosition($.matrixWorld),lt.position.copy(_lightPositionWorld$1),_lookTarget$1.setFromMatrixPosition($.target.matrixWorld),lt.lookAt(_lookTarget$1),lt.updateMatrixWorld(),_projScreenMatrix$1.multiplyMatrices(lt.projectionMatrix,lt.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix$1),ft.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),ft.multiply(_projScreenMatrix$1)}getViewport($){return this._viewports[$]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy($){return this.camera=$.camera.clone(),this.bias=$.bias,this.radius=$.radius,this.mapSize.copy($.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const $={};return this.bias!==0&&($.bias=this.bias),this.normalBias!==0&&($.normalBias=this.normalBias),this.radius!==1&&($.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&($.mapSize=this.mapSize.toArray()),$.camera=this.camera.toJSON(!1).object,delete $.camera.matrix,$}}class SpotLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices($){const lt=this.camera,ft=RAD2DEG*2*$.angle*this.focus,St=this.mapSize.width/this.mapSize.height,Tt=$.distance||lt.far;(ft!==lt.fov||St!==lt.aspect||Tt!==lt.far)&&(lt.fov=ft,lt.aspect=St,lt.far=Tt,lt.updateProjectionMatrix()),super.updateMatrices($)}copy($){return super.copy($),this.focus=$.focus,this}}class SpotLight extends Light{constructor($,lt,ft=0,St=Math.PI/3,Tt=0,Ct=2){super($,lt),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.distance=ft,this.angle=St,this.penumbra=Tt,this.decay=Ct,this.map=null,this.shadow=new SpotLightShadow}get power(){return this.intensity*Math.PI}set power($){this.intensity=$/Math.PI}dispose(){this.shadow.dispose()}copy($,lt){return super.copy($,lt),this.distance=$.distance,this.angle=$.angle,this.penumbra=$.penumbra,this.decay=$.decay,this.target=$.target.clone(),this.shadow=$.shadow.clone(),this}}const _projScreenMatrix=new Matrix4,_lightPositionWorld=new Vector3,_lookTarget=new Vector3;class PointLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}updateMatrices($,lt=0){const ft=this.camera,St=this.matrix,Tt=$.distance||ft.far;Tt!==ft.far&&(ft.far=Tt,ft.updateProjectionMatrix()),_lightPositionWorld.setFromMatrixPosition($.matrixWorld),ft.position.copy(_lightPositionWorld),_lookTarget.copy(ft.position),_lookTarget.add(this._cubeDirections[lt]),ft.up.copy(this._cubeUps[lt]),ft.lookAt(_lookTarget),ft.updateMatrixWorld(),St.makeTranslation(-_lightPositionWorld.x,-_lightPositionWorld.y,-_lightPositionWorld.z),_projScreenMatrix.multiplyMatrices(ft.projectionMatrix,ft.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix)}}class PointLight extends Light{constructor($,lt,ft=0,St=2){super($,lt),this.isPointLight=!0,this.type="PointLight",this.distance=ft,this.decay=St,this.shadow=new PointLightShadow}get power(){return this.intensity*4*Math.PI}set power($){this.intensity=$/(4*Math.PI)}dispose(){this.shadow.dispose()}copy($,lt){return super.copy($,lt),this.distance=$.distance,this.decay=$.decay,this.shadow=$.shadow.clone(),this}}class DirectionalLightShadow extends LightShadow{constructor(){super(new OrthographicCamera$1(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class DirectionalLight extends Light{constructor($,lt){super($,lt),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}dispose(){this.shadow.dispose()}copy($){return super.copy($),this.target=$.target.clone(),this.shadow=$.shadow.clone(),this}}class AmbientLight extends Light{constructor($,lt){super($,lt),this.isAmbientLight=!0,this.type="AmbientLight"}}class RectAreaLight extends Light{constructor($,lt,ft=10,St=10){super($,lt),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=ft,this.height=St}get power(){return this.intensity*this.width*this.height*Math.PI}set power($){this.intensity=$/(this.width*this.height*Math.PI)}copy($){return super.copy($),this.width=$.width,this.height=$.height,this}toJSON($){const lt=super.toJSON($);return lt.object.width=this.width,lt.object.height=this.height,lt}}class SphericalHarmonics3{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let $=0;$<9;$++)this.coefficients.push(new Vector3)}set($){for(let lt=0;lt<9;lt++)this.coefficients[lt].copy($[lt]);return this}zero(){for(let $=0;$<9;$++)this.coefficients[$].set(0,0,0);return this}getAt($,lt){const ft=$.x,St=$.y,Tt=$.z,Ct=this.coefficients;return lt.copy(Ct[0]).multiplyScalar(.282095),lt.addScaledVector(Ct[1],.488603*St),lt.addScaledVector(Ct[2],.488603*Tt),lt.addScaledVector(Ct[3],.488603*ft),lt.addScaledVector(Ct[4],1.092548*(ft*St)),lt.addScaledVector(Ct[5],1.092548*(St*Tt)),lt.addScaledVector(Ct[6],.315392*(3*Tt*Tt-1)),lt.addScaledVector(Ct[7],1.092548*(ft*Tt)),lt.addScaledVector(Ct[8],.546274*(ft*ft-St*St)),lt}getIrradianceAt($,lt){const ft=$.x,St=$.y,Tt=$.z,Ct=this.coefficients;return lt.copy(Ct[0]).multiplyScalar(.886227),lt.addScaledVector(Ct[1],2*.511664*St),lt.addScaledVector(Ct[2],2*.511664*Tt),lt.addScaledVector(Ct[3],2*.511664*ft),lt.addScaledVector(Ct[4],2*.429043*ft*St),lt.addScaledVector(Ct[5],2*.429043*St*Tt),lt.addScaledVector(Ct[6],.743125*Tt*Tt-.247708),lt.addScaledVector(Ct[7],2*.429043*ft*Tt),lt.addScaledVector(Ct[8],.429043*(ft*ft-St*St)),lt}add($){for(let lt=0;lt<9;lt++)this.coefficients[lt].add($.coefficients[lt]);return this}addScaledSH($,lt){for(let ft=0;ft<9;ft++)this.coefficients[ft].addScaledVector($.coefficients[ft],lt);return this}scale($){for(let lt=0;lt<9;lt++)this.coefficients[lt].multiplyScalar($);return this}lerp($,lt){for(let ft=0;ft<9;ft++)this.coefficients[ft].lerp($.coefficients[ft],lt);return this}equals($){for(let lt=0;lt<9;lt++)if(!this.coefficients[lt].equals($.coefficients[lt]))return!1;return!0}copy($){return this.set($.coefficients)}clone(){return new this.constructor().copy(this)}fromArray($,lt=0){const ft=this.coefficients;for(let St=0;St<9;St++)ft[St].fromArray($,lt+St*3);return this}toArray($=[],lt=0){const ft=this.coefficients;for(let St=0;St<9;St++)ft[St].toArray($,lt+St*3);return $}static getBasisAt($,lt){const ft=$.x,St=$.y,Tt=$.z;lt[0]=.282095,lt[1]=.488603*St,lt[2]=.488603*Tt,lt[3]=.488603*ft,lt[4]=1.092548*ft*St,lt[5]=1.092548*St*Tt,lt[6]=.315392*(3*Tt*Tt-1),lt[7]=1.092548*ft*Tt,lt[8]=.546274*(ft*ft-St*St)}}class LightProbe extends Light{constructor($=new SphericalHarmonics3,lt=1){super(void 0,lt),this.isLightProbe=!0,this.sh=$}copy($){return super.copy($),this.sh.copy($.sh),this}fromJSON($){return this.intensity=$.intensity,this.sh.fromArray($.sh),this}toJSON($){const lt=super.toJSON($);return lt.object.sh=this.sh.toArray(),lt}}class MaterialLoader extends Loader{constructor($){super($),this.textures={}}load($,lt,ft,St){const Tt=this,Ct=new FileLoader(Tt.manager);Ct.setPath(Tt.path),Ct.setRequestHeader(Tt.requestHeader),Ct.setWithCredentials(Tt.withCredentials),Ct.load($,function(At){try{lt(Tt.parse(JSON.parse(At)))}catch(Rt){St?St(Rt):console.error(Rt),Tt.manager.itemError($)}},ft,St)}parse($){const lt=this.textures;function ft(Tt){return lt[Tt]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",Tt),lt[Tt]}const St=MaterialLoader.createMaterialFromType($.type);if($.uuid!==void 0&&(St.uuid=$.uuid),$.name!==void 0&&(St.name=$.name),$.color!==void 0&&St.color!==void 0&&St.color.setHex($.color),$.roughness!==void 0&&(St.roughness=$.roughness),$.metalness!==void 0&&(St.metalness=$.metalness),$.sheen!==void 0&&(St.sheen=$.sheen),$.sheenColor!==void 0&&(St.sheenColor=new Color().setHex($.sheenColor)),$.sheenRoughness!==void 0&&(St.sheenRoughness=$.sheenRoughness),$.emissive!==void 0&&St.emissive!==void 0&&St.emissive.setHex($.emissive),$.specular!==void 0&&St.specular!==void 0&&St.specular.setHex($.specular),$.specularIntensity!==void 0&&(St.specularIntensity=$.specularIntensity),$.specularColor!==void 0&&St.specularColor!==void 0&&St.specularColor.setHex($.specularColor),$.shininess!==void 0&&(St.shininess=$.shininess),$.clearcoat!==void 0&&(St.clearcoat=$.clearcoat),$.clearcoatRoughness!==void 0&&(St.clearcoatRoughness=$.clearcoatRoughness),$.iridescence!==void 0&&(St.iridescence=$.iridescence),$.iridescenceIOR!==void 0&&(St.iridescenceIOR=$.iridescenceIOR),$.iridescenceThicknessRange!==void 0&&(St.iridescenceThicknessRange=$.iridescenceThicknessRange),$.transmission!==void 0&&(St.transmission=$.transmission),$.thickness!==void 0&&(St.thickness=$.thickness),$.attenuationDistance!==void 0&&(St.attenuationDistance=$.attenuationDistance),$.attenuationColor!==void 0&&St.attenuationColor!==void 0&&St.attenuationColor.setHex($.attenuationColor),$.fog!==void 0&&(St.fog=$.fog),$.flatShading!==void 0&&(St.flatShading=$.flatShading),$.blending!==void 0&&(St.blending=$.blending),$.combine!==void 0&&(St.combine=$.combine),$.side!==void 0&&(St.side=$.side),$.shadowSide!==void 0&&(St.shadowSide=$.shadowSide),$.opacity!==void 0&&(St.opacity=$.opacity),$.transparent!==void 0&&(St.transparent=$.transparent),$.alphaTest!==void 0&&(St.alphaTest=$.alphaTest),$.depthTest!==void 0&&(St.depthTest=$.depthTest),$.depthWrite!==void 0&&(St.depthWrite=$.depthWrite),$.colorWrite!==void 0&&(St.colorWrite=$.colorWrite),$.stencilWrite!==void 0&&(St.stencilWrite=$.stencilWrite),$.stencilWriteMask!==void 0&&(St.stencilWriteMask=$.stencilWriteMask),$.stencilFunc!==void 0&&(St.stencilFunc=$.stencilFunc),$.stencilRef!==void 0&&(St.stencilRef=$.stencilRef),$.stencilFuncMask!==void 0&&(St.stencilFuncMask=$.stencilFuncMask),$.stencilFail!==void 0&&(St.stencilFail=$.stencilFail),$.stencilZFail!==void 0&&(St.stencilZFail=$.stencilZFail),$.stencilZPass!==void 0&&(St.stencilZPass=$.stencilZPass),$.wireframe!==void 0&&(St.wireframe=$.wireframe),$.wireframeLinewidth!==void 0&&(St.wireframeLinewidth=$.wireframeLinewidth),$.wireframeLinecap!==void 0&&(St.wireframeLinecap=$.wireframeLinecap),$.wireframeLinejoin!==void 0&&(St.wireframeLinejoin=$.wireframeLinejoin),$.rotation!==void 0&&(St.rotation=$.rotation),$.linewidth!==1&&(St.linewidth=$.linewidth),$.dashSize!==void 0&&(St.dashSize=$.dashSize),$.gapSize!==void 0&&(St.gapSize=$.gapSize),$.scale!==void 0&&(St.scale=$.scale),$.polygonOffset!==void 0&&(St.polygonOffset=$.polygonOffset),$.polygonOffsetFactor!==void 0&&(St.polygonOffsetFactor=$.polygonOffsetFactor),$.polygonOffsetUnits!==void 0&&(St.polygonOffsetUnits=$.polygonOffsetUnits),$.dithering!==void 0&&(St.dithering=$.dithering),$.alphaToCoverage!==void 0&&(St.alphaToCoverage=$.alphaToCoverage),$.premultipliedAlpha!==void 0&&(St.premultipliedAlpha=$.premultipliedAlpha),$.forceSinglePass!==void 0&&(St.forceSinglePass=$.forceSinglePass),$.visible!==void 0&&(St.visible=$.visible),$.toneMapped!==void 0&&(St.toneMapped=$.toneMapped),$.userData!==void 0&&(St.userData=$.userData),$.vertexColors!==void 0&&(typeof $.vertexColors=="number"?St.vertexColors=$.vertexColors>0:St.vertexColors=$.vertexColors),$.uniforms!==void 0)for(const Tt in $.uniforms){const Ct=$.uniforms[Tt];switch(St.uniforms[Tt]={},Ct.type){case"t":St.uniforms[Tt].value=ft(Ct.value);break;case"c":St.uniforms[Tt].value=new Color().setHex(Ct.value);break;case"v2":St.uniforms[Tt].value=new Vector2().fromArray(Ct.value);break;case"v3":St.uniforms[Tt].value=new Vector3().fromArray(Ct.value);break;case"v4":St.uniforms[Tt].value=new Vector4().fromArray(Ct.value);break;case"m3":St.uniforms[Tt].value=new Matrix3().fromArray(Ct.value);break;case"m4":St.uniforms[Tt].value=new Matrix4().fromArray(Ct.value);break;default:St.uniforms[Tt].value=Ct.value}}if($.defines!==void 0&&(St.defines=$.defines),$.vertexShader!==void 0&&(St.vertexShader=$.vertexShader),$.fragmentShader!==void 0&&(St.fragmentShader=$.fragmentShader),$.glslVersion!==void 0&&(St.glslVersion=$.glslVersion),$.extensions!==void 0)for(const Tt in $.extensions)St.extensions[Tt]=$.extensions[Tt];if($.size!==void 0&&(St.size=$.size),$.sizeAttenuation!==void 0&&(St.sizeAttenuation=$.sizeAttenuation),$.map!==void 0&&(St.map=ft($.map)),$.matcap!==void 0&&(St.matcap=ft($.matcap)),$.alphaMap!==void 0&&(St.alphaMap=ft($.alphaMap)),$.bumpMap!==void 0&&(St.bumpMap=ft($.bumpMap)),$.bumpScale!==void 0&&(St.bumpScale=$.bumpScale),$.normalMap!==void 0&&(St.normalMap=ft($.normalMap)),$.normalMapType!==void 0&&(St.normalMapType=$.normalMapType),$.normalScale!==void 0){let Tt=$.normalScale;Array.isArray(Tt)===!1&&(Tt=[Tt,Tt]),St.normalScale=new Vector2().fromArray(Tt)}return $.displacementMap!==void 0&&(St.displacementMap=ft($.displacementMap)),$.displacementScale!==void 0&&(St.displacementScale=$.displacementScale),$.displacementBias!==void 0&&(St.displacementBias=$.displacementBias),$.roughnessMap!==void 0&&(St.roughnessMap=ft($.roughnessMap)),$.metalnessMap!==void 0&&(St.metalnessMap=ft($.metalnessMap)),$.emissiveMap!==void 0&&(St.emissiveMap=ft($.emissiveMap)),$.emissiveIntensity!==void 0&&(St.emissiveIntensity=$.emissiveIntensity),$.specularMap!==void 0&&(St.specularMap=ft($.specularMap)),$.specularIntensityMap!==void 0&&(St.specularIntensityMap=ft($.specularIntensityMap)),$.specularColorMap!==void 0&&(St.specularColorMap=ft($.specularColorMap)),$.envMap!==void 0&&(St.envMap=ft($.envMap)),$.envMapIntensity!==void 0&&(St.envMapIntensity=$.envMapIntensity),$.reflectivity!==void 0&&(St.reflectivity=$.reflectivity),$.refractionRatio!==void 0&&(St.refractionRatio=$.refractionRatio),$.lightMap!==void 0&&(St.lightMap=ft($.lightMap)),$.lightMapIntensity!==void 0&&(St.lightMapIntensity=$.lightMapIntensity),$.aoMap!==void 0&&(St.aoMap=ft($.aoMap)),$.aoMapIntensity!==void 0&&(St.aoMapIntensity=$.aoMapIntensity),$.gradientMap!==void 0&&(St.gradientMap=ft($.gradientMap)),$.clearcoatMap!==void 0&&(St.clearcoatMap=ft($.clearcoatMap)),$.clearcoatRoughnessMap!==void 0&&(St.clearcoatRoughnessMap=ft($.clearcoatRoughnessMap)),$.clearcoatNormalMap!==void 0&&(St.clearcoatNormalMap=ft($.clearcoatNormalMap)),$.clearcoatNormalScale!==void 0&&(St.clearcoatNormalScale=new Vector2().fromArray($.clearcoatNormalScale)),$.iridescenceMap!==void 0&&(St.iridescenceMap=ft($.iridescenceMap)),$.iridescenceThicknessMap!==void 0&&(St.iridescenceThicknessMap=ft($.iridescenceThicknessMap)),$.transmissionMap!==void 0&&(St.transmissionMap=ft($.transmissionMap)),$.thicknessMap!==void 0&&(St.thicknessMap=ft($.thicknessMap)),$.sheenColorMap!==void 0&&(St.sheenColorMap=ft($.sheenColorMap)),$.sheenRoughnessMap!==void 0&&(St.sheenRoughnessMap=ft($.sheenRoughnessMap)),St}setTextures($){return this.textures=$,this}static createMaterialFromType($){const lt={ShadowMaterial,SpriteMaterial,RawShaderMaterial,ShaderMaterial,PointsMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshPhongMaterial,MeshToonMaterial,MeshNormalMaterial,MeshLambertMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshBasicMaterial,MeshMatcapMaterial,LineDashedMaterial,LineBasicMaterial,Material};return new lt[$]}}class LoaderUtils{static decodeText($){if(typeof TextDecoder<"u")return new TextDecoder().decode($);let lt="";for(let ft=0,St=$.length;ft<St;ft++)lt+=String.fromCharCode($[ft]);try{return decodeURIComponent(escape(lt))}catch{return lt}}static extractUrlBase($){const lt=$.lastIndexOf("/");return lt===-1?"./":$.slice(0,lt+1)}static resolveURL($,lt){return typeof $!="string"||$===""?"":(/^https?:\/\//i.test(lt)&&/^\//.test($)&&(lt=lt.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test($)||/^data:.*,.*$/i.test($)||/^blob:.*$/i.test($)?$:lt+$)}}class InstancedBufferGeometry extends BufferGeometry{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy($){return super.copy($),this.instanceCount=$.instanceCount,this}toJSON(){const $=super.toJSON();return $.instanceCount=this.instanceCount,$.isInstancedBufferGeometry=!0,$}}class BufferGeometryLoader extends Loader{constructor($){super($)}load($,lt,ft,St){const Tt=this,Ct=new FileLoader(Tt.manager);Ct.setPath(Tt.path),Ct.setRequestHeader(Tt.requestHeader),Ct.setWithCredentials(Tt.withCredentials),Ct.load($,function(At){try{lt(Tt.parse(JSON.parse(At)))}catch(Rt){St?St(Rt):console.error(Rt),Tt.manager.itemError($)}},ft,St)}parse($){const lt={},ft={};function St(zt,Zt){if(lt[Zt]!==void 0)return lt[Zt];const cn=zt.interleavedBuffers[Zt],hn=Tt(zt,cn.buffer),pn=getTypedArray(cn.type,hn),dn=new InterleavedBuffer(pn,cn.stride);return dn.uuid=cn.uuid,lt[Zt]=dn,dn}function Tt(zt,Zt){if(ft[Zt]!==void 0)return ft[Zt];const cn=zt.arrayBuffers[Zt],hn=new Uint32Array(cn).buffer;return ft[Zt]=hn,hn}const Ct=$.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,At=$.data.index;if(At!==void 0){const zt=getTypedArray(At.type,At.array);Ct.setIndex(new BufferAttribute(zt,1))}const Rt=$.data.attributes;for(const zt in Rt){const Zt=Rt[zt];let ln;if(Zt.isInterleavedBufferAttribute){const cn=St($.data,Zt.data);ln=new InterleavedBufferAttribute(cn,Zt.itemSize,Zt.offset,Zt.normalized)}else{const cn=getTypedArray(Zt.type,Zt.array),hn=Zt.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute;ln=new hn(cn,Zt.itemSize,Zt.normalized)}Zt.name!==void 0&&(ln.name=Zt.name),Zt.usage!==void 0&&ln.setUsage(Zt.usage),Zt.updateRange!==void 0&&(ln.updateRange.offset=Zt.updateRange.offset,ln.updateRange.count=Zt.updateRange.count),Ct.setAttribute(zt,ln)}const kt=$.data.morphAttributes;if(kt)for(const zt in kt){const Zt=kt[zt],ln=[];for(let cn=0,hn=Zt.length;cn<hn;cn++){const pn=Zt[cn];let dn;if(pn.isInterleavedBufferAttribute){const gn=St($.data,pn.data);dn=new InterleavedBufferAttribute(gn,pn.itemSize,pn.offset,pn.normalized)}else{const gn=getTypedArray(pn.type,pn.array);dn=new BufferAttribute(gn,pn.itemSize,pn.normalized)}pn.name!==void 0&&(dn.name=pn.name),ln.push(dn)}Ct.morphAttributes[zt]=ln}$.data.morphTargetsRelative&&(Ct.morphTargetsRelative=!0);const Bt=$.data.groups||$.data.drawcalls||$.data.offsets;if(Bt!==void 0)for(let zt=0,Zt=Bt.length;zt!==Zt;++zt){const ln=Bt[zt];Ct.addGroup(ln.start,ln.count,ln.materialIndex)}const Ut=$.data.boundingSphere;if(Ut!==void 0){const zt=new Vector3;Ut.center!==void 0&&zt.fromArray(Ut.center),Ct.boundingSphere=new Sphere$1(zt,Ut.radius)}return $.name&&(Ct.name=$.name),$.userData&&(Ct.userData=$.userData),Ct}}class ObjectLoader extends Loader{constructor($){super($)}load($,lt,ft,St){const Tt=this,Ct=this.path===""?LoaderUtils.extractUrlBase($):this.path;this.resourcePath=this.resourcePath||Ct;const At=new FileLoader(this.manager);At.setPath(this.path),At.setRequestHeader(this.requestHeader),At.setWithCredentials(this.withCredentials),At.load($,function(Rt){let kt=null;try{kt=JSON.parse(Rt)}catch(Bt){St!==void 0&&St(Bt),console.error("THREE:ObjectLoader: Can't parse "+$+".",Bt.message);return}const Nt=kt.metadata;if(Nt===void 0||Nt.type===void 0||Nt.type.toLowerCase()==="geometry"){St!==void 0&&St(new Error("THREE.ObjectLoader: Can't load "+$)),console.error("THREE.ObjectLoader: Can't load "+$);return}Tt.parse(kt,lt)},ft,St)}async loadAsync($,lt){const ft=this,St=this.path===""?LoaderUtils.extractUrlBase($):this.path;this.resourcePath=this.resourcePath||St;const Tt=new FileLoader(this.manager);Tt.setPath(this.path),Tt.setRequestHeader(this.requestHeader),Tt.setWithCredentials(this.withCredentials);const Ct=await Tt.loadAsync($,lt),At=JSON.parse(Ct),Rt=At.metadata;if(Rt===void 0||Rt.type===void 0||Rt.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+$);return await ft.parseAsync(At)}parse($,lt){const ft=this.parseAnimations($.animations),St=this.parseShapes($.shapes),Tt=this.parseGeometries($.geometries,St),Ct=this.parseImages($.images,function(){lt!==void 0&&lt(kt)}),At=this.parseTextures($.textures,Ct),Rt=this.parseMaterials($.materials,At),kt=this.parseObject($.object,Tt,Rt,At,ft),Nt=this.parseSkeletons($.skeletons,kt);if(this.bindSkeletons(kt,Nt),lt!==void 0){let Bt=!1;for(const Ut in Ct)if(Ct[Ut].data instanceof HTMLImageElement){Bt=!0;break}Bt===!1&&lt(kt)}return kt}async parseAsync($){const lt=this.parseAnimations($.animations),ft=this.parseShapes($.shapes),St=this.parseGeometries($.geometries,ft),Tt=await this.parseImagesAsync($.images),Ct=this.parseTextures($.textures,Tt),At=this.parseMaterials($.materials,Ct),Rt=this.parseObject($.object,St,At,Ct,lt),kt=this.parseSkeletons($.skeletons,Rt);return this.bindSkeletons(Rt,kt),Rt}parseShapes($){const lt={};if($!==void 0)for(let ft=0,St=$.length;ft<St;ft++){const Tt=new Shape().fromJSON($[ft]);lt[Tt.uuid]=Tt}return lt}parseSkeletons($,lt){const ft={},St={};if(lt.traverse(function(Tt){Tt.isBone&&(St[Tt.uuid]=Tt)}),$!==void 0)for(let Tt=0,Ct=$.length;Tt<Ct;Tt++){const At=new Skeleton().fromJSON($[Tt],St);ft[At.uuid]=At}return ft}parseGeometries($,lt){const ft={};if($!==void 0){const St=new BufferGeometryLoader;for(let Tt=0,Ct=$.length;Tt<Ct;Tt++){let At;const Rt=$[Tt];switch(Rt.type){case"BufferGeometry":case"InstancedBufferGeometry":At=St.parse(Rt);break;default:Rt.type in Geometries?At=Geometries[Rt.type].fromJSON(Rt,lt):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${Rt.type}"`)}At.uuid=Rt.uuid,Rt.name!==void 0&&(At.name=Rt.name),Rt.userData!==void 0&&(At.userData=Rt.userData),ft[Rt.uuid]=At}}return ft}parseMaterials($,lt){const ft={},St={};if($!==void 0){const Tt=new MaterialLoader;Tt.setTextures(lt);for(let Ct=0,At=$.length;Ct<At;Ct++){const Rt=$[Ct];ft[Rt.uuid]===void 0&&(ft[Rt.uuid]=Tt.parse(Rt)),St[Rt.uuid]=ft[Rt.uuid]}}return St}parseAnimations($){const lt={};if($!==void 0)for(let ft=0;ft<$.length;ft++){const St=$[ft],Tt=AnimationClip.parse(St);lt[Tt.uuid]=Tt}return lt}parseImages($,lt){const ft=this,St={};let Tt;function Ct(Rt){return ft.manager.itemStart(Rt),Tt.load(Rt,function(){ft.manager.itemEnd(Rt)},void 0,function(){ft.manager.itemError(Rt),ft.manager.itemEnd(Rt)})}function At(Rt){if(typeof Rt=="string"){const kt=Rt,Nt=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(kt)?kt:ft.resourcePath+kt;return Ct(Nt)}else return Rt.data?{data:getTypedArray(Rt.type,Rt.data),width:Rt.width,height:Rt.height}:null}if($!==void 0&&$.length>0){const Rt=new LoadingManager(lt);Tt=new ImageLoader(Rt),Tt.setCrossOrigin(this.crossOrigin);for(let kt=0,Nt=$.length;kt<Nt;kt++){const Bt=$[kt],Ut=Bt.url;if(Array.isArray(Ut)){const zt=[];for(let Zt=0,ln=Ut.length;Zt<ln;Zt++){const cn=Ut[Zt],hn=At(cn);hn!==null&&(hn instanceof HTMLImageElement?zt.push(hn):zt.push(new DataTexture(hn.data,hn.width,hn.height)))}St[Bt.uuid]=new Source(zt)}else{const zt=At(Bt.url);St[Bt.uuid]=new Source(zt)}}}return St}async parseImagesAsync($){const lt=this,ft={};let St;async function Tt(Ct){if(typeof Ct=="string"){const At=Ct,Rt=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(At)?At:lt.resourcePath+At;return await St.loadAsync(Rt)}else return Ct.data?{data:getTypedArray(Ct.type,Ct.data),width:Ct.width,height:Ct.height}:null}if($!==void 0&&$.length>0){St=new ImageLoader(this.manager),St.setCrossOrigin(this.crossOrigin);for(let Ct=0,At=$.length;Ct<At;Ct++){const Rt=$[Ct],kt=Rt.url;if(Array.isArray(kt)){const Nt=[];for(let Bt=0,Ut=kt.length;Bt<Ut;Bt++){const zt=kt[Bt],Zt=await Tt(zt);Zt!==null&&(Zt instanceof HTMLImageElement?Nt.push(Zt):Nt.push(new DataTexture(Zt.data,Zt.width,Zt.height)))}ft[Rt.uuid]=new Source(Nt)}else{const Nt=await Tt(Rt.url);ft[Rt.uuid]=new Source(Nt)}}}return ft}parseTextures($,lt){function ft(Tt,Ct){return typeof Tt=="number"?Tt:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",Tt),Ct[Tt])}const St={};if($!==void 0)for(let Tt=0,Ct=$.length;Tt<Ct;Tt++){const At=$[Tt];At.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',At.uuid),lt[At.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",At.image);const Rt=lt[At.image],kt=Rt.data;let Nt;Array.isArray(kt)?(Nt=new CubeTexture,kt.length===6&&(Nt.needsUpdate=!0)):(kt&&kt.data?Nt=new DataTexture:Nt=new Texture,kt&&(Nt.needsUpdate=!0)),Nt.source=Rt,Nt.uuid=At.uuid,At.name!==void 0&&(Nt.name=At.name),At.mapping!==void 0&&(Nt.mapping=ft(At.mapping,TEXTURE_MAPPING)),At.offset!==void 0&&Nt.offset.fromArray(At.offset),At.repeat!==void 0&&Nt.repeat.fromArray(At.repeat),At.center!==void 0&&Nt.center.fromArray(At.center),At.rotation!==void 0&&(Nt.rotation=At.rotation),At.wrap!==void 0&&(Nt.wrapS=ft(At.wrap[0],TEXTURE_WRAPPING),Nt.wrapT=ft(At.wrap[1],TEXTURE_WRAPPING)),At.format!==void 0&&(Nt.format=At.format),At.internalFormat!==void 0&&(Nt.internalFormat=At.internalFormat),At.type!==void 0&&(Nt.type=At.type),At.encoding!==void 0&&(Nt.encoding=At.encoding),At.minFilter!==void 0&&(Nt.minFilter=ft(At.minFilter,TEXTURE_FILTER)),At.magFilter!==void 0&&(Nt.magFilter=ft(At.magFilter,TEXTURE_FILTER)),At.anisotropy!==void 0&&(Nt.anisotropy=At.anisotropy),At.flipY!==void 0&&(Nt.flipY=At.flipY),At.generateMipmaps!==void 0&&(Nt.generateMipmaps=At.generateMipmaps),At.premultiplyAlpha!==void 0&&(Nt.premultiplyAlpha=At.premultiplyAlpha),At.unpackAlignment!==void 0&&(Nt.unpackAlignment=At.unpackAlignment),At.userData!==void 0&&(Nt.userData=At.userData),St[At.uuid]=Nt}return St}parseObject($,lt,ft,St,Tt){let Ct;function At(Ut){return lt[Ut]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",Ut),lt[Ut]}function Rt(Ut){if(Ut!==void 0){if(Array.isArray(Ut)){const zt=[];for(let Zt=0,ln=Ut.length;Zt<ln;Zt++){const cn=Ut[Zt];ft[cn]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",cn),zt.push(ft[cn])}return zt}return ft[Ut]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",Ut),ft[Ut]}}function kt(Ut){return St[Ut]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",Ut),St[Ut]}let Nt,Bt;switch($.type){case"Scene":Ct=new Scene,$.background!==void 0&&(Number.isInteger($.background)?Ct.background=new Color($.background):Ct.background=kt($.background)),$.environment!==void 0&&(Ct.environment=kt($.environment)),$.fog!==void 0&&($.fog.type==="Fog"?Ct.fog=new Fog($.fog.color,$.fog.near,$.fog.far):$.fog.type==="FogExp2"&&(Ct.fog=new FogExp2($.fog.color,$.fog.density))),$.backgroundBlurriness!==void 0&&(Ct.backgroundBlurriness=$.backgroundBlurriness),$.backgroundIntensity!==void 0&&(Ct.backgroundIntensity=$.backgroundIntensity);break;case"PerspectiveCamera":Ct=new PerspectiveCamera($.fov,$.aspect,$.near,$.far),$.focus!==void 0&&(Ct.focus=$.focus),$.zoom!==void 0&&(Ct.zoom=$.zoom),$.filmGauge!==void 0&&(Ct.filmGauge=$.filmGauge),$.filmOffset!==void 0&&(Ct.filmOffset=$.filmOffset),$.view!==void 0&&(Ct.view=Object.assign({},$.view));break;case"OrthographicCamera":Ct=new OrthographicCamera$1($.left,$.right,$.top,$.bottom,$.near,$.far),$.zoom!==void 0&&(Ct.zoom=$.zoom),$.view!==void 0&&(Ct.view=Object.assign({},$.view));break;case"AmbientLight":Ct=new AmbientLight($.color,$.intensity);break;case"DirectionalLight":Ct=new DirectionalLight($.color,$.intensity);break;case"PointLight":Ct=new PointLight($.color,$.intensity,$.distance,$.decay);break;case"RectAreaLight":Ct=new RectAreaLight($.color,$.intensity,$.width,$.height);break;case"SpotLight":Ct=new SpotLight($.color,$.intensity,$.distance,$.angle,$.penumbra,$.decay);break;case"HemisphereLight":Ct=new HemisphereLight($.color,$.groundColor,$.intensity);break;case"LightProbe":Ct=new LightProbe().fromJSON($);break;case"SkinnedMesh":Nt=At($.geometry),Bt=Rt($.material),Ct=new SkinnedMesh(Nt,Bt),$.bindMode!==void 0&&(Ct.bindMode=$.bindMode),$.bindMatrix!==void 0&&Ct.bindMatrix.fromArray($.bindMatrix),$.skeleton!==void 0&&(Ct.skeleton=$.skeleton);break;case"Mesh":Nt=At($.geometry),Bt=Rt($.material),Ct=new Mesh(Nt,Bt);break;case"InstancedMesh":Nt=At($.geometry),Bt=Rt($.material);const Ut=$.count,zt=$.instanceMatrix,Zt=$.instanceColor;Ct=new InstancedMesh(Nt,Bt,Ut),Ct.instanceMatrix=new InstancedBufferAttribute(new Float32Array(zt.array),16),Zt!==void 0&&(Ct.instanceColor=new InstancedBufferAttribute(new Float32Array(Zt.array),Zt.itemSize));break;case"LOD":Ct=new LOD;break;case"Line":Ct=new Line$2(At($.geometry),Rt($.material));break;case"LineLoop":Ct=new LineLoop(At($.geometry),Rt($.material));break;case"LineSegments":Ct=new LineSegments(At($.geometry),Rt($.material));break;case"PointCloud":case"Points":Ct=new Points(At($.geometry),Rt($.material));break;case"Sprite":Ct=new Sprite(Rt($.material));break;case"Group":Ct=new Group;break;case"Bone":Ct=new Bone;break;default:Ct=new Object3D}if(Ct.uuid=$.uuid,$.name!==void 0&&(Ct.name=$.name),$.matrix!==void 0?(Ct.matrix.fromArray($.matrix),$.matrixAutoUpdate!==void 0&&(Ct.matrixAutoUpdate=$.matrixAutoUpdate),Ct.matrixAutoUpdate&&Ct.matrix.decompose(Ct.position,Ct.quaternion,Ct.scale)):($.position!==void 0&&Ct.position.fromArray($.position),$.rotation!==void 0&&Ct.rotation.fromArray($.rotation),$.quaternion!==void 0&&Ct.quaternion.fromArray($.quaternion),$.scale!==void 0&&Ct.scale.fromArray($.scale)),$.castShadow!==void 0&&(Ct.castShadow=$.castShadow),$.receiveShadow!==void 0&&(Ct.receiveShadow=$.receiveShadow),$.shadow&&($.shadow.bias!==void 0&&(Ct.shadow.bias=$.shadow.bias),$.shadow.normalBias!==void 0&&(Ct.shadow.normalBias=$.shadow.normalBias),$.shadow.radius!==void 0&&(Ct.shadow.radius=$.shadow.radius),$.shadow.mapSize!==void 0&&Ct.shadow.mapSize.fromArray($.shadow.mapSize),$.shadow.camera!==void 0&&(Ct.shadow.camera=this.parseObject($.shadow.camera))),$.visible!==void 0&&(Ct.visible=$.visible),$.frustumCulled!==void 0&&(Ct.frustumCulled=$.frustumCulled),$.renderOrder!==void 0&&(Ct.renderOrder=$.renderOrder),$.userData!==void 0&&(Ct.userData=$.userData),$.layers!==void 0&&(Ct.layers.mask=$.layers),$.children!==void 0){const Ut=$.children;for(let zt=0;zt<Ut.length;zt++)Ct.add(this.parseObject(Ut[zt],lt,ft,St,Tt))}if($.animations!==void 0){const Ut=$.animations;for(let zt=0;zt<Ut.length;zt++){const Zt=Ut[zt];Ct.animations.push(Tt[Zt])}}if($.type==="LOD"){$.autoUpdate!==void 0&&(Ct.autoUpdate=$.autoUpdate);const Ut=$.levels;for(let zt=0;zt<Ut.length;zt++){const Zt=Ut[zt],ln=Ct.getObjectByProperty("uuid",Zt.object);ln!==void 0&&Ct.addLevel(ln,Zt.distance,Zt.hysteresis)}}return Ct}bindSkeletons($,lt){Object.keys(lt).length!==0&&$.traverse(function(ft){if(ft.isSkinnedMesh===!0&&ft.skeleton!==void 0){const St=lt[ft.skeleton];St===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",ft.skeleton):ft.bind(St,ft.bindMatrix)}})}}const TEXTURE_MAPPING={UVMapping,CubeReflectionMapping,CubeRefractionMapping,EquirectangularReflectionMapping,EquirectangularRefractionMapping,CubeUVReflectionMapping},TEXTURE_WRAPPING={RepeatWrapping,ClampToEdgeWrapping,MirroredRepeatWrapping},TEXTURE_FILTER={NearestFilter,NearestMipmapNearestFilter,NearestMipmapLinearFilter,LinearFilter,LinearMipmapNearestFilter,LinearMipmapLinearFilter};class ImageBitmapLoader extends Loader{constructor($){super($),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions($){return this.options=$,this}load($,lt,ft,St){$===void 0&&($=""),this.path!==void 0&&($=this.path+$),$=this.manager.resolveURL($);const Tt=this,Ct=Cache.get($);if(Ct!==void 0)return Tt.manager.itemStart($),setTimeout(function(){lt&&lt(Ct),Tt.manager.itemEnd($)},0),Ct;const At={};At.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",At.headers=this.requestHeader,fetch($,At).then(function(Rt){return Rt.blob()}).then(function(Rt){return createImageBitmap(Rt,Object.assign(Tt.options,{colorSpaceConversion:"none"}))}).then(function(Rt){Cache.add($,Rt),lt&&lt(Rt),Tt.manager.itemEnd($)}).catch(function(Rt){St&&St(Rt),Tt.manager.itemError($),Tt.manager.itemEnd($)}),Tt.manager.itemStart($)}}let _context;class AudioContext{static getContext(){return _context===void 0&&(_context=new(window.AudioContext||window.webkitAudioContext)),_context}static setContext($){_context=$}}class AudioLoader extends Loader{constructor($){super($)}load($,lt,ft,St){const Tt=this,Ct=new FileLoader(this.manager);Ct.setResponseType("arraybuffer"),Ct.setPath(this.path),Ct.setRequestHeader(this.requestHeader),Ct.setWithCredentials(this.withCredentials),Ct.load($,function(At){try{const Rt=At.slice(0);AudioContext.getContext().decodeAudioData(Rt,function(Nt){lt(Nt)})}catch(Rt){St?St(Rt):console.error(Rt),Tt.manager.itemError($)}},ft,St)}}class HemisphereLightProbe extends LightProbe{constructor($,lt,ft=1){super(void 0,ft),this.isHemisphereLightProbe=!0;const St=new Color().set($),Tt=new Color().set(lt),Ct=new Vector3(St.r,St.g,St.b),At=new Vector3(Tt.r,Tt.g,Tt.b),Rt=Math.sqrt(Math.PI),kt=Rt*Math.sqrt(.75);this.sh.coefficients[0].copy(Ct).add(At).multiplyScalar(Rt),this.sh.coefficients[1].copy(Ct).sub(At).multiplyScalar(kt)}}class AmbientLightProbe extends LightProbe{constructor($,lt=1){super(void 0,lt),this.isAmbientLightProbe=!0;const ft=new Color().set($);this.sh.coefficients[0].set(ft.r,ft.g,ft.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const _eyeRight=new Matrix4,_eyeLeft=new Matrix4,_projectionMatrix=new Matrix4;class StereoCamera{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update($){const lt=this._cache;if(lt.focus!==$.focus||lt.fov!==$.fov||lt.aspect!==$.aspect*this.aspect||lt.near!==$.near||lt.far!==$.far||lt.zoom!==$.zoom||lt.eyeSep!==this.eyeSep){lt.focus=$.focus,lt.fov=$.fov,lt.aspect=$.aspect*this.aspect,lt.near=$.near,lt.far=$.far,lt.zoom=$.zoom,lt.eyeSep=this.eyeSep,_projectionMatrix.copy($.projectionMatrix);const St=lt.eyeSep/2,Tt=St*lt.near/lt.focus,Ct=lt.near*Math.tan(DEG2RAD*lt.fov*.5)/lt.zoom;let At,Rt;_eyeLeft.elements[12]=-St,_eyeRight.elements[12]=St,At=-Ct*lt.aspect+Tt,Rt=Ct*lt.aspect+Tt,_projectionMatrix.elements[0]=2*lt.near/(Rt-At),_projectionMatrix.elements[8]=(Rt+At)/(Rt-At),this.cameraL.projectionMatrix.copy(_projectionMatrix),At=-Ct*lt.aspect-Tt,Rt=Ct*lt.aspect-Tt,_projectionMatrix.elements[0]=2*lt.near/(Rt-At),_projectionMatrix.elements[8]=(Rt+At)/(Rt-At),this.cameraR.projectionMatrix.copy(_projectionMatrix)}this.cameraL.matrixWorld.copy($.matrixWorld).multiply(_eyeLeft),this.cameraR.matrixWorld.copy($.matrixWorld).multiply(_eyeRight)}}class Clock{constructor($=!0){this.autoStart=$,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let $=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const lt=now();$=(lt-this.oldTime)/1e3,this.oldTime=lt,this.elapsedTime+=$}return $}}function now(){return(typeof performance>"u"?Date:performance).now()}const _position$1=new Vector3,_quaternion$1=new Quaternion,_scale$1=new Vector3,_orientation$1=new Vector3;class AudioListener extends Object3D{constructor(){super(),this.type="AudioListener",this.context=AudioContext.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter($){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=$,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume($){return this.gain.gain.setTargetAtTime($,this.context.currentTime,.01),this}updateMatrixWorld($){super.updateMatrixWorld($);const lt=this.context.listener,ft=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_position$1,_quaternion$1,_scale$1),_orientation$1.set(0,0,-1).applyQuaternion(_quaternion$1),lt.positionX){const St=this.context.currentTime+this.timeDelta;lt.positionX.linearRampToValueAtTime(_position$1.x,St),lt.positionY.linearRampToValueAtTime(_position$1.y,St),lt.positionZ.linearRampToValueAtTime(_position$1.z,St),lt.forwardX.linearRampToValueAtTime(_orientation$1.x,St),lt.forwardY.linearRampToValueAtTime(_orientation$1.y,St),lt.forwardZ.linearRampToValueAtTime(_orientation$1.z,St),lt.upX.linearRampToValueAtTime(ft.x,St),lt.upY.linearRampToValueAtTime(ft.y,St),lt.upZ.linearRampToValueAtTime(ft.z,St)}else lt.setPosition(_position$1.x,_position$1.y,_position$1.z),lt.setOrientation(_orientation$1.x,_orientation$1.y,_orientation$1.z,ft.x,ft.y,ft.z)}}class Audio extends Object3D{constructor($){super(),this.type="Audio",this.listener=$,this.context=$.context,this.gain=this.context.createGain(),this.gain.connect($.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource($){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=$,this.connect(),this}setMediaElementSource($){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource($),this.connect(),this}setMediaStreamSource($){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource($),this.connect(),this}setBuffer($){return this.buffer=$,this.sourceType="buffer",this.autoplay&&this.play(),this}play($=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+$;const lt=this.context.createBufferSource();return lt.buffer=this.buffer,lt.loop=this.loop,lt.loopStart=this.loopStart,lt.loopEnd=this.loopEnd,lt.onended=this.onEnded.bind(this),lt.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=lt,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let $=1,lt=this.filters.length;$<lt;$++)this.filters[$-1].connect(this.filters[$]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let $=1,lt=this.filters.length;$<lt;$++)this.filters[$-1].disconnect(this.filters[$]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters($){return $||($=[]),this._connected===!0?(this.disconnect(),this.filters=$.slice(),this.connect()):this.filters=$.slice(),this}setDetune($){if(this.detune=$,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter($){return this.setFilters($?[$]:[])}setPlaybackRate($){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=$,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop($){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=$,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart($){return this.loopStart=$,this}setLoopEnd($){return this.loopEnd=$,this}getVolume(){return this.gain.gain.value}setVolume($){return this.gain.gain.setTargetAtTime($,this.context.currentTime,.01),this}}const _position=new Vector3,_quaternion=new Quaternion,_scale=new Vector3,_orientation=new Vector3;class PositionalAudio extends Audio{constructor($){super($),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance($){return this.panner.refDistance=$,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor($){return this.panner.rolloffFactor=$,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel($){return this.panner.distanceModel=$,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance($){return this.panner.maxDistance=$,this}setDirectionalCone($,lt,ft){return this.panner.coneInnerAngle=$,this.panner.coneOuterAngle=lt,this.panner.coneOuterGain=ft,this}updateMatrixWorld($){if(super.updateMatrixWorld($),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(_position,_quaternion,_scale),_orientation.set(0,0,1).applyQuaternion(_quaternion);const lt=this.panner;if(lt.positionX){const ft=this.context.currentTime+this.listener.timeDelta;lt.positionX.linearRampToValueAtTime(_position.x,ft),lt.positionY.linearRampToValueAtTime(_position.y,ft),lt.positionZ.linearRampToValueAtTime(_position.z,ft),lt.orientationX.linearRampToValueAtTime(_orientation.x,ft),lt.orientationY.linearRampToValueAtTime(_orientation.y,ft),lt.orientationZ.linearRampToValueAtTime(_orientation.z,ft)}else lt.setPosition(_position.x,_position.y,_position.z),lt.setOrientation(_orientation.x,_orientation.y,_orientation.z)}}class AudioAnalyser{constructor($,lt=2048){this.analyser=$.context.createAnalyser(),this.analyser.fftSize=lt,this.data=new Uint8Array(this.analyser.frequencyBinCount),$.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let $=0;const lt=this.getFrequencyData();for(let ft=0;ft<lt.length;ft++)$+=lt[ft];return $/lt.length}}class PropertyMixer{constructor($,lt,ft){this.binding=$,this.valueSize=ft;let St,Tt,Ct;switch(lt){case"quaternion":St=this._slerp,Tt=this._slerpAdditive,Ct=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(ft*6),this._workIndex=5;break;case"string":case"bool":St=this._select,Tt=this._select,Ct=this._setAdditiveIdentityOther,this.buffer=new Array(ft*5);break;default:St=this._lerp,Tt=this._lerpAdditive,Ct=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(ft*5)}this._mixBufferRegion=St,this._mixBufferRegionAdditive=Tt,this._setIdentity=Ct,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate($,lt){const ft=this.buffer,St=this.valueSize,Tt=$*St+St;let Ct=this.cumulativeWeight;if(Ct===0){for(let At=0;At!==St;++At)ft[Tt+At]=ft[At];Ct=lt}else{Ct+=lt;const At=lt/Ct;this._mixBufferRegion(ft,Tt,0,At,St)}this.cumulativeWeight=Ct}accumulateAdditive($){const lt=this.buffer,ft=this.valueSize,St=ft*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(lt,St,0,$,ft),this.cumulativeWeightAdditive+=$}apply($){const lt=this.valueSize,ft=this.buffer,St=$*lt+lt,Tt=this.cumulativeWeight,Ct=this.cumulativeWeightAdditive,At=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,Tt<1){const Rt=lt*this._origIndex;this._mixBufferRegion(ft,St,Rt,1-Tt,lt)}Ct>0&&this._mixBufferRegionAdditive(ft,St,this._addIndex*lt,1,lt);for(let Rt=lt,kt=lt+lt;Rt!==kt;++Rt)if(ft[Rt]!==ft[Rt+lt]){At.setValue(ft,St);break}}saveOriginalState(){const $=this.binding,lt=this.buffer,ft=this.valueSize,St=ft*this._origIndex;$.getValue(lt,St);for(let Tt=ft,Ct=St;Tt!==Ct;++Tt)lt[Tt]=lt[St+Tt%ft];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const $=this.valueSize*3;this.binding.setValue(this.buffer,$)}_setAdditiveIdentityNumeric(){const $=this._addIndex*this.valueSize,lt=$+this.valueSize;for(let ft=$;ft<lt;ft++)this.buffer[ft]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const $=this._origIndex*this.valueSize,lt=this._addIndex*this.valueSize;for(let ft=0;ft<this.valueSize;ft++)this.buffer[lt+ft]=this.buffer[$+ft]}_select($,lt,ft,St,Tt){if(St>=.5)for(let Ct=0;Ct!==Tt;++Ct)$[lt+Ct]=$[ft+Ct]}_slerp($,lt,ft,St){Quaternion.slerpFlat($,lt,$,lt,$,ft,St)}_slerpAdditive($,lt,ft,St,Tt){const Ct=this._workIndex*Tt;Quaternion.multiplyQuaternionsFlat($,Ct,$,lt,$,ft),Quaternion.slerpFlat($,lt,$,lt,$,Ct,St)}_lerp($,lt,ft,St,Tt){const Ct=1-St;for(let At=0;At!==Tt;++At){const Rt=lt+At;$[Rt]=$[Rt]*Ct+$[ft+At]*St}}_lerpAdditive($,lt,ft,St,Tt){for(let Ct=0;Ct!==Tt;++Ct){const At=lt+Ct;$[At]=$[At]+$[ft+Ct]*St}}}const _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones","map"];class Composite{constructor($,lt,ft){const St=ft||PropertyBinding.parseTrackName(lt);this._targetGroup=$,this._bindings=$.subscribe_(lt,St)}getValue($,lt){this.bind();const ft=this._targetGroup.nCachedObjects_,St=this._bindings[ft];St!==void 0&&St.getValue($,lt)}setValue($,lt){const ft=this._bindings;for(let St=this._targetGroup.nCachedObjects_,Tt=ft.length;St!==Tt;++St)ft[St].setValue($,lt)}bind(){const $=this._bindings;for(let lt=this._targetGroup.nCachedObjects_,ft=$.length;lt!==ft;++lt)$[lt].bind()}unbind(){const $=this._bindings;for(let lt=this._targetGroup.nCachedObjects_,ft=$.length;lt!==ft;++lt)$[lt].unbind()}}class PropertyBinding{constructor($,lt,ft){this.path=lt,this.parsedPath=ft||PropertyBinding.parseTrackName(lt),this.node=PropertyBinding.findNode($,this.parsedPath.nodeName),this.rootNode=$,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create($,lt,ft){return $&&$.isAnimationObjectGroup?new PropertyBinding.Composite($,lt,ft):new PropertyBinding($,lt,ft)}static sanitizeNodeName($){return $.replace(/\s/g,"_").replace(_reservedRe,"")}static parseTrackName($){const lt=_trackRe.exec($);if(lt===null)throw new Error("PropertyBinding: Cannot parse trackName: "+$);const ft={nodeName:lt[2],objectName:lt[3],objectIndex:lt[4],propertyName:lt[5],propertyIndex:lt[6]},St=ft.nodeName&&ft.nodeName.lastIndexOf(".");if(St!==void 0&&St!==-1){const Tt=ft.nodeName.substring(St+1);_supportedObjectNames.indexOf(Tt)!==-1&&(ft.nodeName=ft.nodeName.substring(0,St),ft.objectName=Tt)}if(ft.propertyName===null||ft.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+$);return ft}static findNode($,lt){if(lt===void 0||lt===""||lt==="."||lt===-1||lt===$.name||lt===$.uuid)return $;if($.skeleton){const ft=$.skeleton.getBoneByName(lt);if(ft!==void 0)return ft}if($.children){const ft=function(Tt){for(let Ct=0;Ct<Tt.length;Ct++){const At=Tt[Ct];if(At.name===lt||At.uuid===lt)return At;const Rt=ft(At.children);if(Rt)return Rt}return null},St=ft($.children);if(St)return St}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct($,lt){$[lt]=this.targetObject[this.propertyName]}_getValue_array($,lt){const ft=this.resolvedProperty;for(let St=0,Tt=ft.length;St!==Tt;++St)$[lt++]=ft[St]}_getValue_arrayElement($,lt){$[lt]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray($,lt){this.resolvedProperty.toArray($,lt)}_setValue_direct($,lt){this.targetObject[this.propertyName]=$[lt]}_setValue_direct_setNeedsUpdate($,lt){this.targetObject[this.propertyName]=$[lt],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate($,lt){this.targetObject[this.propertyName]=$[lt],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array($,lt){const ft=this.resolvedProperty;for(let St=0,Tt=ft.length;St!==Tt;++St)ft[St]=$[lt++]}_setValue_array_setNeedsUpdate($,lt){const ft=this.resolvedProperty;for(let St=0,Tt=ft.length;St!==Tt;++St)ft[St]=$[lt++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate($,lt){const ft=this.resolvedProperty;for(let St=0,Tt=ft.length;St!==Tt;++St)ft[St]=$[lt++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement($,lt){this.resolvedProperty[this.propertyIndex]=$[lt]}_setValue_arrayElement_setNeedsUpdate($,lt){this.resolvedProperty[this.propertyIndex]=$[lt],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate($,lt){this.resolvedProperty[this.propertyIndex]=$[lt],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray($,lt){this.resolvedProperty.fromArray($,lt)}_setValue_fromArray_setNeedsUpdate($,lt){this.resolvedProperty.fromArray($,lt),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate($,lt){this.resolvedProperty.fromArray($,lt),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound($,lt){this.bind(),this.getValue($,lt)}_setValue_unbound($,lt){this.bind(),this.setValue($,lt)}bind(){let $=this.node;const lt=this.parsedPath,ft=lt.objectName,St=lt.propertyName;let Tt=lt.propertyIndex;if($||($=PropertyBinding.findNode(this.rootNode,lt.nodeName),this.node=$),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!$){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(ft){let kt=lt.objectIndex;switch(ft){case"materials":if(!$.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!$.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}$=$.material.materials;break;case"bones":if(!$.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}$=$.skeleton.bones;for(let Nt=0;Nt<$.length;Nt++)if($[Nt].name===kt){kt=Nt;break}break;case"map":if("map"in $){$=$.map;break}if(!$.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!$.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}$=$.material.map;break;default:if($[ft]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}$=$[ft]}if(kt!==void 0){if($[kt]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,$);return}$=$[kt]}}const Ct=$[St];if(Ct===void 0){const kt=lt.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+kt+"."+St+" but it wasn't found.",$);return}let At=this.Versioning.None;this.targetObject=$,$.needsUpdate!==void 0?At=this.Versioning.NeedsUpdate:$.matrixWorldNeedsUpdate!==void 0&&(At=this.Versioning.MatrixWorldNeedsUpdate);let Rt=this.BindingType.Direct;if(Tt!==void 0){if(St==="morphTargetInfluences"){if(!$.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!$.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}$.morphTargetDictionary[Tt]!==void 0&&(Tt=$.morphTargetDictionary[Tt])}Rt=this.BindingType.ArrayElement,this.resolvedProperty=Ct,this.propertyIndex=Tt}else Ct.fromArray!==void 0&&Ct.toArray!==void 0?(Rt=this.BindingType.HasFromToArray,this.resolvedProperty=Ct):Array.isArray(Ct)?(Rt=this.BindingType.EntireArray,this.resolvedProperty=Ct):this.propertyName=St;this.getValue=this.GetterByBindingType[Rt],this.setValue=this.SetterByBindingTypeAndVersioning[Rt][At]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}PropertyBinding.Composite=Composite;PropertyBinding.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};PropertyBinding.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};PropertyBinding.prototype.GetterByBindingType=[PropertyBinding.prototype._getValue_direct,PropertyBinding.prototype._getValue_array,PropertyBinding.prototype._getValue_arrayElement,PropertyBinding.prototype._getValue_toArray];PropertyBinding.prototype.SetterByBindingTypeAndVersioning=[[PropertyBinding.prototype._setValue_direct,PropertyBinding.prototype._setValue_direct_setNeedsUpdate,PropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_array,PropertyBinding.prototype._setValue_array_setNeedsUpdate,PropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_arrayElement,PropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate,PropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_fromArray,PropertyBinding.prototype._setValue_fromArray_setNeedsUpdate,PropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class AnimationObjectGroup{constructor(){this.isAnimationObjectGroup=!0,this.uuid=generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const $={};this._indicesByUUID=$;for(let ft=0,St=arguments.length;ft!==St;++ft)$[arguments[ft].uuid]=ft;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const lt=this;this.stats={objects:{get total(){return lt._objects.length},get inUse(){return this.total-lt.nCachedObjects_}},get bindingsPerObject(){return lt._bindings.length}}}add(){const $=this._objects,lt=this._indicesByUUID,ft=this._paths,St=this._parsedPaths,Tt=this._bindings,Ct=Tt.length;let At,Rt=$.length,kt=this.nCachedObjects_;for(let Nt=0,Bt=arguments.length;Nt!==Bt;++Nt){const Ut=arguments[Nt],zt=Ut.uuid;let Zt=lt[zt];if(Zt===void 0){Zt=Rt++,lt[zt]=Zt,$.push(Ut);for(let ln=0,cn=Ct;ln!==cn;++ln)Tt[ln].push(new PropertyBinding(Ut,ft[ln],St[ln]))}else if(Zt<kt){At=$[Zt];const ln=--kt,cn=$[ln];lt[cn.uuid]=Zt,$[Zt]=cn,lt[zt]=ln,$[ln]=Ut;for(let hn=0,pn=Ct;hn!==pn;++hn){const dn=Tt[hn],gn=dn[ln];let vn=dn[Zt];dn[Zt]=gn,vn===void 0&&(vn=new PropertyBinding(Ut,ft[hn],St[hn])),dn[ln]=vn}}else $[Zt]!==At&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=kt}remove(){const $=this._objects,lt=this._indicesByUUID,ft=this._bindings,St=ft.length;let Tt=this.nCachedObjects_;for(let Ct=0,At=arguments.length;Ct!==At;++Ct){const Rt=arguments[Ct],kt=Rt.uuid,Nt=lt[kt];if(Nt!==void 0&&Nt>=Tt){const Bt=Tt++,Ut=$[Bt];lt[Ut.uuid]=Nt,$[Nt]=Ut,lt[kt]=Bt,$[Bt]=Rt;for(let zt=0,Zt=St;zt!==Zt;++zt){const ln=ft[zt],cn=ln[Bt],hn=ln[Nt];ln[Nt]=cn,ln[Bt]=hn}}}this.nCachedObjects_=Tt}uncache(){const $=this._objects,lt=this._indicesByUUID,ft=this._bindings,St=ft.length;let Tt=this.nCachedObjects_,Ct=$.length;for(let At=0,Rt=arguments.length;At!==Rt;++At){const kt=arguments[At],Nt=kt.uuid,Bt=lt[Nt];if(Bt!==void 0)if(delete lt[Nt],Bt<Tt){const Ut=--Tt,zt=$[Ut],Zt=--Ct,ln=$[Zt];lt[zt.uuid]=Bt,$[Bt]=zt,lt[ln.uuid]=Ut,$[Ut]=ln,$.pop();for(let cn=0,hn=St;cn!==hn;++cn){const pn=ft[cn],dn=pn[Ut],gn=pn[Zt];pn[Bt]=dn,pn[Ut]=gn,pn.pop()}}else{const Ut=--Ct,zt=$[Ut];Ut>0&&(lt[zt.uuid]=Bt),$[Bt]=zt,$.pop();for(let Zt=0,ln=St;Zt!==ln;++Zt){const cn=ft[Zt];cn[Bt]=cn[Ut],cn.pop()}}}this.nCachedObjects_=Tt}subscribe_($,lt){const ft=this._bindingsIndicesByPath;let St=ft[$];const Tt=this._bindings;if(St!==void 0)return Tt[St];const Ct=this._paths,At=this._parsedPaths,Rt=this._objects,kt=Rt.length,Nt=this.nCachedObjects_,Bt=new Array(kt);St=Tt.length,ft[$]=St,Ct.push($),At.push(lt),Tt.push(Bt);for(let Ut=Nt,zt=Rt.length;Ut!==zt;++Ut){const Zt=Rt[Ut];Bt[Ut]=new PropertyBinding(Zt,$,lt)}return Bt}unsubscribe_($){const lt=this._bindingsIndicesByPath,ft=lt[$];if(ft!==void 0){const St=this._paths,Tt=this._parsedPaths,Ct=this._bindings,At=Ct.length-1,Rt=Ct[At],kt=$[At];lt[kt]=ft,Ct[ft]=Rt,Ct.pop(),Tt[ft]=Tt[At],Tt.pop(),St[ft]=St[At],St.pop()}}}class AnimationAction{constructor($,lt,ft=null,St=lt.blendMode){this._mixer=$,this._clip=lt,this._localRoot=ft,this.blendMode=St;const Tt=lt.tracks,Ct=Tt.length,At=new Array(Ct),Rt={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding};for(let kt=0;kt!==Ct;++kt){const Nt=Tt[kt].createInterpolant(null);At[kt]=Nt,Nt.settings=Rt}this._interpolantSettings=Rt,this._interpolants=At,this._propertyBindings=new Array(Ct),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt($){return this._startTime=$,this}setLoop($,lt){return this.loop=$,this.repetitions=lt,this}setEffectiveWeight($){return this.weight=$,this._effectiveWeight=this.enabled?$:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn($){return this._scheduleFading($,0,1)}fadeOut($){return this._scheduleFading($,1,0)}crossFadeFrom($,lt,ft){if($.fadeOut(lt),this.fadeIn(lt),ft){const St=this._clip.duration,Tt=$._clip.duration,Ct=Tt/St,At=St/Tt;$.warp(1,Ct,lt),this.warp(At,1,lt)}return this}crossFadeTo($,lt,ft){return $.crossFadeFrom(this,lt,ft)}stopFading(){const $=this._weightInterpolant;return $!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant($)),this}setEffectiveTimeScale($){return this.timeScale=$,this._effectiveTimeScale=this.paused?0:$,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration($){return this.timeScale=this._clip.duration/$,this.stopWarping()}syncWith($){return this.time=$.time,this.timeScale=$.timeScale,this.stopWarping()}halt($){return this.warp(this._effectiveTimeScale,0,$)}warp($,lt,ft){const St=this._mixer,Tt=St.time,Ct=this.timeScale;let At=this._timeScaleInterpolant;At===null&&(At=St._lendControlInterpolant(),this._timeScaleInterpolant=At);const Rt=At.parameterPositions,kt=At.sampleValues;return Rt[0]=Tt,Rt[1]=Tt+ft,kt[0]=$/Ct,kt[1]=lt/Ct,this}stopWarping(){const $=this._timeScaleInterpolant;return $!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant($)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update($,lt,ft,St){if(!this.enabled){this._updateWeight($);return}const Tt=this._startTime;if(Tt!==null){const Rt=($-Tt)*ft;Rt<0||ft===0?lt=0:(this._startTime=null,lt=ft*Rt)}lt*=this._updateTimeScale($);const Ct=this._updateTime(lt),At=this._updateWeight($);if(At>0){const Rt=this._interpolants,kt=this._propertyBindings;switch(this.blendMode){case AdditiveAnimationBlendMode:for(let Nt=0,Bt=Rt.length;Nt!==Bt;++Nt)Rt[Nt].evaluate(Ct),kt[Nt].accumulateAdditive(At);break;case NormalAnimationBlendMode:default:for(let Nt=0,Bt=Rt.length;Nt!==Bt;++Nt)Rt[Nt].evaluate(Ct),kt[Nt].accumulate(St,At)}}}_updateWeight($){let lt=0;if(this.enabled){lt=this.weight;const ft=this._weightInterpolant;if(ft!==null){const St=ft.evaluate($)[0];lt*=St,$>ft.parameterPositions[1]&&(this.stopFading(),St===0&&(this.enabled=!1))}}return this._effectiveWeight=lt,lt}_updateTimeScale($){let lt=0;if(!this.paused){lt=this.timeScale;const ft=this._timeScaleInterpolant;if(ft!==null){const St=ft.evaluate($)[0];lt*=St,$>ft.parameterPositions[1]&&(this.stopWarping(),lt===0?this.paused=!0:this.timeScale=lt)}}return this._effectiveTimeScale=lt,lt}_updateTime($){const lt=this._clip.duration,ft=this.loop;let St=this.time+$,Tt=this._loopCount;const Ct=ft===LoopPingPong;if($===0)return Tt===-1?St:Ct&&(Tt&1)===1?lt-St:St;if(ft===LoopOnce){Tt===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(St>=lt)St=lt;else if(St<0)St=0;else{this.time=St;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=St,this._mixer.dispatchEvent({type:"finished",action:this,direction:$<0?-1:1})}}else{if(Tt===-1&&($>=0?(Tt=0,this._setEndings(!0,this.repetitions===0,Ct)):this._setEndings(this.repetitions===0,!0,Ct)),St>=lt||St<0){const At=Math.floor(St/lt);St-=lt*At,Tt+=Math.abs(At);const Rt=this.repetitions-Tt;if(Rt<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,St=$>0?lt:0,this.time=St,this._mixer.dispatchEvent({type:"finished",action:this,direction:$>0?1:-1});else{if(Rt===1){const kt=$<0;this._setEndings(kt,!kt,Ct)}else this._setEndings(!1,!1,Ct);this._loopCount=Tt,this.time=St,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:At})}}else this.time=St;if(Ct&&(Tt&1)===1)return lt-St}return St}_setEndings($,lt,ft){const St=this._interpolantSettings;ft?(St.endingStart=ZeroSlopeEnding,St.endingEnd=ZeroSlopeEnding):($?St.endingStart=this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:St.endingStart=WrapAroundEnding,lt?St.endingEnd=this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:St.endingEnd=WrapAroundEnding)}_scheduleFading($,lt,ft){const St=this._mixer,Tt=St.time;let Ct=this._weightInterpolant;Ct===null&&(Ct=St._lendControlInterpolant(),this._weightInterpolant=Ct);const At=Ct.parameterPositions,Rt=Ct.sampleValues;return At[0]=Tt,Rt[0]=lt,At[1]=Tt+$,Rt[1]=ft,this}}const _controlInterpolantsResultBuffer=new Float32Array(1);class AnimationMixer extends EventDispatcher{constructor($){super(),this._root=$,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction($,lt){const ft=$._localRoot||this._root,St=$._clip.tracks,Tt=St.length,Ct=$._propertyBindings,At=$._interpolants,Rt=ft.uuid,kt=this._bindingsByRootAndName;let Nt=kt[Rt];Nt===void 0&&(Nt={},kt[Rt]=Nt);for(let Bt=0;Bt!==Tt;++Bt){const Ut=St[Bt],zt=Ut.name;let Zt=Nt[zt];if(Zt!==void 0)++Zt.referenceCount,Ct[Bt]=Zt;else{if(Zt=Ct[Bt],Zt!==void 0){Zt._cacheIndex===null&&(++Zt.referenceCount,this._addInactiveBinding(Zt,Rt,zt));continue}const ln=lt&&lt._propertyBindings[Bt].binding.parsedPath;Zt=new PropertyMixer(PropertyBinding.create(ft,zt,ln),Ut.ValueTypeName,Ut.getValueSize()),++Zt.referenceCount,this._addInactiveBinding(Zt,Rt,zt),Ct[Bt]=Zt}At[Bt].resultBuffer=Zt.buffer}}_activateAction($){if(!this._isActiveAction($)){if($._cacheIndex===null){const ft=($._localRoot||this._root).uuid,St=$._clip.uuid,Tt=this._actionsByClip[St];this._bindAction($,Tt&&Tt.knownActions[0]),this._addInactiveAction($,St,ft)}const lt=$._propertyBindings;for(let ft=0,St=lt.length;ft!==St;++ft){const Tt=lt[ft];Tt.useCount++===0&&(this._lendBinding(Tt),Tt.saveOriginalState())}this._lendAction($)}}_deactivateAction($){if(this._isActiveAction($)){const lt=$._propertyBindings;for(let ft=0,St=lt.length;ft!==St;++ft){const Tt=lt[ft];--Tt.useCount===0&&(Tt.restoreOriginalState(),this._takeBackBinding(Tt))}this._takeBackAction($)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const $=this;this.stats={actions:{get total(){return $._actions.length},get inUse(){return $._nActiveActions}},bindings:{get total(){return $._bindings.length},get inUse(){return $._nActiveBindings}},controlInterpolants:{get total(){return $._controlInterpolants.length},get inUse(){return $._nActiveControlInterpolants}}}}_isActiveAction($){const lt=$._cacheIndex;return lt!==null&&lt<this._nActiveActions}_addInactiveAction($,lt,ft){const St=this._actions,Tt=this._actionsByClip;let Ct=Tt[lt];if(Ct===void 0)Ct={knownActions:[$],actionByRoot:{}},$._byClipCacheIndex=0,Tt[lt]=Ct;else{const At=Ct.knownActions;$._byClipCacheIndex=At.length,At.push($)}$._cacheIndex=St.length,St.push($),Ct.actionByRoot[ft]=$}_removeInactiveAction($){const lt=this._actions,ft=lt[lt.length-1],St=$._cacheIndex;ft._cacheIndex=St,lt[St]=ft,lt.pop(),$._cacheIndex=null;const Tt=$._clip.uuid,Ct=this._actionsByClip,At=Ct[Tt],Rt=At.knownActions,kt=Rt[Rt.length-1],Nt=$._byClipCacheIndex;kt._byClipCacheIndex=Nt,Rt[Nt]=kt,Rt.pop(),$._byClipCacheIndex=null;const Bt=At.actionByRoot,Ut=($._localRoot||this._root).uuid;delete Bt[Ut],Rt.length===0&&delete Ct[Tt],this._removeInactiveBindingsForAction($)}_removeInactiveBindingsForAction($){const lt=$._propertyBindings;for(let ft=0,St=lt.length;ft!==St;++ft){const Tt=lt[ft];--Tt.referenceCount===0&&this._removeInactiveBinding(Tt)}}_lendAction($){const lt=this._actions,ft=$._cacheIndex,St=this._nActiveActions++,Tt=lt[St];$._cacheIndex=St,lt[St]=$,Tt._cacheIndex=ft,lt[ft]=Tt}_takeBackAction($){const lt=this._actions,ft=$._cacheIndex,St=--this._nActiveActions,Tt=lt[St];$._cacheIndex=St,lt[St]=$,Tt._cacheIndex=ft,lt[ft]=Tt}_addInactiveBinding($,lt,ft){const St=this._bindingsByRootAndName,Tt=this._bindings;let Ct=St[lt];Ct===void 0&&(Ct={},St[lt]=Ct),Ct[ft]=$,$._cacheIndex=Tt.length,Tt.push($)}_removeInactiveBinding($){const lt=this._bindings,ft=$.binding,St=ft.rootNode.uuid,Tt=ft.path,Ct=this._bindingsByRootAndName,At=Ct[St],Rt=lt[lt.length-1],kt=$._cacheIndex;Rt._cacheIndex=kt,lt[kt]=Rt,lt.pop(),delete At[Tt],Object.keys(At).length===0&&delete Ct[St]}_lendBinding($){const lt=this._bindings,ft=$._cacheIndex,St=this._nActiveBindings++,Tt=lt[St];$._cacheIndex=St,lt[St]=$,Tt._cacheIndex=ft,lt[ft]=Tt}_takeBackBinding($){const lt=this._bindings,ft=$._cacheIndex,St=--this._nActiveBindings,Tt=lt[St];$._cacheIndex=St,lt[St]=$,Tt._cacheIndex=ft,lt[ft]=Tt}_lendControlInterpolant(){const $=this._controlInterpolants,lt=this._nActiveControlInterpolants++;let ft=$[lt];return ft===void 0&&(ft=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,_controlInterpolantsResultBuffer),ft.__cacheIndex=lt,$[lt]=ft),ft}_takeBackControlInterpolant($){const lt=this._controlInterpolants,ft=$.__cacheIndex,St=--this._nActiveControlInterpolants,Tt=lt[St];$.__cacheIndex=St,lt[St]=$,Tt.__cacheIndex=ft,lt[ft]=Tt}clipAction($,lt,ft){const St=lt||this._root,Tt=St.uuid;let Ct=typeof $=="string"?AnimationClip.findByName(St,$):$;const At=Ct!==null?Ct.uuid:$,Rt=this._actionsByClip[At];let kt=null;if(ft===void 0&&(Ct!==null?ft=Ct.blendMode:ft=NormalAnimationBlendMode),Rt!==void 0){const Bt=Rt.actionByRoot[Tt];if(Bt!==void 0&&Bt.blendMode===ft)return Bt;kt=Rt.knownActions[0],Ct===null&&(Ct=kt._clip)}if(Ct===null)return null;const Nt=new AnimationAction(this,Ct,lt,ft);return this._bindAction(Nt,kt),this._addInactiveAction(Nt,At,Tt),Nt}existingAction($,lt){const ft=lt||this._root,St=ft.uuid,Tt=typeof $=="string"?AnimationClip.findByName(ft,$):$,Ct=Tt?Tt.uuid:$,At=this._actionsByClip[Ct];return At!==void 0&&At.actionByRoot[St]||null}stopAllAction(){const $=this._actions,lt=this._nActiveActions;for(let ft=lt-1;ft>=0;--ft)$[ft].stop();return this}update($){$*=this.timeScale;const lt=this._actions,ft=this._nActiveActions,St=this.time+=$,Tt=Math.sign($),Ct=this._accuIndex^=1;for(let kt=0;kt!==ft;++kt)lt[kt]._update(St,$,Tt,Ct);const At=this._bindings,Rt=this._nActiveBindings;for(let kt=0;kt!==Rt;++kt)At[kt].apply(Ct);return this}setTime($){this.time=0;for(let lt=0;lt<this._actions.length;lt++)this._actions[lt].time=0;return this.update($)}getRoot(){return this._root}uncacheClip($){const lt=this._actions,ft=$.uuid,St=this._actionsByClip,Tt=St[ft];if(Tt!==void 0){const Ct=Tt.knownActions;for(let At=0,Rt=Ct.length;At!==Rt;++At){const kt=Ct[At];this._deactivateAction(kt);const Nt=kt._cacheIndex,Bt=lt[lt.length-1];kt._cacheIndex=null,kt._byClipCacheIndex=null,Bt._cacheIndex=Nt,lt[Nt]=Bt,lt.pop(),this._removeInactiveBindingsForAction(kt)}delete St[ft]}}uncacheRoot($){const lt=$.uuid,ft=this._actionsByClip;for(const Ct in ft){const At=ft[Ct].actionByRoot,Rt=At[lt];Rt!==void 0&&(this._deactivateAction(Rt),this._removeInactiveAction(Rt))}const St=this._bindingsByRootAndName,Tt=St[lt];if(Tt!==void 0)for(const Ct in Tt){const At=Tt[Ct];At.restoreOriginalState(),this._removeInactiveBinding(At)}}uncacheAction($,lt){const ft=this.existingAction($,lt);ft!==null&&(this._deactivateAction(ft),this._removeInactiveAction(ft))}}class Uniform{constructor($){this.value=$}clone(){return new Uniform(this.value.clone===void 0?this.value:this.value.clone())}}let id$1=0;class UniformsGroup extends EventDispatcher{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:id$1++}),this.name="",this.usage=StaticDrawUsage,this.uniforms=[]}add($){return this.uniforms.push($),this}remove($){const lt=this.uniforms.indexOf($);return lt!==-1&&this.uniforms.splice(lt,1),this}setName($){return this.name=$,this}setUsage($){return this.usage=$,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy($){this.name=$.name,this.usage=$.usage;const lt=$.uniforms;this.uniforms.length=0;for(let ft=0,St=lt.length;ft<St;ft++)this.uniforms.push(lt[ft].clone());return this}clone(){return new this.constructor().copy(this)}}class InstancedInterleavedBuffer extends InterleavedBuffer{constructor($,lt,ft=1){super($,lt),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=ft}copy($){return super.copy($),this.meshPerAttribute=$.meshPerAttribute,this}clone($){const lt=super.clone($);return lt.meshPerAttribute=this.meshPerAttribute,lt}toJSON($){const lt=super.toJSON($);return lt.isInstancedInterleavedBuffer=!0,lt.meshPerAttribute=this.meshPerAttribute,lt}}class GLBufferAttribute{constructor($,lt,ft,St,Tt){this.isGLBufferAttribute=!0,this.name="",this.buffer=$,this.type=lt,this.itemSize=ft,this.elementSize=St,this.count=Tt,this.version=0}set needsUpdate($){$===!0&&this.version++}setBuffer($){return this.buffer=$,this}setType($,lt){return this.type=$,this.elementSize=lt,this}setItemSize($){return this.itemSize=$,this}setCount($){return this.count=$,this}}class Raycaster{constructor($,lt,ft=0,St=1/0){this.ray=new Ray($,lt),this.near=ft,this.far=St,this.camera=null,this.layers=new Layers$1,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set($,lt){this.ray.set($,lt)}setFromCamera($,lt){lt.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(lt.matrixWorld),this.ray.direction.set($.x,$.y,.5).unproject(lt).sub(this.ray.origin).normalize(),this.camera=lt):lt.isOrthographicCamera?(this.ray.origin.set($.x,$.y,(lt.near+lt.far)/(lt.near-lt.far)).unproject(lt),this.ray.direction.set(0,0,-1).transformDirection(lt.matrixWorld),this.camera=lt):console.error("THREE.Raycaster: Unsupported camera type: "+lt.type)}intersectObject($,lt=!0,ft=[]){return intersectObject($,this,ft,lt),ft.sort(ascSort),ft}intersectObjects($,lt=!0,ft=[]){for(let St=0,Tt=$.length;St<Tt;St++)intersectObject($[St],this,ft,lt);return ft.sort(ascSort),ft}}function ascSort(dt,$){return dt.distance-$.distance}function intersectObject(dt,$,lt,ft){if(dt.layers.test($.layers)&&dt.raycast($,lt),ft===!0){const St=dt.children;for(let Tt=0,Ct=St.length;Tt<Ct;Tt++)intersectObject(St[Tt],$,lt,!0)}}class Spherical{constructor($=1,lt=0,ft=0){return this.radius=$,this.phi=lt,this.theta=ft,this}set($,lt,ft){return this.radius=$,this.phi=lt,this.theta=ft,this}copy($){return this.radius=$.radius,this.phi=$.phi,this.theta=$.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3($){return this.setFromCartesianCoords($.x,$.y,$.z)}setFromCartesianCoords($,lt,ft){return this.radius=Math.sqrt($*$+lt*lt+ft*ft),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2($,ft),this.phi=Math.acos(clamp$1(lt/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Cylindrical{constructor($=1,lt=0,ft=0){return this.radius=$,this.theta=lt,this.y=ft,this}set($,lt,ft){return this.radius=$,this.theta=lt,this.y=ft,this}copy($){return this.radius=$.radius,this.theta=$.theta,this.y=$.y,this}setFromVector3($){return this.setFromCartesianCoords($.x,$.y,$.z)}setFromCartesianCoords($,lt,ft){return this.radius=Math.sqrt($*$+ft*ft),this.theta=Math.atan2($,ft),this.y=lt,this}clone(){return new this.constructor().copy(this)}}const _vector$4=new Vector2;class Box2{constructor($=new Vector2(1/0,1/0),lt=new Vector2(-1/0,-1/0)){this.isBox2=!0,this.min=$,this.max=lt}set($,lt){return this.min.copy($),this.max.copy(lt),this}setFromPoints($){this.makeEmpty();for(let lt=0,ft=$.length;lt<ft;lt++)this.expandByPoint($[lt]);return this}setFromCenterAndSize($,lt){const ft=_vector$4.copy(lt).multiplyScalar(.5);return this.min.copy($).sub(ft),this.max.copy($).add(ft),this}clone(){return new this.constructor().copy(this)}copy($){return this.min.copy($.min),this.max.copy($.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter($){return this.isEmpty()?$.set(0,0):$.addVectors(this.min,this.max).multiplyScalar(.5)}getSize($){return this.isEmpty()?$.set(0,0):$.subVectors(this.max,this.min)}expandByPoint($){return this.min.min($),this.max.max($),this}expandByVector($){return this.min.sub($),this.max.add($),this}expandByScalar($){return this.min.addScalar(-$),this.max.addScalar($),this}containsPoint($){return!($.x<this.min.x||$.x>this.max.x||$.y<this.min.y||$.y>this.max.y)}containsBox($){return this.min.x<=$.min.x&&$.max.x<=this.max.x&&this.min.y<=$.min.y&&$.max.y<=this.max.y}getParameter($,lt){return lt.set(($.x-this.min.x)/(this.max.x-this.min.x),($.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox($){return!($.max.x<this.min.x||$.min.x>this.max.x||$.max.y<this.min.y||$.min.y>this.max.y)}clampPoint($,lt){return lt.copy($).clamp(this.min,this.max)}distanceToPoint($){return this.clampPoint($,_vector$4).distanceTo($)}intersect($){return this.min.max($.min),this.max.min($.max),this.isEmpty()&&this.makeEmpty(),this}union($){return this.min.min($.min),this.max.max($.max),this}translate($){return this.min.add($),this.max.add($),this}equals($){return $.min.equals(this.min)&&$.max.equals(this.max)}}const _startP=new Vector3,_startEnd=new Vector3;class Line3{constructor($=new Vector3,lt=new Vector3){this.start=$,this.end=lt}set($,lt){return this.start.copy($),this.end.copy(lt),this}copy($){return this.start.copy($.start),this.end.copy($.end),this}getCenter($){return $.addVectors(this.start,this.end).multiplyScalar(.5)}delta($){return $.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at($,lt){return this.delta(lt).multiplyScalar($).add(this.start)}closestPointToPointParameter($,lt){_startP.subVectors($,this.start),_startEnd.subVectors(this.end,this.start);const ft=_startEnd.dot(_startEnd);let Tt=_startEnd.dot(_startP)/ft;return lt&&(Tt=clamp$1(Tt,0,1)),Tt}closestPointToPoint($,lt,ft){const St=this.closestPointToPointParameter($,lt);return this.delta(ft).multiplyScalar(St).add(this.start)}applyMatrix4($){return this.start.applyMatrix4($),this.end.applyMatrix4($),this}equals($){return $.start.equals(this.start)&&$.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const _vector$3=new Vector3;class SpotLightHelper extends Object3D{constructor($,lt){super(),this.light=$,this.matrix=$.matrixWorld,this.matrixAutoUpdate=!1,this.color=lt,this.type="SpotLightHelper";const ft=new BufferGeometry,St=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let Ct=0,At=1,Rt=32;Ct<Rt;Ct++,At++){const kt=Ct/Rt*Math.PI*2,Nt=At/Rt*Math.PI*2;St.push(Math.cos(kt),Math.sin(kt),1,Math.cos(Nt),Math.sin(Nt),1)}ft.setAttribute("position",new Float32BufferAttribute(St,3));const Tt=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(ft,Tt),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const $=this.light.distance?this.light.distance:1e3,lt=$*Math.tan(this.light.angle);this.cone.scale.set(lt,lt,$),_vector$3.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_vector$3),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const _vector$2=new Vector3,_boneMatrix=new Matrix4,_matrixWorldInv=new Matrix4;class SkeletonHelper extends LineSegments{constructor($){const lt=getBoneList($),ft=new BufferGeometry,St=[],Tt=[],Ct=new Color(0,0,1),At=new Color(0,1,0);for(let kt=0;kt<lt.length;kt++){const Nt=lt[kt];Nt.parent&&Nt.parent.isBone&&(St.push(0,0,0),St.push(0,0,0),Tt.push(Ct.r,Ct.g,Ct.b),Tt.push(At.r,At.g,At.b))}ft.setAttribute("position",new Float32BufferAttribute(St,3)),ft.setAttribute("color",new Float32BufferAttribute(Tt,3));const Rt=new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(ft,Rt),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=$,this.bones=lt,this.matrix=$.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld($){const lt=this.bones,ft=this.geometry,St=ft.getAttribute("position");_matrixWorldInv.copy(this.root.matrixWorld).invert();for(let Tt=0,Ct=0;Tt<lt.length;Tt++){const At=lt[Tt];At.parent&&At.parent.isBone&&(_boneMatrix.multiplyMatrices(_matrixWorldInv,At.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),St.setXYZ(Ct,_vector$2.x,_vector$2.y,_vector$2.z),_boneMatrix.multiplyMatrices(_matrixWorldInv,At.parent.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),St.setXYZ(Ct+1,_vector$2.x,_vector$2.y,_vector$2.z),Ct+=2)}ft.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld($)}dispose(){this.geometry.dispose(),this.material.dispose()}}function getBoneList(dt){const $=[];dt.isBone===!0&&$.push(dt);for(let lt=0;lt<dt.children.length;lt++)$.push.apply($,getBoneList(dt.children[lt]));return $}class PointLightHelper extends Mesh{constructor($,lt,ft){const St=new SphereGeometry(lt,4,2),Tt=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1});super(St,Tt),this.light=$,this.color=ft,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const _vector$1=new Vector3,_color1=new Color,_color2=new Color;class HemisphereLightHelper extends Object3D{constructor($,lt,ft){super(),this.light=$,this.matrix=$.matrixWorld,this.matrixAutoUpdate=!1,this.color=ft,this.type="HemisphereLightHelper";const St=new OctahedronGeometry(lt);St.rotateY(Math.PI*.5),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const Tt=St.getAttribute("position"),Ct=new Float32Array(Tt.count*3);St.setAttribute("color",new BufferAttribute(Ct,3)),this.add(new Mesh(St,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const $=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const lt=$.geometry.getAttribute("color");_color1.copy(this.light.color),_color2.copy(this.light.groundColor);for(let ft=0,St=lt.count;ft<St;ft++){const Tt=ft<St/2?_color1:_color2;lt.setXYZ(ft,Tt.r,Tt.g,Tt.b)}lt.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),$.lookAt(_vector$1.setFromMatrixPosition(this.light.matrixWorld).negate())}}class GridHelper extends LineSegments{constructor($=10,lt=10,ft=4473924,St=8947848){ft=new Color(ft),St=new Color(St);const Tt=lt/2,Ct=$/lt,At=$/2,Rt=[],kt=[];for(let Ut=0,zt=0,Zt=-At;Ut<=lt;Ut++,Zt+=Ct){Rt.push(-At,0,Zt,At,0,Zt),Rt.push(Zt,0,-At,Zt,0,At);const ln=Ut===Tt?ft:St;ln.toArray(kt,zt),zt+=3,ln.toArray(kt,zt),zt+=3,ln.toArray(kt,zt),zt+=3,ln.toArray(kt,zt),zt+=3}const Nt=new BufferGeometry;Nt.setAttribute("position",new Float32BufferAttribute(Rt,3)),Nt.setAttribute("color",new Float32BufferAttribute(kt,3));const Bt=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(Nt,Bt),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class PolarGridHelper extends LineSegments{constructor($=10,lt=16,ft=8,St=64,Tt=4473924,Ct=8947848){Tt=new Color(Tt),Ct=new Color(Ct);const At=[],Rt=[];if(lt>1)for(let Bt=0;Bt<lt;Bt++){const Ut=Bt/lt*(Math.PI*2),zt=Math.sin(Ut)*$,Zt=Math.cos(Ut)*$;At.push(0,0,0),At.push(zt,0,Zt);const ln=Bt&1?Tt:Ct;Rt.push(ln.r,ln.g,ln.b),Rt.push(ln.r,ln.g,ln.b)}for(let Bt=0;Bt<ft;Bt++){const Ut=Bt&1?Tt:Ct,zt=$-$/ft*Bt;for(let Zt=0;Zt<St;Zt++){let ln=Zt/St*(Math.PI*2),cn=Math.sin(ln)*zt,hn=Math.cos(ln)*zt;At.push(cn,0,hn),Rt.push(Ut.r,Ut.g,Ut.b),ln=(Zt+1)/St*(Math.PI*2),cn=Math.sin(ln)*zt,hn=Math.cos(ln)*zt,At.push(cn,0,hn),Rt.push(Ut.r,Ut.g,Ut.b)}}const kt=new BufferGeometry;kt.setAttribute("position",new Float32BufferAttribute(At,3)),kt.setAttribute("color",new Float32BufferAttribute(Rt,3));const Nt=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(kt,Nt),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const _v1=new Vector3,_v2=new Vector3,_v3=new Vector3;class DirectionalLightHelper extends Object3D{constructor($,lt,ft){super(),this.light=$,this.matrix=$.matrixWorld,this.matrixAutoUpdate=!1,this.color=ft,this.type="DirectionalLightHelper",lt===void 0&&(lt=1);let St=new BufferGeometry;St.setAttribute("position",new Float32BufferAttribute([-lt,lt,0,lt,lt,0,lt,-lt,0,-lt,-lt,0,-lt,lt,0],3));const Tt=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line$2(St,Tt),this.add(this.lightPlane),St=new BufferGeometry,St.setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line$2(St,Tt),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),_v1.setFromMatrixPosition(this.light.matrixWorld),_v2.setFromMatrixPosition(this.light.target.matrixWorld),_v3.subVectors(_v2,_v1),this.lightPlane.lookAt(_v2),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_v2),this.targetLine.scale.z=_v3.length()}}const _vector$e=new Vector3,_camera=new Camera;class CameraHelper extends LineSegments{constructor($){const lt=new BufferGeometry,ft=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),St=[],Tt=[],Ct={};At("n1","n2"),At("n2","n4"),At("n4","n3"),At("n3","n1"),At("f1","f2"),At("f2","f4"),At("f4","f3"),At("f3","f1"),At("n1","f1"),At("n2","f2"),At("n3","f3"),At("n4","f4"),At("p","n1"),At("p","n2"),At("p","n3"),At("p","n4"),At("u1","u2"),At("u2","u3"),At("u3","u1"),At("c","t"),At("p","c"),At("cn1","cn2"),At("cn3","cn4"),At("cf1","cf2"),At("cf3","cf4");function At(Zt,ln){Rt(Zt),Rt(ln)}function Rt(Zt){St.push(0,0,0),Tt.push(0,0,0),Ct[Zt]===void 0&&(Ct[Zt]=[]),Ct[Zt].push(St.length/3-1)}lt.setAttribute("position",new Float32BufferAttribute(St,3)),lt.setAttribute("color",new Float32BufferAttribute(Tt,3)),super(lt,ft),this.type="CameraHelper",this.camera=$,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=$.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=Ct,this.update();const kt=new Color(16755200),Nt=new Color(16711680),Bt=new Color(43775),Ut=new Color(16777215),zt=new Color(3355443);this.setColors(kt,Nt,Bt,Ut,zt)}setColors($,lt,ft,St,Tt){const At=this.geometry.getAttribute("color");At.setXYZ(0,$.r,$.g,$.b),At.setXYZ(1,$.r,$.g,$.b),At.setXYZ(2,$.r,$.g,$.b),At.setXYZ(3,$.r,$.g,$.b),At.setXYZ(4,$.r,$.g,$.b),At.setXYZ(5,$.r,$.g,$.b),At.setXYZ(6,$.r,$.g,$.b),At.setXYZ(7,$.r,$.g,$.b),At.setXYZ(8,$.r,$.g,$.b),At.setXYZ(9,$.r,$.g,$.b),At.setXYZ(10,$.r,$.g,$.b),At.setXYZ(11,$.r,$.g,$.b),At.setXYZ(12,$.r,$.g,$.b),At.setXYZ(13,$.r,$.g,$.b),At.setXYZ(14,$.r,$.g,$.b),At.setXYZ(15,$.r,$.g,$.b),At.setXYZ(16,$.r,$.g,$.b),At.setXYZ(17,$.r,$.g,$.b),At.setXYZ(18,$.r,$.g,$.b),At.setXYZ(19,$.r,$.g,$.b),At.setXYZ(20,$.r,$.g,$.b),At.setXYZ(21,$.r,$.g,$.b),At.setXYZ(22,$.r,$.g,$.b),At.setXYZ(23,$.r,$.g,$.b),At.setXYZ(24,lt.r,lt.g,lt.b),At.setXYZ(25,lt.r,lt.g,lt.b),At.setXYZ(26,lt.r,lt.g,lt.b),At.setXYZ(27,lt.r,lt.g,lt.b),At.setXYZ(28,lt.r,lt.g,lt.b),At.setXYZ(29,lt.r,lt.g,lt.b),At.setXYZ(30,lt.r,lt.g,lt.b),At.setXYZ(31,lt.r,lt.g,lt.b),At.setXYZ(32,ft.r,ft.g,ft.b),At.setXYZ(33,ft.r,ft.g,ft.b),At.setXYZ(34,ft.r,ft.g,ft.b),At.setXYZ(35,ft.r,ft.g,ft.b),At.setXYZ(36,ft.r,ft.g,ft.b),At.setXYZ(37,ft.r,ft.g,ft.b),At.setXYZ(38,St.r,St.g,St.b),At.setXYZ(39,St.r,St.g,St.b),At.setXYZ(40,Tt.r,Tt.g,Tt.b),At.setXYZ(41,Tt.r,Tt.g,Tt.b),At.setXYZ(42,Tt.r,Tt.g,Tt.b),At.setXYZ(43,Tt.r,Tt.g,Tt.b),At.setXYZ(44,Tt.r,Tt.g,Tt.b),At.setXYZ(45,Tt.r,Tt.g,Tt.b),At.setXYZ(46,Tt.r,Tt.g,Tt.b),At.setXYZ(47,Tt.r,Tt.g,Tt.b),At.setXYZ(48,Tt.r,Tt.g,Tt.b),At.setXYZ(49,Tt.r,Tt.g,Tt.b),At.needsUpdate=!0}update(){const $=this.geometry,lt=this.pointMap,ft=1,St=1;_camera.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),setPoint("c",lt,$,_camera,0,0,-1),setPoint("t",lt,$,_camera,0,0,1),setPoint("n1",lt,$,_camera,-ft,-St,-1),setPoint("n2",lt,$,_camera,ft,-St,-1),setPoint("n3",lt,$,_camera,-ft,St,-1),setPoint("n4",lt,$,_camera,ft,St,-1),setPoint("f1",lt,$,_camera,-ft,-St,1),setPoint("f2",lt,$,_camera,ft,-St,1),setPoint("f3",lt,$,_camera,-ft,St,1),setPoint("f4",lt,$,_camera,ft,St,1),setPoint("u1",lt,$,_camera,ft*.7,St*1.1,-1),setPoint("u2",lt,$,_camera,-ft*.7,St*1.1,-1),setPoint("u3",lt,$,_camera,0,St*2,-1),setPoint("cf1",lt,$,_camera,-ft,0,1),setPoint("cf2",lt,$,_camera,ft,0,1),setPoint("cf3",lt,$,_camera,0,-St,1),setPoint("cf4",lt,$,_camera,0,St,1),setPoint("cn1",lt,$,_camera,-ft,0,-1),setPoint("cn2",lt,$,_camera,ft,0,-1),setPoint("cn3",lt,$,_camera,0,-St,-1),setPoint("cn4",lt,$,_camera,0,St,-1),$.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function setPoint(dt,$,lt,ft,St,Tt,Ct){_vector$e.set(St,Tt,Ct).unproject(ft);const At=$[dt];if(At!==void 0){const Rt=lt.getAttribute("position");for(let kt=0,Nt=At.length;kt<Nt;kt++)Rt.setXYZ(At[kt],_vector$e.x,_vector$e.y,_vector$e.z)}}const _box$4=new Box3;class BoxHelper extends LineSegments{constructor($,lt=16776960){const ft=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),St=new Float32Array(8*3),Tt=new BufferGeometry;Tt.setIndex(new BufferAttribute(ft,1)),Tt.setAttribute("position",new BufferAttribute(St,3)),super(Tt,new LineBasicMaterial({color:lt,toneMapped:!1})),this.object=$,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update($){if($!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&_box$4.setFromObject(this.object),_box$4.isEmpty())return;const lt=_box$4.min,ft=_box$4.max,St=this.geometry.attributes.position,Tt=St.array;Tt[0]=ft.x,Tt[1]=ft.y,Tt[2]=ft.z,Tt[3]=lt.x,Tt[4]=ft.y,Tt[5]=ft.z,Tt[6]=lt.x,Tt[7]=lt.y,Tt[8]=ft.z,Tt[9]=ft.x,Tt[10]=lt.y,Tt[11]=ft.z,Tt[12]=ft.x,Tt[13]=ft.y,Tt[14]=lt.z,Tt[15]=lt.x,Tt[16]=ft.y,Tt[17]=lt.z,Tt[18]=lt.x,Tt[19]=lt.y,Tt[20]=lt.z,Tt[21]=ft.x,Tt[22]=lt.y,Tt[23]=lt.z,St.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject($){return this.object=$,this.update(),this}copy($,lt){return super.copy($,lt),this.object=$.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Box3Helper extends LineSegments{constructor($,lt=16776960){const ft=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),St=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],Tt=new BufferGeometry;Tt.setIndex(new BufferAttribute(ft,1)),Tt.setAttribute("position",new Float32BufferAttribute(St,3)),super(Tt,new LineBasicMaterial({color:lt,toneMapped:!1})),this.box=$,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld($){const lt=this.box;lt.isEmpty()||(lt.getCenter(this.position),lt.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld($))}dispose(){this.geometry.dispose(),this.material.dispose()}}class PlaneHelper extends Line$2{constructor($,lt=1,ft=16776960){const St=ft,Tt=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],Ct=new BufferGeometry;Ct.setAttribute("position",new Float32BufferAttribute(Tt,3)),Ct.computeBoundingSphere(),super(Ct,new LineBasicMaterial({color:St,toneMapped:!1})),this.type="PlaneHelper",this.plane=$,this.size=lt;const At=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],Rt=new BufferGeometry;Rt.setAttribute("position",new Float32BufferAttribute(At,3)),Rt.computeBoundingSphere(),this.add(new Mesh(Rt,new MeshBasicMaterial({color:St,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld($){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld($)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const _axis=new Vector3;let _lineGeometry,_coneGeometry;class ArrowHelper extends Object3D{constructor($=new Vector3(0,0,1),lt=new Vector3(0,0,0),ft=1,St=16776960,Tt=ft*.2,Ct=Tt*.2){super(),this.type="ArrowHelper",_lineGeometry===void 0&&(_lineGeometry=new BufferGeometry,_lineGeometry.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),_coneGeometry=new CylinderGeometry(0,.5,1,5,1),_coneGeometry.translate(0,-.5,0)),this.position.copy(lt),this.line=new Line$2(_lineGeometry,new LineBasicMaterial({color:St,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(_coneGeometry,new MeshBasicMaterial({color:St,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection($),this.setLength(ft,Tt,Ct)}setDirection($){if($.y>.99999)this.quaternion.set(0,0,0,1);else if($.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set($.z,0,-$.x).normalize();const lt=Math.acos($.y);this.quaternion.setFromAxisAngle(_axis,lt)}}setLength($,lt=$*.2,ft=lt*.2){this.line.scale.set(1,Math.max(1e-4,$-lt),1),this.line.updateMatrix(),this.cone.scale.set(ft,lt,ft),this.cone.position.y=$,this.cone.updateMatrix()}setColor($){this.line.material.color.set($),this.cone.material.color.set($)}copy($){return super.copy($,!1),this.line.copy($.line),this.cone.copy($.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class AxesHelper extends LineSegments{constructor($=1){const lt=[0,0,0,$,0,0,0,0,0,0,$,0,0,0,0,0,0,$],ft=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],St=new BufferGeometry;St.setAttribute("position",new Float32BufferAttribute(lt,3)),St.setAttribute("color",new Float32BufferAttribute(ft,3));const Tt=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(St,Tt),this.type="AxesHelper"}setColors($,lt,ft){const St=new Color,Tt=this.geometry.attributes.color.array;return St.set($),St.toArray(Tt,0),St.toArray(Tt,3),St.set(lt),St.toArray(Tt,6),St.toArray(Tt,9),St.set(ft),St.toArray(Tt,12),St.toArray(Tt,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ShapePath{constructor(){this.type="ShapePath",this.color=new Color,this.subPaths=[],this.currentPath=null}moveTo($,lt){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo($,lt),this}lineTo($,lt){return this.currentPath.lineTo($,lt),this}quadraticCurveTo($,lt,ft,St){return this.currentPath.quadraticCurveTo($,lt,ft,St),this}bezierCurveTo($,lt,ft,St,Tt,Ct){return this.currentPath.bezierCurveTo($,lt,ft,St,Tt,Ct),this}splineThru($){return this.currentPath.splineThru($),this}toShapes($){function lt(hn){const pn=[];for(let dn=0,gn=hn.length;dn<gn;dn++){const vn=hn[dn],Tn=new Shape;Tn.curves=vn.curves,pn.push(Tn)}return pn}function ft(hn,pn){const dn=pn.length;let gn=!1;for(let vn=dn-1,Tn=0;Tn<dn;vn=Tn++){let Cn=pn[vn],$n=pn[Tn],xn=$n.x-Cn.x,Rn=$n.y-Cn.y;if(Math.abs(Rn)>Number.EPSILON){if(Rn<0&&(Cn=pn[Tn],xn=-xn,$n=pn[vn],Rn=-Rn),hn.y<Cn.y||hn.y>$n.y)continue;if(hn.y===Cn.y){if(hn.x===Cn.x)return!0}else{const Pn=Rn*(hn.x-Cn.x)-xn*(hn.y-Cn.y);if(Pn===0)return!0;if(Pn<0)continue;gn=!gn}}else{if(hn.y!==Cn.y)continue;if($n.x<=hn.x&&hn.x<=Cn.x||Cn.x<=hn.x&&hn.x<=$n.x)return!0}}return gn}const St=ShapeUtils.isClockWise,Tt=this.subPaths;if(Tt.length===0)return[];let Ct,At,Rt;const kt=[];if(Tt.length===1)return At=Tt[0],Rt=new Shape,Rt.curves=At.curves,kt.push(Rt),kt;let Nt=!St(Tt[0].getPoints());Nt=$?!Nt:Nt;const Bt=[],Ut=[];let zt=[],Zt=0,ln;Ut[Zt]=void 0,zt[Zt]=[];for(let hn=0,pn=Tt.length;hn<pn;hn++)At=Tt[hn],ln=At.getPoints(),Ct=St(ln),Ct=$?!Ct:Ct,Ct?(!Nt&&Ut[Zt]&&Zt++,Ut[Zt]={s:new Shape,p:ln},Ut[Zt].s.curves=At.curves,Nt&&Zt++,zt[Zt]=[]):zt[Zt].push({h:At,p:ln[0]});if(!Ut[0])return lt(Tt);if(Ut.length>1){let hn=!1,pn=0;for(let dn=0,gn=Ut.length;dn<gn;dn++)Bt[dn]=[];for(let dn=0,gn=Ut.length;dn<gn;dn++){const vn=zt[dn];for(let Tn=0;Tn<vn.length;Tn++){const Cn=vn[Tn];let $n=!0;for(let xn=0;xn<Ut.length;xn++)ft(Cn.p,Ut[xn].p)&&(dn!==xn&&pn++,$n?($n=!1,Bt[xn].push(Cn)):hn=!0);$n&&Bt[dn].push(Cn)}}pn>0&&hn===!1&&(zt=Bt)}let cn;for(let hn=0,pn=Ut.length;hn<pn;hn++){Rt=Ut[hn].s,kt.push(Rt),cn=zt[hn];for(let dn=0,gn=cn.length;dn<gn;dn++)Rt.holes.push(cn[dn].h)}return kt}}const _tables=_generateTables();function _generateTables(){const dt=new ArrayBuffer(4),$=new Float32Array(dt),lt=new Uint32Array(dt),ft=new Uint32Array(512),St=new Uint32Array(512);for(let Rt=0;Rt<256;++Rt){const kt=Rt-127;kt<-27?(ft[Rt]=0,ft[Rt|256]=32768,St[Rt]=24,St[Rt|256]=24):kt<-14?(ft[Rt]=1024>>-kt-14,ft[Rt|256]=1024>>-kt-14|32768,St[Rt]=-kt-1,St[Rt|256]=-kt-1):kt<=15?(ft[Rt]=kt+15<<10,ft[Rt|256]=kt+15<<10|32768,St[Rt]=13,St[Rt|256]=13):kt<128?(ft[Rt]=31744,ft[Rt|256]=64512,St[Rt]=24,St[Rt|256]=24):(ft[Rt]=31744,ft[Rt|256]=64512,St[Rt]=13,St[Rt|256]=13)}const Tt=new Uint32Array(2048),Ct=new Uint32Array(64),At=new Uint32Array(64);for(let Rt=1;Rt<1024;++Rt){let kt=Rt<<13,Nt=0;for(;!(kt&8388608);)kt<<=1,Nt-=8388608;kt&=-8388609,Nt+=947912704,Tt[Rt]=kt|Nt}for(let Rt=1024;Rt<2048;++Rt)Tt[Rt]=939524096+(Rt-1024<<13);for(let Rt=1;Rt<31;++Rt)Ct[Rt]=Rt<<23;Ct[31]=1199570944,Ct[32]=2147483648;for(let Rt=33;Rt<63;++Rt)Ct[Rt]=2147483648+(Rt-32<<23);Ct[63]=3347054592;for(let Rt=1;Rt<64;++Rt)Rt!==32&&(At[Rt]=1024);return{floatView:$,uint32View:lt,baseTable:ft,shiftTable:St,mantissaTable:Tt,exponentTable:Ct,offsetTable:At}}function toHalfFloat(dt){Math.abs(dt)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),dt=clamp$1(dt,-65504,65504),_tables.floatView[0]=dt;const $=_tables.uint32View[0],lt=$>>23&511;return _tables.baseTable[lt]+(($&8388607)>>_tables.shiftTable[lt])}function fromHalfFloat(dt){const $=dt>>10;return _tables.uint32View[0]=_tables.mantissaTable[_tables.offsetTable[$]+(dt&1023)]+_tables.exponentTable[$],_tables.floatView[0]}const DataUtils={toHalfFloat,fromHalfFloat};class BoxBufferGeometry extends BoxGeometry{constructor($,lt,ft,St,Tt,Ct){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super($,lt,ft,St,Tt,Ct)}}class CapsuleBufferGeometry extends CapsuleGeometry{constructor($,lt,ft,St){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super($,lt,ft,St)}}class CircleBufferGeometry extends CircleGeometry{constructor($,lt,ft,St){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super($,lt,ft,St)}}class ConeBufferGeometry extends ConeGeometry{constructor($,lt,ft,St,Tt,Ct,At){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super($,lt,ft,St,Tt,Ct,At)}}class CylinderBufferGeometry extends CylinderGeometry{constructor($,lt,ft,St,Tt,Ct,At,Rt){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super($,lt,ft,St,Tt,Ct,At,Rt)}}class DodecahedronBufferGeometry extends DodecahedronGeometry{constructor($,lt){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super($,lt)}}class ExtrudeBufferGeometry extends ExtrudeGeometry{constructor($,lt){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super($,lt)}}class IcosahedronBufferGeometry extends IcosahedronGeometry{constructor($,lt){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super($,lt)}}class LatheBufferGeometry extends LatheGeometry{constructor($,lt,ft,St){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super($,lt,ft,St)}}class OctahedronBufferGeometry extends OctahedronGeometry{constructor($,lt){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super($,lt)}}class PlaneBufferGeometry extends PlaneGeometry{constructor($,lt,ft,St){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super($,lt,ft,St)}}class PolyhedronBufferGeometry extends PolyhedronGeometry{constructor($,lt,ft,St){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super($,lt,ft,St)}}class RingBufferGeometry extends RingGeometry{constructor($,lt,ft,St,Tt,Ct){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super($,lt,ft,St,Tt,Ct)}}class ShapeBufferGeometry extends ShapeGeometry{constructor($,lt){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super($,lt)}}class SphereBufferGeometry extends SphereGeometry{constructor($,lt,ft,St,Tt,Ct,At){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super($,lt,ft,St,Tt,Ct,At)}}class TetrahedronBufferGeometry extends TetrahedronGeometry{constructor($,lt){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super($,lt)}}class TorusBufferGeometry extends TorusGeometry{constructor($,lt,ft,St,Tt){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super($,lt,ft,St,Tt)}}class TorusKnotBufferGeometry extends TorusKnotGeometry{constructor($,lt,ft,St,Tt,Ct){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super($,lt,ft,St,Tt,Ct)}}class TubeBufferGeometry extends TubeGeometry{constructor($,lt,ft,St,Tt){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super($,lt,ft,St,Tt)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=REVISION);const r$5=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping,AddEquation,AddOperation,AdditiveAnimationBlendMode,AdditiveBlending,AlphaFormat,AlwaysDepth,AlwaysStencilFunc,AmbientLight,AmbientLightProbe,AnimationClip,AnimationLoader,AnimationMixer,AnimationObjectGroup,AnimationUtils,ArcCurve,ArrayCamera,ArrowHelper,Audio,AudioAnalyser,AudioContext,AudioListener,AudioLoader,AxesHelper,BackSide,BasicDepthPacking,BasicShadowMap,Bone,BooleanKeyframeTrack,Box2,Box3,Box3Helper,BoxBufferGeometry,BoxGeometry,BoxHelper,BufferAttribute,BufferGeometry,BufferGeometryLoader,ByteType,Cache,Camera,CameraHelper,CanvasTexture,CapsuleBufferGeometry,CapsuleGeometry,CatmullRomCurve3,CineonToneMapping,CircleBufferGeometry,CircleGeometry,ClampToEdgeWrapping,Clock,Color,ColorKeyframeTrack,ColorManagement,CompressedArrayTexture,CompressedTexture,CompressedTextureLoader,ConeBufferGeometry,ConeGeometry,CubeCamera,CubeReflectionMapping,CubeRefractionMapping,CubeTexture,CubeTextureLoader,CubeUVReflectionMapping,CubicBezierCurve,CubicBezierCurve3,CubicInterpolant,CullFaceBack,CullFaceFront,CullFaceFrontBack,CullFaceNone,Curve,CurvePath,CustomBlending,CustomToneMapping,CylinderBufferGeometry,CylinderGeometry,Cylindrical,Data3DTexture,DataArrayTexture,DataTexture,DataTextureLoader,DataUtils,DecrementStencilOp,DecrementWrapStencilOp,DefaultLoadingManager,DepthFormat,DepthStencilFormat,DepthTexture,DirectionalLight,DirectionalLightHelper,DiscreteInterpolant,DisplayP3ColorSpace,DodecahedronBufferGeometry,DodecahedronGeometry,DoubleSide,DstAlphaFactor,DstColorFactor,DynamicCopyUsage,DynamicDrawUsage,DynamicReadUsage,EdgesGeometry,EllipseCurve,EqualDepth,EqualStencilFunc,EquirectangularReflectionMapping,EquirectangularRefractionMapping,Euler,EventDispatcher,ExtrudeBufferGeometry,ExtrudeGeometry,FileLoader,Float16BufferAttribute,Float32BufferAttribute,Float64BufferAttribute,FloatType,Fog,FogExp2,FramebufferTexture,FrontSide,Frustum,GLBufferAttribute,GLSL1,GLSL3,GreaterDepth,GreaterEqualDepth,GreaterEqualStencilFunc,GreaterStencilFunc,GridHelper,Group,HalfFloatType,HemisphereLight,HemisphereLightHelper,HemisphereLightProbe,IcosahedronBufferGeometry,IcosahedronGeometry,ImageBitmapLoader,ImageLoader,ImageUtils,IncrementStencilOp,IncrementWrapStencilOp,InstancedBufferAttribute,InstancedBufferGeometry,InstancedInterleavedBuffer,InstancedMesh,Int16BufferAttribute,Int32BufferAttribute,Int8BufferAttribute,IntType,InterleavedBuffer,InterleavedBufferAttribute,Interpolant,InterpolateDiscrete,InterpolateLinear,InterpolateSmooth,InvertStencilOp,KeepStencilOp,KeyframeTrack,LOD,LatheBufferGeometry,LatheGeometry,Layers:Layers$1,LessDepth,LessEqualDepth,LessEqualStencilFunc,LessStencilFunc,Light,LightProbe,Line:Line$2,Line3,LineBasicMaterial,LineCurve,LineCurve3,LineDashedMaterial,LineLoop,LineSegments,LinearEncoding,LinearFilter,LinearInterpolant,LinearMipMapLinearFilter,LinearMipMapNearestFilter,LinearMipmapLinearFilter,LinearMipmapNearestFilter,LinearSRGBColorSpace,LinearToneMapping,Loader,LoaderUtils,LoadingManager,LoopOnce,LoopPingPong,LoopRepeat,LuminanceAlphaFormat,LuminanceFormat,MOUSE,Material,MaterialLoader,MathUtils,Matrix3,Matrix4,MaxEquation,Mesh,MeshBasicMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshLambertMaterial,MeshMatcapMaterial,MeshNormalMaterial,MeshPhongMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshToonMaterial,MinEquation,MirroredRepeatWrapping,MixOperation,MultiplyBlending,MultiplyOperation,NearestFilter,NearestMipMapLinearFilter,NearestMipMapNearestFilter,NearestMipmapLinearFilter,NearestMipmapNearestFilter,NeverDepth,NeverStencilFunc,NoBlending,NoColorSpace,NoToneMapping,NormalAnimationBlendMode,NormalBlending,NotEqualDepth,NotEqualStencilFunc,NumberKeyframeTrack,Object3D,ObjectLoader,ObjectSpaceNormalMap,OctahedronBufferGeometry,OctahedronGeometry,OneFactor,OneMinusDstAlphaFactor,OneMinusDstColorFactor,OneMinusSrcAlphaFactor,OneMinusSrcColorFactor,OrthographicCamera:OrthographicCamera$1,PCFShadowMap,PCFSoftShadowMap,PMREMGenerator,Path,PerspectiveCamera,Plane:Plane$1,PlaneBufferGeometry,PlaneGeometry,PlaneHelper,PointLight,PointLightHelper,Points,PointsMaterial,PolarGridHelper,PolyhedronBufferGeometry,PolyhedronGeometry,PositionalAudio,PropertyBinding,PropertyMixer,QuadraticBezierCurve,QuadraticBezierCurve3,Quaternion,QuaternionKeyframeTrack,QuaternionLinearInterpolant,RED_GREEN_RGTC2_Format,RED_RGTC1_Format,REVISION,RGBADepthPacking,RGBAFormat,RGBAIntegerFormat,RGBA_ASTC_10x10_Format,RGBA_ASTC_10x5_Format,RGBA_ASTC_10x6_Format,RGBA_ASTC_10x8_Format,RGBA_ASTC_12x10_Format,RGBA_ASTC_12x12_Format,RGBA_ASTC_4x4_Format,RGBA_ASTC_5x4_Format,RGBA_ASTC_5x5_Format,RGBA_ASTC_6x5_Format,RGBA_ASTC_6x6_Format,RGBA_ASTC_8x5_Format,RGBA_ASTC_8x6_Format,RGBA_ASTC_8x8_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_2BPPV1_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format,RGBA_S3TC_DXT3_Format,RGBA_S3TC_DXT5_Format,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_2BPPV1_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format,RGFormat,RGIntegerFormat,RawShaderMaterial,Ray,Raycaster,RectAreaLight,RedFormat,RedIntegerFormat,ReinhardToneMapping,RepeatWrapping,ReplaceStencilOp,ReverseSubtractEquation,RingBufferGeometry,RingGeometry,SIGNED_RED_GREEN_RGTC2_Format,SIGNED_RED_RGTC1_Format,SRGBColorSpace,Scene,ShaderChunk,ShaderLib,ShaderMaterial,ShadowMaterial,Shape,ShapeBufferGeometry,ShapeGeometry,ShapePath,ShapeUtils,ShortType,Skeleton,SkeletonHelper,SkinnedMesh,Source,Sphere:Sphere$1,SphereBufferGeometry,SphereGeometry,Spherical,SphericalHarmonics3,SplineCurve,SpotLight,SpotLightHelper,Sprite,SpriteMaterial,SrcAlphaFactor,SrcAlphaSaturateFactor,SrcColorFactor,StaticCopyUsage,StaticDrawUsage,StaticReadUsage,StereoCamera,StreamCopyUsage,StreamDrawUsage,StreamReadUsage,StringKeyframeTrack,SubtractEquation,SubtractiveBlending,TOUCH,TangentSpaceNormalMap,TetrahedronBufferGeometry,TetrahedronGeometry,Texture,TextureLoader,TorusBufferGeometry,TorusGeometry,TorusKnotBufferGeometry,TorusKnotGeometry,Triangle,TriangleFanDrawMode,TriangleStripDrawMode,TrianglesDrawMode,TubeBufferGeometry,TubeGeometry,TwoPassDoubleSide,UVMapping,Uint16BufferAttribute,Uint32BufferAttribute,Uint8BufferAttribute,Uint8ClampedBufferAttribute,Uniform,UniformsGroup,UniformsLib,UniformsUtils,UnsignedByteType,UnsignedInt248Type,UnsignedIntType,UnsignedShort4444Type,UnsignedShort5551Type,UnsignedShortType,VSMShadowMap,Vector2,Vector3,Vector4,VectorKeyframeTrack,VideoTexture,WebGL1Renderer,WebGL3DRenderTarget,WebGLArrayRenderTarget,WebGLCubeRenderTarget,WebGLMultipleRenderTargets,WebGLRenderTarget,WebGLRenderer,WebGLUtils,WireframeGeometry,WrapAroundEnding,ZeroCurvatureEnding,ZeroFactor,ZeroSlopeEnding,ZeroStencilOp,_SRGBAFormat,sRGBEncoding},Symbol.toStringTag,{value:"Module"})),FPS=60,defaultSimulatorState={robots:{},time:0,timeDilation:1,status:"STOPPED"},SIMULATOR_TIMEOUTS=[],useSimulator=create$2()(immer((set,get)=>({...defaultSimulatorState,play:()=>{set({status:"RUNNING",time:0}),get().executeSimulation(0)},pause:()=>{set({status:"PAUSED"}),get().cancelSimulation()},resume:()=>{set({status:"RUNNING"}),get().executeSimulation(get().time)},halt:()=>{set({status:"STOPPED"}),get().cancelSimulation()},step:()=>{const{status:dt,time:$,timeDilation:lt,robots:ft}=get();if(dt!=="RUNNING")return;const St=1/(FPS*lt),Tt=$+St,Ct={...ft};Object.keys(Ct).forEach(At=>{const Rt=Ct[At];if(Rt.trajectory===null)return;const kt=new Vector3,Nt=Rt.timeAlongTrajectory+St/Rt.trajectoryDuration;Rt.trajectory.map((Bt,Ut)=>{kt.addScaledVector(Bt,Math.pow(Nt,Ut))}),console.log("robot",At,"newpos",kt),Ct[At]={...Ct[At],pos:kt,timeAlongTrajectory:Nt},Ct[At].timeAlongTrajectory>=1&&(Ct[At].trajectory=null,Ct[At].timeAlongTrajectory=0)}),set({robots:Ct,time:Tt})},setRobots:dt=>{const $={};Object.values(dt).forEach(lt=>{$[lt.id]={id:lt.id,pos:new Vector3(...lt.startingPosition),vel:new Vector3,acc:new Vector3,timeAlongTrajectory:0,trajectory:null,trajectoryDuration:0,trajectories:[]}}),set({robots:$})},updateTrajectory:(dt,$,lt)=>{set(ft=>{ft.robots[dt].timeAlongTrajectory=0,ft.robots[dt].trajectory=$,ft.robots[dt].trajectoryDuration=lt})},robotGoTo:(dt,$,lt,ft)=>{const St=get().robots[dt],Tt=St.pos.clone(),Ct=St.vel.clone(),At=St.acc.clone().multiplyScalar(.5),Rt=new Vector3,kt=St.acc.clone().multiplyScalar(2).addScaledVector(ft,-1).addScaledVector(St.vel,8).addScaledVector(lt,6).addScaledVector(St.pos,14).addScaledVector($,-14).multiplyScalar(-2.5),Nt=St.acc.clone().multiplyScalar(10).addScaledVector(ft,-7).addScaledVector(St.vel,45).addScaledVector(lt,39).addScaledVector(St.pos,84).addScaledVector($,-84),Bt=St.acc.clone().multiplyScalar(-15).addScaledVector(ft,13).addScaledVector(St.vel,-72).addScaledVector(lt,-68).addScaledVector(St.pos,-140).addScaledVector($,140).multiplyScalar(.5),Ut=St.acc.clone().addScaledVector(ft,-1).addScaledVector(St.vel,5).addScaledVector(lt,5).addScaledVector(St.pos,10).addScaledVector($,-10).multiplyScalar(2);return[Tt,Ct,At,Rt,kt,Nt,Bt,Ut]},executeSimulation:startTime=>{const timeline=useRobartState.getState().timelineState,blocks=useRobartState.getState().blocks;console.log("execute",timeline.groups),Object.values(timeline.groups).forEach(group=>{Object.keys(group.robots),Object.values(group.items).forEach(timelineItem=>{console.log("item time",timelineItem.startTime);const offset=timelineItem.startTime-startTime;if(offset<0)return;const timeout=setTimeout(()=>{eval(blocks[timelineItem.blockId].javaScript)},timeline.scale*offset*1e3);SIMULATOR_TIMEOUTS.push(timeout)})})},cancelSimulation:()=>{for(SIMULATOR_TIMEOUTS.map(dt=>clearInterval(dt));SIMULATOR_TIMEOUTS.length>0;)SIMULATOR_TIMEOUTS.pop()}}))),defaultRobartState={blocks:{},projectName:"New Robart Project",timelineState:{scale:1,mode:"ADD",groups:{group1:{id:"group1",name:"Group 1",items:{},robots:{}},group2:{id:"group2",name:"Group 2",items:{},robots:{}},group3:{id:"group3",name:"Group 3",items:{},robots:{}},group4:{id:"group4",name:"Group 4",items:{},robots:{}},group5:{id:"group5",name:"Group 5",items:{},robots:{}},group6:{id:"group6",name:"Group 6",items:{},robots:{}},group7:{id:"group7",name:"Group 7",items:{},robots:{}},group8:{id:"group8",name:"Group 8",items:{},robots:{}},group9:{id:"group9",name:"Group 9",items:{},robots:{}}}},editingBlockId:void 0,version:ROBART_VERSION,robots:{}},useRobartState=create$2()(immer(subscribeWithSelector(persist((dt,$)=>({...defaultRobartState,loadProject:lt=>{const ft=loadProjectFromFile(lt);dt(ft)},saveProject:lt=>{const ft={blocks:$().blocks,editingBlockId:void 0,projectName:$().projectName,timelineState:$().timelineState,version:ROBART_VERSION,robots:$().robots};saveProjectToFile(ft,lt)},exportToROS:lt=>{const ft={blocks:$().blocks,editingBlockId:void 0,projectName:$().projectName,timelineState:$().timelineState,version:ROBART_VERSION,robots:$().robots};exportROS(ft)},resetProject:()=>{dt(defaultRobartState)},setProjectName:lt=>dt({projectName:lt}),saveGroup:(lt,ft)=>{},createGroup:lt=>{const ft=uuid$2(),St={id:ft,name:lt,items:{},robots:{}};return dt(Tt=>{Tt.timelineState.groups[ft]=St}),ft},addBlockToTimeline:(lt,ft,St,Tt)=>{const Ct={id:uuid$2(),groupId:lt,blockId:ft,startTime:St,isTrajectory:Tt},At={...$().timelineState.groups[lt].items};At[Ct.id]=Ct,dt(Rt=>{Rt.timelineState.groups[lt].items=At})},updateBlockInTimeline:(lt,ft,St)=>{const Tt={...$().timelineState.groups[lt].items[ft],startTime:St},Ct={...$().timelineState.groups[lt].items};Ct[Tt.id]=Tt,dt(At=>{At.timelineState.groups[lt].items=Ct})},saveBlock:(lt,ft)=>{dt(St=>{St.blocks[lt]={...St.blocks[lt],...ft}})},removeBlock:lt=>{var Ct;const ft={...$().blocks};delete ft[lt],Object.values($().timelineState.groups).map(At=>Object.values(At.items).filter(Rt=>Rt.blockId===lt)).flat().forEach(At=>$().removeTimelineItem(At.groupId,At.id));const Tt=(Ct=Object.values(ft)[Object.keys(ft).length-1])==null?void 0:Ct.id;dt({blocks:ft,editingBlockId:Tt})},renameBlock:lt=>dt(ft=>{ft.blocks[ft.editingBlockId].name=lt}),createBlock:lt=>{const ft={id:uuid$2(),name:lt,xml:"",python:"",javaScript:"",duration:3};return dt(St=>{St.blocks[ft.id]=ft}),ft.id},copyBlock:lt=>{const ft={...$().blocks[lt],id:uuid$2(),name:`Copy of ${$().blocks[lt].name}`};return dt(St=>{St.blocks[ft.id]=ft}),ft.id},setEditingBlock:lt=>{const ft=$().editingBlockId;dt({editingBlockId:void 0}),lt!=ft&&dt({editingBlockId:lt})},addRobotToGroup:(lt,ft)=>{dt(St=>{St.timelineState.groups[lt].robots[ft]=St.robots[ft]})},removeRobotFromGroup:(lt,ft)=>{dt(St=>{delete St.timelineState.groups[lt].robots[ft]})},createRobot:()=>{const lt=uuid$2(),ft=Object.keys($().robots).length;return dt(St=>{St.robots[lt]={id:lt,name:`CF ${ft}`,type:"crazyflie",startingPosition:[0,0,0]}}),lt},saveRobot:(lt,ft)=>{dt(St=>{St.robots[lt]={...St.robots[lt],...ft}})},deleteRobot:lt=>{const ft={...$().robots};delete ft[lt],dt({robots:ft})},setTimelineMode:lt=>{dt({timelineState:{...$().timelineState,mode:lt}})},removeTimelineItem:(lt,ft)=>{const St={...$().timelineState.groups[lt].items};delete St[ft],dt(Tt=>{Tt.timelineState.groups[lt].items=St})}}),{storage:createJSONStorage(()=>sessionStorage),name:"robartState"}))));useRobartState.subscribe(dt=>dt.robots,dt=>{useSimulator.getState().setRobots(dt)});function r$4(dt){var $,lt,ft="";if(typeof dt=="string"||typeof dt=="number")ft+=dt;else if(typeof dt=="object")if(Array.isArray(dt))for($=0;$<dt.length;$++)dt[$]&&(lt=r$4(dt[$]))&&(ft&&(ft+=" "),ft+=lt);else for($ in dt)dt[$]&&(ft&&(ft+=" "),ft+=$);return ft}function clsx(){for(var dt,$,lt=0,ft="";lt<arguments.length;)(dt=arguments[lt++])&&($=r$4(dt))&&(ft&&(ft+=" "),ft+=$);return ft}const RenamableText=({text:dt,updateText:$,className:lt})=>{const[ft,St]=reactExports.useState(!1),[Tt,Ct]=reactExports.useState(""),[At,Rt]=reactExports.useState(0),kt=reactExports.useRef(null);reactExports.useEffect(()=>{var Bt;kt.current!==null&&Rt((Bt=kt.current)==null?void 0:Bt.offsetWidth)},[Tt]);const Nt="h-min w-fit rounded-md border-2 border-white hover:border-black";return ft?jsxs("form",{onSubmit:Bt=>{Bt.preventDefault(),$(Tt),St(!1)},children:[jsx("span",{className:clsx(Nt,lt,"absolute -z-40 whitespace-pre"),ref:kt,children:Tt}),jsx("input",{className:clsx(Nt,lt),value:Tt,style:{width:`calc(${At}px + 1ch)`},onChange:Bt=>Ct(Bt.target.value),onBlur:()=>St(!1),autoFocus:!0}),jsx("input",{type:"submit",className:"hidden"})]}):jsx("h2",{className:clsx(Nt,lt),onClick:()=>{Ct(dt),St(!0)},children:dt})},BlockEditorHeader=()=>{const dt=useRobartState(ft=>ft.editingBlockId),$=useRobartState(ft=>ft.blocks[dt??""]),lt=useRobartState(ft=>ft.renameBlock);return $?jsx("div",{className:"m-2 flex items-center gap-2",children:jsx(RenamableText,{text:$.name,className:"text-lg font-bold",updateText:ft=>{lt(ft!==""?ft:"New Block")}})}):jsx("div",{className:"m-2",children:"No Block selected."})},BlockEditorPanel=()=>{const dt=reactExports.useRef(null),[$,lt]=reactExports.useState(void 0),ft=useRobartState(At=>At.editingBlockId),St=useRobartState(At=>At.saveBlock),{workspace:Tt,xml:Ct}=useBlocklyWorkspace({toolboxConfiguration:blocklyToolboxConfiguration,initialXml:"",workspaceConfiguration:{grid:{spacing:20,length:3,colour:"#ccc",snap:!0}},onWorkspaceChange:At=>{const Rt=pythonExports.pythonGenerator.workspaceToCode(At),kt=javascriptExports.javascriptGenerator.workspaceToCode(At);$&&Ct&&St($,{xml:Ct,python:Rt,javaScript:kt})},ref:dt});return reactExports.useEffect(()=>{if(window.dispatchEvent(new Event("resize")),lt(ft),ft){Tt==null||Tt.setVisible(!0);const Rt=useRobartState.getState().blocks[ft];if(Rt.xml&&Tt){var At=Blockly.Xml.textToDom(Rt.xml);Blockly.Xml.clearWorkspaceAndLoadFromXml(At,Tt)}else!Rt.xml&&Tt&&Tt.clear()}else Tt&&(Tt.setVisible(!1),Tt.clear())},[ft]),jsxs("div",{className:"flex h-full w-full flex-col",children:[jsx(BlockEditorHeader,{}),jsx("div",{ref:dt,className:"w-full flex-grow"})]})};function ownKeys$4(dt,$){var lt=Object.keys(dt);if(Object.getOwnPropertySymbols){var ft=Object.getOwnPropertySymbols(dt);$&&(ft=ft.filter(function(St){return Object.getOwnPropertyDescriptor(dt,St).enumerable})),lt.push.apply(lt,ft)}return lt}function _objectSpread2$2(dt){for(var $=1;$<arguments.length;$++){var lt=arguments[$]!=null?arguments[$]:{};$%2?ownKeys$4(Object(lt),!0).forEach(function(ft){_defineProperty$5(dt,ft,lt[ft])}):Object.getOwnPropertyDescriptors?Object.defineProperties(dt,Object.getOwnPropertyDescriptors(lt)):ownKeys$4(Object(lt)).forEach(function(ft){Object.defineProperty(dt,ft,Object.getOwnPropertyDescriptor(lt,ft))})}return dt}function _typeof$2(dt){"@babel/helpers - typeof";return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$2(dt)}function _classCallCheck(dt,$){if(!(dt instanceof $))throw new TypeError("Cannot call a class as a function")}function _defineProperties(dt,$){for(var lt=0;lt<$.length;lt++){var ft=$[lt];ft.enumerable=ft.enumerable||!1,ft.configurable=!0,"value"in ft&&(ft.writable=!0),Object.defineProperty(dt,ft.key,ft)}}function _createClass(dt,$,lt){return $&&_defineProperties(dt.prototype,$),lt&&_defineProperties(dt,lt),Object.defineProperty(dt,"prototype",{writable:!1}),dt}function _defineProperty$5(dt,$,lt){return $ in dt?Object.defineProperty(dt,$,{value:lt,enumerable:!0,configurable:!0,writable:!0}):dt[$]=lt,dt}function _slicedToArray$2(dt,$){return _arrayWithHoles$2(dt)||_iterableToArrayLimit$2(dt,$)||_unsupportedIterableToArray$3(dt,$)||_nonIterableRest$2()}function _toConsumableArray$3(dt){return _arrayWithoutHoles$3(dt)||_iterableToArray$3(dt)||_unsupportedIterableToArray$3(dt)||_nonIterableSpread$3()}function _arrayWithoutHoles$3(dt){if(Array.isArray(dt))return _arrayLikeToArray$3(dt)}function _arrayWithHoles$2(dt){if(Array.isArray(dt))return dt}function _iterableToArray$3(dt){if(typeof Symbol<"u"&&dt[Symbol.iterator]!=null||dt["@@iterator"]!=null)return Array.from(dt)}function _iterableToArrayLimit$2(dt,$){var lt=dt==null?null:typeof Symbol<"u"&&dt[Symbol.iterator]||dt["@@iterator"];if(lt!=null){var ft=[],St=!0,Tt=!1,Ct,At;try{for(lt=lt.call(dt);!(St=(Ct=lt.next()).done)&&(ft.push(Ct.value),!($&&ft.length===$));St=!0);}catch(Rt){Tt=!0,At=Rt}finally{try{!St&&lt.return!=null&&lt.return()}finally{if(Tt)throw At}}return ft}}function _unsupportedIterableToArray$3(dt,$){if(dt){if(typeof dt=="string")return _arrayLikeToArray$3(dt,$);var lt=Object.prototype.toString.call(dt).slice(8,-1);if(lt==="Object"&&dt.constructor&&(lt=dt.constructor.name),lt==="Map"||lt==="Set")return Array.from(dt);if(lt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(lt))return _arrayLikeToArray$3(dt,$)}}function _arrayLikeToArray$3(dt,$){($==null||$>dt.length)&&($=dt.length);for(var lt=0,ft=new Array($);lt<$;lt++)ft[lt]=dt[lt];return ft}function _nonIterableSpread$3(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _nonIterableRest$2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var noop$2=function dt(){},_WINDOW={},_DOCUMENT={},_MUTATION_OBSERVER=null,_PERFORMANCE={mark:noop$2,measure:noop$2};try{typeof window<"u"&&(_WINDOW=window),typeof document<"u"&&(_DOCUMENT=document),typeof MutationObserver<"u"&&(_MUTATION_OBSERVER=MutationObserver),typeof performance<"u"&&(_PERFORMANCE=performance)}catch(dt){}var _ref=_WINDOW.navigator||{},_ref$userAgent=_ref.userAgent,userAgent=_ref$userAgent===void 0?"":_ref$userAgent,WINDOW=_WINDOW,DOCUMENT=_DOCUMENT,MUTATION_OBSERVER=_MUTATION_OBSERVER,PERFORMANCE=_PERFORMANCE;WINDOW.document;var IS_DOM=!!DOCUMENT.documentElement&&!!DOCUMENT.head&&typeof DOCUMENT.addEventListener=="function"&&typeof DOCUMENT.createElement=="function",IS_IE=~userAgent.indexOf("MSIE")||~userAgent.indexOf("Trident/"),_familyProxy,_familyProxy2,_familyProxy3,_familyProxy4,_familyProxy5,NAMESPACE_IDENTIFIER="___FONT_AWESOME___",UNITS_IN_GRID=16,DEFAULT_CSS_PREFIX="fa",DEFAULT_REPLACEMENT_CLASS="svg-inline--fa",DATA_FA_I2SVG="data-fa-i2svg",DATA_FA_PSEUDO_ELEMENT="data-fa-pseudo-element",DATA_FA_PSEUDO_ELEMENT_PENDING="data-fa-pseudo-element-pending",DATA_PREFIX="data-prefix",DATA_ICON="data-icon",HTML_CLASS_I2SVG_BASE_CLASS="fontawesome-i2svg",MUTATION_APPROACH_ASYNC="async",TAGNAMES_TO_SKIP_FOR_PSEUDOELEMENTS=["HTML","HEAD","STYLE","SCRIPT"],PRODUCTION$1=function(){try{return!0}catch{return!1}}(),FAMILY_CLASSIC="classic",FAMILY_SHARP="sharp",FAMILIES=[FAMILY_CLASSIC,FAMILY_SHARP];function familyProxy(dt){return new Proxy(dt,{get:function(lt,ft){return ft in lt?lt[ft]:lt[FAMILY_CLASSIC]}})}var PREFIX_TO_STYLE=familyProxy((_familyProxy={},_defineProperty$5(_familyProxy,FAMILY_CLASSIC,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit"}),_defineProperty$5(_familyProxy,FAMILY_SHARP,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular"}),_familyProxy)),STYLE_TO_PREFIX=familyProxy((_familyProxy2={},_defineProperty$5(_familyProxy2,FAMILY_CLASSIC,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),_defineProperty$5(_familyProxy2,FAMILY_SHARP,{solid:"fass",regular:"fasr"}),_familyProxy2)),PREFIX_TO_LONG_STYLE=familyProxy((_familyProxy3={},_defineProperty$5(_familyProxy3,FAMILY_CLASSIC,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),_defineProperty$5(_familyProxy3,FAMILY_SHARP,{fass:"fa-solid",fasr:"fa-regular"}),_familyProxy3)),LONG_STYLE_TO_PREFIX=familyProxy((_familyProxy4={},_defineProperty$5(_familyProxy4,FAMILY_CLASSIC,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),_defineProperty$5(_familyProxy4,FAMILY_SHARP,{"fa-solid":"fass","fa-regular":"fasr"}),_familyProxy4)),ICON_SELECTION_SYNTAX_PATTERN=/fa(s|r|l|t|d|b|k|ss|sr)?[\-\ ]/,LAYERS_TEXT_CLASSNAME="fa-layers-text",FONT_FAMILY_PATTERN=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,FONT_WEIGHT_TO_PREFIX=familyProxy((_familyProxy5={},_defineProperty$5(_familyProxy5,FAMILY_CLASSIC,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),_defineProperty$5(_familyProxy5,FAMILY_SHARP,{900:"fass",400:"fasr"}),_familyProxy5)),oneToTen=[1,2,3,4,5,6,7,8,9,10],oneToTwenty=oneToTen.concat([11,12,13,14,15,16,17,18,19,20]),ATTRIBUTES_WATCHED_FOR_MUTATION=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],DUOTONE_CLASSES={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},prefixes=new Set;Object.keys(STYLE_TO_PREFIX[FAMILY_CLASSIC]).map(prefixes.add.bind(prefixes));Object.keys(STYLE_TO_PREFIX[FAMILY_SHARP]).map(prefixes.add.bind(prefixes));var RESERVED_CLASSES=[].concat(FAMILIES,_toConsumableArray$3(prefixes),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",DUOTONE_CLASSES.GROUP,DUOTONE_CLASSES.SWAP_OPACITY,DUOTONE_CLASSES.PRIMARY,DUOTONE_CLASSES.SECONDARY]).concat(oneToTen.map(function(dt){return"".concat(dt,"x")})).concat(oneToTwenty.map(function(dt){return"w-".concat(dt)})),initial=WINDOW.FontAwesomeConfig||{};function getAttrConfig(dt){var $=DOCUMENT.querySelector("script["+dt+"]");if($)return $.getAttribute(dt)}function coerce(dt){return dt===""?!0:dt==="false"?!1:dt==="true"?!0:dt}if(DOCUMENT&&typeof DOCUMENT.querySelector=="function"){var attrs=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];attrs.forEach(function(dt){var $=_slicedToArray$2(dt,2),lt=$[0],ft=$[1],St=coerce(getAttrConfig(lt));St!=null&&(initial[ft]=St)})}var _default$1={styleDefault:"solid",familyDefault:"classic",cssPrefix:DEFAULT_CSS_PREFIX,replacementClass:DEFAULT_REPLACEMENT_CLASS,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};initial.familyPrefix&&(initial.cssPrefix=initial.familyPrefix);var _config=_objectSpread2$2(_objectSpread2$2({},_default$1),initial);_config.autoReplaceSvg||(_config.observeMutations=!1);var config$1={};Object.keys(_default$1).forEach(function(dt){Object.defineProperty(config$1,dt,{enumerable:!0,set:function(lt){_config[dt]=lt,_onChangeCb.forEach(function(ft){return ft(config$1)})},get:function(){return _config[dt]}})});Object.defineProperty(config$1,"familyPrefix",{enumerable:!0,set:function dt($){_config.cssPrefix=$,_onChangeCb.forEach(function(lt){return lt(config$1)})},get:function dt(){return _config.cssPrefix}});WINDOW.FontAwesomeConfig=config$1;var _onChangeCb=[];function onChange(dt){return _onChangeCb.push(dt),function(){_onChangeCb.splice(_onChangeCb.indexOf(dt),1)}}var d$5=UNITS_IN_GRID,meaninglessTransform={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function insertCss(dt){if(!(!dt||!IS_DOM)){var $=DOCUMENT.createElement("style");$.setAttribute("type","text/css"),$.innerHTML=dt;for(var lt=DOCUMENT.head.childNodes,ft=null,St=lt.length-1;St>-1;St--){var Tt=lt[St],Ct=(Tt.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(Ct)>-1&&(ft=Tt)}return DOCUMENT.head.insertBefore($,ft),dt}}var idPool="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function nextUniqueId(){for(var dt=12,$="";dt-- >0;)$+=idPool[Math.random()*62|0];return $}function toArray(dt){for(var $=[],lt=(dt||[]).length>>>0;lt--;)$[lt]=dt[lt];return $}function classArray(dt){return dt.classList?toArray(dt.classList):(dt.getAttribute("class")||"").split(" ").filter(function($){return $})}function htmlEscape(dt){return"".concat(dt).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function joinAttributes(dt){return Object.keys(dt||{}).reduce(function($,lt){return $+"".concat(lt,'="').concat(htmlEscape(dt[lt]),'" ')},"").trim()}function joinStyles(dt){return Object.keys(dt||{}).reduce(function($,lt){return $+"".concat(lt,": ").concat(dt[lt].trim(),";")},"")}function transformIsMeaningful(dt){return dt.size!==meaninglessTransform.size||dt.x!==meaninglessTransform.x||dt.y!==meaninglessTransform.y||dt.rotate!==meaninglessTransform.rotate||dt.flipX||dt.flipY}function transformForSvg(dt){var $=dt.transform,lt=dt.containerWidth,ft=dt.iconWidth,St={transform:"translate(".concat(lt/2," 256)")},Tt="translate(".concat($.x*32,", ").concat($.y*32,") "),Ct="scale(".concat($.size/16*($.flipX?-1:1),", ").concat($.size/16*($.flipY?-1:1),") "),At="rotate(".concat($.rotate," 0 0)"),Rt={transform:"".concat(Tt," ").concat(Ct," ").concat(At)},kt={transform:"translate(".concat(ft/2*-1," -256)")};return{outer:St,inner:Rt,path:kt}}function transformForCss(dt){var $=dt.transform,lt=dt.width,ft=lt===void 0?UNITS_IN_GRID:lt,St=dt.height,Tt=St===void 0?UNITS_IN_GRID:St,Ct=dt.startCentered,At=Ct===void 0?!1:Ct,Rt="";return At&&IS_IE?Rt+="translate(".concat($.x/d$5-ft/2,"em, ").concat($.y/d$5-Tt/2,"em) "):At?Rt+="translate(calc(-50% + ".concat($.x/d$5,"em), calc(-50% + ").concat($.y/d$5,"em)) "):Rt+="translate(".concat($.x/d$5,"em, ").concat($.y/d$5,"em) "),Rt+="scale(".concat($.size/d$5*($.flipX?-1:1),", ").concat($.size/d$5*($.flipY?-1:1),") "),Rt+="rotate(".concat($.rotate,"deg) "),Rt}var baseStyles=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function css(){var dt=DEFAULT_CSS_PREFIX,$=DEFAULT_REPLACEMENT_CLASS,lt=config$1.cssPrefix,ft=config$1.replacementClass,St=baseStyles;if(lt!==dt||ft!==$){var Tt=new RegExp("\\.".concat(dt,"\\-"),"g"),Ct=new RegExp("\\--".concat(dt,"\\-"),"g"),At=new RegExp("\\.".concat($),"g");St=St.replace(Tt,".".concat(lt,"-")).replace(Ct,"--".concat(lt,"-")).replace(At,".".concat(ft))}return St}var _cssInserted=!1;function ensureCss(){config$1.autoAddCss&&!_cssInserted&&(insertCss(css()),_cssInserted=!0)}var InjectCSS={mixout:function dt(){return{dom:{css,insertCss:ensureCss}}},hooks:function dt(){return{beforeDOMElementCreation:function(){ensureCss()},beforeI2svg:function(){ensureCss()}}}},w$3=WINDOW||{};w$3[NAMESPACE_IDENTIFIER]||(w$3[NAMESPACE_IDENTIFIER]={});w$3[NAMESPACE_IDENTIFIER].styles||(w$3[NAMESPACE_IDENTIFIER].styles={});w$3[NAMESPACE_IDENTIFIER].hooks||(w$3[NAMESPACE_IDENTIFIER].hooks={});w$3[NAMESPACE_IDENTIFIER].shims||(w$3[NAMESPACE_IDENTIFIER].shims=[]);var namespace=w$3[NAMESPACE_IDENTIFIER],functions=[],listener=function dt(){DOCUMENT.removeEventListener("DOMContentLoaded",dt),loaded=1,functions.map(function($){return $()})},loaded=!1;IS_DOM&&(loaded=(DOCUMENT.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(DOCUMENT.readyState),loaded||DOCUMENT.addEventListener("DOMContentLoaded",listener));function domready(dt){IS_DOM&&(loaded?setTimeout(dt,0):functions.push(dt))}function toHtml(dt){var $=dt.tag,lt=dt.attributes,ft=lt===void 0?{}:lt,St=dt.children,Tt=St===void 0?[]:St;return typeof dt=="string"?htmlEscape(dt):"<".concat($," ").concat(joinAttributes(ft),">").concat(Tt.map(toHtml).join(""),"</").concat($,">")}function iconFromMapping(dt,$,lt){if(dt&&dt[$]&&dt[$][lt])return{prefix:$,iconName:lt,icon:dt[$][lt]}}var bindInternal4=function dt($,lt){return function(ft,St,Tt,Ct){return $.call(lt,ft,St,Tt,Ct)}},reduce=function dt($,lt,ft,St){var Tt=Object.keys($),Ct=Tt.length,At=St!==void 0?bindInternal4(lt,St):lt,Rt,kt,Nt;for(ft===void 0?(Rt=1,Nt=$[Tt[0]]):(Rt=0,Nt=ft);Rt<Ct;Rt++)kt=Tt[Rt],Nt=At(Nt,$[kt],kt,$);return Nt};function ucs2decode(dt){for(var $=[],lt=0,ft=dt.length;lt<ft;){var St=dt.charCodeAt(lt++);if(St>=55296&&St<=56319&&lt<ft){var Tt=dt.charCodeAt(lt++);(Tt&64512)==56320?$.push(((St&1023)<<10)+(Tt&1023)+65536):($.push(St),lt--)}else $.push(St)}return $}function toHex(dt){var $=ucs2decode(dt);return $.length===1?$[0].toString(16):null}function codePointAt$1(dt,$){var lt=dt.length,ft=dt.charCodeAt($),St;return ft>=55296&&ft<=56319&&lt>$+1&&(St=dt.charCodeAt($+1),St>=56320&&St<=57343)?(ft-55296)*1024+St-56320+65536:ft}function normalizeIcons(dt){return Object.keys(dt).reduce(function($,lt){var ft=dt[lt],St=!!ft.icon;return St?$[ft.iconName]=ft.icon:$[lt]=ft,$},{})}function defineIcons(dt,$){var lt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ft=lt.skipHooks,St=ft===void 0?!1:ft,Tt=normalizeIcons($);typeof namespace.hooks.addPack=="function"&&!St?namespace.hooks.addPack(dt,normalizeIcons($)):namespace.styles[dt]=_objectSpread2$2(_objectSpread2$2({},namespace.styles[dt]||{}),Tt),dt==="fas"&&defineIcons("fa",$)}var _LONG_STYLE,_PREFIXES,_PREFIXES_FOR_FAMILY,styles=namespace.styles,shims=namespace.shims,LONG_STYLE=(_LONG_STYLE={},_defineProperty$5(_LONG_STYLE,FAMILY_CLASSIC,Object.values(PREFIX_TO_LONG_STYLE[FAMILY_CLASSIC])),_defineProperty$5(_LONG_STYLE,FAMILY_SHARP,Object.values(PREFIX_TO_LONG_STYLE[FAMILY_SHARP])),_LONG_STYLE),_defaultUsablePrefix=null,_byUnicode={},_byLigature={},_byOldName={},_byOldUnicode={},_byAlias={},PREFIXES=(_PREFIXES={},_defineProperty$5(_PREFIXES,FAMILY_CLASSIC,Object.keys(PREFIX_TO_STYLE[FAMILY_CLASSIC])),_defineProperty$5(_PREFIXES,FAMILY_SHARP,Object.keys(PREFIX_TO_STYLE[FAMILY_SHARP])),_PREFIXES);function isReserved(dt){return~RESERVED_CLASSES.indexOf(dt)}function getIconName(dt,$){var lt=$.split("-"),ft=lt[0],St=lt.slice(1).join("-");return ft===dt&&St!==""&&!isReserved(St)?St:null}var build=function dt(){var $=function(Tt){return reduce(styles,function(Ct,At,Rt){return Ct[Rt]=reduce(At,Tt,{}),Ct},{})};_byUnicode=$(function(St,Tt,Ct){if(Tt[3]&&(St[Tt[3]]=Ct),Tt[2]){var At=Tt[2].filter(function(Rt){return typeof Rt=="number"});At.forEach(function(Rt){St[Rt.toString(16)]=Ct})}return St}),_byLigature=$(function(St,Tt,Ct){if(St[Ct]=Ct,Tt[2]){var At=Tt[2].filter(function(Rt){return typeof Rt=="string"});At.forEach(function(Rt){St[Rt]=Ct})}return St}),_byAlias=$(function(St,Tt,Ct){var At=Tt[2];return St[Ct]=Ct,At.forEach(function(Rt){St[Rt]=Ct}),St});var lt="far"in styles||config$1.autoFetchSvg,ft=reduce(shims,function(St,Tt){var Ct=Tt[0],At=Tt[1],Rt=Tt[2];return At==="far"&&!lt&&(At="fas"),typeof Ct=="string"&&(St.names[Ct]={prefix:At,iconName:Rt}),typeof Ct=="number"&&(St.unicodes[Ct.toString(16)]={prefix:At,iconName:Rt}),St},{names:{},unicodes:{}});_byOldName=ft.names,_byOldUnicode=ft.unicodes,_defaultUsablePrefix=getCanonicalPrefix(config$1.styleDefault,{family:config$1.familyDefault})};onChange(function(dt){_defaultUsablePrefix=getCanonicalPrefix(dt.styleDefault,{family:config$1.familyDefault})});build();function byUnicode(dt,$){return(_byUnicode[dt]||{})[$]}function byLigature(dt,$){return(_byLigature[dt]||{})[$]}function byAlias(dt,$){return(_byAlias[dt]||{})[$]}function byOldName(dt){return _byOldName[dt]||{prefix:null,iconName:null}}function byOldUnicode(dt){var $=_byOldUnicode[dt],lt=byUnicode("fas",dt);return $||(lt?{prefix:"fas",iconName:lt}:null)||{prefix:null,iconName:null}}function getDefaultUsablePrefix(){return _defaultUsablePrefix}var emptyCanonicalIcon=function dt(){return{prefix:null,iconName:null,rest:[]}};function getCanonicalPrefix(dt){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},lt=$.family,ft=lt===void 0?FAMILY_CLASSIC:lt,St=PREFIX_TO_STYLE[ft][dt],Tt=STYLE_TO_PREFIX[ft][dt]||STYLE_TO_PREFIX[ft][St],Ct=dt in namespace.styles?dt:null;return Tt||Ct||null}var PREFIXES_FOR_FAMILY=(_PREFIXES_FOR_FAMILY={},_defineProperty$5(_PREFIXES_FOR_FAMILY,FAMILY_CLASSIC,Object.keys(PREFIX_TO_LONG_STYLE[FAMILY_CLASSIC])),_defineProperty$5(_PREFIXES_FOR_FAMILY,FAMILY_SHARP,Object.keys(PREFIX_TO_LONG_STYLE[FAMILY_SHARP])),_PREFIXES_FOR_FAMILY);function getCanonicalIcon(dt){var $,lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ft=lt.skipLookups,St=ft===void 0?!1:ft,Tt=($={},_defineProperty$5($,FAMILY_CLASSIC,"".concat(config$1.cssPrefix,"-").concat(FAMILY_CLASSIC)),_defineProperty$5($,FAMILY_SHARP,"".concat(config$1.cssPrefix,"-").concat(FAMILY_SHARP)),$),Ct=null,At=FAMILY_CLASSIC;(dt.includes(Tt[FAMILY_CLASSIC])||dt.some(function(kt){return PREFIXES_FOR_FAMILY[FAMILY_CLASSIC].includes(kt)}))&&(At=FAMILY_CLASSIC),(dt.includes(Tt[FAMILY_SHARP])||dt.some(function(kt){return PREFIXES_FOR_FAMILY[FAMILY_SHARP].includes(kt)}))&&(At=FAMILY_SHARP);var Rt=dt.reduce(function(kt,Nt){var Bt=getIconName(config$1.cssPrefix,Nt);if(styles[Nt]?(Nt=LONG_STYLE[At].includes(Nt)?LONG_STYLE_TO_PREFIX[At][Nt]:Nt,Ct=Nt,kt.prefix=Nt):PREFIXES[At].indexOf(Nt)>-1?(Ct=Nt,kt.prefix=getCanonicalPrefix(Nt,{family:At})):Bt?kt.iconName=Bt:Nt!==config$1.replacementClass&&Nt!==Tt[FAMILY_CLASSIC]&&Nt!==Tt[FAMILY_SHARP]&&kt.rest.push(Nt),!St&&kt.prefix&&kt.iconName){var Ut=Ct==="fa"?byOldName(kt.iconName):{},zt=byAlias(kt.prefix,kt.iconName);Ut.prefix&&(Ct=null),kt.iconName=Ut.iconName||zt||kt.iconName,kt.prefix=Ut.prefix||kt.prefix,kt.prefix==="far"&&!styles.far&&styles.fas&&!config$1.autoFetchSvg&&(kt.prefix="fas")}return kt},emptyCanonicalIcon());return(dt.includes("fa-brands")||dt.includes("fab"))&&(Rt.prefix="fab"),(dt.includes("fa-duotone")||dt.includes("fad"))&&(Rt.prefix="fad"),!Rt.prefix&&At===FAMILY_SHARP&&(styles.fass||config$1.autoFetchSvg)&&(Rt.prefix="fass",Rt.iconName=byAlias(Rt.prefix,Rt.iconName)||Rt.iconName),(Rt.prefix==="fa"||Ct==="fa")&&(Rt.prefix=getDefaultUsablePrefix()||"fas"),Rt}var Library=function(){function dt(){_classCallCheck(this,dt),this.definitions={}}return _createClass(dt,[{key:"add",value:function(){for(var lt=this,ft=arguments.length,St=new Array(ft),Tt=0;Tt<ft;Tt++)St[Tt]=arguments[Tt];var Ct=St.reduce(this._pullDefinitions,{});Object.keys(Ct).forEach(function(At){lt.definitions[At]=_objectSpread2$2(_objectSpread2$2({},lt.definitions[At]||{}),Ct[At]),defineIcons(At,Ct[At]);var Rt=PREFIX_TO_LONG_STYLE[FAMILY_CLASSIC][At];Rt&&defineIcons(Rt,Ct[At]),build()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(lt,ft){var St=ft.prefix&&ft.iconName&&ft.icon?{0:ft}:ft;return Object.keys(St).map(function(Tt){var Ct=St[Tt],At=Ct.prefix,Rt=Ct.iconName,kt=Ct.icon,Nt=kt[2];lt[At]||(lt[At]={}),Nt.length>0&&Nt.forEach(function(Bt){typeof Bt=="string"&&(lt[At][Bt]=kt)}),lt[At][Rt]=kt}),lt}}]),dt}(),_plugins=[],_hooks={},providers={},defaultProviderKeys=Object.keys(providers);function registerPlugins(dt,$){var lt=$.mixoutsTo;return _plugins=dt,_hooks={},Object.keys(providers).forEach(function(ft){defaultProviderKeys.indexOf(ft)===-1&&delete providers[ft]}),_plugins.forEach(function(ft){var St=ft.mixout?ft.mixout():{};if(Object.keys(St).forEach(function(Ct){typeof St[Ct]=="function"&&(lt[Ct]=St[Ct]),_typeof$2(St[Ct])==="object"&&Object.keys(St[Ct]).forEach(function(At){lt[Ct]||(lt[Ct]={}),lt[Ct][At]=St[Ct][At]})}),ft.hooks){var Tt=ft.hooks();Object.keys(Tt).forEach(function(Ct){_hooks[Ct]||(_hooks[Ct]=[]),_hooks[Ct].push(Tt[Ct])})}ft.provides&&ft.provides(providers)}),lt}function chainHooks(dt,$){for(var lt=arguments.length,ft=new Array(lt>2?lt-2:0),St=2;St<lt;St++)ft[St-2]=arguments[St];var Tt=_hooks[dt]||[];return Tt.forEach(function(Ct){$=Ct.apply(null,[$].concat(ft))}),$}function callHooks(dt){for(var $=arguments.length,lt=new Array($>1?$-1:0),ft=1;ft<$;ft++)lt[ft-1]=arguments[ft];var St=_hooks[dt]||[];St.forEach(function(Tt){Tt.apply(null,lt)})}function callProvided(){var dt=arguments[0],$=Array.prototype.slice.call(arguments,1);return providers[dt]?providers[dt].apply(null,$):void 0}function findIconDefinition(dt){dt.prefix==="fa"&&(dt.prefix="fas");var $=dt.iconName,lt=dt.prefix||getDefaultUsablePrefix();if($)return $=byAlias(lt,$)||$,iconFromMapping(library.definitions,lt,$)||iconFromMapping(namespace.styles,lt,$)}var library=new Library,noAuto=function dt(){config$1.autoReplaceSvg=!1,config$1.observeMutations=!1,callHooks("noAuto")},dom={i2svg:function dt(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return IS_DOM?(callHooks("beforeI2svg",$),callProvided("pseudoElements2svg",$),callProvided("i2svg",$)):Promise.reject("Operation requires a DOM of some kind.")},watch:function dt(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},lt=$.autoReplaceSvgRoot;config$1.autoReplaceSvg===!1&&(config$1.autoReplaceSvg=!0),config$1.observeMutations=!0,domready(function(){autoReplace({autoReplaceSvgRoot:lt}),callHooks("watch",$)})}},parse$1={icon:function dt($){if($===null)return null;if(_typeof$2($)==="object"&&$.prefix&&$.iconName)return{prefix:$.prefix,iconName:byAlias($.prefix,$.iconName)||$.iconName};if(Array.isArray($)&&$.length===2){var lt=$[1].indexOf("fa-")===0?$[1].slice(3):$[1],ft=getCanonicalPrefix($[0]);return{prefix:ft,iconName:byAlias(ft,lt)||lt}}if(typeof $=="string"&&($.indexOf("".concat(config$1.cssPrefix,"-"))>-1||$.match(ICON_SELECTION_SYNTAX_PATTERN))){var St=getCanonicalIcon($.split(" "),{skipLookups:!0});return{prefix:St.prefix||getDefaultUsablePrefix(),iconName:byAlias(St.prefix,St.iconName)||St.iconName}}if(typeof $=="string"){var Tt=getDefaultUsablePrefix();return{prefix:Tt,iconName:byAlias(Tt,$)||$}}}},api={noAuto,config:config$1,dom,parse:parse$1,library,findIconDefinition,toHtml},autoReplace=function dt(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},lt=$.autoReplaceSvgRoot,ft=lt===void 0?DOCUMENT:lt;(Object.keys(namespace.styles).length>0||config$1.autoFetchSvg)&&IS_DOM&&config$1.autoReplaceSvg&&api.dom.i2svg({node:ft})};function domVariants(dt,$){return Object.defineProperty(dt,"abstract",{get:$}),Object.defineProperty(dt,"html",{get:function(){return dt.abstract.map(function(ft){return toHtml(ft)})}}),Object.defineProperty(dt,"node",{get:function(){if(IS_DOM){var ft=DOCUMENT.createElement("div");return ft.innerHTML=dt.html,ft.children}}}),dt}function asIcon(dt){var $=dt.children,lt=dt.main,ft=dt.mask,St=dt.attributes,Tt=dt.styles,Ct=dt.transform;if(transformIsMeaningful(Ct)&&lt.found&&!ft.found){var At=lt.width,Rt=lt.height,kt={x:At/Rt/2,y:.5};St.style=joinStyles(_objectSpread2$2(_objectSpread2$2({},Tt),{},{"transform-origin":"".concat(kt.x+Ct.x/16,"em ").concat(kt.y+Ct.y/16,"em")}))}return[{tag:"svg",attributes:St,children:$}]}function asSymbol(dt){var $=dt.prefix,lt=dt.iconName,ft=dt.children,St=dt.attributes,Tt=dt.symbol,Ct=Tt===!0?"".concat($,"-").concat(config$1.cssPrefix,"-").concat(lt):Tt;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:_objectSpread2$2(_objectSpread2$2({},St),{},{id:Ct}),children:ft}]}]}function makeInlineSvgAbstract(dt){var $=dt.icons,lt=$.main,ft=$.mask,St=dt.prefix,Tt=dt.iconName,Ct=dt.transform,At=dt.symbol,Rt=dt.title,kt=dt.maskId,Nt=dt.titleId,Bt=dt.extra,Ut=dt.watchable,zt=Ut===void 0?!1:Ut,Zt=ft.found?ft:lt,ln=Zt.width,cn=Zt.height,hn=St==="fak",pn=[config$1.replacementClass,Tt?"".concat(config$1.cssPrefix,"-").concat(Tt):""].filter(function(xn){return Bt.classes.indexOf(xn)===-1}).filter(function(xn){return xn!==""||!!xn}).concat(Bt.classes).join(" "),dn={children:[],attributes:_objectSpread2$2(_objectSpread2$2({},Bt.attributes),{},{"data-prefix":St,"data-icon":Tt,class:pn,role:Bt.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(ln," ").concat(cn)})},gn=hn&&!~Bt.classes.indexOf("fa-fw")?{width:"".concat(ln/cn*16*.0625,"em")}:{};zt&&(dn.attributes[DATA_FA_I2SVG]=""),Rt&&(dn.children.push({tag:"title",attributes:{id:dn.attributes["aria-labelledby"]||"title-".concat(Nt||nextUniqueId())},children:[Rt]}),delete dn.attributes.title);var vn=_objectSpread2$2(_objectSpread2$2({},dn),{},{prefix:St,iconName:Tt,main:lt,mask:ft,maskId:kt,transform:Ct,symbol:At,styles:_objectSpread2$2(_objectSpread2$2({},gn),Bt.styles)}),Tn=ft.found&&lt.found?callProvided("generateAbstractMask",vn)||{children:[],attributes:{}}:callProvided("generateAbstractIcon",vn)||{children:[],attributes:{}},Cn=Tn.children,$n=Tn.attributes;return vn.children=Cn,vn.attributes=$n,At?asSymbol(vn):asIcon(vn)}function makeLayersTextAbstract(dt){var $=dt.content,lt=dt.width,ft=dt.height,St=dt.transform,Tt=dt.title,Ct=dt.extra,At=dt.watchable,Rt=At===void 0?!1:At,kt=_objectSpread2$2(_objectSpread2$2(_objectSpread2$2({},Ct.attributes),Tt?{title:Tt}:{}),{},{class:Ct.classes.join(" ")});Rt&&(kt[DATA_FA_I2SVG]="");var Nt=_objectSpread2$2({},Ct.styles);transformIsMeaningful(St)&&(Nt.transform=transformForCss({transform:St,startCentered:!0,width:lt,height:ft}),Nt["-webkit-transform"]=Nt.transform);var Bt=joinStyles(Nt);Bt.length>0&&(kt.style=Bt);var Ut=[];return Ut.push({tag:"span",attributes:kt,children:[$]}),Tt&&Ut.push({tag:"span",attributes:{class:"sr-only"},children:[Tt]}),Ut}function makeLayersCounterAbstract(dt){var $=dt.content,lt=dt.title,ft=dt.extra,St=_objectSpread2$2(_objectSpread2$2(_objectSpread2$2({},ft.attributes),lt?{title:lt}:{}),{},{class:ft.classes.join(" ")}),Tt=joinStyles(ft.styles);Tt.length>0&&(St.style=Tt);var Ct=[];return Ct.push({tag:"span",attributes:St,children:[$]}),lt&&Ct.push({tag:"span",attributes:{class:"sr-only"},children:[lt]}),Ct}var styles$1=namespace.styles;function asFoundIcon(dt){var $=dt[0],lt=dt[1],ft=dt.slice(4),St=_slicedToArray$2(ft,1),Tt=St[0],Ct=null;return Array.isArray(Tt)?Ct={tag:"g",attributes:{class:"".concat(config$1.cssPrefix,"-").concat(DUOTONE_CLASSES.GROUP)},children:[{tag:"path",attributes:{class:"".concat(config$1.cssPrefix,"-").concat(DUOTONE_CLASSES.SECONDARY),fill:"currentColor",d:Tt[0]}},{tag:"path",attributes:{class:"".concat(config$1.cssPrefix,"-").concat(DUOTONE_CLASSES.PRIMARY),fill:"currentColor",d:Tt[1]}}]}:Ct={tag:"path",attributes:{fill:"currentColor",d:Tt}},{found:!0,width:$,height:lt,icon:Ct}}var missingIconResolutionMixin={found:!1,width:512,height:512};function maybeNotifyMissing(dt,$){!PRODUCTION$1&&!config$1.showMissingIcons&&dt&&console.error('Icon with name "'.concat(dt,'" and prefix "').concat($,'" is missing.'))}function findIcon(dt,$){var lt=$;return $==="fa"&&config$1.styleDefault!==null&&($=getDefaultUsablePrefix()),new Promise(function(ft,St){if(callProvided("missingIconAbstract"),lt==="fa"){var Tt=byOldName(dt)||{};dt=Tt.iconName||dt,$=Tt.prefix||$}if(dt&&$&&styles$1[$]&&styles$1[$][dt]){var Ct=styles$1[$][dt];return ft(asFoundIcon(Ct))}maybeNotifyMissing(dt,$),ft(_objectSpread2$2(_objectSpread2$2({},missingIconResolutionMixin),{},{icon:config$1.showMissingIcons&&dt?callProvided("missingIconAbstract")||{}:{}}))})}var noop$1$1=function dt(){},p$4=config$1.measurePerformance&&PERFORMANCE&&PERFORMANCE.mark&&PERFORMANCE.measure?PERFORMANCE:{mark:noop$1$1,measure:noop$1$1},preamble='FA "6.3.0"',begin=function dt($){return p$4.mark("".concat(preamble," ").concat($," begins")),function(){return end($)}},end=function dt($){p$4.mark("".concat(preamble," ").concat($," ends")),p$4.measure("".concat(preamble," ").concat($),"".concat(preamble," ").concat($," begins"),"".concat(preamble," ").concat($," ends"))},perf={begin,end},noop$2$1=function dt(){};function isWatched(dt){var $=dt.getAttribute?dt.getAttribute(DATA_FA_I2SVG):null;return typeof $=="string"}function hasPrefixAndIcon(dt){var $=dt.getAttribute?dt.getAttribute(DATA_PREFIX):null,lt=dt.getAttribute?dt.getAttribute(DATA_ICON):null;return $&&lt}function hasBeenReplaced(dt){return dt&&dt.classList&&dt.classList.contains&&dt.classList.contains(config$1.replacementClass)}function getMutator(){if(config$1.autoReplaceSvg===!0)return mutators.replace;var dt=mutators[config$1.autoReplaceSvg];return dt||mutators.replace}function createElementNS(dt){return DOCUMENT.createElementNS("http://www.w3.org/2000/svg",dt)}function createElement(dt){return DOCUMENT.createElement(dt)}function convertSVG(dt){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},lt=$.ceFn,ft=lt===void 0?dt.tag==="svg"?createElementNS:createElement:lt;if(typeof dt=="string")return DOCUMENT.createTextNode(dt);var St=ft(dt.tag);Object.keys(dt.attributes||[]).forEach(function(Ct){St.setAttribute(Ct,dt.attributes[Ct])});var Tt=dt.children||[];return Tt.forEach(function(Ct){St.appendChild(convertSVG(Ct,{ceFn:ft}))}),St}function nodeAsComment(dt){var $=" ".concat(dt.outerHTML," ");return $="".concat($,"Font Awesome fontawesome.com "),$}var mutators={replace:function dt($){var lt=$[0];if(lt.parentNode)if($[1].forEach(function(St){lt.parentNode.insertBefore(convertSVG(St),lt)}),lt.getAttribute(DATA_FA_I2SVG)===null&&config$1.keepOriginalSource){var ft=DOCUMENT.createComment(nodeAsComment(lt));lt.parentNode.replaceChild(ft,lt)}else lt.remove()},nest:function dt($){var lt=$[0],ft=$[1];if(~classArray(lt).indexOf(config$1.replacementClass))return mutators.replace($);var St=new RegExp("".concat(config$1.cssPrefix,"-.*"));if(delete ft[0].attributes.id,ft[0].attributes.class){var Tt=ft[0].attributes.class.split(" ").reduce(function(At,Rt){return Rt===config$1.replacementClass||Rt.match(St)?At.toSvg.push(Rt):At.toNode.push(Rt),At},{toNode:[],toSvg:[]});ft[0].attributes.class=Tt.toSvg.join(" "),Tt.toNode.length===0?lt.removeAttribute("class"):lt.setAttribute("class",Tt.toNode.join(" "))}var Ct=ft.map(function(At){return toHtml(At)}).join(`
`);lt.setAttribute(DATA_FA_I2SVG,""),lt.innerHTML=Ct}};function performOperationSync(dt){dt()}function perform(dt,$){var lt=typeof $=="function"?$:noop$2$1;if(dt.length===0)lt();else{var ft=performOperationSync;config$1.mutateApproach===MUTATION_APPROACH_ASYNC&&(ft=WINDOW.requestAnimationFrame||performOperationSync),ft(function(){var St=getMutator(),Tt=perf.begin("mutate");dt.map(St),Tt(),lt()})}}var disabled=!1;function disableObservation(){disabled=!0}function enableObservation(){disabled=!1}var mo=null;function observe(dt){if(MUTATION_OBSERVER&&config$1.observeMutations){var $=dt.treeCallback,lt=$===void 0?noop$2$1:$,ft=dt.nodeCallback,St=ft===void 0?noop$2$1:ft,Tt=dt.pseudoElementsCallback,Ct=Tt===void 0?noop$2$1:Tt,At=dt.observeMutationsRoot,Rt=At===void 0?DOCUMENT:At;mo=new MUTATION_OBSERVER(function(kt){if(!disabled){var Nt=getDefaultUsablePrefix();toArray(kt).forEach(function(Bt){if(Bt.type==="childList"&&Bt.addedNodes.length>0&&!isWatched(Bt.addedNodes[0])&&(config$1.searchPseudoElements&&Ct(Bt.target),lt(Bt.target)),Bt.type==="attributes"&&Bt.target.parentNode&&config$1.searchPseudoElements&&Ct(Bt.target.parentNode),Bt.type==="attributes"&&isWatched(Bt.target)&&~ATTRIBUTES_WATCHED_FOR_MUTATION.indexOf(Bt.attributeName))if(Bt.attributeName==="class"&&hasPrefixAndIcon(Bt.target)){var Ut=getCanonicalIcon(classArray(Bt.target)),zt=Ut.prefix,Zt=Ut.iconName;Bt.target.setAttribute(DATA_PREFIX,zt||Nt),Zt&&Bt.target.setAttribute(DATA_ICON,Zt)}else hasBeenReplaced(Bt.target)&&St(Bt.target)})}}),IS_DOM&&mo.observe(Rt,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function disconnect(){mo&&mo.disconnect()}function styleParser(dt){var $=dt.getAttribute("style"),lt=[];return $&&(lt=$.split(";").reduce(function(ft,St){var Tt=St.split(":"),Ct=Tt[0],At=Tt.slice(1);return Ct&&At.length>0&&(ft[Ct]=At.join(":").trim()),ft},{})),lt}function classParser(dt){var $=dt.getAttribute("data-prefix"),lt=dt.getAttribute("data-icon"),ft=dt.innerText!==void 0?dt.innerText.trim():"",St=getCanonicalIcon(classArray(dt));return St.prefix||(St.prefix=getDefaultUsablePrefix()),$&&lt&&(St.prefix=$,St.iconName=lt),St.iconName&&St.prefix||(St.prefix&&ft.length>0&&(St.iconName=byLigature(St.prefix,dt.innerText)||byUnicode(St.prefix,toHex(dt.innerText))),!St.iconName&&config$1.autoFetchSvg&&dt.firstChild&&dt.firstChild.nodeType===Node.TEXT_NODE&&(St.iconName=dt.firstChild.data)),St}function attributesParser(dt){var $=toArray(dt.attributes).reduce(function(St,Tt){return St.name!=="class"&&St.name!=="style"&&(St[Tt.name]=Tt.value),St},{}),lt=dt.getAttribute("title"),ft=dt.getAttribute("data-fa-title-id");return config$1.autoA11y&&(lt?$["aria-labelledby"]="".concat(config$1.replacementClass,"-title-").concat(ft||nextUniqueId()):($["aria-hidden"]="true",$.focusable="false")),$}function blankMeta(){return{iconName:null,title:null,titleId:null,prefix:null,transform:meaninglessTransform,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function parseMeta(dt){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},lt=classParser(dt),ft=lt.iconName,St=lt.prefix,Tt=lt.rest,Ct=attributesParser(dt),At=chainHooks("parseNodeAttributes",{},dt),Rt=$.styleParser?styleParser(dt):[];return _objectSpread2$2({iconName:ft,title:dt.getAttribute("title"),titleId:dt.getAttribute("data-fa-title-id"),prefix:St,transform:meaninglessTransform,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:Tt,styles:Rt,attributes:Ct}},At)}var styles$2=namespace.styles;function generateMutation(dt){var $=config$1.autoReplaceSvg==="nest"?parseMeta(dt,{styleParser:!1}):parseMeta(dt);return~$.extra.classes.indexOf(LAYERS_TEXT_CLASSNAME)?callProvided("generateLayersText",dt,$):callProvided("generateSvgReplacementMutation",dt,$)}var knownPrefixes=new Set;FAMILIES.map(function(dt){knownPrefixes.add("fa-".concat(dt))});Object.keys(PREFIX_TO_STYLE[FAMILY_CLASSIC]).map(knownPrefixes.add.bind(knownPrefixes));Object.keys(PREFIX_TO_STYLE[FAMILY_SHARP]).map(knownPrefixes.add.bind(knownPrefixes));knownPrefixes=_toConsumableArray$3(knownPrefixes);function onTree(dt){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!IS_DOM)return Promise.resolve();var lt=DOCUMENT.documentElement.classList,ft=function(Bt){return lt.add("".concat(HTML_CLASS_I2SVG_BASE_CLASS,"-").concat(Bt))},St=function(Bt){return lt.remove("".concat(HTML_CLASS_I2SVG_BASE_CLASS,"-").concat(Bt))},Tt=config$1.autoFetchSvg?knownPrefixes:FAMILIES.map(function(Nt){return"fa-".concat(Nt)}).concat(Object.keys(styles$2));Tt.includes("fa")||Tt.push("fa");var Ct=[".".concat(LAYERS_TEXT_CLASSNAME,":not([").concat(DATA_FA_I2SVG,"])")].concat(Tt.map(function(Nt){return".".concat(Nt,":not([").concat(DATA_FA_I2SVG,"])")})).join(", ");if(Ct.length===0)return Promise.resolve();var At=[];try{At=toArray(dt.querySelectorAll(Ct))}catch{}if(At.length>0)ft("pending"),St("complete");else return Promise.resolve();var Rt=perf.begin("onTree"),kt=At.reduce(function(Nt,Bt){try{var Ut=generateMutation(Bt);Ut&&Nt.push(Ut)}catch(zt){PRODUCTION$1||zt.name==="MissingIcon"&&console.error(zt)}return Nt},[]);return new Promise(function(Nt,Bt){Promise.all(kt).then(function(Ut){perform(Ut,function(){ft("active"),ft("complete"),St("pending"),typeof $=="function"&&$(),Rt(),Nt()})}).catch(function(Ut){Rt(),Bt(Ut)})})}function onNode(dt){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;generateMutation(dt).then(function(lt){lt&&perform([lt],$)})}function resolveIcons(dt){return function($){var lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ft=($||{}).icon?$:findIconDefinition($||{}),St=lt.mask;return St&&(St=(St||{}).icon?St:findIconDefinition(St||{})),dt(ft,_objectSpread2$2(_objectSpread2$2({},lt),{},{mask:St}))}}var render=function dt($){var lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ft=lt.transform,St=ft===void 0?meaninglessTransform:ft,Tt=lt.symbol,Ct=Tt===void 0?!1:Tt,At=lt.mask,Rt=At===void 0?null:At,kt=lt.maskId,Nt=kt===void 0?null:kt,Bt=lt.title,Ut=Bt===void 0?null:Bt,zt=lt.titleId,Zt=zt===void 0?null:zt,ln=lt.classes,cn=ln===void 0?[]:ln,hn=lt.attributes,pn=hn===void 0?{}:hn,dn=lt.styles,gn=dn===void 0?{}:dn;if($){var vn=$.prefix,Tn=$.iconName,Cn=$.icon;return domVariants(_objectSpread2$2({type:"icon"},$),function(){return callHooks("beforeDOMElementCreation",{iconDefinition:$,params:lt}),config$1.autoA11y&&(Ut?pn["aria-labelledby"]="".concat(config$1.replacementClass,"-title-").concat(Zt||nextUniqueId()):(pn["aria-hidden"]="true",pn.focusable="false")),makeInlineSvgAbstract({icons:{main:asFoundIcon(Cn),mask:Rt?asFoundIcon(Rt.icon):{found:!1,width:null,height:null,icon:{}}},prefix:vn,iconName:Tn,transform:_objectSpread2$2(_objectSpread2$2({},meaninglessTransform),St),symbol:Ct,title:Ut,maskId:Nt,titleId:Zt,extra:{attributes:pn,styles:gn,classes:cn}})})}},ReplaceElements={mixout:function dt(){return{icon:resolveIcons(render)}},hooks:function dt(){return{mutationObserverCallbacks:function(lt){return lt.treeCallback=onTree,lt.nodeCallback=onNode,lt}}},provides:function dt($){$.i2svg=function(lt){var ft=lt.node,St=ft===void 0?DOCUMENT:ft,Tt=lt.callback,Ct=Tt===void 0?function(){}:Tt;return onTree(St,Ct)},$.generateSvgReplacementMutation=function(lt,ft){var St=ft.iconName,Tt=ft.title,Ct=ft.titleId,At=ft.prefix,Rt=ft.transform,kt=ft.symbol,Nt=ft.mask,Bt=ft.maskId,Ut=ft.extra;return new Promise(function(zt,Zt){Promise.all([findIcon(St,At),Nt.iconName?findIcon(Nt.iconName,Nt.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(ln){var cn=_slicedToArray$2(ln,2),hn=cn[0],pn=cn[1];zt([lt,makeInlineSvgAbstract({icons:{main:hn,mask:pn},prefix:At,iconName:St,transform:Rt,symbol:kt,maskId:Bt,title:Tt,titleId:Ct,extra:Ut,watchable:!0})])}).catch(Zt)})},$.generateAbstractIcon=function(lt){var ft=lt.children,St=lt.attributes,Tt=lt.main,Ct=lt.transform,At=lt.styles,Rt=joinStyles(At);Rt.length>0&&(St.style=Rt);var kt;return transformIsMeaningful(Ct)&&(kt=callProvided("generateAbstractTransformGrouping",{main:Tt,transform:Ct,containerWidth:Tt.width,iconWidth:Tt.width})),ft.push(kt||Tt.icon),{children:ft,attributes:St}}}},Layers={mixout:function dt(){return{layer:function(lt){var ft=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},St=ft.classes,Tt=St===void 0?[]:St;return domVariants({type:"layer"},function(){callHooks("beforeDOMElementCreation",{assembler:lt,params:ft});var Ct=[];return lt(function(At){Array.isArray(At)?At.map(function(Rt){Ct=Ct.concat(Rt.abstract)}):Ct=Ct.concat(At.abstract)}),[{tag:"span",attributes:{class:["".concat(config$1.cssPrefix,"-layers")].concat(_toConsumableArray$3(Tt)).join(" ")},children:Ct}]})}}}},LayersCounter={mixout:function dt(){return{counter:function(lt){var ft=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},St=ft.title,Tt=St===void 0?null:St,Ct=ft.classes,At=Ct===void 0?[]:Ct,Rt=ft.attributes,kt=Rt===void 0?{}:Rt,Nt=ft.styles,Bt=Nt===void 0?{}:Nt;return domVariants({type:"counter",content:lt},function(){return callHooks("beforeDOMElementCreation",{content:lt,params:ft}),makeLayersCounterAbstract({content:lt.toString(),title:Tt,extra:{attributes:kt,styles:Bt,classes:["".concat(config$1.cssPrefix,"-layers-counter")].concat(_toConsumableArray$3(At))}})})}}}},LayersText={mixout:function dt(){return{text:function(lt){var ft=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},St=ft.transform,Tt=St===void 0?meaninglessTransform:St,Ct=ft.title,At=Ct===void 0?null:Ct,Rt=ft.classes,kt=Rt===void 0?[]:Rt,Nt=ft.attributes,Bt=Nt===void 0?{}:Nt,Ut=ft.styles,zt=Ut===void 0?{}:Ut;return domVariants({type:"text",content:lt},function(){return callHooks("beforeDOMElementCreation",{content:lt,params:ft}),makeLayersTextAbstract({content:lt,transform:_objectSpread2$2(_objectSpread2$2({},meaninglessTransform),Tt),title:At,extra:{attributes:Bt,styles:zt,classes:["".concat(config$1.cssPrefix,"-layers-text")].concat(_toConsumableArray$3(kt))}})})}}},provides:function dt($){$.generateLayersText=function(lt,ft){var St=ft.title,Tt=ft.transform,Ct=ft.extra,At=null,Rt=null;if(IS_IE){var kt=parseInt(getComputedStyle(lt).fontSize,10),Nt=lt.getBoundingClientRect();At=Nt.width/kt,Rt=Nt.height/kt}return config$1.autoA11y&&!St&&(Ct.attributes["aria-hidden"]="true"),Promise.resolve([lt,makeLayersTextAbstract({content:lt.innerHTML,width:At,height:Rt,transform:Tt,title:St,extra:Ct,watchable:!0})])}}},CLEAN_CONTENT_PATTERN=new RegExp('"',"ug"),SECONDARY_UNICODE_RANGE=[1105920,1112319];function hexValueFromContent(dt){var $=dt.replace(CLEAN_CONTENT_PATTERN,""),lt=codePointAt$1($,0),ft=lt>=SECONDARY_UNICODE_RANGE[0]&&lt<=SECONDARY_UNICODE_RANGE[1],St=$.length===2?$[0]===$[1]:!1;return{value:toHex(St?$[0]:$),isSecondary:ft||St}}function replaceForPosition(dt,$){var lt="".concat(DATA_FA_PSEUDO_ELEMENT_PENDING).concat($.replace(":","-"));return new Promise(function(ft,St){if(dt.getAttribute(lt)!==null)return ft();var Tt=toArray(dt.children),Ct=Tt.filter(function(Cn){return Cn.getAttribute(DATA_FA_PSEUDO_ELEMENT)===$})[0],At=WINDOW.getComputedStyle(dt,$),Rt=At.getPropertyValue("font-family").match(FONT_FAMILY_PATTERN),kt=At.getPropertyValue("font-weight"),Nt=At.getPropertyValue("content");if(Ct&&!Rt)return dt.removeChild(Ct),ft();if(Rt&&Nt!=="none"&&Nt!==""){var Bt=At.getPropertyValue("content"),Ut=~["Sharp"].indexOf(Rt[2])?FAMILY_SHARP:FAMILY_CLASSIC,zt=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(Rt[2])?STYLE_TO_PREFIX[Ut][Rt[2].toLowerCase()]:FONT_WEIGHT_TO_PREFIX[Ut][kt],Zt=hexValueFromContent(Bt),ln=Zt.value,cn=Zt.isSecondary,hn=Rt[0].startsWith("FontAwesome"),pn=byUnicode(zt,ln),dn=pn;if(hn){var gn=byOldUnicode(ln);gn.iconName&&gn.prefix&&(pn=gn.iconName,zt=gn.prefix)}if(pn&&!cn&&(!Ct||Ct.getAttribute(DATA_PREFIX)!==zt||Ct.getAttribute(DATA_ICON)!==dn)){dt.setAttribute(lt,dn),Ct&&dt.removeChild(Ct);var vn=blankMeta(),Tn=vn.extra;Tn.attributes[DATA_FA_PSEUDO_ELEMENT]=$,findIcon(pn,zt).then(function(Cn){var $n=makeInlineSvgAbstract(_objectSpread2$2(_objectSpread2$2({},vn),{},{icons:{main:Cn,mask:emptyCanonicalIcon()},prefix:zt,iconName:dn,extra:Tn,watchable:!0})),xn=DOCUMENT.createElement("svg");$==="::before"?dt.insertBefore(xn,dt.firstChild):dt.appendChild(xn),xn.outerHTML=$n.map(function(Rn){return toHtml(Rn)}).join(`
`),dt.removeAttribute(lt),ft()}).catch(St)}else ft()}else ft()})}function replace(dt){return Promise.all([replaceForPosition(dt,"::before"),replaceForPosition(dt,"::after")])}function processable(dt){return dt.parentNode!==document.head&&!~TAGNAMES_TO_SKIP_FOR_PSEUDOELEMENTS.indexOf(dt.tagName.toUpperCase())&&!dt.getAttribute(DATA_FA_PSEUDO_ELEMENT)&&(!dt.parentNode||dt.parentNode.tagName!=="svg")}function searchPseudoElements(dt){if(IS_DOM)return new Promise(function($,lt){var ft=toArray(dt.querySelectorAll("*")).filter(processable).map(replace),St=perf.begin("searchPseudoElements");disableObservation(),Promise.all(ft).then(function(){St(),enableObservation(),$()}).catch(function(){St(),enableObservation(),lt()})})}var PseudoElements={hooks:function dt(){return{mutationObserverCallbacks:function(lt){return lt.pseudoElementsCallback=searchPseudoElements,lt}}},provides:function dt($){$.pseudoElements2svg=function(lt){var ft=lt.node,St=ft===void 0?DOCUMENT:ft;config$1.searchPseudoElements&&searchPseudoElements(St)}}},_unwatched=!1,MutationObserver$1={mixout:function dt(){return{dom:{unwatch:function(){disableObservation(),_unwatched=!0}}}},hooks:function dt(){return{bootstrap:function(){observe(chainHooks("mutationObserverCallbacks",{}))},noAuto:function(){disconnect()},watch:function(lt){var ft=lt.observeMutationsRoot;_unwatched?enableObservation():observe(chainHooks("mutationObserverCallbacks",{observeMutationsRoot:ft}))}}}},parseTransformString=function dt($){var lt={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return $.toLowerCase().split(" ").reduce(function(ft,St){var Tt=St.toLowerCase().split("-"),Ct=Tt[0],At=Tt.slice(1).join("-");if(Ct&&At==="h")return ft.flipX=!0,ft;if(Ct&&At==="v")return ft.flipY=!0,ft;if(At=parseFloat(At),isNaN(At))return ft;switch(Ct){case"grow":ft.size=ft.size+At;break;case"shrink":ft.size=ft.size-At;break;case"left":ft.x=ft.x-At;break;case"right":ft.x=ft.x+At;break;case"up":ft.y=ft.y-At;break;case"down":ft.y=ft.y+At;break;case"rotate":ft.rotate=ft.rotate+At;break}return ft},lt)},PowerTransforms={mixout:function dt(){return{parse:{transform:function(lt){return parseTransformString(lt)}}}},hooks:function dt(){return{parseNodeAttributes:function(lt,ft){var St=ft.getAttribute("data-fa-transform");return St&&(lt.transform=parseTransformString(St)),lt}}},provides:function dt($){$.generateAbstractTransformGrouping=function(lt){var ft=lt.main,St=lt.transform,Tt=lt.containerWidth,Ct=lt.iconWidth,At={transform:"translate(".concat(Tt/2," 256)")},Rt="translate(".concat(St.x*32,", ").concat(St.y*32,") "),kt="scale(".concat(St.size/16*(St.flipX?-1:1),", ").concat(St.size/16*(St.flipY?-1:1),") "),Nt="rotate(".concat(St.rotate," 0 0)"),Bt={transform:"".concat(Rt," ").concat(kt," ").concat(Nt)},Ut={transform:"translate(".concat(Ct/2*-1," -256)")},zt={outer:At,inner:Bt,path:Ut};return{tag:"g",attributes:_objectSpread2$2({},zt.outer),children:[{tag:"g",attributes:_objectSpread2$2({},zt.inner),children:[{tag:ft.icon.tag,children:ft.icon.children,attributes:_objectSpread2$2(_objectSpread2$2({},ft.icon.attributes),zt.path)}]}]}}}},ALL_SPACE={x:0,y:0,width:"100%",height:"100%"};function fillBlack(dt){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return dt.attributes&&(dt.attributes.fill||$)&&(dt.attributes.fill="black"),dt}function deGroup(dt){return dt.tag==="g"?dt.children:[dt]}var Masks={hooks:function dt(){return{parseNodeAttributes:function(lt,ft){var St=ft.getAttribute("data-fa-mask"),Tt=St?getCanonicalIcon(St.split(" ").map(function(Ct){return Ct.trim()})):emptyCanonicalIcon();return Tt.prefix||(Tt.prefix=getDefaultUsablePrefix()),lt.mask=Tt,lt.maskId=ft.getAttribute("data-fa-mask-id"),lt}}},provides:function dt($){$.generateAbstractMask=function(lt){var ft=lt.children,St=lt.attributes,Tt=lt.main,Ct=lt.mask,At=lt.maskId,Rt=lt.transform,kt=Tt.width,Nt=Tt.icon,Bt=Ct.width,Ut=Ct.icon,zt=transformForSvg({transform:Rt,containerWidth:Bt,iconWidth:kt}),Zt={tag:"rect",attributes:_objectSpread2$2(_objectSpread2$2({},ALL_SPACE),{},{fill:"white"})},ln=Nt.children?{children:Nt.children.map(fillBlack)}:{},cn={tag:"g",attributes:_objectSpread2$2({},zt.inner),children:[fillBlack(_objectSpread2$2({tag:Nt.tag,attributes:_objectSpread2$2(_objectSpread2$2({},Nt.attributes),zt.path)},ln))]},hn={tag:"g",attributes:_objectSpread2$2({},zt.outer),children:[cn]},pn="mask-".concat(At||nextUniqueId()),dn="clip-".concat(At||nextUniqueId()),gn={tag:"mask",attributes:_objectSpread2$2(_objectSpread2$2({},ALL_SPACE),{},{id:pn,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[Zt,hn]},vn={tag:"defs",children:[{tag:"clipPath",attributes:{id:dn},children:deGroup(Ut)},gn]};return ft.push(vn,{tag:"rect",attributes:_objectSpread2$2({fill:"currentColor","clip-path":"url(#".concat(dn,")"),mask:"url(#".concat(pn,")")},ALL_SPACE)}),{children:ft,attributes:St}}}},MissingIconIndicator={provides:function dt($){var lt=!1;WINDOW.matchMedia&&(lt=WINDOW.matchMedia("(prefers-reduced-motion: reduce)").matches),$.missingIconAbstract=function(){var ft=[],St={fill:"currentColor"},Tt={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};ft.push({tag:"path",attributes:_objectSpread2$2(_objectSpread2$2({},St),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var Ct=_objectSpread2$2(_objectSpread2$2({},Tt),{},{attributeName:"opacity"}),At={tag:"circle",attributes:_objectSpread2$2(_objectSpread2$2({},St),{},{cx:"256",cy:"364",r:"28"}),children:[]};return lt||At.children.push({tag:"animate",attributes:_objectSpread2$2(_objectSpread2$2({},Tt),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:_objectSpread2$2(_objectSpread2$2({},Ct),{},{values:"1;0;1;1;0;1;"})}),ft.push(At),ft.push({tag:"path",attributes:_objectSpread2$2(_objectSpread2$2({},St),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:lt?[]:[{tag:"animate",attributes:_objectSpread2$2(_objectSpread2$2({},Ct),{},{values:"1;0;0;0;0;1;"})}]}),lt||ft.push({tag:"path",attributes:_objectSpread2$2(_objectSpread2$2({},St),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:_objectSpread2$2(_objectSpread2$2({},Ct),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:ft}}}},SvgSymbols={hooks:function dt(){return{parseNodeAttributes:function(lt,ft){var St=ft.getAttribute("data-fa-symbol"),Tt=St===null?!1:St===""?!0:St;return lt.symbol=Tt,lt}}}},plugins=[InjectCSS,ReplaceElements,Layers,LayersCounter,LayersText,PseudoElements,MutationObserver$1,PowerTransforms,Masks,MissingIconIndicator,SvgSymbols];registerPlugins(plugins,{mixoutsTo:api});api.noAuto;api.config;api.library;api.dom;var parse$1$1=api.parse;api.findIconDefinition;api.toHtml;var icon=api.icon;api.layer;api.text;api.counter;function ownKeys$3(dt,$){var lt=Object.keys(dt);if(Object.getOwnPropertySymbols){var ft=Object.getOwnPropertySymbols(dt);$&&(ft=ft.filter(function(St){return Object.getOwnPropertyDescriptor(dt,St).enumerable})),lt.push.apply(lt,ft)}return lt}function _objectSpread2$1(dt){for(var $=1;$<arguments.length;$++){var lt=arguments[$]!=null?arguments[$]:{};$%2?ownKeys$3(Object(lt),!0).forEach(function(ft){_defineProperty$4(dt,ft,lt[ft])}):Object.getOwnPropertyDescriptors?Object.defineProperties(dt,Object.getOwnPropertyDescriptors(lt)):ownKeys$3(Object(lt)).forEach(function(ft){Object.defineProperty(dt,ft,Object.getOwnPropertyDescriptor(lt,ft))})}return dt}function _typeof$1(dt){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$1(dt)}function _defineProperty$4(dt,$,lt){return $ in dt?Object.defineProperty(dt,$,{value:lt,enumerable:!0,configurable:!0,writable:!0}):dt[$]=lt,dt}function _objectWithoutPropertiesLoose$3(dt,$){if(dt==null)return{};var lt={},ft=Object.keys(dt),St,Tt;for(Tt=0;Tt<ft.length;Tt++)St=ft[Tt],!($.indexOf(St)>=0)&&(lt[St]=dt[St]);return lt}function _objectWithoutProperties$2(dt,$){if(dt==null)return{};var lt=_objectWithoutPropertiesLoose$3(dt,$),ft,St;if(Object.getOwnPropertySymbols){var Tt=Object.getOwnPropertySymbols(dt);for(St=0;St<Tt.length;St++)ft=Tt[St],!($.indexOf(ft)>=0)&&Object.prototype.propertyIsEnumerable.call(dt,ft)&&(lt[ft]=dt[ft])}return lt}function _toConsumableArray$2(dt){return _arrayWithoutHoles$2(dt)||_iterableToArray$2(dt)||_unsupportedIterableToArray$2(dt)||_nonIterableSpread$2()}function _arrayWithoutHoles$2(dt){if(Array.isArray(dt))return _arrayLikeToArray$2(dt)}function _iterableToArray$2(dt){if(typeof Symbol<"u"&&dt[Symbol.iterator]!=null||dt["@@iterator"]!=null)return Array.from(dt)}function _unsupportedIterableToArray$2(dt,$){if(dt){if(typeof dt=="string")return _arrayLikeToArray$2(dt,$);var lt=Object.prototype.toString.call(dt).slice(8,-1);if(lt==="Object"&&dt.constructor&&(lt=dt.constructor.name),lt==="Map"||lt==="Set")return Array.from(dt);if(lt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(lt))return _arrayLikeToArray$2(dt,$)}}function _arrayLikeToArray$2(dt,$){($==null||$>dt.length)&&($=dt.length);for(var lt=0,ft=new Array($);lt<$;lt++)ft[lt]=dt[lt];return ft}function _nonIterableSpread$2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function classList(dt){var $,lt=dt.beat,ft=dt.fade,St=dt.beatFade,Tt=dt.bounce,Ct=dt.shake,At=dt.flash,Rt=dt.spin,kt=dt.spinPulse,Nt=dt.spinReverse,Bt=dt.pulse,Ut=dt.fixedWidth,zt=dt.inverse,Zt=dt.border,ln=dt.listItem,cn=dt.flip,hn=dt.size,pn=dt.rotation,dn=dt.pull,gn=($={"fa-beat":lt,"fa-fade":ft,"fa-beat-fade":St,"fa-bounce":Tt,"fa-shake":Ct,"fa-flash":At,"fa-spin":Rt,"fa-spin-reverse":Nt,"fa-spin-pulse":kt,"fa-pulse":Bt,"fa-fw":Ut,"fa-inverse":zt,"fa-border":Zt,"fa-li":ln,"fa-flip":cn===!0,"fa-flip-horizontal":cn==="horizontal"||cn==="both","fa-flip-vertical":cn==="vertical"||cn==="both"},_defineProperty$4($,"fa-".concat(hn),typeof hn<"u"&&hn!==null),_defineProperty$4($,"fa-rotate-".concat(pn),typeof pn<"u"&&pn!==null&&pn!==0),_defineProperty$4($,"fa-pull-".concat(dn),typeof dn<"u"&&dn!==null),_defineProperty$4($,"fa-swap-opacity",dt.swapOpacity),$);return Object.keys(gn).map(function(vn){return gn[vn]?vn:null}).filter(function(vn){return vn})}function _isNumerical(dt){return dt=dt-0,dt===dt}function camelize(dt){return _isNumerical(dt)?dt:(dt=dt.replace(/[\-_\s]+(.)?/g,function($,lt){return lt?lt.toUpperCase():""}),dt.substr(0,1).toLowerCase()+dt.substr(1))}var _excluded$3=["style"];function capitalize$1(dt){return dt.charAt(0).toUpperCase()+dt.slice(1)}function styleToObject(dt){return dt.split(";").map(function($){return $.trim()}).filter(function($){return $}).reduce(function($,lt){var ft=lt.indexOf(":"),St=camelize(lt.slice(0,ft)),Tt=lt.slice(ft+1).trim();return St.startsWith("webkit")?$[capitalize$1(St)]=Tt:$[St]=Tt,$},{})}function convert(dt,$){var lt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof $=="string")return $;var ft=($.children||[]).map(function(Rt){return convert(dt,Rt)}),St=Object.keys($.attributes||{}).reduce(function(Rt,kt){var Nt=$.attributes[kt];switch(kt){case"class":Rt.attrs.className=Nt,delete $.attributes.class;break;case"style":Rt.attrs.style=styleToObject(Nt);break;default:kt.indexOf("aria-")===0||kt.indexOf("data-")===0?Rt.attrs[kt.toLowerCase()]=Nt:Rt.attrs[camelize(kt)]=Nt}return Rt},{attrs:{}}),Tt=lt.style,Ct=Tt===void 0?{}:Tt,At=_objectWithoutProperties$2(lt,_excluded$3);return St.attrs.style=_objectSpread2$1(_objectSpread2$1({},St.attrs.style),Ct),dt.apply(void 0,[$.tag,_objectSpread2$1(_objectSpread2$1({},St.attrs),At)].concat(_toConsumableArray$2(ft)))}var PRODUCTION=!1;try{PRODUCTION=!0}catch(dt){}function log(){if(!PRODUCTION&&console&&typeof console.error=="function"){var dt;(dt=console).error.apply(dt,arguments)}}function normalizeIconArgs(dt){if(dt&&_typeof$1(dt)==="object"&&dt.prefix&&dt.iconName&&dt.icon)return dt;if(parse$1$1.icon)return parse$1$1.icon(dt);if(dt===null)return null;if(dt&&_typeof$1(dt)==="object"&&dt.prefix&&dt.iconName)return dt;if(Array.isArray(dt)&&dt.length===2)return{prefix:dt[0],iconName:dt[1]};if(typeof dt=="string")return{prefix:"fas",iconName:dt}}function objectWithKey(dt,$){return Array.isArray($)&&$.length>0||!Array.isArray($)&&$?_defineProperty$4({},dt,$):{}}var FontAwesomeIcon=React.forwardRef(function(dt,$){var lt=dt.icon,ft=dt.mask,St=dt.symbol,Tt=dt.className,Ct=dt.title,At=dt.titleId,Rt=dt.maskId,kt=normalizeIconArgs(lt),Nt=objectWithKey("classes",[].concat(_toConsumableArray$2(classList(dt)),_toConsumableArray$2(Tt.split(" ")))),Bt=objectWithKey("transform",typeof dt.transform=="string"?parse$1$1.transform(dt.transform):dt.transform),Ut=objectWithKey("mask",normalizeIconArgs(ft)),zt=icon(kt,_objectSpread2$1(_objectSpread2$1(_objectSpread2$1(_objectSpread2$1({},Nt),Bt),Ut),{},{symbol:St,title:Ct,titleId:At,maskId:Rt}));if(!zt)return log("Could not find icon",kt),null;var Zt=zt.abstract,ln={ref:$};return Object.keys(dt).forEach(function(cn){FontAwesomeIcon.defaultProps.hasOwnProperty(cn)||(ln[cn]=dt[cn])}),convertCurry(Zt[0],ln)});FontAwesomeIcon.displayName="FontAwesomeIcon";FontAwesomeIcon.propTypes={beat:PropTypes.bool,border:PropTypes.bool,beatFade:PropTypes.bool,bounce:PropTypes.bool,className:PropTypes.string,fade:PropTypes.bool,flash:PropTypes.bool,mask:PropTypes.oneOfType([PropTypes.object,PropTypes.array,PropTypes.string]),maskId:PropTypes.string,fixedWidth:PropTypes.bool,inverse:PropTypes.bool,flip:PropTypes.oneOf([!0,!1,"horizontal","vertical","both"]),icon:PropTypes.oneOfType([PropTypes.object,PropTypes.array,PropTypes.string]),listItem:PropTypes.bool,pull:PropTypes.oneOf(["right","left"]),pulse:PropTypes.bool,rotation:PropTypes.oneOf([0,90,180,270]),shake:PropTypes.bool,size:PropTypes.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:PropTypes.bool,spinPulse:PropTypes.bool,spinReverse:PropTypes.bool,symbol:PropTypes.oneOfType([PropTypes.bool,PropTypes.string]),title:PropTypes.string,titleId:PropTypes.string,transform:PropTypes.oneOfType([PropTypes.string,PropTypes.object]),swapOpacity:PropTypes.bool};FontAwesomeIcon.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var convertCurry=convert.bind(null,React.createElement),classnames={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(dt){(function(){var $={}.hasOwnProperty;function lt(){for(var ft=[],St=0;St<arguments.length;St++){var Tt=arguments[St];if(Tt){var Ct=typeof Tt;if(Ct==="string"||Ct==="number")ft.push(Tt);else if(Array.isArray(Tt)){if(Tt.length){var At=lt.apply(null,Tt);At&&ft.push(At)}}else if(Ct==="object"){if(Tt.toString!==Object.prototype.toString&&!Tt.toString.toString().includes("[native code]")){ft.push(Tt.toString());continue}for(var Rt in Tt)$.call(Tt,Rt)&&Tt[Rt]&&ft.push(Rt)}}}return ft.join(" ")}dt.exports?(lt.default=lt,dt.exports=lt):window.classNames=lt})()})(classnames);var classnamesExports=classnames.exports;const classNames=getDefaultExportFromCjs(classnamesExports);var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React.createContext&&React.createContext(DefaultContext),__assign=globalThis&&globalThis.__assign||function(){return __assign=Object.assign||function(dt){for(var $,lt=1,ft=arguments.length;lt<ft;lt++){$=arguments[lt];for(var St in $)Object.prototype.hasOwnProperty.call($,St)&&(dt[St]=$[St])}return dt},__assign.apply(this,arguments)},__rest=globalThis&&globalThis.__rest||function(dt,$){var lt={};for(var ft in dt)Object.prototype.hasOwnProperty.call(dt,ft)&&$.indexOf(ft)<0&&(lt[ft]=dt[ft]);if(dt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var St=0,ft=Object.getOwnPropertySymbols(dt);St<ft.length;St++)$.indexOf(ft[St])<0&&Object.prototype.propertyIsEnumerable.call(dt,ft[St])&&(lt[ft[St]]=dt[ft[St]]);return lt};function Tree2Element(dt){return dt&&dt.map(function($,lt){return React.createElement($.tag,__assign({key:lt},$.attr),Tree2Element($.child))})}function GenIcon(dt){return function($){return React.createElement(IconBase,__assign({attr:__assign({},dt.attr)},$),Tree2Element(dt.child))}}function IconBase(dt){var $=function(lt){var ft=dt.attr,St=dt.size,Tt=dt.title,Ct=__rest(dt,["attr","size","title"]),At=St||lt.size||"1em",Rt;return lt.className&&(Rt=lt.className),dt.className&&(Rt=(Rt?Rt+" ":"")+dt.className),React.createElement("svg",__assign({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},lt.attr,ft,Ct,{className:Rt,style:__assign(__assign({color:dt.color||lt.color},lt.style),dt.style),height:At,width:At,xmlns:"http://www.w3.org/2000/svg"}),Tt&&React.createElement("title",null,Tt),dt.children)};return IconContext!==void 0?React.createElement(IconContext.Consumer,null,function(lt){return $(lt)}):$(DefaultContext)}function HiChevronDown(dt){return GenIcon({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"}}]})(dt)}function HiStar(dt){return GenIcon({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor"},child:[{tag:"path",attr:{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"}}]})(dt)}function HiX(dt){return GenIcon({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"}}]})(dt)}function HiOutlineChevronDown(dt){return GenIcon({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"}}]})(dt)}function HiOutlineChevronLeft(dt){return GenIcon({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"}}]})(dt)}function HiOutlineChevronRight(dt){return GenIcon({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"}}]})(dt)}function HiOutlineChevronUp(dt){return GenIcon({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 15l7-7 7 7"}}]})(dt)}function HiOutlineX(dt){return GenIcon({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"}}]})(dt)}function isObject$1(dt){return dt!==null&&typeof dt=="object"&&dt.constructor===Object}function cloneDeep(dt){if(!isObject$1(dt))return dt;const $={...dt};return Object.keys(dt).forEach(lt=>{$[lt]=cloneDeep(dt[lt])}),$}function mergeDeep(dt,$){if(isObject$1($)&&Object.keys($).length===0)return cloneDeep({...dt,...$});let lt={...dt,...$};return isObject$1($)&&isObject$1(dt)&&Object.keys($).forEach(ft=>{isObject$1($[ft])&&ft in dt&&isObject$1(dt[ft])?lt[ft]=mergeDeep(dt[ft],$[ft]):lt[ft]=isObject$1($[ft])?cloneDeep($[ft]):$[ft]}),lt}const theme$1={accordion:{root:{base:"divide-y divide-gray-200 border-gray-200 dark:divide-gray-700 dark:border-gray-700",flush:{off:"rounded-lg border",on:"border-b"}},content:{base:"py-5 px-5 last:rounded-b-lg dark:bg-gray-900 first:rounded-t-lg"},title:{arrow:{base:"h-6 w-6 shrink-0",open:{off:"",on:"rotate-180"}},base:"flex w-full items-center justify-between first:rounded-t-lg last:rounded-b-lg py-5 px-5 text-left font-medium text-gray-500 dark:text-gray-400",flush:{off:"hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 dark:hover:bg-gray-800 dark:focus:ring-gray-800",on:"!bg-transparent dark:!bg-transparent"},heading:"",open:{off:"",on:"text-gray-900 bg-gray-100 dark:bg-gray-800 dark:text-white"}}},alert:{root:{base:"flex flex-col gap-2 p-4 text-sm",borderAccent:"border-t-4",wrapper:"flex items-center",color:{info:"text-blue-700 bg-blue-100 border-blue-500 dark:bg-blue-200 dark:text-blue-800",gray:"text-gray-700 bg-gray-100 border-gray-500 dark:bg-gray-700 dark:text-gray-300",failure:"text-red-700 bg-red-100 border-red-500 dark:bg-red-200 dark:text-red-800",success:"text-green-700 bg-green-100 border-green-500 dark:bg-green-200 dark:text-green-800",warning:"text-yellow-700 bg-yellow-100 border-yellow-500 dark:bg-yellow-200 dark:text-yellow-800"},icon:"mr-3 inline h-5 w-5 flex-shrink-0",rounded:"rounded-lg"},closeButton:{base:"-mx-1.5 -my-1.5 ml-auto inline-flex h-8 w-8 rounded-lg p-1.5 focus:ring-2",icon:"w-5 h-5",color:{info:"bg-blue-100 text-blue-500 hover:bg-blue-200 focus:ring-blue-400 dark:bg-blue-200 dark:text-blue-600 dark:hover:bg-blue-300",gray:"bg-gray-100 text-gray-500 hover:bg-gray-200 focus:ring-gray-400 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-800 dark:hover:text-white",failure:"bg-red-100 text-red-500 hover:bg-red-200 focus:ring-red-400 dark:bg-red-200 dark:text-red-600 dark:hover:bg-red-300",success:"bg-green-100 text-green-500 hover:bg-green-200 focus:ring-green-400 dark:bg-green-200 dark:text-green-600 dark:hover:bg-green-300",warning:"bg-yellow-100 text-yellow-500 hover:bg-yellow-200 focus:ring-yellow-400 dark:bg-yellow-200 dark:text-yellow-600 dark:hover:bg-yellow-300"}}},avatar:{root:{base:"flex justify-center items-center space-x-4",bordered:"p-1 ring-2",rounded:"!rounded-full",color:{dark:"ring-gray-800 dark:ring-gray-800",failure:"ring-red-500 dark:ring-red-700",gray:"ring-gray-500 dark:ring-gray-400",info:"ring-blue-400 dark:ring-blue-800",light:"ring-gray-300 dark:ring-gray-500",purple:"ring-purple-500 dark:ring-purple-600",success:"ring-green-500 dark:ring-green-500",warning:"ring-yellow-300 dark:ring-yellow-500",pink:"ring-pink-500 dark:ring-pink-500"},size:{xs:"w-6 h-6",sm:"w-8 h-8",md:"w-10 h-10",lg:"w-20 h-20",xl:"w-36 h-36"},stacked:"ring-2 ring-gray-300 dark:ring-gray-500",statusPosition:{"bottom-left":"-bottom-1 -left-1","bottom-center":"-botton-1 center","bottom-right":"-bottom-1 -right-1","top-left":"-top-1 -left-1","top-center":"-top-1 center","top-right":"-top-1 -right-1","center-right":"center -right-1",center:"center center","center-left":"center -left-1"}},img:{off:"rounded relative overflow-hidden bg-gray-100 dark:bg-gray-600",on:"rounded",placeholder:"absolute w-auto h-auto text-gray-400 -bottom-1"},status:{away:"bg-yellow-400",base:"absolute h-3.5 w-3.5 rounded-full border-2 border-white dark:border-gray-800",busy:"bg-red-400",offline:"bg-gray-400",online:"bg-green-400"},initials:{text:"font-medium text-gray-600 dark:text-gray-300",base:"inline-flex overflow-hidden relative justify-center items-center w-10 h-10 bg-gray-100 dark:bg-gray-600"}},avatarGroupCounter:{root:{base:"relative flex items-center justify-center w-10 h-10 text-xs font-medium text-white bg-gray-700 rounded-full ring-2 ring-gray-300 hover:bg-gray-600 dark:ring-gray-500"}},avatarGroup:{root:{base:"flex -space-x-4"}},badge:{root:{base:"flex h-fit items-center gap-1 font-semibold",color:{info:"bg-blue-100 text-blue-800 dark:bg-blue-200 dark:text-blue-800 group-hover:bg-blue-200 dark:group-hover:bg-blue-300",gray:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300 group-hover:bg-gray-200 dark:group-hover:bg-gray-600",failure:"bg-red-100 text-red-800 dark:bg-red-200 dark:text-red-900 group-hover:bg-red-200 dark:group-hover:bg-red-300",success:"bg-green-100 text-green-800 dark:bg-green-200 dark:text-green-900 group-hover:bg-green-200 dark:group-hover:bg-green-300",warning:"bg-yellow-100 text-yellow-800 dark:bg-yellow-200 dark:text-yellow-900 group-hover:bg-yellow-200 dark:group-hover:bg-yellow-300",indigo:"bg-indigo-100 text-indigo-800 dark:bg-indigo-200 dark:text-indigo-900 group-hover:bg-indigo-200 dark:group-hover:bg-indigo-300",purple:"bg-purple-100 text-purple-800 dark:bg-purple-200 dark:text-purple-900 group-hover:bg-purple-200 dark:group-hover:bg-purple-300",pink:"bg-pink-100 text-pink-800 dark:bg-pink-200 dark:text-pink-900 group-hover:bg-pink-200 dark:group-hover:bg-pink-300"},href:"group",size:{xs:"p-1 text-xs",sm:"p-1.5 text-sm"}},icon:{off:"rounded px-2 py-0.5",on:"rounded-full p-1.5",size:{xs:"w-3 h-3",sm:"w-3.5 h-3.5"}}},breadcrumb:{root:{base:"",list:"flex items-center"},item:{base:"group flex items-center",chevron:"mx-1 h-6 w-6 text-gray-400 group-first:hidden md:mx-2",href:{off:"flex items-center text-sm font-medium text-gray-500 dark:text-gray-400",on:"flex items-center text-sm font-medium text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white"},icon:"mr-2 h-4 w-4"}},button:{base:"group flex h-min items-center justify-center p-0.5 text-center font-medium focus:z-10",fullSized:"w-full",color:{dark:"text-white bg-gray-800 border border-transparent hover:bg-gray-900 focus:ring-4 focus:ring-gray-300 disabled:hover:bg-gray-800 dark:bg-gray-800 dark:hover:bg-gray-700 dark:focus:ring-gray-800 dark:border-gray-700 dark:disabled:hover:bg-gray-800",failure:"text-white bg-red-700 border border-transparent hover:bg-red-800 focus:ring-4 focus:ring-red-300 disabled:hover:bg-red-800 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900 dark:disabled:hover:bg-red-600",gray:"text-gray-900 bg-white border border-gray-200 hover:bg-gray-100 hover:text-blue-700 disabled:hover:bg-white focus:ring-blue-700 focus:text-blue-700 dark:bg-transparent dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700 focus:ring-2 dark:disabled:hover:bg-gray-800",info:"text-white bg-blue-700 border border-transparent hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 disabled:hover:bg-blue-700 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800 dark:disabled:hover:bg-blue-600",light:"text-gray-900 bg-white border border-gray-300 hover:bg-gray-100 focus:ring-4 focus:ring-blue-300 disabled:hover:bg-white dark:bg-gray-600 dark:text-white dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:border-gray-700 dark:focus:ring-gray-700",purple:"text-white bg-purple-700 border border-transparent hover:bg-purple-800 focus:ring-4 focus:ring-purple-300 disabled:hover:bg-purple-700 dark:bg-purple-600 dark:hover:bg-purple-700 dark:focus:ring-purple-900 dark:disabled:hover:bg-purple-600",success:"text-white bg-green-700 border border-transparent hover:bg-green-800 focus:ring-4 focus:ring-green-300 disabled:hover:bg-green-700 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800 dark:disabled:hover:bg-green-600",warning:"text-white bg-yellow-400 border border-transparent hover:bg-yellow-500 focus:ring-4 focus:ring-yellow-300 disabled:hover:bg-yellow-400 dark:focus:ring-yellow-900 dark:disabled:hover:bg-yellow-400"},disabled:"cursor-not-allowed opacity-50",gradient:{cyan:"text-white bg-gradient-to-r from-cyan-400 via-cyan-500 to-cyan-600 hover:bg-gradient-to-br focus:ring-4 focus:ring-cyan-300 dark:focus:ring-cyan-800",failure:"text-white bg-gradient-to-r from-red-400 via-red-500 to-red-600 hover:bg-gradient-to-br focus:ring-4 focus:ring-red-300 dark:focus:ring-red-800",info:"text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br focus:ring-4 focus:ring-blue-300 dark:focus:ring-blue-800 ",lime:"text-gray-900 bg-gradient-to-r from-lime-200 via-lime-400 to-lime-500 hover:bg-gradient-to-br focus:ring-4 focus:ring-lime-300 dark:focus:ring-lime-800",pink:"text-white bg-gradient-to-r from-pink-400 via-pink-500 to-pink-600 hover:bg-gradient-to-br focus:ring-4 focus:ring-pink-300 dark:focus:ring-pink-800",purple:"text-white bg-gradient-to-r from-purple-500 via-purple-600 to-purple-700 hover:bg-gradient-to-br focus:ring-4 focus:ring-purple-300 dark:focus:ring-purple-800",success:"text-white bg-gradient-to-r from-green-400 via-green-500 to-green-600 hover:bg-gradient-to-br focus:ring-4 focus:ring-green-300 dark:focus:ring-green-800",teal:"text-white bg-gradient-to-r from-teal-400 via-teal-500 to-teal-600 hover:bg-gradient-to-br focus:ring-4 focus:ring-teal-300 dark:focus:ring-teal-800"},gradientDuoTone:{cyanToBlue:"text-white bg-gradient-to-r from-cyan-500 to-blue-500 hover:bg-gradient-to-bl focus:ring-4 focus:ring-cyan-300 dark:focus:ring-cyan-800",greenToBlue:"text-white bg-gradient-to-br from-green-400 to-blue-600 hover:bg-gradient-to-bl focus:ring-4 focus:ring-green-200 dark:focus:ring-green-800",pinkToOrange:"text-white bg-gradient-to-br from-pink-500 to-orange-400 hover:bg-gradient-to-bl focus:ring-4 focus:ring-pink-200 dark:focus:ring-pink-800",purpleToBlue:"text-white bg-gradient-to-br from-purple-600 to-blue-500 hover:bg-gradient-to-bl focus:ring-4 focus:ring-blue-300 dark:focus:ring-blue-800",purpleToPink:"text-white bg-gradient-to-r from-purple-500 to-pink-500 hover:bg-gradient-to-l focus:ring-4 focus:ring-purple-200 dark:focus:ring-purple-800",redToYellow:"text-gray-900 bg-gradient-to-r from-red-200 via-red-300 to-yellow-200 hover:bg-gradient-to-bl focus:ring-4 focus:ring-red-100 dark:focus:ring-red-400",tealToLime:"text-gray-900 bg-gradient-to-r from-teal-200 to-lime-200 hover:bg-gradient-to-l hover:from-teal-200 hover:to-lime-200 hover:!text-gray-900 focus:ring-4 focus:ring-lime-200 dark:focus:ring-teal-700"},inner:{base:"flex items-center",position:{none:"",start:"rounded-r-none",middle:"!rounded-none",end:"rounded-l-none"},outline:"border border-transparent"},label:"ml-2 inline-flex h-4 w-4 items-center justify-center rounded-full bg-blue-200 text-xs font-semibold text-blue-800",outline:{color:{gray:"border border-gray-900 dark:border-white",default:"border-0",light:""},off:"",on:"!block bg-white text-gray-900 transition-all duration-75 ease-in group-hover:bg-opacity-0 group-hover:text-inherit dark:bg-gray-900 dark:text-white w-full",pill:{off:"rounded-md",on:"rounded-full"}},pill:{off:"rounded-lg",on:"rounded-full"},size:{xs:"text-xs px-2 py-1",sm:"text-sm px-3 py-1.5",md:"text-sm px-4 py-2",lg:"text-base px-5 py-2.5",xl:"text-base px-6 py-3"}},buttonGroup:{base:"inline-flex",position:{none:"focus:!ring-2",start:"rounded-r-none",middle:"!rounded-none border-l-0 pl-0",end:"rounded-l-none border-l-0 pl-0"}},card:{root:{base:"flex rounded-lg border border-gray-200 bg-white shadow-md dark:border-gray-700 dark:bg-gray-800",children:"flex h-full flex-col justify-center gap-4 p-6",horizontal:{off:"flex-col",on:"flex-col md:max-w-xl md:flex-row"},href:"hover:bg-gray-100 dark:hover:bg-gray-700"},img:{base:"",horizontal:{off:"rounded-t-lg",on:"h-96 w-full rounded-t-lg object-cover md:h-auto md:w-48 md:rounded-none md:rounded-l-lg"}}},carousel:{base:"relative h-full w-full",indicators:{active:{off:"bg-white/50 hover:bg-white dark:bg-gray-800/50 dark:hover:bg-gray-800",on:"bg-white dark:bg-gray-800"},base:"h-3 w-3 rounded-full",wrapper:"absolute bottom-5 left-1/2 flex -translate-x-1/2 space-x-3"},item:{base:"absolute top-1/2 left-1/2 block w-full -translate-x-1/2 -translate-y-1/2",wrapper:"w-full flex-shrink-0 transform cursor-grab snap-center"},control:{base:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-white/30 group-hover:bg-white/50 group-focus:outline-none group-focus:ring-4 group-focus:ring-white dark:bg-gray-800/30 dark:group-hover:bg-gray-800/60 dark:group-focus:ring-gray-800/70 sm:h-10 sm:w-10",icon:"h-5 w-5 text-white dark:text-gray-800 sm:h-6 sm:w-6"},leftControl:"absolute top-0 left-0 flex h-full items-center justify-center px-4 focus:outline-none",rightControl:"absolute top-0 right-0 flex h-full items-center justify-center px-4 focus:outline-none",scrollContainer:{base:"flex h-full snap-mandatory overflow-y-hidden overflow-x-scroll scroll-smooth rounded-lg",snap:"snap-x"}},darkThemeToggle:{base:"rounded-lg p-2.5 text-sm text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-700",icon:"h-5 w-5"},dropdown:{floating:{target:"w-fit",base:"z-10 w-fit rounded divide-y divide-gray-100 shadow",animation:"transition-opacity",hidden:"invisible opacity-0",style:{dark:"bg-gray-900 text-white dark:bg-gray-700",light:"border border-gray-200 bg-white text-gray-900",auto:"border border-gray-200 bg-white text-gray-900 dark:border-none dark:bg-gray-700 dark:text-white"},header:"block py-2 px-4 text-sm text-gray-700 dark:text-gray-200",content:"py-1 text-sm text-gray-700 dark:text-gray-200",arrow:{base:"absolute z-10 h-2 w-2 rotate-45",style:{dark:"bg-gray-900 dark:bg-gray-700",light:"bg-white",auto:"bg-white dark:bg-gray-700"},placement:"-4px"},item:{base:"flex items-center justify-start py-2 px-4 text-sm text-gray-700 cursor-pointer hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-600 dark:hover:text-white",icon:"mr-2 h-4 w-4"},divider:"my-1 h-px bg-gray-100 dark:bg-gray-600"},arrowIcon:"ml-2 h-4 w-4",inlineWrapper:"flex items-center",content:"py-1"},footer:{base:"w-full rounded-lg bg-white shadow dark:bg-gray-800 md:flex md:items-center md:justify-between",container:"w-full p-6",bgDark:"bg-gray-800",groupLink:{base:"flex flex-wrap text-sm text-gray-500 dark:text-white",link:{base:"last:mr-0 md:mr-6",href:"hover:underline"},col:"flex-col space-y-4"},icon:{base:"text-gray-500 dark:hover:text-white",size:"h-5 w-5"},title:{base:"mb-6 text-sm font-semibold uppercase text-gray-500 dark:text-white"},divider:{base:"w-full my-6 border-gray-200 sm:mx-auto dark:border-gray-700 lg:my-8"},copyright:{base:"text-sm text-gray-500 dark:text-gray-400 sm:text-center",href:"ml-1 hover:underline",span:"ml-1"},brand:{base:"mb-4 flex items-center sm:mb-0",img:"mr-3 h-8",span:"self-center whitespace-nowrap text-2xl font-semibold text-gray-800 dark:text-white"}},checkbox:{root:{base:"h-4 w-4 rounded border border-gray-300 bg-gray-100 focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800 dark:focus:ring-blue-600"}},fileInput:{base:"flex",field:{base:"relative w-full",input:{base:"rounded-lg overflow-hidden block w-full border disabled:cursor-not-allowed disabled:opacity-50",sizes:{sm:"sm:text-xs",md:"text-sm",lg:"sm:text-md"},colors:{gray:"bg-gray-50 border-gray-300 text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",info:"border-blue-500 bg-blue-50 text-blue-900 placeholder-blue-700 focus:border-blue-500 focus:ring-blue-500 dark:border-blue-400 dark:bg-blue-100 dark:focus:border-blue-500 dark:focus:ring-blue-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"}}}},label:{base:"text-sm font-medium",colors:{default:"text-gray-900 dark:text-gray-300",info:"text-blue-500 dark:text-blue-600",failure:"text-red-700 dark:text-red-500",warning:"text-yellow-500 dark:text-yellow-600",success:"text-green-700 dark:text-green-500"},disabled:"opacity-50"},radio:{root:{base:"h-4 w-4 border border-gray-300 focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:focus:bg-blue-600 dark:focus:ring-blue-600"}},rangeSlider:{base:"flex",field:{base:"relative w-full",input:{base:"w-full bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700",sizes:{sm:"h-1 range-sm",md:"h-2",lg:"h-3 range-lg"}}}},select:{base:"flex",addon:"inline-flex items-center rounded-l-md border border-r-0 border-gray-300 bg-gray-200 px-3 text-sm text-gray-900 dark:border-gray-600 dark:bg-gray-600 dark:text-gray-400",field:{base:"relative w-full",icon:{base:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",svg:"h-5 w-5 text-gray-500 dark:text-gray-400"},select:{base:"block w-full border disabled:cursor-not-allowed disabled:opacity-50",withIcon:{on:"pl-10",off:""},withAddon:{on:"rounded-r-lg",off:"rounded-lg"},withShadow:{on:"shadow-sm dark:shadow-sm-light",off:""},sizes:{sm:"p-2 sm:text-xs",md:"p-2.5 text-sm",lg:"sm:text-md p-4"},colors:{gray:"bg-gray-50 border-gray-300 text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",info:"border-blue-500 bg-blue-50 text-blue-900 placeholder-blue-700 focus:border-blue-500 focus:ring-blue-500 dark:border-blue-400 dark:bg-blue-100 dark:focus:border-blue-500 dark:focus:ring-blue-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"}}}},textInput:{base:"flex",addon:"inline-flex items-center rounded-l-md border border-r-0 border-gray-300 bg-gray-200 px-3 text-sm text-gray-900 dark:border-gray-600 dark:bg-gray-600 dark:text-gray-400",field:{base:"relative w-full",icon:{base:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",svg:"h-5 w-5 text-gray-500 dark:text-gray-400"},rightIcon:{base:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3",svg:"h-5 w-5 text-gray-500 dark:text-gray-400"},input:{base:"block w-full border disabled:cursor-not-allowed disabled:opacity-50",sizes:{sm:"p-2 sm:text-xs",md:"p-2.5 text-sm",lg:"sm:text-md p-4"},colors:{gray:"bg-gray-50 border-gray-300 text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",info:"border-blue-500 bg-blue-50 text-blue-900 placeholder-blue-700 focus:border-blue-500 focus:ring-blue-500 dark:border-blue-400 dark:bg-blue-100 dark:focus:border-blue-500 dark:focus:ring-blue-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"},withRightIcon:{on:"pr-10",off:""},withIcon:{on:"pl-10",off:""},withAddon:{on:"rounded-r-lg",off:"rounded-lg"},withShadow:{on:"shadow-sm dark:shadow-sm-light",off:""}}}},textarea:{base:"block w-full rounded-lg border disabled:cursor-not-allowed disabled:opacity-50",colors:{gray:"bg-gray-50 border-gray-300 text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",info:"border-blue-500 bg-blue-50 text-blue-900 placeholder-blue-700 focus:border-blue-500 focus:ring-blue-500 dark:border-blue-400 dark:bg-blue-100 dark:focus:border-blue-500 dark:focus:ring-blue-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"},withShadow:{on:"shadow-sm dark:shadow-sm-light",off:""}},toggleSwitch:{root:{base:"group relative flex items-center rounded-lg focus:outline-none",active:{on:"cursor-pointer",off:"cursor-not-allowed opacity-50"},label:"ml-3 text-sm font-medium text-gray-900 dark:text-gray-300"},toggle:{base:"toggle-bg h-6 w-11 rounded-full border group-focus:ring-4 group-focus:ring-blue-500/25",checked:{on:"after:translate-x-full after:border-white",off:"border-gray-200 bg-gray-200 dark:border-gray-600 dark:bg-gray-700",color:{blue:" bg-blue-700 border-blue-700",dark:"bg-dark-700 border-dark-900",failure:"bg-red-700 border-red-900",gray:"bg-gray-500 border-gray-600",green:"bg-green-600 border-green-700",light:"bg-light-700 border-light-900",red:"bg-red-700 border-red-900",purple:"bg-purple-700 border-purple-900",success:"bg-green-500 border-green-500",yellow:"bg-yellow-400 border-yellow-400",warning:"bg-yellow-600 border-yellow-600",cyan:"bg-cyan-500 border-cyan-500",lime:"bg-lime-400 border-lime-400",indigo:"bg-indigo-400 border-indigo-400",teal:"bg-gradient-to-r from-teal-400 via-teal-500 to-teal-600 hover:bg-gradient-to-br focus:ring-4",info:"bg-blue-600 border-blue-600",pink:"bg-pink-600 border-pink-600"}}}},helperText:{base:"mt-2 text-sm",colors:{gray:"text-gray-500 dark:text-gray-400",info:"text-blue-700 dark:text-blue-800",success:"text-green-600 dark:text-green-500",failure:"text-red-600 dark:text-red-500",warning:"text-yellow-500 dark:text-yellow-600"}},listGroup:{base:"list-none rounded-lg border border-gray-200 bg-white text-sm font-medium text-gray-900 dark:border-gray-600 dark:bg-gray-700 dark:text-white",item:{active:{off:"hover:bg-gray-100 hover:text-blue-700 focus:text-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-700 dark:border-gray-600 dark:hover:bg-gray-600 dark:hover:text-white dark:focus:text-white dark:focus:ring-gray-500",on:"bg-blue-700 text-white dark:bg-gray-800"},base:"flex w-full cursor-pointer border-b border-gray-200 py-2 px-4 first:rounded-t-lg last:rounded-b-lg last:border-b-0 dark:border-gray-600",href:{off:"",on:""},icon:"mr-2 h-4 w-4 fill-current"}},modal:{base:"fixed top-0 right-0 left-0 z-50 h-modal overflow-y-auto overflow-x-hidden md:inset-0 md:h-full",show:{on:"flex bg-gray-900 bg-opacity-50 dark:bg-opacity-80",off:"hidden"},content:{base:"relative h-full w-full p-4 md:h-auto",inner:"relative rounded-lg bg-white shadow dark:bg-gray-700"},body:{base:"p-6",popup:"pt-0"},header:{base:"flex items-start justify-between rounded-t dark:border-gray-600 border-b p-5",popup:"!p-2 !border-b-0",title:"text-xl font-medium text-gray-900 dark:text-white",close:{base:"ml-auto inline-flex items-center rounded-lg bg-transparent p-1.5 text-sm text-gray-400 hover:bg-gray-200 hover:text-gray-900 dark:hover:bg-gray-600 dark:hover:text-white",icon:"h-5 w-5"}},footer:{base:"flex items-center space-x-2 rounded-b border-gray-200 p-6 dark:border-gray-600",popup:"border-t"},sizes:{sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","3xl":"max-w-3xl","4xl":"max-w-4xl","5xl":"max-w-5xl","6xl":"max-w-6xl","7xl":"max-w-7xl"},positions:{"top-left":"items-start justify-start","top-center":"items-start justify-center","top-right":"items-start justify-end","center-left":"items-center justify-start",center:"items-center justify-center","center-right":"items-center justify-end","bottom-right":"items-end justify-end","bottom-center":"items-end justify-center","bottom-left":"items-end justify-start"}},navbar:{root:{base:"border-gray-200 bg-white px-2 py-2.5 dark:border-gray-700 dark:bg-gray-800 sm:px-4",rounded:{on:"rounded",off:""},bordered:{on:"border",off:""},inner:{base:"mx-auto flex flex-wrap items-center justify-between",fluid:{on:"",off:"container"}}},brand:{base:"flex items-center"},collapse:{base:"w-full md:block md:w-auto",list:"mt-4 flex flex-col md:mt-0 md:flex-row md:space-x-8 md:text-sm md:font-medium",hidden:{on:"hidden",off:""}},link:{base:"block py-2 pr-4 pl-3 md:p-0",active:{on:"bg-blue-700 text-white dark:text-white md:bg-transparent md:text-blue-700",off:"border-b border-gray-100  text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white md:border-0 md:hover:bg-transparent md:hover:text-blue-700 md:dark:hover:bg-transparent md:dark:hover:text-white"},disabled:{on:"text-gray-400 hover:cursor-not-allowed dark:text-gray-600",off:""}},toggle:{base:"inline-flex items-center rounded-lg p-2 text-sm text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600 md:hidden",icon:"h-6 w-6 shrink-0"}},rating:{base:"flex items-center",star:{sizes:{sm:"w-5 h-5",md:"w-7 h-7",lg:"w-10 h-10"},filled:"text-yellow-400",empty:"text-gray-300 dark:text-gray-500"},advanced:{base:"flex items-center",label:"text-sm font-medium text-blue-600 dark:text-blue-500",progress:{base:"mx-4 h-5 w-2/4 rounded bg-gray-200 dark:bg-gray-700",fill:"h-5 rounded bg-yellow-400",label:"text-sm font-medium text-blue-600 dark:text-blue-500"}}},pagination:{base:"",layout:{table:{base:"text-sm text-gray-700 dark:text-gray-400",span:"font-semibold text-gray-900 dark:text-white"}},pages:{base:"xs:mt-0 mt-2 inline-flex items-center -space-x-px",showIcon:"inline-flex",previous:{base:"ml-0 rounded-l-lg border border-gray-300 bg-white py-2 px-3 leading-tight text-gray-500 hover:bg-gray-100 hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",icon:"h-5 w-5"},next:{base:"rounded-r-lg border border-gray-300 bg-white py-2 px-3 leading-tight text-gray-500 hover:bg-gray-100 hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",icon:"h-5 w-5"},selector:{base:"w-12 border border-gray-300 bg-white py-2 leading-tight text-gray-500 hover:bg-gray-100 hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",active:"bg-blue-50 text-blue-600 hover:bg-blue-100 hover:text-blue-700 dark:border-gray-700 dark:bg-gray-700 dark:text-white"}}},sidebar:{base:"h-full",inner:"h-full overflow-y-auto overflow-x-hidden rounded bg-white py-4 px-3 dark:bg-gray-800",collapsed:{on:"w-16",off:"w-64"},collapse:{button:"group flex w-full items-center rounded-lg p-2 text-base font-normal text-gray-900 transition duration-75 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700",icon:{base:"h-6 w-6 text-gray-500 transition duration-75 group-hover:text-gray-900 dark:text-gray-400 dark:group-hover:text-white",open:{off:"",on:"text-gray-900"}},label:{base:"ml-3 flex-1 whitespace-nowrap text-left",icon:"h-6 w-6"},list:"space-y-2 py-2"},cta:{base:"mt-6 rounded-lg p-4",color:{blue:"bg-blue-50 dark:bg-blue-900",dark:"bg-dark-50 dark:bg-dark-900",failure:"bg-red-50 dark:bg-red-900",gray:"bg-alternative-50 dark:bg-alternative-900",green:"bg-green-50 dark:bg-green-900",light:"bg-light-50 dark:bg-light-900",red:"bg-red-50 dark:bg-red-900",purple:"bg-purple-50 dark:bg-purple-900",success:"bg-green-50 dark:bg-green-900",yellow:"bg-yellow-50 dark:bg-yellow-900",warning:"bg-yellow-50 dark:bg-yellow-900"}},item:{base:"flex items-center justify-center rounded-lg p-2 text-base font-normal text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700",active:"bg-gray-100 dark:bg-gray-700",collapsed:{insideCollapse:"group w-full pl-8 transition duration-75",noIcon:"font-bold"},content:{base:"px-3 flex-1 whitespace-nowrap"},icon:{base:"h-6 w-6 flex-shrink-0 text-gray-500 transition duration-75 group-hover:text-gray-900 dark:text-gray-400 dark:group-hover:text-white",active:"text-gray-700 dark:text-gray-100"},label:""},items:"",itemGroup:"mt-4 space-y-2 border-t border-gray-200 pt-4 first:mt-0 first:border-t-0 first:pt-0 dark:border-gray-700",logo:{base:"mb-5 flex items-center pl-2.5",collapsed:{on:"hidden",off:"self-center whitespace-nowrap text-xl font-semibold dark:text-white"},img:"mr-3 h-6 sm:h-7"}},progress:{base:"w-full overflow-hidden rounded-full bg-gray-200 dark:bg-gray-700",label:"mb-1 flex justify-between font-medium dark:text-white",bar:"flex items-center justify-center rounded-full text-center font-medium leading-none text-blue-100",color:{dark:"bg-gray-600 dark:bg-gray-300",blue:"bg-blue-600",red:"bg-red-600 dark:bg-red-500",green:"bg-green-600 dark:bg-green-500",yellow:"bg-yellow-400",indigo:"bg-indigo-600 dark:bg-indigo-500",purple:"bg-purple-600 dark:bg-purple-500"},size:{sm:"h-1.5",md:"h-2.5",lg:"h-4",xl:"h-6"}},spinner:{base:"inline animate-spin text-gray-200",color:{failure:"fill-red-600",gray:"fill-gray-600",info:"fill-blue-600",pink:"fill-pink-600",purple:"fill-purple-600",success:"fill-green-500",warning:"fill-yellow-400"},light:{off:{base:"dark:text-gray-600",color:{failure:"",gray:"dark:fill-gray-300",info:"",pink:"",purple:"",success:"",warning:""}},on:{base:"",color:{failure:"",gray:"",info:"",pink:"",purple:"",success:"",warning:""}}},size:{xs:"w-3 h-3",sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8",xl:"w-10 h-10"}},tab:{base:"flex flex-col gap-2",tablist:{base:"flex text-center",styles:{default:"flex-wrap border-b border-gray-200 dark:border-gray-700",underline:"flex-wrap -mb-px border-b border-gray-200 dark:border-gray-700",pills:"flex-wrap font-medium text-sm text-gray-500 dark:text-gray-400",fullWidth:"hidden text-sm font-medium rounded-lg divide-x divide-gray-200 shadow sm:flex dark:divide-gray-700 dark:text-gray-400"},tabitem:{base:"flex items-center justify-center p-4 text-sm font-medium first:ml-0 disabled:cursor-not-allowed disabled:text-gray-400 disabled:dark:text-gray-500",styles:{default:{base:"rounded-t-lg",active:{on:"bg-gray-100 text-blue-600 dark:bg-gray-800 dark:text-blue-500",off:"text-gray-500 hover:bg-gray-50 hover:text-gray-600 dark:text-gray-400 dark:hover:bg-gray-800  dark:hover:text-gray-300"}},underline:{base:"rounded-t-lg",active:{on:"text-blue-600 rounded-t-lg border-b-2 border-blue-600 active dark:text-blue-500 dark:border-blue-500",off:"border-b-2 border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-600 dark:text-gray-400 dark:hover:text-gray-300"}},pills:{base:"",active:{on:"rounded-lg bg-blue-600 text-white",off:"rounded-lg hover:text-gray-900 hover:bg-gray-100 dark:hover:bg-gray-800 dark:hover:text-white"}},fullWidth:{base:"ml-2 first:ml-0 w-full first:rounded-l-lg last:rounded-r-lg",active:{on:"inline-block p-4 w-full text-gray-900 bg-gray-100 focus:ring-4 focus:ring-blue-300 active focus:outline-none dark:bg-gray-700 dark:text-white",off:"bg-white hover:text-gray-700 hover:bg-gray-50 focus:ring-4 focus:ring-blue-300 focus:outline-none dark:hover:text-white dark:bg-gray-800 dark:hover:bg-gray-700"}}},icon:"mr-2 h-5 w-5"}},tabpanel:"p-4"},toast:{base:"flex w-full max-w-xs items-center rounded-lg bg-white p-4 text-gray-500 shadow dark:bg-gray-800 dark:text-gray-400",closed:"opacity-0 ease-out",removed:"hidden",toggle:{base:"-mx-1.5 -my-1.5 ml-auto inline-flex h-8 w-8 rounded-lg bg-white p-1.5 text-gray-400 hover:bg-gray-100 hover:text-gray-900 focus:ring-2 focus:ring-gray-300 dark:bg-gray-800 dark:text-gray-500 dark:hover:bg-gray-700 dark:hover:text-white",icon:"h-5 w-5 shrink-0"}},tooltip:{target:"w-fit",base:"absolute inline-block z-10 rounded-lg py-2 px-3 text-sm font-medium shadow-sm",animation:"transition-opacity",hidden:"invisible opacity-0",style:{dark:"bg-gray-900 text-white dark:bg-gray-700",light:"border border-gray-200 bg-white text-gray-900",auto:"border border-gray-200 bg-white text-gray-900 dark:border-none dark:bg-gray-700 dark:text-white"},content:"relative z-20",arrow:{base:"absolute z-10 h-2 w-2 rotate-45",style:{dark:"bg-gray-900 dark:bg-gray-700",light:"bg-white",auto:"bg-white dark:bg-gray-700"},placement:"-4px"}},table:{wrapper:"relative overflow-x-auto shadow-md sm:rounded-lg",base:"w-full text-left text-sm text-gray-500 dark:text-gray-400",head:{base:"bg-gray-50 text-xs uppercase text-gray-700 dark:bg-gray-700 dark:text-gray-400",cell:{base:"px-6 py-3"}},row:{hovered:"hover:bg-gray-50 dark:hover:bg-gray-600",striped:"odd:bg-white even:bg-gray-50 odd:dark:bg-gray-800 even:dark:bg-gray-700"},cell:{base:"px-6 py-4"}},timeline:{direction:{horizontal:"items-base sm:flex",vertical:"relative border-l border-gray-200 dark:border-gray-700"},item:{base:{horizontal:"relative mb-6 sm:mb-0",vertical:"mb-10 ml-6"},point:{base:{horizontal:"flex items-center",vertical:""},marker:{base:{horizontal:"absolute -left-1.5 h-3 w-3 rounded-full border border-white bg-gray-200 dark:border-gray-900 dark:bg-gray-700",vertical:"absolute -left-1.5 mt-1.5 h-3 w-3 rounded-full border border-white bg-gray-200 dark:border-gray-900 dark:bg-gray-700"},icon:{wrapper:"absolute -left-3 flex h-6 w-6 items-center justify-center rounded-full bg-blue-200 ring-8 ring-white dark:bg-blue-900 dark:ring-gray-900",base:"h-3 w-3 text-blue-600 dark:text-blue-300"}},line:"hidden h-0.5 w-full bg-gray-200 dark:bg-gray-700 sm:flex"},content:{base:"mt-3 sm:pr-8",time:"mb-1 text-sm font-normal leading-none text-gray-400 dark:text-gray-500",title:"text-lg font-semibold text-gray-900 dark:text-white",body:"mb-4 text-base font-normal text-gray-500 dark:text-gray-400"}}}},ThemeContext=reactExports.createContext({theme:theme$1});function useTheme(){return reactExports.useContext(ThemeContext)}const AccordionPanelContext=reactExports.createContext(void 0);function useAccordionContext(){const dt=reactExports.useContext(AccordionPanelContext);if(!dt)throw new Error("useAccordionContext should be used within the AccordionPanelContext provider!");return dt}const AccordionContent=({children:dt,className:$,theme:lt={},...ft})=>{const{isOpen:St}=useAccordionContext(),Tt=mergeDeep(useTheme().theme.accordion.content,lt);return jsx("div",{className:classNames(Tt.base,$),"data-testid":"flowbite-accordion-content",hidden:!St,...ft,children:dt})},AccordionPanel=({children:dt,...$})=>{const{alwaysOpen:lt}=$,[ft,St]=reactExports.useState($.isOpen),Tt=lt?{...$,isOpen:ft,setOpen:()=>St(!ft)}:$;return jsx(AccordionPanelContext.Provider,{value:Tt,children:dt})},AccordionTitle=({as:dt="h2",children:$,className:lt,theme:ft={},...St})=>{const{arrowIcon:Tt,flush:Ct,isOpen:At,setOpen:Rt}=useAccordionContext(),kt=()=>typeof Rt<"u"&&Rt(),Nt=mergeDeep(useTheme().theme.accordion.title,ft);return jsxs("button",{className:classNames(Nt.base,Nt.flush[Ct?"on":"off"],Nt.open[At?"on":"off"],lt),onClick:kt,type:"button",...St,children:[jsx(dt,{className:Nt.heading,"data-testid":"flowbite-accordion-heading",children:$}),Tt&&jsx(Tt,{"aria-hidden":!0,className:classNames(Nt.arrow.base,Nt.arrow.open[At?"on":"off"]),"data-testid":"flowbite-accordion-arrow"})]})},AccordionComponent=({alwaysOpen:dt=!1,arrowIcon:$=HiChevronDown,children:lt,flush:ft=!1,collapseAll:St=!1,className:Tt,theme:Ct={},...At})=>{const[Rt,kt]=reactExports.useState(St?-1:0),Nt=reactExports.useMemo(()=>reactExports.Children.map(lt,(Ut,zt)=>reactExports.cloneElement(Ut,{alwaysOpen:dt,arrowIcon:$,flush:ft,isOpen:Rt===zt,setOpen:()=>kt(zt)})),[dt,$,lt,ft,Rt]),Bt=mergeDeep(useTheme().theme.accordion.root,Ct);return jsx("div",{className:classNames(Bt.base,Bt.flush[ft?"on":"off"],Tt),"data-testid":"flowbite-accordion",...At,children:Nt})};AccordionComponent.displayName="Accordion";AccordionPanel.displayName="Accordion.Panel";AccordionTitle.displayName="Accordion.Title";AccordionContent.displayName="Accordion.Content";Object.assign(AccordionComponent,{Panel:AccordionPanel,Title:AccordionTitle,Content:AccordionContent});const AvatarGroup=({children:dt,className:$,theme:lt={},...ft})=>{const St=mergeDeep(useTheme().theme.avatarGroup.root,lt);return jsx("div",{"data-testid":"avatar-group-element",className:classNames(St.base,$),...ft,children:dt})};AvatarGroup.displayName="Avatar.Group";const AvatarGroupCounter=({total:dt,href:$,className:lt,theme:ft={}})=>{const St=mergeDeep(useTheme().theme.avatarGroupCounter.root,ft);return jsxs("a",{className:classNames(St.base,lt),href:$,children:["+",dt]})};AvatarGroupCounter.displayName="Avatar.GroupCounter";const AvatarComponent=({alt:dt="",bordered:$=!1,children:lt,img:ft,color:St="light",rounded:Tt=!1,size:Ct="md",stacked:At=!1,status:Rt,statusPosition:kt="top-left",placeholderInitials:Nt="",className:Bt,theme:Ut={},...zt})=>{const Zt=mergeDeep(useTheme().theme.avatar,Ut),ln=classNames($&&Zt.root.bordered,$&&Zt.root.color[St],Tt&&Zt.root.rounded,At&&Zt.root.stacked,Zt.img.on,Zt.root.size[Ct]),cn={alt:dt,className:classNames(ln,Zt.img.on),"data-testid":"flowbite-avatar-img"};return jsxs("div",{className:classNames(Zt.root.base,Bt),"data-testid":"flowbite-avatar",...zt,children:[jsxs("div",{className:"relative",children:[ft?typeof ft=="string"?jsx("img",{...cn,src:ft}):ft(cn):Nt?jsx("div",{className:classNames(Zt.img.off,Zt.initials.base,Tt&&Zt.root.rounded,At&&Zt.root.stacked,$&&Zt.root.bordered,$&&Zt.root.color[St]),"data-testid":"flowbite-avatar-initials-placeholder",children:jsx("span",{className:classNames(Zt.initials.text),"data-testid":"flowbite-avatar-initials-placeholder-text",children:Nt})}):jsx("div",{className:classNames(ln,Zt.img.off),"data-testid":"flowbite-avatar-img",children:jsx("svg",{className:Zt.img.placeholder,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),Rt&&jsx("span",{"data-testid":"flowbite-avatar-status",className:classNames(Zt.status.base,Zt.status[Rt],Zt.root.statusPosition[kt])})]}),lt&&jsx("div",{children:lt})]})};AvatarComponent.displayName="Avatar";Object.assign(AvatarComponent,{Group:AvatarGroup,Counter:AvatarGroupCounter});const Badge=({children:dt,color:$="info",href:lt,icon:ft,size:St="xs",className:Tt,theme:Ct={},...At})=>{const Rt=mergeDeep(useTheme().theme.badge,Ct),kt=()=>jsxs("span",{className:classNames(Rt.root.base,Rt.root.color[$],Rt.icon[ft?"on":"off"],Rt.root.size[St],Tt),"data-testid":"flowbite-badge",...At,children:[ft&&jsx(ft,{"aria-hidden":!0,className:Rt.icon.size[St],"data-testid":"flowbite-badge-icon"}),dt&&jsx("span",{children:dt})]});return lt?jsx("a",{className:Rt.root.href,href:lt,children:jsx(kt,{})}):jsx(kt,{})},BreadcrumbItem=reactExports.forwardRef(({children:dt,className:$,href:lt,icon:ft,theme:St={},...Tt},Ct)=>{const At=typeof lt<"u",Rt=At?"a":"span",kt=mergeDeep(useTheme().theme.breadcrumb.item,St);return jsxs("li",{className:classNames(kt.base,$),...Tt,children:[jsx(HiOutlineChevronRight,{"aria-hidden":!0,className:kt.chevron,"data-testid":"flowbite-breadcrumb-separator"}),jsxs(Rt,{ref:Ct,className:kt.href[At?"on":"off"],"data-testid":"flowbite-breadcrumb-item",href:lt,children:[ft&&jsx(ft,{"aria-hidden":!0,className:kt.icon}),dt]})]})});BreadcrumbItem.displayName="Breadcrumb.Item";const BreadcrumbComponent=({children:dt,className:$,theme:lt={},...ft})=>{const St=mergeDeep(useTheme().theme.breadcrumb.root,lt);return jsx("nav",{"aria-label":"Breadcrumb",className:classNames(St.base,$),...ft,children:jsx("ol",{className:St.list,children:dt})})};BreadcrumbComponent.displayName="Breadcrumb";Object.assign(BreadcrumbComponent,{Item:BreadcrumbItem});const ButtonGroup=({children:dt,outline:$,pill:lt,className:ft,...St})=>{const Tt=reactExports.useMemo(()=>reactExports.Children.map(dt,(At,Rt)=>reactExports.cloneElement(At,{outline:$,pill:lt,positionInGroup:Rt===0?"start":Rt===dt.length-1?"end":"middle"})),[dt,$,lt]),Ct=useTheme().theme.buttonGroup;return jsx("div",{className:classNames(Ct.base,ft),role:"group",...St,children:Tt})};ButtonGroup.displayName="Button.Group";const ButtonComponent=reactExports.forwardRef(({children:dt,color:$="info",disabled:lt=!1,gradientDuoTone:ft,gradientMonochrome:St,href:Tt,label:Ct,outline:At=!1,pill:Rt=!1,fullSized:kt,positionInGroup:Nt="none",size:Bt="md",className:Ut,...zt},Zt)=>{const ln=typeof Tt<"u",{buttonGroup:cn,button:hn}=useTheme().theme,pn=ln?"a":"button",dn=zt;return jsx(pn,{className:classNames(lt&&hn.disabled,!ft&&!St&&hn.color[$],ft&&!St&&hn.gradientDuoTone[ft],!ft&&St&&hn.gradient[St],cn.position[Nt],At&&(hn.outline.color[$]??hn.outline.color.default),hn.base,hn.pill[Rt?"on":"off"],kt&&hn.fullSized,Ut),disabled:lt,href:Tt,type:ln?void 0:"button",ref:Zt,...dn,children:jsx("span",{className:classNames(hn.inner.base,hn.inner.position[Nt],hn.outline[At?"on":"off"],hn.outline.pill[At&&Rt?"on":"off"],hn.size[Bt],At&&!hn.outline.color[$]&&hn.inner.outline),children:jsxs(Fragment,{children:[typeof dt<"u"&&dt,typeof Ct<"u"&&jsx("span",{className:hn.label,"data-testid":"flowbite-button-label",children:Ct})]})})})});ButtonComponent.displayName="Button";const Button=Object.assign(ButtonComponent,{Group:ButtonGroup});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var n$3=function(dt,$){return(n$3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(lt,ft){lt.__proto__=ft}||function(lt,ft){for(var St in ft)ft.hasOwnProperty(St)&&(lt[St]=ft[St])})(dt,$)},o$3,r$3,i$5=(function(dt){/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){var $={}.hasOwnProperty;function lt(){for(var ft=[],St=0;St<arguments.length;St++){var Tt=arguments[St];if(Tt){var Ct=typeof Tt;if(Ct==="string"||Ct==="number")ft.push(Tt);else if(Array.isArray(Tt)&&Tt.length){var At=lt.apply(null,Tt);At&&ft.push(At)}else if(Ct==="object")for(var Rt in Tt)$.call(Tt,Rt)&&Tt[Rt]&&ft.push(Rt)}}return ft.join(" ")}dt.exports?(lt.default=lt,dt.exports=lt):window.classNames=lt})()}(r$3={path:o$3,exports:{},require:function(dt,$){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}($==null&&r$3.path)}},r$3.exports),r$3.exports);function s$2(dt,$,lt){var ft,St,Tt,Ct,At;function Rt(){var Nt=Date.now()-Ct;Nt<$&&Nt>=0?ft=setTimeout(Rt,$-Nt):(ft=null,lt||(At=dt.apply(Tt,St),Tt=St=null))}$==null&&($=100);var kt=function(){Tt=this,St=arguments,Ct=Date.now();var Nt=lt&&!ft;return ft||(ft=setTimeout(Rt,$)),Nt&&(At=dt.apply(Tt,St),Tt=St=null),At};return kt.clear=function(){ft&&(clearTimeout(ft),ft=null)},kt.flush=function(){ft&&(At=dt.apply(Tt,St),Tt=St=null,clearTimeout(ft),ft=null)},kt}s$2.debounce=s$2;var l$5=s$2;(function(dt,$){$===void 0&&($={});var lt=$.insertAt;if(dt&&typeof document<"u"){var ft=document.head||document.getElementsByTagName("head")[0],St=document.createElement("style");St.type="text/css",lt==="top"&&ft.firstChild?ft.insertBefore(St,ft.firstChild):ft.appendChild(St),St.styleSheet?St.styleSheet.cssText=dt:St.appendChild(document.createTextNode(dt))}})(`.indiana-scroll-container {
  overflow: auto; }
  .indiana-scroll-container--dragging {
    scroll-behavior: auto !important; }
    .indiana-scroll-container--dragging > * {
      pointer-events: none;
      cursor: -webkit-grab;
      cursor: grab; }
  .indiana-scroll-container--hide-scrollbars {
    overflow: hidden;
    overflow: -moz-scrollbars-none;
    -ms-overflow-style: none;
    scrollbar-width: none; }
    .indiana-scroll-container--hide-scrollbars::-webkit-scrollbar {
      display: none !important;
      height: 0 !important;
      width: 0 !important;
      background: transparent !important;
      -webkit-appearance: none !important; }
  .indiana-scroll-container--native-scroll {
    overflow: auto; }

.indiana-dragging {
  cursor: -webkit-grab;
  cursor: grab; }
`);var a$2,c$5=(a$2="indiana-scroll-container",function(dt,$){if(!dt)return a$2;var lt;typeof dt=="string"?lt=dt:$=dt;var ft=a$2;return lt&&(ft+="__"+lt),ft+($?Object.keys($).reduce(function(St,Tt){var Ct=$[Tt];return Ct&&(St+=" "+(typeof Ct=="boolean"?ft+"--"+Tt:ft+"--"+Tt+"_"+Ct)),St},""):"")});(function(dt){function $(lt){var ft=dt.call(this,lt)||this;return ft.onEndScroll=function(){ft.scrolling=!1,!ft.pressed&&ft.started&&ft.processEnd()},ft.onScroll=function(St){var Tt=ft.container.current;Tt.scrollLeft===ft.scrollLeft&&Tt.scrollTop===ft.scrollTop||(ft.scrolling=!0,ft.processScroll(St),ft.onEndScroll())},ft.onTouchStart=function(St){var Tt=ft.props.nativeMobileScroll;if(ft.isDraggable(St.target))if(ft.internal=!0,Tt&&ft.scrolling)ft.pressed=!0;else{var Ct=St.touches[0];ft.processClick(St,Ct.clientX,Ct.clientY),!Tt&&ft.props.stopPropagation&&St.stopPropagation()}},ft.onTouchEnd=function(St){var Tt=ft.props.nativeMobileScroll;ft.pressed&&(!ft.started||ft.scrolling&&Tt?ft.pressed=!1:ft.processEnd(),ft.forceUpdate())},ft.onTouchMove=function(St){var Tt=ft.props.nativeMobileScroll;if(ft.pressed&&(!Tt||!ft.isMobile)){var Ct=St.touches[0];Ct&&ft.processMove(St,Ct.clientX,Ct.clientY),St.preventDefault(),ft.props.stopPropagation&&St.stopPropagation()}},ft.onMouseDown=function(St){ft.isDraggable(St.target)&&ft.isScrollable()&&(ft.internal=!0,ft.props.buttons.indexOf(St.button)!==-1&&(ft.processClick(St,St.clientX,St.clientY),St.preventDefault(),ft.props.stopPropagation&&St.stopPropagation()))},ft.onMouseMove=function(St){ft.pressed&&(ft.processMove(St,St.clientX,St.clientY),St.preventDefault(),ft.props.stopPropagation&&St.stopPropagation())},ft.onMouseUp=function(St){ft.pressed&&(ft.started?ft.processEnd():(ft.internal=!1,ft.pressed=!1,ft.forceUpdate(),ft.props.onClick&&ft.props.onClick(St)),St.preventDefault(),ft.props.stopPropagation&&St.stopPropagation())},ft.container=React.createRef(),ft.onEndScroll=l$5(ft.onEndScroll,300),ft.scrolling=!1,ft.started=!1,ft.pressed=!1,ft.internal=!1,ft.getRef=ft.getRef.bind(ft),ft}return function(lt,ft){function St(){this.constructor=lt}n$3(lt,ft),lt.prototype=ft===null?Object.create(ft):(St.prototype=ft.prototype,new St)}($,dt),$.prototype.componentDidMount=function(){var lt=this.props.nativeMobileScroll,ft=this.container.current;window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd),ft.addEventListener("touchstart",this.onTouchStart,{passive:!1}),ft.addEventListener("mousedown",this.onMouseDown,{passive:!1}),lt&&(this.isMobile=this.isMobileDevice(),this.isMobile&&this.forceUpdate())},$.prototype.componentWillUnmount=function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},$.prototype.getElement=function(){return this.container.current},$.prototype.isMobileDevice=function(){return window.orientation!==void 0||navigator.userAgent.indexOf("IEMobile")!==-1},$.prototype.isDraggable=function(lt){var ft=this.props.ignoreElements;if(ft){var St=lt.closest(ft);return St===null||St.contains(this.getElement())}return!0},$.prototype.isScrollable=function(){var lt=this.container.current;return lt&&(lt.scrollWidth>lt.clientWidth||lt.scrollHeight>lt.clientHeight)},$.prototype.processClick=function(lt,ft,St){var Tt=this.container.current;this.scrollLeft=Tt.scrollLeft,this.scrollTop=Tt.scrollTop,this.clientX=ft,this.clientY=St,this.pressed=!0},$.prototype.processStart=function(lt){lt===void 0&&(lt=!0);var ft=this.props.onStartScroll;this.started=!0,lt&&document.body.classList.add("indiana-dragging"),ft&&ft({external:!this.internal}),this.forceUpdate()},$.prototype.processScroll=function(lt){if(this.started){var ft=this.props.onScroll;ft&&ft({external:!this.internal})}else this.processStart(!1)},$.prototype.processMove=function(lt,ft,St){var Tt=this.props,Ct=Tt.horizontal,At=Tt.vertical,Rt=Tt.activationDistance,kt=Tt.onScroll,Nt=this.container.current;this.started?(Ct&&(Nt.scrollLeft-=ft-this.clientX),At&&(Nt.scrollTop-=St-this.clientY),kt&&kt({external:!this.internal}),this.clientX=ft,this.clientY=St,this.scrollLeft=Nt.scrollLeft,this.scrollTop=Nt.scrollTop):(Ct&&Math.abs(ft-this.clientX)>Rt||At&&Math.abs(St-this.clientY)>Rt)&&(this.clientX=ft,this.clientY=St,this.processStart())},$.prototype.processEnd=function(){var lt=this.props.onEndScroll;this.container.current&&lt&&lt({external:!this.internal}),this.pressed=!1,this.started=!1,this.scrolling=!1,this.internal=!1,document.body.classList.remove("indiana-dragging"),this.forceUpdate()},$.prototype.getRef=function(lt){[this.container,this.props.innerRef].forEach(function(ft){ft&&(typeof ft=="function"?ft(lt):ft.current=lt)})},$.prototype.render=function(){var lt=this.props,ft=lt.children,St=lt.draggingClassName,Tt=lt.className,Ct=lt.style,At=lt.hideScrollbars,Rt=lt.component;return React.createElement(Rt,{className:i$5(Tt,this.pressed&&St,c$5({dragging:this.pressed,"hide-scrollbars":At,"native-scroll":this.isMobile})),style:Ct,ref:this.getRef,onScroll:this.onScroll},ft)},$.defaultProps={nativeMobileScroll:!0,hideScrollbars:!0,activationDistance:10,vertical:!0,horizontal:!0,stopPropagation:!1,style:{},component:"div",buttons:[0]},$})(reactExports.PureComponent);const Checkbox=reactExports.forwardRef(({theme:dt={},className:$,...lt},ft)=>{const St=mergeDeep(useTheme().theme.checkbox,dt);return jsx("input",{ref:ft,className:classNames(St.root.base,$),type:"checkbox",...lt})});Checkbox.displayName="Checkbox";function uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(dt){const $=Math.random()*16|0;return(dt=="x"?$:$&3|8).toString(16)})}function t$1(dt){return dt.split("-")[1]}function e(dt){return dt==="y"?"height":"width"}function n$2(dt){return dt.split("-")[0]}function o$2(dt){return["top","bottom"].includes(n$2(dt))?"x":"y"}function r$2(dt,$,lt){let{reference:ft,floating:St}=dt;const Tt=ft.x+ft.width/2-St.width/2,Ct=ft.y+ft.height/2-St.height/2,At=o$2($),Rt=e(At),kt=ft[Rt]/2-St[Rt]/2,Nt=At==="x";let Bt;switch(n$2($)){case"top":Bt={x:Tt,y:ft.y-St.height};break;case"bottom":Bt={x:Tt,y:ft.y+ft.height};break;case"right":Bt={x:ft.x+ft.width,y:Ct};break;case"left":Bt={x:ft.x-St.width,y:Ct};break;default:Bt={x:ft.x,y:ft.y}}switch(t$1($)){case"start":Bt[At]-=kt*(lt&&Nt?-1:1);break;case"end":Bt[At]+=kt*(lt&&Nt?-1:1)}return Bt}const i$4=async(dt,$,lt)=>{const{placement:ft="bottom",strategy:St="absolute",middleware:Tt=[],platform:Ct}=lt,At=Tt.filter(Boolean),Rt=await(Ct.isRTL==null?void 0:Ct.isRTL($));let kt=await Ct.getElementRects({reference:dt,floating:$,strategy:St}),{x:Nt,y:Bt}=r$2(kt,ft,Rt),Ut=ft,zt={},Zt=0;for(let ln=0;ln<At.length;ln++){const{name:cn,fn:hn}=At[ln],{x:pn,y:dn,data:gn,reset:vn}=await hn({x:Nt,y:Bt,initialPlacement:ft,placement:Ut,strategy:St,middlewareData:zt,rects:kt,platform:Ct,elements:{reference:dt,floating:$}});Nt=pn??Nt,Bt=dn??Bt,zt={...zt,[cn]:{...zt[cn],...gn}},vn&&Zt<=50&&(Zt++,typeof vn=="object"&&(vn.placement&&(Ut=vn.placement),vn.rects&&(kt=vn.rects===!0?await Ct.getElementRects({reference:dt,floating:$,strategy:St}):vn.rects),{x:Nt,y:Bt}=r$2(kt,Ut,Rt)),ln=-1)}return{x:Nt,y:Bt,placement:Ut,strategy:St,middlewareData:zt}};function a$1(dt){return typeof dt!="number"?function($){return{top:0,right:0,bottom:0,left:0,...$}}(dt):{top:dt,right:dt,bottom:dt,left:dt}}function l$4(dt){return{...dt,top:dt.y,left:dt.x,right:dt.x+dt.width,bottom:dt.y+dt.height}}async function s$1(dt,$){var lt;$===void 0&&($={});const{x:ft,y:St,platform:Tt,rects:Ct,elements:At,strategy:Rt}=dt,{boundary:kt="clippingAncestors",rootBoundary:Nt="viewport",elementContext:Bt="floating",altBoundary:Ut=!1,padding:zt=0}=$,Zt=a$1(zt),ln=At[Ut?Bt==="floating"?"reference":"floating":Bt],cn=l$4(await Tt.getClippingRect({element:(lt=await(Tt.isElement==null?void 0:Tt.isElement(ln)))==null||lt?ln:ln.contextElement||await(Tt.getDocumentElement==null?void 0:Tt.getDocumentElement(At.floating)),boundary:kt,rootBoundary:Nt,strategy:Rt})),hn=Bt==="floating"?{...Ct.floating,x:ft,y:St}:Ct.reference,pn=await(Tt.getOffsetParent==null?void 0:Tt.getOffsetParent(At.floating)),dn=await(Tt.isElement==null?void 0:Tt.isElement(pn))&&await(Tt.getScale==null?void 0:Tt.getScale(pn))||{x:1,y:1},gn=l$4(Tt.convertOffsetParentRelativeRectToViewportRelativeRect?await Tt.convertOffsetParentRelativeRectToViewportRelativeRect({rect:hn,offsetParent:pn,strategy:Rt}):hn);return{top:(cn.top-gn.top+Zt.top)/dn.y,bottom:(gn.bottom-cn.bottom+Zt.bottom)/dn.y,left:(cn.left-gn.left+Zt.left)/dn.x,right:(gn.right-cn.right+Zt.right)/dn.x}}const c$4=Math.min,f$4=Math.max;function u$4(dt,$,lt){return f$4(dt,c$4($,lt))}const m$3=dt=>({name:"arrow",options:dt,async fn($){const{element:lt,padding:ft=0}=dt||{},{x:St,y:Tt,placement:Ct,rects:At,platform:Rt}=$;if(lt==null)return{};const kt=a$1(ft),Nt={x:St,y:Tt},Bt=o$2(Ct),Ut=e(Bt),zt=await Rt.getDimensions(lt),Zt=Bt==="y"?"top":"left",ln=Bt==="y"?"bottom":"right",cn=At.reference[Ut]+At.reference[Bt]-Nt[Bt]-At.floating[Ut],hn=Nt[Bt]-At.reference[Bt],pn=await(Rt.getOffsetParent==null?void 0:Rt.getOffsetParent(lt));let dn=pn?Bt==="y"?pn.clientHeight||0:pn.clientWidth||0:0;dn===0&&(dn=At.floating[Ut]);const gn=cn/2-hn/2,vn=kt[Zt],Tn=dn-zt[Ut]-kt[ln],Cn=dn/2-zt[Ut]/2+gn,$n=u$4(vn,Cn,Tn),xn=t$1(Ct)!=null&&Cn!=$n&&At.reference[Ut]/2-(Cn<vn?kt[Zt]:kt[ln])-zt[Ut]/2<0;return{[Bt]:Nt[Bt]-(xn?Cn<vn?vn-Cn:Tn-Cn:0),data:{[Bt]:$n,centerOffset:Cn-$n}}}}),g$2=["top","right","bottom","left"],d$4=g$2.reduce((dt,$)=>dt.concat($,$+"-start",$+"-end"),[]),p$3={left:"right",right:"left",bottom:"top",top:"bottom"};function h$4(dt){return dt.replace(/left|right|bottom|top/g,$=>p$3[$])}function y$4(dt,$,lt){lt===void 0&&(lt=!1);const ft=t$1(dt),St=o$2(dt),Tt=e(St);let Ct=St==="x"?ft===(lt?"end":"start")?"right":"left":ft==="start"?"bottom":"top";return $.reference[Tt]>$.floating[Tt]&&(Ct=h$4(Ct)),{main:Ct,cross:h$4(Ct)}}const x$3={start:"end",end:"start"};function w$2(dt){return dt.replace(/start|end/g,$=>x$3[$])}const v$3=function(dt){return dt===void 0&&(dt={}),{name:"autoPlacement",options:dt,async fn($){var lt,ft,St;const{rects:Tt,middlewareData:Ct,placement:At,platform:Rt,elements:kt}=$,{crossAxis:Nt=!1,alignment:Bt,allowedPlacements:Ut=d$4,autoAlignment:zt=!0,...Zt}=dt,ln=Bt!==void 0||Ut===d$4?function(Rn,Pn,Nn){return(Rn?[...Nn.filter(Wn=>t$1(Wn)===Rn),...Nn.filter(Wn=>t$1(Wn)!==Rn)]:Nn.filter(Wn=>n$2(Wn)===Wn)).filter(Wn=>!Rn||t$1(Wn)===Rn||!!Pn&&w$2(Wn)!==Wn)}(Bt||null,zt,Ut):Ut,cn=await s$1($,Zt),hn=((lt=Ct.autoPlacement)==null?void 0:lt.index)||0,pn=ln[hn];if(pn==null)return{};const{main:dn,cross:gn}=y$4(pn,Tt,await(Rt.isRTL==null?void 0:Rt.isRTL(kt.floating)));if(At!==pn)return{reset:{placement:ln[0]}};const vn=[cn[n$2(pn)],cn[dn],cn[gn]],Tn=[...((ft=Ct.autoPlacement)==null?void 0:ft.overflows)||[],{placement:pn,overflows:vn}],Cn=ln[hn+1];if(Cn)return{data:{index:hn+1,overflows:Tn},reset:{placement:Cn}};const $n=Tn.map(Rn=>{const Pn=t$1(Rn.placement);return[Rn.placement,Pn&&Nt?Rn.overflows.slice(0,2).reduce((Nn,Wn)=>Nn+Wn,0):Rn.overflows[0],Rn.overflows]}).sort((Rn,Pn)=>Rn[1]-Pn[1]),xn=((St=$n.filter(Rn=>Rn[2].slice(0,t$1(Rn[0])?2:3).every(Pn=>Pn<=0))[0])==null?void 0:St[0])||$n[0][0];return xn!==At?{data:{index:hn+1,overflows:Tn},reset:{placement:xn}}:{}}}},b$4=function(dt){return dt===void 0&&(dt={}),{name:"flip",options:dt,async fn($){var lt;const{placement:ft,middlewareData:St,rects:Tt,initialPlacement:Ct,platform:At,elements:Rt}=$,{mainAxis:kt=!0,crossAxis:Nt=!0,fallbackPlacements:Bt,fallbackStrategy:Ut="bestFit",fallbackAxisSideDirection:zt="none",flipAlignment:Zt=!0,...ln}=dt,cn=n$2(ft),hn=n$2(Ct)===Ct,pn=await(At.isRTL==null?void 0:At.isRTL(Rt.floating)),dn=Bt||(hn||!Zt?[h$4(Ct)]:function(Pn){const Nn=h$4(Pn);return[w$2(Pn),Nn,w$2(Nn)]}(Ct));Bt||zt==="none"||dn.push(...function(Pn,Nn,Wn,zn){const Yn=t$1(Pn);let Qn=function(nr,Ln,Un){const Vn=["left","right"],sr=["right","left"],In=["top","bottom"],ir=["bottom","top"];switch(nr){case"top":case"bottom":return Un?Ln?sr:Vn:Ln?Vn:sr;case"left":case"right":return Ln?In:ir;default:return[]}}(n$2(Pn),Wn==="start",zn);return Yn&&(Qn=Qn.map(nr=>nr+"-"+Yn),Nn&&(Qn=Qn.concat(Qn.map(w$2)))),Qn}(Ct,Zt,zt,pn));const gn=[Ct,...dn],vn=await s$1($,ln),Tn=[];let Cn=((lt=St.flip)==null?void 0:lt.overflows)||[];if(kt&&Tn.push(vn[cn]),Nt){const{main:Pn,cross:Nn}=y$4(ft,Tt,pn);Tn.push(vn[Pn],vn[Nn])}if(Cn=[...Cn,{placement:ft,overflows:Tn}],!Tn.every(Pn=>Pn<=0)){var $n,xn;const Pn=((($n=St.flip)==null?void 0:$n.index)||0)+1,Nn=gn[Pn];if(Nn)return{data:{index:Pn,overflows:Cn},reset:{placement:Nn}};let Wn=(xn=Cn.filter(zn=>zn.overflows[0]<=0).sort((zn,Yn)=>zn.overflows[1]-Yn.overflows[1])[0])==null?void 0:xn.placement;if(!Wn)switch(Ut){case"bestFit":{var Rn;const zn=(Rn=Cn.map(Yn=>[Yn.placement,Yn.overflows.filter(Qn=>Qn>0).reduce((Qn,nr)=>Qn+nr,0)]).sort((Yn,Qn)=>Yn[1]-Qn[1])[0])==null?void 0:Rn[0];zn&&(Wn=zn);break}case"initialPlacement":Wn=Ct}if(ft!==Wn)return{reset:{placement:Wn}}}return{}}}},O$2=function(dt){return dt===void 0&&(dt=0),{name:"offset",options:dt,async fn($){const{x:lt,y:ft}=$,St=await async function(Tt,Ct){const{placement:At,platform:Rt,elements:kt}=Tt,Nt=await(Rt.isRTL==null?void 0:Rt.isRTL(kt.floating)),Bt=n$2(At),Ut=t$1(At),zt=o$2(At)==="x",Zt=["left","top"].includes(Bt)?-1:1,ln=Nt&&zt?-1:1,cn=typeof Ct=="function"?Ct(Tt):Ct;let{mainAxis:hn,crossAxis:pn,alignmentAxis:dn}=typeof cn=="number"?{mainAxis:cn,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...cn};return Ut&&typeof dn=="number"&&(pn=Ut==="end"?-1*dn:dn),zt?{x:pn*ln,y:hn*Zt}:{x:hn*Zt,y:pn*ln}}($,dt);return{x:lt+St.x,y:ft+St.y,data:St}}}};function D$3(dt){return dt==="x"?"y":"x"}const E$4=function(dt){return dt===void 0&&(dt={}),{name:"shift",options:dt,async fn($){const{x:lt,y:ft,placement:St}=$,{mainAxis:Tt=!0,crossAxis:Ct=!1,limiter:At={fn:cn=>{let{x:hn,y:pn}=cn;return{x:hn,y:pn}}},...Rt}=dt,kt={x:lt,y:ft},Nt=await s$1($,Rt),Bt=o$2(n$2(St)),Ut=D$3(Bt);let zt=kt[Bt],Zt=kt[Ut];if(Tt){const cn=Bt==="y"?"bottom":"right";zt=u$4(zt+Nt[Bt==="y"?"top":"left"],zt,zt-Nt[cn])}if(Ct){const cn=Ut==="y"?"bottom":"right";Zt=u$4(Zt+Nt[Ut==="y"?"top":"left"],Zt,Zt-Nt[cn])}const ln=At.fn({...$,[Bt]:zt,[Ut]:Zt});return{...ln,data:{x:ln.x-lt,y:ln.y-ft}}}}};function n$1(dt){var $;return(($=dt.ownerDocument)==null?void 0:$.defaultView)||window}function o$1(dt){return n$1(dt).getComputedStyle(dt)}const i$3=Math.min,r$1=Math.max,l$3=Math.round;function c$3(dt){const $=o$1(dt);let lt=parseFloat($.width),ft=parseFloat($.height);const St=dt.offsetWidth,Tt=dt.offsetHeight,Ct=l$3(lt)!==St||l$3(ft)!==Tt;return Ct&&(lt=St,ft=Tt),{width:lt,height:ft,fallback:Ct}}function s(dt){return h$3(dt)?(dt.nodeName||"").toLowerCase():""}let f$3;function u$3(){if(f$3)return f$3;const dt=navigator.userAgentData;return dt&&Array.isArray(dt.brands)?(f$3=dt.brands.map($=>$.brand+"/"+$.version).join(" "),f$3):navigator.userAgent}function a(dt){return dt instanceof n$1(dt).HTMLElement}function d$3(dt){return dt instanceof n$1(dt).Element}function h$3(dt){return dt instanceof n$1(dt).Node}function p$2(dt){return typeof ShadowRoot>"u"?!1:dt instanceof n$1(dt).ShadowRoot||dt instanceof ShadowRoot}function g$1(dt){const{overflow:$,overflowX:lt,overflowY:ft,display:St}=o$1(dt);return/auto|scroll|overlay|hidden|clip/.test($+ft+lt)&&!["inline","contents"].includes(St)}function m$2(dt){return["table","td","th"].includes(s(dt))}function y$3(dt){const $=/firefox/i.test(u$3()),lt=o$1(dt),ft=lt.backdropFilter||lt.WebkitBackdropFilter;return lt.transform!=="none"||lt.perspective!=="none"||!!ft&&ft!=="none"||$&&lt.willChange==="filter"||$&&!!lt.filter&&lt.filter!=="none"||["transform","perspective"].some(St=>lt.willChange.includes(St))||["paint","layout","strict","content"].some(St=>{const Tt=lt.contain;return Tt!=null&&Tt.includes(St)})}function x$2(){return/^((?!chrome|android).)*safari/i.test(u$3())}function w$1(dt){return["html","body","#document"].includes(s(dt))}function v$2(dt){return d$3(dt)?dt:dt.contextElement}const b$3={x:1,y:1};function L$1(dt){const $=v$2(dt);if(!a($))return b$3;const lt=$.getBoundingClientRect(),{width:ft,height:St,fallback:Tt}=c$3($);let Ct=(Tt?l$3(lt.width):lt.width)/ft,At=(Tt?l$3(lt.height):lt.height)/St;return Ct&&Number.isFinite(Ct)||(Ct=1),At&&Number.isFinite(At)||(At=1),{x:Ct,y:At}}function E$3(dt,$,lt,ft){var St,Tt;$===void 0&&($=!1),lt===void 0&&(lt=!1);const Ct=dt.getBoundingClientRect(),At=v$2(dt);let Rt=b$3;$&&(ft?d$3(ft)&&(Rt=L$1(ft)):Rt=L$1(dt));const kt=At?n$1(At):window,Nt=x$2()&&lt;let Bt=(Ct.left+(Nt&&((St=kt.visualViewport)==null?void 0:St.offsetLeft)||0))/Rt.x,Ut=(Ct.top+(Nt&&((Tt=kt.visualViewport)==null?void 0:Tt.offsetTop)||0))/Rt.y,zt=Ct.width/Rt.x,Zt=Ct.height/Rt.y;if(At){const ln=n$1(At),cn=ft&&d$3(ft)?n$1(ft):ft;let hn=ln.frameElement;for(;hn&&ft&&cn!==ln;){const pn=L$1(hn),dn=hn.getBoundingClientRect(),gn=getComputedStyle(hn);dn.x+=(hn.clientLeft+parseFloat(gn.paddingLeft))*pn.x,dn.y+=(hn.clientTop+parseFloat(gn.paddingTop))*pn.y,Bt*=pn.x,Ut*=pn.y,zt*=pn.x,Zt*=pn.y,Bt+=dn.x,Ut+=dn.y,hn=n$1(hn).frameElement}}return{width:zt,height:Zt,top:Ut,right:Bt+zt,bottom:Ut+Zt,left:Bt,x:Bt,y:Ut}}function R$1(dt){return((h$3(dt)?dt.ownerDocument:dt.document)||window.document).documentElement}function T$1(dt){return d$3(dt)?{scrollLeft:dt.scrollLeft,scrollTop:dt.scrollTop}:{scrollLeft:dt.pageXOffset,scrollTop:dt.pageYOffset}}function C$2(dt){return E$3(R$1(dt)).left+T$1(dt).scrollLeft}function F$1(dt){if(s(dt)==="html")return dt;const $=dt.assignedSlot||dt.parentNode||p$2(dt)&&dt.host||R$1(dt);return p$2($)?$.host:$}function W$2(dt){const $=F$1(dt);return w$1($)?$.ownerDocument.body:a($)&&g$1($)?$:W$2($)}function D$2(dt,$){var lt;$===void 0&&($=[]);const ft=W$2(dt),St=ft===((lt=dt.ownerDocument)==null?void 0:lt.body),Tt=n$1(ft);return St?$.concat(Tt,Tt.visualViewport||[],g$1(ft)?ft:[]):$.concat(ft,D$2(ft))}function S$1(dt,$,lt){let ft;if($==="viewport")ft=function(Ct,At){const Rt=n$1(Ct),kt=R$1(Ct),Nt=Rt.visualViewport;let Bt=kt.clientWidth,Ut=kt.clientHeight,zt=0,Zt=0;if(Nt){Bt=Nt.width,Ut=Nt.height;const ln=x$2();(!ln||ln&&At==="fixed")&&(zt=Nt.offsetLeft,Zt=Nt.offsetTop)}return{width:Bt,height:Ut,x:zt,y:Zt}}(dt,lt);else if($==="document")ft=function(Ct){const At=R$1(Ct),Rt=T$1(Ct),kt=Ct.ownerDocument.body,Nt=r$1(At.scrollWidth,At.clientWidth,kt.scrollWidth,kt.clientWidth),Bt=r$1(At.scrollHeight,At.clientHeight,kt.scrollHeight,kt.clientHeight);let Ut=-Rt.scrollLeft+C$2(Ct);const zt=-Rt.scrollTop;return o$1(kt).direction==="rtl"&&(Ut+=r$1(At.clientWidth,kt.clientWidth)-Nt),{width:Nt,height:Bt,x:Ut,y:zt}}(R$1(dt));else if(d$3($))ft=function(Ct,At){const Rt=E$3(Ct,!0,At==="fixed"),kt=Rt.top+Ct.clientTop,Nt=Rt.left+Ct.clientLeft,Bt=a(Ct)?L$1(Ct):{x:1,y:1};return{width:Ct.clientWidth*Bt.x,height:Ct.clientHeight*Bt.y,x:Nt*Bt.x,y:kt*Bt.y}}($,lt);else{const Ct={...$};if(x$2()){var St,Tt;const At=n$1(dt);Ct.x-=((St=At.visualViewport)==null?void 0:St.offsetLeft)||0,Ct.y-=((Tt=At.visualViewport)==null?void 0:Tt.offsetTop)||0}ft=Ct}return l$4(ft)}function A$1(dt,$){return a(dt)&&o$1(dt).position!=="fixed"?$?$(dt):dt.offsetParent:null}function H$2(dt,$){const lt=n$1(dt);let ft=A$1(dt,$);for(;ft&&m$2(ft)&&o$1(ft).position==="static";)ft=A$1(ft,$);return ft&&(s(ft)==="html"||s(ft)==="body"&&o$1(ft).position==="static"&&!y$3(ft))?lt:ft||function(St){let Tt=F$1(St);for(;a(Tt)&&!w$1(Tt);){if(y$3(Tt))return Tt;Tt=F$1(Tt)}return null}(dt)||lt}function V$2(dt,$,lt){const ft=a($),St=R$1($),Tt=E$3(dt,!0,lt==="fixed",$);let Ct={scrollLeft:0,scrollTop:0};const At={x:0,y:0};if(ft||!ft&&lt!=="fixed")if((s($)!=="body"||g$1(St))&&(Ct=T$1($)),a($)){const Rt=E$3($,!0);At.x=Rt.x+$.clientLeft,At.y=Rt.y+$.clientTop}else St&&(At.x=C$2(St));return{x:Tt.left+Ct.scrollLeft-At.x,y:Tt.top+Ct.scrollTop-At.y,width:Tt.width,height:Tt.height}}const O$1={getClippingRect:function(dt){let{element:$,boundary:lt,rootBoundary:ft,strategy:St}=dt;const Tt=lt==="clippingAncestors"?function(kt,Nt){const Bt=Nt.get(kt);if(Bt)return Bt;let Ut=D$2(kt).filter(cn=>d$3(cn)&&s(cn)!=="body"),zt=null;const Zt=o$1(kt).position==="fixed";let ln=Zt?F$1(kt):kt;for(;d$3(ln)&&!w$1(ln);){const cn=o$1(ln),hn=y$3(ln);cn.position==="fixed"?zt=null:(Zt?hn||zt:hn||cn.position!=="static"||!zt||!["absolute","fixed"].includes(zt.position))?zt=cn:Ut=Ut.filter(pn=>pn!==ln),ln=F$1(ln)}return Nt.set(kt,Ut),Ut}($,this._c):[].concat(lt),Ct=[...Tt,ft],At=Ct[0],Rt=Ct.reduce((kt,Nt)=>{const Bt=S$1($,Nt,St);return kt.top=r$1(Bt.top,kt.top),kt.right=i$3(Bt.right,kt.right),kt.bottom=i$3(Bt.bottom,kt.bottom),kt.left=r$1(Bt.left,kt.left),kt},S$1($,At,St));return{width:Rt.right-Rt.left,height:Rt.bottom-Rt.top,x:Rt.left,y:Rt.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(dt){let{rect:$,offsetParent:lt,strategy:ft}=dt;const St=a(lt),Tt=R$1(lt);if(lt===Tt)return $;let Ct={scrollLeft:0,scrollTop:0},At={x:1,y:1};const Rt={x:0,y:0};if((St||!St&&ft!=="fixed")&&((s(lt)!=="body"||g$1(Tt))&&(Ct=T$1(lt)),a(lt))){const kt=E$3(lt);At=L$1(lt),Rt.x=kt.x+lt.clientLeft,Rt.y=kt.y+lt.clientTop}return{width:$.width*At.x,height:$.height*At.y,x:$.x*At.x-Ct.scrollLeft*At.x+Rt.x,y:$.y*At.y-Ct.scrollTop*At.y+Rt.y}},isElement:d$3,getDimensions:function(dt){return a(dt)?c$3(dt):dt.getBoundingClientRect()},getOffsetParent:H$2,getDocumentElement:R$1,getScale:L$1,async getElementRects(dt){let{reference:$,floating:lt,strategy:ft}=dt;const St=this.getOffsetParent||H$2,Tt=this.getDimensions;return{reference:V$2($,await St(lt),ft),floating:{x:0,y:0,...await Tt(lt)}}},getClientRects:dt=>Array.from(dt.getClientRects()),isRTL:dt=>o$1(dt).direction==="rtl"};function P$1(dt,$,lt,ft){ft===void 0&&(ft={});const{ancestorScroll:St=!0,ancestorResize:Tt=!0,elementResize:Ct=!0,animationFrame:At=!1}=ft,Rt=St&&!At,kt=Rt||Tt?[...d$3(dt)?D$2(dt):dt.contextElement?D$2(dt.contextElement):[],...D$2($)]:[];kt.forEach(zt=>{Rt&&zt.addEventListener("scroll",lt,{passive:!0}),Tt&&zt.addEventListener("resize",lt)});let Nt,Bt=null;if(Ct){let zt=!0;Bt=new ResizeObserver(()=>{zt||lt(),zt=!1}),d$3(dt)&&!At&&Bt.observe(dt),d$3(dt)||!dt.contextElement||At||Bt.observe(dt.contextElement),Bt.observe($)}let Ut=At?E$3(dt):null;return At&&function zt(){const Zt=E$3(dt);!Ut||Zt.x===Ut.x&&Zt.y===Ut.y&&Zt.width===Ut.width&&Zt.height===Ut.height||lt(),Ut=Zt,Nt=requestAnimationFrame(zt)}(),lt(),()=>{var zt;kt.forEach(Zt=>{Rt&&Zt.removeEventListener("scroll",lt),Tt&&Zt.removeEventListener("resize",lt)}),(zt=Bt)==null||zt.disconnect(),Bt=null,At&&cancelAnimationFrame(Nt)}}const z$2=(dt,$,lt)=>{const ft=new Map,St={platform:O$1,...lt},Tt={...St.platform,_c:ft};return i$4(dt,$,{...St,platform:Tt})},arrow=dt=>{const{element:$,padding:lt}=dt;function ft(St){return Object.prototype.hasOwnProperty.call(St,"current")}return{name:"arrow",options:dt,fn(St){return ft($)?$.current!=null?m$3({element:$.current,padding:lt}).fn(St):{}:$?m$3({element:$,padding:lt}).fn(St):{}}}};var index$2=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function deepEqual(dt,$){if(dt===$)return!0;if(typeof dt!=typeof $)return!1;if(typeof dt=="function"&&dt.toString()===$.toString())return!0;let lt,ft,St;if(dt&&$&&typeof dt=="object"){if(Array.isArray(dt)){if(lt=dt.length,lt!=$.length)return!1;for(ft=lt;ft--!==0;)if(!deepEqual(dt[ft],$[ft]))return!1;return!0}if(St=Object.keys(dt),lt=St.length,lt!==Object.keys($).length)return!1;for(ft=lt;ft--!==0;)if(!Object.prototype.hasOwnProperty.call($,St[ft]))return!1;for(ft=lt;ft--!==0;){const Tt=St[ft];if(!(Tt==="_owner"&&dt.$$typeof)&&!deepEqual(dt[Tt],$[Tt]))return!1}return!0}return dt!==dt&&$!==$}function useLatestRef$1(dt){const $=reactExports.useRef(dt);return index$2(()=>{$.current=dt}),$}function useFloating$1(dt){dt===void 0&&(dt={});const{placement:$="bottom",strategy:lt="absolute",middleware:ft=[],platform:St,whileElementsMounted:Tt,open:Ct}=dt,[At,Rt]=reactExports.useState({x:null,y:null,strategy:lt,placement:$,middlewareData:{},isPositioned:!1}),[kt,Nt]=reactExports.useState(ft);deepEqual(kt,ft)||Nt(ft);const Bt=reactExports.useRef(null),Ut=reactExports.useRef(null),zt=reactExports.useRef(At),Zt=useLatestRef$1(Tt),ln=useLatestRef$1(St),[cn,hn]=reactExports.useState(null),[pn,dn]=reactExports.useState(null),gn=reactExports.useCallback(Rn=>{Bt.current!==Rn&&(Bt.current=Rn,hn(Rn))},[]),vn=reactExports.useCallback(Rn=>{Ut.current!==Rn&&(Ut.current=Rn,dn(Rn))},[]),Tn=reactExports.useCallback(()=>{if(!Bt.current||!Ut.current)return;const Rn={placement:$,strategy:lt,middleware:kt};ln.current&&(Rn.platform=ln.current),z$2(Bt.current,Ut.current,Rn).then(Pn=>{const Nn={...Pn,isPositioned:!0};Cn.current&&!deepEqual(zt.current,Nn)&&(zt.current=Nn,reactDomExports.flushSync(()=>{Rt(Nn)}))})},[kt,$,lt,ln]);index$2(()=>{Ct===!1&&zt.current.isPositioned&&(zt.current.isPositioned=!1,Rt(Rn=>({...Rn,isPositioned:!1})))},[Ct]);const Cn=reactExports.useRef(!1);index$2(()=>(Cn.current=!0,()=>{Cn.current=!1}),[]),index$2(()=>{if(cn&&pn){if(Zt.current)return Zt.current(cn,pn,Tn);Tn()}},[cn,pn,Tn,Zt]);const $n=reactExports.useMemo(()=>({reference:Bt,floating:Ut,setReference:gn,setFloating:vn}),[gn,vn]),xn=reactExports.useMemo(()=>({reference:cn,floating:pn}),[cn,pn]);return reactExports.useMemo(()=>({...At,update:Tn,refs:$n,elements:xn,reference:gn,floating:vn}),[At,Tn,$n,xn,gn,vn])}var index$1=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;let serverHandoffComplete=!1,count=0;const genId=()=>"floating-ui-"+count++;function useFloatingId(){const[dt,$]=reactExports.useState(()=>serverHandoffComplete?genId():void 0);return index$1(()=>{dt==null&&$(genId())},[]),reactExports.useEffect(()=>{serverHandoffComplete||(serverHandoffComplete=!0)},[]),dt}const useReactId=React$1["useId".toString()],useId=useReactId||useFloatingId;function createPubSub(){const dt=new Map;return{emit($,lt){var ft;(ft=dt.get($))==null||ft.forEach(St=>St(lt))},on($,lt){dt.set($,[...dt.get($)||[],lt])},off($,lt){dt.set($,(dt.get($)||[]).filter(ft=>ft!==lt))}}}const FloatingTreeContext=reactExports.createContext(null),useFloatingTree=()=>reactExports.useContext(FloatingTreeContext);function getDocument(dt){return(dt==null?void 0:dt.ownerDocument)||document}function getWindow(dt){return getDocument(dt).defaultView||window}function isElement(dt){return dt?dt instanceof getWindow(dt).Element:!1}function isHTMLElement(dt){return dt?dt instanceof getWindow(dt).HTMLElement:!1}function isShadowRoot(dt){if(typeof ShadowRoot>"u")return!1;const $=getWindow(dt).ShadowRoot;return dt instanceof $||dt instanceof ShadowRoot}function isSafari(){return/apple/i.test(navigator.vendor)}function isMouseLikePointerType(dt,$){const lt=["mouse","pen"];return $||lt.push("",void 0),lt.includes(dt)}function contains$1(dt,$){if(!dt||!$)return!1;const lt=$.getRootNode&&$.getRootNode();if(dt.contains($))return!0;if(lt&&isShadowRoot(lt)){let ft=$;do{if(ft&&dt===ft)return!0;ft=ft.parentNode||ft.host}while(ft)}return!1}function getChildren$1(dt,$){let lt=dt.filter(St=>{var Tt;return St.parentId===$&&((Tt=St.context)==null?void 0:Tt.open)})||[],ft=lt;for(;ft.length;)ft=dt.filter(St=>{var Tt;return(Tt=ft)==null?void 0:Tt.some(Ct=>{var At;return St.parentId===Ct.id&&((At=St.context)==null?void 0:At.open)})})||[],lt=lt.concat(ft);return lt}function getTarget(dt){return"composedPath"in dt?dt.composedPath()[0]:dt.target}function isPointInPolygon(dt,$){const[lt,ft]=dt;let St=!1;const Tt=$.length;for(let Ct=0,At=Tt-1;Ct<Tt;At=Ct++){const[Rt,kt]=$[Ct]||[0,0],[Nt,Bt]=$[At]||[0,0];kt>=ft!=Bt>=ft&&lt<=(Nt-Rt)*(ft-kt)/(Bt-kt)+Rt&&(St=!St)}return St}const svgNs="http://www.w3.org/2000/svg";function createPolygonElement(dt,$,lt){var ft,St;const Tt=isSafari(),Ct=$.defaultView||window,At=$.createElementNS(svgNs,"svg");Object.assign(At.style,{position:"fixed",left:(Tt&&((ft=Ct.visualViewport)==null?void 0:ft.offsetLeft)||0)+"px",top:(Tt&&((St=Ct.visualViewport)==null?void 0:St.offsetTop)||0)+"px",width:"100%",height:"100%",pointerEvents:"none",zIndex:2147483647}),At.setAttribute("data-type",lt?"rect":"triangle");const Rt=$.createElementNS(svgNs,"polygon");return Rt.setAttribute("points",dt.map(kt=>{let[Nt,Bt]=kt;return Nt+","+Bt}).join(" ")),Object.assign(Rt.style,{pointerEvents:"auto",fill:"transparent",opacity:0}),At.appendChild(Rt),At}function destroyPolygon(dt){dt.current&&(dt.current.remove(),dt.current=null)}function safePolygon(dt){let{restMs:$=0,buffer:lt=.5,blockPointerEvents:ft=!0}=dt===void 0?{}:dt,St,Tt=!1,Ct=!1;return Rt=>{let{x:kt,y:Nt,placement:Bt,refs:Ut,onClose:zt,nodeId:Zt,tree:ln,polygonRef:cn}=Rt;return function(pn){var dn;function gn(){destroyPolygon(cn),clearTimeout(St),zt()}if(clearTimeout(St),!Ut.domReference.current||!Ut.floating.current||Bt==null||kt==null||Nt==null)return;const{clientX:vn,clientY:Tn}=pn,Cn=getTarget(pn),$n=pn.type==="mouseleave",xn=contains$1(Ut.domReference.current,Cn),Rn=contains$1(Ut.floating.current,Cn);if(!$n&&xn){destroyPolygon(cn);return}if(!$n&&(xn||Tt&&contains$1(cn.current,Cn))||$n&&isElement(pn.relatedTarget)&&contains$1(Ut.floating.current,pn.relatedTarget)||ln&&getChildren$1(ln.nodesRef.current,Zt).some(Un=>{let{context:Vn}=Un;return Vn==null?void 0:Vn.open}))return;if(Rn&&(Ct=!0),Rn&&!$n&&((dn=cn.current)==null?void 0:dn.dataset.type)!=="rect"){destroyPolygon(cn);return}const Pn=Ut.domReference.current.getBoundingClientRect(),Nn=Ut.floating.current.getBoundingClientRect(),Wn=Bt.split("-")[0],zn=kt>Nn.right-Nn.width/2,Yn=Nt>Nn.bottom-Nn.height/2;if(Wn==="top"&&Nt>=Pn.bottom-1||Wn==="bottom"&&Nt<=Pn.top+1||Wn==="left"&&kt>=Pn.right-1||Wn==="right"&&kt<=Pn.left+1)return gn();let Qn=[];switch(Wn){case"top":Qn=[[Nn.left,Pn.top+1],[Nn.left,Nn.bottom-1],[Nn.right,Nn.bottom-1],[Nn.right,Pn.top+1]],Tt=vn>=Nn.left&&vn<=Nn.right&&Tn>=Nn.top&&Tn<=Pn.top+1;break;case"bottom":Qn=[[Nn.left,Nn.top+1],[Nn.left,Pn.bottom-1],[Nn.right,Pn.bottom-1],[Nn.right,Nn.top+1]],Tt=vn>=Nn.left&&vn<=Nn.right&&Tn>=Pn.bottom-1&&Tn<=Nn.bottom;break;case"left":Qn=[[Nn.right-1,Nn.bottom],[Nn.right-1,Nn.top],[Pn.left+1,Nn.top],[Pn.left+1,Nn.bottom]],Tt=vn>=Nn.left&&vn<=Pn.left+1&&Tn>=Nn.top&&Tn<=Nn.bottom;break;case"right":Qn=[[Pn.right-1,Nn.bottom],[Pn.right-1,Nn.top],[Nn.left+1,Nn.top],[Nn.left+1,Nn.bottom]],Tt=vn>=Pn.right-1&&vn<=Nn.right&&Tn>=Nn.top&&Tn<=Nn.bottom;break}function nr(Un){let[Vn,sr]=Un;const In=Nn.width>Pn.width,ir=Nn.height>Pn.height;switch(Wn){case"top":{const pr=[In?Vn+lt/2:zn?Vn+lt*4:Vn-lt*4,sr+lt+1],Jn=[In?Vn-lt/2:zn?Vn+lt*4:Vn-lt*4,sr+lt+1],Pr=[[Nn.left,zn||In?Nn.bottom-lt:Nn.top],[Nn.right,zn?In?Nn.bottom-lt:Nn.top:Nn.bottom-lt]];return[pr,Jn,...Pr]}case"bottom":{const pr=[In?Vn+lt/2:zn?Vn+lt*4:Vn-lt*4,sr-lt],Jn=[In?Vn-lt/2:zn?Vn+lt*4:Vn-lt*4,sr-lt],Pr=[[Nn.left,zn||In?Nn.top+lt:Nn.bottom],[Nn.right,zn?In?Nn.top+lt:Nn.bottom:Nn.top+lt]];return[pr,Jn,...Pr]}case"left":{const pr=[Vn+lt+1,ir?sr+lt/2:Yn?sr+lt*4:sr-lt*4],Jn=[Vn+lt+1,ir?sr-lt/2:Yn?sr+lt*4:sr-lt*4];return[...[[Yn||ir?Nn.right-lt:Nn.left,Nn.top],[Yn?ir?Nn.right-lt:Nn.left:Nn.right-lt,Nn.bottom]],pr,Jn]}case"right":{const pr=[Vn-lt,ir?sr+lt/2:Yn?sr+lt*4:sr-lt*4],Jn=[Vn-lt,ir?sr-lt/2:Yn?sr+lt*4:sr-lt*4],Pr=[[Yn||ir?Nn.left+lt:Nn.right,Nn.top],[Yn?ir?Nn.left+lt:Nn.right:Nn.left+lt,Nn.bottom]];return[pr,Jn,...Pr]}}}const Ln=Tt?Qn:nr([kt,Nt]);if(!cn.current&&ft&&$n){const Un=getDocument(Ut.floating.current);cn.current=createPolygonElement(Ln,Un,Tt),Un.body.appendChild(cn.current)}Tt||(isPointInPolygon([vn,Tn],Ln)?$&&!Ct&&(St=setTimeout(zt,$)):gn())}}}function useLatestRef(dt){const $=reactExports.useRef(dt);return index$1(()=>{$.current=dt}),$}function getDelay(dt,$,lt){return lt&&!isMouseLikePointerType(lt)?0:typeof dt=="number"?dt:dt==null?void 0:dt[$]}const useHover=function(dt,$){let{enabled:lt=!0,delay:ft=0,handleClose:St=null,mouseOnly:Tt=!1,restMs:Ct=0,move:At=!0}=$===void 0?{}:$;const{open:Rt,onOpenChange:kt,dataRef:Nt,events:Bt,refs:Ut,_:zt}=dt,Zt=useFloatingTree(),ln=useLatestRef(St),cn=useLatestRef(ft),hn=reactExports.useRef(),pn=reactExports.useRef(),dn=reactExports.useRef(),gn=reactExports.useRef(),vn=reactExports.useRef(!0),Tn=reactExports.useRef(null),Cn=reactExports.useCallback(()=>{var Rn;const Pn=(Rn=Nt.current.openEvent)==null?void 0:Rn.type;return(Pn==null?void 0:Pn.includes("mouse"))&&Pn!=="mousedown"},[Nt]);reactExports.useEffect(()=>{if(!lt)return;function Rn(){clearTimeout(pn.current),clearTimeout(gn.current),vn.current=!0}return Bt.on("dismiss",Rn),()=>{Bt.off("dismiss",Rn)}},[lt,Bt,Ut]),reactExports.useEffect(()=>{if(!lt||!ln.current||!Rt)return;function Rn(){Cn()&&kt(!1)}const Pn=getDocument(Ut.floating.current).documentElement;return Pn.addEventListener("mouseleave",Rn),()=>{Pn.removeEventListener("mouseleave",Rn)}},[Ut,Rt,kt,lt,ln,Nt,Cn]);const $n=reactExports.useCallback(function(Rn){Rn===void 0&&(Rn=!0);const Pn=getDelay(cn.current,"close",hn.current);Pn&&!dn.current?(clearTimeout(pn.current),pn.current=setTimeout(()=>kt(!1),Pn)):Rn&&(clearTimeout(pn.current),kt(!1))},[cn,kt]),xn=reactExports.useCallback(()=>{dn.current&&(getDocument(Ut.floating.current).removeEventListener("mousemove",dn.current),dn.current=void 0)},[Ut]);return reactExports.useEffect(()=>{if(!lt)return;function Rn(){return Nt.current.openEvent?["click","mousedown"].includes(Nt.current.openEvent.type):!1}function Pn(Qn){if(clearTimeout(pn.current),vn.current=!1,Tt&&!isMouseLikePointerType(hn.current)||Ct>0&&getDelay(cn.current,"open")===0)return;Nt.current.openEvent=Qn;const nr=getDelay(cn.current,"open",hn.current);nr?pn.current=setTimeout(()=>{kt(!0)},nr):kt(!0)}function Nn(Qn){if(Rn())return;const nr=getDocument(Ut.floating.current);if(clearTimeout(gn.current),ln.current){clearTimeout(pn.current),dn.current&&nr.removeEventListener("mousemove",dn.current),dn.current=ln.current({...dt,tree:Zt,polygonRef:Tn,x:Qn.clientX,y:Qn.clientY,onClose(){xn(),$n()}}),nr.addEventListener("mousemove",dn.current);return}$n()}function Wn(Qn){Rn()||ln.current==null||ln.current({...dt,tree:Zt,polygonRef:Tn,x:Qn.clientX,y:Qn.clientY,onClose(){xn(),$n()}})(Qn)}const zn=Ut.floating.current,Yn=Ut.domReference.current;if(isElement(Yn))return Rt&&Yn.addEventListener("mouseleave",Wn),zn==null||zn.addEventListener("mouseleave",Wn),At&&Yn.addEventListener("mousemove",Pn,{once:!0}),Yn.addEventListener("mouseenter",Pn),Yn.addEventListener("mouseleave",Nn),()=>{Rt&&Yn.removeEventListener("mouseleave",Wn),zn==null||zn.removeEventListener("mouseleave",Wn),At&&Yn.removeEventListener("mousemove",Pn),Yn.removeEventListener("mouseenter",Pn),Yn.removeEventListener("mouseleave",Nn)}},[zt.domReference,lt,dt,Tt,Ct,At,$n,xn,kt,Rt,Zt,Ut,cn,ln,Nt]),index$1(()=>{Rt||(hn.current=void 0,xn(),destroyPolygon(Tn))},[Rt,xn]),reactExports.useEffect(()=>()=>{xn(),clearTimeout(pn.current),clearTimeout(gn.current),destroyPolygon(Tn)},[lt,xn]),reactExports.useMemo(()=>{if(!lt)return{};function Rn(Pn){hn.current=Pn.pointerType}return{reference:{onPointerDown:Rn,onPointerEnter:Rn,onMouseMove(){Rt||Ct===0||(clearTimeout(gn.current),gn.current=setTimeout(()=>{vn.current||kt(!0)},Ct))}},floating:{onMouseEnter(){clearTimeout(pn.current)},onMouseLeave(){Bt.emit("dismiss",{type:"mouseLeave",data:{returnFocus:!1}}),$n(!1)}}}},[Bt,lt,Ct,Rt,kt,$n])};function activeElement$1(dt){let $=dt.activeElement;for(;((lt=$)==null||(ft=lt.shadowRoot)==null?void 0:ft.activeElement)!=null;){var lt,ft;$=$.shadowRoot.activeElement}return $}const TYPEABLE_SELECTOR="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function isTypeableElement(dt){return isHTMLElement(dt)&&dt.matches(TYPEABLE_SELECTOR)}const useInsertionEffect=React$1["useInsertionEffect".toString()],useSafeInsertionEffect=useInsertionEffect||(dt=>dt());function useEvent(dt){const $=reactExports.useRef(()=>{});return useSafeInsertionEffect(()=>{$.current=dt}),reactExports.useCallback(function(){for(var lt=arguments.length,ft=new Array(lt),St=0;St<lt;St++)ft[St]=arguments[St];return $.current==null?void 0:$.current(...ft)},[])}function isButtonTarget(dt){return isHTMLElement(dt.target)&&dt.target.tagName==="BUTTON"}function isSpaceIgnored(dt){return isTypeableElement(dt)}const useClick=function(dt,$){let{open:lt,onOpenChange:ft,dataRef:St,refs:Tt}=dt,{enabled:Ct=!0,event:At="click",toggle:Rt=!0,ignoreMouse:kt=!1,keyboardHandlers:Nt=!0}=$===void 0?{}:$;const Bt=reactExports.useRef();return reactExports.useMemo(()=>Ct?{reference:{onPointerDown(Ut){Bt.current=Ut.pointerType},onMouseDown(Ut){Ut.button===0&&(isMouseLikePointerType(Bt.current,!0)&&kt||At!=="click"&&(lt?Rt&&(!St.current.openEvent||St.current.openEvent.type==="mousedown")&&ft(!1):(Ut.preventDefault(),ft(!0)),St.current.openEvent=Ut.nativeEvent))},onClick(Ut){if(At==="mousedown"&&Bt.current){Bt.current=void 0;return}isMouseLikePointerType(Bt.current,!0)&&kt||(lt?Rt&&(!St.current.openEvent||St.current.openEvent.type==="click")&&ft(!1):ft(!0),St.current.openEvent=Ut.nativeEvent)},onKeyDown(Ut){Bt.current=void 0,Nt&&(isButtonTarget(Ut)||(Ut.key===" "&&!isSpaceIgnored(Tt.domReference.current)&&Ut.preventDefault(),Ut.key==="Enter"&&(lt?Rt&&ft(!1):ft(!0))))},onKeyUp(Ut){Nt&&(isButtonTarget(Ut)||isSpaceIgnored(Tt.domReference.current)||Ut.key===" "&&(lt?Rt&&ft(!1):ft(!0)))}}}:{},[Ct,St,At,kt,Nt,Tt,Rt,lt,ft])};function isEventTargetWithin(dt,$){if($==null)return!1;if("composedPath"in dt)return dt.composedPath().includes($);const lt=dt;return lt.target!=null&&$.contains(lt.target)}const useFocus=function(dt,$){let{open:lt,onOpenChange:ft,dataRef:St,refs:Tt,events:Ct}=dt,{enabled:At=!0,keyboardOnly:Rt=!0}=$===void 0?{}:$;const kt=reactExports.useRef(""),Nt=reactExports.useRef(!1),Bt=reactExports.useRef();return reactExports.useEffect(()=>{if(!At)return;const zt=getDocument(Tt.floating.current).defaultView||window;function Zt(){!lt&&isHTMLElement(Tt.domReference.current)&&Tt.domReference.current===activeElement$1(getDocument(Tt.domReference.current))&&(Nt.current=!0)}return zt.addEventListener("blur",Zt),()=>{zt.removeEventListener("blur",Zt)}},[Tt,lt,At]),reactExports.useEffect(()=>{if(!At)return;function Ut(zt){(zt.type==="referencePress"||zt.type==="escapeKey")&&(Nt.current=!0)}return Ct.on("dismiss",Ut),()=>{Ct.off("dismiss",Ut)}},[Ct,At]),reactExports.useEffect(()=>()=>{clearTimeout(Bt.current)},[]),reactExports.useMemo(()=>At?{reference:{onPointerDown(Ut){let{pointerType:zt}=Ut;kt.current=zt,Nt.current=!!(zt&&Rt)},onMouseLeave(){Nt.current=!1},onFocus(Ut){var zt;Nt.current||Ut.type==="focus"&&((zt=St.current.openEvent)==null?void 0:zt.type)==="mousedown"&&St.current.openEvent&&isEventTargetWithin(St.current.openEvent,Tt.domReference.current)||(St.current.openEvent=Ut.nativeEvent,ft(!0))},onBlur(Ut){Nt.current=!1;const zt=Ut.relatedTarget,Zt=isElement(zt)&&zt.hasAttribute("data-floating-ui-focus-guard");Bt.current=setTimeout(()=>{contains$1(Tt.floating.current,zt)||contains$1(Tt.domReference.current,zt)||Zt||ft(!1)})}}}:{},[At,Rt,Tt,St,ft])},useRole=function(dt,$){let{open:lt}=dt,{enabled:ft=!0,role:St="dialog"}=$===void 0?{}:$;const Tt=useId(),Ct=useId();return reactExports.useMemo(()=>{const At={id:Tt,role:St};return ft?St==="tooltip"?{reference:{"aria-describedby":lt?Tt:void 0},floating:At}:{reference:{"aria-expanded":lt?"true":"false","aria-haspopup":St==="alertdialog"?"dialog":St,"aria-controls":lt?Tt:void 0,...St==="listbox"&&{role:"combobox"},...St==="menu"&&{id:Ct}},floating:{...At,...St==="menu"&&{"aria-labelledby":Ct}}}:{}},[ft,St,lt,Tt,Ct])};function useFloating(dt){let{open:$=!1,onOpenChange:lt,whileElementsMounted:ft,placement:St,middleware:Tt,strategy:Ct,nodeId:At}=dt===void 0?{}:dt;const[Rt,kt]=reactExports.useState(null),Nt=useFloatingTree(),Bt=reactExports.useRef(null),Ut=reactExports.useRef({}),zt=reactExports.useState(()=>createPubSub())[0],Zt=useFloating$1({open:$,placement:St,middleware:Tt,strategy:Ct,whileElementsMounted:ft}),ln=useEvent(lt),cn=reactExports.useMemo(()=>({...Zt.refs,domReference:Bt}),[Zt.refs]),hn=reactExports.useMemo(()=>({...Zt,refs:cn,dataRef:Ut,nodeId:At,events:zt,open:$,onOpenChange:ln,_:{domReference:Rt}}),[Zt,At,zt,$,ln,cn,Rt]);index$1(()=>{const vn=Nt==null?void 0:Nt.nodesRef.current.find(Tn=>Tn.id===At);vn&&(vn.context=hn)});const{reference:pn}=Zt,dn=reactExports.useCallback(vn=>{(isElement(vn)||vn===null)&&(cn.domReference.current=vn,kt(vn)),(isElement(cn.reference.current)||cn.reference.current===null||vn!==null&&!isElement(vn))&&pn(vn)},[pn,cn]),gn=reactExports.useCallback(vn=>{const Tn=isElement(vn)?{getBoundingClientRect:()=>vn.getBoundingClientRect(),contextElement:vn}:vn;pn(Tn)},[pn]);return reactExports.useMemo(()=>({...Zt,context:hn,refs:cn,reference:dn,positionReference:gn}),[Zt,cn,hn,dn,gn])}function mergeProps(dt,$,lt){const ft=new Map;return{...lt==="floating"&&{tabIndex:-1},...dt,...$.map(St=>St?St[lt]:null).concat(dt).reduce((St,Tt)=>(Tt&&Object.entries(Tt).forEach(Ct=>{let[At,Rt]=Ct;if(At.indexOf("on")===0){if(ft.has(At)||ft.set(At,[]),typeof Rt=="function"){var kt;(kt=ft.get(At))==null||kt.push(Rt),St[At]=function(){for(var Nt,Bt=arguments.length,Ut=new Array(Bt),zt=0;zt<Bt;zt++)Ut[zt]=arguments[zt];(Nt=ft.get(At))==null||Nt.forEach(Zt=>Zt(...Ut))}}}else St[At]=Rt}),St),{})}}const useInteractions=function(dt){dt===void 0&&(dt=[]);const $=dt,lt=reactExports.useCallback(Tt=>mergeProps(Tt,dt,"reference"),$),ft=reactExports.useCallback(Tt=>mergeProps(Tt,dt,"floating"),$),St=reactExports.useCallback(Tt=>mergeProps(Tt,dt,"item"),$);return reactExports.useMemo(()=>({getReferenceProps:lt,getFloatingProps:ft,getItemProps:St}),[lt,ft,St])},getMiddleware=({arrowRef:dt,placement:$})=>{const lt=[];return lt.push(O$2(8)),lt.push($==="auto"?v$3():b$4()),lt.push(E$4({padding:8})),dt.current&&lt.push(arrow({element:dt.current})),lt},getPlacement=({placement:dt})=>dt==="auto"?void 0:dt,getArrowPlacement=({placement:dt})=>({top:"bottom",right:"left",bottom:"top",left:"right"})[dt.split("-")[0]],Floating=({children:dt,content:$,theme:lt,animation:ft="duration-300",arrow:St=!0,placement:Tt="top",style:Ct="dark",trigger:At="hover",closeRequestKey:Rt,className:kt,...Nt})=>{const Bt=reactExports.useRef(null),[Ut,zt]=reactExports.useState(!1),Zt=useFloating({middleware:getMiddleware({arrowRef:Bt,placement:Tt}),onOpenChange:zt,open:Ut,placement:getPlacement({placement:Tt})}),{context:ln,floating:cn,middlewareData:{arrow:{x:hn,y:pn}={}},reference:dn,refs:gn,strategy:vn,update:Tn,x:Cn,y:$n}=Zt,{getFloatingProps:xn,getReferenceProps:Rn}=useInteractions([useClick(ln,{enabled:At==="click"}),useFocus(ln),useHover(ln,{enabled:At==="hover",handleClose:safePolygon()}),useRole(ln,{role:"tooltip"})]);return reactExports.useEffect(()=>{if(gn.reference.current&&gn.floating.current&&Ut)return P$1(gn.reference.current,gn.floating.current,Tn)},[Ut,gn.floating,gn.reference,Tn]),reactExports.useEffect(()=>{Rt!==void 0&&zt(!1)},[Rt]),jsxs(Fragment,{children:[jsx("div",{className:lt.target,...Rn({ref:dn}),"data-testid":"flowbite-tooltip-target",children:dt}),jsxs("div",{"data-testid":"flowbite-tooltip",...xn({className:classNames(lt.base,ft&&`${lt.animation} ${ft}`,!Ut&&lt.hidden,lt.style[Ct],kt),ref:cn,style:{position:vn,top:$n??" ",left:Cn??" "},...Nt}),children:[jsx("div",{className:lt.content,children:$}),St&&jsx("div",{className:classNames(lt.arrow.base,{[lt.arrow.style.dark]:Ct==="dark",[lt.arrow.style.light]:Ct==="light",[lt.arrow.style.auto]:Ct==="auto"}),"data-testid":"flowbite-tooltip-arrow",ref:Bt,style:{top:pn??" ",left:hn??" ",right:" ",bottom:" ",[getArrowPlacement({placement:Zt.placement})]:lt.arrow.placement},children:""})]})]})},DropdownDivider=()=>{const dt=useTheme().theme.dropdown.floating.divider;return jsx("div",{className:dt})},DropdownHeader=({children:dt,className:$,...lt})=>{const ft=useTheme().theme.dropdown.floating.header;return jsxs(Fragment,{children:[jsx("div",{className:classNames(ft,$),...lt,children:dt}),jsx(DropdownDivider,{})]})},DropdownItem=({children:dt,className:$,onClick:lt,icon:ft})=>{const St=useTheme().theme.dropdown.floating.item;return jsxs("li",{className:classNames(St.base,$),onClick:lt,children:[ft&&jsx(ft,{className:St.icon}),dt]})},icons={top:HiOutlineChevronUp,right:HiOutlineChevronRight,bottom:HiOutlineChevronDown,left:HiOutlineChevronLeft},DropdownComponent=({children:dt,className:$,dismissOnClick:lt=!0,...ft})=>{const St=useTheme().theme.dropdown,Tt=ft,{placement:Ct=ft.inline?"bottom-start":"bottom",trigger:At="click",label:Rt,inline:kt,floatingArrow:Nt=!1,arrowIcon:Bt=!0,...Ut}=Tt,zt=reactExports.useMemo(()=>{const[dn]=Ct.split("-");return icons[dn]??HiOutlineChevronDown},[Ct]),[Zt,ln]=reactExports.useState(void 0),cn=dn=>React.isValidElement(dn)?dn.type===DropdownItem?React.cloneElement(dn,{onClick:()=>{var gn,vn;(vn=(gn=dn.props).onClick)==null||vn.call(gn),lt&&ln(uuid())}}):dn.props.children&&typeof dn.props.children=="object"?React.cloneElement(dn,{children:reactExports.Children.map(dn.props.children,cn)}):dn:dn,hn=reactExports.useMemo(()=>jsx("ul",{className:St.content,children:reactExports.Children.map(dt,cn)}),[dt,St]),pn=({children:dn})=>kt?jsx("button",{className:St.inlineWrapper,children:dn}):jsx(Button,{...Ut,children:dn});return jsx(Floating,{content:hn,style:"auto",animation:"duration-100",placement:Ct,arrow:Nt,trigger:At,theme:St.floating,closeRequestKey:Zt,className:$,children:jsxs(pn,{children:[Rt,Bt&&jsx(zt,{className:St.arrowIcon})]})})};DropdownComponent.displayName="Dropdown";DropdownItem.displayName="Dropdown.Item";DropdownHeader.displayName="Dropdown.Header";DropdownDivider.displayName="Dropdown.Divider";const Dropdown=Object.assign(DropdownComponent,{Item:DropdownItem,Header:DropdownHeader,Divider:DropdownDivider}),HelperText=({value:dt,children:$,color:lt="default",className:ft,...St})=>{const Tt=useTheme().theme.helperText;return jsx("p",{className:classNames(Tt.base,Tt.colors[lt],ft),...St,children:dt??$??""})},FileInput=reactExports.forwardRef(({theme:dt={},sizing:$="md",helperText:lt,color:ft="gray",className:St,...Tt},Ct)=>{const At=mergeDeep(useTheme().theme.fileInput,dt);return jsxs(Fragment,{children:[jsx("div",{className:classNames(At.base,St),children:jsx("div",{className:At.field.base,children:jsx("input",{className:classNames(At.field.input.base,At.field.input.colors[ft],At.field.input.sizes[$]),...Tt,type:"file",ref:Ct})})}),lt&&jsx(HelperText,{color:ft,children:lt})]})});FileInput.displayName="FileInput";const FooterBrand=({alt:dt,className:$,children:lt,href:ft,name:St,src:Tt})=>{const Ct=useTheme().theme.footer.brand;return jsx("div",{children:ft?jsxs("a",{"data-testid":"flowbite-footer-brand",href:ft,className:classNames(Ct.base,$),children:[jsx("img",{alt:dt,src:Tt,className:Ct.img}),jsx("span",{"data-testid":"flowbite-footer-brand-span",className:Ct.span,children:St}),lt]}):jsx("img",{alt:dt,"data-testid":"flowbite-footer-brand",src:Tt,className:Ct.img})})},FooterCopyright=({href:dt,by:$,year:lt,className:ft})=>{const St=useTheme().theme.footer.copyright;return jsx("div",{children:jsxs("span",{className:classNames(St.base,ft),"data-testid":"flowbite-footer-copyright",children:[" ",lt,dt?jsx("a",{href:dt,className:St.href,children:$}):jsx("span",{"data-testid":"flowbite-footer-copyright-span",className:St.span,children:$})]})})},FooterDivider=({className:dt})=>{const $=useTheme().theme.footer.divider;return jsx("hr",{"data-testid":"footer-divider",className:classNames($.base,dt)})},FooterIcon=({href:dt,className:$,ariaLabel:lt,icon:ft})=>{const St=useTheme().theme.footer.icon;return jsx("div",{children:dt?jsx("a",{"aria-label":lt,"data-testid":"flowbite-footer-icon",href:dt,className:classNames(St.base,$),children:jsx(ft,{className:St.size})}):jsx(ft,{"data-testid":"flowbite-footer-icon",className:St.size})})},FooterLink=({children:dt,className:$,href:lt})=>{const ft=useTheme().theme.footer.groupLink.link;return jsx("li",{className:classNames(ft.base,$),children:jsx("a",{href:lt,className:ft.href,children:dt})})},FooterLinkGroup=({children:dt,className:$,col:lt=!1})=>{const ft=useTheme().theme.footer.groupLink;return jsx("ul",{"data-testid":"footer-groupLink",className:classNames(ft.base,lt&&ft.col,$),children:dt})},FooterTitle=({title:dt,className:$})=>{const lt=useTheme().theme.footer.title;return jsx("h2",{"data-testid":"flowbite-footer-title",className:classNames(lt.base,$),children:dt})},FooterComponent=({children:dt,className:$,bgDark:lt=!1,container:ft=!1})=>{const St=useTheme().theme.footer;return jsx("footer",{"data-testid":"flowbite-footer",className:classNames(St.base,lt&&St.bgDark,ft&&St.container,$),children:dt})};FooterComponent.displayName="Footer";FooterCopyright.displayName="Footer.Copyright";FooterLink.displayName="Footer.Link";FooterBrand.displayName="Footer.Brand";FooterLinkGroup.displayName="Footer.LinkGroup";FooterIcon.displayName="Footer.Icon";FooterTitle.displayName="Footer.Title";FooterDivider.displayName="Footer.Divider";Object.assign(FooterComponent,{Copyright:FooterCopyright,Link:FooterLink,LinkGroup:FooterLinkGroup,Brand:FooterBrand,Icon:FooterIcon,Title:FooterTitle,Divider:FooterDivider});const Label=({children:dt,color:$="default",disabled:lt=!1,value:ft,className:St,...Tt})=>{const Ct=useTheme().theme.label;return jsx("label",{className:classNames(Ct.base,Ct.colors[$],lt??Ct.disabled,St),...Tt,children:ft??dt??""})},ListGroupItem=({active:dt,children:$,href:lt,icon:ft,onClick:St,className:Tt,...Ct})=>{const At=typeof lt<"u",Rt=At?"a":"button",kt=useTheme().theme.listGroup.item,Nt=Ct;return jsx("li",{children:jsxs(Rt,{className:classNames(kt.active[dt?"on":"off"],kt.base,kt.href[At?"on":"off"]),href:lt,onClick:St,type:At?void 0:"button",...Nt,children:[ft&&jsx(ft,{"aria-hidden":!0,className:kt.icon,"data-testid":"flowbite-list-group-item-icon"}),$]})})},ListGroupComponent=({children:dt,className:$,...lt})=>{const ft=useTheme().theme.listGroup.base,St=lt;return jsx("ul",{className:classNames(ft,$),...St,children:dt})};ListGroupComponent.displayName="ListGroup";ListGroupItem.displayName="ListGroup.Item";Object.assign(ListGroupComponent,{Item:ListGroupItem});const useKeyDown=(dt,$)=>{const lt=ft=>{ft.key===dt&&$()};reactExports.useEffect(()=>(document.addEventListener("keydown",lt),()=>{document.removeEventListener("keydown",lt)}),[dt,$])},ModalContext=reactExports.createContext(void 0);function useModalContext(){const dt=reactExports.useContext(ModalContext);if(!dt)throw new Error("useModalContext should be used within the ModalContext provider!");return dt}const ModalBody=({children:dt,className:$,...lt})=>{const{popup:ft}=useModalContext(),St=useTheme().theme.modal.body;return jsx("div",{className:classNames(St.base,{[St.popup]:ft},$),...lt,children:dt})},ModalFooter=({children:dt,className:$,...lt})=>{const{popup:ft}=useModalContext(),St=useTheme().theme.modal.footer;return jsx("div",{className:classNames(St.base,{[St.popup]:!ft},$),...lt,children:dt})},ModalHeader=({children:dt,className:$,...lt})=>{const{popup:ft,onClose:St}=useModalContext(),Tt=useTheme().theme.modal.header;return jsxs("div",{className:classNames(Tt.base,{[Tt.popup]:ft},$),...lt,children:[jsx("h3",{className:Tt.title,children:dt}),jsx("button",{"aria-label":"Close",className:Tt.close.base,type:"button",onClick:St,children:jsx(HiOutlineX,{"aria-hidden":!0,className:Tt.close.icon})})]})},ModalComponent=({children:dt,show:$,root:lt=document.body,popup:ft,size:St="2xl",position:Tt="center",dismissible:Ct=!1,onClose:At,className:Rt,...kt})=>{const Nt=useTheme().theme.modal,Bt=reactExports.useRef(null);Bt.current||(Bt.current=document.createElement("div")),Bt.current.parentNode!==lt&&lt.appendChild(Bt.current),reactExports.useEffect(()=>()=>{var Zt;const zt=Bt.current;zt&&((Zt=zt.parentNode)==null||Zt.removeChild(zt),Bt.current=null)},[]),useKeyDown("Escape",()=>{Ct&&At&&At()});const Ut=zt=>{Ct&&zt.target===zt.currentTarget&&At&&At()};return reactDomExports.createPortal(jsx(ModalContext.Provider,{value:{popup:ft,onClose:At},children:jsx("div",{"aria-hidden":!$,className:classNames(Nt.base,Nt.positions[Tt],$?Nt.show.on:Nt.show.off,Rt),"data-testid":"modal",role:"dialog",onClick:Ut,...kt,children:jsx("div",{className:classNames(Nt.content.base,Nt.sizes[St]),children:jsx("div",{className:Nt.content.inner,children:dt})})})}),Bt.current)};ModalComponent.displayName="Modal";ModalHeader.displayName="Modal.Header";ModalBody.displayName="Modal.Body";ModalFooter.displayName="Modal.Footer";const Modal=Object.assign(ModalComponent,{Header:ModalHeader,Body:ModalBody,Footer:ModalFooter}),NavbarBrand=({theme:dt={},children:$,className:lt,as:ft="a",...St})=>{const Tt=mergeDeep(useTheme().theme.navbar.brand,dt);return jsx(ft,{className:classNames(Tt.base,lt),...St,children:$})},NavbarContext=reactExports.createContext(void 0);function useNavbarContext(){const dt=reactExports.useContext(NavbarContext);if(!dt)throw new Error("useNavBarContext should be used within the NavbarContext provider!");return dt}const NavbarCollapse=({theme:dt={},children:$,className:lt,...ft})=>{const{isOpen:St}=useNavbarContext(),Tt=mergeDeep(useTheme().theme.navbar.collapse,dt);return jsx("div",{className:classNames(Tt.base,Tt.hidden[St?"off":"on"],lt),"data-testid":"flowbite-navbar-collapse",...ft,children:jsx("ul",{className:Tt.list,children:$})})},NavbarLink=({active:dt,disabled:$,theme:lt={},children:ft,className:St,as:Tt="a",...Ct})=>{const At=mergeDeep(useTheme().theme.navbar.link,lt);return jsx("li",{children:jsx(Tt,{className:classNames(At.base,{[At.active.on]:dt,[At.active.off]:!dt&&!$},At.disabled[$?"on":"off"],St),...Ct,children:ft})})};function GoThreeBars(dt){return GenIcon({tag:"svg",attr:{viewBox:"0 0 12 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M11.41 9H.59C0 9 0 8.59 0 8c0-.59 0-1 .59-1H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1h.01zm0-4H.59C0 5 0 4.59 0 4c0-.59 0-1 .59-1H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1h.01zM.59 11H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1H.59C0 13 0 12.59 0 12c0-.59 0-1 .59-1z"}}]})(dt)}const NavbarToggle=({barIcon:dt=GoThreeBars,theme:$={},className:lt,...ft})=>{const{isOpen:St,setIsOpen:Tt}=useNavbarContext(),Ct=()=>{Tt(!St)},At=mergeDeep(useTheme().theme.navbar.toggle,$);return jsxs("button",{className:classNames(At.base,lt),"data-testid":"flowbite-navbar-toggle",onClick:Ct,...ft,children:[jsx("span",{className:"sr-only",children:"Open main menu"}),jsx(dt,{className:At.icon})]})},NavbarComponent=({children:dt,menuOpen:$,fluid:lt=!1,rounded:ft,border:St,className:Tt,theme:Ct={},...At})=>{const[Rt,kt]=reactExports.useState($),Nt=mergeDeep(useTheme().theme.navbar.root,Ct);return jsx(NavbarContext.Provider,{value:{isOpen:Rt,setIsOpen:kt},children:jsx("nav",{className:classNames(Nt.base,Nt.bordered[St?"on":"off"],Nt.rounded[ft?"on":"off"],Tt),...At,children:jsx("div",{className:classNames(Nt.inner.base,Nt.inner.fluid[lt?"on":"off"]),children:dt})})})};NavbarComponent.displayName="Navbar";NavbarBrand.displayName="Navbar.Brand";NavbarCollapse.displayName="Navbar.Collapse";NavbarLink.displayName="Navbar.Link";NavbarToggle.displayName="Navbar.Toggle";Object.assign(NavbarComponent,{Brand:NavbarBrand,Collapse:NavbarCollapse,Link:NavbarLink,Toggle:NavbarToggle});const Radio=reactExports.forwardRef(({theme:dt={},className:$,...lt},ft)=>{const St=mergeDeep(useTheme().theme.radio,dt);return jsx("input",{ref:ft,className:classNames(St.root.base,$),type:"radio",...lt})});Radio.displayName="Radio";const RangeSlider=reactExports.forwardRef(({theme:dt={},sizing:$="md",className:lt,...ft},St)=>{const Tt=mergeDeep(useTheme().theme.rangeSlider,dt);return jsx(Fragment,{children:jsx("div",{"data-testid":"flowbite-range-slider",className:classNames(Tt.base,lt),children:jsx("div",{className:Tt.field.base,children:jsx("input",{className:classNames(Tt.field.input.base,Tt.field.input.sizes[$]),...ft,type:"range",ref:St})})})})});RangeSlider.displayName="RangeSlider";const RatingAdvanced=({percentFilled:dt=0,children:$,className:lt,...ft})=>{const St=useTheme().theme.rating.advanced;return jsxs("div",{className:classNames(St.base,lt),...ft,children:[jsx("span",{className:St.label,children:$}),jsx("div",{className:St.progress.base,children:jsx("div",{className:St.progress.fill,"data-testid":"flowbite-rating-fill",style:{width:`${dt}%`}})}),jsx("span",{className:St.progress.label,children:`${dt}%`})]})},RatingContext=reactExports.createContext(void 0);function useRatingContext(){const dt=reactExports.useContext(RatingContext);if(!dt)throw new Error("useRatingContext should be used within the RatingContext provider!");return dt}const RatingStar=({filled:dt=!0,starIcon:$=HiStar,className:lt})=>{const{size:ft="sm"}=useRatingContext(),St=useTheme().theme.rating.star;return jsx($,{className:classNames(St.sizes[ft],St[dt?"filled":"empty"],lt),"data-testid":"flowbite-rating-star"})},RatingComponent=({children:dt,size:$="sm",className:lt,...ft})=>{const St=useTheme().theme.rating;return jsx(RatingContext.Provider,{value:{size:$},children:jsx("div",{className:classNames(St.base,lt),...ft,children:dt})})};RatingComponent.displayName="Rating";RatingStar.displayName="Rating.Star";RatingAdvanced.displayName="Rating.Advanced";Object.assign(RatingComponent,{Star:RatingStar,Advanced:RatingAdvanced});const Select=reactExports.forwardRef(({children:dt,sizing:$="md",shadow:lt,helperText:ft,addon:St,icon:Tt,color:Ct="gray",className:At,...Rt},kt)=>{const Nt=useTheme().theme.select;return jsxs("div",{className:classNames(Nt.base,At),children:[St&&jsx("span",{className:Nt.addon,children:St}),jsxs("div",{className:Nt.field.base,children:[Tt&&jsx("div",{className:Nt.field.icon.base,children:jsx(Tt,{className:Nt.field.icon.svg})}),jsx("select",{className:classNames(Nt.field.select.base,Nt.field.select.colors[Ct],Nt.field.select.withIcon[Tt?"on":"off"],Nt.field.select.withAddon[St?"on":"off"],Nt.field.select.withShadow[lt?"on":"off"],Nt.field.select.sizes[$]),...Rt,ref:kt,children:dt}),ft&&jsx(HelperText,{color:Ct,children:ft})]})]})});Select.displayName="Select";const Tooltip=({animation:dt="duration-300",arrow:$=!0,children:lt,content:ft,placement:St="top",style:Tt="dark",trigger:Ct="hover",className:At,...Rt})=>{const kt=useTheme().theme.tooltip;return jsx(Floating,{content:ft,style:Tt,animation:dt,placement:St,arrow:$,trigger:Ct,theme:kt,className:At,...Rt,children:lt})},SidebarContext=reactExports.createContext(void 0);function useSidebarContext(){const dt=reactExports.useContext(SidebarContext);if(!dt)throw new Error("useSidebarContext should be used within the SidebarContext provider!");return dt}const SidebarItemContext=reactExports.createContext(void 0);function useSidebarItemContext(){const dt=reactExports.useContext(SidebarItemContext);if(!dt)throw new Error("useSidebarItemContext should be used within the SidebarItemContext provider!");return dt}const SidebarCollapse=({children:dt,icon:$,label:lt,className:ft,open:St=!1,...Tt})=>{const Ct=reactExports.useId(),{isCollapsed:At}=useSidebarContext(),[Rt,kt]=reactExports.useState(St),Nt=useTheme().theme.sidebar.collapse;return reactExports.useEffect(()=>kt(St),[St]),jsxs(({children:Ut})=>jsx("li",{children:At&&!Rt?jsx(Tooltip,{content:lt,placement:"right",children:Ut}):Ut}),{children:[jsxs("button",{className:classNames(Nt.button,ft),id:`flowbite-sidebar-collapse-${Ct}`,onClick:()=>kt(!Rt),title:lt,type:"button",...Tt,children:[$&&jsx($,{"aria-hidden":!0,className:classNames(Nt.icon.base,Nt.icon.open[Rt?"on":"off"]),"data-testid":"flowbite-sidebar-collapse-icon"}),At?jsx("span",{className:"sr-only",children:lt}):jsxs(Fragment,{children:[jsx("span",{className:Nt.label.base,"data-testid":"flowbite-sidebar-collapse-label",children:lt}),jsx(HiChevronDown,{"aria-hidden":!0,className:Nt.label.icon})]})]}),jsx("ul",{"aria-labelledby":`flowbite-sidebar-collapse-${Ct}`,className:Nt.list,hidden:!Rt,children:jsx(SidebarItemContext.Provider,{value:{isInsideCollapse:!0},children:dt})})]})};SidebarCollapse.displayName="Sidebar.Collapse";const SidebarCTA=({children:dt,color:$="info",className:lt,...ft})=>{const{isCollapsed:St}=useSidebarContext(),Tt=useTheme().theme.sidebar.cta;return jsx("div",{className:classNames(Tt.base,Tt.color[$],lt),"data-testid":"sidebar-cta",hidden:St,...ft,children:dt})};SidebarCTA.displayName="Sidebar.CTA";const ListItem=({id:dt,isCollapsed:$,tooltipChildren:lt,children:ft})=>jsx("li",{children:$?jsx(Tooltip,{content:jsx(TooltipContent,{id:dt,children:lt}),placement:"right",children:ft}):ft}),TooltipContent=({id:dt,children:$})=>jsx(Children,{id:dt,children:$}),Children=({id:dt,children:$})=>{const lt=useTheme().theme.sidebar.item;return jsx("span",{className:classNames(lt.content.base),"data-testid":"flowbite-sidebar-item-content",id:`flowbite-sidebar-item-${dt}`,children:$})},SidebarItem=reactExports.forwardRef(({as:dt="a",children:$,icon:lt,active:ft,label:St,labelColor:Tt="info",className:Ct,...At},Rt)=>{const kt=reactExports.useId(),{isCollapsed:Nt}=useSidebarContext(),{isInsideCollapse:Bt}=useSidebarItemContext(),Ut=useTheme().theme.sidebar.item;return jsx(ListItem,{id:kt,isCollapsed:Nt,tooltipChildren:$,children:jsxs(dt,{"aria-labelledby":`flowbite-sidebar-item-${kt}`,className:classNames(Ut.base,ft&&Ut.active,!Nt&&Bt&&Ut.collapsed.insideCollapse,Ct),ref:Rt,...At,children:[lt&&jsx(lt,{"aria-hidden":!0,className:classNames(Ut.icon.base,ft&&Ut.icon.active),"data-testid":"flowbite-sidebar-item-icon"}),Nt&&!lt&&jsx("span",{className:Ut.collapsed.noIcon,children:$.charAt(0).toLocaleUpperCase()??"?"}),!Nt&&jsx(Children,{id:kt,children:$}),!Nt&&St&&jsx(Badge,{color:Tt,"data-testid":"flowbite-sidebar-label",hidden:Nt,className:Ut.label,children:St})]})})});SidebarItem.displayName="Sidebar.Item";const SidebarItemGroup=({children:dt,className:$,...lt})=>{const ft=useTheme().theme.sidebar.itemGroup;return jsx("ul",{className:classNames(ft,$),"data-testid":"flowbite-sidebar-item-group",...lt,children:jsx(SidebarItemContext.Provider,{value:{isInsideCollapse:!1},children:dt})})};SidebarItemGroup.displayName="Sidebar.ItemGroup";const SidebarItems=({children:dt,className:$,...lt})=>{const ft=useTheme().theme.sidebar.items;return jsx("div",{className:classNames(ft,$),"data-testid":"flowbite-sidebar-items",...lt,children:dt})};SidebarItems.displayName="Sidebar.Items";const SidebarLogo=({children:dt,href:$,img:lt,imgAlt:ft="",className:St,...Tt})=>{const Ct=reactExports.useId(),{isCollapsed:At}=useSidebarContext(),Rt=useTheme().theme.sidebar.logo;return jsxs("a",{"aria-labelledby":`flowbite-sidebar-logo-${Ct}`,className:classNames(Rt.base,St),href:$,...Tt,children:[jsx("img",{alt:ft,className:Rt.img,src:lt}),jsx("span",{className:Rt.collapsed[At?"on":"off"],id:`flowbite-sidebar-logo-${Ct}`,children:dt})]})};SidebarLogo.displayName="Sidebar.Logo";const SidebarComponent=({children:dt,collapseBehavior:$="collapse",collapsed:lt=!1,...ft})=>{const St=useTheme().theme.sidebar;return jsx(SidebarContext.Provider,{value:{isCollapsed:lt},children:jsx("aside",{"aria-label":"Sidebar",className:classNames(St.base,St.collapsed[lt?"on":"off"]),hidden:lt&&$==="hide",...ft,children:jsx("div",{className:St.inner,children:dt})})})};SidebarComponent.displayName="Sidebar";Object.assign(SidebarComponent,{Collapse:SidebarCollapse,CTA:SidebarCTA,Item:SidebarItem,Items:SidebarItems,ItemGroup:SidebarItemGroup,Logo:SidebarLogo});const TabItem=({children:dt,className:$})=>jsx("div",{className:$,children:dt}),TabsComponent=reactExports.forwardRef(({children:dt,style:$="default",className:lt,onActiveTabChange:ft,...St},Tt)=>{const Ct=useTheme().theme.tab,At=reactExports.useId(),Rt=reactExports.useMemo(()=>reactExports.Children.map(dt,({props:pn})=>pn),[dt]),kt=reactExports.useRef([]),[Nt,Bt]=reactExports.useState(Math.max(0,Rt.findIndex(pn=>pn.active))),[Ut,zt]=reactExports.useState(Math.max(0,Rt.findIndex(pn=>pn.active))),Zt=pn=>{Bt(pn),ft&&ft(pn)},ln=({target:pn})=>{Zt(pn),zt(pn)},cn=({event:pn,target:dn})=>{pn.key==="ArrowLeft"&&zt(Math.max(0,Ut-1)),pn.key==="ArrowRight"&&zt(Math.min(Rt.length-1,Ut+1)),pn.key==="Enter"&&(Zt(dn),zt(dn))},hn=Ct.tablist.tabitem.styles[$];return reactExports.useEffect(()=>{var pn;(pn=kt.current[Ut])==null||pn.focus()},[Ut]),reactExports.useImperativeHandle(Tt,()=>({setActiveTab:Zt})),jsxs("div",{className:classNames(Ct.base,lt),children:[jsx("div",{"aria-label":"Tabs",role:"tablist",className:classNames(Ct.tablist.base,Ct.tablist.styles[$],lt),...St,children:Rt.map((pn,dn)=>jsxs("button",{type:"button","aria-controls":`${At}-tabpanel-${dn}`,"aria-selected":dn===Nt,className:classNames(Ct.tablist.tabitem.base,{...hn},{[hn.active.on]:dn===Nt,[hn.active.off]:dn!==Nt&&!pn.disabled}),disabled:pn.disabled,id:`${At}-tab-${dn}`,onClick:()=>ln({target:dn}),onKeyDown:gn=>cn({event:gn,target:dn}),ref:gn=>kt.current[dn]=gn,role:"tab",tabIndex:dn===Ut?0:-1,children:[pn.icon&&jsx(pn.icon,{className:Ct.tablist.tabitem.icon}),pn.title]},dn))}),jsx("div",{children:Rt.map((pn,dn)=>jsx("div",{"aria-labelledby":`${At}-tab-${dn}`,className:Ct.tabpanel,hidden:dn!==Nt,id:`${At}-tabpanel-${dn}`,role:"tabpanel",tabIndex:0,children:pn.children},dn))})]})});TabsComponent.displayName="Tabs.Group";TabItem.displayName="Tabs.Item";const Tabs={Group:TabsComponent,Item:TabItem},TableBody=({children:dt,...$})=>jsx("tbody",{...$,children:dt}),TableCell=({children:dt,className:$,...lt})=>{const ft=useTheme().theme.table.cell;return jsx("td",{className:classNames(ft.base,$),...lt,children:dt})},TableContext=reactExports.createContext(void 0);function useTableContext(){const dt=reactExports.useContext(TableContext);if(!dt)throw new Error("useTableContext should be used within the TableContext provider!");return dt}const TableHead=({children:dt,className:$,...lt})=>{const ft=useTheme().theme.table;return jsx("thead",{className:classNames(ft.head.base,$),...lt,children:jsx("tr",{children:dt})})},TableHeadCell=({children:dt,className:$,...lt})=>{const ft=useTheme().theme.table.head.cell;return jsx("th",{className:classNames(ft.base,$),...lt,children:dt})},TableRow=({children:dt,className:$,...lt})=>{const ft=useTheme().theme.table.row,{striped:St,hoverable:Tt}=useTableContext();return jsx("tr",{"data-testid":"table-row-element",className:classNames(St&&ft.striped,Tt&&ft.hovered,$),...lt,children:dt})},TableComponent=({children:dt,striped:$,hoverable:lt,className:ft,...St})=>{const Tt=useTheme().theme.table;return jsx("div",{"data-testid":"table-element",className:classNames(Tt.wrapper),children:jsx(TableContext.Provider,{value:{striped:$,hoverable:lt},children:jsx("table",{className:classNames(Tt.base,ft),...St,children:dt})})})};TableComponent.displayName="Table";TableHead.displayName="Table.Head";TableBody.displayName="Table.Body";TableRow.displayName="Table.Row";TableCell.displayName="Table.Cell";TableHeadCell.displayName="Table.HeadCell";Object.assign(TableComponent,{Head:TableHead,Body:TableBody,Row:TableRow,Cell:TableCell,HeadCell:TableHeadCell});const Textarea=reactExports.forwardRef(({shadow:dt,helperText:$,color:lt="gray",className:ft,...St},Tt)=>{const Ct=useTheme().theme.textarea;return jsxs(Fragment,{children:[jsx("textarea",{ref:Tt,className:classNames(Ct.base,Ct.colors[lt],Ct.withShadow[dt?"on":"off"],ft),...St}),$&&jsx(HelperText,{color:lt,children:$})]})});Textarea.displayName="Textarea";const TextInput=reactExports.forwardRef(({sizing:dt="md",shadow:$,helperText:lt,addon:ft,icon:St,rightIcon:Tt,color:Ct="gray",className:At,theme:Rt={},...kt},Nt)=>{const Bt=mergeDeep(useTheme().theme.textInput,Rt);return jsxs(Fragment,{children:[jsxs("div",{className:classNames(Bt.base,At),children:[ft&&jsx("span",{className:Bt.addon,children:ft}),jsxs("div",{className:Bt.field.base,children:[St&&jsx("div",{className:Bt.field.icon.base,children:jsx(St,{className:Bt.field.icon.svg})}),Tt&&jsx("div",{"data-testid":"right-icon",className:Bt.field.rightIcon.base,children:jsx(Tt,{className:Bt.field.rightIcon.svg})}),jsx("input",{className:classNames(Bt.field.input.base,Bt.field.input.colors[Ct],Bt.field.input.withIcon[St?"on":"off"],Bt.field.input.withAddon[ft?"on":"off"],Bt.field.input.withShadow[$?"on":"off"],Bt.field.input.sizes[dt]),...kt,ref:Nt})]})]}),lt&&jsx(HelperText,{color:Ct,children:lt})]})});TextInput.displayName="TextInput";const TimelineBody=({children:dt,className:$,...lt})=>{const ft=useTheme().theme.timeline.item.content;return jsx("p",{className:classNames(ft.body,$),...lt,children:dt})},TimelineContext=reactExports.createContext(void 0);function useTimelineContext(){const dt=reactExports.useContext(TimelineContext);if(!dt)throw new Error("useTimelineContext should be used within the TimelineContext providor!");return dt}const TimelineContent=({children:dt,className:$,...lt})=>{const ft=useTheme().theme.timeline.item.content,{horizontal:St}=useTimelineContext();return jsx("div",{"data-testid":"timeline-content",className:classNames(St&&ft.base,$),...lt,children:dt})},TimelineItem=({children:dt,className:$,...lt})=>{const ft=useTheme().theme.timeline.item,{horizontal:St}=useTimelineContext();return jsx("li",{"data-testid":"timeline-item",className:classNames(St&&ft.base.horizontal,!St&&ft.base.vertical,$),...lt,children:dt})},TimelinePoint=({children:dt,className:$,icon:lt,...ft})=>{const St=useTheme().theme.timeline.item.point,{horizontal:Tt}=useTimelineContext();return jsxs("div",{"data-testid":"timeline-point",className:classNames(Tt&&St.base.horizontal,!Tt&&St.base.vertical,$),...ft,children:[dt,lt?jsx("span",{className:classNames(St.marker.icon.wrapper),children:jsx(lt,{"aria-hidden":!0,className:classNames(St.marker.icon.base)})}):jsx("div",{className:classNames(Tt&&St.marker.base.horizontal,!Tt&&St.marker.base.vertical)}),Tt&&jsx("div",{className:classNames(St.line)})]})},TimelineTime=({children:dt,className:$,...lt})=>{const ft=useTheme().theme.timeline.item.content;return jsx("time",{className:classNames(ft.time,$),...lt,children:dt})},TimelineTitle=({children:dt,className:$,as:lt="h3",...ft})=>{const St=useTheme().theme.timeline.item.content;return jsx(lt,{className:classNames(St.title,$),...ft,children:dt})},TimelineComponent=({children:dt,horizontal:$,className:lt})=>{const ft=useTheme().theme.timeline;return jsx(TimelineContext.Provider,{value:{horizontal:$},children:jsx("ol",{"data-testid":"timeline-component",className:classNames($&&ft.direction.horizontal,!$&&ft.direction.vertical,lt),children:dt})})};TimelineComponent.displayName="Timeline";TimelineItem.displayName="Timeline.Item";TimelinePoint.displayName="Timeline.Point";TimelineContent.displayName="Timeline.Content";TimelineTime.displayName="Timeline.Time";TimelineTitle.displayName="Timeline.Title";TimelineBody.displayName="Timeline.Body";Object.assign(TimelineComponent,{Item:TimelineItem,Point:TimelinePoint,Content:TimelineContent,Time:TimelineTime,Title:TimelineTitle,Body:TimelineBody});const ToastContext=reactExports.createContext(void 0);function useToastContext(){const dt=reactExports.useContext(ToastContext);if(!dt)throw new Error("useToastContext should be used within the ToastContext provider!");return dt}const ToastToggle=({className:dt,xIcon:$=HiX})=>{const{duration:lt,isClosed:ft,isRemoved:St,setIsClosed:Tt,setIsRemoved:Ct}=useToastContext(),At=useTheme().theme.toast.toggle;return jsx("button",{"aria-label":"Close",onClick:()=>{Tt(!ft),setTimeout(()=>Ct(!St),lt)},type:"button",className:classNames(At.base,dt),children:jsx($,{className:At.icon})})},durationClasses={75:"duration-75",100:"duration-100",150:"duration-150",200:"duration-200",300:"duration-300",500:"duration-500",700:"duration-700",1e3:"duration-1000"},ToastComponent=({children:dt,duration:$=300,className:lt,...ft})=>{const[St,Tt]=reactExports.useState(!1),[Ct,At]=reactExports.useState(!1),Rt=useTheme().theme.toast;return jsx(ToastContext.Provider,{value:{duration:$,isClosed:St,isRemoved:Ct,setIsClosed:Tt,setIsRemoved:At},children:jsx("div",{"data-testid":"flowbite-toast",className:classNames(Rt.base,durationClasses[$],{[Rt.closed]:St},{[Rt.removed]:Ct},lt),...ft,children:dt})})};ToastComponent.displayName="Toast";ToastToggle.displayName="Toast.Toggle";Object.assign(ToastComponent,{Toggle:ToastToggle});const IconButton=({icon:dt,text:$,color:lt,onClick:ft,className:St})=>jsxs(Button,{className:St,onClick:ft,color:lt,children:[jsx(FontAwesomeIcon,{icon:dt}),$!==""?jsx("span",{className:"ml-2",children:$}):null]});var faTrashCan={prefix:"fas",iconName:"trash-can",icon:[448,512,[61460,"trash-alt"],"f2ed","M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"]},faPause={prefix:"fas",iconName:"pause",icon:[320,512,[9208],"f04c","M48 64C21.5 64 0 85.5 0 112V400c0 26.5 21.5 48 48 48H80c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48H48zm192 0c-26.5 0-48 21.5-48 48V400c0 26.5 21.5 48 48 48h32c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48H240z"]},faArrowsLeftRight={prefix:"fas",iconName:"arrows-left-right",icon:[512,512,["arrows-h"],"f07e","M406.6 374.6l96-96c12.5-12.5 12.5-32.8 0-45.3l-96-96c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224l-293.5 0 41.4-41.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3l96 96c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 288l293.5 0-41.4 41.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0z"]},faArrowsRotate={prefix:"fas",iconName:"arrows-rotate",icon:[512,512,[128472,"refresh","sync"],"f021","M89.1 202.6c7.7-21.8 20.2-42.3 37.8-59.8c62.5-62.5 163.8-62.5 226.3 0L370.3 160H320c-17.7 0-32 14.3-32 32s14.3 32 32 32H447.5c0 0 0 0 0 0h.4c17.7 0 32-14.3 32-32V64c0-17.7-14.3-32-32-32s-32 14.3-32 32v51.2L398.4 97.6c-87.5-87.5-229.3-87.5-316.8 0C57.2 122 39.6 150.7 28.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5zM23 289.3c-5 1.5-9.8 4.2-13.7 8.2c-4 4-6.7 8.8-8.1 14c-.3 1.2-.6 2.5-.8 3.8c-.3 1.7-.4 3.4-.4 5.1V448c0 17.7 14.3 32 32 32s32-14.3 32-32V396.9l17.6 17.5 0 0c87.5 87.4 229.3 87.4 316.7 0c24.4-24.4 42.1-53.1 52.9-83.7c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.5 62.5-163.8 62.5-226.3 0l-.1-.1L109.6 352H160c17.7 0 32-14.3 32-32s-14.3-32-32-32H32.4c-1.6 0-3.2 .1-4.8 .3s-3.1 .5-4.6 1z"]},faSync=faArrowsRotate,faSquare={prefix:"fas",iconName:"square",icon:[448,512,[9632,9723,9724,61590],"f0c8","M0 96C0 60.7 28.7 32 64 32H384c35.3 0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96z"]},faTrash={prefix:"fas",iconName:"trash",icon:[448,512,[],"f1f8","M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"]},faGear={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M481.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-30.9 28.1c-7.7 7.1-11.4 17.5-10.9 27.9c.1 2.9 .2 5.8 .2 8.8s-.1 5.9-.2 8.8c-.5 10.5 3.1 20.9 10.9 27.9l30.9 28.1c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-39.7-12.6c-10-3.2-20.8-1.1-29.7 4.6c-4.9 3.1-9.9 6.1-15.1 8.7c-9.3 4.8-16.5 13.2-18.8 23.4l-8.9 40.7c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-8.9-40.7c-2.2-10.2-9.5-18.6-18.8-23.4c-5.2-2.7-10.2-5.6-15.1-8.7c-8.8-5.7-19.7-7.8-29.7-4.6L69.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l30.9-28.1c7.7-7.1 11.4-17.5 10.9-27.9c-.1-2.9-.2-5.8-.2-8.8s.1-5.9 .2-8.8c.5-10.5-3.1-20.9-10.9-27.9L8.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l39.7 12.6c10 3.2 20.8 1.1 29.7-4.6c4.9-3.1 9.9-6.1 15.1-8.7c9.3-4.8 16.5-13.2 18.8-23.4l8.9-40.7c2-9.1 9-16.3 18.2-17.8C213.3 1.2 227.5 0 242 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l8.9 40.7c2.2 10.2 9.4 18.6 18.8 23.4c5.2 2.7 10.2 5.6 15.1 8.7c8.8 5.7 19.7 7.7 29.7 4.6l39.7-12.6c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM242 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"]},faDownload={prefix:"fas",iconName:"download",icon:[512,512,[],"f019","M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32V274.7l-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7V32zM64 352c-35.3 0-64 28.7-64 64v32c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V416c0-35.3-28.7-64-64-64H346.5l-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352H64zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},faUpload={prefix:"fas",iconName:"upload",icon:[512,512,[],"f093","M288 109.3V352c0 17.7-14.3 32-32 32s-32-14.3-32-32V109.3l-73.4 73.4c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l128-128c12.5-12.5 32.8-12.5 45.3 0l128 128c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L288 109.3zM64 352H192c0 35.3 28.7 64 64 64s64-28.7 64-64H448c35.3 0 64 28.7 64 64v32c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V416c0-35.3 28.7-64 64-64zM432 456a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"]},faEraser={prefix:"fas",iconName:"eraser",icon:[512,512,[],"f12d","M258.7 57.4L25.4 290.7c-25 25-25 65.5 0 90.5l80 80c12 12 28.3 18.7 45.3 18.7H256h9.4H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H355.9L486.6 285.3c25-25 25-65.5 0-90.5L349.3 57.4c-25-25-65.5-25-90.5 0zM265.4 416H256l-105.4 0-80-80L195.3 211.3 332.7 348.7 265.4 416z"]},faPlay={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"]},faCopy={prefix:"fas",iconName:"copy",icon:[512,512,[],"f0c5","M224 0c-35.3 0-64 28.7-64 64V288c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H224zM64 160c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H288c35.3 0 64-28.7 64-64V384H288v64H64V224h64V160H64z"]},faPlus={prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M240 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H32c-17.7 0-32 14.3-32 32s14.3 32 32 32H176V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H384c17.7 0 32-14.3 32-32s-14.3-32-32-32H240V80z"]},faRobot={prefix:"fas",iconName:"robot",icon:[640,512,[129302],"f544","M320 0c17.7 0 32 14.3 32 32V96H472c39.8 0 72 32.2 72 72V440c0 39.8-32.2 72-72 72H168c-39.8 0-72-32.2-72-72V168c0-39.8 32.2-72 72-72H288V32c0-17.7 14.3-32 32-32zM208 384c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16H208zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16H304zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16H400zM264 256a40 40 0 1 0 -80 0 40 40 0 1 0 80 0zm152 40a40 40 0 1 0 0-80 40 40 0 1 0 0 80zM48 224H64V416H48c-26.5 0-48-21.5-48-48V272c0-26.5 21.5-48 48-48zm544 0c26.5 0 48 21.5 48 48v96c0 26.5-21.5 48-48 48H576V224h16z"]},faCirclePlus={prefix:"fas",iconName:"circle-plus",icon:[512,512,["plus-circle"],"f055","M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0S0 114.6 0 256S114.6 512 256 512zM232 344V280H168c-13.3 0-24-10.7-24-24s10.7-24 24-24h64V168c0-13.3 10.7-24 24-24s24 10.7 24 24v64h64c13.3 0 24 10.7 24 24s-10.7 24-24 24H280v64c0 13.3-10.7 24-24 24s-24-10.7-24-24z"]},faPlusCircle=faCirclePlus,faCircleXmark={prefix:"fas",iconName:"circle-xmark",icon:[512,512,[61532,"times-circle","xmark-circle"],"f057","M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0S0 114.6 0 256S114.6 512 256 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"]},faXmarkCircle=faCircleXmark;const BlockManagerPanel=()=>{const dt=useRobartState(At=>At.blocks),$=Object.values(dt),lt=useRobartState(At=>At.removeBlock),ft=useRobartState(At=>At.createBlock),St=useRobartState(At=>At.copyBlock),Tt=useRobartState(At=>At.editingBlockId),Ct=useRobartState(At=>At.setEditingBlock);return jsxs("div",{children:[jsxs("div",{className:"flex flex-wrap gap-2 p-2",children:[jsx(IconButton,{icon:faPlusCircle,text:"New",onClick:()=>{const At=ft("New Block");Ct(At)}}),jsx(IconButton,{icon:faCopy,text:"Copy",onClick:()=>{if(Tt===void 0)return;const At=St(Tt);Ct(At)}}),jsx(IconButton,{color:"failure",icon:faTrash,text:"Delete",onClick:()=>{Tt!==void 0&&lt(Tt)}})]}),jsx("div",{className:"flex flex-wrap gap-2 p-2",children:$.map(At=>jsx(Button,{className:"flex",onClick:()=>Ct(At.id),color:"success",children:At.name},At.id))})]})};function __awaiter(dt,$,lt,ft){function St(Tt){return Tt instanceof lt?Tt:new lt(function(Ct){Ct(Tt)})}return new(lt||(lt=Promise))(function(Tt,Ct){function At(Nt){try{kt(ft.next(Nt))}catch(Bt){Ct(Bt)}}function Rt(Nt){try{kt(ft.throw(Nt))}catch(Bt){Ct(Bt)}}function kt(Nt){Nt.done?Tt(Nt.value):St(Nt.value).then(At,Rt)}kt((ft=ft.apply(dt,$||[])).next())})}function __generator(dt,$){var lt={label:0,sent:function(){if(Tt[0]&1)throw Tt[1];return Tt[1]},trys:[],ops:[]},ft,St,Tt,Ct;return Ct={next:At(0),throw:At(1),return:At(2)},typeof Symbol=="function"&&(Ct[Symbol.iterator]=function(){return this}),Ct;function At(kt){return function(Nt){return Rt([kt,Nt])}}function Rt(kt){if(ft)throw new TypeError("Generator is already executing.");for(;Ct&&(Ct=0,kt[0]&&(lt=0)),lt;)try{if(ft=1,St&&(Tt=kt[0]&2?St.return:kt[0]?St.throw||((Tt=St.return)&&Tt.call(St),0):St.next)&&!(Tt=Tt.call(St,kt[1])).done)return Tt;switch(St=0,Tt&&(kt=[kt[0]&2,Tt.value]),kt[0]){case 0:case 1:Tt=kt;break;case 4:return lt.label++,{value:kt[1],done:!1};case 5:lt.label++,St=kt[1],kt=[0];continue;case 7:kt=lt.ops.pop(),lt.trys.pop();continue;default:if(Tt=lt.trys,!(Tt=Tt.length>0&&Tt[Tt.length-1])&&(kt[0]===6||kt[0]===2)){lt=0;continue}if(kt[0]===3&&(!Tt||kt[1]>Tt[0]&&kt[1]<Tt[3])){lt.label=kt[1];break}if(kt[0]===6&&lt.label<Tt[1]){lt.label=Tt[1],Tt=kt;break}if(Tt&&lt.label<Tt[2]){lt.label=Tt[2],lt.ops.push(kt);break}Tt[2]&&lt.ops.pop(),lt.trys.pop();continue}kt=$.call(dt,lt)}catch(Nt){kt=[6,Nt],St=0}finally{ft=Tt=0}if(kt[0]&5)throw kt[1];return{value:kt[0]?kt[1]:void 0,done:!0}}}function __read(dt,$){var lt=typeof Symbol=="function"&&dt[Symbol.iterator];if(!lt)return dt;var ft=lt.call(dt),St,Tt=[],Ct;try{for(;($===void 0||$-- >0)&&!(St=ft.next()).done;)Tt.push(St.value)}catch(At){Ct={error:At}}finally{try{St&&!St.done&&(lt=ft.return)&&lt.call(ft)}finally{if(Ct)throw Ct.error}}return Tt}function __spreadArray(dt,$,lt){if(lt||arguments.length===2)for(var ft=0,St=$.length,Tt;ft<St;ft++)(Tt||!(ft in $))&&(Tt||(Tt=Array.prototype.slice.call($,0,ft)),Tt[ft]=$[ft]);return dt.concat(Tt||Array.prototype.slice.call($))}var COMMON_MIME_TYPES=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function toFileWithPath(dt,$){var lt=withMimeType(dt);if(typeof lt.path!="string"){var ft=dt.webkitRelativePath;Object.defineProperty(lt,"path",{value:typeof $=="string"?$:typeof ft=="string"&&ft.length>0?ft:dt.name,writable:!1,configurable:!1,enumerable:!0})}return lt}function withMimeType(dt){var $=dt.name,lt=$&&$.lastIndexOf(".")!==-1;if(lt&&!dt.type){var ft=$.split(".").pop().toLowerCase(),St=COMMON_MIME_TYPES.get(ft);St&&Object.defineProperty(dt,"type",{value:St,writable:!1,configurable:!1,enumerable:!0})}return dt}var FILES_TO_IGNORE=[".DS_Store","Thumbs.db"];function fromEvent(dt){return __awaiter(this,void 0,void 0,function(){return __generator(this,function($){return isObject(dt)&&isDataTransfer(dt.dataTransfer)?[2,getDataTransferFiles(dt.dataTransfer,dt.type)]:isChangeEvt(dt)?[2,getInputFiles(dt)]:Array.isArray(dt)&&dt.every(function(lt){return"getFile"in lt&&typeof lt.getFile=="function"})?[2,getFsHandleFiles(dt)]:[2,[]]})})}function isDataTransfer(dt){return isObject(dt)}function isChangeEvt(dt){return isObject(dt)&&isObject(dt.target)}function isObject(dt){return typeof dt=="object"&&dt!==null}function getInputFiles(dt){return fromList(dt.target.files).map(function($){return toFileWithPath($)})}function getFsHandleFiles(dt){return __awaiter(this,void 0,void 0,function(){var $;return __generator(this,function(lt){switch(lt.label){case 0:return[4,Promise.all(dt.map(function(ft){return ft.getFile()}))];case 1:return $=lt.sent(),[2,$.map(function(ft){return toFileWithPath(ft)})]}})})}function getDataTransferFiles(dt,$){return __awaiter(this,void 0,void 0,function(){var lt,ft;return __generator(this,function(St){switch(St.label){case 0:return dt.items?(lt=fromList(dt.items).filter(function(Tt){return Tt.kind==="file"}),$!=="drop"?[2,lt]:[4,Promise.all(lt.map(toFilePromises))]):[3,2];case 1:return ft=St.sent(),[2,noIgnoredFiles(flatten$1(ft))];case 2:return[2,noIgnoredFiles(fromList(dt.files).map(function(Tt){return toFileWithPath(Tt)}))]}})})}function noIgnoredFiles(dt){return dt.filter(function($){return FILES_TO_IGNORE.indexOf($.name)===-1})}function fromList(dt){if(dt===null)return[];for(var $=[],lt=0;lt<dt.length;lt++){var ft=dt[lt];$.push(ft)}return $}function toFilePromises(dt){if(typeof dt.webkitGetAsEntry!="function")return fromDataTransferItem(dt);var $=dt.webkitGetAsEntry();return $&&$.isDirectory?fromDirEntry($):fromDataTransferItem(dt)}function flatten$1(dt){return dt.reduce(function($,lt){return __spreadArray(__spreadArray([],__read($),!1),__read(Array.isArray(lt)?flatten$1(lt):[lt]),!1)},[])}function fromDataTransferItem(dt){var $=dt.getAsFile();if(!$)return Promise.reject("".concat(dt," is not a File"));var lt=toFileWithPath($);return Promise.resolve(lt)}function fromEntry(dt){return __awaiter(this,void 0,void 0,function(){return __generator(this,function($){return[2,dt.isDirectory?fromDirEntry(dt):fromFileEntry(dt)]})})}function fromDirEntry(dt){var $=dt.createReader();return new Promise(function(lt,ft){var St=[];function Tt(){var Ct=this;$.readEntries(function(At){return __awaiter(Ct,void 0,void 0,function(){var Rt,kt,Nt;return __generator(this,function(Bt){switch(Bt.label){case 0:if(At.length)return[3,5];Bt.label=1;case 1:return Bt.trys.push([1,3,,4]),[4,Promise.all(St)];case 2:return Rt=Bt.sent(),lt(Rt),[3,4];case 3:return kt=Bt.sent(),ft(kt),[3,4];case 4:return[3,6];case 5:Nt=Promise.all(At.map(fromEntry)),St.push(Nt),Tt(),Bt.label=6;case 6:return[2]}})})},function(At){ft(At)})}Tt()})}function fromFileEntry(dt){return __awaiter(this,void 0,void 0,function(){return __generator(this,function($){return[2,new Promise(function(lt,ft){dt.file(function(St){var Tt=toFileWithPath(St,dt.fullPath);lt(Tt)},function(St){ft(St)})})]})})}var _default=function(dt,$){if(dt&&$){var lt=Array.isArray($)?$:$.split(","),ft=dt.name||"",St=(dt.type||"").toLowerCase(),Tt=St.replace(/\/.*$/,"");return lt.some(function(Ct){var At=Ct.trim().toLowerCase();return At.charAt(0)==="."?ft.toLowerCase().endsWith(At):At.endsWith("/*")?Tt===At.replace(/\/.*$/,""):St===At})}return!0};function _toConsumableArray$1(dt){return _arrayWithoutHoles$1(dt)||_iterableToArray$1(dt)||_unsupportedIterableToArray$1(dt)||_nonIterableSpread$1()}function _nonIterableSpread$1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray$1(dt){if(typeof Symbol<"u"&&dt[Symbol.iterator]!=null||dt["@@iterator"]!=null)return Array.from(dt)}function _arrayWithoutHoles$1(dt){if(Array.isArray(dt))return _arrayLikeToArray$1(dt)}function ownKeys$2(dt,$){var lt=Object.keys(dt);if(Object.getOwnPropertySymbols){var ft=Object.getOwnPropertySymbols(dt);$&&(ft=ft.filter(function(St){return Object.getOwnPropertyDescriptor(dt,St).enumerable})),lt.push.apply(lt,ft)}return lt}function _objectSpread$1(dt){for(var $=1;$<arguments.length;$++){var lt=arguments[$]!=null?arguments[$]:{};$%2?ownKeys$2(Object(lt),!0).forEach(function(ft){_defineProperty$3(dt,ft,lt[ft])}):Object.getOwnPropertyDescriptors?Object.defineProperties(dt,Object.getOwnPropertyDescriptors(lt)):ownKeys$2(Object(lt)).forEach(function(ft){Object.defineProperty(dt,ft,Object.getOwnPropertyDescriptor(lt,ft))})}return dt}function _defineProperty$3(dt,$,lt){return $ in dt?Object.defineProperty(dt,$,{value:lt,enumerable:!0,configurable:!0,writable:!0}):dt[$]=lt,dt}function _slicedToArray$1(dt,$){return _arrayWithHoles$1(dt)||_iterableToArrayLimit$1(dt,$)||_unsupportedIterableToArray$1(dt,$)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$1(dt,$){if(dt){if(typeof dt=="string")return _arrayLikeToArray$1(dt,$);var lt=Object.prototype.toString.call(dt).slice(8,-1);if(lt==="Object"&&dt.constructor&&(lt=dt.constructor.name),lt==="Map"||lt==="Set")return Array.from(dt);if(lt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(lt))return _arrayLikeToArray$1(dt,$)}}function _arrayLikeToArray$1(dt,$){($==null||$>dt.length)&&($=dt.length);for(var lt=0,ft=new Array($);lt<$;lt++)ft[lt]=dt[lt];return ft}function _iterableToArrayLimit$1(dt,$){var lt=dt==null?null:typeof Symbol<"u"&&dt[Symbol.iterator]||dt["@@iterator"];if(lt!=null){var ft=[],St=!0,Tt=!1,Ct,At;try{for(lt=lt.call(dt);!(St=(Ct=lt.next()).done)&&(ft.push(Ct.value),!($&&ft.length===$));St=!0);}catch(Rt){Tt=!0,At=Rt}finally{try{!St&&lt.return!=null&&lt.return()}finally{if(Tt)throw At}}return ft}}function _arrayWithHoles$1(dt){if(Array.isArray(dt))return dt}var FILE_INVALID_TYPE="file-invalid-type",FILE_TOO_LARGE="file-too-large",FILE_TOO_SMALL="file-too-small",TOO_MANY_FILES="too-many-files",getInvalidTypeRejectionErr=function dt($){$=Array.isArray($)&&$.length===1?$[0]:$;var lt=Array.isArray($)?"one of ".concat($.join(", ")):$;return{code:FILE_INVALID_TYPE,message:"File type must be ".concat(lt)}},getTooLargeRejectionErr=function dt($){return{code:FILE_TOO_LARGE,message:"File is larger than ".concat($," ").concat($===1?"byte":"bytes")}},getTooSmallRejectionErr=function dt($){return{code:FILE_TOO_SMALL,message:"File is smaller than ".concat($," ").concat($===1?"byte":"bytes")}},TOO_MANY_FILES_REJECTION={code:TOO_MANY_FILES,message:"Too many files"};function fileAccepted(dt,$){var lt=dt.type==="application/x-moz-file"||_default(dt,$);return[lt,lt?null:getInvalidTypeRejectionErr($)]}function fileMatchSize(dt,$,lt){if(isDefined(dt.size))if(isDefined($)&&isDefined(lt)){if(dt.size>lt)return[!1,getTooLargeRejectionErr(lt)];if(dt.size<$)return[!1,getTooSmallRejectionErr($)]}else{if(isDefined($)&&dt.size<$)return[!1,getTooSmallRejectionErr($)];if(isDefined(lt)&&dt.size>lt)return[!1,getTooLargeRejectionErr(lt)]}return[!0,null]}function isDefined(dt){return dt!=null}function allFilesAccepted(dt){var $=dt.files,lt=dt.accept,ft=dt.minSize,St=dt.maxSize,Tt=dt.multiple,Ct=dt.maxFiles,At=dt.validator;return!Tt&&$.length>1||Tt&&Ct>=1&&$.length>Ct?!1:$.every(function(Rt){var kt=fileAccepted(Rt,lt),Nt=_slicedToArray$1(kt,1),Bt=Nt[0],Ut=fileMatchSize(Rt,ft,St),zt=_slicedToArray$1(Ut,1),Zt=zt[0],ln=At?At(Rt):null;return Bt&&Zt&&!ln})}function isPropagationStopped(dt){return typeof dt.isPropagationStopped=="function"?dt.isPropagationStopped():typeof dt.cancelBubble<"u"?dt.cancelBubble:!1}function isEvtWithFiles(dt){return dt.dataTransfer?Array.prototype.some.call(dt.dataTransfer.types,function($){return $==="Files"||$==="application/x-moz-file"}):!!dt.target&&!!dt.target.files}function onDocumentDragOver(dt){dt.preventDefault()}function isIe(dt){return dt.indexOf("MSIE")!==-1||dt.indexOf("Trident/")!==-1}function isEdge(dt){return dt.indexOf("Edge/")!==-1}function isIeOrEdge(){var dt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return isIe(dt)||isEdge(dt)}function composeEventHandlers(){for(var dt=arguments.length,$=new Array(dt),lt=0;lt<dt;lt++)$[lt]=arguments[lt];return function(ft){for(var St=arguments.length,Tt=new Array(St>1?St-1:0),Ct=1;Ct<St;Ct++)Tt[Ct-1]=arguments[Ct];return $.some(function(At){return!isPropagationStopped(ft)&&At&&At.apply(void 0,[ft].concat(Tt)),isPropagationStopped(ft)})}}function canUseFileSystemAccessAPI(){return"showOpenFilePicker"in window}function pickerOptionsFromAccept(dt){if(isDefined(dt)){var $=Object.entries(dt).filter(function(lt){var ft=_slicedToArray$1(lt,2),St=ft[0],Tt=ft[1],Ct=!0;return isMIMEType(St)||(console.warn('Skipped "'.concat(St,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),Ct=!1),(!Array.isArray(Tt)||!Tt.every(isExt))&&(console.warn('Skipped "'.concat(St,'" because an invalid file extension was provided.')),Ct=!1),Ct}).reduce(function(lt,ft){var St=_slicedToArray$1(ft,2),Tt=St[0],Ct=St[1];return _objectSpread$1(_objectSpread$1({},lt),{},_defineProperty$3({},Tt,Ct))},{});return[{description:"Files",accept:$}]}return dt}function acceptPropAsAcceptAttr(dt){if(isDefined(dt))return Object.entries(dt).reduce(function($,lt){var ft=_slicedToArray$1(lt,2),St=ft[0],Tt=ft[1];return[].concat(_toConsumableArray$1($),[St],_toConsumableArray$1(Tt))},[]).filter(function($){return isMIMEType($)||isExt($)}).join(",")}function isAbort(dt){return dt instanceof DOMException&&(dt.name==="AbortError"||dt.code===dt.ABORT_ERR)}function isSecurityError(dt){return dt instanceof DOMException&&(dt.name==="SecurityError"||dt.code===dt.SECURITY_ERR)}function isMIMEType(dt){return dt==="audio/*"||dt==="video/*"||dt==="image/*"||dt==="text/*"||/\w+\/[-+.\w]+/g.test(dt)}function isExt(dt){return/^.*\.[\w]+$/.test(dt)}var _excluded$2=["children"],_excluded2=["open"],_excluded3=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],_excluded4=["refKey","onChange","onClick"];function _toConsumableArray(dt){return _arrayWithoutHoles(dt)||_iterableToArray(dt)||_unsupportedIterableToArray(dt)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray(dt){if(typeof Symbol<"u"&&dt[Symbol.iterator]!=null||dt["@@iterator"]!=null)return Array.from(dt)}function _arrayWithoutHoles(dt){if(Array.isArray(dt))return _arrayLikeToArray(dt)}function _slicedToArray(dt,$){return _arrayWithHoles(dt)||_iterableToArrayLimit(dt,$)||_unsupportedIterableToArray(dt,$)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(dt,$){if(dt){if(typeof dt=="string")return _arrayLikeToArray(dt,$);var lt=Object.prototype.toString.call(dt).slice(8,-1);if(lt==="Object"&&dt.constructor&&(lt=dt.constructor.name),lt==="Map"||lt==="Set")return Array.from(dt);if(lt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(lt))return _arrayLikeToArray(dt,$)}}function _arrayLikeToArray(dt,$){($==null||$>dt.length)&&($=dt.length);for(var lt=0,ft=new Array($);lt<$;lt++)ft[lt]=dt[lt];return ft}function _iterableToArrayLimit(dt,$){var lt=dt==null?null:typeof Symbol<"u"&&dt[Symbol.iterator]||dt["@@iterator"];if(lt!=null){var ft=[],St=!0,Tt=!1,Ct,At;try{for(lt=lt.call(dt);!(St=(Ct=lt.next()).done)&&(ft.push(Ct.value),!($&&ft.length===$));St=!0);}catch(Rt){Tt=!0,At=Rt}finally{try{!St&&lt.return!=null&&lt.return()}finally{if(Tt)throw At}}return ft}}function _arrayWithHoles(dt){if(Array.isArray(dt))return dt}function ownKeys$1(dt,$){var lt=Object.keys(dt);if(Object.getOwnPropertySymbols){var ft=Object.getOwnPropertySymbols(dt);$&&(ft=ft.filter(function(St){return Object.getOwnPropertyDescriptor(dt,St).enumerable})),lt.push.apply(lt,ft)}return lt}function _objectSpread(dt){for(var $=1;$<arguments.length;$++){var lt=arguments[$]!=null?arguments[$]:{};$%2?ownKeys$1(Object(lt),!0).forEach(function(ft){_defineProperty$2(dt,ft,lt[ft])}):Object.getOwnPropertyDescriptors?Object.defineProperties(dt,Object.getOwnPropertyDescriptors(lt)):ownKeys$1(Object(lt)).forEach(function(ft){Object.defineProperty(dt,ft,Object.getOwnPropertyDescriptor(lt,ft))})}return dt}function _defineProperty$2(dt,$,lt){return $ in dt?Object.defineProperty(dt,$,{value:lt,enumerable:!0,configurable:!0,writable:!0}):dt[$]=lt,dt}function _objectWithoutProperties$1(dt,$){if(dt==null)return{};var lt=_objectWithoutPropertiesLoose$2(dt,$),ft,St;if(Object.getOwnPropertySymbols){var Tt=Object.getOwnPropertySymbols(dt);for(St=0;St<Tt.length;St++)ft=Tt[St],!($.indexOf(ft)>=0)&&Object.prototype.propertyIsEnumerable.call(dt,ft)&&(lt[ft]=dt[ft])}return lt}function _objectWithoutPropertiesLoose$2(dt,$){if(dt==null)return{};var lt={},ft=Object.keys(dt),St,Tt;for(Tt=0;Tt<ft.length;Tt++)St=ft[Tt],!($.indexOf(St)>=0)&&(lt[St]=dt[St]);return lt}var Dropzone=reactExports.forwardRef(function(dt,$){var lt=dt.children,ft=_objectWithoutProperties$1(dt,_excluded$2),St=useDropzone(ft),Tt=St.open,Ct=_objectWithoutProperties$1(St,_excluded2);return reactExports.useImperativeHandle($,function(){return{open:Tt}},[Tt]),React.createElement(reactExports.Fragment,null,lt(_objectSpread(_objectSpread({},Ct),{},{open:Tt})))});Dropzone.displayName="Dropzone";var defaultProps={disabled:!1,getFilesFromEvent:fromEvent,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};Dropzone.defaultProps=defaultProps;Dropzone.propTypes={children:PropTypes.func,accept:PropTypes.objectOf(PropTypes.arrayOf(PropTypes.string)),multiple:PropTypes.bool,preventDropOnDocument:PropTypes.bool,noClick:PropTypes.bool,noKeyboard:PropTypes.bool,noDrag:PropTypes.bool,noDragEventsBubbling:PropTypes.bool,minSize:PropTypes.number,maxSize:PropTypes.number,maxFiles:PropTypes.number,disabled:PropTypes.bool,getFilesFromEvent:PropTypes.func,onFileDialogCancel:PropTypes.func,onFileDialogOpen:PropTypes.func,useFsAccessApi:PropTypes.bool,autoFocus:PropTypes.bool,onDragEnter:PropTypes.func,onDragLeave:PropTypes.func,onDragOver:PropTypes.func,onDrop:PropTypes.func,onDropAccepted:PropTypes.func,onDropRejected:PropTypes.func,onError:PropTypes.func,validator:PropTypes.func};var initialState={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function useDropzone(){var dt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},$=_objectSpread(_objectSpread({},defaultProps),dt),lt=$.accept,ft=$.disabled,St=$.getFilesFromEvent,Tt=$.maxSize,Ct=$.minSize,At=$.multiple,Rt=$.maxFiles,kt=$.onDragEnter,Nt=$.onDragLeave,Bt=$.onDragOver,Ut=$.onDrop,zt=$.onDropAccepted,Zt=$.onDropRejected,ln=$.onFileDialogCancel,cn=$.onFileDialogOpen,hn=$.useFsAccessApi,pn=$.autoFocus,dn=$.preventDropOnDocument,gn=$.noClick,vn=$.noKeyboard,Tn=$.noDrag,Cn=$.noDragEventsBubbling,$n=$.onError,xn=$.validator,Rn=reactExports.useMemo(function(){return acceptPropAsAcceptAttr(lt)},[lt]),Pn=reactExports.useMemo(function(){return pickerOptionsFromAccept(lt)},[lt]),Nn=reactExports.useMemo(function(){return typeof cn=="function"?cn:noop$1},[cn]),Wn=reactExports.useMemo(function(){return typeof ln=="function"?ln:noop$1},[ln]),zn=reactExports.useRef(null),Yn=reactExports.useRef(null),Qn=reactExports.useReducer(reducer,initialState),nr=_slicedToArray(Qn,2),Ln=nr[0],Un=nr[1],Vn=Ln.isFocused,sr=Ln.isFileDialogActive,In=reactExports.useRef(typeof window<"u"&&window.isSecureContext&&hn&&canUseFileSystemAccessAPI()),ir=function(){!In.current&&sr&&setTimeout(function(){if(Yn.current){var Or=Yn.current.files;Or.length||(Un({type:"closeDialog"}),Wn())}},300)};reactExports.useEffect(function(){return window.addEventListener("focus",ir,!1),function(){window.removeEventListener("focus",ir,!1)}},[Yn,sr,Wn,In]);var pr=reactExports.useRef([]),Jn=function(Or){zn.current&&zn.current.contains(Or.target)||(Or.preventDefault(),pr.current=[])};reactExports.useEffect(function(){return dn&&(document.addEventListener("dragover",onDocumentDragOver,!1),document.addEventListener("drop",Jn,!1)),function(){dn&&(document.removeEventListener("dragover",onDocumentDragOver),document.removeEventListener("drop",Jn))}},[zn,dn]),reactExports.useEffect(function(){return!ft&&pn&&zn.current&&zn.current.focus(),function(){}},[zn,pn,ft]);var Pr=reactExports.useCallback(function(rr){$n?$n(rr):console.error(rr)},[$n]),br=reactExports.useCallback(function(rr){rr.preventDefault(),rr.persist(),Mo(rr),pr.current=[].concat(_toConsumableArray(pr.current),[rr.target]),isEvtWithFiles(rr)&&Promise.resolve(St(rr)).then(function(Or){if(!(isPropagationStopped(rr)&&!Cn)){var Ar=Or.length,Br=Ar>0&&allFilesAccepted({files:Or,accept:Rn,minSize:Ct,maxSize:Tt,multiple:At,maxFiles:Rt,validator:xn}),fr=Ar>0&&!Br;Un({isDragAccept:Br,isDragReject:fr,isDragActive:!0,type:"setDraggedFiles"}),kt&&kt(rr)}}).catch(function(Or){return Pr(Or)})},[St,kt,Pr,Cn,Rn,Ct,Tt,At,Rt,xn]),Gr=reactExports.useCallback(function(rr){rr.preventDefault(),rr.persist(),Mo(rr);var Or=isEvtWithFiles(rr);if(Or&&rr.dataTransfer)try{rr.dataTransfer.dropEffect="copy"}catch{}return Or&&Bt&&Bt(rr),!1},[Bt,Cn]),Kr=reactExports.useCallback(function(rr){rr.preventDefault(),rr.persist(),Mo(rr);var Or=pr.current.filter(function(Br){return zn.current&&zn.current.contains(Br)}),Ar=Or.indexOf(rr.target);Ar!==-1&&Or.splice(Ar,1),pr.current=Or,!(Or.length>0)&&(Un({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),isEvtWithFiles(rr)&&Nt&&Nt(rr))},[zn,Nt,Cn]),Xr=reactExports.useCallback(function(rr,Or){var Ar=[],Br=[];rr.forEach(function(fr){var Yr=fileAccepted(fr,Rn),wr=_slicedToArray(Yr,2),ao=wr[0],Kn=wr[1],Sr=fileMatchSize(fr,Ct,Tt),Dr=_slicedToArray(Sr,2),En=Dr[0],Dn=Dr[1],Zn=xn?xn(fr):null;if(ao&&En&&!Zn)Ar.push(fr);else{var ur=[Kn,Dn];Zn&&(ur=ur.concat(Zn)),Br.push({file:fr,errors:ur.filter(function(Bn){return Bn})})}}),(!At&&Ar.length>1||At&&Rt>=1&&Ar.length>Rt)&&(Ar.forEach(function(fr){Br.push({file:fr,errors:[TOO_MANY_FILES_REJECTION]})}),Ar.splice(0)),Un({acceptedFiles:Ar,fileRejections:Br,type:"setFiles"}),Ut&&Ut(Ar,Br,Or),Br.length>0&&Zt&&Zt(Br,Or),Ar.length>0&&zt&&zt(Ar,Or)},[Un,At,Rn,Ct,Tt,Rt,Ut,zt,Zt,xn]),Jr=reactExports.useCallback(function(rr){rr.preventDefault(),rr.persist(),Mo(rr),pr.current=[],isEvtWithFiles(rr)&&Promise.resolve(St(rr)).then(function(Or){isPropagationStopped(rr)&&!Cn||Xr(Or,rr)}).catch(function(Or){return Pr(Or)}),Un({type:"reset"})},[St,Xr,Pr,Cn]),Tr=reactExports.useCallback(function(){if(In.current){Un({type:"openDialog"}),Nn();var rr={multiple:At,types:Pn};window.showOpenFilePicker(rr).then(function(Or){return St(Or)}).then(function(Or){Xr(Or,null),Un({type:"closeDialog"})}).catch(function(Or){isAbort(Or)?(Wn(Or),Un({type:"closeDialog"})):isSecurityError(Or)?(In.current=!1,Yn.current?(Yn.current.value=null,Yn.current.click()):Pr(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):Pr(Or)});return}Yn.current&&(Un({type:"openDialog"}),Nn(),Yn.current.value=null,Yn.current.click())},[Un,Nn,Wn,hn,Xr,Pr,Pn,At]),Ir=reactExports.useCallback(function(rr){!zn.current||!zn.current.isEqualNode(rr.target)||(rr.key===" "||rr.key==="Enter"||rr.keyCode===32||rr.keyCode===13)&&(rr.preventDefault(),Tr())},[zn,Tr]),Qr=reactExports.useCallback(function(){Un({type:"focus"})},[]),oo=reactExports.useCallback(function(){Un({type:"blur"})},[]),zr=reactExports.useCallback(function(){gn||(isIeOrEdge()?setTimeout(Tr,0):Tr())},[gn,Tr]),to=function(Or){return ft?null:Or},co=function(Or){return vn?null:to(Or)},uo=function(Or){return Tn?null:to(Or)},Mo=function(Or){Cn&&Or.stopPropagation()},Vo=reactExports.useMemo(function(){return function(){var rr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Or=rr.refKey,Ar=Or===void 0?"ref":Or,Br=rr.role,fr=rr.onKeyDown,Yr=rr.onFocus,wr=rr.onBlur,ao=rr.onClick,Kn=rr.onDragEnter,Sr=rr.onDragOver,Dr=rr.onDragLeave,En=rr.onDrop,Dn=_objectWithoutProperties$1(rr,_excluded3);return _objectSpread(_objectSpread(_defineProperty$2({onKeyDown:co(composeEventHandlers(fr,Ir)),onFocus:co(composeEventHandlers(Yr,Qr)),onBlur:co(composeEventHandlers(wr,oo)),onClick:to(composeEventHandlers(ao,zr)),onDragEnter:uo(composeEventHandlers(Kn,br)),onDragOver:uo(composeEventHandlers(Sr,Gr)),onDragLeave:uo(composeEventHandlers(Dr,Kr)),onDrop:uo(composeEventHandlers(En,Jr)),role:typeof Br=="string"&&Br!==""?Br:"presentation"},Ar,zn),!ft&&!vn?{tabIndex:0}:{}),Dn)}},[zn,Ir,Qr,oo,zr,br,Gr,Kr,Jr,vn,Tn,ft]),jn=reactExports.useCallback(function(rr){rr.stopPropagation()},[]),Gn=reactExports.useMemo(function(){return function(){var rr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Or=rr.refKey,Ar=Or===void 0?"ref":Or,Br=rr.onChange,fr=rr.onClick,Yr=_objectWithoutProperties$1(rr,_excluded4),wr=_defineProperty$2({accept:Rn,multiple:At,type:"file",style:{display:"none"},onChange:to(composeEventHandlers(Br,Jr)),onClick:to(composeEventHandlers(fr,jn)),tabIndex:-1},Ar,Yn);return _objectSpread(_objectSpread({},wr),Yr)}},[Yn,lt,At,Jr,ft]);return _objectSpread(_objectSpread({},Ln),{},{isFocused:Vn&&!ft,getRootProps:Vo,getInputProps:Gn,rootRef:zn,inputRef:Yn,open:to(Tr)})}function reducer(dt,$){switch($.type){case"focus":return _objectSpread(_objectSpread({},dt),{},{isFocused:!0});case"blur":return _objectSpread(_objectSpread({},dt),{},{isFocused:!1});case"openDialog":return _objectSpread(_objectSpread({},initialState),{},{isFileDialogActive:!0});case"closeDialog":return _objectSpread(_objectSpread({},dt),{},{isFileDialogActive:!1});case"setDraggedFiles":return _objectSpread(_objectSpread({},dt),{},{isDragActive:$.isDragActive,isDragAccept:$.isDragAccept,isDragReject:$.isDragReject});case"setFiles":return _objectSpread(_objectSpread({},dt),{},{acceptedFiles:$.acceptedFiles,fileRejections:$.fileRejections});case"reset":return _objectSpread({},initialState);default:return dt}}function noop$1(){}const CancelButton=({onClick:dt})=>jsx(Button,{color:"gray",onClick:dt,children:"Cancel"}),UploadFileModal=({open:dt,onClose:$,onFileUpload:lt,header:ft})=>{const St=reactExports.useCallback(kt=>{kt.forEach(Nt=>{const Bt=new FileReader;Bt.onabort=()=>console.log("file reading was aborted!"),Bt.onerror=()=>console.log("file reading failed!"),Bt.onload=()=>{lt(Bt.result),$()},Bt.readAsBinaryString(Nt)})},[]),{getRootProps:Tt,getInputProps:Ct,isDragActive:At,inputRef:Rt}=useDropzone({onDrop:kt=>St(kt),multiple:!1,onDragEnter:kt=>{},onDragLeave:kt=>{},onDragOver:kt=>{},accept:{"application/json":[".robart"]}});return jsxs(Modal,{show:dt,onClose:$,children:[jsx(Modal.Header,{children:ft}),jsx(Modal.Body,{children:jsxs("div",{className:"border-1 flex justify-center border-gray-500 bg-gray-50 p-5 py-14 text-lg shadow-lg",...Tt(),children:[jsx("input",{ref:Rt,...Ct()}),jsx("p",{children:"Drag & drop a project file here, or click to select a file"})]})}),jsx(Modal.Footer,{children:jsx(CancelButton,{onClick:$})})]})},useUIState=create$2()((dt,$)=>({settingsModalOpen:!1,curveEditorOpen:!1,openSimulation:!1,robotManagerModalOpen:!1,toggleSettingsModal:()=>dt({settingsModalOpen:!$().settingsModalOpen}),toggleCurveEditor:()=>dt({curveEditorOpen:!$().curveEditorOpen}),toggleRobotManager:()=>{dt({robotManagerModalOpen:!$().robotManagerModalOpen})},toggleSimulation:()=>{dt({openSimulation:!$().openSimulation})}})),ConfirmationModal=({open:dt,onCancel:$,onConfirm:lt,header:ft,children:St})=>jsxs(Modal,{show:dt,onClose:$,children:[jsx(Modal.Header,{children:ft}),jsx(Modal.Body,{children:St}),jsxs(Modal.Footer,{children:[jsx(Button,{color:"gray",onClick:$,children:"Cancel"}),jsx(Button,{color:"failure",onClick:lt,children:"Confirm"})]})]});var constants={exports:{}},reactReconcilerConstants_production_min={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */reactReconcilerConstants_production_min.ConcurrentRoot=1;reactReconcilerConstants_production_min.ContinuousEventPriority=4;reactReconcilerConstants_production_min.DefaultEventPriority=16;reactReconcilerConstants_production_min.DiscreteEventPriority=1;reactReconcilerConstants_production_min.IdleEventPriority=536870912;reactReconcilerConstants_production_min.LegacyRoot=0;constants.exports=reactReconcilerConstants_production_min;var constantsExports=constants.exports;function createStore$1(dt){let $;const lt=new Set,ft=(kt,Nt)=>{const Bt=typeof kt=="function"?kt($):kt;if(Bt!==$){const Ut=$;$=Nt?Bt:Object.assign({},$,Bt),lt.forEach(zt=>zt($,Ut))}},St=()=>$,Tt=(kt,Nt=St,Bt=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let Ut=Nt($);function zt(){const Zt=Nt($);if(!Bt(Ut,Zt)){const ln=Ut;kt(Ut=Zt,ln)}}return lt.add(zt),()=>lt.delete(zt)},Rt={setState:ft,getState:St,subscribe:(kt,Nt,Bt)=>Nt||Bt?Tt(kt,Nt,Bt):(lt.add(kt),()=>lt.delete(kt)),destroy:()=>lt.clear()};return $=dt(ft,St,Rt),Rt}const isSSR=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),useIsomorphicLayoutEffect$1=isSSR?reactExports.useEffect:reactExports.useLayoutEffect;function create$1(dt){const $=typeof dt=="function"?createStore$1(dt):dt,lt=(ft=$.getState,St=Object.is)=>{const[,Tt]=reactExports.useReducer(cn=>cn+1,0),Ct=$.getState(),At=reactExports.useRef(Ct),Rt=reactExports.useRef(ft),kt=reactExports.useRef(St),Nt=reactExports.useRef(!1),Bt=reactExports.useRef();Bt.current===void 0&&(Bt.current=ft(Ct));let Ut,zt=!1;(At.current!==Ct||Rt.current!==ft||kt.current!==St||Nt.current)&&(Ut=ft(Ct),zt=!St(Bt.current,Ut)),useIsomorphicLayoutEffect$1(()=>{zt&&(Bt.current=Ut),At.current=Ct,Rt.current=ft,kt.current=St,Nt.current=!1});const Zt=reactExports.useRef(Ct);useIsomorphicLayoutEffect$1(()=>{const cn=()=>{try{const pn=$.getState(),dn=Rt.current(pn);kt.current(Bt.current,dn)||(At.current=pn,Bt.current=dn,Tt())}catch{Nt.current=!0,Tt()}},hn=$.subscribe(cn);return $.getState()!==Zt.current&&cn(),hn},[]);const ln=zt?Ut:Bt.current;return reactExports.useDebugValue(ln),ln};return Object.assign(lt,$),lt[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const ft=[lt,$];return{next(){const St=ft.length<=0;return{value:ft.shift(),done:St}}}},lt}var reactReconciler={exports:{}},scheduler$1={exports:{}},scheduler_production_min$1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,function(dt){function $(Ln,Un){var Vn=Ln.length;Ln.push(Un);e:for(;0<Vn;){var sr=Vn-1>>>1,In=Ln[sr];if(0<St(In,Un))Ln[sr]=Un,Ln[Vn]=In,Vn=sr;else break e}}function lt(Ln){return Ln.length===0?null:Ln[0]}function ft(Ln){if(Ln.length===0)return null;var Un=Ln[0],Vn=Ln.pop();if(Vn!==Un){Ln[0]=Vn;e:for(var sr=0,In=Ln.length,ir=In>>>1;sr<ir;){var pr=2*(sr+1)-1,Jn=Ln[pr],Pr=pr+1,br=Ln[Pr];if(0>St(Jn,Vn))Pr<In&&0>St(br,Jn)?(Ln[sr]=br,Ln[Pr]=Vn,sr=Pr):(Ln[sr]=Jn,Ln[pr]=Vn,sr=pr);else if(Pr<In&&0>St(br,Vn))Ln[sr]=br,Ln[Pr]=Vn,sr=Pr;else break e}}return Un}function St(Ln,Un){var Vn=Ln.sortIndex-Un.sortIndex;return Vn!==0?Vn:Ln.id-Un.id}if(typeof performance=="object"&&typeof performance.now=="function"){var Tt=performance;dt.unstable_now=function(){return Tt.now()}}else{var Ct=Date,At=Ct.now();dt.unstable_now=function(){return Ct.now()-At}}var Rt=[],kt=[],Nt=1,Bt=null,Ut=3,zt=!1,Zt=!1,ln=!1,cn=typeof setTimeout=="function"?setTimeout:null,hn=typeof clearTimeout=="function"?clearTimeout:null,pn=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function dn(Ln){for(var Un=lt(kt);Un!==null;){if(Un.callback===null)ft(kt);else if(Un.startTime<=Ln)ft(kt),Un.sortIndex=Un.expirationTime,$(Rt,Un);else break;Un=lt(kt)}}function gn(Ln){if(ln=!1,dn(Ln),!Zt)if(lt(Rt)!==null)Zt=!0,Qn(vn);else{var Un=lt(kt);Un!==null&&nr(gn,Un.startTime-Ln)}}function vn(Ln,Un){Zt=!1,ln&&(ln=!1,hn($n),$n=-1),zt=!0;var Vn=Ut;try{for(dn(Un),Bt=lt(Rt);Bt!==null&&(!(Bt.expirationTime>Un)||Ln&&!Pn());){var sr=Bt.callback;if(typeof sr=="function"){Bt.callback=null,Ut=Bt.priorityLevel;var In=sr(Bt.expirationTime<=Un);Un=dt.unstable_now(),typeof In=="function"?Bt.callback=In:Bt===lt(Rt)&&ft(Rt),dn(Un)}else ft(Rt);Bt=lt(Rt)}if(Bt!==null)var ir=!0;else{var pr=lt(kt);pr!==null&&nr(gn,pr.startTime-Un),ir=!1}return ir}finally{Bt=null,Ut=Vn,zt=!1}}var Tn=!1,Cn=null,$n=-1,xn=5,Rn=-1;function Pn(){return!(dt.unstable_now()-Rn<xn)}function Nn(){if(Cn!==null){var Ln=dt.unstable_now();Rn=Ln;var Un=!0;try{Un=Cn(!0,Ln)}finally{Un?Wn():(Tn=!1,Cn=null)}}else Tn=!1}var Wn;if(typeof pn=="function")Wn=function(){pn(Nn)};else if(typeof MessageChannel<"u"){var zn=new MessageChannel,Yn=zn.port2;zn.port1.onmessage=Nn,Wn=function(){Yn.postMessage(null)}}else Wn=function(){cn(Nn,0)};function Qn(Ln){Cn=Ln,Tn||(Tn=!0,Wn())}function nr(Ln,Un){$n=cn(function(){Ln(dt.unstable_now())},Un)}dt.unstable_IdlePriority=5,dt.unstable_ImmediatePriority=1,dt.unstable_LowPriority=4,dt.unstable_NormalPriority=3,dt.unstable_Profiling=null,dt.unstable_UserBlockingPriority=2,dt.unstable_cancelCallback=function(Ln){Ln.callback=null},dt.unstable_continueExecution=function(){Zt||zt||(Zt=!0,Qn(vn))},dt.unstable_forceFrameRate=function(Ln){0>Ln||125<Ln?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):xn=0<Ln?Math.floor(1e3/Ln):5},dt.unstable_getCurrentPriorityLevel=function(){return Ut},dt.unstable_getFirstCallbackNode=function(){return lt(Rt)},dt.unstable_next=function(Ln){switch(Ut){case 1:case 2:case 3:var Un=3;break;default:Un=Ut}var Vn=Ut;Ut=Un;try{return Ln()}finally{Ut=Vn}},dt.unstable_pauseExecution=function(){},dt.unstable_requestPaint=function(){},dt.unstable_runWithPriority=function(Ln,Un){switch(Ln){case 1:case 2:case 3:case 4:case 5:break;default:Ln=3}var Vn=Ut;Ut=Ln;try{return Un()}finally{Ut=Vn}},dt.unstable_scheduleCallback=function(Ln,Un,Vn){var sr=dt.unstable_now();switch(typeof Vn=="object"&&Vn!==null?(Vn=Vn.delay,Vn=typeof Vn=="number"&&0<Vn?sr+Vn:sr):Vn=sr,Ln){case 1:var In=-1;break;case 2:In=250;break;case 5:In=1073741823;break;case 4:In=1e4;break;default:In=5e3}return In=Vn+In,Ln={id:Nt++,callback:Un,priorityLevel:Ln,startTime:Vn,expirationTime:In,sortIndex:-1},Vn>sr?(Ln.sortIndex=Vn,$(kt,Ln),lt(Rt)===null&&Ln===lt(kt)&&(ln?(hn($n),$n=-1):ln=!0,nr(gn,Vn-sr))):(Ln.sortIndex=In,$(Rt,Ln),Zt||zt||(Zt=!0,Qn(vn))),Ln},dt.unstable_shouldYield=Pn,dt.unstable_wrapCallback=function(Ln){var Un=Ut;return function(){var Vn=Ut;Ut=Un;try{return Ln.apply(this,arguments)}finally{Ut=Vn}}}}(scheduler_production_min$1)),scheduler_production_min$1}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler$1.exports=requireScheduler_production_min()),scheduler$1.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var reactReconciler_production_min=function dt($){var lt={},ft=reactExports,St=requireScheduler(),Tt=Object.assign;function Ct(Wt){for(var Ht="https://reactjs.org/docs/error-decoder.html?invariant="+Wt,mn=1;mn<arguments.length;mn++)Ht+="&args[]="+encodeURIComponent(arguments[mn]);return"Minified React error #"+Wt+"; visit "+Ht+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var At=ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rt=Symbol.for("react.element"),kt=Symbol.for("react.portal"),Nt=Symbol.for("react.fragment"),Bt=Symbol.for("react.strict_mode"),Ut=Symbol.for("react.profiler"),zt=Symbol.for("react.provider"),Zt=Symbol.for("react.context"),ln=Symbol.for("react.forward_ref"),cn=Symbol.for("react.suspense"),hn=Symbol.for("react.suspense_list"),pn=Symbol.for("react.memo"),dn=Symbol.for("react.lazy"),gn=Symbol.for("react.offscreen"),vn=Symbol.iterator;function Tn(Wt){return Wt===null||typeof Wt!="object"?null:(Wt=vn&&Wt[vn]||Wt["@@iterator"],typeof Wt=="function"?Wt:null)}function Cn(Wt){if(Wt==null)return null;if(typeof Wt=="function")return Wt.displayName||Wt.name||null;if(typeof Wt=="string")return Wt;switch(Wt){case Nt:return"Fragment";case kt:return"Portal";case Ut:return"Profiler";case Bt:return"StrictMode";case cn:return"Suspense";case hn:return"SuspenseList"}if(typeof Wt=="object")switch(Wt.$$typeof){case Zt:return(Wt.displayName||"Context")+".Consumer";case zt:return(Wt._context.displayName||"Context")+".Provider";case ln:var Ht=Wt.render;return Wt=Wt.displayName,Wt||(Wt=Ht.displayName||Ht.name||"",Wt=Wt!==""?"ForwardRef("+Wt+")":"ForwardRef"),Wt;case pn:return Ht=Wt.displayName||null,Ht!==null?Ht:Cn(Wt.type)||"Memo";case dn:Ht=Wt._payload,Wt=Wt._init;try{return Cn(Wt(Ht))}catch{}}return null}function $n(Wt){var Ht=Wt.type;switch(Wt.tag){case 24:return"Cache";case 9:return(Ht.displayName||"Context")+".Consumer";case 10:return(Ht._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return Wt=Ht.render,Wt=Wt.displayName||Wt.name||"",Ht.displayName||(Wt!==""?"ForwardRef("+Wt+")":"ForwardRef");case 7:return"Fragment";case 5:return Ht;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Cn(Ht);case 8:return Ht===Bt?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof Ht=="function")return Ht.displayName||Ht.name||null;if(typeof Ht=="string")return Ht}return null}function xn(Wt){var Ht=Wt,mn=Wt;if(Wt.alternate)for(;Ht.return;)Ht=Ht.return;else{Wt=Ht;do Ht=Wt,Ht.flags&4098&&(mn=Ht.return),Wt=Ht.return;while(Wt)}return Ht.tag===3?mn:null}function Rn(Wt){if(xn(Wt)!==Wt)throw Error(Ct(188))}function Pn(Wt){var Ht=Wt.alternate;if(!Ht){if(Ht=xn(Wt),Ht===null)throw Error(Ct(188));return Ht!==Wt?null:Wt}for(var mn=Wt,On=Ht;;){var bn=mn.return;if(bn===null)break;var An=bn.alternate;if(An===null){if(On=bn.return,On!==null){mn=On;continue}break}if(bn.child===An.child){for(An=bn.child;An;){if(An===mn)return Rn(bn),Wt;if(An===On)return Rn(bn),Ht;An=An.sibling}throw Error(Ct(188))}if(mn.return!==On.return)mn=bn,On=An;else{for(var Xn=!1,lr=bn.child;lr;){if(lr===mn){Xn=!0,mn=bn,On=An;break}if(lr===On){Xn=!0,On=bn,mn=An;break}lr=lr.sibling}if(!Xn){for(lr=An.child;lr;){if(lr===mn){Xn=!0,mn=An,On=bn;break}if(lr===On){Xn=!0,On=An,mn=bn;break}lr=lr.sibling}if(!Xn)throw Error(Ct(189))}}if(mn.alternate!==On)throw Error(Ct(190))}if(mn.tag!==3)throw Error(Ct(188));return mn.stateNode.current===mn?Wt:Ht}function Nn(Wt){return Wt=Pn(Wt),Wt!==null?Wn(Wt):null}function Wn(Wt){if(Wt.tag===5||Wt.tag===6)return Wt;for(Wt=Wt.child;Wt!==null;){var Ht=Wn(Wt);if(Ht!==null)return Ht;Wt=Wt.sibling}return null}function zn(Wt){if(Wt.tag===5||Wt.tag===6)return Wt;for(Wt=Wt.child;Wt!==null;){if(Wt.tag!==4){var Ht=zn(Wt);if(Ht!==null)return Ht}Wt=Wt.sibling}return null}var Yn=Array.isArray,Qn=$.getPublicInstance,nr=$.getRootHostContext,Ln=$.getChildHostContext,Un=$.prepareForCommit,Vn=$.resetAfterCommit,sr=$.createInstance,In=$.appendInitialChild,ir=$.finalizeInitialChildren,pr=$.prepareUpdate,Jn=$.shouldSetTextContent,Pr=$.createTextInstance,br=$.scheduleTimeout,Gr=$.cancelTimeout,Kr=$.noTimeout,Xr=$.isPrimaryRenderer,Jr=$.supportsMutation,Tr=$.supportsPersistence,Ir=$.supportsHydration,Qr=$.getInstanceFromNode,oo=$.preparePortalMount,zr=$.getCurrentEventPriority,to=$.detachDeletedInstance,co=$.supportsMicrotasks,uo=$.scheduleMicrotask,Mo=$.supportsTestSelectors,Vo=$.findFiberRoot,jn=$.getBoundingRect,Gn=$.getTextContent,rr=$.isHiddenSubtree,Or=$.matchAccessibilityRole,Ar=$.setFocusIfFocusable,Br=$.setupIntersectionObserver,fr=$.appendChild,Yr=$.appendChildToContainer,wr=$.commitTextUpdate,ao=$.commitMount,Kn=$.commitUpdate,Sr=$.insertBefore,Dr=$.insertInContainerBefore,En=$.removeChild,Dn=$.removeChildFromContainer,Zn=$.resetTextContent,ur=$.hideInstance,Bn=$.hideTextInstance,hr=$.unhideInstance,Nr=$.unhideTextInstance,ro=$.clearContainer,ho=$.cloneInstance,ns=$.createContainerChildSet,ls=$.appendChildToContainerChildSet,Ds=$.finalizeContainerChildren,Gs=$.replaceContainerChildren,ss=$.cloneHiddenInstance,cs=$.cloneHiddenTextInstance,Il=$.canHydrateInstance,PO=$.canHydrateTextInstance,xo=$.canHydrateSuspenseInstance,b_=$.isSuspenseInstancePending,Hn=$.isSuspenseInstanceFallback,_r=$.registerSuspenseInstanceRetry,xr=$.getNextHydratableSibling,dr=$.getFirstHydratableChild,Rr=$.getFirstHydratableChildWithinContainer,So=$.getFirstHydratableChildWithinSuspenseInstance,bo=$.hydrateInstance,Lo=$.hydrateTextInstance,Eo=$.hydrateSuspenseInstance,Ao=$.getNextHydratableInstanceAfterSuspenseInstance,wo=$.commitHydratedContainer,Fr=$.commitHydratedSuspenseInstance,_s=$.clearSuspenseBoundary,Hs=$.clearSuspenseBoundaryFromContainer,El=$.shouldDeleteUnhydratedTailInstances,au=$.didNotMatchHydratedContainerTextInstance,Bo=$.didNotMatchHydratedTextInstance,yo;function os(Wt){if(yo===void 0)try{throw Error()}catch(mn){var Ht=mn.stack.trim().match(/\n( *(at )?)/);yo=Ht&&Ht[1]||""}return`
`+yo+Wt}var Ro=!1;function io(Wt,Ht){if(!Wt||Ro)return"";Ro=!0;var mn=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(Ht)if(Ht=function(){throw Error()},Object.defineProperty(Ht.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ht,[])}catch(Hr){var On=Hr}Reflect.construct(Wt,[],Ht)}else{try{Ht.call()}catch(Hr){On=Hr}Wt.call(Ht.prototype)}else{try{throw Error()}catch(Hr){On=Hr}Wt()}}catch(Hr){if(Hr&&On&&typeof Hr.stack=="string"){for(var bn=Hr.stack.split(`
`),An=On.stack.split(`
`),Xn=bn.length-1,lr=An.length-1;1<=Xn&&0<=lr&&bn[Xn]!==An[lr];)lr--;for(;1<=Xn&&0<=lr;Xn--,lr--)if(bn[Xn]!==An[lr]){if(Xn!==1||lr!==1)do if(Xn--,lr--,0>lr||bn[Xn]!==An[lr]){var Er=`
`+bn[Xn].replace(" at new "," at ");return Wt.displayName&&Er.includes("<anonymous>")&&(Er=Er.replace("<anonymous>",Wt.displayName)),Er}while(1<=Xn&&0<=lr);break}}}finally{Ro=!1,Error.prepareStackTrace=mn}return(Wt=Wt?Wt.displayName||Wt.name:"")?os(Wt):""}var S_=Object.prototype.hasOwnProperty,Xl=[],lu=-1;function us(Wt){return{current:Wt}}function Vr(Wt){0>lu||(Wt.current=Xl[lu],Xl[lu]=null,lu--)}function Yo(Wt,Ht){lu++,Xl[lu]=Wt.current,Wt.current=Ht}var Os={},ws=us(Os),zs=us(!1),No=Os;function Ml(Wt,Ht){var mn=Wt.type.contextTypes;if(!mn)return Os;var On=Wt.stateNode;if(On&&On.__reactInternalMemoizedUnmaskedChildContext===Ht)return On.__reactInternalMemoizedMaskedChildContext;var bn={},An;for(An in mn)bn[An]=Ht[An];return On&&(Wt=Wt.stateNode,Wt.__reactInternalMemoizedUnmaskedChildContext=Ht,Wt.__reactInternalMemoizedMaskedChildContext=bn),bn}function Js(Wt){return Wt=Wt.childContextTypes,Wt!=null}function xm(){Vr(zs),Vr(ws)}function wm(Wt,Ht,mn){if(ws.current!==Os)throw Error(Ct(168));Yo(ws,Ht),Yo(zs,mn)}function w0(Wt,Ht,mn){var On=Wt.stateNode;if(Ht=Ht.childContextTypes,typeof On.getChildContext!="function")return mn;On=On.getChildContext();for(var bn in On)if(!(bn in Ht))throw Error(Ct(108,$n(Wt)||"Unknown",bn));return Tt({},mn,On)}function jp(Wt){return Wt=(Wt=Wt.stateNode)&&Wt.__reactInternalMemoizedMergedChildContext||Os,No=ws.current,Yo(ws,Wt),Yo(zs,zs.current),!0}function C0(Wt,Ht,mn){var On=Wt.stateNode;if(!On)throw Error(Ct(169));mn?(Wt=w0(Wt,Ht,No),On.__reactInternalMemoizedMergedChildContext=Wt,Vr(zs),Vr(ws),Yo(ws,Wt)):Vr(zs),Yo(zs,mn)}var cu=Math.clz32?Math.clz32:DO,LO=Math.log,tS=Math.LN2;function DO(Wt){return Wt>>>=0,Wt===0?32:31-(LO(Wt)/tS|0)|0}var $_=64,Xp=4194304;function Yp(Wt){switch(Wt&-Wt){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return Wt&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return Wt&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return Wt}}function Cm(Wt,Ht){var mn=Wt.pendingLanes;if(mn===0)return 0;var On=0,bn=Wt.suspendedLanes,An=Wt.pingedLanes,Xn=mn&268435455;if(Xn!==0){var lr=Xn&~bn;lr!==0?On=Yp(lr):(An&=Xn,An!==0&&(On=Yp(An)))}else Xn=mn&~bn,Xn!==0?On=Yp(Xn):An!==0&&(On=Yp(An));if(On===0)return 0;if(Ht!==0&&Ht!==On&&!(Ht&bn)&&(bn=On&-On,An=Ht&-Ht,bn>=An||bn===16&&(An&4194240)!==0))return Ht;if(On&4&&(On|=mn&16),Ht=Wt.entangledLanes,Ht!==0)for(Wt=Wt.entanglements,Ht&=On;0<Ht;)mn=31-cu(Ht),bn=1<<mn,On|=Wt[mn],Ht&=~bn;return On}function nS(Wt,Ht){switch(Wt){case 1:case 2:case 4:return Ht+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return Ht+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function NO(Wt,Ht){for(var mn=Wt.suspendedLanes,On=Wt.pingedLanes,bn=Wt.expirationTimes,An=Wt.pendingLanes;0<An;){var Xn=31-cu(An),lr=1<<Xn,Er=bn[Xn];Er===-1?(!(lr&mn)||lr&On)&&(bn[Xn]=nS(lr,Ht)):Er<=Ht&&(Wt.expiredLanes|=lr),An&=~lr}}function bp(Wt){return Wt=Wt.pendingLanes&-1073741825,Wt!==0?Wt:Wt&1073741824?1073741824:0}function T_(Wt){for(var Ht=[],mn=0;31>mn;mn++)Ht.push(Wt);return Ht}function Sp(Wt,Ht,mn){Wt.pendingLanes|=Ht,Ht!==536870912&&(Wt.suspendedLanes=0,Wt.pingedLanes=0),Wt=Wt.eventTimes,Ht=31-cu(Ht),Wt[Ht]=mn}function rS(Wt,Ht){var mn=Wt.pendingLanes&~Ht;Wt.pendingLanes=Ht,Wt.suspendedLanes=0,Wt.pingedLanes=0,Wt.expiredLanes&=Ht,Wt.mutableReadLanes&=Ht,Wt.entangledLanes&=Ht,Ht=Wt.entanglements;var On=Wt.eventTimes;for(Wt=Wt.expirationTimes;0<mn;){var bn=31-cu(mn),An=1<<bn;Ht[bn]=0,On[bn]=-1,Wt[bn]=-1,mn&=~An}}function E_(Wt,Ht){var mn=Wt.entangledLanes|=Ht;for(Wt=Wt.entanglements;mn;){var On=31-cu(mn),bn=1<<On;bn&Ht|Wt[On]&Ht&&(Wt[On]|=Ht),mn&=~bn}}var Wo=0;function Am(Wt){return Wt&=-Wt,1<Wt?4<Wt?Wt&268435455?16:536870912:4:1}var Zp=St.unstable_scheduleCallback,A0=St.unstable_cancelCallback,BO=St.unstable_shouldYield,uu=St.unstable_requestPaint,ks=St.unstable_now,Pl=St.unstable_ImmediatePriority,x_=St.unstable_UserBlockingPriority,w_=St.unstable_NormalPriority,FO=St.unstable_IdlePriority,qp=null,hu=null;function iS(Wt){if(hu&&typeof hu.onCommitFiberRoot=="function")try{hu.onCommitFiberRoot(qp,Wt,void 0,(Wt.current.flags&128)===128)}catch{}}function R0(Wt,Ht){return Wt===Ht&&(Wt!==0||1/Wt===1/Ht)||Wt!==Wt&&Ht!==Ht}var Ll=typeof Object.is=="function"?Object.is:R0,Nu=null,C_=!1,Bu=!1;function GO(Wt){Nu===null?Nu=[Wt]:Nu.push(Wt)}function Yl(Wt){C_=!0,GO(Wt)}function Eu(){if(!Bu&&Nu!==null){Bu=!0;var Wt=0,Ht=Wo;try{var mn=Nu;for(Wo=1;Wt<mn.length;Wt++){var On=mn[Wt];do On=On(!0);while(On!==null)}Nu=null,C_=!1}catch(bn){throw Nu!==null&&(Nu=Nu.slice(Wt+1)),Zp(Pl,Eu),bn}finally{Wo=Ht,Bu=!1}}return null}var na=At.ReactCurrentBatchConfig;function A_(Wt,Ht){if(Ll(Wt,Ht))return!0;if(typeof Wt!="object"||Wt===null||typeof Ht!="object"||Ht===null)return!1;var mn=Object.keys(Wt),On=Object.keys(Ht);if(mn.length!==On.length)return!1;for(On=0;On<mn.length;On++){var bn=mn[On];if(!S_.call(Ht,bn)||!Ll(Wt[bn],Ht[bn]))return!1}return!0}function Rm(Wt){switch(Wt.tag){case 5:return os(Wt.type);case 16:return os("Lazy");case 13:return os("Suspense");case 19:return os("SuspenseList");case 0:case 2:case 15:return Wt=io(Wt.type,!1),Wt;case 11:return Wt=io(Wt.type.render,!1),Wt;case 1:return Wt=io(Wt.type,!0),Wt;default:return""}}function du(Wt,Ht){if(Wt&&Wt.defaultProps){Ht=Tt({},Ht),Wt=Wt.defaultProps;for(var mn in Wt)Ht[mn]===void 0&&(Ht[mn]=Wt[mn]);return Ht}return Ht}var Fu=us(null),Im=null,Kp=null,UO=null;function VO(){UO=Kp=Im=null}function I0(Wt,Ht,mn){Xr?(Yo(Fu,Ht._currentValue),Ht._currentValue=mn):(Yo(Fu,Ht._currentValue2),Ht._currentValue2=mn)}function WO(Wt){var Ht=Fu.current;Vr(Fu),Xr?Wt._currentValue=Ht:Wt._currentValue2=Ht}function R_(Wt,Ht,mn){for(;Wt!==null;){var On=Wt.alternate;if((Wt.childLanes&Ht)!==Ht?(Wt.childLanes|=Ht,On!==null&&(On.childLanes|=Ht)):On!==null&&(On.childLanes&Ht)!==Ht&&(On.childLanes|=Ht),Wt===mn)break;Wt=Wt.return}}function Jp(Wt,Ht){Im=Wt,UO=Kp=null,Wt=Wt.dependencies,Wt!==null&&Wt.firstContext!==null&&(Wt.lanes&Ht&&(Ul=!0),Wt.firstContext=null)}function Zl(Wt){var Ht=Xr?Wt._currentValue:Wt._currentValue2;if(UO!==Wt)if(Wt={context:Wt,memoizedValue:Ht,next:null},Kp===null){if(Im===null)throw Error(Ct(308));Kp=Wt,Im.dependencies={lanes:0,firstContext:Wt}}else Kp=Kp.next=Wt;return Ht}var Kl=null,ep=!1;function QO(Wt){Wt.updateQueue={baseState:Wt.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function k0(Wt,Ht){Wt=Wt.updateQueue,Ht.updateQueue===Wt&&(Ht.updateQueue={baseState:Wt.baseState,firstBaseUpdate:Wt.firstBaseUpdate,lastBaseUpdate:Wt.lastBaseUpdate,shared:Wt.shared,effects:Wt.effects})}function Jl(Wt,Ht){return{eventTime:Wt,lane:Ht,tag:0,payload:null,callback:null,next:null}}function Gu(Wt,Ht){var mn=Wt.updateQueue;mn!==null&&(mn=mn.shared,Ts!==null&&Wt.mode&1&&!(Go&2)?(Wt=mn.interleaved,Wt===null?(Ht.next=Ht,Kl===null?Kl=[mn]:Kl.push(mn)):(Ht.next=Wt.next,Wt.next=Ht),mn.interleaved=Ht):(Wt=mn.pending,Wt===null?Ht.next=Ht:(Ht.next=Wt.next,Wt.next=Ht),mn.pending=Ht))}function km(Wt,Ht,mn){if(Ht=Ht.updateQueue,Ht!==null&&(Ht=Ht.shared,(mn&4194240)!==0)){var On=Ht.lanes;On&=Wt.pendingLanes,mn|=On,Ht.lanes=mn,E_(Wt,mn)}}function HO(Wt,Ht){var mn=Wt.updateQueue,On=Wt.alternate;if(On!==null&&(On=On.updateQueue,mn===On)){var bn=null,An=null;if(mn=mn.firstBaseUpdate,mn!==null){do{var Xn={eventTime:mn.eventTime,lane:mn.lane,tag:mn.tag,payload:mn.payload,callback:mn.callback,next:null};An===null?bn=An=Xn:An=An.next=Xn,mn=mn.next}while(mn!==null);An===null?bn=An=Ht:An=An.next=Ht}else bn=An=Ht;mn={baseState:On.baseState,firstBaseUpdate:bn,lastBaseUpdate:An,shared:On.shared,effects:On.effects},Wt.updateQueue=mn;return}Wt=mn.lastBaseUpdate,Wt===null?mn.firstBaseUpdate=Ht:Wt.next=Ht,mn.lastBaseUpdate=Ht}function I_(Wt,Ht,mn,On){var bn=Wt.updateQueue;ep=!1;var An=bn.firstBaseUpdate,Xn=bn.lastBaseUpdate,lr=bn.shared.pending;if(lr!==null){bn.shared.pending=null;var Er=lr,Hr=Er.next;Er.next=null,Xn===null?An=Hr:Xn.next=Hr,Xn=Er;var so=Wt.alternate;so!==null&&(so=so.updateQueue,lr=so.lastBaseUpdate,lr!==Xn&&(lr===null?so.firstBaseUpdate=Hr:lr.next=Hr,so.lastBaseUpdate=Er))}if(An!==null){var Io=bn.baseState;Xn=0,so=Hr=Er=null,lr=An;do{var vo=lr.lane,rs=lr.eventTime;if((On&vo)===vo){so!==null&&(so=so.next={eventTime:rs,lane:0,tag:lr.tag,payload:lr.payload,callback:lr.callback,next:null});e:{var Oo=Wt,Bs=lr;switch(vo=Ht,rs=mn,Bs.tag){case 1:if(Oo=Bs.payload,typeof Oo=="function"){Io=Oo.call(rs,Io,vo);break e}Io=Oo;break e;case 3:Oo.flags=Oo.flags&-65537|128;case 0:if(Oo=Bs.payload,vo=typeof Oo=="function"?Oo.call(rs,Io,vo):Oo,vo==null)break e;Io=Tt({},Io,vo);break e;case 2:ep=!0}}lr.callback!==null&&lr.lane!==0&&(Wt.flags|=64,vo=bn.effects,vo===null?bn.effects=[lr]:vo.push(lr))}else rs={eventTime:rs,lane:vo,tag:lr.tag,payload:lr.payload,callback:lr.callback,next:null},so===null?(Hr=so=rs,Er=Io):so=so.next=rs,Xn|=vo;if(lr=lr.next,lr===null){if(lr=bn.shared.pending,lr===null)break;vo=lr,lr=vo.next,vo.next=null,bn.lastBaseUpdate=vo,bn.shared.pending=null}}while(1);if(so===null&&(Er=Io),bn.baseState=Er,bn.firstBaseUpdate=Hr,bn.lastBaseUpdate=so,Ht=bn.shared.interleaved,Ht!==null){bn=Ht;do Xn|=bn.lane,bn=bn.next;while(bn!==Ht)}else An===null&&(bn.shared.lanes=0);dm|=Xn,Wt.lanes=Xn,Wt.memoizedState=Io}}function k_(Wt,Ht,mn){if(Wt=Ht.effects,Ht.effects=null,Wt!==null)for(Ht=0;Ht<Wt.length;Ht++){var On=Wt[Ht],bn=On.callback;if(bn!==null){if(On.callback=null,On=mn,typeof bn!="function")throw Error(Ct(191,bn));bn.call(On)}}}var zO=new ft.Component().refs;function jO(Wt,Ht,mn,On){Ht=Wt.memoizedState,mn=mn(On,Ht),mn=mn==null?Ht:Tt({},Ht,mn),Wt.memoizedState=mn,Wt.lanes===0&&(Wt.updateQueue.baseState=mn)}var Mm={isMounted:function(Wt){return(Wt=Wt._reactInternals)?xn(Wt)===Wt:!1},enqueueSetState:function(Wt,Ht,mn){Wt=Wt._reactInternals;var On=Ws(),bn=sp(Wt),An=Jl(On,bn);An.payload=Ht,mn!=null&&(An.callback=mn),Gu(Wt,An),Ht=nu(Wt,bn,On),Ht!==null&&km(Ht,Wt,bn)},enqueueReplaceState:function(Wt,Ht,mn){Wt=Wt._reactInternals;var On=Ws(),bn=sp(Wt),An=Jl(On,bn);An.tag=1,An.payload=Ht,mn!=null&&(An.callback=mn),Gu(Wt,An),Ht=nu(Wt,bn,On),Ht!==null&&km(Ht,Wt,bn)},enqueueForceUpdate:function(Wt,Ht){Wt=Wt._reactInternals;var mn=Ws(),On=sp(Wt),bn=Jl(mn,On);bn.tag=2,Ht!=null&&(bn.callback=Ht),Gu(Wt,bn),Ht=nu(Wt,On,mn),Ht!==null&&km(Ht,Wt,On)}};function M0(Wt,Ht,mn,On,bn,An,Xn){return Wt=Wt.stateNode,typeof Wt.shouldComponentUpdate=="function"?Wt.shouldComponentUpdate(On,An,Xn):Ht.prototype&&Ht.prototype.isPureReactComponent?!A_(mn,On)||!A_(bn,An):!0}function P0(Wt,Ht,mn){var On=!1,bn=Os,An=Ht.contextType;return typeof An=="object"&&An!==null?An=Zl(An):(bn=Js(Ht)?No:ws.current,On=Ht.contextTypes,An=(On=On!=null)?Ml(Wt,bn):Os),Ht=new Ht(mn,An),Wt.memoizedState=Ht.state!==null&&Ht.state!==void 0?Ht.state:null,Ht.updater=Mm,Wt.stateNode=Ht,Ht._reactInternals=Wt,On&&(Wt=Wt.stateNode,Wt.__reactInternalMemoizedUnmaskedChildContext=bn,Wt.__reactInternalMemoizedMaskedChildContext=An),Ht}function L0(Wt,Ht,mn,On){Wt=Ht.state,typeof Ht.componentWillReceiveProps=="function"&&Ht.componentWillReceiveProps(mn,On),typeof Ht.UNSAFE_componentWillReceiveProps=="function"&&Ht.UNSAFE_componentWillReceiveProps(mn,On),Ht.state!==Wt&&Mm.enqueueReplaceState(Ht,Ht.state,null)}function XO(Wt,Ht,mn,On){var bn=Wt.stateNode;bn.props=mn,bn.state=Wt.memoizedState,bn.refs=zO,QO(Wt);var An=Ht.contextType;typeof An=="object"&&An!==null?bn.context=Zl(An):(An=Js(Ht)?No:ws.current,bn.context=Ml(Wt,An)),bn.state=Wt.memoizedState,An=Ht.getDerivedStateFromProps,typeof An=="function"&&(jO(Wt,Ht,An,mn),bn.state=Wt.memoizedState),typeof Ht.getDerivedStateFromProps=="function"||typeof bn.getSnapshotBeforeUpdate=="function"||typeof bn.UNSAFE_componentWillMount!="function"&&typeof bn.componentWillMount!="function"||(Ht=bn.state,typeof bn.componentWillMount=="function"&&bn.componentWillMount(),typeof bn.UNSAFE_componentWillMount=="function"&&bn.UNSAFE_componentWillMount(),Ht!==bn.state&&Mm.enqueueReplaceState(bn,bn.state,null),I_(Wt,mn,bn,On),bn.state=Wt.memoizedState),typeof bn.componentDidMount=="function"&&(Wt.flags|=4194308)}var xu=[],$p=0,Pm=null,Tp=0,ga=[],_c=0,Ep=null,wu=1,Cu="";function Dl(Wt,Ht){xu[$p++]=Tp,xu[$p++]=Pm,Pm=Wt,Tp=Ht}function YO(Wt,Ht,mn){ga[_c++]=wu,ga[_c++]=Cu,ga[_c++]=Ep,Ep=Wt;var On=wu;Wt=Cu;var bn=32-cu(On)-1;On&=~(1<<bn),mn+=1;var An=32-cu(Ht)+bn;if(30<An){var Xn=bn-bn%5;An=(On&(1<<Xn)-1).toString(32),On>>=Xn,bn-=Xn,wu=1<<32-cu(Ht)+bn|mn<<bn|On,Cu=An+Wt}else wu=1<<An|mn<<bn|On,Cu=Wt}function M_(Wt){Wt.return!==null&&(Dl(Wt,1),YO(Wt,1,0))}function ZO(Wt){for(;Wt===Pm;)Pm=xu[--$p],xu[$p]=null,Tp=xu[--$p],xu[$p]=null;for(;Wt===Ep;)Ep=ga[--_c],ga[_c]=null,Cu=ga[--_c],ga[_c]=null,wu=ga[--_c],ga[_c]=null}var Nl=null,Bl=null,hs=!1,em=!1,fu=null;function qO(Wt,Ht){var mn=ru(5,null,null,0);mn.elementType="DELETED",mn.stateNode=Ht,mn.return=Wt,Ht=Wt.deletions,Ht===null?(Wt.deletions=[mn],Wt.flags|=16):Ht.push(mn)}function D0(Wt,Ht){switch(Wt.tag){case 5:return Ht=Il(Ht,Wt.type,Wt.pendingProps),Ht!==null?(Wt.stateNode=Ht,Nl=Wt,Bl=dr(Ht),!0):!1;case 6:return Ht=PO(Ht,Wt.pendingProps),Ht!==null?(Wt.stateNode=Ht,Nl=Wt,Bl=null,!0):!1;case 13:if(Ht=xo(Ht),Ht!==null){var mn=Ep!==null?{id:wu,overflow:Cu}:null;return Wt.memoizedState={dehydrated:Ht,treeContext:mn,retryLane:1073741824},mn=ru(18,null,null,0),mn.stateNode=Ht,mn.return=Wt,Wt.child=mn,Nl=Wt,Bl=null,!0}return!1;default:return!1}}function Uu(Wt){return(Wt.mode&1)!==0&&(Wt.flags&128)===0}function tm(Wt){if(hs){var Ht=Bl;if(Ht){var mn=Ht;if(!D0(Wt,Ht)){if(Uu(Wt))throw Error(Ct(418));Ht=xr(mn);var On=Nl;Ht&&D0(Wt,Ht)?qO(On,mn):(Wt.flags=Wt.flags&-4097|2,hs=!1,Nl=Wt)}}else{if(Uu(Wt))throw Error(Ct(418));Wt.flags=Wt.flags&-4097|2,hs=!1,Nl=Wt}}}function P_(Wt){for(Wt=Wt.return;Wt!==null&&Wt.tag!==5&&Wt.tag!==3&&Wt.tag!==13;)Wt=Wt.return;Nl=Wt}function xp(Wt){if(!Ir||Wt!==Nl)return!1;if(!hs)return P_(Wt),hs=!0,!1;if(Wt.tag!==3&&(Wt.tag!==5||El(Wt.type)&&!Jn(Wt.type,Wt.memoizedProps))){var Ht=Bl;if(Ht){if(Uu(Wt)){for(Wt=Bl;Wt;)Wt=xr(Wt);throw Error(Ct(418))}for(;Ht;)qO(Wt,Ht),Ht=xr(Ht)}}if(P_(Wt),Wt.tag===13){if(!Ir)throw Error(Ct(316));if(Wt=Wt.memoizedState,Wt=Wt!==null?Wt.dehydrated:null,!Wt)throw Error(Ct(317));Bl=Ao(Wt)}else Bl=Nl?xr(Wt.stateNode):null;return!0}function pu(){Ir&&(Bl=Nl=null,em=hs=!1)}function Lm(Wt){fu===null?fu=[Wt]:fu.push(Wt)}function wp(Wt,Ht,mn){if(Wt=mn.ref,Wt!==null&&typeof Wt!="function"&&typeof Wt!="object"){if(mn._owner){if(mn=mn._owner,mn){if(mn.tag!==1)throw Error(Ct(309));var On=mn.stateNode}if(!On)throw Error(Ct(147,Wt));var bn=On,An=""+Wt;return Ht!==null&&Ht.ref!==null&&typeof Ht.ref=="function"&&Ht.ref._stringRef===An?Ht.ref:(Ht=function(Xn){var lr=bn.refs;lr===zO&&(lr=bn.refs={}),Xn===null?delete lr[An]:lr[An]=Xn},Ht._stringRef=An,Ht)}if(typeof Wt!="string")throw Error(Ct(284));if(!mn._owner)throw Error(Ct(290,Wt))}return Wt}function nm(Wt,Ht){throw Wt=Object.prototype.toString.call(Ht),Error(Ct(31,Wt==="[object Object]"?"object with keys {"+Object.keys(Ht).join(", ")+"}":Wt))}function ds(Wt){var Ht=Wt._init;return Ht(Wt._payload)}function Dm(Wt){function Ht(gr,cr){if(Wt){var yr=gr.deletions;yr===null?(gr.deletions=[cr],gr.flags|=16):yr.push(cr)}}function mn(gr,cr){if(!Wt)return null;for(;cr!==null;)Ht(gr,cr),cr=cr.sibling;return null}function On(gr,cr){for(gr=new Map;cr!==null;)cr.key!==null?gr.set(cr.key,cr):gr.set(cr.index,cr),cr=cr.sibling;return gr}function bn(gr,cr){return gr=up(gr,cr),gr.index=0,gr.sibling=null,gr}function An(gr,cr,yr){return gr.index=yr,Wt?(yr=gr.alternate,yr!==null?(yr=yr.index,yr<cr?(gr.flags|=2,cr):yr):(gr.flags|=2,cr)):(gr.flags|=1048576,cr)}function Xn(gr){return Wt&&gr.alternate===null&&(gr.flags|=2),gr}function lr(gr,cr,yr,jr){return cr===null||cr.tag!==6?(cr=Zs(yr,gr.mode,jr),cr.return=gr,cr):(cr=bn(cr,yr),cr.return=gr,cr)}function Er(gr,cr,yr,jr){var fo=yr.type;return fo===Nt?so(gr,cr,yr.props.children,jr,yr.key):cr!==null&&(cr.elementType===fo||typeof fo=="object"&&fo!==null&&fo.$$typeof===dn&&ds(fo)===cr.type)?(jr=bn(cr,yr.props),jr.ref=wp(gr,cr,yr),jr.return=gr,jr):(jr=lO(yr.type,yr.key,yr.props,null,gr.mode,jr),jr.ref=wp(gr,cr,yr),jr.return=gr,jr)}function Hr(gr,cr,yr,jr){return cr===null||cr.tag!==4||cr.stateNode.containerInfo!==yr.containerInfo||cr.stateNode.implementation!==yr.implementation?(cr=Es(yr,gr.mode,jr),cr.return=gr,cr):(cr=bn(cr,yr.children||[]),cr.return=gr,cr)}function so(gr,cr,yr,jr,fo){return cr===null||cr.tag!==7?(cr=Np(yr,gr.mode,jr,fo),cr.return=gr,cr):(cr=bn(cr,yr),cr.return=gr,cr)}function Io(gr,cr,yr){if(typeof cr=="string"&&cr!==""||typeof cr=="number")return cr=Zs(""+cr,gr.mode,yr),cr.return=gr,cr;if(typeof cr=="object"&&cr!==null){switch(cr.$$typeof){case Rt:return yr=lO(cr.type,cr.key,cr.props,null,gr.mode,yr),yr.ref=wp(gr,null,cr),yr.return=gr,yr;case kt:return cr=Es(cr,gr.mode,yr),cr.return=gr,cr;case dn:var jr=cr._init;return Io(gr,jr(cr._payload),yr)}if(Yn(cr)||Tn(cr))return cr=Np(cr,gr.mode,yr,null),cr.return=gr,cr;nm(gr,cr)}return null}function vo(gr,cr,yr,jr){var fo=cr!==null?cr.key:null;if(typeof yr=="string"&&yr!==""||typeof yr=="number")return fo!==null?null:lr(gr,cr,""+yr,jr);if(typeof yr=="object"&&yr!==null){switch(yr.$$typeof){case Rt:return yr.key===fo?Er(gr,cr,yr,jr):null;case kt:return yr.key===fo?Hr(gr,cr,yr,jr):null;case dn:return fo=yr._init,vo(gr,cr,fo(yr._payload),jr)}if(Yn(yr)||Tn(yr))return fo!==null?null:so(gr,cr,yr,jr,null);nm(gr,yr)}return null}function rs(gr,cr,yr,jr,fo){if(typeof jr=="string"&&jr!==""||typeof jr=="number")return gr=gr.get(yr)||null,lr(cr,gr,""+jr,fo);if(typeof jr=="object"&&jr!==null){switch(jr.$$typeof){case Rt:return gr=gr.get(jr.key===null?yr:jr.key)||null,Er(cr,gr,jr,fo);case kt:return gr=gr.get(jr.key===null?yr:jr.key)||null,Hr(cr,gr,jr,fo);case dn:var Fo=jr._init;return rs(gr,cr,yr,Fo(jr._payload),fo)}if(Yn(jr)||Tn(jr))return gr=gr.get(yr)||null,so(cr,gr,jr,fo,null);nm(cr,jr)}return null}function Oo(gr,cr,yr,jr){for(var fo=null,Fo=null,Po=cr,Xo=cr=0,fs=null;Po!==null&&Xo<yr.length;Xo++){Po.index>Xo?(fs=Po,Po=null):fs=Po.sibling;var zo=vo(gr,Po,yr[Xo],jr);if(zo===null){Po===null&&(Po=fs);break}Wt&&Po&&zo.alternate===null&&Ht(gr,Po),cr=An(zo,cr,Xo),Fo===null?fo=zo:Fo.sibling=zo,Fo=zo,Po=fs}if(Xo===yr.length)return mn(gr,Po),hs&&Dl(gr,Xo),fo;if(Po===null){for(;Xo<yr.length;Xo++)Po=Io(gr,yr[Xo],jr),Po!==null&&(cr=An(Po,cr,Xo),Fo===null?fo=Po:Fo.sibling=Po,Fo=Po);return hs&&Dl(gr,Xo),fo}for(Po=On(gr,Po);Xo<yr.length;Xo++)fs=rs(Po,gr,Xo,yr[Xo],jr),fs!==null&&(Wt&&fs.alternate!==null&&Po.delete(fs.key===null?Xo:fs.key),cr=An(fs,cr,Xo),Fo===null?fo=fs:Fo.sibling=fs,Fo=fs);return Wt&&Po.forEach(function(Vl){return Ht(gr,Vl)}),hs&&Dl(gr,Xo),fo}function Bs(gr,cr,yr,jr){var fo=Tn(yr);if(typeof fo!="function")throw Error(Ct(150));if(yr=fo.call(yr),yr==null)throw Error(Ct(151));for(var Fo=fo=null,Po=cr,Xo=cr=0,fs=null,zo=yr.next();Po!==null&&!zo.done;Xo++,zo=yr.next()){Po.index>Xo?(fs=Po,Po=null):fs=Po.sibling;var Vl=vo(gr,Po,zo.value,jr);if(Vl===null){Po===null&&(Po=fs);break}Wt&&Po&&Vl.alternate===null&&Ht(gr,Po),cr=An(Vl,cr,Xo),Fo===null?fo=Vl:Fo.sibling=Vl,Fo=Vl,Po=fs}if(zo.done)return mn(gr,Po),hs&&Dl(gr,Xo),fo;if(Po===null){for(;!zo.done;Xo++,zo=yr.next())zo=Io(gr,zo.value,jr),zo!==null&&(cr=An(zo,cr,Xo),Fo===null?fo=zo:Fo.sibling=zo,Fo=zo);return hs&&Dl(gr,Xo),fo}for(Po=On(gr,Po);!zo.done;Xo++,zo=yr.next())zo=rs(Po,gr,Xo,zo.value,jr),zo!==null&&(Wt&&zo.alternate!==null&&Po.delete(zo.key===null?Xo:zo.key),cr=An(zo,cr,Xo),Fo===null?fo=zo:Fo.sibling=zo,Fo=zo);return Wt&&Po.forEach(function(yu){return Ht(gr,yu)}),hs&&Dl(gr,Xo),fo}function As(gr,cr,yr,jr){if(typeof yr=="object"&&yr!==null&&yr.type===Nt&&yr.key===null&&(yr=yr.props.children),typeof yr=="object"&&yr!==null){switch(yr.$$typeof){case Rt:e:{for(var fo=yr.key,Fo=cr;Fo!==null;){if(Fo.key===fo){if(fo=yr.type,fo===Nt){if(Fo.tag===7){mn(gr,Fo.sibling),cr=bn(Fo,yr.props.children),cr.return=gr,gr=cr;break e}}else if(Fo.elementType===fo||typeof fo=="object"&&fo!==null&&fo.$$typeof===dn&&ds(fo)===Fo.type){mn(gr,Fo.sibling),cr=bn(Fo,yr.props),cr.ref=wp(gr,Fo,yr),cr.return=gr,gr=cr;break e}mn(gr,Fo);break}else Ht(gr,Fo);Fo=Fo.sibling}yr.type===Nt?(cr=Np(yr.props.children,gr.mode,jr,yr.key),cr.return=gr,gr=cr):(jr=lO(yr.type,yr.key,yr.props,null,gr.mode,jr),jr.ref=wp(gr,cr,yr),jr.return=gr,gr=jr)}return Xn(gr);case kt:e:{for(Fo=yr.key;cr!==null;){if(cr.key===Fo)if(cr.tag===4&&cr.stateNode.containerInfo===yr.containerInfo&&cr.stateNode.implementation===yr.implementation){mn(gr,cr.sibling),cr=bn(cr,yr.children||[]),cr.return=gr,gr=cr;break e}else{mn(gr,cr);break}else Ht(gr,cr);cr=cr.sibling}cr=Es(yr,gr.mode,jr),cr.return=gr,gr=cr}return Xn(gr);case dn:return Fo=yr._init,As(gr,cr,Fo(yr._payload),jr)}if(Yn(yr))return Oo(gr,cr,yr,jr);if(Tn(yr))return Bs(gr,cr,yr,jr);nm(gr,yr)}return typeof yr=="string"&&yr!==""||typeof yr=="number"?(yr=""+yr,cr!==null&&cr.tag===6?(mn(gr,cr.sibling),cr=bn(cr,yr),cr.return=gr,gr=cr):(mn(gr,cr),cr=Zs(yr,gr.mode,jr),cr.return=gr,gr=cr),Xn(gr)):mn(gr,cr)}return As}var mu=Dm(!0),Cp=Dm(!1),Nm={},Fl=us(Nm),Ap=us(Nm),ba=us(Nm);function gu(Wt){if(Wt===Nm)throw Error(Ct(174));return Wt}function Bm(Wt,Ht){Yo(ba,Ht),Yo(Ap,Wt),Yo(Fl,Nm),Wt=nr(Ht),Vr(Fl),Yo(Fl,Wt)}function Rp(){Vr(Fl),Vr(Ap),Vr(ba)}function KO(Wt){var Ht=gu(ba.current),mn=gu(Fl.current);Ht=Ln(mn,Wt.type,Ht),mn!==Ht&&(Yo(Ap,Wt),Yo(Fl,Ht))}function JO(Wt){Ap.current===Wt&&(Vr(Fl),Vr(Ap))}var ms=us(0);function $a(Wt){for(var Ht=Wt;Ht!==null;){if(Ht.tag===13){var mn=Ht.memoizedState;if(mn!==null&&(mn=mn.dehydrated,mn===null||b_(mn)||Hn(mn)))return Ht}else if(Ht.tag===19&&Ht.memoizedProps.revealOrder!==void 0){if(Ht.flags&128)return Ht}else if(Ht.child!==null){Ht.child.return=Ht,Ht=Ht.child;continue}if(Ht===Wt)break;for(;Ht.sibling===null;){if(Ht.return===null||Ht.return===Wt)return null;Ht=Ht.return}Ht.sibling.return=Ht.return,Ht=Ht.sibling}return null}var ey=[];function Fm(){for(var Wt=0;Wt<ey.length;Wt++){var Ht=ey[Wt];Xr?Ht._workInProgressVersionPrimary=null:Ht._workInProgressVersionSecondary=null}ey.length=0}var L_=At.ReactCurrentDispatcher,Ss=At.ReactCurrentBatchConfig,ts=0,ys=null,js=null,Ns=null,Gm=!1,Um=!1,Vm=0,tp=0;function Xs(){throw Error(Ct(321))}function im(Wt,Ht){if(Ht===null)return!1;for(var mn=0;mn<Ht.length&&mn<Wt.length;mn++)if(!Ll(Wt[mn],Ht[mn]))return!1;return!0}function ty(Wt,Ht,mn,On,bn,An){if(ts=An,ys=Ht,Ht.memoizedState=null,Ht.updateQueue=null,Ht.lanes=0,L_.current=Wt===null||Wt.memoizedState===null?$s:sS,Wt=mn(On,bn),Um){An=0;do{if(Um=!1,Vm=0,25<=An)throw Error(Ct(301));An+=1,Ns=js=null,Ht.updateQueue=null,L_.current=aS,Wt=mn(On,bn)}while(Um)}if(L_.current=_i,Ht=js!==null&&js.next!==null,ts=0,Ns=js=ys=null,Gm=!1,Ht)throw Error(Ct(300));return Wt}function om(){var Wt=Vm!==0;return Vm=0,Wt}function _u(){var Wt={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ns===null?ys.memoizedState=Ns=Wt:Ns=Ns.next=Wt,Ns}function Au(){if(js===null){var Wt=ys.alternate;Wt=Wt!==null?Wt.memoizedState:null}else Wt=js.next;var Ht=Ns===null?ys.memoizedState:Ns.next;if(Ht!==null)Ns=Ht,js=Wt;else{if(Wt===null)throw Error(Ct(310));js=Wt,Wt={memoizedState:js.memoizedState,baseState:js.baseState,baseQueue:js.baseQueue,queue:js.queue,next:null},Ns===null?ys.memoizedState=Ns=Wt:Ns=Ns.next=Wt}return Ns}function Vu(Wt,Ht){return typeof Ht=="function"?Ht(Wt):Ht}function D_(Wt){var Ht=Au(),mn=Ht.queue;if(mn===null)throw Error(Ct(311));mn.lastRenderedReducer=Wt;var On=js,bn=On.baseQueue,An=mn.pending;if(An!==null){if(bn!==null){var Xn=bn.next;bn.next=An.next,An.next=Xn}On.baseQueue=bn=An,mn.pending=null}if(bn!==null){An=bn.next,On=On.baseState;var lr=Xn=null,Er=null,Hr=An;do{var so=Hr.lane;if((ts&so)===so)Er!==null&&(Er=Er.next={lane:0,action:Hr.action,hasEagerState:Hr.hasEagerState,eagerState:Hr.eagerState,next:null}),On=Hr.hasEagerState?Hr.eagerState:Wt(On,Hr.action);else{var Io={lane:so,action:Hr.action,hasEagerState:Hr.hasEagerState,eagerState:Hr.eagerState,next:null};Er===null?(lr=Er=Io,Xn=On):Er=Er.next=Io,ys.lanes|=so,dm|=so}Hr=Hr.next}while(Hr!==null&&Hr!==An);Er===null?Xn=On:Er.next=lr,Ll(On,Ht.memoizedState)||(Ul=!0),Ht.memoizedState=On,Ht.baseState=Xn,Ht.baseQueue=Er,mn.lastRenderedState=On}if(Wt=mn.interleaved,Wt!==null){bn=Wt;do An=bn.lane,ys.lanes|=An,dm|=An,bn=bn.next;while(bn!==Wt)}else bn===null&&(mn.lanes=0);return[Ht.memoizedState,mn.dispatch]}function sm(Wt){var Ht=Au(),mn=Ht.queue;if(mn===null)throw Error(Ct(311));mn.lastRenderedReducer=Wt;var On=mn.dispatch,bn=mn.pending,An=Ht.memoizedState;if(bn!==null){mn.pending=null;var Xn=bn=bn.next;do An=Wt(An,Xn.action),Xn=Xn.next;while(Xn!==bn);Ll(An,Ht.memoizedState)||(Ul=!0),Ht.memoizedState=An,Ht.baseQueue===null&&(Ht.baseState=An),mn.lastRenderedState=An}return[An,On]}function ny(){}function ry(Wt,Ht){var mn=ys,On=Au(),bn=Ht(),An=!Ll(On.memoizedState,bn);if(An&&(On.memoizedState=bn,Ul=!0),On=On.queue,kp(B0.bind(null,mn,On,Wt),[Wt]),On.getSnapshot!==Ht||An||Ns!==null&&Ns.memoizedState.tag&1){if(mn.flags|=2048,Ip(9,N0.bind(null,mn,On,bn,Ht),void 0,null),Ts===null)throw Error(Ct(349));ts&30||Wm(mn,Ht,bn)}return bn}function Wm(Wt,Ht,mn){Wt.flags|=16384,Wt={getSnapshot:Ht,value:mn},Ht=ys.updateQueue,Ht===null?(Ht={lastEffect:null,stores:null},ys.updateQueue=Ht,Ht.stores=[Wt]):(mn=Ht.stores,mn===null?Ht.stores=[Wt]:mn.push(Wt))}function N0(Wt,Ht,mn,On){Ht.value=mn,Ht.getSnapshot=On,F0(Ht)&&nu(Wt,1,-1)}function B0(Wt,Ht,mn){return mn(function(){F0(Ht)&&nu(Wt,1,-1)})}function F0(Wt){var Ht=Wt.getSnapshot;Wt=Wt.value;try{var mn=Ht();return!Ll(Wt,mn)}catch{return!0}}function N_(Wt){var Ht=_u();return typeof Wt=="function"&&(Wt=Wt()),Ht.memoizedState=Ht.baseState=Wt,Wt={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vu,lastRenderedState:Wt},Ht.queue=Wt,Wt=Wt.dispatch=Gl.bind(null,ys,Wt),[Ht.memoizedState,Wt]}function Ip(Wt,Ht,mn,On){return Wt={tag:Wt,create:Ht,destroy:mn,deps:On,next:null},Ht=ys.updateQueue,Ht===null?(Ht={lastEffect:null,stores:null},ys.updateQueue=Ht,Ht.lastEffect=Wt.next=Wt):(mn=Ht.lastEffect,mn===null?Ht.lastEffect=Wt.next=Wt:(On=mn.next,mn.next=Wt,Wt.next=On,Ht.lastEffect=Wt)),Wt}function G0(){return Au().memoizedState}function B_(Wt,Ht,mn,On){var bn=_u();ys.flags|=Wt,bn.memoizedState=Ip(1|Ht,mn,void 0,On===void 0?null:On)}function F_(Wt,Ht,mn,On){var bn=Au();On=On===void 0?null:On;var An=void 0;if(js!==null){var Xn=js.memoizedState;if(An=Xn.destroy,On!==null&&im(On,Xn.deps)){bn.memoizedState=Ip(Ht,mn,An,On);return}}ys.flags|=Wt,bn.memoizedState=Ip(1|Ht,mn,An,On)}function G_(Wt,Ht){return B_(8390656,8,Wt,Ht)}function kp(Wt,Ht){return F_(2048,8,Wt,Ht)}function iy(Wt,Ht){return F_(4,2,Wt,Ht)}function U_(Wt,Ht){return F_(4,4,Wt,Ht)}function U0(Wt,Ht){if(typeof Ht=="function")return Wt=Wt(),Ht(Wt),function(){Ht(null)};if(Ht!=null)return Wt=Wt(),Ht.current=Wt,function(){Ht.current=null}}function Qm(Wt,Ht,mn){return mn=mn!=null?mn.concat([Wt]):null,F_(4,4,U0.bind(null,Ht,Wt),mn)}function oy(){}function V0(Wt,Ht){var mn=Au();Ht=Ht===void 0?null:Ht;var On=mn.memoizedState;return On!==null&&Ht!==null&&im(Ht,On[1])?On[0]:(mn.memoizedState=[Wt,Ht],Wt)}function W0(Wt,Ht){var mn=Au();Ht=Ht===void 0?null:Ht;var On=mn.memoizedState;return On!==null&&Ht!==null&&im(Ht,On[1])?On[0]:(Wt=Wt(),mn.memoizedState=[Wt,Ht],Wt)}function oS(Wt,Ht){var mn=Wo;Wo=mn!==0&&4>mn?mn:4,Wt(!0);var On=Ss.transition;Ss.transition={};try{Wt(!1),Ht()}finally{Wo=mn,Ss.transition=On}}function xa(){return Au().memoizedState}function go(Wt,Ht,mn){var On=sp(Wt);mn={lane:On,action:mn,hasEagerState:!1,eagerState:null,next:null},Us(Wt)?as(Ht,mn):(Ru(Wt,Ht,mn),mn=Ws(),Wt=nu(Wt,On,mn),Wt!==null&&am(Wt,Ht,On))}function Gl(Wt,Ht,mn){var On=sp(Wt),bn={lane:On,action:mn,hasEagerState:!1,eagerState:null,next:null};if(Us(Wt))as(Ht,bn);else{Ru(Wt,Ht,bn);var An=Wt.alternate;if(Wt.lanes===0&&(An===null||An.lanes===0)&&(An=Ht.lastRenderedReducer,An!==null))try{var Xn=Ht.lastRenderedState,lr=An(Xn,mn);if(bn.hasEagerState=!0,bn.eagerState=lr,Ll(lr,Xn))return}catch{}finally{}mn=Ws(),Wt=nu(Wt,On,mn),Wt!==null&&am(Wt,Ht,On)}}function Us(Wt){var Ht=Wt.alternate;return Wt===ys||Ht!==null&&Ht===ys}function as(Wt,Ht){Um=Gm=!0;var mn=Wt.pending;mn===null?Ht.next=Ht:(Ht.next=mn.next,mn.next=Ht),Wt.pending=Ht}function Ru(Wt,Ht,mn){Ts!==null&&Wt.mode&1&&!(Go&2)?(Wt=Ht.interleaved,Wt===null?(mn.next=mn,Kl===null?Kl=[Ht]:Kl.push(Ht)):(mn.next=Wt.next,Wt.next=mn),Ht.interleaved=mn):(Wt=Ht.pending,Wt===null?mn.next=mn:(mn.next=Wt.next,Wt.next=mn),Ht.pending=mn)}function am(Wt,Ht,mn){if(mn&4194240){var On=Ht.lanes;On&=Wt.pendingLanes,mn|=On,Ht.lanes=mn,E_(Wt,mn)}}var _i={readContext:Zl,useCallback:Xs,useContext:Xs,useEffect:Xs,useImperativeHandle:Xs,useInsertionEffect:Xs,useLayoutEffect:Xs,useMemo:Xs,useReducer:Xs,useRef:Xs,useState:Xs,useDebugValue:Xs,useDeferredValue:Xs,useTransition:Xs,useMutableSource:Xs,useSyncExternalStore:Xs,useId:Xs,unstable_isNewReconciler:!1},$s={readContext:Zl,useCallback:function(Wt,Ht){return _u().memoizedState=[Wt,Ht===void 0?null:Ht],Wt},useContext:Zl,useEffect:G_,useImperativeHandle:function(Wt,Ht,mn){return mn=mn!=null?mn.concat([Wt]):null,B_(4194308,4,U0.bind(null,Ht,Wt),mn)},useLayoutEffect:function(Wt,Ht){return B_(4194308,4,Wt,Ht)},useInsertionEffect:function(Wt,Ht){return B_(4,2,Wt,Ht)},useMemo:function(Wt,Ht){var mn=_u();return Ht=Ht===void 0?null:Ht,Wt=Wt(),mn.memoizedState=[Wt,Ht],Wt},useReducer:function(Wt,Ht,mn){var On=_u();return Ht=mn!==void 0?mn(Ht):Ht,On.memoizedState=On.baseState=Ht,Wt={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wt,lastRenderedState:Ht},On.queue=Wt,Wt=Wt.dispatch=go.bind(null,ys,Wt),[On.memoizedState,Wt]},useRef:function(Wt){var Ht=_u();return Wt={current:Wt},Ht.memoizedState=Wt},useState:N_,useDebugValue:oy,useDeferredValue:function(Wt){var Ht=N_(Wt),mn=Ht[0],On=Ht[1];return G_(function(){var bn=Ss.transition;Ss.transition={};try{On(Wt)}finally{Ss.transition=bn}},[Wt]),mn},useTransition:function(){var Wt=N_(!1),Ht=Wt[0];return Wt=oS.bind(null,Wt[1]),_u().memoizedState=Wt,[Ht,Wt]},useMutableSource:function(){},useSyncExternalStore:function(Wt,Ht,mn){var On=ys,bn=_u();if(hs){if(mn===void 0)throw Error(Ct(407));mn=mn()}else{if(mn=Ht(),Ts===null)throw Error(Ct(349));ts&30||Wm(On,Ht,mn)}bn.memoizedState=mn;var An={value:mn,getSnapshot:Ht};return bn.queue=An,G_(B0.bind(null,On,An,Wt),[Wt]),On.flags|=2048,Ip(9,N0.bind(null,On,An,mn,Ht),void 0,null),mn},useId:function(){var Wt=_u(),Ht=Ts.identifierPrefix;if(hs){var mn=Cu,On=wu;mn=(On&~(1<<32-cu(On)-1)).toString(32)+mn,Ht=":"+Ht+"R"+mn,mn=Vm++,0<mn&&(Ht+="H"+mn.toString(32)),Ht+=":"}else mn=tp++,Ht=":"+Ht+"r"+mn.toString(32)+":";return Wt.memoizedState=Ht},unstable_isNewReconciler:!1},sS={readContext:Zl,useCallback:V0,useContext:Zl,useEffect:kp,useImperativeHandle:Qm,useInsertionEffect:iy,useLayoutEffect:U_,useMemo:W0,useReducer:D_,useRef:G0,useState:function(){return D_(Vu)},useDebugValue:oy,useDeferredValue:function(Wt){var Ht=D_(Vu),mn=Ht[0],On=Ht[1];return kp(function(){var bn=Ss.transition;Ss.transition={};try{On(Wt)}finally{Ss.transition=bn}},[Wt]),mn},useTransition:function(){var Wt=D_(Vu)[0],Ht=Au().memoizedState;return[Wt,Ht]},useMutableSource:ny,useSyncExternalStore:ry,useId:xa,unstable_isNewReconciler:!1},aS={readContext:Zl,useCallback:V0,useContext:Zl,useEffect:kp,useImperativeHandle:Qm,useInsertionEffect:iy,useLayoutEffect:U_,useMemo:W0,useReducer:sm,useRef:G0,useState:function(){return sm(Vu)},useDebugValue:oy,useDeferredValue:function(Wt){var Ht=sm(Vu),mn=Ht[0],On=Ht[1];return kp(function(){var bn=Ss.transition;Ss.transition={};try{On(Wt)}finally{Ss.transition=bn}},[Wt]),mn},useTransition:function(){var Wt=sm(Vu)[0],Ht=Au().memoizedState;return[Wt,Ht]},useMutableSource:ny,useSyncExternalStore:ry,useId:xa,unstable_isNewReconciler:!1};function sy(Wt,Ht){try{var mn="",On=Ht;do mn+=Rm(On),On=On.return;while(On);var bn=mn}catch(An){bn=`
Error generating stack: `+An.message+`
`+An.stack}return{value:Wt,source:Ht,stack:bn}}function ay(Wt,Ht){try{console.error(Ht.value)}catch(mn){setTimeout(function(){throw mn})}}var lS=typeof WeakMap=="function"?WeakMap:Map;function Q0(Wt,Ht,mn){mn=Jl(-1,mn),mn.tag=3,mn.payload={element:null};var On=Ht.value;return mn.callback=function(){iO||(iO=!0,Ty=On),ay(Wt,Ht)},mn}function H0(Wt,Ht,mn){mn=Jl(-1,mn),mn.tag=3;var On=Wt.type.getDerivedStateFromError;if(typeof On=="function"){var bn=Ht.value;mn.payload=function(){return On(bn)},mn.callback=function(){ay(Wt,Ht)}}var An=Wt.stateNode;return An!==null&&typeof An.componentDidCatch=="function"&&(mn.callback=function(){ay(Wt,Ht),typeof On!="function"&&(op===null?op=new Set([this]):op.add(this));var Xn=Ht.stack;this.componentDidCatch(Ht.value,{componentStack:Xn!==null?Xn:""})}),mn}function z0(Wt,Ht,mn){var On=Wt.pingCache;if(On===null){On=Wt.pingCache=new lS;var bn=new Set;On.set(Ht,bn)}else bn=On.get(Ht),bn===void 0&&(bn=new Set,On.set(Ht,bn));bn.has(mn)||(bn.add(mn),Wt=fS.bind(null,Wt,Ht,mn),Ht.then(Wt,Wt))}function j0(Wt){do{var Ht;if((Ht=Wt.tag===13)&&(Ht=Wt.memoizedState,Ht=Ht!==null?Ht.dehydrated!==null:!0),Ht)return Wt;Wt=Wt.return}while(Wt!==null);return null}function X0(Wt,Ht,mn,On,bn){return Wt.mode&1?(Wt.flags|=65536,Wt.lanes=bn,Wt):(Wt===Ht?Wt.flags|=65536:(Wt.flags|=128,mn.flags|=131072,mn.flags&=-52805,mn.tag===1&&(mn.alternate===null?mn.tag=17:(Ht=Jl(-1,1),Ht.tag=2,Gu(mn,Ht))),mn.lanes|=1),Wt)}function Iu(Wt){Wt.flags|=4}function Y0(Wt,Ht){if(Wt!==null&&Wt.child===Ht.child)return!0;if(Ht.flags&16)return!1;for(Wt=Ht.child;Wt!==null;){if(Wt.flags&12854||Wt.subtreeFlags&12854)return!1;Wt=Wt.sibling}return!0}var Hm,Mp,V_,eu;if(Jr)Hm=function(Wt,Ht){for(var mn=Ht.child;mn!==null;){if(mn.tag===5||mn.tag===6)In(Wt,mn.stateNode);else if(mn.tag!==4&&mn.child!==null){mn.child.return=mn,mn=mn.child;continue}if(mn===Ht)break;for(;mn.sibling===null;){if(mn.return===null||mn.return===Ht)return;mn=mn.return}mn.sibling.return=mn.return,mn=mn.sibling}},Mp=function(){},V_=function(Wt,Ht,mn,On,bn){if(Wt=Wt.memoizedProps,Wt!==On){var An=Ht.stateNode,Xn=gu(Fl.current);mn=pr(An,mn,Wt,On,bn,Xn),(Ht.updateQueue=mn)&&Iu(Ht)}},eu=function(Wt,Ht,mn,On){mn!==On&&Iu(Ht)};else if(Tr){Hm=function(Wt,Ht,mn,On){for(var bn=Ht.child;bn!==null;){if(bn.tag===5){var An=bn.stateNode;mn&&On&&(An=ss(An,bn.type,bn.memoizedProps,bn)),In(Wt,An)}else if(bn.tag===6)An=bn.stateNode,mn&&On&&(An=cs(An,bn.memoizedProps,bn)),In(Wt,An);else if(bn.tag!==4){if(bn.tag===22&&bn.memoizedState!==null)An=bn.child,An!==null&&(An.return=bn),Hm(Wt,bn,!0,!0);else if(bn.child!==null){bn.child.return=bn,bn=bn.child;continue}}if(bn===Ht)break;for(;bn.sibling===null;){if(bn.return===null||bn.return===Ht)return;bn=bn.return}bn.sibling.return=bn.return,bn=bn.sibling}};var Z0=function(Wt,Ht,mn,On){for(var bn=Ht.child;bn!==null;){if(bn.tag===5){var An=bn.stateNode;mn&&On&&(An=ss(An,bn.type,bn.memoizedProps,bn)),ls(Wt,An)}else if(bn.tag===6)An=bn.stateNode,mn&&On&&(An=cs(An,bn.memoizedProps,bn)),ls(Wt,An);else if(bn.tag!==4){if(bn.tag===22&&bn.memoizedState!==null)An=bn.child,An!==null&&(An.return=bn),Z0(Wt,bn,!0,!0);else if(bn.child!==null){bn.child.return=bn,bn=bn.child;continue}}if(bn===Ht)break;for(;bn.sibling===null;){if(bn.return===null||bn.return===Ht)return;bn=bn.return}bn.sibling.return=bn.return,bn=bn.sibling}};Mp=function(Wt,Ht){var mn=Ht.stateNode;if(!Y0(Wt,Ht)){Wt=mn.containerInfo;var On=ns(Wt);Z0(On,Ht,!1,!1),mn.pendingChildren=On,Iu(Ht),Ds(Wt,On)}},V_=function(Wt,Ht,mn,On,bn){var An=Wt.stateNode,Xn=Wt.memoizedProps;if((Wt=Y0(Wt,Ht))&&Xn===On)Ht.stateNode=An;else{var lr=Ht.stateNode,Er=gu(Fl.current),Hr=null;Xn!==On&&(Hr=pr(lr,mn,Xn,On,bn,Er)),Wt&&Hr===null?Ht.stateNode=An:(An=ho(An,Hr,mn,Xn,On,Ht,Wt,lr),ir(An,mn,On,bn,Er)&&Iu(Ht),Ht.stateNode=An,Wt?Iu(Ht):Hm(An,Ht,!1,!1))}},eu=function(Wt,Ht,mn,On){mn!==On?(Wt=gu(ba.current),mn=gu(Fl.current),Ht.stateNode=Pr(On,Wt,mn,Ht),Iu(Ht)):Ht.stateNode=Wt.stateNode}}else Mp=function(){},V_=function(){},eu=function(){};function zm(Wt,Ht){if(!hs)switch(Wt.tailMode){case"hidden":Ht=Wt.tail;for(var mn=null;Ht!==null;)Ht.alternate!==null&&(mn=Ht),Ht=Ht.sibling;mn===null?Wt.tail=null:mn.sibling=null;break;case"collapsed":mn=Wt.tail;for(var On=null;mn!==null;)mn.alternate!==null&&(On=mn),mn=mn.sibling;On===null?Ht||Wt.tail===null?Wt.tail=null:Wt.tail.sibling=null:On.sibling=null}}function Ys(Wt){var Ht=Wt.alternate!==null&&Wt.alternate.child===Wt.child,mn=0,On=0;if(Ht)for(var bn=Wt.child;bn!==null;)mn|=bn.lanes|bn.childLanes,On|=bn.subtreeFlags&14680064,On|=bn.flags&14680064,bn.return=Wt,bn=bn.sibling;else for(bn=Wt.child;bn!==null;)mn|=bn.lanes|bn.childLanes,On|=bn.subtreeFlags,On|=bn.flags,bn.return=Wt,bn=bn.sibling;return Wt.subtreeFlags|=On,Wt.childLanes=mn,Ht}function cS(Wt,Ht,mn){var On=Ht.pendingProps;switch(ZO(Ht),Ht.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ys(Ht),null;case 1:return Js(Ht.type)&&xm(),Ys(Ht),null;case 3:return On=Ht.stateNode,Rp(),Vr(zs),Vr(ws),Fm(),On.pendingContext&&(On.context=On.pendingContext,On.pendingContext=null),(Wt===null||Wt.child===null)&&(xp(Ht)?Iu(Ht):Wt===null||Wt.memoizedState.isDehydrated&&!(Ht.flags&256)||(Ht.flags|=1024,fu!==null&&(xy(fu),fu=null))),Mp(Wt,Ht),Ys(Ht),null;case 5:JO(Ht),mn=gu(ba.current);var bn=Ht.type;if(Wt!==null&&Ht.stateNode!=null)V_(Wt,Ht,bn,On,mn),Wt.ref!==Ht.ref&&(Ht.flags|=512,Ht.flags|=2097152);else{if(!On){if(Ht.stateNode===null)throw Error(Ct(166));return Ys(Ht),null}if(Wt=gu(Fl.current),xp(Ht)){if(!Ir)throw Error(Ct(175));Wt=bo(Ht.stateNode,Ht.type,Ht.memoizedProps,mn,Wt,Ht,!em),Ht.updateQueue=Wt,Wt!==null&&Iu(Ht)}else{var An=sr(bn,On,mn,Wt,Ht);Hm(An,Ht,!1,!1),Ht.stateNode=An,ir(An,bn,On,mn,Wt)&&Iu(Ht)}Ht.ref!==null&&(Ht.flags|=512,Ht.flags|=2097152)}return Ys(Ht),null;case 6:if(Wt&&Ht.stateNode!=null)eu(Wt,Ht,Wt.memoizedProps,On);else{if(typeof On!="string"&&Ht.stateNode===null)throw Error(Ct(166));if(Wt=gu(ba.current),mn=gu(Fl.current),xp(Ht)){if(!Ir)throw Error(Ct(176));if(Wt=Ht.stateNode,On=Ht.memoizedProps,(mn=Lo(Wt,On,Ht,!em))&&(bn=Nl,bn!==null))switch(An=(bn.mode&1)!==0,bn.tag){case 3:au(bn.stateNode.containerInfo,Wt,On,An);break;case 5:Bo(bn.type,bn.memoizedProps,bn.stateNode,Wt,On,An)}mn&&Iu(Ht)}else Ht.stateNode=Pr(On,Wt,mn,Ht)}return Ys(Ht),null;case 13:if(Vr(ms),On=Ht.memoizedState,hs&&Bl!==null&&Ht.mode&1&&!(Ht.flags&128)){for(Wt=Bl;Wt;)Wt=xr(Wt);return pu(),Ht.flags|=98560,Ht}if(On!==null&&On.dehydrated!==null){if(On=xp(Ht),Wt===null){if(!On)throw Error(Ct(318));if(!Ir)throw Error(Ct(344));if(Wt=Ht.memoizedState,Wt=Wt!==null?Wt.dehydrated:null,!Wt)throw Error(Ct(317));Eo(Wt,Ht)}else pu(),!(Ht.flags&128)&&(Ht.memoizedState=null),Ht.flags|=4;return Ys(Ht),null}return fu!==null&&(xy(fu),fu=null),Ht.flags&128?(Ht.lanes=mn,Ht):(On=On!==null,mn=!1,Wt===null?xp(Ht):mn=Wt.memoizedState!==null,On&&!mn&&(Ht.child.flags|=8192,Ht.mode&1&&(Wt===null||ms.current&1?Ms===0&&(Ms=3):r_())),Ht.updateQueue!==null&&(Ht.flags|=4),Ys(Ht),null);case 4:return Rp(),Mp(Wt,Ht),Wt===null&&oo(Ht.stateNode.containerInfo),Ys(Ht),null;case 10:return WO(Ht.type._context),Ys(Ht),null;case 17:return Js(Ht.type)&&xm(),Ys(Ht),null;case 19:if(Vr(ms),bn=Ht.memoizedState,bn===null)return Ys(Ht),null;if(On=(Ht.flags&128)!==0,An=bn.rendering,An===null)if(On)zm(bn,!1);else{if(Ms!==0||Wt!==null&&Wt.flags&128)for(Wt=Ht.child;Wt!==null;){if(An=$a(Wt),An!==null){for(Ht.flags|=128,zm(bn,!1),Wt=An.updateQueue,Wt!==null&&(Ht.updateQueue=Wt,Ht.flags|=4),Ht.subtreeFlags=0,Wt=mn,On=Ht.child;On!==null;)mn=On,bn=Wt,mn.flags&=14680066,An=mn.alternate,An===null?(mn.childLanes=0,mn.lanes=bn,mn.child=null,mn.subtreeFlags=0,mn.memoizedProps=null,mn.memoizedState=null,mn.updateQueue=null,mn.dependencies=null,mn.stateNode=null):(mn.childLanes=An.childLanes,mn.lanes=An.lanes,mn.child=An.child,mn.subtreeFlags=0,mn.deletions=null,mn.memoizedProps=An.memoizedProps,mn.memoizedState=An.memoizedState,mn.updateQueue=An.updateQueue,mn.type=An.type,bn=An.dependencies,mn.dependencies=bn===null?null:{lanes:bn.lanes,firstContext:bn.firstContext}),On=On.sibling;return Yo(ms,ms.current&1|2),Ht.child}Wt=Wt.sibling}bn.tail!==null&&ks()>t_&&(Ht.flags|=128,On=!0,zm(bn,!1),Ht.lanes=4194304)}else{if(!On)if(Wt=$a(An),Wt!==null){if(Ht.flags|=128,On=!0,Wt=Wt.updateQueue,Wt!==null&&(Ht.updateQueue=Wt,Ht.flags|=4),zm(bn,!0),bn.tail===null&&bn.tailMode==="hidden"&&!An.alternate&&!hs)return Ys(Ht),null}else 2*ks()-bn.renderingStartTime>t_&&mn!==1073741824&&(Ht.flags|=128,On=!0,zm(bn,!1),Ht.lanes=4194304);bn.isBackwards?(An.sibling=Ht.child,Ht.child=An):(Wt=bn.last,Wt!==null?Wt.sibling=An:Ht.child=An,bn.last=An)}return bn.tail!==null?(Ht=bn.tail,bn.rendering=Ht,bn.tail=Ht.sibling,bn.renderingStartTime=ks(),Ht.sibling=null,Wt=ms.current,Yo(ms,On?Wt&1|2:Wt&1),Ht):(Ys(Ht),null);case 22:case 23:return aO(),On=Ht.memoizedState!==null,Wt!==null&&Wt.memoizedState!==null!==On&&(Ht.flags|=8192),On&&Ht.mode&1?xl&1073741824&&(Ys(Ht),Jr&&Ht.subtreeFlags&6&&(Ht.flags|=8192)):Ys(Ht),null;case 24:return null;case 25:return null}throw Error(Ct(156,Ht.tag))}var uS=At.ReactCurrentOwner,Ul=!1;function _l(Wt,Ht,mn,On){Ht.child=Wt===null?Cp(Ht,null,mn,On):mu(Ht,Wt.child,mn,On)}function ly(Wt,Ht,mn,On,bn){mn=mn.render;var An=Ht.ref;return Jp(Ht,bn),On=ty(Wt,Ht,mn,On,An,bn),mn=om(),Wt!==null&&!Ul?(Ht.updateQueue=Wt.updateQueue,Ht.flags&=-2053,Wt.lanes&=~bn,ku(Wt,Ht,bn)):(hs&&mn&&M_(Ht),Ht.flags|=1,_l(Wt,Ht,On,bn),Ht.child)}function np(Wt,Ht,mn,On,bn){if(Wt===null){var An=mn.type;return typeof An=="function"&&!Ly(An)&&An.defaultProps===void 0&&mn.compare===null&&mn.defaultProps===void 0?(Ht.tag=15,Ht.type=An,W_(Wt,Ht,An,On,bn)):(Wt=lO(mn.type,null,On,Ht,Ht.mode,bn),Wt.ref=Ht.ref,Wt.return=Ht,Ht.child=Wt)}if(An=Wt.child,!(Wt.lanes&bn)){var Xn=An.memoizedProps;if(mn=mn.compare,mn=mn!==null?mn:A_,mn(Xn,On)&&Wt.ref===Ht.ref)return ku(Wt,Ht,bn)}return Ht.flags|=1,Wt=up(An,On),Wt.ref=Ht.ref,Wt.return=Ht,Ht.child=Wt}function W_(Wt,Ht,mn,On,bn){if(Wt!==null&&A_(Wt.memoizedProps,On)&&Wt.ref===Ht.ref)if(Ul=!1,(Wt.lanes&bn)!==0)Wt.flags&131072&&(Ul=!0);else return Ht.lanes=Wt.lanes,ku(Wt,Ht,bn);return uy(Wt,Ht,mn,On,bn)}function cy(Wt,Ht,mn){var On=Ht.pendingProps,bn=On.children,An=Wt!==null?Wt.memoizedState:null;if(On.mode==="hidden")if(!(Ht.mode&1))Ht.memoizedState={baseLanes:0,cachePool:null},Yo(Qu,xl),xl|=mn;else if(mn&1073741824)Ht.memoizedState={baseLanes:0,cachePool:null},On=An!==null?An.baseLanes:mn,Yo(Qu,xl),xl|=On;else return Wt=An!==null?An.baseLanes|mn:mn,Ht.lanes=Ht.childLanes=1073741824,Ht.memoizedState={baseLanes:Wt,cachePool:null},Ht.updateQueue=null,Yo(Qu,xl),xl|=Wt,null;else An!==null?(On=An.baseLanes|mn,Ht.memoizedState=null):On=mn,Yo(Qu,xl),xl|=On;return _l(Wt,Ht,bn,mn),Ht.child}function q0(Wt,Ht){var mn=Ht.ref;(Wt===null&&mn!==null||Wt!==null&&Wt.ref!==mn)&&(Ht.flags|=512,Ht.flags|=2097152)}function uy(Wt,Ht,mn,On,bn){var An=Js(mn)?No:ws.current;return An=Ml(Ht,An),Jp(Ht,bn),mn=ty(Wt,Ht,mn,On,An,bn),On=om(),Wt!==null&&!Ul?(Ht.updateQueue=Wt.updateQueue,Ht.flags&=-2053,Wt.lanes&=~bn,ku(Wt,Ht,bn)):(hs&&On&&M_(Ht),Ht.flags|=1,_l(Wt,Ht,mn,bn),Ht.child)}function K0(Wt,Ht,mn,On,bn){if(Js(mn)){var An=!0;jp(Ht)}else An=!1;if(Jp(Ht,bn),Ht.stateNode===null)Wt!==null&&(Wt.alternate=null,Ht.alternate=null,Ht.flags|=2),P0(Ht,mn,On),XO(Ht,mn,On,bn),On=!0;else if(Wt===null){var Xn=Ht.stateNode,lr=Ht.memoizedProps;Xn.props=lr;var Er=Xn.context,Hr=mn.contextType;typeof Hr=="object"&&Hr!==null?Hr=Zl(Hr):(Hr=Js(mn)?No:ws.current,Hr=Ml(Ht,Hr));var so=mn.getDerivedStateFromProps,Io=typeof so=="function"||typeof Xn.getSnapshotBeforeUpdate=="function";Io||typeof Xn.UNSAFE_componentWillReceiveProps!="function"&&typeof Xn.componentWillReceiveProps!="function"||(lr!==On||Er!==Hr)&&L0(Ht,Xn,On,Hr),ep=!1;var vo=Ht.memoizedState;Xn.state=vo,I_(Ht,On,Xn,bn),Er=Ht.memoizedState,lr!==On||vo!==Er||zs.current||ep?(typeof so=="function"&&(jO(Ht,mn,so,On),Er=Ht.memoizedState),(lr=ep||M0(Ht,mn,lr,On,vo,Er,Hr))?(Io||typeof Xn.UNSAFE_componentWillMount!="function"&&typeof Xn.componentWillMount!="function"||(typeof Xn.componentWillMount=="function"&&Xn.componentWillMount(),typeof Xn.UNSAFE_componentWillMount=="function"&&Xn.UNSAFE_componentWillMount()),typeof Xn.componentDidMount=="function"&&(Ht.flags|=4194308)):(typeof Xn.componentDidMount=="function"&&(Ht.flags|=4194308),Ht.memoizedProps=On,Ht.memoizedState=Er),Xn.props=On,Xn.state=Er,Xn.context=Hr,On=lr):(typeof Xn.componentDidMount=="function"&&(Ht.flags|=4194308),On=!1)}else{Xn=Ht.stateNode,k0(Wt,Ht),lr=Ht.memoizedProps,Hr=Ht.type===Ht.elementType?lr:du(Ht.type,lr),Xn.props=Hr,Io=Ht.pendingProps,vo=Xn.context,Er=mn.contextType,typeof Er=="object"&&Er!==null?Er=Zl(Er):(Er=Js(mn)?No:ws.current,Er=Ml(Ht,Er));var rs=mn.getDerivedStateFromProps;(so=typeof rs=="function"||typeof Xn.getSnapshotBeforeUpdate=="function")||typeof Xn.UNSAFE_componentWillReceiveProps!="function"&&typeof Xn.componentWillReceiveProps!="function"||(lr!==Io||vo!==Er)&&L0(Ht,Xn,On,Er),ep=!1,vo=Ht.memoizedState,Xn.state=vo,I_(Ht,On,Xn,bn);var Oo=Ht.memoizedState;lr!==Io||vo!==Oo||zs.current||ep?(typeof rs=="function"&&(jO(Ht,mn,rs,On),Oo=Ht.memoizedState),(Hr=ep||M0(Ht,mn,Hr,On,vo,Oo,Er)||!1)?(so||typeof Xn.UNSAFE_componentWillUpdate!="function"&&typeof Xn.componentWillUpdate!="function"||(typeof Xn.componentWillUpdate=="function"&&Xn.componentWillUpdate(On,Oo,Er),typeof Xn.UNSAFE_componentWillUpdate=="function"&&Xn.UNSAFE_componentWillUpdate(On,Oo,Er)),typeof Xn.componentDidUpdate=="function"&&(Ht.flags|=4),typeof Xn.getSnapshotBeforeUpdate=="function"&&(Ht.flags|=1024)):(typeof Xn.componentDidUpdate!="function"||lr===Wt.memoizedProps&&vo===Wt.memoizedState||(Ht.flags|=4),typeof Xn.getSnapshotBeforeUpdate!="function"||lr===Wt.memoizedProps&&vo===Wt.memoizedState||(Ht.flags|=1024),Ht.memoizedProps=On,Ht.memoizedState=Oo),Xn.props=On,Xn.state=Oo,Xn.context=Er,On=Hr):(typeof Xn.componentDidUpdate!="function"||lr===Wt.memoizedProps&&vo===Wt.memoizedState||(Ht.flags|=4),typeof Xn.getSnapshotBeforeUpdate!="function"||lr===Wt.memoizedProps&&vo===Wt.memoizedState||(Ht.flags|=1024),On=!1)}return hy(Wt,Ht,mn,On,An,bn)}function hy(Wt,Ht,mn,On,bn,An){q0(Wt,Ht);var Xn=(Ht.flags&128)!==0;if(!On&&!Xn)return bn&&C0(Ht,mn,!1),ku(Wt,Ht,An);On=Ht.stateNode,uS.current=Ht;var lr=Xn&&typeof mn.getDerivedStateFromError!="function"?null:On.render();return Ht.flags|=1,Wt!==null&&Xn?(Ht.child=mu(Ht,Wt.child,null,An),Ht.child=mu(Ht,null,lr,An)):_l(Wt,Ht,lr,An),Ht.memoizedState=On.state,bn&&C0(Ht,mn,!0),Ht.child}function J0(Wt){var Ht=Wt.stateNode;Ht.pendingContext?wm(Wt,Ht.pendingContext,Ht.pendingContext!==Ht.context):Ht.context&&wm(Wt,Ht.context,!1),Bm(Wt,Ht.containerInfo)}function ev(Wt,Ht,mn,On,bn){return pu(),Lm(bn),Ht.flags|=256,_l(Wt,Ht,mn,On),Ht.child}var Q_={dehydrated:null,treeContext:null,retryLane:0};function H_(Wt){return{baseLanes:Wt,cachePool:null}}function dy(Wt,Ht,mn){var On=Ht.pendingProps,bn=ms.current,An=!1,Xn=(Ht.flags&128)!==0,lr;if((lr=Xn)||(lr=Wt!==null&&Wt.memoizedState===null?!1:(bn&2)!==0),lr?(An=!0,Ht.flags&=-129):(Wt===null||Wt.memoizedState!==null)&&(bn|=1),Yo(ms,bn&1),Wt===null)return tm(Ht),Wt=Ht.memoizedState,Wt!==null&&(Wt=Wt.dehydrated,Wt!==null)?(Ht.mode&1?Hn(Wt)?Ht.lanes=8:Ht.lanes=1073741824:Ht.lanes=1,null):(bn=On.children,Wt=On.fallback,An?(On=Ht.mode,An=Ht.child,bn={mode:"hidden",children:bn},!(On&1)&&An!==null?(An.childLanes=0,An.pendingProps=bn):An=_o(bn,On,0,null),Wt=Np(Wt,On,mn,null),An.return=Ht,Wt.return=Ht,An.sibling=Wt,Ht.child=An,Ht.child.memoizedState=H_(mn),Ht.memoizedState=Q_,Wt):fy(Ht,bn));if(bn=Wt.memoizedState,bn!==null){if(lr=bn.dehydrated,lr!==null){if(Xn)return Ht.flags&256?(Ht.flags&=-257,z_(Wt,Ht,mn,Error(Ct(422)))):Ht.memoizedState!==null?(Ht.child=Wt.child,Ht.flags|=128,null):(An=On.fallback,bn=Ht.mode,On=_o({mode:"visible",children:On.children},bn,0,null),An=Np(An,bn,mn,null),An.flags|=2,On.return=Ht,An.return=Ht,On.sibling=An,Ht.child=On,Ht.mode&1&&mu(Ht,Wt.child,null,mn),Ht.child.memoizedState=H_(mn),Ht.memoizedState=Q_,An);if(!(Ht.mode&1))Ht=z_(Wt,Ht,mn,null);else if(Hn(lr))Ht=z_(Wt,Ht,mn,Error(Ct(419)));else if(On=(mn&Wt.childLanes)!==0,Ul||On){if(On=Ts,On!==null){switch(mn&-mn){case 4:An=2;break;case 16:An=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:An=32;break;case 536870912:An=268435456;break;default:An=0}On=An&(On.suspendedLanes|mn)?0:An,On!==0&&On!==bn.retryLane&&(bn.retryLane=On,nu(Wt,On,-1))}r_(),Ht=z_(Wt,Ht,mn,Error(Ct(421)))}else b_(lr)?(Ht.flags|=128,Ht.child=Wt.child,Ht=pS.bind(null,Wt),_r(lr,Ht),Ht=null):(mn=bn.treeContext,Ir&&(Bl=So(lr),Nl=Ht,hs=!0,fu=null,em=!1,mn!==null&&(ga[_c++]=wu,ga[_c++]=Cu,ga[_c++]=Ep,wu=mn.id,Cu=mn.overflow,Ep=Ht)),Ht=fy(Ht,Ht.pendingProps.children),Ht.flags|=4096);return Ht}return An?(On=nv(Wt,Ht,On.children,On.fallback,mn),An=Ht.child,bn=Wt.child.memoizedState,An.memoizedState=bn===null?H_(mn):{baseLanes:bn.baseLanes|mn,cachePool:null},An.childLanes=Wt.childLanes&~mn,Ht.memoizedState=Q_,On):(mn=tv(Wt,Ht,On.children,mn),Ht.memoizedState=null,mn)}return An?(On=nv(Wt,Ht,On.children,On.fallback,mn),An=Ht.child,bn=Wt.child.memoizedState,An.memoizedState=bn===null?H_(mn):{baseLanes:bn.baseLanes|mn,cachePool:null},An.childLanes=Wt.childLanes&~mn,Ht.memoizedState=Q_,On):(mn=tv(Wt,Ht,On.children,mn),Ht.memoizedState=null,mn)}function fy(Wt,Ht){return Ht=_o({mode:"visible",children:Ht},Wt.mode,0,null),Ht.return=Wt,Wt.child=Ht}function tv(Wt,Ht,mn,On){var bn=Wt.child;return Wt=bn.sibling,mn=up(bn,{mode:"visible",children:mn}),!(Ht.mode&1)&&(mn.lanes=On),mn.return=Ht,mn.sibling=null,Wt!==null&&(On=Ht.deletions,On===null?(Ht.deletions=[Wt],Ht.flags|=16):On.push(Wt)),Ht.child=mn}function nv(Wt,Ht,mn,On,bn){var An=Ht.mode;Wt=Wt.child;var Xn=Wt.sibling,lr={mode:"hidden",children:mn};return!(An&1)&&Ht.child!==Wt?(mn=Ht.child,mn.childLanes=0,mn.pendingProps=lr,Ht.deletions=null):(mn=up(Wt,lr),mn.subtreeFlags=Wt.subtreeFlags&14680064),Xn!==null?On=up(Xn,On):(On=Np(On,An,bn,null),On.flags|=2),On.return=Ht,mn.return=Ht,mn.sibling=On,Ht.child=mn,On}function z_(Wt,Ht,mn,On){return On!==null&&Lm(On),mu(Ht,Wt.child,null,mn),Wt=fy(Ht,Ht.pendingProps.children),Wt.flags|=2,Ht.memoizedState=null,Wt}function jm(Wt,Ht,mn){Wt.lanes|=Ht;var On=Wt.alternate;On!==null&&(On.lanes|=Ht),R_(Wt.return,Ht,mn)}function j_(Wt,Ht,mn,On,bn){var An=Wt.memoizedState;An===null?Wt.memoizedState={isBackwards:Ht,rendering:null,renderingStartTime:0,last:On,tail:mn,tailMode:bn}:(An.isBackwards=Ht,An.rendering=null,An.renderingStartTime=0,An.last=On,An.tail=mn,An.tailMode=bn)}function my(Wt,Ht,mn){var On=Ht.pendingProps,bn=On.revealOrder,An=On.tail;if(_l(Wt,Ht,On.children,mn),On=ms.current,On&2)On=On&1|2,Ht.flags|=128;else{if(Wt!==null&&Wt.flags&128)e:for(Wt=Ht.child;Wt!==null;){if(Wt.tag===13)Wt.memoizedState!==null&&jm(Wt,mn,Ht);else if(Wt.tag===19)jm(Wt,mn,Ht);else if(Wt.child!==null){Wt.child.return=Wt,Wt=Wt.child;continue}if(Wt===Ht)break e;for(;Wt.sibling===null;){if(Wt.return===null||Wt.return===Ht)break e;Wt=Wt.return}Wt.sibling.return=Wt.return,Wt=Wt.sibling}On&=1}if(Yo(ms,On),!(Ht.mode&1))Ht.memoizedState=null;else switch(bn){case"forwards":for(mn=Ht.child,bn=null;mn!==null;)Wt=mn.alternate,Wt!==null&&$a(Wt)===null&&(bn=mn),mn=mn.sibling;mn=bn,mn===null?(bn=Ht.child,Ht.child=null):(bn=mn.sibling,mn.sibling=null),j_(Ht,!1,bn,mn,An);break;case"backwards":for(mn=null,bn=Ht.child,Ht.child=null;bn!==null;){if(Wt=bn.alternate,Wt!==null&&$a(Wt)===null){Ht.child=bn;break}Wt=bn.sibling,bn.sibling=mn,mn=bn,bn=Wt}j_(Ht,!0,mn,null,An);break;case"together":j_(Ht,!1,null,null,void 0);break;default:Ht.memoizedState=null}return Ht.child}function ku(Wt,Ht,mn){if(Wt!==null&&(Ht.dependencies=Wt.dependencies),dm|=Ht.lanes,!(mn&Ht.childLanes))return null;if(Wt!==null&&Ht.child!==Wt.child)throw Error(Ct(153));if(Ht.child!==null){for(Wt=Ht.child,mn=up(Wt,Wt.pendingProps),Ht.child=mn,mn.return=Ht;Wt.sibling!==null;)Wt=Wt.sibling,mn=mn.sibling=up(Wt,Wt.pendingProps),mn.return=Ht;mn.sibling=null}return Ht.child}function rv(Wt,Ht,mn){switch(Ht.tag){case 3:J0(Ht),pu();break;case 5:KO(Ht);break;case 1:Js(Ht.type)&&jp(Ht);break;case 4:Bm(Ht,Ht.stateNode.containerInfo);break;case 10:I0(Ht,Ht.type._context,Ht.memoizedProps.value);break;case 13:var On=Ht.memoizedState;if(On!==null)return On.dehydrated!==null?(Yo(ms,ms.current&1),Ht.flags|=128,null):mn&Ht.child.childLanes?dy(Wt,Ht,mn):(Yo(ms,ms.current&1),Wt=ku(Wt,Ht,mn),Wt!==null?Wt.sibling:null);Yo(ms,ms.current&1);break;case 19:if(On=(mn&Ht.childLanes)!==0,Wt.flags&128){if(On)return my(Wt,Ht,mn);Ht.flags|=128}var bn=Ht.memoizedState;if(bn!==null&&(bn.rendering=null,bn.tail=null,bn.lastEffect=null),Yo(ms,ms.current),On)break;return null;case 22:case 23:return Ht.lanes=0,cy(Wt,Ht,mn)}return ku(Wt,Ht,mn)}function iv(Wt,Ht){switch(ZO(Ht),Ht.tag){case 1:return Js(Ht.type)&&xm(),Wt=Ht.flags,Wt&65536?(Ht.flags=Wt&-65537|128,Ht):null;case 3:return Rp(),Vr(zs),Vr(ws),Fm(),Wt=Ht.flags,Wt&65536&&!(Wt&128)?(Ht.flags=Wt&-65537|128,Ht):null;case 5:return JO(Ht),null;case 13:if(Vr(ms),Wt=Ht.memoizedState,Wt!==null&&Wt.dehydrated!==null){if(Ht.alternate===null)throw Error(Ct(340));pu()}return Wt=Ht.flags,Wt&65536?(Ht.flags=Wt&-65537|128,Ht):null;case 19:return Vr(ms),null;case 4:return Rp(),null;case 10:return WO(Ht.type._context),null;case 22:case 23:return aO(),null;case 24:return null;default:return null}}var Xm=!1,Ou=!1,Ym=typeof WeakSet=="function"?WeakSet:Set,eo=null;function lm(Wt,Ht){var mn=Wt.ref;if(mn!==null)if(typeof mn=="function")try{mn(null)}catch(On){yl(Wt,Ht,On)}else mn.current=null}function cm(Wt,Ht,mn){try{mn()}catch(On){yl(Wt,Ht,On)}}var ov=!1;function sv(Wt,Ht){for(Un(Wt.containerInfo),eo=Ht;eo!==null;)if(Wt=eo,Ht=Wt.child,(Wt.subtreeFlags&1028)!==0&&Ht!==null)Ht.return=Wt,eo=Ht;else for(;eo!==null;){Wt=eo;try{var mn=Wt.alternate;if(Wt.flags&1024)switch(Wt.tag){case 0:case 11:case 15:break;case 1:if(mn!==null){var On=mn.memoizedProps,bn=mn.memoizedState,An=Wt.stateNode,Xn=An.getSnapshotBeforeUpdate(Wt.elementType===Wt.type?On:du(Wt.type,On),bn);An.__reactInternalSnapshotBeforeUpdate=Xn}break;case 3:Jr&&ro(Wt.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ct(163))}}catch(lr){yl(Wt,Wt.return,lr)}if(Ht=Wt.sibling,Ht!==null){Ht.return=Wt.return,eo=Ht;break}eo=Wt.return}return mn=ov,ov=!1,mn}function rp(Wt,Ht,mn){var On=Ht.updateQueue;if(On=On!==null?On.lastEffect:null,On!==null){var bn=On=On.next;do{if((bn.tag&Wt)===Wt){var An=bn.destroy;bn.destroy=void 0,An!==void 0&&cm(Ht,mn,An)}bn=bn.next}while(bn!==On)}}function ip(Wt,Ht){if(Ht=Ht.updateQueue,Ht=Ht!==null?Ht.lastEffect:null,Ht!==null){var mn=Ht=Ht.next;do{if((mn.tag&Wt)===Wt){var On=mn.create;mn.destroy=On()}mn=mn.next}while(mn!==Ht)}}function gy(Wt){var Ht=Wt.ref;if(Ht!==null){var mn=Wt.stateNode;switch(Wt.tag){case 5:Wt=Qn(mn);break;default:Wt=mn}typeof Ht=="function"?Ht(Wt):Ht.current=Wt}}function av(Wt,Ht,mn){if(hu&&typeof hu.onCommitFiberUnmount=="function")try{hu.onCommitFiberUnmount(qp,Ht)}catch{}switch(Ht.tag){case 0:case 11:case 14:case 15:if(Wt=Ht.updateQueue,Wt!==null&&(Wt=Wt.lastEffect,Wt!==null)){var On=Wt=Wt.next;do{var bn=On,An=bn.destroy;bn=bn.tag,An!==void 0&&(bn&2||bn&4)&&cm(Ht,mn,An),On=On.next}while(On!==Wt)}break;case 1:if(lm(Ht,mn),Wt=Ht.stateNode,typeof Wt.componentWillUnmount=="function")try{Wt.props=Ht.memoizedProps,Wt.state=Ht.memoizedState,Wt.componentWillUnmount()}catch(Xn){yl(Ht,mn,Xn)}break;case 5:lm(Ht,mn);break;case 4:Jr?hv(Wt,Ht,mn):Tr&&Tr&&(Ht=Ht.stateNode.containerInfo,mn=ns(Ht),Gs(Ht,mn))}}function lv(Wt,Ht,mn){for(var On=Ht;;)if(av(Wt,On,mn),On.child===null||Jr&&On.tag===4){if(On===Ht)break;for(;On.sibling===null;){if(On.return===null||On.return===Ht)return;On=On.return}On.sibling.return=On.return,On=On.sibling}else On.child.return=On,On=On.child}function cv(Wt){var Ht=Wt.alternate;Ht!==null&&(Wt.alternate=null,cv(Ht)),Wt.child=null,Wt.deletions=null,Wt.sibling=null,Wt.tag===5&&(Ht=Wt.stateNode,Ht!==null&&to(Ht)),Wt.stateNode=null,Wt.return=null,Wt.dependencies=null,Wt.memoizedProps=null,Wt.memoizedState=null,Wt.pendingProps=null,Wt.stateNode=null,Wt.updateQueue=null}function Zm(Wt){return Wt.tag===5||Wt.tag===3||Wt.tag===4}function Oy(Wt){e:for(;;){for(;Wt.sibling===null;){if(Wt.return===null||Zm(Wt.return))return null;Wt=Wt.return}for(Wt.sibling.return=Wt.return,Wt=Wt.sibling;Wt.tag!==5&&Wt.tag!==6&&Wt.tag!==18;){if(Wt.flags&2||Wt.child===null||Wt.tag===4)continue e;Wt.child.return=Wt,Wt=Wt.child}if(!(Wt.flags&2))return Wt.stateNode}}function uv(Wt){if(Jr){e:{for(var Ht=Wt.return;Ht!==null;){if(Zm(Ht))break e;Ht=Ht.return}throw Error(Ct(160))}var mn=Ht;switch(mn.tag){case 5:Ht=mn.stateNode,mn.flags&32&&(Zn(Ht),mn.flags&=-33),mn=Oy(Wt),Y_(Wt,mn,Ht);break;case 3:case 4:Ht=mn.stateNode.containerInfo,mn=Oy(Wt),X_(Wt,mn,Ht);break;default:throw Error(Ct(161))}}}function X_(Wt,Ht,mn){var On=Wt.tag;if(On===5||On===6)Wt=Wt.stateNode,Ht?Dr(mn,Wt,Ht):Yr(mn,Wt);else if(On!==4&&(Wt=Wt.child,Wt!==null))for(X_(Wt,Ht,mn),Wt=Wt.sibling;Wt!==null;)X_(Wt,Ht,mn),Wt=Wt.sibling}function Y_(Wt,Ht,mn){var On=Wt.tag;if(On===5||On===6)Wt=Wt.stateNode,Ht?Sr(mn,Wt,Ht):fr(mn,Wt);else if(On!==4&&(Wt=Wt.child,Wt!==null))for(Y_(Wt,Ht,mn),Wt=Wt.sibling;Wt!==null;)Y_(Wt,Ht,mn),Wt=Wt.sibling}function hv(Wt,Ht,mn){for(var On=Ht,bn=!1,An,Xn;;){if(!bn){bn=On.return;e:for(;;){if(bn===null)throw Error(Ct(160));switch(An=bn.stateNode,bn.tag){case 5:Xn=!1;break e;case 3:An=An.containerInfo,Xn=!0;break e;case 4:An=An.containerInfo,Xn=!0;break e}bn=bn.return}bn=!0}if(On.tag===5||On.tag===6)lv(Wt,On,mn),Xn?Dn(An,On.stateNode):En(An,On.stateNode);else if(On.tag===18)Xn?Hs(An,On.stateNode):_s(An,On.stateNode);else if(On.tag===4){if(On.child!==null){An=On.stateNode.containerInfo,Xn=!0,On.child.return=On,On=On.child;continue}}else if(av(Wt,On,mn),On.child!==null){On.child.return=On,On=On.child;continue}if(On===Ht)break;for(;On.sibling===null;){if(On.return===null||On.return===Ht)return;On=On.return,On.tag===4&&(bn=!1)}On.sibling.return=On.return,On=On.sibling}}function qm(Wt,Ht){if(Jr){switch(Ht.tag){case 0:case 11:case 14:case 15:rp(3,Ht,Ht.return),ip(3,Ht),rp(5,Ht,Ht.return);return;case 1:return;case 5:var mn=Ht.stateNode;if(mn!=null){var On=Ht.memoizedProps;Wt=Wt!==null?Wt.memoizedProps:On;var bn=Ht.type,An=Ht.updateQueue;Ht.updateQueue=null,An!==null&&Kn(mn,An,bn,Wt,On,Ht)}return;case 6:if(Ht.stateNode===null)throw Error(Ct(162));mn=Ht.memoizedProps,wr(Ht.stateNode,Wt!==null?Wt.memoizedProps:mn,mn);return;case 3:Ir&&Wt!==null&&Wt.memoizedState.isDehydrated&&wo(Ht.stateNode.containerInfo);return;case 12:return;case 13:um(Ht);return;case 19:um(Ht);return;case 17:return}throw Error(Ct(163))}switch(Ht.tag){case 0:case 11:case 14:case 15:rp(3,Ht,Ht.return),ip(3,Ht),rp(5,Ht,Ht.return);return;case 12:return;case 13:um(Ht);return;case 19:um(Ht);return;case 3:Ir&&Wt!==null&&Wt.memoizedState.isDehydrated&&wo(Ht.stateNode.containerInfo);break;case 22:case 23:return}e:if(Tr){switch(Ht.tag){case 1:case 5:case 6:break e;case 3:case 4:Ht=Ht.stateNode,Gs(Ht.containerInfo,Ht.pendingChildren);break e}throw Error(Ct(163))}}function um(Wt){var Ht=Wt.updateQueue;if(Ht!==null){Wt.updateQueue=null;var mn=Wt.stateNode;mn===null&&(mn=Wt.stateNode=new Ym),Ht.forEach(function(On){var bn=mS.bind(null,Wt,On);mn.has(On)||(mn.add(On),On.then(bn,bn))})}}function yy(Wt,Ht){for(eo=Ht;eo!==null;){Ht=eo;var mn=Ht.deletions;if(mn!==null)for(var On=0;On<mn.length;On++){var bn=mn[On];try{var An=Wt;Jr?hv(An,bn,Ht):lv(An,bn,Ht);var Xn=bn.alternate;Xn!==null&&(Xn.return=null),bn.return=null}catch(fo){yl(bn,Ht,fo)}}if(mn=Ht.child,Ht.subtreeFlags&12854&&mn!==null)mn.return=Ht,eo=mn;else for(;eo!==null;){Ht=eo;try{var lr=Ht.flags;if(lr&32&&Jr&&Zn(Ht.stateNode),lr&512){var Er=Ht.alternate;if(Er!==null){var Hr=Er.ref;Hr!==null&&(typeof Hr=="function"?Hr(null):Hr.current=null)}}if(lr&8192)switch(Ht.tag){case 13:if(Ht.memoizedState!==null){var so=Ht.alternate;(so===null||so.memoizedState===null)&&(rO=ks())}break;case 22:var Io=Ht.memoizedState!==null,vo=Ht.alternate,rs=vo!==null&&vo.memoizedState!==null;if(mn=Ht,Jr){e:if(On=mn,bn=Io,An=null,Jr)for(var Oo=On;;){if(Oo.tag===5){if(An===null){An=Oo;var Bs=Oo.stateNode;bn?ur(Bs):hr(Oo.stateNode,Oo.memoizedProps)}}else if(Oo.tag===6){if(An===null){var As=Oo.stateNode;bn?Bn(As):Nr(As,Oo.memoizedProps)}}else if((Oo.tag!==22&&Oo.tag!==23||Oo.memoizedState===null||Oo===On)&&Oo.child!==null){Oo.child.return=Oo,Oo=Oo.child;continue}if(Oo===On)break;for(;Oo.sibling===null;){if(Oo.return===null||Oo.return===On)break e;An===Oo&&(An=null),Oo=Oo.return}An===Oo&&(An=null),Oo.sibling.return=Oo.return,Oo=Oo.sibling}}if(Io&&!rs&&mn.mode&1){eo=mn;for(var gr=mn.child;gr!==null;){for(mn=eo=gr;eo!==null;){On=eo;var cr=On.child;switch(On.tag){case 0:case 11:case 14:case 15:rp(4,On,On.return);break;case 1:lm(On,On.return);var yr=On.stateNode;if(typeof yr.componentWillUnmount=="function"){var jr=On.return;try{yr.props=On.memoizedProps,yr.state=On.memoizedState,yr.componentWillUnmount()}catch(fo){yl(On,jr,fo)}}break;case 5:lm(On,On.return);break;case 22:if(On.memoizedState!==null){Sy(mn);continue}}cr!==null?(cr.return=On,eo=cr):Sy(mn)}gr=gr.sibling}}}switch(lr&4102){case 2:uv(Ht),Ht.flags&=-3;break;case 6:uv(Ht),Ht.flags&=-3,qm(Ht.alternate,Ht);break;case 4096:Ht.flags&=-4097;break;case 4100:Ht.flags&=-4097,qm(Ht.alternate,Ht);break;case 4:qm(Ht.alternate,Ht)}}catch(fo){yl(Ht,Ht.return,fo)}if(mn=Ht.sibling,mn!==null){mn.return=Ht.return,eo=mn;break}eo=Ht.return}}}function dv(Wt,Ht,mn){eo=Wt,vy(Wt)}function vy(Wt,Ht,mn){for(var On=(Wt.mode&1)!==0;eo!==null;){var bn=eo,An=bn.child;if(bn.tag===22&&On){var Xn=bn.memoizedState!==null||Xm;if(!Xn){var lr=bn.alternate,Er=lr!==null&&lr.memoizedState!==null||Ou;lr=Xm;var Hr=Ou;if(Xm=Xn,(Ou=Er)&&!Hr)for(eo=bn;eo!==null;)Xn=eo,Er=Xn.child,Xn.tag===22&&Xn.memoizedState!==null?$y(bn):Er!==null?(Er.return=Xn,eo=Er):$y(bn);for(;An!==null;)eo=An,vy(An),An=An.sibling;eo=bn,Xm=lr,Ou=Hr}by(Wt)}else bn.subtreeFlags&8772&&An!==null?(An.return=bn,eo=An):by(Wt)}}function by(Wt){for(;eo!==null;){var Ht=eo;if(Ht.flags&8772){var mn=Ht.alternate;try{if(Ht.flags&8772)switch(Ht.tag){case 0:case 11:case 15:Ou||ip(5,Ht);break;case 1:var On=Ht.stateNode;if(Ht.flags&4&&!Ou)if(mn===null)On.componentDidMount();else{var bn=Ht.elementType===Ht.type?mn.memoizedProps:du(Ht.type,mn.memoizedProps);On.componentDidUpdate(bn,mn.memoizedState,On.__reactInternalSnapshotBeforeUpdate)}var An=Ht.updateQueue;An!==null&&k_(Ht,An,On);break;case 3:var Xn=Ht.updateQueue;if(Xn!==null){if(mn=null,Ht.child!==null)switch(Ht.child.tag){case 5:mn=Qn(Ht.child.stateNode);break;case 1:mn=Ht.child.stateNode}k_(Ht,Xn,mn)}break;case 5:var lr=Ht.stateNode;mn===null&&Ht.flags&4&&ao(lr,Ht.type,Ht.memoizedProps,Ht);break;case 6:break;case 4:break;case 12:break;case 13:if(Ir&&Ht.memoizedState===null){var Er=Ht.alternate;if(Er!==null){var Hr=Er.memoizedState;if(Hr!==null){var so=Hr.dehydrated;so!==null&&Fr(so)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(Ct(163))}Ou||Ht.flags&512&&gy(Ht)}catch(Io){yl(Ht,Ht.return,Io)}}if(Ht===Wt){eo=null;break}if(mn=Ht.sibling,mn!==null){mn.return=Ht.return,eo=mn;break}eo=Ht.return}}function Sy(Wt){for(;eo!==null;){var Ht=eo;if(Ht===Wt){eo=null;break}var mn=Ht.sibling;if(mn!==null){mn.return=Ht.return,eo=mn;break}eo=Ht.return}}function $y(Wt){for(;eo!==null;){var Ht=eo;try{switch(Ht.tag){case 0:case 11:case 15:var mn=Ht.return;try{ip(4,Ht)}catch(Er){yl(Ht,mn,Er)}break;case 1:var On=Ht.stateNode;if(typeof On.componentDidMount=="function"){var bn=Ht.return;try{On.componentDidMount()}catch(Er){yl(Ht,bn,Er)}}var An=Ht.return;try{gy(Ht)}catch(Er){yl(Ht,An,Er)}break;case 5:var Xn=Ht.return;try{gy(Ht)}catch(Er){yl(Ht,Xn,Er)}}}catch(Er){yl(Ht,Ht.return,Er)}if(Ht===Wt){eo=null;break}var lr=Ht.sibling;if(lr!==null){lr.return=Ht.return,eo=lr;break}eo=Ht.return}}var Km=0,Jm=1,_g=2,Wu=3,Z_=4;if(typeof Symbol=="function"&&Symbol.for){var tu=Symbol.for;Km=tu("selector.component"),Jm=tu("selector.has_pseudo_class"),_g=tu("selector.role"),Wu=tu("selector.test_id"),Z_=tu("selector.text")}function e_(Wt){var Ht=Qr(Wt);if(Ht!=null){if(typeof Ht.memoizedProps["data-testname"]!="string")throw Error(Ct(364));return Ht}if(Wt=Vo(Wt),Wt===null)throw Error(Ct(362));return Wt.stateNode.current}function q_(Wt,Ht){switch(Ht.$$typeof){case Km:if(Wt.type===Ht.value)return!0;break;case Jm:e:{Ht=Ht.value,Wt=[Wt,0];for(var mn=0;mn<Wt.length;){var On=Wt[mn++],bn=Wt[mn++],An=Ht[bn];if(On.tag!==5||!rr(On)){for(;An!=null&&q_(On,An);)bn++,An=Ht[bn];if(bn===Ht.length){Ht=!0;break e}else for(On=On.child;On!==null;)Wt.push(On,bn),On=On.sibling}}Ht=!1}return Ht;case _g:if(Wt.tag===5&&Or(Wt.stateNode,Ht.value))return!0;break;case Z_:if((Wt.tag===5||Wt.tag===6)&&(Wt=Gn(Wt),Wt!==null&&0<=Wt.indexOf(Ht.value)))return!0;break;case Wu:if(Wt.tag===5&&(Wt=Wt.memoizedProps["data-testname"],typeof Wt=="string"&&Wt.toLowerCase()===Ht.value.toLowerCase()))return!0;break;default:throw Error(Ct(365))}return!1}function K_(Wt){switch(Wt.$$typeof){case Km:return"<"+(Cn(Wt.value)||"Unknown")+">";case Jm:return":has("+(K_(Wt)||"")+")";case _g:return'[role="'+Wt.value+'"]';case Z_:return'"'+Wt.value+'"';case Wu:return'[data-testname="'+Wt.value+'"]';default:throw Error(Ct(365))}}function fv(Wt,Ht){var mn=[];Wt=[Wt,0];for(var On=0;On<Wt.length;){var bn=Wt[On++],An=Wt[On++],Xn=Ht[An];if(bn.tag!==5||!rr(bn)){for(;Xn!=null&&q_(bn,Xn);)An++,Xn=Ht[An];if(An===Ht.length)mn.push(bn);else for(bn=bn.child;bn!==null;)Wt.push(bn,An),bn=bn.sibling}}return mn}function J_(Wt,Ht){if(!Mo)throw Error(Ct(363));Wt=e_(Wt),Wt=fv(Wt,Ht),Ht=[],Wt=Array.from(Wt);for(var mn=0;mn<Wt.length;){var On=Wt[mn++];if(On.tag===5)rr(On)||Ht.push(On.stateNode);else for(On=On.child;On!==null;)Wt.push(On),On=On.sibling}return Ht}var hS=Math.ceil,hm=At.ReactCurrentDispatcher,eO=At.ReactCurrentOwner,vs=At.ReactCurrentBatchConfig,Go=0,Ts=null,Cs=null,Vs=0,xl=0,Qu=us(0),Ms=0,Hu=null,dm=0,tO=0,nO=0,fm=null,Ol=null,rO=0,t_=1/0;function Pp(){t_=ks()+500}var iO=!1,Ty=null,op=null,pm=!1,Mu=null,mm=0,Lp=0,gm=null,n_=-1,oO=0;function Ws(){return Go&6?ks():n_!==-1?n_:n_=ks()}function sp(Wt){return Wt.mode&1?Go&2&&Vs!==0?Vs&-Vs:na.transition!==null?(oO===0&&(Wt=$_,$_<<=1,!($_&4194240)&&($_=64),oO=Wt),oO):(Wt=Wo,Wt!==0?Wt:zr()):1}function nu(Wt,Ht,mn){if(50<Lp)throw Lp=0,gm=null,Error(Ct(185));var On=sO(Wt,Ht);return On===null?null:(Sp(On,Ht,mn),(!(Go&2)||On!==Ts)&&(On===Ts&&(!(Go&2)&&(tO|=Ht),Ms===4&&zu(On,Vs)),Cl(On,mn),Ht===1&&Go===0&&!(Wt.mode&1)&&(Pp(),C_&&Eu())),On)}function sO(Wt,Ht){Wt.lanes|=Ht;var mn=Wt.alternate;for(mn!==null&&(mn.lanes|=Ht),mn=Wt,Wt=Wt.return;Wt!==null;)Wt.childLanes|=Ht,mn=Wt.alternate,mn!==null&&(mn.childLanes|=Ht),mn=Wt,Wt=Wt.return;return mn.tag===3?mn.stateNode:null}function Cl(Wt,Ht){var mn=Wt.callbackNode;NO(Wt,Ht);var On=Cm(Wt,Wt===Ts?Vs:0);if(On===0)mn!==null&&A0(mn),Wt.callbackNode=null,Wt.callbackPriority=0;else if(Ht=On&-On,Wt.callbackPriority!==Ht){if(mn!=null&&A0(mn),Ht===1)Wt.tag===0?Yl(wy.bind(null,Wt)):GO(wy.bind(null,Wt)),co?uo(function(){Go===0&&Eu()}):Zp(Pl,Eu),mn=null;else{switch(Am(On)){case 1:mn=Pl;break;case 4:mn=x_;break;case 16:mn=w_;break;case 536870912:mn=FO;break;default:mn=w_}mn=yv(mn,pv.bind(null,Wt))}Wt.callbackPriority=Ht,Wt.callbackNode=mn}}function pv(Wt,Ht){if(n_=-1,oO=0,Go&6)throw Error(Ct(327));var mn=Wt.callbackNode;if(cp()&&Wt.callbackNode!==mn)return null;var On=Cm(Wt,Wt===Ts?Vs:0);if(On===0)return null;if(On&30||On&Wt.expiredLanes||Ht)Ht=Dp(Wt,On);else{Ht=On;var bn=Go;Go|=2;var An=Ry();(Ts!==Wt||Vs!==Ht)&&(Pp(),ap(Wt,Ht));do try{dS();break}catch(lr){Ay(Wt,lr)}while(1);VO(),hm.current=An,Go=bn,Cs!==null?Ht=0:(Ts=null,Vs=0,Ht=Ms)}if(Ht!==0){if(Ht===2&&(bn=bp(Wt),bn!==0&&(On=bn,Ht=Ey(Wt,bn))),Ht===1)throw mn=Hu,ap(Wt,0),zu(Wt,On),Cl(Wt,ks()),mn;if(Ht===6)zu(Wt,On);else{if(bn=Wt.current.alternate,!(On&30)&&!mv(bn)&&(Ht=Dp(Wt,On),Ht===2&&(An=bp(Wt),An!==0&&(On=An,Ht=Ey(Wt,An))),Ht===1))throw mn=Hu,ap(Wt,0),zu(Wt,On),Cl(Wt,ks()),mn;switch(Wt.finishedWork=bn,Wt.finishedLanes=On,Ht){case 0:case 1:throw Error(Ct(345));case 2:lp(Wt,Ol);break;case 3:if(zu(Wt,On),(On&130023424)===On&&(Ht=rO+500-ks(),10<Ht)){if(Cm(Wt,0)!==0)break;if(bn=Wt.suspendedLanes,(bn&On)!==On){Ws(),Wt.pingedLanes|=Wt.suspendedLanes&bn;break}Wt.timeoutHandle=br(lp.bind(null,Wt,Ol),Ht);break}lp(Wt,Ol);break;case 4:if(zu(Wt,On),(On&4194240)===On)break;for(Ht=Wt.eventTimes,bn=-1;0<On;){var Xn=31-cu(On);An=1<<Xn,Xn=Ht[Xn],Xn>bn&&(bn=Xn),On&=~An}if(On=bn,On=ks()-On,On=(120>On?120:480>On?480:1080>On?1080:1920>On?1920:3e3>On?3e3:4320>On?4320:1960*hS(On/1960))-On,10<On){Wt.timeoutHandle=br(lp.bind(null,Wt,Ol),On);break}lp(Wt,Ol);break;case 5:lp(Wt,Ol);break;default:throw Error(Ct(329))}}}return Cl(Wt,ks()),Wt.callbackNode===mn?pv.bind(null,Wt):null}function Ey(Wt,Ht){var mn=fm;return Wt.current.memoizedState.isDehydrated&&(ap(Wt,Ht).flags|=256),Wt=Dp(Wt,Ht),Wt!==2&&(Ht=Ol,Ol=mn,Ht!==null&&xy(Ht)),Wt}function xy(Wt){Ol===null?Ol=Wt:Ol.push.apply(Ol,Wt)}function mv(Wt){for(var Ht=Wt;;){if(Ht.flags&16384){var mn=Ht.updateQueue;if(mn!==null&&(mn=mn.stores,mn!==null))for(var On=0;On<mn.length;On++){var bn=mn[On],An=bn.getSnapshot;bn=bn.value;try{if(!Ll(An(),bn))return!1}catch{return!1}}}if(mn=Ht.child,Ht.subtreeFlags&16384&&mn!==null)mn.return=Ht,Ht=mn;else{if(Ht===Wt)break;for(;Ht.sibling===null;){if(Ht.return===null||Ht.return===Wt)return!0;Ht=Ht.return}Ht.sibling.return=Ht.return,Ht=Ht.sibling}}return!0}function zu(Wt,Ht){for(Ht&=~nO,Ht&=~tO,Wt.suspendedLanes|=Ht,Wt.pingedLanes&=~Ht,Wt=Wt.expirationTimes;0<Ht;){var mn=31-cu(Ht),On=1<<mn;Wt[mn]=-1,Ht&=~On}}function wy(Wt){if(Go&6)throw Error(Ct(327));cp();var Ht=Cm(Wt,0);if(!(Ht&1))return Cl(Wt,ks()),null;var mn=Dp(Wt,Ht);if(Wt.tag!==0&&mn===2){var On=bp(Wt);On!==0&&(Ht=On,mn=Ey(Wt,On))}if(mn===1)throw mn=Hu,ap(Wt,0),zu(Wt,Ht),Cl(Wt,ks()),mn;if(mn===6)throw Error(Ct(345));return Wt.finishedWork=Wt.current.alternate,Wt.finishedLanes=Ht,lp(Wt,Ol),Cl(Wt,ks()),null}function Cy(Wt){Mu!==null&&Mu.tag===0&&!(Go&6)&&cp();var Ht=Go;Go|=1;var mn=vs.transition,On=Wo;try{if(vs.transition=null,Wo=1,Wt)return Wt()}finally{Wo=On,vs.transition=mn,Go=Ht,!(Go&6)&&Eu()}}function aO(){xl=Qu.current,Vr(Qu)}function ap(Wt,Ht){Wt.finishedWork=null,Wt.finishedLanes=0;var mn=Wt.timeoutHandle;if(mn!==Kr&&(Wt.timeoutHandle=Kr,Gr(mn)),Cs!==null)for(mn=Cs.return;mn!==null;){var On=mn;switch(ZO(On),On.tag){case 1:On=On.type.childContextTypes,On!=null&&xm();break;case 3:Rp(),Vr(zs),Vr(ws),Fm();break;case 5:JO(On);break;case 4:Rp();break;case 13:Vr(ms);break;case 19:Vr(ms);break;case 10:WO(On.type._context);break;case 22:case 23:aO()}mn=mn.return}if(Ts=Wt,Cs=Wt=up(Wt.current,null),Vs=xl=Ht,Ms=0,Hu=null,nO=tO=dm=0,Ol=fm=null,Kl!==null){for(Ht=0;Ht<Kl.length;Ht++)if(mn=Kl[Ht],On=mn.interleaved,On!==null){mn.interleaved=null;var bn=On.next,An=mn.pending;if(An!==null){var Xn=An.next;An.next=bn,On.next=Xn}mn.pending=On}Kl=null}return Wt}function Ay(Wt,Ht){do{var mn=Cs;try{if(VO(),L_.current=_i,Gm){for(var On=ys.memoizedState;On!==null;){var bn=On.queue;bn!==null&&(bn.pending=null),On=On.next}Gm=!1}if(ts=0,Ns=js=ys=null,Um=!1,Vm=0,eO.current=null,mn===null||mn.return===null){Ms=1,Hu=Ht,Cs=null;break}e:{var An=Wt,Xn=mn.return,lr=mn,Er=Ht;if(Ht=Vs,lr.flags|=32768,Er!==null&&typeof Er=="object"&&typeof Er.then=="function"){var Hr=Er,so=lr,Io=so.tag;if(!(so.mode&1)&&(Io===0||Io===11||Io===15)){var vo=so.alternate;vo?(so.updateQueue=vo.updateQueue,so.memoizedState=vo.memoizedState,so.lanes=vo.lanes):(so.updateQueue=null,so.memoizedState=null)}var rs=j0(Xn);if(rs!==null){rs.flags&=-257,X0(rs,Xn,lr,An,Ht),rs.mode&1&&z0(An,Hr,Ht),Ht=rs,Er=Hr;var Oo=Ht.updateQueue;if(Oo===null){var Bs=new Set;Bs.add(Er),Ht.updateQueue=Bs}else Oo.add(Er);break e}else{if(!(Ht&1)){z0(An,Hr,Ht),r_();break e}Er=Error(Ct(426))}}else if(hs&&lr.mode&1){var As=j0(Xn);if(As!==null){!(As.flags&65536)&&(As.flags|=256),X0(As,Xn,lr,An,Ht),Lm(Er);break e}}An=Er,Ms!==4&&(Ms=2),fm===null?fm=[An]:fm.push(An),Er=sy(Er,lr),lr=Xn;do{switch(lr.tag){case 3:lr.flags|=65536,Ht&=-Ht,lr.lanes|=Ht;var gr=Q0(lr,Er,Ht);HO(lr,gr);break e;case 1:An=Er;var cr=lr.type,yr=lr.stateNode;if(!(lr.flags&128)&&(typeof cr.getDerivedStateFromError=="function"||yr!==null&&typeof yr.componentDidCatch=="function"&&(op===null||!op.has(yr)))){lr.flags|=65536,Ht&=-Ht,lr.lanes|=Ht;var jr=H0(lr,An,Ht);HO(lr,jr);break e}}lr=lr.return}while(lr!==null)}ky(mn)}catch(fo){Ht=fo,Cs===mn&&mn!==null&&(Cs=mn=mn.return);continue}break}while(1)}function Ry(){var Wt=hm.current;return hm.current=_i,Wt===null?_i:Wt}function r_(){(Ms===0||Ms===3||Ms===2)&&(Ms=4),Ts===null||!(dm&268435455)&&!(tO&268435455)||zu(Ts,Vs)}function Dp(Wt,Ht){var mn=Go;Go|=2;var On=Ry();Ts===Wt&&Vs===Ht||ap(Wt,Ht);do try{gv();break}catch(bn){Ay(Wt,bn)}while(1);if(VO(),Go=mn,hm.current=On,Cs!==null)throw Error(Ct(261));return Ts=null,Vs=0,Ms}function gv(){for(;Cs!==null;)Iy(Cs)}function dS(){for(;Cs!==null&&!BO();)Iy(Cs)}function Iy(Wt){var Ht=Ov(Wt.alternate,Wt,xl);Wt.memoizedProps=Wt.pendingProps,Ht===null?ky(Wt):Cs=Ht,eO.current=null}function ky(Wt){var Ht=Wt;do{var mn=Ht.alternate;if(Wt=Ht.return,Ht.flags&32768){if(mn=iv(mn,Ht),mn!==null){mn.flags&=32767,Cs=mn;return}if(Wt!==null)Wt.flags|=32768,Wt.subtreeFlags=0,Wt.deletions=null;else{Ms=6,Cs=null;return}}else if(mn=cS(mn,Ht,xl),mn!==null){Cs=mn;return}if(Ht=Ht.sibling,Ht!==null){Cs=Ht;return}Cs=Ht=Wt}while(Ht!==null);Ms===0&&(Ms=5)}function lp(Wt,Ht){var mn=Wo,On=vs.transition;try{vs.transition=null,Wo=1,_v(Wt,Ht,mn)}finally{vs.transition=On,Wo=mn}return null}function _v(Wt,Ht,mn){do cp();while(Mu!==null);if(Go&6)throw Error(Ct(327));var On=Wt.finishedWork,bn=Wt.finishedLanes;if(On===null)return null;if(Wt.finishedWork=null,Wt.finishedLanes=0,On===Wt.current)throw Error(Ct(177));Wt.callbackNode=null,Wt.callbackPriority=0;var An=On.lanes|On.childLanes;if(rS(Wt,An),Wt===Ts&&(Cs=Ts=null,Vs=0),!(On.subtreeFlags&2064)&&!(On.flags&2064)||pm||(pm=!0,yv(w_,function(){return cp(),null})),An=(On.flags&15990)!==0,On.subtreeFlags&15990||An){An=vs.transition,vs.transition=null;var Xn=Wo;Wo=1;var lr=Go;Go|=4,eO.current=null,sv(Wt,On),yy(Wt,On),Vn(Wt.containerInfo),Wt.current=On,dv(On),uu(),Go=lr,Wo=Xn,vs.transition=An}else Wt.current=On;if(pm&&(pm=!1,Mu=Wt,mm=bn),An=Wt.pendingLanes,An===0&&(op=null),iS(On.stateNode),Cl(Wt,ks()),Ht!==null)for(mn=Wt.onRecoverableError,On=0;On<Ht.length;On++)mn(Ht[On]);if(iO)throw iO=!1,Wt=Ty,Ty=null,Wt;return mm&1&&Wt.tag!==0&&cp(),An=Wt.pendingLanes,An&1?Wt===gm?Lp++:(Lp=0,gm=Wt):Lp=0,Eu(),null}function cp(){if(Mu!==null){var Wt=Am(mm),Ht=vs.transition,mn=Wo;try{if(vs.transition=null,Wo=16>Wt?16:Wt,Mu===null)var On=!1;else{if(Wt=Mu,Mu=null,mm=0,Go&6)throw Error(Ct(331));var bn=Go;for(Go|=4,eo=Wt.current;eo!==null;){var An=eo,Xn=An.child;if(eo.flags&16){var lr=An.deletions;if(lr!==null){for(var Er=0;Er<lr.length;Er++){var Hr=lr[Er];for(eo=Hr;eo!==null;){var so=eo;switch(so.tag){case 0:case 11:case 15:rp(8,so,An)}var Io=so.child;if(Io!==null)Io.return=so,eo=Io;else for(;eo!==null;){so=eo;var vo=so.sibling,rs=so.return;if(cv(so),so===Hr){eo=null;break}if(vo!==null){vo.return=rs,eo=vo;break}eo=rs}}}var Oo=An.alternate;if(Oo!==null){var Bs=Oo.child;if(Bs!==null){Oo.child=null;do{var As=Bs.sibling;Bs.sibling=null,Bs=As}while(Bs!==null)}}eo=An}}if(An.subtreeFlags&2064&&Xn!==null)Xn.return=An,eo=Xn;else e:for(;eo!==null;){if(An=eo,An.flags&2048)switch(An.tag){case 0:case 11:case 15:rp(9,An,An.return)}var gr=An.sibling;if(gr!==null){gr.return=An.return,eo=gr;break e}eo=An.return}}var cr=Wt.current;for(eo=cr;eo!==null;){Xn=eo;var yr=Xn.child;if(Xn.subtreeFlags&2064&&yr!==null)yr.return=Xn,eo=yr;else e:for(Xn=cr;eo!==null;){if(lr=eo,lr.flags&2048)try{switch(lr.tag){case 0:case 11:case 15:ip(9,lr)}}catch(fo){yl(lr,lr.return,fo)}if(lr===Xn){eo=null;break e}var jr=lr.sibling;if(jr!==null){jr.return=lr.return,eo=jr;break e}eo=lr.return}}if(Go=bn,Eu(),hu&&typeof hu.onPostCommitFiberRoot=="function")try{hu.onPostCommitFiberRoot(qp,Wt)}catch{}On=!0}return On}finally{Wo=mn,vs.transition=Ht}}return!1}function My(Wt,Ht,mn){Ht=sy(mn,Ht),Ht=Q0(Wt,Ht,1),Gu(Wt,Ht),Ht=Ws(),Wt=sO(Wt,1),Wt!==null&&(Sp(Wt,1,Ht),Cl(Wt,Ht))}function yl(Wt,Ht,mn){if(Wt.tag===3)My(Wt,Wt,mn);else for(;Ht!==null;){if(Ht.tag===3){My(Ht,Wt,mn);break}else if(Ht.tag===1){var On=Ht.stateNode;if(typeof Ht.type.getDerivedStateFromError=="function"||typeof On.componentDidCatch=="function"&&(op===null||!op.has(On))){Wt=sy(mn,Wt),Wt=H0(Ht,Wt,1),Gu(Ht,Wt),Wt=Ws(),Ht=sO(Ht,1),Ht!==null&&(Sp(Ht,1,Wt),Cl(Ht,Wt));break}}Ht=Ht.return}}function fS(Wt,Ht,mn){var On=Wt.pingCache;On!==null&&On.delete(Ht),Ht=Ws(),Wt.pingedLanes|=Wt.suspendedLanes&mn,Ts===Wt&&(Vs&mn)===mn&&(Ms===4||Ms===3&&(Vs&130023424)===Vs&&500>ks()-rO?ap(Wt,0):nO|=mn),Cl(Wt,Ht)}function Py(Wt,Ht){Ht===0&&(Wt.mode&1?(Ht=Xp,Xp<<=1,!(Xp&130023424)&&(Xp=4194304)):Ht=1);var mn=Ws();Wt=sO(Wt,Ht),Wt!==null&&(Sp(Wt,Ht,mn),Cl(Wt,mn))}function pS(Wt){var Ht=Wt.memoizedState,mn=0;Ht!==null&&(mn=Ht.retryLane),Py(Wt,mn)}function mS(Wt,Ht){var mn=0;switch(Wt.tag){case 13:var On=Wt.stateNode,bn=Wt.memoizedState;bn!==null&&(mn=bn.retryLane);break;case 19:On=Wt.stateNode;break;default:throw Error(Ct(314))}On!==null&&On.delete(Ht),Py(Wt,mn)}var Ov;Ov=function(Wt,Ht,mn){if(Wt!==null)if(Wt.memoizedProps!==Ht.pendingProps||zs.current)Ul=!0;else{if(!(Wt.lanes&mn)&&!(Ht.flags&128))return Ul=!1,rv(Wt,Ht,mn);Ul=!!(Wt.flags&131072)}else Ul=!1,hs&&Ht.flags&1048576&&YO(Ht,Tp,Ht.index);switch(Ht.lanes=0,Ht.tag){case 2:var On=Ht.type;Wt!==null&&(Wt.alternate=null,Ht.alternate=null,Ht.flags|=2),Wt=Ht.pendingProps;var bn=Ml(Ht,ws.current);Jp(Ht,mn),bn=ty(null,Ht,On,Wt,bn,mn);var An=om();return Ht.flags|=1,typeof bn=="object"&&bn!==null&&typeof bn.render=="function"&&bn.$$typeof===void 0?(Ht.tag=1,Ht.memoizedState=null,Ht.updateQueue=null,Js(On)?(An=!0,jp(Ht)):An=!1,Ht.memoizedState=bn.state!==null&&bn.state!==void 0?bn.state:null,QO(Ht),bn.updater=Mm,Ht.stateNode=bn,bn._reactInternals=Ht,XO(Ht,On,Wt,mn),Ht=hy(null,Ht,On,!0,An,mn)):(Ht.tag=0,hs&&An&&M_(Ht),_l(null,Ht,bn,mn),Ht=Ht.child),Ht;case 16:On=Ht.elementType;e:{switch(Wt!==null&&(Wt.alternate=null,Ht.alternate=null,Ht.flags|=2),Wt=Ht.pendingProps,bn=On._init,On=bn(On._payload),Ht.type=On,bn=Ht.tag=_S(On),Wt=du(On,Wt),bn){case 0:Ht=uy(null,Ht,On,Wt,mn);break e;case 1:Ht=K0(null,Ht,On,Wt,mn);break e;case 11:Ht=ly(null,Ht,On,Wt,mn);break e;case 14:Ht=np(null,Ht,On,du(On.type,Wt),mn);break e}throw Error(Ct(306,On,""))}return Ht;case 0:return On=Ht.type,bn=Ht.pendingProps,bn=Ht.elementType===On?bn:du(On,bn),uy(Wt,Ht,On,bn,mn);case 1:return On=Ht.type,bn=Ht.pendingProps,bn=Ht.elementType===On?bn:du(On,bn),K0(Wt,Ht,On,bn,mn);case 3:e:{if(J0(Ht),Wt===null)throw Error(Ct(387));On=Ht.pendingProps,An=Ht.memoizedState,bn=An.element,k0(Wt,Ht),I_(Ht,On,null,mn);var Xn=Ht.memoizedState;if(On=Xn.element,Ir&&An.isDehydrated)if(An={element:On,isDehydrated:!1,cache:Xn.cache,transitions:Xn.transitions},Ht.updateQueue.baseState=An,Ht.memoizedState=An,Ht.flags&256){bn=Error(Ct(423)),Ht=ev(Wt,Ht,On,mn,bn);break e}else if(On!==bn){bn=Error(Ct(424)),Ht=ev(Wt,Ht,On,mn,bn);break e}else for(Ir&&(Bl=Rr(Ht.stateNode.containerInfo),Nl=Ht,hs=!0,fu=null,em=!1),mn=Cp(Ht,null,On,mn),Ht.child=mn;mn;)mn.flags=mn.flags&-3|4096,mn=mn.sibling;else{if(pu(),On===bn){Ht=ku(Wt,Ht,mn);break e}_l(Wt,Ht,On,mn)}Ht=Ht.child}return Ht;case 5:return KO(Ht),Wt===null&&tm(Ht),On=Ht.type,bn=Ht.pendingProps,An=Wt!==null?Wt.memoizedProps:null,Xn=bn.children,Jn(On,bn)?Xn=null:An!==null&&Jn(On,An)&&(Ht.flags|=32),q0(Wt,Ht),_l(Wt,Ht,Xn,mn),Ht.child;case 6:return Wt===null&&tm(Ht),null;case 13:return dy(Wt,Ht,mn);case 4:return Bm(Ht,Ht.stateNode.containerInfo),On=Ht.pendingProps,Wt===null?Ht.child=mu(Ht,null,On,mn):_l(Wt,Ht,On,mn),Ht.child;case 11:return On=Ht.type,bn=Ht.pendingProps,bn=Ht.elementType===On?bn:du(On,bn),ly(Wt,Ht,On,bn,mn);case 7:return _l(Wt,Ht,Ht.pendingProps,mn),Ht.child;case 8:return _l(Wt,Ht,Ht.pendingProps.children,mn),Ht.child;case 12:return _l(Wt,Ht,Ht.pendingProps.children,mn),Ht.child;case 10:e:{if(On=Ht.type._context,bn=Ht.pendingProps,An=Ht.memoizedProps,Xn=bn.value,I0(Ht,On,Xn),An!==null)if(Ll(An.value,Xn)){if(An.children===bn.children&&!zs.current){Ht=ku(Wt,Ht,mn);break e}}else for(An=Ht.child,An!==null&&(An.return=Ht);An!==null;){var lr=An.dependencies;if(lr!==null){Xn=An.child;for(var Er=lr.firstContext;Er!==null;){if(Er.context===On){if(An.tag===1){Er=Jl(-1,mn&-mn),Er.tag=2;var Hr=An.updateQueue;if(Hr!==null){Hr=Hr.shared;var so=Hr.pending;so===null?Er.next=Er:(Er.next=so.next,so.next=Er),Hr.pending=Er}}An.lanes|=mn,Er=An.alternate,Er!==null&&(Er.lanes|=mn),R_(An.return,mn,Ht),lr.lanes|=mn;break}Er=Er.next}}else if(An.tag===10)Xn=An.type===Ht.type?null:An.child;else if(An.tag===18){if(Xn=An.return,Xn===null)throw Error(Ct(341));Xn.lanes|=mn,lr=Xn.alternate,lr!==null&&(lr.lanes|=mn),R_(Xn,mn,Ht),Xn=An.sibling}else Xn=An.child;if(Xn!==null)Xn.return=An;else for(Xn=An;Xn!==null;){if(Xn===Ht){Xn=null;break}if(An=Xn.sibling,An!==null){An.return=Xn.return,Xn=An;break}Xn=Xn.return}An=Xn}_l(Wt,Ht,bn.children,mn),Ht=Ht.child}return Ht;case 9:return bn=Ht.type,On=Ht.pendingProps.children,Jp(Ht,mn),bn=Zl(bn),On=On(bn),Ht.flags|=1,_l(Wt,Ht,On,mn),Ht.child;case 14:return On=Ht.type,bn=du(On,Ht.pendingProps),bn=du(On.type,bn),np(Wt,Ht,On,bn,mn);case 15:return W_(Wt,Ht,Ht.type,Ht.pendingProps,mn);case 17:return On=Ht.type,bn=Ht.pendingProps,bn=Ht.elementType===On?bn:du(On,bn),Wt!==null&&(Wt.alternate=null,Ht.alternate=null,Ht.flags|=2),Ht.tag=1,Js(On)?(Wt=!0,jp(Ht)):Wt=!1,Jp(Ht,mn),P0(Ht,On,bn),XO(Ht,On,bn,mn),hy(null,Ht,On,!0,Wt,mn);case 19:return my(Wt,Ht,mn);case 22:return cy(Wt,Ht,mn)}throw Error(Ct(156,Ht.tag))};function yv(Wt,Ht){return Zp(Wt,Ht)}function gS(Wt,Ht,mn,On){this.tag=Wt,this.key=mn,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=Ht,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=On,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ru(Wt,Ht,mn,On){return new gS(Wt,Ht,mn,On)}function Ly(Wt){return Wt=Wt.prototype,!(!Wt||!Wt.isReactComponent)}function _S(Wt){if(typeof Wt=="function")return Ly(Wt)?1:0;if(Wt!=null){if(Wt=Wt.$$typeof,Wt===ln)return 11;if(Wt===pn)return 14}return 2}function up(Wt,Ht){var mn=Wt.alternate;return mn===null?(mn=ru(Wt.tag,Ht,Wt.key,Wt.mode),mn.elementType=Wt.elementType,mn.type=Wt.type,mn.stateNode=Wt.stateNode,mn.alternate=Wt,Wt.alternate=mn):(mn.pendingProps=Ht,mn.type=Wt.type,mn.flags=0,mn.subtreeFlags=0,mn.deletions=null),mn.flags=Wt.flags&14680064,mn.childLanes=Wt.childLanes,mn.lanes=Wt.lanes,mn.child=Wt.child,mn.memoizedProps=Wt.memoizedProps,mn.memoizedState=Wt.memoizedState,mn.updateQueue=Wt.updateQueue,Ht=Wt.dependencies,mn.dependencies=Ht===null?null:{lanes:Ht.lanes,firstContext:Ht.firstContext},mn.sibling=Wt.sibling,mn.index=Wt.index,mn.ref=Wt.ref,mn}function lO(Wt,Ht,mn,On,bn,An){var Xn=2;if(On=Wt,typeof Wt=="function")Ly(Wt)&&(Xn=1);else if(typeof Wt=="string")Xn=5;else e:switch(Wt){case Nt:return Np(mn.children,bn,An,Ht);case Bt:Xn=8,bn|=8;break;case Ut:return Wt=ru(12,mn,Ht,bn|2),Wt.elementType=Ut,Wt.lanes=An,Wt;case cn:return Wt=ru(13,mn,Ht,bn),Wt.elementType=cn,Wt.lanes=An,Wt;case hn:return Wt=ru(19,mn,Ht,bn),Wt.elementType=hn,Wt.lanes=An,Wt;case gn:return _o(mn,bn,An,Ht);default:if(typeof Wt=="object"&&Wt!==null)switch(Wt.$$typeof){case zt:Xn=10;break e;case Zt:Xn=9;break e;case ln:Xn=11;break e;case pn:Xn=14;break e;case dn:Xn=16,On=null;break e}throw Error(Ct(130,Wt==null?Wt:typeof Wt,""))}return Ht=ru(Xn,mn,Ht,bn),Ht.elementType=Wt,Ht.type=On,Ht.lanes=An,Ht}function Np(Wt,Ht,mn,On){return Wt=ru(7,Wt,On,Ht),Wt.lanes=mn,Wt}function _o(Wt,Ht,mn,On){return Wt=ru(22,Wt,On,Ht),Wt.elementType=gn,Wt.lanes=mn,Wt.stateNode={},Wt}function Zs(Wt,Ht,mn){return Wt=ru(6,Wt,null,Ht),Wt.lanes=mn,Wt}function Es(Wt,Ht,mn){return Ht=ru(4,Wt.children!==null?Wt.children:[],Wt.key,Ht),Ht.lanes=mn,Ht.stateNode={containerInfo:Wt.containerInfo,pendingChildren:null,implementation:Wt.implementation},Ht}function OS(Wt,Ht,mn,On,bn){this.tag=Ht,this.containerInfo=Wt,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Kr,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=T_(0),this.expirationTimes=T_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=T_(0),this.identifierPrefix=On,this.onRecoverableError=bn,Ir&&(this.mutableSourceEagerHydrationData=null)}function Dy(Wt,Ht,mn,On,bn,An,Xn,lr,Er){return Wt=new OS(Wt,Ht,mn,lr,Er),Ht===1?(Ht=1,An===!0&&(Ht|=8)):Ht=0,An=ru(3,null,null,Ht),Wt.current=An,An.stateNode=Wt,An.memoizedState={element:On,isDehydrated:mn,cache:null,transitions:null},QO(An),Wt}function i_(Wt){if(!Wt)return Os;Wt=Wt._reactInternals;e:{if(xn(Wt)!==Wt||Wt.tag!==1)throw Error(Ct(170));var Ht=Wt;do{switch(Ht.tag){case 3:Ht=Ht.stateNode.context;break e;case 1:if(Js(Ht.type)){Ht=Ht.stateNode.__reactInternalMemoizedMergedChildContext;break e}}Ht=Ht.return}while(Ht!==null);throw Error(Ct(171))}if(Wt.tag===1){var mn=Wt.type;if(Js(mn))return w0(Wt,mn,Ht)}return Ht}function hp(Wt){var Ht=Wt._reactInternals;if(Ht===void 0)throw typeof Wt.render=="function"?Error(Ct(188)):(Wt=Object.keys(Wt).join(","),Error(Ct(268,Wt)));return Wt=Nn(Ht),Wt===null?null:Wt.stateNode}function o_(Wt,Ht){if(Wt=Wt.memoizedState,Wt!==null&&Wt.dehydrated!==null){var mn=Wt.retryLane;Wt.retryLane=mn!==0&&mn<Ht?mn:Ht}}function Sl(Wt,Ht){o_(Wt,Ht),(Wt=Wt.alternate)&&o_(Wt,Ht)}function Ny(Wt){return Wt=Nn(Wt),Wt===null?null:Wt.stateNode}function vv(){return null}return lt.attemptContinuousHydration=function(Wt){if(Wt.tag===13){var Ht=Ws();nu(Wt,134217728,Ht),Sl(Wt,134217728)}},lt.attemptHydrationAtCurrentPriority=function(Wt){if(Wt.tag===13){var Ht=Ws(),mn=sp(Wt);nu(Wt,mn,Ht),Sl(Wt,mn)}},lt.attemptSynchronousHydration=function(Wt){switch(Wt.tag){case 3:var Ht=Wt.stateNode;if(Ht.current.memoizedState.isDehydrated){var mn=Yp(Ht.pendingLanes);mn!==0&&(E_(Ht,mn|1),Cl(Ht,ks()),!(Go&6)&&(Pp(),Eu()))}break;case 13:var On=Ws();Cy(function(){return nu(Wt,1,On)}),Sl(Wt,1)}},lt.batchedUpdates=function(Wt,Ht){var mn=Go;Go|=1;try{return Wt(Ht)}finally{Go=mn,Go===0&&(Pp(),C_&&Eu())}},lt.createComponentSelector=function(Wt){return{$$typeof:Km,value:Wt}},lt.createContainer=function(Wt,Ht,mn,On,bn,An,Xn){return Dy(Wt,Ht,!1,null,mn,On,bn,An,Xn)},lt.createHasPseudoClassSelector=function(Wt){return{$$typeof:Jm,value:Wt}},lt.createHydrationContainer=function(Wt,Ht,mn,On,bn,An,Xn,lr,Er){return Wt=Dy(mn,On,!0,Wt,bn,An,Xn,lr,Er),Wt.context=i_(null),mn=Wt.current,On=Ws(),bn=sp(mn),An=Jl(On,bn),An.callback=Ht??null,Gu(mn,An),Wt.current.lanes=bn,Sp(Wt,bn,On),Cl(Wt,On),Wt},lt.createPortal=function(Wt,Ht,mn){var On=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:kt,key:On==null?null:""+On,children:Wt,containerInfo:Ht,implementation:mn}},lt.createRoleSelector=function(Wt){return{$$typeof:_g,value:Wt}},lt.createTestNameSelector=function(Wt){return{$$typeof:Wu,value:Wt}},lt.createTextSelector=function(Wt){return{$$typeof:Z_,value:Wt}},lt.deferredUpdates=function(Wt){var Ht=Wo,mn=vs.transition;try{return vs.transition=null,Wo=16,Wt()}finally{Wo=Ht,vs.transition=mn}},lt.discreteUpdates=function(Wt,Ht,mn,On,bn){var An=Wo,Xn=vs.transition;try{return vs.transition=null,Wo=1,Wt(Ht,mn,On,bn)}finally{Wo=An,vs.transition=Xn,Go===0&&Pp()}},lt.findAllNodes=J_,lt.findBoundingRects=function(Wt,Ht){if(!Mo)throw Error(Ct(363));Ht=J_(Wt,Ht),Wt=[];for(var mn=0;mn<Ht.length;mn++)Wt.push(jn(Ht[mn]));for(Ht=Wt.length-1;0<Ht;Ht--){mn=Wt[Ht];for(var On=mn.x,bn=On+mn.width,An=mn.y,Xn=An+mn.height,lr=Ht-1;0<=lr;lr--)if(Ht!==lr){var Er=Wt[lr],Hr=Er.x,so=Hr+Er.width,Io=Er.y,vo=Io+Er.height;if(On>=Hr&&An>=Io&&bn<=so&&Xn<=vo){Wt.splice(Ht,1);break}else if(On!==Hr||mn.width!==Er.width||vo<An||Io>Xn){if(!(An!==Io||mn.height!==Er.height||so<On||Hr>bn)){Hr>On&&(Er.width+=Hr-On,Er.x=On),so<bn&&(Er.width=bn-Hr),Wt.splice(Ht,1);break}}else{Io>An&&(Er.height+=Io-An,Er.y=An),vo<Xn&&(Er.height=Xn-Io),Wt.splice(Ht,1);break}}}return Wt},lt.findHostInstance=hp,lt.findHostInstanceWithNoPortals=function(Wt){return Wt=Pn(Wt),Wt=Wt!==null?zn(Wt):null,Wt===null?null:Wt.stateNode},lt.findHostInstanceWithWarning=function(Wt){return hp(Wt)},lt.flushControlled=function(Wt){var Ht=Go;Go|=1;var mn=vs.transition,On=Wo;try{vs.transition=null,Wo=1,Wt()}finally{Wo=On,vs.transition=mn,Go=Ht,Go===0&&(Pp(),Eu())}},lt.flushPassiveEffects=cp,lt.flushSync=Cy,lt.focusWithin=function(Wt,Ht){if(!Mo)throw Error(Ct(363));for(Wt=e_(Wt),Ht=fv(Wt,Ht),Ht=Array.from(Ht),Wt=0;Wt<Ht.length;){var mn=Ht[Wt++];if(!rr(mn)){if(mn.tag===5&&Ar(mn.stateNode))return!0;for(mn=mn.child;mn!==null;)Ht.push(mn),mn=mn.sibling}}return!1},lt.getCurrentUpdatePriority=function(){return Wo},lt.getFindAllNodesFailureDescription=function(Wt,Ht){if(!Mo)throw Error(Ct(363));var mn=0,On=[];Wt=[e_(Wt),0];for(var bn=0;bn<Wt.length;){var An=Wt[bn++],Xn=Wt[bn++],lr=Ht[Xn];if((An.tag!==5||!rr(An))&&(q_(An,lr)&&(On.push(K_(lr)),Xn++,Xn>mn&&(mn=Xn)),Xn<Ht.length))for(An=An.child;An!==null;)Wt.push(An,Xn),An=An.sibling}if(mn<Ht.length){for(Wt=[];mn<Ht.length;mn++)Wt.push(K_(Ht[mn]));return`findAllNodes was able to match part of the selector:
  `+(On.join(" > ")+`

No matching component was found for:
  `)+Wt.join(" > ")}return null},lt.getPublicRootInstance=function(Wt){if(Wt=Wt.current,!Wt.child)return null;switch(Wt.child.tag){case 5:return Qn(Wt.child.stateNode);default:return Wt.child.stateNode}},lt.injectIntoDevTools=function(Wt){if(Wt={bundleType:Wt.bundleType,version:Wt.version,rendererPackageName:Wt.rendererPackageName,rendererConfig:Wt.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:At.ReactCurrentDispatcher,findHostInstanceByFiber:Ny,findFiberByHostInstance:Wt.findFiberByHostInstance||vv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")Wt=!1;else{var Ht=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(Ht.isDisabled||!Ht.supportsFiber)Wt=!0;else{try{qp=Ht.inject(Wt),hu=Ht}catch{}Wt=!!Ht.checkDCE}}return Wt},lt.isAlreadyRendering=function(){return!1},lt.observeVisibleRects=function(Wt,Ht,mn,On){if(!Mo)throw Error(Ct(363));Wt=J_(Wt,Ht);var bn=Br(Wt,mn,On).disconnect;return{disconnect:function(){bn()}}},lt.registerMutableSourceForHydration=function(Wt,Ht){var mn=Ht._getVersion;mn=mn(Ht._source),Wt.mutableSourceEagerHydrationData==null?Wt.mutableSourceEagerHydrationData=[Ht,mn]:Wt.mutableSourceEagerHydrationData.push(Ht,mn)},lt.runWithPriority=function(Wt,Ht){var mn=Wo;try{return Wo=Wt,Ht()}finally{Wo=mn}},lt.shouldError=function(){return null},lt.shouldSuspend=function(){return!1},lt.updateContainer=function(Wt,Ht,mn,On){var bn=Ht.current,An=Ws(),Xn=sp(bn);return mn=i_(mn),Ht.context===null?Ht.context=mn:Ht.pendingContext=mn,Ht=Jl(An,Xn),Ht.payload={element:Wt},On=On===void 0?null:On,On!==null&&(Ht.callback=On),Gu(bn,Ht),Wt=nu(bn,Xn,An),Wt!==null&&km(Wt,bn,Xn),Xn},lt};reactReconciler.exports=reactReconciler_production_min;var reactReconcilerExports=reactReconciler.exports;const Reconciler=getDefaultExportFromCjs(reactReconcilerExports);var scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(dt){function $(Ln,Un){var Vn=Ln.length;Ln.push(Un);e:for(;0<Vn;){var sr=Vn-1>>>1,In=Ln[sr];if(0<St(In,Un))Ln[sr]=Un,Ln[Vn]=In,Vn=sr;else break e}}function lt(Ln){return Ln.length===0?null:Ln[0]}function ft(Ln){if(Ln.length===0)return null;var Un=Ln[0],Vn=Ln.pop();if(Vn!==Un){Ln[0]=Vn;e:for(var sr=0,In=Ln.length,ir=In>>>1;sr<ir;){var pr=2*(sr+1)-1,Jn=Ln[pr],Pr=pr+1,br=Ln[Pr];if(0>St(Jn,Vn))Pr<In&&0>St(br,Jn)?(Ln[sr]=br,Ln[Pr]=Vn,sr=Pr):(Ln[sr]=Jn,Ln[pr]=Vn,sr=pr);else if(Pr<In&&0>St(br,Vn))Ln[sr]=br,Ln[Pr]=Vn,sr=Pr;else break e}}return Un}function St(Ln,Un){var Vn=Ln.sortIndex-Un.sortIndex;return Vn!==0?Vn:Ln.id-Un.id}if(typeof performance=="object"&&typeof performance.now=="function"){var Tt=performance;dt.unstable_now=function(){return Tt.now()}}else{var Ct=Date,At=Ct.now();dt.unstable_now=function(){return Ct.now()-At}}var Rt=[],kt=[],Nt=1,Bt=null,Ut=3,zt=!1,Zt=!1,ln=!1,cn=typeof setTimeout=="function"?setTimeout:null,hn=typeof clearTimeout=="function"?clearTimeout:null,pn=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function dn(Ln){for(var Un=lt(kt);Un!==null;){if(Un.callback===null)ft(kt);else if(Un.startTime<=Ln)ft(kt),Un.sortIndex=Un.expirationTime,$(Rt,Un);else break;Un=lt(kt)}}function gn(Ln){if(ln=!1,dn(Ln),!Zt)if(lt(Rt)!==null)Zt=!0,Qn(vn);else{var Un=lt(kt);Un!==null&&nr(gn,Un.startTime-Ln)}}function vn(Ln,Un){Zt=!1,ln&&(ln=!1,hn($n),$n=-1),zt=!0;var Vn=Ut;try{for(dn(Un),Bt=lt(Rt);Bt!==null&&(!(Bt.expirationTime>Un)||Ln&&!Pn());){var sr=Bt.callback;if(typeof sr=="function"){Bt.callback=null,Ut=Bt.priorityLevel;var In=sr(Bt.expirationTime<=Un);Un=dt.unstable_now(),typeof In=="function"?Bt.callback=In:Bt===lt(Rt)&&ft(Rt),dn(Un)}else ft(Rt);Bt=lt(Rt)}if(Bt!==null)var ir=!0;else{var pr=lt(kt);pr!==null&&nr(gn,pr.startTime-Un),ir=!1}return ir}finally{Bt=null,Ut=Vn,zt=!1}}var Tn=!1,Cn=null,$n=-1,xn=5,Rn=-1;function Pn(){return!(dt.unstable_now()-Rn<xn)}function Nn(){if(Cn!==null){var Ln=dt.unstable_now();Rn=Ln;var Un=!0;try{Un=Cn(!0,Ln)}finally{Un?Wn():(Tn=!1,Cn=null)}}else Tn=!1}var Wn;if(typeof pn=="function")Wn=function(){pn(Nn)};else if(typeof MessageChannel<"u"){var zn=new MessageChannel,Yn=zn.port2;zn.port1.onmessage=Nn,Wn=function(){Yn.postMessage(null)}}else Wn=function(){cn(Nn,0)};function Qn(Ln){Cn=Ln,Tn||(Tn=!0,Wn())}function nr(Ln,Un){$n=cn(function(){Ln(dt.unstable_now())},Un)}dt.unstable_IdlePriority=5,dt.unstable_ImmediatePriority=1,dt.unstable_LowPriority=4,dt.unstable_NormalPriority=3,dt.unstable_Profiling=null,dt.unstable_UserBlockingPriority=2,dt.unstable_cancelCallback=function(Ln){Ln.callback=null},dt.unstable_continueExecution=function(){Zt||zt||(Zt=!0,Qn(vn))},dt.unstable_forceFrameRate=function(Ln){0>Ln||125<Ln?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):xn=0<Ln?Math.floor(1e3/Ln):5},dt.unstable_getCurrentPriorityLevel=function(){return Ut},dt.unstable_getFirstCallbackNode=function(){return lt(Rt)},dt.unstable_next=function(Ln){switch(Ut){case 1:case 2:case 3:var Un=3;break;default:Un=Ut}var Vn=Ut;Ut=Un;try{return Ln()}finally{Ut=Vn}},dt.unstable_pauseExecution=function(){},dt.unstable_requestPaint=function(){},dt.unstable_runWithPriority=function(Ln,Un){switch(Ln){case 1:case 2:case 3:case 4:case 5:break;default:Ln=3}var Vn=Ut;Ut=Ln;try{return Un()}finally{Ut=Vn}},dt.unstable_scheduleCallback=function(Ln,Un,Vn){var sr=dt.unstable_now();switch(typeof Vn=="object"&&Vn!==null?(Vn=Vn.delay,Vn=typeof Vn=="number"&&0<Vn?sr+Vn:sr):Vn=sr,Ln){case 1:var In=-1;break;case 2:In=250;break;case 5:In=1073741823;break;case 4:In=1e4;break;default:In=5e3}return In=Vn+In,Ln={id:Nt++,callback:Un,priorityLevel:Ln,startTime:Vn,expirationTime:In,sortIndex:-1},Vn>sr?(Ln.sortIndex=Vn,$(kt,Ln),lt(Rt)===null&&Ln===lt(kt)&&(ln?(hn($n),$n=-1):ln=!0,nr(gn,Vn-sr))):(Ln.sortIndex=In,$(Rt,Ln),Zt||zt||(Zt=!0,Qn(vn))),Ln},dt.unstable_shouldYield=Pn,dt.unstable_wrapCallback=function(Ln){var Un=Ut;return function(){var Vn=Ut;Ut=Un;try{return Ln.apply(this,arguments)}finally{Ut=Vn}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;function shallowEqualArrays(dt,$,lt=(ft,St)=>ft===St){if(dt===$)return!0;if(!dt||!$)return!1;const ft=dt.length;if($.length!==ft)return!1;for(let St=0;St<ft;St++)if(!lt(dt[St],$[St]))return!1;return!0}const globalCache=[];function query(dt,$,lt=!1,ft={}){for(const Tt of globalCache)if(shallowEqualArrays($,Tt.keys,Tt.equal)){if(lt)return;if(Object.prototype.hasOwnProperty.call(Tt,"error"))throw Tt.error;if(Object.prototype.hasOwnProperty.call(Tt,"response"))return Tt.response;if(!lt)throw Tt.promise}const St={keys:$,equal:ft.equal,promise:dt(...$).then(Tt=>St.response=Tt).then(()=>{ft.lifespan&&ft.lifespan>0&&setTimeout(()=>{const Tt=globalCache.indexOf(St);Tt!==-1&&globalCache.splice(Tt,1)},ft.lifespan)}).catch(Tt=>St.error=Tt)};if(globalCache.push(St),!lt)throw St.promise}const suspend=(dt,$,lt)=>query(dt,$,!1,lt),preload=(dt,$,lt)=>void query(dt,$,!0,lt),clear=dt=>{if(dt===void 0||dt.length===0)globalCache.splice(0,globalCache.length);else{const $=globalCache.find(lt=>shallowEqualArrays(dt,lt.keys,lt.equal));if($){const lt=globalCache.indexOf($);lt!==-1&&globalCache.splice(lt,1)}}},catalogue={},extend$1=dt=>void Object.assign(catalogue,dt);function createRenderer(dt,$){function lt(Nt,{args:Bt=[],attach:Ut,...zt},Zt){let ln=`${Nt[0].toUpperCase()}${Nt.slice(1)}`,cn;if(Nt==="primitive"){if(zt.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const hn=zt.object;cn=prepare(hn,{type:Nt,root:Zt,attach:Ut,primitive:!0})}else{const hn=catalogue[ln];if(!hn)throw new Error(`R3F: ${ln} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(Bt))throw new Error("R3F: The args prop must be an array!");cn=prepare(new hn(...Bt),{type:Nt,root:Zt,attach:Ut,memoizedProps:{args:Bt}})}return cn.__r3f.attach===void 0&&(cn instanceof BufferGeometry?cn.__r3f.attach="geometry":cn instanceof Material&&(cn.__r3f.attach="material")),ln!=="inject"&&applyProps$1(cn,zt),cn}function ft(Nt,Bt){let Ut=!1;if(Bt){var zt,Zt;(zt=Bt.__r3f)!=null&&zt.attach?attach(Nt,Bt,Bt.__r3f.attach):Bt.isObject3D&&Nt.isObject3D&&(Nt.add(Bt),Ut=!0),Ut||(Zt=Nt.__r3f)==null||Zt.objects.push(Bt),Bt.__r3f||prepare(Bt,{}),Bt.__r3f.parent=Nt,updateInstance(Bt),invalidateInstance(Bt)}}function St(Nt,Bt,Ut){let zt=!1;if(Bt){var Zt,ln;if((Zt=Bt.__r3f)!=null&&Zt.attach)attach(Nt,Bt,Bt.__r3f.attach);else if(Bt.isObject3D&&Nt.isObject3D){Bt.parent=Nt,Bt.dispatchEvent({type:"added"});const cn=Nt.children.filter(pn=>pn!==Bt),hn=cn.indexOf(Ut);Nt.children=[...cn.slice(0,hn),Bt,...cn.slice(hn)],zt=!0}zt||(ln=Nt.__r3f)==null||ln.objects.push(Bt),Bt.__r3f||prepare(Bt,{}),Bt.__r3f.parent=Nt,updateInstance(Bt),invalidateInstance(Bt)}}function Tt(Nt,Bt,Ut=!1){Nt&&[...Nt].forEach(zt=>Ct(Bt,zt,Ut))}function Ct(Nt,Bt,Ut){if(Bt){var zt,Zt,ln;if(Bt.__r3f&&(Bt.__r3f.parent=null),(zt=Nt.__r3f)!=null&&zt.objects&&(Nt.__r3f.objects=Nt.__r3f.objects.filter(gn=>gn!==Bt)),(Zt=Bt.__r3f)!=null&&Zt.attach)detach(Nt,Bt,Bt.__r3f.attach);else if(Bt.isObject3D&&Nt.isObject3D){var cn;Nt.remove(Bt),(cn=Bt.__r3f)!=null&&cn.root&&removeInteractivity(Bt.__r3f.root,Bt)}const pn=(ln=Bt.__r3f)==null?void 0:ln.primitive,dn=Ut===void 0?Bt.dispose!==null&&!pn:Ut;if(!pn){var hn;Tt((hn=Bt.__r3f)==null?void 0:hn.objects,Bt,dn),Tt(Bt.children,Bt,dn)}Bt.__r3f&&(delete Bt.__r3f.root,delete Bt.__r3f.objects,delete Bt.__r3f.handlers,delete Bt.__r3f.memoizedProps,pn||delete Bt.__r3f),dn&&Bt.dispose&&Bt.type!=="Scene"&&schedulerExports.unstable_scheduleCallback(schedulerExports.unstable_IdlePriority,()=>{try{Bt.dispose()}catch{}}),invalidateInstance(Nt)}}function At(Nt,Bt,Ut,zt){var Zt;const ln=(Zt=Nt.__r3f)==null?void 0:Zt.parent;if(!ln)return;const cn=lt(Bt,Ut,Nt.__r3f.root);if(Nt.children){for(const hn of Nt.children)hn.__r3f&&ft(cn,hn);Nt.children=Nt.children.filter(hn=>!hn.__r3f)}Nt.__r3f.objects.forEach(hn=>ft(cn,hn)),Nt.__r3f.objects=[],Nt.__r3f.autoRemovedBeforeAppend||Ct(ln,Nt),cn.parent&&(cn.__r3f.autoRemovedBeforeAppend=!0),ft(ln,cn),cn.raycast&&cn.__r3f.eventCount&&cn.__r3f.root.getState().internal.interaction.push(cn),[zt,zt.alternate].forEach(hn=>{hn!==null&&(hn.stateNode=cn,hn.ref&&(typeof hn.ref=="function"?hn.ref(cn):hn.ref.current=cn))})}const Rt=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:Reconciler({createInstance:lt,removeChild:Ct,appendChild:ft,appendInitialChild:ft,insertBefore:St,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(Nt,Bt)=>{if(!Bt)return;const Ut=Nt.getState().scene;Ut.__r3f&&(Ut.__r3f.root=Nt,ft(Ut,Bt))},removeChildFromContainer:(Nt,Bt)=>{Bt&&Ct(Nt.getState().scene,Bt)},insertInContainerBefore:(Nt,Bt,Ut)=>{if(!Bt||!Ut)return;const zt=Nt.getState().scene;zt.__r3f&&St(zt,Bt,Ut)},getRootHostContext:()=>null,getChildHostContext:Nt=>Nt,finalizeInitialChildren(Nt){var Bt;return!!((Bt=Nt==null?void 0:Nt.__r3f)!=null?Bt:{}).handlers},prepareUpdate(Nt,Bt,Ut,zt){if(Nt.__r3f.primitive&&zt.object&&zt.object!==Nt)return[!0];{const{args:Zt=[],children:ln,...cn}=zt,{args:hn=[],children:pn,...dn}=Ut;if(!Array.isArray(Zt))throw new Error("R3F: the args prop must be an array!");if(Zt.some((vn,Tn)=>vn!==hn[Tn]))return[!0];const gn=diffProps(Nt,cn,dn,!0);return gn.changes.length?[!1,gn]:null}},commitUpdate(Nt,[Bt,Ut],zt,Zt,ln,cn){Bt?At(Nt,zt,ln,cn):applyProps$1(Nt,Ut)},commitMount(Nt,Bt,Ut,zt){var Zt;const ln=(Zt=Nt.__r3f)!=null?Zt:{};Nt.raycast&&ln.handlers&&ln.eventCount&&Nt.__r3f.root.getState().internal.interaction.push(Nt)},getPublicInstance:Nt=>Nt,prepareForCommit:()=>null,preparePortalMount:Nt=>prepare(Nt.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(Nt){var Bt;const{attach:Ut,parent:zt}=(Bt=Nt.__r3f)!=null?Bt:{};Ut&&zt&&detach(zt,Nt,Ut),Nt.isObject3D&&(Nt.visible=!1),invalidateInstance(Nt)},unhideInstance(Nt,Bt){var Ut;const{attach:zt,parent:Zt}=(Ut=Nt.__r3f)!=null?Ut:{};zt&&Zt&&attach(Zt,Nt,zt),(Nt.isObject3D&&Bt.visible==null||Bt.visible)&&(Nt.visible=!0),invalidateInstance(Nt)},createTextInstance:Rt,hideTextInstance:Rt,unhideTextInstance:Rt,getCurrentEventPriority:()=>$?$():constantsExports.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&is.fun(performance.now)?performance.now:is.fun(Date.now)?Date.now:()=>0,scheduleTimeout:is.fun(setTimeout)?setTimeout:void 0,cancelTimeout:is.fun(clearTimeout)?clearTimeout:void 0}),applyProps:applyProps$1}}var _window$document,_window$navigator;const getColorManagement=()=>{var dt;return(dt=catalogue.ColorManagement)!=null?dt:null},isOrthographicCamera=dt=>dt&&dt.isOrthographicCamera,isRef$1=dt=>dt&&dt.hasOwnProperty("current"),useIsomorphicLayoutEffect=typeof window<"u"&&((_window$document=window.document)!=null&&_window$document.createElement||((_window$navigator=window.navigator)==null?void 0:_window$navigator.product)==="ReactNative")?reactExports.useLayoutEffect:reactExports.useEffect;function useMutableCallback(dt){const $=reactExports.useRef(dt);return useIsomorphicLayoutEffect(()=>void($.current=dt),[dt]),$}function Block({set:dt}){return useIsomorphicLayoutEffect(()=>(dt(new Promise(()=>null)),()=>dt(!1)),[dt]),null}class ErrorBoundary extends reactExports.Component{constructor(...$){super(...$),this.state={error:!1}}componentDidCatch($){this.props.set($)}render(){return this.state.error?null:this.props.children}}ErrorBoundary.getDerivedStateFromError=()=>({error:!0});const DEFAULT="__default",DEFAULTS=new Map,isDiffSet=dt=>dt&&!!dt.memoized&&!!dt.changes;function calculateDpr(dt){const $=typeof window<"u"?window.devicePixelRatio:1;return Array.isArray(dt)?Math.min(Math.max(dt[0],$),dt[1]):dt}const getRootState=dt=>{var $;return($=dt.__r3f)==null?void 0:$.root.getState()},is={obj:dt=>dt===Object(dt)&&!is.arr(dt)&&typeof dt!="function",fun:dt=>typeof dt=="function",str:dt=>typeof dt=="string",num:dt=>typeof dt=="number",boo:dt=>typeof dt=="boolean",und:dt=>dt===void 0,arr:dt=>Array.isArray(dt),equ(dt,$,{arrays:lt="shallow",objects:ft="reference",strict:St=!0}={}){if(typeof dt!=typeof $||!!dt!=!!$)return!1;if(is.str(dt)||is.num(dt))return dt===$;const Tt=is.obj(dt);if(Tt&&ft==="reference")return dt===$;const Ct=is.arr(dt);if(Ct&&lt==="reference")return dt===$;if((Ct||Tt)&&dt===$)return!0;let At;for(At in dt)if(!(At in $))return!1;if(Tt&&lt==="shallow"&&ft==="shallow"){for(At in St?$:dt)if(!is.equ(dt[At],$[At],{strict:St,objects:"reference"}))return!1}else for(At in St?$:dt)if(dt[At]!==$[At])return!1;if(is.und(At)){if(Ct&&dt.length===0&&$.length===0||Tt&&Object.keys(dt).length===0&&Object.keys($).length===0)return!0;if(dt!==$)return!1}return!0}};function buildGraph(dt){const $={nodes:{},materials:{}};return dt&&dt.traverse(lt=>{lt.name&&($.nodes[lt.name]=lt),lt.material&&!$.materials[lt.material.name]&&($.materials[lt.material.name]=lt.material)}),$}function dispose(dt){dt.dispose&&dt.type!=="Scene"&&dt.dispose();for(const $ in dt)$.dispose==null||$.dispose(),delete dt[$]}function prepare(dt,$){const lt=dt;return($!=null&&$.primitive||!lt.__r3f)&&(lt.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...$}),dt}function resolve(dt,$){let lt=dt;if($.includes("-")){const ft=$.split("-"),St=ft.pop();return lt=ft.reduce((Tt,Ct)=>Tt[Ct],dt),{target:lt,key:St}}else return{target:lt,key:$}}const INDEX_REGEX=/-\d+$/;function attach(dt,$,lt){if(is.str(lt)){if(INDEX_REGEX.test(lt)){const Tt=lt.replace(INDEX_REGEX,""),{target:Ct,key:At}=resolve(dt,Tt);Array.isArray(Ct[At])||(Ct[At]=[])}const{target:ft,key:St}=resolve(dt,lt);$.__r3f.previousAttach=ft[St],ft[St]=$}else $.__r3f.previousAttach=lt(dt,$)}function detach(dt,$,lt){var ft,St;if(is.str(lt)){const{target:Tt,key:Ct}=resolve(dt,lt),At=$.__r3f.previousAttach;At===void 0?delete Tt[Ct]:Tt[Ct]=At}else(ft=$.__r3f)==null||ft.previousAttach==null||ft.previousAttach(dt,$);(St=$.__r3f)==null||delete St.previousAttach}function diffProps(dt,{children:$,key:lt,ref:ft,...St},{children:Tt,key:Ct,ref:At,...Rt}={},kt=!1){var Nt;const Bt=(Nt=dt==null?void 0:dt.__r3f)!=null?Nt:{},Ut=Object.entries(St),zt=[];if(kt){const ln=Object.keys(Rt);for(let cn=0;cn<ln.length;cn++)St.hasOwnProperty(ln[cn])||Ut.unshift([ln[cn],DEFAULT+"remove"])}Ut.forEach(([ln,cn])=>{var hn;if((hn=dt.__r3f)!=null&&hn.primitive&&ln==="object"||is.equ(cn,Rt[ln]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(ln))return zt.push([ln,cn,!0,[]]);let pn=[];ln.includes("-")&&(pn=ln.split("-")),zt.push([ln,cn,!1,pn]);for(const dn in St){const gn=St[dn];dn.startsWith(`${ln}-`)&&zt.push([dn,gn,!1,dn.split("-")])}});const Zt={...St};return Bt.memoizedProps&&Bt.memoizedProps.args&&(Zt.args=Bt.memoizedProps.args),Bt.memoizedProps&&Bt.memoizedProps.attach&&(Zt.attach=Bt.memoizedProps.attach),{memoized:Zt,changes:zt}}function applyProps$1(dt,$){var lt,ft,St;const Tt=(lt=dt.__r3f)!=null?lt:{},Ct=Tt.root,At=(ft=Ct==null||Ct.getState==null?void 0:Ct.getState())!=null?ft:{},{memoized:Rt,changes:kt}=isDiffSet($)?$:diffProps(dt,$),Nt=Tt.eventCount;dt.__r3f&&(dt.__r3f.memoizedProps=Rt);for(let Ut=0;Ut<kt.length;Ut++){let[zt,Zt,ln,cn]=kt[Ut],hn=dt,pn=hn[zt];if(cn.length&&(pn=cn.reduce((dn,gn)=>dn[gn],dt),!(pn&&pn.set))){const[dn,...gn]=cn.reverse();hn=gn.reverse().reduce((vn,Tn)=>vn[Tn],dt),zt=dn}if(Zt===DEFAULT+"remove")if(hn.constructor){let dn=DEFAULTS.get(hn.constructor);dn||(dn=new hn.constructor,DEFAULTS.set(hn.constructor,dn)),Zt=dn[zt]}else Zt=0;if(ln)Zt?Tt.handlers[zt]=Zt:delete Tt.handlers[zt],Tt.eventCount=Object.keys(Tt.handlers).length;else if(pn&&pn.set&&(pn.copy||pn instanceof Layers$1)){if(Array.isArray(Zt))pn.fromArray?pn.fromArray(Zt):pn.set(...Zt);else if(pn.copy&&Zt&&Zt.constructor&&pn.constructor===Zt.constructor)pn.copy(Zt);else if(Zt!==void 0){const dn=pn instanceof Color;!dn&&pn.setScalar?pn.setScalar(Zt):pn instanceof Layers$1&&Zt instanceof Layers$1?pn.mask=Zt.mask:pn.set(Zt),!getColorManagement()&&!At.linear&&dn&&pn.convertSRGBToLinear()}}else hn[zt]=Zt,!At.linear&&hn[zt]instanceof Texture&&hn[zt].format===RGBAFormat&&hn[zt].type===UnsignedByteType&&(hn[zt].encoding=sRGBEncoding);invalidateInstance(dt)}if(Tt.parent&&At.internal&&dt.raycast&&Nt!==Tt.eventCount){const Ut=At.internal.interaction.indexOf(dt);Ut>-1&&At.internal.interaction.splice(Ut,1),Tt.eventCount&&At.internal.interaction.push(dt)}return!(kt.length===1&&kt[0][0]==="onUpdate")&&kt.length&&(St=dt.__r3f)!=null&&St.parent&&updateInstance(dt),dt}function invalidateInstance(dt){var $,lt;const ft=($=dt.__r3f)==null||(lt=$.root)==null||lt.getState==null?void 0:lt.getState();ft&&ft.internal.frames===0&&ft.invalidate()}function updateInstance(dt){dt.onUpdate==null||dt.onUpdate(dt)}function updateCamera(dt,$){dt.manual||(isOrthographicCamera(dt)?(dt.left=$.width/-2,dt.right=$.width/2,dt.top=$.height/2,dt.bottom=$.height/-2):dt.aspect=$.width/$.height,dt.updateProjectionMatrix(),dt.updateMatrixWorld())}function makeId(dt){return(dt.eventObject||dt.object).uuid+"/"+dt.index+dt.instanceId}function getEventPriority(){var dt;const $=typeof self<"u"&&self||typeof window<"u"&&window;if(!$)return constantsExports.DefaultEventPriority;switch((dt=$.event)==null?void 0:dt.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return constantsExports.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return constantsExports.ContinuousEventPriority;default:return constantsExports.DefaultEventPriority}}function releaseInternalPointerCapture(dt,$,lt,ft){const St=lt.get($);St&&(lt.delete($),lt.size===0&&(dt.delete(ft),St.target.releasePointerCapture(ft)))}function removeInteractivity(dt,$){const{internal:lt}=dt.getState();lt.interaction=lt.interaction.filter(ft=>ft!==$),lt.initialHits=lt.initialHits.filter(ft=>ft!==$),lt.hovered.forEach((ft,St)=>{(ft.eventObject===$||ft.object===$)&&lt.hovered.delete(St)}),lt.capturedMap.forEach((ft,St)=>{releaseInternalPointerCapture(lt.capturedMap,$,ft,St)})}function createEvents(dt){function $(Rt){const{internal:kt}=dt.getState(),Nt=Rt.offsetX-kt.initialClick[0],Bt=Rt.offsetY-kt.initialClick[1];return Math.round(Math.sqrt(Nt*Nt+Bt*Bt))}function lt(Rt){return Rt.filter(kt=>["Move","Over","Enter","Out","Leave"].some(Nt=>{var Bt;return(Bt=kt.__r3f)==null?void 0:Bt.handlers["onPointer"+Nt]}))}function ft(Rt,kt){const Nt=dt.getState(),Bt=new Set,Ut=[],zt=kt?kt(Nt.internal.interaction):Nt.internal.interaction;for(let hn=0;hn<zt.length;hn++){const pn=getRootState(zt[hn]);pn&&(pn.raycaster.camera=void 0)}Nt.previousRoot||Nt.events.compute==null||Nt.events.compute(Rt,Nt);function Zt(hn){const pn=getRootState(hn);if(!pn||!pn.events.enabled||pn.raycaster.camera===null)return[];if(pn.raycaster.camera===void 0){var dn;pn.events.compute==null||pn.events.compute(Rt,pn,(dn=pn.previousRoot)==null?void 0:dn.getState()),pn.raycaster.camera===void 0&&(pn.raycaster.camera=null)}return pn.raycaster.camera?pn.raycaster.intersectObject(hn,!0):[]}let ln=zt.flatMap(Zt).sort((hn,pn)=>{const dn=getRootState(hn.object),gn=getRootState(pn.object);return!dn||!gn?hn.distance-pn.distance:gn.events.priority-dn.events.priority||hn.distance-pn.distance}).filter(hn=>{const pn=makeId(hn);return Bt.has(pn)?!1:(Bt.add(pn),!0)});Nt.events.filter&&(ln=Nt.events.filter(ln,Nt));for(const hn of ln){let pn=hn.object;for(;pn;){var cn;(cn=pn.__r3f)!=null&&cn.eventCount&&Ut.push({...hn,eventObject:pn}),pn=pn.parent}}if("pointerId"in Rt&&Nt.internal.capturedMap.has(Rt.pointerId))for(let hn of Nt.internal.capturedMap.get(Rt.pointerId).values())Bt.has(makeId(hn.intersection))||Ut.push(hn.intersection);return Ut}function St(Rt,kt,Nt,Bt){const Ut=dt.getState();if(Rt.length){const zt={stopped:!1};for(const Zt of Rt){const ln=getRootState(Zt.object)||Ut,{raycaster:cn,pointer:hn,camera:pn,internal:dn}=ln,gn=new Vector3(hn.x,hn.y,0).unproject(pn),vn=Rn=>{var Pn,Nn;return(Pn=(Nn=dn.capturedMap.get(Rn))==null?void 0:Nn.has(Zt.eventObject))!=null?Pn:!1},Tn=Rn=>{const Pn={intersection:Zt,target:kt.target};dn.capturedMap.has(Rn)?dn.capturedMap.get(Rn).set(Zt.eventObject,Pn):dn.capturedMap.set(Rn,new Map([[Zt.eventObject,Pn]])),kt.target.setPointerCapture(Rn)},Cn=Rn=>{const Pn=dn.capturedMap.get(Rn);Pn&&releaseInternalPointerCapture(dn.capturedMap,Zt.eventObject,Pn,Rn)};let $n={};for(let Rn in kt){let Pn=kt[Rn];typeof Pn!="function"&&($n[Rn]=Pn)}let xn={...Zt,...$n,pointer:hn,intersections:Rt,stopped:zt.stopped,delta:Nt,unprojectedPoint:gn,ray:cn.ray,camera:pn,stopPropagation(){const Rn="pointerId"in kt&&dn.capturedMap.get(kt.pointerId);if((!Rn||Rn.has(Zt.eventObject))&&(xn.stopped=zt.stopped=!0,dn.hovered.size&&Array.from(dn.hovered.values()).find(Pn=>Pn.eventObject===Zt.eventObject))){const Pn=Rt.slice(0,Rt.indexOf(Zt));Tt([...Pn,Zt])}},target:{hasPointerCapture:vn,setPointerCapture:Tn,releasePointerCapture:Cn},currentTarget:{hasPointerCapture:vn,setPointerCapture:Tn,releasePointerCapture:Cn},nativeEvent:kt};if(Bt(xn),zt.stopped===!0)break}}return Rt}function Tt(Rt){const{internal:kt}=dt.getState();for(const Nt of kt.hovered.values())if(!Rt.length||!Rt.find(Bt=>Bt.object===Nt.object&&Bt.index===Nt.index&&Bt.instanceId===Nt.instanceId)){const Ut=Nt.eventObject.__r3f,zt=Ut==null?void 0:Ut.handlers;if(kt.hovered.delete(makeId(Nt)),Ut!=null&&Ut.eventCount){const Zt={...Nt,intersections:Rt};zt.onPointerOut==null||zt.onPointerOut(Zt),zt.onPointerLeave==null||zt.onPointerLeave(Zt)}}}function Ct(Rt,kt){for(let Nt=0;Nt<kt.length;Nt++){const Bt=kt[Nt].__r3f;Bt==null||Bt.handlers.onPointerMissed==null||Bt.handlers.onPointerMissed(Rt)}}function At(Rt){switch(Rt){case"onPointerLeave":case"onPointerCancel":return()=>Tt([]);case"onLostPointerCapture":return kt=>{const{internal:Nt}=dt.getState();"pointerId"in kt&&Nt.capturedMap.has(kt.pointerId)&&requestAnimationFrame(()=>{Nt.capturedMap.has(kt.pointerId)&&(Nt.capturedMap.delete(kt.pointerId),Tt([]))})}}return function(Nt){const{onPointerMissed:Bt,internal:Ut}=dt.getState();Ut.lastEvent.current=Nt;const zt=Rt==="onPointerMove",Zt=Rt==="onClick"||Rt==="onContextMenu"||Rt==="onDoubleClick",cn=ft(Nt,zt?lt:void 0),hn=Zt?$(Nt):0;Rt==="onPointerDown"&&(Ut.initialClick=[Nt.offsetX,Nt.offsetY],Ut.initialHits=cn.map(dn=>dn.eventObject)),Zt&&!cn.length&&hn<=2&&(Ct(Nt,Ut.interaction),Bt&&Bt(Nt)),zt&&Tt(cn);function pn(dn){const gn=dn.eventObject,vn=gn.__r3f,Tn=vn==null?void 0:vn.handlers;if(vn!=null&&vn.eventCount)if(zt){if(Tn.onPointerOver||Tn.onPointerEnter||Tn.onPointerOut||Tn.onPointerLeave){const Cn=makeId(dn),$n=Ut.hovered.get(Cn);$n?$n.stopped&&dn.stopPropagation():(Ut.hovered.set(Cn,dn),Tn.onPointerOver==null||Tn.onPointerOver(dn),Tn.onPointerEnter==null||Tn.onPointerEnter(dn))}Tn.onPointerMove==null||Tn.onPointerMove(dn)}else{const Cn=Tn[Rt];Cn?(!Zt||Ut.initialHits.includes(gn))&&(Ct(Nt,Ut.interaction.filter($n=>!Ut.initialHits.includes($n))),Cn(dn)):Zt&&Ut.initialHits.includes(gn)&&Ct(Nt,Ut.interaction.filter($n=>!Ut.initialHits.includes($n)))}}St(cn,Nt,hn,pn)}}return{handlePointer:At}}const privateKeys=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],isRenderer=dt=>!!(dt!=null&&dt.render),context=reactExports.createContext(null),createStore=(dt,$)=>{const lt=create$1((At,Rt)=>{const kt=new Vector3,Nt=new Vector3,Bt=new Vector3;function Ut(hn=Rt().camera,pn=Nt,dn=Rt().size){const{width:gn,height:vn,top:Tn,left:Cn}=dn,$n=gn/vn;pn instanceof Vector3?Bt.copy(pn):Bt.set(...pn);const xn=hn.getWorldPosition(kt).distanceTo(Bt);if(isOrthographicCamera(hn))return{width:gn/hn.zoom,height:vn/hn.zoom,top:Tn,left:Cn,factor:1,distance:xn,aspect:$n};{const Rn=hn.fov*Math.PI/180,Pn=2*Math.tan(Rn/2)*xn,Nn=Pn*(gn/vn);return{width:Nn,height:Pn,top:Tn,left:Cn,factor:gn/Nn,distance:xn,aspect:$n}}}let zt;const Zt=hn=>At(pn=>({performance:{...pn.performance,current:hn}})),ln=new Vector2;return{set:At,get:Rt,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(hn=1)=>dt(Rt(),hn),advance:(hn,pn)=>$(hn,pn,Rt()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Clock,pointer:ln,mouse:ln,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const hn=Rt();zt&&clearTimeout(zt),hn.performance.current!==hn.performance.min&&Zt(hn.performance.min),zt=setTimeout(()=>Zt(Rt().performance.max),hn.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:Ut},setEvents:hn=>At(pn=>({...pn,events:{...pn.events,...hn}})),setSize:(hn,pn,dn,gn,vn)=>{const Tn=Rt().camera,Cn={width:hn,height:pn,top:gn||0,left:vn||0,updateStyle:dn};At($n=>({size:Cn,viewport:{...$n.viewport,...Ut(Tn,Nt,Cn)}}))},setDpr:hn=>At(pn=>{const dn=calculateDpr(hn);return{viewport:{...pn.viewport,dpr:dn,initialDpr:pn.viewport.initialDpr||dn}}}),setFrameloop:(hn="always")=>{const pn=Rt().clock;pn.stop(),pn.elapsedTime=0,hn!=="never"&&(pn.start(),pn.elapsedTime=0),At(()=>({frameloop:hn}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:reactExports.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(hn,pn,dn)=>{const gn=Rt().internal;return gn.priority=gn.priority+(pn>0?1:0),gn.subscribers.push({ref:hn,priority:pn,store:dn}),gn.subscribers=gn.subscribers.sort((vn,Tn)=>vn.priority-Tn.priority),()=>{const vn=Rt().internal;vn!=null&&vn.subscribers&&(vn.priority=vn.priority-(pn>0?1:0),vn.subscribers=vn.subscribers.filter(Tn=>Tn.ref!==hn))}}}}}),ft=lt.getState();let St=ft.size,Tt=ft.viewport.dpr,Ct=ft.camera;return lt.subscribe(()=>{const{camera:At,size:Rt,viewport:kt,gl:Nt,set:Bt}=lt.getState();if(Rt!==St||kt.dpr!==Tt){var Ut;St=Rt,Tt=kt.dpr,updateCamera(At,Rt),Nt.setPixelRatio(kt.dpr);const zt=(Ut=Rt.updateStyle)!=null?Ut:typeof HTMLCanvasElement<"u"&&Nt.domElement instanceof HTMLCanvasElement;Nt.setSize(Rt.width,Rt.height,zt)}At!==Ct&&(Ct=At,Bt(zt=>({viewport:{...zt.viewport,...zt.viewport.getCurrentViewport(At)}})))}),lt.subscribe(At=>dt(At)),lt};function createSubs(dt,$){const lt={callback:dt};return $.add(lt),()=>void $.delete(lt)}let i$2,globalEffects=new Set,globalAfterEffects=new Set,globalTailEffects=new Set;const addEffect=dt=>createSubs(dt,globalEffects);function run(dt,$){if(dt.size)for(const{callback:lt}of dt.values())lt($)}function flushGlobalEffects(dt,$){switch(dt){case"before":return run(globalEffects,$);case"after":return run(globalAfterEffects,$);case"tail":return run(globalTailEffects,$)}}let subscribers,subscription;function render$1(dt,$,lt){let ft=$.clock.getDelta();for($.frameloop==="never"&&typeof dt=="number"&&(ft=dt-$.clock.elapsedTime,$.clock.oldTime=$.clock.elapsedTime,$.clock.elapsedTime=dt),subscribers=$.internal.subscribers,i$2=0;i$2<subscribers.length;i$2++)subscription=subscribers[i$2],subscription.ref.current(subscription.store.getState(),ft,lt);return!$.internal.priority&&$.gl.render&&$.gl.render($.scene,$.camera),$.internal.frames=Math.max(0,$.internal.frames-1),$.frameloop==="always"?1:$.internal.frames}function createLoop(dt){let $=!1,lt,ft,St;function Tt(Rt){ft=requestAnimationFrame(Tt),$=!0,lt=0,flushGlobalEffects("before",Rt);for(const Nt of dt.values()){var kt;St=Nt.store.getState(),St.internal.active&&(St.frameloop==="always"||St.internal.frames>0)&&!((kt=St.gl.xr)!=null&&kt.isPresenting)&&(lt+=render$1(Rt,St))}if(flushGlobalEffects("after",Rt),lt===0)return flushGlobalEffects("tail",Rt),$=!1,cancelAnimationFrame(ft)}function Ct(Rt,kt=1){var Nt;if(!Rt)return dt.forEach(Bt=>Ct(Bt.store.getState()),kt);(Nt=Rt.gl.xr)!=null&&Nt.isPresenting||!Rt.internal.active||Rt.frameloop==="never"||(Rt.internal.frames=Math.min(60,Rt.internal.frames+kt),$||($=!0,requestAnimationFrame(Tt)))}function At(Rt,kt=!0,Nt,Bt){if(kt&&flushGlobalEffects("before",Rt),Nt)render$1(Rt,Nt,Bt);else for(const Ut of dt.values())render$1(Rt,Ut.store.getState());kt&&flushGlobalEffects("after",Rt)}return{loop:Tt,invalidate:Ct,advance:At}}function useStore(){const dt=reactExports.useContext(context);if(!dt)throw new Error("R3F: Hooks can only be used within the Canvas component!");return dt}function useThree(dt=lt=>lt,$){return useStore()(dt,$)}function useFrame(dt,$=0){const lt=useStore(),ft=lt.getState().internal.subscribe,St=useMutableCallback(dt);return useIsomorphicLayoutEffect(()=>ft(St,$,lt),[$,ft,lt]),null}function loadingFn(dt,$){return function(lt,...ft){const St=new lt;return dt&&dt(St),Promise.all(ft.map(Tt=>new Promise((Ct,At)=>St.load(Tt,Rt=>{Rt.scene&&Object.assign(Rt,buildGraph(Rt.scene)),Ct(Rt)},$,Rt=>At(new Error(`Could not load ${Tt}: ${Rt.message})`))))))}}function useLoader(dt,$,lt,ft){const St=Array.isArray($)?$:[$],Tt=suspend(loadingFn(lt,ft),[dt,...St],{equal:is.equ});return Array.isArray($)?Tt:Tt[0]}useLoader.preload=function(dt,$,lt){const ft=Array.isArray($)?$:[$];return preload(loadingFn(lt),[dt,...ft])};useLoader.clear=function(dt,$){const lt=Array.isArray($)?$:[$];return clear([dt,...lt])};const roots=new Map,{invalidate,advance}=createLoop(roots),{reconciler,applyProps}=createRenderer(roots,getEventPriority),shallowLoose={objects:"shallow",strict:!1},createRendererInstance=(dt,$)=>{const lt=typeof dt=="function"?dt($):dt;return isRenderer(lt)?lt:new WebGLRenderer({powerPreference:"high-performance",canvas:$,antialias:!0,alpha:!0,...dt})};function computeInitialSize(dt,$){if($)return $;if(typeof HTMLCanvasElement<"u"&&dt instanceof HTMLCanvasElement&&dt.parentElement){const{width:lt,height:ft,top:St,left:Tt}=dt.parentElement.getBoundingClientRect();return{width:lt,height:ft,top:St,left:Tt}}else if(typeof OffscreenCanvas<"u"&&dt instanceof OffscreenCanvas)return{width:dt.width,height:dt.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function createRoot(dt){const $=roots.get(dt),lt=$==null?void 0:$.fiber,ft=$==null?void 0:$.store;$&&console.warn("R3F.createRoot should only be called once!");const St=typeof reportError=="function"?reportError:console.error,Tt=ft||createStore(invalidate,advance),Ct=lt||reconciler.createContainer(Tt,constantsExports.ConcurrentRoot,null,!1,null,"",St,null);$||roots.set(dt,{fiber:Ct,store:Tt});let At,Rt=!1,kt;return{configure(Nt={}){let{gl:Bt,size:Ut,scene:zt,events:Zt,onCreated:ln,shadows:cn=!1,linear:hn=!1,flat:pn=!1,legacy:dn=!1,orthographic:gn=!1,frameloop:vn="always",dpr:Tn=[1,2],performance:Cn,raycaster:$n,camera:xn,onPointerMissed:Rn}=Nt,Pn=Tt.getState(),Nn=Pn.gl;Pn.gl||Pn.set({gl:Nn=createRendererInstance(Bt,dt)});let Wn=Pn.raycaster;Wn||Pn.set({raycaster:Wn=new Raycaster});const{params:zn,...Yn}=$n||{};if(is.equ(Yn,Wn,shallowLoose)||applyProps(Wn,{...Yn}),is.equ(zn,Wn.params,shallowLoose)||applyProps(Wn,{params:{...Wn.params,...zn}}),!Pn.camera||Pn.camera===kt&&!is.equ(kt,xn,shallowLoose)){kt=xn;const sr=xn instanceof Camera,In=sr?xn:gn?new OrthographicCamera$1(0,0,0,0,.1,1e3):new PerspectiveCamera(75,0,.1,1e3);sr||(In.position.z=5,xn&&applyProps(In,xn),!Pn.camera&&!(xn!=null&&xn.rotation)&&In.lookAt(0,0,0)),Pn.set({camera:In})}if(!Pn.scene){let sr;zt instanceof Scene?sr=zt:(sr=new Scene,zt&&applyProps(sr,zt)),Pn.set({scene:prepare(sr)})}if(!Pn.xr){const sr=(pr,Jn)=>{const Pr=Tt.getState();Pr.frameloop!=="never"&&advance(pr,!0,Pr,Jn)},In=()=>{const pr=Tt.getState();pr.gl.xr.enabled=pr.gl.xr.isPresenting,pr.gl.xr.setAnimationLoop(pr.gl.xr.isPresenting?sr:null),pr.gl.xr.isPresenting||invalidate(pr)},ir={connect(){const pr=Tt.getState().gl;pr.xr.addEventListener("sessionstart",In),pr.xr.addEventListener("sessionend",In)},disconnect(){const pr=Tt.getState().gl;pr.xr.removeEventListener("sessionstart",In),pr.xr.removeEventListener("sessionend",In)}};Nn.xr&&ir.connect(),Pn.set({xr:ir})}if(Nn.shadowMap){const sr=Nn.shadowMap.enabled,In=Nn.shadowMap.type;if(Nn.shadowMap.enabled=!!cn,is.boo(cn))Nn.shadowMap.type=PCFSoftShadowMap;else if(is.str(cn)){var Qn;const ir={basic:BasicShadowMap,percentage:PCFShadowMap,soft:PCFSoftShadowMap,variance:VSMShadowMap};Nn.shadowMap.type=(Qn=ir[cn])!=null?Qn:PCFSoftShadowMap}else is.obj(cn)&&Object.assign(Nn.shadowMap,cn);(sr!==Nn.shadowMap.enabled||In!==Nn.shadowMap.type)&&(Nn.shadowMap.needsUpdate=!0)}const nr=getColorManagement();nr&&("enabled"in nr?nr.enabled=!dn:"legacyMode"in nr&&(nr.legacyMode=dn));const Ln=hn?LinearEncoding:sRGBEncoding,Un=pn?NoToneMapping:ACESFilmicToneMapping;Nn.outputEncoding!==Ln&&(Nn.outputEncoding=Ln),Nn.toneMapping!==Un&&(Nn.toneMapping=Un),Pn.legacy!==dn&&Pn.set(()=>({legacy:dn})),Pn.linear!==hn&&Pn.set(()=>({linear:hn})),Pn.flat!==pn&&Pn.set(()=>({flat:pn})),Bt&&!is.fun(Bt)&&!isRenderer(Bt)&&!is.equ(Bt,Nn,shallowLoose)&&applyProps(Nn,Bt),Zt&&!Pn.events.handlers&&Pn.set({events:Zt(Tt)});const Vn=computeInitialSize(dt,Ut);return is.equ(Vn,Pn.size,shallowLoose)||Pn.setSize(Vn.width,Vn.height,Vn.updateStyle,Vn.top,Vn.left),Tn&&Pn.viewport.dpr!==calculateDpr(Tn)&&Pn.setDpr(Tn),Pn.frameloop!==vn&&Pn.setFrameloop(vn),Pn.onPointerMissed||Pn.set({onPointerMissed:Rn}),Cn&&!is.equ(Cn,Pn.performance,shallowLoose)&&Pn.set(sr=>({performance:{...sr.performance,...Cn}})),At=ln,Rt=!0,this},render(Nt){return Rt||this.configure(),reconciler.updateContainer(reactExports.createElement(Provider,{store:Tt,children:Nt,onCreated:At,rootElement:dt}),Ct,null,()=>{}),Tt},unmount(){unmountComponentAtNode(dt)}}}function Provider({store:dt,children:$,onCreated:lt,rootElement:ft}){return useIsomorphicLayoutEffect(()=>{const St=dt.getState();St.set(Tt=>({internal:{...Tt.internal,active:!0}})),lt&&lt(St),dt.getState().events.connected||St.events.connect==null||St.events.connect(ft)},[]),reactExports.createElement(context.Provider,{value:dt},$)}function unmountComponentAtNode(dt,$){const lt=roots.get(dt),ft=lt==null?void 0:lt.fiber;if(ft){const St=lt==null?void 0:lt.store.getState();St&&(St.internal.active=!1),reconciler.updateContainer(null,ft,null,()=>{St&&setTimeout(()=>{try{var Tt,Ct,At,Rt;St.events.disconnect==null||St.events.disconnect(),(Tt=St.gl)==null||(Ct=Tt.renderLists)==null||Ct.dispose==null||Ct.dispose(),(At=St.gl)==null||At.forceContextLoss==null||At.forceContextLoss(),(Rt=St.gl)!=null&&Rt.xr&&St.xr.disconnect(),dispose(St),roots.delete(dt),$&&$(dt)}catch{}},500)})}}function createPortal(dt,$,lt){return reactExports.createElement(Portal,{key:$.uuid,children:dt,container:$,state:lt})}function Portal({state:dt={},children:$,container:lt}){const{events:ft,size:St,...Tt}=dt,Ct=useStore(),[At]=reactExports.useState(()=>new Raycaster),[Rt]=reactExports.useState(()=>new Vector2),kt=reactExports.useCallback((Bt,Ut)=>{const zt={...Bt};Object.keys(Bt).forEach(ln=>{(privateKeys.includes(ln)||Bt[ln]!==Ut[ln]&&Ut[ln])&&delete zt[ln]});let Zt;if(Ut&&St){const ln=Ut.camera;Zt=Bt.viewport.getCurrentViewport(ln,new Vector3,St),ln!==Bt.camera&&updateCamera(ln,St)}return{...zt,scene:lt,raycaster:At,pointer:Rt,mouse:Rt,previousRoot:Ct,events:{...Bt.events,...Ut==null?void 0:Ut.events,...ft},size:{...Bt.size,...St},viewport:{...Bt.viewport,...Zt},...Tt}},[dt]),[Nt]=reactExports.useState(()=>{const Bt=Ct.getState();return create$1((zt,Zt)=>({...Bt,scene:lt,raycaster:At,pointer:Rt,mouse:Rt,previousRoot:Ct,events:{...Bt.events,...ft},size:{...Bt.size,...St},...Tt,set:zt,get:Zt,setEvents:ln=>zt(cn=>({...cn,events:{...cn.events,...ln}}))}))});return reactExports.useEffect(()=>{const Bt=Ct.subscribe(Ut=>Nt.setState(zt=>kt(Ut,zt)));return()=>{Bt(),Nt.destroy()}},[]),reactExports.useEffect(()=>{Nt.setState(Bt=>kt(Ct.getState(),Bt))},[kt]),reactExports.createElement(reactExports.Fragment,null,reconciler.createPortal(reactExports.createElement(context.Provider,{value:Nt},$),Nt,null))}reconciler.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:reactExports.version});function _extends(){return _extends=Object.assign?Object.assign.bind():function(dt){for(var $=1;$<arguments.length;$++){var lt=arguments[$];for(var ft in lt)Object.prototype.hasOwnProperty.call(lt,ft)&&(dt[ft]=lt[ft])}return dt},_extends.apply(this,arguments)}function debounce(dt,$,lt){var ft,St,Tt,Ct,At;$==null&&($=100);function Rt(){var Nt=Date.now()-Ct;Nt<$&&Nt>=0?ft=setTimeout(Rt,$-Nt):(ft=null,lt||(At=dt.apply(Tt,St),Tt=St=null))}var kt=function(){Tt=this,St=arguments,Ct=Date.now();var Nt=lt&&!ft;return ft||(ft=setTimeout(Rt,$)),Nt&&(At=dt.apply(Tt,St),Tt=St=null),At};return kt.clear=function(){ft&&(clearTimeout(ft),ft=null)},kt.flush=function(){ft&&(At=dt.apply(Tt,St),Tt=St=null,clearTimeout(ft),ft=null)},kt}debounce.debounce=debounce;var debounce_1=debounce;const createDebounce=getDefaultExportFromCjs(debounce_1);function useMeasure(dt){let{debounce:$,scroll:lt,polyfill:ft,offsetSize:St}=dt===void 0?{debounce:0,scroll:!1,offsetSize:!1}:dt;const Tt=ft||(typeof window>"u"?class{}:window.ResizeObserver);if(!Tt)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[Ct,At]=reactExports.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),Rt=reactExports.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:Ct}),kt=$?typeof $=="number"?$:$.scroll:null,Nt=$?typeof $=="number"?$:$.resize:null,Bt=reactExports.useRef(!1);reactExports.useEffect(()=>(Bt.current=!0,()=>void(Bt.current=!1)));const[Ut,zt,Zt]=reactExports.useMemo(()=>{const pn=()=>{if(!Rt.current.element)return;const{left:dn,top:gn,width:vn,height:Tn,bottom:Cn,right:$n,x:xn,y:Rn}=Rt.current.element.getBoundingClientRect(),Pn={left:dn,top:gn,width:vn,height:Tn,bottom:Cn,right:$n,x:xn,y:Rn};Rt.current.element instanceof HTMLElement&&St&&(Pn.height=Rt.current.element.offsetHeight,Pn.width=Rt.current.element.offsetWidth),Object.freeze(Pn),Bt.current&&!areBoundsEqual(Rt.current.lastBounds,Pn)&&At(Rt.current.lastBounds=Pn)};return[pn,Nt?createDebounce(pn,Nt):pn,kt?createDebounce(pn,kt):pn]},[At,St,kt,Nt]);function ln(){Rt.current.scrollContainers&&(Rt.current.scrollContainers.forEach(pn=>pn.removeEventListener("scroll",Zt,!0)),Rt.current.scrollContainers=null),Rt.current.resizeObserver&&(Rt.current.resizeObserver.disconnect(),Rt.current.resizeObserver=null)}function cn(){Rt.current.element&&(Rt.current.resizeObserver=new Tt(Zt),Rt.current.resizeObserver.observe(Rt.current.element),lt&&Rt.current.scrollContainers&&Rt.current.scrollContainers.forEach(pn=>pn.addEventListener("scroll",Zt,{capture:!0,passive:!0})))}const hn=pn=>{!pn||pn===Rt.current.element||(ln(),Rt.current.element=pn,Rt.current.scrollContainers=findScrollContainers(pn),cn())};return useOnWindowScroll(Zt,!!lt),useOnWindowResize(zt),reactExports.useEffect(()=>{ln(),cn()},[lt,Zt,zt]),reactExports.useEffect(()=>ln,[]),[hn,Ct,Ut]}function useOnWindowResize(dt){reactExports.useEffect(()=>{const $=dt;return window.addEventListener("resize",$),()=>void window.removeEventListener("resize",$)},[dt])}function useOnWindowScroll(dt,$){reactExports.useEffect(()=>{if($){const lt=dt;return window.addEventListener("scroll",lt,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",lt,!0)}},[dt,$])}function findScrollContainers(dt){const $=[];if(!dt||dt===document.body)return $;const{overflow:lt,overflowX:ft,overflowY:St}=window.getComputedStyle(dt);return[lt,ft,St].some(Tt=>Tt==="auto"||Tt==="scroll")&&$.push(dt),[...$,...findScrollContainers(dt.parentElement)]}const keys$1=["x","y","top","bottom","left","right","width","height"],areBoundsEqual=(dt,$)=>keys$1.every(lt=>dt[lt]===$[lt]);var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(dt,$,lt)=>$ in dt?__defProp(dt,$,{enumerable:!0,configurable:!0,writable:!0,value:lt}):dt[$]=lt,__spreadValues=(dt,$)=>{for(var lt in $||($={}))__hasOwnProp.call($,lt)&&__defNormalProp(dt,lt,$[lt]);if(__getOwnPropSymbols)for(var lt of __getOwnPropSymbols($))__propIsEnum.call($,lt)&&__defNormalProp(dt,lt,$[lt]);return dt},__spreadProps=(dt,$)=>__defProps(dt,__getOwnPropDescs($)),_a$1;function traverseFiber(dt,$,lt){if(!dt)return;if(lt(dt)===!0)return dt;let ft=$?dt.return:dt.child;for(;ft;){const St=traverseFiber(ft,$,lt);if(St)return St;ft=$?null:ft.sibling}}function wrapContext(dt){try{return Object.defineProperties(dt,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return dt}}const FiberContext=wrapContext(reactExports.createContext(null));class FiberProvider extends reactExports.Component{render(){return reactExports.createElement(FiberContext.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner,ReactCurrentDispatcher}=(_a$1=reactExports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)!=null?_a$1:{};function useFiber(){const dt=reactExports.useContext(FiberContext),$=reactExports.useId();return reactExports.useMemo(()=>{var ft;return(ft=ReactCurrentOwner==null?void 0:ReactCurrentOwner.current)!=null?ft:traverseFiber(dt,!1,St=>{let Tt=St.memoizedState;for(;Tt;){if(Tt.memoizedState===$)return!0;Tt=Tt.next}})},[dt,$])}function useContextBridge(){var dt,$;const lt=useFiber(),[ft]=reactExports.useState(()=>new Map);ft.clear();let St=lt;for(;St;){const Tt=(dt=St.type)==null?void 0:dt._context;Tt&&Tt!==FiberContext&&!ft.has(Tt)&&ft.set(Tt,($=ReactCurrentDispatcher==null?void 0:ReactCurrentDispatcher.current)==null?void 0:$.readContext(wrapContext(Tt))),St=St.return}return reactExports.useMemo(()=>Array.from(ft.keys()).reduce((Tt,Ct)=>At=>reactExports.createElement(Tt,null,reactExports.createElement(Ct.Provider,__spreadProps(__spreadValues({},At),{value:ft.get(Ct)}))),Tt=>reactExports.createElement(FiberProvider,__spreadValues({},Tt))),[ft])}const DOM_EVENTS={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function createPointerEvents(dt){const{handlePointer:$}=createEvents(dt);return{priority:1,enabled:!0,compute(lt,ft,St){ft.pointer.set(lt.offsetX/ft.size.width*2-1,-(lt.offsetY/ft.size.height)*2+1),ft.raycaster.setFromCamera(ft.pointer,ft.camera)},connected:void 0,handlers:Object.keys(DOM_EVENTS).reduce((lt,ft)=>({...lt,[ft]:$(ft)}),{}),update:()=>{var lt;const{events:ft,internal:St}=dt.getState();(lt=St.lastEvent)!=null&&lt.current&&ft.handlers&&ft.handlers.onPointerMove(St.lastEvent.current)},connect:lt=>{var ft;const{set:St,events:Tt}=dt.getState();Tt.disconnect==null||Tt.disconnect(),St(Ct=>({events:{...Ct.events,connected:lt}})),Object.entries((ft=Tt.handlers)!=null?ft:[]).forEach(([Ct,At])=>{const[Rt,kt]=DOM_EVENTS[Ct];lt.addEventListener(Rt,At,{passive:kt})})},disconnect:()=>{const{set:lt,events:ft}=dt.getState();if(ft.connected){var St;Object.entries((St=ft.handlers)!=null?St:[]).forEach(([Tt,Ct])=>{if(ft&&ft.connected instanceof HTMLElement){const[At]=DOM_EVENTS[Tt];ft.connected.removeEventListener(At,Ct)}}),lt(Tt=>({events:{...Tt.events,connected:void 0}}))}}}}const CanvasImpl=reactExports.forwardRef(function dt({children:$,fallback:lt,resize:ft,style:St,gl:Tt,events:Ct=createPointerEvents,eventSource:At,eventPrefix:Rt,shadows:kt,linear:Nt,flat:Bt,legacy:Ut,orthographic:zt,frameloop:Zt,dpr:ln,performance:cn,raycaster:hn,camera:pn,onPointerMissed:dn,onCreated:gn,...vn},Tn){reactExports.useMemo(()=>extend$1(r$5),[]);const Cn=useContextBridge(),[$n,xn]=useMeasure({scroll:!0,debounce:{scroll:50,resize:0},...ft}),Rn=reactExports.useRef(null),Pn=reactExports.useRef(null);reactExports.useImperativeHandle(Tn,()=>Rn.current);const Nn=useMutableCallback(dn),[Wn,zn]=reactExports.useState(!1),[Yn,Qn]=reactExports.useState(!1);if(Wn)throw Wn;if(Yn)throw Yn;const nr=reactExports.useRef(null);useIsomorphicLayoutEffect(()=>{const Un=Rn.current;xn.width>0&&xn.height>0&&Un&&(nr.current||(nr.current=createRoot(Un)),nr.current.configure({gl:Tt,events:Ct,shadows:kt,linear:Nt,flat:Bt,legacy:Ut,orthographic:zt,frameloop:Zt,dpr:ln,performance:cn,raycaster:hn,camera:pn,size:xn,onPointerMissed:(...Vn)=>Nn.current==null?void 0:Nn.current(...Vn),onCreated:Vn=>{Vn.events.connect==null||Vn.events.connect(At?isRef$1(At)?At.current:At:Pn.current),Rt&&Vn.setEvents({compute:(sr,In)=>{const ir=sr[Rt+"X"],pr=sr[Rt+"Y"];In.pointer.set(ir/In.size.width*2-1,-(pr/In.size.height)*2+1),In.raycaster.setFromCamera(In.pointer,In.camera)}}),gn==null||gn(Vn)}}),nr.current.render(reactExports.createElement(Cn,null,reactExports.createElement(ErrorBoundary,{set:Qn},reactExports.createElement(reactExports.Suspense,{fallback:reactExports.createElement(Block,{set:zn})},$)))))}),reactExports.useEffect(()=>{const Un=Rn.current;if(Un)return()=>unmountComponentAtNode(Un)},[]);const Ln=At?"none":"auto";return reactExports.createElement("div",_extends({ref:Pn,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Ln,...St}},vn),reactExports.createElement("div",{ref:$n,style:{width:"100%",height:"100%"}},reactExports.createElement("canvas",{ref:Rn,style:{display:"block"}},lt)))}),Canvas=reactExports.forwardRef(function dt($,lt){return reactExports.createElement(FiberProvider,null,reactExports.createElement(CanvasImpl,_extends({},$,{ref:lt})))}),BINOMIAL_COEFFICIENTS=[[1],[1,1],[1,2,1],[1,3,3,1],[1,4,6,4,1],[1,5,10,10,5,1],[1,6,15,20,15,6,1],[1,7,21,35,35,21,7,1],[1,8,28,56,70,56,28,8,1],[1,9,36,84,126,126,84,36,9,1],[1,10,45,120,210,252,210,120,45,10,1]],MAX_CONTROL_POINTS=BINOMIAL_COEFFICIENTS.length,computeBezierPoint=(dt,$)=>{const lt=new Vector3(0,0,0),ft=dt.length-1;for(let St=0;St<=ft;St++)lt.addScaledVector(dt[St],BINOMIAL_COEFFICIENTS[ft][St]*Math.pow(1-$,ft-St)*Math.pow($,St));return lt},interpolateBezierPoints=(dt,$)=>Array($).fill(0).map((lt,ft)=>computeBezierPoint(dt,ft/$)),INTERPOLATION_COUNT=1e3,useCurveEditorState=create$2()(subscribeWithSelector(immer((dt,$)=>({bezierControlPoints:[new Vector3(1,1,1),new Vector3(2,5,4)],selectedControlPoint:void 0,hoveredControlPoint:void 0,bezierLinePoints:[],addBezierControlPoint:lt=>{const ft=[...$().bezierControlPoints];ft.push(lt),!(ft.length>MAX_CONTROL_POINTS)&&dt({bezierControlPoints:ft})},removeBezierControlPoint:lt=>{const ft=[...$().bezierControlPoints];ft.splice(lt,1),dt({bezierControlPoints:ft})},updateBezierControlPoint:(lt,ft)=>dt(St=>{St.bezierControlPoints[lt]=ft}),setSelectedControlPoint:lt=>{dt({selectedControlPoint:lt})},updateBezierInterpolationPoints:()=>{const lt=interpolateBezierPoints($().bezierControlPoints,INTERPOLATION_COUNT);dt({bezierLinePoints:lt})}}))));useCurveEditorState.subscribe(dt=>dt.bezierControlPoints,()=>{useCurveEditorState.getState().updateBezierInterpolationPoints()});const VectorEditorItem=({id:dt,point:$})=>{const lt=useCurveEditorState(Ct=>Ct.updateBezierControlPoint),ft=useCurveEditorState(Ct=>Ct.removeBezierControlPoint),[St,Tt]=reactExports.useState({x:`${$.x}`,y:`${$.y}`,z:`${$.z}`});return reactExports.useEffect(()=>{lt(dt,new Vector3(parseFloat(St.x)||0,parseFloat(St.y)||0,parseFloat(St.z)||0))},[St]),reactExports.useEffect(()=>{Tt({x:`${$.x}`,y:`${$.y}`,z:`${$.z}`})},[$]),jsxs("div",{className:"flex items-center gap-2 p-2",children:[jsx("span",{children:`${dt+1}.`}),jsx(TextInput,{className:"text-center",value:St.x,onChange:Ct=>Tt(At=>({...At,x:Ct.target.value}))}),jsx(TextInput,{className:"text-center",value:St.y,onChange:Ct=>Tt(At=>({...At,y:Ct.target.value}))}),jsx(TextInput,{className:"text-center",value:St.z,onChange:Ct=>Tt(At=>({...At,z:Ct.target.value}))}),jsx("button",{onClick:()=>ft(dt),children:jsx(FontAwesomeIcon,{className:"text-blue-600",icon:faTrashCan})})]})},VectorEditor=({points:dt})=>jsx("div",{children:dt.map(($,lt)=>jsx(VectorEditorItem,{id:lt,point:$},lt))});function mergeRefs(dt){return function($){dt.forEach(function(lt){typeof lt=="function"?lt($):lt!=null&&(lt.current=$)})}}function clamp(dt,$,lt){return Math.max($,Math.min(dt,lt))}const V$1={toVector(dt,$){return dt===void 0&&(dt=$),Array.isArray(dt)?dt:[dt,dt]},add(dt,$){return[dt[0]+$[0],dt[1]+$[1]]},sub(dt,$){return[dt[0]-$[0],dt[1]-$[1]]},addTo(dt,$){dt[0]+=$[0],dt[1]+=$[1]},subTo(dt,$){dt[0]-=$[0],dt[1]-=$[1]}};function rubberband(dt,$,lt){return $===0||Math.abs($)===1/0?Math.pow(dt,lt*5):dt*$*lt/($+lt*dt)}function rubberbandIfOutOfBounds(dt,$,lt,ft=.15){return ft===0?clamp(dt,$,lt):dt<$?-rubberband($-dt,lt-$,ft)+$:dt>lt?+rubberband(dt-lt,lt-$,ft)+lt:dt}function computeRubberband(dt,[$,lt],[ft,St]){const[[Tt,Ct],[At,Rt]]=dt;return[rubberbandIfOutOfBounds($,Tt,Ct,ft),rubberbandIfOutOfBounds(lt,At,Rt,St)]}function _toPrimitive$1(dt,$){if(typeof dt!="object"||dt===null)return dt;var lt=dt[Symbol.toPrimitive];if(lt!==void 0){var ft=lt.call(dt,$||"default");if(typeof ft!="object")return ft;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(dt)}function _toPropertyKey$1(dt){var $=_toPrimitive$1(dt,"string");return typeof $=="symbol"?$:String($)}function _defineProperty$1(dt,$,lt){return $=_toPropertyKey$1($),$ in dt?Object.defineProperty(dt,$,{value:lt,enumerable:!0,configurable:!0,writable:!0}):dt[$]=lt,dt}function ownKeys(dt,$){var lt=Object.keys(dt);if(Object.getOwnPropertySymbols){var ft=Object.getOwnPropertySymbols(dt);$&&(ft=ft.filter(function(St){return Object.getOwnPropertyDescriptor(dt,St).enumerable})),lt.push.apply(lt,ft)}return lt}function _objectSpread2(dt){for(var $=1;$<arguments.length;$++){var lt=arguments[$]!=null?arguments[$]:{};$%2?ownKeys(Object(lt),!0).forEach(function(ft){_defineProperty$1(dt,ft,lt[ft])}):Object.getOwnPropertyDescriptors?Object.defineProperties(dt,Object.getOwnPropertyDescriptors(lt)):ownKeys(Object(lt)).forEach(function(ft){Object.defineProperty(dt,ft,Object.getOwnPropertyDescriptor(lt,ft))})}return dt}const EVENT_TYPE_MAP={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function capitalize(dt){return dt?dt[0].toUpperCase()+dt.slice(1):""}const actionsWithoutCaptureSupported=["enter","leave"];function hasCapture(dt=!1,$){return dt&&!actionsWithoutCaptureSupported.includes($)}function toHandlerProp(dt,$="",lt=!1){const ft=EVENT_TYPE_MAP[dt],St=ft&&ft[$]||$;return"on"+capitalize(dt)+capitalize(St)+(hasCapture(lt,St)?"Capture":"")}const pointerCaptureEvents=["gotpointercapture","lostpointercapture"];function parseProp(dt){let $=dt.substring(2).toLowerCase();const lt=!!~$.indexOf("passive");lt&&($=$.replace("passive",""));const ft=pointerCaptureEvents.includes($)?"capturecapture":"capture",St=!!~$.indexOf(ft);return St&&($=$.replace("capture","")),{device:$,capture:St,passive:lt}}function toDomEventType(dt,$=""){const lt=EVENT_TYPE_MAP[dt],ft=lt&&lt[$]||$;return dt+ft}function isTouch(dt){return"touches"in dt}function getPointerType(dt){return isTouch(dt)?"touch":"pointerType"in dt?dt.pointerType:"mouse"}function getCurrentTargetTouchList(dt){return Array.from(dt.touches).filter($=>{var lt,ft;return $.target===dt.currentTarget||((lt=dt.currentTarget)===null||lt===void 0||(ft=lt.contains)===null||ft===void 0?void 0:ft.call(lt,$.target))})}function getTouchList(dt){return dt.type==="touchend"||dt.type==="touchcancel"?dt.changedTouches:dt.targetTouches}function getValueEvent(dt){return isTouch(dt)?getTouchList(dt)[0]:dt}function distanceAngle(dt,$){const lt=$.clientX-dt.clientX,ft=$.clientY-dt.clientY,St=($.clientX+dt.clientX)/2,Tt=($.clientY+dt.clientY)/2,Ct=Math.hypot(lt,ft);return{angle:-(Math.atan2(lt,ft)*180)/Math.PI,distance:Ct,origin:[St,Tt]}}function touchIds(dt){return getCurrentTargetTouchList(dt).map($=>$.identifier)}function touchDistanceAngle(dt,$){const[lt,ft]=Array.from(dt.touches).filter(St=>$.includes(St.identifier));return distanceAngle(lt,ft)}function pointerId(dt){const $=getValueEvent(dt);return isTouch(dt)?$.identifier:$.pointerId}function pointerValues(dt){const $=getValueEvent(dt);return[$.clientX,$.clientY]}const LINE_HEIGHT=40,PAGE_HEIGHT=800;function wheelValues(dt){let{deltaX:$,deltaY:lt,deltaMode:ft}=dt;return ft===1?($*=LINE_HEIGHT,lt*=LINE_HEIGHT):ft===2&&($*=PAGE_HEIGHT,lt*=PAGE_HEIGHT),[$,lt]}function scrollValues(dt){var $,lt;const{scrollX:ft,scrollY:St,scrollLeft:Tt,scrollTop:Ct}=dt.currentTarget;return[($=ft??Tt)!==null&&$!==void 0?$:0,(lt=St??Ct)!==null&&lt!==void 0?lt:0]}function getEventDetails(dt){const $={};if("buttons"in dt&&($.buttons=dt.buttons),"shiftKey"in dt){const{shiftKey:lt,altKey:ft,metaKey:St,ctrlKey:Tt}=dt;Object.assign($,{shiftKey:lt,altKey:ft,metaKey:St,ctrlKey:Tt})}return $}function call(dt,...$){return typeof dt=="function"?dt(...$):dt}function noop(){}function chain(...dt){return dt.length===0?noop:dt.length===1?dt[0]:function(){let $;for(const lt of dt)$=lt.apply(this,arguments)||$;return $}}function assignDefault(dt,$){return Object.assign({},$,dt||{})}const BEFORE_LAST_KINEMATICS_DELAY=32;class Engine{constructor($,lt,ft){this.ctrl=$,this.args=lt,this.key=ft,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state($){this.ctrl.state[this.key]=$}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:$,shared:lt,ingKey:ft,args:St}=this;lt[ft]=$._active=$.active=$._blocked=$._force=!1,$._step=[!1,!1],$.intentional=!1,$._movement=[0,0],$._distance=[0,0],$._direction=[0,0],$._delta=[0,0],$._bounds=[[-1/0,1/0],[-1/0,1/0]],$.args=St,$.axis=void 0,$.memo=void 0,$.elapsedTime=0,$.direction=[0,0],$.distance=[0,0],$.overflow=[0,0],$._movementBound=[!1,!1],$.velocity=[0,0],$.movement=[0,0],$.delta=[0,0],$.timeStamp=0}start($){const lt=this.state,ft=this.config;lt._active||(this.reset(),this.computeInitial(),lt._active=!0,lt.target=$.target,lt.currentTarget=$.currentTarget,lt.lastOffset=ft.from?call(ft.from,lt):lt.offset,lt.offset=lt.lastOffset),lt.startTime=lt.timeStamp=$.timeStamp}computeValues($){const lt=this.state;lt._values=$,lt.values=this.config.transform($)}computeInitial(){const $=this.state;$._initial=$._values,$.initial=$.values}compute($){const{state:lt,config:ft,shared:St}=this;lt.args=this.args;let Tt=0;if($&&(lt.event=$,ft.preventDefault&&$.cancelable&&lt.event.preventDefault(),lt.type=$.type,St.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,St.locked=!!document.pointerLockElement,Object.assign(St,getEventDetails($)),St.down=St.pressed=St.buttons%2===1||St.touches>0,Tt=$.timeStamp-lt.timeStamp,lt.timeStamp=$.timeStamp,lt.elapsedTime=lt.timeStamp-lt.startTime),lt._active){const Tn=lt._delta.map(Math.abs);V$1.addTo(lt._distance,Tn)}this.axisIntent&&this.axisIntent($);const[Ct,At]=lt._movement,[Rt,kt]=ft.threshold,{_step:Nt,values:Bt}=lt;if(ft.hasCustomTransform?(Nt[0]===!1&&(Nt[0]=Math.abs(Ct)>=Rt&&Bt[0]),Nt[1]===!1&&(Nt[1]=Math.abs(At)>=kt&&Bt[1])):(Nt[0]===!1&&(Nt[0]=Math.abs(Ct)>=Rt&&Math.sign(Ct)*Rt),Nt[1]===!1&&(Nt[1]=Math.abs(At)>=kt&&Math.sign(At)*kt)),lt.intentional=Nt[0]!==!1||Nt[1]!==!1,!lt.intentional)return;const Ut=[0,0];if(ft.hasCustomTransform){const[Tn,Cn]=Bt;Ut[0]=Nt[0]!==!1?Tn-Nt[0]:0,Ut[1]=Nt[1]!==!1?Cn-Nt[1]:0}else Ut[0]=Nt[0]!==!1?Ct-Nt[0]:0,Ut[1]=Nt[1]!==!1?At-Nt[1]:0;this.restrictToAxis&&!lt._blocked&&this.restrictToAxis(Ut);const zt=lt.offset,Zt=lt._active&&!lt._blocked||lt.active;Zt&&(lt.first=lt._active&&!lt.active,lt.last=!lt._active&&lt.active,lt.active=St[this.ingKey]=lt._active,$&&(lt.first&&("bounds"in ft&&(lt._bounds=call(ft.bounds,lt)),this.setup&&this.setup()),lt.movement=Ut,this.computeOffset()));const[ln,cn]=lt.offset,[[hn,pn],[dn,gn]]=lt._bounds;lt.overflow=[ln<hn?-1:ln>pn?1:0,cn<dn?-1:cn>gn?1:0],lt._movementBound[0]=lt.overflow[0]?lt._movementBound[0]===!1?lt._movement[0]:lt._movementBound[0]:!1,lt._movementBound[1]=lt.overflow[1]?lt._movementBound[1]===!1?lt._movement[1]:lt._movementBound[1]:!1;const vn=lt._active?ft.rubberband||[0,0]:[0,0];if(lt.offset=computeRubberband(lt._bounds,lt.offset,vn),lt.delta=V$1.sub(lt.offset,zt),this.computeMovement(),Zt&&(!lt.last||Tt>BEFORE_LAST_KINEMATICS_DELAY)){lt.delta=V$1.sub(lt.offset,zt);const Tn=lt.delta.map(Math.abs);V$1.addTo(lt.distance,Tn),lt.direction=lt.delta.map(Math.sign),lt._direction=lt._delta.map(Math.sign),!lt.first&&Tt>0&&(lt.velocity=[Tn[0]/Tt,Tn[1]/Tt])}}emit(){const $=this.state,lt=this.shared,ft=this.config;if($._active||this.clean(),($._blocked||!$.intentional)&&!$._force&&!ft.triggerAllEvents)return;const St=this.handler(_objectSpread2(_objectSpread2(_objectSpread2({},lt),$),{},{[this.aliasKey]:$.values}));St!==void 0&&($.memo=St)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function selectAxis([dt,$],lt){const ft=Math.abs(dt),St=Math.abs($);if(ft>St&&ft>lt)return"x";if(St>ft&&St>lt)return"y"}class CoordinatesEngine extends Engine{constructor(...$){super(...$),_defineProperty$1(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=V$1.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=V$1.sub(this.state.offset,this.state.lastOffset)}axisIntent($){const lt=this.state,ft=this.config;if(!lt.axis&&$){const St=typeof ft.axisThreshold=="object"?ft.axisThreshold[getPointerType($)]:ft.axisThreshold;lt.axis=selectAxis(lt._movement,St)}lt._blocked=(ft.lockDirection||!!ft.axis)&&!lt.axis||!!ft.axis&&ft.axis!==lt.axis}restrictToAxis($){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":$[1]=0;break;case"y":$[0]=0;break}}}const identity=dt=>dt,DEFAULT_RUBBERBAND=.15,commonConfigResolver={enabled(dt=!0){return dt},eventOptions(dt,$,lt){return _objectSpread2(_objectSpread2({},lt.shared.eventOptions),dt)},preventDefault(dt=!1){return dt},triggerAllEvents(dt=!1){return dt},rubberband(dt=0){switch(dt){case!0:return[DEFAULT_RUBBERBAND,DEFAULT_RUBBERBAND];case!1:return[0,0];default:return V$1.toVector(dt)}},from(dt){if(typeof dt=="function")return dt;if(dt!=null)return V$1.toVector(dt)},transform(dt,$,lt){const ft=dt||lt.shared.transform;return this.hasCustomTransform=!!ft,ft||identity},threshold(dt){return V$1.toVector(dt,0)}},DEFAULT_AXIS_THRESHOLD=0,coordinatesConfigResolver=_objectSpread2(_objectSpread2({},commonConfigResolver),{},{axis(dt,$,{axis:lt}){if(this.lockDirection=lt==="lock",!this.lockDirection)return lt},axisThreshold(dt=DEFAULT_AXIS_THRESHOLD){return dt},bounds(dt={}){if(typeof dt=="function")return Tt=>coordinatesConfigResolver.bounds(dt(Tt));if("current"in dt)return()=>dt.current;if(typeof HTMLElement=="function"&&dt instanceof HTMLElement)return dt;const{left:$=-1/0,right:lt=1/0,top:ft=-1/0,bottom:St=1/0}=dt;return[[$,lt],[ft,St]]}}),KEYS_DELTA_MAP={ArrowRight:(dt,$=1)=>[dt*$,0],ArrowLeft:(dt,$=1)=>[-1*dt*$,0],ArrowUp:(dt,$=1)=>[0,-1*dt*$],ArrowDown:(dt,$=1)=>[0,dt*$]};class DragEngine extends CoordinatesEngine{constructor(...$){super(...$),_defineProperty$1(this,"ingKey","dragging")}reset(){super.reset();const $=this.state;$._pointerId=void 0,$._pointerActive=!1,$._keyboardActive=!1,$._preventScroll=!1,$._delayed=!1,$.swipe=[0,0],$.tap=!1,$.canceled=!1,$.cancel=this.cancel.bind(this)}setup(){const $=this.state;if($._bounds instanceof HTMLElement){const lt=$._bounds.getBoundingClientRect(),ft=$.currentTarget.getBoundingClientRect(),St={left:lt.left-ft.left+$.offset[0],right:lt.right-ft.right+$.offset[0],top:lt.top-ft.top+$.offset[1],bottom:lt.bottom-ft.bottom+$.offset[1]};$._bounds=coordinatesConfigResolver.bounds(St)}}cancel(){const $=this.state;$.canceled||($.canceled=!0,$._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown($){const lt=this.config,ft=this.state;if($.buttons!=null&&(Array.isArray(lt.pointerButtons)?!lt.pointerButtons.includes($.buttons):lt.pointerButtons!==-1&&lt.pointerButtons!==$.buttons))return;const St=this.ctrl.setEventIds($);lt.pointerCapture&&$.target.setPointerCapture($.pointerId),!(St&&St.size>1&&ft._pointerActive)&&(this.start($),this.setupPointer($),ft._pointerId=pointerId($),ft._pointerActive=!0,this.computeValues(pointerValues($)),this.computeInitial(),lt.preventScrollAxis&&getPointerType($)!=="mouse"?(ft._active=!1,this.setupScrollPrevention($)):lt.delay>0?(this.setupDelayTrigger($),lt.triggerAllEvents&&(this.compute($),this.emit())):this.startPointerDrag($))}startPointerDrag($){const lt=this.state;lt._active=!0,lt._preventScroll=!0,lt._delayed=!1,this.compute($),this.emit()}pointerMove($){const lt=this.state,ft=this.config;if(!lt._pointerActive||lt.type===$.type&&$.timeStamp===lt.timeStamp)return;const St=pointerId($);if(lt._pointerId!==void 0&&St!==lt._pointerId)return;const Tt=pointerValues($);if(document.pointerLockElement===$.target?lt._delta=[$.movementX,$.movementY]:(lt._delta=V$1.sub(Tt,lt._values),this.computeValues(Tt)),V$1.addTo(lt._movement,lt._delta),this.compute($),lt._delayed&&lt.intentional){this.timeoutStore.remove("dragDelay"),lt.active=!1,this.startPointerDrag($);return}if(ft.preventScrollAxis&&!lt._preventScroll)if(lt.axis)if(lt.axis===ft.preventScrollAxis||ft.preventScrollAxis==="xy"){lt._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag($);return}else return;this.emit()}pointerUp($){this.ctrl.setEventIds($);try{this.config.pointerCapture&&$.target.hasPointerCapture($.pointerId)&&$.target.releasePointerCapture($.pointerId)}catch{}const lt=this.state,ft=this.config;if(!lt._active||!lt._pointerActive)return;const St=pointerId($);if(lt._pointerId!==void 0&&St!==lt._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute($);const[Tt,Ct]=lt._distance;if(lt.tap=Tt<=ft.tapsThreshold&&Ct<=ft.tapsThreshold,lt.tap&&ft.filterTaps)lt._force=!0;else{const[At,Rt]=lt.direction,[kt,Nt]=lt.velocity,[Bt,Ut]=lt.movement,[zt,Zt]=ft.swipe.velocity,[ln,cn]=ft.swipe.distance,hn=ft.swipe.duration;lt.elapsedTime<hn&&(Math.abs(kt)>zt&&Math.abs(Bt)>ln&&(lt.swipe[0]=At),Math.abs(Nt)>Zt&&Math.abs(Ut)>cn&&(lt.swipe[1]=Rt))}this.emit()}pointerClick($){!this.state.tap&&$.detail>0&&($.preventDefault(),$.stopPropagation())}setupPointer($){const lt=this.config,ft=lt.device;lt.pointerLock&&$.currentTarget.requestPointerLock(),lt.pointerCapture||(this.eventStore.add(this.sharedConfig.window,ft,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,ft,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,ft,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll($){this.state._preventScroll&&$.cancelable&&$.preventDefault()}setupScrollPrevention($){this.state._preventScroll=!1,persistEvent($);const lt=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",lt),this.eventStore.add(this.sharedConfig.window,"touch","cancel",lt),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,$)}setupDelayTrigger($){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag($)},this.config.delay)}keyDown($){const lt=KEYS_DELTA_MAP[$.key];if(lt){const ft=this.state,St=$.shiftKey?10:$.altKey?.1:1;this.start($),ft._delta=lt(this.config.keyboardDisplacement,St),ft._keyboardActive=!0,V$1.addTo(ft._movement,ft._delta),this.compute($),this.emit()}}keyUp($){$.key in KEYS_DELTA_MAP&&(this.state._keyboardActive=!1,this.setActive(),this.compute($),this.emit())}bind($){const lt=this.config.device;$(lt,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&($(lt,"change",this.pointerMove.bind(this)),$(lt,"end",this.pointerUp.bind(this)),$(lt,"cancel",this.pointerUp.bind(this)),$("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&($("key","down",this.keyDown.bind(this)),$("key","up",this.keyUp.bind(this))),this.config.filterTaps&&$("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function persistEvent(dt){"persist"in dt&&typeof dt.persist=="function"&&dt.persist()}const isBrowser=typeof window<"u"&&window.document&&window.document.createElement;function supportsTouchEvents(){return isBrowser&&"ontouchstart"in window}function isTouchScreen(){return supportsTouchEvents()||isBrowser&&window.navigator.maxTouchPoints>1}function supportsPointerEvents(){return isBrowser&&"onpointerdown"in window}function supportsPointerLock(){return isBrowser&&"exitPointerLock"in window.document}function supportsGestureEvents(){try{return"constructor"in GestureEvent}catch{return!1}}const SUPPORT={isBrowser,gesture:supportsGestureEvents(),touch:isTouchScreen(),touchscreen:isTouchScreen(),pointer:supportsPointerEvents(),pointerLock:supportsPointerLock()},DEFAULT_PREVENT_SCROLL_DELAY=250,DEFAULT_DRAG_DELAY=180,DEFAULT_SWIPE_VELOCITY=.5,DEFAULT_SWIPE_DISTANCE=50,DEFAULT_SWIPE_DURATION=250,DEFAULT_KEYBOARD_DISPLACEMENT=10,DEFAULT_DRAG_AXIS_THRESHOLD={mouse:0,touch:0,pen:8},dragConfigResolver=_objectSpread2(_objectSpread2({},coordinatesConfigResolver),{},{device(dt,$,{pointer:{touch:lt=!1,lock:ft=!1,mouse:St=!1}={}}){return this.pointerLock=ft&&SUPPORT.pointerLock,SUPPORT.touch&&lt?"touch":this.pointerLock?"mouse":SUPPORT.pointer&&!St?"pointer":SUPPORT.touch?"touch":"mouse"},preventScrollAxis(dt,$,{preventScroll:lt}){if(this.preventScrollDelay=typeof lt=="number"?lt:lt||lt===void 0&&dt?DEFAULT_PREVENT_SCROLL_DELAY:void 0,!(!SUPPORT.touchscreen||lt===!1))return dt||(lt!==void 0?"y":void 0)},pointerCapture(dt,$,{pointer:{capture:lt=!0,buttons:ft=1,keys:St=!0}={}}){return this.pointerButtons=ft,this.keys=St,!this.pointerLock&&this.device==="pointer"&&lt},threshold(dt,$,{filterTaps:lt=!1,tapsThreshold:ft=3,axis:St=void 0}){const Tt=V$1.toVector(dt,lt?ft:St?1:0);return this.filterTaps=lt,this.tapsThreshold=ft,Tt},swipe({velocity:dt=DEFAULT_SWIPE_VELOCITY,distance:$=DEFAULT_SWIPE_DISTANCE,duration:lt=DEFAULT_SWIPE_DURATION}={}){return{velocity:this.transform(V$1.toVector(dt)),distance:this.transform(V$1.toVector($)),duration:lt}},delay(dt=0){switch(dt){case!0:return DEFAULT_DRAG_DELAY;case!1:return 0;default:return dt}},axisThreshold(dt){return dt?_objectSpread2(_objectSpread2({},DEFAULT_DRAG_AXIS_THRESHOLD),dt):DEFAULT_DRAG_AXIS_THRESHOLD},keyboardDisplacement(dt=DEFAULT_KEYBOARD_DISPLACEMENT){return dt}});function clampStateInternalMovementToBounds(dt){const[$,lt]=dt.overflow,[ft,St]=dt._delta,[Tt,Ct]=dt._direction;($<0&&ft>0&&Tt<0||$>0&&ft<0&&Tt>0)&&(dt._movement[0]=dt._movementBound[0]),(lt<0&&St>0&&Ct<0||lt>0&&St<0&&Ct>0)&&(dt._movement[1]=dt._movementBound[1])}const SCALE_ANGLE_RATIO_INTENT_DEG=30,PINCH_WHEEL_RATIO=100;class PinchEngine extends Engine{constructor(...$){super(...$),_defineProperty$1(this,"ingKey","pinching"),_defineProperty$1(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const $=this.state;$._touchIds=[],$.canceled=!1,$.cancel=this.cancel.bind(this),$.turns=0}computeOffset(){const{type:$,movement:lt,lastOffset:ft}=this.state;$==="wheel"?this.state.offset=V$1.add(lt,ft):this.state.offset=[(1+lt[0])*ft[0],lt[1]+ft[1]]}computeMovement(){const{offset:$,lastOffset:lt}=this.state;this.state.movement=[$[0]/lt[0],$[1]-lt[1]]}axisIntent(){const $=this.state,[lt,ft]=$._movement;if(!$.axis){const St=Math.abs(lt)*SCALE_ANGLE_RATIO_INTENT_DEG-Math.abs(ft);St<0?$.axis="angle":St>0&&($.axis="scale")}}restrictToAxis($){this.config.lockDirection&&(this.state.axis==="scale"?$[1]=0:this.state.axis==="angle"&&($[0]=0))}cancel(){const $=this.state;$.canceled||setTimeout(()=>{$.canceled=!0,$._active=!1,this.compute(),this.emit()},0)}touchStart($){this.ctrl.setEventIds($);const lt=this.state,ft=this.ctrl.touchIds;if(lt._active&&lt._touchIds.every(Tt=>ft.has(Tt))||ft.size<2)return;this.start($),lt._touchIds=Array.from(ft).slice(0,2);const St=touchDistanceAngle($,lt._touchIds);this.pinchStart($,St)}pointerStart($){if($.buttons!=null&&$.buttons%2!==1)return;this.ctrl.setEventIds($),$.target.setPointerCapture($.pointerId);const lt=this.state,ft=lt._pointerEvents,St=this.ctrl.pointerIds;if(lt._active&&Array.from(ft.keys()).every(Ct=>St.has(Ct))||(ft.size<2&&ft.set($.pointerId,$),lt._pointerEvents.size<2))return;this.start($);const Tt=distanceAngle(...Array.from(ft.values()));this.pinchStart($,Tt)}pinchStart($,lt){const ft=this.state;ft.origin=lt.origin,this.computeValues([lt.distance,lt.angle]),this.computeInitial(),this.compute($),this.emit()}touchMove($){if(!this.state._active)return;const lt=touchDistanceAngle($,this.state._touchIds);this.pinchMove($,lt)}pointerMove($){const lt=this.state._pointerEvents;if(lt.has($.pointerId)&&lt.set($.pointerId,$),!this.state._active)return;const ft=distanceAngle(...Array.from(lt.values()));this.pinchMove($,ft)}pinchMove($,lt){const ft=this.state,St=ft._values[1],Tt=lt.angle-St;let Ct=0;Math.abs(Tt)>270&&(Ct+=Math.sign(Tt)),this.computeValues([lt.distance,lt.angle-360*Ct]),ft.origin=lt.origin,ft.turns=Ct,ft._movement=[ft._values[0]/ft._initial[0]-1,ft._values[1]-ft._initial[1]],this.compute($),this.emit()}touchEnd($){this.ctrl.setEventIds($),this.state._active&&this.state._touchIds.some(lt=>!this.ctrl.touchIds.has(lt))&&(this.state._active=!1,this.compute($),this.emit())}pointerEnd($){const lt=this.state;this.ctrl.setEventIds($);try{$.target.releasePointerCapture($.pointerId)}catch{}lt._pointerEvents.has($.pointerId)&&lt._pointerEvents.delete($.pointerId),lt._active&&lt._pointerEvents.size<2&&(lt._active=!1,this.compute($),this.emit())}gestureStart($){$.cancelable&&$.preventDefault();const lt=this.state;lt._active||(this.start($),this.computeValues([$.scale,$.rotation]),lt.origin=[$.clientX,$.clientY],this.compute($),this.emit())}gestureMove($){if($.cancelable&&$.preventDefault(),!this.state._active)return;const lt=this.state;this.computeValues([$.scale,$.rotation]),lt.origin=[$.clientX,$.clientY];const ft=lt._movement;lt._movement=[$.scale-1,$.rotation],lt._delta=V$1.sub(lt._movement,ft),this.compute($),this.emit()}gestureEnd($){this.state._active&&(this.state._active=!1,this.compute($),this.emit())}wheel($){const lt=this.config.modifierKey;lt&&!$[lt]||(this.state._active?this.wheelChange($):this.wheelStart($),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart($){this.start($),this.wheelChange($)}wheelChange($){"uv"in $||$.cancelable&&$.preventDefault();const ft=this.state;ft._delta=[-wheelValues($)[1]/PINCH_WHEEL_RATIO*ft.offset[0],0],V$1.addTo(ft._movement,ft._delta),clampStateInternalMovementToBounds(ft),this.state.origin=[$.clientX,$.clientY],this.compute($),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind($){const lt=this.config.device;lt&&($(lt,"start",this[lt+"Start"].bind(this)),$(lt,"change",this[lt+"Move"].bind(this)),$(lt,"end",this[lt+"End"].bind(this)),$(lt,"cancel",this[lt+"End"].bind(this))),this.config.pinchOnWheel&&$("wheel","",this.wheel.bind(this),{passive:!1})}}const pinchConfigResolver=_objectSpread2(_objectSpread2({},commonConfigResolver),{},{device(dt,$,{shared:lt,pointer:{touch:ft=!1}={}}){if(lt.target&&!SUPPORT.touch&&SUPPORT.gesture)return"gesture";if(SUPPORT.touch&&ft)return"touch";if(SUPPORT.touchscreen){if(SUPPORT.pointer)return"pointer";if(SUPPORT.touch)return"touch"}},bounds(dt,$,{scaleBounds:lt={},angleBounds:ft={}}){const St=Ct=>{const At=assignDefault(call(lt,Ct),{min:-1/0,max:1/0});return[At.min,At.max]},Tt=Ct=>{const At=assignDefault(call(ft,Ct),{min:-1/0,max:1/0});return[At.min,At.max]};return typeof lt!="function"&&typeof ft!="function"?[St(),Tt()]:Ct=>[St(Ct),Tt(Ct)]},threshold(dt,$,lt){return this.lockDirection=lt.axis==="lock",V$1.toVector(dt,this.lockDirection?[.1,3]:0)},modifierKey(dt){return dt===void 0?"ctrlKey":dt},pinchOnWheel(dt=!0){return dt}});class MoveEngine extends CoordinatesEngine{constructor(...$){super(...$),_defineProperty$1(this,"ingKey","moving")}move($){this.config.mouseOnly&&$.pointerType!=="mouse"||(this.state._active?this.moveChange($):this.moveStart($),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart($){this.start($),this.computeValues(pointerValues($)),this.compute($),this.computeInitial(),this.emit()}moveChange($){if(!this.state._active)return;const lt=pointerValues($),ft=this.state;ft._delta=V$1.sub(lt,ft._values),V$1.addTo(ft._movement,ft._delta),this.computeValues(lt),this.compute($),this.emit()}moveEnd($){this.state._active&&(this.state._active=!1,this.compute($),this.emit())}bind($){$("pointer","change",this.move.bind(this)),$("pointer","leave",this.moveEnd.bind(this))}}const moveConfigResolver=_objectSpread2(_objectSpread2({},coordinatesConfigResolver),{},{mouseOnly:(dt=!0)=>dt});class ScrollEngine extends CoordinatesEngine{constructor(...$){super(...$),_defineProperty$1(this,"ingKey","scrolling")}scroll($){this.state._active||this.start($),this.scrollChange($),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange($){$.cancelable&&$.preventDefault();const lt=this.state,ft=scrollValues($);lt._delta=V$1.sub(ft,lt._values),V$1.addTo(lt._movement,lt._delta),this.computeValues(ft),this.compute($),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind($){$("scroll","",this.scroll.bind(this))}}const scrollConfigResolver=coordinatesConfigResolver;class WheelEngine extends CoordinatesEngine{constructor(...$){super(...$),_defineProperty$1(this,"ingKey","wheeling")}wheel($){this.state._active||this.start($),this.wheelChange($),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange($){const lt=this.state;lt._delta=wheelValues($),V$1.addTo(lt._movement,lt._delta),clampStateInternalMovementToBounds(lt),this.compute($),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind($){$("wheel","",this.wheel.bind(this))}}const wheelConfigResolver=coordinatesConfigResolver;class HoverEngine extends CoordinatesEngine{constructor(...$){super(...$),_defineProperty$1(this,"ingKey","hovering")}enter($){this.config.mouseOnly&&$.pointerType!=="mouse"||(this.start($),this.computeValues(pointerValues($)),this.compute($),this.emit())}leave($){if(this.config.mouseOnly&&$.pointerType!=="mouse")return;const lt=this.state;if(!lt._active)return;lt._active=!1;const ft=pointerValues($);lt._movement=lt._delta=V$1.sub(ft,lt._values),this.computeValues(ft),this.compute($),lt.delta=lt.movement,this.emit()}bind($){$("pointer","enter",this.enter.bind(this)),$("pointer","leave",this.leave.bind(this))}}const hoverConfigResolver=_objectSpread2(_objectSpread2({},coordinatesConfigResolver),{},{mouseOnly:(dt=!0)=>dt}),EngineMap=new Map,ConfigResolverMap=new Map;function registerAction(dt){EngineMap.set(dt.key,dt.engine),ConfigResolverMap.set(dt.key,dt.resolver)}const dragAction={key:"drag",engine:DragEngine,resolver:dragConfigResolver},hoverAction={key:"hover",engine:HoverEngine,resolver:hoverConfigResolver},moveAction={key:"move",engine:MoveEngine,resolver:moveConfigResolver},pinchAction={key:"pinch",engine:PinchEngine,resolver:pinchConfigResolver},scrollAction={key:"scroll",engine:ScrollEngine,resolver:scrollConfigResolver},wheelAction={key:"wheel",engine:WheelEngine,resolver:wheelConfigResolver};function _objectWithoutPropertiesLoose$1(dt,$){if(dt==null)return{};var lt={},ft=Object.keys(dt),St,Tt;for(Tt=0;Tt<ft.length;Tt++)St=ft[Tt],!($.indexOf(St)>=0)&&(lt[St]=dt[St]);return lt}function _objectWithoutProperties(dt,$){if(dt==null)return{};var lt=_objectWithoutPropertiesLoose$1(dt,$),ft,St;if(Object.getOwnPropertySymbols){var Tt=Object.getOwnPropertySymbols(dt);for(St=0;St<Tt.length;St++)ft=Tt[St],!($.indexOf(ft)>=0)&&Object.prototype.propertyIsEnumerable.call(dt,ft)&&(lt[ft]=dt[ft])}return lt}const sharedConfigResolver={target(dt){if(dt)return()=>"current"in dt?dt.current:dt},enabled(dt=!0){return dt},window(dt=SUPPORT.isBrowser?window:void 0){return dt},eventOptions({passive:dt=!0,capture:$=!1}={}){return{passive:dt,capture:$}},transform(dt){return dt}},_excluded$1=["target","eventOptions","window","enabled","transform"];function resolveWith(dt={},$){const lt={};for(const[ft,St]of Object.entries($))switch(typeof St){case"function":lt[ft]=St.call(lt,dt[ft],ft,dt);break;case"object":lt[ft]=resolveWith(dt[ft],St);break;case"boolean":St&&(lt[ft]=dt[ft]);break}return lt}function parse(dt,$,lt={}){const ft=dt,{target:St,eventOptions:Tt,window:Ct,enabled:At,transform:Rt}=ft,kt=_objectWithoutProperties(ft,_excluded$1);if(lt.shared=resolveWith({target:St,eventOptions:Tt,window:Ct,enabled:At,transform:Rt},sharedConfigResolver),$){const Nt=ConfigResolverMap.get($);lt[$]=resolveWith(_objectSpread2({shared:lt.shared},kt),Nt)}else for(const Nt in kt){const Bt=ConfigResolverMap.get(Nt);Bt&&(lt[Nt]=resolveWith(_objectSpread2({shared:lt.shared},kt[Nt]),Bt))}return lt}class EventStore{constructor($,lt){_defineProperty$1(this,"_listeners",new Set),this._ctrl=$,this._gestureKey=lt}add($,lt,ft,St,Tt){const Ct=this._listeners,At=toDomEventType(lt,ft),Rt=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},kt=_objectSpread2(_objectSpread2({},Rt),Tt);$.addEventListener(At,St,kt);const Nt=()=>{$.removeEventListener(At,St,kt),Ct.delete(Nt)};return Ct.add(Nt),Nt}clean(){this._listeners.forEach($=>$()),this._listeners.clear()}}class TimeoutStore{constructor(){_defineProperty$1(this,"_timeouts",new Map)}add($,lt,ft=140,...St){this.remove($),this._timeouts.set($,window.setTimeout(lt,ft,...St))}remove($){const lt=this._timeouts.get($);lt&&window.clearTimeout(lt)}clean(){this._timeouts.forEach($=>void window.clearTimeout($)),this._timeouts.clear()}}class Controller{constructor($){_defineProperty$1(this,"gestures",new Set),_defineProperty$1(this,"_targetEventStore",new EventStore(this)),_defineProperty$1(this,"gestureEventStores",{}),_defineProperty$1(this,"gestureTimeoutStores",{}),_defineProperty$1(this,"handlers",{}),_defineProperty$1(this,"config",{}),_defineProperty$1(this,"pointerIds",new Set),_defineProperty$1(this,"touchIds",new Set),_defineProperty$1(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),resolveGestures(this,$)}setEventIds($){if(isTouch($))return this.touchIds=new Set(touchIds($)),this.touchIds;if("pointerId"in $)return $.type==="pointerup"||$.type==="pointercancel"?this.pointerIds.delete($.pointerId):$.type==="pointerdown"&&this.pointerIds.add($.pointerId),this.pointerIds}applyHandlers($,lt){this.handlers=$,this.nativeHandlers=lt}applyConfig($,lt){this.config=parse($,lt,this.config)}clean(){this._targetEventStore.clean();for(const $ of this.gestures)this.gestureEventStores[$].clean(),this.gestureTimeoutStores[$].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...$){const lt=this.config.shared,ft={};let St;if(!(lt.target&&(St=lt.target(),!St))){if(lt.enabled){for(const Ct of this.gestures){const At=this.config[Ct],Rt=bindToProps(ft,At.eventOptions,!!St);if(At.enabled){const kt=EngineMap.get(Ct);new kt(this,$,Ct).bind(Rt)}}const Tt=bindToProps(ft,lt.eventOptions,!!St);for(const Ct in this.nativeHandlers)Tt(Ct,"",At=>this.nativeHandlers[Ct](_objectSpread2(_objectSpread2({},this.state.shared),{},{event:At,args:$})),void 0,!0)}for(const Tt in ft)ft[Tt]=chain(...ft[Tt]);if(!St)return ft;for(const Tt in ft){const{device:Ct,capture:At,passive:Rt}=parseProp(Tt);this._targetEventStore.add(St,Ct,"",ft[Tt],{capture:At,passive:Rt})}}}}function setupGesture(dt,$){dt.gestures.add($),dt.gestureEventStores[$]=new EventStore(dt,$),dt.gestureTimeoutStores[$]=new TimeoutStore}function resolveGestures(dt,$){$.drag&&setupGesture(dt,"drag"),$.wheel&&setupGesture(dt,"wheel"),$.scroll&&setupGesture(dt,"scroll"),$.move&&setupGesture(dt,"move"),$.pinch&&setupGesture(dt,"pinch"),$.hover&&setupGesture(dt,"hover")}const bindToProps=(dt,$,lt)=>(ft,St,Tt,Ct={},At=!1)=>{var Rt,kt;const Nt=(Rt=Ct.capture)!==null&&Rt!==void 0?Rt:$.capture,Bt=(kt=Ct.passive)!==null&&kt!==void 0?kt:$.passive;let Ut=At?ft:toHandlerProp(ft,St,Nt);lt&&Bt&&(Ut+="Passive"),dt[Ut]=dt[Ut]||[],dt[Ut].push(Tt)},RE_NOT_NATIVE=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function sortHandlers(dt){const $={},lt={},ft=new Set;for(let St in dt)RE_NOT_NATIVE.test(St)?(ft.add(RegExp.lastMatch),lt[St]=dt[St]):$[St]=dt[St];return[lt,$,ft]}function registerGesture(dt,$,lt,ft,St,Tt){if(!dt.has(lt)||!EngineMap.has(ft))return;const Ct=lt+"Start",At=lt+"End",Rt=kt=>{let Nt;return kt.first&&Ct in $&&$[Ct](kt),lt in $&&(Nt=$[lt](kt)),kt.last&&At in $&&$[At](kt),Nt};St[ft]=Rt,Tt[ft]=Tt[ft]||{}}function parseMergedHandlers(dt,$){const[lt,ft,St]=sortHandlers(dt),Tt={};return registerGesture(St,lt,"onDrag","drag",Tt,$),registerGesture(St,lt,"onWheel","wheel",Tt,$),registerGesture(St,lt,"onScroll","scroll",Tt,$),registerGesture(St,lt,"onPinch","pinch",Tt,$),registerGesture(St,lt,"onMove","move",Tt,$),registerGesture(St,lt,"onHover","hover",Tt,$),{handlers:Tt,config:$,nativeHandlers:ft}}function useRecognizers(dt,$={},lt,ft){const St=React.useMemo(()=>new Controller(dt),[]);if(St.applyHandlers(dt,ft),St.applyConfig($,lt),React.useEffect(St.effect.bind(St)),React.useEffect(()=>St.clean.bind(St),[]),$.target===void 0)return St.bind.bind(St)}function useDrag(dt,$){return registerAction(dragAction),useRecognizers({drag:dt},$||{},"drag")}function createUseGesture(dt){return dt.forEach(registerAction),function(lt,ft){const{handlers:St,nativeHandlers:Tt,config:Ct}=parseMergedHandlers(lt,ft||{});return useRecognizers(St,Ct,void 0,Tt)}}function useGesture(dt,$){return createUseGesture([dragAction,pinchAction,scrollAction,wheelAction,moveAction,hoverAction])(dt,$||{})}function _typeof(dt){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof(dt)}function _toPrimitive(dt,$){if(_typeof(dt)!=="object"||dt===null)return dt;var lt=dt[Symbol.toPrimitive];if(lt!==void 0){var ft=lt.call(dt,$||"default");if(_typeof(ft)!=="object")return ft;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(dt)}function _toPropertyKey(dt){var $=_toPrimitive(dt,"string");return _typeof($)==="symbol"?$:String($)}function _defineProperty(dt,$,lt){return $=_toPropertyKey($),$ in dt?Object.defineProperty(dt,$,{value:lt,enumerable:!0,configurable:!0,writable:!0}):dt[$]=lt,dt}let Sky$1=class WE extends Mesh{constructor(){super(new BoxGeometry(1,1,1),WE.material)}};_defineProperty(Sky$1,"SkyShader",{uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new Vector3},up:{value:new Vector3(0,1,0)}},vertexShader:["uniform vec3 sunPosition;","uniform float rayleigh;","uniform float turbidity;","uniform float mieCoefficient;","uniform vec3 up;","varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","const float e = 2.71828182845904523536028747135266249775724709369995957;","const float pi = 3.141592653589793238462643383279502884197169;","const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );","const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );","const float v = 4.0;","const vec3 K = vec3( 0.686, 0.678, 0.666 );","const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );","const float cutoffAngle = 1.6110731556870734;","const float steepness = 1.5;","const float EE = 1000.0;","float sunIntensity( float zenithAngleCos ) {","	zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );","	return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );","}","vec3 totalMie( float T ) {","	float c = ( 0.2 * T ) * 10E-18;","	return 0.434 * c * MieConst;","}","void main() {","	vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","	vWorldPosition = worldPosition.xyz;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","	gl_Position.z = gl_Position.w;","	vSunDirection = normalize( sunPosition );","	vSunE = sunIntensity( dot( vSunDirection, up ) );","	vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );","	float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );","	vBetaR = totalRayleigh * rayleighCoefficient;","	vBetaM = totalMie( turbidity ) * mieCoefficient;","}"].join(`
`),fragmentShader:["varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","uniform float mieDirectionalG;","uniform vec3 up;","const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );","const float pi = 3.141592653589793238462643383279502884197169;","const float n = 1.0003;","const float N = 2.545E25;","const float rayleighZenithLength = 8.4E3;","const float mieZenithLength = 1.25E3;","const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;","const float THREE_OVER_SIXTEENPI = 0.05968310365946075;","const float ONE_OVER_FOURPI = 0.07957747154594767;","float rayleighPhase( float cosTheta ) {","	return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );","}","float hgPhase( float cosTheta, float g ) {","	float g2 = pow( g, 2.0 );","	float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );","	return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );","}","void main() {","	vec3 direction = normalize( vWorldPosition - cameraPos );","	float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );","	float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );","	float sR = rayleighZenithLength * inverse;","	float sM = mieZenithLength * inverse;","	vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );","	float cosTheta = dot( direction, vSunDirection );","	float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );","	vec3 betaRTheta = vBetaR * rPhase;","	float mPhase = hgPhase( cosTheta, mieDirectionalG );","	vec3 betaMTheta = vBetaM * mPhase;","	vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );","	Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );","	float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]","	float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]","	vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );","	vec3 L0 = vec3( 0.1 ) * Fex;","	float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );","	L0 += ( vSunE * 19000.0 * Fex ) * sundisk;","	vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );","	vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );","	gl_FragColor = vec4( retColor, 1.0 );","#include <tonemapping_fragment>","#include <encodings_fragment>","}"].join(`
`)});_defineProperty(Sky$1,"material",new ShaderMaterial({name:"SkyShader",fragmentShader:Sky$1.SkyShader.fragmentShader,vertexShader:Sky$1.SkyShader.vertexShader,uniforms:UniformsUtils.clone(Sky$1.SkyShader.uniforms),side:BackSide,depthWrite:!1}));const isCubeTexture=dt=>dt&&dt.isCubeTexture;class GroundProjectedEnv extends Mesh{constructor($,lt){var ft,St;const Tt=isCubeTexture($),At=((ft=Tt?(St=$.image[0])===null||St===void 0?void 0:St.width:$.image.width)!=null?ft:1024)/4,Rt=Math.floor(Math.log2(At)),kt=Math.pow(2,Rt),Nt=3*Math.max(kt,16*7),Bt=4*kt,Ut=[Tt?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/Nt}`,`#define CUBEUV_TEXEL_HEIGHT ${1/Bt}`,`#define CUBEUV_MAX_MIP ${Rt}.0`],zt=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,Zt=Ut.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <encodings_fragment>
        }
        `,ln={map:{value:$},height:{value:(lt==null?void 0:lt.height)||15},radius:{value:(lt==null?void 0:lt.radius)||100}},cn=new IcosahedronGeometry(1,16),hn=new ShaderMaterial({uniforms:ln,fragmentShader:Zt,vertexShader:zt,side:DoubleSide});super(cn,hn)}set radius($){this.material.uniforms.radius.value=$}get radius(){return this.material.uniforms.radius.value}set height($){this.material.uniforms.height.value=$}get height(){return this.material.uniforms.height.value}}const moduloWrapAround=(dt,$)=>(dt%$+$)%$;let OrbitControls$1=class extends EventDispatcher{constructor($,lt){super(),_defineProperty(this,"object",void 0),_defineProperty(this,"domElement",void 0),_defineProperty(this,"enabled",!0),_defineProperty(this,"target",new Vector3),_defineProperty(this,"minDistance",0),_defineProperty(this,"maxDistance",1/0),_defineProperty(this,"minZoom",0),_defineProperty(this,"maxZoom",1/0),_defineProperty(this,"minPolarAngle",0),_defineProperty(this,"maxPolarAngle",Math.PI),_defineProperty(this,"minAzimuthAngle",-1/0),_defineProperty(this,"maxAzimuthAngle",1/0),_defineProperty(this,"enableDamping",!1),_defineProperty(this,"dampingFactor",.05),_defineProperty(this,"enableZoom",!0),_defineProperty(this,"zoomSpeed",1),_defineProperty(this,"enableRotate",!0),_defineProperty(this,"rotateSpeed",1),_defineProperty(this,"enablePan",!0),_defineProperty(this,"panSpeed",1),_defineProperty(this,"screenSpacePanning",!0),_defineProperty(this,"keyPanSpeed",7),_defineProperty(this,"autoRotate",!1),_defineProperty(this,"autoRotateSpeed",2),_defineProperty(this,"reverseOrbit",!1),_defineProperty(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),_defineProperty(this,"mouseButtons",{LEFT:MOUSE.ROTATE,MIDDLE:MOUSE.DOLLY,RIGHT:MOUSE.PAN}),_defineProperty(this,"touches",{ONE:TOUCH.ROTATE,TWO:TOUCH.DOLLY_PAN}),_defineProperty(this,"target0",void 0),_defineProperty(this,"position0",void 0),_defineProperty(this,"zoom0",void 0),_defineProperty(this,"_domElementKeyEvents",null),_defineProperty(this,"getPolarAngle",void 0),_defineProperty(this,"getAzimuthalAngle",void 0),_defineProperty(this,"setPolarAngle",void 0),_defineProperty(this,"setAzimuthalAngle",void 0),_defineProperty(this,"getDistance",void 0),_defineProperty(this,"listenToKeyEvents",void 0),_defineProperty(this,"saveState",void 0),_defineProperty(this,"reset",void 0),_defineProperty(this,"update",void 0),_defineProperty(this,"connect",void 0),_defineProperty(this,"dispose",void 0),this.object=$,this.domElement=lt,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object instanceof PerspectiveCamera?this.object.zoom:1,this.getPolarAngle=()=>Nt.phi,this.getAzimuthalAngle=()=>Nt.theta,this.setPolarAngle=Kn=>{let Sr=moduloWrapAround(Kn,2*Math.PI),Dr=Nt.phi;Dr<0&&(Dr+=2*Math.PI),Sr<0&&(Sr+=2*Math.PI);let En=Math.abs(Sr-Dr);2*Math.PI-En<En&&(Sr<Dr?Sr+=2*Math.PI:Dr+=2*Math.PI),Bt.phi=Sr-Dr,ft.update()},this.setAzimuthalAngle=Kn=>{let Sr=moduloWrapAround(Kn,2*Math.PI),Dr=Nt.theta;Dr<0&&(Dr+=2*Math.PI),Sr<0&&(Sr+=2*Math.PI);let En=Math.abs(Sr-Dr);2*Math.PI-En<En&&(Sr<Dr?Sr+=2*Math.PI:Dr+=2*Math.PI),Bt.theta=Sr-Dr,ft.update()},this.getDistance=()=>ft.object.position.distanceTo(ft.target),this.listenToKeyEvents=Kn=>{Kn.addEventListener("keydown",rr),this._domElementKeyEvents=Kn},this.saveState=()=>{ft.target0.copy(ft.target),ft.position0.copy(ft.object.position),ft.zoom0=ft.object instanceof PerspectiveCamera?ft.object.zoom:1},this.reset=()=>{ft.target.copy(ft.target0),ft.object.position.copy(ft.position0),ft.object instanceof PerspectiveCamera&&(ft.object.zoom=ft.zoom0,ft.object.updateProjectionMatrix()),ft.dispatchEvent(St),ft.update(),Rt=At.NONE},this.update=(()=>{const Kn=new Vector3,Sr=new Quaternion().setFromUnitVectors($.up,new Vector3(0,1,0)),Dr=Sr.clone().invert(),En=new Vector3,Dn=new Quaternion,Zn=2*Math.PI;return function(){const Bn=ft.object.position;Kn.copy(Bn).sub(ft.target),Kn.applyQuaternion(Sr),Nt.setFromVector3(Kn),ft.autoRotate&&Rt===At.NONE&&Nn(Rn()),ft.enableDamping?(Nt.theta+=Bt.theta*ft.dampingFactor,Nt.phi+=Bt.phi*ft.dampingFactor):(Nt.theta+=Bt.theta,Nt.phi+=Bt.phi);let hr=ft.minAzimuthAngle,Nr=ft.maxAzimuthAngle;return isFinite(hr)&&isFinite(Nr)&&(hr<-Math.PI?hr+=Zn:hr>Math.PI&&(hr-=Zn),Nr<-Math.PI?Nr+=Zn:Nr>Math.PI&&(Nr-=Zn),hr<=Nr?Nt.theta=Math.max(hr,Math.min(Nr,Nt.theta)):Nt.theta=Nt.theta>(hr+Nr)/2?Math.max(hr,Nt.theta):Math.min(Nr,Nt.theta)),Nt.phi=Math.max(ft.minPolarAngle,Math.min(ft.maxPolarAngle,Nt.phi)),Nt.makeSafe(),Nt.radius*=Ut,Nt.radius=Math.max(ft.minDistance,Math.min(ft.maxDistance,Nt.radius)),ft.enableDamping===!0?ft.target.addScaledVector(zt,ft.dampingFactor):ft.target.add(zt),Kn.setFromSpherical(Nt),Kn.applyQuaternion(Dr),Bn.copy(ft.target).add(Kn),ft.object.lookAt(ft.target),ft.enableDamping===!0?(Bt.theta*=1-ft.dampingFactor,Bt.phi*=1-ft.dampingFactor,zt.multiplyScalar(1-ft.dampingFactor)):(Bt.set(0,0,0),zt.set(0,0,0)),Ut=1,Zt||En.distanceToSquared(ft.object.position)>kt||8*(1-Dn.dot(ft.object.quaternion))>kt?(ft.dispatchEvent(St),En.copy(ft.object.position),Dn.copy(ft.object.quaternion),Zt=!1,!0):!1}})(),this.connect=Kn=>{Kn===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),ft.domElement=Kn,ft.domElement.style.touchAction="none",ft.domElement.addEventListener("contextmenu",Br),ft.domElement.addEventListener("pointerdown",to),ft.domElement.addEventListener("pointercancel",Mo),ft.domElement.addEventListener("wheel",Gn)},this.dispose=()=>{var Kn,Sr,Dr,En,Dn,Zn;(Kn=ft.domElement)===null||Kn===void 0||Kn.removeEventListener("contextmenu",Br),(Sr=ft.domElement)===null||Sr===void 0||Sr.removeEventListener("pointerdown",to),(Dr=ft.domElement)===null||Dr===void 0||Dr.removeEventListener("pointercancel",Mo),(En=ft.domElement)===null||En===void 0||En.removeEventListener("wheel",Gn),(Dn=ft.domElement)===null||Dn===void 0||Dn.ownerDocument.removeEventListener("pointermove",co),(Zn=ft.domElement)===null||Zn===void 0||Zn.ownerDocument.removeEventListener("pointerup",uo),ft._domElementKeyEvents!==null&&ft._domElementKeyEvents.removeEventListener("keydown",rr)};const ft=this,St={type:"change"},Tt={type:"start"},Ct={type:"end"},At={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let Rt=At.NONE;const kt=1e-6,Nt=new Spherical,Bt=new Spherical;let Ut=1;const zt=new Vector3;let Zt=!1;const ln=new Vector2,cn=new Vector2,hn=new Vector2,pn=new Vector2,dn=new Vector2,gn=new Vector2,vn=new Vector2,Tn=new Vector2,Cn=new Vector2,$n=[],xn={};function Rn(){return 2*Math.PI/60/60*ft.autoRotateSpeed}function Pn(){return Math.pow(.95,ft.zoomSpeed)}function Nn(Kn){ft.reverseOrbit?Bt.theta+=Kn:Bt.theta-=Kn}function Wn(Kn){ft.reverseOrbit?Bt.phi+=Kn:Bt.phi-=Kn}const zn=(()=>{const Kn=new Vector3;return function(Dr,En){Kn.setFromMatrixColumn(En,0),Kn.multiplyScalar(-Dr),zt.add(Kn)}})(),Yn=(()=>{const Kn=new Vector3;return function(Dr,En){ft.screenSpacePanning===!0?Kn.setFromMatrixColumn(En,1):(Kn.setFromMatrixColumn(En,0),Kn.crossVectors(ft.object.up,Kn)),Kn.multiplyScalar(Dr),zt.add(Kn)}})(),Qn=(()=>{const Kn=new Vector3;return function(Dr,En){const Dn=ft.domElement;if(Dn&&ft.object instanceof PerspectiveCamera&&ft.object.isPerspectiveCamera){const Zn=ft.object.position;Kn.copy(Zn).sub(ft.target);let ur=Kn.length();ur*=Math.tan(ft.object.fov/2*Math.PI/180),zn(2*Dr*ur/Dn.clientHeight,ft.object.matrix),Yn(2*En*ur/Dn.clientHeight,ft.object.matrix)}else Dn&&ft.object instanceof OrthographicCamera$1&&ft.object.isOrthographicCamera?(zn(Dr*(ft.object.right-ft.object.left)/ft.object.zoom/Dn.clientWidth,ft.object.matrix),Yn(En*(ft.object.top-ft.object.bottom)/ft.object.zoom/Dn.clientHeight,ft.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),ft.enablePan=!1)}})();function nr(Kn){ft.object instanceof PerspectiveCamera&&ft.object.isPerspectiveCamera?Ut/=Kn:ft.object instanceof OrthographicCamera$1&&ft.object.isOrthographicCamera?(ft.object.zoom=Math.max(ft.minZoom,Math.min(ft.maxZoom,ft.object.zoom*Kn)),ft.object.updateProjectionMatrix(),Zt=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),ft.enableZoom=!1)}function Ln(Kn){ft.object instanceof PerspectiveCamera&&ft.object.isPerspectiveCamera?Ut*=Kn:ft.object instanceof OrthographicCamera$1&&ft.object.isOrthographicCamera?(ft.object.zoom=Math.max(ft.minZoom,Math.min(ft.maxZoom,ft.object.zoom/Kn)),ft.object.updateProjectionMatrix(),Zt=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),ft.enableZoom=!1)}function Un(Kn){ln.set(Kn.clientX,Kn.clientY)}function Vn(Kn){vn.set(Kn.clientX,Kn.clientY)}function sr(Kn){pn.set(Kn.clientX,Kn.clientY)}function In(Kn){cn.set(Kn.clientX,Kn.clientY),hn.subVectors(cn,ln).multiplyScalar(ft.rotateSpeed);const Sr=ft.domElement;Sr&&(Nn(2*Math.PI*hn.x/Sr.clientHeight),Wn(2*Math.PI*hn.y/Sr.clientHeight)),ln.copy(cn),ft.update()}function ir(Kn){Tn.set(Kn.clientX,Kn.clientY),Cn.subVectors(Tn,vn),Cn.y>0?nr(Pn()):Cn.y<0&&Ln(Pn()),vn.copy(Tn),ft.update()}function pr(Kn){dn.set(Kn.clientX,Kn.clientY),gn.subVectors(dn,pn).multiplyScalar(ft.panSpeed),Qn(gn.x,gn.y),pn.copy(dn),ft.update()}function Jn(Kn){Kn.deltaY<0?Ln(Pn()):Kn.deltaY>0&&nr(Pn()),ft.update()}function Pr(Kn){let Sr=!1;switch(Kn.code){case ft.keys.UP:Qn(0,ft.keyPanSpeed),Sr=!0;break;case ft.keys.BOTTOM:Qn(0,-ft.keyPanSpeed),Sr=!0;break;case ft.keys.LEFT:Qn(ft.keyPanSpeed,0),Sr=!0;break;case ft.keys.RIGHT:Qn(-ft.keyPanSpeed,0),Sr=!0;break}Sr&&(Kn.preventDefault(),ft.update())}function br(){if($n.length==1)ln.set($n[0].pageX,$n[0].pageY);else{const Kn=.5*($n[0].pageX+$n[1].pageX),Sr=.5*($n[0].pageY+$n[1].pageY);ln.set(Kn,Sr)}}function Gr(){if($n.length==1)pn.set($n[0].pageX,$n[0].pageY);else{const Kn=.5*($n[0].pageX+$n[1].pageX),Sr=.5*($n[0].pageY+$n[1].pageY);pn.set(Kn,Sr)}}function Kr(){const Kn=$n[0].pageX-$n[1].pageX,Sr=$n[0].pageY-$n[1].pageY,Dr=Math.sqrt(Kn*Kn+Sr*Sr);vn.set(0,Dr)}function Xr(){ft.enableZoom&&Kr(),ft.enablePan&&Gr()}function Jr(){ft.enableZoom&&Kr(),ft.enableRotate&&br()}function Tr(Kn){if($n.length==1)cn.set(Kn.pageX,Kn.pageY);else{const Dr=ao(Kn),En=.5*(Kn.pageX+Dr.x),Dn=.5*(Kn.pageY+Dr.y);cn.set(En,Dn)}hn.subVectors(cn,ln).multiplyScalar(ft.rotateSpeed);const Sr=ft.domElement;Sr&&(Nn(2*Math.PI*hn.x/Sr.clientHeight),Wn(2*Math.PI*hn.y/Sr.clientHeight)),ln.copy(cn)}function Ir(Kn){if($n.length==1)dn.set(Kn.pageX,Kn.pageY);else{const Sr=ao(Kn),Dr=.5*(Kn.pageX+Sr.x),En=.5*(Kn.pageY+Sr.y);dn.set(Dr,En)}gn.subVectors(dn,pn).multiplyScalar(ft.panSpeed),Qn(gn.x,gn.y),pn.copy(dn)}function Qr(Kn){const Sr=ao(Kn),Dr=Kn.pageX-Sr.x,En=Kn.pageY-Sr.y,Dn=Math.sqrt(Dr*Dr+En*En);Tn.set(0,Dn),Cn.set(0,Math.pow(Tn.y/vn.y,ft.zoomSpeed)),nr(Cn.y),vn.copy(Tn)}function oo(Kn){ft.enableZoom&&Qr(Kn),ft.enablePan&&Ir(Kn)}function zr(Kn){ft.enableZoom&&Qr(Kn),ft.enableRotate&&Tr(Kn)}function to(Kn){if(ft.enabled!==!1){if($n.length===0){var Sr,Dr;(Sr=ft.domElement)===null||Sr===void 0||Sr.ownerDocument.addEventListener("pointermove",co),(Dr=ft.domElement)===null||Dr===void 0||Dr.ownerDocument.addEventListener("pointerup",uo)}fr(Kn),Kn.pointerType==="touch"?Or(Kn):Vo(Kn)}}function co(Kn){ft.enabled!==!1&&(Kn.pointerType==="touch"?Ar(Kn):jn(Kn))}function uo(Kn){if(Yr(Kn),$n.length===0){var Sr,Dr,En;(Sr=ft.domElement)===null||Sr===void 0||Sr.releasePointerCapture(Kn.pointerId),(Dr=ft.domElement)===null||Dr===void 0||Dr.ownerDocument.removeEventListener("pointermove",co),(En=ft.domElement)===null||En===void 0||En.ownerDocument.removeEventListener("pointerup",uo)}ft.dispatchEvent(Ct),Rt=At.NONE}function Mo(Kn){Yr(Kn)}function Vo(Kn){let Sr;switch(Kn.button){case 0:Sr=ft.mouseButtons.LEFT;break;case 1:Sr=ft.mouseButtons.MIDDLE;break;case 2:Sr=ft.mouseButtons.RIGHT;break;default:Sr=-1}switch(Sr){case MOUSE.DOLLY:if(ft.enableZoom===!1)return;Vn(Kn),Rt=At.DOLLY;break;case MOUSE.ROTATE:if(Kn.ctrlKey||Kn.metaKey||Kn.shiftKey){if(ft.enablePan===!1)return;sr(Kn),Rt=At.PAN}else{if(ft.enableRotate===!1)return;Un(Kn),Rt=At.ROTATE}break;case MOUSE.PAN:if(Kn.ctrlKey||Kn.metaKey||Kn.shiftKey){if(ft.enableRotate===!1)return;Un(Kn),Rt=At.ROTATE}else{if(ft.enablePan===!1)return;sr(Kn),Rt=At.PAN}break;default:Rt=At.NONE}Rt!==At.NONE&&ft.dispatchEvent(Tt)}function jn(Kn){if(ft.enabled!==!1)switch(Rt){case At.ROTATE:if(ft.enableRotate===!1)return;In(Kn);break;case At.DOLLY:if(ft.enableZoom===!1)return;ir(Kn);break;case At.PAN:if(ft.enablePan===!1)return;pr(Kn);break}}function Gn(Kn){ft.enabled===!1||ft.enableZoom===!1||Rt!==At.NONE&&Rt!==At.ROTATE||(Kn.preventDefault(),ft.dispatchEvent(Tt),Jn(Kn),ft.dispatchEvent(Ct))}function rr(Kn){ft.enabled===!1||ft.enablePan===!1||Pr(Kn)}function Or(Kn){switch(wr(Kn),$n.length){case 1:switch(ft.touches.ONE){case TOUCH.ROTATE:if(ft.enableRotate===!1)return;br(),Rt=At.TOUCH_ROTATE;break;case TOUCH.PAN:if(ft.enablePan===!1)return;Gr(),Rt=At.TOUCH_PAN;break;default:Rt=At.NONE}break;case 2:switch(ft.touches.TWO){case TOUCH.DOLLY_PAN:if(ft.enableZoom===!1&&ft.enablePan===!1)return;Xr(),Rt=At.TOUCH_DOLLY_PAN;break;case TOUCH.DOLLY_ROTATE:if(ft.enableZoom===!1&&ft.enableRotate===!1)return;Jr(),Rt=At.TOUCH_DOLLY_ROTATE;break;default:Rt=At.NONE}break;default:Rt=At.NONE}Rt!==At.NONE&&ft.dispatchEvent(Tt)}function Ar(Kn){switch(wr(Kn),Rt){case At.TOUCH_ROTATE:if(ft.enableRotate===!1)return;Tr(Kn),ft.update();break;case At.TOUCH_PAN:if(ft.enablePan===!1)return;Ir(Kn),ft.update();break;case At.TOUCH_DOLLY_PAN:if(ft.enableZoom===!1&&ft.enablePan===!1)return;oo(Kn),ft.update();break;case At.TOUCH_DOLLY_ROTATE:if(ft.enableZoom===!1&&ft.enableRotate===!1)return;zr(Kn),ft.update();break;default:Rt=At.NONE}}function Br(Kn){ft.enabled!==!1&&Kn.preventDefault()}function fr(Kn){$n.push(Kn)}function Yr(Kn){delete xn[Kn.pointerId];for(let Sr=0;Sr<$n.length;Sr++)if($n[Sr].pointerId==Kn.pointerId){$n.splice(Sr,1);return}}function wr(Kn){let Sr=xn[Kn.pointerId];Sr===void 0&&(Sr=new Vector2,xn[Kn.pointerId]=Sr),Sr.set(Kn.pageX,Kn.pageY)}function ao(Kn){const Sr=Kn.pointerId===$n[0].pointerId?$n[1]:$n[0];return xn[Sr.pointerId]}lt!==void 0&&this.connect(lt),this.update()}};class GLTFLoader extends Loader{constructor($){super($),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(lt){return new GLTFMaterialsClearcoatExtension(lt)}),this.register(function(lt){return new GLTFTextureBasisUExtension(lt)}),this.register(function(lt){return new GLTFTextureWebPExtension(lt)}),this.register(function(lt){return new GLTFMaterialsSheenExtension(lt)}),this.register(function(lt){return new GLTFMaterialsTransmissionExtension(lt)}),this.register(function(lt){return new GLTFMaterialsVolumeExtension(lt)}),this.register(function(lt){return new GLTFMaterialsIorExtension(lt)}),this.register(function(lt){return new GLTFMaterialsEmissiveStrengthExtension(lt)}),this.register(function(lt){return new GLTFMaterialsSpecularExtension(lt)}),this.register(function(lt){return new GLTFMaterialsIridescenceExtension(lt)}),this.register(function(lt){return new GLTFLightsExtension(lt)}),this.register(function(lt){return new GLTFMeshoptCompression(lt)})}load($,lt,ft,St){const Tt=this;let Ct;this.resourcePath!==""?Ct=this.resourcePath:this.path!==""?Ct=this.path:Ct=LoaderUtils.extractUrlBase($),this.manager.itemStart($);const At=function(kt){St?St(kt):console.error(kt),Tt.manager.itemError($),Tt.manager.itemEnd($)},Rt=new FileLoader(this.manager);Rt.setPath(this.path),Rt.setResponseType("arraybuffer"),Rt.setRequestHeader(this.requestHeader),Rt.setWithCredentials(this.withCredentials),Rt.load($,function(kt){try{Tt.parse(kt,Ct,function(Nt){lt(Nt),Tt.manager.itemEnd($)},At)}catch(Nt){At(Nt)}},ft,At)}setDRACOLoader($){return this.dracoLoader=$,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader($){return this.ktx2Loader=$,this}setMeshoptDecoder($){return this.meshoptDecoder=$,this}register($){return this.pluginCallbacks.indexOf($)===-1&&this.pluginCallbacks.push($),this}unregister($){return this.pluginCallbacks.indexOf($)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf($),1),this}parse($,lt,ft,St){let Tt;const Ct={},At={};if(typeof $=="string")Tt=$;else if(LoaderUtils.decodeText(new Uint8Array($,0,4))===BINARY_EXTENSION_HEADER_MAGIC){try{Ct[EXTENSIONS.KHR_BINARY_GLTF]=new GLTFBinaryExtension($)}catch(Bt){St&&St(Bt);return}Tt=Ct[EXTENSIONS.KHR_BINARY_GLTF].content}else Tt=LoaderUtils.decodeText(new Uint8Array($));const Rt=JSON.parse(Tt);if(Rt.asset===void 0||Rt.asset.version[0]<2){St&&St(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const kt=new GLTFParser(Rt,{path:lt||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});kt.fileLoader.setRequestHeader(this.requestHeader);for(let Nt=0;Nt<this.pluginCallbacks.length;Nt++){const Bt=this.pluginCallbacks[Nt](kt);At[Bt.name]=Bt,Ct[Bt.name]=!0}if(Rt.extensionsUsed)for(let Nt=0;Nt<Rt.extensionsUsed.length;++Nt){const Bt=Rt.extensionsUsed[Nt],Ut=Rt.extensionsRequired||[];switch(Bt){case EXTENSIONS.KHR_MATERIALS_UNLIT:Ct[Bt]=new GLTFMaterialsUnlitExtension;break;case EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:Ct[Bt]=new GLTFMaterialsPbrSpecularGlossinessExtension;break;case EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:Ct[Bt]=new GLTFDracoMeshCompressionExtension(Rt,this.dracoLoader);break;case EXTENSIONS.KHR_TEXTURE_TRANSFORM:Ct[Bt]=new GLTFTextureTransformExtension;break;case EXTENSIONS.KHR_MESH_QUANTIZATION:Ct[Bt]=new GLTFMeshQuantizationExtension;break;default:Ut.indexOf(Bt)>=0&&At[Bt]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+Bt+'".')}}kt.setExtensions(Ct),kt.setPlugins(At),kt.parse(ft,St)}parseAsync($,lt){const ft=this;return new Promise(function(St,Tt){ft.parse($,lt,St,Tt)})}}function GLTFRegistry(){let dt={};return{get:function($){return dt[$]},add:function($,lt){dt[$]=lt},remove:function($){delete dt[$]},removeAll:function(){dt={}}}}const EXTENSIONS={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class GLTFLightsExtension{constructor($){this.parser=$,this.name=EXTENSIONS.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const $=this.parser,lt=this.parser.json.nodes||[];for(let ft=0,St=lt.length;ft<St;ft++){const Tt=lt[ft];Tt.extensions&&Tt.extensions[this.name]&&Tt.extensions[this.name].light!==void 0&&$._addNodeRef(this.cache,Tt.extensions[this.name].light)}}_loadLight($){const lt=this.parser,ft="light:"+$;let St=lt.cache.get(ft);if(St)return St;const Tt=lt.json,Rt=((Tt.extensions&&Tt.extensions[this.name]||{}).lights||[])[$];let kt;const Nt=new Color(16777215);Rt.color!==void 0&&Nt.fromArray(Rt.color);const Bt=Rt.range!==void 0?Rt.range:0;switch(Rt.type){case"directional":kt=new DirectionalLight(Nt),kt.target.position.set(0,0,-1),kt.add(kt.target);break;case"point":kt=new PointLight(Nt),kt.distance=Bt;break;case"spot":kt=new SpotLight(Nt),kt.distance=Bt,Rt.spot=Rt.spot||{},Rt.spot.innerConeAngle=Rt.spot.innerConeAngle!==void 0?Rt.spot.innerConeAngle:0,Rt.spot.outerConeAngle=Rt.spot.outerConeAngle!==void 0?Rt.spot.outerConeAngle:Math.PI/4,kt.angle=Rt.spot.outerConeAngle,kt.penumbra=1-Rt.spot.innerConeAngle/Rt.spot.outerConeAngle,kt.target.position.set(0,0,-1),kt.add(kt.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+Rt.type)}return kt.position.set(0,0,0),kt.decay=2,Rt.intensity!==void 0&&(kt.intensity=Rt.intensity),kt.name=lt.createUniqueName(Rt.name||"light_"+$),St=Promise.resolve(kt),lt.cache.add(ft,St),St}createNodeAttachment($){const lt=this,ft=this.parser,Tt=ft.json.nodes[$],At=(Tt.extensions&&Tt.extensions[this.name]||{}).light;return At===void 0?null:this._loadLight(At).then(function(Rt){return ft._getNodeRef(lt.cache,At,Rt)})}}class GLTFMaterialsUnlitExtension{constructor(){this.name=EXTENSIONS.KHR_MATERIALS_UNLIT}getMaterialType(){return MeshBasicMaterial}extendParams($,lt,ft){const St=[];$.color=new Color(1,1,1),$.opacity=1;const Tt=lt.pbrMetallicRoughness;if(Tt){if(Array.isArray(Tt.baseColorFactor)){const Ct=Tt.baseColorFactor;$.color.fromArray(Ct),$.opacity=Ct[3]}Tt.baseColorTexture!==void 0&&St.push(ft.assignTexture($,"map",Tt.baseColorTexture,sRGBEncoding))}return Promise.all(St)}}class GLTFMaterialsEmissiveStrengthExtension{constructor($){this.parser=$,this.name=EXTENSIONS.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams($,lt){const St=this.parser.json.materials[$];if(!St.extensions||!St.extensions[this.name])return Promise.resolve();const Tt=St.extensions[this.name].emissiveStrength;return Tt!==void 0&&(lt.emissiveIntensity=Tt),Promise.resolve()}}class GLTFMaterialsClearcoatExtension{constructor($){this.parser=$,this.name=EXTENSIONS.KHR_MATERIALS_CLEARCOAT}getMaterialType($){const ft=this.parser.json.materials[$];return!ft.extensions||!ft.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams($,lt){const ft=this.parser,St=ft.json.materials[$];if(!St.extensions||!St.extensions[this.name])return Promise.resolve();const Tt=[],Ct=St.extensions[this.name];if(Ct.clearcoatFactor!==void 0&&(lt.clearcoat=Ct.clearcoatFactor),Ct.clearcoatTexture!==void 0&&Tt.push(ft.assignTexture(lt,"clearcoatMap",Ct.clearcoatTexture)),Ct.clearcoatRoughnessFactor!==void 0&&(lt.clearcoatRoughness=Ct.clearcoatRoughnessFactor),Ct.clearcoatRoughnessTexture!==void 0&&Tt.push(ft.assignTexture(lt,"clearcoatRoughnessMap",Ct.clearcoatRoughnessTexture)),Ct.clearcoatNormalTexture!==void 0&&(Tt.push(ft.assignTexture(lt,"clearcoatNormalMap",Ct.clearcoatNormalTexture)),Ct.clearcoatNormalTexture.scale!==void 0)){const At=Ct.clearcoatNormalTexture.scale;lt.clearcoatNormalScale=new Vector2(At,At)}return Promise.all(Tt)}}class GLTFMaterialsIridescenceExtension{constructor($){this.parser=$,this.name=EXTENSIONS.KHR_MATERIALS_IRIDESCENCE}getMaterialType($){const ft=this.parser.json.materials[$];return!ft.extensions||!ft.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams($,lt){const ft=this.parser,St=ft.json.materials[$];if(!St.extensions||!St.extensions[this.name])return Promise.resolve();const Tt=[],Ct=St.extensions[this.name];return Ct.iridescenceFactor!==void 0&&(lt.iridescence=Ct.iridescenceFactor),Ct.iridescenceTexture!==void 0&&Tt.push(ft.assignTexture(lt,"iridescenceMap",Ct.iridescenceTexture)),Ct.iridescenceIor!==void 0&&(lt.iridescenceIOR=Ct.iridescenceIor),lt.iridescenceThicknessRange===void 0&&(lt.iridescenceThicknessRange=[100,400]),Ct.iridescenceThicknessMinimum!==void 0&&(lt.iridescenceThicknessRange[0]=Ct.iridescenceThicknessMinimum),Ct.iridescenceThicknessMaximum!==void 0&&(lt.iridescenceThicknessRange[1]=Ct.iridescenceThicknessMaximum),Ct.iridescenceThicknessTexture!==void 0&&Tt.push(ft.assignTexture(lt,"iridescenceThicknessMap",Ct.iridescenceThicknessTexture)),Promise.all(Tt)}}class GLTFMaterialsSheenExtension{constructor($){this.parser=$,this.name=EXTENSIONS.KHR_MATERIALS_SHEEN}getMaterialType($){const ft=this.parser.json.materials[$];return!ft.extensions||!ft.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams($,lt){const ft=this.parser,St=ft.json.materials[$];if(!St.extensions||!St.extensions[this.name])return Promise.resolve();const Tt=[];lt.sheenColor=new Color(0,0,0),lt.sheenRoughness=0,lt.sheen=1;const Ct=St.extensions[this.name];return Ct.sheenColorFactor!==void 0&&lt.sheenColor.fromArray(Ct.sheenColorFactor),Ct.sheenRoughnessFactor!==void 0&&(lt.sheenRoughness=Ct.sheenRoughnessFactor),Ct.sheenColorTexture!==void 0&&Tt.push(ft.assignTexture(lt,"sheenColorMap",Ct.sheenColorTexture,sRGBEncoding)),Ct.sheenRoughnessTexture!==void 0&&Tt.push(ft.assignTexture(lt,"sheenRoughnessMap",Ct.sheenRoughnessTexture)),Promise.all(Tt)}}class GLTFMaterialsTransmissionExtension{constructor($){this.parser=$,this.name=EXTENSIONS.KHR_MATERIALS_TRANSMISSION}getMaterialType($){const ft=this.parser.json.materials[$];return!ft.extensions||!ft.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams($,lt){const ft=this.parser,St=ft.json.materials[$];if(!St.extensions||!St.extensions[this.name])return Promise.resolve();const Tt=[],Ct=St.extensions[this.name];return Ct.transmissionFactor!==void 0&&(lt.transmission=Ct.transmissionFactor),Ct.transmissionTexture!==void 0&&Tt.push(ft.assignTexture(lt,"transmissionMap",Ct.transmissionTexture)),Promise.all(Tt)}}class GLTFMaterialsVolumeExtension{constructor($){this.parser=$,this.name=EXTENSIONS.KHR_MATERIALS_VOLUME}getMaterialType($){const ft=this.parser.json.materials[$];return!ft.extensions||!ft.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams($,lt){const ft=this.parser,St=ft.json.materials[$];if(!St.extensions||!St.extensions[this.name])return Promise.resolve();const Tt=[],Ct=St.extensions[this.name];lt.thickness=Ct.thicknessFactor!==void 0?Ct.thicknessFactor:0,Ct.thicknessTexture!==void 0&&Tt.push(ft.assignTexture(lt,"thicknessMap",Ct.thicknessTexture)),lt.attenuationDistance=Ct.attenuationDistance||1/0;const At=Ct.attenuationColor||[1,1,1];return lt.attenuationColor=new Color(At[0],At[1],At[2]),Promise.all(Tt)}}class GLTFMaterialsIorExtension{constructor($){this.parser=$,this.name=EXTENSIONS.KHR_MATERIALS_IOR}getMaterialType($){const ft=this.parser.json.materials[$];return!ft.extensions||!ft.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams($,lt){const St=this.parser.json.materials[$];if(!St.extensions||!St.extensions[this.name])return Promise.resolve();const Tt=St.extensions[this.name];return lt.ior=Tt.ior!==void 0?Tt.ior:1.5,Promise.resolve()}}class GLTFMaterialsSpecularExtension{constructor($){this.parser=$,this.name=EXTENSIONS.KHR_MATERIALS_SPECULAR}getMaterialType($){const ft=this.parser.json.materials[$];return!ft.extensions||!ft.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams($,lt){const ft=this.parser,St=ft.json.materials[$];if(!St.extensions||!St.extensions[this.name])return Promise.resolve();const Tt=[],Ct=St.extensions[this.name];lt.specularIntensity=Ct.specularFactor!==void 0?Ct.specularFactor:1,Ct.specularTexture!==void 0&&Tt.push(ft.assignTexture(lt,"specularIntensityMap",Ct.specularTexture));const At=Ct.specularColorFactor||[1,1,1];return lt.specularColor=new Color(At[0],At[1],At[2]),Ct.specularColorTexture!==void 0&&Tt.push(ft.assignTexture(lt,"specularColorMap",Ct.specularColorTexture,sRGBEncoding)),Promise.all(Tt)}}class GLTFTextureBasisUExtension{constructor($){this.parser=$,this.name=EXTENSIONS.KHR_TEXTURE_BASISU}loadTexture($){const lt=this.parser,ft=lt.json,St=ft.textures[$];if(!St.extensions||!St.extensions[this.name])return null;const Tt=St.extensions[this.name],Ct=lt.options.ktx2Loader;if(!Ct){if(ft.extensionsRequired&&ft.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return lt.loadTextureImage($,Tt.source,Ct)}}class GLTFTextureWebPExtension{constructor($){this.parser=$,this.name=EXTENSIONS.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture($){const lt=this.name,ft=this.parser,St=ft.json,Tt=St.textures[$];if(!Tt.extensions||!Tt.extensions[lt])return null;const Ct=Tt.extensions[lt],At=St.images[Ct.source];let Rt=ft.textureLoader;if(At.uri){const kt=ft.options.manager.getHandler(At.uri);kt!==null&&(Rt=kt)}return this.detectSupport().then(function(kt){if(kt)return ft.loadTextureImage($,Ct.source,Rt);if(St.extensionsRequired&&St.extensionsRequired.indexOf(lt)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return ft.loadTexture($)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function($){const lt=new Image;lt.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lt.onload=lt.onerror=function(){$(lt.height===1)}})),this.isSupported}}class GLTFMeshoptCompression{constructor($){this.name=EXTENSIONS.EXT_MESHOPT_COMPRESSION,this.parser=$}loadBufferView($){const lt=this.parser.json,ft=lt.bufferViews[$];if(ft.extensions&&ft.extensions[this.name]){const St=ft.extensions[this.name],Tt=this.parser.getDependency("buffer",St.buffer),Ct=this.parser.options.meshoptDecoder;if(!Ct||!Ct.supported){if(lt.extensionsRequired&&lt.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Tt.then(function(At){const Rt=St.byteOffset||0,kt=St.byteLength||0,Nt=St.count,Bt=St.byteStride,Ut=new Uint8Array(At,Rt,kt);return Ct.decodeGltfBufferAsync?Ct.decodeGltfBufferAsync(Nt,Bt,Ut,St.mode,St.filter).then(function(zt){return zt.buffer}):Ct.ready.then(function(){const zt=new ArrayBuffer(Nt*Bt);return Ct.decodeGltfBuffer(new Uint8Array(zt),Nt,Bt,Ut,St.mode,St.filter),zt})})}else return null}}const BINARY_EXTENSION_HEADER_MAGIC="glTF",BINARY_EXTENSION_HEADER_LENGTH=12,BINARY_EXTENSION_CHUNK_TYPES={JSON:1313821514,BIN:5130562};class GLTFBinaryExtension{constructor($){this.name=EXTENSIONS.KHR_BINARY_GLTF,this.content=null,this.body=null;const lt=new DataView($,0,BINARY_EXTENSION_HEADER_LENGTH);if(this.header={magic:LoaderUtils.decodeText(new Uint8Array($.slice(0,4))),version:lt.getUint32(4,!0),length:lt.getUint32(8,!0)},this.header.magic!==BINARY_EXTENSION_HEADER_MAGIC)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const ft=this.header.length-BINARY_EXTENSION_HEADER_LENGTH,St=new DataView($,BINARY_EXTENSION_HEADER_LENGTH);let Tt=0;for(;Tt<ft;){const Ct=St.getUint32(Tt,!0);Tt+=4;const At=St.getUint32(Tt,!0);if(Tt+=4,At===BINARY_EXTENSION_CHUNK_TYPES.JSON){const Rt=new Uint8Array($,BINARY_EXTENSION_HEADER_LENGTH+Tt,Ct);this.content=LoaderUtils.decodeText(Rt)}else if(At===BINARY_EXTENSION_CHUNK_TYPES.BIN){const Rt=BINARY_EXTENSION_HEADER_LENGTH+Tt;this.body=$.slice(Rt,Rt+Ct)}Tt+=Ct}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class GLTFDracoMeshCompressionExtension{constructor($,lt){if(!lt)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=EXTENSIONS.KHR_DRACO_MESH_COMPRESSION,this.json=$,this.dracoLoader=lt,this.dracoLoader.preload()}decodePrimitive($,lt){const ft=this.json,St=this.dracoLoader,Tt=$.extensions[this.name].bufferView,Ct=$.extensions[this.name].attributes,At={},Rt={},kt={};for(const Nt in Ct){const Bt=ATTRIBUTES[Nt]||Nt.toLowerCase();At[Bt]=Ct[Nt]}for(const Nt in $.attributes){const Bt=ATTRIBUTES[Nt]||Nt.toLowerCase();if(Ct[Nt]!==void 0){const Ut=ft.accessors[$.attributes[Nt]],zt=WEBGL_COMPONENT_TYPES[Ut.componentType];kt[Bt]=zt.name,Rt[Bt]=Ut.normalized===!0}}return lt.getDependency("bufferView",Tt).then(function(Nt){return new Promise(function(Bt){St.decodeDracoFile(Nt,function(Ut){for(const zt in Ut.attributes){const Zt=Ut.attributes[zt],ln=Rt[zt];ln!==void 0&&(Zt.normalized=ln)}Bt(Ut)},At,kt)})})}}class GLTFTextureTransformExtension{constructor(){this.name=EXTENSIONS.KHR_TEXTURE_TRANSFORM}extendTexture($,lt){return lt.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),lt.offset===void 0&&lt.rotation===void 0&&lt.scale===void 0||($=$.clone(),lt.offset!==void 0&&$.offset.fromArray(lt.offset),lt.rotation!==void 0&&($.rotation=lt.rotation),lt.scale!==void 0&&$.repeat.fromArray(lt.scale),$.needsUpdate=!0),$}}class GLTFMeshStandardSGMaterial extends MeshStandardMaterial{constructor($){super(),this.isGLTFSpecularGlossinessMaterial=!0;const lt=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),ft=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),St=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),Tt=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),Ct=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),At={specular:{value:new Color().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=At,this.onBeforeCompile=function(Rt){for(const kt in At)Rt.uniforms[kt]=At[kt];Rt.fragmentShader=Rt.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",lt).replace("#include <metalnessmap_pars_fragment>",ft).replace("#include <roughnessmap_fragment>",St).replace("#include <metalnessmap_fragment>",Tt).replace("#include <lights_physical_fragment>",Ct)},Object.defineProperties(this,{specular:{get:function(){return At.specular.value},set:function(Rt){At.specular.value=Rt}},specularMap:{get:function(){return At.specularMap.value},set:function(Rt){At.specularMap.value=Rt,Rt?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return At.glossiness.value},set:function(Rt){At.glossiness.value=Rt}},glossinessMap:{get:function(){return At.glossinessMap.value},set:function(Rt){At.glossinessMap.value=Rt,Rt?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues($)}copy($){return super.copy($),this.specularMap=$.specularMap,this.specular.copy($.specular),this.glossinessMap=$.glossinessMap,this.glossiness=$.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class GLTFMaterialsPbrSpecularGlossinessExtension{constructor(){this.name=EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return GLTFMeshStandardSGMaterial}extendParams($,lt,ft){const St=lt.extensions[this.name];$.color=new Color(1,1,1),$.opacity=1;const Tt=[];if(Array.isArray(St.diffuseFactor)){const Ct=St.diffuseFactor;$.color.fromArray(Ct),$.opacity=Ct[3]}if(St.diffuseTexture!==void 0&&Tt.push(ft.assignTexture($,"map",St.diffuseTexture,sRGBEncoding)),$.emissive=new Color(0,0,0),$.glossiness=St.glossinessFactor!==void 0?St.glossinessFactor:1,$.specular=new Color(1,1,1),Array.isArray(St.specularFactor)&&$.specular.fromArray(St.specularFactor),St.specularGlossinessTexture!==void 0){const Ct=St.specularGlossinessTexture;Tt.push(ft.assignTexture($,"glossinessMap",Ct)),Tt.push(ft.assignTexture($,"specularMap",Ct,sRGBEncoding))}return Promise.all(Tt)}createMaterial($){const lt=new GLTFMeshStandardSGMaterial($);return lt.fog=!0,lt.color=$.color,lt.map=$.map===void 0?null:$.map,lt.lightMap=null,lt.lightMapIntensity=1,lt.aoMap=$.aoMap===void 0?null:$.aoMap,lt.aoMapIntensity=1,lt.emissive=$.emissive,lt.emissiveIntensity=$.emissiveIntensity===void 0?1:$.emissiveIntensity,lt.emissiveMap=$.emissiveMap===void 0?null:$.emissiveMap,lt.bumpMap=$.bumpMap===void 0?null:$.bumpMap,lt.bumpScale=1,lt.normalMap=$.normalMap===void 0?null:$.normalMap,lt.normalMapType=TangentSpaceNormalMap,$.normalScale&&(lt.normalScale=$.normalScale),lt.displacementMap=null,lt.displacementScale=1,lt.displacementBias=0,lt.specularMap=$.specularMap===void 0?null:$.specularMap,lt.specular=$.specular,lt.glossinessMap=$.glossinessMap===void 0?null:$.glossinessMap,lt.glossiness=$.glossiness,lt.alphaMap=null,lt.envMap=$.envMap===void 0?null:$.envMap,lt.envMapIntensity=1,lt.refractionRatio=.98,lt}}class GLTFMeshQuantizationExtension{constructor(){this.name=EXTENSIONS.KHR_MESH_QUANTIZATION}}class GLTFCubicSplineInterpolant extends Interpolant{constructor($,lt,ft,St){super($,lt,ft,St)}copySampleValue_($){const lt=this.resultBuffer,ft=this.sampleValues,St=this.valueSize,Tt=$*St*3+St;for(let Ct=0;Ct!==St;Ct++)lt[Ct]=ft[Tt+Ct];return lt}interpolate_($,lt,ft,St){const Tt=this.resultBuffer,Ct=this.sampleValues,At=this.valueSize,Rt=At*2,kt=At*3,Nt=St-lt,Bt=(ft-lt)/Nt,Ut=Bt*Bt,zt=Ut*Bt,Zt=$*kt,ln=Zt-kt,cn=-2*zt+3*Ut,hn=zt-Ut,pn=1-cn,dn=hn-Ut+Bt;for(let gn=0;gn!==At;gn++){const vn=Ct[ln+gn+At],Tn=Ct[ln+gn+Rt]*Nt,Cn=Ct[Zt+gn+At],$n=Ct[Zt+gn]*Nt;Tt[gn]=pn*vn+dn*Tn+cn*Cn+hn*$n}return Tt}}const _q=new Quaternion;class GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant{interpolate_($,lt,ft,St){const Tt=super.interpolate_($,lt,ft,St);return _q.fromArray(Tt).normalize().toArray(Tt),Tt}}const WEBGL_CONSTANTS={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},WEBGL_COMPONENT_TYPES={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},WEBGL_FILTERS={9728:NearestFilter,9729:LinearFilter,9984:NearestMipmapNearestFilter,9985:LinearMipmapNearestFilter,9986:NearestMipmapLinearFilter,9987:LinearMipmapLinearFilter},WEBGL_WRAPPINGS={33071:ClampToEdgeWrapping,33648:MirroredRepeatWrapping,10497:RepeatWrapping},WEBGL_TYPE_SIZES={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ATTRIBUTES={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},PATH_PROPERTIES={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},INTERPOLATION={CUBICSPLINE:void 0,LINEAR:InterpolateLinear,STEP:InterpolateDiscrete},ALPHA_MODES={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function createDefaultMaterial(dt){return dt.DefaultMaterial===void 0&&(dt.DefaultMaterial=new MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:FrontSide})),dt.DefaultMaterial}function addUnknownExtensionsToUserData(dt,$,lt){for(const ft in lt.extensions)dt[ft]===void 0&&($.userData.gltfExtensions=$.userData.gltfExtensions||{},$.userData.gltfExtensions[ft]=lt.extensions[ft])}function assignExtrasToUserData(dt,$){$.extras!==void 0&&(typeof $.extras=="object"?Object.assign(dt.userData,$.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+$.extras))}function addMorphTargets(dt,$,lt){let ft=!1,St=!1,Tt=!1;for(let kt=0,Nt=$.length;kt<Nt;kt++){const Bt=$[kt];if(Bt.POSITION!==void 0&&(ft=!0),Bt.NORMAL!==void 0&&(St=!0),Bt.COLOR_0!==void 0&&(Tt=!0),ft&&St&&Tt)break}if(!ft&&!St&&!Tt)return Promise.resolve(dt);const Ct=[],At=[],Rt=[];for(let kt=0,Nt=$.length;kt<Nt;kt++){const Bt=$[kt];if(ft){const Ut=Bt.POSITION!==void 0?lt.getDependency("accessor",Bt.POSITION):dt.attributes.position;Ct.push(Ut)}if(St){const Ut=Bt.NORMAL!==void 0?lt.getDependency("accessor",Bt.NORMAL):dt.attributes.normal;At.push(Ut)}if(Tt){const Ut=Bt.COLOR_0!==void 0?lt.getDependency("accessor",Bt.COLOR_0):dt.attributes.color;Rt.push(Ut)}}return Promise.all([Promise.all(Ct),Promise.all(At),Promise.all(Rt)]).then(function(kt){const Nt=kt[0],Bt=kt[1],Ut=kt[2];return ft&&(dt.morphAttributes.position=Nt),St&&(dt.morphAttributes.normal=Bt),Tt&&(dt.morphAttributes.color=Ut),dt.morphTargetsRelative=!0,dt})}function updateMorphTargets(dt,$){if(dt.updateMorphTargets(),$.weights!==void 0)for(let lt=0,ft=$.weights.length;lt<ft;lt++)dt.morphTargetInfluences[lt]=$.weights[lt];if($.extras&&Array.isArray($.extras.targetNames)){const lt=$.extras.targetNames;if(dt.morphTargetInfluences.length===lt.length){dt.morphTargetDictionary={};for(let ft=0,St=lt.length;ft<St;ft++)dt.morphTargetDictionary[lt[ft]]=ft}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function createPrimitiveKey(dt){const $=dt.extensions&&dt.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION];let lt;return $?lt="draco:"+$.bufferView+":"+$.indices+":"+createAttributesKey($.attributes):lt=dt.indices+":"+createAttributesKey(dt.attributes)+":"+dt.mode,lt}function createAttributesKey(dt){let $="";const lt=Object.keys(dt).sort();for(let ft=0,St=lt.length;ft<St;ft++)$+=lt[ft]+":"+dt[lt[ft]]+";";return $}function getNormalizedComponentScale(dt){switch(dt){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function getImageURIMimeType(dt){return dt.search(/\.jpe?g($|\?)/i)>0||dt.search(/^data\:image\/jpeg/)===0?"image/jpeg":dt.search(/\.webp($|\?)/i)>0||dt.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}class GLTFParser{constructor($={},lt={}){var ft,St;this.json=$,this.extensions={},this.plugins={},this.options=lt,this.cache=new GLTFRegistry,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const Tt=typeof navigator<"u"&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,Ct=typeof navigator<"u"&&((ft=navigator.userAgent)===null||ft===void 0?void 0:ft.indexOf("Firefox"))>-1,At=typeof navigator<"u"&&Ct?(St=navigator.userAgent)===null||St===void 0?void 0:St.match(/Firefox\/([0-9]+)\./)[1]:-1;typeof createImageBitmap>"u"||Tt||Ct&&At<98?this.textureLoader=new TextureLoader(this.options.manager):this.textureLoader=new ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions($){this.extensions=$}setPlugins($){this.plugins=$}parse($,lt){const ft=this,St=this.json,Tt=this.extensions;this.cache.removeAll(),this._invokeAll(function(Ct){return Ct._markDefs&&Ct._markDefs()}),Promise.all(this._invokeAll(function(Ct){return Ct.beforeRoot&&Ct.beforeRoot()})).then(function(){return Promise.all([ft.getDependencies("scene"),ft.getDependencies("animation"),ft.getDependencies("camera")])}).then(function(Ct){const At={scene:Ct[0][St.scene||0],scenes:Ct[0],animations:Ct[1],cameras:Ct[2],asset:St.asset,parser:ft,userData:{}};addUnknownExtensionsToUserData(Tt,At,St),assignExtrasToUserData(At,St),Promise.all(ft._invokeAll(function(Rt){return Rt.afterRoot&&Rt.afterRoot(At)})).then(function(){$(At)})}).catch(lt)}_markDefs(){const $=this.json.nodes||[],lt=this.json.skins||[],ft=this.json.meshes||[];for(let St=0,Tt=lt.length;St<Tt;St++){const Ct=lt[St].joints;for(let At=0,Rt=Ct.length;At<Rt;At++)$[Ct[At]].isBone=!0}for(let St=0,Tt=$.length;St<Tt;St++){const Ct=$[St];Ct.mesh!==void 0&&(this._addNodeRef(this.meshCache,Ct.mesh),Ct.skin!==void 0&&(ft[Ct.mesh].isSkinnedMesh=!0)),Ct.camera!==void 0&&this._addNodeRef(this.cameraCache,Ct.camera)}}_addNodeRef($,lt){lt!==void 0&&($.refs[lt]===void 0&&($.refs[lt]=$.uses[lt]=0),$.refs[lt]++)}_getNodeRef($,lt,ft){if($.refs[lt]<=1)return ft;const St=ft.clone(),Tt=(Ct,At)=>{const Rt=this.associations.get(Ct);Rt!=null&&this.associations.set(At,Rt);for(const[kt,Nt]of Ct.children.entries())Tt(Nt,At.children[kt])};return Tt(ft,St),St.name+="_instance_"+$.uses[lt]++,St}_invokeOne($){const lt=Object.values(this.plugins);lt.push(this);for(let ft=0;ft<lt.length;ft++){const St=$(lt[ft]);if(St)return St}return null}_invokeAll($){const lt=Object.values(this.plugins);lt.unshift(this);const ft=[];for(let St=0;St<lt.length;St++){const Tt=$(lt[St]);Tt&&ft.push(Tt)}return ft}getDependency($,lt){const ft=$+":"+lt;let St=this.cache.get(ft);if(!St){switch($){case"scene":St=this.loadScene(lt);break;case"node":St=this.loadNode(lt);break;case"mesh":St=this._invokeOne(function(Tt){return Tt.loadMesh&&Tt.loadMesh(lt)});break;case"accessor":St=this.loadAccessor(lt);break;case"bufferView":St=this._invokeOne(function(Tt){return Tt.loadBufferView&&Tt.loadBufferView(lt)});break;case"buffer":St=this.loadBuffer(lt);break;case"material":St=this._invokeOne(function(Tt){return Tt.loadMaterial&&Tt.loadMaterial(lt)});break;case"texture":St=this._invokeOne(function(Tt){return Tt.loadTexture&&Tt.loadTexture(lt)});break;case"skin":St=this.loadSkin(lt);break;case"animation":St=this._invokeOne(function(Tt){return Tt.loadAnimation&&Tt.loadAnimation(lt)});break;case"camera":St=this.loadCamera(lt);break;default:throw new Error("Unknown type: "+$)}this.cache.add(ft,St)}return St}getDependencies($){let lt=this.cache.get($);if(!lt){const ft=this,St=this.json[$+($==="mesh"?"es":"s")]||[];lt=Promise.all(St.map(function(Tt,Ct){return ft.getDependency($,Ct)})),this.cache.add($,lt)}return lt}loadBuffer($){const lt=this.json.buffers[$],ft=this.fileLoader;if(lt.type&&lt.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+lt.type+" buffer type is not supported.");if(lt.uri===void 0&&$===0)return Promise.resolve(this.extensions[EXTENSIONS.KHR_BINARY_GLTF].body);const St=this.options;return new Promise(function(Tt,Ct){ft.load(LoaderUtils.resolveURL(lt.uri,St.path),Tt,void 0,function(){Ct(new Error('THREE.GLTFLoader: Failed to load buffer "'+lt.uri+'".'))})})}loadBufferView($){const lt=this.json.bufferViews[$];return this.getDependency("buffer",lt.buffer).then(function(ft){const St=lt.byteLength||0,Tt=lt.byteOffset||0;return ft.slice(Tt,Tt+St)})}loadAccessor($){const lt=this,ft=this.json,St=this.json.accessors[$];if(St.bufferView===void 0&&St.sparse===void 0)return Promise.resolve(null);const Tt=[];return St.bufferView!==void 0?Tt.push(this.getDependency("bufferView",St.bufferView)):Tt.push(null),St.sparse!==void 0&&(Tt.push(this.getDependency("bufferView",St.sparse.indices.bufferView)),Tt.push(this.getDependency("bufferView",St.sparse.values.bufferView))),Promise.all(Tt).then(function(Ct){const At=Ct[0],Rt=WEBGL_TYPE_SIZES[St.type],kt=WEBGL_COMPONENT_TYPES[St.componentType],Nt=kt.BYTES_PER_ELEMENT,Bt=Nt*Rt,Ut=St.byteOffset||0,zt=St.bufferView!==void 0?ft.bufferViews[St.bufferView].byteStride:void 0,Zt=St.normalized===!0;let ln,cn;if(zt&&zt!==Bt){const hn=Math.floor(Ut/zt),pn="InterleavedBuffer:"+St.bufferView+":"+St.componentType+":"+hn+":"+St.count;let dn=lt.cache.get(pn);dn||(ln=new kt(At,hn*zt,St.count*zt/Nt),dn=new InterleavedBuffer(ln,zt/Nt),lt.cache.add(pn,dn)),cn=new InterleavedBufferAttribute(dn,Rt,Ut%zt/Nt,Zt)}else At===null?ln=new kt(St.count*Rt):ln=new kt(At,Ut,St.count*Rt),cn=new BufferAttribute(ln,Rt,Zt);if(St.sparse!==void 0){const hn=WEBGL_TYPE_SIZES.SCALAR,pn=WEBGL_COMPONENT_TYPES[St.sparse.indices.componentType],dn=St.sparse.indices.byteOffset||0,gn=St.sparse.values.byteOffset||0,vn=new pn(Ct[1],dn,St.sparse.count*hn),Tn=new kt(Ct[2],gn,St.sparse.count*Rt);At!==null&&(cn=new BufferAttribute(cn.array.slice(),cn.itemSize,cn.normalized));for(let Cn=0,$n=vn.length;Cn<$n;Cn++){const xn=vn[Cn];if(cn.setX(xn,Tn[Cn*Rt]),Rt>=2&&cn.setY(xn,Tn[Cn*Rt+1]),Rt>=3&&cn.setZ(xn,Tn[Cn*Rt+2]),Rt>=4&&cn.setW(xn,Tn[Cn*Rt+3]),Rt>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return cn})}loadTexture($){const lt=this.json,ft=this.options,Tt=lt.textures[$].source,Ct=lt.images[Tt];let At=this.textureLoader;if(Ct.uri){const Rt=ft.manager.getHandler(Ct.uri);Rt!==null&&(At=Rt)}return this.loadTextureImage($,Tt,At)}loadTextureImage($,lt,ft){const St=this,Tt=this.json,Ct=Tt.textures[$],At=Tt.images[lt],Rt=(At.uri||At.bufferView)+":"+Ct.sampler;if(this.textureCache[Rt])return this.textureCache[Rt];const kt=this.loadImageSource(lt,ft).then(function(Nt){Nt.flipY=!1,Ct.name&&(Nt.name=Ct.name);const Ut=(Tt.samplers||{})[Ct.sampler]||{};return Nt.magFilter=WEBGL_FILTERS[Ut.magFilter]||LinearFilter,Nt.minFilter=WEBGL_FILTERS[Ut.minFilter]||LinearMipmapLinearFilter,Nt.wrapS=WEBGL_WRAPPINGS[Ut.wrapS]||RepeatWrapping,Nt.wrapT=WEBGL_WRAPPINGS[Ut.wrapT]||RepeatWrapping,St.associations.set(Nt,{textures:$}),Nt}).catch(function(){return null});return this.textureCache[Rt]=kt,kt}loadImageSource($,lt){const ft=this,St=this.json,Tt=this.options;if(this.sourceCache[$]!==void 0)return this.sourceCache[$].then(Bt=>Bt.clone());const Ct=St.images[$],At=self.URL||self.webkitURL;let Rt=Ct.uri||"",kt=!1;if(Ct.bufferView!==void 0)Rt=ft.getDependency("bufferView",Ct.bufferView).then(function(Bt){kt=!0;const Ut=new Blob([Bt],{type:Ct.mimeType});return Rt=At.createObjectURL(Ut),Rt});else if(Ct.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+$+" is missing URI and bufferView");const Nt=Promise.resolve(Rt).then(function(Bt){return new Promise(function(Ut,zt){let Zt=Ut;lt.isImageBitmapLoader===!0&&(Zt=function(ln){const cn=new Texture(ln);cn.needsUpdate=!0,Ut(cn)}),lt.load(LoaderUtils.resolveURL(Bt,Tt.path),Zt,void 0,zt)})}).then(function(Bt){return kt===!0&&At.revokeObjectURL(Rt),Bt.userData.mimeType=Ct.mimeType||getImageURIMimeType(Ct.uri),Bt}).catch(function(Bt){throw console.error("THREE.GLTFLoader: Couldn't load texture",Rt),Bt});return this.sourceCache[$]=Nt,Nt}assignTexture($,lt,ft,St){const Tt=this;return this.getDependency("texture",ft.index).then(function(Ct){if(ft.texCoord!==void 0&&ft.texCoord!=0&&!(lt==="aoMap"&&ft.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+ft.texCoord+" for texture "+lt+" not yet supported."),Tt.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]){const At=ft.extensions!==void 0?ft.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]:void 0;if(At){const Rt=Tt.associations.get(Ct);Ct=Tt.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM].extendTexture(Ct,At),Tt.associations.set(Ct,Rt)}}return St!==void 0&&(Ct.encoding=St),$[lt]=Ct,Ct})}assignFinalMaterial($){const lt=$.geometry;let ft=$.material;const St=lt.attributes.tangent===void 0,Tt=lt.attributes.color!==void 0,Ct=lt.attributes.normal===void 0;if($.isPoints){const At="PointsMaterial:"+ft.uuid;let Rt=this.cache.get(At);Rt||(Rt=new PointsMaterial,Material.prototype.copy.call(Rt,ft),Rt.color.copy(ft.color),Rt.map=ft.map,Rt.sizeAttenuation=!1,this.cache.add(At,Rt)),ft=Rt}else if($.isLine){const At="LineBasicMaterial:"+ft.uuid;let Rt=this.cache.get(At);Rt||(Rt=new LineBasicMaterial,Material.prototype.copy.call(Rt,ft),Rt.color.copy(ft.color),this.cache.add(At,Rt)),ft=Rt}if(St||Tt||Ct){let At="ClonedMaterial:"+ft.uuid+":";ft.isGLTFSpecularGlossinessMaterial&&(At+="specular-glossiness:"),St&&(At+="derivative-tangents:"),Tt&&(At+="vertex-colors:"),Ct&&(At+="flat-shading:");let Rt=this.cache.get(At);Rt||(Rt=ft.clone(),Tt&&(Rt.vertexColors=!0),Ct&&(Rt.flatShading=!0),St&&(Rt.normalScale&&(Rt.normalScale.y*=-1),Rt.clearcoatNormalScale&&(Rt.clearcoatNormalScale.y*=-1)),this.cache.add(At,Rt),this.associations.set(Rt,this.associations.get(ft))),ft=Rt}ft.aoMap&&lt.attributes.uv2===void 0&&lt.attributes.uv!==void 0&&lt.setAttribute("uv2",lt.attributes.uv),$.material=ft}getMaterialType(){return MeshStandardMaterial}loadMaterial($){const lt=this,ft=this.json,St=this.extensions,Tt=ft.materials[$];let Ct;const At={},Rt=Tt.extensions||{},kt=[];if(Rt[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const Bt=St[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];Ct=Bt.getMaterialType(),kt.push(Bt.extendParams(At,Tt,lt))}else if(Rt[EXTENSIONS.KHR_MATERIALS_UNLIT]){const Bt=St[EXTENSIONS.KHR_MATERIALS_UNLIT];Ct=Bt.getMaterialType(),kt.push(Bt.extendParams(At,Tt,lt))}else{const Bt=Tt.pbrMetallicRoughness||{};if(At.color=new Color(1,1,1),At.opacity=1,Array.isArray(Bt.baseColorFactor)){const Ut=Bt.baseColorFactor;At.color.fromArray(Ut),At.opacity=Ut[3]}Bt.baseColorTexture!==void 0&&kt.push(lt.assignTexture(At,"map",Bt.baseColorTexture,sRGBEncoding)),At.metalness=Bt.metallicFactor!==void 0?Bt.metallicFactor:1,At.roughness=Bt.roughnessFactor!==void 0?Bt.roughnessFactor:1,Bt.metallicRoughnessTexture!==void 0&&(kt.push(lt.assignTexture(At,"metalnessMap",Bt.metallicRoughnessTexture)),kt.push(lt.assignTexture(At,"roughnessMap",Bt.metallicRoughnessTexture))),Ct=this._invokeOne(function(Ut){return Ut.getMaterialType&&Ut.getMaterialType($)}),kt.push(Promise.all(this._invokeAll(function(Ut){return Ut.extendMaterialParams&&Ut.extendMaterialParams($,At)})))}Tt.doubleSided===!0&&(At.side=DoubleSide);const Nt=Tt.alphaMode||ALPHA_MODES.OPAQUE;if(Nt===ALPHA_MODES.BLEND?(At.transparent=!0,At.depthWrite=!1):(At.transparent=!1,Nt===ALPHA_MODES.MASK&&(At.alphaTest=Tt.alphaCutoff!==void 0?Tt.alphaCutoff:.5)),Tt.normalTexture!==void 0&&Ct!==MeshBasicMaterial&&(kt.push(lt.assignTexture(At,"normalMap",Tt.normalTexture)),At.normalScale=new Vector2(1,1),Tt.normalTexture.scale!==void 0)){const Bt=Tt.normalTexture.scale;At.normalScale.set(Bt,Bt)}return Tt.occlusionTexture!==void 0&&Ct!==MeshBasicMaterial&&(kt.push(lt.assignTexture(At,"aoMap",Tt.occlusionTexture)),Tt.occlusionTexture.strength!==void 0&&(At.aoMapIntensity=Tt.occlusionTexture.strength)),Tt.emissiveFactor!==void 0&&Ct!==MeshBasicMaterial&&(At.emissive=new Color().fromArray(Tt.emissiveFactor)),Tt.emissiveTexture!==void 0&&Ct!==MeshBasicMaterial&&kt.push(lt.assignTexture(At,"emissiveMap",Tt.emissiveTexture,sRGBEncoding)),Promise.all(kt).then(function(){let Bt;return Ct===GLTFMeshStandardSGMaterial?Bt=St[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(At):Bt=new Ct(At),Tt.name&&(Bt.name=Tt.name),assignExtrasToUserData(Bt,Tt),lt.associations.set(Bt,{materials:$}),Tt.extensions&&addUnknownExtensionsToUserData(St,Bt,Tt),Bt})}createUniqueName($){const lt=PropertyBinding.sanitizeNodeName($||"");let ft=lt;for(let St=1;this.nodeNamesUsed[ft];++St)ft=lt+"_"+St;return this.nodeNamesUsed[ft]=!0,ft}loadGeometries($){const lt=this,ft=this.extensions,St=this.primitiveCache;function Tt(At){return ft[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(At,lt).then(function(Rt){return addPrimitiveAttributes(Rt,At,lt)})}const Ct=[];for(let At=0,Rt=$.length;At<Rt;At++){const kt=$[At],Nt=createPrimitiveKey(kt),Bt=St[Nt];if(Bt)Ct.push(Bt.promise);else{let Ut;kt.extensions&&kt.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]?Ut=Tt(kt):Ut=addPrimitiveAttributes(new BufferGeometry,kt,lt),St[Nt]={primitive:kt,promise:Ut},Ct.push(Ut)}}return Promise.all(Ct)}loadMesh($){const lt=this,ft=this.json,St=this.extensions,Tt=ft.meshes[$],Ct=Tt.primitives,At=[];for(let Rt=0,kt=Ct.length;Rt<kt;Rt++){const Nt=Ct[Rt].material===void 0?createDefaultMaterial(this.cache):this.getDependency("material",Ct[Rt].material);At.push(Nt)}return At.push(lt.loadGeometries(Ct)),Promise.all(At).then(function(Rt){const kt=Rt.slice(0,Rt.length-1),Nt=Rt[Rt.length-1],Bt=[];for(let zt=0,Zt=Nt.length;zt<Zt;zt++){const ln=Nt[zt],cn=Ct[zt];let hn;const pn=kt[zt];if(cn.mode===WEBGL_CONSTANTS.TRIANGLES||cn.mode===WEBGL_CONSTANTS.TRIANGLE_STRIP||cn.mode===WEBGL_CONSTANTS.TRIANGLE_FAN||cn.mode===void 0)hn=Tt.isSkinnedMesh===!0?new SkinnedMesh(ln,pn):new Mesh(ln,pn),hn.isSkinnedMesh===!0&&!hn.geometry.attributes.skinWeight.normalized&&hn.normalizeSkinWeights(),cn.mode===WEBGL_CONSTANTS.TRIANGLE_STRIP?hn.geometry=toTrianglesDrawMode(hn.geometry,TriangleStripDrawMode):cn.mode===WEBGL_CONSTANTS.TRIANGLE_FAN&&(hn.geometry=toTrianglesDrawMode(hn.geometry,TriangleFanDrawMode));else if(cn.mode===WEBGL_CONSTANTS.LINES)hn=new LineSegments(ln,pn);else if(cn.mode===WEBGL_CONSTANTS.LINE_STRIP)hn=new Line$2(ln,pn);else if(cn.mode===WEBGL_CONSTANTS.LINE_LOOP)hn=new LineLoop(ln,pn);else if(cn.mode===WEBGL_CONSTANTS.POINTS)hn=new Points(ln,pn);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+cn.mode);Object.keys(hn.geometry.morphAttributes).length>0&&updateMorphTargets(hn,Tt),hn.name=lt.createUniqueName(Tt.name||"mesh_"+$),assignExtrasToUserData(hn,Tt),cn.extensions&&addUnknownExtensionsToUserData(St,hn,cn),lt.assignFinalMaterial(hn),Bt.push(hn)}for(let zt=0,Zt=Bt.length;zt<Zt;zt++)lt.associations.set(Bt[zt],{meshes:$,primitives:zt});if(Bt.length===1)return Bt[0];const Ut=new Group;lt.associations.set(Ut,{meshes:$});for(let zt=0,Zt=Bt.length;zt<Zt;zt++)Ut.add(Bt[zt]);return Ut})}loadCamera($){let lt;const ft=this.json.cameras[$],St=ft[ft.type];if(!St){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return ft.type==="perspective"?lt=new PerspectiveCamera(MathUtils.radToDeg(St.yfov),St.aspectRatio||1,St.znear||1,St.zfar||2e6):ft.type==="orthographic"&&(lt=new OrthographicCamera$1(-St.xmag,St.xmag,St.ymag,-St.ymag,St.znear,St.zfar)),ft.name&&(lt.name=this.createUniqueName(ft.name)),assignExtrasToUserData(lt,ft),Promise.resolve(lt)}loadSkin($){const lt=this.json.skins[$],ft={joints:lt.joints};return lt.inverseBindMatrices===void 0?Promise.resolve(ft):this.getDependency("accessor",lt.inverseBindMatrices).then(function(St){return ft.inverseBindMatrices=St,ft})}loadAnimation($){const ft=this.json.animations[$],St=[],Tt=[],Ct=[],At=[],Rt=[];for(let kt=0,Nt=ft.channels.length;kt<Nt;kt++){const Bt=ft.channels[kt],Ut=ft.samplers[Bt.sampler],zt=Bt.target,Zt=zt.node,ln=ft.parameters!==void 0?ft.parameters[Ut.input]:Ut.input,cn=ft.parameters!==void 0?ft.parameters[Ut.output]:Ut.output;St.push(this.getDependency("node",Zt)),Tt.push(this.getDependency("accessor",ln)),Ct.push(this.getDependency("accessor",cn)),At.push(Ut),Rt.push(zt)}return Promise.all([Promise.all(St),Promise.all(Tt),Promise.all(Ct),Promise.all(At),Promise.all(Rt)]).then(function(kt){const Nt=kt[0],Bt=kt[1],Ut=kt[2],zt=kt[3],Zt=kt[4],ln=[];for(let hn=0,pn=Nt.length;hn<pn;hn++){const dn=Nt[hn],gn=Bt[hn],vn=Ut[hn],Tn=zt[hn],Cn=Zt[hn];if(dn===void 0)continue;dn.updateMatrix();let $n;switch(PATH_PROPERTIES[Cn.path]){case PATH_PROPERTIES.weights:$n=NumberKeyframeTrack;break;case PATH_PROPERTIES.rotation:$n=QuaternionKeyframeTrack;break;case PATH_PROPERTIES.position:case PATH_PROPERTIES.scale:default:$n=VectorKeyframeTrack;break}const xn=dn.name?dn.name:dn.uuid,Rn=Tn.interpolation!==void 0?INTERPOLATION[Tn.interpolation]:InterpolateLinear,Pn=[];PATH_PROPERTIES[Cn.path]===PATH_PROPERTIES.weights?dn.traverse(function(Wn){Wn.morphTargetInfluences&&Pn.push(Wn.name?Wn.name:Wn.uuid)}):Pn.push(xn);let Nn=vn.array;if(vn.normalized){const Wn=getNormalizedComponentScale(Nn.constructor),zn=new Float32Array(Nn.length);for(let Yn=0,Qn=Nn.length;Yn<Qn;Yn++)zn[Yn]=Nn[Yn]*Wn;Nn=zn}for(let Wn=0,zn=Pn.length;Wn<zn;Wn++){const Yn=new $n(Pn[Wn]+"."+PATH_PROPERTIES[Cn.path],gn.array,Nn,Rn);Tn.interpolation==="CUBICSPLINE"&&(Yn.createInterpolant=function(nr){const Ln=this instanceof QuaternionKeyframeTrack?GLTFCubicSplineQuaternionInterpolant:GLTFCubicSplineInterpolant;return new Ln(this.times,this.values,this.getValueSize()/3,nr)},Yn.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),ln.push(Yn)}}const cn=ft.name?ft.name:"animation_"+$;return new AnimationClip(cn,void 0,ln)})}createNodeMesh($){const lt=this.json,ft=this,St=lt.nodes[$];return St.mesh===void 0?null:ft.getDependency("mesh",St.mesh).then(function(Tt){const Ct=ft._getNodeRef(ft.meshCache,St.mesh,Tt);return St.weights!==void 0&&Ct.traverse(function(At){if(At.isMesh)for(let Rt=0,kt=St.weights.length;Rt<kt;Rt++)At.morphTargetInfluences[Rt]=St.weights[Rt]}),Ct})}loadNode($){const lt=this.json,ft=this.extensions,St=this,Tt=lt.nodes[$],Ct=Tt.name?St.createUniqueName(Tt.name):"";return function(){const At=[],Rt=St._invokeOne(function(kt){return kt.createNodeMesh&&kt.createNodeMesh($)});return Rt&&At.push(Rt),Tt.camera!==void 0&&At.push(St.getDependency("camera",Tt.camera).then(function(kt){return St._getNodeRef(St.cameraCache,Tt.camera,kt)})),St._invokeAll(function(kt){return kt.createNodeAttachment&&kt.createNodeAttachment($)}).forEach(function(kt){At.push(kt)}),Promise.all(At)}().then(function(At){let Rt;if(Tt.isBone===!0?Rt=new Bone:At.length>1?Rt=new Group:At.length===1?Rt=At[0]:Rt=new Object3D,Rt!==At[0])for(let kt=0,Nt=At.length;kt<Nt;kt++)Rt.add(At[kt]);if(Tt.name&&(Rt.userData.name=Tt.name,Rt.name=Ct),assignExtrasToUserData(Rt,Tt),Tt.extensions&&addUnknownExtensionsToUserData(ft,Rt,Tt),Tt.matrix!==void 0){const kt=new Matrix4;kt.fromArray(Tt.matrix),Rt.applyMatrix4(kt)}else Tt.translation!==void 0&&Rt.position.fromArray(Tt.translation),Tt.rotation!==void 0&&Rt.quaternion.fromArray(Tt.rotation),Tt.scale!==void 0&&Rt.scale.fromArray(Tt.scale);return St.associations.has(Rt)||St.associations.set(Rt,{}),St.associations.get(Rt).nodes=$,Rt})}loadScene($){const lt=this.json,ft=this.extensions,St=this.json.scenes[$],Tt=this,Ct=new Group;St.name&&(Ct.name=Tt.createUniqueName(St.name)),assignExtrasToUserData(Ct,St),St.extensions&&addUnknownExtensionsToUserData(ft,Ct,St);const At=St.nodes||[],Rt=[];for(let kt=0,Nt=At.length;kt<Nt;kt++)Rt.push(buildNodeHierarchy(At[kt],Ct,lt,Tt));return Promise.all(Rt).then(function(){const kt=Nt=>{const Bt=new Map;for(const[Ut,zt]of Tt.associations)(Ut instanceof Material||Ut instanceof Texture)&&Bt.set(Ut,zt);return Nt.traverse(Ut=>{const zt=Tt.associations.get(Ut);zt!=null&&Bt.set(Ut,zt)}),Bt};return Tt.associations=kt(Ct),Ct})}}function buildNodeHierarchy(dt,$,lt,ft){const St=lt.nodes[dt];return ft.getDependency("node",dt).then(function(Tt){if(St.skin===void 0)return Tt;let Ct;return ft.getDependency("skin",St.skin).then(function(At){Ct=At;const Rt=[];for(let kt=0,Nt=Ct.joints.length;kt<Nt;kt++)Rt.push(ft.getDependency("node",Ct.joints[kt]));return Promise.all(Rt)}).then(function(At){return Tt.traverse(function(Rt){if(!Rt.isMesh)return;const kt=[],Nt=[];for(let Bt=0,Ut=At.length;Bt<Ut;Bt++){const zt=At[Bt];if(zt){kt.push(zt);const Zt=new Matrix4;Ct.inverseBindMatrices!==void 0&&Zt.fromArray(Ct.inverseBindMatrices.array,Bt*16),Nt.push(Zt)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',Ct.joints[Bt])}Rt.bind(new Skeleton(kt,Nt),Rt.matrixWorld)}),Tt})}).then(function(Tt){$.add(Tt);const Ct=[];if(St.children){const At=St.children;for(let Rt=0,kt=At.length;Rt<kt;Rt++){const Nt=At[Rt];Ct.push(buildNodeHierarchy(Nt,Tt,lt,ft))}}return Promise.all(Ct)})}function computeBounds(dt,$,lt){const ft=$.attributes,St=new Box3;if(ft.POSITION!==void 0){const At=lt.json.accessors[ft.POSITION],Rt=At.min,kt=At.max;if(Rt!==void 0&&kt!==void 0){if(St.set(new Vector3(Rt[0],Rt[1],Rt[2]),new Vector3(kt[0],kt[1],kt[2])),At.normalized){const Nt=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[At.componentType]);St.min.multiplyScalar(Nt),St.max.multiplyScalar(Nt)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const Tt=$.targets;if(Tt!==void 0){const At=new Vector3,Rt=new Vector3;for(let kt=0,Nt=Tt.length;kt<Nt;kt++){const Bt=Tt[kt];if(Bt.POSITION!==void 0){const Ut=lt.json.accessors[Bt.POSITION],zt=Ut.min,Zt=Ut.max;if(zt!==void 0&&Zt!==void 0){if(Rt.setX(Math.max(Math.abs(zt[0]),Math.abs(Zt[0]))),Rt.setY(Math.max(Math.abs(zt[1]),Math.abs(Zt[1]))),Rt.setZ(Math.max(Math.abs(zt[2]),Math.abs(Zt[2]))),Ut.normalized){const ln=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[Ut.componentType]);Rt.multiplyScalar(ln)}At.max(Rt)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}St.expandByVector(At)}dt.boundingBox=St;const Ct=new Sphere$1;St.getCenter(Ct.center),Ct.radius=St.min.distanceTo(St.max)/2,dt.boundingSphere=Ct}function addPrimitiveAttributes(dt,$,lt){const ft=$.attributes,St=[];function Tt(Ct,At){return lt.getDependency("accessor",Ct).then(function(Rt){dt.setAttribute(At,Rt)})}for(const Ct in ft){const At=ATTRIBUTES[Ct]||Ct.toLowerCase();At in dt.attributes||St.push(Tt(ft[Ct],At))}if($.indices!==void 0&&!dt.index){const Ct=lt.getDependency("accessor",$.indices).then(function(At){dt.setIndex(At)});St.push(Ct)}return assignExtrasToUserData(dt,$),computeBounds(dt,$,lt),Promise.all(St).then(function(){return $.targets!==void 0?addMorphTargets(dt,$.targets,lt):dt})}function toTrianglesDrawMode(dt,$){let lt=dt.getIndex();if(lt===null){const Ct=[],At=dt.getAttribute("position");if(At!==void 0){for(let Rt=0;Rt<At.count;Rt++)Ct.push(Rt);dt.setIndex(Ct),lt=dt.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),dt}const ft=lt.count-2,St=[];if($===TriangleFanDrawMode)for(let Ct=1;Ct<=ft;Ct++)St.push(lt.getX(0)),St.push(lt.getX(Ct)),St.push(lt.getX(Ct+1));else for(let Ct=0;Ct<ft;Ct++)Ct%2===0?(St.push(lt.getX(Ct)),St.push(lt.getX(Ct+1)),St.push(lt.getX(Ct+2))):(St.push(lt.getX(Ct+2)),St.push(lt.getX(Ct+1)),St.push(lt.getX(Ct)));St.length/3!==ft&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const Tt=dt.clone();return Tt.setIndex(St),Tt}class RGBELoader extends DataTextureLoader{constructor($){super($),this.type=HalfFloatType}parse($){const At=function(dn,gn){switch(dn){case 1:console.error("THREE.RGBELoader Read Error: "+(gn||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(gn||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(gn||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(gn||""))}return-1},Bt=`
`,Ut=function(dn,gn,vn){gn=gn||1024;let Cn=dn.pos,$n=-1,xn=0,Rn="",Pn=String.fromCharCode.apply(null,new Uint16Array(dn.subarray(Cn,Cn+128)));for(;0>($n=Pn.indexOf(Bt))&&xn<gn&&Cn<dn.byteLength;)Rn+=Pn,xn+=Pn.length,Cn+=128,Pn+=String.fromCharCode.apply(null,new Uint16Array(dn.subarray(Cn,Cn+128)));return-1<$n?(vn!==!1&&(dn.pos+=xn+$n+1),Rn+Pn.slice(0,$n)):!1},zt=function(dn){const gn=/^#\?(\S+)/,vn=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,Tn=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,Cn=/^\s*FORMAT=(\S+)\s*$/,$n=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,xn={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let Rn,Pn;if(dn.pos>=dn.byteLength||!(Rn=Ut(dn)))return At(1,"no header found");if(!(Pn=Rn.match(gn)))return At(3,"bad initial token");for(xn.valid|=1,xn.programtype=Pn[1],xn.string+=Rn+`
`;Rn=Ut(dn),Rn!==!1;){if(xn.string+=Rn+`
`,Rn.charAt(0)==="#"){xn.comments+=Rn+`
`;continue}if((Pn=Rn.match(vn))&&(xn.gamma=parseFloat(Pn[1])),(Pn=Rn.match(Tn))&&(xn.exposure=parseFloat(Pn[1])),(Pn=Rn.match(Cn))&&(xn.valid|=2,xn.format=Pn[1]),(Pn=Rn.match($n))&&(xn.valid|=4,xn.height=parseInt(Pn[1],10),xn.width=parseInt(Pn[2],10)),xn.valid&2&&xn.valid&4)break}return xn.valid&2?xn.valid&4?xn:At(3,"missing image size specifier"):At(3,"missing format specifier")},Zt=function(dn,gn,vn){const Tn=gn;if(Tn<8||Tn>32767||dn[0]!==2||dn[1]!==2||dn[2]&128)return new Uint8Array(dn);if(Tn!==(dn[2]<<8|dn[3]))return At(3,"wrong scanline width");const Cn=new Uint8Array(4*gn*vn);if(!Cn.length)return At(4,"unable to allocate buffer space");let $n=0,xn=0;const Rn=4*Tn,Pn=new Uint8Array(4),Nn=new Uint8Array(Rn);let Wn=vn;for(;Wn>0&&xn<dn.byteLength;){if(xn+4>dn.byteLength)return At(1);if(Pn[0]=dn[xn++],Pn[1]=dn[xn++],Pn[2]=dn[xn++],Pn[3]=dn[xn++],Pn[0]!=2||Pn[1]!=2||(Pn[2]<<8|Pn[3])!=Tn)return At(3,"bad rgbe scanline format");let zn=0,Yn;for(;zn<Rn&&xn<dn.byteLength;){Yn=dn[xn++];const nr=Yn>128;if(nr&&(Yn-=128),Yn===0||zn+Yn>Rn)return At(3,"bad scanline data");if(nr){const Ln=dn[xn++];for(let Un=0;Un<Yn;Un++)Nn[zn++]=Ln}else Nn.set(dn.subarray(xn,xn+Yn),zn),zn+=Yn,xn+=Yn}const Qn=Tn;for(let nr=0;nr<Qn;nr++){let Ln=0;Cn[$n]=Nn[nr+Ln],Ln+=Tn,Cn[$n+1]=Nn[nr+Ln],Ln+=Tn,Cn[$n+2]=Nn[nr+Ln],Ln+=Tn,Cn[$n+3]=Nn[nr+Ln],$n+=4}Wn--}return Cn},ln=function(dn,gn,vn,Tn){const Cn=dn[gn+3],$n=Math.pow(2,Cn-128)/255;vn[Tn+0]=dn[gn+0]*$n,vn[Tn+1]=dn[gn+1]*$n,vn[Tn+2]=dn[gn+2]*$n,vn[Tn+3]=1},cn=function(dn,gn,vn,Tn){const Cn=dn[gn+3],$n=Math.pow(2,Cn-128)/255;vn[Tn+0]=DataUtils.toHalfFloat(Math.min(dn[gn+0]*$n,65504)),vn[Tn+1]=DataUtils.toHalfFloat(Math.min(dn[gn+1]*$n,65504)),vn[Tn+2]=DataUtils.toHalfFloat(Math.min(dn[gn+2]*$n,65504)),vn[Tn+3]=DataUtils.toHalfFloat(1)},hn=new Uint8Array($);hn.pos=0;const pn=zt(hn);if(pn!==-1){const dn=pn.width,gn=pn.height,vn=Zt(hn.subarray(hn.pos),dn,gn);if(vn!==-1){let Tn,Cn,$n;switch(this.type){case FloatType:$n=vn.length/4;const xn=new Float32Array($n*4);for(let Pn=0;Pn<$n;Pn++)ln(vn,Pn*4,xn,Pn*4);Tn=xn,Cn=FloatType;break;case HalfFloatType:$n=vn.length/4;const Rn=new Uint16Array($n*4);for(let Pn=0;Pn<$n;Pn++)cn(vn,Pn*4,Rn,Pn*4);Tn=Rn,Cn=HalfFloatType;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:dn,height:gn,data:Tn,header:pn.string,gamma:pn.gamma,exposure:pn.exposure,type:Cn}}}return null}setDataType($){return this.type=$,this}load($,lt,ft,St){function Tt(Ct,At){switch(Ct.type){case FloatType:case HalfFloatType:Ct.encoding=LinearEncoding,Ct.minFilter=LinearFilter,Ct.magFilter=LinearFilter,Ct.generateMipmaps=!1,Ct.flipY=!0;break}lt&&lt(Ct,At)}return super.load($,Tt,ft,St)}}const _taskCache=new WeakMap;class DRACOLoader extends Loader{constructor($){super($),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath($){return this.decoderPath=$,this}setDecoderConfig($){return this.decoderConfig=$,this}setWorkerLimit($){return this.workerLimit=$,this}load($,lt,ft,St){const Tt=new FileLoader(this.manager);Tt.setPath(this.path),Tt.setResponseType("arraybuffer"),Tt.setRequestHeader(this.requestHeader),Tt.setWithCredentials(this.withCredentials),Tt.load($,Ct=>{const At={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(Ct,At).then(lt).catch(St)},ft,St)}decodeDracoFile($,lt,ft,St){const Tt={attributeIDs:ft||this.defaultAttributeIDs,attributeTypes:St||this.defaultAttributeTypes,useUniqueIDs:!!ft};this.decodeGeometry($,Tt).then(lt)}decodeGeometry($,lt){for(const Rt in lt.attributeTypes){const kt=lt.attributeTypes[Rt];kt.BYTES_PER_ELEMENT!==void 0&&(lt.attributeTypes[Rt]=kt.name)}const ft=JSON.stringify(lt);if(_taskCache.has($)){const Rt=_taskCache.get($);if(Rt.key===ft)return Rt.promise;if($.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let St;const Tt=this.workerNextTaskID++,Ct=$.byteLength,At=this._getWorker(Tt,Ct).then(Rt=>(St=Rt,new Promise((kt,Nt)=>{St._callbacks[Tt]={resolve:kt,reject:Nt},St.postMessage({type:"decode",id:Tt,taskConfig:lt,buffer:$},[$])}))).then(Rt=>this._createGeometry(Rt.geometry));return At.catch(()=>!0).then(()=>{St&&Tt&&this._releaseTask(St,Tt)}),_taskCache.set($,{key:ft,promise:At}),At}_createGeometry($){const lt=new BufferGeometry;$.index&&lt.setIndex(new BufferAttribute($.index.array,1));for(let ft=0;ft<$.attributes.length;ft++){const St=$.attributes[ft],Tt=St.name,Ct=St.array,At=St.itemSize;lt.setAttribute(Tt,new BufferAttribute(Ct,At))}return lt}_loadLibrary($,lt){const ft=new FileLoader(this.manager);return ft.setPath(this.decoderPath),ft.setResponseType(lt),ft.setWithCredentials(this.withCredentials),new Promise((St,Tt)=>{ft.load($,St,void 0,Tt)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const $=typeof WebAssembly!="object"||this.decoderConfig.type==="js",lt=[];return $?lt.push(this._loadLibrary("draco_decoder.js","text")):(lt.push(this._loadLibrary("draco_wasm_wrapper.js","text")),lt.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(lt).then(ft=>{const St=ft[0];$||(this.decoderConfig.wasmBinary=ft[1]);const Tt=DRACOWorker.toString(),Ct=["/* draco decoder */",St,"","/* worker */",Tt.substring(Tt.indexOf("{")+1,Tt.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([Ct]))}),this.decoderPending}_getWorker($,lt){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const St=new Worker(this.workerSourceURL);St._callbacks={},St._taskCosts={},St._taskLoad=0,St.postMessage({type:"init",decoderConfig:this.decoderConfig}),St.onmessage=function(Tt){const Ct=Tt.data;switch(Ct.type){case"decode":St._callbacks[Ct.id].resolve(Ct);break;case"error":St._callbacks[Ct.id].reject(Ct);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+Ct.type+'"')}},this.workerPool.push(St)}else this.workerPool.sort(function(St,Tt){return St._taskLoad>Tt._taskLoad?-1:1});const ft=this.workerPool[this.workerPool.length-1];return ft._taskCosts[$]=lt,ft._taskLoad+=lt,ft})}_releaseTask($,lt){$._taskLoad-=$._taskCosts[lt],delete $._callbacks[lt],delete $._taskCosts[lt]}debug(){console.log("Task load: ",this.workerPool.map($=>$._taskLoad))}dispose(){for(let $=0;$<this.workerPool.length;++$)this.workerPool[$].terminate();return this.workerPool.length=0,this}}function DRACOWorker(){let dt,$;onmessage=function(Ct){const At=Ct.data;switch(At.type){case"init":dt=At.decoderConfig,$=new Promise(function(Nt){dt.onModuleLoaded=function(Bt){Nt({draco:Bt})},DracoDecoderModule(dt)});break;case"decode":const Rt=At.buffer,kt=At.taskConfig;$.then(Nt=>{const Bt=Nt.draco,Ut=new Bt.Decoder,zt=new Bt.DecoderBuffer;zt.Init(new Int8Array(Rt),Rt.byteLength);try{const Zt=lt(Bt,Ut,zt,kt),ln=Zt.attributes.map(cn=>cn.array.buffer);Zt.index&&ln.push(Zt.index.array.buffer),self.postMessage({type:"decode",id:At.id,geometry:Zt},ln)}catch(Zt){console.error(Zt),self.postMessage({type:"error",id:At.id,error:Zt.message})}finally{Bt.destroy(zt),Bt.destroy(Ut)}});break}};function lt(Ct,At,Rt,kt){const Nt=kt.attributeIDs,Bt=kt.attributeTypes;let Ut,zt;const Zt=At.GetEncodedGeometryType(Rt);if(Zt===Ct.TRIANGULAR_MESH)Ut=new Ct.Mesh,zt=At.DecodeBufferToMesh(Rt,Ut);else if(Zt===Ct.POINT_CLOUD)Ut=new Ct.PointCloud,zt=At.DecodeBufferToPointCloud(Rt,Ut);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!zt.ok()||Ut.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+zt.error_msg());const ln={index:null,attributes:[]};for(const cn in Nt){const hn=self[Bt[cn]];let pn,dn;if(kt.useUniqueIDs)dn=Nt[cn],pn=At.GetAttributeByUniqueId(Ut,dn);else{if(dn=At.GetAttributeId(Ut,Ct[Nt[cn]]),dn===-1)continue;pn=At.GetAttribute(Ut,dn)}ln.attributes.push(St(Ct,At,Ut,cn,hn,pn))}return Zt===Ct.TRIANGULAR_MESH&&(ln.index=ft(Ct,At,Ut)),Ct.destroy(Ut),ln}function ft(Ct,At,Rt){const Nt=Rt.num_faces()*3,Bt=Nt*4,Ut=Ct._malloc(Bt);At.GetTrianglesUInt32Array(Rt,Bt,Ut);const zt=new Uint32Array(Ct.HEAPF32.buffer,Ut,Nt).slice();return Ct._free(Ut),{array:zt,itemSize:1}}function St(Ct,At,Rt,kt,Nt,Bt){const Ut=Bt.num_components(),Zt=Rt.num_points()*Ut,ln=Zt*Nt.BYTES_PER_ELEMENT,cn=Tt(Ct,Nt),hn=Ct._malloc(ln);At.GetAttributeDataArrayForAllPoints(Rt,Bt,cn,ln,hn);const pn=new Nt(Ct.HEAPF32.buffer,hn,Zt).slice();return Ct._free(hn),{name:kt,array:pn,itemSize:Ut}}function Tt(Ct,At){switch(At){case Float32Array:return Ct.DT_FLOAT32;case Int8Array:return Ct.DT_INT8;case Int16Array:return Ct.DT_INT16;case Int32Array:return Ct.DT_INT32;case Uint8Array:return Ct.DT_UINT8;case Uint16Array:return Ct.DT_UINT16;case Uint32Array:return Ct.DT_UINT32}}}const _box$1=new Box3,_vector=new Vector3;class LineSegmentsGeometry extends InstancedBufferGeometry{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const $=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],lt=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],ft=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(ft),this.setAttribute("position",new Float32BufferAttribute($,3)),this.setAttribute("uv",new Float32BufferAttribute(lt,2))}applyMatrix4($){const lt=this.attributes.instanceStart,ft=this.attributes.instanceEnd;return lt!==void 0&&(lt.applyMatrix4($),ft.applyMatrix4($),lt.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions($){let lt;$ instanceof Float32Array?lt=$:Array.isArray($)&&(lt=new Float32Array($));const ft=new InstancedInterleavedBuffer(lt,6,1);return this.setAttribute("instanceStart",new InterleavedBufferAttribute(ft,3,0)),this.setAttribute("instanceEnd",new InterleavedBufferAttribute(ft,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors($){let lt;$ instanceof Float32Array?lt=$:Array.isArray($)&&(lt=new Float32Array($));const ft=new InstancedInterleavedBuffer(lt,6,1);return this.setAttribute("instanceColorStart",new InterleavedBufferAttribute(ft,3,0)),this.setAttribute("instanceColorEnd",new InterleavedBufferAttribute(ft,3,3)),this}fromWireframeGeometry($){return this.setPositions($.attributes.position.array),this}fromEdgesGeometry($){return this.setPositions($.attributes.position.array),this}fromMesh($){return this.fromWireframeGeometry(new WireframeGeometry($.geometry)),this}fromLineSegments($){const lt=$.geometry;return this.setPositions(lt.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const $=this.attributes.instanceStart,lt=this.attributes.instanceEnd;$!==void 0&&lt!==void 0&&(this.boundingBox.setFromBufferAttribute($),_box$1.setFromBufferAttribute(lt),this.boundingBox.union(_box$1))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere$1),this.boundingBox===null&&this.computeBoundingBox();const $=this.attributes.instanceStart,lt=this.attributes.instanceEnd;if($!==void 0&&lt!==void 0){const ft=this.boundingSphere.center;this.boundingBox.getCenter(ft);let St=0;for(let Tt=0,Ct=$.count;Tt<Ct;Tt++)_vector.fromBufferAttribute($,Tt),St=Math.max(St,ft.distanceToSquared(_vector)),_vector.fromBufferAttribute(lt,Tt),St=Math.max(St,ft.distanceToSquared(_vector));this.boundingSphere.radius=Math.sqrt(St),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix($){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4($)}}class LineGeometry extends LineSegmentsGeometry{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions($){const lt=$.length-3,ft=new Float32Array(2*lt);for(let St=0;St<lt;St+=3)ft[2*St]=$[St],ft[2*St+1]=$[St+1],ft[2*St+2]=$[St+2],ft[2*St+3]=$[St+3],ft[2*St+4]=$[St+4],ft[2*St+5]=$[St+5];return super.setPositions(ft),this}setColors($){const lt=$.length-3,ft=new Float32Array(2*lt);for(let St=0;St<lt;St+=3)ft[2*St]=$[St],ft[2*St+1]=$[St+1],ft[2*St+2]=$[St+2],ft[2*St+3]=$[St+3],ft[2*St+4]=$[St+4],ft[2*St+5]=$[St+5];return super.setColors(ft),this}fromLine($){const lt=$.geometry;return this.setPositions(lt.attributes.position.array),this}}UniformsLib.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new Vector2(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};ShaderLib.line={uniforms:UniformsUtils.merge([UniformsLib.common,UniformsLib.fog,UniformsLib.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				// get the offset direction as perpendicular to the view vector
				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 offset;
				if ( position.y < 0.5 ) {

					offset = normalize( cross( start.xyz, worldDir ) );

				} else {

					offset = normalize( cross( end.xyz, worldDir ) );

				}

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// extend the line bounds to encompass  endcaps
					start.xyz += - worldDir * linewidth * 0.5;
					end.xyz += worldDir * linewidth * 0.5;

					// shift the position of the quad so it hugs the forward edge of the line
					offset.xy -= dir * forwardOffset;
					offset.z += 0.5;

				#endif

				// endcaps
				if ( position.y > 1.0 || position.y < 0.0 ) {

					offset.xy += dir * 2.0 * forwardOffset;

				}

				// adjust for linewidth
				offset *= linewidth * 0.5;

				// set the world position
				worldPos = ( position.y < 0.5 ) ? start : end;
				worldPos.xyz += offset;

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <encodings_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};class LineMaterial extends ShaderMaterial{constructor($){super({type:"LineMaterial",uniforms:UniformsUtils.clone(ShaderLib.line.uniforms),vertexShader:ShaderLib.line.vertexShader,fragmentShader:ShaderLib.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(lt){this.uniforms.diffuse.value=lt}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(lt){lt===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(lt){this.uniforms.linewidth.value=lt}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(lt){!!lt!="USE_DASH"in this.defines&&(this.needsUpdate=!0),lt===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(lt){this.uniforms.dashScale.value=lt}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(lt){this.uniforms.dashSize.value=lt}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(lt){this.uniforms.dashOffset.value=lt}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(lt){this.uniforms.gapSize.value=lt}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(lt){this.uniforms.opacity.value=lt}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(lt){this.uniforms.resolution.value.copy(lt)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(lt){!!lt!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),lt===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues($)}}const _start=new Vector3,_end=new Vector3,_start4=new Vector4,_end4=new Vector4,_ssOrigin=new Vector4,_ssOrigin3=new Vector3,_mvMatrix=new Matrix4,_line=new Line3,_closestPoint=new Vector3,_box=new Box3,_sphere=new Sphere$1,_clipToWorldVector=new Vector4;let _ray,_instanceStart,_instanceEnd,_lineWidth;function getWorldSpaceHalfWidth(dt,$,lt){return _clipToWorldVector.set(0,0,-$,1).applyMatrix4(dt.projectionMatrix),_clipToWorldVector.multiplyScalar(1/_clipToWorldVector.w),_clipToWorldVector.x=_lineWidth/lt.width,_clipToWorldVector.y=_lineWidth/lt.height,_clipToWorldVector.applyMatrix4(dt.projectionMatrixInverse),_clipToWorldVector.multiplyScalar(1/_clipToWorldVector.w),Math.abs(Math.max(_clipToWorldVector.x,_clipToWorldVector.y))}function raycastWorldUnits(dt,$){for(let lt=0,ft=_instanceStart.count;lt<ft;lt++){_line.start.fromBufferAttribute(_instanceStart,lt),_line.end.fromBufferAttribute(_instanceEnd,lt);const St=new Vector3,Tt=new Vector3;_ray.distanceSqToSegment(_line.start,_line.end,Tt,St),Tt.distanceTo(St)<_lineWidth*.5&&$.push({point:Tt,pointOnLine:St,distance:_ray.origin.distanceTo(Tt),object:dt,face:null,faceIndex:lt,uv:null,uv2:null})}}function raycastScreenSpace(dt,$,lt){const ft=$.projectionMatrix,Tt=dt.material.resolution,Ct=dt.matrixWorld,At=dt.geometry,Rt=At.attributes.instanceStart,kt=At.attributes.instanceEnd,Nt=-$.near;_ray.at(1,_ssOrigin),_ssOrigin.w=1,_ssOrigin.applyMatrix4($.matrixWorldInverse),_ssOrigin.applyMatrix4(ft),_ssOrigin.multiplyScalar(1/_ssOrigin.w),_ssOrigin.x*=Tt.x/2,_ssOrigin.y*=Tt.y/2,_ssOrigin.z=0,_ssOrigin3.copy(_ssOrigin),_mvMatrix.multiplyMatrices($.matrixWorldInverse,Ct);for(let Bt=0,Ut=Rt.count;Bt<Ut;Bt++){if(_start4.fromBufferAttribute(Rt,Bt),_end4.fromBufferAttribute(kt,Bt),_start4.w=1,_end4.w=1,_start4.applyMatrix4(_mvMatrix),_end4.applyMatrix4(_mvMatrix),_start4.z>Nt&&_end4.z>Nt)continue;if(_start4.z>Nt){const pn=_start4.z-_end4.z,dn=(_start4.z-Nt)/pn;_start4.lerp(_end4,dn)}else if(_end4.z>Nt){const pn=_end4.z-_start4.z,dn=(_end4.z-Nt)/pn;_end4.lerp(_start4,dn)}_start4.applyMatrix4(ft),_end4.applyMatrix4(ft),_start4.multiplyScalar(1/_start4.w),_end4.multiplyScalar(1/_end4.w),_start4.x*=Tt.x/2,_start4.y*=Tt.y/2,_end4.x*=Tt.x/2,_end4.y*=Tt.y/2,_line.start.copy(_start4),_line.start.z=0,_line.end.copy(_end4),_line.end.z=0;const Zt=_line.closestPointToPointParameter(_ssOrigin3,!0);_line.at(Zt,_closestPoint);const ln=MathUtils.lerp(_start4.z,_end4.z,Zt),cn=ln>=-1&&ln<=1,hn=_ssOrigin3.distanceTo(_closestPoint)<_lineWidth*.5;if(cn&&hn){_line.start.fromBufferAttribute(Rt,Bt),_line.end.fromBufferAttribute(kt,Bt),_line.start.applyMatrix4(Ct),_line.end.applyMatrix4(Ct);const pn=new Vector3,dn=new Vector3;_ray.distanceSqToSegment(_line.start,_line.end,dn,pn),lt.push({point:dn,pointOnLine:pn,distance:_ray.origin.distanceTo(dn),object:dt,face:null,faceIndex:Bt,uv:null,uv2:null})}}}class LineSegments2 extends Mesh{constructor($=new LineSegmentsGeometry,lt=new LineMaterial({color:Math.random()*16777215})){super($,lt),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const $=this.geometry,lt=$.attributes.instanceStart,ft=$.attributes.instanceEnd,St=new Float32Array(2*lt.count);for(let Ct=0,At=0,Rt=lt.count;Ct<Rt;Ct++,At+=2)_start.fromBufferAttribute(lt,Ct),_end.fromBufferAttribute(ft,Ct),St[At]=At===0?0:St[At-1],St[At+1]=St[At]+_start.distanceTo(_end);const Tt=new InstancedInterleavedBuffer(St,2,1);return $.setAttribute("instanceDistanceStart",new InterleavedBufferAttribute(Tt,1,0)),$.setAttribute("instanceDistanceEnd",new InterleavedBufferAttribute(Tt,1,1)),this}raycast($,lt){const ft=this.material.worldUnits,St=$.camera;St===null&&!ft&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const Tt=$.params.Line2!==void 0&&$.params.Line2.threshold||0;_ray=$.ray;const Ct=this.matrixWorld,At=this.geometry,Rt=this.material;_lineWidth=Rt.linewidth+Tt,_instanceStart=At.attributes.instanceStart,_instanceEnd=At.attributes.instanceEnd,At.boundingSphere===null&&At.computeBoundingSphere(),_sphere.copy(At.boundingSphere).applyMatrix4(Ct);let kt;if(ft)kt=_lineWidth*.5;else{const Bt=Math.max(St.near,_sphere.distanceToPoint(_ray.origin));kt=getWorldSpaceHalfWidth(St,Bt,Rt.resolution)}if(_sphere.radius+=kt,_ray.intersectsSphere(_sphere)===!1)return;At.boundingBox===null&&At.computeBoundingBox(),_box.copy(At.boundingBox).applyMatrix4(Ct);let Nt;if(ft)Nt=_lineWidth*.5;else{const Bt=Math.max(St.near,_box.distanceToPoint(_ray.origin));Nt=getWorldSpaceHalfWidth(St,Bt,Rt.resolution)}_box.expandByScalar(Nt),_ray.intersectsBox(_box)!==!1&&(ft?raycastWorldUnits(this,lt):raycastScreenSpace(this,St,lt))}}class Line2 extends LineSegments2{constructor($=new LineGeometry,lt=new LineMaterial({color:Math.random()*16777215})){super($,lt),this.isLine2=!0,this.type="Line2"}}let generated;const MeshoptDecoder=()=>{if(generated)return generated;const dt="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",$="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",lt=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),ft=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let St=dt;WebAssembly.validate(lt)&&(St=$);let Tt;const Ct=WebAssembly.instantiate(At(St),{}).then(Bt=>{Tt=Bt.instance,Tt.exports.__wasm_call_ctors()});function At(Bt){const Ut=new Uint8Array(Bt.length);for(let Zt=0;Zt<Bt.length;++Zt){const ln=Bt.charCodeAt(Zt);Ut[Zt]=ln>96?ln-71:ln>64?ln-65:ln>47?ln+4:ln>46?63:62}let zt=0;for(let Zt=0;Zt<Bt.length;++Zt)Ut[zt++]=Ut[Zt]<60?ft[Ut[Zt]]:(Ut[Zt]-60)*64+Ut[++Zt];return Ut.buffer.slice(0,zt)}function Rt(Bt,Ut,zt,Zt,ln,cn){const hn=Tt.exports.sbrk,pn=zt+3&-4,dn=hn(pn*Zt),gn=hn(ln.length),vn=new Uint8Array(Tt.exports.memory.buffer);vn.set(ln,gn);const Tn=Bt(dn,zt,Zt,gn,ln.length);if(Tn===0&&cn&&cn(dn,pn,Zt),Ut.set(vn.subarray(dn,dn+zt*Zt)),hn(dn-hn(0)),Tn!==0)throw new Error(`Malformed buffer data: ${Tn}`)}const kt={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},Nt={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return generated={ready:Ct,supported:!0,decodeVertexBuffer(Bt,Ut,zt,Zt,ln){Rt(Tt.exports.meshopt_decodeVertexBuffer,Bt,Ut,zt,Zt,Tt.exports[kt[ln]])},decodeIndexBuffer(Bt,Ut,zt,Zt){Rt(Tt.exports.meshopt_decodeIndexBuffer,Bt,Ut,zt,Zt)},decodeIndexSequence(Bt,Ut,zt,Zt){Rt(Tt.exports.meshopt_decodeIndexSequence,Bt,Ut,zt,Zt)},decodeGltfBuffer(Bt,Ut,zt,Zt,ln,cn){Rt(Tt.exports[Nt[ln]],Bt,Ut,zt,Zt,Tt.exports[kt[cn]])}},generated},Line$1=reactExports.forwardRef(function dt({points:$,color:lt="black",vertexColors:ft,linewidth:St,lineWidth:Tt,segments:Ct,dashed:At,...Rt},kt){const Nt=useThree(Zt=>Zt.size),Bt=reactExports.useMemo(()=>Ct?new LineSegments2:new Line2,[Ct]),[Ut]=reactExports.useState(()=>new LineMaterial),zt=reactExports.useMemo(()=>{const Zt=Ct?new LineSegmentsGeometry:new LineGeometry,ln=$.map(cn=>{const hn=Array.isArray(cn);return cn instanceof Vector3?[cn.x,cn.y,cn.z]:cn instanceof Vector2?[cn.x,cn.y,0]:hn&&cn.length===3?[cn[0],cn[1],cn[2]]:hn&&cn.length===2?[cn[0],cn[1],0]:cn});if(Zt.setPositions(ln.flat()),ft){const cn=ft.map(hn=>hn instanceof Color?hn.toArray():hn);Zt.setColors(cn.flat())}return Zt},[$,Ct,ft]);return reactExports.useLayoutEffect(()=>{Bt.computeLineDistances()},[$,Bt]),reactExports.useLayoutEffect(()=>{At?Ut.defines.USE_DASH="":delete Ut.defines.USE_DASH,Ut.needsUpdate=!0},[At,Ut]),reactExports.useEffect(()=>()=>zt.dispose(),[zt]),reactExports.createElement("primitive",_extends({object:Bt,ref:kt},Rt),reactExports.createElement("primitive",{object:zt,attach:"geometry"}),reactExports.createElement("primitive",_extends({object:Ut,attach:"material",color:lt,vertexColors:!!ft,resolution:[Nt.width,Nt.height],linewidth:St??Tt,dashed:At},Rt)))}),CatmullRomLine=reactExports.forwardRef(function dt({points:$,closed:lt=!1,curveType:ft="centripetal",tension:St=.5,segments:Tt=20,vertexColors:Ct,...At},Rt){const kt=reactExports.useMemo(()=>{const Ut=$.map(zt=>zt instanceof Vector3?zt:new Vector3(...zt));return new CatmullRomCurve3(Ut,lt,ft,St)},[$,lt,ft,St]),Nt=reactExports.useMemo(()=>kt.getPoints(Tt),[kt,Tt]),Bt=reactExports.useMemo(()=>{if(!Ct||Ct.length<2)return;if(Ct.length===Tt+1)return Ct;const Ut=Ct.map(ln=>ln instanceof Color?ln:new Color(...ln));lt&&Ut.push(Ut[0].clone());const zt=[Ut[0]],Zt=Tt/(Ut.length-1);for(let ln=1;ln<Tt;ln++){const cn=ln%Zt/Zt,hn=Math.floor(ln/Zt);zt.push(Ut[hn].clone().lerp(Ut[hn+1],cn))}return zt.push(Ut[Ut.length-1]),zt},[Ct,Tt]);return reactExports.createElement(Line$1,_extends({ref:Rt,points:Nt,vertexColors:Bt},At))});function shaderMaterial(dt,$,lt,ft){const St=class extends ShaderMaterial{constructor(Ct={}){const At=Object.entries(dt);super({uniforms:At.reduce((Rt,[kt,Nt])=>{const Bt=UniformsUtils.clone({[kt]:{value:Nt}});return{...Rt,...Bt}},{}),vertexShader:$,fragmentShader:lt}),this.key="",At.forEach(([Rt])=>Object.defineProperty(this,Rt,{get:()=>this.uniforms[Rt].value,set:kt=>this.uniforms[Rt].value=kt})),Object.assign(this,Ct),ft&&ft(this)}};return St.key=MathUtils.generateUUID(),St}let dracoLoader=null;function extensions(dt,$,lt){return ft=>{lt&&lt(ft),dt&&(dracoLoader||(dracoLoader=new DRACOLoader),dracoLoader.setDecoderPath(typeof dt=="string"?dt:"https://www.gstatic.com/draco/versioned/decoders/1.5.5/"),ft.setDRACOLoader(dracoLoader)),$&&ft.setMeshoptDecoder(typeof MeshoptDecoder=="function"?MeshoptDecoder():MeshoptDecoder)}}function useGLTF(dt,$=!0,lt=!0,ft){return useLoader(GLTFLoader,dt,extensions($,lt,ft))}useGLTF.preload=(dt,$=!0,lt=!0,ft)=>useLoader.preload(GLTFLoader,dt,extensions($,lt,ft));useGLTF.clear=dt=>useLoader.clear(GLTFLoader,dt);function useFBO(dt,$,lt){const{gl:ft,size:St,viewport:Tt}=useThree(),Ct=typeof dt=="number"?dt:St.width*Tt.dpr,At=typeof $=="number"?$:St.height*Tt.dpr,Rt=(typeof dt=="number"?lt:dt)||{},{samples:kt=0,depth:Nt,...Bt}=Rt,Ut=reactExports.useMemo(()=>{let zt;return zt=new WebGLRenderTarget(Ct,At,{minFilter:LinearFilter,magFilter:LinearFilter,encoding:ft.outputEncoding,type:HalfFloatType,...Bt}),Nt&&(zt.depthTexture=new DepthTexture(Ct,At,FloatType)),zt.samples=kt,zt},[]);return reactExports.useLayoutEffect(()=>{Ut.setSize(Ct,At),kt&&(Ut.samples=kt)},[kt,Ut,Ct,At]),reactExports.useEffect(()=>()=>Ut.dispose(),[]),Ut}const isFunction=dt=>typeof dt=="function",OrthographicCamera=reactExports.forwardRef(({envMap:dt,resolution:$=256,frames:lt=1/0,children:ft,makeDefault:St,...Tt},Ct)=>{const At=useThree(({set:cn})=>cn),Rt=useThree(({camera:cn})=>cn),kt=useThree(({size:cn})=>cn),Nt=reactExports.useRef(null),Bt=reactExports.useRef(null),Ut=useFBO($);reactExports.useLayoutEffect(()=>{Tt.manual||Nt.current.updateProjectionMatrix()},[kt,Tt]),reactExports.useLayoutEffect(()=>{Nt.current.updateProjectionMatrix()}),reactExports.useLayoutEffect(()=>{if(St){const cn=Rt;return At(()=>({camera:Nt.current})),()=>At(()=>({camera:cn}))}},[Nt,St,At]);let zt=0,Zt=null;const ln=isFunction(ft);return useFrame(cn=>{ln&&(lt===1/0||zt<lt)&&(Bt.current.visible=!1,cn.gl.setRenderTarget(Ut),Zt=cn.scene.background,dt&&(cn.scene.background=dt),cn.gl.render(cn.scene,Nt.current),cn.scene.background=Zt,cn.gl.setRenderTarget(null),Bt.current.visible=!0,zt++)}),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("orthographicCamera",_extends({left:kt.width/-2,right:kt.width/2,top:kt.height/2,bottom:kt.height/-2,ref:mergeRefs([Nt,Ct])},Tt),!ln&&ft),reactExports.createElement("group",{ref:Bt},ln&&ft(Ut.texture)))}),OrbitControls=reactExports.forwardRef(({makeDefault:dt,camera:$,regress:lt,domElement:ft,enableDamping:St=!0,onChange:Tt,onStart:Ct,onEnd:At,...Rt},kt)=>{const Nt=useThree(vn=>vn.invalidate),Bt=useThree(vn=>vn.camera),Ut=useThree(vn=>vn.gl),zt=useThree(vn=>vn.events),Zt=useThree(vn=>vn.setEvents),ln=useThree(vn=>vn.set),cn=useThree(vn=>vn.get),hn=useThree(vn=>vn.performance),pn=$||Bt,dn=ft||zt.connected||Ut.domElement,gn=reactExports.useMemo(()=>new OrbitControls$1(pn),[pn]);return useFrame(()=>{gn.enabled&&gn.update()},-1),reactExports.useEffect(()=>(gn.connect(dn),()=>void gn.dispose()),[dn,lt,gn,Nt]),reactExports.useEffect(()=>{const vn=$n=>{Nt(),lt&&hn.regress(),Tt&&Tt($n)},Tn=$n=>{Ct&&Ct($n)},Cn=$n=>{At&&At($n)};return gn.addEventListener("change",vn),gn.addEventListener("start",Tn),gn.addEventListener("end",Cn),()=>{gn.removeEventListener("start",Tn),gn.removeEventListener("end",Cn),gn.removeEventListener("change",vn)}},[Tt,Ct,At,gn,Nt,Zt]),reactExports.useEffect(()=>{if(dt){const vn=cn().controls;return ln({controls:gn}),()=>ln({controls:vn})}},[dt,gn]),reactExports.createElement("primitive",_extends({ref:kt,object:gn,enableDamping:St},Rt))});function RenderHud({defaultScene:dt,defaultCamera:$,renderPriority:lt=1}){const{gl:ft,scene:St,camera:Tt}=useThree();let Ct;return useFrame(()=>{Ct=ft.autoClear,lt===1&&(ft.autoClear=!0,ft.render(dt,$)),ft.autoClear=!1,ft.clearDepth(),ft.render(St,Tt),ft.autoClear=Ct},lt),reactExports.createElement(reactExports.Fragment,null)}function Hud({children:dt,renderPriority:$=1}){const{scene:lt,camera:ft}=useThree(),[St]=reactExports.useState(()=>new Scene);return reactExports.createElement(reactExports.Fragment,null,createPortal(reactExports.createElement(reactExports.Fragment,null,dt,reactExports.createElement(RenderHud,{defaultScene:lt,defaultCamera:ft,renderPriority:$})),St,{events:{priority:$+1}}))}const Context=reactExports.createContext({}),useGizmoContext=()=>reactExports.useContext(Context),turnRate=2*Math.PI,dummy=new Object3D,matrix=new Matrix4,[q1,q2]=[new Quaternion,new Quaternion],target=new Vector3,targetPosition=new Vector3,isOrbitControls=dt=>"minPolarAngle"in dt,GizmoHelper=({alignment:dt="bottom-right",margin:$=[80,80],renderPriority:lt=1,onUpdate:ft,onTarget:St,children:Tt})=>{const Ct=useThree(Tn=>Tn.size),At=useThree(Tn=>Tn.camera),Rt=useThree(Tn=>Tn.controls),kt=useThree(Tn=>Tn.invalidate),Nt=reactExports.useRef(),Bt=reactExports.useRef(null),Ut=reactExports.useRef(!1),zt=reactExports.useRef(0),Zt=reactExports.useRef(new Vector3(0,0,0)),ln=reactExports.useRef(new Vector3(0,0,0));reactExports.useEffect(()=>{ln.current.copy(At.up)},[At]);const cn=reactExports.useCallback(Tn=>{Ut.current=!0,(Rt||St)&&(Zt.current=(Rt==null?void 0:Rt.target)||(St==null?void 0:St())),zt.current=At.position.distanceTo(target),q1.copy(At.quaternion),targetPosition.copy(Tn).multiplyScalar(zt.current).add(target),dummy.lookAt(targetPosition),q2.copy(dummy.quaternion),kt()},[Rt,At,St,kt]);useFrame((Tn,Cn)=>{if(Bt.current&&Nt.current){var $n;if(Ut.current)if(q1.angleTo(q2)<.01)Ut.current=!1,isOrbitControls(Rt)&&At.up.copy(ln.current);else{const xn=Cn*turnRate;q1.rotateTowards(q2,xn),At.position.set(0,0,1).applyQuaternion(q1).multiplyScalar(zt.current).add(Zt.current),At.up.set(0,1,0).applyQuaternion(q1).normalize(),At.quaternion.copy(q1),ft?ft():Rt&&Rt.update(),kt()}matrix.copy(At.matrix).invert(),($n=Nt.current)==null||$n.quaternion.setFromRotationMatrix(matrix)}});const hn=reactExports.useMemo(()=>({tweenCamera:cn}),[cn]),[pn,dn]=$,gn=dt.endsWith("-center")?0:dt.endsWith("-left")?-Ct.width/2+pn:Ct.width/2-pn,vn=dt.startsWith("center-")?0:dt.startsWith("top-")?Ct.height/2-dn:-Ct.height/2+dn;return reactExports.createElement(Hud,{renderPriority:lt},reactExports.createElement(Context.Provider,{value:hn},reactExports.createElement(OrthographicCamera,{makeDefault:!0,ref:Bt,position:[0,0,200]}),reactExports.createElement("group",{ref:Nt,position:[gn,vn,0]},Tt)))};function Axis({scale:dt=[.8,.05,.05],color:$,rotation:lt}){return reactExports.createElement("group",{rotation:lt},reactExports.createElement("mesh",{position:[.4,0,0]},reactExports.createElement("boxGeometry",{args:dt}),reactExports.createElement("meshBasicMaterial",{color:$,toneMapped:!1})))}function AxisHead({onClick:dt,font:$,disabled:lt,arcStyle:ft,label:St,labelColor:Tt,axisHeadScale:Ct=1,...At}){const Rt=useThree(ln=>ln.gl),kt=reactExports.useMemo(()=>{const ln=document.createElement("canvas");ln.width=64,ln.height=64;const cn=ln.getContext("2d");return cn.beginPath(),cn.arc(32,32,16,0,2*Math.PI),cn.closePath(),cn.fillStyle=ft,cn.fill(),St&&(cn.font=$,cn.textAlign="center",cn.fillStyle=Tt,cn.fillText(St,32,41)),new CanvasTexture(ln)},[ft,St,Tt,$]),[Nt,Bt]=reactExports.useState(!1),Ut=(St?1:.75)*(Nt?1.2:1)*Ct,zt=ln=>{ln.stopPropagation(),Bt(!0)},Zt=ln=>{ln.stopPropagation(),Bt(!1)};return reactExports.createElement("sprite",_extends({scale:Ut,onPointerOver:lt?void 0:zt,onPointerOut:lt?void 0:dt||Zt},At),reactExports.createElement("spriteMaterial",{map:kt,"map-encoding":Rt.outputEncoding,"map-anisotropy":Rt.capabilities.getMaxAnisotropy()||1,alphaTest:.3,opacity:St?1:.75,toneMapped:!1}))}const GizmoViewport=({hideNegativeAxes:dt,hideAxisHeads:$,disabled:lt,font:ft="18px Inter var, Arial, sans-serif",axisColors:St=["#ff2060","#20df80","#2080ff"],axisHeadScale:Tt=1,axisScale:Ct,labels:At=["X","Y","Z"],labelColor:Rt="#000",onClick:kt,...Nt})=>{const[Bt,Ut,zt]=St,{tweenCamera:Zt}=useGizmoContext(),ln={font:ft,disabled:lt,labelColor:Rt,onClick:kt,axisHeadScale:Tt,onPointerDown:lt?void 0:cn=>{Zt(cn.object.position),cn.stopPropagation()}};return reactExports.createElement("group",_extends({scale:40},Nt),reactExports.createElement(Axis,{color:Bt,rotation:[0,0,0],scale:Ct}),reactExports.createElement(Axis,{color:Ut,rotation:[0,0,Math.PI/2],scale:Ct}),reactExports.createElement(Axis,{color:zt,rotation:[0,-Math.PI/2,0],scale:Ct}),!$&&reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(AxisHead,_extends({arcStyle:Bt,position:[1,0,0],label:At[0]},ln)),reactExports.createElement(AxisHead,_extends({arcStyle:Ut,position:[0,1,0],label:At[1]},ln)),reactExports.createElement(AxisHead,_extends({arcStyle:zt,position:[0,0,1],label:At[2]},ln)),!dt&&reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(AxisHead,_extends({arcStyle:Bt,position:[-1,0,0]},ln)),reactExports.createElement(AxisHead,_extends({arcStyle:Ut,position:[0,-1,0]},ln)),reactExports.createElement(AxisHead,_extends({arcStyle:zt,position:[0,0,-1]},ln)))),reactExports.createElement("ambientLight",{intensity:.5}),reactExports.createElement("pointLight",{position:[10,10,10],intensity:.5}))},GridMaterial=shaderMaterial({cellSize:.5,sectionSize:1,fadeDistance:100,fadeStrength:1,cellThickness:.5,sectionThickness:1,cellColor:new Color,sectionColor:new Color,infiniteGrid:0,followCamera:0},`varying vec3 worldPosition;
   uniform float fadeDistance;
   uniform float infiniteGrid;
   uniform float followCamera;
   void main() {
     vec3 pos = position.xzy * (1. + fadeDistance * infiniteGrid);
     pos.xz += (cameraPosition.xz * followCamera);
     worldPosition = pos;
     gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
   }`,`varying vec3 worldPosition;
   uniform float cellSize;
   uniform float sectionSize;
   uniform vec3 cellColor;
   uniform vec3 sectionColor;
   uniform float fadeDistance;
   uniform float fadeStrength;
   uniform float cellThickness;
   uniform float sectionThickness;
   uniform float infiniteGrid;
   float getGrid(float size, float thickness) {
     vec2 r = worldPosition.xz / size;
     vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
     float line = min(grid.x, grid.y) + 1. - thickness;
     return 1.0 - min(line, 1.);
   }
   void main() {
     float g1 = getGrid(cellSize, cellThickness);
     float g2 = getGrid(sectionSize, sectionThickness);
     float d = 1.0 - min(distance(cameraPosition.xz, worldPosition.xz) / fadeDistance, 1.);
     vec3 color = mix(cellColor, sectionColor, min(1.,sectionThickness * g2));
     gl_FragColor = vec4(color, (g1 + g2) * pow(d,fadeStrength));
     gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);
     if (gl_FragColor.a <= 0.0) discard;
     #include <tonemapping_fragment>
     #include <encodings_fragment>
   }`),Grid=reactExports.forwardRef(({args:dt,cellColor:$="#000000",sectionColor:lt="#2080ff",cellSize:ft=.5,sectionSize:St=1,followCamera:Tt=!1,infiniteGrid:Ct=!1,fadeDistance:At=100,fadeStrength:Rt=1,cellThickness:kt=.5,sectionThickness:Nt=1,side:Bt=BackSide,...Ut},zt)=>{extend$1({GridMaterial});const Zt={cellSize:ft,sectionSize:St,cellColor:$,sectionColor:lt,cellThickness:kt,sectionThickness:Nt},ln={fadeDistance:At,fadeStrength:Rt,infiniteGrid:Ct,followCamera:Tt};return reactExports.createElement("mesh",_extends({ref:zt,frustumCulled:!1},Ut),reactExports.createElement("gridMaterial",_extends({transparent:!0,"extensions-derivatives":!0,side:Bt},Zt,ln)),reactExports.createElement("planeGeometry",{args:dt}))});function useAnimations(dt,$){const lt=reactExports.useRef(),[ft]=reactExports.useState(()=>$?$ instanceof Object3D?{current:$}:$:lt),[St]=reactExports.useState(()=>new AnimationMixer(void 0)),Tt=reactExports.useRef({}),[Ct]=reactExports.useState(()=>{const At={};return dt.forEach(Rt=>Object.defineProperty(At,Rt.name,{enumerable:!0,get(){if(ft.current)return Tt.current[Rt.name]||(Tt.current[Rt.name]=St.clipAction(Rt,ft.current))}})),{ref:ft,clips:dt,actions:At,names:dt.map(Rt=>Rt.name),mixer:St}});return useFrame((At,Rt)=>St.update(Rt)),reactExports.useEffect(()=>{const At=ft.current;return()=>{Tt.current={},Object.values(Ct.actions).forEach(Rt=>{At&&St.uncacheAction(Rt,At)})}},[dt]),reactExports.useEffect(()=>()=>{St.stopAllAction()},[St]),Ct}function create(dt){const $=dt+"Geometry";return reactExports.forwardRef(({args:lt,children:ft,...St},Tt)=>reactExports.createElement("mesh",_extends({ref:Tt},St),reactExports.createElement($,{attach:"geometry",args:lt}),ft))}const Sphere=create("sphere"),Plane=create("plane"),presetsObj={sunset:"venice/venice_sunset_1k.hdr",dawn:"kiara/kiara_1_dawn_1k.hdr",night:"dikhololo/dikhololo_night_1k.hdr",warehouse:"empty-wharehouse/empty_warehouse_01_1k.hdr",forest:"forrest-slope/forest_slope_1k.hdr",apartment:"lebombo/lebombo_1k.hdr",studio:"studio-small-3/studio_small_03_1k.hdr",city:"potsdamer-platz/potsdamer_platz_1k.hdr",park:"rooitou/rooitou_park_1k.hdr",lobby:"st-fagans/st_fagans_interior_1k.hdr"},CUBEMAP_ROOT="https://market-assets.fra1.cdn.digitaloceanspaces.com/market-assets/hdris/",isRef=dt=>dt.current&&dt.current.isScene,resolveScene=dt=>isRef(dt)?dt.current:dt;function setEnvProps(dt,$,lt,ft,St=0){const Tt=resolveScene($||lt),Ct=Tt.background,At=Tt.environment,Rt=Tt.backgroundBlurriness||0;return dt!=="only"&&(Tt.environment=ft),dt&&(Tt.background=ft),dt&&Tt.backgroundBlurriness!==void 0&&(Tt.backgroundBlurriness=St),()=>{dt!=="only"&&(Tt.environment=At),dt&&(Tt.background=Ct),dt&&Tt.backgroundBlurriness!==void 0&&(Tt.backgroundBlurriness=Rt)}}function EnvironmentMap({scene:dt,background:$=!1,blur:lt,map:ft}){const St=useThree(Tt=>Tt.scene);return reactExports.useLayoutEffect(()=>{if(ft)return setEnvProps($,dt,St,ft,lt)},[St,dt,ft,$,lt]),null}function useEnvironment({files:dt=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:$="",preset:lt=void 0,encoding:ft=void 0,extensions:St}){if(lt){if(!(lt in presetsObj))throw new Error("Preset must be one of: "+Object.keys(presetsObj).join(", "));dt=presetsObj[lt],$=CUBEMAP_ROOT}const Tt=Array.isArray(dt),At=useLoader(Tt?CubeTextureLoader:RGBELoader,Tt?[dt]:dt,kt=>{kt.setPath($),St&&St(kt)}),Rt=Tt?At[0]:At;return Rt.mapping=Tt?CubeReflectionMapping:EquirectangularReflectionMapping,Rt.encoding=ft??Tt?sRGBEncoding:LinearEncoding,Rt}function EnvironmentCube({background:dt=!1,scene:$,blur:lt,...ft}){const St=useEnvironment(ft),Tt=useThree(Ct=>Ct.scene);return reactExports.useLayoutEffect(()=>setEnvProps(dt,$,Tt,St,lt),[St,dt,$,Tt,lt]),null}function EnvironmentPortal({children:dt,near:$=1,far:lt=1e3,resolution:ft=256,frames:St=1,map:Tt,background:Ct=!1,blur:At,scene:Rt,files:kt,path:Nt,preset:Bt=void 0,extensions:Ut}){const zt=useThree(dn=>dn.gl),Zt=useThree(dn=>dn.scene),ln=reactExports.useRef(null),[cn]=reactExports.useState(()=>new Scene),hn=reactExports.useMemo(()=>{const dn=new WebGLCubeRenderTarget(ft);return dn.texture.type=HalfFloatType,dn},[ft]);reactExports.useLayoutEffect(()=>(St===1&&ln.current.update(zt,cn),setEnvProps(Ct,Rt,Zt,hn.texture,At)),[dt,cn,hn.texture,Rt,Zt,Ct,St,zt]);let pn=1;return useFrame(()=>{(St===1/0||pn<St)&&(ln.current.update(zt,cn),pn++)}),reactExports.createElement(reactExports.Fragment,null,createPortal(reactExports.createElement(reactExports.Fragment,null,dt,reactExports.createElement("cubeCamera",{ref:ln,args:[$,lt,hn]}),kt||Bt?reactExports.createElement(EnvironmentCube,{background:!0,files:kt,preset:Bt,path:Nt,extensions:Ut}):Tt?reactExports.createElement(EnvironmentMap,{background:!0,map:Tt,extensions:Ut}):null),cn))}function EnvironmentGround(dt){var $,lt,ft,St;const Tt=useEnvironment(dt),Ct=dt.map||Tt;reactExports.useMemo(()=>extend$1({GroundProjectedEnvImpl:GroundProjectedEnv}),[]);const At=reactExports.useMemo(()=>[Ct],[Ct]),Rt=($=dt.ground)==null?void 0:$.height,kt=(lt=dt.ground)==null?void 0:lt.radius,Nt=(ft=(St=dt.ground)==null?void 0:St.scale)!==null&&ft!==void 0?ft:1e3;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(EnvironmentMap,_extends({},dt,{map:Ct})),reactExports.createElement("groundProjectedEnvImpl",{args:At,scale:Nt,height:Rt,radius:kt}))}function Environment(dt){return dt.ground?reactExports.createElement(EnvironmentGround,dt):dt.map?reactExports.createElement(EnvironmentMap,dt):dt.children?reactExports.createElement(EnvironmentPortal,dt):reactExports.createElement(EnvironmentCube,dt)}function calcPosFromAngles(dt,$,lt=new Vector3){const ft=Math.PI*(dt-.5),St=2*Math.PI*($-.5);return lt.x=Math.cos(St),lt.y=Math.sin(ft),lt.z=Math.sin(St),lt}const Sky=reactExports.forwardRef(({inclination:dt=.6,azimuth:$=.1,distance:lt=1e3,mieCoefficient:ft=.005,mieDirectionalG:St=.8,rayleigh:Tt=.5,turbidity:Ct=10,sunPosition:At=calcPosFromAngles(dt,$),...Rt},kt)=>{const Nt=reactExports.useMemo(()=>new Vector3().setScalar(lt),[lt]),[Bt]=reactExports.useState(()=>new Sky$1);return reactExports.createElement("primitive",_extends({object:Bt,ref:kt,"material-uniforms-mieCoefficient-value":ft,"material-uniforms-mieDirectionalG-value":St,"material-uniforms-rayleigh-value":Tt,"material-uniforms-sunPosition-value":At,"material-uniforms-turbidity-value":Ct,scale:Nt},Rt))});function Crazyflie(dt){const $=reactExports.useRef(),{nodes:lt,materials:ft,animations:St}=useGLTF("/crazyflie.glb"),{actions:Tt}=useAnimations(St,$);return reactExports.useEffect(()=>{Object.values(Tt).map(Ct=>Ct==null?void 0:Ct.play())},[]),jsx("group",{...dt,children:jsx("group",{ref:$,children:jsx("group",{name:"Scene",children:jsxs("mesh",{name:"pcb_Default_sldprt",castShadow:!0,receiveShadow:!0,geometry:lt.pcb_Default_sldprt.geometry,material:ft["Material.003"],position:[.01,0,0],scale:.01,children:[jsx("mesh",{name:"propeller_ccw_Default_sldprt001",castShadow:!0,receiveShadow:!0,geometry:lt.propeller_ccw_Default_sldprt001.geometry,material:ft["Material.004"],position:[33.94,15.2,33.85],rotation:[1.56,-.01,.79]}),jsx("mesh",{name:"propeller_ccw_Default_sldprt002",castShadow:!0,receiveShadow:!0,geometry:lt.propeller_ccw_Default_sldprt002.geometry,material:ft["Material.001"],position:[33.94,15.2,-33.85],rotation:[-1.56,.01,.79],scale:-1}),jsx("mesh",{name:"propeller_ccw_Default_sldprt003",castShadow:!0,receiveShadow:!0,geometry:lt.propeller_ccw_Default_sldprt003.geometry,material:ft["Material.004"],position:[-33.83,15.2,33.32],rotation:[-1.56,.01,.79],scale:-1}),jsx("mesh",{name:"propeller_ccw_Default_sldprt004",castShadow:!0,receiveShadow:!0,geometry:lt.propeller_ccw_Default_sldprt004.geometry,material:ft["Material.004"],position:[-33.94,15.2,-33.85],rotation:[1.57,0,Math.PI/4]}),jsx("mesh",{name:"7mm_motor_mount_Default_sldprt",castShadow:!0,receiveShadow:!0,geometry:lt["7mm_motor_mount_Default_sldprt"].geometry,material:ft.Material,position:[-33.72,3.79,-33.71],rotation:[1.56,0,0]}),jsx("mesh",{name:"7x15_motor_Default_sldprt",castShadow:!0,receiveShadow:!0,geometry:lt["7x15_motor_Default_sldprt"].geometry,material:ft["Material.002"],position:[-33.85,-4.25,-33.74],rotation:[1.56,0,0]}),jsx("mesh",{name:"battery_bc-bl-01-a_Default_sldprt",castShadow:!0,receiveShadow:!0,geometry:lt["battery_bc-bl-01-a_Default_sldprt"].geometry,material:ft["Material.006"],position:[-11.27,2.54,8.16],rotation:[1.56,0,0]}),jsx("mesh",{name:"battery_holder_board_Default_sldprt",castShadow:!0,receiveShadow:!0,geometry:lt.battery_holder_board_Default_sldprt.geometry,material:ft["Material.003"],position:[-10.37,9.9,13.13],rotation:[Math.PI/2,0,0],scale:[1,.97,1]}),jsx("mesh",{name:"header_Default_sldprt",castShadow:!0,receiveShadow:!0,geometry:lt.header_Default_sldprt.geometry,material:ft["Material.005"],position:[-9.32,4.28,-8.95],rotation:[1.56,0,-Math.PI],scale:-1})]})})})})}useGLTF.preload("/crazyflie.glb");var f$2=l$2(),n=dt=>c$2(dt,f$2),m$1=l$2();n.write=dt=>c$2(dt,m$1);var d$2=l$2();n.onStart=dt=>c$2(dt,d$2);var h$2=l$2();n.onFrame=dt=>c$2(dt,h$2);var p$1=l$2();n.onFinish=dt=>c$2(dt,p$1);var i$1=[];n.setTimeout=(dt,$)=>{let lt=n.now()+$,ft=()=>{let Tt=i$1.findIndex(Ct=>Ct.cancel==ft);~Tt&&i$1.splice(Tt,1),u$2-=~Tt?1:0},St={time:lt,handler:dt,cancel:ft};return i$1.splice(w(lt),0,St),u$2+=1,v$1(),St};var w=dt=>~(~i$1.findIndex($=>$.time>dt)||~i$1.length);n.cancel=dt=>{d$2.delete(dt),h$2.delete(dt),p$1.delete(dt),f$2.delete(dt),m$1.delete(dt)};n.sync=dt=>{T=!0,n.batchedUpdates(dt),T=!1};n.throttle=dt=>{let $;function lt(){try{dt(...$)}finally{$=null}}function ft(...St){$=St,n.onStart(lt)}return ft.handler=dt,ft.cancel=()=>{d$2.delete(lt),$=null},ft};var y$2=typeof window<"u"?window.requestAnimationFrame:()=>{};n.use=dt=>y$2=dt;n.now=typeof performance<"u"?()=>performance.now():Date.now;n.batchedUpdates=dt=>dt();n.catch=console.error;n.frameLoop="always";n.advance=()=>{n.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):x$1()};var r=-1,u$2=0,T=!1;function c$2(dt,$){T?($.delete(dt),dt(0)):($.add(dt),v$1())}function v$1(){r<0&&(r=0,n.frameLoop!=="demand"&&y$2(b$2))}function R(){r=-1}function b$2(){~r&&(y$2(b$2),n.batchedUpdates(x$1))}function x$1(){let dt=r;r=n.now();let $=w(r);if($&&(Q$2(i$1.splice(0,$),lt=>lt.handler()),u$2-=$),!u$2){R();return}d$2.flush(),f$2.flush(dt?Math.min(64,r-dt):16.667),h$2.flush(),m$1.flush(),p$1.flush()}function l$2(){let dt=new Set,$=dt;return{add(lt){u$2+=$==dt&&!dt.has(lt)?1:0,dt.add(lt)},delete(lt){return u$2-=$==dt&&dt.has(lt)?1:0,dt.delete(lt)},flush(lt){$.size&&(dt=new Set,u$2-=$.size,Q$2($,ft=>ft(lt)&&dt.add(ft)),u$2+=dt.size,$=dt)}}}function Q$2(dt,$){dt.forEach(lt=>{try{$(lt)}catch(ft){n.catch(ft)}})}var ze$1=Object.defineProperty,Le$2=(dt,$)=>{for(var lt in $)ze$1(dt,lt,{get:$[lt],enumerable:!0})},p={};Le$2(p,{assign:()=>U,colors:()=>c$1,createStringInterpolator:()=>k$1,skipAnimation:()=>ee,to:()=>J$1,willAdvance:()=>S});function Y(){}var mt$1=(dt,$,lt)=>Object.defineProperty(dt,$,{value:lt,writable:!0,configurable:!0}),l$1={arr:Array.isArray,obj:dt=>!!dt&&dt.constructor.name==="Object",fun:dt=>typeof dt=="function",str:dt=>typeof dt=="string",num:dt=>typeof dt=="number",und:dt=>dt===void 0};function bt$1(dt,$){if(l$1.arr(dt)){if(!l$1.arr($)||dt.length!==$.length)return!1;for(let lt=0;lt<dt.length;lt++)if(dt[lt]!==$[lt])return!1;return!0}return dt===$}var Ve=(dt,$)=>dt.forEach($);function xt(dt,$,lt){if(l$1.arr(dt)){for(let ft=0;ft<dt.length;ft++)$.call(lt,dt[ft],`${ft}`);return}for(let ft in dt)dt.hasOwnProperty(ft)&&$.call(lt,dt[ft],ft)}var ht$1=dt=>l$1.und(dt)?[]:l$1.arr(dt)?dt:[dt];function Pe$1(dt,$){if(dt.size){let lt=Array.from(dt);dt.clear(),Ve(lt,$)}}var yt$1=(dt,...$)=>Pe$1(dt,lt=>lt(...$)),h$1=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),k$1,J$1,c$1=null,ee=!1,S=Y,U=dt=>{dt.to&&(J$1=dt.to),dt.now&&(n.now=dt.now),dt.colors!==void 0&&(c$1=dt.colors),dt.skipAnimation!=null&&(ee=dt.skipAnimation),dt.createStringInterpolator&&(k$1=dt.createStringInterpolator),dt.requestAnimationFrame&&n.use(dt.requestAnimationFrame),dt.batchedUpdates&&(n.batchedUpdates=dt.batchedUpdates),dt.willAdvance&&(S=dt.willAdvance),dt.frameLoop&&(n.frameLoop=dt.frameLoop)},E$2=new Set,u$1=[],H$1=[],A=0,qe$1={get idle(){return!E$2.size&&!u$1.length},start(dt){A>dt.priority?(E$2.add(dt),n.onStart($e)):(te$1(dt),n(B))},advance:B,sort(dt){if(A)n.onFrame(()=>qe$1.sort(dt));else{let $=u$1.indexOf(dt);~$&&(u$1.splice($,1),re(dt))}},clear(){u$1=[],E$2.clear()}};function $e(){E$2.forEach(te$1),E$2.clear(),n(B)}function te$1(dt){u$1.includes(dt)||re(dt)}function re(dt){u$1.splice(Ge$1(u$1,$=>$.priority>dt.priority),0,dt)}function B(dt){let $=H$1;for(let lt=0;lt<u$1.length;lt++){let ft=u$1[lt];A=ft.priority,ft.idle||(S(ft),ft.advance(dt),ft.idle||$.push(ft))}return A=0,H$1=u$1,H$1.length=0,u$1=$,u$1.length>0}function Ge$1(dt,$){let lt=dt.findIndex($);return lt<0?dt.length:lt}var ne$2=(dt,$,lt)=>Math.min(Math.max(lt,dt),$),It={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},d$1="[-+]?\\d*\\.?\\d+",M=d$1+"%";function C$1(...dt){return"\\(\\s*("+dt.join(")\\s*,\\s*(")+")\\s*\\)"}var oe$1=new RegExp("rgb"+C$1(d$1,d$1,d$1)),fe$1=new RegExp("rgba"+C$1(d$1,d$1,d$1,d$1)),ae$1=new RegExp("hsl"+C$1(d$1,M,M)),ie$2=new RegExp("hsla"+C$1(d$1,M,M,d$1)),se$1=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,ue$1=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,le$1=/^#([0-9a-fA-F]{6})$/,ce=/^#([0-9a-fA-F]{8})$/;function be$1(dt){let $;return typeof dt=="number"?dt>>>0===dt&&dt>=0&&dt<=4294967295?dt:null:($=le$1.exec(dt))?parseInt($[1]+"ff",16)>>>0:c$1&&c$1[dt]!==void 0?c$1[dt]:($=oe$1.exec(dt))?(y$1($[1])<<24|y$1($[2])<<16|y$1($[3])<<8|255)>>>0:($=fe$1.exec(dt))?(y$1($[1])<<24|y$1($[2])<<16|y$1($[3])<<8|me$1($[4]))>>>0:($=se$1.exec(dt))?parseInt($[1]+$[1]+$[2]+$[2]+$[3]+$[3]+"ff",16)>>>0:($=ce.exec(dt))?parseInt($[1],16)>>>0:($=ue$1.exec(dt))?parseInt($[1]+$[1]+$[2]+$[2]+$[3]+$[3]+$[4]+$[4],16)>>>0:($=ae$1.exec(dt))?(de$1(pe($[1]),z$1($[2]),z$1($[3]))|255)>>>0:($=ie$2.exec(dt))?(de$1(pe($[1]),z$1($[2]),z$1($[3]))|me$1($[4]))>>>0:null}function j$1(dt,$,lt){return lt<0&&(lt+=1),lt>1&&(lt-=1),lt<1/6?dt+($-dt)*6*lt:lt<1/2?$:lt<2/3?dt+($-dt)*(2/3-lt)*6:dt}function de$1(dt,$,lt){let ft=lt<.5?lt*(1+$):lt+$-lt*$,St=2*lt-ft,Tt=j$1(St,ft,dt+1/3),Ct=j$1(St,ft,dt),At=j$1(St,ft,dt-1/3);return Math.round(Tt*255)<<24|Math.round(Ct*255)<<16|Math.round(At*255)<<8}function y$1(dt){let $=parseInt(dt,10);return $<0?0:$>255?255:$}function pe(dt){return(parseFloat(dt)%360+360)%360/360}function me$1(dt){let $=parseFloat(dt);return $<0?0:$>1?255:Math.round($*255)}function z$1(dt){let $=parseFloat(dt);return $<0?0:$>100?1:$/100}function D$1(dt){let $=be$1(dt);if($===null)return dt;$=$||0;let lt=($&4278190080)>>>24,ft=($&16711680)>>>16,St=($&65280)>>>8,Tt=($&255)/255;return`rgba(${lt}, ${ft}, ${St}, ${Tt})`}var W$1=(dt,$,lt)=>{if(l$1.fun(dt))return dt;if(l$1.arr(dt))return W$1({range:dt,output:$,extrapolate:lt});if(l$1.str(dt.output[0]))return k$1(dt);let ft=dt,St=ft.output,Tt=ft.range||[0,1],Ct=ft.extrapolateLeft||ft.extrapolate||"extend",At=ft.extrapolateRight||ft.extrapolate||"extend",Rt=ft.easing||(kt=>kt);return kt=>{let Nt=He$1(kt,Tt);return Ue$1(kt,Tt[Nt],Tt[Nt+1],St[Nt],St[Nt+1],Rt,Ct,At,ft.map)}};function Ue$1(dt,$,lt,ft,St,Tt,Ct,At,Rt){let kt=Rt?Rt(dt):dt;if(kt<$){if(Ct==="identity")return kt;Ct==="clamp"&&(kt=$)}if(kt>lt){if(At==="identity")return kt;At==="clamp"&&(kt=lt)}return ft===St?ft:$===lt?dt<=$?ft:St:($===-1/0?kt=-kt:lt===1/0?kt=kt-$:kt=(kt-$)/(lt-$),kt=Tt(kt),ft===-1/0?kt=-kt:St===1/0?kt=kt+ft:kt=kt*(St-ft)+ft,kt)}function He$1(dt,$){for(var lt=1;lt<$.length-1&&!($[lt]>=dt);++lt);return lt-1}var Be=(dt,$="end")=>lt=>{lt=$==="end"?Math.min(lt,.999):Math.max(lt,.001);let ft=lt*dt,St=$==="end"?Math.floor(ft):Math.ceil(ft);return ne$2(0,1,St/dt)},P=1.70158,L=P*1.525,xe$1=P+1,he$1=2*Math.PI/3,ye$1=2*Math.PI/4.5,V=dt=>dt<1/2.75?7.5625*dt*dt:dt<2/2.75?7.5625*(dt-=1.5/2.75)*dt+.75:dt<2.5/2.75?7.5625*(dt-=2.25/2.75)*dt+.9375:7.5625*(dt-=2.625/2.75)*dt+.984375,Lt$1={linear:dt=>dt,easeInQuad:dt=>dt*dt,easeOutQuad:dt=>1-(1-dt)*(1-dt),easeInOutQuad:dt=>dt<.5?2*dt*dt:1-Math.pow(-2*dt+2,2)/2,easeInCubic:dt=>dt*dt*dt,easeOutCubic:dt=>1-Math.pow(1-dt,3),easeInOutCubic:dt=>dt<.5?4*dt*dt*dt:1-Math.pow(-2*dt+2,3)/2,easeInQuart:dt=>dt*dt*dt*dt,easeOutQuart:dt=>1-Math.pow(1-dt,4),easeInOutQuart:dt=>dt<.5?8*dt*dt*dt*dt:1-Math.pow(-2*dt+2,4)/2,easeInQuint:dt=>dt*dt*dt*dt*dt,easeOutQuint:dt=>1-Math.pow(1-dt,5),easeInOutQuint:dt=>dt<.5?16*dt*dt*dt*dt*dt:1-Math.pow(-2*dt+2,5)/2,easeInSine:dt=>1-Math.cos(dt*Math.PI/2),easeOutSine:dt=>Math.sin(dt*Math.PI/2),easeInOutSine:dt=>-(Math.cos(Math.PI*dt)-1)/2,easeInExpo:dt=>dt===0?0:Math.pow(2,10*dt-10),easeOutExpo:dt=>dt===1?1:1-Math.pow(2,-10*dt),easeInOutExpo:dt=>dt===0?0:dt===1?1:dt<.5?Math.pow(2,20*dt-10)/2:(2-Math.pow(2,-20*dt+10))/2,easeInCirc:dt=>1-Math.sqrt(1-Math.pow(dt,2)),easeOutCirc:dt=>Math.sqrt(1-Math.pow(dt-1,2)),easeInOutCirc:dt=>dt<.5?(1-Math.sqrt(1-Math.pow(2*dt,2)))/2:(Math.sqrt(1-Math.pow(-2*dt+2,2))+1)/2,easeInBack:dt=>xe$1*dt*dt*dt-P*dt*dt,easeOutBack:dt=>1+xe$1*Math.pow(dt-1,3)+P*Math.pow(dt-1,2),easeInOutBack:dt=>dt<.5?Math.pow(2*dt,2)*((L+1)*2*dt-L)/2:(Math.pow(2*dt-2,2)*((L+1)*(dt*2-2)+L)+2)/2,easeInElastic:dt=>dt===0?0:dt===1?1:-Math.pow(2,10*dt-10)*Math.sin((dt*10-10.75)*he$1),easeOutElastic:dt=>dt===0?0:dt===1?1:Math.pow(2,-10*dt)*Math.sin((dt*10-.75)*he$1)+1,easeInOutElastic:dt=>dt===0?0:dt===1?1:dt<.5?-(Math.pow(2,20*dt-10)*Math.sin((20*dt-11.125)*ye$1))/2:Math.pow(2,-20*dt+10)*Math.sin((20*dt-11.125)*ye$1)/2+1,easeInBounce:dt=>1-V(1-dt),easeOutBounce:V,easeInOutBounce:dt=>dt<.5?(1-V(1-2*dt))/2:(1+V(2*dt-1))/2,steps:Be},g=Symbol.for("FluidValue.get"),m=Symbol.for("FluidValue.observers"),Pt=dt=>!!(dt&&dt[g]),ve=dt=>dt&&dt[g]?dt[g]():dt,qt=dt=>dt[m]||null;function je(dt,$){dt.eventObserved?dt.eventObserved($):dt($)}function $t(dt,$){let lt=dt[m];lt&&lt.forEach(ft=>{je(ft,$)})}var Gx,Ux,VE,ge=(VE=class{constructor(dt){po(this,Gx);po(this,Ux);if(!dt&&!(dt=this.get))throw Error("Unknown getter");De$1(this,dt)}},Gx=g,Ux=m,VE),De$1=(dt,$)=>Ee$1(dt,g,$);function Gt(dt,$){if(dt[g]){let lt=dt[m];lt||Ee$1(dt,m,lt=new Set),lt.has($)||(lt.add($),dt.observerAdded&&dt.observerAdded(lt.size,$))}return $}function Qt(dt,$){let lt=dt[m];if(lt&&lt.has($)){let ft=lt.size-1;ft?lt.delete($):dt[m]=null,dt.observerRemoved&&dt.observerRemoved(ft,$)}}var Ee$1=(dt,$,lt)=>Object.defineProperty(dt,$,{value:lt,writable:!0,configurable:!0}),O=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Oe=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,K=new RegExp(`(${O.source})(%|[a-z]+)`,"i"),we$1=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,b$1=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,N=dt=>{let[$,lt]=We(dt);if(!$||h$1())return dt;let ft=window.getComputedStyle(document.documentElement).getPropertyValue($);return ft?ft.trim():lt&&lt.startsWith("--")?window.getComputedStyle(document.documentElement).getPropertyValue(lt)||dt:lt&&b$1.test(lt)?N(lt):lt||dt},We=dt=>{let $=b$1.exec(dt);if(!$)return[,];let[,lt,ft]=$;return[lt,ft]},_,Ke$1=(dt,$,lt,ft,St)=>`rgba(${Math.round($)}, ${Math.round(lt)}, ${Math.round(ft)}, ${St})`,Xt=dt=>{_||(_=c$1?new RegExp(`(${Object.keys(c$1).join("|")})(?!\\w)`,"g"):/^\b$/);let $=dt.output.map(St=>ve(St).replace(b$1,N).replace(Oe,D$1).replace(_,D$1)),lt=$.map(St=>St.match(O).map(Number)),ft=lt[0].map((St,Tt)=>lt.map(Ct=>{if(!(Tt in Ct))throw Error('The arity of each "output" value must be equal');return Ct[Tt]})).map(St=>W$1({...dt,output:St}));return St=>{var At;let Tt=!K.test($[0])&&((At=$.find(Rt=>K.test(Rt)))==null?void 0:At.replace(O,"")),Ct=0;return $[0].replace(O,()=>`${ft[Ct++](St)}${Tt||""}`).replace(we$1,Ke$1)}},Z="react-spring: ",Te=dt=>{let $=dt,lt=!1;if(typeof $!="function")throw new TypeError(`${Z}once requires a function parameter`);return(...ft)=>{lt||($(...ft),lt=!0)}},Ne$1=Te(console.warn);function Jt(){Ne$1(`${Z}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var _e$1=Te(console.warn);function er(){_e$1(`${Z}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function or(dt){return l$1.str(dt)&&(dt[0]=="#"||/\d/.test(dt)||!h$1()&&b$1.test(dt)||dt in(c$1||{}))}var Q$1=h$1()?reactExports.useEffect:reactExports.useLayoutEffect,Ce$1=()=>{let dt=reactExports.useRef(!1);return Q$1(()=>(dt.current=!0,()=>{dt.current=!1}),[]),dt};function Mr(){let dt=reactExports.useState()[1],$=Ce$1();return()=>{$.current&&dt(Math.random())}}function Lr(dt,$){let[lt]=reactExports.useState(()=>({inputs:$,result:dt()})),ft=reactExports.useRef(),St=ft.current,Tt=St;return Tt?$&&Tt.inputs&&it$1($,Tt.inputs)||(Tt={inputs:$,result:dt()}):Tt=lt,reactExports.useEffect(()=>{ft.current=Tt,St==lt&&(lt.inputs=lt.result=void 0)},[Tt]),Tt.result}function it$1(dt,$){if(dt.length!==$.length)return!1;for(let lt=0;lt<dt.length;lt++)if(dt[lt]!==$[lt])return!1;return!0}var $r=dt=>reactExports.useEffect(dt,ut),ut=[];function Ur(dt){let $=reactExports.useRef();return reactExports.useEffect(()=>{$.current=dt}),$.current}var h=Symbol.for("Animated:node"),v=dt=>!!dt&&dt[h]===dt,k=dt=>dt&&dt[h],D=(dt,$)=>mt$1(dt,h,$),F=dt=>dt&&dt[h]&&dt[h].getPayload(),c=class{constructor(){po(this,"payload");D(this,this)}getPayload(){return this.payload||[]}},l=class extends c{constructor($){super();po(this,"done",!0);po(this,"elapsedTime");po(this,"lastPosition");po(this,"lastVelocity");po(this,"v0");po(this,"durationProgress",0);this._value=$,l$1.num(this._value)&&(this.lastPosition=this._value)}static create($){return new l($)}getPayload(){return[this]}getValue(){return this._value}setValue($,lt){return l$1.num($)&&(this.lastPosition=$,lt&&($=Math.round($/lt)*lt,this.done&&(this.lastPosition=$))),this._value===$?!1:(this._value=$,!0)}reset(){let{done:$}=this;this.done=!1,l$1.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,$&&(this.lastVelocity=null),this.v0=null)}},d=class extends l{constructor($){super(0);po(this,"_string",null);po(this,"_toString");this._toString=W$1({output:[$,$]})}static create($){return new d($)}getValue(){return this._string??(this._string=this._toString(this._value))}setValue($){if(l$1.str($)){if($==this._string)return!1;this._string=$,this._value=1}else if(super.setValue($))this._string=null;else return!1;return!0}reset($){$&&(this._toString=W$1({output:[this.getValue(),$]})),this._value=0,super.reset()}},f$1={dependencies:null},u=class extends c{constructor(dt){super(),this.source=dt,this.setValue(dt)}getValue(dt){let $={};return xt(this.source,(lt,ft)=>{v(lt)?$[ft]=lt.getValue(dt):Pt(lt)?$[ft]=ve(lt):dt||($[ft]=lt)}),$}setValue(dt){this.source=dt,this.payload=this._makePayload(dt)}reset(){this.payload&&Ve(this.payload,dt=>dt.reset())}_makePayload(dt){if(dt){let $=new Set;return xt(dt,this._addToPayload,$),Array.from($)}}_addToPayload(dt){f$1.dependencies&&Pt(dt)&&f$1.dependencies.add(dt);let $=F(dt);$&&Ve($,lt=>this.add(lt))}},y=class extends u{constructor(dt){super(dt)}static create(dt){return new y(dt)}getValue(){return this.source.map(dt=>dt.getValue())}setValue(dt){let $=this.getPayload();return dt.length==$.length?$.map((lt,ft)=>lt.setValue(dt[ft])).some(Boolean):(super.setValue(dt.map(z)),!0)}};function z(dt){return(or(dt)?d:l).create(dt)}function Le$1(dt){let $=k(dt);return $?$.constructor:l$1.arr(dt)?y:or(dt)?d:l}var x=(dt,$)=>{let lt=!l$1.fun(dt)||dt.prototype&&dt.prototype.isReactComponent;return reactExports.forwardRef((ft,St)=>{let Tt=reactExports.useRef(null),Ct=lt&&reactExports.useCallback(Zt=>{Tt.current=ae(St,Zt)},[St]),[At,Rt]=ne$1(ft,$),kt=Mr(),Nt=()=>{let Zt=Tt.current;lt&&!Zt||(Zt?$.applyAnimatedValues(Zt,At.getValue(!0)):!1)===!1&&kt()},Bt=new b(Nt,Rt),Ut=reactExports.useRef();Q$1(()=>(Ut.current=Bt,Ve(Rt,Zt=>Gt(Zt,Bt)),()=>{Ut.current&&(Ve(Ut.current.deps,Zt=>Qt(Zt,Ut.current)),n.cancel(Ut.current.update))})),reactExports.useEffect(Nt,[]),$r(()=>()=>{let Zt=Ut.current;Ve(Zt.deps,ln=>Qt(ln,Zt))});let zt=$.getComponentProps(At.getValue());return reactExports.createElement(dt,{...zt,ref:Ct})})},b=class{constructor(dt,$){this.update=dt,this.deps=$}eventObserved(dt){dt.type=="change"&&n.write(this.update)}};function ne$1(dt,$){let lt=new Set;return f$1.dependencies=lt,dt.style&&(dt={...dt,style:$.createAnimatedStyle(dt.style)}),dt=new u(dt),f$1.dependencies=null,[dt,lt]}function ae(dt,$){return dt&&(l$1.fun(dt)?dt($):dt.current=$),$}var j=Symbol.for("AnimatedComponent"),Ke=(dt,{applyAnimatedValues:$=()=>!1,createAnimatedStyle:lt=St=>new u(St),getComponentProps:ft=St=>St}={})=>{let St={applyAnimatedValues:$,createAnimatedStyle:lt,getComponentProps:ft},Tt=Ct=>{let At=I$1(Ct)||"Anonymous";return l$1.str(Ct)?Ct=Tt[Ct]||(Tt[Ct]=x(Ct,St)):Ct=Ct[j]||(Ct[j]=x(Ct,St)),Ct.displayName=`Animated(${At})`,Ct};return xt(dt,(Ct,At)=>{l$1.arr(dt)&&(At=I$1(Ct)),Tt[At]=Tt(Ct)}),{animated:Tt}},I$1=dt=>l$1.str(dt)?dt:dt&&l$1.str(dt.displayName)?dt.displayName:l$1.fun(dt)&&dt.name||null;function I(dt,...$){return l$1.fun(dt)?dt(...$):dt}var te=(dt,$)=>dt===!0||!!($&&dt&&(l$1.fun(dt)?dt($):ht$1(dt).includes($))),et=(dt,$)=>l$1.obj(dt)?$&&dt[$]:dt,ke=(dt,$)=>dt.default===!0?dt[$]:dt.default?dt.default[$]:void 0,nn=dt=>dt,ne=(dt,$=nn)=>{let lt=rn;dt.default&&dt.default!==!0&&(dt=dt.default,lt=Object.keys(dt));let ft={};for(let St of lt){let Tt=$(dt[St],St);l$1.und(Tt)||(ft[St]=Tt)}return ft},rn=["config","onProps","onStart","onChange","onPause","onResume","onRest"],on={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function sn(dt){let $={},lt=0;if(xt(dt,(ft,St)=>{on[St]||($[St]=ft,lt++)}),lt)return $}function de(dt){let $=sn(dt);if($){let lt={to:$};return xt(dt,(ft,St)=>St in $||(lt[St]=ft)),lt}return{...dt}}function me(dt){return dt=ve(dt),l$1.arr(dt)?dt.map(me):or(dt)?p.createStringInterpolator({range:[0,1],output:[dt,dt]})(1):dt}function Ue(dt){for(let $ in dt)return!0;return!1}function Ee(dt){return l$1.fun(dt)||l$1.arr(dt)&&l$1.obj(dt[0])}function xe(dt,$){var lt;(lt=dt.ref)==null||lt.delete(dt),$==null||$.delete(dt)}function he(dt,$){var lt;$&&dt.ref!==$&&((lt=dt.ref)==null||lt.delete(dt),$.add(dt),dt.ref=$)}var mt={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},tt={...mt.default,mass:1,damping:1,easing:Lt$1.linear,clamp:!1},we=class{constructor(){po(this,"tension");po(this,"friction");po(this,"frequency");po(this,"damping");po(this,"mass");po(this,"velocity",0);po(this,"restVelocity");po(this,"precision");po(this,"progress");po(this,"duration");po(this,"easing");po(this,"clamp");po(this,"bounce");po(this,"decay");po(this,"round");Object.assign(this,tt)}};function gt(dt,$,lt){lt&&(lt={...lt},ht(lt,$),$={...lt,...$}),ht(dt,$),Object.assign(dt,$);for(let Ct in tt)dt[Ct]==null&&(dt[Ct]=tt[Ct]);let{mass:ft,frequency:St,damping:Tt}=dt;return l$1.und(St)||(St<.01&&(St=.01),Tt<0&&(Tt=0),dt.tension=Math.pow(2*Math.PI/St,2)*ft,dt.friction=4*Math.PI*Tt*ft/St),dt}function ht(dt,$){if(!l$1.und($.decay))dt.duration=void 0;else{let lt=!l$1.und($.tension)||!l$1.und($.friction);(lt||!l$1.und($.frequency)||!l$1.und($.damping)||!l$1.und($.mass))&&(dt.duration=void 0,dt.decay=void 0),lt&&(dt.frequency=void 0)}}var yt=[],Le=class{constructor(){po(this,"changed",!1);po(this,"values",yt);po(this,"toValues",null);po(this,"fromValues",yt);po(this,"to");po(this,"from");po(this,"config",new we);po(this,"immediate",!1)}};function Me(dt,{key:$,props:lt,defaultProps:ft,state:St,actions:Tt}){return new Promise((Ct,At)=>{let Rt,kt,Nt=te(lt.cancel??(ft==null?void 0:ft.cancel),$);if(Nt)zt();else{l$1.und(lt.pause)||(St.paused=te(lt.pause,$));let Zt=ft==null?void 0:ft.pause;Zt!==!0&&(Zt=St.paused||te(Zt,$)),Rt=I(lt.delay||0,$),Zt?(St.resumeQueue.add(Ut),Tt.pause()):(Tt.resume(),Ut())}function Bt(){St.resumeQueue.add(Ut),St.timeouts.delete(kt),kt.cancel(),Rt=kt.time-n.now()}function Ut(){Rt>0&&!p.skipAnimation?(St.delayed=!0,kt=n.setTimeout(zt,Rt),St.pauseQueue.add(Bt),St.timeouts.add(kt)):zt()}function zt(){St.delayed&&(St.delayed=!1),St.pauseQueue.delete(Bt),St.timeouts.delete(kt),dt<=(St.cancelId||0)&&(Nt=!0);try{Tt.start({...lt,callId:dt,cancel:Nt},Ct)}catch(Zt){At(Zt)}}})}var be=(dt,$)=>$.length==1?$[0]:$.some(lt=>lt.cancelled)?q(dt.get()):$.every(lt=>lt.noop)?nt(dt.get()):E$1(dt.get(),$.every(lt=>lt.finished)),nt=dt=>({value:dt,noop:!0,finished:!0,cancelled:!1}),E$1=(dt,$,lt=!1)=>({value:dt,finished:$,cancelled:lt}),q=dt=>({value:dt,cancelled:!0,finished:!1});function De(dt,$,lt,ft){let{callId:St,parentId:Tt,onRest:Ct}=$,{asyncTo:At,promise:Rt}=lt;return!Tt&&dt===At&&!$.reset?Rt:lt.promise=(async()=>{lt.asyncId=St,lt.asyncTo=dt;let kt=ne($,(cn,hn)=>hn==="onRest"?void 0:cn),Nt,Bt,Ut=new Promise((cn,hn)=>(Nt=cn,Bt=hn)),zt=cn=>{let hn=St<=(lt.cancelId||0)&&q(ft)||St!==lt.asyncId&&E$1(ft,!1);if(hn)throw cn.result=hn,Bt(cn),cn},Zt=(cn,hn)=>{let pn=new Ae,dn=new Ne;return(async()=>{if(p.skipAnimation)throw oe(lt),dn.result=E$1(ft,!1),Bt(dn),dn;zt(pn);let gn=l$1.obj(cn)?{...cn}:{...hn,to:cn};gn.parentId=St,xt(kt,(Tn,Cn)=>{l$1.und(gn[Cn])&&(gn[Cn]=Tn)});let vn=await ft.start(gn);return zt(pn),lt.paused&&await new Promise(Tn=>{lt.resumeQueue.add(Tn)}),vn})()},ln;if(p.skipAnimation)return oe(lt),E$1(ft,!1);try{let cn;l$1.arr(dt)?cn=(async hn=>{for(let pn of hn)await Zt(pn)})(dt):cn=Promise.resolve(dt(Zt,ft.stop.bind(ft))),await Promise.all([cn.then(Nt),Ut]),ln=E$1(ft.get(),!0,!1)}catch(cn){if(cn instanceof Ae)ln=cn.result;else if(cn instanceof Ne)ln=cn.result;else throw cn}finally{St==lt.asyncId&&(lt.asyncId=Tt,lt.asyncTo=Tt?At:void 0,lt.promise=Tt?Rt:void 0)}return l$1.fun(Ct)&&n.batchedUpdates(()=>{Ct(ln,ft,ft.item)}),ln})()}function oe(dt,$){Pe$1(dt.timeouts,lt=>lt.cancel()),dt.pauseQueue.clear(),dt.resumeQueue.clear(),dt.asyncId=dt.asyncTo=dt.promise=void 0,$&&(dt.cancelId=$)}var Ae=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.");po(this,"result")}},Ne=class extends Error{constructor(){super("SkipAnimationSignal");po(this,"result")}},Re=dt=>dt instanceof X,Sn=1,X=class extends ge{constructor(){super(...arguments);po(this,"id",Sn++);po(this,"_priority",0)}get priority(){return this._priority}set priority($){this._priority!=$&&(this._priority=$,this._onPriorityChange($))}get(){let $=k(this);return $&&$.getValue()}to(...$){return p.to(this,$)}interpolate(...$){return Jt(),p.to(this,$)}toJSON(){return this.get()}observerAdded($){$==1&&this._attach()}observerRemoved($){$==0&&this._detach()}_attach(){}_detach(){}_onChange($,lt=!1){$t(this,{type:"change",parent:this,value:$,idle:lt})}_onPriorityChange($){this.idle||qe$1.sort(this),$t(this,{type:"priority",parent:this,priority:$})}},se=Symbol.for("SpringPhase"),bt=1,rt=2,ot=4,qe=dt=>(dt[se]&bt)>0,Q=dt=>(dt[se]&rt)>0,ye=dt=>(dt[se]&ot)>0,st=(dt,$)=>$?dt[se]|=rt|bt:dt[se]&=~rt,it=(dt,$)=>$?dt[se]|=ot:dt[se]&=~ot,ue=class extends X{constructor($,lt){super();po(this,"key");po(this,"animation",new Le);po(this,"queue");po(this,"defaultProps",{});po(this,"_state",{paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set});po(this,"_pendingCalls",new Set);po(this,"_lastCallId",0);po(this,"_lastToId",0);po(this,"_memoizedDuration",0);if(!l$1.und($)||!l$1.und(lt)){let ft=l$1.obj($)?{...$}:{...lt,from:$};l$1.und(ft.default)&&(ft.default=!0),this.start(ft)}}get idle(){return!(Q(this)||this._state.asyncTo)||ye(this)}get goal(){return ve(this.animation.to)}get velocity(){let $=k(this);return $ instanceof l?$.lastVelocity||0:$.getPayload().map(lt=>lt.lastVelocity||0)}get hasAnimated(){return qe(this)}get isAnimating(){return Q(this)}get isPaused(){return ye(this)}get isDelayed(){return this._state.delayed}advance($){let lt=!0,ft=!1,St=this.animation,{config:Tt,toValues:Ct}=St,At=F(St.to);!At&&Pt(St.to)&&(Ct=ht$1(ve(St.to))),St.values.forEach((Nt,Bt)=>{if(Nt.done)return;let Ut=Nt.constructor==d?1:At?At[Bt].lastPosition:Ct[Bt],zt=St.immediate,Zt=Ut;if(!zt){if(Zt=Nt.lastPosition,Tt.tension<=0){Nt.done=!0;return}let ln=Nt.elapsedTime+=$,cn=St.fromValues[Bt],hn=Nt.v0!=null?Nt.v0:Nt.v0=l$1.arr(Tt.velocity)?Tt.velocity[Bt]:Tt.velocity,pn,dn=Tt.precision||(cn==Ut?.005:Math.min(1,Math.abs(Ut-cn)*.001));if(l$1.und(Tt.duration))if(Tt.decay){let gn=Tt.decay===!0?.998:Tt.decay,vn=Math.exp(-(1-gn)*ln);Zt=cn+hn/(1-gn)*(1-vn),zt=Math.abs(Nt.lastPosition-Zt)<=dn,pn=hn*vn}else{pn=Nt.lastVelocity==null?hn:Nt.lastVelocity;let gn=Tt.restVelocity||dn/10,vn=Tt.clamp?0:Tt.bounce,Tn=!l$1.und(vn),Cn=cn==Ut?Nt.v0>0:cn<Ut,$n,xn=!1,Rn=1,Pn=Math.ceil($/Rn);for(let Nn=0;Nn<Pn&&($n=Math.abs(pn)>gn,!(!$n&&(zt=Math.abs(Ut-Zt)<=dn,zt)));++Nn){Tn&&(xn=Zt==Ut||Zt>Ut==Cn,xn&&(pn=-pn*vn,Zt=Ut));let Wn=-Tt.tension*1e-6*(Zt-Ut),zn=-Tt.friction*.001*pn,Yn=(Wn+zn)/Tt.mass;pn=pn+Yn*Rn,Zt=Zt+pn*Rn}}else{let gn=1;Tt.duration>0&&(this._memoizedDuration!==Tt.duration&&(this._memoizedDuration=Tt.duration,Nt.durationProgress>0&&(Nt.elapsedTime=Tt.duration*Nt.durationProgress,ln=Nt.elapsedTime+=$)),gn=(Tt.progress||0)+ln/this._memoizedDuration,gn=gn>1?1:gn<0?0:gn,Nt.durationProgress=gn),Zt=cn+Tt.easing(gn)*(Ut-cn),pn=(Zt-Nt.lastPosition)/$,zt=gn==1}Nt.lastVelocity=pn,Number.isNaN(Zt)&&(console.warn("Got NaN while animating:",this),zt=!0)}At&&!At[Bt].done&&(zt=!1),zt?Nt.done=!0:lt=!1,Nt.setValue(Zt,Tt.round)&&(ft=!0)});let Rt=k(this),kt=Rt.getValue();if(lt){let Nt=ve(St.to);(kt!==Nt||ft)&&!Tt.decay?(Rt.setValue(Nt),this._onChange(Nt)):ft&&Tt.decay&&this._onChange(kt),this._stop()}else ft&&this._onChange(kt)}set($){return n.batchedUpdates(()=>{this._stop(),this._focus($),this._set($)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Q(this)){let{to:$,config:lt}=this.animation;n.batchedUpdates(()=>{this._onStart(),lt.decay||this._set($,!1),this._stop()})}return this}update($){return(this.queue||(this.queue=[])).push($),this}start($,lt){let ft;return l$1.und($)?(ft=this.queue||[],this.queue=[]):ft=[l$1.obj($)?$:{...lt,to:$}],Promise.all(ft.map(St=>this._update(St))).then(St=>be(this,St))}stop($){let{to:lt}=this.animation;return this._focus(this.get()),oe(this._state,$&&this._lastCallId),n.batchedUpdates(()=>this._stop(lt,$)),this}reset(){this._update({reset:!0})}eventObserved($){$.type=="change"?this._start():$.type=="priority"&&(this.priority=$.priority+1)}_prepareNode($){let lt=this.key||"",{to:ft,from:St}=$;ft=l$1.obj(ft)?ft[lt]:ft,(ft==null||Ee(ft))&&(ft=void 0),St=l$1.obj(St)?St[lt]:St,St==null&&(St=void 0);let Tt={to:ft,from:St};return qe(this)||($.reverse&&([ft,St]=[St,ft]),St=ve(St),l$1.und(St)?k(this)||this._set(ft):this._set(St)),Tt}_update({...$},lt){let{key:ft,defaultProps:St}=this;$.default&&Object.assign(St,ne($,(At,Rt)=>/^on/.test(Rt)?et(At,ft):At)),_t(this,$,"onProps"),Ie(this,"onProps",$,this);let Tt=this._prepareNode($);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");let Ct=this._state;return Me(++this._lastCallId,{key:ft,props:$,defaultProps:St,state:Ct,actions:{pause:()=>{ye(this)||(it(this,!0),yt$1(Ct.pauseQueue),Ie(this,"onPause",E$1(this,Ce(this,this.animation.to)),this))},resume:()=>{ye(this)&&(it(this,!1),Q(this)&&this._resume(),yt$1(Ct.resumeQueue),Ie(this,"onResume",E$1(this,Ce(this,this.animation.to)),this))},start:this._merge.bind(this,Tt)}}).then(At=>{if($.loop&&At.finished&&!(lt&&At.noop)){let Rt=at($);if(Rt)return this._update(Rt,!0)}return At})}_merge($,lt,ft){if(lt.cancel)return this.stop(!0),ft(q(this));let St=!l$1.und($.to),Tt=!l$1.und($.from);if(St||Tt)if(lt.callId>this._lastToId)this._lastToId=lt.callId;else return ft(q(this));let{key:Ct,defaultProps:At,animation:Rt}=this,{to:kt,from:Nt}=Rt,{to:Bt=kt,from:Ut=Nt}=$;Tt&&!St&&(!lt.default||l$1.und(Bt))&&(Bt=Ut),lt.reverse&&([Bt,Ut]=[Ut,Bt]);let zt=!bt$1(Ut,Nt);zt&&(Rt.from=Ut),Ut=ve(Ut);let Zt=!bt$1(Bt,kt);Zt&&this._focus(Bt);let ln=Ee(lt.to),{config:cn}=Rt,{decay:hn,velocity:pn}=cn;(St||Tt)&&(cn.velocity=0),lt.config&&!ln&&gt(cn,I(lt.config,Ct),lt.config!==At.config?I(At.config,Ct):void 0);let dn=k(this);if(!dn||l$1.und(Bt))return ft(E$1(this,!0));let gn=l$1.und(lt.reset)?Tt&&!lt.default:!l$1.und(Ut)&&te(lt.reset,Ct),vn=gn?Ut:this.get(),Tn=me(Bt),Cn=l$1.num(Tn)||l$1.arr(Tn)||or(Tn),$n=!ln&&(!Cn||te(At.immediate||lt.immediate,Ct));if(Zt){let Nn=Le$1(Bt);if(Nn!==dn.constructor)if($n)dn=this._set(Tn);else throw Error(`Cannot animate between ${dn.constructor.name} and ${Nn.name}, as the "to" prop suggests`)}let xn=dn.constructor,Rn=Pt(Bt),Pn=!1;if(!Rn){let Nn=gn||!qe(this)&&zt;(Zt||Nn)&&(Pn=bt$1(me(vn),Tn),Rn=!Pn),(!bt$1(Rt.immediate,$n)&&!$n||!bt$1(cn.decay,hn)||!bt$1(cn.velocity,pn))&&(Rn=!0)}if(Pn&&Q(this)&&(Rt.changed&&!gn?Rn=!0:Rn||this._stop(kt)),!ln&&((Rn||Pt(kt))&&(Rt.values=dn.getPayload(),Rt.toValues=Pt(Bt)?null:xn==d?[1]:ht$1(Tn)),Rt.immediate!=$n&&(Rt.immediate=$n,!$n&&!gn&&this._set(kt)),Rn)){let{onRest:Nn}=Rt;Ve(_n,zn=>_t(this,lt,zn));let Wn=E$1(this,Ce(this,kt));yt$1(this._pendingCalls,Wn),this._pendingCalls.add(ft),Rt.changed&&n.batchedUpdates(()=>{var zn;Rt.changed=!gn,Nn==null||Nn(Wn,this),gn?I(At.onRest,Wn):(zn=Rt.onStart)==null||zn.call(Rt,Wn,this)})}gn&&this._set(vn),ln?ft(De(lt.to,lt,this._state,this)):Rn?this._start():Q(this)&&!Zt?this._pendingCalls.add(ft):ft(nt(vn))}_focus($){let lt=this.animation;$!==lt.to&&(qt(this)&&this._detach(),lt.to=$,qt(this)&&this._attach())}_attach(){let $=0,{to:lt}=this.animation;Pt(lt)&&(Gt(lt,this),Re(lt)&&($=lt.priority+1)),this.priority=$}_detach(){let{to:$}=this.animation;Pt($)&&Qt($,this)}_set($,lt=!0){let ft=ve($);if(!l$1.und(ft)){let St=k(this);if(!St||!bt$1(ft,St.getValue())){let Tt=Le$1(ft);!St||St.constructor!=Tt?D(this,Tt.create(ft)):St.setValue(ft),St&&n.batchedUpdates(()=>{this._onChange(ft,lt)})}}return k(this)}_onStart(){let $=this.animation;$.changed||($.changed=!0,Ie(this,"onStart",E$1(this,Ce(this,$.to)),this))}_onChange($,lt){lt||(this._onStart(),I(this.animation.onChange,$,this)),I(this.defaultProps.onChange,$,this),super._onChange($,lt)}_start(){let $=this.animation;k(this).reset(ve($.to)),$.immediate||($.fromValues=$.values.map(lt=>lt.lastPosition)),Q(this)||(st(this,!0),ye(this)||this._resume())}_resume(){p.skipAnimation?this.finish():qe$1.start(this)}_stop($,lt){if(Q(this)){st(this,!1);let ft=this.animation;Ve(ft.values,Tt=>{Tt.done=!0}),ft.toValues&&(ft.onChange=ft.onPause=ft.onResume=void 0),$t(this,{type:"idle",parent:this});let St=lt?q(this.get()):E$1(this.get(),Ce(this,$??ft.to));yt$1(this._pendingCalls,St),ft.changed&&(ft.changed=!1,Ie(this,"onRest",St,this))}}};function Ce(dt,$){let lt=me($),ft=me(dt.get());return bt$1(ft,lt)}function at(dt,$=dt.loop,lt=dt.to){let ft=I($);if(ft){let St=ft!==!0&&de(ft),Tt=(St||dt).reverse,Ct=!St||St.reset;return Pe({...dt,loop:$,default:!1,pause:void 0,to:!Tt||Ee(lt)?lt:void 0,from:Ct?dt.from:void 0,reset:Ct,...St})}}function Pe(dt){let{to:$,from:lt}=dt=de(dt),ft=new Set;return l$1.obj($)&&Vt($,ft),l$1.obj(lt)&&Vt(lt,ft),dt.keys=ft.size?Array.from(ft):null,dt}function Ot(dt){let $=Pe(dt);return l$1.und($.default)&&($.default=ne($)),$}function Vt(dt,$){xt(dt,(lt,ft)=>lt!=null&&$.add(ft))}var _n=["onStart","onRest","onChange","onPause","onResume"];function _t(dt,$,lt){dt.animation[lt]=$[lt]!==ke($,lt)?et($[lt],dt.key):void 0}function Ie(dt,$,...lt){var ft,St,Tt,Ct;(St=(ft=dt.animation)[$])==null||St.call(ft,...lt),(Ct=(Tt=dt.defaultProps)[$])==null||Ct.call(Tt,...lt)}var Fn=["onStart","onChange","onRest"],kn=1,le=class{constructor(dt,$){po(this,"id",kn++);po(this,"springs",{});po(this,"queue",[]);po(this,"ref");po(this,"_flush");po(this,"_initialProps");po(this,"_lastAsyncId",0);po(this,"_active",new Set);po(this,"_changed",new Set);po(this,"_started",!1);po(this,"_item");po(this,"_state",{paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set});po(this,"_events",{onStart:new Map,onChange:new Map,onRest:new Map});this._onFrame=this._onFrame.bind(this),$&&(this._flush=$),dt&&this.start({default:!0,...dt})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(dt=>dt.idle&&!dt.isDelayed&&!dt.isPaused)}get item(){return this._item}set item(dt){this._item=dt}get(){let dt={};return this.each(($,lt)=>dt[lt]=$.get()),dt}set(dt){for(let $ in dt){let lt=dt[$];l$1.und(lt)||this.springs[$].set(lt)}}update(dt){return dt&&this.queue.push(Pe(dt)),this}start(dt){let{queue:$}=this;return dt?$=ht$1(dt).map(Pe):this.queue=[],this._flush?this._flush(this,$):(jt(this,$),ze(this,$))}stop(dt,$){if(dt!==!!dt&&($=dt),$){let lt=this.springs;Ve(ht$1($),ft=>lt[ft].stop(!!dt))}else oe(this._state,this._lastAsyncId),this.each(lt=>lt.stop(!!dt));return this}pause(dt){if(l$1.und(dt))this.start({pause:!0});else{let $=this.springs;Ve(ht$1(dt),lt=>$[lt].pause())}return this}resume(dt){if(l$1.und(dt))this.start({pause:!1});else{let $=this.springs;Ve(ht$1(dt),lt=>$[lt].resume())}return this}each(dt){xt(this.springs,dt)}_onFrame(){let{onStart:dt,onChange:$,onRest:lt}=this._events,ft=this._active.size>0,St=this._changed.size>0;(ft&&!this._started||St&&!this._started)&&(this._started=!0,Pe$1(dt,([At,Rt])=>{Rt.value=this.get(),At(Rt,this,this._item)}));let Tt=!ft&&this._started,Ct=St||Tt&&lt.size?this.get():null;St&&$.size&&Pe$1($,([At,Rt])=>{Rt.value=Ct,At(Rt,this,this._item)}),Tt&&(this._started=!1,Pe$1(lt,([At,Rt])=>{Rt.value=Ct,At(Rt,this,this._item)}))}eventObserved(dt){if(dt.type=="change")this._changed.add(dt.parent),dt.idle||this._active.add(dt.parent);else if(dt.type=="idle")this._active.delete(dt.parent);else return;n.onFrame(this._onFrame)}};function ze(dt,$){return Promise.all($.map(lt=>wt(dt,lt))).then(lt=>be(dt,lt))}async function wt(dt,$,lt){let{keys:ft,to:St,from:Tt,loop:Ct,onRest:At,onResolve:Rt}=$,kt=l$1.obj($.default)&&$.default;Ct&&($.loop=!1),St===!1&&($.to=null),Tt===!1&&($.from=null);let Nt=l$1.arr(St)||l$1.fun(St)?St:void 0;Nt?($.to=void 0,$.onRest=void 0,kt&&(kt.onRest=void 0)):Ve(Fn,ln=>{let cn=$[ln];if(l$1.fun(cn)){let hn=dt._events[ln];$[ln]=({finished:pn,cancelled:dn})=>{let gn=hn.get(cn);gn?(pn||(gn.finished=!1),dn&&(gn.cancelled=!0)):hn.set(cn,{value:null,finished:pn||!1,cancelled:dn||!1})},kt&&(kt[ln]=$[ln])}});let Bt=dt._state;$.pause===!Bt.paused?(Bt.paused=$.pause,yt$1($.pause?Bt.pauseQueue:Bt.resumeQueue)):Bt.paused&&($.pause=!0);let Ut=(ft||Object.keys(dt.springs)).map(ln=>dt.springs[ln].start($)),zt=$.cancel===!0||ke($,"cancel")===!0;(Nt||zt&&Bt.asyncId)&&Ut.push(Me(++dt._lastAsyncId,{props:$,state:Bt,actions:{pause:Y,resume:Y,start(ln,cn){zt?(oe(Bt,dt._lastAsyncId),cn(q(dt))):(ln.onRest=At,cn(De(Nt,ln,Bt,dt)))}}})),Bt.paused&&await new Promise(ln=>{Bt.resumeQueue.add(ln)});let Zt=be(dt,await Promise.all(Ut));if(Ct&&Zt.finished&&!(lt&&Zt.noop)){let ln=at($,Ct,St);if(ln)return jt(dt,[ln]),wt(dt,ln,!0)}return Rt&&n.batchedUpdates(()=>Rt(Zt,dt,dt.item)),Zt}function _e(dt,$){let lt={...dt.springs};return $&&Ve(ht$1($),ft=>{l$1.und(ft.keys)&&(ft=Pe(ft)),l$1.obj(ft.to)||(ft={...ft,to:void 0}),Mt(lt,ft,St=>Lt(St))}),pt(dt,lt),lt}function pt(dt,$){xt($,(lt,ft)=>{dt.springs[ft]||(dt.springs[ft]=lt,Gt(lt,dt))})}function Lt(dt,$){let lt=new ue;return lt.key=dt,$&&Gt(lt,$),lt}function Mt(dt,$,lt){$.keys&&Ve($.keys,ft=>{(dt[ft]||(dt[ft]=lt(ft)))._prepareNode($)})}function jt(dt,$){Ve($,lt=>{Mt(dt.springs,lt,ft=>Lt(ft,dt))})}var H=({children:dt,...$})=>{let lt=reactExports.useContext(Ge),ft=$.pause||!!lt.pause,St=$.immediate||!!lt.immediate;$=Lr(()=>({pause:ft,immediate:St}),[ft,St]);let{Provider:Tt}=Ge;return reactExports.createElement(Tt,{value:$},dt)},Ge=wn(H,{});H.Provider=Ge.Provider;H.Consumer=Ge.Consumer;function wn(dt,$){return Object.assign(dt,reactExports.createContext($)),dt.Provider._context=dt,dt.Consumer._context=dt,dt}var fe=()=>{let dt=[],$=function(ft){er();let St=[];return Ve(dt,(Tt,Ct)=>{if(l$1.und(ft))St.push(Tt.start());else{let At=lt(ft,Tt,Ct);At&&St.push(Tt.start(At))}}),St};$.current=dt,$.add=function(ft){dt.includes(ft)||dt.push(ft)},$.delete=function(ft){let St=dt.indexOf(ft);~St&&dt.splice(St,1)},$.pause=function(){return Ve(dt,ft=>ft.pause(...arguments)),this},$.resume=function(){return Ve(dt,ft=>ft.resume(...arguments)),this},$.set=function(ft){Ve(dt,(St,Tt)=>{let Ct=l$1.fun(ft)?ft(Tt,St):ft;Ct&&St.set(Ct)})},$.start=function(ft){let St=[];return Ve(dt,(Tt,Ct)=>{if(l$1.und(ft))St.push(Tt.start());else{let At=this._getProps(ft,Tt,Ct);At&&St.push(Tt.start(At))}}),St},$.stop=function(){return Ve(dt,ft=>ft.stop(...arguments)),this},$.update=function(ft){return Ve(dt,(St,Tt)=>St.update(this._getProps(ft,St,Tt))),this};let lt=function(ft,St,Tt){return l$1.fun(ft)?ft(Tt,St):ft};return $._getProps=lt,$};function He(dt,$,lt){let ft=l$1.fun($)&&$;ft&&!lt&&(lt=[]);let St=reactExports.useMemo(()=>ft||arguments.length==3?fe():void 0,[]),Tt=reactExports.useRef(0),Ct=Mr(),At=reactExports.useMemo(()=>({ctrls:[],queue:[],flush(hn,pn){let dn=_e(hn,pn);return Tt.current>0&&!At.queue.length&&!Object.keys(dn).some(gn=>!hn.springs[gn])?ze(hn,pn):new Promise(gn=>{pt(hn,dn),At.queue.push(()=>{gn(ze(hn,pn))}),Ct()})}}),[]),Rt=reactExports.useRef([...At.ctrls]),kt=[],Nt=Ur(dt)||0;reactExports.useMemo(()=>{Ve(Rt.current.slice(dt,Nt),hn=>{xe(hn,St),hn.stop(!0)}),Rt.current.length=dt,Bt(Nt,dt)},[dt]),reactExports.useMemo(()=>{Bt(0,Math.min(Nt,dt))},lt);function Bt(hn,pn){for(let dn=hn;dn<pn;dn++){let gn=Rt.current[dn]||(Rt.current[dn]=new le(null,At.flush)),vn=ft?ft(dn,gn):$[dn];vn&&(kt[dn]=Ot(vn))}}let Ut=Rt.current.map((hn,pn)=>_e(hn,kt[pn])),zt=reactExports.useContext(H),Zt=Ur(zt),ln=zt!==Zt&&Ue(zt);Q$1(()=>{Tt.current++,At.ctrls=Rt.current;let{queue:hn}=At;hn.length&&(At.queue=[],Ve(hn,pn=>pn())),Ve(Rt.current,(pn,dn)=>{St==null||St.add(pn),ln&&pn.start({default:zt});let gn=kt[dn];gn&&(he(pn,gn.ref),pn.ref?pn.queue.push(gn):pn.start(gn))})}),$r(()=>()=>{Ve(At.ctrls,hn=>hn.stop(!0))});let cn=Ut.map(hn=>({...hn}));return St?[cn,St]:cn}function J(dt,$){let lt=l$1.fun(dt),[[ft],St]=He(1,lt?dt:[dt],lt?$||[]:$);return lt||arguments.length==2?[ft,St]:ft}var W=class extends X{constructor($,lt){super();po(this,"key");po(this,"idle",!0);po(this,"calc");po(this,"_active",new Set);this.source=$,this.calc=W$1(...lt);let ft=this._get(),St=Le$1(ft);D(this,St.create(ft))}advance($){let lt=this._get(),ft=this.get();bt$1(lt,ft)||(k(this).setValue(lt),this._onChange(lt,this.idle)),!this.idle&&Yt(this._active)&&ct(this)}_get(){let $=l$1.arr(this.source)?this.source.map(ve):ht$1(ve(this.source));return this.calc(...$)}_start(){this.idle&&!Yt(this._active)&&(this.idle=!1,Ve(F(this),$=>{$.done=!1}),p.skipAnimation?(n.batchedUpdates(()=>this.advance()),ct(this)):qe$1.start(this))}_attach(){let $=1;Ve(ht$1(this.source),lt=>{Pt(lt)&&Gt(lt,this),Re(lt)&&(lt.idle||this._active.add(lt),$=Math.max($,lt.priority+1))}),this.priority=$,this._start()}_detach(){Ve(ht$1(this.source),$=>{Pt($)&&Qt($,this)}),this._active.clear(),ct(this)}eventObserved($){$.type=="change"?$.idle?this.advance():(this._active.add($.parent),this._start()):$.type=="idle"?this._active.delete($.parent):$.type=="priority"&&(this.priority=ht$1(this.source).reduce((lt,ft)=>Math.max(lt,(Re(ft)?ft.priority:0)+1),0))}};function vr(dt){return dt.idle!==!1}function Yt(dt){return!dt.size||Array.from(dt).every(vr)}function ct(dt){dt.idle||(dt.idle=!0,Ve(F(dt),$=>{$.done=!0}),$t(dt,{type:"idle",parent:dt}))}p.assign({createStringInterpolator:Xt,to:(dt,$)=>new W(dt,$)});var o=["primitive"].concat(Object.keys(r$5).filter(dt=>/^[A-Z]/.test(dt)).map(dt=>dt[0].toLowerCase()+dt.slice(1)));p.assign({createStringInterpolator:Xt,colors:It,frameLoop:"demand"});addEffect(()=>{n.advance()});var f=Ke(o,{applyAnimatedValues:applyProps}),E=f.animated;const BezierControlPoint=({id:dt,point:$})=>{const[lt,ft]=reactExports.useState(void 0),St=useCurveEditorState(zt=>zt.selectedControlPoint),Tt=useCurveEditorState(zt=>zt.setSelectedControlPoint),Ct=useCurveEditorState(zt=>zt.updateBezierControlPoint),{size:At,viewport:Rt,camera:kt}=useThree();Rt.aspect;const[Nt,Bt]=J(()=>({scale:[1,1,1],position:[$.x,$.y,$.z],config:{mass:1,tension:0,friction:18}})),Ut=useGesture({onDrag:({xy:[zt,Zt]})=>{if(!lt)return;const ln=new Raycaster;ln.setFromCamera({x:(zt-Rt.left)/At.width*2-1,y:-((Zt-Rt.top)/At.height)*2+1},kt);const cn=new Plane$1;cn.setFromNormalAndCoplanarPoint(kt.getWorldDirection(new Vector3(0,0,1)),lt);const hn=new Vector3;ln.ray.intersectPlane(cn,hn),Bt({position:hn.toArray()}),Ct(dt,hn.clone())},onHover:({hovering:zt})=>{Bt({scale:zt?[1.2,1.2,1.2]:[1,1,1]})},onDragStart:()=>{Tt(dt);const[zt,Zt,ln]=Nt.position.get();ft(new Vector3(zt,Zt,ln))},onDragEnd:()=>{ft(void 0),Tt(void 0)}});return jsx(E.mesh,{...Nt,...Ut(),castShadow:!0,children:jsx(Sphere,{scale:.2,children:jsx("meshBasicMaterial",{color:St===dt?"#FF00FF":"#000000"})})})},CurveEditor=()=>{const dt=useCurveEditorState(Tt=>Tt.bezierControlPoints),$=useCurveEditorState(Tt=>Tt.bezierLinePoints),lt=useCurveEditorState(Tt=>Tt.selectedControlPoint),ft=dt.length,St=reactExports.useRef();return useFrame(({clock:Tt})=>{var Rt;const Ct=Tt.getElapsedTime(),At=computeBezierPoint(dt,Ct%ft/ft);(Rt=St.current)==null||Rt.position.set(At.x,At.y,At.z)}),jsxs(Fragment,{children:[jsx(OrbitControls,{maxPolarAngle:Math.PI*(1/2-1/10),minPolarAngle:0,maxDistance:20,enableRotate:lt===void 0}),jsx(Environment,{preset:"warehouse"}),jsx(GizmoHelper,{alignment:"bottom-right",margin:[80,80],children:jsx(GizmoViewport,{axisColors:["#9d4b4b","#2f7f4f","#3b5b9d"],labelColor:"white"})}),jsx(Grid,{position:[0,-.001,0],args:[10.5,10.5],cellSize:1,cellThickness:1,cellColor:"black",fadeDistance:50,fadeStrength:1.2,infiniteGrid:!0}),jsx("ambientLight",{intensity:.1}),jsx("directionalLight",{color:"blue",position:[0,5,5]}),jsx(Sky,{distance:45e4,sunPosition:[0,1,0],inclination:0,azimuth:.25}),jsxs("group",{children:[dt.map((Tt,Ct)=>jsx(BezierControlPoint,{id:Ct,point:Tt},Ct)),jsx("group",{ref:St,children:jsx(Crazyflie,{})}),jsx(CatmullRomLine,{points:$,closed:!1,curveType:"centripetal",tension:.5,color:"black",lineWidth:3,dashed:!0,dashSize:.5,dashScale:5})]})]})},CurveEditorModal=()=>{const[dt,$]=reactExports.useState([]),lt=useUIState(Rt=>Rt.curveEditorOpen),ft=useUIState(Rt=>Rt.toggleCurveEditor),St=useCurveEditorState(Rt=>Rt.bezierControlPoints),Tt=useCurveEditorState(Rt=>Rt.addBezierControlPoint),Ct=useCurveEditorState(Rt=>Rt.selectedControlPoint),At=useCurveEditorState(Rt=>Rt.bezierControlPoints.length);return reactExports.useEffect(()=>{$(St)},[Ct,At]),jsxs(Modal,{show:lt,onClose:ft,className:"!w-full",size:"w-full h-5/6",children:[jsx(Modal.Header,{children:"Curve Editor"}),jsx(Modal.Body,{className:"h-[80vh]",children:jsxs("div",{className:"flex h-full flex-row",children:[jsxs("div",{className:"w-1/4",children:[jsx(IconButton,{icon:faPlus,text:"Add Point",onClick:()=>Tt(new Vector3(1,1,1))}),jsx(VectorEditor,{points:dt}),jsx("div",{className:"flex flex-col gap-2"})]}),jsx("div",{className:"flex h-full flex-grow",children:jsx(Canvas,{children:jsx(CurveEditor,{})})})]})}),jsx(Modal.Footer,{})]})},SettingsModal=()=>{const dt=useUIState(Rt=>Rt.settingsModalOpen),$=useUIState(Rt=>Rt.toggleSettingsModal),lt=useRobartState(Rt=>Rt.resetProject),ft=useRobartState(Rt=>Rt.projectName),St=useRobartState(Rt=>Rt.setProjectName),Tt=useUIState(Rt=>Rt.toggleCurveEditor),[Ct,At]=reactExports.useState(!1);return jsxs(Fragment,{children:[jsxs(Modal,{show:dt,onClose:$,children:[jsx(Modal.Header,{children:"Settings"}),jsx(Modal.Body,{children:jsxs(Tabs.Group,{style:"default",children:[jsxs(Tabs.Item,{active:!0,title:"Project",children:["Profile content",jsxs("div",{children:[jsx("div",{className:"mb-2 block",children:jsx(Label,{value:"Project Name"})}),jsx(TextInput,{value:ft,onChange:Rt=>St(Rt.target.value)})]})]}),jsx(Tabs.Item,{title:"Blocks",children:"Block Settings"}),jsx(Tabs.Item,{title:"Preferences",children:"User Preferences"}),jsx(Tabs.Item,{title:"Utilities",children:jsx(Button,{onClick:Tt,children:"Curve Editor"})})]})}),jsxs(Modal.Footer,{children:[jsx(CancelButton,{onClick:$}),jsx(IconButton,{color:"warning",text:"Reset Project",icon:faSync,onClick:()=>At(!0)})]})]}),jsx(ConfirmationModal,{header:"Confirm Reset Project",open:Ct,onCancel:()=>At(!1),onConfirm:()=>{lt(),At(!1),$()},children:"Are you sure?"}),jsx(CurveEditorModal,{})]})},NavigationBar=()=>{const[dt,$]=reactExports.useState(!1),lt=useRobartState(Rt=>Rt.saveProject),ft=useRobartState(Rt=>Rt.exportToROS),St=useRobartState(Rt=>Rt.loadProject),Tt=useUIState(Rt=>Rt.toggleSettingsModal),Ct=useRobartState(Rt=>Rt.projectName),At=useRobartState(Rt=>Rt.setProjectName);return jsxs(Fragment,{children:[jsxs("div",{className:"flex items-center gap-5 border-b-2 border-black p-4",children:[jsx(RenamableText,{className:"text-4xl font-extrabold",text:Ct,updateText:Rt=>{At(Rt!==""?Rt:"New Robart Project")}}),jsxs("div",{className:"flex flex-grow justify-end gap-3",children:[jsx(IconButton,{icon:faDownload,text:"Export To ROS",onClick:()=>ft("test.txt")}),jsx(IconButton,{icon:faDownload,text:"Save Project",onClick:()=>lt()}),jsx(IconButton,{icon:faUpload,text:"Load Project",onClick:()=>$(!0)}),jsx(IconButton,{icon:faGear,text:"Settings",onClick:()=>Tt()})]})]}),jsx(UploadFileModal,{header:"Load Project",open:dt,onClose:()=>$(!1),onFileUpload:St}),jsx(SettingsModal,{})]})},DefaultBufferLength=1024;let nextPropID=0,Range$1=class{constructor($,lt){this.from=$,this.to=lt}};class NodeProp{constructor($={}){this.id=nextPropID++,this.perNode=!!$.perNode,this.deserialize=$.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add($){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof $!="function"&&($=NodeType.match($)),lt=>{let ft=$(lt);return ft===void 0?null:[this,ft]}}}NodeProp.closedBy=new NodeProp({deserialize:dt=>dt.split(" ")});NodeProp.openedBy=new NodeProp({deserialize:dt=>dt.split(" ")});NodeProp.group=new NodeProp({deserialize:dt=>dt.split(" ")});NodeProp.contextHash=new NodeProp({perNode:!0});NodeProp.lookAhead=new NodeProp({perNode:!0});NodeProp.mounted=new NodeProp({perNode:!0});const noProps=Object.create(null);class NodeType{constructor($,lt,ft,St=0){this.name=$,this.props=lt,this.id=ft,this.flags=St}static define($){let lt=$.props&&$.props.length?Object.create(null):noProps,ft=($.top?1:0)|($.skipped?2:0)|($.error?4:0)|($.name==null?8:0),St=new NodeType($.name||"",lt,$.id,ft);if($.props){for(let Tt of $.props)if(Array.isArray(Tt)||(Tt=Tt(St)),Tt){if(Tt[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");lt[Tt[0].id]=Tt[1]}}return St}prop($){return this.props[$.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is($){if(typeof $=="string"){if(this.name==$)return!0;let lt=this.prop(NodeProp.group);return lt?lt.indexOf($)>-1:!1}return this.id==$}static match($){let lt=Object.create(null);for(let ft in $)for(let St of ft.split(" "))lt[St]=$[ft];return ft=>{for(let St=ft.prop(NodeProp.group),Tt=-1;Tt<(St?St.length:0);Tt++){let Ct=lt[Tt<0?ft.name:St[Tt]];if(Ct)return Ct}}}}NodeType.none=new NodeType("",Object.create(null),0,8);class NodeSet{constructor($){this.types=$;for(let lt=0;lt<$.length;lt++)if($[lt].id!=lt)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...$){let lt=[];for(let ft of this.types){let St=null;for(let Tt of $){let Ct=Tt(ft);Ct&&(St||(St=Object.assign({},ft.props)),St[Ct[0].id]=Ct[1])}lt.push(St?new NodeType(ft.name,St,ft.id,ft.flags):ft)}return new NodeSet(lt)}}const CachedNode=new WeakMap,CachedInnerNode=new WeakMap;var IterMode;(function(dt){dt[dt.ExcludeBuffers=1]="ExcludeBuffers",dt[dt.IncludeAnonymous=2]="IncludeAnonymous",dt[dt.IgnoreMounts=4]="IgnoreMounts",dt[dt.IgnoreOverlays=8]="IgnoreOverlays"})(IterMode||(IterMode={}));class Tree{constructor($,lt,ft,St,Tt){if(this.type=$,this.children=lt,this.positions=ft,this.length=St,this.props=null,Tt&&Tt.length){this.props=Object.create(null);for(let[Ct,At]of Tt)this.props[typeof Ct=="number"?Ct:Ct.id]=At}}toString(){let $=this.prop(NodeProp.mounted);if($&&!$.overlay)return $.tree.toString();let lt="";for(let ft of this.children){let St=ft.toString();St&&(lt&&(lt+=","),lt+=St)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(lt.length?"("+lt+")":""):lt}cursor($=0){return new TreeCursor(this.topNode,$)}cursorAt($,lt=0,ft=0){let St=CachedNode.get(this)||this.topNode,Tt=new TreeCursor(St);return Tt.moveTo($,lt),CachedNode.set(this,Tt._tree),Tt}get topNode(){return new TreeNode(this,0,0,null)}resolve($,lt=0){let ft=resolveNode(CachedNode.get(this)||this.topNode,$,lt,!1);return CachedNode.set(this,ft),ft}resolveInner($,lt=0){let ft=resolveNode(CachedInnerNode.get(this)||this.topNode,$,lt,!0);return CachedInnerNode.set(this,ft),ft}iterate($){let{enter:lt,leave:ft,from:St=0,to:Tt=this.length}=$;for(let Ct=this.cursor(($.mode||0)|IterMode.IncludeAnonymous);;){let At=!1;if(Ct.from<=Tt&&Ct.to>=St&&(Ct.type.isAnonymous||lt(Ct)!==!1)){if(Ct.firstChild())continue;At=!0}for(;At&&ft&&!Ct.type.isAnonymous&&ft(Ct),!Ct.nextSibling();){if(!Ct.parent())return;At=!0}}}prop($){return $.perNode?this.props?this.props[$.id]:void 0:this.type.prop($)}get propValues(){let $=[];if(this.props)for(let lt in this.props)$.push([+lt,this.props[lt]]);return $}balance($={}){return this.children.length<=8?this:balanceRange(NodeType.none,this.children,this.positions,0,this.children.length,0,this.length,(lt,ft,St)=>new Tree(this.type,lt,ft,St,this.propValues),$.makeTree||((lt,ft,St)=>new Tree(NodeType.none,lt,ft,St)))}static build($){return buildTree($)}}Tree.empty=new Tree(NodeType.none,[],[],0);class FlatBufferCursor{constructor($,lt){this.buffer=$,this.index=lt}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new FlatBufferCursor(this.buffer,this.index)}}class TreeBuffer{constructor($,lt,ft){this.buffer=$,this.length=lt,this.set=ft}get type(){return NodeType.none}toString(){let $=[];for(let lt=0;lt<this.buffer.length;)$.push(this.childString(lt)),lt=this.buffer[lt+3];return $.join(",")}childString($){let lt=this.buffer[$],ft=this.buffer[$+3],St=this.set.types[lt],Tt=St.name;if(/\W/.test(Tt)&&!St.isError&&(Tt=JSON.stringify(Tt)),$+=4,ft==$)return Tt;let Ct=[];for(;$<ft;)Ct.push(this.childString($)),$=this.buffer[$+3];return Tt+"("+Ct.join(",")+")"}findChild($,lt,ft,St,Tt){let{buffer:Ct}=this,At=-1;for(let Rt=$;Rt!=lt&&!(checkSide(Tt,St,Ct[Rt+1],Ct[Rt+2])&&(At=Rt,ft>0));Rt=Ct[Rt+3]);return At}slice($,lt,ft){let St=this.buffer,Tt=new Uint16Array(lt-$),Ct=0;for(let At=$,Rt=0;At<lt;){Tt[Rt++]=St[At++],Tt[Rt++]=St[At++]-ft;let kt=Tt[Rt++]=St[At++]-ft;Tt[Rt++]=St[At++]-$,Ct=Math.max(Ct,kt)}return new TreeBuffer(Tt,Ct,this.set)}}function checkSide(dt,$,lt,ft){switch(dt){case-2:return lt<$;case-1:return ft>=$&&lt<$;case 0:return lt<$&&ft>$;case 1:return lt<=$&&ft>$;case 2:return ft>$;case 4:return!0}}function enterUnfinishedNodesBefore(dt,$){let lt=dt.childBefore($);for(;lt;){let ft=lt.lastChild;if(!ft||ft.to!=lt.to)break;ft.type.isError&&ft.from==ft.to?(dt=lt,lt=ft.prevSibling):lt=ft}return dt}function resolveNode(dt,$,lt,ft){for(var St;dt.from==dt.to||(lt<1?dt.from>=$:dt.from>$)||(lt>-1?dt.to<=$:dt.to<$);){let Ct=!ft&&dt instanceof TreeNode&&dt.index<0?null:dt.parent;if(!Ct)return dt;dt=Ct}let Tt=ft?0:IterMode.IgnoreOverlays;if(ft)for(let Ct=dt,At=Ct.parent;At;Ct=At,At=Ct.parent)Ct instanceof TreeNode&&Ct.index<0&&((St=At.enter($,lt,Tt))===null||St===void 0?void 0:St.from)!=Ct.from&&(dt=At);for(;;){let Ct=dt.enter($,lt,Tt);if(!Ct)return dt;dt=Ct}}class TreeNode{constructor($,lt,ft,St){this._tree=$,this.from=lt,this.index=ft,this._parent=St}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild($,lt,ft,St,Tt=0){for(let Ct=this;;){for(let{children:At,positions:Rt}=Ct._tree,kt=lt>0?At.length:-1;$!=kt;$+=lt){let Nt=At[$],Bt=Rt[$]+Ct.from;if(checkSide(St,ft,Bt,Bt+Nt.length)){if(Nt instanceof TreeBuffer){if(Tt&IterMode.ExcludeBuffers)continue;let Ut=Nt.findChild(0,Nt.buffer.length,lt,ft-Bt,St);if(Ut>-1)return new BufferNode(new BufferContext(Ct,Nt,$,Bt),null,Ut)}else if(Tt&IterMode.IncludeAnonymous||!Nt.type.isAnonymous||hasChild(Nt)){let Ut;if(!(Tt&IterMode.IgnoreMounts)&&Nt.props&&(Ut=Nt.prop(NodeProp.mounted))&&!Ut.overlay)return new TreeNode(Ut.tree,Bt,$,Ct);let zt=new TreeNode(Nt,Bt,$,Ct);return Tt&IterMode.IncludeAnonymous||!zt.type.isAnonymous?zt:zt.nextChild(lt<0?Nt.children.length-1:0,lt,ft,St)}}}if(Tt&IterMode.IncludeAnonymous||!Ct.type.isAnonymous||(Ct.index>=0?$=Ct.index+lt:$=lt<0?-1:Ct._parent._tree.children.length,Ct=Ct._parent,!Ct))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter($){return this.nextChild(0,1,$,2)}childBefore($){return this.nextChild(this._tree.children.length-1,-1,$,-2)}enter($,lt,ft=0){let St;if(!(ft&IterMode.IgnoreOverlays)&&(St=this._tree.prop(NodeProp.mounted))&&St.overlay){let Tt=$-this.from;for(let{from:Ct,to:At}of St.overlay)if((lt>0?Ct<=Tt:Ct<Tt)&&(lt<0?At>=Tt:At>Tt))return new TreeNode(St.tree,St.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,$,lt,ft)}nextSignificantParent(){let $=this;for(;$.type.isAnonymous&&$._parent;)$=$._parent;return $}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor($=0){return new TreeCursor(this,$)}get tree(){return this._tree}toTree(){return this._tree}resolve($,lt=0){return resolveNode(this,$,lt,!1)}resolveInner($,lt=0){return resolveNode(this,$,lt,!0)}enterUnfinishedNodesBefore($){return enterUnfinishedNodesBefore(this,$)}getChild($,lt=null,ft=null){let St=getChildren(this,$,lt,ft);return St.length?St[0]:null}getChildren($,lt=null,ft=null){return getChildren(this,$,lt,ft)}toString(){return this._tree.toString()}get node(){return this}matchContext($){return matchNodeContext(this,$)}}function getChildren(dt,$,lt,ft){let St=dt.cursor(),Tt=[];if(!St.firstChild())return Tt;if(lt!=null){for(;!St.type.is(lt);)if(!St.nextSibling())return Tt}for(;;){if(ft!=null&&St.type.is(ft))return Tt;if(St.type.is($)&&Tt.push(St.node),!St.nextSibling())return ft==null?Tt:[]}}function matchNodeContext(dt,$,lt=$.length-1){for(let ft=dt.parent;lt>=0;ft=ft.parent){if(!ft)return!1;if(!ft.type.isAnonymous){if($[lt]&&$[lt]!=ft.name)return!1;lt--}}return!0}class BufferContext{constructor($,lt,ft,St){this.parent=$,this.buffer=lt,this.index=ft,this.start=St}}class BufferNode{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor($,lt,ft){this.context=$,this._parent=lt,this.index=ft,this.type=$.buffer.set.types[$.buffer.buffer[ft]]}child($,lt,ft){let{buffer:St}=this.context,Tt=St.findChild(this.index+4,St.buffer[this.index+3],$,lt-this.context.start,ft);return Tt<0?null:new BufferNode(this.context,this,Tt)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter($){return this.child(1,$,2)}childBefore($){return this.child(-1,$,-2)}enter($,lt,ft=0){if(ft&IterMode.ExcludeBuffers)return null;let{buffer:St}=this.context,Tt=St.findChild(this.index+4,St.buffer[this.index+3],lt>0?1:-1,$-this.context.start,lt);return Tt<0?null:new BufferNode(this.context,this,Tt)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling($){return this._parent?null:this.context.parent.nextChild(this.context.index+$,$,0,4)}get nextSibling(){let{buffer:$}=this.context,lt=$.buffer[this.index+3];return lt<(this._parent?$.buffer[this._parent.index+3]:$.buffer.length)?new BufferNode(this.context,this._parent,lt):this.externalSibling(1)}get prevSibling(){let{buffer:$}=this.context,lt=this._parent?this._parent.index+4:0;return this.index==lt?this.externalSibling(-1):new BufferNode(this.context,this._parent,$.findChild(lt,this.index,-1,0,4))}cursor($=0){return new TreeCursor(this,$)}get tree(){return null}toTree(){let $=[],lt=[],{buffer:ft}=this.context,St=this.index+4,Tt=ft.buffer[this.index+3];if(Tt>St){let Ct=ft.buffer[this.index+1];$.push(ft.slice(St,Tt,Ct)),lt.push(0)}return new Tree(this.type,$,lt,this.to-this.from)}resolve($,lt=0){return resolveNode(this,$,lt,!1)}resolveInner($,lt=0){return resolveNode(this,$,lt,!0)}enterUnfinishedNodesBefore($){return enterUnfinishedNodesBefore(this,$)}toString(){return this.context.buffer.childString(this.index)}getChild($,lt=null,ft=null){let St=getChildren(this,$,lt,ft);return St.length?St[0]:null}getChildren($,lt=null,ft=null){return getChildren(this,$,lt,ft)}get node(){return this}matchContext($){return matchNodeContext(this,$)}}class TreeCursor{get name(){return this.type.name}constructor($,lt=0){if(this.mode=lt,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,$ instanceof TreeNode)this.yieldNode($);else{this._tree=$.context.parent,this.buffer=$.context;for(let ft=$._parent;ft;ft=ft._parent)this.stack.unshift(ft.index);this.bufferNode=$,this.yieldBuf($.index)}}yieldNode($){return $?(this._tree=$,this.type=$.type,this.from=$.from,this.to=$.to,!0):!1}yieldBuf($,lt){this.index=$;let{start:ft,buffer:St}=this.buffer;return this.type=lt||St.set.types[St.buffer[$]],this.from=ft+St.buffer[$+1],this.to=ft+St.buffer[$+2],!0}yield($){return $?$ instanceof TreeNode?(this.buffer=null,this.yieldNode($)):(this.buffer=$.context,this.yieldBuf($.index,$.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild($,lt,ft){if(!this.buffer)return this.yield(this._tree.nextChild($<0?this._tree._tree.children.length-1:0,$,lt,ft,this.mode));let{buffer:St}=this.buffer,Tt=St.findChild(this.index+4,St.buffer[this.index+3],$,lt-this.buffer.start,ft);return Tt<0?!1:(this.stack.push(this.index),this.yieldBuf(Tt))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter($){return this.enterChild(1,$,2)}childBefore($){return this.enterChild(-1,$,-2)}enter($,lt,ft=this.mode){return this.buffer?ft&IterMode.ExcludeBuffers?!1:this.enterChild(1,$,lt):this.yield(this._tree.enter($,lt,ft))}parent(){if(!this.buffer)return this.yieldNode(this.mode&IterMode.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let $=this.mode&IterMode.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode($)}sibling($){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+$,$,0,4,this.mode)):!1;let{buffer:lt}=this.buffer,ft=this.stack.length-1;if($<0){let St=ft<0?0:this.stack[ft]+4;if(this.index!=St)return this.yieldBuf(lt.findChild(St,this.index,-1,0,4))}else{let St=lt.buffer[this.index+3];if(St<(ft<0?lt.buffer.length:lt.buffer[this.stack[ft]+3]))return this.yieldBuf(St)}return ft<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+$,$,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode($){let lt,ft,{buffer:St}=this;if(St){if($>0){if(this.index<St.buffer.buffer.length)return!1}else for(let Tt=0;Tt<this.index;Tt++)if(St.buffer.buffer[Tt+3]<this.index)return!1;({index:lt,parent:ft}=St)}else({index:lt,_parent:ft}=this._tree);for(;ft;{index:lt,_parent:ft}=ft)if(lt>-1)for(let Tt=lt+$,Ct=$<0?-1:ft._tree.children.length;Tt!=Ct;Tt+=$){let At=ft._tree.children[Tt];if(this.mode&IterMode.IncludeAnonymous||At instanceof TreeBuffer||!At.type.isAnonymous||hasChild(At))return!1}return!0}move($,lt){if(lt&&this.enterChild($,0,4))return!0;for(;;){if(this.sibling($))return!0;if(this.atLastNode($)||!this.parent())return!1}}next($=!0){return this.move(1,$)}prev($=!0){return this.move(-1,$)}moveTo($,lt=0){for(;(this.from==this.to||(lt<1?this.from>=$:this.from>$)||(lt>-1?this.to<=$:this.to<$))&&this.parent(););for(;this.enterChild(1,$,lt););return this}get node(){if(!this.buffer)return this._tree;let $=this.bufferNode,lt=null,ft=0;if($&&$.context==this.buffer)e:for(let St=this.index,Tt=this.stack.length;Tt>=0;){for(let Ct=$;Ct;Ct=Ct._parent)if(Ct.index==St){if(St==this.index)return Ct;lt=Ct,ft=Tt+1;break e}St=this.stack[--Tt]}for(let St=ft;St<this.stack.length;St++)lt=new BufferNode(this.buffer,lt,this.stack[St]);return this.bufferNode=new BufferNode(this.buffer,lt,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate($,lt){for(let ft=0;;){let St=!1;if(this.type.isAnonymous||$(this)!==!1){if(this.firstChild()){ft++;continue}this.type.isAnonymous||(St=!0)}for(;St&&lt&&lt(this),St=this.type.isAnonymous,!this.nextSibling();){if(!ft)return;this.parent(),ft--,St=!0}}}matchContext($){if(!this.buffer)return matchNodeContext(this.node,$);let{buffer:lt}=this.buffer,{types:ft}=lt.set;for(let St=$.length-1,Tt=this.stack.length-1;St>=0;Tt--){if(Tt<0)return matchNodeContext(this.node,$,St);let Ct=ft[lt.buffer[this.stack[Tt]]];if(!Ct.isAnonymous){if($[St]&&$[St]!=Ct.name)return!1;St--}}return!0}}function hasChild(dt){return dt.children.some($=>$ instanceof TreeBuffer||!$.type.isAnonymous||hasChild($))}function buildTree(dt){var $;let{buffer:lt,nodeSet:ft,maxBufferLength:St=DefaultBufferLength,reused:Tt=[],minRepeatType:Ct=ft.types.length}=dt,At=Array.isArray(lt)?new FlatBufferCursor(lt,lt.length):lt,Rt=ft.types,kt=0,Nt=0;function Bt(gn,vn,Tn,Cn,$n){let{id:xn,start:Rn,end:Pn,size:Nn}=At,Wn=Nt;for(;Nn<0;)if(At.next(),Nn==-1){let Ln=Tt[xn];Tn.push(Ln),Cn.push(Rn-gn);return}else if(Nn==-3){kt=xn;return}else if(Nn==-4){Nt=xn;return}else throw new RangeError(`Unrecognized record size: ${Nn}`);let zn=Rt[xn],Yn,Qn,nr=Rn-gn;if(Pn-Rn<=St&&(Qn=ln(At.pos-vn,$n))){let Ln=new Uint16Array(Qn.size-Qn.skip),Un=At.pos-Qn.size,Vn=Ln.length;for(;At.pos>Un;)Vn=cn(Qn.start,Ln,Vn);Yn=new TreeBuffer(Ln,Pn-Qn.start,ft),nr=Qn.start-gn}else{let Ln=At.pos-Nn;At.next();let Un=[],Vn=[],sr=xn>=Ct?xn:-1,In=0,ir=Pn;for(;At.pos>Ln;)sr>=0&&At.id==sr&&At.size>=0?(At.end<=ir-St&&(zt(Un,Vn,Rn,In,At.end,ir,sr,Wn),In=Un.length,ir=At.end),At.next()):Bt(Rn,Ln,Un,Vn,sr);if(sr>=0&&In>0&&In<Un.length&&zt(Un,Vn,Rn,In,Rn,ir,sr,Wn),Un.reverse(),Vn.reverse(),sr>-1&&In>0){let pr=Ut(zn);Yn=balanceRange(zn,Un,Vn,0,Un.length,0,Pn-Rn,pr,pr)}else Yn=Zt(zn,Un,Vn,Pn-Rn,Wn-Pn)}Tn.push(Yn),Cn.push(nr)}function Ut(gn){return(vn,Tn,Cn)=>{let $n=0,xn=vn.length-1,Rn,Pn;if(xn>=0&&(Rn=vn[xn])instanceof Tree){if(!xn&&Rn.type==gn&&Rn.length==Cn)return Rn;(Pn=Rn.prop(NodeProp.lookAhead))&&($n=Tn[xn]+Rn.length+Pn)}return Zt(gn,vn,Tn,Cn,$n)}}function zt(gn,vn,Tn,Cn,$n,xn,Rn,Pn){let Nn=[],Wn=[];for(;gn.length>Cn;)Nn.push(gn.pop()),Wn.push(vn.pop()+Tn-$n);gn.push(Zt(ft.types[Rn],Nn,Wn,xn-$n,Pn-xn)),vn.push($n-Tn)}function Zt(gn,vn,Tn,Cn,$n=0,xn){if(kt){let Rn=[NodeProp.contextHash,kt];xn=xn?[Rn].concat(xn):[Rn]}if($n>25){let Rn=[NodeProp.lookAhead,$n];xn=xn?[Rn].concat(xn):[Rn]}return new Tree(gn,vn,Tn,Cn,xn)}function ln(gn,vn){let Tn=At.fork(),Cn=0,$n=0,xn=0,Rn=Tn.end-St,Pn={size:0,start:0,skip:0};e:for(let Nn=Tn.pos-gn;Tn.pos>Nn;){let Wn=Tn.size;if(Tn.id==vn&&Wn>=0){Pn.size=Cn,Pn.start=$n,Pn.skip=xn,xn+=4,Cn+=4,Tn.next();continue}let zn=Tn.pos-Wn;if(Wn<0||zn<Nn||Tn.start<Rn)break;let Yn=Tn.id>=Ct?4:0,Qn=Tn.start;for(Tn.next();Tn.pos>zn;){if(Tn.size<0)if(Tn.size==-3)Yn+=4;else break e;else Tn.id>=Ct&&(Yn+=4);Tn.next()}$n=Qn,Cn+=Wn,xn+=Yn}return(vn<0||Cn==gn)&&(Pn.size=Cn,Pn.start=$n,Pn.skip=xn),Pn.size>4?Pn:void 0}function cn(gn,vn,Tn){let{id:Cn,start:$n,end:xn,size:Rn}=At;if(At.next(),Rn>=0&&Cn<Ct){let Pn=Tn;if(Rn>4){let Nn=At.pos-(Rn-4);for(;At.pos>Nn;)Tn=cn(gn,vn,Tn)}vn[--Tn]=Pn,vn[--Tn]=xn-gn,vn[--Tn]=$n-gn,vn[--Tn]=Cn}else Rn==-3?kt=Cn:Rn==-4&&(Nt=Cn);return Tn}let hn=[],pn=[];for(;At.pos>0;)Bt(dt.start||0,dt.bufferStart||0,hn,pn,-1);let dn=($=dt.length)!==null&&$!==void 0?$:hn.length?pn[0]+hn[0].length:0;return new Tree(Rt[dt.topID],hn.reverse(),pn.reverse(),dn)}const nodeSizeCache=new WeakMap;function nodeSize(dt,$){if(!dt.isAnonymous||$ instanceof TreeBuffer||$.type!=dt)return 1;let lt=nodeSizeCache.get($);if(lt==null){lt=1;for(let ft of $.children){if(ft.type!=dt||!(ft instanceof Tree)){lt=1;break}lt+=nodeSize(dt,ft)}nodeSizeCache.set($,lt)}return lt}function balanceRange(dt,$,lt,ft,St,Tt,Ct,At,Rt){let kt=0;for(let Zt=ft;Zt<St;Zt++)kt+=nodeSize(dt,$[Zt]);let Nt=Math.ceil(kt*1.5/8),Bt=[],Ut=[];function zt(Zt,ln,cn,hn,pn){for(let dn=cn;dn<hn;){let gn=dn,vn=ln[dn],Tn=nodeSize(dt,Zt[dn]);for(dn++;dn<hn;dn++){let Cn=nodeSize(dt,Zt[dn]);if(Tn+Cn>=Nt)break;Tn+=Cn}if(dn==gn+1){if(Tn>Nt){let Cn=Zt[gn];zt(Cn.children,Cn.positions,0,Cn.children.length,ln[gn]+pn);continue}Bt.push(Zt[gn])}else{let Cn=ln[dn-1]+Zt[dn-1].length-vn;Bt.push(balanceRange(dt,Zt,ln,gn,dn,vn,Cn,null,Rt))}Ut.push(vn+pn-Tt)}}return zt($,lt,ft,St,0),(At||Rt)(Bt,Ut,Ct)}class NodeWeakMap{constructor(){this.map=new WeakMap}setBuffer($,lt,ft){let St=this.map.get($);St||this.map.set($,St=new Map),St.set(lt,ft)}getBuffer($,lt){let ft=this.map.get($);return ft&&ft.get(lt)}set($,lt){$ instanceof BufferNode?this.setBuffer($.context.buffer,$.index,lt):$ instanceof TreeNode&&this.map.set($.tree,lt)}get($){return $ instanceof BufferNode?this.getBuffer($.context.buffer,$.index):$ instanceof TreeNode?this.map.get($.tree):void 0}cursorSet($,lt){$.buffer?this.setBuffer($.buffer.buffer,$.index,lt):this.map.set($.tree,lt)}cursorGet($){return $.buffer?this.getBuffer($.buffer.buffer,$.index):this.map.get($.tree)}}class TreeFragment{constructor($,lt,ft,St,Tt=!1,Ct=!1){this.from=$,this.to=lt,this.tree=ft,this.offset=St,this.open=(Tt?1:0)|(Ct?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree($,lt=[],ft=!1){let St=[new TreeFragment(0,$.length,$,0,!1,ft)];for(let Tt of lt)Tt.to>$.length&&St.push(Tt);return St}static applyChanges($,lt,ft=128){if(!lt.length)return $;let St=[],Tt=1,Ct=$.length?$[0]:null;for(let At=0,Rt=0,kt=0;;At++){let Nt=At<lt.length?lt[At]:null,Bt=Nt?Nt.fromA:1e9;if(Bt-Rt>=ft)for(;Ct&&Ct.from<Bt;){let Ut=Ct;if(Rt>=Ut.from||Bt<=Ut.to||kt){let zt=Math.max(Ut.from,Rt)-kt,Zt=Math.min(Ut.to,Bt)-kt;Ut=zt>=Zt?null:new TreeFragment(zt,Zt,Ut.tree,Ut.offset+kt,At>0,!!Nt)}if(Ut&&St.push(Ut),Ct.to>Bt)break;Ct=Tt<$.length?$[Tt++]:null}if(!Nt)break;Rt=Nt.toA,kt=Nt.toA-Nt.toB}return St}}class Parser{startParse($,lt,ft){return typeof $=="string"&&($=new StringInput($)),ft=ft?ft.length?ft.map(St=>new Range$1(St.from,St.to)):[new Range$1(0,0)]:[new Range$1(0,$.length)],this.createParse($,lt||[],ft)}parse($,lt,ft){let St=this.startParse($,lt,ft);for(;;){let Tt=St.advance();if(Tt)return Tt}}}class StringInput{constructor($){this.string=$}get length(){return this.string.length}chunk($){return this.string.slice($)}get lineChunks(){return!1}read($,lt){return this.string.slice($,lt)}}new NodeProp({perNode:!0});class Stack{constructor($,lt,ft,St,Tt,Ct,At,Rt,kt,Nt=0,Bt){this.p=$,this.stack=lt,this.state=ft,this.reducePos=St,this.pos=Tt,this.score=Ct,this.buffer=At,this.bufferBase=Rt,this.curContext=kt,this.lookAhead=Nt,this.parent=Bt}toString(){return`[${this.stack.filter(($,lt)=>lt%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start($,lt,ft=0){let St=$.parser.context;return new Stack($,[],lt,ft,ft,0,[],0,St?new StackContext(St,St.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState($,lt){this.stack.push(this.state,lt,this.bufferBase+this.buffer.length),this.state=$}reduce($){var lt;let ft=$>>19,St=$&65535,{parser:Tt}=this.p,Ct=Tt.dynamicPrecedence(St);if(Ct&&(this.score+=Ct),ft==0){this.pushState(Tt.getGoto(this.state,St,!0),this.reducePos),St<Tt.minRepeatTerm&&this.storeNode(St,this.reducePos,this.reducePos,4,!0),this.reduceContext(St,this.reducePos);return}let At=this.stack.length-(ft-1)*3-($&262144?6:0),Rt=At?this.stack[At-2]:this.p.ranges[0].from,kt=this.reducePos-Rt;kt>=2e3&&!(!((lt=this.p.parser.nodeSet.types[St])===null||lt===void 0)&&lt.isAnonymous)&&(Rt==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=kt):this.p.lastBigReductionSize<kt&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=Rt,this.p.lastBigReductionSize=kt));let Nt=At?this.stack[At-1]:0,Bt=this.bufferBase+this.buffer.length-Nt;if(St<Tt.minRepeatTerm||$&131072){let Ut=Tt.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(St,Rt,Ut,Bt+4,!0)}if($&262144)this.state=this.stack[At];else{let Ut=this.stack[At-3];this.state=Tt.getGoto(Ut,St,!0)}for(;this.stack.length>At;)this.stack.pop();this.reduceContext(St,Rt)}storeNode($,lt,ft,St=4,Tt=!1){if($==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let Ct=this,At=this.buffer.length;if(At==0&&Ct.parent&&(At=Ct.bufferBase-Ct.parent.bufferBase,Ct=Ct.parent),At>0&&Ct.buffer[At-4]==0&&Ct.buffer[At-1]>-1){if(lt==ft)return;if(Ct.buffer[At-2]>=lt){Ct.buffer[At-2]=ft;return}}}if(!Tt||this.pos==ft)this.buffer.push($,lt,ft,St);else{let Ct=this.buffer.length;if(Ct>0&&this.buffer[Ct-4]!=0)for(;Ct>0&&this.buffer[Ct-2]>ft;)this.buffer[Ct]=this.buffer[Ct-4],this.buffer[Ct+1]=this.buffer[Ct-3],this.buffer[Ct+2]=this.buffer[Ct-2],this.buffer[Ct+3]=this.buffer[Ct-1],Ct-=4,St>4&&(St-=4);this.buffer[Ct]=$,this.buffer[Ct+1]=lt,this.buffer[Ct+2]=ft,this.buffer[Ct+3]=St}}shift($,lt,ft){let St=this.pos;if($&131072)this.pushState($&65535,this.pos);else if($&262144)this.pos=ft,this.shiftContext(lt,St),lt<=this.p.parser.maxNode&&this.buffer.push(lt,St,ft,4);else{let Tt=$,{parser:Ct}=this.p;(ft>this.pos||lt<=Ct.maxNode)&&(this.pos=ft,Ct.stateFlag(Tt,1)||(this.reducePos=ft)),this.pushState(Tt,St),this.shiftContext(lt,St),lt<=Ct.maxNode&&this.buffer.push(lt,St,ft,4)}}apply($,lt,ft){$&65536?this.reduce($):this.shift($,lt,ft)}useNode($,lt){let ft=this.p.reused.length-1;(ft<0||this.p.reused[ft]!=$)&&(this.p.reused.push($),ft++);let St=this.pos;this.reducePos=this.pos=St+$.length,this.pushState(lt,St),this.buffer.push(ft,St,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,$,this,this.p.stream.reset(this.pos-$.length)))}split(){let $=this,lt=$.buffer.length;for(;lt>0&&$.buffer[lt-2]>$.reducePos;)lt-=4;let ft=$.buffer.slice(lt),St=$.bufferBase+lt;for(;$&&St==$.bufferBase;)$=$.parent;return new Stack(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,ft,St,this.curContext,this.lookAhead,$)}recoverByDelete($,lt){let ft=$<=this.p.parser.maxNode;ft&&this.storeNode($,this.pos,lt,4),this.storeNode(0,this.pos,lt,ft?8:4),this.pos=this.reducePos=lt,this.score-=190}canShift($){for(let lt=new SimulatedStack(this);;){let ft=this.p.parser.stateSlot(lt.state,4)||this.p.parser.hasAction(lt.state,$);if(ft==0)return!1;if(!(ft&65536))return!0;lt.reduce(ft)}}recoverByInsert($){if(this.stack.length>=300)return[];let lt=this.p.parser.nextStates(this.state);if(lt.length>8||this.stack.length>=120){let St=[];for(let Tt=0,Ct;Tt<lt.length;Tt+=2)(Ct=lt[Tt+1])!=this.state&&this.p.parser.hasAction(Ct,$)&&St.push(lt[Tt],Ct);if(this.stack.length<120)for(let Tt=0;St.length<8&&Tt<lt.length;Tt+=2){let Ct=lt[Tt+1];St.some((At,Rt)=>Rt&1&&At==Ct)||St.push(lt[Tt],Ct)}lt=St}let ft=[];for(let St=0;St<lt.length&&ft.length<4;St+=2){let Tt=lt[St+1];if(Tt==this.state)continue;let Ct=this.split();Ct.pushState(Tt,this.pos),Ct.storeNode(0,Ct.pos,Ct.pos,4,!0),Ct.shiftContext(lt[St],this.pos),Ct.score-=200,ft.push(Ct)}return ft}forceReduce(){let $=this.p.parser.stateSlot(this.state,5);if(!($&65536))return!1;let{parser:lt}=this.p;if(!lt.validAction(this.state,$)){let ft=$>>19,St=$&65535,Tt=this.stack.length-ft*3;if(Tt<0||lt.getGoto(this.stack[Tt],St,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce($),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:$}=this.p;return $.data[$.stateSlot(this.state,1)]==65535&&!$.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState($){if(this.state!=$.state||this.stack.length!=$.stack.length)return!1;for(let lt=0;lt<this.stack.length;lt+=3)if(this.stack[lt]!=$.stack[lt])return!1;return!0}get parser(){return this.p.parser}dialectEnabled($){return this.p.parser.dialect.flags[$]}shiftContext($,lt){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,$,this,this.p.stream.reset(lt)))}reduceContext($,lt){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,$,this,this.p.stream.reset(lt)))}emitContext(){let $=this.buffer.length-1;($<0||this.buffer[$]!=-3)&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let $=this.buffer.length-1;($<0||this.buffer[$]!=-4)&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext($){if($!=this.curContext.context){let lt=new StackContext(this.curContext.tracker,$);lt.hash!=this.curContext.hash&&this.emitContext(),this.curContext=lt}}setLookAhead($){$>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=$)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class StackContext{constructor($,lt){this.tracker=$,this.context=lt,this.hash=$.strict?$.hash(lt):0}}var Recover;(function(dt){dt[dt.Insert=200]="Insert",dt[dt.Delete=190]="Delete",dt[dt.Reduce=100]="Reduce",dt[dt.MaxNext=4]="MaxNext",dt[dt.MaxInsertStackDepth=300]="MaxInsertStackDepth",dt[dt.DampenInsertStackDepth=120]="DampenInsertStackDepth",dt[dt.MinBigReduction=2e3]="MinBigReduction"})(Recover||(Recover={}));class SimulatedStack{constructor($){this.start=$,this.state=$.state,this.stack=$.stack,this.base=this.stack.length}reduce($){let lt=$&65535,ft=$>>19;ft==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(ft-1)*3;let St=this.start.p.parser.getGoto(this.stack[this.base-3],lt,!0);this.state=St}}class StackBufferCursor{constructor($,lt,ft){this.stack=$,this.pos=lt,this.index=ft,this.buffer=$.buffer,this.index==0&&this.maybeNext()}static create($,lt=$.bufferBase+$.buffer.length){return new StackBufferCursor($,lt,lt-$.bufferBase)}maybeNext(){let $=this.stack.parent;$!=null&&(this.index=this.stack.bufferBase-$.bufferBase,this.stack=$,this.buffer=$.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new StackBufferCursor(this.stack,this.pos,this.index)}}function decodeArray(dt,$=Uint16Array){if(typeof dt!="string")return dt;let lt=null;for(let ft=0,St=0;ft<dt.length;){let Tt=0;for(;;){let Ct=dt.charCodeAt(ft++),At=!1;if(Ct==126){Tt=65535;break}Ct>=92&&Ct--,Ct>=34&&Ct--;let Rt=Ct-32;if(Rt>=46&&(Rt-=46,At=!0),Tt+=Rt,At)break;Tt*=46}lt?lt[St++]=Tt:lt=new $(Tt)}return lt}class CachedToken{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const nullToken=new CachedToken;class InputStream{constructor($,lt){this.input=$,this.ranges=lt,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=nullToken,this.rangeIndex=0,this.pos=this.chunkPos=lt[0].from,this.range=lt[0],this.end=lt[lt.length-1].to,this.readNext()}resolveOffset($,lt){let ft=this.range,St=this.rangeIndex,Tt=this.pos+$;for(;Tt<ft.from;){if(!St)return null;let Ct=this.ranges[--St];Tt-=ft.from-Ct.to,ft=Ct}for(;lt<0?Tt>ft.to:Tt>=ft.to;){if(St==this.ranges.length-1)return null;let Ct=this.ranges[++St];Tt+=Ct.from-ft.to,ft=Ct}return Tt}clipPos($){if($>=this.range.from&&$<this.range.to)return $;for(let lt of this.ranges)if(lt.to>$)return Math.max($,lt.from);return this.end}peek($){let lt=this.chunkOff+$,ft,St;if(lt>=0&&lt<this.chunk.length)ft=this.pos+$,St=this.chunk.charCodeAt(lt);else{let Tt=this.resolveOffset($,1);if(Tt==null)return-1;if(ft=Tt,ft>=this.chunk2Pos&&ft<this.chunk2Pos+this.chunk2.length)St=this.chunk2.charCodeAt(ft-this.chunk2Pos);else{let Ct=this.rangeIndex,At=this.range;for(;At.to<=ft;)At=this.ranges[++Ct];this.chunk2=this.input.chunk(this.chunk2Pos=ft),ft+this.chunk2.length>At.to&&(this.chunk2=this.chunk2.slice(0,At.to-ft)),St=this.chunk2.charCodeAt(0)}}return ft>=this.token.lookAhead&&(this.token.lookAhead=ft+1),St}acceptToken($,lt=0){let ft=lt?this.resolveOffset(lt,-1):this.pos;if(ft==null||ft<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=$,this.token.end=ft}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:$,chunkPos:lt}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=$,this.chunk2Pos=lt,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let $=this.input.chunk(this.pos),lt=this.pos+$.length;this.chunk=lt>this.range.to?$.slice(0,this.range.to-this.pos):$,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance($=1){for(this.chunkOff+=$;this.pos+$>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();$-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=$,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset($,lt){if(lt?(this.token=lt,lt.start=$,lt.lookAhead=$+1,lt.value=lt.extended=-1):this.token=nullToken,this.pos!=$){if(this.pos=$,$==this.end)return this.setDone(),this;for(;$<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;$>=this.range.to;)this.range=this.ranges[++this.rangeIndex];$>=this.chunkPos&&$<this.chunkPos+this.chunk.length?this.chunkOff=$-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read($,lt){if($>=this.chunkPos&&lt<=this.chunkPos+this.chunk.length)return this.chunk.slice($-this.chunkPos,lt-this.chunkPos);if($>=this.chunk2Pos&&lt<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice($-this.chunk2Pos,lt-this.chunk2Pos);if($>=this.range.from&&lt<=this.range.to)return this.input.read($,lt);let ft="";for(let St of this.ranges){if(St.from>=lt)break;St.to>$&&(ft+=this.input.read(Math.max(St.from,$),Math.min(St.to,lt)))}return ft}}class TokenGroup{constructor($,lt){this.data=$,this.id=lt}token($,lt){let{parser:ft}=lt.p;readToken(this.data,$,lt,this.id,ft.data,ft.tokenPrecTable)}}TokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;class LocalTokenGroup{constructor($,lt,ft){this.precTable=lt,this.elseToken=ft,this.data=typeof $=="string"?decodeArray($):$}token($,lt){let ft=$.pos,St;for(;St=$.pos,readToken(this.data,$,lt,0,this.data,this.precTable),!($.token.value>-1);){if(this.elseToken==null)return;if($.next<0)break;$.advance(),$.reset(St+1,$.token)}St>ft&&($.reset(ft,$.token),$.acceptToken(this.elseToken,St-ft))}}LocalTokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;class ExternalTokenizer{constructor($,lt={}){this.token=$,this.contextual=!!lt.contextual,this.fallback=!!lt.fallback,this.extend=!!lt.extend}}function readToken(dt,$,lt,ft,St,Tt){let Ct=0,At=1<<ft,{dialect:Rt}=lt.p.parser;e:for(;At&dt[Ct];){let kt=dt[Ct+1];for(let zt=Ct+3;zt<kt;zt+=2)if((dt[zt+1]&At)>0){let Zt=dt[zt];if(Rt.allows(Zt)&&($.token.value==-1||$.token.value==Zt||overrides(Zt,$.token.value,St,Tt))){$.acceptToken(Zt);break}}let Nt=$.next,Bt=0,Ut=dt[Ct+2];if($.next<0&&Ut>Bt&&dt[kt+Ut*3-3]==65535&&dt[kt+Ut*3-3]==65535){Ct=dt[kt+Ut*3-1];continue e}for(;Bt<Ut;){let zt=Bt+Ut>>1,Zt=kt+zt+(zt<<1),ln=dt[Zt],cn=dt[Zt+1]||65536;if(Nt<ln)Ut=zt;else if(Nt>=cn)Bt=zt+1;else{Ct=dt[Zt+2],$.advance();continue e}}break}}function findOffset(dt,$,lt){for(let ft=$,St;(St=dt[ft])!=65535;ft++)if(St==lt)return ft-$;return-1}function overrides(dt,$,lt,ft){let St=findOffset(lt,ft,$);return St<0||findOffset(lt,ft,dt)<St}const verbose=typeof process<"u"&&process.env&&/\bparse\b/.test({}.LOG);let stackIDs=null;var Safety;(function(dt){dt[dt.Margin=25]="Margin"})(Safety||(Safety={}));function cutAt(dt,$,lt){let ft=dt.cursor(IterMode.IncludeAnonymous);for(ft.moveTo($);;)if(!(lt<0?ft.childBefore($):ft.childAfter($)))for(;;){if((lt<0?ft.to<$:ft.from>$)&&!ft.type.isError)return lt<0?Math.max(0,Math.min(ft.to-1,$-25)):Math.min(dt.length,Math.max(ft.from+1,$+25));if(lt<0?ft.prevSibling():ft.nextSibling())break;if(!ft.parent())return lt<0?0:dt.length}}class FragmentCursor{constructor($,lt){this.fragments=$,this.nodeSet=lt,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let $=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if($){for(this.safeFrom=$.openStart?cutAt($.tree,$.from+$.offset,1)-$.offset:$.from,this.safeTo=$.openEnd?cutAt($.tree,$.to+$.offset,-1)-$.offset:$.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push($.tree),this.start.push(-$.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt($){if($<this.nextStart)return null;for(;this.fragment&&this.safeTo<=$;)this.nextFragment();if(!this.fragment)return null;for(;;){let lt=this.trees.length-1;if(lt<0)return this.nextFragment(),null;let ft=this.trees[lt],St=this.index[lt];if(St==ft.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let Tt=ft.children[St],Ct=this.start[lt]+ft.positions[St];if(Ct>$)return this.nextStart=Ct,null;if(Tt instanceof Tree){if(Ct==$){if(Ct<this.safeFrom)return null;let At=Ct+Tt.length;if(At<=this.safeTo){let Rt=Tt.prop(NodeProp.lookAhead);if(!Rt||At+Rt<this.fragment.to)return Tt}}this.index[lt]++,Ct+Tt.length>=Math.max(this.safeFrom,$)&&(this.trees.push(Tt),this.start.push(Ct),this.index.push(0))}else this.index[lt]++,this.nextStart=Ct+Tt.length}}}class TokenCache{constructor($,lt){this.stream=lt,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=$.tokenizers.map(ft=>new CachedToken)}getActions($){let lt=0,ft=null,{parser:St}=$.p,{tokenizers:Tt}=St,Ct=St.stateSlot($.state,3),At=$.curContext?$.curContext.hash:0,Rt=0;for(let kt=0;kt<Tt.length;kt++){if(!(1<<kt&Ct))continue;let Nt=Tt[kt],Bt=this.tokens[kt];if(!(ft&&!Nt.fallback)&&((Nt.contextual||Bt.start!=$.pos||Bt.mask!=Ct||Bt.context!=At)&&(this.updateCachedToken(Bt,Nt,$),Bt.mask=Ct,Bt.context=At),Bt.lookAhead>Bt.end+25&&(Rt=Math.max(Bt.lookAhead,Rt)),Bt.value!=0)){let Ut=lt;if(Bt.extended>-1&&(lt=this.addActions($,Bt.extended,Bt.end,lt)),lt=this.addActions($,Bt.value,Bt.end,lt),!Nt.extend&&(ft=Bt,lt>Ut))break}}for(;this.actions.length>lt;)this.actions.pop();return Rt&&$.setLookAhead(Rt),!ft&&$.pos==this.stream.end&&(ft=new CachedToken,ft.value=$.p.parser.eofTerm,ft.start=ft.end=$.pos,lt=this.addActions($,ft.value,ft.end,lt)),this.mainToken=ft,this.actions}getMainToken($){if(this.mainToken)return this.mainToken;let lt=new CachedToken,{pos:ft,p:St}=$;return lt.start=ft,lt.end=Math.min(ft+1,St.stream.end),lt.value=ft==St.stream.end?St.parser.eofTerm:0,lt}updateCachedToken($,lt,ft){let St=this.stream.clipPos(ft.pos);if(lt.token(this.stream.reset(St,$),ft),$.value>-1){let{parser:Tt}=ft.p;for(let Ct=0;Ct<Tt.specialized.length;Ct++)if(Tt.specialized[Ct]==$.value){let At=Tt.specializers[Ct](this.stream.read($.start,$.end),ft);if(At>=0&&ft.p.parser.dialect.allows(At>>1)){At&1?$.extended=At>>1:$.value=At>>1;break}}}else $.value=0,$.end=this.stream.clipPos(St+1)}putAction($,lt,ft,St){for(let Tt=0;Tt<St;Tt+=3)if(this.actions[Tt]==$)return St;return this.actions[St++]=$,this.actions[St++]=lt,this.actions[St++]=ft,St}addActions($,lt,ft,St){let{state:Tt}=$,{parser:Ct}=$.p,{data:At}=Ct;for(let Rt=0;Rt<2;Rt++)for(let kt=Ct.stateSlot(Tt,Rt?2:1);;kt+=3){if(At[kt]==65535)if(At[kt+1]==1)kt=pair(At,kt+2);else{St==0&&At[kt+1]==2&&(St=this.putAction(pair(At,kt+2),lt,ft,St));break}At[kt]==lt&&(St=this.putAction(pair(At,kt+1),lt,ft,St))}return St}}var Rec;(function(dt){dt[dt.Distance=5]="Distance",dt[dt.MaxRemainingPerStep=3]="MaxRemainingPerStep",dt[dt.MinBufferLengthPrune=500]="MinBufferLengthPrune",dt[dt.ForceReduceLimit=10]="ForceReduceLimit",dt[dt.CutDepth=15e3]="CutDepth",dt[dt.CutTo=9e3]="CutTo",dt[dt.MaxLeftAssociativeReductionCount=300]="MaxLeftAssociativeReductionCount",dt[dt.MaxStackCount=12]="MaxStackCount"})(Rec||(Rec={}));class Parse{constructor($,lt,ft,St){this.parser=$,this.input=lt,this.ranges=St,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new InputStream(lt,St),this.tokens=new TokenCache($,this.stream),this.topTerm=$.top[1];let{from:Tt}=St[0];this.stacks=[Stack.start(this,$.top[0],Tt)],this.fragments=ft.length&&this.stream.end-Tt>$.bufferLength*4?new FragmentCursor(ft,$.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let $=this.stacks,lt=this.minStackPos,ft=this.stacks=[],St,Tt;if(this.bigReductionCount>300&&$.length==1){let[Ct]=$;for(;Ct.forceReduce()&&Ct.stack.length&&Ct.stack[Ct.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let Ct=0;Ct<$.length;Ct++){let At=$[Ct];for(;;){if(this.tokens.mainToken=null,At.pos>lt)ft.push(At);else{if(this.advanceStack(At,ft,$))continue;{St||(St=[],Tt=[]),St.push(At);let Rt=this.tokens.getMainToken(At);Tt.push(Rt.value,Rt.end)}}break}}if(!ft.length){let Ct=St&&findFinished(St);if(Ct)return this.stackToTree(Ct);if(this.parser.strict)throw verbose&&St&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+lt);this.recovering||(this.recovering=5)}if(this.recovering&&St){let Ct=this.stoppedAt!=null&&St[0].pos>this.stoppedAt?St[0]:this.runRecovery(St,Tt,ft);if(Ct)return this.stackToTree(Ct.forceAll())}if(this.recovering){let Ct=this.recovering==1?1:this.recovering*3;if(ft.length>Ct)for(ft.sort((At,Rt)=>Rt.score-At.score);ft.length>Ct;)ft.pop();ft.some(At=>At.reducePos>lt)&&this.recovering--}else if(ft.length>1){e:for(let Ct=0;Ct<ft.length-1;Ct++){let At=ft[Ct];for(let Rt=Ct+1;Rt<ft.length;Rt++){let kt=ft[Rt];if(At.sameState(kt)||At.buffer.length>500&&kt.buffer.length>500)if((At.score-kt.score||At.buffer.length-kt.buffer.length)>0)ft.splice(Rt--,1);else{ft.splice(Ct--,1);continue e}}}ft.length>12&&ft.splice(12,ft.length-12)}this.minStackPos=ft[0].pos;for(let Ct=1;Ct<ft.length;Ct++)ft[Ct].pos<this.minStackPos&&(this.minStackPos=ft[Ct].pos);return null}stopAt($){if(this.stoppedAt!=null&&this.stoppedAt<$)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=$}advanceStack($,lt,ft){let St=$.pos,{parser:Tt}=this,Ct=verbose?this.stackID($)+" -> ":"";if(this.stoppedAt!=null&&St>this.stoppedAt)return $.forceReduce()?$:null;if(this.fragments){let kt=$.curContext&&$.curContext.tracker.strict,Nt=kt?$.curContext.hash:0;for(let Bt=this.fragments.nodeAt(St);Bt;){let Ut=this.parser.nodeSet.types[Bt.type.id]==Bt.type?Tt.getGoto($.state,Bt.type.id):-1;if(Ut>-1&&Bt.length&&(!kt||(Bt.prop(NodeProp.contextHash)||0)==Nt))return $.useNode(Bt,Ut),verbose&&console.log(Ct+this.stackID($)+` (via reuse of ${Tt.getName(Bt.type.id)})`),!0;if(!(Bt instanceof Tree)||Bt.children.length==0||Bt.positions[0]>0)break;let zt=Bt.children[0];if(zt instanceof Tree&&Bt.positions[0]==0)Bt=zt;else break}}let At=Tt.stateSlot($.state,4);if(At>0)return $.reduce(At),verbose&&console.log(Ct+this.stackID($)+` (via always-reduce ${Tt.getName(At&65535)})`),!0;if($.stack.length>=15e3)for(;$.stack.length>9e3&&$.forceReduce(););let Rt=this.tokens.getActions($);for(let kt=0;kt<Rt.length;){let Nt=Rt[kt++],Bt=Rt[kt++],Ut=Rt[kt++],zt=kt==Rt.length||!ft,Zt=zt?$:$.split();if(Zt.apply(Nt,Bt,Ut),verbose&&console.log(Ct+this.stackID(Zt)+` (via ${Nt&65536?`reduce of ${Tt.getName(Nt&65535)}`:"shift"} for ${Tt.getName(Bt)} @ ${St}${Zt==$?"":", split"})`),zt)return!0;Zt.pos>St?lt.push(Zt):ft.push(Zt)}return!1}advanceFully($,lt){let ft=$.pos;for(;;){if(!this.advanceStack($,null,null))return!1;if($.pos>ft)return pushStackDedup($,lt),!0}}runRecovery($,lt,ft){let St=null,Tt=!1;for(let Ct=0;Ct<$.length;Ct++){let At=$[Ct],Rt=lt[Ct<<1],kt=lt[(Ct<<1)+1],Nt=verbose?this.stackID(At)+" -> ":"";if(At.deadEnd&&(Tt||(Tt=!0,At.restart(),verbose&&console.log(Nt+this.stackID(At)+" (restarted)"),this.advanceFully(At,ft))))continue;let Bt=At.split(),Ut=Nt;for(let zt=0;Bt.forceReduce()&&zt<10&&(verbose&&console.log(Ut+this.stackID(Bt)+" (via force-reduce)"),!this.advanceFully(Bt,ft));zt++)verbose&&(Ut=this.stackID(Bt)+" -> ");for(let zt of At.recoverByInsert(Rt))verbose&&console.log(Nt+this.stackID(zt)+" (via recover-insert)"),this.advanceFully(zt,ft);this.stream.end>At.pos?(kt==At.pos&&(kt++,Rt=0),At.recoverByDelete(Rt,kt),verbose&&console.log(Nt+this.stackID(At)+` (via recover-delete ${this.parser.getName(Rt)})`),pushStackDedup(At,ft)):(!St||St.score<At.score)&&(St=At)}return St}stackToTree($){return $.close(),Tree.build({buffer:StackBufferCursor.create($),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:$.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID($){let lt=(stackIDs||(stackIDs=new WeakMap)).get($);return lt||stackIDs.set($,lt=String.fromCodePoint(this.nextStackID++)),lt+$}}function pushStackDedup(dt,$){for(let lt=0;lt<$.length;lt++){let ft=$[lt];if(ft.pos==dt.pos&&ft.sameState(dt)){$[lt].score<dt.score&&($[lt]=dt);return}}$.push(dt)}class Dialect{constructor($,lt,ft){this.source=$,this.flags=lt,this.disabled=ft}allows($){return!this.disabled||this.disabled[$]==0}}const id=dt=>dt;class ContextTracker{constructor($){this.start=$.start,this.shift=$.shift||id,this.reduce=$.reduce||id,this.reuse=$.reuse||id,this.hash=$.hash||(()=>0),this.strict=$.strict!==!1}}class LRParser extends Parser{constructor($){if(super(),this.wrappers=[],$.version!=14)throw new RangeError(`Parser version (${$.version}) doesn't match runtime version (14)`);let lt=$.nodeNames.split(" ");this.minRepeatTerm=lt.length;for(let At=0;At<$.repeatNodeCount;At++)lt.push("");let ft=Object.keys($.topRules).map(At=>$.topRules[At][1]),St=[];for(let At=0;At<lt.length;At++)St.push([]);function Tt(At,Rt,kt){St[At].push([Rt,Rt.deserialize(String(kt))])}if($.nodeProps)for(let At of $.nodeProps){let Rt=At[0];typeof Rt=="string"&&(Rt=NodeProp[Rt]);for(let kt=1;kt<At.length;){let Nt=At[kt++];if(Nt>=0)Tt(Nt,Rt,At[kt++]);else{let Bt=At[kt+-Nt];for(let Ut=-Nt;Ut>0;Ut--)Tt(At[kt++],Rt,Bt);kt++}}}this.nodeSet=new NodeSet(lt.map((At,Rt)=>NodeType.define({name:Rt>=this.minRepeatTerm?void 0:At,id:Rt,props:St[Rt],top:ft.indexOf(Rt)>-1,error:Rt==0,skipped:$.skippedNodes&&$.skippedNodes.indexOf(Rt)>-1}))),$.propSources&&(this.nodeSet=this.nodeSet.extend(...$.propSources)),this.strict=!1,this.bufferLength=DefaultBufferLength;let Ct=decodeArray($.tokenData);this.context=$.context,this.specializerSpecs=$.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let At=0;At<this.specializerSpecs.length;At++)this.specialized[At]=this.specializerSpecs[At].term;this.specializers=this.specializerSpecs.map(getSpecializer),this.states=decodeArray($.states,Uint32Array),this.data=decodeArray($.stateData),this.goto=decodeArray($.goto),this.maxTerm=$.maxTerm,this.tokenizers=$.tokenizers.map(At=>typeof At=="number"?new TokenGroup(Ct,At):At),this.topRules=$.topRules,this.dialects=$.dialects||{},this.dynamicPrecedences=$.dynamicPrecedences||null,this.tokenPrecTable=$.tokenPrec,this.termNames=$.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse($,lt,ft){let St=new Parse(this,$,lt,ft);for(let Tt of this.wrappers)St=Tt(St,$,lt,ft);return St}getGoto($,lt,ft=!1){let St=this.goto;if(lt>=St[0])return-1;for(let Tt=St[lt+1];;){let Ct=St[Tt++],At=Ct&1,Rt=St[Tt++];if(At&&ft)return Rt;for(let kt=Tt+(Ct>>1);Tt<kt;Tt++)if(St[Tt]==$)return Rt;if(At)return-1}}hasAction($,lt){let ft=this.data;for(let St=0;St<2;St++)for(let Tt=this.stateSlot($,St?2:1),Ct;;Tt+=3){if((Ct=ft[Tt])==65535)if(ft[Tt+1]==1)Ct=ft[Tt=pair(ft,Tt+2)];else{if(ft[Tt+1]==2)return pair(ft,Tt+2);break}if(Ct==lt||Ct==0)return pair(ft,Tt+1)}return 0}stateSlot($,lt){return this.states[$*6+lt]}stateFlag($,lt){return(this.stateSlot($,0)&lt)>0}validAction($,lt){if(lt==this.stateSlot($,4))return!0;for(let ft=this.stateSlot($,1);;ft+=3){if(this.data[ft]==65535)if(this.data[ft+1]==1)ft=pair(this.data,ft+2);else return!1;if(lt==pair(this.data,ft+1))return!0}}nextStates($){let lt=[];for(let ft=this.stateSlot($,1);;ft+=3){if(this.data[ft]==65535)if(this.data[ft+1]==1)ft=pair(this.data,ft+2);else break;if(!(this.data[ft+2]&1)){let St=this.data[ft+1];lt.some((Tt,Ct)=>Ct&1&&Tt==St)||lt.push(this.data[ft],St)}}return lt}configure($){let lt=Object.assign(Object.create(LRParser.prototype),this);if($.props&&(lt.nodeSet=this.nodeSet.extend(...$.props)),$.top){let ft=this.topRules[$.top];if(!ft)throw new RangeError(`Invalid top rule name ${$.top}`);lt.top=ft}return $.tokenizers&&(lt.tokenizers=this.tokenizers.map(ft=>{let St=$.tokenizers.find(Tt=>Tt.from==ft);return St?St.to:ft})),$.specializers&&(lt.specializers=this.specializers.slice(),lt.specializerSpecs=this.specializerSpecs.map((ft,St)=>{let Tt=$.specializers.find(At=>At.from==ft.external);if(!Tt)return ft;let Ct=Object.assign(Object.assign({},ft),{external:Tt.to});return lt.specializers[St]=getSpecializer(Ct),Ct})),$.contextTracker&&(lt.context=$.contextTracker),$.dialect&&(lt.dialect=this.parseDialect($.dialect)),$.strict!=null&&(lt.strict=$.strict),$.wrap&&(lt.wrappers=lt.wrappers.concat($.wrap)),$.bufferLength!=null&&(lt.bufferLength=$.bufferLength),lt}hasWrappers(){return this.wrappers.length>0}getName($){return this.termNames?this.termNames[$]:String($<=this.maxNode&&this.nodeSet.types[$].name||$)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence($){let lt=this.dynamicPrecedences;return lt==null?0:lt[$]||0}parseDialect($){let lt=Object.keys(this.dialects),ft=lt.map(()=>!1);if($)for(let Tt of $.split(" ")){let Ct=lt.indexOf(Tt);Ct>=0&&(ft[Ct]=!0)}let St=null;for(let Tt=0;Tt<lt.length;Tt++)if(!ft[Tt])for(let Ct=this.dialects[lt[Tt]],At;(At=this.data[Ct++])!=65535;)(St||(St=new Uint8Array(this.maxTerm+1)))[At]=1;return new Dialect($,ft,St)}static deserialize($){return new LRParser($)}}function pair(dt,$){return dt[$]|dt[$+1]<<16}function findFinished(dt){let $=null;for(let lt of dt){let ft=lt.p.stoppedAt;(lt.pos==lt.p.stream.end||ft!=null&&lt.pos>ft)&&lt.p.parser.stateFlag(lt.state,2)&&(!$||$.score<lt.score)&&($=lt)}return $}function getSpecializer(dt){if(dt.external){let $=dt.extend?1:0;return(lt,ft)=>dt.external(lt,ft)<<1|$}return dt.get}let nextTagID=0;class Tag{constructor($,lt,ft){this.set=$,this.base=lt,this.modified=ft,this.id=nextTagID++}static define($){if($!=null&&$.base)throw new Error("Can not derive from a modified tag");let lt=new Tag([],null,[]);if(lt.set.push(lt),$)for(let ft of $.set)lt.set.push(ft);return lt}static defineModifier(){let $=new Modifier;return lt=>lt.modified.indexOf($)>-1?lt:Modifier.get(lt.base||lt,lt.modified.concat($).sort((ft,St)=>ft.id-St.id))}}let nextModifierID=0;class Modifier{constructor(){this.instances=[],this.id=nextModifierID++}static get($,lt){if(!lt.length)return $;let ft=lt[0].instances.find(At=>At.base==$&&sameArray$1(lt,At.modified));if(ft)return ft;let St=[],Tt=new Tag(St,$,lt);for(let At of lt)At.instances.push(Tt);let Ct=powerSet(lt);for(let At of $.set)if(!At.modified.length)for(let Rt of Ct)St.push(Modifier.get(At,Rt));return Tt}}function sameArray$1(dt,$){return dt.length==$.length&&dt.every((lt,ft)=>lt==$[ft])}function powerSet(dt){let $=[[]];for(let lt=0;lt<dt.length;lt++)for(let ft=0,St=$.length;ft<St;ft++)$.push($[ft].concat(dt[lt]));return $.sort((lt,ft)=>ft.length-lt.length)}function styleTags(dt){let $=Object.create(null);for(let lt in dt){let ft=dt[lt];Array.isArray(ft)||(ft=[ft]);for(let St of lt.split(" "))if(St){let Tt=[],Ct=2,At=St;for(let Bt=0;;){if(At=="..."&&Bt>0&&Bt+3==St.length){Ct=1;break}let Ut=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(At);if(!Ut)throw new RangeError("Invalid path: "+St);if(Tt.push(Ut[0]=="*"?"":Ut[0][0]=='"'?JSON.parse(Ut[0]):Ut[0]),Bt+=Ut[0].length,Bt==St.length)break;let zt=St[Bt++];if(Bt==St.length&&zt=="!"){Ct=0;break}if(zt!="/")throw new RangeError("Invalid path: "+St);At=St.slice(Bt)}let Rt=Tt.length-1,kt=Tt[Rt];if(!kt)throw new RangeError("Invalid path: "+St);let Nt=new Rule(ft,Ct,Rt>0?Tt.slice(0,Rt):null);$[kt]=Nt.sort($[kt])}}return ruleNodeProp.add($)}const ruleNodeProp=new NodeProp;class Rule{constructor($,lt,ft,St){this.tags=$,this.mode=lt,this.context=ft,this.next=St}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort($){return!$||$.depth<this.depth?(this.next=$,this):($.next=this.sort($.next),$)}get depth(){return this.context?this.context.length:0}}Rule.empty=new Rule([],2,null);function tagHighlighter(dt,$){let lt=Object.create(null);for(let Tt of dt)if(!Array.isArray(Tt.tag))lt[Tt.tag.id]=Tt.class;else for(let Ct of Tt.tag)lt[Ct.id]=Tt.class;let{scope:ft,all:St=null}=$||{};return{style:Tt=>{let Ct=St;for(let At of Tt)for(let Rt of At.set){let kt=lt[Rt.id];if(kt){Ct=Ct?Ct+" "+kt:kt;break}}return Ct},scope:ft}}function highlightTags(dt,$){let lt=null;for(let ft of dt){let St=ft.style($);St&&(lt=lt?lt+" "+St:St)}return lt}function highlightTree(dt,$,lt,ft=0,St=dt.length){let Tt=new HighlightBuilder(ft,Array.isArray($)?$:[$],lt);Tt.highlightRange(dt.cursor(),ft,St,"",Tt.highlighters),Tt.flush(St)}class HighlightBuilder{constructor($,lt,ft){this.at=$,this.highlighters=lt,this.span=ft,this.class=""}startSpan($,lt){lt!=this.class&&(this.flush($),$>this.at&&(this.at=$),this.class=lt)}flush($){$>this.at&&this.class&&this.span(this.at,$,this.class)}highlightRange($,lt,ft,St,Tt){let{type:Ct,from:At,to:Rt}=$;if(At>=ft||Rt<=lt)return;Ct.isTop&&(Tt=this.highlighters.filter(zt=>!zt.scope||zt.scope(Ct)));let kt=St,Nt=getStyleTags($)||Rule.empty,Bt=highlightTags(Tt,Nt.tags);if(Bt&&(kt&&(kt+=" "),kt+=Bt,Nt.mode==1&&(St+=(St?" ":"")+Bt)),this.startSpan($.from,kt),Nt.opaque)return;let Ut=$.tree&&$.tree.prop(NodeProp.mounted);if(Ut&&Ut.overlay){let zt=$.node.enter(Ut.overlay[0].from+At,1),Zt=this.highlighters.filter(cn=>!cn.scope||cn.scope(Ut.tree.type)),ln=$.firstChild();for(let cn=0,hn=At;;cn++){let pn=cn<Ut.overlay.length?Ut.overlay[cn]:null,dn=pn?pn.from+At:Rt,gn=Math.max(lt,hn),vn=Math.min(ft,dn);if(gn<vn&&ln)for(;$.from<vn&&(this.highlightRange($,gn,vn,St,Tt),this.startSpan(Math.min(vn,$.to),kt),!($.to>=dn||!$.nextSibling())););if(!pn||dn>ft)break;hn=pn.to+At,hn>lt&&(this.highlightRange(zt.cursor(),Math.max(lt,pn.from+At),Math.min(ft,hn),St,Zt),this.startSpan(hn,kt))}ln&&$.parent()}else if($.firstChild()){do if(!($.to<=lt)){if($.from>=ft)break;this.highlightRange($,lt,ft,St,Tt),this.startSpan(Math.min(ft,$.to),kt)}while($.nextSibling());$.parent()}}}function getStyleTags(dt){let $=dt.type.prop(ruleNodeProp);for(;$&&$.context&&!dt.matchContext($.context);)$=$.next;return $||null}const t=Tag.define,comment=t(),name=t(),typeName=t(name),propertyName=t(name),literal=t(),string=t(literal),number=t(literal),content=t(),heading=t(content),keyword=t(),operator=t(),punctuation=t(),bracket=t(punctuation),meta=t(),tags={comment,lineComment:t(comment),blockComment:t(comment),docComment:t(comment),name,variableName:t(name),typeName,tagName:t(typeName),propertyName,attributeName:t(propertyName),className:t(name),labelName:t(name),namespace:t(name),macroName:t(name),literal,string,docString:t(string),character:t(string),attributeValue:t(string),number,integer:t(number),float:t(number),bool:t(literal),regexp:t(literal),escape:t(literal),color:t(literal),url:t(literal),keyword,self:t(keyword),null:t(keyword),atom:t(keyword),unit:t(keyword),modifier:t(keyword),operatorKeyword:t(keyword),controlKeyword:t(keyword),definitionKeyword:t(keyword),moduleKeyword:t(keyword),operator,derefOperator:t(operator),arithmeticOperator:t(operator),logicOperator:t(operator),bitwiseOperator:t(operator),compareOperator:t(operator),updateOperator:t(operator),definitionOperator:t(operator),typeOperator:t(operator),controlOperator:t(operator),punctuation,separator:t(punctuation),bracket,angleBracket:t(bracket),squareBracket:t(bracket),paren:t(bracket),brace:t(bracket),content,heading,heading1:t(heading),heading2:t(heading),heading3:t(heading),heading4:t(heading),heading5:t(heading),heading6:t(heading),contentSeparator:t(content),list:t(content),quote:t(content),emphasis:t(content),strong:t(content),link:t(content),monospace:t(content),strikethrough:t(content),inserted:t(),deleted:t(),changed:t(),invalid:t(),meta,documentMeta:t(meta),annotation:t(meta),processingInstruction:t(meta),definition:Tag.defineModifier(),constant:Tag.defineModifier(),function:Tag.defineModifier(),standard:Tag.defineModifier(),local:Tag.defineModifier(),special:Tag.defineModifier()};tagHighlighter([{tag:tags.link,class:"tok-link"},{tag:tags.heading,class:"tok-heading"},{tag:tags.emphasis,class:"tok-emphasis"},{tag:tags.strong,class:"tok-strong"},{tag:tags.keyword,class:"tok-keyword"},{tag:tags.atom,class:"tok-atom"},{tag:tags.bool,class:"tok-bool"},{tag:tags.url,class:"tok-url"},{tag:tags.labelName,class:"tok-labelName"},{tag:tags.inserted,class:"tok-inserted"},{tag:tags.deleted,class:"tok-deleted"},{tag:tags.literal,class:"tok-literal"},{tag:tags.string,class:"tok-string"},{tag:tags.number,class:"tok-number"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],class:"tok-string2"},{tag:tags.variableName,class:"tok-variableName"},{tag:tags.local(tags.variableName),class:"tok-variableName tok-local"},{tag:tags.definition(tags.variableName),class:"tok-variableName tok-definition"},{tag:tags.special(tags.variableName),class:"tok-variableName2"},{tag:tags.definition(tags.propertyName),class:"tok-propertyName tok-definition"},{tag:tags.typeName,class:"tok-typeName"},{tag:tags.namespace,class:"tok-namespace"},{tag:tags.className,class:"tok-className"},{tag:tags.macroName,class:"tok-macroName"},{tag:tags.propertyName,class:"tok-propertyName"},{tag:tags.operator,class:"tok-operator"},{tag:tags.comment,class:"tok-comment"},{tag:tags.meta,class:"tok-meta"},{tag:tags.invalid,class:"tok-invalid"},{tag:tags.punctuation,class:"tok-punctuation"}]);const printKeyword=1,indent=189,dedent=190,newline$1=191,newlineBracketed=192,newlineEmpty=193,eof=194,ParenL=22,ParenthesizedExpression=23,TupleExpression=47,ComprehensionExpression=48,BracketL=53,ArrayExpression=54,ArrayComprehensionExpression=55,BraceL=57,DictionaryExpression=58,DictionaryComprehensionExpression=59,SetExpression=60,SetComprehensionExpression=61,ArgList=63,subscript=230,FormatReplacement=71,importList=255,ParamList=121,SequencePattern=142,MappingPattern=143,PatternArgList=146,newline$2=10,carriageReturn=13,space$1=32,tab=9,hash=35,parenOpen=40,dot=46,bracketed=new Set([ParenthesizedExpression,TupleExpression,ComprehensionExpression,importList,ArgList,ParamList,ArrayExpression,ArrayComprehensionExpression,subscript,SetExpression,SetComprehensionExpression,DictionaryExpression,DictionaryComprehensionExpression,FormatReplacement,SequencePattern,MappingPattern,PatternArgList]),newlines=new ExternalTokenizer((dt,$)=>{if(dt.next<0)dt.acceptToken(eof);else if(!(dt.next!=newline$2&&dt.next!=carriageReturn))if($.context.depth<0)dt.acceptToken(newlineBracketed,1);else{dt.advance();let lt=0;for(;dt.next==space$1||dt.next==tab;)dt.advance(),lt++;let ft=dt.next==newline$2||dt.next==carriageReturn||dt.next==hash;dt.acceptToken(ft?newlineEmpty:newline$1,-lt)}},{contextual:!0,fallback:!0}),indentation=new ExternalTokenizer((dt,$)=>{let lt=$.context.depth;if(lt<0)return;let ft=dt.peek(-1);if((ft==newline$2||ft==carriageReturn)&&$.context.depth>=0){let St=0,Tt=0;for(;;){if(dt.next==space$1)St++;else if(dt.next==tab)St+=8-St%8;else break;dt.advance(),Tt++}St!=lt&&dt.next!=newline$2&&dt.next!=carriageReturn&&dt.next!=hash&&(St<lt?dt.acceptToken(dedent,-Tt):dt.acceptToken(indent))}});function IndentLevel(dt,$){this.parent=dt,this.depth=$,this.hash=(dt?dt.hash+dt.hash<<8:0)+$+($<<4)}const topIndent$1=new IndentLevel(null,0);function countIndent(dt){let $=0;for(let lt=0;lt<dt.length;lt++)$+=dt.charCodeAt(lt)==tab?8-$%8:1;return $}const trackIndent=new ContextTracker({start:topIndent$1,reduce(dt,$){return dt.depth<0&&bracketed.has($)?dt.parent:dt},shift(dt,$,lt,ft){return $==indent?new IndentLevel(dt,countIndent(ft.read(ft.pos,lt.pos))):$==dedent?dt.parent:$==ParenL||$==BracketL||$==BraceL?new IndentLevel(dt,-1):dt},hash(dt){return dt.hash}}),legacyPrint=new ExternalTokenizer(dt=>{for(let $=0;$<5;$++){if(dt.next!="print".charCodeAt($))return;dt.advance()}if(!/\w/.test(String.fromCharCode(dt.next)))for(let $=0;;$++){let lt=dt.peek($);if(!(lt==space$1||lt==tab)){lt!=parenOpen&&lt!=dot&&lt!=newline$2&&lt!=carriageReturn&&lt!=hash&&dt.acceptToken(printKeyword);return}}}),pythonHighlighting=styleTags({'async "*" "**" FormatConversion FormatSpec':tags.modifier,"for while if elif else try except finally return raise break continue with pass assert await yield match case":tags.controlKeyword,"in not and or is del":tags.operatorKeyword,"from def class global nonlocal lambda":tags.definitionKeyword,import:tags.moduleKeyword,"with as print":tags.keyword,Boolean:tags.bool,None:tags.null,VariableName:tags.variableName,"CallExpression/VariableName":tags.function(tags.variableName),"FunctionDefinition/VariableName":tags.function(tags.definition(tags.variableName)),"ClassDefinition/VariableName":tags.definition(tags.className),PropertyName:tags.propertyName,"CallExpression/MemberExpression/PropertyName":tags.function(tags.propertyName),Comment:tags.lineComment,Number:tags.number,String:tags.string,FormatString:tags.special(tags.string),UpdateOp:tags.updateOperator,"ArithOp!":tags.arithmeticOperator,BitOp:tags.bitwiseOperator,CompareOp:tags.compareOperator,AssignOp:tags.definitionOperator,Ellipsis:tags.punctuation,At:tags.meta,"( )":tags.paren,"[ ]":tags.squareBracket,"{ }":tags.brace,".":tags.derefOperator,", ;":tags.separator}),spec_identifier$1={__proto__:null,await:40,or:50,and:52,in:56,not:58,is:60,if:66,else:68,lambda:72,yield:90,from:92,async:98,for:100,None:152,True:154,False:154,del:168,pass:172,break:176,continue:180,return:184,raise:192,import:196,as:198,global:202,nonlocal:204,assert:208,elif:218,while:222,try:228,except:230,finally:232,with:236,def:240,class:250,match:261,case:267},parser$1=LRParser.deserialize({version:14,states:"!L`O`Q$IXOOO%fQ$I[O'#G|OOQ$IS'#Cm'#CmOOQ$IS'#Cn'#CnO'UQ$IWO'#ClO(wQ$I[O'#G{OOQ$IS'#G|'#G|OOQ$IS'#DS'#DSOOQ$IS'#G{'#G{O)eQ$IWO'#CsO)uQ$IWO'#DdO*VQ$IWO'#DhOOQ$IS'#Ds'#DsO*jO`O'#DsO*rOpO'#DsO*zO!bO'#DtO+VO#tO'#DtO+bO&jO'#DtO+mO,UO'#DtO-oQ$I[O'#GmOOQ$IS'#Gm'#GmO'UQ$IWO'#GlO/RQ$I[O'#GlOOQ$IS'#E]'#E]O/jQ$IWO'#E^OOQ$IS'#Gk'#GkO/tQ$IWO'#GjOOQ$IV'#Gj'#GjO0PQ$IWO'#FPOOQ$IS'#GX'#GXO0UQ$IWO'#FOOOQ$IV'#Hx'#HxOOQ$IV'#Gi'#GiOOQ$IT'#Fh'#FhQ`Q$IXOOO'UQ$IWO'#CoO0dQ$IWO'#C{O0kQ$IWO'#DPO0yQ$IWO'#HQO1ZQ$I[O'#EQO'UQ$IWO'#EROOQ$IS'#ET'#ETOOQ$IS'#EV'#EVOOQ$IS'#EX'#EXO1oQ$IWO'#EZO2VQ$IWO'#E_O0PQ$IWO'#EaO2jQ$I[O'#EaO0PQ$IWO'#EdO/jQ$IWO'#EgO/jQ$IWO'#EkO/jQ$IWO'#EnO2uQ$IWO'#EpO2|Q$IWO'#EuO3XQ$IWO'#EqO/jQ$IWO'#EuO0PQ$IWO'#EwO0PQ$IWO'#E|O3^Q$IWO'#FROOQ$IS'#Cc'#CcOOQ$IS'#Cd'#CdOOQ$IS'#Ce'#CeOOQ$IS'#Cf'#CfOOQ$IS'#Cg'#CgOOQ$IS'#Ch'#ChOOQ$IS'#Cj'#CjO'UQ$IWO,58|O'UQ$IWO,58|O'UQ$IWO,58|O'UQ$IWO,58|O'UQ$IWO,58|O'UQ$IWO,58|O3eQ$IWO'#DmOOQ$IS,5:W,5:WO3xQ$IWO'#H[OOQ$IS,5:Z,5:ZO4VQ%1`O,5:ZO4[Q$I[O,59WO0dQ$IWO,59`O0dQ$IWO,59`O0dQ$IWO,59`O6zQ$IWO,59`O7PQ$IWO,59`O7WQ$IWO,59hO7_Q$IWO'#G{O8eQ$IWO'#GzOOQ$IS'#Gz'#GzOOQ$IS'#DY'#DYO8|Q$IWO,59_O'UQ$IWO,59_O9[Q$IWO,59_O9aQ$IWO,5:PO'UQ$IWO,5:POOQ$IS,5:O,5:OO9oQ$IWO,5:OO9tQ$IWO,5:VO'UQ$IWO,5:VO'UQ$IWO,5:TOOQ$IS,5:S,5:SO:VQ$IWO,5:SO:[Q$IWO,5:UOOOO'#Fp'#FpO:aO`O,5:_OOQ$IS,5:_,5:_OOOO'#Fq'#FqO:iOpO,5:_O:qQ$IWO'#DuOOOO'#Fr'#FrO;RO!bO,5:`OOQ$IS,5:`,5:`OOOO'#Fu'#FuO;^O#tO,5:`OOOO'#Fv'#FvO;iO&jO,5:`OOOO'#Fw'#FwO;tO,UO,5:`OOQ$IS'#Fx'#FxO<PQ$I[O,5:dO>qQ$I[O,5=WO?[Q%GlO,5=WO?{Q$I[O,5=WOOQ$IS,5:x,5:xO@dQ$IXO'#GQOAsQ$IWO,5;TOOQ$IV,5=U,5=UOBOQ$I[O'#HtOBgQ$IWO,5;kOOQ$IS-E:V-E:VOOQ$IV,5;j,5;jO3SQ$IWO'#EwOOQ$IT-E9f-E9fOBoQ$I[O,59ZODvQ$I[O,59gOEaQ$IWO'#G}OElQ$IWO'#G}O0PQ$IWO'#G}OEwQ$IWO'#DROFPQ$IWO,59kOFUQ$IWO'#HRO'UQ$IWO'#HRO/jQ$IWO,5=lOOQ$IS,5=l,5=lO/jQ$IWO'#D|OOQ$IS'#D}'#D}OFsQ$IWO'#FzOGTQ$IWO,58zOGTQ$IWO,58zO)hQ$IWO,5:jOGcQ$I[O'#HTOOQ$IS,5:m,5:mOOQ$IS,5:u,5:uOGvQ$IWO,5:yOHXQ$IWO,5:{OOQ$IS'#F}'#F}OHgQ$I[O,5:{OHuQ$IWO,5:{OHzQ$IWO'#HwOOQ$IS,5;O,5;OOIYQ$IWO'#HsOOQ$IS,5;R,5;RO3XQ$IWO,5;VO3XQ$IWO,5;YOIkQ$I[O'#HyO'UQ$IWO'#HyOIuQ$IWO,5;[O2uQ$IWO,5;[O/jQ$IWO,5;aO0PQ$IWO,5;cOIzQ$IXO'#ElOKTQ$IZO,5;]ONiQ$IWO'#HzO3XQ$IWO,5;aONtQ$IWO,5;cONyQ$IWO,5;hO! RQ$I[O,5;mO'UQ$IWO,5;mO!#uQ$I[O1G.hO!#|Q$I[O1G.hO!&mQ$I[O1G.hO!&wQ$I[O1G.hO!)bQ$I[O1G.hO!)uQ$I[O1G.hO!*YQ$IWO'#HZO!*hQ$I[O'#GmO/jQ$IWO'#HZO!*rQ$IWO'#HYOOQ$IS,5:X,5:XO!*zQ$IWO,5:XO!+PQ$IWO'#H]O!+[Q$IWO'#H]O!+oQ$IWO,5=vOOQ$IS'#Dq'#DqOOQ$IS1G/u1G/uOOQ$IS1G.z1G.zO!,oQ$I[O1G.zO!,vQ$I[O1G.zO0dQ$IWO1G.zO!-cQ$IWO1G/SOOQ$IS'#DX'#DXO/jQ$IWO,59rOOQ$IS1G.y1G.yO!-jQ$IWO1G/cO!-zQ$IWO1G/cO!.SQ$IWO1G/dO'UQ$IWO'#HSO!.XQ$IWO'#HSO!.^Q$I[O1G.yO!.nQ$IWO,59gO!/tQ$IWO,5=rO!0UQ$IWO,5=rO!0^Q$IWO1G/kO!0cQ$I[O1G/kOOQ$IS1G/j1G/jO!0sQ$IWO,5=mO!1jQ$IWO,5=mO/jQ$IWO1G/oO!2XQ$IWO1G/qO!2^Q$I[O1G/qO!2nQ$I[O1G/oOOQ$IS1G/n1G/nOOQ$IS1G/p1G/pOOOO-E9n-E9nOOQ$IS1G/y1G/yOOOO-E9o-E9oO!3OQ$IWO'#HhO/jQ$IWO'#HhO!3^Q$IWO,5:aOOOO-E9p-E9pOOQ$IS1G/z1G/zOOOO-E9s-E9sOOOO-E9t-E9tOOOO-E9u-E9uOOQ$IS-E9v-E9vO!3iQ%GlO1G2rO!4YQ$I[O1G2rO'UQ$IWO,5<eOOQ$IS,5<e,5<eOOQ$IS-E9w-E9wOOQ$IS,5<l,5<lOOQ$IS-E:O-E:OOOQ$IV1G0o1G0oO0PQ$IWO'#F|O!4qQ$I[O,5>`OOQ$IS1G1V1G1VO!5YQ$IWO1G1VOOQ$IS'#DT'#DTO/jQ$IWO,5=iOOQ$IS,5=i,5=iO!5_Q$IWO'#FiO!5jQ$IWO,59mO!5rQ$IWO1G/VO!5|Q$I[O,5=mOOQ$IS1G3W1G3WOOQ$IS,5:h,5:hO!6mQ$IWO'#GlOOQ$IS,5<f,5<fOOQ$IS-E9x-E9xO!7OQ$IWO1G.fOOQ$IS1G0U1G0UO!7^Q$IWO,5=oO!7nQ$IWO,5=oO/jQ$IWO1G0eO/jQ$IWO1G0eO0PQ$IWO1G0gOOQ$IS-E9{-E9{O!8PQ$IWO1G0gO!8[Q$IWO1G0gO!8aQ$IWO,5>cO!8oQ$IWO,5>cO!8}Q$IWO,5>_O!9eQ$IWO,5>_O!9vQ$IZO1G0qO!=XQ$IZO1G0tO!@gQ$IWO,5>eO!@qQ$IWO,5>eO!@yQ$I[O,5>eO/jQ$IWO1G0vO!ATQ$IWO1G0vO3XQ$IWO1G0{ONtQ$IWO1G0}OOQ$IV,5;W,5;WO!AYQ$IYO,5;WO!A_Q$IZO1G0wO!DsQ$IWO'#GUO3XQ$IWO1G0wO3XQ$IWO1G0wO!EQQ$IWO,5>fO!E_Q$IWO,5>fO0PQ$IWO,5>fOOQ$IV1G0{1G0{O!EgQ$IWO'#EyO!ExQ%1`O1G0}OOQ$IV1G1S1G1SO3XQ$IWO1G1SO!FQQ$IWO'#FTOOQ$IV1G1X1G1XO! RQ$I[O1G1XOOQ$IS,5=u,5=uOOQ$IS'#Dn'#DnO/jQ$IWO,5=uO!FVQ$IWO,5=tO!FjQ$IWO,5=tOOQ$IS1G/s1G/sO!FrQ$IWO,5=wO!GSQ$IWO,5=wO!G[Q$IWO,5=wO!GoQ$IWO,5=wO!HPQ$IWO,5=wOOQ$IS1G3b1G3bOOQ$IS7+$f7+$fO!5rQ$IWO7+$nO!IrQ$IWO1G.zO!IyQ$IWO1G.zOOQ$IS1G/^1G/^OOQ$IS,5<V,5<VO'UQ$IWO,5<VOOQ$IS7+$}7+$}O!JQQ$IWO7+$}OOQ$IS-E9i-E9iOOQ$IS7+%O7+%OO!JbQ$IWO,5=nO'UQ$IWO,5=nOOQ$IS7+$e7+$eO!JgQ$IWO7+$}O!JoQ$IWO7+%OO!JtQ$IWO1G3^OOQ$IS7+%V7+%VO!KUQ$IWO1G3^O!K^Q$IWO7+%VOOQ$IS,5<U,5<UO'UQ$IWO,5<UO!KcQ$IWO1G3XOOQ$IS-E9h-E9hO!LYQ$IWO7+%ZOOQ$IS7+%]7+%]O!LhQ$IWO1G3XO!MVQ$IWO7+%]O!M[Q$IWO1G3_O!MlQ$IWO1G3_O!MtQ$IWO7+%ZO!MyQ$IWO,5>SO!NaQ$IWO,5>SO!NaQ$IWO,5>SO!NoO!LQO'#DwO!NzOSO'#HiOOOO1G/{1G/{O# PQ$IWO1G/{O# XQ%GlO7+(^O# xQ$I[O1G2PP#!cQ$IWO'#FyOOQ$IS,5<h,5<hOOQ$IS-E9z-E9zOOQ$IS7+&q7+&qOOQ$IS1G3T1G3TOOQ$IS,5<T,5<TOOQ$IS-E9g-E9gOOQ$IS7+$q7+$qO#!pQ$IWO,5=WO##ZQ$IWO,5=WO##lQ$I[O,5<WO#$PQ$IWO1G3ZOOQ$IS-E9j-E9jOOQ$IS7+&P7+&PO#$aQ$IWO7+&POOQ$IS7+&R7+&RO#$oQ$IWO'#HvO0PQ$IWO'#HuO#%TQ$IWO7+&ROOQ$IS,5<k,5<kO#%`Q$IWO1G3}OOQ$IS-E9}-E9}OOQ$IS,5<g,5<gO#%nQ$IWO1G3yOOQ$IS-E9y-E9yO#&UQ$IZO7+&]O!DsQ$IWO'#GSO3XQ$IWO7+&]O3XQ$IWO7+&`O#)gQ$I[O,5<oO'UQ$IWO,5<oO#)qQ$IWO1G4POOQ$IS-E:R-E:RO#){Q$IWO1G4PO3XQ$IWO7+&bO/jQ$IWO7+&bOOQ$IV7+&g7+&gO!ExQ%1`O7+&iO#*TQ$IXO1G0rOOQ$IV-E:S-E:SO3XQ$IWO7+&cO3XQ$IWO7+&cOOQ$IV,5<p,5<pO#+yQ$IWO,5<pOOQ$IV7+&c7+&cO#,UQ$IZO7+&cO#/dQ$IWO,5<qO#/oQ$IWO1G4QOOQ$IS-E:T-E:TO#/|Q$IWO1G4QO#0UQ$IWO'#H|O#0dQ$IWO'#H|O0PQ$IWO'#H|OOQ$IS'#H|'#H|O#0oQ$IWO'#H{OOQ$IS,5;e,5;eO#0wQ$IWO,5;eO/jQ$IWO'#E{OOQ$IV7+&i7+&iO3XQ$IWO7+&iOOQ$IV7+&n7+&nO#0|Q$IYO,5;oOOQ$IV7+&s7+&sOOQ$IS1G3a1G3aOOQ$IS,5<Y,5<YO#1RQ$IWO1G3`OOQ$IS-E9l-E9lO#1fQ$IWO,5<ZO#1qQ$IWO,5<ZO#2UQ$IWO1G3cOOQ$IS-E9m-E9mO#2fQ$IWO1G3cO#2nQ$IWO1G3cO#3OQ$IWO1G3cO#2fQ$IWO1G3cOOQ$IS<<HY<<HYO#3ZQ$I[O1G1qOOQ$IS<<Hi<<HiP#3hQ$IWO'#FkO7WQ$IWO1G3YO#3uQ$IWO1G3YO#3zQ$IWO<<HiOOQ$IS<<Hj<<HjO#4[Q$IWO7+(xOOQ$IS<<Hq<<HqO#4lQ$I[O1G1pP#5]Q$IWO'#FjO#5jQ$IWO7+(yO#5zQ$IWO7+(yO#6SQ$IWO<<HuO#6XQ$IWO7+(sOOQ$IS<<Hw<<HwO#7OQ$IWO,5<XO'UQ$IWO,5<XOOQ$IS-E9k-E9kOOQ$IS<<Hu<<HuOOQ$IS,5<_,5<_O/jQ$IWO,5<_O#7TQ$IWO1G3nOOQ$IS-E9q-E9qO#7kQ$IWO1G3nOOOO'#Ft'#FtO#7yO!LQO,5:cOOOO,5>T,5>TOOOO7+%g7+%gO#8UQ$IWO1G2rO#8oQ$IWO1G2rP'UQ$IWO'#FlO/jQ$IWO<<IkO#9QQ$IWO,5>bO#9cQ$IWO,5>bO0PQ$IWO,5>bO#9tQ$IWO,5>aOOQ$IS<<Im<<ImP0PQ$IWO'#GPP/jQ$IWO'#F{OOQ$IV-E:Q-E:QO3XQ$IWO<<IwOOQ$IV,5<n,5<nO3XQ$IWO,5<nOOQ$IV<<Iw<<IwOOQ$IV<<Iz<<IzO#9yQ$I[O1G2ZP#:TQ$IWO'#GTO#:[Q$IWO7+)kO#:fQ$IZO<<I|O3XQ$IWO<<I|OOQ$IV<<JT<<JTO3XQ$IWO<<JTOOQ$IV'#GR'#GRO#=tQ$IZO7+&^OOQ$IV<<I}<<I}O#?pQ$IZO<<I}OOQ$IV1G2[1G2[O0PQ$IWO1G2[O3XQ$IWO<<I}O0PQ$IWO1G2]P/jQ$IWO'#GVO#COQ$IWO7+)lO#C]Q$IWO7+)lOOQ$IS'#Ez'#EzO/jQ$IWO,5>hO#CeQ$IWO,5>hOOQ$IS,5>h,5>hO#CpQ$IWO,5>gO#DRQ$IWO,5>gOOQ$IS1G1P1G1POOQ$IS,5;g,5;gO#DZQ$IWO1G1ZP#D`Q$IWO'#FnO#DpQ$IWO1G1uO#ETQ$IWO1G1uO#EeQ$IWO1G1uP#EpQ$IWO'#FoO#E}Q$IWO7+(}O#F_Q$IWO7+(}O#F_Q$IWO7+(}O#FgQ$IWO7+(}O#FwQ$IWO7+(tO7WQ$IWO7+(tOOQ$ISAN>TAN>TO#GbQ$IWO<<LeOOQ$ISAN>aAN>aO/jQ$IWO1G1sO#GrQ$I[O1G1sP#G|Q$IWO'#FmOOQ$IS1G1y1G1yP#HZQ$IWO'#FsO#HhQ$IWO7+)YOOOO-E9r-E9rO#IOQ$IWO7+(^OOQ$ISAN?VAN?VO#IiQ$IWO,5<jO#I}Q$IWO1G3|OOQ$IS-E9|-E9|O#J`Q$IWO1G3|OOQ$IS1G3{1G3{OOQ$IVAN?cAN?cOOQ$IV1G2Y1G2YO3XQ$IWOAN?hO#JqQ$IZOAN?hOOQ$IVAN?oAN?oOOQ$IV-E:P-E:POOQ$IV<<Ix<<IxO3XQ$IWOAN?iO3XQ$IWO7+'vOOQ$IVAN?iAN?iOOQ$IS7+'w7+'wO#NPQ$IWO<<MWOOQ$IS1G4S1G4SO/jQ$IWO1G4SOOQ$IS,5<r,5<rO#N^Q$IWO1G4ROOQ$IS-E:U-E:UOOQ$IU'#GY'#GYO#NoQ$IYO7+&uO#NzQ$IWO'#FUO$ rQ$IWO7+'aO$!SQ$IWO7+'aOOQ$IS7+'a7+'aO$!_Q$IWO<<LiO$!oQ$IWO<<LiO$!oQ$IWO<<LiO$!wQ$IWO'#HUOOQ$IS<<L`<<L`O$#RQ$IWO<<L`OOQ$IS7+'_7+'_O0PQ$IWO1G2UP0PQ$IWO'#GOO$#lQ$IWO7+)hO$#}Q$IWO7+)hOOQ$IVG25SG25SO3XQ$IWOG25SOOQ$IVG25TG25TOOQ$IV<<Kb<<KbOOQ$IS7+)n7+)nP$$`Q$IWO'#GWOOQ$IU-E:W-E:WOOQ$IV<<Ja<<JaO$%SQ$I[O'#FWOOQ$IS'#FY'#FYO$%dQ$IWO'#FXO$&UQ$IWO'#FXOOQ$IS'#FX'#FXO$&ZQ$IWO'#IOO#NzQ$IWO'#F`O#NzQ$IWO'#F`O$&rQ$IWO'#FaO#NzQ$IWO'#FbO$&yQ$IWO'#IPOOQ$IS'#IP'#IPO$'hQ$IWO,5;pOOQ$IS<<J{<<J{O$'pQ$IWO<<J{O$(QQ$IWOANBTO$(bQ$IWOANBTO$(jQ$IWO'#HVOOQ$IS'#HV'#HVO0kQ$IWO'#DaO$)TQ$IWO,5=pOOQ$ISANAzANAzOOQ$IS7+'p7+'pO$)lQ$IWO<<MSOOQ$IVLD*nLD*nO4VQ%1`O'#G[O$)}Q$I[O,5;yO#NzQ$IWO'#FdOOQ$IS,5;},5;}OOQ$IS'#FZ'#FZO$*oQ$IWO,5;sO$*tQ$IWO,5;sOOQ$IS'#F^'#F^O#NzQ$IWO'#GZO$+fQ$IWO,5;wO$,QQ$IWO,5>jO$,bQ$IWO,5>jO0PQ$IWO,5;vO$,sQ$IWO,5;zO$,xQ$IWO,5;zO#NzQ$IWO'#IQO$,}Q$IWO'#IQO$-SQ$IWO,5;{OOQ$IS,5;|,5;|O'UQ$IWO'#FgOOQ$IU1G1[1G1[O3XQ$IWO1G1[OOQ$ISAN@gAN@gO$-XQ$IWOG27oO$-iQ$IWO,59{OOQ$IS1G3[1G3[OOQ$IS,5<v,5<vOOQ$IS-E:Y-E:YO$-nQ$I[O'#FWO$-uQ$IWO'#IRO$.TQ$IWO'#IRO$.]Q$IWO,5<OOOQ$IS1G1_1G1_O$.bQ$IWO1G1_O$.gQ$IWO,5<uOOQ$IS-E:X-E:XO$/RQ$IWO,5<yO$/jQ$IWO1G4UOOQ$IS-E:]-E:]OOQ$IS1G1b1G1bOOQ$IS1G1f1G1fO$/zQ$IWO,5>lO#NzQ$IWO,5>lOOQ$IS1G1g1G1gO$0YQ$I[O,5<ROOQ$IU7+&v7+&vO$!wQ$IWO1G/gO#NzQ$IWO,5<PO$0aQ$IWO,5>mO$0hQ$IWO,5>mOOQ$IS1G1j1G1jOOQ$IS7+&y7+&yP#NzQ$IWO'#G_O$0pQ$IWO1G4WO$0zQ$IWO1G4WO$1SQ$IWO1G4WOOQ$IS7+%R7+%RO$1bQ$IWO1G1kO$1pQ$I[O'#FWO$1wQ$IWO,5<xOOQ$IS,5<x,5<xO$2VQ$IWO1G4XOOQ$IS-E:[-E:[O#NzQ$IWO,5<wO$2^Q$IWO,5<wO$2cQ$IWO7+)rOOQ$IS-E:Z-E:ZO$2mQ$IWO7+)rO#NzQ$IWO,5<QP#NzQ$IWO'#G^O$2uQ$IWO1G2cO#NzQ$IWO1G2cP$3TQ$IWO'#G]O$3[Q$IWO<<M^O$3fQ$IWO1G1lO$3tQ$IWO7+'}O7WQ$IWO'#C{O7WQ$IWO,59`O7WQ$IWO,59`O7WQ$IWO,59`O$4SQ$I[O,5=WO7WQ$IWO1G.zO/jQ$IWO1G/VO/jQ$IWO7+$nP$4gQ$IWO'#FyO'UQ$IWO'#GlO$4tQ$IWO,59`O$4yQ$IWO,59`O$5QQ$IWO,59kO$5VQ$IWO1G/SO0kQ$IWO'#DPO7WQ$IWO,59h",stateData:"$5m~O%[OS%XOS%WOSQOS~OPhOTeOdsOfXOmtOq!SOtuO}vO!O!PO!R!VO!S!UO!VYO!ZZO!fdO!mdO!ndO!odO!vxO!xyO!zzO!|{O#O|O#S}O#U!OO#X!QO#Y!QO#[!RO#c!TO#f!WO#j!XO#l!YO#q!ZO#tlO#v![O%VqO%gQO%hQO%lRO%mVO&R[O&S]O&V^O&Y_O&``O&caO&ebO~OT!bO]!bO_!cOf!jO!V!lO!d!nO%b!]O%c!^O%d!_O%e!`O%f!`O%g!aO%h!aO%i!bO%j!bO%k!bO~Oi%pXj%pXk%pXl%pXm%pXn%pXq%pXx%pXy%pX!s%pX#^%pX%V%pX%Y%pX%r%pXe%pX!R%pX!S%pX%s%pX!U%pX!Y%pX!O%pX#V%pXr%pX!j%pX~P$bOdsOfXO!VYO!ZZO!fdO!mdO!ndO!odO%gQO%hQO%lRO%mVO&R[O&S]O&V^O&Y_O&``O&caO&ebO~Ox%oXy%oX#^%oX%V%oX%Y%oX%r%oX~Oi!qOj!rOk!pOl!pOm!sOn!tOq!uO!s%oX~P(cOT!{Om/iOt/wO}vO~P'UOT#OOm/iOt/wO!U#PO~P'UOT#SO_#TOm/iOt/wO!Y#UO~P'UO&T#XO&U#ZO~O&W#[O&X#ZO~O!Z#^O&Z#_O&_#aO~O!Z#^O&a#bO&b#aO~O!Z#^O&U#aO&d#dO~O!Z#^O&X#aO&f#fO~OT%aX]%aX_%aXf%aXi%aXj%aXk%aXl%aXm%aXn%aXq%aXx%aX!V%aX!d%aX%b%aX%c%aX%d%aX%e%aX%f%aX%g%aX%h%aX%i%aX%j%aX%k%aXe%aX!R%aX!S%aX~O&R[O&S]O&V^O&Y_O&``O&caO&ebOy%aX!s%aX#^%aX%V%aX%Y%aX%r%aX%s%aX!U%aX!Y%aX!O%aX#V%aXr%aX!j%aX~P+xOx#kOy%`X!s%`X#^%`X%V%`X%Y%`X%r%`X~Om/iOt/wO~P'UO#^#nO%V#pO%Y#pO~O%mVO~O!R#uO#l!YO#q!ZO#tlO~OmtO~P'UOT#zO_#{O%mVOyuP~OT$POm/iOt/wO!O$QO~P'UOy$SO!s$XO%r$TO#^!tX%V!tX%Y!tX~OT$POm/iOt/wO#^!}X%V!}X%Y!}X~P'UOm/iOt/wO#^#RX%V#RX%Y#RX~P'UO!d$_O!m$_O%mVO~OT$iO~P'UO!S$kO#j$lO#l$mO~Oy$nO~OT$uO~P'UOT%OO_%OOe%QOm/iOt/wO~P'UOm/iOt/wOy%TO~P'UO&Q%VO~O_!cOf!jO!V!lO!d!nOT`a]`ai`aj`ak`al`am`an`aq`ax`ay`a!s`a#^`a%V`a%Y`a%b`a%c`a%d`a%e`a%f`a%g`a%h`a%i`a%j`a%k`a%r`ae`a!R`a!S`a%s`a!U`a!Y`a!O`a#V`ar`a!j`a~Ol%[O~Om%[O~P'UOm/iO~P'UOi/kOj/lOk/jOl/jOm/sOn/tOq/xOe%oX!R%oX!S%oX%s%oX!U%oX!Y%oX!O%oX#V%oX!j%oX~P(cO%s%^Oe%nXx%nX!R%nX!S%nX!U%nXy%nX~Oe%`Ox%aO!R%eO!S%dO~Oe%`O~Ox%hO!R%eO!S%dO!U%zX~O!U%lO~Ox%mOy%oO!R%eO!S%dO!Y%uX~O!Y%sO~O!Y%tO~O&T#XO&U%vO~O&W#[O&X%vO~OT%yOm/iOt/wO}vO~P'UO!Z#^O&Z#_O&_%|O~O!Z#^O&a#bO&b%|O~O!Z#^O&U%|O&d#dO~O!Z#^O&X%|O&f#fO~OT!la]!la_!laf!lai!laj!lak!lal!lam!lan!laq!lax!lay!la!V!la!d!la!s!la#^!la%V!la%Y!la%b!la%c!la%d!la%e!la%f!la%g!la%h!la%i!la%j!la%k!la%r!lae!la!R!la!S!la%s!la!U!la!Y!la!O!la#V!lar!la!j!la~P#yOx&ROy%`a!s%`a#^%`a%V%`a%Y%`a%r%`a~P$bOT&TOmtOtuOy%`a!s%`a#^%`a%V%`a%Y%`a%r%`a~P'UOx&ROy%`a!s%`a#^%`a%V%`a%Y%`a%r%`a~OPhOTeOmtOtuO}vO!O!PO!vxO!xyO!zzO!|{O#O|O#S}O#U!OO#X!QO#Y!QO#[!RO#^$tX%V$tX%Y$tX~P'UO#^#nO%V&YO%Y&YO~O!d&ZOf&hX%V&hX#V&hX#^&hX%Y&hX#U&hX~Of!jO%V&]O~Oicajcakcalcamcancaqcaxcayca!sca#^ca%Vca%Yca%rcaeca!Rca!Sca%sca!Uca!Yca!Oca#Vcarca!jca~P$bOqoaxoayoa#^oa%Voa%Yoa%roa~Oi!qOj!rOk!pOl!pOm!sOn!tO!soa~PD_O%r&_Ox%qXy%qX~O%mVOx%qXy%qX~Ox&bOyuX~Oy&dO~Ox%mO#^%uX%V%uX%Y%uXe%uXy%uX!Y%uX!j%uX%r%uX~OT/rOm/iOt/wO}vO~P'UO%r$TO#^Sa%VSa%YSa~Ox&mO#^%wX%V%wX%Y%wXl%wX~P$bOx&pO!O&oO#^#Ra%V#Ra%Y#Ra~O#V&qO#^#Ta%V#Ta%Y#Ta~O!d$_O!m$_O#U&sO%mVO~O#U&sO~Ox&uO#^&kX%V&kX%Y&kX~Ox&wO#^&gX%V&gX%Y&gXy&gX~Ox&{Ol&mX~P$bOl'OO~OPhOTeOmtOtuO}vO!O!PO!vxO!xyO!zzO!|{O#O|O#S}O#U!OO#X!QO#Y!QO#[!RO%V'TO~P'UOr'XO#g'VO#h'WOP#eaT#ead#eaf#eam#eaq#eat#ea}#ea!O#ea!R#ea!S#ea!V#ea!Z#ea!f#ea!m#ea!n#ea!o#ea!v#ea!x#ea!z#ea!|#ea#O#ea#S#ea#U#ea#X#ea#Y#ea#[#ea#c#ea#f#ea#j#ea#l#ea#q#ea#t#ea#v#ea%S#ea%V#ea%g#ea%h#ea%l#ea%m#ea&R#ea&S#ea&V#ea&Y#ea&`#ea&c#ea&e#ea%U#ea%Y#ea~Ox'YO#V'[Oy&nX~Of'^O~Of!jOy$nO~Oy'bO~P$bOT!bO]!bO_!cOf!jO!V!lO!d!nO%d!_O%e!`O%f!`O%g!aO%h!aO%i!bO%j!bO%k!bOiUijUikUilUimUinUiqUixUiyUi!sUi#^Ui%VUi%YUi%bUi%rUieUi!RUi!SUi%sUi!UUi!YUi!OUi#VUirUi!jUi~O%c!^O~P! YO%cUi~P! YOT!bO]!bO_!cOf!jO!V!lO!d!nO%g!aO%h!aO%i!bO%j!bO%k!bOiUijUikUilUimUinUiqUixUiyUi!sUi#^Ui%VUi%YUi%bUi%cUi%dUi%rUieUi!RUi!SUi%sUi!UUi!YUi!OUi#VUirUi!jUi~O%e!`O%f!`O~P!$TO%eUi%fUi~P!$TO_!cOf!jO!V!lO!d!nOiUijUikUilUimUinUiqUixUiyUi!sUi#^Ui%VUi%YUi%bUi%cUi%dUi%eUi%fUi%gUi%hUi%rUieUi!RUi!SUi%sUi!UUi!YUi!OUi#VUirUi!jUi~OT!bO]!bO%i!bO%j!bO%k!bO~P!'ROTUi]Ui%iUi%jUi%kUi~P!'RO!R%eO!S%dOe%}Xx%}X~O%r'fO%s'fO~P+xOx'hOe%|X~Oe'jO~Ox'kOy'mO!U&PX~Om/iOt/wOx'kOy'nO!U&PX~P'UO!U'pO~Ok!pOl!pOm!sOn!tOihiqhixhiyhi!shi#^hi%Vhi%Yhi%rhi~Oj!rO~P!+tOjhi~P!+tOi/kOj/lOk/jOl/jOm/sOn/tO~Or'rO~P!,}OT'wOe'xOm/iOt/wO~P'UOe'xOx'yO~Oe'{O~O!S'}O~Oe(OOx'yO!R%eO!S%dO~P$bOi/kOj/lOk/jOl/jOm/sOn/tOeoa!Roa!Soa%soa!Uoa!Yoa!Ooa#Voaroa!joa~PD_OT'wOm/iOt/wO!U%za~P'UOx(RO!U%za~O!U(SO~Ox(RO!R%eO!S%dO!U%za~P$bOT(WOm/iOt/wO!Y%ua#^%ua%V%ua%Y%uae%uay%ua!j%ua%r%ua~P'UOx(XO!Y%ua#^%ua%V%ua%Y%uae%uay%ua!j%ua%r%ua~O!Y([O~Ox(XO!R%eO!S%dO!Y%ua~P$bOx(_O!R%eO!S%dO!Y%{a~P$bOx(bOy&[X!Y&[X!j&[X~Oy(eO!Y(gO!j(hO~OT&TOmtOtuOy%`i!s%`i#^%`i%V%`i%Y%`i%r%`i~P'UOx(iOy%`i!s%`i#^%`i%V%`i%Y%`i%r%`i~O!d&ZOf&ha%V&ha#V&ha#^&ha%Y&ha#U&ha~O%V(nO~OT#zO_#{O%mVO~Ox&bOyua~OmtOtuO~P'UOx(XO#^%ua%V%ua%Y%uae%uay%ua!Y%ua!j%ua%r%ua~P$bOx(sO#^%`X%V%`X%Y%`X%r%`X~O%r$TO#^Si%VSi%YSi~O#^%wa%V%wa%Y%wal%wa~P'UOx(vO#^%wa%V%wa%Y%wal%wa~OT(zOf(|O%mVO~O#U(}O~O%mVO#^&ka%V&ka%Y&ka~Ox)PO#^&ka%V&ka%Y&ka~Om/iOt/wO#^&ga%V&ga%Y&gay&ga~P'UOx)SO#^&ga%V&ga%Y&gay&ga~Or)WO#a)VOP#_iT#_id#_if#_im#_iq#_it#_i}#_i!O#_i!R#_i!S#_i!V#_i!Z#_i!f#_i!m#_i!n#_i!o#_i!v#_i!x#_i!z#_i!|#_i#O#_i#S#_i#U#_i#X#_i#Y#_i#[#_i#c#_i#f#_i#j#_i#l#_i#q#_i#t#_i#v#_i%S#_i%V#_i%g#_i%h#_i%l#_i%m#_i&R#_i&S#_i&V#_i&Y#_i&`#_i&c#_i&e#_i%U#_i%Y#_i~Or)XOP#biT#bid#bif#bim#biq#bit#bi}#bi!O#bi!R#bi!S#bi!V#bi!Z#bi!f#bi!m#bi!n#bi!o#bi!v#bi!x#bi!z#bi!|#bi#O#bi#S#bi#U#bi#X#bi#Y#bi#[#bi#c#bi#f#bi#j#bi#l#bi#q#bi#t#bi#v#bi%S#bi%V#bi%g#bi%h#bi%l#bi%m#bi&R#bi&S#bi&V#bi&Y#bi&`#bi&c#bi&e#bi%U#bi%Y#bi~OT)ZOl&ma~P'UOx)[Ol&ma~Ox)[Ol&ma~P$bOl)`O~O%T)cO~Or)fO#g'VO#h)eOP#eiT#eid#eif#eim#eiq#eit#ei}#ei!O#ei!R#ei!S#ei!V#ei!Z#ei!f#ei!m#ei!n#ei!o#ei!v#ei!x#ei!z#ei!|#ei#O#ei#S#ei#U#ei#X#ei#Y#ei#[#ei#c#ei#f#ei#j#ei#l#ei#q#ei#t#ei#v#ei%S#ei%V#ei%g#ei%h#ei%l#ei%m#ei&R#ei&S#ei&V#ei&Y#ei&`#ei&c#ei&e#ei%U#ei%Y#ei~Om/iOt/wOy$nO~P'UOm/iOt/wOy&na~P'UOx)lOy&na~OT)pO_)qOe)tO%i)rO%mVO~Oy$nO&q)vO~O%V)zO~OT%OO_%OOm/iOt/wOe%|a~P'UOx*OOe%|a~Om/iOt/wOy*RO!U&Pa~P'UOx*SO!U&Pa~Om/iOt/wOx*SOy*VO!U&Pa~P'UOm/iOt/wOx*SO!U&Pa~P'UOx*SOy*VO!U&Pa~Ok/jOl/jOm/sOn/tOehiihiqhixhi!Rhi!Shi%shi!Uhiyhi!Yhi#^hi%Vhi%Yhi!Ohi#Vhirhi!jhi%rhi~Oj/lO~P!H[Ojhi~P!H[OT'wOe*[Om/iOt/wO~P'UOl*^O~Oe*[Ox*`O~Oe*aO~OT'wOm/iOt/wO!U%zi~P'UOx*bO!U%zi~O!U*cO~OT(WOm/iOt/wO!Y%ui#^%ui%V%ui%Y%uie%uiy%ui!j%ui%r%ui~P'UOx*fO!R%eO!S%dO!Y%{i~Ox*iO!Y%ui#^%ui%V%ui%Y%uie%uiy%ui!j%ui%r%ui~O!Y*jO~O_*lOm/iOt/wO!Y%{i~P'UOx*fO!Y%{i~O!Y*nO~OT*pOm/iOt/wOy&[a!Y&[a!j&[a~P'UOx*qOy&[a!Y&[a!j&[a~O!Z#^O&^*tO!Y!kX~O!Y*vO~Oy(eO!Y*wO~OT&TOmtOtuOy%`q!s%`q#^%`q%V%`q%Y%`q%r%`q~P'UOx$miy$mi!s$mi#^$mi%V$mi%Y$mi%r$mi~P$bOT&TOmtOtuO~P'UOT&TOm/iOt/wO#^%`a%V%`a%Y%`a%r%`a~P'UOx*xO#^%`a%V%`a%Y%`a%r%`a~Ox$`a#^$`a%V$`a%Y$`al$`a~P$bO#^%wi%V%wi%Y%wil%wi~P'UOx*{O#^#Rq%V#Rq%Y#Rq~Ox*|O#V+OO#^&jX%V&jX%Y&jXe&jX~OT+QOf(|O%mVO~O%mVO#^&ki%V&ki%Y&ki~Om/iOt/wO#^&gi%V&gi%Y&giy&gi~P'UOr+UO#a)VOP#_qT#_qd#_qf#_qm#_qq#_qt#_q}#_q!O#_q!R#_q!S#_q!V#_q!Z#_q!f#_q!m#_q!n#_q!o#_q!v#_q!x#_q!z#_q!|#_q#O#_q#S#_q#U#_q#X#_q#Y#_q#[#_q#c#_q#f#_q#j#_q#l#_q#q#_q#t#_q#v#_q%S#_q%V#_q%g#_q%h#_q%l#_q%m#_q&R#_q&S#_q&V#_q&Y#_q&`#_q&c#_q&e#_q%U#_q%Y#_q~Ol$wax$wa~P$bOT)ZOl&mi~P'UOx+]Ol&mi~OPhOTeOmtOq!SOtuO}vO!O!PO!R!VO!S!UO!vxO!xyO!zzO!|{O#O|O#S}O#U!OO#X!QO#Y!QO#[!RO#c!TO#f!WO#j!XO#l!YO#q!ZO#tlO#v![O~P'UOx+gOy$nO#V+gO~O#h+hOP#eqT#eqd#eqf#eqm#eqq#eqt#eq}#eq!O#eq!R#eq!S#eq!V#eq!Z#eq!f#eq!m#eq!n#eq!o#eq!v#eq!x#eq!z#eq!|#eq#O#eq#S#eq#U#eq#X#eq#Y#eq#[#eq#c#eq#f#eq#j#eq#l#eq#q#eq#t#eq#v#eq%S#eq%V#eq%g#eq%h#eq%l#eq%m#eq&R#eq&S#eq&V#eq&Y#eq&`#eq&c#eq&e#eq%U#eq%Y#eq~O#V+iOx$yay$ya~Om/iOt/wOy&ni~P'UOx+kOy&ni~Oy$SO%r+mOe&pXx&pX~O%mVOe&pXx&pX~Ox+qOe&oX~Oe+sO~O%T+uO~OT%OO_%OOm/iOt/wOe%|i~P'UOy+wOx$ca!U$ca~Om/iOt/wOy+xOx$ca!U$ca~P'UOm/iOt/wOy*RO!U&Pi~P'UOx+{O!U&Pi~Om/iOt/wOx+{O!U&Pi~P'UOx+{Oy,OO!U&Pi~Oe$_ix$_i!U$_i~P$bOT'wOm/iOt/wO~P'UOl,QO~OT'wOe,ROm/iOt/wO~P'UOT'wOm/iOt/wO!U%zq~P'UOx$^i!Y$^i#^$^i%V$^i%Y$^ie$^iy$^i!j$^i%r$^i~P$bOT(WOm/iOt/wO~P'UO_*lOm/iOt/wO!Y%{q~P'UOx,SO!Y%{q~O!Y,TO~OT(WOm/iOt/wO!Y%uq#^%uq%V%uq%Y%uqe%uqy%uq!j%uq%r%uq~P'UOy,UO~OT*pOm/iOt/wOy&[i!Y&[i!j&[i~P'UOx,ZOy&[i!Y&[i!j&[i~O!Z#^O&^*tO!Y!ka~OT&TOm/iOt/wO#^%`i%V%`i%Y%`i%r%`i~P'UOx,]O#^%`i%V%`i%Y%`i%r%`i~O%mVO#^&ja%V&ja%Y&jae&ja~Ox,`O#^&ja%V&ja%Y&jae&ja~Oe,cO~Ol$wix$wi~P$bOT)ZO~P'UOT)ZOl&mq~P'UOr,fOP#dyT#dyd#dyf#dym#dyq#dyt#dy}#dy!O#dy!R#dy!S#dy!V#dy!Z#dy!f#dy!m#dy!n#dy!o#dy!v#dy!x#dy!z#dy!|#dy#O#dy#S#dy#U#dy#X#dy#Y#dy#[#dy#c#dy#f#dy#j#dy#l#dy#q#dy#t#dy#v#dy%S#dy%V#dy%g#dy%h#dy%l#dy%m#dy&R#dy&S#dy&V#dy&Y#dy&`#dy&c#dy&e#dy%U#dy%Y#dy~OPhOTeOmtOq!SOtuO}vO!O!PO!R!VO!S!UO!vxO!xyO!zzO!|{O#O|O#S}O#U!OO#X!QO#Y!QO#[!RO#c!TO#f!WO#j!XO#l!YO#q!ZO#tlO#v![O%U,jO%Y,jO~P'UO#h,kOP#eyT#eyd#eyf#eym#eyq#eyt#ey}#ey!O#ey!R#ey!S#ey!V#ey!Z#ey!f#ey!m#ey!n#ey!o#ey!v#ey!x#ey!z#ey!|#ey#O#ey#S#ey#U#ey#X#ey#Y#ey#[#ey#c#ey#f#ey#j#ey#l#ey#q#ey#t#ey#v#ey%S#ey%V#ey%g#ey%h#ey%l#ey%m#ey&R#ey&S#ey&V#ey&Y#ey&`#ey&c#ey&e#ey%U#ey%Y#ey~Om/iOt/wOy&nq~P'UOx,oOy&nq~O%r+mOe&pax&pa~OT)pO_)qO%i)rO%mVOe&oa~Ox,sOe&oa~O#y,wO~OT%OO_%OOm/iOt/wO~P'UOm/iOt/wOy,xOx$ci!U$ci~P'UOm/iOt/wOx$ci!U$ci~P'UOy,xOx$ci!U$ci~Om/iOt/wOy*RO~P'UOm/iOt/wOy*RO!U&Pq~P'UOx,{O!U&Pq~Om/iOt/wOx,{O!U&Pq~P'UOq-OO!R%eO!S%dOe%vq!U%vq!Y%vqx%vq~P!,}O_*lOm/iOt/wO!Y%{y~P'UOx$ai!Y$ai~P$bO_*lOm/iOt/wO~P'UOT*pOm/iOt/wO~P'UOT*pOm/iOt/wOy&[q!Y&[q!j&[q~P'UOT&TOm/iOt/wO#^%`q%V%`q%Y%`q%r%`q~P'UO#V-SOx$ra#^$ra%V$ra%Y$rae$ra~O%mVO#^&ji%V&ji%Y&jie&ji~Ox-UO#^&ji%V&ji%Y&jie&ji~Or-XOP#d!RT#d!Rd#d!Rf#d!Rm#d!Rq#d!Rt#d!R}#d!R!O#d!R!R#d!R!S#d!R!V#d!R!Z#d!R!f#d!R!m#d!R!n#d!R!o#d!R!v#d!R!x#d!R!z#d!R!|#d!R#O#d!R#S#d!R#U#d!R#X#d!R#Y#d!R#[#d!R#c#d!R#f#d!R#j#d!R#l#d!R#q#d!R#t#d!R#v#d!R%S#d!R%V#d!R%g#d!R%h#d!R%l#d!R%m#d!R&R#d!R&S#d!R&V#d!R&Y#d!R&`#d!R&c#d!R&e#d!R%U#d!R%Y#d!R~Om/iOt/wOy&ny~P'UOT)pO_)qO%i)rO%mVOe&oi~O#y,wO%U-_O%Y-_O~OT-iOf-gO!V-fO!Z-hO!f-bO!n-dO!o-dO%h-aO%mVO&R[O&S]O&V^O~Om/iOt/wOx$cq!U$cq~P'UOy-nOx$cq!U$cq~Om/iOt/wOy*RO!U&Py~P'UOx-oO!U&Py~Om/iOt-sO~P'UOq-OO!R%eO!S%dOe%vy!U%vy!Y%vyx%vy~P!,}O%mVO#^&jq%V&jq%Y&jqe&jq~Ox-wO#^&jq%V&jq%Y&jqe&jq~OT)pO_)qO%i)rO%mVO~Of-{O!d-yOx#zX#V#zX%b#zXe#zX~Oq#zXy#zX!U#zX!Y#zX~P$$nO%g-}O%h-}Oq#{Xx#{Xy#{X#V#{X%b#{X!U#{Xe#{X!Y#{X~O!f.PO~Ox.TO#V.VO%b.QOq&rXy&rX!U&rXe&rX~O_.YO~P$ WOf-{Oq&sXx&sXy&sX#V&sX%b&sX!U&sXe&sX!Y&sX~Oq.^Oy$nO~Om/iOt/wOx$cy!U$cy~P'UOm/iOt/wOy*RO!U&P!R~P'UOx.bO!U&P!R~Oe%yXq%yX!R%yX!S%yX!U%yX!Y%yXx%yX~P!,}Oq-OO!R%eO!S%dOe%xa!U%xa!Y%xax%xa~O%mVO#^&jy%V&jy%Y&jye&jy~O!d-yOf$Raq$Rax$Ray$Ra#V$Ra%b$Ra!U$Rae$Ra!Y$Ra~O!f.kO~O%g-}O%h-}Oq#{ax#{ay#{a#V#{a%b#{a!U#{ae#{a!Y#{a~O%b.QOq$Pax$Pay$Pa#V$Pa!U$Pae$Pa!Y$Pa~Oq&ray&ra!U&rae&ra~P#NzOx.pOq&ray&ra!U&rae&ra~O!U.sO~Oe.sO~Oy.uO~O!Y.vO~Om/iOt/wOy*RO!U&P!Z~P'UOy.yO~O%r.zO~P$$nOx.{O#V.VO%b.QOe&uX~Ox.{Oe&uX~Oe.}O~O!f/OO~O#V.VOq$}ax$}ay$}a%b$}a!U$}ae$}a!Y$}a~O#V.VO%b.QOq%Rax%Ray%Ra!U%Rae%Ra~Oq&riy&ri!U&rie&ri~P#NzOx/QO#V.VO%b.QO!Y&ta~Oy$Za~P$bOe&ua~P#NzOx/YOe&ua~O_/[O!Y&ti~P$ WOx/^O!Y&ti~Ox/^O#V.VO%b.QO!Y&ti~O#V.VO%b.QOe$Xix$Xi~O%r/aO~P$$nO#V.VO%b.QOe%Qax%Qa~Oe&ui~P#NzOy/dO~O_/[O!Y&tq~P$ WOx/fO!Y&tq~O#V.VO%b.QOx%Pi!Y%Pi~O_/[O~P$ WO_/[O!Y&ty~P$ WO#V.VO%b.QOe$Yix$Yi~O#V.VO%b.QOx%Pq!Y%Pq~Ox*xO#^%`a%V%`a%Y%`a%r%`a~P$bOT&TOm/iOt/wO~P'UOl/nO~Om/nO~P'UOy/oO~Or/pO~P!,}O&S&V&c&e&R!Z&Z&a&d&f&Y&`&Y%m~",goto:"!9p&vPPPP&wP'P*e*}+h,S,o-]P-zP'P.k.k'PPPP'P2PPPPPPP2P4oPP4oP6{7U=QPP=T=c=fPP'P'PPP=rPP'P'PPP'P'P'P'P'P=v>m'PP>pP>vByFcPFw'PPPPF{GR&wP&w&wP&wP&wP&wP&wP&w&w&wP&wPP&wPP&wPGXPG`GfPG`PG`G`PPPG`PIePInItIzIePG`JQPG`PJXJ_PJcJwKfLPJcJcLVLdJcJcJcJcLxMOMRMWMZMaMgMsNVN]NgNm! Z! a! g! m! w! }!!T!!Z!!a!!g!!y!#T!#Z!#a!#g!#q!#w!#}!$T!$Z!$e!$k!$u!${!%U!%[!%k!%s!%}!&UPPPPPPPPP!&[!&d!&m!&w!'SPPPPPPPPPPPP!+r!,[!0j!3vPP!4O!4^!4g!5]!5S!5f!5l!5o!5r!5u!5}!6nPPPPPPPPPP!6q!6tPPPPPPPPP!6z!7W!7d!7j!7s!7v!7|!8S!8Y!8]P!8e!8n!9j!9m]iOr#n$n)c+c'udOSXYZehrstvx|}!R!S!T!U!X![!d!e!f!g!h!i!j!l!p!q!r!t!u!{#O#S#T#^#k#n$P$Q$S$U$X$i$k$l$n$u%O%T%[%_%a%d%h%m%o%y&R&T&`&d&m&o&p&w&{'O'V'Y'g'h'k'm'n'r'w'y'}(R(W(X(_(b(i(k(s(v)S)V)Z)[)`)c)l)v*O*R*S*V*]*^*`*b*e*f*i*l*p*q*x*z*{+S+[+]+c+j+k+n+v+w+x+z+{,O,Q,S,U,W,Y,Z,],o,q,x,{-O-n-o.^.b.y/i/j/k/l/n/o/p/q/r/t/x}!dP#j#w$Y$h$t%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/m!P!eP#j#w$Y$h$t$v%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/m!R!fP#j#w$Y$h$t$v$w%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/m!T!gP#j#w$Y$h$t$v$w$x%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/m!V!hP#j#w$Y$h$t$v$w$x$y%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/m!X!iP#j#w$Y$h$t$v$w$x$y$z%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/m!]!iP!o#j#w$Y$h$t$v$w$x$y$z${%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/m'uSOSXYZehrstvx|}!R!S!T!U!X![!d!e!f!g!h!i!j!l!p!q!r!t!u!{#O#S#T#^#k#n$P$Q$S$U$X$i$k$l$n$u%O%T%[%_%a%d%h%m%o%y&R&T&`&d&m&o&p&w&{'O'V'Y'g'h'k'm'n'r'w'y'}(R(W(X(_(b(i(k(s(v)S)V)Z)[)`)c)l)v*O*R*S*V*]*^*`*b*e*f*i*l*p*q*x*z*{+S+[+]+c+j+k+n+v+w+x+z+{,O,Q,S,U,W,Y,Z,],o,q,x,{-O-n-o.^.b.y/i/j/k/l/n/o/p/q/r/t/x&ZUOXYZhrtv|}!R!S!T!X!j!l!p!q!r!t!u#^#k#n$Q$S$U$X$l$n%O%T%[%_%a%h%m%o%y&R&`&d&o&p&w'O'V'Y'g'h'k'm'n'r'y(R(X(_(b(i(k(s)S)V)`)c)l)v*O*R*S*V*]*^*`*b*e*f*i*p*q*x*{+S+c+j+k+n+v+w+x+z+{,O,Q,S,U,W,Y,Z,],o,q,x,{-O-n-o.b.y/i/j/k/l/n/o/p/q/t/x%eWOXYZhrv|}!R!S!T!X!j!l#^#k#n$Q$S$U$X$l$n%O%T%_%a%h%m%o%y&R&`&d&o&p&w'O'V'Y'g'h'k'm'n'r'y(R(X(_(b(i(k(s)S)V)`)c)l)v*O*R*S*V*]*`*b*e*f*i*p*q*x*{+S+c+j+k+n+v+w+x+z+{,O,S,U,W,Y,Z,],o,q,x,{-n-o.b/o/p/qQ#}uQ.c-sR/u/w'ldOSXYZehrstvx|}!R!S!T!U!X![!d!e!f!g!h!i!l!p!q!r!t!u!{#O#S#T#^#k#n$P$Q$S$U$X$i$k$l$n$u%O%T%[%_%a%d%h%m%o%y&R&T&`&d&m&o&p&w&{'O'V'Y'g'k'm'n'r'w'y'}(R(W(X(_(b(i(k(s(v)S)V)Z)[)`)c)l)v*R*S*V*]*^*`*b*e*f*i*l*p*q*x*z*{+S+[+]+c+j+k+n+w+x+z+{,O,Q,S,U,W,Y,Z,],o,q,x,{-O-n-o.^.b.y/i/j/k/l/n/o/p/q/r/t/xW#ql!O!P$`W#yu&b-s/wQ$b!QQ$r!YQ$s!ZW$}!j'h*O+vS&a#z#{Q'R$mQ(l&ZQ(z&qU({&s(|(}U)O&u)P+RQ)n'[W)o'^+q,s-]S+p)p)qY,_*|,`-T-U-wQ,b+OQ,l+gQ,n+il-`,w-f-g-i.R.T.Y.p.u.z/P/[/a/dQ-v-SQ.Z-hQ.g-{Q.r.VU/V.{/Y/bX/]/Q/^/e/fR&`#yi!xXY!S!T%a%h'y(R)V*]*`*bR%_!wQ!|XQ%z#^Q&i$UR&l$XT-r-O.y![!kP!o#j#w$Y$h$t$v$w$x$y$z${%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/mQ&^#rR'a$sR'g$}Q%W!nR.e-y'tcOSXYZehrstvx|}!R!S!T!U!X![!d!e!f!g!h!i!j!l!p!q!r!t!u!{#O#S#T#^#k#n$P$Q$S$U$X$i$k$l$n$u%O%T%[%_%a%d%h%m%o%y&R&T&`&d&m&o&p&w&{'O'V'Y'g'h'k'm'n'r'w'y'}(R(W(X(_(b(i(k(s(v)S)V)Z)[)`)c)l)v*O*R*S*V*]*^*`*b*e*f*i*l*p*q*x*z*{+S+[+]+c+j+k+n+v+w+x+z+{,O,Q,S,U,W,Y,Z,],o,q,x,{-O-n-o.^.b.y/i/j/k/l/n/o/p/q/r/t/xS#hc#i!P-d,w-f-g-h-i-{.R.T.Y.p.u.z.{/P/Q/Y/[/^/a/b/d/e/f'tcOSXYZehrstvx|}!R!S!T!U!X![!d!e!f!g!h!i!j!l!p!q!r!t!u!{#O#S#T#^#k#n$P$Q$S$U$X$i$k$l$n$u%O%T%[%_%a%d%h%m%o%y&R&T&`&d&m&o&p&w&{'O'V'Y'g'h'k'm'n'r'w'y'}(R(W(X(_(b(i(k(s(v)S)V)Z)[)`)c)l)v*O*R*S*V*]*^*`*b*e*f*i*l*p*q*x*z*{+S+[+]+c+j+k+n+v+w+x+z+{,O,Q,S,U,W,Y,Z,],o,q,x,{-O-n-o.^.b.y/i/j/k/l/n/o/p/q/r/t/xT#hc#iS#__#`S#b`#cS#da#eS#fb#gT*t(e*uT(f%z(hQ$WwR+o)oX$Uw$V$W&kZkOr$n)c+cXoOr)c+cQ$o!WQ&y$fQ&z$gQ']$qQ'`$sQ)a'QQ)g'VQ)i'WQ)j'XQ)w'_Q)y'aQ+V)VQ+X)WQ+Y)XQ+^)_S+`)b)xQ+d)eQ+e)fQ+f)hQ,d+UQ,e+WQ,g+_Q,h+aQ,m+hQ-W,fQ-Y,kQ-Z,lQ-x-XQ._-lR.x.`WoOr)c+cR#tnQ'_$rR)b'RQ+n)oR,q+oQ)x'_R+a)bZmOnr)c+cQ'c$tR){'dT,u+u,vu-k,w-f-g-i-{.R.T.Y.p.u.z.{/P/Y/[/a/b/dt-k,w-f-g-i-{.R.T.Y.p.u.z.{/P/Y/[/a/b/dQ.Z-hX/]/Q/^/e/f!P-c,w-f-g-h-i-{.R.T.Y.p.u.z.{/P/Q/Y/[/^/a/b/d/e/fQ.O-bR.l.Pg.R-e.S.h.o.t/S/U/W/c/g/hu-j,w-f-g-i-{.R.T.Y.p.u.z.{/P/Y/[/a/b/dX-|-`-j.g/VR.i-{V/X.{/Y/bR.`-lQrOR#vrQ&c#|R(q&cS%n#R$OS(Y%n(]T(]%q&eQ%b!zQ%i!}W'z%b%i(P(TQ(P%fR(T%kQ&n$YR(w&nQ(`%rQ*g(ZT*m(`*gQ'i%PR*P'iS'l%S%TY*T'l*U+|,|-pU*U'm'n'oU+|*V*W*XS,|+},OR-p,}Q#Y]R%u#YQ#]^R%w#]Q#`_R%{#`Q(c%xS*r(c*sR*s(dQ*u(eR,[*uQ#c`R%}#cQ#eaR&O#eQ#gbR&P#gQ#icR&Q#iQ#lfQ&S#jW&V#l&S(t*yQ(t&hR*y/mQ$VwS&j$V&kR&k$WQ&x$dR)T&xQ&[#qR(m&[Q$`!PR&r$`Q*}({S,a*}-VR-V,bQ&v$bR)Q&vQ#ojR&X#oQ+c)cR,i+cQ)U&yR+T)UQ&|$hS)]&|)^R)^&}Q'U$oR)d'UQ'Z$pS)m'Z+lR+l)nQ+r)sR,t+rWnOr)c+cR#snQ,v+uR-^,vd.S-e.h.o.t/S/U/W/c/g/hR.n.SU-z-`.g/VR.f-zQ/R.tS/_/R/`R/`/SS.|.h.iR/Z.|Q.U-eR.q.USqOrT+b)c+cWpOr)c+cR'S$nYjOr$n)c+cR&W#n[wOr#n$n)c+cR&i$U&YPOXYZhrtv|}!R!S!T!X!j!l!p!q!r!t!u#^#k#n$Q$S$U$X$l$n%O%T%[%_%a%h%m%o%y&R&`&d&o&p&w'O'V'Y'g'h'k'm'n'r'y(R(X(_(b(i(k(s)S)V)`)c)l)v*O*R*S*V*]*^*`*b*e*f*i*p*q*x*{+S+c+j+k+n+v+w+x+z+{,O,Q,S,U,W,Y,Z,],o,q,x,{-O-n-o.b.y/i/j/k/l/n/o/p/q/t/xQ!oSQ#jeQ#wsU$Yx%d'}S$h!U$kQ$t![Q$v!dQ$w!eQ$x!fQ$y!gQ$z!hQ${!iQ%f!{Q%k#OQ%q#SQ%r#TQ&e$PQ&}$iQ'd$uQ(j&TU(u&m(v*zW)Y&{)[+[+]Q*Z'wQ*d(WQ+Z)ZQ,V*lQ.w.^R/m/rQ!zXQ!}YQ$f!SQ$g!T^'v%a%h'y(R*]*`*bR+W)V[fOr#n$n)c+ch!wXY!S!T%a%h'y(R)V*]*`*bQ#RZQ#mhS$Ov|Q$]}W$d!R$X'O)`S$p!X$lW$|!j'h*O+vQ%S!lQ%x#^`&U#k&R(i(k(s*x,]/qQ&f$QQ&g$SQ&h$UQ'e%OQ'o%TQ'u%_W(V%m(X*e*iQ(Z%oQ(d%yQ(o&`S(r&d/oQ(x&oQ(y&pU)R&w)S+SQ)h'VY)k'Y)l+j+k,oQ)|'g^*Q'k*S+z+{,{-o.bQ*W'mQ*X'nS*Y'r/pW*k(_*f,S,WW*o(b*q,Y,ZQ+t)vQ+y*RQ+}*VQ,X*pQ,^*{Q,p+nQ,y+wQ,z+xQ,},OQ-R,UQ-[,qQ-m,xR.a-nhTOr#k#n$n&R&d'r(i(k)c+c$z!vXYZhv|}!R!S!T!X!j!l#^$Q$S$U$X$l%O%T%_%a%h%m%o%y&`&o&p&w'O'V'Y'g'h'k'm'n'y(R(X(_(b(s)S)V)`)l)v*O*R*S*V*]*`*b*e*f*i*p*q*x*{+S+j+k+n+v+w+x+z+{,O,S,U,W,Y,Z,],o,q,x,{-n-o.b/o/p/qQ#xtW%X!p!t/j/tQ%Y!qQ%Z!rQ%]!uQ%g/iS'q%[/nQ's/kQ't/lQ,P*^Q-Q,QS-q-O.yR/v/xU#|u-s/wR(p&b[gOr#n$n)c+cX!yX#^$U$XQ#WZQ$RvR$[|Q%c!zQ%j!}Q%p#RQ'e$|Q(Q%fQ(U%kQ(^%qQ(a%rQ*h(ZQ-P,PQ-u-QR.d-tQ$ZxQ'|%dR*_'}Q-t-OR/T.yR#QYR#VZR%R!jQ%P!jV)}'h*O+v!]!mP!o#j#w$Y$h$t$v$w$x$y$z${%f%k%q%r&e&}'d(j(u)Y*Z*d+Z,V.w/mR%U!lR%z#^Q(g%zR*w(hQ$e!RQ&l$XQ)_'OR+_)`Q#rlQ$^!OQ$a!PR&t$`Q(z&sR+Q(}Q(z&sQ+P(|R+Q(}R$c!QXpOr)c+cQ$j!UR'P$kQ$q!XR'Q$lR)u'^Q)s'^V,r+q,s-]Q-l,wQ.W-fR.X-gU-e,w-f-gQ.]-iQ.h-{Q.m.RU.o.T.p/PQ.t.YQ/S.uQ/U.zU/W.{/Y/bQ/c/[Q/g/aR/h/dR.[-hR.j-{",nodeNames:" print Comment Script AssignStatement * BinaryExpression BitOp BitOp BitOp BitOp ArithOp ArithOp @ ArithOp ** UnaryExpression ArithOp BitOp AwaitExpression await ) ( ParenthesizedExpression BinaryExpression or and CompareOp in not is UnaryExpression ConditionalExpression if else LambdaExpression lambda ParamList VariableName AssignOp , : NamedExpression AssignOp YieldExpression yield from TupleExpression ComprehensionExpression async for LambdaExpression ] [ ArrayExpression ArrayComprehensionExpression } { DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression CallExpression ArgList AssignOp MemberExpression . PropertyName Number String FormatString FormatReplacement FormatConversion FormatSpec ContinuedString Ellipsis None Boolean TypeDef AssignOp UpdateStatement UpdateOp ExpressionStatement DeleteStatement del PassStatement pass BreakStatement break ContinueStatement continue ReturnStatement return YieldStatement PrintStatement RaiseStatement raise ImportStatement import as ScopeStatement global nonlocal AssertStatement assert StatementGroup ; IfStatement Body elif WhileStatement while ForStatement TryStatement try except finally WithStatement with FunctionDefinition def ParamList AssignOp TypeDef ClassDefinition class DecoratedStatement Decorator At MatchStatement match MatchBody MatchClause case CapturePattern LiteralPattern ArithOp ArithOp AsPattern OrPattern LogicOp AttributePattern SequencePattern MappingPattern StarPattern ClassPattern PatternArgList KeywordPattern KeywordPattern Guard",maxTerm:267,context:trackIndent,nodeProps:[["group",-14,4,80,82,83,85,87,89,91,93,94,95,97,100,103,"Statement Statement",-22,6,16,19,23,38,47,48,54,55,58,59,60,61,62,65,68,69,70,74,75,76,77,"Expression",-10,105,107,110,112,113,117,119,124,126,129,"Statement",-9,134,135,138,139,141,142,143,144,145,"Pattern"],["openedBy",21,"(",52,"[",56,"{"],["closedBy",22,")",53,"]",57,"}"]],propSources:[pythonHighlighting],skippedNodes:[0,2],repeatNodeCount:38,tokenData:")'WMgR!`OX%TXY!EQY[%T[]!EQ]p%Tpq!EQqr!Gkrs!Ktst#J]tu%Tuv&'{vw&*kwx&+}xy'*fyz'+rz{'-O{|'/z|}'1^}!O'2j!O!P'5]!P!Q'Ae!Q!R'Da!R!['Ho![!](&g!]!^()V!^!_(*c!_!`(-_!`!a(.q!a!b%T!b!c(1j!c!d(3O!d!e(4|!e!h(3O!h!i(?z!i!t(3O!t!u(J[!u!w(3O!w!x(>S!x!}(3O!}#O(Ll#O#P!Fp#P#Q(Mx#Q#R) U#R#S(3O#S#T%T#T#U(3O#U#V(4|#V#Y(3O#Y#Z(?z#Z#f(3O#f#g(J[#g#i(3O#i#j(>S#j#o(3O#o#p)!h#p#q)#d#q#r)$v#r#s)%z#s$g%T$g;'S(3O;'S;=`(4v<%lO(3O<r%f]&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<Q&j]&^7[&TS&Z`&d!bOr'crs!,gsw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'c<Q'r]&^7[&TS&WW&Z`&d!b&f#tOr'crs&_sw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'c;p(t]&^7[&WW&f#tOr)mrs*ssw)mwxKmx#O)m#O#P7}#P#o)m#o#pDs#p#q)m#q#r8l#r;'S)m;'S;=`Kg<%lO)m;p)z]&^7[&TS&WW&d!b&f#tOr)mrs*ssw)mwx(kx#O)m#O#P7}#P#o)m#o#pDs#p#q)m#q#r8l#r;'S)m;'S;=`Kg<%lO)m;p*|]&^7[&TS&d!bOr)mrs+usw)mwx(kx#O)m#O#P7}#P#o)m#o#pDs#p#q)m#q#r8l#r;'S)m;'S;=`Kg<%lO)m;p,O]&^7[&TS&d!bOr)mrs,wsw)mwx(kx#O)m#O#P7}#P#o)m#o#pDs#p#q)m#q#r8l#r;'S)m;'S;=`Kg<%lO)m8r-QZ&^7[&TS&d!bOw,wwx-sx#O,w#O#P/}#P#o,w#o#p3n#p#q,w#q#r0l#r;'S,w;'S;=`7w<%lO,w8r-xZ&^7[Ow,wwx.kx#O,w#O#P/}#P#o,w#o#p3n#p#q,w#q#r0l#r;'S,w;'S;=`7w<%lO,w8r.pZ&^7[Ow,wwx/cx#O,w#O#P/}#P#o,w#o#p3n#p#q,w#q#r0l#r;'S,w;'S;=`7w<%lO,w7[/hT&^7[O#o/c#p#q/c#r;'S/c;'S;=`/w<%lO/c7[/zP;=`<%l/c8r0SW&^7[O#o,w#o#p0l#p#q,w#q#r0l#r;'S,w;'S;=`7Q;=`<%l0l<%lO,w!f0sX&TS&d!bOw0lwx1`x#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z<%lO0l!f1cXOw0lwx2Ox#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z<%lO0l!f2RWOw0lx#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z<%lO0l!f2nRO;'S0l;'S;=`2w;=`O0l!f3OY&TS&d!bOw0lwx1`x#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z;=`<%l0l<%lO0l!f3sX&TSOw4`wx4zx#O4`#O#P5y#P#o4`#o#p0l#p;'S4`;'S;=`6t<%lO4`S4eV&TSOw4`wx4zx#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`S4}VOw4`wx5dx#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`S5gUOw4`x#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`S5|RO;'S4`;'S;=`6V;=`O4`S6[W&TSOw4`wx4zx#O4`#O#P5y#P;'S4`;'S;=`6t;=`<%l4`<%lO4`S6wP;=`<%l4`!f6}P;=`<%l0l8r7XY&TS&d!bOw0lwx1`x#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z;=`<%l,w<%lO0l8r7zP;=`<%l,w;p8SW&^7[O#o)m#o#p8l#p#q)m#q#r8l#r;'S)m;'S;=`Jf;=`<%l8l<%lO)m%d8wZ&TS&WW&d!b&f#tOr8lrs9jsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`<%lO8l%d9qZ&TS&d!bOr8lrs:dsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`<%lO8l%d:kZ&TS&d!bOr8lrs0lsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`<%lO8l%d;eZ&WW&f#tOr8lrs9jsw8lwx<Wx#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`<%lO8l%d<_Z&WW&f#tOr8lrs9jsw8lwx=Qx#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`<%lO8l#|=XX&WW&f#tOr=Qrs=ts#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`<%lO=Q#|=wXOr=Qrs>ds#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`<%lO=Q#|>gWOr=Qs#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`<%lO=Q#|?SRO;'S=Q;'S;=`?];=`O=Q#|?dY&WW&f#tOr=Qrs=ts#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`;=`<%l=Q<%lO=Q#|@XX&WWOr@trsA`s#O@t#O#PB_#P#o@t#o#p=Q#p;'S@t;'S;=`CY<%lO@tW@yV&WWOr@trsA`s#O@t#O#PB_#P;'S@t;'S;=`CY<%lO@tWAcVOr@trsAxs#O@t#O#PB_#P;'S@t;'S;=`CY<%lO@tWA{UOr@ts#O@t#O#PB_#P;'S@t;'S;=`CY<%lO@tWBbRO;'S@t;'S;=`Bk;=`O@tWBpW&WWOr@trsA`s#O@t#O#PB_#P;'S@t;'S;=`CY;=`<%l@t<%lO@tWC]P;=`<%l@t#|CcP;=`<%l=Q%dCiRO;'S8l;'S;=`Cr;=`O8l%dC}[&TS&WW&d!b&f#tOr8lrs9jsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`;=`<%l8l<%lO8l%dDzZ&TS&WWOrEmrsFaswEmwxGsx#OEm#O#PIV#P#oEm#o#p8l#p;'SEm;'S;=`JY<%lOEm[EtX&TS&WWOrEmrsFaswEmwxGsx#OEm#O#PIV#P;'SEm;'S;=`JY<%lOEm[FfX&TSOrEmrsGRswEmwxGsx#OEm#O#PIV#P;'SEm;'S;=`JY<%lOEm[GWX&TSOrEmrs4`swEmwxGsx#OEm#O#PIV#P;'SEm;'S;=`JY<%lOEm[GxX&WWOrEmrsFaswEmwxHex#OEm#O#PIV#P;'SEm;'S;=`JY<%lOEm[HjX&WWOrEmrsFaswEmwx@tx#OEm#O#PIV#P;'SEm;'S;=`JY<%lOEm[IYRO;'SEm;'S;=`Ic;=`OEm[IjY&TS&WWOrEmrsFaswEmwxGsx#OEm#O#PIV#P;'SEm;'S;=`JY;=`<%lEm<%lOEm[J]P;=`<%lEm%dJcP;=`<%l8l;pJq[&TS&WW&d!b&f#tOr8lrs9jsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`;=`<%l)m<%lO8l;pKjP;=`<%l)m;pKv]&^7[&WW&f#tOr)mrs*ssw)mwxLox#O)m#O#P7}#P#o)m#o#pDs#p#q)m#q#r8l#r;'S)m;'S;=`Kg<%lO)m:YLxZ&^7[&WW&f#tOrLorsMks#OLo#O#P! Z#P#oLo#o#p@S#p#qLo#q#r=Q#r;'SLo;'S;=`!!o<%lOLo:YMpZ&^7[OrLorsNcs#OLo#O#P! Z#P#oLo#o#p@S#p#qLo#q#r=Q#r;'SLo;'S;=`!!o<%lOLo:YNhZ&^7[OrLors/cs#OLo#O#P! Z#P#oLo#o#p@S#p#qLo#q#r=Q#r;'SLo;'S;=`!!o<%lOLo:Y! `W&^7[O#oLo#o#p=Q#p#qLo#q#r=Q#r;'SLo;'S;=`! x;=`<%l=Q<%lOLo:Y!!PY&WW&f#tOr=Qrs=ts#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`;=`<%lLo<%lO=Q:Y!!rP;=`<%lLo<Q!!zW&^7[O#o'c#o#p!#d#p#q'c#q#r!#d#r;'S'c;'S;=`!+^;=`<%l!#d<%lO'c%t!#qZ&TS&WW&Z`&d!b&f#tOr!#drs!$dsw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W<%lO!#d%t!$mZ&TS&Z`&d!bOr!#drs!%`sw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W<%lO!#d%t!%iZ&TS&Z`&d!bOr!#drs!&[sw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W<%lO!#d!v!&eX&TS&Z`&d!bOw!&[wx1`x#O!&[#O#P!'Q#P#o!&[#o#p!(V#p;'S!&[;'S;=`!(w<%lO!&[!v!'TRO;'S!&[;'S;=`!'^;=`O!&[!v!'gY&TS&Z`&d!bOw!&[wx1`x#O!&[#O#P!'Q#P#o!&[#o#p!(V#p;'S!&[;'S;=`!(w;=`<%l!&[<%lO!&[!v!([X&TSOw4`wx4zx#O4`#O#P5y#P#o4`#o#p!&[#p;'S4`;'S;=`6t<%lO4`!v!(zP;=`<%l!&[%t!)QRO;'S!#d;'S;=`!)Z;=`O!#d%t!)h[&TS&WW&Z`&d!b&f#tOr!#drs!$dsw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W;=`<%l!#d<%lO!#d%t!*eZ&TS&WWOrEmrsFaswEmwxGsx#OEm#O#PIV#P#oEm#o#p!#d#p;'SEm;'S;=`JY<%lOEm%t!+ZP;=`<%l!#d<Q!+k[&TS&WW&Z`&d!b&f#tOr!#drs!$dsw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W;=`<%l'c<%lO!#d<Q!,dP;=`<%l'c<Q!,r]&^7[&TS&Z`&d!bOr'crs!-ksw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'c9S!-vZ&^7[&TS&Z`&d!bOw!-kwx-sx#O!-k#O#P!.i#P#o!-k#o#p!(V#p#q!-k#q#r!&[#r;'S!-k;'S;=`!0P<%lO!-k9S!.nW&^7[O#o!-k#o#p!&[#p#q!-k#q#r!&[#r;'S!-k;'S;=`!/W;=`<%l!&[<%lO!-k9S!/aY&TS&Z`&d!bOw!&[wx1`x#O!&[#O#P!'Q#P#o!&[#o#p!(V#p;'S!&[;'S;=`!(w;=`<%l!-k<%lO!&[9S!0SP;=`<%l!-k<b!0b]&^7[&WW&ap&f#tOr!1Zrs*ssw!1Zwx!<Tx#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1Z<b!1j]&^7[&TS&WW&ap&d!b&f#tOr!1Zrs*ssw!1Zwx!0Vx#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1Z<b!2hW&^7[O#o!1Z#o#p!3Q#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!:z;=`<%l!3Q<%lO!1Z&U!3_Z&TS&WW&ap&d!b&f#tOr!3Qrs9jsw!3Qwx!4Qx#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t<%lO!3Q&U!4ZZ&WW&ap&f#tOr!3Qrs9jsw!3Qwx!4|x#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t<%lO!3Q&U!5VZ&WW&ap&f#tOr!3Qrs9jsw!3Qwx!5xx#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t<%lO!3Q$n!6RX&WW&ap&f#tOr!5xrs=ts#O!5x#O#P!6n#P#o!5x#o#p!7s#p;'S!5x;'S;=`!8e<%lO!5x$n!6qRO;'S!5x;'S;=`!6z;=`O!5x$n!7TY&WW&ap&f#tOr!5xrs=ts#O!5x#O#P!6n#P#o!5x#o#p!7s#p;'S!5x;'S;=`!8e;=`<%l!5x<%lO!5x$n!7xX&WWOr@trsA`s#O@t#O#PB_#P#o@t#o#p!5x#p;'S@t;'S;=`CY<%lO@t$n!8hP;=`<%l!5x&U!8nRO;'S!3Q;'S;=`!8w;=`O!3Q&U!9U[&TS&WW&ap&d!b&f#tOr!3Qrs9jsw!3Qwx!4Qx#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t;=`<%l!3Q<%lO!3Q&U!:RZ&TS&WWOrEmrsFaswEmwxGsx#OEm#O#PIV#P#oEm#o#p!3Q#p;'SEm;'S;=`JY<%lOEm&U!:wP;=`<%l!3Q<b!;X[&TS&WW&ap&d!b&f#tOr!3Qrs9jsw!3Qwx!4Qx#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t;=`<%l!1Z<%lO!3Q<b!<QP;=`<%l!1Z<b!<`]&^7[&WW&ap&f#tOr!1Zrs*ssw!1Zwx!=Xx#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1Z:z!=dZ&^7[&WW&ap&f#tOr!=XrsMks#O!=X#O#P!>V#P#o!=X#o#p!7s#p#q!=X#q#r!5x#r;'S!=X;'S;=`!?m<%lO!=X:z!>[W&^7[O#o!=X#o#p!5x#p#q!=X#q#r!5x#r;'S!=X;'S;=`!>t;=`<%l!5x<%lO!=X:z!>}Y&WW&ap&f#tOr!5xrs=ts#O!5x#O#P!6n#P#o!5x#o#p!7s#p;'S!5x;'S;=`!8e;=`<%l!=X<%lO!5x:z!?pP;=`<%l!=X<r!?xW&^7[O#o%T#o#p!@b#p#q%T#q#r!@b#r;'S%T;'S;=`!Cu;=`<%l!@b<%lO%T&f!@qZ&TS&WW&Z`&ap&d!b&f#tOr!@brs!$dsw!@bwx!4Qx#O!@b#O#P!Ad#P#o!@b#o#p!Bu#p;'S!@b;'S;=`!Co<%lO!@b&f!AgRO;'S!@b;'S;=`!Ap;=`O!@b&f!BP[&TS&WW&Z`&ap&d!b&f#tOr!@brs!$dsw!@bwx!4Qx#O!@b#O#P!Ad#P#o!@b#o#p!Bu#p;'S!@b;'S;=`!Co;=`<%l!@b<%lO!@b&f!B|Z&TS&WWOrEmrsFaswEmwxGsx#OEm#O#PIV#P#oEm#o#p!@b#p;'SEm;'S;=`JY<%lOEm&f!CrP;=`<%l!@b<r!DU[&TS&WW&Z`&ap&d!b&f#tOr!@brs!$dsw!@bwx!4Qx#O!@b#O#P!Ad#P#o!@b#o#p!Bu#p;'S!@b;'S;=`!Co;=`<%l%T<%lO!@b<r!D}P;=`<%l%TMg!Eec&^7[&TS&WW%[1s&Z`&ap&d!b&f#tOX%TXY!EQY[%T[]!EQ]p%Tpq!EQqr%Trs&_sw%Twx!0Vx#O%T#O#P!Fp#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TMg!Fu[&^7[OY%TYZ!EQZ]%T]^!EQ^#o%T#o#p!@b#p#q%T#q#r!@b#r;'S%T;'S;=`!Cu;=`<%l!@b<%lO%T<u!G|d&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`!I[!`#O%T#O#P!?s#P#T%T#T#U!Jh#U#f%T#f#g!Jh#g#h!Jh#h#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<u!Io]kR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<u!J{]!jR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{!LTa&bp&^7[&TS&R,X&Z`&d!bOY!MYYZ'cZ]!MY]^'c^r!MYrs#HTsw!MYwx# vx#O!MY#O#P#@t#P#o!MY#o#p#E^#p#q!MY#q#r#Ac#r;'S!MY;'S;=`#G}<%lO!MYGZ!Mka&^7[&TS&WW&R,X&Z`&d!b&f#tOY!MYYZ'cZ]!MY]^'c^r!MYrs!Npsw!MYwx# vx#O!MY#O#P#@t#P#o!MY#o#p#E^#p#q!MY#q#r#Ac#r;'S!MY;'S;=`#G}<%lO!MYGZ!N}]&^7[&TS&R,X&Z`&d!bOr'crs!,gsw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'cFy#!Ra&^7[&WW&R,X&f#tOY##WYZ)mZ]##W]^)m^r##Wrs#$lsw##Wwx#;fx#O##W#O#P#%p#P#o##W#o#p#3d#p#q##W#q#r#&_#r;'S##W;'S;=`#;`<%lO##WFy##ga&^7[&TS&WW&R,X&d!b&f#tOY##WYZ)mZ]##W]^)m^r##Wrs#$lsw##Wwx# vx#O##W#O#P#%p#P#o##W#o#p#3d#p#q##W#q#r#&_#r;'S##W;'S;=`#;`<%lO##WFy#$w]&^7[&TS&R,X&d!bOr)mrs+usw)mwx(kx#O)m#O#P7}#P#o)m#o#pDs#p#q)m#q#r8l#r;'S)m;'S;=`Kg<%lO)mFy#%uW&^7[O#o##W#o#p#&_#p#q##W#q#r#&_#r;'S##W;'S;=`#:P;=`<%l#&_<%lO##W0m#&l_&TS&WW&R,X&d!b&f#tOY#&_YZ8lZ]#&_]^8l^r#&_rs#'ksw#&_wx#(gx#O#&_#O#P#1w#P#o#&_#o#p#3d#p;'S#&_;'S;=`#9y<%lO#&_0m#'tZ&TS&R,X&d!bOr8lrs:dsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`<%lO8l0m#(p_&WW&R,X&f#tOY#&_YZ8lZ]#&_]^8l^r#&_rs#'ksw#&_wx#)ox#O#&_#O#P#1w#P#o#&_#o#p#3d#p;'S#&_;'S;=`#9y<%lO#&_0m#)x_&WW&R,X&f#tOY#&_YZ8lZ]#&_]^8l^r#&_rs#'ksw#&_wx#*wx#O#&_#O#P#1w#P#o#&_#o#p#3d#p;'S#&_;'S;=`#9y<%lO#&_/V#+Q]&WW&R,X&f#tOY#*wYZ=QZ]#*w]^=Q^r#*wrs#+ys#O#*w#O#P#,k#P#o#*w#o#p#-|#p;'S#*w;'S;=`#1q<%lO#*w/V#,OX&R,XOr=Qrs>ds#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`<%lO=Q/V#,nRO;'S#*w;'S;=`#,w;=`O#*w/V#-Q^&WW&R,X&f#tOY#*wYZ=QZ]#*w]^=Q^r#*wrs#+ys#O#*w#O#P#,k#P#o#*w#o#p#-|#p;'S#*w;'S;=`#1q;=`<%l#*w<%lO#*w/V#.T]&WW&R,XOY#.|YZ@tZ]#.|]^@t^r#.|rs#/vs#O#.|#O#P#0b#P#o#.|#o#p#*w#p;'S#.|;'S;=`#1k<%lO#.|,a#/TZ&WW&R,XOY#.|YZ@tZ]#.|]^@t^r#.|rs#/vs#O#.|#O#P#0b#P;'S#.|;'S;=`#1k<%lO#.|,a#/{V&R,XOr@trsAxs#O@t#O#PB_#P;'S@t;'S;=`CY<%lO@t,a#0eRO;'S#.|;'S;=`#0n;=`O#.|,a#0u[&WW&R,XOY#.|YZ@tZ]#.|]^@t^r#.|rs#/vs#O#.|#O#P#0b#P;'S#.|;'S;=`#1k;=`<%l#.|<%lO#.|,a#1nP;=`<%l#.|/V#1tP;=`<%l#*w0m#1zRO;'S#&_;'S;=`#2T;=`O#&_0m#2b`&TS&WW&R,X&d!b&f#tOY#&_YZ8lZ]#&_]^8l^r#&_rs#'ksw#&_wx#(gx#O#&_#O#P#1w#P#o#&_#o#p#3d#p;'S#&_;'S;=`#9y;=`<%l#&_<%lO#&_0m#3m_&TS&WW&R,XOY#4lYZEmZ]#4l]^Em^r#4lrs#5nsw#4lwx#6bx#O#4l#O#P#8b#P#o#4l#o#p#&_#p;'S#4l;'S;=`#9s<%lO#4l,e#4u]&TS&WW&R,XOY#4lYZEmZ]#4l]^Em^r#4lrs#5nsw#4lwx#6bx#O#4l#O#P#8b#P;'S#4l;'S;=`#9s<%lO#4l,e#5uX&TS&R,XOrEmrsGRswEmwxGsx#OEm#O#PIV#P;'SEm;'S;=`JY<%lOEm,e#6i]&WW&R,XOY#4lYZEmZ]#4l]^Em^r#4lrs#5nsw#4lwx#7bx#O#4l#O#P#8b#P;'S#4l;'S;=`#9s<%lO#4l,e#7i]&WW&R,XOY#4lYZEmZ]#4l]^Em^r#4lrs#5nsw#4lwx#.|x#O#4l#O#P#8b#P;'S#4l;'S;=`#9s<%lO#4l,e#8eRO;'S#4l;'S;=`#8n;=`O#4l,e#8w^&TS&WW&R,XOY#4lYZEmZ]#4l]^Em^r#4lrs#5nsw#4lwx#6bx#O#4l#O#P#8b#P;'S#4l;'S;=`#9s;=`<%l#4l<%lO#4l,e#9vP;=`<%l#4l0m#9|P;=`<%l#&_Fy#:^`&TS&WW&R,X&d!b&f#tOY#&_YZ8lZ]#&_]^8l^r#&_rs#'ksw#&_wx#(gx#O#&_#O#P#1w#P#o#&_#o#p#3d#p;'S#&_;'S;=`#9y;=`<%l##W<%lO#&_Fy#;cP;=`<%l##WFy#;qa&^7[&WW&R,X&f#tOY##WYZ)mZ]##W]^)m^r##Wrs#$lsw##Wwx#<vx#O##W#O#P#%p#P#o##W#o#p#3d#p#q##W#q#r#&_#r;'S##W;'S;=`#;`<%lO##WEc#=R_&^7[&WW&R,X&f#tOY#<vYZLoZ]#<v]^Lo^r#<vrs#>Qs#O#<v#O#P#>z#P#o#<v#o#p#-|#p#q#<v#q#r#*w#r;'S#<v;'S;=`#@n<%lO#<vEc#>XZ&^7[&R,XOrLorsNcs#OLo#O#P! Z#P#oLo#o#p@S#p#qLo#q#r=Q#r;'SLo;'S;=`!!o<%lOLoEc#?PW&^7[O#o#<v#o#p#*w#p#q#<v#q#r#*w#r;'S#<v;'S;=`#?i;=`<%l#*w<%lO#<vEc#?r^&WW&R,X&f#tOY#*wYZ=QZ]#*w]^=Q^r#*wrs#+ys#O#*w#O#P#,k#P#o#*w#o#p#-|#p;'S#*w;'S;=`#1q;=`<%l#<v<%lO#*wEc#@qP;=`<%l#<vGZ#@yW&^7[O#o!MY#o#p#Ac#p#q!MY#q#r#Ac#r;'S!MY;'S;=`#Fl;=`<%l#Ac<%lO!MY0}#Ar_&TS&WW&R,X&Z`&d!b&f#tOY#AcYZ!#dZ]#Ac]^!#d^r#Acrs#Bqsw#Acwx#(gx#O#Ac#O#P#Co#P#o#Ac#o#p#E^#p;'S#Ac;'S;=`#Ff<%lO#Ac0}#B|Z&TS&R,X&Z`&d!bOr!#drs!%`sw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W<%lO!#d0}#CrRO;'S#Ac;'S;=`#C{;=`O#Ac0}#D[`&TS&WW&R,X&Z`&d!b&f#tOY#AcYZ!#dZ]#Ac]^!#d^r#Acrs#Bqsw#Acwx#(gx#O#Ac#O#P#Co#P#o#Ac#o#p#E^#p;'S#Ac;'S;=`#Ff;=`<%l#Ac<%lO#Ac0}#Eg_&TS&WW&R,XOY#4lYZEmZ]#4l]^Em^r#4lrs#5nsw#4lwx#6bx#O#4l#O#P#8b#P#o#4l#o#p#Ac#p;'S#4l;'S;=`#9s<%lO#4l0}#FiP;=`<%l#AcGZ#F{`&TS&WW&R,X&Z`&d!b&f#tOY#AcYZ!#dZ]#Ac]^!#d^r#Acrs#Bqsw#Acwx#(gx#O#Ac#O#P#Co#P#o#Ac#o#p#E^#p;'S#Ac;'S;=`#Ff;=`<%l!MY<%lO#AcGZ#HQP;=`<%l!MYGZ#Hb]&^7[&TS&R,X&Z`&d!bOr'crs#IZsw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'cGZ#IjZ&X#|&^7[&TS&V,X&Z`&d!bOw!-kwx-sx#O!-k#O#P!.i#P#o!-k#o#p!(V#p#q!-k#q#r!&[#r;'S!-k;'S;=`!0P<%lO!-kMg#JpaQ1s&^7[&TS&WW&Z`&ap&d!b&f#tOY#J]YZ%TZ]#J]]^%T^r#J]rs#Kusw#J]wx%;ax#O#J]#O#P& a#P#o#J]#o#p&%b#p#q#J]#q#r&!^#r;'S#J];'S;=`&'u<%lO#J]Lu#LSaQ1s&^7[&TS&Z`&d!bOY#MXYZ'cZ]#MX]^'c^r#MXrs%6usw#MXwx#Nox#O#MX#O#P%*Z#P#o#MX#o#p%4^#p#q#MX#q#r%+W#r;'S#MX;'S;=`%6o<%lO#MXLu#MjaQ1s&^7[&TS&WW&Z`&d!b&f#tOY#MXYZ'cZ]#MX]^'c^r#MXrs#Kusw#MXwx#Nox#O#MX#O#P%*Z#P#o#MX#o#p%4^#p#q#MX#q#r%+W#r;'S#MX;'S;=`%6o<%lO#MXLe#NzaQ1s&^7[&WW&f#tOY$!PYZ)mZ]$!P]^)m^r$!Prs$#esw$!Pwx%#ix#O$!P#O#P$6g#P#o$!P#o#p$Hf#p#q$!P#q#r$7d#r;'S$!P;'S;=`%#c<%lO$!PLe$!`aQ1s&^7[&TS&WW&d!b&f#tOY$!PYZ)mZ]$!P]^)m^r$!Prs$#esw$!Pwx#Nox#O$!P#O#P$6g#P#o$!P#o#p$Hf#p#q$!P#q#r$7d#r;'S$!P;'S;=`%#c<%lO$!PLe$#paQ1s&^7[&TS&d!bOY$!PYZ)mZ]$!P]^)m^r$!Prs$$usw$!Pwx#Nox#O$!P#O#P$6g#P#o$!P#o#p$Hf#p#q$!P#q#r$7d#r;'S$!P;'S;=`%#c<%lO$!PLe$%QaQ1s&^7[&TS&d!bOY$!PYZ)mZ]$!P]^)m^r$!Prs$&Vsw$!Pwx#Nox#O$!P#O#P$6g#P#o$!P#o#p$Hf#p#q$!P#q#r$7d#r;'S$!P;'S;=`%#c<%lO$!PIg$&b_Q1s&^7[&TS&d!bOY$&VYZ,wZ]$&V]^,w^w$&Vwx$'ax#O$&V#O#P$+X#P#o$&V#o#p$0h#p#q$&V#q#r$,U#r;'S$&V;'S;=`$6a<%lO$&VIg$'h_Q1s&^7[OY$&VYZ,wZ]$&V]^,w^w$&Vwx$(gx#O$&V#O#P$+X#P#o$&V#o#p$0h#p#q$&V#q#r$,U#r;'S$&V;'S;=`$6a<%lO$&VIg$(n_Q1s&^7[OY$&VYZ,wZ]$&V]^,w^w$&Vwx$)mx#O$&V#O#P$+X#P#o$&V#o#p$0h#p#q$&V#q#r$,U#r;'S$&V;'S;=`$6a<%lO$&VHP$)tZQ1s&^7[OY$)mYZ/cZ]$)m]^/c^#o$)m#o#p$*g#p#q$)m#q#r$*g#r;'S$)m;'S;=`$+R<%lO$)m1s$*lTQ1sOY$*gZ]$*g^;'S$*g;'S;=`$*{<%lO$*g1s$+OP;=`<%l$*gHP$+UP;=`<%l$)mIg$+`[Q1s&^7[OY$&VYZ,wZ]$&V]^,w^#o$&V#o#p$,U#p#q$&V#q#r$,U#r;'S$&V;'S;=`$5j;=`<%l0l<%lO$&V3Z$,_]Q1s&TS&d!bOY$,UYZ0lZ]$,U]^0l^w$,Uwx$-Wx#O$,U#O#P$/S#P#o$,U#o#p$0h#p;'S$,U;'S;=`$5d<%lO$,U3Z$-]]Q1sOY$,UYZ0lZ]$,U]^0l^w$,Uwx$.Ux#O$,U#O#P$/S#P#o$,U#o#p$0h#p;'S$,U;'S;=`$5d<%lO$,U3Z$.Z]Q1sOY$,UYZ0lZ]$,U]^0l^w$,Uwx$*gx#O$,U#O#P$/S#P#o$,U#o#p$0h#p;'S$,U;'S;=`$5d<%lO$,U3Z$/XWQ1sOY$,UYZ0lZ]$,U]^0l^;'S$,U;'S;=`$/q;=`<%l0l<%lO$,U3Z$/xY&TS&d!bOw0lwx1`x#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z;=`<%l$,U<%lO0l3Z$0o]Q1s&TSOY$1hYZ4`Z]$1h]^4`^w$1hwx$2bx#O$1h#O#P$4Q#P#o$1h#o#p$,U#p;'S$1h;'S;=`$5^<%lO$1h1w$1oZQ1s&TSOY$1hYZ4`Z]$1h]^4`^w$1hwx$2bx#O$1h#O#P$4Q#P;'S$1h;'S;=`$5^<%lO$1h1w$2gZQ1sOY$1hYZ4`Z]$1h]^4`^w$1hwx$3Yx#O$1h#O#P$4Q#P;'S$1h;'S;=`$5^<%lO$1h1w$3_ZQ1sOY$1hYZ4`Z]$1h]^4`^w$1hwx$*gx#O$1h#O#P$4Q#P;'S$1h;'S;=`$5^<%lO$1h1w$4VWQ1sOY$1hYZ4`Z]$1h]^4`^;'S$1h;'S;=`$4o;=`<%l4`<%lO$1h1w$4tW&TSOw4`wx4zx#O4`#O#P5y#P;'S4`;'S;=`6t;=`<%l$1h<%lO4`1w$5aP;=`<%l$1h3Z$5gP;=`<%l$,UIg$5qY&TS&d!bOw0lwx1`x#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z;=`<%l$&V<%lO0lIg$6dP;=`<%l$&VLe$6n[Q1s&^7[OY$!PYZ)mZ]$!P]^)m^#o$!P#o#p$7d#p#q$!P#q#r$7d#r;'S$!P;'S;=`%!b;=`<%l8l<%lO$!P6X$7q_Q1s&TS&WW&d!b&f#tOY$7dYZ8lZ]$7d]^8l^r$7drs$8psw$7dwx$;Qx#O$7d#O#P$Fv#P#o$7d#o#p$Hf#p;'S$7d;'S;=`%![<%lO$7d6X$8y_Q1s&TS&d!bOY$7dYZ8lZ]$7d]^8l^r$7drs$9xsw$7dwx$;Qx#O$7d#O#P$Fv#P#o$7d#o#p$Hf#p;'S$7d;'S;=`%![<%lO$7d6X$:R_Q1s&TS&d!bOY$7dYZ8lZ]$7d]^8l^r$7drs$,Usw$7dwx$;Qx#O$7d#O#P$Fv#P#o$7d#o#p$Hf#p;'S$7d;'S;=`%![<%lO$7d6X$;Z_Q1s&WW&f#tOY$7dYZ8lZ]$7d]^8l^r$7drs$8psw$7dwx$<Yx#O$7d#O#P$Fv#P#o$7d#o#p$Hf#p;'S$7d;'S;=`%![<%lO$7d6X$<c_Q1s&WW&f#tOY$7dYZ8lZ]$7d]^8l^r$7drs$8psw$7dwx$=bx#O$7d#O#P$Fv#P#o$7d#o#p$Hf#p;'S$7d;'S;=`%![<%lO$7d4q$=k]Q1s&WW&f#tOY$=bYZ=QZ]$=b]^=Q^r$=brs$>ds#O$=b#O#P$@`#P#o$=b#o#p$At#p;'S$=b;'S;=`$Fp<%lO$=b4q$>i]Q1sOY$=bYZ=QZ]$=b]^=Q^r$=brs$?bs#O$=b#O#P$@`#P#o$=b#o#p$At#p;'S$=b;'S;=`$Fp<%lO$=b4q$?g]Q1sOY$=bYZ=QZ]$=b]^=Q^r$=brs$*gs#O$=b#O#P$@`#P#o$=b#o#p$At#p;'S$=b;'S;=`$Fp<%lO$=b4q$@eWQ1sOY$=bYZ=QZ]$=b]^=Q^;'S$=b;'S;=`$@};=`<%l=Q<%lO$=b4q$AUY&WW&f#tOr=Qrs=ts#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`;=`<%l$=b<%lO=Q4q$A{]Q1s&WWOY$BtYZ@tZ]$Bt]^@t^r$Btrs$Cns#O$Bt#O#P$E^#P#o$Bt#o#p$=b#p;'S$Bt;'S;=`$Fj<%lO$Bt1{$B{ZQ1s&WWOY$BtYZ@tZ]$Bt]^@t^r$Btrs$Cns#O$Bt#O#P$E^#P;'S$Bt;'S;=`$Fj<%lO$Bt1{$CsZQ1sOY$BtYZ@tZ]$Bt]^@t^r$Btrs$Dfs#O$Bt#O#P$E^#P;'S$Bt;'S;=`$Fj<%lO$Bt1{$DkZQ1sOY$BtYZ@tZ]$Bt]^@t^r$Btrs$*gs#O$Bt#O#P$E^#P;'S$Bt;'S;=`$Fj<%lO$Bt1{$EcWQ1sOY$BtYZ@tZ]$Bt]^@t^;'S$Bt;'S;=`$E{;=`<%l@t<%lO$Bt1{$FQW&WWOr@trsA`s#O@t#O#PB_#P;'S@t;'S;=`CY;=`<%l$Bt<%lO@t1{$FmP;=`<%l$Bt4q$FsP;=`<%l$=b6X$F{WQ1sOY$7dYZ8lZ]$7d]^8l^;'S$7d;'S;=`$Ge;=`<%l8l<%lO$7d6X$Gp[&TS&WW&d!b&f#tOr8lrs9jsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`;=`<%l$7d<%lO8l6X$Ho_Q1s&TS&WWOY$InYZEmZ]$In]^Em^r$Inrs$Jpsw$Inwx$Lpx#O$In#O#P$Np#P#o$In#o#p$7d#p;'S$In;'S;=`%!U<%lO$In2P$Iw]Q1s&TS&WWOY$InYZEmZ]$In]^Em^r$Inrs$Jpsw$Inwx$Lpx#O$In#O#P$Np#P;'S$In;'S;=`%!U<%lO$In2P$Jw]Q1s&TSOY$InYZEmZ]$In]^Em^r$Inrs$Kpsw$Inwx$Lpx#O$In#O#P$Np#P;'S$In;'S;=`%!U<%lO$In2P$Kw]Q1s&TSOY$InYZEmZ]$In]^Em^r$Inrs$1hsw$Inwx$Lpx#O$In#O#P$Np#P;'S$In;'S;=`%!U<%lO$In2P$Lw]Q1s&WWOY$InYZEmZ]$In]^Em^r$Inrs$Jpsw$Inwx$Mpx#O$In#O#P$Np#P;'S$In;'S;=`%!U<%lO$In2P$Mw]Q1s&WWOY$InYZEmZ]$In]^Em^r$Inrs$Jpsw$Inwx$Btx#O$In#O#P$Np#P;'S$In;'S;=`%!U<%lO$In2P$NuWQ1sOY$InYZEmZ]$In]^Em^;'S$In;'S;=`% _;=`<%lEm<%lO$In2P% fY&TS&WWOrEmrsFaswEmwxGsx#OEm#O#PIV#P;'SEm;'S;=`JY;=`<%l$In<%lOEm2P%!XP;=`<%l$In6X%!_P;=`<%l$7dLe%!m[&TS&WW&d!b&f#tOr8lrs9jsw8lwx;^x#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`;=`<%l$!P<%lO8lLe%#fP;=`<%l$!PLe%#taQ1s&^7[&WW&f#tOY$!PYZ)mZ]$!P]^)m^r$!Prs$#esw$!Pwx%$yx#O$!P#O#P$6g#P#o$!P#o#p$Hf#p#q$!P#q#r$7d#r;'S$!P;'S;=`%#c<%lO$!PJ}%%U_Q1s&^7[&WW&f#tOY%$yYZLoZ]%$y]^Lo^r%$yrs%&Ts#O%$y#O#P%(a#P#o%$y#o#p$At#p#q%$y#q#r$=b#r;'S%$y;'S;=`%*T<%lO%$yJ}%&[_Q1s&^7[OY%$yYZLoZ]%$y]^Lo^r%$yrs%'Zs#O%$y#O#P%(a#P#o%$y#o#p$At#p#q%$y#q#r$=b#r;'S%$y;'S;=`%*T<%lO%$yJ}%'b_Q1s&^7[OY%$yYZLoZ]%$y]^Lo^r%$yrs$)ms#O%$y#O#P%(a#P#o%$y#o#p$At#p#q%$y#q#r$=b#r;'S%$y;'S;=`%*T<%lO%$yJ}%(h[Q1s&^7[OY%$yYZLoZ]%$y]^Lo^#o%$y#o#p$=b#p#q%$y#q#r$=b#r;'S%$y;'S;=`%)^;=`<%l=Q<%lO%$yJ}%)eY&WW&f#tOr=Qrs=ts#O=Q#O#P?P#P#o=Q#o#p@S#p;'S=Q;'S;=`C`;=`<%l%$y<%lO=QJ}%*WP;=`<%l%$yLu%*b[Q1s&^7[OY#MXYZ'cZ]#MX]^'c^#o#MX#o#p%+W#p#q#MX#q#r%+W#r;'S#MX;'S;=`%5l;=`<%l!#d<%lO#MX6i%+g_Q1s&TS&WW&Z`&d!b&f#tOY%+WYZ!#dZ]%+W]^!#d^r%+Wrs%,fsw%+Wwx$;Qx#O%+W#O#P%2l#P#o%+W#o#p%4^#p;'S%+W;'S;=`%5f<%lO%+W6i%,q_Q1s&TS&Z`&d!bOY%+WYZ!#dZ]%+W]^!#d^r%+Wrs%-psw%+Wwx$;Qx#O%+W#O#P%2l#P#o%+W#o#p%4^#p;'S%+W;'S;=`%5f<%lO%+W6i%-{_Q1s&TS&Z`&d!bOY%+WYZ!#dZ]%+W]^!#d^r%+Wrs%.zsw%+Wwx$;Qx#O%+W#O#P%2l#P#o%+W#o#p%4^#p;'S%+W;'S;=`%5f<%lO%+W3k%/V]Q1s&TS&Z`&d!bOY%.zYZ!&[Z]%.z]^!&[^w%.zwx$-Wx#O%.z#O#P%0O#P#o%.z#o#p%1f#p;'S%.z;'S;=`%2f<%lO%.z3k%0TWQ1sOY%.zYZ!&[Z]%.z]^!&[^;'S%.z;'S;=`%0m;=`<%l!&[<%lO%.z3k%0vY&TS&Z`&d!bOw!&[wx1`x#O!&[#O#P!'Q#P#o!&[#o#p!(V#p;'S!&[;'S;=`!(w;=`<%l%.z<%lO!&[3k%1m]Q1s&TSOY$1hYZ4`Z]$1h]^4`^w$1hwx$2bx#O$1h#O#P$4Q#P#o$1h#o#p%.z#p;'S$1h;'S;=`$5^<%lO$1h3k%2iP;=`<%l%.z6i%2qWQ1sOY%+WYZ!#dZ]%+W]^!#d^;'S%+W;'S;=`%3Z;=`<%l!#d<%lO%+W6i%3h[&TS&WW&Z`&d!b&f#tOr!#drs!$dsw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W;=`<%l%+W<%lO!#d6i%4g_Q1s&TS&WWOY$InYZEmZ]$In]^Em^r$Inrs$Jpsw$Inwx$Lpx#O$In#O#P$Np#P#o$In#o#p%+W#p;'S$In;'S;=`%!U<%lO$In6i%5iP;=`<%l%+WLu%5y[&TS&WW&Z`&d!b&f#tOr!#drs!$dsw!#dwx;^x#O!#d#O#P!(}#P#o!#d#o#p!*^#p;'S!#d;'S;=`!+W;=`<%l#MX<%lO!#dLu%6rP;=`<%l#MXLu%7SaQ1s&^7[&TS&Z`&d!bOY#MXYZ'cZ]#MX]^'c^r#MXrs%8Xsw#MXwx#Nox#O#MX#O#P%*Z#P#o#MX#o#p%4^#p#q#MX#q#r%+W#r;'S#MX;'S;=`%6o<%lO#MXIw%8f_Q1s&^7[&TS&Z`&d!bOY%8XYZ!-kZ]%8X]^!-k^w%8Xwx$'ax#O%8X#O#P%9e#P#o%8X#o#p%1f#p#q%8X#q#r%.z#r;'S%8X;'S;=`%;Z<%lO%8XIw%9l[Q1s&^7[OY%8XYZ!-kZ]%8X]^!-k^#o%8X#o#p%.z#p#q%8X#q#r%.z#r;'S%8X;'S;=`%:b;=`<%l!&[<%lO%8XIw%:kY&TS&Z`&d!bOw!&[wx1`x#O!&[#O#P!'Q#P#o!&[#o#p!(V#p;'S!&[;'S;=`!(w;=`<%l%8X<%lO!&[Iw%;^P;=`<%l%8XMV%;naQ1s&^7[&WW&ap&f#tOY%<sYZ!1ZZ]%<s]^!1Z^r%<srs$#esw%<swx%Jux#O%<s#O#P%>Z#P#o%<s#o#p%H^#p#q%<s#q#r%?W#r;'S%<s;'S;=`%Jo<%lO%<sMV%=UaQ1s&^7[&TS&WW&ap&d!b&f#tOY%<sYZ!1ZZ]%<s]^!1Z^r%<srs$#esw%<swx%;ax#O%<s#O#P%>Z#P#o%<s#o#p%H^#p#q%<s#q#r%?W#r;'S%<s;'S;=`%Jo<%lO%<sMV%>b[Q1s&^7[OY%<sYZ!1ZZ]%<s]^!1Z^#o%<s#o#p%?W#p#q%<s#q#r%?W#r;'S%<s;'S;=`%Il;=`<%l!3Q<%lO%<s6y%?g_Q1s&TS&WW&ap&d!b&f#tOY%?WYZ!3QZ]%?W]^!3Q^r%?Wrs$8psw%?Wwx%@fx#O%?W#O#P%Fl#P#o%?W#o#p%H^#p;'S%?W;'S;=`%If<%lO%?W6y%@q_Q1s&WW&ap&f#tOY%?WYZ!3QZ]%?W]^!3Q^r%?Wrs$8psw%?Wwx%Apx#O%?W#O#P%Fl#P#o%?W#o#p%H^#p;'S%?W;'S;=`%If<%lO%?W6y%A{_Q1s&WW&ap&f#tOY%?WYZ!3QZ]%?W]^!3Q^r%?Wrs$8psw%?Wwx%Bzx#O%?W#O#P%Fl#P#o%?W#o#p%H^#p;'S%?W;'S;=`%If<%lO%?W5c%CV]Q1s&WW&ap&f#tOY%BzYZ!5xZ]%Bz]^!5x^r%Bzrs$>ds#O%Bz#O#P%DO#P#o%Bz#o#p%Ef#p;'S%Bz;'S;=`%Ff<%lO%Bz5c%DTWQ1sOY%BzYZ!5xZ]%Bz]^!5x^;'S%Bz;'S;=`%Dm;=`<%l!5x<%lO%Bz5c%DvY&WW&ap&f#tOr!5xrs=ts#O!5x#O#P!6n#P#o!5x#o#p!7s#p;'S!5x;'S;=`!8e;=`<%l%Bz<%lO!5x5c%Em]Q1s&WWOY$BtYZ@tZ]$Bt]^@t^r$Btrs$Cns#O$Bt#O#P$E^#P#o$Bt#o#p%Bz#p;'S$Bt;'S;=`$Fj<%lO$Bt5c%FiP;=`<%l%Bz6y%FqWQ1sOY%?WYZ!3QZ]%?W]^!3Q^;'S%?W;'S;=`%GZ;=`<%l!3Q<%lO%?W6y%Gh[&TS&WW&ap&d!b&f#tOr!3Qrs9jsw!3Qwx!4Qx#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t;=`<%l%?W<%lO!3Q6y%Hg_Q1s&TS&WWOY$InYZEmZ]$In]^Em^r$Inrs$Jpsw$Inwx$Lpx#O$In#O#P$Np#P#o$In#o#p%?W#p;'S$In;'S;=`%!U<%lO$In6y%IiP;=`<%l%?WMV%Iy[&TS&WW&ap&d!b&f#tOr!3Qrs9jsw!3Qwx!4Qx#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t;=`<%l%<s<%lO!3QMV%JrP;=`<%l%<sMV%KSaQ1s&^7[&WW&ap&f#tOY%<sYZ!1ZZ]%<s]^!1Z^r%<srs$#esw%<swx%LXx#O%<s#O#P%>Z#P#o%<s#o#p%H^#p#q%<s#q#r%?W#r;'S%<s;'S;=`%Jo<%lO%<sKo%Lf_Q1s&^7[&WW&ap&f#tOY%LXYZ!=XZ]%LX]^!=X^r%LXrs%&Ts#O%LX#O#P%Me#P#o%LX#o#p%Ef#p#q%LX#q#r%Bz#r;'S%LX;'S;=`& Z<%lO%LXKo%Ml[Q1s&^7[OY%LXYZ!=XZ]%LX]^!=X^#o%LX#o#p%Bz#p#q%LX#q#r%Bz#r;'S%LX;'S;=`%Nb;=`<%l!5x<%lO%LXKo%NkY&WW&ap&f#tOr!5xrs=ts#O!5x#O#P!6n#P#o!5x#o#p!7s#p;'S!5x;'S;=`!8e;=`<%l%LX<%lO!5xKo& ^P;=`<%l%LXMg& h[Q1s&^7[OY#J]YZ%TZ]#J]]^%T^#o#J]#o#p&!^#p#q#J]#q#r&!^#r;'S#J];'S;=`&&p;=`<%l!@b<%lO#J]7Z&!o_Q1s&TS&WW&Z`&ap&d!b&f#tOY&!^YZ!@bZ]&!^]^!@b^r&!^rs%,fsw&!^wx%@fx#O&!^#O#P&#n#P#o&!^#o#p&%b#p;'S&!^;'S;=`&&j<%lO&!^7Z&#sWQ1sOY&!^YZ!@bZ]&!^]^!@b^;'S&!^;'S;=`&$];=`<%l!@b<%lO&!^7Z&$l[&TS&WW&Z`&ap&d!b&f#tOr!@brs!$dsw!@bwx!4Qx#O!@b#O#P!Ad#P#o!@b#o#p!Bu#p;'S!@b;'S;=`!Co;=`<%l&!^<%lO!@b7Z&%k_Q1s&TS&WWOY$InYZEmZ]$In]^Em^r$Inrs$Jpsw$Inwx$Lpx#O$In#O#P$Np#P#o$In#o#p&!^#p;'S$In;'S;=`%!U<%lO$In7Z&&mP;=`<%l&!^Mg&'P[&TS&WW&Z`&ap&d!b&f#tOr!@brs!$dsw!@bwx!4Qx#O!@b#O#P!Ad#P#o!@b#o#p!Bu#p;'S!@b;'S;=`!Co;=`<%l#J]<%lO!@bMg&'xP;=`<%l#J]Gz&(`_%jQ&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGz&)r]!s,W&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGz&+O_%dQ&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{&,^a&_`&^7[&WW&R,X&ap&f#tOY&-cYZ!1ZZ]&-c]^!1Z^r&-crs&.ysw&-cwx'(^x#O&-c#O#P&N}#P#o&-c#o#p'%g#p#q&-c#q#r' l#r;'S&-c;'S;=`'(W<%lO&-cGk&-ta&^7[&TS&WW&R,X&ap&d!b&f#tOY&-cYZ!1ZZ]&-c]^!1Z^r&-crs&.ysw&-cwx&Mwx#O&-c#O#P&N}#P#o&-c#o#p'%g#p#q&-c#q#r' l#r;'S&-c;'S;=`'(W<%lO&-cFy&/Ua&^7[&TS&R,X&d!bOY&0ZYZ)mZ]&0Z]^)m^r&0Zrs&Hisw&0Zwx&1ox#O&0Z#O#P&2s#P#o&0Z#o#p&@g#p#q&0Z#q#r&3b#r;'S&0Z;'S;=`&Hc<%lO&0ZFy&0ja&^7[&TS&WW&R,X&d!b&f#tOY&0ZYZ)mZ]&0Z]^)m^r&0Zrs&.ysw&0Zwx&1ox#O&0Z#O#P&2s#P#o&0Z#o#p&@g#p#q&0Z#q#r&3b#r;'S&0Z;'S;=`&Hc<%lO&0ZFy&1z]&^7[&WW&R,X&f#tOr)mrs*ssw)mwxKmx#O)m#O#P7}#P#o)m#o#pDs#p#q)m#q#r8l#r;'S)m;'S;=`Kg<%lO)mFy&2xW&^7[O#o&0Z#o#p&3b#p#q&0Z#q#r&3b#r;'S&0Z;'S;=`&GS;=`<%l&3b<%lO&0Z0m&3o_&TS&WW&R,X&d!b&f#tOY&3bYZ8lZ]&3b]^8l^r&3brs&4nsw&3bwx&>Ox#O&3b#O#P&>z#P#o&3b#o#p&@g#p;'S&3b;'S;=`&F|<%lO&3b0m&4w_&TS&R,X&d!bOY&3bYZ8lZ]&3b]^8l^r&3brs&5vsw&3bwx&>Ox#O&3b#O#P&>z#P#o&3b#o#p&@g#p;'S&3b;'S;=`&F|<%lO&3b0m&6P_&TS&R,X&d!bOY&3bYZ8lZ]&3b]^8l^r&3brs&7Osw&3bwx&>Ox#O&3b#O#P&>z#P#o&3b#o#p&@g#p;'S&3b;'S;=`&F|<%lO&3b-o&7X]&TS&R,X&d!bOY&7OYZ0lZ]&7O]^0l^w&7Owx&8Qx#O&7O#O#P&8r#P#o&7O#o#p&:T#p;'S&7O;'S;=`&=x<%lO&7O-o&8VX&R,XOw0lwx2Ox#O0l#O#P2k#P#o0l#o#p3n#p;'S0l;'S;=`6z<%lO0l-o&8uRO;'S&7O;'S;=`&9O;=`O&7O-o&9X^&TS&R,X&d!bOY&7OYZ0lZ]&7O]^0l^w&7Owx&8Qx#O&7O#O#P&8r#P#o&7O#o#p&:T#p;'S&7O;'S;=`&=x;=`<%l&7O<%lO&7O-o&:[]&TS&R,XOY&;TYZ4`Z]&;T]^4`^w&;Twx&;}x#O&;T#O#P&<i#P#o&;T#o#p&7O#p;'S&;T;'S;=`&=r<%lO&;T,]&;[Z&TS&R,XOY&;TYZ4`Z]&;T]^4`^w&;Twx&;}x#O&;T#O#P&<i#P;'S&;T;'S;=`&=r<%lO&;T,]&<SV&R,XOw4`wx5dx#O4`#O#P5y#P;'S4`;'S;=`6t<%lO4`,]&<lRO;'S&;T;'S;=`&<u;=`O&;T,]&<|[&TS&R,XOY&;TYZ4`Z]&;T]^4`^w&;Twx&;}x#O&;T#O#P&<i#P;'S&;T;'S;=`&=r;=`<%l&;T<%lO&;T,]&=uP;=`<%l&;T-o&={P;=`<%l&7O0m&>XZ&WW&R,X&f#tOr8lrs9jsw8lwx<Wx#O8l#O#PCf#P#o8l#o#pDs#p;'S8l;'S;=`J`<%lO8l0m&>}RO;'S&3b;'S;=`&?W;=`O&3b0m&?e`&TS&WW&R,X&d!b&f#tOY&3bYZ8lZ]&3b]^8l^r&3brs&4nsw&3bwx&>Ox#O&3b#O#P&>z#P#o&3b#o#p&@g#p;'S&3b;'S;=`&F|;=`<%l&3b<%lO&3b0m&@p_&TS&WW&R,XOY&AoYZEmZ]&Ao]^Em^r&Aors&Bqsw&Aowx&Dqx#O&Ao#O#P&Ee#P#o&Ao#o#p&3b#p;'S&Ao;'S;=`&Fv<%lO&Ao,e&Ax]&TS&WW&R,XOY&AoYZEmZ]&Ao]^Em^r&Aors&Bqsw&Aowx&Dqx#O&Ao#O#P&Ee#P;'S&Ao;'S;=`&Fv<%lO&Ao,e&Bx]&TS&R,XOY&AoYZEmZ]&Ao]^Em^r&Aors&Cqsw&Aowx&Dqx#O&Ao#O#P&Ee#P;'S&Ao;'S;=`&Fv<%lO&Ao,e&Cx]&TS&R,XOY&AoYZEmZ]&Ao]^Em^r&Aors&;Tsw&Aowx&Dqx#O&Ao#O#P&Ee#P;'S&Ao;'S;=`&Fv<%lO&Ao,e&DxX&WW&R,XOrEmrsFaswEmwxHex#OEm#O#PIV#P;'SEm;'S;=`JY<%lOEm,e&EhRO;'S&Ao;'S;=`&Eq;=`O&Ao,e&Ez^&TS&WW&R,XOY&AoYZEmZ]&Ao]^Em^r&Aors&Bqsw&Aowx&Dqx#O&Ao#O#P&Ee#P;'S&Ao;'S;=`&Fv;=`<%l&Ao<%lO&Ao,e&FyP;=`<%l&Ao0m&GPP;=`<%l&3bFy&Ga`&TS&WW&R,X&d!b&f#tOY&3bYZ8lZ]&3b]^8l^r&3brs&4nsw&3bwx&>Ox#O&3b#O#P&>z#P#o&3b#o#p&@g#p;'S&3b;'S;=`&F|;=`<%l&0Z<%lO&3bFy&HfP;=`<%l&0ZFy&Hta&^7[&TS&R,X&d!bOY&0ZYZ)mZ]&0Z]^)m^r&0Zrs&Iysw&0Zwx&1ox#O&0Z#O#P&2s#P#o&0Z#o#p&@g#p#q&0Z#q#r&3b#r;'S&0Z;'S;=`&Hc<%lO&0ZC{&JU_&^7[&TS&R,X&d!bOY&IyYZ,wZ]&Iy]^,w^w&Iywx&KTx#O&Iy#O#P&K}#P#o&Iy#o#p&:T#p#q&Iy#q#r&7O#r;'S&Iy;'S;=`&Mq<%lO&IyC{&K[Z&^7[&R,XOw,wwx.kx#O,w#O#P/}#P#o,w#o#p3n#p#q,w#q#r0l#r;'S,w;'S;=`7w<%lO,wC{&LSW&^7[O#o&Iy#o#p&7O#p#q&Iy#q#r&7O#r;'S&Iy;'S;=`&Ll;=`<%l&7O<%lO&IyC{&Lu^&TS&R,X&d!bOY&7OYZ0lZ]&7O]^0l^w&7Owx&8Qx#O&7O#O#P&8r#P#o&7O#o#p&:T#p;'S&7O;'S;=`&=x;=`<%l&Iy<%lO&7OC{&MtP;=`<%l&IyGk&NU]&^7[&WW&R,X&ap&f#tOr!1Zrs*ssw!1Zwx!<Tx#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1ZGk' SW&^7[O#o&-c#o#p' l#p#q&-c#q#r' l#r;'S&-c;'S;=`'&u;=`<%l' l<%lO&-c1_' {_&TS&WW&R,X&ap&d!b&f#tOY' lYZ!3QZ]' l]^!3Q^r' lrs&4nsw' lwx'!zx#O' l#O#P'#x#P#o' l#o#p'%g#p;'S' l;'S;=`'&o<%lO' l1_'#VZ&WW&R,X&ap&f#tOr!3Qrs9jsw!3Qwx!4|x#O!3Q#O#P!8k#P#o!3Q#o#p!9z#p;'S!3Q;'S;=`!:t<%lO!3Q1_'#{RO;'S' l;'S;=`'$U;=`O' l1_'$e`&TS&WW&R,X&ap&d!b&f#tOY' lYZ!3QZ]' l]^!3Q^r' lrs&4nsw' lwx'!zx#O' l#O#P'#x#P#o' l#o#p'%g#p;'S' l;'S;=`'&o;=`<%l' l<%lO' l1_'%p_&TS&WW&R,XOY&AoYZEmZ]&Ao]^Em^r&Aors&Bqsw&Aowx&Dqx#O&Ao#O#P&Ee#P#o&Ao#o#p' l#p;'S&Ao;'S;=`&Fv<%lO&Ao1_'&rP;=`<%l' lGk''U`&TS&WW&R,X&ap&d!b&f#tOY' lYZ!3QZ]' l]^!3Q^r' lrs&4nsw' lwx'!zx#O' l#O#P'#x#P#o' l#o#p'%g#p;'S' l;'S;=`'&o;=`<%l&-c<%lO' lGk'(ZP;=`<%l&-cGk'(k]&^7[&WW&R,X&ap&f#tOr!1Zrs*ssw!1Zwx')dx#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1ZGk')sZ&U!f&^7[&WW&S,X&ap&f#tOr!=XrsMks#O!=X#O#P!>V#P#o!=X#o#p!7s#p#q!=X#q#r!5x#r;'S!=X;'S;=`!?m<%lO!=XG{'*y]f,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<u',V]eR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{'-caT,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vxz%Tz{'.h{!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{'.{__R&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{'0__%g,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<u'1q]xR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TMg'2}`%h,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`!a'4P!a#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TB^'4d]&q&j&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{'5pa!dQ&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!O%T!O!P'6u!P!Q%T!Q!['9c![#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{'7W_&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!O%T!O!P'8V!P#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{'8j]!m,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'9vi!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!['9c![!g%T!g!h';e!h!l%T!l!m'@X!m#O%T#O#P!?s#P#R%T#R#S'9c#S#X%T#X#Y';e#Y#^%T#^#_'@X#_#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy';vc&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx{%T{|'=R|}%T}!O'=R!O!Q%T!Q!['>c![#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'=d_&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!['>c![#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'>ve!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!['>c![!l%T!l!m'@X!m#O%T#O#P!?s#P#R%T#R#S'>c#S#^%T#^#_'@X#_#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'@l]!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{'Axa%iR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!P%T!P!Q'B}!Q!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGz'Cb_%kQ&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'Dtw!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!O%T!O!P'G_!P!Q%T!Q!['Ho![!d%T!d!e'Jw!e!g%T!g!h';e!h!l%T!l!m'@X!m!q%T!q!r'M}!r!z%T!z!{(!}!{#O%T#O#P!?s#P#R%T#R#S'Ho#S#U%T#U#V'Jw#V#X%T#X#Y';e#Y#^%T#^#_'@X#_#c%T#c#d'M}#d#l%T#l#m(!}#m#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'Gp_&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!['9c![#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'ISk!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!O%T!O!P'G_!P!Q%T!Q!['Ho![!g%T!g!h';e!h!l%T!l!m'@X!m#O%T#O#P!?s#P#R%T#R#S'Ho#S#X%T#X#Y';e#Y#^%T#^#_'@X#_#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'KYb&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!R'Lb!R!S'Lb!S#O%T#O#P!?s#P#R%T#R#S'Lb#S#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'Lub!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!R'Lb!R!S'Lb!S#O%T#O#P!?s#P#R%T#R#S'Lb#S#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy'N`a&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!Y( e!Y#O%T#O#P!?s#P#R%T#R#S( e#S#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy( xa!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q!Y( e!Y#O%T#O#P!?s#P#R%T#R#S( e#S#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy(#`e&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q![($q![!c%T!c!i($q!i#O%T#O#P!?s#P#R%T#R#S($q#S#T%T#T#Z($q#Z#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy(%Ue!f,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!Q%T!Q![($q![!c%T!c!i($q!i#O%T#O#P!?s#P#R%T#R#S($q#S#T%T#T#Z($q#Z#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TMg(&z_y1s&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`('y!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<u((^]%sR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{()j]#^,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{(*vakR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!^%T!^!_(+{!_!`!I[!`!a!I[!a#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGz(,`_%eQ&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{(-r_%r,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`!I[!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{(/U`kR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`!I[!`!a(0W!a#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGz(0k_%fQ&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TG{(2P_]Q#tP&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TMg(3ee&^7[&TS&WW&Q&j&Z`&ap&d!b&f#t%m,XOr%Trs&_sw%Twx!0Vx!Q%T!Q![(3O![!c%T!c!}(3O!}#O%T#O#P!?s#P#R%T#R#S(3O#S#T%T#T#o(3O#o#p!Bu#p#q%T#q#r!@b#r$g%T$g;'S(3O;'S;=`(4v<%lO(3OMg(4yP;=`<%l(3OMg(5ci&^7[&TS&WW&Q&j&Z`&ap&d!b&f#t%m,XOr%Trs(7Qsw%Twx(:jx!Q%T!Q![(3O![!c%T!c!t(3O!t!u(>S!u!}(3O!}#O%T#O#P!?s#P#R%T#R#S(3O#S#T%T#T#f(3O#f#g(>S#g#o(3O#o#p!Bu#p#q%T#q#r!@b#r$g%T$g;'S(3O;'S;=`(4v<%lO(3OGZ(7_a&^7[&TS&R,X&Z`&d!bOY!MYYZ'cZ]!MY]^'c^r!MYrs(8dsw!MYwx# vx#O!MY#O#P#@t#P#o!MY#o#p#E^#p#q!MY#q#r#Ac#r;'S!MY;'S;=`#G}<%lO!MYGZ(8q]&^7[&TS&R,X&Z`&d!bOr'crs(9jsw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'cD](9wZ&^7[&TS&V,X&Z`&d!bOw!-kwx-sx#O!-k#O#P!.i#P#o!-k#o#p!(V#p#q!-k#q#r!&[#r;'S!-k;'S;=`!0P<%lO!-kGk(:wa&^7[&WW&R,X&ap&f#tOY&-cYZ!1ZZ]&-c]^!1Z^r&-crs&.ysw&-cwx(;|x#O&-c#O#P&N}#P#o&-c#o#p'%g#p#q&-c#q#r' l#r;'S&-c;'S;=`'(W<%lO&-cGk(<Z]&^7[&WW&R,X&ap&f#tOr!1Zrs*ssw!1Zwx(=Sx#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1ZFT(=aZ&^7[&WW&S,X&ap&f#tOr!=XrsMks#O!=X#O#P!>V#P#o!=X#o#p!7s#p#q!=X#q#r!5x#r;'S!=X;'S;=`!?m<%lO!=XMg(>ie&^7[&TS&WW&Q&j&Z`&ap&d!b&f#t%m,XOr%Trs(7Qsw%Twx(:jx!Q%T!Q![(3O![!c%T!c!}(3O!}#O%T#O#P!?s#P#R%T#R#S(3O#S#T%T#T#o(3O#o#p!Bu#p#q%T#q#r!@b#r$g%T$g;'S(3O;'S;=`(4v<%lO(3OMg(@ai&^7[&TS&WW&Q&j&Z`&ap&d!b&f#t%m,XOr%Trs(BOsw%Twx(EYx!Q%T!Q![(3O![!c%T!c!t(3O!t!u(Hd!u!}(3O!}#O%T#O#P!?s#P#R%T#R#S(3O#S#T%T#T#f(3O#f#g(Hd#g#o(3O#o#p!Bu#p#q%T#q#r!@b#r$g%T$g;'S(3O;'S;=`(4v<%lO(3OGZ(B]]&^7[&TS&Z`&d!b&`,XOr'crs(CUsw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'cGZ(Ca]&^7[&TS&Z`&d!bOr'crs(DYsw'cwx(kx#O'c#O#P!!u#P#o'c#o#p!*^#p#q'c#q#r!#d#r;'S'c;'S;=`!,a<%lO'cD](DgZ&^7[&TS&e,X&Z`&d!bOw!-kwx-sx#O!-k#O#P!.i#P#o!-k#o#p!(V#p#q!-k#q#r!&[#r;'S!-k;'S;=`!0P<%lO!-kGk(Eg]&^7[&WW&ap&f#t&Y,XOr!1Zrs*ssw!1Zwx(F`x#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1ZGk(Fk]&^7[&WW&ap&f#tOr!1Zrs*ssw!1Zwx(Gdx#O!1Z#O#P!2c#P#o!1Z#o#p!9z#p#q!1Z#q#r!3Q#r;'S!1Z;'S;=`!;}<%lO!1ZFT(GqZ&^7[&WW&c,X&ap&f#tOr!=XrsMks#O!=X#O#P!>V#P#o!=X#o#p!7s#p#q!=X#q#r!5x#r;'S!=X;'S;=`!?m<%lO!=XMg(Hye&^7[&TS&WW&Q&j&Z`&ap&d!b&f#t%m,XOr%Trs(BOsw%Twx(EYx!Q%T!Q![(3O![!c%T!c!}(3O!}#O%T#O#P!?s#P#R%T#R#S(3O#S#T%T#T#o(3O#o#p!Bu#p#q%T#q#r!@b#r$g%T$g;'S(3O;'S;=`(4v<%lO(3OMg(Jqm&^7[&TS&WW&Q&j&Z`&ap&d!b&f#t%m,XOr%Trs(7Qsw%Twx(:jx!Q%T!Q![(3O![!c%T!c!h(3O!h!i(Hd!i!t(3O!t!u(>S!u!}(3O!}#O%T#O#P!?s#P#R%T#R#S(3O#S#T%T#T#U(3O#U#V(>S#V#Y(3O#Y#Z(Hd#Z#o(3O#o#p!Bu#p#q%T#q#r!@b#r$g%T$g;'S(3O;'S;=`(4v<%lO(3OG{(MP]!V,X&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<u(N]]!UR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGz) i_%cQ&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%TGy)!qZ&TS&WW!ZGmOrEmrsFaswEmwxGsx#OEm#O#PIV#P#oEm#o#p!@b#p;'SEm;'S;=`JY<%lOEmG{)#w_%bR&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx!_%T!_!`&)_!`#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T<u)%XZ!Y7_&TS&WW&Z`&ap&d!b&f#tOr!@brs!$dsw!@bwx!4Qx#O!@b#O#P!Ad#P#o!@b#o#p!Bu#p;'S!@b;'S;=`!Co<%lO!@bGy)&_]%l,V&^7[&TS&WW&Z`&ap&d!b&f#tOr%Trs&_sw%Twx!0Vx#O%T#O#P!?s#P#o%T#o#p!Bu#p#q%T#q#r!@b#r;'S%T;'S;=`!Dz<%lO%T",tokenizers:[legacyPrint,indentation,0,1,2,3,4,5,6,7,8,9,10,newlines],topRules:{Script:[0,3]},specialized:[{term:213,get:dt=>spec_identifier$1[dt]||-1}],tokenPrec:7282});class Text{constructor(){}lineAt($){if($<0||$>this.length)throw new RangeError(`Invalid position ${$} in document of length ${this.length}`);return this.lineInner($,!1,1,0)}line($){if($<1||$>this.lines)throw new RangeError(`Invalid line number ${$} in ${this.lines}-line document`);return this.lineInner($,!0,1,0)}replace($,lt,ft){let St=[];return this.decompose(0,$,St,2),ft.length&&ft.decompose(0,ft.length,St,3),this.decompose(lt,this.length,St,1),TextNode.from(St,this.length-(lt-$)+ft.length)}append($){return this.replace(this.length,this.length,$)}slice($,lt=this.length){let ft=[];return this.decompose($,lt,ft,0),TextNode.from(ft,lt-$)}eq($){if($==this)return!0;if($.length!=this.length||$.lines!=this.lines)return!1;let lt=this.scanIdentical($,1),ft=this.length-this.scanIdentical($,-1),St=new RawTextCursor(this),Tt=new RawTextCursor($);for(let Ct=lt,At=lt;;){if(St.next(Ct),Tt.next(Ct),Ct=0,St.lineBreak!=Tt.lineBreak||St.done!=Tt.done||St.value!=Tt.value)return!1;if(At+=St.value.length,St.done||At>=ft)return!0}}iter($=1){return new RawTextCursor(this,$)}iterRange($,lt=this.length){return new PartialTextCursor(this,$,lt)}iterLines($,lt){let ft;if($==null)ft=this.iter();else{lt==null&&(lt=this.lines+1);let St=this.line($).from;ft=this.iterRange(St,Math.max(St,lt==this.lines+1?this.length:lt<=1?0:this.line(lt-1).to))}return new LineCursor(ft)}toString(){return this.sliceString(0)}toJSON(){let $=[];return this.flatten($),$}static of($){if($.length==0)throw new RangeError("A document must have at least one line");return $.length==1&&!$[0]?Text.empty:$.length<=32?new TextLeaf($):TextNode.from(TextLeaf.split($,[]))}}class TextLeaf extends Text{constructor($,lt=textLength($)){super(),this.text=$,this.length=lt}get lines(){return this.text.length}get children(){return null}lineInner($,lt,ft,St){for(let Tt=0;;Tt++){let Ct=this.text[Tt],At=St+Ct.length;if((lt?ft:At)>=$)return new Line(St,At,ft,Ct);St=At+1,ft++}}decompose($,lt,ft,St){let Tt=$<=0&&lt>=this.length?this:new TextLeaf(sliceText(this.text,$,lt),Math.min(lt,this.length)-Math.max(0,$));if(St&1){let Ct=ft.pop(),At=appendText(Tt.text,Ct.text.slice(),0,Tt.length);if(At.length<=32)ft.push(new TextLeaf(At,Ct.length+Tt.length));else{let Rt=At.length>>1;ft.push(new TextLeaf(At.slice(0,Rt)),new TextLeaf(At.slice(Rt)))}}else ft.push(Tt)}replace($,lt,ft){if(!(ft instanceof TextLeaf))return super.replace($,lt,ft);let St=appendText(this.text,appendText(ft.text,sliceText(this.text,0,$)),lt),Tt=this.length+ft.length-(lt-$);return St.length<=32?new TextLeaf(St,Tt):TextNode.from(TextLeaf.split(St,[]),Tt)}sliceString($,lt=this.length,ft=`
`){let St="";for(let Tt=0,Ct=0;Tt<=lt&&Ct<this.text.length;Ct++){let At=this.text[Ct],Rt=Tt+At.length;Tt>$&&Ct&&(St+=ft),$<Rt&&lt>Tt&&(St+=At.slice(Math.max(0,$-Tt),lt-Tt)),Tt=Rt+1}return St}flatten($){for(let lt of this.text)$.push(lt)}scanIdentical(){return 0}static split($,lt){let ft=[],St=-1;for(let Tt of $)ft.push(Tt),St+=Tt.length+1,ft.length==32&&(lt.push(new TextLeaf(ft,St)),ft=[],St=-1);return St>-1&&lt.push(new TextLeaf(ft,St)),lt}}class TextNode extends Text{constructor($,lt){super(),this.children=$,this.length=lt,this.lines=0;for(let ft of $)this.lines+=ft.lines}lineInner($,lt,ft,St){for(let Tt=0;;Tt++){let Ct=this.children[Tt],At=St+Ct.length,Rt=ft+Ct.lines-1;if((lt?Rt:At)>=$)return Ct.lineInner($,lt,ft,St);St=At+1,ft=Rt+1}}decompose($,lt,ft,St){for(let Tt=0,Ct=0;Ct<=lt&&Tt<this.children.length;Tt++){let At=this.children[Tt],Rt=Ct+At.length;if($<=Rt&&lt>=Ct){let kt=St&((Ct<=$?1:0)|(Rt>=lt?2:0));Ct>=$&&Rt<=lt&&!kt?ft.push(At):At.decompose($-Ct,lt-Ct,ft,kt)}Ct=Rt+1}}replace($,lt,ft){if(ft.lines<this.lines)for(let St=0,Tt=0;St<this.children.length;St++){let Ct=this.children[St],At=Tt+Ct.length;if($>=Tt&&lt<=At){let Rt=Ct.replace($-Tt,lt-Tt,ft),kt=this.lines-Ct.lines+Rt.lines;if(Rt.lines<kt>>5-1&&Rt.lines>kt>>5+1){let Nt=this.children.slice();return Nt[St]=Rt,new TextNode(Nt,this.length-(lt-$)+ft.length)}return super.replace(Tt,At,Rt)}Tt=At+1}return super.replace($,lt,ft)}sliceString($,lt=this.length,ft=`
`){let St="";for(let Tt=0,Ct=0;Tt<this.children.length&&Ct<=lt;Tt++){let At=this.children[Tt],Rt=Ct+At.length;Ct>$&&Tt&&(St+=ft),$<Rt&&lt>Ct&&(St+=At.sliceString($-Ct,lt-Ct,ft)),Ct=Rt+1}return St}flatten($){for(let lt of this.children)lt.flatten($)}scanIdentical($,lt){if(!($ instanceof TextNode))return 0;let ft=0,[St,Tt,Ct,At]=lt>0?[0,0,this.children.length,$.children.length]:[this.children.length-1,$.children.length-1,-1,-1];for(;;St+=lt,Tt+=lt){if(St==Ct||Tt==At)return ft;let Rt=this.children[St],kt=$.children[Tt];if(Rt!=kt)return ft+Rt.scanIdentical(kt,lt);ft+=Rt.length+1}}static from($,lt=$.reduce((ft,St)=>ft+St.length+1,-1)){let ft=0;for(let zt of $)ft+=zt.lines;if(ft<32){let zt=[];for(let Zt of $)Zt.flatten(zt);return new TextLeaf(zt,lt)}let St=Math.max(32,ft>>5),Tt=St<<1,Ct=St>>1,At=[],Rt=0,kt=-1,Nt=[];function Bt(zt){let Zt;if(zt.lines>Tt&&zt instanceof TextNode)for(let ln of zt.children)Bt(ln);else zt.lines>Ct&&(Rt>Ct||!Rt)?(Ut(),At.push(zt)):zt instanceof TextLeaf&&Rt&&(Zt=Nt[Nt.length-1])instanceof TextLeaf&&zt.lines+Zt.lines<=32?(Rt+=zt.lines,kt+=zt.length+1,Nt[Nt.length-1]=new TextLeaf(Zt.text.concat(zt.text),Zt.length+1+zt.length)):(Rt+zt.lines>St&&Ut(),Rt+=zt.lines,kt+=zt.length+1,Nt.push(zt))}function Ut(){Rt!=0&&(At.push(Nt.length==1?Nt[0]:TextNode.from(Nt,kt)),kt=-1,Rt=Nt.length=0)}for(let zt of $)Bt(zt);return Ut(),At.length==1?At[0]:new TextNode(At,lt)}}Text.empty=new TextLeaf([""],0);function textLength(dt){let $=-1;for(let lt of dt)$+=lt.length+1;return $}function appendText(dt,$,lt=0,ft=1e9){for(let St=0,Tt=0,Ct=!0;Tt<dt.length&&St<=ft;Tt++){let At=dt[Tt],Rt=St+At.length;Rt>=lt&&(Rt>ft&&(At=At.slice(0,ft-St)),St<lt&&(At=At.slice(lt-St)),Ct?($[$.length-1]+=At,Ct=!1):$.push(At)),St=Rt+1}return $}function sliceText(dt,$,lt){return appendText(dt,[""],$,lt)}class RawTextCursor{constructor($,lt=1){this.dir=lt,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[$],this.offsets=[lt>0?1:($ instanceof TextLeaf?$.text.length:$.children.length)<<1]}nextInner($,lt){for(this.done=this.lineBreak=!1;;){let ft=this.nodes.length-1,St=this.nodes[ft],Tt=this.offsets[ft],Ct=Tt>>1,At=St instanceof TextLeaf?St.text.length:St.children.length;if(Ct==(lt>0?At:0)){if(ft==0)return this.done=!0,this.value="",this;lt>0&&this.offsets[ft-1]++,this.nodes.pop(),this.offsets.pop()}else if((Tt&1)==(lt>0?0:1)){if(this.offsets[ft]+=lt,$==0)return this.lineBreak=!0,this.value=`
`,this;$--}else if(St instanceof TextLeaf){let Rt=St.text[Ct+(lt<0?-1:0)];if(this.offsets[ft]+=lt,Rt.length>Math.max(0,$))return this.value=$==0?Rt:lt>0?Rt.slice($):Rt.slice(0,Rt.length-$),this;$-=Rt.length}else{let Rt=St.children[Ct+(lt<0?-1:0)];$>Rt.length?($-=Rt.length,this.offsets[ft]+=lt):(lt<0&&this.offsets[ft]--,this.nodes.push(Rt),this.offsets.push(lt>0?1:(Rt instanceof TextLeaf?Rt.text.length:Rt.children.length)<<1))}}}next($=0){return $<0&&(this.nextInner(-$,-this.dir),$=this.value.length),this.nextInner($,this.dir)}}class PartialTextCursor{constructor($,lt,ft){this.value="",this.done=!1,this.cursor=new RawTextCursor($,lt>ft?-1:1),this.pos=lt>ft?$.length:0,this.from=Math.min(lt,ft),this.to=Math.max(lt,ft)}nextInner($,lt){if(lt<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;$+=Math.max(0,lt<0?this.pos-this.to:this.from-this.pos);let ft=lt<0?this.pos-this.from:this.to-this.pos;$>ft&&($=ft),ft-=$;let{value:St}=this.cursor.next($);return this.pos+=(St.length+$)*lt,this.value=St.length<=ft?St:lt<0?St.slice(St.length-ft):St.slice(0,ft),this.done=!this.value,this}next($=0){return $<0?$=Math.max($,this.from-this.pos):$>0&&($=Math.min($,this.to-this.pos)),this.nextInner($,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class LineCursor{constructor($){this.inner=$,this.afterBreak=!0,this.value="",this.done=!1}next($=0){let{done:lt,lineBreak:ft,value:St}=this.inner.next($);return lt?(this.done=!0,this.value=""):ft?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=St,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Text.prototype[Symbol.iterator]=function(){return this.iter()},RawTextCursor.prototype[Symbol.iterator]=PartialTextCursor.prototype[Symbol.iterator]=LineCursor.prototype[Symbol.iterator]=function(){return this});class Line{constructor($,lt,ft,St){this.from=$,this.to=lt,this.number=ft,this.text=St}get length(){return this.to-this.from}}let extend="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(dt=>dt?parseInt(dt,36):1);for(let dt=1;dt<extend.length;dt++)extend[dt]+=extend[dt-1];function isExtendingChar(dt){for(let $=1;$<extend.length;$+=2)if(extend[$]>dt)return extend[$-1]<=dt;return!1}function isRegionalIndicator(dt){return dt>=127462&&dt<=127487}const ZWJ=8205;function findClusterBreak(dt,$,lt=!0,ft=!0){return(lt?nextClusterBreak:prevClusterBreak)(dt,$,ft)}function nextClusterBreak(dt,$,lt){if($==dt.length)return $;$&&surrogateLow(dt.charCodeAt($))&&surrogateHigh(dt.charCodeAt($-1))&&$--;let ft=codePointAt(dt,$);for($+=codePointSize(ft);$<dt.length;){let St=codePointAt(dt,$);if(ft==ZWJ||St==ZWJ||lt&&isExtendingChar(St))$+=codePointSize(St),ft=St;else if(isRegionalIndicator(St)){let Tt=0,Ct=$-2;for(;Ct>=0&&isRegionalIndicator(codePointAt(dt,Ct));)Tt++,Ct-=2;if(Tt%2==0)break;$+=2}else break}return $}function prevClusterBreak(dt,$,lt){for(;$>0;){let ft=nextClusterBreak(dt,$-2,lt);if(ft<$)return ft;$--}return 0}function surrogateLow(dt){return dt>=56320&&dt<57344}function surrogateHigh(dt){return dt>=55296&&dt<56320}function codePointAt(dt,$){let lt=dt.charCodeAt($);if(!surrogateHigh(lt)||$+1==dt.length)return lt;let ft=dt.charCodeAt($+1);return surrogateLow(ft)?(lt-55296<<10)+(ft-56320)+65536:lt}function fromCodePoint(dt){return dt<=65535?String.fromCharCode(dt):(dt-=65536,String.fromCharCode((dt>>10)+55296,(dt&1023)+56320))}function codePointSize(dt){return dt<65536?1:2}const DefaultSplit=/\r\n?|\n/;var MapMode=function(dt){return dt[dt.Simple=0]="Simple",dt[dt.TrackDel=1]="TrackDel",dt[dt.TrackBefore=2]="TrackBefore",dt[dt.TrackAfter=3]="TrackAfter",dt}(MapMode||(MapMode={}));class ChangeDesc{constructor($){this.sections=$}get length(){let $=0;for(let lt=0;lt<this.sections.length;lt+=2)$+=this.sections[lt];return $}get newLength(){let $=0;for(let lt=0;lt<this.sections.length;lt+=2){let ft=this.sections[lt+1];$+=ft<0?this.sections[lt]:ft}return $}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps($){for(let lt=0,ft=0,St=0;lt<this.sections.length;){let Tt=this.sections[lt++],Ct=this.sections[lt++];Ct<0?($(ft,St,Tt),St+=Tt):St+=Ct,ft+=Tt}}iterChangedRanges($,lt=!1){iterChanges(this,$,lt)}get invertedDesc(){let $=[];for(let lt=0;lt<this.sections.length;){let ft=this.sections[lt++],St=this.sections[lt++];St<0?$.push(ft,St):$.push(St,ft)}return new ChangeDesc($)}composeDesc($){return this.empty?$:$.empty?this:composeSets(this,$)}mapDesc($,lt=!1){return $.empty?this:mapSet(this,$,lt)}mapPos($,lt=-1,ft=MapMode.Simple){let St=0,Tt=0;for(let Ct=0;Ct<this.sections.length;){let At=this.sections[Ct++],Rt=this.sections[Ct++],kt=St+At;if(Rt<0){if(kt>$)return Tt+($-St);Tt+=At}else{if(ft!=MapMode.Simple&&kt>=$&&(ft==MapMode.TrackDel&&St<$&&kt>$||ft==MapMode.TrackBefore&&St<$||ft==MapMode.TrackAfter&&kt>$))return null;if(kt>$||kt==$&&lt<0&&!At)return $==St||lt<0?Tt:Tt+Rt;Tt+=Rt}St=kt}if($>St)throw new RangeError(`Position ${$} is out of range for changeset of length ${St}`);return Tt}touchesRange($,lt=$){for(let ft=0,St=0;ft<this.sections.length&&St<=lt;){let Tt=this.sections[ft++],Ct=this.sections[ft++],At=St+Tt;if(Ct>=0&&St<=lt&&At>=$)return St<$&&At>lt?"cover":!0;St=At}return!1}toString(){let $="";for(let lt=0;lt<this.sections.length;){let ft=this.sections[lt++],St=this.sections[lt++];$+=($?" ":"")+ft+(St>=0?":"+St:"")}return $}toJSON(){return this.sections}static fromJSON($){if(!Array.isArray($)||$.length%2||$.some(lt=>typeof lt!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ChangeDesc($)}static create($){return new ChangeDesc($)}}class ChangeSet extends ChangeDesc{constructor($,lt){super($),this.inserted=lt}apply($){if(this.length!=$.length)throw new RangeError("Applying change set to a document with the wrong length");return iterChanges(this,(lt,ft,St,Tt,Ct)=>$=$.replace(St,St+(ft-lt),Ct),!1),$}mapDesc($,lt=!1){return mapSet(this,$,lt,!0)}invert($){let lt=this.sections.slice(),ft=[];for(let St=0,Tt=0;St<lt.length;St+=2){let Ct=lt[St],At=lt[St+1];if(At>=0){lt[St]=At,lt[St+1]=Ct;let Rt=St>>1;for(;ft.length<Rt;)ft.push(Text.empty);ft.push(Ct?$.slice(Tt,Tt+Ct):Text.empty)}Tt+=Ct}return new ChangeSet(lt,ft)}compose($){return this.empty?$:$.empty?this:composeSets(this,$,!0)}map($,lt=!1){return $.empty?this:mapSet(this,$,lt,!0)}iterChanges($,lt=!1){iterChanges(this,$,lt)}get desc(){return ChangeDesc.create(this.sections)}filter($){let lt=[],ft=[],St=[],Tt=new SectionIter(this);e:for(let Ct=0,At=0;;){let Rt=Ct==$.length?1e9:$[Ct++];for(;At<Rt||At==Rt&&Tt.len==0;){if(Tt.done)break e;let Nt=Math.min(Tt.len,Rt-At);addSection(St,Nt,-1);let Bt=Tt.ins==-1?-1:Tt.off==0?Tt.ins:0;addSection(lt,Nt,Bt),Bt>0&&addInsert(ft,lt,Tt.text),Tt.forward(Nt),At+=Nt}let kt=$[Ct++];for(;At<kt;){if(Tt.done)break e;let Nt=Math.min(Tt.len,kt-At);addSection(lt,Nt,-1),addSection(St,Nt,Tt.ins==-1?-1:Tt.off==0?Tt.ins:0),Tt.forward(Nt),At+=Nt}}return{changes:new ChangeSet(lt,ft),filtered:ChangeDesc.create(St)}}toJSON(){let $=[];for(let lt=0;lt<this.sections.length;lt+=2){let ft=this.sections[lt],St=this.sections[lt+1];St<0?$.push(ft):St==0?$.push([ft]):$.push([ft].concat(this.inserted[lt>>1].toJSON()))}return $}static of($,lt,ft){let St=[],Tt=[],Ct=0,At=null;function Rt(Nt=!1){if(!Nt&&!St.length)return;Ct<lt&&addSection(St,lt-Ct,-1);let Bt=new ChangeSet(St,Tt);At=At?At.compose(Bt.map(At)):Bt,St=[],Tt=[],Ct=0}function kt(Nt){if(Array.isArray(Nt))for(let Bt of Nt)kt(Bt);else if(Nt instanceof ChangeSet){if(Nt.length!=lt)throw new RangeError(`Mismatched change set length (got ${Nt.length}, expected ${lt})`);Rt(),At=At?At.compose(Nt.map(At)):Nt}else{let{from:Bt,to:Ut=Bt,insert:zt}=Nt;if(Bt>Ut||Bt<0||Ut>lt)throw new RangeError(`Invalid change range ${Bt} to ${Ut} (in doc of length ${lt})`);let Zt=zt?typeof zt=="string"?Text.of(zt.split(ft||DefaultSplit)):zt:Text.empty,ln=Zt.length;if(Bt==Ut&&ln==0)return;Bt<Ct&&Rt(),Bt>Ct&&addSection(St,Bt-Ct,-1),addSection(St,Ut-Bt,ln),addInsert(Tt,St,Zt),Ct=Ut}}return kt($),Rt(!At),At}static empty($){return new ChangeSet($?[$,-1]:[],[])}static fromJSON($){if(!Array.isArray($))throw new RangeError("Invalid JSON representation of ChangeSet");let lt=[],ft=[];for(let St=0;St<$.length;St++){let Tt=$[St];if(typeof Tt=="number")lt.push(Tt,-1);else{if(!Array.isArray(Tt)||typeof Tt[0]!="number"||Tt.some((Ct,At)=>At&&typeof Ct!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(Tt.length==1)lt.push(Tt[0],0);else{for(;ft.length<St;)ft.push(Text.empty);ft[St]=Text.of(Tt.slice(1)),lt.push(Tt[0],ft[St].length)}}}return new ChangeSet(lt,ft)}static createSet($,lt){return new ChangeSet($,lt)}}function addSection(dt,$,lt,ft=!1){if($==0&&lt<=0)return;let St=dt.length-2;St>=0&&lt<=0&&lt==dt[St+1]?dt[St]+=$:$==0&&dt[St]==0?dt[St+1]+=lt:ft?(dt[St]+=$,dt[St+1]+=lt):dt.push($,lt)}function addInsert(dt,$,lt){if(lt.length==0)return;let ft=$.length-2>>1;if(ft<dt.length)dt[dt.length-1]=dt[dt.length-1].append(lt);else{for(;dt.length<ft;)dt.push(Text.empty);dt.push(lt)}}function iterChanges(dt,$,lt){let ft=dt.inserted;for(let St=0,Tt=0,Ct=0;Ct<dt.sections.length;){let At=dt.sections[Ct++],Rt=dt.sections[Ct++];if(Rt<0)St+=At,Tt+=At;else{let kt=St,Nt=Tt,Bt=Text.empty;for(;kt+=At,Nt+=Rt,Rt&&ft&&(Bt=Bt.append(ft[Ct-2>>1])),!(lt||Ct==dt.sections.length||dt.sections[Ct+1]<0);)At=dt.sections[Ct++],Rt=dt.sections[Ct++];$(St,kt,Tt,Nt,Bt),St=kt,Tt=Nt}}}function mapSet(dt,$,lt,ft=!1){let St=[],Tt=ft?[]:null,Ct=new SectionIter(dt),At=new SectionIter($);for(let Rt=-1;;)if(Ct.ins==-1&&At.ins==-1){let kt=Math.min(Ct.len,At.len);addSection(St,kt,-1),Ct.forward(kt),At.forward(kt)}else if(At.ins>=0&&(Ct.ins<0||Rt==Ct.i||Ct.off==0&&(At.len<Ct.len||At.len==Ct.len&&!lt))){let kt=At.len;for(addSection(St,At.ins,-1);kt;){let Nt=Math.min(Ct.len,kt);Ct.ins>=0&&Rt<Ct.i&&Ct.len<=Nt&&(addSection(St,0,Ct.ins),Tt&&addInsert(Tt,St,Ct.text),Rt=Ct.i),Ct.forward(Nt),kt-=Nt}At.next()}else if(Ct.ins>=0){let kt=0,Nt=Ct.len;for(;Nt;)if(At.ins==-1){let Bt=Math.min(Nt,At.len);kt+=Bt,Nt-=Bt,At.forward(Bt)}else if(At.ins==0&&At.len<Nt)Nt-=At.len,At.next();else break;addSection(St,kt,Rt<Ct.i?Ct.ins:0),Tt&&Rt<Ct.i&&addInsert(Tt,St,Ct.text),Rt=Ct.i,Ct.forward(Ct.len-Nt)}else{if(Ct.done&&At.done)return Tt?ChangeSet.createSet(St,Tt):ChangeDesc.create(St);throw new Error("Mismatched change set lengths")}}function composeSets(dt,$,lt=!1){let ft=[],St=lt?[]:null,Tt=new SectionIter(dt),Ct=new SectionIter($);for(let At=!1;;){if(Tt.done&&Ct.done)return St?ChangeSet.createSet(ft,St):ChangeDesc.create(ft);if(Tt.ins==0)addSection(ft,Tt.len,0,At),Tt.next();else if(Ct.len==0&&!Ct.done)addSection(ft,0,Ct.ins,At),St&&addInsert(St,ft,Ct.text),Ct.next();else{if(Tt.done||Ct.done)throw new Error("Mismatched change set lengths");{let Rt=Math.min(Tt.len2,Ct.len),kt=ft.length;if(Tt.ins==-1){let Nt=Ct.ins==-1?-1:Ct.off?0:Ct.ins;addSection(ft,Rt,Nt,At),St&&Nt&&addInsert(St,ft,Ct.text)}else Ct.ins==-1?(addSection(ft,Tt.off?0:Tt.len,Rt,At),St&&addInsert(St,ft,Tt.textBit(Rt))):(addSection(ft,Tt.off?0:Tt.len,Ct.off?0:Ct.ins,At),St&&!Ct.off&&addInsert(St,ft,Ct.text));At=(Tt.ins>Rt||Ct.ins>=0&&Ct.len>Rt)&&(At||ft.length>kt),Tt.forward2(Rt),Ct.forward(Rt)}}}}class SectionIter{constructor($){this.set=$,this.i=0,this.next()}next(){let{sections:$}=this.set;this.i<$.length?(this.len=$[this.i++],this.ins=$[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:$}=this.set,lt=this.i-2>>1;return lt>=$.length?Text.empty:$[lt]}textBit($){let{inserted:lt}=this.set,ft=this.i-2>>1;return ft>=lt.length&&!$?Text.empty:lt[ft].slice(this.off,$==null?void 0:this.off+$)}forward($){$==this.len?this.next():(this.len-=$,this.off+=$)}forward2($){this.ins==-1?this.forward($):$==this.ins?this.next():(this.ins-=$,this.off+=$)}}class SelectionRange{constructor($,lt,ft){this.from=$,this.to=lt,this.flags=ft}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let $=this.flags&3;return $==3?null:$}get goalColumn(){let $=this.flags>>5;return $==33554431?void 0:$}map($,lt=-1){let ft,St;return this.empty?ft=St=$.mapPos(this.from,lt):(ft=$.mapPos(this.from,1),St=$.mapPos(this.to,-1)),ft==this.from&&St==this.to?this:new SelectionRange(ft,St,this.flags)}extend($,lt=$){if($<=this.anchor&&lt>=this.anchor)return EditorSelection.range($,lt);let ft=Math.abs($-this.anchor)>Math.abs(lt-this.anchor)?$:lt;return EditorSelection.range(this.anchor,ft)}eq($){return this.anchor==$.anchor&&this.head==$.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON($){if(!$||typeof $.anchor!="number"||typeof $.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return EditorSelection.range($.anchor,$.head)}static create($,lt,ft){return new SelectionRange($,lt,ft)}}class EditorSelection{constructor($,lt){this.ranges=$,this.mainIndex=lt}map($,lt=-1){return $.empty?this:EditorSelection.create(this.ranges.map(ft=>ft.map($,lt)),this.mainIndex)}eq($){if(this.ranges.length!=$.ranges.length||this.mainIndex!=$.mainIndex)return!1;for(let lt=0;lt<this.ranges.length;lt++)if(!this.ranges[lt].eq($.ranges[lt]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new EditorSelection([this.main],0)}addRange($,lt=!0){return EditorSelection.create([$].concat(this.ranges),lt?0:this.mainIndex+1)}replaceRange($,lt=this.mainIndex){let ft=this.ranges.slice();return ft[lt]=$,EditorSelection.create(ft,this.mainIndex)}toJSON(){return{ranges:this.ranges.map($=>$.toJSON()),main:this.mainIndex}}static fromJSON($){if(!$||!Array.isArray($.ranges)||typeof $.main!="number"||$.main>=$.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new EditorSelection($.ranges.map(lt=>SelectionRange.fromJSON(lt)),$.main)}static single($,lt=$){return new EditorSelection([EditorSelection.range($,lt)],0)}static create($,lt=0){if($.length==0)throw new RangeError("A selection needs at least one range");for(let ft=0,St=0;St<$.length;St++){let Tt=$[St];if(Tt.empty?Tt.from<=ft:Tt.from<ft)return EditorSelection.normalized($.slice(),lt);ft=Tt.to}return new EditorSelection($,lt)}static cursor($,lt=0,ft,St){return SelectionRange.create($,$,(lt==0?0:lt<0?4:8)|(ft==null?3:Math.min(2,ft))|(St??33554431)<<5)}static range($,lt,ft,St){let Tt=(ft??33554431)<<5|(St==null?3:Math.min(2,St));return lt<$?SelectionRange.create(lt,$,24|Tt):SelectionRange.create($,lt,(lt>$?4:0)|Tt)}static normalized($,lt=0){let ft=$[lt];$.sort((St,Tt)=>St.from-Tt.from),lt=$.indexOf(ft);for(let St=1;St<$.length;St++){let Tt=$[St],Ct=$[St-1];if(Tt.empty?Tt.from<=Ct.to:Tt.from<Ct.to){let At=Ct.from,Rt=Math.max(Tt.to,Ct.to);St<=lt&&lt--,$.splice(--St,2,Tt.anchor>Tt.head?EditorSelection.range(Rt,At):EditorSelection.range(At,Rt))}}return new EditorSelection($,lt)}}function checkSelection(dt,$){for(let lt of dt.ranges)if(lt.to>$)throw new RangeError("Selection points outside of document")}let nextID=0;class Facet{constructor($,lt,ft,St,Tt){this.combine=$,this.compareInput=lt,this.compare=ft,this.isStatic=St,this.id=nextID++,this.default=$([]),this.extensions=typeof Tt=="function"?Tt(this):Tt}static define($={}){return new Facet($.combine||(lt=>lt),$.compareInput||((lt,ft)=>lt===ft),$.compare||($.combine?(lt,ft)=>lt===ft:sameArray),!!$.static,$.enables)}of($){return new FacetProvider([],this,0,$)}compute($,lt){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider($,this,1,lt)}computeN($,lt){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider($,this,2,lt)}from($,lt){return lt||(lt=ft=>ft),this.compute([$],ft=>lt(ft.field($)))}}function sameArray(dt,$){return dt==$||dt.length==$.length&&dt.every((lt,ft)=>lt===$[ft])}class FacetProvider{constructor($,lt,ft,St){this.dependencies=$,this.facet=lt,this.type=ft,this.value=St,this.id=nextID++}dynamicSlot($){var lt;let ft=this.value,St=this.facet.compareInput,Tt=this.id,Ct=$[Tt]>>1,At=this.type==2,Rt=!1,kt=!1,Nt=[];for(let Bt of this.dependencies)Bt=="doc"?Rt=!0:Bt=="selection"?kt=!0:((lt=$[Bt.id])!==null&&lt!==void 0?lt:1)&1||Nt.push($[Bt.id]);return{create(Bt){return Bt.values[Ct]=ft(Bt),1},update(Bt,Ut){if(Rt&&Ut.docChanged||kt&&(Ut.docChanged||Ut.selection)||ensureAll(Bt,Nt)){let zt=ft(Bt);if(At?!compareArray(zt,Bt.values[Ct],St):!St(zt,Bt.values[Ct]))return Bt.values[Ct]=zt,1}return 0},reconfigure:(Bt,Ut)=>{let zt,Zt=Ut.config.address[Tt];if(Zt!=null){let ln=getAddr(Ut,Zt);if(this.dependencies.every(cn=>cn instanceof Facet?Ut.facet(cn)===Bt.facet(cn):cn instanceof StateField?Ut.field(cn,!1)==Bt.field(cn,!1):!0)||(At?compareArray(zt=ft(Bt),ln,St):St(zt=ft(Bt),ln)))return Bt.values[Ct]=ln,0}else zt=ft(Bt);return Bt.values[Ct]=zt,1}}}}function compareArray(dt,$,lt){if(dt.length!=$.length)return!1;for(let ft=0;ft<dt.length;ft++)if(!lt(dt[ft],$[ft]))return!1;return!0}function ensureAll(dt,$){let lt=!1;for(let ft of $)ensureAddr(dt,ft)&1&&(lt=!0);return lt}function dynamicFacetSlot(dt,$,lt){let ft=lt.map(Rt=>dt[Rt.id]),St=lt.map(Rt=>Rt.type),Tt=ft.filter(Rt=>!(Rt&1)),Ct=dt[$.id]>>1;function At(Rt){let kt=[];for(let Nt=0;Nt<ft.length;Nt++){let Bt=getAddr(Rt,ft[Nt]);if(St[Nt]==2)for(let Ut of Bt)kt.push(Ut);else kt.push(Bt)}return $.combine(kt)}return{create(Rt){for(let kt of ft)ensureAddr(Rt,kt);return Rt.values[Ct]=At(Rt),1},update(Rt,kt){if(!ensureAll(Rt,Tt))return 0;let Nt=At(Rt);return $.compare(Nt,Rt.values[Ct])?0:(Rt.values[Ct]=Nt,1)},reconfigure(Rt,kt){let Nt=ensureAll(Rt,ft),Bt=kt.config.facets[$.id],Ut=kt.facet($);if(Bt&&!Nt&&sameArray(lt,Bt))return Rt.values[Ct]=Ut,0;let zt=At(Rt);return $.compare(zt,Ut)?(Rt.values[Ct]=Ut,0):(Rt.values[Ct]=zt,1)}}}const initField=Facet.define({static:!0});class StateField{constructor($,lt,ft,St,Tt){this.id=$,this.createF=lt,this.updateF=ft,this.compareF=St,this.spec=Tt,this.provides=void 0}static define($){let lt=new StateField(nextID++,$.create,$.update,$.compare||((ft,St)=>ft===St),$);return $.provide&&(lt.provides=$.provide(lt)),lt}create($){let lt=$.facet(initField).find(ft=>ft.field==this);return((lt==null?void 0:lt.create)||this.createF)($)}slot($){let lt=$[this.id]>>1;return{create:ft=>(ft.values[lt]=this.create(ft),1),update:(ft,St)=>{let Tt=ft.values[lt],Ct=this.updateF(Tt,St);return this.compareF(Tt,Ct)?0:(ft.values[lt]=Ct,1)},reconfigure:(ft,St)=>St.config.address[this.id]!=null?(ft.values[lt]=St.field(this),0):(ft.values[lt]=this.create(ft),1)}}init($){return[this,initField.of({field:this,create:$})]}get extension(){return this}}const Prec_={lowest:4,low:3,default:2,high:1,highest:0};function prec(dt){return $=>new PrecExtension($,dt)}const Prec={highest:prec(Prec_.highest),high:prec(Prec_.high),default:prec(Prec_.default),low:prec(Prec_.low),lowest:prec(Prec_.lowest)};class PrecExtension{constructor($,lt){this.inner=$,this.prec=lt}}class Compartment{of($){return new CompartmentInstance(this,$)}reconfigure($){return Compartment.reconfigure.of({compartment:this,extension:$})}get($){return $.config.compartments.get(this)}}class CompartmentInstance{constructor($,lt){this.compartment=$,this.inner=lt}}class Configuration{constructor($,lt,ft,St,Tt,Ct){for(this.base=$,this.compartments=lt,this.dynamicSlots=ft,this.address=St,this.staticValues=Tt,this.facets=Ct,this.statusTemplate=[];this.statusTemplate.length<ft.length;)this.statusTemplate.push(0)}staticFacet($){let lt=this.address[$.id];return lt==null?$.default:this.staticValues[lt>>1]}static resolve($,lt,ft){let St=[],Tt=Object.create(null),Ct=new Map;for(let Ut of flatten($,lt,Ct))Ut instanceof StateField?St.push(Ut):(Tt[Ut.facet.id]||(Tt[Ut.facet.id]=[])).push(Ut);let At=Object.create(null),Rt=[],kt=[];for(let Ut of St)At[Ut.id]=kt.length<<1,kt.push(zt=>Ut.slot(zt));let Nt=ft==null?void 0:ft.config.facets;for(let Ut in Tt){let zt=Tt[Ut],Zt=zt[0].facet,ln=Nt&&Nt[Ut]||[];if(zt.every(cn=>cn.type==0))if(At[Zt.id]=Rt.length<<1|1,sameArray(ln,zt))Rt.push(ft.facet(Zt));else{let cn=Zt.combine(zt.map(hn=>hn.value));Rt.push(ft&&Zt.compare(cn,ft.facet(Zt))?ft.facet(Zt):cn)}else{for(let cn of zt)cn.type==0?(At[cn.id]=Rt.length<<1|1,Rt.push(cn.value)):(At[cn.id]=kt.length<<1,kt.push(hn=>cn.dynamicSlot(hn)));At[Zt.id]=kt.length<<1,kt.push(cn=>dynamicFacetSlot(cn,Zt,zt))}}let Bt=kt.map(Ut=>Ut(At));return new Configuration($,Ct,Bt,At,Rt,Tt)}}function flatten(dt,$,lt){let ft=[[],[],[],[],[]],St=new Map;function Tt(Ct,At){let Rt=St.get(Ct);if(Rt!=null){if(Rt<=At)return;let kt=ft[Rt].indexOf(Ct);kt>-1&&ft[Rt].splice(kt,1),Ct instanceof CompartmentInstance&&lt.delete(Ct.compartment)}if(St.set(Ct,At),Array.isArray(Ct))for(let kt of Ct)Tt(kt,At);else if(Ct instanceof CompartmentInstance){if(lt.has(Ct.compartment))throw new RangeError("Duplicate use of compartment in extensions");let kt=$.get(Ct.compartment)||Ct.inner;lt.set(Ct.compartment,kt),Tt(kt,At)}else if(Ct instanceof PrecExtension)Tt(Ct.inner,Ct.prec);else if(Ct instanceof StateField)ft[At].push(Ct),Ct.provides&&Tt(Ct.provides,At);else if(Ct instanceof FacetProvider)ft[At].push(Ct),Ct.facet.extensions&&Tt(Ct.facet.extensions,Prec_.default);else{let kt=Ct.extension;if(!kt)throw new Error(`Unrecognized extension value in extension set (${Ct}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);Tt(kt,At)}}return Tt(dt,Prec_.default),ft.reduce((Ct,At)=>Ct.concat(At))}function ensureAddr(dt,$){if($&1)return 2;let lt=$>>1,ft=dt.status[lt];if(ft==4)throw new Error("Cyclic dependency between fields and/or facets");if(ft&2)return ft;dt.status[lt]=4;let St=dt.computeSlot(dt,dt.config.dynamicSlots[lt]);return dt.status[lt]=2|St}function getAddr(dt,$){return $&1?dt.config.staticValues[$>>1]:dt.values[$>>1]}const languageData=Facet.define(),allowMultipleSelections=Facet.define({combine:dt=>dt.some($=>$),static:!0}),lineSeparator=Facet.define({combine:dt=>dt.length?dt[0]:void 0,static:!0}),changeFilter=Facet.define(),transactionFilter=Facet.define(),transactionExtender=Facet.define(),readOnly=Facet.define({combine:dt=>dt.length?dt[0]:!1});class Annotation{constructor($,lt){this.type=$,this.value=lt}static define(){return new AnnotationType}}class AnnotationType{of($){return new Annotation(this,$)}}class StateEffectType{constructor($){this.map=$}of($){return new StateEffect(this,$)}}class StateEffect{constructor($,lt){this.type=$,this.value=lt}map($){let lt=this.type.map(this.value,$);return lt===void 0?void 0:lt==this.value?this:new StateEffect(this.type,lt)}is($){return this.type==$}static define($={}){return new StateEffectType($.map||(lt=>lt))}static mapEffects($,lt){if(!$.length)return $;let ft=[];for(let St of $){let Tt=St.map(lt);Tt&&ft.push(Tt)}return ft}}StateEffect.reconfigure=StateEffect.define();StateEffect.appendConfig=StateEffect.define();class Transaction{constructor($,lt,ft,St,Tt,Ct){this.startState=$,this.changes=lt,this.selection=ft,this.effects=St,this.annotations=Tt,this.scrollIntoView=Ct,this._doc=null,this._state=null,ft&&checkSelection(ft,lt.newLength),Tt.some(At=>At.type==Transaction.time)||(this.annotations=Tt.concat(Transaction.time.of(Date.now())))}static create($,lt,ft,St,Tt,Ct){return new Transaction($,lt,ft,St,Tt,Ct)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation($){for(let lt of this.annotations)if(lt.type==$)return lt.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent($){let lt=this.annotation(Transaction.userEvent);return!!(lt&&(lt==$||lt.length>$.length&&lt.slice(0,$.length)==$&&lt[$.length]=="."))}}Transaction.time=Annotation.define();Transaction.userEvent=Annotation.define();Transaction.addToHistory=Annotation.define();Transaction.remote=Annotation.define();function joinRanges(dt,$){let lt=[];for(let ft=0,St=0;;){let Tt,Ct;if(ft<dt.length&&(St==$.length||$[St]>=dt[ft]))Tt=dt[ft++],Ct=dt[ft++];else if(St<$.length)Tt=$[St++],Ct=$[St++];else return lt;!lt.length||lt[lt.length-1]<Tt?lt.push(Tt,Ct):lt[lt.length-1]<Ct&&(lt[lt.length-1]=Ct)}}function mergeTransaction(dt,$,lt){var ft;let St,Tt,Ct;return lt?(St=$.changes,Tt=ChangeSet.empty($.changes.length),Ct=dt.changes.compose($.changes)):(St=$.changes.map(dt.changes),Tt=dt.changes.mapDesc($.changes,!0),Ct=dt.changes.compose(St)),{changes:Ct,selection:$.selection?$.selection.map(Tt):(ft=dt.selection)===null||ft===void 0?void 0:ft.map(St),effects:StateEffect.mapEffects(dt.effects,St).concat(StateEffect.mapEffects($.effects,Tt)),annotations:dt.annotations.length?dt.annotations.concat($.annotations):$.annotations,scrollIntoView:dt.scrollIntoView||$.scrollIntoView}}function resolveTransactionInner(dt,$,lt){let ft=$.selection,St=asArray$1($.annotations);return $.userEvent&&(St=St.concat(Transaction.userEvent.of($.userEvent))),{changes:$.changes instanceof ChangeSet?$.changes:ChangeSet.of($.changes||[],lt,dt.facet(lineSeparator)),selection:ft&&(ft instanceof EditorSelection?ft:EditorSelection.single(ft.anchor,ft.head)),effects:asArray$1($.effects),annotations:St,scrollIntoView:!!$.scrollIntoView}}function resolveTransaction(dt,$,lt){let ft=resolveTransactionInner(dt,$.length?$[0]:{},dt.doc.length);$.length&&$[0].filter===!1&&(lt=!1);for(let Tt=1;Tt<$.length;Tt++){$[Tt].filter===!1&&(lt=!1);let Ct=!!$[Tt].sequential;ft=mergeTransaction(ft,resolveTransactionInner(dt,$[Tt],Ct?ft.changes.newLength:dt.doc.length),Ct)}let St=Transaction.create(dt,ft.changes,ft.selection,ft.effects,ft.annotations,ft.scrollIntoView);return extendTransaction(lt?filterTransaction(St):St)}function filterTransaction(dt){let $=dt.startState,lt=!0;for(let St of $.facet(changeFilter)){let Tt=St(dt);if(Tt===!1){lt=!1;break}Array.isArray(Tt)&&(lt=lt===!0?Tt:joinRanges(lt,Tt))}if(lt!==!0){let St,Tt;if(lt===!1)Tt=dt.changes.invertedDesc,St=ChangeSet.empty($.doc.length);else{let Ct=dt.changes.filter(lt);St=Ct.changes,Tt=Ct.filtered.mapDesc(Ct.changes).invertedDesc}dt=Transaction.create($,St,dt.selection&&dt.selection.map(Tt),StateEffect.mapEffects(dt.effects,Tt),dt.annotations,dt.scrollIntoView)}let ft=$.facet(transactionFilter);for(let St=ft.length-1;St>=0;St--){let Tt=ft[St](dt);Tt instanceof Transaction?dt=Tt:Array.isArray(Tt)&&Tt.length==1&&Tt[0]instanceof Transaction?dt=Tt[0]:dt=resolveTransaction($,asArray$1(Tt),!1)}return dt}function extendTransaction(dt){let $=dt.startState,lt=$.facet(transactionExtender),ft=dt;for(let St=lt.length-1;St>=0;St--){let Tt=lt[St](dt);Tt&&Object.keys(Tt).length&&(ft=mergeTransaction(ft,resolveTransactionInner($,Tt,dt.changes.newLength),!0))}return ft==dt?dt:Transaction.create($,dt.changes,dt.selection,ft.effects,ft.annotations,ft.scrollIntoView)}const none$2=[];function asArray$1(dt){return dt==null?none$2:Array.isArray(dt)?dt:[dt]}var CharCategory=function(dt){return dt[dt.Word=0]="Word",dt[dt.Space=1]="Space",dt[dt.Other=2]="Other",dt}(CharCategory||(CharCategory={}));const nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let wordChar;try{wordChar=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(dt){}function hasWordChar(dt){if(wordChar)return wordChar.test(dt);for(let $=0;$<dt.length;$++){let lt=dt[$];if(/\w/.test(lt)||lt>""&&(lt.toUpperCase()!=lt.toLowerCase()||nonASCIISingleCaseWordChar.test(lt)))return!0}return!1}function makeCategorizer(dt){return $=>{if(!/\S/.test($))return CharCategory.Space;if(hasWordChar($))return CharCategory.Word;for(let lt=0;lt<dt.length;lt++)if($.indexOf(dt[lt])>-1)return CharCategory.Word;return CharCategory.Other}}class EditorState{constructor($,lt,ft,St,Tt,Ct){this.config=$,this.doc=lt,this.selection=ft,this.values=St,this.status=$.statusTemplate.slice(),this.computeSlot=Tt,Ct&&(Ct._state=this);for(let At=0;At<this.config.dynamicSlots.length;At++)ensureAddr(this,At<<1);this.computeSlot=null}field($,lt=!0){let ft=this.config.address[$.id];if(ft==null){if(lt)throw new RangeError("Field is not present in this state");return}return ensureAddr(this,ft),getAddr(this,ft)}update(...$){return resolveTransaction(this,$,!0)}applyTransaction($){let lt=this.config,{base:ft,compartments:St}=lt;for(let Ct of $.effects)Ct.is(Compartment.reconfigure)?(lt&&(St=new Map,lt.compartments.forEach((At,Rt)=>St.set(Rt,At)),lt=null),St.set(Ct.value.compartment,Ct.value.extension)):Ct.is(StateEffect.reconfigure)?(lt=null,ft=Ct.value):Ct.is(StateEffect.appendConfig)&&(lt=null,ft=asArray$1(ft).concat(Ct.value));let Tt;lt?Tt=$.startState.values.slice():(lt=Configuration.resolve(ft,St,this),Tt=new EditorState(lt,this.doc,this.selection,lt.dynamicSlots.map(()=>null),(At,Rt)=>Rt.reconfigure(At,this),null).values),new EditorState(lt,$.newDoc,$.newSelection,Tt,(Ct,At)=>At.update(Ct,$),$)}replaceSelection($){return typeof $=="string"&&($=this.toText($)),this.changeByRange(lt=>({changes:{from:lt.from,to:lt.to,insert:$},range:EditorSelection.cursor(lt.from+$.length)}))}changeByRange($){let lt=this.selection,ft=$(lt.ranges[0]),St=this.changes(ft.changes),Tt=[ft.range],Ct=asArray$1(ft.effects);for(let At=1;At<lt.ranges.length;At++){let Rt=$(lt.ranges[At]),kt=this.changes(Rt.changes),Nt=kt.map(St);for(let Ut=0;Ut<At;Ut++)Tt[Ut]=Tt[Ut].map(Nt);let Bt=St.mapDesc(kt,!0);Tt.push(Rt.range.map(Bt)),St=St.compose(Nt),Ct=StateEffect.mapEffects(Ct,Nt).concat(StateEffect.mapEffects(asArray$1(Rt.effects),Bt))}return{changes:St,selection:EditorSelection.create(Tt,lt.mainIndex),effects:Ct}}changes($=[]){return $ instanceof ChangeSet?$:ChangeSet.of($,this.doc.length,this.facet(EditorState.lineSeparator))}toText($){return Text.of($.split(this.facet(EditorState.lineSeparator)||DefaultSplit))}sliceDoc($=0,lt=this.doc.length){return this.doc.sliceString($,lt,this.lineBreak)}facet($){let lt=this.config.address[$.id];return lt==null?$.default:(ensureAddr(this,lt),getAddr(this,lt))}toJSON($){let lt={doc:this.sliceDoc(),selection:this.selection.toJSON()};if($)for(let ft in $){let St=$[ft];St instanceof StateField&&this.config.address[St.id]!=null&&(lt[ft]=St.spec.toJSON(this.field($[ft]),this))}return lt}static fromJSON($,lt={},ft){if(!$||typeof $.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let St=[];if(ft){for(let Tt in ft)if(Object.prototype.hasOwnProperty.call($,Tt)){let Ct=ft[Tt],At=$[Tt];St.push(Ct.init(Rt=>Ct.spec.fromJSON(At,Rt)))}}return EditorState.create({doc:$.doc,selection:EditorSelection.fromJSON($.selection),extensions:lt.extensions?St.concat([lt.extensions]):St})}static create($={}){let lt=Configuration.resolve($.extensions||[],new Map),ft=$.doc instanceof Text?$.doc:Text.of(($.doc||"").split(lt.staticFacet(EditorState.lineSeparator)||DefaultSplit)),St=$.selection?$.selection instanceof EditorSelection?$.selection:EditorSelection.single($.selection.anchor,$.selection.head):EditorSelection.single(0);return checkSelection(St,ft.length),lt.staticFacet(allowMultipleSelections)||(St=St.asSingle()),new EditorState(lt,ft,St,lt.dynamicSlots.map(()=>null),(Tt,Ct)=>Ct.create(Tt),null)}get tabSize(){return this.facet(EditorState.tabSize)}get lineBreak(){return this.facet(EditorState.lineSeparator)||`
`}get readOnly(){return this.facet(readOnly)}phrase($,...lt){for(let ft of this.facet(EditorState.phrases))if(Object.prototype.hasOwnProperty.call(ft,$)){$=ft[$];break}return lt.length&&($=$.replace(/\$(\$|\d*)/g,(ft,St)=>{if(St=="$")return"$";let Tt=+(St||1);return!Tt||Tt>lt.length?ft:lt[Tt-1]})),$}languageDataAt($,lt,ft=-1){let St=[];for(let Tt of this.facet(languageData))for(let Ct of Tt(this,lt,ft))Object.prototype.hasOwnProperty.call(Ct,$)&&St.push(Ct[$]);return St}charCategorizer($){return makeCategorizer(this.languageDataAt("wordChars",$).join(""))}wordAt($){let{text:lt,from:ft,length:St}=this.doc.lineAt($),Tt=this.charCategorizer($),Ct=$-ft,At=$-ft;for(;Ct>0;){let Rt=findClusterBreak(lt,Ct,!1);if(Tt(lt.slice(Rt,Ct))!=CharCategory.Word)break;Ct=Rt}for(;At<St;){let Rt=findClusterBreak(lt,At);if(Tt(lt.slice(At,Rt))!=CharCategory.Word)break;At=Rt}return Ct==At?null:EditorSelection.range(Ct+ft,At+ft)}}EditorState.allowMultipleSelections=allowMultipleSelections;EditorState.tabSize=Facet.define({combine:dt=>dt.length?dt[0]:4});EditorState.lineSeparator=lineSeparator;EditorState.readOnly=readOnly;EditorState.phrases=Facet.define({compare(dt,$){let lt=Object.keys(dt),ft=Object.keys($);return lt.length==ft.length&&lt.every(St=>dt[St]==$[St])}});EditorState.languageData=languageData;EditorState.changeFilter=changeFilter;EditorState.transactionFilter=transactionFilter;EditorState.transactionExtender=transactionExtender;Compartment.reconfigure=StateEffect.define();function combineConfig(dt,$,lt={}){let ft={};for(let St of dt)for(let Tt of Object.keys(St)){let Ct=St[Tt],At=ft[Tt];if(At===void 0)ft[Tt]=Ct;else if(!(At===Ct||Ct===void 0))if(Object.hasOwnProperty.call(lt,Tt))ft[Tt]=lt[Tt](At,Ct);else throw new Error("Config merge conflict for field "+Tt)}for(let St in $)ft[St]===void 0&&(ft[St]=$[St]);return ft}class RangeValue{eq($){return this==$}range($,lt=$){return Range.create($,lt,this)}}RangeValue.prototype.startSide=RangeValue.prototype.endSide=0;RangeValue.prototype.point=!1;RangeValue.prototype.mapMode=MapMode.TrackDel;class Range{constructor($,lt,ft){this.from=$,this.to=lt,this.value=ft}static create($,lt,ft){return new Range($,lt,ft)}}function cmpRange(dt,$){return dt.from-$.from||dt.value.startSide-$.value.startSide}class Chunk{constructor($,lt,ft,St){this.from=$,this.to=lt,this.value=ft,this.maxPoint=St}get length(){return this.to[this.to.length-1]}findIndex($,lt,ft,St=0){let Tt=ft?this.to:this.from;for(let Ct=St,At=Tt.length;;){if(Ct==At)return Ct;let Rt=Ct+At>>1,kt=Tt[Rt]-$||(ft?this.value[Rt].endSide:this.value[Rt].startSide)-lt;if(Rt==Ct)return kt>=0?Ct:At;kt>=0?At=Rt:Ct=Rt+1}}between($,lt,ft,St){for(let Tt=this.findIndex(lt,-1e9,!0),Ct=this.findIndex(ft,1e9,!1,Tt);Tt<Ct;Tt++)if(St(this.from[Tt]+$,this.to[Tt]+$,this.value[Tt])===!1)return!1}map($,lt){let ft=[],St=[],Tt=[],Ct=-1,At=-1;for(let Rt=0;Rt<this.value.length;Rt++){let kt=this.value[Rt],Nt=this.from[Rt]+$,Bt=this.to[Rt]+$,Ut,zt;if(Nt==Bt){let Zt=lt.mapPos(Nt,kt.startSide,kt.mapMode);if(Zt==null||(Ut=zt=Zt,kt.startSide!=kt.endSide&&(zt=lt.mapPos(Nt,kt.endSide),zt<Ut)))continue}else if(Ut=lt.mapPos(Nt,kt.startSide),zt=lt.mapPos(Bt,kt.endSide),Ut>zt||Ut==zt&&kt.startSide>0&&kt.endSide<=0)continue;(zt-Ut||kt.endSide-kt.startSide)<0||(Ct<0&&(Ct=Ut),kt.point&&(At=Math.max(At,zt-Ut)),ft.push(kt),St.push(Ut-Ct),Tt.push(zt-Ct))}return{mapped:ft.length?new Chunk(St,Tt,ft,At):null,pos:Ct}}}class RangeSet{constructor($,lt,ft,St){this.chunkPos=$,this.chunk=lt,this.nextLayer=ft,this.maxPoint=St}static create($,lt,ft,St){return new RangeSet($,lt,ft,St)}get length(){let $=this.chunk.length-1;return $<0?0:Math.max(this.chunkEnd($),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let $=this.nextLayer.size;for(let lt of this.chunk)$+=lt.value.length;return $}chunkEnd($){return this.chunkPos[$]+this.chunk[$].length}update($){let{add:lt=[],sort:ft=!1,filterFrom:St=0,filterTo:Tt=this.length}=$,Ct=$.filter;if(lt.length==0&&!Ct)return this;if(ft&&(lt=lt.slice().sort(cmpRange)),this.isEmpty)return lt.length?RangeSet.of(lt):this;let At=new LayerCursor(this,null,-1).goto(0),Rt=0,kt=[],Nt=new RangeSetBuilder;for(;At.value||Rt<lt.length;)if(Rt<lt.length&&(At.from-lt[Rt].from||At.startSide-lt[Rt].value.startSide)>=0){let Bt=lt[Rt++];Nt.addInner(Bt.from,Bt.to,Bt.value)||kt.push(Bt)}else At.rangeIndex==1&&At.chunkIndex<this.chunk.length&&(Rt==lt.length||this.chunkEnd(At.chunkIndex)<lt[Rt].from)&&(!Ct||St>this.chunkEnd(At.chunkIndex)||Tt<this.chunkPos[At.chunkIndex])&&Nt.addChunk(this.chunkPos[At.chunkIndex],this.chunk[At.chunkIndex])?At.nextChunk():((!Ct||St>At.to||Tt<At.from||Ct(At.from,At.to,At.value))&&(Nt.addInner(At.from,At.to,At.value)||kt.push(Range.create(At.from,At.to,At.value))),At.next());return Nt.finishInner(this.nextLayer.isEmpty&&!kt.length?RangeSet.empty:this.nextLayer.update({add:kt,filter:Ct,filterFrom:St,filterTo:Tt}))}map($){if($.empty||this.isEmpty)return this;let lt=[],ft=[],St=-1;for(let Ct=0;Ct<this.chunk.length;Ct++){let At=this.chunkPos[Ct],Rt=this.chunk[Ct],kt=$.touchesRange(At,At+Rt.length);if(kt===!1)St=Math.max(St,Rt.maxPoint),lt.push(Rt),ft.push($.mapPos(At));else if(kt===!0){let{mapped:Nt,pos:Bt}=Rt.map(At,$);Nt&&(St=Math.max(St,Nt.maxPoint),lt.push(Nt),ft.push(Bt))}}let Tt=this.nextLayer.map($);return lt.length==0?Tt:new RangeSet(ft,lt,Tt||RangeSet.empty,St)}between($,lt,ft){if(!this.isEmpty){for(let St=0;St<this.chunk.length;St++){let Tt=this.chunkPos[St],Ct=this.chunk[St];if(lt>=Tt&&$<=Tt+Ct.length&&Ct.between(Tt,$-Tt,lt-Tt,ft)===!1)return}this.nextLayer.between($,lt,ft)}}iter($=0){return HeapCursor.from([this]).goto($)}get isEmpty(){return this.nextLayer==this}static iter($,lt=0){return HeapCursor.from($).goto(lt)}static compare($,lt,ft,St,Tt=-1){let Ct=$.filter(Bt=>Bt.maxPoint>0||!Bt.isEmpty&&Bt.maxPoint>=Tt),At=lt.filter(Bt=>Bt.maxPoint>0||!Bt.isEmpty&&Bt.maxPoint>=Tt),Rt=findSharedChunks(Ct,At,ft),kt=new SpanCursor(Ct,Rt,Tt),Nt=new SpanCursor(At,Rt,Tt);ft.iterGaps((Bt,Ut,zt)=>compare(kt,Bt,Nt,Ut,zt,St)),ft.empty&&ft.length==0&&compare(kt,0,Nt,0,0,St)}static eq($,lt,ft=0,St){St==null&&(St=1e9-1);let Tt=$.filter(Nt=>!Nt.isEmpty&&lt.indexOf(Nt)<0),Ct=lt.filter(Nt=>!Nt.isEmpty&&$.indexOf(Nt)<0);if(Tt.length!=Ct.length)return!1;if(!Tt.length)return!0;let At=findSharedChunks(Tt,Ct),Rt=new SpanCursor(Tt,At,0).goto(ft),kt=new SpanCursor(Ct,At,0).goto(ft);for(;;){if(Rt.to!=kt.to||!sameValues(Rt.active,kt.active)||Rt.point&&(!kt.point||!Rt.point.eq(kt.point)))return!1;if(Rt.to>St)return!0;Rt.next(),kt.next()}}static spans($,lt,ft,St,Tt=-1){let Ct=new SpanCursor($,null,Tt).goto(lt),At=lt,Rt=Ct.openStart;for(;;){let kt=Math.min(Ct.to,ft);if(Ct.point){let Nt=Ct.activeForPoint(Ct.to),Bt=Ct.pointFrom<lt?Nt.length+1:Math.min(Nt.length,Rt);St.point(At,kt,Ct.point,Nt,Bt,Ct.pointRank),Rt=Math.min(Ct.openEnd(kt),Nt.length)}else kt>At&&(St.span(At,kt,Ct.active,Rt),Rt=Ct.openEnd(kt));if(Ct.to>ft)return Rt+(Ct.point&&Ct.to>ft?1:0);At=Ct.to,Ct.next()}}static of($,lt=!1){let ft=new RangeSetBuilder;for(let St of $ instanceof Range?[$]:lt?lazySort($):$)ft.add(St.from,St.to,St.value);return ft.finish()}}RangeSet.empty=new RangeSet([],[],null,-1);function lazySort(dt){if(dt.length>1)for(let $=dt[0],lt=1;lt<dt.length;lt++){let ft=dt[lt];if(cmpRange($,ft)>0)return dt.slice().sort(cmpRange);$=ft}return dt}RangeSet.empty.nextLayer=RangeSet.empty;class RangeSetBuilder{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk($){this.chunks.push(new Chunk(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,$&&(this.from=[],this.to=[],this.value=[])}add($,lt,ft){this.addInner($,lt,ft)||(this.nextLayer||(this.nextLayer=new RangeSetBuilder)).add($,lt,ft)}addInner($,lt,ft){let St=$-this.lastTo||ft.startSide-this.last.endSide;if(St<=0&&($-this.lastFrom||ft.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return St<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=$),this.from.push($-this.chunkStart),this.to.push(lt-this.chunkStart),this.last=ft,this.lastFrom=$,this.lastTo=lt,this.value.push(ft),ft.point&&(this.maxPoint=Math.max(this.maxPoint,lt-$)),!0)}addChunk($,lt){if(($-this.lastTo||lt.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,lt.maxPoint),this.chunks.push(lt),this.chunkPos.push($);let ft=lt.value.length-1;return this.last=lt.value[ft],this.lastFrom=lt.from[ft]+$,this.lastTo=lt.to[ft]+$,!0}finish(){return this.finishInner(RangeSet.empty)}finishInner($){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return $;let lt=RangeSet.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner($):$,this.setMaxPoint);return this.from=null,lt}}function findSharedChunks(dt,$,lt){let ft=new Map;for(let Tt of dt)for(let Ct=0;Ct<Tt.chunk.length;Ct++)Tt.chunk[Ct].maxPoint<=0&&ft.set(Tt.chunk[Ct],Tt.chunkPos[Ct]);let St=new Set;for(let Tt of $)for(let Ct=0;Ct<Tt.chunk.length;Ct++){let At=ft.get(Tt.chunk[Ct]);At!=null&&(lt?lt.mapPos(At):At)==Tt.chunkPos[Ct]&&!(lt!=null&&lt.touchesRange(At,At+Tt.chunk[Ct].length))&&St.add(Tt.chunk[Ct])}return St}class LayerCursor{constructor($,lt,ft,St=0){this.layer=$,this.skip=lt,this.minPoint=ft,this.rank=St}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto($,lt=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner($,lt,!1),this}gotoInner($,lt,ft){for(;this.chunkIndex<this.layer.chunk.length;){let St=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(St)||this.layer.chunkEnd(this.chunkIndex)<$||St.maxPoint<this.minPoint))break;this.chunkIndex++,ft=!1}if(this.chunkIndex<this.layer.chunk.length){let St=this.layer.chunk[this.chunkIndex].findIndex($-this.layer.chunkPos[this.chunkIndex],lt,!0);(!ft||this.rangeIndex<St)&&this.setRangeIndex(St)}this.next()}forward($,lt){(this.to-$||this.endSide-lt)<0&&this.gotoInner($,lt,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let $=this.layer.chunkPos[this.chunkIndex],lt=this.layer.chunk[this.chunkIndex],ft=$+lt.from[this.rangeIndex];if(this.from=ft,this.to=$+lt.to[this.rangeIndex],this.value=lt.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex($){if($==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=$}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare($){return this.from-$.from||this.startSide-$.startSide||this.rank-$.rank||this.to-$.to||this.endSide-$.endSide}}class HeapCursor{constructor($){this.heap=$}static from($,lt=null,ft=-1){let St=[];for(let Tt=0;Tt<$.length;Tt++)for(let Ct=$[Tt];!Ct.isEmpty;Ct=Ct.nextLayer)Ct.maxPoint>=ft&&St.push(new LayerCursor(Ct,lt,ft,Tt));return St.length==1?St[0]:new HeapCursor(St)}get startSide(){return this.value?this.value.startSide:0}goto($,lt=-1e9){for(let ft of this.heap)ft.goto($,lt);for(let ft=this.heap.length>>1;ft>=0;ft--)heapBubble(this.heap,ft);return this.next(),this}forward($,lt){for(let ft of this.heap)ft.forward($,lt);for(let ft=this.heap.length>>1;ft>=0;ft--)heapBubble(this.heap,ft);(this.to-$||this.value.endSide-lt)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let $=this.heap[0];this.from=$.from,this.to=$.to,this.value=$.value,this.rank=$.rank,$.value&&$.next(),heapBubble(this.heap,0)}}}function heapBubble(dt,$){for(let lt=dt[$];;){let ft=($<<1)+1;if(ft>=dt.length)break;let St=dt[ft];if(ft+1<dt.length&&St.compare(dt[ft+1])>=0&&(St=dt[ft+1],ft++),lt.compare(St)<0)break;dt[ft]=lt,dt[$]=St,$=ft}}class SpanCursor{constructor($,lt,ft){this.minPoint=ft,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=HeapCursor.from($,lt,ft)}goto($,lt=-1e9){return this.cursor.goto($,lt),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=$,this.endSide=lt,this.openStart=-1,this.next(),this}forward($,lt){for(;this.minActive>-1&&(this.activeTo[this.minActive]-$||this.active[this.minActive].endSide-lt)<0;)this.removeActive(this.minActive);this.cursor.forward($,lt)}removeActive($){remove(this.active,$),remove(this.activeTo,$),remove(this.activeRank,$),this.minActive=findMinIndex(this.active,this.activeTo)}addActive($){let lt=0,{value:ft,to:St,rank:Tt}=this.cursor;for(;lt<this.activeRank.length&&this.activeRank[lt]<=Tt;)lt++;insert(this.active,lt,ft),insert(this.activeTo,lt,St),insert(this.activeRank,lt,Tt),$&&insert($,lt,this.cursor.from),this.minActive=findMinIndex(this.active,this.activeTo)}next(){let $=this.to,lt=this.point;this.point=null;let ft=this.openStart<0?[]:null;for(;;){let St=this.minActive;if(St>-1&&(this.activeTo[St]-this.cursor.from||this.active[St].endSide-this.cursor.startSide)<0){if(this.activeTo[St]>$){this.to=this.activeTo[St],this.endSide=this.active[St].endSide;break}this.removeActive(St),ft&&remove(ft,St)}else if(this.cursor.value)if(this.cursor.from>$){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let Tt=this.cursor.value;if(!Tt.point)this.addActive(ft),this.cursor.next();else if(lt&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=Tt,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=Tt.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(ft){this.openStart=0;for(let St=ft.length-1;St>=0&&ft[St]<$;St--)this.openStart++}}activeForPoint($){if(!this.active.length)return this.active;let lt=[];for(let ft=this.active.length-1;ft>=0&&!(this.activeRank[ft]<this.pointRank);ft--)(this.activeTo[ft]>$||this.activeTo[ft]==$&&this.active[ft].endSide>=this.point.endSide)&&lt.push(this.active[ft]);return lt.reverse()}openEnd($){let lt=0;for(let ft=this.activeTo.length-1;ft>=0&&this.activeTo[ft]>$;ft--)lt++;return lt}}function compare(dt,$,lt,ft,St,Tt){dt.goto($),lt.goto(ft);let Ct=ft+St,At=ft,Rt=ft-$;for(;;){let kt=dt.to+Rt-lt.to||dt.endSide-lt.endSide,Nt=kt<0?dt.to+Rt:lt.to,Bt=Math.min(Nt,Ct);if(dt.point||lt.point?dt.point&&lt.point&&(dt.point==lt.point||dt.point.eq(lt.point))&&sameValues(dt.activeForPoint(dt.to+Rt),lt.activeForPoint(lt.to))||Tt.comparePoint(At,Bt,dt.point,lt.point):Bt>At&&!sameValues(dt.active,lt.active)&&Tt.compareRange(At,Bt,dt.active,lt.active),Nt>Ct)break;At=Nt,kt<=0&&dt.next(),kt>=0&&lt.next()}}function sameValues(dt,$){if(dt.length!=$.length)return!1;for(let lt=0;lt<dt.length;lt++)if(dt[lt]!=$[lt]&&!dt[lt].eq($[lt]))return!1;return!0}function remove(dt,$){for(let lt=$,ft=dt.length-1;lt<ft;lt++)dt[lt]=dt[lt+1];dt.pop()}function insert(dt,$,lt){for(let ft=dt.length-1;ft>=$;ft--)dt[ft+1]=dt[ft];dt[$]=lt}function findMinIndex(dt,$){let lt=-1,ft=1e9;for(let St=0;St<$.length;St++)($[St]-ft||dt[St].endSide-dt[lt].endSide)<0&&(lt=St,ft=$[St]);return lt}function countColumn(dt,$,lt=dt.length){let ft=0;for(let St=0;St<lt;)dt.charCodeAt(St)==9?(ft+=$-ft%$,St++):(ft++,St=findClusterBreak(dt,St));return ft}function findColumn(dt,$,lt,ft){for(let St=0,Tt=0;;){if(Tt>=$)return St;if(St==dt.length)break;Tt+=dt.charCodeAt(St)==9?lt-Tt%lt:1,St=findClusterBreak(dt,St)}return ft===!0?-1:dt.length}const C="",COUNT=typeof Symbol>"u"?"__"+C:Symbol.for(C),SET=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),top=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class StyleModule{constructor($,lt){this.rules=[];let{finish:ft}=lt||{};function St(Ct){return/^@/.test(Ct)?[Ct]:Ct.split(/,\s*/)}function Tt(Ct,At,Rt,kt){let Nt=[],Bt=/^@(\w+)\b/.exec(Ct[0]),Ut=Bt&&Bt[1]=="keyframes";if(Bt&&At==null)return Rt.push(Ct[0]+";");for(let zt in At){let Zt=At[zt];if(/&/.test(zt))Tt(zt.split(/,\s*/).map(ln=>Ct.map(cn=>ln.replace(/&/,cn))).reduce((ln,cn)=>ln.concat(cn)),Zt,Rt);else if(Zt&&typeof Zt=="object"){if(!Bt)throw new RangeError("The value of a property ("+zt+") should be a primitive value.");Tt(St(zt),Zt,Nt,Ut)}else Zt!=null&&Nt.push(zt.replace(/_.*/,"").replace(/[A-Z]/g,ln=>"-"+ln.toLowerCase())+": "+Zt+";")}(Nt.length||Ut)&&Rt.push((ft&&!Bt&&!kt?Ct.map(ft):Ct).join(", ")+" {"+Nt.join(" ")+"}")}for(let Ct in $)Tt(St(Ct),$[Ct],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let $=top[COUNT]||1;return top[COUNT]=$+1,C+$.toString(36)}static mount($,lt){($[SET]||new StyleSet($)).mount(Array.isArray(lt)?lt:[lt])}}let adoptedSet=null;class StyleSet{constructor($){if(!$.head&&$.adoptedStyleSheets&&typeof CSSStyleSheet<"u"){if(adoptedSet)return $.adoptedStyleSheets=[adoptedSet.sheet].concat($.adoptedStyleSheets),$[SET]=adoptedSet;this.sheet=new CSSStyleSheet,$.adoptedStyleSheets=[this.sheet].concat($.adoptedStyleSheets),adoptedSet=this}else{this.styleTag=($.ownerDocument||$).createElement("style");let lt=$.head||$;lt.insertBefore(this.styleTag,lt.firstChild)}this.modules=[],$[SET]=this}mount($){let lt=this.sheet,ft=0,St=0;for(let Tt=0;Tt<$.length;Tt++){let Ct=$[Tt],At=this.modules.indexOf(Ct);if(At<St&&At>-1&&(this.modules.splice(At,1),St--,At=-1),At==-1){if(this.modules.splice(St++,0,Ct),lt)for(let Rt=0;Rt<Ct.rules.length;Rt++)lt.insertRule(Ct.rules[Rt],ft++)}else{for(;St<At;)ft+=this.modules[St++].rules.length;ft+=Ct.rules.length,St++}}if(!lt){let Tt="";for(let Ct=0;Ct<this.modules.length;Ct++)Tt+=this.modules[Ct].getRules()+`
`;this.styleTag.textContent=Tt}}}var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},chrome$1=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent),mac=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie$1=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),brokenModifierNames=mac||chrome$1&&+chrome$1[1]<57;for(var i=0;i<10;i++)base[48+i]=base[96+i]=String(i);for(var i=1;i<=24;i++)base[i+111]="F"+i;for(var i=65;i<=90;i++)base[i]=String.fromCharCode(i+32),shift[i]=String.fromCharCode(i);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(dt){var $=brokenModifierNames&&(dt.ctrlKey||dt.altKey||dt.metaKey)||ie$1&&dt.shiftKey&&dt.key&&dt.key.length==1||dt.key=="Unidentified",lt=!$&&dt.key||(dt.shiftKey?shift:base)[dt.keyCode]||dt.key||"Unidentified";return lt=="Esc"&&(lt="Escape"),lt=="Del"&&(lt="Delete"),lt=="Left"&&(lt="ArrowLeft"),lt=="Up"&&(lt="ArrowUp"),lt=="Right"&&(lt="ArrowRight"),lt=="Down"&&(lt="ArrowDown"),lt}function getSelection(dt){let $;return dt.nodeType==11?$=dt.getSelection?dt:dt.ownerDocument:$=dt,$.getSelection()}function contains(dt,$){return $?dt==$||dt.contains($.nodeType!=1?$.parentNode:$):!1}function deepActiveElement(dt){let $=dt.activeElement;for(;$&&$.shadowRoot;)$=$.shadowRoot.activeElement;return $}function hasSelection(dt,$){if(!$.anchorNode)return!1;try{return contains(dt,$.anchorNode)}catch{return!1}}function clientRectsFor(dt){return dt.nodeType==3?textRange(dt,0,dt.nodeValue.length).getClientRects():dt.nodeType==1?dt.getClientRects():[]}function isEquivalentPosition(dt,$,lt,ft){return lt?scanFor(dt,$,lt,ft,-1)||scanFor(dt,$,lt,ft,1):!1}function domIndex(dt){for(var $=0;;$++)if(dt=dt.previousSibling,!dt)return $}function scanFor(dt,$,lt,ft,St){for(;;){if(dt==lt&&$==ft)return!0;if($==(St<0?0:maxOffset(dt))){if(dt.nodeName=="DIV")return!1;let Tt=dt.parentNode;if(!Tt||Tt.nodeType!=1)return!1;$=domIndex(dt)+(St<0?0:1),dt=Tt}else if(dt.nodeType==1){if(dt=dt.childNodes[$+(St<0?-1:0)],dt.nodeType==1&&dt.contentEditable=="false")return!1;$=St<0?maxOffset(dt):0}else return!1}}function maxOffset(dt){return dt.nodeType==3?dt.nodeValue.length:dt.childNodes.length}const Rect0={left:0,right:0,top:0,bottom:0};function flattenRect(dt,$){let lt=$?dt.left:dt.right;return{left:lt,right:lt,top:dt.top,bottom:dt.bottom}}function windowRect(dt){return{left:0,right:dt.innerWidth,top:0,bottom:dt.innerHeight}}function scrollRectIntoView(dt,$,lt,ft,St,Tt,Ct,At){let Rt=dt.ownerDocument,kt=Rt.defaultView||window;for(let Nt=dt;Nt;)if(Nt.nodeType==1){let Bt,Ut=Nt==Rt.body;if(Ut)Bt=windowRect(kt);else{if(Nt.scrollHeight<=Nt.clientHeight&&Nt.scrollWidth<=Nt.clientWidth){Nt=Nt.assignedSlot||Nt.parentNode;continue}let ln=Nt.getBoundingClientRect();Bt={left:ln.left,right:ln.left+Nt.clientWidth,top:ln.top,bottom:ln.top+Nt.clientHeight}}let zt=0,Zt=0;if(St=="nearest")$.top<Bt.top?(Zt=-(Bt.top-$.top+Ct),lt>0&&$.bottom>Bt.bottom+Zt&&(Zt=$.bottom-Bt.bottom+Zt+Ct)):$.bottom>Bt.bottom&&(Zt=$.bottom-Bt.bottom+Ct,lt<0&&$.top-Zt<Bt.top&&(Zt=-(Bt.top+Zt-$.top+Ct)));else{let ln=$.bottom-$.top,cn=Bt.bottom-Bt.top;Zt=(St=="center"&&ln<=cn?$.top+ln/2-cn/2:St=="start"||St=="center"&&lt<0?$.top-Ct:$.bottom-cn+Ct)-Bt.top}if(ft=="nearest"?$.left<Bt.left?(zt=-(Bt.left-$.left+Tt),lt>0&&$.right>Bt.right+zt&&(zt=$.right-Bt.right+zt+Tt)):$.right>Bt.right&&(zt=$.right-Bt.right+Tt,lt<0&&$.left<Bt.left+zt&&(zt=-(Bt.left+zt-$.left+Tt))):zt=(ft=="center"?$.left+($.right-$.left)/2-(Bt.right-Bt.left)/2:ft=="start"==At?$.left-Tt:$.right-(Bt.right-Bt.left)+Tt)-Bt.left,zt||Zt)if(Ut)kt.scrollBy(zt,Zt);else{let ln=0,cn=0;if(Zt){let hn=Nt.scrollTop;Nt.scrollTop+=Zt,cn=Nt.scrollTop-hn}if(zt){let hn=Nt.scrollLeft;Nt.scrollLeft+=zt,ln=Nt.scrollLeft-hn}$={left:$.left-ln,top:$.top-cn,right:$.right-ln,bottom:$.bottom-cn},ln&&Math.abs(ln-zt)<1&&(ft="nearest"),cn&&Math.abs(cn-Zt)<1&&(St="nearest")}if(Ut)break;Nt=Nt.assignedSlot||Nt.parentNode}else if(Nt.nodeType==11)Nt=Nt.host;else break}function scrollableParent(dt){let $=dt.ownerDocument;for(let lt=dt.parentNode;lt&&lt!=$.body;)if(lt.nodeType==1){if(lt.scrollHeight>lt.clientHeight||lt.scrollWidth>lt.clientWidth)return lt;lt=lt.assignedSlot||lt.parentNode}else if(lt.nodeType==11)lt=lt.host;else break;return null}class DOMSelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq($){return this.anchorNode==$.anchorNode&&this.anchorOffset==$.anchorOffset&&this.focusNode==$.focusNode&&this.focusOffset==$.focusOffset}setRange($){this.set($.anchorNode,$.anchorOffset,$.focusNode,$.focusOffset)}set($,lt,ft,St){this.anchorNode=$,this.anchorOffset=lt,this.focusNode=ft,this.focusOffset=St}}let preventScrollSupported=null;function focusPreventScroll(dt){if(dt.setActive)return dt.setActive();if(preventScrollSupported)return dt.focus(preventScrollSupported);let $=[];for(let lt=dt;lt&&($.push(lt,lt.scrollTop,lt.scrollLeft),lt!=lt.ownerDocument);lt=lt.parentNode);if(dt.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),!preventScrollSupported){preventScrollSupported=!1;for(let lt=0;lt<$.length;){let ft=$[lt++],St=$[lt++],Tt=$[lt++];ft.scrollTop!=St&&(ft.scrollTop=St),ft.scrollLeft!=Tt&&(ft.scrollLeft=Tt)}}}let scratchRange;function textRange(dt,$,lt=$){let ft=scratchRange||(scratchRange=document.createRange());return ft.setEnd(dt,lt),ft.setStart(dt,$),ft}function dispatchKey(dt,$,lt){let ft={key:$,code:$,keyCode:lt,which:lt,cancelable:!0},St=new KeyboardEvent("keydown",ft);St.synthetic=!0,dt.dispatchEvent(St);let Tt=new KeyboardEvent("keyup",ft);return Tt.synthetic=!0,dt.dispatchEvent(Tt),St.defaultPrevented||Tt.defaultPrevented}function getRoot(dt){for(;dt;){if(dt&&(dt.nodeType==9||dt.nodeType==11&&dt.host))return dt;dt=dt.assignedSlot||dt.parentNode}return null}function clearAttributes(dt){for(;dt.attributes.length;)dt.removeAttributeNode(dt.attributes[0])}function atElementStart(dt,$){let lt=$.focusNode,ft=$.focusOffset;if(!lt||$.anchorNode!=lt||$.anchorOffset!=ft)return!1;for(;;)if(ft){if(lt.nodeType!=1)return!1;let St=lt.childNodes[ft-1];St.contentEditable=="false"?ft--:(lt=St,ft=maxOffset(lt))}else{if(lt==dt)return!0;ft=domIndex(lt),lt=lt.parentNode}}class DOMPos{constructor($,lt,ft=!0){this.node=$,this.offset=lt,this.precise=ft}static before($,lt){return new DOMPos($.parentNode,domIndex($),lt)}static after($,lt){return new DOMPos($.parentNode,domIndex($)+1,lt)}}const noChildren=[];class ContentView{constructor(){this.parent=null,this.dom=null,this.dirty=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore($){let lt=this.posAtStart;for(let ft of this.children){if(ft==$)return lt;lt+=ft.length+ft.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter($){return this.posBefore($)+$.length}coordsAt($,lt){return null}sync($,lt){if(this.dirty&2){let ft=this.dom,St=null,Tt;for(let Ct of this.children){if(Ct.dirty){if(!Ct.dom&&(Tt=St?St.nextSibling:ft.firstChild)){let At=ContentView.get(Tt);(!At||!At.parent&&At.canReuseDOM(Ct))&&Ct.reuseDOM(Tt)}Ct.sync($,lt),Ct.dirty=0}if(Tt=St?St.nextSibling:ft.firstChild,lt&&!lt.written&&lt.node==ft&&Tt!=Ct.dom&&(lt.written=!0),Ct.dom.parentNode==ft)for(;Tt&&Tt!=Ct.dom;)Tt=rm$1(Tt);else ft.insertBefore(Ct.dom,Tt);St=Ct.dom}for(Tt=St?St.nextSibling:ft.firstChild,Tt&&lt&&lt.node==ft&&(lt.written=!0);Tt;)Tt=rm$1(Tt)}else if(this.dirty&1)for(let ft of this.children)ft.dirty&&(ft.sync($,lt),ft.dirty=0)}reuseDOM($){}localPosFromDOM($,lt){let ft;if($==this.dom)ft=this.dom.childNodes[lt];else{let St=maxOffset($)==0?0:lt==0?-1:1;for(;;){let Tt=$.parentNode;if(Tt==this.dom)break;St==0&&Tt.firstChild!=Tt.lastChild&&($==Tt.firstChild?St=-1:St=1),$=Tt}St<0?ft=$:ft=$.nextSibling}if(ft==this.dom.firstChild)return 0;for(;ft&&!ContentView.get(ft);)ft=ft.nextSibling;if(!ft)return this.length;for(let St=0,Tt=0;;St++){let Ct=this.children[St];if(Ct.dom==ft)return Tt;Tt+=Ct.length+Ct.breakAfter}}domBoundsAround($,lt,ft=0){let St=-1,Tt=-1,Ct=-1,At=-1;for(let Rt=0,kt=ft,Nt=ft;Rt<this.children.length;Rt++){let Bt=this.children[Rt],Ut=kt+Bt.length;if(kt<$&&Ut>lt)return Bt.domBoundsAround($,lt,kt);if(Ut>=$&&St==-1&&(St=Rt,Tt=kt),kt>lt&&Bt.dom.parentNode==this.dom){Ct=Rt,At=Nt;break}Nt=Ut,kt=Ut+Bt.breakAfter}return{from:Tt,to:At<0?ft+this.length:At,startDOM:(St?this.children[St-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:Ct<this.children.length&&Ct>=0?this.children[Ct].dom:null}}markDirty($=!1){this.dirty|=2,this.markParentsDirty($)}markParentsDirty($){for(let lt=this.parent;lt;lt=lt.parent){if($&&(lt.dirty|=2),lt.dirty&1)return;lt.dirty|=1,$=!1}}setParent($){this.parent!=$&&(this.parent=$,this.dirty&&this.markParentsDirty(!0))}setDOM($){this.dom&&(this.dom.cmView=null),this.dom=$,$.cmView=this}get rootView(){for(let $=this;;){let lt=$.parent;if(!lt)return $;$=lt}}replaceChildren($,lt,ft=noChildren){this.markDirty();for(let St=$;St<lt;St++){let Tt=this.children[St];Tt.parent==this&&Tt.destroy()}this.children.splice($,lt-$,...ft);for(let St=0;St<ft.length;St++)ft[St].setParent(this)}ignoreMutation($){return!1}ignoreEvent($){return!1}childCursor($=this.length){return new ChildCursor(this.children,$,this.children.length)}childPos($,lt=1){return this.childCursor().findPos($,lt)}toString(){let $=this.constructor.name.replace("View","");return $+(this.children.length?"("+this.children.join()+")":this.length?"["+($=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get($){return $.cmView}get isEditable(){return!0}get isWidget(){return!1}merge($,lt,ft,St,Tt,Ct){return!1}become($){return!1}canReuseDOM($){return $.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}}ContentView.prototype.breakAfter=0;function rm$1(dt){let $=dt.nextSibling;return dt.parentNode.removeChild(dt),$}class ChildCursor{constructor($,lt,ft){this.children=$,this.pos=lt,this.i=ft,this.off=0}findPos($,lt=1){for(;;){if($>this.pos||$==this.pos&&(lt>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=$-this.pos,this;let ft=this.children[--this.i];this.pos-=ft.length+ft.breakAfter}}}function replaceRange(dt,$,lt,ft,St,Tt,Ct,At,Rt){let{children:kt}=dt,Nt=kt.length?kt[$]:null,Bt=Tt.length?Tt[Tt.length-1]:null,Ut=Bt?Bt.breakAfter:Ct;if(!($==ft&&Nt&&!Ct&&!Ut&&Tt.length<2&&Nt.merge(lt,St,Tt.length?Bt:null,lt==0,At,Rt))){if(ft<kt.length){let zt=kt[ft];zt&&St<zt.length?($==ft&&(zt=zt.split(St),St=0),!Ut&&Bt&&zt.merge(0,St,Bt,!0,0,Rt)?Tt[Tt.length-1]=zt:(St&&zt.merge(0,St,null,!1,0,Rt),Tt.push(zt))):zt!=null&&zt.breakAfter&&(Bt?Bt.breakAfter=1:Ct=1),ft++}for(Nt&&(Nt.breakAfter=Ct,lt>0&&(!Ct&&Tt.length&&Nt.merge(lt,Nt.length,Tt[0],!1,At,0)?Nt.breakAfter=Tt.shift().breakAfter:(lt<Nt.length||Nt.children.length&&Nt.children[Nt.children.length-1].length==0)&&Nt.merge(lt,Nt.length,null,!1,At,0),$++));$<ft&&Tt.length;)if(kt[ft-1].become(Tt[Tt.length-1]))ft--,Tt.pop(),Rt=Tt.length?0:At;else if(kt[$].become(Tt[0]))$++,Tt.shift(),At=Tt.length?0:Rt;else break;!Tt.length&&$&&ft<kt.length&&!kt[$-1].breakAfter&&kt[ft].merge(0,0,kt[$-1],!1,At,Rt)&&$--,($<ft||Tt.length)&&dt.replaceChildren($,ft,Tt)}}function mergeChildrenInto(dt,$,lt,ft,St,Tt){let Ct=dt.childCursor(),{i:At,off:Rt}=Ct.findPos(lt,1),{i:kt,off:Nt}=Ct.findPos($,-1),Bt=$-lt;for(let Ut of ft)Bt+=Ut.length;dt.length+=Bt,replaceRange(dt,kt,Nt,At,Rt,ft,0,St,Tt)}let nav=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},doc=typeof document<"u"?document:{documentElement:{style:{}}};const ie_edge=/Edge\/(\d+)/.exec(nav.userAgent),ie_upto10=/MSIE \d/.test(nav.userAgent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nav.userAgent),ie=!!(ie_upto10||ie_11up||ie_edge),gecko=!ie&&/gecko\/(\d+)/i.test(nav.userAgent),chrome=!ie&&/Chrome\/(\d+)/.exec(nav.userAgent),webkit="webkitFontSmoothing"in doc.documentElement.style,safari=!ie&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(nav.userAgent)||nav.maxTouchPoints>2);var browser={mac:ios||/Mac/.test(nav.platform),windows:/Win/.test(nav.platform),linux:/Linux|X11/.test(nav.platform),ie,ie_version:ie_upto10?doc.documentMode||6:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko,gecko_version:gecko?+(/Firefox\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,chrome:!!chrome,chrome_version:chrome?+chrome[1]:0,ios,android:/Android\b/.test(nav.userAgent),webkit,safari,webkit_version:webkit?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:doc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const MaxJoinLen=256;class TextView extends ContentView{constructor($){super(),this.text=$}get length(){return this.text.length}createDOM($){this.setDOM($||document.createTextNode(this.text))}sync($,lt){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(lt&&lt.node==this.dom&&(lt.written=!0),this.dom.nodeValue=this.text)}reuseDOM($){$.nodeType==3&&this.createDOM($)}merge($,lt,ft){return ft&&(!(ft instanceof TextView)||this.length-(lt-$)+ft.length>MaxJoinLen)?!1:(this.text=this.text.slice(0,$)+(ft?ft.text:"")+this.text.slice(lt),this.markDirty(),!0)}split($){let lt=new TextView(this.text.slice($));return this.text=this.text.slice(0,$),this.markDirty(),lt}localPosFromDOM($,lt){return $==this.dom?lt:lt?this.text.length:0}domAtPos($){return new DOMPos(this.dom,$)}domBoundsAround($,lt,ft){return{from:ft,to:ft+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt($,lt){return textCoords(this.dom,$,lt)}}class MarkView extends ContentView{constructor($,lt=[],ft=0){super(),this.mark=$,this.children=lt,this.length=ft;for(let St of lt)St.setParent(this)}setAttrs($){if(clearAttributes($),this.mark.class&&($.className=this.mark.class),this.mark.attrs)for(let lt in this.mark.attrs)$.setAttribute(lt,this.mark.attrs[lt]);return $}reuseDOM($){$.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM($),this.dirty|=6)}sync($,lt){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync($,lt)}merge($,lt,ft,St,Tt,Ct){return ft&&(!(ft instanceof MarkView&&ft.mark.eq(this.mark))||$&&Tt<=0||lt<this.length&&Ct<=0)?!1:(mergeChildrenInto(this,$,lt,ft?ft.children:[],Tt-1,Ct-1),this.markDirty(),!0)}split($){let lt=[],ft=0,St=-1,Tt=0;for(let At of this.children){let Rt=ft+At.length;Rt>$&&lt.push(ft<$?At.split($-ft):At),St<0&&ft>=$&&(St=Tt),ft=Rt,Tt++}let Ct=this.length-$;return this.length=$,St>-1&&(this.children.length=St,this.markDirty()),new MarkView(this.mark,lt,Ct)}domAtPos($){return inlineDOMAtPos(this,$)}coordsAt($,lt){return coordsInChildren(this,$,lt)}}function textCoords(dt,$,lt){let ft=dt.nodeValue.length;$>ft&&($=ft);let St=$,Tt=$,Ct=0;$==0&&lt<0||$==ft&&lt>=0?browser.chrome||browser.gecko||($?(St--,Ct=1):Tt<ft&&(Tt++,Ct=-1)):lt<0?St--:Tt<ft&&Tt++;let At=textRange(dt,St,Tt).getClientRects();if(!At.length)return Rect0;let Rt=At[(Ct?Ct<0:lt>=0)?0:At.length-1];return browser.safari&&!Ct&&Rt.width==0&&(Rt=Array.prototype.find.call(At,kt=>kt.width)||Rt),Ct?flattenRect(Rt,Ct<0):Rt||null}class WidgetView extends ContentView{constructor($,lt,ft){super(),this.widget=$,this.length=lt,this.side=ft,this.prevWidget=null}static create($,lt,ft){return new($.customView||WidgetView)($,lt,ft)}split($){let lt=WidgetView.create(this.widget,this.length-$,this.side);return this.length-=$,lt}sync($){(!this.dom||!this.widget.updateDOM(this.dom,$))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM($)),this.dom.contentEditable="false")}getSide(){return this.side}merge($,lt,ft,St,Tt,Ct){return ft&&(!(ft instanceof WidgetView)||!this.widget.compare(ft.widget)||$>0&&Tt<=0||lt<this.length&&Ct<=0)?!1:(this.length=$+(ft?ft.length:0)+(this.length-lt),!0)}become($){return $.length==this.length&&$ instanceof WidgetView&&$.side==this.side&&this.widget.constructor==$.widget.constructor?(this.widget.eq($.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=$.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent($){return this.widget.ignoreEvent($)}get overrideDOMText(){if(this.length==0)return Text.empty;let $=this;for(;$.parent;)$=$.parent;let{view:lt}=$,ft=lt&&lt.state.doc,St=this.posAtStart;return ft?ft.slice(St,St+this.length):Text.empty}domAtPos($){return $==0?DOMPos.before(this.dom):DOMPos.after(this.dom,$==this.length)}domBoundsAround(){return null}coordsAt($,lt){let ft=this.dom.getClientRects(),St=null;if(!ft.length)return Rect0;for(let Tt=$>0?ft.length-1:0;St=ft[Tt],!($>0?Tt==0:Tt==ft.length-1||St.top<St.bottom);Tt+=$>0?-1:1);return this.length?St:flattenRect(St,this.side>0)}get isEditable(){return!1}get isWidget(){return!0}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class CompositionView extends WidgetView{domAtPos($){let{topView:lt,text:ft}=this.widget;return lt?scanCompositionTree($,0,lt,ft,(St,Tt)=>St.domAtPos(Tt),St=>new DOMPos(ft,Math.min(St,ft.nodeValue.length))):new DOMPos(ft,Math.min($,ft.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM($,lt){let{topView:ft,text:St}=this.widget;return ft?posFromDOMInCompositionTree($,lt,ft,St):Math.min(lt,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt($,lt){let{topView:ft,text:St}=this.widget;return ft?scanCompositionTree($,lt,ft,St,(Tt,Ct,At)=>Tt.coordsAt(Ct,At),(Tt,Ct)=>textCoords(St,Tt,Ct)):textCoords(St,$,lt)}destroy(){var $;super.destroy(),($=this.widget.topView)===null||$===void 0||$.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}}function scanCompositionTree(dt,$,lt,ft,St,Tt){if(lt instanceof MarkView){for(let Ct=lt.dom.firstChild;Ct;Ct=Ct.nextSibling){let At=ContentView.get(Ct);if(!At)return Tt(dt,$);let Rt=contains(Ct,ft),kt=At.length+(Rt?ft.nodeValue.length:0);if(dt<kt||dt==kt&&At.getSide()<=0)return Rt?scanCompositionTree(dt,$,At,ft,St,Tt):St(At,dt,$);dt-=kt}return St(lt,lt.length,-1)}else return lt.dom==ft?Tt(dt,$):St(lt,dt,$)}function posFromDOMInCompositionTree(dt,$,lt,ft){if(lt instanceof MarkView)for(let St of lt.children){let Tt=0,Ct=contains(St.dom,ft);if(contains(St.dom,dt))return Tt+(Ct?posFromDOMInCompositionTree(dt,$,St,ft):St.localPosFromDOM(dt,$));Tt+=Ct?ft.nodeValue.length:St.length}else if(lt.dom==ft)return Math.min($,ft.nodeValue.length);return lt.localPosFromDOM(dt,$)}class WidgetBufferView extends ContentView{constructor($){super(),this.side=$}get length(){return 0}merge(){return!1}become($){return $ instanceof WidgetBufferView&&$.side==this.side}split(){return new WidgetBufferView(this.side)}sync(){if(!this.dom){let $=document.createElement("img");$.className="cm-widgetBuffer",$.setAttribute("aria-hidden","true"),this.setDOM($)}}getSide(){return this.side}domAtPos($){return DOMPos.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt($){let lt=this.dom.getBoundingClientRect(),ft=inlineSiblingRect(this,this.side>0?-1:1);return ft&&ft.top<lt.bottom&&ft.bottom>lt.top?{left:lt.left,right:lt.right,top:ft.top,bottom:ft.bottom}:lt}get overrideDOMText(){return Text.empty}}TextView.prototype.children=WidgetView.prototype.children=WidgetBufferView.prototype.children=noChildren;function inlineSiblingRect(dt,$){let lt=dt.parent,ft=lt?lt.children.indexOf(dt):-1;for(;lt&&ft>=0;)if($<0?ft>0:ft<lt.children.length){let St=lt.children[ft+$];if(St instanceof TextView){let Tt=St.coordsAt($<0?St.length:0,$);if(Tt)return Tt}ft+=$}else if(lt instanceof MarkView&&lt.parent)ft=lt.parent.children.indexOf(lt)+($<0?0:1),lt=lt.parent;else{let St=lt.dom.lastChild;if(St&&St.nodeName=="BR")return St.getClientRects()[0];break}}function inlineDOMAtPos(dt,$){let lt=dt.dom,{children:ft}=dt,St=0;for(let Tt=0;St<ft.length;St++){let Ct=ft[St],At=Tt+Ct.length;if(!(At==Tt&&Ct.getSide()<=0)){if($>Tt&&$<At&&Ct.dom.parentNode==lt)return Ct.domAtPos($-Tt);if($<=Tt)break;Tt=At}}for(let Tt=St;Tt>0;Tt--){let Ct=ft[Tt-1];if(Ct.dom.parentNode==lt)return Ct.domAtPos(Ct.length)}for(let Tt=St;Tt<ft.length;Tt++){let Ct=ft[Tt];if(Ct.dom.parentNode==lt)return Ct.domAtPos(0)}return new DOMPos(lt,0)}function joinInlineInto(dt,$,lt){let ft,{children:St}=dt;lt>0&&$ instanceof MarkView&&St.length&&(ft=St[St.length-1])instanceof MarkView&&ft.mark.eq($.mark)?joinInlineInto(ft,$.children[0],lt-1):(St.push($),$.setParent(dt)),dt.length+=$.length}function coordsInChildren(dt,$,lt){let ft=null,St=-1,Tt=null,Ct=-1;function At(kt,Nt){for(let Bt=0,Ut=0;Bt<kt.children.length&&Ut<=Nt;Bt++){let zt=kt.children[Bt],Zt=Ut+zt.length;Zt>=Nt&&(zt.children.length?At(zt,Nt-Ut):!Tt&&(Zt>Nt||Ut==Zt&&zt.getSide()>0)?(Tt=zt,Ct=Nt-Ut):(Ut<Nt||Ut==Zt&&zt.getSide()<0)&&(ft=zt,St=Nt-Ut)),Ut=Zt}}At(dt,$);let Rt=(lt<0?ft:Tt)||ft||Tt;return Rt?Rt.coordsAt(Math.max(0,Rt==ft?St:Ct),lt):fallbackRect(dt)}function fallbackRect(dt){let $=dt.dom.lastChild;if(!$)return dt.dom.getBoundingClientRect();let lt=clientRectsFor($);return lt[lt.length-1]||null}function combineAttrs(dt,$){for(let lt in dt)lt=="class"&&$.class?$.class+=" "+dt.class:lt=="style"&&$.style?$.style+=";"+dt.style:$[lt]=dt[lt];return $}function attrsEq(dt,$){if(dt==$)return!0;if(!dt||!$)return!1;let lt=Object.keys(dt),ft=Object.keys($);if(lt.length!=ft.length)return!1;for(let St of lt)if(ft.indexOf(St)==-1||dt[St]!==$[St])return!1;return!0}function updateAttrs(dt,$,lt){let ft=null;if($)for(let St in $)lt&&St in lt||dt.removeAttribute(ft=St);if(lt)for(let St in lt)$&&$[St]==lt[St]||dt.setAttribute(ft=St,lt[St]);return!!ft}class WidgetType{eq($){return!1}updateDOM($,lt){return!1}compare($){return this==$||this.constructor==$.constructor&&this.eq($)}get estimatedHeight(){return-1}ignoreEvent($){return!0}get customView(){return null}destroy($){}}var BlockType=function(dt){return dt[dt.Text=0]="Text",dt[dt.WidgetBefore=1]="WidgetBefore",dt[dt.WidgetAfter=2]="WidgetAfter",dt[dt.WidgetRange=3]="WidgetRange",dt}(BlockType||(BlockType={}));class Decoration extends RangeValue{constructor($,lt,ft,St){super(),this.startSide=$,this.endSide=lt,this.widget=ft,this.spec=St}get heightRelevant(){return!1}static mark($){return new MarkDecoration($)}static widget($){let lt=$.side||0,ft=!!$.block;return lt+=ft?lt>0?3e8:-4e8:lt>0?1e8:-1e8,new PointDecoration($,lt,lt,ft,$.widget||null,!1)}static replace($){let lt=!!$.block,ft,St;if($.isBlockGap)ft=-5e8,St=4e8;else{let{start:Tt,end:Ct}=getInclusive($,lt);ft=(Tt?lt?-3e8:-1:5e8)-1,St=(Ct?lt?2e8:1:-6e8)+1}return new PointDecoration($,ft,St,lt,$.widget||null,!0)}static line($){return new LineDecoration($)}static set($,lt=!1){return RangeSet.of($,lt)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Decoration.none=RangeSet.empty;class MarkDecoration extends Decoration{constructor($){let{start:lt,end:ft}=getInclusive($);super(lt?-1:5e8,ft?1:-6e8,null,$),this.tagName=$.tagName||"span",this.class=$.class||"",this.attrs=$.attributes||null}eq($){return this==$||$ instanceof MarkDecoration&&this.tagName==$.tagName&&this.class==$.class&&attrsEq(this.attrs,$.attrs)}range($,lt=$){if($>=lt)throw new RangeError("Mark decorations may not be empty");return super.range($,lt)}}MarkDecoration.prototype.point=!1;class LineDecoration extends Decoration{constructor($){super(-2e8,-2e8,null,$)}eq($){return $ instanceof LineDecoration&&this.spec.class==$.spec.class&&attrsEq(this.spec.attributes,$.spec.attributes)}range($,lt=$){if(lt!=$)throw new RangeError("Line decoration ranges must be zero-length");return super.range($,lt)}}LineDecoration.prototype.mapMode=MapMode.TrackBefore;LineDecoration.prototype.point=!0;class PointDecoration extends Decoration{constructor($,lt,ft,St,Tt,Ct){super(lt,ft,Tt,$),this.block=St,this.isReplace=Ct,this.mapMode=St?lt<=0?MapMode.TrackBefore:MapMode.TrackAfter:MapMode.TrackDel}get type(){return this.startSide<this.endSide?BlockType.WidgetRange:this.startSide<=0?BlockType.WidgetBefore:BlockType.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq($){return $ instanceof PointDecoration&&widgetsEq(this.widget,$.widget)&&this.block==$.block&&this.startSide==$.startSide&&this.endSide==$.endSide}range($,lt=$){if(this.isReplace&&($>lt||$==lt&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&lt!=$)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range($,lt)}}PointDecoration.prototype.point=!0;function getInclusive(dt,$=!1){let{inclusiveStart:lt,inclusiveEnd:ft}=dt;return lt==null&&(lt=dt.inclusive),ft==null&&(ft=dt.inclusive),{start:lt??$,end:ft??$}}function widgetsEq(dt,$){return dt==$||!!(dt&&$&&dt.compare($))}function addRange(dt,$,lt,ft=0){let St=lt.length-1;St>=0&&lt[St]+ft>=dt?lt[St]=Math.max(lt[St],$):lt.push(dt,$)}class LineView extends ContentView{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge($,lt,ft,St,Tt,Ct){if(ft){if(!(ft instanceof LineView))return!1;this.dom||ft.transferDOM(this)}return St&&this.setDeco(ft?ft.attrs:null),mergeChildrenInto(this,$,lt,ft?ft.children:[],Tt,Ct),!0}split($){let lt=new LineView;if(lt.breakAfter=this.breakAfter,this.length==0)return lt;let{i:ft,off:St}=this.childPos($);St&&(lt.append(this.children[ft].split(St),0),this.children[ft].merge(St,this.children[ft].length,null,!1,0,0),ft++);for(let Tt=ft;Tt<this.children.length;Tt++)lt.append(this.children[Tt],0);for(;ft>0&&this.children[ft-1].length==0;)this.children[--ft].destroy();return this.children.length=ft,this.markDirty(),this.length=$,lt}transferDOM($){this.dom&&(this.markDirty(),$.setDOM(this.dom),$.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco($){attrsEq(this.attrs,$)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=$)}append($,lt){joinInlineInto(this,$,lt)}addLineDeco($){let lt=$.spec.attributes,ft=$.spec.class;lt&&(this.attrs=combineAttrs(lt,this.attrs||{})),ft&&(this.attrs=combineAttrs({class:ft},this.attrs||{}))}domAtPos($){return inlineDOMAtPos(this,$)}reuseDOM($){$.nodeName=="DIV"&&(this.setDOM($),this.dirty|=6)}sync($,lt){var ft;this.dom?this.dirty&4&&(clearAttributes(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(updateAttrs(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync($,lt);let St=this.dom.lastChild;for(;St&&ContentView.get(St)instanceof MarkView;)St=St.lastChild;if(!St||!this.length||St.nodeName!="BR"&&((ft=ContentView.get(St))===null||ft===void 0?void 0:ft.isEditable)==!1&&(!browser.ios||!this.children.some(Tt=>Tt instanceof TextView))){let Tt=document.createElement("BR");Tt.cmIgnore=!0,this.dom.appendChild(Tt)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let $=0;for(let lt of this.children){if(!(lt instanceof TextView)||/[^ -~]/.test(lt.text))return null;let ft=clientRectsFor(lt.dom);if(ft.length!=1)return null;$+=ft[0].width}return $?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:$/this.length}:null}coordsAt($,lt){return coordsInChildren(this,$,lt)}become($){return!1}get type(){return BlockType.Text}static find($,lt){for(let ft=0,St=0;ft<$.children.length;ft++){let Tt=$.children[ft],Ct=St+Tt.length;if(Ct>=lt){if(Tt instanceof LineView)return Tt;if(Ct>lt)break}St=Ct+Tt.breakAfter}return null}}class BlockWidgetView extends ContentView{constructor($,lt,ft){super(),this.widget=$,this.length=lt,this.type=ft,this.breakAfter=0,this.prevWidget=null}merge($,lt,ft,St,Tt,Ct){return ft&&(!(ft instanceof BlockWidgetView)||!this.widget.compare(ft.widget)||$>0&&Tt<=0||lt<this.length&&Ct<=0)?!1:(this.length=$+(ft?ft.length:0)+(this.length-lt),!0)}domAtPos($){return $==0?DOMPos.before(this.dom):DOMPos.after(this.dom,$==this.length)}split($){let lt=this.length-$;this.length=$;let ft=new BlockWidgetView(this.widget,lt,this.type);return ft.breakAfter=this.breakAfter,ft}get children(){return noChildren}sync($){(!this.dom||!this.widget.updateDOM(this.dom,$))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM($)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Text.empty}domBoundsAround(){return null}become($){return $ instanceof BlockWidgetView&&$.type==this.type&&$.widget.constructor==this.widget.constructor?($.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=$.widget,this.length=$.length,this.breakAfter=$.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent($){return this.widget.ignoreEvent($)}get isEditable(){return!1}get isWidget(){return!0}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class ContentBuilder{constructor($,lt,ft,St){this.doc=$,this.pos=lt,this.end=ft,this.disallowBlockEffectsFor=St,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=$.iter(),this.skip=lt}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let $=this.content[this.content.length-1];return!$.breakAfter&&!($ instanceof BlockWidgetView&&$.type==BlockType.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new LineView),this.atCursorPos=!0),this.curLine}flushBuffer($=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(wrapMarks(new WidgetBufferView(-1),$),$.length),this.pendingBuffer=0)}addBlockWidget($){this.flushBuffer(),this.curLine=null,this.content.push($)}finish($){this.pendingBuffer&&$<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText($,lt,ft){for(;$>0;){if(this.textOff==this.text.length){let{value:Tt,lineBreak:Ct,done:At}=this.cursor.next(this.skip);if(this.skip=0,At)throw new Error("Ran out of text content when drawing inline views");if(Ct){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,$--;continue}else this.text=Tt,this.textOff=0}let St=Math.min(this.text.length-this.textOff,$,512);this.flushBuffer(lt.slice(lt.length-ft)),this.getLine().append(wrapMarks(new TextView(this.text.slice(this.textOff,this.textOff+St)),lt),ft),this.atCursorPos=!0,this.textOff+=St,$-=St,ft=0}}span($,lt,ft,St){this.buildText(lt-$,ft,St),this.pos=lt,this.openStart<0&&(this.openStart=St)}point($,lt,ft,St,Tt,Ct){if(this.disallowBlockEffectsFor[Ct]&&ft instanceof PointDecoration){if(ft.block)throw new RangeError("Block decorations may not be specified via plugins");if(lt>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let At=lt-$;if(ft instanceof PointDecoration)if(ft.block){let{type:Rt}=ft;Rt==BlockType.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new BlockWidgetView(ft.widget||new NullWidget("div"),At,Rt))}else{let Rt=WidgetView.create(ft.widget||new NullWidget("span"),At,At?0:ft.startSide),kt=this.atCursorPos&&!Rt.isEditable&&Tt<=St.length&&($<lt||ft.startSide>0),Nt=!Rt.isEditable&&($<lt||Tt>St.length||ft.startSide<=0),Bt=this.getLine();this.pendingBuffer==2&&!kt&&(this.pendingBuffer=0),this.flushBuffer(St),kt&&(Bt.append(wrapMarks(new WidgetBufferView(1),St),Tt),Tt=St.length+Math.max(0,Tt-St.length)),Bt.append(wrapMarks(Rt,St),Tt),this.atCursorPos=Nt,this.pendingBuffer=Nt?$<lt||Tt>St.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=St.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(ft);At&&(this.textOff+At<=this.text.length?this.textOff+=At:(this.skip+=At-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=lt),this.openStart<0&&(this.openStart=Tt)}static build($,lt,ft,St,Tt){let Ct=new ContentBuilder($,lt,ft,Tt);return Ct.openEnd=RangeSet.spans(St,lt,ft,Ct),Ct.openStart<0&&(Ct.openStart=Ct.openEnd),Ct.finish(Ct.openEnd),Ct}}function wrapMarks(dt,$){for(let lt of $)dt=new MarkView(lt,[dt],dt.length);return dt}class NullWidget extends WidgetType{constructor($){super(),this.tag=$}eq($){return $.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM($){return $.nodeName.toLowerCase()==this.tag}}const clickAddsSelectionRange=Facet.define(),dragMovesSelection$1=Facet.define(),mouseSelectionStyle=Facet.define(),exceptionSink=Facet.define(),updateListener=Facet.define(),inputHandler$1=Facet.define(),focusChangeEffect=Facet.define(),perLineTextDirection=Facet.define({combine:dt=>dt.some($=>$)}),nativeSelectionHidden=Facet.define({combine:dt=>dt.some($=>$)});class ScrollTarget{constructor($,lt="nearest",ft="nearest",St=5,Tt=5){this.range=$,this.y=lt,this.x=ft,this.yMargin=St,this.xMargin=Tt}map($){return $.empty?this:new ScrollTarget(this.range.map($),this.y,this.x,this.yMargin,this.xMargin)}}const scrollIntoView$1=StateEffect.define({map:(dt,$)=>dt.map($)});function logException(dt,$,lt){let ft=dt.facet(exceptionSink);ft.length?ft[0]($):window.onerror?window.onerror(String($),lt,void 0,void 0,$):lt?console.error(lt+":",$):console.error($)}const editable=Facet.define({combine:dt=>dt.length?dt[0]:!0});let nextPluginID=0;const viewPlugin=Facet.define();class ViewPlugin{constructor($,lt,ft,St){this.id=$,this.create=lt,this.domEventHandlers=ft,this.extension=St(this)}static define($,lt){const{eventHandlers:ft,provide:St,decorations:Tt}=lt||{};return new ViewPlugin(nextPluginID++,$,ft,Ct=>{let At=[viewPlugin.of(Ct)];return Tt&&At.push(decorations.of(Rt=>{let kt=Rt.plugin(Ct);return kt?Tt(kt):Decoration.none})),St&&At.push(St(Ct)),At})}static fromClass($,lt){return ViewPlugin.define(ft=>new $(ft),lt)}}class PluginInstance{constructor($){this.spec=$,this.mustUpdate=null,this.value=null}update($){if(this.value){if(this.mustUpdate){let lt=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(lt)}catch(ft){if(logException(lt.state,ft,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create($)}catch(lt){logException($.state,lt,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy($){var lt;if(!((lt=this.value)===null||lt===void 0)&&lt.destroy)try{this.value.destroy()}catch(ft){logException($.state,ft,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const editorAttributes=Facet.define(),contentAttributes=Facet.define(),decorations=Facet.define(),atomicRanges=Facet.define(),scrollMargins=Facet.define(),styleModule=Facet.define();class ChangedRange{constructor($,lt,ft,St){this.fromA=$,this.toA=lt,this.fromB=ft,this.toB=St}join($){return new ChangedRange(Math.min(this.fromA,$.fromA),Math.max(this.toA,$.toA),Math.min(this.fromB,$.fromB),Math.max(this.toB,$.toB))}addToSet($){let lt=$.length,ft=this;for(;lt>0;lt--){let St=$[lt-1];if(!(St.fromA>ft.toA)){if(St.toA<ft.fromA)break;ft=ft.join(St),$.splice(lt-1,1)}}return $.splice(lt,0,ft),$}static extendWithRanges($,lt){if(lt.length==0)return $;let ft=[];for(let St=0,Tt=0,Ct=0,At=0;;St++){let Rt=St==$.length?null:$[St],kt=Ct-At,Nt=Rt?Rt.fromB:1e9;for(;Tt<lt.length&&lt[Tt]<Nt;){let Bt=lt[Tt],Ut=lt[Tt+1],zt=Math.max(At,Bt),Zt=Math.min(Nt,Ut);if(zt<=Zt&&new ChangedRange(zt+kt,Zt+kt,zt,Zt).addToSet(ft),Ut>Nt)break;Tt+=2}if(!Rt)return ft;new ChangedRange(Rt.fromA,Rt.toA,Rt.fromB,Rt.toB).addToSet(ft),Ct=Rt.toA,At=Rt.toB}}}class ViewUpdate{constructor($,lt,ft){this.view=$,this.state=lt,this.transactions=ft,this.flags=0,this.startState=$.state,this.changes=ChangeSet.empty(this.startState.doc.length);for(let Tt of ft)this.changes=this.changes.compose(Tt.changes);let St=[];this.changes.iterChangedRanges((Tt,Ct,At,Rt)=>St.push(new ChangedRange(Tt,Ct,At,Rt))),this.changedRanges=St}static create($,lt,ft){return new ViewUpdate($,lt,ft)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some($=>$.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var Direction=function(dt){return dt[dt.LTR=0]="LTR",dt[dt.RTL=1]="RTL",dt}(Direction||(Direction={}));const LTR=Direction.LTR,RTL=Direction.RTL;function dec(dt){let $=[];for(let lt=0;lt<dt.length;lt++)$.push(1<<+dt[lt]);return $}const LowTypes=dec("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ArabicTypes=dec("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Brackets=Object.create(null),BracketStack=[];for(let dt of["()","[]","{}"]){let $=dt.charCodeAt(0),lt=dt.charCodeAt(1);Brackets[$]=lt,Brackets[lt]=-$}function charType(dt){return dt<=247?LowTypes[dt]:1424<=dt&&dt<=1524?2:1536<=dt&&dt<=1785?ArabicTypes[dt-1536]:1774<=dt&&dt<=2220?4:8192<=dt&&dt<=8203?256:64336<=dt&&dt<=65023?4:dt==8204?256:1}const BidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class BidiSpan{constructor($,lt,ft){this.from=$,this.to=lt,this.level=ft}get dir(){return this.level%2?RTL:LTR}side($,lt){return this.dir==lt==$?this.to:this.from}static find($,lt,ft,St){let Tt=-1;for(let Ct=0;Ct<$.length;Ct++){let At=$[Ct];if(At.from<=lt&&At.to>=lt){if(At.level==ft)return Ct;(Tt<0||(St!=0?St<0?At.from<lt:At.to>lt:$[Tt].level>At.level))&&(Tt=Ct)}}if(Tt<0)throw new RangeError("Index out of range");return Tt}}const types=[];function computeOrder(dt,$){let lt=dt.length,ft=$==LTR?1:2,St=$==LTR?2:1;if(!dt||ft==1&&!BidiRE.test(dt))return trivialOrder(lt);for(let Ct=0,At=ft,Rt=ft;Ct<lt;Ct++){let kt=charType(dt.charCodeAt(Ct));kt==512?kt=At:kt==8&&Rt==4&&(kt=16),types[Ct]=kt==4?2:kt,kt&7&&(Rt=kt),At=kt}for(let Ct=0,At=ft,Rt=ft;Ct<lt;Ct++){let kt=types[Ct];if(kt==128)Ct<lt-1&&At==types[Ct+1]&&At&24?kt=types[Ct]=At:types[Ct]=256;else if(kt==64){let Nt=Ct+1;for(;Nt<lt&&types[Nt]==64;)Nt++;let Bt=Ct&&At==8||Nt<lt&&types[Nt]==8?Rt==1?1:8:256;for(let Ut=Ct;Ut<Nt;Ut++)types[Ut]=Bt;Ct=Nt-1}else kt==8&&Rt==1&&(types[Ct]=1);At=kt,kt&7&&(Rt=kt)}for(let Ct=0,At=0,Rt=0,kt,Nt,Bt;Ct<lt;Ct++)if(Nt=Brackets[kt=dt.charCodeAt(Ct)])if(Nt<0){for(let Ut=At-3;Ut>=0;Ut-=3)if(BracketStack[Ut+1]==-Nt){let zt=BracketStack[Ut+2],Zt=zt&2?ft:zt&4?zt&1?St:ft:0;Zt&&(types[Ct]=types[BracketStack[Ut]]=Zt),At=Ut;break}}else{if(BracketStack.length==189)break;BracketStack[At++]=Ct,BracketStack[At++]=kt,BracketStack[At++]=Rt}else if((Bt=types[Ct])==2||Bt==1){let Ut=Bt==ft;Rt=Ut?0:1;for(let zt=At-3;zt>=0;zt-=3){let Zt=BracketStack[zt+2];if(Zt&2)break;if(Ut)BracketStack[zt+2]|=2;else{if(Zt&4)break;BracketStack[zt+2]|=4}}}for(let Ct=0;Ct<lt;Ct++)if(types[Ct]==256){let At=Ct+1;for(;At<lt&&types[At]==256;)At++;let Rt=(Ct?types[Ct-1]:ft)==1,kt=(At<lt?types[At]:ft)==1,Nt=Rt==kt?Rt?1:2:ft;for(let Bt=Ct;Bt<At;Bt++)types[Bt]=Nt;Ct=At-1}let Tt=[];if(ft==1)for(let Ct=0;Ct<lt;){let At=Ct,Rt=types[Ct++]!=1;for(;Ct<lt&&Rt==(types[Ct]!=1);)Ct++;if(Rt)for(let kt=Ct;kt>At;){let Nt=kt,Bt=types[--kt]!=2;for(;kt>At&&Bt==(types[kt-1]!=2);)kt--;Tt.push(new BidiSpan(kt,Nt,Bt?2:1))}else Tt.push(new BidiSpan(At,Ct,0))}else for(let Ct=0;Ct<lt;){let At=Ct,Rt=types[Ct++]==2;for(;Ct<lt&&Rt==(types[Ct]==2);)Ct++;Tt.push(new BidiSpan(At,Ct,Rt?1:2))}return Tt}function trivialOrder(dt){return[new BidiSpan(0,dt,0)]}let movedOver="";function moveVisually(dt,$,lt,ft,St){var Tt;let Ct=ft.head-dt.from,At=-1;if(Ct==0){if(!St||!dt.length)return null;$[0].level!=lt&&(Ct=$[0].side(!1,lt),At=0)}else if(Ct==dt.length){if(St)return null;let Ut=$[$.length-1];Ut.level!=lt&&(Ct=Ut.side(!0,lt),At=$.length-1)}At<0&&(At=BidiSpan.find($,Ct,(Tt=ft.bidiLevel)!==null&&Tt!==void 0?Tt:-1,ft.assoc));let Rt=$[At];Ct==Rt.side(St,lt)&&(Rt=$[At+=St?1:-1],Ct=Rt.side(!St,lt));let kt=St==(Rt.dir==lt),Nt=findClusterBreak(dt.text,Ct,kt);if(movedOver=dt.text.slice(Math.min(Ct,Nt),Math.max(Ct,Nt)),Nt!=Rt.side(St,lt))return EditorSelection.cursor(Nt+dt.from,kt?-1:1,Rt.level);let Bt=At==(St?$.length-1:0)?null:$[At+(St?1:-1)];return!Bt&&Rt.level!=lt?EditorSelection.cursor(St?dt.to:dt.from,St?-1:1,lt):Bt&&Bt.level<Rt.level?EditorSelection.cursor(Bt.side(!St,lt)+dt.from,St?1:-1,Bt.level):EditorSelection.cursor(Nt+dt.from,St?-1:1,Rt.level)}const LineBreakPlaceholder="";class DOMReader{constructor($,lt){this.points=$,this.text="",this.lineSeparator=lt.facet(EditorState.lineSeparator)}append($){this.text+=$}lineBreak(){this.text+=LineBreakPlaceholder}readRange($,lt){if(!$)return this;let ft=$.parentNode;for(let St=$;;){this.findPointBefore(ft,St),this.readNode(St);let Tt=St.nextSibling;if(Tt==lt)break;let Ct=ContentView.get(St),At=ContentView.get(Tt);(Ct&&At?Ct.breakAfter:(Ct?Ct.breakAfter:isBlockElement(St))||isBlockElement(Tt)&&(St.nodeName!="BR"||St.cmIgnore))&&this.lineBreak(),St=Tt}return this.findPointBefore(ft,lt),this}readTextNode($){let lt=$.nodeValue;for(let ft of this.points)ft.node==$&&(ft.pos=this.text.length+Math.min(ft.offset,lt.length));for(let ft=0,St=this.lineSeparator?null:/\r\n?|\n/g;;){let Tt=-1,Ct=1,At;if(this.lineSeparator?(Tt=lt.indexOf(this.lineSeparator,ft),Ct=this.lineSeparator.length):(At=St.exec(lt))&&(Tt=At.index,Ct=At[0].length),this.append(lt.slice(ft,Tt<0?lt.length:Tt)),Tt<0)break;if(this.lineBreak(),Ct>1)for(let Rt of this.points)Rt.node==$&&Rt.pos>this.text.length&&(Rt.pos-=Ct-1);ft=Tt+Ct}}readNode($){if($.cmIgnore)return;let lt=ContentView.get($),ft=lt&&lt.overrideDOMText;if(ft!=null){this.findPointInside($,ft.length);for(let St=ft.iter();!St.next().done;)St.lineBreak?this.lineBreak():this.append(St.value)}else $.nodeType==3?this.readTextNode($):$.nodeName=="BR"?$.nextSibling&&this.lineBreak():$.nodeType==1&&this.readRange($.firstChild,null)}findPointBefore($,lt){for(let ft of this.points)ft.node==$&&$.childNodes[ft.offset]==lt&&(ft.pos=this.text.length)}findPointInside($,lt){for(let ft of this.points)($.nodeType==3?ft.node==$:$.contains(ft.node))&&(ft.pos=this.text.length+Math.min(lt,ft.offset))}}function isBlockElement(dt){return dt.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(dt.nodeName)}class DOMPoint{constructor($,lt){this.node=$,this.offset=lt,this.pos=-1}}class DocView extends ContentView{constructor($){super(),this.view=$,this.compositionDeco=Decoration.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM($.contentDOM),this.children=[new LineView],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ChangedRange(0,0,0,$.state.doc.length)],0)}get length(){return this.view.state.doc.length}update($){let lt=$.changedRanges;this.minWidth>0&&lt.length&&(lt.every(({fromA:Ct,toA:At})=>At<this.minWidthFrom||Ct>this.minWidthTo)?(this.minWidthFrom=$.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=$.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=Decoration.none:($.transactions.length||this.dirty)&&(this.compositionDeco=computeCompositionDeco(this.view,$.changes)),(browser.ie||browser.chrome)&&!this.compositionDeco.size&&$&&$.state.doc.lines!=$.startState.doc.lines&&(this.forceSelection=!0);let ft=this.decorations,St=this.updateDeco(),Tt=findChangedDeco(ft,St,$.changes);return lt=ChangedRange.extendWithRanges(lt,Tt),this.dirty==0&&lt.length==0?!1:(this.updateInner(lt,$.startState.doc.length),$.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner($,lt){this.view.viewState.mustMeasureContent=!0,this.updateChildren($,lt);let{observer:ft}=this.view;ft.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let Tt=browser.chrome||browser.ios?{node:ft.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,Tt),this.dirty=0,Tt&&(Tt.written||ft.selectionRange.focusNode!=Tt.node)&&(this.forceSelection=!0),this.dom.style.height=""});let St=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let Tt of this.children)Tt instanceof BlockWidgetView&&Tt.widget instanceof BlockGapWidget&&St.push(Tt.dom);ft.updateGaps(St)}updateChildren($,lt){let ft=this.childCursor(lt);for(let St=$.length-1;;St--){let Tt=St>=0?$[St]:null;if(!Tt)break;let{fromA:Ct,toA:At,fromB:Rt,toB:kt}=Tt,{content:Nt,breakAtStart:Bt,openStart:Ut,openEnd:zt}=ContentBuilder.build(this.view.state.doc,Rt,kt,this.decorations,this.dynamicDecorationMap),{i:Zt,off:ln}=ft.findPos(At,1),{i:cn,off:hn}=ft.findPos(Ct,-1);replaceRange(this,cn,hn,Zt,ln,Nt,Bt,Ut,zt)}}updateSelection($=!1,lt=!1){if(($||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange(),!(lt||this.mayControlSelection()))return;let ft=this.forceSelection;this.forceSelection=!1;let St=this.view.state.selection.main,Tt=this.domAtPos(St.anchor),Ct=St.empty?Tt:this.domAtPos(St.head);if(browser.gecko&&St.empty&&betweenUneditable(Tt)){let Rt=document.createTextNode("");this.view.observer.ignore(()=>Tt.node.insertBefore(Rt,Tt.node.childNodes[Tt.offset]||null)),Tt=Ct=new DOMPos(Rt,0),ft=!0}let At=this.view.observer.selectionRange;(ft||!At.focusNode||!isEquivalentPosition(Tt.node,Tt.offset,At.anchorNode,At.anchorOffset)||!isEquivalentPosition(Ct.node,Ct.offset,At.focusNode,At.focusOffset))&&(this.view.observer.ignore(()=>{browser.android&&browser.chrome&&this.dom.contains(At.focusNode)&&inUneditable(At.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let Rt=getSelection(this.view.root);if(Rt)if(St.empty){if(browser.gecko){let kt=nextToUneditable(Tt.node,Tt.offset);if(kt&&kt!=3){let Nt=nearbyTextNode(Tt.node,Tt.offset,kt==1?1:-1);Nt&&(Tt=new DOMPos(Nt,kt==1?0:Nt.nodeValue.length))}}Rt.collapse(Tt.node,Tt.offset),St.bidiLevel!=null&&At.cursorBidiLevel!=null&&(At.cursorBidiLevel=St.bidiLevel)}else if(Rt.extend){Rt.collapse(Tt.node,Tt.offset);try{Rt.extend(Ct.node,Ct.offset)}catch{}}else{let kt=document.createRange();St.anchor>St.head&&([Tt,Ct]=[Ct,Tt]),kt.setEnd(Ct.node,Ct.offset),kt.setStart(Tt.node,Tt.offset),Rt.removeAllRanges(),Rt.addRange(kt)}}),this.view.observer.setSelectionRange(Tt,Ct)),this.impreciseAnchor=Tt.precise?null:new DOMPos(At.anchorNode,At.anchorOffset),this.impreciseHead=Ct.precise?null:new DOMPos(At.focusNode,At.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let{view:$}=this,lt=$.state.selection.main,ft=getSelection($.root),{anchorNode:St,anchorOffset:Tt}=$.observer.selectionRange;if(!ft||!lt.empty||!lt.assoc||!ft.modify)return;let Ct=LineView.find(this,lt.head);if(!Ct)return;let At=Ct.posAtStart;if(lt.head==At||lt.head==At+Ct.length)return;let Rt=this.coordsAt(lt.head,-1),kt=this.coordsAt(lt.head,1);if(!Rt||!kt||Rt.bottom>kt.top)return;let Nt=this.domAtPos(lt.head+lt.assoc);ft.collapse(Nt.node,Nt.offset),ft.modify("move",lt.assoc<0?"forward":"backward","lineboundary"),$.observer.readSelectionRange();let Bt=$.observer.selectionRange;$.docView.posFromDOM(Bt.anchorNode,Bt.anchorOffset)!=lt.from&&ft.collapse(St,Tt)}mayControlSelection(){let $=this.view.root.activeElement;return $==this.dom||hasSelection(this.dom,this.view.observer.selectionRange)&&!($&&this.dom.contains($))}nearest($){for(let lt=$;lt;){let ft=ContentView.get(lt);if(ft&&ft.rootView==this)return ft;lt=lt.parentNode}return null}posFromDOM($,lt){let ft=this.nearest($);if(!ft)throw new RangeError("Trying to find position for a DOM position outside of the document");return ft.localPosFromDOM($,lt)+ft.posAtStart}domAtPos($){let{i:lt,off:ft}=this.childCursor().findPos($,-1);for(;lt<this.children.length-1;){let St=this.children[lt];if(ft<St.length||St instanceof LineView)break;lt++,ft=0}return this.children[lt].domAtPos(ft)}coordsAt($,lt){for(let ft=this.length,St=this.children.length-1;;St--){let Tt=this.children[St],Ct=ft-Tt.breakAfter-Tt.length;if($>Ct||$==Ct&&Tt.type!=BlockType.WidgetBefore&&Tt.type!=BlockType.WidgetAfter&&(!St||lt==2||this.children[St-1].breakAfter||this.children[St-1].type==BlockType.WidgetBefore&&lt>-2))return Tt.coordsAt($-Ct,lt);ft=Ct}}measureVisibleLineHeights($){let lt=[],{from:ft,to:St}=$,Tt=this.view.contentDOM.clientWidth,Ct=Tt>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,At=-1,Rt=this.view.textDirection==Direction.LTR;for(let kt=0,Nt=0;Nt<this.children.length;Nt++){let Bt=this.children[Nt],Ut=kt+Bt.length;if(Ut>St)break;if(kt>=ft){let zt=Bt.dom.getBoundingClientRect();if(lt.push(zt.height),Ct){let Zt=Bt.dom.lastChild,ln=Zt?clientRectsFor(Zt):[];if(ln.length){let cn=ln[ln.length-1],hn=Rt?cn.right-zt.left:zt.right-cn.left;hn>At&&(At=hn,this.minWidth=Tt,this.minWidthFrom=kt,this.minWidthTo=Ut)}}}kt=Ut+Bt.breakAfter}return lt}textDirectionAt($){let{i:lt}=this.childPos($,1);return getComputedStyle(this.children[lt].dom).direction=="rtl"?Direction.RTL:Direction.LTR}measureTextSize(){for(let St of this.children)if(St instanceof LineView){let Tt=St.measureTextSize();if(Tt)return Tt}let $=document.createElement("div"),lt,ft;return $.className="cm-line",$.style.width="99999px",$.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild($);let St=clientRectsFor($.firstChild)[0];lt=$.getBoundingClientRect().height,ft=St?St.width/27:7,$.remove()}),{lineHeight:lt,charWidth:ft}}childCursor($=this.length){let lt=this.children.length;return lt&&($-=this.children[--lt].length),new ChildCursor(this.children,$,lt)}computeBlockGapDeco(){let $=[],lt=this.view.viewState;for(let ft=0,St=0;;St++){let Tt=St==lt.viewports.length?null:lt.viewports[St],Ct=Tt?Tt.from-1:this.length;if(Ct>ft){let At=lt.lineBlockAt(Ct).bottom-lt.lineBlockAt(ft).top;$.push(Decoration.replace({widget:new BlockGapWidget(At),block:!0,inclusive:!0,isBlockGap:!0}).range(ft,Ct))}if(!Tt)break;ft=Tt.to+1}return Decoration.set($)}updateDeco(){let $=this.view.state.facet(decorations).map((lt,ft)=>(this.dynamicDecorationMap[ft]=typeof lt=="function")?lt(this.view):lt);for(let lt=$.length;lt<$.length+3;lt++)this.dynamicDecorationMap[lt]=!1;return this.decorations=[...$,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView($){let{range:lt}=$,ft=this.coordsAt(lt.head,lt.empty?lt.assoc:lt.head>lt.anchor?-1:1),St;if(!ft)return;!lt.empty&&(St=this.coordsAt(lt.anchor,lt.anchor>lt.head?-1:1))&&(ft={left:Math.min(ft.left,St.left),top:Math.min(ft.top,St.top),right:Math.max(ft.right,St.right),bottom:Math.max(ft.bottom,St.bottom)});let Tt=0,Ct=0,At=0,Rt=0;for(let Nt of this.view.state.facet(scrollMargins).map(Bt=>Bt(this.view)))if(Nt){let{left:Bt,right:Ut,top:zt,bottom:Zt}=Nt;Bt!=null&&(Tt=Math.max(Tt,Bt)),Ut!=null&&(Ct=Math.max(Ct,Ut)),zt!=null&&(At=Math.max(At,zt)),Zt!=null&&(Rt=Math.max(Rt,Zt))}let kt={left:ft.left-Tt,top:ft.top-At,right:ft.right+Ct,bottom:ft.bottom+Rt};scrollRectIntoView(this.view.scrollDOM,kt,lt.head<lt.anchor?-1:1,$.x,$.y,$.xMargin,$.yMargin,this.view.textDirection==Direction.LTR)}}function betweenUneditable(dt){return dt.node.nodeType==1&&dt.node.firstChild&&(dt.offset==0||dt.node.childNodes[dt.offset-1].contentEditable=="false")&&(dt.offset==dt.node.childNodes.length||dt.node.childNodes[dt.offset].contentEditable=="false")}class BlockGapWidget extends WidgetType{constructor($){super(),this.height=$}toDOM(){let $=document.createElement("div");return this.updateDOM($),$}eq($){return $.height==this.height}updateDOM($){return $.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function compositionSurroundingNode(dt){let $=dt.observer.selectionRange,lt=$.focusNode&&nearbyTextNode($.focusNode,$.focusOffset,0);if(!lt)return null;let ft=dt.docView.nearest(lt);if(!ft)return null;if(ft instanceof LineView){let St=lt;for(;St.parentNode!=ft.dom;)St=St.parentNode;let Tt=St.previousSibling;for(;Tt&&!ContentView.get(Tt);)Tt=Tt.previousSibling;let Ct=Tt?ContentView.get(Tt).posAtEnd:ft.posAtStart;return{from:Ct,to:Ct,node:St,text:lt}}else{for(;;){let{parent:Tt}=ft;if(!Tt)return null;if(Tt instanceof LineView)break;ft=Tt}let St=ft.posAtStart;return{from:St,to:St+ft.length,node:ft.dom,text:lt}}}function computeCompositionDeco(dt,$){let lt=compositionSurroundingNode(dt);if(!lt)return Decoration.none;let{from:ft,to:St,node:Tt,text:Ct}=lt,At=$.mapPos(ft,1),Rt=Math.max(At,$.mapPos(St,-1)),{state:kt}=dt,Nt=Tt.nodeType==3?Tt.nodeValue:new DOMReader([],kt).readRange(Tt.firstChild,null).text;if(Rt-At<Nt.length)if(kt.doc.sliceString(At,Math.min(kt.doc.length,At+Nt.length),LineBreakPlaceholder)==Nt)Rt=At+Nt.length;else if(kt.doc.sliceString(Math.max(0,Rt-Nt.length),Rt,LineBreakPlaceholder)==Nt)At=Rt-Nt.length;else return Decoration.none;else if(kt.doc.sliceString(At,Rt,LineBreakPlaceholder)!=Nt)return Decoration.none;let Bt=ContentView.get(Tt);return Bt instanceof CompositionView?Bt=Bt.widget.topView:Bt&&(Bt.parent=null),Decoration.set(Decoration.replace({widget:new CompositionWidget(Tt,Ct,Bt),inclusive:!0}).range(At,Rt))}class CompositionWidget extends WidgetType{constructor($,lt,ft){super(),this.top=$,this.text=lt,this.topView=ft}eq($){return this.top==$.top&&this.text==$.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return CompositionView}}function nearbyTextNode(dt,$,lt){for(;;){if(dt.nodeType==3)return dt;if(dt.nodeType==1&&$>0&&lt<=0)dt=dt.childNodes[$-1],$=maxOffset(dt);else if(dt.nodeType==1&&$<dt.childNodes.length&&lt>=0)dt=dt.childNodes[$],$=0;else return null}}function nextToUneditable(dt,$){return dt.nodeType!=1?0:($&&dt.childNodes[$-1].contentEditable=="false"?1:0)|($<dt.childNodes.length&&dt.childNodes[$].contentEditable=="false"?2:0)}class DecorationComparator$1{constructor(){this.changes=[]}compareRange($,lt){addRange($,lt,this.changes)}comparePoint($,lt){addRange($,lt,this.changes)}}function findChangedDeco(dt,$,lt){let ft=new DecorationComparator$1;return RangeSet.compare(dt,$,lt,ft),ft.changes}function inUneditable(dt,$){for(let lt=dt;lt&&lt!=$;lt=lt.assignedSlot||lt.parentNode)if(lt.nodeType==1&&lt.contentEditable=="false")return!0;return!1}function groupAt(dt,$,lt=1){let ft=dt.charCategorizer($),St=dt.doc.lineAt($),Tt=$-St.from;if(St.length==0)return EditorSelection.cursor($);Tt==0?lt=1:Tt==St.length&&(lt=-1);let Ct=Tt,At=Tt;lt<0?Ct=findClusterBreak(St.text,Tt,!1):At=findClusterBreak(St.text,Tt);let Rt=ft(St.text.slice(Ct,At));for(;Ct>0;){let kt=findClusterBreak(St.text,Ct,!1);if(ft(St.text.slice(kt,Ct))!=Rt)break;Ct=kt}for(;At<St.length;){let kt=findClusterBreak(St.text,At);if(ft(St.text.slice(At,kt))!=Rt)break;At=kt}return EditorSelection.range(Ct+St.from,At+St.from)}function getdx(dt,$){return $.left>dt?$.left-dt:Math.max(0,dt-$.right)}function getdy(dt,$){return $.top>dt?$.top-dt:Math.max(0,dt-$.bottom)}function yOverlap(dt,$){return dt.top<$.bottom-1&&dt.bottom>$.top+1}function upTop(dt,$){return $<dt.top?{top:$,left:dt.left,right:dt.right,bottom:dt.bottom}:dt}function upBot(dt,$){return $>dt.bottom?{top:dt.top,left:dt.left,right:dt.right,bottom:$}:dt}function domPosAtCoords(dt,$,lt){let ft,St,Tt,Ct,At=!1,Rt,kt,Nt,Bt;for(let Zt=dt.firstChild;Zt;Zt=Zt.nextSibling){let ln=clientRectsFor(Zt);for(let cn=0;cn<ln.length;cn++){let hn=ln[cn];St&&yOverlap(St,hn)&&(hn=upTop(upBot(hn,St.bottom),St.top));let pn=getdx($,hn),dn=getdy(lt,hn);if(pn==0&&dn==0)return Zt.nodeType==3?domPosInText(Zt,$,lt):domPosAtCoords(Zt,$,lt);if(!ft||Ct>dn||Ct==dn&&Tt>pn){ft=Zt,St=hn,Tt=pn,Ct=dn;let gn=dn?lt<hn.top?-1:1:pn?$<hn.left?-1:1:0;At=!gn||(gn>0?cn<ln.length-1:cn>0)}pn==0?lt>hn.bottom&&(!Nt||Nt.bottom<hn.bottom)?(Rt=Zt,Nt=hn):lt<hn.top&&(!Bt||Bt.top>hn.top)&&(kt=Zt,Bt=hn):Nt&&yOverlap(Nt,hn)?Nt=upBot(Nt,hn.bottom):Bt&&yOverlap(Bt,hn)&&(Bt=upTop(Bt,hn.top))}}if(Nt&&Nt.bottom>=lt?(ft=Rt,St=Nt):Bt&&Bt.top<=lt&&(ft=kt,St=Bt),!ft)return{node:dt,offset:0};let Ut=Math.max(St.left,Math.min(St.right,$));if(ft.nodeType==3)return domPosInText(ft,Ut,lt);if(At&&ft.contentEditable!="false")return domPosAtCoords(ft,Ut,lt);let zt=Array.prototype.indexOf.call(dt.childNodes,ft)+($>=(St.left+St.right)/2?1:0);return{node:dt,offset:zt}}function domPosInText(dt,$,lt){let ft=dt.nodeValue.length,St=-1,Tt=1e9,Ct=0;for(let At=0;At<ft;At++){let Rt=textRange(dt,At,At+1).getClientRects();for(let kt=0;kt<Rt.length;kt++){let Nt=Rt[kt];if(Nt.top==Nt.bottom)continue;Ct||(Ct=$-Nt.left);let Bt=(Nt.top>lt?Nt.top-lt:lt-Nt.bottom)-1;if(Nt.left-1<=$&&Nt.right+1>=$&&Bt<Tt){let Ut=$>=(Nt.left+Nt.right)/2,zt=Ut;if((browser.chrome||browser.gecko)&&textRange(dt,At).getBoundingClientRect().left==Nt.right&&(zt=!Ut),Bt<=0)return{node:dt,offset:At+(zt?1:0)};St=At+(zt?1:0),Tt=Bt}}}return{node:dt,offset:St>-1?St:Ct>0?dt.nodeValue.length:0}}function posAtCoords(dt,$,lt,ft=-1){var St;let Tt=dt.contentDOM.getBoundingClientRect(),Ct=Tt.top+dt.viewState.paddingTop,At,{docHeight:Rt}=dt.viewState,{x:kt,y:Nt}=$,Bt=Nt-Ct;if(Bt<0)return 0;if(Bt>Rt)return dt.state.doc.length;for(let dn=dt.defaultLineHeight/2,gn=!1;At=dt.elementAtHeight(Bt),At.type!=BlockType.Text;)for(;Bt=ft>0?At.bottom+dn:At.top-dn,!(Bt>=0&&Bt<=Rt);){if(gn)return lt?null:0;gn=!0,ft=-ft}Nt=Ct+Bt;let Ut=At.from;if(Ut<dt.viewport.from)return dt.viewport.from==0?0:lt?null:posAtCoordsImprecise(dt,Tt,At,kt,Nt);if(Ut>dt.viewport.to)return dt.viewport.to==dt.state.doc.length?dt.state.doc.length:lt?null:posAtCoordsImprecise(dt,Tt,At,kt,Nt);let zt=dt.dom.ownerDocument,Zt=dt.root.elementFromPoint?dt.root:zt,ln=Zt.elementFromPoint(kt,Nt);ln&&!dt.contentDOM.contains(ln)&&(ln=null),ln||(kt=Math.max(Tt.left+1,Math.min(Tt.right-1,kt)),ln=Zt.elementFromPoint(kt,Nt),ln&&!dt.contentDOM.contains(ln)&&(ln=null));let cn,hn=-1;if(ln&&((St=dt.docView.nearest(ln))===null||St===void 0?void 0:St.isEditable)!=!1){if(zt.caretPositionFromPoint){let dn=zt.caretPositionFromPoint(kt,Nt);dn&&({offsetNode:cn,offset:hn}=dn)}else if(zt.caretRangeFromPoint){let dn=zt.caretRangeFromPoint(kt,Nt);dn&&({startContainer:cn,startOffset:hn}=dn,(!dt.contentDOM.contains(cn)||browser.safari&&isSuspiciousSafariCaretResult(cn,hn,kt)||browser.chrome&&isSuspiciousChromeCaretResult(cn,hn,kt))&&(cn=void 0))}}if(!cn||!dt.docView.dom.contains(cn)){let dn=LineView.find(dt.docView,Ut);if(!dn)return Bt>At.top+At.height/2?At.to:At.from;({node:cn,offset:hn}=domPosAtCoords(dn.dom,kt,Nt))}let pn=dt.docView.nearest(cn);if(!pn)return null;if(pn.isWidget){let dn=pn.dom.getBoundingClientRect();return $.y<dn.top||$.y<=dn.bottom&&$.x<=(dn.left+dn.right)/2?pn.posAtStart:pn.posAtEnd}else return pn.localPosFromDOM(cn,hn)+pn.posAtStart}function posAtCoordsImprecise(dt,$,lt,ft,St){let Tt=Math.round((ft-$.left)*dt.defaultCharacterWidth);if(dt.lineWrapping&&lt.height>dt.defaultLineHeight*1.5){let At=Math.floor((St-lt.top)/dt.defaultLineHeight);Tt+=At*dt.viewState.heightOracle.lineLength}let Ct=dt.state.sliceDoc(lt.from,lt.to);return lt.from+findColumn(Ct,Tt,dt.state.tabSize)}function isSuspiciousSafariCaretResult(dt,$,lt){let ft;if(dt.nodeType!=3||$!=(ft=dt.nodeValue.length))return!1;for(let St=dt.nextSibling;St;St=St.nextSibling)if(St.nodeType!=1||St.nodeName!="BR")return!1;return textRange(dt,ft-1,ft).getBoundingClientRect().left>lt}function isSuspiciousChromeCaretResult(dt,$,lt){if($!=0)return!1;for(let St=dt;;){let Tt=St.parentNode;if(!Tt||Tt.nodeType!=1||Tt.firstChild!=St)return!1;if(Tt.classList.contains("cm-line"))break;St=Tt}let ft=dt.nodeType==1?dt.getBoundingClientRect():textRange(dt,0,Math.max(dt.nodeValue.length,1)).getBoundingClientRect();return lt-ft.left>5}function moveToLineBoundary(dt,$,lt,ft){let St=dt.state.doc.lineAt($.head),Tt=!ft||!dt.lineWrapping?null:dt.coordsAtPos($.assoc<0&&$.head>St.from?$.head-1:$.head);if(Tt){let Rt=dt.dom.getBoundingClientRect(),kt=dt.textDirectionAt(St.from),Nt=dt.posAtCoords({x:lt==(kt==Direction.LTR)?Rt.right-1:Rt.left+1,y:(Tt.top+Tt.bottom)/2});if(Nt!=null)return EditorSelection.cursor(Nt,lt?-1:1)}let Ct=LineView.find(dt.docView,$.head),At=Ct?lt?Ct.posAtEnd:Ct.posAtStart:lt?St.to:St.from;return EditorSelection.cursor(At,lt?-1:1)}function moveByChar(dt,$,lt,ft){let St=dt.state.doc.lineAt($.head),Tt=dt.bidiSpans(St),Ct=dt.textDirectionAt(St.from);for(let At=$,Rt=null;;){let kt=moveVisually(St,Tt,Ct,At,lt),Nt=movedOver;if(!kt){if(St.number==(lt?dt.state.doc.lines:1))return At;Nt=`
`,St=dt.state.doc.line(St.number+(lt?1:-1)),Tt=dt.bidiSpans(St),kt=EditorSelection.cursor(lt?St.from:St.to)}if(Rt){if(!Rt(Nt))return At}else{if(!ft)return kt;Rt=ft(Nt)}At=kt}}function byGroup(dt,$,lt){let ft=dt.state.charCategorizer($),St=ft(lt);return Tt=>{let Ct=ft(Tt);return St==CharCategory.Space&&(St=Ct),St==Ct}}function moveVertically(dt,$,lt,ft){let St=$.head,Tt=lt?1:-1;if(St==(lt?dt.state.doc.length:0))return EditorSelection.cursor(St,$.assoc);let Ct=$.goalColumn,At,Rt=dt.contentDOM.getBoundingClientRect(),kt=dt.coordsAtPos(St),Nt=dt.documentTop;if(kt)Ct==null&&(Ct=kt.left-Rt.left),At=Tt<0?kt.top:kt.bottom;else{let zt=dt.viewState.lineBlockAt(St);Ct==null&&(Ct=Math.min(Rt.right-Rt.left,dt.defaultCharacterWidth*(St-zt.from))),At=(Tt<0?zt.top:zt.bottom)+Nt}let Bt=Rt.left+Ct,Ut=ft??dt.defaultLineHeight>>1;for(let zt=0;;zt+=10){let Zt=At+(Ut+zt)*Tt,ln=posAtCoords(dt,{x:Bt,y:Zt},!1,Tt);if(Zt<Rt.top||Zt>Rt.bottom||(Tt<0?ln<St:ln>St))return EditorSelection.cursor(ln,$.assoc,void 0,Ct)}}function skipAtoms(dt,$,lt){let ft=dt.state.facet(atomicRanges).map(St=>St(dt));for(;;){let St=!1;for(let Tt of ft)Tt.between(lt.from-1,lt.from+1,(Ct,At,Rt)=>{lt.from>Ct&&lt.from<At&&(lt=$.head>lt.from?EditorSelection.cursor(Ct,1):EditorSelection.cursor(At,-1),St=!0)});if(!St)return lt}}class InputState{constructor($){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.mouseSelection=null;let lt=(ft,St)=>{this.ignoreDuringComposition(St)||St.type=="keydown"&&this.keydown($,St)||(this.mustFlushObserver(St)&&$.observer.forceFlush(),this.runCustomHandlers(St.type,$,St)?St.preventDefault():ft($,St))};for(let ft in handlers){let St=handlers[ft];$.contentDOM.addEventListener(ft,Tt=>{eventBelongsToEditor($,Tt)&&lt(St,Tt)},handlerOptions[ft]),this.registeredEvents.push(ft)}$.scrollDOM.addEventListener("mousedown",ft=>{ft.target==$.scrollDOM&&ft.clientY>$.contentDOM.getBoundingClientRect().bottom&&lt(handlers.mousedown,ft)}),browser.chrome&&browser.chrome_version==102&&$.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?$.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,$.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=$.hasFocus,browser.safari&&$.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin($){this.lastSelectionOrigin=$,this.lastSelectionTime=Date.now()}ensureHandlers($,lt){var ft;let St;this.customHandlers=[];for(let Tt of lt)if(St=(ft=Tt.update($).spec)===null||ft===void 0?void 0:ft.domEventHandlers){this.customHandlers.push({plugin:Tt.value,handlers:St});for(let Ct in St)this.registeredEvents.indexOf(Ct)<0&&Ct!="scroll"&&(this.registeredEvents.push(Ct),$.contentDOM.addEventListener(Ct,At=>{eventBelongsToEditor($,At)&&this.runCustomHandlers(Ct,$,At)&&At.preventDefault()}))}}runCustomHandlers($,lt,ft){for(let St of this.customHandlers){let Tt=St.handlers[$];if(Tt)try{if(Tt.call(St.plugin,ft,lt)||ft.defaultPrevented)return!0}catch(Ct){logException(lt.state,Ct)}}return!1}runScrollHandlers($,lt){this.lastScrollTop=$.scrollDOM.scrollTop,this.lastScrollLeft=$.scrollDOM.scrollLeft;for(let ft of this.customHandlers){let St=ft.handlers.scroll;if(St)try{St.call(ft.plugin,lt,$)}catch(Tt){logException($.state,Tt)}}}keydown($,lt){if(this.lastKeyCode=lt.keyCode,this.lastKeyTime=Date.now(),lt.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(browser.android&&browser.chrome&&!lt.synthetic&&(lt.keyCode==13||lt.keyCode==8))return $.observer.delayAndroidKey(lt.key,lt.keyCode),!0;let ft;return browser.ios&&!lt.synthetic&&!lt.altKey&&!lt.metaKey&&((ft=PendingKeys.find(St=>St.keyCode==lt.keyCode))&&!lt.ctrlKey||EmacsyPendingKeys.indexOf(lt.key)>-1&&lt.ctrlKey&&!lt.shiftKey)?(this.pendingIOSKey=ft||lt,setTimeout(()=>this.flushIOSKey($),250),!0):!1}flushIOSKey($){let lt=this.pendingIOSKey;return lt?(this.pendingIOSKey=void 0,dispatchKey($.contentDOM,lt.key,lt.keyCode)):!1}ignoreDuringComposition($){return/^key/.test($.type)?this.composing>0?!0:browser.safari&&!browser.ios&&Date.now()-this.compositionEndedAt<100?(this.compositionEndedAt=0,!0):!1:!1}mustFlushObserver($){return $.type=="keydown"&&$.keyCode!=229}startMouseSelection($){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=$}update($){this.mouseSelection&&this.mouseSelection.update($),$.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const PendingKeys=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],EmacsyPendingKeys="dthko",modifierCodes=[16,17,18,20,91,92,224,225];function dragScrollSpeed(dt){return dt*.7+8}class MouseSelection{constructor($,lt,ft,St){this.view=$,this.style=ft,this.mustSelect=St,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=lt,this.scrollParent=scrollableParent($.contentDOM);let Tt=$.contentDOM.ownerDocument;Tt.addEventListener("mousemove",this.move=this.move.bind(this)),Tt.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=lt.shiftKey,this.multiple=$.state.facet(EditorState.allowMultipleSelections)&&addsSelectionRange($,lt),this.dragMove=dragMovesSelection($,lt),this.dragging=isInPrimarySelection($,lt)&&getClickType(lt)==1?null:!1}start($){this.dragging===!1&&($.preventDefault(),this.select($))}move($){var lt;if($.buttons==0)return this.destroy();if(this.dragging!==!1)return;this.select(this.lastEvent=$);let ft=0,St=0,Tt=((lt=this.scrollParent)===null||lt===void 0?void 0:lt.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight};$.clientX<=Tt.left?ft=-dragScrollSpeed(Tt.left-$.clientX):$.clientX>=Tt.right&&(ft=dragScrollSpeed($.clientX-Tt.right)),$.clientY<=Tt.top?St=-dragScrollSpeed(Tt.top-$.clientY):$.clientY>=Tt.bottom&&(St=dragScrollSpeed($.clientY-Tt.bottom)),this.setScrollSpeed(ft,St)}up($){this.dragging==null&&this.select(this.lastEvent),this.dragging||$.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let $=this.view.contentDOM.ownerDocument;$.removeEventListener("mousemove",this.move),$.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed($,lt){this.scrollSpeed={x:$,y:lt},$||lt?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}select($){let lt=this.style.get($,this.extend,this.multiple);(this.mustSelect||!lt.eq(this.view.state.selection)||lt.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:lt,userEvent:"select.pointer"}),this.mustSelect=!1}update($){$.docChanged&&this.dragging&&(this.dragging=this.dragging.map($.changes)),this.style.update($)&&setTimeout(()=>this.select(this.lastEvent),20)}}function addsSelectionRange(dt,$){let lt=dt.state.facet(clickAddsSelectionRange);return lt.length?lt[0]($):browser.mac?$.metaKey:$.ctrlKey}function dragMovesSelection(dt,$){let lt=dt.state.facet(dragMovesSelection$1);return lt.length?lt[0]($):browser.mac?!$.altKey:!$.ctrlKey}function isInPrimarySelection(dt,$){let{main:lt}=dt.state.selection;if(lt.empty)return!1;let ft=getSelection(dt.root);if(!ft||ft.rangeCount==0)return!0;let St=ft.getRangeAt(0).getClientRects();for(let Tt=0;Tt<St.length;Tt++){let Ct=St[Tt];if(Ct.left<=$.clientX&&Ct.right>=$.clientX&&Ct.top<=$.clientY&&Ct.bottom>=$.clientY)return!0}return!1}function eventBelongsToEditor(dt,$){if(!$.bubbles)return!0;if($.defaultPrevented)return!1;for(let lt=$.target,ft;lt!=dt.contentDOM;lt=lt.parentNode)if(!lt||lt.nodeType==11||(ft=ContentView.get(lt))&&ft.ignoreEvent($))return!1;return!0}const handlers=Object.create(null),handlerOptions=Object.create(null),brokenClipboardAPI=browser.ie&&browser.ie_version<15||browser.ios&&browser.webkit_version<604;function capturePaste(dt){let $=dt.dom.parentNode;if(!$)return;let lt=$.appendChild(document.createElement("textarea"));lt.style.cssText="position: fixed; left: -10000px; top: 10px",lt.focus(),setTimeout(()=>{dt.focus(),lt.remove(),doPaste(dt,lt.value)},50)}function doPaste(dt,$){let{state:lt}=dt,ft,St=1,Tt=lt.toText($),Ct=Tt.lines==lt.selection.ranges.length;if(lastLinewiseCopy!=null&&lt.selection.ranges.every(Rt=>Rt.empty)&&lastLinewiseCopy==Tt.toString()){let Rt=-1;ft=lt.changeByRange(kt=>{let Nt=lt.doc.lineAt(kt.from);if(Nt.from==Rt)return{range:kt};Rt=Nt.from;let Bt=lt.toText((Ct?Tt.line(St++).text:$)+lt.lineBreak);return{changes:{from:Nt.from,insert:Bt},range:EditorSelection.cursor(kt.from+Bt.length)}})}else Ct?ft=lt.changeByRange(Rt=>{let kt=Tt.line(St++);return{changes:{from:Rt.from,to:Rt.to,insert:kt.text},range:EditorSelection.cursor(Rt.from+kt.length)}}):ft=lt.replaceSelection(Tt);dt.dispatch(ft,{userEvent:"input.paste",scrollIntoView:!0})}handlers.keydown=(dt,$)=>{dt.inputState.setSelectionOrigin("select"),$.keyCode==27?dt.inputState.lastEscPress=Date.now():modifierCodes.indexOf($.keyCode)<0&&(dt.inputState.lastEscPress=0)};handlers.touchstart=(dt,$)=>{dt.inputState.lastTouchTime=Date.now(),dt.inputState.setSelectionOrigin("select.pointer")};handlers.touchmove=dt=>{dt.inputState.setSelectionOrigin("select.pointer")};handlerOptions.touchstart=handlerOptions.touchmove={passive:!0};handlers.mousedown=(dt,$)=>{if(dt.observer.flush(),dt.inputState.lastTouchTime>Date.now()-2e3)return;let lt=null;for(let ft of dt.state.facet(mouseSelectionStyle))if(lt=ft(dt,$),lt)break;if(!lt&&$.button==0&&(lt=basicMouseSelection(dt,$)),lt){let ft=dt.root.activeElement!=dt.contentDOM;dt.inputState.startMouseSelection(new MouseSelection(dt,$,lt,ft)),ft&&dt.observer.ignore(()=>focusPreventScroll(dt.contentDOM)),dt.inputState.mouseSelection&&dt.inputState.mouseSelection.start($)}};function rangeForClick(dt,$,lt,ft){if(ft==1)return EditorSelection.cursor($,lt);if(ft==2)return groupAt(dt.state,$,lt);{let St=LineView.find(dt.docView,$),Tt=dt.state.doc.lineAt(St?St.posAtEnd:$),Ct=St?St.posAtStart:Tt.from,At=St?St.posAtEnd:Tt.to;return At<dt.state.doc.length&&At==Tt.to&&At++,EditorSelection.range(Ct,At)}}let insideY=(dt,$)=>dt>=$.top&&dt<=$.bottom,inside=(dt,$,lt)=>insideY($,lt)&&dt>=lt.left&&dt<=lt.right;function findPositionSide(dt,$,lt,ft){let St=LineView.find(dt.docView,$);if(!St)return 1;let Tt=$-St.posAtStart;if(Tt==0)return 1;if(Tt==St.length)return-1;let Ct=St.coordsAt(Tt,-1);if(Ct&&inside(lt,ft,Ct))return-1;let At=St.coordsAt(Tt,1);return At&&inside(lt,ft,At)?1:Ct&&insideY(ft,Ct)?-1:1}function queryPos(dt,$){let lt=dt.posAtCoords({x:$.clientX,y:$.clientY},!1);return{pos:lt,bias:findPositionSide(dt,lt,$.clientX,$.clientY)}}const BadMouseDetail=browser.ie&&browser.ie_version<=11;let lastMouseDown=null,lastMouseDownCount=0,lastMouseDownTime=0;function getClickType(dt){if(!BadMouseDetail)return dt.detail;let $=lastMouseDown,lt=lastMouseDownTime;return lastMouseDown=dt,lastMouseDownTime=Date.now(),lastMouseDownCount=!$||lt>Date.now()-400&&Math.abs($.clientX-dt.clientX)<2&&Math.abs($.clientY-dt.clientY)<2?(lastMouseDownCount+1)%3:1}function basicMouseSelection(dt,$){let lt=queryPos(dt,$),ft=getClickType($),St=dt.state.selection;return{update(Tt){Tt.docChanged&&(lt.pos=Tt.changes.mapPos(lt.pos),St=St.map(Tt.changes))},get(Tt,Ct,At){let Rt=queryPos(dt,Tt),kt=rangeForClick(dt,Rt.pos,Rt.bias,ft);if(lt.pos!=Rt.pos&&!Ct){let Nt=rangeForClick(dt,lt.pos,lt.bias,ft),Bt=Math.min(Nt.from,kt.from),Ut=Math.max(Nt.to,kt.to);kt=Bt<kt.from?EditorSelection.range(Bt,Ut):EditorSelection.range(Ut,Bt)}return Ct?St.replaceRange(St.main.extend(kt.from,kt.to)):At&&St.ranges.length>1&&St.ranges.some(Nt=>Nt.eq(kt))?removeRange(St,kt):At?St.addRange(kt):EditorSelection.create([kt])}}}function removeRange(dt,$){for(let lt=0;;lt++)if(dt.ranges[lt].eq($))return EditorSelection.create(dt.ranges.slice(0,lt).concat(dt.ranges.slice(lt+1)),dt.mainIndex==lt?0:dt.mainIndex-(dt.mainIndex>lt?1:0))}handlers.dragstart=(dt,$)=>{let{selection:{main:lt}}=dt.state,{mouseSelection:ft}=dt.inputState;ft&&(ft.dragging=lt),$.dataTransfer&&($.dataTransfer.setData("Text",dt.state.sliceDoc(lt.from,lt.to)),$.dataTransfer.effectAllowed="copyMove")};function dropText(dt,$,lt,ft){if(!lt)return;let St=dt.posAtCoords({x:$.clientX,y:$.clientY},!1);$.preventDefault();let{mouseSelection:Tt}=dt.inputState,Ct=ft&&Tt&&Tt.dragging&&Tt.dragMove?{from:Tt.dragging.from,to:Tt.dragging.to}:null,At={from:St,insert:lt},Rt=dt.state.changes(Ct?[Ct,At]:At);dt.focus(),dt.dispatch({changes:Rt,selection:{anchor:Rt.mapPos(St,-1),head:Rt.mapPos(St,1)},userEvent:Ct?"move.drop":"input.drop"})}handlers.drop=(dt,$)=>{if(!$.dataTransfer)return;if(dt.state.readOnly)return $.preventDefault();let lt=$.dataTransfer.files;if(lt&&lt.length){$.preventDefault();let ft=Array(lt.length),St=0,Tt=()=>{++St==lt.length&&dropText(dt,$,ft.filter(Ct=>Ct!=null).join(dt.state.lineBreak),!1)};for(let Ct=0;Ct<lt.length;Ct++){let At=new FileReader;At.onerror=Tt,At.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(At.result)||(ft[Ct]=At.result),Tt()},At.readAsText(lt[Ct])}}else dropText(dt,$,$.dataTransfer.getData("Text"),!0)};handlers.paste=(dt,$)=>{if(dt.state.readOnly)return $.preventDefault();dt.observer.flush();let lt=brokenClipboardAPI?null:$.clipboardData;lt?(doPaste(dt,lt.getData("text/plain")),$.preventDefault()):capturePaste(dt)};function captureCopy(dt,$){let lt=dt.dom.parentNode;if(!lt)return;let ft=lt.appendChild(document.createElement("textarea"));ft.style.cssText="position: fixed; left: -10000px; top: 10px",ft.value=$,ft.focus(),ft.selectionEnd=$.length,ft.selectionStart=0,setTimeout(()=>{ft.remove(),dt.focus()},50)}function copiedRange(dt){let $=[],lt=[],ft=!1;for(let St of dt.selection.ranges)St.empty||($.push(dt.sliceDoc(St.from,St.to)),lt.push(St));if(!$.length){let St=-1;for(let{from:Tt}of dt.selection.ranges){let Ct=dt.doc.lineAt(Tt);Ct.number>St&&($.push(Ct.text),lt.push({from:Ct.from,to:Math.min(dt.doc.length,Ct.to+1)})),St=Ct.number}ft=!0}return{text:$.join(dt.lineBreak),ranges:lt,linewise:ft}}let lastLinewiseCopy=null;handlers.copy=handlers.cut=(dt,$)=>{let{text:lt,ranges:ft,linewise:St}=copiedRange(dt.state);if(!lt&&!St)return;lastLinewiseCopy=St?lt:null;let Tt=brokenClipboardAPI?null:$.clipboardData;Tt?($.preventDefault(),Tt.clearData(),Tt.setData("text/plain",lt)):captureCopy(dt,lt),$.type=="cut"&&!dt.state.readOnly&&dt.dispatch({changes:ft,scrollIntoView:!0,userEvent:"delete.cut"})};const isFocusChange=Annotation.define();function focusChangeTransaction(dt,$){let lt=[];for(let ft of dt.facet(focusChangeEffect)){let St=ft(dt,$);St&&lt.push(St)}return lt?dt.update({effects:lt,annotations:isFocusChange.of(!0)}):null}function updateForFocusChange(dt){setTimeout(()=>{let $=dt.hasFocus;if($!=dt.inputState.notifiedFocused){let lt=focusChangeTransaction(dt.state,$);lt?dt.dispatch(lt):dt.update([])}},10)}handlers.focus=dt=>{dt.inputState.lastFocusTime=Date.now(),!dt.scrollDOM.scrollTop&&(dt.inputState.lastScrollTop||dt.inputState.lastScrollLeft)&&(dt.scrollDOM.scrollTop=dt.inputState.lastScrollTop,dt.scrollDOM.scrollLeft=dt.inputState.lastScrollLeft),updateForFocusChange(dt)};handlers.blur=dt=>{dt.observer.clearSelectionRange(),updateForFocusChange(dt)};handlers.compositionstart=handlers.compositionupdate=dt=>{dt.inputState.compositionFirstChange==null&&(dt.inputState.compositionFirstChange=!0),dt.inputState.composing<0&&(dt.inputState.composing=0)};handlers.compositionend=dt=>{dt.inputState.composing=-1,dt.inputState.compositionEndedAt=Date.now(),dt.inputState.compositionFirstChange=null,browser.chrome&&browser.android&&dt.observer.flushSoon(),setTimeout(()=>{dt.inputState.composing<0&&dt.docView.compositionDeco.size&&dt.update([])},50)};handlers.contextmenu=dt=>{dt.inputState.lastContextMenu=Date.now()};handlers.beforeinput=(dt,$)=>{var lt;let ft;if(browser.chrome&&browser.android&&(ft=PendingKeys.find(St=>St.inputType==$.inputType))&&(dt.observer.delayAndroidKey(ft.key,ft.keyCode),ft.key=="Backspace"||ft.key=="Delete")){let St=((lt=window.visualViewport)===null||lt===void 0?void 0:lt.height)||0;setTimeout(()=>{var Tt;(((Tt=window.visualViewport)===null||Tt===void 0?void 0:Tt.height)||0)>St+10&&dt.hasFocus&&(dt.contentDOM.blur(),dt.focus())},100)}};const wrappingWhiteSpace=["pre-wrap","normal","pre-line","break-spaces"];class HeightOracle{constructor($){this.lineWrapping=$,this.doc=Text.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap($,lt){let ft=this.doc.lineAt(lt).number-this.doc.lineAt($).number+1;return this.lineWrapping&&(ft+=Math.max(0,Math.ceil((lt-$-ft*this.lineLength*.5)/this.lineLength))),this.lineHeight*ft}heightForLine($){return this.lineWrapping?(1+Math.max(0,Math.ceil(($-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc($){return this.doc=$,this}mustRefreshForWrapping($){return wrappingWhiteSpace.indexOf($)>-1!=this.lineWrapping}mustRefreshForHeights($){let lt=!1;for(let ft=0;ft<$.length;ft++){let St=$[ft];St<0?ft++:this.heightSamples[Math.floor(St*10)]||(lt=!0,this.heightSamples[Math.floor(St*10)]=!0)}return lt}refresh($,lt,ft,St,Tt){let Ct=wrappingWhiteSpace.indexOf($)>-1,At=Math.round(lt)!=Math.round(this.lineHeight)||this.lineWrapping!=Ct;if(this.lineWrapping=Ct,this.lineHeight=lt,this.charWidth=ft,this.lineLength=St,At){this.heightSamples={};for(let Rt=0;Rt<Tt.length;Rt++){let kt=Tt[Rt];kt<0?Rt++:this.heightSamples[Math.floor(kt*10)]=!0}}return At}}class MeasuredHeights{constructor($,lt){this.from=$,this.heights=lt,this.index=0}get more(){return this.index<this.heights.length}}class BlockInfo{constructor($,lt,ft,St,Tt){this.from=$,this.length=lt,this.top=ft,this.height=St,this.type=Tt}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join($){let lt=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray($.type)?$.type:[$]);return new BlockInfo(this.from,this.length+$.length,this.top,this.height+$.height,lt)}}var QueryType$1=function(dt){return dt[dt.ByPos=0]="ByPos",dt[dt.ByHeight=1]="ByHeight",dt[dt.ByPosNoHeight=2]="ByPosNoHeight",dt}(QueryType$1||(QueryType$1={}));const Epsilon=.001;class HeightMap{constructor($,lt,ft=2){this.length=$,this.height=lt,this.flags=ft}get outdated(){return(this.flags&2)>0}set outdated($){this.flags=($?2:0)|this.flags&-3}setHeight($,lt){this.height!=lt&&(Math.abs(this.height-lt)>Epsilon&&($.heightChanged=!0),this.height=lt)}replace($,lt,ft){return HeightMap.of(ft)}decomposeLeft($,lt){lt.push(this)}decomposeRight($,lt){lt.push(this)}applyChanges($,lt,ft,St){let Tt=this,Ct=ft.doc;for(let At=St.length-1;At>=0;At--){let{fromA:Rt,toA:kt,fromB:Nt,toB:Bt}=St[At],Ut=Tt.lineAt(Rt,QueryType$1.ByPosNoHeight,ft.setDoc(lt),0,0),zt=Ut.to>=kt?Ut:Tt.lineAt(kt,QueryType$1.ByPosNoHeight,ft,0,0);for(Bt+=zt.to-kt,kt=zt.to;At>0&&Ut.from<=St[At-1].toA;)Rt=St[At-1].fromA,Nt=St[At-1].fromB,At--,Rt<Ut.from&&(Ut=Tt.lineAt(Rt,QueryType$1.ByPosNoHeight,ft,0,0));Nt+=Ut.from-Rt,Rt=Ut.from;let Zt=NodeBuilder.build(ft.setDoc(Ct),$,Nt,Bt);Tt=Tt.replace(Rt,kt,Zt)}return Tt.updateHeight(ft,0)}static empty(){return new HeightMapText(0,0)}static of($){if($.length==1)return $[0];let lt=0,ft=$.length,St=0,Tt=0;for(;;)if(lt==ft)if(St>Tt*2){let At=$[lt-1];At.break?$.splice(--lt,1,At.left,null,At.right):$.splice(--lt,1,At.left,At.right),ft+=1+At.break,St-=At.size}else if(Tt>St*2){let At=$[ft];At.break?$.splice(ft,1,At.left,null,At.right):$.splice(ft,1,At.left,At.right),ft+=2+At.break,Tt-=At.size}else break;else if(St<Tt){let At=$[lt++];At&&(St+=At.size)}else{let At=$[--ft];At&&(Tt+=At.size)}let Ct=0;return $[lt-1]==null?(Ct=1,lt--):$[lt]==null&&(Ct=1,ft++),new HeightMapBranch(HeightMap.of($.slice(0,lt)),Ct,HeightMap.of($.slice(ft)))}}HeightMap.prototype.size=1;class HeightMapBlock extends HeightMap{constructor($,lt,ft){super($,lt),this.type=ft}blockAt($,lt,ft,St){return new BlockInfo(St,this.length,ft,this.height,this.type)}lineAt($,lt,ft,St,Tt){return this.blockAt(0,ft,St,Tt)}forEachLine($,lt,ft,St,Tt,Ct){$<=Tt+this.length&&lt>=Tt&&Ct(this.blockAt(0,ft,St,Tt))}updateHeight($,lt=0,ft=!1,St){return St&&St.from<=lt&&St.more&&this.setHeight($,St.heights[St.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class HeightMapText extends HeightMapBlock{constructor($,lt){super($,lt,BlockType.Text),this.collapsed=0,this.widgetHeight=0}replace($,lt,ft){let St=ft[0];return ft.length==1&&(St instanceof HeightMapText||St instanceof HeightMapGap&&St.flags&4)&&Math.abs(this.length-St.length)<10?(St instanceof HeightMapGap?St=new HeightMapText(St.length,this.height):St.height=this.height,this.outdated||(St.outdated=!1),St):HeightMap.of(ft)}updateHeight($,lt=0,ft=!1,St){return St&&St.from<=lt&&St.more?this.setHeight($,St.heights[St.index++]):(ft||this.outdated)&&this.setHeight($,Math.max(this.widgetHeight,$.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class HeightMapGap extends HeightMap{constructor($){super($,0)}heightMetrics($,lt){let ft=$.doc.lineAt(lt).number,St=$.doc.lineAt(lt+this.length).number,Tt=St-ft+1,Ct,At=0;if($.lineWrapping){let Rt=Math.min(this.height,$.lineHeight*Tt);Ct=Rt/Tt,At=(this.height-Rt)/(this.length-Tt-1)}else Ct=this.height/Tt;return{firstLine:ft,lastLine:St,perLine:Ct,perChar:At}}blockAt($,lt,ft,St){let{firstLine:Tt,lastLine:Ct,perLine:At,perChar:Rt}=this.heightMetrics(lt,St);if(lt.lineWrapping){let kt=St+Math.round(Math.max(0,Math.min(1,($-ft)/this.height))*this.length),Nt=lt.doc.lineAt(kt),Bt=At+Nt.length*Rt,Ut=Math.max(ft,$-Bt/2);return new BlockInfo(Nt.from,Nt.length,Ut,Bt,BlockType.Text)}else{let kt=Math.max(0,Math.min(Ct-Tt,Math.floor(($-ft)/At))),{from:Nt,length:Bt}=lt.doc.line(Tt+kt);return new BlockInfo(Nt,Bt,ft+At*kt,At,BlockType.Text)}}lineAt($,lt,ft,St,Tt){if(lt==QueryType$1.ByHeight)return this.blockAt($,ft,St,Tt);if(lt==QueryType$1.ByPosNoHeight){let{from:zt,to:Zt}=ft.doc.lineAt($);return new BlockInfo(zt,Zt-zt,0,0,BlockType.Text)}let{firstLine:Ct,perLine:At,perChar:Rt}=this.heightMetrics(ft,Tt),kt=ft.doc.lineAt($),Nt=At+kt.length*Rt,Bt=kt.number-Ct,Ut=St+At*Bt+Rt*(kt.from-Tt-Bt);return new BlockInfo(kt.from,kt.length,Math.max(St,Math.min(Ut,St+this.height-Nt)),Nt,BlockType.Text)}forEachLine($,lt,ft,St,Tt,Ct){$=Math.max($,Tt),lt=Math.min(lt,Tt+this.length);let{firstLine:At,perLine:Rt,perChar:kt}=this.heightMetrics(ft,Tt);for(let Nt=$,Bt=St;Nt<=lt;){let Ut=ft.doc.lineAt(Nt);if(Nt==$){let Zt=Ut.number-At;Bt+=Rt*Zt+kt*($-Tt-Zt)}let zt=Rt+kt*Ut.length;Ct(new BlockInfo(Ut.from,Ut.length,Bt,zt,BlockType.Text)),Bt+=zt,Nt=Ut.to+1}}replace($,lt,ft){let St=this.length-lt;if(St>0){let Tt=ft[ft.length-1];Tt instanceof HeightMapGap?ft[ft.length-1]=new HeightMapGap(Tt.length+St):ft.push(null,new HeightMapGap(St-1))}if($>0){let Tt=ft[0];Tt instanceof HeightMapGap?ft[0]=new HeightMapGap($+Tt.length):ft.unshift(new HeightMapGap($-1),null)}return HeightMap.of(ft)}decomposeLeft($,lt){lt.push(new HeightMapGap($-1),null)}decomposeRight($,lt){lt.push(null,new HeightMapGap(this.length-$-1))}updateHeight($,lt=0,ft=!1,St){let Tt=lt+this.length;if(St&&St.from<=lt+this.length&&St.more){let Ct=[],At=Math.max(lt,St.from),Rt=-1;for(St.from>lt&&Ct.push(new HeightMapGap(St.from-lt-1).updateHeight($,lt));At<=Tt&&St.more;){let Nt=$.doc.lineAt(At).length;Ct.length&&Ct.push(null);let Bt=St.heights[St.index++];Rt==-1?Rt=Bt:Math.abs(Bt-Rt)>=Epsilon&&(Rt=-2);let Ut=new HeightMapText(Nt,Bt);Ut.outdated=!1,Ct.push(Ut),At+=Nt+1}At<=Tt&&Ct.push(null,new HeightMapGap(Tt-At).updateHeight($,At));let kt=HeightMap.of(Ct);return(Rt<0||Math.abs(kt.height-this.height)>=Epsilon||Math.abs(Rt-this.heightMetrics($,lt).perLine)>=Epsilon)&&($.heightChanged=!0),kt}else(ft||this.outdated)&&(this.setHeight($,$.heightForGap(lt,lt+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class HeightMapBranch extends HeightMap{constructor($,lt,ft){super($.length+lt+ft.length,$.height+ft.height,lt|($.outdated||ft.outdated?2:0)),this.left=$,this.right=ft,this.size=$.size+ft.size}get break(){return this.flags&1}blockAt($,lt,ft,St){let Tt=ft+this.left.height;return $<Tt?this.left.blockAt($,lt,ft,St):this.right.blockAt($,lt,Tt,St+this.left.length+this.break)}lineAt($,lt,ft,St,Tt){let Ct=St+this.left.height,At=Tt+this.left.length+this.break,Rt=lt==QueryType$1.ByHeight?$<Ct:$<At,kt=Rt?this.left.lineAt($,lt,ft,St,Tt):this.right.lineAt($,lt,ft,Ct,At);if(this.break||(Rt?kt.to<At:kt.from>At))return kt;let Nt=lt==QueryType$1.ByPosNoHeight?QueryType$1.ByPosNoHeight:QueryType$1.ByPos;return Rt?kt.join(this.right.lineAt(At,Nt,ft,Ct,At)):this.left.lineAt(At,Nt,ft,St,Tt).join(kt)}forEachLine($,lt,ft,St,Tt,Ct){let At=St+this.left.height,Rt=Tt+this.left.length+this.break;if(this.break)$<Rt&&this.left.forEachLine($,lt,ft,St,Tt,Ct),lt>=Rt&&this.right.forEachLine($,lt,ft,At,Rt,Ct);else{let kt=this.lineAt(Rt,QueryType$1.ByPos,ft,St,Tt);$<kt.from&&this.left.forEachLine($,kt.from-1,ft,St,Tt,Ct),kt.to>=$&&kt.from<=lt&&Ct(kt),lt>kt.to&&this.right.forEachLine(kt.to+1,lt,ft,At,Rt,Ct)}}replace($,lt,ft){let St=this.left.length+this.break;if(lt<St)return this.balanced(this.left.replace($,lt,ft),this.right);if($>this.left.length)return this.balanced(this.left,this.right.replace($-St,lt-St,ft));let Tt=[];$>0&&this.decomposeLeft($,Tt);let Ct=Tt.length;for(let At of ft)Tt.push(At);if($>0&&mergeGaps(Tt,Ct-1),lt<this.length){let At=Tt.length;this.decomposeRight(lt,Tt),mergeGaps(Tt,At)}return HeightMap.of(Tt)}decomposeLeft($,lt){let ft=this.left.length;if($<=ft)return this.left.decomposeLeft($,lt);lt.push(this.left),this.break&&(ft++,$>=ft&&lt.push(null)),$>ft&&this.right.decomposeLeft($-ft,lt)}decomposeRight($,lt){let ft=this.left.length,St=ft+this.break;if($>=St)return this.right.decomposeRight($-St,lt);$<ft&&this.left.decomposeRight($,lt),this.break&&$<St&&lt.push(null),lt.push(this.right)}balanced($,lt){return $.size>2*lt.size||lt.size>2*$.size?HeightMap.of(this.break?[$,null,lt]:[$,lt]):(this.left=$,this.right=lt,this.height=$.height+lt.height,this.outdated=$.outdated||lt.outdated,this.size=$.size+lt.size,this.length=$.length+this.break+lt.length,this)}updateHeight($,lt=0,ft=!1,St){let{left:Tt,right:Ct}=this,At=lt+Tt.length+this.break,Rt=null;return St&&St.from<=lt+Tt.length&&St.more?Rt=Tt=Tt.updateHeight($,lt,ft,St):Tt.updateHeight($,lt,ft),St&&St.from<=At+Ct.length&&St.more?Rt=Ct=Ct.updateHeight($,At,ft,St):Ct.updateHeight($,At,ft),Rt?this.balanced(Tt,Ct):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function mergeGaps(dt,$){let lt,ft;dt[$]==null&&(lt=dt[$-1])instanceof HeightMapGap&&(ft=dt[$+1])instanceof HeightMapGap&&dt.splice($-1,3,new HeightMapGap(lt.length+1+ft.length))}const relevantWidgetHeight=5;class NodeBuilder{constructor($,lt){this.pos=$,this.oracle=lt,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=$}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span($,lt){if(this.lineStart>-1){let ft=Math.min(lt,this.lineEnd),St=this.nodes[this.nodes.length-1];St instanceof HeightMapText?St.length+=ft-this.pos:(ft>this.pos||!this.isCovered)&&this.nodes.push(new HeightMapText(ft-this.pos,-1)),this.writtenTo=ft,lt>ft&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=lt}point($,lt,ft){if($<lt||ft.heightRelevant){let St=ft.widget?ft.widget.estimatedHeight:0;St<0&&(St=this.oracle.lineHeight);let Tt=lt-$;ft.block?this.addBlock(new HeightMapBlock(Tt,St,ft.type)):(Tt||St>=relevantWidgetHeight)&&this.addLineDeco(St,Tt)}else lt>$&&this.span($,lt);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:$,to:lt}=this.oracle.doc.lineAt(this.pos);this.lineStart=$,this.lineEnd=lt,this.writtenTo<$&&((this.writtenTo<$-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,$-1)),this.nodes.push(null)),this.pos>$&&this.nodes.push(new HeightMapText(this.pos-$,-1)),this.writtenTo=this.pos}blankContent($,lt){let ft=new HeightMapGap(lt-$);return this.oracle.doc.lineAt($).to==lt&&(ft.flags|=4),ft}ensureLine(){this.enterLine();let $=this.nodes.length?this.nodes[this.nodes.length-1]:null;if($ instanceof HeightMapText)return $;let lt=new HeightMapText(0,-1);return this.nodes.push(lt),lt}addBlock($){this.enterLine(),$.type==BlockType.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push($),this.writtenTo=this.pos=this.pos+$.length,$.type!=BlockType.WidgetBefore&&(this.covering=$)}addLineDeco($,lt){let ft=this.ensureLine();ft.length+=lt,ft.collapsed+=lt,ft.widgetHeight=Math.max(ft.widgetHeight,$),this.writtenTo=this.pos=this.pos+lt}finish($){let lt=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(lt instanceof HeightMapText)&&!this.isCovered?this.nodes.push(new HeightMapText(0,-1)):(this.writtenTo<this.pos||lt==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let ft=$;for(let St of this.nodes)St instanceof HeightMapText&&St.updateHeight(this.oracle,ft),ft+=St?St.length:1;return this.nodes}static build($,lt,ft,St){let Tt=new NodeBuilder(ft,$);return RangeSet.spans(lt,ft,St,Tt,0),Tt.finish(ft)}}function heightRelevantDecoChanges(dt,$,lt){let ft=new DecorationComparator;return RangeSet.compare(dt,$,lt,ft,0),ft.changes}class DecorationComparator{constructor(){this.changes=[]}compareRange(){}comparePoint($,lt,ft,St){($<lt||ft&&ft.heightRelevant||St&&St.heightRelevant)&&addRange($,lt,this.changes,5)}}function visiblePixelRange(dt,$){let lt=dt.getBoundingClientRect(),ft=dt.ownerDocument,St=ft.defaultView||window,Tt=Math.max(0,lt.left),Ct=Math.min(St.innerWidth,lt.right),At=Math.max(0,lt.top),Rt=Math.min(St.innerHeight,lt.bottom);for(let kt=dt.parentNode;kt&&kt!=ft.body;)if(kt.nodeType==1){let Nt=kt,Bt=window.getComputedStyle(Nt);if((Nt.scrollHeight>Nt.clientHeight||Nt.scrollWidth>Nt.clientWidth)&&Bt.overflow!="visible"){let Ut=Nt.getBoundingClientRect();Tt=Math.max(Tt,Ut.left),Ct=Math.min(Ct,Ut.right),At=Math.max(At,Ut.top),Rt=kt==dt.parentNode?Ut.bottom:Math.min(Rt,Ut.bottom)}kt=Bt.position=="absolute"||Bt.position=="fixed"?Nt.offsetParent:Nt.parentNode}else if(kt.nodeType==11)kt=kt.host;else break;return{left:Tt-lt.left,right:Math.max(Tt,Ct)-lt.left,top:At-(lt.top+$),bottom:Math.max(At,Rt)-(lt.top+$)}}function fullPixelRange(dt,$){let lt=dt.getBoundingClientRect();return{left:0,right:lt.right-lt.left,top:$,bottom:lt.bottom-(lt.top+$)}}class LineGap{constructor($,lt,ft){this.from=$,this.to=lt,this.size=ft}static same($,lt){if($.length!=lt.length)return!1;for(let ft=0;ft<$.length;ft++){let St=$[ft],Tt=lt[ft];if(St.from!=Tt.from||St.to!=Tt.to||St.size!=Tt.size)return!1}return!0}draw($){return Decoration.replace({widget:new LineGapWidget(this.size,$)}).range(this.from,this.to)}}class LineGapWidget extends WidgetType{constructor($,lt){super(),this.size=$,this.vertical=lt}eq($){return $.size==this.size&&$.vertical==this.vertical}toDOM(){let $=document.createElement("div");return this.vertical?$.style.height=this.size+"px":($.style.width=this.size+"px",$.style.height="2px",$.style.display="inline-block"),$}get estimatedHeight(){return this.vertical?this.size:-1}}class ViewState{constructor($){this.state=$,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scaler=IdScaler,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Direction.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let lt=$.facet(contentAttributes).some(ft=>typeof ft!="function"&&ft.class=="cm-lineWrapping");this.heightOracle=new HeightOracle(lt),this.stateDeco=$.facet(decorations).filter(ft=>typeof ft!="function"),this.heightMap=HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle.setDoc($.doc),[new ChangedRange(0,0,0,$.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Decoration.set(this.lineGaps.map(ft=>ft.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let $=[this.viewport],{main:lt}=this.state.selection;for(let ft=0;ft<=1;ft++){let St=ft?lt.head:lt.anchor;if(!$.some(({from:Tt,to:Ct})=>St>=Tt&&St<=Ct)){let{from:Tt,to:Ct}=this.lineBlockAt(St);$.push(new Viewport(Tt,Ct))}}this.viewports=$.sort((ft,St)=>ft.from-St.from),this.scaler=this.heightMap.height<=7e6?IdScaler:new BigScaler(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,$=>{this.viewportLines.push(this.scaler.scale==1?$:scaleBlock($,this.scaler))})}update($,lt=null){this.state=$.state;let ft=this.stateDeco;this.stateDeco=this.state.facet(decorations).filter(kt=>typeof kt!="function");let St=$.changedRanges,Tt=ChangedRange.extendWithRanges(St,heightRelevantDecoChanges(ft,this.stateDeco,$?$.changes:ChangeSet.empty(this.state.doc.length))),Ct=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,$.startState.doc,this.heightOracle.setDoc(this.state.doc),Tt),this.heightMap.height!=Ct&&($.flags|=2);let At=Tt.length?this.mapViewport(this.viewport,$.changes):this.viewport;(lt&&(lt.range.head<At.from||lt.range.head>At.to)||!this.viewportIsAppropriate(At))&&(At=this.getViewport(0,lt));let Rt=!$.changes.empty||$.flags&2||At.from!=this.viewport.from||At.to!=this.viewport.to;this.viewport=At,this.updateForViewport(),Rt&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,$.changes))),$.flags|=this.computeVisibleRanges(),lt&&(this.scrollTarget=lt),!this.mustEnforceCursorAssoc&&$.selectionSet&&$.view.lineWrapping&&$.state.selection.main.empty&&$.state.selection.main.assoc&&!$.state.facet(nativeSelectionHidden)&&(this.mustEnforceCursorAssoc=!0)}measure($){let lt=$.contentDOM,ft=window.getComputedStyle(lt),St=this.heightOracle,Tt=ft.whiteSpace;this.defaultTextDirection=ft.direction=="rtl"?Direction.RTL:Direction.LTR;let Ct=this.heightOracle.mustRefreshForWrapping(Tt),At=lt.getBoundingClientRect(),Rt=Ct||this.mustMeasureContent||this.contentDOMHeight!=At.height;this.contentDOMHeight=At.height,this.mustMeasureContent=!1;let kt=0,Nt=0,Bt=parseInt(ft.paddingTop)||0,Ut=parseInt(ft.paddingBottom)||0;(this.paddingTop!=Bt||this.paddingBottom!=Ut)&&(this.paddingTop=Bt,this.paddingBottom=Ut,kt|=10),this.editorWidth!=$.scrollDOM.clientWidth&&(St.lineWrapping&&(Rt=!0),this.editorWidth=$.scrollDOM.clientWidth,kt|=8);let zt=(this.printing?fullPixelRange:visiblePixelRange)(lt,this.paddingTop),Zt=zt.top-this.pixelViewport.top,ln=zt.bottom-this.pixelViewport.bottom;this.pixelViewport=zt;let cn=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(cn!=this.inView&&(this.inView=cn,cn&&(Rt=!0)),!this.inView&&!this.scrollTarget)return 0;let hn=At.width;if((this.contentDOMWidth!=hn||this.editorHeight!=$.scrollDOM.clientHeight)&&(this.contentDOMWidth=At.width,this.editorHeight=$.scrollDOM.clientHeight,kt|=8),Rt){let dn=$.docView.measureVisibleLineHeights(this.viewport);if(St.mustRefreshForHeights(dn)&&(Ct=!0),Ct||St.lineWrapping&&Math.abs(hn-this.contentDOMWidth)>St.charWidth){let{lineHeight:gn,charWidth:vn}=$.docView.measureTextSize();Ct=gn>0&&St.refresh(Tt,gn,vn,hn/vn,dn),Ct&&($.docView.minWidth=0,kt|=8)}Zt>0&&ln>0?Nt=Math.max(Zt,ln):Zt<0&&ln<0&&(Nt=Math.min(Zt,ln)),St.heightChanged=!1;for(let gn of this.viewports){let vn=gn.from==this.viewport.from?dn:$.docView.measureVisibleLineHeights(gn);this.heightMap=(Ct?HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle,[new ChangedRange(0,0,0,$.state.doc.length)]):this.heightMap).updateHeight(St,0,Ct,new MeasuredHeights(gn.from,vn))}St.heightChanged&&(kt|=2)}let pn=!this.viewportIsAppropriate(this.viewport,Nt)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return pn&&(this.viewport=this.getViewport(Nt,this.scrollTarget)),this.updateForViewport(),(kt&2||pn)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(Ct?[]:this.lineGaps,$)),kt|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,$.docView.enforceCursorAssoc()),kt}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport($,lt){let ft=.5-Math.max(-.5,Math.min(.5,$/1e3/2)),St=this.heightMap,Tt=this.heightOracle,{visibleTop:Ct,visibleBottom:At}=this,Rt=new Viewport(St.lineAt(Ct-ft*1e3,QueryType$1.ByHeight,Tt,0,0).from,St.lineAt(At+(1-ft)*1e3,QueryType$1.ByHeight,Tt,0,0).to);if(lt){let{head:kt}=lt.range;if(kt<Rt.from||kt>Rt.to){let Nt=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),Bt=St.lineAt(kt,QueryType$1.ByPos,Tt,0,0),Ut;lt.y=="center"?Ut=(Bt.top+Bt.bottom)/2-Nt/2:lt.y=="start"||lt.y=="nearest"&&kt<Rt.from?Ut=Bt.top:Ut=Bt.bottom-Nt,Rt=new Viewport(St.lineAt(Ut-1e3/2,QueryType$1.ByHeight,Tt,0,0).from,St.lineAt(Ut+Nt+1e3/2,QueryType$1.ByHeight,Tt,0,0).to)}}return Rt}mapViewport($,lt){let ft=lt.mapPos($.from,-1),St=lt.mapPos($.to,1);return new Viewport(this.heightMap.lineAt(ft,QueryType$1.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(St,QueryType$1.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:$,to:lt},ft=0){if(!this.inView)return!0;let{top:St}=this.heightMap.lineAt($,QueryType$1.ByPos,this.heightOracle,0,0),{bottom:Tt}=this.heightMap.lineAt(lt,QueryType$1.ByPos,this.heightOracle,0,0),{visibleTop:Ct,visibleBottom:At}=this;return($==0||St<=Ct-Math.max(10,Math.min(-ft,250)))&&(lt==this.state.doc.length||Tt>=At+Math.max(10,Math.min(ft,250)))&&St>Ct-2*1e3&&Tt<At+2*1e3}mapLineGaps($,lt){if(!$.length||lt.empty)return $;let ft=[];for(let St of $)lt.touchesRange(St.from,St.to)||ft.push(new LineGap(lt.mapPos(St.from),lt.mapPos(St.to),St.size));return ft}ensureLineGaps($,lt){let ft=this.heightOracle.lineWrapping,St=ft?1e4:2e3,Tt=St>>1,Ct=St<<1;if(this.defaultTextDirection!=Direction.LTR&&!ft)return[];let At=[],Rt=(kt,Nt,Bt,Ut)=>{if(Nt-kt<Tt)return;let zt=this.state.selection.main,Zt=[zt.from];zt.empty||Zt.push(zt.to);for(let cn of Zt)if(cn>kt&&cn<Nt){Rt(kt,cn-10,Bt,Ut),Rt(cn+10,Nt,Bt,Ut);return}let ln=find($,cn=>cn.from>=Bt.from&&cn.to<=Bt.to&&Math.abs(cn.from-kt)<Tt&&Math.abs(cn.to-Nt)<Tt&&!Zt.some(hn=>cn.from<hn&&cn.to>hn));if(!ln){if(Nt<Bt.to&&lt&&ft&&lt.visibleRanges.some(cn=>cn.from<=Nt&&cn.to>=Nt)){let cn=lt.moveToLineBoundary(EditorSelection.cursor(Nt),!1,!0).head;cn>kt&&(Nt=cn)}ln=new LineGap(kt,Nt,this.gapSize(Bt,kt,Nt,Ut))}At.push(ln)};for(let kt of this.viewportLines){if(kt.length<Ct)continue;let Nt=lineStructure(kt.from,kt.to,this.stateDeco);if(Nt.total<Ct)continue;let Bt=this.scrollTarget?this.scrollTarget.range.head:null,Ut,zt;if(ft){let Zt=St/this.heightOracle.lineLength*this.heightOracle.lineHeight,ln,cn;if(Bt!=null){let hn=findFraction(Nt,Bt),pn=((this.visibleBottom-this.visibleTop)/2+Zt)/kt.height;ln=hn-pn,cn=hn+pn}else ln=(this.visibleTop-kt.top-Zt)/kt.height,cn=(this.visibleBottom-kt.top+Zt)/kt.height;Ut=findPosition(Nt,ln),zt=findPosition(Nt,cn)}else{let Zt=Nt.total*this.heightOracle.charWidth,ln=St*this.heightOracle.charWidth,cn,hn;if(Bt!=null){let pn=findFraction(Nt,Bt),dn=((this.pixelViewport.right-this.pixelViewport.left)/2+ln)/Zt;cn=pn-dn,hn=pn+dn}else cn=(this.pixelViewport.left-ln)/Zt,hn=(this.pixelViewport.right+ln)/Zt;Ut=findPosition(Nt,cn),zt=findPosition(Nt,hn)}Ut>kt.from&&Rt(kt.from,Ut,kt,Nt),zt<kt.to&&Rt(zt,kt.to,kt,Nt)}return At}gapSize($,lt,ft,St){let Tt=findFraction(St,ft)-findFraction(St,lt);return this.heightOracle.lineWrapping?$.height*Tt:St.total*this.heightOracle.charWidth*Tt}updateLineGaps($){LineGap.same($,this.lineGaps)||(this.lineGaps=$,this.lineGapDeco=Decoration.set($.map(lt=>lt.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let $=this.stateDeco;this.lineGaps.length&&($=$.concat(this.lineGapDeco));let lt=[];RangeSet.spans($,this.viewport.from,this.viewport.to,{span(St,Tt){lt.push({from:St,to:Tt})},point(){}},20);let ft=lt.length!=this.visibleRanges.length||this.visibleRanges.some((St,Tt)=>St.from!=lt[Tt].from||St.to!=lt[Tt].to);return this.visibleRanges=lt,ft?4:0}lineBlockAt($){return $>=this.viewport.from&&$<=this.viewport.to&&this.viewportLines.find(lt=>lt.from<=$&&lt.to>=$)||scaleBlock(this.heightMap.lineAt($,QueryType$1.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight($){return scaleBlock(this.heightMap.lineAt(this.scaler.fromDOM($),QueryType$1.ByHeight,this.heightOracle,0,0),this.scaler)}elementAtHeight($){return scaleBlock(this.heightMap.blockAt(this.scaler.fromDOM($),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Viewport{constructor($,lt){this.from=$,this.to=lt}}function lineStructure(dt,$,lt){let ft=[],St=dt,Tt=0;return RangeSet.spans(lt,dt,$,{span(){},point(Ct,At){Ct>St&&(ft.push({from:St,to:Ct}),Tt+=Ct-St),St=At}},20),St<$&&(ft.push({from:St,to:$}),Tt+=$-St),{total:Tt,ranges:ft}}function findPosition({total:dt,ranges:$},lt){if(lt<=0)return $[0].from;if(lt>=1)return $[$.length-1].to;let ft=Math.floor(dt*lt);for(let St=0;;St++){let{from:Tt,to:Ct}=$[St],At=Ct-Tt;if(ft<=At)return Tt+ft;ft-=At}}function findFraction(dt,$){let lt=0;for(let{from:ft,to:St}of dt.ranges){if($<=St){lt+=$-ft;break}lt+=St-ft}return lt/dt.total}function find(dt,$){for(let lt of dt)if($(lt))return lt}const IdScaler={toDOM(dt){return dt},fromDOM(dt){return dt},scale:1};class BigScaler{constructor($,lt,ft){let St=0,Tt=0,Ct=0;this.viewports=ft.map(({from:At,to:Rt})=>{let kt=lt.lineAt(At,QueryType$1.ByPos,$,0,0).top,Nt=lt.lineAt(Rt,QueryType$1.ByPos,$,0,0).bottom;return St+=Nt-kt,{from:At,to:Rt,top:kt,bottom:Nt,domTop:0,domBottom:0}}),this.scale=(7e6-St)/(lt.height-St);for(let At of this.viewports)At.domTop=Ct+(At.top-Tt)*this.scale,Ct=At.domBottom=At.domTop+(At.bottom-At.top),Tt=At.bottom}toDOM($){for(let lt=0,ft=0,St=0;;lt++){let Tt=lt<this.viewports.length?this.viewports[lt]:null;if(!Tt||$<Tt.top)return St+($-ft)*this.scale;if($<=Tt.bottom)return Tt.domTop+($-Tt.top);ft=Tt.bottom,St=Tt.domBottom}}fromDOM($){for(let lt=0,ft=0,St=0;;lt++){let Tt=lt<this.viewports.length?this.viewports[lt]:null;if(!Tt||$<Tt.domTop)return ft+($-St)/this.scale;if($<=Tt.domBottom)return Tt.top+($-Tt.domTop);ft=Tt.bottom,St=Tt.domBottom}}}function scaleBlock(dt,$){if($.scale==1)return dt;let lt=$.toDOM(dt.top),ft=$.toDOM(dt.bottom);return new BlockInfo(dt.from,dt.length,lt,ft-lt,Array.isArray(dt.type)?dt.type.map(St=>scaleBlock(St,$)):dt.type)}const theme=Facet.define({combine:dt=>dt.join(" ")}),darkTheme=Facet.define({combine:dt=>dt.indexOf(!0)>-1}),baseThemeID=StyleModule.newName(),baseLightID=StyleModule.newName(),baseDarkID=StyleModule.newName(),lightDarkIDs={"&light":"."+baseLightID,"&dark":"."+baseDarkID};function buildTheme(dt,$,lt){return new StyleModule($,{finish(ft){return/&/.test(ft)?ft.replace(/&\w*/,St=>{if(St=="&")return dt;if(!lt||!lt[St])throw new RangeError(`Unsupported selector: ${St}`);return lt[St]}):dt+" "+ft}})}const baseTheme$1$2=buildTheme("."+baseThemeID,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},lightDarkIDs);class DOMChange{constructor($,lt,ft,St){this.typeOver=St,this.bounds=null,this.text="";let{impreciseHead:Tt,impreciseAnchor:Ct}=$.docView;if($.state.readOnly&&lt>-1)this.newSel=null;else if(lt>-1&&(this.bounds=$.docView.domBoundsAround(lt,ft,0))){let At=Tt||Ct?[]:selectionPoints($),Rt=new DOMReader(At,$.state);Rt.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=Rt.text,this.newSel=selectionFromPoints(At,this.bounds.from)}else{let At=$.observer.selectionRange,Rt=Tt&&Tt.node==At.focusNode&&Tt.offset==At.focusOffset||!contains($.contentDOM,At.focusNode)?$.state.selection.main.head:$.docView.posFromDOM(At.focusNode,At.focusOffset),kt=Ct&&Ct.node==At.anchorNode&&Ct.offset==At.anchorOffset||!contains($.contentDOM,At.anchorNode)?$.state.selection.main.anchor:$.docView.posFromDOM(At.anchorNode,At.anchorOffset);this.newSel=EditorSelection.single(kt,Rt)}}}function applyDOMChange(dt,$){let lt,{newSel:ft}=$,St=dt.state.selection.main;if($.bounds){let{from:Tt,to:Ct}=$.bounds,At=St.from,Rt=null;(dt.inputState.lastKeyCode===8&&dt.inputState.lastKeyTime>Date.now()-100||browser.android&&$.text.length<Ct-Tt)&&(At=St.to,Rt="end");let kt=findDiff(dt.state.doc.sliceString(Tt,Ct,LineBreakPlaceholder),$.text,At-Tt,Rt);kt&&(browser.chrome&&dt.inputState.lastKeyCode==13&&kt.toB==kt.from+2&&$.text.slice(kt.from,kt.toB)==LineBreakPlaceholder+LineBreakPlaceholder&&kt.toB--,lt={from:Tt+kt.from,to:Tt+kt.toA,insert:Text.of($.text.slice(kt.from,kt.toB).split(LineBreakPlaceholder))})}else ft&&(!dt.hasFocus&&dt.state.facet(editable)||ft.main.eq(St))&&(ft=null);if(!lt&&!ft)return!1;if(!lt&&$.typeOver&&!St.empty&&ft&&ft.main.empty?lt={from:St.from,to:St.to,insert:dt.state.doc.slice(St.from,St.to)}:lt&&lt.from>=St.from&&lt.to<=St.to&&(lt.from!=St.from||lt.to!=St.to)&&St.to-St.from-(lt.to-lt.from)<=4?lt={from:St.from,to:St.to,insert:dt.state.doc.slice(St.from,lt.from).append(lt.insert).append(dt.state.doc.slice(lt.to,St.to))}:(browser.mac||browser.android)&&lt&&lt.from==lt.to&&lt.from==St.head-1&&/^\. ?$/.test(lt.insert.toString())&&dt.contentDOM.getAttribute("autocorrect")=="off"?(ft&&lt.insert.length==2&&(ft=EditorSelection.single(ft.main.anchor-1,ft.main.head-1)),lt={from:St.from,to:St.to,insert:Text.of([" "])}):browser.chrome&&lt&&lt.from==lt.to&&lt.from==St.head&&lt.insert.toString()==`
 `&&dt.lineWrapping&&(ft&&(ft=EditorSelection.single(ft.main.anchor-1,ft.main.head-1)),lt={from:St.from,to:St.to,insert:Text.of([" "])}),lt){let Tt=dt.state;if(browser.ios&&dt.inputState.flushIOSKey(dt)||browser.android&&(lt.from==St.from&&lt.to==St.to&&lt.insert.length==1&&lt.insert.lines==2&&dispatchKey(dt.contentDOM,"Enter",13)||lt.from==St.from-1&&lt.to==St.to&&lt.insert.length==0&&dispatchKey(dt.contentDOM,"Backspace",8)||lt.from==St.from&&lt.to==St.to+1&&lt.insert.length==0&&dispatchKey(dt.contentDOM,"Delete",46)))return!0;let Ct=lt.insert.toString();if(dt.state.facet(inputHandler$1).some(kt=>kt(dt,lt.from,lt.to,Ct)))return!0;dt.inputState.composing>=0&&dt.inputState.composing++;let At;if(lt.from>=St.from&&lt.to<=St.to&&lt.to-lt.from>=(St.to-St.from)/3&&(!ft||ft.main.empty&&ft.main.from==lt.from+lt.insert.length)&&dt.inputState.composing<0){let kt=St.from<lt.from?Tt.sliceDoc(St.from,lt.from):"",Nt=St.to>lt.to?Tt.sliceDoc(lt.to,St.to):"";At=Tt.replaceSelection(dt.state.toText(kt+lt.insert.sliceString(0,void 0,dt.state.lineBreak)+Nt))}else{let kt=Tt.changes(lt),Nt=ft&&!Tt.selection.main.eq(ft.main)&&ft.main.to<=kt.newLength?ft.main:void 0;if(Tt.selection.ranges.length>1&&dt.inputState.composing>=0&&lt.to<=St.to&&lt.to>=St.to-10){let Bt=dt.state.sliceDoc(lt.from,lt.to),Ut=compositionSurroundingNode(dt)||dt.state.doc.lineAt(St.head),zt=St.to-lt.to,Zt=St.to-St.from;At=Tt.changeByRange(ln=>{if(ln.from==St.from&&ln.to==St.to)return{changes:kt,range:Nt||ln.map(kt)};let cn=ln.to-zt,hn=cn-Bt.length;if(ln.to-ln.from!=Zt||dt.state.sliceDoc(hn,cn)!=Bt||Ut&&ln.to>=Ut.from&&ln.from<=Ut.to)return{range:ln};let pn=Tt.changes({from:hn,to:cn,insert:lt.insert}),dn=ln.to-St.to;return{changes:pn,range:Nt?EditorSelection.range(Math.max(0,Nt.anchor+dn),Math.max(0,Nt.head+dn)):ln.map(pn)}})}else At={changes:kt,selection:Nt&&Tt.selection.replaceRange(Nt)}}let Rt="input.type";return dt.composing&&(Rt+=".compose",dt.inputState.compositionFirstChange&&(Rt+=".start",dt.inputState.compositionFirstChange=!1)),dt.dispatch(At,{scrollIntoView:!0,userEvent:Rt}),!0}else if(ft&&!ft.main.eq(St)){let Tt=!1,Ct="select";return dt.inputState.lastSelectionTime>Date.now()-50&&(dt.inputState.lastSelectionOrigin=="select"&&(Tt=!0),Ct=dt.inputState.lastSelectionOrigin),dt.dispatch({selection:ft,scrollIntoView:Tt,userEvent:Ct}),!0}else return!1}function findDiff(dt,$,lt,ft){let St=Math.min(dt.length,$.length),Tt=0;for(;Tt<St&&dt.charCodeAt(Tt)==$.charCodeAt(Tt);)Tt++;if(Tt==St&&dt.length==$.length)return null;let Ct=dt.length,At=$.length;for(;Ct>0&&At>0&&dt.charCodeAt(Ct-1)==$.charCodeAt(At-1);)Ct--,At--;if(ft=="end"){let Rt=Math.max(0,Tt-Math.min(Ct,At));lt-=Ct+Rt-Tt}if(Ct<Tt&&dt.length<$.length){let Rt=lt<=Tt&&lt>=Ct?Tt-lt:0;Tt-=Rt,At=Tt+(At-Ct),Ct=Tt}else if(At<Tt){let Rt=lt<=Tt&&lt>=At?Tt-lt:0;Tt-=Rt,Ct=Tt+(Ct-At),At=Tt}return{from:Tt,toA:Ct,toB:At}}function selectionPoints(dt){let $=[];if(dt.root.activeElement!=dt.contentDOM)return $;let{anchorNode:lt,anchorOffset:ft,focusNode:St,focusOffset:Tt}=dt.observer.selectionRange;return lt&&($.push(new DOMPoint(lt,ft)),(St!=lt||Tt!=ft)&&$.push(new DOMPoint(St,Tt))),$}function selectionFromPoints(dt,$){if(dt.length==0)return null;let lt=dt[0].pos,ft=dt.length==2?dt[1].pos:lt;return lt>-1&&ft>-1?EditorSelection.single(lt+$,ft+$):null}const observeOptions={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},useCharData=browser.ie&&browser.ie_version<=11;class DOMObserver{constructor($){this.view=$,this.active=!1,this.selectionRange=new DOMSelectionState,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=$.contentDOM,this.observer=new MutationObserver(lt=>{for(let ft of lt)this.queue.push(ft);(browser.ie&&browser.ie_version<=11||browser.ios&&$.composing)&&lt.some(ft=>ft.type=="childList"&&ft.removedNodes.length||ft.type=="characterData"&&ft.oldValue.length>ft.target.nodeValue.length)?this.flushSoon():this.flush()}),useCharData&&(this.onCharData=lt=>{this.queue.push({target:lt.target,type:"characterData",oldValue:lt.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var lt;((lt=this.view.docView)===null||lt===void 0?void 0:lt.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe($.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe($.contentDOM)),this.addWindowListeners(this.win=$.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(lt=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),lt.length>0&&lt[lt.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(lt=>{lt.length>0&&lt[lt.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged($){this.view.inputState.runScrollHandlers(this.view,$),this.intersecting&&this.view.measure()}onScroll($){this.intersecting&&this.flush(!1),this.onScrollChanged($)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps($){if(this.gapIntersection&&($.length!=this.gaps.length||this.gaps.some((lt,ft)=>lt!=$[ft]))){this.gapIntersection.disconnect();for(let lt of $)this.gapIntersection.observe(lt);this.gaps=$}}onSelectionChange($){let lt=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:ft}=this,St=this.selectionRange;if(ft.state.facet(editable)?ft.root.activeElement!=this.dom:!hasSelection(ft.dom,St))return;let Tt=St.anchorNode&&ft.docView.nearest(St.anchorNode);if(Tt&&Tt.ignoreEvent($)){lt||(this.selectionChanged=!1);return}(browser.ie&&browser.ie_version<=11||browser.android&&browser.chrome)&&!ft.state.selection.main.empty&&St.focusNode&&isEquivalentPosition(St.focusNode,St.focusOffset,St.anchorNode,St.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:$}=this,lt=browser.safari&&$.root.nodeType==11&&deepActiveElement(this.dom.ownerDocument)==this.dom&&safariSelectionRangeHack(this.view)||getSelection($.root);if(!lt||this.selectionRange.eq(lt))return!1;let ft=hasSelection(this.dom,lt);return ft&&!this.selectionChanged&&$.inputState.lastFocusTime>Date.now()-200&&$.inputState.lastTouchTime<Date.now()-300&&atElementStart(this.dom,lt)?(this.view.inputState.lastFocusTime=0,$.docView.updateSelection(),!1):(this.selectionRange.setRange(lt),ft&&(this.selectionChanged=!0),!0)}setSelectionRange($,lt){this.selectionRange.set($.node,$.offset,lt.node,lt.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let $=0,lt=null;for(let ft=this.dom;ft;)if(ft.nodeType==1)!lt&&$<this.scrollTargets.length&&this.scrollTargets[$]==ft?$++:lt||(lt=this.scrollTargets.slice(0,$)),lt&&lt.push(ft),ft=ft.assignedSlot||ft.parentNode;else if(ft.nodeType==11)ft=ft.host;else break;if($<this.scrollTargets.length&&!lt&&(lt=this.scrollTargets.slice(0,$)),lt){for(let ft of this.scrollTargets)ft.removeEventListener("scroll",this.onScroll);for(let ft of this.scrollTargets=lt)ft.addEventListener("scroll",this.onScroll)}}ignore($){if(!this.active)return $();try{return this.stop(),$()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,observeOptions),useCharData&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),useCharData&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey($,lt){var ft;if(!this.delayedAndroidKey){let St=()=>{let Tt=this.delayedAndroidKey;Tt&&(this.clearDelayedAndroidKey(),!this.flush()&&Tt.force&&dispatchKey(this.dom,Tt.key,Tt.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(St)}(!this.delayedAndroidKey||$=="Enter")&&(this.delayedAndroidKey={key:$,keyCode:lt,force:this.lastChange<Date.now()-50||!!(!((ft=this.delayedAndroidKey)===null||ft===void 0)&&ft.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}processRecords(){let $=this.queue;for(let Tt of this.observer.takeRecords())$.push(Tt);$.length&&(this.queue=[]);let lt=-1,ft=-1,St=!1;for(let Tt of $){let Ct=this.readMutation(Tt);Ct&&(Ct.typeOver&&(St=!0),lt==-1?{from:lt,to:ft}=Ct:(lt=Math.min(Ct.from,lt),ft=Math.max(Ct.to,ft)))}return{from:lt,to:ft,typeOver:St}}readChange(){let{from:$,to:lt,typeOver:ft}=this.processRecords(),St=this.selectionChanged&&hasSelection(this.dom,this.selectionRange);return $<0&&!St?null:($>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new DOMChange(this.view,$,lt,ft))}flush($=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;$&&this.readSelectionRange();let lt=this.readChange();if(!lt)return!1;let ft=this.view.state,St=applyDOMChange(this.view,lt);return this.view.state==ft&&this.view.update([]),St}readMutation($){let lt=this.view.docView.nearest($.target);if(!lt||lt.ignoreMutation($))return null;if(lt.markDirty($.type=="attributes"),$.type=="attributes"&&(lt.dirty|=4),$.type=="childList"){let ft=findChild(lt,$.previousSibling||$.target.previousSibling,-1),St=findChild(lt,$.nextSibling||$.target.nextSibling,1);return{from:ft?lt.posAfter(ft):lt.posAtStart,to:St?lt.posBefore(St):lt.posAtEnd,typeOver:!1}}else return $.type=="characterData"?{from:lt.posAtStart,to:lt.posAtEnd,typeOver:$.target.nodeValue==$.oldValue}:null}setWindow($){$!=this.win&&(this.removeWindowListeners(this.win),this.win=$,this.addWindowListeners(this.win))}addWindowListeners($){$.addEventListener("resize",this.onResize),$.addEventListener("beforeprint",this.onPrint),$.addEventListener("scroll",this.onScroll),$.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners($){$.removeEventListener("scroll",this.onScroll),$.removeEventListener("resize",this.onResize),$.removeEventListener("beforeprint",this.onPrint),$.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var $,lt,ft,St;this.stop(),($=this.intersection)===null||$===void 0||$.disconnect(),(lt=this.gapIntersection)===null||lt===void 0||lt.disconnect(),(ft=this.resizeScroll)===null||ft===void 0||ft.disconnect(),(St=this.resizeContent)===null||St===void 0||St.disconnect();for(let Tt of this.scrollTargets)Tt.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function findChild(dt,$,lt){for(;$;){let ft=ContentView.get($);if(ft&&ft.parent==dt)return ft;let St=$.parentNode;$=St!=dt.dom?St:lt>0?$.nextSibling:$.previousSibling}return null}function safariSelectionRangeHack(dt){let $=null;function lt(Rt){Rt.preventDefault(),Rt.stopImmediatePropagation(),$=Rt.getTargetRanges()[0]}if(dt.contentDOM.addEventListener("beforeinput",lt,!0),dt.dom.ownerDocument.execCommand("indent"),dt.contentDOM.removeEventListener("beforeinput",lt,!0),!$)return null;let ft=$.startContainer,St=$.startOffset,Tt=$.endContainer,Ct=$.endOffset,At=dt.docView.domAtPos(dt.state.selection.main.anchor);return isEquivalentPosition(At.node,At.offset,Tt,Ct)&&([ft,St,Tt,Ct]=[Tt,Ct,ft,St]),{anchorNode:ft,anchorOffset:St,focusNode:Tt,focusOffset:Ct}}class EditorView{constructor($={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=$.dispatch||(lt=>this.update([lt])),this.dispatch=this.dispatch.bind(this),this._root=$.root||getRoot($.parent)||document,this.viewState=new ViewState($.state||EditorState.create($)),this.plugins=this.state.facet(viewPlugin).map(lt=>new PluginInstance(lt));for(let lt of this.plugins)lt.update(this);this.observer=new DOMObserver(this),this.inputState=new InputState(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new DocView(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),$.parent&&$.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...$){this._dispatch($.length==1&&$[0]instanceof Transaction?$[0]:this.state.update(...$))}update($){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let lt=!1,ft=!1,St,Tt=this.state;for(let Ut of $){if(Ut.startState!=Tt)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");Tt=Ut.state}if(this.destroyed){this.viewState.state=Tt;return}let Ct=this.hasFocus,At=0,Rt=null;$.some(Ut=>Ut.annotation(isFocusChange))?(this.inputState.notifiedFocused=Ct,At=1):Ct!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=Ct,Rt=focusChangeTransaction(Tt,Ct),Rt||(At=1));let kt=this.observer.delayedAndroidKey,Nt=null;if(kt?(this.observer.clearDelayedAndroidKey(),Nt=this.observer.readChange(),(Nt&&!this.state.doc.eq(Tt.doc)||!this.state.selection.eq(Tt.selection))&&(Nt=null)):this.observer.clear(),Tt.facet(EditorState.phrases)!=this.state.facet(EditorState.phrases))return this.setState(Tt);St=ViewUpdate.create(this,Tt,$),St.flags|=At;let Bt=this.viewState.scrollTarget;try{this.updateState=2;for(let Ut of $){if(Bt&&(Bt=Bt.map(Ut.changes)),Ut.scrollIntoView){let{main:zt}=Ut.state.selection;Bt=new ScrollTarget(zt.empty?zt:EditorSelection.cursor(zt.head,zt.head>zt.anchor?-1:1))}for(let zt of Ut.effects)zt.is(scrollIntoView$1)&&(Bt=zt.value)}this.viewState.update(St,Bt),this.bidiCache=CachedOrder.update(this.bidiCache,St.changes),St.empty||(this.updatePlugins(St),this.inputState.update(St)),lt=this.docView.update(St),this.state.facet(styleModule)!=this.styleModules&&this.mountStyles(),ft=this.updateAttrs(),this.showAnnouncements($),this.docView.updateSelection(lt,$.some(Ut=>Ut.isUserEvent("select.pointer")))}finally{this.updateState=0}if(St.startState.facet(theme)!=St.state.facet(theme)&&(this.viewState.mustMeasureContent=!0),(lt||ft||Bt||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!St.empty)for(let Ut of this.state.facet(updateListener))Ut(St);(Rt||Nt)&&Promise.resolve().then(()=>{Rt&&this.state==Rt.startState&&this.dispatch(Rt),Nt&&!applyDOMChange(this,Nt)&&kt.force&&dispatchKey(this.contentDOM,kt.key,kt.keyCode)})}setState($){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=$;return}this.updateState=2;let lt=this.hasFocus;try{for(let ft of this.plugins)ft.destroy(this);this.viewState=new ViewState($),this.plugins=$.facet(viewPlugin).map(ft=>new PluginInstance(ft)),this.pluginMap.clear();for(let ft of this.plugins)ft.update(this);this.docView=new DocView(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}lt&&this.focus(),this.requestMeasure()}updatePlugins($){let lt=$.startState.facet(viewPlugin),ft=$.state.facet(viewPlugin);if(lt!=ft){let St=[];for(let Tt of ft){let Ct=lt.indexOf(Tt);if(Ct<0)St.push(new PluginInstance(Tt));else{let At=this.plugins[Ct];At.mustUpdate=$,St.push(At)}}for(let Tt of this.plugins)Tt.mustUpdate!=$&&Tt.destroy(this);this.plugins=St,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let St of this.plugins)St.mustUpdate=$;for(let St=0;St<this.plugins.length;St++)this.plugins[St].update(this)}measure($=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,$&&this.observer.forceFlush();let lt=null,{scrollHeight:ft,scrollTop:St,clientHeight:Tt}=this.scrollDOM,Ct=St>ft-Tt-4?ft:St;try{for(let At=0;;At++){this.updateState=1;let Rt=this.viewport,kt=this.viewState.lineBlockAtHeight(Ct),Nt=this.viewState.measure(this);if(!Nt&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(At>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let Bt=[];Nt&4||([this.measureRequests,Bt]=[Bt,this.measureRequests]);let Ut=Bt.map(cn=>{try{return cn.read(this)}catch(hn){return logException(this.state,hn),BadMeasure}}),zt=ViewUpdate.create(this,this.state,[]),Zt=!1,ln=!1;zt.flags|=Nt,lt?lt.flags|=Nt:lt=zt,this.updateState=2,zt.empty||(this.updatePlugins(zt),this.inputState.update(zt),this.updateAttrs(),Zt=this.docView.update(zt));for(let cn=0;cn<Bt.length;cn++)if(Ut[cn]!=BadMeasure)try{let hn=Bt[cn];hn.write&&hn.write(Ut[cn],this)}catch(hn){logException(this.state,hn)}if(this.viewState.editorHeight)if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,ln=!0;else{let cn=this.viewState.lineBlockAt(kt.from).top-kt.top;(cn>1||cn<-1)&&(this.scrollDOM.scrollTop+=cn,ln=!0)}if(Zt&&this.docView.updateSelection(!0),this.viewport.from==Rt.from&&this.viewport.to==Rt.to&&!ln&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(lt&&!lt.empty)for(let At of this.state.facet(updateListener))At(lt)}get themeClasses(){return baseThemeID+" "+(this.state.facet(darkTheme)?baseDarkID:baseLightID)+" "+this.state.facet(theme)}updateAttrs(){let $=attrsFromFacet(this,editorAttributes,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),lt={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(editable)?"true":"false",class:"cm-content",style:`${browser.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(lt["aria-readonly"]="true"),attrsFromFacet(this,contentAttributes,lt);let ft=this.observer.ignore(()=>{let St=updateAttrs(this.contentDOM,this.contentAttrs,lt),Tt=updateAttrs(this.dom,this.editorAttrs,$);return St||Tt});return this.editorAttrs=$,this.contentAttrs=lt,ft}showAnnouncements($){let lt=!0;for(let ft of $)for(let St of ft.effects)if(St.is(EditorView.announce)){lt&&(this.announceDOM.textContent=""),lt=!1;let Tt=this.announceDOM.appendChild(document.createElement("div"));Tt.textContent=St.value}}mountStyles(){this.styleModules=this.state.facet(styleModule),StyleModule.mount(this.root,this.styleModules.concat(baseTheme$1$2).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure($){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),$){if(this.measureRequests.indexOf($)>-1)return;if($.key!=null){for(let lt=0;lt<this.measureRequests.length;lt++)if(this.measureRequests[lt].key===$.key){this.measureRequests[lt]=$;return}}this.measureRequests.push($)}}plugin($){let lt=this.pluginMap.get($);return(lt===void 0||lt&&lt.spec!=$)&&this.pluginMap.set($,lt=this.plugins.find(ft=>ft.spec==$)||null),lt&&lt.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight($){return this.readMeasured(),this.viewState.elementAtHeight($)}lineBlockAtHeight($){return this.readMeasured(),this.viewState.lineBlockAtHeight($)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt($){return this.viewState.lineBlockAt($)}get contentHeight(){return this.viewState.contentHeight}moveByChar($,lt,ft){return skipAtoms(this,$,moveByChar(this,$,lt,ft))}moveByGroup($,lt){return skipAtoms(this,$,moveByChar(this,$,lt,ft=>byGroup(this,$.head,ft)))}moveToLineBoundary($,lt,ft=!0){return moveToLineBoundary(this,$,lt,ft)}moveVertically($,lt,ft){return skipAtoms(this,$,moveVertically(this,$,lt,ft))}domAtPos($){return this.docView.domAtPos($)}posAtDOM($,lt=0){return this.docView.posFromDOM($,lt)}posAtCoords($,lt=!0){return this.readMeasured(),posAtCoords(this,$,lt)}coordsAtPos($,lt=1){this.readMeasured();let ft=this.docView.coordsAt($,lt);if(!ft||ft.left==ft.right)return ft;let St=this.state.doc.lineAt($),Tt=this.bidiSpans(St),Ct=Tt[BidiSpan.find(Tt,$-St.from,-1,lt)];return flattenRect(ft,Ct.dir==Direction.LTR==lt>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt($){return!this.state.facet(perLineTextDirection)||$<this.viewport.from||$>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt($))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans($){if($.length>MaxBidiLine)return trivialOrder($.length);let lt=this.textDirectionAt($.from);for(let St of this.bidiCache)if(St.from==$.from&&St.dir==lt)return St.order;let ft=computeOrder($.text,lt);return this.bidiCache.push(new CachedOrder($.from,$.to,lt,ft)),ft}get hasFocus(){var $;return(this.dom.ownerDocument.hasFocus()||browser.safari&&(($=this.inputState)===null||$===void 0?void 0:$.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{focusPreventScroll(this.contentDOM),this.docView.updateSelection()})}setRoot($){this._root!=$&&(this._root=$,this.observer.setWindow(($.nodeType==9?$:$.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let $ of this.plugins)$.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView($,lt={}){return scrollIntoView$1.of(new ScrollTarget(typeof $=="number"?EditorSelection.cursor($):$,lt.y,lt.x,lt.yMargin,lt.xMargin))}static domEventHandlers($){return ViewPlugin.define(()=>({}),{eventHandlers:$})}static theme($,lt){let ft=StyleModule.newName(),St=[theme.of(ft),styleModule.of(buildTheme(`.${ft}`,$))];return lt&&lt.dark&&St.push(darkTheme.of(!0)),St}static baseTheme($){return Prec.lowest(styleModule.of(buildTheme("."+baseThemeID,$,lightDarkIDs)))}static findFromDOM($){var lt;let ft=$.querySelector(".cm-content"),St=ft&&ContentView.get(ft)||ContentView.get($);return((lt=St==null?void 0:St.rootView)===null||lt===void 0?void 0:lt.view)||null}}EditorView.styleModule=styleModule;EditorView.inputHandler=inputHandler$1;EditorView.focusChangeEffect=focusChangeEffect;EditorView.perLineTextDirection=perLineTextDirection;EditorView.exceptionSink=exceptionSink;EditorView.updateListener=updateListener;EditorView.editable=editable;EditorView.mouseSelectionStyle=mouseSelectionStyle;EditorView.dragMovesSelection=dragMovesSelection$1;EditorView.clickAddsSelectionRange=clickAddsSelectionRange;EditorView.decorations=decorations;EditorView.atomicRanges=atomicRanges;EditorView.scrollMargins=scrollMargins;EditorView.darkTheme=darkTheme;EditorView.contentAttributes=contentAttributes;EditorView.editorAttributes=editorAttributes;EditorView.lineWrapping=EditorView.contentAttributes.of({class:"cm-lineWrapping"});EditorView.announce=StateEffect.define();const MaxBidiLine=4096,BadMeasure={};class CachedOrder{constructor($,lt,ft,St){this.from=$,this.to=lt,this.dir=ft,this.order=St}static update($,lt){if(lt.empty)return $;let ft=[],St=$.length?$[$.length-1].dir:Direction.LTR;for(let Tt=Math.max(0,$.length-10);Tt<$.length;Tt++){let Ct=$[Tt];Ct.dir==St&&!lt.touchesRange(Ct.from,Ct.to)&&ft.push(new CachedOrder(lt.mapPos(Ct.from,1),lt.mapPos(Ct.to,-1),Ct.dir,Ct.order))}return ft}}function attrsFromFacet(dt,$,lt){for(let ft=dt.state.facet($),St=ft.length-1;St>=0;St--){let Tt=ft[St],Ct=typeof Tt=="function"?Tt(dt):Tt;Ct&&combineAttrs(Ct,lt)}return lt}const currentPlatform=browser.mac?"mac":browser.windows?"win":browser.linux?"linux":"key";function normalizeKeyName(dt,$){const lt=dt.split(/-(?!$)/);let ft=lt[lt.length-1];ft=="Space"&&(ft=" ");let St,Tt,Ct,At;for(let Rt=0;Rt<lt.length-1;++Rt){const kt=lt[Rt];if(/^(cmd|meta|m)$/i.test(kt))At=!0;else if(/^a(lt)?$/i.test(kt))St=!0;else if(/^(c|ctrl|control)$/i.test(kt))Tt=!0;else if(/^s(hift)?$/i.test(kt))Ct=!0;else if(/^mod$/i.test(kt))$=="mac"?At=!0:Tt=!0;else throw new Error("Unrecognized modifier name: "+kt)}return St&&(ft="Alt-"+ft),Tt&&(ft="Ctrl-"+ft),At&&(ft="Meta-"+ft),Ct&&(ft="Shift-"+ft),ft}function modifiers(dt,$,lt){return $.altKey&&(dt="Alt-"+dt),$.ctrlKey&&(dt="Ctrl-"+dt),$.metaKey&&(dt="Meta-"+dt),lt!==!1&&$.shiftKey&&(dt="Shift-"+dt),dt}const handleKeyEvents=Prec.default(EditorView.domEventHandlers({keydown(dt,$){return runHandlers(getKeymap($.state),dt,$,"editor")}})),keymap=Facet.define({enables:handleKeyEvents}),Keymaps=new WeakMap;function getKeymap(dt){let $=dt.facet(keymap),lt=Keymaps.get($);return lt||Keymaps.set($,lt=buildKeymap($.reduce((ft,St)=>ft.concat(St),[]))),lt}function runScopeHandlers(dt,$,lt){return runHandlers(getKeymap(dt.state),$,dt,lt)}let storedPrefix=null;const PrefixTimeout=4e3;function buildKeymap(dt,$=currentPlatform){let lt=Object.create(null),ft=Object.create(null),St=(Ct,At)=>{let Rt=ft[Ct];if(Rt==null)ft[Ct]=At;else if(Rt!=At)throw new Error("Key binding "+Ct+" is used both as a regular binding and as a multi-stroke prefix")},Tt=(Ct,At,Rt,kt)=>{var Nt,Bt;let Ut=lt[Ct]||(lt[Ct]=Object.create(null)),zt=At.split(/ (?!$)/).map(cn=>normalizeKeyName(cn,$));for(let cn=1;cn<zt.length;cn++){let hn=zt.slice(0,cn).join(" ");St(hn,!0),Ut[hn]||(Ut[hn]={preventDefault:!0,run:[pn=>{let dn=storedPrefix={view:pn,prefix:hn,scope:Ct};return setTimeout(()=>{storedPrefix==dn&&(storedPrefix=null)},PrefixTimeout),!0}]})}let Zt=zt.join(" ");St(Zt,!1);let ln=Ut[Zt]||(Ut[Zt]={preventDefault:!1,run:((Bt=(Nt=Ut._any)===null||Nt===void 0?void 0:Nt.run)===null||Bt===void 0?void 0:Bt.slice())||[]});Rt&&ln.run.push(Rt),kt&&(ln.preventDefault=!0)};for(let Ct of dt){let At=Ct.scope?Ct.scope.split(" "):["editor"];if(Ct.any)for(let kt of At){let Nt=lt[kt]||(lt[kt]=Object.create(null));Nt._any||(Nt._any={preventDefault:!1,run:[]});for(let Bt in Nt)Nt[Bt].run.push(Ct.any)}let Rt=Ct[$]||Ct.key;if(Rt)for(let kt of At)Tt(kt,Rt,Ct.run,Ct.preventDefault),Ct.shift&&Tt(kt,"Shift-"+Rt,Ct.shift,Ct.preventDefault)}return lt}function runHandlers(dt,$,lt,ft){let St=keyName($),Tt=codePointAt(St,0),Ct=codePointSize(Tt)==St.length&&St!=" ",At="",Rt=!1;storedPrefix&&storedPrefix.view==lt&&storedPrefix.scope==ft&&(At=storedPrefix.prefix+" ",(Rt=modifierCodes.indexOf($.keyCode)<0)&&(storedPrefix=null));let kt=new Set,Nt=Zt=>{if(Zt){for(let ln of Zt.run)if(!kt.has(ln)&&(kt.add(ln),ln(lt,$)))return!0;Zt.preventDefault&&(Rt=!0)}return!1},Bt=dt[ft],Ut,zt;if(Bt){if(Nt(Bt[At+modifiers(St,$,!Ct)]))return!0;if(Ct&&($.altKey||$.metaKey||$.ctrlKey)&&!(browser.windows&&$.ctrlKey&&$.altKey)&&(Ut=base[$.keyCode])&&Ut!=St){if(Nt(Bt[At+modifiers(Ut,$,!0)]))return!0;if($.shiftKey&&(zt=shift[$.keyCode])!=St&&zt!=Ut&&Nt(Bt[At+modifiers(zt,$,!1)]))return!0}else if(Ct&&$.shiftKey&&Nt(Bt[At+modifiers(St,$,!0)]))return!0;if(Nt(Bt._any))return!0}return Rt}class RectangleMarker{constructor($,lt,ft,St,Tt){this.className=$,this.left=lt,this.top=ft,this.width=St,this.height=Tt}draw(){let $=document.createElement("div");return $.className=this.className,this.adjust($),$}update($,lt){return lt.className!=this.className?!1:(this.adjust($),!0)}adjust($){$.style.left=this.left+"px",$.style.top=this.top+"px",this.width!=null&&($.style.width=this.width+"px"),$.style.height=this.height+"px"}eq($){return this.left==$.left&&this.top==$.top&&this.width==$.width&&this.height==$.height&&this.className==$.className}static forRange($,lt,ft){if(ft.empty){let St=$.coordsAtPos(ft.head,ft.assoc||1);if(!St)return[];let Tt=getBase($);return[new RectangleMarker(lt,St.left-Tt.left,St.top-Tt.top,null,St.bottom-St.top)]}else return rectanglesForRange($,lt,ft)}}function getBase(dt){let $=dt.scrollDOM.getBoundingClientRect();return{left:(dt.textDirection==Direction.LTR?$.left:$.right-dt.scrollDOM.clientWidth)-dt.scrollDOM.scrollLeft,top:$.top-dt.scrollDOM.scrollTop}}function wrappedLine(dt,$,lt){let ft=EditorSelection.cursor($);return{from:Math.max(lt.from,dt.moveToLineBoundary(ft,!1,!0).from),to:Math.min(lt.to,dt.moveToLineBoundary(ft,!0,!0).from),type:BlockType.Text}}function blockAt(dt,$){let lt=dt.lineBlockAt($);if(Array.isArray(lt.type)){for(let ft of lt.type)if(ft.to>$||ft.to==$&&(ft.to==lt.to||ft.type==BlockType.Text))return ft}return lt}function rectanglesForRange(dt,$,lt){if(lt.to<=dt.viewport.from||lt.from>=dt.viewport.to)return[];let ft=Math.max(lt.from,dt.viewport.from),St=Math.min(lt.to,dt.viewport.to),Tt=dt.textDirection==Direction.LTR,Ct=dt.contentDOM,At=Ct.getBoundingClientRect(),Rt=getBase(dt),kt=window.getComputedStyle(Ct.firstChild),Nt=At.left+parseInt(kt.paddingLeft)+Math.min(0,parseInt(kt.textIndent)),Bt=At.right-parseInt(kt.paddingRight),Ut=blockAt(dt,ft),zt=blockAt(dt,St),Zt=Ut.type==BlockType.Text?Ut:null,ln=zt.type==BlockType.Text?zt:null;if(dt.lineWrapping&&(Zt&&(Zt=wrappedLine(dt,ft,Zt)),ln&&(ln=wrappedLine(dt,St,ln))),Zt&&ln&&Zt.from==ln.from)return hn(pn(lt.from,lt.to,Zt));{let gn=Zt?pn(lt.from,null,Zt):dn(Ut,!1),vn=ln?pn(null,lt.to,ln):dn(zt,!0),Tn=[];return(Zt||Ut).to<(ln||zt).from-1?Tn.push(cn(Nt,gn.bottom,Bt,vn.top)):gn.bottom<vn.top&&dt.elementAtHeight((gn.bottom+vn.top)/2).type==BlockType.Text&&(gn.bottom=vn.top=(gn.bottom+vn.top)/2),hn(gn).concat(Tn).concat(hn(vn))}function cn(gn,vn,Tn,Cn){return new RectangleMarker($,gn-Rt.left,vn-Rt.top-.01,Tn-gn,Cn-vn+.01)}function hn({top:gn,bottom:vn,horizontal:Tn}){let Cn=[];for(let $n=0;$n<Tn.length;$n+=2)Cn.push(cn(Tn[$n],gn,Tn[$n+1],vn));return Cn}function pn(gn,vn,Tn){let Cn=1e9,$n=-1e9,xn=[];function Rn(Wn,zn,Yn,Qn,nr){let Ln=dt.coordsAtPos(Wn,Wn==Tn.to?-2:2),Un=dt.coordsAtPos(Yn,Yn==Tn.from?2:-2);Cn=Math.min(Ln.top,Un.top,Cn),$n=Math.max(Ln.bottom,Un.bottom,$n),nr==Direction.LTR?xn.push(Tt&&zn?Nt:Ln.left,Tt&&Qn?Bt:Un.right):xn.push(!Tt&&Qn?Nt:Un.left,!Tt&&zn?Bt:Ln.right)}let Pn=gn??Tn.from,Nn=vn??Tn.to;for(let Wn of dt.visibleRanges)if(Wn.to>Pn&&Wn.from<Nn)for(let zn=Math.max(Wn.from,Pn),Yn=Math.min(Wn.to,Nn);;){let Qn=dt.state.doc.lineAt(zn);for(let nr of dt.bidiSpans(Qn)){let Ln=nr.from+Qn.from,Un=nr.to+Qn.from;if(Ln>=Yn)break;Un>zn&&Rn(Math.max(Ln,zn),gn==null&&Ln<=Pn,Math.min(Un,Yn),vn==null&&Un>=Nn,nr.dir)}if(zn=Qn.to+1,zn>=Yn)break}return xn.length==0&&Rn(Pn,gn==null,Nn,vn==null,dt.textDirection),{top:Cn,bottom:$n,horizontal:xn}}function dn(gn,vn){let Tn=At.top+(vn?gn.top:gn.bottom);return{top:Tn,bottom:Tn,horizontal:[]}}}function sameMarker(dt,$){return dt.constructor==$.constructor&&dt.eq($)}class LayerView{constructor($,lt){this.view=$,this.layer=lt,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=$.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),lt.above&&this.dom.classList.add("cm-layer-above"),lt.class&&this.dom.classList.add(lt.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder($.state),$.requestMeasure(this.measureReq),lt.mount&&lt.mount(this.dom,$)}update($){$.startState.facet(layerOrder)!=$.state.facet(layerOrder)&&this.setOrder($.state),(this.layer.update($,this.dom)||$.geometryChanged)&&$.view.requestMeasure(this.measureReq)}setOrder($){let lt=0,ft=$.facet(layerOrder);for(;lt<ft.length&&ft[lt]!=this.layer;)lt++;this.dom.style.zIndex=String((this.layer.above?150:-1)-lt)}measure(){return this.layer.markers(this.view)}draw($){if($.length!=this.drawn.length||$.some((lt,ft)=>!sameMarker(lt,this.drawn[ft]))){let lt=this.dom.firstChild,ft=0;for(let St of $)St.update&&lt&&St.constructor&&this.drawn[ft].constructor&&St.update(lt,this.drawn[ft])?(lt=lt.nextSibling,ft++):this.dom.insertBefore(St.draw(),lt);for(;lt;){let St=lt.nextSibling;lt.remove(),lt=St}this.drawn=$}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const layerOrder=Facet.define();function layer(dt){return[ViewPlugin.define($=>new LayerView($,dt)),layerOrder.of(dt)]}const CanHidePrimary=!browser.ios,selectionConfig=Facet.define({combine(dt){return combineConfig(dt,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:($,lt)=>Math.min($,lt),drawRangeCursor:($,lt)=>$||lt})}});function drawSelection(dt={}){return[selectionConfig.of(dt),cursorLayer,selectionLayer,hideNativeSelection,nativeSelectionHidden.of(!0)]}function configChanged(dt){return dt.startState.facet(selectionConfig)!=dt.state.facet(selectionConfig)}const cursorLayer=layer({above:!0,markers(dt){let{state:$}=dt,lt=$.facet(selectionConfig),ft=[];for(let St of $.selection.ranges){let Tt=St==$.selection.main;if(St.empty?!Tt||CanHidePrimary:lt.drawRangeCursor){let Ct=Tt?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",At=St.empty?St:EditorSelection.cursor(St.head,St.head>St.anchor?-1:1);for(let Rt of RectangleMarker.forRange(dt,Ct,At))ft.push(Rt)}}return ft},update(dt,$){dt.transactions.some(ft=>ft.selection)&&($.style.animationName=$.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let lt=configChanged(dt);return lt&&setBlinkRate(dt.state,$),dt.docChanged||dt.selectionSet||lt},mount(dt,$){setBlinkRate($.state,dt)},class:"cm-cursorLayer"});function setBlinkRate(dt,$){$.style.animationDuration=dt.facet(selectionConfig).cursorBlinkRate+"ms"}const selectionLayer=layer({above:!1,markers(dt){return dt.state.selection.ranges.map($=>$.empty?[]:RectangleMarker.forRange(dt,"cm-selectionBackground",$)).reduce(($,lt)=>$.concat(lt))},update(dt,$){return dt.docChanged||dt.selectionSet||dt.viewportChanged||configChanged(dt)},class:"cm-selectionLayer"}),themeSpec={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};CanHidePrimary&&(themeSpec[".cm-line"].caretColor="transparent !important");const hideNativeSelection=Prec.highest(EditorView.theme(themeSpec)),setDropCursorPos=StateEffect.define({map(dt,$){return dt==null?null:$.mapPos(dt)}}),dropCursorPos=StateField.define({create(){return null},update(dt,$){return dt!=null&&(dt=$.changes.mapPos(dt)),$.effects.reduce((lt,ft)=>ft.is(setDropCursorPos)?ft.value:lt,dt)}}),drawDropCursor=ViewPlugin.fromClass(class{constructor(dt){this.view=dt,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(dt){var $;let lt=dt.state.field(dropCursorPos);lt==null?this.cursor!=null&&(($=this.cursor)===null||$===void 0||$.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(dt.startState.field(dropCursorPos)!=lt||dt.docChanged||dt.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let dt=this.view.state.field(dropCursorPos),$=dt!=null&&this.view.coordsAtPos(dt);if(!$)return null;let lt=this.view.scrollDOM.getBoundingClientRect();return{left:$.left-lt.left+this.view.scrollDOM.scrollLeft,top:$.top-lt.top+this.view.scrollDOM.scrollTop,height:$.bottom-$.top}}drawCursor(dt){this.cursor&&(dt?(this.cursor.style.left=dt.left+"px",this.cursor.style.top=dt.top+"px",this.cursor.style.height=dt.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(dt){this.view.state.field(dropCursorPos)!=dt&&this.view.dispatch({effects:setDropCursorPos.of(dt)})}},{eventHandlers:{dragover(dt){this.setDropPos(this.view.posAtCoords({x:dt.clientX,y:dt.clientY}))},dragleave(dt){(dt.target==this.view.contentDOM||!this.view.contentDOM.contains(dt.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function dropCursor(){return[dropCursorPos,drawDropCursor]}function iterMatches(dt,$,lt,ft,St){$.lastIndex=0;for(let Tt=dt.iterRange(lt,ft),Ct=lt,At;!Tt.next().done;Ct+=Tt.value.length)if(!Tt.lineBreak)for(;At=$.exec(Tt.value);)St(Ct+At.index,At)}function matchRanges(dt,$){let lt=dt.visibleRanges;if(lt.length==1&&lt[0].from==dt.viewport.from&&lt[0].to==dt.viewport.to)return lt;let ft=[];for(let{from:St,to:Tt}of lt)St=Math.max(dt.state.doc.lineAt(St).from,St-$),Tt=Math.min(dt.state.doc.lineAt(Tt).to,Tt+$),ft.length&&ft[ft.length-1].to>=St?ft[ft.length-1].to=Tt:ft.push({from:St,to:Tt});return ft}class MatchDecorator{constructor($){const{regexp:lt,decoration:ft,decorate:St,boundary:Tt,maxLength:Ct=1e3}=$;if(!lt.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=lt,St)this.addMatch=(At,Rt,kt,Nt)=>St(Nt,kt,kt+At[0].length,At,Rt);else if(typeof ft=="function")this.addMatch=(At,Rt,kt,Nt)=>{let Bt=ft(At,Rt,kt);Bt&&Nt(kt,kt+At[0].length,Bt)};else if(ft)this.addMatch=(At,Rt,kt,Nt)=>Nt(kt,kt+At[0].length,ft);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=Tt,this.maxLength=Ct}createDeco($){let lt=new RangeSetBuilder,ft=lt.add.bind(lt);for(let{from:St,to:Tt}of matchRanges($,this.maxLength))iterMatches($.state.doc,this.regexp,St,Tt,(Ct,At)=>this.addMatch(At,$,Ct,ft));return lt.finish()}updateDeco($,lt){let ft=1e9,St=-1;return $.docChanged&&$.changes.iterChanges((Tt,Ct,At,Rt)=>{Rt>$.view.viewport.from&&At<$.view.viewport.to&&(ft=Math.min(At,ft),St=Math.max(Rt,St))}),$.viewportChanged||St-ft>1e3?this.createDeco($.view):St>-1?this.updateRange($.view,lt.map($.changes),ft,St):lt}updateRange($,lt,ft,St){for(let Tt of $.visibleRanges){let Ct=Math.max(Tt.from,ft),At=Math.min(Tt.to,St);if(At>Ct){let Rt=$.state.doc.lineAt(Ct),kt=Rt.to<At?$.state.doc.lineAt(At):Rt,Nt=Math.max(Tt.from,Rt.from),Bt=Math.min(Tt.to,kt.to);if(this.boundary){for(;Ct>Rt.from;Ct--)if(this.boundary.test(Rt.text[Ct-1-Rt.from])){Nt=Ct;break}for(;At<kt.to;At++)if(this.boundary.test(kt.text[At-kt.from])){Bt=At;break}}let Ut=[],zt,Zt=(ln,cn,hn)=>Ut.push(hn.range(ln,cn));if(Rt==kt)for(this.regexp.lastIndex=Nt-Rt.from;(zt=this.regexp.exec(Rt.text))&&zt.index<Bt-Rt.from;)this.addMatch(zt,$,zt.index+Rt.from,Zt);else iterMatches($.state.doc,this.regexp,Nt,Bt,(ln,cn)=>this.addMatch(cn,$,ln,Zt));lt=lt.update({filterFrom:Nt,filterTo:Bt,filter:(ln,cn)=>ln<Nt||cn>Bt,add:Ut})}}return lt}}const UnicodeRegexpSupport=/x/.unicode!=null?"gu":"g",Specials=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,UnicodeRegexpSupport),Names={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let _supportsTabSize=null;function supportsTabSize(){var dt;if(_supportsTabSize==null&&typeof document<"u"&&document.body){let $=document.body.style;_supportsTabSize=((dt=$.tabSize)!==null&&dt!==void 0?dt:$.MozTabSize)!=null}return _supportsTabSize||!1}const specialCharConfig=Facet.define({combine(dt){let $=combineConfig(dt,{render:null,specialChars:Specials,addSpecialChars:null});return($.replaceTabs=!supportsTabSize())&&($.specialChars=new RegExp("	|"+$.specialChars.source,UnicodeRegexpSupport)),$.addSpecialChars&&($.specialChars=new RegExp($.specialChars.source+"|"+$.addSpecialChars.source,UnicodeRegexpSupport)),$}});function highlightSpecialChars(dt={}){return[specialCharConfig.of(dt),specialCharPlugin()]}let _plugin=null;function specialCharPlugin(){return _plugin||(_plugin=ViewPlugin.fromClass(class{constructor(dt){this.view=dt,this.decorations=Decoration.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(dt.state.facet(specialCharConfig)),this.decorations=this.decorator.createDeco(dt)}makeDecorator(dt){return new MatchDecorator({regexp:dt.specialChars,decoration:($,lt,ft)=>{let{doc:St}=lt.state,Tt=codePointAt($[0],0);if(Tt==9){let Ct=St.lineAt(ft),At=lt.state.tabSize,Rt=countColumn(Ct.text,At,ft-Ct.from);return Decoration.replace({widget:new TabWidget((At-Rt%At)*this.view.defaultCharacterWidth)})}return this.decorationCache[Tt]||(this.decorationCache[Tt]=Decoration.replace({widget:new SpecialCharWidget(dt,Tt)}))},boundary:dt.replaceTabs?void 0:/[^]/})}update(dt){let $=dt.state.facet(specialCharConfig);dt.startState.facet(specialCharConfig)!=$?(this.decorator=this.makeDecorator($),this.decorations=this.decorator.createDeco(dt.view)):this.decorations=this.decorator.updateDeco(dt,this.decorations)}},{decorations:dt=>dt.decorations}))}const DefaultPlaceholder="";function placeholder$1(dt){return dt>=32?DefaultPlaceholder:dt==10?"":String.fromCharCode(9216+dt)}class SpecialCharWidget extends WidgetType{constructor($,lt){super(),this.options=$,this.code=lt}eq($){return $.code==this.code}toDOM($){let lt=placeholder$1(this.code),ft=$.state.phrase("Control character")+" "+(Names[this.code]||"0x"+this.code.toString(16)),St=this.options.render&&this.options.render(this.code,ft,lt);if(St)return St;let Tt=document.createElement("span");return Tt.textContent=lt,Tt.title=ft,Tt.setAttribute("aria-label",ft),Tt.className="cm-specialChar",Tt}ignoreEvent(){return!1}}class TabWidget extends WidgetType{constructor($){super(),this.width=$}eq($){return $.width==this.width}toDOM(){let $=document.createElement("span");return $.textContent="	",$.className="cm-tab",$.style.width=this.width+"px",$}ignoreEvent(){return!1}}function highlightActiveLine(){return activeLineHighlighter}const lineDeco=Decoration.line({class:"cm-activeLine"}),activeLineHighlighter=ViewPlugin.fromClass(class{constructor(dt){this.decorations=this.getDeco(dt)}update(dt){(dt.docChanged||dt.selectionSet)&&(this.decorations=this.getDeco(dt.view))}getDeco(dt){let $=-1,lt=[];for(let ft of dt.state.selection.ranges){let St=dt.lineBlockAt(ft.head);St.from>$&&(lt.push(lineDeco.range(St.from)),$=St.from)}return Decoration.set(lt)}},{decorations:dt=>dt.decorations});class Placeholder extends WidgetType{constructor($){super(),this.content=$}toDOM(){let $=document.createElement("span");return $.className="cm-placeholder",$.style.pointerEvents="none",$.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?$.setAttribute("aria-label","placeholder "+this.content):$.setAttribute("aria-hidden","true"),$}ignoreEvent(){return!1}}function placeholder(dt){return ViewPlugin.fromClass(class{constructor($){this.view=$,this.placeholder=Decoration.set([Decoration.widget({widget:new Placeholder(dt),side:1}).range(0)])}get decorations(){return this.view.state.doc.length?Decoration.none:this.placeholder}},{decorations:$=>$.decorations})}const MaxOff=2e3;function rectangleFor(dt,$,lt){let ft=Math.min($.line,lt.line),St=Math.max($.line,lt.line),Tt=[];if($.off>MaxOff||lt.off>MaxOff||$.col<0||lt.col<0){let Ct=Math.min($.off,lt.off),At=Math.max($.off,lt.off);for(let Rt=ft;Rt<=St;Rt++){let kt=dt.doc.line(Rt);kt.length<=At&&Tt.push(EditorSelection.range(kt.from+Ct,kt.to+At))}}else{let Ct=Math.min($.col,lt.col),At=Math.max($.col,lt.col);for(let Rt=ft;Rt<=St;Rt++){let kt=dt.doc.line(Rt),Nt=findColumn(kt.text,Ct,dt.tabSize,!0);if(Nt<0)Tt.push(EditorSelection.cursor(kt.to));else{let Bt=findColumn(kt.text,At,dt.tabSize);Tt.push(EditorSelection.range(kt.from+Nt,kt.from+Bt))}}}return Tt}function absoluteColumn(dt,$){let lt=dt.coordsAtPos(dt.viewport.from);return lt?Math.round(Math.abs((lt.left-$)/dt.defaultCharacterWidth)):-1}function getPos(dt,$){let lt=dt.posAtCoords({x:$.clientX,y:$.clientY},!1),ft=dt.state.doc.lineAt(lt),St=lt-ft.from,Tt=St>MaxOff?-1:St==ft.length?absoluteColumn(dt,$.clientX):countColumn(ft.text,dt.state.tabSize,lt-ft.from);return{line:ft.number,col:Tt,off:St}}function rectangleSelectionStyle(dt,$){let lt=getPos(dt,$),ft=dt.state.selection;return lt?{update(St){if(St.docChanged){let Tt=St.changes.mapPos(St.startState.doc.line(lt.line).from),Ct=St.state.doc.lineAt(Tt);lt={line:Ct.number,col:lt.col,off:Math.min(lt.off,Ct.length)},ft=ft.map(St.changes)}},get(St,Tt,Ct){let At=getPos(dt,St);if(!At)return ft;let Rt=rectangleFor(dt.state,lt,At);return Rt.length?Ct?EditorSelection.create(Rt.concat(ft.ranges)):EditorSelection.create(Rt):ft}}:null}function rectangularSelection(dt){let $=(dt==null?void 0:dt.eventFilter)||(lt=>lt.altKey&&lt.button==0);return EditorView.mouseSelectionStyle.of((lt,ft)=>$(ft)?rectangleSelectionStyle(lt,ft):null)}const keys={Alt:[18,dt=>dt.altKey],Control:[17,dt=>dt.ctrlKey],Shift:[16,dt=>dt.shiftKey],Meta:[91,dt=>dt.metaKey]},showCrosshair={style:"cursor: crosshair"};function crosshairCursor(dt={}){let[$,lt]=keys[dt.key||"Alt"],ft=ViewPlugin.fromClass(class{constructor(St){this.view=St,this.isDown=!1}set(St){this.isDown!=St&&(this.isDown=St,this.view.update([]))}},{eventHandlers:{keydown(St){this.set(St.keyCode==$||lt(St))},keyup(St){(St.keyCode==$||!lt(St))&&this.set(!1)},mousemove(St){this.set(lt(St))}}});return[ft,EditorView.contentAttributes.of(St=>{var Tt;return!((Tt=St.plugin(ft))===null||Tt===void 0)&&Tt.isDown?showCrosshair:null})]}const Outside="-10000px";class TooltipViewManager{constructor($,lt,ft){this.facet=lt,this.createTooltipView=ft,this.input=$.state.facet(lt),this.tooltips=this.input.filter(St=>St),this.tooltipViews=this.tooltips.map(ft)}update($){var lt;let ft=$.state.facet(this.facet),St=ft.filter(Ct=>Ct);if(ft===this.input){for(let Ct of this.tooltipViews)Ct.update&&Ct.update($);return!1}let Tt=[];for(let Ct=0;Ct<St.length;Ct++){let At=St[Ct],Rt=-1;if(At){for(let kt=0;kt<this.tooltips.length;kt++){let Nt=this.tooltips[kt];Nt&&Nt.create==At.create&&(Rt=kt)}if(Rt<0)Tt[Ct]=this.createTooltipView(At);else{let kt=Tt[Ct]=this.tooltipViews[Rt];kt.update&&kt.update($)}}}for(let Ct of this.tooltipViews)Tt.indexOf(Ct)<0&&(Ct.dom.remove(),(lt=Ct.destroy)===null||lt===void 0||lt.call(Ct));return this.input=ft,this.tooltips=St,this.tooltipViews=Tt,!0}}function windowSpace(dt){let{win:$}=dt;return{top:0,left:0,bottom:$.innerHeight,right:$.innerWidth}}const tooltipConfig=Facet.define({combine:dt=>{var $,lt,ft;return{position:browser.ios?"absolute":(($=dt.find(St=>St.position))===null||$===void 0?void 0:$.position)||"fixed",parent:((lt=dt.find(St=>St.parent))===null||lt===void 0?void 0:lt.parent)||null,tooltipSpace:((ft=dt.find(St=>St.tooltipSpace))===null||ft===void 0?void 0:ft.tooltipSpace)||windowSpace}}}),knownHeight=new WeakMap,tooltipPlugin=ViewPlugin.fromClass(class{constructor(dt){this.view=dt,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let $=dt.state.facet(tooltipConfig);this.position=$.position,this.parent=$.parent,this.classes=dt.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new TooltipViewManager(dt,showTooltip,lt=>this.createTooltip(lt)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(lt=>{Date.now()>this.lastTransaction-50&&lt.length>0&&lt[lt.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),dt.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let dt of this.manager.tooltipViews)this.intersectionObserver.observe(dt.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(dt){dt.transactions.length&&(this.lastTransaction=Date.now());let $=this.manager.update(dt);$&&this.observeIntersection();let lt=$||dt.geometryChanged,ft=dt.state.facet(tooltipConfig);if(ft.position!=this.position){this.position=ft.position;for(let St of this.manager.tooltipViews)St.dom.style.position=this.position;lt=!0}if(ft.parent!=this.parent){this.parent&&this.container.remove(),this.parent=ft.parent,this.createContainer();for(let St of this.manager.tooltipViews)this.container.appendChild(St.dom);lt=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);lt&&this.maybeMeasure()}createTooltip(dt){let $=dt.create(this.view);if($.dom.classList.add("cm-tooltip"),dt.arrow&&!$.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let lt=document.createElement("div");lt.className="cm-tooltip-arrow",$.dom.appendChild(lt)}return $.dom.style.position=this.position,$.dom.style.top=Outside,this.container.appendChild($.dom),$.mount&&$.mount(this.view),$}destroy(){var dt,$;this.view.win.removeEventListener("resize",this.measureSoon);for(let lt of this.manager.tooltipViews)lt.dom.remove(),(dt=lt.destroy)===null||dt===void 0||dt.call(lt);($=this.intersectionObserver)===null||$===void 0||$.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let dt=this.view.dom.getBoundingClientRect();return{editor:dt,parent:this.parent?this.container.getBoundingClientRect():dt,pos:this.manager.tooltips.map(($,lt)=>{let ft=this.manager.tooltipViews[lt];return ft.getCoords?ft.getCoords($.pos):this.view.coordsAtPos($.pos)}),size:this.manager.tooltipViews.map(({dom:$})=>$.getBoundingClientRect()),space:this.view.state.facet(tooltipConfig).tooltipSpace(this.view)}}writeMeasure(dt){var $;let{editor:lt,space:ft}=dt,St=[];for(let Tt=0;Tt<this.manager.tooltips.length;Tt++){let Ct=this.manager.tooltips[Tt],At=this.manager.tooltipViews[Tt],{dom:Rt}=At,kt=dt.pos[Tt],Nt=dt.size[Tt];if(!kt||kt.bottom<=Math.max(lt.top,ft.top)||kt.top>=Math.min(lt.bottom,ft.bottom)||kt.right<Math.max(lt.left,ft.left)-.1||kt.left>Math.min(lt.right,ft.right)+.1){Rt.style.top=Outside;continue}let Bt=Ct.arrow?At.dom.querySelector(".cm-tooltip-arrow"):null,Ut=Bt?7:0,zt=Nt.right-Nt.left,Zt=($=knownHeight.get(At))!==null&&$!==void 0?$:Nt.bottom-Nt.top,ln=At.offset||noOffset,cn=this.view.textDirection==Direction.LTR,hn=Nt.width>ft.right-ft.left?cn?ft.left:ft.right-Nt.width:cn?Math.min(kt.left-(Bt?14:0)+ln.x,ft.right-zt):Math.max(ft.left,kt.left-zt+(Bt?14:0)-ln.x),pn=!!Ct.above;!Ct.strictSide&&(pn?kt.top-(Nt.bottom-Nt.top)-ln.y<ft.top:kt.bottom+(Nt.bottom-Nt.top)+ln.y>ft.bottom)&&pn==ft.bottom-kt.bottom>kt.top-ft.top&&(pn=!pn);let dn=(pn?kt.top-ft.top:ft.bottom-kt.bottom)-Ut;if(dn<Zt&&At.resize!==!1){if(dn<this.view.defaultLineHeight){Rt.style.top=Outside;continue}knownHeight.set(At,Zt),Rt.style.height=(Zt=dn)+"px"}else Rt.style.height&&(Rt.style.height="");let gn=pn?kt.top-Zt-Ut-ln.y:kt.bottom+Ut+ln.y,vn=hn+zt;if(At.overlap!==!0)for(let Tn of St)Tn.left<vn&&Tn.right>hn&&Tn.top<gn+Zt&&Tn.bottom>gn&&(gn=pn?Tn.top-Zt-2-Ut:Tn.bottom+Ut+2);this.position=="absolute"?(Rt.style.top=gn-dt.parent.top+"px",Rt.style.left=hn-dt.parent.left+"px"):(Rt.style.top=gn+"px",Rt.style.left=hn+"px"),Bt&&(Bt.style.left=`${kt.left+(cn?ln.x:-ln.x)-(hn+14-7)}px`),At.overlap!==!0&&St.push({left:hn,top:gn,right:vn,bottom:gn+Zt}),Rt.classList.toggle("cm-tooltip-above",pn),Rt.classList.toggle("cm-tooltip-below",!pn),At.positioned&&At.positioned(dt.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let dt of this.manager.tooltipViews)dt.dom.style.top=Outside}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),baseTheme$5=EditorView.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),noOffset={x:0,y:0},showTooltip=Facet.define({enables:[tooltipPlugin,baseTheme$5]}),showHoverTooltip=Facet.define();class HoverTooltipHost{constructor($){this.view=$,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new TooltipViewManager($,showHoverTooltip,lt=>this.createHostedView(lt))}static create($){return new HoverTooltipHost($)}createHostedView($){let lt=$.create(this.view);return lt.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(lt.dom),this.mounted&&lt.mount&&lt.mount(this.view),lt}mount($){for(let lt of this.manager.tooltipViews)lt.mount&&lt.mount($);this.mounted=!0}positioned($){for(let lt of this.manager.tooltipViews)lt.positioned&&lt.positioned($)}update($){this.manager.update($)}}const showHoverTooltipHost=showTooltip.compute([showHoverTooltip],dt=>{let $=dt.facet(showHoverTooltip).filter(lt=>lt);return $.length===0?null:{pos:Math.min(...$.map(lt=>lt.pos)),end:Math.max(...$.filter(lt=>lt.end!=null).map(lt=>lt.end)),create:HoverTooltipHost.create,above:$[0].above,arrow:$.some(lt=>lt.arrow)}});class HoverPlugin{constructor($,lt,ft,St,Tt){this.view=$,this.source=lt,this.field=ft,this.setHover=St,this.hoverTime=Tt,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:$.dom,time:0},this.checkHover=this.checkHover.bind(this),$.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),$.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let $=Date.now()-this.lastMove.time;$<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-$):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:$}=this,lt=this.view.contentDOM.contains($.target)?this.view.posAtCoords($):null;if(lt==null)return;let ft=this.view.coordsAtPos(lt);if(ft==null||$.y<ft.top||$.y>ft.bottom||$.x<ft.left-this.view.defaultCharacterWidth||$.x>ft.right+this.view.defaultCharacterWidth)return;let St=this.view.bidiSpans(this.view.state.doc.lineAt(lt)).find(At=>At.from<=lt&&At.to>=lt),Tt=St&&St.dir==Direction.RTL?-1:1,Ct=this.source(this.view,lt,$.x<ft.left?-Tt:Tt);if(Ct!=null&&Ct.then){let At=this.pending={pos:lt};Ct.then(Rt=>{this.pending==At&&(this.pending=null,Rt&&this.view.dispatch({effects:this.setHover.of(Rt)}))},Rt=>logException(this.view.state,Rt,"hover tooltip"))}else Ct&&this.view.dispatch({effects:this.setHover.of(Ct)})}mousemove($){var lt;this.lastMove={x:$.clientX,y:$.clientY,target:$.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let ft=this.active;if(ft&&!isInTooltip(this.lastMove.target)||this.pending){let{pos:St}=ft||this.pending,Tt=(lt=ft==null?void 0:ft.end)!==null&&lt!==void 0?lt:St;(St==Tt?this.view.posAtCoords(this.lastMove)!=St:!isOverRange(this.view,St,Tt,$.clientX,$.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave($){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!isInTooltip($.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function isInTooltip(dt){for(let $=dt;$;$=$.parentNode)if($.nodeType==1&&$.classList.contains("cm-tooltip"))return!0;return!1}function isOverRange(dt,$,lt,ft,St,Tt){let Ct=document.createRange(),At=dt.domAtPos($),Rt=dt.domAtPos(lt);Ct.setEnd(Rt.node,Rt.offset),Ct.setStart(At.node,At.offset);let kt=Ct.getClientRects();Ct.detach();for(let Nt=0;Nt<kt.length;Nt++){let Bt=kt[Nt];if(Math.max(Bt.top-St,St-Bt.bottom,Bt.left-ft,ft-Bt.right)<=Tt)return!0}return!1}function hoverTooltip(dt,$={}){let lt=StateEffect.define(),ft=StateField.define({create(){return null},update(St,Tt){if(St&&($.hideOnChange&&(Tt.docChanged||Tt.selection)||$.hideOn&&$.hideOn(Tt,St)))return null;if(St&&Tt.docChanged){let Ct=Tt.changes.mapPos(St.pos,-1,MapMode.TrackDel);if(Ct==null)return null;let At=Object.assign(Object.create(null),St);At.pos=Ct,St.end!=null&&(At.end=Tt.changes.mapPos(St.end)),St=At}for(let Ct of Tt.effects)Ct.is(lt)&&(St=Ct.value),Ct.is(closeHoverTooltipEffect)&&(St=null);return St},provide:St=>showHoverTooltip.from(St)});return[ft,ViewPlugin.define(St=>new HoverPlugin(St,dt,ft,lt,$.hoverTime||300)),showHoverTooltipHost]}function getTooltip(dt,$){let lt=dt.plugin(tooltipPlugin);if(!lt)return null;let ft=lt.manager.tooltips.indexOf($);return ft<0?null:lt.manager.tooltipViews[ft]}const closeHoverTooltipEffect=StateEffect.define(),panelConfig=Facet.define({combine(dt){let $,lt;for(let ft of dt)$=$||ft.topContainer,lt=lt||ft.bottomContainer;return{topContainer:$,bottomContainer:lt}}});function getPanel(dt,$){let lt=dt.plugin(panelPlugin),ft=lt?lt.specs.indexOf($):-1;return ft>-1?lt.panels[ft]:null}const panelPlugin=ViewPlugin.fromClass(class{constructor(dt){this.input=dt.state.facet(showPanel),this.specs=this.input.filter(lt=>lt),this.panels=this.specs.map(lt=>lt(dt));let $=dt.state.facet(panelConfig);this.top=new PanelGroup(dt,!0,$.topContainer),this.bottom=new PanelGroup(dt,!1,$.bottomContainer),this.top.sync(this.panels.filter(lt=>lt.top)),this.bottom.sync(this.panels.filter(lt=>!lt.top));for(let lt of this.panels)lt.dom.classList.add("cm-panel"),lt.mount&&lt.mount()}update(dt){let $=dt.state.facet(panelConfig);this.top.container!=$.topContainer&&(this.top.sync([]),this.top=new PanelGroup(dt.view,!0,$.topContainer)),this.bottom.container!=$.bottomContainer&&(this.bottom.sync([]),this.bottom=new PanelGroup(dt.view,!1,$.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let lt=dt.state.facet(showPanel);if(lt!=this.input){let ft=lt.filter(Rt=>Rt),St=[],Tt=[],Ct=[],At=[];for(let Rt of ft){let kt=this.specs.indexOf(Rt),Nt;kt<0?(Nt=Rt(dt.view),At.push(Nt)):(Nt=this.panels[kt],Nt.update&&Nt.update(dt)),St.push(Nt),(Nt.top?Tt:Ct).push(Nt)}this.specs=ft,this.panels=St,this.top.sync(Tt),this.bottom.sync(Ct);for(let Rt of At)Rt.dom.classList.add("cm-panel"),Rt.mount&&Rt.mount()}else for(let ft of this.panels)ft.update&&ft.update(dt)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:dt=>EditorView.scrollMargins.of($=>{let lt=$.plugin(dt);return lt&&{top:lt.top.scrollMargin(),bottom:lt.bottom.scrollMargin()}})});class PanelGroup{constructor($,lt,ft){this.view=$,this.top=lt,this.container=ft,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync($){for(let lt of this.panels)lt.destroy&&$.indexOf(lt)<0&&lt.destroy();this.panels=$,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let lt=this.container||this.view.dom;lt.insertBefore(this.dom,this.top?lt.firstChild:null)}let $=this.dom.firstChild;for(let lt of this.panels)if(lt.dom.parentNode==this.dom){for(;$!=lt.dom;)$=rm($);$=$.nextSibling}else this.dom.insertBefore(lt.dom,$);for(;$;)$=rm($)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let $ of this.classes.split(" "))$&&this.container.classList.remove($);for(let $ of(this.classes=this.view.themeClasses).split(" "))$&&this.container.classList.add($)}}}function rm(dt){let $=dt.nextSibling;return dt.remove(),$}const showPanel=Facet.define({enables:panelPlugin});class GutterMarker extends RangeValue{compare($){return this==$||this.constructor==$.constructor&&this.eq($)}eq($){return!1}destroy($){}}GutterMarker.prototype.elementClass="";GutterMarker.prototype.toDOM=void 0;GutterMarker.prototype.mapMode=MapMode.TrackBefore;GutterMarker.prototype.startSide=GutterMarker.prototype.endSide=-1;GutterMarker.prototype.point=!0;const gutterLineClass=Facet.define(),defaults$1={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>RangeSet.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},activeGutters=Facet.define();function gutter(dt){return[gutters(),activeGutters.of(Object.assign(Object.assign({},defaults$1),dt))]}const unfixGutters=Facet.define({combine:dt=>dt.some($=>$)});function gutters(dt){let $=[gutterView];return dt&&dt.fixed===!1&&$.push(unfixGutters.of(!0)),$}const gutterView=ViewPlugin.fromClass(class{constructor(dt){this.view=dt,this.prevViewport=dt.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=dt.state.facet(activeGutters).map($=>new SingleGutterView(dt,$));for(let $ of this.gutters)this.dom.appendChild($.dom);this.fixed=!dt.state.facet(unfixGutters),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),dt.scrollDOM.insertBefore(this.dom,dt.contentDOM)}update(dt){if(this.updateGutters(dt)){let $=this.prevViewport,lt=dt.view.viewport,ft=Math.min($.to,lt.to)-Math.max($.from,lt.from);this.syncGutters(ft<(lt.to-lt.from)*.8)}dt.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(unfixGutters)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=dt.view.viewport}syncGutters(dt){let $=this.dom.nextSibling;dt&&this.dom.remove();let lt=RangeSet.iter(this.view.state.facet(gutterLineClass),this.view.viewport.from),ft=[],St=this.gutters.map(Tt=>new UpdateContext(Tt,this.view.viewport,-this.view.documentPadding.top));for(let Tt of this.view.viewportLineBlocks){let Ct;if(Array.isArray(Tt.type)){for(let At of Tt.type)if(At.type==BlockType.Text){Ct=At;break}}else Ct=Tt.type==BlockType.Text?Tt:void 0;if(Ct){ft.length&&(ft=[]),advanceCursor(lt,ft,Tt.from);for(let At of St)At.line(this.view,Ct,ft)}}for(let Tt of St)Tt.finish();dt&&this.view.scrollDOM.insertBefore(this.dom,$)}updateGutters(dt){let $=dt.startState.facet(activeGutters),lt=dt.state.facet(activeGutters),ft=dt.docChanged||dt.heightChanged||dt.viewportChanged||!RangeSet.eq(dt.startState.facet(gutterLineClass),dt.state.facet(gutterLineClass),dt.view.viewport.from,dt.view.viewport.to);if($==lt)for(let St of this.gutters)St.update(dt)&&(ft=!0);else{ft=!0;let St=[];for(let Tt of lt){let Ct=$.indexOf(Tt);Ct<0?St.push(new SingleGutterView(this.view,Tt)):(this.gutters[Ct].update(dt),St.push(this.gutters[Ct]))}for(let Tt of this.gutters)Tt.dom.remove(),St.indexOf(Tt)<0&&Tt.destroy();for(let Tt of St)this.dom.appendChild(Tt.dom);this.gutters=St}return ft}destroy(){for(let dt of this.gutters)dt.destroy();this.dom.remove()}},{provide:dt=>EditorView.scrollMargins.of($=>{let lt=$.plugin(dt);return!lt||lt.gutters.length==0||!lt.fixed?null:$.textDirection==Direction.LTR?{left:lt.dom.offsetWidth}:{right:lt.dom.offsetWidth}})});function asArray(dt){return Array.isArray(dt)?dt:[dt]}function advanceCursor(dt,$,lt){for(;dt.value&&dt.from<=lt;)dt.from==lt&&$.push(dt.value),dt.next()}class UpdateContext{constructor($,lt,ft){this.gutter=$,this.height=ft,this.i=0,this.cursor=RangeSet.iter($.markers,lt.from)}line($,lt,ft){let St=[];advanceCursor(this.cursor,St,lt.from),ft.length&&(St=St.concat(ft));let Tt=this.gutter.config.lineMarker($,lt,St);Tt&&St.unshift(Tt);let Ct=this.gutter;if(St.length==0&&!Ct.config.renderEmptyElements)return;let At=lt.top-this.height;if(this.i==Ct.elements.length){let Rt=new GutterElement($,lt.height,At,St);Ct.elements.push(Rt),Ct.dom.appendChild(Rt.dom)}else Ct.elements[this.i].update($,lt.height,At,St);this.height=lt.bottom,this.i++}finish(){let $=this.gutter;for(;$.elements.length>this.i;){let lt=$.elements.pop();$.dom.removeChild(lt.dom),lt.destroy()}}}class SingleGutterView{constructor($,lt){this.view=$,this.config=lt,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let ft in lt.domEventHandlers)this.dom.addEventListener(ft,St=>{let Tt=St.target,Ct;if(Tt!=this.dom&&this.dom.contains(Tt)){for(;Tt.parentNode!=this.dom;)Tt=Tt.parentNode;let Rt=Tt.getBoundingClientRect();Ct=(Rt.top+Rt.bottom)/2}else Ct=St.clientY;let At=$.lineBlockAtHeight(Ct-$.documentTop);lt.domEventHandlers[ft]($,At,St)&&St.preventDefault()});this.markers=asArray(lt.markers($)),lt.initialSpacer&&(this.spacer=new GutterElement($,0,0,[lt.initialSpacer($)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update($){let lt=this.markers;if(this.markers=asArray(this.config.markers($.view)),this.spacer&&this.config.updateSpacer){let St=this.config.updateSpacer(this.spacer.markers[0],$);St!=this.spacer.markers[0]&&this.spacer.update($.view,0,0,[St])}let ft=$.view.viewport;return!RangeSet.eq(this.markers,lt,ft.from,ft.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange($):!1)}destroy(){for(let $ of this.elements)$.destroy()}}class GutterElement{constructor($,lt,ft,St){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update($,lt,ft,St)}update($,lt,ft,St){this.height!=lt&&(this.dom.style.height=(this.height=lt)+"px"),this.above!=ft&&(this.dom.style.marginTop=(this.above=ft)?ft+"px":""),sameMarkers(this.markers,St)||this.setMarkers($,St)}setMarkers($,lt){let ft="cm-gutterElement",St=this.dom.firstChild;for(let Tt=0,Ct=0;;){let At=Ct,Rt=Tt<lt.length?lt[Tt++]:null,kt=!1;if(Rt){let Nt=Rt.elementClass;Nt&&(ft+=" "+Nt);for(let Bt=Ct;Bt<this.markers.length;Bt++)if(this.markers[Bt].compare(Rt)){At=Bt,kt=!0;break}}else At=this.markers.length;for(;Ct<At;){let Nt=this.markers[Ct++];if(Nt.toDOM){Nt.destroy(St);let Bt=St.nextSibling;St.remove(),St=Bt}}if(!Rt)break;Rt.toDOM&&(kt?St=St.nextSibling:this.dom.insertBefore(Rt.toDOM($),St)),kt&&Ct++}this.dom.className=ft,this.markers=lt}destroy(){this.setMarkers(null,[])}}function sameMarkers(dt,$){if(dt.length!=$.length)return!1;for(let lt=0;lt<dt.length;lt++)if(!dt[lt].compare($[lt]))return!1;return!0}const lineNumberMarkers=Facet.define(),lineNumberConfig=Facet.define({combine(dt){return combineConfig(dt,{formatNumber:String,domEventHandlers:{}},{domEventHandlers($,lt){let ft=Object.assign({},$);for(let St in lt){let Tt=ft[St],Ct=lt[St];ft[St]=Tt?(At,Rt,kt)=>Tt(At,Rt,kt)||Ct(At,Rt,kt):Ct}return ft}})}});class NumberMarker extends GutterMarker{constructor($){super(),this.number=$}eq($){return this.number==$.number}toDOM(){return document.createTextNode(this.number)}}function formatNumber(dt,$){return dt.state.facet(lineNumberConfig).formatNumber($,dt.state)}const lineNumberGutter=activeGutters.compute([lineNumberConfig],dt=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers($){return $.state.facet(lineNumberMarkers)},lineMarker($,lt,ft){return ft.some(St=>St.toDOM)?null:new NumberMarker(formatNumber($,$.state.doc.lineAt(lt.from).number))},lineMarkerChange:$=>$.startState.facet(lineNumberConfig)!=$.state.facet(lineNumberConfig),initialSpacer($){return new NumberMarker(formatNumber($,maxLineNumber($.state.doc.lines)))},updateSpacer($,lt){let ft=formatNumber(lt.view,maxLineNumber(lt.view.state.doc.lines));return ft==$.number?$:new NumberMarker(ft)},domEventHandlers:dt.facet(lineNumberConfig).domEventHandlers}));function lineNumbers(dt={}){return[lineNumberConfig.of(dt),gutters(),lineNumberGutter]}function maxLineNumber(dt){let $=9;for(;$<dt;)$=$*10+9;return $}const activeLineGutterMarker=new class extends GutterMarker{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},activeLineGutterHighlighter=gutterLineClass.compute(["selection"],dt=>{let $=[],lt=-1;for(let ft of dt.selection.ranges){let St=dt.doc.lineAt(ft.head).from;St>lt&&(lt=St,$.push(activeLineGutterMarker.range(St)))}return RangeSet.of($)});function highlightActiveLineGutter(){return activeLineGutterHighlighter}var _a;const languageDataProp=new NodeProp;function defineLanguageFacet(dt){return Facet.define({combine:dt?$=>$.concat(dt):void 0})}const sublanguageProp=new NodeProp;class Language{constructor($,lt,ft=[],St=""){this.data=$,this.name=St,EditorState.prototype.hasOwnProperty("tree")||Object.defineProperty(EditorState.prototype,"tree",{get(){return syntaxTree(this)}}),this.parser=lt,this.extension=[language.of(this),EditorState.languageData.of((Tt,Ct,At)=>{let Rt=topNodeAt(Tt,Ct,At),kt=Rt.type.prop(languageDataProp);if(!kt)return[];let Nt=Tt.facet(kt),Bt=Rt.type.prop(sublanguageProp);if(Bt){let Ut=Rt.resolve(Ct-Rt.from,At);for(let zt of Bt)if(zt.test(Ut,Tt)){let Zt=Tt.facet(zt.facet);return zt.type=="replace"?Zt:Zt.concat(Nt)}}return Nt})].concat(ft)}isActiveAt($,lt,ft=-1){return topNodeAt($,lt,ft).type.prop(languageDataProp)==this.data}findRegions($){let lt=$.facet(language);if((lt==null?void 0:lt.data)==this.data)return[{from:0,to:$.doc.length}];if(!lt||!lt.allowsNesting)return[];let ft=[],St=(Tt,Ct)=>{if(Tt.prop(languageDataProp)==this.data){ft.push({from:Ct,to:Ct+Tt.length});return}let At=Tt.prop(NodeProp.mounted);if(At){if(At.tree.prop(languageDataProp)==this.data){if(At.overlay)for(let Rt of At.overlay)ft.push({from:Rt.from+Ct,to:Rt.to+Ct});else ft.push({from:Ct,to:Ct+Tt.length});return}else if(At.overlay){let Rt=ft.length;if(St(At.tree,At.overlay[0].from+Ct),ft.length>Rt)return}}for(let Rt=0;Rt<Tt.children.length;Rt++){let kt=Tt.children[Rt];kt instanceof Tree&&St(kt,Tt.positions[Rt]+Ct)}};return St(syntaxTree($),0),ft}get allowsNesting(){return!0}}Language.setState=StateEffect.define();function topNodeAt(dt,$,lt){let ft=dt.facet(language),St=syntaxTree(dt).topNode;if(!ft||ft.allowsNesting)for(let Tt=St;Tt;Tt=Tt.enter($,lt,IterMode.ExcludeBuffers))Tt.type.isTop&&(St=Tt);return St}class LRLanguage extends Language{constructor($,lt,ft){super($,lt,[],ft),this.parser=lt}static define($){let lt=defineLanguageFacet($.languageData);return new LRLanguage(lt,$.parser.configure({props:[languageDataProp.add(ft=>ft.isTop?lt:void 0)]}),$.name)}configure($,lt){return new LRLanguage(this.data,this.parser.configure($),lt||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function syntaxTree(dt){let $=dt.field(Language.state,!1);return $?$.tree:Tree.empty}class DocInput{constructor($){this.doc=$,this.cursorPos=0,this.string="",this.cursor=$.iter()}get length(){return this.doc.length}syncTo($){return this.string=this.cursor.next($-this.cursorPos).value,this.cursorPos=$+this.string.length,this.cursorPos-this.string.length}chunk($){return this.syncTo($),this.string}get lineChunks(){return!0}read($,lt){let ft=this.cursorPos-this.string.length;return $<ft||lt>=this.cursorPos?this.doc.sliceString($,lt):this.string.slice($-ft,lt-ft)}}let currentContext=null;class ParseContext{constructor($,lt,ft=[],St,Tt,Ct,At,Rt){this.parser=$,this.state=lt,this.fragments=ft,this.tree=St,this.treeLen=Tt,this.viewport=Ct,this.skipped=At,this.scheduleOn=Rt,this.parse=null,this.tempSkipped=[]}static create($,lt,ft){return new ParseContext($,lt,[],Tree.empty,0,ft,[],null)}startParse(){return this.parser.startParse(new DocInput(this.state.doc),this.fragments)}work($,lt){return lt!=null&&lt>=this.state.doc.length&&(lt=void 0),this.tree!=Tree.empty&&this.isDone(lt??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var ft;if(typeof $=="number"){let St=Date.now()+$;$=()=>Date.now()>St}for(this.parse||(this.parse=this.startParse()),lt!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>lt)&&lt<this.state.doc.length&&this.parse.stopAt(lt);;){let St=this.parse.advance();if(St)if(this.fragments=this.withoutTempSkipped(TreeFragment.addTree(St,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(ft=this.parse.stoppedAt)!==null&&ft!==void 0?ft:this.state.doc.length,this.tree=St,this.parse=null,this.treeLen<(lt??this.state.doc.length))this.parse=this.startParse();else return!0;if($())return!1}})}takeTree(){let $,lt;this.parse&&($=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>$)&&this.parse.stopAt($),this.withContext(()=>{for(;!(lt=this.parse.advance()););}),this.treeLen=$,this.tree=lt,this.fragments=this.withoutTempSkipped(TreeFragment.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext($){let lt=currentContext;currentContext=this;try{return $()}finally{currentContext=lt}}withoutTempSkipped($){for(let lt;lt=this.tempSkipped.pop();)$=cutFragments($,lt.from,lt.to);return $}changes($,lt){let{fragments:ft,tree:St,treeLen:Tt,viewport:Ct,skipped:At}=this;if(this.takeTree(),!$.empty){let Rt=[];if($.iterChangedRanges((kt,Nt,Bt,Ut)=>Rt.push({fromA:kt,toA:Nt,fromB:Bt,toB:Ut})),ft=TreeFragment.applyChanges(ft,Rt),St=Tree.empty,Tt=0,Ct={from:$.mapPos(Ct.from,-1),to:$.mapPos(Ct.to,1)},this.skipped.length){At=[];for(let kt of this.skipped){let Nt=$.mapPos(kt.from,1),Bt=$.mapPos(kt.to,-1);Nt<Bt&&At.push({from:Nt,to:Bt})}}}return new ParseContext(this.parser,lt,ft,St,Tt,Ct,At,this.scheduleOn)}updateViewport($){if(this.viewport.from==$.from&&this.viewport.to==$.to)return!1;this.viewport=$;let lt=this.skipped.length;for(let ft=0;ft<this.skipped.length;ft++){let{from:St,to:Tt}=this.skipped[ft];St<$.to&&Tt>$.from&&(this.fragments=cutFragments(this.fragments,St,Tt),this.skipped.splice(ft--,1))}return this.skipped.length>=lt?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView($,lt){this.skipped.push({from:$,to:lt})}static getSkippingParser($){return new class extends Parser{createParse(lt,ft,St){let Tt=St[0].from,Ct=St[St.length-1].to;return{parsedPos:Tt,advance(){let Rt=currentContext;if(Rt){for(let kt of St)Rt.tempSkipped.push(kt);$&&(Rt.scheduleOn=Rt.scheduleOn?Promise.all([Rt.scheduleOn,$]):$)}return this.parsedPos=Ct,new Tree(NodeType.none,[],[],Ct-Tt)},stoppedAt:null,stopAt(){}}}}}isDone($){$=Math.min($,this.state.doc.length);let lt=this.fragments;return this.treeLen>=$&&lt.length&&lt[0].from==0&&lt[0].to>=$}static get(){return currentContext}}function cutFragments(dt,$,lt){return TreeFragment.applyChanges(dt,[{fromA:$,toA:lt,fromB:$,toB:lt}])}class LanguageState{constructor($){this.context=$,this.tree=$.tree}apply($){if(!$.docChanged&&this.tree==this.context.tree)return this;let lt=this.context.changes($.changes,$.state),ft=this.context.treeLen==$.startState.doc.length?void 0:Math.max($.changes.mapPos(this.context.treeLen),lt.viewport.to);return lt.work(20,ft)||lt.takeTree(),new LanguageState(lt)}static init($){let lt=Math.min(3e3,$.doc.length),ft=ParseContext.create($.facet(language).parser,$,{from:0,to:lt});return ft.work(20,lt)||ft.takeTree(),new LanguageState(ft)}}Language.state=StateField.define({create:LanguageState.init,update(dt,$){for(let lt of $.effects)if(lt.is(Language.setState))return lt.value;return $.startState.facet(language)!=$.state.facet(language)?LanguageState.init($.state):dt.apply($)}});let requestIdle=dt=>{let $=setTimeout(()=>dt(),500);return()=>clearTimeout($)};typeof requestIdleCallback<"u"&&(requestIdle=dt=>{let $=-1,lt=setTimeout(()=>{$=requestIdleCallback(dt,{timeout:500-100})},100);return()=>$<0?clearTimeout(lt):cancelIdleCallback($)});const isInputPending=typeof navigator<"u"&&(!((_a=navigator.scheduling)===null||_a===void 0)&&_a.isInputPending)?()=>navigator.scheduling.isInputPending():null,parseWorker=ViewPlugin.fromClass(class{constructor($){this.view=$,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update($){let lt=this.view.state.field(Language.state).context;(lt.updateViewport($.view.viewport)||this.view.viewport.to>lt.treeLen)&&this.scheduleWork(),$.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(lt)}scheduleWork(){if(this.working)return;let{state:$}=this.view,lt=$.field(Language.state);(lt.tree!=lt.context.tree||!lt.context.isDone($.doc.length))&&(this.working=requestIdle(this.work))}work($){this.working=null;let lt=Date.now();if(this.chunkEnd<lt&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=lt+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:ft,viewport:{to:St}}=this.view,Tt=ft.field(Language.state);if(Tt.tree==Tt.context.tree&&Tt.context.isDone(St+1e5))return;let Ct=Date.now()+Math.min(this.chunkBudget,100,$&&!isInputPending?Math.max(25,$.timeRemaining()-5):1e9),At=Tt.context.treeLen<St&&ft.doc.length>St+1e3,Rt=Tt.context.work(()=>isInputPending&&isInputPending()||Date.now()>Ct,St+(At?0:1e5));this.chunkBudget-=Date.now()-lt,(Rt||this.chunkBudget<=0)&&(Tt.context.takeTree(),this.view.dispatch({effects:Language.setState.of(new LanguageState(Tt.context))})),this.chunkBudget>0&&!(Rt&&!At)&&this.scheduleWork(),this.checkAsyncSchedule(Tt.context)}checkAsyncSchedule($){$.scheduleOn&&(this.workScheduled++,$.scheduleOn.then(()=>this.scheduleWork()).catch(lt=>logException(this.view.state,lt)).then(()=>this.workScheduled--),$.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),language=Facet.define({combine(dt){return dt.length?dt[0]:null},enables:dt=>[Language.state,parseWorker,EditorView.contentAttributes.compute([dt],$=>{let lt=$.facet(dt);return lt&&lt.name?{"data-language":lt.name}:{}})]});class LanguageSupport{constructor($,lt=[]){this.language=$,this.support=lt,this.extension=[$,lt]}}const indentService=Facet.define(),indentUnit=Facet.define({combine:dt=>{if(!dt.length)return"  ";let $=dt[0];if(!$||/\S/.test($)||Array.from($).some(lt=>lt!=$[0]))throw new Error("Invalid indent unit: "+JSON.stringify(dt[0]));return $}});function getIndentUnit(dt){let $=dt.facet(indentUnit);return $.charCodeAt(0)==9?dt.tabSize*$.length:$.length}function indentString(dt,$){let lt="",ft=dt.tabSize,St=dt.facet(indentUnit)[0];if(St=="	"){for(;$>=ft;)lt+="	",$-=ft;St=" "}for(let Tt=0;Tt<$;Tt++)lt+=St;return lt}function getIndentation(dt,$){dt instanceof EditorState&&(dt=new IndentContext(dt));for(let ft of dt.state.facet(indentService)){let St=ft(dt,$);if(St!==void 0)return St}let lt=syntaxTree(dt.state);return lt?syntaxIndentation(dt,lt,$):null}class IndentContext{constructor($,lt={}){this.state=$,this.options=lt,this.unit=getIndentUnit($)}lineAt($,lt=1){let ft=this.state.doc.lineAt($),{simulateBreak:St,simulateDoubleBreak:Tt}=this.options;return St!=null&&St>=ft.from&&St<=ft.to?Tt&&St==$?{text:"",from:$}:(lt<0?St<$:St<=$)?{text:ft.text.slice(St-ft.from),from:St}:{text:ft.text.slice(0,St-ft.from),from:ft.from}:ft}textAfterPos($,lt=1){if(this.options.simulateDoubleBreak&&$==this.options.simulateBreak)return"";let{text:ft,from:St}=this.lineAt($,lt);return ft.slice($-St,Math.min(ft.length,$+100-St))}column($,lt=1){let{text:ft,from:St}=this.lineAt($,lt),Tt=this.countColumn(ft,$-St),Ct=this.options.overrideIndentation?this.options.overrideIndentation(St):-1;return Ct>-1&&(Tt+=Ct-this.countColumn(ft,ft.search(/\S|$/))),Tt}countColumn($,lt=$.length){return countColumn($,this.state.tabSize,lt)}lineIndent($,lt=1){let{text:ft,from:St}=this.lineAt($,lt),Tt=this.options.overrideIndentation;if(Tt){let Ct=Tt(St);if(Ct>-1)return Ct}return this.countColumn(ft,ft.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const indentNodeProp=new NodeProp;function syntaxIndentation(dt,$,lt){return indentFrom($.resolveInner(lt).enterUnfinishedNodesBefore(lt),lt,dt)}function ignoreClosed(dt){return dt.pos==dt.options.simulateBreak&&dt.options.simulateDoubleBreak}function indentStrategy(dt){let $=dt.type.prop(indentNodeProp);if($)return $;let lt=dt.firstChild,ft;if(lt&&(ft=lt.type.prop(NodeProp.closedBy))){let St=dt.lastChild,Tt=St&&ft.indexOf(St.name)>-1;return Ct=>delimitedStrategy(Ct,!0,1,void 0,Tt&&!ignoreClosed(Ct)?St.from:void 0)}return dt.parent==null?topIndent:null}function indentFrom(dt,$,lt){for(;dt;dt=dt.parent){let ft=indentStrategy(dt);if(ft)return ft(TreeIndentContext.create(lt,$,dt))}return null}function topIndent(){return 0}class TreeIndentContext extends IndentContext{constructor($,lt,ft){super($.state,$.options),this.base=$,this.pos=lt,this.node=ft}static create($,lt,ft){return new TreeIndentContext($,lt,ft)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let $=this.state.doc.lineAt(this.node.from);for(;;){let lt=this.node.resolve($.from);for(;lt.parent&&lt.parent.from==lt.from;)lt=lt.parent;if(isParent(lt,this.node))break;$=this.state.doc.lineAt(lt.from)}return this.lineIndent($.from)}continue(){let $=this.node.parent;return $?indentFrom($,this.pos,this.base):0}}function isParent(dt,$){for(let lt=$;lt;lt=lt.parent)if(dt==lt)return!0;return!1}function bracketedAligned(dt){let $=dt.node,lt=$.childAfter($.from),ft=$.lastChild;if(!lt)return null;let St=dt.options.simulateBreak,Tt=dt.state.doc.lineAt(lt.from),Ct=St==null||St<=Tt.from?Tt.to:Math.min(Tt.to,St);for(let At=lt.to;;){let Rt=$.childAfter(At);if(!Rt||Rt==ft)return null;if(!Rt.type.isSkipped)return Rt.from<Ct?lt:null;At=Rt.to}}function delimitedIndent({closing:dt,align:$=!0,units:lt=1}){return ft=>delimitedStrategy(ft,$,lt,dt)}function delimitedStrategy(dt,$,lt,ft,St){let Tt=dt.textAfter,Ct=Tt.match(/^\s*/)[0].length,At=ft&&Tt.slice(Ct,Ct+ft.length)==ft||St==dt.pos+Ct,Rt=$?bracketedAligned(dt):null;return Rt?At?dt.column(Rt.from):dt.column(Rt.to):dt.baseIndent+(At?0:dt.unit*lt)}const flatIndent=dt=>dt.baseIndent;function continuedIndent({except:dt,units:$=1}={}){return lt=>{let ft=dt&&dt.test(lt.textAfter);return lt.baseIndent+(ft?0:$*lt.unit)}}const DontIndentBeyond=200;function indentOnInput(){return EditorState.transactionFilter.of(dt=>{if(!dt.docChanged||!dt.isUserEvent("input.type")&&!dt.isUserEvent("input.complete"))return dt;let $=dt.startState.languageDataAt("indentOnInput",dt.startState.selection.main.head);if(!$.length)return dt;let lt=dt.newDoc,{head:ft}=dt.newSelection.main,St=lt.lineAt(ft);if(ft>St.from+DontIndentBeyond)return dt;let Tt=lt.sliceString(St.from,ft);if(!$.some(kt=>kt.test(Tt)))return dt;let{state:Ct}=dt,At=-1,Rt=[];for(let{head:kt}of Ct.selection.ranges){let Nt=Ct.doc.lineAt(kt);if(Nt.from==At)continue;At=Nt.from;let Bt=getIndentation(Ct,Nt.from);if(Bt==null)continue;let Ut=/^\s*/.exec(Nt.text)[0],zt=indentString(Ct,Bt);Ut!=zt&&Rt.push({from:Nt.from,to:Nt.from+Ut.length,insert:zt})}return Rt.length?[dt,{changes:Rt,sequential:!0}]:dt})}const foldService=Facet.define(),foldNodeProp=new NodeProp;function foldInside(dt){let $=dt.firstChild,lt=dt.lastChild;return $&&$.to<lt.from?{from:$.to,to:lt.type.isError?dt.to:lt.from}:null}function syntaxFolding(dt,$,lt){let ft=syntaxTree(dt);if(ft.length<lt)return null;let St=ft.resolveInner(lt,1),Tt=null;for(let Ct=St;Ct;Ct=Ct.parent){if(Ct.to<=lt||Ct.from>lt)continue;if(Tt&&Ct.from<$)break;let At=Ct.type.prop(foldNodeProp);if(At&&(Ct.to<ft.length-50||ft.length==dt.doc.length||!isUnfinished(Ct))){let Rt=At(Ct,dt);Rt&&Rt.from<=lt&&Rt.from>=$&&Rt.to>lt&&(Tt=Rt)}}return Tt}function isUnfinished(dt){let $=dt.lastChild;return $&&$.to==dt.to&&$.type.isError}function foldable(dt,$,lt){for(let ft of dt.facet(foldService)){let St=ft(dt,$,lt);if(St)return St}return syntaxFolding(dt,$,lt)}function mapRange(dt,$){let lt=$.mapPos(dt.from,1),ft=$.mapPos(dt.to,-1);return lt>=ft?void 0:{from:lt,to:ft}}const foldEffect=StateEffect.define({map:mapRange}),unfoldEffect=StateEffect.define({map:mapRange});function selectedLines(dt){let $=[];for(let{head:lt}of dt.state.selection.ranges)$.some(ft=>ft.from<=lt&&ft.to>=lt)||$.push(dt.lineBlockAt(lt));return $}const foldState=StateField.define({create(){return Decoration.none},update(dt,$){dt=dt.map($.changes);for(let lt of $.effects)lt.is(foldEffect)&&!foldExists(dt,lt.value.from,lt.value.to)?dt=dt.update({add:[foldWidget.range(lt.value.from,lt.value.to)]}):lt.is(unfoldEffect)&&(dt=dt.update({filter:(ft,St)=>lt.value.from!=ft||lt.value.to!=St,filterFrom:lt.value.from,filterTo:lt.value.to}));if($.selection){let lt=!1,{head:ft}=$.selection.main;dt.between(ft,ft,(St,Tt)=>{St<ft&&Tt>ft&&(lt=!0)}),lt&&(dt=dt.update({filterFrom:ft,filterTo:ft,filter:(St,Tt)=>Tt<=ft||St>=ft}))}return dt},provide:dt=>EditorView.decorations.from(dt),toJSON(dt,$){let lt=[];return dt.between(0,$.doc.length,(ft,St)=>{lt.push(ft,St)}),lt},fromJSON(dt){if(!Array.isArray(dt)||dt.length%2)throw new RangeError("Invalid JSON for fold state");let $=[];for(let lt=0;lt<dt.length;){let ft=dt[lt++],St=dt[lt++];if(typeof ft!="number"||typeof St!="number")throw new RangeError("Invalid JSON for fold state");$.push(foldWidget.range(ft,St))}return Decoration.set($,!0)}});function findFold(dt,$,lt){var ft;let St=null;return(ft=dt.field(foldState,!1))===null||ft===void 0||ft.between($,lt,(Tt,Ct)=>{(!St||St.from>Tt)&&(St={from:Tt,to:Ct})}),St}function foldExists(dt,$,lt){let ft=!1;return dt.between($,$,(St,Tt)=>{St==$&&Tt==lt&&(ft=!0)}),ft}function maybeEnable(dt,$){return dt.field(foldState,!1)?$:$.concat(StateEffect.appendConfig.of(codeFolding()))}const foldCode=dt=>{for(let $ of selectedLines(dt)){let lt=foldable(dt.state,$.from,$.to);if(lt)return dt.dispatch({effects:maybeEnable(dt.state,[foldEffect.of(lt),announceFold(dt,lt)])}),!0}return!1},unfoldCode=dt=>{if(!dt.state.field(foldState,!1))return!1;let $=[];for(let lt of selectedLines(dt)){let ft=findFold(dt.state,lt.from,lt.to);ft&&$.push(unfoldEffect.of(ft),announceFold(dt,ft,!1))}return $.length&&dt.dispatch({effects:$}),$.length>0};function announceFold(dt,$,lt=!0){let ft=dt.state.doc.lineAt($.from).number,St=dt.state.doc.lineAt($.to).number;return EditorView.announce.of(`${dt.state.phrase(lt?"Folded lines":"Unfolded lines")} ${ft} ${dt.state.phrase("to")} ${St}.`)}const foldAll=dt=>{let{state:$}=dt,lt=[];for(let ft=0;ft<$.doc.length;){let St=dt.lineBlockAt(ft),Tt=foldable($,St.from,St.to);Tt&&lt.push(foldEffect.of(Tt)),ft=(Tt?dt.lineBlockAt(Tt.to):St).to+1}return lt.length&&dt.dispatch({effects:maybeEnable(dt.state,lt)}),!!lt.length},unfoldAll=dt=>{let $=dt.state.field(foldState,!1);if(!$||!$.size)return!1;let lt=[];return $.between(0,dt.state.doc.length,(ft,St)=>{lt.push(unfoldEffect.of({from:ft,to:St}))}),dt.dispatch({effects:lt}),!0},foldKeymap=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:foldCode},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:unfoldCode},{key:"Ctrl-Alt-[",run:foldAll},{key:"Ctrl-Alt-]",run:unfoldAll}],defaultConfig={placeholderDOM:null,placeholderText:""},foldConfig=Facet.define({combine(dt){return combineConfig(dt,defaultConfig)}});function codeFolding(dt){let $=[foldState,baseTheme$1$1];return dt&&$.push(foldConfig.of(dt)),$}const foldWidget=Decoration.replace({widget:new class extends WidgetType{toDOM(dt){let{state:$}=dt,lt=$.facet(foldConfig),ft=Tt=>{let Ct=dt.lineBlockAt(dt.posAtDOM(Tt.target)),At=findFold(dt.state,Ct.from,Ct.to);At&&dt.dispatch({effects:unfoldEffect.of(At)}),Tt.preventDefault()};if(lt.placeholderDOM)return lt.placeholderDOM(dt,ft);let St=document.createElement("span");return St.textContent=lt.placeholderText,St.setAttribute("aria-label",$.phrase("folded code")),St.title=$.phrase("unfold"),St.className="cm-foldPlaceholder",St.onclick=ft,St}}}),foldGutterDefaults={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class FoldMarker extends GutterMarker{constructor($,lt){super(),this.config=$,this.open=lt}eq($){return this.config==$.config&&this.open==$.open}toDOM($){if(this.config.markerDOM)return this.config.markerDOM(this.open);let lt=document.createElement("span");return lt.textContent=this.open?this.config.openText:this.config.closedText,lt.title=$.state.phrase(this.open?"Fold line":"Unfold line"),lt}}function foldGutter(dt={}){let $=Object.assign(Object.assign({},foldGutterDefaults),dt),lt=new FoldMarker($,!0),ft=new FoldMarker($,!1),St=ViewPlugin.fromClass(class{constructor(Ct){this.from=Ct.viewport.from,this.markers=this.buildMarkers(Ct)}update(Ct){(Ct.docChanged||Ct.viewportChanged||Ct.startState.facet(language)!=Ct.state.facet(language)||Ct.startState.field(foldState,!1)!=Ct.state.field(foldState,!1)||syntaxTree(Ct.startState)!=syntaxTree(Ct.state)||$.foldingChanged(Ct))&&(this.markers=this.buildMarkers(Ct.view))}buildMarkers(Ct){let At=new RangeSetBuilder;for(let Rt of Ct.viewportLineBlocks){let kt=findFold(Ct.state,Rt.from,Rt.to)?ft:foldable(Ct.state,Rt.from,Rt.to)?lt:null;kt&&At.add(Rt.from,Rt.from,kt)}return At.finish()}}),{domEventHandlers:Tt}=$;return[St,gutter({class:"cm-foldGutter",markers(Ct){var At;return((At=Ct.plugin(St))===null||At===void 0?void 0:At.markers)||RangeSet.empty},initialSpacer(){return new FoldMarker($,!1)},domEventHandlers:Object.assign(Object.assign({},Tt),{click:(Ct,At,Rt)=>{if(Tt.click&&Tt.click(Ct,At,Rt))return!0;let kt=findFold(Ct.state,At.from,At.to);if(kt)return Ct.dispatch({effects:unfoldEffect.of(kt)}),!0;let Nt=foldable(Ct.state,At.from,At.to);return Nt?(Ct.dispatch({effects:foldEffect.of(Nt)}),!0):!1}})}),codeFolding()]}const baseTheme$1$1=EditorView.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class HighlightStyle{constructor($,lt){this.specs=$;let ft;function St(At){let Rt=StyleModule.newName();return(ft||(ft=Object.create(null)))["."+Rt]=At,Rt}const Tt=typeof lt.all=="string"?lt.all:lt.all?St(lt.all):void 0,Ct=lt.scope;this.scope=Ct instanceof Language?At=>At.prop(languageDataProp)==Ct.data:Ct?At=>At==Ct:void 0,this.style=tagHighlighter($.map(At=>({tag:At.tag,class:At.class||St(Object.assign({},At,{tag:null}))})),{all:Tt}).style,this.module=ft?new StyleModule(ft):null,this.themeType=lt.themeType}static define($,lt){return new HighlightStyle($,lt||{})}}const highlighterFacet=Facet.define(),fallbackHighlighter=Facet.define({combine(dt){return dt.length?[dt[0]]:null}});function getHighlighters(dt){let $=dt.facet(highlighterFacet);return $.length?$:dt.facet(fallbackHighlighter)}function syntaxHighlighting(dt,$){let lt=[treeHighlighter],ft;return dt instanceof HighlightStyle&&(dt.module&&lt.push(EditorView.styleModule.of(dt.module)),ft=dt.themeType),$!=null&&$.fallback?lt.push(fallbackHighlighter.of(dt)):ft?lt.push(highlighterFacet.computeN([EditorView.darkTheme],St=>St.facet(EditorView.darkTheme)==(ft=="dark")?[dt]:[])):lt.push(highlighterFacet.of(dt)),lt}class TreeHighlighter{constructor($){this.markCache=Object.create(null),this.tree=syntaxTree($.state),this.decorations=this.buildDeco($,getHighlighters($.state))}update($){let lt=syntaxTree($.state),ft=getHighlighters($.state),St=ft!=getHighlighters($.startState);lt.length<$.view.viewport.to&&!St&&lt.type==this.tree.type?this.decorations=this.decorations.map($.changes):(lt!=this.tree||$.viewportChanged||St)&&(this.tree=lt,this.decorations=this.buildDeco($.view,ft))}buildDeco($,lt){if(!lt||!this.tree.length)return Decoration.none;let ft=new RangeSetBuilder;for(let{from:St,to:Tt}of $.visibleRanges)highlightTree(this.tree,lt,(Ct,At,Rt)=>{ft.add(Ct,At,this.markCache[Rt]||(this.markCache[Rt]=Decoration.mark({class:Rt})))},St,Tt);return ft.finish()}}const treeHighlighter=Prec.high(ViewPlugin.fromClass(TreeHighlighter,{decorations:dt=>dt.decorations})),defaultHighlightStyle=HighlightStyle.define([{tag:tags.meta,color:"#404740"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,textDecoration:"underline",fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.keyword,color:"#708"},{tag:[tags.atom,tags.bool,tags.url,tags.contentSeparator,tags.labelName],color:"#219"},{tag:[tags.literal,tags.inserted],color:"#164"},{tag:[tags.string,tags.deleted],color:"#a11"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],color:"#e40"},{tag:tags.definition(tags.variableName),color:"#00f"},{tag:tags.local(tags.variableName),color:"#30a"},{tag:[tags.typeName,tags.namespace],color:"#085"},{tag:tags.className,color:"#167"},{tag:[tags.special(tags.variableName),tags.macroName],color:"#256"},{tag:tags.definition(tags.propertyName),color:"#00c"},{tag:tags.comment,color:"#940"},{tag:tags.invalid,color:"#f00"}]),baseTheme$4=EditorView.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),DefaultScanDist=1e4,DefaultBrackets="()[]{}",bracketMatchingConfig=Facet.define({combine(dt){return combineConfig(dt,{afterCursor:!0,brackets:DefaultBrackets,maxScanDistance:DefaultScanDist,renderMatch:defaultRenderMatch})}}),matchingMark=Decoration.mark({class:"cm-matchingBracket"}),nonmatchingMark=Decoration.mark({class:"cm-nonmatchingBracket"});function defaultRenderMatch(dt){let $=[],lt=dt.matched?matchingMark:nonmatchingMark;return $.push(lt.range(dt.start.from,dt.start.to)),dt.end&&$.push(lt.range(dt.end.from,dt.end.to)),$}const bracketMatchingState=StateField.define({create(){return Decoration.none},update(dt,$){if(!$.docChanged&&!$.selection)return dt;let lt=[],ft=$.state.facet(bracketMatchingConfig);for(let St of $.state.selection.ranges){if(!St.empty)continue;let Tt=matchBrackets($.state,St.head,-1,ft)||St.head>0&&matchBrackets($.state,St.head-1,1,ft)||ft.afterCursor&&(matchBrackets($.state,St.head,1,ft)||St.head<$.state.doc.length&&matchBrackets($.state,St.head+1,-1,ft));Tt&&(lt=lt.concat(ft.renderMatch(Tt,$.state)))}return Decoration.set(lt,!0)},provide:dt=>EditorView.decorations.from(dt)}),bracketMatchingUnique=[bracketMatchingState,baseTheme$4];function bracketMatching(dt={}){return[bracketMatchingConfig.of(dt),bracketMatchingUnique]}const bracketMatchingHandle=new NodeProp;function matchingNodes(dt,$,lt){let ft=dt.prop($<0?NodeProp.openedBy:NodeProp.closedBy);if(ft)return ft;if(dt.name.length==1){let St=lt.indexOf(dt.name);if(St>-1&&St%2==($<0?1:0))return[lt[St+$]]}return null}function findHandle(dt){let $=dt.type.prop(bracketMatchingHandle);return $?$(dt.node):dt}function matchBrackets(dt,$,lt,ft={}){let St=ft.maxScanDistance||DefaultScanDist,Tt=ft.brackets||DefaultBrackets,Ct=syntaxTree(dt),At=Ct.resolveInner($,lt);for(let Rt=At;Rt;Rt=Rt.parent){let kt=matchingNodes(Rt.type,lt,Tt);if(kt&&Rt.from<Rt.to){let Nt=findHandle(Rt);if(Nt&&(lt>0?$>=Nt.from&&$<Nt.to:$>Nt.from&&$<=Nt.to))return matchMarkedBrackets(dt,$,lt,Rt,Nt,kt,Tt)}}return matchPlainBrackets(dt,$,lt,Ct,At.type,St,Tt)}function matchMarkedBrackets(dt,$,lt,ft,St,Tt,Ct){let At=ft.parent,Rt={from:St.from,to:St.to},kt=0,Nt=At==null?void 0:At.cursor();if(Nt&&(lt<0?Nt.childBefore(ft.from):Nt.childAfter(ft.to)))do if(lt<0?Nt.to<=ft.from:Nt.from>=ft.to){if(kt==0&&Tt.indexOf(Nt.type.name)>-1&&Nt.from<Nt.to){let Bt=findHandle(Nt);return{start:Rt,end:Bt?{from:Bt.from,to:Bt.to}:void 0,matched:!0}}else if(matchingNodes(Nt.type,lt,Ct))kt++;else if(matchingNodes(Nt.type,-lt,Ct)){if(kt==0){let Bt=findHandle(Nt);return{start:Rt,end:Bt&&Bt.from<Bt.to?{from:Bt.from,to:Bt.to}:void 0,matched:!1}}kt--}}while(lt<0?Nt.prevSibling():Nt.nextSibling());return{start:Rt,matched:!1}}function matchPlainBrackets(dt,$,lt,ft,St,Tt,Ct){let At=lt<0?dt.sliceDoc($-1,$):dt.sliceDoc($,$+1),Rt=Ct.indexOf(At);if(Rt<0||Rt%2==0!=lt>0)return null;let kt={from:lt<0?$-1:$,to:lt>0?$+1:$},Nt=dt.doc.iterRange($,lt>0?dt.doc.length:0),Bt=0;for(let Ut=0;!Nt.next().done&&Ut<=Tt;){let zt=Nt.value;lt<0&&(Ut+=zt.length);let Zt=$+Ut*lt;for(let ln=lt>0?0:zt.length-1,cn=lt>0?zt.length:-1;ln!=cn;ln+=lt){let hn=Ct.indexOf(zt[ln]);if(!(hn<0||ft.resolveInner(Zt+ln,1).type!=St))if(hn%2==0==lt>0)Bt++;else{if(Bt==1)return{start:kt,end:{from:Zt+ln,to:Zt+ln+1},matched:hn>>1==Rt>>1};Bt--}}lt>0&&(Ut+=zt.length)}return Nt.done?{start:kt,matched:!1}:null}const noTokens=Object.create(null),typeArray=[NodeType.none],warned=[],defaultTable=Object.create(null);for(let[dt,$]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])defaultTable[dt]=createTokenType(noTokens,$);function warnForPart(dt,$){warned.indexOf(dt)>-1||(warned.push(dt),console.warn($))}function createTokenType(dt,$){let lt=null;for(let Tt of $.split(".")){let Ct=dt[Tt]||tags[Tt];Ct?typeof Ct=="function"?lt?lt=Ct(lt):warnForPart(Tt,`Modifier ${Tt} used at start of tag`):lt?warnForPart(Tt,`Tag ${Tt} used as modifier`):lt=Ct:warnForPart(Tt,`Unknown highlighting tag ${Tt}`)}if(!lt)return 0;let ft=$.replace(/ /g,"_"),St=NodeType.define({id:typeArray.length,name:ft,props:[styleTags({[ft]:lt})]});return typeArray.push(St),St.id}class CompletionContext{constructor($,lt,ft){this.state=$,this.pos=lt,this.explicit=ft,this.abortListeners=[]}tokenBefore($){let lt=syntaxTree(this.state).resolveInner(this.pos,-1);for(;lt&&$.indexOf(lt.name)<0;)lt=lt.parent;return lt?{from:lt.from,to:this.pos,text:this.state.sliceDoc(lt.from,this.pos),type:lt.type}:null}matchBefore($){let lt=this.state.doc.lineAt(this.pos),ft=Math.max(lt.from,this.pos-250),St=lt.text.slice(ft-lt.from,this.pos-lt.from),Tt=St.search(ensureAnchor($,!1));return Tt<0?null:{from:ft+Tt,to:this.pos,text:St.slice(Tt)}}get aborted(){return this.abortListeners==null}addEventListener($,lt){$=="abort"&&this.abortListeners&&this.abortListeners.push(lt)}}function toSet(dt){let $=Object.keys(dt).join(""),lt=/\w/.test($);return lt&&($=$.replace(/\w/g,"")),`[${lt?"\\w":""}${$.replace(/[^\w\s]/g,"\\$&")}]`}function prefixMatch(dt){let $=Object.create(null),lt=Object.create(null);for(let{label:St}of dt){$[St[0]]=!0;for(let Tt=1;Tt<St.length;Tt++)lt[St[Tt]]=!0}let ft=toSet($)+toSet(lt)+"*$";return[new RegExp("^"+ft),new RegExp(ft)]}function completeFromList(dt){let $=dt.map(St=>typeof St=="string"?{label:St}:St),[lt,ft]=$.every(St=>/^\w+$/.test(St.label))?[/\w*$/,/\w+$/]:prefixMatch($);return St=>{let Tt=St.matchBefore(ft);return Tt||St.explicit?{from:Tt?Tt.from:St.pos,options:$,validFor:lt}:null}}function ifNotIn(dt,$){return lt=>{for(let ft=syntaxTree(lt.state).resolveInner(lt.pos,-1);ft;ft=ft.parent){if(dt.indexOf(ft.name)>-1)return null;if(ft.type.isTop)break}return $(lt)}}class Option{constructor($,lt,ft){this.completion=$,this.source=lt,this.match=ft}}function cur(dt){return dt.selection.main.head}function ensureAnchor(dt,$){var lt;let{source:ft}=dt,St=$&&ft[0]!="^",Tt=ft[ft.length-1]!="$";return!St&&!Tt?dt:new RegExp(`${St?"^":""}(?:${ft})${Tt?"$":""}`,(lt=dt.flags)!==null&&lt!==void 0?lt:dt.ignoreCase?"i":"")}const pickedCompletion=Annotation.define();function insertCompletionText(dt,$,lt,ft){return Object.assign(Object.assign({},dt.changeByRange(St=>{if(St==dt.selection.main)return{changes:{from:lt,to:ft,insert:$},range:EditorSelection.cursor(lt+$.length)};let Tt=ft-lt;return!St.empty||Tt&&dt.sliceDoc(St.from-Tt,St.from)!=dt.sliceDoc(lt,ft)?{range:St}:{changes:{from:St.from-Tt,to:St.from,insert:$},range:EditorSelection.cursor(St.from-Tt+$.length)}})),{userEvent:"input.complete"})}function applyCompletion(dt,$){const lt=$.completion.apply||$.completion.label;let ft=$.source;typeof lt=="string"?dt.dispatch(Object.assign(Object.assign({},insertCompletionText(dt.state,lt,ft.from,ft.to)),{annotations:pickedCompletion.of($.completion)})):lt(dt,$.completion,ft.from,ft.to)}const SourceCache=new WeakMap;function asSource(dt){if(!Array.isArray(dt))return dt;let $=SourceCache.get(dt);return $||SourceCache.set(dt,$=completeFromList(dt)),$}class FuzzyMatcher{constructor($){this.pattern=$,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let lt=0;lt<$.length;){let ft=codePointAt($,lt),St=codePointSize(ft);this.chars.push(ft);let Tt=$.slice(lt,lt+St),Ct=Tt.toUpperCase();this.folded.push(codePointAt(Ct==Tt?Tt.toLowerCase():Ct,0)),lt+=St}this.astral=$.length!=this.chars.length}match($){if(this.pattern.length==0)return[0];if($.length<this.pattern.length)return null;let{chars:lt,folded:ft,any:St,precise:Tt,byWord:Ct}=this;if(lt.length==1){let pn=codePointAt($,0),dn=codePointSize(pn),gn=dn==$.length?0:-100;if(pn!=lt[0])if(pn==ft[0])gn+=-200;else return null;return[gn,0,dn]}let At=$.indexOf(this.pattern);if(At==0)return[$.length==this.pattern.length?0:-100,0,this.pattern.length];let Rt=lt.length,kt=0;if(At<0){for(let pn=0,dn=Math.min($.length,200);pn<dn&&kt<Rt;){let gn=codePointAt($,pn);(gn==lt[kt]||gn==ft[kt])&&(St[kt++]=pn),pn+=codePointSize(gn)}if(kt<Rt)return null}let Nt=0,Bt=0,Ut=!1,zt=0,Zt=-1,ln=-1,cn=/[a-z]/.test($),hn=!0;for(let pn=0,dn=Math.min($.length,200),gn=0;pn<dn&&Bt<Rt;){let vn=codePointAt($,pn);At<0&&(Nt<Rt&&vn==lt[Nt]&&(Tt[Nt++]=pn),zt<Rt&&(vn==lt[zt]||vn==ft[zt]?(zt==0&&(Zt=pn),ln=pn+1,zt++):zt=0));let Tn,Cn=vn<255?vn>=48&&vn<=57||vn>=97&&vn<=122?2:vn>=65&&vn<=90?1:0:(Tn=fromCodePoint(vn))!=Tn.toLowerCase()?1:Tn!=Tn.toUpperCase()?2:0;(!pn||Cn==1&&cn||gn==0&&Cn!=0)&&(lt[Bt]==vn||ft[Bt]==vn&&(Ut=!0)?Ct[Bt++]=pn:Ct.length&&(hn=!1)),gn=Cn,pn+=codePointSize(vn)}return Bt==Rt&&Ct[0]==0&&hn?this.result(-100+(Ut?-200:0),Ct,$):zt==Rt&&Zt==0?[-200-$.length+(ln==$.length?0:-100),0,ln]:At>-1?[-700-$.length,At,At+this.pattern.length]:zt==Rt?[-200+-700-$.length,Zt,ln]:Bt==Rt?this.result(-100+(Ut?-200:0)+-700+(hn?0:-1100),Ct,$):lt.length==2?null:this.result((St[0]?-700:0)+-200+-1100,St,$)}result($,lt,ft){let St=[$-ft.length],Tt=1;for(let Ct of lt){let At=Ct+(this.astral?codePointSize(codePointAt(ft,Ct)):1);Tt>1&&St[Tt-1]==Ct?St[Tt-1]=At:(St[Tt++]=Ct,St[Tt++]=At)}return St}}const completionConfig=Facet.define({combine(dt){return combineConfig(dt,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],compareCompletions:($,lt)=>$.label.localeCompare(lt.label),interactionDelay:75},{defaultKeymap:($,lt)=>$&&lt,closeOnBlur:($,lt)=>$&&lt,icons:($,lt)=>$&&lt,tooltipClass:($,lt)=>ft=>joinClass($(ft),lt(ft)),optionClass:($,lt)=>ft=>joinClass($(ft),lt(ft)),addToOptions:($,lt)=>$.concat(lt)})}});function joinClass(dt,$){return dt?$?dt+" "+$:dt:$}function optionContent(dt){let $=dt.addToOptions.slice();return dt.icons&&$.push({render(lt){let ft=document.createElement("div");return ft.classList.add("cm-completionIcon"),lt.type&&ft.classList.add(...lt.type.split(/\s+/g).map(St=>"cm-completionIcon-"+St)),ft.setAttribute("aria-hidden","true"),ft},position:20}),$.push({render(lt,ft,St){let Tt=document.createElement("span");Tt.className="cm-completionLabel";let{label:Ct}=lt,At=0;for(let Rt=1;Rt<St.length;){let kt=St[Rt++],Nt=St[Rt++];kt>At&&Tt.appendChild(document.createTextNode(Ct.slice(At,kt)));let Bt=Tt.appendChild(document.createElement("span"));Bt.appendChild(document.createTextNode(Ct.slice(kt,Nt))),Bt.className="cm-completionMatchedText",At=Nt}return At<Ct.length&&Tt.appendChild(document.createTextNode(Ct.slice(At))),Tt},position:50},{render(lt){if(!lt.detail)return null;let ft=document.createElement("span");return ft.className="cm-completionDetail",ft.textContent=lt.detail,ft},position:80}),$.sort((lt,ft)=>lt.position-ft.position).map(lt=>lt.render)}function rangeAroundSelected(dt,$,lt){if(dt<=lt)return{from:0,to:dt};if($<0&&($=0),$<=dt>>1){let St=Math.floor($/lt);return{from:St*lt,to:(St+1)*lt}}let ft=Math.floor((dt-$)/lt);return{from:dt-(ft+1)*lt,to:dt-ft*lt}}class CompletionTooltip{constructor($,lt){this.view=$,this.stateField=lt,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:At=>this.positionInfo(At),key:this},this.space=null,this.currentClass="";let ft=$.state.field(lt),{options:St,selected:Tt}=ft.open,Ct=$.state.facet(completionConfig);this.optionContent=optionContent(Ct),this.optionClass=Ct.optionClass,this.tooltipClass=Ct.tooltipClass,this.range=rangeAroundSelected(St.length,Tt,Ct.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass($.state),this.dom.addEventListener("mousedown",At=>{for(let Rt=At.target,kt;Rt&&Rt!=this.dom;Rt=Rt.parentNode)if(Rt.nodeName=="LI"&&(kt=/-(\d+)$/.exec(Rt.id))&&+kt[1]<St.length){applyCompletion($,St[+kt[1]]),At.preventDefault();return}}),this.list=this.dom.appendChild(this.createListBox(St,ft.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update($){var lt,ft,St;let Tt=$.state.field(this.stateField),Ct=$.startState.field(this.stateField);this.updateTooltipClass($.state),Tt!=Ct&&(this.updateSel(),((lt=Tt.open)===null||lt===void 0?void 0:lt.disabled)!=((ft=Ct.open)===null||ft===void 0?void 0:ft.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(!((St=Tt.open)===null||St===void 0)&&St.disabled)))}updateTooltipClass($){let lt=this.tooltipClass($);if(lt!=this.currentClass){for(let ft of this.currentClass.split(" "))ft&&this.dom.classList.remove(ft);for(let ft of lt.split(" "))ft&&this.dom.classList.add(ft);this.currentClass=lt}}positioned($){this.space=$,this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let $=this.view.state.field(this.stateField),lt=$.open;if((lt.selected>-1&&lt.selected<this.range.from||lt.selected>=this.range.to)&&(this.range=rangeAroundSelected(lt.options.length,lt.selected,this.view.state.facet(completionConfig).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(lt.options,$.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(lt.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:ft}=lt.options[lt.selected],{info:St}=ft;if(!St)return;let Tt=typeof St=="string"?document.createTextNode(St):St(ft);if(!Tt)return;"then"in Tt?Tt.then(Ct=>{Ct&&this.view.state.field(this.stateField,!1)==$&&this.addInfoPane(Ct)}).catch(Ct=>logException(this.view.state,Ct,"completion info")):this.addInfoPane(Tt)}}addInfoPane($){let lt=this.info=document.createElement("div");lt.className="cm-tooltip cm-completionInfo",lt.appendChild($),this.dom.appendChild(lt),this.view.requestMeasure(this.placeInfo)}updateSelectedOption($){let lt=null;for(let ft=this.list.firstChild,St=this.range.from;ft;ft=ft.nextSibling,St++)St==$?ft.hasAttribute("aria-selected")||(ft.setAttribute("aria-selected","true"),lt=ft):ft.hasAttribute("aria-selected")&&ft.removeAttribute("aria-selected");return lt&&scrollIntoView(this.list,lt),lt}measureInfo(){let $=this.dom.querySelector("[aria-selected]");if(!$||!this.info)return null;let lt=this.dom.getBoundingClientRect(),ft=this.info.getBoundingClientRect(),St=$.getBoundingClientRect(),Tt=this.space;if(!Tt){let Zt=this.dom.ownerDocument.defaultView||window;Tt={left:0,top:0,right:Zt.innerWidth,bottom:Zt.innerHeight}}if(St.top>Math.min(Tt.bottom,lt.bottom)-10||St.bottom<Math.max(Tt.top,lt.top)+10)return null;let Ct=this.view.textDirection==Direction.RTL,At=Ct,Rt=!1,kt,Nt="",Bt="",Ut=lt.left-Tt.left,zt=Tt.right-lt.right;if(At&&Ut<Math.min(ft.width,zt)?At=!1:!At&&zt<Math.min(ft.width,Ut)&&(At=!0),ft.width<=(At?Ut:zt))Nt=Math.max(Tt.top,Math.min(St.top,Tt.bottom-ft.height))-lt.top+"px",kt=Math.min(400,At?Ut:zt)+"px";else{Rt=!0,kt=Math.min(400,(Ct?lt.right:Tt.right-lt.left)-30)+"px";let Zt=Tt.bottom-lt.bottom;Zt>=ft.height||Zt>lt.top?Nt=St.bottom-lt.top+"px":Bt=lt.bottom-St.top+"px"}return{top:Nt,bottom:Bt,maxWidth:kt,class:Rt?Ct?"left-narrow":"right-narrow":At?"left":"right"}}positionInfo($){this.info&&($?(this.info.style.top=$.top,this.info.style.bottom=$.bottom,this.info.style.maxWidth=$.maxWidth,this.info.className="cm-tooltip cm-completionInfo cm-completionInfo-"+$.class):this.info.style.top="-1e6px")}createListBox($,lt,ft){const St=document.createElement("ul");St.id=lt,St.setAttribute("role","listbox"),St.setAttribute("aria-expanded","true"),St.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let Tt=ft.from;Tt<ft.to;Tt++){let{completion:Ct,match:At}=$[Tt];const Rt=St.appendChild(document.createElement("li"));Rt.id=lt+"-"+Tt,Rt.setAttribute("role","option");let kt=this.optionClass(Ct);kt&&(Rt.className=kt);for(let Nt of this.optionContent){let Bt=Nt(Ct,this.view.state,At);Bt&&Rt.appendChild(Bt)}}return ft.from&&St.classList.add("cm-completionListIncompleteTop"),ft.to<$.length&&St.classList.add("cm-completionListIncompleteBottom"),St}}function completionTooltip(dt){return $=>new CompletionTooltip($,dt)}function scrollIntoView(dt,$){let lt=dt.getBoundingClientRect(),ft=$.getBoundingClientRect();ft.top<lt.top?dt.scrollTop-=lt.top-ft.top:ft.bottom>lt.bottom&&(dt.scrollTop+=ft.bottom-lt.bottom)}function score(dt){return(dt.boost||0)*100+(dt.apply?10:0)+(dt.info?5:0)+(dt.type?1:0)}function sortOptions(dt,$){let lt=[],ft=0;for(let At of dt)if(At.hasResult())if(At.result.filter===!1){let Rt=At.result.getMatch;for(let kt of At.result.options){let Nt=[1e9-ft++];if(Rt)for(let Bt of Rt(kt))Nt.push(Bt);lt.push(new Option(kt,At,Nt))}}else{let Rt=new FuzzyMatcher($.sliceDoc(At.from,At.to)),kt;for(let Nt of At.result.options)(kt=Rt.match(Nt.label))&&(Nt.boost!=null&&(kt[0]+=Nt.boost),lt.push(new Option(Nt,At,kt)))}let St=[],Tt=null,Ct=$.facet(completionConfig).compareCompletions;for(let At of lt.sort((Rt,kt)=>kt.match[0]-Rt.match[0]||Ct(Rt.completion,kt.completion)))!Tt||Tt.label!=At.completion.label||Tt.detail!=At.completion.detail||Tt.type!=null&&At.completion.type!=null&&Tt.type!=At.completion.type||Tt.apply!=At.completion.apply?St.push(At):score(At.completion)>score(Tt)&&(St[St.length-1]=At),Tt=At.completion;return St}class CompletionDialog{constructor($,lt,ft,St,Tt,Ct){this.options=$,this.attrs=lt,this.tooltip=ft,this.timestamp=St,this.selected=Tt,this.disabled=Ct}setSelected($,lt){return $==this.selected||$>=this.options.length?this:new CompletionDialog(this.options,makeAttrs(lt,$),this.tooltip,this.timestamp,$,this.disabled)}static build($,lt,ft,St,Tt){let Ct=sortOptions($,lt);if(!Ct.length)return St&&$.some(Rt=>Rt.state==1)?new CompletionDialog(St.options,St.attrs,St.tooltip,St.timestamp,St.selected,!0):null;let At=lt.facet(completionConfig).selectOnOpen?0:-1;if(St&&St.selected!=At&&St.selected!=-1){let Rt=St.options[St.selected].completion;for(let kt=0;kt<Ct.length;kt++)if(Ct[kt].completion==Rt){At=kt;break}}return new CompletionDialog(Ct,makeAttrs(ft,At),{pos:$.reduce((Rt,kt)=>kt.hasResult()?Math.min(Rt,kt.from):Rt,1e8),create:completionTooltip(completionState),above:Tt.aboveCursor},St?St.timestamp:Date.now(),At,!1)}map($){return new CompletionDialog(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:$.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class CompletionState{constructor($,lt,ft){this.active=$,this.id=lt,this.open=ft}static start(){return new CompletionState(none$1,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update($){let{state:lt}=$,ft=lt.facet(completionConfig),Tt=(ft.override||lt.languageDataAt("autocomplete",cur(lt)).map(asSource)).map(At=>(this.active.find(kt=>kt.source==At)||new ActiveSource(At,this.active.some(kt=>kt.state!=0)?1:0)).update($,ft));Tt.length==this.active.length&&Tt.every((At,Rt)=>At==this.active[Rt])&&(Tt=this.active);let Ct=this.open;Ct&&$.docChanged&&(Ct=Ct.map($.changes)),$.selection||Tt.some(At=>At.hasResult()&&$.changes.touchesRange(At.from,At.to))||!sameResults(Tt,this.active)?Ct=CompletionDialog.build(Tt,lt,this.id,Ct,ft):Ct&&Ct.disabled&&!Tt.some(At=>At.state==1)&&(Ct=null),!Ct&&Tt.every(At=>At.state!=1)&&Tt.some(At=>At.hasResult())&&(Tt=Tt.map(At=>At.hasResult()?new ActiveSource(At.source,0):At));for(let At of $.effects)At.is(setSelectedEffect)&&(Ct=Ct&&Ct.setSelected(At.value,this.id));return Tt==this.active&&Ct==this.open?this:new CompletionState(Tt,this.id,Ct)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:baseAttrs}}function sameResults(dt,$){if(dt==$)return!0;for(let lt=0,ft=0;;){for(;lt<dt.length&&!dt[lt].hasResult;)lt++;for(;ft<$.length&&!$[ft].hasResult;)ft++;let St=lt==dt.length,Tt=ft==$.length;if(St||Tt)return St==Tt;if(dt[lt++].result!=$[ft++].result)return!1}}const baseAttrs={"aria-autocomplete":"list"};function makeAttrs(dt,$){let lt={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":dt};return $>-1&&(lt["aria-activedescendant"]=dt+"-"+$),lt}const none$1=[];function getUserEvent(dt){return dt.isUserEvent("input.type")?"input":dt.isUserEvent("delete.backward")?"delete":null}class ActiveSource{constructor($,lt,ft=-1){this.source=$,this.state=lt,this.explicitPos=ft}hasResult(){return!1}update($,lt){let ft=getUserEvent($),St=this;ft?St=St.handleUserEvent($,ft,lt):$.docChanged?St=St.handleChange($):$.selection&&St.state!=0&&(St=new ActiveSource(St.source,0));for(let Tt of $.effects)if(Tt.is(startCompletionEffect))St=new ActiveSource(St.source,1,Tt.value?cur($.state):-1);else if(Tt.is(closeCompletionEffect))St=new ActiveSource(St.source,0);else if(Tt.is(setActiveEffect))for(let Ct of Tt.value)Ct.source==St.source&&(St=Ct);return St}handleUserEvent($,lt,ft){return lt=="delete"||!ft.activateOnTyping?this.map($.changes):new ActiveSource(this.source,1)}handleChange($){return $.changes.touchesRange(cur($.startState))?new ActiveSource(this.source,0):this.map($.changes)}map($){return $.empty||this.explicitPos<0?this:new ActiveSource(this.source,this.state,$.mapPos(this.explicitPos))}}class ActiveResult extends ActiveSource{constructor($,lt,ft,St,Tt){super($,2,lt),this.result=ft,this.from=St,this.to=Tt}hasResult(){return!0}handleUserEvent($,lt,ft){var St;let Tt=$.changes.mapPos(this.from),Ct=$.changes.mapPos(this.to,1),At=cur($.state);if((this.explicitPos<0?At<=Tt:At<this.from)||At>Ct||lt=="delete"&&cur($.startState)==this.from)return new ActiveSource(this.source,lt=="input"&&ft.activateOnTyping?1:0);let Rt=this.explicitPos<0?-1:$.changes.mapPos(this.explicitPos),kt;return checkValid(this.result.validFor,$.state,Tt,Ct)?new ActiveResult(this.source,Rt,this.result,Tt,Ct):this.result.update&&(kt=this.result.update(this.result,Tt,Ct,new CompletionContext($.state,At,Rt>=0)))?new ActiveResult(this.source,Rt,kt,kt.from,(St=kt.to)!==null&&St!==void 0?St:cur($.state)):new ActiveSource(this.source,1,Rt)}handleChange($){return $.changes.touchesRange(this.from,this.to)?new ActiveSource(this.source,0):this.map($.changes)}map($){return $.empty?this:new ActiveResult(this.source,this.explicitPos<0?-1:$.mapPos(this.explicitPos),this.result,$.mapPos(this.from),$.mapPos(this.to,1))}}function checkValid(dt,$,lt,ft){if(!dt)return!1;let St=$.sliceDoc(lt,ft);return typeof dt=="function"?dt(St,lt,ft,$):ensureAnchor(dt,!0).test(St)}const startCompletionEffect=StateEffect.define(),closeCompletionEffect=StateEffect.define(),setActiveEffect=StateEffect.define({map(dt,$){return dt.map(lt=>lt.map($))}}),setSelectedEffect=StateEffect.define(),completionState=StateField.define({create(){return CompletionState.start()},update(dt,$){return dt.update($)},provide:dt=>[showTooltip.from(dt,$=>$.tooltip),EditorView.contentAttributes.from(dt,$=>$.attrs)]});function moveCompletionSelection(dt,$="option"){return lt=>{let ft=lt.state.field(completionState,!1);if(!ft||!ft.open||ft.open.disabled||Date.now()-ft.open.timestamp<lt.state.facet(completionConfig).interactionDelay)return!1;let St=1,Tt;$=="page"&&(Tt=getTooltip(lt,ft.open.tooltip))&&(St=Math.max(2,Math.floor(Tt.dom.offsetHeight/Tt.dom.querySelector("li").offsetHeight)-1));let{length:Ct}=ft.open.options,At=ft.open.selected>-1?ft.open.selected+St*(dt?1:-1):dt?0:Ct-1;return At<0?At=$=="page"?0:Ct-1:At>=Ct&&(At=$=="page"?Ct-1:0),lt.dispatch({effects:setSelectedEffect.of(At)}),!0}}const acceptCompletion=dt=>{let $=dt.state.field(completionState,!1);return dt.state.readOnly||!$||!$.open||$.open.selected<0||Date.now()-$.open.timestamp<dt.state.facet(completionConfig).interactionDelay?!1:($.open.disabled||applyCompletion(dt,$.open.options[$.open.selected]),!0)},startCompletion=dt=>dt.state.field(completionState,!1)?(dt.dispatch({effects:startCompletionEffect.of(!0)}),!0):!1,closeCompletion=dt=>{let $=dt.state.field(completionState,!1);return!$||!$.active.some(lt=>lt.state!=0)?!1:(dt.dispatch({effects:closeCompletionEffect.of(null)}),!0)};class RunningQuery{constructor($,lt){this.active=$,this.context=lt,this.time=Date.now(),this.updates=[],this.done=void 0}}const DebounceTime=50,MaxUpdateCount=50,MinAbortTime=1e3,completionPlugin=ViewPlugin.fromClass(class{constructor(dt){this.view=dt,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let $ of dt.state.field(completionState).active)$.state==1&&this.startQuery($)}update(dt){let $=dt.state.field(completionState);if(!dt.selectionSet&&!dt.docChanged&&dt.startState.field(completionState)==$)return;let lt=dt.transactions.some(ft=>(ft.selection||ft.docChanged)&&!getUserEvent(ft));for(let ft=0;ft<this.running.length;ft++){let St=this.running[ft];if(lt||St.updates.length+dt.transactions.length>MaxUpdateCount&&Date.now()-St.time>MinAbortTime){for(let Tt of St.context.abortListeners)try{Tt()}catch(Ct){logException(this.view.state,Ct)}St.context.abortListeners=null,this.running.splice(ft--,1)}else St.updates.push(...dt.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=$.active.some(ft=>ft.state==1&&!this.running.some(St=>St.active.source==ft.source))?setTimeout(()=>this.startUpdate(),DebounceTime):-1,this.composing!=0)for(let ft of dt.transactions)getUserEvent(ft)=="input"?this.composing=2:this.composing==2&&ft.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:dt}=this.view,$=dt.field(completionState);for(let lt of $.active)lt.state==1&&!this.running.some(ft=>ft.active.source==lt.source)&&this.startQuery(lt)}startQuery(dt){let{state:$}=this.view,lt=cur($),ft=new CompletionContext($,lt,dt.explicitPos==lt),St=new RunningQuery(dt,ft);this.running.push(St),Promise.resolve(dt.source(ft)).then(Tt=>{St.context.aborted||(St.done=Tt||null,this.scheduleAccept())},Tt=>{this.view.dispatch({effects:closeCompletionEffect.of(null)}),logException(this.view.state,Tt)})}scheduleAccept(){this.running.every(dt=>dt.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),DebounceTime))}accept(){var dt;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let $=[],lt=this.view.state.facet(completionConfig);for(let ft=0;ft<this.running.length;ft++){let St=this.running[ft];if(St.done===void 0)continue;if(this.running.splice(ft--,1),St.done){let Ct=new ActiveResult(St.active.source,St.active.explicitPos,St.done,St.done.from,(dt=St.done.to)!==null&&dt!==void 0?dt:cur(St.updates.length?St.updates[0].startState:this.view.state));for(let At of St.updates)Ct=Ct.update(At,lt);if(Ct.hasResult()){$.push(Ct);continue}}let Tt=this.view.state.field(completionState).active.find(Ct=>Ct.source==St.active.source);if(Tt&&Tt.state==1)if(St.done==null){let Ct=new ActiveSource(St.active.source,0);for(let At of St.updates)Ct=Ct.update(At,lt);Ct.state!=1&&$.push(Ct)}else this.startQuery(Tt)}$.length&&this.view.dispatch({effects:setActiveEffect.of($)})}},{eventHandlers:{blur(){let dt=this.view.state.field(completionState,!1);dt&&dt.tooltip&&this.view.state.facet(completionConfig).closeOnBlur&&this.view.dispatch({effects:closeCompletionEffect.of(null)})},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:startCompletionEffect.of(!1)}),20),this.composing=0}}}),baseTheme$3=EditorView.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class FieldPos{constructor($,lt,ft,St){this.field=$,this.line=lt,this.from=ft,this.to=St}}class FieldRange{constructor($,lt,ft){this.field=$,this.from=lt,this.to=ft}map($){let lt=$.mapPos(this.from,-1,MapMode.TrackDel),ft=$.mapPos(this.to,1,MapMode.TrackDel);return lt==null||ft==null?null:new FieldRange(this.field,lt,ft)}}class Snippet{constructor($,lt){this.lines=$,this.fieldPositions=lt}instantiate($,lt){let ft=[],St=[lt],Tt=$.doc.lineAt(lt),Ct=/^\s*/.exec(Tt.text)[0];for(let Rt of this.lines){if(ft.length){let kt=Ct,Nt=/^\t*/.exec(Rt)[0].length;for(let Bt=0;Bt<Nt;Bt++)kt+=$.facet(indentUnit);St.push(lt+kt.length-Nt),Rt=kt+Rt.slice(Nt)}ft.push(Rt),lt+=Rt.length+1}let At=this.fieldPositions.map(Rt=>new FieldRange(Rt.field,St[Rt.line]+Rt.from,St[Rt.line]+Rt.to));return{text:ft,ranges:At}}static parse($){let lt=[],ft=[],St=[],Tt;for(let Ct of $.split(/\r\n?|\n/)){for(;Tt=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(Ct);){let At=Tt[1]?+Tt[1]:null,Rt=Tt[2]||Tt[3]||"",kt=-1;for(let Nt=0;Nt<lt.length;Nt++)(At!=null?lt[Nt].seq==At:Rt&&lt[Nt].name==Rt)&&(kt=Nt);if(kt<0){let Nt=0;for(;Nt<lt.length&&(At==null||lt[Nt].seq!=null&&lt[Nt].seq<At);)Nt++;lt.splice(Nt,0,{seq:At,name:Rt}),kt=Nt;for(let Bt of St)Bt.field>=kt&&Bt.field++}St.push(new FieldPos(kt,ft.length,Tt.index,Tt.index+Rt.length)),Ct=Ct.slice(0,Tt.index)+Rt+Ct.slice(Tt.index+Tt[0].length)}for(let At;At=/\\([{}])/.exec(Ct);){Ct=Ct.slice(0,At.index)+At[1]+Ct.slice(At.index+At[0].length);for(let Rt of St)Rt.line==ft.length&&Rt.from>At.index&&(Rt.from--,Rt.to--)}ft.push(Ct)}return new Snippet(ft,St)}}let fieldMarker=Decoration.widget({widget:new class extends WidgetType{toDOM(){let dt=document.createElement("span");return dt.className="cm-snippetFieldPosition",dt}ignoreEvent(){return!1}}}),fieldRange=Decoration.mark({class:"cm-snippetField"});class ActiveSnippet{constructor($,lt){this.ranges=$,this.active=lt,this.deco=Decoration.set($.map(ft=>(ft.from==ft.to?fieldMarker:fieldRange).range(ft.from,ft.to)))}map($){let lt=[];for(let ft of this.ranges){let St=ft.map($);if(!St)return null;lt.push(St)}return new ActiveSnippet(lt,this.active)}selectionInsideField($){return $.ranges.every(lt=>this.ranges.some(ft=>ft.field==this.active&&ft.from<=lt.from&&ft.to>=lt.to))}}const setActive=StateEffect.define({map(dt,$){return dt&&dt.map($)}}),moveToField=StateEffect.define(),snippetState=StateField.define({create(){return null},update(dt,$){for(let lt of $.effects){if(lt.is(setActive))return lt.value;if(lt.is(moveToField)&&dt)return new ActiveSnippet(dt.ranges,lt.value)}return dt&&$.docChanged&&(dt=dt.map($.changes)),dt&&$.selection&&!dt.selectionInsideField($.selection)&&(dt=null),dt},provide:dt=>EditorView.decorations.from(dt,$=>$?$.deco:Decoration.none)});function fieldSelection(dt,$){return EditorSelection.create(dt.filter(lt=>lt.field==$).map(lt=>EditorSelection.range(lt.from,lt.to)))}function snippet(dt){let $=Snippet.parse(dt);return(lt,ft,St,Tt)=>{let{text:Ct,ranges:At}=$.instantiate(lt.state,St),Rt={changes:{from:St,to:Tt,insert:Text.of(Ct)},scrollIntoView:!0,annotations:pickedCompletion.of(ft)};if(At.length&&(Rt.selection=fieldSelection(At,0)),At.length>1){let kt=new ActiveSnippet(At,0),Nt=Rt.effects=[setActive.of(kt)];lt.state.field(snippetState,!1)===void 0&&Nt.push(StateEffect.appendConfig.of([snippetState,addSnippetKeymap,snippetPointerHandler,baseTheme$3]))}lt.dispatch(lt.state.update(Rt))}}function moveField(dt){return({state:$,dispatch:lt})=>{let ft=$.field(snippetState,!1);if(!ft||dt<0&&ft.active==0)return!1;let St=ft.active+dt,Tt=dt>0&&!ft.ranges.some(Ct=>Ct.field==St+dt);return lt($.update({selection:fieldSelection(ft.ranges,St),effects:setActive.of(Tt?null:new ActiveSnippet(ft.ranges,St))})),!0}}const clearSnippet=({state:dt,dispatch:$})=>dt.field(snippetState,!1)?($(dt.update({effects:setActive.of(null)})),!0):!1,nextSnippetField=moveField(1),prevSnippetField=moveField(-1),defaultSnippetKeymap=[{key:"Tab",run:nextSnippetField,shift:prevSnippetField},{key:"Escape",run:clearSnippet}],snippetKeymap=Facet.define({combine(dt){return dt.length?dt[0]:defaultSnippetKeymap}}),addSnippetKeymap=Prec.highest(keymap.compute([snippetKeymap],dt=>dt.facet(snippetKeymap)));function snippetCompletion(dt,$){return Object.assign(Object.assign({},$),{apply:snippet(dt)})}const snippetPointerHandler=EditorView.domEventHandlers({mousedown(dt,$){let lt=$.state.field(snippetState,!1),ft;if(!lt||(ft=$.posAtCoords({x:dt.clientX,y:dt.clientY}))==null)return!1;let St=lt.ranges.find(Tt=>Tt.from<=ft&&Tt.to>=ft);return!St||St.field==lt.active?!1:($.dispatch({selection:fieldSelection(lt.ranges,St.field),effects:setActive.of(lt.ranges.some(Tt=>Tt.field>St.field)?new ActiveSnippet(lt.ranges,St.field):null)}),!0)}}),defaults={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},closeBracketEffect=StateEffect.define({map(dt,$){let lt=$.mapPos(dt,-1,MapMode.TrackAfter);return lt??void 0}}),skipBracketEffect=StateEffect.define({map(dt,$){return $.mapPos(dt)}}),closedBracket=new class extends RangeValue{};closedBracket.startSide=1;closedBracket.endSide=-1;const bracketState=StateField.define({create(){return RangeSet.empty},update(dt,$){if($.selection){let lt=$.state.doc.lineAt($.selection.main.head).from,ft=$.startState.doc.lineAt($.startState.selection.main.head).from;lt!=$.changes.mapPos(ft,-1)&&(dt=RangeSet.empty)}dt=dt.map($.changes);for(let lt of $.effects)lt.is(closeBracketEffect)?dt=dt.update({add:[closedBracket.range(lt.value,lt.value+1)]}):lt.is(skipBracketEffect)&&(dt=dt.update({filter:ft=>ft!=lt.value}));return dt}});function closeBrackets(){return[inputHandler,bracketState]}const definedClosing="()[]{}<>";function closing(dt){for(let $=0;$<definedClosing.length;$+=2)if(definedClosing.charCodeAt($)==dt)return definedClosing.charAt($+1);return fromCodePoint(dt<128?dt:dt+1)}function config(dt,$){return dt.languageDataAt("closeBrackets",$)[0]||defaults}const android$1=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),inputHandler=EditorView.inputHandler.of((dt,$,lt,ft)=>{if((android$1?dt.composing:dt.compositionStarted)||dt.state.readOnly)return!1;let St=dt.state.selection.main;if(ft.length>2||ft.length==2&&codePointSize(codePointAt(ft,0))==1||$!=St.from||lt!=St.to)return!1;let Tt=insertBracket(dt.state,ft);return Tt?(dt.dispatch(Tt),!0):!1}),deleteBracketPair=({state:dt,dispatch:$})=>{if(dt.readOnly)return!1;let ft=config(dt,dt.selection.main.head).brackets||defaults.brackets,St=null,Tt=dt.changeByRange(Ct=>{if(Ct.empty){let At=prevChar(dt.doc,Ct.head);for(let Rt of ft)if(Rt==At&&nextChar(dt.doc,Ct.head)==closing(codePointAt(Rt,0)))return{changes:{from:Ct.head-Rt.length,to:Ct.head+Rt.length},range:EditorSelection.cursor(Ct.head-Rt.length)}}return{range:St=Ct}});return St||$(dt.update(Tt,{scrollIntoView:!0,userEvent:"delete.backward"})),!St},closeBracketsKeymap=[{key:"Backspace",run:deleteBracketPair}];function insertBracket(dt,$){let lt=config(dt,dt.selection.main.head),ft=lt.brackets||defaults.brackets;for(let St of ft){let Tt=closing(codePointAt(St,0));if($==St)return Tt==St?handleSame(dt,St,ft.indexOf(St+St+St)>-1,lt):handleOpen(dt,St,Tt,lt.before||defaults.before);if($==Tt&&closedBracketAt(dt,dt.selection.main.from))return handleClose(dt,St,Tt)}return null}function closedBracketAt(dt,$){let lt=!1;return dt.field(bracketState).between(0,dt.doc.length,ft=>{ft==$&&(lt=!0)}),lt}function nextChar(dt,$){let lt=dt.sliceString($,$+2);return lt.slice(0,codePointSize(codePointAt(lt,0)))}function prevChar(dt,$){let lt=dt.sliceString($-2,$);return codePointSize(codePointAt(lt,0))==lt.length?lt:lt.slice(1)}function handleOpen(dt,$,lt,ft){let St=null,Tt=dt.changeByRange(Ct=>{if(!Ct.empty)return{changes:[{insert:$,from:Ct.from},{insert:lt,from:Ct.to}],effects:closeBracketEffect.of(Ct.to+$.length),range:EditorSelection.range(Ct.anchor+$.length,Ct.head+$.length)};let At=nextChar(dt.doc,Ct.head);return!At||/\s/.test(At)||ft.indexOf(At)>-1?{changes:{insert:$+lt,from:Ct.head},effects:closeBracketEffect.of(Ct.head+$.length),range:EditorSelection.cursor(Ct.head+$.length)}:{range:St=Ct}});return St?null:dt.update(Tt,{scrollIntoView:!0,userEvent:"input.type"})}function handleClose(dt,$,lt){let ft=null,St=dt.selection.ranges.map(Tt=>Tt.empty&&nextChar(dt.doc,Tt.head)==lt?EditorSelection.cursor(Tt.head+lt.length):ft=Tt);return ft?null:dt.update({selection:EditorSelection.create(St,dt.selection.mainIndex),scrollIntoView:!0,effects:dt.selection.ranges.map(({from:Tt})=>skipBracketEffect.of(Tt))})}function handleSame(dt,$,lt,ft){let St=ft.stringPrefixes||defaults.stringPrefixes,Tt=null,Ct=dt.changeByRange(At=>{if(!At.empty)return{changes:[{insert:$,from:At.from},{insert:$,from:At.to}],effects:closeBracketEffect.of(At.to+$.length),range:EditorSelection.range(At.anchor+$.length,At.head+$.length)};let Rt=At.head,kt=nextChar(dt.doc,Rt),Nt;if(kt==$){if(nodeStart(dt,Rt))return{changes:{insert:$+$,from:Rt},effects:closeBracketEffect.of(Rt+$.length),range:EditorSelection.cursor(Rt+$.length)};if(closedBracketAt(dt,Rt)){let Bt=lt&&dt.sliceDoc(Rt,Rt+$.length*3)==$+$+$;return{range:EditorSelection.cursor(Rt+$.length*(Bt?3:1)),effects:skipBracketEffect.of(Rt)}}}else{if(lt&&dt.sliceDoc(Rt-2*$.length,Rt)==$+$&&(Nt=canStartStringAt(dt,Rt-2*$.length,St))>-1&&nodeStart(dt,Nt))return{changes:{insert:$+$+$+$,from:Rt},effects:closeBracketEffect.of(Rt+$.length),range:EditorSelection.cursor(Rt+$.length)};if(dt.charCategorizer(Rt)(kt)!=CharCategory.Word&&canStartStringAt(dt,Rt,St)>-1&&!probablyInString(dt,Rt,$,St))return{changes:{insert:$+$,from:Rt},effects:closeBracketEffect.of(Rt+$.length),range:EditorSelection.cursor(Rt+$.length)}}return{range:Tt=At}});return Tt?null:dt.update(Ct,{scrollIntoView:!0,userEvent:"input.type"})}function nodeStart(dt,$){let lt=syntaxTree(dt).resolveInner($+1);return lt.parent&&lt.from==$}function probablyInString(dt,$,lt,ft){let St=syntaxTree(dt).resolveInner($,-1),Tt=ft.reduce((Ct,At)=>Math.max(Ct,At.length),0);for(let Ct=0;Ct<5;Ct++){let At=dt.sliceDoc(St.from,Math.min(St.to,St.from+lt.length+Tt)),Rt=At.indexOf(lt);if(!Rt||Rt>-1&&ft.indexOf(At.slice(0,Rt))>-1){let Nt=St.firstChild;for(;Nt&&Nt.from==St.from&&Nt.to-Nt.from>lt.length+Rt;){if(dt.sliceDoc(Nt.to-lt.length,Nt.to)==lt)return!1;Nt=Nt.firstChild}return!0}let kt=St.to==$&&St.parent;if(!kt)break;St=kt}return!1}function canStartStringAt(dt,$,lt){let ft=dt.charCategorizer($);if(ft(dt.sliceDoc($-1,$))!=CharCategory.Word)return $;for(let St of lt){let Tt=$-St.length;if(dt.sliceDoc(Tt,$)==St&&ft(dt.sliceDoc(Tt-1,Tt))!=CharCategory.Word)return Tt}return-1}function autocompletion(dt={}){return[completionState,completionConfig.of(dt),completionPlugin,completionKeymapExt,baseTheme$3]}const completionKeymap=[{key:"Ctrl-Space",run:startCompletion},{key:"Escape",run:closeCompletion},{key:"ArrowDown",run:moveCompletionSelection(!0)},{key:"ArrowUp",run:moveCompletionSelection(!1)},{key:"PageDown",run:moveCompletionSelection(!0,"page")},{key:"PageUp",run:moveCompletionSelection(!1,"page")},{key:"Enter",run:acceptCompletion}],completionKeymapExt=Prec.highest(keymap.computeN([completionConfig],dt=>dt.facet(completionConfig).defaultKeymap?[completionKeymap]:[])),cache$1=new NodeWeakMap,ScopeNodes$1=new Set(["Script","Body","FunctionDefinition","ClassDefinition","LambdaExpression","ForStatement","MatchClause"]);function defID$1(dt){return($,lt,ft)=>{if(ft)return!1;let St=$.node.getChild("VariableName");return St&&lt(St,dt),!0}}const gatherCompletions$1={FunctionDefinition:defID$1("function"),ClassDefinition:defID$1("class"),ForStatement(dt,$,lt){if(lt){for(let ft=dt.node.firstChild;ft;ft=ft.nextSibling)if(ft.name=="VariableName")$(ft,"variable");else if(ft.name=="in")break}},ImportStatement(dt,$){var lt,ft;let{node:St}=dt,Tt=((lt=St.firstChild)===null||lt===void 0?void 0:lt.name)=="from";for(let Ct=St.getChild("import");Ct;Ct=Ct.nextSibling)Ct.name=="VariableName"&&((ft=Ct.nextSibling)===null||ft===void 0?void 0:ft.name)!="as"&&$(Ct,Tt?"variable":"namespace")},AssignStatement(dt,$){for(let lt=dt.node.firstChild;lt;lt=lt.nextSibling)if(lt.name=="VariableName")$(lt,"variable");else if(lt.name==":"||lt.name=="AssignOp")break},ParamList(dt,$){for(let lt=null,ft=dt.node.firstChild;ft;ft=ft.nextSibling)ft.name=="VariableName"&&(!lt||!/\*|AssignOp/.test(lt.name))&&$(ft,"variable"),lt=ft},CapturePattern:defID$1("variable"),AsPattern:defID$1("variable"),__proto__:null};function getScope$1(dt,$){let lt=cache$1.get($);if(lt)return lt;let ft=[],St=!0;function Tt(Ct,At){let Rt=dt.sliceString(Ct.from,Ct.to);ft.push({label:Rt,type:At})}return $.cursor(IterMode.IncludeAnonymous).iterate(Ct=>{if(Ct.name){let At=gatherCompletions$1[Ct.name];if(At&&At(Ct,Tt,St)||!St&&ScopeNodes$1.has(Ct.name))return!1;St=!1}else if(Ct.to-Ct.from>8192){for(let At of getScope$1(dt,Ct.node))ft.push(At);return!1}}),cache$1.set($,ft),ft}const Identifier$1=/^[\w\xa1-\uffff][\w\d\xa1-\uffff]*$/,dontComplete$1=["String","FormatString","Comment","PropertyName"];function localCompletionSource$1(dt){let $=syntaxTree(dt.state).resolveInner(dt.pos,-1);if(dontComplete$1.indexOf($.name)>-1)return null;let lt=$.name=="VariableName"||$.to-$.from<20&&Identifier$1.test(dt.state.sliceDoc($.from,$.to));if(!lt&&!dt.explicit)return null;let ft=[];for(let St=$;St;St=St.parent)ScopeNodes$1.has(St.name)&&(ft=ft.concat(getScope$1(dt.state.doc,St)));return{options:ft,from:lt?$.from:dt.pos,validFor:Identifier$1}}const globals=["__annotations__","__builtins__","__debug__","__doc__","__import__","__name__","__loader__","__package__","__spec__","False","None","True"].map(dt=>({label:dt,type:"constant"})).concat(["ArithmeticError","AssertionError","AttributeError","BaseException","BlockingIOError","BrokenPipeError","BufferError","BytesWarning","ChildProcessError","ConnectionAbortedError","ConnectionError","ConnectionRefusedError","ConnectionResetError","DeprecationWarning","EOFError","Ellipsis","EncodingWarning","EnvironmentError","Exception","FileExistsError","FileNotFoundError","FloatingPointError","FutureWarning","GeneratorExit","IOError","ImportError","ImportWarning","IndentationError","IndexError","InterruptedError","IsADirectoryError","KeyError","KeyboardInterrupt","LookupError","MemoryError","ModuleNotFoundError","NameError","NotADirectoryError","NotImplemented","NotImplementedError","OSError","OverflowError","PendingDeprecationWarning","PermissionError","ProcessLookupError","RecursionError","ReferenceError","ResourceWarning","RuntimeError","RuntimeWarning","StopAsyncIteration","StopIteration","SyntaxError","SyntaxWarning","SystemError","SystemExit","TabError","TimeoutError","TypeError","UnboundLocalError","UnicodeDecodeError","UnicodeEncodeError","UnicodeError","UnicodeTranslateError","UnicodeWarning","UserWarning","ValueError","Warning","ZeroDivisionError"].map(dt=>({label:dt,type:"type"}))).concat(["bool","bytearray","bytes","classmethod","complex","float","frozenset","int","list","map","memoryview","object","range","set","staticmethod","str","super","tuple","type"].map(dt=>({label:dt,type:"class"}))).concat(["abs","aiter","all","anext","any","ascii","bin","breakpoint","callable","chr","compile","delattr","dict","dir","divmod","enumerate","eval","exec","exit","filter","format","getattr","globals","hasattr","hash","help","hex","id","input","isinstance","issubclass","iter","len","license","locals","max","min","next","oct","open","ord","pow","print","property","quit","repr","reversed","round","setattr","slice","sorted","sum","vars","zip"].map(dt=>({label:dt,type:"function"}))),snippets$1=[snippetCompletion("def ${name}(${params}):\n	${}",{label:"def",detail:"function",type:"keyword"}),snippetCompletion("for ${name} in ${collection}:\n	${}",{label:"for",detail:"loop",type:"keyword"}),snippetCompletion("while ${}:\n	${}",{label:"while",detail:"loop",type:"keyword"}),snippetCompletion("try:\n	${}\nexcept ${error}:\n	${}",{label:"try",detail:"/ except block",type:"keyword"}),snippetCompletion(`if \${}:
	
`,{label:"if",detail:"block",type:"keyword"}),snippetCompletion("if ${}:\n	${}\nelse:\n	${}",{label:"if",detail:"/ else block",type:"keyword"}),snippetCompletion("class ${name}:\n	def __init__(self, ${params}):\n			${}",{label:"class",detail:"definition",type:"keyword"}),snippetCompletion("import ${module}",{label:"import",detail:"statement",type:"keyword"}),snippetCompletion("from ${module} import ${names}",{label:"from",detail:"import",type:"keyword"})],globalCompletion=ifNotIn(dontComplete$1,completeFromList(globals.concat(snippets$1)));function indentBody(dt,$){let lt=dt.lineIndent($.from),ft=dt.lineAt(dt.pos,-1),St=ft.from+ft.text.length;return!/\S/.test(ft.text)&&dt.node.to<St+100&&!/\S/.test(dt.state.sliceDoc(St,dt.node.to))&&dt.lineIndent(dt.pos,-1)<=lt||/^\s*(else:|elif |except |finally:)/.test(dt.textAfter)&&dt.lineIndent(dt.pos,-1)>lt?null:lt+dt.unit}const pythonLanguage=LRLanguage.define({name:"python",parser:parser$1.configure({props:[indentNodeProp.add({Body:dt=>{var $;return($=indentBody(dt,dt.node))!==null&&$!==void 0?$:dt.continue()},IfStatement:dt=>/^\s*(else:|elif )/.test(dt.textAfter)?dt.baseIndent:dt.continue(),TryStatement:dt=>/^\s*(except |finally:|else:)/.test(dt.textAfter)?dt.baseIndent:dt.continue(),"TupleExpression ComprehensionExpression ParamList ArgList ParenthesizedExpression":delimitedIndent({closing:")"}),"DictionaryExpression DictionaryComprehensionExpression SetExpression SetComprehensionExpression":delimitedIndent({closing:"}"}),"ArrayExpression ArrayComprehensionExpression":delimitedIndent({closing:"]"}),"String FormatString":()=>null,Script:dt=>{if(dt.pos+/\s*/.exec(dt.textAfter)[0].length>=dt.node.to){let $=null;for(let lt=dt.node,ft=lt.to;lt=lt.lastChild,!(!lt||lt.to!=ft);)lt.type.name=="Body"&&($=lt);if($){let lt=indentBody(dt,$);if(lt!=null)return lt}}return dt.continue()}}),foldNodeProp.add({"ArrayExpression DictionaryExpression SetExpression TupleExpression":foldInside,Body:(dt,$)=>({from:dt.from+1,to:dt.to-(dt.to==$.doc.length?0:1)})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"'''",'"""'],stringPrefixes:["f","fr","rf","r","u","b","br","rb","F","FR","RF","R","U","B","BR","RB"]},commentTokens:{line:"#"},indentOnInput:/^\s*([\}\]\)]|else:|elif |except |finally:)$/}});function python(){return new LanguageSupport(pythonLanguage,[pythonLanguage.data.of({autocomplete:localCompletionSource$1}),pythonLanguage.data.of({autocomplete:globalCompletion})])}function _objectWithoutPropertiesLoose(dt,$){if(dt==null)return{};var lt={},ft=Object.keys(dt),St,Tt;for(Tt=0;Tt<ft.length;Tt++)St=ft[Tt],!($.indexOf(St)>=0)&&(lt[St]=dt[St]);return lt}const toggleComment=dt=>{let{state:$}=dt,lt=$.doc.lineAt($.selection.main.head),ft=getConfig(dt.state,lt.from);return ft.line?toggleLineComment(dt):ft.block?toggleBlockCommentByLine(dt):!1};function command(dt,$){return({state:lt,dispatch:ft})=>{if(lt.readOnly)return!1;let St=dt($,lt);return St?(ft(lt.update(St)),!0):!1}}const toggleLineComment=command(changeLineComment,0),toggleBlockComment=command(changeBlockComment,0),toggleBlockCommentByLine=command((dt,$)=>changeBlockComment(dt,$,selectedLineRanges($)),0);function getConfig(dt,$){let lt=dt.languageDataAt("commentTokens",$);return lt.length?lt[0]:{}}const SearchMargin=50;function findBlockComment(dt,{open:$,close:lt},ft,St){let Tt=dt.sliceDoc(ft-SearchMargin,ft),Ct=dt.sliceDoc(St,St+SearchMargin),At=/\s*$/.exec(Tt)[0].length,Rt=/^\s*/.exec(Ct)[0].length,kt=Tt.length-At;if(Tt.slice(kt-$.length,kt)==$&&Ct.slice(Rt,Rt+lt.length)==lt)return{open:{pos:ft-At,margin:At&&1},close:{pos:St+Rt,margin:Rt&&1}};let Nt,Bt;St-ft<=2*SearchMargin?Nt=Bt=dt.sliceDoc(ft,St):(Nt=dt.sliceDoc(ft,ft+SearchMargin),Bt=dt.sliceDoc(St-SearchMargin,St));let Ut=/^\s*/.exec(Nt)[0].length,zt=/\s*$/.exec(Bt)[0].length,Zt=Bt.length-zt-lt.length;return Nt.slice(Ut,Ut+$.length)==$&&Bt.slice(Zt,Zt+lt.length)==lt?{open:{pos:ft+Ut+$.length,margin:/\s/.test(Nt.charAt(Ut+$.length))?1:0},close:{pos:St-zt-lt.length,margin:/\s/.test(Bt.charAt(Zt-1))?1:0}}:null}function selectedLineRanges(dt){let $=[];for(let lt of dt.selection.ranges){let ft=dt.doc.lineAt(lt.from),St=lt.to<=ft.to?ft:dt.doc.lineAt(lt.to),Tt=$.length-1;Tt>=0&&$[Tt].to>ft.from?$[Tt].to=St.to:$.push({from:ft.from,to:St.to})}return $}function changeBlockComment(dt,$,lt=$.selection.ranges){let ft=lt.map(Tt=>getConfig($,Tt.from).block);if(!ft.every(Tt=>Tt))return null;let St=lt.map((Tt,Ct)=>findBlockComment($,ft[Ct],Tt.from,Tt.to));if(dt!=2&&!St.every(Tt=>Tt))return{changes:$.changes(lt.map((Tt,Ct)=>St[Ct]?[]:[{from:Tt.from,insert:ft[Ct].open+" "},{from:Tt.to,insert:" "+ft[Ct].close}]))};if(dt!=1&&St.some(Tt=>Tt)){let Tt=[];for(let Ct=0,At;Ct<St.length;Ct++)if(At=St[Ct]){let Rt=ft[Ct],{open:kt,close:Nt}=At;Tt.push({from:kt.pos-Rt.open.length,to:kt.pos+kt.margin},{from:Nt.pos-Nt.margin,to:Nt.pos+Rt.close.length})}return{changes:Tt}}return null}function changeLineComment(dt,$,lt=$.selection.ranges){let ft=[],St=-1;for(let{from:Tt,to:Ct}of lt){let At=ft.length,Rt=1e9;for(let kt=Tt;kt<=Ct;){let Nt=$.doc.lineAt(kt);if(Nt.from>St&&(Tt==Ct||Ct>Nt.from)){St=Nt.from;let Bt=getConfig($,Nt.from).line;if(!Bt)continue;let Ut=/^\s*/.exec(Nt.text)[0].length,zt=Ut==Nt.length,Zt=Nt.text.slice(Ut,Ut+Bt.length)==Bt?Ut:-1;Ut<Nt.text.length&&Ut<Rt&&(Rt=Ut),ft.push({line:Nt,comment:Zt,token:Bt,indent:Ut,empty:zt,single:!1})}kt=Nt.to+1}if(Rt<1e9)for(let kt=At;kt<ft.length;kt++)ft[kt].indent<ft[kt].line.text.length&&(ft[kt].indent=Rt);ft.length==At+1&&(ft[At].single=!0)}if(dt!=2&&ft.some(Tt=>Tt.comment<0&&(!Tt.empty||Tt.single))){let Tt=[];for(let{line:At,token:Rt,indent:kt,empty:Nt,single:Bt}of ft)(Bt||!Nt)&&Tt.push({from:At.from+kt,insert:Rt+" "});let Ct=$.changes(Tt);return{changes:Ct,selection:$.selection.map(Ct,1)}}else if(dt!=1&&ft.some(Tt=>Tt.comment>=0)){let Tt=[];for(let{line:Ct,comment:At,token:Rt}of ft)if(At>=0){let kt=Ct.from+At,Nt=kt+Rt.length;Ct.text[Nt-Ct.from]==" "&&Nt++,Tt.push({from:kt,to:Nt})}return{changes:Tt}}return null}const fromHistory=Annotation.define(),isolateHistory=Annotation.define(),invertedEffects=Facet.define(),historyConfig=Facet.define({combine(dt){return combineConfig(dt,{minDepth:100,newGroupDelay:500,joinToEvent:($,lt)=>lt},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:($,lt)=>(ft,St)=>$(ft,St)||lt(ft,St)})}});function changeEnd(dt){let $=0;return dt.iterChangedRanges((lt,ft)=>$=ft),$}const historyField_=StateField.define({create(){return HistoryState.empty},update(dt,$){let lt=$.state.facet(historyConfig),ft=$.annotation(fromHistory);if(ft){let Rt=$.docChanged?EditorSelection.single(changeEnd($.changes)):void 0,kt=HistEvent.fromTransaction($,Rt),Nt=ft.side,Bt=Nt==0?dt.undone:dt.done;return kt?Bt=updateBranch(Bt,Bt.length,lt.minDepth,kt):Bt=addSelection(Bt,$.startState.selection),new HistoryState(Nt==0?ft.rest:Bt,Nt==0?Bt:ft.rest)}let St=$.annotation(isolateHistory);if((St=="full"||St=="before")&&(dt=dt.isolate()),$.annotation(Transaction.addToHistory)===!1)return $.changes.empty?dt:dt.addMapping($.changes.desc);let Tt=HistEvent.fromTransaction($),Ct=$.annotation(Transaction.time),At=$.annotation(Transaction.userEvent);return Tt?dt=dt.addChanges(Tt,Ct,At,lt,$):$.selection&&(dt=dt.addSelection($.startState.selection,Ct,At,lt.newGroupDelay)),(St=="full"||St=="after")&&(dt=dt.isolate()),dt},toJSON(dt){return{done:dt.done.map($=>$.toJSON()),undone:dt.undone.map($=>$.toJSON())}},fromJSON(dt){return new HistoryState(dt.done.map(HistEvent.fromJSON),dt.undone.map(HistEvent.fromJSON))}});function history(dt={}){return[historyField_,historyConfig.of(dt),EditorView.domEventHandlers({beforeinput($,lt){let ft=$.inputType=="historyUndo"?undo:$.inputType=="historyRedo"?redo:null;return ft?($.preventDefault(),ft(lt)):!1}})]}function cmd(dt,$){return function({state:lt,dispatch:ft}){if(!$&&lt.readOnly)return!1;let St=lt.field(historyField_,!1);if(!St)return!1;let Tt=St.pop(dt,lt,$);return Tt?(ft(Tt),!0):!1}}const undo=cmd(0,!1),redo=cmd(1,!1),undoSelection=cmd(0,!0),redoSelection=cmd(1,!0);class HistEvent{constructor($,lt,ft,St,Tt){this.changes=$,this.effects=lt,this.mapped=ft,this.startSelection=St,this.selectionsAfter=Tt}setSelAfter($){return new HistEvent(this.changes,this.effects,this.mapped,this.startSelection,$)}toJSON(){var $,lt,ft;return{changes:($=this.changes)===null||$===void 0?void 0:$.toJSON(),mapped:(lt=this.mapped)===null||lt===void 0?void 0:lt.toJSON(),startSelection:(ft=this.startSelection)===null||ft===void 0?void 0:ft.toJSON(),selectionsAfter:this.selectionsAfter.map(St=>St.toJSON())}}static fromJSON($){return new HistEvent($.changes&&ChangeSet.fromJSON($.changes),[],$.mapped&&ChangeDesc.fromJSON($.mapped),$.startSelection&&EditorSelection.fromJSON($.startSelection),$.selectionsAfter.map(EditorSelection.fromJSON))}static fromTransaction($,lt){let ft=none;for(let St of $.startState.facet(invertedEffects)){let Tt=St($);Tt.length&&(ft=ft.concat(Tt))}return!ft.length&&$.changes.empty?null:new HistEvent($.changes.invert($.startState.doc),ft,void 0,lt||$.startState.selection,none)}static selection($){return new HistEvent(void 0,none,void 0,void 0,$)}}function updateBranch(dt,$,lt,ft){let St=$+1>lt+20?$-lt-1:0,Tt=dt.slice(St,$);return Tt.push(ft),Tt}function isAdjacent(dt,$){let lt=[],ft=!1;return dt.iterChangedRanges((St,Tt)=>lt.push(St,Tt)),$.iterChangedRanges((St,Tt,Ct,At)=>{for(let Rt=0;Rt<lt.length;){let kt=lt[Rt++],Nt=lt[Rt++];At>=kt&&Ct<=Nt&&(ft=!0)}}),ft}function eqSelectionShape(dt,$){return dt.ranges.length==$.ranges.length&&dt.ranges.filter((lt,ft)=>lt.empty!=$.ranges[ft].empty).length===0}function conc(dt,$){return dt.length?$.length?dt.concat($):dt:$}const none=[],MaxSelectionsPerEvent=200;function addSelection(dt,$){if(dt.length){let lt=dt[dt.length-1],ft=lt.selectionsAfter.slice(Math.max(0,lt.selectionsAfter.length-MaxSelectionsPerEvent));return ft.length&&ft[ft.length-1].eq($)?dt:(ft.push($),updateBranch(dt,dt.length-1,1e9,lt.setSelAfter(ft)))}else return[HistEvent.selection([$])]}function popSelection(dt){let $=dt[dt.length-1],lt=dt.slice();return lt[dt.length-1]=$.setSelAfter($.selectionsAfter.slice(0,$.selectionsAfter.length-1)),lt}function addMappingToBranch(dt,$){if(!dt.length)return dt;let lt=dt.length,ft=none;for(;lt;){let St=mapEvent(dt[lt-1],$,ft);if(St.changes&&!St.changes.empty||St.effects.length){let Tt=dt.slice(0,lt);return Tt[lt-1]=St,Tt}else $=St.mapped,lt--,ft=St.selectionsAfter}return ft.length?[HistEvent.selection(ft)]:none}function mapEvent(dt,$,lt){let ft=conc(dt.selectionsAfter.length?dt.selectionsAfter.map(At=>At.map($)):none,lt);if(!dt.changes)return HistEvent.selection(ft);let St=dt.changes.map($),Tt=$.mapDesc(dt.changes,!0),Ct=dt.mapped?dt.mapped.composeDesc(Tt):Tt;return new HistEvent(St,StateEffect.mapEffects(dt.effects,$),Ct,dt.startSelection.map(Tt),ft)}const joinableUserEvent=/^(input\.type|delete)($|\.)/;class HistoryState{constructor($,lt,ft=0,St=void 0){this.done=$,this.undone=lt,this.prevTime=ft,this.prevUserEvent=St}isolate(){return this.prevTime?new HistoryState(this.done,this.undone):this}addChanges($,lt,ft,St,Tt){let Ct=this.done,At=Ct[Ct.length-1];return At&&At.changes&&!At.changes.empty&&$.changes&&(!ft||joinableUserEvent.test(ft))&&(!At.selectionsAfter.length&&lt-this.prevTime<St.newGroupDelay&&St.joinToEvent(Tt,isAdjacent(At.changes,$.changes))||ft=="input.type.compose")?Ct=updateBranch(Ct,Ct.length-1,St.minDepth,new HistEvent($.changes.compose(At.changes),conc($.effects,At.effects),At.mapped,At.startSelection,none)):Ct=updateBranch(Ct,Ct.length,St.minDepth,$),new HistoryState(Ct,none,lt,ft)}addSelection($,lt,ft,St){let Tt=this.done.length?this.done[this.done.length-1].selectionsAfter:none;return Tt.length>0&&lt-this.prevTime<St&&ft==this.prevUserEvent&&ft&&/^select($|\.)/.test(ft)&&eqSelectionShape(Tt[Tt.length-1],$)?this:new HistoryState(addSelection(this.done,$),this.undone,lt,ft)}addMapping($){return new HistoryState(addMappingToBranch(this.done,$),addMappingToBranch(this.undone,$),this.prevTime,this.prevUserEvent)}pop($,lt,ft){let St=$==0?this.done:this.undone;if(St.length==0)return null;let Tt=St[St.length-1];if(ft&&Tt.selectionsAfter.length)return lt.update({selection:Tt.selectionsAfter[Tt.selectionsAfter.length-1],annotations:fromHistory.of({side:$,rest:popSelection(St)}),userEvent:$==0?"select.undo":"select.redo",scrollIntoView:!0});if(Tt.changes){let Ct=St.length==1?none:St.slice(0,St.length-1);return Tt.mapped&&(Ct=addMappingToBranch(Ct,Tt.mapped)),lt.update({changes:Tt.changes,selection:Tt.startSelection,effects:Tt.effects,annotations:fromHistory.of({side:$,rest:Ct}),filter:!1,userEvent:$==0?"undo":"redo",scrollIntoView:!0})}else return null}}HistoryState.empty=new HistoryState(none,none);const historyKeymap=[{key:"Mod-z",run:undo,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:redo,preventDefault:!0},{linux:"Ctrl-Shift-z",run:redo,preventDefault:!0},{key:"Mod-u",run:undoSelection,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:redoSelection,preventDefault:!0}];function updateSel(dt,$){return EditorSelection.create(dt.ranges.map($),dt.mainIndex)}function setSel(dt,$){return dt.update({selection:$,scrollIntoView:!0,userEvent:"select"})}function moveSel({state:dt,dispatch:$},lt){let ft=updateSel(dt.selection,lt);return ft.eq(dt.selection)?!1:($(setSel(dt,ft)),!0)}function rangeEnd(dt,$){return EditorSelection.cursor($?dt.to:dt.from)}function cursorByChar(dt,$){return moveSel(dt,lt=>lt.empty?dt.moveByChar(lt,$):rangeEnd(lt,$))}function ltrAtCursor(dt){return dt.textDirectionAt(dt.state.selection.main.head)==Direction.LTR}const cursorCharLeft=dt=>cursorByChar(dt,!ltrAtCursor(dt)),cursorCharRight=dt=>cursorByChar(dt,ltrAtCursor(dt));function cursorByGroup(dt,$){return moveSel(dt,lt=>lt.empty?dt.moveByGroup(lt,$):rangeEnd(lt,$))}const cursorGroupLeft=dt=>cursorByGroup(dt,!ltrAtCursor(dt)),cursorGroupRight=dt=>cursorByGroup(dt,ltrAtCursor(dt));function interestingNode(dt,$,lt){if($.type.prop(lt))return!0;let ft=$.to-$.from;return ft&&(ft>2||/[^\s,.;:]/.test(dt.sliceDoc($.from,$.to)))||$.firstChild}function moveBySyntax(dt,$,lt){let ft=syntaxTree(dt).resolveInner($.head),St=lt?NodeProp.closedBy:NodeProp.openedBy;for(let Rt=$.head;;){let kt=lt?ft.childAfter(Rt):ft.childBefore(Rt);if(!kt)break;interestingNode(dt,kt,St)?ft=kt:Rt=lt?kt.to:kt.from}let Tt=ft.type.prop(St),Ct,At;return Tt&&(Ct=lt?matchBrackets(dt,ft.from,1):matchBrackets(dt,ft.to,-1))&&Ct.matched?At=lt?Ct.end.to:Ct.end.from:At=lt?ft.to:ft.from,EditorSelection.cursor(At,lt?-1:1)}const cursorSyntaxLeft=dt=>moveSel(dt,$=>moveBySyntax(dt.state,$,!ltrAtCursor(dt))),cursorSyntaxRight=dt=>moveSel(dt,$=>moveBySyntax(dt.state,$,ltrAtCursor(dt)));function cursorByLine(dt,$){return moveSel(dt,lt=>{if(!lt.empty)return rangeEnd(lt,$);let ft=dt.moveVertically(lt,$);return ft.head!=lt.head?ft:dt.moveToLineBoundary(lt,$)})}const cursorLineUp=dt=>cursorByLine(dt,!1),cursorLineDown=dt=>cursorByLine(dt,!0);function pageInfo(dt){let $=dt.scrollDOM.clientHeight<dt.scrollDOM.scrollHeight-2,lt=0,ft=0,St;if($){for(let Tt of dt.state.facet(EditorView.scrollMargins)){let Ct=Tt(dt);Ct!=null&&Ct.top&&(lt=Math.max(Ct==null?void 0:Ct.top,lt)),Ct!=null&&Ct.bottom&&(ft=Math.max(Ct==null?void 0:Ct.bottom,ft))}St=dt.scrollDOM.clientHeight-lt-ft}else St=(dt.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:lt,marginBottom:ft,selfScroll:$,height:Math.max(dt.defaultLineHeight,St-5)}}function cursorByPage(dt,$){let lt=pageInfo(dt),{state:ft}=dt,St=updateSel(ft.selection,Ct=>Ct.empty?dt.moveVertically(Ct,$,lt.height):rangeEnd(Ct,$));if(St.eq(ft.selection))return!1;let Tt;if(lt.selfScroll){let Ct=dt.coordsAtPos(ft.selection.main.head),At=dt.scrollDOM.getBoundingClientRect(),Rt=At.top+lt.marginTop,kt=At.bottom-lt.marginBottom;Ct&&Ct.top>Rt&&Ct.bottom<kt&&(Tt=EditorView.scrollIntoView(St.main.head,{y:"start",yMargin:Ct.top-Rt}))}return dt.dispatch(setSel(ft,St),{effects:Tt}),!0}const cursorPageUp=dt=>cursorByPage(dt,!1),cursorPageDown=dt=>cursorByPage(dt,!0);function moveByLineBoundary(dt,$,lt){let ft=dt.lineBlockAt($.head),St=dt.moveToLineBoundary($,lt);if(St.head==$.head&&St.head!=(lt?ft.to:ft.from)&&(St=dt.moveToLineBoundary($,lt,!1)),!lt&&St.head==ft.from&&ft.length){let Tt=/^\s*/.exec(dt.state.sliceDoc(ft.from,Math.min(ft.from+100,ft.to)))[0].length;Tt&&$.head!=ft.from+Tt&&(St=EditorSelection.cursor(ft.from+Tt))}return St}const cursorLineBoundaryForward=dt=>moveSel(dt,$=>moveByLineBoundary(dt,$,!0)),cursorLineBoundaryBackward=dt=>moveSel(dt,$=>moveByLineBoundary(dt,$,!1)),cursorLineBoundaryLeft=dt=>moveSel(dt,$=>moveByLineBoundary(dt,$,!ltrAtCursor(dt))),cursorLineBoundaryRight=dt=>moveSel(dt,$=>moveByLineBoundary(dt,$,ltrAtCursor(dt))),cursorLineStart=dt=>moveSel(dt,$=>EditorSelection.cursor(dt.lineBlockAt($.head).from,1)),cursorLineEnd=dt=>moveSel(dt,$=>EditorSelection.cursor(dt.lineBlockAt($.head).to,-1));function toMatchingBracket(dt,$,lt){let ft=!1,St=updateSel(dt.selection,Tt=>{let Ct=matchBrackets(dt,Tt.head,-1)||matchBrackets(dt,Tt.head,1)||Tt.head>0&&matchBrackets(dt,Tt.head-1,1)||Tt.head<dt.doc.length&&matchBrackets(dt,Tt.head+1,-1);if(!Ct||!Ct.end)return Tt;ft=!0;let At=Ct.start.from==Tt.head?Ct.end.to:Ct.end.from;return lt?EditorSelection.range(Tt.anchor,At):EditorSelection.cursor(At)});return ft?($(setSel(dt,St)),!0):!1}const cursorMatchingBracket=({state:dt,dispatch:$})=>toMatchingBracket(dt,$,!1);function extendSel(dt,$){let lt=updateSel(dt.state.selection,ft=>{let St=$(ft);return EditorSelection.range(ft.anchor,St.head,St.goalColumn,St.bidiLevel||void 0)});return lt.eq(dt.state.selection)?!1:(dt.dispatch(setSel(dt.state,lt)),!0)}function selectByChar(dt,$){return extendSel(dt,lt=>dt.moveByChar(lt,$))}const selectCharLeft=dt=>selectByChar(dt,!ltrAtCursor(dt)),selectCharRight=dt=>selectByChar(dt,ltrAtCursor(dt));function selectByGroup(dt,$){return extendSel(dt,lt=>dt.moveByGroup(lt,$))}const selectGroupLeft=dt=>selectByGroup(dt,!ltrAtCursor(dt)),selectGroupRight=dt=>selectByGroup(dt,ltrAtCursor(dt)),selectSyntaxLeft=dt=>extendSel(dt,$=>moveBySyntax(dt.state,$,!ltrAtCursor(dt))),selectSyntaxRight=dt=>extendSel(dt,$=>moveBySyntax(dt.state,$,ltrAtCursor(dt)));function selectByLine(dt,$){return extendSel(dt,lt=>dt.moveVertically(lt,$))}const selectLineUp=dt=>selectByLine(dt,!1),selectLineDown=dt=>selectByLine(dt,!0);function selectByPage(dt,$){return extendSel(dt,lt=>dt.moveVertically(lt,$,pageInfo(dt).height))}const selectPageUp=dt=>selectByPage(dt,!1),selectPageDown=dt=>selectByPage(dt,!0),selectLineBoundaryForward=dt=>extendSel(dt,$=>moveByLineBoundary(dt,$,!0)),selectLineBoundaryBackward=dt=>extendSel(dt,$=>moveByLineBoundary(dt,$,!1)),selectLineBoundaryLeft=dt=>extendSel(dt,$=>moveByLineBoundary(dt,$,!ltrAtCursor(dt))),selectLineBoundaryRight=dt=>extendSel(dt,$=>moveByLineBoundary(dt,$,ltrAtCursor(dt))),selectLineStart=dt=>extendSel(dt,$=>EditorSelection.cursor(dt.lineBlockAt($.head).from)),selectLineEnd=dt=>extendSel(dt,$=>EditorSelection.cursor(dt.lineBlockAt($.head).to)),cursorDocStart=({state:dt,dispatch:$})=>($(setSel(dt,{anchor:0})),!0),cursorDocEnd=({state:dt,dispatch:$})=>($(setSel(dt,{anchor:dt.doc.length})),!0),selectDocStart=({state:dt,dispatch:$})=>($(setSel(dt,{anchor:dt.selection.main.anchor,head:0})),!0),selectDocEnd=({state:dt,dispatch:$})=>($(setSel(dt,{anchor:dt.selection.main.anchor,head:dt.doc.length})),!0),selectAll=({state:dt,dispatch:$})=>($(dt.update({selection:{anchor:0,head:dt.doc.length},userEvent:"select"})),!0),selectLine=({state:dt,dispatch:$})=>{let lt=selectedLineBlocks(dt).map(({from:ft,to:St})=>EditorSelection.range(ft,Math.min(St+1,dt.doc.length)));return $(dt.update({selection:EditorSelection.create(lt),userEvent:"select"})),!0},selectParentSyntax=({state:dt,dispatch:$})=>{let lt=updateSel(dt.selection,ft=>{var St;let Tt=syntaxTree(dt).resolveInner(ft.head,1);for(;!(Tt.from<ft.from&&Tt.to>=ft.to||Tt.to>ft.to&&Tt.from<=ft.from||!(!((St=Tt.parent)===null||St===void 0)&&St.parent));)Tt=Tt.parent;return EditorSelection.range(Tt.to,Tt.from)});return $(setSel(dt,lt)),!0},simplifySelection=({state:dt,dispatch:$})=>{let lt=dt.selection,ft=null;return lt.ranges.length>1?ft=EditorSelection.create([lt.main]):lt.main.empty||(ft=EditorSelection.create([EditorSelection.cursor(lt.main.head)])),ft?($(setSel(dt,ft)),!0):!1};function deleteBy(dt,$){if(dt.state.readOnly)return!1;let lt="delete.selection",{state:ft}=dt,St=ft.changeByRange(Tt=>{let{from:Ct,to:At}=Tt;if(Ct==At){let Rt=$(Ct);Rt<Ct?(lt="delete.backward",Rt=skipAtomic(dt,Rt,!1)):Rt>Ct&&(lt="delete.forward",Rt=skipAtomic(dt,Rt,!0)),Ct=Math.min(Ct,Rt),At=Math.max(At,Rt)}else Ct=skipAtomic(dt,Ct,!1),At=skipAtomic(dt,At,!0);return Ct==At?{range:Tt}:{changes:{from:Ct,to:At},range:EditorSelection.cursor(Ct)}});return St.changes.empty?!1:(dt.dispatch(ft.update(St,{scrollIntoView:!0,userEvent:lt,effects:lt=="delete.selection"?EditorView.announce.of(ft.phrase("Selection deleted")):void 0})),!0)}function skipAtomic(dt,$,lt){if(dt instanceof EditorView)for(let ft of dt.state.facet(EditorView.atomicRanges).map(St=>St(dt)))ft.between($,$,(St,Tt)=>{St<$&&Tt>$&&($=lt?Tt:St)});return $}const deleteByChar=(dt,$)=>deleteBy(dt,lt=>{let{state:ft}=dt,St=ft.doc.lineAt(lt),Tt,Ct;if(!$&&lt>St.from&&lt<St.from+200&&!/[^ \t]/.test(Tt=St.text.slice(0,lt-St.from))){if(Tt[Tt.length-1]=="	")return lt-1;let At=countColumn(Tt,ft.tabSize),Rt=At%getIndentUnit(ft)||getIndentUnit(ft);for(let kt=0;kt<Rt&&Tt[Tt.length-1-kt]==" ";kt++)lt--;Ct=lt}else Ct=findClusterBreak(St.text,lt-St.from,$,$)+St.from,Ct==lt&&St.number!=($?ft.doc.lines:1)&&(Ct+=$?1:-1);return Ct}),deleteCharBackward=dt=>deleteByChar(dt,!1),deleteCharForward=dt=>deleteByChar(dt,!0),deleteByGroup=(dt,$)=>deleteBy(dt,lt=>{let ft=lt,{state:St}=dt,Tt=St.doc.lineAt(ft),Ct=St.charCategorizer(ft);for(let At=null;;){if(ft==($?Tt.to:Tt.from)){ft==lt&&Tt.number!=($?St.doc.lines:1)&&(ft+=$?1:-1);break}let Rt=findClusterBreak(Tt.text,ft-Tt.from,$)+Tt.from,kt=Tt.text.slice(Math.min(ft,Rt)-Tt.from,Math.max(ft,Rt)-Tt.from),Nt=Ct(kt);if(At!=null&&Nt!=At)break;(kt!=" "||ft!=lt)&&(At=Nt),ft=Rt}return ft}),deleteGroupBackward=dt=>deleteByGroup(dt,!1),deleteGroupForward=dt=>deleteByGroup(dt,!0),deleteToLineEnd=dt=>deleteBy(dt,$=>{let lt=dt.lineBlockAt($).to;return $<lt?lt:Math.min(dt.state.doc.length,$+1)}),deleteToLineStart=dt=>deleteBy(dt,$=>{let lt=dt.lineBlockAt($).from;return $>lt?lt:Math.max(0,$-1)}),splitLine=({state:dt,dispatch:$})=>{if(dt.readOnly)return!1;let lt=dt.changeByRange(ft=>({changes:{from:ft.from,to:ft.to,insert:Text.of(["",""])},range:EditorSelection.cursor(ft.from)}));return $(dt.update(lt,{scrollIntoView:!0,userEvent:"input"})),!0},transposeChars=({state:dt,dispatch:$})=>{if(dt.readOnly)return!1;let lt=dt.changeByRange(ft=>{if(!ft.empty||ft.from==0||ft.from==dt.doc.length)return{range:ft};let St=ft.from,Tt=dt.doc.lineAt(St),Ct=St==Tt.from?St-1:findClusterBreak(Tt.text,St-Tt.from,!1)+Tt.from,At=St==Tt.to?St+1:findClusterBreak(Tt.text,St-Tt.from,!0)+Tt.from;return{changes:{from:Ct,to:At,insert:dt.doc.slice(St,At).append(dt.doc.slice(Ct,St))},range:EditorSelection.cursor(At)}});return lt.changes.empty?!1:($(dt.update(lt,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function selectedLineBlocks(dt){let $=[],lt=-1;for(let ft of dt.selection.ranges){let St=dt.doc.lineAt(ft.from),Tt=dt.doc.lineAt(ft.to);if(!ft.empty&&ft.to==Tt.from&&(Tt=dt.doc.lineAt(ft.to-1)),lt>=St.number){let Ct=$[$.length-1];Ct.to=Tt.to,Ct.ranges.push(ft)}else $.push({from:St.from,to:Tt.to,ranges:[ft]});lt=Tt.number+1}return $}function moveLine(dt,$,lt){if(dt.readOnly)return!1;let ft=[],St=[];for(let Tt of selectedLineBlocks(dt)){if(lt?Tt.to==dt.doc.length:Tt.from==0)continue;let Ct=dt.doc.lineAt(lt?Tt.to+1:Tt.from-1),At=Ct.length+1;if(lt){ft.push({from:Tt.to,to:Ct.to},{from:Tt.from,insert:Ct.text+dt.lineBreak});for(let Rt of Tt.ranges)St.push(EditorSelection.range(Math.min(dt.doc.length,Rt.anchor+At),Math.min(dt.doc.length,Rt.head+At)))}else{ft.push({from:Ct.from,to:Tt.from},{from:Tt.to,insert:dt.lineBreak+Ct.text});for(let Rt of Tt.ranges)St.push(EditorSelection.range(Rt.anchor-At,Rt.head-At))}}return ft.length?($(dt.update({changes:ft,scrollIntoView:!0,selection:EditorSelection.create(St,dt.selection.mainIndex),userEvent:"move.line"})),!0):!1}const moveLineUp=({state:dt,dispatch:$})=>moveLine(dt,$,!1),moveLineDown=({state:dt,dispatch:$})=>moveLine(dt,$,!0);function copyLine(dt,$,lt){if(dt.readOnly)return!1;let ft=[];for(let St of selectedLineBlocks(dt))lt?ft.push({from:St.from,insert:dt.doc.slice(St.from,St.to)+dt.lineBreak}):ft.push({from:St.to,insert:dt.lineBreak+dt.doc.slice(St.from,St.to)});return $(dt.update({changes:ft,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const copyLineUp=({state:dt,dispatch:$})=>copyLine(dt,$,!1),copyLineDown=({state:dt,dispatch:$})=>copyLine(dt,$,!0),deleteLine=dt=>{if(dt.state.readOnly)return!1;let{state:$}=dt,lt=$.changes(selectedLineBlocks($).map(({from:St,to:Tt})=>(St>0?St--:Tt<$.doc.length&&Tt++,{from:St,to:Tt}))),ft=updateSel($.selection,St=>dt.moveVertically(St,!0)).map(lt);return dt.dispatch({changes:lt,selection:ft,scrollIntoView:!0,userEvent:"delete.line"}),!0};function isBetweenBrackets(dt,$){if(/\(\)|\[\]|\{\}/.test(dt.sliceDoc($-1,$+1)))return{from:$,to:$};let lt=syntaxTree(dt).resolveInner($),ft=lt.childBefore($),St=lt.childAfter($),Tt;return ft&&St&&ft.to<=$&&St.from>=$&&(Tt=ft.type.prop(NodeProp.closedBy))&&Tt.indexOf(St.name)>-1&&dt.doc.lineAt(ft.to).from==dt.doc.lineAt(St.from).from?{from:ft.to,to:St.from}:null}const insertNewlineAndIndent=newlineAndIndent(!1),insertBlankLine=newlineAndIndent(!0);function newlineAndIndent(dt){return({state:$,dispatch:lt})=>{if($.readOnly)return!1;let ft=$.changeByRange(St=>{let{from:Tt,to:Ct}=St,At=$.doc.lineAt(Tt),Rt=!dt&&Tt==Ct&&isBetweenBrackets($,Tt);dt&&(Tt=Ct=(Ct<=At.to?At:$.doc.lineAt(Ct)).to);let kt=new IndentContext($,{simulateBreak:Tt,simulateDoubleBreak:!!Rt}),Nt=getIndentation(kt,Tt);for(Nt==null&&(Nt=/^\s*/.exec($.doc.lineAt(Tt).text)[0].length);Ct<At.to&&/\s/.test(At.text[Ct-At.from]);)Ct++;Rt?{from:Tt,to:Ct}=Rt:Tt>At.from&&Tt<At.from+100&&!/\S/.test(At.text.slice(0,Tt))&&(Tt=At.from);let Bt=["",indentString($,Nt)];return Rt&&Bt.push(indentString($,kt.lineIndent(At.from,-1))),{changes:{from:Tt,to:Ct,insert:Text.of(Bt)},range:EditorSelection.cursor(Tt+1+Bt[1].length)}});return lt($.update(ft,{scrollIntoView:!0,userEvent:"input"})),!0}}function changeBySelectedLine(dt,$){let lt=-1;return dt.changeByRange(ft=>{let St=[];for(let Ct=ft.from;Ct<=ft.to;){let At=dt.doc.lineAt(Ct);At.number>lt&&(ft.empty||ft.to>At.from)&&($(At,St,ft),lt=At.number),Ct=At.to+1}let Tt=dt.changes(St);return{changes:St,range:EditorSelection.range(Tt.mapPos(ft.anchor,1),Tt.mapPos(ft.head,1))}})}const indentSelection=({state:dt,dispatch:$})=>{if(dt.readOnly)return!1;let lt=Object.create(null),ft=new IndentContext(dt,{overrideIndentation:Tt=>{let Ct=lt[Tt];return Ct??-1}}),St=changeBySelectedLine(dt,(Tt,Ct,At)=>{let Rt=getIndentation(ft,Tt.from);if(Rt==null)return;/\S/.test(Tt.text)||(Rt=0);let kt=/^\s*/.exec(Tt.text)[0],Nt=indentString(dt,Rt);(kt!=Nt||At.from<Tt.from+kt.length)&&(lt[Tt.from]=Rt,Ct.push({from:Tt.from,to:Tt.from+kt.length,insert:Nt}))});return St.changes.empty||$(dt.update(St,{userEvent:"indent"})),!0},indentMore=({state:dt,dispatch:$})=>dt.readOnly?!1:($(dt.update(changeBySelectedLine(dt,(lt,ft)=>{ft.push({from:lt.from,insert:dt.facet(indentUnit)})}),{userEvent:"input.indent"})),!0),indentLess=({state:dt,dispatch:$})=>dt.readOnly?!1:($(dt.update(changeBySelectedLine(dt,(lt,ft)=>{let St=/^\s*/.exec(lt.text)[0];if(!St)return;let Tt=countColumn(St,dt.tabSize),Ct=0,At=indentString(dt,Math.max(0,Tt-getIndentUnit(dt)));for(;Ct<St.length&&Ct<At.length&&St.charCodeAt(Ct)==At.charCodeAt(Ct);)Ct++;ft.push({from:lt.from+Ct,to:lt.from+St.length,insert:At.slice(Ct)})}),{userEvent:"delete.dedent"})),!0),emacsStyleKeymap=[{key:"Ctrl-b",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Ctrl-f",run:cursorCharRight,shift:selectCharRight},{key:"Ctrl-p",run:cursorLineUp,shift:selectLineUp},{key:"Ctrl-n",run:cursorLineDown,shift:selectLineDown},{key:"Ctrl-a",run:cursorLineStart,shift:selectLineStart},{key:"Ctrl-e",run:cursorLineEnd,shift:selectLineEnd},{key:"Ctrl-d",run:deleteCharForward},{key:"Ctrl-h",run:deleteCharBackward},{key:"Ctrl-k",run:deleteToLineEnd},{key:"Ctrl-Alt-h",run:deleteGroupBackward},{key:"Ctrl-o",run:splitLine},{key:"Ctrl-t",run:transposeChars},{key:"Ctrl-v",run:cursorPageDown}],standardKeymap=[{key:"ArrowLeft",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cursorGroupLeft,shift:selectGroupLeft,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:cursorLineBoundaryLeft,shift:selectLineBoundaryLeft,preventDefault:!0},{key:"ArrowRight",run:cursorCharRight,shift:selectCharRight,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cursorGroupRight,shift:selectGroupRight,preventDefault:!0},{mac:"Cmd-ArrowRight",run:cursorLineBoundaryRight,shift:selectLineBoundaryRight,preventDefault:!0},{key:"ArrowUp",run:cursorLineUp,shift:selectLineUp,preventDefault:!0},{mac:"Cmd-ArrowUp",run:cursorDocStart,shift:selectDocStart},{mac:"Ctrl-ArrowUp",run:cursorPageUp,shift:selectPageUp},{key:"ArrowDown",run:cursorLineDown,shift:selectLineDown,preventDefault:!0},{mac:"Cmd-ArrowDown",run:cursorDocEnd,shift:selectDocEnd},{mac:"Ctrl-ArrowDown",run:cursorPageDown,shift:selectPageDown},{key:"PageUp",run:cursorPageUp,shift:selectPageUp},{key:"PageDown",run:cursorPageDown,shift:selectPageDown},{key:"Home",run:cursorLineBoundaryBackward,shift:selectLineBoundaryBackward,preventDefault:!0},{key:"Mod-Home",run:cursorDocStart,shift:selectDocStart},{key:"End",run:cursorLineBoundaryForward,shift:selectLineBoundaryForward,preventDefault:!0},{key:"Mod-End",run:cursorDocEnd,shift:selectDocEnd},{key:"Enter",run:insertNewlineAndIndent},{key:"Mod-a",run:selectAll},{key:"Backspace",run:deleteCharBackward,shift:deleteCharBackward},{key:"Delete",run:deleteCharForward},{key:"Mod-Backspace",mac:"Alt-Backspace",run:deleteGroupBackward},{key:"Mod-Delete",mac:"Alt-Delete",run:deleteGroupForward},{mac:"Mod-Backspace",run:deleteToLineStart},{mac:"Mod-Delete",run:deleteToLineEnd}].concat(emacsStyleKeymap.map(dt=>({mac:dt.key,run:dt.run,shift:dt.shift}))),defaultKeymap=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:cursorSyntaxLeft,shift:selectSyntaxLeft},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:cursorSyntaxRight,shift:selectSyntaxRight},{key:"Alt-ArrowUp",run:moveLineUp},{key:"Shift-Alt-ArrowUp",run:copyLineUp},{key:"Alt-ArrowDown",run:moveLineDown},{key:"Shift-Alt-ArrowDown",run:copyLineDown},{key:"Escape",run:simplifySelection},{key:"Mod-Enter",run:insertBlankLine},{key:"Alt-l",mac:"Ctrl-l",run:selectLine},{key:"Mod-i",run:selectParentSyntax,preventDefault:!0},{key:"Mod-[",run:indentLess},{key:"Mod-]",run:indentMore},{key:"Mod-Alt-\\",run:indentSelection},{key:"Shift-Mod-k",run:deleteLine},{key:"Shift-Mod-\\",run:cursorMatchingBracket},{key:"Mod-/",run:toggleComment},{key:"Alt-A",run:toggleBlockComment}].concat(standardKeymap),indentWithTab={key:"Tab",run:indentMore,shift:indentLess};function crelt(){var dt=arguments[0];typeof dt=="string"&&(dt=document.createElement(dt));var $=1,lt=arguments[1];if(lt&&typeof lt=="object"&&lt.nodeType==null&&!Array.isArray(lt)){for(var ft in lt)if(Object.prototype.hasOwnProperty.call(lt,ft)){var St=lt[ft];typeof St=="string"?dt.setAttribute(ft,St):St!=null&&(dt[ft]=St)}$++}for(;$<arguments.length;$++)add(dt,arguments[$]);return dt}function add(dt,$){if(typeof $=="string")dt.appendChild(document.createTextNode($));else if($!=null)if($.nodeType!=null)dt.appendChild($);else if(Array.isArray($))for(var lt=0;lt<$.length;lt++)add(dt,$[lt]);else throw new RangeError("Unsupported child node: "+$)}const basicNormalize=typeof String.prototype.normalize=="function"?dt=>dt.normalize("NFKD"):dt=>dt;class SearchCursor{constructor($,lt,ft=0,St=$.length,Tt,Ct){this.test=Ct,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=$.iterRange(ft,St),this.bufferStart=ft,this.normalize=Tt?At=>Tt(basicNormalize(At)):basicNormalize,this.query=this.normalize(lt)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return codePointAt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let $=this.peek();if($<0)return this.done=!0,this;let lt=fromCodePoint($),ft=this.bufferStart+this.bufferPos;this.bufferPos+=codePointSize($);let St=this.normalize(lt);for(let Tt=0,Ct=ft;;Tt++){let At=St.charCodeAt(Tt),Rt=this.match(At,Ct);if(Rt)return this.value=Rt,this;if(Tt==St.length-1)break;Ct==ft&&Tt<lt.length&&lt.charCodeAt(Tt)==At&&Ct++}}}match($,lt){let ft=null;for(let St=0;St<this.matches.length;St+=2){let Tt=this.matches[St],Ct=!1;this.query.charCodeAt(Tt)==$&&(Tt==this.query.length-1?ft={from:this.matches[St+1],to:lt+1}:(this.matches[St]++,Ct=!0)),Ct||(this.matches.splice(St,2),St-=2)}return this.query.charCodeAt(0)==$&&(this.query.length==1?ft={from:lt,to:lt+1}:this.matches.push(1,lt)),ft&&this.test&&!this.test(ft.from,ft.to,this.buffer,this.bufferPos)&&(ft=null),ft}}typeof Symbol<"u"&&(SearchCursor.prototype[Symbol.iterator]=function(){return this});const empty={from:-1,to:-1,match:/.*/.exec("")},baseFlags="gm"+(/x/.unicode==null?"":"u");class RegExpCursor{constructor($,lt,ft,St=0,Tt=$.length){if(this.text=$,this.to=Tt,this.curLine="",this.done=!1,this.value=empty,/\\[sWDnr]|\n|\r|\[\^/.test(lt))return new MultilineRegExpCursor($,lt,ft,St,Tt);this.re=new RegExp(lt,baseFlags+(ft!=null&&ft.ignoreCase?"i":"")),this.test=ft==null?void 0:ft.test,this.iter=$.iter();let Ct=$.lineAt(St);this.curLineStart=Ct.from,this.matchPos=toCharEnd($,St),this.getLine(this.curLineStart)}getLine($){this.iter.next($),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let $=this.matchPos-this.curLineStart;;){this.re.lastIndex=$;let lt=this.matchPos<=this.to&&this.re.exec(this.curLine);if(lt){let ft=this.curLineStart+lt.index,St=ft+lt[0].length;if(this.matchPos=toCharEnd(this.text,St+(ft==St?1:0)),ft==this.curLineStart+this.curLine.length&&this.nextLine(),(ft<St||ft>this.value.to)&&(!this.test||this.test(ft,St,lt)))return this.value={from:ft,to:St,match:lt},this;$=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),$=0;else return this.done=!0,this}}}const flattened=new WeakMap;class FlattenedDoc{constructor($,lt){this.from=$,this.text=lt}get to(){return this.from+this.text.length}static get($,lt,ft){let St=flattened.get($);if(!St||St.from>=ft||St.to<=lt){let At=new FlattenedDoc(lt,$.sliceString(lt,ft));return flattened.set($,At),At}if(St.from==lt&&St.to==ft)return St;let{text:Tt,from:Ct}=St;return Ct>lt&&(Tt=$.sliceString(lt,Ct)+Tt,Ct=lt),St.to<ft&&(Tt+=$.sliceString(St.to,ft)),flattened.set($,new FlattenedDoc(Ct,Tt)),new FlattenedDoc(lt,Tt.slice(lt-Ct,ft-Ct))}}class MultilineRegExpCursor{constructor($,lt,ft,St,Tt){this.text=$,this.to=Tt,this.done=!1,this.value=empty,this.matchPos=toCharEnd($,St),this.re=new RegExp(lt,baseFlags+(ft!=null&&ft.ignoreCase?"i":"")),this.test=ft==null?void 0:ft.test,this.flat=FlattenedDoc.get($,St,this.chunkEnd(St+5e3))}chunkEnd($){return $>=this.to?this.to:this.text.lineAt($).to}next(){for(;;){let $=this.re.lastIndex=this.matchPos-this.flat.from,lt=this.re.exec(this.flat.text);if(lt&&!lt[0]&&lt.index==$&&(this.re.lastIndex=$+1,lt=this.re.exec(this.flat.text)),lt){let ft=this.flat.from+lt.index,St=ft+lt[0].length;if((this.flat.to>=this.to||lt.index+lt[0].length<=this.flat.text.length-10)&&(!this.test||this.test(ft,St,lt)))return this.value={from:ft,to:St,match:lt},this.matchPos=toCharEnd(this.text,St+(ft==St?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=FlattenedDoc.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(RegExpCursor.prototype[Symbol.iterator]=MultilineRegExpCursor.prototype[Symbol.iterator]=function(){return this});function validRegExp(dt){try{return new RegExp(dt,baseFlags),!0}catch{return!1}}function toCharEnd(dt,$){if($>=dt.length)return $;let lt=dt.lineAt($),ft;for(;$<lt.to&&(ft=lt.text.charCodeAt($-lt.from))>=56320&&ft<57344;)$++;return $}function createLineDialog(dt){let $=crelt("input",{class:"cm-textfield",name:"line"}),lt=crelt("form",{class:"cm-gotoLine",onkeydown:St=>{St.keyCode==27?(St.preventDefault(),dt.dispatch({effects:dialogEffect.of(!1)}),dt.focus()):St.keyCode==13&&(St.preventDefault(),ft())},onsubmit:St=>{St.preventDefault(),ft()}},crelt("label",dt.state.phrase("Go to line"),": ",$)," ",crelt("button",{class:"cm-button",type:"submit"},dt.state.phrase("go")));function ft(){let St=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec($.value);if(!St)return;let{state:Tt}=dt,Ct=Tt.doc.lineAt(Tt.selection.main.head),[,At,Rt,kt,Nt]=St,Bt=kt?+kt.slice(1):0,Ut=Rt?+Rt:Ct.number;if(Rt&&Nt){let Zt=Ut/100;At&&(Zt=Zt*(At=="-"?-1:1)+Ct.number/Tt.doc.lines),Ut=Math.round(Tt.doc.lines*Zt)}else Rt&&At&&(Ut=Ut*(At=="-"?-1:1)+Ct.number);let zt=Tt.doc.line(Math.max(1,Math.min(Tt.doc.lines,Ut)));dt.dispatch({effects:dialogEffect.of(!1),selection:EditorSelection.cursor(zt.from+Math.max(0,Math.min(Bt,zt.length))),scrollIntoView:!0}),dt.focus()}return{dom:lt}}const dialogEffect=StateEffect.define(),dialogField=StateField.define({create(){return!0},update(dt,$){for(let lt of $.effects)lt.is(dialogEffect)&&(dt=lt.value);return dt},provide:dt=>showPanel.from(dt,$=>$?createLineDialog:null)}),gotoLine=dt=>{let $=getPanel(dt,createLineDialog);if(!$){let lt=[dialogEffect.of(!0)];dt.state.field(dialogField,!1)==null&&lt.push(StateEffect.appendConfig.of([dialogField,baseTheme$1])),dt.dispatch({effects:lt}),$=getPanel(dt,createLineDialog)}return $&&$.dom.querySelector("input").focus(),!0},baseTheme$1=EditorView.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),defaultHighlightOptions={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},highlightConfig=Facet.define({combine(dt){return combineConfig(dt,defaultHighlightOptions,{highlightWordAroundCursor:($,lt)=>$||lt,minSelectionLength:Math.min,maxMatches:Math.min})}});function highlightSelectionMatches(dt){let $=[defaultTheme,matchHighlighter];return dt&&$.push(highlightConfig.of(dt)),$}const matchDeco=Decoration.mark({class:"cm-selectionMatch"}),mainMatchDeco=Decoration.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function insideWordBoundaries(dt,$,lt,ft){return(lt==0||dt($.sliceDoc(lt-1,lt))!=CharCategory.Word)&&(ft==$.doc.length||dt($.sliceDoc(ft,ft+1))!=CharCategory.Word)}function insideWord(dt,$,lt,ft){return dt($.sliceDoc(lt,lt+1))==CharCategory.Word&&dt($.sliceDoc(ft-1,ft))==CharCategory.Word}const matchHighlighter=ViewPlugin.fromClass(class{constructor(dt){this.decorations=this.getDeco(dt)}update(dt){(dt.selectionSet||dt.docChanged||dt.viewportChanged)&&(this.decorations=this.getDeco(dt.view))}getDeco(dt){let $=dt.state.facet(highlightConfig),{state:lt}=dt,ft=lt.selection;if(ft.ranges.length>1)return Decoration.none;let St=ft.main,Tt,Ct=null;if(St.empty){if(!$.highlightWordAroundCursor)return Decoration.none;let Rt=lt.wordAt(St.head);if(!Rt)return Decoration.none;Ct=lt.charCategorizer(St.head),Tt=lt.sliceDoc(Rt.from,Rt.to)}else{let Rt=St.to-St.from;if(Rt<$.minSelectionLength||Rt>200)return Decoration.none;if($.wholeWords){if(Tt=lt.sliceDoc(St.from,St.to),Ct=lt.charCategorizer(St.head),!(insideWordBoundaries(Ct,lt,St.from,St.to)&&insideWord(Ct,lt,St.from,St.to)))return Decoration.none}else if(Tt=lt.sliceDoc(St.from,St.to).trim(),!Tt)return Decoration.none}let At=[];for(let Rt of dt.visibleRanges){let kt=new SearchCursor(lt.doc,Tt,Rt.from,Rt.to);for(;!kt.next().done;){let{from:Nt,to:Bt}=kt.value;if((!Ct||insideWordBoundaries(Ct,lt,Nt,Bt))&&(St.empty&&Nt<=St.from&&Bt>=St.to?At.push(mainMatchDeco.range(Nt,Bt)):(Nt>=St.to||Bt<=St.from)&&At.push(matchDeco.range(Nt,Bt)),At.length>$.maxMatches))return Decoration.none}}return Decoration.set(At)}},{decorations:dt=>dt.decorations}),defaultTheme=EditorView.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),selectWord=({state:dt,dispatch:$})=>{let{selection:lt}=dt,ft=EditorSelection.create(lt.ranges.map(St=>dt.wordAt(St.head)||EditorSelection.cursor(St.head)),lt.mainIndex);return ft.eq(lt)?!1:($(dt.update({selection:ft})),!0)};function findNextOccurrence(dt,$){let{main:lt,ranges:ft}=dt.selection,St=dt.wordAt(lt.head),Tt=St&&St.from==lt.from&&St.to==lt.to;for(let Ct=!1,At=new SearchCursor(dt.doc,$,ft[ft.length-1].to);;)if(At.next(),At.done){if(Ct)return null;At=new SearchCursor(dt.doc,$,0,Math.max(0,ft[ft.length-1].from-1)),Ct=!0}else{if(Ct&&ft.some(Rt=>Rt.from==At.value.from))continue;if(Tt){let Rt=dt.wordAt(At.value.from);if(!Rt||Rt.from!=At.value.from||Rt.to!=At.value.to)continue}return At.value}}const selectNextOccurrence=({state:dt,dispatch:$})=>{let{ranges:lt}=dt.selection;if(lt.some(Tt=>Tt.from===Tt.to))return selectWord({state:dt,dispatch:$});let ft=dt.sliceDoc(lt[0].from,lt[0].to);if(dt.selection.ranges.some(Tt=>dt.sliceDoc(Tt.from,Tt.to)!=ft))return!1;let St=findNextOccurrence(dt,ft);return St?($(dt.update({selection:dt.selection.addRange(EditorSelection.range(St.from,St.to),!1),effects:EditorView.scrollIntoView(St.to)})),!0):!1},searchConfigFacet=Facet.define({combine(dt){return combineConfig(dt,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:$=>new SearchPanel($)})}});class SearchQuery{constructor($){this.search=$.search,this.caseSensitive=!!$.caseSensitive,this.literal=!!$.literal,this.regexp=!!$.regexp,this.replace=$.replace||"",this.valid=!!this.search&&(!this.regexp||validRegExp(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!$.wholeWord}unquote($){return this.literal?$:$.replace(/\\([nrt\\])/g,(lt,ft)=>ft=="n"?`
`:ft=="r"?"\r":ft=="t"?"	":"\\")}eq($){return this.search==$.search&&this.replace==$.replace&&this.caseSensitive==$.caseSensitive&&this.regexp==$.regexp&&this.wholeWord==$.wholeWord}create(){return this.regexp?new RegExpQuery(this):new StringQuery(this)}getCursor($,lt=0,ft){let St=$.doc?$:EditorState.create({doc:$});return ft==null&&(ft=St.doc.length),this.regexp?regexpCursor(this,St,lt,ft):stringCursor(this,St,lt,ft)}}class QueryType{constructor($){this.spec=$}}function stringCursor(dt,$,lt,ft){return new SearchCursor($.doc,dt.unquoted,lt,ft,dt.caseSensitive?void 0:St=>St.toLowerCase(),dt.wholeWord?stringWordTest($.doc,$.charCategorizer($.selection.main.head)):void 0)}function stringWordTest(dt,$){return(lt,ft,St,Tt)=>((Tt>lt||Tt+St.length<ft)&&(Tt=Math.max(0,lt-2),St=dt.sliceString(Tt,Math.min(dt.length,ft+2))),($(charBefore(St,lt-Tt))!=CharCategory.Word||$(charAfter(St,lt-Tt))!=CharCategory.Word)&&($(charAfter(St,ft-Tt))!=CharCategory.Word||$(charBefore(St,ft-Tt))!=CharCategory.Word))}class StringQuery extends QueryType{constructor($){super($)}nextMatch($,lt,ft){let St=stringCursor(this.spec,$,ft,$.doc.length).nextOverlapping();return St.done&&(St=stringCursor(this.spec,$,0,lt).nextOverlapping()),St.done?null:St.value}prevMatchInRange($,lt,ft){for(let St=ft;;){let Tt=Math.max(lt,St-1e4-this.spec.unquoted.length),Ct=stringCursor(this.spec,$,Tt,St),At=null;for(;!Ct.nextOverlapping().done;)At=Ct.value;if(At)return At;if(Tt==lt)return null;St-=1e4}}prevMatch($,lt,ft){return this.prevMatchInRange($,0,lt)||this.prevMatchInRange($,ft,$.doc.length)}getReplacement($){return this.spec.unquote(this.spec.replace)}matchAll($,lt){let ft=stringCursor(this.spec,$,0,$.doc.length),St=[];for(;!ft.next().done;){if(St.length>=lt)return null;St.push(ft.value)}return St}highlight($,lt,ft,St){let Tt=stringCursor(this.spec,$,Math.max(0,lt-this.spec.unquoted.length),Math.min(ft+this.spec.unquoted.length,$.doc.length));for(;!Tt.next().done;)St(Tt.value.from,Tt.value.to)}}function regexpCursor(dt,$,lt,ft){return new RegExpCursor($.doc,dt.search,{ignoreCase:!dt.caseSensitive,test:dt.wholeWord?regexpWordTest($.charCategorizer($.selection.main.head)):void 0},lt,ft)}function charBefore(dt,$){return dt.slice(findClusterBreak(dt,$,!1),$)}function charAfter(dt,$){return dt.slice($,findClusterBreak(dt,$))}function regexpWordTest(dt){return($,lt,ft)=>!ft[0].length||(dt(charBefore(ft.input,ft.index))!=CharCategory.Word||dt(charAfter(ft.input,ft.index))!=CharCategory.Word)&&(dt(charAfter(ft.input,ft.index+ft[0].length))!=CharCategory.Word||dt(charBefore(ft.input,ft.index+ft[0].length))!=CharCategory.Word)}class RegExpQuery extends QueryType{nextMatch($,lt,ft){let St=regexpCursor(this.spec,$,ft,$.doc.length).next();return St.done&&(St=regexpCursor(this.spec,$,0,lt).next()),St.done?null:St.value}prevMatchInRange($,lt,ft){for(let St=1;;St++){let Tt=Math.max(lt,ft-St*1e4),Ct=regexpCursor(this.spec,$,Tt,ft),At=null;for(;!Ct.next().done;)At=Ct.value;if(At&&(Tt==lt||At.from>Tt+10))return At;if(Tt==lt)return null}}prevMatch($,lt,ft){return this.prevMatchInRange($,0,lt)||this.prevMatchInRange($,ft,$.doc.length)}getReplacement($){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(lt,ft)=>ft=="$"?"$":ft=="&"?$.match[0]:ft!="0"&&+ft<$.match.length?$.match[ft]:lt))}matchAll($,lt){let ft=regexpCursor(this.spec,$,0,$.doc.length),St=[];for(;!ft.next().done;){if(St.length>=lt)return null;St.push(ft.value)}return St}highlight($,lt,ft,St){let Tt=regexpCursor(this.spec,$,Math.max(0,lt-250),Math.min(ft+250,$.doc.length));for(;!Tt.next().done;)St(Tt.value.from,Tt.value.to)}}const setSearchQuery=StateEffect.define(),togglePanel$1=StateEffect.define(),searchState=StateField.define({create(dt){return new SearchState(defaultQuery(dt).create(),null)},update(dt,$){for(let lt of $.effects)lt.is(setSearchQuery)?dt=new SearchState(lt.value.create(),dt.panel):lt.is(togglePanel$1)&&(dt=new SearchState(dt.query,lt.value?createSearchPanel:null));return dt},provide:dt=>showPanel.from(dt,$=>$.panel)});class SearchState{constructor($,lt){this.query=$,this.panel=lt}}const matchMark=Decoration.mark({class:"cm-searchMatch"}),selectedMatchMark=Decoration.mark({class:"cm-searchMatch cm-searchMatch-selected"}),searchHighlighter=ViewPlugin.fromClass(class{constructor(dt){this.view=dt,this.decorations=this.highlight(dt.state.field(searchState))}update(dt){let $=dt.state.field(searchState);($!=dt.startState.field(searchState)||dt.docChanged||dt.selectionSet||dt.viewportChanged)&&(this.decorations=this.highlight($))}highlight({query:dt,panel:$}){if(!$||!dt.spec.valid)return Decoration.none;let{view:lt}=this,ft=new RangeSetBuilder;for(let St=0,Tt=lt.visibleRanges,Ct=Tt.length;St<Ct;St++){let{from:At,to:Rt}=Tt[St];for(;St<Ct-1&&Rt>Tt[St+1].from-2*250;)Rt=Tt[++St].to;dt.highlight(lt.state,At,Rt,(kt,Nt)=>{let Bt=lt.state.selection.ranges.some(Ut=>Ut.from==kt&&Ut.to==Nt);ft.add(kt,Nt,Bt?selectedMatchMark:matchMark)})}return ft.finish()}},{decorations:dt=>dt.decorations});function searchCommand(dt){return $=>{let lt=$.state.field(searchState,!1);return lt&&lt.query.spec.valid?dt($,lt):openSearchPanel($)}}const findNext=searchCommand((dt,{query:$})=>{let{to:lt}=dt.state.selection.main,ft=$.nextMatch(dt.state,lt,lt);return ft?(dt.dispatch({selection:{anchor:ft.from,head:ft.to},scrollIntoView:!0,effects:announceMatch(dt,ft),userEvent:"select.search"}),!0):!1}),findPrevious=searchCommand((dt,{query:$})=>{let{state:lt}=dt,{from:ft}=lt.selection.main,St=$.prevMatch(lt,ft,ft);return St?(dt.dispatch({selection:{anchor:St.from,head:St.to},scrollIntoView:!0,effects:announceMatch(dt,St),userEvent:"select.search"}),!0):!1}),selectMatches=searchCommand((dt,{query:$})=>{let lt=$.matchAll(dt.state,1e3);return!lt||!lt.length?!1:(dt.dispatch({selection:EditorSelection.create(lt.map(ft=>EditorSelection.range(ft.from,ft.to))),userEvent:"select.search.matches"}),!0)}),selectSelectionMatches=({state:dt,dispatch:$})=>{let lt=dt.selection;if(lt.ranges.length>1||lt.main.empty)return!1;let{from:ft,to:St}=lt.main,Tt=[],Ct=0;for(let At=new SearchCursor(dt.doc,dt.sliceDoc(ft,St));!At.next().done;){if(Tt.length>1e3)return!1;At.value.from==ft&&(Ct=Tt.length),Tt.push(EditorSelection.range(At.value.from,At.value.to))}return $(dt.update({selection:EditorSelection.create(Tt,Ct),userEvent:"select.search.matches"})),!0},replaceNext=searchCommand((dt,{query:$})=>{let{state:lt}=dt,{from:ft,to:St}=lt.selection.main;if(lt.readOnly)return!1;let Tt=$.nextMatch(lt,ft,ft);if(!Tt)return!1;let Ct=[],At,Rt,kt=[];if(Tt.from==ft&&Tt.to==St&&(Rt=lt.toText($.getReplacement(Tt)),Ct.push({from:Tt.from,to:Tt.to,insert:Rt}),Tt=$.nextMatch(lt,Tt.from,Tt.to),kt.push(EditorView.announce.of(lt.phrase("replaced match on line $",lt.doc.lineAt(ft).number)+"."))),Tt){let Nt=Ct.length==0||Ct[0].from>=Tt.to?0:Tt.to-Tt.from-Rt.length;At={anchor:Tt.from-Nt,head:Tt.to-Nt},kt.push(announceMatch(dt,Tt))}return dt.dispatch({changes:Ct,selection:At,scrollIntoView:!!At,effects:kt,userEvent:"input.replace"}),!0}),replaceAll=searchCommand((dt,{query:$})=>{if(dt.state.readOnly)return!1;let lt=$.matchAll(dt.state,1e9).map(St=>{let{from:Tt,to:Ct}=St;return{from:Tt,to:Ct,insert:$.getReplacement(St)}});if(!lt.length)return!1;let ft=dt.state.phrase("replaced $ matches",lt.length)+".";return dt.dispatch({changes:lt,effects:EditorView.announce.of(ft),userEvent:"input.replace.all"}),!0});function createSearchPanel(dt){return dt.state.facet(searchConfigFacet).createPanel(dt)}function defaultQuery(dt,$){var lt,ft,St,Tt;let Ct=dt.selection.main,At=Ct.empty||Ct.to>Ct.from+100?"":dt.sliceDoc(Ct.from,Ct.to);if($&&!At)return $;let Rt=dt.facet(searchConfigFacet);return new SearchQuery({search:((lt=$==null?void 0:$.literal)!==null&&lt!==void 0?lt:Rt.literal)?At:At.replace(/\n/g,"\\n"),caseSensitive:(ft=$==null?void 0:$.caseSensitive)!==null&&ft!==void 0?ft:Rt.caseSensitive,literal:(St=$==null?void 0:$.literal)!==null&&St!==void 0?St:Rt.literal,wholeWord:(Tt=$==null?void 0:$.wholeWord)!==null&&Tt!==void 0?Tt:Rt.wholeWord})}const openSearchPanel=dt=>{let $=dt.state.field(searchState,!1);if($&&$.panel){let lt=getPanel(dt,createSearchPanel);if(!lt)return!1;let ft=lt.dom.querySelector("[main-field]");if(ft&&ft!=dt.root.activeElement){let St=defaultQuery(dt.state,$.query.spec);St.valid&&dt.dispatch({effects:setSearchQuery.of(St)}),ft.focus(),ft.select()}}else dt.dispatch({effects:[togglePanel$1.of(!0),$?setSearchQuery.of(defaultQuery(dt.state,$.query.spec)):StateEffect.appendConfig.of(searchExtensions)]});return!0},closeSearchPanel=dt=>{let $=dt.state.field(searchState,!1);if(!$||!$.panel)return!1;let lt=getPanel(dt,createSearchPanel);return lt&&lt.dom.contains(dt.root.activeElement)&&dt.focus(),dt.dispatch({effects:togglePanel$1.of(!1)}),!0},searchKeymap=[{key:"Mod-f",run:openSearchPanel,scope:"editor search-panel"},{key:"F3",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:closeSearchPanel,scope:"editor search-panel"},{key:"Mod-Shift-l",run:selectSelectionMatches},{key:"Alt-g",run:gotoLine},{key:"Mod-d",run:selectNextOccurrence,preventDefault:!0}];class SearchPanel{constructor($){this.view=$;let lt=this.query=$.state.field(searchState).query.spec;this.commit=this.commit.bind(this),this.searchField=crelt("input",{value:lt.search,placeholder:phrase($,"Find"),"aria-label":phrase($,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=crelt("input",{value:lt.replace,placeholder:phrase($,"Replace"),"aria-label":phrase($,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=crelt("input",{type:"checkbox",name:"case",form:"",checked:lt.caseSensitive,onchange:this.commit}),this.reField=crelt("input",{type:"checkbox",name:"re",form:"",checked:lt.regexp,onchange:this.commit}),this.wordField=crelt("input",{type:"checkbox",name:"word",form:"",checked:lt.wholeWord,onchange:this.commit});function ft(St,Tt,Ct){return crelt("button",{class:"cm-button",name:St,onclick:Tt,type:"button"},Ct)}this.dom=crelt("div",{onkeydown:St=>this.keydown(St),class:"cm-search"},[this.searchField,ft("next",()=>findNext($),[phrase($,"next")]),ft("prev",()=>findPrevious($),[phrase($,"previous")]),ft("select",()=>selectMatches($),[phrase($,"all")]),crelt("label",null,[this.caseField,phrase($,"match case")]),crelt("label",null,[this.reField,phrase($,"regexp")]),crelt("label",null,[this.wordField,phrase($,"by word")]),...$.state.readOnly?[]:[crelt("br"),this.replaceField,ft("replace",()=>replaceNext($),[phrase($,"replace")]),ft("replaceAll",()=>replaceAll($),[phrase($,"replace all")])],crelt("button",{name:"close",onclick:()=>closeSearchPanel($),"aria-label":phrase($,"close"),type:"button"},[""])])}commit(){let $=new SearchQuery({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});$.eq(this.query)||(this.query=$,this.view.dispatch({effects:setSearchQuery.of($)}))}keydown($){runScopeHandlers(this.view,$,"search-panel")?$.preventDefault():$.keyCode==13&&$.target==this.searchField?($.preventDefault(),($.shiftKey?findPrevious:findNext)(this.view)):$.keyCode==13&&$.target==this.replaceField&&($.preventDefault(),replaceNext(this.view))}update($){for(let lt of $.transactions)for(let ft of lt.effects)ft.is(setSearchQuery)&&!ft.value.eq(this.query)&&this.setQuery(ft.value)}setQuery($){this.query=$,this.searchField.value=$.search,this.replaceField.value=$.replace,this.caseField.checked=$.caseSensitive,this.reField.checked=$.regexp,this.wordField.checked=$.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(searchConfigFacet).top}}function phrase(dt,$){return dt.state.phrase($)}const AnnounceMargin=30,Break=/[\s\.,:;?!]/;function announceMatch(dt,{from:$,to:lt}){let ft=dt.state.doc.lineAt($),St=dt.state.doc.lineAt(lt).to,Tt=Math.max(ft.from,$-AnnounceMargin),Ct=Math.min(St,lt+AnnounceMargin),At=dt.state.sliceDoc(Tt,Ct);if(Tt!=ft.from){for(let Rt=0;Rt<AnnounceMargin;Rt++)if(!Break.test(At[Rt+1])&&Break.test(At[Rt])){At=At.slice(Rt);break}}if(Ct!=St){for(let Rt=At.length-1;Rt>At.length-AnnounceMargin;Rt--)if(!Break.test(At[Rt-1])&&Break.test(At[Rt])){At=At.slice(0,Rt);break}}return EditorView.announce.of(`${dt.state.phrase("current match")}. ${At} ${dt.state.phrase("on line")} ${ft.number}.`)}const baseTheme$2=EditorView.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),searchExtensions=[searchState,Prec.lowest(searchHighlighter),baseTheme$2];class SelectedDiagnostic{constructor($,lt,ft){this.from=$,this.to=lt,this.diagnostic=ft}}class LintState{constructor($,lt,ft){this.diagnostics=$,this.panel=lt,this.selected=ft}static init($,lt,ft){let St=$,Tt=ft.facet(lintConfig).markerFilter;Tt&&(St=Tt(St));let Ct=Decoration.set(St.map(At=>At.from==At.to||At.from==At.to-1&&ft.doc.lineAt(At.from).to==At.from?Decoration.widget({widget:new DiagnosticWidget(At),diagnostic:At}).range(At.from):Decoration.mark({attributes:{class:"cm-lintRange cm-lintRange-"+At.severity},diagnostic:At}).range(At.from,At.to)),!0);return new LintState(Ct,lt,findDiagnostic(Ct))}}function findDiagnostic(dt,$=null,lt=0){let ft=null;return dt.between(lt,1e9,(St,Tt,{spec:Ct})=>{if(!($&&Ct.diagnostic!=$))return ft=new SelectedDiagnostic(St,Tt,Ct.diagnostic),!1}),ft}function hideTooltip(dt,$){return!!(dt.effects.some(lt=>lt.is(setDiagnosticsEffect))||dt.changes.touchesRange($.pos))}function maybeEnableLint(dt,$){return dt.field(lintState,!1)?$:$.concat(StateEffect.appendConfig.of([lintState,EditorView.decorations.compute([lintState],lt=>{let{selected:ft,panel:St}=lt.field(lintState);return!ft||!St||ft.from==ft.to?Decoration.none:Decoration.set([activeMark.range(ft.from,ft.to)])}),hoverTooltip(lintTooltip,{hideOn:hideTooltip}),baseTheme]))}function setDiagnostics(dt,$){return{effects:maybeEnableLint(dt,[setDiagnosticsEffect.of($)])}}const setDiagnosticsEffect=StateEffect.define(),togglePanel=StateEffect.define(),movePanelSelection=StateEffect.define(),lintState=StateField.define({create(){return new LintState(Decoration.none,null,null)},update(dt,$){if($.docChanged){let lt=dt.diagnostics.map($.changes),ft=null;if(dt.selected){let St=$.changes.mapPos(dt.selected.from,1);ft=findDiagnostic(lt,dt.selected.diagnostic,St)||findDiagnostic(lt,null,St)}dt=new LintState(lt,dt.panel,ft)}for(let lt of $.effects)lt.is(setDiagnosticsEffect)?dt=LintState.init(lt.value,dt.panel,$.state):lt.is(togglePanel)?dt=new LintState(dt.diagnostics,lt.value?LintPanel.open:null,dt.selected):lt.is(movePanelSelection)&&(dt=new LintState(dt.diagnostics,dt.panel,lt.value));return dt},provide:dt=>[showPanel.from(dt,$=>$.panel),EditorView.decorations.from(dt,$=>$.diagnostics)]}),activeMark=Decoration.mark({class:"cm-lintRange cm-lintRange-active"});function lintTooltip(dt,$,lt){let{diagnostics:ft}=dt.state.field(lintState),St=[],Tt=2e8,Ct=0;ft.between($-(lt<0?1:0),$+(lt>0?1:0),(Rt,kt,{spec:Nt})=>{$>=Rt&&$<=kt&&(Rt==kt||($>Rt||lt>0)&&($<kt||lt<0))&&(St.push(Nt.diagnostic),Tt=Math.min(Rt,Tt),Ct=Math.max(kt,Ct))});let At=dt.state.facet(lintConfig).tooltipFilter;return At&&(St=At(St)),St.length?{pos:Tt,end:Ct,above:dt.state.doc.lineAt(Tt).to<Ct,create(){return{dom:diagnosticsTooltip(dt,St)}}}:null}function diagnosticsTooltip(dt,$){return crelt("ul",{class:"cm-tooltip-lint"},$.map(lt=>renderDiagnostic(dt,lt,!1)))}const openLintPanel=dt=>{let $=dt.state.field(lintState,!1);(!$||!$.panel)&&dt.dispatch({effects:maybeEnableLint(dt.state,[togglePanel.of(!0)])});let lt=getPanel(dt,LintPanel.open);return lt&&lt.dom.querySelector(".cm-panel-lint ul").focus(),!0},closeLintPanel=dt=>{let $=dt.state.field(lintState,!1);return!$||!$.panel?!1:(dt.dispatch({effects:togglePanel.of(!1)}),!0)},nextDiagnostic=dt=>{let $=dt.state.field(lintState,!1);if(!$)return!1;let lt=dt.state.selection.main,ft=$.diagnostics.iter(lt.to+1);return!ft.value&&(ft=$.diagnostics.iter(0),!ft.value||ft.from==lt.from&&ft.to==lt.to)?!1:(dt.dispatch({selection:{anchor:ft.from,head:ft.to},scrollIntoView:!0}),!0)},lintKeymap=[{key:"Mod-Shift-m",run:openLintPanel,preventDefault:!0},{key:"F8",run:nextDiagnostic}],lintPlugin=ViewPlugin.fromClass(class{constructor(dt){this.view=dt,this.timeout=-1,this.set=!0;let{delay:$}=dt.state.facet(lintConfig);this.lintTime=Date.now()+$,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,$)}run(){let dt=Date.now();if(dt<this.lintTime-10)setTimeout(this.run,this.lintTime-dt);else{this.set=!1;let{state:$}=this.view,{sources:lt}=$.facet(lintConfig);Promise.all(lt.map(ft=>Promise.resolve(ft(this.view)))).then(ft=>{let St=ft.reduce((Tt,Ct)=>Tt.concat(Ct));this.view.state.doc==$.doc&&this.view.dispatch(setDiagnostics(this.view.state,St))},ft=>{logException(this.view.state,ft)})}}update(dt){let $=dt.state.facet(lintConfig);(dt.docChanged||$!=dt.startState.facet(lintConfig)||$.needsRefresh&&$.needsRefresh(dt))&&(this.lintTime=Date.now()+$.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,$.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),lintConfig=Facet.define({combine(dt){return Object.assign({sources:dt.map($=>$.source)},combineConfig(dt.map($=>$.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:($,lt)=>$?lt?ft=>$(ft)||lt(ft):$:lt}))},enables:lintPlugin});function assignKeys(dt){let $=[];if(dt)e:for(let{name:lt}of dt){for(let ft=0;ft<lt.length;ft++){let St=lt[ft];if(/[a-zA-Z]/.test(St)&&!$.some(Tt=>Tt.toLowerCase()==St.toLowerCase())){$.push(St);continue e}}$.push("")}return $}function renderDiagnostic(dt,$,lt){var ft;let St=lt?assignKeys($.actions):[];return crelt("li",{class:"cm-diagnostic cm-diagnostic-"+$.severity},crelt("span",{class:"cm-diagnosticText"},$.renderMessage?$.renderMessage():$.message),(ft=$.actions)===null||ft===void 0?void 0:ft.map((Tt,Ct)=>{let At=!1,Rt=Ut=>{if(Ut.preventDefault(),At)return;At=!0;let zt=findDiagnostic(dt.state.field(lintState).diagnostics,$);zt&&Tt.apply(dt,zt.from,zt.to)},{name:kt}=Tt,Nt=St[Ct]?kt.indexOf(St[Ct]):-1,Bt=Nt<0?kt:[kt.slice(0,Nt),crelt("u",kt.slice(Nt,Nt+1)),kt.slice(Nt+1)];return crelt("button",{type:"button",class:"cm-diagnosticAction",onclick:Rt,onmousedown:Rt,"aria-label":` Action: ${kt}${Nt<0?"":` (access key "${St[Ct]})"`}.`},Bt)}),$.source&&crelt("div",{class:"cm-diagnosticSource"},$.source))}class DiagnosticWidget extends WidgetType{constructor($){super(),this.diagnostic=$}eq($){return $.diagnostic==this.diagnostic}toDOM(){return crelt("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class PanelItem{constructor($,lt){this.diagnostic=lt,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=renderDiagnostic($,lt,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class LintPanel{constructor($){this.view=$,this.items=[];let lt=St=>{if(St.keyCode==27)closeLintPanel(this.view),this.view.focus();else if(St.keyCode==38||St.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(St.keyCode==40||St.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(St.keyCode==36)this.moveSelection(0);else if(St.keyCode==35)this.moveSelection(this.items.length-1);else if(St.keyCode==13)this.view.focus();else if(St.keyCode>=65&&St.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:Tt}=this.items[this.selectedIndex],Ct=assignKeys(Tt.actions);for(let At=0;At<Ct.length;At++)if(Ct[At].toUpperCase().charCodeAt(0)==St.keyCode){let Rt=findDiagnostic(this.view.state.field(lintState).diagnostics,Tt);Rt&&Tt.actions[At].apply($,Rt.from,Rt.to)}}else return;St.preventDefault()},ft=St=>{for(let Tt=0;Tt<this.items.length;Tt++)this.items[Tt].dom.contains(St.target)&&this.moveSelection(Tt)};this.list=crelt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:lt,onclick:ft}),this.dom=crelt("div",{class:"cm-panel-lint"},this.list,crelt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>closeLintPanel(this.view)},"")),this.update()}get selectedIndex(){let $=this.view.state.field(lintState).selected;if(!$)return-1;for(let lt=0;lt<this.items.length;lt++)if(this.items[lt].diagnostic==$.diagnostic)return lt;return-1}update(){let{diagnostics:$,selected:lt}=this.view.state.field(lintState),ft=0,St=!1,Tt=null;for($.between(0,this.view.state.doc.length,(Ct,At,{spec:Rt})=>{let kt=-1,Nt;for(let Bt=ft;Bt<this.items.length;Bt++)if(this.items[Bt].diagnostic==Rt.diagnostic){kt=Bt;break}kt<0?(Nt=new PanelItem(this.view,Rt.diagnostic),this.items.splice(ft,0,Nt),St=!0):(Nt=this.items[kt],kt>ft&&(this.items.splice(ft,kt-ft),St=!0)),lt&&Nt.diagnostic==lt.diagnostic?Nt.dom.hasAttribute("aria-selected")||(Nt.dom.setAttribute("aria-selected","true"),Tt=Nt):Nt.dom.hasAttribute("aria-selected")&&Nt.dom.removeAttribute("aria-selected"),ft++});ft<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)St=!0,this.items.pop();this.items.length==0&&(this.items.push(new PanelItem(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),St=!0),Tt?(this.list.setAttribute("aria-activedescendant",Tt.id),this.view.requestMeasure({key:this,read:()=>({sel:Tt.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:Ct,panel:At})=>{Ct.top<At.top?this.list.scrollTop-=At.top-Ct.top:Ct.bottom>At.bottom&&(this.list.scrollTop+=Ct.bottom-At.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),St&&this.sync()}sync(){let $=this.list.firstChild;function lt(){let ft=$;$=ft.nextSibling,ft.remove()}for(let ft of this.items)if(ft.dom.parentNode==this.list){for(;$!=ft.dom;)lt();$=ft.dom.nextSibling}else this.list.insertBefore(ft.dom,$);for(;$;)lt()}moveSelection($){if(this.selectedIndex<0)return;let lt=this.view.state.field(lintState),ft=findDiagnostic(lt.diagnostics,this.items[$].diagnostic);ft&&this.view.dispatch({selection:{anchor:ft.from,head:ft.to},scrollIntoView:!0,effects:movePanelSelection.of(ft)})}static open($){return new LintPanel($)}}function svg(dt,$='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${$}>${encodeURIComponent(dt)}</svg>')`}function underline(dt){return svg(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${dt}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const baseTheme=EditorView.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:underline("#d11")},".cm-lintRange-warning":{backgroundImage:underline("orange")},".cm-lintRange-info":{backgroundImage:underline("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});var basicSetup=function dt($){$===void 0&&($={});var lt=[];$.closeBracketsKeymap!==!1&&(lt=lt.concat(closeBracketsKeymap)),$.defaultKeymap!==!1&&(lt=lt.concat(defaultKeymap)),$.searchKeymap!==!1&&(lt=lt.concat(searchKeymap)),$.historyKeymap!==!1&&(lt=lt.concat(historyKeymap)),$.foldKeymap!==!1&&(lt=lt.concat(foldKeymap)),$.completionKeymap!==!1&&(lt=lt.concat(completionKeymap)),$.lintKeymap!==!1&&(lt=lt.concat(lintKeymap));var ft=[];return $.lineNumbers!==!1&&ft.push(lineNumbers()),$.highlightActiveLineGutter!==!1&&ft.push(highlightActiveLineGutter()),$.highlightSpecialChars!==!1&&ft.push(highlightSpecialChars()),$.history!==!1&&ft.push(history()),$.foldGutter!==!1&&ft.push(foldGutter()),$.drawSelection!==!1&&ft.push(drawSelection()),$.dropCursor!==!1&&ft.push(dropCursor()),$.allowMultipleSelections!==!1&&ft.push(EditorState.allowMultipleSelections.of(!0)),$.indentOnInput!==!1&&ft.push(indentOnInput()),$.syntaxHighlighting!==!1&&ft.push(syntaxHighlighting(defaultHighlightStyle,{fallback:!0})),$.bracketMatching!==!1&&ft.push(bracketMatching()),$.closeBrackets!==!1&&ft.push(closeBrackets()),$.autocompletion!==!1&&ft.push(autocompletion()),$.rectangularSelection!==!1&&ft.push(rectangularSelection()),$.crosshairCursor!==!1&&ft.push(crosshairCursor()),$.highlightActiveLine!==!1&&ft.push(highlightActiveLine()),$.highlightSelectionMatches!==!1&&ft.push(highlightSelectionMatches()),$.tabSize&&typeof $.tabSize=="number"&&ft.push(indentUnit.of(" ".repeat($.tabSize))),ft.concat([keymap.of(lt.flat())]).filter(Boolean)};const chalky="#e5c07b",coral="#e06c75",cyan="#56b6c2",invalid="#ffffff",ivory="#abb2bf",stone="#7d8799",malibu="#61afef",sage="#98c379",whiskey="#d19a66",violet="#c678dd",darkBackground="#21252b",highlightBackground="#2c313a",background="#282c34",tooltipBackground="#353a42",selection="#3E4451",cursor="#528bff",oneDarkTheme=EditorView.theme({"&":{color:ivory,backgroundColor:background},".cm-content":{caretColor:cursor},".cm-cursor, .cm-dropCursor":{borderLeftColor:cursor},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:selection},".cm-panels":{backgroundColor:darkBackground,color:ivory},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:background,color:stone,border:"none"},".cm-activeLineGutter":{backgroundColor:highlightBackground},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:tooltipBackground},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:tooltipBackground,borderBottomColor:tooltipBackground},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:highlightBackground,color:ivory}}},{dark:!0}),oneDarkHighlightStyle=HighlightStyle.define([{tag:tags.keyword,color:violet},{tag:[tags.name,tags.deleted,tags.character,tags.propertyName,tags.macroName],color:coral},{tag:[tags.function(tags.variableName),tags.labelName],color:malibu},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:whiskey},{tag:[tags.definition(tags.name),tags.separator],color:ivory},{tag:[tags.typeName,tags.className,tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:chalky},{tag:[tags.operator,tags.operatorKeyword,tags.url,tags.escape,tags.regexp,tags.link,tags.special(tags.string)],color:cyan},{tag:[tags.meta,tags.comment],color:stone},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.link,color:stone,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:coral},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:whiskey},{tag:[tags.processingInstruction,tags.string,tags.inserted],color:sage},{tag:tags.invalid,color:invalid}]),oneDark=[oneDarkTheme,syntaxHighlighting(oneDarkHighlightStyle)];var getStatistics=dt=>({line:dt.state.doc.lineAt(dt.state.selection.main.from),lineCount:dt.state.doc.lines,lineBreak:dt.state.lineBreak,length:dt.state.doc.length,readOnly:dt.state.readOnly,tabSize:dt.state.tabSize,selection:dt.state.selection,selectionAsSingle:dt.state.selection.asSingle().main,ranges:dt.state.selection.ranges,selectionCode:dt.state.sliceDoc(dt.state.selection.main.from,dt.state.selection.main.to),selections:dt.state.selection.ranges.map($=>dt.state.sliceDoc($.from,$.to)),selectedText:dt.state.selection.ranges.some($=>!$.empty)}),External=Annotation.define();function useCodeMirror(dt){var{value:$,selection:lt,onChange:ft,onStatistics:St,onCreateEditor:Tt,onUpdate:Ct,extensions:At=[],autoFocus:Rt,theme:kt="light",height:Nt="",minHeight:Bt="",maxHeight:Ut="",placeholder:zt="",width:Zt="",minWidth:ln="",maxWidth:cn="",editable:hn=!0,readOnly:pn=!1,indentWithTab:dn=!0,basicSetup:gn=!0,root:vn,initialState:Tn}=dt,[Cn,$n]=reactExports.useState(),[xn,Rn]=reactExports.useState(),[Pn,Nn]=reactExports.useState(),Wn=EditorView.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),zn=EditorView.theme({"&":{height:Nt,minHeight:Bt,maxHeight:Ut,width:Zt,minWidth:ln,maxWidth:cn}}),Yn=EditorView.updateListener.of(nr=>{if(nr.docChanged&&typeof ft=="function"&&!nr.transactions.some(Vn=>Vn.annotation(External))){var Ln=nr.state.doc,Un=Ln.toString();ft(Un,nr)}St&&St(getStatistics(nr))}),Qn=[Yn,zn];switch(dn&&Qn.unshift(keymap.of([indentWithTab])),gn&&(typeof gn=="boolean"?Qn.unshift(basicSetup()):Qn.unshift(basicSetup(gn))),zt&&Qn.unshift(placeholder(zt)),kt){case"light":Qn.push(Wn);break;case"dark":Qn.push(oneDark);break;case"none":break;default:Qn.push(kt);break}return hn===!1&&Qn.push(EditorView.editable.of(!1)),pn&&Qn.push(EditorState.readOnly.of(!0)),Ct&&typeof Ct=="function"&&Qn.push(EditorView.updateListener.of(Ct)),Qn=Qn.concat(At),reactExports.useEffect(()=>{if(Cn&&!Pn){var nr={doc:$,selection:lt,extensions:Qn},Ln=Tn?EditorState.fromJSON(Tn.json,nr,Tn.fields):EditorState.create(nr);if(Nn(Ln),!xn){var Un=new EditorView({state:Ln,parent:Cn,root:vn});Rn(Un),Tt&&Tt(Un,Ln)}}return()=>{xn&&(Nn(void 0),Rn(void 0))}},[Cn,Pn]),reactExports.useEffect(()=>$n(dt.container),[dt.container]),reactExports.useEffect(()=>()=>{xn&&(xn.destroy(),Rn(void 0))},[xn]),reactExports.useEffect(()=>{Rt&&xn&&xn.focus()},[Rt,xn]),reactExports.useEffect(()=>{xn&&xn.dispatch({effects:StateEffect.reconfigure.of(Qn)})},[kt,At,Nt,Bt,Ut,Zt,ln,cn,zt,hn,pn,dn,gn,ft,Ct]),reactExports.useEffect(()=>{if($!==void 0){var nr=xn?xn.state.doc.toString():"";xn&&$!==nr&&xn.dispatch({changes:{from:0,to:nr.length,insert:$||""},annotations:[External.of(!0)]})}},[$,xn]),{state:Pn,setState:Nn,view:xn,setView:Rn,container:Cn,setContainer:$n}}var _excluded=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],ReactCodeMirror=reactExports.forwardRef((dt,$)=>{var{className:lt,value:ft="",selection:St,extensions:Tt=[],onChange:Ct,onStatistics:At,onCreateEditor:Rt,onUpdate:kt,autoFocus:Nt,theme:Bt="light",height:Ut,minHeight:zt,maxHeight:Zt,width:ln,minWidth:cn,maxWidth:hn,basicSetup:pn,placeholder:dn,indentWithTab:gn,editable:vn,readOnly:Tn,root:Cn,initialState:$n}=dt,xn=_objectWithoutPropertiesLoose(dt,_excluded),Rn=reactExports.useRef(null),{state:Pn,view:Nn,container:Wn,setContainer:zn}=useCodeMirror({container:Rn.current,root:Cn,value:ft,autoFocus:Nt,theme:Bt,height:Ut,minHeight:zt,maxHeight:Zt,width:ln,minWidth:cn,maxWidth:hn,basicSetup:pn,placeholder:dn,indentWithTab:gn,editable:vn,readOnly:Tn,selection:St,onChange:Ct,onStatistics:At,onCreateEditor:Rt,onUpdate:kt,extensions:Tt,initialState:$n});if(reactExports.useImperativeHandle($,()=>({editor:Rn.current,state:Pn,view:Nn}),[Rn,Wn,Pn,Nn]),typeof ft!="string")throw new Error("value must be typeof string but got "+typeof ft);var Yn=typeof Bt=="string"?"cm-theme-"+Bt:"cm-theme";return jsx("div",_extends({ref:Rn,className:""+Yn+(lt?" "+lt:"")},xn))});ReactCodeMirror.displayName="CodeMirror";const BlockPythonCodePanel=()=>{const dt=useRobartState(lt=>lt.editingBlockId),$=useRobartState(lt=>lt.blocks[dt??""]);return jsx("div",{className:"h-full w-full",children:jsx(ReactCodeMirror,{value:$==null?void 0:$.python,className:"h-full w-full",extensions:[python()],readOnly:!0})})},Simulation=()=>{const dt=reactExports.useRef(null),$=useSimulator(ft=>ft.robots);useSimulator(ft=>ft.updateTrajectory),useSimulator(ft=>ft.robotGoTo),useSimulator(ft=>ft.setRobots);const lt=useSimulator(ft=>ft.step);return useFrame(({clock:ft})=>{lt()}),jsxs(Fragment,{children:[jsx("color",{attach:"background",args:["black"]}),jsx(OrbitControls,{maxPolarAngle:Math.PI*(1/2-1/20),minPolarAngle:0,minDistance:5,maxDistance:20}),jsx(GizmoHelper,{alignment:"bottom-right",margin:[80,80],children:jsx(GizmoViewport,{axisColors:["#9d4b4b","#2f7f4f","#3b5b9d"],labelColor:"white"})}),jsx(Grid,{position:[0,-.001,0],args:[10.5,10.5],cellSize:1,cellThickness:1,cellColor:"black",fadeDistance:50,fadeStrength:1.2,infiniteGrid:!0}),jsx(Plane,{args:[1e3,1e3],rotation:[-Math.PI/2,0,0],position:[0,-.02,0],children:jsx("meshStandardMaterial",{color:"black"})}),Object.values($).map(ft=>jsxs("group",{ref:dt,position:ft.pos,children:[jsx(Crazyflie,{}),jsxs(Sphere,{position:[0,-.05,0],scale:.1,castShadow:!1,receiveShadow:!1,children:[jsx("meshDistanceMaterial",{}),jsx("pointLight",{position:[0,0,0],intensity:1,color:"white"})]})]},ft.id))]})},SimulationPanel=()=>jsx("div",{className:"h-full w-full",children:jsx(Canvas,{children:jsx(Simulation,{})})}),noSemi=302,incdec=1,incdecPrefix=2,insertSemi=303,spaces=305,newline=306,LineComment=3,BlockComment=4,space=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],braceR=125,semicolon=59,slash=47,star=42,plus=43,minus=45,trackNewline=new ContextTracker({start:!1,shift(dt,$){return $==LineComment||$==BlockComment||$==spaces?dt:$==newline},strict:!1}),insertSemicolon=new ExternalTokenizer((dt,$)=>{let{next:lt}=dt;(lt==braceR||lt==-1||$.context)&&$.canShift(insertSemi)&&dt.acceptToken(insertSemi)},{contextual:!0,fallback:!0}),noSemicolon=new ExternalTokenizer((dt,$)=>{let{next:lt}=dt,ft;space.indexOf(lt)>-1||lt==slash&&((ft=dt.peek(1))==slash||ft==star)||lt!=braceR&&lt!=semicolon&&lt!=-1&&!$.context&&$.canShift(noSemi)&&dt.acceptToken(noSemi)},{contextual:!0}),incdecToken=new ExternalTokenizer((dt,$)=>{let{next:lt}=dt;if((lt==plus||lt==minus)&&(dt.advance(),lt==dt.next)){dt.advance();let ft=!$.context&&$.canShift(incdec);dt.acceptToken(ft?incdec:incdecPrefix)}},{contextual:!0}),jsHighlight=styleTags({"get set async static":tags.modifier,"for while do if else switch try catch finally return throw break continue default case":tags.controlKeyword,"in of await yield void typeof delete instanceof":tags.operatorKeyword,"let var const function class extends":tags.definitionKeyword,"import export from":tags.moduleKeyword,"with debugger as new":tags.keyword,TemplateString:tags.special(tags.string),super:tags.atom,BooleanLiteral:tags.bool,this:tags.self,null:tags.null,Star:tags.modifier,VariableName:tags.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":tags.function(tags.variableName),VariableDefinition:tags.definition(tags.variableName),Label:tags.labelName,PropertyName:tags.propertyName,PrivatePropertyName:tags.special(tags.propertyName),"CallExpression/MemberExpression/PropertyName":tags.function(tags.propertyName),"FunctionDeclaration/VariableDefinition":tags.function(tags.definition(tags.variableName)),"ClassDeclaration/VariableDefinition":tags.definition(tags.className),PropertyDefinition:tags.definition(tags.propertyName),PrivatePropertyDefinition:tags.definition(tags.special(tags.propertyName)),UpdateOp:tags.updateOperator,LineComment:tags.lineComment,BlockComment:tags.blockComment,Number:tags.number,String:tags.string,Escape:tags.escape,ArithOp:tags.arithmeticOperator,LogicOp:tags.logicOperator,BitOp:tags.bitwiseOperator,CompareOp:tags.compareOperator,RegExp:tags.regexp,Equals:tags.definitionOperator,Arrow:tags.function(tags.punctuation),": Spread":tags.punctuation,"( )":tags.paren,"[ ]":tags.squareBracket,"{ }":tags.brace,"InterpolationStart InterpolationEnd":tags.special(tags.brace),".":tags.derefOperator,", ;":tags.separator,"@":tags.meta,TypeName:tags.typeName,TypeDefinition:tags.definition(tags.typeName),"type enum interface implements namespace module declare":tags.definitionKeyword,"abstract global Privacy readonly override":tags.modifier,"is keyof unique infer":tags.operatorKeyword,JSXAttributeValue:tags.attributeValue,JSXText:tags.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":tags.angleBracket,"JSXIdentifier JSXNameSpacedName":tags.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":tags.attributeName,"JSXBuiltin/JSXIdentifier":tags.standard(tags.tagName)}),spec_identifier={__proto__:null,export:14,as:19,from:27,default:30,async:35,function:36,extends:46,this:50,true:58,false:58,null:70,void:74,typeof:78,super:96,new:130,delete:146,yield:155,await:159,class:164,public:221,private:221,protected:221,readonly:223,instanceof:242,satisfies:245,in:246,const:248,import:280,keyof:335,unique:339,infer:345,is:381,abstract:401,implements:403,type:405,let:408,var:410,interface:417,enum:421,namespace:427,module:429,declare:433,global:437,for:458,of:467,while:470,with:474,do:478,if:482,else:484,switch:488,case:494,try:500,catch:504,finally:508,return:512,throw:516,break:520,continue:524,debugger:528},spec_word={__proto__:null,async:117,get:119,set:121,declare:181,public:183,private:183,protected:183,static:185,abstract:187,override:189,readonly:195,accessor:197,new:385},spec_LessThan={__proto__:null,"<":137},parser=LRParser.deserialize({version:14,states:"$EnO`QUOOO%QQUOOO'TQWOOP(bOSOOO*pQ(CjO'#CfO*wOpO'#CgO+VO!bO'#CgO+eO07`O'#DZO-vQUO'#DaO.WQUO'#DlO%QQUO'#DvO0_QUO'#EOOOQ(CY'#EW'#EWO0uQSO'#ETOOQO'#I`'#I`O0}QSO'#GkOOQO'#Ei'#EiO1YQSO'#EhO1_QSO'#EhO3aQ(CjO'#JcO6QQ(CjO'#JdO6nQSO'#FWO6sQ#tO'#FoOOQ(CY'#F`'#F`O7OO&jO'#F`O7^Q,UO'#FvO8tQSO'#FuOOQ(CY'#Jd'#JdOOQ(CW'#Jc'#JcOOQQ'#J}'#J}O8yQSO'#IPO9OQ(C[O'#IQOOQQ'#JP'#JPOOQQ'#IU'#IUQ`QUOOO%QQUO'#DnO9WQUO'#DzO%QQUO'#D|O9_QSO'#GkO9dQ,UO'#ClO9rQSO'#EgO9}QSO'#ErO:SQ,UO'#F_O:qQSO'#GkO:vQSO'#GoO;RQSO'#GoO;aQSO'#GrO;aQSO'#GsO;aQSO'#GuO9_QSO'#GxO<QQSO'#G{O=cQSO'#CbO=sQSO'#HYO={QSO'#H`O={QSO'#HbO`QUO'#HdO={QSO'#HfO={QSO'#HiO>QQSO'#HoO>VQ(C]O'#HuO%QQUO'#HwO>bQ(C]O'#HyO>mQ(C]O'#H{O9OQ(C[O'#H}O>xQ(CjO'#CfO?zQWO'#DfQOQSOOO@bQSO'#EPO9dQ,UO'#EgO@mQSO'#EgO@xQ`O'#F_OOQQ'#Cd'#CdOOQ(CW'#Dk'#DkOOQ(CW'#Jg'#JgO%QQUO'#JgOBUQWO'#E`OOQ(CW'#E_'#E_OB`Q(C`O'#E`OBzQWO'#ESOOQO'#Jj'#JjOC`QWO'#ESOCmQWO'#E`ODTQWO'#EfODWQWO'#E`ODqQWO'#E`OAQQWO'#E`OBzQWO'#E`PEbO?MpO'#C`POOO)CDn)CDnOOOO'#IV'#IVOEmOpO,59ROOQ(CY,59R,59ROOOO'#IW'#IWOE{O!bO,59RO%QQUO'#D]OOOO'#IY'#IYOFZO07`O,59uOOQ(CY,59u,59uOFiQUO'#IZOF|QSO'#JeOIOQbO'#JeO+sQUO'#JeOIVQSO,59{OImQSO'#EiOIzQSO'#JrOJVQSO'#JqOJVQSO'#JqOJ_QSO,5;VOJdQSO'#JpOOQ(CY,5:W,5:WOJkQUO,5:WOLlQ(CjO,5:bOM]QSO,5:jOMbQSO'#JnON[Q(C[O'#JoO:vQSO'#JnONcQSO'#JnONkQSO,5;UONpQSO'#JnOOQ(CY'#Cf'#CfO%QQUO'#EOO! dQ`O,5:oOOQO'#Jk'#JkOOQO-E<^-E<^O9_QSO,5=VO! zQSO,5=VO!!PQUO,5;SO!$SQ,UO'#EdO!%gQSO,5;SO!'PQ,UO'#DpO!'WQUO'#DuO!'bQWO,5;]O!'jQWO,5;]O%QQUO,5;]OOQQ'#FO'#FOOOQQ'#FQ'#FQO%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^O%QQUO,5;^OOQQ'#FU'#FUO!'xQUO,5;oOOQ(CY,5;t,5;tOOQ(CY,5;u,5;uO!){QSO,5;uOOQ(CY,5;v,5;vO%QQUO'#IfO!*TQ(C[O,5<cO!$SQ,UO,5;^O!*rQ,UO,5;^O%QQUO,5;rO!*yQ#tO'#FeO!+vQ#tO'#JvO!+bQ#tO'#JvO!+}Q#tO'#JvOOQO'#Jv'#JvO!,cQ#tO,5;}OOOO,5<Z,5<ZO!,tQUO'#FqOOOO'#Ie'#IeO7OO&jO,5;zO!,{Q#tO'#FsOOQ(CY,5;z,5;zO!-lQ7[O'#CrOOQ(CY'#Cv'#CvO!.PQSO'#CvO!.UO07`O'#CzO!.rQ,UO,5<`O!.yQSO,5<bO!0`QMhO'#GQO!0mQSO'#GRO!0rQSO'#GRO!0wQMhO'#GVO!1vQWO'#GZO!2iQ7[O'#J^OOQ(CY'#J^'#J^O!2sQSO'#J]O!3RQSO'#J[O!3ZQSO'#CqOOQ(CY'#Ct'#CtOOQ(CY'#DO'#DOOOQ(CY'#DQ'#DQO0xQSO'#DSO!%lQ,UO'#FxO!%lQ,UO'#FzO!3cQSO'#F|O!3hQSO'#F}O!0rQSO'#GTO!%lQ,UO'#GYO!3mQSO'#EjO!4XQSO,5<aO`QUO,5>kOOQQ'#JX'#JXOOQQ,5>l,5>lOOQQ-E<S-E<SO!6WQ(CjO,5:YO!8tQ(CjO,5:fO%QQUO,5:fO!;_Q(CjO,5:hOOQ(CW'#Co'#CoO!<OQ,UO,5=VO!<^Q(C[O'#JYO8tQSO'#JYO!<oQ(C[O,59WO!<zQWO,59WO!=SQ,UO,59WO9dQ,UO,59WO!=_QSO,5;SO!=gQSO'#HXO!=xQSO'#KRO%QQUO,5;wO!>QQWO,5;yO!>VQSO,5=rO!>[QSO,5=rO!>aQSO,5=rO9OQ(C[O,5=rO!>oQSO'#EkO!?iQWO'#ElOOQ(CW'#Jp'#JpO!?pQ(C[O'#KOO9OQ(C[O,5=ZO;aQSO,5=aOOQO'#Cr'#CrO!?{QWO,5=^O!@TQ,UO,5=_O!@`QSO,5=aO!@eQ`O,5=dO>QQSO'#G}O9_QSO'#HPO!@mQSO'#HPO9dQ,UO'#HSO!@rQSO'#HSOOQQ,5=g,5=gO!@wQSO'#HTO!APQSO'#ClO!AUQSO,58|O!A`QSO,58|O!ChQUO,58|OOQQ,58|,58|O!CuQ(C[O,58|O%QQUO,58|O!DQQUO'#H[OOQQ'#H]'#H]OOQQ'#H^'#H^O`QUO,5=tO!DbQSO,5=tO`QUO,5=zO`QUO,5=|O!DgQSO,5>OO`QUO,5>QO!DlQSO,5>TO!DqQUO,5>ZOOQQ,5>a,5>aO%QQUO,5>aO9OQ(C[O,5>cOOQQ,5>e,5>eO!HxQSO,5>eOOQQ,5>g,5>gO!HxQSO,5>gOOQQ,5>i,5>iO!H}QWO'#DXO%QQUO'#JgO!IlQWO'#JgO!JZQWO'#DgO!JlQWO'#DgO!L}QUO'#DgO!MUQSO'#JfO!M^QSO,5:QO!McQSO'#EmO!MqQSO'#JsO!MyQSO,5;WO!NOQWO'#DgO!N]QWO'#EROOQ(CY,5:k,5:kO%QQUO,5:kO!NdQSO,5:kO>QQSO,5;RO!<zQWO,5;RO!=SQ,UO,5;RO9dQ,UO,5;RO!NlQSO,5@RO!NqQ!LQO,5:oO# wQ(C`O,5:zOBzQWO,5:nO#!cQWO,5:nO#!pQWO,5:zO##WQWO,5:zO##qQWO,5:zO#$bQWO,5:zOBzQWO,5:zO!<oQ(C[O,5:nOOQ(CW'#Ec'#EcOOQO,5:z,5:zO%QQUO,5:zO#%UQ(C[O,5:zO#%aQ(C[O,5:zO!<zQWO,5:nOOQO,5;Q,5;QO#%oQ(C[O,5:zPOOO'#IT'#ITP#&TO?MpO,58zPOOO,58z,58zOOOO-E<T-E<TOOQ(CY1G.m1G.mOOOO-E<U-E<UO#&`Q`O,59wOOOO-E<W-E<WOOQ(CY1G/a1G/aO#&eQbO,5>uO+sQUO,5>uOOQO,5>{,5>{O#&oQUO'#IZOOQO-E<X-E<XO#&|QSO,5@PO#'UQbO,5@PO#']QSO,5@]OOQ(CY1G/g1G/gO%QQUO,5@^O#'eQSO'#IaOOQO-E<_-E<_O#']QSO,5@]OOQ(CW1G0q1G0qOOQ(CY1G/r1G/rOOQ(CY1G0U1G0UO#'yQSO,5@YO:vQSO,5@YO#(RQSO,5@YO%QQUO,5@ZO#(aQ(C[O,5@ZO#(rQ(C[O,5@ZO#(yQSO'#IcO#'yQSO,5@YOOQ(CW1G0p1G0pO!'bQWO,5:qO!'mQWO,5:qOOQO,5:s,5:sO#)hQSO,5:sO#)pQ,UO1G2qO9_QSO1G2qOOQ(CY1G0n1G0nO#*OQ(CjO1G0nO#+TQ(ChO,5;OOOQ(CY'#GP'#GPO#+qQ(CjO'#J^O!!PQUO1G0nO#-yQ,UO'#JhO#.TQSO,5:[O#.YQbO'#JiO%QQUO'#JiO#.dQSO,5:aOOQ(CY'#DX'#DXOOQ(CY1G0w1G0wO%QQUO1G0wOOQ(CY1G1a1G1aO#.iQSO1G0wO#1QQ(CjO1G0xO#1XQ(CjO1G0xO#3rQ(CjO1G0xO#3yQ(CjO1G0xO#6TQ(CjO1G0xO#6kQ(CjO1G0xO#9eQ(CjO1G0xO#9lQ(CjO1G0xO#<VQ(CjO1G0xO#<^Q(CjO1G0xO#>UQ(CjO1G0xO#AUQ$IUO'#CfO#CSQ$IUO1G1ZO#EQQ$IUO'#JdO!*OQSO1G1aO#EeQ(CjO,5?QOOQ(CW-E<d-E<dO#FXQ(CjO1G0xOOQ(CY1G0x1G0xO#HdQ(CjO1G1^O#IWQ#tO,5<RO#I`Q#tO,5<SO#IhQ#tO'#FjO#JPQSO'#FiOOQO'#Jw'#JwOOQO'#Id'#IdO#JUQ#tO1G1iOOQ(CY1G1i1G1iOOOO1G1t1G1tO#JgQ$IUO'#JcO#JqQSO,5<]O!'xQUO,5<]OOOO-E<c-E<cOOQ(CY1G1f1G1fO#JvQWO'#JvOOQ(CY,5<_,5<_O#KOQWO,5<_OOQ(CY,59b,59bO!$SQ,UO'#C|OOOO'#IX'#IXO#KTO07`O,59fOOQ(CY,59f,59fO%QQUO1G1zO!3hQSO'#IhO#K`QSO,5<sOOQ(CY,5<p,5<pOOQO'#Gf'#GfO!%lQ,UO,5=POOQO'#Gh'#GhO!%lQ,UO,5=RO!$SQ,UO,5=TOOQO1G1|1G1|O#KnQ`O'#CoO#LRQ`O,5<lO#LYQSO'#JzO9_QSO'#JzO#LhQSO,5<nO!%lQ,UO,5<mO#LmQSO'#GSO#LxQSO,5<mO#L}Q`O'#GPO#M[Q`O'#J{O#MfQSO'#J{O!$SQ,UO'#J{O#MkQSO,5<qO#MpQWO'#G[O!1qQWO'#G[O#NRQSO'#G^O#NWQSO'#G`O!0rQSO'#GcO#N]Q(C[O'#IjO#NhQWO,5<uOOQ(CY,5<u,5<uO#NoQWO'#G[O#N}QWO'#G]O$ VQWO'#G]OOQ(CY,5=U,5=UO!%lQ,UO,5?wO!%lQ,UO,5?wO$ [QSO'#IkO$ gQSO,5?vO$ oQSO,59]O$!`Q,UO,59nOOQ(CY,59n,59nO$#RQ,UO,5<dO$#tQ,UO,5<fO?rQSO,5<hOOQ(CY,5<i,5<iO$$OQSO,5<oO$$TQ,UO,5<tO!!PQUO1G1{O$$eQSO1G1{OOQQ1G4V1G4VOOQ(CY1G/t1G/tO!){QSO1G/tO$&dQ(CjO1G0QOOQQ1G2q1G2qO!$SQ,UO1G2qO%QQUO1G2qO$'TQSO1G2qO$'`Q,UO'#EdOOQ(CW,5?t,5?tO$'jQ(C[O,5?tOOQQ1G.r1G.rO!<oQ(C[O1G.rO!<zQWO1G.rO!=SQ,UO1G.rO$'{QSO1G0nO$(QQSO'#CfO$(]QSO'#KSO$(eQSO,5=sO$(jQSO'#KSO$(oQSO'#KSO$(zQSO'#IsO$)YQSO,5@mO$)bQbO1G1cOOQ(CY1G1e1G1eO9_QSO1G3^O?rQSO1G3^O$)iQSO1G3^O$)nQSO1G3^OOQQ1G3^1G3^O:vQSO'#JqO:vQSO'#EmO%QQUO'#EmO:vQSO'#ImO$)sQ(C[O,5@jOOQQ1G2u1G2uO!@`QSO1G2{O!$SQ,UO1G2xO$*OQSO1G2xOOQQ1G2y1G2yO!$SQ,UO1G2yO$*TQSO1G2yO$*]QWO'#GwOOQQ1G2{1G2{O!1qQWO'#IoO!@eQ`O1G3OOOQQ1G3O1G3OOOQQ,5=i,5=iO$*eQ,UO,5=kO9_QSO,5=kO#NWQSO,5=nO8tQSO,5=nO!<zQWO,5=nO!=SQ,UO,5=nO9dQ,UO,5=nO$*sQSO'#KQO$+OQSO,5=oOOQQ1G.h1G.hO$+TQ(C[O1G.hO?rQSO1G.hO$+`QSO1G.hO9OQ(C[O1G.hO$+kQbO,5@oO$,OQSO,5@oO$,ZQUO,5=vO$,bQSO,5=vO:vQSO,5@oOOQQ1G3`1G3`O`QUO1G3`OOQQ1G3f1G3fOOQQ1G3h1G3hO={QSO1G3jO$,gQUO1G3lO$0hQUO'#HkOOQQ1G3o1G3oO$0uQSO'#HqO>QQSO'#HsOOQQ1G3u1G3uO$0}QUO1G3uO9OQ(C[O1G3{OOQQ1G3}1G3}OOQ(CW'#GW'#GWO9OQ(C[O1G4PO9OQ(C[O1G4RO$5RQSO,5@RO!'xQUO,5;XO:vQSO,5;XO>QQSO,5:RO!'xQUO,5:RO!<zQWO,5:RO$5WQ$IUO,5:ROOQO,5;X,5;XO$5bQWO'#I[O$5xQSO,5@QOOQ(CY1G/l1G/lO$6QQWO'#IbO$6[QSO,5@_OOQ(CW1G0r1G0rO!JlQWO,5:ROOQO'#I_'#I_O$6dQWO,5:mOOQ(CY,5:m,5:mO!NgQSO1G0VOOQ(CY1G0V1G0VO%QQUO1G0VOOQ(CY1G0m1G0mO>QQSO1G0mO!<zQWO1G0mO!=SQ,UO1G0mOOQ(CW1G5m1G5mO!<oQ(C[O1G0YOOQO1G0f1G0fO%QQUO1G0fO$6kQ(C[O1G0fO$6vQ(C[O1G0fO!<zQWO1G0YOBzQWO1G0YO$7UQ(C`O1G0fO$7pQWO1G0YOBzQWO1G0fO$7}QWO1G0fO$8eQWO1G0fO$9OQWO1G0fO$9oQ(C[O1G0fOOQO1G0Y1G0YO$:TQ(CjO1G0fPOOO-E<R-E<RPOOO1G.f1G.fOOOO1G/c1G/cO$:_Q`O,5<cO$:gQbO1G4aOOQO1G4g1G4gO%QQUO,5>uO$:qQSO1G5kO$:yQSO1G5wO$;RQbO1G5xO:vQSO,5>{O$;]QSO1G5tO$;]QSO1G5tO:vQSO1G5tO$;eQ(CjO1G5uO%QQUO1G5uO$;uQ(C[O1G5uO$<WQSO,5>}O:vQSO,5>}OOQO,5>},5>}O$<lQSO,5>}OOQO-E<a-E<aOOQO1G0]1G0]OOQO1G0_1G0_O!*OQSO1G0_OOQQ7+(]7+(]O!$SQ,UO7+(]O%QQUO7+(]O$<zQSO7+(]O$=VQ,UO7+(]O$=eQ(CjO,59nO$?mQ(CjO,5<dO$AxQ(CjO,5<fO$DTQ(CjO,5<tOOQ(CY7+&Y7+&YO$FfQ(CjO7+&YO$GYQ,UO'#I]O$GdQSO,5@SOOQ(CY1G/v1G/vO$GlQUO'#I^O$GyQSO,5@TO$HRQbO,5@TOOQ(CY1G/{1G/{O$H]QSO7+&cOOQ(CY7+&c7+&cO$HbQ$IUO,5:bO%QQUO7+&uO$HlQ$IUO,5:YO$HyQ$IUO,5:fO$ITQ$IUO,5:hOOQ(CY7+&{7+&{OOQO1G1m1G1mOOQO1G1n1G1nO$I_Q#tO,5<UO!'xQUO,5<TOOQO-E<b-E<bOOQ(CY7+'T7+'TOOOO7+'`7+'`OOOO1G1w1G1wO$IjQSO1G1wOOQ(CY1G1y1G1yO$IoQ`O,59hOOOO-E<V-E<VOOQ(CY1G/Q1G/QO$IvQ(CjO7+'fOOQ(CY,5?S,5?SO$JjQSO,5?SOOQ(CY1G2_1G2_P$JoQSO'#IhPOQ(CY-E<f-E<fO$KcQ,UO1G2kO$LUQ,UO1G2mO$L`Q`O1G2oOOQ(CY1G2W1G2WO$LgQSO'#IgO$LuQSO,5@fO$LuQSO,5@fO$L}QSO,5@fO$MYQSO,5@fOOQO1G2Y1G2YO$MhQ,UO1G2XO!%lQ,UO1G2XO$MxQMhO'#IiO$NYQSO,5@gO!$SQ,UO,5@gO$NbQ`O,5@gOOQ(CY1G2]1G2]OOQ(CW,5<v,5<vOOQ(CW,5<w,5<wO$NlQSO,5<wOBuQSO,5<wO!<zQWO,5<vOOQO'#G_'#G_O$NqQSO,5<xOOQ(CW,5<z,5<zO$NlQSO,5<}OOQO,5?U,5?UOOQO-E<h-E<hOOQ(CY1G2a1G2aO!1qQWO,5<vO$NyQSO,5<wO#NRQSO,5<xO!1qQWO,5<wO% UQ,UO1G5cO% `Q,UO1G5cOOQO,5?V,5?VOOQO-E<i-E<iOOQO1G.w1G.wO!>QQWO,59pO%QQUO,59pO% mQSO1G2SO!%lQ,UO1G2ZO% rQ(CjO7+'gOOQ(CY7+'g7+'gO!!PQUO7+'gOOQ(CY7+%`7+%`O%!fQ`O'#J|O!NgQSO7+(]O%!pQbO7+(]O$<}QSO7+(]O%!wQ(ChO'#CfO%#[Q(ChO,5<{O%#|QSO,5<{OOQ(CW1G5`1G5`OOQQ7+$^7+$^O!<oQ(C[O7+$^O!<zQWO7+$^O!!PQUO7+&YO%$RQSO'#IrO%$gQSO,5@nOOQO1G3_1G3_O9_QSO,5@nO%$gQSO,5@nO%$oQSO,5@nOOQO,5?_,5?_OOQO-E<q-E<qOOQ(CY7+&}7+&}O%$tQSO7+(xO9OQ(C[O7+(xO9_QSO7+(xO?rQSO7+(xO%$yQSO,5;XOOQ(CW,5?X,5?XOOQ(CW-E<k-E<kOOQQ7+(g7+(gO%%OQ(ChO7+(dO!$SQ,UO7+(dO%%YQ`O7+(eOOQQ7+(e7+(eO!$SQ,UO7+(eO%%aQSO'#KPO%%lQSO,5=cOOQO,5?Z,5?ZOOQO-E<m-E<mOOQQ7+(j7+(jO%&{QWO'#HQOOQQ1G3V1G3VO!$SQ,UO1G3VO%QQUO1G3VO%'SQSO1G3VO%'_Q,UO1G3VO9OQ(C[O1G3YO#NWQSO1G3YO8tQSO1G3YO!<zQWO1G3YO!=SQ,UO1G3YO%'mQSO'#IqO%'xQSO,5@lO%(QQWO,5@lOOQ(CW1G3Z1G3ZOOQQ7+$S7+$SO?rQSO7+$SO9OQ(C[O7+$SO%(]QSO7+$SO%QQUO1G6ZO%QQUO1G6[O%(bQUO1G3bO%(iQSO1G3bO%(nQUO1G3bO%(uQ(C[O1G6ZOOQQ7+(z7+(zO9OQ(C[O7+)UO`QUO7+)WOOQQ'#KV'#KVOOQQ'#It'#ItO%)PQUO,5>VOOQQ,5>V,5>VO%QQUO'#HlO%)^QSO'#HnOOQQ,5>],5>]O:vQSO,5>]OOQQ,5>_,5>_OOQQ7+)a7+)aOOQQ7+)g7+)gOOQQ7+)k7+)kOOQQ7+)m7+)mO%)cQWO1G5mO%)wQ$IUO1G0sO%*RQSO1G0sOOQO1G/m1G/mO%*^Q$IUO1G/mO>QQSO1G/mO!'xQUO'#DgOOQO,5>v,5>vOOQO-E<Y-E<YOOQO,5>|,5>|OOQO-E<`-E<`O!<zQWO1G/mOOQO-E<]-E<]OOQ(CY1G0X1G0XOOQ(CY7+%q7+%qO!NgQSO7+%qOOQ(CY7+&X7+&XO>QQSO7+&XO!<zQWO7+&XOOQO7+%t7+%tO$:TQ(CjO7+&QOOQO7+&Q7+&QO%QQUO7+&QO%*hQ(C[O7+&QO!<oQ(C[O7+%tO!<zQWO7+%tO%*sQ(C[O7+&QOBzQWO7+%tO%+RQ(C[O7+&QO%+gQ(C`O7+&QO%+qQWO7+%tOBzQWO7+&QO%,OQWO7+&QO%,fQWO7+&QO%-PQSO7++`O%-PQSO7++`O%-XQ(CjO7++aO%QQUO7++aOOQO1G4i1G4iO:vQSO1G4iO%-iQSO1G4iOOQO7+%y7+%yO!NgQSO<<KwO%!pQbO<<KwO%-wQSO<<KwOOQQ<<Kw<<KwO!$SQ,UO<<KwO%QQUO<<KwO%.PQSO<<KwO%.[Q(CjO1G2kO%0gQ(CjO1G2mO%2rQ(CjO1G2XO%5TQ,UO,5>wOOQO-E<Z-E<ZO%5_QbO,5>xO%QQUO,5>xOOQO-E<[-E<[O%5iQSO1G5oOOQ(CY<<I}<<I}O%5qQ$IUO1G0nO%7{Q$IUO1G0xO%8SQ$IUO1G0xO%:WQ$IUO1G0xO%:_Q$IUO1G0xO%<SQ$IUO1G0xO%<jQ$IUO1G0xO%>}Q$IUO1G0xO%?UQ$IUO1G0xO%AYQ$IUO1G0xO%AaQ$IUO1G0xO%CXQ$IUO1G0xO%ClQ(CjO<<JaO%DqQ$IUO1G0xO%FgQ$IUO'#J^O%HjQ$IUO1G1^O%HwQ$IUO1G0QO!'xQUO'#FlOOQO'#Jx'#JxOOQO1G1p1G1pO%IRQSO1G1oO%IWQ$IUO,5?QOOOO7+'c7+'cOOOO1G/S1G/SOOQ(CY1G4n1G4nO!%lQ,UO7+(ZO%IbQSO,5?RO9_QSO,5?ROOQO-E<e-E<eO%IpQSO1G6QO%IpQSO1G6QO%IxQSO1G6QO%JTQ,UO7+'sO%JeQ`O,5?TO%JoQSO,5?TO!$SQ,UO,5?TOOQO-E<g-E<gO%JtQ`O1G6RO%KOQSO1G6ROOQ(CW1G2c1G2cO$NlQSO1G2cOOQ(CW1G2b1G2bO%KWQSO1G2dO!$SQ,UO1G2dOOQ(CW1G2i1G2iO!<zQWO1G2bOBuQSO1G2cO%K]QSO1G2dO%KeQSO1G2cO!%lQ,UO7+*}OOQ(CY1G/[1G/[O%KpQSO1G/[OOQ(CY7+'n7+'nO%KuQ,UO7+'uO%LVQ(CjO<<KROOQ(CY<<KR<<KRO!$SQ,UO'#IlO%LyQSO,5@hO!$SQ,UO1G2gOOQQ<<Gx<<GxO!<oQ(C[O<<GxO%MRQ(CjO<<ItOOQ(CY<<It<<ItOOQO,5?^,5?^O%MuQSO,5?^O$(oQSO,5?^OOQO-E<p-E<pO%MzQSO1G6YO%MzQSO1G6YO9_QSO1G6YO?rQSO<<LdOOQQ<<Ld<<LdO%NSQSO<<LdO9OQ(C[O<<LdO%NXQSO1G0sOOQQ<<LO<<LOO%%OQ(ChO<<LOOOQQ<<LP<<LPO%%YQ`O<<LPO%N^QWO'#InO%NiQSO,5@kO!'xQUO,5@kOOQQ1G2}1G2}O%NqQ(C`O'#JgO& ]QUO'#JgO& dQWO'#E`O&!QQ(C[O'#E`OB`Q(C`O'#E`O(YQWO'#HROOQO'#Ip'#IpO9OQ(C[O'#IpO&!fQWO,5=lOOQQ,5=l,5=lO&#OQWO'#E`O& vQWO'#E`O&#VQWO'#E`O&#pQWO'#E`O& jQWO'#E`O&$aQWO'#HRO&$rQSO7+(qO&$wQSO7+(qOOQQ7+(q7+(qO!$SQ,UO7+(qO%QQUO7+(qO&%PQSO7+(qOOQQ7+(t7+(tO9OQ(C[O7+(tO#NWQSO7+(tO8tQSO7+(tO!<zQWO7+(tO&%[QSO,5?]OOQO-E<o-E<oOOQO'#HU'#HUO&%gQSO1G6WO9OQ(C[O<<GnOOQQ<<Gn<<GnO?rQSO<<GnO&%oQSO7++uO&%tQSO7++vOOQQ7+(|7+(|O&%yQSO7+(|O&&OQUO7+(|O&&VQSO7+(|O%QQUO7++uO%QQUO7++vOOQQ<<Lp<<LpOOQQ<<Lr<<LrOOQQ-E<r-E<rOOQQ1G3q1G3qO&&[QSO,5>WOOQQ,5>Y,5>YO&&aQSO1G3wO:vQSO7+&_O!'xQUO7+&_OOQO7+%X7+%XO&&fQ$IUO1G5xO>QQSO7+%XOOQ(CY<<I]<<I]OOQ(CY<<Is<<IsO>QQSO<<IsOOQO<<Il<<IlO$:TQ(CjO<<IlO%QQUO<<IlOOQO<<I`<<I`O!<oQ(C[O<<I`O&&pQ(C[O<<IlO!<zQWO<<I`O&&{Q(C[O<<IlOBzQWO<<I`O&'ZQ(C[O<<IlO&'oQ(C`O<<IlO&'yQWO<<I`OBzQWO<<IlO&(WQWO<<IlO&(nQSO<<NzO&(vQ(CjO<<N{OOQO7+*T7+*TO:vQSO7+*TOOQQANAcANAcO&)WQSOANAcO!$SQ,UOANAcO!NgQSOANAcO%!pQbOANAcO%QQUOANAcO&)`Q(CjO7+'sO&+qQ(CjO7+'uO&.SQbO1G4dO&.^Q$IUO7+&YO&.kQ$IUO,59nO&0nQ$IUO,5<dO&2qQ$IUO,5<fO&4tQ$IUO,5<tO&6jQ$IUO7+'fO&6wQ$IUO7+'gO&7UQSO,5<WOOQO7+'Z7+'ZO&7ZQ,UO<<KuOOQO1G4m1G4mO&7bQSO1G4mO&7mQSO1G4mO&7{QSO7++lO&7{QSO7++lO!$SQ,UO1G4oO&8TQ`O1G4oO&8_QSO7++mOOQ(CW7+'}7+'}O$NlQSO7+(OO&8gQ`O7+(OOOQ(CW7+'|7+'|O$NlQSO7+'}O&8nQSO7+(OO!$SQ,UO7+(OOBuQSO7+'}O&8sQ,UO<<NiOOQ(CY7+$v7+$vO&8}Q`O,5?WOOQO-E<j-E<jO&9XQ(ChO7+(ROOQQAN=dAN=dO9_QSO1G4xOOQO1G4x1G4xO&9iQSO1G4xO&9nQSO7++tO&9nQSO7++tO9OQ(C[OANBOO?rQSOANBOOOQQANBOANBOOOQQANAjANAjOOQQANAkANAkO&9vQSO,5?YOOQO-E<l-E<lO&:RQ$IUO1G6VO&:]Q(C[O,5=mO8tQSO,5=mO&<nQbO'#CfO&<xQWO,5:zO&=SQWO,5:zO&=aQWO,5:zO&=tQWO,5:zO!<zQWO,5=mOOQO,5?[,5?[OOQO-E<n-E<nOOQQ1G3W1G3WO& ]QUO,5<xO%NqQ(C`O,5=mO# wQ(C`O,5:zO(YQWO,5=mO&>[QWO,5=mO&>mQWO,5:zOOQQ<<L]<<L]O!$SQ,UO<<L]O&$rQSO<<L]O&?WQSO<<L]O%QQUO<<L]OOQQ<<L`<<L`O9OQ(C[O<<L`O#NWQSO<<L`O8tQSO<<L`O&?`QWO1G4wO&?kQSO7++rOOQQAN=YAN=YO9OQ(C[OAN=YOOQQ<= a<= aOOQQ<= b<= bOOQQ<<Lh<<LhO&?sQSO<<LhO&?xQUO<<LhO&@PQSO<= aO&@UQSO<= bOOQQ1G3r1G3rO>QQSO7+)cO&@ZQSO<<IyO&@fQ$IUO<<IyOOQO<<Hs<<HsOOQ(CYAN?_AN?_OOQOAN?WAN?WO$:TQ(CjOAN?WOOQOAN>zAN>zO%QQUOAN?WO!<oQ(C[OAN>zO&@pQ(C[OAN?WO!<zQWOAN>zO&@{Q(C[OAN?WOBzQWOAN>zO&AZQ(C[OAN?WO&AoQ(C`OAN?WO&AyQWOAN>zOBzQWOAN?WOOQO<<Mo<<MoOOQQG26}G26}O!$SQ,UOG26}O!NgQSOG26}O&BWQSOG26}O%!pQbOG26}O&B`Q$IUO<<JaO&BmQ$IUO1G2XO&DcQ$IUO1G2kO&FfQ$IUO1G2mO&HiQ$IUO<<KRO&HvQ$IUO<<ItOOQO1G1r1G1rO!%lQ,UOANAaOOQO7+*X7+*XO&ITQSO7+*XO&I`QSO<= WO&IhQ`O7+*ZOOQ(CW<<Kj<<KjO$NlQSO<<KjOOQ(CW<<Ki<<KiO&IrQ`O<<KjO$NlQSO<<KiOOQO7+*d7+*dO9_QSO7+*dO&IyQSO<= `OOQQG27jG27jO9OQ(C[OG27jO!'xQUO1G4tO&JRQSO7++qOOQO1G3X1G3XO9OQ(C[O1G3XO&:]Q(C[O1G3XO&JZQWO1G0fO&JeQWO1G0fO&JrQWO1G0fO8tQSO1G3XO!<zQWO1G3XO(YQWO1G3XO%NqQ(C`O1G3XO$7UQ(C`O1G0fO&KVQWO1G3XO&$rQSOANAwOOQQANAwANAwO!$SQ,UOANAwO&KhQSOANAwOOQQANAzANAzO9OQ(C[OANAzO#NWQSOANAzOOQO'#HV'#HVOOQO7+*c7+*cOOQQG22tG22tOOQQANBSANBSO&KpQSOANBSOOQQAND{AND{OOQQAND|AND|OOQQ<<L}<<L}O!'xQUOAN?eOOQOG24rG24rO$:TQ(CjOG24rOOQOG24fG24fO%QQUOG24rO!<oQ(C[OG24fO&KuQ(C[OG24rO!<zQWOG24fO&LQQ(C[OG24rOBzQWOG24fO&L`Q(C[OG24rO!NgQSOLD,iOOQQLD,iLD,iO!$SQ,UOLD,iO&LtQSOLD,iO&L|Q$IUO7+'sO&NrQ$IUO7+'uO'!hQ,UOG26{OOQO<<Ms<<MsOOQ(CWANAUANAUO$NlQSOANAUOOQ(CWANATANATOOQO<<NO<<NOOOQQLD-ULD-UO'!xQ$IUO7+*`OOQO7+(s7+(sO9OQ(C[O7+(sO'#SQWO7+&QO'#^QWO7+&QO&:]Q(C[O7+(sO8tQSO7+(sO!<zQWO7+(sO(YQWO7+(sOOQQG27cG27cO&$rQSOG27cO!$SQ,UOG27cOOQQG27fG27fO9OQ(C[OG27fOOQQG27nG27nO'#kQ$IUOG25POOQOLD*^LD*^O$:TQ(CjOLD*^OOQOLD*QLD*QO%QQUOLD*^O!<oQ(C[OLD*QO'#uQ(C[OLD*^O!<zQWOLD*QO'$QQ(C[OLD*^OOQQ!$(!T!$(!TO!NgQSO!$(!TO!$SQ,UO!$(!TO'$`Q(CjOG26{OOQ(CWG26pG26pOOQO<<L_<<L_O'&qQWO<<IlO9OQ(C[O<<L_O&:]Q(C[O<<L_O8tQSO<<L_O!<zQWO<<L_OOQQLD,}LD,}O&$rQSOLD,}OOQQLD-QLD-QOOQO!$'Mx!$'MxO$:TQ(CjO!$'MxOOQO!$'Ml!$'MlO%QQUO!$'MxO!<oQ(C[O!$'MlO'&{Q(C[O!$'MxOOQQ!)9Eo!)9EoO!NgQSO!)9EoOOQOANAyANAyO9OQ(C[OANAyO&:]Q(C[OANAyO8tQSOANAyOOQQ!$(!i!$(!iOOQO!)9Cd!)9CdO$:TQ(CjO!)9CdOOQO!)9CW!)9CWO%QQUO!)9CdOOQQ!.K;Z!.K;ZO''WQ$IUOG26{OOQOG27eG27eO9OQ(C[OG27eO&:]Q(C[OG27eOOQO!.K9O!.K9OO$:TQ(CjO!.K9OOOQOLD-PLD-PO9OQ(C[OLD-POOQO!4/.j!4/.jOOQO!$(!k!$(!kO!'xQUO'#DvO0uQSO'#ETO'(|QbO'#JcO!'xQUO'#DnO')TQUO'#DzO!'xQUO'#D|O')[QbO'#CfO'+rQbO'#CfO',SQUO,5;SO!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO,5;^O!'xQUO'#IfO'.VQSO,5<cO'._Q,UO,5;^O'/rQ,UO,5;^O!'xQUO,5;rO0xQSO'#DSO0xQSO'#DSO!$SQ,UO'#FxO'._Q,UO'#FxO!$SQ,UO'#FzO'._Q,UO'#FzO!$SQ,UO'#GYO'._Q,UO'#GYO!'xQUO,5:fO!'xQUO,5@^O',SQUO1G0nO'/yQ$IUO'#CfO!'xQUO1G1zO!$SQ,UO,5=PO'._Q,UO,5=PO!$SQ,UO,5=RO'._Q,UO,5=RO!$SQ,UO,5<mO'._Q,UO,5<mO',SQUO1G1{O!'xQUO7+&uO!$SQ,UO1G2XO'._Q,UO1G2XO!$SQ,UO1G2ZO'._Q,UO1G2ZO',SQUO7+'gO',SQUO7+&YO!$SQ,UOANAaO'._Q,UOANAaO'0TQSO'#EhO'0YQSO'#EhO'0bQSO'#FWO'0gQSO'#ErO'0lQSO'#JrO'0wQSO'#JpO'1SQSO,5;SO'1XQ,UO,5<`O'1`QSO'#GRO'1eQSO'#GRO'1jQSO,5<aO'1rQSO,5;SO'1zQ$IUO1G1ZO'2RQSO,5<mO'2WQSO,5<mO'2]QSO,5<oO'2bQSO,5<oO'2gQSO1G1{O'2lQSO1G0nO'2qQ,UO<<KuO'2xQ,UO<<KuO7^Q,UO'#FvO8tQSO'#FuO@mQSO'#EgO!'xQUO,5;oO!0rQSO'#GRO!0rQSO'#GRO!0rQSO'#GTO!0rQSO'#GTO!%lQ,UO7+(ZO!%lQ,UO7+(ZO$L`Q`O1G2oO$L`Q`O1G2oO!$SQ,UO,5=TO!$SQ,UO,5=T",stateData:"'4R~O'mOS'nOSROS'oRQ~OPYOQYOV!TO^pOaxObwOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!XXO!csO!hZO!kYO!lYO!mYO!otO!quO!tvO!x]O#p}O$QzO$UfO%`{O%b!OO%d|O%e|O%h!PO%j!QO%m!RO%n!RO%p!SO%}!UO&T!VO&V!WO&X!XO&Z!YO&^!ZO&d![O&j!]O&l!^O&n!_O&p!`O&r!aO'tSO'vTO'yUO(RVO(`[O(miO~OPYOQYOa!gOb!fOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!X!cO!csO!hZO!kYO!lYO!mYO!otO!quO!t!eO$Q!hO$UfO't!bO'vTO'yUO(RVO(`[O(miO~O^!qOl!kO|!lO![!rO!]!pO!^!pO!x<XO!|!wO!}!vO#O!tO#P!uO#Q!sO#T!xO#U!xO'u!iO'vTO'yUO(U!jO(`!nO~O'o!yO~OPYXXYX^YXkYXyYXzYX|YX!VYX!eYX!fYX!hYX!lYX#XYX#dcX#gYX#hYX#iYX#jYX#kYX#lYX#mYX#nYX#oYX#qYX#sYX#uYX#vYX#{YX'kYX(RYX(aYX(hYX(iYX~O!a$zX~P(gO[!{O'v!}O'w!{O'x!}O~O[#OO'x!}O'y!}O'z#OO~Oq#QO!O#RO(S#RO(T#TO~OPYOQYOa!gOb!fOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!X!cO!csO!hZO!kYO!lYO!mYO!otO!quO!t!eO$Q!hO$UfO't<^O'vTO'yUO(RVO(`[O(miO~O!U#XO!V#UO!S(XP!S(eP~P+sO!W#aO~P`OPYOQYOa!gOb!fOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!X!cO!csO!hZO!kYO!lYO!mYO!otO!quO!t!eO$Q!hO$UfO'vTO'yUO(RVO(`[O(miO~O!U#gO!x]O#b#jO#c#gO't<_O!g(bP~P._O!h#lO't#kO~O!t#pO!x]O%`#qO~O#d#rO~O!a#sO#d#rO~OP$ZOX$bOk$OOy#wOz#xO|#yO!V$_O!e$QO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O#k$PO#l$QO#m$QO#n$aO#o$QO#q$RO#s$TO#u$VO#v$WO(RVO(a$XO(h#zO(i#{O~O^(VX'k(VX'i(VX!g(VX!S(VX!X(VX%a(VX!a(VX~P1gO#X$cO#{$cOP(WXX(WXk(WXy(WXz(WX|(WX!V(WX!e(WX!h(WX!l(WX#g(WX#h(WX#i(WX#j(WX#k(WX#l(WX#m(WX#n(WX#o(WX#q(WX#s(WX#u(WX#v(WX(R(WX(a(WX(h(WX(i(WX!X(WX%a(WX~O^(WX!f(WX'k(WX'i(WX!S(WX!g(WXo(WX!a(WX~P3}O#X$cO~O$W$eO$Y$dO$a$jO~O!X$kO$UfO$d$lO$f$nO~Oi%QOk$rOl$qOm$qOs%ROu%SOw%TO|$yO!X$zO!c%YO!h$vO#c%ZO$Q%WO$m%UO$o%VO$r%XO't$pO'vTO'yUO'}%PO(R$sOd(OP~O!h%[O~O!a%^O~O^%_O'k%_O~O'u!iO~P%QO't%fO~O!h%[O't%fO'u!iO'}%PO~Ob%mO!h%[O't%fO~O#o$QO~Oy%rO!X%oO!h%qO%b%uO't%fO'u!iO'vTO'yUO](uP~O!t#pO~O|%wO!X%xO't%fO~O|%wO!X%xO%j%|O't%fO~O't%}O~O#p}O%b!OO%d|O%e|O%h!PO%j!QO%m!RO%n!RO~Oa&WOb&VO!t&TO%`&UO%r&SO~P;fOa&ZObwO!X&YO!tvO!x]O#p}O%`{O%d|O%e|O%h!PO%j!QO%m!RO%n!RO%p!SO~O_&^O#X&aO%b&[O'u!iO~P<eO!h&bO!q&fO~O!h#lO~O!XXO~O^%_O'j&nO'k%_O~O^%_O'j&qO'k%_O~O^%_O'j&sO'k%_O~O'iYX!SYXoYX!gYX&RYX!XYX%aYX!aYX~P(gO!['QO!]&yO!^&yO'u!iO'vTO'yUO~Ol&wO|&vO!U&zO(U&uO!W(YP!W(gP~P?fOg'TO!X'RO't%fO~Ob'YO!h%[O't%fO~Oy%rO!h%qO~Ol!kO|!lO!['_O!]'^O!^'^O!}'bO#O'aO#P'aO#Q'`O#T'dO#U'dO'u!iO'vTO'yUO(U!jO(`!nO~O!x<XO!|'cO~PAQO^%_O!a#sO!h%[O!l'jO#X'hO'k%_O'}%PO(a'fO~Ol!kO|!lO'vTO'yUO(U!jO(`!nO~O!]'^O!^'^O'u!iO~PBzO!['_O!]'^O!^'^O#T'dO#U'dO'u!iO~PBzO!XXO!['_O!]'^O!^'^O#Q'`O#T'dO#U'dO'u!iO~PBzO!['_O!]'^O!^'^O#O'aO#P'aO#Q'`O#T'dO#U'dO'u!iO~PBzO'p'nO'q'nO'r'pO~O[!{O'v'rO'w!{O'x'rO~O[#OO'x'rO'y'rO'z#OO~Oq#QO!O#RO(S#RO(T'vO~O!U'xO!S&}X!S'TX!V&}X!V'TX~P+sO!V'zO!S(XX~OP$ZOX$bOk$OOy#wOz#xO|#yO!V'zO!e$QO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O#k$PO#l$QO#m$QO#n$aO#o$QO#q$RO#s$TO#u$VO#v$WO(RVO(a$XO(h#zO(i#{O~O!S(XX~PGUO!S(PO~O!S(dX!V(dX!a(dX!g(dX(a(dX~O#X(dX#d#]X!W(dX~PI[O#X(QO!S(fX!V(fX~O!V(RO!S(eX~O!S(UO~O#X$cO~PI[O!W(VO~P`Oy#wOz#xO|#yO!f#uO!h#vO(RVOP!jaX!jak!ja!V!ja!e!ja!l!ja#g!ja#h!ja#i!ja#j!ja#k!ja#l!ja#m!ja#n!ja#o!ja#q!ja#s!ja#u!ja#v!ja(a!ja(h!ja(i!ja~O^!ja'k!ja'i!ja!S!ja!g!jao!ja!X!ja%a!ja!a!ja~PJrO!g(WO~O|%wO!X%xO!x]O#b(ZO#c(YO't%fO~O!a#sO#X([O(a'fO!V(cX^(cX'k(cX~O!g(cX~PMvO!V(_O!g(bX~O!g(aO~O|%wO!X%xO#c(YO't%fO~Oy(bOz(cO!f#uO!h#vO!x!wa|!wa~O!t!wa%`!wa!X!wa#b!wa#c!wa't!wa~P! OO!t(gO~OPYOQYOa!gOb!fOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!XXO!csO!hZO!kYO!lYO!mYO!otO!quO!t!eO$Q!hO$UfO't!bO'vTO'yUO(RVO(`[O(miO~Oi%QOk$rOl$qOm$qOs%ROu%SOw<qO|$yO!X$zO!c={O!h$vO#c<wO$Q%WO$m<sO$o<uO$r%XO't(kO'vTO'yUO'}%PO(R$sO~O#d(mO~Oi%QOk$rOl$qOm$qOs%ROu%SOw%TO|$yO!X$zO!c%YO!h$vO#c%ZO$Q%WO$m%UO$o%VO$r%XO't(kO'vTO'yUO'}%PO(R$sO~Od([P~P!%lO!U(qO!g(]P~P%QO(U(sO(`[O~O|(uO!h#vO(U(sO(`[O~OP<WOQ<WOa=wOb!fOikOk<WOlkOmkOskOu<WOw<WO|WO!QkO!RkO!X!cO!c<ZO!hZO!k<WO!l<WO!m<WO!o<[O!q<]O!t!eO$Q!hO$UfO't)TO'vTO'yUO(RVO(`[O(m=uO~Oz)WO!h#vO~O!V$_O^$ka'k$ka'i$ka!g$ka!S$ka!X$ka%a$ka!a$ka~O#p)[O~P!$SOy)_O!a)^O!X$XX$T$XX$W$XX$Y$XX$a$XX~O!a)^O!X(jX$T(jX$W(jX$Y(jX$a(jX~Oy)_O~P!+bOy)_O!X(jX$T(jX$W(jX$Y(jX$a(jX~O!X)aO$T)eO$W)`O$Y)`O$a)fO~O!U)iO~P!'xO$W$eO$Y$dO$a)mO~Og$sXy$sX|$sX!f$sX(h$sX(i$sX~OdfXd$sXgfX!VfX#XfX~P!-WOl)oO~Oq)pO(S)qO(T)sO~Og)|Oy)uO|)vO(h)xO(i)zO~Od)tO~P!.aOd)}O~Oi%QOk$rOl$qOm$qOs%ROu%SOw<qO|$yO!X$zO!c={O!h$vO#c<wO$Q%WO$m<sO$o<uO$r%XO'vTO'yUO'}%PO(R$sO~O!U*RO't*OO!g(nP~P!/OO#d*TO~O!h*UO~O!U*ZO't*WO!S(oP~P!/OOk*gO|*_O![*eO!]*^O!^*^O!h*UO#T*fO%W*aO'u!iO(U!jO~O!W*dO~P!1UO!f#uOg(QXy(QX|(QX(h(QX(i(QX!V(QX#X(QX~Od(QX#y(QX~P!1}Og*jO#X*iOd(PX!V(PX~O!V*kOd(OX~O't%}Od(OP~O!h*rO~O't(kO~O|%wO!U#gO!X%xO!x]O#b#jO#c#gO't%fO!g(bP~O!a#sO#d*vO~OP$ZOX$bOk$OOy#wOz#xO|#yO!e$QO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O#k$PO#l$QO#m$QO#n$aO#o$QO#q$RO#s$TO#u$VO#v$WO(RVO(a$XO(h#zO(i#{O~O^!ba!V!ba'k!ba'i!ba!S!ba!g!bao!ba!X!ba%a!ba!a!ba~P!4aOy#wOz#xO|#yO!f#uO!h#vO(RVOP!naX!nak!na!V!na!e!na!l!na#g!na#h!na#i!na#j!na#k!na#l!na#m!na#n!na#o!na#q!na#s!na#u!na#v!na(a!na(h!na(i!na~O^!na'k!na'i!na!S!na!g!nao!na!X!na%a!na!a!na~P!6zOy#wOz#xO|#yO!f#uO!h#vO(RVOP!paX!pak!pa!V!pa!e!pa!l!pa#g!pa#h!pa#i!pa#j!pa#k!pa#l!pa#m!pa#n!pa#o!pa#q!pa#s!pa#u!pa#v!pa(a!pa(h!pa(i!pa~O^!pa'k!pa'i!pa!S!pa!g!pao!pa!X!pa%a!pa!a!pa~P!9eOg+OO!X'RO%a*}O'}%PO~O!a+QO^'|X!X'|X'k'|X!V'|X~O^%_O!XXO'k%_O~O!h%[O'}%PO~O!h%[O't%fO'}%PO~O!a#sO#d(mO~O%b+^O't+YO'vTO'yUO!W(vP~O!V+_O](uX~O(U(sO~OX+cO~O]+dO~O!X%oO't%fO'u!iO](uP~O|%wO!U+hO!V(RO!X%xO't%fO!S(eP~Ol&}O|+jO!U+iO'vTO'yUO(U(sO~O!W(gP~P!?TO!V+kO^(rX'k(rX~O#X+oO'}%PO~Og+rO!X$zO'}%PO~O!X+tO~Oy+vO!XXO~O!t+{O~Ob,QO~O't#kO!W(tP~Ob%mO~O%b!OO't%}O~P<eOX,WO],VO~OPYOQYOaxObwOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!csO!hZO!kYO!lYO!mYO!otO!quO!tvO!x]O$UfO%`{O'vTO'yUO(RVO(`[O(miO~O!X!cO$Q!hO't!bO~P!AhO],VO^%_O'k%_O~O^,[O#p,^O%d,^O%e,^O~P%QO!h&bO~O&T,cO~O!X,eO~O&f,gO&h,hOP&caQ&caV&ca^&caa&cab&cai&cak&cal&cam&cas&cau&caw&ca|&ca!Q&ca!R&ca!X&ca!c&ca!h&ca!k&ca!l&ca!m&ca!o&ca!q&ca!t&ca!x&ca#p&ca$Q&ca$U&ca%`&ca%b&ca%d&ca%e&ca%h&ca%j&ca%m&ca%n&ca%p&ca%}&ca&T&ca&V&ca&X&ca&Z&ca&^&ca&d&ca&j&ca&l&ca&n&ca&p&ca&r&ca'i&ca't&ca'v&ca'y&ca(R&ca(`&ca(m&ca!W&ca&[&ca_&ca&a&ca~O't,mO~O!V{X!V!_X!W{X!W!_X!a{X!a!_X!h!_X#X{X'}!_X~O!a,rO#X,qO!V#aX!V(ZX!W#aX!W(ZX!a(ZX!h(ZX'}(ZX~O!a,tO!h%[O'}%PO!V!ZX!W!ZX~Ol!kO|!lO'vTO'yUO(U!jO~OP<WOQ<WOa=wOb!fOikOk<WOlkOmkOskOu<WOw<WO|WO!QkO!RkO!X!cO!c<ZO!hZO!k<WO!l<WO!m<WO!o<[O!q<]O!t!eO$Q!hO$UfO'vTO'yUO(RVO(`[O(m=uO~O't<|O~P!J}O!V,xO!W(YX~O!W,zO~O!a,rO#X,qO!V#aX!W#aX~O!V,{O!W(gX~O!W,}O~O!]-OO!^-OO'u!iO~P!JlO!W-RO~P'TOg-UO!X'RO~O!S-ZO~Ol!wa![!wa!]!wa!^!wa!|!wa!}!wa#O!wa#P!wa#Q!wa#T!wa#U!wa'u!wa'v!wa'y!wa(U!wa(`!wa~P! OO^%_O!a#sO!h%[O!l-`O#X-^O'k%_O'}%PO(a'fO~O!]-bO!^-bO'u!iO~PBzO![-dO!]-bO!^-bO#T-eO#U-eO'u!iO~PBzO![-dO!]-bO!^-bO#Q-fO#T-eO#U-eO'u!iO~PBzO![-dO!]-bO!^-bO#O-gO#P-gO#Q-fO#T-eO#U-eO'u!iO~PBzO![-dO!]-bO!^-bO!}-hO#O-gO#P-gO#Q-fO#T-eO#U-eO'u!iO~PBzO^%_O#X-^O'k%_O~O^%_O!a#sO#X-^O'k%_O~O^%_O!a#sO!l-`O#X-^O'k%_O(a'fO~O'p'nO'q'nO'r-mO~Oo-nO~O!S&}a!V&}a~P!4aO!U-rO!S&}X!V&}X~P%QO!V'zO!S(Xa~O!S(Xa~PGUO!V(RO!S(ea~O|%wO!U-vO!X%xO't%fO!S'TX!V'TX~O!V(_O!g(ba~O|%wO!X%xO#c-yO't%fO~O#X-{O!V(ca!g(ca^(ca'k(ca~O!a#sO~P#(aO|%wO!U.OO!X%xO!x]O#b.QO#c.OO't%fO!V'VX!g'VX~Oz.UO!h#vO~Og.XO!X'RO%a.WO'}%PO~O^#[i!V#[i'k#[i'i#[i!S#[i!g#[io#[i!X#[i%a#[i!a#[i~P!4aOg>ROy)uO|)vO(h)xO(i)zO~O#d#Wa^#Wa#X#Wa'k#Wa!V#Wa!g#Wa!X#Wa!S#Wa~P#*rO#d(QXP(QXX(QX^(QXk(QXz(QX!e(QX!h(QX!l(QX#g(QX#h(QX#i(QX#j(QX#k(QX#l(QX#m(QX#n(QX#o(QX#q(QX#s(QX#u(QX#v(QX'k(QX(R(QX(a(QX!g(QX!S(QX'i(QXo(QX!X(QX%a(QX!a(QX~P!1}O!V.bOd([X~P!.aOd.dO~O!V.eO!g(]X~P!4aO!g.hO~O!S.jO~OP$ZOy#wOz#xO|#yO!f#uO!h#vO!l$ZO(RVOX#fi^#fik#fi!V#fi!e#fi#h#fi#i#fi#j#fi#k#fi#l#fi#m#fi#n#fi#o#fi#q#fi#s#fi#u#fi#v#fi'k#fi(a#fi(h#fi(i#fi'i#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~O#g#fi~P#.nO#g#|O~P#.nOP$ZOy#wOz#xO|#yO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O(RVOX#fi^#fi!V#fi!e#fi#k#fi#l#fi#m#fi#n#fi#o#fi#q#fi#s#fi#u#fi#v#fi'k#fi(a#fi(h#fi(i#fi'i#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~Ok#fi~P#1`Ok$OO~P#1`OP$ZOk$OOy#wOz#xO|#yO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O#k$PO(RVO^#fi!V#fi#q#fi#s#fi#u#fi#v#fi'k#fi(a#fi(h#fi(i#fi'i#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~OX#fi!e#fi#l#fi#m#fi#n#fi#o#fi~P#4QOX$bO!e$QO#l$QO#m$QO#n$aO#o$QO~P#4QOP$ZOX$bOk$OOy#wOz#xO|#yO!e$QO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O#k$PO#l$QO#m$QO#n$aO#o$QO#q$RO(RVO^#fi!V#fi#s#fi#u#fi#v#fi'k#fi(a#fi(i#fi'i#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~O(h#fi~P#7RO(h#zO~P#7ROP$ZOX$bOk$OOy#wOz#xO|#yO!e$QO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O#k$PO#l$QO#m$QO#n$aO#o$QO#q$RO#s$TO(RVO(h#zO^#fi!V#fi#u#fi#v#fi'k#fi(a#fi'i#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~O(i#fi~P#9sO(i#{O~P#9sOP$ZOX$bOk$OOy#wOz#xO|#yO!e$QO!f#uO!h#vO!l$ZO#g#|O#h#}O#i#}O#j#}O#k$PO#l$QO#m$QO#n$aO#o$QO#q$RO#s$TO#u$VO(RVO(h#zO(i#{O~O^#fi!V#fi#v#fi'k#fi(a#fi'i#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~P#<eOPYXXYXkYXyYXzYX|YX!eYX!fYX!hYX!lYX#XYX#dcX#gYX#hYX#iYX#jYX#kYX#lYX#mYX#nYX#oYX#qYX#sYX#uYX#vYX#{YX(RYX(aYX(hYX(iYX!VYX!WYX~O#yYX~P#?OOP$ZOX<oOk<cOy#wOz#xO|#yO!e<eO!f#uO!h#vO!l$ZO#g<aO#h<bO#i<bO#j<bO#k<dO#l<eO#m<eO#n<nO#o<eO#q<fO#s<hO#u<jO#v<kO(RVO(a$XO(h#zO(i#{O~O#y.lO~P#A]OP(WXX(WXk(WXy(WXz(WX|(WX!e(WX!f(WX!h(WX!l(WX#g(WX#h(WX#i(WX#j(WX#k(WX#l(WX#m(WX#n(WX#q(WX#s(WX#u(WX#v(WX(R(WX(a(WX(h(WX(i(WX!V(WX~O#X<pO#{<pO#o(WX#y(WX!W(WX~P#CZO^'Ya!V'Ya'k'Ya'i'Ya!g'Ya!S'Yao'Ya!X'Ya%a'Ya!a'Ya~P!4aOP#fiX#fi^#fik#fiz#fi!V#fi!e#fi!f#fi!h#fi!l#fi#g#fi#h#fi#i#fi#j#fi#k#fi#l#fi#m#fi#n#fi#o#fi#q#fi#s#fi#u#fi#v#fi'k#fi(R#fi(a#fi'i#fi!S#fi!g#fio#fi!X#fi%a#fi!a#fi~P#*rO^#zi!V#zi'k#zi'i#zi!S#zi!g#zio#zi!X#zi%a#zi!a#zi~P!4aO$W.qO$Y.qO~O$W.rO$Y.rO~O!a)^O#X.sO!X$^X$T$^X$W$^X$Y$^X$a$^X~O!U.tO~O!X)aO$T.vO$W)`O$Y)`O$a.wO~O!V<lO!W(VX~P#A]O!W.xO~O!a)^O$a(jX~O$a.zO~Oq)pO(S)qO(T.}O~Ol/QO!S/RO'vTO'yUO~O!VcX!acX!gcX!g$sX(acX~P!-WO!g/XO~P#*rO!V/YO!a#sO(a'fO!g(nX~O!g/_O~O!U*RO't%fO!g(nP~O#d/aO~O!S$sX!V$sX!a$zX~P!-WO!V/bO!S(oX~P#*rO!a/dO~O!S/fO~Ok/jO!a#sO!h%[O'}%PO(a'fO~O't/lO~O!a+QO~O^%_O!V/pO'k%_O~O!W/rO~P!1UO!]/sO!^/sO'u!iO(U!jO~O|/uO(U!jO~O#T/vO~O't%}Od'_X!V'_X~O!V*kOd(Oa~Od/{O~Oy/|Oz/|O|/}Ogva(hva(iva!Vva#Xva~Odva#yva~P$ tOy)uO|)vOg$la(h$la(i$la!V$la#X$la~Od$la#y$la~P$!jOy)uO|)vOg$na(h$na(i$na!V$na#X$na~Od$na#y$na~P$#]O#d0PO~Od$|a!V$|a#X$|a#y$|a~P!.aO#d0SO~Oy#wOz#xO|#yO!f#uO!h#vO(RVOP!niX!nik!ni!V!ni!e!ni!l!ni#g!ni#h!ni#i!ni#j!ni#k!ni#l!ni#m!ni#n!ni#o!ni#q!ni#s!ni#u!ni#v!ni(a!ni(h!ni(i!ni~O^!ni'k!ni'i!ni!S!ni!g!nio!ni!X!ni%a!ni!a!ni~P$$jOg.XO!X'RO%a.WO~Oi0ZO't0YO~P!/RO!a+QO^'|a!X'|a'k'|a!V'|a~O#d0aO~OXYX!VcX!WcX~O!V0bO!W(vX~O!W0dO~OX0eO~O't+YO'vTO'yUO~O!X%oO't%fO]'gX!V'gX~O!V+_O](ua~O!g0jO~P!4aOX0mO~O]0nO~O!V+kO^(ra'k(ra~O#X0tO~Og0wO!X$zO~O(U(sO!W(sP~Og1QO!X0}O%a1PO'}%PO~OX1[O!V1YO!W(tX~O!W1]O~O]1_O^%_O'k%_O~O't#kO'vTO'yUO~O#X$cO#o1bO#{$cO&R1cO^(WX~P#CZO#X$cO#o1bO&R1cO~O^1dO~P%QO^1fO~O&[1jOP&YiQ&YiV&Yi^&Yia&Yib&Yii&Yik&Yil&Yim&Yis&Yiu&Yiw&Yi|&Yi!Q&Yi!R&Yi!X&Yi!c&Yi!h&Yi!k&Yi!l&Yi!m&Yi!o&Yi!q&Yi!t&Yi!x&Yi#p&Yi$Q&Yi$U&Yi%`&Yi%b&Yi%d&Yi%e&Yi%h&Yi%j&Yi%m&Yi%n&Yi%p&Yi%}&Yi&T&Yi&V&Yi&X&Yi&Z&Yi&^&Yi&d&Yi&j&Yi&l&Yi&n&Yi&p&Yi&r&Yi'i&Yi't&Yi'v&Yi'y&Yi(R&Yi(`&Yi(m&Yi!W&Yi_&Yi&a&Yi~O_1pO!W1nO&a1oO~P`O!XXO!h1rO~O&h,hOP&ciQ&ciV&ci^&cia&cib&cii&cik&cil&cim&cis&ciu&ciw&ci|&ci!Q&ci!R&ci!X&ci!c&ci!h&ci!k&ci!l&ci!m&ci!o&ci!q&ci!t&ci!x&ci#p&ci$Q&ci$U&ci%`&ci%b&ci%d&ci%e&ci%h&ci%j&ci%m&ci%n&ci%p&ci%}&ci&T&ci&V&ci&X&ci&Z&ci&^&ci&d&ci&j&ci&l&ci&n&ci&p&ci&r&ci'i&ci't&ci'v&ci'y&ci(R&ci(`&ci(m&ci!W&ci&[&ci_&ci&a&ci~O!S1xO~O!V!Za!W!Za~P#A]Ol!kO|!lO!U2OO(U!jO!V'OX!W'OX~P?fO!V,xO!W(Ya~O!V'UX!W'UX~P!?TO!V,{O!W(ga~O!W2VO~P'TO^%_O#X2`O'k%_O~O^%_O!a#sO#X2`O'k%_O~O^%_O!a#sO!h%[O!l2dO#X2`O'k%_O'}%PO(a'fO~O!]2eO!^2eO'u!iO~PBzO![2hO!]2eO!^2eO#T2iO#U2iO'u!iO~PBzO![2hO!]2eO!^2eO#Q2jO#T2iO#U2iO'u!iO~PBzO![2hO!]2eO!^2eO#O2kO#P2kO#Q2jO#T2iO#U2iO'u!iO~PBzO^%_O!a#sO!l2dO#X2`O'k%_O(a'fO~O^%_O'k%_O~P!4aO!V$_Oo$ka~O!S&}i!V&}i~P!4aO!V'zO!S(Xi~O!V(RO!S(ei~O!S(fi!V(fi~P!4aO!V(_O!g(bi~O!V(ci!g(ci^(ci'k(ci~P!4aO#X2oO!V(ci!g(ci^(ci'k(ci~O|%wO!X%xO!x]O#b2rO#c2qO't%fO~O|%wO!X%xO#c2qO't%fO~Og2yO!X'RO%a2xO~Og2yO!X'RO%a2xO'}%PO~O#dvaPvaXva^vakva!eva!fva!hva!lva#gva#hva#iva#jva#kva#lva#mva#nva#ova#qva#sva#uva#vva'kva(Rva(ava!gva!Sva'ivaova!Xva%ava!ava~P$ tO#d$laP$laX$la^$lak$laz$la!e$la!f$la!h$la!l$la#g$la#h$la#i$la#j$la#k$la#l$la#m$la#n$la#o$la#q$la#s$la#u$la#v$la'k$la(R$la(a$la!g$la!S$la'i$lao$la!X$la%a$la!a$la~P$!jO#d$naP$naX$na^$nak$naz$na!e$na!f$na!h$na!l$na#g$na#h$na#i$na#j$na#k$na#l$na#m$na#n$na#o$na#q$na#s$na#u$na#v$na'k$na(R$na(a$na!g$na!S$na'i$nao$na!X$na%a$na!a$na~P$#]O#d$|aP$|aX$|a^$|ak$|az$|a!V$|a!e$|a!f$|a!h$|a!l$|a#g$|a#h$|a#i$|a#j$|a#k$|a#l$|a#m$|a#n$|a#o$|a#q$|a#s$|a#u$|a#v$|a'k$|a(R$|a(a$|a!g$|a!S$|a'i$|a#X$|ao$|a!X$|a%a$|a!a$|a~P#*rO^#[q!V#[q'k#[q'i#[q!S#[q!g#[qo#[q!X#[q%a#[q!a#[q~P!4aOd'PX!V'PX~P!%lO!V.bOd([a~O!U3RO!V'QX!g'QX~P%QO!V.eO!g(]a~O!V.eO!g(]a~P!4aO!S3UO~O#y!ja!W!ja~PJrO#y!ba!V!ba!W!ba~P#A]O#y!na!W!na~P!6zO#y!pa!W!pa~P!9eO!X3hO$UfO$_3iO~O!W3mO~Oo3nO~P#*rO^$hq!V$hq'k$hq'i$hq!S$hq!g$hqo$hq!X$hq%a$hq!a$hq~P!4aO!S3oO~Ol/QO'vTO'yUO~Oy)uO|)vO(i)zOg%Xi(h%Xi!V%Xi#X%Xi~Od%Xi#y%Xi~P$JzOy)uO|)vOg%Zi(h%Zi(i%Zi!V%Zi#X%Zi~Od%Zi#y%Zi~P$KmO(a$XO~P#*rO!U3rO't%fO!V'ZX!g'ZX~O!V/YO!g(na~O!V/YO!a#sO!g(na~O!V/YO!a#sO(a'fO!g(na~Od$ui!V$ui#X$ui#y$ui~P!.aO!U3zO't*WO!S']X!V']X~P!/OO!V/bO!S(oa~O!V/bO!S(oa~P#*rO!a#sO~O!a#sO#o4SO~Ok4VO!a#sO(a'fO~Od(Pi!V(Pi~P!.aO#X4YOd(Pi!V(Pi~P!.aO!g4]O~O^$iq!V$iq'k$iq'i$iq!S$iq!g$iqo$iq!X$iq%a$iq!a$iq~P!4aO!V4aO!X(pX~P#*rO!f#uO~P3}O^$sX!X$sX%UYX'k$sX!V$sX~P!-WO%U4cO^hXghXyhX|hX!XhX'khX(hhX(ihX!VhX~O%U4cO~O%b4jO't+YO'vTO'yUO!V'fX!W'fX~O!V0bO!W(va~OX4nO~O]4oO~O!S4sO~O^%_O'k%_O~P#*rO!X$zO~P#*rO!V4xO#X4zO!W(sX~O!W4{O~Ol!kO|4}O![5]O!]5RO!^5RO!x<XO!|5[O!}5ZO#O5YO#P5YO#Q5XO#T5WO#U!xO'u!iO'vTO'yUO(U!jO(`!nO~O!W5VO~P%%qOg5bO!X0}O%a5aO~Og5bO!X0}O%a5aO'}%PO~O't#kO!V'eX!W'eX~O!V1YO!W(ta~O'vTO'yUO(U5kO~O]5oO~O!g5rO~P%QO^5tO~O^5tO~P%QO#o5vO&R5wO~PMvO_1pO!W5{O&a1oO~P`O!a5}O~O!a6PO!V(Zi!W(Zi!a(Zi!h(Zi'}(Zi~O!V#ai!W#ai~P#A]O#X6QO!V#ai!W#ai~O!V!Zi!W!Zi~P#A]O^%_O#X6ZO'k%_O~O^%_O!a#sO#X6ZO'k%_O~O^%_O!a#sO!l6`O#X6ZO'k%_O(a'fO~O!h%[O'}%PO~P%+RO!]6aO!^6aO'u!iO~PBzO![6dO!]6aO!^6aO#T6eO#U6eO'u!iO~PBzO![6dO!]6aO!^6aO#Q6fO#T6eO#U6eO'u!iO~PBzO!V(_O!g(bq~O!V(cq!g(cq^(cq'k(cq~P!4aO|%wO!X%xO#c6jO't%fO~O!X'RO%a6mO~Og6pO!X'RO%a6mO~O#d%XiP%XiX%Xi^%Xik%Xiz%Xi!e%Xi!f%Xi!h%Xi!l%Xi#g%Xi#h%Xi#i%Xi#j%Xi#k%Xi#l%Xi#m%Xi#n%Xi#o%Xi#q%Xi#s%Xi#u%Xi#v%Xi'k%Xi(R%Xi(a%Xi!g%Xi!S%Xi'i%Xio%Xi!X%Xi%a%Xi!a%Xi~P$JzO#d%ZiP%ZiX%Zi^%Zik%Ziz%Zi!e%Zi!f%Zi!h%Zi!l%Zi#g%Zi#h%Zi#i%Zi#j%Zi#k%Zi#l%Zi#m%Zi#n%Zi#o%Zi#q%Zi#s%Zi#u%Zi#v%Zi'k%Zi(R%Zi(a%Zi!g%Zi!S%Zi'i%Zio%Zi!X%Zi%a%Zi!a%Zi~P$KmO#d$uiP$uiX$ui^$uik$uiz$ui!V$ui!e$ui!f$ui!h$ui!l$ui#g$ui#h$ui#i$ui#j$ui#k$ui#l$ui#m$ui#n$ui#o$ui#q$ui#s$ui#u$ui#v$ui'k$ui(R$ui(a$ui!g$ui!S$ui'i$ui#X$uio$ui!X$ui%a$ui!a$ui~P#*rOd'Pa!V'Pa~P!.aO!V'Qa!g'Qa~P!4aO!V.eO!g(]i~O#y#[i!V#[i!W#[i~P#A]OP$ZOy#wOz#xO|#yO!f#uO!h#vO!l$ZO(RVOX#fik#fi!e#fi#h#fi#i#fi#j#fi#k#fi#l#fi#m#fi#n#fi#o#fi#q#fi#s#fi#u#fi#v#fi#y#fi(a#fi(h#fi(i#fi!V#fi!W#fi~O#g#fi~P%6OO#g<aO~P%6OOP$ZOy#wOz#xO|#yO!f#uO!h#vO!l$ZO#g<aO#h<bO#i<bO#j<bO(RVOX#fi!e#fi#k#fi#l#fi#m#fi#n#fi#o#fi#q#fi#s#fi#u#fi#v#fi#y#fi(a#fi(h#fi(i#fi!V#fi!W#fi~Ok#fi~P%8ZOk<cO~P%8ZOP$ZOk<cOy#wOz#xO|#yO!f#uO!h#vO!l$ZO#g<aO#h<bO#i<bO#j<bO#k<dO(RVO#q#fi#s#fi#u#fi#v#fi#y#fi(a#fi(h#fi(i#fi!V#fi!W#fi~OX#fi!e#fi#l#fi#m#fi#n#fi#o#fi~P%:fOX<oO!e<eO#l<eO#m<eO#n<nO#o<eO~P%:fOP$ZOX<oOk<cOy#wOz#xO|#yO!e<eO!f#uO!h#vO!l$ZO#g<aO#h<bO#i<bO#j<bO#k<dO#l<eO#m<eO#n<nO#o<eO#q<fO(RVO#s#fi#u#fi#v#fi#y#fi(a#fi(i#fi!V#fi!W#fi~O(h#fi~P%=QO(h#zO~P%=QOP$ZOX<oOk<cOy#wOz#xO|#yO!e<eO!f#uO!h#vO!l$ZO#g<aO#h<bO#i<bO#j<bO#k<dO#l<eO#m<eO#n<nO#o<eO#q<fO#s<hO(RVO(h#zO#u#fi#v#fi#y#fi(a#fi!V#fi!W#fi~O(i#fi~P%?]O(i#{O~P%?]OP$ZOX<oOk<cOy#wOz#xO|#yO!e<eO!f#uO!h#vO!l$ZO#g<aO#h<bO#i<bO#j<bO#k<dO#l<eO#m<eO#n<nO#o<eO#q<fO#s<hO#u<jO(RVO(h#zO(i#{O~O#v#fi#y#fi(a#fi!V#fi!W#fi~P%AhO^#wy!V#wy'k#wy'i#wy!S#wy!g#wyo#wy!X#wy%a#wy!a#wy~P!4aOg>SOy)uO|)vO(h)xO(i)zO~OP#fiX#fik#fiz#fi!e#fi!f#fi!h#fi!l#fi#g#fi#h#fi#i#fi#j#fi#k#fi#l#fi#m#fi#n#fi#o#fi#q#fi#s#fi#u#fi#v#fi#y#fi(R#fi(a#fi!V#fi!W#fi~P%D`O!f#uOP(QXX(QXg(QXk(QXy(QXz(QX|(QX!e(QX!h(QX!l(QX#g(QX#h(QX#i(QX#j(QX#k(QX#l(QX#m(QX#n(QX#o(QX#q(QX#s(QX#u(QX#v(QX#y(QX(R(QX(a(QX(h(QX(i(QX!V(QX!W(QX~O#y#zi!V#zi!W#zi~P#A]O#y!ni!W!ni~P$$jO!W6|O~O!V'Ya!W'Ya~P#A]O!a#sO(a'fO!V'Za!g'Za~O!V/YO!g(ni~O!V/YO!a#sO!g(ni~Od$uq!V$uq#X$uq#y$uq~P!.aO!S']a!V']a~P#*rO!a7TO~O!V/bO!S(oi~P#*rO!V/bO!S(oi~O!S7XO~O!a#sO#o7^O~Ok7_O!a#sO(a'fO~O!S7aO~Od$wq!V$wq#X$wq#y$wq~P!.aO^$iy!V$iy'k$iy'i$iy!S$iy!g$iyo$iy!X$iy%a$iy!a$iy~P!4aO!V4aO!X(pa~O^#[y!V#[y'k#[y'i#[y!S#[y!g#[yo#[y!X#[y%a#[y!a#[y~P!4aOX7fO~O!V0bO!W(vi~O]7lO~O!a6PO~O(U(sO!V'bX!W'bX~O!V4xO!W(sa~O!h%[O'}%PO^(ZX!a(ZX!l(ZX#X(ZX'k(ZX(a(ZX~O't7uO~P._O!x<XO!|7yO!}7xO#O7wO#P7wO#Q7vO#T'dO#U'dO~PBzO^%_O!a#sO!l'jO#X'hO'k%_O(a'fO~O!W7}O~P%%qOl!kO'vTO'yUO(U!jO(`!nO~O|8OO~P&!mO![8SO!]8RO!^8RO#Q7vO#T'dO#U'dO'u!iO~PBzO![8SO!]8RO!^8RO#O8TO#P8TO#Q7vO#T'dO#U'dO'u!iO~PBzO!]8RO!^8RO'u!iO(U!jO(`!nO~O!X0}O~O!X0}O%a8VO~Og8YO!X0}O%a8VO~OX8_O!V'ea!W'ea~O!V1YO!W(ti~O!g8cO~O!g8dO~O!g8eO~O!g8eO~P%QO^8gO~O!a8jO~O!g8kO~O!V(fi!W(fi~P#A]O^%_O#X8sO'k%_O~O^%_O!a#sO#X8sO'k%_O~O^%_O!a#sO!l8wO#X8sO'k%_O(a'fO~O!h%[O'}%PO~P&'ZO!]8xO!^8xO'u!iO~PBzO![8{O!]8xO!^8xO#T8|O#U8|O'u!iO~PBzO!V(_O!g(by~O!V(cy!g(cy^(cy'k(cy~P!4aO!X'RO%a9PO~O#d$uqP$uqX$uq^$uqk$uqz$uq!V$uq!e$uq!f$uq!h$uq!l$uq#g$uq#h$uq#i$uq#j$uq#k$uq#l$uq#m$uq#n$uq#o$uq#q$uq#s$uq#u$uq#v$uq'k$uq(R$uq(a$uq!g$uq!S$uq'i$uq#X$uqo$uq!X$uq%a$uq!a$uq~P#*rO#d$wqP$wqX$wq^$wqk$wqz$wq!V$wq!e$wq!f$wq!h$wq!l$wq#g$wq#h$wq#i$wq#j$wq#k$wq#l$wq#m$wq#n$wq#o$wq#q$wq#s$wq#u$wq#v$wq'k$wq(R$wq(a$wq!g$wq!S$wq'i$wq#X$wqo$wq!X$wq%a$wq!a$wq~P#*rO!V'Qi!g'Qi~P!4aO#y#[q!V#[q!W#[q~P#A]Oy/|Oz/|O|/}OPvaXvagvakva!eva!fva!hva!lva#gva#hva#iva#jva#kva#lva#mva#nva#ova#qva#sva#uva#vva#yva(Rva(ava(hva(iva!Vva!Wva~Oy)uO|)vOP$laX$lag$lak$laz$la!e$la!f$la!h$la!l$la#g$la#h$la#i$la#j$la#k$la#l$la#m$la#n$la#o$la#q$la#s$la#u$la#v$la#y$la(R$la(a$la(h$la(i$la!V$la!W$la~Oy)uO|)vOP$naX$nag$nak$naz$na!e$na!f$na!h$na!l$na#g$na#h$na#i$na#j$na#k$na#l$na#m$na#n$na#o$na#q$na#s$na#u$na#v$na#y$na(R$na(a$na(h$na(i$na!V$na!W$na~OP$|aX$|ak$|az$|a!e$|a!f$|a!h$|a!l$|a#g$|a#h$|a#i$|a#j$|a#k$|a#l$|a#m$|a#n$|a#o$|a#q$|a#s$|a#u$|a#v$|a#y$|a(R$|a(a$|a!V$|a!W$|a~P%D`O#y$hq!V$hq!W$hq~P#A]O#y$iq!V$iq!W$iq~P#A]O!W9ZO~O#y9[O~P!.aO!a#sO!V'Zi!g'Zi~O!a#sO(a'fO!V'Zi!g'Zi~O!V/YO!g(nq~O!S']i!V']i~P#*rO!V/bO!S(oq~O!S9bO~P#*rO!S9bO~Od(Py!V(Py~P!.aO!V'`a!X'`a~P#*rO^%Tq!X%Tq'k%Tq!V%Tq~P#*rOX9gO~O!V0bO!W(vq~O#X9kO!V'ba!W'ba~O!V4xO!W(si~P#A]O^%_O!a+QO'k%_O~OPYXXYXkYXyYXzYX|YX!SYX!VYX!eYX!fYX!hYX!lYX#XYX#dcX#gYX#hYX#iYX#jYX#kYX#lYX#mYX#nYX#oYX#qYX#sYX#uYX#vYX#{YX(RYX(aYX(hYX(iYX~O!a%RX#o%RX~P&:hO#T-eO#U-eO~PBzO#Q9pO#T-eO#U-eO~PBzO#O9qO#P9qO#Q9pO#T-eO#U-eO~PBzO!}9rO#O9qO#P9qO#Q9pO#T-eO#U-eO~PBzO!]9uO!^9uO'u!iO(U!jO(`!nO~O![9xO!]9uO!^9uO#Q9pO#T-eO#U-eO'u!iO~PBzO!X0}O%a9{O~O'vTO'yUO(U:QO~O!V1YO!W(tq~O!g:TO~O!g:TO~P%QO!g:VO~O!g:WO~O#X:YO!V#ay!W#ay~O!V#ay!W#ay~P#A]O^%_O#X:^O'k%_O~O^%_O!a#sO#X:^O'k%_O~O^%_O!a#sO!l:bO#X:^O'k%_O(a'fO~O!h%[O'}%PO~P&AZO!]:cO!^:cO'u!iO~PBzO!X'RO%a:gO~O#y#wy!V#wy!W#wy~P#A]OP$uiX$uik$uiz$ui!e$ui!f$ui!h$ui!l$ui#g$ui#h$ui#i$ui#j$ui#k$ui#l$ui#m$ui#n$ui#o$ui#q$ui#s$ui#u$ui#v$ui#y$ui(R$ui(a$ui!V$ui!W$ui~P%D`Oy)uO|)vO(i)zOP%XiX%Xig%Xik%Xiz%Xi!e%Xi!f%Xi!h%Xi!l%Xi#g%Xi#h%Xi#i%Xi#j%Xi#k%Xi#l%Xi#m%Xi#n%Xi#o%Xi#q%Xi#s%Xi#u%Xi#v%Xi#y%Xi(R%Xi(a%Xi(h%Xi!V%Xi!W%Xi~Oy)uO|)vOP%ZiX%Zig%Zik%Ziz%Zi!e%Zi!f%Zi!h%Zi!l%Zi#g%Zi#h%Zi#i%Zi#j%Zi#k%Zi#l%Zi#m%Zi#n%Zi#o%Zi#q%Zi#s%Zi#u%Zi#v%Zi#y%Zi(R%Zi(a%Zi(h%Zi(i%Zi!V%Zi!W%Zi~O#y$iy!V$iy!W$iy~P#A]O#y#[y!V#[y!W#[y~P#A]O!a#sO!V'Zq!g'Zq~O!V/YO!g(ny~O!S']q!V']q~P#*rO!S:nO~P#*rO!V0bO!W(vy~O!V4xO!W(sq~O#T2iO#U2iO~PBzO#Q:uO#T2iO#U2iO~PBzO#O:vO#P:vO#Q:uO#T2iO#U2iO~PBzO!]:zO!^:zO'u!iO(U!jO(`!nO~O!X0}O%a:}O~O!g;QO~O^%_O#X;VO'k%_O~O^%_O!a#sO#X;VO'k%_O~O^%_O!a#sO!l;ZO#X;VO'k%_O(a'fO~O!X'RO%a;^O~OP$uqX$uqk$uqz$uq!e$uq!f$uq!h$uq!l$uq#g$uq#h$uq#i$uq#j$uq#k$uq#l$uq#m$uq#n$uq#o$uq#q$uq#s$uq#u$uq#v$uq#y$uq(R$uq(a$uq!V$uq!W$uq~P%D`OP$wqX$wqk$wqz$wq!e$wq!f$wq!h$wq!l$wq#g$wq#h$wq#i$wq#j$wq#k$wq#l$wq#m$wq#n$wq#o$wq#q$wq#s$wq#u$wq#v$wq#y$wq(R$wq(a$wq!V$wq!W$wq~P%D`Od%]!Z!V%]!Z#X%]!Z#y%]!Z~P!.aO!V'bq!W'bq~P#A]O#T6eO#U6eO~PBzO#Q;bO#T6eO#U6eO~PBzO!V#a!Z!W#a!Z~P#A]O^%_O#X;mO'k%_O~O^%_O!a#sO#X;mO'k%_O~O#d%]!ZP%]!ZX%]!Z^%]!Zk%]!Zz%]!Z!V%]!Z!e%]!Z!f%]!Z!h%]!Z!l%]!Z#g%]!Z#h%]!Z#i%]!Z#j%]!Z#k%]!Z#l%]!Z#m%]!Z#n%]!Z#o%]!Z#q%]!Z#s%]!Z#u%]!Z#v%]!Z'k%]!Z(R%]!Z(a%]!Z!g%]!Z!S%]!Z'i%]!Z#X%]!Zo%]!Z!X%]!Z%a%]!Z!a%]!Z~P#*rO#T8|O#U8|O~PBzO^%_O#X;zO'k%_O~OP%]!ZX%]!Zk%]!Zz%]!Z!e%]!Z!f%]!Z!h%]!Z!l%]!Z#g%]!Z#h%]!Z#i%]!Z#j%]!Z#k%]!Z#l%]!Z#m%]!Z#n%]!Z#o%]!Z#q%]!Z#s%]!Z#u%]!Z#v%]!Z#y%]!Z(R%]!Z(a%]!Z!V%]!Z!W%]!Z~P%D`Oo(VX~P1gO'u!iO~P!'xO!ScX!VcX#XcX~P&:hOPYXXYXkYXyYXzYX|YX!VYX!VcX!eYX!fYX!hYX!lYX#XYX#XcX#dcX#gYX#hYX#iYX#jYX#kYX#lYX#mYX#nYX#oYX#qYX#sYX#uYX#vYX#{YX(RYX(aYX(hYX(iYX~O!acX!gYX!gcX(acX~P')iOP<WOQ<WOa=wOb!fOikOk<WOlkOmkOskOu<WOw<WO|WO!QkO!RkO!XXO!c<ZO!hZO!k<WO!l<WO!m<WO!o<[O!q<]O!t!eO$Q!hO$UfO't)TO'vTO'yUO(RVO(`[O(m=uO~O!V<lO!W$ka~Oi%QOk$rOl$qOm$qOs%ROu%SOw<rO|$yO!X$zO!c=|O!h$vO#c<xO$Q%WO$m<tO$o<vO$r%XO't(kO'vTO'yUO'}%PO(R$sO~O#p)[O~P'._O!WYX!WcX~P')iO#d<`O~O!a#sO#d<`O~O#X<pO~O#o<eO~O#X<zO!V(fX!W(fX~O#X<pO!V(dX!W(dX~O#d<{O~Od<}O~P!.aO#d=SO~O#d=TO~O!a#sO#d=UO~O!a#sO#d<{O~O#y=VO~P#A]O#d=WO~O#d=XO~O#d=YO~O#d=ZO~O#d=[O~O#d=]O~O#y=^O~P!.aO#y=_O~P!.aO$U~!f!|!}#P#Q#T#b#c#n(m$m$o$r%U%`%a%b%h%j%m%n%p%r~'oR$U(m#h!R'm'u#il#g#jky'n(U'n't$W$Y$W~",goto:"$2w(zPPPP({P)OP)`P+j/pPPPP7RPP7hP=gAYPAmPAmPPPAmPC]PAmPAmPAmPCaPPCfPDPPH}PPPIRPPPPIRLUPPPL[NiPIRP!#SPPPP!%fIRPPPIRPIRP!'xIRP!+`!,b!,gP!-X!-]!-XPPPPP!0j!3SPP!3]!4kP!,bIRIR!8S!;`!@l!@l!DePPP!DlIRPPPPPPPPPPP!G{P!IbPPIR!JsPIRPIRIRIRIRPIR!LZPP# eP#$kP#$o#$y#$}#$}P# bP#%R#%RP#(XP#(]IRIR#(c#+hAmPAmPAmAmP#,rAmAm#.lAm#0yAm#2mAmAm#3Z#5V#5V#5Z#5c#5V#5kP#5VPAm#6gAm#7oAmAm7RPPP#8zPP#9d#9dP#9dP#9y#9dPP#:PP#9vP#9v#:c!3X#9v#:}#;T7O)O#;W)OP#;_#;_#;_P)OP)OP)OP)OPP)OP#;e#;hP#;h)OP#;lP#;oP)OP)OP)OP)OP)OP)O)OPP#;u#;{#<V#<]#<c#<i#<o#<}#=T#=Z#=e#=k#>g#>v#>|#?`#?f#?l#?z#@a#Aq#BP#BV#B]#Bc#Bi#Bs#By#CP#CZ#Cm#CsPPPPPPPPPP#CyPPPPPPP#Dm#I^P#J}#KU#K^PPPP$ h$$^$+P$+S$+V$-g$-j$-m$-tPP$-z$.O$.w$/w$/{$0aPP$0e$0k$0oP$0r$0v$0y$1o$2V$2[$2_$2b$2h$2k$2o$2sR!zRmpOXr!X#b%^&e&g&h&j,`,e1j1mU!pQ'R-QQ%dtQ%lwQ%szQ&]!TS&y!c,xQ'X!f^'^!m!r!s!t!u!v!wS*^$z*cQ+W%mQ+e%uQ,P&VQ-O'QQ-Y'YY-b'_'`'a'b'cQ/s*eQ1X,QW2e-d-f-g-hS5R0}5UU6a2h2j2kU8R5Y5Z5]S8x6d6fS9u8S8TQ:c8{Q:z9xR<y<[%SdOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%q&^&a&e&g&h&j&n&v'T'h'x'z(Q([(m(q(u)t*v+j,[,`,e-U-^-r-{.e.l/}0S0a1Q1b1c1d1f1j1m1o2`2o3R4}5b5t5v5w6Z8O8Y8g8s:^;V;m;zS#n]<X!r)V$Y$k&z)i,q,t.t2O3h4z6Q9k:Y<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xQ*n%TQ+]%oQ,R&YQ,Y&bQ.[<qQ0W+OQ0[+QQ0g+^Q1a,WQ2u.XQ4i0bQ5i1YQ6o2yQ6u<rQ7h4jR9S6p'QkOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k%^%d%q&^&a&b&e&g&h&j&n&v&z'T'h'x'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=x#n!kQ!m!p!r!s!t!u!v!w!x&y'Q'R'^'_'`'a'b'c'd,x-O-Q-b-d-e-f-g-h0}2e2h2i2j2k5O5U5W5X5Y5Z5[6a6d6e6f7v7w7x7y8T8x8{8|9p9q9r:c:u:v;b$Y$qi#s#u$a$b$v$y%U%V%Z)p)y){)|*T*Z*i*j*}+Q+o+r.W.b/a/b/d0P0t0w1P2x3p3z4S4Y4a4c5a6m7T7^8V9P9[9{:g:};^<n<o<s<t<u<v<w<x=O=P=Q=R=S=T=W=X=Y=Z=^=_=u=}>O>R>SQ%vzQ&w!cS&}%x,{Q+]%oS/Q)v/SQ0O*rQ0g+^Q0l+dQ1`,VQ1a,WQ4i0bQ4r0nQ5l1[Q5m1_Q7h4jQ7k4oQ8b5oQ9j7lR:R8_pmOXr!T!X#b%^&[&e&g&h&j,`,e1j1mR,T&^&z`OPXYrstux!X!^!g!l#Q#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k%^%d%q&^&a&b&e&g&h&j&n&v'T'h'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=w=x[#ZWZ#U#X&z'xQ%gvQ%kwS%pz%u!U%y|}#e#g#j%[%w(R(Y(Z(_+h+i+k,^,r-v-y-}.O.Q1r2q2r6P6jQ&R!RQ'U!eQ'W!fQ(f#pS*Q$v*US+V%l%mQ+Z%oQ+z&TQ,O&VS-X'X'YQ.Z(gQ/^*RQ0`+WQ0f+^Q0h+_Q0k+cQ1S+{S1W,P,QQ2[-YQ3q/YQ4h0bQ4l0eQ4q0mQ5h1XQ7Q3rQ7g4jQ7j4nQ9f7fR:p9gv$xi#u%U%V%Z)y){*T*i*j.b/a0P3p4Y9[=u=}>O!d%iw!f!o%k%l%m&x'W'X'Y']'k*]+V+W,u-X-Y-a-c/k0`2T2[2c2g4U6_6c8v8z:a;YQ+P%gQ+p&OQ+s&PQ+}&VQ.Y(fQ1R+zU1V,O,P,QQ2z.ZQ5c1SS5g1W1XS7t4|5QQ8^5hU9s7z8P8QU:x9t9v9wQ;e:yQ;u;f!z=y#s$a$b$v$y)p)|*Z*}+Q+o+r.W/b/d0t0w1P2x3z4S4a4c5a6m7T7^8V9P9{:g:};^<s<u<w=O=Q=S=W=Y=^>R>Sg=z<n<o<t<v<x=P=R=T=X=Z=_W$}i%P*k=uS&O!O&[Q&P!PQ&Q!QR+n%|$Z$|i#s#u$a$b$v$y%U%V%Z)p)y){)|*T*Z*i*j*}+Q+o+r.W.b/a/b/d0P0t0w1P2x3p3z4S4Y4a4c5a6m7T7^8V9P9[9{:g:};^<n<o<s<t<u<v<w<x=O=P=Q=R=S=T=W=X=Y=Z=^=_=u=}>O>R>ST)q$s)rV*o%T<q<rU&}!c%x,{S(t#w#xQ+b%rS.S(b(cQ0x+tQ4Z/|R7p4x'QkOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k%^%d%q&^&a&b&e&g&h&j&n&v&z'T'h'x'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=x$q$^c#W#c%b%c%e'w'}(i(p(x(y(z({(|(})O)P)Q)R)S)U)X)])g*{+a,v-k-p-u-z.a.g.k.m.n.o/O0Q1y1|2^2n3Q3V3W3X3Y3Z3[3]3^3_3`3a3b3c3f3g3l4_4f6S6Y6h6s6t6y6z7r8m8q9T9X9Y:[:r;R;T;k;x<R<Y=lT#RV#S'RkOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k%^%d%q&^&a&b&e&g&h&j&n&v&z'T'h'x'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xQ&{!cR2P,x#f!kQ!c!m!p!r!s!t!u!v!w!x&y'Q'R'^'_'`'a'b'c'd,x-O-Q-b-d-e-f-g-h2e2h2i2j2k5O5W5X5[6a6d6e6f7v7w7x7y8x8{8|9p9q9r:c:u:v;bS*]$z*cS/k*^*eQ/t*fQ0z+vQ4U/sQ4X/vS4|0}5US7z5R5]S8P5Y5ZS9t8R8SQ9v8TS:y9u9xR;f:zlpOXr!X#b%^&e&g&h&j,`,e1j1mQ&l![Q'l!tS(h#r<`Q+T%jQ+x&RQ+y&SQ-V'VQ-j'eS.`(m<{S0R*v=UQ0^+UQ0|+wQ1q,gQ1s,hQ1{,sQ2Y-WQ2]-[S4`0S=[Q4d0_S4g0a=]Q6R1}Q6V2ZQ6[2bQ7e4eQ8n6TQ8o6WQ8r6]Q:X8kQ:]8tQ;U:_Q;l;WR;y;n$l$]c#W#c%c%e'w'}(i(p(x(y(z({(|(})O)P)Q)R)S)U)X)])g*{+a,v-k-p-u-z.a.g.k.n.o/O0Q1y1|2^2n3Q3V3W3X3Y3Z3[3]3^3_3`3a3b3c3f3g3l4_4f6S6Y6h6s6t6y6z7r8m8q9T9X9Y:[:r;R;T;k;x<R<Y=lS(e#m'[U*h${(l3eS*z%b.mQ2v0WQ6l2uQ9R6oR:h9S$l$[c#W#c%c%e'w'}(i(p(x(y(z({(|(})O)P)Q)R)S)U)X)])g*{+a,v-k-p-u-z.a.g.k.n.o/O0Q1y1|2^2n3Q3V3W3X3Y3Z3[3]3^3_3`3a3b3c3f3g3l4_4f6S6Y6h6s6t6y6z7r8m8q9T9X9Y:[:r;R;T;k;x<R<Y=lS(d#m'[S(v#x$]S*y%b.mS.T(c(eQ.p)WQ0T*zR2s.U'QkOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k%^%d%q&^&a&b&e&g&h&j&n&v&z'T'h'x'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xS#n]<XQ&g!VQ&h!WQ&j!YQ&k!ZR1i,cQ'S!eQ*|%gQ-T'US.V(f+PQ2W-SW2w.Y.Z0V0XQ6U2XU6k2t2v2zS9O6l6nS:f9Q9RS;[:e:hQ;p;]R;{;qV!qQ'R-Q!_^OQXZ_r!T!X!m#b#e%[%^&[&^&e&g&h&j'R(_,`,e-Q-}0}1j1m5O5UT#n]<X%^yOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%q&^&a&b&e&g&h&j&n&v'T'h'x'z(Q([(m(q(u)t*v+O+j,[,`,e-U-^-r-{.X.e.l/}0S0a1Q1b1c1d1f1j1m1o2`2o2y3R4}5b5t5v5w6Z6p8O8Y8g8s:^;V;m;zS(t#w#xS.S(b(c!s=c$Y$k&z)i,q,t.t2O3h4z6Q9k:Y<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xU!oQ'R-Q[']!m!s!t!u!v!wS'k!p!rY'm!x5O5W5X5[S-a'^'_W-c'`'a'b'cY-i'd7v7w7x7yS2c-b-dW2f-e9p9q9rU2g-f-g-hS5Q0}5US6_2e2hU6b2i:u:vS6c2j2kS7z5R5]S8Q5Y5ZS8v6a6dS8y6e;bQ8z6fS9t8R8SQ9w8TS:a8x8{Q:d8|S:y9u9xQ;Y:cR;f:zU!qQ'R-QT5S0}5UU'j!o5P5QS(^#f1gU-`']'m8QQ/]*QQ/i*]U2d-c-i9wQ3v/^S4P/j/tS6`2f2gQ7P3qS7[4V4XS8w6b6cQ9^7QQ9e7_S:b8y8zR;Z:dQ#tbU'i!o5P5QS(]#f1gQ*w%]Q+R%hQ+X%nW-_']'j'm8QQ-|(^Q/[*QQ/h*]Q/n*`Q0]+SQ1T+|W2a-`-c-i9wS3u/]/^S4O/i/tQ4R/mQ4T/oQ5e1UU6^2d2f2gQ7O3qQ7S3vS7W4P4XQ7]4WQ8[5fU8u6`6b6cS9]7P7QQ9a7XQ9c7[Q9n7sQ:O8]U:`8w8y8zQ:l9^Q:m9bQ:o9eQ:t9oQ;P:PS;X:b:dQ;`:nQ;c:wQ;o;ZQ;s;dQ<O;tQ<T<PQ=f=aQ=q=jR=r=k%^aOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%q&^&a&b&e&g&h&j&n&v'T'h'x'z(Q([(m(q(u)t*v+O+j,[,`,e-U-^-r-{.X.e.l/}0S0a1Q1b1c1d1f1j1m1o2`2o2y3R4}5b5t5v5w6Z6p8O8Y8g8s:^;V;m;zS#tx!g!r=`$Y$k&z)i,q,t.t2O3h4z6Q9k:Y<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xR=f=w%^bOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%q&^&a&b&e&g&h&j&n&v'T'h'x'z(Q([(m(q(u)t*v+O+j,[,`,e-U-^-r-{.X.e.l/}0S0a1Q1b1c1d1f1j1m1o2`2o2y3R4}5b5t5v5w6Z6p8O8Y8g8s:^;V;m;zQ%]j!d%hw!f!o%k%l%m&x'W'X'Y']'k*]+V+W,u-X-Y-a-c/k0`2T2[2c2g4U6_6c8v8z:a;YS%nx!gQ+S%iQ+|&VW1U+},O,P,QU5f1V1W1XS7s4|5QS8]5g5hW9o7t7z8P8QQ:P8^W:w9s9t9v9wS;d:x:yS;t;e;fQ<P;u!r=a$Y$k&z)i,q,t.t2O3h4z6Q9k:Y<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xQ=j=vR=k=w%QeOPXYrstu!X!^!l#Q#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%q&^&a&e&g&h&j&n&v'T'h'z(Q([(m(q(u)t*v+O+j,[,`,e-U-^-r-{.X.e.l/}0S0a1Q1b1c1d1f1j1m1o2`2o2y3R4}5b5t5v5w6Z6p8O8Y8g8s:^;V;m;zY#`WZ#U#X'x!U%y|}#e#g#j%[%w(R(Y(Z(_+h+i+k,^,r-v-y-}.O.Q1r2q2r6P6jQ,Z&b!p=b$Y$k)i,q,t.t2O3h4z6Q9k:Y<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xR=e&zS'O!c%xR2R,{%SdOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%q&^&a&e&g&h&j&n&v'T'h'x'z(Q([(m(q(u)t*v+j,[,`,e-U-^-r-{.e.l/}0S0a1Q1b1c1d1f1j1m1o2`2o3R4}5b5t5v5w6Z8O8Y8g8s:^;V;m;z!r)V$Y$k&z)i,q,t.t2O3h4z6Q9k:Y<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xQ,Y&bQ0W+OQ2u.XQ6o2yR9S6p!n$Sc#W%b'w'}(i(p)P)Q)R)S)X)]+a-k-p-u-z.a.g/O0Q2^2n3Q3c4_4f6Y6h6s8q:[;T;k;x<R<Y!T<g)U)g,v.m1y1|3V3_3`3a3b3f3l6S6t6y6z7r8m9T9X9Y:r;R=l!j$Uc#W%b'w'}(i(p)R)S)X)]+a-k-p-u-z.a.g/O0Q2^2n3Q3c4_4f6Y6h6s8q:[;T;k;x<R<Y!P<i)U)g,v.m1y1|3V3a3b3f3l6S6t6y6z7r8m9T9X9Y:r;R=l!f$Yc#W%b'w'}(i(p)X)]+a-k-p-u-z.a.g/O0Q2^2n3Q3c4_4f6Y6h6s8q:[;T;k;x<R<YQ3p/Wz=x)U)g,v.m1y1|3V3f3l6S6t6y6z7r8m9T9X9Y:r;R=lQ=}>PR>O>Q'QkOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k%^%d%q&^&a&b&e&g&h&j&n&v&z'T'h'x'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xS$lh$mR3i.s'XgOPWXYZhrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k$m%^%d%q&^&a&b&e&g&h&j&n&v&z'T'h'x'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.s.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xT$hf$nQ$ffS)`$i)dR)l$nT$gf$nT)b$i)d'XhOPWXYZhrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$Y$_$c$k$m%^%d%q&^&a&b&e&g&h&j&n&v&z'T'h'x'z(Q([(m(q(u)i)t*v+O+j,[,`,e,q,t-U-^-r-{.X.e.l.s.t/}0S0a1Q1b1c1d1f1j1m1o2O2`2o2y3R3h4z4}5b5t5v5w6Q6Z6p8O8Y8g8s9k:Y:^;V;m;z<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=xT$lh$mQ$ohR)k$m%^jOPWXYZrstu!X!^!l#Q#U#X#b#l#r#v#y#|#}$O$P$Q$R$S$T$U$V$W$_$c%^%d%q&^&a&b&e&g&h&j&n&v'T'h'x'z(Q([(m(q(u)t*v+O+j,[,`,e-U-^-r-{.X.e.l/}0S0a1Q1b1c1d1f1j1m1o2`2o2y3R4}5b5t5v5w6Z6p8O8Y8g8s:^;V;m;z!s=v$Y$k&z)i,q,t.t2O3h4z6Q9k:Y<W<Z<[<]<`<a<b<c<d<e<f<g<h<i<j<k<l<p<y<z<{<}=U=V=[=]=x#alOPXZr!X!^!l#Q#b#l#y$k%^&^&a&b&e&g&h&j&n&v'T(u)i+O+j,[,`,e-U.X.t/}1Q1b1c1d1f1j1m1o2y3h4}5b5t5v5w6p8O8Y8gv${i#u%U%V%Z)y){*T*i*j.b/a0P3p4Y9[=u=}>O!z(l#s$a$b$v$y)p)|*Z*}+Q+o+r.W/b/d0t0w1P2x3z4S4a4c5a6m7T7^8V9P9{:g:};^<s<u<w=O=Q=S=W=Y=^>R>SQ*s%XQ/P)ug3e<n<o<t<v<x=P=R=T=X=Z=_v$wi#u%U%V%Z)y){*T*i*j.b/a0P3p4Y9[=u=}>OQ*V$xS*`$z*cQ*t%YQ/o*a!z=h#s$a$b$v$y)p)|*Z*}+Q+o+r.W/b/d0t0w1P2x3z4S4a4c5a6m7T7^8V9P9{:g:};^<s<u<w=O=Q=S=W=Y=^>R>Sf=i<n<o<t<v<x=P=R=T=X=Z=_Q=m=yQ=n=zQ=o={R=p=|v${i#u%U%V%Z)y){*T*i*j.b/a0P3p4Y9[=u=}>O!z(l#s$a$b$v$y)p)|*Z*}+Q+o+r.W/b/d0t0w1P2x3z4S4a4c5a6m7T7^8V9P9{:g:};^<s<u<w=O=Q=S=W=Y=^>R>Sg3e<n<o<t<v<x=P=R=T=X=Z=_lnOXr!X#b%^&e&g&h&j,`,e1j1mQ*Y$yQ,n&qQ,o&sR3y/b$Y$|i#s#u$a$b$v$y%U%V%Z)p)y){)|*T*Z*i*j*}+Q+o+r.W.b/a/b/d0P0t0w1P2x3p3z4S4Y4a4c5a6m7T7^8V9P9[9{:g:};^<n<o<s<t<u<v<w<x=O=P=Q=R=S=T=W=X=Y=Z=^=_=u=}>O>R>SQ+q&PQ0v+sQ4v0uR7o4wT*b$z*cS*b$z*cT5T0}5US/m*_4}T4W/u8OQ+R%hQ/n*`Q0]+SQ1T+|Q5e1UQ8[5fQ9n7sQ:O8]Q:t9oQ;P:PQ;c:wQ;s;dQ<O;tR<T<Pn)y$t(n*u/`/w/x3O3w4^6}7`:k=g=s=t!W=O(j)Z*P*X._.{/W/e0U0s0u2}3x3|4u4w6q6r7U7Y7b7d9`9d;_>P>Q]=P3d6x9U:i:j;|p){$t(n*u/U/`/w/x3O3w4^6}7`:k=g=s=t!Y=Q(j)Z*P*X._.{/W/e0U0s0u2{2}3x3|4u4w6q6r7U7Y7b7d9`9d;_>P>Q_=R3d6x9U9V:i:j;|pmOXr!T!X#b%^&[&e&g&h&j,`,e1j1mQ&X!SR,[&bpmOXr!T!X#b%^&[&e&g&h&j,`,e1j1mR&X!SQ+u&QR0r+nqmOXr!T!X#b%^&[&e&g&h&j,`,e1j1mQ1O+zS5`1R1SU8U5^5_5cS9z8W8XS:{9y9|Q;g:|R;v;hQ&`!TR,U&[R5l1[S%pz%uR0h+_Q&e!UR,`&fR,f&kT1k,e1mR,j&lQ,i&lR1t,jQ'o!yR-l'oQrOQ#bXT%ar#bQ!|TR'q!|Q#PUR's#PQ)r$sR.|)rQ#SVR'u#SQ#VWU'{#V'|-sQ'|#WR-s'}Q,y&{R2Q,yQ.c(nR3P.cQ.f(pS3S.f3TR3T.gQ-Q'RR2U-Qr_OXr!T!X#b%^&[&^&e&g&h&j,`,e1j1mU!mQ'R-QS#eZ%[Y#o_!m#e-}5OQ-}(_T5O0}5US#]W%wU(S#](T-tQ(T#^R-t(OQ,|'OR2S,|Q(`#hQ-w(XW.R(`-w2l6gQ2l-xR6g2mQ)d$iR.u)dQ$mhR)j$mQ$`cU)Y$`-o<mQ-o<YR<m)gQ/Z*QW3s/Z3t7R9_U3t/[/]/^S7R3u3vR9_7S#m)w$t(j(n)Z*P*X*p*q*u.].^._.{/U/V/W/`/e/w/x0U0s0u2{2|2}3O3d3w3x3|4^4u4w6q6r6v6w6x6}7U7Y7`7b7d9U9V9W9`9d:i:j:k;_;|=g=s=t>P>QQ/c*XU3{/c3}7VQ3}/eR7V3|Q*c$zR/q*cQ*l%OR/z*lQ4b0UR7c4bQ+l%zR0q+lQ4y0xS7q4y9lR9l7rQ+w&RR0{+wQ5U0}R7|5UQ1Z,RS5j1Z8`R8`5lQ0c+ZW4k0c4m7i9hQ4m0fQ7i4lR9h7jQ+`%pR0i+`Q1m,eR5z1mWqOXr#bQ&i!XQ*x%^Q,_&eQ,a&gQ,b&hQ,d&jQ1h,`S1k,e1mR5y1jQ%`oQ&m!]Q&p!_Q&r!`Q&t!aU'g!o5P5QQ+T%jQ+g%vQ+m%{Q,T&`Q,l&oY-]']'i'j'm8QQ-j'eQ/p*bQ0^+US1^,U,XQ1u,kQ1v,nQ1w,oQ2]-[[2_-_-`-c-i-k9wQ4d0_Q4p0lQ4t0sQ5d1TQ5n1`Q5x1iY6X2^2a2d2f2gQ6[2bQ7e4eQ7m4rQ7n4uQ7{5TQ8Z5eQ8a5mY8p6Y6^6`6b6cQ8r6]Q9i7kQ9m7sQ9}8[Q:S8bY:Z8q8u8w8y8zQ:]8tQ:q9jS:s9n9oQ;O:OW;S:[:`:b:dQ;U:_S;a:t:wQ;i;PU;j;T;X;ZQ;l;WS;r;c;dS;w;k;oQ;y;nS;};s;tQ<Q;xS<S<O<PQ<U<RR<V<TQ%jwQ'V!fQ'e!oU+U%k%l%mQ,s&xU-W'W'X'YS-[']'kQ/g*]S0_+V+WQ1},uS2Z-X-YS2b-a-cQ4Q/kQ4e0`Q6T2TQ6W2[S6]2c2gQ7Z4US8t6_6cS:_8v8zQ;W:aR;n;YS$ui=uR*m%PU%Oi%P=uR/y*kQ$tiS(j#s+QQ(n#uS)Z$a$bQ*P$vQ*X$yQ*p%UQ*q%VQ*u%ZQ.]<sQ.^<uQ._<wQ.{)pQ/U)yQ/V){Q/W)|Q/`*TQ/e*ZQ/w*iQ/x*jh0U*}.W1P2x5a6m8V9P9{:g:};^Q0s+oQ0u+rQ2{=OQ2|=QQ2}=SQ3O.bS3d<n<oQ3w/aQ3x/bQ3|/dQ4^0PQ4u0tQ4w0wQ6q=WQ6r=YQ6v<tQ6w<vQ6x<xQ6}3pQ7U3zQ7Y4SQ7`4YQ7b4aQ7d4cQ9U=TQ9V=PQ9W=RQ9`7TQ9d7^Q:i=XQ:j=ZQ:k9[Q;_=^Q;|=_Q=g=uQ=s=}Q=t>OQ>P>RR>Q>SloOXr!X#b%^&e&g&h&j,`,e1j1mQ!dPS#dZ#lQ&o!^U'Z!l4}8OQ't#QQ(w#yQ)h$kS,X&^&aQ,]&bQ,k&nQ,p&vQ-S'TQ.i(uQ.y)iQ0X+OQ0o+jQ1e,[Q2X-UQ2v.XQ3k.tQ4[/}Q5_1QQ5p1bQ5q1cQ5s1dQ5u1fQ5|1oQ6l2yQ6{3hQ8X5bQ8f5tQ8h5vQ8i5wQ9R6pQ9|8YR:U8g#UcOPXZr!X!^!l#b#l#y%^&^&a&b&e&g&h&j&n&v'T(u+O+j,[,`,e-U.X/}1Q1b1c1d1f1j1m1o2y4}5b5t5v5w6p8O8Y8gQ#WWQ#cYQ%bsQ%ctQ%euS'w#U'zQ'}#XQ(i#rQ(p#vQ(x#|Q(y#}Q(z$OQ({$PQ(|$QQ(}$RQ)O$SQ)P$TQ)Q$UQ)R$VQ)S$WQ)U$YQ)X$_Q)]$cW)g$k)i.t3hQ*{%dQ+a%qS,v&z2OQ-k'hS-p'x-rQ-u(QQ-z([Q.a(mQ.g(qQ.k<WQ.m<ZQ.n<[Q.o<]Q/O)tQ0Q*vQ1y,qQ1|,tQ2^-^Q2n-{Q3Q.eQ3V<`Q3W<aQ3X<bQ3Y<cQ3Z<dQ3[<eQ3]<fQ3^<gQ3_<hQ3`<iQ3a<jQ3b<kQ3c.lQ3f<pQ3g<yQ3l<lQ4_0SQ4f0aQ6S<zQ6Y2`Q6h2oQ6s3RQ6t<{Q6y<}Q6z=UQ7r4zQ8m6QQ8q6ZQ9T=VQ9X=[Q9Y=]Q:[8sQ:r9kQ;R:YQ;T:^Q;k;VQ;x;mQ<R;zQ<Y#QR=l=xR#YWR&|!cU!oQ'R-QS&x!c,x[']!m!s!t!u!v!wS'k!p!r^'m!x5O5W5X5Y5Z5[S,u&y'QS-a'^'_W-c'`'a'b'c[-i'd7v7w7x7y8TQ2T-OS2c-b-dW2f-e9p9q9rU2g-f-g-hS5P0}5US6_2e2hU6b2i:u:vS6c2j2kS8v6a6dS8y6e;bQ8z6fS:a8x8{Q:d8|R;Y:cR(o#uR(r#vQ!dQT-P'R-QQ#m]R'[<XT#iZ%[S#hZ%[U%z|},^U(X#e#g#jS-x(Y(ZQ.P(_Q0p+kQ2m-yU2p-}.O.QS6i2q2rR8}6j`#[W#U#X%w'x(R+h-vt#fZ|}#e#g#j%[(Y(Z(_+k-y-}.O.Q2q2r6jQ1g,^Q1z,rQ6O1rQ8l6PT=d&z+iT#_W%wS#^W%wS'y#U(RS(O#X+hS,w&z+iT-q'x-vT'P!c%xQ$ifR)n$nT)c$i)dR3j.sT*S$v*UR*[$yQ0V*}Q2t.WQ5^1PQ6n2xQ8W5aQ9Q6mQ9y8VQ:e9PQ:|9{Q;]:gQ;h:}R;q;^lpOXr!X#b%^&e&g&h&j,`,e1j1mQ&_!TR,T&[V%{|},^R0y+tR,S&YQ%tzR+f%uR+[%oT&c!U&fT&d!U&fT1l,e1m",nodeNames:" ArithOp ArithOp LineComment BlockComment Script ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > TypeParamList TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . ?. PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewExpression new TypeArgList CompareOp < ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXStartTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody MethodDeclaration AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:363,context:trackNewline,nodeProps:[["group",-26,6,14,16,62,199,203,206,207,209,212,215,226,228,234,236,238,240,243,249,255,257,259,261,263,265,266,"Statement",-32,10,11,25,28,29,35,45,48,49,51,56,64,72,76,78,80,81,103,104,113,114,131,134,136,137,138,139,141,142,162,163,165,"Expression",-23,24,26,30,34,36,38,166,168,170,171,173,174,175,177,178,179,181,182,183,193,195,197,198,"Type",-3,84,96,102,"ClassItem"],["openedBy",31,"InterpolationStart",50,"[",54,"{",69,"(",143,"JSXStartTag",155,"JSXStartTag JSXStartCloseTag"],["closedBy",33,"InterpolationEnd",44,"]",55,"}",70,")",144,"JSXSelfCloseEndTag JSXEndTag",160,"JSXEndTag"]],propSources:[jsHighlight],skippedNodes:[0,3,4,269],repeatNodeCount:32,tokenData:"$>y(CSR!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tu>PuvBavwDxwxGgxyMvyz! Qz{!![{|!%O|}!&]}!O!%O!O!P!'g!P!Q!1w!Q!R#0t!R![#3T![!]#@T!]!^#Aa!^!_#Bk!_!`#GS!`!a#In!a!b#N{!b!c$$z!c!}>P!}#O$&U#O#P$'`#P#Q$,w#Q#R$.R#R#S>P#S#T$/`#T#o$0j#o#p$4z#p#q$5p#q#r$7Q#r#s$8^#s$f%Z$f$g+g$g#BY>P#BY#BZ$9h#BZ$IS>P$IS$I_$9h$I_$I|>P$I|$I}$<s$I}$JO$<s$JO$JT>P$JT$JU$9h$JU$KV>P$KV$KW$9h$KW&FU>P&FU&FV$9h&FV;'S>P;'S;=`BZ<%l?HT>P?HT?HU$9h?HUO>P(n%d_$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$d&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$d&j'z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU'z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$d&j'wpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU'wpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX'wp'z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z(CS+rq$d&j'wp'z!b'm(;dOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z(CS.ST'x#S$d&j'n(;dO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c(CS.n_$d&j'wp'z!b'n(;dOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`/x`$d&j!l$Ip'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S1V`#q$Id$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S2d_#q$Id$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$2b3l_'v$(n$d&j'z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k*r4r_$d&j'z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k)`5vX$d&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q)`6jT$_#t$d&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#t6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y#t7bO$_#t#t7eP;=`<%l6y)`7kP;=`<%l5q*r7w]$_#t$d&j'z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}%W8uZ'z!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p%W9oU$_#t'z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}%W:UP;=`<%l8p*r:[P;=`<%l4k#%|:hg$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}st%Ztu<Puw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}<P!}#O%Z#O#P&c#P#R%Z#R#S<P#S#T%Z#T#o<P#o#p*g#p$g%Z$g;'S<P;'S;=`=y<%lO<P#%|<[i$d&j(`!L^'wp'z!bOY%ZYZ&cZr%Zrs&}st%Ztu<Puw%Zwx(rx!Q%Z!Q![<P![!^%Z!^!_*g!_!c%Z!c!}<P!}#O%Z#O#P&c#P#R%Z#R#S<P#S#T%Z#T#o<P#o#p*g#p$g%Z$g;'S<P;'S;=`=y<%lO<P#%|=|P;=`<%l<P(CS>`k$d&j'wp'z!b(U!LY't&;d$W#tOY%ZYZ&cZr%Zrs&}st%Ztu>Puw%Zwx(rx}%Z}!O@T!O!Q%Z!Q![>P![!^%Z!^!_*g!_!c%Z!c!}>P!}#O%Z#O#P&c#P#R%Z#R#S>P#S#T%Z#T#o>P#o#p*g#p$g%Z$g;'S>P;'S;=`BZ<%lO>P+d@`k$d&j'wp'z!b$W#tOY%ZYZ&cZr%Zrs&}st%Ztu@Tuw%Zwx(rx}%Z}!O@T!O!Q%Z!Q![@T![!^%Z!^!_*g!_!c%Z!c!}@T!}#O%Z#O#P&c#P#R%Z#R#S@T#S#T%Z#T#o@T#o#p*g#p$g%Z$g;'S@T;'S;=`BT<%lO@T+dBWP;=`<%l@T(CSB^P;=`<%l>P%#SBl`$d&j'wp'z!b#i$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#SCy_$d&j#{$Id'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%DfETa(i%<v$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sv%ZvwFYwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#SFe`$d&j#u$Id'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$2bGp_'y$)`$d&j'wpOYHoYZIuZrHorsIuswHowxKVx!^Ho!^!_LX!_#OHo#O#PIu#P#oHo#o#pLX#p;'SHo;'S;=`Mp<%lOHo*QHv_$d&j'wpOYHoYZIuZrHorsIuswHowxKVx!^Ho!^!_LX!_#OHo#O#PIu#P#oHo#o#pLX#p;'SHo;'S;=`Mp<%lOHo)`IzX$d&jOwIuwx6cx!^Iu!^!_Jg!_#oIu#o#pJg#p;'SIu;'S;=`KP<%lOIu#tJjTOwJgwx7]x;'SJg;'S;=`Jy<%lOJg#tJ|P;=`<%lJg)`KSP;=`<%lIu*QK`]$_#t$d&j'wpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r$fL^Z'wpOYLXYZJgZrLXrsJgswLXwxMPx#OLX#O#PJg#P;'SLX;'S;=`Mj<%lOLX$fMWU$_#t'wpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r$fMmP;=`<%lLX*QMsP;=`<%lHo(*QNR_!h(!b$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'l! ]_!gM|$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+h!!ib$d&j'wp'z!b'u#)d#j$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!#q{!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S!#|`$d&j'wp'z!b#g$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&-O!%Z`$d&j'wp'z!bk&%`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&C[!&h_!V&;l$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS!'rc$d&j'wp'z!by'<nOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!(}!P!Q%Z!Q![!+g![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'d!)Wa$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!*]!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'d!*h_!UMt$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!+rg$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!+g![!^%Z!^!_*g!_!g%Z!g!h!-Z!h#O%Z#O#P&c#P#R%Z#R#S!+g#S#X%Z#X#Y!-Z#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!-dg$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!.{|}%Z}!O!.{!O!Q%Z!Q![!0a![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!0a#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!/Uc$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!0a![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!0a#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!0lc$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!0a![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!0a#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS!2Sf$d&j'wp'z!b#h$IdOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}xz!3hz{#$s{!P!3h!P!Q#&Y!Q!^!3h!^!_!Mh!_!`#-x!`!a#/_!a!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h(r!3sb$d&j'wp'z!b!RSOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}x!P!3h!P!Q!Kh!Q!^!3h!^!_!Mh!_!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h(Q!5U`$d&j'z!b!RSOY!4{YZ&cZw!4{wx!6Wx!P!4{!P!Q!=o!Q!^!4{!^!_!?g!_!}!4{!}#O!Bn#O#P!<w#P#o!4{#o#p!?g#p;'S!4{;'S;=`!Cw<%lO!4{&n!6_^$d&j!RSOY!6WYZ&cZ!P!6W!P!Q!7Z!Q!^!6W!^!_!8g!_!}!6W!}#O!;U#O#P!<w#P#o!6W#o#p!8g#p;'S!6W;'S;=`!=i<%lO!6W&n!7ba$d&j!RSO!^&c!_#Z&c#Z#[!7Z#[#]&c#]#^!7Z#^#a&c#a#b!7Z#b#g&c#g#h!7Z#h#i&c#i#j!7Z#j#m&c#m#n!7Z#n#o&c#p;'S&c;'S;=`&w<%lO&cS!8lX!RSOY!8gZ!P!8g!P!Q!9X!Q!}!8g!}#O!9p#O#P!:o#P;'S!8g;'S;=`!;O<%lO!8gS!9^U!RS#Z#[!9X#]#^!9X#a#b!9X#g#h!9X#i#j!9X#m#n!9XS!9sVOY!9pZ#O!9p#O#P!:Y#P#Q!8g#Q;'S!9p;'S;=`!:i<%lO!9pS!:]SOY!9pZ;'S!9p;'S;=`!:i<%lO!9pS!:lP;=`<%l!9pS!:rSOY!8gZ;'S!8g;'S;=`!;O<%lO!8gS!;RP;=`<%l!8g&n!;Z[$d&jOY!;UYZ&cZ!^!;U!^!_!9p!_#O!;U#O#P!<P#P#Q!6W#Q#o!;U#o#p!9p#p;'S!;U;'S;=`!<q<%lO!;U&n!<UX$d&jOY!;UYZ&cZ!^!;U!^!_!9p!_#o!;U#o#p!9p#p;'S!;U;'S;=`!<q<%lO!;U&n!<tP;=`<%l!;U&n!<|X$d&jOY!6WYZ&cZ!^!6W!^!_!8g!_#o!6W#o#p!8g#p;'S!6W;'S;=`!=i<%lO!6W&n!=lP;=`<%l!6W(Q!=xi$d&j'z!b!RSOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#Z&}#Z#[!=o#[#]&}#]#^!=o#^#a&}#a#b!=o#b#g&}#g#h!=o#h#i&}#i#j!=o#j#m&}#m#n!=o#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!f!?nZ'z!b!RSOY!?gZw!?gwx!8gx!P!?g!P!Q!@a!Q!}!?g!}#O!Ap#O#P!:o#P;'S!?g;'S;=`!Bh<%lO!?g!f!@hb'z!b!RSOY'}Zw'}x#O'}#P#Z'}#Z#[!@a#[#]'}#]#^!@a#^#a'}#a#b!@a#b#g'}#g#h!@a#h#i'}#i#j!@a#j#m'}#m#n!@a#n;'S'};'S;=`(f<%lO'}!f!AuX'z!bOY!ApZw!Apwx!9px#O!Ap#O#P!:Y#P#Q!?g#Q;'S!Ap;'S;=`!Bb<%lO!Ap!f!BeP;=`<%l!Ap!f!BkP;=`<%l!?g(Q!Bu^$d&j'z!bOY!BnYZ&cZw!Bnwx!;Ux!^!Bn!^!_!Ap!_#O!Bn#O#P!<P#P#Q!4{#Q#o!Bn#o#p!Ap#p;'S!Bn;'S;=`!Cq<%lO!Bn(Q!CtP;=`<%l!Bn(Q!CzP;=`<%l!4{'`!DW`$d&j'wp!RSOY!C}YZ&cZr!C}rs!6Ws!P!C}!P!Q!EY!Q!^!C}!^!_!GQ!_!}!C}!}#O!JX#O#P!<w#P#o!C}#o#p!GQ#p;'S!C};'S;=`!Kb<%lO!C}'`!Eci$d&j'wp!RSOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#Z(r#Z#[!EY#[#](r#]#^!EY#^#a(r#a#b!EY#b#g(r#g#h!EY#h#i(r#i#j!EY#j#m(r#m#n!EY#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rt!GXZ'wp!RSOY!GQZr!GQrs!8gs!P!GQ!P!Q!Gz!Q!}!GQ!}#O!IZ#O#P!:o#P;'S!GQ;'S;=`!JR<%lO!GQt!HRb'wp!RSOY)rZr)rs#O)r#P#Z)r#Z#[!Gz#[#])r#]#^!Gz#^#a)r#a#b!Gz#b#g)r#g#h!Gz#h#i)r#i#j!Gz#j#m)r#m#n!Gz#n;'S)r;'S;=`*Z<%lO)rt!I`X'wpOY!IZZr!IZrs!9ps#O!IZ#O#P!:Y#P#Q!GQ#Q;'S!IZ;'S;=`!I{<%lO!IZt!JOP;=`<%l!IZt!JUP;=`<%l!GQ'`!J`^$d&j'wpOY!JXYZ&cZr!JXrs!;Us!^!JX!^!_!IZ!_#O!JX#O#P!<P#P#Q!C}#Q#o!JX#o#p!IZ#p;'S!JX;'S;=`!K[<%lO!JX'`!K_P;=`<%l!JX'`!KeP;=`<%l!C}(r!Ksk$d&j'wp'z!b!RSOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#Z%Z#Z#[!Kh#[#]%Z#]#^!Kh#^#a%Z#a#b!Kh#b#g%Z#g#h!Kh#h#i%Z#i#j!Kh#j#m%Z#m#n!Kh#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#W!Mq]'wp'z!b!RSOY!MhZr!Mhrs!?gsw!Mhwx!GQx!P!Mh!P!Q!Nj!Q!}!Mh!}#O#!U#O#P!:o#P;'S!Mh;'S;=`##U<%lO!Mh#W!Nse'wp'z!b!RSOY*gZr*grs'}sw*gwx)rx#O*g#P#Z*g#Z#[!Nj#[#]*g#]#^!Nj#^#a*g#a#b!Nj#b#g*g#g#h!Nj#h#i*g#i#j!Nj#j#m*g#m#n!Nj#n;'S*g;'S;=`+Z<%lO*g#W#!]Z'wp'z!bOY#!UZr#!Urs!Apsw#!Uwx!IZx#O#!U#O#P!:Y#P#Q!Mh#Q;'S#!U;'S;=`##O<%lO#!U#W##RP;=`<%l#!U#W##XP;=`<%l!Mh(r##e`$d&j'wp'z!bOY##[YZ&cZr##[rs!Bnsw##[wx!JXx!^##[!^!_#!U!_#O##[#O#P!<P#P#Q!3h#Q#o##[#o#p#!U#p;'S##[;'S;=`#$g<%lO##[(r#$jP;=`<%l##[(r#$pP;=`<%l!3h(CS#%Qb$d&j'wp'z!b'o(;d!RSOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}x!P!3h!P!Q!Kh!Q!^!3h!^!_!Mh!_!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h(CS#&e_$d&j'wp'z!bR(;dOY#&YYZ&cZr#&Yrs#'dsw#&Ywx#*tx!^#&Y!^!_#,s!_#O#&Y#O#P#(f#P#o#&Y#o#p#,s#p;'S#&Y;'S;=`#-r<%lO#&Y(Bb#'m]$d&j'z!bR(;dOY#'dYZ&cZw#'dwx#(fx!^#'d!^!_#)w!_#O#'d#O#P#(f#P#o#'d#o#p#)w#p;'S#'d;'S;=`#*n<%lO#'d(AO#(mX$d&jR(;dOY#(fYZ&cZ!^#(f!^!_#)Y!_#o#(f#o#p#)Y#p;'S#(f;'S;=`#)q<%lO#(f(;d#)_SR(;dOY#)YZ;'S#)Y;'S;=`#)k<%lO#)Y(;d#)nP;=`<%l#)Y(AO#)tP;=`<%l#(f(<v#*OW'z!bR(;dOY#)wZw#)wwx#)Yx#O#)w#O#P#)Y#P;'S#)w;'S;=`#*h<%lO#)w(<v#*kP;=`<%l#)w(Bb#*qP;=`<%l#'d(Ap#*}]$d&j'wpR(;dOY#*tYZ&cZr#*trs#(fs!^#*t!^!_#+v!_#O#*t#O#P#(f#P#o#*t#o#p#+v#p;'S#*t;'S;=`#,m<%lO#*t(<U#+}W'wpR(;dOY#+vZr#+vrs#)Ys#O#+v#O#P#)Y#P;'S#+v;'S;=`#,g<%lO#+v(<U#,jP;=`<%l#+v(Ap#,pP;=`<%l#*t(=h#,|Y'wp'z!bR(;dOY#,sZr#,srs#)wsw#,swx#+vx#O#,s#O#P#)Y#P;'S#,s;'S;=`#-l<%lO#,s(=h#-oP;=`<%l#,s(CS#-uP;=`<%l#&Y%#W#.Vb$d&j#{$Id'wp'z!b!RSOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}x!P!3h!P!Q!Kh!Q!^!3h!^!_!Mh!_!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h+h#/lb$T#t$d&j'wp'z!b!RSOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}x!P!3h!P!Q!Kh!Q!^!3h!^!_!Mh!_!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h$/l#1Pp$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!+g!P!Q%Z!Q![#3T![!^%Z!^!_*g!_!g%Z!g!h!-Z!h#O%Z#O#P&c#P#R%Z#R#S#3T#S#U%Z#U#V#6_#V#X%Z#X#Y!-Z#Y#b%Z#b#c#5T#c#d#9g#d#l%Z#l#m#<i#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#3`k$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!+g!P!Q%Z!Q![#3T![!^%Z!^!_*g!_!g%Z!g!h!-Z!h#O%Z#O#P&c#P#R%Z#R#S#3T#S#X%Z#X#Y!-Z#Y#b%Z#b#c#5T#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#5`_$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#6hd$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#7v!R!S#7v!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#7v#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#8Rf$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#7v!R!S#7v!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#7v#S#b%Z#b#c#5T#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#9pc$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#:{!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#:{#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#;We$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#:{!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#:{#S#b%Z#b#c#5T#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#<rg$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#>Z![!^%Z!^!_*g!_!c%Z!c!i#>Z!i#O%Z#O#P&c#P#R%Z#R#S#>Z#S#T%Z#T#Z#>Z#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#>fi$d&j'wp'z!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#>Z![!^%Z!^!_*g!_!c%Z!c!i#>Z!i#O%Z#O#P&c#P#R%Z#R#S#>Z#S#T%Z#T#Z#>Z#Z#b%Z#b#c#5T#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%Gh#@b_!a$b$d&j#y%<f'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Al_^l$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS#Bz^'}!*v!e'.r'wp'z!b$U)d(mSOY*gZr*grs'}sw*gwx)rx!P*g!P!Q#Cv!Q!^*g!^!_#Dl!_!`#F^!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#DPX$f&j'wp'z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#DuZ#k$Id'wp'z!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Eh!`#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#EqX#{$Id'wp'z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#FgX#l$Id'wp'z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g%Gh#G_a#X%?x$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a#Hd!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#W#Ho_#d$Ih$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%Gh#I}adBf#l$Id$a#|$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`#KS!`!a#L^!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S#K__#l$Id$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S#Lia#k$Id$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`!a#Mn!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S#My`#k$Id$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+h$ Wc(a$Ip$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P$!c!P!^%Z!^!_*g!_!a%Z!a!b$#m!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+`$!n_z'#p$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$#x`$d&j#v$Id'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&^$%V_!x!Ln$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(@^$&a_|(8n$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$'eZ$d&jO!^$(W!^!_$(n!_#i$(W#i#j$(s#j#l$(W#l#m$*f#m#o$(W#o#p$(n#p;'S$(W;'S;=`$,q<%lO$(W(n$(_T[#S$d&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$(sO[#S(n$(x[$d&jO!Q&c!Q![$)n![!^&c!_!c&c!c!i$)n!i#T&c#T#Z$)n#Z#o&c#o#p$,U#p;'S&c;'S;=`&w<%lO&c(n$)sZ$d&jO!Q&c!Q![$*f![!^&c!_!c&c!c!i$*f!i#T&c#T#Z$*f#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$*kZ$d&jO!Q&c!Q![$+^![!^&c!_!c&c!c!i$+^!i#T&c#T#Z$+^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$+cZ$d&jO!Q&c!Q![$(W![!^&c!_!c&c!c!i$(W!i#T&c#T#Z$(W#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$,XR!Q![$,b!c!i$,b#T#Z$,b#S$,eS!Q![$,b!c!i$,b#T#Z$,b#q#r$(n(n$,tP;=`<%l$(W!'l$-S_!SM|$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$.^`#s$Id$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&,v$/k_$d&j'wp'z!b(R&%WOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS$0yk$d&j'wp'z!b(U!LY't&;d$Y#tOY%ZYZ&cZr%Zrs&}st%Ztu$0juw%Zwx(rx}%Z}!O$2n!O!Q%Z!Q![$0j![!^%Z!^!_*g!_!c%Z!c!}$0j!}#O%Z#O#P&c#P#R%Z#R#S$0j#S#T%Z#T#o$0j#o#p*g#p$g%Z$g;'S$0j;'S;=`$4t<%lO$0j+d$2yk$d&j'wp'z!b$Y#tOY%ZYZ&cZr%Zrs&}st%Ztu$2nuw%Zwx(rx}%Z}!O$2n!O!Q%Z!Q![$2n![!^%Z!^!_*g!_!c%Z!c!}$2n!}#O%Z#O#P&c#P#R%Z#R#S$2n#S#T%Z#T#o$2n#o#p*g#p$g%Z$g;'S$2n;'S;=`$4n<%lO$2n+d$4qP;=`<%l$2n(CS$4wP;=`<%l$0j!5p$5TX!X!3l'wp'z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g%Df$5{a(h%<v$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$#m#q;'S%Z;'S;=`+a<%lO%Z%#`$7__!W$I`o`$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(r$8i_!mS$d&j'wp'z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS$9y|$d&j'wp'z!b'm(;d(U!LY't&;d$W#tOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%Ztu>Puw%Zwx(rx}%Z}!O@T!O!Q%Z!Q![>P![!^%Z!^!_*g!_!c%Z!c!}>P!}#O%Z#O#P&c#P#R%Z#R#S>P#S#T%Z#T#o>P#o#p*g#p$f%Z$f$g+g$g#BY>P#BY#BZ$9h#BZ$IS>P$IS$I_$9h$I_$JT>P$JT$JU$9h$JU$KV>P$KV$KW$9h$KW&FU>P&FU&FV$9h&FV;'S>P;'S;=`BZ<%l?HT>P?HT?HU$9h?HUO>P(CS$=Uk$d&j'wp'z!b'n(;d(U!LY't&;d$W#tOY%ZYZ&cZr%Zrs&}st%Ztu>Puw%Zwx(rx}%Z}!O@T!O!Q%Z!Q![>P![!^%Z!^!_*g!_!c%Z!c!}>P!}#O%Z#O#P&c#P#R%Z#R#S>P#S#T%Z#T#o>P#o#p*g#p$g%Z$g;'S>P;'S;=`BZ<%lO>P",tokenizers:[noSemicolon,incdecToken,2,3,4,5,6,7,8,9,10,11,12,13,insertSemicolon,new LocalTokenGroup("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOq~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!O~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(T~~",141,326),new LocalTokenGroup("j~RQYZXz{^~^O'q~~aP!P!Qd~iO'r~~",25,308)],topRules:{Script:[0,5],SingleExpression:[1,267],SingleClassItem:[2,268]},dialects:{jsx:13525,ts:13527},dynamicPrecedences:{76:1,78:1,163:1,191:1},specialized:[{term:312,get:dt=>spec_identifier[dt]||-1},{term:328,get:dt=>spec_word[dt]||-1},{term:67,get:dt=>spec_LessThan[dt]||-1}],tokenPrec:13551}),snippets=[snippetCompletion("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),snippetCompletion("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),snippetCompletion("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),snippetCompletion("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),snippetCompletion("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),snippetCompletion(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),snippetCompletion("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),snippetCompletion(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),snippetCompletion(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),snippetCompletion('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),snippetCompletion('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],cache=new NodeWeakMap,ScopeNodes=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function defID(dt){return($,lt)=>{let ft=$.node.getChild("VariableDefinition");return ft&&lt(ft,dt),!0}}const functionContext=["FunctionDeclaration"],gatherCompletions={FunctionDeclaration:defID("function"),ClassDeclaration:defID("class"),ClassExpression:()=>!0,EnumDeclaration:defID("constant"),TypeAliasDeclaration:defID("type"),NamespaceDeclaration:defID("namespace"),VariableDefinition(dt,$){dt.matchContext(functionContext)||$(dt,"variable")},TypeDefinition(dt,$){$(dt,"type")},__proto__:null};function getScope(dt,$){let lt=cache.get($);if(lt)return lt;let ft=[],St=!0;function Tt(Ct,At){let Rt=dt.sliceString(Ct.from,Ct.to);ft.push({label:Rt,type:At})}return $.cursor(IterMode.IncludeAnonymous).iterate(Ct=>{if(St)St=!1;else if(Ct.name){let At=gatherCompletions[Ct.name];if(At&&At(Ct,Tt)||ScopeNodes.has(Ct.name))return!1}else if(Ct.to-Ct.from>8192){for(let At of getScope(dt,Ct.node))ft.push(At);return!1}}),cache.set($,ft),ft}const Identifier=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,dontComplete=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName"];function localCompletionSource(dt){let $=syntaxTree(dt.state).resolveInner(dt.pos,-1);if(dontComplete.indexOf($.name)>-1)return null;let lt=$.name=="VariableName"||$.to-$.from<20&&Identifier.test(dt.state.sliceDoc($.from,$.to));if(!lt&&!dt.explicit)return null;let ft=[];for(let St=$;St;St=St.parent)ScopeNodes.has(St.name)&&(ft=ft.concat(getScope(dt.state.doc,St)));return{options:ft,from:lt?$.from:dt.pos,validFor:Identifier}}const javascriptLanguage=LRLanguage.define({name:"javascript",parser:parser.configure({props:[indentNodeProp.add({IfStatement:continuedIndent({except:/^\s*({|else\b)/}),TryStatement:continuedIndent({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:flatIndent,SwitchBody:dt=>{let $=dt.textAfter,lt=/^\s*\}/.test($),ft=/^\s*(case|default)\b/.test($);return dt.baseIndent+(lt?0:ft?1:2)*dt.unit},Block:delimitedIndent({closing:"}"}),ArrowFunction:dt=>dt.baseIndent+dt.unit,"TemplateString BlockComment":()=>null,"Statement Property":continuedIndent({except:/^{/}),JSXElement(dt){let $=/^\s*<\//.test(dt.textAfter);return dt.lineIndent(dt.node.from)+($?0:dt.unit)},JSXEscape(dt){let $=/\s*\}/.test(dt.textAfter);return dt.lineIndent(dt.node.from)+($?0:dt.unit)},"JSXOpenTag JSXSelfClosingTag"(dt){return dt.column(dt.node.from)+dt.unit}}),foldNodeProp.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":foldInside,BlockComment(dt){return{from:dt.from+2,to:dt.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),jsxSublanguage={test:dt=>/^JSX/.test(dt.name),facet:defineLanguageFacet({commentTokens:{block:{open:"{/*",close:"*/}"}}})},typescriptLanguage=javascriptLanguage.configure({dialect:"ts"},"typescript"),jsxLanguage=javascriptLanguage.configure({dialect:"jsx",props:[sublanguageProp.add(dt=>dt.isTop?[jsxSublanguage]:void 0)]}),tsxLanguage=javascriptLanguage.configure({dialect:"jsx ts",props:[sublanguageProp.add(dt=>dt.isTop?[jsxSublanguage]:void 0)]},"typescript"),keywords="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(dt=>({label:dt,type:"keyword"}));function javascript(dt={}){let $=dt.jsx?dt.typescript?tsxLanguage:jsxLanguage:dt.typescript?typescriptLanguage:javascriptLanguage;return new LanguageSupport($,[javascriptLanguage.data.of({autocomplete:ifNotIn(dontComplete,completeFromList(snippets.concat(keywords)))}),javascriptLanguage.data.of({autocomplete:localCompletionSource}),dt.jsx?autoCloseTags:[]])}function findOpenTag(dt){for(;;){if(dt.name=="JSXOpenTag"||dt.name=="JSXSelfClosingTag"||dt.name=="JSXFragmentTag")return dt;if(dt.name=="JSXEscape"||!dt.parent)return null;dt=dt.parent}}function elementName(dt,$,lt=dt.length){for(let ft=$==null?void 0:$.firstChild;ft;ft=ft.nextSibling)if(ft.name=="JSXIdentifier"||ft.name=="JSXBuiltin"||ft.name=="JSXNamespacedName"||ft.name=="JSXMemberExpression")return dt.sliceString(ft.from,Math.min(ft.to,lt));return""}const android=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),autoCloseTags=EditorView.inputHandler.of((dt,$,lt,ft)=>{if((android?dt.composing:dt.compositionStarted)||dt.state.readOnly||$!=lt||ft!=">"&&ft!="/"||!javascriptLanguage.isActiveAt(dt.state,$,-1))return!1;let{state:St}=dt,Tt=St.changeByRange(Ct=>{var At,Rt;let{head:kt}=Ct,Nt=syntaxTree(St).resolveInner(kt,-1),Bt;if(Nt.name=="JSXStartTag"&&(Nt=Nt.parent),ft==">"&&Nt.name=="JSXFragmentTag")return{range:EditorSelection.cursor(kt+1),changes:{from:kt,insert:"></>"}};if(ft=="/"&&Nt.name=="JSXFragmentTag"){let Ut=Nt.parent,zt=Ut==null?void 0:Ut.parent;if(Ut.from==kt-1&&((At=zt.lastChild)===null||At===void 0?void 0:At.name)!="JSXEndTag"&&(Bt=elementName(St.doc,zt==null?void 0:zt.firstChild,kt))){let Zt=`/${Bt}>`;return{range:EditorSelection.cursor(kt+Zt.length),changes:{from:kt,insert:Zt}}}}else if(ft==">"){let Ut=findOpenTag(Nt);if(Ut&&((Rt=Ut.lastChild)===null||Rt===void 0?void 0:Rt.name)!="JSXEndTag"&&St.sliceDoc(kt,kt+2)!="</"&&(Bt=elementName(St.doc,Ut,kt)))return{range:EditorSelection.cursor(kt+1),changes:{from:kt,insert:`></${Bt}>`}}}return{range:Ct}});return Tt.changes.empty?!1:(dt.dispatch(Tt,{userEvent:"input.type",scrollIntoView:!0}),!0)}),BlockJavaScriptCodePanel=()=>{const dt=useRobartState(lt=>lt.editingBlockId),$=useRobartState(lt=>lt.blocks[dt??""]);return jsx("div",{className:"h-full w-full",children:jsx(ReactCodeMirror,{value:$==null?void 0:$.javaScript,className:"h-full w-full",extensions:[javascript()],readOnly:!0})})},RightPanel=()=>{const[dt,$]=reactExports.useState("simulation");return jsx(Fragment,{children:jsxs("div",{className:"flex flex-col gap-2 h-full",children:[jsx("div",{children:jsxs(Button.Group,{children:[jsx(Button,{color:dt=="simulation"?"blue":"gray",onClick:()=>$("simulation"),children:"Simulation"}),jsx(Button,{color:dt=="python"?"blue":"gray",onClick:()=>$("python"),children:"Python Code"}),jsx(Button,{color:dt=="javascript"?"blue":"gray",onClick:()=>$("javascript"),children:"JavaScript Code"})]})}),jsxs("div",{className:"flex-grow h-full",children:[dt=="simulation"&&jsx(SimulationPanel,{}),dt=="python"&&jsx(BlockPythonCodePanel,{}),dt=="javascript"&&jsx(BlockJavaScriptCodePanel,{})]})]})})},HoverTimelineBlock=({scale:dt,startTime:$,isOverlapping:lt})=>{const ft=useRobartState(Tt=>Tt.editingBlockId),St=useRobartState(Tt=>Tt.blocks[ft??""]);return $===void 0||!ft?jsx(Fragment,{}):jsx("div",{className:clsx("absolute top-1/2 flex h-5/6 -translate-y-1/2 items-center justify-center rounded-xl border border-dashed",lt?"border-red-500/50 bg-red-300/50 text-red-500/50":"border-green-500/50 bg-green-300/50 text-green-500/50"),style:{width:PIXELS_PER_SECOND*dt*St.duration,left:PIXELS_PER_SECOND*dt*$},children:lt?jsx(FontAwesomeIcon,{icon:faXmarkCircle}):jsx(FontAwesomeIcon,{icon:faPlusCircle})})},TimelineBlock=({item:dt,scale:$})=>{const lt=useRobartState(kt=>kt.blocks),ft=useRobartState(kt=>kt.removeTimelineItem),St=useRobartState(kt=>kt.timelineState.groups),Tt=useRobartState(kt=>kt.updateBlockInTimeline),Ct=useRobartState(kt=>kt.timelineState.mode),At=lt[dt.blockId],Rt=useDrag(({delta:[kt,Nt]})=>{if(Ct!=="MOVE")return;const Bt=convertPixelsToSeconds(kt,$),Ut=dt.startTime+Bt;blockOverlaps(St[dt.groupId],lt,Ut,At,dt.id)||Tt(dt.groupId,dt.id,Ut)});return jsx("div",{className:clsx("absolute top-1/2 flex h-5/6 -translate-y-1/2 items-center justify-center rounded-xl bg-purple-400 touch-none select-none",Ct==="MOVE"?"cursor-move":"",Ct==="ERASE"?"hover:bg-red-400":""),style:{width:PIXELS_PER_SECOND*$*At.duration,left:PIXELS_PER_SECOND*$*dt.startTime},onClick:()=>Ct==="ERASE"&&ft(dt.groupId,dt.id),...Rt(),children:jsx("span",{className:"block overflow-hidden text-ellipsis whitespace-nowrap",children:At.name})})},PIXELS_PER_SECOND=25,blockOverlaps=(dt,$,lt,ft,St)=>lt===void 0||lt<0||Object.values(dt.items).some(Tt=>{const Ct=Tt.startTime,At=Tt.startTime+$[Tt.blockId].duration,Rt=lt,kt=lt+ft.duration;return St!==void 0&&St===Tt.id?!1:!(At<Rt||kt<Ct)}),convertPixelsToSeconds=(dt,$)=>dt/(PIXELS_PER_SECOND*$),TimelineGroupBody=({group:dt})=>{const $=reactExports.useRef(null),lt=useRobartState(Bt=>Bt.timelineState.scale),ft=useRobartState(Bt=>Bt.addBlockToTimeline),St=useRobartState(Bt=>Bt.editingBlockId),Tt=useRobartState(Bt=>Bt.blocks),Ct=useRobartState(Bt=>Bt.timelineState.mode),[At,Rt]=reactExports.useState(),kt=useGesture({onMouseOut:()=>Rt(void 0),onMouseMove:({event:{clientX:Bt}})=>{Rt(Bt)}}),Nt=Bt=>{var Ut,zt;if(Bt!==void 0&&$.current){const Zt=(Ut=$.current.offsetParent)==null?void 0:Ut.offsetLeft,ln=(zt=$.current.parentElement)==null?void 0:zt.scrollLeft,cn=Bt-Zt;return St===void 0||ln===void 0?void 0:(cn+ln)/(PIXELS_PER_SECOND*lt)-Tt[St].duration/2}};return jsxs("div",{className:"relative h-16 rounded bg-blue-300",style:{width:2e3},ref:$,onClick:({clientX:Bt})=>{if(St===void 0||Ct!=="ADD")return;const Ut=Nt(Bt);Ut!==void 0&&!blockOverlaps(dt,Tt,Ut,Tt[St])&&ft(dt.id,St,Ut,!1)},...kt(),children:[Object.values(dt.items).map((Bt,Ut)=>jsx(TimelineBlock,{scale:lt,item:Bt},Ut)),Ct==="ADD"&&jsx(HoverTimelineBlock,{scale:lt,startTime:Nt(At),isOverlapping:blockOverlaps(dt,Tt,Nt(At),Tt[St??""])})]})},TimelineMarker=()=>{const dt=useSimulator($=>$.time);return jsx("div",{className:"min-w-1 absolute z-10 h-full w-1 bg-black",style:{left:PIXELS_PER_SECOND*dt}})},TimelineGroupLabel=({group:dt})=>jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded bg-green-400",children:jsx("div",{className:"text-center font-bold",children:dt.name})}),useRobotManager=create$2()(immer((dt,$)=>({selectedRobotId:void 0,showRenameInput:!1,setSelectedRobotId:lt=>{dt({selectedRobotId:lt})},openRenameInput:()=>{dt({showRenameInput:!0})},closeRenameInput:()=>{dt({showRenameInput:!1})}}))),RobotGroupEditor=()=>{const dt=useRobartState(St=>St.timelineState.groups),$=useRobotManager(St=>St.selectedRobotId),lt=useRobartState(St=>St.addRobotToGroup),ft=useRobartState(St=>St.removeRobotFromGroup);return $===void 0?jsx(Fragment,{}):jsxs("div",{className:"flex flex-col gap-2",children:[jsxs("div",{className:"flex items-center gap-2",children:[jsx("h3",{className:"text-lg font-extrabold",children:"Add Group"}),jsx(Dropdown,{label:jsx(FontAwesomeIcon,{icon:faPlusCircle}),size:"sm",arrowIcon:!1,children:Object.values(dt).filter(St=>!($ in St.robots)).map(St=>jsx(Dropdown.Item,{onClick:()=>{lt(St.id,$)},children:St.name},St.id))})]}),jsx("div",{className:"flex items-center gap-2",children:Object.values(dt).filter(St=>$ in St.robots).map(St=>jsx(Badge,{color:"purple",className:"bg-purple-100",onClick:()=>ft(St.id,$),children:dt[St.id].name},St.id))})]})},StartingPositionEditor=({robotId:dt})=>{const $=useRobartState(Ct=>Ct.robots[dt]),lt=useRobartState(Ct=>Ct.saveRobot),[ft,St]=reactExports.useState([$.startingPosition[0].toString(),$.startingPosition[1].toString(),$.startingPosition[2].toString()]),Tt=Ct=>{Ct.preventDefault();const At=parseFloat(ft[0]),Rt=parseFloat(ft[1]),kt=parseFloat(ft[2]);isNaN(At)||isNaN(Rt)||isNaN(kt)||lt(dt,{startingPosition:[At,Rt,kt]})};return jsxs("div",{children:[jsx("h3",{className:"ml-3 mt-3 text-lg font-extrabold",children:"Starting Position:"}),jsxs("div",{className:"flex gap-2",children:[jsxs("form",{onSubmit:Tt,children:[jsxs("div",{className:clsx("flex flex-col items-center",isNaN(parseFloat(ft[0]))?"border-red-500":""),children:[jsx(TextInput,{id:"x-coordinate",value:ft[0],onChange:Ct=>St(([At,Rt,kt])=>[Ct.target.value,Rt,kt])}),jsx(Label,{htmlFor:"x-coordinate",className:isNaN(parseFloat(ft[0]))?"text-red-500":"",children:"x"})]}),jsxs("div",{className:clsx("flex flex-col items-center",isNaN(parseFloat(ft[0]))?"text-red-500":""),children:[jsx(TextInput,{id:"y-coordinate",value:ft[1],onChange:Ct=>St(([At,Rt,kt])=>[At,Ct.target.value,kt])}),jsx(Label,{htmlFor:"y-coordinate",className:isNaN(parseFloat(ft[1]))?"text-red-500":"",children:"y"})]}),jsxs("div",{className:clsx("flex flex-col items-center",isNaN(parseFloat(ft[2]))?"border-red-500":""),children:[jsx(TextInput,{id:"z-coordinate",value:ft[2],onChange:Ct=>St(([At,Rt,kt])=>[At,Rt,Ct.target.value])}),jsx(Label,{htmlFor:"z-coordinate",className:isNaN(parseFloat(ft[2]))?"text-red-500":"",children:"z"})]}),jsx("input",{className:"hidden",type:"submit"})]}),jsx(IconButton,{icon:faArrowsRotate,text:"Update Position",onClick:Tt})]})]})},RobotEditor=()=>{const dt=useRobartState(Ct=>Ct.robots),$=useRobartState(Ct=>Ct.saveRobot),lt=useRobartState(Ct=>Ct.deleteRobot),ft=useRobotManager(Ct=>Ct.selectedRobotId),St=useRobotManager(Ct=>Ct.setSelectedRobotId);if(reactExports.useEffect(()=>{ft===void 0&&Object.values(dt).length!==0&&St(Object.keys(dt)[0])},[ft,dt]),ft===void 0)return jsx(Fragment,{});const Tt=dt[ft];return jsxs("div",{className:"relative flex basis-4/5 flex-col p-4",children:[jsx(RenamableText,{text:Tt.name,className:"text-4xl font-extrabold",updateText:Ct=>Ct!==""?$(ft,{name:Ct}):$(ft,{name:"Unnamed Robot"})}),jsxs("div",{className:"flex flex-col gap-10",children:[jsx(StartingPositionEditor,{robotId:ft}),jsx(RobotGroupEditor,{})]}),jsx(IconButton,{className:"absolute bottom-0",onClick:()=>{const Ct=ft;St(void 0),lt(Ct)},text:"Delete Robot",icon:faTrash,color:"failure"})]})},RobotSidebar=()=>{const dt=useRobartState(St=>St.robots),$=useRobartState(St=>St.createRobot),lt=useRobotManager(St=>St.setSelectedRobotId),ft=useRobotManager(St=>St.closeRenameInput);return jsxs("div",{className:"flex flex-grow-0 basis-[10%] flex-col items-center gap-2 overflow-y-auto p-4",children:[jsx("h2",{className:"text-lg font-extrabold",children:"Robots"}),Object.values(dt).map(St=>jsx("button",{className:"flex h-8 w-full cursor-pointer items-center justify-center rounded-lg border-2 border-black px-2 text-center",onClick:()=>{ft(),lt(St.id)},children:jsx("span",{className:"overflow-hidden overflow-ellipsis whitespace-nowrap",children:St.name})},St.id)),jsx(IconButton,{icon:faPlusCircle,text:"",onClick:$})]})},RobotManager=()=>jsxs("div",{className:"flex h-full",children:[jsx(RobotSidebar,{}),jsx(RobotEditor,{})]}),RobotManagerModal=()=>{const dt=useUIState(lt=>lt.robotManagerModalOpen),$=useUIState(lt=>lt.toggleRobotManager);return jsxs(Modal,{show:dt,onClose:$,className:"!w-full",size:"w-full h-5/6",children:[jsx(Modal.Header,{children:"Robot Manager"}),jsx(Modal.Body,{className:"h-[80vh]",children:jsx(RobotManager,{})}),jsx(Modal.Footer,{})]})},Timeline=()=>{const dt=useRobartState(Nt=>Nt.timelineState),$=Object.values(dt.groups),lt=useRobartState(Nt=>Nt.timelineState.mode),ft=useRobartState(Nt=>Nt.setTimelineMode),St=useUIState(Nt=>Nt.toggleRobotManager),Tt=useSimulator(Nt=>Nt.status),Ct=useSimulator(Nt=>Nt.play),At=useSimulator(Nt=>Nt.halt),Rt=useSimulator(Nt=>Nt.pause),kt=useSimulator(Nt=>Nt.resume);return jsxs("div",{className:"flex h-full w-full flex-col gap-2 rounded bg-blue-100",children:[jsxs("div",{className:"flex",children:[jsx("div",{className:"flex gap-3 pt-2 pl-3",children:jsxs(Button.Group,{children:[jsx(Button,{color:lt==="ADD"?"info":"gray",onClick:()=>ft("ADD"),children:jsx(FontAwesomeIcon,{icon:faPlusCircle})}),jsx(Button,{color:lt==="MOVE"?"info":"gray",onClick:()=>ft("MOVE"),children:jsx(FontAwesomeIcon,{icon:faArrowsLeftRight})}),jsx(Button,{color:lt==="ERASE"?"info":"gray",onClick:()=>ft("ERASE"),children:jsx(FontAwesomeIcon,{icon:faEraser})})]})}),jsx("div",{className:"flex flex-grow"}),jsxs("div",{className:"flex gap-3 pt-2 pr-3",children:[jsx(IconButton,{icon:faRobot,onClick:St,text:"Manage Robots"}),jsx(RobotManagerModal,{}),Tt==="RUNNING"&&jsx(IconButton,{icon:faPause,onClick:Rt,text:"Pause Sim",color:"gray"}),Tt==="PAUSED"&&jsx(IconButton,{icon:faPlay,onClick:kt,text:"Resume Sim",color:"success"}),Tt==="STOPPED"&&jsx(IconButton,{icon:faPlay,onClick:Ct,text:"Run Sim",color:"success"}),Tt!=="STOPPED"&&jsx(IconButton,{icon:faSquare,onClick:At,text:"Stop Sim",color:"failure"})]})]}),jsx("div",{className:"overflow-y-auto",children:jsxs("div",{className:"flex flex-shrink-0 gap-2",children:[jsx("div",{className:"ml-2 flex h-full flex-col gap-2",children:$.map(Nt=>jsx(TimelineGroupLabel,{group:Nt},Nt.id))}),jsxs("div",{className:"relative flex h-full flex-col gap-2 overflow-x-auto",children:[$.map(Nt=>jsx(TimelineGroupBody,{group:Nt},Nt.id)),jsx(TimelineMarker,{})]})]})})]})};function App(){return jsx(Fragment,{children:jsxs("div",{className:"flex h-screen w-screen flex-col gap-1",children:[jsx(NavigationBar,{}),jsx("div",{className:"flex flex-grow",children:jsxs($3daa5d4c086ea816$export$1d05749f6f573bb,{direction:"vertical",children:[jsx($c33df6d7c39fd3ee$export$2ddb90ad54e5f587,{defaultSize:60,onResize:()=>window.dispatchEvent(new Event("resize")),children:jsxs($3daa5d4c086ea816$export$1d05749f6f573bb,{direction:"horizontal",children:[jsx($c33df6d7c39fd3ee$export$2ddb90ad54e5f587,{defaultSize:50,onResize:()=>window.dispatchEvent(new Event("resize")),children:jsx(BlockEditorPanel,{})}),jsx($971f2c37f9d2b98e$export$8829ecf6b6b15484,{className:"w-2 bg-blue-50 opacity-30 shadow-lg"}),jsx($c33df6d7c39fd3ee$export$2ddb90ad54e5f587,{defaultSize:50,children:jsx(RightPanel,{})})]})}),jsx($971f2c37f9d2b98e$export$8829ecf6b6b15484,{className:"h-2 bg-blue-50 opacity-30 shadow-lg"}),jsx($c33df6d7c39fd3ee$export$2ddb90ad54e5f587,{defaultSize:40,children:jsxs($3daa5d4c086ea816$export$1d05749f6f573bb,{direction:"horizontal",children:[jsx($c33df6d7c39fd3ee$export$2ddb90ad54e5f587,{defaultSize:20,children:jsx(BlockManagerPanel,{})}),jsx($971f2c37f9d2b98e$export$8829ecf6b6b15484,{className:"w-2 bg-blue-50 opacity-30 shadow-lg"}),jsx($c33df6d7c39fd3ee$export$2ddb90ad54e5f587,{children:jsx(Timeline,{})})]})})]})})]})})}const index="";client.createRoot(document.getElementById("root")).render(jsx(React.StrictMode,{children:jsx(App,{})}));
